{"items":[{"tags":["java","augmented-reality","arcore","hittest","sceneform"],"owner":{"account_id":20762182,"reputation":1,"user_id":18822181,"display_name":"Karan Gupta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677882991,"creation_date":1677832467,"question_id":75624802,"body_markdown":"After detecting a HitTest how to create a trackable at that place\r\n\r\nI tried detecting trackables by \r\n```java\r\nCollection &lt;AugmentedImage&gt; trackables  = getArSceneView().getArFrame().getUpdatedTrackables(AugmentedImage.class);\r\n```\r\n\r\nBut after printing size of trackables which are formed by ARCore through Toast it is most of the time zero. Actaually I want a trackable so that I can attach it to anchor node so that it doesn&#39;t shake or move when I move the camera.\r\nBut so far I am not able to place a trackable at the location of HitTest or the AnchorNode at hit test.","title":"How do I create a trackable plane and attach it to an AnchorNode placed at the position of HitTest in ARCore?","body":"<p>After detecting a HitTest how to create a trackable at that place</p>\n<p>I tried detecting trackables by</p>\n<pre class=\"lang-java prettyprint-override\"><code>Collection &lt;AugmentedImage&gt; trackables  = getArSceneView().getArFrame().getUpdatedTrackables(AugmentedImage.class);\n</code></pre>\n<p>But after printing size of trackables which are formed by ARCore through Toast it is most of the time zero. Actaually I want a trackable so that I can attach it to anchor node so that it doesn't shake or move when I move the camera.\nBut so far I am not able to place a trackable at the location of HitTest or the AnchorNode at hit test.</p>\n"},{"tags":["java","quarkus","minio"],"comments":[{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1677836183,"post_id":75619349,"comment_id":133419704,"body_markdown":"I don&#39;t see how a preview is being served in the snippet you posted","body":"I don&#39;t see how a preview is being served in the snippet you posted"},{"owner":{"account_id":5666154,"reputation":533,"user_id":11621071,"display_name":"Kambei"},"score":0,"creation_date":1677836431,"post_id":75619349,"comment_id":133419779,"body_markdown":"the snippet is an example of I get the InputStream from MinIO... I asked for the implementation of how it can be served indeed.","body":"the snippet is an example of I get the InputStream from MinIO... I asked for the implementation of how it can be served indeed."},{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1677836829,"post_id":75619349,"comment_id":133419875,"body_markdown":"You can use `InputStream` in Quarkus if you need to","body":"You can use <code>InputStream</code> in Quarkus if you need to"},{"owner":{"account_id":5666154,"reputation":533,"user_id":11621071,"display_name":"Kambei"},"score":0,"creation_date":1677837552,"post_id":75619349,"comment_id":133420057,"body_markdown":"question edited, maybe it&#39;s more clear and understandable","body":"question edited, maybe it&#39;s more clear and understandable"},{"owner":{"account_id":5666154,"reputation":533,"user_id":11621071,"display_name":"Kambei"},"score":0,"creation_date":1677848023,"post_id":75619349,"comment_id":133422746,"body_markdown":"@geoand a sort of [this](https://stackoverflow.com/questions/69161606/how-to-stream-response-body-in-quarkus-with-kotlin)","body":"@geoand a sort of <a href=\"https://stackoverflow.com/questions/69161606/how-to-stream-response-body-in-quarkus-with-kotlin\">this</a>"}],"answers":[{"tags":[],"owner":{"account_id":5666154,"reputation":533,"user_id":11621071,"display_name":"Kambei"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677881850,"creation_date":1677850418,"answer_id":75627740,"question_id":75619349,"body_markdown":"Thanks to [this](https://github.com/quarkusio/quarkus/issues/18444)\r\n\r\nI was able to solve in this way:\r\n\r\n```\r\n    @GET\r\n    @Path(&quot;/download/{id}/ctx/{ctx}&quot;)\r\n    @Produces(MediaType.APPLICATION_OCTET_STREAM)\r\n    public CompletionStage&lt;Response&gt; downloadFile(@PathParam(&quot;id&quot;) UUID fileId, @PathParam(&quot;ctx&quot;) String ctx,\r\n                                                  @QueryParam(&quot;preview&quot;) boolean preview, @HeaderParam(&quot;Range&quot;) String range) {\r\n\r\n        ResFile resFile;\r\n        try {\r\n            resFile = resFileService.getResFile(fileId, ctx);\r\n        } catch (NotFoundException e) {\r\n            return CompletableFuture.supplyAsync(() -&gt; Response.status(Response.Status.NOT_FOUND).entity(String.format(FILE_NOT_FOUND, fileId)).build());\r\n        }\r\n\r\n\r\n        if (preview) {\r\n\r\n            if (range == null) {\r\n\r\n                String contentType = resFile.getMimeType();\r\n\r\n                return CompletableFuture.supplyAsync(() -&gt; {\r\n                    try {\r\n                        return resFileService.loadFileAsResource(fileId, ctx);\r\n                    } catch (MinIOException e) {\r\n                        return CompletableFuture.supplyAsync(() -&gt; Response.status(Response.Status.INTERNAL_SERVER_ERROR).entity(String.format(SERVER_EXCEPTION, e)).build());\r\n                    } catch (NotFoundException e) {\r\n                        return CompletableFuture.supplyAsync(() -&gt; Response.status(Response.Status.NOT_FOUND).entity(String.format(FILE_NOT_FOUND, fileId)).build());\r\n                    }\r\n                }).thenApplyAsync(file -&gt; {\r\n                    try {\r\n                        return Response.ok((StreamingOutput) output -&gt; {\r\n                                    try (final InputStream is = (InputStream) file) {\r\n                                        IOUtils.copyLarge(is, output);\r\n                                    }\r\n                                }).header(HttpHeaders.CONTENT_DISPOSITION, &quot;inline; filename=\\&quot;&quot; + resFileService.getResFile(fileId, ctx).getFileName() + &quot;\\&quot;&quot;)\r\n                                .header(HttpHeaders.CONTENT_TYPE, contentType)\r\n                                .header(HttpHeaders.CONTENT_LENGTH, resFile.getSize())\r\n                                .status(HttpStatus.SC_PARTIAL_CONTENT).build();\r\n                    } catch (NotFoundException e) {\r\n                        return Response.status(Response.Status.NOT_FOUND).entity(String.format(FILE_NOT_FOUND, fileId)).build();\r\n                    }\r\n                }).handleAsync((r, e) -&gt; {\r\n                    if (e != null) {\r\n                        log.error(&quot;Error&quot;, e);\r\n                        return Response.status(Response.Status.INTERNAL_SERVER_ERROR).entity(String.format(SERVER_EXCEPTION, e)).build();\r\n                    }\r\n                    return r;\r\n                });\r\n\r\n            } else {\r\n\r\n                String[] ranges = range.split(&quot;-&quot;);\r\n                long rangeStart = Long.parseLong(ranges[0].substring(6));\r\n                long rangeEnd;\r\n                if (ranges.length &gt; 1) {\r\n                    rangeEnd = Long.parseLong(ranges[1]);\r\n                } else {\r\n                    rangeEnd = rangeStart + chunkSize;\r\n                }\r\n\r\n                log.info(&quot;@@@Range: {} - {}&quot;, rangeStart, rangeEnd);\r\n\r\n                String contentType = resFile.getMimeType();\r\n\r\n                rangeEnd = Math.min(rangeEnd, resFile.getSize() - 1);\r\n                final String contentLength = String.valueOf((rangeEnd - rangeStart) + 1);\r\n                long finalRangeEnd = rangeEnd;\r\n\r\n                return CompletableFuture.supplyAsync(() -&gt; {\r\n                    try {\r\n                        return resFileService.loadFileAsResource(fileId, ctx);\r\n                    } catch (MinIOException e) {\r\n                        return CompletableFuture.supplyAsync(() -&gt; Response.status(Response.Status.INTERNAL_SERVER_ERROR).entity(String.format(MINIO_EXCEPTION, e)).build());\r\n                    } catch (NotFoundException e) {\r\n                        return CompletableFuture.supplyAsync(() -&gt; Response.status(Response.Status.NOT_FOUND).entity(String.format(FILE_NOT_FOUND, fileId)).build());\r\n                    }\r\n                }).thenApplyAsync(file -&gt; {\r\n                    try {\r\n                        return Response.ok((StreamingOutput) output -&gt; {\r\n                                    try (final InputStream is = (InputStream) file) {\r\n                                        long byets = IOUtils.copyLarge(is, output, rangeStart, finalRangeEnd);\r\n                                        log.info(&quot;@@@Bytes: {}&quot;, byets);\r\n                                    }\r\n                                }).header(HttpHeaders.CONTENT_DISPOSITION, &quot;inline; filename=\\&quot;&quot; + resFileService.getResFile(fileId, ctx).getFileName() + &quot;\\&quot;&quot;)\r\n                                .header(&quot;Accept-Ranges&quot;, &quot;bytes&quot;)\r\n                                .header(HttpHeaders.CONTENT_TYPE, contentType)\r\n                                .header(HttpHeaders.CONTENT_LENGTH, contentLength)\r\n                                .header(&quot;Content-Range&quot;, &quot;bytes &quot; + rangeStart + &quot;-&quot; + finalRangeEnd + &quot;/&quot; + resFile.getSize())\r\n                                .status(HttpStatus.SC_PARTIAL_CONTENT)\r\n                                .build();\r\n                    } catch (NotFoundException e) {\r\n                        log.error(&quot;File not found&quot;, e);\r\n                        return Response.status(Response.Status.NOT_FOUND).entity(String.format(FILE_NOT_FOUND, fileId)).build();\r\n                    }\r\n                }).handleAsync((r, e) -&gt; {\r\n                    if (e != null) {\r\n                        log.error(&quot;Error&quot;, e);\r\n                        return Response.status(Response.Status.INTERNAL_SERVER_ERROR).entity(String.format(SERVER_EXCEPTION, e)).build();\r\n                    }\r\n                    return r;\r\n                });\r\n            }\r\n        } else {\r\n\r\n            String contentType = resFile.getMimeType();\r\n\r\n            return CompletableFuture.supplyAsync(() -&gt; {\r\n                try {\r\n                    return resFileService.loadFileAsResource(fileId, ctx);\r\n                } catch (MinIOException e) {\r\n                    return CompletableFuture.supplyAsync(() -&gt; Response.status(Response.Status.INTERNAL_SERVER_ERROR).entity(String.format(MINIO_EXCEPTION, e)).build());\r\n                } catch (NotFoundException e) {\r\n                    return CompletableFuture.supplyAsync(() -&gt; Response.status(Response.Status.NOT_FOUND).entity(String.format(FILE_NOT_FOUND, fileId)).build());\r\n                }\r\n            }).thenApplyAsync(file -&gt; {\r\n                try {\r\n                    return Response.ok((StreamingOutput) output -&gt; {\r\n                                try (final InputStream is = (InputStream) file) {\r\n                                    IOUtils.copyLarge(is, output);\r\n                                }\r\n                            }).header(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=\\&quot;&quot; + resFileService.getResFile(fileId, ctx).getFileName() + &quot;\\&quot;&quot;)\r\n                            .header(HttpHeaders.CONTENT_TYPE, contentType).build();\r\n                } catch (NotFoundException e) {\r\n                    return Response.status(Response.Status.NOT_FOUND).entity(String.format(FILE_NOT_FOUND, fileId)).build();\r\n                }\r\n            }).handleAsync((r, e) -&gt; {\r\n                if (e != null) {\r\n                    log.error(&quot;Error&quot;, e);\r\n                    return Response.status(Response.Status.INTERNAL_SERVER_ERROR).entity(String.format(SERVER_EXCEPTION, e)).build();\r\n                }\r\n                return r;\r\n            });\r\n        }\r\n    }\r\n```\r\n\r\nNo `Uni` and `AsyncFile` needed.\r\n\r\n","title":"How to use Uni and AsyncFile in Quarkus for serve a preview of large file?","body":"<p>Thanks to <a href=\"https://github.com/quarkusio/quarkus/issues/18444\" rel=\"nofollow noreferrer\">this</a></p>\n<p>I was able to solve in this way:</p>\n<pre><code>    @GET\n    @Path(&quot;/download/{id}/ctx/{ctx}&quot;)\n    @Produces(MediaType.APPLICATION_OCTET_STREAM)\n    public CompletionStage&lt;Response&gt; downloadFile(@PathParam(&quot;id&quot;) UUID fileId, @PathParam(&quot;ctx&quot;) String ctx,\n                                                  @QueryParam(&quot;preview&quot;) boolean preview, @HeaderParam(&quot;Range&quot;) String range) {\n\n        ResFile resFile;\n        try {\n            resFile = resFileService.getResFile(fileId, ctx);\n        } catch (NotFoundException e) {\n            return CompletableFuture.supplyAsync(() -&gt; Response.status(Response.Status.NOT_FOUND).entity(String.format(FILE_NOT_FOUND, fileId)).build());\n        }\n\n\n        if (preview) {\n\n            if (range == null) {\n\n                String contentType = resFile.getMimeType();\n\n                return CompletableFuture.supplyAsync(() -&gt; {\n                    try {\n                        return resFileService.loadFileAsResource(fileId, ctx);\n                    } catch (MinIOException e) {\n                        return CompletableFuture.supplyAsync(() -&gt; Response.status(Response.Status.INTERNAL_SERVER_ERROR).entity(String.format(SERVER_EXCEPTION, e)).build());\n                    } catch (NotFoundException e) {\n                        return CompletableFuture.supplyAsync(() -&gt; Response.status(Response.Status.NOT_FOUND).entity(String.format(FILE_NOT_FOUND, fileId)).build());\n                    }\n                }).thenApplyAsync(file -&gt; {\n                    try {\n                        return Response.ok((StreamingOutput) output -&gt; {\n                                    try (final InputStream is = (InputStream) file) {\n                                        IOUtils.copyLarge(is, output);\n                                    }\n                                }).header(HttpHeaders.CONTENT_DISPOSITION, &quot;inline; filename=\\&quot;&quot; + resFileService.getResFile(fileId, ctx).getFileName() + &quot;\\&quot;&quot;)\n                                .header(HttpHeaders.CONTENT_TYPE, contentType)\n                                .header(HttpHeaders.CONTENT_LENGTH, resFile.getSize())\n                                .status(HttpStatus.SC_PARTIAL_CONTENT).build();\n                    } catch (NotFoundException e) {\n                        return Response.status(Response.Status.NOT_FOUND).entity(String.format(FILE_NOT_FOUND, fileId)).build();\n                    }\n                }).handleAsync((r, e) -&gt; {\n                    if (e != null) {\n                        log.error(&quot;Error&quot;, e);\n                        return Response.status(Response.Status.INTERNAL_SERVER_ERROR).entity(String.format(SERVER_EXCEPTION, e)).build();\n                    }\n                    return r;\n                });\n\n            } else {\n\n                String[] ranges = range.split(&quot;-&quot;);\n                long rangeStart = Long.parseLong(ranges[0].substring(6));\n                long rangeEnd;\n                if (ranges.length &gt; 1) {\n                    rangeEnd = Long.parseLong(ranges[1]);\n                } else {\n                    rangeEnd = rangeStart + chunkSize;\n                }\n\n                log.info(&quot;@@@Range: {} - {}&quot;, rangeStart, rangeEnd);\n\n                String contentType = resFile.getMimeType();\n\n                rangeEnd = Math.min(rangeEnd, resFile.getSize() - 1);\n                final String contentLength = String.valueOf((rangeEnd - rangeStart) + 1);\n                long finalRangeEnd = rangeEnd;\n\n                return CompletableFuture.supplyAsync(() -&gt; {\n                    try {\n                        return resFileService.loadFileAsResource(fileId, ctx);\n                    } catch (MinIOException e) {\n                        return CompletableFuture.supplyAsync(() -&gt; Response.status(Response.Status.INTERNAL_SERVER_ERROR).entity(String.format(MINIO_EXCEPTION, e)).build());\n                    } catch (NotFoundException e) {\n                        return CompletableFuture.supplyAsync(() -&gt; Response.status(Response.Status.NOT_FOUND).entity(String.format(FILE_NOT_FOUND, fileId)).build());\n                    }\n                }).thenApplyAsync(file -&gt; {\n                    try {\n                        return Response.ok((StreamingOutput) output -&gt; {\n                                    try (final InputStream is = (InputStream) file) {\n                                        long byets = IOUtils.copyLarge(is, output, rangeStart, finalRangeEnd);\n                                        log.info(&quot;@@@Bytes: {}&quot;, byets);\n                                    }\n                                }).header(HttpHeaders.CONTENT_DISPOSITION, &quot;inline; filename=\\&quot;&quot; + resFileService.getResFile(fileId, ctx).getFileName() + &quot;\\&quot;&quot;)\n                                .header(&quot;Accept-Ranges&quot;, &quot;bytes&quot;)\n                                .header(HttpHeaders.CONTENT_TYPE, contentType)\n                                .header(HttpHeaders.CONTENT_LENGTH, contentLength)\n                                .header(&quot;Content-Range&quot;, &quot;bytes &quot; + rangeStart + &quot;-&quot; + finalRangeEnd + &quot;/&quot; + resFile.getSize())\n                                .status(HttpStatus.SC_PARTIAL_CONTENT)\n                                .build();\n                    } catch (NotFoundException e) {\n                        log.error(&quot;File not found&quot;, e);\n                        return Response.status(Response.Status.NOT_FOUND).entity(String.format(FILE_NOT_FOUND, fileId)).build();\n                    }\n                }).handleAsync((r, e) -&gt; {\n                    if (e != null) {\n                        log.error(&quot;Error&quot;, e);\n                        return Response.status(Response.Status.INTERNAL_SERVER_ERROR).entity(String.format(SERVER_EXCEPTION, e)).build();\n                    }\n                    return r;\n                });\n            }\n        } else {\n\n            String contentType = resFile.getMimeType();\n\n            return CompletableFuture.supplyAsync(() -&gt; {\n                try {\n                    return resFileService.loadFileAsResource(fileId, ctx);\n                } catch (MinIOException e) {\n                    return CompletableFuture.supplyAsync(() -&gt; Response.status(Response.Status.INTERNAL_SERVER_ERROR).entity(String.format(MINIO_EXCEPTION, e)).build());\n                } catch (NotFoundException e) {\n                    return CompletableFuture.supplyAsync(() -&gt; Response.status(Response.Status.NOT_FOUND).entity(String.format(FILE_NOT_FOUND, fileId)).build());\n                }\n            }).thenApplyAsync(file -&gt; {\n                try {\n                    return Response.ok((StreamingOutput) output -&gt; {\n                                try (final InputStream is = (InputStream) file) {\n                                    IOUtils.copyLarge(is, output);\n                                }\n                            }).header(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=\\&quot;&quot; + resFileService.getResFile(fileId, ctx).getFileName() + &quot;\\&quot;&quot;)\n                            .header(HttpHeaders.CONTENT_TYPE, contentType).build();\n                } catch (NotFoundException e) {\n                    return Response.status(Response.Status.NOT_FOUND).entity(String.format(FILE_NOT_FOUND, fileId)).build();\n                }\n            }).handleAsync((r, e) -&gt; {\n                if (e != null) {\n                    log.error(&quot;Error&quot;, e);\n                    return Response.status(Response.Status.INTERNAL_SERVER_ERROR).entity(String.format(SERVER_EXCEPTION, e)).build();\n                }\n                return r;\n            });\n        }\n    }\n</code></pre>\n<p>No <code>Uni</code> and <code>AsyncFile</code> needed.</p>\n"}],"owner":{"account_id":5666154,"reputation":533,"user_id":11621071,"display_name":"Kambei"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":384,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75627740,"answer_count":1,"score":2,"last_activity_date":1677881850,"creation_date":1677780691,"question_id":75619349,"body_markdown":"How to use `Uni` and `AsyncFile` in Quarkus for serve a preview of a large file as, for example, a `video/mp4` file, while reading it from minio?\r\n\r\nI tried to implement this with `Response` class, following [this](https://github.com/saravanastar/video-streaming), but without success:\r\n```\r\n    @GET\r\n    @Path(&quot;/download/{id}/ctx/{ctx}&quot;)\r\n    @Produces(MediaType.APPLICATION_OCTET_STREAM)\r\n    public Response downloadFile(@PathParam(&quot;id&quot;) UUID fileId, @PathParam(&quot;ctx&quot;) String ctx, @QueryParam(&quot;preview&quot;) boolean preview,\r\n                                 @HeaderParam(value = &quot;Range&quot;) String httpRangeList) {\r\n        try {\r\n\r\n            ResFile resFile = resFileService.getResFile(fileId, ctx);\r\n            String contentType = resFile.getMimeType();\r\n            Long size = resFile.getSize();\r\n\r\n            long rangeStart = 0;\r\n            long rangeEnd = size - 1;\r\n\r\n            if (preview) {\r\n\r\n                if (httpRangeList == null) {\r\n                    return Response.status(Response.Status.OK)\r\n                            .header(&quot;Access-Control-Expose-Headers&quot;, HttpHeaders.CONTENT_DISPOSITION)\r\n                            .header(HttpHeaders.CONTENT_DISPOSITION, &quot;inline; filename=\\&quot;&quot; + resFileService.getResFile(fileId, ctx).getFileName() + &quot;\\&quot;&quot;)\r\n                            .header(HttpHeaders.CONTENT_TYPE, contentType)\r\n                            .header(&quot;Accept-Ranges&quot;, &quot;bytes&quot;)\r\n                            .header(&quot;Content-Range&quot;, &quot;bytes &quot; + rangeStart + &quot;-&quot; + rangeEnd + &quot;/&quot; + size)\r\n                            .header(&quot;Content-Length&quot;, String.valueOf(size))\r\n                            .entity(resFileService.loadFileAsResourceRange(fileId, ctx, rangeStart, size)).build();\r\n                } else {\r\n\r\n                    String[] ranges = httpRangeList.split(&quot;-&quot;);\r\n                    rangeStart = Long.parseLong(ranges[0].substring(6));\r\n                    if (ranges.length &gt; 1) {\r\n                        rangeEnd = Long.parseLong(ranges[1]);\r\n                    } else {\r\n                        rangeEnd = rangeStart + chunkSize;\r\n                    }\r\n\r\n                    rangeEnd = Math.min(rangeEnd, size - 1);\r\n                    final byte[] data = resFileService.loadFileAsResourceRange(fileId, ctx, rangeStart, rangeEnd).readAllBytes();\r\n\r\n                    log.info(&quot;data size: {}&quot;, data.length);\r\n\r\n                    final String contentLength = String.valueOf((rangeEnd - rangeStart) + 1);\r\n\r\n                    if (rangeEnd &gt;= size) {\r\n                        return Response.status(Response.Status.OK)\r\n                                .header(&quot;Access-Control-Expose-Headers&quot;, HttpHeaders.CONTENT_DISPOSITION)\r\n                                .header(HttpHeaders.CONTENT_DISPOSITION, &quot;inline; filename=\\&quot;&quot; + resFileService.getResFile(fileId, ctx).getFileName() + &quot;\\&quot;&quot;)\r\n                                .header(HttpHeaders.CONTENT_TYPE, contentType)\r\n                                .header(&quot;Accept-Ranges&quot;, &quot;bytes&quot;)\r\n                                .header(&quot;Content-Range&quot;, &quot;bytes &quot; + rangeStart + &quot;-&quot; + rangeEnd + &quot;/&quot; + size)\r\n                                .header(&quot;Content-Length&quot;, contentLength)\r\n                                .entity(data).build();\r\n                    }\r\n                    else {\r\n                        return Response.status(Response.Status.PARTIAL_CONTENT)\r\n                                .header(&quot;Access-Control-Expose-Headers&quot;, HttpHeaders.CONTENT_DISPOSITION)\r\n                                .header(HttpHeaders.CONTENT_DISPOSITION, &quot;inline; filename=\\&quot;&quot; + resFileService.getResFile(fileId, ctx).getFileName() + &quot;\\&quot;&quot;)\r\n                                .header(HttpHeaders.CONTENT_TYPE, contentType)\r\n                                .header(&quot;Accept-Ranges&quot;, &quot;bytes&quot;)\r\n                                .header(&quot;Content-Range&quot;, &quot;bytes &quot; + rangeStart + &quot;-&quot; + rangeEnd + &quot;/&quot; + size)\r\n                                .header(&quot;Content-Length&quot;, contentLength)\r\n                                .entity(data).build();\r\n                    }\r\n                }\r\n\r\n            } else {\r\n\r\n                return Response.status(Response.Status.OK)\r\n                        .header(&quot;Access-Control-Expose-Headers&quot;, HttpHeaders.CONTENT_DISPOSITION)\r\n                        .header(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=\\&quot;&quot; + resFileService.getResFile(fileId, ctx).getFileName() + &quot;\\&quot;&quot;)\r\n                        .header(HttpHeaders.CONTENT_TYPE, contentType)\r\n                        .entity(resFileService.loadFileAsResource(fileId, ctx)).build();\r\n            }\r\n        } catch (NotFoundException e) {\r\n            return Response.status(Response.Status.NOT_FOUND).entity(String.format(FILE_NOT_FOUND, fileId)).build();\r\n        } catch (IOException | MinIOException e) {\r\n            return Response.status(Response.Status.INTERNAL_SERVER_ERROR).entity(String.format(MINIO_EXCEPTION, e.getMessage())).build();\r\n        }\r\n    }\r\n```\r\n\r\n```\r\n    public InputStream loadFileAsResource(UUID uuid, String ctx) throws MinIOException, NotFoundException {\r\n\r\n        ResFile resFile = resFileRepository.findByResourceIdAndCtx(uuid, ctx).orElseThrow(() -&gt; new NotFoundException(String.format(RESFILE_NOT_FOUND, uuid)));\r\n        return minIOService.downloadFile(Buckets.FILES.name().toLowerCase(), resFile.getPath());\r\n    }\r\n\r\n    public ByteArrayInputStream loadFileAsResourceRange(UUID fileId, String ctx, Long rangeStart, Long rangeEnd) throws MinIOException, NotFoundException, IOException {\r\n\r\n        ResFile resFile = resFileRepository.findByResourceIdAndCtx(fileId, ctx).orElseThrow(() -&gt; new NotFoundException(String.format(RESFILE_NOT_FOUND, fileId)));\r\n\r\n        Files.copy(minIOService.downloadFile(Buckets.FILES.name().toLowerCase(), resFile.getPath()),\r\n                Paths.get(&quot;/tmp/&quot; + resFile.getFileName()), StandardCopyOption.REPLACE_EXISTING);\r\n\r\n        return new ByteArrayInputStream(IOUtils.toByteArray(new FileInputStream(&quot;/tmp/&quot; + resFile.getFileName())), rangeStart.intValue(), rangeEnd.intValue());\r\n    }\r\n```\r\n\r\n```\r\n    public InputStream downloadFile(String bucket, String filename) throws MinIOException {\r\n        try {\r\n            if(minioClient == null)\r\n                initializeMinIOClient();\r\n            // Get the object from bucket\r\n            return minioClient.getObject(GetObjectArgs.builder().bucket(bucket).object(filename).build());\r\n        } catch (Exception e) {\r\n            throw new MinIOException(String.format(&quot;Error occurred while downloading file &#39;%s&#39; | &quot;, filename), e);\r\n        }\r\n    }\r\n```\r\n\r\nAnd from [this](https://stackoverflow.com/a/72524030/11621071) I read about `Uni` and `AsyncFile`.\r\n\r\nBut I don&#39;t know how to implement it.\r\n\r\nNOTE: Preferably I would like to return dirrectly reading the InputStream without saving the file as I take it from MinIO","title":"How to use Uni and AsyncFile in Quarkus for serve a preview of large file?","body":"<p>How to use <code>Uni</code> and <code>AsyncFile</code> in Quarkus for serve a preview of a large file as, for example, a <code>video/mp4</code> file, while reading it from minio?</p>\n<p>I tried to implement this with <code>Response</code> class, following <a href=\"https://github.com/saravanastar/video-streaming\" rel=\"nofollow noreferrer\">this</a>, but without success:</p>\n<pre><code>    @GET\n    @Path(&quot;/download/{id}/ctx/{ctx}&quot;)\n    @Produces(MediaType.APPLICATION_OCTET_STREAM)\n    public Response downloadFile(@PathParam(&quot;id&quot;) UUID fileId, @PathParam(&quot;ctx&quot;) String ctx, @QueryParam(&quot;preview&quot;) boolean preview,\n                                 @HeaderParam(value = &quot;Range&quot;) String httpRangeList) {\n        try {\n\n            ResFile resFile = resFileService.getResFile(fileId, ctx);\n            String contentType = resFile.getMimeType();\n            Long size = resFile.getSize();\n\n            long rangeStart = 0;\n            long rangeEnd = size - 1;\n\n            if (preview) {\n\n                if (httpRangeList == null) {\n                    return Response.status(Response.Status.OK)\n                            .header(&quot;Access-Control-Expose-Headers&quot;, HttpHeaders.CONTENT_DISPOSITION)\n                            .header(HttpHeaders.CONTENT_DISPOSITION, &quot;inline; filename=\\&quot;&quot; + resFileService.getResFile(fileId, ctx).getFileName() + &quot;\\&quot;&quot;)\n                            .header(HttpHeaders.CONTENT_TYPE, contentType)\n                            .header(&quot;Accept-Ranges&quot;, &quot;bytes&quot;)\n                            .header(&quot;Content-Range&quot;, &quot;bytes &quot; + rangeStart + &quot;-&quot; + rangeEnd + &quot;/&quot; + size)\n                            .header(&quot;Content-Length&quot;, String.valueOf(size))\n                            .entity(resFileService.loadFileAsResourceRange(fileId, ctx, rangeStart, size)).build();\n                } else {\n\n                    String[] ranges = httpRangeList.split(&quot;-&quot;);\n                    rangeStart = Long.parseLong(ranges[0].substring(6));\n                    if (ranges.length &gt; 1) {\n                        rangeEnd = Long.parseLong(ranges[1]);\n                    } else {\n                        rangeEnd = rangeStart + chunkSize;\n                    }\n\n                    rangeEnd = Math.min(rangeEnd, size - 1);\n                    final byte[] data = resFileService.loadFileAsResourceRange(fileId, ctx, rangeStart, rangeEnd).readAllBytes();\n\n                    log.info(&quot;data size: {}&quot;, data.length);\n\n                    final String contentLength = String.valueOf((rangeEnd - rangeStart) + 1);\n\n                    if (rangeEnd &gt;= size) {\n                        return Response.status(Response.Status.OK)\n                                .header(&quot;Access-Control-Expose-Headers&quot;, HttpHeaders.CONTENT_DISPOSITION)\n                                .header(HttpHeaders.CONTENT_DISPOSITION, &quot;inline; filename=\\&quot;&quot; + resFileService.getResFile(fileId, ctx).getFileName() + &quot;\\&quot;&quot;)\n                                .header(HttpHeaders.CONTENT_TYPE, contentType)\n                                .header(&quot;Accept-Ranges&quot;, &quot;bytes&quot;)\n                                .header(&quot;Content-Range&quot;, &quot;bytes &quot; + rangeStart + &quot;-&quot; + rangeEnd + &quot;/&quot; + size)\n                                .header(&quot;Content-Length&quot;, contentLength)\n                                .entity(data).build();\n                    }\n                    else {\n                        return Response.status(Response.Status.PARTIAL_CONTENT)\n                                .header(&quot;Access-Control-Expose-Headers&quot;, HttpHeaders.CONTENT_DISPOSITION)\n                                .header(HttpHeaders.CONTENT_DISPOSITION, &quot;inline; filename=\\&quot;&quot; + resFileService.getResFile(fileId, ctx).getFileName() + &quot;\\&quot;&quot;)\n                                .header(HttpHeaders.CONTENT_TYPE, contentType)\n                                .header(&quot;Accept-Ranges&quot;, &quot;bytes&quot;)\n                                .header(&quot;Content-Range&quot;, &quot;bytes &quot; + rangeStart + &quot;-&quot; + rangeEnd + &quot;/&quot; + size)\n                                .header(&quot;Content-Length&quot;, contentLength)\n                                .entity(data).build();\n                    }\n                }\n\n            } else {\n\n                return Response.status(Response.Status.OK)\n                        .header(&quot;Access-Control-Expose-Headers&quot;, HttpHeaders.CONTENT_DISPOSITION)\n                        .header(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=\\&quot;&quot; + resFileService.getResFile(fileId, ctx).getFileName() + &quot;\\&quot;&quot;)\n                        .header(HttpHeaders.CONTENT_TYPE, contentType)\n                        .entity(resFileService.loadFileAsResource(fileId, ctx)).build();\n            }\n        } catch (NotFoundException e) {\n            return Response.status(Response.Status.NOT_FOUND).entity(String.format(FILE_NOT_FOUND, fileId)).build();\n        } catch (IOException | MinIOException e) {\n            return Response.status(Response.Status.INTERNAL_SERVER_ERROR).entity(String.format(MINIO_EXCEPTION, e.getMessage())).build();\n        }\n    }\n</code></pre>\n<pre><code>    public InputStream loadFileAsResource(UUID uuid, String ctx) throws MinIOException, NotFoundException {\n\n        ResFile resFile = resFileRepository.findByResourceIdAndCtx(uuid, ctx).orElseThrow(() -&gt; new NotFoundException(String.format(RESFILE_NOT_FOUND, uuid)));\n        return minIOService.downloadFile(Buckets.FILES.name().toLowerCase(), resFile.getPath());\n    }\n\n    public ByteArrayInputStream loadFileAsResourceRange(UUID fileId, String ctx, Long rangeStart, Long rangeEnd) throws MinIOException, NotFoundException, IOException {\n\n        ResFile resFile = resFileRepository.findByResourceIdAndCtx(fileId, ctx).orElseThrow(() -&gt; new NotFoundException(String.format(RESFILE_NOT_FOUND, fileId)));\n\n        Files.copy(minIOService.downloadFile(Buckets.FILES.name().toLowerCase(), resFile.getPath()),\n                Paths.get(&quot;/tmp/&quot; + resFile.getFileName()), StandardCopyOption.REPLACE_EXISTING);\n\n        return new ByteArrayInputStream(IOUtils.toByteArray(new FileInputStream(&quot;/tmp/&quot; + resFile.getFileName())), rangeStart.intValue(), rangeEnd.intValue());\n    }\n</code></pre>\n<pre><code>    public InputStream downloadFile(String bucket, String filename) throws MinIOException {\n        try {\n            if(minioClient == null)\n                initializeMinIOClient();\n            // Get the object from bucket\n            return minioClient.getObject(GetObjectArgs.builder().bucket(bucket).object(filename).build());\n        } catch (Exception e) {\n            throw new MinIOException(String.format(&quot;Error occurred while downloading file '%s' | &quot;, filename), e);\n        }\n    }\n</code></pre>\n<p>And from <a href=\"https://stackoverflow.com/a/72524030/11621071\">this</a> I read about <code>Uni</code> and <code>AsyncFile</code>.</p>\n<p>But I don't know how to implement it.</p>\n<p>NOTE: Preferably I would like to return dirrectly reading the InputStream without saving the file as I take it from MinIO</p>\n"},{"tags":["java","spring-boot","instanceof","java-19"],"comments":[{"owner":{"account_id":5174533,"reputation":12742,"user_id":4142130,"display_name":"Hoopje"},"score":1,"creation_date":1672773493,"post_id":74997594,"comment_id":132348513,"body_markdown":"I cannot reproduce your problem. `rec1 instanceof Interface1` returned true, as expected, when I tried it.","body":"I cannot reproduce your problem. <code>rec1 instanceof Interface1</code> returned true, as expected, when I tried it."},{"owner":{"account_id":1476884,"reputation":536,"user_id":5474918,"display_name":"martinspielmann"},"score":0,"creation_date":1672774122,"post_id":74997594,"comment_id":132348674,"body_markdown":"@Hoopje thanks a lot for your efforts. You are completely correct. The behavior was a side effect of spring-boot-devtools and was not related to what I thought it could be o.0 Added answer... Thanks again","body":"@Hoopje thanks a lot for your efforts. You are completely correct. The behavior was a side effect of spring-boot-devtools and was not related to what I thought it could be o.0 Added answer... Thanks again"}],"answers":[{"tags":[],"owner":{"account_id":1476884,"reputation":536,"user_id":5474918,"display_name":"martinspielmann"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672773677,"creation_date":1672773677,"answer_id":74997802,"question_id":74997594,"body_markdown":"Found the root cause to the problem here: https://stackoverflow.com/questions/826319/classcastexception-when-casting-to-the-same-class\r\n\r\nIt is not related to Records or other new Java features.\r\n\r\nThe problem is caused by Spring Boot, or more specifically, the `spring-boot-devtools` dependency present in my project. It introduces an additional class loader to the project. When a class is loaded by different class loaders, they will not be treated as of the same class, although, their canonical class name is in fact the same.\r\n\r\nIn the linked question this led to `ClassCastException`s which look confusing, like:\r\n\r\n    com.pack.Class1 cannot be cast to com.pack.Class1\r\n\r\nIn addition to the failing class casts described in the linked question, the wrong result of the `instanceof` operator is another symptom of the underlying class loader problem.\r\n\r\nHowever, in both cases, the solution is to remove the `spring-boot-devtools` \r\ndependency or configure it specifically to your needs, see http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-devtools-customizing-classload","title":"Record implementing Interface returns false when checked using instanceof (spring-boot, Java 19)","body":"<p>Found the root cause to the problem here: <a href=\"https://stackoverflow.com/questions/826319/classcastexception-when-casting-to-the-same-class\">ClassCastException when casting to the same class</a></p>\n<p>It is not related to Records or other new Java features.</p>\n<p>The problem is caused by Spring Boot, or more specifically, the <code>spring-boot-devtools</code> dependency present in my project. It introduces an additional class loader to the project. When a class is loaded by different class loaders, they will not be treated as of the same class, although, their canonical class name is in fact the same.</p>\n<p>In the linked question this led to <code>ClassCastException</code>s which look confusing, like:</p>\n<pre><code>com.pack.Class1 cannot be cast to com.pack.Class1\n</code></pre>\n<p>In addition to the failing class casts described in the linked question, the wrong result of the <code>instanceof</code> operator is another symptom of the underlying class loader problem.</p>\n<p>However, in both cases, the solution is to remove the <code>spring-boot-devtools</code>\ndependency or configure it specifically to your needs, see <a href=\"http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-devtools-customizing-classload\" rel=\"nofollow noreferrer\">http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-devtools-customizing-classload</a></p>\n"}],"owner":{"account_id":1476884,"reputation":536,"user_id":5474918,"display_name":"martinspielmann"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1619,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74997802,"answer_count":1,"score":1,"last_activity_date":1677881319,"creation_date":1672772265,"question_id":74997594,"body_markdown":"Code example is below.\r\n\r\nI have a Record that implements an Interface.\r\nWhen I check if an object of type Record is an `instanceof` the Interface, the result is `false`.\r\n\r\nIs there any special Java behavior with the combination of Records/Interfaces/instanceof?\r\n\r\nThe following example results illustrates the problem. `isInstanceOf` stays `false`, but I would expect that the condition and thus the variable evaluates to `true`.\r\n\r\n```java\r\ninterface Interface1 {}\r\n\r\nrecord Record1(String foo) implements Interface1 {}\r\n\r\n...\r\n\r\nRecord1 rec1 = new Record1(&quot;foo&quot;);\r\nboolean isInstanceOf = false;\r\n\r\nif (rec1 instanceof Interface1){\r\n    isInstanceOf = true;\r\n}\r\n\r\n// isInstanceOf is still false\r\n```","title":"Record implementing Interface returns false when checked using instanceof (spring-boot, Java 19)","body":"<p>Code example is below.</p>\n<p>I have a Record that implements an Interface.\nWhen I check if an object of type Record is an <code>instanceof</code> the Interface, the result is <code>false</code>.</p>\n<p>Is there any special Java behavior with the combination of Records/Interfaces/instanceof?</p>\n<p>The following example results illustrates the problem. <code>isInstanceOf</code> stays <code>false</code>, but I would expect that the condition and thus the variable evaluates to <code>true</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>interface Interface1 {}\n\nrecord Record1(String foo) implements Interface1 {}\n\n...\n\nRecord1 rec1 = new Record1(&quot;foo&quot;);\nboolean isInstanceOf = false;\n\nif (rec1 instanceof Interface1){\n    isInstanceOf = true;\n}\n\n// isInstanceOf is still false\n</code></pre>\n"},{"tags":["java","amazon-web-services","aws-lambda","aws-api-gateway"],"answers":[{"tags":[],"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677880933,"creation_date":1677866086,"answer_id":75630382,"question_id":75630276,"body_markdown":"For this use case, try using Postman and configure it to pass JSON to the API Gateway endpoint. The API Gateway endpoint passes the JSON to the Lambda function. So in my example here, I have configured an API Gateway endpoint that accepts a PUT request and accepts JSON that specifies a file name. \r\n\r\nThe Lambda function generates a presigned URL and returns it, as shown at bottom of screen shot.\r\n\r\nSee Postman sending the request: \r\n\r\n[![enter image description here][1]][1] \r\n\r\nThe Lambda function gets the value like this within the Lambda handler. No need for input streams or anything like that. Notice the string value you specify within **event.get()** matches the value in JSON. \r\n\r\n    public class UploadHandler implements RequestHandler&lt;Map&lt;String, String&gt;, String&gt; {\r\n    \r\n        @Override\r\n        public String handleRequest(Map&lt;String, String&gt; event, Context context) {\r\n            LambdaLogger logger = context.getLogger();\r\n            String fileName = event.get(&quot;filename&quot;);\r\n    \r\n    ...\r\n\r\nOf course, you have to setup your API gateway endpoint to use that specific Lambda function. Once you do - you can make requests, pass the JSON and the Lambda function can get the value(s). \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SL95Q.png","title":"Pass JSON file to a Java AWS Lambda Function via API Gateway","body":"<p>For this use case, try using Postman and configure it to pass JSON to the API Gateway endpoint. The API Gateway endpoint passes the JSON to the Lambda function. So in my example here, I have configured an API Gateway endpoint that accepts a PUT request and accepts JSON that specifies a file name.</p>\n<p>The Lambda function generates a presigned URL and returns it, as shown at bottom of screen shot.</p>\n<p>See Postman sending the request:</p>\n<p><a href=\"https://i.stack.imgur.com/SL95Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SL95Q.png\" alt=\"enter image description here\" /></a></p>\n<p>The Lambda function gets the value like this within the Lambda handler. No need for input streams or anything like that. Notice the string value you specify within <strong>event.get()</strong> matches the value in JSON.</p>\n<pre><code>public class UploadHandler implements RequestHandler&lt;Map&lt;String, String&gt;, String&gt; {\n\n    @Override\n    public String handleRequest(Map&lt;String, String&gt; event, Context context) {\n        LambdaLogger logger = context.getLogger();\n        String fileName = event.get(&quot;filename&quot;);\n\n...\n</code></pre>\n<p>Of course, you have to setup your API gateway endpoint to use that specific Lambda function. Once you do - you can make requests, pass the JSON and the Lambda function can get the value(s).</p>\n"}],"owner":{"account_id":27929273,"reputation":1,"user_id":21327713,"display_name":"Fabian Misch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":596,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677880988,"creation_date":1677865340,"question_id":75630276,"body_markdown":"I am testing a bit with AWS lambda functions and API Gateway and by now, I can not answer the following question to myself:\r\nWhat is the best practice to parse a JSON Body of a Request via an AWS API Gateway to a Lambda Function?\r\n\r\nI have written several Request Handlers, that parse a JSON Input using a map of String or even a default Java Class. This works quiet well when testing it and just passing the JSON definition to my Lambda function. But when it comes to the part, where I am using curl, the JSON data is, of course, in the request body and my Function is not extracting it. So I am wondering, what is the best way to parse JSON data that is in a Request Body via a Java Method? \r\n\r\nIs there a way to just pass the body through the AWS API Gateway? Or do I just have to use an inputStream in my Java Method and extract the JSON data on my own?\r\n\r\nThanks in advance!","title":"Pass JSON file to a Java AWS Lambda Function via API Gateway","body":"<p>I am testing a bit with AWS lambda functions and API Gateway and by now, I can not answer the following question to myself:\nWhat is the best practice to parse a JSON Body of a Request via an AWS API Gateway to a Lambda Function?</p>\n<p>I have written several Request Handlers, that parse a JSON Input using a map of String or even a default Java Class. This works quiet well when testing it and just passing the JSON definition to my Lambda function. But when it comes to the part, where I am using curl, the JSON data is, of course, in the request body and my Function is not extracting it. So I am wondering, what is the best way to parse JSON data that is in a Request Body via a Java Method?</p>\n<p>Is there a way to just pass the body through the AWS API Gateway? Or do I just have to use an inputStream in my Java Method and extract the JSON data on my own?</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","unit-testing"],"answers":[{"comments":[{"owner":{"account_id":5479459,"reputation":1180,"user_id":4356398,"display_name":"BALA"},"score":0,"creation_date":1524464023,"post_id":49974344,"comment_id":86964792,"body_markdown":"faker is for creating fake data, but for creating an object with fake data for class, requires so much manual interaction.","body":"faker is for creating fake data, but for creating an object with fake data for class, requires so much manual interaction."},{"owner":{"account_id":1068225,"reputation":5459,"user_id":1068167,"accept_rate":97,"display_name":"span"},"score":0,"creation_date":1524464810,"post_id":49974344,"comment_id":86965148,"body_markdown":"Not really, you just write a loop to populate whichever objects you need.","body":"Not really, you just write a loop to populate whichever objects you need."}],"tags":[],"owner":{"account_id":1068225,"reputation":5459,"user_id":1068167,"accept_rate":97,"display_name":"span"},"comment_count":2,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1524463373,"creation_date":1524463373,"answer_id":49974344,"question_id":49974306,"body_markdown":"You can use java Faker:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.github.javafaker&lt;/groupId&gt;\r\n        &lt;artifactId&gt;javafaker&lt;/artifactId&gt;\r\n        &lt;version&gt;0.12&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nExample usage:\r\n\r\n    Faker faker = new Faker();\r\n    \r\n    String name = faker.name().fullName(); // Miss Samanta Schmidt\r\n    String firstName = faker.name().firstName(); // Emory\r\n    String lastName = faker.name().lastName(); // Barton\r\n    \r\n    String streetAddress = faker.address().streetAddress(); // 60018 Sawayn Brooks Suite 449\r\n\r\nProject site: http://dius.github.io/java-faker/","title":"How to create object with fake data in java?","body":"<p>You can use java Faker:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.github.javafaker&lt;/groupId&gt;\n    &lt;artifactId&gt;javafaker&lt;/artifactId&gt;\n    &lt;version&gt;0.12&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre><code>Faker faker = new Faker();\n\nString name = faker.name().fullName(); // Miss Samanta Schmidt\nString firstName = faker.name().firstName(); // Emory\nString lastName = faker.name().lastName(); // Barton\n\nString streetAddress = faker.address().streetAddress(); // 60018 Sawayn Brooks Suite 449\n</code></pre>\n\n<p>Project site: <a href=\"http://dius.github.io/java-faker/\" rel=\"nofollow noreferrer\">http://dius.github.io/java-faker/</a></p>\n"},{"comments":[{"owner":{"account_id":5479459,"reputation":1180,"user_id":4356398,"display_name":"BALA"},"score":0,"creation_date":1524463913,"post_id":49974351,"comment_id":86964750,"body_markdown":"Create an object with fake data, without manual interaction. If I use mockito, again I have to fake all required fields. Instead is there any ways to create object with fake data.","body":"Create an object with fake data, without manual interaction. If I use mockito, again I have to fake all required fields. Instead is there any ways to create object with fake data."}],"tags":[],"owner":{"account_id":4548446,"reputation":3727,"user_id":3694269,"display_name":"Shanu Gupta"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524463406,"creation_date":1524463406,"answer_id":49974351,"question_id":49974306,"body_markdown":"You need not create `Parties` data if you are focussing on `Person` in your tests. You can always write like this:\r\n\r\n    Mockito.doReturn(new ArrayList()).when(your-mocked-person-object.getParties());","title":"How to create object with fake data in java?","body":"<p>You need not create <code>Parties</code> data if you are focussing on <code>Person</code> in your tests. You can always write like this:</p>\n\n<pre><code>Mockito.doReturn(new ArrayList()).when(your-mocked-person-object.getParties());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":477949,"reputation":5606,"user_id":889742,"accept_rate":28,"display_name":"Gonen I"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524464441,"creation_date":1524464441,"answer_id":49974570,"question_id":49974306,"body_markdown":"Here are some tricks that are often used for quick test data:\r\n\r\n1) Create one person object as a base (manually). Various tests need only to modify parts of the data, such as on change the last name, etc.\r\n\r\n2) Create a data generation utility, such as FakePersonCreator. It can use a combination of fixed strings and random data. Write a function that generates a person and have the tests use it.\r\n\r\n3) Use real data as your test data. You can record it from a real program run, and export it into a file. Then you have two options: \r\n\r\n - Read your test data from the file, on test run\r\n   \r\n - Write a utility that generates java code which builds the test\r\n   data  (person ) according to your data file\r\n\r\n4) Keep most of your test data (person) empty. Have each test only set the fields that it needs to check.\r\n\r\n5) Use a mocking framework (e.g. Mockito) to mock the test data. Create mock objects that only return the fields actually needed for testing.","title":"How to create object with fake data in java?","body":"<p>Here are some tricks that are often used for quick test data:</p>\n\n<p>1) Create one person object as a base (manually). Various tests need only to modify parts of the data, such as on change the last name, etc.</p>\n\n<p>2) Create a data generation utility, such as FakePersonCreator. It can use a combination of fixed strings and random data. Write a function that generates a person and have the tests use it.</p>\n\n<p>3) Use real data as your test data. You can record it from a real program run, and export it into a file. Then you have two options: </p>\n\n<ul>\n<li><p>Read your test data from the file, on test run</p></li>\n<li><p>Write a utility that generates java code which builds the test\ndata  (person ) according to your data file</p></li>\n</ul>\n\n<p>4) Keep most of your test data (person) empty. Have each test only set the fields that it needs to check.</p>\n\n<p>5) Use a mocking framework (e.g. Mockito) to mock the test data. Create mock objects that only return the fields actually needed for testing.</p>\n"},{"tags":[],"owner":{"account_id":5479459,"reputation":1180,"user_id":4356398,"display_name":"BALA"},"comment_count":0,"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1524482460,"creation_date":1524482460,"answer_id":49979862,"question_id":49974306,"body_markdown":"Finally, I found a solution for fake the object data from the class by using PODAM library in Java without the manual interaction.\r\n\r\nWe can use Podam library to fake data for object.\r\n\r\n**Dependency**\r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;uk.co.jemos.podam&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;podam&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;7.1.0.RELEASE&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n**Code**\r\n\r\n    PodamFactory factory = new PodamFactoryImpl();\r\n\tPerson myPojo = factory.manufacturePojo(Person.class);\r\n\r\nRef: [PODAM][1]\r\n\r\n\r\n  [1]: http://mtedone.github.io/podam/index.html","title":"How to create object with fake data in java?","body":"<p>Finally, I found a solution for fake the object data from the class by using PODAM library in Java without the manual interaction.</p>\n\n<p>We can use Podam library to fake data for object.</p>\n\n<p><strong>Dependency</strong></p>\n\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;uk.co.jemos.podam&lt;/groupId&gt;\n        &lt;artifactId&gt;podam&lt;/artifactId&gt;\n        &lt;version&gt;7.1.0.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p><strong>Code</strong></p>\n\n<pre><code>PodamFactory factory = new PodamFactoryImpl();\nPerson myPojo = factory.manufacturePojo(Person.class);\n</code></pre>\n\n<p>Ref: <a href=\"http://mtedone.github.io/podam/index.html\" rel=\"noreferrer\">PODAM</a></p>\n"},{"tags":[],"owner":{"account_id":19296,"reputation":17862,"user_id":45112,"accept_rate":71,"display_name":"armandino"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1677880239,"creation_date":1656046975,"answer_id":72739191,"question_id":49974306,"body_markdown":"You can do this with a one-liner using **Instancio**:\r\n\r\n```java\r\nPerson person = Instancio.create(Person.class);\r\n```\r\n\r\nThis returns a populated person including nested objects and collections. You can also use the builder API to customise generated values:\r\n\r\n```java\r\nPerson person = Instancio.of(Person.class)\r\n    .generate(field(&quot;age&quot;), gen -&gt; gen.ints().range(18, 65))\r\n    .create();\r\n```\r\n\r\nIf you use JUnit 5, you can also use it with `@ParameterizedTest`s:\r\n\r\n```java\r\n@ExtendWith(InstancioExtension.class)\r\nclass ExampleTest {\r\n\r\n    @ParameterizedTest\r\n    @InstancioSource\r\n    void example(Person person) {\r\n        // snip...\r\n    }\r\n}\r\n```\r\n\r\nYou can find more examples in the [Instancio user guide][1].\r\n\r\nhttps://www.github.com/instancio/instancio\r\n\r\nDisclaimer: I&#39;m the author of this library.\r\n\r\n  [1]: https://www.instancio.org","title":"How to create object with fake data in java?","body":"<p>You can do this with a one-liner using <strong>Instancio</strong>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Person person = Instancio.create(Person.class);\n</code></pre>\n<p>This returns a populated person including nested objects and collections. You can also use the builder API to customise generated values:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Person person = Instancio.of(Person.class)\n    .generate(field(&quot;age&quot;), gen -&gt; gen.ints().range(18, 65))\n    .create();\n</code></pre>\n<p>If you use JUnit 5, you can also use it with <code>@ParameterizedTest</code>s:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(InstancioExtension.class)\nclass ExampleTest {\n\n    @ParameterizedTest\n    @InstancioSource\n    void example(Person person) {\n        // snip...\n    }\n}\n</code></pre>\n<p>You can find more examples in the <a href=\"https://www.instancio.org\" rel=\"nofollow noreferrer\">Instancio user guide</a>.</p>\n<p><a href=\"https://www.github.com/instancio/instancio\" rel=\"nofollow noreferrer\">https://www.github.com/instancio/instancio</a></p>\n<p>Disclaimer: I'm the author of this library.</p>\n"}],"owner":{"account_id":5479459,"reputation":1180,"user_id":4356398,"display_name":"BALA"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14331,"favorite_count":0,"down_vote_count":2,"up_vote_count":8,"answer_count":5,"score":6,"last_activity_date":1677880239,"creation_date":1524463199,"question_id":49974306,"body_markdown":"Suppose if I want to create an object with fake data for `Person` class, manually It&#39;ll take too much time, And `Person` class internally contains `Parties` class. \r\nIs there any simple ways to create Object with fake data. \r\nBy using mockito we can create object, but again manually faking data is difficult.\r\n\r\n    class Person {\r\n    \tint age;\r\n    \tArrayList&lt;Parties&gt; parties;\r\n    \r\n    \tpublic int getAge() {\r\n    \t\treturn age;\r\n    \t}\r\n    \r\n    \tpublic void setAge(int age) {\r\n    \t\tthis.age = age;\r\n    \t}\r\n    \r\n    \tpublic ArrayList&lt;Parties&gt; getParties() {\r\n    \t\treturn parties;\r\n    \t}\r\n    \r\n    \tpublic void setParties(ArrayList&lt;Parties&gt; parties) {\r\n    \t\tthis.parties = parties;\r\n    \t}\r\n    }\r\n\r\n\r\n    class Parties {\r\n    \tprivate int date, month, year;\r\n    \r\n    \tpublic int getDate() {\r\n    \t\treturn date;\r\n    \t}\r\n    \r\n    \tpublic void setDate(int date) {\r\n    \t\tthis.date = date;\r\n    \t}\r\n    \r\n    \tpublic int getMonth() {\r\n    \t\treturn month;\r\n    \t}\r\n    \r\n    \tpublic void setMonth(int month) {\r\n    \t\tthis.month = month;\r\n    \t}\r\n    \r\n    \tpublic int getYear() {\r\n    \t\treturn year;\r\n    \t}\r\n    \r\n    \tpublic void setYear(int year) {\r\n    \t\tthis.year = year;\r\n    \t}\r\n    }\r\n\r\n","title":"How to create object with fake data in java?","body":"<p>Suppose if I want to create an object with fake data for <code>Person</code> class, manually It'll take too much time, And <code>Person</code> class internally contains <code>Parties</code> class. \nIs there any simple ways to create Object with fake data. \nBy using mockito we can create object, but again manually faking data is difficult.</p>\n\n<pre><code>class Person {\n    int age;\n    ArrayList&lt;Parties&gt; parties;\n\n    public int getAge() {\n        return age;\n    }\n\n    public void setAge(int age) {\n        this.age = age;\n    }\n\n    public ArrayList&lt;Parties&gt; getParties() {\n        return parties;\n    }\n\n    public void setParties(ArrayList&lt;Parties&gt; parties) {\n        this.parties = parties;\n    }\n}\n\n\nclass Parties {\n    private int date, month, year;\n\n    public int getDate() {\n        return date;\n    }\n\n    public void setDate(int date) {\n        this.date = date;\n    }\n\n    public int getMonth() {\n        return month;\n    }\n\n    public void setMonth(int month) {\n        this.month = month;\n    }\n\n    public int getYear() {\n        return year;\n    }\n\n    public void setYear(int year) {\n        this.year = year;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1677880120,"post_id":75625901,"comment_id":133431445,"body_markdown":"Why do you want to use multiple security filter chains? You could use only one filter chain.","body":"Why do you want to use multiple security filter chains? You could use only one filter chain."},{"owner":{"account_id":2412143,"reputation":813,"user_id":2106997,"accept_rate":75,"display_name":"Ole K"},"score":0,"creation_date":1678012076,"post_id":75625901,"comment_id":133447307,"body_markdown":"Project is build up modular. So a module may provide additional `requestMatcher`","body":"Project is build up modular. So a module may provide additional <code>requestMatcher</code>"},{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1678012353,"post_id":75625901,"comment_id":133447344,"body_markdown":"As dmitriys already wrote, there is no way to merge it out of the box, you have to implement it by yourself. dmitriys&#39; answer is a nivce workaround. Every module needs its own  URL sub path.","body":"As dmitriys already wrote, there is no way to merge it out of the box, you have to implement it by yourself. dmitriys&#39; answer is a nivce workaround. Every module needs its own  URL sub path."}],"answers":[{"comments":[{"owner":{"account_id":2412143,"reputation":813,"user_id":2106997,"accept_rate":75,"display_name":"Ole K"},"score":0,"creation_date":1678088002,"post_id":75631735,"comment_id":133458498,"body_markdown":"I only notice a differences in the response status, when an endpoint does not exists while using `securityMatcher`. Instead of HTTP Status 403 I now get HTTP Status 404 Not found","body":"I only notice a differences in the response status, when an endpoint does not exists while using <code>securityMatcher</code>. Instead of HTTP Status 403 I now get HTTP Status 404 Not found"},{"owner":{"account_id":3058717,"reputation":182,"user_id":2591854,"accept_rate":75,"display_name":"user2591854"},"score":0,"creation_date":1695238947,"post_id":75631735,"comment_id":135999522,"body_markdown":"I was porting an application from Spring Boot 2 --&gt; 3 and ran into this problem.  I had two `SecurityFilterChain` `@Beans` configured, but using the `@Order` annotation.  SB3 ignored this ordering and sent all requests to the 1st `SecurityFilterChain` - this prevented any of the form login stuff from running since everything was denied.  I removed the `@Order` annotation on both beans and added `.securityMatcher(&quot;/api/core/**&quot;)` to the first one - this then allowed the browser initiated requests to hit the 2nd `SecurityFilterChain`.","body":"I was porting an application from Spring Boot 2 --&gt; 3 and ran into this problem.  I had two <code>SecurityFilterChain</code> <code>@Beans</code> configured, but using the <code>@Order</code> annotation.  SB3 ignored this ordering and sent all requests to the 1st <code>SecurityFilterChain</code> - this prevented any of the form login stuff from running since everything was denied.  I removed the <code>@Order</code> annotation on both beans and added <code>.securityMatcher(&quot;&#47;api&#47;core&#47;**&quot;)</code> to the first one - this then allowed the browser initiated requests to hit the 2nd <code>SecurityFilterChain</code>."}],"tags":[],"owner":{"account_id":4927037,"reputation":36,"user_id":3968018,"display_name":"dmitriys"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1677880234,"creation_date":1677876452,"answer_id":75631735,"question_id":75625901,"body_markdown":"As I understand. `SecurityFilterChain` beans do not merge `requestMatchers` they just execute matched filters.\r\n\r\nOption that may work (didn&#39;t check):\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http\r\n            .securityMatcher(&quot;/api/core/**&quot;)\r\n            .authorizeHttpRequests(auth -&gt; auth\r\n                .requestMatchers(&quot;/api/core/**&quot;).permitAll()\r\n                .anyRequest().authenticated()\r\n            );\r\n        \r\n        return http.build();\r\n    }\r\n    @Bean\r\n    public SecurityFilterChain filterChainAdditional(HttpSecurity http) throws Exception {\r\n        http\r\n            .securityMatcher(&quot;/api/module2/**&quot;)\r\n            .authorizeHttpRequests(auth -&gt; auth\r\n                .requestMatchers(&quot;/api/module2/**&quot;).permitAll()\r\n                .anyRequest().authenticated()\r\n        );\r\n    \r\n        return http.build();\r\n    }","title":"How to add additional requestMatchers in multiple SecurityFilterChain?","body":"<p>As I understand. <code>SecurityFilterChain</code> beans do not merge <code>requestMatchers</code> they just execute matched filters.</p>\n<p>Option that may work (didn't check):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    http\n        .securityMatcher(&quot;/api/core/**&quot;)\n        .authorizeHttpRequests(auth -&gt; auth\n            .requestMatchers(&quot;/api/core/**&quot;).permitAll()\n            .anyRequest().authenticated()\n        );\n    \n    return http.build();\n}\n@Bean\npublic SecurityFilterChain filterChainAdditional(HttpSecurity http) throws Exception {\n    http\n        .securityMatcher(&quot;/api/module2/**&quot;)\n        .authorizeHttpRequests(auth -&gt; auth\n            .requestMatchers(&quot;/api/module2/**&quot;).permitAll()\n            .anyRequest().authenticated()\n    );\n\n    return http.build();\n}\n</code></pre>\n"}],"owner":{"account_id":2412143,"reputation":813,"user_id":2106997,"accept_rate":75,"display_name":"Ole K"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1074,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75631735,"answer_count":1,"score":0,"last_activity_date":1677880234,"creation_date":1677839357,"question_id":75625901,"body_markdown":"Lets assume I am adding some security in Spring Boot 3 using the `SecurityFilterChain` `@Bean` multiple times.\r\n\r\nThe first `@Bean` looks as follow:\r\n\r\n&lt;!-- laguage: java --&gt;\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n\t\thttp.authorizeHttpRequests(auth -&gt; auth\r\n\t\t\t.requestMatchers(&quot;/api/core/**&quot;).permitAll()\r\n\t\t\t.anyRequest().authenticated()\r\n\t\t);\r\n\r\n\t\treturn http.build();\r\n\t}\r\n\r\nWhile the second `@Bean` is supposed to add **additional `requestMatchers`**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChainAdditional(HttpSecurity http) throws Exception {\r\n\t\thttp.authorizeHttpRequests(auth -&gt; auth\r\n\t\t\t.requestMatchers(&quot;/api/module2/**&quot;).permitAll()\r\n\t\t\t.anyRequest().authenticated()\r\n\t\t);\r\n\r\n\t\treturn http.build();\r\n\t}\r\n\r\nUnfortunately, the second method `filterChainAdditional` is correctly called in the expected order.\r\n**But it does not extend the `requestMatchers`**.\r\n\r\nEven more curious in the second bean all `requestMatchers` seem to be unavailable in the `HttpSecurity` context.\r\n\r\nAnyone has an idea how to solve this probably?","title":"How to add additional requestMatchers in multiple SecurityFilterChain?","body":"<p>Lets assume I am adding some security in Spring Boot 3 using the <code>SecurityFilterChain</code> <code>@Bean</code> multiple times.</p>\n<p>The first <code>@Bean</code> looks as follow:</p>\n\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    http.authorizeHttpRequests(auth -&gt; auth\n        .requestMatchers(&quot;/api/core/**&quot;).permitAll()\n        .anyRequest().authenticated()\n    );\n\n    return http.build();\n}\n</code></pre>\n<p>While the second <code>@Bean</code> is supposed to add <strong>additional <code>requestMatchers</code></strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic SecurityFilterChain filterChainAdditional(HttpSecurity http) throws Exception {\n    http.authorizeHttpRequests(auth -&gt; auth\n        .requestMatchers(&quot;/api/module2/**&quot;).permitAll()\n        .anyRequest().authenticated()\n    );\n\n    return http.build();\n}\n</code></pre>\n<p>Unfortunately, the second method <code>filterChainAdditional</code> is correctly called in the expected order.\n<strong>But it does not extend the <code>requestMatchers</code></strong>.</p>\n<p>Even more curious in the second bean all <code>requestMatchers</code> seem to be unavailable in the <code>HttpSecurity</code> context.</p>\n<p>Anyone has an idea how to solve this probably?</p>\n"},{"tags":["java","weblogic","consul","spring-cloud-consul","sidecar"],"owner":{"account_id":19360818,"reputation":1,"user_id":14156095,"display_name":"Angelo G"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677879820,"creation_date":1677879820,"question_id":75632130,"body_markdown":"I am trying to register all the manage servers running in WebLogic 12 in Consul Discovery Server. In order do do that, I create a war project with **spring-cloud-consul** dependency. This is a spring-boot application. application run with each manage server in WebLogic server.\r\n\r\nHere is the pom.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    ...\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-config-server&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter-consul-discovery&lt;/artifactId&gt;\r\n            &lt;version&gt;3.1.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.retry&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-retry&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-jersey&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n            &lt;artifactId&gt;tomcat-embed-el&lt;/artifactId&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nweblogic.xml\r\n\r\n```\r\n&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;\r\n...\r\n\t&lt;container-descriptor&gt;\r\n\t\t&lt;gzip-compression&gt;\r\n\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t&lt;min-content-length&gt;4096&lt;/min-content-length&gt;\r\n\t\t\t&lt;content-type&gt;text/html&lt;/content-type&gt;\r\n\t\t\t&lt;content-type&gt;text/xml&lt;/content-type&gt;\r\n\t\t\t&lt;content-type&gt;application/json&lt;/content-type&gt;\r\n\t\t\t&lt;content-type&gt;application/x-javascript&lt;/content-type&gt;\r\n\t\t\t&lt;content-type&gt;application/javascript&lt;/content-type&gt;\r\n\t\t\t&lt;content-type&gt;text/javascript&lt;/content-type&gt;\r\n\t\t\t&lt;content-type&gt;text/x-javascript&lt;/content-type&gt;\r\n\t\t\t&lt;content-type&gt;text/x-json&lt;/content-type&gt;\r\n\t\t\t&lt;content-type&gt;text/css&lt;/content-type&gt;\r\n\t\t\t&lt;content-type&gt;text/plain&lt;/content-type&gt;\r\n\t\t&lt;/gzip-compression&gt;\r\n\t\t&lt;servlet-reload-check-secs&gt;-1&lt;/servlet-reload-check-secs&gt;\r\n\t\t&lt;prefer-application-packages&gt;\r\n\t\t\t&lt;package-name&gt;org.slf4j.*&lt;/package-name&gt;\r\n\t\t\t&lt;package-name&gt;org.springframework.*&lt;/package-name&gt;\r\n\t\t\t&lt;package-name&gt;com.ecwid.consul.*&lt;/package-name&gt;\r\n\t\t\t&lt;!-- jsr311 --&gt;\r\n\t\t\t&lt;package-name&gt;javax.ws.rs.*&lt;/package-name&gt;\r\n\t\t\t&lt;!-- javassist --&gt;\r\n\t\t\t&lt;package-name&gt;javassist.*&lt;/package-name&gt;\r\n\t\t\t&lt;!-- aop repackaged --&gt;\r\n\t\t\t&lt;package-name&gt;org.aopalliance.*&lt;/package-name&gt;\r\n\t\t\t&lt;!-- jersey 2 --&gt;\r\n\t\t\t&lt;package-name&gt;jersey.repackaged.*&lt;/package-name&gt;\r\n\t\t\t&lt;package-name&gt;org.glassfish.jersey.*&lt;/package-name&gt;\r\n\t\t\t&lt;package-name&gt;com.sun.research.ws.wadl.*&lt;/package-name&gt;\r\n\t\t\t&lt;!-- hk2 --&gt;\r\n\t\t\t&lt;package-name&gt;org.glassfish.hk2.*&lt;/package-name&gt;\r\n\t\t\t&lt;package-name&gt;org.jvnet.hk2.*&lt;/package-name&gt;\r\n\t\t\t&lt;package-name&gt;org.jvnet.tiger_types.*&lt;/package-name&gt;\r\n\t\t&lt;/prefer-application-packages&gt;\r\n\r\n\t\t&lt;prefer-application-resources&gt;\r\n\t\t\t&lt;resource-name&gt;META-INF/services/javax.servlet.ServletContainerInitializer&lt;/resource-name&gt;\r\n\t\t\t&lt;resource-name&gt;META-INF/services/javax.ws.rs.ext.RuntimeDelegate&lt;/resource-name&gt;\r\n\t\t\t&lt;!-- jersey --&gt;\r\n\t\t\t&lt;resource-name&gt;META-INF/services/org.glassfish.jersey.*&lt;/resource-name&gt;\r\n\t\t\t&lt;resource-name&gt;org.glassfish.jersey.*&lt;/resource-name&gt;\r\n\t\t\t&lt;resource-name&gt;jersey.repackaged.*&lt;/resource-name&gt;\r\n\t\t\t&lt;!-- hk2 --&gt;\r\n\t\t\t&lt;resource-name&gt;META-INF/services/org.glassfish.hk2.*&lt;/resource-name&gt;\r\n\t\t&lt;/prefer-application-resources&gt;\r\n\t&lt;/container-descriptor&gt;\r\n\t&lt;jsp-descriptor&gt;\r\n\t\t&lt;page-check-seconds&gt;-1&lt;/page-check-seconds&gt;\r\n\t&lt;/jsp-descriptor&gt;\r\n&lt;/weblogic-web-app&gt;\r\n```\r\n\r\nWhen I run the consul client as a standalone app it run and register to the consul server fine. But when the consul client run with weblogic with each manage server, the application starts fine but it never get register into the consul server. I don&#39;t see any exception in the logs that can explain the root cause.\r\n\r\nWhen I run the client as a standalone I can see in the logs how it get register into the server.\r\n\r\nI also tried to shutdown the consul server in order to see what happens. The result is that I get an exception telling me that the client cannot reach the server. So it tells me that the client is trying to get to the server in some way.\r\n\r\nAny idea why this is happening? Once I tried to do the same with eureka and had no issues.\r\n\r\nThanks,","title":"Failed to run spring-boot-consul client in weblogic","body":"<p>I am trying to register all the manage servers running in WebLogic 12 in Consul Discovery Server. In order do do that, I create a war project with <strong>spring-cloud-consul</strong> dependency. This is a spring-boot application. application run with each manage server in WebLogic server.</p>\n<p>Here is the pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    ...\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-config-server&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-consul-discovery&lt;/artifactId&gt;\n            &lt;version&gt;3.1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.retry&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-retry&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-jersey&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-embed-el&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>weblogic.xml</p>\n<pre><code>&lt;?xml version='1.0' encoding='UTF-8'?&gt;\n...\n    &lt;container-descriptor&gt;\n        &lt;gzip-compression&gt;\n            &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;min-content-length&gt;4096&lt;/min-content-length&gt;\n            &lt;content-type&gt;text/html&lt;/content-type&gt;\n            &lt;content-type&gt;text/xml&lt;/content-type&gt;\n            &lt;content-type&gt;application/json&lt;/content-type&gt;\n            &lt;content-type&gt;application/x-javascript&lt;/content-type&gt;\n            &lt;content-type&gt;application/javascript&lt;/content-type&gt;\n            &lt;content-type&gt;text/javascript&lt;/content-type&gt;\n            &lt;content-type&gt;text/x-javascript&lt;/content-type&gt;\n            &lt;content-type&gt;text/x-json&lt;/content-type&gt;\n            &lt;content-type&gt;text/css&lt;/content-type&gt;\n            &lt;content-type&gt;text/plain&lt;/content-type&gt;\n        &lt;/gzip-compression&gt;\n        &lt;servlet-reload-check-secs&gt;-1&lt;/servlet-reload-check-secs&gt;\n        &lt;prefer-application-packages&gt;\n            &lt;package-name&gt;org.slf4j.*&lt;/package-name&gt;\n            &lt;package-name&gt;org.springframework.*&lt;/package-name&gt;\n            &lt;package-name&gt;com.ecwid.consul.*&lt;/package-name&gt;\n            &lt;!-- jsr311 --&gt;\n            &lt;package-name&gt;javax.ws.rs.*&lt;/package-name&gt;\n            &lt;!-- javassist --&gt;\n            &lt;package-name&gt;javassist.*&lt;/package-name&gt;\n            &lt;!-- aop repackaged --&gt;\n            &lt;package-name&gt;org.aopalliance.*&lt;/package-name&gt;\n            &lt;!-- jersey 2 --&gt;\n            &lt;package-name&gt;jersey.repackaged.*&lt;/package-name&gt;\n            &lt;package-name&gt;org.glassfish.jersey.*&lt;/package-name&gt;\n            &lt;package-name&gt;com.sun.research.ws.wadl.*&lt;/package-name&gt;\n            &lt;!-- hk2 --&gt;\n            &lt;package-name&gt;org.glassfish.hk2.*&lt;/package-name&gt;\n            &lt;package-name&gt;org.jvnet.hk2.*&lt;/package-name&gt;\n            &lt;package-name&gt;org.jvnet.tiger_types.*&lt;/package-name&gt;\n        &lt;/prefer-application-packages&gt;\n\n        &lt;prefer-application-resources&gt;\n            &lt;resource-name&gt;META-INF/services/javax.servlet.ServletContainerInitializer&lt;/resource-name&gt;\n            &lt;resource-name&gt;META-INF/services/javax.ws.rs.ext.RuntimeDelegate&lt;/resource-name&gt;\n            &lt;!-- jersey --&gt;\n            &lt;resource-name&gt;META-INF/services/org.glassfish.jersey.*&lt;/resource-name&gt;\n            &lt;resource-name&gt;org.glassfish.jersey.*&lt;/resource-name&gt;\n            &lt;resource-name&gt;jersey.repackaged.*&lt;/resource-name&gt;\n            &lt;!-- hk2 --&gt;\n            &lt;resource-name&gt;META-INF/services/org.glassfish.hk2.*&lt;/resource-name&gt;\n        &lt;/prefer-application-resources&gt;\n    &lt;/container-descriptor&gt;\n    &lt;jsp-descriptor&gt;\n        &lt;page-check-seconds&gt;-1&lt;/page-check-seconds&gt;\n    &lt;/jsp-descriptor&gt;\n&lt;/weblogic-web-app&gt;\n</code></pre>\n<p>When I run the consul client as a standalone app it run and register to the consul server fine. But when the consul client run with weblogic with each manage server, the application starts fine but it never get register into the consul server. I don't see any exception in the logs that can explain the root cause.</p>\n<p>When I run the client as a standalone I can see in the logs how it get register into the server.</p>\n<p>I also tried to shutdown the consul server in order to see what happens. The result is that I get an exception telling me that the client cannot reach the server. So it tells me that the client is trying to get to the server in some way.</p>\n<p>Any idea why this is happening? Once I tried to do the same with eureka and had no issues.</p>\n<p>Thanks,</p>\n"},{"tags":["java","kotlin","google-drive-api","android-jetpack-compose"],"comments":[{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":1,"creation_date":1677896087,"post_id":75632121,"comment_id":133433532,"body_markdown":"&quot;Is that a Java pratice to wrap everything in class ?&quot; Yes, Java requires that everything be wrapped in a class.  Kotlin hides that implementation detail from you, although it still happens in the bytecode.","body":"&quot;Is that a Java pratice to wrap everything in class ?&quot; Yes, Java requires that everything be wrapped in a class.  Kotlin hides that implementation detail from you, although it still happens in the bytecode."},{"owner":{"account_id":18265720,"reputation":109,"user_id":13297517,"display_name":"Tessan"},"score":0,"creation_date":1677938052,"post_id":75632121,"comment_id":133437896,"body_markdown":"ok I see! Do you know what&#39;s wrong with the import ?","body":"ok I see! Do you know what&#39;s wrong with the import ?"},{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":0,"creation_date":1677979046,"post_id":75632121,"comment_id":133444204,"body_markdown":"I&#39;m not sure.  I&#39;m guessing here, but [this page](https://cloud.google.com/java/docs/reference/google-auth-library/latest/com.google.auth.http.HttpCredentialsAdapter) suggests that at least `HttpCredentialsAdapter` is part of [google-auth-library](https://github.com/googleapis/google-auth-library-java), so try adding that dependency.","body":"I&#39;m not sure.  I&#39;m guessing here, but <a href=\"https://cloud.google.com/java/docs/reference/google-auth-library/latest/com.google.auth.http.HttpCredentialsAdapter\" rel=\"nofollow noreferrer\">this page</a> suggests that at least <code>HttpCredentialsAdapter</code> is part of <a href=\"https://github.com/googleapis/google-auth-library-java\" rel=\"nofollow noreferrer\">google-auth-library</a>, so try adding that dependency."}],"owner":{"account_id":18265720,"reputation":109,"user_id":13297517,"display_name":"Tessan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":272,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677879721,"creation_date":1677879721,"question_id":75632121,"body_markdown":"Firstly, I don&#39;t know if it&#39;s important to specify it but I&#39;m using Jetpack compose and I&#39;m a beginner in Android development. \r\n\r\nI&#39;m building an app that should communicate with Google Drive in order to upload and download light datas. For that, I tried to add these dependencies in the build.gradle file of my app (as recommended in this [doc page][1]):\r\n\r\n```Gradle\r\ndependencies {\r\n    implementation &#39;com.google.api-client:google-api-client:2.0.0&#39;\r\n    implementation &#39;com.google.oauth-client:google-oauth-client-jetty:1.34.1&#39;\r\n    implementation &#39;com.google.apis:google-api-services-drive:v3-rev20220815-2.0.0&#39;\r\n}\r\n```\r\n\r\nThen I just copy-pasted [this][2] Java sample code in my project and I used the &quot;convert Java to Kotlin&quot; feature of android studio to convert the sample to kotlin code. You can see the result of this conversion here:\r\n\r\n```Kotlin\r\nimport com.google.api.client.googleapis.json.GoogleJsonResponseException\r\nimport com.google.api.client.http.HttpRequestInitializer\r\nimport com.google.api.client.http.javanet.NetHttpTransport\r\nimport com.google.api.client.json.gson.GsonFactory\r\nimport com.google.api.services.drive.Drive\r\nimport com.google.api.services.drive.DriveScopes\r\nimport com.google.auth.http.HttpCredentialsAdapter\r\nimport com.google.auth.oauth2.GoogleCredentials\r\nimport java.io.ByteArrayOutputStream\r\nimport java.io.IOException\r\nimport java.io.OutputStream\r\nimport java.util.*\r\n\r\n/* Class to demonstrate use-case of drive&#39;s download file. */\r\nobject DownloadFile {\r\n    /**\r\n     * Download a Document file in PDF format.\r\n     *\r\n     * @param realFileId file ID of any workspace document format file.\r\n     * @return byte array stream if successful, `null` otherwise.\r\n     * @throws IOException if service account credentials file not found.\r\n     */\r\n    @Throws(IOException::class)\r\n    fun downloadFile(realFileId: String?): ByteArrayOutputStream {\r\n        /* Load pre-authorized user credentials from the environment.\r\n           TODO(developer) - See https://developers.google.com/identity for\r\n          guides on implementing OAuth2 for your application.*/\r\n        val credentials: GoogleCredentials = GoogleCredentials.getApplicationDefault()\r\n            .createScoped(Arrays.asList(DriveScopes.DRIVE_FILE))\r\n        val requestInitializer: HttpRequestInitializer = HttpCredentialsAdapter(\r\n            credentials\r\n        )\r\n\r\n        // Build a new authorized API client service.\r\n        val service = Drive.Builder(\r\n            NetHttpTransport(),\r\n            GsonFactory.getDefaultInstance(),\r\n            requestInitializer\r\n        )\r\n            .setApplicationName(&quot;Drive samples&quot;)\r\n            .build()\r\n        return try {\r\n            val outputStream: OutputStream = ByteArrayOutputStream()\r\n            service.files()[realFileId]\r\n                .executeMediaAndDownloadTo(outputStream)\r\n            outputStream as ByteArrayOutputStream\r\n        } catch (e: GoogleJsonResponseException) {\r\n            // TODO(developer) - handle error appropriately\r\n            System.err.println(&quot;Unable to move file: &quot; + e.details)\r\n            throw e\r\n        }\r\n    }\r\n}\r\n\r\n```\r\nBefore being able to run this code I have 2 importation issues. I can&#39;t import HttpCredentialsAdapter and GoogleCredentials. It seems that com.google.auth can&#39;t be found to import `com.google.auth.http.HttpCredentialsAdapter` and `com.google.auth.oauth2.GoogleCredentials`. What is the correct way to import these modules ?\r\n\r\nFurethermore, I find the sample code a little weird. Why not just create a function downloadFile(Id) directly rather than wrap it in a class DownloadFile? Is that a Java pratice to wrap everything in class ?\r\n\r\n\r\n\r\n  [1]: https://developers.google.com/drive/api/quickstart/java\r\n  [2]: https://developers.google.com/drive/api/guides/manage-uploads","title":"Communication between google drive API and jetpack compose app","body":"<p>Firstly, I don't know if it's important to specify it but I'm using Jetpack compose and I'm a beginner in Android development.</p>\n<p>I'm building an app that should communicate with Google Drive in order to upload and download light datas. For that, I tried to add these dependencies in the build.gradle file of my app (as recommended in this <a href=\"https://developers.google.com/drive/api/quickstart/java\" rel=\"nofollow noreferrer\">doc page</a>):</p>\n<pre><code>dependencies {\n    implementation 'com.google.api-client:google-api-client:2.0.0'\n    implementation 'com.google.oauth-client:google-oauth-client-jetty:1.34.1'\n    implementation 'com.google.apis:google-api-services-drive:v3-rev20220815-2.0.0'\n}\n</code></pre>\n<p>Then I just copy-pasted <a href=\"https://developers.google.com/drive/api/guides/manage-uploads\" rel=\"nofollow noreferrer\">this</a> Java sample code in my project and I used the &quot;convert Java to Kotlin&quot; feature of android studio to convert the sample to kotlin code. You can see the result of this conversion here:</p>\n<pre><code>import com.google.api.client.googleapis.json.GoogleJsonResponseException\nimport com.google.api.client.http.HttpRequestInitializer\nimport com.google.api.client.http.javanet.NetHttpTransport\nimport com.google.api.client.json.gson.GsonFactory\nimport com.google.api.services.drive.Drive\nimport com.google.api.services.drive.DriveScopes\nimport com.google.auth.http.HttpCredentialsAdapter\nimport com.google.auth.oauth2.GoogleCredentials\nimport java.io.ByteArrayOutputStream\nimport java.io.IOException\nimport java.io.OutputStream\nimport java.util.*\n\n/* Class to demonstrate use-case of drive's download file. */\nobject DownloadFile {\n    /**\n     * Download a Document file in PDF format.\n     *\n     * @param realFileId file ID of any workspace document format file.\n     * @return byte array stream if successful, `null` otherwise.\n     * @throws IOException if service account credentials file not found.\n     */\n    @Throws(IOException::class)\n    fun downloadFile(realFileId: String?): ByteArrayOutputStream {\n        /* Load pre-authorized user credentials from the environment.\n           TODO(developer) - See https://developers.google.com/identity for\n          guides on implementing OAuth2 for your application.*/\n        val credentials: GoogleCredentials = GoogleCredentials.getApplicationDefault()\n            .createScoped(Arrays.asList(DriveScopes.DRIVE_FILE))\n        val requestInitializer: HttpRequestInitializer = HttpCredentialsAdapter(\n            credentials\n        )\n\n        // Build a new authorized API client service.\n        val service = Drive.Builder(\n            NetHttpTransport(),\n            GsonFactory.getDefaultInstance(),\n            requestInitializer\n        )\n            .setApplicationName(&quot;Drive samples&quot;)\n            .build()\n        return try {\n            val outputStream: OutputStream = ByteArrayOutputStream()\n            service.files()[realFileId]\n                .executeMediaAndDownloadTo(outputStream)\n            outputStream as ByteArrayOutputStream\n        } catch (e: GoogleJsonResponseException) {\n            // TODO(developer) - handle error appropriately\n            System.err.println(&quot;Unable to move file: &quot; + e.details)\n            throw e\n        }\n    }\n}\n\n</code></pre>\n<p>Before being able to run this code I have 2 importation issues. I can't import HttpCredentialsAdapter and GoogleCredentials. It seems that com.google.auth can't be found to import <code>com.google.auth.http.HttpCredentialsAdapter</code> and <code>com.google.auth.oauth2.GoogleCredentials</code>. What is the correct way to import these modules ?</p>\n<p>Furethermore, I find the sample code a little weird. Why not just create a function downloadFile(Id) directly rather than wrap it in a class DownloadFile? Is that a Java pratice to wrap everything in class ?</p>\n"},{"tags":["java","spring","proxy","annotations"],"comments":[{"owner":{"account_id":222568,"reputation":11754,"user_id":481248,"display_name":"Jason"},"score":0,"creation_date":1550525601,"post_id":54755339,"comment_id":96292886,"body_markdown":"Possibly because when someone implements an interface, they can use whatever parameter names they want to (they don&#39;t have to match the interface definition).","body":"Possibly because when someone implements an interface, they can use whatever parameter names they want to (they don&#39;t have to match the interface definition)."},{"owner":{"account_id":395375,"reputation":7111,"user_id":3591528,"display_name":"teppic"},"score":1,"creation_date":1550529038,"post_id":54755339,"comment_id":96294120,"body_markdown":"[This answer](https://stackoverflow.com/a/41357607/3591528) has some details, but basically there isn&#39;t enough debug info on interfaces for Spring to discover the parameter name by reflection (unless you jump through some hoops).","body":"<a href=\"https://stackoverflow.com/a/41357607/3591528\">This answer</a> has some details, but basically there isn&#39;t enough debug info on interfaces for Spring to discover the parameter name by reflection (unless you jump through some hoops)."}],"owner":{"account_id":13016118,"reputation":21,"user_id":9407292,"display_name":"Khalanirek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":197,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677879643,"creation_date":1550523929,"question_id":54755339,"body_markdown":"I have interface `UserController` and class `UserControllerImpl`.\r\nWhen I add `@RequestMapping` and `@PathVariable` in `UserControllerImpl` and I am using proxy based on class I am able to get user using this URL:\r\n\r\nGET: `http://localhost:8080/company-control/users/25`\r\n\r\nWhen I change proxy to based on interface and add `@RequestMapping` and `@PatyVariable` to interface I am not able to get it and I receive following error:\r\n\r\n&gt; Request processing failed; nested exception is java.lang.IllegalArgumentException: Name for argument type [int] not available, and parameter name information not found in class file either.\r\n\r\nI am able to solve this issue adding `userId` to `@PathVariable`.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @GetMapping(&quot;/{userId}&quot;)\r\n    public User getUser(@PathVariable(&quot;userId&quot;) int userId);\r\n\r\nCould someone explain me why I have to add `userId` to `@PathVariable` if I use the same variable name?\r\n\r\nIs it connected with proxy?","title":"@PathVariable annotation works different with proxy based on Interface/Class","body":"<p>I have interface <code>UserController</code> and class <code>UserControllerImpl</code>.\nWhen I add <code>@RequestMapping</code> and <code>@PathVariable</code> in <code>UserControllerImpl</code> and I am using proxy based on class I am able to get user using this URL:</p>\n<p>GET: <code>http://localhost:8080/company-control/users/25</code></p>\n<p>When I change proxy to based on interface and add <code>@RequestMapping</code> and <code>@PatyVariable</code> to interface I am not able to get it and I receive following error:</p>\n<blockquote>\n<p>Request processing failed; nested exception is java.lang.IllegalArgumentException: Name for argument type [int] not available, and parameter name information not found in class file either.</p>\n</blockquote>\n<p>I am able to solve this issue adding <code>userId</code> to <code>@PathVariable</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/{userId}&quot;)\npublic User getUser(@PathVariable(&quot;userId&quot;) int userId);\n</code></pre>\n<p>Could someone explain me why I have to add <code>userId</code> to <code>@PathVariable</code> if I use the same variable name?</p>\n<p>Is it connected with proxy?</p>\n"},{"tags":["java","spring-mvc","httpclient","inputstream","closeablehttpresponse"],"answers":[{"comments":[{"owner":{"account_id":20621069,"reputation":53,"user_id":15138087,"display_name":"Evgenia Rubanova"},"score":0,"creation_date":1677880160,"post_id":75632113,"comment_id":133431452,"body_markdown":"Thank you for the answer! Could you make the things clear for me: if I&#39;m downloading a large file which size is 200MB, would this file take up that much space in the application memory with this method?","body":"Thank you for the answer! Could you make the things clear for me: if I&#39;m downloading a large file which size is 200MB, would this file take up that much space in the application memory with this method?"},{"owner":{"account_id":4477746,"reputation":1014,"user_id":3642410,"accept_rate":100,"display_name":"Karim"},"score":0,"creation_date":1677885082,"post_id":75632113,"comment_id":133432332,"body_markdown":"Yes if that&#39;s the case, save the file to the disk using FileOutputStream and use FileSystemResource to send it  alternatively you can use UrlResource","body":"Yes if that&#39;s the case, save the file to the disk using FileOutputStream and use FileSystemResource to send it  alternatively you can use UrlResource"}],"tags":[],"owner":{"account_id":4477746,"reputation":1014,"user_id":3642410,"accept_rate":100,"display_name":"Karim"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677879581,"creation_date":1677879581,"answer_id":75632113,"question_id":75632079,"body_markdown":"You can always create a copy of the InputStream obtained from the HttpEntity and use the copy to create the InputStreamResource that is returned in the ResponseEntity. This way, the original InputStream obtained from the HttpEntity can be safely closed before the ResponseEntity is returned.\r\n\r\n    InputStream inputStream = entity.getContent();\r\n    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n    IOUtils.copy(inputStream, outputStream);\r\n    byte[] contentBytes = outputStream.toByteArray();\r\n    ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(contentBytes);\r\n    InputStreamResource inputStreamResource = new InputStreamResource(byteArrayInputStream);\r\n\r\n\r\nOr save use the byte[] and use it to return `ByteArrayResource` instead of `InputStreamResource`","title":"Close CloseableHttpResponse after returning InputStream Spring MVC","body":"<p>You can always create a copy of the InputStream obtained from the HttpEntity and use the copy to create the InputStreamResource that is returned in the ResponseEntity. This way, the original InputStream obtained from the HttpEntity can be safely closed before the ResponseEntity is returned.</p>\n<pre><code>InputStream inputStream = entity.getContent();\nByteArrayOutputStream outputStream = new ByteArrayOutputStream();\nIOUtils.copy(inputStream, outputStream);\nbyte[] contentBytes = outputStream.toByteArray();\nByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(contentBytes);\nInputStreamResource inputStreamResource = new InputStreamResource(byteArrayInputStream);\n</code></pre>\n<p>Or save use the byte[] and use it to return <code>ByteArrayResource</code> instead of <code>InputStreamResource</code></p>\n"}],"owner":{"account_id":20621069,"reputation":53,"user_id":15138087,"display_name":"Evgenia Rubanova"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":307,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677879581,"creation_date":1677879285,"question_id":75632079,"body_markdown":"My controller method returns InputStreamResource in response body. I&#39;am getting InputStream from the CloseableHttpResponse in the TRY block and I close CloseableHttpResponse in FINALLY block. \r\n\r\n*The problem is that finally is called before the return and there is no chance to create InputStreamResource from the InputStream because CloseableHttpResponse is already closed*. \r\n\r\nWhat could be a possible solution in this case? Can I somehow close CloseableHttpResponse after returning InputStreamResource? I really need to use **CloseableHttpClient** and the method should return some **stream**.\r\n\r\n```\r\n    public ResponseEntity&lt;InputStreamResource&gt; getFileAsStream(@PathVariable(&quot;uuid&quot;) String uuid) throws IOException, InterruptedException {\r\n        CloseableHttpResponse response = fileService.importFileByUuid(uuid);\r\n        try {\r\n            HttpEntity entity = response.getEntity();\r\n            HttpHeaders responseHeaders = new HttpHeaders();\r\n            responseHeaders.add(HttpHeaders.CONTENT_LENGTH, String.valueOf(entity.getContentLength()));\r\n            responseHeaders.add(HttpHeaders.CONTENT_TYPE, entity.getContentType().getValue());\r\n            responseHeaders.add(HttpHeaders.CONTENT_DISPOSITION, response.getFirstHeader(HttpHeaders.CONTENT_DISPOSITION).getValue());\r\n\r\n            if (entity != null) {\r\n                InputStream inputStream = entity.getContent();\r\n                InputStreamResource inputStreamResource = new InputStreamResource(inputStream);\r\n                return ResponseEntity.ok()\r\n                            .headers(responseHeaders)\r\n                            .body(inputStreamResource);\r\n            }\r\n            throw new IllegalStateException(String.format(\r\n                    &quot;Error during stream downloading, uuid = %s&quot;, uuid));\r\n        } finally {\r\n            response.close();\r\n        }\r\n    } \r\n```","title":"Close CloseableHttpResponse after returning InputStream Spring MVC","body":"<p>My controller method returns InputStreamResource in response body. I'am getting InputStream from the CloseableHttpResponse in the TRY block and I close CloseableHttpResponse in FINALLY block.</p>\n<p><em>The problem is that finally is called before the return and there is no chance to create InputStreamResource from the InputStream because CloseableHttpResponse is already closed</em>.</p>\n<p>What could be a possible solution in this case? Can I somehow close CloseableHttpResponse after returning InputStreamResource? I really need to use <strong>CloseableHttpClient</strong> and the method should return some <strong>stream</strong>.</p>\n<pre><code>    public ResponseEntity&lt;InputStreamResource&gt; getFileAsStream(@PathVariable(&quot;uuid&quot;) String uuid) throws IOException, InterruptedException {\n        CloseableHttpResponse response = fileService.importFileByUuid(uuid);\n        try {\n            HttpEntity entity = response.getEntity();\n            HttpHeaders responseHeaders = new HttpHeaders();\n            responseHeaders.add(HttpHeaders.CONTENT_LENGTH, String.valueOf(entity.getContentLength()));\n            responseHeaders.add(HttpHeaders.CONTENT_TYPE, entity.getContentType().getValue());\n            responseHeaders.add(HttpHeaders.CONTENT_DISPOSITION, response.getFirstHeader(HttpHeaders.CONTENT_DISPOSITION).getValue());\n\n            if (entity != null) {\n                InputStream inputStream = entity.getContent();\n                InputStreamResource inputStreamResource = new InputStreamResource(inputStream);\n                return ResponseEntity.ok()\n                            .headers(responseHeaders)\n                            .body(inputStreamResource);\n            }\n            throw new IllegalStateException(String.format(\n                    &quot;Error during stream downloading, uuid = %s&quot;, uuid));\n        } finally {\n            response.close();\n        }\n    } \n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","hibernate"],"comments":[{"owner":{"account_id":5167849,"reputation":323,"user_id":4137300,"accept_rate":50,"display_name":"Aleksey Kurkov"},"score":0,"creation_date":1601505708,"post_id":64146396,"comment_id":113433100,"body_markdown":"Where user is logged in? To java application? To spring application? Or to postgres?","body":"Where user is logged in? To java application? To spring application? Or to postgres?"},{"owner":{"account_id":15184804,"reputation":223,"user_id":10957904,"display_name":"Blacit"},"score":0,"creation_date":1601505878,"post_id":64146396,"comment_id":113433143,"body_markdown":"I&#39;m sorry, I forgot to add. Yes. the application is on spring-boot and hibernate, I want to make logs in the table.","body":"I&#39;m sorry, I forgot to add. Yes. the application is on spring-boot and hibernate, I want to make logs in the table."}],"answers":[{"comments":[{"owner":{"account_id":15184804,"reputation":223,"user_id":10957904,"display_name":"Blacit"},"score":0,"creation_date":1601507289,"post_id":64146890,"comment_id":113433487,"body_markdown":"Yes, it&#39;s all ready, I have a full-fledged code) can you show how it will look exactly using SQL queries?) this is exactly what I need, because I already have a full-fledged project :)","body":"Yes, it&#39;s all ready, I have a full-fledged code) can you show how it will look exactly using SQL queries?) this is exactly what I need, because I already have a full-fledged project :)"},{"owner":{"account_id":5167849,"reputation":323,"user_id":4137300,"accept_rate":50,"display_name":"Aleksey Kurkov"},"score":0,"creation_date":1601509516,"post_id":64146890,"comment_id":113433937,"body_markdown":"I&#39;ve added code example. There is no SQL querries, because spring boot will do all job for you :) just create new Log object and save it to repository","body":"I&#39;ve added code example. There is no SQL querries, because spring boot will do all job for you :) just create new Log object and save it to repository"}],"tags":[],"owner":{"account_id":5167849,"reputation":323,"user_id":4137300,"accept_rate":50,"display_name":"Aleksey Kurkov"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1601509273,"creation_date":1601506806,"answer_id":64146890,"question_id":64146396,"body_markdown":"My plan of implementing your example.\r\n\r\n1) Create login page (login, password) with url mapping `/login`. When user writes his credentials, a controller redirects him from `/login` to `/success-login` page. \r\n\r\n2) Create controller with get mapping `/success-login`. When user gets to this page, it means that he is logged in. So here you can write an sql query to postgres table, something like `id=&quot;1&quot;, user=&quot;user1&quot;, event=&quot;log in&quot;`\r\n\r\nModel:\r\n\r\n    @Entity\r\n    public class Log {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n        private Long id;\r\n        String user;\r\n        String event;\r\n    \r\n    // getters, setters, equals, hashcode ...\r\n    }\r\n\r\nRepository:\r\n\r\n    public interface LogRepository extends CrudRepository&lt;Log, Long&gt; {\r\n    }\r\n\r\nController:\r\n\r\n    @Controller\r\n    public class LoginController {\r\n        @Autowired\r\n        LogRepository logRepository;\r\n    \r\n        @GetMapping(&quot;/login-success&quot;)\r\n        public String loginSuccess() {\r\n            Log log = new Log();\r\n            log.setUser(&quot;user1&quot;);\r\n            log.setEvent(&quot;log in&quot;);\r\n            logRepository.save(log);\r\n            return &quot;login-success&quot;;\r\n        }\r\n    }\r\n\r\n","title":"How to write Springboot application logs to a postgresql database","body":"<p>My plan of implementing your example.</p>\n<ol>\n<li><p>Create login page (login, password) with url mapping <code>/login</code>. When user writes his credentials, a controller redirects him from <code>/login</code> to <code>/success-login</code> page.</p>\n</li>\n<li><p>Create controller with get mapping <code>/success-login</code>. When user gets to this page, it means that he is logged in. So here you can write an sql query to postgres table, something like <code>id=&quot;1&quot;, user=&quot;user1&quot;, event=&quot;log in&quot;</code></p>\n</li>\n</ol>\n<p>Model:</p>\n<pre><code>@Entity\npublic class Log {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    String user;\n    String event;\n\n// getters, setters, equals, hashcode ...\n}\n</code></pre>\n<p>Repository:</p>\n<pre><code>public interface LogRepository extends CrudRepository&lt;Log, Long&gt; {\n}\n</code></pre>\n<p>Controller:</p>\n<pre><code>@Controller\npublic class LoginController {\n    @Autowired\n    LogRepository logRepository;\n\n    @GetMapping(&quot;/login-success&quot;)\n    public String loginSuccess() {\n        Log log = new Log();\n        log.setUser(&quot;user1&quot;);\n        log.setEvent(&quot;log in&quot;);\n        logRepository.save(log);\n        return &quot;login-success&quot;;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":15184804,"reputation":223,"user_id":10957904,"display_name":"Blacit"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":628,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1601542637,"accepted_answer_id":64146890,"answer_count":1,"score":0,"last_activity_date":1677878885,"creation_date":1601503506,"question_id":64146396,"body_markdown":"How you can implement transactions in the database, like logging? For example, the user is logged in and this is immediately written to the table.","title":"How to write Springboot application logs to a postgresql database","body":"<p>How you can implement transactions in the database, like logging? For example, the user is logged in and this is immediately written to the table.</p>\n"},{"tags":["java","json","spring","controller"],"comments":[{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1677876245,"post_id":75631690,"comment_id":133430636,"body_markdown":"Do you have the `spring-boot-starter-thymeleaf` dependency?","body":"Do you have the <code>spring-boot-starter-thymeleaf</code> dependency?"},{"owner":{"account_id":25324451,"reputation":47,"user_id":20664080,"display_name":"YourDaddyProgrammer"},"score":0,"creation_date":1677876299,"post_id":75631690,"comment_id":133430647,"body_markdown":"no, why I need it?","body":"no, why I need it?"},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1677876323,"post_id":75631690,"comment_id":133430657,"body_markdown":"Well what type of views are you using? If you&#39;re using resources/templates, you should probably be using Thymeleaf.","body":"Well what type of views are you using? If you&#39;re using resources/templates, you should probably be using Thymeleaf."},{"owner":{"account_id":25324451,"reputation":47,"user_id":20664080,"display_name":"YourDaddyProgrammer"},"score":0,"creation_date":1677876418,"post_id":75631690,"comment_id":133430668,"body_markdown":"No one, in my HTML page is just a Hello World","body":"No one, in my HTML page is just a Hello World"},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1677876471,"post_id":75631690,"comment_id":133430677,"body_markdown":"Did you configure any view resolver?","body":"Did you configure any view resolver?"},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1677876500,"post_id":75631690,"comment_id":133430686,"body_markdown":"In any case, adding `spring-boot-starter-thymeleaf` should allow it to work since your structure is exactly that of a Thymeleaf project.","body":"In any case, adding <code>spring-boot-starter-thymeleaf</code> should allow it to work since your structure is exactly that of a Thymeleaf project."},{"owner":{"account_id":25324451,"reputation":47,"user_id":20664080,"display_name":"YourDaddyProgrammer"},"score":0,"creation_date":1677876501,"post_id":75631690,"comment_id":133430687,"body_markdown":"I try to configure it, but It gives me the same error...","body":"I try to configure it, but It gives me the same error..."}],"answers":[{"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677876906,"creation_date":1677876906,"answer_id":75631788,"question_id":75631690,"body_markdown":"Add the `spring-boot-starter-thymeleaf` dependency. This automatically registers a view resolver for HTML files in src/main/resources/templates.","title":"Is there any possible way to use Controller and RestController annotations in one Spring Boot application?","body":"<p>Add the <code>spring-boot-starter-thymeleaf</code> dependency. This automatically registers a view resolver for HTML files in src/main/resources/templates.</p>\n"}],"owner":{"account_id":25324451,"reputation":47,"user_id":20664080,"display_name":"YourDaddyProgrammer"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75631788,"answer_count":1,"score":0,"last_activity_date":1677876906,"creation_date":1677876025,"question_id":75631690,"body_markdown":"I have my application, which is running on Spring Boot. In my application, I have two controllers, @RestController and @Controller. &lt;br&gt;\r\nRest is for returning JSON data and Controller is for HTML pages. When I try to use these two boys in my one project, it always gives me an error code: &lt;br&gt;\r\n **Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Circular view path [index]: would dispatch back to the current handler URL [/index] again. Check your ViewResolver setup! (Hint: This may be the result of an unspecified view, due to default view name generation.)] with root cause** &lt;br&gt;\r\nMy HTML page is located in **resources:/templates**. &lt;br&gt;\r\nRequestMappingClass:\r\n```java\r\n@RestController\r\n@RequestMapping(value = &quot;/api/&quot;)\r\npublic class PageRestController {\r\n    @GetMapping(value = &quot;/getUserData&quot;)\r\n    public ResponseEntity&lt;User&gt; getUser() {\r\n        User user = new User();\r\n\r\n        user.setName(&quot;Nika&quot;);\r\n        user.setSurname(&quot;Beridze&quot;);\r\n        user.setAge(19);\r\n\r\n        return ResponseEntity.ok().body(user);\r\n    }\r\n}\r\n```\r\nController:\r\n```java\r\n@Controller\r\npublic class PageController {\r\n    @GetMapping(&quot;/index&quot;)\r\n    public String index() {\r\n        return &quot;index&quot;;\r\n    }\r\n}\r\n```","title":"Is there any possible way to use Controller and RestController annotations in one Spring Boot application?","body":"<p>I have my application, which is running on Spring Boot. In my application, I have two controllers, @RestController and @Controller. <br>\nRest is for returning JSON data and Controller is for HTML pages. When I try to use these two boys in my one project, it always gives me an error code: <br>\n<strong>Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Circular view path [index]: would dispatch back to the current handler URL [/index] again. Check your ViewResolver setup! (Hint: This may be the result of an unspecified view, due to default view name generation.)] with root cause</strong> <br>\nMy HTML page is located in <strong>resources:/templates</strong>. <br>\nRequestMappingClass:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequestMapping(value = &quot;/api/&quot;)\npublic class PageRestController {\n    @GetMapping(value = &quot;/getUserData&quot;)\n    public ResponseEntity&lt;User&gt; getUser() {\n        User user = new User();\n\n        user.setName(&quot;Nika&quot;);\n        user.setSurname(&quot;Beridze&quot;);\n        user.setAge(19);\n\n        return ResponseEntity.ok().body(user);\n    }\n}\n</code></pre>\n<p>Controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Controller\npublic class PageController {\n    @GetMapping(&quot;/index&quot;)\n    public String index() {\n        return &quot;index&quot;;\n    }\n}\n</code></pre>\n"},{"tags":["java","project-reactor"],"comments":[{"owner":{"account_id":3168631,"reputation":3561,"user_id":2678097,"display_name":"amanin"},"score":0,"creation_date":1651560537,"post_id":72041322,"comment_id":127386535,"body_markdown":"I think that you might add more details in  your question, to allow answers that better fit your need, or at least that can provide you with good insight of what is or is not possible for your case. The answer from @ricard-kollcaku is good in the specific cases of a random generator source, but to shuffle an existing data source, you&#39;ll need buffering in some way, and also be cautious about the consequences on the thoughput (for example: the first snippet from ricard answer might behave very differently depending on subscription demand, flatMap concurrency, other intermediate operators, etc.)","body":"I think that you might add more details in  your question, to allow answers that better fit your need, or at least that can provide you with good insight of what is or is not possible for your case. The answer from @ricard-kollcaku is good in the specific cases of a random generator source, but to shuffle an existing data source, you&#39;ll need buffering in some way, and also be cautious about the consequences on the thoughput (for example: the first snippet from ricard answer might behave very differently depending on subscription demand, flatMap concurrency, other intermediate operators, etc.)"}],"answers":[{"tags":[],"owner":{"account_id":14976113,"reputation":1632,"user_id":10811516,"display_name":"Ricard Kollcaku"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1677876372,"creation_date":1651142828,"answer_id":72042326,"question_id":72041322,"body_markdown":"I don&#39;t think Reactor has a function that shuffles for you but there is one workaround you can do.\r\nIf you want to keep the upper stream as it is,\r\n\r\n    Random random = new Random();\r\n    Flux.range(1,256)\r\n        .flatMap(integer -&gt; Flux.just(integer).delayElements(Duration.ofMillis(random.nextInt(256))))\r\n        .subscribe(System.out::println);\r\n  }\r\n\r\nIf you need random elements: \r\n\r\n    Flux.range(1,256)\r\n            .map(integer -&gt; random.nextInt(256))\r\n            .subscribe(System.out::println)","title":"Shuffle emissions of a Flux in Reactor?","body":"<p>I don't think Reactor has a function that shuffles for you but there is one workaround you can do.\nIf you want to keep the upper stream as it is,</p>\n<pre><code>Random random = new Random();\nFlux.range(1,256)\n    .flatMap(integer -&gt; Flux.just(integer).delayElements(Duration.ofMillis(random.nextInt(256))))\n    .subscribe(System.out::println);\n</code></pre>\n<p>}</p>\n<p>If you need random elements:</p>\n<pre><code>Flux.range(1,256)\n        .map(integer -&gt; random.nextInt(256))\n        .subscribe(System.out::println)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677876697,"creation_date":1677876647,"answer_id":75631763,"question_id":72041322,"body_markdown":"Another more elegant way is to use `Flux.generate()` to emit a random value:\r\n\r\n    Random random = new Random();\r\n    \r\n    Flux.generate(sink -&gt; sink.next(random.nextInt(256)))\r\n            .subscribe(System.out::println);","title":"Shuffle emissions of a Flux in Reactor?","body":"<p>Another more elegant way is to use <code>Flux.generate()</code> to emit a random value:</p>\n<pre><code>Random random = new Random();\n\nFlux.generate(sink -&gt; sink.next(random.nextInt(256)))\n        .subscribe(System.out::println);\n</code></pre>\n"}],"owner":{"account_id":112364,"reputation":25221,"user_id":296427,"accept_rate":91,"display_name":"pixel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":301,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72042326,"answer_count":2,"score":0,"last_activity_date":1677876697,"creation_date":1651138388,"question_id":72041322,"body_markdown":"I have a `Flux` and I would like to shuffle its emissions.\r\n\r\nSo for emissions: \r\n```\r\n1, 2, 3, ...\r\n```\r\nI would like to have:\r\n```\r\n32, 5, 9, ...\r\n```\r\n\r\nIs it possible in Reactor?","title":"Shuffle emissions of a Flux in Reactor?","body":"<p>I have a <code>Flux</code> and I would like to shuffle its emissions.</p>\n<p>So for emissions:</p>\n<pre><code>1, 2, 3, ...\n</code></pre>\n<p>I would like to have:</p>\n<pre><code>32, 5, 9, ...\n</code></pre>\n<p>Is it possible in Reactor?</p>\n"},{"tags":["java","scala"],"comments":[{"owner":{"account_id":5131293,"reputation":21831,"user_id":4111404,"accept_rate":80,"display_name":"Luis Miguel Mej&#237;a Su&#225;rez"},"score":0,"creation_date":1677880640,"post_id":75631611,"comment_id":133431546,"body_markdown":"The best option is probably to implement the API yourself. Or consider using something more robust like **fs2**. Or, if you don&#39;t care about the lazy nature of `Source` then yeah, just read everything in memory.","body":"The best option is probably to implement the API yourself. Or consider using something more robust like <b>fs2</b>. Or, if you don&#39;t care about the lazy nature of <code>Source</code> then yeah, just read everything in memory."},{"owner":{"account_id":5335286,"reputation":39836,"user_id":4254517,"accept_rate":48,"display_name":"Dima"},"score":2,"creation_date":1677882742,"post_id":75631611,"comment_id":133431932,"body_markdown":"`Thread.currentThread.getContextClassLoader.getResourceAsStream(&quot;keystore.jks&quot;)`","body":"<code>Thread.currentThread.getContextClassLoader.getResourceAsStre&zwnj;&#8203;am(&quot;keystore.jks&quot;)</code>"},{"owner":{"account_id":7034556,"reputation":12335,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":1,"creation_date":1677918865,"post_id":75631611,"comment_id":133435445,"body_markdown":"Just read it directly as `InputStream`","body":"Just read it directly as <code>InputStream</code>"}],"answers":[{"tags":[],"owner":{"account_id":4477746,"reputation":1014,"user_id":3642410,"accept_rate":100,"display_name":"Karim"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1677876512,"creation_date":1677876512,"answer_id":75631743,"question_id":75631611,"body_markdown":"You can convert a BufferedSource to `byte[]` and put it ByteArrayInputStream: something like this will work:\r\n\r\n    import scala.io.Source\r\n    import java.io.InputStream\r\n    \r\n    val bufferedSource: Source = Source.fromResource(&quot;keystore.jks&quot;)\r\n    val inputStream: InputStream = new java.io.ByteArrayInputStream(bufferedSource.getLines().mkString(&quot;\\n&quot;).getBytes(java.nio.charset.StandardCharsets.UTF_8))\r\n\r\n","title":"How to covert a BufferedSource in scala to InputStream?","body":"<p>You can convert a BufferedSource to <code>byte[]</code> and put it ByteArrayInputStream: something like this will work:</p>\n<pre><code>import scala.io.Source\nimport java.io.InputStream\n\nval bufferedSource: Source = Source.fromResource(&quot;keystore.jks&quot;)\nval inputStream: InputStream = new java.io.ByteArrayInputStream(bufferedSource.getLines().mkString(&quot;\\n&quot;).getBytes(java.nio.charset.StandardCharsets.UTF_8))\n</code></pre>\n"}],"owner":{"account_id":2040025,"reputation":159,"user_id":1821469,"accept_rate":75,"display_name":"Paul"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":413,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75631743,"answer_count":1,"score":1,"last_activity_date":1677876512,"creation_date":1677875374,"question_id":75631611,"body_markdown":"I was reading a file from classpath in scala using scala.io.Source using fromResources which provides with a BufferedSource. How can I convert it to an InputStream as a java method invoked expects inputstream.\r\n\r\n```\r\nscala.io.Source.fromResource(&quot;keystore.jks&quot;)\r\n```","title":"How to covert a BufferedSource in scala to InputStream?","body":"<p>I was reading a file from classpath in scala using scala.io.Source using fromResources which provides with a BufferedSource. How can I convert it to an InputStream as a java method invoked expects inputstream.</p>\n<pre><code>scala.io.Source.fromResource(&quot;keystore.jks&quot;)\n</code></pre>\n"},{"tags":["java","android","image-classification","tflite","videosdk.live"],"owner":{"account_id":22987292,"reputation":3,"user_id":17113316,"display_name":"TryingMeBest"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677875689,"creation_date":1677875689,"question_id":75631653,"body_markdown":"I am currently doing a medical app whereby live meetings are implemented using a third-party SDK &quot;videosdk&quot;, and that we do classification on the patient&#39;s emotions during the live meeting. What I am trying to do here is that I want to extract a video frame of the participant during the live meeting, pass that video frame for pre-processing into a bitmap, and pass the bitmap into a tflite model for emotion classification. However, I am stuck towards how we should extract video frames from the current implementation. The following code shows the participant adapter java file from this website: \r\n\r\nhttps://docs.videosdk.live/android/guide/video-and-audio-calling-api-sdk/quick-start\r\n\r\n\r\n```\r\nimport android.graphics.Bitmap;\r\nimport android.os.Build;\r\nimport android.os.CountDownTimer;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport org.webrtc.EglRenderer;\r\nimport org.webrtc.VideoFrame;\r\nimport org.webrtc.VideoSink;\r\nimport org.webrtc.VideoTrack;\r\n\r\nimport java.nio.ByteBuffer;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\nimport live.videosdk.rtc.android.Meeting;\r\nimport live.videosdk.rtc.android.Participant;\r\nimport live.videosdk.rtc.android.Stream;\r\nimport live.videosdk.rtc.android.VideoView;\r\nimport live.videosdk.rtc.android.listeners.MeetingEventListener;\r\nimport live.videosdk.rtc.android.listeners.ParticipantEventListener;\r\n\r\n\r\npublic class ParticipantAdapter extends RecyclerView.Adapter&lt;ParticipantAdapter.PeerViewHolder&gt; {\r\n\r\n    private int containerHeight;\r\n    // creating a empty list which will store all participants\r\n    private final List&lt;Participant&gt; participants = new ArrayList&lt;&gt;();\r\n\r\n\r\n    @NonNull\r\n    @Override\r\n    public PeerViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        containerHeight = parent.getHeight();\r\n        return new PeerViewHolder(LayoutInflater.from(parent.getContext()).inflate(R.layout.item_remote_peer, parent, false));\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull PeerViewHolder holder, int position) {\r\n        Participant participant = participants.get(position);\r\n\r\n        ViewGroup.LayoutParams layoutParams = holder.itemView.getLayoutParams();\r\n        layoutParams.height = containerHeight / 3;\r\n        holder.itemView.setLayoutParams(layoutParams);\r\n\r\n        holder.tvName.setText(participant.getDisplayName());\r\n\r\n        int count = 0;\r\n\r\n        // adding the initial video stream for the participant into the &#39;VideoView&#39;\r\n        for (Map.Entry&lt;String, Stream&gt; entry : participant.getStreams().entrySet()) {\r\n            Stream stream = entry.getValue();\r\n            if (stream.getKind().equalsIgnoreCase(&quot;video&quot;)) {\r\n                holder.participantView.setVisibility(View.VISIBLE);\r\n                VideoTrack videoTrack = (VideoTrack) stream.getTrack();\r\n                holder.participantView.addTrack(videoTrack);\r\n                break;\r\n            }\r\n            ++count;\r\n            Log.d(&quot;Something count: &quot;, String.valueOf(count));\r\n        }\r\n\r\n\r\n        // add Listener to the participant which will update start or stop the video stream of that participant\r\n        participant.addEventListener(new ParticipantEventListener() {\r\n            @Override\r\n            public void onStreamEnabled(Stream stream) {\r\n                if (stream.getKind().equalsIgnoreCase(&quot;video&quot;)) {\r\n                    holder.participantView.setVisibility(View.VISIBLE);\r\n                    VideoTrack videoTrack = (VideoTrack) stream.getTrack();\r\n                    holder.participantView.addTrack(videoTrack);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onStreamDisabled(Stream stream) {\r\n                if (stream.getKind().equalsIgnoreCase(&quot;video&quot;)) {\r\n                    holder.participantView.removeTrack();\r\n                    holder.participantView.setVisibility(View.GONE);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    // this method returns the size of total number of participants\r\n    @Override\r\n    public int getItemCount() {\r\n        return participants.size();\r\n    }\r\n\r\n    static class PeerViewHolder extends RecyclerView.ViewHolder {\r\n        // &#39;VideoView&#39; to show Video Stream\r\n        public VideoView participantView;\r\n        public TextView tvName;\r\n        public View itemView;\r\n\r\n        PeerViewHolder(@NonNull View view) {\r\n            super(view);\r\n            itemView = view;\r\n            tvName = view.findViewById(R.id.tvName);\r\n            participantView = view.findViewById(R.id.participantView);\r\n        }\r\n    }\r\n\r\n\r\n    public ParticipantAdapter(Meeting meeting) {\r\n        // adding the local participant(You) to the list\r\n        participants.add(meeting.getLocalParticipant());\r\n\r\n        // adding Meeting Event listener to get the participant join/leave event in the meeting.\r\n        meeting.addEventListener(new MeetingEventListener() {\r\n            @Override\r\n            public void onParticipantJoined(Participant participant) {\r\n                // add participant to the list\r\n                participants.add(participant);\r\n                notifyItemInserted(participants.size() - 1);\r\n            }\r\n\r\n            @Override\r\n            public void onParticipantLeft(Participant participant) {\r\n                int pos = -1;\r\n                for (int i = 0; i &lt; participants.size(); i++) {\r\n                    if (participants.get(i).getId().equals(participant.getId())) {\r\n                        pos = i;\r\n                        break;\r\n                    }\r\n                }\r\n                // remove participant from the list\r\n                participants.remove(participant);\r\n\r\n                if (pos &gt;= 0) {\r\n                    notifyItemRemoved(pos);\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nI have already tried methods like VideoSink, and have already attempted to try and use VideoFrame to get the buffer, to get the buffer in i420 and doing the conversion process, but all has failed so far. Can anyone help with this?","title":"How to extract a video frame of a participant using videosdk?","body":"<p>I am currently doing a medical app whereby live meetings are implemented using a third-party SDK &quot;videosdk&quot;, and that we do classification on the patient's emotions during the live meeting. What I am trying to do here is that I want to extract a video frame of the participant during the live meeting, pass that video frame for pre-processing into a bitmap, and pass the bitmap into a tflite model for emotion classification. However, I am stuck towards how we should extract video frames from the current implementation. The following code shows the participant adapter java file from this website:</p>\n<p><a href=\"https://docs.videosdk.live/android/guide/video-and-audio-calling-api-sdk/quick-start\" rel=\"nofollow noreferrer\">https://docs.videosdk.live/android/guide/video-and-audio-calling-api-sdk/quick-start</a></p>\n<pre><code>import android.graphics.Bitmap;\nimport android.os.Build;\nimport android.os.CountDownTimer;\nimport android.util.Log;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.TextView;\n\nimport androidx.annotation.NonNull;\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport org.webrtc.EglRenderer;\nimport org.webrtc.VideoFrame;\nimport org.webrtc.VideoSink;\nimport org.webrtc.VideoTrack;\n\nimport java.nio.ByteBuffer;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Map;\n\nimport live.videosdk.rtc.android.Meeting;\nimport live.videosdk.rtc.android.Participant;\nimport live.videosdk.rtc.android.Stream;\nimport live.videosdk.rtc.android.VideoView;\nimport live.videosdk.rtc.android.listeners.MeetingEventListener;\nimport live.videosdk.rtc.android.listeners.ParticipantEventListener;\n\n\npublic class ParticipantAdapter extends RecyclerView.Adapter&lt;ParticipantAdapter.PeerViewHolder&gt; {\n\n    private int containerHeight;\n    // creating a empty list which will store all participants\n    private final List&lt;Participant&gt; participants = new ArrayList&lt;&gt;();\n\n\n    @NonNull\n    @Override\n    public PeerViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        containerHeight = parent.getHeight();\n        return new PeerViewHolder(LayoutInflater.from(parent.getContext()).inflate(R.layout.item_remote_peer, parent, false));\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull PeerViewHolder holder, int position) {\n        Participant participant = participants.get(position);\n\n        ViewGroup.LayoutParams layoutParams = holder.itemView.getLayoutParams();\n        layoutParams.height = containerHeight / 3;\n        holder.itemView.setLayoutParams(layoutParams);\n\n        holder.tvName.setText(participant.getDisplayName());\n\n        int count = 0;\n\n        // adding the initial video stream for the participant into the 'VideoView'\n        for (Map.Entry&lt;String, Stream&gt; entry : participant.getStreams().entrySet()) {\n            Stream stream = entry.getValue();\n            if (stream.getKind().equalsIgnoreCase(&quot;video&quot;)) {\n                holder.participantView.setVisibility(View.VISIBLE);\n                VideoTrack videoTrack = (VideoTrack) stream.getTrack();\n                holder.participantView.addTrack(videoTrack);\n                break;\n            }\n            ++count;\n            Log.d(&quot;Something count: &quot;, String.valueOf(count));\n        }\n\n\n        // add Listener to the participant which will update start or stop the video stream of that participant\n        participant.addEventListener(new ParticipantEventListener() {\n            @Override\n            public void onStreamEnabled(Stream stream) {\n                if (stream.getKind().equalsIgnoreCase(&quot;video&quot;)) {\n                    holder.participantView.setVisibility(View.VISIBLE);\n                    VideoTrack videoTrack = (VideoTrack) stream.getTrack();\n                    holder.participantView.addTrack(videoTrack);\n                }\n            }\n\n            @Override\n            public void onStreamDisabled(Stream stream) {\n                if (stream.getKind().equalsIgnoreCase(&quot;video&quot;)) {\n                    holder.participantView.removeTrack();\n                    holder.participantView.setVisibility(View.GONE);\n                }\n            }\n        });\n    }\n\n    // this method returns the size of total number of participants\n    @Override\n    public int getItemCount() {\n        return participants.size();\n    }\n\n    static class PeerViewHolder extends RecyclerView.ViewHolder {\n        // 'VideoView' to show Video Stream\n        public VideoView participantView;\n        public TextView tvName;\n        public View itemView;\n\n        PeerViewHolder(@NonNull View view) {\n            super(view);\n            itemView = view;\n            tvName = view.findViewById(R.id.tvName);\n            participantView = view.findViewById(R.id.participantView);\n        }\n    }\n\n\n    public ParticipantAdapter(Meeting meeting) {\n        // adding the local participant(You) to the list\n        participants.add(meeting.getLocalParticipant());\n\n        // adding Meeting Event listener to get the participant join/leave event in the meeting.\n        meeting.addEventListener(new MeetingEventListener() {\n            @Override\n            public void onParticipantJoined(Participant participant) {\n                // add participant to the list\n                participants.add(participant);\n                notifyItemInserted(participants.size() - 1);\n            }\n\n            @Override\n            public void onParticipantLeft(Participant participant) {\n                int pos = -1;\n                for (int i = 0; i &lt; participants.size(); i++) {\n                    if (participants.get(i).getId().equals(participant.getId())) {\n                        pos = i;\n                        break;\n                    }\n                }\n                // remove participant from the list\n                participants.remove(participant);\n\n                if (pos &gt;= 0) {\n                    notifyItemRemoved(pos);\n                }\n            }\n        });\n\n    }\n}\n</code></pre>\n<p>I have already tried methods like VideoSink, and have already attempted to try and use VideoFrame to get the buffer, to get the buffer in i420 and doing the conversion process, but all has failed so far. Can anyone help with this?</p>\n"},{"tags":["java","spring-boot"],"owner":{"account_id":4883421,"reputation":337,"user_id":3936513,"display_name":"VG P"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677875658,"creation_date":1677817111,"question_id":75623121,"body_markdown":"```\r\nimport java.io.ByteArrayOutputStream;\r\n\r\n@Controller\r\n@RestController\r\n@RequestMapping\r\npublic class SplitPDFBySizeController {\r\n@RequestMapping(value = &quot;/upload/single/pdf/for/split/by/size&quot;, method = RequestMethod.POST)\r\n\tpublic void uploadFiles(HttpServletRequest request, HttpServletResponse response,\r\n\t\t\t@RequestParam(&quot;splitFile&quot;) MultipartFile splitFile) {\r\n\r\n\t\ttry {\r\n\t\t\tInputStream source = splitFile.getInputStream();\r\n\r\n\t\t\tList&lt;ByteArrayOutputStream&gt; mergedFileStream = splitFileBySize(source);\r\n\r\n\t\t\tresponse.setHeader(&quot;Expires&quot;, &quot;0&quot;);\r\n\t\t\tresponse.setContentType(&quot;application/zip&quot;);\r\n\t\t\t//response.setContentType(&quot;octate-stream&quot;);\r\n\t\t\tresponse.addHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=pdfsplit.zip&quot;);\r\n\r\n\r\n\t\t\tByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n\t\t\tfor (ByteArrayOutputStream outputStream : mergedFileStream) {\r\n\t\t\t\tbaos.write(outputStream.toByteArray());\r\n\t\t\t}\r\n\r\n\t\t\tbyte[] totalBytes = baos.toByteArray(); // The concatenated byte array, ready to use\r\n\t\t\t\r\n\t\t     \r\n\t\t\tresponse.setContentLength(totalBytes.length);\r\n\t\t\tresponseOutputStream.write(totalBytes);\r\n\t\t\tresponseOutputStream.flush();\r\n\t\t\t//responseOutputStream.close();\r\n\t\t\tSystem.out.println(&quot;process completed&quot;);\r\n\t\t} catch (Exception exception) {\r\n\t\t\texception.printStackTrace();\r\n\t\t}\r\n\t}\r\n        \r\n\t\tprivate List&lt;ByteArrayOutputStream&gt; splitFileBySize(InputStream srcPdfFile) {\r\n\t\t\tList&lt;ByteArrayOutputStream&gt; files = new ArrayList&lt;&gt;(); \r\n\t\t\ttry {\r\n\t\t\t\t\r\n\t\t\t\t PdfDocument pdfDoc = new PdfDocument(new PdfReader(srcPdfFile));\r\n\r\n\t\t\t        List&lt;PdfDocument&gt; splitDocuments = new PdfSplitter(pdfDoc) {\r\n\t\t\t            @Override\r\n\t\t\t            protected PdfWriter getNextPdfWriter(PageRange documentPageRange) {\r\n\t\t\t            \tByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\r\n\t\t\t            \tPdfWriter pdfWriter = new PdfWriter(byteArrayOutputStream);\r\n\t\t\t            \tfiles.add(byteArrayOutputStream);\r\n\t\t\t                return pdfWriter;\r\n\t\t\t            }\r\n\t\t\t        }.splitBySize(2000);\r\n\t\t\t        \r\n\t\t\t      \r\n\t\t\t        for (PdfDocument doc : splitDocuments) {\r\n\t\t\t            doc.close();\r\n\t\t\t        }\r\n\r\n\t\t\t        pdfDoc.close();\r\n\t\t\t\t\r\n\t\t\t\r\n\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t\treturn files;\r\n\t\t}\r\n}\r\n```\r\n\r\nUsing Itext7 pdf file is splitted in to multiple files which is working fine and output received as ByteArrayOutputStream for each splitted file.I have combained all ByteArrayOutputStream to one ByteArrayOutputStream in list and Zip is coming as response, but I am not able to open zip as it reported as cannot open zip archive, Is not archive. How to send it as valid zip response?\r\n\r\n","title":"How to return zip file in spring boot as a response using ByteArrayOutputStream","body":"<pre><code>import java.io.ByteArrayOutputStream;\n\n@Controller\n@RestController\n@RequestMapping\npublic class SplitPDFBySizeController {\n@RequestMapping(value = &quot;/upload/single/pdf/for/split/by/size&quot;, method = RequestMethod.POST)\n    public void uploadFiles(HttpServletRequest request, HttpServletResponse response,\n            @RequestParam(&quot;splitFile&quot;) MultipartFile splitFile) {\n\n        try {\n            InputStream source = splitFile.getInputStream();\n\n            List&lt;ByteArrayOutputStream&gt; mergedFileStream = splitFileBySize(source);\n\n            response.setHeader(&quot;Expires&quot;, &quot;0&quot;);\n            response.setContentType(&quot;application/zip&quot;);\n            //response.setContentType(&quot;octate-stream&quot;);\n            response.addHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=pdfsplit.zip&quot;);\n\n\n            ByteArrayOutputStream baos = new ByteArrayOutputStream();\n            for (ByteArrayOutputStream outputStream : mergedFileStream) {\n                baos.write(outputStream.toByteArray());\n            }\n\n            byte[] totalBytes = baos.toByteArray(); // The concatenated byte array, ready to use\n            \n             \n            response.setContentLength(totalBytes.length);\n            responseOutputStream.write(totalBytes);\n            responseOutputStream.flush();\n            //responseOutputStream.close();\n            System.out.println(&quot;process completed&quot;);\n        } catch (Exception exception) {\n            exception.printStackTrace();\n        }\n    }\n        \n        private List&lt;ByteArrayOutputStream&gt; splitFileBySize(InputStream srcPdfFile) {\n            List&lt;ByteArrayOutputStream&gt; files = new ArrayList&lt;&gt;(); \n            try {\n                \n                 PdfDocument pdfDoc = new PdfDocument(new PdfReader(srcPdfFile));\n\n                    List&lt;PdfDocument&gt; splitDocuments = new PdfSplitter(pdfDoc) {\n                        @Override\n                        protected PdfWriter getNextPdfWriter(PageRange documentPageRange) {\n                            ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\n                            PdfWriter pdfWriter = new PdfWriter(byteArrayOutputStream);\n                            files.add(byteArrayOutputStream);\n                            return pdfWriter;\n                        }\n                    }.splitBySize(2000);\n                    \n                  \n                    for (PdfDocument doc : splitDocuments) {\n                        doc.close();\n                    }\n\n                    pdfDoc.close();\n                \n            \n\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n            return files;\n        }\n}\n</code></pre>\n<p>Using Itext7 pdf file is splitted in to multiple files which is working fine and output received as ByteArrayOutputStream for each splitted file.I have combained all ByteArrayOutputStream to one ByteArrayOutputStream in list and Zip is coming as response, but I am not able to open zip as it reported as cannot open zip archive, Is not archive. How to send it as valid zip response?</p>\n"},{"tags":["java","algorithm"],"comments":[{"owner":{"account_id":16400961,"reputation":814,"user_id":11846953,"display_name":"John Bayko"},"score":0,"creation_date":1677856316,"post_id":75628673,"comment_id":133425279,"body_markdown":"What restrictions are on the weights? If none, set w[0] = ex / p[0] and set all other weights to 0.0 (which is ridiculous).","body":"What restrictions are on the weights? If none, set w[0] = ex / p[0] and set all other weights to 0.0 (which is ridiculous)."},{"owner":{"account_id":26936914,"reputation":3,"user_id":20508410,"display_name":"Duy Pham Nguyen"},"score":0,"creation_date":1677856848,"post_id":75628673,"comment_id":133425452,"body_markdown":"Right now there are no restrictions but that would not be the best solution. I would like to keep the weights somewhat relative to its price.","body":"Right now there are no restrictions but that would not be the best solution. I would like to keep the weights somewhat relative to its price."},{"owner":{"account_id":26936914,"reputation":3,"user_id":20508410,"display_name":"Duy Pham Nguyen"},"score":0,"creation_date":1677857229,"post_id":75628673,"comment_id":133425562,"body_markdown":"The only restrictions i have right now is that the weight should not be below 0, which is quite trivial, because probability cannot be negative","body":"The only restrictions i have right now is that the weight should not be below 0, which is quite trivial, because probability cannot be negative"}],"answers":[{"tags":[],"owner":{"account_id":286249,"reputation":43961,"user_id":585411,"accept_rate":60,"display_name":"btilly"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677875642,"creation_date":1677875642,"answer_id":75631643,"question_id":75628673,"body_markdown":"There are literally an infinite number of ways to do this.  It all depends on how you want your weights to be distributed.\r\n\r\nFor example you can decide that your weights have to follow a rule like this:\r\n\r\n    weight is proportional to Math.exp((price - k)*(price - k))\r\n\r\nNow as `k` goes to - infinity, the average price goes to the bottom price in your list.  Given `k` you can easily calculate what the average price should be.  As `k` goes to + infinity, the average price goes to the top price\r\n\r\nThere is no analytical way to figure out what `k` should be, but you can easily search with something like this untested code.\r\n\r\n    double k0 = 0.0;\r\n    double k1 = 1.0;\r\n    double epsilon = 0.00001;\r\n    while (averagePrice(k1) &lt; desiredPrice) {\r\n        k0 = k1;\r\n        k1 += k1;\r\n    }\r\n    if (desiredPrice &lt; averagePrice(k0)) {\r\n        k0 = -1;\r\n        k1 = 0;\r\n        while (desiredPrice &lt; averagePrice(k0)) {\r\n            k1 = k0;\r\n            k0 -= k0;\r\n        }\r\n    }\r\n    while (k0 + epsilon) {\r\n        kMid = (k0 + k1)/2;\r\n        double averageMid = averagePrice(kMid);\r\n        if (averageMid &lt; desiredPrice) {\r\n            k0 = kMid;\r\n        } else if (desiredPrice &lt; averageMid) {\r\n            k1 = kMid;\r\n        } else {\r\n            return weightsFor(kMid);\r\n        }\r\n    }\r\n    ... average out weightsFor(k0) and weightsFor(k1) to get desiredAverage\r\n\r\nIf you have a lot of prices fairly evenly distributed around your desired one, this will give weights that look a lot like a normal curve averaging near your desired one.\r\n\r\nBut you can literally choose any family of shapes that you want for the prices and the same idea will work.  And if you&#39;re tolerant of changing the shape, making `epsilon` larger will cut the search faster at the cost of having the final distribution a little less perfectly the ideal that you chose.","title":"How can I re distribute my weight such that expected outcome is the same","body":"<p>There are literally an infinite number of ways to do this.  It all depends on how you want your weights to be distributed.</p>\n<p>For example you can decide that your weights have to follow a rule like this:</p>\n<pre><code>weight is proportional to Math.exp((price - k)*(price - k))\n</code></pre>\n<p>Now as <code>k</code> goes to - infinity, the average price goes to the bottom price in your list.  Given <code>k</code> you can easily calculate what the average price should be.  As <code>k</code> goes to + infinity, the average price goes to the top price</p>\n<p>There is no analytical way to figure out what <code>k</code> should be, but you can easily search with something like this untested code.</p>\n<pre><code>double k0 = 0.0;\ndouble k1 = 1.0;\ndouble epsilon = 0.00001;\nwhile (averagePrice(k1) &lt; desiredPrice) {\n    k0 = k1;\n    k1 += k1;\n}\nif (desiredPrice &lt; averagePrice(k0)) {\n    k0 = -1;\n    k1 = 0;\n    while (desiredPrice &lt; averagePrice(k0)) {\n        k1 = k0;\n        k0 -= k0;\n    }\n}\nwhile (k0 + epsilon) {\n    kMid = (k0 + k1)/2;\n    double averageMid = averagePrice(kMid);\n    if (averageMid &lt; desiredPrice) {\n        k0 = kMid;\n    } else if (desiredPrice &lt; averageMid) {\n        k1 = kMid;\n    } else {\n        return weightsFor(kMid);\n    }\n}\n... average out weightsFor(k0) and weightsFor(k1) to get desiredAverage\n</code></pre>\n<p>If you have a lot of prices fairly evenly distributed around your desired one, this will give weights that look a lot like a normal curve averaging near your desired one.</p>\n<p>But you can literally choose any family of shapes that you want for the prices and the same idea will work.  And if you're tolerant of changing the shape, making <code>epsilon</code> larger will cut the search faster at the cost of having the final distribution a little less perfectly the ideal that you chose.</p>\n"}],"owner":{"account_id":26936914,"reputation":3,"user_id":20508410,"display_name":"Duy Pham Nguyen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75631643,"answer_count":1,"score":0,"last_activity_date":1677875642,"creation_date":1677855706,"question_id":75628673,"body_markdown":"I want to calculate expected outcome after resting a price, I tried using scaling matrix but it did not work. Appreciate any help.\r\n\r\n```\r\ndouble originalPrice = {5, 8, 18, 58, 80, 49.399167162403300}\r\n\r\ndouble originalWeight = {0.34146341463414637, 0.3902439024390244, 0.14634146341463414, 0.024390243902439025, 0.024390243902439025, 0.07317073170731707}\r\n```\r\nafter some iterations iterations my new prices and new weights are now,\r\n\r\n```\r\ndouble newPrices1 = [7.0, 8.0, 20.0, 58.0, 81.0, 49.3991671624033]\r\ndouble newWeight1 =  [0.3575704958570497, 0.3902439024390244, 0.15629694702450886, 0.024390243902439025, 0.024390243902439025, 0.04710816687453892]\r\n````\r\nnote: the EX (expected value) of originalPrice and newPrice1 is the same, you calculate by taking the product of respective price to respective weight and then take the total sum of it.\r\n\r\nin the next iteration the first price returns to its original value e.g we call it newPrices2\r\n```\r\ndouble newPrices2 = [5.0, 8.0, 20.0, 58.0, 82.0, 49.3991671624033]\r\n```\r\nI want to find new weights, that would keep my expected outcome the same\r\n\r\n```\r\ndouble newWeight2 = [x1,x2,x3,x4,x5,x6]\r\n```\r\n\r\nI tried scaling the vectors but it did not help, here is the code algorithm i tried. \r\n\r\n```\r\npublic static double[] redistributeWeight(double[] prices, \r\n double[] weights, double[] originalWeights) {\r\n        double totalOriginalPrice = 0.0;\r\n        double totalCurrentPrice = 0.0;\r\n\r\n        // Calculate the total original price and current price\r\n        for (int i = 0; i &lt; prices.length; i++) {\r\n            totalOriginalPrice += originalWeights[i] * prices[i];\r\n            totalCurrentPrice += weights[i] * prices[i];\r\n        }\r\n\r\n        // Calculate the scaling factor\r\n        double scaleFactor = totalOriginalPrice / totalCurrentPrice;\r\n\r\n        // Redistribute the weights based on the scaling factor\r\n        for (int i = 0; i &lt; weights.length; i++) {\r\n            weights[i] *= scaleFactor;\r\n        }\r\n\r\n        return weights;\r\n    }","title":"How can I re distribute my weight such that expected outcome is the same","body":"<p>I want to calculate expected outcome after resting a price, I tried using scaling matrix but it did not work. Appreciate any help.</p>\n<pre><code>double originalPrice = {5, 8, 18, 58, 80, 49.399167162403300}\n\ndouble originalWeight = {0.34146341463414637, 0.3902439024390244, 0.14634146341463414, 0.024390243902439025, 0.024390243902439025, 0.07317073170731707}\n</code></pre>\n<p>after some iterations iterations my new prices and new weights are now,</p>\n<pre><code>double newPrices1 = [7.0, 8.0, 20.0, 58.0, 81.0, 49.3991671624033]\ndouble newWeight1 =  [0.3575704958570497, 0.3902439024390244, 0.15629694702450886, 0.024390243902439025, 0.024390243902439025, 0.04710816687453892]\n</code></pre>\n<p>note: the EX (expected value) of originalPrice and newPrice1 is the same, you calculate by taking the product of respective price to respective weight and then take the total sum of it.</p>\n<p>in the next iteration the first price returns to its original value e.g we call it newPrices2</p>\n<pre><code>double newPrices2 = [5.0, 8.0, 20.0, 58.0, 82.0, 49.3991671624033]\n</code></pre>\n<p>I want to find new weights, that would keep my expected outcome the same</p>\n<pre><code>double newWeight2 = [x1,x2,x3,x4,x5,x6]\n</code></pre>\n<p>I tried scaling the vectors but it did not help, here is the code algorithm i tried.</p>\n<pre><code>public static double[] redistributeWeight(double[] prices, \n double[] weights, double[] originalWeights) {\n        double totalOriginalPrice = 0.0;\n        double totalCurrentPrice = 0.0;\n\n        // Calculate the total original price and current price\n        for (int i = 0; i &lt; prices.length; i++) {\n            totalOriginalPrice += originalWeights[i] * prices[i];\n            totalCurrentPrice += weights[i] * prices[i];\n        }\n\n        // Calculate the scaling factor\n        double scaleFactor = totalOriginalPrice / totalCurrentPrice;\n\n        // Redistribute the weights based on the scaling factor\n        for (int i = 0; i &lt; weights.length; i++) {\n            weights[i] *= scaleFactor;\n        }\n\n        return weights;\n    }\n</code></pre>\n"},{"tags":["java","facebook-graph-api"],"owner":{"account_id":27656254,"reputation":1,"user_id":21110062,"display_name":"denisa ungurean"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":702,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677875629,"creation_date":1675077262,"question_id":75283616,"body_markdown":"type here\r\n\r\nHello! I am tring to run my android app and login into facebook account but when i run it i get 2 errors and i can&#39;t find a way to solve them.\r\nThe errors i get are: \r\n1. E/com.facebook.GraphResponse: {HttpStatus: 400, errorCode: 100, subErrorCode: 33, errorType: GraphMethodException, errorMessage: Unsupported post request. Object with ID &#39;1234&#39; does not exist, cannot be loaded due to missing permissions, or does not support this operation. Please read the Graph API documentation at https://developers.facebook.com/docs/graph-api}\r\n2. E/com.facebook.GraphResponse: {HttpStatus: 400, errorCode: 190, subErrorCode: -1, errorType: OAuthException, errorMessage: Error validating application. Cannot get application info due to a system error.}\r\n\r\nI am using the latest android studio version for this and for Facebook sign in i am using this  code: \r\n\r\n\r\n```\r\npackage com.example.whatarewegoingtoeattoday;\r\n\r\nimport androidx.annotation.NonNull;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.widget.Toast;\r\n\r\nimport com.facebook.AccessToken;\r\nimport com.facebook.CallbackManager;\r\nimport com.facebook.FacebookCallback;\r\nimport com.facebook.FacebookException;\r\nimport com.facebook.FacebookSdk;\r\nimport com.facebook.login.LoginManager;\r\nimport com.facebook.login.LoginResult;\r\nimport com.google.firebase.auth.AuthCredential;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FacebookAuthProvider;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\n\r\nimport java.util.Arrays;\r\n\r\npublic class FacebookSignInActivity extends LoginActivity {\r\n\r\n    CallbackManager callbackManager;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        //FacebookSdk.sdkInitialize(getApplicationContext());\r\n\r\n        //mAuth = FirebaseAuth.getInstance();\r\n\r\n        callbackManager = CallbackManager.Factory.create();\r\n        LoginManager.getInstance().logInWithReadPermissions(this, Arrays.asList(&quot;public_profile&quot;));\r\n\r\n\r\n        LoginManager.getInstance().registerCallback(callbackManager,\r\n                new FacebookCallback&lt;LoginResult&gt;() {\r\n                    @Override\r\n                    public void onSuccess(LoginResult loginResult) {\r\n                        handleFacebookAccessToken(loginResult.getAccessToken());\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancel() {\r\n                        // App code\r\n                    }\r\n\r\n                    @Override\r\n                    public void onError(FacebookException exception) {\r\n                        // App code\r\n                    }\r\n                });\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        // Pass the activity result back to the Facebook SDK\r\n        callbackManager.onActivityResult(requestCode, resultCode, data);\r\n    }\r\n\r\n\r\n    private void handleFacebookAccessToken(AccessToken token) {\r\n\r\n        AuthCredential credential = FacebookAuthProvider.getCredential(token.getToken());\r\n        mAuth.signInWithCredential(credential)\r\n                .addOnCompleteListener(this, new OnCompleteListener&lt;AuthResult&gt;() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\r\n                        if (task.isSuccessful()) {\r\n                            // Sign in success, update UI with the signed-in user&#39;s information\r\n\r\n                            FirebaseUser user = mAuth.getCurrentUser();\r\n                            updateUI(user);\r\n                        } else {\r\n                            // If sign in fails, display a message to the user.\r\n                            Toast.makeText(FacebookSignInActivity.this, &quot;&quot; +task.getException(), Toast.LENGTH_SHORT).show();\r\n\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n\r\n    private void updateUI(FirebaseUser user) {\r\n        Intent intent = new Intent(FacebookSignInActivity.this, LoginActivity.class);\r\n        //intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK|Intent.FLAG_ACTIVITY_NEW_TASK);\r\n        startActivity(intent);\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nI watched many tutorials on youtube and i did the same as them, but my code it is still not working. \r\nPlease help me! :)","title":"E/com.facebook.GraphResponse: {HttpStatus: 400, errorCode: 100, subErrorCode: 33, errorType: GraphMethodException, errorMessage: Unsupported post","body":"<p>type here</p>\n<p>Hello! I am tring to run my android app and login into facebook account but when i run it i get 2 errors and i can't find a way to solve them.\nThe errors i get are:</p>\n<ol>\n<li>E/com.facebook.GraphResponse: {HttpStatus: 400, errorCode: 100, subErrorCode: 33, errorType: GraphMethodException, errorMessage: Unsupported post request. Object with ID '1234' does not exist, cannot be loaded due to missing permissions, or does not support this operation. Please read the Graph API documentation at <a href=\"https://developers.facebook.com/docs/graph-api%7D\" rel=\"nofollow noreferrer\">https://developers.facebook.com/docs/graph-api}</a></li>\n<li>E/com.facebook.GraphResponse: {HttpStatus: 400, errorCode: 190, subErrorCode: -1, errorType: OAuthException, errorMessage: Error validating application. Cannot get application info due to a system error.}</li>\n</ol>\n<p>I am using the latest android studio version for this and for Facebook sign in i am using this  code:</p>\n<pre><code>package com.example.whatarewegoingtoeattoday;\n\nimport androidx.annotation.NonNull;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.widget.Toast;\n\nimport com.facebook.AccessToken;\nimport com.facebook.CallbackManager;\nimport com.facebook.FacebookCallback;\nimport com.facebook.FacebookException;\nimport com.facebook.FacebookSdk;\nimport com.facebook.login.LoginManager;\nimport com.facebook.login.LoginResult;\nimport com.google.firebase.auth.AuthCredential;\nimport com.google.firebase.auth.AuthResult;\nimport com.google.firebase.auth.FacebookAuthProvider;\nimport com.google.android.gms.tasks.Task;\nimport com.google.android.gms.tasks.OnCompleteListener;\nimport com.google.firebase.auth.FirebaseAuth;\nimport com.google.firebase.auth.FirebaseUser;\n\nimport java.util.Arrays;\n\npublic class FacebookSignInActivity extends LoginActivity {\n\n    CallbackManager callbackManager;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        //FacebookSdk.sdkInitialize(getApplicationContext());\n\n        //mAuth = FirebaseAuth.getInstance();\n\n        callbackManager = CallbackManager.Factory.create();\n        LoginManager.getInstance().logInWithReadPermissions(this, Arrays.asList(&quot;public_profile&quot;));\n\n\n        LoginManager.getInstance().registerCallback(callbackManager,\n                new FacebookCallback&lt;LoginResult&gt;() {\n                    @Override\n                    public void onSuccess(LoginResult loginResult) {\n                        handleFacebookAccessToken(loginResult.getAccessToken());\n                    }\n\n                    @Override\n                    public void onCancel() {\n                        // App code\n                    }\n\n                    @Override\n                    public void onError(FacebookException exception) {\n                        // App code\n                    }\n                });\n    }\n\n    @Override\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n\n        // Pass the activity result back to the Facebook SDK\n        callbackManager.onActivityResult(requestCode, resultCode, data);\n    }\n\n\n    private void handleFacebookAccessToken(AccessToken token) {\n\n        AuthCredential credential = FacebookAuthProvider.getCredential(token.getToken());\n        mAuth.signInWithCredential(credential)\n                .addOnCompleteListener(this, new OnCompleteListener&lt;AuthResult&gt;() {\n                    @Override\n                    public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\n                        if (task.isSuccessful()) {\n                            // Sign in success, update UI with the signed-in user's information\n\n                            FirebaseUser user = mAuth.getCurrentUser();\n                            updateUI(user);\n                        } else {\n                            // If sign in fails, display a message to the user.\n                            Toast.makeText(FacebookSignInActivity.this, &quot;&quot; +task.getException(), Toast.LENGTH_SHORT).show();\n\n                        }\n                    }\n                });\n    }\n\n    private void updateUI(FirebaseUser user) {\n        Intent intent = new Intent(FacebookSignInActivity.this, LoginActivity.class);\n        //intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK|Intent.FLAG_ACTIVITY_NEW_TASK);\n        startActivity(intent);\n    }\n}\n</code></pre>\n<p>I watched many tutorials on youtube and i did the same as them, but my code it is still not working.\nPlease help me! :)</p>\n"},{"tags":["java","mockito","amazon-kinesis"],"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1686950592,"post_id":75631402,"comment_id":134874242,"body_markdown":"You cannot do `when(client.putRecord(any()).get())`, you can only do `when(client.putRecord(any()))`","body":"You cannot do <code>when(client.putRecord(any()).get())</code>, you can only do <code>when(client.putRecord(any()))</code>"}],"answers":[{"comments":[{"owner":{"account_id":12913491,"reputation":415,"user_id":9338509,"display_name":"lakshmiravali rimmalapudi"},"score":0,"creation_date":1677876082,"post_id":75631519,"comment_id":133430601,"body_markdown":"Thanks for the detailed explanation. What is exactly `[PutRecordResponse type]`? Can you give me an example of `thenReturn` with a return value?","body":"Thanks for the detailed explanation. What is exactly <code>[PutRecordResponse type]</code>? Can you give me an example of <code>thenReturn</code> with a return value?"},{"owner":{"account_id":12913491,"reputation":415,"user_id":9338509,"display_name":"lakshmiravali rimmalapudi"},"score":0,"creation_date":1677876763,"post_id":75631519,"comment_id":133430758,"body_markdown":"It&#39;s failing for `error: cannot find symbol when(res.getSequenceNumber()).thenReturn(&quot;12345&quot;);` and also `getShardId`.","body":"It&#39;s failing for <code>error: cannot find symbol when(res.getSequenceNumber()).thenReturn(&quot;12345&quot;);</code> and also <code>getShardId</code>."}],"tags":[],"owner":{"account_id":2423876,"reputation":802,"user_id":2116248,"accept_rate":45,"display_name":"Luiz Rossi"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677875369,"creation_date":1677874564,"answer_id":75631519,"question_id":75631402,"body_markdown":"The reason for this error is that the thenReturn method expects a PutRecordResponse object, but you are passing in a PutRecordResult object.\r\n\r\nTo fix this error, you should create a PutRecordResponse object and set its sequenceNumber and shardId fields to appropriate values, then use it in the thenReturn method like this:\r\n\r\n    KinesisAsyncClient kinesisClient = mock(KinesisAsyncClient.class);\r\n    PutRecordResponse res = mock(PutRecordResponse.class);\r\n    when(res.getSequenceNumber()).thenReturn(&quot;12345&quot;);\r\n    when(res.getShardId()).thenReturn(&quot;shard-12345&quot;);\r\n    when(kinesisClient.putRecord(any())).thenReturn([PutRecordResponse type]);\r\n\r\n    // Call the method that uses the mocked KinesisAsyncClient\r\n\r\nHere, we are mocking the PutRecordResponse object and setting its sequenceNumber and shardId fields to appropriate values. Then, we are using the thenReturn method to return a CompletableFuture that completes with the mocked PutRecordResponse object when the putRecord method is called on the mocked KinesisAsyncClient.","title":"No suitable method found for thenReturn","body":"<p>The reason for this error is that the thenReturn method expects a PutRecordResponse object, but you are passing in a PutRecordResult object.</p>\n<p>To fix this error, you should create a PutRecordResponse object and set its sequenceNumber and shardId fields to appropriate values, then use it in the thenReturn method like this:</p>\n<pre><code>KinesisAsyncClient kinesisClient = mock(KinesisAsyncClient.class);\nPutRecordResponse res = mock(PutRecordResponse.class);\nwhen(res.getSequenceNumber()).thenReturn(&quot;12345&quot;);\nwhen(res.getShardId()).thenReturn(&quot;shard-12345&quot;);\nwhen(kinesisClient.putRecord(any())).thenReturn([PutRecordResponse type]);\n\n// Call the method that uses the mocked KinesisAsyncClient\n</code></pre>\n<p>Here, we are mocking the PutRecordResponse object and setting its sequenceNumber and shardId fields to appropriate values. Then, we are using the thenReturn method to return a CompletableFuture that completes with the mocked PutRecordResponse object when the putRecord method is called on the mocked KinesisAsyncClient.</p>\n"}],"owner":{"account_id":12913491,"reputation":415,"user_id":9338509,"display_name":"lakshmiravali rimmalapudi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":432,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1677875369,"creation_date":1677873567,"question_id":75631402,"body_markdown":"I am new to java and mockito, trying to mock my \r\n```\r\n//kinesisClient is of type KinesisAsyncClient\r\nPutRecordResponse result = kinesisClient.putRecord(putRecordRequest).get();\r\n```\r\nlike below:\r\n```\r\nKinesisAsyncClient kinesisClient = mock(KinesisAsyncClient.class);\r\nPutRecordResult res = mock(PutRecordResult.class);\r\nres.setShardId(&quot;shard-12345&quot;);\r\nwhen(kinesisClient.putRecord(any()).get())\r\n                .thenReturn(res);\r\n```\r\nit&#39;s giving \r\n```\r\nerror: no suitable method found for thenReturn(PutRecordResult)\r\n.thenReturn(res);\r\n```\r\nI tried \r\n```\r\nKinesisAsyncClient kinesisClient = mock(KinesisAsyncClient.class);\r\nfinal PutRecordResult res = new PutRecordResult();\r\nres.setShardId(&quot;shard-12345&quot;);\r\nwhen(kinesisClient.putRecord(any()).get())\r\n                .thenReturn(res);\r\n```\r\nbut same error. I am not sure what I am doing wrong here. Can anyone help me on this?","title":"No suitable method found for thenReturn","body":"<p>I am new to java and mockito, trying to mock my</p>\n<pre><code>//kinesisClient is of type KinesisAsyncClient\nPutRecordResponse result = kinesisClient.putRecord(putRecordRequest).get();\n</code></pre>\n<p>like below:</p>\n<pre><code>KinesisAsyncClient kinesisClient = mock(KinesisAsyncClient.class);\nPutRecordResult res = mock(PutRecordResult.class);\nres.setShardId(&quot;shard-12345&quot;);\nwhen(kinesisClient.putRecord(any()).get())\n                .thenReturn(res);\n</code></pre>\n<p>it's giving</p>\n<pre><code>error: no suitable method found for thenReturn(PutRecordResult)\n.thenReturn(res);\n</code></pre>\n<p>I tried</p>\n<pre><code>KinesisAsyncClient kinesisClient = mock(KinesisAsyncClient.class);\nfinal PutRecordResult res = new PutRecordResult();\nres.setShardId(&quot;shard-12345&quot;);\nwhen(kinesisClient.putRecord(any()).get())\n                .thenReturn(res);\n</code></pre>\n<p>but same error. I am not sure what I am doing wrong here. Can anyone help me on this?</p>\n"},{"tags":["java","google-cloud-firestore","server","firebase-admin"],"answers":[{"tags":[],"owner":{"account_id":1656903,"reputation":196,"user_id":1526201,"display_name":"Lahiru Maramba"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677874006,"creation_date":1677873215,"answer_id":75631357,"question_id":75616698,"body_markdown":"You need `com.google.cloud:google-cloud-firestore` library to access `Firestore` from your server project. `google-cloud-firestore` is a dependency of `firebase-admin` ([ref][1]) and should install it as a dependency when you add Firebase Admin Java SDK to your project (unless you exclude it in your build file).\r\n\r\nRemove the line `implementation &#39;com.google.firebase:firebase-firestore:24.4.3&#39;` from your build.gradle and access Firestore through Firebase Admin SDK. You can refer to the [official docs][2] for code samples.\r\n\r\n\r\n  [1]: https://github.com/firebase/firebase-admin-java/blob/95e542790e1b22a26258a10f7edff3a5a29c86d4/pom.xml#L428\r\n  [2]: https://firebase.google.com/docs/firestore/query-data/get-data#java_1","title":"Cannot add Firestore to Server","body":"<p>You need <code>com.google.cloud:google-cloud-firestore</code> library to access <code>Firestore</code> from your server project. <code>google-cloud-firestore</code> is a dependency of <code>firebase-admin</code> (<a href=\"https://github.com/firebase/firebase-admin-java/blob/95e542790e1b22a26258a10f7edff3a5a29c86d4/pom.xml#L428\" rel=\"nofollow noreferrer\">ref</a>) and should install it as a dependency when you add Firebase Admin Java SDK to your project (unless you exclude it in your build file).</p>\n<p>Remove the line <code>implementation 'com.google.firebase:firebase-firestore:24.4.3'</code> from your build.gradle and access Firestore through Firebase Admin SDK. You can refer to the <a href=\"https://firebase.google.com/docs/firestore/query-data/get-data#java_1\" rel=\"nofollow noreferrer\">official docs</a> for code samples.</p>\n"}],"owner":{"account_id":27445149,"reputation":21,"user_id":20939081,"display_name":"Mira&#231; Bura &#214;zkan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":144,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1677874006,"creation_date":1677766716,"question_id":75616698,"body_markdown":"I am working on a server project where I want to user firebase firestore dependecies.\r\n\r\nI use the firebase-admin but when I try to add firestore sdk it says that it could not find it, and yes when I looked at that site there where nothing about firestore package.\r\n\r\nmy build.grade:\r\n\r\n```\r\nplugins {\r\nid &#39;java&#39;\r\n}\r\n\r\ngroup &#39;org.example&#39;\r\nversion &#39;1.0-SNAPSHOT&#39;\r\n\r\nrepositories {\r\nmavenCentral()\r\n}\r\n\r\ndependencies {\r\n// Firebase Admin SDK dependency\r\nimplementation &#39;com.google.firebase:firebase-admin:9.1.1&#39;\r\n\r\n    testImplementation &#39;org.junit.jupiter:junit-jupiter-api:5.7.0&#39;\r\n    testRuntimeOnly &#39;org.junit.jupiter:junit-jupiter-engine:5.7.0&#39;\r\n    \r\n    // Declare the dependency for the Cloud Firestore library\r\n    // When NOT using the BoM, you must specify versions in Firebase library dependencies\r\n    implementation &#39;com.google.firebase:firebase-firestore:24.4.3&#39;\r\n    \r\n    implementation &quot;org.slf4j:slf4j-simple:1.7.9&quot;\r\n\r\n}\r\ntest {\r\nuseJUnitPlatform()\r\n}\r\n```\r\n\r\nThe error:\r\n\r\n```\r\nserver:main: Could not find com.google.firebase:firebase-firestore:24.4.3.\r\nSearched in the following locations:\r\n\r\n- https://repo.maven.apache.org/maven2/com/google/firebase/firebase-firestore/24.4.3/firebase-firestore-24.4.3.pom\r\n  If the artifact you are trying to retrieve can be found in the repository but without metadata in &#39;Maven POM&#39; format, you need to adjust the &#39;metadataSources { ... }&#39; of the repository declaration.\r\n  Required by:\r\n  project :\r\n\r\nPossible solution:\r\n\r\n- Declare repository providing the artifact, see the documentation at https://docs.gradle.org/current/userguide/declaring_repositories.html%60\r\n```\r\n\r\nI tried to look at the sites that the error code gave me but I couldnt perform anything since I dont know whether I can do this with firestore or not.","title":"Cannot add Firestore to Server","body":"<p>I am working on a server project where I want to user firebase firestore dependecies.</p>\n<p>I use the firebase-admin but when I try to add firestore sdk it says that it could not find it, and yes when I looked at that site there where nothing about firestore package.</p>\n<p>my build.grade:</p>\n<pre><code>plugins {\nid 'java'\n}\n\ngroup 'org.example'\nversion '1.0-SNAPSHOT'\n\nrepositories {\nmavenCentral()\n}\n\ndependencies {\n// Firebase Admin SDK dependency\nimplementation 'com.google.firebase:firebase-admin:9.1.1'\n\n    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.7.0'\n    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.7.0'\n    \n    // Declare the dependency for the Cloud Firestore library\n    // When NOT using the BoM, you must specify versions in Firebase library dependencies\n    implementation 'com.google.firebase:firebase-firestore:24.4.3'\n    \n    implementation &quot;org.slf4j:slf4j-simple:1.7.9&quot;\n\n}\ntest {\nuseJUnitPlatform()\n}\n</code></pre>\n<p>The error:</p>\n<pre><code>server:main: Could not find com.google.firebase:firebase-firestore:24.4.3.\nSearched in the following locations:\n\n- https://repo.maven.apache.org/maven2/com/google/firebase/firebase-firestore/24.4.3/firebase-firestore-24.4.3.pom\n  If the artifact you are trying to retrieve can be found in the repository but without metadata in 'Maven POM' format, you need to adjust the 'metadataSources { ... }' of the repository declaration.\n  Required by:\n  project :\n\nPossible solution:\n\n- Declare repository providing the artifact, see the documentation at https://docs.gradle.org/current/userguide/declaring_repositories.html%60\n</code></pre>\n<p>I tried to look at the sites that the error code gave me but I couldnt perform anything since I dont know whether I can do this with firestore or not.</p>\n"},{"tags":["java","spring","spring-boot","spring-security","passwords"],"answers":[{"tags":[],"owner":{"account_id":480617,"reputation":2495,"user_id":893952,"accept_rate":57,"display_name":"Harry Coder"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677872719,"creation_date":1677857720,"answer_id":75629067,"question_id":75628635,"body_markdown":"I don&#39;t think you should really care about the size of the password because you don&#39;t know how the encryption algorithm will generate the password for you. API Keys for instance or crypted password can be very length (I have seen for instance some encrypted API key that have almost 900 chars).\r\n\r\nThe computers, the languages, the databases and the network in this modern world are adapted for this kind of situation.\r\nAlso, for security issue, your password have to be very strong.\r\n\r\n - For Java, use `String` it can support **2,147,483,647** characters. IMO you can use **120** or **128** chars for the password size.\r\n - For your database, [MySQL][1] for example (or any database) use **Text** types and its associated sub types.\r\n\r\n&gt; Spring Security may create proper data properties, but even so, I want\r\n&gt; to know the algorithm and the length for password field.\r\n\r\nYou can define a custom encryption in **Spring Security** with a bean, in you configuration file. The following is the [list][2] of all the algorithms supported by **Spring Security**: *NoOpPasswordEncoder*, *StandardPasswordEncoder*, *Pbkdf2PasswordEncoder*, *BCryptPasswordEncoder*, *SCryptPasswordEncoder*\r\n\r\n    @Bean\r\n    public PasswordEncoder bCryptPasswordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\nTake in consideration that you have 2 sides when managing your security and applying encryption: the user side password and the encrypted password stored in the database. When the user issue an authentication process, the user type his password, not the encrypted password. The verification is made in a `AuthenticationProvider` that you define.\r\nSee an example bellow:\r\n\r\n\r\n    @Service\r\n    public class UserAuthenticationService implements AuthenticationProvider {\r\n    \r\n        private UserDetailsService service;\r\n        private PasswordEncoder encoder;\r\n    \r\n        public UserAuthenticationService(UserDetailsService service, PasswordEncoder encoder) {\r\n            this.service = service;\r\n            this.encoder = encoder;\r\n        }\r\n    \r\n        @Override\r\n        public Authentication authenticate(Authentication authentication) throws AuthenticationException {\r\n            var username = authentication.getName();\r\n            var password = authentication.getCredentials().toString();\r\n            var user = service.loadUserByUsername(username);\r\n            // You make this comparison here, between both password the user and the encrypted one in the database\r\n            if (!encoder.matches(password, user.getPassword())) {\r\n                throw new BadCredentialsException(&quot;Bad credentials&quot;);\r\n            }\r\n            return new UsernamePasswordAuthenticationToken(\r\n                user.getUsername(),\r\n                user.getPassword(),\r\n                user.getAuthorities()\r\n            );\r\n        }\r\n    \r\n        @Override\r\n        public boolean supports(Class&lt;?&gt; authentication) {\r\n            return UsernamePasswordAuthenticationToken.class.isAssignableFrom(authentication);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://dev.mysql.com/doc/refman/8.0/en/string-types.html\r\n  [2]: https://docs.spring.io/spring-security/reference/features/authentication/password-storage.html","title":"What should be password field length in dB when using Spring Security?","body":"<p>I don't think you should really care about the size of the password because you don't know how the encryption algorithm will generate the password for you. API Keys for instance or crypted password can be very length (I have seen for instance some encrypted API key that have almost 900 chars).</p>\n<p>The computers, the languages, the databases and the network in this modern world are adapted for this kind of situation.\nAlso, for security issue, your password have to be very strong.</p>\n<ul>\n<li>For Java, use <code>String</code> it can support <strong>2,147,483,647</strong> characters. IMO you can use <strong>120</strong> or <strong>128</strong> chars for the password size.</li>\n<li>For your database, <a href=\"https://dev.mysql.com/doc/refman/8.0/en/string-types.html\" rel=\"nofollow noreferrer\">MySQL</a> for example (or any database) use <strong>Text</strong> types and its associated sub types.</li>\n</ul>\n<blockquote>\n<p>Spring Security may create proper data properties, but even so, I want\nto know the algorithm and the length for password field.</p>\n</blockquote>\n<p>You can define a custom encryption in <strong>Spring Security</strong> with a bean, in you configuration file. The following is the <a href=\"https://docs.spring.io/spring-security/reference/features/authentication/password-storage.html\" rel=\"nofollow noreferrer\">list</a> of all the algorithms supported by <strong>Spring Security</strong>: <em>NoOpPasswordEncoder</em>, <em>StandardPasswordEncoder</em>, <em>Pbkdf2PasswordEncoder</em>, <em>BCryptPasswordEncoder</em>, <em>SCryptPasswordEncoder</em></p>\n<pre><code>@Bean\npublic PasswordEncoder bCryptPasswordEncoder() {\n    return new BCryptPasswordEncoder();\n}\n</code></pre>\n<p>Take in consideration that you have 2 sides when managing your security and applying encryption: the user side password and the encrypted password stored in the database. When the user issue an authentication process, the user type his password, not the encrypted password. The verification is made in a <code>AuthenticationProvider</code> that you define.\nSee an example bellow:</p>\n<pre><code>@Service\npublic class UserAuthenticationService implements AuthenticationProvider {\n\n    private UserDetailsService service;\n    private PasswordEncoder encoder;\n\n    public UserAuthenticationService(UserDetailsService service, PasswordEncoder encoder) {\n        this.service = service;\n        this.encoder = encoder;\n    }\n\n    @Override\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\n        var username = authentication.getName();\n        var password = authentication.getCredentials().toString();\n        var user = service.loadUserByUsername(username);\n        // You make this comparison here, between both password the user and the encrypted one in the database\n        if (!encoder.matches(password, user.getPassword())) {\n            throw new BadCredentialsException(&quot;Bad credentials&quot;);\n        }\n        return new UsernamePasswordAuthenticationToken(\n            user.getUsername(),\n            user.getPassword(),\n            user.getAuthorities()\n        );\n    }\n\n    @Override\n    public boolean supports(Class&lt;?&gt; authentication) {\n        return UsernamePasswordAuthenticationToken.class.isAssignableFrom(authentication);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":1,"creation_date":1677869879,"post_id":75630059,"comment_id":133429171,"body_markdown":"as i mentioned in the answer , and based on the information that i get , the exact length of the bcrypt hased password in the worst case is 60 + 8 = 68 bytes. But i will not define exactly its column to be varchar(68). i like to give some buffer to it simply because it make me feel more safe","body":"as i mentioned in the answer , and based on the information that i get , the exact length of the bcrypt hased password in the worst case is 60 + 8 = 68 bytes. But i will not define exactly its column to be varchar(68). i like to give some buffer to it simply because it make me feel more safe"},{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":1,"creation_date":1677870241,"post_id":75630059,"comment_id":133429266,"body_markdown":"no matter how long the raw password are , the hashed password will always be 59 bytes or 60 bytes.","body":"no matter how long the raw password are , the hashed password will always be 59 bytes or 60 bytes."},{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":1,"creation_date":1677872293,"post_id":75630059,"comment_id":133429769,"body_markdown":"80 or 120 really does not have much differences , really doesn&#39;t matter.. Both are okay to me. just follow your heart and moving forward to to next  more meaningful things.","body":"80 or 120 really does not have much differences , really doesn&#39;t matter.. Both are okay to me. just follow your heart and moving forward to to next  more meaningful things."}],"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1677866862,"creation_date":1677863739,"answer_id":75630059,"question_id":75628635,"body_markdown":"If you use spring security &#39;s suggestion which use [`DelegatingPasswordEncoder`][1] , it will always use `BCrypt` to encode a new password.\r\n\r\nAnd from this [answer][2] , the total length of a `BCrypt` hashed password is always about 60 bytes no matter how many characters does the password has. The hashed password also needed to be prefixed with `{bcrypt}` which is 8 bytes in order for `DelegatingPasswordEncoder` can decode it.  We give it some extra bytes for buffer and so make its column to be `varchar(80)` or so should be more than enough.\r\n\r\nFor the maximum length of the password that an user can use ,it depends on your business requirement. Just judge it by common sense and give it enough buffer should be okay.  For example, do you think it is common for a person to set his login password to be 200 characters ? If you think it does not make sense , most probably you need to choose the maximum length to a smaller value until you find a maximum value that make sense to you and then give it some buffer.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/features/authentication/password-storage.html#authentication-password-storage-dpe\r\n  [2]: https://stackoverflow.com/a/5882472/339637","title":"What should be password field length in dB when using Spring Security?","body":"<p>If you use spring security 's suggestion which use <a href=\"https://docs.spring.io/spring-security/reference/features/authentication/password-storage.html#authentication-password-storage-dpe\" rel=\"nofollow noreferrer\"><code>DelegatingPasswordEncoder</code></a> , it will always use <code>BCrypt</code> to encode a new password.</p>\n<p>And from this <a href=\"https://stackoverflow.com/a/5882472/339637\">answer</a> , the total length of a <code>BCrypt</code> hashed password is always about 60 bytes no matter how many characters does the password has. The hashed password also needed to be prefixed with <code>{bcrypt}</code> which is 8 bytes in order for <code>DelegatingPasswordEncoder</code> can decode it.  We give it some extra bytes for buffer and so make its column to be <code>varchar(80)</code> or so should be more than enough.</p>\n<p>For the maximum length of the password that an user can use ,it depends on your business requirement. Just judge it by common sense and give it enough buffer should be okay.  For example, do you think it is common for a person to set his login password to be 200 characters ? If you think it does not make sense , most probably you need to choose the maximum length to a smaller value until you find a maximum value that make sense to you and then give it some buffer.</p>\n"}],"owner":{"display_name":"user21263160"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":910,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75630059,"answer_count":2,"score":0,"last_activity_date":1677872719,"creation_date":1677855526,"question_id":75628635,"body_markdown":"I want to create my User table and set a proper size for password field used for signup request.\r\n\r\n```\r\n@Entity\r\n@EqualsAndHashCode(callSuper = true)\r\npublic class User extends Person {\r\n\r\n    @Column(length = 50, nullable = false, unique = true)\r\n    private String username;\r\n\r\n    @Column(length = 120, nullable = false)\r\n    private String password;\r\n}\r\n```\r\n\r\nBut in here, I should think the length of the encrypted password. I made a search but could not found a solution. So, when using Spring Security, what is the password length in the User table (encrypted) and max length for password field while registering user? \r\n\r\nSpring Security may create proper data properties, but even so, I want to know the algorithm and the length for password field. \r\n\r\nAny help would be appreciated. ","title":"What should be password field length in dB when using Spring Security?","body":"<p>I want to create my User table and set a proper size for password field used for signup request.</p>\n<pre><code>@Entity\n@EqualsAndHashCode(callSuper = true)\npublic class User extends Person {\n\n    @Column(length = 50, nullable = false, unique = true)\n    private String username;\n\n    @Column(length = 120, nullable = false)\n    private String password;\n}\n</code></pre>\n<p>But in here, I should think the length of the encrypted password. I made a search but could not found a solution. So, when using Spring Security, what is the password length in the User table (encrypted) and max length for password field while registering user?</p>\n<p>Spring Security may create proper data properties, but even so, I want to know the algorithm and the length for password field.</p>\n<p>Any help would be appreciated.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":1,"creation_date":1677782289,"post_id":75619526,"comment_id":133410272,"body_markdown":"`Vector`? `SimpleDate`? Looks legacy to me.","body":"<code>Vector</code>? <code>SimpleDate</code>? Looks legacy to me."},{"owner":{"account_id":27819274,"reputation":11,"user_id":21240013,"display_name":"Ebrahim Al-Aghbari"},"score":0,"creation_date":1677782617,"post_id":75619526,"comment_id":133410348,"body_markdown":"@MCEmperor Do you mean its old?","body":"@MCEmperor Do you mean its old?"},{"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"score":0,"creation_date":1677782821,"post_id":75619526,"comment_id":133410396,"body_markdown":"You&#39;re declaring the Vector inside the if statement which means it has local scope. It will disappear after the if statement and new one created again on the next tie. Probably not what you intended...","body":"You&#39;re declaring the Vector inside the if statement which means it has local scope. It will disappear after the if statement and new one created again on the next tie. Probably not what you intended..."},{"owner":{"account_id":27819274,"reputation":11,"user_id":21240013,"display_name":"Ebrahim Al-Aghbari"},"score":0,"creation_date":1677783066,"post_id":75619526,"comment_id":133410442,"body_markdown":"@Idle_Mind Thanks for your reply, I fixed that but what I am looking for is how to return a day from a changing vector.","body":"@Idle_Mind Thanks for your reply, I fixed that but what I am looking for is how to return a day from a changing vector."},{"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"score":0,"creation_date":1677785339,"post_id":75619526,"comment_id":133411020,"body_markdown":"Update your code above so we can see your current incarnation.","body":"Update your code above so we can see your current incarnation."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1677785647,"post_id":75619526,"comment_id":133411099,"body_markdown":"The modern classes to use are `LocalDate` for a date, `DayOfWeek` for -- what the name says -- and `ArrayList` instead of `Vector`. I recommend them all.","body":"The modern classes to use are <code>LocalDate</code> for a date, <code>DayOfWeek</code> for -- what the name says -- and <code>ArrayList</code> instead of <code>Vector</code>. I recommend them all."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1677785747,"post_id":75619526,"comment_id":133411122,"body_markdown":"In the `count == maxcount` case you need to determine whether `freqDay` or `dayOfWeek(dates[i])` is earlier in the week. Which is easy with `DayOfWeek`, not quite so easy with strings, but still doable if you insist.","body":"In the <code>count == maxcount</code> case you need to determine whether <code>freqDay</code> or <code>dayOfWeek(dates[i])</code> is earlier in the week. Which is easy with <code>DayOfWeek</code>, not quite so easy with strings, but still doable if you insist."},{"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"score":0,"creation_date":1677786473,"post_id":75619526,"comment_id":133411300,"body_markdown":"Also show us `dayOfWeek()` as well please.","body":"Also show us <code>dayOfWeek()</code> as well please."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1677797759,"post_id":75619526,"comment_id":133413828,"body_markdown":"@EbrahimAl-Aghbari https://en.wikipedia.org/wiki/Legacy_system","body":"@EbrahimAl-Aghbari <a href=\"https://en.wikipedia.org/wiki/Legacy_system\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Legacy_system</a>"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1677797789,"post_id":75619526,"comment_id":133413836,"body_markdown":"Explain the class `SimpleDate`. I cannot find that class bundled with Java.","body":"Explain the class <code>SimpleDate</code>. I cannot find that class bundled with Java."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1677818850,"post_id":75619526,"comment_id":133416394,"body_markdown":"Not what you asked, your algorithm looks over-complicated to me. If there are 3 Tuesdays in the array, you count them 3 times. And 5000 times if there are 5000 Tuesdays. Once should suffice. Also determining the day of week of a given date is built into Java (the `LocalDate` class mentioned, for example), you had not needed code it yourself. And keeping the day as a string is impractical.","body":"Not what you asked, your algorithm looks over-complicated to me. If there are 3 Tuesdays in the array, you count them 3 times. And 5000 times if there are 5000 Tuesdays. Once should suffice. Also determining the day of week of a given date is built into Java (the <code>LocalDate</code> class mentioned, for example), you had not needed code it yourself. And keeping the day as a string is impractical."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1677819166,"post_id":75619526,"comment_id":133416433,"body_markdown":"What I would have done: If the array has length 0, return the empty string. Use an `EnumMap&lt;DayOfWeek, Integer&gt;` for the counts (or an array of `&#236;nt`). Initialize all counts to 0. Iterate once through the date array and for each day of week increment the corresponding count. Then iterate once through the counts form Monday to Sunday to find the first highest count. So when I find the same count again, ignore it because we already know its later in the week. Only when finding a strictly higher count, record it as the max. Done.","body":"What I would have done: If the array has length 0, return the empty string. Use an <code>EnumMap&lt;DayOfWeek, Integer&gt;</code> for the counts (or an array of <code>&#236;nt</code>). Initialize all counts to 0. Iterate once through the date array and for each day of week increment the corresponding count. Then iterate once through the counts form Monday to Sunday to find the first highest count. So when I find the same count again, ignore it because we already know its later in the week. Only when finding a strictly higher count, record it as the max. Done."}],"answers":[{"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1677873868,"post_id":75620337,"comment_id":133430093,"body_markdown":"Looks correct to me.","body":"Looks correct to me."},{"owner":{"account_id":27819274,"reputation":11,"user_id":21240013,"display_name":"Ebrahim Al-Aghbari"},"score":0,"creation_date":1678561070,"post_id":75620337,"comment_id":133559174,"body_markdown":"This is a bit late response, but I realised you did not use the &quot;new&quot; keyword when creating the days list. Is there a reason for not using it, though days is a new object?\n`List&lt;String&gt; days = Arrays.asList(&quot;Mon&quot;, &quot;Tue&quot;, &quot;Wed&quot;, &quot;Thu&quot;, &quot;Fri&quot;, &quot;Sat&quot;, &quot;Sun&quot;);`","body":"This is a bit late response, but I realised you did not use the &quot;new&quot; keyword when creating the days list. Is there a reason for not using it, though days is a new object? <code>List&lt;String&gt; days = Arrays.asList(&quot;Mon&quot;, &quot;Tue&quot;, &quot;Wed&quot;, &quot;Thu&quot;, &quot;Fri&quot;, &quot;Sat&quot;, &quot;Sun&quot;);</code>"},{"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"score":0,"creation_date":1678568726,"post_id":75620337,"comment_id":133560243,"body_markdown":"If we wanted an EMPTY list then I would have done that. In this case, I wanted the days of the week already in the list. The `Arrays.asList()` method created the list for us and returned it.","body":"If we wanted an EMPTY list then I would have done that. In this case, I wanted the days of the week already in the list. The <code>Arrays.asList()</code> method created the list for us and returned it."}],"tags":[],"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677872151,"creation_date":1677787603,"answer_id":75620337,"question_id":75619526,"body_markdown":"Assuming `dayOfWeek()` returns only one of these values:\r\n\r\n    { &quot;Sun&quot;, &quot;Mon&quot;, &quot;Tue&quot;, &quot;Wed&quot;, &quot;Thu&quot;, &quot;Fri&quot;, &quot;Sat&quot; }\r\n\r\nYou could use a `List` to determine the order of them:\r\n\r\n      public static String mostFrequentDayOfWeek(SimpleDate[] dates ) {\r\n          int maxCount = 0;\r\n          int maxIndex = 0;\r\n          String freqDay = &quot;&quot;;\r\n    \r\n          List&lt;String&gt; days = Arrays.asList(&quot;Sun&quot;, &quot;Mon&quot;, &quot;Tue&quot;, &quot;Wed&quot;, &quot;Thu&quot;, &quot;Fri&quot;, &quot;Sat&quot;);\r\n          for(SimpleDate d1 : dates) {\r\n            int count = 0;\r\n            String day1 = dayOfWeek(d1);\r\n            for(SimpleDate d2 : dates) {\r\n              String day2 = dayOfWeek(d2);\r\n              if (day1.equals(day2)) {\r\n                count++;\r\n              }      \r\n            }\r\n            \r\n            if (count &gt; maxCount) {\r\n              maxCount = count;\r\n              maxIndex = days.indexOf(day1);\r\n              freqDay = day1;\r\n            }\r\n            else if (count == maxCount) {\r\n              int newIndex = days.indexOf(day1);\r\n              if (newIndex &lt; maxIndex) {\r\n                maxIndex = newIndex;\r\n                freqDay = day1;\r\n              }\r\n            }\r\n          }  \r\n        \r\n          return freqDay;\r\n      }\r\n\r\n","title":"How to choose the earliest day in a Vector (from &quot;Mon&quot; to &quot;Sun&quot;)","body":"<p>Assuming <code>dayOfWeek()</code> returns only one of these values:</p>\n<pre><code>{ &quot;Sun&quot;, &quot;Mon&quot;, &quot;Tue&quot;, &quot;Wed&quot;, &quot;Thu&quot;, &quot;Fri&quot;, &quot;Sat&quot; }\n</code></pre>\n<p>You could use a <code>List</code> to determine the order of them:</p>\n<pre><code>  public static String mostFrequentDayOfWeek(SimpleDate[] dates ) {\n      int maxCount = 0;\n      int maxIndex = 0;\n      String freqDay = &quot;&quot;;\n\n      List&lt;String&gt; days = Arrays.asList(&quot;Sun&quot;, &quot;Mon&quot;, &quot;Tue&quot;, &quot;Wed&quot;, &quot;Thu&quot;, &quot;Fri&quot;, &quot;Sat&quot;);\n      for(SimpleDate d1 : dates) {\n        int count = 0;\n        String day1 = dayOfWeek(d1);\n        for(SimpleDate d2 : dates) {\n          String day2 = dayOfWeek(d2);\n          if (day1.equals(day2)) {\n            count++;\n          }      \n        }\n        \n        if (count &gt; maxCount) {\n          maxCount = count;\n          maxIndex = days.indexOf(day1);\n          freqDay = day1;\n        }\n        else if (count == maxCount) {\n          int newIndex = days.indexOf(day1);\n          if (newIndex &lt; maxIndex) {\n            maxIndex = newIndex;\n            freqDay = day1;\n          }\n        }\n      }  \n    \n      return freqDay;\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5879019,"reputation":1195,"user_id":4629025,"display_name":"Raushan Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677792971,"creation_date":1677792971,"answer_id":75621048,"question_id":75619526,"body_markdown":"to solve the problem modify `else if` block\r\n\r\n    else if (count == maxcount) {\r\n        days.add(dayOfWeek(dates[i]));\r\n        if (days.indexOf(dayOfWeek(dates[i])) &lt; days.indexOf(freqDay)) {\r\n            freqDay = dayOfWeek(dates[i]);\r\n        }\r\n    }\r\n\r\nmodified code as below:\r\n\r\n    public static String mostFrequentDayOfWeek(SimpleDate[] dates) {\r\n        int maxcount = 0;\r\n        String freqDay = &quot;&quot;;\r\n        Vector&lt;String&gt; days = new Vector&lt;String&gt;();\r\n    \r\n        for (int i = 0; i &lt; dates.length; i++) {\r\n    \r\n            int count = 0;\r\n            for (int j = 0; j &lt; dates.length; j++) {\r\n                if (dayOfWeek(dates[i]).equals(dayOfWeek(dates[j]))) {\r\n                    count++;\r\n                }\r\n            }\r\n    \r\n            if (count &gt; maxcount) {\r\n                maxcount = count;\r\n                freqDay = dayOfWeek(dates[i]);\r\n            } else if (count == maxcount) {\r\n                days.add(dayOfWeek(dates[i]));\r\n                if (days.indexOf(dayOfWeek(dates[i])) &lt; days.indexOf(freqDay)) {\r\n                    freqDay = dayOfWeek(dates[i]);\r\n                }\r\n            }\r\n        }\r\n        return freqDay;\r\n    }\r\n\r\n","title":"How to choose the earliest day in a Vector (from &quot;Mon&quot; to &quot;Sun&quot;)","body":"<p>to solve the problem modify <code>else if</code> block</p>\n<pre><code>else if (count == maxcount) {\n    days.add(dayOfWeek(dates[i]));\n    if (days.indexOf(dayOfWeek(dates[i])) &lt; days.indexOf(freqDay)) {\n        freqDay = dayOfWeek(dates[i]);\n    }\n}\n</code></pre>\n<p>modified code as below:</p>\n<pre><code>public static String mostFrequentDayOfWeek(SimpleDate[] dates) {\n    int maxcount = 0;\n    String freqDay = &quot;&quot;;\n    Vector&lt;String&gt; days = new Vector&lt;String&gt;();\n\n    for (int i = 0; i &lt; dates.length; i++) {\n\n        int count = 0;\n        for (int j = 0; j &lt; dates.length; j++) {\n            if (dayOfWeek(dates[i]).equals(dayOfWeek(dates[j]))) {\n                count++;\n            }\n        }\n\n        if (count &gt; maxcount) {\n            maxcount = count;\n            freqDay = dayOfWeek(dates[i]);\n        } else if (count == maxcount) {\n            days.add(dayOfWeek(dates[i]));\n            if (days.indexOf(dayOfWeek(dates[i])) &lt; days.indexOf(freqDay)) {\n                freqDay = dayOfWeek(dates[i]);\n            }\n        }\n    }\n    return freqDay;\n}\n</code></pre>\n"}],"owner":{"account_id":27819274,"reputation":11,"user_id":21240013,"display_name":"Ebrahim Al-Aghbari"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":100,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75620337,"answer_count":2,"score":0,"last_activity_date":1677872151,"creation_date":1677781855,"question_id":75619526,"body_markdown":"This method takes a list of dates and it returns the most frequent day within the dates. It returns correctly; however, in case of tie between the days, the earliest day should be returned. For example, if there was a tie between Tuesday and Friday, the method should return &quot;Tue&quot;. However, I could not figure out how to do it. I figured out how to return in case of tie but not the earliest day. \r\n\r\n```\r\npublic static String mostFrequentDayOfWeek( SimpleDate[] dates ) {\r\n        int maxcount = 0;\r\n        String freqDay = &quot;&quot;;\r\n        Vector&lt;String&gt; days = new Vector&lt;String&gt;();\r\n\r\n        for (int i = 0; i &lt; dates.length; i++) {\r\n\r\n            int count = 0;\r\n            for (int j = 0; j &lt; dates.length; j++) {\r\n                if (dayOfWeek(dates[i]).equals(dayOfWeek(dates[j]))) {\r\n                    count++;\r\n                }\r\n            }\r\n\r\n            if (count &gt; maxcount) {\r\n                maxcount = count;\r\n                freqDay = dayOfWeek(dates[i]);\r\n            }\r\n\r\n            else if (count == maxcount) {\r\n                Vector&lt;String&gt; days;\r\n                days = new Vector&lt;String&gt;();\r\n                days.add(dayOfWeek(dates[i]));\r\n                freqDay = days.get(i);\r\n                \r\n            }\r\n        }\r\n        return freqDay;\r\n    }\r\n```\r\n\r\nThis is the bit where im stuck on:\r\n\r\n```\r\nelse if (count == maxcount) {\r\n                \r\n                \r\n                days.add(dayOfWeek(dates[i]));\r\n                freqDay = days.get(i);\r\n                \r\n            }\r\n```\r\nIt&#39;s not completed but im asking if you could demonstrate a way to do it.\r\n\r\n\r\n\r\nThe code should return the earliest most frequent day in case of tie only.\r\n\r\nThis is dayOfWeeks method as requested:\r\n\r\n    public static String dayOfWeek( SimpleDate date ) {\r\n            // declared vairables to utilise the getters of day, month and year in SimpleDate\r\n            int day = date.getDay();     \r\n            int month = date.getMonth(); \r\n            int year = date.getYear();   \r\n            int Z, X, Y, W, C, D;\r\n            String nameofday = &quot;&quot;; // a variable that will be returned by the method \r\n    \r\n            if(month &lt; 3){\r\n                month = month + 12;\r\n                year = year - 1;\r\n            }\r\n            C = year % 100;\r\n            D = year / 100;\r\n            W = 13*( month + 1 )/5;\r\n            X = C / 4;\r\n            Y = D / 4;\r\n            Z = W + X + Y + day + C - 2 * D;\r\n            day = Z % 7;\r\n    \r\n            if(day&lt;0){\r\n                day =+ 7;\r\n            }\r\n                    // switch-case statement to switch whatever the value of &#39;day&#39; to its corresponce abbreaviation\r\n            switch(day){\r\n                case 0 : nameofday = &quot;Sat&quot;;break;\r\n                case 1 : nameofday = &quot;Sun&quot;;break;\r\n                case 2 : nameofday = &quot;Mon&quot;;break;\r\n                case 3 : nameofday = &quot;Tue&quot;;break;\r\n                case 4 : nameofday = &quot;Wed&quot;;break;\r\n                case 5 : nameofday = &quot;Thu&quot;;break;\r\n                case 6 : nameofday = &quot;Fri&quot;;break;\r\n            }\r\n            return nameofday;\r\n        }","title":"How to choose the earliest day in a Vector (from &quot;Mon&quot; to &quot;Sun&quot;)","body":"<p>This method takes a list of dates and it returns the most frequent day within the dates. It returns correctly; however, in case of tie between the days, the earliest day should be returned. For example, if there was a tie between Tuesday and Friday, the method should return &quot;Tue&quot;. However, I could not figure out how to do it. I figured out how to return in case of tie but not the earliest day.</p>\n<pre><code>public static String mostFrequentDayOfWeek( SimpleDate[] dates ) {\n        int maxcount = 0;\n        String freqDay = &quot;&quot;;\n        Vector&lt;String&gt; days = new Vector&lt;String&gt;();\n\n        for (int i = 0; i &lt; dates.length; i++) {\n\n            int count = 0;\n            for (int j = 0; j &lt; dates.length; j++) {\n                if (dayOfWeek(dates[i]).equals(dayOfWeek(dates[j]))) {\n                    count++;\n                }\n            }\n\n            if (count &gt; maxcount) {\n                maxcount = count;\n                freqDay = dayOfWeek(dates[i]);\n            }\n\n            else if (count == maxcount) {\n                Vector&lt;String&gt; days;\n                days = new Vector&lt;String&gt;();\n                days.add(dayOfWeek(dates[i]));\n                freqDay = days.get(i);\n                \n            }\n        }\n        return freqDay;\n    }\n</code></pre>\n<p>This is the bit where im stuck on:</p>\n<pre><code>else if (count == maxcount) {\n                \n                \n                days.add(dayOfWeek(dates[i]));\n                freqDay = days.get(i);\n                \n            }\n</code></pre>\n<p>It's not completed but im asking if you could demonstrate a way to do it.</p>\n<p>The code should return the earliest most frequent day in case of tie only.</p>\n<p>This is dayOfWeeks method as requested:</p>\n<pre><code>public static String dayOfWeek( SimpleDate date ) {\n        // declared vairables to utilise the getters of day, month and year in SimpleDate\n        int day = date.getDay();     \n        int month = date.getMonth(); \n        int year = date.getYear();   \n        int Z, X, Y, W, C, D;\n        String nameofday = &quot;&quot;; // a variable that will be returned by the method \n\n        if(month &lt; 3){\n            month = month + 12;\n            year = year - 1;\n        }\n        C = year % 100;\n        D = year / 100;\n        W = 13*( month + 1 )/5;\n        X = C / 4;\n        Y = D / 4;\n        Z = W + X + Y + day + C - 2 * D;\n        day = Z % 7;\n\n        if(day&lt;0){\n            day =+ 7;\n        }\n                // switch-case statement to switch whatever the value of 'day' to its corresponce abbreaviation\n        switch(day){\n            case 0 : nameofday = &quot;Sat&quot;;break;\n            case 1 : nameofday = &quot;Sun&quot;;break;\n            case 2 : nameofday = &quot;Mon&quot;;break;\n            case 3 : nameofday = &quot;Tue&quot;;break;\n            case 4 : nameofday = &quot;Wed&quot;;break;\n            case 5 : nameofday = &quot;Thu&quot;;break;\n            case 6 : nameofday = &quot;Fri&quot;;break;\n        }\n        return nameofday;\n    }\n</code></pre>\n"},{"tags":["java","spring","logging","spring-boot-actuator"],"answers":[{"tags":[],"owner":{"account_id":11175092,"reputation":45706,"user_id":8200937,"display_name":"glytching"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1533714850,"creation_date":1498208807,"answer_id":44717428,"question_id":44552747,"body_markdown":"I don&#39;t think it&#39;s possible to override all child logger levels where a child logger level has already been explicitly set. \r\n\r\nSpring Boot&#39;s `LoggingEndpoint` delegates to `ch.qos.logback.classic.Logger.handleParentLevelChange()` and that method has a conditional block on `if(this.level == null) { }` so when the recursive call (which walks over all loggers) arrives at &quot;com.parent.child&quot; it will do nothing because &quot;com.parent.child&quot; already has an assigned level.\r\n\r\nYou can, of course, set a configuredLevel on a specific logger since that calls `ch.qos.logback.classic.Logger.setLevel()` and hence is not subject to the conditional block in `handleParentLevelChange()`.","title":"Spring Boot Actuator: can I change the logger level for entire package in one go?","body":"<p>I don't think it's possible to override all child logger levels where a child logger level has already been explicitly set. </p>\n\n<p>Spring Boot's <code>LoggingEndpoint</code> delegates to <code>ch.qos.logback.classic.Logger.handleParentLevelChange()</code> and that method has a conditional block on <code>if(this.level == null) { }</code> so when the recursive call (which walks over all loggers) arrives at \"com.parent.child\" it will do nothing because \"com.parent.child\" already has an assigned level.</p>\n\n<p>You can, of course, set a configuredLevel on a specific logger since that calls <code>ch.qos.logback.classic.Logger.setLevel()</code> and hence is not subject to the conditional block in <code>handleParentLevelChange()</code>.</p>\n"},{"tags":[],"owner":{"account_id":27930001,"reputation":1,"user_id":21328258,"display_name":"RichardL"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677872150,"creation_date":1677872150,"answer_id":75631224,"question_id":44552747,"body_markdown":"Looking for this led me to a property that you might find useful.  Using curl, you can post the desired logging level as &quot;&quot; (zero length string) which has the effect of setting the configuredLevel to null.  This can be done for the child or parent in the hierarchy and then allows you dynamically set and unset from either the parent or the child class logging levels.","title":"Spring Boot Actuator: can I change the logger level for entire package in one go?","body":"<p>Looking for this led me to a property that you might find useful.  Using curl, you can post the desired logging level as &quot;&quot; (zero length string) which has the effect of setting the configuredLevel to null.  This can be done for the child or parent in the hierarchy and then allows you dynamically set and unset from either the parent or the child class logging levels.</p>\n"}],"owner":{"account_id":374969,"reputation":1404,"user_id":1522753,"accept_rate":36,"display_name":"Bartek Maraszek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2109,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1677872150,"creation_date":1497467058,"question_id":44552747,"body_markdown":"In my Spring Boot application, I&#39;ve enabled the Actuators, and I can see all my loggers at: `localhost:8080/loggers` like this:\r\n\r\n    \r\n    &quot;com.parent&quot;:{&quot;configuredLevel&quot;:&quot;INFO&quot;,&quot;effectiveLevel&quot;:&quot;INFO&quot;},\r\n    &quot;com.parent.child&quot;:{&quot;configuredLevel&quot;:&quot;TRACE&quot;,&quot;effectiveLevel&quot;:&quot;TRACE&quot;}\r\n    [...]\r\n\r\nNow I change the logging level by sending a request:\r\n\r\n    curl -i -X POST -H &#39;Content-Type: application/json&#39; -d &#39;{&quot;configuredLevel&quot;: &quot;DEBUG&quot;}&#39; http://localhost:8080/loggers/com.parent\r\n\r\nHad the `configuredLevel` of `com.parent.child` not been set, changing the `com.parent`&#39;s logging level would have changed `com.parent.child`&#39;s  `effectiveLevel`.\r\n\r\nIs there a way to override all children&#39;s logger level in a single request even though the `configuredLevel` has already been set?\r\n\r\nI&#39;ve tried using `*` as a wildcard symbol, but it didn&#39;t work. Is what I&#39;m trying to do possible, or I have to reset the `configuredLevel` of all children separately?\r\n","title":"Spring Boot Actuator: can I change the logger level for entire package in one go?","body":"<p>In my Spring Boot application, I've enabled the Actuators, and I can see all my loggers at: <code>localhost:8080/loggers</code> like this:</p>\n\n<pre><code>\"com.parent\":{\"configuredLevel\":\"INFO\",\"effectiveLevel\":\"INFO\"},\n\"com.parent.child\":{\"configuredLevel\":\"TRACE\",\"effectiveLevel\":\"TRACE\"}\n[...]\n</code></pre>\n\n<p>Now I change the logging level by sending a request:</p>\n\n<pre><code>curl -i -X POST -H 'Content-Type: application/json' -d '{\"configuredLevel\": \"DEBUG\"}' http://localhost:8080/loggers/com.parent\n</code></pre>\n\n<p>Had the <code>configuredLevel</code> of <code>com.parent.child</code> not been set, changing the <code>com.parent</code>'s logging level would have changed <code>com.parent.child</code>'s  <code>effectiveLevel</code>.</p>\n\n<p>Is there a way to override all children's logger level in a single request even though the <code>configuredLevel</code> has already been set?</p>\n\n<p>I've tried using <code>*</code> as a wildcard symbol, but it didn't work. Is what I'm trying to do possible, or I have to reset the <code>configuredLevel</code> of all children separately?</p>\n"},{"tags":["java","android","flutter","android-studio"],"answers":[{"tags":[],"owner":{"account_id":18775293,"reputation":581,"user_id":13691187,"display_name":"Ammar Mohamed"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677872142,"creation_date":1677872142,"answer_id":75631222,"question_id":75631113,"body_markdown":"Found an answer [here][1]\r\nYou just need to copy the contents of jbr folder to jre folder and it works\r\n\r\n  [1]: https://stackoverflow.com/questions/68569430/unable-to-find-bundled-java-version-with-flutter-doctor-after-updating-android","title":"Android Studio after update Error: could not open `C:\\Program Files\\Android\\Android Studio\\jre\\lib\\jvm.cfg&#39;","body":"<p>Found an answer <a href=\"https://stackoverflow.com/questions/68569430/unable-to-find-bundled-java-version-with-flutter-doctor-after-updating-android\">here</a>\nYou just need to copy the contents of jbr folder to jre folder and it works</p>\n"}],"owner":{"account_id":18775293,"reputation":581,"user_id":13691187,"display_name":"Ammar Mohamed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":554,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75631222,"answer_count":1,"score":1,"last_activity_date":1677872142,"creation_date":1677871372,"question_id":75631113,"body_markdown":"After updating Android Studio to Electric Eel version, I try to build an apk from a Flutter project it gives the message \r\n```\r\nError: could not open `C:\\Program Files\\Android\\Android Studio\\jre\\lib\\jvm.cfg&#39;\r\n```\r\nI noticed that ```Program Files\\Android``` contained two Android Studio folders with the other named as ```Android Studio1``` and it contains the correct folders, while the other contained only this ```jre``` folder  and the file ```jvm.cfg``` doesn&#39;t exist, is there something I can do other than deleting the whole thing and re installing?","title":"Android Studio after update Error: could not open `C:\\Program Files\\Android\\Android Studio\\jre\\lib\\jvm.cfg&#39;","body":"<p>After updating Android Studio to Electric Eel version, I try to build an apk from a Flutter project it gives the message</p>\n<pre><code>Error: could not open `C:\\Program Files\\Android\\Android Studio\\jre\\lib\\jvm.cfg'\n</code></pre>\n<p>I noticed that <code>Program Files\\Android</code> contained two Android Studio folders with the other named as <code>Android Studio1</code> and it contains the correct folders, while the other contained only this <code>jre</code> folder  and the file <code>jvm.cfg</code> doesn't exist, is there something I can do other than deleting the whole thing and re installing?</p>\n"},{"tags":["java","mocking","mockito","quarkus","quarkus-rest-client"],"comments":[{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":3,"creation_date":1663653355,"post_id":73778856,"comment_id":130284060,"body_markdown":"That version of Quarkus is quite old actually... It&#39;s hard to know what&#39;s going on, but my guess is that you are seeing a bug that has already been fixed in newer Quarkus versions","body":"That version of Quarkus is quite old actually... It&#39;s hard to know what&#39;s going on, but my guess is that you are seeing a bug that has already been fixed in newer Quarkus versions"}],"answers":[{"tags":[],"owner":{"account_id":9333948,"reputation":331,"user_id":6928778,"display_name":"Lbro"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672327164,"creation_date":1672327164,"answer_id":74952911,"question_id":73778856,"body_markdown":"Maybe too late but someone might be interested ...\r\n\r\nChange your application.properties like this :\r\n`%test.RESTCLIENT-1.0/mp-rest/scope=javax.enterprise.context.ApplicationScoped` where you may have `RESTCLIENT-1.0/mp-rest/scope=javax.inject.Singleton`.\r\nIn other word replace `javax.inject.Singleton` by `javax.enterprise.context.ApplicationScoped` for the test profile.","title":"Quarkus Mockito Not Inject Mock with Rest Client","body":"<p>Maybe too late but someone might be interested ...</p>\n<p>Change your application.properties like this :\n<code>%test.RESTCLIENT-1.0/mp-rest/scope=javax.enterprise.context.ApplicationScoped</code> where you may have <code>RESTCLIENT-1.0/mp-rest/scope=javax.inject.Singleton</code>.\nIn other word replace <code>javax.inject.Singleton</code> by <code>javax.enterprise.context.ApplicationScoped</code> for the test profile.</p>\n"},{"tags":[],"owner":{"account_id":7546897,"reputation":3757,"user_id":5729579,"display_name":"Derrick"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677871797,"creation_date":1677871797,"answer_id":75631181,"question_id":73778856,"body_markdown":"From quarkus.io guide -\r\n\r\n&gt; By default, the @InjectMock annotation can be used for any normal CDI scoped bean (e.g. @ApplicationScoped, @RequestScoped). Mocking @Singleton beans can be performed by setting the `convertScopes` property to true (such as @InjectMock(convertScopes = true). This will convert the @Singleton bean to an @ApplicationScoped bean for the test.\r\n\r\n    @InjectMock(convertScopes = true)\r\n    @RestClient\r\n    MyRestService service;\r\n\r\nThis pretty much worked for me after researching for long hours\r\n\r\nhttps://quarkus.io/guides/getting-started-testing","title":"Quarkus Mockito Not Inject Mock with Rest Client","body":"<p>From quarkus.io guide -</p>\n<blockquote>\n<p>By default, the @InjectMock annotation can be used for any normal CDI scoped bean (e.g. @ApplicationScoped, @RequestScoped). Mocking @Singleton beans can be performed by setting the <code>convertScopes</code> property to true (such as @InjectMock(convertScopes = true). This will convert the @Singleton bean to an @ApplicationScoped bean for the test.</p>\n</blockquote>\n<pre><code>@InjectMock(convertScopes = true)\n@RestClient\nMyRestService service;\n</code></pre>\n<p>This pretty much worked for me after researching for long hours</p>\n<p><a href=\"https://quarkus.io/guides/getting-started-testing\" rel=\"nofollow noreferrer\">https://quarkus.io/guides/getting-started-testing</a></p>\n"}],"owner":{"account_id":24815272,"reputation":3,"user_id":18696174,"display_name":"devs4wl"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1075,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75631181,"answer_count":2,"score":0,"last_activity_date":1677871797,"creation_date":1663618822,"question_id":73778856,"body_markdown":"Following quakus guide for mocking: https://quarkus.io/blog/mocking. The client is working fine in my **api**, but when I try to mock my **Rest Client**, it returns a error.\r\n\r\nMy test class:\r\n--------------\r\n\r\n    @InjectMock\r\n    @RestClient\r\n    CustomClient customClient;\r\n\r\nMy Rest Client:\r\n---------------\r\n\r\n    @Path(&quot;/clientes&quot;)\r\n    @ApplicationScoped\r\n    @RegisterRestClient\r\n    @Produces(MediaType.APPLICATION_JSON)\r\n    public interface CustomClient {\r\n\r\n      @GET\r\n      Object findById(@QueryParam(&quot;id&quot;) String id);\r\n    }\r\n\r\nStack trace:\r\n------------\r\n\r\n    org.junit.jupiter.api.extension.TestInstantiationException: Failed to create test instance\r\n\r\n\tat io.quarkus.test.junit.QuarkusTestExtension.initTestState(QuarkusTestExtension.java:823)\r\n\tat io.quarkus.test.junit.QuarkusTestExtension.interceptTestClassConstructor(QuarkusTestExtension.java:787)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.api.extension.InvocationInterceptor.interceptTestClassConstructor(InvocationInterceptor.java:72)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:77)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestClassConstructor(ClassBasedTestDescriptor.java:342)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateTestClass(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.jupiter.engine.descriptor.ClassTestDescriptor.instantiateTestClass(ClassTestDescriptor.java:79)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:267)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$2(ClassBasedTestDescriptor.java:259)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:369)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$3(ClassBasedTestDescriptor.java:258)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:101)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:100)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:65)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:111)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:111)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:79)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:220)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:53)\r\n  \r\n\r\n    Caused by: org.mockito.exceptions.base.MockitoException: \r\n    Cannot mock/spy class com.sun.proxy.$Proxy90\r\n    Mockito cannot mock/spy because :\r\n    -final class\r\n\r\n    at io.quarkus.test.junit.mockito.internal.CreateMockitoMocksCallback.createMockAndSetTestField(CreateMockitoMocksCallback.java:54)\r\n\tat io.quarkus.test.junit.mockito.internal.CreateMockitoMocksCallback.afterConstruct(CreateMockitoMocksCallback.java:29)\r\n\t... 66 more\r\n\r\nIt seems `mockito` not injecting rest client. I&#39;m using **Quarkus** **1.13.1 Final**, due to organizational policies.","title":"Quarkus Mockito Not Inject Mock with Rest Client","body":"<p>Following quakus guide for mocking: <a href=\"https://quarkus.io/blog/mocking\" rel=\"nofollow noreferrer\">https://quarkus.io/blog/mocking</a>. The client is working fine in my <strong>api</strong>, but when I try to mock my <strong>Rest Client</strong>, it returns a error.</p>\n<h2>My test class:</h2>\n<pre><code>@InjectMock\n@RestClient\nCustomClient customClient;\n</code></pre>\n<h2>My Rest Client:</h2>\n<pre><code>@Path(&quot;/clientes&quot;)\n@ApplicationScoped\n@RegisterRestClient\n@Produces(MediaType.APPLICATION_JSON)\npublic interface CustomClient {\n\n  @GET\n  Object findById(@QueryParam(&quot;id&quot;) String id);\n}\n</code></pre>\n<h2>Stack trace:</h2>\n<pre><code>org.junit.jupiter.api.extension.TestInstantiationException: Failed to create test instance\n\nat io.quarkus.test.junit.QuarkusTestExtension.initTestState(QuarkusTestExtension.java:823)\nat io.quarkus.test.junit.QuarkusTestExtension.interceptTestClassConstructor(QuarkusTestExtension.java:787)\nat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\nat org.junit.jupiter.api.extension.InvocationInterceptor.interceptTestClassConstructor(InvocationInterceptor.java:72)\nat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\nat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\nat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:77)\nat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestClassConstructor(ClassBasedTestDescriptor.java:342)\nat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateTestClass(ClassBasedTestDescriptor.java:289)\nat org.junit.jupiter.engine.descriptor.ClassTestDescriptor.instantiateTestClass(ClassTestDescriptor.java:79)\nat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:267)\nat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$2(ClassBasedTestDescriptor.java:259)\nat java.base/java.util.Optional.orElseGet(Optional.java:369)\nat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$3(ClassBasedTestDescriptor.java:258)\nat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:101)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:100)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:65)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:111)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:111)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:79)\nat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\nat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\nat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\nat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\nat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:220)\nat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:53)\n\n\nCaused by: org.mockito.exceptions.base.MockitoException: \nCannot mock/spy class com.sun.proxy.$Proxy90\nMockito cannot mock/spy because :\n-final class\n\nat io.quarkus.test.junit.mockito.internal.CreateMockitoMocksCallback.createMockAndSetTestField(CreateMockitoMocksCallback.java:54)\nat io.quarkus.test.junit.mockito.internal.CreateMockitoMocksCallback.afterConstruct(CreateMockitoMocksCallback.java:29)\n... 66 more\n</code></pre>\n<p>It seems <code>mockito</code> not injecting rest client. I'm using <strong>Quarkus</strong> <strong>1.13.1 Final</strong>, due to organizational policies.</p>\n"},{"tags":["java","maven","apache-nifi"],"answers":[{"comments":[{"owner":{"account_id":1840430,"reputation":1299,"user_id":1669954,"display_name":"Tekz"},"score":0,"creation_date":1617658883,"post_id":66954645,"comment_id":118360564,"body_markdown":"Thanks for the reply, I need some clarification, on this Are you saying I should use `nifi-standard-services-api-nar` dependency in my `nifi-decoder-processors-nar` pom.xml\n\nand for compile time I should use other two jars dependencies in my `nifi-decoder-processors-processors` (where the actual processor code resides) pom.xml?\n\ni.e. https://mvnrepository.com/artifact/org.apache.nifi/nifi-lookup-service-api and https://mvnrepository.com/artifact/org.apache.nifi/nifi-record, just for compile time?","body":"Thanks for the reply, I need some clarification, on this Are you saying I should use <code>nifi-standard-services-api-nar</code> dependency in my <code>nifi-decoder-processors-nar</code> pom.xml  and for compile time I should use other two jars dependencies in my <code>nifi-decoder-processors-processors</code> (where the actual processor code resides) pom.xml?  i.e. <a href=\"https://mvnrepository.com/artifact/org.apache.nifi/nifi-lookup-service-api\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/org.apache.nifi/&hellip;</a> and <a href=\"https://mvnrepository.com/artifact/org.apache.nifi/nifi-record\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/org.apache.nifi/nifi-record</a>, just for compile time?"},{"owner":{"account_id":21061064,"reputation":517,"user_id":15479443,"display_name":"yaprak"},"score":1,"creation_date":1617706276,"post_id":66954645,"comment_id":118373192,"body_markdown":"I edited my reply to add compile dependency . I hope it helps.","body":"I edited my reply to add compile dependency . I hope it helps."},{"owner":{"account_id":1840430,"reputation":1299,"user_id":1669954,"display_name":"Tekz"},"score":0,"creation_date":1617757391,"post_id":66954645,"comment_id":118393245,"body_markdown":"Thanks a lot @yaprakme, yes I also managed to add the `nifi-lookup-service-api` and also `nifi-record` as I needed to use `Record` class, and it worked. Thanks a lot for your help.","body":"Thanks a lot @yaprakme, yes I also managed to add the <code>nifi-lookup-service-api</code> and also <code>nifi-record</code> as I needed to use <code>Record</code> class, and it worked. Thanks a lot for your help."}],"tags":[],"owner":{"account_id":21061064,"reputation":517,"user_id":15479443,"display_name":"yaprak"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1617706123,"creation_date":1617633018,"answer_id":66954645,"question_id":66951167,"body_markdown":"in order to make use of it in runtime you must add below dependency in  nifi-decoder-processors-nar&#39;s pom file. type is nar\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.nifi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;nifi-standard-services-api-nar&lt;/artifactId&gt;\r\n            &lt;version&gt;1.13.0&lt;/version&gt;\r\n            &lt;type&gt;nar&lt;/type&gt;\r\n        &lt;/dependency&gt;\r\n\r\nas for compiler time add below in nifi-decoder-processors-processors &#39; pom file (I found it in Nar&#39;s pom.xml in repository, you may think NAR as collection of dependency)\r\n\r\n        &lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.apache.nifi&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;nifi-lookup-service-api&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;1.13.0&lt;/version&gt;\r\n\t\t    &lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n[see this post](https://community.cloudera.com/t5/Support-Questions/How-to-use-one-of-nifi-standard-services-like-DBCPService-in/td-p/179077) \r\n","title":"Cannot resolve org.apache.nifi:nifi-standard-services-api-nar - How to use LookupService inside CustomProcessor","body":"<p>in order to make use of it in runtime you must add below dependency in  nifi-decoder-processors-nar's pom file. type is nar</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.nifi&lt;/groupId&gt;\n        &lt;artifactId&gt;nifi-standard-services-api-nar&lt;/artifactId&gt;\n        &lt;version&gt;1.13.0&lt;/version&gt;\n        &lt;type&gt;nar&lt;/type&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>as for compiler time add below in nifi-decoder-processors-processors ' pom file (I found it in Nar's pom.xml in repository, you may think NAR as collection of dependency)</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.nifi&lt;/groupId&gt;\n        &lt;artifactId&gt;nifi-lookup-service-api&lt;/artifactId&gt;\n        &lt;version&gt;1.13.0&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p><a href=\"https://community.cloudera.com/t5/Support-Questions/How-to-use-one-of-nifi-standard-services-like-DBCPService-in/td-p/179077\" rel=\"nofollow noreferrer\">see this post</a></p>\n"},{"tags":[],"owner":{"account_id":27445650,"reputation":1,"user_id":20939490,"display_name":"Sebastian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677869950,"creation_date":1677869950,"answer_id":75630908,"question_id":66951167,"body_markdown":"Run the following maven command (replace 1.20.0 with your version):\r\n\r\n    dependency:get -Dartifact=org.apache.nifi:nifi-standard-services-api-nar:1.20.0\r\n\r\nThis will make sure everything the NAR Mojo needs is in your _local_ repository.","title":"Cannot resolve org.apache.nifi:nifi-standard-services-api-nar - How to use LookupService inside CustomProcessor","body":"<p>Run the following maven command (replace 1.20.0 with your version):</p>\n<pre><code>dependency:get -Dartifact=org.apache.nifi:nifi-standard-services-api-nar:1.20.0\n</code></pre>\n<p>This will make sure everything the NAR Mojo needs is in your <em>local</em> repository.</p>\n"}],"owner":{"account_id":1840430,"reputation":1299,"user_id":1669954,"display_name":"Tekz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1220,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":66954645,"answer_count":2,"score":3,"last_activity_date":1677869950,"creation_date":1617616479,"question_id":66951167,"body_markdown":"I&#39;m implementing Custom NiFi Processor to decode some files. During the decode process I need to lookup external CSV record for certain data mapping. Note the this decoding process is complex so it has to be a custom processor. I know I can setup external CSVRecordLookupService and then within my CustomController I can define a property descriptor as below\r\n\r\n~~~java\r\n    public static final PropertyDescriptor CLIENT_LOOKUP_SERVICE =\r\n            new PropertyDescriptor.Builder()\r\n                    .name(&quot;Client CSV Lookup service&quot;)\r\n                    .identifiesControllerService(LookupService.class)\r\n                    .required(true)\r\n                    .build();\r\n~~~\r\n\r\nMy first problem is How to refer `LookupService.class`, which maven Jar package should I use. After bit of investigation I found this [https://mvnrepository.com/artifact/org.apache.nifi/nifi-standard-services-api-nar/1.13.0](https://mvnrepository.com/artifact/org.apache.nifi/nifi-standard-services-api-nar/1.13.0). So I added it to my `processors` `pom.xml` as below\r\n\r\n~~~xml\r\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.nifi/nifi-standard-services-api-nar --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.nifi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;nifi-standard-services-api-nar&lt;/artifactId&gt;\r\n            &lt;version&gt;1.13.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n~~~\r\n\r\nNow I can compile my class and `LookupService` is visible to the code. However I cannot build the `nar` or run the maven as it gives `Cannot resolve org.apache.nifi:nifi-standard-services-api-nar:1.13.0` error\r\n\r\nin the IDEA it also shows the error \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UE6jD.png\r\n\r\nHow to solve this issue and use `org.apache.nifi.lookup.LookupService` in my custom processor.\r\n\r\nI believe it probably because it comes as `nar` instead of `jar`. But my question is how do I use LookupService at compile time only and use the NiFi provided classes at run time by solving this issue.\r\n\r\n\r\n&gt; UPDATE\r\n\r\nI&#39;d like to provide an update on this, but the issue is not fully resolved.\r\n\r\nI found a jar in [maven repo](https://mvnrepository.com/artifact/org.apache.nifi/nifi-lookup-service-api/1.13.0) which has the `LookupService`\r\n\r\n\r\n\r\nThis together with [org.apache.nifi.serialization.record.Record](https://mvnrepository.com/artifact/org.apache.nifi/nifi-record)&#160;I can compile and run the maven successfully.&#160;\r\n\r\n\r\n\r\nAccording to maven repo dependency both these should be declared with the scope `provided`. So I did that.\r\n\r\nNow the problem is I cannot package the nar. It doesn&#39;t like the I excluded the LookupService class. even if I remove provided scope it doesn&#39;t get included as well.\r\n\r\n~~~\r\n[INFO] Generating documentation for NiFi extensions in the NAR...\r\n[INFO] Found a dependency on version 1.13.0 of NiFi API\r\n[ERROR] Could not generate extensions&#39; documentation\r\njava.lang.NoClassDefFoundError: org/apache/nifi/lookup/LookupService\r\n\r\n...\r\n...\r\n\r\n[ERROR] Failed to execute goal org.apache.nifi:nifi-nar-maven-plugin:1.3.1:nar (default-nar) on project nifi-decoder-processors-nar: Execution default-nar of goal org.apache.nifi:nifi-nar-maven-plugin:1.3.1:nar failed: A required class was missing while executing org.apache.nifi:nifi-nar-maven-plugin:1.3.1:nar: org/apache/nifi/lookup/LookupService\r\n[ERROR] -----------------------------------------------------\r\n[ERROR] realm =    extension&gt;org.apache.nifi:nifi-nar-maven-plugin:1.3.1\r\n~~~\r\n\r\nSo how do we use this LookupService in our custom processors?\r\n","title":"Cannot resolve org.apache.nifi:nifi-standard-services-api-nar - How to use LookupService inside CustomProcessor","body":"<p>I'm implementing Custom NiFi Processor to decode some files. During the decode process I need to lookup external CSV record for certain data mapping. Note the this decoding process is complex so it has to be a custom processor. I know I can setup external CSVRecordLookupService and then within my CustomController I can define a property descriptor as below</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static final PropertyDescriptor CLIENT_LOOKUP_SERVICE =\n            new PropertyDescriptor.Builder()\n                    .name(&quot;Client CSV Lookup service&quot;)\n                    .identifiesControllerService(LookupService.class)\n                    .required(true)\n                    .build();\n</code></pre>\n<p>My first problem is How to refer <code>LookupService.class</code>, which maven Jar package should I use. After bit of investigation I found this <a href=\"https://mvnrepository.com/artifact/org.apache.nifi/nifi-standard-services-api-nar/1.13.0\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/org.apache.nifi/nifi-standard-services-api-nar/1.13.0</a>. So I added it to my <code>processors</code> <code>pom.xml</code> as below</p>\n<pre class=\"lang-xml prettyprint-override\"><code>        &lt;!-- https://mvnrepository.com/artifact/org.apache.nifi/nifi-standard-services-api-nar --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.nifi&lt;/groupId&gt;\n            &lt;artifactId&gt;nifi-standard-services-api-nar&lt;/artifactId&gt;\n            &lt;version&gt;1.13.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>Now I can compile my class and <code>LookupService</code> is visible to the code. However I cannot build the <code>nar</code> or run the maven as it gives <code>Cannot resolve org.apache.nifi:nifi-standard-services-api-nar:1.13.0</code> error</p>\n<p>in the IDEA it also shows the error</p>\n<p><a href=\"https://i.stack.imgur.com/UE6jD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UE6jD.png\" alt=\"enter image description here\" /></a></p>\n<p>How to solve this issue and use <code>org.apache.nifi.lookup.LookupService</code> in my custom processor.</p>\n<p>I believe it probably because it comes as <code>nar</code> instead of <code>jar</code>. But my question is how do I use LookupService at compile time only and use the NiFi provided classes at run time by solving this issue.</p>\n<blockquote>\n<p>UPDATE</p>\n</blockquote>\n<p>I'd like to provide an update on this, but the issue is not fully resolved.</p>\n<p>I found a jar in <a href=\"https://mvnrepository.com/artifact/org.apache.nifi/nifi-lookup-service-api/1.13.0\" rel=\"nofollow noreferrer\">maven repo</a> which has the <code>LookupService</code></p>\n<p>This together with <a href=\"https://mvnrepository.com/artifact/org.apache.nifi/nifi-record\" rel=\"nofollow noreferrer\">org.apache.nifi.serialization.record.Record</a>I can compile and run the maven successfully.</p>\n<p>According to maven repo dependency both these should be declared with the scope <code>provided</code>. So I did that.</p>\n<p>Now the problem is I cannot package the nar. It doesn't like the I excluded the LookupService class. even if I remove provided scope it doesn't get included as well.</p>\n<pre><code>[INFO] Generating documentation for NiFi extensions in the NAR...\n[INFO] Found a dependency on version 1.13.0 of NiFi API\n[ERROR] Could not generate extensions' documentation\njava.lang.NoClassDefFoundError: org/apache/nifi/lookup/LookupService\n\n...\n...\n\n[ERROR] Failed to execute goal org.apache.nifi:nifi-nar-maven-plugin:1.3.1:nar (default-nar) on project nifi-decoder-processors-nar: Execution default-nar of goal org.apache.nifi:nifi-nar-maven-plugin:1.3.1:nar failed: A required class was missing while executing org.apache.nifi:nifi-nar-maven-plugin:1.3.1:nar: org/apache/nifi/lookup/LookupService\n[ERROR] -----------------------------------------------------\n[ERROR] realm =    extension&gt;org.apache.nifi:nifi-nar-maven-plugin:1.3.1\n</code></pre>\n<p>So how do we use this LookupService in our custom processors?</p>\n"},{"tags":["java","json","jackson"],"answers":[{"comments":[{"owner":{"account_id":216151,"reputation":26327,"user_id":471213,"accept_rate":82,"display_name":"usr-local-"},"score":0,"creation_date":1677869971,"post_id":75630862,"comment_id":133429192,"body_markdown":"Thank you. I used Spring Boot&#39;s [`ObjectDeserializer&lt;T&gt;`](https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/jackson/JsonObjectDeserializer.html) but the approach is the same","body":"Thank you. I used Spring Boot&#39;s <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/jackson/JsonObjectDeserializer.html\" rel=\"nofollow noreferrer\"><code>ObjectDeserializer&lt;T&gt;</code></a> but the approach is the same"}],"tags":[],"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1677869601,"creation_date":1677869601,"answer_id":75630862,"question_id":75626593,"body_markdown":"Because you want to encapsulate a polymorphic value into the `Object`field of your `Field` class the task can be solved with a custom [`StdDeserializer`](https://fasterxml.github.io/jackson-databind/javadoc/2.14/com/fasterxml/jackson/databind/deser/std/StdDeserializer.html) deserializer distinguishing the three cases you indicated (string, array, and map). So if you take a simplified version of your classes like below:\r\n\r\n~~~\r\n@Data\r\npublic class Field {\r\n    @JsonDeserialize(using = OptionDeserializer.class)\r\n    private Object option;\r\n}\r\n\r\n@Data\r\npublic class DetFieldOption {\r\n    private String value;\r\n    private String label;\r\n}\r\n~~~\r\n\r\nYou can define a custom `stdDeserializer` that can return a different object in the three cases you indicated checking if the `JsonNode` option is a string, an array, or an object:\r\n\r\n~~~\r\npublic class OptionDeserializer extends StdDeserializer&lt;Object&gt; {\r\n\r\n    public OptionDeserializer() {\r\n        super(Object.class);\r\n    }\r\n\r\n    @Override\r\n    public Object deserialize(JsonParser jp, DeserializationContext dc) throws IOException, JsonProcessingException {\r\n        ObjectCodec codec = jp.getCodec();\r\n        JsonNode node = codec.readTree(jp);\r\n        //jsonnode is an array so it will be converted to DetFieldOption[]\r\n        if (node.isArray()) {\r\n            return codec.treeToValue(node, DetFieldOption[].class);\r\n        }\r\n        //jsonnode is a pojo so to convert it to a Map&lt;String, String&gt;\r\n        //it is necessary to define a new TypeReference\r\n        //no key as Integer because in a json keys are always string\r\n        //but you can convert them to integer if you need\r\n        if (node.isObject()) {\r\n            TypeReference typeRef = new TypeReference&lt;Map&lt;String, String&gt;&gt;(){};\r\n            Map&lt;String, String&gt; map = codec.readValue(codec.treeAsTokens(node),\r\n                    dc.getTypeFactory().constructType(typeRef));\r\n            return map;\r\n        }\r\n        //default case node is a string\r\n        return node.asText();\r\n    }\r\n}\r\n~~~\r\nThen you can convert json strings like the following below to `Field` objects:\r\n\r\n~~~\r\nString json3 = &quot;&quot;&quot;\r\n                    {&quot;option&quot;: &quot;myString&quot;}\r\n              &quot;&quot;&quot;;\r\n\r\nString json2 = &quot;&quot;&quot;\r\n                    {&quot;option&quot;: [{&quot;value&quot;: &quot;myValue&quot;}]}\r\n               &quot;&quot;&quot;;\r\nString json3 = &quot;&quot;&quot;\r\n                    {&quot;option&quot;: {&quot;1&quot;: &quot;myString1&quot;}}\r\n               &quot;&quot;&quot;;\r\nField field1 = mapper.readValue(json1, Field.class);\r\nField field2 = mapper.readValue(json2, Field.class);\r\nField field3 = mapper.readValue(json3, Field.class);\r\n~~~\r\n\r\n\r\n","title":"Mapping Typescript dynamic types into Java Object&#39;s subclasses","body":"<p>Because you want to encapsulate a polymorphic value into the <code>Object</code>field of your <code>Field</code> class the task can be solved with a custom <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.14/com/fasterxml/jackson/databind/deser/std/StdDeserializer.html\" rel=\"nofollow noreferrer\"><code>StdDeserializer</code></a> deserializer distinguishing the three cases you indicated (string, array, and map). So if you take a simplified version of your classes like below:</p>\n<pre><code>@Data\npublic class Field {\n    @JsonDeserialize(using = OptionDeserializer.class)\n    private Object option;\n}\n\n@Data\npublic class DetFieldOption {\n    private String value;\n    private String label;\n}\n</code></pre>\n<p>You can define a custom <code>stdDeserializer</code> that can return a different object in the three cases you indicated checking if the <code>JsonNode</code> option is a string, an array, or an object:</p>\n<pre><code>public class OptionDeserializer extends StdDeserializer&lt;Object&gt; {\n\n    public OptionDeserializer() {\n        super(Object.class);\n    }\n\n    @Override\n    public Object deserialize(JsonParser jp, DeserializationContext dc) throws IOException, JsonProcessingException {\n        ObjectCodec codec = jp.getCodec();\n        JsonNode node = codec.readTree(jp);\n        //jsonnode is an array so it will be converted to DetFieldOption[]\n        if (node.isArray()) {\n            return codec.treeToValue(node, DetFieldOption[].class);\n        }\n        //jsonnode is a pojo so to convert it to a Map&lt;String, String&gt;\n        //it is necessary to define a new TypeReference\n        //no key as Integer because in a json keys are always string\n        //but you can convert them to integer if you need\n        if (node.isObject()) {\n            TypeReference typeRef = new TypeReference&lt;Map&lt;String, String&gt;&gt;(){};\n            Map&lt;String, String&gt; map = codec.readValue(codec.treeAsTokens(node),\n                    dc.getTypeFactory().constructType(typeRef));\n            return map;\n        }\n        //default case node is a string\n        return node.asText();\n    }\n}\n</code></pre>\n<p>Then you can convert json strings like the following below to <code>Field</code> objects:</p>\n<pre><code>String json3 = &quot;&quot;&quot;\n                    {&quot;option&quot;: &quot;myString&quot;}\n              &quot;&quot;&quot;;\n\nString json2 = &quot;&quot;&quot;\n                    {&quot;option&quot;: [{&quot;value&quot;: &quot;myValue&quot;}]}\n               &quot;&quot;&quot;;\nString json3 = &quot;&quot;&quot;\n                    {&quot;option&quot;: {&quot;1&quot;: &quot;myString1&quot;}}\n               &quot;&quot;&quot;;\nField field1 = mapper.readValue(json1, Field.class);\nField field2 = mapper.readValue(json2, Field.class);\nField field3 = mapper.readValue(json3, Field.class);\n</code></pre>\n"}],"owner":{"account_id":216151,"reputation":26327,"user_id":471213,"accept_rate":82,"display_name":"usr-local-"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":205,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75630862,"answer_count":1,"score":2,"last_activity_date":1677869601,"creation_date":1677843394,"question_id":75626593,"body_markdown":"I have a Typescript model being sent as JSON request to my back end server. I can&#39;t change the model into a more engineered format, so I have to use what the client is going to send me.\r\n\r\nThe Typescript interface uses the pipe to perform polymorphism as shown below:\r\n\r\n```typescript\r\nexport interface Field {\r\n  align: &#39;center&#39; | &#39;left&#39;; // css property that does not work  disabled: boolean;\r\n  label: string;\r\n  readonly: boolean;\r\n  ref: string; // unique identifier  size: string; // css width  type: FIELD_TYPES;\r\n  value: string;\r\n  required: boolean;\r\n  visible: string; // &#39;true&#39; | &#39;plugin:...&#39;  \r\n  invisible: &#39;true&#39; | &#39;false&#39;; // never used  \r\n  optional: string; // just in 3 fields, never used \r\n  option:\r\n    | string // &#39;plugin:...&#39;    \r\n    | { value: string; label: string; disable?: string; labelEng?: string, valueOfAnswerInInterestType?: string }[] //FieldOption\r\n    | { 1?: string; 2?: string; 3?: string; 4?: string; 5?: string; 6?: string };  //Map&lt;Integer,String&gt;\r\n}\r\n```\r\n\r\nAs you can see, `option` can either be `String` or an array, or a plain POJO.\r\n\r\nWhat I need to achieve is to create a Jackson mapping and use Java&#39;s powerful `instanceof` operator to work on the deserialized class.\r\n\r\nLook at this target model:\r\n\r\n```java\r\n@Data\r\npublic class Field {    \r\n    private DetFieldAlignment align; // css property that does not work  disabled: boolean;    \r\n    ....\r\n    private String optional;//  just in 3 fields, never used    \r\n   \r\n    private Object option; // &#39;plugin:...&#39; | [{ value: 1, label: &#39;my value&#39; }, ...] | { &quot;1&quot;: &quot;Option one ...&quot;}\r\n}\r\n\r\n@Data\r\npublic class DetFieldOption {\r\n    private String value;\r\n    private String label;\r\n    private String disable;\r\n    ....\r\n}\r\n\r\n```\r\n\r\nI need to instruct Jackson about polymorphic serialization for the possible subclasses of `Object`, but I am having difficulty.\r\nI wrote JUnit tests to validate the result (`option instanceof String` vs check that every item in list is `instanceof FieldOption`) but obviously it&#39;s not working.\r\n\r\nWith the above model, a `String` is recognized in my test payload, but the array of `FieldOption` translated into an array of `LinkedHashMap`s\r\n\r\nWithout yet working on the case of `Map&lt;Integer,String&gt;`, I have tried to add the following polymorphic annotations to `Object option` field\r\n\r\n```java\r\n @JsonTypeInfo(use = JsonTypeInfo.Id.DEDUCTION)    \r\n    @JsonSubTypes({\r\n        @JsonSubTypes.Type(String.class),            \r\n        @JsonSubTypes.Type(FieldOption.class)     \r\n    })    \r\n```\r\n\r\nIt does not work with the following exception\r\n```\r\nCaused by: java.lang.IllegalStateException: Subtypes java.lang.String and java.lang.Object have the same signature and cannot be uniquely deduced.\r\n    at com.fasterxml.jackson.databind.jsontype.impl.AsDeductionTypeDeserializer.buildFingerprints(AsDeductionTypeDeserializer.java:89)\r\n    at com.fasterxml.jackson.databind.jsontype.impl.AsDeductionTypeDeserializer.&lt;init&gt;(AsDeductionTypeDeserializer.java:48)\r\n    at com.fasterxml.jackson.databind.jsontype.impl.StdTypeResolverBuilder.buildTypeDeserializer(StdTypeResolverBuilder.java:166)\r\n    at com.fasterxml.jackson.databind.deser.BasicDeserializerFactory.findPropertyTypeDeserializer(BasicDeserializerFactory.java:2022)\r\n    ... 89 more\r\n```\r\n\r\nI can&#39;t control the payload coming from the front end, which means I can&#39;t ask the FE developers to add a type indication in the payload, especially considering that the object could be a String.\r\n\r\n## Question\r\nHow can I define a polymorphic serialization that deserializes into either:\r\n\r\n- java.lang.String\r\n- java.util.Collection&lt;FieldOption&gt;\r\n- java.util.Map&lt;Integer,String&gt;\r\n\r\nOf course, I don&#39;t expect keys to be other than integers\r\n","title":"Mapping Typescript dynamic types into Java Object&#39;s subclasses","body":"<p>I have a Typescript model being sent as JSON request to my back end server. I can't change the model into a more engineered format, so I have to use what the client is going to send me.</p>\n<p>The Typescript interface uses the pipe to perform polymorphism as shown below:</p>\n<pre class=\"lang-js prettyprint-override\"><code>export interface Field {\n  align: 'center' | 'left'; // css property that does not work  disabled: boolean;\n  label: string;\n  readonly: boolean;\n  ref: string; // unique identifier  size: string; // css width  type: FIELD_TYPES;\n  value: string;\n  required: boolean;\n  visible: string; // 'true' | 'plugin:...'  \n  invisible: 'true' | 'false'; // never used  \n  optional: string; // just in 3 fields, never used \n  option:\n    | string // 'plugin:...'    \n    | { value: string; label: string; disable?: string; labelEng?: string, valueOfAnswerInInterestType?: string }[] //FieldOption\n    | { 1?: string; 2?: string; 3?: string; 4?: string; 5?: string; 6?: string };  //Map&lt;Integer,String&gt;\n}\n</code></pre>\n<p>As you can see, <code>option</code> can either be <code>String</code> or an array, or a plain POJO.</p>\n<p>What I need to achieve is to create a Jackson mapping and use Java's powerful <code>instanceof</code> operator to work on the deserialized class.</p>\n<p>Look at this target model:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\npublic class Field {    \n    private DetFieldAlignment align; // css property that does not work  disabled: boolean;    \n    ....\n    private String optional;//  just in 3 fields, never used    \n   \n    private Object option; // 'plugin:...' | [{ value: 1, label: 'my value' }, ...] | { &quot;1&quot;: &quot;Option one ...&quot;}\n}\n\n@Data\npublic class DetFieldOption {\n    private String value;\n    private String label;\n    private String disable;\n    ....\n}\n\n</code></pre>\n<p>I need to instruct Jackson about polymorphic serialization for the possible subclasses of <code>Object</code>, but I am having difficulty.\nI wrote JUnit tests to validate the result (<code>option instanceof String</code> vs check that every item in list is <code>instanceof FieldOption</code>) but obviously it's not working.</p>\n<p>With the above model, a <code>String</code> is recognized in my test payload, but the array of <code>FieldOption</code> translated into an array of <code>LinkedHashMap</code>s</p>\n<p>Without yet working on the case of <code>Map&lt;Integer,String&gt;</code>, I have tried to add the following polymorphic annotations to <code>Object option</code> field</p>\n<pre class=\"lang-java prettyprint-override\"><code> @JsonTypeInfo(use = JsonTypeInfo.Id.DEDUCTION)    \n    @JsonSubTypes({\n        @JsonSubTypes.Type(String.class),            \n        @JsonSubTypes.Type(FieldOption.class)     \n    })    \n</code></pre>\n<p>It does not work with the following exception</p>\n<pre><code>Caused by: java.lang.IllegalStateException: Subtypes java.lang.String and java.lang.Object have the same signature and cannot be uniquely deduced.\n    at com.fasterxml.jackson.databind.jsontype.impl.AsDeductionTypeDeserializer.buildFingerprints(AsDeductionTypeDeserializer.java:89)\n    at com.fasterxml.jackson.databind.jsontype.impl.AsDeductionTypeDeserializer.&lt;init&gt;(AsDeductionTypeDeserializer.java:48)\n    at com.fasterxml.jackson.databind.jsontype.impl.StdTypeResolverBuilder.buildTypeDeserializer(StdTypeResolverBuilder.java:166)\n    at com.fasterxml.jackson.databind.deser.BasicDeserializerFactory.findPropertyTypeDeserializer(BasicDeserializerFactory.java:2022)\n    ... 89 more\n</code></pre>\n<p>I can't control the payload coming from the front end, which means I can't ask the FE developers to add a type indication in the payload, especially considering that the object could be a String.</p>\n<h2>Question</h2>\n<p>How can I define a polymorphic serialization that deserializes into either:</p>\n<ul>\n<li>java.lang.String</li>\n<li>java.util.Collection</li>\n<li>java.util.Map&lt;Integer,String&gt;</li>\n</ul>\n<p>Of course, I don't expect keys to be other than integers</p>\n"},{"tags":["java","jupyter-notebook","jupyter"],"answers":[{"tags":[],"owner":{"account_id":14690937,"reputation":3398,"user_id":10609635,"display_name":"SpencerPark"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1567552211,"creation_date":1567552211,"answer_id":57779666,"question_id":57614916,"body_markdown":"The kernel should work out of the box with no configuration required.\r\n\r\nFirst check that the kernel is properly installed with `jupyter kernelspec list` which should show where the kernel is installed. If `java` is not in that list, rewind a bit in the installation instructions to see where the problem is.\r\n\r\n```bash\r\njupyter kernelspec list\r\nAvailable kernels:\r\n  java       ...\\jupyter\\kernels\\java\r\n  python3    ...\\jupyter\\kernels\\python3\r\n```\r\n\r\n&gt; Install instructions copied for reference:\r\n&gt;\r\n&gt; 1.  Download the release from the [releases tab](https://github.com/SpencerPark/IJava/releases). A prepackaged\r\n&gt; distribution will be in an artifact named `ijava-$version.zip`.\r\n&gt; \r\n&gt; 2.  Unzip it into a temporary location. It should have at least the `install.py` and `java` folder extracted in there.\r\n&gt; \r\n&gt; 3.  Run the installer with the same python command used to install jupyter. The installer is a python script and has the same options as\r\n&gt; `jupyter kernelspec install` but additionally supports configuring\r\n&gt; some of the kernel properties mentioned further below in the README.\r\n&gt; \r\n&gt;     ```bash\r\n&gt;     # Pass the -h option to see the help page\r\n&gt;     &gt; python3 install.py -h\r\n&gt; \r\n&gt;     # Otherwise a common install command is\r\n&gt;     &gt; python3 install.py --sys-prefix\r\n&gt;     ```\r\n&gt; \r\n&gt; 4.  Check that it installed with `jupyter kernelspec list` which should contain `java`.\r\n\r\nCheck that the `jupyter --paths` includes the installation location returned by running the installer in step 3. Particularly if installing to `--sys-prefix` and there are multiple python installations on the system, you might be installing under the `sys.prefix` of an installation different from the `jupyter` command in your PATH. \r\n\r\n\r\nTo address the specific sub questions about configuration:\r\n\r\n&gt; Do I need to create variables in the environment variable with the list of names in column &quot;Environment variable&quot; and values in column &quot;Default&quot; from the table &quot;list of options&quot; shown in the step &quot;Configuring&quot;.\r\n\r\nThe table outlines what you _could_ change if needed. If an environment variable is undefined, the default value from the table is used.\r\n\r\n&gt; What do I need to do for steps &quot;Simple glob syntax&quot; and &quot;Changing VM/compiler options&quot; in the step configuring.\r\n\r\nSome configuration options specified files or directories. To keep things easy to use these options allow specifying paths with that &quot;Simple glob syntax&quot; which is a subset of an actual glob implementation that was enough to get the job done. \r\n\r\nChanging VM and compiler options is again optional. \r\n\r\n&gt; Do I need to start the Jupyter Notebooks normally like we do for the Python or else do I need to use any special commands ?. Currently when I am opening Jupyter Notebook I am not observing the option to create a Java notebook\r\n\r\nYep, start with `jupyter notebook` as usual and if installed correctly, a `Java` option should appear when changing the kernel or creating a new notebook. ","title":"How do I configure the kernel while iJAVA to use jupyter notebook for java codes","body":"<p>The kernel should work out of the box with no configuration required.</p>\n\n<p>First check that the kernel is properly installed with <code>jupyter kernelspec list</code> which should show where the kernel is installed. If <code>java</code> is not in that list, rewind a bit in the installation instructions to see where the problem is.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>jupyter kernelspec list\nAvailable kernels:\n  java       ...\\jupyter\\kernels\\java\n  python3    ...\\jupyter\\kernels\\python3\n</code></pre>\n\n<blockquote>\n  <p>Install instructions copied for reference:</p>\n  \n  <ol>\n  <li><p>Download the release from the <a href=\"https://github.com/SpencerPark/IJava/releases\" rel=\"nofollow noreferrer\">releases tab</a>. A prepackaged\n  distribution will be in an artifact named <code>ijava-$version.zip</code>.</p></li>\n  <li><p>Unzip it into a temporary location. It should have at least the <code>install.py</code> and <code>java</code> folder extracted in there.</p></li>\n  <li><p>Run the installer with the same python command used to install jupyter. The installer is a python script and has the same options as\n  <code>jupyter kernelspec install</code> but additionally supports configuring\n  some of the kernel properties mentioned further below in the README.</p>\n  \n  <pre class=\"lang-sh prettyprint-override\"><code># Pass the -h option to see the help page\n&gt; python3 install.py -h\n\n# Otherwise a common install command is\n&gt; python3 install.py --sys-prefix\n</code></pre></li>\n  <li><p>Check that it installed with <code>jupyter kernelspec list</code> which should contain <code>java</code>.</p></li>\n  </ol>\n</blockquote>\n\n<p>Check that the <code>jupyter --paths</code> includes the installation location returned by running the installer in step 3. Particularly if installing to <code>--sys-prefix</code> and there are multiple python installations on the system, you might be installing under the <code>sys.prefix</code> of an installation different from the <code>jupyter</code> command in your PATH. </p>\n\n<p>To address the specific sub questions about configuration:</p>\n\n<blockquote>\n  <p>Do I need to create variables in the environment variable with the list of names in column \"Environment variable\" and values in column \"Default\" from the table \"list of options\" shown in the step \"Configuring\".</p>\n</blockquote>\n\n<p>The table outlines what you <em>could</em> change if needed. If an environment variable is undefined, the default value from the table is used.</p>\n\n<blockquote>\n  <p>What do I need to do for steps \"Simple glob syntax\" and \"Changing VM/compiler options\" in the step configuring.</p>\n</blockquote>\n\n<p>Some configuration options specified files or directories. To keep things easy to use these options allow specifying paths with that \"Simple glob syntax\" which is a subset of an actual glob implementation that was enough to get the job done. </p>\n\n<p>Changing VM and compiler options is again optional. </p>\n\n<blockquote>\n  <p>Do I need to start the Jupyter Notebooks normally like we do for the Python or else do I need to use any special commands ?. Currently when I am opening Jupyter Notebook I am not observing the option to create a Java notebook</p>\n</blockquote>\n\n<p>Yep, start with <code>jupyter notebook</code> as usual and if installed correctly, a <code>Java</code> option should appear when changing the kernel or creating a new notebook. </p>\n"},{"tags":[],"owner":{"account_id":14192160,"reputation":11,"user_id":10252438,"display_name":"per"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1594569539,"creation_date":1594569539,"answer_id":62863313,"question_id":57614916,"body_markdown":"For me the issue came between steps 2 and 3 in the installation instructions. Here is the solution: \r\n\r\nAfter completing step 2, open the command prompt and navigate to the temporary installation folder. For me it was Downloads\\ijava-1.3.0.\r\n\r\nRun the command jupyter kernelspec install java\r\n\r\nCheck for successful installation by running the command jupyter kernelspec list","title":"How do I configure the kernel while iJAVA to use jupyter notebook for java codes","body":"<p>For me the issue came between steps 2 and 3 in the installation instructions. Here is the solution:</p>\n<p>After completing step 2, open the command prompt and navigate to the temporary installation folder. For me it was Downloads\\ijava-1.3.0.</p>\n<p>Run the command jupyter kernelspec install java</p>\n<p>Check for successful installation by running the command jupyter kernelspec list</p>\n"}],"owner":{"account_id":11255765,"reputation":181,"user_id":8255626,"display_name":"ibrahim rupawala"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4220,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1677868940,"creation_date":1566497229,"question_id":57614916,"body_markdown":"I am trying to install iJAVA kernel to use Jupyter Notebooks for JAVA codes. I I have completed all the steps till &quot;Installing&quot; from the link https://github.com/SpencerPark/IJava. However I am not able to understand the steps from &quot;Configuring&quot;. \r\n\r\n1. Do I need to create variables in the environment variable with the list of names in column &quot;Environment variable&quot; and values in column &quot;Default&quot; from the table &quot;list of options&quot; shown in the step &quot;Configuring&quot;. \r\n2. What do I need to do for steps &quot;Simple glob syntax&quot; and &quot;Changing VM/compiler options&quot; in  the step configuring.\r\n3. Do I need to start the Jupyter Notebooks normally like we do for the Python or else do I need to use any special commands ?. Currently when I am opening Jupyter Notebook I am not observing the option to create a Java notebook\r\n\r\n\r\n\r\nI have already tried creating environment variable with the list of names in column &quot;Environment variable&quot; and values in column &quot;Default&quot; from the table &quot;list of options&quot; shown in the step &quot;Configuring&quot;. \r\n\r\nI am using:\r\n\r\n* Jupyter Notebook: Version 6.0.1\r\n* Python: 3\r\n* Java: jdk-12.0.2\r\n* Operating System: Windows 10\r\n* iJAVA: 1.3.0\r\n\r\nPlease notice that my end goal is to use jupyter notebook with Java Kernel as shown in the image below:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nCan anyone help with these steps ?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4ZLQt.png","title":"How do I configure the kernel while iJAVA to use jupyter notebook for java codes","body":"<p>I am trying to install iJAVA kernel to use Jupyter Notebooks for JAVA codes. I I have completed all the steps till \"Installing\" from the link <a href=\"https://github.com/SpencerPark/IJava\" rel=\"nofollow noreferrer\">https://github.com/SpencerPark/IJava</a>. However I am not able to understand the steps from \"Configuring\". </p>\n\n<ol>\n<li>Do I need to create variables in the environment variable with the list of names in column \"Environment variable\" and values in column \"Default\" from the table \"list of options\" shown in the step \"Configuring\". </li>\n<li>What do I need to do for steps \"Simple glob syntax\" and \"Changing VM/compiler options\" in  the step configuring.</li>\n<li>Do I need to start the Jupyter Notebooks normally like we do for the Python or else do I need to use any special commands ?. Currently when I am opening Jupyter Notebook I am not observing the option to create a Java notebook</li>\n</ol>\n\n<p>I have already tried creating environment variable with the list of names in column \"Environment variable\" and values in column \"Default\" from the table \"list of options\" shown in the step \"Configuring\". </p>\n\n<p>I am using:</p>\n\n<ul>\n<li>Jupyter Notebook: Version 6.0.1</li>\n<li>Python: 3</li>\n<li>Java: jdk-12.0.2</li>\n<li>Operating System: Windows 10</li>\n<li>iJAVA: 1.3.0</li>\n</ul>\n\n<p>Please notice that my end goal is to use jupyter notebook with Java Kernel as shown in the image below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/4ZLQt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4ZLQt.png\" alt=\"enter image description here\"></a></p>\n\n<p>Can anyone help with these steps ?</p>\n"},{"tags":["java","java-me","midp","httpconnection","java-wireless-toolkit"],"comments":[{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":1,"creation_date":1675520805,"post_id":75345526,"comment_id":132948778,"body_markdown":"Looks like a TLS version issue. What happens if called from postman?","body":"Looks like a TLS version issue. What happens if called from postman?"}],"owner":{"account_id":27702408,"reputation":1,"user_id":21146737,"display_name":"kelkeke"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677868746,"creation_date":1675518635,"question_id":75345526,"body_markdown":"I have written a J2ME application using WTK 2.5.2 with JDK 1.8.0_361 and JDK \r\n1.5.0_22.\r\n\r\nThe following code snippet is used to connect to an HTTP server and it works as expected.\r\n\r\n    try{\r\n        http = (HttpConnection)Connector.open(url);\r\n        http.setRequestMethod(HttpConnection.POST);\r\n\r\n        OutputStream os = http.openOutputStream();\r\n    \r\n        String params = &quot;XXXXXXXX&quot;;\r\n        os.write(params.getBytes());\r\n            \r\n        respCode = http.getResponseCode();\r\n    }catch(Exception e){\r\n        System.out.println(e);\r\n    }\r\n\r\nHowever, when trying to connect to an HTTPS site, it throws one of these two errors:\r\n\r\nGoogle:\r\n\r\n    java.io.IOException: Bad record type (21) or version (3.1)\r\n\t    at com.sun.midp.ssl.Record.rdRec(+284)\r\n\t    at com.sun.midp.ssl.Record.rdRec(+5)\r\n\t    at com.sun.midp.ssl.Handshake.getNextMsg(+17)\r\n\t    at com.sun.midp.ssl.Handshake.rcvSrvrHello(+5)\r\n\t    at com.sun.midp.ssl.Handshake.doHandShake(+29)\r\n\t    at com.sun.midp.ssl.SSLStreamConnection.&lt;init&gt;(+173)\r\n\t    at com.sun.midp.ssl.SSLStreamConnection.&lt;init&gt;(+12)\r\n\t    at com.sun.midp.io.j2me.https.Protocol.connect(+214)\r\n\t    at com.sun.midp.io.j2me.http.Protocol.streamConnect(+57)\r\n\t    at com.sun.midp.io.j2me.http.Protocol.startRequest(+12)\r\n\t    at com.sun.midp.io.j2me.http.Protocol.sendRequest(+38)\r\n\t    at com.sun.midp.io.j2me.http.Protocol.sendRequest(+6)\r\n\t    at com.sun.midp.io.j2me.http.Protocol.getResponseCode(+8)\r\n\t    at whatsapp.WhatsAppClass.startApp(+34)\r\n\t    at javax.microedition.midlet.MIDletProxy.startApp(+7)\r\n\t    at com.sun.midp.midlet.Scheduler.schedule(+270)\r\n\t    at com.sun.midp.main.Main.runLocalClass(+28)\r\n\t    at com.sun.midp.main.Main.main(+80)\r\n  \r\nWikipedia:\r\n\r\n    java.io.IOException: Alert (2,40)\r\n    \tat com.sun.midp.ssl.Record.rdRec(+228)\r\n\t    at com.sun.midp.ssl.Handshake.getNextMsg(+17)\r\n\t    at com.sun.midp.ssl.Handshake.rcvSrvrHello(+5)\r\n\t    at com.sun.midp.ssl.Handshake.doHandShake(+29)\r\n\t    at com.sun.midp.ssl.SSLStreamConnection.&lt;init&gt;(+173)\r\n\t    at com.sun.midp.ssl.SSLStreamConnection.&lt;init&gt;(+12)\r\n\t    at com.sun.midp.io.j2me.https.Protocol.connect(+214)\r\n\t    at com.sun.midp.io.j2me.http.Protocol.streamConnect(+57)\r\n\t    at com.sun.midp.io.j2me.http.Protocol.startRequest(+12)\r\n\t    at com.sun.midp.io.j2me.http.Protocol.sendRequest(+38)\r\n\t    at com.sun.midp.io.j2me.http.Protocol.sendRequest(+6)\r\n\t    at com.sun.midp.io.j2me.http.Protocol.getResponseCode(+8)\r\n\t    at whatsapp.WhatsAppClass.startApp(+34)\r\n\t    at javax.microedition.midlet.MIDletProxy.startApp(+7)\r\n\t    at com.sun.midp.midlet.Scheduler.schedule(+270)\r\n\t    at com.sun.midp.main.Main.runLocalClass(+28)\r\n\t    at com.sun.midp.main.Main.main(+80)\r\n\r\n\r\nI have tried using HttpsConnection and switching to another WTK and JRE version.\r\n\r\nExporting the application to device shows another error:\r\n\r\n    java.io.IOException: Alert (2, 70)\r\n\r\n\r\nThanks in advance.","title":"Connect J2ME to HTTPS Server","body":"<p>I have written a J2ME application using WTK 2.5.2 with JDK 1.8.0_361 and JDK\n1.5.0_22.</p>\n<p>The following code snippet is used to connect to an HTTP server and it works as expected.</p>\n<pre><code>try{\n    http = (HttpConnection)Connector.open(url);\n    http.setRequestMethod(HttpConnection.POST);\n\n    OutputStream os = http.openOutputStream();\n\n    String params = &quot;XXXXXXXX&quot;;\n    os.write(params.getBytes());\n        \n    respCode = http.getResponseCode();\n}catch(Exception e){\n    System.out.println(e);\n}\n</code></pre>\n<p>However, when trying to connect to an HTTPS site, it throws one of these two errors:</p>\n<p>Google:</p>\n<pre><code>java.io.IOException: Bad record type (21) or version (3.1)\n    at com.sun.midp.ssl.Record.rdRec(+284)\n    at com.sun.midp.ssl.Record.rdRec(+5)\n    at com.sun.midp.ssl.Handshake.getNextMsg(+17)\n    at com.sun.midp.ssl.Handshake.rcvSrvrHello(+5)\n    at com.sun.midp.ssl.Handshake.doHandShake(+29)\n    at com.sun.midp.ssl.SSLStreamConnection.&lt;init&gt;(+173)\n    at com.sun.midp.ssl.SSLStreamConnection.&lt;init&gt;(+12)\n    at com.sun.midp.io.j2me.https.Protocol.connect(+214)\n    at com.sun.midp.io.j2me.http.Protocol.streamConnect(+57)\n    at com.sun.midp.io.j2me.http.Protocol.startRequest(+12)\n    at com.sun.midp.io.j2me.http.Protocol.sendRequest(+38)\n    at com.sun.midp.io.j2me.http.Protocol.sendRequest(+6)\n    at com.sun.midp.io.j2me.http.Protocol.getResponseCode(+8)\n    at whatsapp.WhatsAppClass.startApp(+34)\n    at javax.microedition.midlet.MIDletProxy.startApp(+7)\n    at com.sun.midp.midlet.Scheduler.schedule(+270)\n    at com.sun.midp.main.Main.runLocalClass(+28)\n    at com.sun.midp.main.Main.main(+80)\n</code></pre>\n<p>Wikipedia:</p>\n<pre><code>java.io.IOException: Alert (2,40)\n    at com.sun.midp.ssl.Record.rdRec(+228)\n    at com.sun.midp.ssl.Handshake.getNextMsg(+17)\n    at com.sun.midp.ssl.Handshake.rcvSrvrHello(+5)\n    at com.sun.midp.ssl.Handshake.doHandShake(+29)\n    at com.sun.midp.ssl.SSLStreamConnection.&lt;init&gt;(+173)\n    at com.sun.midp.ssl.SSLStreamConnection.&lt;init&gt;(+12)\n    at com.sun.midp.io.j2me.https.Protocol.connect(+214)\n    at com.sun.midp.io.j2me.http.Protocol.streamConnect(+57)\n    at com.sun.midp.io.j2me.http.Protocol.startRequest(+12)\n    at com.sun.midp.io.j2me.http.Protocol.sendRequest(+38)\n    at com.sun.midp.io.j2me.http.Protocol.sendRequest(+6)\n    at com.sun.midp.io.j2me.http.Protocol.getResponseCode(+8)\n    at whatsapp.WhatsAppClass.startApp(+34)\n    at javax.microedition.midlet.MIDletProxy.startApp(+7)\n    at com.sun.midp.midlet.Scheduler.schedule(+270)\n    at com.sun.midp.main.Main.runLocalClass(+28)\n    at com.sun.midp.main.Main.main(+80)\n</code></pre>\n<p>I have tried using HttpsConnection and switching to another WTK and JRE version.</p>\n<p>Exporting the application to device shows another error:</p>\n<pre><code>java.io.IOException: Alert (2, 70)\n</code></pre>\n<p>Thanks in advance.</p>\n"},{"tags":["java","oauth-2.0","automated-tests","openid-connect","pkce"],"answers":[{"comments":[{"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"score":0,"creation_date":1654070898,"post_id":72448527,"comment_id":128001857,"body_markdown":"We have the credentials of a test user, which we want to pass programmatically. The question is how? Do we have to go via the HTML form and resolve all these redirects (which currently doesn&#39;t work ; we con&#39;t get the AUTHORIZATION_CODE) or is there an easier way?","body":"We have the credentials of a test user, which we want to pass programmatically. The question is how? Do we have to go via the HTML form and resolve all these redirects (which currently doesn&#39;t work ; we con&#39;t get the AUTHORIZATION_CODE) or is there an easier way?"},{"owner":{"account_id":24899824,"reputation":207,"user_id":18770645,"display_name":"Victor Navarro"},"score":1,"creation_date":1654075827,"post_id":72448527,"comment_id":128003540,"body_markdown":"You need to go to the HTML form and programmatically add the credentials and click on submit. If everything goes well you will be redirected and will the AUTH_CODE","body":"You need to go to the HTML form and programmatically add the credentials and click on submit. If everything goes well you will be redirected and will the AUTH_CODE"}],"tags":[],"owner":{"account_id":24899824,"reputation":207,"user_id":18770645,"display_name":"Victor Navarro"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654003067,"creation_date":1654003067,"answer_id":72448527,"question_id":72447453,"body_markdown":"You need to have users credentials. \r\n\r\nThe Authorize endpoints start the flow and redirect you to the login form, where your automated test will have to type a valid email/password of a registered user. Then, after a successful login, you&#39;ll get the AUTHORIZATION_CODE that can be exchanged server-side for a token that can call the userInfo endpoint. ","title":"Automated Tests: OIDC: Authorization Code Flow with PKCE: Login credentials","body":"<p>You need to have users credentials.</p>\n<p>The Authorize endpoints start the flow and redirect you to the login form, where your automated test will have to type a valid email/password of a registered user. Then, after a successful login, you'll get the AUTHORIZATION_CODE that can be exchanged server-side for a token that can call the userInfo endpoint.</p>\n"},{"comments":[{"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"score":0,"creation_date":1654070270,"post_id":72452890,"comment_id":128001643,"body_markdown":"We are writing API Tests, but for the End-to-End API Tests (using Java/ Cucumber) we need &quot;real&quot; access tokens, not moked ones.","body":"We are writing API Tests, but for the End-to-End API Tests (using Java/ Cucumber) we need &quot;real&quot; access tokens, not moked ones."},{"owner":{"account_id":12368896,"reputation":24924,"user_id":9019885,"display_name":"Gary Archer"},"score":0,"creation_date":1654162518,"post_id":72452890,"comment_id":128027458,"body_markdown":"I clarified my answer above. If you want to run a code flow for every backend test you could write Java code using an HTTP client, similar to this [bash script](https://github.com/gary-archer/oauth.tokenhandler.docker/blob/master/test/runHttpWorkflow.sh#L150) of mine. The client will have options to follow redirects, similar to curl&#39;s -L option, but actions such as posting passwords and auto form posts are tricky and require understanding of the vendor&#39;s implementation. Another option might be to use the older password grant to get user level tokens for test accounts.","body":"I clarified my answer above. If you want to run a code flow for every backend test you could write Java code using an HTTP client, similar to this <a href=\"https://github.com/gary-archer/oauth.tokenhandler.docker/blob/master/test/runHttpWorkflow.sh#L150\" rel=\"nofollow noreferrer\">bash script</a> of mine. The client will have options to follow redirects, similar to curl&#39;s -L option, but actions such as posting passwords and auto form posts are tricky and require understanding of the vendor&#39;s implementation. Another option might be to use the older password grant to get user level tokens for test accounts."}],"tags":[],"owner":{"account_id":12368896,"reputation":24924,"user_id":9019885,"display_name":"Gary Archer"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654162299,"creation_date":1654023471,"answer_id":72452890,"question_id":72447453,"body_markdown":"OpenID Connect authentication workflows can involve multiple redirects, automated form posts and entry of multiple factors. Therefore only the start and end of the redirect are standardized HTTP requests.\r\n\r\n**UI TESTS**\r\n\r\nIt is common to use tools such as [Selenium with Java](https://www.browserstack.com/guide/selenium-with-java-for-automated-test) to automate logins for test users and get credentials needed for API calls. This just involves actions such as button clicks and populating text controls. If 2FA is involved then this would typically be disabled for an automated test stage of your pipeline.\r\n\r\n**API TESTS**\r\n\r\nIf instead your requirement is to get access tokens for test user accounts and call APIs, then one option when testing APIs is to mock the IdP infrastructure for an automated test stage of the pipeline, where the mock implementation achieves identical technical results.\r\n\r\nThis technique involves using a JWT library to issue mock access tokens that must be identical to the real ones, with the same JWT header values, scopes and claims. The only difference is that there is a different JSON Web Signature. \r\n\r\nFor an example, see [this code of mine](https://github.com/gary-archer/oauth.apisample.javaspringboot/blob/master/src/test/java/com/mycompany/sample/tests/IntegrationTests.java), which uses Wiremock to simulate the IdP and return a JSON Web Keyset for testing. The API under test will use this so that its signature verification still works.\r\n\r\n**SUMMARY**\r\n\r\nSo the answer depends on where you want to focus your test efforts. The first option is useful for proving that end to end apps work. The second option can be useful for testing each API in isolation.","title":"Automated Tests: OIDC: Authorization Code Flow with PKCE: Login credentials","body":"<p>OpenID Connect authentication workflows can involve multiple redirects, automated form posts and entry of multiple factors. Therefore only the start and end of the redirect are standardized HTTP requests.</p>\n<p><strong>UI TESTS</strong></p>\n<p>It is common to use tools such as <a href=\"https://www.browserstack.com/guide/selenium-with-java-for-automated-test\" rel=\"nofollow noreferrer\">Selenium with Java</a> to automate logins for test users and get credentials needed for API calls. This just involves actions such as button clicks and populating text controls. If 2FA is involved then this would typically be disabled for an automated test stage of your pipeline.</p>\n<p><strong>API TESTS</strong></p>\n<p>If instead your requirement is to get access tokens for test user accounts and call APIs, then one option when testing APIs is to mock the IdP infrastructure for an automated test stage of the pipeline, where the mock implementation achieves identical technical results.</p>\n<p>This technique involves using a JWT library to issue mock access tokens that must be identical to the real ones, with the same JWT header values, scopes and claims. The only difference is that there is a different JSON Web Signature.</p>\n<p>For an example, see <a href=\"https://github.com/gary-archer/oauth.apisample.javaspringboot/blob/master/src/test/java/com/mycompany/sample/tests/IntegrationTests.java\" rel=\"nofollow noreferrer\">this code of mine</a>, which uses Wiremock to simulate the IdP and return a JSON Web Keyset for testing. The API under test will use this so that its signature verification still works.</p>\n<p><strong>SUMMARY</strong></p>\n<p>So the answer depends on where you want to focus your test efforts. The first option is useful for proving that end to end apps work. The second option can be useful for testing each API in isolation.</p>\n"}],"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1624,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1677868733,"creation_date":1653998590,"question_id":72447453,"body_markdown":"What is the best way to login in Java based automated End-to-End API tests using the OAuth2 / OpenID Connect Authorization Code Flow with PKCE?\r\n\r\nOur company uses its custom IdP server, but we tried to follow the call documented at [OAuth0][1] assuming the calls and responses are standardised. (Is this assumption correct?) \r\n\r\nThe &quot;GET code&quot; call (Authorization) looks like this:\r\n\r\n    https://&lt;company-idp-server-auth-url&gt;?response_type=code&amp;code_challenge=&lt;Code Challenge&gt;&amp;code_challenge_method=S256&amp;client_id=&lt;CLIENT ID&gt;&amp;redirect_uri=&lt;URL-encoded REDIRECT URI&gt;&amp;scope=openid%20customer&amp;state=&lt;SOME STATE&gt;&amp;lang=en\r\n\r\nAccording to the mentioned documentation we would expect a response like:\r\n\r\n    HTTP/1.1 302 Found\r\n    Location: YOUR_CALLBACK_URL?code=AUTHORIZATION_CODE&amp;state=xyzABC123\r\n\r\nFrom the response we could then extract the AUTHORIZATION_CODE value required by the next call (Token).\r\n\r\nBefore we get this response, however, we get redirected first to the &quot;check_login&quot; page and then to the &quot;login&quot; page, which returns an HTML form for login.\r\n\r\nWe tried to reverse engineer the required calls to send this form, but after a cryptic redirect we get further redirected to the login page again. We never get a response containing the AUTHORIZATION_CODE.\r\n\r\nIs this really the only way to pass the credentials or is there an easier way to bypass this HTML form? Or is there even a good Java library for this task?\r\n\r\n  [1]: https://auth0.com/docs/get-started/authentication-and-authorization-flow/call-your-api-using-the-authorization-code-flow-with-pkce","title":"Automated Tests: OIDC: Authorization Code Flow with PKCE: Login credentials","body":"<p>What is the best way to login in Java based automated End-to-End API tests using the OAuth2 / OpenID Connect Authorization Code Flow with PKCE?</p>\n<p>Our company uses its custom IdP server, but we tried to follow the call documented at <a href=\"https://auth0.com/docs/get-started/authentication-and-authorization-flow/call-your-api-using-the-authorization-code-flow-with-pkce\" rel=\"nofollow noreferrer\">OAuth0</a> assuming the calls and responses are standardised. (Is this assumption correct?)</p>\n<p>The &quot;GET code&quot; call (Authorization) looks like this:</p>\n<pre><code>https://&lt;company-idp-server-auth-url&gt;?response_type=code&amp;code_challenge=&lt;Code Challenge&gt;&amp;code_challenge_method=S256&amp;client_id=&lt;CLIENT ID&gt;&amp;redirect_uri=&lt;URL-encoded REDIRECT URI&gt;&amp;scope=openid%20customer&amp;state=&lt;SOME STATE&gt;&amp;lang=en\n</code></pre>\n<p>According to the mentioned documentation we would expect a response like:</p>\n<pre><code>HTTP/1.1 302 Found\nLocation: YOUR_CALLBACK_URL?code=AUTHORIZATION_CODE&amp;state=xyzABC123\n</code></pre>\n<p>From the response we could then extract the AUTHORIZATION_CODE value required by the next call (Token).</p>\n<p>Before we get this response, however, we get redirected first to the &quot;check_login&quot; page and then to the &quot;login&quot; page, which returns an HTML form for login.</p>\n<p>We tried to reverse engineer the required calls to send this form, but after a cryptic redirect we get further redirected to the login page again. We never get a response containing the AUTHORIZATION_CODE.</p>\n<p>Is this really the only way to pass the credentials or is there an easier way to bypass this HTML form? Or is there even a good Java library for this task?</p>\n"},{"tags":["java","netbeans"],"comments":[{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1578973646,"post_id":59606822,"comment_id":105604547,"body_markdown":"[1] Is the `nbjavac` plugin definitely activated? To check, go to **Tools &gt; Plugins &gt; Installed**, search for `nbjavac`, and then verify that the **Active** column for the displayed entry for _&quot;The nb-javac Java editing support library&quot;_ (under the _Java_ Category) shows a green circle with a white check mark. [2] If it not activated then try to activate it. [3] Finally, restart NetBeans, and then update your question to show the content of the NetBeans log (**View &gt; IDE Log**) immediately after the restart.","body":"[1] Is the <code>nbjavac</code> plugin definitely activated? To check, go to <b>Tools &gt; Plugins &gt; Installed</b>, search for <code>nbjavac</code>, and then verify that the <b>Active</b> column for the displayed entry for <i>&quot;The nb-javac Java editing support library&quot;</i> (under the <i>Java</i> Category) shows a green circle with a white check mark. [2] If it not activated then try to activate it. [3] Finally, restart NetBeans, and then update your question to show the content of the NetBeans log (<b>View &gt; IDE Log</b>) immediately after the restart."}],"answers":[{"comments":[{"owner":{"account_id":1450884,"reputation":156,"user_id":1490405,"display_name":"dBlaze"},"score":0,"creation_date":1585207804,"post_id":60403991,"comment_id":107682056,"body_markdown":"If you&#39;re on 11.1 like me, you will find that the above link does not have a version for NB11.1.\nDownloading and installing the version for 11.2 will work. Thanks Mehdi Fracsco","body":"If you&#39;re on 11.1 like me, you will find that the above link does not have a version for NB11.1. Downloading and installing the version for 11.2 will work. Thanks Mehdi Fracsco"},{"owner":{"account_id":10066453,"reputation":478,"user_id":7530263,"display_name":"Mehdi Fracso"},"score":0,"creation_date":1585488713,"post_id":60403991,"comment_id":107770540,"body_markdown":"@dBlaze my pleasure, I am also on version 11.2 but as I can see, netbeans isn&#39;t producing new plugins versions for the new IDE versions, like I was trying to download Struts plugin for netbeans 11.2, all the plugins that I found were meant for earlier versions ( &lt;= V7), still that plugin for 7th version worked on my 11th version.","body":"@dBlaze my pleasure, I am also on version 11.2 but as I can see, netbeans isn&#39;t producing new plugins versions for the new IDE versions, like I was trying to download Struts plugin for netbeans 11.2, all the plugins that I found were meant for earlier versions ( &lt;= V7), still that plugin for 7th version worked on my 11th version."}],"tags":[],"owner":{"account_id":10066453,"reputation":478,"user_id":7530263,"display_name":"Mehdi Fracso"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1584183849,"creation_date":1582668988,"answer_id":60403991,"question_id":59606822,"body_markdown":"In my case, the error occurred when I was trying to install Hibernate library and activating it in NetBeans, what I did was:\r\n\r\n1. Go to: http://plugins.netbeans.org/plugin/73454/nb-javac-library and download the plugin corresponding to your NetBeans version\r\n\r\n2. Unzip the archive then go to NetBeans: Tools -&gt; Plugins -&gt; Downloaded (Tab) -&gt; Add plugins then select the .nbm files you&#39;ve just unzipped\r\n\r\n3. Uninstall the plugin you were trying to install, restart NetBeans then reinstall the plugin you&#39;re trying to install\r\n","title":"Not all requested modules can be enabled - org-netbeans-modules-nbjavac.jar","body":"<p>In my case, the error occurred when I was trying to install Hibernate library and activating it in NetBeans, what I did was:</p>\n\n<ol>\n<li><p>Go to: <a href=\"http://plugins.netbeans.org/plugin/73454/nb-javac-library\" rel=\"nofollow noreferrer\">http://plugins.netbeans.org/plugin/73454/nb-javac-library</a> and download the plugin corresponding to your NetBeans version</p></li>\n<li><p>Unzip the archive then go to NetBeans: Tools -> Plugins -> Downloaded (Tab) -> Add plugins then select the .nbm files you've just unzipped</p></li>\n<li><p>Uninstall the plugin you were trying to install, restart NetBeans then reinstall the plugin you're trying to install</p></li>\n</ol>\n"},{"comments":[{"owner":{"account_id":9338914,"reputation":315,"user_id":6932334,"display_name":"BIDS Salvaterra"},"score":2,"creation_date":1606074763,"post_id":60830514,"comment_id":114843148,"body_markdown":"this one worked for me on apache 12.0 , though it didnt ask me to reinstall the plugin, i had to do it manually, but thanks","body":"this one worked for me on apache 12.0 , though it didnt ask me to reinstall the plugin, i had to do it manually, but thanks"},{"owner":{"account_id":4694437,"reputation":101,"user_id":4438165,"accept_rate":0,"display_name":"TimGallagher"},"score":1,"creation_date":1611077186,"post_id":60830514,"comment_id":116332277,"body_markdown":"This worked for me on 12.2, and I had to install manually.  But this time it say v2.0 for the plugin instead of v1.0 the first time it installed.","body":"This worked for me on 12.2, and I had to install manually.  But this time it say v2.0 for the plugin instead of v1.0 the first time it installed."},{"owner":{"account_id":236549,"reputation":2564,"user_id":504112,"accept_rate":55,"display_name":"gumuruh"},"score":0,"creation_date":1629085137,"post_id":60830514,"comment_id":121583976,"body_markdown":"Why didn&#39;t that plugin installed earlier automatically (solved) when first time user install the Netbean itself ? Does it big or something?","body":"Why didn&#39;t that plugin installed earlier automatically (solved) when first time user install the Netbean itself ? Does it big or something?"}],"tags":[],"owner":{"account_id":8324917,"reputation":556,"user_id":6255270,"display_name":"Bence Szebedy"},"comment_count":3,"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1613141812,"creation_date":1585050716,"answer_id":60830514,"question_id":59606822,"body_markdown":"I solved the exact same problem by **reinstalling the nb-javac plugin** (2.0) in my NetBeans (11.3)\r\n\r\n 1. Open NetBeans\r\n 2. Go to **Tools &gt; Plugins &gt; Installed**\r\n 3. Enable checkbox **&quot;Show details&quot;**\r\n 4. Search for javac to find the line **&quot;The nb-javac Java editing support library&quot;**\r\n 5. Select and uninstall\r\n 6. Restart NetBeans\r\n 7. NetBeans will recommend installing nb-javac in an info box. Just click on the link and follow instructions\r\n\r\n**UPDATE for NetBeans 12.1 &amp; NetBeans 12.2**\r\nThis solves the error message &quot;Cannot enable the nb-javac plugin&quot;","title":"Not all requested modules can be enabled - org-netbeans-modules-nbjavac.jar","body":"<p>I solved the exact same problem by <strong>reinstalling the nb-javac plugin</strong> (2.0) in my NetBeans (11.3)</p>\n<ol>\n<li>Open NetBeans</li>\n<li>Go to <strong>Tools &gt; Plugins &gt; Installed</strong></li>\n<li>Enable checkbox <strong>&quot;Show details&quot;</strong></li>\n<li>Search for javac to find the line <strong>&quot;The nb-javac Java editing support library&quot;</strong></li>\n<li>Select and uninstall</li>\n<li>Restart NetBeans</li>\n<li>NetBeans will recommend installing nb-javac in an info box. Just click on the link and follow instructions</li>\n</ol>\n<p><strong>UPDATE for NetBeans 12.1 &amp; NetBeans 12.2</strong>\nThis solves the error message &quot;Cannot enable the nb-javac plugin&quot;</p>\n"},{"tags":[],"owner":{"account_id":19085459,"reputation":31,"user_id":13936826,"display_name":"Able Software"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1594837977,"creation_date":1594829024,"answer_id":62919069,"question_id":59606822,"body_markdown":"so i solved same issue by first going to `C:\\Users...\\AppData\\Roaming\\NetBeans\\11.2\\modules` folder and deleted `org-netbeans-modules-nbjavac.jar`. \r\n\r\nAfter, I restarted Netbeans IDE. Go to:\r\n&gt; Windows -&gt; IDE Tools -&gt; Notifications\r\n\r\n to open the Notification Window and click the ***&quot;It is recommended to install nb-javac Library to improve Java editing experience and enable compile on save&quot;*** to reinstall the `nb-javac` library. \r\n\r\nRestarted after and worked for me.","title":"Not all requested modules can be enabled - org-netbeans-modules-nbjavac.jar","body":"<p>so i solved same issue by first going to <code>C:\\Users...\\AppData\\Roaming\\NetBeans\\11.2\\modules</code> folder and deleted <code>org-netbeans-modules-nbjavac.jar</code>.</p>\n<p>After, I restarted Netbeans IDE. Go to:</p>\n<blockquote>\n<p>Windows -&gt; IDE Tools -&gt; Notifications</p>\n</blockquote>\n<p>to open the Notification Window and click the <em><strong>&quot;It is recommended to install nb-javac Library to improve Java editing experience and enable compile on save&quot;</strong></em> to reinstall the <code>nb-javac</code> library.</p>\n<p>Restarted after and worked for me.</p>\n"},{"comments":[{"owner":{"account_id":11858192,"reputation":633,"user_id":12468539,"display_name":"ChaddRobertson"},"score":0,"creation_date":1632640460,"post_id":64195907,"comment_id":122543709,"body_markdown":"Please see https://stackoverflow.com/help/how-to-answer","body":"Please see <a href=\"https://stackoverflow.com/help/how-to-answer\">stackoverflow.com/help/how-to-answer</a>"}],"tags":[],"owner":{"account_id":18206750,"reputation":3,"user_id":13250039,"display_name":"Ashutosh Purohit"},"comment_count":1,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1649332238,"creation_date":1601821904,"answer_id":64195907,"question_id":59606822,"body_markdown":"In my case IDE 12.1\r\nI re-activated nb-Javac JAVA editing support library.\r\nAnd that NOT from File&gt;New Projects, \r\ninstead, from home page Activate Features.\r\nAnd then i clicked IDE log.\r\n.....it worked.......","title":"Not all requested modules can be enabled - org-netbeans-modules-nbjavac.jar","body":"<p>In my case IDE 12.1\nI re-activated nb-Javac JAVA editing support library.\nAnd that NOT from File&gt;New Projects,\ninstead, from home page Activate Features.\nAnd then i clicked IDE log.\n.....it worked.......</p>\n"},{"tags":[],"owner":{"account_id":16104,"reputation":2382,"user_id":34768,"accept_rate":56,"display_name":"iberck"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677867810,"creation_date":1677866465,"answer_id":75630441,"question_id":59606822,"body_markdown":"In my case (netbeans 11.0) the error occurs because the Plugin Portal repository does not work, what I did was:\r\n\r\nGoto to Tools -&gt; Plugins -&gt; Settings\r\n\r\nEdit the link of Plugin Portal to the correct URL as per your Netbeans installation from the following link:\r\n\r\nhttps://cwiki.apache.org/confluence/display/NETBEANS/Where+to+download+plugins+for+NetBeans+10.0+and+earlier\r\n\r\nFor Netbeans 11.0 it is: http://plugins.archive.librebeans.org/catalogue/11.0/catalog.xml\r\n\r\n1. Go to Tools &gt; Plugins &gt; Available Plugins and press check for newest\r\n2. Search for javac to find the line &quot;nb-javac Library&quot;\r\n3. Select and install\r\n4. Restart NetBeans\r\n","title":"Not all requested modules can be enabled - org-netbeans-modules-nbjavac.jar","body":"<p>In my case (netbeans 11.0) the error occurs because the Plugin Portal repository does not work, what I did was:</p>\n<p>Goto to Tools -&gt; Plugins -&gt; Settings</p>\n<p>Edit the link of Plugin Portal to the correct URL as per your Netbeans installation from the following link:</p>\n<p><a href=\"https://cwiki.apache.org/confluence/display/NETBEANS/Where+to+download+plugins+for+NetBeans+10.0+and+earlier\" rel=\"nofollow noreferrer\">https://cwiki.apache.org/confluence/display/NETBEANS/Where+to+download+plugins+for+NetBeans+10.0+and+earlier</a></p>\n<p>For Netbeans 11.0 it is: <a href=\"http://plugins.archive.librebeans.org/catalogue/11.0/catalog.xml\" rel=\"nofollow noreferrer\">http://plugins.archive.librebeans.org/catalogue/11.0/catalog.xml</a></p>\n<ol>\n<li>Go to Tools &gt; Plugins &gt; Available Plugins and press check for newest</li>\n<li>Search for javac to find the line &quot;nb-javac Library&quot;</li>\n<li>Select and install</li>\n<li>Restart NetBeans</li>\n</ol>\n"}],"owner":{"account_id":1542966,"reputation":3283,"user_id":1437164,"accept_rate":82,"display_name":"PolGraphic"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49220,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"answer_count":5,"score":15,"last_activity_date":1677867810,"creation_date":1578286109,"question_id":59606822,"body_markdown":"While working with NetBeans I have an error:\r\n\r\n&gt; Not all requested modules can be enabled: [StandardModule:org.netbeans.modules.nbjavac jarFile: C:\\Users\\...\\AppData\\Roaming\\NetBeans\\11.2\\modules\\org-netbeans-modules-nbjavac.jar]\r\n\r\nI believe it&#39;s connected to my problem with NetBeans hints for Java not being showed.\r\n\r\nThe file exists in `C:\\Users\\...\\AppData\\Roaming\\NetBeans\\11.2\\modules\\org-netbeans-modules-nbjavac.jar`. \r\n\r\nIt&#39;s the only module noted as missed.\r\n\r\nI am aware of popular problem will multiple modules noted as not possible to be enabled due to wrong JDK path. My path to JDK seems to be about right:\r\n\r\n    netbeans_jdkhome=&quot;D:\\Program Files\\Java\\jdk1.8.0_231&quot;\r\n\r\nIf I comment it out (as suggested in some solutions), than hints are working but project does not start because of multiple errors on TomEE (which works perfectly fine with the JDK uncommented):\r\n\r\n&gt; WARNING: An illegal reflective access operation has occurred\r\nWARNING: Illegal reflective access by org.apache.openejb.loader.TomcatClassPath$3 (file:/D:/Programming/apache-tomee-webprofile-7.0.2/lib/openejb-loader-7.0.2.jar) to method java.net.URLClassLoader.addURL(java.net.URL)\r\nWARNING: Please consider reporting this to the maintainers of org.apache.openejb.loader.TomcatClassPath$3\r\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\r\nWARNING: All illegal access operations will be denied in a future release\r\n06-Jan-2020 06:24:23.213 INFO [main] org.apache.openejb.util.OptionsLog.info Using &#39;openejb.jdbc.datasource-creator=org.apache.tomee.jdbc.TomEEDataSourceCreator&#39;\r\n06-Jan-2020 06:24:23.230 SEVERE [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke Catalina.start\r\n org.apache.catalina.LifecycleException: Failed to initialize component [StandardServer[8005]]\r\n\tat org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:112)\r\n\tat org.apache.catalina.startup.Catalina.load(Catalina.java:606)\r\n\tat org.apache.catalina.startup.Catalina.load(Catalina.java:629)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:567)\r\n\tat org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:311)\r\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:494)\r\n\r\n&gt; 06-Jan-2020 06:24:23.231 WARNING [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke Calling stop() on failed component [StandardServer[8005]] to trigger clean-up did not complete.\r\n org.apache.catalina.LifecycleException: Failed to stop component [StandardServer[8005]]\r\n\tat org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:238)\r\n\tat org.apache.catalina.util.LifecycleBase.destroy(LifecycleBase.java:264)\r\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:659)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:567)\r\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:355)\r\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:495)\r\nCaused by: org.apache.catalina.LifecycleException: An invalid Lifecycle transition was attempted ([before_stop]) for component [StandardService[Catalina]] in state [INITIALIZED]\r\n\tat org.apache.catalina.util.LifecycleBase.invalidTransition(LifecycleBase.java:402)\r\n\tat org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:213)\r\n\tat org.apache.catalina.core.StandardServer.stopInternal(StandardServer.java:812)\r\n\tat org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:226)\r\n\t... 8 more\r\n\r\n\r\nIs there a way to use my JDK and use hints?\r\n","title":"Not all requested modules can be enabled - org-netbeans-modules-nbjavac.jar","body":"<p>While working with NetBeans I have an error:</p>\n\n<blockquote>\n  <p>Not all requested modules can be enabled: [StandardModule:org.netbeans.modules.nbjavac jarFile: C:\\Users...\\AppData\\Roaming\\NetBeans\\11.2\\modules\\org-netbeans-modules-nbjavac.jar]</p>\n</blockquote>\n\n<p>I believe it's connected to my problem with NetBeans hints for Java not being showed.</p>\n\n<p>The file exists in <code>C:\\Users\\...\\AppData\\Roaming\\NetBeans\\11.2\\modules\\org-netbeans-modules-nbjavac.jar</code>. </p>\n\n<p>It's the only module noted as missed.</p>\n\n<p>I am aware of popular problem will multiple modules noted as not possible to be enabled due to wrong JDK path. My path to JDK seems to be about right:</p>\n\n<pre><code>netbeans_jdkhome=\"D:\\Program Files\\Java\\jdk1.8.0_231\"\n</code></pre>\n\n<p>If I comment it out (as suggested in some solutions), than hints are working but project does not start because of multiple errors on TomEE (which works perfectly fine with the JDK uncommented):</p>\n\n<blockquote>\n  <p>WARNING: An illegal reflective access operation has occurred\n  WARNING: Illegal reflective access by org.apache.openejb.loader.TomcatClassPath$3 (file:/D:/Programming/apache-tomee-webprofile-7.0.2/lib/openejb-loader-7.0.2.jar) to method java.net.URLClassLoader.addURL(java.net.URL)\n  WARNING: Please consider reporting this to the maintainers of org.apache.openejb.loader.TomcatClassPath$3\n  WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\n  WARNING: All illegal access operations will be denied in a future release\n  06-Jan-2020 06:24:23.213 INFO [main] org.apache.openejb.util.OptionsLog.info Using 'openejb.jdbc.datasource-creator=org.apache.tomee.jdbc.TomEEDataSourceCreator'\n  06-Jan-2020 06:24:23.230 SEVERE [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke Catalina.start\n   org.apache.catalina.LifecycleException: Failed to initialize component [StandardServer[8005]]\n      at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:112)\n      at org.apache.catalina.startup.Catalina.load(Catalina.java:606)\n      at org.apache.catalina.startup.Catalina.load(Catalina.java:629)\n      at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n      at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n      at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n      at java.base/java.lang.reflect.Method.invoke(Method.java:567)\n      at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:311)\n      at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:494)</p>\n  \n  <p>06-Jan-2020 06:24:23.231 WARNING [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke Calling stop() on failed component [StandardServer[8005]] to trigger clean-up did not complete.\n   org.apache.catalina.LifecycleException: Failed to stop component [StandardServer[8005]]\n      at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:238)\n      at org.apache.catalina.util.LifecycleBase.destroy(LifecycleBase.java:264)\n      at org.apache.catalina.startup.Catalina.start(Catalina.java:659)\n      at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n      at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n      at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n      at java.base/java.lang.reflect.Method.invoke(Method.java:567)\n      at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:355)\n      at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:495)\n  Caused by: org.apache.catalina.LifecycleException: An invalid Lifecycle transition was attempted ([before_stop]) for component [StandardService[Catalina]] in state [INITIALIZED]\n      at org.apache.catalina.util.LifecycleBase.invalidTransition(LifecycleBase.java:402)\n      at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:213)\n      at org.apache.catalina.core.StandardServer.stopInternal(StandardServer.java:812)\n      at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:226)\n      ... 8 more</p>\n</blockquote>\n\n<p>Is there a way to use my JDK and use hints?</p>\n"},{"tags":["java","reflection","inner-classes"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1677861918,"post_id":75629696,"comment_id":133427029,"body_markdown":"Those generated classes are basically an implementation detail of the inner class.  Personally I don&#39;t worry about those classes, except occasionally when they appear during debugging.  I&#39;m kind of curious myself about your question, but I also suspect that appearing and disappearing constructor parameters will depend on the version of Java used and how that compiler decides to optimize the generated classes.  The details could change at any time.","body":"Those generated classes are basically an implementation detail of the inner class.  Personally I don&#39;t worry about those classes, except occasionally when they appear during debugging.  I&#39;m kind of curious myself about your question, but I also suspect that appearing and disappearing constructor parameters will depend on the version of Java used and how that compiler decides to optimize the generated classes.  The details could change at any time."}],"answers":[{"comments":[{"owner":{"account_id":27842488,"reputation":15,"user_id":21258697,"display_name":"JavaStudent001"},"score":0,"creation_date":1677869596,"post_id":75630470,"comment_id":133429083,"body_markdown":"Thank you for answer! I&#39;ve just edited my post and added the reflection code. In this question I had the problem with the javap tool. My reflection shows properly. javap shows param constructor com.example.TalkingClock$1TimePrinter(com.example.TalkingClock); even without any variables, but in the case mentioned earlier the constructor of local inner-class (params) is empty: com.example.TalkingClock$1TimePrinter();, but my reflect code shows properly.","body":"Thank you for answer! I&#39;ve just edited my post and added the reflection code. In this question I had the problem with the javap tool. My reflection shows properly. javap shows param constructor com.example.TalkingClock$1TimePrinter(com.example.TalkingClo&zwnj;&#8203;ck); even without any variables, but in the case mentioned earlier the constructor of local inner-class (params) is empty: com.example.TalkingClock$1TimePrinter();, but my reflect code shows properly."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1677896734,"post_id":75630470,"comment_id":133433580,"body_markdown":"Reflection shows what things are like &#39;class/JVM&#39; side, and in your java code it&#39;s &#39;java side&#39;. With inner classes, these 2 things just aren&#39;t the same. Case in point, non-static inner classes have a `this$0` param class/JVM side, and they don&#39;t java side.","body":"Reflection shows what things are like &#39;class/JVM&#39; side, and in your java code it&#39;s &#39;java side&#39;. With inner classes, these 2 things just aren&#39;t the same. Case in point, non-static inner classes have a <code>this$0</code> param class/JVM side, and they don&#39;t java side."},{"owner":{"account_id":27842488,"reputation":15,"user_id":21258697,"display_name":"JavaStudent001"},"score":0,"creation_date":1677925484,"post_id":75630470,"comment_id":133436251,"body_markdown":"Tank you Sir :).","body":"Tank you Sir :)."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677866650,"creation_date":1677866650,"answer_id":75630470,"question_id":75629696,"body_markdown":"&gt; Okay extra val$interval is properly added but where is extra param com.example.TalkingClock in the constructor for `TalkingClock.this.beep`?\r\n\r\nIt isn&#39;t there because that wouldn&#39;t make any sense. Imagine you wrote `TalkingClock.this.beep.toLowerCase()` (and beep was a string) - would you expect a field for that too?\r\n\r\nThe thing you are referring to that needs to be available to the inner class is just `TalkingClock.this`, __that is all__ - once you have that, the code can simply invoke the field lookup for `beep` on this. Yes, it&#39;s private, but that&#39;s why the compiler actually made it package private (or, if you&#39;re doing this on JDK17, why there&#39;s a nestmates section). Access control and making sure all the things the inner class needs are available to it are mostly separate concerns. `javac` needs to do some fancy footwork to accomodate the fact that at the class file level inner class do not exist - for both of those concepts.\r\n\r\n`this$0` __is__ `TalkingClock.this`. Thus, `TalkingClock.this.beep` in java code turns, at the class file level, into:\r\n\r\nload up the `this$0` variable. Then fetch the `beep` field from the object that variable is pointing at.\r\n\r\n&gt; On the other hand I have written a reflection code.\r\n\r\nYou didn&#39;t paste this code so there&#39;s not much to say here.\r\n","title":"Java Inner Classes (reflection, javap -private) JDK 17","body":"<blockquote>\n<p>Okay extra val$interval is properly added but where is extra param com.example.TalkingClock in the constructor for <code>TalkingClock.this.beep</code>?</p>\n</blockquote>\n<p>It isn't there because that wouldn't make any sense. Imagine you wrote <code>TalkingClock.this.beep.toLowerCase()</code> (and beep was a string) - would you expect a field for that too?</p>\n<p>The thing you are referring to that needs to be available to the inner class is just <code>TalkingClock.this</code>, <strong>that is all</strong> - once you have that, the code can simply invoke the field lookup for <code>beep</code> on this. Yes, it's private, but that's why the compiler actually made it package private (or, if you're doing this on JDK17, why there's a nestmates section). Access control and making sure all the things the inner class needs are available to it are mostly separate concerns. <code>javac</code> needs to do some fancy footwork to accomodate the fact that at the class file level inner class do not exist - for both of those concepts.</p>\n<p><code>this$0</code> <strong>is</strong> <code>TalkingClock.this</code>. Thus, <code>TalkingClock.this.beep</code> in java code turns, at the class file level, into:</p>\n<p>load up the <code>this$0</code> variable. Then fetch the <code>beep</code> field from the object that variable is pointing at.</p>\n<blockquote>\n<p>On the other hand I have written a reflection code.</p>\n</blockquote>\n<p>You didn't paste this code so there's not much to say here.</p>\n"}],"owner":{"account_id":27842488,"reputation":15,"user_id":21258697,"display_name":"JavaStudent001"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":183,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75630470,"answer_count":1,"score":1,"last_activity_date":1677867701,"creation_date":1677861522,"question_id":75629696,"body_markdown":"I want to know how inner classes mechanism works (JDK 17). I&#39;m reading a book Java and I&#39;m learning about inner classes.\r\n\r\nFor example I have this:\r\n\r\n```\r\npackage com.example;\r\n\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport java.time.Instant;\r\n\r\npublic class TalkingClock {\r\n\r\n    private int interval;\r\n    private  boolean beep;\r\n\r\n\r\n    public TalkingClock(int interval, boolean beep) {\r\n        this.interval = interval;\r\n        this.beep = beep;\r\n    }\r\n    public void start(int interval, boolean beep) {\r\n        class TimePrinter implements ActionListener {\r\n\r\n            @Override\r\n            public void actionPerformed(ActionEvent actionEvent) {\r\n                System.out.println(&quot;Kiedy uslyszysz dzwiek, bedzie godzina &quot; + Instant.ofEpochMilli(actionEvent.getWhen()));\r\n                if(TalkingClock.this.beep) Toolkit.getDefaultToolkit().beep();\r\n                //System.out.println(interval);\r\n            }\r\n        }\r\n\r\n        var listener = new TimePrinter();\r\n        var timer = new Timer(interval, listener);\r\n        timer.start();\r\n    }\r\n}\r\n```\r\n\r\nAnd this info showed after had compiled the code and typed command: `javap -private com.example.TalkingClock\\$1TimePrinter`:\r\n\r\n\r\n```\r\nCompiled from &quot;TalkingClock.java&quot;\r\nclass com.example.TalkingClock$1TimePrinter implements java.awt.event.ActionListener {\r\n  final com.example.TalkingClock this$0;\r\n  com.example.TalkingClock$1TimePrinter(com.example.TalkingClock);\r\n  public void actionPerformed(java.awt.event.ActionEvent);\r\n}\r\n\r\n```\r\nOkay I can see extra param `com.example.TalkingClock` in the constructor.\r\nbut when I will uncomment `//System.out.println(interval);` in start() method, I can see:\r\n\r\n\r\n```\r\nCompiled from &quot;TalkingClock.java&quot;\r\nclass com.example.TalkingClock$1TimePrinter implements java.awt.event.ActionListener {\r\n  final int val$interval;\r\n  final com.example.TalkingClock this$0;\r\n  com.example.TalkingClock$1TimePrinter();\r\n  public void actionPerformed(java.awt.event.ActionEvent);\r\n}\r\n\r\n```\r\nOkay extra `val$interval` is properly added but where is extra param `com.example.TalkingClock` in the constructor for `TalkingClock.this.beep`?\r\n\r\n\r\n\r\n\r\nOn the other hand I have written a reflection code.\r\n\r\nIn the first case it shows:\r\n\r\n```\r\nclass com.example.TalkingClock$1TimePrinter implements java.awt.event.ActionListener{\r\n\r\n  com.example.TalkingClock$1TimePrinter(com.example.TalkingClock);\r\n\r\n  public void actionPerformed(java.awt.event.ActionEvent);\r\n\r\n  final com.example.TalkingClock this$0;\r\n}\r\n```\r\n\r\nin the other:\r\n\r\n```\r\nclass com.example.TalkingClock$1TimePrinter implements java.awt.event.ActionListener{\r\n\r\n  com.example.TalkingClock$1TimePrinter(com.example.TalkingClock, int);\r\n\r\n  public void actionPerformed(java.awt.event.ActionEvent);\r\n\r\n  final int val$interval;\r\n  final com.example.TalkingClock this$0;\r\n}\r\n```\r\n\r\nAnd this info is logically for me. But why the tool javap shows me something else?\r\n\r\nThank you for help!!\r\n\r\n//edit\r\n\r\nThe reflection code:\r\n\r\n    public static void main(String[] args) throws ClassNotFoundException {\r\n\r\n        String name = &quot;com.example.TalkingClock$1TimePrinter&quot;;\r\n        Class cl = Class.forName(name);\r\n\r\n        String modifiers = Modifier.toString(cl.getModifiers());\r\n\r\n        if(modifiers.length() &gt; 0) System.out.print(modifiers + &quot; &quot;);\r\n        if(cl.isSealed()) System.out.print(&quot;sealed &quot; + name);\r\n        if(cl.isEnum()) System.out.println(&quot;enum &quot; + name);\r\n        if(cl.isRecord()) System.out.println(&quot;record &quot; + name);\r\n        if(cl.isInterface()) System.out.println(&quot;interface &quot; + name);\r\n        else System.out.print(&quot;class &quot; + name);\r\n\r\n        Class supercl = cl.getSuperclass();\r\n\r\n        if(supercl != null &amp;&amp; supercl != Object.class) System.out.print(&quot; extends &quot; + supercl.getName());\r\n\r\n        printInterfaces(cl);\r\n        printPermittedSubclasses(cl);\r\n        System.out.println(&quot;{\\n&quot;);\r\n        printConstructors(cl);\r\n        System.out.println();\r\n        printMethods(cl);\r\n        System.out.println();\r\n        printFields(cl);\r\n        System.out.println(&quot;}\\n&quot;);\r\n\r\n    }\r\n\r\n    public static void printInterfaces(Class cl) {\r\n        Class&lt;?&gt;[] interfaces = cl.getInterfaces();\r\n\r\n        for (int i = 0; i &lt; interfaces.length; i++) {\r\n            if (i == 0) {\r\n                System.out.print(cl.isInterface() ? &quot; extends &quot; : &quot; implements &quot;);\r\n            } else\r\n                System.out.print(&quot;, &quot;);\r\n            System.out.print(interfaces[i].getName());\r\n        }\r\n    }\r\n\r\n    public static void printConstructors(Class cl) {\r\n        Constructor[] constructors = cl.getDeclaredConstructors();\r\n\r\n        for (Constructor c : constructors) {\r\n            String name = c.getName();\r\n            System.out.print(&quot;  &quot;);\r\n            String modifiers = Modifier.toString(c.getModifiers());\r\n            if (modifiers.length() &gt; 0) System.out.print(modifiers + &quot; &quot;);\r\n            System.out.print(name + &quot;(&quot;);\r\n\r\n            Class[] paramTypes = c.getParameterTypes();\r\n\r\n            for (int j = 0; j &lt; paramTypes.length; j++) {\r\n                if (j &gt; 0) System.out.print(&quot;, &quot;);\r\n                System.out.print(paramTypes[j].getName());\r\n            }\r\n            System.out.println(&quot;);&quot;);\r\n        }\r\n    }\r\n\r\n    public static void printMethods(Class cl) {\r\n        Method[] methods = cl.getDeclaredMethods();\r\n\r\n        for (Method m : methods) {\r\n            Class retType = m.getReturnType();\r\n            String name = m.getName();\r\n            System.out.print(&quot;  &quot;);\r\n\r\n            String modifiers = Modifier.toString(m.getModifiers());\r\n\r\n            if (modifiers.length() &gt; 0)\r\n                System.out.print(modifiers + &quot; &quot;);\r\n            System.out.print(retType.getName() + &quot; &quot; + name + &quot;(&quot;);\r\n\r\n            Class[] paramTypes = m.getParameterTypes();\r\n\r\n            for (int j = 0; j &lt; paramTypes.length; j++) {\r\n                if (j &gt; 0)\r\n                    System.out.print(&quot;, &quot;);\r\n                System.out.print(paramTypes[j].getName());\r\n            }\r\n            System.out.println(&quot;);&quot;);\r\n\r\n        }\r\n    }\r\n\r\n    public static void printFields(Class cl) {\r\n        Field[] fields = cl.getDeclaredFields();\r\n\r\n        for (Field f : fields) {\r\n            Class type = f.getType();\r\n\r\n            String name = f.getName();\r\n            System.out.print(&quot;  &quot;);\r\n            String modifiers = Modifier.toString(f.getModifiers());\r\n\r\n            if (modifiers.length() &gt; 0) System.out.print(modifiers + &quot; &quot;);\r\n            System.out.println(type.getName() + &quot; &quot; + name + &quot;;&quot;);\r\n        }\r\n    }\r\n\r\n    public static void printPermittedSubclasses(Class cl) {\r\n        if (cl.isSealed()) {\r\n            Class&lt;?&gt;[] permittedSubclasses = cl.getPermittedSubclasses();\r\n\r\n            for (int i = 0; i &lt; permittedSubclasses.length; i++) {\r\n                if (i == 0)\r\n                    System.out.print(&quot; permits &quot;);\r\n                else\r\n                    System.out.print(&quot;, &quot;);\r\n                System.out.print(permittedSubclasses[i].getName());\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n","title":"Java Inner Classes (reflection, javap -private) JDK 17","body":"<p>I want to know how inner classes mechanism works (JDK 17). I'm reading a book Java and I'm learning about inner classes.</p>\n<p>For example I have this:</p>\n<pre><code>package com.example;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.time.Instant;\n\npublic class TalkingClock {\n\n    private int interval;\n    private  boolean beep;\n\n\n    public TalkingClock(int interval, boolean beep) {\n        this.interval = interval;\n        this.beep = beep;\n    }\n    public void start(int interval, boolean beep) {\n        class TimePrinter implements ActionListener {\n\n            @Override\n            public void actionPerformed(ActionEvent actionEvent) {\n                System.out.println(&quot;Kiedy uslyszysz dzwiek, bedzie godzina &quot; + Instant.ofEpochMilli(actionEvent.getWhen()));\n                if(TalkingClock.this.beep) Toolkit.getDefaultToolkit().beep();\n                //System.out.println(interval);\n            }\n        }\n\n        var listener = new TimePrinter();\n        var timer = new Timer(interval, listener);\n        timer.start();\n    }\n}\n</code></pre>\n<p>And this info showed after had compiled the code and typed command: <code>javap -private com.example.TalkingClock\\$1TimePrinter</code>:</p>\n<pre><code>Compiled from &quot;TalkingClock.java&quot;\nclass com.example.TalkingClock$1TimePrinter implements java.awt.event.ActionListener {\n  final com.example.TalkingClock this$0;\n  com.example.TalkingClock$1TimePrinter(com.example.TalkingClock);\n  public void actionPerformed(java.awt.event.ActionEvent);\n}\n\n</code></pre>\n<p>Okay I can see extra param <code>com.example.TalkingClock</code> in the constructor.\nbut when I will uncomment <code>//System.out.println(interval);</code> in start() method, I can see:</p>\n<pre><code>Compiled from &quot;TalkingClock.java&quot;\nclass com.example.TalkingClock$1TimePrinter implements java.awt.event.ActionListener {\n  final int val$interval;\n  final com.example.TalkingClock this$0;\n  com.example.TalkingClock$1TimePrinter();\n  public void actionPerformed(java.awt.event.ActionEvent);\n}\n\n</code></pre>\n<p>Okay extra <code>val$interval</code> is properly added but where is extra param <code>com.example.TalkingClock</code> in the constructor for <code>TalkingClock.this.beep</code>?</p>\n<p>On the other hand I have written a reflection code.</p>\n<p>In the first case it shows:</p>\n<pre><code>class com.example.TalkingClock$1TimePrinter implements java.awt.event.ActionListener{\n\n  com.example.TalkingClock$1TimePrinter(com.example.TalkingClock);\n\n  public void actionPerformed(java.awt.event.ActionEvent);\n\n  final com.example.TalkingClock this$0;\n}\n</code></pre>\n<p>in the other:</p>\n<pre><code>class com.example.TalkingClock$1TimePrinter implements java.awt.event.ActionListener{\n\n  com.example.TalkingClock$1TimePrinter(com.example.TalkingClock, int);\n\n  public void actionPerformed(java.awt.event.ActionEvent);\n\n  final int val$interval;\n  final com.example.TalkingClock this$0;\n}\n</code></pre>\n<p>And this info is logically for me. But why the tool javap shows me something else?</p>\n<p>Thank you for help!!</p>\n<p>//edit</p>\n<p>The reflection code:</p>\n<pre><code>public static void main(String[] args) throws ClassNotFoundException {\n\n    String name = &quot;com.example.TalkingClock$1TimePrinter&quot;;\n    Class cl = Class.forName(name);\n\n    String modifiers = Modifier.toString(cl.getModifiers());\n\n    if(modifiers.length() &gt; 0) System.out.print(modifiers + &quot; &quot;);\n    if(cl.isSealed()) System.out.print(&quot;sealed &quot; + name);\n    if(cl.isEnum()) System.out.println(&quot;enum &quot; + name);\n    if(cl.isRecord()) System.out.println(&quot;record &quot; + name);\n    if(cl.isInterface()) System.out.println(&quot;interface &quot; + name);\n    else System.out.print(&quot;class &quot; + name);\n\n    Class supercl = cl.getSuperclass();\n\n    if(supercl != null &amp;&amp; supercl != Object.class) System.out.print(&quot; extends &quot; + supercl.getName());\n\n    printInterfaces(cl);\n    printPermittedSubclasses(cl);\n    System.out.println(&quot;{\\n&quot;);\n    printConstructors(cl);\n    System.out.println();\n    printMethods(cl);\n    System.out.println();\n    printFields(cl);\n    System.out.println(&quot;}\\n&quot;);\n\n}\n\npublic static void printInterfaces(Class cl) {\n    Class&lt;?&gt;[] interfaces = cl.getInterfaces();\n\n    for (int i = 0; i &lt; interfaces.length; i++) {\n        if (i == 0) {\n            System.out.print(cl.isInterface() ? &quot; extends &quot; : &quot; implements &quot;);\n        } else\n            System.out.print(&quot;, &quot;);\n        System.out.print(interfaces[i].getName());\n    }\n}\n\npublic static void printConstructors(Class cl) {\n    Constructor[] constructors = cl.getDeclaredConstructors();\n\n    for (Constructor c : constructors) {\n        String name = c.getName();\n        System.out.print(&quot;  &quot;);\n        String modifiers = Modifier.toString(c.getModifiers());\n        if (modifiers.length() &gt; 0) System.out.print(modifiers + &quot; &quot;);\n        System.out.print(name + &quot;(&quot;);\n\n        Class[] paramTypes = c.getParameterTypes();\n\n        for (int j = 0; j &lt; paramTypes.length; j++) {\n            if (j &gt; 0) System.out.print(&quot;, &quot;);\n            System.out.print(paramTypes[j].getName());\n        }\n        System.out.println(&quot;);&quot;);\n    }\n}\n\npublic static void printMethods(Class cl) {\n    Method[] methods = cl.getDeclaredMethods();\n\n    for (Method m : methods) {\n        Class retType = m.getReturnType();\n        String name = m.getName();\n        System.out.print(&quot;  &quot;);\n\n        String modifiers = Modifier.toString(m.getModifiers());\n\n        if (modifiers.length() &gt; 0)\n            System.out.print(modifiers + &quot; &quot;);\n        System.out.print(retType.getName() + &quot; &quot; + name + &quot;(&quot;);\n\n        Class[] paramTypes = m.getParameterTypes();\n\n        for (int j = 0; j &lt; paramTypes.length; j++) {\n            if (j &gt; 0)\n                System.out.print(&quot;, &quot;);\n            System.out.print(paramTypes[j].getName());\n        }\n        System.out.println(&quot;);&quot;);\n\n    }\n}\n\npublic static void printFields(Class cl) {\n    Field[] fields = cl.getDeclaredFields();\n\n    for (Field f : fields) {\n        Class type = f.getType();\n\n        String name = f.getName();\n        System.out.print(&quot;  &quot;);\n        String modifiers = Modifier.toString(f.getModifiers());\n\n        if (modifiers.length() &gt; 0) System.out.print(modifiers + &quot; &quot;);\n        System.out.println(type.getName() + &quot; &quot; + name + &quot;;&quot;);\n    }\n}\n\npublic static void printPermittedSubclasses(Class cl) {\n    if (cl.isSealed()) {\n        Class&lt;?&gt;[] permittedSubclasses = cl.getPermittedSubclasses();\n\n        for (int i = 0; i &lt; permittedSubclasses.length; i++) {\n            if (i == 0)\n                System.out.print(&quot; permits &quot;);\n            else\n                System.out.print(&quot;, &quot;);\n            System.out.print(permittedSubclasses[i].getName());\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","xml","api","soapui"],"owner":{"account_id":2091239,"reputation":1003,"user_id":1861033,"accept_rate":50,"display_name":"shaiksha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":195,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677867678,"creation_date":1677867678,"question_id":75630602,"body_markdown":"I am trying to call a findAPI where I want to filterout the resulkts based on the field statementDate. But for some reason the filter is being ignored and returning 0 rows. when I remove the filter and call the api it returns rows which has the value I was setting in the filter.\r\nNote: when I call the same API from a java client it returns correct results. The old difference between the java client request and soap request is the filter type.\r\nIn java client I am setting DateEquals FilterCriteris but in Soap request there is no such filter\r\n\r\n1. what is the filed &lt;to_date&gt; used for and what value we can set here\r\n\r\nElement from the soap request\r\n============================\r\n  \r\n\r\n      &lt;statementDate&gt;\r\n              &lt;!--Optional:--&gt;\r\n              &lt;caseInsensitive&gt;?&lt;/caseInsensitive&gt;\r\n              &lt;!--Optional:--&gt;\r\n              &lt;fetch&gt;?&lt;/fetch&gt;\r\n              &lt;!--Optional:--&gt;\r\n              &lt;filters&gt;\r\n                 &lt;!--You have a CHOICE of the next 11 items at this level--&gt;\r\n                 &lt;Between&gt;\r\n                    &lt;!--Optional:--&gt;\r\n                        &lt;lowerBound&gt;?&lt;/lowerBound&gt;\r\n                    &lt;negated&gt;false&lt;/negated&gt;\r\n                    &lt;!--Optional:--&gt;\r\n                       &lt;orFilterGroupName&gt;?&lt;/orFilterGroupName&gt;\r\n                    &lt;!--Optional:--&gt;\r\n                       &lt;upperBound&gt;?&lt;/upperBound&gt;\r\n                 &lt;/Between&gt;\r\n                 &lt;Equals&gt;\r\n                    &lt;negated&gt;false&lt;/negated&gt;\r\n                    &lt;!--Optional:--&gt;\r\n                    \r\n             &lt;orFilterGroupName&gt;com.comverse.api.framework.filter.DateEquals&lt;/orFilterGroupName&gt;\r\n                    &lt;!--Optional:--&gt;\r\n                    &lt;value&gt;?&lt;/value&gt;\r\n                 &lt;/Equals&gt;\r\n                 &lt;GreaterThanEquals&gt;\r\n                    &lt;!--Optional:--&gt;\r\n                    &lt;orFilterGroupName&gt;?&lt;/orFilterGroupName&gt;\r\n                    &lt;!--Optional:--&gt;\r\n                    &lt;value&gt;?&lt;/value&gt;\r\n                 &lt;/GreaterThanEquals&gt;\r\n                 &lt;GreaterThan&gt;\r\n                    &lt;!--Optional:--&gt;\r\n                    &lt;orFilterGroupName&gt;?&lt;/orFilterGroupName&gt;\r\n                    &lt;!--Optional:--&gt;\r\n                    &lt;value&gt;?&lt;/value&gt;\r\n                 &lt;/GreaterThan&gt;\r\n                 &lt;In&gt;\r\n                    &lt;negated&gt;false&lt;/negated&gt;\r\n                    &lt;!--Optional:--&gt;\r\n                    &lt;orFilterGroupName&gt;?&lt;/orFilterGroupName&gt;\r\n                    &lt;!--Zero or more repetitions:--&gt;\r\n                    &lt;values&gt;?&lt;/values&gt;\r\n                 &lt;/In&gt;\r\n                 &lt;IsNull&gt;\r\n                    &lt;negated&gt;false&lt;/negated&gt;\r\n                    &lt;!--Optional:--&gt;\r\n                    &lt;orFilterGroupName&gt;?&lt;/orFilterGroupName&gt;\r\n                 &lt;/IsNull&gt;\r\n                 &lt;LessThan&gt;\r\n                    &lt;!--Optional:--&gt;\r\n                    &lt;orFilterGroupName&gt;?&lt;/orFilterGroupName&gt;\r\n                    &lt;!--Optional:--&gt;\r\n                    &lt;value&gt;?&lt;/value&gt;\r\n                 &lt;/LessThan&gt;\r\n                 &lt;LessThanEquals&gt;\r\n                    &lt;!--Optional:--&gt;\r\n                    &lt;orFilterGroupName&gt;?&lt;/orFilterGroupName&gt;\r\n                    &lt;!--Optional:--&gt;\r\n                    &lt;value&gt;?&lt;/value&gt;\r\n                 &lt;/LessThanEquals&gt;\r\n                 &lt;Like&gt;\r\n                    &lt;negated&gt;false&lt;/negated&gt;\r\n                    &lt;!--Optional:--&gt;\r\n                    &lt;orFilterGroupName&gt;?&lt;/orFilterGroupName&gt;\r\n                    &lt;!--Optional:--&gt;\r\n                    &lt;value&gt;?&lt;/value&gt;\r\n                 &lt;/Like&gt;\r\n                 &lt;OuterJoin&gt;\r\n                    &lt;negated&gt;false&lt;/negated&gt;\r\n                    &lt;!--Optional:--&gt;\r\n                    &lt;orFilterGroupName&gt;?&lt;/orFilterGroupName&gt;\r\n                    &lt;!--Optional:--&gt;\r\n                    &lt;value&gt;?&lt;/value&gt;\r\n                 &lt;/OuterJoin&gt;\r\n                 &lt;XPath&gt;\r\n                    &lt;negated&gt;false&lt;/negated&gt;\r\n                    &lt;!--Optional:--&gt;\r\n                    &lt;orFilterGroupName&gt;?&lt;/orFilterGroupName&gt;\r\n                    &lt;!--Optional:--&gt;\r\n                    &lt;xml&gt;?&lt;/xml&gt;\r\n                    &lt;!--Optional:--&gt;\r\n                    &lt;xpath&gt;?&lt;/xpath&gt;\r\n                 &lt;/XPath&gt;\r\n              &lt;/filters&gt;\r\n              &lt;!--Optional:--&gt;\r\n              &lt;toDate&gt;?&lt;/toDate&gt;\r\n           &lt;/statementDate&gt;\r\n\r\nValues I am passing are as below\r\n=================================  \r\n            \r\n\r\n          &lt;statementDate&gt;\r\n                  &lt;caseInsensitive&gt;true&lt;/caseInsensitive&gt;\r\n              &lt;filters&gt;\r\n                 &lt;Equals&gt;\r\n                    &lt;negated&gt;false&lt;/negated&gt;\r\n                    &lt;value&gt;Wed Aug 28 00:00:00 AST 2013&lt;/value&gt;\r\n                 &lt;/Equals&gt;\r\n              &lt;/filters&gt;\r\n           &lt;/statementDate&gt;\r\n\r\n","title":"How to set Date filter in soap-xml request while calling an API","body":"<p>I am trying to call a findAPI where I want to filterout the resulkts based on the field statementDate. But for some reason the filter is being ignored and returning 0 rows. when I remove the filter and call the api it returns rows which has the value I was setting in the filter.\nNote: when I call the same API from a java client it returns correct results. The old difference between the java client request and soap request is the filter type.\nIn java client I am setting DateEquals FilterCriteris but in Soap request there is no such filter</p>\n<ol>\n<li>what is the filed &lt;to_date&gt; used for and what value we can set here</li>\n</ol>\n<h1>Element from the soap request</h1>\n<pre><code>  &lt;statementDate&gt;\n          &lt;!--Optional:--&gt;\n          &lt;caseInsensitive&gt;?&lt;/caseInsensitive&gt;\n          &lt;!--Optional:--&gt;\n          &lt;fetch&gt;?&lt;/fetch&gt;\n          &lt;!--Optional:--&gt;\n          &lt;filters&gt;\n             &lt;!--You have a CHOICE of the next 11 items at this level--&gt;\n             &lt;Between&gt;\n                &lt;!--Optional:--&gt;\n                    &lt;lowerBound&gt;?&lt;/lowerBound&gt;\n                &lt;negated&gt;false&lt;/negated&gt;\n                &lt;!--Optional:--&gt;\n                   &lt;orFilterGroupName&gt;?&lt;/orFilterGroupName&gt;\n                &lt;!--Optional:--&gt;\n                   &lt;upperBound&gt;?&lt;/upperBound&gt;\n             &lt;/Between&gt;\n             &lt;Equals&gt;\n                &lt;negated&gt;false&lt;/negated&gt;\n                &lt;!--Optional:--&gt;\n                \n         &lt;orFilterGroupName&gt;com.comverse.api.framework.filter.DateEquals&lt;/orFilterGroupName&gt;\n                &lt;!--Optional:--&gt;\n                &lt;value&gt;?&lt;/value&gt;\n             &lt;/Equals&gt;\n             &lt;GreaterThanEquals&gt;\n                &lt;!--Optional:--&gt;\n                &lt;orFilterGroupName&gt;?&lt;/orFilterGroupName&gt;\n                &lt;!--Optional:--&gt;\n                &lt;value&gt;?&lt;/value&gt;\n             &lt;/GreaterThanEquals&gt;\n             &lt;GreaterThan&gt;\n                &lt;!--Optional:--&gt;\n                &lt;orFilterGroupName&gt;?&lt;/orFilterGroupName&gt;\n                &lt;!--Optional:--&gt;\n                &lt;value&gt;?&lt;/value&gt;\n             &lt;/GreaterThan&gt;\n             &lt;In&gt;\n                &lt;negated&gt;false&lt;/negated&gt;\n                &lt;!--Optional:--&gt;\n                &lt;orFilterGroupName&gt;?&lt;/orFilterGroupName&gt;\n                &lt;!--Zero or more repetitions:--&gt;\n                &lt;values&gt;?&lt;/values&gt;\n             &lt;/In&gt;\n             &lt;IsNull&gt;\n                &lt;negated&gt;false&lt;/negated&gt;\n                &lt;!--Optional:--&gt;\n                &lt;orFilterGroupName&gt;?&lt;/orFilterGroupName&gt;\n             &lt;/IsNull&gt;\n             &lt;LessThan&gt;\n                &lt;!--Optional:--&gt;\n                &lt;orFilterGroupName&gt;?&lt;/orFilterGroupName&gt;\n                &lt;!--Optional:--&gt;\n                &lt;value&gt;?&lt;/value&gt;\n             &lt;/LessThan&gt;\n             &lt;LessThanEquals&gt;\n                &lt;!--Optional:--&gt;\n                &lt;orFilterGroupName&gt;?&lt;/orFilterGroupName&gt;\n                &lt;!--Optional:--&gt;\n                &lt;value&gt;?&lt;/value&gt;\n             &lt;/LessThanEquals&gt;\n             &lt;Like&gt;\n                &lt;negated&gt;false&lt;/negated&gt;\n                &lt;!--Optional:--&gt;\n                &lt;orFilterGroupName&gt;?&lt;/orFilterGroupName&gt;\n                &lt;!--Optional:--&gt;\n                &lt;value&gt;?&lt;/value&gt;\n             &lt;/Like&gt;\n             &lt;OuterJoin&gt;\n                &lt;negated&gt;false&lt;/negated&gt;\n                &lt;!--Optional:--&gt;\n                &lt;orFilterGroupName&gt;?&lt;/orFilterGroupName&gt;\n                &lt;!--Optional:--&gt;\n                &lt;value&gt;?&lt;/value&gt;\n             &lt;/OuterJoin&gt;\n             &lt;XPath&gt;\n                &lt;negated&gt;false&lt;/negated&gt;\n                &lt;!--Optional:--&gt;\n                &lt;orFilterGroupName&gt;?&lt;/orFilterGroupName&gt;\n                &lt;!--Optional:--&gt;\n                &lt;xml&gt;?&lt;/xml&gt;\n                &lt;!--Optional:--&gt;\n                &lt;xpath&gt;?&lt;/xpath&gt;\n             &lt;/XPath&gt;\n          &lt;/filters&gt;\n          &lt;!--Optional:--&gt;\n          &lt;toDate&gt;?&lt;/toDate&gt;\n       &lt;/statementDate&gt;\n</code></pre>\n<h1>Values I am passing are as below</h1>\n<pre><code>      &lt;statementDate&gt;\n              &lt;caseInsensitive&gt;true&lt;/caseInsensitive&gt;\n          &lt;filters&gt;\n             &lt;Equals&gt;\n                &lt;negated&gt;false&lt;/negated&gt;\n                &lt;value&gt;Wed Aug 28 00:00:00 AST 2013&lt;/value&gt;\n             &lt;/Equals&gt;\n          &lt;/filters&gt;\n       &lt;/statementDate&gt;\n</code></pre>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":6410924,"reputation":33,"user_id":6242419,"display_name":"TheMathGeek_314"},"score":0,"creation_date":1574193122,"post_id":58941724,"comment_id":104142059,"body_markdown":"I was on the debug perspective. That fixed it, thank you!","body":"I was on the debug perspective. That fixed it, thank you!"}],"answers":[{"tags":[],"owner":{"account_id":6078,"reputation":61197,"user_id":10077,"accept_rate":90,"display_name":"Fred Larson"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1574193196,"creation_date":1574193196,"answer_id":58941878,"question_id":58941724,"body_markdown":"Make sure you&#39;re in the right perspective. I see what you&#39;re looking for if I&#39;m in the &quot;Java&quot; perspective, but not in other perspectives, such as &quot;Java EE&quot; or &quot;Debug&quot;.\r\n\r\nA &quot;perspective&quot; in Eclipse is the set of panes, toolbars, menus, etc. for a particular purpose. There should be toolbar buttons all the way on the right for them.","title":"How to customize &#39;new&#39; option in Eclipse","body":"<p>Make sure you're in the right perspective. I see what you're looking for if I'm in the \"Java\" perspective, but not in other perspectives, such as \"Java EE\" or \"Debug\".</p>\n\n<p>A \"perspective\" in Eclipse is the set of panes, toolbars, menus, etc. for a particular purpose. There should be toolbar buttons all the way on the right for them.</p>\n"},{"tags":[],"owner":{"account_id":27880088,"reputation":11,"user_id":21288737,"display_name":"Ebad Zalmai"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677867574,"creation_date":1677372669,"answer_id":75569365,"question_id":58941724,"body_markdown":"In order to customize new option in Eclipse, On  the top of Eclipse, click on `Window`, `Navigate to &gt; Perspective &gt; Customize Perspective &gt; Menu Visibility &gt; file &gt; new.`\r\nNow you can customize new option.","title":"How to customize &#39;new&#39; option in Eclipse","body":"<p>In order to customize new option in Eclipse, On  the top of Eclipse, click on <code>Window</code>, <code>Navigate to &gt; Perspective &gt; Customize Perspective &gt; Menu Visibility &gt; file &gt; new.</code>\nNow you can customize new option.</p>\n"}],"owner":{"account_id":6410924,"reputation":33,"user_id":6242419,"display_name":"TheMathGeek_314"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":317,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":58941878,"answer_count":2,"score":1,"last_activity_date":1677867574,"creation_date":1574192464,"question_id":58941724,"body_markdown":"When I&#39;m using Eclipse to code in Java, I want to use the &#39;New&#39; button (located below File, Edit...) to create a new class. I know it&#39;s possible because I&#39;ve been able to use it like that on a different computer. However, the only options displayed are &quot;Project&quot;, &quot;Example&quot;, &quot;Other...&quot;. So I have to select other and go find &quot;Class&quot;.\r\n\r\nI want a way to modify this list to include Java Project, Class, and whatever else I need. It&#39;s the same story when I right-click the src folder in the package explorer. I want to make a class in that folder, but I have to click other, navigate the new window to class, etc.\r\n\r\nCan this be simplified?","title":"How to customize &#39;new&#39; option in Eclipse","body":"<p>When I'm using Eclipse to code in Java, I want to use the 'New' button (located below File, Edit...) to create a new class. I know it's possible because I've been able to use it like that on a different computer. However, the only options displayed are \"Project\", \"Example\", \"Other...\". So I have to select other and go find \"Class\".</p>\n\n<p>I want a way to modify this list to include Java Project, Class, and whatever else I need. It's the same story when I right-click the src folder in the package explorer. I want to make a class in that folder, but I have to click other, navigate the new window to class, etc.</p>\n\n<p>Can this be simplified?</p>\n"},{"tags":["java","spring-boot","elasticsearch"],"comments":[{"owner":{"account_id":7187902,"reputation":5118,"user_id":5489276,"accept_rate":20,"display_name":"Sagar Patel"},"score":0,"creation_date":1649752797,"post_id":71839329,"comment_id":126949693,"body_markdown":"what is version of Elasticsearch and highlevel client ?","body":"what is version of Elasticsearch and highlevel client ?"},{"owner":{"account_id":15363131,"reputation":45,"user_id":11083411,"display_name":"Aditya Pandey"},"score":0,"creation_date":1649753599,"post_id":71839329,"comment_id":126950004,"body_markdown":"Elasticsearch version is 7.9.2  other than that I am using spring-boot-starter-data-elasticsearch dependency with default version. Haven&#39;t added any dependency for highlevel client. Where can I check the version for the same?","body":"Elasticsearch version is 7.9.2  other than that I am using spring-boot-starter-data-elasticsearch dependency with default version. Haven&#39;t added any dependency for highlevel client. Where can I check the version for the same?"},{"owner":{"account_id":7187902,"reputation":5118,"user_id":5489276,"accept_rate":20,"display_name":"Sagar Patel"},"score":0,"creation_date":1649754521,"post_id":71839329,"comment_id":126950338,"body_markdown":"Can you try to provide `version` for [spring-boot-starter-data-elasticsearch](https://docs.spring.io/spring-data/elasticsearch/docs/current-SNAPSHOT/reference/html/#reference) as `4.1` and try. because your elasticsearch version is 7.9.2 and as you are using default version for `spring-boot-starter-data-elasticsearch` it is using latest api of Elasticsearch. As mentioned [here](https://github.com/elastic/elasticsearch/issues/58468) `zero_terms_query` is supported in greater then 7.10 version.","body":"Can you try to provide <code>version</code> for <a href=\"https://docs.spring.io/spring-data/elasticsearch/docs/current-SNAPSHOT/reference/html/#reference\" rel=\"nofollow noreferrer\">spring-boot-starter-data-elasticsearch</a> as <code>4.1</code> and try. because your elasticsearch version is 7.9.2 and as you are using default version for <code>spring-boot-starter-data-elasticsearch</code> it is using latest api of Elasticsearch. As mentioned <a href=\"https://github.com/elastic/elasticsearch/issues/58468\" rel=\"nofollow noreferrer\">here</a> <code>zero_terms_query</code> is supported in greater then 7.10 version."},{"owner":{"account_id":15363131,"reputation":45,"user_id":11083411,"display_name":"Aditya Pandey"},"score":0,"creation_date":1649755167,"post_id":71839329,"comment_id":126950540,"body_markdown":"spring-boot-starter-data-elasticsearch latest version is 2.6.6 checked from [here](https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-data-elasticsearch) which is throwing the same exception.","body":"spring-boot-starter-data-elasticsearch latest version is 2.6.6 checked from <a href=\"https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-data-elasticsearch\" rel=\"nofollow noreferrer\">here</a> which is throwing the same exception."},{"owner":{"account_id":7187902,"reputation":5118,"user_id":5489276,"accept_rate":20,"display_name":"Sagar Patel"},"score":0,"creation_date":1649755893,"post_id":71839329,"comment_id":126950806,"body_markdown":"Can you please try `2.4.13` version of `spring-boot-starter-data-elasticsearch` as it use internally `7.9.3` version of `elastic high level client`.","body":"Can you please try <code>2.4.13</code> version of <code>spring-boot-starter-data-elasticsearch</code> as it use internally <code>7.9.3</code> version of <code>elastic high level client</code>."},{"owner":{"account_id":7187902,"reputation":5118,"user_id":5489276,"accept_rate":20,"display_name":"Sagar Patel"},"score":0,"creation_date":1649755986,"post_id":71839329,"comment_id":126950846,"body_markdown":"`spring-boot-starter-data-elasticsearch` 2.6.6 version use ES highlevel client 7.15.2 that why this issue.","body":"<code>spring-boot-starter-data-elasticsearch</code> 2.6.6 version use ES highlevel client 7.15.2 that why this issue."},{"owner":{"account_id":15363131,"reputation":45,"user_id":11083411,"display_name":"Aditya Pandey"},"score":0,"creation_date":1649757362,"post_id":71839329,"comment_id":126951357,"body_markdown":"tried with 2.4.13 version, still facing same issue","body":"tried with 2.4.13 version, still facing same issue"},{"owner":{"account_id":7187902,"reputation":5118,"user_id":5489276,"accept_rate":20,"display_name":"Sagar Patel"},"score":0,"creation_date":1649758708,"post_id":71839329,"comment_id":126951826,"body_markdown":"Please check pom.xml file have proper depenandacy or not. can you do maven project update after updating pom.xml file. you can see my below updated answer and with version `2.4.13` it is not adding `zero_terms_query ` param in query.","body":"Please check pom.xml file have proper depenandacy or not. can you do maven project update after updating pom.xml file. you can see my below updated answer and with version <code>2.4.13</code> it is not adding <code>zero_terms_query </code> param in query."}],"answers":[{"comments":[{"owner":{"account_id":15363131,"reputation":45,"user_id":11083411,"display_name":"Aditya Pandey"},"score":1,"creation_date":1649767678,"post_id":71840348,"comment_id":126955224,"body_markdown":"I changed my elasticsearch version to 8.1 and it fixed the issue. Will mark this as correct answer as the problem was with version","body":"I changed my elasticsearch version to 8.1 and it fixed the issue. Will mark this as correct answer as the problem was with version"}],"tags":[],"owner":{"account_id":7187902,"reputation":5118,"user_id":5489276,"accept_rate":20,"display_name":"Sagar Patel"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649758617,"creation_date":1649756241,"answer_id":71840348,"question_id":71839329,"body_markdown":"As i mentioned in comment, You can use `spring-boot-starter-data-elasticsearch` with `2.4.13`  version as it is use Elastic Java high level client with  `7.9.3` version.\r\n\r\nIf you used `spring-boot-starter-data-elasticsearch` which is using Elastic high level client version greater then 7.10 version then you will face this issue. As `match_phrase_prefix` support `zero_terms_query` after Elasticsearch 7.10 version as mentioned [here][1].\r\n\r\n**Update**\r\n\r\nI have added below depenadancy in pom.xml file as i suggsted:\r\n```xml\r\n&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.8.1&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-data-elasticsearch --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-elasticsearch&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.4.13&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n```\r\n\r\nbelow is query generation in Java:\r\n```java\r\nSearchRequest searchRequest = new SearchRequest(&quot;company&quot;);\r\n\t\tSearchSourceBuilder sourceBuilder = new SearchSourceBuilder();\t\t\r\n\t\tsourceBuilder.query(QueryBuilders.matchPhrasePrefixQuery(&quot;field&quot;, &quot;sagar&quot;));\r\n\t\tSystem.out.println(sourceBuilder.toString());\r\n```\r\n\r\nOutput of query generated by Java (no `zero_terms_query` parameter)\r\n```json\r\n{\r\n\t&quot;query&quot;: {\r\n\t\t&quot;match_phrase_prefix&quot;: {\r\n\t\t\t&quot;field&quot;: {\r\n\t\t\t\t&quot;query&quot;: &quot;sagar&quot;,\r\n\t\t\t\t&quot;slop&quot;: 0,\r\n\t\t\t\t&quot;max_expansions&quot;: 50,\r\n\t\t\t\t&quot;boost&quot;: 1.0\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\n  [1]: https://github.com/elastic/elasticsearch/issues/58468","title":"How to remove zero_terms_query in match_phrase_prefix in Elasticsearch from QueryBuilder in Springboot?","body":"<p>As i mentioned in comment, You can use <code>spring-boot-starter-data-elasticsearch</code> with <code>2.4.13</code>  version as it is use Elastic Java high level client with  <code>7.9.3</code> version.</p>\n<p>If you used <code>spring-boot-starter-data-elasticsearch</code> which is using Elastic high level client version greater then 7.10 version then you will face this issue. As <code>match_phrase_prefix</code> support <code>zero_terms_query</code> after Elasticsearch 7.10 version as mentioned <a href=\"https://github.com/elastic/elasticsearch/issues/58468\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p><strong>Update</strong></p>\n<p>I have added below depenadancy in pom.xml file as i suggsted:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;3.8.1&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-data-elasticsearch --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-elasticsearch&lt;/artifactId&gt;\n            &lt;version&gt;2.4.13&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>below is query generation in Java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>SearchRequest searchRequest = new SearchRequest(&quot;company&quot;);\n        SearchSourceBuilder sourceBuilder = new SearchSourceBuilder();      \n        sourceBuilder.query(QueryBuilders.matchPhrasePrefixQuery(&quot;field&quot;, &quot;sagar&quot;));\n        System.out.println(sourceBuilder.toString());\n</code></pre>\n<p>Output of query generated by Java (no <code>zero_terms_query</code> parameter)</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;query&quot;: {\n        &quot;match_phrase_prefix&quot;: {\n            &quot;field&quot;: {\n                &quot;query&quot;: &quot;sagar&quot;,\n                &quot;slop&quot;: 0,\n                &quot;max_expansions&quot;: 50,\n                &quot;boost&quot;: 1.0\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18625411,"reputation":64,"user_id":13769625,"display_name":"harshit rathod"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677867548,"creation_date":1677867548,"answer_id":75630586,"question_id":71839329,"body_markdown":"Well for the people who are working on existing codebases and cannot modify elastic version, here is trick to implement match_phrase_prefix query with elastic versions &lt; 7.10\r\n\r\nWe can implement MultimatchQuery with phrase_prefix type and run only on a single field\r\n\r\n    MultiMatchQueryBuilder multiMatchQueryBuilder = new MultiMatchQueryBuilder(query,fields);\r\n    multiMatchQueryBuilder.type(MultiMatchQueryBuilder.Type.PHRASE_PREFIX);","title":"How to remove zero_terms_query in match_phrase_prefix in Elasticsearch from QueryBuilder in Springboot?","body":"<p>Well for the people who are working on existing codebases and cannot modify elastic version, here is trick to implement match_phrase_prefix query with elastic versions &lt; 7.10</p>\n<p>We can implement MultimatchQuery with phrase_prefix type and run only on a single field</p>\n<pre><code>MultiMatchQueryBuilder multiMatchQueryBuilder = new MultiMatchQueryBuilder(query,fields);\nmultiMatchQueryBuilder.type(MultiMatchQueryBuilder.Type.PHRASE_PREFIX);\n</code></pre>\n"}],"owner":{"account_id":15363131,"reputation":45,"user_id":11083411,"display_name":"Aditya Pandey"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":983,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71840348,"answer_count":2,"score":1,"last_activity_date":1677867548,"creation_date":1649751826,"question_id":71839329,"body_markdown":"I am trying to implement Elasticsearch&#39;s match_phrase_prefix in Springboot. I am trying to build the following query in Springboot :-\r\n\r\n    {\r\n    &quot;query&quot;: {\r\n        &quot;match_phrase_prefix&quot;: {\r\n            &quot;parent_question_text&quot;: {\r\n                &quot;query&quot;: &quot;what is th&quot;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nI came up with the following code :- \r\n\r\n    QueryBuilders.matchPhrasePrefixQuery(&quot;parent_question_text&quot;,&quot;what is th&quot;);\r\n\r\nBut, when I run the code its throwing the following exception:-\r\n\r\n&lt;pre&gt; ElasticsearchStatusException[Elasticsearch exception [type=parsing_exception, reason=[match_phrase_prefix] query does not support [zero_terms_query]]]\r\n\tat org.elasticsearch.rest.BytesRestResponse.errorFromXContent(BytesRestResponse.java:176)\r\n\tat org.elasticsearch.client.RestHighLevelClient.parseEntity(RestHighLevelClient.java:1933)\r\n\tat org.elasticsearch.client.RestHighLevelClient.parseResponseException(RestHighLevelClient.java:1910)\r\n\tat org.elasticsearch.client.RestHighLevelClient.internalPerformRequest(RestHighLevelClient.java:1667)\r\n\tat org.elasticsearch.client.RestHighLevelClient.performRequest(RestHighLevelClient.java:1624)\r\n\tat org.elasticsearch.client.RestHighLevelClient.performRequestAndParseEntity(RestHighLevelClient.java:1594)\r\n\tat org.elasticsearch.client.RestHighLevelClient.search(RestHighLevelClient.java:1110)\r\n\tat com.extramarks.questionMSA.services.QuestionElasticsearchServiceImpl.questionSearchByIdAndText(QuestionElasticsearchServiceImpl.java:112)\r\n\tat com.extramarks.questionMSA.controller.QuestionElasticsearchController.questionSearchByIdAndText(QuestionElasticsearchController.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1064)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:681)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat com.extramarks.questionMSA.filters.RequestCachingFilter.doFilterInternal(RequestCachingFilter.java:30)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1726)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\n\tSuppressed: org.elasticsearch.client.ResponseException: method [POST], host [http://34.100.181.31:9200], URI [/question/_search?typed_keys=true&amp;max_concurrent_shard_requests=5&amp;ignore_unavailable=false&amp;expand_wildcards=open&amp;allow_no_indices=true&amp;ignore_throttled=true&amp;search_type=query_then_fetch&amp;batched_reduce_size=512&amp;ccs_minimize_roundtrips=true], status line [HTTP/1.1 400 Bad Request]\r\n{&quot;error&quot;:{&quot;root_cause&quot;:[{&quot;type&quot;:&quot;parsing_exception&quot;,&quot;reason&quot;:&quot;[match_phrase_prefix] query does not support [zero_terms_query]&quot;,&quot;line&quot;:1,&quot;col&quot;:124}],&quot;type&quot;:&quot;parsing_exception&quot;,&quot;reason&quot;:&quot;[match_phrase_prefix] query does not support [zero_terms_query]&quot;,&quot;line&quot;:1,&quot;col&quot;:124},&quot;status&quot;:400}\r\n\t\tat org.elasticsearch.client.RestClient.convertResponse(RestClient.java:326)\r\n\t\tat org.elasticsearch.client.RestClient.performRequest(RestClient.java:296)\r\n\t\tat org.elasticsearch.client.RestClient.performRequest(RestClient.java:270)\r\n\t\tat org.elasticsearch.client.RestHighLevelClient.internalPerformRequest(RestHighLevelClient.java:1654)\r\n\t\t... 55 more\r\n&lt;/pre&gt;\r\n\r\nThe query that is generated with the following code is :- \r\n\r\n    {\r\n    &quot;match_phrase_prefix&quot;: {\r\n        &quot;parent_question_text&quot;: {\r\n            &quot;query&quot;: &quot;what is the&quot;,\r\n            &quot;slop&quot;: 0,\r\n            &quot;max_expansions&quot;: 50,\r\n            &quot;zero_terms_query&quot;: &quot;NONE&quot;,\r\n            &quot;boost&quot;: 1.0\r\n        }\r\n    }\r\n}\r\n\r\nI tired setting zero_terms_query to NONE,ALL, NULL in QueryBuilder but still getting same exception. \r\n\r\n\r\n ","title":"How to remove zero_terms_query in match_phrase_prefix in Elasticsearch from QueryBuilder in Springboot?","body":"<p>I am trying to implement Elasticsearch's match_phrase_prefix in Springboot. I am trying to build the following query in Springboot :-</p>\n<pre><code>{\n&quot;query&quot;: {\n    &quot;match_phrase_prefix&quot;: {\n        &quot;parent_question_text&quot;: {\n            &quot;query&quot;: &quot;what is th&quot;\n        }\n    }\n}\n</code></pre>\n<p>}</p>\n<p>I came up with the following code :-</p>\n<pre><code>QueryBuilders.matchPhrasePrefixQuery(&quot;parent_question_text&quot;,&quot;what is th&quot;);\n</code></pre>\n<p>But, when I run the code its throwing the following exception:-</p>\n<pre> ElasticsearchStatusException[Elasticsearch exception [type=parsing_exception, reason=[match_phrase_prefix] query does not support [zero_terms_query]]]\n    at org.elasticsearch.rest.BytesRestResponse.errorFromXContent(BytesRestResponse.java:176)\n    at org.elasticsearch.client.RestHighLevelClient.parseEntity(RestHighLevelClient.java:1933)\n    at org.elasticsearch.client.RestHighLevelClient.parseResponseException(RestHighLevelClient.java:1910)\n    at org.elasticsearch.client.RestHighLevelClient.internalPerformRequest(RestHighLevelClient.java:1667)\n    at org.elasticsearch.client.RestHighLevelClient.performRequest(RestHighLevelClient.java:1624)\n    at org.elasticsearch.client.RestHighLevelClient.performRequestAndParseEntity(RestHighLevelClient.java:1594)\n    at org.elasticsearch.client.RestHighLevelClient.search(RestHighLevelClient.java:1110)\n    at com.extramarks.questionMSA.services.QuestionElasticsearchServiceImpl.questionSearchByIdAndText(QuestionElasticsearchServiceImpl.java:112)\n    at com.extramarks.questionMSA.controller.QuestionElasticsearchController.questionSearchByIdAndText(QuestionElasticsearchController.java:52)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1064)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at com.extramarks.questionMSA.filters.RequestCachingFilter.doFilterInternal(RequestCachingFilter.java:30)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1726)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:829)\n    Suppressed: org.elasticsearch.client.ResponseException: method [POST], host [http://34.100.181.31:9200], URI [/question/_search?typed_keys=true&max_concurrent_shard_requests=5&ignore_unavailable=false&expand_wildcards=open&allow_no_indices=true&ignore_throttled=true&search_type=query_then_fetch&batched_reduce_size=512&ccs_minimize_roundtrips=true], status line [HTTP/1.1 400 Bad Request]\n{\"error\":{\"root_cause\":[{\"type\":\"parsing_exception\",\"reason\":\"[match_phrase_prefix] query does not support [zero_terms_query]\",\"line\":1,\"col\":124}],\"type\":\"parsing_exception\",\"reason\":\"[match_phrase_prefix] query does not support [zero_terms_query]\",\"line\":1,\"col\":124},\"status\":400}\n        at org.elasticsearch.client.RestClient.convertResponse(RestClient.java:326)\n        at org.elasticsearch.client.RestClient.performRequest(RestClient.java:296)\n        at org.elasticsearch.client.RestClient.performRequest(RestClient.java:270)\n        at org.elasticsearch.client.RestHighLevelClient.internalPerformRequest(RestHighLevelClient.java:1654)\n        ... 55 more\n</pre>\n<p>The query that is generated with the following code is :-</p>\n<pre><code>{\n&quot;match_phrase_prefix&quot;: {\n    &quot;parent_question_text&quot;: {\n        &quot;query&quot;: &quot;what is the&quot;,\n        &quot;slop&quot;: 0,\n        &quot;max_expansions&quot;: 50,\n        &quot;zero_terms_query&quot;: &quot;NONE&quot;,\n        &quot;boost&quot;: 1.0\n    }\n}\n</code></pre>\n<p>}</p>\n<p>I tired setting zero_terms_query to NONE,ALL, NULL in QueryBuilder but still getting same exception.</p>\n"},{"tags":["java","groovy","memory-leaks","classloader","rest-assured"],"answers":[{"tags":[],"owner":{"account_id":2269593,"reputation":43917,"user_id":1997376,"accept_rate":100,"display_name":"Nicolas Filotto"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677866973,"creation_date":1677866973,"answer_id":75630512,"question_id":75629086,"body_markdown":"To fix the leak, we need to remove the associated value for all existing instances of `ClassValue` by calling `ClassValue#remove(Class)`.\r\n\r\nIn `Groovy`, the easiest way I found is by getting all the `ClassInfo` and calling `InvokerHelper.removeClass(Class)` on each underlying class when closing the `ClassLoader` as next:\r\n\r\n    for (ClassInfo ci : ClassInfo.getAllClassInfo()) {\r\n        InvokerHelper.removeClass(ci.getTheClass());\r\n    }\r\n\r\n\r\n","title":"How to prevent ClassLoader leaks when using ClassValue?","body":"<p>To fix the leak, we need to remove the associated value for all existing instances of <code>ClassValue</code> by calling <code>ClassValue#remove(Class)</code>.</p>\n<p>In <code>Groovy</code>, the easiest way I found is by getting all the <code>ClassInfo</code> and calling <code>InvokerHelper.removeClass(Class)</code> on each underlying class when closing the <code>ClassLoader</code> as next:</p>\n<pre><code>for (ClassInfo ci : ClassInfo.getAllClassInfo()) {\n    InvokerHelper.removeClass(ci.getTheClass());\n}\n</code></pre>\n"}],"owner":{"account_id":2269593,"reputation":43917,"user_id":1997376,"accept_rate":100,"display_name":"Nicolas Filotto"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":256,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75630512,"answer_count":1,"score":1,"last_activity_date":1677866973,"creation_date":1677857829,"question_id":75629086,"body_markdown":"For my tests, I&#39;m using rest-assured which is partially written in Groovy. \r\nIn my application, I use a custom `ClassLoader` to load rest-assured and Groovy classes, after each test, the `ClassLoader` is closed and ready to be collected by the GC. \r\n\r\nIn case, I launch my test with `-Dgroovy.use.classvalue=false`, the class `GroovyClassValuePreJava7` is used which is the Groovy implementation of `ClassValue`, the `ClassLoader`s are properly removed from the heap but when I launch my test with `-Dgroovy.use.classvalue=true`, the class `GroovyClassValueJava7` is used which is a subtype of `ClassValue`, I end up with an OOME.\r\n\r\nI can see thanks to my profiler that each `ClassLoader` is actually retained by a JNI Global Reference to each primitive class (`void.class`, `float.class`, `boolean.class`, `int.class`, `double.class`, `long.class`, `char.class`, `byte.class`).\r\n\r\n[![JNI Global References][1]][1]\r\n\r\nIf I naively call `InvokerHelper.removeClass(Class)` on each of these classes, to clear the `ClassValueMap`, my `ClassLoaders` don&#39;t have any GC root anymore but unfortunately, they are still in the heap.\r\n\r\nMy test class is the following:\r\n\r\n```\r\nclass ClassLoaderLeakTest {\r\n\r\n    ...\r\n\r\n    private CustomClassLoader cl;\r\n\r\n    @BeforeEach\r\n    void configure() {\r\n        cl = new CustomClassLoader();\r\n    }\r\n\r\n    @AfterEach\r\n    void clean() throws Exception {\r\n        cl.close();\r\n        cl = null;\r\n    }\r\n\r\n    @RepeatedTest(100)\r\n    void test() throws Exception {\r\n        cl.loadClass(&quot;org.example.Main&quot;).getMethod(&quot;callTest&quot;).invoke(null);\r\n    }\r\n}\r\n```\r\n\r\nThe `Main` class is a simple rest-assured test:\r\n\r\n```\r\npublic class Main {\r\n    public static void callTest() {\r\n        RestAssured.given()\r\n                .when().get(&quot;/hello&quot;)\r\n                .then()\r\n                .statusCode(200)\r\n                .body(is(&quot;hello&quot;));\r\n    }\r\n}\r\n```\r\n\r\nThe class `CustomClassLoader` is basically an `URLClassLoader` that loads jar files from a specific lib folder:\r\n\r\n```\r\npublic class CustomClassLoader extends URLClassLoader {\r\n\r\n    public CustomClassLoader() {\r\n        super(urls(), null);\r\n    }\r\n\r\n    private static URL[] urls() {\r\n        Function&lt;URI, URL&gt; toURL = uri -&gt; {\r\n            try {\r\n                return uri.toURL();\r\n            } catch (MalformedURLException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        };\r\n        List&lt;URL&gt; l = Arrays.stream(\r\n            Objects.requireNonNull(new File(&quot;./lib&quot;).listFiles())\r\n        )\r\n                .map(File::getAbsoluteFile)\r\n                .map(File::toURI)\r\n                .map(toURL).collect(Collectors.toList());\r\n        l.add(\r\n            toURL.apply(new File(&quot;./target/classes&quot;).getAbsoluteFile().toURI())\r\n        );\r\n        return l.toArray(URL[]::new);\r\n    }\r\n}\r\n```\r\n\r\nI created [a small project][2] to reproduce, any idea/help is more than welcome.\r\n\r\nWhat could be the root cause of this `ClassLoader` leak?\r\n\r\nI also tried to remove the soft, weak, and phantom references to the `ClassLoader`s but it did not change anything, I still have the `ClassLoader`s in the heap even without a path to GC roots whatever the type of reference.\r\n\r\n  [1]: https://i.stack.imgur.com/DQNw6.png\r\n  [2]: https://github.com/essobedo/testCLLeak","title":"How to prevent ClassLoader leaks when using ClassValue?","body":"<p>For my tests, I'm using rest-assured which is partially written in Groovy.\nIn my application, I use a custom <code>ClassLoader</code> to load rest-assured and Groovy classes, after each test, the <code>ClassLoader</code> is closed and ready to be collected by the GC.</p>\n<p>In case, I launch my test with <code>-Dgroovy.use.classvalue=false</code>, the class <code>GroovyClassValuePreJava7</code> is used which is the Groovy implementation of <code>ClassValue</code>, the <code>ClassLoader</code>s are properly removed from the heap but when I launch my test with <code>-Dgroovy.use.classvalue=true</code>, the class <code>GroovyClassValueJava7</code> is used which is a subtype of <code>ClassValue</code>, I end up with an OOME.</p>\n<p>I can see thanks to my profiler that each <code>ClassLoader</code> is actually retained by a JNI Global Reference to each primitive class (<code>void.class</code>, <code>float.class</code>, <code>boolean.class</code>, <code>int.class</code>, <code>double.class</code>, <code>long.class</code>, <code>char.class</code>, <code>byte.class</code>).</p>\n<p><a href=\"https://i.stack.imgur.com/DQNw6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DQNw6.png\" alt=\"JNI Global References\" /></a></p>\n<p>If I naively call <code>InvokerHelper.removeClass(Class)</code> on each of these classes, to clear the <code>ClassValueMap</code>, my <code>ClassLoaders</code> don't have any GC root anymore but unfortunately, they are still in the heap.</p>\n<p>My test class is the following:</p>\n<pre><code>class ClassLoaderLeakTest {\n\n    ...\n\n    private CustomClassLoader cl;\n\n    @BeforeEach\n    void configure() {\n        cl = new CustomClassLoader();\n    }\n\n    @AfterEach\n    void clean() throws Exception {\n        cl.close();\n        cl = null;\n    }\n\n    @RepeatedTest(100)\n    void test() throws Exception {\n        cl.loadClass(&quot;org.example.Main&quot;).getMethod(&quot;callTest&quot;).invoke(null);\n    }\n}\n</code></pre>\n<p>The <code>Main</code> class is a simple rest-assured test:</p>\n<pre><code>public class Main {\n    public static void callTest() {\n        RestAssured.given()\n                .when().get(&quot;/hello&quot;)\n                .then()\n                .statusCode(200)\n                .body(is(&quot;hello&quot;));\n    }\n}\n</code></pre>\n<p>The class <code>CustomClassLoader</code> is basically an <code>URLClassLoader</code> that loads jar files from a specific lib folder:</p>\n<pre><code>public class CustomClassLoader extends URLClassLoader {\n\n    public CustomClassLoader() {\n        super(urls(), null);\n    }\n\n    private static URL[] urls() {\n        Function&lt;URI, URL&gt; toURL = uri -&gt; {\n            try {\n                return uri.toURL();\n            } catch (MalformedURLException e) {\n                throw new RuntimeException(e);\n            }\n        };\n        List&lt;URL&gt; l = Arrays.stream(\n            Objects.requireNonNull(new File(&quot;./lib&quot;).listFiles())\n        )\n                .map(File::getAbsoluteFile)\n                .map(File::toURI)\n                .map(toURL).collect(Collectors.toList());\n        l.add(\n            toURL.apply(new File(&quot;./target/classes&quot;).getAbsoluteFile().toURI())\n        );\n        return l.toArray(URL[]::new);\n    }\n}\n</code></pre>\n<p>I created <a href=\"https://github.com/essobedo/testCLLeak\" rel=\"nofollow noreferrer\">a small project</a> to reproduce, any idea/help is more than welcome.</p>\n<p>What could be the root cause of this <code>ClassLoader</code> leak?</p>\n<p>I also tried to remove the soft, weak, and phantom references to the <code>ClassLoader</code>s but it did not change anything, I still have the <code>ClassLoader</code>s in the heap even without a path to GC roots whatever the type of reference.</p>\n"},{"tags":["java","spring","api","amazon-s3","multipart"],"owner":{"account_id":21274254,"reputation":407,"user_id":15653306,"display_name":"Routfin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":224,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677866644,"creation_date":1677866644,"question_id":75630469,"body_markdown":"I have a post in my products controller, I send requests by RequestBody from productDto and I send an image by file through my postman to be saved in amazon s3. But when I make the request, I get the error\r\n\r\n``` \r\n doesn&#39;t contain a multipart/form-data or multipart/mixed stream, content type header is application/json\r\n```\r\nHow can I resolve this? Would this be the best way to upload an image file?\r\n\r\nproductController\r\n\r\n```\r\npackage com.api.business_manager_api.Controllers;\r\n\r\nimport com.api.business_manager_api.Dtos.ProductDto;\r\nimport com.api.business_manager_api.Mappers.ProductMapper;\r\nimport com.api.business_manager_api.Models.CategoryModel;\r\nimport com.api.business_manager_api.Models.ProductModel;\r\nimport com.api.business_manager_api.Services.CategoryService;\r\nimport com.api.business_manager_api.Services.ProductService;\r\nimport jakarta.validation.Valid;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.MediaType;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.*;\r\nimport org.springframework.web.multipart.MultipartFile;\r\nimport software.amazon.awssdk.services.s3.S3Client;\r\nimport software.amazon.awssdk.services.s3.model.PutObjectRequest;\r\n\r\nimport java.util.List;\r\nimport java.util.Optional;\r\nimport java.util.UUID;\r\n\r\n@RestController\r\n@CrossOrigin(origins = &quot;*&quot;, maxAge = 3600)\r\n@RequestMapping(&quot;/product&quot;)\r\npublic class ProductController {\r\n    final ProductService productService;\r\n    final CategoryService categoryService;\r\n    final ProductMapper productMapper;\r\n    final S3Client s3Client;\r\n\r\n    private final String BUCKET_NAME = &quot;awstockproducts&quot; + System.currentTimeMillis();\r\n\r\n    public ProductController(ProductService productService, ProductMapper productMapper, CategoryService categoryService, S3Client s3Client) {\r\n        this.productService = productService;\r\n        this.productMapper = productMapper;\r\n        this.categoryService = categoryService;\r\n        this.s3Client = s3Client;\r\n    }\r\n    @PostMapping()\r\n    public ResponseEntity&lt;Object&gt; saveProduct (@RequestPart(&quot;productDto&quot;) @Valid ProductDto productDto, @RequestPart(&quot;file&quot;)MultipartFile file) {\r\n        try {\r\n            if (productService.existsByProduct(productDto.getProduct())) {\r\n                return ResponseEntity.status(HttpStatus.CONFLICT).body(&quot;Product already exists!&quot;);\r\n            }\r\n            ProductModel productModel = productMapper.toProductModel(productDto);\r\n            CategoryModel categoryModel = categoryService.findById(productDto.getProductCategory().getCategory_id())\r\n                    .orElseThrow(() -&gt; new RuntimeException(&quot;Category not found&quot;));\r\n            productModel.setProductCategory(categoryModel);\r\n\r\n            String fileName = &quot;/products/images/&quot; + UUID.randomUUID().toString() + &quot;-&quot; + file.getOriginalFilename();\r\n\r\n            s3Client.putObject(PutObjectRequest\r\n                            .builder()\r\n                            .bucket(BUCKET_NAME)\r\n                            .key(fileName)\r\n                            .build(),\r\n                        software.amazon.awssdk.core.sync.RequestBody.fromString(&quot;Testing java sdk&quot;));\r\n            return ResponseEntity.status(HttpStatus.CREATED).body(productService.save(productModel));\r\n        } catch (Exception e) {\r\n            return ResponseEntity.status(HttpStatus.CONFLICT).body(&quot;Cannot create product. Check if the fields sent in your request are correct.&quot;);\r\n        }\r\n    }\r\n\r\n    @GetMapping\r\n    public ResponseEntity&lt;List&lt;ProductModel&gt;&gt; getAllProducts() {\r\n        return ResponseEntity.status(HttpStatus.OK).body(productService.findAll());\r\n    }\r\n\r\n    @GetMapping(&quot;/{id}&quot;)\r\n    public ResponseEntity&lt;Object&gt; getOneProduct(@PathVariable(value = &quot;id&quot;)UUID id) {\r\n        Optional&lt;ProductModel&gt; productModelOptional = productService.findById(id);\r\n        if (!productModelOptional.isPresent()) {\r\n            return ResponseEntity.status(HttpStatus.NOT_FOUND).body(&quot;Product not found&quot;);\r\n        }\r\n        return ResponseEntity.status(HttpStatus.OK).body(productModelOptional.get());\r\n    }\r\n\r\n    @PutMapping(&quot;/{id}&quot;)\r\n    public ResponseEntity&lt;Object&gt; updateProduct(@PathVariable(value = &quot;id&quot;) UUID id,\r\n                                                @RequestBody @Valid ProductDto productDto) {\r\n        Optional&lt;ProductModel&gt; productModelOptional = productService.findById(id);\r\n        if (!productModelOptional.isPresent()) {\r\n            return ResponseEntity.status(HttpStatus.NOT_FOUND).body(&quot;Product not found!&quot;);\r\n        }\r\n        ProductModel productModel = productModelOptional.get();\r\n        productModel.setProduct(productDto.getProduct());\r\n        productModel.setDescription(productDto.getDescription());\r\n        productModel.setPrice(productDto.getPrice());\r\n        productModel.setExtraPrice(productDto.getExtraPrice());\r\n        productModel.setStock(productDto.getStock());\r\n        productModel.setProductCategory(productDto.getProductCategory());\r\n\r\n        return ResponseEntity.status(HttpStatus.OK).body(productService.save(productModel));\r\n    }\r\n\r\n    @DeleteMapping(&quot;/{id}&quot;)\r\n    public ResponseEntity&lt;Object&gt; deleteProduct(@PathVariable(value = &quot;id&quot;) UUID id) {\r\n        Optional&lt;ProductModel&gt; productModelOptional = productService.findById(id);\r\n        if (!productModelOptional.isPresent()) {\r\n            return ResponseEntity.status(HttpStatus.NOT_FOUND).body(&quot;Product not found!&quot;);\r\n        }\r\n        productService.delete(productModelOptional.get());\r\n        return ResponseEntity.status(HttpStatus.OK).body(&quot;Product deleted succesfully!&quot;);\r\n    }\r\n}\r\n\r\n```\r\n\r\nMaybe it&#39;s bad practice to send a multipart file along with a requestBody?\r\n","title":"why am i getting the error the request doesn&#39;t contain a multipart/form-data or multipart/mixed stream, content type header is application/json?","body":"<p>I have a post in my products controller, I send requests by RequestBody from productDto and I send an image by file through my postman to be saved in amazon s3. But when I make the request, I get the error</p>\n<pre><code> doesn't contain a multipart/form-data or multipart/mixed stream, content type header is application/json\n</code></pre>\n<p>How can I resolve this? Would this be the best way to upload an image file?</p>\n<p>productController</p>\n<pre><code>package com.api.business_manager_api.Controllers;\n\nimport com.api.business_manager_api.Dtos.ProductDto;\nimport com.api.business_manager_api.Mappers.ProductMapper;\nimport com.api.business_manager_api.Models.CategoryModel;\nimport com.api.business_manager_api.Models.ProductModel;\nimport com.api.business_manager_api.Services.CategoryService;\nimport com.api.business_manager_api.Services.ProductService;\nimport jakarta.validation.Valid;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\nimport org.springframework.web.multipart.MultipartFile;\nimport software.amazon.awssdk.services.s3.S3Client;\nimport software.amazon.awssdk.services.s3.model.PutObjectRequest;\n\nimport java.util.List;\nimport java.util.Optional;\nimport java.util.UUID;\n\n@RestController\n@CrossOrigin(origins = &quot;*&quot;, maxAge = 3600)\n@RequestMapping(&quot;/product&quot;)\npublic class ProductController {\n    final ProductService productService;\n    final CategoryService categoryService;\n    final ProductMapper productMapper;\n    final S3Client s3Client;\n\n    private final String BUCKET_NAME = &quot;awstockproducts&quot; + System.currentTimeMillis();\n\n    public ProductController(ProductService productService, ProductMapper productMapper, CategoryService categoryService, S3Client s3Client) {\n        this.productService = productService;\n        this.productMapper = productMapper;\n        this.categoryService = categoryService;\n        this.s3Client = s3Client;\n    }\n    @PostMapping()\n    public ResponseEntity&lt;Object&gt; saveProduct (@RequestPart(&quot;productDto&quot;) @Valid ProductDto productDto, @RequestPart(&quot;file&quot;)MultipartFile file) {\n        try {\n            if (productService.existsByProduct(productDto.getProduct())) {\n                return ResponseEntity.status(HttpStatus.CONFLICT).body(&quot;Product already exists!&quot;);\n            }\n            ProductModel productModel = productMapper.toProductModel(productDto);\n            CategoryModel categoryModel = categoryService.findById(productDto.getProductCategory().getCategory_id())\n                    .orElseThrow(() -&gt; new RuntimeException(&quot;Category not found&quot;));\n            productModel.setProductCategory(categoryModel);\n\n            String fileName = &quot;/products/images/&quot; + UUID.randomUUID().toString() + &quot;-&quot; + file.getOriginalFilename();\n\n            s3Client.putObject(PutObjectRequest\n                            .builder()\n                            .bucket(BUCKET_NAME)\n                            .key(fileName)\n                            .build(),\n                        software.amazon.awssdk.core.sync.RequestBody.fromString(&quot;Testing java sdk&quot;));\n            return ResponseEntity.status(HttpStatus.CREATED).body(productService.save(productModel));\n        } catch (Exception e) {\n            return ResponseEntity.status(HttpStatus.CONFLICT).body(&quot;Cannot create product. Check if the fields sent in your request are correct.&quot;);\n        }\n    }\n\n    @GetMapping\n    public ResponseEntity&lt;List&lt;ProductModel&gt;&gt; getAllProducts() {\n        return ResponseEntity.status(HttpStatus.OK).body(productService.findAll());\n    }\n\n    @GetMapping(&quot;/{id}&quot;)\n    public ResponseEntity&lt;Object&gt; getOneProduct(@PathVariable(value = &quot;id&quot;)UUID id) {\n        Optional&lt;ProductModel&gt; productModelOptional = productService.findById(id);\n        if (!productModelOptional.isPresent()) {\n            return ResponseEntity.status(HttpStatus.NOT_FOUND).body(&quot;Product not found&quot;);\n        }\n        return ResponseEntity.status(HttpStatus.OK).body(productModelOptional.get());\n    }\n\n    @PutMapping(&quot;/{id}&quot;)\n    public ResponseEntity&lt;Object&gt; updateProduct(@PathVariable(value = &quot;id&quot;) UUID id,\n                                                @RequestBody @Valid ProductDto productDto) {\n        Optional&lt;ProductModel&gt; productModelOptional = productService.findById(id);\n        if (!productModelOptional.isPresent()) {\n            return ResponseEntity.status(HttpStatus.NOT_FOUND).body(&quot;Product not found!&quot;);\n        }\n        ProductModel productModel = productModelOptional.get();\n        productModel.setProduct(productDto.getProduct());\n        productModel.setDescription(productDto.getDescription());\n        productModel.setPrice(productDto.getPrice());\n        productModel.setExtraPrice(productDto.getExtraPrice());\n        productModel.setStock(productDto.getStock());\n        productModel.setProductCategory(productDto.getProductCategory());\n\n        return ResponseEntity.status(HttpStatus.OK).body(productService.save(productModel));\n    }\n\n    @DeleteMapping(&quot;/{id}&quot;)\n    public ResponseEntity&lt;Object&gt; deleteProduct(@PathVariable(value = &quot;id&quot;) UUID id) {\n        Optional&lt;ProductModel&gt; productModelOptional = productService.findById(id);\n        if (!productModelOptional.isPresent()) {\n            return ResponseEntity.status(HttpStatus.NOT_FOUND).body(&quot;Product not found!&quot;);\n        }\n        productService.delete(productModelOptional.get());\n        return ResponseEntity.status(HttpStatus.OK).body(&quot;Product deleted succesfully!&quot;);\n    }\n}\n\n</code></pre>\n<p>Maybe it's bad practice to send a multipart file along with a requestBody?</p>\n"},{"tags":["java","frequency","alphabet"],"answers":[{"tags":[],"owner":{"account_id":19720197,"reputation":483,"user_id":14438712,"display_name":"null_awe"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677866644,"creation_date":1605832713,"answer_id":64922109,"question_id":64922058,"body_markdown":"Percentage is `ratio * 100` (`1/2 = 0.5 = (0.5 * 100)% = 50%`), and the ratio here is `lettersLabels[i] / totalLetters`. So, in order to find the percentage, you just use `lettersFrequency[i] = (double) lettersLabels[i] / (double) totalLetters * 100;`. So, you might need a variable `totalLetters` at the beginning to count the number of letters.\r\n\r\nYou have a mistake in your code, which is initializing arrays with `0`. You have already initialized the arrays with `int[] arr = new int[26];`, so you don&#39;t need those two lines, which will give an error since initializing arrays with an `int` is the wrong type. Also, when setting some part of `lettersFrequency` to something, you need to specify the index, like `lettersFrequency[i]`, and instead of using `characters` when its out of scope to get the characters, so instead you have to use the `letterLabels` array.","title":"I&#39;m trying to count the percentage of every letter in a document by using a scanner, but I can&#39;t figure out how to correctly compute and display it","body":"<p>Percentage is <code>ratio * 100</code> (<code>1/2 = 0.5 = (0.5 * 100)% = 50%</code>), and the ratio here is <code>lettersLabels[i] / totalLetters</code>. So, in order to find the percentage, you just use <code>lettersFrequency[i] = (double) lettersLabels[i] / (double) totalLetters * 100;</code>. So, you might need a variable <code>totalLetters</code> at the beginning to count the number of letters.</p>\n<p>You have a mistake in your code, which is initializing arrays with <code>0</code>. You have already initialized the arrays with <code>int[] arr = new int[26];</code>, so you don't need those two lines, which will give an error since initializing arrays with an <code>int</code> is the wrong type. Also, when setting some part of <code>lettersFrequency</code> to something, you need to specify the index, like <code>lettersFrequency[i]</code>, and instead of using <code>characters</code> when its out of scope to get the characters, so instead you have to use the <code>letterLabels</code> array.</p>\n"},{"tags":[],"owner":{"account_id":3868372,"reputation":4436,"user_id":3204335,"display_name":"MD Ruhul Amin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1605833903,"creation_date":1605833542,"answer_id":64922201,"question_id":64922058,"body_markdown":"Here I&#39;ve fix some of the errors with description see the code comments for explanation :\r\n```\r\n        int [ ]lettersLabels = new int [26];\r\n        int [ ]lettersFrequency = new int [26];\r\n        String line;\r\n        \r\n        int totalLetter =0; // needed to calculate %\r\n\r\n// No need to initialize, it&#39;s already initialized with 0 values.\r\n// remove those lines.\r\n//initialize arrays\r\n//        letterLabels = 0;\r\n//        lettersFrequency = 0;\r\n\r\n        Scanner sc = new Scanner(constitution);\r\n        \r\n         while(sc.hasNextLine())\r\n         {\r\n            line = sc.nextLine();\r\n            // need to lower case the current line\r\n            line = line.toLowerCase();\r\n            char[] characters = line.toCharArray();\r\n         \r\n            for (int i = 0; i&lt; characters.length ; i++) \r\n            {\r\n                if((characters[i] &gt;=&#39;a&#39;) &amp;&amp; (characters[i]&lt;=&#39;z&#39;))\r\n                {\r\n                     // lets count the letter frequency.\r\n                     totalLetter++;\r\n                     lettersFrequency[characters[i] -&#39;a&#39; ]++;\r\n                }\r\n            }\r\n         }\r\n\r\n         // get rid of divide by zero exception\r\n         if(totalLetter ==0) totalLetter =1;\r\n         \r\n         for (int i = 0; i &lt; 26; i++) \r\n         {\r\n          char ch = &#39;a&#39;+i;\r\n          // let&#39;s count the parentage of each letter.\r\n          double parcentage = (lettersFrequency[i]*100.00)/totalLetter;\r\n          System.out.println(&quot;parcentage of &quot;+ ch+ &quot; is: &quot; +lettersFrequency +&quot;%&quot;);\r\n         }\r\n```","title":"I&#39;m trying to count the percentage of every letter in a document by using a scanner, but I can&#39;t figure out how to correctly compute and display it","body":"<p>Here I've fix some of the errors with description see the code comments for explanation :</p>\n<pre><code>        int [ ]lettersLabels = new int [26];\n        int [ ]lettersFrequency = new int [26];\n        String line;\n        \n        int totalLetter =0; // needed to calculate %\n\n// No need to initialize, it's already initialized with 0 values.\n// remove those lines.\n//initialize arrays\n//        letterLabels = 0;\n//        lettersFrequency = 0;\n\n        Scanner sc = new Scanner(constitution);\n        \n         while(sc.hasNextLine())\n         {\n            line = sc.nextLine();\n            // need to lower case the current line\n            line = line.toLowerCase();\n            char[] characters = line.toCharArray();\n         \n            for (int i = 0; i&lt; characters.length ; i++) \n            {\n                if((characters[i] &gt;='a') &amp;&amp; (characters[i]&lt;='z'))\n                {\n                     // lets count the letter frequency.\n                     totalLetter++;\n                     lettersFrequency[characters[i] -'a' ]++;\n                }\n            }\n         }\n\n         // get rid of divide by zero exception\n         if(totalLetter ==0) totalLetter =1;\n         \n         for (int i = 0; i &lt; 26; i++) \n         {\n          char ch = 'a'+i;\n          // let's count the parentage of each letter.\n          double parcentage = (lettersFrequency[i]*100.00)/totalLetter;\n          System.out.println(&quot;parcentage of &quot;+ ch+ &quot; is: &quot; +lettersFrequency +&quot;%&quot;);\n         }\n</code></pre>\n"}],"owner":{"account_id":19574403,"reputation":67,"user_id":14324795,"display_name":"Anna M"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1677866644,"creation_date":1605832311,"question_id":64922058,"body_markdown":"First I uploaded the file I&#39;m using, the constitution. Then, I created two arrays, one for the length of the alphabet, the second to compute the frequency. I created a while loop to read every line in the document and count the frequency of every letter, I just can&#39;t figure out how to compute each as a percentage of each letter because after I&#39;m going to put it into a bar chart.\r\n\r\n```     File contitution = new File (&quot;Constitution.txt&quot;);\r\n        int [ ]lettersLabels = new int [26];\r\n        int [ ]lettersFrequency = new int [26];\r\n        String line;\r\n\r\n//initialize arrays\r\n        letterLabels = 0;\r\n        lettersFrequency = 0;\r\n\r\n        Scanner sc = new Scanner(constitution);\r\n\r\n         while(sc.hasNextLine())\r\n         {\r\n            line = sc.nextLine();\r\n            line = sc.toLowerCase();\r\n            char[] characters = line.toCharArray();\r\n         \r\n            for (int i = 0; i&lt; characters.length ; i++) \r\n            {\r\n                if((characters[i] &gt;=&#39;a&#39;) &amp;&amp; (characters[i]&lt;=&#39;z&#39;))\r\n                {\r\n                     lettersLabels[characters[i] -&#39;a&#39; ]++;\r\n                }\r\n            }\r\n         }\r\n         \r\n         for (int i = 0; i &lt; 26; i++) \r\n         {\r\n          lettersFrequency = &#39;a&#39; + [characters[i] -&#39;a&#39; ]++;\r\n          lettersFrequency = lettersFrequency / 100;\r\n          System.out.println(lettersFrequency);\r\n         }\r\n\r\n```","title":"I&#39;m trying to count the percentage of every letter in a document by using a scanner, but I can&#39;t figure out how to correctly compute and display it","body":"<p>First I uploaded the file I'm using, the constitution. Then, I created two arrays, one for the length of the alphabet, the second to compute the frequency. I created a while loop to read every line in the document and count the frequency of every letter, I just can't figure out how to compute each as a percentage of each letter because after I'm going to put it into a bar chart.</p>\n<pre><code>        int [ ]lettersLabels = new int [26];\n        int [ ]lettersFrequency = new int [26];\n        String line;\n\n//initialize arrays\n        letterLabels = 0;\n        lettersFrequency = 0;\n\n        Scanner sc = new Scanner(constitution);\n\n         while(sc.hasNextLine())\n         {\n            line = sc.nextLine();\n            line = sc.toLowerCase();\n            char[] characters = line.toCharArray();\n         \n            for (int i = 0; i&lt; characters.length ; i++) \n            {\n                if((characters[i] &gt;='a') &amp;&amp; (characters[i]&lt;='z'))\n                {\n                     lettersLabels[characters[i] -'a' ]++;\n                }\n            }\n         }\n         \n         for (int i = 0; i &lt; 26; i++) \n         {\n          lettersFrequency = 'a' + [characters[i] -'a' ]++;\n          lettersFrequency = lettersFrequency / 100;\n          System.out.println(lettersFrequency);\n         }\n\n</code></pre>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":256027,"reputation":4511,"user_id":536466,"accept_rate":75,"display_name":"Julian Suarez"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1397662241,"creation_date":1397662241,"answer_id":23113860,"question_id":23113238,"body_markdown":"Store the picture on a file, save the filename of the file on a bundle and then when restored from a bundle get the filename, then get the picture from the file and put it on your imageView.\r\n\r\nBTW, Have you looked at http://square.github.io/picasso/, or https://github.com/koush/ion","title":"Any way to save the state of a imageView that show an image retrieved from url?","body":"<p>Store the picture on a file, save the filename of the file on a bundle and then when restored from a bundle get the filename, then get the picture from the file and put it on your imageView.</p>\n\n<p>BTW, Have you looked at <a href=\"http://square.github.io/picasso/\" rel=\"nofollow\">http://square.github.io/picasso/</a>, or <a href=\"https://github.com/koush/ion\" rel=\"nofollow\">https://github.com/koush/ion</a></p>\n"}],"owner":{"account_id":207926,"reputation":1576,"user_id":458097,"accept_rate":27,"display_name":"arpho"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677866629,"creation_date":1397660647,"question_id":23113238,"body_markdown":"In my application I show a picture retrieved from url, but it is lost after the device is rotated, I save the state of the textview inmy application, using bundle, there is a way to save and recover the image?","title":"Any way to save the state of a imageView that show an image retrieved from url?","body":"<p>In my application I show a picture retrieved from url, but it is lost after the device is rotated, I save the state of the textview inmy application, using bundle, there is a way to save and recover the image?</p>\n"},{"tags":["java","spring-boot","hibernate","kotlin","spring-data-jpa"],"comments":[{"owner":{"account_id":6104455,"reputation":4456,"user_id":4762502,"accept_rate":73,"display_name":"Gaurav Jeswani"},"score":0,"creation_date":1677238746,"post_id":75556114,"comment_id":133302973,"body_markdown":"It intermittently, create issues with the list, as it internally uses hibernate, prefer to use native query in this case.","body":"It intermittently, create issues with the list, as it internally uses hibernate, prefer to use native query in this case."},{"owner":{"account_id":13722742,"reputation":16988,"user_id":10134209,"display_name":"gidds"},"score":0,"creation_date":1677278446,"post_id":75556114,"comment_id":133313138,"body_markdown":"What is the exact error message (the question title might have mangled it a little), and where is it thrown?It might also help to see your `Recipe` class.","body":"What is the exact error message (the question title might have mangled it a little), and where is it thrown?It might also help to see your <code>Recipe</code> class."},{"owner":{"account_id":16664048,"reputation":473,"user_id":12043263,"display_name":"Just A Question"},"score":0,"creation_date":1677344773,"post_id":75556114,"comment_id":133321069,"body_markdown":"I  added the error log. The recipe class is really basic, but I can add it too, if it would help you.","body":"I  added the error log. The recipe class is really basic, but I can add it too, if it would help you."},{"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"score":0,"creation_date":1677833938,"post_id":75556114,"comment_id":133419088,"body_markdown":"you can log the generated sql and then try to execute it in sqldeveloper, maybe you&#39;ll find something related to the mapping. https://www.baeldung.com/sql-logging-spring-boot","body":"you can log the generated sql and then try to execute it in sqldeveloper, maybe you&#39;ll find something related to the mapping. <a href=\"https://www.baeldung.com/sql-logging-spring-boot\" rel=\"nofollow noreferrer\">baeldung.com/sql-logging-spring-boot</a>"}],"answers":[{"comments":[{"owner":{"account_id":16664048,"reputation":473,"user_id":12043263,"display_name":"Just A Question"},"score":0,"creation_date":1677433162,"post_id":75572804,"comment_id":133332506,"body_markdown":"Looks good, I will test it out later. Basically all I want to achieve is to have optional parameters and thats my solution to solve this problem","body":"Looks good, I will test it out later. Basically all I want to achieve is to have optional parameters and thats my solution to solve this problem"},{"owner":{"account_id":16664048,"reputation":473,"user_id":12043263,"display_name":"Just A Question"},"score":0,"creation_date":1677923756,"post_id":75572804,"comment_id":133436015,"body_markdown":"Do you know which one of your solutions would be the best performance wise?","body":"Do you know which one of your solutions would be the best performance wise?"},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1677926090,"post_id":75572804,"comment_id":133436306,"body_markdown":"in general, attempt to cover all possible user inputs by a single query is not a good idea - typically, DBs maintain just a couple of execution plans for single SQL, thinking those plans will be optimal for all possible combinations of user input is too naive, so, from DB perspective the best option is to build specific query for specific input - that is option I.","body":"in general, attempt to cover all possible user inputs by a single query is not a good idea - typically, DBs maintain just a couple of execution plans for single SQL, thinking those plans will be optimal for all possible combinations of user input is too naive, so, from DB perspective the best option is to build specific query for specific input - that is option I."}],"tags":[],"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"comment_count":3,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1677866548,"creation_date":1677423275,"answer_id":75572804,"question_id":75556114,"body_markdown":"Since Hibernate team [completely redesigned query model in HBN6](https://vladmihalcea.com/hibernate-sqm-semantic-query-model/), that is expected something have stopped working, especially for cases like yours which actually looks like a hack/trick. Here I would suggest to ask a question on [HBN forum](https://discourse.hibernate.org/c/hibernate-orm/5).\r\n\r\n\r\nHowever, some workarounds do exist:\r\n\r\nI. idiomatic way to implement such queries is to use jpa specifications, something like:\r\n\r\n```java\r\npublic interface RecipeRepository extends JpaRepository&lt;Recipe, Long&gt;, JpaSpecificationExecutor&lt;Recipe&gt; {\r\n\r\n    default List&lt;Recipe&gt; findRecipesBy(List&lt;Long&gt; authorIds, List&lt;Long&gt; recipeIds) {\r\n        Specification&lt;Recipe&gt; specification = (root, cq, cb) -&gt; {\r\n            List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\r\n            if (authorIds != null &amp;&amp; !authorIds.isEmpty()) {\r\n                predicates.add(root.get(&quot;author&quot;).get(&quot;id&quot;).in(authorIds));\r\n            }\r\n            if (recipeIds != null &amp;&amp; !recipeIds.isEmpty()) {\r\n                predicates.add(root.get(&quot;id&quot;).in(recipeIds));\r\n            }\r\n            return cb.and(predicates.toArray(new Predicate[0]));\r\n        };\r\n        return findAll(specification);\r\n    }\r\n    \r\n}\r\n```\r\n\r\nII. trick with `coalesce` - seems to be applicable for PostgreSQL only:\r\n\r\n```java\r\n@Query(&quot;SELECT r FROM Recipe r WHERE &quot;\r\n            + &quot;(coalesce(:authorIds) is null or r.author.id in (:authorIds)) &quot;\r\n            + &quot;and (coalesce(:recipeIds) is null or r.id in (:recipeIds)) &quot;\r\n            + &quot;and (:minPrice is null or r.estimatedPrice &gt;= :minPrice) &quot;\r\n            + &quot;and (:maxPrice is null or r.estimatedPrice &lt;= :maxPrice) &quot;\r\n            + &quot;and ( cast(:beforeDate as timestamp) is null or r.createdAt &lt; cast(:beforeDate as timestamp)) &quot;\r\n            + &quot;and ( cast(:afterDate as timestamp) is null or r.createdAt &gt; cast(:afterDate as timestamp)) &quot;\r\n            + &quot;and (:minLikeCount is null or r.likeCount &gt;= :minLikeCount) &quot;\r\n            + &quot;and (coalesce(:categoryIds) is null or exists(select rc from r.categories rc where rc.id in (:categoryIds))) &quot;\r\n    )\r\n```\r\n\r\nIII. trick with SpEL - delegate null checks to SpEL:\r\n\r\n```\r\n@Query(&quot;SELECT r FROM Recipe r WHERE &quot;\r\n            + &quot;(:#{#authorIds == null} = true or r.author.id in (:authorIds)) &quot;\r\n            + &quot;and (:#{#recipeIds == null} = true or r.id in (:recipeIds)) &quot;\r\n            + &quot;and (:minPrice is null or r.estimatedPrice &gt;= :minPrice) &quot;\r\n            + &quot;and (:maxPrice is null or r.estimatedPrice &lt;= :maxPrice) &quot;\r\n            + &quot;and ( cast(:beforeDate as timestamp) is null or r.createdAt &lt; cast(:beforeDate as timestamp)) &quot;\r\n            + &quot;and ( cast(:afterDate as timestamp) is null or r.createdAt &gt; cast(:afterDate as timestamp)) &quot;\r\n            + &quot;and (:minLikeCount is null or r.likeCount &gt;= :minLikeCount) &quot;\r\n            + &quot;and (:#{#categoryIds == null} = true or exists(select rc from r.categories rc where rc.id in (:categoryIds))) &quot;\r\n    )\r\n\r\n```","title":"Hibernate randomly throws error: Cannot coerce value `[]` [java.util.ArrayList] as Long","body":"<p>Since Hibernate team <a href=\"https://vladmihalcea.com/hibernate-sqm-semantic-query-model/\" rel=\"noreferrer\">completely redesigned query model in HBN6</a>, that is expected something have stopped working, especially for cases like yours which actually looks like a hack/trick. Here I would suggest to ask a question on <a href=\"https://discourse.hibernate.org/c/hibernate-orm/5\" rel=\"noreferrer\">HBN forum</a>.</p>\n<p>However, some workarounds do exist:</p>\n<p>I. idiomatic way to implement such queries is to use jpa specifications, something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface RecipeRepository extends JpaRepository&lt;Recipe, Long&gt;, JpaSpecificationExecutor&lt;Recipe&gt; {\n\n    default List&lt;Recipe&gt; findRecipesBy(List&lt;Long&gt; authorIds, List&lt;Long&gt; recipeIds) {\n        Specification&lt;Recipe&gt; specification = (root, cq, cb) -&gt; {\n            List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\n            if (authorIds != null &amp;&amp; !authorIds.isEmpty()) {\n                predicates.add(root.get(&quot;author&quot;).get(&quot;id&quot;).in(authorIds));\n            }\n            if (recipeIds != null &amp;&amp; !recipeIds.isEmpty()) {\n                predicates.add(root.get(&quot;id&quot;).in(recipeIds));\n            }\n            return cb.and(predicates.toArray(new Predicate[0]));\n        };\n        return findAll(specification);\n    }\n    \n}\n</code></pre>\n<p>II. trick with <code>coalesce</code> - seems to be applicable for PostgreSQL only:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(&quot;SELECT r FROM Recipe r WHERE &quot;\n            + &quot;(coalesce(:authorIds) is null or r.author.id in (:authorIds)) &quot;\n            + &quot;and (coalesce(:recipeIds) is null or r.id in (:recipeIds)) &quot;\n            + &quot;and (:minPrice is null or r.estimatedPrice &gt;= :minPrice) &quot;\n            + &quot;and (:maxPrice is null or r.estimatedPrice &lt;= :maxPrice) &quot;\n            + &quot;and ( cast(:beforeDate as timestamp) is null or r.createdAt &lt; cast(:beforeDate as timestamp)) &quot;\n            + &quot;and ( cast(:afterDate as timestamp) is null or r.createdAt &gt; cast(:afterDate as timestamp)) &quot;\n            + &quot;and (:minLikeCount is null or r.likeCount &gt;= :minLikeCount) &quot;\n            + &quot;and (coalesce(:categoryIds) is null or exists(select rc from r.categories rc where rc.id in (:categoryIds))) &quot;\n    )\n</code></pre>\n<p>III. trick with SpEL - delegate null checks to SpEL:</p>\n<pre><code>@Query(&quot;SELECT r FROM Recipe r WHERE &quot;\n            + &quot;(:#{#authorIds == null} = true or r.author.id in (:authorIds)) &quot;\n            + &quot;and (:#{#recipeIds == null} = true or r.id in (:recipeIds)) &quot;\n            + &quot;and (:minPrice is null or r.estimatedPrice &gt;= :minPrice) &quot;\n            + &quot;and (:maxPrice is null or r.estimatedPrice &lt;= :maxPrice) &quot;\n            + &quot;and ( cast(:beforeDate as timestamp) is null or r.createdAt &lt; cast(:beforeDate as timestamp)) &quot;\n            + &quot;and ( cast(:afterDate as timestamp) is null or r.createdAt &gt; cast(:afterDate as timestamp)) &quot;\n            + &quot;and (:minLikeCount is null or r.likeCount &gt;= :minLikeCount) &quot;\n            + &quot;and (:#{#categoryIds == null} = true or exists(select rc from r.categories rc where rc.id in (:categoryIds))) &quot;\n    )\n\n</code></pre>\n"}],"owner":{"account_id":16664048,"reputation":473,"user_id":12043263,"display_name":"Just A Question"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3206,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":75572804,"answer_count":1,"score":7,"last_activity_date":1677866548,"creation_date":1677238666,"question_id":75556114,"body_markdown":"I&#39;m encountering unstable errors when using a parameter of type List with my repository methods. The issue seems to be related to the interoperability between Kotlin lists and Java. When I run my unit test, it fails randomly, and I suspect this has something to do with the MutableList returned by listOf() in Kotlin. More information can be found in this StackOverflow post: https://stackoverflow.com/questions/52580173/listof-returns-mutablelist.\r\n\r\nHere&#39;s an example of my unit test and repository method:\r\n```kotlin\r\n            @Test\r\n            fun `should return recipes with the specified author, locale and categories`() {\r\n                println(&quot;AuthorID: &quot; + author.id)\r\n\r\n                recipeRepo.findRecipesBy(\r\n                    locale = LanguageSelection.ENGLISH,\r\n                    authorIds = arrayListOf(44),\r\n                )\r\n                // it throws before reaching asserts\r\n            }\r\n\r\n```\r\n\r\nRepository:\r\n```kotlin\r\ninterface RecipeRepository : JpaRepository&lt;Recipe, Long&gt; {\r\n\r\n    @Query(&quot;SELECT r FROM Recipe r WHERE &quot;\r\n            + &quot;(:authorIds is null or r.author.id in (:authorIds)) &quot;\r\n            + &quot;and (:recipeIds is null or r.id in (:recipeIds)) &quot;\r\n            + &quot;and (:minPrice is null or r.estimatedPrice &gt;= :minPrice) &quot;\r\n            + &quot;and (:maxPrice is null or r.estimatedPrice &lt;= :maxPrice) &quot;\r\n            + &quot;and ( cast(:beforeDate as timestamp) is null or r.createdAt &lt; cast(:beforeDate as timestamp)) &quot;\r\n            + &quot;and ( cast(:afterDate as timestamp) is null or r.createdAt &gt; cast(:afterDate as timestamp)) &quot;\r\n            + &quot;and (:minLikeCount is null or r.likeCount &gt;= :minLikeCount) &quot;\r\n            + &quot;and (:categoryIds is null or exists(select rc from r.categories rc where rc.id in (:categoryIds))) &quot;\r\n    )\r\n\r\n    fun findRecipesBy(\r\n        @Param(&quot;authorIds&quot;) authorIds: ArrayList&lt;Long&gt;? = null,\r\n        @Param(&quot;recipeIds&quot;) recipeIds: ArrayList&lt;Long&gt;? = null,\r\n        @Param(&quot;minPrice&quot;) minPrice: Double? = null,\r\n        @Param(&quot;maxPrice&quot;) maxPrice: Double? = null,\r\n        @Param(&quot;beforeDate&quot;) beforeDate: Date? = null,\r\n        @Param(&quot;afterDate&quot;) afterDate: Date? = null,\r\n        @Param(&quot;minLikeCount&quot;) minLikeCount: Int? = null,\r\n        @Param(&quot;categoryIds&quot;) categoryIds: ArrayList&lt;Long&gt;? = null,\r\n        sort: Sort = Sort.by(Sort.Direction.ASC, &quot;createdAt&quot;),\r\n    ): List&lt;Recipe&gt;\r\n\r\n}\r\n```\r\n\r\nError:\r\n```\r\n\r\nParameter value [[44]] did not match expected type [BasicSqmPathSource(id : Long) ]\r\norg.springframework.dao.InvalidDataAccessApiUsageException: Parameter value [[44]] did not match expected type [BasicSqmPathSource(id : Long) ]\r\n\tat app//org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:371)\r\n\tat app//org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:235)\r\n\tat app//org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)\r\n\tat app//org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\r\n\tat app//org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)\r\n\tat app//org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\r\n\tat app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat app//org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:134)\r\n\tat app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat app//org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n\tat app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat app//org.springframework.data.repository.core.support.MethodInvocationValidator.invoke(MethodInvocationValidator.java:94)\r\n\tat app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat app//org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)\r\n\tat app/jdk.proxy3/jdk.proxy3.$Proxy189.findRecipesBy(Unknown Source)\r\n\tat app//com.fittastetic.fittastetic_backend.shared.recipe.repository.RecipeRepository$DefaultImpls.findRecipesBy$default(RecipeRepository.kt:38)\r\n    ...\r\nCaused by: org.hibernate.type.descriptor.java.CoercionException: Cannot coerce value `[44]` [java.util.ArrayList] as Long\r\n\tat app//org.hibernate.type.descriptor.java.LongJavaType.coerce(LongJavaType.java:155)\r\n\tat app//org.hibernate.type.descriptor.java.LongJavaType.coerce(LongJavaType.java:24)\r\n\tat app//org.hibernate.query.internal.QueryParameterBindingImpl.coerce(QueryParameterBindingImpl.java:144)\r\n\tat app//org.hibernate.query.internal.QueryParameterBindingImpl.setBindValue(QueryParameterBindingImpl.java:111)\r\n\t... 141 more\r\n\r\n```","title":"Hibernate randomly throws error: Cannot coerce value `[]` [java.util.ArrayList] as Long","body":"<p>I'm encountering unstable errors when using a parameter of type List with my repository methods. The issue seems to be related to the interoperability between Kotlin lists and Java. When I run my unit test, it fails randomly, and I suspect this has something to do with the MutableList returned by listOf() in Kotlin. More information can be found in this StackOverflow post: <a href=\"https://stackoverflow.com/questions/52580173/listof-returns-mutablelist\">listOf() returns MutableList</a>.</p>\n<p>Here's an example of my unit test and repository method:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>            @Test\n            fun `should return recipes with the specified author, locale and categories`() {\n                println(&quot;AuthorID: &quot; + author.id)\n\n                recipeRepo.findRecipesBy(\n                    locale = LanguageSelection.ENGLISH,\n                    authorIds = arrayListOf(44),\n                )\n                // it throws before reaching asserts\n            }\n\n</code></pre>\n<p>Repository:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>interface RecipeRepository : JpaRepository&lt;Recipe, Long&gt; {\n\n    @Query(&quot;SELECT r FROM Recipe r WHERE &quot;\n            + &quot;(:authorIds is null or r.author.id in (:authorIds)) &quot;\n            + &quot;and (:recipeIds is null or r.id in (:recipeIds)) &quot;\n            + &quot;and (:minPrice is null or r.estimatedPrice &gt;= :minPrice) &quot;\n            + &quot;and (:maxPrice is null or r.estimatedPrice &lt;= :maxPrice) &quot;\n            + &quot;and ( cast(:beforeDate as timestamp) is null or r.createdAt &lt; cast(:beforeDate as timestamp)) &quot;\n            + &quot;and ( cast(:afterDate as timestamp) is null or r.createdAt &gt; cast(:afterDate as timestamp)) &quot;\n            + &quot;and (:minLikeCount is null or r.likeCount &gt;= :minLikeCount) &quot;\n            + &quot;and (:categoryIds is null or exists(select rc from r.categories rc where rc.id in (:categoryIds))) &quot;\n    )\n\n    fun findRecipesBy(\n        @Param(&quot;authorIds&quot;) authorIds: ArrayList&lt;Long&gt;? = null,\n        @Param(&quot;recipeIds&quot;) recipeIds: ArrayList&lt;Long&gt;? = null,\n        @Param(&quot;minPrice&quot;) minPrice: Double? = null,\n        @Param(&quot;maxPrice&quot;) maxPrice: Double? = null,\n        @Param(&quot;beforeDate&quot;) beforeDate: Date? = null,\n        @Param(&quot;afterDate&quot;) afterDate: Date? = null,\n        @Param(&quot;minLikeCount&quot;) minLikeCount: Int? = null,\n        @Param(&quot;categoryIds&quot;) categoryIds: ArrayList&lt;Long&gt;? = null,\n        sort: Sort = Sort.by(Sort.Direction.ASC, &quot;createdAt&quot;),\n    ): List&lt;Recipe&gt;\n\n}\n</code></pre>\n<p>Error:</p>\n<pre><code>\nParameter value [[44]] did not match expected type [BasicSqmPathSource(id : Long) ]\norg.springframework.dao.InvalidDataAccessApiUsageException: Parameter value [[44]] did not match expected type [BasicSqmPathSource(id : Long) ]\n    at app//org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:371)\n    at app//org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:235)\n    at app//org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)\n    at app//org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\n    at app//org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)\n    at app//org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\n    at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at app//org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:134)\n    at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at app//org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\n    at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at app//org.springframework.data.repository.core.support.MethodInvocationValidator.invoke(MethodInvocationValidator.java:94)\n    at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at app//org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)\n    at app/jdk.proxy3/jdk.proxy3.$Proxy189.findRecipesBy(Unknown Source)\n    at app//com.fittastetic.fittastetic_backend.shared.recipe.repository.RecipeRepository$DefaultImpls.findRecipesBy$default(RecipeRepository.kt:38)\n    ...\nCaused by: org.hibernate.type.descriptor.java.CoercionException: Cannot coerce value `[44]` [java.util.ArrayList] as Long\n    at app//org.hibernate.type.descriptor.java.LongJavaType.coerce(LongJavaType.java:155)\n    at app//org.hibernate.type.descriptor.java.LongJavaType.coerce(LongJavaType.java:24)\n    at app//org.hibernate.query.internal.QueryParameterBindingImpl.coerce(QueryParameterBindingImpl.java:144)\n    at app//org.hibernate.query.internal.QueryParameterBindingImpl.setBindValue(QueryParameterBindingImpl.java:111)\n    ... 141 more\n\n</code></pre>\n"},{"tags":["java","arrays","for-loop","if-statement"],"comments":[{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1677865927,"post_id":75630322,"comment_id":133428164,"body_markdown":"Time to use a debugger or sprinkle your code with `println` statements.  See where your calculations go wrong.","body":"Time to use a debugger or sprinkle your code with <code>println</code> statements.  See where your calculations go wrong."},{"owner":{"account_id":80364,"reputation":90939,"user_id":227299,"accept_rate":72,"display_name":"Ruan Mendes"},"score":0,"creation_date":1677866334,"post_id":75630322,"comment_id":133428271,"body_markdown":"Didn&#39;t downvote but https://idownvotedbecau.se/nodebugging/","body":"Didn&#39;t downvote but <a href=\"https://idownvotedbecau.se/nodebugging/\" rel=\"nofollow noreferrer\">idownvotedbecau.se/nodebugging</a>"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677866256,"creation_date":1677866256,"answer_id":75630406,"question_id":75630322,"body_markdown":"Your direct issue is simple: You have a field named `String[] grade;` in your `GradesAverage` class. Like all fields of non-primitive types that aren&#39;t initialized, its initial value is therefore `null`.\r\n\r\nYou never set it. There&#39;s a `setScore` which sets the `score` array, but no `setGrades`.\r\n\r\nLater in `computeResult`, you evaluate `grade[i]`. Array brackets &#39;dereference&#39;, they follow the pointer. `x[i]` where `x` is `null` thus gives you a `NullPointerException`.\r\n\r\nBut, you have an underlying problem.\r\n\r\nNB: Java has pointers; it&#39;s just that the official term is &#39;reference&#39;, just like java has functions but the official term is &#39;method&#39;. No matter what you care to call it, they point at things, it&#39;s like an address in an address book and not a house. `null` refers to a blank page in the address book, most things you can do with a reference are things you do to the house and not the page in the address book - `arr[idx]` is one such thing. Anytime you ask a reference to do something to the thing it refers to, and that reference is `null`, you get a NullPointerException. You can&#39;t very well walk over to the house listed in the address book on page 48 if page 48 is blank.\r\n\r\n## Debugging\r\n\r\nExperienced programmers can generally look at code like this and just see the problem. However, this &#39;crystal ball debugging&#39; (where you just look at it ever more intently until you go EUREKA!!!) is not reliable and not how real programmers operate.\r\n\r\nInstead, they debug. Debugging is very simple, you simply &#39;evaluate&#39; what your code is supposed to do, line by line, in your head. Then you compare what you think should happen, with what actually happens. Every time what actually happens diverges from what you thought would happen, you found a bug. Solve it, keep going, until the app does exactly what you wanted it to.\r\n\r\nYou can use debuggers, which make this easy by letting you inspect variables and execute code one line at a time (&#39;stepping through&#39;). However, if &#39;learning how to use the debugger&#39; is a bit too much of a learning curve issue right now, you can always toss a boatload of `System.out.println(&quot;DBG: Variable x is now &quot; + x);` style statements throughout the code as a poor and inefficient, but easy to learn alternative.\r\n","title":"Nesting an if statement inside an array loop","body":"<p>Your direct issue is simple: You have a field named <code>String[] grade;</code> in your <code>GradesAverage</code> class. Like all fields of non-primitive types that aren't initialized, its initial value is therefore <code>null</code>.</p>\n<p>You never set it. There's a <code>setScore</code> which sets the <code>score</code> array, but no <code>setGrades</code>.</p>\n<p>Later in <code>computeResult</code>, you evaluate <code>grade[i]</code>. Array brackets 'dereference', they follow the pointer. <code>x[i]</code> where <code>x</code> is <code>null</code> thus gives you a <code>NullPointerException</code>.</p>\n<p>But, you have an underlying problem.</p>\n<p>NB: Java has pointers; it's just that the official term is 'reference', just like java has functions but the official term is 'method'. No matter what you care to call it, they point at things, it's like an address in an address book and not a house. <code>null</code> refers to a blank page in the address book, most things you can do with a reference are things you do to the house and not the page in the address book - <code>arr[idx]</code> is one such thing. Anytime you ask a reference to do something to the thing it refers to, and that reference is <code>null</code>, you get a NullPointerException. You can't very well walk over to the house listed in the address book on page 48 if page 48 is blank.</p>\n<h2>Debugging</h2>\n<p>Experienced programmers can generally look at code like this and just see the problem. However, this 'crystal ball debugging' (where you just look at it ever more intently until you go EUREKA!!!) is not reliable and not how real programmers operate.</p>\n<p>Instead, they debug. Debugging is very simple, you simply 'evaluate' what your code is supposed to do, line by line, in your head. Then you compare what you think should happen, with what actually happens. Every time what actually happens diverges from what you thought would happen, you found a bug. Solve it, keep going, until the app does exactly what you wanted it to.</p>\n<p>You can use debuggers, which make this easy by letting you inspect variables and execute code one line at a time ('stepping through'). However, if 'learning how to use the debugger' is a bit too much of a learning curve issue right now, you can always toss a boatload of <code>System.out.println(&quot;DBG: Variable x is now &quot; + x);</code> style statements throughout the code as a poor and inefficient, but easy to learn alternative.</p>\n"}],"owner":{"account_id":27929303,"reputation":1,"user_id":21327736,"display_name":"Zaedriel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1677866256,"creation_date":1677865704,"question_id":75630322,"body_markdown":"Trying to follow an exercise for college and completely lost. As an example app class and instan object challenge, we are tasked to create an app that asks a user for how many subjects they are taking (via scanner) and then using arrays to record each score they have for each subject (so if they took 5 subjects, they enter 5 scores between 1-100). The instantiable should then take those scores, assign a grade as a string to each entry in the array and then get the average score for the user. \r\n\r\ne.g. if I enter 4 subjects, I get prompted to enter 4 int values, then I should see the corresponding grade for each subject as a row, and another that calculated the average score of the 4 entered.\r\n\r\n\r\nInstantiable class object\r\n```\r\npublic class GradesAverage{\r\n//Data member declaration (variables, but instantiable class name) - always private\r\n\tprivate int subjects;\r\n\tprivate int[] score;\r\n\tString[] grade;\r\n\tprivate int avg;\r\n\tprivate\tint tally;\r\n\r\n//Constructor\r\n\tpublic GradesAverage(){\r\n\r\n\t}\r\n//Setters - inputs (pulling from App class)\r\n\tpublic void setSubjects(int subjects){\r\n\t\tthis.subjects=subjects;\r\n\t}\r\n\tpublic void setScore(int[] score){\r\n\t\tthis.score=score;\r\n\t}\r\n//Compute- process\r\n\tpublic void computeResults(){\r\n\t\tfor(int i=0;i&lt;subjects;i++){\r\n\t\t\tif(score[i]&gt;=90 &amp;&amp; score[i]&lt;=100){\r\n\t\t\t\tgrade[i]=&quot;A&quot;;\r\n\t\t\t}\r\n\t\t\telse if(score[i]&gt;=80 &amp;&amp; score[i]&lt;90){\r\n\t\t\t\tgrade[i]=&quot;A-&quot;;\r\n\t\t\t}\r\n\t\t\telse if(score[i]&gt;=70 &amp;&amp; score[i]&lt;80){\r\n\t\t\t\tgrade[i]=&quot;B&quot;;\r\n\t\t\t}\r\n\t\t\telse if(score[i]&gt;=60 &amp;&amp; score[i]&lt;70){\r\n\t\t\t\tgrade[i]=&quot;B-&quot;;\r\n\t\t\t}\r\n\t\t\telse if(score[i]&gt;=50 &amp;&amp; score[i]&lt;60){\r\n\t\t\t\tgrade[i]=&quot;C&quot;;\r\n\t\t\t}\r\n\t\t\telse if(score[i]&gt;=40 &amp;&amp; score[i]&lt;50){\r\n\t\t\t\tgrade[i]=&quot;D&quot;;\r\n\t\t\t}\r\n\t\t\telse if(score[i]&gt;=0 &amp;&amp; score[i]&lt;40){\r\n\t\t\t\tgrade[i]=&quot;F&quot;;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tgrade[i]=&quot;ERROR&quot;;\r\n\t\t\t}\r\n\t\t\ttally=score[i-1]+score[i];\r\n\t\t}\r\n\r\n\t\tavg=tally/subjects;\r\n\t}\r\n//Getters - outputs (sent to App class)\r\n\tpublic int[] getScore(){\r\n\t\treturn score;\r\n\t}\r\n\tpublic String[] getGrade(){\r\n\t\treturn grade;\r\n\t}\r\n\tpublic int getAverage(){\r\n\t\treturn avg;\r\n\t}\r\n}\r\n```\r\nApp class object\r\n\r\n```\r\nimport java.util.*;\r\npublic class GradesAverageApp{\r\n\tpublic static void main(String[] args){\r\n//declare variables\r\n\t\tint subjects=0;\r\n\t\tint[] score=new int[10];\r\n\t\tint avg;\r\n\t\tString[] grade;\r\n\t\tint tally;\r\n//declare and create objects\r\n\t\tScanner keyboard=new Scanner(System.in);\r\n\t\tGradesAverage g=new GradesAverage();\r\n\r\n//inputs (pulling from user input e.g. scanner)\r\n\t\tSystem.out.println(&quot;Please enter how many subject you are taking&quot;);\r\n\t\tsubjects=keyboard.nextInt();\r\n\t\tfor(int i=0;i&lt;subjects;i++){\r\n\t\t\tSystem.out.println(&quot;Please enter the score (0-100) for subject #&quot;+(i+1));\r\n\t\t\tscore[i]=keyboard.nextInt();\r\n\t\t}\r\n//declare setters\r\n\t\tg.setSubjects(subjects);\r\n\t\tg.setScore(score);\r\n//compute process\r\n\t\tg.computeResults();\r\n//get results\r\n\t\tgrade=g.getGrade();\r\n\t\tavg=g.getAverage();\r\n//outputs (back to the user)\r\n\t\tfor(int i=0;i&lt;subjects;i++){\r\n\t\t\tSystem.out.println(&quot;You scored &quot;+score[i]+&quot; in subject #&quot;+(i+1)+&quot;, giving you a final grade of &quot;+grade[i]+&quot;.&quot;);\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Your overall average score was &quot;+avg);\r\n\t}\r\n}\r\n```\r\nI&#39;m still very new to Java but I cannot figure out why the app won&#39;t finish the compute stage.\r\nExample of the error I get:\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.NullPointerException\r\n        at GradesAverage.computeResults(GradesAverage.java:41)\r\n        at GradesAverageApp.main(GradesAverageApp.java:30)\r\n```\r\n","title":"Nesting an if statement inside an array loop","body":"<p>Trying to follow an exercise for college and completely lost. As an example app class and instan object challenge, we are tasked to create an app that asks a user for how many subjects they are taking (via scanner) and then using arrays to record each score they have for each subject (so if they took 5 subjects, they enter 5 scores between 1-100). The instantiable should then take those scores, assign a grade as a string to each entry in the array and then get the average score for the user.</p>\n<p>e.g. if I enter 4 subjects, I get prompted to enter 4 int values, then I should see the corresponding grade for each subject as a row, and another that calculated the average score of the 4 entered.</p>\n<p>Instantiable class object</p>\n<pre><code>public class GradesAverage{\n//Data member declaration (variables, but instantiable class name) - always private\n    private int subjects;\n    private int[] score;\n    String[] grade;\n    private int avg;\n    private int tally;\n\n//Constructor\n    public GradesAverage(){\n\n    }\n//Setters - inputs (pulling from App class)\n    public void setSubjects(int subjects){\n        this.subjects=subjects;\n    }\n    public void setScore(int[] score){\n        this.score=score;\n    }\n//Compute- process\n    public void computeResults(){\n        for(int i=0;i&lt;subjects;i++){\n            if(score[i]&gt;=90 &amp;&amp; score[i]&lt;=100){\n                grade[i]=&quot;A&quot;;\n            }\n            else if(score[i]&gt;=80 &amp;&amp; score[i]&lt;90){\n                grade[i]=&quot;A-&quot;;\n            }\n            else if(score[i]&gt;=70 &amp;&amp; score[i]&lt;80){\n                grade[i]=&quot;B&quot;;\n            }\n            else if(score[i]&gt;=60 &amp;&amp; score[i]&lt;70){\n                grade[i]=&quot;B-&quot;;\n            }\n            else if(score[i]&gt;=50 &amp;&amp; score[i]&lt;60){\n                grade[i]=&quot;C&quot;;\n            }\n            else if(score[i]&gt;=40 &amp;&amp; score[i]&lt;50){\n                grade[i]=&quot;D&quot;;\n            }\n            else if(score[i]&gt;=0 &amp;&amp; score[i]&lt;40){\n                grade[i]=&quot;F&quot;;\n            }\n            else{\n                grade[i]=&quot;ERROR&quot;;\n            }\n            tally=score[i-1]+score[i];\n        }\n\n        avg=tally/subjects;\n    }\n//Getters - outputs (sent to App class)\n    public int[] getScore(){\n        return score;\n    }\n    public String[] getGrade(){\n        return grade;\n    }\n    public int getAverage(){\n        return avg;\n    }\n}\n</code></pre>\n<p>App class object</p>\n<pre><code>import java.util.*;\npublic class GradesAverageApp{\n    public static void main(String[] args){\n//declare variables\n        int subjects=0;\n        int[] score=new int[10];\n        int avg;\n        String[] grade;\n        int tally;\n//declare and create objects\n        Scanner keyboard=new Scanner(System.in);\n        GradesAverage g=new GradesAverage();\n\n//inputs (pulling from user input e.g. scanner)\n        System.out.println(&quot;Please enter how many subject you are taking&quot;);\n        subjects=keyboard.nextInt();\n        for(int i=0;i&lt;subjects;i++){\n            System.out.println(&quot;Please enter the score (0-100) for subject #&quot;+(i+1));\n            score[i]=keyboard.nextInt();\n        }\n//declare setters\n        g.setSubjects(subjects);\n        g.setScore(score);\n//compute process\n        g.computeResults();\n//get results\n        grade=g.getGrade();\n        avg=g.getAverage();\n//outputs (back to the user)\n        for(int i=0;i&lt;subjects;i++){\n            System.out.println(&quot;You scored &quot;+score[i]+&quot; in subject #&quot;+(i+1)+&quot;, giving you a final grade of &quot;+grade[i]+&quot;.&quot;);\n        }\n        System.out.println(&quot;Your overall average score was &quot;+avg);\n    }\n}\n</code></pre>\n<p>I'm still very new to Java but I cannot figure out why the app won't finish the compute stage.\nExample of the error I get:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NullPointerException\n        at GradesAverage.computeResults(GradesAverage.java:41)\n        at GradesAverageApp.main(GradesAverageApp.java:30)\n</code></pre>\n"},{"tags":["java","jaxb","deserialization"],"owner":{"account_id":3707987,"reputation":55,"user_id":3085993,"display_name":"Francesco"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677865842,"creation_date":1677865842,"question_id":75630340,"body_markdown":"I have this xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;&gt;\r\n    \t&lt;soap:Header&gt;\r\n    \t\t&lt;MessageResponse GId=&quot;JPEF&quot; MId=&quot;65effb8f-2180-428c-9285-527fdc97fc7a&quot; MTs=&quot;2023-03-02T19:40:14.201518+01:00&quot; METs=&quot;2023-03-12T19:40:14.201518+01:00&quot; xmlns=&quot;urn:crif-message:2006-08-23&quot;&gt;\r\n    \t\t\t&lt;P SId=&quot;S18&quot; PId=&quot;EuriscAC&quot; PNs=&quot;urn:crif-anagraficaunica-eurisc:2006-11-28&quot;&gt;\r\n    \t\t\t\t&lt;R L=&quot;en-US&quot; C=&quot;urn:crif-messagegateway:2006-08-23:S&quot; D=&quot;Success.&quot; /&gt;\r\n    \t\t\t&lt;/P&gt;\r\n    \t\t\t&lt;Tx TxNs=&quot;urn:crif-messagegateway:2006-08-23&quot;&gt;\r\n    \t\t\t\t&lt;R L=&quot;en-US&quot; C=&quot;urn:crif-messagegateway:2006-08-23:S&quot; D=&quot;Success.&quot; /&gt;\r\n    \t\t\t&lt;/Tx&gt;\r\n    \t\t&lt;/MessageResponse&gt;\r\n    \t&lt;/soap:Header&gt;\r\n    \t&lt;soap:Body&gt;\r\n    \t\t&lt;MGResponse xmlns=&quot;urn:crif-messagegateway:2006-08-23&quot;&gt;&amp;lt;MGResponse xmlns=&quot;urn:crif-messagegateway:2006-08-23&quot;&amp;gt;&amp;lt;EuriscACResponse xmlns=&quot;urn:crif-anagraficaunica-eurisc:2006-11-28&quot;&amp;gt;&amp;lt;CD CCC=&quot;163214729&quot; DRF=&quot;2023-02-27&quot; TO=&quot;FC&quot; FO=&quot;RC&quot; V=&quot;E&quot; ICR=&quot;5000&quot; /&amp;gt;&amp;lt;C CCC=&quot;163214729&quot; FO=&quot;RC&quot; V=&quot;E&quot; /&amp;gt;&amp;lt;/EuriscACResponse&amp;gt;&amp;lt;/MGResponse&amp;gt;&lt;/MGResponse&gt;\r\n    \t&lt;/soap:Body&gt;\r\n    &lt;/soap:Envelope&gt;\r\n\r\nand I have 2 pojos, one for the header and the other for the body.\r\nwhilst I succeed in deserialize the header, the body gives me an headache.\r\n\r\nthe *header* pojo is\r\n\r\n    package generatedschema.header;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import javax.xml.bind.annotation.XmlAccessType;\r\n    import javax.xml.bind.annotation.XmlAccessorType;\r\n    import javax.xml.bind.annotation.XmlAnyAttribute;\r\n    import javax.xml.bind.annotation.XmlAnyElement;\r\n    import javax.xml.bind.annotation.XmlAttribute;\r\n    import javax.xml.bind.annotation.XmlElement;\r\n    import javax.xml.bind.annotation.XmlRootElement;\r\n    import javax.xml.bind.annotation.XmlSchemaType;\r\n    import javax.xml.bind.annotation.XmlType;\r\n    import javax.xml.bind.annotation.adapters.CollapsedStringAdapter;\r\n    import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;\r\n    import javax.xml.datatype.XMLGregorianCalendar;\r\n    import javax.xml.namespace.QName;\r\n    \r\n    \r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    @XmlType(name = &quot;&quot;, propOrder = {\r\n        &quot;p&quot;,\r\n        &quot;tx&quot;,\r\n        &quot;any&quot;\r\n    })\r\n    @XmlRootElement(name = &quot;MessageResponse&quot;)\r\n    public class MessageResponse\r\n        extends MessageAttributeSet\r\n    {\r\n    \r\n        @XmlElement(name = &quot;P&quot;, required = true)\r\n        protected List&lt;MessageResponse.P&gt; p;\r\n        @XmlElement(name = &quot;Tx&quot;, required = true)\r\n        protected MessageResponse.Tx tx;\r\n        @XmlAnyElement(lax = true)\r\n        protected List&lt;Object&gt; any;\r\n        @XmlAttribute(name = &quot;METs&quot;, required = true)\r\n        @XmlSchemaType(name = &quot;dateTime&quot;)\r\n        protected XMLGregorianCalendar meTs;\r\n    \r\n        public List&lt;MessageResponse.P&gt; getP() {\r\n            if (p == null) {\r\n                p = new ArrayList&lt;MessageResponse.P&gt;();\r\n            }\r\n            return this.p;\r\n        }\r\n    \r\n        public MessageResponse.Tx getTx() {\r\n            return tx;\r\n        }\r\n    \r\n        public void setTx(MessageResponse.Tx value) {\r\n            this.tx = value;\r\n        }\r\n    \r\n        public List&lt;Object&gt; getAny() {\r\n            if (any == null) {\r\n                any = new ArrayList&lt;Object&gt;();\r\n            }\r\n            return this.any;\r\n        }\r\n    \r\n        public XMLGregorianCalendar getMETs() {\r\n            return meTs;\r\n        }\r\n    \r\n        public void setMETs(XMLGregorianCalendar value) {\r\n            this.meTs = value;\r\n        }\r\n    \r\n    \r\n        @XmlAccessorType(XmlAccessType.FIELD)\r\n        @XmlType(name = &quot;&quot;, propOrder = {\r\n            &quot;r&quot;,\r\n            &quot;any&quot;\r\n        })\r\n        public static class P {\r\n    \r\n            @XmlElement(name = &quot;R&quot;, required = true)\r\n            protected MessageResponse.P.R r;\r\n            @XmlAnyElement(lax = true)\r\n            protected List&lt;Object&gt; any;\r\n            @XmlAttribute(name = &quot;SId&quot;, required = true)\r\n            protected String sId;\r\n            @XmlAttribute(name = &quot;PId&quot;, required = true)\r\n            protected String pId;\r\n            @XmlAttribute(name = &quot;PNs&quot;, required = true)\r\n            protected String pNs;\r\n            @XmlAnyAttribute\r\n            private Map&lt;QName, String&gt; otherAttributes = new HashMap&lt;QName, String&gt;();\r\n    \r\n            public MessageResponse.P.R getR() {\r\n                return r;\r\n            }\r\n    \r\n            public void setR(MessageResponse.P.R value) {\r\n                this.r = value;\r\n            }\r\n    \r\n            public List&lt;Object&gt; getAny() {\r\n                if (any == null) {\r\n                    any = new ArrayList&lt;Object&gt;();\r\n                }\r\n                return this.any;\r\n            }\r\n    \r\n            public String getSId() {\r\n                return sId;\r\n            }\r\n    \r\n            public void setSId(String value) {\r\n                this.sId = value;\r\n            }\r\n    \r\n            public String getPId() {\r\n                return pId;\r\n            }\r\n    \r\n            public void setPId(String value) {\r\n                this.pId = value;\r\n            }\r\n    \r\n            public String getPNs() {\r\n                return pNs;\r\n            }\r\n    \r\n            public void setPNs(String value) {\r\n                this.pNs = value;\r\n            }\r\n    \r\n            public Map&lt;QName, String&gt; getOtherAttributes() {\r\n                return otherAttributes;\r\n            }\r\n    \r\n            @XmlAccessorType(XmlAccessType.FIELD)\r\n            @XmlType(name = &quot;&quot;)\r\n            public static class R {\r\n    \r\n                @XmlAttribute(name = &quot;L&quot;, required = true)\r\n                @XmlJavaTypeAdapter(CollapsedStringAdapter.class)\r\n                @XmlSchemaType(name = &quot;language&quot;)\r\n                protected String l;\r\n                @XmlAttribute(name = &quot;C&quot;, required = true)\r\n                @XmlSchemaType(name = &quot;anyURI&quot;)\r\n                protected String c;\r\n                @XmlAttribute(name = &quot;D&quot;, required = true)\r\n                protected String d;\r\n                @XmlAnyAttribute\r\n                private Map&lt;QName, String&gt; otherAttributes = new HashMap&lt;QName, String&gt;();\r\n    \r\n                public String getL() {\r\n                    return l;\r\n                }\r\n    \r\n                public void setL(String value) {\r\n                    this.l = value;\r\n                }\r\n    \r\n                public String getC() {\r\n                    return c;\r\n                }\r\n    \r\n                public void setC(String value) {\r\n                    this.c = value;\r\n                }\r\n    \r\n                public String getD() {\r\n                    return d;\r\n                }\r\n    \r\n                public void setD(String value) {\r\n                    this.d = value;\r\n                }\r\n    \r\n                public Map&lt;QName, String&gt; getOtherAttributes() {\r\n                    return otherAttributes;\r\n                }\r\n    \r\n            }\r\n    \r\n        }\r\n    \r\n    \r\n        @XmlAccessorType(XmlAccessType.FIELD)\r\n        @XmlType(name = &quot;&quot;, propOrder = {\r\n            &quot;r&quot;,\r\n            &quot;any&quot;\r\n        })\r\n        public static class Tx {\r\n    \r\n            @XmlElement(name = &quot;R&quot;, required = true)\r\n            protected MessageResponse.Tx.R r;\r\n            @XmlAnyElement(lax = true)\r\n            protected List&lt;Object&gt; any;\r\n            @XmlAttribute(name = &quot;TxNs&quot;, required = true)\r\n            protected String txNs;\r\n            @XmlAnyAttribute\r\n            private Map&lt;QName, String&gt; otherAttributes = new HashMap&lt;QName, String&gt;();\r\n    \r\n            public MessageResponse.Tx.R getR() {\r\n                return r;\r\n            }\r\n    \r\n            public void setR(MessageResponse.Tx.R value) {\r\n                this.r = value;\r\n            }\r\n    \r\n            public List&lt;Object&gt; getAny() {\r\n                if (any == null) {\r\n                    any = new ArrayList&lt;Object&gt;();\r\n                }\r\n                return this.any;\r\n            }\r\n    \r\n            public String getTxNs() {\r\n                return txNs;\r\n            }\r\n    \r\n            public void setTxNs(String value) {\r\n                this.txNs = value;\r\n            }\r\n    \r\n            public Map&lt;QName, String&gt; getOtherAttributes() {\r\n                return otherAttributes;\r\n            }\r\n    \r\n            @XmlAccessorType(XmlAccessType.FIELD)\r\n            @XmlType(name = &quot;&quot;)\r\n            public static class R {\r\n    \r\n                @XmlAttribute(name = &quot;L&quot;, required = true)\r\n                @XmlJavaTypeAdapter(CollapsedStringAdapter.class)\r\n                @XmlSchemaType(name = &quot;language&quot;)\r\n                protected String l;\r\n                @XmlAttribute(name = &quot;C&quot;, required = true)\r\n                @XmlSchemaType(name = &quot;anyURI&quot;)\r\n                protected String c;\r\n                @XmlAttribute(name = &quot;D&quot;, required = true)\r\n                protected String d;\r\n                @XmlAnyAttribute\r\n                private Map&lt;QName, String&gt; otherAttributes = new HashMap&lt;QName, String&gt;();\r\n    \r\n                public String getL() {\r\n                    return l;\r\n                }\r\n    \r\n                public void setL(String value) {\r\n                    this.l = value;\r\n                }\r\n    \r\n                public String getC() {\r\n                    return c;\r\n                }\r\n    \r\n                public void setC(String value) {\r\n                    this.c = value;\r\n                }\r\n    \r\n                public String getD() {\r\n                    return d;\r\n                }\r\n    \r\n                public void setD(String value) {\r\n                    this.d = value;\r\n                }\r\n    \r\n                public Map&lt;QName, String&gt; getOtherAttributes() {\r\n                    return otherAttributes;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nand the pojo for the *body* in\r\n\r\n    package generatedschema.eurisc;\r\n    import java.math.BigInteger;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import javax.xml.bind.annotation.XmlAccessType;\r\n    import javax.xml.bind.annotation.XmlAccessorType;\r\n    import javax.xml.bind.annotation.XmlAttribute;\r\n    import javax.xml.bind.annotation.XmlElement;\r\n    import javax.xml.bind.annotation.XmlRootElement;\r\n    import javax.xml.bind.annotation.XmlSchemaType;\r\n    import javax.xml.bind.annotation.XmlType;\r\n    import javax.xml.datatype.XMLGregorianCalendar;\r\n    \r\n    @XmlRootElement(name = &quot;EuriscACResponse&quot;)\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    @XmlType(name = &quot;&quot;, propOrder = {\r\n        &quot;cd&quot;,\r\n        &quot;c&quot;,\r\n        &quot;e&quot;\r\n    })\r\n    public class EuriscACResponse {\r\n        @XmlElement(name = &quot;CD&quot;)\r\n        protected EuriscACResponse.CD cd;\r\n        @XmlElement(name = &quot;C&quot;)\r\n        protected EuriscACResponse.C c;\r\n        @XmlElement(name = &quot;E&quot;)\r\n        protected List&lt;Errore&gt; e;\r\n        public EuriscACResponse.CD getCD() {\r\n            return cd;\r\n        }\r\n        public void setCD(EuriscACResponse.CD value) {\r\n            this.cd = value;\r\n        }\r\n        public EuriscACResponse.C getC() {\r\n            return c;\r\n        }\r\n        public void setC(EuriscACResponse.C value) {\r\n            this.c = value;\r\n        }\r\n        public List&lt;Errore&gt; getE() {\r\n            if (e == null) {\r\n                e = new ArrayList&lt;Errore&gt;();\r\n            }\r\n            return this.e;\r\n        }\r\n        @XmlAccessorType(XmlAccessType.FIELD)\r\n        @XmlType(name = &quot;&quot;)\r\n        public static class C {\r\n            @XmlAttribute(name = &quot;CCC&quot;)\r\n            protected String ccc;\r\n            @XmlAttribute(name = &quot;CCE&quot;)\r\n            protected String cce;\r\n            @XmlAttribute(name = &quot;CCT&quot;)\r\n            protected String cct;\r\n            @XmlAttribute(name = &quot;FO&quot;)\r\n            protected String fo;\r\n            @XmlAttribute(name = &quot;V&quot;)\r\n            protected String v;\r\n            @XmlAttribute(name = &quot;LUI&quot;)\r\n            protected Boolean lui;\r\n            @XmlAttribute(name = &quot;ICR&quot;)\r\n            protected BigInteger icr;\r\n            @XmlAttribute(name = &quot;IRM&quot;)\r\n            protected BigInteger irm;\r\n            @XmlAttribute(name = &quot;FAC&quot;)\r\n            protected String fac;\r\n            @XmlAttribute(name = &quot;S&quot;)\r\n            protected String s;\r\n            public String getCCC() {\r\n                return ccc;\r\n            }\r\n            public void setCCC(String value) {\r\n                this.ccc = value;\r\n            }\r\n            public String getCCE() {\r\n                return cce;\r\n            }\r\n            public void setCCE(String value) {\r\n                this.cce = value;\r\n            }\r\n            public String getCCT() {\r\n                return cct;\r\n            }\r\n            public void setCCT(String value) {\r\n                this.cct = value;\r\n            }\r\n            public String getFO() {\r\n                return fo;\r\n            }\r\n            public void setFO(String value) {\r\n                this.fo = value;\r\n            }\r\n            public String getV() {\r\n                return v;\r\n            }\r\n            public void setV(String value) {\r\n                this.v = value;\r\n            }\r\n            public Boolean isLUI() {\r\n                return lui;\r\n            }\r\n            public void setLUI(Boolean value) {\r\n                this.lui = value;\r\n            }\r\n            public BigInteger getICR() {\r\n                return icr;\r\n            }\r\n            public void setICR(BigInteger value) {\r\n                this.icr = value;\r\n            }\r\n            public BigInteger getIRM() {\r\n                return irm;\r\n            }\r\n            public void setIRM(BigInteger value) {\r\n                this.irm = value;\r\n            }\r\n            public String getFAC() {\r\n                return fac;\r\n            }\r\n            public void setFAC(String value) {\r\n                this.fac = value;\r\n            }\r\n            public String getS() {\r\n                return s;\r\n            }\r\n            public void setS(String value) {\r\n                this.s = value;\r\n            }\r\n        }\r\n        @XmlAccessorType(XmlAccessType.FIELD)\r\n        @XmlType(name = &quot;&quot;)\r\n        public static class CD {\r\n            @XmlAttribute(name = &quot;CCC&quot;, required = true)\r\n            protected String ccc;\r\n            @XmlAttribute(name = &quot;CCE&quot;)\r\n            protected String cce;\r\n            @XmlAttribute(name = &quot;CCT&quot;)\r\n            protected String cct;\r\n            @XmlAttribute(name = &quot;DRF&quot;)\r\n            @XmlSchemaType(name = &quot;date&quot;)\r\n            protected XMLGregorianCalendar drf;\r\n            @XmlAttribute(name = &quot;DIO&quot;)\r\n            @XmlSchemaType(name = &quot;date&quot;)\r\n            protected XMLGregorianCalendar dio;\r\n            @XmlAttribute(name = &quot;TO&quot;, required = true)\r\n            protected String to;\r\n            @XmlAttribute(name = &quot;FO&quot;)\r\n            protected String fo;\r\n            @XmlAttribute(name = &quot;V&quot;)\r\n            protected String v;\r\n            @XmlAttribute(name = &quot;ICR&quot;)\r\n            protected BigInteger icr;\r\n            @XmlAttribute(name = &quot;IRM&quot;)\r\n            protected BigInteger irm;\r\n            @XmlAttribute(name = &quot;NR&quot;)\r\n            protected Integer nr;\r\n            @XmlAttribute(name = &quot;PR&quot;)\r\n            protected String pr;\r\n            @XmlAttribute(name = &quot;LUI&quot;)\r\n            protected Boolean lui;\r\n            public String getCCC() {\r\n                return ccc;\r\n            }\r\n            public void setCCC(String value) {\r\n                this.ccc = value;\r\n            }\r\n            public String getCCE() {\r\n                return cce;\r\n            }\r\n            public void setCCE(String value) {\r\n                this.cce = value;\r\n            }\r\n            public String getCCT() {\r\n                return cct;\r\n            }\r\n            public void setCCT(String value) {\r\n                this.cct = value;\r\n            }\r\n            public XMLGregorianCalendar getDRF() {\r\n                return drf;\r\n            }\r\n            public void setDRF(XMLGregorianCalendar value) {\r\n                this.drf = value;\r\n            }\r\n            public XMLGregorianCalendar getDIO() {\r\n                return dio;\r\n            }\r\n            public void setDIO(XMLGregorianCalendar value) {\r\n                this.dio = value;\r\n            }\r\n            public String getTO() {\r\n                return to;\r\n            }\r\n            public void setTO(String value) {\r\n                this.to = value;\r\n            }\r\n            public String getFO() {\r\n                return fo;\r\n            }\r\n            public void setFO(String value) {\r\n                this.fo = value;\r\n            }\r\n            public String getV() {\r\n                return v;\r\n            }\r\n            public void setV(String value) {\r\n                this.v = value;\r\n            }\r\n            public BigInteger getICR() {\r\n                return icr;\r\n            }\r\n            public void setICR(BigInteger value) {\r\n                this.icr = value;\r\n            }\r\n            public BigInteger getIRM() {\r\n                return irm;\r\n            }\r\n            public void setIRM(BigInteger value) {\r\n                this.irm = value;\r\n            }\r\n            public Integer getNR() {\r\n                return nr;\r\n            }\r\n            public void setNR(Integer value) {\r\n                this.nr = value;\r\n            }\r\n            public String getPR() {\r\n                return pr;\r\n            }\r\n            public void setPR(String value) {\r\n                this.pr = value;\r\n            }\r\n            public Boolean isLUI() {\r\n                return lui;\r\n            }\r\n            public void setLUI(Boolean value) {\r\n                this.lui = value;\r\n            }\r\n        }\r\n    }\r\n\r\nthe snippet in which I try to deserialize is like this\r\n\r\n\t\tJAXBContext jaxbContext = JAXBContext.newInstance(MessageResponse.class, EuriscACResponse.class);\r\n\t\tUnmarshaller unmarshaller = jaxbContext.createUnmarshaller();\r\n\r\n\t\tJAXBElement&lt;MessageResponse&gt; soapHead = unmarshaller.unmarshal(soapResponse.getSOAPHeader(), MessageResponse.class);\r\n\t\tList&lt;Object&gt; elementi = soapHead.getValue().getAny();\r\n\t\tMessageResponse result = (MessageResponse) elementi.get(0);\r\n\t\tList&lt;P&gt; risultatoFinaleHeader = result.getP();\r\n\t\tString descrizioneErroreHeader = risultatoFinaleHeader.get(0).getR().getD();\r\n\r\n\t\tif (!descrizioneErroreHeader.equals(&quot;Success.&quot;)) {\r\n\t\t\trispostaDto.setDescrErrore(&quot;Errore: &quot; + descrizioneErroreHeader);\r\n\t\t} else {\r\n\t\t\tJAXBElement&lt;EuriscACResponse&gt; soapBody = unmarshaller.unmarshal(soapResponse.getSOAPBody().getFirstChild().getFirstChild(), EuriscACResponse.class);\r\n\r\nbut it result in an error:\r\n\r\n    java.lang.IllegalArgumentException: Unexpected node type: [#text: &lt;MGResponse xmlns=&quot;urn:crif-messagegateway:2006-08-23&quot;&gt;&lt;EuriscACResponse xmlns=&quot;urn:crif-anagraficaunica-eurisc:2006-11-28&quot;&gt;&lt;CD CCC=&quot;163214729&quot; DRF=&quot;2023-02-27&quot; TO=&quot;FC&quot; FO=&quot;RC&quot; V=&quot;E&quot; ICR=&quot;5000&quot; /&gt;&lt;C CCC=&quot;163214729&quot; FO=&quot;RC&quot; V=&quot;E&quot; /&gt;&lt;/EuriscACResponse&gt;&lt;/MGResponse&gt;]\r\n\r\nwhere is my mistake?\r\nI&#39;m expecting that using the two getFirstChild lead me to the EuriscACResponse node, but obviously it&#39;s not so simple.\r\n","title":"nested body response with separate pojos","body":"<p>I have this xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;&gt;\n    &lt;soap:Header&gt;\n        &lt;MessageResponse GId=&quot;JPEF&quot; MId=&quot;65effb8f-2180-428c-9285-527fdc97fc7a&quot; MTs=&quot;2023-03-02T19:40:14.201518+01:00&quot; METs=&quot;2023-03-12T19:40:14.201518+01:00&quot; xmlns=&quot;urn:crif-message:2006-08-23&quot;&gt;\n            &lt;P SId=&quot;S18&quot; PId=&quot;EuriscAC&quot; PNs=&quot;urn:crif-anagraficaunica-eurisc:2006-11-28&quot;&gt;\n                &lt;R L=&quot;en-US&quot; C=&quot;urn:crif-messagegateway:2006-08-23:S&quot; D=&quot;Success.&quot; /&gt;\n            &lt;/P&gt;\n            &lt;Tx TxNs=&quot;urn:crif-messagegateway:2006-08-23&quot;&gt;\n                &lt;R L=&quot;en-US&quot; C=&quot;urn:crif-messagegateway:2006-08-23:S&quot; D=&quot;Success.&quot; /&gt;\n            &lt;/Tx&gt;\n        &lt;/MessageResponse&gt;\n    &lt;/soap:Header&gt;\n    &lt;soap:Body&gt;\n        &lt;MGResponse xmlns=&quot;urn:crif-messagegateway:2006-08-23&quot;&gt;&amp;lt;MGResponse xmlns=&quot;urn:crif-messagegateway:2006-08-23&quot;&amp;gt;&amp;lt;EuriscACResponse xmlns=&quot;urn:crif-anagraficaunica-eurisc:2006-11-28&quot;&amp;gt;&amp;lt;CD CCC=&quot;163214729&quot; DRF=&quot;2023-02-27&quot; TO=&quot;FC&quot; FO=&quot;RC&quot; V=&quot;E&quot; ICR=&quot;5000&quot; /&amp;gt;&amp;lt;C CCC=&quot;163214729&quot; FO=&quot;RC&quot; V=&quot;E&quot; /&amp;gt;&amp;lt;/EuriscACResponse&amp;gt;&amp;lt;/MGResponse&amp;gt;&lt;/MGResponse&gt;\n    &lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\n</code></pre>\n<p>and I have 2 pojos, one for the header and the other for the body.\nwhilst I succeed in deserialize the header, the body gives me an headache.</p>\n<p>the <em>header</em> pojo is</p>\n<pre><code>package generatedschema.header;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport javax.xml.bind.annotation.XmlAccessType;\nimport javax.xml.bind.annotation.XmlAccessorType;\nimport javax.xml.bind.annotation.XmlAnyAttribute;\nimport javax.xml.bind.annotation.XmlAnyElement;\nimport javax.xml.bind.annotation.XmlAttribute;\nimport javax.xml.bind.annotation.XmlElement;\nimport javax.xml.bind.annotation.XmlRootElement;\nimport javax.xml.bind.annotation.XmlSchemaType;\nimport javax.xml.bind.annotation.XmlType;\nimport javax.xml.bind.annotation.adapters.CollapsedStringAdapter;\nimport javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;\nimport javax.xml.datatype.XMLGregorianCalendar;\nimport javax.xml.namespace.QName;\n\n\n@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = &quot;&quot;, propOrder = {\n    &quot;p&quot;,\n    &quot;tx&quot;,\n    &quot;any&quot;\n})\n@XmlRootElement(name = &quot;MessageResponse&quot;)\npublic class MessageResponse\n    extends MessageAttributeSet\n{\n\n    @XmlElement(name = &quot;P&quot;, required = true)\n    protected List&lt;MessageResponse.P&gt; p;\n    @XmlElement(name = &quot;Tx&quot;, required = true)\n    protected MessageResponse.Tx tx;\n    @XmlAnyElement(lax = true)\n    protected List&lt;Object&gt; any;\n    @XmlAttribute(name = &quot;METs&quot;, required = true)\n    @XmlSchemaType(name = &quot;dateTime&quot;)\n    protected XMLGregorianCalendar meTs;\n\n    public List&lt;MessageResponse.P&gt; getP() {\n        if (p == null) {\n            p = new ArrayList&lt;MessageResponse.P&gt;();\n        }\n        return this.p;\n    }\n\n    public MessageResponse.Tx getTx() {\n        return tx;\n    }\n\n    public void setTx(MessageResponse.Tx value) {\n        this.tx = value;\n    }\n\n    public List&lt;Object&gt; getAny() {\n        if (any == null) {\n            any = new ArrayList&lt;Object&gt;();\n        }\n        return this.any;\n    }\n\n    public XMLGregorianCalendar getMETs() {\n        return meTs;\n    }\n\n    public void setMETs(XMLGregorianCalendar value) {\n        this.meTs = value;\n    }\n\n\n    @XmlAccessorType(XmlAccessType.FIELD)\n    @XmlType(name = &quot;&quot;, propOrder = {\n        &quot;r&quot;,\n        &quot;any&quot;\n    })\n    public static class P {\n\n        @XmlElement(name = &quot;R&quot;, required = true)\n        protected MessageResponse.P.R r;\n        @XmlAnyElement(lax = true)\n        protected List&lt;Object&gt; any;\n        @XmlAttribute(name = &quot;SId&quot;, required = true)\n        protected String sId;\n        @XmlAttribute(name = &quot;PId&quot;, required = true)\n        protected String pId;\n        @XmlAttribute(name = &quot;PNs&quot;, required = true)\n        protected String pNs;\n        @XmlAnyAttribute\n        private Map&lt;QName, String&gt; otherAttributes = new HashMap&lt;QName, String&gt;();\n\n        public MessageResponse.P.R getR() {\n            return r;\n        }\n\n        public void setR(MessageResponse.P.R value) {\n            this.r = value;\n        }\n\n        public List&lt;Object&gt; getAny() {\n            if (any == null) {\n                any = new ArrayList&lt;Object&gt;();\n            }\n            return this.any;\n        }\n\n        public String getSId() {\n            return sId;\n        }\n\n        public void setSId(String value) {\n            this.sId = value;\n        }\n\n        public String getPId() {\n            return pId;\n        }\n\n        public void setPId(String value) {\n            this.pId = value;\n        }\n\n        public String getPNs() {\n            return pNs;\n        }\n\n        public void setPNs(String value) {\n            this.pNs = value;\n        }\n\n        public Map&lt;QName, String&gt; getOtherAttributes() {\n            return otherAttributes;\n        }\n\n        @XmlAccessorType(XmlAccessType.FIELD)\n        @XmlType(name = &quot;&quot;)\n        public static class R {\n\n            @XmlAttribute(name = &quot;L&quot;, required = true)\n            @XmlJavaTypeAdapter(CollapsedStringAdapter.class)\n            @XmlSchemaType(name = &quot;language&quot;)\n            protected String l;\n            @XmlAttribute(name = &quot;C&quot;, required = true)\n            @XmlSchemaType(name = &quot;anyURI&quot;)\n            protected String c;\n            @XmlAttribute(name = &quot;D&quot;, required = true)\n            protected String d;\n            @XmlAnyAttribute\n            private Map&lt;QName, String&gt; otherAttributes = new HashMap&lt;QName, String&gt;();\n\n            public String getL() {\n                return l;\n            }\n\n            public void setL(String value) {\n                this.l = value;\n            }\n\n            public String getC() {\n                return c;\n            }\n\n            public void setC(String value) {\n                this.c = value;\n            }\n\n            public String getD() {\n                return d;\n            }\n\n            public void setD(String value) {\n                this.d = value;\n            }\n\n            public Map&lt;QName, String&gt; getOtherAttributes() {\n                return otherAttributes;\n            }\n\n        }\n\n    }\n\n\n    @XmlAccessorType(XmlAccessType.FIELD)\n    @XmlType(name = &quot;&quot;, propOrder = {\n        &quot;r&quot;,\n        &quot;any&quot;\n    })\n    public static class Tx {\n\n        @XmlElement(name = &quot;R&quot;, required = true)\n        protected MessageResponse.Tx.R r;\n        @XmlAnyElement(lax = true)\n        protected List&lt;Object&gt; any;\n        @XmlAttribute(name = &quot;TxNs&quot;, required = true)\n        protected String txNs;\n        @XmlAnyAttribute\n        private Map&lt;QName, String&gt; otherAttributes = new HashMap&lt;QName, String&gt;();\n\n        public MessageResponse.Tx.R getR() {\n            return r;\n        }\n\n        public void setR(MessageResponse.Tx.R value) {\n            this.r = value;\n        }\n\n        public List&lt;Object&gt; getAny() {\n            if (any == null) {\n                any = new ArrayList&lt;Object&gt;();\n            }\n            return this.any;\n        }\n\n        public String getTxNs() {\n            return txNs;\n        }\n\n        public void setTxNs(String value) {\n            this.txNs = value;\n        }\n\n        public Map&lt;QName, String&gt; getOtherAttributes() {\n            return otherAttributes;\n        }\n\n        @XmlAccessorType(XmlAccessType.FIELD)\n        @XmlType(name = &quot;&quot;)\n        public static class R {\n\n            @XmlAttribute(name = &quot;L&quot;, required = true)\n            @XmlJavaTypeAdapter(CollapsedStringAdapter.class)\n            @XmlSchemaType(name = &quot;language&quot;)\n            protected String l;\n            @XmlAttribute(name = &quot;C&quot;, required = true)\n            @XmlSchemaType(name = &quot;anyURI&quot;)\n            protected String c;\n            @XmlAttribute(name = &quot;D&quot;, required = true)\n            protected String d;\n            @XmlAnyAttribute\n            private Map&lt;QName, String&gt; otherAttributes = new HashMap&lt;QName, String&gt;();\n\n            public String getL() {\n                return l;\n            }\n\n            public void setL(String value) {\n                this.l = value;\n            }\n\n            public String getC() {\n                return c;\n            }\n\n            public void setC(String value) {\n                this.c = value;\n            }\n\n            public String getD() {\n                return d;\n            }\n\n            public void setD(String value) {\n                this.d = value;\n            }\n\n            public Map&lt;QName, String&gt; getOtherAttributes() {\n                return otherAttributes;\n            }\n        }\n    }\n}\n</code></pre>\n<p>and the pojo for the <em>body</em> in</p>\n<pre><code>package generatedschema.eurisc;\nimport java.math.BigInteger;\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.xml.bind.annotation.XmlAccessType;\nimport javax.xml.bind.annotation.XmlAccessorType;\nimport javax.xml.bind.annotation.XmlAttribute;\nimport javax.xml.bind.annotation.XmlElement;\nimport javax.xml.bind.annotation.XmlRootElement;\nimport javax.xml.bind.annotation.XmlSchemaType;\nimport javax.xml.bind.annotation.XmlType;\nimport javax.xml.datatype.XMLGregorianCalendar;\n\n@XmlRootElement(name = &quot;EuriscACResponse&quot;)\n@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = &quot;&quot;, propOrder = {\n    &quot;cd&quot;,\n    &quot;c&quot;,\n    &quot;e&quot;\n})\npublic class EuriscACResponse {\n    @XmlElement(name = &quot;CD&quot;)\n    protected EuriscACResponse.CD cd;\n    @XmlElement(name = &quot;C&quot;)\n    protected EuriscACResponse.C c;\n    @XmlElement(name = &quot;E&quot;)\n    protected List&lt;Errore&gt; e;\n    public EuriscACResponse.CD getCD() {\n        return cd;\n    }\n    public void setCD(EuriscACResponse.CD value) {\n        this.cd = value;\n    }\n    public EuriscACResponse.C getC() {\n        return c;\n    }\n    public void setC(EuriscACResponse.C value) {\n        this.c = value;\n    }\n    public List&lt;Errore&gt; getE() {\n        if (e == null) {\n            e = new ArrayList&lt;Errore&gt;();\n        }\n        return this.e;\n    }\n    @XmlAccessorType(XmlAccessType.FIELD)\n    @XmlType(name = &quot;&quot;)\n    public static class C {\n        @XmlAttribute(name = &quot;CCC&quot;)\n        protected String ccc;\n        @XmlAttribute(name = &quot;CCE&quot;)\n        protected String cce;\n        @XmlAttribute(name = &quot;CCT&quot;)\n        protected String cct;\n        @XmlAttribute(name = &quot;FO&quot;)\n        protected String fo;\n        @XmlAttribute(name = &quot;V&quot;)\n        protected String v;\n        @XmlAttribute(name = &quot;LUI&quot;)\n        protected Boolean lui;\n        @XmlAttribute(name = &quot;ICR&quot;)\n        protected BigInteger icr;\n        @XmlAttribute(name = &quot;IRM&quot;)\n        protected BigInteger irm;\n        @XmlAttribute(name = &quot;FAC&quot;)\n        protected String fac;\n        @XmlAttribute(name = &quot;S&quot;)\n        protected String s;\n        public String getCCC() {\n            return ccc;\n        }\n        public void setCCC(String value) {\n            this.ccc = value;\n        }\n        public String getCCE() {\n            return cce;\n        }\n        public void setCCE(String value) {\n            this.cce = value;\n        }\n        public String getCCT() {\n            return cct;\n        }\n        public void setCCT(String value) {\n            this.cct = value;\n        }\n        public String getFO() {\n            return fo;\n        }\n        public void setFO(String value) {\n            this.fo = value;\n        }\n        public String getV() {\n            return v;\n        }\n        public void setV(String value) {\n            this.v = value;\n        }\n        public Boolean isLUI() {\n            return lui;\n        }\n        public void setLUI(Boolean value) {\n            this.lui = value;\n        }\n        public BigInteger getICR() {\n            return icr;\n        }\n        public void setICR(BigInteger value) {\n            this.icr = value;\n        }\n        public BigInteger getIRM() {\n            return irm;\n        }\n        public void setIRM(BigInteger value) {\n            this.irm = value;\n        }\n        public String getFAC() {\n            return fac;\n        }\n        public void setFAC(String value) {\n            this.fac = value;\n        }\n        public String getS() {\n            return s;\n        }\n        public void setS(String value) {\n            this.s = value;\n        }\n    }\n    @XmlAccessorType(XmlAccessType.FIELD)\n    @XmlType(name = &quot;&quot;)\n    public static class CD {\n        @XmlAttribute(name = &quot;CCC&quot;, required = true)\n        protected String ccc;\n        @XmlAttribute(name = &quot;CCE&quot;)\n        protected String cce;\n        @XmlAttribute(name = &quot;CCT&quot;)\n        protected String cct;\n        @XmlAttribute(name = &quot;DRF&quot;)\n        @XmlSchemaType(name = &quot;date&quot;)\n        protected XMLGregorianCalendar drf;\n        @XmlAttribute(name = &quot;DIO&quot;)\n        @XmlSchemaType(name = &quot;date&quot;)\n        protected XMLGregorianCalendar dio;\n        @XmlAttribute(name = &quot;TO&quot;, required = true)\n        protected String to;\n        @XmlAttribute(name = &quot;FO&quot;)\n        protected String fo;\n        @XmlAttribute(name = &quot;V&quot;)\n        protected String v;\n        @XmlAttribute(name = &quot;ICR&quot;)\n        protected BigInteger icr;\n        @XmlAttribute(name = &quot;IRM&quot;)\n        protected BigInteger irm;\n        @XmlAttribute(name = &quot;NR&quot;)\n        protected Integer nr;\n        @XmlAttribute(name = &quot;PR&quot;)\n        protected String pr;\n        @XmlAttribute(name = &quot;LUI&quot;)\n        protected Boolean lui;\n        public String getCCC() {\n            return ccc;\n        }\n        public void setCCC(String value) {\n            this.ccc = value;\n        }\n        public String getCCE() {\n            return cce;\n        }\n        public void setCCE(String value) {\n            this.cce = value;\n        }\n        public String getCCT() {\n            return cct;\n        }\n        public void setCCT(String value) {\n            this.cct = value;\n        }\n        public XMLGregorianCalendar getDRF() {\n            return drf;\n        }\n        public void setDRF(XMLGregorianCalendar value) {\n            this.drf = value;\n        }\n        public XMLGregorianCalendar getDIO() {\n            return dio;\n        }\n        public void setDIO(XMLGregorianCalendar value) {\n            this.dio = value;\n        }\n        public String getTO() {\n            return to;\n        }\n        public void setTO(String value) {\n            this.to = value;\n        }\n        public String getFO() {\n            return fo;\n        }\n        public void setFO(String value) {\n            this.fo = value;\n        }\n        public String getV() {\n            return v;\n        }\n        public void setV(String value) {\n            this.v = value;\n        }\n        public BigInteger getICR() {\n            return icr;\n        }\n        public void setICR(BigInteger value) {\n            this.icr = value;\n        }\n        public BigInteger getIRM() {\n            return irm;\n        }\n        public void setIRM(BigInteger value) {\n            this.irm = value;\n        }\n        public Integer getNR() {\n            return nr;\n        }\n        public void setNR(Integer value) {\n            this.nr = value;\n        }\n        public String getPR() {\n            return pr;\n        }\n        public void setPR(String value) {\n            this.pr = value;\n        }\n        public Boolean isLUI() {\n            return lui;\n        }\n        public void setLUI(Boolean value) {\n            this.lui = value;\n        }\n    }\n}\n</code></pre>\n<p>the snippet in which I try to deserialize is like this</p>\n<pre><code>    JAXBContext jaxbContext = JAXBContext.newInstance(MessageResponse.class, EuriscACResponse.class);\n    Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();\n\n    JAXBElement&lt;MessageResponse&gt; soapHead = unmarshaller.unmarshal(soapResponse.getSOAPHeader(), MessageResponse.class);\n    List&lt;Object&gt; elementi = soapHead.getValue().getAny();\n    MessageResponse result = (MessageResponse) elementi.get(0);\n    List&lt;P&gt; risultatoFinaleHeader = result.getP();\n    String descrizioneErroreHeader = risultatoFinaleHeader.get(0).getR().getD();\n\n    if (!descrizioneErroreHeader.equals(&quot;Success.&quot;)) {\n        rispostaDto.setDescrErrore(&quot;Errore: &quot; + descrizioneErroreHeader);\n    } else {\n        JAXBElement&lt;EuriscACResponse&gt; soapBody = unmarshaller.unmarshal(soapResponse.getSOAPBody().getFirstChild().getFirstChild(), EuriscACResponse.class);\n</code></pre>\n<p>but it result in an error:</p>\n<pre><code>java.lang.IllegalArgumentException: Unexpected node type: [#text: &lt;MGResponse xmlns=&quot;urn:crif-messagegateway:2006-08-23&quot;&gt;&lt;EuriscACResponse xmlns=&quot;urn:crif-anagraficaunica-eurisc:2006-11-28&quot;&gt;&lt;CD CCC=&quot;163214729&quot; DRF=&quot;2023-02-27&quot; TO=&quot;FC&quot; FO=&quot;RC&quot; V=&quot;E&quot; ICR=&quot;5000&quot; /&gt;&lt;C CCC=&quot;163214729&quot; FO=&quot;RC&quot; V=&quot;E&quot; /&gt;&lt;/EuriscACResponse&gt;&lt;/MGResponse&gt;]\n</code></pre>\n<p>where is my mistake?\nI'm expecting that using the two getFirstChild lead me to the EuriscACResponse node, but obviously it's not so simple.</p>\n"},{"tags":["java","input","java.util.scanner","nosuchelementexception"],"answers":[{"comments":[{"owner":{"account_id":383107,"reputation":50638,"user_id":738746,"accept_rate":97,"display_name":"Bhesh Gurung"},"score":0,"creation_date":1351045443,"post_id":13042106,"comment_id":17707935,"body_markdown":"But they are in different methods right? Where they are created and closed.","body":"But they are in different methods right? Where they are created and closed."},{"owner":{"display_name":"user1766873"},"score":0,"creation_date":1351045538,"post_id":13042106,"comment_id":17707953,"body_markdown":"In the original code they are. In fixed code I use one Scanner instance for both methods.","body":"In the original code they are. In fixed code I use one Scanner instance for both methods."},{"owner":{"account_id":1885169,"reputation":34027,"user_id":1704529,"display_name":"Yogendra Singh"},"score":0,"creation_date":1351045550,"post_id":13042106,"comment_id":17707954,"body_markdown":"I am still puzzled why `sc.next()` or even `sc.nextLine()` in second method are causing the exception.","body":"I am still puzzled why <code>sc.next()</code> or even <code>sc.nextLine()</code> in second method are causing the exception."},{"owner":{"account_id":383107,"reputation":50638,"user_id":738746,"accept_rate":97,"display_name":"Bhesh Gurung"},"score":0,"creation_date":1351045617,"post_id":13042106,"comment_id":17707964,"body_markdown":"@YogendraSingh: Is the nextLine() also throwing the same exception?","body":"@YogendraSingh: Is the nextLine() also throwing the same exception?"},{"owner":{"account_id":1885169,"reputation":34027,"user_id":1704529,"display_name":"Yogendra Singh"},"score":0,"creation_date":1351045685,"post_id":13042106,"comment_id":17707979,"body_markdown":"@BheshGurung: To me, it says `java.util.NoSuchElementException: No line found`","body":"@BheshGurung: To me, it says <code>java.util.NoSuchElementException: No line found</code>"},{"owner":{"account_id":1971095,"reputation":1537,"user_id":1769999,"accept_rate":84,"display_name":"fortune"},"score":0,"creation_date":1351081562,"post_id":13042106,"comment_id":17719127,"body_markdown":"@OlegOstroumov Eclipse throws the error &quot;Illegal modifier for parameter scan; only final is permitted&quot; when I try to create a static Scanner.","body":"@OlegOstroumov Eclipse throws the error &quot;Illegal modifier for parameter scan; only final is permitted&quot; when I try to create a static Scanner."}],"tags":[],"owner":{"display_name":"user1766873"},"comment_count":6,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1351046827,"creation_date":1351045131,"answer_id":13042106,"question_id":13042008,"body_markdown":"The problem is\r\n\r\n&gt; When a Scanner is closed, it will close its input source if the source implements the Closeable interface.\r\n\r\nhttp://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html\r\n\r\nThus `scan.close()` closes `System.in`.\r\n\r\n\r\nTo fix it you can make\r\n\r\n`Scanner scan` `static`\r\nand do not close it in PromptCustomerQty.  Code below works.\r\n\r\n\r\n    public static void main (String[] args) {   \r\n\r\n    // Create a customer\r\n    // Future proofing the possabiltiies of multiple customers\r\n    Customer customer = new Customer(&quot;Will&quot;);\r\n\r\n    // Create object for each Product\r\n    // (Name,Code,Description,Price)\r\n    // Initalize Qty at 0\r\n    Product Computer = new Product(&quot;Computer&quot;,&quot;PC1003&quot;,&quot;Basic Computer&quot;,399.99); \r\n    Product Monitor = new Product(&quot;Monitor&quot;,&quot;MN1003&quot;,&quot;LCD Monitor&quot;,99.99);\r\n    Product Printer = new Product(&quot;Printer&quot;,&quot;PR1003x&quot;,&quot;Inkjet Printer&quot;,54.23);\r\n\r\n    // Define internal variables \r\n    // ## DONT CHANGE \r\n    ArrayList&lt;Product&gt; ProductList = new ArrayList&lt;Product&gt;(); // List to store Products\r\n    String formatString = &quot;%-15s %-10s %-20s %-10s %-10s %n&quot;; // Default format for output\r\n\r\n    // Add objects to list\r\n    ProductList.add(Computer);\r\n    ProductList.add(Monitor);\r\n    ProductList.add(Printer);\r\n\r\n    // Ask users for quantities \r\n    PromptCustomerQty(customer, ProductList);\r\n\r\n    // Ask user for payment method\r\n    PromptCustomerPayment(customer);\r\n\r\n    // Create the header\r\n    PrintHeader(customer, formatString);\r\n\r\n    // Create Body\r\n    PrintBody(ProductList, formatString);   \r\n    }\r\n\r\n    static Scanner scan;\r\n\r\n    public static void PromptCustomerQty(Customer customer, ArrayList&lt;Product&gt; ProductList)               {\r\n    // Initiate a Scanner\r\n    scan = new Scanner(System.in);\r\n\r\n    // **** VARIABLES ****\r\n    int qty = 0;\r\n\r\n    // Greet Customer\r\n    System.out.println(&quot;Hello &quot; + customer.getName());\r\n\r\n    // Loop through each item and ask for qty desired\r\n    for (Product p : ProductList) {\r\n\r\n        do {\r\n        // Ask user for qty\r\n        System.out.println(&quot;How many would you like for product: &quot; + p.name);\r\n        System.out.print(&quot;&gt; &quot;);\r\n\r\n        // Get input and set qty for the object\r\n        qty = scan.nextInt();\r\n\r\n        }\r\n        while (qty &lt; 0); // Validation\r\n\r\n        p.setQty(qty); // Set qty for object\r\n        qty = 0; // Reset count\r\n    }\r\n\r\n    // Cleanup\r\n\r\n    }\r\n\r\n    public static void PromptCustomerPayment (Customer customer) {\r\n    // Variables\r\n    String payment = &quot;&quot;;\r\n\r\n    // Prompt User\r\n    do {\r\n    System.out.println(&quot;Would you like to pay in full? [Yes/No]&quot;);\r\n    System.out.print(&quot;&gt; &quot;);\r\n\r\n    payment = scan.next();\r\n\r\n    } while ((!payment.toLowerCase().equals(&quot;yes&quot;)) &amp;&amp; (!payment.toLowerCase().equals(&quot;no&quot;)));\r\n\r\n    // Check/set result\r\n    if (payment.toLowerCase() == &quot;yes&quot;) {\r\n        customer.setPaidInFull(true);\r\n    }\r\n    else {\r\n        customer.setPaidInFull(false);\r\n    }\r\n    }\r\n\r\n\r\nOn a side note, you shouldn&#39;t use `==` for String comparision, use `.equals` instead.","title":"java.util.NoSuchElementException - Scanner reading user input","body":"<p>The problem is</p>\n\n<blockquote>\n  <p>When a Scanner is closed, it will close its input source if the source implements the Closeable interface.</p>\n</blockquote>\n\n<p><a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html</a></p>\n\n<p>Thus <code>scan.close()</code> closes <code>System.in</code>.</p>\n\n<p>To fix it you can make</p>\n\n<p><code>Scanner scan</code> <code>static</code>\nand do not close it in PromptCustomerQty.  Code below works.</p>\n\n<pre><code>public static void main (String[] args) {   \n\n// Create a customer\n// Future proofing the possabiltiies of multiple customers\nCustomer customer = new Customer(\"Will\");\n\n// Create object for each Product\n// (Name,Code,Description,Price)\n// Initalize Qty at 0\nProduct Computer = new Product(\"Computer\",\"PC1003\",\"Basic Computer\",399.99); \nProduct Monitor = new Product(\"Monitor\",\"MN1003\",\"LCD Monitor\",99.99);\nProduct Printer = new Product(\"Printer\",\"PR1003x\",\"Inkjet Printer\",54.23);\n\n// Define internal variables \n// ## DONT CHANGE \nArrayList&lt;Product&gt; ProductList = new ArrayList&lt;Product&gt;(); // List to store Products\nString formatString = \"%-15s %-10s %-20s %-10s %-10s %n\"; // Default format for output\n\n// Add objects to list\nProductList.add(Computer);\nProductList.add(Monitor);\nProductList.add(Printer);\n\n// Ask users for quantities \nPromptCustomerQty(customer, ProductList);\n\n// Ask user for payment method\nPromptCustomerPayment(customer);\n\n// Create the header\nPrintHeader(customer, formatString);\n\n// Create Body\nPrintBody(ProductList, formatString);   \n}\n\nstatic Scanner scan;\n\npublic static void PromptCustomerQty(Customer customer, ArrayList&lt;Product&gt; ProductList)               {\n// Initiate a Scanner\nscan = new Scanner(System.in);\n\n// **** VARIABLES ****\nint qty = 0;\n\n// Greet Customer\nSystem.out.println(\"Hello \" + customer.getName());\n\n// Loop through each item and ask for qty desired\nfor (Product p : ProductList) {\n\n    do {\n    // Ask user for qty\n    System.out.println(\"How many would you like for product: \" + p.name);\n    System.out.print(\"&gt; \");\n\n    // Get input and set qty for the object\n    qty = scan.nextInt();\n\n    }\n    while (qty &lt; 0); // Validation\n\n    p.setQty(qty); // Set qty for object\n    qty = 0; // Reset count\n}\n\n// Cleanup\n\n}\n\npublic static void PromptCustomerPayment (Customer customer) {\n// Variables\nString payment = \"\";\n\n// Prompt User\ndo {\nSystem.out.println(\"Would you like to pay in full? [Yes/No]\");\nSystem.out.print(\"&gt; \");\n\npayment = scan.next();\n\n} while ((!payment.toLowerCase().equals(\"yes\")) &amp;&amp; (!payment.toLowerCase().equals(\"no\")));\n\n// Check/set result\nif (payment.toLowerCase() == \"yes\") {\n    customer.setPaidInFull(true);\n}\nelse {\n    customer.setPaidInFull(false);\n}\n}\n</code></pre>\n\n<p>On a side note, you shouldn't use <code>==</code> for String comparision, use <code>.equals</code> instead.</p>\n"},{"comments":[{"owner":{"account_id":1971095,"reputation":1537,"user_id":1769999,"accept_rate":84,"display_name":"fortune"},"score":14,"creation_date":1351081235,"post_id":13042296,"comment_id":17718997,"body_markdown":"Thank you for the response. Your explanation of what is actually happening behind the scenes is very helpful","body":"Thank you for the response. Your explanation of what is actually happening behind the scenes is very helpful"},{"owner":{"account_id":8747428,"reputation":455,"user_id":6542133,"accept_rate":75,"display_name":"Jake Stokes"},"score":0,"creation_date":1502365875,"post_id":13042296,"comment_id":78184041,"body_markdown":"Oh my god, I was stuck for so long until I found this post. Thank you so much! You&#39;re awesome.","body":"Oh my god, I was stuck for so long until I found this post. Thank you so much! You&#39;re awesome."},{"owner":{"account_id":7689924,"reputation":656,"user_id":5826535,"display_name":"JedaiCoder"},"score":0,"creation_date":1596601852,"post_id":13042296,"comment_id":111860282,"body_markdown":"Although it is good practice to close the Scanner, to avoid this error wouldn&#39;t it be better to never close the Scanner at all. It avoids all these errors. We can always suppress warnings","body":"Although it is good practice to close the Scanner, to avoid this error wouldn&#39;t it be better to never close the Scanner at all. It avoids all these errors. We can always suppress warnings"},{"owner":{"account_id":558561,"reputation":502,"user_id":893369,"display_name":"vitrums"},"score":2,"creation_date":1606580176,"post_id":13042296,"comment_id":115005514,"body_markdown":"I was wondering if this is a case of a misleading exception. I.e. there&#39;s a clear condition of the closed input stream and yet the behavior is if there was nothing wrong with it, - just a no such element... Reminds me of the runtime chaos caused by NullPointerException just in a milder form.","body":"I was wondering if this is a case of a misleading exception. I.e. there&#39;s a clear condition of the closed input stream and yet the behavior is if there was nothing wrong with it, - just a no such element... Reminds me of the runtime chaos caused by NullPointerException just in a milder form."},{"owner":{"account_id":318931,"reputation":2979,"user_id":636398,"accept_rate":50,"display_name":"Ida"},"score":0,"creation_date":1666325744,"post_id":13042296,"comment_id":130915008,"body_markdown":"Yet, from the perspective of API design, exposing `scanner` to users (i.e., adding it to method signatures) might be confusing, since it is internal implementation details that should be hidden from the users.","body":"Yet, from the perspective of API design, exposing <code>scanner</code> to users (i.e., adding it to method signatures) might be confusing, since it is internal implementation details that should be hidden from the users."}],"tags":[],"owner":{"account_id":1885169,"reputation":34027,"user_id":1704529,"display_name":"Yogendra Singh"},"comment_count":5,"down_vote_count":0,"up_vote_count":190,"is_accepted":true,"score":190,"last_activity_date":1469973276,"creation_date":1351046757,"answer_id":13042296,"question_id":13042008,"body_markdown":"**This has really puzzled me for a while but this is what I found in the end.**\r\n\r\nWhen you call, `sc.close()` in first method, it not only closes your scanner but closes your `System.in` input stream as well. You can verify it by printing its status at very top of the second method as :\r\n\r\n        System.out.println(System.in.available());\r\n\r\nSo, now when you re-instantiate, `Scanner` in second method, it doesn&#39;t find any open `System.in` stream and hence the exception.\r\n\r\nI doubt if there is any way out to reopen `System.in` because:\r\n\r\n`public void close() throws IOException --&gt; Closes this input stream and releases any system resources associated with this stream. The general contract of close is that it closes the input stream. A closed stream cannot perform input operations and **cannot be reopened.**`\r\n\r\nThe only good solution for your problem is to initiate the `Scanner` in your main method, pass that as argument in your two methods, and close it again in your main method e.g.:\r\n   \r\n`main` method related code block:\r\n\r\n    Scanner scanner = new Scanner(System.in);  \r\n    \r\n    // Ask users for quantities \r\n    PromptCustomerQty(customer, ProductList, scanner );\r\n\r\n    // Ask user for payment method\r\n    PromptCustomerPayment(customer, scanner );\r\n     \r\n    //close the scanner \r\n    scanner.close();\r\n\r\n\r\nYour Methods:\r\n\r\n     public static void PromptCustomerQty(Customer customer, \r\n                                 ArrayList&lt;Product&gt; ProductList, Scanner scanner) {\r\n\r\n        // no more scanner instantiation\r\n        ...\r\n        // no more scanner close\r\n     }\r\n\r\n\r\n     public static void PromptCustomerPayment (Customer customer, Scanner sc) {\r\n\r\n        // no more scanner instantiation\r\n        ...\r\n        // no more scanner close\r\n     }\r\n\r\nHope this gives you some insight about the failure and possible resolution.\r\n","title":"java.util.NoSuchElementException - Scanner reading user input","body":"<p><strong>This has really puzzled me for a while but this is what I found in the end.</strong></p>\n\n<p>When you call, <code>sc.close()</code> in first method, it not only closes your scanner but closes your <code>System.in</code> input stream as well. You can verify it by printing its status at very top of the second method as :</p>\n\n<pre><code>    System.out.println(System.in.available());\n</code></pre>\n\n<p>So, now when you re-instantiate, <code>Scanner</code> in second method, it doesn't find any open <code>System.in</code> stream and hence the exception.</p>\n\n<p>I doubt if there is any way out to reopen <code>System.in</code> because:</p>\n\n<p><code>public void close() throws IOException --&gt; Closes this input stream and releases any system resources associated with this stream. The general contract of close is that it closes the input stream. A closed stream cannot perform input operations and **cannot be reopened.**</code></p>\n\n<p>The only good solution for your problem is to initiate the <code>Scanner</code> in your main method, pass that as argument in your two methods, and close it again in your main method e.g.:</p>\n\n<p><code>main</code> method related code block:</p>\n\n<pre><code>Scanner scanner = new Scanner(System.in);  \n\n// Ask users for quantities \nPromptCustomerQty(customer, ProductList, scanner );\n\n// Ask user for payment method\nPromptCustomerPayment(customer, scanner );\n\n//close the scanner \nscanner.close();\n</code></pre>\n\n<p>Your Methods:</p>\n\n<pre><code> public static void PromptCustomerQty(Customer customer, \n                             ArrayList&lt;Product&gt; ProductList, Scanner scanner) {\n\n    // no more scanner instantiation\n    ...\n    // no more scanner close\n }\n\n\n public static void PromptCustomerPayment (Customer customer, Scanner sc) {\n\n    // no more scanner instantiation\n    ...\n    // no more scanner close\n }\n</code></pre>\n\n<p>Hope this gives you some insight about the failure and possible resolution.</p>\n"},{"tags":[],"owner":{"account_id":19204643,"reputation":95,"user_id":14031802,"display_name":"Shady"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1597743876,"creation_date":1597737687,"answer_id":63464274,"question_id":13042008,"body_markdown":"You need to remove the scanner closing lines: `scan.close();`\r\n\r\nIt happened to me before and that was the reason.\r\n\r\n\r\n\r\n","title":"java.util.NoSuchElementException - Scanner reading user input","body":"<p>You need to remove the scanner closing lines: <code>scan.close();</code></p>\n<p>It happened to me before and that was the reason.</p>\n"},{"tags":[],"owner":{"account_id":19958834,"reputation":21,"user_id":14626924,"display_name":"Eduardo Salvadinha"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1605195959,"creation_date":1605195959,"answer_id":64807117,"question_id":13042008,"body_markdown":"the reason of the exception has been explained already, however the suggested solution isn&#39;t really the best.\r\n\r\nYou should create a class that keeps a Scanner as private using Singleton Pattern, that makes that scanner unique on your code.\r\n\r\nThen you can implement the methods you need or you can create a getScanner ( not recommended ) and you can control it with a private boolean, something like alreadyClosed.\r\n\r\nIf you are not aware how to use Singleton Pattern, here&#39;s a example:\r\n\r\n```\r\npublic class Reader {\r\n\t\r\n\t\r\n\tprivate Scanner reader;\r\n\tprivate static Reader singleton = null;\r\n\tprivate boolean alreadyClosed;\r\n\t\r\n\tprivate Reader() {\r\n\t\talreadyClosed = false;\r\n\t\treader = new Scanner(System.in);\r\n\t}\r\n\t\r\n\tpublic static Reader getInstance() {\r\n\t\tif(singleton == null) {\r\n\t\t\tsingleton = new Reader();\r\n\t\t}\r\n\t\treturn singleton;\r\n\t}\r\n\t\r\n\tpublic int nextInt() throws AlreadyClosedException {\r\n\t\tif(!alreadyClosed) {\r\n\t\t\treturn reader.nextInt();\r\n\t\t}\r\n\t\tthrow new AlreadyClosedException(); //Custom exception\r\n\t}\r\n\t\r\n\tpublic double nextDouble() throws AlreadyClosedException {\r\n\t\tif(!alreadyClosed) {\r\n\t\t\treturn reader.nextDouble();\r\n\t\t}\r\n\t\tthrow new AlreadyClosedException();\r\n\t}\r\n\t\r\n\tpublic String nextLine() throws AlreadyClosedException {\r\n\t\tif(!alreadyClosed) {\r\n\t\t\treturn reader.nextLine();\r\n\t\t}\r\n\t\tthrow new AlreadyClosedException();\r\n\t}\r\n\t\r\n\tpublic void close() {\r\n\t\talreadyClosed = true;\r\n\t\treader.close();\r\n\t}\t\r\n}\r\n\r\n```\r\n","title":"java.util.NoSuchElementException - Scanner reading user input","body":"<p>the reason of the exception has been explained already, however the suggested solution isn't really the best.</p>\n<p>You should create a class that keeps a Scanner as private using Singleton Pattern, that makes that scanner unique on your code.</p>\n<p>Then you can implement the methods you need or you can create a getScanner ( not recommended ) and you can control it with a private boolean, something like alreadyClosed.</p>\n<p>If you are not aware how to use Singleton Pattern, here's a example:</p>\n<pre><code>public class Reader {\n    \n    \n    private Scanner reader;\n    private static Reader singleton = null;\n    private boolean alreadyClosed;\n    \n    private Reader() {\n        alreadyClosed = false;\n        reader = new Scanner(System.in);\n    }\n    \n    public static Reader getInstance() {\n        if(singleton == null) {\n            singleton = new Reader();\n        }\n        return singleton;\n    }\n    \n    public int nextInt() throws AlreadyClosedException {\n        if(!alreadyClosed) {\n            return reader.nextInt();\n        }\n        throw new AlreadyClosedException(); //Custom exception\n    }\n    \n    public double nextDouble() throws AlreadyClosedException {\n        if(!alreadyClosed) {\n            return reader.nextDouble();\n        }\n        throw new AlreadyClosedException();\n    }\n    \n    public String nextLine() throws AlreadyClosedException {\n        if(!alreadyClosed) {\n            return reader.nextLine();\n        }\n        throw new AlreadyClosedException();\n    }\n    \n    public void close() {\n        alreadyClosed = true;\n        reader.close();\n    }   \n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14633071,"reputation":358,"user_id":10568210,"display_name":"Alex Ertl"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647227770,"creation_date":1647227770,"answer_id":71462635,"question_id":13042008,"body_markdown":"For anyone who arrived here while taking an online exam on a site like HackerRank-\r\n\r\nYou might receive this if you are trying to test your (possibly) perfectly fine code by clicking the button to execute main() with custom input.\r\n\r\nIn this case, you need to be clicking the other button, something like &quot;Run Unit Tests&quot;. You&#39;re likely only being evaluated on whether the code passes the unit tests they wrote- not your ability to refactor code to fewer LOC or your coding style.","title":"java.util.NoSuchElementException - Scanner reading user input","body":"<p>For anyone who arrived here while taking an online exam on a site like HackerRank-</p>\n<p>You might receive this if you are trying to test your (possibly) perfectly fine code by clicking the button to execute main() with custom input.</p>\n<p>In this case, you need to be clicking the other button, something like &quot;Run Unit Tests&quot;. You're likely only being evaluated on whether the code passes the unit tests they wrote- not your ability to refactor code to fewer LOC or your coding style.</p>\n"},{"tags":[],"owner":{"account_id":27929294,"reputation":1,"user_id":21327729,"display_name":"Maheeka Kossinna"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677865299,"creation_date":1677865299,"answer_id":75630268,"question_id":13042008,"body_markdown":"Found this thread because I ran into the same problem. After finding the cause from here, a method I found to be useful was to use the separate scanner objects for the different uses (since it is otherwise buggy if taking multiple inputs with a single scanner objects), and then close all scanner objects when all scanner objects are finished being used. Made for clearer code and didn&#39;t run into any problems after that.","title":"java.util.NoSuchElementException - Scanner reading user input","body":"<p>Found this thread because I ran into the same problem. After finding the cause from here, a method I found to be useful was to use the separate scanner objects for the different uses (since it is otherwise buggy if taking multiple inputs with a single scanner objects), and then close all scanner objects when all scanner objects are finished being used. Made for clearer code and didn't run into any problems after that.</p>\n"}],"owner":{"account_id":1971095,"reputation":1537,"user_id":1769999,"accept_rate":84,"display_name":"fortune"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":156683,"favorite_count":0,"down_vote_count":1,"up_vote_count":91,"accepted_answer_id":13042296,"answer_count":6,"score":90,"last_activity_date":1677865299,"creation_date":1351044285,"question_id":13042008,"body_markdown":"I&#39;m new to using Java, but I have some previous experience with C#. The issue I&#39;m having comes with reading user input from console.\r\n\r\nI&#39;m running into the &quot;java.util.NoSuchElementException&quot; error with this portion of code:\r\n\r\n    payment = sc.next(); // PromptCustomerPayment function\r\n\r\nI have two functions that get user input:\r\n\r\n - PromptCustomerQty\r\n - PromptCustomerPayment\r\n\r\nIf I don&#39;t call PromptCustomerQty then I don&#39;t get this error, which leads me to believe I am doing something wrong with scanner. Below is my full code sample. I appreciate any help. \r\n\r\n    public static void main (String[] args) {\t\r\n\t\t\r\n\t\t// Create a customer\r\n\t\t// Future proofing the possabiltiies of multiple customers\r\n\t\tCustomer customer = new Customer(&quot;Will&quot;);\r\n\t\t\r\n\t\t// Create object for each Product\r\n\t\t// (Name,Code,Description,Price)\r\n\t\t// Initalize Qty at 0\r\n\t\tProduct Computer = new Product(&quot;Computer&quot;,&quot;PC1003&quot;,&quot;Basic Computer&quot;,399.99); \r\n\t\tProduct Monitor = new Product(&quot;Monitor&quot;,&quot;MN1003&quot;,&quot;LCD Monitor&quot;,99.99);\r\n\t\tProduct Printer = new Product(&quot;Printer&quot;,&quot;PR1003x&quot;,&quot;Inkjet Printer&quot;,54.23);\r\n\t\t\r\n\t\t// Define internal variables \r\n\t\t// ## DONT CHANGE \r\n\t\tArrayList&lt;Product&gt; ProductList = new ArrayList&lt;Product&gt;(); // List to store Products\r\n\t\tString formatString = &quot;%-15s %-10s %-20s %-10s %-10s %n&quot;; // Default format for output\r\n\r\n\t\t// Add objects to list\r\n\t\tProductList.add(Computer);\r\n\t\tProductList.add(Monitor);\r\n\t\tProductList.add(Printer);\r\n\t\t\r\n\t\t// Ask users for quantities \r\n\t\tPromptCustomerQty(customer, ProductList);\r\n\t\t\r\n\t\t// Ask user for payment method\r\n\t\tPromptCustomerPayment(customer);\r\n\t\t\r\n\t\t// Create the header\r\n\t\tPrintHeader(customer, formatString);\r\n\t\t\r\n\t\t// Create Body\r\n\t\tPrintBody(ProductList, formatString);\t\r\n\t}\r\n\t\r\n\tpublic static void PromptCustomerQty(Customer customer, ArrayList&lt;Product&gt; ProductList) {\r\n\t\t// Initiate a Scanner\r\n\t\tScanner scan = new Scanner(System.in);\r\n\t\t\r\n\t\t// **** VARIABLES ****\r\n\t\tint qty = 0;\r\n\t\t\r\n\t\t// Greet Customer\r\n\t\tSystem.out.println(&quot;Hello &quot; + customer.getName());\r\n\t\t\r\n\t\t// Loop through each item and ask for qty desired\r\n\t\tfor (Product p : ProductList) {\r\n\t\r\n\t\t\tdo {\r\n\t\t\t// Ask user for qty\r\n\t\t\tSystem.out.println(&quot;How many would you like for product: &quot; + p.name);\r\n\t\t\tSystem.out.print(&quot;&gt; &quot;);\r\n\t\t\t\r\n\t\t\t// Get input and set qty for the object\r\n\t\t\tqty = scan.nextInt();\r\n\t\t\t\r\n\t\t\t}\r\n\t\t\twhile (qty &lt; 0); // Validation\r\n\t\t\t\r\n\t\t\tp.setQty(qty); // Set qty for object\r\n\t\t\tqty = 0; // Reset count\r\n\t\t}\r\n\t\t\r\n\t\t// Cleanup\r\n\t\tscan.close();\r\n\t}\r\n\t\r\n\tpublic static void PromptCustomerPayment (Customer customer) {\r\n\t\t// Initiate Scanner \r\n\t\tScanner sc = new Scanner(System.in);\r\n\t\t\r\n\t\t// Variables\r\n\t\tString payment = &quot;&quot;;\r\n\r\n\t\t// Prompt User\r\n\t\tdo {\r\n\t\tSystem.out.println(&quot;Would you like to pay in full? [Yes/No]&quot;);\r\n\t\tSystem.out.print(&quot;&gt; &quot;);\r\n\t\t\r\n\t\tpayment = sc.next();\r\n\t\t\r\n\t\t} while ((!payment.toLowerCase().equals(&quot;yes&quot;)) &amp;&amp; (!payment.toLowerCase().equals(&quot;no&quot;)));\r\n\t\t\r\n\t\t// Check/set result\r\n\t\tif (payment.toLowerCase().equals(&quot;yes&quot;)) {\r\n\t\t\tcustomer.setPaidInFull(true);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcustomer.setPaidInFull(false);\r\n\t\t}\r\n\t\t\r\n\t\t// Cleanup\r\n\t\tsc.close();\t\r\n\t}","title":"java.util.NoSuchElementException - Scanner reading user input","body":"<p>I'm new to using Java, but I have some previous experience with C#. The issue I'm having comes with reading user input from console.</p>\n<p>I'm running into the &quot;java.util.NoSuchElementException&quot; error with this portion of code:</p>\n<pre><code>payment = sc.next(); // PromptCustomerPayment function\n</code></pre>\n<p>I have two functions that get user input:</p>\n<ul>\n<li>PromptCustomerQty</li>\n<li>PromptCustomerPayment</li>\n</ul>\n<p>If I don't call PromptCustomerQty then I don't get this error, which leads me to believe I am doing something wrong with scanner. Below is my full code sample. I appreciate any help.</p>\n<pre><code>public static void main (String[] args) {   \n    \n    // Create a customer\n    // Future proofing the possabiltiies of multiple customers\n    Customer customer = new Customer(&quot;Will&quot;);\n    \n    // Create object for each Product\n    // (Name,Code,Description,Price)\n    // Initalize Qty at 0\n    Product Computer = new Product(&quot;Computer&quot;,&quot;PC1003&quot;,&quot;Basic Computer&quot;,399.99); \n    Product Monitor = new Product(&quot;Monitor&quot;,&quot;MN1003&quot;,&quot;LCD Monitor&quot;,99.99);\n    Product Printer = new Product(&quot;Printer&quot;,&quot;PR1003x&quot;,&quot;Inkjet Printer&quot;,54.23);\n    \n    // Define internal variables \n    // ## DONT CHANGE \n    ArrayList&lt;Product&gt; ProductList = new ArrayList&lt;Product&gt;(); // List to store Products\n    String formatString = &quot;%-15s %-10s %-20s %-10s %-10s %n&quot;; // Default format for output\n\n    // Add objects to list\n    ProductList.add(Computer);\n    ProductList.add(Monitor);\n    ProductList.add(Printer);\n    \n    // Ask users for quantities \n    PromptCustomerQty(customer, ProductList);\n    \n    // Ask user for payment method\n    PromptCustomerPayment(customer);\n    \n    // Create the header\n    PrintHeader(customer, formatString);\n    \n    // Create Body\n    PrintBody(ProductList, formatString);   \n}\n\npublic static void PromptCustomerQty(Customer customer, ArrayList&lt;Product&gt; ProductList) {\n    // Initiate a Scanner\n    Scanner scan = new Scanner(System.in);\n    \n    // **** VARIABLES ****\n    int qty = 0;\n    \n    // Greet Customer\n    System.out.println(&quot;Hello &quot; + customer.getName());\n    \n    // Loop through each item and ask for qty desired\n    for (Product p : ProductList) {\n\n        do {\n        // Ask user for qty\n        System.out.println(&quot;How many would you like for product: &quot; + p.name);\n        System.out.print(&quot;&gt; &quot;);\n        \n        // Get input and set qty for the object\n        qty = scan.nextInt();\n        \n        }\n        while (qty &lt; 0); // Validation\n        \n        p.setQty(qty); // Set qty for object\n        qty = 0; // Reset count\n    }\n    \n    // Cleanup\n    scan.close();\n}\n\npublic static void PromptCustomerPayment (Customer customer) {\n    // Initiate Scanner \n    Scanner sc = new Scanner(System.in);\n    \n    // Variables\n    String payment = &quot;&quot;;\n\n    // Prompt User\n    do {\n    System.out.println(&quot;Would you like to pay in full? [Yes/No]&quot;);\n    System.out.print(&quot;&gt; &quot;);\n    \n    payment = sc.next();\n    \n    } while ((!payment.toLowerCase().equals(&quot;yes&quot;)) &amp;&amp; (!payment.toLowerCase().equals(&quot;no&quot;)));\n    \n    // Check/set result\n    if (payment.toLowerCase().equals(&quot;yes&quot;)) {\n        customer.setPaidInFull(true);\n    }\n    else {\n        customer.setPaidInFull(false);\n    }\n    \n    // Cleanup\n    sc.close(); \n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":4395013,"reputation":1126,"user_id":3582362,"accept_rate":100,"display_name":"Calvin P."},"score":0,"creation_date":1677862219,"post_id":75629684,"comment_id":133427127,"body_markdown":"Just to clarify, are you trying to print each transaction or just the total income/expense for each day?","body":"Just to clarify, are you trying to print each transaction or just the total income/expense for each day?"},{"owner":{"account_id":27928720,"reputation":35,"user_id":21327269,"display_name":"koderkodo"},"score":0,"creation_date":1677862584,"post_id":75629684,"comment_id":133427230,"body_markdown":"No, I don&#39;t need to print every transaction, I just want to print total balance for each date where transactions are created, for example, if on `03/03/2023` user created three transactions and I want to print `income - expense` result. I think I gave a good example at the end of the questions about what expected output is. \n\nIf the user has transactions for 10 different dates, show `income - expense` result for every date","body":"No, I don&#39;t need to print every transaction, I just want to print total balance for each date where transactions are created, for example, if on <code>03&#47;03&#47;2023</code> user created three transactions and I want to print <code>income - expense</code> result. I think I gave a good example at the end of the questions about what expected output is.   If the user has transactions for 10 different dates, show <code>income - expense</code> result for every date"},{"owner":{"account_id":27928720,"reputation":35,"user_id":21327269,"display_name":"koderkodo"},"score":0,"creation_date":1677862705,"post_id":75629684,"comment_id":133427272,"body_markdown":"See the example in question after `.... Imagine user have the next transactions.` and also I provided more examples at the end of the question.","body":"See the example in question after <code>.... Imagine user have the next transactions.</code> and also I provided more examples at the end of the question."}],"owner":{"account_id":27928720,"reputation":35,"user_id":21327269,"display_name":"koderkodo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677865083,"creation_date":1677861421,"question_id":75629684,"body_markdown":"I&#39;ll be direct.\r\n\r\nUser have wallets, on each wallet they can create a transaction, the transaction can be income or expense.\r\n\r\nWhen a user is creating a transaction he also picks a date when that transaction is created, then I have a controller to display all user transactions. And this is the format to display it. Imagine user have the next transactions.\r\n\r\n`Income: &gt; Amount: 50, Date: 03/03/2023`\r\n\r\n`Income: &gt; Amount: 50, Date: 03/03/2023`\r\n\r\n`Expense: &gt; Amount: 50, Date: 03/03/2023`\r\n\r\n`Income: &gt; Amount: 100, Date: 03/16/2023`\r\n\r\n`Expense: &gt; Amount: 15, Date: 03/16/2023`\r\n\r\nAnd on the page I would like to display:\r\n\r\n`Transaction: 03/03/2023/ Balance: 100` Because, that is `income - expense`\r\n\r\n`Transaction: 03/16/2023/ Balance: 85` Because, that is `income - expense`\r\n\r\nHow I tried and what are various outputs based on attempts:\r\n\r\n```\r\n@GetMapping(&quot;/userTransactions/{user_id}&quot;)\r\npublic String getUserTransactions(@PathVariable(&quot;user_id&quot;) long user_id, TransactionGroup transactionGroup, Model model) {\r\n    Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n    UserDetailsImpl user = (UserDetailsImpl) authentication.getPrincipal();\r\n    long userId = user.getId();\r\n    model.addAttribute(&quot;userId&quot;, userId);\r\n\r\n    List&lt;Transaction&gt; transactions = transactionRepository.getTransactionsByUserId(user_id);\r\n    List&lt;TransactionGroup&gt; transactionByDate = new ArrayList&lt;&gt;();\r\n    List&lt;Transaction&gt; transOnSingleDate = new ArrayList&lt;&gt;();\r\n    boolean currDates = transactions.stream().findFirst().isPresent();\r\n\r\n    if (currDates) {\r\n        LocalDate currDate = transactions.get(0).getDate();\r\n\r\n        TransactionGroup transGroup = new TransactionGroup();\r\n\r\n        for (Transaction t : transactions) {\r\n            if (!currDate.isEqual(t.getDate())) {\r\n                transGroup.setDate(currDate);\r\n                transGroup.setTransactions(transOnSingleDate);\r\n                transactionByDate.add(transGroup);\r\n                transGroup = new TransactionGroup();\r\n                transOnSingleDate = new ArrayList&lt;&gt;();\r\n            }\r\n\r\n            transOnSingleDate.add(t);\r\n            currDate = t.getDate();\r\n        }\r\n        transGroup.setDate(currDate);\r\n        transGroup.setTransactions(transOnSingleDate);\r\n        transactionByDate.add(transGroup);\r\n\r\n\r\n        for (int i = 0; i &lt; transactionByDate.size(); i++) {\r\n            LocalDate date = transGroup.getDate();\r\n            transactions = transGroup.getTransactions();\r\n            double income = transactions.stream()\r\n                    .filter(trans -&gt; trans.getTransactionType().getDisplayName().equalsIgnoreCase(&quot;income&quot;))\r\n                    .mapToDouble(Transaction::getAmount)\r\n                    .sum();\r\n            double expense = transactions.stream()\r\n                    .filter(trans -&gt; trans.getTransactionType().getDisplayName().equalsIgnoreCase(&quot;expense&quot;))\r\n                    .mapToDouble(Transaction::getAmount)\r\n                    .sum();\r\n            double left = income - expense;\r\n            System.out.println(&quot;date:&quot; + date + &quot;,income:&quot; + income + &quot;,expense:&quot; + expense + &quot;,left:&quot; + left);\r\n        }\r\n    } else {\r\n        System.out.println(&quot;Empty&quot;);\r\n    }\r\n\r\n\r\n    model.addAttribute(&quot;transactionGroup&quot;, transactionByDate);\r\n    return &quot;transactions&quot;;\r\n}\r\n```\r\n\r\nAnd that works fine, all transactions are displayed, but the problem is with looping through transaction dates.\r\n\r\nIf I loop through `transactions` like this\r\n\r\n```\r\nfor (int i = 0; i &lt; transactionByDate.size(); i++) {\r\n```\r\n\r\nthen this is the response:\r\n\r\n`date:2023-03-16,income:100.0,expense:15.0,left:85.0`\r\n\r\nas you can see, only one date is printed, instead of:\r\n\r\n```\r\ndate:2023-03-16,income:100.0,expense:15.0,left:85.0\r\n```\r\n\r\n```\r\ndate:2023-03-03,income:150.0,expense:50.0,left:50.0\r\n```\r\n\r\nIf I try to loop like this:\r\n\r\n```\r\nfor (int i = 0; i &lt; transactions.size(); i++) {\r\n```\r\n\r\nits same,\r\n\r\nIf I try to loop like this:\r\n\r\n```\r\nfor (int i = 0; i &lt; transGroup.getTransactions().size(); i++) {\r\n```\r\n\r\nit&#39;s also the same.  \r\n  \r\nSo my question is, how to loop through this list so actually I can get output like:\r\n\r\n```\r\ndate:2023-03-16,income:100.0,expense:15.0,left:85.0\r\n```\r\n\r\n```\r\ndate:2023-03-03,income:150.0,expense:50.0,left:50.0\r\n```\r\n\r\nBecause I have transactions on those two dates. Or for example if user have transactions on three different days, show him output like:\r\n\r\n```\r\ndate:2023-03-16,income:100.0,expense:15.0,left:85.0\r\n```\r\n\r\n```\r\ndate:2023-03-03,income:150.0,expense:50.0,left:50.0\r\n```\r\n\r\n```\r\ndate:2023-03-19,income:200.0,expense:50.0,left:150.0 &gt; new date\r\n```\r\n\r\n`Thymeleaf:`\r\n\r\n        &lt;!DOCTYPE html&gt;\r\n    &lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n    \r\n    &lt;head&gt;\r\n        &lt;meta charset=&quot;utf-8&quot;&gt;\r\n        &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; th:href=&quot;@{/css/transaction.css}&quot;/&gt;\r\n        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot;/&gt;\r\n        &lt;script src=&quot;http://localhost:35729/livereload.js&quot;&gt;&lt;/script&gt;\r\n        &lt;script src=&quot;https://kit.fontawesome.com/9ab80cc16b.js&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\r\n    \r\n        &lt;meta http-equiv=&quot;x-ua-compatible&quot; content=&quot;ie=edge&quot;&gt;\r\n        &lt;title&gt;Users&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    \r\n    &lt;header&gt;\r\n        &lt;h1 class=&quot;logo&quot;&gt;Spender&lt;/h1&gt;\r\n        &lt;input type=&quot;checkbox&quot; class=&quot;nav-toggle&quot; id=&quot;nav-toggle&quot;&gt;\r\n        &lt;nav&gt;\r\n            &lt;ul&gt;\r\n                &lt;li&gt;&lt;a th:href=&quot;@{/api/test/homePage}&quot;&gt;Homepage&lt;/a&gt;&lt;/li&gt;\r\n                &lt;li&gt;&lt;a id=&quot;wallets&quot; th:href=&quot;@{/api/wallet/userWallet/balance/{userId} (userId=${userId})}&quot;&gt;Wallets&lt;/a&gt;&lt;/li&gt;\r\n                &lt;li&gt;&lt;a href=&quot;javascript: document.logoutForm.submit()&quot; role=&quot;menuitem&quot;&gt;Logout&lt;/a&gt;&lt;/li&gt;\r\n            &lt;/ul&gt;\r\n        &lt;/nav&gt;\r\n        &lt;label for=&quot;nav-toggle&quot; class=&quot;nav-toggle-label&quot;&gt;\r\n            &lt;span&gt;&lt;/span&gt;\r\n        &lt;/label&gt;\r\n    &lt;/header&gt;\r\n    &lt;br&gt;\r\n    &lt;br&gt;\r\n    &lt;br&gt;\r\n    &lt;br&gt;\r\n    &lt;br&gt;\r\n    &lt;br&gt;\r\n    &lt;br&gt;\r\n    &lt;br&gt;\r\n    &lt;div class=&quot;date&quot; th:each=&quot;singleGroup : ${transactionGroup}&quot;&gt; &lt;h1 th:text=&quot;${singleGroup.date}&quot;&gt;&lt;/h1&gt;\r\n        &lt;h2 th:text=&quot;${balance}&quot;&gt;&lt;/h2&gt;\r\n        &lt;div class=&quot;transaction&quot; th:each=&quot;singleTrans : ${singleGroup.transactions}&quot;&gt;\r\n    &lt;h2&gt;Amount: &lt;span th:text=&quot;${singleTrans.amount}&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&lt;br&gt;\r\n            &lt;h2&gt;Note: &lt;span th:text=&quot;${singleTrans.note}&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&lt;br&gt;\r\n            &lt;h2&gt;Wallet name: &lt;span th:text=&quot;${singleTrans .walletName}&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&lt;br&gt;\r\n            &lt;h2&gt;Expense Category: &lt;span th:text=&quot;${singleTrans .expenseCategories}&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&lt;br&gt;\r\n            &lt;h2&gt;IncomeCategory: &lt;span th:text=&quot;${singleTrans .incomeCategories}&quot;&gt;&lt;/span&gt;&lt;/h2&gt;\r\n            &lt;a class=&quot;card__link&quot; th:href=&quot;@{/api/transaction/delete/{id}(id=${singleTrans.id})}&quot;\r\n               th:data-confirm-delete=&quot;|Are you sure you want to delete ${singleTrans.walletName} wallet?|&quot;\r\n               onclick=&quot;if (!confirm(this.getAttribute(&#39;data-confirm-delete&#39;))) return false&quot;&gt;Delete&lt;/a&gt;\r\n            &lt;a class=&quot;card__link&quot; th:href=&quot;@{/api/transaction/showFormForUpdate/{id}(id=${singleTrans.id})}&quot;&gt;Update&lt;/a&gt;\r\n            &lt;hr&gt;\r\n    &lt;/div&gt;\r\n    \r\n    &lt;/div&gt;\r\n    &lt;div style=&quot;text-align:center&quot;\r\n         th:if=&quot;${#lists.isEmpty(transactionGroup)}&quot;&gt;&lt;h1&gt;You don&#39;t have any transaction&lt;/h1&gt;\r\n        &lt;a th:href=&quot;@{/api/wallet/userWallet/balance/{userId} (userId=${userId})}&quot;&gt;Wallets&lt;/a&gt;\r\n    &lt;/div&gt;\r\n    \r\n    \r\n    &lt;form name=&quot;logoutForm&quot; th:action=&quot;@{/api/auth/signout}&quot; method=&quot;post&quot; th:hidden=&quot;true&quot;&gt;\r\n        &lt;input hidden type=&quot;submit&quot; value=&quot;Sign Out&quot;/&gt;\r\n    &lt;/form&gt;\r\n    \r\n    &lt;/body&gt;\r\n    \r\n    &lt;/html&gt;","title":"For loop to return all data recorded by date","body":"<p>I'll be direct.</p>\n<p>User have wallets, on each wallet they can create a transaction, the transaction can be income or expense.</p>\n<p>When a user is creating a transaction he also picks a date when that transaction is created, then I have a controller to display all user transactions. And this is the format to display it. Imagine user have the next transactions.</p>\n<p><code>Income: &gt; Amount: 50, Date: 03/03/2023</code></p>\n<p><code>Income: &gt; Amount: 50, Date: 03/03/2023</code></p>\n<p><code>Expense: &gt; Amount: 50, Date: 03/03/2023</code></p>\n<p><code>Income: &gt; Amount: 100, Date: 03/16/2023</code></p>\n<p><code>Expense: &gt; Amount: 15, Date: 03/16/2023</code></p>\n<p>And on the page I would like to display:</p>\n<p><code>Transaction: 03/03/2023/ Balance: 100</code> Because, that is <code>income - expense</code></p>\n<p><code>Transaction: 03/16/2023/ Balance: 85</code> Because, that is <code>income - expense</code></p>\n<p>How I tried and what are various outputs based on attempts:</p>\n<pre><code>@GetMapping(&quot;/userTransactions/{user_id}&quot;)\npublic String getUserTransactions(@PathVariable(&quot;user_id&quot;) long user_id, TransactionGroup transactionGroup, Model model) {\n    Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n    UserDetailsImpl user = (UserDetailsImpl) authentication.getPrincipal();\n    long userId = user.getId();\n    model.addAttribute(&quot;userId&quot;, userId);\n\n    List&lt;Transaction&gt; transactions = transactionRepository.getTransactionsByUserId(user_id);\n    List&lt;TransactionGroup&gt; transactionByDate = new ArrayList&lt;&gt;();\n    List&lt;Transaction&gt; transOnSingleDate = new ArrayList&lt;&gt;();\n    boolean currDates = transactions.stream().findFirst().isPresent();\n\n    if (currDates) {\n        LocalDate currDate = transactions.get(0).getDate();\n\n        TransactionGroup transGroup = new TransactionGroup();\n\n        for (Transaction t : transactions) {\n            if (!currDate.isEqual(t.getDate())) {\n                transGroup.setDate(currDate);\n                transGroup.setTransactions(transOnSingleDate);\n                transactionByDate.add(transGroup);\n                transGroup = new TransactionGroup();\n                transOnSingleDate = new ArrayList&lt;&gt;();\n            }\n\n            transOnSingleDate.add(t);\n            currDate = t.getDate();\n        }\n        transGroup.setDate(currDate);\n        transGroup.setTransactions(transOnSingleDate);\n        transactionByDate.add(transGroup);\n\n\n        for (int i = 0; i &lt; transactionByDate.size(); i++) {\n            LocalDate date = transGroup.getDate();\n            transactions = transGroup.getTransactions();\n            double income = transactions.stream()\n                    .filter(trans -&gt; trans.getTransactionType().getDisplayName().equalsIgnoreCase(&quot;income&quot;))\n                    .mapToDouble(Transaction::getAmount)\n                    .sum();\n            double expense = transactions.stream()\n                    .filter(trans -&gt; trans.getTransactionType().getDisplayName().equalsIgnoreCase(&quot;expense&quot;))\n                    .mapToDouble(Transaction::getAmount)\n                    .sum();\n            double left = income - expense;\n            System.out.println(&quot;date:&quot; + date + &quot;,income:&quot; + income + &quot;,expense:&quot; + expense + &quot;,left:&quot; + left);\n        }\n    } else {\n        System.out.println(&quot;Empty&quot;);\n    }\n\n\n    model.addAttribute(&quot;transactionGroup&quot;, transactionByDate);\n    return &quot;transactions&quot;;\n}\n</code></pre>\n<p>And that works fine, all transactions are displayed, but the problem is with looping through transaction dates.</p>\n<p>If I loop through <code>transactions</code> like this</p>\n<pre><code>for (int i = 0; i &lt; transactionByDate.size(); i++) {\n</code></pre>\n<p>then this is the response:</p>\n<p><code>date:2023-03-16,income:100.0,expense:15.0,left:85.0</code></p>\n<p>as you can see, only one date is printed, instead of:</p>\n<pre><code>date:2023-03-16,income:100.0,expense:15.0,left:85.0\n</code></pre>\n<pre><code>date:2023-03-03,income:150.0,expense:50.0,left:50.0\n</code></pre>\n<p>If I try to loop like this:</p>\n<pre><code>for (int i = 0; i &lt; transactions.size(); i++) {\n</code></pre>\n<p>its same,</p>\n<p>If I try to loop like this:</p>\n<pre><code>for (int i = 0; i &lt; transGroup.getTransactions().size(); i++) {\n</code></pre>\n<p>it's also the same.</p>\n<p>So my question is, how to loop through this list so actually I can get output like:</p>\n<pre><code>date:2023-03-16,income:100.0,expense:15.0,left:85.0\n</code></pre>\n<pre><code>date:2023-03-03,income:150.0,expense:50.0,left:50.0\n</code></pre>\n<p>Because I have transactions on those two dates. Or for example if user have transactions on three different days, show him output like:</p>\n<pre><code>date:2023-03-16,income:100.0,expense:15.0,left:85.0\n</code></pre>\n<pre><code>date:2023-03-03,income:150.0,expense:50.0,left:50.0\n</code></pre>\n<pre><code>date:2023-03-19,income:200.0,expense:50.0,left:150.0 &gt; new date\n</code></pre>\n<p><code>Thymeleaf:</code></p>\n<pre><code>    &lt;!DOCTYPE html&gt;\n&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n\n&lt;head&gt;\n    &lt;meta charset=&quot;utf-8&quot;&gt;\n    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; th:href=&quot;@{/css/transaction.css}&quot;/&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot;/&gt;\n    &lt;script src=&quot;http://localhost:35729/livereload.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://kit.fontawesome.com/9ab80cc16b.js&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\n\n    &lt;meta http-equiv=&quot;x-ua-compatible&quot; content=&quot;ie=edge&quot;&gt;\n    &lt;title&gt;Users&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;header&gt;\n    &lt;h1 class=&quot;logo&quot;&gt;Spender&lt;/h1&gt;\n    &lt;input type=&quot;checkbox&quot; class=&quot;nav-toggle&quot; id=&quot;nav-toggle&quot;&gt;\n    &lt;nav&gt;\n        &lt;ul&gt;\n            &lt;li&gt;&lt;a th:href=&quot;@{/api/test/homePage}&quot;&gt;Homepage&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a id=&quot;wallets&quot; th:href=&quot;@{/api/wallet/userWallet/balance/{userId} (userId=${userId})}&quot;&gt;Wallets&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a href=&quot;javascript: document.logoutForm.submit()&quot; role=&quot;menuitem&quot;&gt;Logout&lt;/a&gt;&lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/nav&gt;\n    &lt;label for=&quot;nav-toggle&quot; class=&quot;nav-toggle-label&quot;&gt;\n        &lt;span&gt;&lt;/span&gt;\n    &lt;/label&gt;\n&lt;/header&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;div class=&quot;date&quot; th:each=&quot;singleGroup : ${transactionGroup}&quot;&gt; &lt;h1 th:text=&quot;${singleGroup.date}&quot;&gt;&lt;/h1&gt;\n    &lt;h2 th:text=&quot;${balance}&quot;&gt;&lt;/h2&gt;\n    &lt;div class=&quot;transaction&quot; th:each=&quot;singleTrans : ${singleGroup.transactions}&quot;&gt;\n&lt;h2&gt;Amount: &lt;span th:text=&quot;${singleTrans.amount}&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&lt;br&gt;\n        &lt;h2&gt;Note: &lt;span th:text=&quot;${singleTrans.note}&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&lt;br&gt;\n        &lt;h2&gt;Wallet name: &lt;span th:text=&quot;${singleTrans .walletName}&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&lt;br&gt;\n        &lt;h2&gt;Expense Category: &lt;span th:text=&quot;${singleTrans .expenseCategories}&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&lt;br&gt;\n        &lt;h2&gt;IncomeCategory: &lt;span th:text=&quot;${singleTrans .incomeCategories}&quot;&gt;&lt;/span&gt;&lt;/h2&gt;\n        &lt;a class=&quot;card__link&quot; th:href=&quot;@{/api/transaction/delete/{id}(id=${singleTrans.id})}&quot;\n           th:data-confirm-delete=&quot;|Are you sure you want to delete ${singleTrans.walletName} wallet?|&quot;\n           onclick=&quot;if (!confirm(this.getAttribute('data-confirm-delete'))) return false&quot;&gt;Delete&lt;/a&gt;\n        &lt;a class=&quot;card__link&quot; th:href=&quot;@{/api/transaction/showFormForUpdate/{id}(id=${singleTrans.id})}&quot;&gt;Update&lt;/a&gt;\n        &lt;hr&gt;\n&lt;/div&gt;\n\n&lt;/div&gt;\n&lt;div style=&quot;text-align:center&quot;\n     th:if=&quot;${#lists.isEmpty(transactionGroup)}&quot;&gt;&lt;h1&gt;You don't have any transaction&lt;/h1&gt;\n    &lt;a th:href=&quot;@{/api/wallet/userWallet/balance/{userId} (userId=${userId})}&quot;&gt;Wallets&lt;/a&gt;\n&lt;/div&gt;\n\n\n&lt;form name=&quot;logoutForm&quot; th:action=&quot;@{/api/auth/signout}&quot; method=&quot;post&quot; th:hidden=&quot;true&quot;&gt;\n    &lt;input hidden type=&quot;submit&quot; value=&quot;Sign Out&quot;/&gt;\n&lt;/form&gt;\n\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["java","spring","scala","apache-spark"],"answers":[{"tags":[],"owner":{"account_id":7034556,"reputation":12335,"user_id":5389127,"display_name":"Ga&#235;l J"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677864907,"creation_date":1677864907,"answer_id":75630211,"question_id":75629038,"body_markdown":"Scala libraries are compiled against a Scala version which is visible in the artifact name like `spark-sql_2.13` means it&#39;s `spark-sql` compiled for Scala 2.13.\r\n\r\nYou cannot have multiple Scala versions in the same project.\r\n\r\nIn your case, you have:\r\n- `scala-library`: 2.12\r\n- `spark-core`: 2.12\r\n- `spark.sql`: 2.13\r\n\r\nChoose a single version and stick to it. 2.13 if possible as it&#39;s more recent.","title":"Can&#39;t create SparkSession in Spring Boot","body":"<p>Scala libraries are compiled against a Scala version which is visible in the artifact name like <code>spark-sql_2.13</code> means it's <code>spark-sql</code> compiled for Scala 2.13.</p>\n<p>You cannot have multiple Scala versions in the same project.</p>\n<p>In your case, you have:</p>\n<ul>\n<li><code>scala-library</code>: 2.12</li>\n<li><code>spark-core</code>: 2.12</li>\n<li><code>spark.sql</code>: 2.13</li>\n</ul>\n<p>Choose a single version and stick to it. 2.13 if possible as it's more recent.</p>\n"}],"owner":{"account_id":27928104,"reputation":11,"user_id":21326776,"display_name":"dev-rev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":199,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1677864907,"creation_date":1677857561,"question_id":75629038,"body_markdown":"I&#39;m trying to run Spark on Spring, the project itself runs without errors, but after I try to create a session, i get this error.\r\n\r\n```\r\njava.lang.NoSuchMethodError: &#39;scala.collection.SeqOps scala.collection.mutable.Buffer$.empty()&#39;\r\n\r\n```\r\n\r\npom.xml\r\n```\r\n    &lt;dependencies&gt;\r\n\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.thoughtworks.paranamer&lt;/groupId&gt;\r\n                &lt;artifactId&gt;paranamer&lt;/artifactId&gt;\r\n                &lt;version&gt;2.8&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n            &lt;version&gt;6.0.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spark-core_2.12&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3.0&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;log4j&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-sql --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spark-sql_2.13&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3.2&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.scala-lang&lt;/groupId&gt;\r\n            &lt;artifactId&gt;scala-library&lt;/artifactId&gt;\r\n            &lt;version&gt;2.12.15&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n```\r\n\r\ncontroller\r\n```\r\n@RestController\r\npublic class MainController {\r\n    @GetMapping(&quot;/&quot;)\r\n    public String index() {\r\n        SparkSession spark = SparkSession\r\n                .builder()\r\n                .appName(&quot;AppSpark&quot;)\r\n                .config(&quot;spark.master&quot;, &quot;local&quot;)\r\n                .getOrCreate();\r\n\r\n        return &quot;Hello World!&quot;;\r\n    }\r\n}\r\n```\r\n\r\nI tried to downgrade the versions in the pom file, but it did not help, only the error type changed.\r\n\r\nIf anyone has come across the same error, I would appreciate any help.","title":"Can&#39;t create SparkSession in Spring Boot","body":"<p>I'm trying to run Spark on Spring, the project itself runs without errors, but after I try to create a session, i get this error.</p>\n<pre><code>java.lang.NoSuchMethodError: 'scala.collection.SeqOps scala.collection.mutable.Buffer$.empty()'\n\n</code></pre>\n<p>pom.xml</p>\n<pre><code>    &lt;dependencies&gt;\n\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.thoughtworks.paranamer&lt;/groupId&gt;\n                &lt;artifactId&gt;paranamer&lt;/artifactId&gt;\n                &lt;version&gt;2.8&lt;/version&gt;\n            &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n            &lt;version&gt;6.0.5&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n            &lt;artifactId&gt;spark-core_2.12&lt;/artifactId&gt;\n            &lt;version&gt;3.3.0&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                    &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;log4j&lt;/groupId&gt;\n                    &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n                &lt;scope&gt;test&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-sql --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n            &lt;artifactId&gt;spark-sql_2.13&lt;/artifactId&gt;\n            &lt;version&gt;3.3.2&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.scala-lang&lt;/groupId&gt;\n            &lt;artifactId&gt;scala-library&lt;/artifactId&gt;\n            &lt;version&gt;2.12.15&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>controller</p>\n<pre><code>@RestController\npublic class MainController {\n    @GetMapping(&quot;/&quot;)\n    public String index() {\n        SparkSession spark = SparkSession\n                .builder()\n                .appName(&quot;AppSpark&quot;)\n                .config(&quot;spark.master&quot;, &quot;local&quot;)\n                .getOrCreate();\n\n        return &quot;Hello World!&quot;;\n    }\n}\n</code></pre>\n<p>I tried to downgrade the versions in the pom file, but it did not help, only the error type changed.</p>\n<p>If anyone has come across the same error, I would appreciate any help.</p>\n"},{"tags":["java","postgresql","uuid","criteriabuilder"],"owner":{"account_id":2735926,"reputation":1,"user_id":2358604,"display_name":"user2358604"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677864814,"creation_date":1677864704,"question_id":75630190,"body_markdown":"I have an entity\r\n\r\n    import jakarta.persistence.Entity\r\n\r\nI&#39;m using CriteriaBuilder\r\n\r\n    import jakarta.persistence.criteria.CriteriaBuilder\r\n\r\nUsing this line gives 1 result, as expected.\r\n\r\n    all.where(criteriaBuilder.equal(root.get(&quot;code&quot;), item.getCode()));\r\n\r\nUsing this line gives 0 results, as not expected.\r\n\r\n    all.where(criteriaBuilder.equal(root.get(&quot;uuid&quot;), item.getUuid()));\r\n\r\nThe field generated in Postgresql has data_type uuid (and contains values).\r\n\r\nThe hibernate query looks like this:\r\n    select\r\n        c1_0.uuid,\r\n        c1_0.code,\r\n        c1_0.created_time \r\n    from\r\n        case_o c1_0 \r\n    where\r\n        c1_0.uuid=?\r\n\r\nI have tried changing the dialect and the database-type but that does not seem to help.\r\n\r\nAny ideas on what the correct way to filter on uuid is?","title":"Cannot filter on UUID with CriteriaBuilder in Java using Postgresql","body":"<p>I have an entity</p>\n<pre><code>import jakarta.persistence.Entity\n</code></pre>\n<p>I'm using CriteriaBuilder</p>\n<pre><code>import jakarta.persistence.criteria.CriteriaBuilder\n</code></pre>\n<p>Using this line gives 1 result, as expected.</p>\n<pre><code>all.where(criteriaBuilder.equal(root.get(&quot;code&quot;), item.getCode()));\n</code></pre>\n<p>Using this line gives 0 results, as not expected.</p>\n<pre><code>all.where(criteriaBuilder.equal(root.get(&quot;uuid&quot;), item.getUuid()));\n</code></pre>\n<p>The field generated in Postgresql has data_type uuid (and contains values).</p>\n<p>The hibernate query looks like this:\nselect\nc1_0.uuid,\nc1_0.code,\nc1_0.created_time\nfrom\ncase_o c1_0\nwhere\nc1_0.uuid=?</p>\n<p>I have tried changing the dialect and the database-type but that does not seem to help.</p>\n<p>Any ideas on what the correct way to filter on uuid is?</p>\n"},{"tags":["java","design-patterns","decoupling","solid"],"owner":{"account_id":16506411,"reputation":1143,"user_id":11926338,"display_name":"Pavel Petrashov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677864497,"creation_date":1677864497,"question_id":75630164,"body_markdown":"I have a service that gets users from DB and creates a file from them. It can be different types of files (SCV, XML, etc).\r\n\r\n    import java.io.File;\r\n    import java.util.Iterator;\r\n    \r\n    public class MyService {\r\n    \r\n        private final EventsDao eventsDao;\r\n        private final UserDao userDao;\r\n    \r\n        public MyService(EventsDao eventsDao, UserDao userDao) {\r\n            this.eventsDao = eventsDao;\r\n            this.userDao = userDao;\r\n        }\r\n    \r\n        public void start() {\r\n            Iterator&lt;Event&gt; events = eventsDao.getEvents();\r\n    \r\n            FileBuilder fileBuilder = new CsvFileBuilder();\r\n    \r\n            while (events.hasNext()) {\r\n                Event event = events.next();\r\n    \r\n                User user = userDao.getUser(event.getUserId());\r\n    \r\n                if (user == null) {\r\n                    System.out.println(&quot;user is null and won&#39;t be included to the file&quot;);\r\n                    continue;\r\n                }\r\n    \r\n                fileBuilder.addLine(UserMapper.toViewableUser(user));\r\n            }\r\n    \r\n            File scvFile = fileBuilder.build();\r\n    \r\n            sendFile(scvFile);\r\n            deleteFile(scvFile);\r\n        }\r\n    \r\n        private void sendFile(File scvFile) {}\r\n        private void deleteFile(File scvFile) {}\r\n    }\r\n\r\nYou can notice the problem here: I create `new CsvFileBuilder()` in the service. It violates SOLID principles.  I am looking for how to refactor that and decouple service and builder implementation. I could pass `FileBuilder` in the service&#39;s constructor but after that, it will be a singleton and I don&#39;t know how to implement it correctly. Take a look at builder implementation: \r\n\r\n    import java.io.File;\r\n    import java.io.FileWriter;\r\n    import java.io.IOException;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class CsvFileBuilder implements FileBuilder {\r\n    \r\n        private final File targetFile;\r\n        private final CSVWriter writer;\r\n    \r\n        public CsvFileBuilder() {\r\n            try {\r\n                this.targetFile = File.createTempFile(&quot;users&quot;, &quot;test.csv&quot;);\r\n                this.writer = new CSVWriter(new FileWriter(targetFile), &#39;|&#39;, CSVWriter.NO_QUOTE_CHARACTER);\r\n                addHeader();\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    \r\n        private void addHeader() {\r\n            List&lt;String&gt; headers = new ArrayList&lt;&gt;();\r\n            //....\r\n            writer.writeNext(headers.toArray(new String[0]));\r\n        }\r\n    \r\n        @Override\r\n        public void addLine(ViewableUser viewableUser) {\r\n            List&lt;String&gt; cells = new ArrayList&lt;&gt;();\r\n            //...\r\n            writer.writeNext(cells.toArray(new String[0]));\r\n        }\r\n    \r\n        @Override\r\n        public File build() {\r\n            try {\r\n                writer.flush();\r\n                writer.close();\r\n                return targetFile;\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    }\r\n\r\nIf I create it as singleton it will be mutable because I add a new line on every step and only in the end build file. \r\n\r\nIf I pass literature to the builder it looks bad because it is not the builder&#39;s responsibility to go to the DB, get user, map it. etc.\r\n\r\nSo, How can I move builder implementation creation from direct service?","title":"How to decouple service and class creation in that service?","body":"<p>I have a service that gets users from DB and creates a file from them. It can be different types of files (SCV, XML, etc).</p>\n<pre><code>import java.io.File;\nimport java.util.Iterator;\n\npublic class MyService {\n\n    private final EventsDao eventsDao;\n    private final UserDao userDao;\n\n    public MyService(EventsDao eventsDao, UserDao userDao) {\n        this.eventsDao = eventsDao;\n        this.userDao = userDao;\n    }\n\n    public void start() {\n        Iterator&lt;Event&gt; events = eventsDao.getEvents();\n\n        FileBuilder fileBuilder = new CsvFileBuilder();\n\n        while (events.hasNext()) {\n            Event event = events.next();\n\n            User user = userDao.getUser(event.getUserId());\n\n            if (user == null) {\n                System.out.println(&quot;user is null and won't be included to the file&quot;);\n                continue;\n            }\n\n            fileBuilder.addLine(UserMapper.toViewableUser(user));\n        }\n\n        File scvFile = fileBuilder.build();\n\n        sendFile(scvFile);\n        deleteFile(scvFile);\n    }\n\n    private void sendFile(File scvFile) {}\n    private void deleteFile(File scvFile) {}\n}\n</code></pre>\n<p>You can notice the problem here: I create <code>new CsvFileBuilder()</code> in the service. It violates SOLID principles.  I am looking for how to refactor that and decouple service and builder implementation. I could pass <code>FileBuilder</code> in the service's constructor but after that, it will be a singleton and I don't know how to implement it correctly. Take a look at builder implementation:</p>\n<pre><code>import java.io.File;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class CsvFileBuilder implements FileBuilder {\n\n    private final File targetFile;\n    private final CSVWriter writer;\n\n    public CsvFileBuilder() {\n        try {\n            this.targetFile = File.createTempFile(&quot;users&quot;, &quot;test.csv&quot;);\n            this.writer = new CSVWriter(new FileWriter(targetFile), '|', CSVWriter.NO_QUOTE_CHARACTER);\n            addHeader();\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    private void addHeader() {\n        List&lt;String&gt; headers = new ArrayList&lt;&gt;();\n        //....\n        writer.writeNext(headers.toArray(new String[0]));\n    }\n\n    @Override\n    public void addLine(ViewableUser viewableUser) {\n        List&lt;String&gt; cells = new ArrayList&lt;&gt;();\n        //...\n        writer.writeNext(cells.toArray(new String[0]));\n    }\n\n    @Override\n    public File build() {\n        try {\n            writer.flush();\n            writer.close();\n            return targetFile;\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<p>If I create it as singleton it will be mutable because I add a new line on every step and only in the end build file.</p>\n<p>If I pass literature to the builder it looks bad because it is not the builder's responsibility to go to the DB, get user, map it. etc.</p>\n<p>So, How can I move builder implementation creation from direct service?</p>\n"},{"tags":["java","spring","spring-mvc"],"comments":[{"owner":{"account_id":8761405,"reputation":1504,"user_id":6551263,"display_name":"Chetan Ahirrao"},"score":0,"creation_date":1677940219,"post_id":75595943,"comment_id":133438239,"body_markdown":"Please post contents of your pom.xml","body":"Please post contents of your pom.xml"}],"owner":{"account_id":22179690,"reputation":1,"user_id":16423596,"display_name":"E Pabitra"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":220,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677864420,"creation_date":1677608706,"question_id":75595943,"body_markdown":"I get this error when running my project as a Spring Boot App on STS, I am not able to run my web applications but if I run my standalone applications I don&#39;t get any error and my application executes successfully. I got this error when I am using spring-boot-starter-web and spring-boot-dev-tools dependencies.\r\n\r\nPlease Give a solution as soon as possible\r\n\r\n**Log Of The Application**\r\n\r\nJava HotSpot(TM) 64-Bit Server VM warning: Options -Xverify:none and -noverify were deprecated in JDK 13 and will likely be removed in a future release.\r\n\r\n2023-02-28T23:03:26.954+05:30  INFO 2296 --- [  restartedMain] com.basu.Application                     : Starting Application using Java 17.0.6 with PID 2296 (C:\\Users\\epabi\\workspace-sts-3.9.6.RELEASE\\16_SB_Web_MVC_App-1\\target\\classes started by epabi in C:\\Users\\epabi\\workspace-sts-3.9.6.RELEASE\\16_SB_Web_MVC_App-1)\r\n2023-02-28T23:03:26.963+05:30  INFO 2296 --- [  restartedMain] com.basu.Application                     : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-02-28T23:03:27.157+05:30  INFO 2296 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set &#39;spring.devtools.add-properties&#39; to &#39;false&#39; to disable\r\n2023-02-28T23:03:27.158+05:30  INFO 2296 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the &#39;logging.level.web&#39; property to &#39;DEBUG&#39;\r\n2023-02-28T23:03:29.426+05:30  WARN 2296 --- [  restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server\r\n2023-02-28T23:03:29.442+05:30  INFO 2296 --- [  restartedMain] .s.b.a.l.ConditionEvaluationReportLogger : \r\n\r\nError starting ApplicationContext. To display the condition evaluation report re-run your application with &#39;debug&#39; enabled.\r\n2023-02-28T23:03:29.495+05:30 ERROR 2296 --- [  restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : \r\n\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nAn attempt was made to call a method that does not exist. The attempt was made from the following location:\r\n\r\n    org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:191)\r\n\r\nThe following method did not exist:\r\n\r\n    &#39;void org.apache.tomcat.util.modeler.Registry.disableRegistry()&#39;\r\n\r\nThe calling method&#39;s class, org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory, was loaded from the following location:\r\n\r\n    jar:file:/C:/Users/epabi/.m2/repository/org/springframework/boot/spring-boot/3.0.2/spring-boot-3.0.2.jar!/org/springframework/boot/web/embedded/tomcat/TomcatServletWebServerFactory.class\r\n\r\nThe called method&#39;s class, org.apache.tomcat.util.modeler.Registry, is available from the following locations:\r\n\r\n    jar:file:/C:/Users/epabi/Downloads/spring-tool-suite-3.9.6.RELEASE-e4.9.0-win32-x86_64/sts-bundle/pivotal-tc-server/runtimes/tomcat-9.0.10.A.RELEASE/lib/tomcat-coyote.jar!/org/apache/tomcat/util/modeler/Registry.class\r\n    jar:file:/C:/Users/epabi/.m2/repository/org/apache/tomcat/embed/tomcat-embed-core/10.1.5/tomcat-embed-core-10.1.5.jar!/org/apache/tomcat/util/modeler/Registry.class\r\n\r\nThe called method&#39;s class hierarchy was loaded from the following locations:\r\n\r\n    org.apache.tomcat.util.modeler.Registry: file:/C:/Users/epabi/Downloads/spring-tool-suite-3.9.6.RELEASE-e4.9.0-win32-x86_64/sts-bundle/pivotal-tc-server/runtimes/tomcat-9.0.10.A.RELEASE/lib/tomcat-coyote.jar\r\n\r\n\r\nAction:\r\n\r\nCorrect the classpath of your application so that it contains compatible versions of the classes org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory and org.apache.tomcat.util.modeler.Registry\r\n\r\n\r\n\r\n1. Before this error I am got an UnsupportedClassVersion error so for solving that I changed the JRE version to my current jdk17.\r\n2. Then I got this error and I am suffering for 5 days to solve this error.\r\n\r\nPlease someone, give a solution as soon as possible.","title":"Correct the classpath of your application so that it contains compatible versions of the classes org.springframework.boot.web.embedded.tomcat","body":"<p>I get this error when running my project as a Spring Boot App on STS, I am not able to run my web applications but if I run my standalone applications I don't get any error and my application executes successfully. I got this error when I am using spring-boot-starter-web and spring-boot-dev-tools dependencies.</p>\n<p>Please Give a solution as soon as possible</p>\n<p><strong>Log Of The Application</strong></p>\n<p>Java HotSpot(TM) 64-Bit Server VM warning: Options -Xverify:none and -noverify were deprecated in JDK 13 and will likely be removed in a future release.</p>\n<p>2023-02-28T23:03:26.954+05:30  INFO 2296 --- [  restartedMain] com.basu.Application                     : Starting Application using Java 17.0.6 with PID 2296 (C:\\Users\\epabi\\workspace-sts-3.9.6.RELEASE\\16_SB_Web_MVC_App-1\\target\\classes started by epabi in C:\\Users\\epabi\\workspace-sts-3.9.6.RELEASE\\16_SB_Web_MVC_App-1)\n2023-02-28T23:03:26.963+05:30  INFO 2296 --- [  restartedMain] com.basu.Application                     : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-02-28T23:03:27.157+05:30  INFO 2296 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable\n2023-02-28T23:03:27.158+05:30  INFO 2296 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'\n2023-02-28T23:03:29.426+05:30  WARN 2296 --- [  restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server\n2023-02-28T23:03:29.442+05:30  INFO 2296 --- [  restartedMain] .s.b.a.l.ConditionEvaluationReportLogger :</p>\n<p>Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n2023-02-28T23:03:29.495+05:30 ERROR 2296 --- [  restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   :</p>\n<hr />\n<p>APPLICATION FAILED TO START</p>\n<hr />\n<p>Description:</p>\n<p>An attempt was made to call a method that does not exist. The attempt was made from the following location:</p>\n<pre><code>org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:191)\n</code></pre>\n<p>The following method did not exist:</p>\n<pre><code>'void org.apache.tomcat.util.modeler.Registry.disableRegistry()'\n</code></pre>\n<p>The calling method's class, org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory, was loaded from the following location:</p>\n<pre><code>jar:file:/C:/Users/epabi/.m2/repository/org/springframework/boot/spring-boot/3.0.2/spring-boot-3.0.2.jar!/org/springframework/boot/web/embedded/tomcat/TomcatServletWebServerFactory.class\n</code></pre>\n<p>The called method's class, org.apache.tomcat.util.modeler.Registry, is available from the following locations:</p>\n<pre><code>jar:file:/C:/Users/epabi/Downloads/spring-tool-suite-3.9.6.RELEASE-e4.9.0-win32-x86_64/sts-bundle/pivotal-tc-server/runtimes/tomcat-9.0.10.A.RELEASE/lib/tomcat-coyote.jar!/org/apache/tomcat/util/modeler/Registry.class\njar:file:/C:/Users/epabi/.m2/repository/org/apache/tomcat/embed/tomcat-embed-core/10.1.5/tomcat-embed-core-10.1.5.jar!/org/apache/tomcat/util/modeler/Registry.class\n</code></pre>\n<p>The called method's class hierarchy was loaded from the following locations:</p>\n<pre><code>org.apache.tomcat.util.modeler.Registry: file:/C:/Users/epabi/Downloads/spring-tool-suite-3.9.6.RELEASE-e4.9.0-win32-x86_64/sts-bundle/pivotal-tc-server/runtimes/tomcat-9.0.10.A.RELEASE/lib/tomcat-coyote.jar\n</code></pre>\n<p>Action:</p>\n<p>Correct the classpath of your application so that it contains compatible versions of the classes org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory and org.apache.tomcat.util.modeler.Registry</p>\n<ol>\n<li>Before this error I am got an UnsupportedClassVersion error so for solving that I changed the JRE version to my current jdk17.</li>\n<li>Then I got this error and I am suffering for 5 days to solve this error.</li>\n</ol>\n<p>Please someone, give a solution as soon as possible.</p>\n"},{"tags":["java","android","bluetooth","usb","processing"],"comments":[{"owner":{"account_id":18245228,"reputation":380,"user_id":13281485,"display_name":"girraiffe"},"score":1,"creation_date":1677861328,"post_id":75629360,"comment_id":133426866,"body_markdown":"Possible duplicate of [ADB over Bluetooth Android](https://stackoverflow.com/questions/11129817/adb-over-bluetooth-android). If that doesn&#39;t work, simply googling your question yields many results.","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/11129817/adb-over-bluetooth-android\">ADB over Bluetooth Android</a>. If that doesn&#39;t work, simply googling your question yields many results."},{"owner":{"account_id":442814,"reputation":23181,"user_id":833647,"display_name":"Ken Wolf"},"score":0,"creation_date":1677863402,"post_id":75629360,"comment_id":133427495,"body_markdown":"Why not wifi? https://developer.android.com/studio/command-line/adb#connect-to-a-device-over-wi-fi","body":"Why not wifi? <a href=\"https://developer.android.com/studio/command-line/adb#connect-to-a-device-over-wi-fi\" rel=\"nofollow noreferrer\">developer.android.com/studio/command-line/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":19682641,"reputation":80,"user_id":14409408,"display_name":"Lookyus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677864016,"creation_date":1677864016,"answer_id":75630096,"question_id":75629360,"body_markdown":"You can do it over WiFi using adb. Your phone and PC have to be on the same network.\r\n\r\nJust enter this command in your cmd:\r\n`adb connect IP_ADDRESS_OF_YOUR_PHONE`\r\n\r\nYou have to be in the directory where your adb is for this to work.","title":"Can I debug apps using Bluetooth instead of USB?","body":"<p>You can do it over WiFi using adb. Your phone and PC have to be on the same network.</p>\n<p>Just enter this command in your cmd:\n<code>adb connect IP_ADDRESS_OF_YOUR_PHONE</code></p>\n<p>You have to be in the directory where your adb is for this to work.</p>\n"}],"owner":{"account_id":25065898,"reputation":1,"user_id":18920236,"display_name":"jjok13"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677864016,"creation_date":1677859437,"question_id":75629360,"body_markdown":"Is it possible to debug apps on Android using Bluetooth?\r\n\r\nI am working with Processing 4.1.1 and I&#39;d like to run my apps on my Android phone. Processing allows to run apps on devices which are connected through USB debugging, but there is something wrong with my cable/device as it is constantly disconnecting.\r\n\r\n&gt; Other than using an emulator, could I debug through Bluetooth? If yes, how?","title":"Can I debug apps using Bluetooth instead of USB?","body":"<p>Is it possible to debug apps on Android using Bluetooth?</p>\n<p>I am working with Processing 4.1.1 and I'd like to run my apps on my Android phone. Processing allows to run apps on devices which are connected through USB debugging, but there is something wrong with my cable/device as it is constantly disconnecting.</p>\n<blockquote>\n<p>Other than using an emulator, could I debug through Bluetooth? If yes, how?</p>\n</blockquote>\n"},{"tags":["java","domain-driven-design"],"comments":[{"owner":{"account_id":7630732,"reputation":1728,"user_id":5785871,"accept_rate":80,"display_name":"mslowiak"},"score":1,"creation_date":1673091053,"post_id":74616509,"comment_id":132422518,"body_markdown":"From the ddd perspective I would go with the 2nd option to have clearly visualised the models - one the `Token`, and the second `LocalizedToken` because as you already mentioned, it is a different conception","body":"From the ddd perspective I would go with the 2nd option to have clearly visualised the models - one the <code>Token</code>, and the second <code>LocalizedToken</code> because as you already mentioned, it is a different conception"}],"answers":[{"tags":[],"owner":{"account_id":14879218,"reputation":383,"user_id":10744429,"display_name":"WLefever"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677863938,"creation_date":1677863938,"answer_id":75630087,"question_id":74616509,"body_markdown":"I wouldn&#39;t recommend using an Enum for this. In general when using Enums you&#39;re tempted to switch over the Enum type to do some action or return a response. If you later decide another type of `Token` is an option, you need to update all the existing code. This violates the Open-Closed principle. ","title":"Java Generics in use case VS standard type with Enum","body":"<p>I wouldn't recommend using an Enum for this. In general when using Enums you're tempted to switch over the Enum type to do some action or return a response. If you later decide another type of <code>Token</code> is an option, you need to update all the existing code. This violates the Open-Closed principle.</p>\n"}],"owner":{"account_id":24349304,"reputation":33,"user_id":18285469,"display_name":"Jos&#233; Puente Fuentes"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677863938,"creation_date":1669736056,"question_id":74616509,"body_markdown":"In a Java Spring Boot DDD project we have several APIs exposed.\r\n\r\nNow for only one of these APIs we need that the &quot;Token&quot; entity contains one more attribute: &quot;Locales&quot;.\r\n\r\nIn use cases that use &quot;Token&quot; without &quot;Locales&quot; I would not want the getter of that new attribute to be accessible.\r\nFor this I am considering two options:\r\n\r\n - Add &quot;Locales&quot; to the &quot;Token&quot; entity and also another &quot;Type&quot; attribute (an Enum)\r\n   that, depending on whether it is of one type or another, when\r\n   accessing the &quot;Locales&quot; getter, returns the elements or an\r\n   Optional.Empty (or an exception). This way only the use cases that are\r\n   for the &quot;LocalizedToken&quot; will get the &quot;Locales&quot;, but in my\r\n   opinion the interface is less clear and more errors could happen when\r\n   using attributes that are not really used in all APIs.\r\n - Extend &quot;Token&quot; with a &quot;LocalizedToken&quot; entity and make use cases that use each\r\n   exposed API only have access to the type it needs. For example, with\r\n   generics, create use case: `CreateTokens&lt;T extends Token&gt;`. This\r\n   option looks cleaner but requires a lot more modifications, as these\r\n   generics are spread throughout the domain, repositories, etc.\r\n\r\nIn your opinion, which is the best approach? Or any other suggestion?\r\n\r\nThanks!","title":"Java Generics in use case VS standard type with Enum","body":"<p>In a Java Spring Boot DDD project we have several APIs exposed.</p>\n<p>Now for only one of these APIs we need that the &quot;Token&quot; entity contains one more attribute: &quot;Locales&quot;.</p>\n<p>In use cases that use &quot;Token&quot; without &quot;Locales&quot; I would not want the getter of that new attribute to be accessible.\nFor this I am considering two options:</p>\n<ul>\n<li>Add &quot;Locales&quot; to the &quot;Token&quot; entity and also another &quot;Type&quot; attribute (an Enum)\nthat, depending on whether it is of one type or another, when\naccessing the &quot;Locales&quot; getter, returns the elements or an\nOptional.Empty (or an exception). This way only the use cases that are\nfor the &quot;LocalizedToken&quot; will get the &quot;Locales&quot;, but in my\nopinion the interface is less clear and more errors could happen when\nusing attributes that are not really used in all APIs.</li>\n<li>Extend &quot;Token&quot; with a &quot;LocalizedToken&quot; entity and make use cases that use each\nexposed API only have access to the type it needs. For example, with\ngenerics, create use case: <code>CreateTokens&lt;T extends Token&gt;</code>. This\noption looks cleaner but requires a lot more modifications, as these\ngenerics are spread throughout the domain, repositories, etc.</li>\n</ul>\n<p>In your opinion, which is the best approach? Or any other suggestion?</p>\n<p>Thanks!</p>\n"},{"tags":["java","spring","spring-boot","swagger","openapi"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1677783900,"post_id":75619756,"comment_id":133410665,"body_markdown":"So you mean you need it only in the swagger documentation?","body":"So you mean you need it only in the swagger documentation?"},{"owner":{"account_id":18624324,"reputation":186,"user_id":13573784,"display_name":"Vitor Nilson"},"score":0,"creation_date":1677784015,"post_id":75619756,"comment_id":133410694,"body_markdown":"@Jens exactly, only in Swagger. I need to create custom Examples, like in the print that is on my question but only in Swagger.","body":"@Jens exactly, only in Swagger. I need to create custom Examples, like in the print that is on my question but only in Swagger."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1677784441,"post_id":75619756,"comment_id":133410811,"body_markdown":"*my API has a lot of possible errors* But it is an example, so one should be enough?","body":"<i>my API has a lot of possible errors</i> But it is an example, so one should be enough?"},{"owner":{"account_id":18624324,"reputation":186,"user_id":13573784,"display_name":"Vitor Nilson"},"score":0,"creation_date":1677784810,"post_id":75619756,"comment_id":133410905,"body_markdown":"@Jens hmm, not exaclty a simple example. There&#39;s a requirement in which I need to show the possible errors that might occur. This is a requirement because the company has a service desk, and they would like to take look at the error our users are saying that are facing. So, for example, if there&#39;s a 409 http code and there&#39;s 3 possible ways this 409 is thrown I need to map theses 3 possible ways in swagger UI.","body":"@Jens hmm, not exaclty a simple example. There&#39;s a requirement in which I need to show the possible errors that might occur. This is a requirement because the company has a service desk, and they would like to take look at the error our users are saying that are facing. So, for example, if there&#39;s a 409 http code and there&#39;s 3 possible ways this 409 is thrown I need to map theses 3 possible ways in swagger UI."},{"owner":{"account_id":9543959,"reputation":77,"user_id":7090837,"display_name":"Yeras_QazaQ"},"score":0,"creation_date":1677842564,"post_id":75619756,"comment_id":133421429,"body_markdown":"You can use @ApiResponse(code = 200, message = &quot;Successfully retrieved list&quot;) to your controller for describing","body":"You can use @ApiResponse(code = 200, message = &quot;Successfully retrieved list&quot;) to your controller for describing"},{"owner":{"account_id":18624324,"reputation":186,"user_id":13573784,"display_name":"Vitor Nilson"},"score":0,"creation_date":1677842869,"post_id":75619756,"comment_id":133421505,"body_markdown":"@Yeras_QazaQ I need to show examples. This suggestion only documents the http status and the description of it. I need to do something like in the print, but less verbose than writing all the possible responses hard coded.","body":"@Yeras_QazaQ I need to show examples. This suggestion only documents the http status and the description of it. I need to do something like in the print, but less verbose than writing all the possible responses hard coded."}],"answers":[{"tags":[],"owner":{"account_id":18624324,"reputation":186,"user_id":13573784,"display_name":"Vitor Nilson"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677863788,"creation_date":1677854091,"answer_id":75628389,"question_id":75619756,"body_markdown":"**SOLVED**\r\n\r\n*Solution: Document the API programmatically.*\r\n\r\nSpring has a lib that you can manipulate the entire OpenAPI project.\r\n\r\nThere&#39;s my configuration class, which is the solution:\r\n\r\n```java\r\npackage br.orchestratorapi.config;\r\n\r\nimport br.com.dto.ErpResponseBodyDTO;\r\nimport br.com.exception.MessageError;\r\nimport br.com.exception.MyExceptionWrapperClassException;\r\nimport com.google.gson.Gson;\r\nimport com.google.gson.JsonArray;\r\nimport com.google.gson.JsonObject;\r\nimport io.swagger.v3.oas.models.OpenAPI;\r\nimport io.swagger.v3.oas.models.Operation;\r\nimport io.swagger.v3.oas.models.examples.Example;\r\nimport io.swagger.v3.oas.models.media.Content;\r\nimport io.swagger.v3.oas.models.media.MediaType;\r\nimport io.swagger.v3.oas.models.responses.ApiResponse;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Data;\r\nimport org.springdoc.core.customizers.OpenApiCustomiser;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.core.io.Resource;\r\nimport org.springframework.util.FileCopyUtils;\r\n\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\nimport java.io.Reader;\r\nimport java.io.UncheckedIOException;\r\nimport java.util.List;\r\nimport java.util.ArrayList;\r\nimport java.util.Optional;\r\n\r\n@Configuration\r\npublic class OpenAPIExamples {\r\n\r\n@Value(&quot;classpath:/swagger_examples.json&quot;)\r\n    private Resource swaggerExamples;\r\n\r\n    @Bean\r\n    public OpenApiCustomiser openApiCustomiser() {\r\n        return openAPI -&gt; buildExamplesFromJson().forEach(exampleValue -&gt; setExamplesOnEndpoints(openAPI, exampleValue, &quot;application/json&quot;));\r\n    }\r\n\r\n    private void setExamplesOnEndpoints(OpenAPI api, ExampleValue exampleValue, String bodyType) {\r\n        Optional.ofNullable(api.getPaths())\r\n                .map(paths -&gt; paths.get(exampleValue.getPath()))\r\n                .map(paths -&gt; getOperationForHttpMethod(exampleValue.getHttpMethod(), paths))\r\n                .ifPresent(operation -&gt; setExamplesOnEndpoints(exampleValue, bodyType, operation));\r\n    }\r\n\r\n    private void setExamplesOnEndpoints(ExampleValue exampleValue, String bodyType, Operation operation) {\r\n        ApiResponse response = operation.getResponses().get(String.valueOf(exampleValue.getHttpStatus()));\r\n        if(response == null)\r\n             response = new ApiResponse();\r\n\r\n        Content content = response.getContent();\r\n        if(content == null)\r\n             content = new Content();\r\n\r\n        MediaType mediaType = content.get(bodyType);\r\n\r\n        if(mediaType == null)\r\n            mediaType = new MediaType();\r\n\r\n        mediaType.addExamples(exampleValue.getExampleName(), exampleValue.getExample());\r\n\r\n        content.put(bodyType, mediaType);\r\n        response.setContent(content);\r\n\r\n        operation.getResponses().put(String.valueOf(exampleValue.getHttpStatus()), response);\r\n    }\r\n\r\n\r\n    private Operation getOperationForHttpMethod(String httpMethod, PathItem paths) {\r\n        switch (httpMethod) {\r\n            case &quot;POST&quot;:\r\n                return paths.getPost();\r\n            case &quot;PATCH&quot;:\r\n                return paths.getPatch();\r\n            case &quot;PUT&quot;:\r\n                return paths.getPut();\r\n            case &quot;DELETE&quot;:\r\n                return paths.getDelete();\r\n            case &quot;GET&quot;:\r\n                return paths.getGet();\r\n            case &quot;OPTIONS&quot;:\r\n                return paths.getOptions();\r\n            case &quot;HEAD&quot;:\r\n                return paths.getHead();\r\n            case &quot;TRACE&quot;:\r\n                return paths.getTrace();\r\n            default:\r\n                return null;\r\n        }\r\n    }\r\n\r\n    public List&lt;ExampleValue&gt; buildExamplesFromJson() {\r\n        List&lt;ExampleValue&gt; result = new ArrayList&lt;&gt;();\r\n\r\n        JsonObject jsonObject = new Gson().fromJson(asString(swaggerExamples), JsonObject.class);\r\n        JsonArray endpoints = jsonObject.getAsJsonArray(&quot;endpoints&quot;);\r\n\r\n        endpoints.forEach(element -&gt; {\r\n            JsonObject path = element.getAsJsonObject();\r\n\r\n            String endpointPath = path.get(&quot;path&quot;).getAsString();\r\n            String method = path.get(&quot;method&quot;).getAsString();\r\n\r\n            path.get(&quot;responses&quot;).getAsJsonArray().forEach(response -&gt; {\r\n                JsonObject resp = response.getAsJsonObject();\r\n\r\n                int status = resp.get(&quot;status&quot;).getAsInt();\r\n\r\n                resp.getAsJsonArray(&quot;errors&quot;).forEach(error -&gt; {\r\n\r\n                    JsonObject errorObj = error.getAsJsonObject();\r\n                    String enumName = errorObj.get(&quot;enum&quot;).getAsString();\r\n\r\n\r\n                    Example example = new Example();\r\n                    example.description(errorObj.get(&quot;description&quot;).getAsString());\r\n                    example.value(ErpResponseBodyDTO.builder().error(new MyExceptionWrapperClassException(MessageError.valueOf(enumName)).getResponse().getError()).build());\r\n\r\n                    ExampleValue exampleValue = new ExampleValue(errorObj.get(&quot;exampleName&quot;).getAsString(), example, status, method, endpointPath);\r\n\r\n                    result.add(exampleValue);\r\n\r\n                });\r\n\r\n            });\r\n\r\n\r\n        });\r\n\r\n        return result;\r\n\r\n    }\r\n\r\n    public static String asString(Resource resource) {\r\n        try (Reader reader = new InputStreamReader(resource.getInputStream())) {\r\n            return FileCopyUtils.copyToString(reader);\r\n        } catch (IOException e) {\r\n            throw new UncheckedIOException(e);\r\n        }\r\n    }\r\n\r\n    @Data\r\n    @AllArgsConstructor\r\n    private class ExampleValue {\r\n        private String exampleName;\r\n        private Example example;\r\n        private int httpStatus;\r\n        private String httpMethod;\r\n        private String path;\r\n    }\r\n\r\n }\r\n\r\n```\r\n\r\nAs you can see, I read a Json file from resources:\r\n\r\n\r\n```\r\n{\r\n  &quot;endpoints&quot;: [\r\n\r\n\r\n    {\r\n      &quot;path&quot;:  &quot;/endpoint/that/{already}/{exists-in-swagger}&quot;,\r\n      &quot;method&quot;: &quot;POST&quot;,\r\n      &quot;responses&quot;: [\r\n\r\n        {\r\n          &quot;status&quot;:  401,\r\n          &quot;errors&quot;:[\r\n            {&quot;description&quot;:&quot;A description&quot;,&quot;enum&quot;: &quot;ENUM_THAT_I_HAVE_SO_PAY_ATTENTION&quot;, &quot;exampleName&quot;:  &quot;You have thrown an error&quot;}\r\n          ]\r\n        }\r\n\r\n      ]\r\n    }\r\n\r\n\r\n  ]\r\n}\r\n```","title":"Spring Boot Open API 3.0 - How to show custom examples without writing a Json Manually","body":"<p><strong>SOLVED</strong></p>\n<p><em>Solution: Document the API programmatically.</em></p>\n<p>Spring has a lib that you can manipulate the entire OpenAPI project.</p>\n<p>There's my configuration class, which is the solution:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package br.orchestratorapi.config;\n\nimport br.com.dto.ErpResponseBodyDTO;\nimport br.com.exception.MessageError;\nimport br.com.exception.MyExceptionWrapperClassException;\nimport com.google.gson.Gson;\nimport com.google.gson.JsonArray;\nimport com.google.gson.JsonObject;\nimport io.swagger.v3.oas.models.OpenAPI;\nimport io.swagger.v3.oas.models.Operation;\nimport io.swagger.v3.oas.models.examples.Example;\nimport io.swagger.v3.oas.models.media.Content;\nimport io.swagger.v3.oas.models.media.MediaType;\nimport io.swagger.v3.oas.models.responses.ApiResponse;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport org.springdoc.core.customizers.OpenApiCustomiser;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.core.io.Resource;\nimport org.springframework.util.FileCopyUtils;\n\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.Reader;\nimport java.io.UncheckedIOException;\nimport java.util.List;\nimport java.util.ArrayList;\nimport java.util.Optional;\n\n@Configuration\npublic class OpenAPIExamples {\n\n@Value(&quot;classpath:/swagger_examples.json&quot;)\n    private Resource swaggerExamples;\n\n    @Bean\n    public OpenApiCustomiser openApiCustomiser() {\n        return openAPI -&gt; buildExamplesFromJson().forEach(exampleValue -&gt; setExamplesOnEndpoints(openAPI, exampleValue, &quot;application/json&quot;));\n    }\n\n    private void setExamplesOnEndpoints(OpenAPI api, ExampleValue exampleValue, String bodyType) {\n        Optional.ofNullable(api.getPaths())\n                .map(paths -&gt; paths.get(exampleValue.getPath()))\n                .map(paths -&gt; getOperationForHttpMethod(exampleValue.getHttpMethod(), paths))\n                .ifPresent(operation -&gt; setExamplesOnEndpoints(exampleValue, bodyType, operation));\n    }\n\n    private void setExamplesOnEndpoints(ExampleValue exampleValue, String bodyType, Operation operation) {\n        ApiResponse response = operation.getResponses().get(String.valueOf(exampleValue.getHttpStatus()));\n        if(response == null)\n             response = new ApiResponse();\n\n        Content content = response.getContent();\n        if(content == null)\n             content = new Content();\n\n        MediaType mediaType = content.get(bodyType);\n\n        if(mediaType == null)\n            mediaType = new MediaType();\n\n        mediaType.addExamples(exampleValue.getExampleName(), exampleValue.getExample());\n\n        content.put(bodyType, mediaType);\n        response.setContent(content);\n\n        operation.getResponses().put(String.valueOf(exampleValue.getHttpStatus()), response);\n    }\n\n\n    private Operation getOperationForHttpMethod(String httpMethod, PathItem paths) {\n        switch (httpMethod) {\n            case &quot;POST&quot;:\n                return paths.getPost();\n            case &quot;PATCH&quot;:\n                return paths.getPatch();\n            case &quot;PUT&quot;:\n                return paths.getPut();\n            case &quot;DELETE&quot;:\n                return paths.getDelete();\n            case &quot;GET&quot;:\n                return paths.getGet();\n            case &quot;OPTIONS&quot;:\n                return paths.getOptions();\n            case &quot;HEAD&quot;:\n                return paths.getHead();\n            case &quot;TRACE&quot;:\n                return paths.getTrace();\n            default:\n                return null;\n        }\n    }\n\n    public List&lt;ExampleValue&gt; buildExamplesFromJson() {\n        List&lt;ExampleValue&gt; result = new ArrayList&lt;&gt;();\n\n        JsonObject jsonObject = new Gson().fromJson(asString(swaggerExamples), JsonObject.class);\n        JsonArray endpoints = jsonObject.getAsJsonArray(&quot;endpoints&quot;);\n\n        endpoints.forEach(element -&gt; {\n            JsonObject path = element.getAsJsonObject();\n\n            String endpointPath = path.get(&quot;path&quot;).getAsString();\n            String method = path.get(&quot;method&quot;).getAsString();\n\n            path.get(&quot;responses&quot;).getAsJsonArray().forEach(response -&gt; {\n                JsonObject resp = response.getAsJsonObject();\n\n                int status = resp.get(&quot;status&quot;).getAsInt();\n\n                resp.getAsJsonArray(&quot;errors&quot;).forEach(error -&gt; {\n\n                    JsonObject errorObj = error.getAsJsonObject();\n                    String enumName = errorObj.get(&quot;enum&quot;).getAsString();\n\n\n                    Example example = new Example();\n                    example.description(errorObj.get(&quot;description&quot;).getAsString());\n                    example.value(ErpResponseBodyDTO.builder().error(new MyExceptionWrapperClassException(MessageError.valueOf(enumName)).getResponse().getError()).build());\n\n                    ExampleValue exampleValue = new ExampleValue(errorObj.get(&quot;exampleName&quot;).getAsString(), example, status, method, endpointPath);\n\n                    result.add(exampleValue);\n\n                });\n\n            });\n\n\n        });\n\n        return result;\n\n    }\n\n    public static String asString(Resource resource) {\n        try (Reader reader = new InputStreamReader(resource.getInputStream())) {\n            return FileCopyUtils.copyToString(reader);\n        } catch (IOException e) {\n            throw new UncheckedIOException(e);\n        }\n    }\n\n    @Data\n    @AllArgsConstructor\n    private class ExampleValue {\n        private String exampleName;\n        private Example example;\n        private int httpStatus;\n        private String httpMethod;\n        private String path;\n    }\n\n }\n\n</code></pre>\n<p>As you can see, I read a Json file from resources:</p>\n<pre><code>{\n  &quot;endpoints&quot;: [\n\n\n    {\n      &quot;path&quot;:  &quot;/endpoint/that/{already}/{exists-in-swagger}&quot;,\n      &quot;method&quot;: &quot;POST&quot;,\n      &quot;responses&quot;: [\n\n        {\n          &quot;status&quot;:  401,\n          &quot;errors&quot;:[\n            {&quot;description&quot;:&quot;A description&quot;,&quot;enum&quot;: &quot;ENUM_THAT_I_HAVE_SO_PAY_ATTENTION&quot;, &quot;exampleName&quot;:  &quot;You have thrown an error&quot;}\n          ]\n        }\n\n      ]\n    }\n\n\n  ]\n}\n</code></pre>\n"}],"owner":{"account_id":18624324,"reputation":186,"user_id":13573784,"display_name":"Vitor Nilson"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1732,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677863788,"creation_date":1677783423,"question_id":75619756,"body_markdown":"I am working in a Spring Boot 2.5.2 + Java 8 project which has Open API 3.0:\r\n\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.6.14&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nI need to show some specific error bodies to the user like this:\r\n\r\nThis example comes from **another** Spring boot project where swagger is mapped with an yaml file.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9yLXB.png\r\n\r\n\r\n\r\n---\r\n\r\n---\r\n\r\n---\r\n\r\nI need to show examples with a similar body but using annotations (because if a new endpoint is added it will be automatically mapped to the Swagger UI. We are facing an issue where developers are forgetting to map the endpoint in the yaml file, this action is trying to avoid this).\r\n\r\nHere are my mapping:\r\n\r\n```\r\n@ApiResponse(responseCode = &quot;401&quot;,\r\n                    description = &quot;Something is required.&quot;,\r\n                    content = {\r\n                            @Content(mediaType = &quot;application/json&quot;,\r\n\r\n                                    examples = {\r\n\r\n                                        //The problem lays here!!\r\n                                    }\r\n\r\n                            )\r\n\r\n                    })\r\n    })\r\n    public abstract ResponseEntity&lt;Mono&lt;Object&gt;&gt; queryLegacy(String query);\r\n```\r\n\r\nMy error class is `ErpResponseBodyDTO.class`.\r\n\r\n```\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class ErpResponseBodyDTO{\r\n  private Long code;\r\n  private String message;\r\n}\r\n```\r\n\r\nHow can I create a Instance of this class like `new ErpResponseBodyDTO(123, &quot;Error Message&quot;);` and use this instance as an Example?\r\n\r\nI mean, something like:\r\n\r\n```\r\n...\r\n@Content(mediaType = &quot;application/json&quot;,\r\n\r\nexamples = {\r\n\r\n    new ErpResponseBodyDTO(123, &quot;Error Message&quot;),\r\n    new ErpResponseBodyDTO(456, &quot;Error Message 2&quot;),\r\n    new ErpResponseBodyDTO(789, &quot;Error Message 3&quot;)\r\n}\r\n)\r\n...\r\n\r\n```\r\n\r\nI don&#39;t want to write manually a Json Example because my API has a lot of possible errors and writing it in the `@ExampleObject(value=&quot; \r\n {&quot;A&quot;:&quot;BIG&quot;, &quot;JSON&quot;:&quot;HERE&quot;}  &quot;)` will pollute the code. ","title":"Spring Boot Open API 3.0 - How to show custom examples without writing a Json Manually","body":"<p>I am working in a Spring Boot 2.5.2 + Java 8 project which has Open API 3.0:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n    &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n    &lt;version&gt;1.6.14&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I need to show some specific error bodies to the user like this:</p>\n<p>This example comes from <strong>another</strong> Spring boot project where swagger is mapped with an yaml file.\n<a href=\"https://i.stack.imgur.com/9yLXB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9yLXB.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<hr />\n<hr />\n<p>I need to show examples with a similar body but using annotations (because if a new endpoint is added it will be automatically mapped to the Swagger UI. We are facing an issue where developers are forgetting to map the endpoint in the yaml file, this action is trying to avoid this).</p>\n<p>Here are my mapping:</p>\n<pre><code>@ApiResponse(responseCode = &quot;401&quot;,\n                    description = &quot;Something is required.&quot;,\n                    content = {\n                            @Content(mediaType = &quot;application/json&quot;,\n\n                                    examples = {\n\n                                        //The problem lays here!!\n                                    }\n\n                            )\n\n                    })\n    })\n    public abstract ResponseEntity&lt;Mono&lt;Object&gt;&gt; queryLegacy(String query);\n</code></pre>\n<p>My error class is <code>ErpResponseBodyDTO.class</code>.</p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\npublic class ErpResponseBodyDTO{\n  private Long code;\n  private String message;\n}\n</code></pre>\n<p>How can I create a Instance of this class like <code>new ErpResponseBodyDTO(123, &quot;Error Message&quot;);</code> and use this instance as an Example?</p>\n<p>I mean, something like:</p>\n<pre><code>...\n@Content(mediaType = &quot;application/json&quot;,\n\nexamples = {\n\n    new ErpResponseBodyDTO(123, &quot;Error Message&quot;),\n    new ErpResponseBodyDTO(456, &quot;Error Message 2&quot;),\n    new ErpResponseBodyDTO(789, &quot;Error Message 3&quot;)\n}\n)\n...\n\n</code></pre>\n<p>I don't want to write manually a Json Example because my API has a lot of possible errors and writing it in the <code>@ExampleObject(value=&quot;  {&quot;A&quot;:&quot;BIG&quot;, &quot;JSON&quot;:&quot;HERE&quot;}  &quot;)</code> will pollute the code.</p>\n"},{"tags":["java","xml","xslt"],"comments":[{"owner":{"account_id":3616427,"reputation":114440,"user_id":3016153,"display_name":"michael.hor257k"},"score":2,"creation_date":1677792301,"post_id":75620841,"comment_id":133412740,"body_markdown":"I doubt very much XSLT is the right tool for this.","body":"I doubt very much XSLT is the right tool for this."},{"owner":{"account_id":26503505,"reputation":31,"user_id":20140051,"display_name":"pouce"},"score":0,"creation_date":1677792410,"post_id":75620841,"comment_id":133412773,"body_markdown":"Yes, xml unit must be more useful but i already use xslt to sort xml files. So i would like to use xslt again to show differences between the two files sorted.","body":"Yes, xml unit must be more useful but i already use xslt to sort xml files. So i would like to use xslt again to show differences between the two files sorted."},{"owner":{"account_id":3616427,"reputation":114440,"user_id":3016153,"display_name":"michael.hor257k"},"score":0,"creation_date":1677793308,"post_id":75620841,"comment_id":133412997,"body_markdown":"Well, it cannot work the way you imagine. And I am not sure it can work at all. You did not explain what are the rules for the comparison or even what is the expected result. If the 2 documents have *exactly* the same structure, and the only differences you are looking for are in the values of the `key` and `value` attributes of corresponding nodes, then it *might* be possible - but it won&#39;t be easy (esp. not in XSLT 1.0).","body":"Well, it cannot work the way you imagine. And I am not sure it can work at all. You did not explain what are the rules for the comparison or even what is the expected result. If the 2 documents have <i>exactly</i> the same structure, and the only differences you are looking for are in the values of the <code>key</code> and <code>value</code> attributes of corresponding nodes, then it <i>might</i> be possible - but it won&#39;t be easy (esp. not in XSLT 1.0)."},{"owner":{"account_id":26503505,"reputation":31,"user_id":20140051,"display_name":"pouce"},"score":0,"creation_date":1677793446,"post_id":75620841,"comment_id":133413025,"body_markdown":"Yes, the structure is the same.","body":"Yes, the structure is the same."},{"owner":{"account_id":3616427,"reputation":114440,"user_id":3016153,"display_name":"michael.hor257k"},"score":0,"creation_date":1677794171,"post_id":75620841,"comment_id":133413187,"body_markdown":"Here is something quite similar that you could adapt to your situation. Though I would still advise against it. https://stackoverflow.com/a/32890764/3016153","body":"Here is something quite similar that you could adapt to your situation. Though I would still advise against it. <a href=\"https://stackoverflow.com/a/32890764/3016153\">stackoverflow.com/a/32890764/3016153</a>"},{"owner":{"account_id":26503505,"reputation":31,"user_id":20140051,"display_name":"pouce"},"score":0,"creation_date":1677795662,"post_id":75620841,"comment_id":133413458,"body_markdown":"Thank you but I don&#39;t know how to do otherwise because with XMLUnit1 the result done is not clear for me and with java it seems difficult to make with hashmap .","body":"Thank you but I don&#39;t know how to do otherwise because with XMLUnit1 the result done is not clear for me and with java it seems difficult to make with hashmap ."},{"owner":{"account_id":3616427,"reputation":114440,"user_id":3016153,"display_name":"michael.hor257k"},"score":0,"creation_date":1677863522,"post_id":75620841,"comment_id":133427520,"body_markdown":"I rolled your question back to the original, after you have (quite correctly) posted a new one with the changed requirements.","body":"I rolled your question back to the original, after you have (quite correctly) posted a new one with the changed requirements."},{"owner":{"account_id":26503505,"reputation":31,"user_id":20140051,"display_name":"pouce"},"score":0,"creation_date":1677864557,"post_id":75620841,"comment_id":133427774,"body_markdown":"Yes, i would like to better explain the problem. So i posted a new message but it has been deleted. How better explain because my edit has also been deleted.","body":"Yes, i would like to better explain the problem. So i posted a new message but it has been deleted. How better explain because my edit has also been deleted."},{"owner":{"account_id":3616427,"reputation":114440,"user_id":3016153,"display_name":"michael.hor257k"},"score":0,"creation_date":1677865295,"post_id":75620841,"comment_id":133427978,"body_markdown":"I have reopened your other question. But I must tell you that you are not explaining the logic very well (at least not well enough for me to understand it).","body":"I have reopened your other question. But I must tell you that you are not explaining the logic very well (at least not well enough for me to understand it)."},{"owner":{"account_id":26503505,"reputation":31,"user_id":20140051,"display_name":"pouce"},"score":0,"creation_date":1677867000,"post_id":75620841,"comment_id":133428415,"body_markdown":"I edited it. I hope it is better now.","body":"I edited it. I hope it is better now."}],"answers":[{"comments":[{"owner":{"account_id":3616427,"reputation":114440,"user_id":3016153,"display_name":"michael.hor257k"},"score":0,"creation_date":1677798354,"post_id":75621454,"comment_id":133413904,"body_markdown":"I don&#39;t think this implements the requested logic: what if a node with the same key and value exists in another position?","body":"I don&#39;t think this implements the requested logic: what if a node with the same key and value exists in another position?"},{"owner":{"account_id":91947,"reputation":161829,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":0,"creation_date":1677799030,"post_id":75621454,"comment_id":133414011,"body_markdown":"@michael.hor257k, if you happen to know or understand the &quot;requested logic&quot;, good for you, I tried to make sense of the sample result together with the sample input, nothing more and nothing less. What &quot;logic&quot; is behind a code sample doing e.g `&lt;xsl:comment&gt;&quot;only in file1&quot;&lt;/xsl:comment&gt;`  and `&lt;xsl:comment&gt;&quot;only in file2&quot;&lt;/xsl:comment&gt;` in a template matching `@* | node()` and pretending to do some recursive processing but ending up with a single `&quot;only in file1&quot;` listing some values followed by a single `&quot;only in file2&quot;` listing some other values?","body":"@michael.hor257k, if you happen to know or understand the &quot;requested logic&quot;, good for you, I tried to make sense of the sample result together with the sample input, nothing more and nothing less. What &quot;logic&quot; is behind a code sample doing e.g <code>&lt;xsl:comment&gt;&quot;only in file1&quot;&lt;&#47;xsl:comment&gt;</code>  and <code>&lt;xsl:comment&gt;&quot;only in file2&quot;&lt;&#47;xsl:comment&gt;</code> in a template matching <code>@* | node()</code> and pretending to do some recursive processing but ending up with a single <code>&quot;only in file1&quot;</code> listing some values followed by a single <code>&quot;only in file2&quot;</code> listing some other values?"},{"owner":{"account_id":26503505,"reputation":31,"user_id":20140051,"display_name":"pouce"},"score":0,"creation_date":1677799191,"post_id":75621454,"comment_id":133414034,"body_markdown":"Good try thank you but I can&#39;t go with XSLT3 because my project can&#39;t have external jar.","body":"Good try thank you but I can&#39;t go with XSLT3 because my project can&#39;t have external jar."},{"owner":{"account_id":26503505,"reputation":31,"user_id":20140051,"display_name":"pouce"},"score":0,"creation_date":1677810033,"post_id":75621454,"comment_id":133415436,"body_markdown":"is it possible for you to transform your code with the XSLT1 version ?","body":"is it possible for you to transform your code with the XSLT1 version ?"}],"tags":[],"owner":{"account_id":91947,"reputation":161829,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677796422,"creation_date":1677796422,"answer_id":75621454,"question_id":75620841,"body_markdown":"As you are using Java it is usually possible to use Saxon HE (currently supported versions are 10, 11, 12) and XSLT 3:\r\n\r\n    &lt;xsl:stylesheet version=&quot;3.0&quot;\r\n    xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;\r\n    \r\n    &lt;xsl:output method=&quot;text&quot;/&gt;\r\n    \r\n    &lt;xsl:key name=&quot;key&quot; match=&quot;*&quot; use=&quot;@key, @value&quot; composite=&quot;yes&quot; /&gt;\r\n    \r\n    &lt;xsl:template match=&quot;/&quot;&gt;\r\n    &lt;xsl:text&gt;&quot;only in file1&quot;&amp;#10;&lt;/xsl:text&gt;\r\n    &lt;xsl:value-of select=&quot;//*[not(key(&#39;key&#39;, (@key, @value), $file2))]!(&#39;key: &#39; || @key || &#39; value : &#39; || @value)&quot; separator=&quot;&amp;#10;&quot;/&gt;\r\n    &lt;xsl:text&gt;&amp;#10;&quot;only in file&quot;&amp;#10;&lt;/xsl:text&gt;\r\n    &lt;xsl:value-of select=&quot;$file2//*[not(key(&#39;key&#39;, (@key, @value), current()))]!(&#39;key: &#39; || @key || &#39; value : &#39; || @value)&quot; separator=&quot;&amp;#10;&quot;/&gt;\r\n    &lt;/xsl:template&gt;\r\n    \r\n    \r\n    &lt;xsl:variable name=&quot;file2&quot; select=&quot;doc(&#39;file2.xml&#39;)&quot;/&gt;\r\n    \r\n    &lt;/xsl:stylesheet&gt;\r\n\r\nResult\r\n\r\n    &quot;only in file1&quot;\r\n    key: B value : B1\r\n    key: Z value : Z1\r\n    key: Y value : \r\n    key: C value : C1\r\n    &quot;only in file&quot;\r\n    key: B value : O1\r\n    key: G value : Z1\r\n    key: Y2 value : \r\n    key: C1 value : C8","title":"Compare two xml files with XSLT","body":"<p>As you are using Java it is usually possible to use Saxon HE (currently supported versions are 10, 11, 12) and XSLT 3:</p>\n<pre><code>&lt;xsl:stylesheet version=&quot;3.0&quot;\nxmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;\n\n&lt;xsl:output method=&quot;text&quot;/&gt;\n\n&lt;xsl:key name=&quot;key&quot; match=&quot;*&quot; use=&quot;@key, @value&quot; composite=&quot;yes&quot; /&gt;\n\n&lt;xsl:template match=&quot;/&quot;&gt;\n&lt;xsl:text&gt;&quot;only in file1&quot;&amp;#10;&lt;/xsl:text&gt;\n&lt;xsl:value-of select=&quot;//*[not(key('key', (@key, @value), $file2))]!('key: ' || @key || ' value : ' || @value)&quot; separator=&quot;&amp;#10;&quot;/&gt;\n&lt;xsl:text&gt;&amp;#10;&quot;only in file&quot;&amp;#10;&lt;/xsl:text&gt;\n&lt;xsl:value-of select=&quot;$file2//*[not(key('key', (@key, @value), current()))]!('key: ' || @key || ' value : ' || @value)&quot; separator=&quot;&amp;#10;&quot;/&gt;\n&lt;/xsl:template&gt;\n\n\n&lt;xsl:variable name=&quot;file2&quot; select=&quot;doc('file2.xml')&quot;/&gt;\n\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n<p>Result</p>\n<pre><code>&quot;only in file1&quot;\nkey: B value : B1\nkey: Z value : Z1\nkey: Y value : \nkey: C value : C1\n&quot;only in file&quot;\nkey: B value : O1\nkey: G value : Z1\nkey: Y2 value : \nkey: C1 value : C8\n</code></pre>\n"},{"comments":[{"owner":{"account_id":26503505,"reputation":31,"user_id":20140051,"display_name":"pouce"},"score":0,"creation_date":1677831975,"post_id":75623321,"comment_id":133418646,"body_markdown":"It works well thank you for your help. I will post an other question because  i don&#39;t think it will work again if one Key is missing from one side ? with this try, i think a Line of file1 is compared with the same Line of file2. If i iterate &amp;i  perhaps it could be possible to check all the Lines of file2 for each Line of file1.","body":"It works well thank you for your help. I will post an other question because  i don&#39;t think it will work again if one Key is missing from one side ? with this try, i think a Line of file1 is compared with the same Line of file2. If i iterate &amp;i  perhaps it could be possible to check all the Lines of file2 for each Line of file1."},{"owner":{"account_id":3616427,"reputation":114440,"user_id":3016153,"display_name":"michael.hor257k"},"score":0,"creation_date":1677833854,"post_id":75623321,"comment_id":133419066,"body_markdown":"I am not sure what you mean by  &quot;one Key is missing from one side&quot;.  The way this works is that each `Node` is assigned a serial number based on the order in which it appears in the XML. Then each pair of `Node`s with the same serial number is compared - and if they don&#39;t have the same values in their `key` and `value` attributes, a `Diff` is created. If one `Node` in a pair has a `key` value and the other one doesn&#39;t, then they are not the same.","body":"I am not sure what you mean by  &quot;one Key is missing from one side&quot;.  The way this works is that each <code>Node</code> is assigned a serial number based on the order in which it appears in the XML. Then each pair of <code>Node</code>s with the same serial number is compared - and if they don&#39;t have the same values in their <code>key</code> and <code>value</code> attributes, a <code>Diff</code> is created. If one <code>Node</code> in a pair has a <code>key</code> value and the other one doesn&#39;t, then they are not the same."},{"owner":{"account_id":26503505,"reputation":31,"user_id":20140051,"display_name":"pouce"},"score":0,"creation_date":1677856637,"post_id":75623321,"comment_id":133425371,"body_markdown":"I have written an edit. Your first try with XSLT3.0 was already a good try for me but the next one is not suited to my problem as I have tried to explain it in my edit post.","body":"I have written an edit. Your first try with XSLT3.0 was already a good try for me but the next one is not suited to my problem as I have tried to explain it in my edit post."},{"owner":{"account_id":3616427,"reputation":114440,"user_id":3016153,"display_name":"michael.hor257k"},"score":0,"creation_date":1677858749,"post_id":75623321,"comment_id":133426076,"body_markdown":"I said in my comment to your question that this might be possible if the 2 documents have *exactly* the same structure. You replied that yes, the structure is the same. This is NOT true in your new example - and we are back at the beginning where the logic that needs to be applied is not clear. If you want to compare the `Node`s based on matching `key` values, **regardless of where in the hierarchy the `Node` is**, then this is a completely different problem and you should have posted it in a new question. And of course, this can only work if the `key` values are unique.","body":"I said in my comment to your question that this might be possible if the 2 documents have <i>exactly</i> the same structure. You replied that yes, the structure is the same. This is NOT true in your new example - and we are back at the beginning where the logic that needs to be applied is not clear. If you want to compare the <code>Node</code>s based on matching <code>key</code> values, <b>regardless of where in the hierarchy the <code>Node</code> is</b>, then this is a completely different problem and you should have posted it in a new question. And of course, this can only work if the <code>key</code> values are unique."},{"owner":{"account_id":3616427,"reputation":114440,"user_id":3016153,"display_name":"michael.hor257k"},"score":0,"creation_date":1677858810,"post_id":75623321,"comment_id":133426102,"body_markdown":"Note also that I did NOT post the XSLT 3.0 suggested solution.","body":"Note also that I did NOT post the XSLT 3.0 suggested solution."},{"owner":{"account_id":26503505,"reputation":31,"user_id":20140051,"display_name":"pouce"},"score":0,"creation_date":1677862614,"post_id":75623321,"comment_id":133427239,"body_markdown":"When I said the structure is the same, I wanted to say that all the keys are sorted by algebraic order. Sorry for the misunderstanding.","body":"When I said the structure is the same, I wanted to say that all the keys are sorted by algebraic order. Sorry for the misunderstanding."}],"tags":[],"owner":{"account_id":3616427,"reputation":114440,"user_id":3016153,"display_name":"michael.hor257k"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677819461,"creation_date":1677819461,"answer_id":75623321,"question_id":75620841,"body_markdown":"Here is something relatively simple I managed to put together quickly. The result format is different from what you show - but I see no good reason to perform the same comparison twice. (If you want, you could put the result in a variable and then &quot;print&quot; it out twice, once for each side).\r\n\r\n**XSLT 1.0**\r\n\r\n    &lt;xsl:stylesheet version=&quot;1.0&quot; \r\n    xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;\r\n    &lt;xsl:output method=&quot;xml&quot; version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; indent=&quot;yes&quot;/&gt;\r\n    \r\n    &lt;xsl:variable name=&quot;v1&quot; select=&quot;//node&quot; /&gt;\r\n    &lt;xsl:variable name=&quot;v2&quot; select=&quot;document(&#39;file2.xml&#39;)//node&quot; /&gt;\r\n    \r\n    &lt;xsl:template match=&quot;/&quot;&gt;\r\n    \t&lt;differences&gt;\r\n    \t\t&lt;xsl:for-each select=&quot;$v1&quot;&gt;\r\n    \t\t\t&lt;xsl:variable name=&quot;i&quot; select=&quot;position()&quot; /&gt;\r\n    \t\t\t&lt;xsl:variable name=&quot;n2&quot; select=&quot;$v2[$i]&quot; /&gt;\r\n    \t\t\t&lt;xsl:if test=&quot;@key != $n2/@key or @value != $n2/@value&quot;&gt;\r\n    \t\t\t\t&lt;diff key1=&quot;{@key}&quot; key2=&quot;{$n2/@key}&quot; value1=&quot;{@value}&quot; value2=&quot;{$n2/@value}&quot;/&gt;\r\n    \t\t\t&lt;/xsl:if&gt;\r\n    \t\t&lt;/xsl:for-each&gt;\r\n    \t&lt;/differences&gt;\r\n    &lt;/xsl:template&gt;\r\n    \r\n    &lt;/xsl:stylesheet&gt;\r\n\r\nApplied to your input example, the result will be:\r\n\r\n**Result**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;differences&gt;\r\n       &lt;diff key1=&quot;B&quot; key2=&quot;B&quot; value1=&quot;B1&quot; value2=&quot;O1&quot;/&gt;\r\n       &lt;diff key1=&quot;Z&quot; key2=&quot;G&quot; value1=&quot;Z1&quot; value2=&quot;Z1&quot;/&gt;\r\n       &lt;diff key1=&quot;Y&quot; key2=&quot;Y2&quot; value1=&quot;&quot; value2=&quot;&quot;/&gt;\r\n       &lt;diff key1=&quot;C&quot; key2=&quot;C1&quot; value1=&quot;C1&quot; value2=&quot;C8&quot;/&gt;\r\n    &lt;/differences&gt;\r\n\r\n","title":"Compare two xml files with XSLT","body":"<p>Here is something relatively simple I managed to put together quickly. The result format is different from what you show - but I see no good reason to perform the same comparison twice. (If you want, you could put the result in a variable and then &quot;print&quot; it out twice, once for each side).</p>\n<p><strong>XSLT 1.0</strong></p>\n<pre><code>&lt;xsl:stylesheet version=&quot;1.0&quot; \nxmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;\n&lt;xsl:output method=&quot;xml&quot; version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; indent=&quot;yes&quot;/&gt;\n\n&lt;xsl:variable name=&quot;v1&quot; select=&quot;//node&quot; /&gt;\n&lt;xsl:variable name=&quot;v2&quot; select=&quot;document('file2.xml')//node&quot; /&gt;\n\n&lt;xsl:template match=&quot;/&quot;&gt;\n    &lt;differences&gt;\n        &lt;xsl:for-each select=&quot;$v1&quot;&gt;\n            &lt;xsl:variable name=&quot;i&quot; select=&quot;position()&quot; /&gt;\n            &lt;xsl:variable name=&quot;n2&quot; select=&quot;$v2[$i]&quot; /&gt;\n            &lt;xsl:if test=&quot;@key != $n2/@key or @value != $n2/@value&quot;&gt;\n                &lt;diff key1=&quot;{@key}&quot; key2=&quot;{$n2/@key}&quot; value1=&quot;{@value}&quot; value2=&quot;{$n2/@value}&quot;/&gt;\n            &lt;/xsl:if&gt;\n        &lt;/xsl:for-each&gt;\n    &lt;/differences&gt;\n&lt;/xsl:template&gt;\n\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n<p>Applied to your input example, the result will be:</p>\n<p><strong>Result</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;differences&gt;\n   &lt;diff key1=&quot;B&quot; key2=&quot;B&quot; value1=&quot;B1&quot; value2=&quot;O1&quot;/&gt;\n   &lt;diff key1=&quot;Z&quot; key2=&quot;G&quot; value1=&quot;Z1&quot; value2=&quot;Z1&quot;/&gt;\n   &lt;diff key1=&quot;Y&quot; key2=&quot;Y2&quot; value1=&quot;&quot; value2=&quot;&quot;/&gt;\n   &lt;diff key1=&quot;C&quot; key2=&quot;C1&quot; value1=&quot;C1&quot; value2=&quot;C8&quot;/&gt;\n&lt;/differences&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":26503505,"reputation":31,"user_id":20140051,"display_name":"pouce"},"score":0,"creation_date":1677856515,"post_id":75626733,"comment_id":133425333,"body_markdown":"Thank you for your response. I have written an edit to be clearer. Unfortunately, I can&#39;t use XSLT 3.0. Only XSLT1.0 is possible. I hope my description is enough clear.","body":"Thank you for your response. I have written an edit to be clearer. Unfortunately, I can&#39;t use XSLT 3.0. Only XSLT1.0 is possible. I hope my description is enough clear."}],"tags":[],"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677844302,"creation_date":1677844302,"answer_id":75626733,"question_id":75620841,"body_markdown":"You asked:\r\n\r\n&gt; I have an synthax error with $file2/[not(@key=$key1)]\r\n\r\nWell, yes, that isn&#39;t a valid XPath expression. I can&#39;t offer an immediate correction, because I&#39;ve no idea what it was intended to do. And when I look at the rest of your stylesheet, it&#39;s full of similar errors that suggest you haven&#39;t mastered the basics. I&#39;m afraid my immediate reaction is, only someone with a much better knowledge of XPath should be attempting a task as complex as this.\r\n\r\nUnlike @michael.hor257k, I think that XSLT is a perfectly good tool for this job, especially later versions such as XSLT 3.0. However, there are two big jobs to do before you start coding: one is to define the requirements much more precisely, and the second is to learn XSLT. I would recommend writing some simpler XSLT stylesheets before you tackle a difficult one like this.","title":"Compare two xml files with XSLT","body":"<p>You asked:</p>\n<blockquote>\n<p>I have an synthax error with $file2/[not(@key=$key1)]</p>\n</blockquote>\n<p>Well, yes, that isn't a valid XPath expression. I can't offer an immediate correction, because I've no idea what it was intended to do. And when I look at the rest of your stylesheet, it's full of similar errors that suggest you haven't mastered the basics. I'm afraid my immediate reaction is, only someone with a much better knowledge of XPath should be attempting a task as complex as this.</p>\n<p>Unlike @michael.hor257k, I think that XSLT is a perfectly good tool for this job, especially later versions such as XSLT 3.0. However, there are two big jobs to do before you start coding: one is to define the requirements much more precisely, and the second is to learn XSLT. I would recommend writing some simpler XSLT stylesheets before you tackle a difficult one like this.</p>\n"}],"owner":{"account_id":26503505,"reputation":31,"user_id":20140051,"display_name":"pouce"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":157,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":3,"score":-1,"last_activity_date":1677863428,"creation_date":1677791215,"question_id":75620841,"body_markdown":"I have two XML files, file1.xml and file2.xml.\r\nI want to compare these two files and write in the file3.txt the difference of contents.\r\n\r\nIt doesn&#39;t work because I have an synthax error with $file2/[not(@key=$key1)]\r\n\r\nHow can I solve that ?\r\n\r\n**File 1**\r\n\r\n\r\n```\r\n&lt;node key=&quot;U&quot;&gt;\r\n  &lt;node key=&quot;E&quot; value=&quot;E1&quot;/&gt;\r\n  &lt;node key=&quot;B&quot; value=&quot;B1&quot;/&gt;\r\n  &lt;node key=&quot;Z&quot; value=&quot;Z1&quot;/&gt;\r\n  &lt;node key=&quot;T&quot;&gt;\r\n    &lt;node key=&quot;Y&quot;&gt;\r\n      &lt;node key=&quot;H&quot; value=&quot;H1&quot;/&gt;\r\n      &lt;node key=&quot;C&quot; value=&quot;C1&quot;/&gt;\r\n      &lt;node key=&quot;P&quot; value=&quot;P1&quot;/&gt;\r\n    &lt;/node&gt;\r\n  &lt;/node&gt;\r\n&lt;/node&gt;\r\n```\r\n\r\n****File 2**** **\r\n\r\n\r\n```\r\n&lt;node key=&quot;U&quot;&gt;\r\n  &lt;node key=&quot;E&quot; value=&quot;E1&quot;/&gt;\r\n  &lt;node key=&quot;B&quot; value=&quot;O1&quot;/&gt;\r\n  &lt;node key=&quot;G&quot; value=&quot;Z1&quot;/&gt;\r\n  &lt;node key=&quot;T&quot;&gt;\r\n    &lt;node key=&quot;Y2&quot;&gt;\r\n      &lt;node key=&quot;H&quot; value=&quot;H1&quot;/&gt;\r\n      &lt;node key=&quot;C1&quot; value=&quot;C8&quot;/&gt;\r\n      &lt;node key=&quot;P&quot; value=&quot;P1&quot;/&gt;\r\n    &lt;/node&gt;\r\n  &lt;/node&gt;\r\n&lt;/node&gt;\r\n\r\n\r\n\r\n\r\n\r\n```\r\n**XSLT**\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;xsl:stylesheet version=&quot;1.0&quot;\r\nxmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;\r\n&lt;xsl:output method=&quot;xml&quot;  omit-xml-declaration=&quot;yes&quot; version=&quot;1.0&quot; encoding=&quot;utf-8&quot; indent=&quot;yes&quot;/&gt;\r\n\r\n&lt;xsl:variable name=&quot;file2&quot; select=&quot;document(&#39;file2.xml&#39;)&quot; /&gt;\r\n\r\n&lt;xsl:variable name=&quot;key1&quot; select=&quot;@key&quot; /&gt;\r\n&lt;xsl:variable name=&quot;key2&quot; select=&quot;@key&quot; /&gt;\r\n\r\n&lt;xsl:template match=&quot;@* | node()&quot;&gt;\r\n\t&lt;xsl:comment&gt;&quot;only in file1&quot;&lt;/xsl:comment&gt;\r\n        &lt;xsl:apply-templates select=&quot;[not(@key=$key2)]&quot;/&gt;\r\n\t&lt;xsl:comment&gt;&quot;only in file2&quot;&lt;/xsl:comment&gt;\r\n        &lt;xsl:apply-templates select=&quot;$file2/[not(@key=$key1)]&quot;/&gt;\r\n&lt;/xsl:template&gt;\r\n&lt;/xsl:stylesheet&gt;\r\n\r\n```\r\n\r\n**Java Code**\r\n\r\n\r\n```\r\npackage XSLT;\r\n\r\nimport javax.xml.transform.*;\r\nimport javax.xml.transform.stream.StreamResult;\r\nimport javax.xml.transform.stream.StreamSource;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.net.URISyntaxException;\r\n\r\npublic class MainCompare {\r\n    public static void main(String[] args) throws IOException, URISyntaxException, TransformerException {\r\n        TransformerFactory factory = TransformerFactory.newInstance();\r\n        Source xslt = new StreamSource(new File(&quot;transform2.xslt&quot;));\r\n        Transformer transformer = factory.newTransformer(xslt);\r\n\r\n        Source text = new StreamSource(new File(&quot;file1.xml&quot;));\r\n        transformer.transform(text, new StreamResult(new File(&quot;file3.txt&quot;)));\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nI would like to get differences between the two XML files.\r\n\r\nResult wanted\r\n\r\n&gt;     &quot;only in file1&quot;\r\n&gt;     \r\n&gt;      key=&quot;B&quot; value=&quot;B1&quot;\r\n&gt;      key=&quot;Z&quot; value=&quot;Z1&quot;\r\n&gt;      key=&quot;Y&quot;\r\n&gt;      key=&quot;C&quot; value=&quot;C1&quot;\r\n&gt;     \r\n&gt;     &quot;only in file2&quot;\r\n&gt;     \r\n&gt;       key=&quot;B&quot; value=&quot;O1&quot;\r\n&gt;       key=&quot;G&quot; value=&quot;Z1&quot;\r\n&gt;       key=&quot;Y2&quot;\r\n&gt;       key=&quot;C1&quot; value=&quot;C8&quot;","title":"Compare two xml files with XSLT","body":"<p>I have two XML files, file1.xml and file2.xml.\nI want to compare these two files and write in the file3.txt the difference of contents.</p>\n<p>It doesn't work because I have an synthax error with $file2/[not(@key=$key1)]</p>\n<p>How can I solve that ?</p>\n<p><strong>File 1</strong></p>\n<pre><code>&lt;node key=&quot;U&quot;&gt;\n  &lt;node key=&quot;E&quot; value=&quot;E1&quot;/&gt;\n  &lt;node key=&quot;B&quot; value=&quot;B1&quot;/&gt;\n  &lt;node key=&quot;Z&quot; value=&quot;Z1&quot;/&gt;\n  &lt;node key=&quot;T&quot;&gt;\n    &lt;node key=&quot;Y&quot;&gt;\n      &lt;node key=&quot;H&quot; value=&quot;H1&quot;/&gt;\n      &lt;node key=&quot;C&quot; value=&quot;C1&quot;/&gt;\n      &lt;node key=&quot;P&quot; value=&quot;P1&quot;/&gt;\n    &lt;/node&gt;\n  &lt;/node&gt;\n&lt;/node&gt;\n</code></pre>\n<p><strong><strong>File 2</strong></strong> **</p>\n<pre><code>&lt;node key=&quot;U&quot;&gt;\n  &lt;node key=&quot;E&quot; value=&quot;E1&quot;/&gt;\n  &lt;node key=&quot;B&quot; value=&quot;O1&quot;/&gt;\n  &lt;node key=&quot;G&quot; value=&quot;Z1&quot;/&gt;\n  &lt;node key=&quot;T&quot;&gt;\n    &lt;node key=&quot;Y2&quot;&gt;\n      &lt;node key=&quot;H&quot; value=&quot;H1&quot;/&gt;\n      &lt;node key=&quot;C1&quot; value=&quot;C8&quot;/&gt;\n      &lt;node key=&quot;P&quot; value=&quot;P1&quot;/&gt;\n    &lt;/node&gt;\n  &lt;/node&gt;\n&lt;/node&gt;\n\n\n\n\n\n</code></pre>\n<p><strong>XSLT</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;xsl:stylesheet version=&quot;1.0&quot;\nxmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;\n&lt;xsl:output method=&quot;xml&quot;  omit-xml-declaration=&quot;yes&quot; version=&quot;1.0&quot; encoding=&quot;utf-8&quot; indent=&quot;yes&quot;/&gt;\n\n&lt;xsl:variable name=&quot;file2&quot; select=&quot;document('file2.xml')&quot; /&gt;\n\n&lt;xsl:variable name=&quot;key1&quot; select=&quot;@key&quot; /&gt;\n&lt;xsl:variable name=&quot;key2&quot; select=&quot;@key&quot; /&gt;\n\n&lt;xsl:template match=&quot;@* | node()&quot;&gt;\n    &lt;xsl:comment&gt;&quot;only in file1&quot;&lt;/xsl:comment&gt;\n        &lt;xsl:apply-templates select=&quot;[not(@key=$key2)]&quot;/&gt;\n    &lt;xsl:comment&gt;&quot;only in file2&quot;&lt;/xsl:comment&gt;\n        &lt;xsl:apply-templates select=&quot;$file2/[not(@key=$key1)]&quot;/&gt;\n&lt;/xsl:template&gt;\n&lt;/xsl:stylesheet&gt;\n\n</code></pre>\n<p><strong>Java Code</strong></p>\n<pre><code>package XSLT;\n\nimport javax.xml.transform.*;\nimport javax.xml.transform.stream.StreamResult;\nimport javax.xml.transform.stream.StreamSource;\nimport java.io.File;\nimport java.io.IOException;\nimport java.net.URISyntaxException;\n\npublic class MainCompare {\n    public static void main(String[] args) throws IOException, URISyntaxException, TransformerException {\n        TransformerFactory factory = TransformerFactory.newInstance();\n        Source xslt = new StreamSource(new File(&quot;transform2.xslt&quot;));\n        Transformer transformer = factory.newTransformer(xslt);\n\n        Source text = new StreamSource(new File(&quot;file1.xml&quot;));\n        transformer.transform(text, new StreamResult(new File(&quot;file3.txt&quot;)));\n    }\n}\n</code></pre>\n<p>I would like to get differences between the two XML files.</p>\n<p>Result wanted</p>\n<blockquote>\n<pre><code>&quot;only in file1&quot;\n\n key=&quot;B&quot; value=&quot;B1&quot;\n key=&quot;Z&quot; value=&quot;Z1&quot;\n key=&quot;Y&quot;\n key=&quot;C&quot; value=&quot;C1&quot;\n\n&quot;only in file2&quot;\n\n  key=&quot;B&quot; value=&quot;O1&quot;\n  key=&quot;G&quot; value=&quot;Z1&quot;\n  key=&quot;Y2&quot;\n  key=&quot;C1&quot; value=&quot;C8&quot;\n</code></pre>\n</blockquote>\n"},{"tags":["java","android","android-softkeyboard"],"comments":[{"owner":{"account_id":1060138,"reputation":15246,"user_id":1061944,"accept_rate":41,"display_name":"Murtaza Khursheed Hussain"},"score":0,"creation_date":1424344550,"post_id":28604932,"comment_id":45514463,"body_markdown":"what is in `android:keyBackground=&quot;@drawable/key_background&quot;` ?","body":"what is in <code>android:keyBackground=&quot;@drawable&#47;key_background&quot;</code> ?"},{"owner":{"account_id":2636880,"reputation":1485,"user_id":2281306,"accept_rate":88,"display_name":"Arvin Jayanake"},"score":0,"creation_date":1424344669,"post_id":28604932,"comment_id":45514542,"body_markdown":"that is shape drawable xml","body":"that is shape drawable xml"}],"answers":[{"tags":[],"owner":{"account_id":3401362,"reputation":3329,"user_id":2853423,"accept_rate":43,"display_name":"Born To Win"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1499303132,"creation_date":1424345210,"answer_id":28605168,"question_id":28604932,"body_markdown":"Please look into this you will get an idea for your problem.\r\nhttp://developer.android.com/reference/android/inputmethodservice/KeyboardView.html\r\n\r\n    android:keyTextColor=&quot;your color code&quot;","title":"I&#39;m developing a keyboard for android. How to change the text color of the keys?","body":"<p>Please look into this you will get an idea for your problem.\n<a href=\"http://developer.android.com/reference/android/inputmethodservice/KeyboardView.html\" rel=\"nofollow noreferrer\">http://developer.android.com/reference/android/inputmethodservice/KeyboardView.html</a></p>\n\n<pre><code>android:keyTextColor=\"your color code\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3490195,"reputation":3633,"user_id":2920079,"display_name":"user543"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1424345249,"creation_date":1424345249,"answer_id":28605179,"question_id":28604932,"body_markdown":"U can use android:keyTextColor attribute: like\r\n\r\n    android:keyTextColor=&quot;@android:color/black&quot;","title":"I&#39;m developing a keyboard for android. How to change the text color of the keys?","body":"<p>U can use android:keyTextColor attribute: like</p>\n\n<pre><code>android:keyTextColor=\"@android:color/black\"\n</code></pre>\n"}],"owner":{"account_id":2636880,"reputation":1485,"user_id":2281306,"accept_rate":88,"display_name":"Arvin Jayanake"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3645,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":28605168,"answer_count":2,"score":1,"last_activity_date":1677863276,"creation_date":1424344500,"question_id":28604932,"body_markdown":"&lt;p&gt;How to change the text color of the keys?&lt;/p&gt;\r\n&lt;p&gt;Here is my keyboard layout.&lt;/p&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;android.inputmethodservice.KeyboardView \r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:id=&quot;@+id/keyboard&quot;\r\n        android:keyBackground=&quot;@drawable/key_background&quot;\r\n        android:background=&quot;@color/keyboard_background&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_alignParentBottom=&quot;true&quot;\r\n        android:keyPreviewLayout=&quot;@layout/preview&quot; /&gt;\r\n\r\n\r\n**key_background.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; &gt;\r\n    \r\n        &lt;!-- Bottom 2dp Shadow --&gt;\r\n        &lt;item android:top=&quot;4dp&quot;\r\n            android:left=&quot;2dp&quot;\r\n            android:right=&quot;2dp&quot;&gt; \r\n            &lt;shape android:shape=&quot;rectangle&quot; &gt;\r\n                &lt;solid android:color=&quot;@color/key_shadow&quot; /&gt;\r\n                &lt;corners android:radius=&quot;4dp&quot;/&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/item&gt;\r\n    \r\n        &lt;!-- White Top color --&gt;\r\n        &lt;item android:bottom=&quot;4px&quot; \r\n            android:top=&quot;4dp&quot;\r\n            android:left=&quot;2dp&quot;\r\n            android:right=&quot;2dp&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot; &gt;\r\n                &lt;solid android:color=&quot;@color/white&quot; /&gt;\r\n                &lt;corners android:radius=&quot;4dp&quot; /&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/item&gt;\r\n    \r\n    &lt;/layer-list&gt;","title":"I&#39;m developing a keyboard for android. How to change the text color of the keys?","body":"<p>How to change the text color of the keys?</p>\n\n<p>Here is my keyboard layout.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;android.inputmethodservice.KeyboardView \n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:id=\"@+id/keyboard\"\n    android:keyBackground=\"@drawable/key_background\"\n    android:background=\"@color/keyboard_background\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:layout_alignParentBottom=\"true\"\n    android:keyPreviewLayout=\"@layout/preview\" /&gt;\n</code></pre>\n\n<p><strong>key_background.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layer-list xmlns:android=\"http://schemas.android.com/apk/res/android\" &gt;\n\n    &lt;!-- Bottom 2dp Shadow --&gt;\n    &lt;item android:top=\"4dp\"\n        android:left=\"2dp\"\n        android:right=\"2dp\"&gt; \n        &lt;shape android:shape=\"rectangle\" &gt;\n            &lt;solid android:color=\"@color/key_shadow\" /&gt;\n            &lt;corners android:radius=\"4dp\"/&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n\n    &lt;!-- White Top color --&gt;\n    &lt;item android:bottom=\"4px\" \n        android:top=\"4dp\"\n        android:left=\"2dp\"\n        android:right=\"2dp\"&gt;\n        &lt;shape android:shape=\"rectangle\" &gt;\n            &lt;solid android:color=\"@color/white\" /&gt;\n            &lt;corners android:radius=\"4dp\" /&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n\n&lt;/layer-list&gt;\n</code></pre>\n"},{"tags":["java","hibernate","transactions","wildfly","jta"],"comments":[{"owner":{"account_id":274743,"reputation":1993,"user_id":567162,"accept_rate":70,"display_name":"D-Klotz"},"score":3,"creation_date":1505748417,"post_id":43282331,"comment_id":79528987,"body_markdown":"Did you ever get an answer to this? I am also looking at using release_mode after_transaction on wildfly but unsure.","body":"Did you ever get an answer to this? I am also looking at using release_mode after_transaction on wildfly but unsure."},{"owner":{"account_id":5431088,"reputation":1748,"user_id":4321944,"display_name":"Martin Rauscher"},"score":4,"creation_date":1506326614,"post_id":43282331,"comment_id":79757691,"body_markdown":"Nope, looks like nobody understands this stuff :(","body":"Nope, looks like nobody understands this stuff :("},{"owner":{"account_id":938389,"reputation":896,"user_id":966914,"accept_rate":33,"display_name":"John"},"score":5,"creation_date":1511194312,"post_id":43282331,"comment_id":81745785,"body_markdown":"Have a look here: https://vladmihalcea.com/2015/12/22/hibernate-aggressive-connection-release/","body":"Have a look here: <a href=\"https://vladmihalcea.com/2015/12/22/hibernate-aggressive-connection-release/\" rel=\"nofollow noreferrer\">vladmihalcea.com/2015/12/22/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":5976707,"reputation":107,"user_id":4697306,"display_name":"zaarour"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665485359,"creation_date":1665485359,"answer_id":74026878,"question_id":43282331,"body_markdown":"Problems with connection pool management can occur at several levels, database, hibernate, application server. In order to facilitate this management, it is strongly recommended to use C3p0 which is a Java library that provides a convenient way for managing database connections.\r\nSee document [C3Po link][1]\r\n\r\nYou can then configure in your hibernate.cfg.xml file the release mode of JTA transactions. It is best to leave it at the default value: &quot;auto&quot;, as shown below: \r\n\r\n    &lt;property name=&quot;hibernate.connection.release_mode&quot;&gt;auto&lt;/property&gt;&lt;!-- Release mode database connection- auto the default value --&gt;\r\n    &lt;property name=&quot;hibernate.c3p0.max_statements&quot;&gt;0&lt;/property&gt; &lt;!--  Number of prepared statements will be cached. 0 no caching --&gt;\r\n    &lt;property name=&quot;hibernate.c3p0.max_size&quot;&gt;1000&lt;/property&gt; &lt;!-- Max connection pool size --&gt;\r\n    &lt;property name=&quot;hibernate.c3p0.min_size&quot;&gt;50&lt;/property&gt; &lt;!-- Min connection pool size --&gt;\r\n    &lt;property name=&quot;hibernate.c3p0.timeout&quot;&gt;550&lt;/property&gt; &lt;!-- Time in seconds before free a connection. 0 no expiration --&gt; \r\n    &lt;property name=&quot;hibernate.c3p0.idleConnectionTestPeriod&quot;&gt;1800&lt;/property&gt; &lt;!--  idle time in seconds before testing if a connection is valid - Setting a fairly long idleConnectionTestPeriod, and not testing on checkout and check-in at all is an excellent, high-performance approach. --&gt;\r\n    &lt;property name=&quot;hibernate.c3p0.preferredTestQuery&quot;&gt;SELECT 1;&lt;/property&gt;\r\n\r\n\r\n  [1]: https://www.baeldung.com/hibernate-c3p0\r\n\r\n","title":"Why is hibernate.connection.release_mode after_transaction not recommended for JTA?","body":"<p>Problems with connection pool management can occur at several levels, database, hibernate, application server. In order to facilitate this management, it is strongly recommended to use C3p0 which is a Java library that provides a convenient way for managing database connections.\nSee document <a href=\"https://www.baeldung.com/hibernate-c3p0\" rel=\"nofollow noreferrer\">C3Po link</a></p>\n<p>You can then configure in your hibernate.cfg.xml file the release mode of JTA transactions. It is best to leave it at the default value: &quot;auto&quot;, as shown below:</p>\n<pre><code>&lt;property name=&quot;hibernate.connection.release_mode&quot;&gt;auto&lt;/property&gt;&lt;!-- Release mode database connection- auto the default value --&gt;\n&lt;property name=&quot;hibernate.c3p0.max_statements&quot;&gt;0&lt;/property&gt; &lt;!--  Number of prepared statements will be cached. 0 no caching --&gt;\n&lt;property name=&quot;hibernate.c3p0.max_size&quot;&gt;1000&lt;/property&gt; &lt;!-- Max connection pool size --&gt;\n&lt;property name=&quot;hibernate.c3p0.min_size&quot;&gt;50&lt;/property&gt; &lt;!-- Min connection pool size --&gt;\n&lt;property name=&quot;hibernate.c3p0.timeout&quot;&gt;550&lt;/property&gt; &lt;!-- Time in seconds before free a connection. 0 no expiration --&gt; \n&lt;property name=&quot;hibernate.c3p0.idleConnectionTestPeriod&quot;&gt;1800&lt;/property&gt; &lt;!--  idle time in seconds before testing if a connection is valid - Setting a fairly long idleConnectionTestPeriod, and not testing on checkout and check-in at all is an excellent, high-performance approach. --&gt;\n&lt;property name=&quot;hibernate.c3p0.preferredTestQuery&quot;&gt;SELECT 1;&lt;/property&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6509695,"reputation":6576,"user_id":5037430,"display_name":"u-ways"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1677863246,"creation_date":1677854540,"answer_id":75628478,"question_id":43282331,"body_markdown":"6 years later, but I hope this can help future readers.\r\n\r\n## Background \r\n\r\nFor a couple of years, we have encountered a production bug that kept exhausting the pooled connection in an Atomikos managed Hibernate (3.x.x) &amp; JTA integration.\r\n\r\nWith our Atomikos &quot;recovery strategy&quot; (i.e. force release all connections), this was fine until recent upscale with direct modern collaborators with multiple instances in K8S pushed the app&#39;s tipping point where we needed to address this issue.\r\n\r\nNavigating around, I found the following set:\r\n\r\n```java\r\nsetProperty(&quot;hibernate.connection.release_mode&quot;, &quot;after_transaction&quot;);\r\n```\r\n\r\nWhich after research it led me to this question (and other multiple unclear/unanswered questions regarding this mode) \r\n\r\nSo here are the findings:\r\n\r\n## Origin of Flag\r\n\r\nIn 2005, it seems that a Hibernate JTA integration was causing issues, as a result [HHH-1287](https://hibernate.atlassian.net/browse/HHH-1287) was raised:\r\n\r\n&gt; It looks like the ExtendedJTATransaction is simply not available after the CMT completes and the WebSphereExtendedJTATransactionLookup class attempts to look it up at java:comp/websphere/ExtendedJTATransaction as part of the normal &#39;after completion&#39; callback.\r\n&gt;\r\n&gt; The problem occurs when the afterCompletion callback event fires and the ConnectionManager.isAggressiveRelease() method is called from ConnectionManager.afterTransaction(). This attempts to check to see if a transaction is in progress. This test in fact causes the transaction manager to be created (together with a look up of the current transaction) The lookup of the ExtendedJTATransaction fails and the an exception is thrown (see stack trace below).\r\n&gt; \r\n&gt; Although there may be an inconsistency in the way that a SSB and MDB operate, It seems fair to say that the transaction may not be available if it has completed. A workaround is therefore requested.\r\n\r\nAs a result a change was committed to circumvent the JTA transaction check in this scenario in the connection manager: (This has then gone though further improvements)\r\n\r\n```java\r\nprivate boolean isAggressiveReleaseNoTransactionCheck() {\r\n    if (releaseMode == ConnectionReleaseMode.AFTER_STATEMENT) {\r\n        return true;\r\n    }\r\n    else {\r\n        boolean inAutoCommitState;\r\n        try {\r\n            inAutoCommitState = isAutoCommit();\r\n        }\r\n        catch( SQLException e ) {\r\n            inAutoCommitState=true; // assume we are in an auto-commit state\r\n        }\r\n        return releaseMode == ConnectionReleaseMode.AFTER_TRANSACTION &amp;&amp; inAutoCommitState;\r\n    }\r\n}\r\n```\r\n\r\n## Feature Release  \r\n\r\nAfter verifying this works, it was released in the wild with the following documentation for 3.x.x:\r\n\r\n**Table&#160;3.4.&#160;Hibernate JDBC and Connection Properties**\r\n\r\n| Property name | Purpose |\r\n| ------------- | ------- |\r\n| hibernate.connection.release_mode\t| Specify when Hibernate should release JDBC connections. By default, a JDBC connection is held until the session is explicitly closed or disconnected. For an application server JTA datasource, you should use&#160;`after_statement`&#160;to aggressively release connections after every JDBC call. For a non-JTA connection, it often makes sense to release the connection at the end of each transaction, by using&#160;`after_transaction`.&#160;`auto`&#160;will choose&#160;`after_statement`&#160;for the JTA and CMT transaction strategies and&#160;`after_transaction`&#160;for the JDBC transaction strategy. **eg.**&#160;`auto`&#160;(default) /&#160;`on_close`&#160;/&#160;`after_transaction`&#160;/ `after_statement`\r\n\r\n&gt; For an application server JTA datasource, you should use&#160;`after_statement`&#160;to aggressively release connections after every JDBC call.\r\n\r\n## Given conclusion \r\n\r\nTherefore, this was work around certain containers (not just EE containers) that implement &quot;resource containment&quot; checks. \r\n\r\nThe Hibernate Session defers  getting a JDBC Connection until it actually needs one, which can lead to  cases like the following where 2 beans share a Session/EM:\r\n\r\n- Bean1: get&#160;Session, but don&#39;t use it yet in way that needs Connection  \r\n- Bean1: call Bean2...  \r\n- Bean2: get Session, do some work forcing Session to obtain Connection  \r\n- Bean2: return (Session still hold Connection)  \r\n  \r\nAt this point, these containers see this as a &quot;leaked&quot; Connection because  the handle was not released by the end of the scope in which it was  obtained. Hence, aggressive releasing. \r\n\r\nYou can read more about this in detail here: [[hibernate-dev] - Connection release modes](http://lists.jboss.org/pipermail/hibernate-dev/2006-December/000903.html)\r\n\r\n### Useful References and Resources:\r\n-   [Hibernate - 11.5. Connection Release Modes](https://docs.jboss.org/hibernate/stable/core.old/reference/en/html/transactions-connection-release.html &quot;Follow link&quot;)\r\n-   [HHH-1287 - The issue that introduced the &quot;after_statement&quot; flag](https://hibernate.atlassian.net/browse/HHH-1287 &quot;Follow link&quot;)\r\n-   [&quot;after_transaction&quot; vs &quot;after_statement&quot; - Hibernate Aggressive Connection Release](https://vladmihalcea.com/hibernate-aggressive-connection-release/ &quot;Follow link&quot;)","title":"Why is hibernate.connection.release_mode after_transaction not recommended for JTA?","body":"<p>6 years later, but I hope this can help future readers.</p>\n<h2>Background</h2>\n<p>For a couple of years, we have encountered a production bug that kept exhausting the pooled connection in an Atomikos managed Hibernate (3.x.x) &amp; JTA integration.</p>\n<p>With our Atomikos &quot;recovery strategy&quot; (i.e. force release all connections), this was fine until recent upscale with direct modern collaborators with multiple instances in K8S pushed the app's tipping point where we needed to address this issue.</p>\n<p>Navigating around, I found the following set:</p>\n<pre class=\"lang-java prettyprint-override\"><code>setProperty(&quot;hibernate.connection.release_mode&quot;, &quot;after_transaction&quot;);\n</code></pre>\n<p>Which after research it led me to this question (and other multiple unclear/unanswered questions regarding this mode)</p>\n<p>So here are the findings:</p>\n<h2>Origin of Flag</h2>\n<p>In 2005, it seems that a Hibernate JTA integration was causing issues, as a result <a href=\"https://hibernate.atlassian.net/browse/HHH-1287\" rel=\"noreferrer\">HHH-1287</a> was raised:</p>\n<blockquote>\n<p>It looks like the ExtendedJTATransaction is simply not available after the CMT completes and the WebSphereExtendedJTATransactionLookup class attempts to look it up at java:comp/websphere/ExtendedJTATransaction as part of the normal 'after completion' callback.</p>\n<p>The problem occurs when the afterCompletion callback event fires and the ConnectionManager.isAggressiveRelease() method is called from ConnectionManager.afterTransaction(). This attempts to check to see if a transaction is in progress. This test in fact causes the transaction manager to be created (together with a look up of the current transaction) The lookup of the ExtendedJTATransaction fails and the an exception is thrown (see stack trace below).</p>\n<p>Although there may be an inconsistency in the way that a SSB and MDB operate, It seems fair to say that the transaction may not be available if it has completed. A workaround is therefore requested.</p>\n</blockquote>\n<p>As a result a change was committed to circumvent the JTA transaction check in this scenario in the connection manager: (This has then gone though further improvements)</p>\n<pre class=\"lang-java prettyprint-override\"><code>private boolean isAggressiveReleaseNoTransactionCheck() {\n    if (releaseMode == ConnectionReleaseMode.AFTER_STATEMENT) {\n        return true;\n    }\n    else {\n        boolean inAutoCommitState;\n        try {\n            inAutoCommitState = isAutoCommit();\n        }\n        catch( SQLException e ) {\n            inAutoCommitState=true; // assume we are in an auto-commit state\n        }\n        return releaseMode == ConnectionReleaseMode.AFTER_TRANSACTION &amp;&amp; inAutoCommitState;\n    }\n}\n</code></pre>\n<h2>Feature Release</h2>\n<p>After verifying this works, it was released in the wild with the following documentation for 3.x.x:</p>\n<p><strong>Table3.4.Hibernate JDBC and Connection Properties</strong></p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Property name</th>\n<th>Purpose</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>hibernate.connection.release_mode</td>\n<td>Specify when Hibernate should release JDBC connections. By default, a JDBC connection is held until the session is explicitly closed or disconnected. For an application server JTA datasource, you should use<code>after_statement</code>to aggressively release connections after every JDBC call. For a non-JTA connection, it often makes sense to release the connection at the end of each transaction, by using<code>after_transaction</code>.<code>auto</code>will choose<code>after_statement</code>for the JTA and CMT transaction strategies and<code>after_transaction</code>for the JDBC transaction strategy. <strong>eg.</strong><code>auto</code>(default) /<code>on_close</code>/<code>after_transaction</code>/ <code>after_statement</code></td>\n</tr>\n</tbody>\n</table>\n</div>\n<blockquote>\n<p>For an application server JTA datasource, you should use<code>after_statement</code>to aggressively release connections after every JDBC call.</p>\n</blockquote>\n<h2>Given conclusion</h2>\n<p>Therefore, this was work around certain containers (not just EE containers) that implement &quot;resource containment&quot; checks.</p>\n<p>The Hibernate Session defers  getting a JDBC Connection until it actually needs one, which can lead to  cases like the following where 2 beans share a Session/EM:</p>\n<ul>\n<li>Bean1: getSession, but don't use it yet in way that needs Connection</li>\n<li>Bean1: call Bean2...</li>\n<li>Bean2: get Session, do some work forcing Session to obtain Connection</li>\n<li>Bean2: return (Session still hold Connection)</li>\n</ul>\n<p>At this point, these containers see this as a &quot;leaked&quot; Connection because  the handle was not released by the end of the scope in which it was  obtained. Hence, aggressive releasing.</p>\n<p>You can read more about this in detail here: <a href=\"http://lists.jboss.org/pipermail/hibernate-dev/2006-December/000903.html\" rel=\"noreferrer\">[hibernate-dev] - Connection release modes</a></p>\n<h3>Useful References and Resources:</h3>\n<ul>\n<li><a href=\"https://docs.jboss.org/hibernate/stable/core.old/reference/en/html/transactions-connection-release.html\" rel=\"noreferrer\" title=\"Follow link\">Hibernate - 11.5. Connection Release Modes</a></li>\n<li><a href=\"https://hibernate.atlassian.net/browse/HHH-1287\" rel=\"noreferrer\" title=\"Follow link\">HHH-1287 - The issue that introduced the &quot;after_statement&quot; flag</a></li>\n<li><a href=\"https://vladmihalcea.com/hibernate-aggressive-connection-release/\" rel=\"noreferrer\" title=\"Follow link\">&quot;after_transaction&quot; vs &quot;after_statement&quot; - Hibernate Aggressive Connection Release</a></li>\n</ul>\n"}],"owner":{"account_id":5431088,"reputation":1748,"user_id":4321944,"display_name":"Martin Rauscher"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8335,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":2,"score":13,"last_activity_date":1677863246,"creation_date":1491580222,"question_id":43282331,"body_markdown":"While analyzing some performance problems in Wildfly 10.1 in high pressure scenarios I came to the conclusion, that sometimes parallel HTTP threads block each other. \r\n\r\nThe reason seemed to be that in some HTTP requests we execute two JPQL Queries (actually a delete and a select) and sometimes the second of the two simply didn&#39;t get a JDBC connection from the pool. (We use IBM DB2, if that is important...) That seemed rather ridiculous as the first statement already got a connection.\r\n\r\nAfter reading the Hibernate docs, I see that the default for `hibernate.connection.release_mode` is `after_statement` and that `after_transaction` is not recommended for JTA apps...\r\n\r\nSo... I have a few questions now:\r\n\r\n* Why does `after_statement` ever make sense? (unless you have auto_comit on of course...)\r\n* Why shouldn&#39;t I use `after_transaction` in JTA apps?\r\n* Is my assumption correct that `after_transaction` should fix the described issue?\r\n\r\nAny help is appreciated!","title":"Why is hibernate.connection.release_mode after_transaction not recommended for JTA?","body":"<p>While analyzing some performance problems in Wildfly 10.1 in high pressure scenarios I came to the conclusion, that sometimes parallel HTTP threads block each other. </p>\n\n<p>The reason seemed to be that in some HTTP requests we execute two JPQL Queries (actually a delete and a select) and sometimes the second of the two simply didn't get a JDBC connection from the pool. (We use IBM DB2, if that is important...) That seemed rather ridiculous as the first statement already got a connection.</p>\n\n<p>After reading the Hibernate docs, I see that the default for <code>hibernate.connection.release_mode</code> is <code>after_statement</code> and that <code>after_transaction</code> is not recommended for JTA apps...</p>\n\n<p>So... I have a few questions now:</p>\n\n<ul>\n<li>Why does <code>after_statement</code> ever make sense? (unless you have auto_comit on of course...)</li>\n<li>Why shouldn't I use <code>after_transaction</code> in JTA apps?</li>\n<li>Is my assumption correct that <code>after_transaction</code> should fix the described issue?</li>\n</ul>\n\n<p>Any help is appreciated!</p>\n"},{"tags":["java","android","apk"],"comments":[{"owner":{"account_id":1326012,"reputation":14772,"user_id":1270789,"accept_rate":81,"display_name":"Ken Y-N"},"score":0,"creation_date":1677805849,"post_id":75622234,"comment_id":133415020,"body_markdown":"Please [edit] your post and add the exact text of the error message, and also a compilable version of the code. (And please also fix the formatting)","body":"Please <a href=\"https://stackoverflow.com/posts/75622234/edit\">edit</a> your post and add the exact text of the error message, and also a compilable version of the code. (And please also fix the formatting)"},{"owner":{"account_id":21584472,"reputation":690,"user_id":15915172,"display_name":"Rakesh Saini"},"score":0,"creation_date":1677817707,"post_id":75622234,"comment_id":133416246,"body_markdown":"Have you added &lt;intent-filter&gt;&lt;intent-filter&gt; in the manifest file?","body":"Have you added &lt;intent-filter&gt;&lt;intent-filter&gt; in the manifest file?"},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1677832422,"post_id":75622234,"comment_id":133418740,"body_markdown":"On command-line execute `./gradlew assemble` (Linux/Mac) or `gradlew asemble` (Windows) and you will get output including error messages`.","body":"On command-line execute <code>.&#47;gradlew assemble</code> (Linux/Mac) or <code>gradlew asemble</code> (Windows) and you will get output including error messages`."}],"owner":{"account_id":26530206,"reputation":11,"user_id":20162526,"display_name":"dankatapich"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677863217,"creation_date":1677804500,"question_id":75622234,"body_markdown":"Hi so recently I had some issues with really stupid and simple code for a testing out an android app the code is below if somebody can tell me where I make a mistake? \r\n\r\nThat is what&#39;s in the manifest file:\r\n\r\n```xml\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    package=&quot;example.myapp&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.GET_TASKS&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.KILL_BACKGROUND_PROCESSES&quot; /&gt;\r\n\r\n    &lt;!-- other manifest declarations here --&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\n\r\n```java\r\nimport android.app.*;\r\nimport android.content.*;\r\nimport android.net.*;\r\nimport android.os.*;\r\nimport java.io.*;\r\nimport java.net.*;\r\nimport java.util.*;\r\n\r\npublic class BootReceiver extends BroadcastReceiver {\r\n    @Override\r\n    public void onReceive(Context context, Intent intent) {\r\n        Intent serviceIntent = new Intent(context, InternetCheckService.class);\r\n        context.startService(serviceIntent);\r\n    }\r\n}\r\n\r\npublic class InternetCheckService extends Service {\r\n    private static final String WEBHOOK_URL = &quot;https://discord.com/api/webhooks/1234567890/abcdefghijklmnopqrstuvwxyz&quot;;\r\n\r\n    @Override\r\n    public int onStartCommand(Intent intent, int flags, int startId) {\r\n        ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\r\n        NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\r\n        if (networkInfo != null &amp;&amp; networkInfo.isConnected()) {\r\n            try {\r\n                String publicIpAddress = getPublicIpAddress();\r\n                String serialNumber = Build.getSerial();\r\n                boolean isRooted = isDeviceRooted();\r\n                float cpuUsage = getCpuUsage();\r\n                float ramUsage = getRamUsage();\r\n                String message = String.format(&quot;Device %s is online with IP address %s\\n\\nSystem Information:\\nRooted: %s\\nCPU Usage: %s%%\\nRAM Usage: %s%%&quot;, serialNumber, publicIpAddress, isRooted ? &quot;Yes&quot; : &quot;No&quot;, cpuUsage, ramUsage);\r\n                sendWebhookMessage(WEBHOOK_URL, message);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        } else {\r\n            Intent intent = new Intent(this, MainActivity.class);\r\n            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n            startActivity(intent);\r\n        }\r\n        return START_NOT_STICKY;\r\n    }\r\n\r\n    @Override\r\n    public IBinder onBind(Intent intent) {\r\n        return null;\r\n    }\r\n\r\n    private String getPublicIpAddress() throws IOException {\r\n        URL url = new URL(&quot;https://api.ipify.org&quot;);\r\n        HttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\n        connection.setRequestMethod(&quot;GET&quot;);\r\n        BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getInputStream()));\r\n        String line = reader.readLine();\r\n        reader.close();\r\n        return line;\r\n    }\r\n\r\n    private boolean isDeviceRooted() {\r\n        return checkRootMethod1() || checkRootMethod2() || checkRootMethod3();\r\n    }\r\n\r\n    private boolean checkRootMethod1() {\r\n        String buildTags = android.os.Build.TAGS;\r\n        return buildTags != null &amp;&amp; buildTags.contains(&quot;test-keys&quot;);\r\n    }\r\n\r\n    private boolean checkRootMethod2() {\r\n        String[] paths = {&quot;/system/app/Superuser.apk&quot;, &quot;/sbin/su&quot;, &quot;/system/bin/su&quot;, &quot;/system/xbin/su&quot;, &quot;/data/local/xbin/su&quot;, &quot;/data/local/bin/su&quot;, &quot;/system/sd/xbin/su&quot;, &quot;/system/bin/failsafe/su&quot;, &quot;/data/local/su&quot;};\r\n        for (String path : paths) {\r\n            if (new File(path).exists()) return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private boolean checkRootMethod3() {\r\n        Process process = null;\r\n        try {\r\n            process = Runtime.getRuntime().exec(new String[]{&quot;su&quot;, &quot;-c&quot;, &quot;id&quot;});\r\n            BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));\r\n            String output = reader.readLine();\r\n            reader.close();\r\n            return output != null &amp;&amp; output.contains(&quot;uid=0&quot;);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            if (process != null) {\r\n                process.destroy();\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private float getCpuUsage() {\r\n        try {\r\n            RandomAccessFile reader = new RandomAccessFile\r\n```\r\n\r\nI can&#39;t figure it out.\r\n\r\nI tried to compile it several times with other variants of the same code and nothing.","title":"Android app will not compile and dosent give any specific error","body":"<p>Hi so recently I had some issues with really stupid and simple code for a testing out an android app the code is below if somebody can tell me where I make a mistake?</p>\n<p>That is what's in the manifest file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    package=&quot;example.myapp&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.GET_TASKS&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.KILL_BACKGROUND_PROCESSES&quot; /&gt;\n\n    &lt;!-- other manifest declarations here --&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import android.app.*;\nimport android.content.*;\nimport android.net.*;\nimport android.os.*;\nimport java.io.*;\nimport java.net.*;\nimport java.util.*;\n\npublic class BootReceiver extends BroadcastReceiver {\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        Intent serviceIntent = new Intent(context, InternetCheckService.class);\n        context.startService(serviceIntent);\n    }\n}\n\npublic class InternetCheckService extends Service {\n    private static final String WEBHOOK_URL = &quot;https://discord.com/api/webhooks/1234567890/abcdefghijklmnopqrstuvwxyz&quot;;\n\n    @Override\n    public int onStartCommand(Intent intent, int flags, int startId) {\n        ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\n        NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\n        if (networkInfo != null &amp;&amp; networkInfo.isConnected()) {\n            try {\n                String publicIpAddress = getPublicIpAddress();\n                String serialNumber = Build.getSerial();\n                boolean isRooted = isDeviceRooted();\n                float cpuUsage = getCpuUsage();\n                float ramUsage = getRamUsage();\n                String message = String.format(&quot;Device %s is online with IP address %s\\n\\nSystem Information:\\nRooted: %s\\nCPU Usage: %s%%\\nRAM Usage: %s%%&quot;, serialNumber, publicIpAddress, isRooted ? &quot;Yes&quot; : &quot;No&quot;, cpuUsage, ramUsage);\n                sendWebhookMessage(WEBHOOK_URL, message);\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        } else {\n            Intent intent = new Intent(this, MainActivity.class);\n            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n            startActivity(intent);\n        }\n        return START_NOT_STICKY;\n    }\n\n    @Override\n    public IBinder onBind(Intent intent) {\n        return null;\n    }\n\n    private String getPublicIpAddress() throws IOException {\n        URL url = new URL(&quot;https://api.ipify.org&quot;);\n        HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n        connection.setRequestMethod(&quot;GET&quot;);\n        BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getInputStream()));\n        String line = reader.readLine();\n        reader.close();\n        return line;\n    }\n\n    private boolean isDeviceRooted() {\n        return checkRootMethod1() || checkRootMethod2() || checkRootMethod3();\n    }\n\n    private boolean checkRootMethod1() {\n        String buildTags = android.os.Build.TAGS;\n        return buildTags != null &amp;&amp; buildTags.contains(&quot;test-keys&quot;);\n    }\n\n    private boolean checkRootMethod2() {\n        String[] paths = {&quot;/system/app/Superuser.apk&quot;, &quot;/sbin/su&quot;, &quot;/system/bin/su&quot;, &quot;/system/xbin/su&quot;, &quot;/data/local/xbin/su&quot;, &quot;/data/local/bin/su&quot;, &quot;/system/sd/xbin/su&quot;, &quot;/system/bin/failsafe/su&quot;, &quot;/data/local/su&quot;};\n        for (String path : paths) {\n            if (new File(path).exists()) return true;\n        }\n        return false;\n    }\n\n    private boolean checkRootMethod3() {\n        Process process = null;\n        try {\n            process = Runtime.getRuntime().exec(new String[]{&quot;su&quot;, &quot;-c&quot;, &quot;id&quot;});\n            BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));\n            String output = reader.readLine();\n            reader.close();\n            return output != null &amp;&amp; output.contains(&quot;uid=0&quot;);\n        } catch (IOException e) {\n            e.printStackTrace();\n        } finally {\n            if (process != null) {\n                process.destroy();\n            }\n        }\n        return false;\n    }\n\n    private float getCpuUsage() {\n        try {\n            RandomAccessFile reader = new RandomAccessFile\n</code></pre>\n<p>I can't figure it out.</p>\n<p>I tried to compile it several times with other variants of the same code and nothing.</p>\n"},{"tags":["java","intellij-idea","intellij-14"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1677771274,"post_id":75617327,"comment_id":133407012,"body_markdown":"On a side note, if you&#39;re doing excessive horizontal scrolling, that&#39;s usually a sign of either a lack of abstraction or poorly-formatted code. 80 or 120 characters should be an ideal limit for the size of your lines in most projects I&#39;ve worked on.","body":"On a side note, if you&#39;re doing excessive horizontal scrolling, that&#39;s usually a sign of either a lack of abstraction or poorly-formatted code. 80 or 120 characters should be an ideal limit for the size of your lines in most projects I&#39;ve worked on."},{"owner":{"account_id":13438592,"reputation":327,"user_id":14891347,"display_name":"nightwolf555"},"score":0,"creation_date":1677774218,"post_id":75617327,"comment_id":133407990,"body_markdown":"Even something like 90-100 characters will cause excessive scrolling on any normal sized screen with all the spacing and extra details and line numbers shown by intellj","body":"Even something like 90-100 characters will cause excessive scrolling on any normal sized screen with all the spacing and extra details and line numbers shown by intellj"}],"answers":[{"tags":[],"owner":{"account_id":17081761,"reputation":2089,"user_id":12360005,"display_name":"Ruslan Kuleshov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677862849,"creation_date":1677862849,"answer_id":75629917,"question_id":75617327,"body_markdown":"There are some requests to redesign merge dialog window, please feel free to vote:\r\n\r\n\r\nhttps://youtrack.jetbrains.com/issue/IDEA-66552/Merge-dialog-should-not-be-modal-as-well-as-side-diffs-invoked-from-it\r\n\r\nhttps://youtrack.jetbrains.com/issue/IDEA-66552/Merge-dialog-should-not-be-modal-as-well-as-side-diffs-invoked-from-it","title":"Change Layout for IntellJ Git Merge/ Resolve conflicts to 1 page vertical view","body":"<p>There are some requests to redesign merge dialog window, please feel free to vote:</p>\n<p><a href=\"https://youtrack.jetbrains.com/issue/IDEA-66552/Merge-dialog-should-not-be-modal-as-well-as-side-diffs-invoked-from-it\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/IDEA-66552/Merge-dialog-should-not-be-modal-as-well-as-side-diffs-invoked-from-it</a></p>\n<p><a href=\"https://youtrack.jetbrains.com/issue/IDEA-66552/Merge-dialog-should-not-be-modal-as-well-as-side-diffs-invoked-from-it\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/IDEA-66552/Merge-dialog-should-not-be-modal-as-well-as-side-diffs-invoked-from-it</a></p>\n"}],"owner":{"account_id":13438592,"reputation":327,"user_id":14891347,"display_name":"nightwolf555"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677862849,"creation_date":1677769658,"question_id":75617327,"body_markdown":"When I merge java code in intellj it seperate things into 3 tab vertical window with a tab for local changes, result and develop. This uses up a huge amount of screen real estate and is impossible to see all the code at once. It would be much preferable to have a 1 screen vertical layout, with the options then choose which change to select, by clicking accept to code stacked on top of eachother. \r\n\r\nThis is much more readable and usable by user and doesnt require constant horizontal scrolling and window size adjusting, when I&#39;m writing angular code in vscode it gives me a layout like this. is there a way to achieve a similar layout and functionality in intellj?","title":"Change Layout for IntellJ Git Merge/ Resolve conflicts to 1 page vertical view","body":"<p>When I merge java code in intellj it seperate things into 3 tab vertical window with a tab for local changes, result and develop. This uses up a huge amount of screen real estate and is impossible to see all the code at once. It would be much preferable to have a 1 screen vertical layout, with the options then choose which change to select, by clicking accept to code stacked on top of eachother.</p>\n<p>This is much more readable and usable by user and doesnt require constant horizontal scrolling and window size adjusting, when I'm writing angular code in vscode it gives me a layout like this. is there a way to achieve a similar layout and functionality in intellj?</p>\n"},{"tags":["java","spark-java"],"comments":[{"owner":{"account_id":3544299,"reputation":1351,"user_id":2960660,"accept_rate":100,"display_name":"Laercio Metzner"},"score":0,"creation_date":1483523021,"post_id":41452156,"comment_id":70126810,"body_markdown":"Prrobably those instances are using the same port number. When you start a spark instance it has to run on its own port","body":"Prrobably those instances are using the same port number. When you start a spark instance it has to run on its own port"},{"owner":{"account_id":226469,"reputation":12047,"user_id":487534,"accept_rate":90,"display_name":"jabal"},"score":1,"creation_date":1483566774,"post_id":41452156,"comment_id":70153527,"body_markdown":"No, it happens when you try to initialize a second one regardless of the port being the same or not. The first initialization sets a flag to true and from that point on most of the configuration methods get locked down.","body":"No, it happens when you try to initialize a second one regardless of the port being the same or not. The first initialization sets a flag to true and from that point on most of the configuration methods get locked down."},{"owner":{"account_id":59864,"reputation":11232,"user_id":179014,"accept_rate":60,"display_name":"asmaier"},"score":0,"creation_date":1514368422,"post_id":41452156,"comment_id":82948210,"body_markdown":"I had the same issue when running integration tests with sparkjava. As a workaround make sure to set forkCount=1/reuseForks=false for maven failsafe plugin to execute each test class in its own JVM process (see http://maven.apache.org/surefire/maven-surefire-plugin/examples/fork-options-and-parallel-execution.html)","body":"I had the same issue when running integration tests with sparkjava. As a workaround make sure to set forkCount=1/reuseForks=false for maven failsafe plugin to execute each test class in its own JVM process (see <a href=\"http://maven.apache.org/surefire/maven-surefire-plugin/examples/fork-options-and-parallel-execution.html\" rel=\"nofollow noreferrer\">maven.apache.org/surefire/maven-surefire-plugin/examples/&hellip;</a>)"}],"answers":[{"tags":[],"owner":{"account_id":226469,"reputation":12047,"user_id":487534,"accept_rate":90,"display_name":"jabal"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1484774883,"creation_date":1484774883,"answer_id":41729764,"question_id":41452156,"body_markdown":"The trick is to ignore the external static shell around Spark implemented in `spark.Spark` and directly work with the internal `spark.webserver.SparkServer`. There are some obstackles in the code that require workaround, e.g. `spark.webserver.JettyHandler` is not public, so you can&#39;t instantiate it from your code, but you can extend that with your own class placed into that package and turn it public.\r\n\r\nSo the solution is along these lines:\r\n\r\n    SimpleRouteMatcher routeMatcher1 = new SimpleRouteMatcher();\r\n    routeMatcher1.parseValidateAddRoute(&quot;get &#39;/foo&#39;&quot;, &quot;*/*&quot;, wrap(&quot;/foo&quot;, &quot;*/*&quot;, (req, res) -&gt; &quot;Hello World 1&quot;));\r\n    \t\t\r\n    MatcherFilter matcherFilter1 = new MatcherFilter(routeMatcher1, false, false);\r\n    matcherFilter1.init(null);\r\n    PublicJettyHandler handler1 = new PublicJettyHandler(matcherFilter1);\r\n    SparkServer server1 = new SparkServer(handler1);\r\n    \t\t\r\n    new Thread(() -&gt; {\r\n    \t\t\tserver1.ignite(&quot;0.0.0.0&quot;, 4567, null, null, null, null, &quot;/META-INF/resources/&quot;, null, new CountDownLatch(1),\r\n    \t\t\t\t\t-1, -1, -1);\r\n    \t\t}).start();\r\n\r\nAnd need to duplicate the wrap method in your codebase:\r\n\r\n    protected RouteImpl wrap(final String path, String acceptType, final Route route) {\r\n            if (acceptType == null) {\r\n                acceptType = &quot;*/*&quot;;\r\n            }\r\n            RouteImpl impl = new RouteImpl(path, acceptType) {\r\n                @Override\r\n                public Object handle(Request request, Response response) throws Exception {\r\n                    return route.handle(request, response);\r\n                }\r\n            };\r\n            return impl;\r\n        }\r\n\r\nThis seems to be a viable workaround if you need multiple Spark servers in your app.","title":"Multiple Spark servers in a single JVM","body":"<p>The trick is to ignore the external static shell around Spark implemented in <code>spark.Spark</code> and directly work with the internal <code>spark.webserver.SparkServer</code>. There are some obstackles in the code that require workaround, e.g. <code>spark.webserver.JettyHandler</code> is not public, so you can't instantiate it from your code, but you can extend that with your own class placed into that package and turn it public.</p>\n\n<p>So the solution is along these lines:</p>\n\n<pre><code>SimpleRouteMatcher routeMatcher1 = new SimpleRouteMatcher();\nrouteMatcher1.parseValidateAddRoute(\"get '/foo'\", \"*/*\", wrap(\"/foo\", \"*/*\", (req, res) -&gt; \"Hello World 1\"));\n\nMatcherFilter matcherFilter1 = new MatcherFilter(routeMatcher1, false, false);\nmatcherFilter1.init(null);\nPublicJettyHandler handler1 = new PublicJettyHandler(matcherFilter1);\nSparkServer server1 = new SparkServer(handler1);\n\nnew Thread(() -&gt; {\n            server1.ignite(\"0.0.0.0\", 4567, null, null, null, null, \"/META-INF/resources/\", null, new CountDownLatch(1),\n                    -1, -1, -1);\n        }).start();\n</code></pre>\n\n<p>And need to duplicate the wrap method in your codebase:</p>\n\n<pre><code>protected RouteImpl wrap(final String path, String acceptType, final Route route) {\n        if (acceptType == null) {\n            acceptType = \"*/*\";\n        }\n        RouteImpl impl = new RouteImpl(path, acceptType) {\n            @Override\n            public Object handle(Request request, Response response) throws Exception {\n                return route.handle(request, response);\n            }\n        };\n        return impl;\n    }\n</code></pre>\n\n<p>This seems to be a viable workaround if you need multiple Spark servers in your app.</p>\n"},{"comments":[{"owner":{"account_id":2558447,"reputation":1391,"user_id":2219971,"accept_rate":67,"display_name":"casper"},"score":0,"creation_date":1522144077,"post_id":43176400,"comment_id":86023186,"body_markdown":"is there a way to make them all run on one port?","body":"is there a way to make them all run on one port?"},{"owner":{"account_id":2558447,"reputation":1391,"user_id":2219971,"accept_rate":67,"display_name":"casper"},"score":0,"creation_date":1522148541,"post_id":43176400,"comment_id":86026451,"body_markdown":"One solution I see is to reuse Service instance","body":"One solution I see is to reuse Service instance"}],"tags":[],"owner":{"account_id":67096,"reputation":24787,"user_id":196507,"accept_rate":90,"display_name":"lepe"},"comment_count":2,"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1491192915,"creation_date":1491192915,"answer_id":43176400,"question_id":41452156,"body_markdown":"From Spark 2.5 you can use `ignite()`:\r\n\r\nhttp://sparkjava.com/news.html#spark25released\r\n\r\nExample:\r\n\r\n    public static void main(String[] args) {\r\n        igniteFirstSpark();\r\n        igniteSecondSpark();\r\n    }\r\n    \r\n    static void igniteSecondSpark() {\r\n        Service http = ignite();\r\n    \r\n        http.get(&quot;/basicHello&quot;, (q, a) -&gt; &quot;Hello from port 4567!&quot;);\r\n    }\r\n    \r\n    static void igniteFirstSpark() {\r\n        Service http = ignite()\r\n                          .port(8080)\r\n                          .threadPool(20);\r\n    \r\n        http.get(&quot;/configuredHello&quot;, (q, a) -&gt; &quot;Hello from port 8080!&quot;);\r\n    }\r\n\r\nI personally initialize them something like this:\r\n\r\n    import spark.Service\r\n    \r\n    public static void main(String[] args) {\r\n        Service service1 = Service.ignite().port(8080).threadPool(20)\r\n        Service service2 = Service.ignite().port(8081).threadPool(10)\r\n    }\r\n\r\nI recommend to read about [how to use those services outside your main method](https://stackoverflow.com/questions/34976459/sparkjava-do-routes-have-to-be-in-main-method), which I think would be a great use here.\r\n\r\n","title":"Multiple Spark servers in a single JVM","body":"<p>From Spark 2.5 you can use <code>ignite()</code>:</p>\n\n<p><a href=\"http://sparkjava.com/news.html#spark25released\" rel=\"noreferrer\">http://sparkjava.com/news.html#spark25released</a></p>\n\n<p>Example:</p>\n\n<pre><code>public static void main(String[] args) {\n    igniteFirstSpark();\n    igniteSecondSpark();\n}\n\nstatic void igniteSecondSpark() {\n    Service http = ignite();\n\n    http.get(\"/basicHello\", (q, a) -&gt; \"Hello from port 4567!\");\n}\n\nstatic void igniteFirstSpark() {\n    Service http = ignite()\n                      .port(8080)\n                      .threadPool(20);\n\n    http.get(\"/configuredHello\", (q, a) -&gt; \"Hello from port 8080!\");\n}\n</code></pre>\n\n<p>I personally initialize them something like this:</p>\n\n<pre><code>import spark.Service\n\npublic static void main(String[] args) {\n    Service service1 = Service.ignite().port(8080).threadPool(20)\n    Service service2 = Service.ignite().port(8081).threadPool(10)\n}\n</code></pre>\n\n<p>I recommend to read about <a href=\"https://stackoverflow.com/questions/34976459/sparkjava-do-routes-have-to-be-in-main-method\">how to use those services outside your main method</a>, which I think would be a great use here.</p>\n"},{"comments":[{"owner":{"account_id":1318950,"reputation":1139,"user_id":1265200,"accept_rate":86,"display_name":"Dazed"},"score":0,"creation_date":1572809054,"post_id":50838983,"comment_id":103666926,"body_markdown":"I couldn&#39;t get your suggestion to work as is - I got &quot;Execution default-test of goal org.apache.maven.plugins:maven-surefire-plugin:2.22.0:test failed: java.lang.ClassNotFoundException&quot;.  But with the &quot;dependencies&quot; section removed it works. Thanks","body":"I couldn&#39;t get your suggestion to work as is - I got &quot;Execution default-test of goal org.apache.maven.plugins:maven-surefire-plugin:2.22.0:test failed: java.lang.ClassNotFoundException&quot;.  But with the &quot;dependencies&quot; section removed it works. Thanks"}],"tags":[],"owner":{"account_id":13294590,"reputation":11,"user_id":9598040,"display_name":"Agu-GC"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1528907385,"creation_date":1528897936,"answer_id":50838983,"question_id":41452156,"body_markdown":"I have this problem running unit tests with Spark, to fix it I modify the `pom.xml` file.\r\n\r\n`forkCount=1\r\nreuseForks=false`\r\n\r\n\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${surefire.version}&lt;/version&gt;\r\n                &lt;dependencies&gt;\r\n                    &lt;dependency&gt;\r\n                        &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;junit-platform-surefire-provider&lt;/artifactId&gt;\r\n                        &lt;version&gt;${junit.platform.version}&lt;/version&gt;\r\n                    &lt;/dependency&gt;\r\n                &lt;/dependencies&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;forkCount&gt;1&lt;/forkCount&gt;\r\n                    &lt;reuseForks&gt;false&lt;/reuseForks&gt;","title":"Multiple Spark servers in a single JVM","body":"<p>I have this problem running unit tests with Spark, to fix it I modify the <code>pom.xml</code> file.</p>\n\n<p><code>forkCount=1\nreuseForks=false</code></p>\n\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${surefire.version}&lt;/version&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit-platform-surefire-provider&lt;/artifactId&gt;\n                    &lt;version&gt;${junit.platform.version}&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n            &lt;configuration&gt;\n                &lt;forkCount&gt;1&lt;/forkCount&gt;\n                &lt;reuseForks&gt;false&lt;/reuseForks&gt;\n</code></pre>\n"}],"owner":{"account_id":226469,"reputation":12047,"user_id":487534,"accept_rate":90,"display_name":"jabal"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5110,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":43176400,"answer_count":3,"score":10,"last_activity_date":1677862356,"creation_date":1483476747,"question_id":41452156,"body_markdown":"Is there any way to run multiple instances of Sparkjava server in the same JVM? I am using it in a &quot;plugin&quot; software and based on external circumstances multiple instances of my plugin might be started up which then cause\r\n\r\n    java.lang.IllegalStateException: This must be done before route mapping has begun\r\n    at spark.SparkBase.throwBeforeRouteMappingException(SparkBase.java:256)\r\n    at spark.SparkBase.port(SparkBase.java:101)\r\n    at com.foo.bar.a(SourceFile:59)\r\n\r\nIt seems to me by looking at the code that it is heavily built around static fields in the code, so I am thinking about a classloader trick or working with `SparkServerFactory` somehow eliminating `SparkBase`.","title":"Multiple Spark servers in a single JVM","body":"<p>Is there any way to run multiple instances of Sparkjava server in the same JVM? I am using it in a \"plugin\" software and based on external circumstances multiple instances of my plugin might be started up which then cause</p>\n\n<pre><code>java.lang.IllegalStateException: This must be done before route mapping has begun\nat spark.SparkBase.throwBeforeRouteMappingException(SparkBase.java:256)\nat spark.SparkBase.port(SparkBase.java:101)\nat com.foo.bar.a(SourceFile:59)\n</code></pre>\n\n<p>It seems to me by looking at the code that it is heavily built around static fields in the code, so I am thinking about a classloader trick or working with <code>SparkServerFactory</code> somehow eliminating <code>SparkBase</code>.</p>\n"},{"tags":["java","intellij-idea","dead-code"],"comments":[{"owner":{"account_id":1301815,"reputation":31771,"user_id":1251549,"accept_rate":29,"display_name":"Cherry"},"score":0,"creation_date":1395283132,"post_id":22522013,"comment_id":34271277,"body_markdown":"Just run inspection click right button and see this in the menu list.","body":"Just run inspection click right button and see this in the menu list."},{"owner":{"account_id":2339925,"reputation":15581,"user_id":2051454,"accept_rate":60,"display_name":"Software Engineer"},"score":0,"creation_date":1395330433,"post_id":22522013,"comment_id":34299029,"body_markdown":"That&#39;s two questions -- they would be better as separate questions. Also serialVersionXXX is a bad idea for most projects.","body":"That&#39;s two questions -- they would be better as separate questions. Also serialVersionXXX is a bad idea for most projects."},{"owner":{"account_id":2339925,"reputation":15581,"user_id":2051454,"accept_rate":60,"display_name":"Software Engineer"},"score":2,"creation_date":1395596373,"post_id":22522013,"comment_id":34399219,"body_markdown":"It&#39;s a bad idea because very few developers know what it&#39;s for, and it is almost always misused. It is extremely rare in java to use the serialization mechanism to read and write objects at the byte level, and if you do the default serial version is usually sufficient to provide safety. A hard coded serialVersion must be updated manually every time the interface of a class changes, and every time the field list changes -- invariably, developers do not do this because they simply don&#39;t understand what the serialVersion is for. The main reason you see it in code is because of eclipse.","body":"It&#39;s a bad idea because very few developers know what it&#39;s for, and it is almost always misused. It is extremely rare in java to use the serialization mechanism to read and write objects at the byte level, and if you do the default serial version is usually sufficient to provide safety. A hard coded serialVersion must be updated manually every time the interface of a class changes, and every time the field list changes -- invariably, developers do not do this because they simply don&#39;t understand what the serialVersion is for. The main reason you see it in code is because of eclipse."}],"answers":[{"comments":[{"owner":{"account_id":1301815,"reputation":31771,"user_id":1251549,"accept_rate":29,"display_name":"Cherry"},"score":0,"creation_date":1395308089,"post_id":22527505,"comment_id":34281962,"body_markdown":"Ha! Seems not :-) I turned off everythings in &quot;unused declaration&quot; group and leave only &quot;Unused symbol&quot; with &quot;check classes&quot; only. But results do not change. :-(","body":"Ha! Seems not :-) I turned off everythings in &quot;unused declaration&quot; group and leave only &quot;Unused symbol&quot; with &quot;check classes&quot; only. But results do not change. :-("},{"owner":{"account_id":282742,"reputation":21634,"user_id":579828,"accept_rate":83,"display_name":"Vic"},"score":0,"creation_date":1395312329,"post_id":22527505,"comment_id":34284980,"body_markdown":"@Cherry, sorry to hear... Maybe you should file a defect to jetbrains","body":"@Cherry, sorry to hear... Maybe you should file a defect to jetbrains"}],"tags":[],"owner":{"account_id":282742,"reputation":21634,"user_id":579828,"accept_rate":83,"display_name":"Vic"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1395304762,"creation_date":1395304762,"answer_id":22527505,"question_id":22522013,"body_markdown":"Maybe you should look into the `Unused Symbol` inspection with the following settings:\r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/t3zFX.png","title":"How find all unused classes in Intellij Idea?","body":"<p>Maybe you should look into the <code>Unused Symbol</code> inspection with the following settings:</p>\n\n<p><img src=\"https://i.stack.imgur.com/t3zFX.png\" alt=\"enter image description here\"></p>\n"},{"tags":[],"owner":{"account_id":6189696,"reputation":303,"user_id":4822716,"display_name":"sunny"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1429773570,"creation_date":1429773570,"answer_id":29816357,"question_id":22522013,"body_markdown":"I am not sure if this will answer your question but I used a tool in past as Fortify to run code review rules on the project, that precisely points to the unused imports, dead code, unused classes etc. It is a paid software but I am sure there will be some free plugins/software will be available for same.\r\n\r\n","title":"How find all unused classes in Intellij Idea?","body":"<p>I am not sure if this will answer your question but I used a tool in past as Fortify to run code review rules on the project, that precisely points to the unused imports, dead code, unused classes etc. It is a paid software but I am sure there will be some free plugins/software will be available for same.</p>\n"},{"comments":[{"owner":{"account_id":273437,"reputation":8357,"user_id":565049,"accept_rate":57,"display_name":"Rob Fletcher"},"score":7,"creation_date":1448039966,"post_id":29934536,"comment_id":55430045,"body_markdown":"Well, it does grey out the class name when actually viewing the file and give you an intention action to &quot;remove unused class&quot;, all that&#39;s missing is to be able to automatically find them. Certainly there are ways that could break things but that&#39;s true of many refactorings.","body":"Well, it does grey out the class name when actually viewing the file and give you an intention action to &quot;remove unused class&quot;, all that&#39;s missing is to be able to automatically find them. Certainly there are ways that could break things but that&#39;s true of many refactorings."},{"owner":{"account_id":2974767,"reputation":2943,"user_id":2526056,"display_name":"Dogs"},"score":3,"creation_date":1488479369,"post_id":29934536,"comment_id":72260326,"body_markdown":"Class.forName() is arguably not any different, from the point of analysis safety, than using reflection to read/set private fields on a class. So if IntelliJ will do this for fields, that is not an acceptable answer for why it won&#39;t do it for classes as well. In either case, the analysis result isn&#39;t 100% guaranteed to be safe.","body":"Class.forName() is arguably not any different, from the point of analysis safety, than using reflection to read/set private fields on a class. So if IntelliJ will do this for fields, that is not an acceptable answer for why it won&#39;t do it for classes as well. In either case, the analysis result isn&#39;t 100% guaranteed to be safe."}],"tags":[],"owner":{"account_id":37073,"reputation":23568,"user_id":105904,"display_name":"Andrew Janke"},"comment_count":2,"down_vote_count":5,"up_vote_count":16,"is_accepted":false,"score":11,"last_activity_date":1430282616,"creation_date":1430282616,"answer_id":29934536,"question_id":22522013,"body_markdown":"I don&#39;t think this is doable. I suspect this feature is intentionally left out of IDEs because it can&#39;t be used safely the way that other &quot;remove unused XXX&quot; refactorings can.\r\n\r\nThe unused declarations IDEA (and AFAIK, NetBeans) looks for are for private members and local variables: things that are not accessible, even dynamically, from outside that class or scope. (Well, at least without doing things with Reflection or JVM hacking that you&#39;re not supposed to.) No matter what outside code does with your library, it won&#39;t cause those things to be used, because their scope is limited and the IDE can see all of it. The compiler can determine this by looking at just your code.\r\n\r\nFor classes, even if they don&#39;t have `public` access, they can be referenced dynamically with `Class.forName()`, and this actually happens in live code. So even if they&#39;re not apparently used within the code of your project, they might be used depending on what you or external code using your library runs. So the IDE can&#39;t guarantee that removing those classes won&#39;t change externally observable behavior.\r\n\r\nWhich is why I think IDEA just doesn&#39;t provide this behavior: it might give users false expectations of safety, and removing them is not a safe refactoring.","title":"How find all unused classes in Intellij Idea?","body":"<p>I don't think this is doable. I suspect this feature is intentionally left out of IDEs because it can't be used safely the way that other \"remove unused XXX\" refactorings can.</p>\n\n<p>The unused declarations IDEA (and AFAIK, NetBeans) looks for are for private members and local variables: things that are not accessible, even dynamically, from outside that class or scope. (Well, at least without doing things with Reflection or JVM hacking that you're not supposed to.) No matter what outside code does with your library, it won't cause those things to be used, because their scope is limited and the IDE can see all of it. The compiler can determine this by looking at just your code.</p>\n\n<p>For classes, even if they don't have <code>public</code> access, they can be referenced dynamically with <code>Class.forName()</code>, and this actually happens in live code. So even if they're not apparently used within the code of your project, they might be used depending on what you or external code using your library runs. So the IDE can't guarantee that removing those classes won't change externally observable behavior.</p>\n\n<p>Which is why I think IDEA just doesn't provide this behavior: it might give users false expectations of safety, and removing them is not a safe refactoring.</p>\n"},{"comments":[{"owner":{"account_id":2531385,"reputation":81712,"user_id":2204410,"accept_rate":100,"display_name":"Jaap"},"score":0,"creation_date":1467890659,"post_id":38244028,"comment_id":63909296,"body_markdown":"Posting nearly the exact same answer within a couple of minutes to several questions, suggest that one of them ios a duplicate of the other. please mark them as such.","body":"Posting nearly the exact same answer within a couple of minutes to several questions, suggest that one of them ios a duplicate of the other. please mark them as such."},{"owner":{"account_id":5696978,"reputation":4019,"user_id":4503189,"display_name":"BlondCode"},"score":5,"creation_date":1467890831,"post_id":38244028,"comment_id":63909421,"body_markdown":"One of them is specially for IntelliJ Idea usage, another is for general Java. I wouldn&#39;t say these are duplications.","body":"One of them is specially for IntelliJ Idea usage, another is for general Java. I wouldn&#39;t say these are duplications."},{"owner":{"account_id":5696978,"reputation":4019,"user_id":4503189,"display_name":"BlondCode"},"score":0,"creation_date":1468246565,"post_id":38244028,"comment_id":64035170,"body_markdown":"Which is irrelevant then?","body":"Which is irrelevant then?"},{"owner":{"account_id":1060942,"reputation":12046,"user_id":1062587,"accept_rate":78,"display_name":"thelawnmowerman"},"score":8,"creation_date":1488724208,"post_id":38244028,"comment_id":72348491,"body_markdown":"It ignores the &quot;Only Check Classes&quot; configuration, so I get lots and lots of unwanted results (unused methods, fields, etc., and, what is worse, many of them being false positives, for several reasons...).","body":"It ignores the &quot;Only Check Classes&quot; configuration, so I get lots and lots of unwanted results (unused methods, fields, etc., and, what is worse, many of them being false positives, for several reasons...)."},{"owner":{"account_id":1622277,"reputation":6199,"user_id":1498586,"accept_rate":66,"display_name":"Mahdi"},"score":0,"creation_date":1503237041,"post_id":38244028,"comment_id":78523024,"body_markdown":"I have problem like @thelawnmowerman and seems filter does not work","body":"I have problem like @thelawnmowerman and seems filter does not work"},{"owner":{"account_id":1674469,"reputation":3577,"user_id":1540297,"accept_rate":70,"display_name":"Sourabh Saldi"},"score":6,"creation_date":1512474942,"post_id":38244028,"comment_id":82264166,"body_markdown":"There is a change in Studio 3.0\n\nOnly check classes option comes after step:\n\nSelect &quot;Unused declaration Java|Declaration redundancy&quot;","body":"There is a change in Studio 3.0  Only check classes option comes after step:  Select &quot;Unused declaration Java|Declaration redundancy&quot;"},{"owner":{"account_id":92486,"reputation":45195,"user_id":253468,"accept_rate":79,"display_name":"TWiStErRob"},"score":4,"creation_date":1530793356,"post_id":38244028,"comment_id":89364008,"body_markdown":"We don&#39;t need to change global settings to run an inspection with different parameters. The Run inspection by name action will pop up the settings for the inspection.","body":"We don&#39;t need to change global settings to run an inspection with different parameters. The Run inspection by name action will pop up the settings for the inspection."},{"owner":{"account_id":338690,"reputation":424,"user_id":667706,"accept_rate":80,"display_name":"Tbadams"},"score":0,"creation_date":1553187467,"post_id":38244028,"comment_id":97300971,"body_markdown":"FTR: Ctrl+Shift+A is the default Studio keymap for &quot;Help &gt; Find Action...&quot;.  It&#39;s Shift+Command+A on OSX.","body":"FTR: Ctrl+Shift+A is the default Studio keymap for &quot;Help &gt; Find Action...&quot;.  It&#39;s Shift+Command+A on OSX."},{"owner":{"account_id":143752,"reputation":5048,"user_id":352319,"accept_rate":84,"display_name":"kc2001"},"score":0,"creation_date":1553430817,"post_id":38244028,"comment_id":97373853,"body_markdown":"A warning... Depending on the size of your project, this can take a long time - hours to days.  You also may want to increase the amount of memory you allocate.","body":"A warning... Depending on the size of your project, this can take a long time - hours to days.  You also may want to increase the amount of memory you allocate."},{"owner":{"account_id":1806558,"reputation":4512,"user_id":1643558,"accept_rate":73,"display_name":"tgkprog"},"score":0,"creation_date":1645466743,"post_id":38244028,"comment_id":125874045,"body_markdown":"fails for spring, ignores autowired annotation","body":"fails for spring, ignores autowired annotation"}],"tags":[],"owner":{"account_id":5696978,"reputation":4019,"user_id":4503189,"display_name":"BlondCode"},"comment_count":10,"down_vote_count":5,"up_vote_count":267,"is_accepted":false,"score":262,"last_activity_date":1563363395,"creation_date":1467889980,"answer_id":38244028,"question_id":22522013,"body_markdown":"- Press &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;Shift&lt;/kbd&gt;+&lt;kbd&gt;A&lt;/kbd&gt; (in Mac &lt;kbd&gt;Command&lt;/kbd&gt;+&lt;kbd&gt;Shift&lt;/kbd&gt;+&lt;kbd&gt;A&lt;/kbd&gt;)\r\n- Enter &quot;unused declar&quot;\r\n- Double-click on &quot;Unused declaration&quot;\r\n\r\nSettings will pop up\r\n\r\n- Click on Java/Declaration redundancy/Unused declaration\r\n- on the right bottom select &quot;On the fly editor settings&quot;\r\n- untick check fields, ..., check parameters. Only Check Classes should be ticked.\r\n- Press OK\r\n\r\nSettings closes\r\n\r\n- On the menu bar, click on Analyze / Run Inspection by Name (or &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;Alt&lt;/kbd&gt;+&lt;kbd&gt;Shift&lt;/kbd&gt;+&lt;kbd&gt;I&lt;/kbd&gt; - in Mac &lt;kbd&gt;Command&lt;/kbd&gt;+&lt;kbd&gt;Option&lt;/kbd&gt;+&lt;kbd&gt;Shift&lt;/kbd&gt;+&lt;kbd&gt;I&lt;/kbd&gt;)\r\n- Insert text &quot;Unused decla&quot;\r\n- Select &quot;Unused declaration   Java|Declaration redundancy&quot;\r\n\r\nSearch starts\r\n\r\n- Check the job state on bottom of Idea, when finished: enjoy the results and the great feeling of cleaning up the messed code. :)\r\n\r\n","title":"How find all unused classes in Intellij Idea?","body":"<ul>\n<li>Press <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>A</kbd> (in Mac <kbd>Command</kbd>+<kbd>Shift</kbd>+<kbd>A</kbd>)</li>\n<li>Enter \"unused declar\"</li>\n<li>Double-click on \"Unused declaration\"</li>\n</ul>\n\n<p>Settings will pop up</p>\n\n<ul>\n<li>Click on Java/Declaration redundancy/Unused declaration</li>\n<li>on the right bottom select \"On the fly editor settings\"</li>\n<li>untick check fields, ..., check parameters. Only Check Classes should be ticked.</li>\n<li>Press OK</li>\n</ul>\n\n<p>Settings closes</p>\n\n<ul>\n<li>On the menu bar, click on Analyze / Run Inspection by Name (or <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>Shift</kbd>+<kbd>I</kbd> - in Mac <kbd>Command</kbd>+<kbd>Option</kbd>+<kbd>Shift</kbd>+<kbd>I</kbd>)</li>\n<li>Insert text \"Unused decla\"</li>\n<li>Select \"Unused declaration   Java|Declaration redundancy\"</li>\n</ul>\n\n<p>Search starts</p>\n\n<ul>\n<li>Check the job state on bottom of Idea, when finished: enjoy the results and the great feeling of cleaning up the messed code. :)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":5080491,"reputation":15131,"user_id":4076764,"accept_rate":74,"display_name":"Adam Hughes"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1677861988,"creation_date":1636469394,"answer_id":69900235,"question_id":22522013,"body_markdown":"Update 2023:\r\n\r\nctrl + alt + shift + I \r\n\r\n[![enter image description here][1]][1]\r\n\r\nClick on highlighted &quot;Unused declaration&quot; \r\n\r\n[![enter image description here][2]][2]\r\n\r\nSelect the options you care about.  In this case, I chose only &quot;Classes&quot; to find unused classes.\r\n\r\n**BE CAREFUL WITH THIS THOUGH**  I&#39;ve found that classes that are used inherently by reference, for example through hibernate, will say they&#39;re unused but right clicking class and doing Find Usages shows otherwise.  This only checks if constructor is called explicitly.  \r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gujcL.png\r\n  [2]: https://i.stack.imgur.com/LO1YB.png\r\n  [3]: https://i.stack.imgur.com/SVYUZ.gif","title":"How find all unused classes in Intellij Idea?","body":"<p>Update 2023:</p>\n<p>ctrl + alt + shift + I</p>\n<p><a href=\"https://i.stack.imgur.com/gujcL.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/gujcL.png\" alt=\"enter image description here\" /></a></p>\n<p>Click on highlighted &quot;Unused declaration&quot;</p>\n<p><a href=\"https://i.stack.imgur.com/LO1YB.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/LO1YB.png\" alt=\"enter image description here\" /></a></p>\n<p>Select the options you care about.  In this case, I chose only &quot;Classes&quot; to find unused classes.</p>\n<p><strong>BE CAREFUL WITH THIS THOUGH</strong>  I've found that classes that are used inherently by reference, for example through hibernate, will say they're unused but right clicking class and doing Find Usages shows otherwise.  This only checks if constructor is called explicitly.</p>\n"},{"tags":[],"owner":{"account_id":3532567,"reputation":349,"user_id":2951657,"display_name":"Thuan Tran"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670576052,"creation_date":1670576052,"answer_id":74740759,"question_id":22522013,"body_markdown":"Press Ctrl + Shift + A, in action tab choose Analyze -&gt; Run Inspection by Name...-&gt; Unused declaration -&gt; Show popup -&gt; Click OK\r\n [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XMNp1.png","title":"How find all unused classes in Intellij Idea?","body":"<p>Press Ctrl + Shift + A, in action tab choose Analyze -&gt; Run Inspection by Name...-&gt; Unused declaration -&gt; Show popup -&gt; Click OK\n<a href=\"https://i.stack.imgur.com/XMNp1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XMNp1.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":5418168,"reputation":1454,"user_id":4312720,"display_name":"Jorge Tovar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672086416,"creation_date":1672086416,"answer_id":74923759,"question_id":22522013,"body_markdown":"\r\n- Go to the **code tab, analyze code**,  and **run inspection by name**. \r\n\r\n[![navigation][1]][1]\r\n\r\n- Select class checkbox \r\n\r\n[![settings][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TDln4.png\r\n  [2]: https://i.stack.imgur.com/V0AsS.png","title":"How find all unused classes in Intellij Idea?","body":"<ul>\n<li>Go to the <strong>code tab, analyze code</strong>,  and <strong>run inspection by name</strong>.</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/TDln4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TDln4.png\" alt=\"navigation\" /></a></p>\n<ul>\n<li>Select class checkbox </li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/V0AsS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/V0AsS.png\" alt=\"settings\" /></a></p>\n"}],"owner":{"account_id":1301815,"reputation":31771,"user_id":1251549,"accept_rate":29,"display_name":"Cherry"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":89082,"favorite_count":0,"down_vote_count":0,"up_vote_count":166,"answer_count":7,"score":166,"last_activity_date":1677861988,"creation_date":1395281030,"question_id":22522013,"body_markdown":"There is an inspection &quot;Unused declaration&quot; which can find all unused code in Intellij Idea. (see https://stackoverflow.com/questions/6587729/how-to-use-intellij-idea-to-find-all-unused-code)\r\nBut I want to find all unused classes, **not** methods, variables etc. **Only** classes. (it is difficult to find only classes in 3000 result list). How I can do that?\r\n","title":"How find all unused classes in Intellij Idea?","body":"<p>There is an inspection &quot;Unused declaration&quot; which can find all unused code in Intellij Idea. (see <a href=\"https://stackoverflow.com/questions/6587729/how-to-use-intellij-idea-to-find-all-unused-code\">How to use IntelliJ IDEA to find all unused code?</a>)\nBut I want to find all unused classes, <strong>not</strong> methods, variables etc. <strong>Only</strong> classes. (it is difficult to find only classes in 3000 result list). How I can do that?</p>\n"},{"tags":["java","spring-boot","spring-security","authorization","shiro"],"comments":[{"owner":{"account_id":6993865,"reputation":58,"user_id":5362116,"display_name":"Shubham"},"score":0,"creation_date":1675710858,"post_id":75359869,"comment_id":132983710,"body_markdown":"Assigning static roles that are applicable on all resources will not be helpful. \nI can have John and Jane as admins for Resource1, and Alice and Bob as admins for Resource2.\nAnd there can be N Number of these resources","body":"Assigning static roles that are applicable on all resources will not be helpful.  I can have John and Jane as admins for Resource1, and Alice and Bob as admins for Resource2. And there can be N Number of these resources"},{"owner":{"account_id":6993865,"reputation":58,"user_id":5362116,"display_name":"Shubham"},"score":0,"creation_date":1675715262,"post_id":75359869,"comment_id":132984910,"body_markdown":"Currently we using a request filter to intercept call there we check the user, also in a database we are storing user -&gt; urls mapping. Like john -&gt; /resources/R1. I am looking for a better and straight forward way to achieve this.","body":"Currently we using a request filter to intercept call there we check the user, also in a database we are storing user -&gt; urls mapping. Like john -&gt; /resources/R1. I am looking for a better and straight forward way to achieve this."}],"answers":[{"comments":[{"owner":{"account_id":6993865,"reputation":58,"user_id":5362116,"display_name":"Shubham"},"score":0,"creation_date":1675710829,"post_id":75360845,"comment_id":132983706,"body_markdown":"Assigning static roles that are applicable on all resources will not be helpful. \n\nI can have John and Jane as admins for Resource1, and Alice and Bob as admins for Resource2.\n\nAnd there can be N Number of these resources","body":"Assigning static roles that are applicable on all resources will not be helpful.   I can have John and Jane as admins for Resource1, and Alice and Bob as admins for Resource2.  And there can be N Number of these resources"},{"owner":{"account_id":3583855,"reputation":150,"user_id":2991440,"display_name":"krishnan"},"score":0,"creation_date":1675763089,"post_id":75360845,"comment_id":132993703,"body_markdown":"Agreed. The above example was  provided for refernece, you could manage the user role with a database.","body":"Agreed. The above example was  provided for refernece, you could manage the user role with a database."},{"owner":{"account_id":6993865,"reputation":58,"user_id":5362116,"display_name":"Shubham"},"score":0,"creation_date":1675763597,"post_id":75360845,"comment_id":132993890,"body_markdown":"But for the `antMatchers` URLs the list is hard coded. Based on the example in description\n\n\nhttp.authorizeRequests()\n                .antMatchers(&quot;/resources/r1&quot;).hasRole(&quot;r1_admin&quot;)\n                 .antMatchers(&quot;/resources/r2&quot;).hasRole(&quot;r2_admin&quot;)\n                .and().formLogin();\n\n\n\nBut as new resources are being created new antMatcher paths need to be added.\n\n\nSo is this method called once to declare antMatcher on startup or would this be called again and again?\n\nI&#39;ll check this and get back, let me know if you already know","body":"But for the <code>antMatchers</code> URLs the list is hard coded. Based on the example in description   http.authorizeRequests()                 .antMatchers(&quot;/resources/r1&quot;).hasRole(&quot;r1_admin&quot;)                  .antMatchers(&quot;/resources/r2&quot;).hasRole(&quot;r2_admin&quot;)                 .and().formLogin();    But as new resources are being created new antMatcher paths need to be added.   So is this method called once to declare antMatcher on startup or would this be called again and again?  I&#39;ll check this and get back, let me know if you already know"},{"owner":{"account_id":6993865,"reputation":58,"user_id":5362116,"display_name":"Shubham"},"score":0,"creation_date":1677482083,"post_id":75360845,"comment_id":133339017,"body_markdown":"I check and this approach doesn&#39;t work for Dynamic Rest Resources as the configure method is called only during startup any resources created after startup won&#39;t be protected","body":"I check and this approach doesn&#39;t work for Dynamic Rest Resources as the configure method is called only during startup any resources created after startup won&#39;t be protected"},{"owner":{"account_id":3583855,"reputation":150,"user_id":2991440,"display_name":"krishnan"},"score":0,"creation_date":1677600131,"post_id":75360845,"comment_id":133368056,"body_markdown":"Here you have to go for the access control via database configuartion - since you are using apache shiro.","body":"Here you have to go for the access control via database configuartion - since you are using apache shiro."}],"tags":[],"owner":{"account_id":3583855,"reputation":150,"user_id":2991440,"display_name":"krishnan"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675683649,"creation_date":1675683649,"answer_id":75360845,"question_id":75359869,"body_markdown":"You could use Spring Security for this use case.\r\nAs a general practice it is recommended to assign roles for users for maintability. \r\nFor example assign admin role to - john.doe@company.com, jane.doe@company.com then manage the access using the role.\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n    \t\r\n    \t// Roles for users\r\n    \tprivate static final String ROLE_1 = &quot;ADMIN&quot;;\r\n    \tprivate static final String ROLE_2 = &quot;USER&quot;;\r\n    \t\r\n    \t// In-memory users with roles\r\n    \t@Override\r\n    \tprotected void configure(AuthenticationManagerBuilder auth) throws Exception {\t\t\r\n    \t\tauth.inMemoryAuthentication()\r\n    \t\t\t\t.withUser(&quot;john.doe@company.com&quot;)\r\n    \t\t\t\t.password(passwordEncoder().encode(&quot;admin@123&quot;))\r\n    \t\t\t\t.roles(ROLE_1)\r\n                    .and()\r\n    \t\t\t\t.withUser(&quot;jane.doe@company.com&quot;)\r\n    \t\t\t\t.password(passwordEncoder().encode(&quot;admin@12345&quot;))\r\n    \t\t\t\t.roles(ROLE_1)\r\n    \t\t\t\t.and()\r\n    \t\t\t\t.withUser(&quot;user&quot;)\r\n    \t\t\t\t.password(passwordEncoder().encode(&quot;user@123&quot;))\r\n    \t\t\t\t.roles(ROLE_2);\r\n    \t}\r\n    \t\r\n    \t// Password encoding\r\n    \t@Bean\r\n    \tpublic PasswordEncoder passwordEncoder() {\r\n    \t\treturn new BCryptPasswordEncoder();\r\n    \t}\r\n    \r\n    \t// Authorized the request based on role\r\n    \t@Override\r\n    \tprotected void configure(HttpSecurity http) throws Exception {\r\n    \t\thttp.authorizeRequests()\r\n    \t\t\t\t.antMatchers(&quot;/resources/**&quot;).hasRole(ROLE_1)\r\n    \t\t\t\t.antMatchers(&quot;/all&quot;).permitAll()\r\n    \t\t\t\t.and().formLogin();\r\n    \t}\r\n    }","title":"Achieve Dynamic REST Resource specific Authorization","body":"<p>You could use Spring Security for this use case.\nAs a general practice it is recommended to assign roles for users for maintability.\nFor example assign admin role to - john.doe@company.com, jane.doe@company.com then manage the access using the role.</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfiguration extends WebSecurityConfigurerAdapter {\n    \n    // Roles for users\n    private static final String ROLE_1 = &quot;ADMIN&quot;;\n    private static final String ROLE_2 = &quot;USER&quot;;\n    \n    // In-memory users with roles\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {      \n        auth.inMemoryAuthentication()\n                .withUser(&quot;john.doe@company.com&quot;)\n                .password(passwordEncoder().encode(&quot;admin@123&quot;))\n                .roles(ROLE_1)\n                .and()\n                .withUser(&quot;jane.doe@company.com&quot;)\n                .password(passwordEncoder().encode(&quot;admin@12345&quot;))\n                .roles(ROLE_1)\n                .and()\n                .withUser(&quot;user&quot;)\n                .password(passwordEncoder().encode(&quot;user@123&quot;))\n                .roles(ROLE_2);\n    }\n    \n    // Password encoding\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    // Authorized the request based on role\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.authorizeRequests()\n                .antMatchers(&quot;/resources/**&quot;).hasRole(ROLE_1)\n                .antMatchers(&quot;/all&quot;).permitAll()\n                .and().formLogin();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6993865,"reputation":58,"user_id":5362116,"display_name":"Shubham"},"score":0,"creation_date":1677861705,"post_id":75629651,"comment_id":133426969,"body_markdown":"Looks promising, let me check and get back","body":"Looks promising, let me check and get back"},{"owner":{"account_id":6993865,"reputation":58,"user_id":5362116,"display_name":"Shubham"},"score":0,"creation_date":1677870102,"post_id":75629651,"comment_id":133429228,"body_markdown":"Thanks this works for this use case","body":"Thanks this works for this use case"}],"tags":[],"owner":{"account_id":9881954,"reputation":96,"user_id":7317761,"display_name":"Sakshi Sachdeva"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677861604,"creation_date":1677861207,"answer_id":75629651,"question_id":75359869,"body_markdown":"This can be achieved using a method level security from SpringBoot.\r\n\r\nFirst enable Method Level Security by annotating a Config class like -\r\n```\r\n@Configuration\r\n@EnableGlobalMethodSecurity(prePostEnabled = true)\r\npublic class GlobalMethodConfig extends GlobalMethodSecurityConfiguration\r\n```\r\n\r\nThen provide an implementation of `PermissionEvaluator` class like -\r\n```\r\n@Override\r\npublic boolean hasPermission(Authentication authentication, Serializable targetId, Object permission) {\r\n  if (permission.equals(&quot;RESOURCE_WRITE_AUTHORITY&quot;)) {\r\n    Resource res = resourceRepository.getResourceById((String) targetId);\r\n    if(env != null) {\r\n      return env.getAdmins().contains(authentication.getName());\r\n    }\r\n  }\r\n  return false;\r\n}\r\n```\r\n\r\nAfter which you can annotate your PUT method in controller or the corresponding method in the service, to use PermissionEvaluator, like \r\n\r\n```\r\n@PreAuthorize(&quot;hasPermission(#resourceName, &#39;RESOURCE_WRITE_AUTHORITY&#39;)&quot;)\r\npublic Environment updateResource(String resourceName)\r\n```\r\n\r\nReferences -\r\nhttps://docs.spring.io/spring-security/site/docs/3.0.x/reference/el-access.html#:~:text=15.3.1%C2%A0%40Pre%20and%20%40Post%20Annotations","title":"Achieve Dynamic REST Resource specific Authorization","body":"<p>This can be achieved using a method level security from SpringBoot.</p>\n<p>First enable Method Level Security by annotating a Config class like -</p>\n<pre><code>@Configuration\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class GlobalMethodConfig extends GlobalMethodSecurityConfiguration\n</code></pre>\n<p>Then provide an implementation of <code>PermissionEvaluator</code> class like -</p>\n<pre><code>@Override\npublic boolean hasPermission(Authentication authentication, Serializable targetId, Object permission) {\n  if (permission.equals(&quot;RESOURCE_WRITE_AUTHORITY&quot;)) {\n    Resource res = resourceRepository.getResourceById((String) targetId);\n    if(env != null) {\n      return env.getAdmins().contains(authentication.getName());\n    }\n  }\n  return false;\n}\n</code></pre>\n<p>After which you can annotate your PUT method in controller or the corresponding method in the service, to use PermissionEvaluator, like</p>\n<pre><code>@PreAuthorize(&quot;hasPermission(#resourceName, 'RESOURCE_WRITE_AUTHORITY')&quot;)\npublic Environment updateResource(String resourceName)\n</code></pre>\n<p>References -\n<a href=\"https://docs.spring.io/spring-security/site/docs/3.0.x/reference/el-access.html#:%7E:text=15.3.1%C2%A0%40Pre%20and%20%40Post%20Annotations\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/site/docs/3.0.x/reference/el-access.html#:~:text=15.3.1%C2%A0%40Pre%20and%20%40Post%20Annotations</a></p>\n"}],"owner":{"account_id":6993865,"reputation":58,"user_id":5362116,"display_name":"Shubham"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":75629651,"answer_count":2,"score":-1,"last_activity_date":1677861604,"creation_date":1675678019,"question_id":75359869,"body_markdown":"We have a SpringBoot based module, we have REST APIs which allow creating resources with Params like\r\n\r\n#### Request \r\n**POST** /resources\r\n```\r\n{\r\n  &quot;resourceName&quot;: &quot;Res1&quot;,\r\n  &quot;admins&quot;: [&quot;john.doe@company.com&quot;, &quot;jane.doe@company.com&quot;]\r\n}\r\n```\r\n\r\n#### Response\r\n```\r\n{\r\n  &quot;id&quot;: &quot;R1&quot;\r\n  &quot;resourceName&quot;: &quot;Res1&quot;,\r\n  &quot;admins&quot;: [&quot;john.doe@company.com&quot;, &quot;jane.doe@company.com&quot;]\r\n}\r\n```\r\n\r\n#### Request \r\n**POST** /resources\r\n```\r\n{\r\n  &quot;resourceName&quot;: &quot;Res2&quot;,\r\n  &quot;admins&quot;: [&quot;alice@company.com&quot;, &quot;bob@company.com&quot;]\r\n}\r\n```\r\n\r\n#### Response\r\n```\r\n{\r\n  &quot;id&quot;: &quot;R2&quot;\r\n  &quot;resourceName&quot;: &quot;Res2&quot;,\r\n  &quot;admins&quot;: [&quot;alice@company.com&quot;, &quot;bob@company.com&quot;]\r\n}\r\n```\r\n\r\n\r\nFor `R1` update API should only be accesible by John/Jane\r\n\r\n\r\n#### Request \r\n**PUT** /resources/R1\r\n```\r\n{\r\n  &quot;resourceName&quot;: &quot;Resource1&quot;,\r\n  &quot;admins&quot;: [&quot;john.doe@company.com&quot;, &quot;jane.doe@company.com&quot;, &quot;jacob@company.com&quot;]\r\n}\r\n```\r\n\r\n#### Response\r\nFor John / Jane the response should be:\r\n```\r\n{\r\n  &quot;id&quot;: &quot;R1&quot;\r\n  &quot;resourceName&quot;: &quot;Resource1&quot;,\r\n  &quot;admins&quot;: [&quot;john.doe@company.com&quot;, &quot;jane.doe@company.com&quot;, &quot;jacob@company.com&quot;]\r\n}\r\n```\r\n\r\nWhen Alice / Bob user are updating `R1` this response should be `403 Forbidden`\r\n\r\nSimilarly For `R2` update API should only be accesible by Alice / Bob.\r\n\r\nWhen John / Jane are updating `R2` this response should be `403 Forbidden`\r\n\r\nPlease suggest which framework can be used to achieve this, preferably with less boiler plate\r\n\r\nCurrently we have a system where resource access is in for of RoleBasedAccessControl. \r\nWe achieve restriction by storing permissions. The RBAC config is saved in DB.\r\n\r\nBut now we need more fine grained control per resource which can be managed directly by existing admins","title":"Achieve Dynamic REST Resource specific Authorization","body":"<p>We have a SpringBoot based module, we have REST APIs which allow creating resources with Params like</p>\n<h4>Request</h4>\n<p><strong>POST</strong> /resources</p>\n<pre><code>{\n  &quot;resourceName&quot;: &quot;Res1&quot;,\n  &quot;admins&quot;: [&quot;john.doe@company.com&quot;, &quot;jane.doe@company.com&quot;]\n}\n</code></pre>\n<h4>Response</h4>\n<pre><code>{\n  &quot;id&quot;: &quot;R1&quot;\n  &quot;resourceName&quot;: &quot;Res1&quot;,\n  &quot;admins&quot;: [&quot;john.doe@company.com&quot;, &quot;jane.doe@company.com&quot;]\n}\n</code></pre>\n<h4>Request</h4>\n<p><strong>POST</strong> /resources</p>\n<pre><code>{\n  &quot;resourceName&quot;: &quot;Res2&quot;,\n  &quot;admins&quot;: [&quot;alice@company.com&quot;, &quot;bob@company.com&quot;]\n}\n</code></pre>\n<h4>Response</h4>\n<pre><code>{\n  &quot;id&quot;: &quot;R2&quot;\n  &quot;resourceName&quot;: &quot;Res2&quot;,\n  &quot;admins&quot;: [&quot;alice@company.com&quot;, &quot;bob@company.com&quot;]\n}\n</code></pre>\n<p>For <code>R1</code> update API should only be accesible by John/Jane</p>\n<h4>Request</h4>\n<p><strong>PUT</strong> /resources/R1</p>\n<pre><code>{\n  &quot;resourceName&quot;: &quot;Resource1&quot;,\n  &quot;admins&quot;: [&quot;john.doe@company.com&quot;, &quot;jane.doe@company.com&quot;, &quot;jacob@company.com&quot;]\n}\n</code></pre>\n<h4>Response</h4>\n<p>For John / Jane the response should be:</p>\n<pre><code>{\n  &quot;id&quot;: &quot;R1&quot;\n  &quot;resourceName&quot;: &quot;Resource1&quot;,\n  &quot;admins&quot;: [&quot;john.doe@company.com&quot;, &quot;jane.doe@company.com&quot;, &quot;jacob@company.com&quot;]\n}\n</code></pre>\n<p>When Alice / Bob user are updating <code>R1</code> this response should be <code>403 Forbidden</code></p>\n<p>Similarly For <code>R2</code> update API should only be accesible by Alice / Bob.</p>\n<p>When John / Jane are updating <code>R2</code> this response should be <code>403 Forbidden</code></p>\n<p>Please suggest which framework can be used to achieve this, preferably with less boiler plate</p>\n<p>Currently we have a system where resource access is in for of RoleBasedAccessControl.\nWe achieve restriction by storing permissions. The RBAC config is saved in DB.</p>\n<p>But now we need more fine grained control per resource which can be managed directly by existing admins</p>\n"},{"tags":["java","spring","mongodb","spring-boot"],"comments":[{"owner":{"account_id":13141180,"reputation":4284,"user_id":9492730,"display_name":"dododo"},"score":0,"creation_date":1677856569,"post_id":75628677,"comment_id":133425350,"body_markdown":"there is no other option. Effectively gridfs simply split a big message on smaller chunks. It&#39;s the only way to store bigger documents. If you don&#39;t want using gridfs, you can do the same splitting logic somehow on your end.","body":"there is no other option. Effectively gridfs simply split a big message on smaller chunks. It&#39;s the only way to store bigger documents. If you don&#39;t want using gridfs, you can do the same splitting logic somehow on your end."}],"answers":[{"comments":[{"owner":{"account_id":27928105,"reputation":1,"user_id":21326777,"display_name":"Kapila"},"score":0,"creation_date":1677857924,"post_id":75628913,"comment_id":133425812,"body_markdown":"Thank you very much,can you point me to any reference for both the approaches please.","body":"Thank you very much,can you point me to any reference for both the approaches please."},{"owner":{"account_id":959814,"reputation":8884,"user_id":984422,"display_name":"Wahyu Kristianto"},"score":0,"creation_date":1677858447,"post_id":75628913,"comment_id":133425980,"body_markdown":"Answer updated with links","body":"Answer updated with links"},{"owner":{"account_id":3631143,"reputation":55363,"user_id":3027266,"accept_rate":75,"display_name":"Wernfried Domscheit"},"score":0,"creation_date":1677860828,"post_id":75628913,"comment_id":133426721,"body_markdown":"Why do you refer to sharding? The max. size of BSON document is still 16 MiByte, no matter if sharding is used or not.","body":"Why do you refer to sharding? The max. size of BSON document is still 16 MiByte, no matter if sharding is used or not."},{"owner":{"account_id":959814,"reputation":8884,"user_id":984422,"display_name":"Wahyu Kristianto"},"score":0,"creation_date":1677861438,"post_id":75628913,"comment_id":133426892,"body_markdown":"Ah thanks @WernfriedDomscheit. You are correct. Sharding alone will not solve the problem of storing documents &gt; 16MB, as the max size BSON doc is still 16MB","body":"Ah thanks @WernfriedDomscheit. You are correct. Sharding alone will not solve the problem of storing documents &gt; 16MB, as the max size BSON doc is still 16MB"}],"tags":[],"owner":{"account_id":959814,"reputation":8884,"user_id":984422,"display_name":"Wahyu Kristianto"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677861461,"creation_date":1677856922,"answer_id":75628913,"question_id":75628677,"body_markdown":"Store metadata in a separate collection. By storing the metadata associated with the GridFS files in a separate collection, you can use the full range of MongoDB aggregation and sorting features. [Official docs](https://www.mongodb.com/docs/manual/core/gridfs/#std-label-gridfs-files-collection).","title":"MongDB-JSON document size &gt;16MB throws error when saving","body":"<p>Store metadata in a separate collection. By storing the metadata associated with the GridFS files in a separate collection, you can use the full range of MongoDB aggregation and sorting features. <a href=\"https://www.mongodb.com/docs/manual/core/gridfs/#std-label-gridfs-files-collection\" rel=\"nofollow noreferrer\">Official docs</a>.</p>\n"}],"owner":{"account_id":27928105,"reputation":1,"user_id":21326777,"display_name":"Kapila"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677861461,"creation_date":1677855717,"question_id":75628677,"body_markdown":"We have few JSON Documents those are greater than 16 MB when saving to MongoDB, iam getting **&quot;Payload document size is larger than maximum of 16MB&quot;** as an error.Is there an approach to store this documents along with documents that are less than 16MB  in the same collection,so that my queries will be seamless.I have explored GridFS option provided by mongodb,but i have queries that need to support aggregation pipelines,but GridFS doesn&#39;t support Aggregation and sort by etc.Can someone help here.\r\n\r\n\r\nI tried using GridFS,but GridFS doen&#39;t seems to support Aggregation and sort by.I want better approach to store documents &gt;16MB in the same collection without much complexity.\r\n","title":"MongDB-JSON document size &gt;16MB throws error when saving","body":"<p>We have few JSON Documents those are greater than 16 MB when saving to MongoDB, iam getting <strong>&quot;Payload document size is larger than maximum of 16MB&quot;</strong> as an error.Is there an approach to store this documents along with documents that are less than 16MB  in the same collection,so that my queries will be seamless.I have explored GridFS option provided by mongodb,but i have queries that need to support aggregation pipelines,but GridFS doesn't support Aggregation and sort by etc.Can someone help here.</p>\n<p>I tried using GridFS,but GridFS doen't seems to support Aggregation and sort by.I want better approach to store documents &gt;16MB in the same collection without much complexity.</p>\n"},{"tags":["java","spring-boot","selenium-webdriver","gradle"],"answers":[{"tags":[],"owner":{"account_id":3683051,"reputation":6733,"user_id":3067542,"accept_rate":85,"display_name":"Vincent F"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677861011,"creation_date":1677861011,"answer_id":75629624,"question_id":75629623,"body_markdown":"I again got tricked by Spring Boot dependency management, which is most of the time super useful, but sometimes confusing like here...\r\n\r\nAs documented in Spring boot 2.6 , Selenium is managed by the BOM (I was not aware of this), and what a surprise : `v3.141.59` is defined there - so this is where it&#39;s coming from, without me defining it anywhere. \r\n\r\nhttps://docs.spring.io/spring-boot/docs/2.6.6/reference/html/dependency-versions.html#appendix.dependency-versions.properties \r\n\r\n[![enter image description here][1]][1] \r\n\r\nSo the solution is quite simple : we simply need to override the version in the gradle build file \r\n\r\n    ext[&#39;selenium.version&#39;] = &#39;4.6.0&#39;\r\n\r\n    dependencies {\r\n\r\n        testImplementation group: &#39;org.seleniumhq.selenium&#39;, name: &#39;selenium-java&#39; \r\n        ...\r\n    }\r\n\r\nand all the &quot;right&quot; dependencies versions are now coming. \r\n\r\n  [1]: https://i.stack.imgur.com/p8I3X.png","title":"gradle - unexplainable dependency version coming","body":"<p>I again got tricked by Spring Boot dependency management, which is most of the time super useful, but sometimes confusing like here...</p>\n<p>As documented in Spring boot 2.6 , Selenium is managed by the BOM (I was not aware of this), and what a surprise : <code>v3.141.59</code> is defined there - so this is where it's coming from, without me defining it anywhere.</p>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/2.6.6/reference/html/dependency-versions.html#appendix.dependency-versions.properties\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/2.6.6/reference/html/dependency-versions.html#appendix.dependency-versions.properties</a></p>\n<p><a href=\"https://i.stack.imgur.com/p8I3X.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p8I3X.png\" alt=\"enter image description here\" /></a></p>\n<p>So the solution is quite simple : we simply need to override the version in the gradle build file</p>\n<pre><code>ext['selenium.version'] = '4.6.0'\n\ndependencies {\n\n    testImplementation group: 'org.seleniumhq.selenium', name: 'selenium-java' \n    ...\n}\n</code></pre>\n<p>and all the &quot;right&quot; dependencies versions are now coming.</p>\n"}],"owner":{"account_id":3683051,"reputation":6733,"user_id":3067542,"accept_rate":85,"display_name":"Vincent F"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75629624,"answer_count":1,"score":1,"last_activity_date":1677861011,"creation_date":1677861011,"question_id":75629623,"body_markdown":"I have a Spring Boot 2.6.1 application for which I use Selenium during my tests. \r\n\r\nI am using `selenium-java` `4.6.0` \r\n\r\n    testImplementation group: &#39;org.seleniumhq.selenium&#39;, name: &#39;selenium-java&#39;, version: &#39;4.6.0&#39;\r\n\r\nbut the transitive dependencies that are pulled are all older versions (mostly 3.141.59), which leads to some issue at runtime, with classes not found etc : \r\n\r\n[![enter image description here][1]][1]\r\n\r\nI can override all these dependencies manually, but that doesn&#39;t look like the right way.. \r\n\r\nanyway, where are these versions coming from ? I am not defining them anywhere, so I would expect all the versions showed in https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java/4.6.0 to be pulled. \r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0PwDh.png","title":"gradle - unexplainable dependency version coming","body":"<p>I have a Spring Boot 2.6.1 application for which I use Selenium during my tests.</p>\n<p>I am using <code>selenium-java</code> <code>4.6.0</code></p>\n<pre><code>testImplementation group: 'org.seleniumhq.selenium', name: 'selenium-java', version: '4.6.0'\n</code></pre>\n<p>but the transitive dependencies that are pulled are all older versions (mostly 3.141.59), which leads to some issue at runtime, with classes not found etc :</p>\n<p><a href=\"https://i.stack.imgur.com/0PwDh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0PwDh.png\" alt=\"enter image description here\" /></a></p>\n<p>I can override all these dependencies manually, but that doesn't look like the right way..</p>\n<p>anyway, where are these versions coming from ? I am not defining them anywhere, so I would expect all the versions showed in <a href=\"https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java/4.6.0\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java/4.6.0</a> to be pulled.</p>\n"},{"tags":["python","java","pdf","metadata","pdf2htmlex"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":2,"creation_date":1677861430,"post_id":75629621,"comment_id":133426890,"body_markdown":"Has the modification been stored as an incremental update or not? If not, you have no chance unless you also have the original.","body":"Has the modification been stored as an incremental update or not? If not, you have no chance unless you also have the original."},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1677863364,"post_id":75629621,"comment_id":133427478,"body_markdown":"https://www.startpage.com/sp/search?query=pdfdiff&amp;cat=web&amp;pl=opensearch&amp;language=english","body":"<a href=\"https://www.startpage.com/sp/search?query=pdfdiff&amp;cat=web&amp;pl=opensearch&amp;language=english\" rel=\"nofollow noreferrer\">startpage.com/sp/&hellip;</a>"}],"owner":{"account_id":18652597,"reputation":1,"user_id":13965682,"display_name":"Syhaa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677861002,"creation_date":1677861002,"question_id":75629621,"body_markdown":"Now I have a pdf file which I see the creation time and the modification time.\r\nIs there a way to know which part (e.g. tables/figures/text) are modified in the metadata? \r\n\r\nIn other words, how could I identify the difference between the initial pdf file the current one.\r\n\r\nI tried PyPDF and Pdf2htmlEX which do not help.","title":"How to identify the modified content in a pdf file?","body":"<p>Now I have a pdf file which I see the creation time and the modification time.\nIs there a way to know which part (e.g. tables/figures/text) are modified in the metadata?</p>\n<p>In other words, how could I identify the difference between the initial pdf file the current one.</p>\n<p>I tried PyPDF and Pdf2htmlEX which do not help.</p>\n"},{"tags":["java","arrays","syntax","processing","visualization"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1677005281,"post_id":75524611,"comment_id":133250476,"body_markdown":"Are you sure it&#39;s Java? Can you give a bit more complete code, like at least a method where this code resides in? Where do `size()`, `background()`, `smooth()`, `stroke()`, `strokeWeight()`, `ellipse()` come from? what type is `color` exactly? where does `height` come from? Just soooo many possibilities for syntax errors...","body":"Are you sure it&#39;s Java? Can you give a bit more complete code, like at least a method where this code resides in? Where do <code>size()</code>, <code>background()</code>, <code>smooth()</code>, <code>stroke()</code>, <code>strokeWeight()</code>, <code>ellipse()</code> come from? what type is <code>color</code> exactly? where does <code>height</code> come from? Just soooo many possibilities for syntax errors..."},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":1,"creation_date":1677005519,"post_id":75524611,"comment_id":133250552,"body_markdown":"You probably meant `for(int i = 0; i &lt; fibonacci.length; i++) {`. (I.e. `=` instead of `&lt;`.)","body":"You probably meant <code>for(int i = 0; i &lt; fibonacci.length; i++) {</code>. (I.e. <code>=</code> instead of <code>&lt;</code>.)"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":2,"creation_date":1677005639,"post_id":75524611,"comment_id":133250583,"body_markdown":"@Jens @cyberbrain this is about [Processing](https://processing.org/), `color` is a valid type, `#xxxxxx` is the right way to specify colors and `size`, `background` etc. are defined.","body":"@Jens @cyberbrain this is about <a href=\"https://processing.org/\" rel=\"nofollow noreferrer\">Processing</a>, <code>color</code> is a valid type, <code>#xxxxxx</code> is the right way to specify colors and <code>size</code>, <code>background</code> etc. are defined."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1677005849,"post_id":75524611,"comment_id":133250658,"body_markdown":"@Jules are you sure arrays are defined with normal parens instead of braces, like you&#39;re doing in the first line? Where are you getting that error? What tutorial are you following?","body":"@Jules are you sure arrays are defined with normal parens instead of braces, like you&#39;re doing in the first line? Where are you getting that error? What tutorial are you following?"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1677006011,"post_id":75524611,"comment_id":133250703,"body_markdown":"Also, you mispelled &quot;palette&quot; in the declaration.","body":"Also, you mispelled &quot;palette&quot; in the declaration."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1677006105,"post_id":75524611,"comment_id":133250739,"body_markdown":"Once you fixed those issues (including the one pointed out by aioobe in another comment) you should be able to run the example and see what you probably expect to see (circles further and further apart).","body":"Once you fixed those issues (including the one pointed out by aioobe in another comment) you should be able to run the example and see what you probably expect to see (circles further and further apart)."}],"answers":[{"tags":[],"owner":{"account_id":25065898,"reputation":1,"user_id":18920236,"display_name":"jjok13"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677860831,"creation_date":1677860831,"answer_id":75629597,"question_id":75524611,"body_markdown":"A few things:\r\n\r\n 1. Processing works with `setup()` and `draw()` methods, which are both missing from your snippet.\r\n 2. To make a copy of an array, you will have to use the `arrayCopy()` method\r\n 3. The `for` loop declaration is incorrect. Instead of `for(int i &lt; 0; ...` you should place `for(int i = 0; ...`\r\n\r\nI also removed the `pallete` array, as it does not serve any purpose in the current snippet.\r\n\r\nWith these changes, the snippet was able to launch and successfully run:\r\n\r\n    color[] dessert = {#9F9694, #791F33, #BA3D49, #F1E6D4, #E2E1DC};\r\n    \r\n    void setup(){\r\n      size(600,200);\r\n      background(dessert[0]);\r\n      smooth();\r\n    }\r\n    \r\n    void draw(){\r\n      int[] fibonacci = {0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377};\r\n      for(int i = 0; i &lt; fibonacci.length; i++) { \r\n        stroke(dessert[1]);\r\n        strokeWeight(2);\r\n        float x = fibonacci[i];\r\n        ellipse(x, height/2, 20, 20);\r\n      }\r\n    }","title":"Processing is giving a &quot;bad identifier&quot; error. I&#39;m not quite sure what that means","body":"<p>A few things:</p>\n<ol>\n<li>Processing works with <code>setup()</code> and <code>draw()</code> methods, which are both missing from your snippet.</li>\n<li>To make a copy of an array, you will have to use the <code>arrayCopy()</code> method</li>\n<li>The <code>for</code> loop declaration is incorrect. Instead of <code>for(int i &lt; 0; ...</code> you should place <code>for(int i = 0; ...</code></li>\n</ol>\n<p>I also removed the <code>pallete</code> array, as it does not serve any purpose in the current snippet.</p>\n<p>With these changes, the snippet was able to launch and successfully run:</p>\n<pre><code>color[] dessert = {#9F9694, #791F33, #BA3D49, #F1E6D4, #E2E1DC};\n\nvoid setup(){\n  size(600,200);\n  background(dessert[0]);\n  smooth();\n}\n\nvoid draw(){\n  int[] fibonacci = {0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377};\n  for(int i = 0; i &lt; fibonacci.length; i++) { \n    stroke(dessert[1]);\n    strokeWeight(2);\n    float x = fibonacci[i];\n    ellipse(x, height/2, 20, 20);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":27844488,"reputation":11,"user_id":21260270,"display_name":"Jules"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":342,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1677860831,"creation_date":1677004713,"question_id":75524611,"body_markdown":"I am trying to make a simple data visualization chart. This code is supposed to result in a small dot graph.\r\n\r\nHowever, processing is giving me a &#39;bad identifier&#39; syntax error. It&#39;s saying that maybe I forgot a variable or something.\r\n\r\nIt doesn&#39;t make sense to me, because I am following a tutorial and coded the exact same thing so. I&#39;m not sure where the error is coming from. \r\n\r\n\r\n\r\n    color[] dessert = (#9F9694, #791F33, #BA3D49, #F1E6D4, #E2E1DC);\r\n    color[] pallette = dessert;\r\n\r\n    size(600,200);\r\n    background(palette[0]);\r\n    smooth();\r\n\r\n    int[] fibonacci = {0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377};\r\n    for(int i &lt; 0; i &lt; fibonacci.length; i++) { \r\n      stroke(palette[1]);\r\n      strokeWeight(2);\r\n      float x = fibonacci[i];\r\n      ellipse(x, height/2, 20, 20);\r\n    }\r\n    ","title":"Processing is giving a &quot;bad identifier&quot; error. I&#39;m not quite sure what that means","body":"<p>I am trying to make a simple data visualization chart. This code is supposed to result in a small dot graph.</p>\n<p>However, processing is giving me a 'bad identifier' syntax error. It's saying that maybe I forgot a variable or something.</p>\n<p>It doesn't make sense to me, because I am following a tutorial and coded the exact same thing so. I'm not sure where the error is coming from.</p>\n<pre><code>color[] dessert = (#9F9694, #791F33, #BA3D49, #F1E6D4, #E2E1DC);\ncolor[] pallette = dessert;\n\nsize(600,200);\nbackground(palette[0]);\nsmooth();\n\nint[] fibonacci = {0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377};\nfor(int i &lt; 0; i &lt; fibonacci.length; i++) { \n  stroke(palette[1]);\n  strokeWeight(2);\n  float x = fibonacci[i];\n  ellipse(x, height/2, 20, 20);\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","hibernate","spring-mvc"],"comments":[{"owner":{"account_id":2486870,"reputation":685,"user_id":2165146,"display_name":"muhammed ozbilici"},"score":0,"creation_date":1677881233,"post_id":75629579,"comment_id":133431674,"body_markdown":"try to print sql query so you can start searching from that `logging.level.org.hibernate.SQL=DEBUG\nlogging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE`","body":"try to print sql query so you can start searching from that <code>logging.level.org.hibernate.SQL=DEBUG logging.level.org.hibernate.type.descriptor.sql.BasicBinder=&zwnj;&#8203;TRACE</code>"},{"owner":{"account_id":17915945,"reputation":35,"user_id":13016907,"display_name":"NANB"},"score":0,"creation_date":1677894779,"post_id":75629579,"comment_id":133433437,"body_markdown":"thank you for your reply I have added it to the application.properties but can&#39;t understand why I am getting a null value in person in phonenumber entity","body":"thank you for your reply I have added it to the application.properties but can&#39;t understand why I am getting a null value in person in phonenumber entity"},{"owner":{"account_id":7861285,"reputation":181,"user_id":5941624,"display_name":"fatemeakbari"},"score":0,"creation_date":1686660642,"post_id":75629579,"comment_id":134827142,"body_markdown":"you&#39;ve set fetch type lazy so until you don&#39;t call getPerson(), person not loaded. notice it&#39;s better because if you call it, person call getphonenumber and they fall into the loop and you give out of memory exception. for test you can set getPerson in toString() method of phoneNumber","body":"you&#39;ve set fetch type lazy so until you don&#39;t call getPerson(), person not loaded. notice it&#39;s better because if you call it, person call getphonenumber and they fall into the loop and you give out of memory exception. for test you can set getPerson in toString() method of phoneNumber"}],"owner":{"account_id":17915945,"reputation":35,"user_id":13016907,"display_name":"NANB"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677860764,"creation_date":1677860764,"question_id":75629579,"body_markdown":"I am trying to create two tables person and phonenumber using a model in spring-boot. Person table has an attribute name, age, and person_id where person_id is the primary_key and in the table, phonenumber has an attribute number,person_id where person_id is the primary key and foreign key refers to the person table person_id. and passing the JSON data as a post request to the controller but getting a null value in the phonenumber&#39;s person variable of person type.\r\n\r\nbelow are the codes:-\r\nperson.java\r\n```\r\npackage com.BitGeekTalks.JanShayog.model;\r\n\r\nimport jakarta.persistence.*;\r\n\r\n@Entity\r\n@Table(name = &quot;person&quot;)\r\npublic class Person {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;person_id&quot;)\r\n    private long person_id;\r\n    @Column(name =&quot;firstname&quot;)\r\n    private String firstName;\r\n    @Column(name =&quot;age&quot;)\r\n    private long age;\r\n    @OneToOne(mappedBy = &quot;person&quot;,cascade = CascadeType.ALL)\r\n    private PhoneNumber phoneNumber;\r\n\r\n    public Person(String firstName, long age, PhoneNumber phoneNumber) {\r\n        this.firstName = firstName;\r\n        this.age = age;\r\n        this.phoneNumber = phoneNumber;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Person{&quot; +\r\n                &quot;person_id=&quot; + person_id +\r\n                &quot;, firstName=&#39;&quot; + firstName + &#39;\\&#39;&#39; +\r\n                &quot;, age=&quot; + age +\r\n                &quot;, phoneNumber=&quot; + phoneNumber +\r\n                &#39;}&#39;;\r\n    }\r\n\r\n    public Person() {\r\n    }\r\n\r\n    public long getPerson_id() {\r\n        return person_id;\r\n    }\r\n\r\n    public void setPerson_id(long person_id) {\r\n        this.person_id = person_id;\r\n    }\r\n\r\n    public String getFirstName() {\r\n        return firstName;\r\n    }\r\n\r\n    public void setFirstName(String firstName) {\r\n        this.firstName = firstName;\r\n    }\r\n\r\n    public long getAge() {\r\n        return age;\r\n    }\r\n\r\n    public void setAge(long age) {\r\n        this.age = age;\r\n    }\r\n\r\n    public PhoneNumber getPhoneNumber() {\r\n        return phoneNumber;\r\n    }\r\n\r\n    public void setPhoneNumber(PhoneNumber phoneNumber) {\r\n        this.phoneNumber = phoneNumber;\r\n    }\r\n}\r\n\r\n```\r\nphonenumber.java\r\n\r\n```\r\npackage com.BitGeekTalks.JanShayog.model;\r\n\r\nimport jakarta.persistence.*;\r\n\r\n@Entity\r\n@Table(name = &quot;PhoneNumber&quot;)\r\npublic class PhoneNumber {\r\n    @Column(name = &quot;number&quot;)\r\n    private String number;\r\n    @Id\r\n    @Column(name = &quot;phone_number_id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long phoneNumberId;\r\n    @OneToOne(cascade = CascadeType.ALL,fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;person_id&quot;)\r\n    private Person person;\r\n\r\n\r\n    public Long getPhoneNumberId() {\r\n        return phoneNumberId;\r\n    }\r\n\r\n    public void setPhoneNumberId(Long phoneNumberId) {\r\n        this.phoneNumberId = phoneNumberId;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;PhoneNumber{&quot; +\r\n                &quot;number=&#39;&quot; + number + &#39;\\&#39;&#39; +\r\n                &quot;, phoneNumberId=&quot; + phoneNumberId +\r\n                &quot;, person=&quot; + person +\r\n                &#39;}&#39;;\r\n    }\r\n\r\n    public PhoneNumber(String number, Person person) {\r\n        this.number = number;\r\n        this.person = person;\r\n        person.setPhoneNumber(this);\r\n    }\r\n\r\n    public String getNumber() {\r\n        return number;\r\n    }\r\n\r\n    public void setNumber(String number) {\r\n        this.number = number;\r\n    }\r\n\r\n    public Person getPerson() {\r\n        return person;\r\n    }\r\n\r\n    public void setPerson(Person person) {\r\n        this.person = person;\r\n    }\r\n\r\n    public PhoneNumber() {\r\n    }\r\n\r\n\r\n}\r\n\r\n```\r\npersonservice.java\r\n```package com.BitGeekTalks.JanShayog.service;\r\n\r\nimport com.BitGeekTalks.JanShayog.model.Person;\r\nimport com.BitGeekTalks.JanShayog.repository.PersonRepo;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\npublic class PersonService {\r\n    @Autowired\r\n    private PersonRepo personRepo;\r\n    public Person addPerson(Person person) {\r\n        return personRepo.save(person);\r\n    }\r\n}\r\n```\r\npersonrepo.java\r\n```package com.BitGeekTalks.JanShayog.repository;\r\n\r\nimport com.BitGeekTalks.JanShayog.model.Person;\r\nimport org.springframework.data.repository.CrudRepository;\r\n\r\npublic interface PersonRepo extends CrudRepository&lt;Person,Integer&gt; {\r\n}\r\n```\r\npersoncontroller.java\r\n```\r\npackage com.BitGeekTalks.JanShayog.controller;\r\n\r\nimport com.BitGeekTalks.JanShayog.model.Person;\r\nimport com.BitGeekTalks.JanShayog.service.PersonService;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/api&quot;)\r\npublic class PersonController {\r\n\r\n    @Autowired\r\n    private PersonService personService;\r\n    @PostMapping(&quot;/person&quot;)\r\n    public String addPerson(@RequestBody Person person){\r\n        //System.out.println(person);\r\n        Person person1 = personService.addPerson(person);\r\n        return person1.toString();\r\n    }\r\n}\r\n\r\n```\r\njson data i am passing \r\n```\r\n{\r\n  &quot;firstName&quot;: &quot;John&quot;,\r\n  &quot;age&quot;: 30,\r\n  &quot;phoneNumber&quot;: {\r\n    &quot;number&quot;: &quot;123-456-7890&quot;\r\n  }\r\n}\r\n```\r\noutput i am getting as\r\n```Person{person_id=8, firstName=&#39;John&#39;, age=30, phoneNumber=PhoneNumber{number=&#39;123-456-7890&#39;, phoneNumberId=8, person=null}}```\r\n\r\ntable should be as below\r\n``` \r\nperson(person_id(pk),name,age)\r\nphonenumber(person_id(pk)(fk refer to person.person_id),number)\r\n```\r\n\r\nhelp me out so that i can learn ahead.","title":"getting null value in nested bidirectional oneToOne relation","body":"<p>I am trying to create two tables person and phonenumber using a model in spring-boot. Person table has an attribute name, age, and person_id where person_id is the primary_key and in the table, phonenumber has an attribute number,person_id where person_id is the primary key and foreign key refers to the person table person_id. and passing the JSON data as a post request to the controller but getting a null value in the phonenumber's person variable of person type.</p>\n<p>below are the codes:-\nperson.java</p>\n<pre><code>package com.BitGeekTalks.JanShayog.model;\n\nimport jakarta.persistence.*;\n\n@Entity\n@Table(name = &quot;person&quot;)\npublic class Person {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;person_id&quot;)\n    private long person_id;\n    @Column(name =&quot;firstname&quot;)\n    private String firstName;\n    @Column(name =&quot;age&quot;)\n    private long age;\n    @OneToOne(mappedBy = &quot;person&quot;,cascade = CascadeType.ALL)\n    private PhoneNumber phoneNumber;\n\n    public Person(String firstName, long age, PhoneNumber phoneNumber) {\n        this.firstName = firstName;\n        this.age = age;\n        this.phoneNumber = phoneNumber;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Person{&quot; +\n                &quot;person_id=&quot; + person_id +\n                &quot;, firstName='&quot; + firstName + '\\'' +\n                &quot;, age=&quot; + age +\n                &quot;, phoneNumber=&quot; + phoneNumber +\n                '}';\n    }\n\n    public Person() {\n    }\n\n    public long getPerson_id() {\n        return person_id;\n    }\n\n    public void setPerson_id(long person_id) {\n        this.person_id = person_id;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public long getAge() {\n        return age;\n    }\n\n    public void setAge(long age) {\n        this.age = age;\n    }\n\n    public PhoneNumber getPhoneNumber() {\n        return phoneNumber;\n    }\n\n    public void setPhoneNumber(PhoneNumber phoneNumber) {\n        this.phoneNumber = phoneNumber;\n    }\n}\n\n</code></pre>\n<p>phonenumber.java</p>\n<pre><code>package com.BitGeekTalks.JanShayog.model;\n\nimport jakarta.persistence.*;\n\n@Entity\n@Table(name = &quot;PhoneNumber&quot;)\npublic class PhoneNumber {\n    @Column(name = &quot;number&quot;)\n    private String number;\n    @Id\n    @Column(name = &quot;phone_number_id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long phoneNumberId;\n    @OneToOne(cascade = CascadeType.ALL,fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;person_id&quot;)\n    private Person person;\n\n\n    public Long getPhoneNumberId() {\n        return phoneNumberId;\n    }\n\n    public void setPhoneNumberId(Long phoneNumberId) {\n        this.phoneNumberId = phoneNumberId;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;PhoneNumber{&quot; +\n                &quot;number='&quot; + number + '\\'' +\n                &quot;, phoneNumberId=&quot; + phoneNumberId +\n                &quot;, person=&quot; + person +\n                '}';\n    }\n\n    public PhoneNumber(String number, Person person) {\n        this.number = number;\n        this.person = person;\n        person.setPhoneNumber(this);\n    }\n\n    public String getNumber() {\n        return number;\n    }\n\n    public void setNumber(String number) {\n        this.number = number;\n    }\n\n    public Person getPerson() {\n        return person;\n    }\n\n    public void setPerson(Person person) {\n        this.person = person;\n    }\n\n    public PhoneNumber() {\n    }\n\n\n}\n\n</code></pre>\n<p>personservice.java</p>\n<pre><code>\nimport com.BitGeekTalks.JanShayog.model.Person;\nimport com.BitGeekTalks.JanShayog.repository.PersonRepo;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class PersonService {\n    @Autowired\n    private PersonRepo personRepo;\n    public Person addPerson(Person person) {\n        return personRepo.save(person);\n    }\n}\n</code></pre>\n<p>personrepo.java</p>\n<pre><code>\nimport com.BitGeekTalks.JanShayog.model.Person;\nimport org.springframework.data.repository.CrudRepository;\n\npublic interface PersonRepo extends CrudRepository&lt;Person,Integer&gt; {\n}\n</code></pre>\n<p>personcontroller.java</p>\n<pre><code>package com.BitGeekTalks.JanShayog.controller;\n\nimport com.BitGeekTalks.JanShayog.model.Person;\nimport com.BitGeekTalks.JanShayog.service.PersonService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(&quot;/api&quot;)\npublic class PersonController {\n\n    @Autowired\n    private PersonService personService;\n    @PostMapping(&quot;/person&quot;)\n    public String addPerson(@RequestBody Person person){\n        //System.out.println(person);\n        Person person1 = personService.addPerson(person);\n        return person1.toString();\n    }\n}\n\n</code></pre>\n<p>json data i am passing</p>\n<pre><code>{\n  &quot;firstName&quot;: &quot;John&quot;,\n  &quot;age&quot;: 30,\n  &quot;phoneNumber&quot;: {\n    &quot;number&quot;: &quot;123-456-7890&quot;\n  }\n}\n</code></pre>\n<p>output i am getting as\n<code>Person{person_id=8, firstName='John', age=30, phoneNumber=PhoneNumber{number='123-456-7890', phoneNumberId=8, person=null}}</code></p>\n<p>table should be as below</p>\n<pre><code>person(person_id(pk),name,age)\nphonenumber(person_id(pk)(fk refer to person.person_id),number)\n</code></pre>\n<p>help me out so that i can learn ahead.</p>\n"},{"tags":["java","rabbitmq","spring-rabbit"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677860659,"creation_date":1677860659,"answer_id":75629560,"question_id":75629476,"body_markdown":"For that purpose you must not use a `@RabbitListener`, but rather a dedicated API for on-demand receive. See `RabbitTemplate`:\r\n\r\n\t/**\r\n\t * Receive a message if there is one from a default queue. Returns immediately,\r\n\t * possibly with a null value.\r\n\t *\r\n\t * @return a message or null if there is none waiting\r\n\t * @throws AmqpException if there is a problem\r\n\t */\r\n\t@Nullable\r\n\tMessage receive() throws AmqpException;\r\n\r\nTo optimize this call for a batch request you may consider to use a scoped operation:\r\n\r\n\t/**\r\n\t * Invoke the callback and run all operations on the template argument in a dedicated\r\n\t * thread-bound channel and reliably close the channel afterwards.\r\n\t * @param action the call back.\r\n\t * @param &lt;T&gt; the return type.\r\n\t * @return the result from the\r\n\t * {@link OperationsCallback#doInRabbit(RabbitOperations operations)}.\r\n\t * @throws AmqpException if one occurs.\r\n\t * @since 2.0\r\n\t */\r\n\t@Nullable\r\n\tdefault &lt;T&gt; T invoke(OperationsCallback&lt;T&gt; action) throws AmqpException {\r\n\r\nSee more in docs: https://docs.spring.io/spring-amqp/reference/html/#amqp-template","title":"How to consume fixed messages per time on RabbitMQ?","body":"<p>For that purpose you must not use a <code>@RabbitListener</code>, but rather a dedicated API for on-demand receive. See <code>RabbitTemplate</code>:</p>\n<pre><code>/**\n * Receive a message if there is one from a default queue. Returns immediately,\n * possibly with a null value.\n *\n * @return a message or null if there is none waiting\n * @throws AmqpException if there is a problem\n */\n@Nullable\nMessage receive() throws AmqpException;\n</code></pre>\n<p>To optimize this call for a batch request you may consider to use a scoped operation:</p>\n<pre><code>/**\n * Invoke the callback and run all operations on the template argument in a dedicated\n * thread-bound channel and reliably close the channel afterwards.\n * @param action the call back.\n * @param &lt;T&gt; the return type.\n * @return the result from the\n * {@link OperationsCallback#doInRabbit(RabbitOperations operations)}.\n * @throws AmqpException if one occurs.\n * @since 2.0\n */\n@Nullable\ndefault &lt;T&gt; T invoke(OperationsCallback&lt;T&gt; action) throws AmqpException {\n</code></pre>\n<p>See more in docs: <a href=\"https://docs.spring.io/spring-amqp/reference/html/#amqp-template\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-amqp/reference/html/#amqp-template</a></p>\n"}],"owner":{"account_id":2706605,"reputation":552,"user_id":2336081,"display_name":"Rafa Acioly"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677860659,"creation_date":1677860179,"question_id":75629476,"body_markdown":"Currently, I&#39;m using the `spring-boot-starter-amqp` module and can use the annotation `@RabbitListener` to read messages on background, How can I consume a fixed number of messages from a queue only when a method is called?\r\n\r\nWhat I&#39;m trying to build is an &quot;on-demand&quot; consumer for a queue, I&#39;ll receive an HTTP request on an endpoint with the number of messages and I want to consume only this amount defined.","title":"How to consume fixed messages per time on RabbitMQ?","body":"<p>Currently, I'm using the <code>spring-boot-starter-amqp</code> module and can use the annotation <code>@RabbitListener</code> to read messages on background, How can I consume a fixed number of messages from a queue only when a method is called?</p>\n<p>What I'm trying to build is an &quot;on-demand&quot; consumer for a queue, I'll receive an HTTP request on an endpoint with the number of messages and I want to consume only this amount defined.</p>\n"},{"tags":["java","io","profiling"],"answers":[{"tags":[],"owner":{"account_id":12145,"reputation":40207,"user_id":23771,"accept_rate":60,"display_name":"Mike Dunlavey"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638371540,"creation_date":1637937191,"answer_id":70126031,"question_id":70125051,"body_markdown":"It&#39;s unconventional but easy. Just do [*this*](https://stackoverflow.com/a/317160/23771).\r\n\r\nIt&#39;s hard to find a profiler that a) works on wall-clock time rather than CPU time, b) samples the call stack, not just the IP, c) takes a small number of samples rather than a large number.\r\n\r\nRemember, your overriding goal is ***locating*** the problem, so you can fix it, not just ***timing*** it but wondering what it is.\r\nThe bigger the problem is, the more likely a random halt will land in it and tell you exactly what it&#39;s doing and why.\r\n\r\nHow big are problems? If a problem takes X% of time, X% is the most you could save by fixing it. So if X is 10% or less, why bother? Supposing X% is bigger than 10%, then every sample has that probability of landing in it. So if you take N samples, the number of times it lands in the problem is N times X% (average).\r\n\r\nHow many samples do you need? Well, if you see the program doing something wasteful on one sample, it&#39;s doubtful that you&#39;ve found it. But if you see it doing the same wasteful thing on ***two*** samples, statistics say you&#39;ve found the problem! And the smaller N is before you see the problem, the bigger it is! Do you know exactly how big it is? No, and you don&#39;t care, because you know it&#39;s big enough to fix. (If you want more information, take more samples. I never take more than 20.) (You can always measure the speedup afterwards, with a simple timer.)\r\n\r\nIs there more than one problem? You bet there is! If you fix one problem, it makes the remaining ones bigger! Example, there could be two problems, problem A costing 50%, and problem B costing 25%. The first time you look, you find problem A, fix it, and now problem B costs 50%, not 25%. Fix both of them, and you&#39;re 4 times faster. (This is the *magnification effect*.)\r\n(If you happen to fix B first, no problem. Now A is 67% of the time.)&lt;br&gt;\r\nMoral: Don&#39;t stop looking and fixing until you fail to find things you can fix.\r\n\r\nWhat typically happens with profilers is they find things that don&#39;t amount to much and/or you can&#39;t fix anyway. Like 5% in some obscure library routine. Does this leave programmers disappointed? NO. It makes them ***happy***, because it seemingly tells them their code is optimal!\r\nIs that a paradox? Yes.\r\nProfilers are popular precisely because they *don&#39;t work!*","title":"How to profile the IO activities triggered by the java process?","body":"<p>It's unconventional but easy. Just do <a href=\"https://stackoverflow.com/a/317160/23771\"><em>this</em></a>.</p>\n<p>It's hard to find a profiler that a) works on wall-clock time rather than CPU time, b) samples the call stack, not just the IP, c) takes a small number of samples rather than a large number.</p>\n<p>Remember, your overriding goal is <em><strong>locating</strong></em> the problem, so you can fix it, not just <em><strong>timing</strong></em> it but wondering what it is.\nThe bigger the problem is, the more likely a random halt will land in it and tell you exactly what it's doing and why.</p>\n<p>How big are problems? If a problem takes X% of time, X% is the most you could save by fixing it. So if X is 10% or less, why bother? Supposing X% is bigger than 10%, then every sample has that probability of landing in it. So if you take N samples, the number of times it lands in the problem is N times X% (average).</p>\n<p>How many samples do you need? Well, if you see the program doing something wasteful on one sample, it's doubtful that you've found it. But if you see it doing the same wasteful thing on <em><strong>two</strong></em> samples, statistics say you've found the problem! And the smaller N is before you see the problem, the bigger it is! Do you know exactly how big it is? No, and you don't care, because you know it's big enough to fix. (If you want more information, take more samples. I never take more than 20.) (You can always measure the speedup afterwards, with a simple timer.)</p>\n<p>Is there more than one problem? You bet there is! If you fix one problem, it makes the remaining ones bigger! Example, there could be two problems, problem A costing 50%, and problem B costing 25%. The first time you look, you find problem A, fix it, and now problem B costs 50%, not 25%. Fix both of them, and you're 4 times faster. (This is the <em>magnification effect</em>.)\n(If you happen to fix B first, no problem. Now A is 67% of the time.)<br>\nMoral: Don't stop looking and fixing until you fail to find things you can fix.</p>\n<p>What typically happens with profilers is they find things that don't amount to much and/or you can't fix anyway. Like 5% in some obscure library routine. Does this leave programmers disappointed? NO. It makes them <em><strong>happy</strong></em>, because it seemingly tells them their code is optimal!\nIs that a paradox? Yes.\nProfilers are popular precisely because they <em>don't work!</em></p>\n"},{"comments":[{"owner":{"account_id":3558883,"reputation":1652,"user_id":2971851,"accept_rate":100,"display_name":"Steven Chou"},"score":0,"creation_date":1677762444,"post_id":70142903,"comment_id":133404144,"body_markdown":"It&#39;s the right answer, but JProfiler is too expensive for individuals. &#128543;","body":"It&#39;s the right answer, but JProfiler is too expensive for individuals. "},{"owner":{"account_id":900581,"reputation":46749,"user_id":936832,"accept_rate":75,"display_name":"Ingo Kegel"},"score":1,"creation_date":1677838763,"post_id":70142903,"comment_id":133420376,"body_markdown":"@StevenChou FYI, we offer academic licenses for personal use as well as open source licenses at no cost","body":"@StevenChou FYI, we offer academic licenses for personal use as well as open source licenses at no cost"}],"tags":[],"owner":{"account_id":900581,"reputation":46749,"user_id":936832,"accept_rate":75,"display_name":"Ingo Kegel"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1638098561,"creation_date":1638098561,"answer_id":70142903,"question_id":70125051,"body_markdown":"&gt;Is there any tool for profiling DISK IO for java?\r\n\r\nSome JVM profilers have probes that deal with file access. [JProfiler][1] for example has a file probe that measures read and write operations for both java.io and java.nio.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nMeasurements are resolved by file:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nFor performance considerations, the hot spots view of the file probe shows which files are responsible for most of the time spent in disk I/O and gives you expandable back traces for each file.\r\n\r\n[![enter image description here][4]][4]\r\n\r\nDisclaimer: My company develops JProfiler\r\n\r\n\r\n  [1]: https://www.ej-technologies.com/products/jprofiler/overview.html\r\n  [2]: https://i.stack.imgur.com/VKFMn.png\r\n  [3]: https://i.stack.imgur.com/8Uwfv.png\r\n  [4]: https://i.stack.imgur.com/BjxnL.png","title":"How to profile the IO activities triggered by the java process?","body":"<blockquote>\n<p>Is there any tool for profiling DISK IO for java?</p>\n</blockquote>\n<p>Some JVM profilers have probes that deal with file access. <a href=\"https://www.ej-technologies.com/products/jprofiler/overview.html\" rel=\"nofollow noreferrer\">JProfiler</a> for example has a file probe that measures read and write operations for both java.io and java.nio.</p>\n<p><a href=\"https://i.stack.imgur.com/VKFMn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VKFMn.png\" alt=\"enter image description here\" /></a></p>\n<p>Measurements are resolved by file:</p>\n<p><a href=\"https://i.stack.imgur.com/8Uwfv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8Uwfv.png\" alt=\"enter image description here\" /></a></p>\n<p>For performance considerations, the hot spots view of the file probe shows which files are responsible for most of the time spent in disk I/O and gives you expandable back traces for each file.</p>\n<p><a href=\"https://i.stack.imgur.com/BjxnL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BjxnL.png\" alt=\"enter image description here\" /></a></p>\n<p>Disclaimer: My company develops JProfiler</p>\n"},{"comments":[{"owner":{"account_id":3558883,"reputation":1652,"user_id":2971851,"accept_rate":100,"display_name":"Steven Chou"},"score":0,"creation_date":1677257399,"post_id":75551236,"comment_id":133308428,"body_markdown":"Actually, the async-profiler is much better for tracking CPU usage than the built-in jstack. It aggregates and sorts the most costly function and its call stacks in your application.","body":"Actually, the async-profiler is much better for tracking CPU usage than the built-in jstack. It aggregates and sorts the most costly function and its call stacks in your application."}],"tags":[],"owner":{"account_id":411202,"reputation":41997,"user_id":783510,"accept_rate":91,"display_name":"Philipp Cla&#223;en"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677193886,"creation_date":1677193886,"answer_id":75551236,"question_id":70125051,"body_markdown":"If your goal is find the bottleneck in your Java application (including IO), I would also suggest to try the &quot;poor man&#39;s profile&quot; technique pointed out already by Mike Dunlavey [in his answer][1]:\r\n\r\n1. Run the application with a realistic workload and take thread dumps.\r\n1. Repeat it a few times until you spot a pattern. (If there is an obvious bottleneck, it is likely that the program gets interrupted during expensive operations.)\r\n\r\nHow can you get a stack trace in Java? If you have the PID of the process, you have two options:\r\n1. Run `kill -3 PID` to make the process print the stack traces on stdout\r\n2. JDK includes a tool called [jstack][2] to get the thread dump: `jstack PID`\r\n\r\nIn my experience, this simple technique is surprisingly powerful and requires no setup. The overhead is also low, so you can use it safely in production.\r\n\r\nIf you are on Linux, an alternative is to use [perf top for live profiling][3]: `sudo perf top` \r\n\r\nperf tends to work better with natively compiled languages such as C++, but if you cannot get anything out of Java thread dumps, it is worth a try. Since perf works on the Kernel level, it can also reveal bottlenecks in IO. Again, the overhead is low, so you can run it in production (with a realistic workload).\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/70126031/783510\r\n  [2]: https://stackoverflow.com/a/4876519/783510\r\n  [3]: https://perf.wiki.kernel.org/index.php/Tutorial#Live_analysis_with_perf_top","title":"How to profile the IO activities triggered by the java process?","body":"<p>If your goal is find the bottleneck in your Java application (including IO), I would also suggest to try the &quot;poor man's profile&quot; technique pointed out already by Mike Dunlavey <a href=\"https://stackoverflow.com/a/70126031/783510\">in his answer</a>:</p>\n<ol>\n<li>Run the application with a realistic workload and take thread dumps.</li>\n<li>Repeat it a few times until you spot a pattern. (If there is an obvious bottleneck, it is likely that the program gets interrupted during expensive operations.)</li>\n</ol>\n<p>How can you get a stack trace in Java? If you have the PID of the process, you have two options:</p>\n<ol>\n<li>Run <code>kill -3 PID</code> to make the process print the stack traces on stdout</li>\n<li>JDK includes a tool called <a href=\"https://stackoverflow.com/a/4876519/783510\">jstack</a> to get the thread dump: <code>jstack PID</code></li>\n</ol>\n<p>In my experience, this simple technique is surprisingly powerful and requires no setup. The overhead is also low, so you can use it safely in production.</p>\n<p>If you are on Linux, an alternative is to use <a href=\"https://perf.wiki.kernel.org/index.php/Tutorial#Live_analysis_with_perf_top\" rel=\"nofollow noreferrer\">perf top for live profiling</a>: <code>sudo perf top</code></p>\n<p>perf tends to work better with natively compiled languages such as C++, but if you cannot get anything out of Java thread dumps, it is worth a try. Since perf works on the Kernel level, it can also reveal bottlenecks in IO. Again, the overhead is low, so you can run it in production (with a realistic workload).</p>\n"},{"tags":[],"owner":{"account_id":124056,"reputation":2936,"user_id":1944458,"accept_rate":25,"display_name":"dspeyer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677860584,"creation_date":1677860584,"answer_id":75629545,"question_id":70125051,"body_markdown":"I&#39;ve had good results with Linux perf.  It can measure all IO activity for time and take stack traces.\r\n\r\nI haven&#39;t used it with java, but I&#39;m reading that if you compile with `-XX:+PreserveFramePointer` the stack traces and symbols will work.","title":"How to profile the IO activities triggered by the java process?","body":"<p>I've had good results with Linux perf.  It can measure all IO activity for time and take stack traces.</p>\n<p>I haven't used it with java, but I'm reading that if you compile with <code>-XX:+PreserveFramePointer</code> the stack traces and symbols will work.</p>\n"}],"owner":{"account_id":3558883,"reputation":1652,"user_id":2971851,"accept_rate":100,"display_name":"Steven Chou"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":474,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":70142903,"answer_count":4,"score":3,"last_activity_date":1677860584,"creation_date":1637932742,"question_id":70125051,"body_markdown":"Currently, I know there are some tools for profiling the CPU/memory for the java process.\r\n\r\nWhen I wanted to track how the java process interacts with IO, I didn&#39;t find any tool for checking the details, especially for which threads/call-stacks, usages, and files.\r\n \r\nThe tools I can use are some OS-level commands like `dstat`.\r\n\r\nIs there any tool for profiling DISK IO for java?","title":"How to profile the IO activities triggered by the java process?","body":"<p>Currently, I know there are some tools for profiling the CPU/memory for the java process.</p>\n<p>When I wanted to track how the java process interacts with IO, I didn't find any tool for checking the details, especially for which threads/call-stacks, usages, and files.</p>\n<p>The tools I can use are some OS-level commands like <code>dstat</code>.</p>\n<p>Is there any tool for profiling DISK IO for java?</p>\n"},{"tags":["java","maven","maven-3","maven-plugin"],"comments":[{"owner":{"account_id":405356,"reputation":31611,"user_id":774183,"accept_rate":78,"display_name":"carlspring"},"score":0,"creation_date":1452006392,"post_id":34529565,"comment_id":56975007,"body_markdown":"Post your mojo&#39;s code as well. Most-likely, your goal is not defined as `convert`.","body":"Post your mojo&#39;s code as well. Most-likely, your goal is not defined as <code>convert</code>."},{"owner":{"account_id":405356,"reputation":31611,"user_id":774183,"accept_rate":78,"display_name":"carlspring"},"score":0,"creation_date":1452186590,"post_id":34529565,"comment_id":57067592,"body_markdown":"Did my answer not work...?","body":"Did my answer not work...?"},{"owner":{"account_id":4112953,"reputation":2266,"user_id":3375325,"accept_rate":71,"display_name":"jansohn"},"score":1,"creation_date":1475243619,"post_id":34529565,"comment_id":66879219,"body_markdown":"Did you find a solution? Having the same problem and I&#39;m out of ideas... My test POM has a `&lt;executions&gt;`section.","body":"Did you find a solution? Having the same problem and I&#39;m out of ideas... My test POM has a <code>&lt;executions&gt;</code>section."},{"owner":{"account_id":1161070,"reputation":4494,"user_id":1631510,"accept_rate":86,"display_name":"danidemi"},"score":0,"creation_date":1489961642,"post_id":34529565,"comment_id":72887058,"body_markdown":"Any solution ? Same problem for me.","body":"Any solution ? Same problem for me."},{"owner":{"account_id":3841249,"reputation":546,"user_id":3184240,"accept_rate":96,"display_name":"MMP"},"score":0,"creation_date":1505960460,"post_id":34529565,"comment_id":79629306,"body_markdown":"https://stackoverflow.com/questions/44009232/nosuchelementexception-thrown-while-testing-maven-plugin?noredirect=1&amp;lq=1","body":"<a href=\"https://stackoverflow.com/questions/44009232/nosuchelementexception-thrown-while-testing-maven-plugin?noredirect=1&amp;lq=1\" title=\"nosuchelementexception thrown while testing maven plugin\">stackoverflow.com/questions/44009232/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":3841249,"reputation":546,"user_id":3184240,"accept_rate":96,"display_name":"MMP"},"score":1,"creation_date":1505958538,"post_id":34614934,"comment_id":79628871,"body_markdown":"This does not work. The same exception is thrown still. Double checked that my goal value matches as well.","body":"This does not work. The same exception is thrown still. Double checked that my goal value matches as well."}],"tags":[],"owner":{"account_id":405356,"reputation":31611,"user_id":774183,"accept_rate":78,"display_name":"carlspring"},"comment_count":1,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1452085354,"creation_date":1452006621,"answer_id":34614934,"question_id":34529565,"body_markdown":"Your test project&#39;s `pom.xml` needs to have the an `&lt;execution/&gt;` section with the respective `&lt;goal/&gt;`:\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0\r\n                                 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        \r\n        &lt;groupId&gt;com.my.utils.test&lt;/groupId&gt;\r\n        &lt;artifactId&gt;project-to-test&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;packaging&gt;jar&lt;/packaging&gt;\r\n        \r\n        &lt;name&gt;Test&lt;/name&gt;\r\n        \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;com.my.utils&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;converter-maven-plugin&lt;/artifactId&gt;\r\n                    \r\n                    &lt;configuration&gt;\r\n                        ...\r\n                    &lt;/configuration&gt;\r\n                    \r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;convert&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nOtherwise, the testing harness will fail to understand what it has to map and load.","title":"org.codehaus.plexus.component.repository.exception.ComponentLookupException: java.util.NoSuchElementException","body":"<p>Your test project's <code>pom.xml</code> needs to have the an <code>&lt;execution/&gt;</code> section with the respective <code>&lt;goal/&gt;</code>:</p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0\n                             http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.my.utils.test&lt;/groupId&gt;\n    &lt;artifactId&gt;project-to-test&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;name&gt;Test&lt;/name&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.my.utils&lt;/groupId&gt;\n                &lt;artifactId&gt;converter-maven-plugin&lt;/artifactId&gt;\n\n                &lt;configuration&gt;\n                    ...\n                &lt;/configuration&gt;\n\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;convert&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>Otherwise, the testing harness will fail to understand what it has to map and load.</p>\n"},{"tags":[],"owner":{"account_id":7921383,"reputation":141,"user_id":5982254,"display_name":"Bobby King"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1516913358,"creation_date":1516913358,"answer_id":48451668,"question_id":34529565,"body_markdown":"I had the same issue, followed all of the advice but still had the issue.  I solved it by clearing out my local repo then doing a mvn clean install -DskipTests from terminal.  Then I ran my jUnit test from Eclipse and it worked.  Must have been a conflicting dependency somewhere.","title":"org.codehaus.plexus.component.repository.exception.ComponentLookupException: java.util.NoSuchElementException","body":"<p>I had the same issue, followed all of the advice but still had the issue.  I solved it by clearing out my local repo then doing a mvn clean install -DskipTests from terminal.  Then I ran my jUnit test from Eclipse and it worked.  Must have been a conflicting dependency somewhere.</p>\n"},{"tags":[],"owner":{"account_id":3333666,"reputation":2544,"user_id":2801909,"accept_rate":33,"display_name":"Vijay Nandwana"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1576657859,"creation_date":1576657859,"answer_id":59388155,"question_id":34529565,"body_markdown":"I was facing this issue in one of the modules that had proper execution configuration with the appropriate goal. I resolved this by simply running `mvn clean install` in that specific module (without deleting anything from the local repo).","title":"org.codehaus.plexus.component.repository.exception.ComponentLookupException: java.util.NoSuchElementException","body":"<p>I was facing this issue in one of the modules that had proper execution configuration with the appropriate goal. I resolved this by simply running <code>mvn clean install</code> in that specific module (without deleting anything from the local repo).</p>\n"},{"tags":[],"owner":{"account_id":19545508,"reputation":11,"user_id":14302409,"display_name":"Shruti Sarda"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1600454356,"creation_date":1600454356,"answer_id":63961148,"question_id":34529565,"body_markdown":"Just update the maven project and mvn clean install. It will work","title":"org.codehaus.plexus.component.repository.exception.ComponentLookupException: java.util.NoSuchElementException","body":"<p>Just update the maven project and mvn clean install. It will work</p>\n"},{"tags":[],"owner":{"account_id":26770476,"reputation":61,"user_id":20366943,"display_name":"DOU ZG"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1670520328,"creation_date":1670520328,"answer_id":74734082,"question_id":34529565,"body_markdown":"open your location \r\n\r\nFile | Settings | Build, Execution, Deployment | Build Tools | Maven \r\n\r\nChange &quot;maven home path:&quot; to Use Maven wrapper here. This is how my problem was solved.[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kbc7q.png","title":"org.codehaus.plexus.component.repository.exception.ComponentLookupException: java.util.NoSuchElementException","body":"<p>open your location</p>\n<p>File | Settings | Build, Execution, Deployment | Build Tools | Maven</p>\n<p>Change &quot;maven home path:&quot; to Use Maven wrapper here. This is how my problem was solved.<a href=\"https://i.stack.imgur.com/kbc7q.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":[],"owner":{"account_id":9421451,"reputation":11,"user_id":7007737,"display_name":"Tocotti"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677860447,"creation_date":1677860447,"answer_id":75629523,"question_id":34529565,"body_markdown":"I had a similar issue working with jmeter maven plugin.\r\nIn my case, because I was using about 15 third part plugins for integration jmeter&lt;-&gt;maven, I had the need to build and install those plugins separately in a local repository, different by default repository of maven: ${user.home}/.m2/repository, and then I had to refer each one of them in pom.xml as dependencies, specifying the repository too.\r\n\r\nDuring the build and the resolving of artifact for each one of them I was facing the issue:  \r\norg.codehaus.plexus.component.repository.exception.ComponentLookupException: java.util.NoSuchElementException . \r\nI solved the issue by deciding to install those third part plugin in default repository too: ${user.home}/.m2/repository, and then specifying the new repository in pom.xml:\r\n\r\n`&lt;repositories&gt;\r\n\r\n    &lt;repository&gt;\r\n\r\n        &lt;id&gt;project-repo&lt;/id&gt;\r\n\r\n        &lt;url&gt;file://C:/Users/myuser/.m2/repository&lt;/url&gt;\r\n\r\n    &lt;/repository&gt;\r\n\r\n&lt;/repositories&gt;`\r\n\r\nThis worked fine to me.","title":"org.codehaus.plexus.component.repository.exception.ComponentLookupException: java.util.NoSuchElementException","body":"<p>I had a similar issue working with jmeter maven plugin.\nIn my case, because I was using about 15 third part plugins for integration jmeter&lt;-&gt;maven, I had the need to build and install those plugins separately in a local repository, different by default repository of maven: ${user.home}/.m2/repository, and then I had to refer each one of them in pom.xml as dependencies, specifying the repository too.</p>\n<p>During the build and the resolving of artifact for each one of them I was facing the issue:<br />\norg.codehaus.plexus.component.repository.exception.ComponentLookupException: java.util.NoSuchElementException .\nI solved the issue by deciding to install those third part plugin in default repository too: ${user.home}/.m2/repository, and then specifying the new repository in pom.xml:</p>\n<p>`</p>\n<pre><code>&lt;repository&gt;\n\n    &lt;id&gt;project-repo&lt;/id&gt;\n\n    &lt;url&gt;file://C:/Users/myuser/.m2/repository&lt;/url&gt;\n\n&lt;/repository&gt;\n</code></pre>\n<p>`</p>\n<p>This worked fine to me.</p>\n"}],"owner":{"account_id":362593,"reputation":6319,"user_id":705869,"accept_rate":77,"display_name":"nKognito"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16586,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":6,"score":8,"last_activity_date":1677860447,"creation_date":1451478444,"question_id":34529565,"body_markdown":"I try to test my maven plugin and receive weird exception. Found similar question [here][1], but the answer didn&#39;t help.\r\n\r\npom.xml\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-plugin-api&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3.9&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-project&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0-alpha-2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.jcabi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jcabi-aether&lt;/artifactId&gt;\r\n            &lt;version&gt;0.10.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugin-tools&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-plugin-annotations&lt;/artifactId&gt;\r\n            &lt;version&gt;3.4&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugin-testing&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-plugin-testing-harness&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3.0&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-aether-provider&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3.9&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-core&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3.9&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-compat&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3.9&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-model&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3.9&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;version&gt;4.12&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\nTest class:\r\n\r\n    public class ConverterMojoTest {\r\n    \r\n        @Rule\r\n        public MojoRule rule = new MojoRule() {\r\n    \r\n            @Override\r\n            protected void before() throws Throwable {\r\n                super.before();\r\n            }\r\n    \r\n            @Override\r\n            protected void after() {\r\n                super.after();\r\n            }\r\n        };\r\n    \r\n        @Rule\r\n        public TestResources resources = new TestResources();\r\n    \r\n    \r\n        @Test\r\n        public void testExecute() throws Exception {\r\n            File project = resources.getBasedir(&quot;valid&quot;);\r\n            File pom = new File(project, &quot;pom.xml&quot;);\r\n            Assert.assertNotNull(pom);\r\n            Assert.assertTrue(pom.exists());\r\n    \r\n            ConverterMojo mojo = (ConverterMojo) rule.lookupMojo(&quot;convert&quot;, pom);\r\n            Assert.assertNotNull(mojo);\r\n            mojo.execute();\r\n        }\r\n    }\r\n\r\nTest project pom.xml:\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;com.my.utils.test&lt;/groupId&gt;\r\n        &lt;artifactId&gt;project-to-test&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;packaging&gt;jar&lt;/packaging&gt;\r\n        &lt;name&gt;Test&lt;/name&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;com.my.utils&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;converter-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;configuration&gt;\r\n                        \r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nException:\r\n\r\n    org.codehaus.plexus.component.repository.exception.ComponentLookupException: java.util.NoSuchElementException\r\n          role: org.apache.maven.plugin.Mojo\r\n      roleHint: com.my.utils:converter-maven-plugin:1.0.0-SNAPSHOT:convert\r\n\r\n  [1]: https://stackoverflow.com/questions/15779351/component-lookup-exception-with-org-apache-maven-repository-repositorysystem-in","title":"org.codehaus.plexus.component.repository.exception.ComponentLookupException: java.util.NoSuchElementException","body":"<p>I try to test my maven plugin and receive weird exception. Found similar question <a href=\"https://stackoverflow.com/questions/15779351/component-lookup-exception-with-org-apache-maven-repository-repositorysystem-in\">here</a>, but the answer didn't help.</p>\n\n<p>pom.xml</p>\n\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-plugin-api&lt;/artifactId&gt;\n        &lt;version&gt;3.3.9&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-project&lt;/artifactId&gt;\n        &lt;version&gt;3.0-alpha-2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.jcabi&lt;/groupId&gt;\n        &lt;artifactId&gt;jcabi-aether&lt;/artifactId&gt;\n        &lt;version&gt;0.10.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.maven.plugin-tools&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-plugin-annotations&lt;/artifactId&gt;\n        &lt;version&gt;3.4&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.maven.plugin-testing&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-plugin-testing-harness&lt;/artifactId&gt;\n        &lt;version&gt;3.3.0&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-aether-provider&lt;/artifactId&gt;\n        &lt;version&gt;3.3.9&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-core&lt;/artifactId&gt;\n        &lt;version&gt;3.3.9&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compat&lt;/artifactId&gt;\n        &lt;version&gt;3.3.9&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-model&lt;/artifactId&gt;\n        &lt;version&gt;3.3.9&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;junit&lt;/groupId&gt;\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\n        &lt;version&gt;4.12&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n\n<p>Test class:</p>\n\n<pre><code>public class ConverterMojoTest {\n\n    @Rule\n    public MojoRule rule = new MojoRule() {\n\n        @Override\n        protected void before() throws Throwable {\n            super.before();\n        }\n\n        @Override\n        protected void after() {\n            super.after();\n        }\n    };\n\n    @Rule\n    public TestResources resources = new TestResources();\n\n\n    @Test\n    public void testExecute() throws Exception {\n        File project = resources.getBasedir(\"valid\");\n        File pom = new File(project, \"pom.xml\");\n        Assert.assertNotNull(pom);\n        Assert.assertTrue(pom.exists());\n\n        ConverterMojo mojo = (ConverterMojo) rule.lookupMojo(\"convert\", pom);\n        Assert.assertNotNull(mojo);\n        mojo.execute();\n    }\n}\n</code></pre>\n\n<p>Test project pom.xml:</p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.my.utils.test&lt;/groupId&gt;\n    &lt;artifactId&gt;project-to-test&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;name&gt;Test&lt;/name&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.my.utils&lt;/groupId&gt;\n                &lt;artifactId&gt;converter-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>Exception:</p>\n\n<pre><code>org.codehaus.plexus.component.repository.exception.ComponentLookupException: java.util.NoSuchElementException\n      role: org.apache.maven.plugin.Mojo\n  roleHint: com.my.utils:converter-maven-plugin:1.0.0-SNAPSHOT:convert\n</code></pre>\n"},{"tags":["java","servlets","aem","sling"],"comments":[{"owner":{"account_id":19726215,"reputation":538,"user_id":14442758,"display_name":"Z-100"},"score":0,"creation_date":1677832201,"post_id":75624750,"comment_id":133418685,"body_markdown":"Please take a look at [ask]. And provide a little bit more information","body":"Please take a look at <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. And provide a little bit more information"},{"owner":{"account_id":70798,"reputation":2030,"user_id":204968,"display_name":"ronnyfm"},"score":0,"creation_date":1678979681,"post_id":75624750,"comment_id":133641375,"body_markdown":"That has to do with a component not with the page, look if one of the components included is missing or using a wrong sling:resourceType","body":"That has to do with a component not with the page, look if one of the components included is missing or using a wrong sling:resourceType"},{"owner":{"account_id":4280077,"reputation":621,"user_id":10399628,"display_name":"e-israel"},"score":0,"creation_date":1686590748,"post_id":75624750,"comment_id":134816671,"body_markdown":"That happens when a bundle is not installed, check all your bundles to detect what&#39;s not working correctly, then fix the dependencies.","body":"That happens when a bundle is not installed, check all your bundles to detect what&#39;s not working correctly, then fix the dependencies."}],"owner":{"account_id":20763740,"reputation":1,"user_id":15248249,"display_name":"Vijitha"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":161,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677860359,"creation_date":1677832113,"question_id":75624750,"body_markdown":"I am  seeing  below error for many of the content pages in logs. \r\n\r\nEnable JSON and Enable XML are selected for  DefaultGetServlet and I am using AEM 6.5 version.\r\n\r\n    GET /content/test/***********.html HTTP/1.1]org.apache.sling.servlets.get.impl.DefaultGetServlet No renderer for extension html, cannot render resource JcrNodeResource, type=nt:unstructured, superType=null, path=/content/******/jcr:content/root/responsivegrid/*****_copy.\r\n\r\nWhile debugging I have observed that nodes are not having `sling:resourceType`. We have the same issue for &quot;n&quot; of nodes in our project. How can we delete these nodes using servlet?\r\n\r\n*For example*: How can I delete text node which does not have `sling:resourceType`.\r\n\r\n    /content\r\n      /company\r\n        /us/en\r\n          /test\r\n            /text","title":"GET /content/test/***********.html HTTP/1.1]org.apache.sling.servlets.get.impl.DefaultGetServlet No renderer for extension html","body":"<p>I am  seeing  below error for many of the content pages in logs.</p>\n<p>Enable JSON and Enable XML are selected for  DefaultGetServlet and I am using AEM 6.5 version.</p>\n<pre><code>GET /content/test/***********.html HTTP/1.1]org.apache.sling.servlets.get.impl.DefaultGetServlet No renderer for extension html, cannot render resource JcrNodeResource, type=nt:unstructured, superType=null, path=/content/******/jcr:content/root/responsivegrid/*****_copy.\n</code></pre>\n<p>While debugging I have observed that nodes are not having <code>sling:resourceType</code>. We have the same issue for &quot;n&quot; of nodes in our project. How can we delete these nodes using servlet?</p>\n<p><em>For example</em>: How can I delete text node which does not have <code>sling:resourceType</code>.</p>\n<pre><code>/content\n  /company\n    /us/en\n      /test\n        /text\n</code></pre>\n"},{"tags":["java","maps","key-value"],"answers":[{"comments":[{"owner":{"account_id":13216928,"reputation":1467,"user_id":9545125,"display_name":"TheStranger"},"score":0,"creation_date":1677843433,"post_id":75626511,"comment_id":133421628,"body_markdown":"I don&#39;t think I agree. I could make a for loop right now that does it. It would just be very messy.. I&#39;m looking for a better solution.","body":"I don&#39;t think I agree. I could make a for loop right now that does it. It would just be very messy.. I&#39;m looking for a better solution."},{"owner":{"account_id":13216928,"reputation":1467,"user_id":9545125,"display_name":"TheStranger"},"score":0,"creation_date":1677843586,"post_id":75626511,"comment_id":133421664,"body_markdown":"The iterator should not create a new map, it should just take elements from `defaultValuesMap` and add them to `myMap` (if the condition is met). that way you only need to iterate through `defaultValuesMap` and `myMap` will be your result..","body":"The iterator should not create a new map, it should just take elements from <code>defaultValuesMap</code> and add them to <code>myMap</code> (if the condition is met). that way you only need to iterate through <code>defaultValuesMap</code> and <code>myMap</code> will be your result.."}],"tags":[],"owner":{"account_id":1726806,"reputation":13951,"user_id":4790924,"accept_rate":67,"display_name":"Sharon Ben Asher"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677843310,"creation_date":1677842858,"answer_id":75626511,"question_id":75626324,"body_markdown":"there is no way to achieve this with iteration on one map. the reason is that the result must include mapping that exists in only one map (either myMap or the default) so iteration on one map will always exclude keys that are present only in the other.\r\n\r\nso first you need to construct a set that includes union of keys from both maps \r\n\r\n\t\tSet&lt;String&gt; unionKeys = new HashSet&lt;&gt;(myMap.keySet());\r\n\t\tunionKeys.addAll(defaultValuesMap.keySet());\r\n\r\nthis set is the basis of the iteration, the value can be taken using the ternary operator from myMap or the default\r\n\r\n\t\tMap&lt;String, String&gt; resultMap = unionKeys.stream()\r\n\t\t\t.collect(Collectors.toMap(\r\n\t\t\t\tFunction.identity(),\r\n\t\t\t\tkey -&gt; myMap.containsKey(key) &amp;&amp; !myMap.get(key).isBlank() ? \r\n\t\t\t\t\tmyMap.get(key) : defaultValuesMap.get(key)\r\n\t\t\t\t)\r\n\t\t\t);\r\n\r\n","title":"How do I add elements from one map to another if it doesn&#39;t exist already or the value is blank?","body":"<p>there is no way to achieve this with iteration on one map. the reason is that the result must include mapping that exists in only one map (either myMap or the default) so iteration on one map will always exclude keys that are present only in the other.</p>\n<p>so first you need to construct a set that includes union of keys from both maps</p>\n<pre><code>    Set&lt;String&gt; unionKeys = new HashSet&lt;&gt;(myMap.keySet());\n    unionKeys.addAll(defaultValuesMap.keySet());\n</code></pre>\n<p>this set is the basis of the iteration, the value can be taken using the ternary operator from myMap or the default</p>\n<pre><code>    Map&lt;String, String&gt; resultMap = unionKeys.stream()\n        .collect(Collectors.toMap(\n            Function.identity(),\n            key -&gt; myMap.containsKey(key) &amp;&amp; !myMap.get(key).isBlank() ? \n                myMap.get(key) : defaultValuesMap.get(key)\n            )\n        );\n</code></pre>\n"},{"comments":[{"owner":{"account_id":13216928,"reputation":1467,"user_id":9545125,"display_name":"TheStranger"},"score":1,"creation_date":1677843735,"post_id":75626625,"comment_id":133421706,"body_markdown":"Yes, you&#39;re absolutely correct. I didn&#39;t know that Map.of returned an unmodifiable map. It works, thank you!","body":"Yes, you&#39;re absolutely correct. I didn&#39;t know that Map.of returned an unmodifiable map. It works, thank you!"}],"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1677860272,"creation_date":1677843600,"answer_id":75626625,"question_id":75626324,"body_markdown":"# Unmodifiable map\r\n\r\n[`Map.of`][1] returns an [unmodifiable map][2], which as the name implies cannot be modified. \r\n\r\nCreate a third result map or if you want to do it in place like in your example, make the second map modifiable. Then you can use `map.compute` to get the desired result:\r\n\r\n    Map&lt;String, String&gt; defaultValuesMap = Map.of(\r\n            &quot;BMW&quot;, &quot;Something&quot;,\r\n            &quot;Audi&quot;, &quot;Something else&quot;,\r\n            &quot;Nissan&quot;, &quot;Something else&quot;);\r\n\r\n    Map&lt;String, String&gt; myMap = new HashMap&lt;&gt;(Map.of(\r\n            &quot;Mercedes&quot;, &quot;Something&quot;,\r\n            &quot;Suzuki&quot;, &quot;Whatever&quot;,\r\n            &quot;Audi&quot;, &quot;Dummy data&quot;,\r\n            &quot;Nissan&quot;, &quot;&quot;));\r\n\r\n    defaultValuesMap.forEach((k,v) -&gt;{\r\n        myMap.compute(k, (k1, prev) -&gt; prev == null || prev.isBlank() ? v : prev);\r\n    });\r\n\r\n    System.out.println(myMap);\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#of(K,V,K,V,K,V)\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#unmodifiable","title":"How do I add elements from one map to another if it doesn&#39;t exist already or the value is blank?","body":"<h1>Unmodifiable map</h1>\n<p><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#of(K,V,K,V,K,V)\" rel=\"nofollow noreferrer\"><code>Map.of</code></a> returns an <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#unmodifiable\" rel=\"nofollow noreferrer\">unmodifiable map</a>, which as the name implies cannot be modified.</p>\n<p>Create a third result map or if you want to do it in place like in your example, make the second map modifiable. Then you can use <code>map.compute</code> to get the desired result:</p>\n<pre><code>Map&lt;String, String&gt; defaultValuesMap = Map.of(\n        &quot;BMW&quot;, &quot;Something&quot;,\n        &quot;Audi&quot;, &quot;Something else&quot;,\n        &quot;Nissan&quot;, &quot;Something else&quot;);\n\nMap&lt;String, String&gt; myMap = new HashMap&lt;&gt;(Map.of(\n        &quot;Mercedes&quot;, &quot;Something&quot;,\n        &quot;Suzuki&quot;, &quot;Whatever&quot;,\n        &quot;Audi&quot;, &quot;Dummy data&quot;,\n        &quot;Nissan&quot;, &quot;&quot;));\n\ndefaultValuesMap.forEach((k,v) -&gt;{\n    myMap.compute(k, (k1, prev) -&gt; prev == null || prev.isBlank() ? v : prev);\n});\n\nSystem.out.println(myMap);\n</code></pre>\n"}],"owner":{"account_id":13216928,"reputation":1467,"user_id":9545125,"display_name":"TheStranger"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":827,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75626625,"answer_count":2,"score":1,"last_activity_date":1677860272,"creation_date":1677841751,"question_id":75626324,"body_markdown":"In my Spring Boot application I have two Maps:\r\n\r\n    Map&lt;String, String&gt; defaultValuesMap = Map.of(\r\n        &quot;BMW&quot;, &quot;Something&quot;,\r\n        &quot;Audi&quot;, &quot;Something else&quot;,\r\n        &quot;Nissan&quot;, &quot;Something else&quot;\r\n    );\r\n\r\n    Map&lt;String, String&gt; myMap = Map.of(\r\n        &quot;Mercedes&quot;, &quot;Something&quot;,\r\n        &quot;Suzuki&quot;, &quot;Whatever&quot;,\r\n        &quot;Audi&quot;, &quot;Dummy data&quot;,\r\n        &quot;Nissan&quot;, &quot;&quot;\r\n    );\r\n\r\nI&#39;m trying to make some logic that takes alle the Entries in `defaultValuesMap` and say if that entry does not exist in `myMap` OR it exists but the value is blank, then replace that key/value pair with the one from `defaultValuesMap`.\r\n\r\nThe result would look like this:\r\n\r\n    Map&lt;String, String&gt; myMap = Map.of(\r\n        &quot;Mercedes&quot;, &quot;Something&quot;,\r\n        &quot;Suzuki&quot;, &quot;Whatever&quot;,\r\n        &quot;Audi&quot;, &quot;Dummy data&quot;,\r\n        &quot;Nissan&quot;, &quot;Something else&quot;,\r\n        &quot;BMW&quot;, &quot;Something&quot;\r\n    );\r\n\r\nI&#39;ve tried something like this:\r\n\r\n    defaultValuesMap.entrySet()\r\n        .stream()\r\n        .map(entry -&gt; {\r\n            if (!myMap.containsKey(entry) || myMap.get(entry).isBlank)\r\n                            myMap.put(\r\n                                    entry.getKey(),\r\n                                    entry.getValue());\r\n                        return entry;\r\n                    });\r\n\r\nThis didn&#39;t work, then I tried to add `collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));` to the end of it but then it just replaced the elements even if they were not missing or blank...\r\n\r\n","title":"How do I add elements from one map to another if it doesn&#39;t exist already or the value is blank?","body":"<p>In my Spring Boot application I have two Maps:</p>\n<pre><code>Map&lt;String, String&gt; defaultValuesMap = Map.of(\n    &quot;BMW&quot;, &quot;Something&quot;,\n    &quot;Audi&quot;, &quot;Something else&quot;,\n    &quot;Nissan&quot;, &quot;Something else&quot;\n);\n\nMap&lt;String, String&gt; myMap = Map.of(\n    &quot;Mercedes&quot;, &quot;Something&quot;,\n    &quot;Suzuki&quot;, &quot;Whatever&quot;,\n    &quot;Audi&quot;, &quot;Dummy data&quot;,\n    &quot;Nissan&quot;, &quot;&quot;\n);\n</code></pre>\n<p>I'm trying to make some logic that takes alle the Entries in <code>defaultValuesMap</code> and say if that entry does not exist in <code>myMap</code> OR it exists but the value is blank, then replace that key/value pair with the one from <code>defaultValuesMap</code>.</p>\n<p>The result would look like this:</p>\n<pre><code>Map&lt;String, String&gt; myMap = Map.of(\n    &quot;Mercedes&quot;, &quot;Something&quot;,\n    &quot;Suzuki&quot;, &quot;Whatever&quot;,\n    &quot;Audi&quot;, &quot;Dummy data&quot;,\n    &quot;Nissan&quot;, &quot;Something else&quot;,\n    &quot;BMW&quot;, &quot;Something&quot;\n);\n</code></pre>\n<p>I've tried something like this:</p>\n<pre><code>defaultValuesMap.entrySet()\n    .stream()\n    .map(entry -&gt; {\n        if (!myMap.containsKey(entry) || myMap.get(entry).isBlank)\n                        myMap.put(\n                                entry.getKey(),\n                                entry.getValue());\n                    return entry;\n                });\n</code></pre>\n<p>This didn't work, then I tried to add <code>collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));</code> to the end of it but then it just replaced the elements even if they were not missing or blank...</p>\n"},{"tags":["java","xml","jaxb","pojo"],"answers":[{"tags":[],"owner":{"account_id":4875529,"reputation":55,"user_id":3930769,"display_name":"Peter Odd"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677859993,"creation_date":1677859993,"answer_id":75629451,"question_id":75625337,"body_markdown":"I managed to solve this issue myself after some more hours, with the help of `@XmlPath` from  [EclipseLink MOXy][1]. I mapped the `&lt;supplement&gt;`-tags to two individual variables.\r\n\r\n``` java \r\n@XmlRootElement(name = &quot;foobar&quot;)\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\npublic class Foobar {\r\n    @XmlAttribute\r\n    private String name;\r\n\r\n    @XmlPath(&quot;supplement[@key=&#39;head&#39;]/text()&quot;)\r\n    private String head;  // maps to XMLs supplement:key=head\r\n\r\n    @XmlPath(&quot;supplement[@key=&#39;body&#39;]/text()&quot;)\r\n    private String body;  // maps to XMLs supplement:key=body\r\n}\r\n```\r\n\r\n\r\nEclipseLink MOXy, maven dependency\r\n``` xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.eclipse.persistence&lt;/groupId&gt;\r\n    &lt;artifactId&gt;org.eclipse.persistence.moxy&lt;/artifactId&gt;\r\n    &lt;version&gt;2.4.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n``` \r\n\r\n\r\n  [1]: https://www.eclipse.org/eclipselink/#moxy","title":"Map XML list / XML elements with different attribute values to separate fields","body":"<p>I managed to solve this issue myself after some more hours, with the help of <code>@XmlPath</code> from  <a href=\"https://www.eclipse.org/eclipselink/#moxy\" rel=\"nofollow noreferrer\">EclipseLink MOXy</a>. I mapped the <code>&lt;supplement&gt;</code>-tags to two individual variables.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@XmlRootElement(name = &quot;foobar&quot;)\n@XmlAccessorType(XmlAccessType.FIELD)\npublic class Foobar {\n    @XmlAttribute\n    private String name;\n\n    @XmlPath(&quot;supplement[@key='head']/text()&quot;)\n    private String head;  // maps to XMLs supplement:key=head\n\n    @XmlPath(&quot;supplement[@key='body']/text()&quot;)\n    private String body;  // maps to XMLs supplement:key=body\n}\n</code></pre>\n<p>EclipseLink MOXy, maven dependency</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.eclipse.persistence&lt;/groupId&gt;\n    &lt;artifactId&gt;org.eclipse.persistence.moxy&lt;/artifactId&gt;\n    &lt;version&gt;2.4.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":4875529,"reputation":55,"user_id":3930769,"display_name":"Peter Odd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":290,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75629451,"answer_count":1,"score":0,"last_activity_date":1677859993,"creation_date":1677835899,"question_id":75625337,"body_markdown":"I have an XML file that looks like this:\r\n\r\n**XML file:**\r\n``` xml\r\n&lt;foobar name=&quot;quux&quot;&gt;\r\n    &lt;supplement key=&quot;head&quot;&gt;this is a text row&lt;/supplement&gt;\r\n    &lt;supplement key=&quot;body&quot;&gt;this is some other text row&lt;/supplement&gt;\r\n&lt;/foobar&gt;\r\n```\r\n\r\nI would like to have `&lt;supplement&gt;` mapped to two separate variables; `head` and `body`.\r\n\r\n**Java POJO:**\r\n``` java\r\n@XmlRootElement(name = &quot;foobar&quot;)\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\npublic class Foobar {\r\n    @XmlAttribute\r\n    private String name;\r\n\r\n    private String head;  // should be mapped to XMLs supplement:key=head\r\n\r\n    private String body;  // should be mapped to XMLs supplement:key=body\r\n}\r\n```\r\n\r\nCan this be done? If so how?\r\n\r\n\r\nAnother doable solution would be to have both `&lt;supplement&gt;`-tags added to a `HashMap&lt;String, String&gt;`, where the `key`-value is used as index, but I have failed to do this unfortunately.\r\n\r\n\r\n\r\nAs a workaround I have a solution to map `&lt;supplement&gt;` as a list, using:\r\n\r\n``` java\r\n@XmlElement(name = &quot;supplement&quot;)\r\nprivate List&lt;NewSupplement&gt; supplements = new ArrayList&lt;&gt;();\r\n```\r\n\r\nThe problem with this solution is that list index value is decided by the order of `&lt;supplement&gt;`-tags in the XML file, ie. if `key=&quot;head&quot;` comes first in the XML file this is added to index 0 but if `key=&quot;body&quot;` comes first that is added to index 0, which might cause me some problems / unnecessary headache.\r\n\r\nI would rather have the first solution (or a HashMap) if that is doable.\r\nAny suggestions?","title":"Map XML list / XML elements with different attribute values to separate fields","body":"<p>I have an XML file that looks like this:</p>\n<p><strong>XML file:</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;foobar name=&quot;quux&quot;&gt;\n    &lt;supplement key=&quot;head&quot;&gt;this is a text row&lt;/supplement&gt;\n    &lt;supplement key=&quot;body&quot;&gt;this is some other text row&lt;/supplement&gt;\n&lt;/foobar&gt;\n</code></pre>\n<p>I would like to have <code>&lt;supplement&gt;</code> mapped to two separate variables; <code>head</code> and <code>body</code>.</p>\n<p><strong>Java POJO:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@XmlRootElement(name = &quot;foobar&quot;)\n@XmlAccessorType(XmlAccessType.FIELD)\npublic class Foobar {\n    @XmlAttribute\n    private String name;\n\n    private String head;  // should be mapped to XMLs supplement:key=head\n\n    private String body;  // should be mapped to XMLs supplement:key=body\n}\n</code></pre>\n<p>Can this be done? If so how?</p>\n<p>Another doable solution would be to have both <code>&lt;supplement&gt;</code>-tags added to a <code>HashMap&lt;String, String&gt;</code>, where the <code>key</code>-value is used as index, but I have failed to do this unfortunately.</p>\n<p>As a workaround I have a solution to map <code>&lt;supplement&gt;</code> as a list, using:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@XmlElement(name = &quot;supplement&quot;)\nprivate List&lt;NewSupplement&gt; supplements = new ArrayList&lt;&gt;();\n</code></pre>\n<p>The problem with this solution is that list index value is decided by the order of <code>&lt;supplement&gt;</code>-tags in the XML file, ie. if <code>key=&quot;head&quot;</code> comes first in the XML file this is added to index 0 but if <code>key=&quot;body&quot;</code> comes first that is added to index 0, which might cause me some problems / unnecessary headache.</p>\n<p>I would rather have the first solution (or a HashMap) if that is doable.\nAny suggestions?</p>\n"},{"tags":["java","amazon-web-services","amazon-s3","google-cloud-storage"],"comments":[{"owner":{"account_id":100740,"reputation":73227,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1677860004,"post_id":75629162,"comment_id":133426460,"body_markdown":"Maybe report a bug or raise a support ticket with Google Cloud. It will probably depend on their definition of &quot;S3 compatibility&quot;.","body":"Maybe report a bug or raise a support ticket with Google Cloud. It will probably depend on their definition of &quot;S3 compatibility&quot;."},{"owner":{"account_id":7783745,"reputation":29,"user_id":5889351,"display_name":"Dave Breeze"},"score":0,"creation_date":1677920691,"post_id":75629162,"comment_id":133435626,"body_markdown":"Thanks for the response -  I have opened ticket 271559073 with Google","body":"Thanks for the response -  I have opened ticket 271559073 with Google"},{"owner":{"account_id":7783745,"reputation":29,"user_id":5889351,"display_name":"Dave Breeze"},"score":0,"creation_date":1700662924,"post_id":75629162,"comment_id":136682217,"body_markdown":"Have yet to receuve a resokution to the case opened against Google COS. I would question the commitment of Google to AWS compatibilty","body":"Have yet to receuve a resokution to the case opened against Google COS. I would question the commitment of Google to AWS compatibilty"}],"owner":{"account_id":7783745,"reputation":29,"user_id":5889351,"display_name":"Dave Breeze"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677859936,"creation_date":1677858314,"question_id":75629162,"body_markdown":"I am using the AWS S3 SDK to upload objects to various s3 providers. The uploads are multi-part. On completion of an upload if the bucket is configured for versioning then my expectation is that CompleteMultipartUploadResult will contain the versionId. This expectation does not hold true when the s3 provider is Google. All other tested providers return a valid version-id. \r\n\r\nFurther if I issue a ListVersionsRequest() and iterate through the version summaries then for non Google buckets I retrieve the versions as expected BUT for Google the versionSummary is empty.\r\n\r\nAny advice on how to obtain versionIds using AWS on Google platform - Thanks\r\n\r\nSimplified sample code:\r\n\r\n\r\n```\r\nCompleteMultipartUploadResult result = s3Client.completeMultipartUpload(completeRequest);\r\n\t\t\t\r\nexpiration = result.getExpirationTime();\r\nversionid = result.getVersionId();\r\n \r\nListVersionsRequest versionRequest = new ListVersionsRequest();\r\nversionRequest.setBucketName(destBucketName);\r\n\r\nVersionListing versionListing = null;            \r\ndo {\r\n        versionListing = s3Client.listVersions(versionRequest);\r\n        for (S3VersionSummary versionSummary:versionListing.getVersionSummaries())\r\n        {\r\n        \tlog.debug(&quot;key:&quot; + versionSummary.getKey() +\r\n\t\t                    &quot; size:&quot; + versionSummary.getSize() + \r\n\t\t                    &quot; date:&quot; + versionSummary.getLastModified() +\r\n\t\t                    &quot; latest:&quot; + versionSummary.isLatest() +\r\n\t\t                    &quot; versionID:&quot; + versionSummary.getVersionId() + &quot;)&quot;);\r\n\r\n        }\r\n        versionRequest.setKeyMarker(versionListing.getNextKeyMarker());\r\n\tversionRequest.setVersionIdMarker(versionListing.getNextVersionIdMarker());\r\n    } while (versionListing.isTruncated()); `\r\n```\r\nUsing the Google web interface I can see the versions in the buckets - confirming that versioning is enabled and being actioned but I cannot retrieve versioning information programatically","title":"Java using AWS SDK with S3 object versions","body":"<p>I am using the AWS S3 SDK to upload objects to various s3 providers. The uploads are multi-part. On completion of an upload if the bucket is configured for versioning then my expectation is that CompleteMultipartUploadResult will contain the versionId. This expectation does not hold true when the s3 provider is Google. All other tested providers return a valid version-id.</p>\n<p>Further if I issue a ListVersionsRequest() and iterate through the version summaries then for non Google buckets I retrieve the versions as expected BUT for Google the versionSummary is empty.</p>\n<p>Any advice on how to obtain versionIds using AWS on Google platform - Thanks</p>\n<p>Simplified sample code:</p>\n<pre><code>CompleteMultipartUploadResult result = s3Client.completeMultipartUpload(completeRequest);\n            \nexpiration = result.getExpirationTime();\nversionid = result.getVersionId();\n \nListVersionsRequest versionRequest = new ListVersionsRequest();\nversionRequest.setBucketName(destBucketName);\n\nVersionListing versionListing = null;            \ndo {\n        versionListing = s3Client.listVersions(versionRequest);\n        for (S3VersionSummary versionSummary:versionListing.getVersionSummaries())\n        {\n            log.debug(&quot;key:&quot; + versionSummary.getKey() +\n                            &quot; size:&quot; + versionSummary.getSize() + \n                            &quot; date:&quot; + versionSummary.getLastModified() +\n                            &quot; latest:&quot; + versionSummary.isLatest() +\n                            &quot; versionID:&quot; + versionSummary.getVersionId() + &quot;)&quot;);\n\n        }\n        versionRequest.setKeyMarker(versionListing.getNextKeyMarker());\n    versionRequest.setVersionIdMarker(versionListing.getNextVersionIdMarker());\n    } while (versionListing.isTruncated()); `\n</code></pre>\n<p>Using the Google web interface I can see the versions in the buckets - confirming that versioning is enabled and being actioned but I cannot retrieve versioning information programatically</p>\n"},{"tags":["java","spring-boot","redis","cucumber","lettuce"],"comments":[{"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"score":0,"creation_date":1678312319,"post_id":75629442,"comment_id":133510473,"body_markdown":"can you https://stackoverflow.com/help/minimal-reproducible-example ?","body":"can you <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a> ?"}],"owner":{"account_id":1050519,"reputation":348,"user_id":1054592,"accept_rate":85,"display_name":"Chinmay"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":426,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677859924,"creation_date":1677859924,"question_id":75629442,"body_markdown":"I had used following tutorial to integrate Redis using Lettuce connection in my springboot application. \r\nhttps://blog.tericcabrel.com/data-caching-spring-boot-redis/\r\n\r\nThe good thing about the above approach is I was able to define my own repository methods. Also, was able to set and get my own Objects. That`s what I did  - for a key &quot;id&quot; I set hashmap object as value. I was able to perform a get on &#39;id&#39; and get the object too. \r\n\r\nNow, I am trying to write some integration tests using cucumber - here I cannot create beans so I am using following way to do it - \r\n\r\n        RedisClient redisClient = RedisClient.create(\r\n                    new RedisURI(&quot;myRedisCluster.com&quot;,\r\n                            6379,\r\n                            30,\r\n                            TimeUnit.SECONDS));\r\n    \r\n    StatefulRedisConnection&lt;String, Object&gt; connect = RedisClient.create(new RedisURI(&quot;myRedisCLuster.com&quot;, 6379, 30, TimeUnit.SECONDS)).connect(\r\n                    new RedisCodec&lt;String, Object&gt;() {\r\n                        private Charset charset = Charset.forName(&quot;UTF-8&quot;);\r\n    \r\n                        public String decodeKey(ByteBuffer bytes) {\r\n                            return charset.decode(bytes).toString();\r\n                        }\r\n                        public Object decodeValue(ByteBuffer bytes) {\r\n                            try {\r\n                                byte[] array = new byte[bytes.remaining()];\r\n                                bytes.get(array);\r\n                                ObjectInputStream is = new ObjectInputStream(new ByteArrayInputStream(array));\r\n                                return is.readObject();\r\n                            } catch (Exception e) {\r\n                                return null;\r\n                            }\r\n                        }\r\n                        public ByteBuffer encodeKey(String key) {\r\n                            return charset.encode(key);\r\n                        }\r\n                        public ByteBuffer encodeValue(Object value) {\r\n                            try {\r\n                                ByteArrayOutputStream bytes = new ByteArrayOutputStream();\r\n                                ObjectOutputStream os = new ObjectOutputStream(bytes);\r\n                                os.writeObject(value);\r\n                                return ByteBuffer.wrap(bytes.toByteArray());\r\n                            } catch (IOException e) {\r\n                                return null;\r\n                            }\r\n                        }\r\n                    }\r\n            );\r\n    \r\n            RedisCommands&lt;String, Object&gt; commands = connect.sync();\r\n    \r\n            final Object result = commands.get(Id);\r\n            HashMap&lt;String, String&gt; cacheAccountWalletMap = (HashMap&lt;String, String&gt;) result;\r\n\r\nThe above code can connect to my redis cluster, but get command yeilds Null. I tried simpler way without the serializers and decoders but still I get null back. \r\n\r\nWhat can I do to get it right ?","title":"Redis Lettuce - get object data","body":"<p>I had used following tutorial to integrate Redis using Lettuce connection in my springboot application.\n<a href=\"https://blog.tericcabrel.com/data-caching-spring-boot-redis/\" rel=\"nofollow noreferrer\">https://blog.tericcabrel.com/data-caching-spring-boot-redis/</a></p>\n<p>The good thing about the above approach is I was able to define my own repository methods. Also, was able to set and get my own Objects. That`s what I did  - for a key &quot;id&quot; I set hashmap object as value. I was able to perform a get on 'id' and get the object too.</p>\n<p>Now, I am trying to write some integration tests using cucumber - here I cannot create beans so I am using following way to do it -</p>\n<pre><code>    RedisClient redisClient = RedisClient.create(\n                new RedisURI(&quot;myRedisCluster.com&quot;,\n                        6379,\n                        30,\n                        TimeUnit.SECONDS));\n\nStatefulRedisConnection&lt;String, Object&gt; connect = RedisClient.create(new RedisURI(&quot;myRedisCLuster.com&quot;, 6379, 30, TimeUnit.SECONDS)).connect(\n                new RedisCodec&lt;String, Object&gt;() {\n                    private Charset charset = Charset.forName(&quot;UTF-8&quot;);\n\n                    public String decodeKey(ByteBuffer bytes) {\n                        return charset.decode(bytes).toString();\n                    }\n                    public Object decodeValue(ByteBuffer bytes) {\n                        try {\n                            byte[] array = new byte[bytes.remaining()];\n                            bytes.get(array);\n                            ObjectInputStream is = new ObjectInputStream(new ByteArrayInputStream(array));\n                            return is.readObject();\n                        } catch (Exception e) {\n                            return null;\n                        }\n                    }\n                    public ByteBuffer encodeKey(String key) {\n                        return charset.encode(key);\n                    }\n                    public ByteBuffer encodeValue(Object value) {\n                        try {\n                            ByteArrayOutputStream bytes = new ByteArrayOutputStream();\n                            ObjectOutputStream os = new ObjectOutputStream(bytes);\n                            os.writeObject(value);\n                            return ByteBuffer.wrap(bytes.toByteArray());\n                        } catch (IOException e) {\n                            return null;\n                        }\n                    }\n                }\n        );\n\n        RedisCommands&lt;String, Object&gt; commands = connect.sync();\n\n        final Object result = commands.get(Id);\n        HashMap&lt;String, String&gt; cacheAccountWalletMap = (HashMap&lt;String, String&gt;) result;\n</code></pre>\n<p>The above code can connect to my redis cluster, but get command yeilds Null. I tried simpler way without the serializers and decoders but still I get null back.</p>\n<p>What can I do to get it right ?</p>\n"},{"tags":["java","ftp"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":1,"creation_date":1677840396,"post_id":75625871,"comment_id":133420828,"body_markdown":"filter the list? what&#39;s the problem _exactly_, don&#39;t see you trying _anything_. ..","body":"filter the list? what&#39;s the problem <i>exactly</i>, don&#39;t see you trying <i>anything</i>. .."}],"answers":[{"comments":[{"owner":{"account_id":9059972,"reputation":3080,"user_id":6746785,"display_name":"gthanop"},"score":1,"creation_date":1677859152,"post_id":75626930,"comment_id":133426210,"body_markdown":"Did you mean `pattern.matcher(file.getName()).matches()`?","body":"Did you mean <code>pattern.matcher(file.getName()).matches()</code>?"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":1,"creation_date":1677859722,"post_id":75626930,"comment_id":133426371,"body_markdown":"Yeah, thanks. I switched from a block implementation to an expression and something got mixed up. I&#39;ve fixed it.","body":"Yeah, thanks. I switched from a block implementation to an expression and something got mixed up. I&#39;ve fixed it."}],"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677859689,"creation_date":1677845566,"answer_id":75626930,"question_id":75625871,"body_markdown":"`listFiles` is overloaded to accept an optional `FTPFileFilter`. This is an interface with a single method, so you can use a lambda for the implementation. For instance:\r\n\r\n```\r\nPattern pattern = Pattern.compile(&quot;whatever you need&quot;);\r\nFTPFile[] remoteFiles = ftpClient.listFiles(remotePath,\r\n        file -&gt; pattern.matcher(file.getName()).matches());\r\n```","title":"Downloading specific files(regex specific files) from FTP folder using java","body":"<p><code>listFiles</code> is overloaded to accept an optional <code>FTPFileFilter</code>. This is an interface with a single method, so you can use a lambda for the implementation. For instance:</p>\n<pre><code>Pattern pattern = Pattern.compile(&quot;whatever you need&quot;);\nFTPFile[] remoteFiles = ftpClient.listFiles(remotePath,\n        file -&gt; pattern.matcher(file.getName()).matches());\n</code></pre>\n"}],"owner":{"account_id":17850963,"reputation":27,"user_id":12966727,"display_name":"TheUnborn"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1677876156,"answer_count":1,"score":0,"last_activity_date":1677859689,"creation_date":1677839139,"question_id":75625871,"body_markdown":"I am  trying to download files from FTP folder using java but I want to download certain files not all the files. How to add the regex to the code to download the files. \r\n\r\n\r\nright now I am able to download all the files from FTP location. I want to add regex so it downloads specific files.\r\n\r\n\r\n```\r\nprivate static void downloadFolder(\r\n    FTPClient ftpClient, String remotePath, String localPath) throws IOException\r\n{\r\n    System.out.println(&quot;Downloading folder &quot; + remotePath + &quot; to &quot; + localPath);\r\n\r\n    FTPFile[] remoteFiles = ftpClient.listFiles(remotePath);\r\n\r\n    for (FTPFile remoteFile : remoteFiles)\r\n    {\r\n        if (!remoteFile.getName().equals(&quot;.&quot;) &amp;&amp; !remoteFile.getName().equals(&quot;..&quot;))\r\n        {\r\n            String remoteFilePath = remotePath + &quot;/&quot; + remoteFile.getName();\r\n            String localFilePath = localPath + &quot;/&quot; + remoteFile.getName();\r\n\r\n            if (remoteFile.isDirectory())\r\n            {\r\n                new File(localFilePath).mkdirs();\r\n\r\n                downloadFolder(ftpClient, remoteFilePath, localFilePath);\r\n            }\r\n            else\r\n            {\r\n                System.out.println(&quot;Downloading file &quot; + remoteFilePath + &quot; to &quot; +\r\n                    localFilePath);\r\n\r\n                OutputStream outputStream =\r\n                    new BufferedOutputStream(new FileOutputStream(localFilePath));\r\n                if (!ftpClient.retrieveFile(remoteFilePath, outputStream))\r\n                {\r\n                    System.out.println(&quot;Failed to download file &quot; + remoteFilePath);\r\n                }\r\n                outputStream.close();\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n","title":"Downloading specific files(regex specific files) from FTP folder using java","body":"<p>I am  trying to download files from FTP folder using java but I want to download certain files not all the files. How to add the regex to the code to download the files.</p>\n<p>right now I am able to download all the files from FTP location. I want to add regex so it downloads specific files.</p>\n<pre><code>private static void downloadFolder(\n    FTPClient ftpClient, String remotePath, String localPath) throws IOException\n{\n    System.out.println(&quot;Downloading folder &quot; + remotePath + &quot; to &quot; + localPath);\n\n    FTPFile[] remoteFiles = ftpClient.listFiles(remotePath);\n\n    for (FTPFile remoteFile : remoteFiles)\n    {\n        if (!remoteFile.getName().equals(&quot;.&quot;) &amp;&amp; !remoteFile.getName().equals(&quot;..&quot;))\n        {\n            String remoteFilePath = remotePath + &quot;/&quot; + remoteFile.getName();\n            String localFilePath = localPath + &quot;/&quot; + remoteFile.getName();\n\n            if (remoteFile.isDirectory())\n            {\n                new File(localFilePath).mkdirs();\n\n                downloadFolder(ftpClient, remoteFilePath, localFilePath);\n            }\n            else\n            {\n                System.out.println(&quot;Downloading file &quot; + remoteFilePath + &quot; to &quot; +\n                    localFilePath);\n\n                OutputStream outputStream =\n                    new BufferedOutputStream(new FileOutputStream(localFilePath));\n                if (!ftpClient.retrieveFile(remoteFilePath, outputStream))\n                {\n                    System.out.println(&quot;Failed to download file &quot; + remoteFilePath);\n                }\n                outputStream.close();\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","jenkins","groovy","jenkins-groovy"],"comments":[{"owner":{"account_id":1333316,"reputation":26958,"user_id":1276664,"accept_rate":17,"display_name":"daggett"},"score":0,"creation_date":1677849572,"post_id":75627065,"comment_id":133423193,"body_markdown":"It&#39;s not clear what is not working and what is the expected result... Please edit your question and add details.","body":"It&#39;s not clear what is not working and what is the expected result... Please edit your question and add details."}],"answers":[{"comments":[{"owner":{"account_id":19313347,"reputation":87,"user_id":14118611,"display_name":"Angelo Uitz"},"score":0,"creation_date":1677848390,"post_id":75627300,"comment_id":133422860,"body_markdown":"The point is, that I need to search through the list again to see if there is another entry starting with the same numbers. \n\nSo when splitting as suggested I get [, 3, 0, 0] in case of each_version = Version-2.3.0.0\nNow I need to check if there is another entry in the list matching with Version-2.3.[1-9].0","body":"The point is, that I need to search through the list again to see if there is another entry starting with the same numbers.   So when splitting as suggested I get [, 3, 0, 0] in case of each_version = Version-2.3.0.0 Now I need to check if there is another entry in the list matching with Version-2.3.[1-9].0"},{"owner":{"account_id":4395013,"reputation":1126,"user_id":3582362,"accept_rate":100,"display_name":"Calvin P."},"score":0,"creation_date":1677860182,"post_id":75627300,"comment_id":133426510,"body_markdown":"@AngeloUitz I updated my answer with a new solution. I was having some issues trying to use your regex string, so I expanded it to evaluate the whole string.","body":"@AngeloUitz I updated my answer with a new solution. I was having some issues trying to use your regex string, so I expanded it to evaluate the whole string."}],"tags":[],"owner":{"account_id":4395013,"reputation":1126,"user_id":3582362,"accept_rate":100,"display_name":"Calvin P."},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677859318,"creation_date":1677847802,"answer_id":75627300,"question_id":75627065,"body_markdown":"I believe you&#39;re going for something like this\r\n\r\n    //example list\r\n    def version_list = [&quot;Version-2.2.0.0&quot;,&quot;Version-2.2.1.0&quot;,&quot;Version-2.1.1.0&quot;,&quot;Version-2.1.0.0&quot;,&quot;Version-2.3.0.0&quot;]\r\n    //group by version first 2 digits\r\n    def ver_map = version_list.groupBy{ ver -&gt; ver.substring(8,11) }\r\n\r\n    ver_map.each{ k, v -&gt;\r\n        //prints the lowest (root) version in each set, \r\n        //then determines if any has point version\r\n        println new StringBuilder().append(v.min{it}).append(&quot; &quot;).append(v.any{ \r\n            it.matches(&quot;^Version\\\\-([0-9])\\\\.([0-9])\\\\.([1-9])\\\\.([0-9])\\$&quot;)} \r\n                ? &quot;has a point release!&quot; : &quot;has no point release&quot;)}\r\n\r\nIn this example, prints out\r\n\r\n    Version-2.2.0.0 has a point release!\r\n    Version-2.1.0.0 has a point release!\r\n    Version-2.3.0.0 has no point release","title":"String filtering","body":"<p>I believe you're going for something like this</p>\n<pre><code>//example list\ndef version_list = [&quot;Version-2.2.0.0&quot;,&quot;Version-2.2.1.0&quot;,&quot;Version-2.1.1.0&quot;,&quot;Version-2.1.0.0&quot;,&quot;Version-2.3.0.0&quot;]\n//group by version first 2 digits\ndef ver_map = version_list.groupBy{ ver -&gt; ver.substring(8,11) }\n\nver_map.each{ k, v -&gt;\n    //prints the lowest (root) version in each set, \n    //then determines if any has point version\n    println new StringBuilder().append(v.min{it}).append(&quot; &quot;).append(v.any{ \n        it.matches(&quot;^Version\\\\-([0-9])\\\\.([0-9])\\\\.([1-9])\\\\.([0-9])\\$&quot;)} \n            ? &quot;has a point release!&quot; : &quot;has no point release&quot;)}\n</code></pre>\n<p>In this example, prints out</p>\n<pre><code>Version-2.2.0.0 has a point release!\nVersion-2.1.0.0 has a point release!\nVersion-2.3.0.0 has no point release\n</code></pre>\n"}],"owner":{"account_id":19313347,"reputation":87,"user_id":14118611,"display_name":"Angelo Uitz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1677923595,"accepted_answer_id":75627300,"answer_count":1,"score":1,"last_activity_date":1677859318,"creation_date":1677846440,"question_id":75627065,"body_markdown":"I have a Java like Groovy script, using for Jenkins Pipelines. \r\n\r\nIn there I have the following scenario. \r\nThere&#39;s a ArrayList with Strings, specifying versions of a script, such as:\r\n\r\n    def version_list = [] as ArrayList&lt;String&gt;\r\n    -&gt; [Version-2.5.0.0, Version-2.4.0.0, Version-2.3.1.0, Version-2.3.0.0, Version-2.0.0.0]\r\n    \r\nThis list is fixed and cannot be modified.\r\nI am iterating over the list to get each element, to do some processing.\r\n\r\nAdditionally I need to check for each element, if there is a point release of the same version i.e.:\r\n\r\n       version_list.each{each_version -&gt; //each_version = Version-2.3.0.0\r\n                        if(version_list.contains(2.3.x.0)){ //while x!=0\r\n                           print(&quot;Version &quot; + each_version + &quot;has point_release&quot;)\r\n                        }\r\n                    }\r\n\r\nI already tried the following, but this is not working. \r\n\r\n     def version_list = [] as ArrayList&lt;String&gt;\r\n     def splitted_ver = [] as ArrayList&lt;String&gt;\r\n     \r\n     version_list.each{each_version -&gt;\r\n                            splitted_ver = each_version.split(&quot;\\\\.&quot;)\r\n                            if (version_list.contains(&quot;^&quot; + splitted_ver[0] + &quot;.&quot; +  splitted_ver[1] + &quot;(.([1-9]+)\\\\.([0-9]+)\\$)&quot;)){\r\n                                print(each_version + &quot; has a point_release!&quot;)   \r\n                            }else{\r\n                                print(&quot;has no point_release&quot;)\r\n                            }\r\n                        }\r\n","title":"String filtering","body":"<p>I have a Java like Groovy script, using for Jenkins Pipelines.</p>\n<p>In there I have the following scenario.\nThere's a ArrayList with Strings, specifying versions of a script, such as:</p>\n<pre><code>def version_list = [] as ArrayList&lt;String&gt;\n-&gt; [Version-2.5.0.0, Version-2.4.0.0, Version-2.3.1.0, Version-2.3.0.0, Version-2.0.0.0]\n</code></pre>\n<p>This list is fixed and cannot be modified.\nI am iterating over the list to get each element, to do some processing.</p>\n<p>Additionally I need to check for each element, if there is a point release of the same version i.e.:</p>\n<pre><code>   version_list.each{each_version -&gt; //each_version = Version-2.3.0.0\n                    if(version_list.contains(2.3.x.0)){ //while x!=0\n                       print(&quot;Version &quot; + each_version + &quot;has point_release&quot;)\n                    }\n                }\n</code></pre>\n<p>I already tried the following, but this is not working.</p>\n<pre><code> def version_list = [] as ArrayList&lt;String&gt;\n def splitted_ver = [] as ArrayList&lt;String&gt;\n \n version_list.each{each_version -&gt;\n                        splitted_ver = each_version.split(&quot;\\\\.&quot;)\n                        if (version_list.contains(&quot;^&quot; + splitted_ver[0] + &quot;.&quot; +  splitted_ver[1] + &quot;(.([1-9]+)\\\\.([0-9]+)\\$)&quot;)){\n                            print(each_version + &quot; has a point_release!&quot;)   \n                        }else{\n                            print(&quot;has no point_release&quot;)\n                        }\n                    }\n</code></pre>\n"},{"tags":["java","spring","configuration","redis"],"comments":[{"owner":{"account_id":3505777,"reputation":1260,"user_id":2931342,"accept_rate":75,"display_name":"Shrikant Havale"},"score":0,"creation_date":1449840719,"post_id":34201135,"comment_id":56193387,"body_markdown":"currently doing by using `@Value` annotation, any better suggestions","body":"currently doing by using <code>@Value</code> annotation, any better suggestions"}],"answers":[{"comments":[{"owner":{"account_id":3505777,"reputation":1260,"user_id":2931342,"accept_rate":75,"display_name":"Shrikant Havale"},"score":0,"creation_date":1450532656,"post_id":34329008,"comment_id":56484493,"body_markdown":"Thank you for answering, this is the approach I was using before I asked this question. But let me give an example, `spring-boot-starter-data-jpa`, here if  you want to configure data source, you simply have to set `spring.datasource.url` property and spring does its magic. And because its one of the standard application properties (https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html). We don&#39;t have to write any specific logic for reading that, then there should be some way to do this for Redis as well, may be by the way beans are created.","body":"Thank you for answering, this is the approach I was using before I asked this question. But let me give an example, <code>spring-boot-starter-data-jpa</code>, here if  you want to configure data source, you simply have to set <code>spring.datasource.url</code> property and spring does its magic. And because its one of the standard application properties (<a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/html/&hellip;</a>). We don&#39;t have to write any specific logic for reading that, then there should be some way to do this for Redis as well, may be by the way beans are created."},{"owner":{"account_id":3572434,"reputation":6241,"user_id":2982437,"accept_rate":59,"display_name":"Nick Bondarenko"},"score":0,"creation_date":1450698353,"post_id":34329008,"comment_id":56531036,"body_markdown":"Yes, i understand. But the sentinel properties is not supported in default application.properties. So you should use the way i mention above.","body":"Yes, i understand. But the sentinel properties is not supported in default application.properties. So you should use the way i mention above."},{"owner":{"account_id":3505777,"reputation":1260,"user_id":2931342,"accept_rate":75,"display_name":"Shrikant Havale"},"score":2,"creation_date":1450775557,"post_id":34329008,"comment_id":56565297,"body_markdown":"`RedisSentinelConfiguration` has a constructor with `PropertySource`, and this constructor already has a logic for reading those two sentinal specific properties. I am trying to figure out now, how can I pass a `PropertySource` of my `application.properties`","body":"<code>RedisSentinelConfiguration</code> has a constructor with <code>PropertySource</code>, and this constructor already has a logic for reading those two sentinal specific properties. I am trying to figure out now, how can I pass a <code>PropertySource</code> of my <code>application.properties</code>"},{"owner":{"account_id":3572434,"reputation":6241,"user_id":2982437,"accept_rate":59,"display_name":"Nick Bondarenko"},"score":0,"creation_date":1450776236,"post_id":34329008,"comment_id":56565674,"body_markdown":"Yes it has and see the code you are mention. And yes, currently `RedisSentinelConfiguration` doesn&#39;t supported for all types of application. Please look at http://docs.spring.io/spring-data/redis/docs/current/reference/html/ (Redis Sentinel Support). On current stage just Jedis and Lettuce support Redis Sentinel with configuring throw application.properties. But not any application used spring-data-redis.","body":"Yes it has and see the code you are mention. And yes, currently <code>RedisSentinelConfiguration</code> doesn&#39;t supported for all types of application. Please look at <a href=\"http://docs.spring.io/spring-data/redis/docs/current/reference/html/\" rel=\"nofollow noreferrer\">docs.spring.io/spring-data/redis/docs/current/reference/html</a> (Redis Sentinel Support). On current stage just Jedis and Lettuce support Redis Sentinel with configuring throw application.properties. But not any application used spring-data-redis."}],"tags":[],"owner":{"account_id":3572434,"reputation":6241,"user_id":2982437,"accept_rate":59,"display_name":"Nick Bondarenko"},"comment_count":4,"down_vote_count":0,"up_vote_count":41,"is_accepted":true,"score":41,"last_activity_date":1450778126,"creation_date":1450337638,"answer_id":34329008,"question_id":34201135,"body_markdown":"You can use `@PropertySource` to read options from application.properties or other property file you want. Please look [PropertySource usage example][1] and working [example of usage spring-redis-cache][2]. Or look at this small sample:\r\n\r\n    @Configuration\r\n    @PropertySource(&quot;application.properties&quot;)\r\n    public class SpringSessionRedisConfiguration {\r\n\r\n  \t    @Value(&quot;${redis.hostname}&quot;)\r\n     \tprivate String redisHostName;\r\n\r\n\t    @Value(&quot;${redis.port}&quot;)\r\n    \tprivate int redisPort;\r\n\r\n   \t    @Bean\r\n     \tpublic static PropertySourcesPlaceholderConfigurer    propertySourcesPlaceholderConfigurer() {\r\n     \t\treturn new PropertySourcesPlaceholderConfigurer();\r\n    \t}\r\n\r\n\t\t@Bean\r\n\t\tJedisConnectionFactory jedisConnectionFactory() {\r\n\t\t\tJedisConnectionFactory factory = new JedisConnectionFactory();\r\n\t\t\tfactory.setHostName(redisHostName);\r\n\t\t\tfactory.setPort(redisPort);\r\n\t\t\tfactory.setUsePool(true);\r\n\t\t\treturn factory;\r\n\t\t}\r\n\r\n\t\t@Bean\r\n\t\tRedisTemplate&lt;Object, Object&gt; redisTemplate() {\r\n\t\t\tRedisTemplate&lt;Object, Object&gt; redisTemplate = new RedisTemplate&lt;Object, Object&gt;();\r\n\t\t\tredisTemplate.setConnectionFactory(jedisConnectionFactory());\r\n\t\t\treturn redisTemplate;\r\n\t\t}\r\n\r\n\t\t@Bean\r\n\t\tRedisCacheManager cacheManager() {\r\n\t\t\tRedisCacheManager redisCacheManager = new RedisCacheManager(redisTemplate());\r\n\t\t\treturn redisCacheManager;\r\n\t\t}\r\n\t}\r\n\r\nIn present time (**december 2015**) the *spring.redis.sentinel* options in `application.properties` has limited support of `RedisSentinelConfiguration`:\r\n\r\n&gt; Please note that currently only [Jedis][3] and lettuce [Lettuce][4] support Redis Sentinel.\r\n\r\nYou may read more about this in [official documentation][5]. \r\n\r\n\r\n  [1]: http://www.mkyong.com/spring/spring-propertysources-example/\r\n  [2]: https://github.com/matheustardivo/spring-redis-cache/blob/master/src/main/java/net/tardivo/spring/redis/cache/SpringConfiguration.java\r\n  [3]: http://github.com/xetorthio/jedis\r\n  [4]: http://github.com/mp911de/lettuce\r\n  [5]: http://docs.spring.io/spring-data/redis/docs/current/reference/html/#redis:sentinel","title":"Spring Redis - Read configuration from application.properties file","body":"<p>You can use <code>@PropertySource</code> to read options from application.properties or other property file you want. Please look <a href=\"http://www.mkyong.com/spring/spring-propertysources-example/\" rel=\"noreferrer\">PropertySource usage example</a> and working <a href=\"https://github.com/matheustardivo/spring-redis-cache/blob/master/src/main/java/net/tardivo/spring/redis/cache/SpringConfiguration.java\" rel=\"noreferrer\">example of usage spring-redis-cache</a>. Or look at this small sample:</p>\n\n<pre><code>@Configuration\n@PropertySource(\"application.properties\")\npublic class SpringSessionRedisConfiguration {\n\n    @Value(\"${redis.hostname}\")\n    private String redisHostName;\n\n    @Value(\"${redis.port}\")\n    private int redisPort;\n\n    @Bean\n    public static PropertySourcesPlaceholderConfigurer    propertySourcesPlaceholderConfigurer() {\n        return new PropertySourcesPlaceholderConfigurer();\n    }\n\n    @Bean\n    JedisConnectionFactory jedisConnectionFactory() {\n        JedisConnectionFactory factory = new JedisConnectionFactory();\n        factory.setHostName(redisHostName);\n        factory.setPort(redisPort);\n        factory.setUsePool(true);\n        return factory;\n    }\n\n    @Bean\n    RedisTemplate&lt;Object, Object&gt; redisTemplate() {\n        RedisTemplate&lt;Object, Object&gt; redisTemplate = new RedisTemplate&lt;Object, Object&gt;();\n        redisTemplate.setConnectionFactory(jedisConnectionFactory());\n        return redisTemplate;\n    }\n\n    @Bean\n    RedisCacheManager cacheManager() {\n        RedisCacheManager redisCacheManager = new RedisCacheManager(redisTemplate());\n        return redisCacheManager;\n    }\n}\n</code></pre>\n\n<p>In present time (<strong>december 2015</strong>) the <em>spring.redis.sentinel</em> options in <code>application.properties</code> has limited support of <code>RedisSentinelConfiguration</code>:</p>\n\n<blockquote>\n  <p>Please note that currently only <a href=\"http://github.com/xetorthio/jedis\" rel=\"noreferrer\">Jedis</a> and lettuce <a href=\"http://github.com/mp911de/lettuce\" rel=\"noreferrer\">Lettuce</a> support Redis Sentinel.</p>\n</blockquote>\n\n<p>You may read more about this in <a href=\"http://docs.spring.io/spring-data/redis/docs/current/reference/html/#redis:sentinel\" rel=\"noreferrer\">official documentation</a>. </p>\n"},{"comments":[{"owner":{"account_id":3505777,"reputation":1260,"user_id":2931342,"accept_rate":75,"display_name":"Shrikant Havale"},"score":0,"creation_date":1450686283,"post_id":34373114,"comment_id":56524113,"body_markdown":"I will try this and update you, if this is what I really want.","body":"I will try this and update you, if this is what I really want."},{"owner":{"account_id":3505777,"reputation":1260,"user_id":2931342,"accept_rate":75,"display_name":"Shrikant Havale"},"score":0,"creation_date":1451221909,"post_id":34373114,"comment_id":56702976,"body_markdown":"Well I didn&#39;t try this approach, as approach marked as answer works well for me, but thanks for answering may be it helps somebody else","body":"Well I didn&#39;t try this approach, as approach marked as answer works well for me, but thanks for answering may be it helps somebody else"}],"tags":[],"owner":{"account_id":3581078,"reputation":374,"user_id":2989287,"display_name":"Wheelchair Geek"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1450544014,"creation_date":1450544014,"answer_id":34373114,"question_id":34201135,"body_markdown":"I found this within the spring boot doc section 24 paragraph 7\r\n\r\n    @Component\r\n    @ConfigurationProperties(prefix=&quot;connection&quot;)\r\n    public class ConnectionSettings {\r\n    \r\n        private String username;\r\n    \r\n        private InetAddress remoteAddress;\r\n    \r\n        // ... getters and setters\r\n    \r\n    } \r\n\r\nProperties can then be modified via connection.property \r\n\r\nReference link: https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-typesafe-configuration-properties  ","title":"Spring Redis - Read configuration from application.properties file","body":"<p>I found this within the spring boot doc section 24 paragraph 7</p>\n\n<pre><code>@Component\n@ConfigurationProperties(prefix=\"connection\")\npublic class ConnectionSettings {\n\n    private String username;\n\n    private InetAddress remoteAddress;\n\n    // ... getters and setters\n\n} \n</code></pre>\n\n<p>Properties can then be modified via connection.property </p>\n\n<p>Reference link: <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-typesafe-configuration-properties\" rel=\"nofollow\">https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-typesafe-configuration-properties</a>  </p>\n"},{"comments":[{"owner":{"account_id":3505777,"reputation":1260,"user_id":2931342,"accept_rate":75,"display_name":"Shrikant Havale"},"score":1,"creation_date":1450686256,"post_id":34376070,"comment_id":56524098,"body_markdown":"Well this works only for properties mentioned in your link, my question was specific to the properties related to `sentinel` configuration. And `sentinel` are also default spring properties, but still framework doesn&#39;t read them and connection is not established.","body":"Well this works only for properties mentioned in your link, my question was specific to the properties related to <code>sentinel</code> configuration. And <code>sentinel</code> are also default spring properties, but still framework doesn&#39;t read them and connection is not established."}],"tags":[],"owner":{"account_id":3581078,"reputation":374,"user_id":2989287,"display_name":"Wheelchair Geek"},"comment_count":1,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1450564340,"creation_date":1450564340,"answer_id":34376070,"question_id":34201135,"body_markdown":"Upon looking deeper I found this, could it be what you are looking for?  \r\n\r\n    # REDIS (RedisProperties)\r\n    spring.redis.database=0 # Database index used by the connection factory.\r\n    spring.redis.host=localhost # Redis server host.\r\n    spring.redis.password= # Login password of the redis server.\r\n    spring.redis.pool.max-active=8 # Max number of connections that can be allocated by the pool at a given time. Use a negative value for no limit.\r\n    spring.redis.pool.max-idle=8 # Max number of &quot;idle&quot; connections in the pool. Use a negative value to indicate an unlimited number of idle connections.\r\n    spring.redis.pool.max-wait=-1 # Maximum amount of time (in milliseconds) a connection allocation should block before throwing an exception when the pool is exhausted. Use a negative value to block indefinitely.\r\n    spring.redis.pool.min-idle=0 # Target for the minimum number of idle connections to maintain in the pool. This setting only has an effect if it is positive.\r\n    spring.redis.port=6379 # Redis server port.\r\n    spring.redis.sentinel.master= # Name of Redis server.\r\n    spring.redis.sentinel.nodes= # Comma-separated list of host:port pairs.\r\n    spring.redis.timeout=0 # Connection timeout in milliseconds. \r\n\r\n \r\nRefernce:https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html Searchterm Redis \r\n\r\nFrom what I can see the values already exist and are defined as \r\n\r\n    spring.redis.host=localhost # Redis server host.\r\n    spring.redis.port=6379 # Redis server port.\r\n\r\nif you want to create your own properties you can look at my previous post in this thread.    ","title":"Spring Redis - Read configuration from application.properties file","body":"<p>Upon looking deeper I found this, could it be what you are looking for?  </p>\n\n<pre><code># REDIS (RedisProperties)\nspring.redis.database=0 # Database index used by the connection factory.\nspring.redis.host=localhost # Redis server host.\nspring.redis.password= # Login password of the redis server.\nspring.redis.pool.max-active=8 # Max number of connections that can be allocated by the pool at a given time. Use a negative value for no limit.\nspring.redis.pool.max-idle=8 # Max number of \"idle\" connections in the pool. Use a negative value to indicate an unlimited number of idle connections.\nspring.redis.pool.max-wait=-1 # Maximum amount of time (in milliseconds) a connection allocation should block before throwing an exception when the pool is exhausted. Use a negative value to block indefinitely.\nspring.redis.pool.min-idle=0 # Target for the minimum number of idle connections to maintain in the pool. This setting only has an effect if it is positive.\nspring.redis.port=6379 # Redis server port.\nspring.redis.sentinel.master= # Name of Redis server.\nspring.redis.sentinel.nodes= # Comma-separated list of host:port pairs.\nspring.redis.timeout=0 # Connection timeout in milliseconds. \n</code></pre>\n\n<p>Refernce:<a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html\" rel=\"noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html</a> Searchterm Redis </p>\n\n<p>From what I can see the values already exist and are defined as </p>\n\n<pre><code>spring.redis.host=localhost # Redis server host.\nspring.redis.port=6379 # Redis server port.\n</code></pre>\n\n<p>if you want to create your own properties you can look at my previous post in this thread.    </p>\n"},{"comments":[{"owner":{"account_id":3505777,"reputation":1260,"user_id":2931342,"accept_rate":75,"display_name":"Shrikant Havale"},"score":0,"creation_date":1450686251,"post_id":34378234,"comment_id":56524096,"body_markdown":"Well this works only for properties mentioned in your link, my question was specific to the properties related to `sentinel` configuration. And `sentinel` are also default spring properties, but still framework doesn&#39;t read them and connection is not established.","body":"Well this works only for properties mentioned in your link, my question was specific to the properties related to <code>sentinel</code> configuration. And <code>sentinel</code> are also default spring properties, but still framework doesn&#39;t read them and connection is not established."}],"tags":[],"owner":{"account_id":2558390,"reputation":3993,"user_id":2219920,"accept_rate":71,"display_name":"Pulkit"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1450588900,"creation_date":1450588900,"answer_id":34378234,"question_id":34201135,"body_markdown":"I think this what you are looking for\r\nhttp://docs.spring.io/spring-session/docs/current/reference/html5/guides/boot.html","title":"Spring Redis - Read configuration from application.properties file","body":"<p>I think this what you are looking for\n<a href=\"http://docs.spring.io/spring-session/docs/current/reference/html5/guides/boot.html\" rel=\"nofollow\">http://docs.spring.io/spring-session/docs/current/reference/html5/guides/boot.html</a></p>\n"},{"tags":[],"owner":{"account_id":5959209,"reputation":34,"user_id":4684871,"display_name":"Kylo Zhang"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1465969296,"creation_date":1465969296,"answer_id":37826997,"question_id":34201135,"body_markdown":"You can use the ResourcePropertySource to generate a PropertySource object.\r\n\r\n    PropertySource propertySource = new ResourcePropertySource(&quot;path/to/your/application.properties&quot;);\r\n\r\nThen pass it to the constructor of the RedisSentinelConfiguration.","title":"Spring Redis - Read configuration from application.properties file","body":"<p>You can use the ResourcePropertySource to generate a PropertySource object.</p>\n\n<pre><code>PropertySource propertySource = new ResourcePropertySource(\"path/to/your/application.properties\");\n</code></pre>\n\n<p>Then pass it to the constructor of the RedisSentinelConfiguration.</p>\n"},{"comments":[{"owner":{"account_id":3997109,"reputation":1605,"user_id":3294286,"accept_rate":67,"display_name":"Sebastian D&#39;Agostino"},"score":0,"creation_date":1490790324,"post_id":40699080,"comment_id":73267928,"body_markdown":"This is not an answer","body":"This is not an answer"}],"tags":[],"owner":{"account_id":9682826,"reputation":3,"user_id":7183814,"display_name":"Andy"},"comment_count":1,"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1479598502,"creation_date":1479598502,"answer_id":40699080,"question_id":34201135,"body_markdown":"    @Autowired\r\n    private JedisConnectionFactory connectionFactory;\r\n\r\n    @Bean\r\n    JedisConnectionFactory connectionFactory() {\r\n        return connectionFactory\r\n    }","title":"Spring Redis - Read configuration from application.properties file","body":"<pre><code>@Autowired\nprivate JedisConnectionFactory connectionFactory;\n\n@Bean\nJedisConnectionFactory connectionFactory() {\n    return connectionFactory\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":175930,"reputation":2593,"user_id":406290,"accept_rate":43,"display_name":"Kevin Hooke"},"score":0,"creation_date":1538505871,"post_id":44589819,"comment_id":92163362,"body_markdown":"This works and answers the question of &quot;how do I pass a PropertySource as a parameter to the RedisSentinelConfiguration constructor - thanks!","body":"This works and answers the question of &quot;how do I pass a PropertySource as a parameter to the RedisSentinelConfiguration constructor - thanks!"}],"tags":[],"owner":{"account_id":10074485,"reputation":71,"user_id":7447076,"display_name":"Kelevra"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1497617845,"creation_date":1497617845,"answer_id":44589819,"question_id":34201135,"body_markdown":"Here is an elegant solution to solve your issue :\r\n\r\n    @Configuration\r\n    @PropertySource(name=&quot;application&quot;, value=&quot;classpath:application.properties&quot;)\r\n    public class SpringSessionRedisConfiguration {\r\n    \r\n        @Resource\r\n        ConfigurableEnvironment environment;\r\n        \r\n        @Bean\r\n        public PropertiesPropertySource propertySource() {\r\n            return (PropertiesPropertySource) environment.getPropertySources().get(&quot;application&quot;);\r\n        }\r\n        \r\n        @Bean\r\n        public JedisConnectionFactory jedisConnectionFactory() {\r\n            return new JedisConnectionFactory(sentinelConfiguration(), poolConfiguration());\r\n        }\r\n        \r\n        @Bean\r\n        public RedisSentinelConfiguration sentinelConfiguration() {\r\n            return new RedisSentinelConfiguration(propertySource());\r\n        }\r\n        \r\n        @Bean\r\n        public JedisPoolConfig poolConfiguration() {\r\n            JedisPoolConfiguration config = new JedisPoolConfiguration();\r\n            // add your customized configuration if needed\r\n            return config;\r\n        }\r\n        \r\n        @Bean\r\n        RedisTemplate&lt;Object, Object&gt; redisTemplate() {\r\n            RedisTemplate&lt;Object, Object&gt; redisTemplate = new RedisTemplate&lt;Object, Object&gt;();\r\n            redisTemplate.setConnectionFactory(jedisConnectionFactory());\r\n            return redisTemplate;\r\n        }\r\n        \r\n        @Bean\r\n        RedisCacheManager cacheManager() {\r\n            return new RedisCacheManager(redisTemplate());\r\n        }\r\n    \r\n    }\r\n\r\nso, to resume :\r\n\r\n - add a specific name for the @PropertySource\r\n - inject a ConfigurableEnvironment instead of Environment\r\n - get the PropertiesPropertySource in your ConfigurableEnvironment using the name you mentioned on your @PropertySource\r\n - Use this PropertySource object to construct your RedisSentinelConfiguration object\r\n - Don&#39;t forget to add &#39;spring.redis.sentinel.master&#39; and &#39;spring.redis.sentinel.nodes&#39; properties in you property file\r\n\r\nTested in my workspace,\r\nRegards","title":"Spring Redis - Read configuration from application.properties file","body":"<p>Here is an elegant solution to solve your issue :</p>\n\n<pre><code>@Configuration\n@PropertySource(name=\"application\", value=\"classpath:application.properties\")\npublic class SpringSessionRedisConfiguration {\n\n    @Resource\n    ConfigurableEnvironment environment;\n\n    @Bean\n    public PropertiesPropertySource propertySource() {\n        return (PropertiesPropertySource) environment.getPropertySources().get(\"application\");\n    }\n\n    @Bean\n    public JedisConnectionFactory jedisConnectionFactory() {\n        return new JedisConnectionFactory(sentinelConfiguration(), poolConfiguration());\n    }\n\n    @Bean\n    public RedisSentinelConfiguration sentinelConfiguration() {\n        return new RedisSentinelConfiguration(propertySource());\n    }\n\n    @Bean\n    public JedisPoolConfig poolConfiguration() {\n        JedisPoolConfiguration config = new JedisPoolConfiguration();\n        // add your customized configuration if needed\n        return config;\n    }\n\n    @Bean\n    RedisTemplate&lt;Object, Object&gt; redisTemplate() {\n        RedisTemplate&lt;Object, Object&gt; redisTemplate = new RedisTemplate&lt;Object, Object&gt;();\n        redisTemplate.setConnectionFactory(jedisConnectionFactory());\n        return redisTemplate;\n    }\n\n    @Bean\n    RedisCacheManager cacheManager() {\n        return new RedisCacheManager(redisTemplate());\n    }\n\n}\n</code></pre>\n\n<p>so, to resume :</p>\n\n<ul>\n<li>add a specific name for the @PropertySource</li>\n<li>inject a ConfigurableEnvironment instead of Environment</li>\n<li>get the PropertiesPropertySource in your ConfigurableEnvironment using the name you mentioned on your @PropertySource</li>\n<li>Use this PropertySource object to construct your RedisSentinelConfiguration object</li>\n<li>Don't forget to add 'spring.redis.sentinel.master' and 'spring.redis.sentinel.nodes' properties in you property file</li>\n</ul>\n\n<p>Tested in my workspace,\nRegards</p>\n"},{"comments":[{"owner":{"account_id":2597165,"reputation":975,"user_id":2250569,"accept_rate":54,"display_name":"rbrisuda"},"score":0,"creation_date":1577794942,"post_id":51031521,"comment_id":105257010,"body_markdown":"Suggest to use annotation which is targeted for Spring tests?","body":"Suggest to use annotation which is targeted for Spring tests?"}],"tags":[],"owner":{"account_id":13840774,"reputation":11,"user_id":9991177,"display_name":"tarun goel"},"comment_count":1,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1529982382,"creation_date":1529959418,"answer_id":51031521,"question_id":34201135,"body_markdown":"Use `@DirtiesContext(classMode = classmode.AFTER_CLASS)` at each test class. This will surely work for you.","title":"Spring Redis - Read configuration from application.properties file","body":"<p>Use <code>@DirtiesContext(classMode = classmode.AFTER_CLASS)</code> at each test class. This will surely work for you.</p>\n"},{"comments":[{"owner":{"account_id":1395326,"reputation":8690,"user_id":1325216,"accept_rate":58,"display_name":"Sander Verhagen"},"score":1,"creation_date":1597736947,"post_id":52765571,"comment_id":112223670,"body_markdown":"This works, just a small remark: the `@Primary` is needed here, since the `redisProperties` method creates a duplicate bean that, while works, is redundant. You can just `@Autowired` the existing `RedisProperties` (or use constructor injection, of course), and remove that `@Bean`.","body":"This works, just a small remark: the <code>@Primary</code> is needed here, since the <code>redisProperties</code> method creates a duplicate bean that, while works, is redundant. You can just <code>@Autowired</code> the existing <code>RedisProperties</code> (or use constructor injection, of course), and remove that <code>@Bean</code>."}],"tags":[],"owner":{"account_id":3392016,"reputation":121,"user_id":2846650,"display_name":"user2846650"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1539277844,"creation_date":1539277844,"answer_id":52765571,"question_id":34201135,"body_markdown":"This works for me :\r\n\r\n    @Configuration\r\n    @EnableRedisRepositories\r\n    public class RedisConfig {\r\n\r\n        @Bean\r\n        public JedisConnectionFactory jedisConnectionFactory() {\r\n            RedisProperties properties = redisProperties();\r\n            RedisStandaloneConfiguration configuration = new RedisStandaloneConfiguration();\r\n            configuration.setHostName(properties.getHost());\r\n            configuration.setPort(properties.getPort());\r\n\r\n            return new JedisConnectionFactory(configuration);\r\n        }\r\n\r\n        @Bean\r\n        public RedisTemplate&lt;String, Object&gt; redisTemplate() {\r\n            final RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;&gt;();\r\n            template.setConnectionFactory(jedisConnectionFactory());\r\n            template.setValueSerializer(new GenericToStringSerializer&lt;&gt;(Object.class));\r\n            return template;\r\n        }\r\n\r\n        @Bean\r\n        @Primary\r\n        public RedisProperties redisProperties() {\r\n            return new RedisProperties();\r\n        }\r\n\r\n    }\r\n\r\nand properties file :\r\n\r\n    spring.redis.host=localhost\r\n    spring.redis.port=6379\r\n","title":"Spring Redis - Read configuration from application.properties file","body":"<p>This works for me :</p>\n\n<pre><code>@Configuration\n@EnableRedisRepositories\npublic class RedisConfig {\n\n    @Bean\n    public JedisConnectionFactory jedisConnectionFactory() {\n        RedisProperties properties = redisProperties();\n        RedisStandaloneConfiguration configuration = new RedisStandaloneConfiguration();\n        configuration.setHostName(properties.getHost());\n        configuration.setPort(properties.getPort());\n\n        return new JedisConnectionFactory(configuration);\n    }\n\n    @Bean\n    public RedisTemplate&lt;String, Object&gt; redisTemplate() {\n        final RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;&gt;();\n        template.setConnectionFactory(jedisConnectionFactory());\n        template.setValueSerializer(new GenericToStringSerializer&lt;&gt;(Object.class));\n        return template;\n    }\n\n    @Bean\n    @Primary\n    public RedisProperties redisProperties() {\n        return new RedisProperties();\n    }\n\n}\n</code></pre>\n\n<p>and properties file :</p>\n\n<pre><code>spring.redis.host=localhost\nspring.redis.port=6379\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27928589,"reputation":11,"user_id":21327165,"display_name":"Piotr Adamczuk"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677858852,"creation_date":1677858852,"answer_id":75629261,"question_id":34201135,"body_markdown":"Property prefix spring.redis is no longer valid currently spring uses: spring.data.redis prefix","title":"Spring Redis - Read configuration from application.properties file","body":"<p>Property prefix spring.redis is no longer valid currently spring uses: spring.data.redis prefix</p>\n"}],"owner":{"account_id":3505777,"reputation":1260,"user_id":2931342,"accept_rate":75,"display_name":"Shrikant Havale"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101957,"favorite_count":0,"down_vote_count":0,"up_vote_count":30,"accepted_answer_id":34329008,"answer_count":10,"score":30,"last_activity_date":1677858852,"creation_date":1449748206,"question_id":34201135,"body_markdown":"I have Spring Redis working using `spring-data-redis` with all default configuration likes `localhost` default `port` and so on.\n\nNow I am trying to make the same configuration by configuring it in `application.properties` file. But I cannot figure out how should I create beans exactly that my property values are read.\n\nRedis Configuration File\n\n    @EnableRedisHttpSession\n    @Configuration\n    public class SpringSessionRedisConfiguration {\n\n    @Bean\n    JedisConnectionFactory connectionFactory() {\n        return new JedisConnectionFactory();\n    }\n\n    @Autowired\n    @Bean\n    RedisCacheManager redisCacheManager(final StringRedisTemplate stringRedisTemplate) {\n        return new RedisCacheManager(stringRedisTemplate);\n    }\n\n    @Autowired\n    @Bean\n    StringRedisTemplate template(final RedisConnectionFactory connectionFactory) {\n        return new StringRedisTemplate(connectionFactory);\n    }\n    }\n\nStandard Parameters in application.properties\n\n&gt; spring.redis.sentinel.master=themaster\n&gt;\n&gt; spring.redis.sentinel.nodes=192.168.188.231:26379\n&gt;\n&gt; spring.redis.password=12345\n\nWhat I tried,\n\n 1. I can possibly use `@PropertySource` and then inject `@Value` and get the values. But I don&#39;t want to do that as those properties are not defined by me but are from Spring.\n 2. In this documentation [Spring Redis Documentation][1], it only says that it can be configured using properties but doesn&#39;t show concrete example.\n 3. I also went through Spring Data Redis API classes, and found that `RedisProperties` should help me, but still cannot figure out how exactly to tell Spring to read from properties file.\n\n  [1]: http://docs.spring.io/spring-data/data-redis/docs/current/reference/pdf/spring-data-redis-reference.pdf","title":"Spring Redis - Read configuration from application.properties file","body":"<p>I have Spring Redis working using <code>spring-data-redis</code> with all default configuration likes <code>localhost</code> default <code>port</code> and so on.</p>\n<p>Now I am trying to make the same configuration by configuring it in <code>application.properties</code> file. But I cannot figure out how should I create beans exactly that my property values are read.</p>\n<p>Redis Configuration File</p>\n<pre><code>@EnableRedisHttpSession\n@Configuration\npublic class SpringSessionRedisConfiguration {\n\n@Bean\nJedisConnectionFactory connectionFactory() {\n    return new JedisConnectionFactory();\n}\n\n@Autowired\n@Bean\nRedisCacheManager redisCacheManager(final StringRedisTemplate stringRedisTemplate) {\n    return new RedisCacheManager(stringRedisTemplate);\n}\n\n@Autowired\n@Bean\nStringRedisTemplate template(final RedisConnectionFactory connectionFactory) {\n    return new StringRedisTemplate(connectionFactory);\n}\n}\n</code></pre>\n<p>Standard Parameters in application.properties</p>\n<blockquote>\n<p>spring.redis.sentinel.master=themaster</p>\n<p>spring.redis.sentinel.nodes=192.168.188.231:26379</p>\n<p>spring.redis.password=12345</p>\n</blockquote>\n<p>What I tried,</p>\n<ol>\n<li>I can possibly use <code>@PropertySource</code> and then inject <code>@Value</code> and get the values. But I don't want to do that as those properties are not defined by me but are from Spring.</li>\n<li>In this documentation <a href=\"http://docs.spring.io/spring-data/data-redis/docs/current/reference/pdf/spring-data-redis-reference.pdf\" rel=\"noreferrer\">Spring Redis Documentation</a>, it only says that it can be configured using properties but doesn't show concrete example.</li>\n<li>I also went through Spring Data Redis API classes, and found that <code>RedisProperties</code> should help me, but still cannot figure out how exactly to tell Spring to read from properties file.</li>\n</ol>\n"},{"tags":["java","google-app-engine","jpa","spring-data","spring-boot"],"comments":[{"owner":{"account_id":412334,"reputation":33756,"user_id":785349,"accept_rate":94,"display_name":"quarks"},"score":0,"creation_date":1402035802,"post_id":24074749,"comment_id":37127106,"body_markdown":"If I comment out the @EnableAutoConfiguration I get: [INFO] WARNING: failed metricFilter: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;metricFilter&#39; is defined","body":"If I comment out the @EnableAutoConfiguration I get: [INFO] WARNING: failed metricFilter: org.springframework.beans.factory.NoSuchBeanDefinitionExcept&zwnj;&#8203;ion: No bean named &#39;metricFilter&#39; is defined"},{"owner":{"account_id":412334,"reputation":33756,"user_id":785349,"accept_rate":94,"display_name":"quarks"},"score":0,"creation_date":1402041034,"post_id":24074749,"comment_id":37129545,"body_markdown":"Here is the complete code: http://bit.ly/1i53oAq","body":"Here is the complete code: <a href=\"http://bit.ly/1i53oAq\" rel=\"nofollow noreferrer\">bit.ly/1i53oAq</a>"},{"owner":{"account_id":83518,"reputation":6215,"user_id":234110,"accept_rate":67,"display_name":"Anand Rockzz"},"score":0,"creation_date":1483157630,"post_id":24074749,"comment_id":70013734,"body_markdown":"In my case it was [spring-boot-starter-data-jpa](http://stackoverflow.com/a/37554576/234110)","body":"In my case it was <a href=\"http://stackoverflow.com/a/37554576/234110\">spring-boot-starter-data-jpa</a>"}],"answers":[{"comments":[{"owner":{"account_id":412334,"reputation":33756,"user_id":785349,"accept_rate":94,"display_name":"quarks"},"score":3,"creation_date":1402071707,"post_id":24086178,"comment_id":37147633,"body_markdown":"not sure what to put here I&#39;m using DataNucleus + Google App Engine","body":"not sure what to put here I&#39;m using DataNucleus + Google App Engine"},{"owner":{"account_id":295440,"reputation":1210,"user_id":599851,"accept_rate":58,"display_name":"iCrus"},"score":0,"creation_date":1431253045,"post_id":24086178,"comment_id":48407938,"body_markdown":"@xybrek Just add application.properties file in your application and add the datasource properties in it.","body":"@xybrek Just add application.properties file in your application and add the datasource properties in it."},{"owner":{"account_id":1408815,"reputation":2002,"user_id":1811348,"accept_rate":88,"display_name":"swapyonubuntu"},"score":1,"creation_date":1440347285,"post_id":24086178,"comment_id":52224434,"body_markdown":"spring.datasource.url = jdbc:mysql://localhost/abc\n#spring.datasource.driverClassName = com.mysql.jdbc.Driver\nspring.datasource.name=olabsenglishdb\nspring.datasource.username=xxxx\nspring.datasource.password=xxxx\nspring.datasource.driver-class-name= com.mysql.jdbc.Driver\nspring.jpa.database=mysql\nspring.jpa.database-platform=org.hibernate.dialect.MySQLDialect","body":"spring.datasource.url = jdbc:mysql://localhost/abc #spring.datasource.driverClassName = com.mysql.jdbc.Driver spring.datasource.name=olabsenglishdb spring.datasource.username=xxxx spring.datasource.password=xxxx spring.datasource.driver-class-name= com.mysql.jdbc.Driver spring.jpa.database=mysql spring.jpa.database-platform=org.hibernate.dialect.MySQLDial&zwnj;&#8203;ect"},{"owner":{"account_id":3357289,"reputation":1456,"user_id":2819935,"accept_rate":83,"display_name":"Syed Anas"},"score":1,"creation_date":1501226738,"post_id":24086178,"comment_id":77695262,"body_markdown":"I did the same, the code is working fine when i run the application in intellij but when i create a jar and run it using `java -jar myJar.jar` it is giving me same error.","body":"I did the same, the code is working fine when i run the application in intellij but when i create a jar and run it using <code>java -jar myJar.jar</code> it is giving me same error."},{"owner":{"account_id":3866697,"reputation":115,"user_id":3203079,"accept_rate":83,"display_name":"jasmad"},"score":0,"creation_date":1507068934,"post_id":24086178,"comment_id":80062790,"body_markdown":"What if one does want to configure the datasource on runtime?","body":"What if one does want to configure the datasource on runtime?"}],"tags":[],"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"comment_count":5,"down_vote_count":2,"up_vote_count":193,"is_accepted":true,"score":191,"last_activity_date":1512043526,"creation_date":1402070590,"answer_id":24086178,"question_id":24074749,"body_markdown":"You haven&#39;t provided Spring Boot with enough information to auto-configure a `DataSource`. To do so, you&#39;ll need to add some properties to `application.properties` with the `spring.datasource` prefix. Take a look at [DataSourceProperties](https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/jdbc/DataSourceProperties.java) to see all of the properties that you can set. \r\n\r\nYou&#39;ll need to provide the appropriate url and driver class name:\r\n\r\n    spring.datasource.url = \r\n    spring.datasource.driver-class-name = ","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>You haven't provided Spring Boot with enough information to auto-configure a <code>DataSource</code>. To do so, you'll need to add some properties to <code>application.properties</code> with the <code>spring.datasource</code> prefix. Take a look at <a href=\"https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/jdbc/DataSourceProperties.java\" rel=\"noreferrer\">DataSourceProperties</a> to see all of the properties that you can set. </p>\n\n<p>You'll need to provide the appropriate url and driver class name:</p>\n\n<pre><code>spring.datasource.url = \nspring.datasource.driver-class-name = \n</code></pre>\n"},{"comments":[{"owner":{"account_id":412334,"reputation":33756,"user_id":785349,"accept_rate":94,"display_name":"quarks"},"score":1,"creation_date":1402077749,"post_id":24087111,"comment_id":37150791,"body_markdown":"Error still the same :-(","body":"Error still the same :-("},{"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1402080426,"post_id":24087111,"comment_id":37152181,"body_markdown":"Are you sure you&#39;ve applied the exclusion properly? mvn dependency:tree will help you to check. With the exclusion in place the DataSource problem&#39;s gone for me (I now see &quot;Type demo.core.entity.Resource is not a known managed type&quot;, but that&#39;s a separate issue)","body":"Are you sure you&#39;ve applied the exclusion properly? mvn dependency:tree will help you to check. With the exclusion in place the DataSource problem&#39;s gone for me (I now see &quot;Type demo.core.entity.Resource is not a known managed type&quot;, but that&#39;s a separate issue)"},{"owner":{"account_id":412334,"reputation":33756,"user_id":785349,"accept_rate":94,"display_name":"quarks"},"score":0,"creation_date":1402141272,"post_id":24087111,"comment_id":37167274,"body_markdown":"Hi Andy does it mean you tested the actual project I posted? looks promising","body":"Hi Andy does it mean you tested the actual project I posted? looks promising"},{"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":1,"creation_date":1402167778,"post_id":24087111,"comment_id":37174498,"body_markdown":"Yes, that was with the project you posted. The only change I made was to add the Hibernate exclusion as described above.","body":"Yes, that was with the project you posted. The only change I made was to add the Hibernate exclusion as described above."},{"owner":{"account_id":412334,"reputation":33756,"user_id":785349,"accept_rate":94,"display_name":"quarks"},"score":0,"creation_date":1402185526,"post_id":24087111,"comment_id":37177745,"body_markdown":"Cool, it seems what you&#39;ve compiled was the master branch, or the JPA branch?","body":"Cool, it seems what you&#39;ve compiled was the master branch, or the JPA branch?"},{"owner":{"account_id":412334,"reputation":33756,"user_id":785349,"accept_rate":94,"display_name":"quarks"},"score":0,"creation_date":1402187949,"post_id":24087111,"comment_id":37178127,"body_markdown":"and it seems &#39;mvn clean install&#39; works fine, but did you try &#39;mvn appengine:devserver&#39;?","body":"and it seems &#39;mvn clean install&#39; works fine, but did you try &#39;mvn appengine:devserver&#39;?"},{"owner":{"account_id":214520,"reputation":689,"user_id":468536,"display_name":"Stephen Harrison"},"score":0,"creation_date":1422119672,"post_id":24087111,"comment_id":44628997,"body_markdown":"This red herring is a red herring. The answer&#39;s above, relating to the missing H2 dependency.","body":"This red herring is a red herring. The answer&#39;s above, relating to the missing H2 dependency."},{"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1422122438,"post_id":24087111,"comment_id":44629877,"body_markdown":"Not in the OP&#39;s case. They were trying to use Datanucleus rather than Hibernate","body":"Not in the OP&#39;s case. They were trying to use Datanucleus rather than Hibernate"},{"owner":{"account_id":6561862,"reputation":596,"user_id":5230044,"accept_rate":100,"display_name":"cammando"},"score":0,"creation_date":1512664275,"post_id":24087111,"comment_id":82359146,"body_markdown":"after adding this i got entity manager factory could not be found because i have entity inside my class.","body":"after adding this i got entity manager factory could not be found because i have entity inside my class."},{"owner":{"account_id":5988641,"reputation":121,"user_id":4705385,"display_name":"Rusli Usman"},"score":0,"creation_date":1646003456,"post_id":24087111,"comment_id":126011203,"body_markdown":"for a newer spring-boot-starter-data-jpa version, you need to exclude &#39;spring-boot-starter-jdbc&#39;.  This works for me.","body":"for a newer spring-boot-starter-data-jpa version, you need to exclude &#39;spring-boot-starter-jdbc&#39;.  This works for me."}],"tags":[],"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"comment_count":10,"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1402080174,"creation_date":1402073932,"answer_id":24087111,"question_id":24074749,"body_markdown":"Now that I look closer, I think that the DataSource problem is a red-herring. Boot&#39;s Hibernate auto-configuration is being triggered and that&#39;s what causing a DataSource to be required. Hibernate&#39;s on the classpath because you&#39;ve got a dependency on `spring-boot-starter-data-jpa` which pulls in `hibernate-entitymanager`.\r\n\r\nUpdate your `spring-boot-starter-data-jpa` dependency to exclude Hibernate:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;exclusions&gt;\r\n            &lt;exclusion&gt;\r\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n            &lt;/exclusion&gt;\r\n        &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>Now that I look closer, I think that the DataSource problem is a red-herring. Boot's Hibernate auto-configuration is being triggered and that's what causing a DataSource to be required. Hibernate's on the classpath because you've got a dependency on <code>spring-boot-starter-data-jpa</code> which pulls in <code>hibernate-entitymanager</code>.</p>\n\n<p>Update your <code>spring-boot-starter-data-jpa</code> dependency to exclude Hibernate:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1691486,"reputation":14379,"user_id":1553725,"display_name":"bluecollarcoder"},"score":3,"creation_date":1434177715,"post_id":25340415,"comment_id":49678987,"body_markdown":"I was having the same problem with spring-boot-starter-jdbc. Tried this suggestion and it fixed my problem.","body":"I was having the same problem with spring-boot-starter-jdbc. Tried this suggestion and it fixed my problem."},{"owner":{"account_id":2789334,"reputation":3588,"user_id":2399894,"accept_rate":93,"display_name":"SARose"},"score":5,"creation_date":1443644712,"post_id":25340415,"comment_id":53581420,"body_markdown":"This is not a real solution. H2 will not permanently save data as far as I&#39;m aware.","body":"This is not a real solution. H2 will not permanently save data as far as I&#39;m aware."},{"owner":{"account_id":341413,"reputation":4448,"user_id":672009,"accept_rate":79,"display_name":"user672009"},"score":10,"creation_date":1443644980,"post_id":25340415,"comment_id":53581542,"body_markdown":"@SARose - Of course it wont! It&#39;s an &quot;in memory&quot; database.","body":"@SARose - Of course it wont! It&#39;s an &quot;in memory&quot; database."},{"owner":{"account_id":63517,"reputation":11633,"user_id":187986,"accept_rate":79,"display_name":"Jason Nichols"},"score":1,"creation_date":1450463443,"post_id":25340415,"comment_id":56465836,"body_markdown":"@user672009, incorrect.  H2 is not only an in memory database. See http://www.h2database.com/html/features.html. With that said, this is a poor solution to the problem.","body":"@user672009, incorrect.  H2 is not only an in memory database. See <a href=\"http://www.h2database.com/html/features.html\" rel=\"nofollow noreferrer\">h2database.com/html/features.html</a>. With that said, this is a poor solution to the problem."},{"owner":{"account_id":260282,"reputation":3302,"user_id":543738,"accept_rate":39,"display_name":"Mr. Lance E Sloan"},"score":5,"creation_date":1461966851,"post_id":25340415,"comment_id":61454632,"body_markdown":"I&#39;m trying to build somebody&#39;s app and I get this &quot;Cannot determine ... for database type NONE&quot; error.  After trying other solutions, I try this one and it works.  The app was made to use two DBs, configured by properties.  I configured them, but got this error.  After I add the H2 dependency, no more errors.  The app uses the other DBs I specified, nothing ever goes to H2, AFAICT.  May be a side-effect of spring-boot or a problem in this app&#39;s design, but it requires H2 before it will start.  Since others have this problem, it can&#39;t be just this app.","body":"I&#39;m trying to build somebody&#39;s app and I get this &quot;Cannot determine ... for database type NONE&quot; error.  After trying other solutions, I try this one and it works.  The app was made to use two DBs, configured by properties.  I configured them, but got this error.  After I add the H2 dependency, no more errors.  The app uses the other DBs I specified, nothing ever goes to H2, AFAICT.  May be a side-effect of spring-boot or a problem in this app&#39;s design, but it requires H2 before it will start.  Since others have this problem, it can&#39;t be just this app."},{"owner":{"account_id":2036523,"reputation":840,"user_id":1818762,"accept_rate":63,"display_name":"David"},"score":0,"creation_date":1479467120,"post_id":25340415,"comment_id":68581009,"body_markdown":"This one is working , I was using a newer one 1.4.xx but it seems that other configuration is required to set that one up , at least in my Spring boot project","body":"This one is working , I was using a newer one 1.4.xx but it seems that other configuration is required to set that one up , at least in my Spring boot project"},{"owner":{"account_id":3171905,"reputation":10222,"user_id":2680640,"display_name":"sendon1982"},"score":0,"creation_date":1505281818,"post_id":25340415,"comment_id":79341643,"body_markdown":"No need to have version since spring boot already included with version","body":"No need to have version since spring boot already included with version"},{"owner":{"account_id":997968,"reputation":726,"user_id":1013463,"accept_rate":67,"display_name":"MicNeo"},"score":0,"creation_date":1513849946,"post_id":25340415,"comment_id":82811974,"body_markdown":"Not a proper solution for problem of a main question, but if you&#39;re facing that issue during writing tests (like I did), then IMO this is pretty good solution.","body":"Not a proper solution for problem of a main question, but if you&#39;re facing that issue during writing tests (like I did), then IMO this is pretty good solution."},{"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"score":0,"creation_date":1549543435,"post_id":25340415,"comment_id":95944987,"body_markdown":"H2 artifact in pom did solve the problem for me too. But I needed to work with different DB, So I replaced H2 artifact with postgresql artifact and it worked as well. The issue is that spring needs to know which DB it is and there is no default. So you just need to get the correct DB artifact into your pom file and that should resolve your issue","body":"H2 artifact in pom did solve the problem for me too. But I needed to work with different DB, So I replaced H2 artifact with postgresql artifact and it worked as well. The issue is that spring needs to know which DB it is and there is no default. So you just need to get the correct DB artifact into your pom file and that should resolve your issue"}],"tags":[],"owner":{"account_id":341413,"reputation":4448,"user_id":672009,"accept_rate":79,"display_name":"user672009"},"comment_count":9,"down_vote_count":4,"up_vote_count":125,"is_accepted":false,"score":121,"last_activity_date":1549650839,"creation_date":1408194098,"answer_id":25340415,"question_id":24074749,"body_markdown":"If you want to use embedded H2 database from Spring Boot starter add the below dependency to your pom file.\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.3.156&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nBut as mentioned in comments, the embedded H2 database keeps data in memory and doesn&#39;t stores it permanently.","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>If you want to use embedded H2 database from Spring Boot starter add the below dependency to your pom file.</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n        &lt;artifactId&gt;h2&lt;/artifactId&gt;\n        &lt;version&gt;1.3.156&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>But as mentioned in comments, the embedded H2 database keeps data in memory and doesn't stores it permanently.</p>\n"},{"tags":[],"owner":{"account_id":4690037,"reputation":31,"user_id":3796391,"display_name":"user3796391"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1420618089,"creation_date":1420618089,"answer_id":27814926,"question_id":24074749,"body_markdown":"In my case , I put it a maven dependency for org.jasig.cas in my pom that triggered a hibernate dependency and that caused Spring Boot to look for a datasource to auto-configure hibernate persistence.\r\nI solved it by adding the com.h2database maven dependency as suggested by user672009. Thanks guys!","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>In my case , I put it a maven dependency for org.jasig.cas in my pom that triggered a hibernate dependency and that caused Spring Boot to look for a datasource to auto-configure hibernate persistence.\nI solved it by adding the com.h2database maven dependency as suggested by user672009. Thanks guys!</p>\n"},{"tags":[],"owner":{"account_id":5730744,"reputation":186,"user_id":4526369,"display_name":"Arturo Araya"},"comment_count":0,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1509618156,"creation_date":1425930410,"answer_id":28950546,"question_id":24074749,"body_markdown":"From the [Spring manual][1].\n\n&gt;Spring Boot can auto-configure embedded H2, HSQL, and Derby databases. You dont need to provide any connection URLs, simply include a build dependency to the embedded database that you want to use.\n&gt;\n&gt;For example, typical POM dependencies would be:\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\n        &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n\nFor me leaving out the spring-boot-starter-data-jpa dependency and just using the spring-boot-starter-jdbc dependency worked like a charm, as long as I had h2 (or hsqldb) included as dependencies.\n\n\n  [1]: http://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-sql.html#boot-features-embedded-database-support","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>From the <a href=\"http://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-sql.html#boot-features-embedded-database-support\" rel=\"noreferrer\">Spring manual</a>.</p>\n<blockquote>\n<p>Spring Boot can auto-configure embedded H2, HSQL, and Derby databases. You dont need to provide any connection URLs, simply include a build dependency to the embedded database that you want to use.</p>\n<p>For example, typical POM dependencies would be:</p>\n</blockquote>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\n    &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>For me leaving out the spring-boot-starter-data-jpa dependency and just using the spring-boot-starter-jdbc dependency worked like a charm, as long as I had h2 (or hsqldb) included as dependencies.</p>\n"},{"comments":[{"owner":{"account_id":874712,"reputation":19505,"user_id":924597,"accept_rate":79,"display_name":"Shorn"},"score":3,"creation_date":1434854099,"post_id":30875876,"comment_id":49953897,"body_markdown":"Documentation on exluding found here: http://docs.spring.io/spring-boot/docs/current/reference/html/using-boot-auto-configuration.html","body":"Documentation on exluding found here: <a href=\"http://docs.spring.io/spring-boot/docs/current/reference/html/using-boot-auto-configuration.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/html/&hellip;</a>"}],"tags":[],"owner":{"account_id":3475520,"reputation":129,"user_id":2908829,"display_name":"bcsshdha"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1434480796,"creation_date":1434480796,"answer_id":30875876,"question_id":24074749,"body_markdown":"I don&#39;t if it is too late to answer. \r\nI could solve this issue by excluding DataSourceAutoConfiguration from spring boot.","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>I don't if it is too late to answer. \nI could solve this issue by excluding DataSourceAutoConfiguration from spring boot.</p>\n"},{"comments":[{"owner":{"account_id":5588556,"reputation":8451,"user_id":4428471,"accept_rate":46,"display_name":"zhuguowei"},"score":3,"creation_date":1463058121,"post_id":32095553,"comment_id":61908085,"body_markdown":"Thanks! could config it in `application.properties`, like `spring.main.web-environment=false`","body":"Thanks! could config it in <code>application.properties</code>, like <code>spring.main.web-environment=false</code>"},{"owner":{"account_id":210974,"reputation":545,"user_id":462891,"display_name":"cs94njw"},"score":2,"creation_date":1545313456,"post_id":32095553,"comment_id":94586733,"body_markdown":"I found `@EnableAutoConfiguration` in a non-SpringBootApplication class, and had to add the exclude there too.  TBH, I probably don&#39;t need `@EnableAutoConfiguration` there in the first place :/","body":"I found <code>@EnableAutoConfiguration</code> in a non-SpringBootApplication class, and had to add the exclude there too.  TBH, I probably don&#39;t need <code>@EnableAutoConfiguration</code> there in the first place :/"}],"tags":[],"owner":{"account_id":1199784,"reputation":18304,"user_id":1170677,"accept_rate":54,"display_name":"Adelin"},"comment_count":2,"down_vote_count":1,"up_vote_count":97,"is_accepted":false,"score":96,"last_activity_date":1439987325,"creation_date":1439987325,"answer_id":32095553,"question_id":24074749,"body_markdown":"I&#39;d the same problem and excluding the DataSourceAutoConfiguration solved the problem. \r\n\r\n    @SpringBootApplication\r\n    @EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class})\r\n    public class RecommendationEngineWithCassandraApplication {\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(RecommendationEngineWithCassandraApplication.class, args);\r\n        }\r\n    }","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>I'd the same problem and excluding the DataSourceAutoConfiguration solved the problem. </p>\n\n<pre><code>@SpringBootApplication\n@EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class})\npublic class RecommendationEngineWithCassandraApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(RecommendationEngineWithCassandraApplication.class, args);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4813898,"reputation":337,"user_id":3886537,"display_name":"Anil"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1481093210,"creation_date":1442935826,"answer_id":32720979,"question_id":24074749,"body_markdown":"Doing below works. \r\n\r\n    @EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class})\r\n\r\nBut If I wanted to have dataSource, I should not do the above configuration. \r\nThe below link says that we need to all the properties in application.properties file. All the properties should start with \r\n`spring.datasource.*`\r\n\r\nhttp://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>Doing below works. </p>\n\n<pre><code>@EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class})\n</code></pre>\n\n<p>But If I wanted to have dataSource, I should not do the above configuration. \nThe below link says that we need to all the properties in application.properties file. All the properties should start with \n<code>spring.datasource.*</code></p>\n\n<p><a href=\"http://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html\" rel=\"nofollow noreferrer\">http://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html</a></p>\n"},{"comments":[{"owner":{"account_id":5024623,"reputation":3851,"user_id":4037019,"accept_rate":100,"display_name":"cst1992"},"score":7,"creation_date":1475229634,"post_id":33085173,"comment_id":66870867,"body_markdown":"This one is for people who don&#39;t understand why they &#39;mysteriously&#39; require database access in their application when they shouldn&#39;t(e.g when the database access is being handled by some other application and this one is just a &#39;client&#39;).","body":"This one is for people who don&#39;t understand why they &#39;mysteriously&#39; require database access in their application when they shouldn&#39;t(e.g when the database access is being handled by some other application and this one is just a &#39;client&#39;)."}],"tags":[],"owner":{"account_id":132233,"reputation":3702,"user_id":332788,"accept_rate":71,"display_name":"aliopi"},"comment_count":1,"down_vote_count":0,"up_vote_count":67,"is_accepted":false,"score":67,"last_activity_date":1487313440,"creation_date":1444664778,"answer_id":33085173,"question_id":24074749,"body_markdown":"This worked for me (1.3.0.M5) :\r\n\r\n    import org.springframework.boot.autoconfigure.jdbc.*;\r\n    import org.springframework.boot.autoconfigure.orm.jpa.*;\r\n\r\n    @Configuration\r\n    @EnableAutoConfiguration(exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class})\r\n    public class Application {\r\n\r\nExclude both classes.\r\n\r\nIt did not work with\r\n\r\n    @SpringBootApplication(exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class})","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>This worked for me (1.3.0.M5) :</p>\n\n<pre><code>import org.springframework.boot.autoconfigure.jdbc.*;\nimport org.springframework.boot.autoconfigure.orm.jpa.*;\n\n@Configuration\n@EnableAutoConfiguration(exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class})\npublic class Application {\n</code></pre>\n\n<p>Exclude both classes.</p>\n\n<p>It did not work with</p>\n\n<pre><code>@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6943111,"reputation":1653,"user_id":5328679,"accept_rate":72,"display_name":"Felipe S."},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1446292810,"creation_date":1446292810,"answer_id":33451297,"question_id":24074749,"body_markdown":"As this is one of the first topics returned in google for this error, I&#39;ll post what I did in case someone face the same issue..\r\nI didn&#39;t want to exclude `DataSourceAutoConfiguration` neither use a memory database.. \r\n\r\nIn my case I was setting the parameters as the other repliers said but the `application.properties` file was inside the wrong folder.. lol\r\n\r\nSo in case nothing like this works, check if the file is inside `src/main/resources`! In my case it was inside `src/main/resources/static`","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>As this is one of the first topics returned in google for this error, I'll post what I did in case someone face the same issue..\nI didn't want to exclude <code>DataSourceAutoConfiguration</code> neither use a memory database.. </p>\n\n<p>In my case I was setting the parameters as the other repliers said but the <code>application.properties</code> file was inside the wrong folder.. lol</p>\n\n<p>So in case nothing like this works, check if the file is inside <code>src/main/resources</code>! In my case it was inside <code>src/main/resources/static</code></p>\n"},{"tags":[],"owner":{"account_id":7247808,"reputation":3044,"user_id":5819877,"accept_rate":100,"display_name":"Praveen Kumar K S"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1453364075,"creation_date":1453364075,"answer_id":34918484,"question_id":24074749,"body_markdown":"Answer is very simple, SpringBoot will look for Embeddable database driver, If you didn&#39;t configure in any of your configuration in form of XML or Annotations, it will throws this exception.\r\nMake the changes in your annotation like this\r\n&lt;pre&gt;&lt;code&gt;@EnableAutoConfiguration(exclude=DataSourceAutoConfiguration.class)&lt;/pre&gt;&lt;/code&gt; this will exclude the DataSourceAutoConfiguration.\r\nAnd the Perfect Simple Coding completion would be work if you have properly configured your class.\r\n&lt;pre&gt;&lt;code&gt;\r\n    `@Controller`\r\n    `@EnableAutoConfiguration(exclude=DataSourceAutoConfiguration.class)`\r\n     `public class SimpleController {`\r\n      `@RequestMapping(&quot;/&quot;)`\r\n      `@ResponseBody`\r\n       `String home() {`\r\n        `return &quot;Hello World!&quot;;`\r\n       `}public static void main(String[] args) throws Exception {`\r\n        `SpringApplication.run(SimpleController.class, args);`\r\n       `}`\r\n    `}`&lt;/pre&gt;&lt;/code&gt;","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>Answer is very simple, SpringBoot will look for Embeddable database driver, If you didn't configure in any of your configuration in form of XML or Annotations, it will throws this exception.\nMake the changes in your annotation like this\n<pre><code>@EnableAutoConfiguration(exclude=DataSourceAutoConfiguration.class)</pre></code> this will exclude the DataSourceAutoConfiguration.\nAnd the Perfect Simple Coding completion would be work if you have properly configured your class.\n<pre><code>\n    <code>@Controller</code>\n    <code>@EnableAutoConfiguration(exclude=DataSourceAutoConfiguration.class)</code>\n     <code>public class SimpleController {</code>\n      <code>@RequestMapping(\"/\")</code>\n      <code>@ResponseBody</code>\n       <code>String home() {</code>\n        <code>return \"Hello World!\";</code>\n       <code>}public static void main(String[] args) throws Exception {</code>\n        <code>SpringApplication.run(SimpleController.class, args);</code>\n       <code>}</code>\n    <code>}</code></pre></code></p>\n"},{"tags":[],"owner":{"account_id":7247808,"reputation":3044,"user_id":5819877,"accept_rate":100,"display_name":"Praveen Kumar K S"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1453371989,"creation_date":1453371989,"answer_id":34921106,"question_id":24074749,"body_markdown":"You can download the derby-10.10.1.1.jar from the [Maven Repository][1] and place it in your WEB-INF/lib folder, like this Application/WEB-INF/lib/derby-10.10.1.1.jar.\r\nYour embedded AnnotationConfigEmbeddedWebApplicationContext will pickup the database driver and your webserver will start running without any issues :-)\r\n\r\n\r\n  [1]: http://mvnrepository.com/artifact/org.apache.derby/derby/10.10.1.1","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>You can download the derby-10.10.1.1.jar from the <a href=\"http://mvnrepository.com/artifact/org.apache.derby/derby/10.10.1.1\" rel=\"nofollow\">Maven Repository</a> and place it in your WEB-INF/lib folder, like this Application/WEB-INF/lib/derby-10.10.1.1.jar.\nYour embedded AnnotationConfigEmbeddedWebApplicationContext will pickup the database driver and your webserver will start running without any issues :-)</p>\n"},{"tags":[],"owner":{"account_id":4535771,"reputation":21,"user_id":3685027,"display_name":"Virmerson"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1470498389,"creation_date":1470498389,"answer_id":38806026,"question_id":24074749,"body_markdown":"I solve my problem just adding **@AutoConfigureTestDatabase(replace=Replace.NONE)**\r\n    \r\n    @RunWith(SpringRunner.class)\r\n    @DataJpaTest\r\n    @AutoConfigureTestDatabase(replace=Replace.NONE)\r\n    public class TestClienteRepository {\r\n    \r\n    }\r\n\r\n","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>I solve my problem just adding <strong>@AutoConfigureTestDatabase(replace=Replace.NONE)</strong></p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@DataJpaTest\n@AutoConfigureTestDatabase(replace=Replace.NONE)\npublic class TestClienteRepository {\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9130767,"reputation":41,"user_id":6792493,"display_name":"RWork"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1472974703,"creation_date":1472971726,"answer_id":39314301,"question_id":24074749,"body_markdown":"If you are using Gradle, include right jar of driver as below:\r\n\r\n    compile(&quot;org.mongodb:mongo-java-driver:3.3.0&quot;)\r\n\r\nOr if using Maven then do it in Maven style, it should solve your problem.","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>If you are using Gradle, include right jar of driver as below:</p>\n\n<pre><code>compile(\"org.mongodb:mongo-java-driver:3.3.0\")\n</code></pre>\n\n<p>Or if using Maven then do it in Maven style, it should solve your problem.</p>\n"},{"tags":[],"owner":{"account_id":1831530,"reputation":799,"user_id":1662829,"accept_rate":65,"display_name":"decapo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1474426346,"creation_date":1474426346,"answer_id":39606774,"question_id":24074749,"body_markdown":"To anybody coming to this thread after hours of banging your head against a wall.  I solved this error by changing\r\n\r\n    create table `group`(\r\n    \tid char(19) primary key\r\n    );\r\n\r\nto \r\n\r\n    create table if not exists `group`(\r\n    \tid char(19) primary key\r\n    );\r\nin my schema.sql file in the resources directory.","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>To anybody coming to this thread after hours of banging your head against a wall.  I solved this error by changing</p>\n\n<pre><code>create table `group`(\n    id char(19) primary key\n);\n</code></pre>\n\n<p>to </p>\n\n<pre><code>create table if not exists `group`(\n    id char(19) primary key\n);\n</code></pre>\n\n<p>in my schema.sql file in the resources directory.</p>\n"},{"tags":[],"owner":{"account_id":7717125,"reputation":141,"user_id":5844489,"display_name":"xiaofeig"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1479438947,"creation_date":1479438947,"answer_id":40668788,"question_id":24074749,"body_markdown":"I had two dependencies with groupId of org.springframework.data, then I removed jpa and kept mongodb only , and it worked!\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-data-mongodb&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n\r\n ","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>I had two dependencies with groupId of org.springframework.data, then I removed jpa and kept mongodb only , and it worked!</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-data-mongodb&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4448063,"reputation":2887,"user_id":3620833,"accept_rate":67,"display_name":"Vino"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1490607862,"creation_date":1490607862,"answer_id":43043020,"question_id":24074749,"body_markdown":"Spring boot will look for datasoure properties in application.properties file.\r\n\r\nPlease define it in application.properties or yml file\r\n\r\n**application.properties**\r\n\r\n    spring.datasource.url=xxx\r\n    spring.datasource.username=xxx\r\n    spring.datasource.password=xxx\r\n    spring.datasource.driver-class-name=xxx\r\n\r\nIf you need your own configuration you could set your own profile and use the datasource values while bean creation.\r\n","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>Spring boot will look for datasoure properties in application.properties file.</p>\n\n<p>Please define it in application.properties or yml file</p>\n\n<p><strong>application.properties</strong></p>\n\n<pre><code>spring.datasource.url=xxx\nspring.datasource.username=xxx\nspring.datasource.password=xxx\nspring.datasource.driver-class-name=xxx\n</code></pre>\n\n<p>If you need your own configuration you could set your own profile and use the datasource values while bean creation.</p>\n"},{"tags":[],"owner":{"account_id":266517,"reputation":996,"user_id":554132,"display_name":"Ajitesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1492668926,"creation_date":1492668926,"answer_id":43511600,"question_id":24074749,"body_markdown":"I faced this exception while I was doing APIs for ElasticSearch using Spring Data. I did the following and it worked.\r\n\r\n    @SpringDataApplication(exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class})","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>I faced this exception while I was doing APIs for ElasticSearch using Spring Data. I did the following and it worked.</p>\n\n<pre><code>@SpringDataApplication(exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class})\n</code></pre>\n"},{"comments":[{"owner":{"account_id":32627,"reputation":8886,"user_id":90674,"accept_rate":100,"display_name":"sshow"},"score":1,"creation_date":1504192518,"post_id":44190020,"comment_id":78929515,"body_markdown":"Exactly my problem as well. Adding the flag to the VM arguments of the debug configuration (`Run -&gt; Debug configurations... -&gt; Maven build -&gt; [build name] -&gt; JRE -&gt; VM arguments`)","body":"Exactly my problem as well. Adding the flag to the VM arguments of the debug configuration (<code>Run -&gt; Debug configurations... -&gt; Maven build -&gt; [build name] -&gt; JRE -&gt; VM arguments</code>)"}],"tags":[],"owner":{"account_id":379606,"reputation":5664,"user_id":733092,"accept_rate":86,"display_name":"Noumenon"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1495747222,"creation_date":1495747222,"answer_id":44190020,"question_id":24074749,"body_markdown":"I got the error message in the title from `o.s.b.d.LoggingFailureAnalysisReporter` along with the message &quot;APPLICATION FAILED TO START&quot;. It turned out that I hadn&#39;t added `-Dspring.profiles.active=dev` to my Eclipse debug configuration so I had no active profile.","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>I got the error message in the title from <code>o.s.b.d.LoggingFailureAnalysisReporter</code> along with the message \"APPLICATION FAILED TO START\". It turned out that I hadn't added <code>-Dspring.profiles.active=dev</code> to my Eclipse debug configuration so I had no active profile.</p>\n"},{"comments":[{"owner":{"account_id":3319350,"reputation":1394,"user_id":2790903,"accept_rate":57,"display_name":"Doe Johnson"},"score":0,"creation_date":1540167696,"post_id":44826982,"comment_id":92751447,"body_markdown":"This is especially useful when you have multiple profiles and one of them is in-memory.","body":"This is especially useful when you have multiple profiles and one of them is in-memory."},{"owner":{"account_id":8689931,"reputation":289,"user_id":6503105,"display_name":"AbdelRahmane"},"score":1,"creation_date":1572118685,"post_id":44826982,"comment_id":103464433,"body_markdown":"For me, I needed to exluse HibernateJpaAutoConfiguration also in order to work : spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration, org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration","body":"For me, I needed to exluse HibernateJpaAutoConfiguration also in order to work : spring.autoconfigure.exclude=org.springframework.boot.autoco&zwnj;&#8203;nfigure.jdbc.DataSou&zwnj;&#8203;rceAutoConfiguration&zwnj;&#8203;, org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaA&zwnj;&#8203;utoConfiguration"},{"owner":{"account_id":316046,"reputation":101,"user_id":632002,"display_name":"Fadi Chamieh"},"score":0,"creation_date":1682942493,"post_id":44826982,"comment_id":134287212,"body_markdown":"worked perfectly fine in my case, where i was launching from command line","body":"worked perfectly fine in my case, where i was launching from command line"}],"tags":[],"owner":{"account_id":5488688,"reputation":1124,"user_id":4362715,"display_name":"redoff"},"comment_count":3,"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1518500570,"creation_date":1498744021,"answer_id":44826982,"question_id":24074749,"body_markdown":"You can add \r\n\r\n    spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration   \r\n\r\n\r\nto your `application.properties` file.","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>You can add </p>\n\n<pre><code>spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration   \n</code></pre>\n\n<p>to your <code>application.properties</code> file.</p>\n"},{"tags":[],"owner":{"account_id":4436233,"reputation":81,"user_id":3612019,"display_name":"naresh goyal"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1502203111,"creation_date":1502203111,"answer_id":45571291,"question_id":24074749,"body_markdown":"I too faced the same issue. \r\n\r\n    Cannot determine embedded database driver class for database type NONE.\r\n\r\nIn my case deleting the jar file from repository corresponding to the database fixes the issue. There was corrupted jar present in the repository which was causing the issue. ","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>I too faced the same issue. </p>\n\n<pre><code>Cannot determine embedded database driver class for database type NONE.\n</code></pre>\n\n<p>In my case deleting the jar file from repository corresponding to the database fixes the issue. There was corrupted jar present in the repository which was causing the issue. </p>\n"},{"tags":[],"owner":{"account_id":3043751,"reputation":3340,"user_id":2580058,"accept_rate":100,"display_name":"Karol Kr&#243;l"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1505910063,"creation_date":1505910063,"answer_id":46321962,"question_id":24074749,"body_markdown":"If you really need &quot;spring-boot-starter-data-jpa&quot; as your project dependency and at the same time you don&#39;t want to allow your app to access any database, you can simply exclude auto-configuration classes\r\n\r\n    @SpringBootApplication(exclude = DataSourceAutoConfiguration.class)","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>If you really need \"spring-boot-starter-data-jpa\" as your project dependency and at the same time you don't want to allow your app to access any database, you can simply exclude auto-configuration classes</p>\n\n<pre><code>@SpringBootApplication(exclude = DataSourceAutoConfiguration.class)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2337627,"reputation":803,"user_id":2049580,"display_name":"Bagesh Sharma"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1515123222,"creation_date":1511347256,"answer_id":47432579,"question_id":24074749,"body_markdown":"I tried all the mentioned things above but could not resolve the issue. I am using SQLite and my SQLite file was in the resources directory.\r\n\r\na) **Set Up done for IDE**\r\n\r\nI need to manually add below lines in the .classpath file of my project.\r\n\r\n    &lt;classpathentry kind=&quot;src&quot; path=&quot;resources&quot;/&gt;\r\n    &lt;classpathentry kind=&quot;output&quot; path=&quot;target/classes&quot;/&gt;\r\n\r\nAfter that, I refreshed and Cleaned the project from MenuBar at the top. like Project-&gt;Clean-&gt;My Project Name.\r\n\r\nAfter that, I run the project and problem resolved.\r\n\r\n**application.properties** for my project is\r\n\r\n    spring.datasource.url=jdbc:sqlite:resources/apiusers.sqlite\r\n    spring.datasource.driver-class-name=org.sqlite.JDBC\r\n    spring.jpa.properties.hibernate.dialect=com.enigmabridge.hibernate.dialect.SQLiteDialect\r\n    spring.datasource.username=\r\n    spring.datasource.password=\r\n    spring.jpa.hibernate.ddl-auto=update\r\n\r\n b) **Set Up done if Jar deployment throw same error**\r\n\r\nYou need to add following lines to your pom.xml\r\n\r\n    \r\n      &lt;build&gt;\r\n\t\t\t&lt;resources&gt;\r\n\t\t\t&lt;resource&gt;\r\n\t\t\t\t&lt;directory&gt;resources&lt;/directory&gt;\r\n\t\t\t\t&lt;targetPath&gt;${project.build.outputDirectory}&lt;/targetPath&gt;\r\n\t\t\t\t&lt;includes&gt;\r\n\t\t\t\t\t&lt;include&gt;application.properties&lt;/include&gt;\r\n\t\t\t\t&lt;/includes&gt;\r\n\t\t\t&lt;/resource&gt;\r\n\t\t&lt;/resources&gt;\r\n\t&lt;/build&gt;\r\n\r\nMay be it may help someone.","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>I tried all the mentioned things above but could not resolve the issue. I am using SQLite and my SQLite file was in the resources directory.</p>\n\n<p>a) <strong>Set Up done for IDE</strong></p>\n\n<p>I need to manually add below lines in the .classpath file of my project.</p>\n\n<pre><code>&lt;classpathentry kind=\"src\" path=\"resources\"/&gt;\n&lt;classpathentry kind=\"output\" path=\"target/classes\"/&gt;\n</code></pre>\n\n<p>After that, I refreshed and Cleaned the project from MenuBar at the top. like Project->Clean->My Project Name.</p>\n\n<p>After that, I run the project and problem resolved.</p>\n\n<p><strong>application.properties</strong> for my project is</p>\n\n<pre><code>spring.datasource.url=jdbc:sqlite:resources/apiusers.sqlite\nspring.datasource.driver-class-name=org.sqlite.JDBC\nspring.jpa.properties.hibernate.dialect=com.enigmabridge.hibernate.dialect.SQLiteDialect\nspring.datasource.username=\nspring.datasource.password=\nspring.jpa.hibernate.ddl-auto=update\n</code></pre>\n\n<p>b) <strong>Set Up done if Jar deployment throw same error</strong></p>\n\n<p>You need to add following lines to your pom.xml</p>\n\n<pre><code>  &lt;build&gt;\n        &lt;resources&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;resources&lt;/directory&gt;\n            &lt;targetPath&gt;${project.build.outputDirectory}&lt;/targetPath&gt;\n            &lt;includes&gt;\n                &lt;include&gt;application.properties&lt;/include&gt;\n            &lt;/includes&gt;\n        &lt;/resource&gt;\n    &lt;/resources&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>May be it may help someone.</p>\n"},{"tags":[],"owner":{"account_id":2518649,"reputation":375,"user_id":2189445,"display_name":"Prashant Sharma"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1518004104,"creation_date":1518004104,"answer_id":48663055,"question_id":24074749,"body_markdown":"if you do not have any database in your application simply disable the auto-config of datasource by adding below annotation.\r\n\r\n    @SpringBootApplication(exclude={DataSourceAutoConfiguration.class})","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>if you do not have any database in your application simply disable the auto-config of datasource by adding below annotation.</p>\n\n<pre><code>@SpringBootApplication(exclude={DataSourceAutoConfiguration.class})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13398259,"reputation":11,"user_id":9668524,"display_name":""},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1524128915,"creation_date":1524125620,"answer_id":49915992,"question_id":24074749,"body_markdown":"The same to @Anas. I can run it in Eclipse, but when i use &quot;java -jar ...&quot; run it, it giving me this error. Then i find my java build path is wrong, it missing the folder src/main/resources, so, the application can&#39;t find application.properties. When i add the src/main/resources folder in java build path, it worked.\r\n\r\nAnd, you need add &quot;@PropertySource({&quot;application.properties&quot;})&quot; in your Application class.\r\n\r\n[Screenshot-1][1]\r\n\r\n[Screenshot-2][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lPQHX.png\r\n  [2]: https://i.stack.imgur.com/2h59v.png","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>The same to @Anas. I can run it in Eclipse, but when i use \"java -jar ...\" run it, it giving me this error. Then i find my java build path is wrong, it missing the folder src/main/resources, so, the application can't find application.properties. When i add the src/main/resources folder in java build path, it worked.</p>\n\n<p>And, you need add \"@PropertySource({\"application.properties\"})\" in your Application class.</p>\n\n<p><a href=\"https://i.stack.imgur.com/lPQHX.png\" rel=\"nofollow noreferrer\">Screenshot-1</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/2h59v.png\" rel=\"nofollow noreferrer\">Screenshot-2</a></p>\n"},{"tags":[],"owner":{"account_id":4403145,"reputation":614,"user_id":3588217,"accept_rate":55,"display_name":"greenhorn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524548983,"creation_date":1524548983,"answer_id":49994268,"question_id":24074749,"body_markdown":"Right click the project and select the following option Maven -&gt; Update Project. This has solved my issue.","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>Right click the project and select the following option Maven -> Update Project. This has solved my issue.</p>\n"},{"tags":[],"owner":{"account_id":6181130,"reputation":2050,"user_id":4816597,"accept_rate":67,"display_name":"imbond"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1525366131,"creation_date":1525366131,"answer_id":50160158,"question_id":24074749,"body_markdown":"Generally, such error occurs when you&#39;ve used JPA and forget to add database connection. So, you must add database related dependencies in your application. \r\n\r\nThough, you want to use JPA without connecting any external database then add hsqldb in your dependency.\r\n\r\nI hope this helps!","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>Generally, such error occurs when you've used JPA and forget to add database connection. So, you must add database related dependencies in your application. </p>\n\n<p>Though, you want to use JPA without connecting any external database then add hsqldb in your dependency.</p>\n\n<p>I hope this helps!</p>\n"},{"tags":[],"owner":{"account_id":13715324,"reputation":191,"user_id":9896584,"display_name":"Philip Dilip"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1528190539,"creation_date":1528189449,"answer_id":50696222,"question_id":24074749,"body_markdown":"This is how I resolved this problem.\r\n\r\nIn my case: I had to configure the datasource for MySQL Server, which was an external Server. \r\n\r\nAs we all know, Spring boot has capability to auto-configure DataSource for embedded databases.\r\n\r\nThus, I realized that I had to disable datasource auto-configuration in order use my custom configuration.\r\n\r\nAs mentioned above by many, I disabled Automatic DataSource configuration of Spring Boot at application.properties\r\n\r\n\r\n&gt; spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration\r\n\r\n\r\nI defined all hibernate configuration properties in a separate file: \r\nhibernate-mysql.properties\r\n\r\nThen, I coded my own Custom Hibernate Configuration in following manner and it resolved the issue. \r\n\r\nMy way to configure the desired DataSource based on properties in a custom property file and populate your LocalSessionFactoryBean with your data source and other hibernate configuration. \r\n\r\n**Hibernate Custom Configuration Class:-**&lt;br&gt;\r\n**---------------------------------------------------------**&lt;br&gt;\r\n&lt;br&gt;\r\n\r\n[Hibernate Custom Configuration][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lZOXJ.png","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>This is how I resolved this problem.</p>\n\n<p>In my case: I had to configure the datasource for MySQL Server, which was an external Server. </p>\n\n<p>As we all know, Spring boot has capability to auto-configure DataSource for embedded databases.</p>\n\n<p>Thus, I realized that I had to disable datasource auto-configuration in order use my custom configuration.</p>\n\n<p>As mentioned above by many, I disabled Automatic DataSource configuration of Spring Boot at application.properties</p>\n\n<blockquote>\n  <p>spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration</p>\n</blockquote>\n\n<p>I defined all hibernate configuration properties in a separate file: \nhibernate-mysql.properties</p>\n\n<p>Then, I coded my own Custom Hibernate Configuration in following manner and it resolved the issue. </p>\n\n<p>My way to configure the desired DataSource based on properties in a custom property file and populate your LocalSessionFactoryBean with your data source and other hibernate configuration. </p>\n\n<p><strong>Hibernate Custom Configuration Class:-</strong><br>\n<strong>---------------------------------------------------------</strong><br>\n<br></p>\n\n<p><a href=\"https://i.stack.imgur.com/lZOXJ.png\" rel=\"nofollow noreferrer\">Hibernate Custom Configuration</a></p>\n"},{"tags":[],"owner":{"account_id":13863452,"reputation":1,"user_id":10008494,"display_name":"www314599782"},"comment_count":0,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1530238399,"creation_date":1530238002,"answer_id":51093364,"question_id":24074749,"body_markdown":"Delete `C:\\Users\\admin\\.IntelliJIdea2018.1\\system\\compile-server`","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>Delete <code>C:\\Users\\admin\\.IntelliJIdea2018.1\\system\\compile-server</code></p>\n"},{"tags":[],"owner":{"account_id":2539887,"reputation":478,"user_id":2205911,"accept_rate":0,"display_name":"Leo Lee"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1543937544,"creation_date":1531797249,"answer_id":51372713,"question_id":24074749,"body_markdown":"In my case, using IDEA, after remove the **`out`** direcory, then everything return to normal. I just don&#39;t know why, but it worked out.","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>In my case, using IDEA, after remove the <strong><code>out</code></strong> direcory, then everything return to normal. I just don't know why, but it worked out.</p>\n"},{"comments":[{"owner":{"account_id":36915,"reputation":3723,"user_id":105408,"accept_rate":75,"display_name":"markthegrea"},"score":0,"creation_date":1545573223,"post_id":53441352,"comment_id":94652935,"body_markdown":"I didn&#39;t need a database and was getting this error.  I added this and it fixed it.","body":"I didn&#39;t need a database and was getting this error.  I added this and it fixed it."}],"tags":[],"owner":{"account_id":6833305,"reputation":3084,"user_id":5256337,"display_name":"Lova Chittumuri"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1542952935,"creation_date":1542952935,"answer_id":53441352,"question_id":24074749,"body_markdown":"Use this below dependency.\r\n\r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n       &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n       &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>Use this below dependency.</p>\n\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n   &lt;artifactId&gt;h2&lt;/artifactId&gt;\n   &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":14522826,"reputation":431,"user_id":10490028,"display_name":"Carlos Pimentel"},"score":0,"creation_date":1671135489,"post_id":54132859,"comment_id":132039394,"body_markdown":"This worked for me as well. I&#39;ve been fighting with a database connection issue with Java for an hour thanks @rajeev you made my day","body":"This worked for me as well. I&#39;ve been fighting with a database connection issue with Java for an hour thanks @rajeev you made my day"}],"tags":[],"owner":{"account_id":3653998,"reputation":5437,"user_id":3045483,"accept_rate":86,"display_name":"rajeev pani.."},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1547137204,"creation_date":1547137204,"answer_id":54132859,"question_id":24074749,"body_markdown":"I&#39;d the similar problem and excluding the DataSourceAutoConfiguration and HibernateJpaAutoConfiguration solved the problem.\r\n\r\nI have added these two lines in my application.properties file and it worked.\r\n\r\n    \r\n\r\n    &gt; spring.autoconfigure.exclude[0]=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration\r\n    &gt; spring.autoconfigure.exclude[1]=org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration\r\n\r\n","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>I'd the similar problem and excluding the DataSourceAutoConfiguration and HibernateJpaAutoConfiguration solved the problem.</p>\n\n<p>I have added these two lines in my application.properties file and it worked.</p>\n\n<pre><code>&gt; spring.autoconfigure.exclude[0]=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration\n&gt; spring.autoconfigure.exclude[1]=org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4548484,"reputation":345,"user_id":3694297,"display_name":"Sangeeth"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1551062310,"creation_date":1551062310,"answer_id":54858773,"question_id":24074749,"body_markdown":"Already enough of answers were posted. However, I&#39;m posting what mistake i did and how i corrected it.\r\n\r\nIn my case, i had packaged my project as `pom` instead of `jar`\r\n\r\n**pom.xml:**\r\n\r\n    ...\r\n     &lt;packaging&gt;pom&lt;/packaging&gt;\r\n    ...\r\n\r\nChanged to:\r\n\r\n    ...\r\n     &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    ...\r\n\r\nIt may helpful for someone with the same mistake.","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>Already enough of answers were posted. However, I'm posting what mistake i did and how i corrected it.</p>\n\n<p>In my case, i had packaged my project as <code>pom</code> instead of <code>jar</code></p>\n\n<p><strong>pom.xml:</strong></p>\n\n<pre><code>...\n &lt;packaging&gt;pom&lt;/packaging&gt;\n...\n</code></pre>\n\n<p>Changed to:</p>\n\n<pre><code>...\n &lt;packaging&gt;jar&lt;/packaging&gt;\n...\n</code></pre>\n\n<p>It may helpful for someone with the same mistake.</p>\n"},{"tags":[],"owner":{"account_id":1407557,"reputation":51,"user_id":3591888,"display_name":"shashin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631876652,"creation_date":1631876652,"answer_id":69222355,"question_id":24074749,"body_markdown":"My application file wasn&#39;t being read and Spring was trying to connect to an embedded H2 database (that wasn&#39;t added in the pom) instead. This was throwing the following error message:\r\n   \r\n\r\n&gt; if you have database settings to be loaded from a particular profile\r\n&gt; you may need to activate it (no profiles are currently active).\r\n\r\n\r\nMake sure that your application file is being read by following [this][1] question.\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/33022827/3591888","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>My application file wasn't being read and Spring was trying to connect to an embedded H2 database (that wasn't added in the pom) instead. This was throwing the following error message:</p>\n<blockquote>\n<p>if you have database settings to be loaded from a particular profile\nyou may need to activate it (no profiles are currently active).</p>\n</blockquote>\n<p>Make sure that your application file is being read by following <a href=\"https://stackoverflow.com/q/33022827/3591888\">this</a> question.</p>\n"},{"tags":[],"owner":{"account_id":10993587,"reputation":94,"user_id":8076598,"display_name":"Nakshtra"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637829538,"creation_date":1637829538,"answer_id":70108055,"question_id":24074749,"body_markdown":"If none of it works, try Making a Repository class as well as RepositoryInterface, \r\nthough a class of implementation should automatically be generated by spring boot,\r\nthis is what worked for me.","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>If none of it works, try Making a Repository class as well as RepositoryInterface,\nthough a class of implementation should automatically be generated by spring boot,\nthis is what worked for me.</p>\n"},{"tags":[],"owner":{"account_id":1668855,"reputation":14404,"user_id":2700303,"accept_rate":63,"display_name":"MiguelSlv"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677858821,"creation_date":1677858821,"answer_id":75629252,"question_id":24074749,"body_markdown":"In my case i had an empty application.properties file at `target\\classes`. \r\nI just deleted to fix the problem.","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>In my case i had an empty application.properties file at <code>target\\classes</code>.\nI just deleted to fix the problem.</p>\n"}],"owner":{"account_id":412334,"reputation":33756,"user_id":785349,"accept_rate":94,"display_name":"quarks"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":585829,"favorite_count":0,"down_vote_count":0,"up_vote_count":234,"accepted_answer_id":24086178,"answer_count":36,"score":234,"last_activity_date":1677858821,"creation_date":1402032284,"question_id":24074749,"body_markdown":"This is the error that is thrown when trying to run my web app:\r\n\r\n    [INFO] WARNING: Nested in org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration&#39;: Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private javax.sql.DataSource org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.dataSource; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceAutoConfiguration$NonEmbeddedConfiguration.class]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public javax.sql.DataSource org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$NonEmbeddedConfiguration.dataSource()] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath.:\r\n        [INFO] org.springframework.beans.factory.BeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath.\r\n        [INFO] \tat org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.getDriverClassName(DataSourceProperties.java:91)\r\n        [INFO] \tat org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$NonEmbeddedConfiguration.dataSource(DataSourceAutoConfiguration.java:100)\r\n        [INFO] \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        [INFO] \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n        [INFO] \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        [INFO] \tat java.lang.reflect.Method.invoke(Method.java:606)\r\n        [INFO] \tat com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)\r\n        [INFO] \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:166)\r\n        [INFO] \tat org.springframework.beans.factory.support.ConstructorResolver$3.run(ConstructorResolver.java:580)\r\n        [INFO] \tat java.security.AccessController.doPrivileged(Native Method)\r\n        [INFO] \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:577)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1094)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:989)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:504)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\r\n        [INFO] \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)\r\n        [INFO] \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1017)\r\n        [INFO] \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:960)\r\n        [INFO] \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:858)\r\n        [INFO] \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:480)\r\n        [INFO] \tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)\r\n        [INFO] \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:289)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1185)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\r\n        [INFO] \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)\r\n        [INFO] \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:370)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1094)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:989)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:504)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\r\n        [INFO] \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\r\n        [INFO] \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)\r\n        [INFO] \tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:973)\r\n        [INFO] \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:750)\r\n        [INFO] \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:482)\r\n        [INFO] \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:683)\r\n        [INFO] \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:313)\r\n        [INFO] \tat org.springframework.boot.builder.SpringApplicationBuilder.run(SpringApplicationBuilder.java:142)\r\n        [INFO] \tat org.springframework.boot.legacy.context.web.SpringBootContextLoaderListener.initWebApplicationContext(SpringBootContextLoaderListener.java:60)\r\n        [INFO] \tat org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:106)\r\n        [INFO] \tat org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548)\r\n        [INFO] \tat org.mortbay.jetty.servlet.Context.startContext(Context.java:136)\r\n        [INFO] \tat org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)\r\n        [INFO] \tat org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)\r\n        [INFO] \tat org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)\r\n        [INFO] \tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)\r\n        [INFO] \tat org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)\r\n        [INFO] \tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)\r\n        [INFO] \tat org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)\r\n        [INFO] \tat org.mortbay.jetty.Server.doStart(Server.java:224)\r\n        [INFO] \tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)\r\n        [INFO] \tat com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:249)\r\n        [INFO] \tat com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:306)\r\n        [INFO] \tat com.google.appengine.tools.development.AutomaticInstanceHolder.startUp(AutomaticInstanceHolder.java:26)\r\n        [INFO] \tat com.google.appengine.tools.development.AbstractModule.startup(AbstractModule.java:79)\r\n        [INFO] \tat com.google.appengine.tools.development.Modules.startup(Modules.java:88)\r\n        [INFO] \tat com.google.appengine.tools.development.DevAppServerImpl.doStart(DevAppServerImpl.java:254)\r\n        [INFO] \tat com.google.appengine.tools.development.DevAppServerImpl.access$000(DevAppServerImpl.java:47)\r\n        [INFO] \tat com.google.appengine.tools.development.DevAppServerImpl$1.run(DevAppServerImpl.java:212)\r\n        [INFO] \tat com.google.appengine.tools.development.DevAppServerImpl$1.run(DevAppServerImpl.java:210)\r\n        [INFO] \tat java.security.AccessController.doPrivileged(Native Method)\r\n        [INFO] \tat com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:210)\r\n        [INFO] \tat com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:277)\r\n        [INFO] \tat com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48)\r\n        [INFO] \tat com.google.appengine.tools.development.DevAppServerMain.run(DevAppServerMain.java:219)\r\n        [INFO] \tat com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:210)\r\n\r\n\r\nI believe I have the right combination of `datanucleus-appengine` and `datanucleus` jars:\r\n\r\n&gt; 2.1: Requires DataNucleus 3.1.x (core, api-jdo, api-jpa, enhancer). Requires SDK 1.6.4+ Note that this release of Datanucleus is no longer\r\n&gt; supported by the DataNucleus project\r\n\r\n\r\n**JPA App Config:**\r\n\r\n    @Configuration\r\n    @EnableJpaRepositories(&quot;demo.core.entity&quot;)\r\n    @EnableTransactionManagement\r\n    class JpaApplicationConfig {\r\n        private static final Logger logger = Logger\r\n                .getLogger(JpaApplicationConfig.class.getName());\r\n        @Bean\r\n        public AbstractEntityManagerFactoryBean entityManagerFactory() {\r\n            logger.info(&quot;Loading Entity Manager...&quot;);\r\n            LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\r\n            factory.setPersistenceUnitName(&quot;transactions-optional&quot;);\r\n            return factory;\r\n        }\r\n        @Bean\r\n        public PlatformTransactionManager transactionManager() {\r\n            logger.info(&quot;Loading Transaction Manager...&quot;);\r\n            JpaTransactionManager txManager = new JpaTransactionManager();\r\n            txManager.setEntityManagerFactory(entityManagerFactory().getObject());\r\n            return txManager;\r\n        }\r\n        @Bean\r\n        public PersistenceExceptionTranslator persistenceExceptionTranslator() {\r\n            return new OpenJpaDialect();\r\n        }\r\n    }\r\n\r\n**Application.java**\r\n\r\n    @Configuration\r\n    @ComponentScan\r\n    @EnableAutoConfiguration\r\n    @RestController\r\n    public class Application {\r\n    \r\n        private static final EntityManagerFactory INSTANCE =\r\n                Persistence.createEntityManagerFactory(&quot;transactions-optional&quot;);\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(Application.class, args);\r\n        }\r\n        \r\n        @RequestMapping(&quot;/&quot;)\r\n        public String home() {\r\n        \treturn &quot;Hello World&quot;;\r\n        }\r\n    \r\n    }\r\n\r\n**POM:**\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;...&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n    \t&lt;groupId&gt;org.demohq&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;demo-boot&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;packaging&gt;war&lt;/packaging&gt;\r\n    \r\n    \t&lt;name&gt;demo-boot&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project&lt;/description&gt;\r\n    \r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.1.0.BUILD-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;/parent&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-legacy&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.1.0.BUILD-SNAPSHOT&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!--&lt;dependency&gt;--&gt;\r\n    \t\t\t&lt;!--&lt;groupId&gt;net.kindleit&lt;/groupId&gt;--&gt;\r\n    \t\t\t&lt;!--&lt;artifactId&gt;gae-runtime&lt;/artifactId&gt;--&gt;\r\n    \t\t\t&lt;!--&lt;version&gt;${gae.version}&lt;/version&gt;--&gt;\r\n    \t\t\t&lt;!--&lt;type&gt;pom&lt;/type&gt;--&gt;\r\n    \t\t\t&lt;!--&lt;scope&gt;provided&lt;/scope&gt;--&gt;\r\n    \t\t&lt;!--&lt;/dependency&gt;--&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!--&lt;dependency&gt;--&gt;\r\n                &lt;!--&lt;groupId&gt;org.hsqldb&lt;/groupId&gt;--&gt;\r\n                &lt;!--&lt;artifactId&gt;hsqldb&lt;/artifactId&gt;--&gt;\r\n                &lt;!--&lt;scope&gt;runtime&lt;/scope&gt;--&gt;\r\n            &lt;!--&lt;/dependency&gt;--&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.google.appengine&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;appengine-api-labs&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${gae.version}&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.google.appengine&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;appengine-api-stubs&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${gae.version}&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.google.appengine&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;appengine-testing&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${gae.version}&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n            &lt;!-- DataNucleus --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\r\n                &lt;artifactId&gt;datanucleus-api-jpa&lt;/artifactId&gt;\r\n                &lt;version&gt;${datanucleus.jpa.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\r\n                &lt;artifactId&gt;datanucleus-core&lt;/artifactId&gt;\r\n                &lt;version&gt;${datanucleus.jpa.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\r\n                &lt;artifactId&gt;datanucleus-enhancer&lt;/artifactId&gt;\r\n                &lt;version&gt;${datanucleus.jpa.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.google.appengine.orm&lt;/groupId&gt;\r\n                &lt;artifactId&gt;datanucleus-appengine&lt;/artifactId&gt;\r\n                &lt;version&gt;${datanucleus.version}&lt;/version&gt;\r\n                &lt;!-- Need to exclude the enhancer since it interfere with the enhancer plugin. --&gt;\r\n                &lt;exclusions&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;datanucleus-enhancer&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                &lt;/exclusions&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.jdo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jdo-api&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.geronimo.specs&lt;/groupId&gt;\r\n                &lt;artifactId&gt;geronimo-jpa_2.0_spec&lt;/artifactId&gt;\r\n                &lt;version&gt;1.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;!-- OpenJPA --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.openjpa&lt;/groupId&gt;\r\n                &lt;artifactId&gt;openjpa-persistence&lt;/artifactId&gt;\r\n                &lt;version&gt;2.3.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n    \r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;start-class&gt;demo.Application&lt;/start-class&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n    \t\t&lt;java.version&gt;1.7&lt;/java.version&gt;\r\n    \t\t&lt;m2eclipse.wtp.contextRoot&gt;/&lt;/m2eclipse.wtp.contextRoot&gt;\r\n            &lt;datanucleus.jpa.version&gt;3.1.1&lt;/datanucleus.jpa.version&gt;\r\n            &lt;datanucleus.version&gt;2.1.2&lt;/datanucleus.version&gt;\r\n    \t\t&lt;gae.version&gt;1.8.8&lt;/gae.version&gt;\r\n    \t\t&lt;gae.home&gt;${settings.localRepository}/com/google/appengine/appengine-java-sdk/${gae.version}/appengine-java-sdk/appengine-java-sdk-${gae.version}&lt;/gae.home&gt;\r\n    \t\t&lt;gae.application.version&gt;test&lt;/gae.application.version&gt;\r\n            &lt;!--&lt;org.springframework-version&gt;4.0.5.RELEASE&lt;/org.springframework-version&gt;--&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n                &lt;!--\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;net.kindleit&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-gae-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;0.9.6&lt;/version&gt;\r\n    \t\t\t\t&lt;dependencies&gt;\r\n    \t\t\t\t\t&lt;dependency&gt;\r\n    \t\t\t\t\t\t&lt;groupId&gt;net.kindleit&lt;/groupId&gt;\r\n    \t\t\t\t\t\t&lt;artifactId&gt;gae-runtime&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t&lt;version&gt;${gae.version}&lt;/version&gt;\r\n    \t\t\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n    \t\t\t\t\t&lt;/dependency&gt;\r\n    \t\t\t\t&lt;/dependencies&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n                --&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;com.google.appengine&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;appengine-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${gae.version}&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;enableJarClasses&gt;false&lt;/enableJarClasses&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;goals&gt;gae:deploy&lt;/goals&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;tomcat6-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;2.0&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;path&gt;/&lt;/path&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-datanucleus-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${datanucleus.jpa.version}&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;api&gt;JPA&lt;/api&gt;\r\n                        &lt;!--&lt;mappingIncludes&gt;**/entity/*.class&lt;/mappingIncludes&gt;--&gt;\r\n                        &lt;verbose&gt;true&lt;/verbose&gt;\r\n                    &lt;/configuration&gt;\r\n                    &lt;dependencies&gt;\r\n                        &lt;dependency&gt;\r\n                            &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;datanucleus-core&lt;/artifactId&gt;\r\n                            &lt;version&gt;${datanucleus.jpa.version}&lt;/version&gt;\r\n                        &lt;/dependency&gt;\r\n                    &lt;/dependencies&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;phase&gt;compile&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;enhance&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    \t&lt;profiles&gt;\r\n    \t\t&lt;!-- We can configure our integration server to activate this profile and \r\n    \t\t\tperform gae:deploy, thus uploading latest snapshot to the http://1.latest.&lt;applicationName&gt;.appspot.com \r\n    \t\t\tautomatically --&gt;\r\n    \t\t&lt;profile&gt;\r\n    \t\t\t&lt;id&gt;integration-build&lt;/id&gt;\r\n    \t\t\t&lt;properties&gt;\r\n    \t\t\t\t&lt;gae.application.version&gt;stage&lt;/gae.application.version&gt;\r\n    \t\t\t&lt;/properties&gt;\r\n    \t\t&lt;/profile&gt;\r\n    \r\n    \t\t&lt;!-- This profile will activate automatically during release and upload \r\n    \t\t\tapplication to the http://2.latest.&lt;applicationName&gt;.appspot.com (We might \r\n    \t\t\twant to set the 2nd version as our applications Default version to be accessible \r\n    \t\t\tat http://&lt;applicationName&gt;.appspot.com) --&gt;\r\n    \t\t&lt;profile&gt;\r\n    \t\t\t&lt;id&gt;release-build&lt;/id&gt;\r\n    \t\t\t&lt;activation&gt;\r\n    \t\t\t\t&lt;property&gt;\r\n    \t\t\t\t\t&lt;name&gt;performRelease&lt;/name&gt;\r\n    \t\t\t\t\t&lt;value&gt;true&lt;/value&gt;\r\n    \t\t\t\t&lt;/property&gt;\r\n    \t\t\t&lt;/activation&gt;\r\n    \r\n    \t\t\t&lt;properties&gt;\r\n    \t\t\t\t&lt;!-- During release, set application version in appengine-web.xml to \r\n    \t\t\t\t\t2 --&gt;\r\n    \t\t\t\t&lt;gae.application.version&gt;release&lt;/gae.application.version&gt;\r\n    \t\t\t&lt;/properties&gt;\r\n    \t\t&lt;/profile&gt;\r\n    \t&lt;/profiles&gt;\r\n    \r\n    \t&lt;repositories&gt;\r\n    \t\t&lt;repository&gt;\r\n    \t\t\t&lt;id&gt;spring-snapshots&lt;/id&gt;\r\n    \t\t\t&lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n    \t\t\t&lt;url&gt;http://repo.spring.io/snapshot&lt;/url&gt;\r\n    \t\t\t&lt;snapshots&gt;\r\n    \t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n    \t\t\t&lt;/snapshots&gt;\r\n    \t\t&lt;/repository&gt;\r\n    \t\t&lt;repository&gt;\r\n    \t\t\t&lt;id&gt;spring-milestones&lt;/id&gt;\r\n    \t\t\t&lt;name&gt;Spring Milestones&lt;/name&gt;\r\n    \t\t\t&lt;url&gt;http://repo.spring.io/milestone&lt;/url&gt;\r\n    \t\t\t&lt;snapshots&gt;\r\n    \t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n    \t\t\t&lt;/snapshots&gt;\r\n    \t\t&lt;/repository&gt;\r\n    \t&lt;/repositories&gt;\r\n    \t&lt;pluginRepositories&gt;\r\n    \t\t&lt;pluginRepository&gt;\r\n    \t\t\t&lt;id&gt;spring-snapshots&lt;/id&gt;\r\n    \t\t\t&lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n    \t\t\t&lt;url&gt;http://repo.spring.io/snapshot&lt;/url&gt;\r\n    \t\t\t&lt;snapshots&gt;\r\n    \t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n    \t\t\t&lt;/snapshots&gt;\r\n    \t\t&lt;/pluginRepository&gt;\r\n    \t\t&lt;pluginRepository&gt;\r\n    \t\t\t&lt;id&gt;spring-milestones&lt;/id&gt;\r\n    \t\t\t&lt;name&gt;Spring Milestones&lt;/name&gt;\r\n    \t\t\t&lt;url&gt;http://repo.spring.io/milestone&lt;/url&gt;\r\n    \t\t\t&lt;snapshots&gt;\r\n    \t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n    \t\t\t&lt;/snapshots&gt;\r\n    \t\t&lt;/pluginRepository&gt;\r\n    \t&lt;/pluginRepositories&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\nI wonder what could be missing in my app? I followed the instruction from here https://stackoverflow.com/questions/15359784/using-spring-data-jpa-on-google-appengine\r\n\r\n","title":"Spring Boot - Cannot determine embedded database driver class for database type NONE","body":"<p>This is the error that is thrown when trying to run my web app:</p>\n\n<pre><code>[INFO] WARNING: Nested in org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private javax.sql.DataSource org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.dataSource; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceAutoConfiguration$NonEmbeddedConfiguration.class]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public javax.sql.DataSource org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$NonEmbeddedConfiguration.dataSource()] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath.:\n    [INFO] org.springframework.beans.factory.BeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath.\n    [INFO]  at org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.getDriverClassName(DataSourceProperties.java:91)\n    [INFO]  at org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$NonEmbeddedConfiguration.dataSource(DataSourceAutoConfiguration.java:100)\n    [INFO]  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    [INFO]  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    [INFO]  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    [INFO]  at java.lang.reflect.Method.invoke(Method.java:606)\n    [INFO]  at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)\n    [INFO]  at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:166)\n    [INFO]  at org.springframework.beans.factory.support.ConstructorResolver$3.run(ConstructorResolver.java:580)\n    [INFO]  at java.security.AccessController.doPrivileged(Native Method)\n    [INFO]  at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:577)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1094)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:989)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:504)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\n    [INFO]  at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)\n    [INFO]  at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1017)\n    [INFO]  at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:960)\n    [INFO]  at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:858)\n    [INFO]  at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:480)\n    [INFO]  at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)\n    [INFO]  at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:289)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1185)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\n    [INFO]  at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)\n    [INFO]  at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:370)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1094)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:989)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:504)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\n    [INFO]  at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)\n    [INFO]  at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:973)\n    [INFO]  at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:750)\n    [INFO]  at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:482)\n    [INFO]  at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:683)\n    [INFO]  at org.springframework.boot.SpringApplication.run(SpringApplication.java:313)\n    [INFO]  at org.springframework.boot.builder.SpringApplicationBuilder.run(SpringApplicationBuilder.java:142)\n    [INFO]  at org.springframework.boot.legacy.context.web.SpringBootContextLoaderListener.initWebApplicationContext(SpringBootContextLoaderListener.java:60)\n    [INFO]  at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:106)\n    [INFO]  at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548)\n    [INFO]  at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)\n    [INFO]  at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)\n    [INFO]  at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)\n    [INFO]  at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)\n    [INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)\n    [INFO]  at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)\n    [INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)\n    [INFO]  at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)\n    [INFO]  at org.mortbay.jetty.Server.doStart(Server.java:224)\n    [INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)\n    [INFO]  at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:249)\n    [INFO]  at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:306)\n    [INFO]  at com.google.appengine.tools.development.AutomaticInstanceHolder.startUp(AutomaticInstanceHolder.java:26)\n    [INFO]  at com.google.appengine.tools.development.AbstractModule.startup(AbstractModule.java:79)\n    [INFO]  at com.google.appengine.tools.development.Modules.startup(Modules.java:88)\n    [INFO]  at com.google.appengine.tools.development.DevAppServerImpl.doStart(DevAppServerImpl.java:254)\n    [INFO]  at com.google.appengine.tools.development.DevAppServerImpl.access$000(DevAppServerImpl.java:47)\n    [INFO]  at com.google.appengine.tools.development.DevAppServerImpl$1.run(DevAppServerImpl.java:212)\n    [INFO]  at com.google.appengine.tools.development.DevAppServerImpl$1.run(DevAppServerImpl.java:210)\n    [INFO]  at java.security.AccessController.doPrivileged(Native Method)\n    [INFO]  at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:210)\n    [INFO]  at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:277)\n    [INFO]  at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48)\n    [INFO]  at com.google.appengine.tools.development.DevAppServerMain.run(DevAppServerMain.java:219)\n    [INFO]  at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:210)\n</code></pre>\n\n<p>I believe I have the right combination of <code>datanucleus-appengine</code> and <code>datanucleus</code> jars:</p>\n\n<blockquote>\n  <p>2.1: Requires DataNucleus 3.1.x (core, api-jdo, api-jpa, enhancer). Requires SDK 1.6.4+ Note that this release of Datanucleus is no longer\n  supported by the DataNucleus project</p>\n</blockquote>\n\n<p><strong>JPA App Config:</strong></p>\n\n<pre><code>@Configuration\n@EnableJpaRepositories(\"demo.core.entity\")\n@EnableTransactionManagement\nclass JpaApplicationConfig {\n    private static final Logger logger = Logger\n            .getLogger(JpaApplicationConfig.class.getName());\n    @Bean\n    public AbstractEntityManagerFactoryBean entityManagerFactory() {\n        logger.info(\"Loading Entity Manager...\");\n        LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\n        factory.setPersistenceUnitName(\"transactions-optional\");\n        return factory;\n    }\n    @Bean\n    public PlatformTransactionManager transactionManager() {\n        logger.info(\"Loading Transaction Manager...\");\n        JpaTransactionManager txManager = new JpaTransactionManager();\n        txManager.setEntityManagerFactory(entityManagerFactory().getObject());\n        return txManager;\n    }\n    @Bean\n    public PersistenceExceptionTranslator persistenceExceptionTranslator() {\n        return new OpenJpaDialect();\n    }\n}\n</code></pre>\n\n<p><strong>Application.java</strong></p>\n\n<pre><code>@Configuration\n@ComponentScan\n@EnableAutoConfiguration\n@RestController\npublic class Application {\n\n    private static final EntityManagerFactory INSTANCE =\n            Persistence.createEntityManagerFactory(\"transactions-optional\");\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n\n    @RequestMapping(\"/\")\n    public String home() {\n        return \"Hello World\";\n    }\n\n}\n</code></pre>\n\n<p><strong>POM:</strong></p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"...\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.demohq&lt;/groupId&gt;\n    &lt;artifactId&gt;demo-boot&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n\n    &lt;name&gt;demo-boot&lt;/name&gt;\n    &lt;description&gt;Demo project&lt;/description&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;1.1.0.BUILD-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-legacy&lt;/artifactId&gt;\n            &lt;version&gt;1.1.0.BUILD-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!--&lt;dependency&gt;--&gt;\n            &lt;!--&lt;groupId&gt;net.kindleit&lt;/groupId&gt;--&gt;\n            &lt;!--&lt;artifactId&gt;gae-runtime&lt;/artifactId&gt;--&gt;\n            &lt;!--&lt;version&gt;${gae.version}&lt;/version&gt;--&gt;\n            &lt;!--&lt;type&gt;pom&lt;/type&gt;--&gt;\n            &lt;!--&lt;scope&gt;provided&lt;/scope&gt;--&gt;\n        &lt;!--&lt;/dependency&gt;--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!--&lt;dependency&gt;--&gt;\n            &lt;!--&lt;groupId&gt;org.hsqldb&lt;/groupId&gt;--&gt;\n            &lt;!--&lt;artifactId&gt;hsqldb&lt;/artifactId&gt;--&gt;\n            &lt;!--&lt;scope&gt;runtime&lt;/scope&gt;--&gt;\n        &lt;!--&lt;/dependency&gt;--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.appengine&lt;/groupId&gt;\n            &lt;artifactId&gt;appengine-api-labs&lt;/artifactId&gt;\n            &lt;version&gt;${gae.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.appengine&lt;/groupId&gt;\n            &lt;artifactId&gt;appengine-api-stubs&lt;/artifactId&gt;\n            &lt;version&gt;${gae.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.appengine&lt;/groupId&gt;\n            &lt;artifactId&gt;appengine-testing&lt;/artifactId&gt;\n            &lt;version&gt;${gae.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- DataNucleus --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\n            &lt;artifactId&gt;datanucleus-api-jpa&lt;/artifactId&gt;\n            &lt;version&gt;${datanucleus.jpa.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\n            &lt;artifactId&gt;datanucleus-core&lt;/artifactId&gt;\n            &lt;version&gt;${datanucleus.jpa.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\n            &lt;artifactId&gt;datanucleus-enhancer&lt;/artifactId&gt;\n            &lt;version&gt;${datanucleus.jpa.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.appengine.orm&lt;/groupId&gt;\n            &lt;artifactId&gt;datanucleus-appengine&lt;/artifactId&gt;\n            &lt;version&gt;${datanucleus.version}&lt;/version&gt;\n            &lt;!-- Need to exclude the enhancer since it interfere with the enhancer plugin. --&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\n                    &lt;artifactId&gt;datanucleus-enhancer&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.jdo&lt;/groupId&gt;\n            &lt;artifactId&gt;jdo-api&lt;/artifactId&gt;\n            &lt;version&gt;3.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.geronimo.specs&lt;/groupId&gt;\n            &lt;artifactId&gt;geronimo-jpa_2.0_spec&lt;/artifactId&gt;\n            &lt;version&gt;1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- OpenJPA --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.openjpa&lt;/groupId&gt;\n            &lt;artifactId&gt;openjpa-persistence&lt;/artifactId&gt;\n            &lt;version&gt;2.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n    &lt;/dependencies&gt;\n\n    &lt;properties&gt;\n        &lt;start-class&gt;demo.Application&lt;/start-class&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;java.version&gt;1.7&lt;/java.version&gt;\n        &lt;m2eclipse.wtp.contextRoot&gt;/&lt;/m2eclipse.wtp.contextRoot&gt;\n        &lt;datanucleus.jpa.version&gt;3.1.1&lt;/datanucleus.jpa.version&gt;\n        &lt;datanucleus.version&gt;2.1.2&lt;/datanucleus.version&gt;\n        &lt;gae.version&gt;1.8.8&lt;/gae.version&gt;\n        &lt;gae.home&gt;${settings.localRepository}/com/google/appengine/appengine-java-sdk/${gae.version}/appengine-java-sdk/appengine-java-sdk-${gae.version}&lt;/gae.home&gt;\n        &lt;gae.application.version&gt;test&lt;/gae.application.version&gt;\n        &lt;!--&lt;org.springframework-version&gt;4.0.5.RELEASE&lt;/org.springframework-version&gt;--&gt;\n    &lt;/properties&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;!--\n            &lt;plugin&gt;\n                &lt;groupId&gt;net.kindleit&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-gae-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.9.6&lt;/version&gt;\n                &lt;dependencies&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;net.kindleit&lt;/groupId&gt;\n                        &lt;artifactId&gt;gae-runtime&lt;/artifactId&gt;\n                        &lt;version&gt;${gae.version}&lt;/version&gt;\n                        &lt;type&gt;pom&lt;/type&gt;\n                    &lt;/dependency&gt;\n                &lt;/dependencies&gt;\n            &lt;/plugin&gt;\n            --&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.google.appengine&lt;/groupId&gt;\n                &lt;artifactId&gt;appengine-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${gae.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;enableJarClasses&gt;false&lt;/enableJarClasses&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;goals&gt;gae:deploy&lt;/goals&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\n                &lt;artifactId&gt;tomcat6-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;path&gt;/&lt;/path&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-datanucleus-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${datanucleus.jpa.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;api&gt;JPA&lt;/api&gt;\n                    &lt;!--&lt;mappingIncludes&gt;**/entity/*.class&lt;/mappingIncludes&gt;--&gt;\n                    &lt;verbose&gt;true&lt;/verbose&gt;\n                &lt;/configuration&gt;\n                &lt;dependencies&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\n                        &lt;artifactId&gt;datanucleus-core&lt;/artifactId&gt;\n                        &lt;version&gt;${datanucleus.jpa.version}&lt;/version&gt;\n                    &lt;/dependency&gt;\n                &lt;/dependencies&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;compile&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;enhance&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;profiles&gt;\n        &lt;!-- We can configure our integration server to activate this profile and \n            perform gae:deploy, thus uploading latest snapshot to the http://1.latest.&lt;applicationName&gt;.appspot.com \n            automatically --&gt;\n        &lt;profile&gt;\n            &lt;id&gt;integration-build&lt;/id&gt;\n            &lt;properties&gt;\n                &lt;gae.application.version&gt;stage&lt;/gae.application.version&gt;\n            &lt;/properties&gt;\n        &lt;/profile&gt;\n\n        &lt;!-- This profile will activate automatically during release and upload \n            application to the http://2.latest.&lt;applicationName&gt;.appspot.com (We might \n            want to set the 2nd version as our applications Default version to be accessible \n            at http://&lt;applicationName&gt;.appspot.com) --&gt;\n        &lt;profile&gt;\n            &lt;id&gt;release-build&lt;/id&gt;\n            &lt;activation&gt;\n                &lt;property&gt;\n                    &lt;name&gt;performRelease&lt;/name&gt;\n                    &lt;value&gt;true&lt;/value&gt;\n                &lt;/property&gt;\n            &lt;/activation&gt;\n\n            &lt;properties&gt;\n                &lt;!-- During release, set application version in appengine-web.xml to \n                    2 --&gt;\n                &lt;gae.application.version&gt;release&lt;/gae.application.version&gt;\n            &lt;/properties&gt;\n        &lt;/profile&gt;\n    &lt;/profiles&gt;\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\n            &lt;url&gt;http://repo.spring.io/snapshot&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;http://repo.spring.io/milestone&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n    &lt;pluginRepositories&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\n            &lt;url&gt;http://repo.spring.io/snapshot&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/pluginRepository&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;http://repo.spring.io/milestone&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/pluginRepository&gt;\n    &lt;/pluginRepositories&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>I wonder what could be missing in my app? I followed the instruction from here <a href=\"https://stackoverflow.com/questions/15359784/using-spring-data-jpa-on-google-appengine\">Using Spring Data JPA on Google Appengine</a></p>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":1491916,"reputation":873,"user_id":1398821,"display_name":"arbuzov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574953502,"creation_date":1574953502,"answer_id":59091668,"question_id":59091626,"body_markdown":"    \r\n    @ServletComponentScan\r\n    @SpringBootApplication\r\n    public class Application {\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(Application.class, args);\r\n        }\r\n    }\r\n\r\n\r\n`@ServletComponentScan` will fix the problem","title":"@WebFilter requires ServletComponentScan","body":"<pre><code>@ServletComponentScan\n@SpringBootApplication\npublic class Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n</code></pre>\n\n<p><code>@ServletComponentScan</code> will fix the problem</p>\n"},{"tags":[],"owner":{"account_id":26416562,"reputation":21,"user_id":20064889,"display_name":"Kason"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677858736,"creation_date":1677858736,"answer_id":75629238,"question_id":59091626,"body_markdown":"The `ServletComponentScan` annotation is necessary to enable scanning of Servlet components, including `@WebServlet`, `@WebFilter`, and `@WebListener` in a Spring Boot application and register them with the Servlet Container.\r\n\r\nI would prefer to use `@WebFilter` with `@ServletComponentScan`, but there is another simple way you can register your filter without XML file by using `@Component`.\r\n\r\n```java\r\n@Component\r\npublic class MyFilter implements Filter {\r\n    ...\r\n}\r\n```\r\n\r\nIf you don&#39;t have a particular URL pattern to match, you can use the `@Component` annotation to mark a class as a filter. By implementing the `OncePerRequestFilter` interface, you can ensure that the filter&#39;s `doFilter()` method is executed only once per request. ","title":"@WebFilter requires ServletComponentScan","body":"<p>The <code>ServletComponentScan</code> annotation is necessary to enable scanning of Servlet components, including <code>@WebServlet</code>, <code>@WebFilter</code>, and <code>@WebListener</code> in a Spring Boot application and register them with the Servlet Container.</p>\n<p>I would prefer to use <code>@WebFilter</code> with <code>@ServletComponentScan</code>, but there is another simple way you can register your filter without XML file by using <code>@Component</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class MyFilter implements Filter {\n    ...\n}\n</code></pre>\n<p>If you don't have a particular URL pattern to match, you can use the <code>@Component</code> annotation to mark a class as a filter. By implementing the <code>OncePerRequestFilter</code> interface, you can ensure that the filter's <code>doFilter()</code> method is executed only once per request.</p>\n"}],"owner":{"account_id":1491916,"reputation":873,"user_id":1398821,"display_name":"arbuzov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":254,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1677858736,"creation_date":1574953309,"question_id":59091626,"body_markdown":"Class may be annotated with `@WebFilter(urlPatterns=&quot;*&quot;)` but spring does not run it on request. Why? If I add `@ServletComponentScan` annotation to Application class. It will work fine. an somehow make it work in a different way?","title":"@WebFilter requires ServletComponentScan","body":"<p>Class may be annotated with <code>@WebFilter(urlPatterns=\"*\")</code> but spring does not run it on request. Why? If I add <code>@ServletComponentScan</code> annotation to Application class. It will work fine. an somehow make it work in a different way?</p>\n"},{"tags":["java","spring-boot","pagination","spring-jdbc"],"comments":[{"owner":{"account_id":5478423,"reputation":1520,"user_id":4355748,"accept_rate":56,"display_name":"Rana_S"},"score":0,"creation_date":1665103223,"post_id":73866387,"comment_id":130626890,"body_markdown":"Is this related to `spring-data-jdbc`?","body":"Is this related to <code>spring-data-jdbc</code>?"},{"owner":{"account_id":6683686,"reputation":407,"user_id":5155846,"accept_rate":56,"display_name":"Ahmad"},"score":0,"creation_date":1665426852,"post_id":73866387,"comment_id":130693160,"body_markdown":"@Rana_S yes it is","body":"@Rana_S yes it is"}],"answers":[{"tags":[],"owner":{"account_id":136750,"reputation":6224,"user_id":340467,"accept_rate":68,"display_name":"benzen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677858651,"creation_date":1677858651,"answer_id":75629224,"question_id":73866387,"body_markdown":"Nothing prevent you from doing this. But as of spring boot 3.0.3, this doesn&#39;t trigger the expected behavior","title":"Use dynamic sorting is spring data jdbc custom query","body":"<p>Nothing prevent you from doing this. But as of spring boot 3.0.3, this doesn't trigger the expected behavior</p>\n"}],"owner":{"account_id":6683686,"reputation":407,"user_id":5155846,"accept_rate":56,"display_name":"Ahmad"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":191,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677858651,"creation_date":1664275884,"question_id":73866387,"body_markdown":"I have the following `jdbc` repository method\r\n```\r\n@Query(&quot;select c.id, (select count(s.id) from student s where s.class_id=c.id) from class c limit :limit offset :offset&quot;)\r\nList&lt;ClassInfo&gt; findClassInfo(Integer limit, Integer offset, Sort sort);\r\n```\r\nI need to include `sort` parameter into this native query. is it possible to do so?","title":"Use dynamic sorting is spring data jdbc custom query","body":"<p>I have the following <code>jdbc</code> repository method</p>\n<pre><code>@Query(&quot;select c.id, (select count(s.id) from student s where s.class_id=c.id) from class c limit :limit offset :offset&quot;)\nList&lt;ClassInfo&gt; findClassInfo(Integer limit, Integer offset, Sort sort);\n</code></pre>\n<p>I need to include <code>sort</code> parameter into this native query. is it possible to do so?</p>\n"},{"tags":["java","linux","google-chrome","selenium-webdriver","selenium-chromedriver"],"answers":[{"comments":[{"owner":{"account_id":26958837,"reputation":75,"user_id":20526798,"display_name":"Stewart LloydJones"},"score":0,"creation_date":1676417510,"post_id":75453836,"comment_id":133132246,"body_markdown":"Upgrading Selenium to v4.8.0 fixed the ever however I&#39;m now receiving a new error org.openqa.selenium.remote.ProtocolHandshake.createSession","body":"Upgrading Selenium to v4.8.0 fixed the ever however I&#39;m now receiving a new error org.openqa.selenium.remote.ProtocolHandshake.createSession"},{"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1676417603,"post_id":75453836,"comment_id":133132263,"body_markdown":"@StewartLloydJones How about the Chrome/ChromeDriver versions?","body":"@StewartLloydJones How about the Chrome/ChromeDriver versions?"},{"owner":{"account_id":26958837,"reputation":75,"user_id":20526798,"display_name":"Stewart LloydJones"},"score":0,"creation_date":1676417754,"post_id":75453836,"comment_id":133132289,"body_markdown":"ChromeDriver: 110.0.5481.77 (65ed616c6e8ee3fe0ad64fe83796c020644d42af-refs/branch-heads/5481@{#839})","body":"ChromeDriver: 110.0.5481.77 (65ed616c6e8ee3fe0ad64fe83796c020644d42af-refs/branch-heads/&zwnj;&#8203;5481@{#839})"},{"owner":{"account_id":26958837,"reputation":75,"user_id":20526798,"display_name":"Stewart LloydJones"},"score":0,"creation_date":1676417764,"post_id":75453836,"comment_id":133132294,"body_markdown":"Google Chrome 110.0.5481.77","body":"Google Chrome 110.0.5481.77"},{"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1676417886,"post_id":75453836,"comment_id":133132312,"body_markdown":"Hmmm, seems the error tracelog is inevitable. Raise a new ticket with all the relevant details including error tracelogs.","body":"Hmmm, seems the error tracelog is inevitable. Raise a new ticket with all the relevant details including error tracelogs."},{"owner":{"account_id":26958837,"reputation":75,"user_id":20526798,"display_name":"Stewart LloydJones"},"score":0,"creation_date":1676418508,"post_id":75453836,"comment_id":133132419,"body_markdown":"https://stackoverflow.com/questions/75454317/selenium-google-chrome-org-openqa-selenium-sessionnotcreatedexception","body":"<a href=\"https://stackoverflow.com/questions/75454317/selenium-google-chrome-org-openqa-selenium-sessionnotcreatedexception\" title=\"selenium google chrome org openqa selenium sessionnotcreatedexception\">stackoverflow.com/questions/75454317/&hellip;</a>"}],"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676413700,"creation_date":1676413700,"answer_id":75453836,"question_id":75453713,"body_markdown":"This error message...\r\n\r\n\tThe server encountered an unexpected condition that prevented it from fulfilling the request\r\n\r\n...implies that [ChromeDriver](https://stackoverflow.com/a/59927747/7429447) was unable to spawn a new _Browsing Context_ i.e. [tag:google-chrome] session.\r\n\r\nYour main issue is the **incompatibility** between the `--headless=new` argument/functionality and the [Selenium](https://stackoverflow.com/a/54482491/7429447) version you are using.\r\n\r\n- You are using _Selenium v3.14.0_\r\n\r\n\t  Build info: version: &amp;#39;3.14.0&amp;#39;\r\n\r\n- But you are trying to use the argument _**`--headless=new`**_\r\n\r\nwhere as [_**`--headless=new`**_](https://stackoverflow.com/a/75417182/7429447) argument/feature landed with _**Selenium v4.8.0**_\r\n\r\n\r\n----------\r\n\r\n\r\n\r\nSolution\r\n--------\r\nTo use the argument [_`--headless=new`_](https://stackoverflow.com/q/75367068/7429447 ) ensure that:\r\n\r\n- _ChromeDriver_ is updated to [ChromeDriver v110.0](https://chromedriver.storage.googleapis.com/index.html?path=110.0.5481.77/) level.\r\n- _Chrome Browser_ is updated to  current _chrome=110.0_ (as per [chromedriver=110.0 release notes](https://chromedriver.storage.googleapis.com/110.0.5481.77/notes.txt)).\r\n- _Selenium_ is upgraded to latest [_**Version 4.8.0**_](https://www.selenium.dev/downloads/).","title":"Selenium Chrome failed to start: crashed using chromedriverin Apache Tomcat/10.0.23 on a remote server","body":"<p>This error message...</p>\n<pre><code>The server encountered an unexpected condition that prevented it from fulfilling the request\n</code></pre>\n<p>...implies that <a href=\"https://stackoverflow.com/a/59927747/7429447\">ChromeDriver</a> was unable to spawn a new <em>Browsing Context</em> i.e. <a href=\"/questions/tagged/google-chrome\" class=\"post-tag\" title=\"show questions tagged &#39;google-chrome&#39;\" aria-label=\"show questions tagged &#39;google-chrome&#39;\" rel=\"tag\" aria-labelledby=\"google-chrome-container\">google-chrome</a> session.</p>\n<p>Your main issue is the <strong>incompatibility</strong> between the <code>--headless=new</code> argument/functionality and the <a href=\"https://stackoverflow.com/a/54482491/7429447\">Selenium</a> version you are using.</p>\n<ul>\n<li><p>You are using <em>Selenium v3.14.0</em></p>\n<pre><code>Build info: version: &amp;#39;3.14.0&amp;#39;\n</code></pre>\n</li>\n<li><p>But you are trying to use the argument <em><strong><code>--headless=new</code></strong></em></p>\n</li>\n</ul>\n<p>where as <a href=\"https://stackoverflow.com/a/75417182/7429447\"><em><strong><code>--headless=new</code></strong></em></a> argument/feature landed with <em><strong>Selenium v4.8.0</strong></em></p>\n<hr />\n<h2>Solution</h2>\n<p>To use the argument <a href=\"https://stackoverflow.com/q/75367068/7429447\"><em><code>--headless=new</code></em></a> ensure that:</p>\n<ul>\n<li><em>ChromeDriver</em> is updated to <a href=\"https://chromedriver.storage.googleapis.com/index.html?path=110.0.5481.77/\" rel=\"nofollow noreferrer\">ChromeDriver v110.0</a> level.</li>\n<li><em>Chrome Browser</em> is updated to  current <em>chrome=110.0</em> (as per <a href=\"https://chromedriver.storage.googleapis.com/110.0.5481.77/notes.txt\" rel=\"nofollow noreferrer\">chromedriver=110.0 release notes</a>).</li>\n<li><em>Selenium</em> is upgraded to latest <a href=\"https://www.selenium.dev/downloads/\" rel=\"nofollow noreferrer\"><em><strong>Version 4.8.0</strong></em></a>.</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1678313777,"post_id":75629206,"comment_id":133510798,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/75629206/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":21694700,"reputation":1,"user_id":21112992,"display_name":"Sammi Jhonson"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677858531,"creation_date":1677858531,"answer_id":75629206,"question_id":75453713,"body_markdown":"Maybe you have not installed browser. Install and try again. ","title":"Selenium Chrome failed to start: crashed using chromedriverin Apache Tomcat/10.0.23 on a remote server","body":"<p>Maybe you have not installed browser. Install and try again.</p>\n"}],"owner":{"account_id":26958837,"reputation":75,"user_id":20526798,"display_name":"Stewart LloydJones"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":430,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75453836,"answer_count":2,"score":1,"last_activity_date":1677858531,"creation_date":1676412667,"question_id":75453713,"body_markdown":"I am running a java webapp in Apache Tomcat/10.0.23 on a remote server which implements selenium chromedriver. However when I create the web driver it returns a HTTP Status 500  Internal Server Error but in the logs is shows ChromeDriver was started successfully.\r\n\r\nGoogle-chrome location: /usr/bin/google-chrome /usr/share/man/man1/google-chrome.1.gz\r\n\r\nGoogle-chrome version: 110.0.5481.77\r\n\r\nChromedriver location:  /usr/bin/chromedriver\r\n\r\nChromedriver version: 110.0.5481.77 (65ed616c6e8ee3fe0ad64fe83796c020644d42af-refs/branch-heads/5481@{#839})\r\n\r\nServlet:\r\n```\r\nimport java.io.IOException;\r\nimport org.openqa.selenium.PageLoadStrategy;\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.openqa.selenium.chrome.ChromeOptions;\r\n\r\nimport jakarta.servlet.ServletException;\r\nimport jakarta.servlet.annotation.WebServlet;\r\nimport jakarta.servlet.http.HttpServlet;\r\nimport jakarta.servlet.http.HttpServletRequest;\r\nimport jakarta.servlet.http.HttpServletResponse;\r\n\r\n@WebServlet(name = &quot;TestServlet&quot;, urlPatterns = { &quot;/test&quot; })\r\npublic class TestServlet extends HttpServlet {\r\n    @Override\r\n    protected void doGet(HttpServletRequest request, HttpServletResponse response)\r\n            throws ServletException, IOException {\r\n\r\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/usr/bin/chromedriver&quot;);\r\n        ChromeOptions options = new ChromeOptions();\r\n        options.setPageLoadStrategy(PageLoadStrategy.EAGER);\r\n        options.addArguments(&quot;--headless=new&quot;);\r\n        options.addArguments(&quot;--disable-dev-shm-usage&quot;);\r\n        options.addArguments(&quot;--no-sandbox&quot;);\r\n        WebDriver driver = new ChromeDriver(options);\r\n        driver.get(&quot;https://www.google.com/&quot;);\r\n        System.out.println(&quot;Page Title: &quot; + driver.getTitle());\r\n        driver.quit();\r\n    }\r\n}\r\n```\r\nError:\r\n```\r\n&lt;body&gt;\r\n\t&lt;h1&gt;HTTP Status 500  Internal Server Error&lt;/h1&gt;\r\n\t&lt;hr class=&quot;line&quot; /&gt;\r\n\t&lt;p&gt;&lt;b&gt;Type&lt;/b&gt; Exception Report&lt;/p&gt;\r\n\t&lt;p&gt;&lt;b&gt;Message&lt;/b&gt; unknown error: Chrome failed to start: crashed.&lt;/p&gt;\r\n\t&lt;p&gt;&lt;b&gt;Description&lt;/b&gt; The server encountered an unexpected condition that prevented it from fulfilling the request.\r\n\t&lt;/p&gt;\r\n\t&lt;p&gt;&lt;b&gt;Exception&lt;/b&gt;&lt;/p&gt;\r\n\t&lt;pre&gt;org.openqa.selenium.WebDriverException: unknown error: Chrome failed to start: crashed.\r\n  (unknown error: DevToolsActivePort file doesn&amp;#39;t exist)\r\n  (The process started from chrome location &amp;#47;usr&amp;#47;bin&amp;#47;google-chrome is no longer running, so ChromeDriver is assuming that Chrome has crashed.)\r\nBuild info: version: &amp;#39;3.14.0&amp;#39;, revision: &amp;#39;aacccce0&amp;#39;, time: &amp;#39;2018-08-02T20:19:58.91Z&amp;#39;\r\nSystem info: host: &amp;#39;ip-xxxxxxxxxxx;, ip: &amp;#39;127.0.0.1&amp;#39;, os.name: &amp;#39;Linux&amp;#39;, os.arch: &amp;#39;amd64&amp;#39;, os.version: &amp;#39;5.10.0-21-cloud-amd64&amp;#39;, java.version: &amp;#39;11.0.15.1&amp;#39;\r\nDriver info: driver.version: ChromeDriver\r\nremote stacktrace: #0 0x5642671afd93 &amp;lt;unknown&amp;gt;\r\n#1 0x564266f7e2d7 &amp;lt;unknown&amp;gt;\r\n#2 0x564266fa6ab0 &amp;lt;unknown&amp;gt;\r\n#3 0x564266fa2a3d &amp;lt;unknown&amp;gt;\r\n#4 0x564266fe74f4 &amp;lt;unknown&amp;gt;\r\n#5 0x564266fde353 &amp;lt;unknown&amp;gt;\r\n#6 0x564266fade40 &amp;lt;unknown&amp;gt;\r\n#7 0x564266faf038 &amp;lt;unknown&amp;gt;\r\n#8 0x5642672038be &amp;lt;unknown&amp;gt;\r\n#9 0x5642672078f0 &amp;lt;unknown&amp;gt;\r\n#10 0x5642671e7f90 &amp;lt;unknown&amp;gt;\r\n#11 0x564267208b7d &amp;lt;unknown&amp;gt;\r\n#12 0x5642671d9578 &amp;lt;unknown&amp;gt;\r\n#13 0x56426722d348 &amp;lt;unknown&amp;gt;\r\n#14 0x56426722d4d6 &amp;lt;unknown&amp;gt;\r\n#15 0x564267247341 &amp;lt;unknown&amp;gt;\r\n#16 0x7f086945dea7 start_thread\r\n\r\n\tjava.base&amp;#47;jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tjava.base&amp;#47;jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tjava.base&amp;#47;jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tjava.base&amp;#47;java.lang.reflect.Constructor.newInstance(Constructor.java:490)\r\n\torg.openqa.selenium.remote.W3CHandshakeResponse.lambda$new$0(W3CHandshakeResponse.java:57)\r\n\torg.openqa.selenium.remote.W3CHandshakeResponse.lambda$getResponseFunction$2(W3CHandshakeResponse.java:104)\r\n\torg.openqa.selenium.remote.ProtocolHandshake.lambda$createSession$0(ProtocolHandshake.java:122)\r\n\tjava.base&amp;#47;java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\n\tjava.base&amp;#47;java.util.Spliterators$ArraySpliterator.tryAdvance(Spliterators.java:958)\r\n\tjava.base&amp;#47;java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:127)\r\n\tjava.base&amp;#47;java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:502)\r\n\tjava.base&amp;#47;java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:488)\r\n\tjava.base&amp;#47;java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n\tjava.base&amp;#47;java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)\r\n\tjava.base&amp;#47;java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tjava.base&amp;#47;java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:543)\r\n\torg.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:125)\r\n\torg.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:73)\r\n\torg.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:136)\r\n\torg.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:83)\r\n\torg.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:548)\r\n\torg.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:212)\r\n\torg.openqa.selenium.remote.RemoteWebDriver.&amp;lt;init&amp;gt;(RemoteWebDriver.java:130)\r\n\torg.openqa.selenium.chrome.ChromeDriver.&amp;lt;init&amp;gt;(ChromeDriver.java:181)\r\n\torg.openqa.selenium.chrome.ChromeDriver.&amp;lt;init&amp;gt;(ChromeDriver.java:168)\r\n\torg.openqa.selenium.chrome.ChromeDriver.&amp;lt;init&amp;gt;(ChromeDriver.java:157)\r\n\tcom.fourdcontrols.servlets.TestServlet.doGet(TestServlet.java:29)\r\n\tjakarta.servlet.http.HttpServlet.service(HttpServlet.java:668)\r\n\tjakarta.servlet.http.HttpServlet.service(HttpServlet.java:777)\r\n\torg.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n&lt;/pre&gt;\r\n\t&lt;p&gt;&lt;b&gt;Note&lt;/b&gt; The full stack trace of the root cause is available in the server logs.&lt;/p&gt;\r\n\t&lt;hr class=&quot;line&quot; /&gt;\r\n\t&lt;h3&gt;Apache Tomcat/10.0.23&lt;/h3&gt;\r\n&lt;/body&gt;\r\n```\r\n\r\n**Log:**\r\n\r\n```\r\nStarting ChromeDriver 110.0.5481.77 (65ed616c6e8ee3fe0ad64fe83796c020644d42af-refs/branch-heads/5481@{#839}) on port 29602\r\nOnly local connections are allowed.\r\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\r\nChromeDriver was started successfully.\r\n```\r\nI&#39;ve tried older versions of chrome driver and google chrome but get the same error.","title":"Selenium Chrome failed to start: crashed using chromedriverin Apache Tomcat/10.0.23 on a remote server","body":"<p>I am running a java webapp in Apache Tomcat/10.0.23 on a remote server which implements selenium chromedriver. However when I create the web driver it returns a HTTP Status 500  Internal Server Error but in the logs is shows ChromeDriver was started successfully.</p>\n<p>Google-chrome location: /usr/bin/google-chrome /usr/share/man/man1/google-chrome.1.gz</p>\n<p>Google-chrome version: 110.0.5481.77</p>\n<p>Chromedriver location:  /usr/bin/chromedriver</p>\n<p>Chromedriver version: 110.0.5481.77 (65ed616c6e8ee3fe0ad64fe83796c020644d42af-refs/branch-heads/5481@{#839})</p>\n<p>Servlet:</p>\n<pre><code>import java.io.IOException;\nimport org.openqa.selenium.PageLoadStrategy;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.chrome.ChromeOptions;\n\nimport jakarta.servlet.ServletException;\nimport jakarta.servlet.annotation.WebServlet;\nimport jakarta.servlet.http.HttpServlet;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\n\n@WebServlet(name = &quot;TestServlet&quot;, urlPatterns = { &quot;/test&quot; })\npublic class TestServlet extends HttpServlet {\n    @Override\n    protected void doGet(HttpServletRequest request, HttpServletResponse response)\n            throws ServletException, IOException {\n\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/usr/bin/chromedriver&quot;);\n        ChromeOptions options = new ChromeOptions();\n        options.setPageLoadStrategy(PageLoadStrategy.EAGER);\n        options.addArguments(&quot;--headless=new&quot;);\n        options.addArguments(&quot;--disable-dev-shm-usage&quot;);\n        options.addArguments(&quot;--no-sandbox&quot;);\n        WebDriver driver = new ChromeDriver(options);\n        driver.get(&quot;https://www.google.com/&quot;);\n        System.out.println(&quot;Page Title: &quot; + driver.getTitle());\n        driver.quit();\n    }\n}\n</code></pre>\n<p>Error:</p>\n<pre><code>&lt;body&gt;\n    &lt;h1&gt;HTTP Status 500  Internal Server Error&lt;/h1&gt;\n    &lt;hr class=&quot;line&quot; /&gt;\n    &lt;p&gt;&lt;b&gt;Type&lt;/b&gt; Exception Report&lt;/p&gt;\n    &lt;p&gt;&lt;b&gt;Message&lt;/b&gt; unknown error: Chrome failed to start: crashed.&lt;/p&gt;\n    &lt;p&gt;&lt;b&gt;Description&lt;/b&gt; The server encountered an unexpected condition that prevented it from fulfilling the request.\n    &lt;/p&gt;\n    &lt;p&gt;&lt;b&gt;Exception&lt;/b&gt;&lt;/p&gt;\n    &lt;pre&gt;org.openqa.selenium.WebDriverException: unknown error: Chrome failed to start: crashed.\n  (unknown error: DevToolsActivePort file doesn&amp;#39;t exist)\n  (The process started from chrome location &amp;#47;usr&amp;#47;bin&amp;#47;google-chrome is no longer running, so ChromeDriver is assuming that Chrome has crashed.)\nBuild info: version: &amp;#39;3.14.0&amp;#39;, revision: &amp;#39;aacccce0&amp;#39;, time: &amp;#39;2018-08-02T20:19:58.91Z&amp;#39;\nSystem info: host: &amp;#39;ip-xxxxxxxxxxx;, ip: &amp;#39;127.0.0.1&amp;#39;, os.name: &amp;#39;Linux&amp;#39;, os.arch: &amp;#39;amd64&amp;#39;, os.version: &amp;#39;5.10.0-21-cloud-amd64&amp;#39;, java.version: &amp;#39;11.0.15.1&amp;#39;\nDriver info: driver.version: ChromeDriver\nremote stacktrace: #0 0x5642671afd93 &amp;lt;unknown&amp;gt;\n#1 0x564266f7e2d7 &amp;lt;unknown&amp;gt;\n#2 0x564266fa6ab0 &amp;lt;unknown&amp;gt;\n#3 0x564266fa2a3d &amp;lt;unknown&amp;gt;\n#4 0x564266fe74f4 &amp;lt;unknown&amp;gt;\n#5 0x564266fde353 &amp;lt;unknown&amp;gt;\n#6 0x564266fade40 &amp;lt;unknown&amp;gt;\n#7 0x564266faf038 &amp;lt;unknown&amp;gt;\n#8 0x5642672038be &amp;lt;unknown&amp;gt;\n#9 0x5642672078f0 &amp;lt;unknown&amp;gt;\n#10 0x5642671e7f90 &amp;lt;unknown&amp;gt;\n#11 0x564267208b7d &amp;lt;unknown&amp;gt;\n#12 0x5642671d9578 &amp;lt;unknown&amp;gt;\n#13 0x56426722d348 &amp;lt;unknown&amp;gt;\n#14 0x56426722d4d6 &amp;lt;unknown&amp;gt;\n#15 0x564267247341 &amp;lt;unknown&amp;gt;\n#16 0x7f086945dea7 start_thread\n\n    java.base&amp;#47;jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    java.base&amp;#47;jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    java.base&amp;#47;jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    java.base&amp;#47;java.lang.reflect.Constructor.newInstance(Constructor.java:490)\n    org.openqa.selenium.remote.W3CHandshakeResponse.lambda$new$0(W3CHandshakeResponse.java:57)\n    org.openqa.selenium.remote.W3CHandshakeResponse.lambda$getResponseFunction$2(W3CHandshakeResponse.java:104)\n    org.openqa.selenium.remote.ProtocolHandshake.lambda$createSession$0(ProtocolHandshake.java:122)\n    java.base&amp;#47;java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\n    java.base&amp;#47;java.util.Spliterators$ArraySpliterator.tryAdvance(Spliterators.java:958)\n    java.base&amp;#47;java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:127)\n    java.base&amp;#47;java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:502)\n    java.base&amp;#47;java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:488)\n    java.base&amp;#47;java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\n    java.base&amp;#47;java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)\n    java.base&amp;#47;java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    java.base&amp;#47;java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:543)\n    org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:125)\n    org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:73)\n    org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:136)\n    org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:83)\n    org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:548)\n    org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:212)\n    org.openqa.selenium.remote.RemoteWebDriver.&amp;lt;init&amp;gt;(RemoteWebDriver.java:130)\n    org.openqa.selenium.chrome.ChromeDriver.&amp;lt;init&amp;gt;(ChromeDriver.java:181)\n    org.openqa.selenium.chrome.ChromeDriver.&amp;lt;init&amp;gt;(ChromeDriver.java:168)\n    org.openqa.selenium.chrome.ChromeDriver.&amp;lt;init&amp;gt;(ChromeDriver.java:157)\n    com.fourdcontrols.servlets.TestServlet.doGet(TestServlet.java:29)\n    jakarta.servlet.http.HttpServlet.service(HttpServlet.java:668)\n    jakarta.servlet.http.HttpServlet.service(HttpServlet.java:777)\n    org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n&lt;/pre&gt;\n    &lt;p&gt;&lt;b&gt;Note&lt;/b&gt; The full stack trace of the root cause is available in the server logs.&lt;/p&gt;\n    &lt;hr class=&quot;line&quot; /&gt;\n    &lt;h3&gt;Apache Tomcat/10.0.23&lt;/h3&gt;\n&lt;/body&gt;\n</code></pre>\n<p><strong>Log:</strong></p>\n<pre><code>Starting ChromeDriver 110.0.5481.77 (65ed616c6e8ee3fe0ad64fe83796c020644d42af-refs/branch-heads/5481@{#839}) on port 29602\nOnly local connections are allowed.\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\nChromeDriver was started successfully.\n</code></pre>\n<p>I've tried older versions of chrome driver and google chrome but get the same error.</p>\n"},{"tags":["java","jax-rs"],"comments":[{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1671818355,"post_id":74899041,"comment_id":132183893,"body_markdown":"Did you try it to see what happens?","body":"Did you try it to see what happens?"},{"owner":{"account_id":6228391,"reputation":708,"user_id":4845935,"display_name":"dimnnv"},"score":0,"creation_date":1671834543,"post_id":74899041,"comment_id":132187025,"body_markdown":"This was the production code that Ive encountered in one of work projects. In theory I could simplify, run and debug it, but regardless of result, I still want to find some sort of official confirmation of how it should work (e.g. documentation reference).","body":"This was the production code that Ive encountered in one of work projects. In theory I could simplify, run and debug it, but regardless of result, I still want to find some sort of official confirmation of how it should work (e.g. documentation reference)."},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1671912639,"post_id":74899041,"comment_id":132196825,"body_markdown":"I can tell you that on the Jersey client side, when you try to send a GET request with a body, you get an &quot;HTTP non-compliance error&quot;. I forgot on the server side, but there might have been a warning if not an error. Other implementations might be different. The semantics of the non-annotated parameter is always to be the body.","body":"I can tell you that on the Jersey client side, when you try to send a GET request with a body, you get an &quot;HTTP non-compliance error&quot;. I forgot on the server side, but there might have been a warning if not an error. Other implementations might be different. The semantics of the non-annotated parameter is always to be the body."}],"answers":[{"tags":[],"owner":{"account_id":1630483,"reputation":4039,"user_id":1505146,"accept_rate":50,"display_name":"Tasos P."},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677842520,"creation_date":1677842520,"answer_id":75626445,"question_id":74899041,"body_markdown":"This is definitely a corner case due to the fact that HTTP specification ([RFC 2616](https://www.rfc-editor.org/rfc/rfc2616#section-9.3) at least) [does not explicitly forbid](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/GET) a body being present in a GET request.\r\n\r\nOn the other hand, JAX-RS ([JSR311](https://jcp.org/aboutJava/communityprocess/mrel/jsr311/index.html)) is very specific in 3.3.2.1:\r\n\r\n&gt; The value of a non-annotated parameter, called the entity parameter, is mapped from the request entity body.\r\nConversion between an entity body and a Java type is the responsibility of an entity provider, see section 4.2. &lt;br/&gt;\r\n&gt; Resource methods MUST NOT have more than one parameter that is not annotated with one of the above-\r\nlisted annotations.\r\n\r\nSo, to finally answer your question:\r\nAssuming your implementation accepts a GET request with a body (highly unlikely, based on my experience), JAX-RS *should* try to read it into the `domain` parameter.\r\n\r\nHowever, I&#39;d expect that `domain` would be `null`, since `GET` requests don&#39;t usually have a body, so with proper `null` handling of the parameter, this behavior can easily go undetected. ","title":"Non-annotated param of resource GET method","body":"<p>This is definitely a corner case due to the fact that HTTP specification (<a href=\"https://www.rfc-editor.org/rfc/rfc2616#section-9.3\" rel=\"nofollow noreferrer\">RFC 2616</a> at least) <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/GET\" rel=\"nofollow noreferrer\">does not explicitly forbid</a> a body being present in a GET request.</p>\n<p>On the other hand, JAX-RS (<a href=\"https://jcp.org/aboutJava/communityprocess/mrel/jsr311/index.html\" rel=\"nofollow noreferrer\">JSR311</a>) is very specific in 3.3.2.1:</p>\n<blockquote>\n<p>The value of a non-annotated parameter, called the entity parameter, is mapped from the request entity body.\nConversion between an entity body and a Java type is the responsibility of an entity provider, see section 4.2. <br/>\nResource methods MUST NOT have more than one parameter that is not annotated with one of the above-\nlisted annotations.</p>\n</blockquote>\n<p>So, to finally answer your question:\nAssuming your implementation accepts a GET request with a body (highly unlikely, based on my experience), JAX-RS <em>should</em> try to read it into the <code>domain</code> parameter.</p>\n<p>However, I'd expect that <code>domain</code> would be <code>null</code>, since <code>GET</code> requests don't usually have a body, so with proper <code>null</code> handling of the parameter, this behavior can easily go undetected.</p>\n"}],"owner":{"account_id":6228391,"reputation":708,"user_id":4845935,"display_name":"dimnnv"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1677858425,"creation_date":1671794291,"question_id":74899041,"body_markdown":"There are multiple annotations in JAX-RS method params: `@QueryParam`, `@PathParam`, etc.\r\nhttps://docs.oracle.com/cd/E19798-01/821-1841/6nmq2cp1v/index.html\r\n\r\nHowever, these annotations are not mandatory. I have a situation when a parameter of GET method is not annotated:\r\n\r\n```\r\n  @GET\r\n  @Produces(MediaType.APPLICATION_JSON)\r\n  public Map&lt;String, Object&gt; getProduct(\r\n      String domain,\r\n      @QueryParam(&quot;code&quot;) String code,\r\n      @QueryParam(&quot;region&quot;) String region\r\n  ) {\r\n```\r\nHere **domain** parameter is not annotated at all. Im not sure what it means. (It is a production code from some repository).\r\n\r\nFor POST methods this would mean that domain parameter would consume request body: https://stackoverflow.com/questions/1725315/how-to-get-full-rest-request-body-using-jersey\r\n\r\nBut what it would mean for GET method? As far as I know body does not make much sense for GET requests (i.e., it can be safely ignored according to web standard).\r\n\r\nWhat is the default fallback for unannotated parameters? I did not find the answer in documentation.","title":"Non-annotated param of resource GET method","body":"<p>There are multiple annotations in JAX-RS method params: <code>@QueryParam</code>, <code>@PathParam</code>, etc.\n<a href=\"https://docs.oracle.com/cd/E19798-01/821-1841/6nmq2cp1v/index.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/cd/E19798-01/821-1841/6nmq2cp1v/index.html</a></p>\n<p>However, these annotations are not mandatory. I have a situation when a parameter of GET method is not annotated:</p>\n<pre><code>  @GET\n  @Produces(MediaType.APPLICATION_JSON)\n  public Map&lt;String, Object&gt; getProduct(\n      String domain,\n      @QueryParam(&quot;code&quot;) String code,\n      @QueryParam(&quot;region&quot;) String region\n  ) {\n</code></pre>\n<p>Here <strong>domain</strong> parameter is not annotated at all. Im not sure what it means. (It is a production code from some repository).</p>\n<p>For POST methods this would mean that domain parameter would consume request body: <a href=\"https://stackoverflow.com/questions/1725315/how-to-get-full-rest-request-body-using-jersey\">How to get full REST request body using Jersey?</a></p>\n<p>But what it would mean for GET method? As far as I know body does not make much sense for GET requests (i.e., it can be safely ignored according to web standard).</p>\n<p>What is the default fallback for unannotated parameters? I did not find the answer in documentation.</p>\n"},{"tags":["java","csv","apache-camel","spring-camel","bindy"],"comments":[{"owner":{"account_id":2269593,"reputation":43917,"user_id":1997376,"accept_rate":100,"display_name":"Nicolas Filotto"},"score":0,"creation_date":1678212487,"post_id":75629178,"comment_id":133488411,"body_markdown":"I&#39;m afraid that your assumption is correct, it is only position-based right now. Feel free to create a ticket for this need","body":"I&#39;m afraid that your assumption is correct, it is only position-based right now. Feel free to create a ticket for this need"}],"owner":{"account_id":1887821,"reputation":2984,"user_id":1706691,"accept_rate":69,"display_name":"James"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1677858398,"creation_date":1677858398,"question_id":75629178,"body_markdown":"I found several examples of [Apache Camel Bindy][1] unmarshalling CSV records into POJOs using field position:\r\n\r\n    @CsvRecord(separator = &quot;,&quot;)\r\n    public class Person {\r\n    \r\n        @DataField(pos = 1)\r\n        private String name;\r\n        @DataField(pos = 2)\r\n        private String address;\r\n\r\nI have 50+ different CSV files that I want to unmarshall into the same POJO. Each file has a header. The header names remain constant between the files, but the field position varies. For example, \r\n\r\n    File1.csv\r\n    --------------------------- \r\n    name,homeAddress,someOtherFields\r\n    bob,123 Any Street,data\r\n     \r\n    File2.csv \r\n    ---------------------------\r\n    homeAddress,name,someOtherFields\r\n    321 XYZ Street,jill,data\r\n     \r\n    File3.csv \r\n    ---------------------------\r\n    name,someOtherFields,homeAddress \r\n    sue,data,123 Any Street\r\n     \r\n    etc.\r\n\r\nI was hoping something like this would work:\r\n    \r\n    @CsvRecord(separator = &quot;,&quot;)\r\n    public class Person {\r\n    \r\n        @DataField(columnName = &quot;name&quot;)\r\n        private String name;\r\n        @DataField(columnName = &quot;homeAddress&quot;)\r\n        private String address;\r\n\r\nBut `columnName` seems to be used for ouptut only. Also, `pos` is required.\r\n\r\n\r\n  [1]: https://camel.apache.org/components/3.20.x/dataformats/bindy-dataformat.html\r\n\r\n","title":"Can Apache Camel unmarshal CSV records into a POJO using header names?","body":"<p>I found several examples of <a href=\"https://camel.apache.org/components/3.20.x/dataformats/bindy-dataformat.html\" rel=\"nofollow noreferrer\">Apache Camel Bindy</a> unmarshalling CSV records into POJOs using field position:</p>\n<pre><code>@CsvRecord(separator = &quot;,&quot;)\npublic class Person {\n\n    @DataField(pos = 1)\n    private String name;\n    @DataField(pos = 2)\n    private String address;\n</code></pre>\n<p>I have 50+ different CSV files that I want to unmarshall into the same POJO. Each file has a header. The header names remain constant between the files, but the field position varies. For example,</p>\n<pre><code>File1.csv\n--------------------------- \nname,homeAddress,someOtherFields\nbob,123 Any Street,data\n \nFile2.csv \n---------------------------\nhomeAddress,name,someOtherFields\n321 XYZ Street,jill,data\n \nFile3.csv \n---------------------------\nname,someOtherFields,homeAddress \nsue,data,123 Any Street\n \netc.\n</code></pre>\n<p>I was hoping something like this would work:</p>\n<pre><code>@CsvRecord(separator = &quot;,&quot;)\npublic class Person {\n\n    @DataField(columnName = &quot;name&quot;)\n    private String name;\n    @DataField(columnName = &quot;homeAddress&quot;)\n    private String address;\n</code></pre>\n<p>But <code>columnName</code> seems to be used for ouptut only. Also, <code>pos</code> is required.</p>\n"},{"tags":["java","language-agnostic","parameters","out-parameters"],"comments":[{"owner":{"account_id":52616,"reputation":1043001,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":1,"creation_date":1292453540,"post_id":4455693,"comment_id":4867681,"body_markdown":"*&quot;return values: I&#39;d like a general solution. I.e. one with several IN OUT parameters involved&quot;* See my answer. Several IN/OUT params? Return an object instance with properties for each. Barring that, no, there&#39;s nothing better than the array trick.","body":"<i>&quot;return values: I&#39;d like a general solution. I.e. one with several IN OUT parameters involved&quot;</i> See my answer. Several IN/OUT params? Return an object instance with properties for each. Barring that, no, there&#39;s nothing better than the array trick."},{"owner":{"account_id":69443,"reputation":85343,"user_id":202009,"accept_rate":79,"display_name":"Andy Thomas"},"score":1,"creation_date":1292454301,"post_id":4455693,"comment_id":4867769,"body_markdown":"When I first began learning Java, after many years of C/C++ development, I also looked for a way to pass by reference. But now, years after that, I can no longer recall the last time I wanted to do that. The array trick is less elegant than other approaches cited in these answers and comments.","body":"When I first began learning Java, after many years of C/C++ development, I also looked for a way to pass by reference. But now, years after that, I can no longer recall the last time I wanted to do that. The array trick is less elegant than other approaches cited in these answers and comments."}],"answers":[{"comments":[{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1292453587,"post_id":4455707,"comment_id":4867692,"body_markdown":"The method won&#39;t be able to return a single value, because I need a **general** solution. I have adapted the example to hold several IN OUT parameters. But maybe returning a generated result object (holding the IN OUT parameters) might actually be an option. +1 for that.","body":"The method won&#39;t be able to return a single value, because I need a <b>general</b> solution. I have adapted the example to hold several IN OUT parameters. But maybe returning a generated result object (holding the IN OUT parameters) might actually be an option. +1 for that."},{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1292453715,"post_id":4455707,"comment_id":4867712,"body_markdown":"You&#39;re right about your off-topic comment. In general I don&#39;t need IN OUT parameters. But as I&#39;m generating source code from actual PL/SQL code, I can&#39;t do without... :-/","body":"You&#39;re right about your off-topic comment. In general I don&#39;t need IN OUT parameters. But as I&#39;m generating source code from actual PL/SQL code, I can&#39;t do without... :-/"},{"owner":{"account_id":2696411,"reputation":5950,"user_id":2328352,"accept_rate":67,"display_name":"Andr&#233; Fratelli"},"score":0,"creation_date":1467590000,"post_id":4455707,"comment_id":63777994,"body_markdown":"In my case I need inout because the method is already returning something else.","body":"In my case I need inout because the method is already returning something else."}],"tags":[],"owner":{"account_id":52616,"reputation":1043001,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"comment_count":3,"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1292453354,"creation_date":1292452933,"answer_id":4455707,"question_id":4455693,"body_markdown":"My question would be: Why doesn&#39;t `method` *return* something? Rather than setting an in/out argument?\r\n\r\nBut assuming you *absolutely, positively must* have an in/out argument, which is a whole different question, then the array trick is fine. Alternately, it&#39;s not less clumsy, but the other way is to pass in an object reference:\r\n\r\n    public class Foo {\r\n        private String value;\r\n\r\n        public Foo(String v) {\r\n            this.value = v;\r\n        }\r\n\r\n        public String getValue() {\r\n            return this.value;\r\n        }\r\n\r\n        public void setValue(String v) {\r\n            this.value = v;\r\n        }\r\n     }\r\n\r\n     // ....\r\n     public void method(String in, Foo inOut) {\r\n         inOut.setValue(in);\r\n     }\r\n\r\n(Or, of course, just make `value` public.) See? I said it wasn&#39;t less clumsy.\r\n\r\nBut I&#39;d ask again: Can&#39;t `method` return something? And if it needs to return multiple things, can&#39;t it return an object instance with properties for those things?\r\n\r\n**Off-topic:** This is one of the areas where I really like the C# approach. One of the arguments against in/out arguments is that they&#39;re unclear at the point where you&#39;re *calling* the function. So C# makes you make it clear, by specifying the keyword both at the declaration of the function *and* when calling it. In the absense of that kind of syntactic help, I&#39;d avoid &quot;simulating&quot; in/out arguments.","title":"How to create IN OUT or OUT parameters in Java","body":"<p>My question would be: Why doesn't <code>method</code> <em>return</em> something? Rather than setting an in/out argument?</p>\n\n<p>But assuming you <em>absolutely, positively must</em> have an in/out argument, which is a whole different question, then the array trick is fine. Alternately, it's not less clumsy, but the other way is to pass in an object reference:</p>\n\n<pre><code>public class Foo {\n    private String value;\n\n    public Foo(String v) {\n        this.value = v;\n    }\n\n    public String getValue() {\n        return this.value;\n    }\n\n    public void setValue(String v) {\n        this.value = v;\n    }\n }\n\n // ....\n public void method(String in, Foo inOut) {\n     inOut.setValue(in);\n }\n</code></pre>\n\n<p>(Or, of course, just make <code>value</code> public.) See? I said it wasn't less clumsy.</p>\n\n<p>But I'd ask again: Can't <code>method</code> return something? And if it needs to return multiple things, can't it return an object instance with properties for those things?</p>\n\n<p><strong>Off-topic:</strong> This is one of the areas where I really like the C# approach. One of the arguments against in/out arguments is that they're unclear at the point where you're <em>calling</em> the function. So C# makes you make it clear, by specifying the keyword both at the declaration of the function <em>and</em> when calling it. In the absense of that kind of syntactic help, I'd avoid \"simulating\" in/out arguments.</p>\n"},{"comments":[{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1292453251,"post_id":4455710,"comment_id":4867637,"body_markdown":"Thanks for your hints. I thought about those things as well, unfortunately, they won&#39;t work in my case...","body":"Thanks for your hints. I thought about those things as well, unfortunately, they won&#39;t work in my case..."}],"tags":[],"owner":{"account_id":149087,"reputation":18896,"user_id":361319,"accept_rate":62,"display_name":"dty"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677858260,"creation_date":1292452940,"answer_id":4455710,"question_id":4455693,"body_markdown":"There&#39;s no direct way. Other techniques include:\r\n\r\n - Passing a holder object (a bit like your 1-ary array)\r\n - Using, e.g., an AtomicInteger\r\n - Passing a more useful object from a business perspective that happens to be mutable\r\n - A callback to a custom interface for receiving the result\r\n\r\nIf you think about it, the array trick is not dissimilar to passing a T* in C/C++","title":"How to create IN OUT or OUT parameters in Java","body":"<p>There's no direct way. Other techniques include:</p>\n<ul>\n<li>Passing a holder object (a bit like your 1-ary array)</li>\n<li>Using, e.g., an AtomicInteger</li>\n<li>Passing a more useful object from a business perspective that happens to be mutable</li>\n<li>A callback to a custom interface for receiving the result</li>\n</ul>\n<p>If you think about it, the array trick is not dissimilar to passing a T* in C/C++</p>\n"},{"comments":[{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1292453308,"post_id":4455730,"comment_id":4867650,"body_markdown":"Thanks, I know that Java doesn&#39;t pass actual pointers but &quot;reference copies&quot;. That&#39;s why I came up with the array trick. That&#39;s a very common way to simulate pointers in Java...","body":"Thanks, I know that Java doesn&#39;t pass actual pointers but &quot;reference copies&quot;. That&#39;s why I came up with the array trick. That&#39;s a very common way to simulate pointers in Java..."},{"owner":{"account_id":44216,"reputation":45489,"user_id":129655,"accept_rate":86,"display_name":"Platinum Azure"},"score":0,"creation_date":1292453341,"post_id":4455730,"comment_id":4867653,"body_markdown":"+1 for actually explaining the pass-by-value semantics Java uses in a logical manner. There are too few people like you in today&#39;s world...","body":"+1 for actually explaining the pass-by-value semantics Java uses in a logical manner. There are too few people like you in today&#39;s world..."},{"owner":{"account_id":52616,"reputation":1043001,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":1,"creation_date":1292453469,"post_id":4455730,"comment_id":4867667,"body_markdown":"@Lukas: *I know that Java doesn&#39;t pass actual pointers but &quot;reference copies&quot;* Which is just another term for pointers. ;-)","body":"@Lukas: <i>I know that Java doesn&#39;t pass actual pointers but &quot;reference copies&quot;</i> Which is just another term for pointers. ;-)"},{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1292453847,"post_id":4455730,"comment_id":4867726,"body_markdown":"@T.J. Crowder: As far as I know in C/C++, you can assign a new value to a pointer that will be able to leave the scope of the method. In Java, this is not possible, as Arturs correctly explained. The &quot;pointer&quot; is passed by value to the method, not by reference","body":"@T.J. Crowder: As far as I know in C/C++, you can assign a new value to a pointer that will be able to leave the scope of the method. In Java, this is not possible, as Arturs correctly explained. The &quot;pointer&quot; is passed by value to the method, not by reference"},{"owner":{"account_id":52616,"reputation":1043001,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":1,"creation_date":1292472348,"post_id":4455730,"comment_id":4869824,"body_markdown":"@Lukas: *&quot;As far as I know in C/C++, you can assign a new value to a pointer that will be able to leave the scope of the method. In Java, this is not possible...&quot;* Java&#39;s object references (`void foo(MyObject m)`) are exact analogs of C/C++ pointers (`void foo(MyObject *pm)`). You can assign to `m` (Java), or `mp` (C/C++), but that doesn&#39;t have any effect on anything outside `foo`. But C/C++ has pointers *to pointers*: `void foo(MyObject **ppm)`, where the effect of writing to `*ppm` can be seen in the calling method. Java&#39;s analog is the array trick the OP flagged up.","body":"@Lukas: <i>&quot;As far as I know in C/C++, you can assign a new value to a pointer that will be able to leave the scope of the method. In Java, this is not possible...&quot;</i> Java&#39;s object references (<code>void foo(MyObject m)</code>) are exact analogs of C/C++ pointers (<code>void foo(MyObject *pm)</code>). You can assign to <code>m</code> (Java), or <code>mp</code> (C/C++), but that doesn&#39;t have any effect on anything outside <code>foo</code>. But C/C++ has pointers <i>to pointers</i>: <code>void foo(MyObject **ppm)</code>, where the effect of writing to <code>*ppm</code> can be seen in the calling method. Java&#39;s analog is the array trick the OP flagged up."},{"owner":{"account_id":52616,"reputation":1043001,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":0,"creation_date":1292472490,"post_id":4455730,"comment_id":4869836,"body_markdown":"@Lukas: (continuing) But granted, I&#39;m not immediately thinking of a Java equivalent to a pointer to a pointer *to a pointer*, `void foo(MyObject ***pppm)`. :-)","body":"@Lukas: (continuing) But granted, I&#39;m not immediately thinking of a Java equivalent to a pointer to a pointer <i>to a pointer</i>, <code>void foo(MyObject ***pppm)</code>. :-)"},{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1292484629,"post_id":4455730,"comment_id":4871107,"body_markdown":"OK, that&#39;s what I meant. Thanks for the clarification","body":"OK, that&#39;s what I meant. Thanks for the clarification"},{"owner":{"account_id":2917205,"reputation":733,"user_id":2500149,"accept_rate":62,"display_name":"Marcin K."},"score":1,"creation_date":1636729054,"post_id":4455730,"comment_id":123641506,"body_markdown":"@T.J.Crowder Oh right I&#39;m sorry. I should have read more carefully.","body":"@T.J.Crowder Oh right I&#39;m sorry. I should have read more carefully."}],"tags":[],"owner":{"account_id":191595,"reputation":3629,"user_id":432259,"accept_rate":94,"display_name":"Art Licis"},"comment_count":8,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1292453159,"creation_date":1292453159,"answer_id":4455730,"question_id":4455693,"body_markdown":"Java copies anything you pass as an argument. If you pass a primitive, inside method you have copy of that primitive, and no modifications will affect the actual variable outside method. If you pass object, you pass copy of reference, which actually references to the original object. This is the way how you can propagate modifications to the context of something that called the method - by modifying the state of the object that the reference is &#39;pointing&#39; to. See more on this: [Does Java Pass by Value or by Reference?][1]\r\n\r\n\r\n  [1]: http://www.javaworld.com/javaqa/2000-05/03-qa-0526-pass.html","title":"How to create IN OUT or OUT parameters in Java","body":"<p>Java copies anything you pass as an argument. If you pass a primitive, inside method you have copy of that primitive, and no modifications will affect the actual variable outside method. If you pass object, you pass copy of reference, which actually references to the original object. This is the way how you can propagate modifications to the context of something that called the method - by modifying the state of the object that the reference is 'pointing' to. See more on this: <a href=\"http://www.javaworld.com/javaqa/2000-05/03-qa-0526-pass.html\" rel=\"nofollow\">Does Java Pass by Value or by Reference?</a></p>\n"}],"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26918,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":4455707,"answer_count":3,"score":11,"last_activity_date":1677858260,"creation_date":1292452792,"question_id":4455693,"body_markdown":"In PL/SQL (or many other languages), I can have IN OUT or OUT parameters, which are returned from a procedure. How can I achieve a similar thing in Java?\r\n\r\nI know this trick:\r\n\r\n    public void method(String in, String[] inOut, String[] inOut2) {\r\n      inOut[0] = in;\r\n    }\r\n\r\nWhere the `in` parameter represents an IN parameter and the `inOut` parameter can hold a return value. The convention would be that `String[] inOut` is an array of `inOut.length == 1`.\r\n\r\nThat&#39;s kind of clumsy. \r\n\r\n**EDIT Feedback to answers**: Other tricks include:\r\n\r\n  - holder/wrapper classes, but I don&#39;t want to introduce any new types, callbacks, etc.\r\n  - return values: I&#39;d like a **general** solution. I.e. one with several IN OUT parameters involved.\r\n  - wrapper for IN OUT parameter as a return value: That&#39;s a viable option, but still not so nice, because that wrapper would have to be generated somehow\r\n\r\nDoes anyone know a better way to achieve this generally? The reason I need a general solution is because I want to generate convenience source code from PL/SQL in a database schema.","title":"How to create IN OUT or OUT parameters in Java","body":"<p>In PL/SQL (or many other languages), I can have IN OUT or OUT parameters, which are returned from a procedure. How can I achieve a similar thing in Java?</p>\n\n<p>I know this trick:</p>\n\n<pre><code>public void method(String in, String[] inOut, String[] inOut2) {\n  inOut[0] = in;\n}\n</code></pre>\n\n<p>Where the <code>in</code> parameter represents an IN parameter and the <code>inOut</code> parameter can hold a return value. The convention would be that <code>String[] inOut</code> is an array of <code>inOut.length == 1</code>.</p>\n\n<p>That's kind of clumsy. </p>\n\n<p><strong>EDIT Feedback to answers</strong>: Other tricks include:</p>\n\n<ul>\n<li>holder/wrapper classes, but I don't want to introduce any new types, callbacks, etc.</li>\n<li>return values: I'd like a <strong>general</strong> solution. I.e. one with several IN OUT parameters involved.</li>\n<li>wrapper for IN OUT parameter as a return value: That's a viable option, but still not so nice, because that wrapper would have to be generated somehow</li>\n</ul>\n\n<p>Does anyone know a better way to achieve this generally? The reason I need a general solution is because I want to generate convenience source code from PL/SQL in a database schema.</p>\n"},{"tags":["java","spring","spring-boot","spring-data-mongodb"],"comments":[{"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1677836575,"post_id":75621457,"comment_id":133419820,"body_markdown":"Have you compiled your Mongo entities with `-parameters`?","body":"Have you compiled your Mongo entities with <code>-parameters</code>?"},{"owner":{"account_id":3456997,"reputation":241,"user_id":2895277,"display_name":"Chad Showalter"},"score":0,"creation_date":1677846697,"post_id":75621457,"comment_id":133422400,"body_markdown":"@Andy Wilkinson No, we have not.  In looking closer at [the docs](https://docs.spring.io/spring-data/mongodb/docs/current/reference/html/) I see that this is mentioned under Customized Object Construction.  We do frequently have entities with multiple constructors and use @PersistenceConstructor/Creator to indicate the one to be used by the framework.  Until the upgrade to Spring Boot 3, this &quot;just worked.&quot;  Is compiling with `-parameters` a reasonable pattern for this scenario?  It does indeed eliminate the errors in our case when I do so.","body":"@Andy Wilkinson No, we have not.  In looking closer at <a href=\"https://docs.spring.io/spring-data/mongodb/docs/current/reference/html/\" rel=\"nofollow noreferrer\">the docs</a> I see that this is mentioned under Customized Object Construction.  We do frequently have entities with multiple constructors and use @PersistenceConstructor/Creator to indicate the one to be used by the framework.  Until the upgrade to Spring Boot 3, this &quot;just worked.&quot;  Is compiling with <code>-parameters</code> a reasonable pattern for this scenario?  It does indeed eliminate the errors in our case when I do so."},{"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1677847015,"post_id":75621457,"comment_id":133422489,"body_markdown":"Yes, it&#39;s both reasonable and recommended. The change in behavior in Spring Boot 3.0 is due to [this change in Spring Framework 6.0](https://github.com/spring-projects/spring-framework/pull/29531).","body":"Yes, it&#39;s both reasonable and recommended. The change in behavior in Spring Boot 3.0 is due to <a href=\"https://github.com/spring-projects/spring-framework/pull/29531\" rel=\"nofollow noreferrer\">this change in Spring Framework 6.0</a>."},{"owner":{"account_id":3456997,"reputation":241,"user_id":2895277,"display_name":"Chad Showalter"},"score":0,"creation_date":1677848630,"post_id":75621457,"comment_id":133422931,"body_markdown":"Okay, and thanks. Regarding the compiler flag, is it reasonable/recommended to compile our entire java codebase with `-parameters` or would it be better to somehow segment compilation between parts of our codebase that need it and those that do not?  E.g. compile the entities as their own artifact.  Or some other way.","body":"Okay, and thanks. Regarding the compiler flag, is it reasonable/recommended to compile our entire java codebase with <code>-parameters</code> or would it be better to somehow segment compilation between parts of our codebase that need it and those that do not?  E.g. compile the entities as their own artifact.  Or some other way."},{"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1677850551,"post_id":75621457,"comment_id":133423451,"body_markdown":"If it were me, I&#39;d turn it on everywhere. It may increase class sizes a little but I would not expect the effect to be too dramatic. I&#39;d only split things into separate artifacts if really necessary.","body":"If it were me, I&#39;d turn it on everywhere. It may increase class sizes a little but I would not expect the effect to be too dramatic. I&#39;d only split things into separate artifacts if really necessary."}],"answers":[{"tags":[],"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1677857546,"creation_date":1677857546,"answer_id":75629035,"question_id":75621457,"body_markdown":"Due to [these changes in Spring Framework 6.0](https://github.com/spring-projects/spring-framework/pull/29531), the use of the `-parameters` compiler option is now strongly encouraged. It allows the names of constructor and methods parameters to be discovered without having to resort to extracting them from debug information in `.class` files.\r\n\r\nSpring Framework 6&#39;s [upgrade guide](https://github.com/spring-projects/spring-framework/wiki/Upgrading-to-Spring-Framework-6.x) has the following to say on this topic:\r\n\r\n&gt; `LocalVariableTableParameterNameDiscoverer` is deprecated now and logs a warning for each successful resolution attempt (it only kicks in when `StandardReflectionParameterNameDiscoverer` has not found names). Compile your Java sources with the common Java 8+ `-parameters` flag for parameter name retention (instead of relying on the `-debug` compiler flag) in order to avoid that warning, or report it to the maintainers of the affected code. With the Kotlin compiler, we recommend the `-java-parameters` flag for completeness.","title":"&quot;Using deprecated &#39;-debug&#39; fallback for parameter name resolution&quot; warning persists in Spring Boot 3.0.3 when MongoMappingContext creates entities","body":"<p>Due to <a href=\"https://github.com/spring-projects/spring-framework/pull/29531\" rel=\"nofollow noreferrer\">these changes in Spring Framework 6.0</a>, the use of the <code>-parameters</code> compiler option is now strongly encouraged. It allows the names of constructor and methods parameters to be discovered without having to resort to extracting them from debug information in <code>.class</code> files.</p>\n<p>Spring Framework 6's <a href=\"https://github.com/spring-projects/spring-framework/wiki/Upgrading-to-Spring-Framework-6.x\" rel=\"nofollow noreferrer\">upgrade guide</a> has the following to say on this topic:</p>\n<blockquote>\n<p><code>LocalVariableTableParameterNameDiscoverer</code> is deprecated now and logs a warning for each successful resolution attempt (it only kicks in when <code>StandardReflectionParameterNameDiscoverer</code> has not found names). Compile your Java sources with the common Java 8+ <code>-parameters</code> flag for parameter name retention (instead of relying on the <code>-debug</code> compiler flag) in order to avoid that warning, or report it to the maintainers of the affected code. With the Kotlin compiler, we recommend the <code>-java-parameters</code> flag for completeness.</p>\n</blockquote>\n"}],"owner":{"account_id":3456997,"reputation":241,"user_id":2895277,"display_name":"Chad Showalter"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3694,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75629035,"answer_count":1,"score":0,"last_activity_date":1677857546,"creation_date":1677796440,"question_id":75621457,"body_markdown":"I am using Spring Boot 3.0.3, Spring Core 6.0.5 with Spring Data MongoDB 4.0.2.  I see many warning messages of the form \r\n```\r\nocalVariableTableParameterNameDiscoverer : Using deprecated &#39;-debug&#39; fallback for parameter name resolution. Compile the affected code with &#39;-parameters&#39; instead or avoid its introspection: &lt;your mongo entity here&gt;\r\n```\r\nInserting a breakpoint at source of the message, I get this stack trace: \r\n```inspectClass:123, LocalVariableTableParameterNameDiscoverer (org.springframework.core)\r\napply:-1, LocalVariableTableParameterNameDiscoverer$$Lambda$1162/0x00000008013cfa98 (org.springframework.core)\r\ncomputeIfAbsent:1708, ConcurrentHashMap (java.util.concurrent)\r\ndoGetParameterNames:96, LocalVariableTableParameterNameDiscoverer (org.springframework.core)\r\ngetParameterNames:90, LocalVariableTableParameterNameDiscoverer (org.springframework.core)\r\ngetParameterNames:67, PrioritizedParameterNameDiscoverer (org.springframework.core)\r\nbuildPreferredConstructor:236, PreferredConstructorDiscoverer$Discoverers (org.springframework.data.mapping.model)\r\ndiscover:118, PreferredConstructorDiscoverer$Discoverers$1 (org.springframework.data.mapping.model)\r\ndiscover:82, PreferredConstructorDiscoverer (org.springframework.data.mapping.model)\r\ndiscover:81, InstanceCreatorMetadataDiscoverer (org.springframework.data.mapping.model)\r\n&lt;init&gt;:113, BasicPersistentEntity (org.springframework.data.mapping.model)\r\n&lt;init&gt;:84, BasicMongoPersistentEntity (org.springframework.data.mongodb.core.mapping)\r\ncreatePersistentEntity:88, MongoMappingContext (org.springframework.data.mongodb.core.mapping)\r\ncreatePersistentEntity:41, MongoMappingContext (org.springframework.data.mongodb.core.mapping)\r\ndoAddPersistentEntity:403, AbstractMappingContext (org.springframework.data.mapping.context)\r\naddPersistentEntity:379, AbstractMappingContext (org.springframework.data.mapping.context)\r\naddPersistentEntity:339, AbstractMappingContext (org.springframework.data.mapping.context)\r\naccept:-1, AbstractMappingContext$$Lambda$1098/0x00000008013bded0 (org.springframework.data.mapping.context)\r\nforEach:75, Iterable (java.lang)\r\nforEach:-1, ManagedTypes$$Lambda$1093/0x00000008013b90f0 (org.springframework.data.domain)\r\nforEach:79, MongoManagedTypes (org.springframework.data.mongodb)\r\ninitialize:484, AbstractMappingContext (org.springframework.data.mapping.context)\r\nafterPropertiesSet:476, AbstractMappingContext (org.springframework.data.mapping.context)\r\ninvokeInitMethods:1798, AbstractAutowireCapableBeanFactory (org.springframework.beans.factory.support)\r\ninitializeBean:1748, AbstractAutowireCapableBeanFactory (org.springframework.beans.factory.support)\r\ndoCreateBean:600, AbstractAutowireCapableBeanFactory (org.springframework.beans.factory.support)\r\ncreateBean:522, AbstractAutowireCapableBeanFactory (org.springframework.beans.factory.support)\r\nlambda$doGetBean$0:326, AbstractBeanFactory (org.springframework.beans.factory.support)\r\ngetObject:-1, AbstractBeanFactory$$Lambda$414/0x0000000800e45ff0 (org.springframework.beans.factory.support)\r\ngetSingleton:234, DefaultSingletonBeanRegistry (org.springframework.beans.factory.support)\r\ndoGetBean:324, AbstractBeanFactory (org.springframework.beans.factory.support)\r\ngetBean:200, AbstractBeanFactory (org.springframework.beans.factory.support)\r\nresolveCandidate:254, DependencyDescriptor (org.springframework.beans.factory.config)\r\ndoResolveDependency:1405, DefaultListableBeanFactory (org.springframework.beans.factory.support)\r\nresolveDependency:1325, DefaultListableBeanFactory (org.springframework.beans.factory.support)\r\nresolveAutowiredArgument:885, ConstructorResolver (org.springframework.beans.factory.support)\r\ncreateArgumentArray:789, ConstructorResolver (org.springframework.beans.factory.support)\r\ninstantiateUsingFactoryMethod:548, ConstructorResolver (org.springframework.beans.factory.support)\r\n... truncated\r\n```\r\nI am aware of [this issue][1] but I understand that I am using code that should contain the fix explained there.  Is this evidence that we&#39;re not following current recommended practices for initializing our Mongo entities somehow?  We did not see this warning prior to upgrading our app to Spring Boot 3.0.x.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/74845574/using-deprecated-debug-fallback-for-parameter-name-resolution-compile-the-af","title":"&quot;Using deprecated &#39;-debug&#39; fallback for parameter name resolution&quot; warning persists in Spring Boot 3.0.3 when MongoMappingContext creates entities","body":"<p>I am using Spring Boot 3.0.3, Spring Core 6.0.5 with Spring Data MongoDB 4.0.2.  I see many warning messages of the form</p>\n<pre><code>ocalVariableTableParameterNameDiscoverer : Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: &lt;your mongo entity here&gt;\n</code></pre>\n<p>Inserting a breakpoint at source of the message, I get this stack trace:</p>\n<pre><code>apply:-1, LocalVariableTableParameterNameDiscoverer$$Lambda$1162/0x00000008013cfa98 (org.springframework.core)\ncomputeIfAbsent:1708, ConcurrentHashMap (java.util.concurrent)\ndoGetParameterNames:96, LocalVariableTableParameterNameDiscoverer (org.springframework.core)\ngetParameterNames:90, LocalVariableTableParameterNameDiscoverer (org.springframework.core)\ngetParameterNames:67, PrioritizedParameterNameDiscoverer (org.springframework.core)\nbuildPreferredConstructor:236, PreferredConstructorDiscoverer$Discoverers (org.springframework.data.mapping.model)\ndiscover:118, PreferredConstructorDiscoverer$Discoverers$1 (org.springframework.data.mapping.model)\ndiscover:82, PreferredConstructorDiscoverer (org.springframework.data.mapping.model)\ndiscover:81, InstanceCreatorMetadataDiscoverer (org.springframework.data.mapping.model)\n&lt;init&gt;:113, BasicPersistentEntity (org.springframework.data.mapping.model)\n&lt;init&gt;:84, BasicMongoPersistentEntity (org.springframework.data.mongodb.core.mapping)\ncreatePersistentEntity:88, MongoMappingContext (org.springframework.data.mongodb.core.mapping)\ncreatePersistentEntity:41, MongoMappingContext (org.springframework.data.mongodb.core.mapping)\ndoAddPersistentEntity:403, AbstractMappingContext (org.springframework.data.mapping.context)\naddPersistentEntity:379, AbstractMappingContext (org.springframework.data.mapping.context)\naddPersistentEntity:339, AbstractMappingContext (org.springframework.data.mapping.context)\naccept:-1, AbstractMappingContext$$Lambda$1098/0x00000008013bded0 (org.springframework.data.mapping.context)\nforEach:75, Iterable (java.lang)\nforEach:-1, ManagedTypes$$Lambda$1093/0x00000008013b90f0 (org.springframework.data.domain)\nforEach:79, MongoManagedTypes (org.springframework.data.mongodb)\ninitialize:484, AbstractMappingContext (org.springframework.data.mapping.context)\nafterPropertiesSet:476, AbstractMappingContext (org.springframework.data.mapping.context)\ninvokeInitMethods:1798, AbstractAutowireCapableBeanFactory (org.springframework.beans.factory.support)\ninitializeBean:1748, AbstractAutowireCapableBeanFactory (org.springframework.beans.factory.support)\ndoCreateBean:600, AbstractAutowireCapableBeanFactory (org.springframework.beans.factory.support)\ncreateBean:522, AbstractAutowireCapableBeanFactory (org.springframework.beans.factory.support)\nlambda$doGetBean$0:326, AbstractBeanFactory (org.springframework.beans.factory.support)\ngetObject:-1, AbstractBeanFactory$$Lambda$414/0x0000000800e45ff0 (org.springframework.beans.factory.support)\ngetSingleton:234, DefaultSingletonBeanRegistry (org.springframework.beans.factory.support)\ndoGetBean:324, AbstractBeanFactory (org.springframework.beans.factory.support)\ngetBean:200, AbstractBeanFactory (org.springframework.beans.factory.support)\nresolveCandidate:254, DependencyDescriptor (org.springframework.beans.factory.config)\ndoResolveDependency:1405, DefaultListableBeanFactory (org.springframework.beans.factory.support)\nresolveDependency:1325, DefaultListableBeanFactory (org.springframework.beans.factory.support)\nresolveAutowiredArgument:885, ConstructorResolver (org.springframework.beans.factory.support)\ncreateArgumentArray:789, ConstructorResolver (org.springframework.beans.factory.support)\ninstantiateUsingFactoryMethod:548, ConstructorResolver (org.springframework.beans.factory.support)\n... truncated\n</code></pre>\n<p>I am aware of <a href=\"https://stackoverflow.com/questions/74845574/using-deprecated-debug-fallback-for-parameter-name-resolution-compile-the-af\">this issue</a> but I understand that I am using code that should contain the fix explained there.  Is this evidence that we're not following current recommended practices for initializing our Mongo entities somehow?  We did not see this warning prior to upgrading our app to Spring Boot 3.0.x.</p>\n"},{"tags":["java","android","bluetooth"],"comments":[{"owner":{"account_id":11524089,"reputation":161,"user_id":8445079,"display_name":"Paolino L Angeletti"},"score":1,"creation_date":1677765199,"post_id":75616022,"comment_id":133405024,"body_markdown":"can you post your entire code?\nThe problem seems to be related to a client bluetooth not previous closed.","body":"can you post your entire code? The problem seems to be related to a client bluetooth not previous closed."},{"owner":{"account_id":27054227,"reputation":1,"user_id":20607170,"display_name":"emrecuni"},"score":0,"creation_date":1677830194,"post_id":75616022,"comment_id":133418240,"body_markdown":"my code is above","body":"my code is above"}],"answers":[{"comments":[{"owner":{"account_id":27054227,"reputation":1,"user_id":20607170,"display_name":"emrecuni"},"score":0,"creation_date":1678195595,"post_id":75628997,"comment_id":133483077,"body_markdown":"unfortunately this didn&#39;t work. i get the same error","body":"unfortunately this didn&#39;t work. i get the same error"}],"tags":[],"owner":{"account_id":11524089,"reputation":161,"user_id":8445079,"display_name":"Paolino L Angeletti"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677857329,"creation_date":1677857329,"answer_id":75628997,"question_id":75616022,"body_markdown":"try this code:\r\n\r\n    if(!fail) {\r\n        mConnectedThread = new ConnectedThread(mBTSocket, mHandler);\r\n        mConnectedThread.start();\r\n        mHandler.obtainMessage(CONNECTING_STATUS, 1, -1, name).sendToTarget();\r\n        mBTSocket.close();\r\n    }","title":"Bluetooth Connection Exception On Java","body":"<p>try this code:</p>\n<pre><code>if(!fail) {\n    mConnectedThread = new ConnectedThread(mBTSocket, mHandler);\n    mConnectedThread.start();\n    mHandler.obtainMessage(CONNECTING_STATUS, 1, -1, name).sendToTarget();\n    mBTSocket.close();\n}\n</code></pre>\n"}],"owner":{"account_id":27054227,"reputation":1,"user_id":20607170,"display_name":"emrecuni"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677857329,"creation_date":1677763403,"question_id":75616022,"body_markdown":"I want to make a bluetooth connection. I can scan but cannot pair devices. I get an error like this &quot;read failed, socket might closed or timeout&quot;. \r\n\r\nIt is written in other titles to use &quot;createRfcommSocketToServiceRecord&quot; instead of &quot;createInsecureRfcommSocketToServiceRecord&quot;. However, this was not the solution.\r\n\r\n\r\n\r\n        @Override\r\n        public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\r\n\r\n            if(!mBTAdapter.isEnabled()) {\r\n                Toast.makeText(getBaseContext(), getString(R.string.BTnotOn), Toast.LENGTH_SHORT).show();\r\n                return;\r\n            }\r\n\r\n            mBluetoothStatus.setText(getString(R.string.cConnet));\r\n            // Get the device MAC address, which is the last 17 chars in the View\r\n            String info = ((TextView) view).getText().toString();\r\n            final String address = info.substring(info.length() - 17);\r\n            final String name = info.substring(0,info.length() - 17);\r\n\r\n            // Spawn a new thread to avoid blocking the GUI one\r\n            new Thread()\r\n            {\r\n                @Override\r\n                public void run() {\r\n                    boolean fail = false;\r\n\r\n                    try {\r\n                        mBTSocket = createBluetoothSocket(device);\r\n                    } catch (IOException e) {\r\n                        fail = true;\r\n                        Toast.makeText(getBaseContext(), getString(R.string.ErrSockCrea), Toast.LENGTH_SHORT).show();\r\n                    }\r\n                    // Establish the Bluetooth socket connection.\r\n                    try {\r\n                        mBTSocket.connect();\r\n                    } catch (IOException e) {\r\n                        System.out.println(e.getMessage());\r\n                        try {\r\n                            fail = true;\r\n                            mBTSocket.close();\r\n                            mHandler.obtainMessage(CONNECTING_STATUS, -1, -1)\r\n                                    .sendToTarget();\r\n                        } catch (IOException e2) {\r\n                            //insert code to deal with this\r\n                            Toast.makeText(getBaseContext(), getString(R.string.ErrSockCrea), Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }\r\n                    if(!fail) {\r\n                        mConnectedThread = new ConnectedThread(mBTSocket, mHandler);\r\n                        mConnectedThread.start();\r\n\r\n                        mHandler.obtainMessage(CONNECTING_STATUS, 1, -1, name)\r\n                                .sendToTarget();\r\n                    }\r\n                }\r\n            }.start();\r\n        }\r\n    };\r\n\r\n    private BluetoothSocket createBluetoothSocket(BluetoothDevice device) throws IOException {\r\n        try {\r\n            final Method m = device.getClass().getMethod(&quot;createRfcommSocketToServiceRecord&quot;, UUID.class); \r\n            return (BluetoothSocket) m.invoke(device, BT_MODULE_UUID);\r\n        } catch (Exception e) {\r\n            Log.e(TAG, &quot;Could not create Insecure RFComm Connection&quot;,e);\r\n        }\r\n        return  device.createRfcommSocketToServiceRecord(BT_MODULE_UUID);\r\n    }\r\n","title":"Bluetooth Connection Exception On Java","body":"<p>I want to make a bluetooth connection. I can scan but cannot pair devices. I get an error like this &quot;read failed, socket might closed or timeout&quot;.</p>\n<p>It is written in other titles to use &quot;createRfcommSocketToServiceRecord&quot; instead of &quot;createInsecureRfcommSocketToServiceRecord&quot;. However, this was not the solution.</p>\n<pre><code>    @Override\n    public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\n\n        if(!mBTAdapter.isEnabled()) {\n            Toast.makeText(getBaseContext(), getString(R.string.BTnotOn), Toast.LENGTH_SHORT).show();\n            return;\n        }\n\n        mBluetoothStatus.setText(getString(R.string.cConnet));\n        // Get the device MAC address, which is the last 17 chars in the View\n        String info = ((TextView) view).getText().toString();\n        final String address = info.substring(info.length() - 17);\n        final String name = info.substring(0,info.length() - 17);\n\n        // Spawn a new thread to avoid blocking the GUI one\n        new Thread()\n        {\n            @Override\n            public void run() {\n                boolean fail = false;\n\n                try {\n                    mBTSocket = createBluetoothSocket(device);\n                } catch (IOException e) {\n                    fail = true;\n                    Toast.makeText(getBaseContext(), getString(R.string.ErrSockCrea), Toast.LENGTH_SHORT).show();\n                }\n                // Establish the Bluetooth socket connection.\n                try {\n                    mBTSocket.connect();\n                } catch (IOException e) {\n                    System.out.println(e.getMessage());\n                    try {\n                        fail = true;\n                        mBTSocket.close();\n                        mHandler.obtainMessage(CONNECTING_STATUS, -1, -1)\n                                .sendToTarget();\n                    } catch (IOException e2) {\n                        //insert code to deal with this\n                        Toast.makeText(getBaseContext(), getString(R.string.ErrSockCrea), Toast.LENGTH_SHORT).show();\n                    }\n                }\n                if(!fail) {\n                    mConnectedThread = new ConnectedThread(mBTSocket, mHandler);\n                    mConnectedThread.start();\n\n                    mHandler.obtainMessage(CONNECTING_STATUS, 1, -1, name)\n                            .sendToTarget();\n                }\n            }\n        }.start();\n    }\n};\n\nprivate BluetoothSocket createBluetoothSocket(BluetoothDevice device) throws IOException {\n    try {\n        final Method m = device.getClass().getMethod(&quot;createRfcommSocketToServiceRecord&quot;, UUID.class); \n        return (BluetoothSocket) m.invoke(device, BT_MODULE_UUID);\n    } catch (Exception e) {\n        Log.e(TAG, &quot;Could not create Insecure RFComm Connection&quot;,e);\n    }\n    return  device.createRfcommSocketToServiceRecord(BT_MODULE_UUID);\n}\n</code></pre>\n"},{"tags":["java","mongodb","distinct"],"answers":[{"comments":[{"owner":{"account_id":12339491,"reputation":31,"user_id":9003250,"display_name":"Michael"},"score":0,"creation_date":1677923090,"post_id":75628981,"comment_id":133435923,"body_markdown":"The suggestion is good - thanks","body":"The suggestion is good - thanks"},{"owner":{"account_id":12339491,"reputation":31,"user_id":9003250,"display_name":"Michael"},"score":0,"creation_date":1677944570,"post_id":75628981,"comment_id":133438976,"body_markdown":"https://github.com/vincentrussell/sql-to-mongo-db-query-converter","body":"<a href=\"https://github.com/vincentrussell/sql-to-mongo-db-query-converter\" rel=\"nofollow noreferrer\">github.com/vincentrussell/sql-to-mongo-db-query-converter</a>"}],"tags":[],"owner":{"account_id":959814,"reputation":8884,"user_id":984422,"display_name":"Wahyu Kristianto"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677857277,"creation_date":1677857277,"answer_id":75628981,"question_id":75628671,"body_markdown":"&gt; So, maybe not distinct\r\n\r\nThe error message suggests that the `distinct` method is not able to return the expected result because the `marketId` field is not of type `String`, which is what the method expects by default.\r\n\r\nYou can still use the `distinct` method as follows:\r\n\r\n```\r\nList&lt;String&gt; marketIds = quoteCol\r\n    .distinct(&quot;marketId&quot;, String.class)\r\n    .into(new ArrayList&lt;&gt;());\r\n```\r\n","title":"MongoDb how to get a list of unique fields from a pojo doc","body":"<blockquote>\n<p>So, maybe not distinct</p>\n</blockquote>\n<p>The error message suggests that the <code>distinct</code> method is not able to return the expected result because the <code>marketId</code> field is not of type <code>String</code>, which is what the method expects by default.</p>\n<p>You can still use the <code>distinct</code> method as follows:</p>\n<pre><code>List&lt;String&gt; marketIds = quoteCol\n    .distinct(&quot;marketId&quot;, String.class)\n    .into(new ArrayList&lt;&gt;());\n</code></pre>\n"}],"owner":{"account_id":12339491,"reputation":31,"user_id":9003250,"display_name":"Michael"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677857277,"creation_date":1677855685,"question_id":75628671,"body_markdown":"I&#39;m new to Mongodb and I&#39;m trying to get what I thought would be quite a simple unique call on a field. What I want is a list of all the unique or distinct (one of each) marketIds:\r\n\r\n    sample doc -&gt; added to local mongodb as a pojo (with a double array codec)\r\n      {\r\n        &quot;_id&quot;: {\r\n          &quot;$oid&quot;: &quot;63fe576c931a3f5dc2aa355d&quot;\r\n        },\r\n        &quot;con&quot;: false,\r\n        &quot;img&quot;: true,\r\n        &quot;marketId&quot;: &quot;MSFT134048&quot;,\r\n        &quot;totalMatched&quot;: 525.9,\r\n        &quot;tsMs&quot;: {\r\n          &quot;$numberLong&quot;: &quot;1677612908236&quot;\r\n        }\r\n        ...\r\n      }\r\n      {\r\n        &quot;_id&quot;: {\r\n          &quot;$oid&quot;: &quot;63fe576c931a3f5dc2aa355e&quot;\r\n        },\r\n        &quot;con&quot;: false,\r\n        &quot;img&quot;: true,\r\n        &quot;marketId&quot;: &quot;MSFT134050&quot;,\r\n        &quot;totalMatched&quot;: 529.5,\r\n        &quot;tsMs&quot;: {\r\n          &quot;$numberLong&quot;: &quot;1677612908236&quot;\r\n        }\r\n        ...\r\n      }\r\nI&#39;d like either two full documents or a set of the two marketIds (both containing [MSFT134048, MSFT134050] the latter is preferable).\r\n\r\nI&#39;m using the local desktop version of mongodb (not paid-for Atlas).\r\n\r\nThe various methods I&#39;ve tried either get an error or empty results:\r\n\r\n 1.   `var doc = quoteCol.distinct(&quot;marketId&quot;, PriceUpdate.class);`\r\n 2.   `var doc = quoteCol.distinct(&quot;marketId&quot;, Document.class);`\r\n\r\n    error: CurrentBSONType is DOCUMENT, not when CurrentBSONType is STRING\r\n\r\n 3. So, maybe not distinct, how about aggregate:\r\n    ```\r\n    final Bson field1 = new Document(&quot;marketId&quot;, &quot;$marketId&quot;);\r\n    final List&lt;Bson&gt; bsonList = Arrays.asList(field1);\r\n    var ret = quoteCol.aggregate(bsonList);\r\n    Unrecognized pipeline stage name: &#39;marketId&#39;\r\n    ```\r\n\r\n 4. Agreggate with group:\r\n    ```   \r\n    final Bson field1 = new Document(&quot;marketId&quot;, &quot;$marketId&quot;);`\r\n    final Bson groupField = new Document(&quot;_id&quot;, field1);`\r\n    final Bson group = new Document(&quot;$group&quot;, groupField);`\r\n    final List&lt;Bson&gt; bsonList = Arrays.asList(group);`\r\n    var ret = quoteCol.aggregate(bsonList);`\r\n    The return from the above is a list of unpopulated docs with null marketIds.\r\n    ```\r\n\r\nHow to do it please?\r\n\r\nThanks","title":"MongoDb how to get a list of unique fields from a pojo doc","body":"<p>I'm new to Mongodb and I'm trying to get what I thought would be quite a simple unique call on a field. What I want is a list of all the unique or distinct (one of each) marketIds:</p>\n<pre><code>sample doc -&gt; added to local mongodb as a pojo (with a double array codec)\n  {\n    &quot;_id&quot;: {\n      &quot;$oid&quot;: &quot;63fe576c931a3f5dc2aa355d&quot;\n    },\n    &quot;con&quot;: false,\n    &quot;img&quot;: true,\n    &quot;marketId&quot;: &quot;MSFT134048&quot;,\n    &quot;totalMatched&quot;: 525.9,\n    &quot;tsMs&quot;: {\n      &quot;$numberLong&quot;: &quot;1677612908236&quot;\n    }\n    ...\n  }\n  {\n    &quot;_id&quot;: {\n      &quot;$oid&quot;: &quot;63fe576c931a3f5dc2aa355e&quot;\n    },\n    &quot;con&quot;: false,\n    &quot;img&quot;: true,\n    &quot;marketId&quot;: &quot;MSFT134050&quot;,\n    &quot;totalMatched&quot;: 529.5,\n    &quot;tsMs&quot;: {\n      &quot;$numberLong&quot;: &quot;1677612908236&quot;\n    }\n    ...\n  }\n</code></pre>\n<p>I'd like either two full documents or a set of the two marketIds (both containing [MSFT134048, MSFT134050] the latter is preferable).</p>\n<p>I'm using the local desktop version of mongodb (not paid-for Atlas).</p>\n<p>The various methods I've tried either get an error or empty results:</p>\n<ol>\n<li><code>var doc = quoteCol.distinct(&quot;marketId&quot;, PriceUpdate.class);</code></li>\n<li><code>var doc = quoteCol.distinct(&quot;marketId&quot;, Document.class);</code></li>\n</ol>\n<pre><code>error: CurrentBSONType is DOCUMENT, not when CurrentBSONType is STRING\n</code></pre>\n<ol start=\"3\">\n<li><p>So, maybe not distinct, how about aggregate:</p>\n<pre><code>final Bson field1 = new Document(&quot;marketId&quot;, &quot;$marketId&quot;);\nfinal List&lt;Bson&gt; bsonList = Arrays.asList(field1);\nvar ret = quoteCol.aggregate(bsonList);\nUnrecognized pipeline stage name: 'marketId'\n</code></pre>\n</li>\n<li><p>Agreggate with group:</p>\n<pre><code>final Bson field1 = new Document(&quot;marketId&quot;, &quot;$marketId&quot;);`\nfinal Bson groupField = new Document(&quot;_id&quot;, field1);`\nfinal Bson group = new Document(&quot;$group&quot;, groupField);`\nfinal List&lt;Bson&gt; bsonList = Arrays.asList(group);`\nvar ret = quoteCol.aggregate(bsonList);`\nThe return from the above is a list of unpopulated docs with null marketIds.\n</code></pre>\n</li>\n</ol>\n<p>How to do it please?</p>\n<p>Thanks</p>\n"},{"tags":["java","android","sqlite","openstreetmap"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1591513412,"post_id":62241582,"comment_id":110079834,"body_markdown":"Yes on Android Q that path is not writable. You should know that by now as your problem has been reported here five times a week for the last months.","body":"Yes on Android Q that path is not writable. You should know that by now as your problem has been reported here five times a week for the last months."},{"owner":{"account_id":288238,"reputation":14443,"user_id":588532,"accept_rate":88,"display_name":"Uriel Frankel"},"score":0,"creation_date":1591513766,"post_id":62241582,"comment_id":110079928,"body_markdown":"https://stackoverflow.com/a/57653808/588532","body":"<a href=\"https://stackoverflow.com/a/57653808/588532\">stackoverflow.com/a/57653808/588532</a>"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1591515546,"post_id":62241582,"comment_id":110080360,"body_markdown":"@Uriel Frankel, please dont advertise your hack as a fix. Your hack will not live long also.","body":"@Uriel Frankel, please dont advertise your hack as a fix. Your hack will not live long also."},{"owner":{"account_id":288238,"reputation":14443,"user_id":588532,"accept_rate":88,"display_name":"Uriel Frankel"},"score":0,"creation_date":1591515594,"post_id":62241582,"comment_id":110080374,"body_markdown":"@blackapps You are right","body":"@blackapps You are right"},{"owner":{"account_id":288238,"reputation":14443,"user_id":588532,"accept_rate":88,"display_name":"Uriel Frankel"},"score":1,"creation_date":1591517526,"post_id":62241582,"comment_id":110080935,"body_markdown":"@blackapps but the official Android docs says: Running on Android 10\nIf your app targets Android 10 (API level 29), opt-out of scoped storage and continue using the approach for Android 9 and lower to perform this operation.","body":"@blackapps but the official Android docs says: Running on Android 10 If your app targets Android 10 (API level 29), opt-out of scoped storage and continue using the approach for Android 9 and lower to perform this operation."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1591518660,"post_id":62241582,"comment_id":110081275,"body_markdown":"Yes, then lower target level.","body":"Yes, then lower target level."},{"owner":{"account_id":1361461,"reputation":1592,"user_id":1298744,"accept_rate":71,"display_name":"Zelig63"},"score":0,"creation_date":1591542759,"post_id":62241582,"comment_id":110089715,"body_markdown":"Going back to API level 27 solved my problem (the logcat now tells me external storage is writable). Unfortunately, visually, it doesn&#39;t change anything : still no map but only the grid, the compass and the zoom buttons. In the logcat, I don&#39;t see any error or warning message, only `D/FA: Connected to remote service` which really looks like a good news, but don&#39;t know if it is related to OSM.","body":"Going back to API level 27 solved my problem (the logcat now tells me external storage is writable). Unfortunately, visually, it doesn&#39;t change anything : still no map but only the grid, the compass and the zoom buttons. In the logcat, I don&#39;t see any error or warning message, only <code>D&#47;FA: Connected to remote service</code> which really looks like a good news, but don&#39;t know if it is related to OSM."},{"owner":{"account_id":1361461,"reputation":1592,"user_id":1298744,"accept_rate":71,"display_name":"Zelig63"},"score":0,"creation_date":1591543726,"post_id":62241582,"comment_id":110090133,"body_markdown":"Better now I have changed the data source from `HIKEBIKEMAP` to `MAPNIK`!","body":"Better now I have changed the data source from <code>HIKEBIKEMAP</code> to <code>MAPNIK</code>!"}],"answers":[{"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1591518803,"post_id":62242640,"comment_id":110081308,"body_markdown":"It is a hack that helps for a certain amount of time. A hack propagated by Google indeed. You better solve a problem right away.","body":"It is a hack that helps for a certain amount of time. A hack propagated by Google indeed. You better solve a problem right away."}],"tags":[],"owner":{"account_id":288238,"reputation":14443,"user_id":588532,"accept_rate":88,"display_name":"Uriel Frankel"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1591517691,"creation_date":1591517691,"answer_id":62242640,"question_id":62241582,"body_markdown":"Because you are targeting Andorid 10 - api 29, the official Android docs states:\r\n\r\n&gt; **Running on Android 10**\r\n&gt; \r\n&gt; If your app targets Android 10 (API level 29), opt-out of scoped\r\n&gt; storage and continue using the approach for Android 9 and lower to\r\n&gt; perform this operation.\r\n\r\nSo you need to add to the AndroidManifest.xml:\r\n\r\n    &lt;manifest ... &gt;\r\n    &lt;!-- This attribute is &quot;false&quot; by default on apps targeting\r\n       Android 10 or higher. --&gt;\r\n        &lt;application android:requestLegacyExternalStorage=&quot;true&quot; ... &gt;\r\n         ...\r\n        &lt;/application&gt;\r\n    &lt;/manifest&gt;\r\n\r\n@blackapps This is not a hack.","title":"File storage error when trying to display an OpenStreetMap map","body":"<p>Because you are targeting Andorid 10 - api 29, the official Android docs states:</p>\n\n<blockquote>\n  <p><strong>Running on Android 10</strong></p>\n  \n  <p>If your app targets Android 10 (API level 29), opt-out of scoped\n  storage and continue using the approach for Android 9 and lower to\n  perform this operation.</p>\n</blockquote>\n\n<p>So you need to add to the AndroidManifest.xml:</p>\n\n<pre><code>&lt;manifest ... &gt;\n&lt;!-- This attribute is \"false\" by default on apps targeting\n   Android 10 or higher. --&gt;\n    &lt;application android:requestLegacyExternalStorage=\"true\" ... &gt;\n     ...\n    &lt;/application&gt;\n&lt;/manifest&gt;\n</code></pre>\n\n<p>@blackapps This is not a hack.</p>\n"},{"tags":[],"owner":{"account_id":3682348,"reputation":1,"user_id":3067022,"display_name":"Manuel Silverio"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677857238,"creation_date":1677857026,"answer_id":75628936,"question_id":62241582,"body_markdown":"A better approach is to move the storage used for cache from external to internal. This must be done before the view is loaded/inflated.\r\n\r\nFor an Activity:\r\n\r\n    Configuration.getInstance().osmdroidTileCache = filesDir\r\n\r\nFor a fragment: \r\n\r\n    Configuration.getInstance().osmdroidTileCache = requireContext().filesDir\r\n\r\nIf using Activity binding, you must change the directory right before calling this:\r\n\r\n    binding = ActivityNameBinding.inflate(layoutInflater)\r\nOtherwise, the map view will be built and automatically attempt to access external storage.","title":"File storage error when trying to display an OpenStreetMap map","body":"<p>A better approach is to move the storage used for cache from external to internal. This must be done before the view is loaded/inflated.</p>\n<p>For an Activity:</p>\n<pre><code>Configuration.getInstance().osmdroidTileCache = filesDir\n</code></pre>\n<p>For a fragment:</p>\n<pre><code>Configuration.getInstance().osmdroidTileCache = requireContext().filesDir\n</code></pre>\n<p>If using Activity binding, you must change the directory right before calling this:</p>\n<pre><code>binding = ActivityNameBinding.inflate(layoutInflater)\n</code></pre>\n<p>Otherwise, the map view will be built and automatically attempt to access external storage.</p>\n"}],"owner":{"account_id":1361461,"reputation":1592,"user_id":1298744,"accept_rate":71,"display_name":"Zelig63"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":223,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":62242640,"answer_count":2,"score":1,"last_activity_date":1677857238,"creation_date":1591510401,"question_id":62241582,"body_markdown":"My Android app using OpenStreetMap, which has been perfectly working for months, is now not able anymore to display the OpenStreetMap map. Despite the `WRITE_EXTERNAL_STORAGE` permission granted, I get messages like these :\r\n\r\n    E/OsmDroid: Unable to start the SQLite tile writer. Check external storage availability.\r\n    I/StorageUtils: /storage/emulated/0 is NOT writable\r\n\r\nAs I am targetting API29 and running on an Android 10 phone, I suppose the problem is related to the new policy about external storage access and the requirement to use the Storage Access Framework. Am I right?\r\n\r\nNo matter if I am right or wrong, does anyone know how I could fix this?","title":"File storage error when trying to display an OpenStreetMap map","body":"<p>My Android app using OpenStreetMap, which has been perfectly working for months, is now not able anymore to display the OpenStreetMap map. Despite the <code>WRITE_EXTERNAL_STORAGE</code> permission granted, I get messages like these :</p>\n\n<pre><code>E/OsmDroid: Unable to start the SQLite tile writer. Check external storage availability.\nI/StorageUtils: /storage/emulated/0 is NOT writable\n</code></pre>\n\n<p>As I am targetting API29 and running on an Android 10 phone, I suppose the problem is related to the new policy about external storage access and the requirement to use the Storage Access Framework. Am I right?</p>\n\n<p>No matter if I am right or wrong, does anyone know how I could fix this?</p>\n"},{"tags":["java","mockito","junit4"],"comments":[{"owner":{"account_id":7898962,"reputation":515,"user_id":5966620,"display_name":"Bibek Kr. Bazaz"},"score":0,"creation_date":1561615879,"post_id":56784899,"comment_id":100123908,"body_markdown":"both are public methods","body":"both are public methods"},{"owner":{"account_id":1046317,"reputation":996,"user_id":1051228,"accept_rate":44,"display_name":"sandeep"},"score":0,"creation_date":1561615946,"post_id":56784899,"comment_id":100123929,"body_markdown":"irrespective of wether it public or private, it need to be tested because its part of class to be tested. if its private then it will be tested through methodUnderTest()","body":"irrespective of wether it public or private, it need to be tested because its part of class to be tested. if its private then it will be tested through methodUnderTest()"},{"owner":{"account_id":5559956,"reputation":13829,"user_id":9840318,"display_name":"Madhu Bhat"},"score":0,"creation_date":1561615951,"post_id":56784899,"comment_id":100123933,"body_markdown":"Have you not tried when(spyA.display()).thenReturn(anyValue)?","body":"Have you not tried when(spyA.display()).thenReturn(anyValue)?"},{"owner":{"account_id":5559956,"reputation":13829,"user_id":9840318,"display_name":"Madhu Bhat"},"score":0,"creation_date":1561616008,"post_id":56784899,"comment_id":100123953,"body_markdown":"@sandeep private methods can&#39;t be mocked with mockito","body":"@sandeep private methods can&#39;t be mocked with mockito"},{"owner":{"account_id":1046317,"reputation":996,"user_id":1051228,"accept_rate":44,"display_name":"sandeep"},"score":0,"creation_date":1561616086,"post_id":56784899,"comment_id":100123974,"body_markdown":"Agree, when did i said to mock it. I am saying its not good to mock anything in class that is under test.","body":"Agree, when did i said to mock it. I am saying its not good to mock anything in class that is under test."},{"owner":{"account_id":5559956,"reputation":13829,"user_id":9840318,"display_name":"Madhu Bhat"},"score":0,"creation_date":1561616233,"post_id":56784899,"comment_id":100124033,"body_markdown":"@sandeep please read the question of OP again.","body":"@sandeep please read the question of OP again."},{"owner":{"account_id":1046317,"reputation":996,"user_id":1051228,"accept_rate":44,"display_name":"sandeep"},"score":0,"creation_date":1561616311,"post_id":56784899,"comment_id":100124067,"body_markdown":"@madhu I read the question thats why replying. basically what he is tying to do is antipattern.","body":"@madhu I read the question thats why replying. basically what he is tying to do is antipattern."},{"owner":{"account_id":5559956,"reputation":13829,"user_id":9840318,"display_name":"Madhu Bhat"},"score":1,"creation_date":1561617335,"post_id":56784899,"comment_id":100124507,"body_markdown":"@sandeep the OP is just asking about how to mock a method while testing another method. There is no harm in mocking `display` method while testing `methodUnderTest`. That being said, having test for `display` method is necessary too. But that is outside the scope of this question.","body":"@sandeep the OP is just asking about how to mock a method while testing another method. There is no harm in mocking <code>display</code> method while testing <code>methodUnderTest</code>. That being said, having test for <code>display</code> method is necessary too. But that is outside the scope of this question."}],"answers":[{"comments":[{"owner":{"account_id":7898962,"reputation":515,"user_id":5966620,"display_name":"Bibek Kr. Bazaz"},"score":0,"creation_date":1561627996,"post_id":56784964,"comment_id":100130311,"body_markdown":"I used your way and it worked for me. Thanks. However I think the initial downvote was because you did not used Mockito in the answer.","body":"I used your way and it worked for me. Thanks. However I think the initial downvote was because you did not used Mockito in the answer."}],"tags":[],"owner":{"account_id":2923083,"reputation":746,"user_id":2504962,"display_name":"Rashin"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1561616043,"creation_date":1561616043,"answer_id":56784964,"question_id":56784899,"body_markdown":"You don&#39;t need mockito for it. In the test when you create your test object you can create it by\r\n```java\r\nA underTest = new A() {\r\n    @Override\r\n    public int display() {\r\n        return &lt;expected result&gt;\r\n    }\r\n}\r\n\r\n```\r\n\r\nIn this way you can control what kind of value is returned by the display method.","title":"How to mock a method of a class being called inside another method that is being tested of the same class?","body":"<p>You don't need mockito for it. In the test when you create your test object you can create it by</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>A underTest = new A() {\n    @Override\n    public int display() {\n        return &lt;expected result&gt;\n    }\n}\n\n</code></pre>\n\n<p>In this way you can control what kind of value is returned by the display method.</p>\n"},{"comments":[{"owner":{"account_id":15956467,"reputation":4079,"user_id":11514534,"display_name":"second"},"score":2,"creation_date":1561649482,"post_id":56784997,"comment_id":100143416,"body_markdown":"The annotation used in this answer is incorrect. It should be `@Spy` instead of `@Mock`. (But the edit request was rejected).","body":"The annotation used in this answer is incorrect. It should be <code>@Spy</code> instead of <code>@Mock</code>. (But the edit request was rejected)."},{"owner":{"account_id":6952291,"reputation":750,"user_id":5334551,"display_name":"Highbrainer"},"score":0,"creation_date":1561705466,"post_id":56784997,"comment_id":100159049,"body_markdown":"@second `@Spy` and `@Mock` both could work but are different things. see https://javapointers.com/tutorial/difference-between-spy-and-mock-in-mockito/","body":"@second <code>@Spy</code> and <code>@Mock</code> both could work but are different things. see <a href=\"https://javapointers.com/tutorial/difference-between-spy-and-mock-in-mockito/\" rel=\"nofollow noreferrer\">javapointers.com/tutorial/&hellip;</a>"},{"owner":{"account_id":15956467,"reputation":4079,"user_id":11514534,"display_name":"second"},"score":1,"creation_date":1561710088,"post_id":56784997,"comment_id":100160944,"body_markdown":"When you mock `a` the call of `methodUnderTest` is replaced and you get a return of 0, when you spy on `a` the real implementaion of methodUnderTest would be evaluated. As the TO wants to test `methodUnderTest` using Mock is incorrect. You can easily verify that by running your test.","body":"When you mock <code>a</code> the call of <code>methodUnderTest</code> is replaced and you get a return of 0, when you spy on <code>a</code> the real implementaion of methodUnderTest would be evaluated. As the TO wants to test <code>methodUnderTest</code> using Mock is incorrect. You can easily verify that by running your test."},{"owner":{"account_id":6952291,"reputation":750,"user_id":5334551,"display_name":"Highbrainer"},"score":0,"creation_date":1677857028,"post_id":56784997,"comment_id":133425501,"body_markdown":"Realy late but @second was entirely right - I edited the answer accordingly.","body":"Realy late but @second was entirely right - I edited the answer accordingly."}],"tags":[],"owner":{"account_id":6952291,"reputation":750,"user_id":5334551,"display_name":"Highbrainer"},"comment_count":4,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1677856977,"creation_date":1561616186,"answer_id":56784997,"question_id":56784899,"body_markdown":"If you want to use mockito, I&#39;d go for something like that : \r\n\r\n```java\r\n@Spy\r\nprivate A a;\r\n\r\n@Test\r\npublic void test() {\t\r\n\t\r\n\t//define the behaviour\r\n\tMockito.when(a.display()).thenReturn(12);\r\n\t\r\n\t// call methodUnderTest\r\n\tint res = a.methodUnderTest();\r\n\t\r\n\t// check that you get what you want\r\n\tAssert.assertEquals(SOME_VALUE, res);\r\n\t\r\n}\r\n```\r\n\r\nAnd if you don&#39;t want to use annotations, you&#39;d initialize `a` like this :\r\n```java\r\nA a = Mockito.spy(new A());\r\n```\r\n\r\n\r\nHTH!","title":"How to mock a method of a class being called inside another method that is being tested of the same class?","body":"<p>If you want to use mockito, I'd go for something like that :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Spy\nprivate A a;\n\n@Test\npublic void test() {    \n    \n    //define the behaviour\n    Mockito.when(a.display()).thenReturn(12);\n    \n    // call methodUnderTest\n    int res = a.methodUnderTest();\n    \n    // check that you get what you want\n    Assert.assertEquals(SOME_VALUE, res);\n    \n}\n</code></pre>\n<p>And if you don't want to use annotations, you'd initialize <code>a</code> like this :</p>\n<pre class=\"lang-java prettyprint-override\"><code>A a = Mockito.spy(new A());\n</code></pre>\n<p>HTH!</p>\n"},{"comments":[{"owner":{"account_id":7898962,"reputation":515,"user_id":5966620,"display_name":"Bibek Kr. Bazaz"},"score":0,"creation_date":1561628088,"post_id":56785000,"comment_id":100130369,"body_markdown":"I am testing this code at the moment. Once done, I will accept/comment. Thanks for the help.","body":"I am testing this code at the moment. Once done, I will accept/comment. Thanks for the help."},{"owner":{"account_id":3496867,"reputation":3005,"user_id":2924784,"accept_rate":83,"display_name":"orirab"},"score":0,"creation_date":1561632767,"post_id":56785000,"comment_id":100133032,"body_markdown":"ty! just FYI, I tested this locally before posting :)","body":"ty! just FYI, I tested this locally before posting :)"},{"owner":{"account_id":3496867,"reputation":3005,"user_id":2924784,"accept_rate":83,"display_name":"orirab"},"score":0,"creation_date":1561662239,"post_id":56785000,"comment_id":100148994,"body_markdown":"Any news regarding the testing?","body":"Any news regarding the testing?"},{"owner":{"account_id":7898962,"reputation":515,"user_id":5966620,"display_name":"Bibek Kr. Bazaz"},"score":0,"creation_date":1561698710,"post_id":56785000,"comment_id":100156780,"body_markdown":"This worked for me too. Thanks for pointing the Spy method to me.","body":"This worked for me too. Thanks for pointing the Spy method to me."}],"tags":[],"owner":{"account_id":3496867,"reputation":3005,"user_id":2924784,"accept_rate":83,"display_name":"orirab"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1561616528,"creation_date":1561616194,"answer_id":56785000,"question_id":56784899,"body_markdown":"If this is your class:\r\n```\r\n    public static class A{\r\n        public int methodUnderTest() {\r\n            return display();\r\n        }\r\n\r\n        public int display(){\r\n            return 1;\r\n        }\r\n    }\r\n```\r\nthen using mockito, you can do this:\r\n```\r\n        A a = spy(new A());\r\n        when(a.display()).thenReturn(0);\r\n        System.out.println(a.methodUnderTest()); // will print 0\r\n```\r\n\r\nExplanation:\r\n\r\nWhen you `mock()` a class, there is no underlying instance, and all the methods you call will do nothing and return default values unless specified otherwise.\r\n\r\nWhen you `spy()` on an instance, all calls get recorded, and **forwarded to the actual instance**. This means that your class behaviour will stay exactly the same unless you mock a specific call.\r\n\r\n----------\r\nHaving said that, a case like yours is usually a symptom that you need to split the class, and invest a bit in [separating your concerns][1].\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Separation_of_concerns","title":"How to mock a method of a class being called inside another method that is being tested of the same class?","body":"<p>If this is your class:</p>\n\n<pre><code>    public static class A{\n        public int methodUnderTest() {\n            return display();\n        }\n\n        public int display(){\n            return 1;\n        }\n    }\n</code></pre>\n\n<p>then using mockito, you can do this:</p>\n\n<pre><code>        A a = spy(new A());\n        when(a.display()).thenReturn(0);\n        System.out.println(a.methodUnderTest()); // will print 0\n</code></pre>\n\n<p>Explanation:</p>\n\n<p>When you <code>mock()</code> a class, there is no underlying instance, and all the methods you call will do nothing and return default values unless specified otherwise.</p>\n\n<p>When you <code>spy()</code> on an instance, all calls get recorded, and <strong>forwarded to the actual instance</strong>. This means that your class behaviour will stay exactly the same unless you mock a specific call.</p>\n\n<hr>\n\n<p>Having said that, a case like yours is usually a symptom that you need to split the class, and invest a bit in <a href=\"https://en.wikipedia.org/wiki/Separation_of_concerns\" rel=\"nofollow noreferrer\">separating your concerns</a>.</p>\n"}],"owner":{"account_id":7898962,"reputation":515,"user_id":5966620,"display_name":"Bibek Kr. Bazaz"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6257,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":56784964,"answer_count":3,"score":0,"last_activity_date":1677856977,"creation_date":1561615749,"question_id":56784899,"body_markdown":"For Example there is a class A with two methods methodUnderTest() and display() where methodUnderTest calls the display method. While writing a junit using mockito how can I mock the display() method?\r\n\r\n\r\n\r\n    class A{\r\n    public int method methodUnderTest{\r\n       //some code\r\n       display();\r\n    }\r\n    \r\n    public int display(){\r\n      //some code\r\n    }\r\n\r\n    }\r\n\r\n","title":"How to mock a method of a class being called inside another method that is being tested of the same class?","body":"<p>For Example there is a class A with two methods methodUnderTest() and display() where methodUnderTest calls the display method. While writing a junit using mockito how can I mock the display() method?</p>\n\n<pre><code>class A{\npublic int method methodUnderTest{\n   //some code\n   display();\n}\n\npublic int display(){\n  //some code\n}\n\n}\n</code></pre>\n"},{"tags":["python","java","arrays"],"comments":[{"owner":{"account_id":15419912,"reputation":161,"user_id":11124236,"display_name":"Sullivan"},"score":0,"creation_date":1677855768,"post_id":75628631,"comment_id":133425113,"body_markdown":"This is a sample how to create 3D array:\n`num_var = 5`\n`last_union_neg = [[[0 for k in range(unknown_size)] for j in range(3)] for i in range(num_var+1)]`\nfor access and modify the elements of the 3D like other lists \n`last_union_neg[0][1][0] = 23`","body":"This is a sample how to create 3D array: <code>num_var = 5</code> <code>last_union_neg = [[[0 for k in range(unknown_size)] for j in range(3)] for i in range(num_var+1)]</code> for access and modify the elements of the 3D like other lists  <code>last_union_neg[0][1][0] = 23</code>"},{"owner":{"account_id":17236237,"reputation":4285,"user_id":12479639,"display_name":"Axe319"},"score":0,"creation_date":1677859690,"post_id":75628631,"comment_id":133426364,"body_markdown":"Just use a nested list comprehension `last_union_neg = [[[] for _ in range(3)] for _ in range(number_of_variables + 1)]` and then `list.append`. `last_union_neg[0][0].append(2)`, etc.","body":"Just use a nested list comprehension <code>last_union_neg = [[[] for _ in range(3)] for _ in range(number_of_variables + 1)]</code> and then <code>list.append</code>. <code>last_union_neg[0][0].append(2)</code>, etc."}],"answers":[{"comments":[{"owner":{"account_id":17236237,"reputation":4285,"user_id":12479639,"display_name":"Axe319"},"score":0,"creation_date":1677859880,"post_id":75628704,"comment_id":133426415,"body_markdown":"If you `append` the same `list` 3 times you&#39;re going to have surprising results.","body":"If you <code>append</code> the same <code>list</code> 3 times you&#39;re going to have surprising results."}],"tags":[],"owner":{"account_id":23426499,"reputation":23,"user_id":17485914,"display_name":"Utorque"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677855837,"creation_date":1677855837,"answer_id":75628704,"question_id":75628631,"body_markdown":"You don&#39;t have to init array dimension in python, since it&#39;s more like a linked list. Just create your array like `my_array = []`. Then, you can append arrays in it : `my_array.append(another_array)` as many times as you want. Do it 3 times and you have your matrix.","title":"Init 3D Java array without exact size in Python","body":"<p>You don't have to init array dimension in python, since it's more like a linked list. Just create your array like <code>my_array = []</code>. Then, you can append arrays in it : <code>my_array.append(another_array)</code> as many times as you want. Do it 3 times and you have your matrix.</p>\n"}],"owner":{"account_id":27928138,"reputation":1,"user_id":21326801,"display_name":"zbalint00"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1677856824,"creation_date":1677855511,"question_id":75628631,"body_markdown":"I want to init a 3D array in python without knowing the last dimension size.\r\n\r\nThis is what i have in Java:\r\n\r\n```\r\nlastUnionNeg = new int[numberOfVariables+1][3][];\r\n```\r\nI want to do the same in Python if it is possible.\r\nI search a lot but i did not find any useful. Can anybody help me? ","title":"Init 3D Java array without exact size in Python","body":"<p>I want to init a 3D array in python without knowing the last dimension size.</p>\n<p>This is what i have in Java:</p>\n<pre><code>lastUnionNeg = new int[numberOfVariables+1][3][];\n</code></pre>\n<p>I want to do the same in Python if it is possible.\nI search a lot but i did not find any useful. Can anybody help me?</p>\n"},{"tags":["java","authentication","console","passwords","banking"],"answers":[{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - "},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1624665200,"creation_date":1624665200,"answer_id":68138093,"question_id":68134810,"body_markdown":"`Any idea why the &quot;Wrong Pin. Try Again&quot; shows up twice in console?`\r\n\r\nYes...In your **BankingSystemWithPin.getBankAccountByPin()** method you have your `for` loop used to iterate through the different bank accounts to locate a related pin number. This is fine for your specific use case at this point however you do need to get rid of that `else if{}` code block and here is why:\r\n\r\nIf for example you have ten specific accounts and each account contains a unique pin number and the pin number entered was related to the fifth account then upon each iteration up to the 5th one the `else if` condition is met and therefore outputs `Wrong Pin. Try Again.`. The fifth iteration holds the correct PIN and then exits the method with a `return bankAccount;`. What you would see within the console window is:\r\n\r\n    Wrong Pin. Try Again.\r\n    Wrong Pin. Try Again.\r\n    Wrong Pin. Try Again.\r\n    Wrong Pin. Try Again.\r\n    Enter an option: \r\n    A. Check balance \r\n    B. Deposit \r\n    C. Withdraw \r\n    X. Exit\r\n\r\nYou don&#39;t want that `else if` code block in that `for` loop so just delete it. Instead, place the following code line directly **after** for `for` loop block:\r\n\r\n    System.out.println(&quot;Wrong Pin. Try Again.&quot;);\r\n\r\nRemember, because you are exiting the method anyways within the `for` loop if a correct pin number can be found related to a bank account, the above line will **never** be reached. It will only be reached if the supplied PIN number can not be found. Your **getBankAccountByPin()** method should look something like this:\r\n\r\n    public static BankAccount getBankAccountByPin(BankAccount[] bankAccounts, String pin) {\r\n        for (BankAccount bankAccount : bankAccounts) {\r\n            if (bankAccount.pin.equals(pin)) {\r\n                System.out.println();\r\n                System.out.println(&quot;Account Number: &quot; + bankAccount.IBAN);\r\n                return bankAccount;\r\n            } \r\n        }\r\n        System.err.println(&quot;Wrong PIN. Try Again.&quot;);\r\n        System.err.println();\r\n        return null;\r\n    }\r\n\r\nThat&#39;s not all...before carrying on after the call to the above method you need to ensure that it actually supplied a bank account number. After all, if the pin number supplied is wrong then there will be no bank account number, null will be returned instead and you don&#39;t want to carry on with a null. You need to validate that a bank account number was indeed acquired before showing the menu. To do this you will need to place the call to the **getBankAccountByPin()** method within a `while` loop like this:\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class BankingSystemWithPin {\r\n    \r\n    private static int pinAttempts = 0;\r\n    \r\n    public static void main(String[] args) {\r\n        BankAccount bankAccount1 = new BankAccount(&quot;RO29455302311322&quot;, 200, &quot;1234&quot;);\r\n        BankAccount bankAccount2 = new BankAccount(&quot;RO43593530521134&quot;, 600, &quot;7530&quot;);\r\n        BankAccount[] bankAccounts = {bankAccount1, bankAccount2};\r\n        Scanner scanner = new Scanner(System.in);\r\n        BankAccount currentBankAccount = null;\r\n        while (currentBankAccount == null) {\r\n            pinAttempts++;\r\n            if (pinAttempts &gt; 3) {\r\n                System.err.println();\r\n                System.err.println(&quot;You have exceeded the allowable number of login attempts!&quot;);\r\n                System.err.println(&quot;The transaction is over. &quot;);\r\n                System.exit(0);\r\n            }\r\n            Menu.welcome();\r\n            String pin = scanner.nextLine();\r\n            currentBankAccount = BankingSystemWithPin.getBankAccountByPin(bankAccounts, pin);\r\n        }\r\n        \r\n        // PIN correct and account number acquired!\r\n        ATM.useATM(currentBankAccount);\r\n    }\r\n    \r\n    public static BankAccount getBankAccountByPin(BankAccount[] bankAccounts, String pin) {\r\n        for (BankAccount bankAccount : bankAccounts) {\r\n            if (bankAccount.pin.equals(pin)) {\r\n                System.out.println();\r\n                System.out.println(&quot;Account Number: &quot; + bankAccount.IBAN);\r\n                return bankAccount;\r\n            } \r\n        }\r\n        System.err.println(&quot;Wrong Pin. Try Again.&quot;);\r\n        System.err.println();\r\n        return null;\r\n    }\r\n}\r\n```\r\n\r\nNow, for locking out a User. How will you ever know which User to Lock-out? There is no way of locking-out a User for the simple reason that you will never know who to lock out since there is no ATM card involved. You can however shut down the application and force the User to restart it in order to try again after three failed attempts. \r\n\r\nThis is obviously best done where you try to validate the PIN and acquire the bank account number related to it...the **BankingSystemWithPin** class. The above code also demonstrates this by adding a private integer class member variable named **pinAttempts** and wrapping the call to the **getBankAccountByPin()** method within a `while` loop. This keeps things compact and simple.","title":"Java - ATM Banking login with 3 times try pin lock","body":"<p><code>Any idea why the &quot;Wrong Pin. Try Again&quot; shows up twice in console?</code></p>\n<p>Yes...In your <strong>BankingSystemWithPin.getBankAccountByPin()</strong> method you have your <code>for</code> loop used to iterate through the different bank accounts to locate a related pin number. This is fine for your specific use case at this point however you do need to get rid of that <code>else if{}</code> code block and here is why:</p>\n<p>If for example you have ten specific accounts and each account contains a unique pin number and the pin number entered was related to the fifth account then upon each iteration up to the 5th one the <code>else if</code> condition is met and therefore outputs <code>Wrong Pin. Try Again.</code>. The fifth iteration holds the correct PIN and then exits the method with a <code>return bankAccount;</code>. What you would see within the console window is:</p>\n<pre><code>Wrong Pin. Try Again.\nWrong Pin. Try Again.\nWrong Pin. Try Again.\nWrong Pin. Try Again.\nEnter an option: \nA. Check balance \nB. Deposit \nC. Withdraw \nX. Exit\n</code></pre>\n<p>You don't want that <code>else if</code> code block in that <code>for</code> loop so just delete it. Instead, place the following code line directly <strong>after</strong> for <code>for</code> loop block:</p>\n<pre><code>System.out.println(&quot;Wrong Pin. Try Again.&quot;);\n</code></pre>\n<p>Remember, because you are exiting the method anyways within the <code>for</code> loop if a correct pin number can be found related to a bank account, the above line will <strong>never</strong> be reached. It will only be reached if the supplied PIN number can not be found. Your <strong>getBankAccountByPin()</strong> method should look something like this:</p>\n<pre><code>public static BankAccount getBankAccountByPin(BankAccount[] bankAccounts, String pin) {\n    for (BankAccount bankAccount : bankAccounts) {\n        if (bankAccount.pin.equals(pin)) {\n            System.out.println();\n            System.out.println(&quot;Account Number: &quot; + bankAccount.IBAN);\n            return bankAccount;\n        } \n    }\n    System.err.println(&quot;Wrong PIN. Try Again.&quot;);\n    System.err.println();\n    return null;\n}\n</code></pre>\n<p>That's not all...before carrying on after the call to the above method you need to ensure that it actually supplied a bank account number. After all, if the pin number supplied is wrong then there will be no bank account number, null will be returned instead and you don't want to carry on with a null. You need to validate that a bank account number was indeed acquired before showing the menu. To do this you will need to place the call to the <strong>getBankAccountByPin()</strong> method within a <code>while</code> loop like this:</p>\n<pre><code>import java.util.Scanner;\n\npublic class BankingSystemWithPin {\n    \n    private static int pinAttempts = 0;\n    \n    public static void main(String[] args) {\n        BankAccount bankAccount1 = new BankAccount(&quot;RO29455302311322&quot;, 200, &quot;1234&quot;);\n        BankAccount bankAccount2 = new BankAccount(&quot;RO43593530521134&quot;, 600, &quot;7530&quot;);\n        BankAccount[] bankAccounts = {bankAccount1, bankAccount2};\n        Scanner scanner = new Scanner(System.in);\n        BankAccount currentBankAccount = null;\n        while (currentBankAccount == null) {\n            pinAttempts++;\n            if (pinAttempts &gt; 3) {\n                System.err.println();\n                System.err.println(&quot;You have exceeded the allowable number of login attempts!&quot;);\n                System.err.println(&quot;The transaction is over. &quot;);\n                System.exit(0);\n            }\n            Menu.welcome();\n            String pin = scanner.nextLine();\n            currentBankAccount = BankingSystemWithPin.getBankAccountByPin(bankAccounts, pin);\n        }\n        \n        // PIN correct and account number acquired!\n        ATM.useATM(currentBankAccount);\n    }\n    \n    public static BankAccount getBankAccountByPin(BankAccount[] bankAccounts, String pin) {\n        for (BankAccount bankAccount : bankAccounts) {\n            if (bankAccount.pin.equals(pin)) {\n                System.out.println();\n                System.out.println(&quot;Account Number: &quot; + bankAccount.IBAN);\n                return bankAccount;\n            } \n        }\n        System.err.println(&quot;Wrong Pin. Try Again.&quot;);\n        System.err.println();\n        return null;\n    }\n}\n</code></pre>\n<p>Now, for locking out a User. How will you ever know which User to Lock-out? There is no way of locking-out a User for the simple reason that you will never know who to lock out since there is no ATM card involved. You can however shut down the application and force the User to restart it in order to try again after three failed attempts.</p>\n<p>This is obviously best done where you try to validate the PIN and acquire the bank account number related to it...the <strong>BankingSystemWithPin</strong> class. The above code also demonstrates this by adding a private integer class member variable named <strong>pinAttempts</strong> and wrapping the call to the <strong>getBankAccountByPin()</strong> method within a <code>while</code> loop. This keeps things compact and simple.</p>\n"},{"tags":[],"owner":{"account_id":20106472,"reputation":11,"user_id":14743862,"display_name":"Md Tech Tamizha"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651539961,"creation_date":1651450484,"answer_id":72081305,"question_id":68134810,"body_markdown":"Because you are creating two constructors and also you are using a for loop inside validation, the loop runs two times and you get two warning messages. So I tried the below code.\r\n    \r\n    import java.util.Scanner;\r\n    \r\n    public class BankingSystemWithPin {\r\n        public static void main(String[] args) {\r\n            BankAccount bankAccount1 = new BankAccount(&quot;RO29455302311322&quot;, 200, &quot;1234&quot;);\r\n            BankAccount bankAccount2 = new BankAccount(&quot;RO43593530521134&quot;, 600, &quot;7530&quot;);\r\n            BankAccount[] bankAccounts = {bankAccount1, bankAccount2};\r\n            Scanner scanner = new Scanner(System.in);\r\n            Menu.welcome();\r\n            String pin = scanner.nextLine();\r\n            BankAccount currentBankAccount = BankingSystemWithPin.getBankAccountByPin(bankAccounts, pin);\r\n            ATM.useATM(currentBankAccount);\r\n        }\r\n            public static BankAccount getBankAccountByPin(BankAccount[] bankAccounts, String pin) {\r\n            for (BankAccount bankAccount : bankAccounts) {\r\n                if (bankAccount.pin.equals(pin)) {\r\n                    return bankAccount;\r\n                }\r\n            }\r\n            System.out.println(&quot;Wrong Pin. Try Again.&quot;);\r\n            return null;\r\n        }\r\n    }","title":"Java - ATM Banking login with 3 times try pin lock","body":"<p>Because you are creating two constructors and also you are using a for loop inside validation, the loop runs two times and you get two warning messages. So I tried the below code.</p>\n<pre><code>import java.util.Scanner;\n\npublic class BankingSystemWithPin {\n    public static void main(String[] args) {\n        BankAccount bankAccount1 = new BankAccount(&quot;RO29455302311322&quot;, 200, &quot;1234&quot;);\n        BankAccount bankAccount2 = new BankAccount(&quot;RO43593530521134&quot;, 600, &quot;7530&quot;);\n        BankAccount[] bankAccounts = {bankAccount1, bankAccount2};\n        Scanner scanner = new Scanner(System.in);\n        Menu.welcome();\n        String pin = scanner.nextLine();\n        BankAccount currentBankAccount = BankingSystemWithPin.getBankAccountByPin(bankAccounts, pin);\n        ATM.useATM(currentBankAccount);\n    }\n        public static BankAccount getBankAccountByPin(BankAccount[] bankAccounts, String pin) {\n        for (BankAccount bankAccount : bankAccounts) {\n            if (bankAccount.pin.equals(pin)) {\n                return bankAccount;\n            }\n        }\n        System.out.println(&quot;Wrong Pin. Try Again.&quot;);\n        return null;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26262130,"reputation":11,"user_id":19933262,"display_name":"pradana-asih"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677856817,"creation_date":1677856817,"answer_id":75628890,"question_id":68134810,"body_markdown":"\r\nit turns out that the error is in a class where the constructor is not clearly added.\r\n\r\nYou can check my edits at\r\n\r\nhttps://github.com/pradanaasih1233/belajar-apa-aja/tree/main/ATM\r\n\r\n","title":"Java - ATM Banking login with 3 times try pin lock","body":"<p>it turns out that the error is in a class where the constructor is not clearly added.</p>\n<p>You can check my edits at</p>\n<p><a href=\"https://github.com/pradanaasih1233/belajar-apa-aja/tree/main/ATM\" rel=\"nofollow noreferrer\">https://github.com/pradanaasih1233/belajar-apa-aja/tree/main/ATM</a></p>\n"}],"owner":{"account_id":22052675,"reputation":21,"user_id":16316707,"display_name":"razro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4632,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1677856817,"creation_date":1624640931,"question_id":68134810,"body_markdown":"I&#39;m new to java programming. I&#39;m trying to make a banking system log-in that locks the user after entering the wrong pin 3 times. I&#39;m trying to merge 2 pieces of code. Any ideas why &quot;Wrong Pin. Try Again&quot; shows up twice in the console?\r\n\r\nATM class\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class ATM {\r\n        public static void useATM(BankAccount bankAccount) {\r\n            Scanner scanner = new Scanner(System.in);\r\n            char option = &#39;\\0&#39;;\r\n            do {\r\n                Menu.showMenu();\r\n                option = scanner.next().charAt(0);\r\n                switch (option) {\r\n                    case &#39;A&#39;:\r\n                        System.out.println(bankAccount.getBalance());\r\n                        break;\r\n                    case &#39;B&#39;:\r\n                        System.out.println(&quot;Enter an amount to deposit: &quot;);\r\n                        int amountToDeposit = scanner.nextInt();\r\n                        bankAccount.deposit(amountToDeposit);\r\n                        break;\r\n                    case &#39;C&#39;:\r\n                        System.out.println(&quot;Enter an amount to withdraw: &quot;);\r\n                        int amountToWithdraw = scanner.nextInt();\r\n                        bankAccount.withdraw(amountToWithdraw);\r\n                        break;\r\n                    case &#39;X&#39;:\r\n                        System.out.println(&quot;The transaction is over. &quot;);\r\n                        break;\r\n                    default:\r\n                        System.out.println(&quot;Not a valid option. Choose another option.&quot;);\r\n                        break;\r\n                }\r\n            } while (option != &#39;X&#39;);\r\n        }\r\n    }\r\n\r\nBankAccount class\r\n\r\n    public class BankAccount {\r\n        String IBAN;\r\n        int balance;\r\n        String pin;\r\n    \r\n        public BankAccount(String IBAN, int balance, String pin) {\r\n            this.IBAN = IBAN;\r\n            this.balance = balance;\r\n            this.pin = pin;\r\n        }\r\n    \r\n        public int getBalance() {\r\n            return this.balance;\r\n        }\r\n    \r\n        public void deposit(int amount) {\r\n            this.balance = this.balance + amount;\r\n        }\r\n    \r\n        public void withdraw(int amount) {\r\n            if (amount &lt;= this.balance) {\r\n                this.balance = this.balance - amount;\r\n                System.out.println(&quot;You withdrew &quot; + amount);\r\n            } else {\r\n                System.out.println(&quot;Not enough money. &quot;);\r\n            }\r\n        }\r\n    }\r\n\r\nBankingSystemWithPin main class\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class BankingSystemWithPin {\r\n        public static void main(String[] args) {\r\n            BankAccount bankAccount1 = new BankAccount(&quot;RO29455302311322&quot;, 200, &quot;1234&quot;);\r\n            BankAccount bankAccount2 = new BankAccount(&quot;RO43593530521134&quot;, 600, &quot;7530&quot;);\r\n            BankAccount[] bankAccounts = {bankAccount1, bankAccount2};\r\n            Scanner scanner = new Scanner(System.in);\r\n            Menu.welcome();\r\n            String pin = scanner.nextLine();\r\n            BankAccount currentBankAccount = BankingSystemWithPin.getBankAccountByPin(bankAccounts, pin);\r\n            ATM.useATM(currentBankAccount);\r\n        }\r\n            public static BankAccount getBankAccountByPin(BankAccount[] bankAccounts, String pin) {\r\n            for (BankAccount bankAccount : bankAccounts) {\r\n                if (bankAccount.pin.equals(pin)) {\r\n                    return bankAccount;\r\n                } else if (!bankAccount.pin.equals(pin) ) {\r\n                    System.out.println(&quot;Wrong Pin. Try Again.&quot;);\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n\r\nMenu class\r\n\r\n    public class Menu {\r\n        public static void showMenu() {\r\n            System.out.println(&quot;Enter an option: &quot;);\r\n            System.out.println(&quot;A. Check balance &quot;);\r\n            System.out.println(&quot;B. Deposit &quot;);\r\n            System.out.println(&quot;C. Withdraw &quot;);\r\n            System.out.println(&quot;X. Exit&quot;);\r\n        }\r\n            public static void welcome() {\r\n            System.out.println(&quot;Welcome! &quot;);\r\n            System.out.println(&quot;Please insert your pin: &quot;);\r\n        }\r\n    }\r\n\r\nFor the next piece of code, I&#39;m trying to merge it with my login system. What is the proper way to merge it into the main code? Should I try to paste it in BanckAccount class, or make a method to call it in main?\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class PinLockout {\r\n       \r\n                Scanner scanner = new Scanner(System.in);\r\n                int pin = 1234;\r\n                int tries = 0;\r\n                System.out.println(&quot;ENTER YOUR PIN: &quot;);\r\n                int entry = scanner.nextInt();\r\n                tries++;\r\n                while (entry != pin &amp;&amp; tries &lt; 3) {\r\n                    System.out.println(&quot;\\nINCORRECT PIN. TRY AGAIN.&quot;);\r\n                    System.out.println(&quot;ENTER YOUR PIN: &quot;);\r\n                    entry = scanner.nextInt();\r\n                    tries++;\r\n                }\r\n                if (entry == pin)\r\n                    System.out.println(&quot;\\nPIN ACCEPTED. ACCESS GRANTED.&quot;);\r\n                else if (tries &gt;= 3)\r\n                    System.out.println(&quot;\\nYOU HAVE RUN OUT OF TRIES. ACCOUNT LOCKED.&quot;);\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n\r\n\r\n\r\n","title":"Java - ATM Banking login with 3 times try pin lock","body":"<p>I'm new to java programming. I'm trying to make a banking system log-in that locks the user after entering the wrong pin 3 times. I'm trying to merge 2 pieces of code. Any ideas why &quot;Wrong Pin. Try Again&quot; shows up twice in the console?</p>\n<p>ATM class</p>\n<pre><code>import java.util.Scanner;\n\npublic class ATM {\n    public static void useATM(BankAccount bankAccount) {\n        Scanner scanner = new Scanner(System.in);\n        char option = '\\0';\n        do {\n            Menu.showMenu();\n            option = scanner.next().charAt(0);\n            switch (option) {\n                case 'A':\n                    System.out.println(bankAccount.getBalance());\n                    break;\n                case 'B':\n                    System.out.println(&quot;Enter an amount to deposit: &quot;);\n                    int amountToDeposit = scanner.nextInt();\n                    bankAccount.deposit(amountToDeposit);\n                    break;\n                case 'C':\n                    System.out.println(&quot;Enter an amount to withdraw: &quot;);\n                    int amountToWithdraw = scanner.nextInt();\n                    bankAccount.withdraw(amountToWithdraw);\n                    break;\n                case 'X':\n                    System.out.println(&quot;The transaction is over. &quot;);\n                    break;\n                default:\n                    System.out.println(&quot;Not a valid option. Choose another option.&quot;);\n                    break;\n            }\n        } while (option != 'X');\n    }\n}\n</code></pre>\n<p>BankAccount class</p>\n<pre><code>public class BankAccount {\n    String IBAN;\n    int balance;\n    String pin;\n\n    public BankAccount(String IBAN, int balance, String pin) {\n        this.IBAN = IBAN;\n        this.balance = balance;\n        this.pin = pin;\n    }\n\n    public int getBalance() {\n        return this.balance;\n    }\n\n    public void deposit(int amount) {\n        this.balance = this.balance + amount;\n    }\n\n    public void withdraw(int amount) {\n        if (amount &lt;= this.balance) {\n            this.balance = this.balance - amount;\n            System.out.println(&quot;You withdrew &quot; + amount);\n        } else {\n            System.out.println(&quot;Not enough money. &quot;);\n        }\n    }\n}\n</code></pre>\n<p>BankingSystemWithPin main class</p>\n<pre><code>import java.util.Scanner;\n\npublic class BankingSystemWithPin {\n    public static void main(String[] args) {\n        BankAccount bankAccount1 = new BankAccount(&quot;RO29455302311322&quot;, 200, &quot;1234&quot;);\n        BankAccount bankAccount2 = new BankAccount(&quot;RO43593530521134&quot;, 600, &quot;7530&quot;);\n        BankAccount[] bankAccounts = {bankAccount1, bankAccount2};\n        Scanner scanner = new Scanner(System.in);\n        Menu.welcome();\n        String pin = scanner.nextLine();\n        BankAccount currentBankAccount = BankingSystemWithPin.getBankAccountByPin(bankAccounts, pin);\n        ATM.useATM(currentBankAccount);\n    }\n        public static BankAccount getBankAccountByPin(BankAccount[] bankAccounts, String pin) {\n        for (BankAccount bankAccount : bankAccounts) {\n            if (bankAccount.pin.equals(pin)) {\n                return bankAccount;\n            } else if (!bankAccount.pin.equals(pin) ) {\n                System.out.println(&quot;Wrong Pin. Try Again.&quot;);\n            }\n        }\n        return null;\n    }\n}\n</code></pre>\n<p>Menu class</p>\n<pre><code>public class Menu {\n    public static void showMenu() {\n        System.out.println(&quot;Enter an option: &quot;);\n        System.out.println(&quot;A. Check balance &quot;);\n        System.out.println(&quot;B. Deposit &quot;);\n        System.out.println(&quot;C. Withdraw &quot;);\n        System.out.println(&quot;X. Exit&quot;);\n    }\n        public static void welcome() {\n        System.out.println(&quot;Welcome! &quot;);\n        System.out.println(&quot;Please insert your pin: &quot;);\n    }\n}\n</code></pre>\n<p>For the next piece of code, I'm trying to merge it with my login system. What is the proper way to merge it into the main code? Should I try to paste it in BanckAccount class, or make a method to call it in main?</p>\n<pre><code>import java.util.Scanner;\n\npublic class PinLockout {\n   \n            Scanner scanner = new Scanner(System.in);\n            int pin = 1234;\n            int tries = 0;\n            System.out.println(&quot;ENTER YOUR PIN: &quot;);\n            int entry = scanner.nextInt();\n            tries++;\n            while (entry != pin &amp;&amp; tries &lt; 3) {\n                System.out.println(&quot;\\nINCORRECT PIN. TRY AGAIN.&quot;);\n                System.out.println(&quot;ENTER YOUR PIN: &quot;);\n                entry = scanner.nextInt();\n                tries++;\n            }\n            if (entry == pin)\n                System.out.println(&quot;\\nPIN ACCEPTED. ACCESS GRANTED.&quot;);\n            else if (tries &gt;= 3)\n                System.out.println(&quot;\\nYOU HAVE RUN OUT OF TRIES. ACCOUNT LOCKED.&quot;);\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":123958,"reputation":109295,"user_id":318758,"accept_rate":100,"display_name":"Joni"},"score":1,"creation_date":1594061406,"post_id":62762327,"comment_id":110989054,"body_markdown":"You say it doesn&#39;t work. What exactly do you mean? What happens, and what did you expect to happen?","body":"You say it doesn&#39;t work. What exactly do you mean? What happens, and what did you expect to happen?"},{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":0,"creation_date":1594061606,"post_id":62762327,"comment_id":110989152,"body_markdown":"Remove the `+` symbol from this line `DanachBuchstabenPosition = BuchstabenPosition += 1;`","body":"Remove the <code>+</code> symbol from this line <code>DanachBuchstabenPosition = BuchstabenPosition += 1;</code>"}],"answers":[{"tags":[],"owner":{"account_id":14179476,"reputation":2663,"user_id":10243634,"display_name":"Oboe"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1594061440,"creation_date":1594061440,"answer_id":62762607,"question_id":62762327,"body_markdown":"I would do:\r\n\r\n    String name = &quot;Oracle&quot;;\r\n\r\n    Random random = new Random();\r\n    int index = random.nextInt(name.length());\r\n            \r\n    char randomChar = name.charAt(index);\r\n            \r\n    System.out.println(&quot;Index:&quot; + index + &quot; Letter:&quot; + randomChar);","title":"Revealing 1 random letter of a word doesnt work","body":"<p>I would do:</p>\n<pre><code>String name = &quot;Oracle&quot;;\n\nRandom random = new Random();\nint index = random.nextInt(name.length());\n        \nchar randomChar = name.charAt(index);\n        \nSystem.out.println(&quot;Index:&quot; + index + &quot; Letter:&quot; + randomChar);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12016542,"reputation":2344,"user_id":8791491,"display_name":"L.Grozinger"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1594129219,"creation_date":1594129219,"answer_id":62776629,"question_id":62762327,"body_markdown":"This line:\r\n\r\n    DanachBuchstabenPosition = BuchstabenPosition += 1;\r\n\r\nWill first increment `BuchstabenPosition`, then assign `DanachBuchstabenPosition` to be the value of `BuchstabenPosition`. So, `BuchstabenPosition` and `DanachBuchstabenPosition` are the same integer. The call to [substring][1] will then return the empty string `&quot;&quot;`.\r\n\r\nInstead assign `DanachBuchstabenPosition` as this:\r\n\r\n    DanachBuchstabenPosition = BuchstabenPosition + 1;\r\n\r\nSo that it is 1 greater than `BuchstabenPosition`.\r\n\r\n\r\nAlso, consider using [`charAt`][2] instead, which is closer to what the logic of your code requires.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring(int,%20int)\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#charAt(int)","title":"Revealing 1 random letter of a word doesnt work","body":"<p>This line:</p>\n<pre><code>DanachBuchstabenPosition = BuchstabenPosition += 1;\n</code></pre>\n<p>Will first increment <code>BuchstabenPosition</code>, then assign <code>DanachBuchstabenPosition</code> to be the value of <code>BuchstabenPosition</code>. So, <code>BuchstabenPosition</code> and <code>DanachBuchstabenPosition</code> are the same integer. The call to <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring(int,%20int)\" rel=\"nofollow noreferrer\">substring</a> will then return the empty string <code>&quot;&quot;</code>.</p>\n<p>Instead assign <code>DanachBuchstabenPosition</code> as this:</p>\n<pre><code>DanachBuchstabenPosition = BuchstabenPosition + 1;\n</code></pre>\n<p>So that it is 1 greater than <code>BuchstabenPosition</code>.</p>\n<p>Also, consider using <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#charAt(int)\" rel=\"nofollow noreferrer\"><code>charAt</code></a> instead, which is closer to what the logic of your code requires.</p>\n"}],"owner":{"account_id":18816171,"reputation":19,"user_id":13723251,"display_name":"Rexan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":62776629,"answer_count":2,"score":0,"last_activity_date":1677856679,"creation_date":1594060338,"question_id":62762327,"body_markdown":"I want to create an app where the user has to guess the company name of an icon. Everything works fine but I want to have a button that prints a hint for the user. I want to print 1 random letter of the companys name. But the company name and the length of the name changes because of the different levels.\r\nSo I thought I had to get the length of the companys name and then pick a random number of 0-companyname.\r\nThen I could use substring to chose 1 random letter of the companyname.\r\nBut it doesnt work. Here the important parts my code:\r\n\r\n  ```\r\n  Import java.util.Random;\r\n\r\n  int Laenge;\r\n  int BuchstabenPosition;\r\n  int DanachBuchstabenPosition;\r\n  Random r = new Random();\r\n    \r\n  Laenge = companyName.length();\r\n  BuchstabenPosition = r.nextInt(Laenge);\r\n  DanachBuchstabenPosition = BuchstabenPosition += 1;\r\n  tvHint.setText(&quot;Ein Buchstabe: &quot; + companyName.substring(BuchstabenPosition,DanachBuchstabenPosition));\r\n  ```\r\n\r\nWhen I run the app and click on the hint button, it only shows &quot;Ein Buchstabe: &quot;.\r\nI hope u understand what I want to do but here an example:\r\n\r\nLevel 1: Icon of YouTube, user doesnt have a clue of the company name, clicks hint button, a random letter of the word reveals, user now knows the name of the company and get to level 2.\r\n\r\nLevel 2: Icon of Stackoverflow, user doesnt have a clue of the company name, clicks hint button, a random letter of the word reveals.\r\n\r\nIf every company name would have the same length I could just make for example:\r\n```\r\n  int BuchstabenPosition;\r\n  int DanachBuchstabenPosition;\r\n  Random r = new Random();\r\n\r\n  BuchstabenPosition = r.nextInt(8);\r\n  DanachBuchstabenPosition = BuchstabenPosition += 1;\r\n  tvHint.setText(&quot;Ein Buchstabe: &quot; + companyName.substring(BuchstabenPosition,DanachBuchstabenPosition));\r\n```\r\nright?\r\nBut the companyname length changes.","title":"Revealing 1 random letter of a word doesnt work","body":"<p>I want to create an app where the user has to guess the company name of an icon. Everything works fine but I want to have a button that prints a hint for the user. I want to print 1 random letter of the companys name. But the company name and the length of the name changes because of the different levels.\nSo I thought I had to get the length of the companys name and then pick a random number of 0-companyname.\nThen I could use substring to chose 1 random letter of the companyname.\nBut it doesnt work. Here the important parts my code:</p>\n<pre><code>Import java.util.Random;\n\nint Laenge;\nint BuchstabenPosition;\nint DanachBuchstabenPosition;\nRandom r = new Random();\n  \nLaenge = companyName.length();\nBuchstabenPosition = r.nextInt(Laenge);\nDanachBuchstabenPosition = BuchstabenPosition += 1;\ntvHint.setText(&quot;Ein Buchstabe: &quot; + companyName.substring(BuchstabenPosition,DanachBuchstabenPosition));\n</code></pre>\n<p>When I run the app and click on the hint button, it only shows &quot;Ein Buchstabe: &quot;.\nI hope u understand what I want to do but here an example:</p>\n<p>Level 1: Icon of YouTube, user doesnt have a clue of the company name, clicks hint button, a random letter of the word reveals, user now knows the name of the company and get to level 2.</p>\n<p>Level 2: Icon of Stackoverflow, user doesnt have a clue of the company name, clicks hint button, a random letter of the word reveals.</p>\n<p>If every company name would have the same length I could just make for example:</p>\n<pre><code>  int BuchstabenPosition;\n  int DanachBuchstabenPosition;\n  Random r = new Random();\n\n  BuchstabenPosition = r.nextInt(8);\n  DanachBuchstabenPosition = BuchstabenPosition += 1;\n  tvHint.setText(&quot;Ein Buchstabe: &quot; + companyName.substring(BuchstabenPosition,DanachBuchstabenPosition));\n</code></pre>\n<p>right?\nBut the companyname length changes.</p>\n"},{"tags":["java","spring","spring-boot","maven"],"comments":[{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1578254832,"post_id":59603731,"comment_id":105371406,"body_markdown":"In which package is your main class located? And what is the URL you&#39;re using to reach this controller?","body":"In which package is your main class located? And what is the URL you&#39;re using to reach this controller?"},{"owner":{"account_id":15109469,"reputation":1459,"user_id":10904039,"display_name":"Phill Alexakis"},"score":0,"creation_date":1578254995,"post_id":59603731,"comment_id":105371445,"body_markdown":"the class is located at `Controller` package and i&#39;m trying to access it at `localhost:8080/api` , i&#39;m updating the questing with this information","body":"the class is located at <code>Controller</code> package and i&#39;m trying to access it at <code>localhost:8080&#47;api</code> , i&#39;m updating the questing with this information"},{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1578255351,"post_id":59603731,"comment_id":105371519,"body_markdown":"So package name is **not** Controller. It&#39;s myrest. That&#39;s what the problem is. All Spring beans must be in the same package as, or in a subpackage of, the main application class. https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-locating-the-main-class","body":"So package name is <b>not</b> Controller. It&#39;s myrest. That&#39;s what the problem is. All Spring beans must be in the same package as, or in a subpackage of, the main application class. <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-locating-the-main-class\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/htmlsingle&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":15109469,"reputation":1459,"user_id":10904039,"display_name":"Phill Alexakis"},"score":0,"creation_date":1578255636,"post_id":59603731,"comment_id":105371568,"body_markdown":"In another project of mine, i have in the same directory `src/main/java` two packages, one of them contains the controller, and another package in the same dir that has the @SpringBootApplication main class, although the **package name** of the controller is named as a **sub** package of the main class. So basically if i rename `Controller` to `myrest.Controller` it should work right?","body":"In another project of mine, i have in the same directory <code>src&#47;main&#47;java</code> two packages, one of them contains the controller, and another package in the same dir that has the @SpringBootApplication main class, although the <b>package name</b> of the controller is named as a <b>sub</b> package of the main class. So basically if i rename <code>Controller</code> to <code>myrest.Controller</code> it should work right?"},{"owner":{"account_id":15109469,"reputation":1459,"user_id":10904039,"display_name":"Phill Alexakis"},"score":0,"creation_date":1578255729,"post_id":59603731,"comment_id":105371581,"body_markdown":"@JBNizet i renamed it to `myrest.Controller` and it worked!","body":"@JBNizet i renamed it to <code>myrest.Controller</code> and it worked!"},{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1578255742,"post_id":59603731,"comment_id":105371584,"body_markdown":"Yes, as I just explained, and as the application I linked to explains. You should really stick to Java naming conventions, too. Packages should start with your reverse domain name (com.mycompany.myproject...), and should be lowercase. The more you disrespect conventions, the more bugs or difficulties you&#39;ll face.","body":"Yes, as I just explained, and as the application I linked to explains. You should really stick to Java naming conventions, too. Packages should start with your reverse domain name (com.mycompany.myproject...), and should be lowercase. The more you disrespect conventions, the more bugs or difficulties you&#39;ll face."},{"owner":{"account_id":15109469,"reputation":1459,"user_id":10904039,"display_name":"Phill Alexakis"},"score":0,"creation_date":1578255931,"post_id":59603731,"comment_id":105371631,"body_markdown":"@JBNizet indeed, i will change it to lowercase. Thank you , you may post the answer","body":"@JBNizet indeed, i will change it to lowercase. Thank you , you may post the answer"}],"answers":[{"tags":[],"owner":{"account_id":14409449,"reputation":340,"user_id":10408686,"display_name":"Cng L Quc"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578295606,"creation_date":1578295606,"answer_id":59608189,"question_id":59603731,"body_markdown":"As I remember, SpringBoot only scan packages which have the same prefix with Application class (in your case: myrest).\r\nIf you want spring boot scan another package, you should define them through annotation: ```@ComponentScan(&quot;package.hear&quot;)```","title":"Request Mapping returns 404 instead of the mapped String after creating a basic example from spring.start.io","body":"<p>As I remember, SpringBoot only scan packages which have the same prefix with Application class (in your case: myrest).\nIf you want spring boot scan another package, you should define them through annotation: <code>@ComponentScan(\"package.hear\")</code></p>\n"},{"tags":[],"owner":{"account_id":15109469,"reputation":1459,"user_id":10904039,"display_name":"Phill Alexakis"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1592834314,"creation_date":1592834314,"answer_id":62516166,"question_id":59603731,"body_markdown":"I renamed the `Controller` package to `myrest.controller` , \r\n\r\nhas to be a subpackage of the main package!","title":"Request Mapping returns 404 instead of the mapped String after creating a basic example from spring.start.io","body":"<p>I renamed the <code>Controller</code> package to <code>myrest.controller</code> ,</p>\n<p>has to be a subpackage of the main package!</p>\n"}],"owner":{"account_id":15109469,"reputation":1459,"user_id":10904039,"display_name":"Phill Alexakis"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":62516166,"answer_count":2,"score":1,"last_activity_date":1677856641,"creation_date":1578254586,"question_id":59603731,"body_markdown":"I&#39;ve already been on the following topics but **none** seemed to worked for me:\r\n\r\n 1. [RequestMapping leads to 404 Error][1] , added the regex ( `/app/**` to **Rest Controller** and `**/api` to the **Method**) but still won&#39;t map it.\r\n 2. [Spring @RequestMapping, 404 error][2] , added `&lt;packaging&gt;jar&lt;/packaging&gt; \r\n` to my **pom.xml** , although i can&#39;t find the path to change it (i doubt that the issue might be there, i&#39;m not sure though).\r\n 3. [Request Mapping returning error 404][3] , i visit the correct **endpoint** which is `localhost:8080/api` (port is not in use), i also tried it with another port number.\r\n 4. [Spring RequestMapping 404 error][4] , we might have the same issue here, i don&#39;t see why i should change the mapping, haven&#39;t changed anything on default directories or files.\r\n\r\nThis is **not** the first time i&#39;m making a **Springboot** application\r\n\r\n - My `pom.xml`\r\n```xml \r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n\t\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.2.2.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;myrest&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;remoteapi&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1&lt;/version&gt;\r\n\t&lt;name&gt;remoteapi&lt;/name&gt;\r\n\t&lt;description&gt;Rest Mobile Dev ICSD Api&lt;/description&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n - My `RestController` class\r\n```java\r\n\r\npackage Controller;\r\n\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\npublic class MainController {\r\n\r\n\t\r\n\t\r\n\t\r\n\t@RequestMapping(value=&quot;/api&quot;)\r\n\tpublic String test()\r\n\t{\r\n\t\treturn &quot;Hello World&quot;;\r\n\t}\r\n}\r\n\r\n\r\n```\r\n\r\nThis is my **directory**, the `MainController` class is inside `Controller` package\r\n\r\n[![enter image description here][5]][5]\r\n\r\n\r\nThe `URL` i&#39;m accessing it from is `localhost:8080/api`\r\n\r\n\r\n**Important Note:** if i run the exact method with the exact mapping on **an older project**, **it runs perfectly**.\r\n\r\nMy Comments: This is pretty odd , since i&#39;ve never changed anything on configurations, probably i missed something when i created the project? I Still haven&#39;t figured what that might be.\r\n\r\nEdit: Added the directory, and the that location i&#39;m trying to access it\r\n\r\n  [1]: https://stackoverflow.com/questions/17002543/requestmapping-leads-to-404-error\r\n  [2]: https://stackoverflow.com/questions/41678768/spring-requestmapping-404-error\r\n  [3]: https://stackoverflow.com/questions/36863440/request-mapping-returning-error-404\r\n  [4]: https://stackoverflow.com/questions/43535279/spring-requestmapping-404-error\r\n  [5]: https://i.stack.imgur.com/0yxlr.png","title":"Request Mapping returns 404 instead of the mapped String after creating a basic example from spring.start.io","body":"<p>I've already been on the following topics but <strong>none</strong> seemed to worked for me:</p>\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/17002543/requestmapping-leads-to-404-error\">RequestMapping leads to 404 Error</a> , added the regex ( <code>/app/**</code> to <strong>Rest Controller</strong> and <code>**/api</code> to the <strong>Method</strong>) but still won't map it.</li>\n<li><a href=\"https://stackoverflow.com/questions/41678768/spring-requestmapping-404-error\">Spring @RequestMapping, 404 error</a> , added <code>&lt;packaging&gt;jar&lt;/packaging&gt;  </code> to my <strong>pom.xml</strong> , although i can't find the path to change it (i doubt that the issue might be there, i'm not sure though).</li>\n<li><a href=\"https://stackoverflow.com/questions/36863440/request-mapping-returning-error-404\">Request Mapping returning error 404</a> , i visit the correct <strong>endpoint</strong> which is <code>localhost:8080/api</code> (port is not in use), i also tried it with another port number.</li>\n<li><a href=\"https://stackoverflow.com/questions/43535279/spring-requestmapping-404-error\">Spring RequestMapping 404 error</a> , we might have the same issue here, i don't see why i should change the mapping, haven't changed anything on default directories or files.</li>\n</ol>\n<p>This is <strong>not</strong> the first time i'm making a <strong>Springboot</strong> application</p>\n<ul>\n<li>My <code>pom.xml</code></li>\n</ul>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    \n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.2.2.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;myrest&lt;/groupId&gt;\n    &lt;artifactId&gt;remoteapi&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1&lt;/version&gt;\n    &lt;name&gt;remoteapi&lt;/name&gt;\n    &lt;description&gt;Rest Mobile Dev ICSD Api&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<ul>\n<li>My <code>RestController</code> class</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>\npackage Controller;\n\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class MainController {\n\n    \n    \n    \n    @RequestMapping(value=&quot;/api&quot;)\n    public String test()\n    {\n        return &quot;Hello World&quot;;\n    }\n}\n\n\n</code></pre>\n<p>This is my <strong>directory</strong>, the <code>MainController</code> class is inside <code>Controller</code> package</p>\n<p><a href=\"https://i.stack.imgur.com/0yxlr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0yxlr.png\" alt=\"enter image description here\" /></a></p>\n<p>The <code>URL</code> i'm accessing it from is <code>localhost:8080/api</code></p>\n<p><strong>Important Note:</strong> if i run the exact method with the exact mapping on <strong>an older project</strong>, <strong>it runs perfectly</strong>.</p>\n<p>My Comments: This is pretty odd , since i've never changed anything on configurations, probably i missed something when i created the project? I Still haven't figured what that might be.</p>\n<p>Edit: Added the directory, and the that location i'm trying to access it</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":18867242,"reputation":1,"user_id":13762721,"display_name":"Mustafa Bahadr Demir"},"score":0,"creation_date":1592398643,"post_id":62429548,"comment_id":110410712,"body_markdown":"The answers I get are 1,4,and 16.","body":"The answers I get are 1,4,and 16."},{"owner":{"account_id":11827645,"reputation":3065,"user_id":9011164,"accept_rate":50,"display_name":"KunLun"},"score":0,"creation_date":1592399989,"post_id":62429548,"comment_id":110411468,"body_markdown":"What what is wrong at 1,4 and 16? Take a paper and a pen and calculate on paper what your code do.","body":"What what is wrong at 1,4 and 16? Take a paper and a pen and calculate on paper what your code do."},{"owner":{"account_id":18867242,"reputation":1,"user_id":13762721,"display_name":"Mustafa Bahadr Demir"},"score":0,"creation_date":1592400270,"post_id":62429548,"comment_id":110411645,"body_markdown":"Turns out I had it all wrong. I thought x += x is not x +1 but x+x. I got it now ty for the advice","body":"Turns out I had it all wrong. I thought x += x is not x +1 but x+x. I got it now ty for the advice"},{"owner":{"account_id":11827645,"reputation":3065,"user_id":9011164,"accept_rate":50,"display_name":"KunLun"},"score":0,"creation_date":1592400810,"post_id":62429548,"comment_id":110411956,"body_markdown":"You are right `x += x` it&#39;s not `x+1`. `a += b` it&#39;s short for `a = a + b`. Also for `x += 1`, you can simply call `x++` or `++x`.  http://www.c4learn.com/java/java-increment-decrement-operator/","body":"You are right <code>x += x</code> it&#39;s not <code>x+1</code>. <code>a += b</code> it&#39;s short for <code>a = a + b</code>. Also for <code>x += 1</code>, you can simply call <code>x++</code> or <code>++x</code>.  <a href=\"http://www.c4learn.com/java/java-increment-decrement-operator/\" rel=\"nofollow noreferrer\">c4learn.com/java/java-increment-decrement-operator</a>"}],"answers":[{"tags":[],"owner":{"account_id":4254130,"reputation":13758,"user_id":3480246,"display_name":"Jan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592398888,"creation_date":1592398888,"answer_id":62429642,"question_id":62429548,"body_markdown":"welcome to Stack Overflow!\r\n\r\n     x += x;\r\n\r\nShould be \r\n\r\n     x += 1;\r\n\r\ninstead - so you get the next number. With x += x in place you get x as 1, 2, 4 and then 8... and 8x8 = 64 is outside your when condition :-)\r\n\r\n","title":"Java:Beginner question: Why do I not get the numbers (1,4,9,16,25,36,49) from this code","body":"<p>welcome to Stack Overflow!</p>\n\n<pre><code> x += x;\n</code></pre>\n\n<p>Should be </p>\n\n<pre><code> x += 1;\n</code></pre>\n\n<p>instead - so you get the next number. With x += x in place you get x as 1, 2, 4 and then 8... and 8x8 = 64 is outside your when condition :-)</p>\n"},{"comments":[{"owner":{"account_id":18867242,"reputation":1,"user_id":13762721,"display_name":"Mustafa Bahadr Demir"},"score":0,"creation_date":1592400143,"post_id":62429644,"comment_id":110411566,"body_markdown":"omg x+= x is not x = x +1 but x=x+x? I had it all wrong :/ Thank you very much","body":"omg x+= x is not x = x +1 but x=x+x? I had it all wrong :/ Thank you very much"},{"owner":{"account_id":18867242,"reputation":1,"user_id":13762721,"display_name":"Mustafa Bahadr Demir"},"score":0,"creation_date":1592400632,"post_id":62429644,"comment_id":110411853,"body_markdown":"The problem is that I sometimes use the computer at work to learn coding. So it is super slow that is why I didnt try the print method. But I will check debugger. Thanks very much!","body":"The problem is that I sometimes use the computer at work to learn coding. So it is super slow that is why I didnt try the print method. But I will check debugger. Thanks very much!"}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1592398893,"creation_date":1592398893,"answer_id":62429644,"question_id":62429548,"body_markdown":"because... that&#39;s what the code does.\r\n\r\n`x` is 1 in the first loop, meaningly, the square is `1*1`, which is 1.\r\n\r\nThen, you add x to itself (`x += x`), so in the next cycle, x is 2, and the square is 4.\r\n\r\nThen, you add x to itself again, and now x is 4, and the square of that is 16.\r\n\r\nI have no idea why you were expecting to get 9 from this.\r\n\r\nIf you replace `x += x` with `x += 1` (or, shorter, `x++`), you&#39;d get 1,4,9,16,25,36,49.\r\n\r\nNB: In general, to know why code isn&#39;t working / doesn&#39;t do what you want, debug it. Invest some time in learning how to use a debugger, or if you just can&#39;t do that, debug inefficiently, using a lot of `System.out.println` statements. Walk through the code &#39;mentally&#39;, be the computer, figure out at each step what happens and what the values of variables will be, and then compare what you think happens to what actually happens (by checking the debugger, or, by printing the values of various variables). At the point where what you think happens doesn&#39;t match what actually happens? You found a bug. That would have gotten you there in this case.\r\n","title":"Java:Beginner question: Why do I not get the numbers (1,4,9,16,25,36,49) from this code","body":"<p>because... that's what the code does.</p>\n\n<p><code>x</code> is 1 in the first loop, meaningly, the square is <code>1*1</code>, which is 1.</p>\n\n<p>Then, you add x to itself (<code>x += x</code>), so in the next cycle, x is 2, and the square is 4.</p>\n\n<p>Then, you add x to itself again, and now x is 4, and the square of that is 16.</p>\n\n<p>I have no idea why you were expecting to get 9 from this.</p>\n\n<p>If you replace <code>x += x</code> with <code>x += 1</code> (or, shorter, <code>x++</code>), you'd get 1,4,9,16,25,36,49.</p>\n\n<p>NB: In general, to know why code isn't working / doesn't do what you want, debug it. Invest some time in learning how to use a debugger, or if you just can't do that, debug inefficiently, using a lot of <code>System.out.println</code> statements. Walk through the code 'mentally', be the computer, figure out at each step what happens and what the values of variables will be, and then compare what you think happens to what actually happens (by checking the debugger, or, by printing the values of various variables). At the point where what you think happens doesn't match what actually happens? You found a bug. That would have gotten you there in this case.</p>\n"},{"tags":[],"owner":{"account_id":12117763,"reputation":363,"user_id":8850857,"display_name":"Atahan Atay"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592399105,"creation_date":1592399105,"answer_id":62429709,"question_id":62429548,"body_markdown":"The problem is in that line;\r\n\r\n```x += x;```\r\n\r\nyou add x to x, so you multiply x by 2;\r\n\r\n    1) x=1 -&gt; x*x=1\r\n    2) x=2 -&gt; x*x=4\r\n    2) x=4 -&gt; x*x=16\r\n    2) x=8 -&gt; x*x=64\r\n\r\nYou must add 1 to x.\r\n\r\nSo change this line ```x += x;``` by ```x += 1;```","title":"Java:Beginner question: Why do I not get the numbers (1,4,9,16,25,36,49) from this code","body":"<p>The problem is in that line;</p>\n\n<p><code>x += x;</code></p>\n\n<p>you add x to x, so you multiply x by 2;</p>\n\n<pre><code>1) x=1 -&gt; x*x=1\n2) x=2 -&gt; x*x=4\n2) x=4 -&gt; x*x=16\n2) x=8 -&gt; x*x=64\n</code></pre>\n\n<p>You must add 1 to x.</p>\n\n<p>So change this line <code>x += x;</code> by <code>x += 1;</code></p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592400389,"creation_date":1592400389,"answer_id":62430160,"question_id":62429548,"body_markdown":"Putting in a few simple print statements might have shed some light.\r\n```\r\nScanner scanner = new Scanner(System.in);\r\n// put your code here\r\nint N = scanner.nextInt();\r\nint x = 1;\r\nint Square = x * x;\r\n\r\nwhile (x * x &lt;= N) {\r\n    Square = x * x;\r\n    System.out.println(Square);\r\n    x += x;\r\n    System.out.println(&quot;adding x to x to get &quot; + x);\r\n    System.out.println(&quot;x * x will now be &quot; + (x*x));\r\n} \r\n```\r\nFor N = 50, Prints\r\n```\r\n1\r\nadding x to x to get 2\r\nx * x will now be 4\r\n4\r\nadding x to x to get 4\r\nx * x will now be 16\r\n16\r\nadding x to x to get 8\r\nx * x will now be 64","title":"Java:Beginner question: Why do I not get the numbers (1,4,9,16,25,36,49) from this code","body":"<p>Putting in a few simple print statements might have shed some light.</p>\n\n<pre><code>Scanner scanner = new Scanner(System.in);\n// put your code here\nint N = scanner.nextInt();\nint x = 1;\nint Square = x * x;\n\nwhile (x * x &lt;= N) {\n    Square = x * x;\n    System.out.println(Square);\n    x += x;\n    System.out.println(\"adding x to x to get \" + x);\n    System.out.println(\"x * x will now be \" + (x*x));\n} \n</code></pre>\n\n<p>For N = 50, Prints</p>\n\n<pre><code>1\nadding x to x to get 2\nx * x will now be 4\n4\nadding x to x to get 4\nx * x will now be 16\n16\nadding x to x to get 8\nx * x will now be 64\n</code></pre>\n"}],"owner":{"account_id":18867242,"reputation":1,"user_id":13762721,"display_name":"Mustafa Bahadr Demir"},"comment_count":4,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1592403542,"accepted_answer_id":62429644,"answer_count":4,"score":-3,"last_activity_date":1677856605,"creation_date":1592398608,"question_id":62429548,"body_markdown":"I am currently doing some hyperskill education and I do not get why this code skips some numbers for no reason. The input from java Scanner is 50 so basically N=50\r\n\r\n\r\n```Java\r\nimport java.util.Scanner;\r\n    \r\nclass Main {\r\n    public static void main(String[] args) {\r\n        Scanner scanner = new Scanner(System.in);\r\n        // put your code here\r\n        int N = scanner.nextInt();\r\n        int x = 1;\r\n        int Square = x * x;\r\n\r\n        while (x * x &lt;= N) {\r\n            Square = x * x;\r\n            System.out.println(Square);\r\n            x += x;\r\n        } \r\n    }\r\n}\r\n```\r\n\r\n","title":"Java:Beginner question: Why do I not get the numbers (1,4,9,16,25,36,49) from this code","body":"<p>I am currently doing some hyperskill education and I do not get why this code skips some numbers for no reason. The input from java Scanner is 50 so basically N=50</p>\n\n<pre><code>import java.util.Scanner;\n\nclass Main {\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        // put your code here\n        int N = scanner.nextInt();\n        int x = 1;\n        int Square = x * x;\n\n        while (x * x &lt;= N) {\n            Square = x * x;\n            System.out.println(Square);\n            x += x;\n        } \n    }\n}\n</code></pre>\n"},{"tags":["java","json","maven","jersey"],"answers":[{"tags":[],"owner":{"account_id":13405788,"reputation":147,"user_id":9673864,"display_name":"wouterio"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1591358609,"creation_date":1591358609,"answer_id":62214938,"question_id":62213119,"body_markdown":"Problem solved. Running the app within Eclipse apparently doesn&#39;t require explicitly registering a `JacksonJsonProvider`, but running the standalone app does:\r\n\r\n    ClientConfig config = new ClientConfig().connectorProvider(new ApacheConnectorProvider()).register(new JacksonJsonProvider());\r\n    Client client = ClientBuilder.newBuilder().withConfig(config) ...","title":"MessageBodyProviderNotFoundException after building with maven shade plugin","body":"<p>Problem solved. Running the app within Eclipse apparently doesn't require explicitly registering a <code>JacksonJsonProvider</code>, but running the standalone app does:</p>\n\n<pre><code>ClientConfig config = new ClientConfig().connectorProvider(new ApacheConnectorProvider()).register(new JacksonJsonProvider());\nClient client = ClientBuilder.newBuilder().withConfig(config) ...\n</code></pre>\n"}],"owner":{"account_id":13405788,"reputation":147,"user_id":9673864,"display_name":"wouterio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":62214938,"answer_count":1,"score":1,"last_activity_date":1677856553,"creation_date":1591352506,"question_id":62213119,"body_markdown":"Hi I&#39;m building a java REST client application that uses json. There&#39;s a conflict in my dependencies: one essential dependency requires jackson databind/core/annotations 2.10.1, another essential dependency uses an older version 2.2.2.\r\n\r\nWhen running the app in Eclipse, this led to a `MessageBodyProviderNotFoundException`. The problem was that maven included version 2.2.2 instead of 2.10.1. So I use dependency management to resolve the conflict and include version 2.10.1. Within Eclipse this solved the issue and the app runs fine.\r\n\r\nBut after building the app with the maven shade plugin, the standalone app still fails with the `MessageBodyProviderNotFoundException`. The exception is thrown in a part of the code requiring version 2.10.1, not in the part depending on version 2.2.2.\r\n\r\nAny thoughts? Thanks in advance!\r\n\r\nEDIT: I checked my local maven repository and it only contains version 2.10.1. So the problem is not that the jar somehow still includes version 2.2.2.","title":"MessageBodyProviderNotFoundException after building with maven shade plugin","body":"<p>Hi I'm building a java REST client application that uses json. There's a conflict in my dependencies: one essential dependency requires jackson databind/core/annotations 2.10.1, another essential dependency uses an older version 2.2.2.</p>\n\n<p>When running the app in Eclipse, this led to a <code>MessageBodyProviderNotFoundException</code>. The problem was that maven included version 2.2.2 instead of 2.10.1. So I use dependency management to resolve the conflict and include version 2.10.1. Within Eclipse this solved the issue and the app runs fine.</p>\n\n<p>But after building the app with the maven shade plugin, the standalone app still fails with the <code>MessageBodyProviderNotFoundException</code>. The exception is thrown in a part of the code requiring version 2.10.1, not in the part depending on version 2.2.2.</p>\n\n<p>Any thoughts? Thanks in advance!</p>\n\n<p>EDIT: I checked my local maven repository and it only contains version 2.10.1. So the problem is not that the jar somehow still includes version 2.2.2.</p>\n"},{"tags":["java","refactoring","automated-refactoring"],"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1676980278,"post_id":75520058,"comment_id":133242224,"body_markdown":"A long time ago I [looked for something very similar for Eclipse](https://stackoverflow.com/questions/7566565/is-there-a-way-to-apply-a-refactoring-script-just-for-its-side-effects) and didn&#39;t find a good answer. It&#39;s quite possible that this thing now exists.","body":"A long time ago I <a href=\"https://stackoverflow.com/questions/7566565/is-there-a-way-to-apply-a-refactoring-script-just-for-its-side-effects\">looked for something very similar for Eclipse</a> and didn&#39;t find a good answer. It&#39;s quite possible that this thing now exists."},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":1,"creation_date":1676982866,"post_id":75520058,"comment_id":133243055,"body_markdown":"Well, the company I&#39;m working for develops a rule-based refactoring engine (Eclipse plugin and Maven plugin), but it doesn&#39;t allow custom rules. It does have some for frequently used migration paths, such as between jUnit versions and various styles of Asserts: https://jsparrow.github.io/","body":"Well, the company I&#39;m working for develops a rule-based refactoring engine (Eclipse plugin and Maven plugin), but it doesn&#39;t allow custom rules. It does have some for frequently used migration paths, such as between jUnit versions and various styles of Asserts: <a href=\"https://jsparrow.github.io/\" rel=\"nofollow noreferrer\">jsparrow.github.io</a>"},{"owner":{"account_id":12647983,"reputation":137,"user_id":9193100,"display_name":"Garruk The Wildspeaker"},"score":0,"creation_date":1677061317,"post_id":75520058,"comment_id":133261442,"body_markdown":"I need exactly the same but with the custom rules :(","body":"I need exactly the same but with the custom rules :("},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":2,"creation_date":1677244836,"post_id":75520058,"comment_id":133304669,"body_markdown":"Get IntelliJ.  It&#39;s terrific at refactoring.  Not something I&#39;d script.","body":"Get IntelliJ.  It&#39;s terrific at refactoring.  Not something I&#39;d script."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1677245816,"post_id":75520058,"comment_id":133304943,"body_markdown":"@duffymo: indeed it is, but as a developer of libraries that others use, I want to hand them a simple way to do all the &quot;mechanical&quot; transformations that might be necessary to migrate to another major version of my library.","body":"@duffymo: indeed it is, but as a developer of libraries that others use, I want to hand them a simple way to do all the &quot;mechanical&quot; transformations that might be necessary to migrate to another major version of my library."},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":0,"creation_date":1677246321,"post_id":75520058,"comment_id":133305092,"body_markdown":"@GarrukTheWildspeaker if you have a specific migration path in mind that may also be useful to other people, feel free to use the [jsparrow contact form](https://jsparrow.io/contact-us/) to send us a feature request - it will be considered. User-customizable rules are unfortunately out of scope for now.","body":"@GarrukTheWildspeaker if you have a specific migration path in mind that may also be useful to other people, feel free to use the <a href=\"https://jsparrow.io/contact-us/\" rel=\"nofollow noreferrer\">jsparrow contact form</a> to send us a feature request - it will be considered. User-customizable rules are unfortunately out of scope for now."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1677265891,"post_id":75520058,"comment_id":133310488,"body_markdown":"@JoachimSauer, if I&#39;m a user of your library I expect to add your code as a package.  I&#39;m certainly not going to apply any refactorings.  I expect you to do that, publish the modified package to a public repo with release notes.  I would get rid of your library if you gave me a script to apply a refactoring to your code.  I have never gotten a script to modify MY code from Spring Boot.  I don&#39;t see how it can be practical.","body":"@JoachimSauer, if I&#39;m a user of your library I expect to add your code as a package.  I&#39;m certainly not going to apply any refactorings.  I expect you to do that, publish the modified package to a public repo with release notes.  I would get rid of your library if you gave me a script to apply a refactoring to your code.  I have never gotten a script to modify MY code from Spring Boot.  I don&#39;t see how it can be practical."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1677288493,"post_id":75520058,"comment_id":133314383,"body_markdown":"@duffymo: I&#39;m not talking about applying refactoring to the library. I&#39;m talking about the client code that *uses* the library.","body":"@duffymo: I&#39;m not talking about applying refactoring to the library. I&#39;m talking about the client code that <i>uses</i> the library."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1677324951,"post_id":75520058,"comment_id":133317847,"body_markdown":"Yes.  I&#39;ve never seen such a thing from Spring Boot or any library that I use.  I would not expect to ever get more than release notes.  Conversion refactoring is up to me.","body":"Yes.  I&#39;ve never seen such a thing from Spring Boot or any library that I use.  I would not expect to ever get more than release notes.  Conversion refactoring is up to me."},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":1,"creation_date":1677472020,"post_id":75520058,"comment_id":133337738,"body_markdown":"@duffymo backwards compatibility is hard, and there are occasionly valid reasons for a library to break it. If it does, helping users with the migration will ease the pain. But this comment thread is not the right place for this discussion.","body":"@duffymo backwards compatibility is hard, and there are occasionly valid reasons for a library to break it. If it does, helping users with the migration will ease the pain. But this comment thread is not the right place for this discussion."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1677502805,"post_id":75520058,"comment_id":133344199,"body_markdown":"I don&#39;t disagree that it&#39;s painful.  I&#39;m pointing out that Spring Boot offers no such script.  I don&#39;t need instruction from you on how SO works.","body":"I don&#39;t disagree that it&#39;s painful.  I&#39;m pointing out that Spring Boot offers no such script.  I don&#39;t need instruction from you on how SO works."},{"owner":{"account_id":18141984,"reputation":136,"user_id":13195754,"display_name":"branboyer"},"score":0,"creation_date":1677729332,"post_id":75520058,"comment_id":133396839,"body_markdown":"Intellij already has refactoring shortcuts to do that, but it also has a systematic programmatic way (and with Groovy): https://www.jetbrains.com/help/idea/structural-search-and-replace.html#share_template","body":"Intellij already has refactoring shortcuts to do that, but it also has a systematic programmatic way (and with Groovy): <a href=\"https://www.jetbrains.com/help/idea/structural-search-and-replace.html#share_template\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1677761194,"post_id":75615576,"comment_id":133403816,"body_markdown":"Oh, i&#39;ve never heard of OpenRewrite, but at quick glance this looks pretty much what I would be looking for (I&#39;m not the original asker, so maybe they are looking for something different)!","body":"Oh, i&#39;ve never heard of OpenRewrite, but at quick glance this looks pretty much what I would be looking for (I&#39;m not the original asker, so maybe they are looking for something different)!"}],"tags":[],"owner":{"account_id":1947400,"reputation":1111,"user_id":1752215,"display_name":"cw&#39;"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1677761026,"creation_date":1677761026,"answer_id":75615576,"question_id":75520058,"body_markdown":"Sounds like a job for [OpenRewrite][1]. Standard recipes, e.g., for renaming a package are available. You can also write your own recipes, which make use of a visitor pattern over a tree-based representation of your source code (which will preserve, e.g., indentation).\r\n\r\nYou can use Maven or Gradle to execute the rewrite. \r\n\r\nFor instance the change package configuration from the getting started page looks like this:\r\n\r\n    type: specs.openrewrite.org/v1beta/recipe\r\n    name: com.yourorg.VetToVeterinary\r\n    recipeList:\r\n      - org.openrewrite.java.ChangePackage:\r\n        oldPackageName: org.springframework.samples.petclinic.vet\r\n        newPackageName: org.springframework.samples.petclinic.veterinary\r\n\r\n\r\n  [1]: https://docs.openrewrite.org/running-recipes/getting-started","title":"How to automate Java code refactoring using a script with instructions?","body":"<p>Sounds like a job for <a href=\"https://docs.openrewrite.org/running-recipes/getting-started\" rel=\"nofollow noreferrer\">OpenRewrite</a>. Standard recipes, e.g., for renaming a package are available. You can also write your own recipes, which make use of a visitor pattern over a tree-based representation of your source code (which will preserve, e.g., indentation).</p>\n<p>You can use Maven or Gradle to execute the rewrite.</p>\n<p>For instance the change package configuration from the getting started page looks like this:</p>\n<pre><code>type: specs.openrewrite.org/v1beta/recipe\nname: com.yourorg.VetToVeterinary\nrecipeList:\n  - org.openrewrite.java.ChangePackage:\n    oldPackageName: org.springframework.samples.petclinic.vet\n    newPackageName: org.springframework.samples.petclinic.veterinary\n</code></pre>\n"},{"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1677831027,"post_id":75619901,"comment_id":133418447,"body_markdown":"FYI: the `semdesigns.com` shows a certificate for `semanticdesigns.com` and even that is no longer valid, so I doubt many people are going to successfully follow that link.","body":"FYI: the <code>semdesigns.com</code> shows a certificate for <code>semanticdesigns.com</code> and even that is no longer valid, so I doubt many people are going to successfully follow that link."},{"owner":{"account_id":41366,"reputation":93989,"user_id":120163,"accept_rate":59,"display_name":"Ira Baxter"},"score":0,"creation_date":1677841786,"post_id":75619901,"comment_id":133421241,"body_markdown":"@JoachimSauer Thanks for the note.  We&#39;ll check it out.","body":"@JoachimSauer Thanks for the note.  We&#39;ll check it out."}],"tags":[],"owner":{"account_id":41366,"reputation":93989,"user_id":120163,"accept_rate":59,"display_name":"Ira Baxter"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677856217,"creation_date":1677784372,"answer_id":75619901,"question_id":75520058,"body_markdown":"Not Groovy based (but then other answers suggesting &quot;OpenRewrite&quot; or &quot;IntelliJ&quot; aren&#39;t Groovy based either).\r\n\r\nWhat OP is asking for is a [program transformation system (PTS)][1] that will let him write custom transformation rules.  Most PTS system provide you with access to the target language AST... and you write custom rules by coding procedural visitors that clamber around the tree, matching and splicing individual tree nodes. Eclipse works like this; apparantly also OpenRewrite.\r\n\r\nThat&#39;s a clumsy way to do it, mostly because the details of the AST are voluminous and sort of arbitrary, and your tree-crawling code has to know all of this.  See [program_transforms on AST vs surface syntax][2]  for more details.  Ideally you&#39;d write transformations using the surface syntax of the programming language and let the PTS take care of doing the matching and replacement against the actual AST.\r\n\r\nOur [DMS Software Reengineering Toolkit][3] will let you do this.  The transformations op wants do are coded like this:\r\n\r\n    Domain Java~v11; -- specifies which specific Java dialect grammar is relevant\r\n\r\n    rule rename_foo(p:access_path_prefix): access_path -&gt; access_path\r\n      = &quot;\\p foo.method2&quot; -&gt; &quot;\\p foo.method3&quot;;\r\n\r\n    rule rename_myMethod(p:access_path_prefix): access_path -&gt; access_path\r\n      = &quot;\\p myMethod&quot; -&gt; &quot;\\p your_method&quot;;\r\n\r\n    rule change_import_AnotherClassFromExternalPackage: import_statement -&gt; import_statement\r\n      = &quot;import org.you.core.util.AnotherClassFromExternalPackage&quot;\r\n        -&gt; &quot;import com.me.core.util.AnotherClassFromExternalPackage&quot;;\r\n\r\n    ruleset my_patches = \r\n       { rename_foo, \r\n         rename_myMethod, \r\n         change_import_AnotherClassFromExternalPackage\r\n       }\r\n\r\nThe `Domain` keyword tells DMS which precise grammar to use to parse the source text, including the specific dialect. (Java 6 is not the same as Java 11).\r\n\r\nIndividual rules are named (e.g., `rename_foo`). The parmeter list (e.g. `p:access_path_prefix`) allows one to specify a named piece of syntax (e.g., `p`) that can match an arbitrary tree of the syntax category (e.g., `access_path_prefix`).  Each rule specifies that it is a mapping `-&gt;` from one piece of syntax to another; for these rules, source and target syntax categories are the same (e.g. `access_path`). \r\n\r\nEach rule also specifies the details of the mapping ( `= &quot;*match*&quot; -&gt; &quot;*replacement*&quot;` ) where match and replacement are valid surface syntax patterns that match the source and target syntax categories respectively.  The reason for the quote marks is to separate the rule syntax from the source/target language syntax (e..g Java) inside the quotes. The match pattern `&quot;\\p foo.method2&quot;` matches an arbitrary path prefix (a sequence of identifiers trailed by dots or a special case of empty, as defined by the Java grammar) followed by the end of the access_path `foo.method2` as op desired. The replacement pattern is that same access_path_prefix `p` followed by the changed end of access path `foo.method3`.\r\n\r\nThe `ruleset mypatches` collects the individual rules into a group that DMS can apply everywhere.\r\n\r\nOne can run a DMS RuleRewrite engine configured for Java~v11, point it at a legal Java file, and apply the `mypatches` ruleset to achieve what OP desires. DMS parses the file to build the AST, parses the rules to construct the ASTs necessary for matching, matches the rule ASTs and replaces ASTs where matches occur (so you don&#39;t have to do all this stuff with procedural tree hacking).  When complete, DMS regenerates the transformed source text, preserving indentation, comments, etc.\r\n\r\nSo you get a mechanical process for applying the rules of interest, with the rules being fairly easy to write because they use (Java) surface syntax rather than tree-climbing primitives.\r\n\r\nThese are rather simple examples.  We&#39;ve used DMS to carry out massive rewrites across Java and C++, and even to translate COBOL to Java.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Program_transformation\r\n  [2]: http://www.semdesigns.com/Products/DMS/ProgramTransformation.html\r\n  [3]: http://www.semdesigns.com/Products/DMS/DMSToolkit.html","title":"How to automate Java code refactoring using a script with instructions?","body":"<p>Not Groovy based (but then other answers suggesting &quot;OpenRewrite&quot; or &quot;IntelliJ&quot; aren't Groovy based either).</p>\n<p>What OP is asking for is a <a href=\"https://en.wikipedia.org/wiki/Program_transformation\" rel=\"nofollow noreferrer\">program transformation system (PTS)</a> that will let him write custom transformation rules.  Most PTS system provide you with access to the target language AST... and you write custom rules by coding procedural visitors that clamber around the tree, matching and splicing individual tree nodes. Eclipse works like this; apparantly also OpenRewrite.</p>\n<p>That's a clumsy way to do it, mostly because the details of the AST are voluminous and sort of arbitrary, and your tree-crawling code has to know all of this.  See <a href=\"http://www.semdesigns.com/Products/DMS/ProgramTransformation.html\" rel=\"nofollow noreferrer\">program_transforms on AST vs surface syntax</a>  for more details.  Ideally you'd write transformations using the surface syntax of the programming language and let the PTS take care of doing the matching and replacement against the actual AST.</p>\n<p>Our <a href=\"http://www.semdesigns.com/Products/DMS/DMSToolkit.html\" rel=\"nofollow noreferrer\">DMS Software Reengineering Toolkit</a> will let you do this.  The transformations op wants do are coded like this:</p>\n<pre><code>Domain Java~v11; -- specifies which specific Java dialect grammar is relevant\n\nrule rename_foo(p:access_path_prefix): access_path -&gt; access_path\n  = &quot;\\p foo.method2&quot; -&gt; &quot;\\p foo.method3&quot;;\n\nrule rename_myMethod(p:access_path_prefix): access_path -&gt; access_path\n  = &quot;\\p myMethod&quot; -&gt; &quot;\\p your_method&quot;;\n\nrule change_import_AnotherClassFromExternalPackage: import_statement -&gt; import_statement\n  = &quot;import org.you.core.util.AnotherClassFromExternalPackage&quot;\n    -&gt; &quot;import com.me.core.util.AnotherClassFromExternalPackage&quot;;\n\nruleset my_patches = \n   { rename_foo, \n     rename_myMethod, \n     change_import_AnotherClassFromExternalPackage\n   }\n</code></pre>\n<p>The <code>Domain</code> keyword tells DMS which precise grammar to use to parse the source text, including the specific dialect. (Java 6 is not the same as Java 11).</p>\n<p>Individual rules are named (e.g., <code>rename_foo</code>). The parmeter list (e.g. <code>p:access_path_prefix</code>) allows one to specify a named piece of syntax (e.g., <code>p</code>) that can match an arbitrary tree of the syntax category (e.g., <code>access_path_prefix</code>).  Each rule specifies that it is a mapping <code>-&gt;</code> from one piece of syntax to another; for these rules, source and target syntax categories are the same (e.g. <code>access_path</code>).</p>\n<p>Each rule also specifies the details of the mapping ( <code>= &quot;*match*&quot; -&gt; &quot;*replacement*&quot;</code> ) where match and replacement are valid surface syntax patterns that match the source and target syntax categories respectively.  The reason for the quote marks is to separate the rule syntax from the source/target language syntax (e..g Java) inside the quotes. The match pattern <code>&quot;\\p foo.method2&quot;</code> matches an arbitrary path prefix (a sequence of identifiers trailed by dots or a special case of empty, as defined by the Java grammar) followed by the end of the access_path <code>foo.method2</code> as op desired. The replacement pattern is that same access_path_prefix <code>p</code> followed by the changed end of access path <code>foo.method3</code>.</p>\n<p>The <code>ruleset mypatches</code> collects the individual rules into a group that DMS can apply everywhere.</p>\n<p>One can run a DMS RuleRewrite engine configured for Java~v11, point it at a legal Java file, and apply the <code>mypatches</code> ruleset to achieve what OP desires. DMS parses the file to build the AST, parses the rules to construct the ASTs necessary for matching, matches the rule ASTs and replaces ASTs where matches occur (so you don't have to do all this stuff with procedural tree hacking).  When complete, DMS regenerates the transformed source text, preserving indentation, comments, etc.</p>\n<p>So you get a mechanical process for applying the rules of interest, with the rules being fairly easy to write because they use (Java) surface syntax rather than tree-climbing primitives.</p>\n<p>These are rather simple examples.  We've used DMS to carry out massive rewrites across Java and C++, and even to translate COBOL to Java.</p>\n"},{"tags":[],"owner":{"account_id":1920986,"reputation":723,"user_id":1732516,"accept_rate":57,"display_name":"ashK"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677839654,"creation_date":1677839654,"answer_id":75625958,"question_id":75520058,"body_markdown":"I would have an excel with columns like,\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/u9q1P.png\r\n\r\n 1. Use a library like Apache POI to read the Excel file and extract the required information (project name, package name, class name, method name, and field name).\r\n 2. Use a library like Eclipse JDT to parse the source code and build the AST.\r\n 3. Traverse the AST and identify the nodes that correspond to the specified classes, methods, and fields.\r\n 4. Apply the required modifications to the identified AST nodes.\r\n 5. Generate the modified source code from the updated AST.","title":"How to automate Java code refactoring using a script with instructions?","body":"<p>I would have an excel with columns like,</p>\n<p><a href=\"https://i.stack.imgur.com/u9q1P.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u9q1P.png\" alt=\"enter image description here\" /></a></p>\n<ol>\n<li>Use a library like Apache POI to read the Excel file and extract the required information (project name, package name, class name, method name, and field name).</li>\n<li>Use a library like Eclipse JDT to parse the source code and build the AST.</li>\n<li>Traverse the AST and identify the nodes that correspond to the specified classes, methods, and fields.</li>\n<li>Apply the required modifications to the identified AST nodes.</li>\n<li>Generate the modified source code from the updated AST.</li>\n</ol>\n"}],"owner":{"account_id":12647983,"reputation":137,"user_id":9193100,"display_name":"Garruk The Wildspeaker"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":621,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":3,"score":6,"last_activity_date":1677856217,"creation_date":1676979822,"question_id":75520058,"body_markdown":"How to refactor this class programmatically via Java code/Groovy plugin?\r\nLet&#39;s say, I need to:\r\n- Rename `foo.method2` to `foo.method3`\r\n- Rename `myMethod` to `yourMethod`\r\n- Change the imported package `org.you.core.util.AnotherClassFromExternalPackage`\r\n \r\n```\r\nimport com.me.core.util.AnotherClassFromExternalPackage;\r\nimport com.me.core.util.Foo;\r\n\r\npublic class MyClass implements AnotherClassFromExternalPackage {\r\n\r\n    private final Foo foo;\r\n\r\n    public MyClass() {\r\n        this.foo = new Foo();\r\n    }\r\n\r\n    @Override\r\n    public long myMethod() {\r\n        return foo.method2();\r\n    }\r\n}\r\n```\r\n\r\nHow to create a script that will parse the code, apply syntactical transformations and save it using given instructions?\r\n\r\nThe code above is just an example. The bigger problem is that I have a lot of projects that are using the same external library. And sometimes they release a new version with breaking changes that is breaking the current code after the dependency bump.\r\nAnd I must update the dependency to the latest version every 2 weeks for 10+ projects. I need to write a script that will fix these breaking changes automatically.\r\nIdeally, apply code transformations one by one.","title":"How to automate Java code refactoring using a script with instructions?","body":"<p>How to refactor this class programmatically via Java code/Groovy plugin?\nLet's say, I need to:</p>\n<ul>\n<li>Rename <code>foo.method2</code> to <code>foo.method3</code></li>\n<li>Rename <code>myMethod</code> to <code>yourMethod</code></li>\n<li>Change the imported package <code>org.you.core.util.AnotherClassFromExternalPackage</code></li>\n</ul>\n<pre><code>import com.me.core.util.AnotherClassFromExternalPackage;\nimport com.me.core.util.Foo;\n\npublic class MyClass implements AnotherClassFromExternalPackage {\n\n    private final Foo foo;\n\n    public MyClass() {\n        this.foo = new Foo();\n    }\n\n    @Override\n    public long myMethod() {\n        return foo.method2();\n    }\n}\n</code></pre>\n<p>How to create a script that will parse the code, apply syntactical transformations and save it using given instructions?</p>\n<p>The code above is just an example. The bigger problem is that I have a lot of projects that are using the same external library. And sometimes they release a new version with breaking changes that is breaking the current code after the dependency bump.\nAnd I must update the dependency to the latest version every 2 weeks for 10+ projects. I need to write a script that will fix these breaking changes automatically.\nIdeally, apply code transformations one by one.</p>\n"},{"tags":["java","list","arraylist"],"comments":[{"owner":{"account_id":1303659,"reputation":2036,"user_id":1253088,"display_name":"Vaibs"},"score":0,"creation_date":1586530610,"post_id":61142631,"comment_id":108167618,"body_markdown":"You would have found the solution while searching. many posts. https://stackoverflow.com/questions/541749/how-to-determine-an-objects-class","body":"You would have found the solution while searching. many posts. <a href=\"https://stackoverflow.com/questions/541749/how-to-determine-an-objects-class\" title=\"how to determine an objects class\">stackoverflow.com/questions/541749/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":17989314,"reputation":3,"user_id":13073782,"display_name":"cshostgr"},"score":1,"creation_date":1586531362,"post_id":61142777,"comment_id":108168010,"body_markdown":"Thank you so much, its exactly what I was looking for !","body":"Thank you so much, its exactly what I was looking for !"}],"tags":[],"owner":{"account_id":444874,"reputation":663,"user_id":836967,"display_name":"Giancarlo Romeo"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1586531554,"creation_date":1586530069,"answer_id":61142777,"question_id":61142631,"body_markdown":"Use the `instanceof` to check the *runtime* type of object.\r\n\r\nExample of iteration:\r\n\r\n    for (Item item : db) {\r\n        if (item instanceof Car){\r\n            System.out.println(&quot;A car is: &quot; + item)\r\n        } else {\r\n            System.out.println(&quot;A bike is: &quot; + item)\r\n        }\r\n    }","title":"How to print specific item from ArrayList","body":"<p>Use the <code>instanceof</code> to check the <em>runtime</em> type of object.</p>\n\n<p>Example of iteration:</p>\n\n<pre><code>for (Item item : db) {\n    if (item instanceof Car){\n        System.out.println(\"A car is: \" + item)\n    } else {\n        System.out.println(\"A bike is: \" + item)\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17989314,"reputation":3,"user_id":13073782,"display_name":"cshostgr"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":61142777,"answer_count":1,"score":0,"last_activity_date":1677856209,"creation_date":1586529595,"question_id":61142631,"body_markdown":"I am trying to print specific item from my ArrayList \r\n\r\nI have super class named  Item, I created a new class with ArrayList named db in the database I&#39;m storing Cars,Bikes , \r\n\r\n    ArrayList&lt; Item &gt; db = new ArrayList&lt; Item &gt;();\r\n\r\n    Car newCar = new Car(getModel(),getPrice());\r\n\r\n    db.add(newCar);\r\n\r\n    Bike newBike = new Bike(getModel(),getPrice())\r\n\r\n    db.add(newBike);\r\n\r\n\r\nNow I&#39;m trying to print only cars something like this,\r\n\r\n    if( db==newCar){\r\n      System.out.println(&quot;The first car is : &quot;+db.car)\r\n    }\r\n    else{\r\n\r\n      System.out.println(&quot;The first bike is : &quot;+db.car)\r\n\r\n    }\r\n\r\n\r\n","title":"How to print specific item from ArrayList","body":"<p>I am trying to print specific item from my ArrayList </p>\n\n<p>I have super class named  Item, I created a new class with ArrayList named db in the database I'm storing Cars,Bikes , </p>\n\n<pre><code>ArrayList&lt; Item &gt; db = new ArrayList&lt; Item &gt;();\n\nCar newCar = new Car(getModel(),getPrice());\n\ndb.add(newCar);\n\nBike newBike = new Bike(getModel(),getPrice())\n\ndb.add(newBike);\n</code></pre>\n\n<p>Now I'm trying to print only cars something like this,</p>\n\n<pre><code>if( db==newCar){\n  System.out.println(\"The first car is : \"+db.car)\n}\nelse{\n\n  System.out.println(\"The first bike is : \"+db.car)\n\n}\n</code></pre>\n"},{"tags":["java","android","android-recyclerview","surfaceview"],"comments":[{"owner":{"account_id":8578846,"reputation":1181,"user_id":6427258,"accept_rate":50,"display_name":"tendai"},"score":0,"creation_date":1577183401,"post_id":59465963,"comment_id":105114224,"body_markdown":"This might not be the best option but you might want to use a static placeholder view and an interface to listen for click changes in order to trigger setting VstGridAdapter.java onBindViewHolder holder.view to r","body":"This might not be the best option but you might want to use a static placeholder view and an interface to listen for click changes in order to trigger setting VstGridAdapter.java onBindViewHolder holder.view to r"},{"owner":{"account_id":1260896,"reputation":1488,"user_id":1219213,"accept_rate":60,"display_name":"TheRealChx101"},"score":1,"creation_date":1577342572,"post_id":59465963,"comment_id":105144978,"body_markdown":"It should work ok. You may be doing something wrong. Most views can be rendered inside the RecyclerView. Make sure that RV has the proper layout manager and orientation set. Also, try inflating your SurfaceView that way it inherits the RV&#39; size. Lastly, I would extend `SurfaceView` into a custom view and move the logic there then inflate the custom class instead so your adapter is only concerned with displaying the SurfaceView.","body":"It should work ok. You may be doing something wrong. Most views can be rendered inside the RecyclerView. Make sure that RV has the proper layout manager and orientation set. Also, try inflating your SurfaceView that way it inherits the RV&#39; size. Lastly, I would extend <code>SurfaceView</code> into a custom view and move the logic there then inflate the custom class instead so your adapter is only concerned with displaying the SurfaceView."},{"owner":{"account_id":10222220,"reputation":75,"user_id":8680581,"display_name":"Clark Kent"},"score":0,"creation_date":1577345665,"post_id":59465963,"comment_id":105145845,"body_markdown":"@TheRealChx101 added a minimal example demonstrating the issue","body":"@TheRealChx101 added a minimal example demonstrating the issue"},{"owner":{"account_id":10222220,"reputation":75,"user_id":8680581,"display_name":"Clark Kent"},"score":0,"creation_date":1577379072,"post_id":59465963,"comment_id":105156622,"body_markdown":"@TheRealChx101 also how would i do that?","body":"@TheRealChx101 also how would i do that?"}],"answers":[{"tags":[],"owner":{"account_id":10222220,"reputation":75,"user_id":8680581,"display_name":"Clark Kent"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1577431912,"creation_date":1577431912,"answer_id":59497487,"question_id":59465963,"body_markdown":"apparently in order to get it to display i needed to give the view fixed size layout paramaters: `mView.setLayoutParams(new ViewGroup.LayoutParams(500, 500));`","title":"Android RecyclerView fails to render a SurfaceView","body":"<p>apparently in order to get it to display i needed to give the view fixed size layout paramaters: <code>mView.setLayoutParams(new ViewGroup.LayoutParams(500, 500));</code></p>\n"}],"owner":{"account_id":10222220,"reputation":75,"user_id":8680581,"display_name":"Clark Kent"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1101,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":59497487,"answer_count":1,"score":2,"last_activity_date":1677855990,"creation_date":1577176146,"question_id":59465963,"body_markdown":"can a SurfaceView be rendered inside a RecyclerView\r\n\r\nEDIT: even this fails to render inside of a RecyclerView: https://github.com/android/ndk-samples/tree/master/hello-gl2\r\n\r\nEDIT2: https://github.com/mgood7123/RecyclerViewSurfaceViewGrid minimal example demonstrating the issue\r\n\r\n```\r\n    // public class GLSurfaceView extends SurfaceView implements SurfaceHolder.Callback2 {\r\n    // class GL2JNIView extends GLSurfaceView {\r\n    GL2JNIView mView;\r\n    public ViewGroup onViewRequest(Context mContext) {\r\n        if (context == null) context = mContext;\r\n        mView = new GL2JNIView(context);\r\n        RelativeLayout rel = new RelativeLayout(context);\r\n        rel.addView(mView);\r\n        mView.onResume();\r\n        return rel;\r\n    }\r\n    public ViewGroup onViewRequest_(Context mContext) {} // old openGL Cube\r\n```\r\n\r\nwhat i am trying to do is make a Grid of SurfaceView&#39;s\r\n\r\n```\r\n@Keep\r\npublic class NativeView {\r\n    String TAG = &quot;EglSample&quot;;\r\n    public static native void nativeOnStart();\r\n    public static native void nativeOnResume();\r\n    public static native void nativeOnPause();\r\n    public static native void nativeOnStop();\r\n\r\n    // this is part of graphics manager\r\n    public native void nativeSetSurface(Surface surface);\r\n\r\n    View surfaceView = null;\r\n    SurfaceHolderCallback surfaceHolderCallback = null;\r\n\r\n    public NativeView(Context context) {\r\n        System.loadLibrary(&quot;nativeegl&quot;);\r\n        surfaceHolderCallback = new SurfaceHolderCallback();\r\n        surfaceView = new View(surfaceHolderCallback, context);\r\n    }\r\n\r\n    class View extends SurfaceView {\r\n        public View(SurfaceHolder.Callback callback, Context context) {\r\n            super(context);\r\n            getHolder().addCallback(callback);\r\n        }\r\n\r\n        public View(SurfaceHolder.Callback callback, Context context, AttributeSet attrs) {\r\n            super(context, attrs);\r\n            getHolder().addCallback(callback);\r\n        }\r\n\r\n        public View(SurfaceHolder.Callback callback, Context context, AttributeSet attrs, int defStyle) {\r\n            super(context, attrs, defStyle);\r\n            getHolder().addCallback(callback);\r\n        }\r\n\r\n        public View(SurfaceHolder.Callback callback, Context context, AttributeSet attrs, int defStyle, int defStyleRes) {\r\n            super(context, attrs, defStyle, defStyleRes);\r\n            getHolder().addCallback(callback);\r\n        }\r\n    }\r\n\r\n    class SurfaceHolderCallback implements SurfaceHolder.Callback {\r\n        @Override\r\n        public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {\r\n            nativeSetSurface(holder.getSurface());\r\n        }\r\n\r\n        @Override\r\n        public void surfaceCreated(SurfaceHolder holder) {\r\n        }\r\n\r\n        @Override\r\n        public void surfaceDestroyed(SurfaceHolder holder) {\r\n            nativeSetSurface(null);\r\n        }\r\n    }\r\n}\r\n    public ViewGroup onViewRequest(Context mContext) {\r\n        if (context == null) context = mContext;\r\n\r\n        if (n == null) n = new NativeView(context);\r\n        Log.i(n.TAG, &quot;onViewRequest(Activity, Context)&quot;);\r\n        // build layout\r\n        RelativeLayout rel = new RelativeLayout(context);\r\n        rel.addView(n.surfaceView);\r\n        n.surfaceView.setOnClickListener(new MyListener());\r\n        // set text\r\n        TextView text = new TextView(context);\r\n        text.setText(&quot;Hello World! Try clicking the screen&quot;);\r\n        text.setTextSize(60f);\r\n        text.setTextColor(Color.WHITE);\r\n        rel.addView(text);\r\n        Log.i(n.TAG, &quot;onCreate()&quot;);\r\n        // build layout\r\n        NativeView.nativeOnStart();\r\n        NativeView.nativeOnResume();\r\n        return rel;\r\n    }\r\n```\r\n\r\nfull:\r\n\r\nhttps://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/vstdemoopengladdonscube/src/main/java/vst/demo/opengl/addons/cube/main.java\r\n\r\nhttps://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/vstdemoopengladdonscube/src/main/java/vst/demo/opengl/addons/cube/NativeView.java\r\n\r\nas it renders corrupted in a recycler view (text but no surface view) (you can barely make out the white text but the fact that it is there means the view heirarchy IS being drawn)\r\n\r\n[![corrupted][1]][1]\r\n\r\n(set USE_RECYCLER_VIEW = true)\r\n\r\nhttps://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/VstManager/src/main/java/vst/manager/VstGrid.java#L29\r\n\r\n```\r\n    Boolean USE_RECYCLER_VIEW = false;\r\n    public LinearLayout getView() {\r\n        // this assumes the first available &quot;*\\.addons\\.*&quot; package\r\n        if (!USE_RECYCLER_VIEW) {\r\n            VST pkg = mVstMan.loadPackage(mActivity, mVstMan.getPackages(mActivity)[0].packageName, false);\r\n            VST.CLASS vstClass = mVstMan.loadClass(pkg, &quot;main&quot;);\r\n            Object vstClassInstance = mVstMan.newInstance(vstClass, &quot;main&quot;);\r\n            // android.widget.RelativeLayout cannot be cast to android.widget.LinearLayout\r\n            LinearLayout x = new LinearLayout(mActivity);\r\n            x.addView((ViewGroup) mVstMan.invokeMethod(\r\n                    vstClass, vstClassInstance,\r\n                    &quot;onViewRequest&quot;, Context.class,\r\n                    pkg.activityApplicationContext\r\n                    )\r\n            );\r\n            return x;\r\n        } else {\r\n            if (recyclerViewMain == null)\r\n                recyclerViewMain = (LinearLayout) LayoutInflater.from(mActivity.getApplicationContext())\r\n                        .inflate(R.layout.vst_grid, null, false);\r\n            if (recyclerView == null) {\r\n                recyclerView = recyclerViewMain\r\n                        .findViewById(R.id.VstGrid);\r\n\r\n                // use this setting to improve performance if you know that changes\r\n                // in content do not change the layout size of the RecyclerView\r\n                recyclerView.setHasFixedSize(true);\r\n            }\r\n            if (layoutManager == null) {\r\n                // use a linear layout manager\r\n                layoutManager = new GridLayoutManager(mActivity, 1);\r\n                recyclerView.setLayoutManager(layoutManager);\r\n            }\r\n            if (mAdapter == null) {\r\n                // specify an adapter (see also next example)\r\n                mAdapter = new VstGridAdapter(mActivity, mVstMan, mVstUI);\r\n                recyclerView.setAdapter(mAdapter);\r\n            }\r\n            mAdapter.update();\r\n            return recyclerViewMain;\r\n        }\r\n    }\r\n```\r\n\r\nhttps://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/VstManager/src/main/java/vst/manager/VstGridAdapter.java#L86\r\n\r\n```\r\n    // Create new views (invoked by the layout manager)\r\n    @Override\r\n    public MyViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\r\n        VST pkg = mVstMan.loadPackage(mActivity, mVstMan.getPackages(mActivity)[0].packageName, false);\r\n        VST.CLASS vstClass = mVstMan.loadClass(pkg, &quot;main&quot;);\r\n        Object vstClassInstance = mVstMan.newInstance(vstClass, &quot;main&quot;);\r\n        // android.widget.RelativeLayout cannot be cast to android.widget.LinearLayout\r\n        LinearLayout x = new LinearLayout(mActivity);\r\n        x.addView((ViewGroup) mVstMan.invokeMethod(\r\n                        vstClass, vstClassInstance,\r\n                        &quot;onViewRequest&quot;, Context.class,\r\n                        pkg.activityApplicationContext\r\n                )\r\n        );\r\n        return new MyViewHolder(x);\r\n    }\r\n```\r\n\r\nhttps://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/vstdemoopengladdonscube/src/main/cpp/RotatingSquares/jniapi.cpp\r\n\r\nhttps://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/vstdemoopengladdonscube/src/main/cpp/RotatingSquares/renderer.cpp#L153\r\n\r\nmeanwhile it renders perfectly fine if NOT in a recycler view (leave USE_RECYCLER_VIEW as false)\r\n\r\n[![not corrupted][2]][2]\r\n\r\nwhy?\r\n\r\n  [1]: https://i.stack.imgur.com/luOux.jpg\r\n  [2]: https://i.stack.imgur.com/3qmAs.jpg","title":"Android RecyclerView fails to render a SurfaceView","body":"<p>can a SurfaceView be rendered inside a RecyclerView</p>\n<p>EDIT: even this fails to render inside of a RecyclerView: <a href=\"https://github.com/android/ndk-samples/tree/master/hello-gl2\" rel=\"nofollow noreferrer\">https://github.com/android/ndk-samples/tree/master/hello-gl2</a></p>\n<p>EDIT2: <a href=\"https://github.com/mgood7123/RecyclerViewSurfaceViewGrid\" rel=\"nofollow noreferrer\">https://github.com/mgood7123/RecyclerViewSurfaceViewGrid</a> minimal example demonstrating the issue</p>\n<pre><code>    // public class GLSurfaceView extends SurfaceView implements SurfaceHolder.Callback2 {\n    // class GL2JNIView extends GLSurfaceView {\n    GL2JNIView mView;\n    public ViewGroup onViewRequest(Context mContext) {\n        if (context == null) context = mContext;\n        mView = new GL2JNIView(context);\n        RelativeLayout rel = new RelativeLayout(context);\n        rel.addView(mView);\n        mView.onResume();\n        return rel;\n    }\n    public ViewGroup onViewRequest_(Context mContext) {} // old openGL Cube\n</code></pre>\n<p>what i am trying to do is make a Grid of SurfaceView's</p>\n<pre><code>@Keep\npublic class NativeView {\n    String TAG = &quot;EglSample&quot;;\n    public static native void nativeOnStart();\n    public static native void nativeOnResume();\n    public static native void nativeOnPause();\n    public static native void nativeOnStop();\n\n    // this is part of graphics manager\n    public native void nativeSetSurface(Surface surface);\n\n    View surfaceView = null;\n    SurfaceHolderCallback surfaceHolderCallback = null;\n\n    public NativeView(Context context) {\n        System.loadLibrary(&quot;nativeegl&quot;);\n        surfaceHolderCallback = new SurfaceHolderCallback();\n        surfaceView = new View(surfaceHolderCallback, context);\n    }\n\n    class View extends SurfaceView {\n        public View(SurfaceHolder.Callback callback, Context context) {\n            super(context);\n            getHolder().addCallback(callback);\n        }\n\n        public View(SurfaceHolder.Callback callback, Context context, AttributeSet attrs) {\n            super(context, attrs);\n            getHolder().addCallback(callback);\n        }\n\n        public View(SurfaceHolder.Callback callback, Context context, AttributeSet attrs, int defStyle) {\n            super(context, attrs, defStyle);\n            getHolder().addCallback(callback);\n        }\n\n        public View(SurfaceHolder.Callback callback, Context context, AttributeSet attrs, int defStyle, int defStyleRes) {\n            super(context, attrs, defStyle, defStyleRes);\n            getHolder().addCallback(callback);\n        }\n    }\n\n    class SurfaceHolderCallback implements SurfaceHolder.Callback {\n        @Override\n        public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {\n            nativeSetSurface(holder.getSurface());\n        }\n\n        @Override\n        public void surfaceCreated(SurfaceHolder holder) {\n        }\n\n        @Override\n        public void surfaceDestroyed(SurfaceHolder holder) {\n            nativeSetSurface(null);\n        }\n    }\n}\n    public ViewGroup onViewRequest(Context mContext) {\n        if (context == null) context = mContext;\n\n        if (n == null) n = new NativeView(context);\n        Log.i(n.TAG, &quot;onViewRequest(Activity, Context)&quot;);\n        // build layout\n        RelativeLayout rel = new RelativeLayout(context);\n        rel.addView(n.surfaceView);\n        n.surfaceView.setOnClickListener(new MyListener());\n        // set text\n        TextView text = new TextView(context);\n        text.setText(&quot;Hello World! Try clicking the screen&quot;);\n        text.setTextSize(60f);\n        text.setTextColor(Color.WHITE);\n        rel.addView(text);\n        Log.i(n.TAG, &quot;onCreate()&quot;);\n        // build layout\n        NativeView.nativeOnStart();\n        NativeView.nativeOnResume();\n        return rel;\n    }\n</code></pre>\n<p>full:</p>\n<p><a href=\"https://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/vstdemoopengladdonscube/src/main/java/vst/demo/opengl/addons/cube/main.java\" rel=\"nofollow noreferrer\">https://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/vstdemoopengladdonscube/src/main/java/vst/demo/opengl/addons/cube/main.java</a></p>\n<p><a href=\"https://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/vstdemoopengladdonscube/src/main/java/vst/demo/opengl/addons/cube/NativeView.java\" rel=\"nofollow noreferrer\">https://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/vstdemoopengladdonscube/src/main/java/vst/demo/opengl/addons/cube/NativeView.java</a></p>\n<p>as it renders corrupted in a recycler view (text but no surface view) (you can barely make out the white text but the fact that it is there means the view heirarchy IS being drawn)</p>\n<p><a href=\"https://i.stack.imgur.com/luOux.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/luOux.jpg\" alt=\"corrupted\" /></a></p>\n<p>(set USE_RECYCLER_VIEW = true)</p>\n<p><a href=\"https://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/VstManager/src/main/java/vst/manager/VstGrid.java#L29\" rel=\"nofollow noreferrer\">https://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/VstManager/src/main/java/vst/manager/VstGrid.java#L29</a></p>\n<pre><code>    Boolean USE_RECYCLER_VIEW = false;\n    public LinearLayout getView() {\n        // this assumes the first available &quot;*\\.addons\\.*&quot; package\n        if (!USE_RECYCLER_VIEW) {\n            VST pkg = mVstMan.loadPackage(mActivity, mVstMan.getPackages(mActivity)[0].packageName, false);\n            VST.CLASS vstClass = mVstMan.loadClass(pkg, &quot;main&quot;);\n            Object vstClassInstance = mVstMan.newInstance(vstClass, &quot;main&quot;);\n            // android.widget.RelativeLayout cannot be cast to android.widget.LinearLayout\n            LinearLayout x = new LinearLayout(mActivity);\n            x.addView((ViewGroup) mVstMan.invokeMethod(\n                    vstClass, vstClassInstance,\n                    &quot;onViewRequest&quot;, Context.class,\n                    pkg.activityApplicationContext\n                    )\n            );\n            return x;\n        } else {\n            if (recyclerViewMain == null)\n                recyclerViewMain = (LinearLayout) LayoutInflater.from(mActivity.getApplicationContext())\n                        .inflate(R.layout.vst_grid, null, false);\n            if (recyclerView == null) {\n                recyclerView = recyclerViewMain\n                        .findViewById(R.id.VstGrid);\n\n                // use this setting to improve performance if you know that changes\n                // in content do not change the layout size of the RecyclerView\n                recyclerView.setHasFixedSize(true);\n            }\n            if (layoutManager == null) {\n                // use a linear layout manager\n                layoutManager = new GridLayoutManager(mActivity, 1);\n                recyclerView.setLayoutManager(layoutManager);\n            }\n            if (mAdapter == null) {\n                // specify an adapter (see also next example)\n                mAdapter = new VstGridAdapter(mActivity, mVstMan, mVstUI);\n                recyclerView.setAdapter(mAdapter);\n            }\n            mAdapter.update();\n            return recyclerViewMain;\n        }\n    }\n</code></pre>\n<p><a href=\"https://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/VstManager/src/main/java/vst/manager/VstGridAdapter.java#L86\" rel=\"nofollow noreferrer\">https://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/VstManager/src/main/java/vst/manager/VstGridAdapter.java#L86</a></p>\n<pre><code>    // Create new views (invoked by the layout manager)\n    @Override\n    public MyViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        VST pkg = mVstMan.loadPackage(mActivity, mVstMan.getPackages(mActivity)[0].packageName, false);\n        VST.CLASS vstClass = mVstMan.loadClass(pkg, &quot;main&quot;);\n        Object vstClassInstance = mVstMan.newInstance(vstClass, &quot;main&quot;);\n        // android.widget.RelativeLayout cannot be cast to android.widget.LinearLayout\n        LinearLayout x = new LinearLayout(mActivity);\n        x.addView((ViewGroup) mVstMan.invokeMethod(\n                        vstClass, vstClassInstance,\n                        &quot;onViewRequest&quot;, Context.class,\n                        pkg.activityApplicationContext\n                )\n        );\n        return new MyViewHolder(x);\n    }\n</code></pre>\n<p><a href=\"https://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/vstdemoopengladdonscube/src/main/cpp/RotatingSquares/jniapi.cpp\" rel=\"nofollow noreferrer\">https://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/vstdemoopengladdonscube/src/main/cpp/RotatingSquares/jniapi.cpp</a></p>\n<p><a href=\"https://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/vstdemoopengladdonscube/src/main/cpp/RotatingSquares/renderer.cpp#L153\" rel=\"nofollow noreferrer\">https://github.com/mgood7123/VSTDEMO/blob/0f5e7063d9ebef5ae5a05f128d548eec712b741f/vstdemoopengladdonscube/src/main/cpp/RotatingSquares/renderer.cpp#L153</a></p>\n<p>meanwhile it renders perfectly fine if NOT in a recycler view (leave USE_RECYCLER_VIEW as false)</p>\n<p><a href=\"https://i.stack.imgur.com/3qmAs.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3qmAs.jpg\" alt=\"not corrupted\" /></a></p>\n<p>why?</p>\n"},{"tags":["java","spring","spring-cloud","spring-cloud-stream","spring-cloud-function"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1655684614,"post_id":72681126,"comment_id":128383217,"body_markdown":"How does it fail? Compile error? runtime error? What is the error message / stacktrace?","body":"How does it fail? Compile error? runtime error? What is the error message / stacktrace?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1655704605,"post_id":72681126,"comment_id":128385863,"body_markdown":"The class doesn&#39;t implement `Serializable` a record is automatically serializable.","body":"The class doesn&#39;t implement <code>Serializable</code> a record is automatically serializable."},{"owner":{"account_id":1770403,"reputation":64,"user_id":1615316,"accept_rate":50,"display_name":"Andyrewwer"},"score":0,"creation_date":1655756765,"post_id":72681126,"comment_id":128402887,"body_markdown":"Does this require more than just public class MessageClass implements Serializable {...} -- if so that did not fix it.","body":"Does this require more than just public class MessageClass implements Serializable {...} -- if so that did not fix it."}],"answers":[{"tags":[],"owner":{"account_id":290076,"reputation":228,"user_id":591417,"display_name":"Alex"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677855867,"creation_date":1677855867,"answer_id":75628709,"question_id":72681126,"body_markdown":"A bit old, but if someone needs an answer:\r\nThe problem is the class doesn&#39;t have getters: \r\n\r\n    public String content() {\r\n        return content;\r\n    }\r\n\r\n    public String key() {\r\n        return key;\r\n    }\r\nIn records it&#39;s possible because Jackson know abou them and treat them differently, but normal classes should have the good old getters (or you should tell Jackson about it):\r\n\r\n    public String getContent() {\r\n        return content;\r\n    }\r\n\r\n    public String getKey() {\r\n        return key;\r\n    }","title":"Spring Cloud Stream - unable to serialize java class (works for java record)","body":"<p>A bit old, but if someone needs an answer:\nThe problem is the class doesn't have getters:</p>\n<pre><code>public String content() {\n    return content;\n}\n\npublic String key() {\n    return key;\n}\n</code></pre>\n<p>In records it's possible because Jackson know abou them and treat them differently, but normal classes should have the good old getters (or you should tell Jackson about it):</p>\n<pre><code>public String getContent() {\n    return content;\n}\n\npublic String getKey() {\n    return key;\n}\n</code></pre>\n"}],"owner":{"account_id":1770403,"reputation":64,"user_id":1615316,"accept_rate":50,"display_name":"Andyrewwer"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":540,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677855867,"creation_date":1655684107,"question_id":72681126,"body_markdown":"Hi I am having an issue with new functional spring cloud stream... \r\n\r\nI have a basic example:\r\n```\r\n@Autowired\r\n\tprivate StreamBridge streamBridge;\r\n\r\n\t@PostMapping(&quot;/publish/{topic}&quot;)\r\n//\tfails\r\n\tpublic boolean publish(@RequestBody MessageClass msg, @PathVariable String topic) {\r\n//\tworks\r\n//\tpublic boolean publish(@RequestBody MessageRecord msg, @PathVariable String topic) {\r\n\t\treturn this.streamBridge.send(topic, msg);\r\n\t}\r\n```\r\n\r\nTrying to simply as much as possible this is my java class:\r\n```\r\npublic class MessageClass {\r\n\r\n    private String key;\r\n    private String content;\r\n\r\n    public MessageClass(String key, String content) {\r\n        this.key = key;\r\n        this.content = content;\r\n    }\r\n\r\n    public MessageClass() {\r\n    }\r\n\r\n    public String content() {\r\n        return content;\r\n    }\r\n\r\n    public String key() {\r\n        return key;\r\n    }\r\n\r\n    public void setKey(String key) {\r\n        this.key = key;\r\n    }\r\n\r\n    public void setContent(String content) {\r\n        this.content = content;\r\n    }\r\n}\r\n```\r\nand record:\r\n```\r\npublic record MessageRecord(String key, String content) {}\r\n```\r\n\r\nThis fails for the MessageClass but succeeds with MessageRecord. \r\n\r\nRelevant stack trace (I think, full below):\r\n\r\n```\r\njava.lang.ClassCastException: class io.enfuse.streamerrorexample.pkg.MessageClass cannot be cast to class [B (io.enfuse.streamerrorexample.pkg.MessageClass is in unnamed module of loader &#39;app&#39;; [B is in module java.base of loader &#39;bootstrap&#39;)\r\n        at org.apache.kafka.common.serialization.ByteArraySerializer.serialize(ByteArraySerializer.java:19) ~[kafka-clients-3.1.1.jar:na]\r\n```\r\n\r\nSee repo here: https://github.com/andyrewwer/spring-cloud-stream-error-example/settings/access\r\n\r\nWhat is the difference between the java class and record and why does it work for record but not class?\r\n\r\n\r\nFull stack trace:\r\n```\r\n2022-06-19 18:04:14.361 ERROR 70401 --- [nio-8080-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.messaging.MessageHandlingException: error occurred in message handler [org.springframework.cloud.stream.binder.kafka.KafkaMessageChannelBinder$ProducerConfigurationMessageHandler@32e459ed]; nested exception is org.apache.kafka.common.errors.SerializationException: Can&#39;t convert value of class io.enfuse.streamerrorexample.pkg.MessageClass to class org.apache.kafka.common.serialization.ByteArraySerializer specified in value.serializer, failedMessage=GenericMessage [payload=io.enfuse.streamerrorexample.pkg.MessageClass@1dacd968, headers={id=fbe5d434-cd95-00b2-51ca-88a5f3b0f867, contentType=application/json, target-protocol=kafka, timestamp=1655687054356}]] with root cause\r\n\r\njava.lang.ClassCastException: class io.enfuse.streamerrorexample.pkg.MessageClass cannot be cast to class [B (io.enfuse.streamerrorexample.pkg.MessageClass is in unnamed module of loader &#39;app&#39;; [B is in module java.base of loader &#39;bootstrap&#39;)\r\n        at org.apache.kafka.common.serialization.ByteArraySerializer.serialize(ByteArraySerializer.java:19) ~[kafka-clients-3.1.1.jar:na]\r\n        at org.apache.kafka.common.serialization.Serializer.serialize(Serializer.java:62) ~[kafka-clients-3.1.1.jar:na]\r\n        at org.apache.kafka.clients.producer.KafkaProducer.doSend(KafkaProducer.java:954) ~[kafka-clients-3.1.1.jar:na]\r\n        at org.apache.kafka.clients.producer.KafkaProducer.send(KafkaProducer.java:914) ~[kafka-clients-3.1.1.jar:na]\r\n        at org.springframework.kafka.core.DefaultKafkaProducerFactory$CloseSafeProducer.send(DefaultKafkaProducerFactory.java:993) ~[spring-kafka-2.8.6.jar:2.8.6]\r\n        at org.springframework.kafka.core.KafkaTemplate.doSend(KafkaTemplate.java:655) ~[spring-kafka-2.8.6.jar:2.8.6]\r\n        at org.springframework.kafka.core.KafkaTemplate.send(KafkaTemplate.java:429) ~[spring-kafka-2.8.6.jar:2.8.6]\r\n        at org.springframework.integration.kafka.outbound.KafkaProducerMessageHandler.handleRequestMessage(KafkaProducerMessageHandler.java:513) ~[spring-integration-kafka-5.5.12.jar:5.5.12]\r\n        at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:136) ~[spring-integration-core-5.5.12.jar:5.5.12]\r\n        at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:56) ~[spring-integration-core-5.5.12.jar:5.5.12]\r\n        at org.springframework.cloud.stream.binder.AbstractMessageChannelBinder$SendingHandler.handleMessageInternal(AbstractMessageChannelBinder.java:1074) ~[spring-cloud-stream-3.2.4.jar:3.2.4]\r\n        at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:56) ~[spring-integration-core-5.5.12.jar:5.5.12]\r\n        at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115) ~[spring-integration-core-5.5.12.jar:5.5.12]\r\n        at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133) ~[spring-integration-core-5.5.12.jar:5.5.12]\r\n        at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106) ~[spring-integration-core-5.5.12.jar:5.5.12]\r\n        at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72) ~[spring-integration-core-5.5.12.jar:5.5.12]\r\n        at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317) ~[spring-integration-core-5.5.12.jar:5.5.12]\r\n        at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272) ~[spring-integration-core-5.5.12.jar:5.5.12]\r\n        at org.springframework.cloud.stream.function.StreamBridge.send(StreamBridge.java:235) ~[spring-cloud-stream-3.2.4.jar:3.2.4]\r\n        at org.springframework.cloud.stream.function.StreamBridge.send(StreamBridge.java:170) ~[spring-cloud-stream-3.2.4.jar:3.2.4]\r\n        at org.springframework.cloud.stream.function.StreamBridge.send(StreamBridge.java:150) ~[spring-cloud-stream-3.2.4.jar:3.2.4]\r\n        at io.enfuse.streamerrorexample.pkg.StreamService.publish(StreamService.java:23) ~[main/:na]\r\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:577) ~[na:na]\r\n        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.20.jar:5.3.20]\r\n        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.20.jar:5.3.20]\r\n        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.20.jar:5.3.20]\r\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.20.jar:5.3.20]\r\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.20.jar:5.3.20]\r\n        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.20.jar:5.3.20]\r\n        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.20.jar:5.3.20]\r\n        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.20.jar:5.3.20]\r\n        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.20.jar:5.3.20]\r\n        at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.20.jar:5.3.20]\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.63.jar:4.0.FR]\r\n        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.20.jar:5.3.20]\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.63.jar:4.0.FR]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.20.jar:5.3.20]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.20.jar:5.3.20]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.20.jar:5.3.20]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\r\n        at java.base/java.lang.Thread.run(Thread.java:833) ~[na:an]\r\n```","title":"Spring Cloud Stream - unable to serialize java class (works for java record)","body":"<p>Hi I am having an issue with new functional spring cloud stream...</p>\n<p>I have a basic example:</p>\n<pre><code>@Autowired\n    private StreamBridge streamBridge;\n\n    @PostMapping(&quot;/publish/{topic}&quot;)\n//  fails\n    public boolean publish(@RequestBody MessageClass msg, @PathVariable String topic) {\n//  works\n//  public boolean publish(@RequestBody MessageRecord msg, @PathVariable String topic) {\n        return this.streamBridge.send(topic, msg);\n    }\n</code></pre>\n<p>Trying to simply as much as possible this is my java class:</p>\n<pre><code>public class MessageClass {\n\n    private String key;\n    private String content;\n\n    public MessageClass(String key, String content) {\n        this.key = key;\n        this.content = content;\n    }\n\n    public MessageClass() {\n    }\n\n    public String content() {\n        return content;\n    }\n\n    public String key() {\n        return key;\n    }\n\n    public void setKey(String key) {\n        this.key = key;\n    }\n\n    public void setContent(String content) {\n        this.content = content;\n    }\n}\n</code></pre>\n<p>and record:</p>\n<pre><code>public record MessageRecord(String key, String content) {}\n</code></pre>\n<p>This fails for the MessageClass but succeeds with MessageRecord.</p>\n<p>Relevant stack trace (I think, full below):</p>\n<pre><code>java.lang.ClassCastException: class io.enfuse.streamerrorexample.pkg.MessageClass cannot be cast to class [B (io.enfuse.streamerrorexample.pkg.MessageClass is in unnamed module of loader 'app'; [B is in module java.base of loader 'bootstrap')\n        at org.apache.kafka.common.serialization.ByteArraySerializer.serialize(ByteArraySerializer.java:19) ~[kafka-clients-3.1.1.jar:na]\n</code></pre>\n<p>See repo here: <a href=\"https://github.com/andyrewwer/spring-cloud-stream-error-example/settings/access\" rel=\"nofollow noreferrer\">https://github.com/andyrewwer/spring-cloud-stream-error-example/settings/access</a></p>\n<p>What is the difference between the java class and record and why does it work for record but not class?</p>\n<p>Full stack trace:</p>\n<pre><code>2022-06-19 18:04:14.361 ERROR 70401 --- [nio-8080-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.messaging.MessageHandlingException: error occurred in message handler [org.springframework.cloud.stream.binder.kafka.KafkaMessageChannelBinder$ProducerConfigurationMessageHandler@32e459ed]; nested exception is org.apache.kafka.common.errors.SerializationException: Can't convert value of class io.enfuse.streamerrorexample.pkg.MessageClass to class org.apache.kafka.common.serialization.ByteArraySerializer specified in value.serializer, failedMessage=GenericMessage [payload=io.enfuse.streamerrorexample.pkg.MessageClass@1dacd968, headers={id=fbe5d434-cd95-00b2-51ca-88a5f3b0f867, contentType=application/json, target-protocol=kafka, timestamp=1655687054356}]] with root cause\n\njava.lang.ClassCastException: class io.enfuse.streamerrorexample.pkg.MessageClass cannot be cast to class [B (io.enfuse.streamerrorexample.pkg.MessageClass is in unnamed module of loader 'app'; [B is in module java.base of loader 'bootstrap')\n        at org.apache.kafka.common.serialization.ByteArraySerializer.serialize(ByteArraySerializer.java:19) ~[kafka-clients-3.1.1.jar:na]\n        at org.apache.kafka.common.serialization.Serializer.serialize(Serializer.java:62) ~[kafka-clients-3.1.1.jar:na]\n        at org.apache.kafka.clients.producer.KafkaProducer.doSend(KafkaProducer.java:954) ~[kafka-clients-3.1.1.jar:na]\n        at org.apache.kafka.clients.producer.KafkaProducer.send(KafkaProducer.java:914) ~[kafka-clients-3.1.1.jar:na]\n        at org.springframework.kafka.core.DefaultKafkaProducerFactory$CloseSafeProducer.send(DefaultKafkaProducerFactory.java:993) ~[spring-kafka-2.8.6.jar:2.8.6]\n        at org.springframework.kafka.core.KafkaTemplate.doSend(KafkaTemplate.java:655) ~[spring-kafka-2.8.6.jar:2.8.6]\n        at org.springframework.kafka.core.KafkaTemplate.send(KafkaTemplate.java:429) ~[spring-kafka-2.8.6.jar:2.8.6]\n        at org.springframework.integration.kafka.outbound.KafkaProducerMessageHandler.handleRequestMessage(KafkaProducerMessageHandler.java:513) ~[spring-integration-kafka-5.5.12.jar:5.5.12]\n        at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:136) ~[spring-integration-core-5.5.12.jar:5.5.12]\n        at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:56) ~[spring-integration-core-5.5.12.jar:5.5.12]\n        at org.springframework.cloud.stream.binder.AbstractMessageChannelBinder$SendingHandler.handleMessageInternal(AbstractMessageChannelBinder.java:1074) ~[spring-cloud-stream-3.2.4.jar:3.2.4]\n        at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:56) ~[spring-integration-core-5.5.12.jar:5.5.12]\n        at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115) ~[spring-integration-core-5.5.12.jar:5.5.12]\n        at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133) ~[spring-integration-core-5.5.12.jar:5.5.12]\n        at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106) ~[spring-integration-core-5.5.12.jar:5.5.12]\n        at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72) ~[spring-integration-core-5.5.12.jar:5.5.12]\n        at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317) ~[spring-integration-core-5.5.12.jar:5.5.12]\n        at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272) ~[spring-integration-core-5.5.12.jar:5.5.12]\n        at org.springframework.cloud.stream.function.StreamBridge.send(StreamBridge.java:235) ~[spring-cloud-stream-3.2.4.jar:3.2.4]\n        at org.springframework.cloud.stream.function.StreamBridge.send(StreamBridge.java:170) ~[spring-cloud-stream-3.2.4.jar:3.2.4]\n        at org.springframework.cloud.stream.function.StreamBridge.send(StreamBridge.java:150) ~[spring-cloud-stream-3.2.4.jar:3.2.4]\n        at io.enfuse.streamerrorexample.pkg.StreamService.publish(StreamService.java:23) ~[main/:na]\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n        at java.base/java.lang.reflect.Method.invoke(Method.java:577) ~[na:na]\n        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.20.jar:5.3.20]\n        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.20.jar:5.3.20]\n        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.20.jar:5.3.20]\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.20.jar:5.3.20]\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.20.jar:5.3.20]\n        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.20.jar:5.3.20]\n        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.20.jar:5.3.20]\n        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.20.jar:5.3.20]\n        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.20.jar:5.3.20]\n        at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.20.jar:5.3.20]\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.63.jar:4.0.FR]\n        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.20.jar:5.3.20]\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.63.jar:4.0.FR]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.63.jar:9.0.63]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.20.jar:5.3.20]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.20.jar:5.3.20]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.20.jar:5.3.20]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.63.jar:9.0.63]\n        at java.base/java.lang.Thread.run(Thread.java:833) ~[na:an]\n</code></pre>\n"},{"tags":["java","unit-testing","amazon-dynamodb","mockito"],"comments":[{"owner":{"account_id":19772972,"reputation":324,"user_id":14479601,"display_name":"Bend"},"score":0,"creation_date":1677595220,"post_id":75593139,"comment_id":133366374,"body_markdown":"Usually the goal of mocking is to `hard code` functionality during the tests. What functionality are you looking to hard-code? I am guessing you are looking to mock the dbMapper.save(***) since your DB may not exist at test time, is that correct?","body":"Usually the goal of mocking is to <code>hard code</code> functionality during the tests. What functionality are you looking to hard-code? I am guessing you are looking to mock the dbMapper.save(***) since your DB may not exist at test time, is that correct?"},{"owner":{"account_id":15776603,"reputation":3,"user_id":11384263,"display_name":"Dhushy_A"},"score":0,"creation_date":1677653334,"post_id":75593139,"comment_id":133378205,"body_markdown":"yes  I have to mock dbMapper @Bend","body":"yes  I have to mock dbMapper @Bend"}],"answers":[{"comments":[{"owner":{"account_id":15776603,"reputation":3,"user_id":11384263,"display_name":"Dhushy_A"},"score":0,"creation_date":1677659955,"post_id":75593830,"comment_id":133379634,"body_markdown":"Unable to add @VisibleForTesting in the actual class. Also I have to mock dbMapper in order to call dbMapper.save(existingJobExecution,\n            new TableNameOverride(String.format(STRING_CONCAT, CAPABILITY_CODE, envName, TABLE_NAME)).config()); . Please provide a solution for that.","body":"Unable to add @VisibleForTesting in the actual class. Also I have to mock dbMapper in order to call dbMapper.save(existingJobExecution,             new TableNameOverride(String.format(STRING_CONCAT, CAPABILITY_CODE, envName, TABLE_NAME)).config()); . Please provide a solution for that."},{"owner":{"account_id":19772972,"reputation":324,"user_id":14479601,"display_name":"Bend"},"score":0,"creation_date":1677770097,"post_id":75593830,"comment_id":133406609,"body_markdown":"@VisibleForTesting is in Google&#39;s Guava package, and has no functionality associated with it, it is just informative to future developers. So, not a big deal.\n\nedited answer with dbMapper.save mock","body":"@VisibleForTesting is in Google&#39;s Guava package, and has no functionality associated with it, it is just informative to future developers. So, not a big deal.  edited answer with dbMapper.save mock"}],"tags":[],"owner":{"account_id":19772972,"reputation":324,"user_id":14479601,"display_name":"Bend"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677855533,"creation_date":1677596948,"answer_id":75593830,"question_id":75593139,"body_markdown":"If you are looking to mock `saveOrUpdateToDynamoDb` so that method could be called during tests, without actually trying to connect to the DB, you could do something like this:\r\n\r\n```\r\npublic class Foo {\r\n\r\n    // @VisibleForTesting makes it obvious why this is package-private, not private\r\n    @VisibleForTesting\r\n    DynamoDBMapper dbMapper = ***\r\n\r\n    private void saveOrUpdateToDynamoDb(final JobExecution existingJobExecution) {\r\n        final JobExecution jobExecution = JobExecution.builder().jobMasterId(&quot;12&quot;).jobType(&quot;lamda&quot;)\r\n            .jobAction(&quot;Entry message load into MC&quot;).status(&quot;running&quot;).startDate(startTime).referenceId(&quot;225&quot;)\r\n            .payload(messageBody).ttlExpiry(5259600+Instant.now().getEpochSecond()).build();\r\n        saveOrUpdateToDynamoDb(jobExecution);\r\n    }\r\n\r\n    @VisibleForTesting\r\n    void saveOrUpdateToDynamoDb(final JobExecution existingJobExecution) {\r\n        dbMapper.save(existingJobExecution,\r\n            new TableNameOverride(String.format(STRING_CONCAT, CAPABILITY_CODE, envName, TABLE_NAME)).config());\r\n    }\r\n\r\n}\r\n```\r\n\r\nThen in your tests (which should be in the same package)\r\n```\r\n    @Test\r\n    void testXYZ() {\r\n        doNothing().when(foo.saveOrUpdateToDynamoDb(any(JobExecution.class)));\r\n\r\n        // test now\r\n    }\r\n\r\n    //OR\r\n    @Test\r\n    void testXYZ() {\r\n        Foo foo = new Foo();\r\n        foo.dbMapper = mock(DynamoDBMapper.class);\r\n\r\n        doNothing().when(foo.dbMapper.save(any(JobExecution.class), any(TableNameOverride.class)));\r\n\r\n        // test now\r\n    }\r\n\r\n```\r\n\r\nTo the calling code, this will look like a successful DB save.","title":"How to mock JobExecution.builder() using mockito and mock DynamoDBMapper for unit testing?","body":"<p>If you are looking to mock <code>saveOrUpdateToDynamoDb</code> so that method could be called during tests, without actually trying to connect to the DB, you could do something like this:</p>\n<pre><code>public class Foo {\n\n    // @VisibleForTesting makes it obvious why this is package-private, not private\n    @VisibleForTesting\n    DynamoDBMapper dbMapper = ***\n\n    private void saveOrUpdateToDynamoDb(final JobExecution existingJobExecution) {\n        final JobExecution jobExecution = JobExecution.builder().jobMasterId(&quot;12&quot;).jobType(&quot;lamda&quot;)\n            .jobAction(&quot;Entry message load into MC&quot;).status(&quot;running&quot;).startDate(startTime).referenceId(&quot;225&quot;)\n            .payload(messageBody).ttlExpiry(5259600+Instant.now().getEpochSecond()).build();\n        saveOrUpdateToDynamoDb(jobExecution);\n    }\n\n    @VisibleForTesting\n    void saveOrUpdateToDynamoDb(final JobExecution existingJobExecution) {\n        dbMapper.save(existingJobExecution,\n            new TableNameOverride(String.format(STRING_CONCAT, CAPABILITY_CODE, envName, TABLE_NAME)).config());\n    }\n\n}\n</code></pre>\n<p>Then in your tests (which should be in the same package)</p>\n<pre><code>    @Test\n    void testXYZ() {\n        doNothing().when(foo.saveOrUpdateToDynamoDb(any(JobExecution.class)));\n\n        // test now\n    }\n\n    //OR\n    @Test\n    void testXYZ() {\n        Foo foo = new Foo();\n        foo.dbMapper = mock(DynamoDBMapper.class);\n\n        doNothing().when(foo.dbMapper.save(any(JobExecution.class), any(TableNameOverride.class)));\n\n        // test now\n    }\n\n</code></pre>\n<p>To the calling code, this will look like a successful DB save.</p>\n"}],"owner":{"account_id":15776603,"reputation":3,"user_id":11384263,"display_name":"Dhushy_A"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677855533,"creation_date":1677593205,"question_id":75593139,"body_markdown":"I want to test below method using mockito. jobExecution object is saved in DynamoDB. Please refer the code below.\r\n\r\n    private void saveOrUpdateToDynamoDb(final JobExecution existingJobExecution) {\r\n    final JobExecution jobExecution = JobExecution.builder().jobMasterId(&quot;12&quot;).jobType(&quot;lamda&quot;)\r\n            \t\t\t.jobAction(&quot;Entry message load into MC&quot;).status(&quot;running&quot;).startDate(startTime).referenceId(&quot;225&quot;)\r\n            \t\t\t\t.payload(messageBody).ttlExpiry(5259600+Instant.now().getEpochSecond()).build();\r\n    saveOrUpdateToDynamoDb(jobExecution);\r\n    }\r\n\r\n    private void saveOrUpdateToDynamoDb(final JobExecution existingJobExecution) {\r\n    \tdbMapper.save(existingJobExecution,\r\n    \t\t\t\t\tnew TableNameOverride(String.format(STRING_CONCAT, CAPABILITY_CODE, envName, TABLE_NAME)).config());\r\n    }\r\n\r\n","title":"How to mock JobExecution.builder() using mockito and mock DynamoDBMapper for unit testing?","body":"<p>I want to test below method using mockito. jobExecution object is saved in DynamoDB. Please refer the code below.</p>\n<pre><code>private void saveOrUpdateToDynamoDb(final JobExecution existingJobExecution) {\nfinal JobExecution jobExecution = JobExecution.builder().jobMasterId(&quot;12&quot;).jobType(&quot;lamda&quot;)\n                    .jobAction(&quot;Entry message load into MC&quot;).status(&quot;running&quot;).startDate(startTime).referenceId(&quot;225&quot;)\n                        .payload(messageBody).ttlExpiry(5259600+Instant.now().getEpochSecond()).build();\nsaveOrUpdateToDynamoDb(jobExecution);\n}\n\nprivate void saveOrUpdateToDynamoDb(final JobExecution existingJobExecution) {\n    dbMapper.save(existingJobExecution,\n                    new TableNameOverride(String.format(STRING_CONCAT, CAPABILITY_CODE, envName, TABLE_NAME)).config());\n}\n</code></pre>\n"},{"tags":["java","debugging","webview","javafx","getelementbyid"],"comments":[{"owner":{"account_id":4824596,"reputation":10769,"user_id":3894351,"accept_rate":75,"display_name":"Elltz"},"score":0,"creation_date":1443471166,"post_id":32829596,"comment_id":53497825,"body_markdown":"post the whole error log sir","body":"post the whole error log sir"},{"owner":{"account_id":2599692,"reputation":89,"user_id":2252455,"accept_rate":71,"display_name":"lorigio"},"score":0,"creation_date":1443472848,"post_id":32829596,"comment_id":53498687,"body_markdown":"@Elltz it only says nullpointerexception and the number of the line","body":"@Elltz it only says nullpointerexception and the number of the line"},{"owner":{"account_id":329268,"reputation":1561,"user_id":652696,"accept_rate":75,"display_name":"dejuknow"},"score":0,"creation_date":1443476569,"post_id":32829596,"comment_id":53500435,"body_markdown":"So which line is it?","body":"So which line is it?"},{"owner":{"account_id":2599692,"reputation":89,"user_id":2252455,"accept_rate":71,"display_name":"lorigio"},"score":0,"creation_date":1443476651,"post_id":32829596,"comment_id":53500470,"body_markdown":"@dejuknow System.out.println(&quot;You are logged in as &quot; + el.getChildNodes().item(1).getChildNodes().item(1).getTextContent().trim());","body":"@dejuknow System.out.println(&quot;You are logged in as &quot; + el.getChildNodes().item(1).getChildNodes().item(1).getTextCo&zwnj;&#8203;ntent().trim());"}],"answers":[{"comments":[{"owner":{"account_id":2599692,"reputation":89,"user_id":2252455,"accept_rate":71,"display_name":"lorigio"},"score":0,"creation_date":1443478064,"post_id":32832443,"comment_id":53500990,"body_markdown":"The first example works fine outside the thread so i think it&#39;s not the code but something else happening when inside the thread. getDocument() inside the thread is not null but when i try to do the same thing i do outside it gives nullpointerexception","body":"The first example works fine outside the thread so i think it&#39;s not the code but something else happening when inside the thread. getDocument() inside the thread is not null but when i try to do the same thing i do outside it gives nullpointerexception"},{"owner":{"account_id":2599692,"reputation":89,"user_id":2252455,"accept_rate":71,"display_name":"lorigio"},"score":0,"creation_date":1443559295,"post_id":32832443,"comment_id":53540368,"body_markdown":"Element el = engine.getDocument().getElementById(&quot;nav-profile&quot;);                 \n\nthis returns null but outside the thread it works","body":"Element el = engine.getDocument().getElementById(&quot;nav-profile&quot;);                   this returns null but outside the thread it works"}],"tags":[],"owner":{"account_id":329268,"reputation":1561,"user_id":652696,"accept_rate":75,"display_name":"dejuknow"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1443477339,"creation_date":1443477339,"answer_id":32832443,"question_id":32829596,"body_markdown":"Either:\r\n\r\n1) `engine.getDocument().getElementById(&quot;nav-profile&quot;)` is returning null so your `Element el` is null.\r\n\r\nOR\r\n\r\n2) something in the chained call below is returning null, perhaps your `.item(1)` method (did you mean `.item(0)`)?\r\n\r\n    el.getChildNodes().item(1).getChildNodes().item(1).getTextContent()\r\n\r\n\r\nInstead of polling every five seconds, the better solution would be to attach a listener to the load worker and only check when the webpage has successfully loaded. See the API for an [example][1].\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/javafx/api/javafx/scene/web/WebEngine.html","title":"bug: javafx webengine getelementbyid return null inside a thread","body":"<p>Either:</p>\n\n<p>1) <code>engine.getDocument().getElementById(\"nav-profile\")</code> is returning null so your <code>Element el</code> is null.</p>\n\n<p>OR</p>\n\n<p>2) something in the chained call below is returning null, perhaps your <code>.item(1)</code> method (did you mean <code>.item(0)</code>)?</p>\n\n<pre><code>el.getChildNodes().item(1).getChildNodes().item(1).getTextContent()\n</code></pre>\n\n<p>Instead of polling every five seconds, the better solution would be to attach a listener to the load worker and only check when the webpage has successfully loaded. See the API for an <a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/scene/web/WebEngine.html\" rel=\"nofollow\">example</a>.</p>\n"},{"tags":[],"owner":{"account_id":4948185,"reputation":248,"user_id":3983013,"accept_rate":75,"display_name":"Piotr Michalczyk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677855056,"creation_date":1677855056,"answer_id":75628560,"question_id":32829596,"body_markdown":"From what I understood when it comes to dealing with JavaFX, the FX Application main thread is responsible for controlling JavaFX objects directly and other threads are disallowed. In this particular case this caused NullPointerException to be thrown, in other cases `&#39;Not on FX application thread&#39;` would probably be seen. To solve this problem the `Platform.runLater(runnableObject)` should be used.\r\n","title":"bug: javafx webengine getelementbyid return null inside a thread","body":"<p>From what I understood when it comes to dealing with JavaFX, the FX Application main thread is responsible for controlling JavaFX objects directly and other threads are disallowed. In this particular case this caused NullPointerException to be thrown, in other cases <code>'Not on FX application thread'</code> would probably be seen. To solve this problem the <code>Platform.runLater(runnableObject)</code> should be used.</p>\n"}],"owner":{"account_id":2599692,"reputation":89,"user_id":2252455,"accept_rate":71,"display_name":"lorigio"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1124,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1677855056,"creation_date":1443465287,"question_id":32829596,"body_markdown":"Edit: added screenshot \r\n\r\ni have a problem with javafx.\r\nI need to get a element from the document but when i write this code inside a thread it returns null on getelementbyid\r\n\r\nWorks:\r\n\r\n            scanprofilesbutton.setOnAction((ActionEvent e) -&gt; {\r\n            \r\n            if (engine.getLocation().contains(&quot;events&quot;)) {\r\n                if (engine.getDocument() == null) {\r\n                    System.out.println(&quot;null&quot;);\r\n                }\r\n               \r\n                Element el = engine.getDocument().getElementById(&quot;nav-profile&quot;);\r\n                System.out.println(&quot;You are logged in as &quot; + el.getChildNodes().item(1).getChildNodes().item(1).getTextContent().trim());\r\n            }            \r\n        });\r\n\r\nException (java.lang.NullPointerException):\r\n\r\n            scanprofilesbutton.setOnAction((ActionEvent e) -&gt; {\r\n            \r\n            Thread thread = new Thread() {\r\n                public void run() {\r\n                    while (true) {\r\n                        if (engine.getLocation().contains(&quot;events&quot;)) {\r\n                            if (engine.getDocument() == null) {\r\n                                System.out.println(&quot;null&quot;);\r\n                            }\r\n                          \r\n                            Element el = engine.getDocument().getElementById(&quot;nav-profile&quot;);\r\n                            Exception -&gt;&gt; System.out.println(&quot;You are logged in as &quot; + el.getChildNodes().item(1).getChildNodes().item(1).getTextContent().trim());                         \r\n                        } else {\r\n                            break;\r\n                        }\r\n                        try {\r\n                            Thread.sleep(5000);\r\n                        } catch (Exception e) {\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n\r\n            thread.start();\r\n        });\r\n\r\nI&#39;m stuck on this and i didn&#39;t found any solution. Thanks!\r\n\r\nscreenshot:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/yPLSy.png","title":"bug: javafx webengine getelementbyid return null inside a thread","body":"<p>Edit: added screenshot </p>\n\n<p>i have a problem with javafx.\nI need to get a element from the document but when i write this code inside a thread it returns null on getelementbyid</p>\n\n<p>Works:</p>\n\n<pre><code>        scanprofilesbutton.setOnAction((ActionEvent e) -&gt; {\n\n        if (engine.getLocation().contains(\"events\")) {\n            if (engine.getDocument() == null) {\n                System.out.println(\"null\");\n            }\n\n            Element el = engine.getDocument().getElementById(\"nav-profile\");\n            System.out.println(\"You are logged in as \" + el.getChildNodes().item(1).getChildNodes().item(1).getTextContent().trim());\n        }            \n    });\n</code></pre>\n\n<p>Exception (java.lang.NullPointerException):</p>\n\n<pre><code>        scanprofilesbutton.setOnAction((ActionEvent e) -&gt; {\n\n        Thread thread = new Thread() {\n            public void run() {\n                while (true) {\n                    if (engine.getLocation().contains(\"events\")) {\n                        if (engine.getDocument() == null) {\n                            System.out.println(\"null\");\n                        }\n\n                        Element el = engine.getDocument().getElementById(\"nav-profile\");\n                        Exception -&gt;&gt; System.out.println(\"You are logged in as \" + el.getChildNodes().item(1).getChildNodes().item(1).getTextContent().trim());                         \n                    } else {\n                        break;\n                    }\n                    try {\n                        Thread.sleep(5000);\n                    } catch (Exception e) {\n                    }\n                }\n            }\n        };\n\n        thread.start();\n    });\n</code></pre>\n\n<p>I'm stuck on this and i didn't found any solution. Thanks!</p>\n\n<p>screenshot:\n<a href=\"https://i.stack.imgur.com/yPLSy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yPLSy.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","spring-boot","java-8"],"comments":[{"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"score":2,"creation_date":1677851852,"post_id":75627970,"comment_id":133423841,"body_markdown":"you mean `|| emp.getEmpEmailId().equals(empEmailId)` ? no need to use `emp-&gt;` in the second part of the condition.","body":"you mean <code>|| emp.getEmpEmailId().equals(empEmailId)</code> ? no need to use <code>emp-&gt;</code> in the second part of the condition."}],"answers":[{"tags":[],"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677854128,"creation_date":1677854128,"answer_id":75628396,"question_id":75627970,"body_markdown":"A simple solution will be to use the simple &#39;or&#39; expression:\r\n\r\n    @Test\r\n\tvoid test() {\r\n\t\tvar allData = List.of(\r\n\t\t\tnew Employee(&quot;john&quot;, &quot;a@b.c&quot;),\r\n\t\t\tnew Employee(&quot;doe&quot;, &quot;a@b.c&quot;),\r\n\t\t\tnew Employee(&quot;jane&quot;, &quot;x@y.z&quot;)\r\n\t\t);\r\n\r\n\t\tvar filtered = allData.stream()\r\n\t\t\t.filter(emp -&gt;  &quot;jane&quot;.equals(emp.empName()) || &quot;x@y.z&quot;.equals(emp.empName()))\r\n\t\t    .collect(Collectors.toList());\r\n    }\r\n\r\nIf the filtering criteria is describing something specific about this `employee`, you can encapsulate it inside the class, like this:\r\n\r\n    record Employee (String empName, String empEmailId) {\r\n    \tprivate boolean hasNameOrEmail(String name, String email) {\r\n    \t\treturn name.equals(this.empName) || email.equals(this.empEmailId);\r\n    \t}\r\n    }\r\n    \r\n    @Test\r\n\tvoid test() {\r\n        // ...\r\n        var filtered = allData.stream()\r\n\t\t\t.filter(emp -&gt; emp.hasNameOrEmail(&quot;jane&quot;, &quot;x@y.z&quot;))\r\n\t\t    .collect(Collectors.toList());\r\n    }\r\n\r\nLastly, if you want to create something more generic, you can declare different `Predicate` objects that can be chained with `.or()` :\r\n\r\n    public Predicate&lt;Employee&gt; hasName(String lookingFor) {\r\n    \treturn emp -&gt; lookingFor.equals(emp.empName());\r\n    }\r\n    public Predicate&lt;Employee&gt; hasEmail(String lookingFor) {\r\n    \treturn emp -&gt; lookingFor.equals(emp.empEmailId());\r\n    }\r\n\r\n    @Test\r\n    void test() {\r\n    \t// ...\t\t\r\n    \tvar filtered = allData.stream()\r\n    \t\t.filter(hasName(&quot;jane&quot;).or(hasEmail(&quot;x@y.z&quot;)))\r\n    \t\t.collect(Collectors.toList());\r\n    }\r\n","title":"how to use multiple filter using OR conditon in java 8","body":"<p>A simple solution will be to use the simple 'or' expression:</p>\n<pre><code>@Test\nvoid test() {\n    var allData = List.of(\n        new Employee(&quot;john&quot;, &quot;a@b.c&quot;),\n        new Employee(&quot;doe&quot;, &quot;a@b.c&quot;),\n        new Employee(&quot;jane&quot;, &quot;x@y.z&quot;)\n    );\n\n    var filtered = allData.stream()\n        .filter(emp -&gt;  &quot;jane&quot;.equals(emp.empName()) || &quot;x@y.z&quot;.equals(emp.empName()))\n        .collect(Collectors.toList());\n}\n</code></pre>\n<p>If the filtering criteria is describing something specific about this <code>employee</code>, you can encapsulate it inside the class, like this:</p>\n<pre><code>record Employee (String empName, String empEmailId) {\n    private boolean hasNameOrEmail(String name, String email) {\n        return name.equals(this.empName) || email.equals(this.empEmailId);\n    }\n}\n\n@Test\nvoid test() {\n    // ...\n    var filtered = allData.stream()\n        .filter(emp -&gt; emp.hasNameOrEmail(&quot;jane&quot;, &quot;x@y.z&quot;))\n        .collect(Collectors.toList());\n}\n</code></pre>\n<p>Lastly, if you want to create something more generic, you can declare different <code>Predicate</code> objects that can be chained with <code>.or()</code> :</p>\n<pre><code>public Predicate&lt;Employee&gt; hasName(String lookingFor) {\n    return emp -&gt; lookingFor.equals(emp.empName());\n}\npublic Predicate&lt;Employee&gt; hasEmail(String lookingFor) {\n    return emp -&gt; lookingFor.equals(emp.empEmailId());\n}\n\n@Test\nvoid test() {\n    // ...      \n    var filtered = allData.stream()\n        .filter(hasName(&quot;jane&quot;).or(hasEmail(&quot;x@y.z&quot;)))\n        .collect(Collectors.toList());\n}\n</code></pre>\n"}],"owner":{"account_id":27927637,"reputation":1,"user_id":21326393,"display_name":"522_Tejas Gundgal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1677924023,"answer_count":1,"score":-1,"last_activity_date":1677854128,"creation_date":1677851692,"question_id":75627970,"body_markdown":"how to use multiple filter using OR conditon in java 8\r\n\r\n    return getAllData().stream()\r\n                .filter(emp -&gt; emp.getEmpName().equals(empName) &amp;&amp; emp-&gt;emp.getEmpEmailId().equals(empEmailId))\r\n                .collect(Collectors.toList());\r\n\r\n\r\ni&#39;ve tried this butnits not accepting my .getEmailId()\r\n\r\ncan anyone please help\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"how to use multiple filter using OR conditon in java 8","body":"<p>how to use multiple filter using OR conditon in java 8</p>\n<pre><code>return getAllData().stream()\n            .filter(emp -&gt; emp.getEmpName().equals(empName) &amp;&amp; emp-&gt;emp.getEmpEmailId().equals(empEmailId))\n            .collect(Collectors.toList());\n</code></pre>\n<p>i've tried this butnits not accepting my .getEmailId()</p>\n<p>can anyone please help</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9621,"page":604,"page_size":100}
