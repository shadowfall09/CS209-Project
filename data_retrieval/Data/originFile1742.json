{"items":[{"tags":["java","android","android-cardview"],"comments":[{"owner":{"account_id":3477700,"reputation":42367,"user_id":2910520,"accept_rate":100,"display_name":"MatPag"},"score":0,"creation_date":1627313775,"post_id":68532526,"comment_id":121116994,"body_markdown":"To me this has nothing to do with CardView, the problem in the screenshot seems related to your ImageView or similar where you show your author icon","body":"To me this has nothing to do with CardView, the problem in the screenshot seems related to your ImageView or similar where you show your author icon"},{"owner":{"account_id":18444627,"reputation":67,"user_id":14352720,"display_name":"Umair Anjum"},"score":0,"creation_date":1627314319,"post_id":68532526,"comment_id":121117275,"body_markdown":"Use any roudedImageview to make circle like `implementation &#39;com.makeramen:roundedimageview:2.3.0&#39;` rather than CardView. Explore [Liberary Link](https://github.com/vinc3m1/RoundedImageView)","body":"Use any roudedImageview to make circle like <code>implementation &#39;com.makeramen:roundedimageview:2.3.0&#39;</code> rather than CardView. Explore <a href=\"https://github.com/vinc3m1/RoundedImageView\" rel=\"nofollow noreferrer\">Liberary Link</a>"},{"owner":{"account_id":2149059,"reputation":3106,"user_id":1905965,"display_name":"Amin"},"score":0,"creation_date":1627334504,"post_id":68532526,"comment_id":121124194,"body_markdown":"It works on most devices, actually the only device I&#39;ve seen this behavior was Huawei Mate 9 running android 7 (I don&#39;t know what&#39;s wrong with Huawei and Xiamo they&#39;re always annoying -_-). I managed to fix that by setting the corner to half of the height in code","body":"It works on most devices, actually the only device I&#39;ve seen this behavior was Huawei Mate 9 running android 7 (I don&#39;t know what&#39;s wrong with Huawei and Xiamo they&#39;re always annoying -_-). I managed to fix that by setting the corner to half of the height in code"}],"answers":[{"tags":[],"owner":{"account_id":4221425,"reputation":336,"user_id":3456124,"display_name":"kirkadev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627317630,"creation_date":1627316683,"answer_id":68533346,"question_id":68532526,"body_markdown":"Very often, the Glide library is used to load images. This library can help round the edges as follows\r\n\r\n    Glide.with(context)\r\n            .load(url)\r\n            .circleCrop()\r\n            .into(imageView)\r\n\r\nMake friends with this library and you will be happy. Not only does it help the image to take shape, but it also uses memory correctly https://github.com/bumptech/glide\r\n\r\nP.S: In my opinion, using CardView is very limiting for you. \r\n\r\nYou could use as a root element for example a Constraint Layout and as a background use a rounded shape as you like (rectangle) and place your image inside the layout.\r\n\r\nTo hold the shape I often using the next attribute (an example is below):\r\napp:layout_constraintDimensionRatio=&quot;W,1:2&quot;.\r\n\r\nIn your case ratio must be 1:1 because it is circle not ellipse, then you can use \r\n `app:layout_constraintDimensionRatio=&quot;W,1:1&quot;` or `app:layout_constraintDimensionRatio=&quot;H,1:1&quot;`\r\n\r\nI&#39;m not sure if this will work in CardView, but it works well in ConstraintLayout.","title":"Android - CardView becomes a diamond shape because radius too large","body":"<p>Very often, the Glide library is used to load images. This library can help round the edges as follows</p>\n<pre><code>Glide.with(context)\n        .load(url)\n        .circleCrop()\n        .into(imageView)\n</code></pre>\n<p>Make friends with this library and you will be happy. Not only does it help the image to take shape, but it also uses memory correctly <a href=\"https://github.com/bumptech/glide\" rel=\"nofollow noreferrer\">https://github.com/bumptech/glide</a></p>\n<p>P.S: In my opinion, using CardView is very limiting for you.</p>\n<p>You could use as a root element for example a Constraint Layout and as a background use a rounded shape as you like (rectangle) and place your image inside the layout.</p>\n<p>To hold the shape I often using the next attribute (an example is below):\napp:layout_constraintDimensionRatio=&quot;W,1:2&quot;.</p>\n<p>In your case ratio must be 1:1 because it is circle not ellipse, then you can use\n<code>app:layout_constraintDimensionRatio=&quot;W,1:1&quot;</code> or <code>app:layout_constraintDimensionRatio=&quot;H,1:1&quot;</code></p>\n<p>I'm not sure if this will work in CardView, but it works well in ConstraintLayout.</p>\n"},{"tags":[],"owner":{"account_id":16484526,"reputation":93,"user_id":11910303,"display_name":"Shubham K."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640092889,"creation_date":1640092889,"answer_id":70436160,"question_id":68532526,"body_markdown":"Here is one of the common and most simple method to make the image get a circular border using card view in android in XML\r\n\r\nfirst create a card view inside your XML and inside that create a image view with exactly 1dp less then the card view in both width and height and then try to adjust the cardCornerRadius as per your requirements, that&#39;s it it is as simple as that.\r\n\r\nI&#39;m using ```androidx.cardview.widget.CardView``` here.\r\n\r\n```\r\n&lt;androidx.cardview.widget.CardView\r\n            android:layout_width=&quot;70dp&quot;\r\n            android:layout_height=&quot;70dp&quot;\r\n            app:cardCornerRadius=&quot;35dp&quot;\r\n            android:layout_centerHorizontal=&quot;true&quot;\r\n            android:layout_centerVertical=&quot;true&quot;&gt;\r\n\r\n            &lt;ImageView\r\n                android:id=&quot;@+id/rounded_profile_img&quot;\r\n                android:layout_width=&quot;69dp&quot;\r\n                android:layout_height=&quot;69dp&quot;\r\n                android:scaleType=&quot;centerCrop&quot;/&gt;\r\n\r\n        &lt;/androidx.cardview.widget.CardView&gt;\r\n\r\n```\r\nThank you hope y&#39;ll like it and it is helpful for everyone.","title":"Android - CardView becomes a diamond shape because radius too large","body":"<p>Here is one of the common and most simple method to make the image get a circular border using card view in android in XML</p>\n<p>first create a card view inside your XML and inside that create a image view with exactly 1dp less then the card view in both width and height and then try to adjust the cardCornerRadius as per your requirements, that's it it is as simple as that.</p>\n<p>I'm using <code>androidx.cardview.widget.CardView</code> here.</p>\n<pre><code>&lt;androidx.cardview.widget.CardView\n            android:layout_width=&quot;70dp&quot;\n            android:layout_height=&quot;70dp&quot;\n            app:cardCornerRadius=&quot;35dp&quot;\n            android:layout_centerHorizontal=&quot;true&quot;\n            android:layout_centerVertical=&quot;true&quot;&gt;\n\n            &lt;ImageView\n                android:id=&quot;@+id/rounded_profile_img&quot;\n                android:layout_width=&quot;69dp&quot;\n                android:layout_height=&quot;69dp&quot;\n                android:scaleType=&quot;centerCrop&quot;/&gt;\n\n        &lt;/androidx.cardview.widget.CardView&gt;\n\n</code></pre>\n<p>Thank you hope y'll like it and it is helpful for everyone.</p>\n"}],"owner":{"account_id":21848852,"reputation":87,"user_id":16141229,"display_name":"Ayaka_Ago"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":332,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1640092889,"creation_date":1627313086,"question_id":68532526,"body_markdown":"I&#39;m using ```android.widget.CardView``` in my application.\r\n\r\n[![CardView in my device][1]][1]\r\n\r\nIn my Android 11 device, when radius is larger than the View, it will automatically adjust to half the size of the View.(I don’t know which version this was adjusted)\r\n\r\n[![CardView in lower system version][2]][2]\r\n\r\nIn the lower system version(I use Android 7.1 to test), CardView will turn into a diamond shape when the radius is larger than the View.\r\n\r\nAnyone know why and how to solve? Thx\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1sCKn.jpg\r\n  [2]: https://i.stack.imgur.com/kqKon.jpg","title":"Android - CardView becomes a diamond shape because radius too large","body":"<p>I'm using <code>android.widget.CardView</code> in my application.</p>\n<p><a href=\"https://i.stack.imgur.com/1sCKn.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1sCKn.jpg\" alt=\"CardView in my device\" /></a></p>\n<p>In my Android 11 device, when radius is larger than the View, it will automatically adjust to half the size of the View.(I don’t know which version this was adjusted)</p>\n<p><a href=\"https://i.stack.imgur.com/kqKon.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kqKon.jpg\" alt=\"CardView in lower system version\" /></a></p>\n<p>In the lower system version(I use Android 7.1 to test), CardView will turn into a diamond shape when the radius is larger than the View.</p>\n<p>Anyone know why and how to solve? Thx</p>\n"},{"tags":["java","algorithm","graph"],"comments":[{"owner":{"account_id":20711679,"reputation":209,"user_id":15208175,"display_name":"Drogheda"},"score":3,"creation_date":1640049101,"post_id":70429643,"comment_id":124498451,"body_markdown":"It seems to be some kind of homework. Could you provide your code you made so far?","body":"It seems to be some kind of homework. Could you provide your code you made so far?"},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":2,"creation_date":1640049260,"post_id":70429643,"comment_id":124498468,"body_markdown":"Please read [ask].  It is a basic requirement here that you show the code you&#39;ve written and explain what isn&#39;t working.  We don&#39;t do you homework for you.","body":"Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>.  It is a basic requirement here that you show the code you&#39;ve written and explain what isn&#39;t working.  We don&#39;t do you homework for you."},{"owner":{"account_id":23697010,"reputation":9,"user_id":17720600,"display_name":"hello123hhf"},"score":0,"creation_date":1640049878,"post_id":70429643,"comment_id":124498562,"body_markdown":"I have attached the code which I have made until now. I didn&#39;t attach it in the first place because I&#39;m pretty sure that I am approaching it the wrong way.","body":"I have attached the code which I have made until now. I didn&#39;t attach it in the first place because I&#39;m pretty sure that I am approaching it the wrong way."},{"owner":{"account_id":14774504,"reputation":4698,"user_id":10669875,"display_name":"wovano"},"score":0,"creation_date":1640092967,"post_id":70429643,"comment_id":124509308,"body_markdown":"Also see [How do I ask and answer homework questions?](https://meta.stackoverflow.com/questions/334822/how-do-i-ask-and-answer-homework-questions)","body":"Also see <a href=\"https://meta.stackoverflow.com/questions/334822/how-do-i-ask-and-answer-homework-questions\">How do I ask and answer homework questions?</a>"}],"answers":[{"tags":[],"owner":{"account_id":14826207,"reputation":534,"user_id":10707092,"display_name":"Alois Christen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640090136,"creation_date":1640090136,"answer_id":70435576,"question_id":70429643,"body_markdown":"There are a few mistakes I spotted in your function :\r\n\r\nThe conditions to check if you&#39;re out of bounds should not need to check if there is an H : out of bound means there is nothing, so `pos[0] == graph.length` should be enough to stop.\r\n\r\nThe condition to check if there is an H blocking the way is also wrong : to be stopped, you would need to have both an H right and below you. Which mean you would still explore some path passing through H&#39;s. What you could do is to stop if you&#39;re currently on a H : `if(graph[pos[0]][pos[1]] == &#39;H&#39;)`\r\n\r\nThe recursive calls always increment turns. Are turns the number of steps you are allowed to make, or the number of times you can change direction ? If it&#39;s the latter, you need to pass the current direction in the call, and only increment if you change direction. The original call is a little bit trickier, as you don&#39;t really have a direction for the first step.\r\n\r\nA global observation is that you seems to mix the logical &quot;AND&quot; operator (&amp;&amp;). Maybe I&#39;m wrong, but a quick review could help you, because the &quot;OR&quot; seems more logical there.","title":"Algorithm to find the number of paths you can take in a coordinate plane","body":"<p>There are a few mistakes I spotted in your function :</p>\n<p>The conditions to check if you're out of bounds should not need to check if there is an H : out of bound means there is nothing, so <code>pos[0] == graph.length</code> should be enough to stop.</p>\n<p>The condition to check if there is an H blocking the way is also wrong : to be stopped, you would need to have both an H right and below you. Which mean you would still explore some path passing through H's. What you could do is to stop if you're currently on a H : <code>if(graph[pos[0]][pos[1]] == 'H')</code></p>\n<p>The recursive calls always increment turns. Are turns the number of steps you are allowed to make, or the number of times you can change direction ? If it's the latter, you need to pass the current direction in the call, and only increment if you change direction. The original call is a little bit trickier, as you don't really have a direction for the first step.</p>\n<p>A global observation is that you seems to mix the logical &quot;AND&quot; operator (&amp;&amp;). Maybe I'm wrong, but a quick review could help you, because the &quot;OR&quot; seems more logical there.</p>\n"},{"tags":[],"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640092633,"creation_date":1640092633,"answer_id":70436109,"question_id":70429643,"body_markdown":"Yes. Assuming the number of turns is the number of times you change direction, you need to keep track of the direction and only increment `turns` when the direction changes:\r\n\r\n    public static void step(char[][] graph, int[] pos, int turns, int max,\r\n            char dir)\r\n    {\r\n        if(turns &gt; max) return;\r\n        else if(pos[0] == graph.length-1 &amp;&amp; pos[1]==graph.length-1)\r\n        {\r\n            count++;\r\n            return;\r\n        }\r\n        if(pos[0] &lt; graph.length &amp;&amp; pos[1] &lt; graph.length\r\n                &amp;&amp; graph[pos[0]][pos[1]] != &#39;H&#39;) {\r\n            step(graph, new int[]{pos[0]+1, pos[1]}, dir != &#39;R&#39; ? turns : turns+1, max, &#39;D&#39;);\r\n            step(graph, new int[]{pos[0], pos[1]+1}, dir != &#39;D&#39; ? turns : turns+1, max, &#39;R&#39;);\r\n        }\r\n    }    \r\n\r\nThe initial call would pass any character that is neither `&#39;D&#39;` nor `&#39;R&#39;`:\r\n\r\n        step(graph, new int[]{0, 0}, 0, t, &#39;?&#39;);\r\n\r\n\r\n","title":"Algorithm to find the number of paths you can take in a coordinate plane","body":"<p>Yes. Assuming the number of turns is the number of times you change direction, you need to keep track of the direction and only increment <code>turns</code> when the direction changes:</p>\n<pre><code>public static void step(char[][] graph, int[] pos, int turns, int max,\n        char dir)\n{\n    if(turns &gt; max) return;\n    else if(pos[0] == graph.length-1 &amp;&amp; pos[1]==graph.length-1)\n    {\n        count++;\n        return;\n    }\n    if(pos[0] &lt; graph.length &amp;&amp; pos[1] &lt; graph.length\n            &amp;&amp; graph[pos[0]][pos[1]] != 'H') {\n        step(graph, new int[]{pos[0]+1, pos[1]}, dir != 'R' ? turns : turns+1, max, 'D');\n        step(graph, new int[]{pos[0], pos[1]+1}, dir != 'D' ? turns : turns+1, max, 'R');\n    }\n}    \n</code></pre>\n<p>The initial call would pass any character that is neither <code>'D'</code> nor <code>'R'</code>:</p>\n<pre><code>    step(graph, new int[]{0, 0}, 0, t, '?');\n</code></pre>\n"}],"owner":{"account_id":23697010,"reputation":9,"user_id":17720600,"display_name":"hello123hhf"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":2,"score":-2,"last_activity_date":1640092633,"creation_date":1640048927,"question_id":70429643,"body_markdown":"You&#39;re given a square of NxN (2 &lt;= N &lt;= 50) dots, but some of the dots can be H (blocked), meaning that you cannot go on them. You are also given T (1 &lt;= T &lt;= 3), the amount of turns maximum that you are allowed to make. You start at the top left of the graph, and you have to make it to the bottom right of the graph. You can only move down or to the right. Here are three examples of possible graphs. \r\n```\r\nN = 3, T = 3\r\n...\r\n.H.\r\n...\r\n\r\nOutput: 2\r\n```\r\n\r\n```\r\nN = 4, T = 3\r\n...H\r\n.H..\r\n....\r\nH...\r\n\r\nOutput: 6\r\n```\r\n```\r\nN = 3, T = 2\r\n.HH\r\nHHH\r\nHH.\r\n\r\nOutput: 0\r\n```\r\n\r\nD means move down and R means move right. For the first one the two ways are DDRR and RRDD. For the second one, the six ways are DDRDRR, DDRRDR, DDRRRD, RRDDDR, RRDDRD, and RRDRDD. For the last one, there are no ways to make it to the bottom right. \r\n\r\nOne thing I have thought is that it might be possible to solve this with DFS but I don&#39;t know how to implement it for this problem. Any help would be utmost helpful.\r\n\r\nI have tried this recursive method, but I&#39;m pretty sure I&#39;m completely going the wrong way about it.\r\n\r\n```\r\npublic static void step(char[][] graph, int[] pos, int turns, int max)\r\n{\r\n\tif(turns &gt; max) return;\r\n\telse if(pos[0] == graph.length-1 &amp;&amp; pos[1]==graph.length-1)\r\n\t{\r\n\t\tcount++;\r\n\t\treturn;\r\n\t}\r\n\telse if(pos[0] == graph.length &amp;&amp; graph[pos[0]+1][pos[1]] == &#39;H&#39;) return;\r\n\telse if(pos[1] == graph.length &amp;&amp; graph[pos[0]][pos[1]+1] == &#39;H&#39;) return;\r\n\telse if(graph[pos[0]+1][pos[1]] == &#39;H&#39; &amp;&amp; graph[pos[0]][pos[1]+1] == &#39;H&#39;) return;\r\n\telse {\r\n\t\tstep(graph, new int[]{pos[0]+1, pos[1]}, turns+1, max);\r\n\t\tstep(graph, new int[]{pos[0], pos[1]+1}, turns+1, max);\r\n\t}\r\n}\r\n```","title":"Algorithm to find the number of paths you can take in a coordinate plane","body":"<p>You're given a square of NxN (2 &lt;= N &lt;= 50) dots, but some of the dots can be H (blocked), meaning that you cannot go on them. You are also given T (1 &lt;= T &lt;= 3), the amount of turns maximum that you are allowed to make. You start at the top left of the graph, and you have to make it to the bottom right of the graph. You can only move down or to the right. Here are three examples of possible graphs.</p>\n<pre><code>N = 3, T = 3\n...\n.H.\n...\n\nOutput: 2\n</code></pre>\n<pre><code>N = 4, T = 3\n...H\n.H..\n....\nH...\n\nOutput: 6\n</code></pre>\n<pre><code>N = 3, T = 2\n.HH\nHHH\nHH.\n\nOutput: 0\n</code></pre>\n<p>D means move down and R means move right. For the first one the two ways are DDRR and RRDD. For the second one, the six ways are DDRDRR, DDRRDR, DDRRRD, RRDDDR, RRDDRD, and RRDRDD. For the last one, there are no ways to make it to the bottom right.</p>\n<p>One thing I have thought is that it might be possible to solve this with DFS but I don't know how to implement it for this problem. Any help would be utmost helpful.</p>\n<p>I have tried this recursive method, but I'm pretty sure I'm completely going the wrong way about it.</p>\n<pre><code>public static void step(char[][] graph, int[] pos, int turns, int max)\n{\n    if(turns &gt; max) return;\n    else if(pos[0] == graph.length-1 &amp;&amp; pos[1]==graph.length-1)\n    {\n        count++;\n        return;\n    }\n    else if(pos[0] == graph.length &amp;&amp; graph[pos[0]+1][pos[1]] == 'H') return;\n    else if(pos[1] == graph.length &amp;&amp; graph[pos[0]][pos[1]+1] == 'H') return;\n    else if(graph[pos[0]+1][pos[1]] == 'H' &amp;&amp; graph[pos[0]][pos[1]+1] == 'H') return;\n    else {\n        step(graph, new int[]{pos[0]+1, pos[1]}, turns+1, max);\n        step(graph, new int[]{pos[0], pos[1]+1}, turns+1, max);\n    }\n}\n</code></pre>\n"},{"tags":["java","eclipse","eclipse-plugin","nattable"],"answers":[{"tags":[],"owner":{"account_id":3538064,"reputation":4183,"user_id":2955861,"display_name":"Dirk Fauth"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640092606,"creation_date":1640092606,"answer_id":70436104,"question_id":70431566,"body_markdown":"Well you don&#39;t show how you are doing things, so I can&#39;t tell any details. But to answer your question, yes I think you are doing things wrong.\r\n\r\nIn short, if you have a state applied according to a column like sorting or filtering and you change the underlying data structure, things will break as the states does match the structure anymore. Not sure why you think this should work automatically. \r\n\r\nIf you change the underlying data structure you need to clear structure based states in advance. \r\n\r\nThere is an example in the NatTable examples application that shows how to change the data provider dynamically. Not sure if the example covers the clearing of states or if this is handled automatically when you are doing things correctly. ","title":"What is the correct way to dynamically change columns and data model in nattable?","body":"<p>Well you don't show how you are doing things, so I can't tell any details. But to answer your question, yes I think you are doing things wrong.</p>\n<p>In short, if you have a state applied according to a column like sorting or filtering and you change the underlying data structure, things will break as the states does match the structure anymore. Not sure why you think this should work automatically.</p>\n<p>If you change the underlying data structure you need to clear structure based states in advance.</p>\n<p>There is an example in the NatTable examples application that shows how to change the data provider dynamically. Not sure if the example covers the clearing of states or if this is handled automatically when you are doing things correctly.</p>\n"}],"owner":{"account_id":22957009,"reputation":11,"user_id":17087439,"display_name":"dammuck"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70436104,"answer_count":1,"score":0,"last_activity_date":1640092606,"creation_date":1640069058,"question_id":70431566,"body_markdown":"When changing the number of columns and rows of natTable\r\n  After clearing the column list of DataProvider, create a new column item and change the column item list of columnPropertyAccessor.\r\n  Then, put the new data model into the filter list and refresh it.\r\n  \r\n  **When the 7-column nattable is sorted (ascending or descending) and clicked, it is changed to a different data model (4 columns) as above, but if it is sorted,** &quot;**CurrentModificationException**&quot; and &quot;**IndezxOutOfBoundException**&quot; occur.\r\n  If you exchange data models without sorting, there is no problem.\r\n  I don&#39;t know which part is causing it.\r\n  \r\n  Is my way of replacing the filter list wrong when changing the data model?\r\n  If anyone has encountered a similar error and has solved it, please help.","title":"What is the correct way to dynamically change columns and data model in nattable?","body":"<p>When changing the number of columns and rows of natTable\nAfter clearing the column list of DataProvider, create a new column item and change the column item list of columnPropertyAccessor.\nThen, put the new data model into the filter list and refresh it.</p>\n<p><strong>When the 7-column nattable is sorted (ascending or descending) and clicked, it is changed to a different data model (4 columns) as above, but if it is sorted,</strong> &quot;<strong>CurrentModificationException</strong>&quot; and &quot;<strong>IndezxOutOfBoundException</strong>&quot; occur.\nIf you exchange data models without sorting, there is no problem.\nI don't know which part is causing it.</p>\n<p>Is my way of replacing the filter list wrong when changing the data model?\nIf anyone has encountered a similar error and has solved it, please help.</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1639779797,"post_id":70398878,"comment_id":124444576,"body_markdown":"Looking at your pom file I would recommend starting over from the very minimal and adding as needed. Right now you have many dependencies that are already included in the spring-boot collections or you are mixing matching spring-boot with spring dependencies. Another thing that I would recommend is moving out from the XML configuration (mostly spring) to use just the either configuration properties or `@configuration` class. Since you mention that this is a new project it will be good to start it with a very good concise set of dependencies for spring boot alone.","body":"Looking at your pom file I would recommend starting over from the very minimal and adding as needed. Right now you have many dependencies that are already included in the spring-boot collections or you are mixing matching spring-boot with spring dependencies. Another thing that I would recommend is moving out from the XML configuration (mostly spring) to use just the either configuration properties or <code>@configuration</code> class. Since you mention that this is a new project it will be good to start it with a very good concise set of dependencies for spring boot alone."},{"owner":{"account_id":7547772,"reputation":8583,"user_id":5730279,"display_name":"hc_dev"},"score":0,"creation_date":1639821102,"post_id":70398878,"comment_id":124449781,"body_markdown":"Did you research for the error `NoClassDefFoundError: org/springframework/core/metrics/ApplicationStartup` ? For example [similar question here](https://stackoverflow.com/questions/65046056/spring-boot-classnotfoundexception-org-springframework-core-metrics-applications) or [related Spring issue](https://github.com/spring-projects/spring-boot/issues/24880). Do those solutions help?","body":"Did you research for the error <code>NoClassDefFoundError: org&#47;springframework&#47;core&#47;metrics&#47;ApplicationStartup</code> ? For example <a href=\"https://stackoverflow.com/questions/65046056/spring-boot-classnotfoundexception-org-springframework-core-metrics-applications\">similar question here</a> or <a href=\"https://github.com/spring-projects/spring-boot/issues/24880\" rel=\"nofollow noreferrer\">related Spring issue</a>. Do those solutions help?"},{"owner":{"account_id":10356917,"reputation":1187,"user_id":7638553,"accept_rate":64,"display_name":"Poonkodi Sivapragasam"},"score":0,"creation_date":1639872218,"post_id":70398878,"comment_id":124459867,"body_markdown":"I tried those. unfortunately those did not work for my case.","body":"I tried those. unfortunately those did not work for my case."},{"owner":{"account_id":18536445,"reputation":1099,"user_id":13506001,"display_name":"Rohith V"},"score":0,"creation_date":1640095064,"post_id":70398878,"comment_id":124510165,"body_markdown":"What is this class `StarhubGrdApplication`","body":"What is this class <code>StarhubGrdApplication</code>"}],"owner":{"account_id":10356917,"reputation":1187,"user_id":7638553,"accept_rate":64,"display_name":"Poonkodi Sivapragasam"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5265,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640092558,"creation_date":1639775089,"question_id":70398878,"body_markdown":"I am converting a jboss app to Springboot application. I added all the spring boot dependencies in the pom file. The application is building fine with no error. But when i run the Springboot app locally in intellij, i am getting the below error.\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/springframework/core/metrics/ApplicationStartup\r\n    \tat org.springframework.boot.SpringApplication.&lt;init&gt;(SpringApplication.java:253)\r\n    \tat org.springframework.boot.SpringApplication.&lt;init&gt;(SpringApplication.java:266)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1332)\r\n    \tat com.americanexpress.starhub.common.config.StarhubGrdApplication.main(StarhubGrdApplication.java:30)\r\n    Caused by: java.lang.ClassNotFoundException: org.springframework.core.metrics.ApplicationStartup\r\n    \tat java.net.URLClassLoader.findClass(URLClassLoader.java:382)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n    \t... 5 more\r\n\r\nHere is my main starter class.\r\n\r\n    @SpringBootApplication\r\n    @PropertySource({\r\n      &quot;classpath:cassandra-connection-ipc1-e0.properties&quot;,\r\n      &quot;classpath:appCrypto-${spring.profiles.active}.properties&quot;,\r\n      &quot;classpath:dataload_${spring.profiles.active}.properties&quot;\r\n    })\r\n    @ComponentScan(basePackages = &quot;com.company.app&quot;)\r\n    @ImportResource(&quot;classpath:springbatch-context.xml&quot;)\r\n    public class SGApplication {\r\n      private static Logger LOGGER = LoggerFactory.getLogger(SGApplication.class);\r\n      private static ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);\r\n    \r\n      public static void main(String[] args) {\r\n        SpringApplication.run(SGApplication.class, args);\r\n        Runnable command =\r\n            () -&gt;\r\n                LOGGER.info(\r\n                    &quot;SGApplication app is up and running {}&quot;, System.currentTimeMillis());\r\n    \r\n        scheduler.scheduleWithFixedDelay(command, 5, 5, TimeUnit.MINUTES);\r\n      }\r\n    }\r\n\r\nI have below dependencies in my pom file.\r\n\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n                &lt;version&gt;2.4.9&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\nAny inputs on how to fix this?\r\n\r\nAdding the whole pom file in here\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;start-class&gt;com.americanexpress.starhub.common.config.StarhubGrdApplication&lt;/start-class&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;com.aexp.starhub&lt;/groupId&gt;\r\n        &lt;artifactId&gt;starhub-parent-pom&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;artifactId&gt;starhub-grd&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    &lt;name&gt;starhub-grd&lt;/name&gt;\r\n    &lt;description&gt;starhub grd&lt;/description&gt;\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.boot.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-batch&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;log4j-to-slf4j&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.retry&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-retry&lt;/artifactId&gt;\r\n            &lt;version&gt;1.2.5.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;version&gt;RELEASE&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n            &lt;version&gt;RELEASE&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.21.0&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mockito-junit-jupiter&lt;/artifactId&gt;\r\n            &lt;version&gt;2.23.0&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.datastax.cassandra&lt;/groupId&gt;\r\n            &lt;artifactId&gt;cassandra-driver-core&lt;/artifactId&gt;\r\n            &lt;version&gt;${cassandra.version}&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.25&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.quartz-scheduler&lt;/groupId&gt;\r\n            &lt;artifactId&gt;quartz&lt;/artifactId&gt;\r\n            &lt;version&gt;1.8.6&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n            &lt;version&gt;2.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-dbcp&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt;\r\n            &lt;version&gt;1.2.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n            &lt;version&gt;1.1.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-codec&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;\r\n            &lt;version&gt;1.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-pool&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-pool&lt;/artifactId&gt;\r\n            &lt;version&gt;1.5.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-collections&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;\r\n            &lt;version&gt;3.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;\r\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;aspectj&lt;/groupId&gt;\r\n            &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\r\n            &lt;version&gt;1.6.6&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;aspectj&lt;/groupId&gt;\r\n            &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\r\n            &lt;version&gt;1.6.6&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-asm&lt;/artifactId&gt;\r\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\r\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;\r\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\r\n            &lt;version&gt;3.2.1.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.batch&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-batch-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.1.1.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.batch&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-batch-infrastructure&lt;/artifactId&gt;\r\n            &lt;version&gt;2.1.1.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.jcraft&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jsch&lt;/artifactId&gt;\r\n            &lt;version&gt;0.1.54&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.6.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.thoughtworks.xstream&lt;/groupId&gt;\r\n            &lt;artifactId&gt;xstream&lt;/artifactId&gt;\r\n            &lt;version&gt;1.4.17&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.codehaus.jettison&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jettison&lt;/artifactId&gt;\r\n            &lt;version&gt;1.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.codehaus.fabric3.api&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commonj&lt;/artifactId&gt;\r\n            &lt;version&gt;1.1.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;hsqldb&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\r\n            &lt;version&gt;1.8.0.7&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;cglib&lt;/groupId&gt;\r\n            &lt;artifactId&gt;cglib&lt;/artifactId&gt;\r\n            &lt;version&gt;3.2.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.axis&lt;/groupId&gt;\r\n            &lt;artifactId&gt;axis&lt;/artifactId&gt;\r\n            &lt;version&gt;1.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;net.sf.opencsv&lt;/groupId&gt;\r\n            &lt;artifactId&gt;opencsv&lt;/artifactId&gt;\r\n            &lt;version&gt;2.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.americanexpress.util.jconfig&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jconfig&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.batch&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-batch-admin-manager&lt;/artifactId&gt;\r\n            &lt;version&gt;1.3.1.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.aexp.sec.crypto&lt;/groupId&gt;\r\n            &lt;artifactId&gt;ssaascrypto&lt;/artifactId&gt;\r\n            &lt;version&gt;2.5.1&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;artifactId&gt;jutil_lang&lt;/artifactId&gt;\r\n                    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n                &lt;/exclusion&gt;               \r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;            \r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;au.com.bytecode&lt;/groupId&gt;\r\n            &lt;artifactId&gt;opencsv&lt;/artifactId&gt;\r\n            &lt;version&gt;2.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;backport-util-concurrent&lt;/groupId&gt;\r\n            &lt;artifactId&gt;backport-util-concurrent-java12&lt;/artifactId&gt;\r\n            &lt;version&gt;3.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;oracle&lt;/groupId&gt;\r\n            &lt;artifactId&gt;ojdbc6&lt;/artifactId&gt;\r\n            &lt;version&gt;12.1.0.2.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n            &lt;version&gt;3.1.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.americanexpress.ea&lt;/groupId&gt;\r\n            &lt;artifactId&gt;elf-log4j2-starter&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.americanexpress.ea&lt;/groupId&gt;\r\n            &lt;artifactId&gt;elf-servlet&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;version&gt;1.18.20&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot&lt;/artifactId&gt;\r\n            &lt;version&gt;2.5.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n    &lt;build&gt;\r\n        &lt;finalName&gt;starhub-grd&lt;/finalName&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.3.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n                    &lt;warName&gt;${project.artifactId}&lt;/warName&gt;\r\n                    &lt;warSourceDirectory&gt;src/main/webapp&lt;/warSourceDirectory&gt;\r\n                    &lt;archive&gt;\r\n                        &lt;manifestFile&gt;src/main/webapp/META-INF/MANIFEST.MF&lt;/manifestFile&gt;\r\n                        &lt;manifest&gt;\r\n                            &lt;addClasspath&gt;false&lt;/addClasspath&gt;\r\n                        &lt;/manifest&gt;\r\n                    &lt;/archive&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;0.7.7.201606060606&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;report&lt;/id&gt;\r\n                        &lt;phase&gt;prepare-package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;report&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;descriptor&gt;src/assembly/bin.xml&lt;/descriptor&gt;\r\n                    &lt;finalName&gt;starhub-grd&lt;/finalName&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;single&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.3&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;1.8&lt;/source&gt;\r\n                    &lt;target&gt;1.8&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;skipTests&gt;false&lt;/skipTests&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;install&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;repackage&lt;/goal&gt;\r\n                            &lt;goal&gt;build-info&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;executable&gt;true&lt;/executable&gt;\r\n                    &lt;includeSystemScope&gt;true&lt;/includeSystemScope&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n        &lt;pluginManagement&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.eclipse.m2e&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;lifecycle-mapping&lt;/artifactId&gt;\r\n                    &lt;version&gt;1.0.0&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;lifecycleMappingMetadata&gt;\r\n                            &lt;pluginExecutions&gt;\r\n                                &lt;pluginExecutionFilter&gt;\r\n                                    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                                    &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\r\n                                    &lt;version&gt;1.0&lt;/version&gt;\r\n                                    &lt;goals&gt;\r\n                                        &lt;goal&gt;test-compile&lt;/goal&gt;\r\n                                        &lt;goal&gt;compile&lt;/goal&gt;\r\n                                    &lt;/goals&gt;\r\n                                &lt;/pluginExecutionFilter&gt;\r\n                                &lt;action&gt;\r\n                                    &lt;execute /&gt;\r\n                                &lt;/action&gt;\r\n                            &lt;/pluginExecutions&gt;\r\n                            &lt;pluginExecution&gt;\r\n                                &lt;pluginExecutionFilter&gt;\r\n                                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                                    &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n                                    &lt;version&gt;1.0&lt;/version&gt;\r\n                                    &lt;goals&gt;\r\n                                        &lt;goal&gt;install-file&lt;/goal&gt;\r\n                                    &lt;/goals&gt;\r\n                                &lt;/pluginExecutionFilter&gt;\r\n                                &lt;action&gt;\r\n                                    &lt;execute&gt;\r\n                                        &lt;runOnIncremental&gt;false&lt;/runOnIncremental&gt;\r\n                                    &lt;/execute&gt;\r\n                                &lt;/action&gt;\r\n                            &lt;/pluginExecution&gt;\r\n                        &lt;/lifecycleMappingMetadata&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/pluginManagement&gt;\r\n        &lt;resources&gt;\r\n            &lt;resource&gt;\r\n                &lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n                &lt;filtering&gt;true&lt;/filtering&gt;\r\n            &lt;/resource&gt;\r\n        &lt;/resources&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n","title":"ApplicationStartup error on Springboot app","body":"<p>I am converting a jboss app to Springboot application. I added all the spring boot dependencies in the pom file. The application is building fine with no error. But when i run the Springboot app locally in intellij, i am getting the below error.</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/springframework/core/metrics/ApplicationStartup\n    at org.springframework.boot.SpringApplication.&lt;init&gt;(SpringApplication.java:253)\n    at org.springframework.boot.SpringApplication.&lt;init&gt;(SpringApplication.java:266)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1332)\n    at com.americanexpress.starhub.common.config.StarhubGrdApplication.main(StarhubGrdApplication.java:30)\nCaused by: java.lang.ClassNotFoundException: org.springframework.core.metrics.ApplicationStartup\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    ... 5 more\n</code></pre>\n<p>Here is my main starter class.</p>\n<pre><code>@SpringBootApplication\n@PropertySource({\n  &quot;classpath:cassandra-connection-ipc1-e0.properties&quot;,\n  &quot;classpath:appCrypto-${spring.profiles.active}.properties&quot;,\n  &quot;classpath:dataload_${spring.profiles.active}.properties&quot;\n})\n@ComponentScan(basePackages = &quot;com.company.app&quot;)\n@ImportResource(&quot;classpath:springbatch-context.xml&quot;)\npublic class SGApplication {\n  private static Logger LOGGER = LoggerFactory.getLogger(SGApplication.class);\n  private static ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);\n\n  public static void main(String[] args) {\n    SpringApplication.run(SGApplication.class, args);\n    Runnable command =\n        () -&gt;\n            LOGGER.info(\n                &quot;SGApplication app is up and running {}&quot;, System.currentTimeMillis());\n\n    scheduler.scheduleWithFixedDelay(command, 5, 5, TimeUnit.MINUTES);\n  }\n}\n</code></pre>\n<p>I have below dependencies in my pom file.</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;version&gt;2.4.9&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>Any inputs on how to fix this?</p>\n<p>Adding the whole pom file in here</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n     xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n&lt;properties&gt;\n    &lt;start-class&gt;com.americanexpress.starhub.common.config.StarhubGrdApplication&lt;/start-class&gt;\n&lt;/properties&gt;\n\n&lt;parent&gt;\n    &lt;groupId&gt;com.aexp.starhub&lt;/groupId&gt;\n    &lt;artifactId&gt;starhub-parent-pom&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n&lt;/parent&gt;\n\n&lt;artifactId&gt;starhub-grd&lt;/artifactId&gt;\n&lt;version&gt;1.0&lt;/version&gt;\n&lt;packaging&gt;jar&lt;/packaging&gt;\n&lt;name&gt;starhub-grd&lt;/name&gt;\n&lt;description&gt;starhub grd&lt;/description&gt;\n\n&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\n            &lt;version&gt;${spring.boot.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-batch&lt;/artifactId&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n                &lt;artifactId&gt;log4j-to-slf4j&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n                &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.retry&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-retry&lt;/artifactId&gt;\n        &lt;version&gt;1.2.5.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;junit&lt;/groupId&gt;\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\n        &lt;version&gt;RELEASE&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n        &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n        &lt;version&gt;RELEASE&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n        &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n        &lt;version&gt;2.21.0&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n        &lt;artifactId&gt;mockito-junit-jupiter&lt;/artifactId&gt;\n        &lt;version&gt;2.23.0&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.datastax.cassandra&lt;/groupId&gt;\n        &lt;artifactId&gt;cassandra-driver-core&lt;/artifactId&gt;\n        &lt;version&gt;${cassandra.version}&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n        &lt;version&gt;1.7.25&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.quartz-scheduler&lt;/groupId&gt;\n        &lt;artifactId&gt;quartz&lt;/artifactId&gt;\n        &lt;version&gt;1.8.6&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-io&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n        &lt;version&gt;2.4&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-dbcp&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt;\n        &lt;version&gt;1.2.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n        &lt;version&gt;1.1.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-codec&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;\n        &lt;version&gt;1.3&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-pool&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-pool&lt;/artifactId&gt;\n        &lt;version&gt;1.5.4&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-collections&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;\n        &lt;version&gt;3.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;aspectj&lt;/groupId&gt;\n        &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\n        &lt;version&gt;1.6.6&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;aspectj&lt;/groupId&gt;\n        &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\n        &lt;version&gt;1.6.6&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-asm&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\n        &lt;version&gt;3.2.1.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.batch&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-batch-core&lt;/artifactId&gt;\n        &lt;version&gt;2.1.1.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.batch&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-batch-infrastructure&lt;/artifactId&gt;\n        &lt;version&gt;2.1.1.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.jcraft&lt;/groupId&gt;\n        &lt;artifactId&gt;jsch&lt;/artifactId&gt;\n        &lt;version&gt;0.1.54&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n        &lt;version&gt;3.0.6.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.thoughtworks.xstream&lt;/groupId&gt;\n        &lt;artifactId&gt;xstream&lt;/artifactId&gt;\n        &lt;version&gt;1.4.17&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.codehaus.jettison&lt;/groupId&gt;\n        &lt;artifactId&gt;jettison&lt;/artifactId&gt;\n        &lt;version&gt;1.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.codehaus.fabric3.api&lt;/groupId&gt;\n        &lt;artifactId&gt;commonj&lt;/artifactId&gt;\n        &lt;version&gt;1.1.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;hsqldb&lt;/groupId&gt;\n        &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\n        &lt;version&gt;1.8.0.7&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;cglib&lt;/groupId&gt;\n        &lt;artifactId&gt;cglib&lt;/artifactId&gt;\n        &lt;version&gt;3.2.4&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.axis&lt;/groupId&gt;\n        &lt;artifactId&gt;axis&lt;/artifactId&gt;\n        &lt;version&gt;1.4&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;net.sf.opencsv&lt;/groupId&gt;\n        &lt;artifactId&gt;opencsv&lt;/artifactId&gt;\n        &lt;version&gt;2.3&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.americanexpress.util.jconfig&lt;/groupId&gt;\n        &lt;artifactId&gt;jconfig&lt;/artifactId&gt;\n        &lt;version&gt;3.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.batch&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-batch-admin-manager&lt;/artifactId&gt;\n        &lt;version&gt;1.3.1.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.aexp.sec.crypto&lt;/groupId&gt;\n        &lt;artifactId&gt;ssaascrypto&lt;/artifactId&gt;\n        &lt;version&gt;2.5.1&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;artifactId&gt;jutil_lang&lt;/artifactId&gt;\n                &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;/exclusion&gt;               \n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;/exclusion&gt;            \n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;au.com.bytecode&lt;/groupId&gt;\n        &lt;artifactId&gt;opencsv&lt;/artifactId&gt;\n        &lt;version&gt;2.4&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;backport-util-concurrent&lt;/groupId&gt;\n        &lt;artifactId&gt;backport-util-concurrent-java12&lt;/artifactId&gt;\n        &lt;version&gt;3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;oracle&lt;/groupId&gt;\n        &lt;artifactId&gt;ojdbc6&lt;/artifactId&gt;\n        &lt;version&gt;12.1.0.2.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    \n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.americanexpress.ea&lt;/groupId&gt;\n        &lt;artifactId&gt;elf-log4j2-starter&lt;/artifactId&gt;\n        &lt;version&gt;2.0.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.americanexpress.ea&lt;/groupId&gt;\n        &lt;artifactId&gt;elf-servlet&lt;/artifactId&gt;\n        &lt;version&gt;2.0.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;version&gt;1.18.20&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot&lt;/artifactId&gt;\n        &lt;version&gt;2.5.4&lt;/version&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n&lt;build&gt;\n    &lt;finalName&gt;starhub-grd&lt;/finalName&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.3.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n                &lt;warName&gt;${project.artifactId}&lt;/warName&gt;\n                &lt;warSourceDirectory&gt;src/main/webapp&lt;/warSourceDirectory&gt;\n                &lt;archive&gt;\n                    &lt;manifestFile&gt;src/main/webapp/META-INF/MANIFEST.MF&lt;/manifestFile&gt;\n                    &lt;manifest&gt;\n                        &lt;addClasspath&gt;false&lt;/addClasspath&gt;\n                    &lt;/manifest&gt;\n                &lt;/archive&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n            &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;0.7.7.201606060606&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;prepare-agent&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;report&lt;/id&gt;\n                    &lt;phase&gt;prepare-package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;report&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;descriptor&gt;src/assembly/bin.xml&lt;/descriptor&gt;\n                &lt;finalName&gt;starhub-grd&lt;/finalName&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;single&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.3&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;skipTests&gt;false&lt;/skipTests&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;install&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;repackage&lt;/goal&gt;\n                        &lt;goal&gt;build-info&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n            &lt;configuration&gt;\n                &lt;executable&gt;true&lt;/executable&gt;\n                &lt;includeSystemScope&gt;true&lt;/includeSystemScope&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n    &lt;pluginManagement&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.eclipse.m2e&lt;/groupId&gt;\n                &lt;artifactId&gt;lifecycle-mapping&lt;/artifactId&gt;\n                &lt;version&gt;1.0.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;lifecycleMappingMetadata&gt;\n                        &lt;pluginExecutions&gt;\n                            &lt;pluginExecutionFilter&gt;\n                                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                                &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\n                                &lt;version&gt;1.0&lt;/version&gt;\n                                &lt;goals&gt;\n                                    &lt;goal&gt;test-compile&lt;/goal&gt;\n                                    &lt;goal&gt;compile&lt;/goal&gt;\n                                &lt;/goals&gt;\n                            &lt;/pluginExecutionFilter&gt;\n                            &lt;action&gt;\n                                &lt;execute /&gt;\n                            &lt;/action&gt;\n                        &lt;/pluginExecutions&gt;\n                        &lt;pluginExecution&gt;\n                            &lt;pluginExecutionFilter&gt;\n                                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                                &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n                                &lt;version&gt;1.0&lt;/version&gt;\n                                &lt;goals&gt;\n                                    &lt;goal&gt;install-file&lt;/goal&gt;\n                                &lt;/goals&gt;\n                            &lt;/pluginExecutionFilter&gt;\n                            &lt;action&gt;\n                                &lt;execute&gt;\n                                    &lt;runOnIncremental&gt;false&lt;/runOnIncremental&gt;\n                                &lt;/execute&gt;\n                            &lt;/action&gt;\n                        &lt;/pluginExecution&gt;\n                    &lt;/lifecycleMappingMetadata&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n    &lt;resources&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;src/main/resources&lt;/directory&gt;\n            &lt;filtering&gt;true&lt;/filtering&gt;\n        &lt;/resource&gt;\n    &lt;/resources&gt;\n&lt;/build&gt;\n</code></pre>\n\n"},{"tags":["java","amazon-web-services","amazon-dynamodb","aws-java-sdk"],"answers":[{"tags":[],"owner":{"account_id":3509019,"reputation":128,"user_id":2933836,"display_name":"ce57"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640092507,"creation_date":1640092507,"answer_id":70436082,"question_id":70274144,"body_markdown":"According to the docs - yes, the ordering of cancellation reasons matches the order of transaction items: https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_TransactWriteItems.html\r\n\r\n&gt; If using Java, DynamoDB lists the cancellation reasons on the\r\n&gt; CancellationReasons property. This property is not set for other\r\n&gt; languages. Transaction cancellation reasons are ordered in the order\r\n&gt; of requested items, if an item has no error it will have NONE code and\r\n&gt; Null message.","title":"Are transaction cancellation reasons returned in the same order as the TransactWriteItemsRequest","body":"<p>According to the docs - yes, the ordering of cancellation reasons matches the order of transaction items: <a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_TransactWriteItems.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_TransactWriteItems.html</a></p>\n<blockquote>\n<p>If using Java, DynamoDB lists the cancellation reasons on the\nCancellationReasons property. This property is not set for other\nlanguages. Transaction cancellation reasons are ordered in the order\nof requested items, if an item has no error it will have NONE code and\nNull message.</p>\n</blockquote>\n"}],"owner":{"account_id":16514642,"reputation":35,"user_id":11932466,"display_name":"ploc_"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":741,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70436082,"answer_count":1,"score":1,"last_activity_date":1640092507,"creation_date":1638962452,"question_id":70274144,"body_markdown":"We are using the DynamoDB transaction API to perform 2 writes:\r\n\r\n```\r\n  TransactWriteItemsRequest transactionalWriteRequest = new TransactWriteItemsRequest();\r\n  transactionalWriteRequest.withTransactItems(writeOne, writeTwo); \r\n  dynamoDB.transactWriteItems(transactionalWriteRequest);\r\n```\r\n\r\nIf the transaction fails with a ```TransactionCanceledException``` we get back an exception with a list of ```CancellationReason``` objects.\r\n\r\nIn my scenario, imagine writeOne and writeTwo both fail. The exception will return two cancellation reasons.\r\n\r\nMy question is - does the ordering of those reasons match the ordering of the transactions in my request.\r\n\r\nIs this always true?\r\n\r\n```\r\n // Explains why writeOne failed\r\n transactionError.getCancellationReasons().get(0);\r\n // Explains why writeTwo failed\r\n transactionError.getCancellationReasons().get(1);\r\n```\r\n\r\nThanks\r\n","title":"Are transaction cancellation reasons returned in the same order as the TransactWriteItemsRequest","body":"<p>We are using the DynamoDB transaction API to perform 2 writes:</p>\n<pre><code>  TransactWriteItemsRequest transactionalWriteRequest = new TransactWriteItemsRequest();\n  transactionalWriteRequest.withTransactItems(writeOne, writeTwo); \n  dynamoDB.transactWriteItems(transactionalWriteRequest);\n</code></pre>\n<p>If the transaction fails with a <code>TransactionCanceledException</code> we get back an exception with a list of <code>CancellationReason</code> objects.</p>\n<p>In my scenario, imagine writeOne and writeTwo both fail. The exception will return two cancellation reasons.</p>\n<p>My question is - does the ordering of those reasons match the ordering of the transactions in my request.</p>\n<p>Is this always true?</p>\n<pre><code> // Explains why writeOne failed\n transactionError.getCancellationReasons().get(0);\n // Explains why writeTwo failed\n transactionError.getCancellationReasons().get(1);\n</code></pre>\n<p>Thanks</p>\n"},{"tags":["java","arrays","return"],"answers":[{"tags":[],"owner":{"account_id":23366081,"reputation":129,"user_id":17437705,"display_name":"rongfeiyue"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1640092350,"creation_date":1640092350,"answer_id":70436048,"question_id":70435960,"body_markdown":"You can try like this.\r\n```\r\npublic int[] make2(int[] a, int[] b) {\r\n    if (a.length &gt;= 2) {\r\n        return new int[]{a[0], a[1]}; // &lt;--- changed line\r\n    }\r\n    return b;\r\n}\r\n```","title":"How do you initialize a new int array on the same line you return data?","body":"<p>You can try like this.</p>\n<pre><code>public int[] make2(int[] a, int[] b) {\n    if (a.length &gt;= 2) {\n        return new int[]{a[0], a[1]}; // &lt;--- changed line\n    }\n    return b;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15856821,"reputation":2451,"user_id":11441011,"display_name":"maloomeister"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640092440,"creation_date":1640092440,"answer_id":70436065,"question_id":70435960,"body_markdown":"Let&#39;s make this step by step. You know how you create a new integer array, since you did it in your snippet here\r\n```lang-java\r\nint[] result = new int[2];\r\n```\r\n\r\nThen you have to know, there is a thing called the [Array Initializer](https://docs.oracle.com/javase/specs/jls/se8/html/jls-10.html#jls-10.6), which lets you initialize the array values at creation. For example:\r\n```lang-java\r\nint[] result = new int[]{ 1, 2, 3 };\r\n```\r\n\r\nSo, the solution to your question would be (combining this knowledge) the following:\r\n```lang-java\r\nreturn new int[]{ a[0], a[1] };\r\n```\r\nwhich creates and returns a new integer array of size 2, containing the values of `a[0]` and `a[1]`.","title":"How do you initialize a new int array on the same line you return data?","body":"<p>Let's make this step by step. You know how you create a new integer array, since you did it in your snippet here</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] result = new int[2];\n</code></pre>\n<p>Then you have to know, there is a thing called the <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-10.html#jls-10.6\" rel=\"nofollow noreferrer\">Array Initializer</a>, which lets you initialize the array values at creation. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] result = new int[]{ 1, 2, 3 };\n</code></pre>\n<p>So, the solution to your question would be (combining this knowledge) the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>return new int[]{ a[0], a[1] };\n</code></pre>\n<p>which creates and returns a new integer array of size 2, containing the values of <code>a[0]</code> and <code>a[1]</code>.</p>\n"}],"owner":{"account_id":23710386,"reputation":31,"user_id":17732323,"display_name":"Benjamin Deutsch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1176,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1640360643,"answer_count":2,"score":1,"last_activity_date":1640092440,"creation_date":1640091953,"question_id":70435960,"body_markdown":"I understand that if you want to return something that&#39;s stored in a variable, it&#39;s as simple as returning said variable:\r\n\r\n    int jellyfish = 7;\r\n    return jellyfish;\r\nand if you just wanted to return the number seven without any relation to jellyfish, you could just write:\r\n\r\n    return 7;\r\nBut how would this be possible for arrays? Up to this point, I declare the array that I want to return the values of and then just return that array directly in the next line, but it feels just as klunky as making the variable &quot;jellyfish&quot; above the return line for when the code nly ever intended to return 7. Like I would code:\r\n\r\n    public int[] make2(int[] a, int[] b) {\r\n    int[] result = new int[2];\r\n      if (a.length &gt;= 2) {\r\n        result[0] = a[0];\r\n        result[1] = a[0];\r\n        return result;\r\n      }\r\n      return b;\r\n    }\r\nEven though it feels as though it&#39;d be much simpler to just write something like:\r\n\r\n    public int[] make2(int[] a, int[] b) {\r\n        int[] result = new int[2];\r\n          if (a.length &gt;= 2) {\r\n            return {a[0], a[1]}; // &lt;--- changed line\r\n          }\r\n          return b;\r\n        }\r\nI&#39;m sure something like that exists, but nothing that I&#39;ve tested as of yet will let me return array information without putting it in a new array variable before the return statement. Is there a way to do this that I&#39;m not aware of or is this an inherent problem within Java that I can&#39;t do anything about?","title":"How do you initialize a new int array on the same line you return data?","body":"<p>I understand that if you want to return something that's stored in a variable, it's as simple as returning said variable:</p>\n<pre><code>int jellyfish = 7;\nreturn jellyfish;\n</code></pre>\n<p>and if you just wanted to return the number seven without any relation to jellyfish, you could just write:</p>\n<pre><code>return 7;\n</code></pre>\n<p>But how would this be possible for arrays? Up to this point, I declare the array that I want to return the values of and then just return that array directly in the next line, but it feels just as klunky as making the variable &quot;jellyfish&quot; above the return line for when the code nly ever intended to return 7. Like I would code:</p>\n<pre><code>public int[] make2(int[] a, int[] b) {\nint[] result = new int[2];\n  if (a.length &gt;= 2) {\n    result[0] = a[0];\n    result[1] = a[0];\n    return result;\n  }\n  return b;\n}\n</code></pre>\n<p>Even though it feels as though it'd be much simpler to just write something like:</p>\n<pre><code>public int[] make2(int[] a, int[] b) {\n    int[] result = new int[2];\n      if (a.length &gt;= 2) {\n        return {a[0], a[1]}; // &lt;--- changed line\n      }\n      return b;\n    }\n</code></pre>\n<p>I'm sure something like that exists, but nothing that I've tested as of yet will let me return array information without putting it in a new array variable before the return statement. Is there a way to do this that I'm not aware of or is this an inherent problem within Java that I can't do anything about?</p>\n"},{"tags":["java","arrays","json","set"],"answers":[{"tags":[],"owner":{"account_id":17813347,"reputation":1635,"user_id":12937443,"display_name":"DEV"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640091650,"creation_date":1640091650,"answer_id":70435897,"question_id":70435765,"body_markdown":"You can try something like : \r\n\r\n    Set&lt;Integer&gt; result = IntStream.range(0, addressIds.length())\r\n            .mapToObj(addressIds::get)\r\n            .map(Integer::valueOf)\r\n            .collect(Collectors.toSet());","title":"Getting set of Integers from a JSONArray in Java?","body":"<p>You can try something like :</p>\n<pre><code>Set&lt;Integer&gt; result = IntStream.range(0, addressIds.length())\n        .mapToObj(addressIds::get)\n        .map(Integer::valueOf)\n        .collect(Collectors.toSet());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23366081,"reputation":129,"user_id":17437705,"display_name":"rongfeiyue"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640092156,"creation_date":1640092156,"answer_id":70435999,"question_id":70435765,"body_markdown":"You can try cast Object to Integer in stream.\r\n```\r\naction.setAddressIds(addressIds.toList().stream().map(k -&gt; (Integer) k).collect(Collectors.toSet()));\r\n```","title":"Getting set of Integers from a JSONArray in Java?","body":"<p>You can try cast Object to Integer in stream.</p>\n<pre><code>action.setAddressIds(addressIds.toList().stream().map(k -&gt; (Integer) k).collect(Collectors.toSet()));\n</code></pre>\n"}],"owner":{"account_id":16962007,"reputation":1665,"user_id":12268910,"display_name":"java12399900"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70435999,"answer_count":2,"score":0,"last_activity_date":1640092156,"creation_date":1640091030,"question_id":70435765,"body_markdown":"I have the following `java` code where I am trying to pull a set of integers from a `JSONArray` object. How can I do so?\r\n\r\n\r\n    JSONObject actionDetail = new JSONObject(&quot;myJsonOject&quot;);\r\n    \r\n    int personId = actionDetail.getInt(&quot;personId&quot;);\r\n    JSONArray addressIds = actionDetail.getJSONArray(&quot;addressIds&quot;);\r\n    \r\n    Action action = new Action();\r\n   \r\n    action.setPersonId(personId); //working ok\r\n    \r\n    action.setAddressIds(): //todo - how to get list of ints from the JsonArray?\r\n\r\nNote that the type of `addressIds` field is: `Set&lt;Integer&gt;`\r\n\r\n\r\n\r\n","title":"Getting set of Integers from a JSONArray in Java?","body":"<p>I have the following <code>java</code> code where I am trying to pull a set of integers from a <code>JSONArray</code> object. How can I do so?</p>\n<pre><code>JSONObject actionDetail = new JSONObject(&quot;myJsonOject&quot;);\n\nint personId = actionDetail.getInt(&quot;personId&quot;);\nJSONArray addressIds = actionDetail.getJSONArray(&quot;addressIds&quot;);\n\nAction action = new Action();\n\naction.setPersonId(personId); //working ok\n\naction.setAddressIds(): //todo - how to get list of ints from the JsonArray?\n</code></pre>\n<p>Note that the type of <code>addressIds</code> field is: <code>Set&lt;Integer&gt;</code></p>\n"},{"tags":["java","spring-boot","scheduled-tasks","runnable","applicationcontext"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1639735093,"post_id":70391298,"comment_id":124429894,"body_markdown":"Don&#39;t create an instance with `new`. Manage it through spring and get an instance through the context. Don&#39;t use the run method to later inject dependencies, just let spring do all that, you are basically trying to make things overly complex with this.","body":"Don&#39;t create an instance with <code>new</code>. Manage it through spring and get an instance through the context. Don&#39;t use the run method to later inject dependencies, just let spring do all that, you are basically trying to make things overly complex with this."}],"answers":[{"tags":[],"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640092005,"creation_date":1639736059,"answer_id":70391558,"question_id":70391298,"body_markdown":"Make the `ReportExecutor` a Spring managed bean and make it prototype scoped. Next in your `ReportSchedulingService` use the `ApplicationContext` to get an instance (and let Spring do the wiring) and schedule it. \r\n\r\n```java\r\n@Service\r\npublic class ReportSchedulingService {\r\n    private static final Logger logger = LoggerFactory.getLogger(ReportSchedulingService.class);\r\n\r\n    private final Map&lt;String, ScheduledFuture&lt;?&gt;&gt; jobsMap = new ConcurrentHashMap&lt;String, ScheduledFuture&lt;?&gt;&gt;();\r\n\r\n    private final TaskScheduler taskScheduler;\r\n    private final ReportList reportList;\r\n    private final ApplicationContext ctx;\r\n\r\n    public ReportSchedulingService(ReportList reportList, TaskScheduler taskScheduler, ApplicationContext ctx) {\r\n        this.reportList=reportList;\r\n        this.taskScheduler=taskScheduler;\r\n        this.ctx=ctx;\r\n    }\r\n\r\n    public void scheduleAllReports() {\r\n        for (Map.Entry&lt;String, Report&gt; reportEntry : reportList.getReports().entrySet()) {\r\n            String reportName = reportEntry.getKey();\r\n            Report report = reportEntry.getValue();\r\n            String jobId = UUID.randomUUID().toString();\r\n            logger.info(String.format(&quot;Scheduling report [%s] with job id: [%s] and cron expression: [%s]&quot;,\r\n                reportName, jobId, report.getCron()));\r\n            ReportExecutor execution = ctx.getBean(ReportExecutor.class);\r\n            report.setId(jobId);\r\n            report.setName(reportName);\r\n            execution.setTaskDefinition(report);\r\n            ScheduledFuture&lt;?&gt; scheduledTask = taskScheduler.schedule(execution,\r\n                new CronTrigger(report.getCron(), TimeZone.getTimeZone(TimeZone.getDefault().getID())));\r\n            this.jobsMap.put(reportName + &quot;_&quot; + jobId, scheduledTask);\r\n        }\r\n    }\r\n\r\n    public void removeScheduledTask(String jobId) {\r\n        ScheduledFuture&lt;?&gt; scheduledTask = this.jobsMap.get(jobId);\r\n        if (scheduledTask != null) {\r\n            scheduledTask.cancel(true);\r\n            getJobMap().put(jobId, null);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**NOTE:** I took the liberty to improve your code a little as well, using constructor injection and using a `ConcurrentHashMap` instead of `syncronized`.\r\n\r\n```java\r\n@Component\r\n@Scope(scopeName=SCOPE_PROTOTYPE)\r\npublic class ReportExecutor implements Runnable {\r\n\r\n    private final ApplicationContext appContext;\r\n    private Report reportDefinition;\r\n\r\n    public ReportExecutor(ApplicationContext ctx) {\r\n      this.appContext=ctx;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        IReportGenerator generator = appContext.getBean(\r\n            reportDefinition.getExecute(),\r\n            IReportGenerator.class);\r\n        JSONArray reportData = generator.generate(reportDefinition);\r\n\r\n        IReportNotifier notifier =\r\n            appContext.getBean(reportDefinition.getNotification().getExecute(), IReportNotifier.class);\r\n        notifier.send(reportDefinition, reportData);\r\n\r\n    }\r\n\r\n    public void setTaskDefinition(Report reportDefinition) {\r\n        this.reportDefinition = reportDefinition;\r\n    }\r\n}\r\n```\r\nThe scoped proxy will create a new instance for each call to `getBean`. So you get a fresh, clean instance for each execution you want to schedule. ","title":"How to autowire Application context in a ScheduledFutures runnable task","body":"<p>Make the <code>ReportExecutor</code> a Spring managed bean and make it prototype scoped. Next in your <code>ReportSchedulingService</code> use the <code>ApplicationContext</code> to get an instance (and let Spring do the wiring) and schedule it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class ReportSchedulingService {\n    private static final Logger logger = LoggerFactory.getLogger(ReportSchedulingService.class);\n\n    private final Map&lt;String, ScheduledFuture&lt;?&gt;&gt; jobsMap = new ConcurrentHashMap&lt;String, ScheduledFuture&lt;?&gt;&gt;();\n\n    private final TaskScheduler taskScheduler;\n    private final ReportList reportList;\n    private final ApplicationContext ctx;\n\n    public ReportSchedulingService(ReportList reportList, TaskScheduler taskScheduler, ApplicationContext ctx) {\n        this.reportList=reportList;\n        this.taskScheduler=taskScheduler;\n        this.ctx=ctx;\n    }\n\n    public void scheduleAllReports() {\n        for (Map.Entry&lt;String, Report&gt; reportEntry : reportList.getReports().entrySet()) {\n            String reportName = reportEntry.getKey();\n            Report report = reportEntry.getValue();\n            String jobId = UUID.randomUUID().toString();\n            logger.info(String.format(&quot;Scheduling report [%s] with job id: [%s] and cron expression: [%s]&quot;,\n                reportName, jobId, report.getCron()));\n            ReportExecutor execution = ctx.getBean(ReportExecutor.class);\n            report.setId(jobId);\n            report.setName(reportName);\n            execution.setTaskDefinition(report);\n            ScheduledFuture&lt;?&gt; scheduledTask = taskScheduler.schedule(execution,\n                new CronTrigger(report.getCron(), TimeZone.getTimeZone(TimeZone.getDefault().getID())));\n            this.jobsMap.put(reportName + &quot;_&quot; + jobId, scheduledTask);\n        }\n    }\n\n    public void removeScheduledTask(String jobId) {\n        ScheduledFuture&lt;?&gt; scheduledTask = this.jobsMap.get(jobId);\n        if (scheduledTask != null) {\n            scheduledTask.cancel(true);\n            getJobMap().put(jobId, null);\n        }\n    }\n}\n</code></pre>\n<p><strong>NOTE:</strong> I took the liberty to improve your code a little as well, using constructor injection and using a <code>ConcurrentHashMap</code> instead of <code>syncronized</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@Scope(scopeName=SCOPE_PROTOTYPE)\npublic class ReportExecutor implements Runnable {\n\n    private final ApplicationContext appContext;\n    private Report reportDefinition;\n\n    public ReportExecutor(ApplicationContext ctx) {\n      this.appContext=ctx;\n    }\n\n    @Override\n    public void run() {\n        IReportGenerator generator = appContext.getBean(\n            reportDefinition.getExecute(),\n            IReportGenerator.class);\n        JSONArray reportData = generator.generate(reportDefinition);\n\n        IReportNotifier notifier =\n            appContext.getBean(reportDefinition.getNotification().getExecute(), IReportNotifier.class);\n        notifier.send(reportDefinition, reportData);\n\n    }\n\n    public void setTaskDefinition(Report reportDefinition) {\n        this.reportDefinition = reportDefinition;\n    }\n}\n</code></pre>\n<p>The scoped proxy will create a new instance for each call to <code>getBean</code>. So you get a fresh, clean instance for each execution you want to schedule.</p>\n"}],"owner":{"account_id":20188725,"reputation":3,"user_id":14807459,"display_name":"Dimitrios Venetas"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":513,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70391558,"answer_count":1,"score":0,"last_activity_date":1640092005,"creation_date":1639734762,"question_id":70391298,"body_markdown":"I am trying to create a module for running report tasks based on configuration. The thought is to pass report configuration to a single task for defining each report specifics. Report configuration contains data information and class names that will be invoked to do the separate tasks. For this I have a Scheduling Service for dynamically configuring on startup my scheduled tasks. Task (runnable impl) is ReportExecutor.\r\n```\r\n@Service\r\npublic class ReportSchedulingService {\r\n    private static final Logger logger = LoggerFactory.getLogger(ReportSchedulingService.class);\r\n\r\n    @Autowired\r\n    private ThreadPoolTaskScheduler taskScheduler;\r\n\r\n    @Autowired\r\n    private ReportList reportList;\r\n\r\n    private static Map&lt;String, ScheduledFuture&lt;?&gt;&gt; jobsMap = new HashMap&lt;String, ScheduledFuture&lt;?&gt;&gt;();\r\n\r\n    public void scheduleAllReports() {\r\n        for (Map.Entry&lt;String, Report&gt; reportEntry : reportList.getReports().entrySet()) {\r\n            String reportName = reportEntry.getKey();\r\n            Report report = reportEntry.getValue();\r\n            String jobId = UUID.randomUUID().toString();\r\n            logger.info(String.format(&quot;Scheduling report [%s] with job id: [%s] and cron expression: [%s]&quot;,\r\n                reportName, jobId, report.getCron()));\r\n            ReportExecutor execution = new ReportExecutor();\r\n            report.setId(jobId);\r\n            report.setName(reportName);\r\n            execution.setTaskDefinition(report);\r\n            ScheduledFuture&lt;?&gt; scheduledTask = taskScheduler.schedule(execution,\r\n                new CronTrigger(report.getCron(), TimeZone.getTimeZone(TimeZone.getDefault().getID())));\r\n            getJobMap().put(reportName + &quot;_&quot; + jobId, scheduledTask);\r\n        }\r\n    }\r\n\r\n    private synchronized Map&lt;String, ScheduledFuture&lt;?&gt;&gt; getJobMap() {\r\n        if (jobsMap == null) {\r\n            jobsMap = new HashMap&lt;String, ScheduledFuture&lt;?&gt;&gt;();\r\n        }\r\n        return jobsMap;\r\n    }\r\n\r\n    public void removeScheduledTask(String jobId) {\r\n        ScheduledFuture&lt;?&gt; scheduledTask = getJobMap().get(jobId);\r\n        if (scheduledTask != null) {\r\n            scheduledTask.cancel(true);\r\n            getJobMap().put(jobId, null);\r\n        }\r\n    }\r\n}\r\n```\r\nReport Executor is:\r\n```\r\n@Component\r\npublic class ReportExecutor implements Runnable {\r\n\r\n    @Autowired\r\n    private ApplicationContext appContext;\r\n\r\n    private Report reportDefinition;\r\n\r\n    @Override\r\n    public void run() {\r\n        SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);\r\n        System.out.println(reportDefinition);\r\n        IReportGenerator generator = appContext.getBean(\r\n            reportDefinition.getExecute(),\r\n            IReportGenerator.class);\r\n        JSONArray reportData = generator.generate(reportDefinition);\r\n\r\n        IReportNotifier notifier =\r\n            appContext.getBean(reportDefinition.getNotification().getExecute(), IReportNotifier.class);\r\n        notifier.send(reportDefinition, reportData);\r\n\r\n    }\r\n    public Report getTaskDefinition() {\r\n        return reportDefinition;\r\n    }\r\n    public void setTaskDefinition(Report reportDefinition) {\r\n        this.reportDefinition = reportDefinition;\r\n    }\r\n}\r\n```\r\nBut I have also tried with:\r\n```\r\n@Component\r\npublic class ReportExecutor implements Runnable, ApplicationContextAware {\r\n\r\n    private ApplicationContext appContext;\r\n\r\n    private Report reportDefinition;\r\n\r\n    @Override\r\n    public void run() {\r\n        SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);\r\n        System.out.println(reportDefinition);\r\n        IReportGenerator generator = appContext.getBean(\r\n            reportDefinition.getExecute(),\r\n            IReportGenerator.class);\r\n        JSONArray reportData = generator.generate(reportDefinition);\r\n\r\n        IReportNotifier notifier =\r\n            appContext.getBean(reportDefinition.getNotification().getExecute(), IReportNotifier.class);\r\n        notifier.send(reportDefinition, reportData);\r\n\r\n    }\r\n\r\n    public Report getTaskDefinition() {\r\n        return reportDefinition;\r\n    }\r\n\r\n    public void setTaskDefinition(Report reportDefinition) {\r\n        this.reportDefinition = reportDefinition;\r\n    }\r\n\r\n    @Override\r\n    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {\r\n        this.appContext = applicationContext;\r\n    }\r\n\r\n}\r\n```\r\nSeems that I cannot get the application context here and end up to a NPE at:\r\n```\r\n        IReportGenerator generator = appContext.getBean(\r\n```\r\nThe stackTrace is:\r\n```\r\njava.lang.NullPointerException: null\r\n\tat ote.itarc.report.ReportExecutor.run(ReportExecutor.java:27) ~[classes/:?]\r\n\tat org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54) [spring-context-5.2.10.RELEASE.jar:5.2.10.RELEASE]\r\n\tat org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:93) [spring-context-5.2.10.RELEASE.jar:5.2.10.RELEASE]\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?]\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?]\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) [?:?]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]\r\n\tat java.lang.Thread.run(Thread.java:836) [?:?]\r\n```\r\nReportList object comes from yaml properties:\r\n```\r\nreportlist:\r\n  reports:\r\n    missinginfra:\r\n      desc: &quot;This report provides ...&quot;\r\n      execute: QueryReportGenerator\r\n      query: SELECT * FROM DUAL\r\n      cron: &quot;0 0/2 * 1/1 * ?&quot;\r\n      notification:\r\n        execute: EmailCsvReportNotifier\r\n        templateid: 0\r\n```\r\nWith the following definition\r\n```\r\n@ConfigurationProperties(prefix = &quot;reportlist&quot;)\r\n@Configuration\r\n@EnableConfigurationProperties\r\npublic class ReportList {\r\n\r\n    private Map&lt;String, Report&gt; reports;\r\n\r\n    public Map&lt;String, Report&gt; getReports() {\r\n        return reports;\r\n    }\r\n\r\n    public void setReports(Map&lt;String, Report&gt; reports) {\r\n        this.reports = reports;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;ReportList [reports=&quot; + reports + &quot;]&quot;;\r\n    }\r\n}\r\n```","title":"How to autowire Application context in a ScheduledFutures runnable task","body":"<p>I am trying to create a module for running report tasks based on configuration. The thought is to pass report configuration to a single task for defining each report specifics. Report configuration contains data information and class names that will be invoked to do the separate tasks. For this I have a Scheduling Service for dynamically configuring on startup my scheduled tasks. Task (runnable impl) is ReportExecutor.</p>\n<pre><code>@Service\npublic class ReportSchedulingService {\n    private static final Logger logger = LoggerFactory.getLogger(ReportSchedulingService.class);\n\n    @Autowired\n    private ThreadPoolTaskScheduler taskScheduler;\n\n    @Autowired\n    private ReportList reportList;\n\n    private static Map&lt;String, ScheduledFuture&lt;?&gt;&gt; jobsMap = new HashMap&lt;String, ScheduledFuture&lt;?&gt;&gt;();\n\n    public void scheduleAllReports() {\n        for (Map.Entry&lt;String, Report&gt; reportEntry : reportList.getReports().entrySet()) {\n            String reportName = reportEntry.getKey();\n            Report report = reportEntry.getValue();\n            String jobId = UUID.randomUUID().toString();\n            logger.info(String.format(&quot;Scheduling report [%s] with job id: [%s] and cron expression: [%s]&quot;,\n                reportName, jobId, report.getCron()));\n            ReportExecutor execution = new ReportExecutor();\n            report.setId(jobId);\n            report.setName(reportName);\n            execution.setTaskDefinition(report);\n            ScheduledFuture&lt;?&gt; scheduledTask = taskScheduler.schedule(execution,\n                new CronTrigger(report.getCron(), TimeZone.getTimeZone(TimeZone.getDefault().getID())));\n            getJobMap().put(reportName + &quot;_&quot; + jobId, scheduledTask);\n        }\n    }\n\n    private synchronized Map&lt;String, ScheduledFuture&lt;?&gt;&gt; getJobMap() {\n        if (jobsMap == null) {\n            jobsMap = new HashMap&lt;String, ScheduledFuture&lt;?&gt;&gt;();\n        }\n        return jobsMap;\n    }\n\n    public void removeScheduledTask(String jobId) {\n        ScheduledFuture&lt;?&gt; scheduledTask = getJobMap().get(jobId);\n        if (scheduledTask != null) {\n            scheduledTask.cancel(true);\n            getJobMap().put(jobId, null);\n        }\n    }\n}\n</code></pre>\n<p>Report Executor is:</p>\n<pre><code>@Component\npublic class ReportExecutor implements Runnable {\n\n    @Autowired\n    private ApplicationContext appContext;\n\n    private Report reportDefinition;\n\n    @Override\n    public void run() {\n        SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);\n        System.out.println(reportDefinition);\n        IReportGenerator generator = appContext.getBean(\n            reportDefinition.getExecute(),\n            IReportGenerator.class);\n        JSONArray reportData = generator.generate(reportDefinition);\n\n        IReportNotifier notifier =\n            appContext.getBean(reportDefinition.getNotification().getExecute(), IReportNotifier.class);\n        notifier.send(reportDefinition, reportData);\n\n    }\n    public Report getTaskDefinition() {\n        return reportDefinition;\n    }\n    public void setTaskDefinition(Report reportDefinition) {\n        this.reportDefinition = reportDefinition;\n    }\n}\n</code></pre>\n<p>But I have also tried with:</p>\n<pre><code>@Component\npublic class ReportExecutor implements Runnable, ApplicationContextAware {\n\n    private ApplicationContext appContext;\n\n    private Report reportDefinition;\n\n    @Override\n    public void run() {\n        SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);\n        System.out.println(reportDefinition);\n        IReportGenerator generator = appContext.getBean(\n            reportDefinition.getExecute(),\n            IReportGenerator.class);\n        JSONArray reportData = generator.generate(reportDefinition);\n\n        IReportNotifier notifier =\n            appContext.getBean(reportDefinition.getNotification().getExecute(), IReportNotifier.class);\n        notifier.send(reportDefinition, reportData);\n\n    }\n\n    public Report getTaskDefinition() {\n        return reportDefinition;\n    }\n\n    public void setTaskDefinition(Report reportDefinition) {\n        this.reportDefinition = reportDefinition;\n    }\n\n    @Override\n    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {\n        this.appContext = applicationContext;\n    }\n\n}\n</code></pre>\n<p>Seems that I cannot get the application context here and end up to a NPE at:</p>\n<pre><code>        IReportGenerator generator = appContext.getBean(\n</code></pre>\n<p>The stackTrace is:</p>\n<pre><code>java.lang.NullPointerException: null\n    at ote.itarc.report.ReportExecutor.run(ReportExecutor.java:27) ~[classes/:?]\n    at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54) [spring-context-5.2.10.RELEASE.jar:5.2.10.RELEASE]\n    at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:93) [spring-context-5.2.10.RELEASE.jar:5.2.10.RELEASE]\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?]\n    at java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?]\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) [?:?]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]\n    at java.lang.Thread.run(Thread.java:836) [?:?]\n</code></pre>\n<p>ReportList object comes from yaml properties:</p>\n<pre><code>reportlist:\n  reports:\n    missinginfra:\n      desc: &quot;This report provides ...&quot;\n      execute: QueryReportGenerator\n      query: SELECT * FROM DUAL\n      cron: &quot;0 0/2 * 1/1 * ?&quot;\n      notification:\n        execute: EmailCsvReportNotifier\n        templateid: 0\n</code></pre>\n<p>With the following definition</p>\n<pre><code>@ConfigurationProperties(prefix = &quot;reportlist&quot;)\n@Configuration\n@EnableConfigurationProperties\npublic class ReportList {\n\n    private Map&lt;String, Report&gt; reports;\n\n    public Map&lt;String, Report&gt; getReports() {\n        return reports;\n    }\n\n    public void setReports(Map&lt;String, Report&gt; reports) {\n        this.reports = reports;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;ReportList [reports=&quot; + reports + &quot;]&quot;;\n    }\n}\n</code></pre>\n"},{"tags":["java","amazon-web-services","amazon-dynamodb","quarkus"],"answers":[{"tags":[],"owner":{"account_id":37969,"reputation":2730,"user_id":108758,"accept_rate":100,"display_name":"albogdano"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640091455,"creation_date":1640091455,"answer_id":70435852,"question_id":70361817,"body_markdown":"It&#39;s not odd - that&#39;s just how AWS DynamoDB works. Numbers are represented as strings in DynamoDB and Quarkus has nothing to do with that. See the [API reference][1]:\r\n\r\n\r\n&gt; **N** &lt;br&gt;\r\n&gt; An attribute of type Number. For example:\r\n&gt; \r\n&gt; &quot;N&quot;: &quot;123.45&quot;\r\n&gt; \r\n&gt; Numbers are sent across the network to DynamoDB as strings, to\r\n&gt; maximize compatibility across languages and libraries. However,\r\n&gt; DynamoDB treats them as number type attributes for mathematical\r\n&gt; operations.\r\n&gt; \r\n&gt; Type: String\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_AttributeValue.html","title":"DynamoDB + Quarkus - Odd type conversion","body":"<p>It's not odd - that's just how AWS DynamoDB works. Numbers are represented as strings in DynamoDB and Quarkus has nothing to do with that. See the <a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_AttributeValue.html\" rel=\"nofollow noreferrer\">API reference</a>:</p>\n<blockquote>\n<p><strong>N</strong> <br>\nAn attribute of type Number. For example:</p>\n<p>&quot;N&quot;: &quot;123.45&quot;</p>\n<p>Numbers are sent across the network to DynamoDB as strings, to\nmaximize compatibility across languages and libraries. However,\nDynamoDB treats them as number type attributes for mathematical\noperations.</p>\n<p>Type: String</p>\n</blockquote>\n"}],"owner":{"account_id":3649743,"reputation":1729,"user_id":3042207,"accept_rate":42,"display_name":"Fabrizio Stellato"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":382,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70435852,"answer_count":1,"score":1,"last_activity_date":1640091455,"creation_date":1639562952,"question_id":70361817,"body_markdown":"I have a table / entity on DynamoDB that should be mapped with number as fields.\r\n\r\nExample:\r\n\r\n    @RegisterForReflection\r\n    Foo {\r\n         Integer myfield;\r\n         ...\r\n    }\r\n\r\nI noticed that the AWS SDK used by *quarkus-amazon-dynamodb* dependency is built in a odd way.\r\n\r\nFor example,the n() method of  *software.amazon.awssdk.services.dynamodb.model.AttributeValue* \r\n\r\nreturn a java **String** instead of a **Number** type, so I have to convert the result with a clumsy **Integer.parseInt()** \r\n\r\n    public static Foo from(Map&lt;String, AttributeValue&gt; item) {\r\n        final var output = new Foo();\r\n        if (item != null &amp;&amp; !item.isEmpty()) {\r\n            output.setMyField(Integer.parseInt(item.get(MY_FIELD).n()));\r\n        }\r\n        return output;\r\n    }\r\n\r\nThe same happens if I have to fetch an item and use \r\n\r\n**AttributeValue.builder().n()**\r\n\r\n\tfinal Map&lt;String, AttributeValue&gt; key = new HashMap&lt;&gt;();\r\n        key.put(Foo.MY_FIELD, AttributeValue.builder().n(input.toString()).build()); // too bad!!\r\n\r\n        return GetItemRequest.builder()\r\n                .tableName(TABLE_NAME)\r\n                .key(key)\r\n                .attributesToGet(Foo.MY_FIELD)\r\n                .build();\r\n\r\nDo I miss something ?\r\n\r\n**PS**\r\n\r\nThe Quarkus dynamoDB documentation is [here][1]\r\n\r\n\r\n  [1]: https://quarkus.io/guides/amazon-dynamodb","title":"DynamoDB + Quarkus - Odd type conversion","body":"<p>I have a table / entity on DynamoDB that should be mapped with number as fields.</p>\n<p>Example:</p>\n<pre><code>@RegisterForReflection\nFoo {\n     Integer myfield;\n     ...\n}\n</code></pre>\n<p>I noticed that the AWS SDK used by <em>quarkus-amazon-dynamodb</em> dependency is built in a odd way.</p>\n<p>For example,the n() method of  <em>software.amazon.awssdk.services.dynamodb.model.AttributeValue</em></p>\n<p>return a java <strong>String</strong> instead of a <strong>Number</strong> type, so I have to convert the result with a clumsy <strong>Integer.parseInt()</strong></p>\n<pre><code>public static Foo from(Map&lt;String, AttributeValue&gt; item) {\n    final var output = new Foo();\n    if (item != null &amp;&amp; !item.isEmpty()) {\n        output.setMyField(Integer.parseInt(item.get(MY_FIELD).n()));\n    }\n    return output;\n}\n</code></pre>\n<p>The same happens if I have to fetch an item and use</p>\n<p><strong>AttributeValue.builder().n()</strong></p>\n<pre><code>final Map&lt;String, AttributeValue&gt; key = new HashMap&lt;&gt;();\n    key.put(Foo.MY_FIELD, AttributeValue.builder().n(input.toString()).build()); // too bad!!\n\n    return GetItemRequest.builder()\n            .tableName(TABLE_NAME)\n            .key(key)\n            .attributesToGet(Foo.MY_FIELD)\n            .build();\n</code></pre>\n<p>Do I miss something ?</p>\n<p><strong>PS</strong></p>\n<p>The Quarkus dynamoDB documentation is <a href=\"https://quarkus.io/guides/amazon-dynamodb\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":["java","json","jolt"],"answers":[{"tags":[],"owner":{"account_id":7712415,"reputation":60542,"user_id":5841306,"display_name":"Barbaros &#214;zhan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640090874,"creation_date":1640086289,"answer_id":70434738,"question_id":70433662,"body_markdown":"You can apply two successive **shift** transformations. Take **&quot;@(2,arrayIndex)&quot;** as a common factor in order to combine the elements under the commonly tagged arrays in the first transformation, and then display them as desired within the second one such as\r\n```json\r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;characteristic&quot;: {\r\n        &quot;*&quot;: {\r\n          &quot;value&quot;: {\r\n            &quot;@(1,value)&quot;: &quot;@(2,arrayIndex).@(2,name)&quot;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: &quot;bucketList[]&quot;\r\n    }\r\n  }\r\n]\r\n```\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Gj2BE.jpg","title":"Jolt- Based on the index need to iterate a list and form common object from the index","body":"<p>You can apply two successive <strong>shift</strong> transformations. Take <strong>&quot;@(2,arrayIndex)&quot;</strong> as a common factor in order to combine the elements under the commonly tagged arrays in the first transformation, and then display them as desired within the second one such as</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;characteristic&quot;: {\n        &quot;*&quot;: {\n          &quot;value&quot;: {\n            &quot;@(1,value)&quot;: &quot;@(2,arrayIndex).@(2,name)&quot;\n          }\n        }\n      }\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: &quot;bucketList[]&quot;\n    }\n  }\n]\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/Gj2BE.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Gj2BE.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":12598214,"reputation":73,"user_id":9161927,"display_name":"Chethan "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":461,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70434738,"answer_count":1,"score":0,"last_activity_date":1640091145,"creation_date":1640081173,"question_id":70433662,"body_markdown":"I have requirement of iterating a list which can have same tag name but different indexes like 0,1,2. So I need to iterate the list, take out the common indexes and from that index take out name and value tag and form as another list.\r\n\r\nRequest:\r\n```json\r\n{\r\n  &quot;characteristic&quot;: [\r\n    {\r\n      &quot;name&quot;: &quot;BucketName&quot;,\r\n      &quot;value&quot;: &quot;testName0&quot;,\r\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\r\n      &quot;arrayIndex&quot;: &quot;0&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;BucketName&quot;,\r\n      &quot;value&quot;: &quot;testName1&quot;,\r\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\r\n      &quot;arrayIndex&quot;: &quot;1&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;BucketName&quot;,\r\n      &quot;value&quot;: &quot;testName2&quot;,\r\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\r\n      &quot;arrayIndex&quot;: &quot;2&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;BucketId&quot;,\r\n      &quot;value&quot;: &quot;testId0&quot;,\r\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\r\n      &quot;arrayIndex&quot;: &quot;0&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;BucketId&quot;,\r\n      &quot;value&quot;: &quot;testId1&quot;,\r\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\r\n      &quot;arrayIndex&quot;: &quot;1&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;BucketId&quot;,\r\n      &quot;value&quot;: &quot;testId2&quot;,\r\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\r\n      &quot;arrayIndex&quot;: &quot;2&quot;\r\n    }\r\n  ]\r\n}\r\n```\r\nResponse Required:\r\n```json\r\n{\r\n  &quot;bucketList&quot;: [\r\n    {\r\n      &quot;BucketName&quot;: &quot;testName0&quot;,\r\n      &quot;BucketId&quot;: &quot;testId0&quot;\r\n    },\r\n    {\r\n      &quot;BucketName&quot;: &quot;testName1&quot;,\r\n      &quot;BucketId&quot;: &quot;testId1&quot;\r\n    },\r\n    {\r\n      &quot;BucketName&quot;: &quot;testName2&quot;,\r\n      &quot;BucketId&quot;: &quot;testId2&quot;\r\n    }\r\n  ]\r\n}\r\n```\r\nHow could we achieve this based on the index from alist?\r\n\r\nWhen More elements are there how to handle this case to skip if values not coming and add only tags that are coming. \r\nExample Request:\r\n```json\r\n{\r\n  &quot;characteristic&quot;: [\r\n    {\r\n      &quot;name&quot;: &quot;BucketName&quot;,\r\n      &quot;value&quot;: &quot;testName0&quot;,\r\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\r\n      &quot;arrayIndex&quot;: &quot;0&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;BucketId&quot;,\r\n      &quot;value&quot;: &quot;testId0&quot;,\r\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\r\n      &quot;arrayIndex&quot;: &quot;0&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;BucketType&quot;,\r\n      &quot;value&quot;: &quot;testType1&quot;,\r\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\r\n      &quot;arrayIndex&quot;: &quot;1&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;BucketId&quot;,\r\n      &quot;value&quot;: &quot;testId1&quot;,\r\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\r\n      &quot;arrayIndex&quot;: &quot;1&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;BucketName&quot;,\r\n      &quot;value&quot;: &quot;testName2&quot;,\r\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\r\n      &quot;arrayIndex&quot;: &quot;2&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;BucketId&quot;,\r\n      &quot;value&quot;: &quot;testId2&quot;,\r\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\r\n      &quot;arrayIndex&quot;: &quot;2&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;BucketId&quot;,\r\n      &quot;value&quot;: &quot;testId3&quot;,\r\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\r\n      &quot;arrayIndex&quot;: &quot;3&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;BucketName&quot;,\r\n      &quot;value&quot;: &quot;testName3&quot;,\r\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\r\n      &quot;arrayIndex&quot;: &quot;3&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;BucketData&quot;,\r\n      &quot;value&quot;: &quot;testData3&quot;,\r\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\r\n      &quot;arrayIndex&quot;: &quot;3&quot;\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nResponse expected:\r\n```json\r\n{\r\n\t&quot;bucketlist&quot;: [\r\n\t\t{\r\n\t\t\t&quot;BucketName&quot;: &quot;testName0&quot;,\r\n\t\t\t&quot;BucketId&quot;: &quot;testId0&quot;\r\n\t\t},\r\n\t\t{\r\n\t\t\t&quot;BucketType&quot;: &quot;testType1&quot;,\r\n\t\t\t&quot;BucketId&quot;: &quot;testId1&quot;\r\n\t\t},\r\n\t\t{\r\n\t\t\t&quot;BucketName&quot;: &quot;testName2&quot;,\r\n\t\t\t&quot;BucketId&quot;: &quot;testId2&quot;\r\n\t\t},\r\n\t\t{\r\n\t\t\t&quot;BucketName&quot;: &quot;testName3&quot;,\r\n\t\t\t&quot;BucketId&quot;: &quot;testId3&quot;,\r\n\t\t\t&quot;BucketData&quot;: &quot;testData3&quot;\r\n\t\t}\r\n\t]\r\n}\r\n```","title":"Jolt- Based on the index need to iterate a list and form common object from the index","body":"<p>I have requirement of iterating a list which can have same tag name but different indexes like 0,1,2. So I need to iterate the list, take out the common indexes and from that index take out name and value tag and form as another list.</p>\n<p>Request:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;characteristic&quot;: [\n    {\n      &quot;name&quot;: &quot;BucketName&quot;,\n      &quot;value&quot;: &quot;testName0&quot;,\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\n      &quot;arrayIndex&quot;: &quot;0&quot;\n    },\n    {\n      &quot;name&quot;: &quot;BucketName&quot;,\n      &quot;value&quot;: &quot;testName1&quot;,\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\n      &quot;arrayIndex&quot;: &quot;1&quot;\n    },\n    {\n      &quot;name&quot;: &quot;BucketName&quot;,\n      &quot;value&quot;: &quot;testName2&quot;,\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\n      &quot;arrayIndex&quot;: &quot;2&quot;\n    },\n    {\n      &quot;name&quot;: &quot;BucketId&quot;,\n      &quot;value&quot;: &quot;testId0&quot;,\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\n      &quot;arrayIndex&quot;: &quot;0&quot;\n    },\n    {\n      &quot;name&quot;: &quot;BucketId&quot;,\n      &quot;value&quot;: &quot;testId1&quot;,\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\n      &quot;arrayIndex&quot;: &quot;1&quot;\n    },\n    {\n      &quot;name&quot;: &quot;BucketId&quot;,\n      &quot;value&quot;: &quot;testId2&quot;,\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\n      &quot;arrayIndex&quot;: &quot;2&quot;\n    }\n  ]\n}\n</code></pre>\n<p>Response Required:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;bucketList&quot;: [\n    {\n      &quot;BucketName&quot;: &quot;testName0&quot;,\n      &quot;BucketId&quot;: &quot;testId0&quot;\n    },\n    {\n      &quot;BucketName&quot;: &quot;testName1&quot;,\n      &quot;BucketId&quot;: &quot;testId1&quot;\n    },\n    {\n      &quot;BucketName&quot;: &quot;testName2&quot;,\n      &quot;BucketId&quot;: &quot;testId2&quot;\n    }\n  ]\n}\n</code></pre>\n<p>How could we achieve this based on the index from alist?</p>\n<p>When More elements are there how to handle this case to skip if values not coming and add only tags that are coming.\nExample Request:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;characteristic&quot;: [\n    {\n      &quot;name&quot;: &quot;BucketName&quot;,\n      &quot;value&quot;: &quot;testName0&quot;,\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\n      &quot;arrayIndex&quot;: &quot;0&quot;\n    },\n    {\n      &quot;name&quot;: &quot;BucketId&quot;,\n      &quot;value&quot;: &quot;testId0&quot;,\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\n      &quot;arrayIndex&quot;: &quot;0&quot;\n    },\n    {\n      &quot;name&quot;: &quot;BucketType&quot;,\n      &quot;value&quot;: &quot;testType1&quot;,\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\n      &quot;arrayIndex&quot;: &quot;1&quot;\n    },\n    {\n      &quot;name&quot;: &quot;BucketId&quot;,\n      &quot;value&quot;: &quot;testId1&quot;,\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\n      &quot;arrayIndex&quot;: &quot;1&quot;\n    },\n    {\n      &quot;name&quot;: &quot;BucketName&quot;,\n      &quot;value&quot;: &quot;testName2&quot;,\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\n      &quot;arrayIndex&quot;: &quot;2&quot;\n    },\n    {\n      &quot;name&quot;: &quot;BucketId&quot;,\n      &quot;value&quot;: &quot;testId2&quot;,\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\n      &quot;arrayIndex&quot;: &quot;2&quot;\n    },\n    {\n      &quot;name&quot;: &quot;BucketId&quot;,\n      &quot;value&quot;: &quot;testId3&quot;,\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\n      &quot;arrayIndex&quot;: &quot;3&quot;\n    },\n    {\n      &quot;name&quot;: &quot;BucketName&quot;,\n      &quot;value&quot;: &quot;testName3&quot;,\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\n      &quot;arrayIndex&quot;: &quot;3&quot;\n    },\n    {\n      &quot;name&quot;: &quot;BucketData&quot;,\n      &quot;value&quot;: &quot;testData3&quot;,\n      &quot;@type&quot;: &quot;bucketInfo&quot;,\n      &quot;arrayIndex&quot;: &quot;3&quot;\n    }\n  ]\n}\n</code></pre>\n<p>Response expected:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;bucketlist&quot;: [\n        {\n            &quot;BucketName&quot;: &quot;testName0&quot;,\n            &quot;BucketId&quot;: &quot;testId0&quot;\n        },\n        {\n            &quot;BucketType&quot;: &quot;testType1&quot;,\n            &quot;BucketId&quot;: &quot;testId1&quot;\n        },\n        {\n            &quot;BucketName&quot;: &quot;testName2&quot;,\n            &quot;BucketId&quot;: &quot;testId2&quot;\n        },\n        {\n            &quot;BucketName&quot;: &quot;testName3&quot;,\n            &quot;BucketId&quot;: &quot;testId3&quot;,\n            &quot;BucketData&quot;: &quot;testData3&quot;\n        }\n    ]\n}\n</code></pre>\n"},{"tags":["java","jetty","embedded-jetty","zk"],"answers":[{"tags":[],"owner":{"account_id":406289,"reputation":47511,"user_id":775715,"accept_rate":100,"display_name":"Joakim Erdfelt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640027641,"creation_date":1640027641,"answer_id":70426880,"question_id":70426380,"body_markdown":"First, don&#39;t use Jetty 9.4.30, it&#39;s subject to a few security advisories now.\r\n\r\nSee: https://www.eclipse.org/jetty/security_reports.php\r\n\r\nUse at least use Jetty 9.4.44.v20210927.\r\n\r\nNext, check your Jetty Server dump for the zk servlets ...\r\n\r\n* `org.zkoss.zk.au.http.DHtmlUpdateServlet`\r\n* `org.zkoss.zk.ui.http.DHtmlLayoutServlet`\r\n\r\nIf those are present in your `WebAppContext` dump then your `zkwebfragment-&lt;ver&gt;.jar` was discovered and loaded by Jetty properly.  At this point, what you have left to do is how to properly configure for your zk lib using the zk techniques (you can ignore Jetty specific details from here on).\r\n\r\nIf they are not present, then first make sure your own webapp is using Servlet 3.0 (declared in your `WEB-INF/web.xml`) or newer for proper Web Fragment support (older Servlet specs don&#39;t support Web Fragment).\r\n\r\nNext, make sure the `zkwebfragment-&lt;ver&gt;.jar` is present on the WebApp classloader, as no web-fragments will load from any other classloader per spec, not even the application / server / container classloaders.\r\n\r\nIf you still don&#39;t see them, then go back to adjusting the default `Configuration` list, not the hardcoded list you have in your code snippet. \r\n(your list is missing required Configurations, and is in the wrong order for success, don&#39;t alter the default list, don&#39;t set the list on the webapp, only alter the server level defaults).\r\n\r\nAsk yourself, what does zk require? (eg: if it needs jndi, then you need the jndi specific configuration piece too).\r\n\r\nIf you are not stuck on Java 8, please use Jetty 10, as the entire `Configuration` layer was reworked to no longer allow bad configurations (in fact the old `setConfiguration()` methods are not even there, just the existence of support jars is enough to flag that you want that support and enable it, in the right place, with the right parent dependencies).\r\n","title":"How to get ZK webfragment working with embedded Jetty 9?","body":"<p>First, don't use Jetty 9.4.30, it's subject to a few security advisories now.</p>\n<p>See: <a href=\"https://www.eclipse.org/jetty/security_reports.php\" rel=\"nofollow noreferrer\">https://www.eclipse.org/jetty/security_reports.php</a></p>\n<p>Use at least use Jetty 9.4.44.v20210927.</p>\n<p>Next, check your Jetty Server dump for the zk servlets ...</p>\n<ul>\n<li><code>org.zkoss.zk.au.http.DHtmlUpdateServlet</code></li>\n<li><code>org.zkoss.zk.ui.http.DHtmlLayoutServlet</code></li>\n</ul>\n<p>If those are present in your <code>WebAppContext</code> dump then your <code>zkwebfragment-&lt;ver&gt;.jar</code> was discovered and loaded by Jetty properly.  At this point, what you have left to do is how to properly configure for your zk lib using the zk techniques (you can ignore Jetty specific details from here on).</p>\n<p>If they are not present, then first make sure your own webapp is using Servlet 3.0 (declared in your <code>WEB-INF/web.xml</code>) or newer for proper Web Fragment support (older Servlet specs don't support Web Fragment).</p>\n<p>Next, make sure the <code>zkwebfragment-&lt;ver&gt;.jar</code> is present on the WebApp classloader, as no web-fragments will load from any other classloader per spec, not even the application / server / container classloaders.</p>\n<p>If you still don't see them, then go back to adjusting the default <code>Configuration</code> list, not the hardcoded list you have in your code snippet.\n(your list is missing required Configurations, and is in the wrong order for success, don't alter the default list, don't set the list on the webapp, only alter the server level defaults).</p>\n<p>Ask yourself, what does zk require? (eg: if it needs jndi, then you need the jndi specific configuration piece too).</p>\n<p>If you are not stuck on Java 8, please use Jetty 10, as the entire <code>Configuration</code> layer was reworked to no longer allow bad configurations (in fact the old <code>setConfiguration()</code> methods are not even there, just the existence of support jars is enough to flag that you want that support and enable it, in the right place, with the right parent dependencies).</p>\n"},{"tags":[],"owner":{"account_id":897406,"reputation":897,"user_id":934373,"accept_rate":80,"display_name":"Hawk"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1640073637,"creation_date":1640070916,"answer_id":70431821,"question_id":70426380,"body_markdown":"the way to add a configuration is:\r\n\r\n```java\r\nConfiguration.ClassList classList = Configuration.ClassList.setServerDefault(server);\r\nclassList.addAfter(\r\n                &quot;org.eclipse.jetty.webapp.FragmentConfiguration&quot;,\r\n                &quot;org.eclipse.jetty.annotations.AnnotationConfiguration&quot;);\r\n```\r\n\r\nUpdate:\r\n\r\nI have tried\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jetty-annotations&lt;/artifactId&gt;\r\n            &lt;version&gt;10.0.7&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nThe zul works without adding any configuration.","title":"How to get ZK webfragment working with embedded Jetty 9?","body":"<p>the way to add a configuration is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Configuration.ClassList classList = Configuration.ClassList.setServerDefault(server);\nclassList.addAfter(\n                &quot;org.eclipse.jetty.webapp.FragmentConfiguration&quot;,\n                &quot;org.eclipse.jetty.annotations.AnnotationConfiguration&quot;);\n</code></pre>\n<p>Update:</p>\n<p>I have tried</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;\n        &lt;artifactId&gt;jetty-annotations&lt;/artifactId&gt;\n        &lt;version&gt;10.0.7&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>The zul works without adding any configuration.</p>\n"},{"tags":[],"owner":{"account_id":1140418,"reputation":5502,"user_id":1124509,"accept_rate":53,"display_name":"Reto H&#246;hener"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640079846,"creation_date":1640078625,"answer_id":70433131,"question_id":70426380,"body_markdown":"So, as Joakim pointed out, the [Servlet Specification 3.1][1] says:\r\n\r\n&gt; If a framework wants its META-INF/web-fragment.xml honored in such a\r\n&gt; way that it augments a web application&#39;s web.xml, the framework must\r\n&gt; be bundled within the web application&#39;s WEB-INF/lib directory. [...] In other words, only JAR files bundled in a web\r\n&gt; application&#39;s WEB-INF/lib directory, but not those higher up in the\r\n&gt; class loading delegation chain, need to be scanned for\r\n&gt; web-fragment.xml\r\n\r\nTherefore, I must ensure that `zkwebfragments.jar` is present on the WebAppContext&#39;s classpath.\r\n\r\nI changed my deployment strategy to look like this:\r\n\r\n    /myapp/\r\n      |-bin/\r\n      |  |- project jar (including annotated servlets and listeners)\r\n      |  |- all maven dependency jars (including jetty and zk libs)\r\n      |-webapp/\r\n      |  |-WEB-INF/\r\n      |  |  |-lib/ (EMTPY!)\r\n      |  |  |-web.xml\r\n      |  |  |-zk.xml\r\n      |  |-index.zul\r\n      |  |-other static resources\r\n      |-data/\r\n         |-application data (docker mounted host volume)\r\n\r\nIn the main class, adding the zkwebfragment.jar to the WebAppContext classpath:\r\n\r\n    Server server = new Server(port);\r\n    WebAppContext webapp = new WebAppContext();\r\n    webapp.setContextPath(&quot;/myapp&quot;);\r\n    webapp.setBaseResource(Resource.newResource(new File(isDocker ? &quot;/myapp/webapp&quot; : &quot;./webapp&quot;).getCanonicalFile()));\r\n    // order important: https://www.eclipse.org/jetty/documentation/jetty-9/index.html#configuring-webapps\r\n    webapp.setConfigurations(new Configuration[] { //\r\n        new WebInfConfiguration(), //\r\n        new WebXmlConfiguration(), //\r\n        new MetaInfConfiguration(), //\r\n        new FragmentConfiguration(), //\r\n        new AnnotationConfiguration(), //\r\n    });\r\n    // servlet spec: fragments are only loaded if they are bundled in WEB-INF/lib\r\n    webapp.setExtraClasspath(Arrays.asList(((URLClassLoader) MyAppMain.class.getClassLoader()).getURLs()).stream().filter(\r\n        u -&gt; u.toString().contains(&quot;zkwebfragment&quot;)).findAny().get().toString());\r\n    // scan for annotations in the container classpath (AppClassLoader)\r\n    webapp.setAttribute(&quot;org.eclipse.jetty.server.webapp.ContainerIncludeJarPattern&quot;, &quot;.*&quot;);\r\n    server.setHandler(webapp);\r\n    server.setDumpAfterStart(true);\r\n    server.start();\r\n       \r\n\r\nWhen running the main class from an IDE, all project classes and all maven dependencies are automatically added to the AppClassLoader.\r\n\r\nWhen running as docker container, the application is started with:\r\n\r\n    ENTRYPOINT [&quot;java&quot;, &quot;-cp&quot;, &quot;/myapp/bin/*&quot;, &quot;myapp.MyAppMain&quot;]\r\n\r\nwhich also adds the project jar and all maven dependency jars to the AppClassLoader.\r\n\r\nBy moving all jars out of `/myapp/webapp/META-INF/lib/*` to `/myapp/bin/*`, all jars exist only once in the classloader hierarchy, which also solves the [ZK replicate resources warnings][2]. Except for the `zkwebfragment.jar`, which exists twice. Jetty dump excerpts:\r\n\r\n    | |  +&gt; WebAppClassLoader{1509563803}@59fa1d9b\r\n    | |  |  +&gt; URLs size=1\r\n    | |  |  |  +&gt; file:/myapp/bin/zkwebfragment-9.6.0.1.jar\r\n    | |  |  +&gt; sun.misc.Launcher$AppClassLoader@2ff4acd0\r\n\r\nand further down:\r\n\r\n    | +&gt; sun.misc.Launcher$AppClassLoader@2ff4acd0\r\n    |    +&gt; URLs size=52\r\n    |    |  +&gt; file:/myapp/bin/myapp.jar\r\n    |    |  +&gt; file:/myapp/bin/jetty-annotations-9.4.44.v20210927.jar\r\n    |    |  +&gt; file:/myapp/bin/zkwebfragment-9.6.0.1.jar\r\n    |    |  +&gt; ...\r\n    |    +&gt; sun.misc.Launcher$ExtClassLoader@4ee285c6\r\n    |       +&gt; URLs size=9\r\n    |          +&gt; file:/opt/java/openjdk/lib/ext/sunpkcs11.jar\r\n    |          +&gt; ...\r\n\r\nNone of this would be necessary if I were using a Jetty installation and dropping my application bundled as a standard WAR. But I really wanted to try out this plain Java approach (from the Jetty docs):\r\n\r\n&gt; Jetty has a slogan, &quot;Don’t deploy your application in Jetty, deploy\r\n&gt; Jetty in your application!&quot; What this means is that as an alternative\r\n&gt; to bundling your application as a standard WAR to be deployed in\r\n&gt; Jetty, Jetty is designed to be a software component that can be\r\n&gt; instantiated and used in a Java program just like any POJO.\r\n\r\n  [1]: https://javaee.github.io/servlet-spec/downloads/servlet-3.1/Final/servlet-3_1-final.pdf\r\n  [2]: https://stackoverflow.com/questions/70415779/replicate-resource-warnings","title":"How to get ZK webfragment working with embedded Jetty 9?","body":"<p>So, as Joakim pointed out, the <a href=\"https://javaee.github.io/servlet-spec/downloads/servlet-3.1/Final/servlet-3_1-final.pdf\" rel=\"nofollow noreferrer\">Servlet Specification 3.1</a> says:</p>\n<blockquote>\n<p>If a framework wants its META-INF/web-fragment.xml honored in such a\nway that it augments a web application's web.xml, the framework must\nbe bundled within the web application's WEB-INF/lib directory. [...] In other words, only JAR files bundled in a web\napplication's WEB-INF/lib directory, but not those higher up in the\nclass loading delegation chain, need to be scanned for\nweb-fragment.xml</p>\n</blockquote>\n<p>Therefore, I must ensure that <code>zkwebfragments.jar</code> is present on the WebAppContext's classpath.</p>\n<p>I changed my deployment strategy to look like this:</p>\n<pre><code>/myapp/\n  |-bin/\n  |  |- project jar (including annotated servlets and listeners)\n  |  |- all maven dependency jars (including jetty and zk libs)\n  |-webapp/\n  |  |-WEB-INF/\n  |  |  |-lib/ (EMTPY!)\n  |  |  |-web.xml\n  |  |  |-zk.xml\n  |  |-index.zul\n  |  |-other static resources\n  |-data/\n     |-application data (docker mounted host volume)\n</code></pre>\n<p>In the main class, adding the zkwebfragment.jar to the WebAppContext classpath:</p>\n<pre><code>Server server = new Server(port);\nWebAppContext webapp = new WebAppContext();\nwebapp.setContextPath(&quot;/myapp&quot;);\nwebapp.setBaseResource(Resource.newResource(new File(isDocker ? &quot;/myapp/webapp&quot; : &quot;./webapp&quot;).getCanonicalFile()));\n// order important: https://www.eclipse.org/jetty/documentation/jetty-9/index.html#configuring-webapps\nwebapp.setConfigurations(new Configuration[] { //\n    new WebInfConfiguration(), //\n    new WebXmlConfiguration(), //\n    new MetaInfConfiguration(), //\n    new FragmentConfiguration(), //\n    new AnnotationConfiguration(), //\n});\n// servlet spec: fragments are only loaded if they are bundled in WEB-INF/lib\nwebapp.setExtraClasspath(Arrays.asList(((URLClassLoader) MyAppMain.class.getClassLoader()).getURLs()).stream().filter(\n    u -&gt; u.toString().contains(&quot;zkwebfragment&quot;)).findAny().get().toString());\n// scan for annotations in the container classpath (AppClassLoader)\nwebapp.setAttribute(&quot;org.eclipse.jetty.server.webapp.ContainerIncludeJarPattern&quot;, &quot;.*&quot;);\nserver.setHandler(webapp);\nserver.setDumpAfterStart(true);\nserver.start();\n   \n</code></pre>\n<p>When running the main class from an IDE, all project classes and all maven dependencies are automatically added to the AppClassLoader.</p>\n<p>When running as docker container, the application is started with:</p>\n<pre><code>ENTRYPOINT [&quot;java&quot;, &quot;-cp&quot;, &quot;/myapp/bin/*&quot;, &quot;myapp.MyAppMain&quot;]\n</code></pre>\n<p>which also adds the project jar and all maven dependency jars to the AppClassLoader.</p>\n<p>By moving all jars out of <code>/myapp/webapp/META-INF/lib/*</code> to <code>/myapp/bin/*</code>, all jars exist only once in the classloader hierarchy, which also solves the <a href=\"https://stackoverflow.com/questions/70415779/replicate-resource-warnings\">ZK replicate resources warnings</a>. Except for the <code>zkwebfragment.jar</code>, which exists twice. Jetty dump excerpts:</p>\n<pre><code>| |  +&gt; WebAppClassLoader{1509563803}@59fa1d9b\n| |  |  +&gt; URLs size=1\n| |  |  |  +&gt; file:/myapp/bin/zkwebfragment-9.6.0.1.jar\n| |  |  +&gt; sun.misc.Launcher$AppClassLoader@2ff4acd0\n</code></pre>\n<p>and further down:</p>\n<pre><code>| +&gt; sun.misc.Launcher$AppClassLoader@2ff4acd0\n|    +&gt; URLs size=52\n|    |  +&gt; file:/myapp/bin/myapp.jar\n|    |  +&gt; file:/myapp/bin/jetty-annotations-9.4.44.v20210927.jar\n|    |  +&gt; file:/myapp/bin/zkwebfragment-9.6.0.1.jar\n|    |  +&gt; ...\n|    +&gt; sun.misc.Launcher$ExtClassLoader@4ee285c6\n|       +&gt; URLs size=9\n|          +&gt; file:/opt/java/openjdk/lib/ext/sunpkcs11.jar\n|          +&gt; ...\n</code></pre>\n<p>None of this would be necessary if I were using a Jetty installation and dropping my application bundled as a standard WAR. But I really wanted to try out this plain Java approach (from the Jetty docs):</p>\n<blockquote>\n<p>Jetty has a slogan, &quot;Don’t deploy your application in Jetty, deploy\nJetty in your application!&quot; What this means is that as an alternative\nto bundling your application as a standard WAR to be deployed in\nJetty, Jetty is designed to be a software component that can be\ninstantiated and used in a Java program just like any POJO.</p>\n</blockquote>\n"}],"owner":{"account_id":1140418,"reputation":5502,"user_id":1124509,"accept_rate":53,"display_name":"Reto H&#246;hener"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":293,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70426880,"answer_count":3,"score":1,"last_activity_date":1640091100,"creation_date":1640024690,"question_id":70426380,"body_markdown":"This minimal embedded Jetty project starts up correctly, scans for annotations and finds and maps the annotated TestServlet.\r\n\r\nProject structure:\r\n\r\n    |-src/main/java/test\r\n    |  |-Test.java\r\n    |-webapp/\r\n    |  |-test.zul\r\n    |-pom.xml\r\n\r\nTest.java:\r\n\r\n    package test;\r\n    \r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    import java.net.URI;\r\n    \r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.annotation.WebServlet;\r\n    import javax.servlet.http.HttpServlet;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    \r\n    import org.eclipse.jetty.annotations.AnnotationConfiguration;\r\n    import org.eclipse.jetty.server.Server;\r\n    import org.eclipse.jetty.util.resource.Resource;\r\n    import org.eclipse.jetty.webapp.Configuration;\r\n    import org.eclipse.jetty.webapp.FragmentConfiguration;\r\n    import org.eclipse.jetty.webapp.MetaInfConfiguration;\r\n    import org.eclipse.jetty.webapp.WebAppContext;\r\n    import org.eclipse.jetty.webapp.WebInfConfiguration;\r\n    import org.eclipse.jetty.webapp.WebXmlConfiguration;\r\n    \r\n    public class Test {\r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t    Server server = new Server(8080);\r\n    \t    WebAppContext webapp = new WebAppContext();\r\n    \t    webapp.setContextPath(&quot;/test&quot;);\r\n    \t    webapp.setBaseResource(Resource.newResource(new File(&quot;webapp&quot;).getCanonicalFile()));\r\n            // https://www.eclipse.org/jetty/documentation/jetty-9/index.html#configuring-webapps\r\n            // the order is important\r\n    \t    webapp.setConfigurations(new Configuration[] { //\r\n    \t        new WebInfConfiguration(), //\r\n    \t        new WebXmlConfiguration(), //\r\n    \t        new MetaInfConfiguration(), //\r\n    \t        new FragmentConfiguration(), //\r\n                // new EnvConfiguration(), // not needed\r\n                // new PlusConfiguration(), // not needed\r\n    \t        new AnnotationConfiguration(), //\r\n                // new JettyWebXmlConfiguration(), // no jetty-web.xml\r\n    \t    });\r\n    \t    webapp.setAttribute(&quot;org.eclipse.jetty.server.webapp.ContainerIncludeJarPattern&quot;, &quot;.*&quot;);\r\n    \t    server.setHandler(webapp);\r\n    \t    server.setDumpAfterStart(true);\r\n    \t    server.start();\r\n    \t    java.awt.Desktop.getDesktop().browse(new URI(&quot;http://localhost:8080/test/TestServlet&quot;)) /* working */;\r\n    \t    java.awt.Desktop.getDesktop().browse(new URI(&quot;http://localhost:8080/test/test.zul&quot;)) /* not working */;\r\n    \t}\r\n    \t\r\n    \t@WebServlet(urlPatterns = {&quot;/TestServlet&quot;})\r\n    \tpublic static final class TestServlet extends HttpServlet {\r\n    \t\t@Override\r\n    \t\tprotected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\r\n    \t\t\tresp.getWriter().write(&quot;Test 1&quot;);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\npom.xml:\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;groupId&gt;test&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;test&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jetty-annotations&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;9.4.30.v20200611&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.zkoss.zk&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;zkbind&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;9.6.0.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    &lt;/project&gt;\r\n\r\ntest.zul:\r\n\r\n    &lt;zk&gt;&lt;label value=&quot;hello&quot;/&gt;&lt;/zk&gt;\r\n\r\nThe zk web fragment seems to be &#39;noted&#39; somehow:\r\n\r\n    |  +@ org.eclipse.jetty.webFragments.cache = java.util.concurrent.ConcurrentHashMap@bb35baa5{size=30}\r\n    |  |  +@ file:///C:/Users/r.hoehener/.m2/repository/org/zkoss/common/zcommon/9.6.0.1/zcommon-9.6.0.1.jar = org.eclipse.jetty.util.resource.EmptyResource@3fc39309\r\n    |  |  +@ file:///C:/Users/r.hoehener/.m2/repository/org/eclipse/jetty/jetty-annotations/9.4.30.v20200611/jetty-annotations-9.4.30.v20200611.jar = org.eclipse.jetty.util.resource.EmptyResource@3fc39309\r\n    |  |  +@ file:///C:/Users/r.hoehener/.m2/repository/org/eclipse/jetty/jetty-io/9.4.30.v20200611/jetty-io-9.4.30.v20200611.jar = org.eclipse.jetty.util.resource.EmptyResource@3fc39309\r\n    |  |  +@ file:///C:/Users/r.hoehener/.m2/repository/org/apache-extras/beanshell/bsh/2.0b6/bsh-2.0b6.jar = org.eclipse.jetty.util.resource.EmptyResource@3fc39309\r\n    |  |  +@ file:///C:/Users/r.hoehener/.m2/repository/org/zkoss/zk/zkwebfragment/9.6.0.1/zkwebfragment-9.6.0.1.jar = jar:file:///C:/Users/r.hoehener/.m2/repository/org/zkoss/zk/zkwebfragment/9.6.0.1/zkwebfragment-9.6.0.1.jar!/META-INF/web-fragment.xml\r\n    ...\r\n\r\nBut the test.zul is displayed as plain text. The ZK engine is not getting initialized.\r\n\r\nAny ideas why?\r\n\r\n\r\nEdit: In defense of the way I do the configuration: This is straight from the 9.x docs, which say &#39;You have a number of options for how to make Jetty use a different list of Configurations.&#39;, including &#39;Setting the list directly on the WebAppContext&#39;:\r\n\r\n    &lt;Configure class=&quot;org.eclipse.jetty.webapp.WebAppContext&quot;&gt;\r\n      &lt;Set name=&quot;war&quot;&gt;&lt;SystemProperty name=&quot;jetty.base&quot; default=&quot;.&quot;/&gt;/webapps/my-cool-webapp&lt;/Set&gt;\r\n      &lt;Set name=&quot;configurationClasses&quot;&gt;\r\n        &lt;Array type=&quot;java.lang.String&quot;&gt;\r\n          &lt;Item&gt;org.eclipse.jetty.webapp.WebInfConfiguration&lt;/Item&gt;\r\n          &lt;Item&gt;org.eclipse.jetty.webapp.WebXmlConfiguration&lt;/Item&gt;\r\n          &lt;Item&gt;org.eclipse.jetty.webapp.MetaInfConfiguration&lt;/Item&gt;\r\n          &lt;Item&gt;org.eclipse.jetty.webapp.FragmentConfiguration&lt;/Item&gt;\r\n          &lt;Item&gt;org.eclipse.jetty.plus.webapp.EnvConfiguration&lt;/Item&gt;\r\n          &lt;Item&gt;org.eclipse.jetty.plus.webapp.PlusConfiguration&lt;/Item&gt;\r\n          &lt;Item&gt;org.eclipse.jetty.annotations.AnnotationConfiguration&lt;/Item&gt;\r\n          &lt;Item&gt;org.eclipse.jetty.webapp.JettyWebXmlConfiguration&lt;/Item&gt;\r\n        &lt;/Array&gt;\r\n      &lt;/Set&gt;\r\n    &lt;/Configure&gt;","title":"How to get ZK webfragment working with embedded Jetty 9?","body":"<p>This minimal embedded Jetty project starts up correctly, scans for annotations and finds and maps the annotated TestServlet.</p>\n<p>Project structure:</p>\n<pre><code>|-src/main/java/test\n|  |-Test.java\n|-webapp/\n|  |-test.zul\n|-pom.xml\n</code></pre>\n<p>Test.java:</p>\n<pre><code>package test;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.net.URI;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport org.eclipse.jetty.annotations.AnnotationConfiguration;\nimport org.eclipse.jetty.server.Server;\nimport org.eclipse.jetty.util.resource.Resource;\nimport org.eclipse.jetty.webapp.Configuration;\nimport org.eclipse.jetty.webapp.FragmentConfiguration;\nimport org.eclipse.jetty.webapp.MetaInfConfiguration;\nimport org.eclipse.jetty.webapp.WebAppContext;\nimport org.eclipse.jetty.webapp.WebInfConfiguration;\nimport org.eclipse.jetty.webapp.WebXmlConfiguration;\n\npublic class Test {\n    public static void main(String[] args) throws Exception {\n        Server server = new Server(8080);\n        WebAppContext webapp = new WebAppContext();\n        webapp.setContextPath(&quot;/test&quot;);\n        webapp.setBaseResource(Resource.newResource(new File(&quot;webapp&quot;).getCanonicalFile()));\n        // https://www.eclipse.org/jetty/documentation/jetty-9/index.html#configuring-webapps\n        // the order is important\n        webapp.setConfigurations(new Configuration[] { //\n            new WebInfConfiguration(), //\n            new WebXmlConfiguration(), //\n            new MetaInfConfiguration(), //\n            new FragmentConfiguration(), //\n            // new EnvConfiguration(), // not needed\n            // new PlusConfiguration(), // not needed\n            new AnnotationConfiguration(), //\n            // new JettyWebXmlConfiguration(), // no jetty-web.xml\n        });\n        webapp.setAttribute(&quot;org.eclipse.jetty.server.webapp.ContainerIncludeJarPattern&quot;, &quot;.*&quot;);\n        server.setHandler(webapp);\n        server.setDumpAfterStart(true);\n        server.start();\n        java.awt.Desktop.getDesktop().browse(new URI(&quot;http://localhost:8080/test/TestServlet&quot;)) /* working */;\n        java.awt.Desktop.getDesktop().browse(new URI(&quot;http://localhost:8080/test/test.zul&quot;)) /* not working */;\n    }\n    \n    @WebServlet(urlPatterns = {&quot;/TestServlet&quot;})\n    public static final class TestServlet extends HttpServlet {\n        @Override\n        protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n            resp.getWriter().write(&quot;Test 1&quot;);\n        }\n    }\n}\n</code></pre>\n<p>pom.xml:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;test&lt;/groupId&gt;\n    &lt;artifactId&gt;test&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;\n            &lt;artifactId&gt;jetty-annotations&lt;/artifactId&gt;\n            &lt;version&gt;9.4.30.v20200611&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.zkoss.zk&lt;/groupId&gt;\n            &lt;artifactId&gt;zkbind&lt;/artifactId&gt;\n            &lt;version&gt;9.6.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>test.zul:</p>\n<pre><code>&lt;zk&gt;&lt;label value=&quot;hello&quot;/&gt;&lt;/zk&gt;\n</code></pre>\n<p>The zk web fragment seems to be 'noted' somehow:</p>\n<pre><code>|  +@ org.eclipse.jetty.webFragments.cache = java.util.concurrent.ConcurrentHashMap@bb35baa5{size=30}\n|  |  +@ file:///C:/Users/r.hoehener/.m2/repository/org/zkoss/common/zcommon/9.6.0.1/zcommon-9.6.0.1.jar = org.eclipse.jetty.util.resource.EmptyResource@3fc39309\n|  |  +@ file:///C:/Users/r.hoehener/.m2/repository/org/eclipse/jetty/jetty-annotations/9.4.30.v20200611/jetty-annotations-9.4.30.v20200611.jar = org.eclipse.jetty.util.resource.EmptyResource@3fc39309\n|  |  +@ file:///C:/Users/r.hoehener/.m2/repository/org/eclipse/jetty/jetty-io/9.4.30.v20200611/jetty-io-9.4.30.v20200611.jar = org.eclipse.jetty.util.resource.EmptyResource@3fc39309\n|  |  +@ file:///C:/Users/r.hoehener/.m2/repository/org/apache-extras/beanshell/bsh/2.0b6/bsh-2.0b6.jar = org.eclipse.jetty.util.resource.EmptyResource@3fc39309\n|  |  +@ file:///C:/Users/r.hoehener/.m2/repository/org/zkoss/zk/zkwebfragment/9.6.0.1/zkwebfragment-9.6.0.1.jar = jar:file:///C:/Users/r.hoehener/.m2/repository/org/zkoss/zk/zkwebfragment/9.6.0.1/zkwebfragment-9.6.0.1.jar!/META-INF/web-fragment.xml\n...\n</code></pre>\n<p>But the test.zul is displayed as plain text. The ZK engine is not getting initialized.</p>\n<p>Any ideas why?</p>\n<p>Edit: In defense of the way I do the configuration: This is straight from the 9.x docs, which say 'You have a number of options for how to make Jetty use a different list of Configurations.', including 'Setting the list directly on the WebAppContext':</p>\n<pre><code>&lt;Configure class=&quot;org.eclipse.jetty.webapp.WebAppContext&quot;&gt;\n  &lt;Set name=&quot;war&quot;&gt;&lt;SystemProperty name=&quot;jetty.base&quot; default=&quot;.&quot;/&gt;/webapps/my-cool-webapp&lt;/Set&gt;\n  &lt;Set name=&quot;configurationClasses&quot;&gt;\n    &lt;Array type=&quot;java.lang.String&quot;&gt;\n      &lt;Item&gt;org.eclipse.jetty.webapp.WebInfConfiguration&lt;/Item&gt;\n      &lt;Item&gt;org.eclipse.jetty.webapp.WebXmlConfiguration&lt;/Item&gt;\n      &lt;Item&gt;org.eclipse.jetty.webapp.MetaInfConfiguration&lt;/Item&gt;\n      &lt;Item&gt;org.eclipse.jetty.webapp.FragmentConfiguration&lt;/Item&gt;\n      &lt;Item&gt;org.eclipse.jetty.plus.webapp.EnvConfiguration&lt;/Item&gt;\n      &lt;Item&gt;org.eclipse.jetty.plus.webapp.PlusConfiguration&lt;/Item&gt;\n      &lt;Item&gt;org.eclipse.jetty.annotations.AnnotationConfiguration&lt;/Item&gt;\n      &lt;Item&gt;org.eclipse.jetty.webapp.JettyWebXmlConfiguration&lt;/Item&gt;\n    &lt;/Array&gt;\n  &lt;/Set&gt;\n&lt;/Configure&gt;\n</code></pre>\n"},{"tags":["java","itext","pdfbox"],"comments":[{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":2,"creation_date":1640094270,"post_id":70435706,"comment_id":124509827,"body_markdown":"You likely need something on top of PDFBox, e.g. boxable or easytable.","body":"You likely need something on top of PDFBox, e.g. boxable or easytable."},{"owner":{"account_id":18026184,"reputation":69,"user_id":13564877,"display_name":"brayan milian"},"score":0,"creation_date":1640097450,"post_id":70435706,"comment_id":124511219,"body_markdown":"@TilmanHausherr Thanks dude, I saw some examples and the implementation it&#39;s easy, for boxable","body":"@TilmanHausherr Thanks dude, I saw some examples and the implementation it&#39;s easy, for boxable"},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1641299225,"post_id":70435706,"comment_id":124764192,"body_markdown":"Please delete the question or answer it yourself.","body":"Please delete the question or answer it yourself."}],"owner":{"account_id":18026184,"reputation":69,"user_id":13564877,"display_name":"brayan milian"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":567,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1640090812,"creation_date":1640090812,"question_id":70435706,"body_markdown":"I&#39;m new to java, and I&#39;m learning how to create PDF, I was using Itext to create PDF, but because it handles a license I stopped using it, and started using PDFbox. I&#39;ve searched the internet for how to convert from CSV to PDF, but I can&#39;t find an example of how to use margins, or how to align the content.\r\n\r\nUsing Itext, this is my code using Itext7, it works perfectly but i want to migrate it to PDFbox\r\n```\r\n   public static boolean isEmpty(File rutaCSV) {\r\n        if(rutaCSV.isDirectory()){\r\n            String[] csvFiles = rutaCSV.list();\r\n            if (csvFiles.length &gt; 0) {\r\n                for (String cadena : csvFiles){\r\n                    readCSV(&quot;path&quot;);\r\n                    try{\r\n                       File csvFile = new File(&quot;path&quot;);\r\n                       if (csvFile.exists()){\r\n                           csvFile.delete();\r\n                           return false;\r\n                           \r\n                       }\r\n                        System.out.println(csvFile.delete());\r\n                    }catch(Exception ex){\r\n                        System.out.println(ex);\r\n                    }\r\n                }\r\n                return true;\r\n            }else{\r\n                System.out.println(&quot;There&#39;s not files&quot;);\r\n                return true;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n     public static void readCSV(String file, String cadena){\r\n        try{\r\n            FileReader filereader = new FileReader(file);\r\n            // Configuraci&#243;n para leer el archivo con ;\r\n\r\n            CSVParser parser = new CSVParserBuilder().withSeparator(&#39;;&#39;).build();\r\n            \r\n            CSVReader csvReader = new CSVReaderBuilder(filereader)\r\n                                  .withCSVParser(parser)\r\n                                  .build();\r\n            \r\n            Document pdfDocument = new Document();\r\n            pdfDocument.addTitle(&quot;Some&quot;);\r\n            pdfDocument.setMargins(0, 0,25,25);\r\n            String fileName = cadena.replaceFirst(&quot;[.][^.]+$&quot;, &quot;&quot;);\r\n            PdfWriter.getInstance(pdfDocument, new FileOutputStream(&quot;path&quot;+fileName+&quot;.pdf&quot;));\r\n            \r\n            pdfDocument.open();\r\n            \r\n            PdfPTable tableData = new PdfPTable(5);\r\n                        \r\n            PdfPCell cells;\r\n            \r\n            // Lista para guardar los datos le&#237;dos\r\n            List&lt;String[]&gt; allData = csvReader.readAll();\r\n            for (String[] row : allData) {\r\n                for (String cell : row) {\r\n                    cells =new PdfPCell(new Phrase(cell));\r\n                    tableData.addCell(cells);\r\n                }\r\n            }\r\n            pdfDocument.addTitle(&quot;Some&quot;);\r\n            pdfDocument.add(tableData);                       \r\n            pdfDocument.close(); \r\n        }catch(Exception ex){\r\n            ex.printStackTrace();\r\n            System.out.println(&quot;error&quot;);\r\n        }\r\n    }\r\n```\r\nUsing PDFBox\r\n``` \r\n    public static void main(String[] args) throws IOException, CsvException {\r\n        PDDocument document = new PDDocument();\r\n        PDPage page = new PDPage(PDRectangle.A4);\r\n        document.addPage(page);\r\n        PDPageContentStream content = new PDPageContentStream(document, page);\r\n        try{\r\n            String file = &quot;C:\\\\Users\\\\brayan.milian\\\\Desktop\\\\pruebaFTP\\\\prueba.csv&quot;;\r\n            FileReader filereader = new FileReader(file);\r\n            CSVParser parser = new CSVParserBuilder().withSeparator(&#39;;&#39;).build();\r\n\r\n            CSVReader csvReader = new CSVReaderBuilder(filereader)\r\n                                  .withCSVParser(parser)\r\n                                  .build();\r\n            List&lt;String[]&gt; allData = csvReader.readAll();    \r\n            for (String row[] : allData) {\r\n                for (String cell : row){\r\n                    content.beginText();\r\n                    content.setFont(PDType1Font.TIMES_BOLD, 12);\r\n                    content.showText(cell);\r\n                    content.endText(); \r\n                }\r\n            }  \r\n        content.close();\r\n        }catch(Exception ex){\r\n            System.out.println(&quot;dja&quot;);\r\n        }\r\n```\r\nCan anyone help me?","title":"Csv to PDF PDFBOX?","body":"<p>I'm new to java, and I'm learning how to create PDF, I was using Itext to create PDF, but because it handles a license I stopped using it, and started using PDFbox. I've searched the internet for how to convert from CSV to PDF, but I can't find an example of how to use margins, or how to align the content.</p>\n<p>Using Itext, this is my code using Itext7, it works perfectly but i want to migrate it to PDFbox</p>\n<pre><code>   public static boolean isEmpty(File rutaCSV) {\n        if(rutaCSV.isDirectory()){\n            String[] csvFiles = rutaCSV.list();\n            if (csvFiles.length &gt; 0) {\n                for (String cadena : csvFiles){\n                    readCSV(&quot;path&quot;);\n                    try{\n                       File csvFile = new File(&quot;path&quot;);\n                       if (csvFile.exists()){\n                           csvFile.delete();\n                           return false;\n                           \n                       }\n                        System.out.println(csvFile.delete());\n                    }catch(Exception ex){\n                        System.out.println(ex);\n                    }\n                }\n                return true;\n            }else{\n                System.out.println(&quot;There's not files&quot;);\n                return true;\n            }\n        }\n        return true;\n    }\n     public static void readCSV(String file, String cadena){\n        try{\n            FileReader filereader = new FileReader(file);\n            // Configuración para leer el archivo con ;\n\n            CSVParser parser = new CSVParserBuilder().withSeparator(';').build();\n            \n            CSVReader csvReader = new CSVReaderBuilder(filereader)\n                                  .withCSVParser(parser)\n                                  .build();\n            \n            Document pdfDocument = new Document();\n            pdfDocument.addTitle(&quot;Some&quot;);\n            pdfDocument.setMargins(0, 0,25,25);\n            String fileName = cadena.replaceFirst(&quot;[.][^.]+$&quot;, &quot;&quot;);\n            PdfWriter.getInstance(pdfDocument, new FileOutputStream(&quot;path&quot;+fileName+&quot;.pdf&quot;));\n            \n            pdfDocument.open();\n            \n            PdfPTable tableData = new PdfPTable(5);\n                        \n            PdfPCell cells;\n            \n            // Lista para guardar los datos leídos\n            List&lt;String[]&gt; allData = csvReader.readAll();\n            for (String[] row : allData) {\n                for (String cell : row) {\n                    cells =new PdfPCell(new Phrase(cell));\n                    tableData.addCell(cells);\n                }\n            }\n            pdfDocument.addTitle(&quot;Some&quot;);\n            pdfDocument.add(tableData);                       \n            pdfDocument.close(); \n        }catch(Exception ex){\n            ex.printStackTrace();\n            System.out.println(&quot;error&quot;);\n        }\n    }\n</code></pre>\n<p>Using PDFBox</p>\n<pre><code>    public static void main(String[] args) throws IOException, CsvException {\n        PDDocument document = new PDDocument();\n        PDPage page = new PDPage(PDRectangle.A4);\n        document.addPage(page);\n        PDPageContentStream content = new PDPageContentStream(document, page);\n        try{\n            String file = &quot;C:\\\\Users\\\\brayan.milian\\\\Desktop\\\\pruebaFTP\\\\prueba.csv&quot;;\n            FileReader filereader = new FileReader(file);\n            CSVParser parser = new CSVParserBuilder().withSeparator(';').build();\n\n            CSVReader csvReader = new CSVReaderBuilder(filereader)\n                                  .withCSVParser(parser)\n                                  .build();\n            List&lt;String[]&gt; allData = csvReader.readAll();    \n            for (String row[] : allData) {\n                for (String cell : row){\n                    content.beginText();\n                    content.setFont(PDType1Font.TIMES_BOLD, 12);\n                    content.showText(cell);\n                    content.endText(); \n                }\n            }  \n        content.close();\n        }catch(Exception ex){\n            System.out.println(&quot;dja&quot;);\n        }\n</code></pre>\n<p>Can anyone help me?</p>\n"},{"tags":["java","swing","colors","paintcomponent","translucency"],"answers":[{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"down_vote_count":0,"up_vote_count":50,"is_accepted":true,"score":50,"last_activity_date":1640090767,"creation_date":1321181022,"answer_id":8111007,"question_id":8110975,"body_markdown":"    int alpha = 127; // 50% transparent\r\n    Color myColour = new Color(255, value, value, alpha);\r\n\r\nSee the [`Color` constructors](https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/Color.html#constructor-summary) that take 4 arguments (of either `int` or `float`) for further details.","title":"How to make a rectangle in Graphics in a transparent colour?","body":"<pre><code>int alpha = 127; // 50% transparent\nColor myColour = new Color(255, value, value, alpha);\n</code></pre>\n<p>See the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/Color.html#constructor-summary\" rel=\"nofollow noreferrer\"><code>Color</code> constructors</a> that take 4 arguments (of either <code>int</code> or <code>float</code>) for further details.</p>\n"},{"tags":[],"owner":{"account_id":955055,"reputation":3960,"user_id":980521,"display_name":"ecle"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1586257703,"creation_date":1321187954,"answer_id":8111574,"question_id":8110975,"body_markdown":"Try this: (but it will works for Graphics2D objeccts not for Graphics)\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    protected void paintComponent(Graphics2D g) {\r\n        if (point != null) {\r\n            int value = this.chooseColour(); // used to return how bright the red is needed\r\n            g.setComposite(AlphaComposite.SrcOver.derive(0.8f));\r\n    \r\n            if(value !=0){\r\n                Color myColour = new Color(255, value,value );\r\n                g.setColor(myColour);\r\n                g.fillRect(point.x, point.y, this.width, this.height);\r\n            }\r\n            else{\r\n                Color myColour = new Color(value, 0,0 );\r\n                g.setColor(myColour);\r\n                g.fillRect(point.x, point.y, this.width, this.height);\r\n            }\r\n\r\n            g.setComposite(AlphaComposite.SrcOver); \r\n        }\r\n    }\r\n\r\n","title":"How to make a rectangle in Graphics in a transparent colour?","body":"<p>Try this: (but it will works for Graphics2D objeccts not for Graphics)</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>protected void paintComponent(Graphics2D g) {\n    if (point != null) {\n        int value = this.chooseColour(); // used to return how bright the red is needed\n        g.setComposite(AlphaComposite.SrcOver.derive(0.8f));\n\n        if(value !=0){\n            Color myColour = new Color(255, value,value );\n            g.setColor(myColour);\n            g.fillRect(point.x, point.y, this.width, this.height);\n        }\n        else{\n            Color myColour = new Color(value, 0,0 );\n            g.setColor(myColour);\n            g.fillRect(point.x, point.y, this.width, this.height);\n        }\n\n        g.setComposite(AlphaComposite.SrcOver); \n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1026917,"reputation":2060,"user_id":1036032,"accept_rate":51,"display_name":"ict1991"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57148,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":8111007,"answer_count":2,"score":21,"last_activity_date":1640090767,"creation_date":1321180619,"question_id":8110975,"body_markdown":"I&#39;m trying to paint a rectangle on my application in a red shade but I need to make it sort of transparent so that the component under it will still show.  However I still want that some colour will still show. The method where I&#39;m drawing is the following:\r\n\r\n    protected void paintComponent(Graphics g) {\r\n        if (point != null) {\r\n            int value = this.chooseColour(); // used to return how bright the red is needed\r\n     \r\n            if(value !=0){\r\n                Color myColour = new Color(255, value,value );\r\n                g.setColor(myColour);\r\n                g.fillRect(point.x, point.y, this.width, this.height);\r\n            }\r\n            else{\r\n                Color myColour = new Color(value, 0,0 );\r\n                g.setColor(myColour);\r\n                g.fillRect(point.x, point.y, this.width, this.height);\r\n            }\r\n        }\r\n    }\r\n\r\nDoes anyone know how I can make the red shade a bit transparent?  I don&#39;t need it completely transparent though.","title":"How to make a rectangle in Graphics in a transparent colour?","body":"<p>I'm trying to paint a rectangle on my application in a red shade but I need to make it sort of transparent so that the component under it will still show.  However I still want that some colour will still show. The method where I'm drawing is the following:</p>\n\n<pre><code>protected void paintComponent(Graphics g) {\n    if (point != null) {\n        int value = this.chooseColour(); // used to return how bright the red is needed\n\n        if(value !=0){\n            Color myColour = new Color(255, value,value );\n            g.setColor(myColour);\n            g.fillRect(point.x, point.y, this.width, this.height);\n        }\n        else{\n            Color myColour = new Color(value, 0,0 );\n            g.setColor(myColour);\n            g.fillRect(point.x, point.y, this.width, this.height);\n        }\n    }\n}\n</code></pre>\n\n<p>Does anyone know how I can make the red shade a bit transparent?  I don't need it completely transparent though.</p>\n"},{"tags":["java","sorting","collections","random-access"],"comments":[{"owner":{"account_id":21253514,"reputation":3,"user_id":17195250,"display_name":"Guillaume Valhall&#39;art Roussel"},"score":0,"creation_date":1640086672,"post_id":70434539,"comment_id":124506995,"body_markdown":"@Sweeper Sorry about that, I edited my question and then forgot about the initial title, it is fixed now.","body":"@Sweeper Sorry about that, I edited my question and then forgot about the initial title, it is fixed now."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1640105827,"post_id":70434539,"comment_id":124514658,"body_markdown":"Of course, this is not possible with constant time complexity. But apparently, you are fine with an answer that just rewrites the code to look more complicated by using the Stream API, not even mentioning time complexity…","body":"Of course, this is not possible with constant time complexity. But apparently, you are fine with an answer that just rewrites the code to look more complicated by using the Stream API, not even mentioning time complexity…"},{"owner":{"account_id":21253514,"reputation":3,"user_id":17195250,"display_name":"Guillaume Valhall&#39;art Roussel"},"score":0,"creation_date":1640111364,"post_id":70434539,"comment_id":124516829,"body_markdown":"@Holger Finally I found a solution with O(number of species) using the Map, but it is too specific to my requirements for me to evoke it. I believe it wouldn&#39;t be likely to help other people. I accepted the first answer because it helped me to understand better what I was trying to do.","body":"@Holger Finally I found a solution with O(number of species) using the Map, but it is too specific to my requirements for me to evoke it. I believe it wouldn&#39;t be likely to help other people. I accepted the first answer because it helped me to understand better what I was trying to do."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1640166295,"post_id":70434539,"comment_id":124529126,"body_markdown":"Your question does already have O(number of elements), as you even said yourself. So if you don’t want a better time complexity, which is as said impossible anyway, then it’s not clear what you are asking for. Picking a random element without an intermediate `ArrayList` is possible, if you want that, just ask the right question.","body":"Your question does already have O(number of elements), as you even said yourself. So if you don’t want a better time complexity, which is as said impossible anyway, then it’s not clear what you are asking for. Picking a random element without an intermediate <code>ArrayList</code> is possible, if you want that, just ask the right question."}],"answers":[{"tags":[],"owner":{"account_id":10814530,"reputation":4195,"user_id":7954021,"display_name":"Renis1235"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640088491,"creation_date":1640088491,"answer_id":70435226,"question_id":70434539,"body_markdown":"What you are performing is filtering, and when filtering you have to check each element whether they need to be taken out or not. You could try to use alphabetical sorting on the keys and stop filtering once the key is alphabetically larger than your filtering (unwanted) key.\r\n\r\nYour code can also be thoroughly shortened by using java streams:\r\n\r\n```java\r\nHashMap&lt;String, ArrayList&lt;Fish&gt;&gt; fishesBySpecies = new HashMap&lt;&gt;();\r\n\r\n// Insert some fishes...\r\n// Fish has a String attribute that describes its species\r\n// Now we want to pick a random Fish that isn&#39;t from the unwantedSpecies\r\n\r\nString unwanted = &quot;unwanted species&quot;;\r\n\r\nfishesBySpecies.keySet().stream() // Get the keyset and create a stream out of it\r\n        .filter(key -&gt; !key.equalsIgnoreCase(unwanted)) // If key is not equal to unwanted then leave it in else remove it\r\n        .forEach(filteredKey -&gt;\r\n                wantedSpecies.addAll(fishesBySpecies.get(filteredKey))); // For each key that was left in, we fetch the fishes\r\n```\r\n\r\nOR\r\n\r\n```java\r\nfishesBySpecies.keySet().stream() // Get the keyset and create a stream out of it\r\n        .forEach(key -&gt;\r\n                {\r\n                    if(!key.equalsIgnoreCase(unwanted))\r\n                    {\r\n                        wantedSpecies.addAll(fishesBySpecies.get(unwanted));\r\n                    }\r\n                }\r\n                ); // iterate and filter at the same time. Faster.\r\n```","title":"Getting a random element from a Collection","body":"<p>What you are performing is filtering, and when filtering you have to check each element whether they need to be taken out or not. You could try to use alphabetical sorting on the keys and stop filtering once the key is alphabetically larger than your filtering (unwanted) key.</p>\n<p>Your code can also be thoroughly shortened by using java streams:</p>\n<pre class=\"lang-java prettyprint-override\"><code>HashMap&lt;String, ArrayList&lt;Fish&gt;&gt; fishesBySpecies = new HashMap&lt;&gt;();\n\n// Insert some fishes...\n// Fish has a String attribute that describes its species\n// Now we want to pick a random Fish that isn't from the unwantedSpecies\n\nString unwanted = &quot;unwanted species&quot;;\n\nfishesBySpecies.keySet().stream() // Get the keyset and create a stream out of it\n        .filter(key -&gt; !key.equalsIgnoreCase(unwanted)) // If key is not equal to unwanted then leave it in else remove it\n        .forEach(filteredKey -&gt;\n                wantedSpecies.addAll(fishesBySpecies.get(filteredKey))); // For each key that was left in, we fetch the fishes\n</code></pre>\n<p>OR</p>\n<pre class=\"lang-java prettyprint-override\"><code>fishesBySpecies.keySet().stream() // Get the keyset and create a stream out of it\n        .forEach(key -&gt;\n                {\n                    if(!key.equalsIgnoreCase(unwanted))\n                    {\n                        wantedSpecies.addAll(fishesBySpecies.get(unwanted));\n                    }\n                }\n                ); // iterate and filter at the same time. Faster.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640090228,"creation_date":1640090228,"answer_id":70435601,"question_id":70434539,"body_markdown":"The only way I can think of would consist in maintaining an `ArrayList&lt;Fish&gt;` as well as the map you already have. There is a drawback though: adding or removing fishes would be slightly more complex:\r\n\r\n    Map&lt;String, List&lt;Fish&gt;&gt; fishesBySpecies = new HashMap&lt;&gt;();\r\n    List&lt;Fish&gt; wantedFishes = new ArrayList&lt;&gt;();\r\n    \r\n    //...\r\n    \r\n    public void addFish(String species, Fish fish) {\r\n        List&lt;Fish&gt; speciesFishes = fishesBySpecies.get(species);\r\n        if (speciesFishes == null) {\r\n            speciesFishes = new ArrayList&lt;&gt;();\r\n            fishesBySpecies.put(species, speciesFishes);\r\n        }\r\n        speciesFishes.add(fish);\r\n        // also maintain the list of wanted fishes\r\n        if (!unwantedSpecies.equals(species)) {\r\n            wantedFishes.add(fish);\r\n        }\r\n    }\r\n\r\n","title":"Getting a random element from a Collection","body":"<p>The only way I can think of would consist in maintaining an <code>ArrayList&lt;Fish&gt;</code> as well as the map you already have. There is a drawback though: adding or removing fishes would be slightly more complex:</p>\n<pre><code>Map&lt;String, List&lt;Fish&gt;&gt; fishesBySpecies = new HashMap&lt;&gt;();\nList&lt;Fish&gt; wantedFishes = new ArrayList&lt;&gt;();\n\n//...\n\npublic void addFish(String species, Fish fish) {\n    List&lt;Fish&gt; speciesFishes = fishesBySpecies.get(species);\n    if (speciesFishes == null) {\n        speciesFishes = new ArrayList&lt;&gt;();\n        fishesBySpecies.put(species, speciesFishes);\n    }\n    speciesFishes.add(fish);\n    // also maintain the list of wanted fishes\n    if (!unwantedSpecies.equals(species)) {\n        wantedFishes.add(fish);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":21253514,"reputation":3,"user_id":17195250,"display_name":"Guillaume Valhall&#39;art Roussel"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70435226,"answer_count":2,"score":0,"last_activity_date":1640090228,"creation_date":1640085182,"question_id":70434539,"body_markdown":"in java I would like to be able to maintain my Collection of fishes sorted by species at all time (hence the use of a HashMap) while being able to pick a random element from all species except one with constant time complexity. For example the following code does the job but with O(number of elements) complexity :\r\n```\r\nimport java.util.*;\r\n\r\nHashMap&lt;String, ArrayList&lt;Fish&gt;&gt; fishesBySpecies = new HashMap&lt;&gt;();\r\n\r\n// Insert some fishes...\r\n// Fish has a String attribute that describes its species\r\n// Now we want to pick a random Fish that isn&#39;t from the unwantedSpecies\r\n\r\nString unwanted = &quot;unwanted species&quot;;\r\nArrayList&lt;Fish&gt; wantedSpecies = new ArrayList&lt;&gt;();\r\nfor (String species : fishesBySpecies.keySet()) {\r\n    if (!Objects.equals(species, unwanted)) {\r\n        wantedSpecies.addAll(fishesBySpecies.get(species));\r\n    }\r\n}\r\n\r\n// Finally !\r\nint randomIndex = new Random().nextInt(wantedSpecies.size());\r\nFish randomElement = wantedSpecies.get(randomIndex);\r\n\r\n```\r\nAny idea how to do this with constant time complexity if possible ? Thanks !","title":"Getting a random element from a Collection","body":"<p>in java I would like to be able to maintain my Collection of fishes sorted by species at all time (hence the use of a HashMap) while being able to pick a random element from all species except one with constant time complexity. For example the following code does the job but with O(number of elements) complexity :</p>\n<pre><code>import java.util.*;\n\nHashMap&lt;String, ArrayList&lt;Fish&gt;&gt; fishesBySpecies = new HashMap&lt;&gt;();\n\n// Insert some fishes...\n// Fish has a String attribute that describes its species\n// Now we want to pick a random Fish that isn't from the unwantedSpecies\n\nString unwanted = &quot;unwanted species&quot;;\nArrayList&lt;Fish&gt; wantedSpecies = new ArrayList&lt;&gt;();\nfor (String species : fishesBySpecies.keySet()) {\n    if (!Objects.equals(species, unwanted)) {\n        wantedSpecies.addAll(fishesBySpecies.get(species));\n    }\n}\n\n// Finally !\nint randomIndex = new Random().nextInt(wantedSpecies.size());\nFish randomElement = wantedSpecies.get(randomIndex);\n\n</code></pre>\n<p>Any idea how to do this with constant time complexity if possible ? Thanks !</p>\n"},{"tags":["java","junit","java-stream"],"comments":[{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":0,"creation_date":1640089985,"post_id":70435485,"comment_id":124508217,"body_markdown":"One core or not, your code is multi-threaded. I think you need to find a different way to verify it.","body":"One core or not, your code is multi-threaded. I think you need to find a different way to verify it."},{"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"score":0,"creation_date":1640090219,"post_id":70435485,"comment_id":124508286,"body_markdown":"Oh okay, you mean it executes still in parallel single-core?","body":"Oh okay, you mean it executes still in parallel single-core?"},{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":0,"creation_date":1640091121,"post_id":70435485,"comment_id":124508613,"body_markdown":"Yes. Even if it won&#39;t be effectively concurrent, you have code executing in parallel, so scheduling is involved and it can&#39;t be predictable.","body":"Yes. Even if it won&#39;t be effectively concurrent, you have code executing in parallel, so scheduling is involved and it can&#39;t be predictable."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1641226375,"post_id":70435485,"comment_id":124745800,"body_markdown":"Regardless of how many threads are involved, [`forEach` is an *unordered* operation](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#forEach(java.util.function.Consumer)). But what exactly do you want to test here?","body":"Regardless of how many threads are involved, <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#forEach(java.util.function.Consumer)\" rel=\"nofollow noreferrer\"><code>forEach</code> is an <i>unordered</i> operation</a>. But what exactly do you want to test here?"}],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640089746,"creation_date":1640089746,"question_id":70435485,"body_markdown":"I want to test a method that makes use of `.parallel()` stream, `jdk11`.\r\n\r\nThereby, the outcome is always different, that&#39;s why I&#39;m trying to find a way to force junit to only allow max 1 threads for the stream execution. But how?\r\n\r\nMy idea was to wrap the execution in a `ForkJoinPool(1)` call inside the test, so that the underlying service only sees one core to execute the stream in. But it does not work:\r\n\r\n    @Test\r\n    public void testForceSequencial() {\r\n    \tForkJoinPool forkJoinPool = null;\r\n    \ttry {\r\n    \t\tforkJoinPool = new ForkJoinPool(1);\r\n    \t\tforkJoinPool\r\n    \t\t\t\t.submit(() -&gt; NumberService.count())\r\n    \t\t\t\t.join();\r\n    \t} finally {\r\n    \t\tforkJoinPool.shutdown();\r\n    \t}\r\n    }\r\n    \r\n    static class NumberService {\r\n    \tstatic void count() {\r\n    \t\tIntStream.range(1, 10)\r\n    \t\t\t\t.sorted()\r\n    \t\t\t\t.parallel()\r\n    \t\t\t\t.forEach(i -&gt; System.out.println(&quot;Number: &quot; + i));\r\n    \t}\r\n    }\r\n\r\nResult:\r\n\r\n    Number: 5\r\n    Number: 6\r\n    Number: 8\r\n    Number: 9\r\n    Number: 7\r\n    Number: 3\r\n    Number: 4\r\n    Number: 1\r\n    Number: 2\r\n\r\n","title":"How to force junit tests to run sequencially even for .parallel() streams?","body":"<p>I want to test a method that makes use of <code>.parallel()</code> stream, <code>jdk11</code>.</p>\n<p>Thereby, the outcome is always different, that's why I'm trying to find a way to force junit to only allow max 1 threads for the stream execution. But how?</p>\n<p>My idea was to wrap the execution in a <code>ForkJoinPool(1)</code> call inside the test, so that the underlying service only sees one core to execute the stream in. But it does not work:</p>\n<pre><code>@Test\npublic void testForceSequencial() {\n    ForkJoinPool forkJoinPool = null;\n    try {\n        forkJoinPool = new ForkJoinPool(1);\n        forkJoinPool\n                .submit(() -&gt; NumberService.count())\n                .join();\n    } finally {\n        forkJoinPool.shutdown();\n    }\n}\n\nstatic class NumberService {\n    static void count() {\n        IntStream.range(1, 10)\n                .sorted()\n                .parallel()\n                .forEach(i -&gt; System.out.println(&quot;Number: &quot; + i));\n    }\n}\n</code></pre>\n<p>Result:</p>\n<pre><code>Number: 5\nNumber: 6\nNumber: 8\nNumber: 9\nNumber: 7\nNumber: 3\nNumber: 4\nNumber: 1\nNumber: 2\n</code></pre>\n"},{"tags":["java","compilation","linker",".class-file"],"comments":[{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1639827361,"post_id":70403062,"comment_id":124450961,"body_markdown":"It does not. Java is not compiled in that way. There is no linker. There is a class loader at runtime. https://en.m.wikipedia.org/wiki/Java_Classloader","body":"It does not. Java is not compiled in that way. There is no linker. There is a class loader at runtime. <a href=\"https://en.m.wikipedia.org/wiki/Java_Classloader\" rel=\"nofollow noreferrer\">en.m.wikipedia.org/wiki/Java_Classloader</a>"},{"owner":{"account_id":9713597,"reputation":615,"user_id":7204683,"accept_rate":38,"display_name":"Umair"},"score":0,"creation_date":1639827750,"post_id":70403062,"comment_id":124451041,"body_markdown":"@BoristheSpider does the class loader work the same as loader ? is it not then how classes and predefined java libraries are linked in JAVA ? as they are done through linker in C++.","body":"@BoristheSpider does the class loader work the same as loader ? is it not then how classes and predefined java libraries are linked in JAVA ? as they are done through linker in C++."},{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":1,"creation_date":1639827833,"post_id":70403062,"comment_id":124451059,"body_markdown":"Java is not C++! The JVM is written in C++, the JVM executes Java _bytecode_.","body":"Java is not C++! The JVM is written in C++, the JVM executes Java <i>bytecode</i>."},{"owner":{"account_id":9713597,"reputation":615,"user_id":7204683,"accept_rate":38,"display_name":"Umair"},"score":0,"creation_date":1639828008,"post_id":70403062,"comment_id":124451088,"body_markdown":"yes @BoristheSpider I am getting your point but my question is that once the code is compiled and .class files are created. Now how will java links these classes and libraries?","body":"yes @BoristheSpider I am getting your point but my question is that once the code is compiled and .class files are created. Now how will java links these classes and libraries?"},{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":1,"creation_date":1639831157,"post_id":70403062,"comment_id":124451700,"body_markdown":"There’s a single word answer to that - **dynamically**.","body":"There’s a single word answer to that - <b>dynamically</b>."}],"answers":[{"tags":[],"owner":{"account_id":3618847,"reputation":867,"user_id":17695211,"display_name":"Alexey Veleshko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639829705,"creation_date":1639829705,"answer_id":70403343,"question_id":70403062,"body_markdown":"Class files are &quot;linked&quot; when the class is first used in the JVM. It&#39;s done in memory, so there is no file.\r\n\r\nIn GraalVM it&#39;s probably the same .exe/.dll/ELF executable as for traditional C compilation.","title":"What format of file does linker produce after linking .class files produced by compiler in JAVA","body":"<p>Class files are &quot;linked&quot; when the class is first used in the JVM. It's done in memory, so there is no file.</p>\n<p>In GraalVM it's probably the same .exe/.dll/ELF executable as for traditional C compilation.</p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1640089727,"creation_date":1640089727,"answer_id":70435480,"question_id":70403062,"body_markdown":"The [class file format] as produced by the java compiler is exactly the same as expected by methods like [`ClassLoader.defineClass`] at runtime. There is no linking operation in-between that would alter these files or convert them to a different format. The actual linking happens at runtime in the JVM after the classes have been handed over.\r\n\r\nFor two decades, Java programs were mainly deployed using jar files. Jar files are zip archives with certain predefined entries containing meta information. Besides that, jar files contain class files and resource files in the same format as used in ordinary directories of the default filesystem. This is the reason why you can name jar files and directories in the classpath and it makes no difference to the class loading process.\r\n\r\nAlternative deployment approaches were developed but they all boil down to reproduce the bunch of class files in the target environment, to be able to load them.\r\n\r\nRuntime environments may have implementation specific files containing pre-linked data for speeding up the startup process, like the jsa file used by HotSpot’s [Class Data Sharing] but these files are specific to a particular installation and not to be deployed to another machine.\r\n\r\nWith the introduction of the module system, new file formats were introduced. [Modular JAR files] and [JMOD]. They are closer to what you might have in mind when thinking about a linker output, as they are supposed to hold a single module, in other words, only related classes. However, they are still just containing class files.\r\n\r\nThere’s the option to create a pre-linked module image file using [`jlink`] to be bundled with a JDK. So unlike the jsa files, these images are deployable to different machines with compatible architecture, but tied to the JDK they’re bundled with and hence, still implementation specific.\r\n\r\nSo there’s no documented, implementation independent format for pre-linked Java software. The common denominator still is a collection of class files.\r\n\r\n[class file format]: https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-2.html#jvms-2.1\r\n[`ClassLoader.defineClass`]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/ClassLoader.html#defineClass(java.lang.String,byte%5B%5D,int,int)\r\n[Class Data Sharing]: https://docs.oracle.com/en/java/javase/17/vm/class-data-sharing.html\r\n[Modular JAR files]: https://docs.oracle.com/en/java/javase/17/docs/specs/jar/jar.html#modular-jar-files\r\n[JMOD]: https://docs.oracle.com/en/java/javase/17/docs/specs/man/jmod.html#description\r\n[`jlink`]: https://docs.oracle.com/en/java/javase/17/docs/specs/man/jlink.html","title":"What format of file does linker produce after linking .class files produced by compiler in JAVA","body":"<p>The <a href=\"https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-2.html#jvms-2.1\" rel=\"nofollow noreferrer\">class file format</a> as produced by the java compiler is exactly the same as expected by methods like <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/ClassLoader.html#defineClass(java.lang.String,byte%5B%5D,int,int)\" rel=\"nofollow noreferrer\"><code>ClassLoader.defineClass</code></a> at runtime. There is no linking operation in-between that would alter these files or convert them to a different format. The actual linking happens at runtime in the JVM after the classes have been handed over.</p>\n<p>For two decades, Java programs were mainly deployed using jar files. Jar files are zip archives with certain predefined entries containing meta information. Besides that, jar files contain class files and resource files in the same format as used in ordinary directories of the default filesystem. This is the reason why you can name jar files and directories in the classpath and it makes no difference to the class loading process.</p>\n<p>Alternative deployment approaches were developed but they all boil down to reproduce the bunch of class files in the target environment, to be able to load them.</p>\n<p>Runtime environments may have implementation specific files containing pre-linked data for speeding up the startup process, like the jsa file used by HotSpot’s <a href=\"https://docs.oracle.com/en/java/javase/17/vm/class-data-sharing.html\" rel=\"nofollow noreferrer\">Class Data Sharing</a> but these files are specific to a particular installation and not to be deployed to another machine.</p>\n<p>With the introduction of the module system, new file formats were introduced. <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/jar/jar.html#modular-jar-files\" rel=\"nofollow noreferrer\">Modular JAR files</a> and <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/man/jmod.html#description\" rel=\"nofollow noreferrer\">JMOD</a>. They are closer to what you might have in mind when thinking about a linker output, as they are supposed to hold a single module, in other words, only related classes. However, they are still just containing class files.</p>\n<p>There’s the option to create a pre-linked module image file using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/man/jlink.html\" rel=\"nofollow noreferrer\"><code>jlink</code></a> to be bundled with a JDK. So unlike the jsa files, these images are deployable to different machines with compatible architecture, but tied to the JDK they’re bundled with and hence, still implementation specific.</p>\n<p>So there’s no documented, implementation independent format for pre-linked Java software. The common denominator still is a collection of class files.</p>\n"}],"owner":{"account_id":9713597,"reputation":615,"user_id":7204683,"accept_rate":38,"display_name":"Umair"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1640089727,"creation_date":1639827155,"question_id":70403062,"body_markdown":"While working with JAVA when compiler compiles are .java classes. It produces .class files and after compilation, the linker links all .class files to create one single file. My question is that what use to be the extension of that single file produced by the linker in the case of JAVA Langauge?","title":"What format of file does linker produce after linking .class files produced by compiler in JAVA","body":"<p>While working with JAVA when compiler compiles are .java classes. It produces .class files and after compilation, the linker links all .class files to create one single file. My question is that what use to be the extension of that single file produced by the linker in the case of JAVA Langauge?</p>\n"},{"tags":["java","selenium","selenium-chromedriver"],"comments":[{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1640010714,"post_id":70423140,"comment_id":124486862,"body_markdown":"can you post also your `config.properties` file? Something tells me that&#39;s your problem.","body":"can you post also your <code>config.properties</code> file? Something tells me that&#39;s your problem."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1640012149,"post_id":70423140,"comment_id":124487413,"body_markdown":"You should also change that property to just &quot;chrome&quot; instead of &quot;Google Chrome&quot;.","body":"You should also change that property to just &quot;chrome&quot; instead of &quot;Google Chrome&quot;."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1640017798,"post_id":70423140,"comment_id":124489783,"body_markdown":"Did I answer your question?","body":"Did I answer your question?"}],"answers":[{"tags":[],"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640012451,"creation_date":1640012088,"answer_id":70423696,"question_id":70423140,"body_markdown":"One suggestion I have is to hard-code the creation of the driver (without `config.properties`) and once you have the code working, you can work on optimizations such as dynamically creating the web driver based on a key value like you are doing here.  To do this, simply replace this line\r\n\r\n    WebDriver driver = myDriverUtilities.getDriver();\r\n\r\nwith\r\n\r\n    System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Program Files\\\\WebDrivers\\\\chromedriver.exe&quot;);\r\n    WebDriver driver = new ChromeDriver();\r\n\r\nObviously, make sure the path to the `chromedriver.exe` is resolved correctly for your system. By the way, unless your web drivers are in the root folder of your code project, that path is not correct. I will double check that is the case.\r\n\r\nI ran your code with this recommendation and it worked. That tells me either your web driver path is not correct, or there is something funky with your `config.properties`.\r\n\r\nLastly, this loop isn&#39;t correct either\r\n\r\n        for (String key : config.stringPropertyNames()) {\r\n            if (key.equals(&quot;browser&quot;)) {\r\n                driverName = config.getProperty(key);\r\n            }\r\n        }\r\n\r\nYou don&#39;t want to loop through all your browser keys. If you have more than one &quot;key&quot;, it will iterate through them and return the last one found. Instead, you need to call `getProperty()` once your properties file is loaded:\r\n\r\n    String propValue = props.getProperty(&quot;browser&quot;);\r\n\r\nThen, once you have the correct `propValue`, you should pass it to your switch to properly instantiate the web driver.\r\n\r\n    switch(propValue) {\r\n        case &quot;chrome&quot;:\r\n            this.driver = new ChromeDriver();\r\n            break;\r\n        case &quot;firefox&quot;:\r\n            this.driver = new GeckoDriver();\r\n            break;\r\n        default:\r\n            // throw some exception here\r\n            throw new IllegalArgumentException(propValue + &quot; is not a supported browser.&quot;);\r\n    }","title":"chromedriver NullPointerException error on linux","body":"<p>One suggestion I have is to hard-code the creation of the driver (without <code>config.properties</code>) and once you have the code working, you can work on optimizations such as dynamically creating the web driver based on a key value like you are doing here.  To do this, simply replace this line</p>\n<pre><code>WebDriver driver = myDriverUtilities.getDriver();\n</code></pre>\n<p>with</p>\n<pre><code>System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Program Files\\\\WebDrivers\\\\chromedriver.exe&quot;);\nWebDriver driver = new ChromeDriver();\n</code></pre>\n<p>Obviously, make sure the path to the <code>chromedriver.exe</code> is resolved correctly for your system. By the way, unless your web drivers are in the root folder of your code project, that path is not correct. I will double check that is the case.</p>\n<p>I ran your code with this recommendation and it worked. That tells me either your web driver path is not correct, or there is something funky with your <code>config.properties</code>.</p>\n<p>Lastly, this loop isn't correct either</p>\n<pre><code>    for (String key : config.stringPropertyNames()) {\n        if (key.equals(&quot;browser&quot;)) {\n            driverName = config.getProperty(key);\n        }\n    }\n</code></pre>\n<p>You don't want to loop through all your browser keys. If you have more than one &quot;key&quot;, it will iterate through them and return the last one found. Instead, you need to call <code>getProperty()</code> once your properties file is loaded:</p>\n<pre><code>String propValue = props.getProperty(&quot;browser&quot;);\n</code></pre>\n<p>Then, once you have the correct <code>propValue</code>, you should pass it to your switch to properly instantiate the web driver.</p>\n<pre><code>switch(propValue) {\n    case &quot;chrome&quot;:\n        this.driver = new ChromeDriver();\n        break;\n    case &quot;firefox&quot;:\n        this.driver = new GeckoDriver();\n        break;\n    default:\n        // throw some exception here\n        throw new IllegalArgumentException(propValue + &quot; is not a supported browser.&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":15667646,"reputation":29,"user_id":11305030,"display_name":"Jimmy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":347,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70423696,"answer_count":1,"score":1,"last_activity_date":1640088818,"creation_date":1640009669,"question_id":70423140,"body_markdown":"I&#39;m currently learning selenium. I have followed a step by step walkthrough on how to start selenium-chromedriver. However I am experiencing this error here and I am have no idea how to solve it.\r\n\r\n[![NullPointerException][1]][1]\r\n\r\nThe following are the source code the walkthrough has given me.\r\n\r\n```\r\npackage driverUtilities;\r\n\r\nimport java.io.FileInputStream;\r\nimport java.io.FileNotFoundException;\r\nimport java.io.IOException;\r\nimport java.util.Properties;\r\n\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.openqa.selenium.firefox.FirefoxDriver;\r\n\r\npublic class DriverUtilities {\r\n\tprivate static DriverUtilities instanceOfDriverUtilities;\r\n\tprivate WebDriver driver;\r\n\r\n\tpublic static DriverUtilities getInstanceOfDriverUtilities() {\r\n\t\tif (instanceOfDriverUtilities == null) {\r\n\t\t\tinstanceOfDriverUtilities = new DriverUtilities();\r\n\t\t}\r\n\t\treturn instanceOfDriverUtilities;\r\n\t}\r\n\r\n\tpublic WebDriver getDriver() {\r\n\t\tif (driver == null) {\r\n\t\t\tCreateDriver();\r\n\t\t}\r\n\t\treturn driver;\r\n\t}\r\n\r\n\tprivate String GetDriverName() {\r\n\t\tProperties config = new Properties();\r\n\t\tString driverName = &quot;&quot;;\r\n\t\ttry {\r\n\t\t\tconfig.load(new FileInputStream(&quot;config.properties&quot;));\r\n\t\t} catch (FileNotFoundException e) {\r\n\t\t\tSystem.out.println(&quot;Config file is not present&quot;);\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (IOException e) {\r\n\t\t\tSystem.out.println(&quot;Error when loading config file&quot;);\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\tfor (String key : config.stringPropertyNames()) {\r\n\t\t\tif (key.equals(&quot;browser&quot;)) {\r\n\t\t\t\tdriverName = config.getProperty(key);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn driverName;\r\n\t}\r\n\r\n\tprivate void CreateDriver() {\r\n\t\tString driverName = GetDriverName();\r\n\r\n\t\tswitch (driverName) {\r\n\t\tcase &quot;Google Chrome&quot;:\r\n\t\t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;chromedriver&quot;);\r\n\t\t\tthis.driver = new ChromeDriver();\r\n\t\t\tbreak;\r\n\t\tcase &quot;Firefox&quot;:\r\n\t\t\tSystem.setProperty(&quot;webdriver.gecko.driver&quot;, &quot;geckodriver.exe&quot;);\r\n\t\t\tthis.driver = new FirefoxDriver();\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n```\r\n\r\nThis is the Driver Utilities class\r\n\r\n```\r\npackage test;\r\n\r\nimport org.junit.Test;\r\nimport org.openqa.selenium.WebDriver;\r\nimport driverUtilities.DriverUtilities;\r\n\r\npublic class Mod08_Slide_16_Navigation_Commands {\r\n\t@Test\r\n\tpublic void navigationCommands() {\r\n\t\tDriverUtilities myDriverUtilities = new DriverUtilities();\r\n\t\tWebDriver driver = myDriverUtilities.getDriver();\r\n\r\n\t\tSystem.out.println(&quot;Start the Test Case&quot;);\r\n\r\n\t\t// Load the website - http://www.bbc.co.uk\r\n\t\tdriver.get(&quot;http://www.bbc.co.uk&quot;);\r\n\t\tSystem.out.println(&quot;\\nLoad the website - http://www.bbc.co.uk&quot;);\r\n\r\n\t\t// Refresh the page\r\n\t\tdriver.navigate().refresh();\r\n\t\tSystem.out.println(&quot;\\nRefresh the page&quot;);\r\n\r\n\t\t// Load the website - http://www.google.co.uk\r\n\t\tdriver.get(&quot;http://www.google.co.uk&quot;);\r\n\t\tSystem.out.println(&quot;\\nLoad the website - http://www.google.co.uk&quot;);\r\n\r\n\t\t// Go back to the website - http://www.bbc.co.uk\r\n\t\tdriver.navigate().back();\r\n\t\tSystem.out.println(&quot;\\nGo back to the website - http://www.bbc.co.uk&quot;);\r\n\r\n\t\t// Go forward to the website - http://www.google.co.uk\r\n\t\tdriver.navigate().forward();\r\n\t\tSystem.out.println(&quot;\\nGo forward to the website - http://www.google.co.uk&quot;);\r\n\r\n\t\t// Close the browser window\r\n\t\tdriver.close();\r\n\t\tSystem.out.println(&quot;\\nClose the browser window&quot;);\r\n\r\n\t\tSystem.out.println(&quot;\\nEnd of Test Case \\&quot;Navigation Commands\\&quot;&quot;);\r\n\t}\r\n}\r\n```\r\nThis is the java test class I am trying to make work of\r\n\r\n```\r\n# Change the browser to use for testing purposes, accepted values are Google Chrome and Firefox\r\nbrowser=Google Chrome\r\n```\r\n\r\nI also have the pom.xml file and a config.properties file and will share it if its required.\r\n\r\n**Note: My assumptions is that the setproperty function is not locating the correct path to chromedriver. However, I&#39;m a arch linux user thus I&#39;m not sure if the value inside the setproperty function is set to &quot;chromedriver&quot; or &quot;/usr/bin/chromedriver&quot;**\r\n\r\n**Note 1: I have navigated to the .metadata of the Eclipse IDE and deleted it after reading some stackoverflow posts. However, this did not work***\r\n\r\n**Note 2: I am completely new to Selenium however, I have some experiences with Java and understand that nullpointerexception occurs when I declare a variable but did not create an object and assign that variable to it.**\r\n\r\n**Edit 1: I have included the config.properties as specified**\r\n\r\n  [1]: https://i.stack.imgur.com/fw47T.png","title":"chromedriver NullPointerException error on linux","body":"<p>I'm currently learning selenium. I have followed a step by step walkthrough on how to start selenium-chromedriver. However I am experiencing this error here and I am have no idea how to solve it.</p>\n<p><a href=\"https://i.stack.imgur.com/fw47T.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fw47T.png\" alt=\"NullPointerException\" /></a></p>\n<p>The following are the source code the walkthrough has given me.</p>\n<pre><code>package driverUtilities;\n\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.util.Properties;\n\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.firefox.FirefoxDriver;\n\npublic class DriverUtilities {\n    private static DriverUtilities instanceOfDriverUtilities;\n    private WebDriver driver;\n\n    public static DriverUtilities getInstanceOfDriverUtilities() {\n        if (instanceOfDriverUtilities == null) {\n            instanceOfDriverUtilities = new DriverUtilities();\n        }\n        return instanceOfDriverUtilities;\n    }\n\n    public WebDriver getDriver() {\n        if (driver == null) {\n            CreateDriver();\n        }\n        return driver;\n    }\n\n    private String GetDriverName() {\n        Properties config = new Properties();\n        String driverName = &quot;&quot;;\n        try {\n            config.load(new FileInputStream(&quot;config.properties&quot;));\n        } catch (FileNotFoundException e) {\n            System.out.println(&quot;Config file is not present&quot;);\n            e.printStackTrace();\n        } catch (IOException e) {\n            System.out.println(&quot;Error when loading config file&quot;);\n            e.printStackTrace();\n        }\n        for (String key : config.stringPropertyNames()) {\n            if (key.equals(&quot;browser&quot;)) {\n                driverName = config.getProperty(key);\n            }\n        }\n        return driverName;\n    }\n\n    private void CreateDriver() {\n        String driverName = GetDriverName();\n\n        switch (driverName) {\n        case &quot;Google Chrome&quot;:\n            System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;chromedriver&quot;);\n            this.driver = new ChromeDriver();\n            break;\n        case &quot;Firefox&quot;:\n            System.setProperty(&quot;webdriver.gecko.driver&quot;, &quot;geckodriver.exe&quot;);\n            this.driver = new FirefoxDriver();\n            break;\n        default:\n            break;\n        }\n    }\n}\n\n</code></pre>\n<p>This is the Driver Utilities class</p>\n<pre><code>package test;\n\nimport org.junit.Test;\nimport org.openqa.selenium.WebDriver;\nimport driverUtilities.DriverUtilities;\n\npublic class Mod08_Slide_16_Navigation_Commands {\n    @Test\n    public void navigationCommands() {\n        DriverUtilities myDriverUtilities = new DriverUtilities();\n        WebDriver driver = myDriverUtilities.getDriver();\n\n        System.out.println(&quot;Start the Test Case&quot;);\n\n        // Load the website - http://www.bbc.co.uk\n        driver.get(&quot;http://www.bbc.co.uk&quot;);\n        System.out.println(&quot;\\nLoad the website - http://www.bbc.co.uk&quot;);\n\n        // Refresh the page\n        driver.navigate().refresh();\n        System.out.println(&quot;\\nRefresh the page&quot;);\n\n        // Load the website - http://www.google.co.uk\n        driver.get(&quot;http://www.google.co.uk&quot;);\n        System.out.println(&quot;\\nLoad the website - http://www.google.co.uk&quot;);\n\n        // Go back to the website - http://www.bbc.co.uk\n        driver.navigate().back();\n        System.out.println(&quot;\\nGo back to the website - http://www.bbc.co.uk&quot;);\n\n        // Go forward to the website - http://www.google.co.uk\n        driver.navigate().forward();\n        System.out.println(&quot;\\nGo forward to the website - http://www.google.co.uk&quot;);\n\n        // Close the browser window\n        driver.close();\n        System.out.println(&quot;\\nClose the browser window&quot;);\n\n        System.out.println(&quot;\\nEnd of Test Case \\&quot;Navigation Commands\\&quot;&quot;);\n    }\n}\n</code></pre>\n<p>This is the java test class I am trying to make work of</p>\n<pre><code># Change the browser to use for testing purposes, accepted values are Google Chrome and Firefox\nbrowser=Google Chrome\n</code></pre>\n<p>I also have the pom.xml file and a config.properties file and will share it if its required.</p>\n<p><strong>Note: My assumptions is that the setproperty function is not locating the correct path to chromedriver. However, I'm a arch linux user thus I'm not sure if the value inside the setproperty function is set to &quot;chromedriver&quot; or &quot;/usr/bin/chromedriver&quot;</strong></p>\n<p><strong>Note 1: I have navigated to the .metadata of the Eclipse IDE and deleted it after reading some stackoverflow posts. However, this did not work</strong>*</p>\n<p><strong>Note 2: I am completely new to Selenium however, I have some experiences with Java and understand that nullpointerexception occurs when I declare a variable but did not create an object and assign that variable to it.</strong></p>\n<p><strong>Edit 1: I have included the config.properties as specified</strong></p>\n"},{"tags":["java","spring","jackson"],"answers":[{"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640088471,"creation_date":1640086355,"answer_id":70434756,"question_id":70434343,"body_markdown":"Jackson can by default deserialize into a `Map&lt;String, String&gt;`. So the following should work by default.\r\n\r\n\r\n    @GetMapping\r\n    public void getSomething(@RequestBody Map&lt;String,String&gt; map) {\r\n          ....\r\n    }\r\n\r\nBut your case seems different, since you expect multiple JSON objects inside a List with duplicate information of `key`: `somekey`, `value` : `somevalue`. **key** and **value** are duplicate information for each object in the list.\r\n\r\n\r\n\r\nAfter seeing more feedback from the comments IMO the best bet here would be to introduce a custom deserialized which will be used to convert the input JSON into a `Map&lt;String, String&gt;`. More about custom deserializers and example can be found [here][1].\r\n\r\n\r\n  [1]: https://www.baeldung.com/jackson-deserialization","title":"Is there a built in way to deserialize Map&lt;String,String&gt; in Jackson","body":"<p>Jackson can by default deserialize into a <code>Map&lt;String, String&gt;</code>. So the following should work by default.</p>\n<pre><code>@GetMapping\npublic void getSomething(@RequestBody Map&lt;String,String&gt; map) {\n      ....\n}\n</code></pre>\n<p>But your case seems different, since you expect multiple JSON objects inside a List with duplicate information of <code>key</code>: <code>somekey</code>, <code>value</code> : <code>somevalue</code>. <strong>key</strong> and <strong>value</strong> are duplicate information for each object in the list.</p>\n<p>After seeing more feedback from the comments IMO the best bet here would be to introduce a custom deserialized which will be used to convert the input JSON into a <code>Map&lt;String, String&gt;</code>. More about custom deserializers and example can be found <a href=\"https://www.baeldung.com/jackson-deserialization\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":139,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1640088471,"creation_date":1640084264,"question_id":70434343,"body_markdown":"API is returning array of map entries like this\r\n\r\n    [\r\n    {&quot;key&quot;:&quot;Key1&quot;,&quot;value&quot;:&quot;Value1&quot;},\r\n    {&quot;key&quot;:&quot;Key2&quot;,&quot;value&quot;:&quot;Value2&quot;}, \r\n    {&quot;key&quot;:&quot;Key3&quot;,&quot;value&quot;:&quot;Value3&quot;},\r\n    ....\r\n    ]\r\n\r\nAnd I would like to deserialize it directly into `Map&lt;String,String&gt;` \r\nso it w will become \r\n\r\n    Map&lt;String,String&gt; {Key1-&gt;Value1, Key2-&gt;Value2, Key3-&gt;Value3}\r\n\r\nObvious solution is to deserialize as `List&lt;ApiMapEntry&gt;` but maybe there is an simpler way of doing so?\r\n\r\nWhat I am doing now:\r\n\r\n    @JsonProperty\r\n    public void setMyTargetMap(List&lt;ApiMapEntryWrapper&gt; wrappers) {\r\n        this.myTargetMap= wrappers.stream().collect(Collectors.toMap(ApiMapEntryWrapper::getKey, ApiMapEntryWrapper::getValue));\r\n    }\r\n\r\n    class ApiMapEntryWrapper{\r\n       private String key;\r\n       private String value;\r\n    }\r\n\r\nWhile I would look for something like (referring to exampe json) without the need of `ApiMapEntryWrapper`\r\n\r\n\r\n    @JsonMap(keyName=&quot;key&quot;,valueName=&quot;value&quot;)\r\n    private Map&lt;String,Strin&gt; myTargetMap","title":"Is there a built in way to deserialize Map&lt;String,String&gt; in Jackson","body":"<p>API is returning array of map entries like this</p>\n<pre><code>[\n{&quot;key&quot;:&quot;Key1&quot;,&quot;value&quot;:&quot;Value1&quot;},\n{&quot;key&quot;:&quot;Key2&quot;,&quot;value&quot;:&quot;Value2&quot;}, \n{&quot;key&quot;:&quot;Key3&quot;,&quot;value&quot;:&quot;Value3&quot;},\n....\n]\n</code></pre>\n<p>And I would like to deserialize it directly into <code>Map&lt;String,String&gt;</code>\nso it w will become</p>\n<pre><code>Map&lt;String,String&gt; {Key1-&gt;Value1, Key2-&gt;Value2, Key3-&gt;Value3}\n</code></pre>\n<p>Obvious solution is to deserialize as <code>List&lt;ApiMapEntry&gt;</code> but maybe there is an simpler way of doing so?</p>\n<p>What I am doing now:</p>\n<pre><code>@JsonProperty\npublic void setMyTargetMap(List&lt;ApiMapEntryWrapper&gt; wrappers) {\n    this.myTargetMap= wrappers.stream().collect(Collectors.toMap(ApiMapEntryWrapper::getKey, ApiMapEntryWrapper::getValue));\n}\n\nclass ApiMapEntryWrapper{\n   private String key;\n   private String value;\n}\n</code></pre>\n<p>While I would look for something like (referring to exampe json) without the need of <code>ApiMapEntryWrapper</code></p>\n<pre><code>@JsonMap(keyName=&quot;key&quot;,valueName=&quot;value&quot;)\nprivate Map&lt;String,Strin&gt; myTargetMap\n</code></pre>\n"},{"tags":["java","jsp","servlets","cloud-foundry","siteminder"],"comments":[{"owner":{"account_id":1731647,"reputation":14046,"user_id":1585136,"display_name":"Daniel Mikusa"},"score":1,"creation_date":1608328779,"post_id":65360555,"comment_id":115559826,"body_markdown":"When you say &#39;siteminder&#39; how exactly are you integrating with that? Are you using Pivotal SSO tile? or native OpenID connect? or something else?","body":"When you say &#39;siteminder&#39; how exactly are you integrating with that? Are you using Pivotal SSO tile? or native OpenID connect? or something else?"},{"owner":{"account_id":7137239,"reputation":307,"user_id":5456372,"display_name":"Ajay Dsouza"},"score":0,"creation_date":1608364747,"post_id":65360555,"comment_id":115565765,"body_markdown":"@DanielMikusa application is using Pivotal SSO tile","body":"@DanielMikusa application is using Pivotal SSO tile"}],"answers":[{"tags":[],"owner":{"account_id":1731647,"reputation":14046,"user_id":1585136,"display_name":"Daniel Mikusa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1609942223,"creation_date":1609942223,"answer_id":65597321,"question_id":65360555,"body_markdown":"Using the Pivotal SSO Tile, there are two steps you need to do to make this work.\r\n\r\nFirst, you need to set up your plan using the [Layer7 SiteMinder Integration Guide](https://docs.pivotal.io/p-identity/1-14/ca-sso/).\r\n\r\nAs is listed there...\r\n\r\n&gt;Single Sign‑On supports service provider-initiated authentication flow and single logout.\r\n\r\nThis is a fairly complicated process and very specific to your provider. The only tip I can give you here is to do things *exactly* like in the docs. It&#39;s very easy to break stuff, so following exactly what&#39;s written gives you the best chance for success.\r\n\r\nOnce you get your plan set up, the second part would be to [create a service instance using the plan &amp; bind that to your app](https://docs.pivotal.io/p-identity/1-14/manage-service-instances.html). Then follow the instructions for [integrating your app](https://docs.pivotal.io/p-identity/1-14/integrating-sso.html).\r\n\r\nThe part to take specific note about, which is what handles the single logout is [documented in the API here](https://docs.cloudfoundry.org/api/uaa/version/74.30.0/index.html#logout-do).\r\n\r\n&gt;The logout endpoint is meant to be used by applications to log the user out of the UAA session. UAA will only log a user out of the UAA session if they also hit this endpoint, and may also perform Single Logout with SAML providers if configured to do so.\r\n\r\nIf you follow the docs for creating your service plan, it will be configured to do single logout, so you just need to make sure this endpoint is called after logging a user out in your app.\r\n\r\nThere&#39;s an [example of how you&#39;d do this for Spring Boot apps here](https://github.com/pivotal-cf/identity-sample-apps/blob/spring-boot-2.3/authcode/src/main/java/io/pivotal/identityService/samples/authcode/security/UaaLogoutSuccessHandler.java).\r\n\r\n```\r\n    @Override\r\n    public void onLogoutSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException {\r\n        UriComponents url = UriComponentsBuilder.fromHttpUrl(request.getRequestURL().toString())\r\n                .replacePath(&quot;&quot;)\r\n                .build();\r\n        UriComponents redirectUrl = UriComponentsBuilder.fromHttpUrl(ssoServiceUrl)\r\n                .path(&quot;/logout.do&quot;)\r\n                .queryParam(&quot;client_id&quot;, clientId)\r\n                .queryParam(&quot;redirect&quot;, url.toString())\r\n                .build();\r\n        response.sendRedirect(redirectUrl.toString());\r\n    }\r\n```\r\n\r\nTo explain, this code get&#39;s [invoked by Spring](https://www.baeldung.com/spring-security-custom-logout-handler) after a successful logout. The code here is simply creating a URL to the `/logout.do` endpoint &amp; issuing a redirect to the client. This is what&#39;s described in the doc link above.\r\n","title":"How to do a logout from SiteMinder session for a Pivotal Cloud Foundry hosted JSP/Servlet application?","body":"<p>Using the Pivotal SSO Tile, there are two steps you need to do to make this work.</p>\n<p>First, you need to set up your plan using the <a href=\"https://docs.pivotal.io/p-identity/1-14/ca-sso/\" rel=\"nofollow noreferrer\">Layer7 SiteMinder Integration Guide</a>.</p>\n<p>As is listed there...</p>\n<blockquote>\n<p>Single Sign‑On supports service provider-initiated authentication flow and single logout.</p>\n</blockquote>\n<p>This is a fairly complicated process and very specific to your provider. The only tip I can give you here is to do things <em>exactly</em> like in the docs. It's very easy to break stuff, so following exactly what's written gives you the best chance for success.</p>\n<p>Once you get your plan set up, the second part would be to <a href=\"https://docs.pivotal.io/p-identity/1-14/manage-service-instances.html\" rel=\"nofollow noreferrer\">create a service instance using the plan &amp; bind that to your app</a>. Then follow the instructions for <a href=\"https://docs.pivotal.io/p-identity/1-14/integrating-sso.html\" rel=\"nofollow noreferrer\">integrating your app</a>.</p>\n<p>The part to take specific note about, which is what handles the single logout is <a href=\"https://docs.cloudfoundry.org/api/uaa/version/74.30.0/index.html#logout-do\" rel=\"nofollow noreferrer\">documented in the API here</a>.</p>\n<blockquote>\n<p>The logout endpoint is meant to be used by applications to log the user out of the UAA session. UAA will only log a user out of the UAA session if they also hit this endpoint, and may also perform Single Logout with SAML providers if configured to do so.</p>\n</blockquote>\n<p>If you follow the docs for creating your service plan, it will be configured to do single logout, so you just need to make sure this endpoint is called after logging a user out in your app.</p>\n<p>There's an <a href=\"https://github.com/pivotal-cf/identity-sample-apps/blob/spring-boot-2.3/authcode/src/main/java/io/pivotal/identityService/samples/authcode/security/UaaLogoutSuccessHandler.java\" rel=\"nofollow noreferrer\">example of how you'd do this for Spring Boot apps here</a>.</p>\n<pre><code>    @Override\n    public void onLogoutSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException {\n        UriComponents url = UriComponentsBuilder.fromHttpUrl(request.getRequestURL().toString())\n                .replacePath(&quot;&quot;)\n                .build();\n        UriComponents redirectUrl = UriComponentsBuilder.fromHttpUrl(ssoServiceUrl)\n                .path(&quot;/logout.do&quot;)\n                .queryParam(&quot;client_id&quot;, clientId)\n                .queryParam(&quot;redirect&quot;, url.toString())\n                .build();\n        response.sendRedirect(redirectUrl.toString());\n    }\n</code></pre>\n<p>To explain, this code get's <a href=\"https://www.baeldung.com/spring-security-custom-logout-handler\" rel=\"nofollow noreferrer\">invoked by Spring</a> after a successful logout. The code here is simply creating a URL to the <code>/logout.do</code> endpoint &amp; issuing a redirect to the client. This is what's described in the doc link above.</p>\n"}],"owner":{"account_id":7137239,"reputation":307,"user_id":5456372,"display_name":"Ajay Dsouza"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":340,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640087854,"creation_date":1608308907,"question_id":65360555,"body_markdown":"I am having a JSP/Servlet based application running on Pivotal Cloud Foundary and using Siteminder for authentication.\r\n\r\nThe logout we implemented but is unsuccessful currentnly includes \r\n- clearing of request.getSession().invalidate()\r\n- followed by clearing of cookiesn (request.getCookies followed by setting MaxAge of all cookies to 0)\r\n- followed by calling of the siteminder provided /logout url in new popup window\r\n- followed by window.location as PCF Logout for logout from the PCF application.\r\n\r\nWith above steps the logout is not successful. However if I do the Shift+Cntrl+Del and delete the cookies --&gt; then the logout works successful. **So programmatically I want to achieve the same behavior using Servlet and JSP.**\r\n\r\nThanks in advance!","title":"How to do a logout from SiteMinder session for a Pivotal Cloud Foundry hosted JSP/Servlet application?","body":"<p>I am having a JSP/Servlet based application running on Pivotal Cloud Foundary and using Siteminder for authentication.</p>\n<p>The logout we implemented but is unsuccessful currentnly includes</p>\n<ul>\n<li>clearing of request.getSession().invalidate()</li>\n<li>followed by clearing of cookiesn (request.getCookies followed by setting MaxAge of all cookies to 0)</li>\n<li>followed by calling of the siteminder provided /logout url in new popup window</li>\n<li>followed by window.location as PCF Logout for logout from the PCF application.</li>\n</ul>\n<p>With above steps the logout is not successful. However if I do the Shift+Cntrl+Del and delete the cookies --&gt; then the logout works successful. <strong>So programmatically I want to achieve the same behavior using Servlet and JSP.</strong></p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","android","android-volley"],"answers":[{"tags":[],"owner":{"account_id":18902,"reputation":4138,"user_id":43796,"display_name":"Flynn81"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1373818904,"creation_date":1373818904,"answer_id":17641225,"question_id":17641108,"body_markdown":"The library unfortunately isn&#39;t fully fleshed out yet.  To set priority for a request you need to extend the request and override getPriority().  For your example I would create a new class that extends StringRequest and implements getPriority() (and maybe a setPriority() as well, so you can programmatically change priorities in different requests).\r\n\r\n    private Priority mPriority = Priority.LOW;\r\n\r\n    @Override\r\n    public Priority getPriority() {\r\n        return mPriority;\r\n    }\r\n\r\n    public void setPriority(Priority priority) {\r\n        mPriority = priority;\r\n    }\r\n\r\n`Priority` is an ENUM from the `Request` class.\r\n","title":"Setting Request Priority Volley","body":"<p>The library unfortunately isn't fully fleshed out yet.  To set priority for a request you need to extend the request and override getPriority().  For your example I would create a new class that extends StringRequest and implements getPriority() (and maybe a setPriority() as well, so you can programmatically change priorities in different requests).</p>\n\n<pre><code>private Priority mPriority = Priority.LOW;\n\n@Override\npublic Priority getPriority() {\n    return mPriority;\n}\n\npublic void setPriority(Priority priority) {\n    mPriority = priority;\n}\n</code></pre>\n\n<p><code>Priority</code> is an ENUM from the <code>Request</code> class.</p>\n"},{"tags":[],"owner":{"account_id":417862,"reputation":16982,"user_id":794088,"display_name":"petey"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1443206646,"creation_date":1443206646,"answer_id":32788690,"question_id":17641108,"body_markdown":"Heres a quick way to set a priority,\r\n\r\n\r\n        StringRequest request = new StringRequest(Request.Method.GET,&quot;feed URL&quot;,volleyListener, volleyErrorListener) {\r\n            @Override\r\n            public Priority getPriority() {\r\n                return Priority.IMMEDIATE;\r\n            }\r\n        };","title":"Setting Request Priority Volley","body":"<p>Heres a quick way to set a priority,</p>\n\n<pre><code>    StringRequest request = new StringRequest(Request.Method.GET,\"feed URL\",volleyListener, volleyErrorListener) {\n        @Override\n        public Priority getPriority() {\n            return Priority.IMMEDIATE;\n        }\n    };\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7365669,"reputation":5074,"user_id":5607457,"accept_rate":48,"display_name":"Greelings"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640087449,"creation_date":1640086784,"answer_id":70434846,"question_id":17641108,"body_markdown":"With Kotlin :\r\n\r\n    val stringRequest = object : StringRequest( Request.Method.GET, url, \r\n    \t{ response -&gt; Log.i(&quot;Response&quot;, response) }, \r\n    \t{ error -&gt; Log.i(&quot;Error&quot;, error) } ) \r\n    \t{ override fun getPriority(): Priority { return Priority.HIGH } }","title":"Setting Request Priority Volley","body":"<p>With Kotlin :</p>\n<pre><code>val stringRequest = object : StringRequest( Request.Method.GET, url, \n    { response -&gt; Log.i(&quot;Response&quot;, response) }, \n    { error -&gt; Log.i(&quot;Error&quot;, error) } ) \n    { override fun getPriority(): Priority { return Priority.HIGH } }\n</code></pre>\n"}],"owner":{"account_id":3045375,"reputation":133,"user_id":2581205,"display_name":"TwistedEquations"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9120,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":17641225,"answer_count":3,"score":13,"last_activity_date":1640087449,"creation_date":1373818041,"question_id":17641108,"body_markdown":"I am trying to set the priority of my requests using the Volley library in Android. I cant find out how to set the requests priority.\r\n\r\n    StringRequest request = new StringRequest(Request.Method.GET,&quot;feed URL&quot;,volleyListener, volleyErrorListener);\r\n    pe.requestQueue.add(request);\r\n\r\nAny Ideas on how I would do this?","title":"Setting Request Priority Volley","body":"<p>I am trying to set the priority of my requests using the Volley library in Android. I cant find out how to set the requests priority.</p>\n\n<pre><code>StringRequest request = new StringRequest(Request.Method.GET,\"feed URL\",volleyListener, volleyErrorListener);\npe.requestQueue.add(request);\n</code></pre>\n\n<p>Any Ideas on how I would do this?</p>\n"},{"tags":["java","spring","spring-boot","date"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1640087050,"post_id":70434784,"comment_id":124507158,"body_markdown":"I&#39;d question very much his &quot;best approach&quot;. Is it a date or a datetime? Are timezones involved (in case of a datetime). Why would they not use a native datatype of the database? You can&#39;t just say &quot;this is the best, use it&quot; without explaining **why** it&#39;s &quot;the best&quot;. That&#39;s poor software engineering.","body":"I&#39;d question very much his &quot;best approach&quot;. Is it a date or a datetime? Are timezones involved (in case of a datetime). Why would they not use a native datatype of the database? You can&#39;t just say &quot;this is the best, use it&quot; without explaining <b>why</b> it&#39;s &quot;the best&quot;. That&#39;s poor software engineering."},{"owner":{"account_id":23182000,"reputation":21,"user_id":17279700,"display_name":"Darius Boengiu"},"score":0,"creation_date":1640087309,"post_id":70434784,"comment_id":124507258,"body_markdown":"@Kayaman my question was if I could use long instead of date or datetime, or localdate or anything like this","body":"@Kayaman my question was if I could use long instead of date or datetime, or localdate or anything like this"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1640087960,"post_id":70434784,"comment_id":124507499,"body_markdown":"Yes, but just because you can, doesn&#39;t necessarily mean you should. A [Timestamp](https://docs.oracle.com/javase/8/docs/api/java/sql/Timestamp.html) is essentially a long value.","body":"Yes, but just because you can, doesn&#39;t necessarily mean you should. A <a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/Timestamp.html\" rel=\"nofollow noreferrer\">Timestamp</a> is essentially a long value."},{"owner":{"account_id":23182000,"reputation":21,"user_id":17279700,"display_name":"Darius Boengiu"},"score":0,"creation_date":1640092517,"post_id":70434784,"comment_id":124509131,"body_markdown":"@Kayaman let&#39;s say I still want to use long, how exactly should I do it?","body":"@Kayaman let&#39;s say I still want to use long, how exactly should I do it?"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1640095122,"post_id":70434784,"comment_id":124510198,"body_markdown":"Same way you persist any long value. You&#39;ll just have to work with a `Long` instead of an actual useful date class, converting every time you need to work with it.","body":"Same way you persist any long value. You&#39;ll just have to work with a <code>Long</code> instead of an actual useful date class, converting every time you need to work with it."},{"owner":{"account_id":23182000,"reputation":21,"user_id":17279700,"display_name":"Darius Boengiu"},"score":0,"creation_date":1640095309,"post_id":70434784,"comment_id":124510277,"body_markdown":"@Kayaman and I do not need any annotation?","body":"@Kayaman and I do not need any annotation?"}],"answers":[{"tags":[],"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640087422,"creation_date":1640086982,"answer_id":70434888,"question_id":70434784,"body_markdown":"The fellow developer is probably referring to an *instant*, a certain point on the timeline at which the *thing* (probably order) is delivered.\r\n\r\nThe commonly used notation of an instant is the Unix Timestamp. It&#39;s the number of seconds since Jan 1, 1970, at midnight UTC. This number does not depend on timezone.\r\n\r\nI would use `Instant` instead of `Long`, as this is the type that represents such a, well, instant. I do not know for sure whether it is automagically wired by Spring Boot, but you *may* have to add the JSR 310 module if you encounter problems. [Here is more information][1].\r\n\r\n\r\n[1]: https://stackoverflow.com/questions/47120363/java-8-date-time-types-serialized-as-object-with-spring-boot/47120519","title":"Can I store a date in h2 database using long data type for date field in entity object?","body":"<p>The fellow developer is probably referring to an <em>instant</em>, a certain point on the timeline at which the <em>thing</em> (probably order) is delivered.</p>\n<p>The commonly used notation of an instant is the Unix Timestamp. It's the number of seconds since Jan 1, 1970, at midnight UTC. This number does not depend on timezone.</p>\n<p>I would use <code>Instant</code> instead of <code>Long</code>, as this is the type that represents such a, well, instant. I do not know for sure whether it is automagically wired by Spring Boot, but you <em>may</em> have to add the JSR 310 module if you encounter problems. <a href=\"https://stackoverflow.com/questions/47120363/java-8-date-time-types-serialized-as-object-with-spring-boot/47120519\">Here is more information</a>.</p>\n"}],"owner":{"account_id":23182000,"reputation":21,"user_id":17279700,"display_name":"Darius Boengiu"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":184,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640087422,"creation_date":1640086530,"question_id":70434784,"body_markdown":"I am new to spring boot, working on a project, and recently an experienced developer just told me that when creating an entity table, that has a field that should deal with dates the best approach is to use long, something like this:\r\n       \r\n     private Long deliveryDate;\r\n\r\nThe thing is that I have never seen anything being done like this before, I do not understand how this should exactly work, and I couldn&#39;t find an answer anywhere I searched for it, so do you think that some of you can help me?","title":"Can I store a date in h2 database using long data type for date field in entity object?","body":"<p>I am new to spring boot, working on a project, and recently an experienced developer just told me that when creating an entity table, that has a field that should deal with dates the best approach is to use long, something like this:</p>\n<pre><code> private Long deliveryDate;\n</code></pre>\n<p>The thing is that I have never seen anything being done like this before, I do not understand how this should exactly work, and I couldn't find an answer anywhere I searched for it, so do you think that some of you can help me?</p>\n"},{"tags":["java","servlets"],"comments":[{"owner":{"account_id":974546,"reputation":6646,"user_id":996249,"accept_rate":98,"display_name":"nmagerko"},"score":0,"creation_date":1320888886,"post_id":8073989,"comment_id":9893951,"body_markdown":"Hey Jeff! Welcome to Stack Overflow! We ask that you make your answers as clear as possible and show any code, material, or other information you have gathered or tried while attempting to solve your problem. This makes it much easier to answer questions.","body":"Hey Jeff! Welcome to Stack Overflow! We ask that you make your answers as clear as possible and show any code, material, or other information you have gathered or tried while attempting to solve your problem. This makes it much easier to answer questions."},{"owner":{"account_id":252362,"reputation":4617,"user_id":530351,"accept_rate":17,"display_name":"Igor Nikolaev"},"score":1,"creation_date":1320888913,"post_id":8073989,"comment_id":9893953,"body_markdown":"If you show some code and write more detailed description of a problem I bet you&#39;ll get help here :)","body":"If you show some code and write more detailed description of a problem I bet you&#39;ll get help here :)"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1320889437,"post_id":8073989,"comment_id":9894042,"body_markdown":"It looks like you&#39;ve done what you&#39;re asking about; is there a problem?","body":"It looks like you&#39;ve done what you&#39;re asking about; is there a problem?"},{"owner":{"account_id":1014002,"reputation":99,"user_id":1025987,"accept_rate":33,"display_name":"bobby"},"score":0,"creation_date":1320889551,"post_id":8073989,"comment_id":9894059,"body_markdown":"My image doesn&#39;t show, only the text.  I guess there must be a problem with my file path.","body":"My image doesn&#39;t show, only the text.  I guess there must be a problem with my file path."}],"answers":[{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1320891156,"creation_date":1320889694,"answer_id":8074077,"question_id":8073989,"body_markdown":"If you put the `space.gif` at the right location in the public web content and reference it by the right URL, then it&#39;ll work fine. As you have it right now, its location is dependent on the URL with which the servlet is been invoked. Basically, it should be virtually in the same folder as the servlet.\r\n\r\nThis example should do:\r\n\r\n    WebContent\r\n     |-- images\r\n     |    `-- space.gif\r\n     `-- WEB-INF\r\n          |-- classes\r\n          `-- lib\r\n\r\nwith\r\n\r\n    out.print(&quot;&lt;img src=&#39;&quot; + request.getContextPath() + &quot;/images/space.gif&#39; alt=&#39;image&#39; /&gt;&quot;);\r\n\r\nOr, if that image is actually located outside the public web content and you can&#39;t move it in the public web content for some unobvious reason, then you&#39;d need to add an extra web application context to your server configuration pointing to that folder, e.g. `/images`, so that you can do\r\n\r\n    out.print(&quot;&lt;img src=&#39;/images/space.gif&#39; alt=&#39;image&#39; /&gt;&quot;);\r\n\r\n###See also:\r\n\r\n- https://stackoverflow.com/questions/4543936/load-the-image-from-outside-of-webcontext-in-jsf\r\n\r\n---\r\n\r\n**Unrelated** to the concrete problem, HTML belongs in [JSP][1], not in [Servlet][2].\r\n\r\n\r\n  [1]: https://stackoverflow.com/tags/jsp/info\r\n  [2]: https://stackoverflow.com/tags/servlets/info","title":"How to print the correct path to resource when using out.print for HTML","body":"<p>If you put the <code>space.gif</code> at the right location in the public web content and reference it by the right URL, then it'll work fine. As you have it right now, its location is dependent on the URL with which the servlet is been invoked. Basically, it should be virtually in the same folder as the servlet.</p>\n\n<p>This example should do:</p>\n\n<pre><code>WebContent\n |-- images\n |    `-- space.gif\n `-- WEB-INF\n      |-- classes\n      `-- lib\n</code></pre>\n\n<p>with</p>\n\n<pre><code>out.print(\"&lt;img src='\" + request.getContextPath() + \"/images/space.gif' alt='image' /&gt;\");\n</code></pre>\n\n<p>Or, if that image is actually located outside the public web content and you can't move it in the public web content for some unobvious reason, then you'd need to add an extra web application context to your server configuration pointing to that folder, e.g. <code>/images</code>, so that you can do</p>\n\n<pre><code>out.print(\"&lt;img src='/images/space.gif' alt='image' /&gt;\");\n</code></pre>\n\n<h3>See also:</h3>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/4543936/load-the-image-from-outside-of-webcontext-in-jsf\">Load images from outside of webapps / webcontext / deploy folder using &lt;h:graphicImage&gt; or &lt;img&gt; tag</a></li>\n</ul>\n\n<hr>\n\n<p><strong>Unrelated</strong> to the concrete problem, HTML belongs in <a href=\"https://stackoverflow.com/tags/jsp/info\">JSP</a>, not in <a href=\"https://stackoverflow.com/tags/servlets/info\">Servlet</a>.</p>\n"},{"tags":[],"owner":{"account_id":14219996,"reputation":21,"user_id":10272623,"display_name":"Amish Joshi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1538332035,"creation_date":1538332035,"answer_id":52580860,"question_id":8073989,"body_markdown":"&lt;This answer is for Netbeans users&gt;\r\n\r\nFind the docBase path given in (YourProjectname).xml file(mine was D:\\MiniProject2\\MiniProject2\\build\\web),\r\nThen just make an Image Folder(i made folder &quot;Images&quot; in D:\\MiniProject2\\MiniProject2\\build\\web )\r\nStore Your Images in this Folder\r\n\r\nnow use &lt;img src=&quot;Images/abc.png&quot;);\r\n\r\nIt will work;\r\n ","title":"How to print the correct path to resource when using out.print for HTML","body":"<p></p>\n\n<p>Find the docBase path given in (YourProjectname).xml file(mine was D:\\MiniProject2\\MiniProject2\\build\\web),\nThen just make an Image Folder(i made folder \"Images\" in D:\\MiniProject2\\MiniProject2\\build\\web )\nStore Your Images in this Folder</p>\n\n<p>now use \n\n<p>It will work;</p>\n"}],"owner":{"account_id":1014002,"reputation":99,"user_id":1025987,"accept_rate":33,"display_name":"bobby"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27106,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":8074077,"answer_count":2,"score":0,"last_activity_date":1640087238,"creation_date":1320888646,"question_id":8073989,"body_markdown":"I am new to java, and am trying to add an image &#39;space.gif&#39; from a file path through a html servlet.\r\n\r\n    public void doGet(HttpServletRequest request, HttpServletResponse response)\r\n                throws ServletException, IOException\r\n    {              \r\n      response.setContentType(&quot;text/html&quot;);\r\n    \r\n      PrintWriter out = response.getWriter();\r\n            \r\n      out.print(&quot;&lt;HTML&gt;&quot;);\r\n      out.print(&quot;&lt;HEAD&gt;&lt;TITLE&gt;Upload Image&lt;/TITLE&gt;&lt;/HEAD&gt;&quot;);\r\n      out.print(&quot;&lt;BODY&gt;&quot;);\r\n\r\n      out.print(&quot;&lt;img src=&#39;space.gif&#39; alt=&#39;image&#39; /&gt;&quot;);\r\n\r\n      out.print(&quot;&lt;/BODY&gt;&quot;);\r\n      out.print(&quot;&lt;/HTML&gt;&quot;);\r\n      out.close();\r\n    }","title":"How to print the correct path to resource when using out.print for HTML","body":"<p>I am new to java, and am trying to add an image 'space.gif' from a file path through a html servlet.</p>\n\n<pre><code>public void doGet(HttpServletRequest request, HttpServletResponse response)\n            throws ServletException, IOException\n{              \n  response.setContentType(\"text/html\");\n\n  PrintWriter out = response.getWriter();\n\n  out.print(\"&lt;HTML&gt;\");\n  out.print(\"&lt;HEAD&gt;&lt;TITLE&gt;Upload Image&lt;/TITLE&gt;&lt;/HEAD&gt;\");\n  out.print(\"&lt;BODY&gt;\");\n\n  out.print(\"&lt;img src='space.gif' alt='image' /&gt;\");\n\n  out.print(\"&lt;/BODY&gt;\");\n  out.print(\"&lt;/HTML&gt;\");\n  out.close();\n}\n</code></pre>\n"},{"tags":["java","azure-webjobs","azure-monitoring"],"answers":[{"tags":[],"owner":{"account_id":10725921,"reputation":1866,"user_id":9303470,"display_name":"Ecstasy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640086931,"creation_date":1629693738,"answer_id":68887392,"question_id":68846331,"body_markdown":"**Update:**\r\n\r\nAs [Sdcoder][1] commented:\r\n\r\n&gt;I am calling application-insight agent jar from the run.sh file. It solved my problem, I am able to see the logs in the app insights now. my `run.sh` file looks like this: `set PATH=%PATH%;%JAVA_HOME%/bin java -javaagent:applicationinsights-agent-3.0.2.jar -jar app.jar`\r\n\r\n---------------\r\nAs suggested by [ahmelsayed][2]:\r\n\r\n- If you are **NOT** using the **WebJob SDK**, then unfortunately there aren&#39;t any events for continuous webjobs. There is only [one way for triggered jobs][3].\r\n\r\n```\r\n private async void ReportTriggeredJobFinished(string jobName, string jobRunId)\r\n        {\r\n            TriggeredJobRun triggeredJobRun = GetJobRun(jobName, jobRunId);\r\n            if (triggeredJobRun == null)\r\n            {\r\n                return;\r\n            }\r\n\r\n            await _hooksManager.PublishEventAsync(HookEventTypes.TriggeredJobFinished, triggeredJobRun);\r\n        }\r\n    }\r\n```\r\n\r\nYou can refer to [Azure WebJob, how to be notified if it stops?](https://stackoverflow.com/questions/33159594/azure-webjob-how-to-be-notified-if-it-stops) and [Best way to set up alerts on azure web job](https://stackoverflow.com/questions/54896147/best-way-to-set-up-alerts-on-azure-web-job)\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/16704644/sdcoder\r\n  [2]: https://stackoverflow.com/users/3234163/ahmelsayed\r\n  [3]: https://github.com/projectkudu/kudu/blob/3f22884d322d5a56fa85569fec8bd1b4f4c132ae/Kudu.Core/Jobs/TriggeredJobsManager.cs#L250-L260","title":"How to set an alert for webjobs without SDK","body":"<p><strong>Update:</strong></p>\n<p>As <a href=\"https://stackoverflow.com/users/16704644/sdcoder\">Sdcoder</a> commented:</p>\n<blockquote>\n<p>I am calling application-insight agent jar from the run.sh file. It solved my problem, I am able to see the logs in the app insights now. my <code>run.sh</code> file looks like this: <code>set PATH=%PATH%;%JAVA_HOME%/bin java -javaagent:applicationinsights-agent-3.0.2.jar -jar app.jar</code></p>\n</blockquote>\n<hr />\n<p>As suggested by <a href=\"https://stackoverflow.com/users/3234163/ahmelsayed\">ahmelsayed</a>:</p>\n<ul>\n<li>If you are <strong>NOT</strong> using the <strong>WebJob SDK</strong>, then unfortunately there aren't any events for continuous webjobs. There is only <a href=\"https://github.com/projectkudu/kudu/blob/3f22884d322d5a56fa85569fec8bd1b4f4c132ae/Kudu.Core/Jobs/TriggeredJobsManager.cs#L250-L260\" rel=\"nofollow noreferrer\">one way for triggered jobs</a>.</li>\n</ul>\n<pre><code> private async void ReportTriggeredJobFinished(string jobName, string jobRunId)\n        {\n            TriggeredJobRun triggeredJobRun = GetJobRun(jobName, jobRunId);\n            if (triggeredJobRun == null)\n            {\n                return;\n            }\n\n            await _hooksManager.PublishEventAsync(HookEventTypes.TriggeredJobFinished, triggeredJobRun);\n        }\n    }\n</code></pre>\n<p>You can refer to <a href=\"https://stackoverflow.com/questions/33159594/azure-webjob-how-to-be-notified-if-it-stops\">Azure WebJob, how to be notified if it stops?</a> and <a href=\"https://stackoverflow.com/questions/54896147/best-way-to-set-up-alerts-on-azure-web-job\">Best way to set up alerts on azure web job</a></p>\n"}],"owner":{"account_id":22509511,"reputation":43,"user_id":16704644,"display_name":"Sdcoder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":68887392,"answer_count":1,"score":0,"last_activity_date":1640086931,"creation_date":1629369687,"question_id":68846331,"body_markdown":"I have created a triggered webjob using Java as a technology stack and it is running fine after deployment.\r\nBut now I want to  monitor this webjob using alert notification. I tried multiple things, like adding app insights dependencies in POM file and using instrumentation key but nothing is working out.\r\nIf anyone can guide me how to set an alert for webjob failure, it will be so helpful.\r\nThanks.","title":"How to set an alert for webjobs without SDK","body":"<p>I have created a triggered webjob using Java as a technology stack and it is running fine after deployment.\nBut now I want to  monitor this webjob using alert notification. I tried multiple things, like adding app insights dependencies in POM file and using instrumentation key but nothing is working out.\nIf anyone can guide me how to set an alert for webjob failure, it will be so helpful.\nThanks.</p>\n"},{"tags":["java","javascript","angularjs","spring","jhipster"],"answers":[{"tags":[],"owner":{"account_id":4488338,"reputation":742,"user_id":3650199,"accept_rate":75,"display_name":"Jodevan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1435889759,"creation_date":1435889759,"answer_id":31197449,"question_id":29834623,"body_markdown":"To the best of my knowledge, most of the database use these other data types (datetime, date and timestamp) to represent time, since these types are enough to handle time information gracefully. The point of displaying something like (HH:mm:ss) looks to me like just a matter of how you want to show the date/time information to the user (in this case, getting rid of the date part).","title":"Time in JHipster","body":"<p>To the best of my knowledge, most of the database use these other data types (datetime, date and timestamp) to represent time, since these types are enough to handle time information gracefully. The point of displaying something like (HH:mm:ss) looks to me like just a matter of how you want to show the date/time information to the user (in this case, getting rid of the date part).</p>\n"},{"tags":[],"owner":{"account_id":1469379,"reputation":79,"user_id":1381318,"display_name":"kuabhina1702"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640086822,"creation_date":1640086822,"answer_id":70434857,"question_id":29834623,"body_markdown":"As of today Jhipster has Instant as a field to map time.","title":"Time in JHipster","body":"<p>As of today Jhipster has Instant as a field to map time.</p>\n"}],"owner":{"account_id":4870174,"reputation":575,"user_id":3926980,"accept_rate":50,"display_name":"sammubr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1936,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1640086822,"creation_date":1429824382,"question_id":29834623,"body_markdown":"Is there any way to automatically generate fields of type &quot;time&quot; in the database using JHipster? I&#39;m looking for &quot;time&quot; in SQL (HH:mm:ss), not datetime or date or timestamp. JHipster has Datetime and LocalDate, but not simple &quot;Time&quot;. Why?","title":"Time in JHipster","body":"<p>Is there any way to automatically generate fields of type \"time\" in the database using JHipster? I'm looking for \"time\" in SQL (HH:mm:ss), not datetime or date or timestamp. JHipster has Datetime and LocalDate, but not simple \"Time\". Why?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":10814530,"reputation":4195,"user_id":7954021,"display_name":"Renis1235"},"score":1,"creation_date":1640072922,"post_id":70432076,"comment_id":124502325,"body_markdown":"`return carList.get(b).toString();`","body":"<code>return carList.get(b).toString();</code>"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":6,"creation_date":1640073291,"post_id":70432076,"comment_id":124502412,"body_markdown":"Hint: learning programming is mostly: about trying things yourself. Dont make it your FIRST impulse to ask other people for explanations . You see: any good book or tutorial answers your question. And gives you the necessary context. So, please understand: this isnt programming school here were people **teach** you programming. Meaning: especially for all these basic questions, it is much more helpful for your skills ... to do *research* yourself. Read books, use search engines, etc.","body":"Hint: learning programming is mostly: about trying things yourself. Dont make it your FIRST impulse to ask other people for explanations . You see: any good book or tutorial answers your question. And gives you the necessary context. So, please understand: this isnt programming school here were people <b>teach</b> you programming. Meaning: especially for all these basic questions, it is much more helpful for your skills ... to do <i>research</i> yourself. Read books, use search engines, etc."},{"owner":{"display_name":"user17695302"},"score":1,"creation_date":1640073516,"post_id":70432076,"comment_id":124502481,"body_markdown":"Understood  @GhostCat","body":"Understood  @GhostCat"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":1,"creation_date":1640074949,"post_id":70432076,"comment_id":124502939,"body_markdown":"You are welcome. And note: of course we gladly help with specific questions, but as said: dont make it your first impulse to ask here. When you dig into a topic, and you can&#39;t get your code to work, even after hours of trying, then of course: you can come ask here!","body":"You are welcome. And note: of course we gladly help with specific questions, but as said: dont make it your first impulse to ask here. When you dig into a topic, and you can&#39;t get your code to work, even after hours of trying, then of course: you can come ask here!"},{"owner":{"account_id":10481421,"reputation":1559,"user_id":7726319,"accept_rate":0,"display_name":"Prog_G"},"score":0,"creation_date":1640079862,"post_id":70432076,"comment_id":124504599,"body_markdown":"Do you want to return all the objects at the same time?","body":"Do you want to return all the objects at the same time?"},{"owner":{"display_name":"user17695302"},"score":0,"creation_date":1640082818,"post_id":70432076,"comment_id":124505657,"body_markdown":"@Prog_G\nso as i cannot return in void method  , i  need  to create another metod that return my list of cars (only the one with the same model)\nso i  have  2  classes     \n1 = main  and second is  car \nnow i  get confused with the  return , since i  want to retrun  the same  as  sout it&#39;s giving to me :( .\ni get really  confused zith the return  here . i need to  figure it out at the moment since i cannt get the result","body":"@Prog_G so as i cannot return in void method  , i  need  to create another metod that return my list of cars (only the one with the same model) so i  have  2  classes      1 = main  and second is  car  now i  get confused with the  return , since i  want to retrun  the same  as  sout it&#39;s giving to me :( . i get really  confused zith the return  here . i need to  figure it out at the moment since i cannt get the result"}],"answers":[{"tags":[],"owner":{"account_id":10481421,"reputation":1559,"user_id":7726319,"accept_rate":0,"display_name":"Prog_G"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640086704,"creation_date":1640083225,"answer_id":70434125,"question_id":70432076,"body_markdown":"Try the below function to get all the Ferrari Car object list:\r\n\r\n    List&lt;Car&gt; getFerrariCarList(ArrayList&lt;Car&gt; carList){\r\n            List&lt;Car&gt; newCarList = new ArrayList&lt;&gt;();\r\n            for (int b = 0; b &lt; carList.size(); b++) {\r\n                if (carList.get(b).getMark().equalsIgnoreCase(&quot;ferrari&quot;)) {\r\n                    newCarList.add(carList.get(b));\r\n    //                System.out.println(&quot;This is Ferrari  : &quot; + carList.get(b));\r\n                }\r\n            }\r\n            return newCarList;\r\n        }\r\n\r\n\r\n**Update 1:**\r\n\r\n**Main2.java**\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    \r\n    public class Main2 {\r\n        private static Object Car;\r\n    \r\n        public static void main(String[] args) {\r\n            Car car1 = new Car(&quot;PodiumBlue&quot;, 18500, 165, &quot;Fiat&quot;, &quot;Abarth&quot;, 2019);\r\n            Car car2 = new Car(&quot;Blue&quot;, 9500, 105, &quot;Renualt&quot;, &quot;Laguna&quot;, 2001);\r\n            Car car3 = new Car(&quot;Green&quot;, 300000, 750, &quot;Ferrari&quot;, &quot;SP-90&quot;, 2020);\r\n            Car car4 = new Car(&quot;Black&quot;, 80500, 650, &quot;BMW&quot;, &quot;M5-Competition&quot;, 2021);\r\n            Car car5 = new Car(&quot;black&quot;, 1305000, 565, &quot;Ferrari&quot;, &quot;Roma&quot;, 2018);\r\n            List&lt;Car&gt; carList = Arrays.asList(car1, car2, car3, car4, car5);\r\n            List&lt;Car&gt; ferrariCars = getFerrariCarList(carList);\r\n            System.out.println(ferrariCars);\r\n        }\r\n    \r\n        static List&lt;Car&gt; getFerrariCarList(List&lt;Car&gt; carList) {\r\n            List&lt;Car&gt; newCarList = new ArrayList&lt;&gt;();\r\n            for (int b = 0; b &lt; carList.size(); b++) {\r\n                if (carList.get(b).getMark().equalsIgnoreCase(&quot;ferrari&quot;)) {\r\n                    newCarList.add(carList.get(b));\r\n                }\r\n            }\r\n            return newCarList;\r\n        }\r\n    }\r\n\r\n\r\n**Car.java**\r\n\r\n    public class Car {\r\n        private String color;\r\n        private int price;\r\n        private int power;\r\n        private String mark;\r\n        private String model;\r\n        private Integer age;\r\n    \r\n        public Car(String color, int price, int power, String mark, String model, Integer age) {\r\n            this.color = color;\r\n            this.price = price;\r\n            this.power = power;\r\n            this.mark = mark;\r\n            this.model = model;\r\n            this.age = age;\r\n        }\r\n    \r\n        public String getColor() {\r\n            return color;\r\n        }\r\n    \r\n        public void setColor(String color) {\r\n            this.color = color;\r\n        }\r\n    \r\n        public int getPrice() {\r\n            return price;\r\n        }\r\n    \r\n        public void setPrice(int price) {\r\n            this.price = price;\r\n        }\r\n    \r\n        public int getPower() {\r\n            return power;\r\n        }\r\n    \r\n        public void setPower(int power) {\r\n            this.power = power;\r\n        }\r\n    \r\n        public String getMark() {\r\n            return mark;\r\n        }\r\n    \r\n        public void setMark(String mark) {\r\n            this.mark = mark;\r\n        }\r\n    \r\n        public String getModel() {\r\n            return model;\r\n        }\r\n    \r\n        public void setModel(String model) {\r\n            this.model = model;\r\n        }\r\n    \r\n        public Integer getAge() {\r\n            return age;\r\n        }\r\n    \r\n        public void setAge(Integer age) {\r\n            this.age = age;\r\n        }\r\n    }","title":"How to return an object from a list in java","body":"<p>Try the below function to get all the Ferrari Car object list:</p>\n<pre><code>List&lt;Car&gt; getFerrariCarList(ArrayList&lt;Car&gt; carList){\n        List&lt;Car&gt; newCarList = new ArrayList&lt;&gt;();\n        for (int b = 0; b &lt; carList.size(); b++) {\n            if (carList.get(b).getMark().equalsIgnoreCase(&quot;ferrari&quot;)) {\n                newCarList.add(carList.get(b));\n//                System.out.println(&quot;This is Ferrari  : &quot; + carList.get(b));\n            }\n        }\n        return newCarList;\n    }\n</code></pre>\n<p><strong>Update 1:</strong></p>\n<p><strong>Main2.java</strong></p>\n<pre><code>import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\n\npublic class Main2 {\n    private static Object Car;\n\n    public static void main(String[] args) {\n        Car car1 = new Car(&quot;PodiumBlue&quot;, 18500, 165, &quot;Fiat&quot;, &quot;Abarth&quot;, 2019);\n        Car car2 = new Car(&quot;Blue&quot;, 9500, 105, &quot;Renualt&quot;, &quot;Laguna&quot;, 2001);\n        Car car3 = new Car(&quot;Green&quot;, 300000, 750, &quot;Ferrari&quot;, &quot;SP-90&quot;, 2020);\n        Car car4 = new Car(&quot;Black&quot;, 80500, 650, &quot;BMW&quot;, &quot;M5-Competition&quot;, 2021);\n        Car car5 = new Car(&quot;black&quot;, 1305000, 565, &quot;Ferrari&quot;, &quot;Roma&quot;, 2018);\n        List&lt;Car&gt; carList = Arrays.asList(car1, car2, car3, car4, car5);\n        List&lt;Car&gt; ferrariCars = getFerrariCarList(carList);\n        System.out.println(ferrariCars);\n    }\n\n    static List&lt;Car&gt; getFerrariCarList(List&lt;Car&gt; carList) {\n        List&lt;Car&gt; newCarList = new ArrayList&lt;&gt;();\n        for (int b = 0; b &lt; carList.size(); b++) {\n            if (carList.get(b).getMark().equalsIgnoreCase(&quot;ferrari&quot;)) {\n                newCarList.add(carList.get(b));\n            }\n        }\n        return newCarList;\n    }\n}\n</code></pre>\n<p><strong>Car.java</strong></p>\n<pre><code>public class Car {\n    private String color;\n    private int price;\n    private int power;\n    private String mark;\n    private String model;\n    private Integer age;\n\n    public Car(String color, int price, int power, String mark, String model, Integer age) {\n        this.color = color;\n        this.price = price;\n        this.power = power;\n        this.mark = mark;\n        this.model = model;\n        this.age = age;\n    }\n\n    public String getColor() {\n        return color;\n    }\n\n    public void setColor(String color) {\n        this.color = color;\n    }\n\n    public int getPrice() {\n        return price;\n    }\n\n    public void setPrice(int price) {\n        this.price = price;\n    }\n\n    public int getPower() {\n        return power;\n    }\n\n    public void setPower(int power) {\n        this.power = power;\n    }\n\n    public String getMark() {\n        return mark;\n    }\n\n    public void setMark(String mark) {\n        this.mark = mark;\n    }\n\n    public String getModel() {\n        return model;\n    }\n\n    public void setModel(String model) {\n        this.model = model;\n    }\n\n    public Integer getAge() {\n        return age;\n    }\n\n    public void setAge(Integer age) {\n        this.age = age;\n    }\n}\n</code></pre>\n"}],"owner":{"display_name":"user17695302"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":936,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70434125,"answer_count":1,"score":0,"last_activity_date":1640086704,"creation_date":1640072863,"question_id":70432076,"body_markdown":"So  i have create  my  Car class  and  now i need to sout the model Ferrari   \r\n\r\nhere  is my code (sout version)\r\n\r\n    for (int b = 0; b &lt; carList.size(); b++) {\r\n            if (carList.get(b).getMark().equalsIgnoreCase(&quot;ferrari&quot;)) {\r\n                System.out.println(&quot;This is Ferrari  : &quot; + carList.get(b));\r\n            }\r\n\r\n        }\r\noutput for this code is :\r\n\r\n    This is Ferrari  : Car{color=&#39;Green&#39;, price=300000, power=750, mark=&#39;Ferrari&#39;, model=&#39;SP-90&#39;, age=&#39;2020&#39;}\r\n    This is Ferrari  : Car{color=&#39;black&#39;, price=1305000, power=565, mark=&#39;Ferrari&#39;, model=&#39;Roma&#39;, age=&#39;2018&#39;}\r\nSince my list  have 2 ferarri \r\n\r\n\r\nNow i am  curios how to use retrun(since i am new in this field) , to  return  the same output i have used  with  the (sout veriosn) above .","title":"How to return an object from a list in java","body":"<p>So  i have create  my  Car class  and  now i need to sout the model Ferrari</p>\n<p>here  is my code (sout version)</p>\n<pre><code>for (int b = 0; b &lt; carList.size(); b++) {\n        if (carList.get(b).getMark().equalsIgnoreCase(&quot;ferrari&quot;)) {\n            System.out.println(&quot;This is Ferrari  : &quot; + carList.get(b));\n        }\n\n    }\n</code></pre>\n<p>output for this code is :</p>\n<pre><code>This is Ferrari  : Car{color='Green', price=300000, power=750, mark='Ferrari', model='SP-90', age='2020'}\nThis is Ferrari  : Car{color='black', price=1305000, power=565, mark='Ferrari', model='Roma', age='2018'}\n</code></pre>\n<p>Since my list  have 2 ferarri</p>\n<p>Now i am  curios how to use retrun(since i am new in this field) , to  return  the same output i have used  with  the (sout veriosn) above .</p>\n"},{"tags":["java","log4j"],"answers":[{"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1639727883,"creation_date":1639472441,"answer_id":70346215,"question_id":70345869,"body_markdown":"Only servers that receive messages from other servers are vulnerable to `CVE-2019-17571`. Basically the only way to trigger the vulnerability is to run:\r\n\r\n```\r\njava -jar log4j.jar org.apache.log4j.net.SocketServer &lt;port&gt; &lt;config.properties&gt; &lt;log/directory&gt;\r\n```\r\n\r\nor doing the equivalent in code. Therefore most Log4j 1.2 users are not vulnerable.\r\n\r\nIn your case, however, you just need to replace the [`slf4j-log4j12`](https://mvnrepository.com/artifact/org.slf4j/slf4j-log4j12) binding with its Log4j 2.x equivalent ([`log4j-slf4j-impl`](https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-slf4j-impl)) and you can remove Log4j 1.2 altogether.\r\n\r\n**Edit**: Nevertheless, if you want to be certain no one will use the library as above, you can remove the class. Considering also [`CVE-2021-4104`](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-4104) this amount to:\r\n\r\n```\r\nzip -d log4j.jar org/apache/log4j/net/SocketServer.class\r\nzip -d log4j.jar org/apache/log4j/net/JMSAppender.class\r\n```","title":"How to mitigate Apache Log4j Deserialization RCE (CVE-2019-17571)","body":"<p>Only servers that receive messages from other servers are vulnerable to <code>CVE-2019-17571</code>. Basically the only way to trigger the vulnerability is to run:</p>\n<pre><code>java -jar log4j.jar org.apache.log4j.net.SocketServer &lt;port&gt; &lt;config.properties&gt; &lt;log/directory&gt;\n</code></pre>\n<p>or doing the equivalent in code. Therefore most Log4j 1.2 users are not vulnerable.</p>\n<p>In your case, however, you just need to replace the <a href=\"https://mvnrepository.com/artifact/org.slf4j/slf4j-log4j12\" rel=\"noreferrer\"><code>slf4j-log4j12</code></a> binding with its Log4j 2.x equivalent (<a href=\"https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-slf4j-impl\" rel=\"noreferrer\"><code>log4j-slf4j-impl</code></a>) and you can remove Log4j 1.2 altogether.</p>\n<p><strong>Edit</strong>: Nevertheless, if you want to be certain no one will use the library as above, you can remove the class. Considering also <a href=\"https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-4104\" rel=\"noreferrer\"><code>CVE-2021-4104</code></a> this amount to:</p>\n<pre><code>zip -d log4j.jar org/apache/log4j/net/SocketServer.class\nzip -d log4j.jar org/apache/log4j/net/JMSAppender.class\n</code></pre>\n"}],"owner":{"account_id":19064371,"reputation":441,"user_id":13919748,"display_name":"javaistaucheineinsel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7565,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":70346215,"answer_count":1,"score":5,"last_activity_date":1640086704,"creation_date":1639470792,"question_id":70345869,"body_markdown":"I have upgraded my log4j-core dependency to 2.15.0 in order to prevent any potential Log4Shell attack. That being said I could not upgrade slf4j-log4j12&#39;s indirect log4j dependency from 1.2.17 since the latest stable version of slf4j-log4j12 is still dependent on log4j 1.2.17. This still leaves my webapp vulnerable to [CVE-2019-17571][1] if I am not mistaken. So reading about possible mitigation strategies I came across this [article][2] which recommends to :\r\n&gt; prevent the socket port enabled by the SocketServer class in Log4j\r\n&gt; from being opened to the public network\r\n\r\nCould anyone please explain to me how can this be achieved and whether would this workaround be sufficient?\r\n\r\n\r\n  [1]: https://www.cvedetails.com/cve/CVE-2019-17571/\r\n  [2]: https://nsfocusglobal.com/apache-log4j-deserialization-remote-code-execution-cve-2019-17571-vulnerability-threat-alert/","title":"How to mitigate Apache Log4j Deserialization RCE (CVE-2019-17571)","body":"<p>I have upgraded my log4j-core dependency to 2.15.0 in order to prevent any potential Log4Shell attack. That being said I could not upgrade slf4j-log4j12's indirect log4j dependency from 1.2.17 since the latest stable version of slf4j-log4j12 is still dependent on log4j 1.2.17. This still leaves my webapp vulnerable to <a href=\"https://www.cvedetails.com/cve/CVE-2019-17571/\" rel=\"noreferrer\">CVE-2019-17571</a> if I am not mistaken. So reading about possible mitigation strategies I came across this <a href=\"https://nsfocusglobal.com/apache-log4j-deserialization-remote-code-execution-cve-2019-17571-vulnerability-threat-alert/\" rel=\"noreferrer\">article</a> which recommends to :</p>\n<blockquote>\n<p>prevent the socket port enabled by the SocketServer class in Log4j\nfrom being opened to the public network</p>\n</blockquote>\n<p>Could anyone please explain to me how can this be achieved and whether would this workaround be sufficient?</p>\n"},{"tags":["java","ubuntu-18.04","tess4j"],"answers":[{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1640086326,"creation_date":1640086326,"answer_id":70434749,"question_id":70434438,"body_markdown":"Not quite sure if you are aware, but there seems to be an API available that you can simply use instead of directly pointing to your Installation Lib Folder.\r\n\r\nThis means that this would be platform agnostic and would work whether on windows/linux.\r\n\r\nExample of Usage:\r\n\r\nThe pom.xml build file\r\n\r\n    &lt;project&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;groupId&gt;org.bytedeco.tesseract&lt;/groupId&gt;\r\n        &lt;artifactId&gt;BasicExample&lt;/artifactId&gt;\r\n        &lt;version&gt;1.5.7-SNAPSHOT&lt;/version&gt;\r\n        &lt;properties&gt;\r\n            &lt;exec.mainClass&gt;BasicExample&lt;/exec.mainClass&gt;\r\n        &lt;/properties&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.bytedeco&lt;/groupId&gt;\r\n                &lt;artifactId&gt;tesseract-platform&lt;/artifactId&gt;\r\n                &lt;version&gt;5.0.0-1.5.7-SNAPSHOT&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n        &lt;build&gt;\r\n            &lt;sourceDirectory&gt;.&lt;/sourceDirectory&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nThe BasicExample.java source file\r\n    \r\n    import org.bytedeco.javacpp.*;\r\n    import org.bytedeco.leptonica.*;\r\n    import org.bytedeco.tesseract.*;\r\n    import static org.bytedeco.leptonica.global.lept.*;\r\n    import static org.bytedeco.tesseract.global.tesseract.*;\r\n    \r\n    public class BasicExample {\r\n        public static void main(String[] args) {\r\n            BytePointer outText;\r\n    \r\n            TessBaseAPI api = new TessBaseAPI();\r\n            // Initialize tesseract-ocr with English, without specifying tessdata path\r\n            if (api.Init(null, &quot;eng&quot;) != 0) {\r\n                System.err.println(&quot;Could not initialize tesseract.&quot;);\r\n                System.exit(1);\r\n            }\r\n    \r\n            // Open input image with leptonica library\r\n            PIX image = pixRead(args.length &gt; 0 ? args[0] : &quot;/usr/src/tesseract/testing/phototest.tif&quot;);\r\n            api.SetImage(image);\r\n            // Get OCR result\r\n            outText = api.GetUTF8Text();\r\n            System.out.println(&quot;OCR output:\\n&quot; + outText.getString());\r\n    \r\n            // Destroy used object and release memory\r\n            api.End();\r\n            outText.deallocate();\r\n            pixDestroy(image);\r\n        }\r\n    }\r\n\r\nProject Documentation: \r\n\r\n\r\nhttps://github.com/bytedeco/javacpp-presets/tree/master/tesseract\r\n\r\nRelevant StackOvervlow for V4: https://stackoverflow.com/questions/13974645/using-tesseract-from-java\r\n\r\n\r\n\r\n","title":"Tess4J on Ubuntu crashing JVM","body":"<p>Not quite sure if you are aware, but there seems to be an API available that you can simply use instead of directly pointing to your Installation Lib Folder.</p>\n<p>This means that this would be platform agnostic and would work whether on windows/linux.</p>\n<p>Example of Usage:</p>\n<p>The pom.xml build file</p>\n<pre><code>&lt;project&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;org.bytedeco.tesseract&lt;/groupId&gt;\n    &lt;artifactId&gt;BasicExample&lt;/artifactId&gt;\n    &lt;version&gt;1.5.7-SNAPSHOT&lt;/version&gt;\n    &lt;properties&gt;\n        &lt;exec.mainClass&gt;BasicExample&lt;/exec.mainClass&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.bytedeco&lt;/groupId&gt;\n            &lt;artifactId&gt;tesseract-platform&lt;/artifactId&gt;\n            &lt;version&gt;5.0.0-1.5.7-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;sourceDirectory&gt;.&lt;/sourceDirectory&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>The BasicExample.java source file</p>\n<pre><code>import org.bytedeco.javacpp.*;\nimport org.bytedeco.leptonica.*;\nimport org.bytedeco.tesseract.*;\nimport static org.bytedeco.leptonica.global.lept.*;\nimport static org.bytedeco.tesseract.global.tesseract.*;\n\npublic class BasicExample {\n    public static void main(String[] args) {\n        BytePointer outText;\n\n        TessBaseAPI api = new TessBaseAPI();\n        // Initialize tesseract-ocr with English, without specifying tessdata path\n        if (api.Init(null, &quot;eng&quot;) != 0) {\n            System.err.println(&quot;Could not initialize tesseract.&quot;);\n            System.exit(1);\n        }\n\n        // Open input image with leptonica library\n        PIX image = pixRead(args.length &gt; 0 ? args[0] : &quot;/usr/src/tesseract/testing/phototest.tif&quot;);\n        api.SetImage(image);\n        // Get OCR result\n        outText = api.GetUTF8Text();\n        System.out.println(&quot;OCR output:\\n&quot; + outText.getString());\n\n        // Destroy used object and release memory\n        api.End();\n        outText.deallocate();\n        pixDestroy(image);\n    }\n}\n</code></pre>\n<p>Project Documentation:</p>\n<p><a href=\"https://github.com/bytedeco/javacpp-presets/tree/master/tesseract\" rel=\"nofollow noreferrer\">https://github.com/bytedeco/javacpp-presets/tree/master/tesseract</a></p>\n<p>Relevant StackOvervlow for V4: <a href=\"https://stackoverflow.com/questions/13974645/using-tesseract-from-java\">Using Tesseract from java</a></p>\n"}],"owner":{"account_id":18944447,"reputation":65,"user_id":13823700,"display_name":"Jennifer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":544,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70434749,"answer_count":1,"score":0,"last_activity_date":1640086326,"creation_date":1640084729,"question_id":70434438,"body_markdown":"I am new to Tess4J and to JNA, so apologies if this is obvious, but I have not been able to find in the blogs.\r\nI am on Ubuntu 18.04, running Java 17.0.1, Tomcat 10.0. I have built a simple dynamic web app, details below. I installed resources as such:\r\n```\r\nsudo apt install tesseract-ocr tesseract-ocr-rus libleptonica-dev\r\n```\r\n\r\nFirst I will mention that I am able to handle my test doc with no problems from the command line:\r\n```\r\ntesseract /tmp/output-0.jpg /tmp/file -l rus+eng\r\n```\r\nBut when I try the same from Java the JVM crashes.\r\n\r\nThe relevant Java inside my class OCR is as follows:\r\n```\r\n\tprivate static final String tessDir = &quot;/usr/share/tesseract-ocr/4.00/&quot;;\r\n\tprivate static final String libDir = &quot;/usr/lib/x86_64-linux-gnu&quot;;\r\n\tprivate ITesseract ocr = new Tesseract();\r\n\t\r\n\tpublic OCR() {\r\n        System.setProperty(&quot;java.library.path&quot;, System.getProperty(&quot;java.library.path&quot;) + &quot;:&quot; + libDir);\r\n        ocr.setDatapath(tessDir);\r\n\t}\r\n\r\n\tpublic String doOcr (String inputDirName, String outputDirName, List&lt;File&gt; files, Set&lt;Lang&gt; langs) throws IOException {\r\n\t\tFile f1 = new File(&quot;/tmp/output-0.jpg&quot;);\r\n\t\tString s = &quot;&quot;;\r\n\t\tocr.setLanguage(&quot;rus+eng&quot;);\r\n       \ttry {\r\n       \t\ts = ocr.doOCR(f1);\r\n       \t} catch (Exception e) {\r\n       \t\tthrow new RuntimeException(e.getMessage());\r\n       \t}\r\n       \treturn s;\r\n\t}\r\n```\r\npom.xml:\r\n```\r\n\t&lt;dependency&gt;\r\n\t    &lt;groupId&gt;net.java.dev.jna&lt;/groupId&gt;\r\n\t    &lt;artifactId&gt;jna-platform&lt;/artifactId&gt;\r\n\t    &lt;version&gt;5.6.0&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t    &lt;groupId&gt;com.github.jai-imageio&lt;/groupId&gt;\r\n\t    &lt;artifactId&gt;jai-imageio-core&lt;/artifactId&gt;\r\n\t    &lt;version&gt;1.3.0&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t    &lt;groupId&gt;net.sourceforge.tess4j&lt;/groupId&gt;\r\n\t    &lt;artifactId&gt;tess4j&lt;/artifactId&gt;\r\n\t    &lt;version&gt;4.6.0&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t    &lt;groupId&gt;net.sourceforge.lept4j&lt;/groupId&gt;\r\n\t    &lt;artifactId&gt;lept4j&lt;/artifactId&gt;\r\n\t    &lt;version&gt;1.16.1&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t    &lt;groupId&gt;org.ghost4j&lt;/groupId&gt;\r\n\t    &lt;artifactId&gt;ghost4j&lt;/artifactId&gt;\r\n\t    &lt;version&gt;1.0.1&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n```\r\nThe crash log looks like this:\r\n```\r\n# A fatal error has been detected by the Java Runtime Environment:\r\n#\r\n#  SIGSEGV (0xb) at pc=0x00007f67aeed2c27, pid=23274, tid=23912\r\n#\r\n# JRE version: Java(TM) SE Runtime Environment (17.0.1+12) (build 17.0.1+12-LTS-39)\r\n# Java VM: Java HotSpot(TM) 64-Bit Server VM (17.0.1+12-LTS-39, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, parallel gc, linux-amd64)\r\n...\r\nNative frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)\r\nC  [libtesseract.so.4+0xa1c27]  tesseract::Tesseract::recog_all_words(PAGE_RES*, ETEXT_DESC*, TBOX const*, char const*, int)+0x437\r\n\r\nJava frames: (J=compiled Java code, j=interpreted, Vv=VM code)\r\nj  com.sun.jna.Native.invokePointer(Lcom/sun/jna/Function;JI[Ljava/lang/Object;)J+0\r\nj  com.sun.jna.Function.invokePointer(I[Ljava/lang/Object;)Lcom/sun/jna/Pointer;+7\r\nj  com.sun.jna.Function.invoke([Ljava/lang/Object;Ljava/lang/Class;ZI)Ljava/lang/Object;+385\r\nj  com.sun.jna.Function.invoke(Ljava/lang/reflect/Method;[Ljava/lang/Class;Ljava/lang/Class;[Ljava/lang/Object;Ljava/util/Map;)Ljava/lang/Object;+271\r\nj  com.sun.jna.Library$Handler.invoke(Ljava/lang/Object;Ljava/lang/reflect/Method;[Ljava/lang/Object;)Ljava/lang/Object;+390\r\nj  jdk.proxy3.$Proxy10.TessBaseAPIGetUTF8Text(Lnet/sourceforge/tess4j/ITessAPI$TessBaseAPI;)Lcom/sun/jna/Pointer;+16 jdk.proxy3\r\nj  net.sourceforge.tess4j.Tesseract.getOCRText(Ljava/lang/String;I)Ljava/lang/String;+269\r\nj  net.sourceforge.tess4j.Tesseract.doOCR(Ljavax/imageio/IIOImage;Ljava/lang/String;Ljava/awt/Rectangle;I)Ljava/lang/String;+18\r\nj  net.sourceforge.tess4j.Tesseract.doOCR(Ljava/io/File;Ljava/awt/Rectangle;)Ljava/lang/String;+126\r\nj  net.sourceforge.tess4j.Tesseract.doOCR(Ljava/io/File;)Ljava/lang/String;+3\r\nj  mypackage.OCR.doOcr(Ljava/lang/String;Ljava/lang/String;Ljava/util/List;Ljava/util/Set;)Ljava/lang/String;+32\r\n```\r\nIn libDir are indeed ```libtesseract.so.4 -&gt; libtesseract.so.4.0.0``` and ```liblept.so -&gt; liblept.so.5.0.2```.\r\n\r\nSo what am I missing? Version mismatch somewhere?","title":"Tess4J on Ubuntu crashing JVM","body":"<p>I am new to Tess4J and to JNA, so apologies if this is obvious, but I have not been able to find in the blogs.\nI am on Ubuntu 18.04, running Java 17.0.1, Tomcat 10.0. I have built a simple dynamic web app, details below. I installed resources as such:</p>\n<pre><code>sudo apt install tesseract-ocr tesseract-ocr-rus libleptonica-dev\n</code></pre>\n<p>First I will mention that I am able to handle my test doc with no problems from the command line:</p>\n<pre><code>tesseract /tmp/output-0.jpg /tmp/file -l rus+eng\n</code></pre>\n<p>But when I try the same from Java the JVM crashes.</p>\n<p>The relevant Java inside my class OCR is as follows:</p>\n<pre><code>    private static final String tessDir = &quot;/usr/share/tesseract-ocr/4.00/&quot;;\n    private static final String libDir = &quot;/usr/lib/x86_64-linux-gnu&quot;;\n    private ITesseract ocr = new Tesseract();\n    \n    public OCR() {\n        System.setProperty(&quot;java.library.path&quot;, System.getProperty(&quot;java.library.path&quot;) + &quot;:&quot; + libDir);\n        ocr.setDatapath(tessDir);\n    }\n\n    public String doOcr (String inputDirName, String outputDirName, List&lt;File&gt; files, Set&lt;Lang&gt; langs) throws IOException {\n        File f1 = new File(&quot;/tmp/output-0.jpg&quot;);\n        String s = &quot;&quot;;\n        ocr.setLanguage(&quot;rus+eng&quot;);\n        try {\n            s = ocr.doOCR(f1);\n        } catch (Exception e) {\n            throw new RuntimeException(e.getMessage());\n        }\n        return s;\n    }\n</code></pre>\n<p>pom.xml:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;net.java.dev.jna&lt;/groupId&gt;\n        &lt;artifactId&gt;jna-platform&lt;/artifactId&gt;\n        &lt;version&gt;5.6.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.github.jai-imageio&lt;/groupId&gt;\n        &lt;artifactId&gt;jai-imageio-core&lt;/artifactId&gt;\n        &lt;version&gt;1.3.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;net.sourceforge.tess4j&lt;/groupId&gt;\n        &lt;artifactId&gt;tess4j&lt;/artifactId&gt;\n        &lt;version&gt;4.6.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;net.sourceforge.lept4j&lt;/groupId&gt;\n        &lt;artifactId&gt;lept4j&lt;/artifactId&gt;\n        &lt;version&gt;1.16.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.ghost4j&lt;/groupId&gt;\n        &lt;artifactId&gt;ghost4j&lt;/artifactId&gt;\n        &lt;version&gt;1.0.1&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>The crash log looks like this:</p>\n<pre><code># A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x00007f67aeed2c27, pid=23274, tid=23912\n#\n# JRE version: Java(TM) SE Runtime Environment (17.0.1+12) (build 17.0.1+12-LTS-39)\n# Java VM: Java HotSpot(TM) 64-Bit Server VM (17.0.1+12-LTS-39, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, parallel gc, linux-amd64)\n...\nNative frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)\nC  [libtesseract.so.4+0xa1c27]  tesseract::Tesseract::recog_all_words(PAGE_RES*, ETEXT_DESC*, TBOX const*, char const*, int)+0x437\n\nJava frames: (J=compiled Java code, j=interpreted, Vv=VM code)\nj  com.sun.jna.Native.invokePointer(Lcom/sun/jna/Function;JI[Ljava/lang/Object;)J+0\nj  com.sun.jna.Function.invokePointer(I[Ljava/lang/Object;)Lcom/sun/jna/Pointer;+7\nj  com.sun.jna.Function.invoke([Ljava/lang/Object;Ljava/lang/Class;ZI)Ljava/lang/Object;+385\nj  com.sun.jna.Function.invoke(Ljava/lang/reflect/Method;[Ljava/lang/Class;Ljava/lang/Class;[Ljava/lang/Object;Ljava/util/Map;)Ljava/lang/Object;+271\nj  com.sun.jna.Library$Handler.invoke(Ljava/lang/Object;Ljava/lang/reflect/Method;[Ljava/lang/Object;)Ljava/lang/Object;+390\nj  jdk.proxy3.$Proxy10.TessBaseAPIGetUTF8Text(Lnet/sourceforge/tess4j/ITessAPI$TessBaseAPI;)Lcom/sun/jna/Pointer;+16 jdk.proxy3\nj  net.sourceforge.tess4j.Tesseract.getOCRText(Ljava/lang/String;I)Ljava/lang/String;+269\nj  net.sourceforge.tess4j.Tesseract.doOCR(Ljavax/imageio/IIOImage;Ljava/lang/String;Ljava/awt/Rectangle;I)Ljava/lang/String;+18\nj  net.sourceforge.tess4j.Tesseract.doOCR(Ljava/io/File;Ljava/awt/Rectangle;)Ljava/lang/String;+126\nj  net.sourceforge.tess4j.Tesseract.doOCR(Ljava/io/File;)Ljava/lang/String;+3\nj  mypackage.OCR.doOcr(Ljava/lang/String;Ljava/lang/String;Ljava/util/List;Ljava/util/Set;)Ljava/lang/String;+32\n</code></pre>\n<p>In libDir are indeed <code>libtesseract.so.4 -&gt; libtesseract.so.4.0.0</code> and <code>liblept.so -&gt; liblept.so.5.0.2</code>.</p>\n<p>So what am I missing? Version mismatch somewhere?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":3,"creation_date":1606992817,"post_id":65124539,"comment_id":115134550,"body_markdown":"Is there a factorial epidemic going around? https://stackoverflow.com/questions/65089542/printing-with-delimiter-only-between-values?noredirect=1#comment115072370_65089542","body":"Is there a factorial epidemic going around? <a href=\"https://stackoverflow.com/questions/65089542/printing-with-delimiter-only-between-values?noredirect=1#comment115072370_65089542\" title=\"printing with delimiter only between values\">stackoverflow.com/questions/65089542/&hellip;</a>"},{"owner":{"account_id":4947846,"reputation":9433,"user_id":3982755,"accept_rate":79,"display_name":"Bentaye"},"score":1,"creation_date":1606993158,"post_id":65124539,"comment_id":115134679,"body_markdown":"not solving your problem but just pointing out that your loop `for (j =1; j &lt;=1 ; j++)` can be removed. it only loops once so, just write  `System.out.print(&quot;*&quot;);`. no loop required","body":"not solving your problem but just pointing out that your loop <code>for (j =1; j &lt;=1 ; j++)</code> can be removed. it only loops once so, just write  <code>System.out.print(&quot;*&quot;);</code>. no loop required"}],"answers":[{"tags":[],"owner":{"account_id":3854593,"reputation":2852,"user_id":3193876,"display_name":"Ronald"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1606993043,"creation_date":1606993043,"answer_id":65124614,"question_id":65124539,"body_markdown":"I always use a construct like\r\n\r\n```\r\nString sep=&quot;&quot;;\r\nfor (...) {\r\n   System.out.print(sep);\r\n   System.out.print(payload);\r\n   sep=&quot;x&quot;;\r\n}\r\n```","title":"Prevent trailing character when printing values in a loop","body":"<p>I always use a construct like</p>\n<pre><code>String sep=&quot;&quot;;\nfor (...) {\n   System.out.print(sep);\n   System.out.print(payload);\n   sep=&quot;x&quot;;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6104455,"reputation":4456,"user_id":4762502,"accept_rate":73,"display_name":"Gaurav Jeswani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1606993637,"creation_date":1606993044,"answer_id":65124615,"question_id":65124539,"body_markdown":"You need to make the printing of ***** condition. Don&#39;t print ***** if `i == fctr`. And you don&#39;t need that additional loop of `j`. As below :\r\n\r\n        public static void main(final String[] args) {\r\n        final Scanner input = new Scanner(System.in);\r\n        int fctr;\r\n        System.out.println(&quot;number&quot;);\r\n        fctr = input.nextInt();\r\n    \r\n        //    IntStream.range(1, fctr).\r\n    \r\n        long factorial = 1;\r\n        for (int i = 1; i &lt;= fctr; i++) {\r\n          factorial = factorial * i;\r\n          if (i == fctr) {\r\n            System.out.print(i);\r\n          } else {\r\n            System.out.print(i + &quot;*&quot;);\r\n          }\r\n        }\r\n    \r\n        System.out.print(&quot;=&quot; + factorial);\r\n      }","title":"Prevent trailing character when printing values in a loop","body":"<p>You need to make the printing of ***** condition. Don't print ***** if <code>i == fctr</code>. And you don't need that additional loop of <code>j</code>. As below :</p>\n<pre><code>    public static void main(final String[] args) {\n    final Scanner input = new Scanner(System.in);\n    int fctr;\n    System.out.println(&quot;number&quot;);\n    fctr = input.nextInt();\n\n    //    IntStream.range(1, fctr).\n\n    long factorial = 1;\n    for (int i = 1; i &lt;= fctr; i++) {\n      factorial = factorial * i;\n      if (i == fctr) {\n        System.out.print(i);\n      } else {\n        System.out.print(i + &quot;*&quot;);\n      }\n    }\n\n    System.out.print(&quot;=&quot; + factorial);\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7227100,"reputation":2697,"user_id":5515287,"display_name":"Mustafa Poya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640086178,"creation_date":1606993084,"answer_id":65124623,"question_id":65124539,"body_markdown":"Try to add a condition if it’s not at the end of the loop. Then add start and if it’s the end, then just print the number:\r\n\r\n```\r\npublic static void main(String[] args) {\r\n    Scanner input = new Scanner(System.in);\r\n    int fctr;\r\n    System.out.println(&quot;number&quot;);\r\n    fctr = input.nextInt();\r\n\r\n    for (int i = 1; i &lt;= fctr; i++) {\r\n        if (i &lt; fctr) {\r\n            System.out.print(i + &quot; * &quot;);\r\n        } else {\r\n            System.out.print(i);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n","title":"Prevent trailing character when printing values in a loop","body":"<p>Try to add a condition if it’s not at the end of the loop. Then add start and if it’s the end, then just print the number:</p>\n<pre><code>public static void main(String[] args) {\n    Scanner input = new Scanner(System.in);\n    int fctr;\n    System.out.println(&quot;number&quot;);\n    fctr = input.nextInt();\n\n    for (int i = 1; i &lt;= fctr; i++) {\n        if (i &lt; fctr) {\n            System.out.print(i + &quot; * &quot;);\n        } else {\n            System.out.print(i);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4947846,"reputation":9433,"user_id":3982755,"accept_rate":79,"display_name":"Bentaye"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1606993608,"creation_date":1606993608,"answer_id":65124784,"question_id":65124539,"body_markdown":"Your loop for `(j =1; j &lt;=1 ; j++)` can be removed. It only loops once so, just write `System.out.print(&quot;*&quot;)`. No loop required \r\n\r\nThen if you think about it, you want to print the number and the `*` all the time, except when it is the last number (`fctr`)\r\n\r\nSo write it that way: \r\n\r\n```\r\nScanner input = new Scanner (System.in);\r\nint fctr;\r\nSystem.out.println (&quot;number&quot;);\r\nfctr = input.nextInt();\r\n\r\nfor (int i = 1; i &lt;=fctr; i++){\r\n    System.out.print(i);\r\n\r\n    if(i&lt;fctr) {\r\n        System.out.print(&quot;*&quot;);\r\n    }\r\n}\r\n```","title":"Prevent trailing character when printing values in a loop","body":"<p>Your loop for <code>(j =1; j &lt;=1 ; j++)</code> can be removed. It only loops once so, just write <code>System.out.print(&quot;*&quot;)</code>. No loop required</p>\n<p>Then if you think about it, you want to print the number and the <code>*</code> all the time, except when it is the last number (<code>fctr</code>)</p>\n<p>So write it that way:</p>\n<pre><code>Scanner input = new Scanner (System.in);\nint fctr;\nSystem.out.println (&quot;number&quot;);\nfctr = input.nextInt();\n\nfor (int i = 1; i &lt;=fctr; i++){\n    System.out.print(i);\n\n    if(i&lt;fctr) {\n        System.out.print(&quot;*&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20121108,"reputation":15,"user_id":14755592,"display_name":"Jessie Kelso"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":120,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1607160097,"accepted_answer_id":65124623,"answer_count":4,"score":-1,"last_activity_date":1640086178,"creation_date":1606992723,"question_id":65124539,"body_markdown":"I was tasked to do a looping problem for Java, but I&#39;m currently having a problem on how to display a factorial of a number. For example, 1x2x3x4x5 = 120. \r\n\r\nI&#39;m almost there, but I can&#39;t seem to figure out how to, or is there any possible way to display the factorial of a number because there is always an additional &quot;x&quot; at the end of the 5.\r\n\r\nHere is my code:\r\n\r\n    import java.util.*;\r\n    public class trylangpo2 {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t    Scanner input = new Scanner (System.in);\r\n    \t    int fctr;\r\n    \t    System.out.println (&quot;number&quot;);\r\n    \t    fctr = input.nextInt();\r\n    \t\r\n            for (int i = 1; i &lt;=fctr; i++){\r\n    \t        System.out.print(i);\r\n    \t\r\n    \t        int j;\r\n    \t        for (j =1; j &lt;=1 ; j++){\r\n    \t            System.out.print(&quot;*&quot;);\r\n    \t        }\r\n            }\r\n        }\t\r\n    }\r\n    \r\n    \r\nExample output:\r\n\r\n    1x2x3x4x5x\r\n\r\n\r\n","title":"Prevent trailing character when printing values in a loop","body":"<p>I was tasked to do a looping problem for Java, but I'm currently having a problem on how to display a factorial of a number. For example, 1x2x3x4x5 = 120.</p>\n<p>I'm almost there, but I can't seem to figure out how to, or is there any possible way to display the factorial of a number because there is always an additional &quot;x&quot; at the end of the 5.</p>\n<p>Here is my code:</p>\n<pre><code>import java.util.*;\npublic class trylangpo2 {\n\n    public static void main(String[] args) {\n        Scanner input = new Scanner (System.in);\n        int fctr;\n        System.out.println (&quot;number&quot;);\n        fctr = input.nextInt();\n    \n        for (int i = 1; i &lt;=fctr; i++){\n            System.out.print(i);\n    \n            int j;\n            for (j =1; j &lt;=1 ; j++){\n                System.out.print(&quot;*&quot;);\n            }\n        }\n    }   \n}\n</code></pre>\n<p>Example output:</p>\n<pre><code>1x2x3x4x5x\n</code></pre>\n"},{"tags":["java","intellij-idea","groovy","imagej"],"answers":[{"tags":[],"owner":{"account_id":70694,"reputation":10812,"user_id":204769,"accept_rate":92,"display_name":"rdmueller"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1535227344,"creation_date":1535227344,"answer_id":52020823,"question_id":52020675,"body_markdown":"I&#39;ve never used ImageJ, but I guess your question is independent of ImageJ :-)\r\n\r\nI you use ImageJ from java, you will have a class with a main method. Just right-click on the class and then &quot;run&quot; on the menu which appeared.\r\n\r\nAfter your program has finished, there is a &quot;run&quot;-icon in the upper left corner of the small window which appeared.\r\n\r\nI guess that&#39;s already close to running a script.\r\n\r\nGroovy would be a better starting point for scripting (since it is partly a scripting language). You can code Groovy with the IntelliJ community edition, but for full support you need the ultimate edition. So I guess the groovy console is only available in the ultimate edition...\r\n\r\nAll other options I am aware of will not give you the auto-completion and only a poor-man&#39;s debugger (println)\r\n\r\nHope that helps","title":"Run ImageJ scripts in IntelliJ","body":"<p>I've never used ImageJ, but I guess your question is independent of ImageJ :-)</p>\n\n<p>I you use ImageJ from java, you will have a class with a main method. Just right-click on the class and then \"run\" on the menu which appeared.</p>\n\n<p>After your program has finished, there is a \"run\"-icon in the upper left corner of the small window which appeared.</p>\n\n<p>I guess that's already close to running a script.</p>\n\n<p>Groovy would be a better starting point for scripting (since it is partly a scripting language). You can code Groovy with the IntelliJ community edition, but for full support you need the ultimate edition. So I guess the groovy console is only available in the ultimate edition...</p>\n\n<p>All other options I am aware of will not give you the auto-completion and only a poor-man's debugger (println)</p>\n\n<p>Hope that helps</p>\n"},{"tags":[],"owner":{"account_id":2165930,"reputation":4035,"user_id":1919049,"display_name":"Jan Eglinger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1535453570,"creation_date":1535453570,"answer_id":52056115,"question_id":52020675,"body_markdown":"You might want to have a look at this GitHub project:\r\n\r\nhttps://github.com/haesleinhuepf/run_jython_scripts_from_ide\r\n\r\nIt explains the steps required to run a script from within the IDE by starting up and using ImageJ. The tutorial focuses on Jython, but is applicable to all [supported scripting languages][1].\r\n\r\n---\r\n\r\nIn general, questions about ImageJ usage and script development are best asked on the [Image.sc forum][2] instead of here on StackOverflow.\r\n\r\n\r\n  [1]: https://imagej.net/Scripting#Supported_languages\r\n  [2]: https://forum.image.sc/\r\n","title":"Run ImageJ scripts in IntelliJ","body":"<p>You might want to have a look at this GitHub project:</p>\n\n<p><a href=\"https://github.com/haesleinhuepf/run_jython_scripts_from_ide\" rel=\"nofollow noreferrer\">https://github.com/haesleinhuepf/run_jython_scripts_from_ide</a></p>\n\n<p>It explains the steps required to run a script from within the IDE by starting up and using ImageJ. The tutorial focuses on Jython, but is applicable to all <a href=\"https://imagej.net/Scripting#Supported_languages\" rel=\"nofollow noreferrer\">supported scripting languages</a>.</p>\n\n<hr>\n\n<p>In general, questions about ImageJ usage and script development are best asked on the <a href=\"https://forum.image.sc/\" rel=\"nofollow noreferrer\">Image.sc forum</a> instead of here on StackOverflow.</p>\n"},{"tags":[],"owner":{"account_id":10662794,"reputation":1835,"user_id":7850283,"accept_rate":83,"display_name":"Gelliant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640085975,"creation_date":1640084268,"answer_id":70434344,"question_id":52020675,"body_markdown":"I don&#39;t know if people still struggle with this, it is now 3.5 years later, but if you start a script with this:\r\n```\r\n//@ ImagePlus myImp\r\nimport ij.ImagePlus\r\nImagePlus myImp = myImp\r\n```\r\nYou can use both the autocomplete of IntelliJ and the SciJava script parameters. I keep the same script file open in both ImageJ and IntelliJ. After a change in IntelliJ, I go to the script editor to run it. It automatically detects something has changed and will ask to update. \r\n\r\nThis is a bit of a hassle, but I haven&#39;t found how to get IntelliJ to execute the script in a running instance of ImageJ. ","title":"Run ImageJ scripts in IntelliJ","body":"<p>I don't know if people still struggle with this, it is now 3.5 years later, but if you start a script with this:</p>\n<pre><code>//@ ImagePlus myImp\nimport ij.ImagePlus\nImagePlus myImp = myImp\n</code></pre>\n<p>You can use both the autocomplete of IntelliJ and the SciJava script parameters. I keep the same script file open in both ImageJ and IntelliJ. After a change in IntelliJ, I go to the script editor to run it. It automatically detects something has changed and will ask to update.</p>\n<p>This is a bit of a hassle, but I haven't found how to get IntelliJ to execute the script in a running instance of ImageJ.</p>\n"}],"owner":{"account_id":5971332,"reputation":368,"user_id":4693577,"accept_rate":80,"display_name":"Santi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":521,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1640085975,"creation_date":1535225937,"question_id":52020675,"body_markdown":"I am an average ImageJ user who learnt to write IJ.macro and Groovy by trial and error. I did this mainly using the plain a simple script editor within ImageJ. I recently came up with IntelliJ, an amazing IDE with auto-completion and debugger. With the help of google, I was able to include the ImageJ jars, and pluggings accessible as external libraries/modules so that I can use the mentioned functionalities [by adding the path in File&gt;Project Structure&gt;Libraries&gt;&quot;+&quot;&gt;Java&gt;... here I selected the folders with the Jars and plugins of ImageJ].\r\n \r\nI am, therefore, optimistic that I could achieve the last step. Rather than writing the code in IntelliJ and run with the ImageJ script tool, I was wondering if it could be possible to run a script (say with Groovy or Jython) directly from IntelliJ. Somethin like calling ImageJ when I click run. Maybe changing the Java Run Environment, or using it as VM.\r\n\r\nBefore finishing, sorry if I am saying something really odd or non-sense. I am an average Joe learning by trying.\r\n\r\nKind regards,","title":"Run ImageJ scripts in IntelliJ","body":"<p>I am an average ImageJ user who learnt to write IJ.macro and Groovy by trial and error. I did this mainly using the plain a simple script editor within ImageJ. I recently came up with IntelliJ, an amazing IDE with auto-completion and debugger. With the help of google, I was able to include the ImageJ jars, and pluggings accessible as external libraries/modules so that I can use the mentioned functionalities [by adding the path in File>Project Structure>Libraries>\"+\">Java>... here I selected the folders with the Jars and plugins of ImageJ].</p>\n\n<p>I am, therefore, optimistic that I could achieve the last step. Rather than writing the code in IntelliJ and run with the ImageJ script tool, I was wondering if it could be possible to run a script (say with Groovy or Jython) directly from IntelliJ. Somethin like calling ImageJ when I click run. Maybe changing the Java Run Environment, or using it as VM.</p>\n\n<p>Before finishing, sorry if I am saying something really odd or non-sense. I am an average Joe learning by trying.</p>\n\n<p>Kind regards,</p>\n"},{"tags":["java","junit","junit5"],"comments":[{"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"score":0,"creation_date":1640084825,"post_id":70434389,"comment_id":124506372,"body_markdown":"Here&#39;s how: https://junit.org/junit5/docs/current/user-guide/#extensions-registration-automatic","body":"Here&#39;s how: <a href=\"https://junit.org/junit5/docs/current/user-guide/#extensions-registration-automatic\" rel=\"nofollow noreferrer\">junit.org/junit5/docs/current/user-guide/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":7560620,"reputation":631,"user_id":5738367,"display_name":"Janekx"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1640085481,"creation_date":1640084729,"answer_id":70434437,"question_id":70434389,"body_markdown":"Update: for JUnit 5, you can use @ExtendWith annotation instead of Rules. For example, you can use the [TimingExtension][1] showed in the examples of JUnit5.\r\n\r\nA full example (partially taken from [the previously mentioned example][1]):\r\n\r\n```java\r\nimport org.junit.jupiter.api.Test;\r\nimport org.junit.jupiter.api.extension.AfterTestExecutionCallback;\r\nimport org.junit.jupiter.api.extension.BeforeTestExecutionCallback;\r\nimport org.junit.jupiter.api.extension.ExtendWith;\r\nimport org.junit.jupiter.api.extension.ExtensionContext;\r\n\r\nimport java.lang.reflect.Method;\r\nimport java.util.logging.Logger;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\n\r\nclass TimingExtension implements BeforeTestExecutionCallback, AfterTestExecutionCallback {\r\n\r\n    private static final Logger logger = Logger.getLogger(TimingExtension.class.getName());\r\n\r\n    private static final String START_TIME = &quot;start time&quot;;\r\n\r\n    @Override\r\n    public void beforeTestExecution(ExtensionContext context) throws Exception {\r\n        getStore(context).put(START_TIME, System.currentTimeMillis());\r\n    }\r\n\r\n    @Override\r\n    public void afterTestExecution(ExtensionContext context) throws Exception {\r\n        Method testMethod = context.getRequiredTestMethod();\r\n        long startTime = getStore(context).remove(START_TIME, long.class);\r\n        long duration = System.currentTimeMillis() - startTime;\r\n\r\n        logger.info(() -&gt;\r\n                String.format(&quot;Method [%s] took %s ms.&quot;, testMethod.getName(), duration));\r\n    }\r\n\r\n    private ExtensionContext.Store getStore(ExtensionContext context) {\r\n        return context.getStore(ExtensionContext.Namespace.create(getClass(), context.getRequiredTestMethod()));\r\n    }\r\n\r\n}\r\n\r\n@ExtendWith(TimingExtension.class)\r\nclass MyFirstJUnitJupiterTests {\r\n\r\n\r\n    @Test\r\n    void addition() {\r\n        assertEquals(2, 1 + 1);\r\n    }\r\n\r\n}\r\n```\r\n\r\nIn this case, the output will be something like this:\r\n\r\n```\r\ndec. 21, 2021 12:19:31 DU. TimingExtension afterTestExecution\r\nINFO: Method [addition] took 6 ms.\r\n\r\nProcess finished with exit code 0\r\n```\r\n\r\n\r\nOld answer: \r\nIn JUnit 4, for that purpose, you can use TestWatchers, Stopwatch with Rules. Here is some examples:\r\n\r\n - (1) is for timeout\r\n - (2) do something when the test passes or fails\r\n - (3) calculate execution time\r\n\r\n```java\r\nimport org.junit.Rule;\r\nimport org.junit.rules.TestWatcher;\r\nimport org.junit.rules.Timeout;\r\nimport org.junit.runner.Description;\r\n\r\nclass TestBase {\r\n    @Rule\r\n    public Timeout globalTimeout = Timeout.seconds(3);\r\n\r\n    @Rule\r\n    public TestWatcher watchman = new TestWatcher() {\r\n\r\n        @Override\r\n        protected void failed(Throwable e, Description description) {\r\n            TestDescription td = description.getAnnotation(TestDescription.class);\r\n            System.out.println(&quot;Failed: &quot; + td.desc()[0]);\r\n\r\n        }\r\n\r\n    @Override\r\n        protected void succeeded(Description description) {\r\n            \r\n        }\r\n\r\n\r\n     @Rule\r\n     public Stopwatch stopwatch = new Stopwatch() {\r\n         @Override\r\n         protected void succeeded(long nanos, Description description) {\r\n             \r\n         }\r\n\r\n         @Override\r\n         protected void failed(long nanos, Throwable e, Description description) {\r\n             \r\n         }\r\n\r\n     };\r\n}\r\n```\r\n\r\n\r\n  [1]: https://github.com/junit-team/junit5/blob/main/documentation/src/test/java/example/timing/TimingExtension.java","title":"How to wrap all junit tests?","body":"<p>Update: for JUnit 5, you can use @ExtendWith annotation instead of Rules. For example, you can use the <a href=\"https://github.com/junit-team/junit5/blob/main/documentation/src/test/java/example/timing/TimingExtension.java\" rel=\"nofollow noreferrer\">TimingExtension</a> showed in the examples of JUnit5.</p>\n<p>A full example (partially taken from <a href=\"https://github.com/junit-team/junit5/blob/main/documentation/src/test/java/example/timing/TimingExtension.java\" rel=\"nofollow noreferrer\">the previously mentioned example</a>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.AfterTestExecutionCallback;\nimport org.junit.jupiter.api.extension.BeforeTestExecutionCallback;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.junit.jupiter.api.extension.ExtensionContext;\n\nimport java.lang.reflect.Method;\nimport java.util.logging.Logger;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\n\nclass TimingExtension implements BeforeTestExecutionCallback, AfterTestExecutionCallback {\n\n    private static final Logger logger = Logger.getLogger(TimingExtension.class.getName());\n\n    private static final String START_TIME = &quot;start time&quot;;\n\n    @Override\n    public void beforeTestExecution(ExtensionContext context) throws Exception {\n        getStore(context).put(START_TIME, System.currentTimeMillis());\n    }\n\n    @Override\n    public void afterTestExecution(ExtensionContext context) throws Exception {\n        Method testMethod = context.getRequiredTestMethod();\n        long startTime = getStore(context).remove(START_TIME, long.class);\n        long duration = System.currentTimeMillis() - startTime;\n\n        logger.info(() -&gt;\n                String.format(&quot;Method [%s] took %s ms.&quot;, testMethod.getName(), duration));\n    }\n\n    private ExtensionContext.Store getStore(ExtensionContext context) {\n        return context.getStore(ExtensionContext.Namespace.create(getClass(), context.getRequiredTestMethod()));\n    }\n\n}\n\n@ExtendWith(TimingExtension.class)\nclass MyFirstJUnitJupiterTests {\n\n\n    @Test\n    void addition() {\n        assertEquals(2, 1 + 1);\n    }\n\n}\n</code></pre>\n<p>In this case, the output will be something like this:</p>\n<pre><code>dec. 21, 2021 12:19:31 DU. TimingExtension afterTestExecution\nINFO: Method [addition] took 6 ms.\n\nProcess finished with exit code 0\n</code></pre>\n<p>Old answer:\nIn JUnit 4, for that purpose, you can use TestWatchers, Stopwatch with Rules. Here is some examples:</p>\n<ul>\n<li>(1) is for timeout</li>\n<li>(2) do something when the test passes or fails</li>\n<li>(3) calculate execution time</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>import org.junit.Rule;\nimport org.junit.rules.TestWatcher;\nimport org.junit.rules.Timeout;\nimport org.junit.runner.Description;\n\nclass TestBase {\n    @Rule\n    public Timeout globalTimeout = Timeout.seconds(3);\n\n    @Rule\n    public TestWatcher watchman = new TestWatcher() {\n\n        @Override\n        protected void failed(Throwable e, Description description) {\n            TestDescription td = description.getAnnotation(TestDescription.class);\n            System.out.println(&quot;Failed: &quot; + td.desc()[0]);\n\n        }\n\n    @Override\n        protected void succeeded(Description description) {\n            \n        }\n\n\n     @Rule\n     public Stopwatch stopwatch = new Stopwatch() {\n         @Override\n         protected void succeeded(long nanos, Description description) {\n             \n         }\n\n         @Override\n         protected void failed(long nanos, Throwable e, Description description) {\n             \n         }\n\n     };\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640084782,"creation_date":1640084782,"answer_id":70434452,"question_id":70434389,"body_markdown":"Probably `InvocationInterceptor` it the answer:\r\n\r\n    public class TestDurationReportExtension implements InvocationInterceptor {\r\n        @Override\r\n        public void interceptTestMethod(Invocation&lt;Void&gt; invocation,\r\n                ReflectiveInvocationContext&lt;Method&gt; invocationContext,\r\n                ExtensionContext extensionContext) throws Throwable {\r\n     \r\n            long beforeTest = System.currentTimeMillis();\r\n            try {\r\n                invocation.proceed();\r\n            } finally {\r\n                long afterTest = System.currentTimeMillis();\r\n                long duration = afterTest - beforeTest;\r\n                 \r\n                String testClassName = invocationContext.getTargetClass().getSimpleName();\r\n                String testMethodName = invocationContext.getExecutable().getName();\r\n                System.out.println(String.format(&quot;%s.%s: %dms&quot;, testClassName, testMethodName, duration));\r\n            }\r\n        }\r\n    }\r\n\r\nUse with:\r\n\r\n    @ExtendWith(TestDurationReportExtension.class)\r\n    public class DemoTest { .. }\r\n\r\nIdea from: https://www.mscharhag.com/java/junit5-custom-extensions","title":"How to wrap all junit tests?","body":"<p>Probably <code>InvocationInterceptor</code> it the answer:</p>\n<pre><code>public class TestDurationReportExtension implements InvocationInterceptor {\n    @Override\n    public void interceptTestMethod(Invocation&lt;Void&gt; invocation,\n            ReflectiveInvocationContext&lt;Method&gt; invocationContext,\n            ExtensionContext extensionContext) throws Throwable {\n \n        long beforeTest = System.currentTimeMillis();\n        try {\n            invocation.proceed();\n        } finally {\n            long afterTest = System.currentTimeMillis();\n            long duration = afterTest - beforeTest;\n             \n            String testClassName = invocationContext.getTargetClass().getSimpleName();\n            String testMethodName = invocationContext.getExecutable().getName();\n            System.out.println(String.format(&quot;%s.%s: %dms&quot;, testClassName, testMethodName, duration));\n        }\n    }\n}\n</code></pre>\n<p>Use with:</p>\n<pre><code>@ExtendWith(TestDurationReportExtension.class)\npublic class DemoTest { .. }\n</code></pre>\n<p>Idea from: <a href=\"https://www.mscharhag.com/java/junit5-custom-extensions\" rel=\"nofollow noreferrer\">https://www.mscharhag.com/java/junit5-custom-extensions</a></p>\n"}],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":528,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1640085481,"creation_date":1640084449,"question_id":70434389,"body_markdown":"How can I create a `junit5` extension/rule/interceptor that automatically wraps each `@Test` method.\r\n\r\nExample: imagine measuring execution time:\r\n\r\n    class TimeExension {\r\n        runTest() {\r\n             StopWatch w = new StopWatch();\r\n             w.start();\r\n    \r\n             //actually run the original test\r\n             test.run();\r\n     \r\n             w.stop();\r\n        }\r\n    }\r\n\r\nHow could this be applied to any test class?","title":"How to wrap all junit tests?","body":"<p>How can I create a <code>junit5</code> extension/rule/interceptor that automatically wraps each <code>@Test</code> method.</p>\n<p>Example: imagine measuring execution time:</p>\n<pre><code>class TimeExension {\n    runTest() {\n         StopWatch w = new StopWatch();\n         w.start();\n\n         //actually run the original test\n         test.run();\n \n         w.stop();\n    }\n}\n</code></pre>\n<p>How could this be applied to any test class?</p>\n"},{"tags":["java","try-catch","threadpoolexecutor","java-threads","interrupted-exception"],"answers":[{"tags":[],"owner":{"account_id":23665009,"reputation":88,"user_id":17692595,"display_name":"Roggi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640084798,"creation_date":1640084798,"answer_id":70434455,"question_id":70433737,"body_markdown":"From Oracle docs for `shutdownNow`: \r\n\r\n&gt; There are no guarantees beyond best-effort attempts to stop processing actively executing tasks. For example, typical implementations will cancel via Thread.interrupt(), so any task that fails to respond to interrupts may never terminate.\r\n\r\nIf you take a look into `ThreadPoolExecutor` sources, you will find out that `shutdownNow` interrupts threads with this code:\r\n\r\n```\r\n        void interruptIfStarted() {\r\n            Thread t;\r\n            if (getState() &gt;= 0 &amp;&amp; (t = thread) != null &amp;&amp; !t.isInterrupted()) {\r\n                try {\r\n                    t.interrupt();\r\n                } catch (SecurityException ignore) {\r\n                }\r\n            }\r\n        }\r\n``` \r\n\r\nYour `ClientConnection` doesn&#39;t check the flag `Thread.interrupted`. Due to information in the post, I can&#39;t figure out which method throws `InterruptedException`. Probably, some other method, for example, `readLine` of reader or writer, blocks the thread, because they use socket&#39;s `InputStream` and `OutputStream` and because it&#39;s obvious that socket&#39;s streams block the thread if data is not immediatly available.\r\n\r\nFor example, I wrote this code to test it:\r\n\r\n```\r\nclass Example {\r\n    public static void main(String[] args) {\r\n        Thread thread = new Thread(() -&gt; {\r\n            try(ServerSocket serverSocket = new ServerSocket()) {\r\n                serverSocket.bind(new InetSocketAddress(8080));\r\n                Socket socket = serverSocket.accept();\r\n                int dataByte = socket.getInputStream().read();\r\n                System.out.println(dataByte);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        });\r\n        thread.start();\r\n        thread.interrupt();\r\n    }\r\n}\r\n```\r\n\r\nOn OpenJdk-16.0.2 there is no actual interruption. \r\n\r\nI see two possible solutions for your problem:\r\n\r\n1. Check `Thread.interrupted` inside the `while` loop if you are sure that `Socket` doesn&#39;t block your thread.\r\n\r\n2. If your are not sure, use `SocketChannel` in non-blocking mode instead of `Socket` for checking `Thread.interrupted` manually.\r\n\r\nFor the second way I tranformed my example into this:\r\n\r\n```\r\nclass Example {\r\n    public static void main(String[] args) {\r\n        Thread thread = new Thread(() -&gt; {\r\n            try(ServerSocketChannel serverSocket = ServerSocketChannel.open()) {\r\n                serverSocket.configureBlocking(false);\r\n                serverSocket.bind(new InetSocketAddress(8080));\r\n\r\n                SocketChannel socket = null;\r\n\r\n                while (socket == null) {\r\n                    socket = serverSocket.accept();\r\n\r\n                    if (Thread.interrupted()) {\r\n                        throw new InterruptedException();\r\n                    }\r\n                }\r\n\r\n                ByteBuffer byteBuffer = ByteBuffer.allocate(1024);\r\n                socket.read(byteBuffer);\r\n                byte[] bytes = new byte[byteBuffer.limit()];\r\n                byteBuffer.flip();\r\n                byteBuffer.get(bytes);\r\n                System.out.println(new String(bytes, StandardCharsets.UTF_8));\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            } catch (InterruptedException e) {\r\n                System.out.println(&quot;Interrupted successfully&quot;);\r\n            }\r\n        });\r\n        thread.start();\r\n        thread.interrupt();\r\n    }\r\n}\r\n```\r\n\r\nIt works.\r\n\r\nGood luck with Java :)","title":"ThreadPoolExecutor.shutdownNow() not throwing InterruptedException in Thread","body":"<p>From Oracle docs for <code>shutdownNow</code>:</p>\n<blockquote>\n<p>There are no guarantees beyond best-effort attempts to stop processing actively executing tasks. For example, typical implementations will cancel via Thread.interrupt(), so any task that fails to respond to interrupts may never terminate.</p>\n</blockquote>\n<p>If you take a look into <code>ThreadPoolExecutor</code> sources, you will find out that <code>shutdownNow</code> interrupts threads with this code:</p>\n<pre><code>        void interruptIfStarted() {\n            Thread t;\n            if (getState() &gt;= 0 &amp;&amp; (t = thread) != null &amp;&amp; !t.isInterrupted()) {\n                try {\n                    t.interrupt();\n                } catch (SecurityException ignore) {\n                }\n            }\n        }\n</code></pre>\n<p>Your <code>ClientConnection</code> doesn't check the flag <code>Thread.interrupted</code>. Due to information in the post, I can't figure out which method throws <code>InterruptedException</code>. Probably, some other method, for example, <code>readLine</code> of reader or writer, blocks the thread, because they use socket's <code>InputStream</code> and <code>OutputStream</code> and because it's obvious that socket's streams block the thread if data is not immediatly available.</p>\n<p>For example, I wrote this code to test it:</p>\n<pre><code>class Example {\n    public static void main(String[] args) {\n        Thread thread = new Thread(() -&gt; {\n            try(ServerSocket serverSocket = new ServerSocket()) {\n                serverSocket.bind(new InetSocketAddress(8080));\n                Socket socket = serverSocket.accept();\n                int dataByte = socket.getInputStream().read();\n                System.out.println(dataByte);\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        });\n        thread.start();\n        thread.interrupt();\n    }\n}\n</code></pre>\n<p>On OpenJdk-16.0.2 there is no actual interruption.</p>\n<p>I see two possible solutions for your problem:</p>\n<ol>\n<li><p>Check <code>Thread.interrupted</code> inside the <code>while</code> loop if you are sure that <code>Socket</code> doesn't block your thread.</p>\n</li>\n<li><p>If your are not sure, use <code>SocketChannel</code> in non-blocking mode instead of <code>Socket</code> for checking <code>Thread.interrupted</code> manually.</p>\n</li>\n</ol>\n<p>For the second way I tranformed my example into this:</p>\n<pre><code>class Example {\n    public static void main(String[] args) {\n        Thread thread = new Thread(() -&gt; {\n            try(ServerSocketChannel serverSocket = ServerSocketChannel.open()) {\n                serverSocket.configureBlocking(false);\n                serverSocket.bind(new InetSocketAddress(8080));\n\n                SocketChannel socket = null;\n\n                while (socket == null) {\n                    socket = serverSocket.accept();\n\n                    if (Thread.interrupted()) {\n                        throw new InterruptedException();\n                    }\n                }\n\n                ByteBuffer byteBuffer = ByteBuffer.allocate(1024);\n                socket.read(byteBuffer);\n                byte[] bytes = new byte[byteBuffer.limit()];\n                byteBuffer.flip();\n                byteBuffer.get(bytes);\n                System.out.println(new String(bytes, StandardCharsets.UTF_8));\n            } catch (IOException e) {\n                e.printStackTrace();\n            } catch (InterruptedException e) {\n                System.out.println(&quot;Interrupted successfully&quot;);\n            }\n        });\n        thread.start();\n        thread.interrupt();\n    }\n}\n</code></pre>\n<p>It works.</p>\n<p>Good luck with Java :)</p>\n"},{"tags":[],"owner":{"account_id":13429972,"reputation":1807,"user_id":9690075,"display_name":"zysaaa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640085298,"creation_date":1640085298,"answer_id":70434558,"question_id":70433737,"body_markdown":"&gt; I would have expected that as soon as shutdownNow(); is being called, an InterruptedException would be thrown within my ClientConnection.run()\r\n\r\nYour ```messagesQueue``` should be a ```BlockingQueue```. So ```messagesQueue.put(message)``` will make you need to catch an ```Interrupted``` exception. So only when the thread is blocked in the ```put``` method(```queue``` is full), you call ```threadpool#shutdownNow```, then the thread will receive an ```Interrupted``` exception. In other cases, thread will not receive this ```Interrupted``` exception.\r\n\r\n\r\nYou can change ```while ((request = reader.readLine()) != null) ``` to ```while ((request = reader.readLine()) != null &amp;&amp; !Thread.interrupted())```.\r\n\r\nAnother solution is to maintain all client sockets, and close all client sockets when you need to close them,  this way, the client thread will directly receive an ```IOException```:\r\n\r\n```\r\n        List&lt;Socket&gt; clientSockets = new ArrayList&lt;&gt;();\r\n        while (true) {\r\n            try {\r\n                Socket accept = serverSocket.accept();\r\n                clientSockets.add(accept);\r\n                executorService.submit(new ClientConnection(accept));\r\n            }catch (Exception e) {\r\n                for (Socket socket : clientSockets) {\r\n                    try {\r\n                        socket.close();\r\n                    } catch (Exception exception) {\r\n                        //\r\n                    }\r\n                }\r\n                //executorService.shutdownNow();\r\n            }\r\n        }\r\n```\r\n\r\n","title":"ThreadPoolExecutor.shutdownNow() not throwing InterruptedException in Thread","body":"<blockquote>\n<p>I would have expected that as soon as shutdownNow(); is being called, an InterruptedException would be thrown within my ClientConnection.run()</p>\n</blockquote>\n<p>Your <code>messagesQueue</code> should be a <code>BlockingQueue</code>. So <code>messagesQueue.put(message)</code> will make you need to catch an <code>Interrupted</code> exception. So only when the thread is blocked in the <code>put</code> method(<code>queue</code> is full), you call <code>threadpool#shutdownNow</code>, then the thread will receive an <code>Interrupted</code> exception. In other cases, thread will not receive this <code>Interrupted</code> exception.</p>\n<p>You can change <code>while ((request = reader.readLine()) != null) </code> to <code>while ((request = reader.readLine()) != null &amp;&amp; !Thread.interrupted())</code>.</p>\n<p>Another solution is to maintain all client sockets, and close all client sockets when you need to close them,  this way, the client thread will directly receive an <code>IOException</code>:</p>\n<pre><code>        List&lt;Socket&gt; clientSockets = new ArrayList&lt;&gt;();\n        while (true) {\n            try {\n                Socket accept = serverSocket.accept();\n                clientSockets.add(accept);\n                executorService.submit(new ClientConnection(accept));\n            }catch (Exception e) {\n                for (Socket socket : clientSockets) {\n                    try {\n                        socket.close();\n                    } catch (Exception exception) {\n                        //\n                    }\n                }\n                //executorService.shutdownNow();\n            }\n        }\n</code></pre>\n"}],"owner":{"account_id":11363645,"reputation":2645,"user_id":8331157,"display_name":"BenjyTec"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":499,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":70434455,"answer_count":2,"score":3,"last_activity_date":1640085298,"creation_date":1640081449,"question_id":70433737,"body_markdown":"I am implementing a Transfer Server program which takes messages from clients (via console input) and then forwards it to some sort of mailbox.\r\n\r\nTo allow concurrent reception of several messages by different clients, I first created a class that implements the `Runnable` interface. Each of this class instances will handle the communication with exactly one client:\r\n\r\n    public class ClientConnection implements Runnable {\r\n    \r\n        //...\r\n    \r\n        //...\r\n    \r\n        @Override\r\n        public void run() {\r\n            try {\r\n                // prepare the input reader and output writer\r\n                BufferedReader reader = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\r\n                PrintWriter writer = new PrintWriter(clientSocket.getOutputStream(), true);\r\n    \r\n                Message message = new Message();\r\n                String request = &quot;&quot;;\r\n\r\n                // read client requests\r\n                while ((request = reader.readLine()) != null) {\r\n    \r\n                    System.out.println(&quot;Client sent the following request: &quot; + request);\r\n                    String response;\r\n                    if (request.trim().equals(&quot;quit&quot;)) {\r\n                        writer.println(&quot;ok bye&quot;);\r\n                        return;\r\n                    }\r\n    \r\n                    response = message.parseRequest(request);\r\n                    if (message.isCompleted()) {\r\n                        messagesQueue.put(message);\r\n                        message = new Message();\r\n                    }\r\n                    writer.println(response);\r\n                }\r\n    \r\n            } catch (SocketException e) {\r\n                System.out.println(&quot;ClientConnection: SocketException while handling socket: &quot; + e.getMessage());\r\n            } catch (IOException e) {\r\n                throw new UncheckedIOException(e);\r\n            } catch (InterruptedException e) {\r\n                System.out.println(&quot;Client Connection was interrupted!&quot;);\r\n                e.printStackTrace();\r\n            } finally {\r\n                if (clientSocket != null &amp;&amp; !clientSocket.isClosed()) {\r\n                    try {\r\n                        clientSocket.close();\r\n                    } catch (IOException ignored) {}\r\n                }\r\n    \r\n            }\r\n    \r\n        }\r\n    }\r\n\r\nI do have a parent thread which is responsible for starting and managing all the ClientConnection runnables:\r\n\r\n    @Override\r\n    public void run() {\r\n    \r\n        clientConnectionExecutor = (ThreadPoolExecutor) Executors.newCachedThreadPool();\r\n        while (true) {\r\n\r\n            Socket clientSocket;\r\n\r\n            try {\r\n                // wait for a Client to connect\r\n                clientSocket = serverSocket.accept();\r\n\r\n                ClientConnection clientConnection = new ClientConnection(clientSocket, messagesQueue);\r\n                clientConnectionExecutor.execute(clientConnection);\r\n\r\n            } catch (IOException e) {\r\n                // when this exception occurs, it means that we want to shut down everything\r\n                clientConnectionExecutor.shutdownNow();  // force terminate all ClientConnections\r\n                return;\r\n            }\r\n        }\r\n    }\r\nNow according to [this Stackoverflow Question][1], I would have expected that as soon as `shutdownNow();` is being called, an `InterruptedException` would be thrown within my `ClientConnection.run()` method, and there, it should print `Client Connection was interrupted!`. But this does not happen, so the catch clause seems never to be reached, the input reading loop just goes on. \r\n\r\nI read in another Stackoverflow question that this might be related to some other codeline within the block seems to be consuming the `InterruptedException`, but there wasn&#39;t any particular information on what codeline could do that. So I am thankful for any hints.\r\n\r\nEdit: It turns out that as soon as I manually exit the loop by typing &quot;quit&quot; on the client, the loop will quit and then, `Client Connection was interrupted!` will be printed. So somehow the exception seems to be ignored as long as the loop is running, and only handled afterwards.\r\n\r\n  [1]: https://stackoverflow.com/questions/11520189/difference-between-shutdown-and-shutdownnow-of-executor-service","title":"ThreadPoolExecutor.shutdownNow() not throwing InterruptedException in Thread","body":"<p>I am implementing a Transfer Server program which takes messages from clients (via console input) and then forwards it to some sort of mailbox.</p>\n<p>To allow concurrent reception of several messages by different clients, I first created a class that implements the <code>Runnable</code> interface. Each of this class instances will handle the communication with exactly one client:</p>\n<pre><code>public class ClientConnection implements Runnable {\n\n    //...\n\n    //...\n\n    @Override\n    public void run() {\n        try {\n            // prepare the input reader and output writer\n            BufferedReader reader = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\n            PrintWriter writer = new PrintWriter(clientSocket.getOutputStream(), true);\n\n            Message message = new Message();\n            String request = &quot;&quot;;\n\n            // read client requests\n            while ((request = reader.readLine()) != null) {\n\n                System.out.println(&quot;Client sent the following request: &quot; + request);\n                String response;\n                if (request.trim().equals(&quot;quit&quot;)) {\n                    writer.println(&quot;ok bye&quot;);\n                    return;\n                }\n\n                response = message.parseRequest(request);\n                if (message.isCompleted()) {\n                    messagesQueue.put(message);\n                    message = new Message();\n                }\n                writer.println(response);\n            }\n\n        } catch (SocketException e) {\n            System.out.println(&quot;ClientConnection: SocketException while handling socket: &quot; + e.getMessage());\n        } catch (IOException e) {\n            throw new UncheckedIOException(e);\n        } catch (InterruptedException e) {\n            System.out.println(&quot;Client Connection was interrupted!&quot;);\n            e.printStackTrace();\n        } finally {\n            if (clientSocket != null &amp;&amp; !clientSocket.isClosed()) {\n                try {\n                    clientSocket.close();\n                } catch (IOException ignored) {}\n            }\n\n        }\n\n    }\n}\n</code></pre>\n<p>I do have a parent thread which is responsible for starting and managing all the ClientConnection runnables:</p>\n<pre><code>@Override\npublic void run() {\n\n    clientConnectionExecutor = (ThreadPoolExecutor) Executors.newCachedThreadPool();\n    while (true) {\n\n        Socket clientSocket;\n\n        try {\n            // wait for a Client to connect\n            clientSocket = serverSocket.accept();\n\n            ClientConnection clientConnection = new ClientConnection(clientSocket, messagesQueue);\n            clientConnectionExecutor.execute(clientConnection);\n\n        } catch (IOException e) {\n            // when this exception occurs, it means that we want to shut down everything\n            clientConnectionExecutor.shutdownNow();  // force terminate all ClientConnections\n            return;\n        }\n    }\n}\n</code></pre>\n<p>Now according to <a href=\"https://stackoverflow.com/questions/11520189/difference-between-shutdown-and-shutdownnow-of-executor-service\">this Stackoverflow Question</a>, I would have expected that as soon as <code>shutdownNow();</code> is being called, an <code>InterruptedException</code> would be thrown within my <code>ClientConnection.run()</code> method, and there, it should print <code>Client Connection was interrupted!</code>. But this does not happen, so the catch clause seems never to be reached, the input reading loop just goes on.</p>\n<p>I read in another Stackoverflow question that this might be related to some other codeline within the block seems to be consuming the <code>InterruptedException</code>, but there wasn't any particular information on what codeline could do that. So I am thankful for any hints.</p>\n<p>Edit: It turns out that as soon as I manually exit the loop by typing &quot;quit&quot; on the client, the loop will quit and then, <code>Client Connection was interrupted!</code> will be printed. So somehow the exception seems to be ignored as long as the loop is running, and only handled afterwards.</p>\n"},{"tags":["java","scala","apache-spark"],"comments":[{"owner":{"account_id":1476224,"reputation":31485,"user_id":1386551,"accept_rate":74,"display_name":"blackbishop"},"score":0,"creation_date":1640079723,"post_id":70432850,"comment_id":124504555,"body_markdown":"I wasn&#39;t able to reproduce the error with the given example","body":"I wasn&#39;t able to reproduce the error with the given example"},{"owner":{"account_id":3810005,"reputation":543,"user_id":3161227,"accept_rate":70,"display_name":"Manos Ntoulias"},"score":0,"creation_date":1640085074,"post_id":70432850,"comment_id":124506474,"body_markdown":"@blackbishop Yes, I added the input schema as well which must be causing the issue","body":"@blackbishop Yes, I added the input schema as well which must be causing the issue"},{"owner":{"account_id":6276245,"reputation":2747,"user_id":4878848,"accept_rate":25,"display_name":"Nikunj Kakadiya"},"score":0,"creation_date":1640093582,"post_id":70432850,"comment_id":124509536,"body_markdown":"@ManosNtoulias How are you reading the data in the dataframe because if you have the data in the dataframe then the data would be in tabular format but your question shows it in json format.","body":"@ManosNtoulias How are you reading the data in the dataframe because if you have the data in the dataframe then the data would be in tabular format but your question shows it in json format."}],"owner":{"account_id":3810005,"reputation":543,"user_id":3161227,"accept_rate":70,"display_name":"Manos Ntoulias"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640085038,"creation_date":1640077333,"question_id":70432850,"body_markdown":"I am using Spark 3.1.2 and I have the data frame below and I want to access  the &#39;infos&#39; field from every element in the array of structs. I know I can do col(&quot;arrayOfStructs.infos&quot;) but since &#39;infos&#39; is not present in all elements I get a NullPointerException. Input data:\r\n\r\n    {\r\n\t  &quot;id&quot;: &quot;698hyg&quot;,\r\n\t  &quot;arrayOfStructs&quot;: [\r\n\t  {\r\n\t\t\t&quot;place&quot;: &quot;north1&quot;,\r\n\t\t\t&quot;lock&quot;: &quot;myLock&quot;,\r\n\t\t\t&quot;infos&quot;: {\r\n\t\t\t\t&quot;info1&quot;: &quot;I am an info&quot;,\r\n\t\t\t\t&quot;info2&quot;: &quot;hello there&quot;\r\n\t\t\t}\r\n\t  },\r\n      {\r\n\t\t\t&quot;place&quot;: &quot;north&quot;,\r\n\t\t\t&quot;lock&quot;: &quot;myLock&quot;\r\n\t  }]\r\n    }\r\n\r\nTarget output should be like this (Map the &#39;place&#39; field with empty maps if &#39;infos&#39; is not present):\r\n\r\n    \r\n    {north1 -&gt; {info1 -&gt; I am an info, info2 -&gt; hello there},\r\n     north  -&gt; {}\r\n    }\r\n\r\nI am trying to use \r\n\r\n    map_from_arrays(col(&quot;arrayOfStructs.place&quot;), col(&quot;arrayOfStructs.infos&quot;))\r\n\r\nbut I have trouble pairing the empty/null maps because the &#39;infos&#39; key is not present everywhere:\r\n\r\n    ERROR executor.Executor: Exception in task 0.0 in stage 0.0 (TID 0)\r\n    java.lang.NullPointerException\r\n\tat org.apache.spark.sql.catalyst.expressions.GeneratedClass$GeneratedIteratorForCodegenStage1.processNext(Unknown Source)\r\n\tat org.apache.spark.sql.execution.BufferedRowIterator.hasNext(BufferedRowIterator.java:43)\r\n    ....\r\n\r\ninput schema seems to be causing the issue. Ideally I would like to solve this without changing &#39;values&#39; nullable to true:\r\n\r\n      val schema: StructType = StructType(\r\n    StructField(&quot;id&quot;, StringType, nullable = false) ::\r\n    StructField(&quot;arrayOfStructs&quot;, ArrayType(StructType(\r\n      StructField(&quot;place&quot;, StringType, nullable = false) ::\r\n      StructField(&quot;lock&quot;, StringType, nullable = false) ::\r\n      StructField(&quot;infos&quot;, MapType(StringType, StringType), nullable = false) :: Nil\r\n      ), containsNull = false), nullable = false)\r\n    :: Nil)","title":"Spark: Extract field that is not always present from array of structs","body":"<p>I am using Spark 3.1.2 and I have the data frame below and I want to access  the 'infos' field from every element in the array of structs. I know I can do col(&quot;arrayOfStructs.infos&quot;) but since 'infos' is not present in all elements I get a NullPointerException. Input data:</p>\n<pre><code>{\n  &quot;id&quot;: &quot;698hyg&quot;,\n  &quot;arrayOfStructs&quot;: [\n  {\n        &quot;place&quot;: &quot;north1&quot;,\n        &quot;lock&quot;: &quot;myLock&quot;,\n        &quot;infos&quot;: {\n            &quot;info1&quot;: &quot;I am an info&quot;,\n            &quot;info2&quot;: &quot;hello there&quot;\n        }\n  },\n  {\n        &quot;place&quot;: &quot;north&quot;,\n        &quot;lock&quot;: &quot;myLock&quot;\n  }]\n}\n</code></pre>\n<p>Target output should be like this (Map the 'place' field with empty maps if 'infos' is not present):</p>\n<pre><code>{north1 -&gt; {info1 -&gt; I am an info, info2 -&gt; hello there},\n north  -&gt; {}\n}\n</code></pre>\n<p>I am trying to use</p>\n<pre><code>map_from_arrays(col(&quot;arrayOfStructs.place&quot;), col(&quot;arrayOfStructs.infos&quot;))\n</code></pre>\n<p>but I have trouble pairing the empty/null maps because the 'infos' key is not present everywhere:</p>\n<pre><code>ERROR executor.Executor: Exception in task 0.0 in stage 0.0 (TID 0)\njava.lang.NullPointerException\nat org.apache.spark.sql.catalyst.expressions.GeneratedClass$GeneratedIteratorForCodegenStage1.processNext(Unknown Source)\nat org.apache.spark.sql.execution.BufferedRowIterator.hasNext(BufferedRowIterator.java:43)\n....\n</code></pre>\n<p>input schema seems to be causing the issue. Ideally I would like to solve this without changing 'values' nullable to true:</p>\n<pre><code>  val schema: StructType = StructType(\nStructField(&quot;id&quot;, StringType, nullable = false) ::\nStructField(&quot;arrayOfStructs&quot;, ArrayType(StructType(\n  StructField(&quot;place&quot;, StringType, nullable = false) ::\n  StructField(&quot;lock&quot;, StringType, nullable = false) ::\n  StructField(&quot;infos&quot;, MapType(StringType, StringType), nullable = false) :: Nil\n  ), containsNull = false), nullable = false)\n:: Nil)\n</code></pre>\n"},{"tags":["java","cucumber","cucumber-jvm","cucumber-java","cucumber-junit"],"comments":[{"owner":{"account_id":21024943,"reputation":1,"user_id":15450504,"display_name":"Yenike Raghu Ram"},"score":0,"creation_date":1640162493,"post_id":70434463,"comment_id":124527666,"body_markdown":"@M.P.Korstanje it doesn&#39;t answer my question","body":"@M.P.Korstanje it doesn&#39;t answer my question"},{"owner":{"account_id":4895787,"reputation":10833,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1640164559,"post_id":70434463,"comment_id":124528440,"body_markdown":"The exceptions you are seeing are not possible with the version of Cucumber you listed. You should follow the tutorial. https://cucumber.io/docs/guides/10-minute-tutorial/","body":"The exceptions you are seeing are not possible with the version of Cucumber you listed. You should follow the tutorial. <a href=\"https://cucumber.io/docs/guides/10-minute-tutorial/\" rel=\"nofollow noreferrer\">cucumber.io/docs/guides/10-minute-tutorial</a>"},{"owner":{"account_id":21024943,"reputation":1,"user_id":15450504,"display_name":"Yenike Raghu Ram"},"score":0,"creation_date":1640254382,"post_id":70434463,"comment_id":124553121,"body_markdown":"@M.P.Korstanje Issue is not occurred with jdk 11","body":"@M.P.Korstanje Issue is not occurred with jdk 11"},{"owner":{"account_id":21024943,"reputation":1,"user_id":15450504,"display_name":"Yenike Raghu Ram"},"score":0,"creation_date":1640254394,"post_id":70434463,"comment_id":124553128,"body_markdown":"Issue observed with jdk 17","body":"Issue observed with jdk 17"},{"owner":{"account_id":4895787,"reputation":10833,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1640268054,"post_id":70434463,"comment_id":124557571,"body_markdown":"I removed XStream from Cucucmber in version 3. Follow the tutorial.","body":"I removed XStream from Cucucmber in version 3. Follow the tutorial."},{"owner":{"account_id":21024943,"reputation":1,"user_id":15450504,"display_name":"Yenike Raghu Ram"},"score":0,"creation_date":1640335279,"post_id":70434463,"comment_id":124571605,"body_markdown":"@M.P.Korstanje Any resolution so that it works with jdk 17???","body":"@M.P.Korstanje Any resolution so that it works with jdk 17???"},{"owner":{"account_id":4895787,"reputation":10833,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1640335457,"post_id":70434463,"comment_id":124571646,"body_markdown":"Start from scratch. Follow the tutorial. Learn about Maven.","body":"Start from scratch. Follow the tutorial. Learn about Maven."},{"owner":{"account_id":21024943,"reputation":1,"user_id":15450504,"display_name":"Yenike Raghu Ram"},"score":0,"creation_date":1640343426,"post_id":70434463,"comment_id":124573509,"body_markdown":"Configured maven as in tutorial \njava.lang.ExceptionInInitializerError at cucumber.deps.com.thoughtworks.xstream.XStream.setupConverters(XStream.java:678)","body":"Configured maven as in tutorial  java.lang.ExceptionInInitializerError at cucumber.deps.com.thoughtworks.xstream.XStream.setupConverte&zwnj;&#8203;rs(XStream.java:678)"},{"owner":{"account_id":21024943,"reputation":1,"user_id":15450504,"display_name":"Yenike Raghu Ram"},"score":0,"creation_date":1640343430,"post_id":70434463,"comment_id":124573510,"body_markdown":"Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private final java.util.Comparator java.util.TreeMap.comparator accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @59e5ddf","body":"Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private final java.util.Comparator java.util.TreeMap.comparator accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @59e5ddf"}],"owner":{"account_id":21024943,"reputation":1,"user_id":15450504,"display_name":"Yenike Raghu Ram"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1640357991,"answer_count":0,"score":0,"last_activity_date":1640084819,"creation_date":1640084819,"question_id":70434463,"body_markdown":"Issue occurs in jdk 17 \r\nIssue not reproduced in jdk 11\r\n\r\nBelow are maven dependencies\r\n\r\nio.cucumber - cucumber-java - 6.10.0 , io.cucumber - cucumber-jvm-deps - 1.0.6 io.cucumber - cucumber-cucumber-junit - 6.10.0\r\n\r\njava.lang.NoClassDefFoundError: Could not initialize class cucumber.deps.com.thoughtworks.xstream.converters.collections.TreeMapConverter\r\n\r\n        at cucumber.deps.com.thoughtworks.xstream.XStream.setupConverters(XStream.java:807)\r\n\r\n        at cucumber.deps.com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:574)\r\n\r\n        at cucumber.deps.com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:530)\r\n\r\n        at cucumber.runtime.xstream.LocalizedXStreams$LocalizedXStream.&lt;init&gt;(LocalizedXStreams.java:50)\r\n\r\n        at cucumber.runtime.xstream.LocalizedXStreams.newXStream(LocalizedXStreams.java:37)\r\n\r\n        at cucumber.runtime.xstream.LocalizedXStreams.get(LocalizedXStreams.java:29)\r\n\r\n        at cucumber.runtime.StepDefinitionMatch.runStep(StepDefinitionMatch.java:37)\r\n\r\n        at cucumber.runtime.Runtime.runStep(Runtime.java:300)\r\n\r\n        at cucumber.runtime.model.StepContainer.runStep(StepContainer.java:44)\r\n\r\n        at cucumber.runtime.model.StepContainer.runSteps(StepContainer.java:39)\r\n\r\n        at cucumber.runtime.model.CucumberScenario.run(CucumberScenario.java:44)\r\n\r\n        at cucumber.runtime.junit.ExecutionUnitRunner.run(ExecutionUnitRunner.java:102)\r\n\r\n        at org.junit.runners.Suite.runChild(Suite.java:128)\r\n\r\n        at org.junit.runners.Suite.runChild(Suite.java:27)\r\n\r\n        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\r\n        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\r\n        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\r\n        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\r\n        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\r\n        at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\r\n        at cucumber.runtime.junit.ExamplesRunner.run(ExamplesRunner.java:59)\r\n\r\n        at org.junit.runners.Suite.runChild(Suite.java:128)\r\n\r\n        at org.junit.runners.Suite.runChild(Suite.java:27)\r\n\r\n        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\r\n        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\r\n        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\r\n        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\r\n        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\r\n        at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\r\n        at cucumber.runtime.junit.ScenarioOutlineRunner.run(ScenarioOutlineRunner.java:53)\r\n\r\n        at cucumber.runtime.junit.FeatureRunner.runChild(FeatureRunner.java:63)\r\n\r\n        at cucumber.runtime.junit.FeatureRunner.runChild(FeatureRunner.java:18)\r\n\r\n        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\r\n        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\r\n        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\r\n        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\r\n        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\r\n        at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\r\n        at cucumber.runtime.junit.FeatureRunner.run(FeatureRunner.java:70)\r\n\r\n        at cucumber.api.junit.Cucumber.runChild(Cucumber.java:95)\r\n\r\n        at cucumber.api.junit.Cucumber.runChild(Cucumber.java:38)\r\n\r\n        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\r\n        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\r\n        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\r\n        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\r\n        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\r\n        at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n\r\n        at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\r\n\r\n        at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\r\n        at cucumber.api.junit.Cucumber.run(Cucumber.java:100)\r\n\r\n        at org.junit.runners.Suite.runChild(Suite.java:128)\r\n\r\n        at org.junit.runners.Suite.runChild(Suite.java:27)\r\n\r\n        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\r\n        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\r\n        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\r\n        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\r\n        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\r\n        at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\r\n        at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)\r\n\r\n        at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)\r\n\r\n        at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)\r\n\r\n        at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)\r\n\r\n        at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)\r\n\r\n        at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)\r\n\r\n        at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:379)\r\n\r\n        at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:340)\r\n\r\n        at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)\r\n\r\n        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:413)\r\n\r\n        at ?.Given Launch the ContainerLINK Application on &quot;UWP-USB&quot;(About.feature:98)\r\n\r\n\r\n","title":"java.lang.NoClassDefFoundError: Could not initialize class cucumber.deps.com.thoughtworks.xstream.converters.collections.TreeMapConverter","body":"<p>Issue occurs in jdk 17\nIssue not reproduced in jdk 11</p>\n<p>Below are maven dependencies</p>\n<p>io.cucumber - cucumber-java - 6.10.0 , io.cucumber - cucumber-jvm-deps - 1.0.6 io.cucumber - cucumber-cucumber-junit - 6.10.0</p>\n<p>java.lang.NoClassDefFoundError: Could not initialize class cucumber.deps.com.thoughtworks.xstream.converters.collections.TreeMapConverter</p>\n<pre><code>    at cucumber.deps.com.thoughtworks.xstream.XStream.setupConverters(XStream.java:807)\n\n    at cucumber.deps.com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:574)\n\n    at cucumber.deps.com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:530)\n\n    at cucumber.runtime.xstream.LocalizedXStreams$LocalizedXStream.&lt;init&gt;(LocalizedXStreams.java:50)\n\n    at cucumber.runtime.xstream.LocalizedXStreams.newXStream(LocalizedXStreams.java:37)\n\n    at cucumber.runtime.xstream.LocalizedXStreams.get(LocalizedXStreams.java:29)\n\n    at cucumber.runtime.StepDefinitionMatch.runStep(StepDefinitionMatch.java:37)\n\n    at cucumber.runtime.Runtime.runStep(Runtime.java:300)\n\n    at cucumber.runtime.model.StepContainer.runStep(StepContainer.java:44)\n\n    at cucumber.runtime.model.StepContainer.runSteps(StepContainer.java:39)\n\n    at cucumber.runtime.model.CucumberScenario.run(CucumberScenario.java:44)\n\n    at cucumber.runtime.junit.ExecutionUnitRunner.run(ExecutionUnitRunner.java:102)\n\n    at org.junit.runners.Suite.runChild(Suite.java:128)\n\n    at org.junit.runners.Suite.runChild(Suite.java:27)\n\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n\n    at cucumber.runtime.junit.ExamplesRunner.run(ExamplesRunner.java:59)\n\n    at org.junit.runners.Suite.runChild(Suite.java:128)\n\n    at org.junit.runners.Suite.runChild(Suite.java:27)\n\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n\n    at cucumber.runtime.junit.ScenarioOutlineRunner.run(ScenarioOutlineRunner.java:53)\n\n    at cucumber.runtime.junit.FeatureRunner.runChild(FeatureRunner.java:63)\n\n    at cucumber.runtime.junit.FeatureRunner.runChild(FeatureRunner.java:18)\n\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n\n    at cucumber.runtime.junit.FeatureRunner.run(FeatureRunner.java:70)\n\n    at cucumber.api.junit.Cucumber.runChild(Cucumber.java:95)\n\n    at cucumber.api.junit.Cucumber.runChild(Cucumber.java:38)\n\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\n\n    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\n\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n\n    at cucumber.api.junit.Cucumber.run(Cucumber.java:100)\n\n    at org.junit.runners.Suite.runChild(Suite.java:128)\n\n    at org.junit.runners.Suite.runChild(Suite.java:27)\n\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n\n    at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)\n\n    at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)\n\n    at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)\n\n    at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)\n\n    at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)\n\n    at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)\n\n    at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:379)\n\n    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:340)\n\n    at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)\n\n    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:413)\n\n    at ?.Given Launch the ContainerLINK Application on &quot;UWP-USB&quot;(About.feature:98)\n</code></pre>\n"},{"tags":["java","hibernate","inheritance","superclass"],"answers":[{"tags":[],"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640084817,"creation_date":1640084817,"answer_id":70434462,"question_id":70433826,"body_markdown":"If you don&#39;t want to add a table in your database for this &quot;super entity&quot; (let&#39;s call the class `Being`), you can still make `Person` and `Animal` inherit from it (`Person` should inherit from `Animal` BTW), and do the mapping of the common fields on properties:\r\n\r\n\r\n    public abstract class Being {\r\n        private Integer id;\r\n        private String name;\r\n    \r\n        // ...\r\n    \r\n        public Integer getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(Integer id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        public String getName() {\r\n            return name;\r\n        }\r\n    \r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n        //...\r\n    }\r\n\r\n    @Entity\r\n    @Table(name = &quot;person&quot;)\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class Person extends Being {\r\n        \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @JsonProperty\r\n        @Column(name = &quot;person_id&quot;)\r\n        public Integer getId() {\r\n            return super.getId();\r\n        }\r\n    \r\n        public void setId(Integer id) {\r\n            super.setId(id);\r\n        }\r\n    \r\n        // all below fields are generic in all the entities\r\n        @JsonProperty\r\n        @Column(name = &quot;name&quot;)\r\n        public String getName() {\r\n            return super.getName();\r\n        }\r\n    \r\n        public void setName(String name) {\r\n            super.setName(name);\r\n        }\r\n    \r\n        //...\r\n    \r\n    }\r\n\r\n","title":"Hibernate - Extending Entities without a base table annotation?","body":"<p>If you don't want to add a table in your database for this &quot;super entity&quot; (let's call the class <code>Being</code>), you can still make <code>Person</code> and <code>Animal</code> inherit from it (<code>Person</code> should inherit from <code>Animal</code> BTW), and do the mapping of the common fields on properties:</p>\n<pre><code>public abstract class Being {\n    private Integer id;\n    private String name;\n\n    // ...\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    //...\n}\n\n@Entity\n@Table(name = &quot;person&quot;)\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class Person extends Being {\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @JsonProperty\n    @Column(name = &quot;person_id&quot;)\n    public Integer getId() {\n        return super.getId();\n    }\n\n    public void setId(Integer id) {\n        super.setId(id);\n    }\n\n    // all below fields are generic in all the entities\n    @JsonProperty\n    @Column(name = &quot;name&quot;)\n    public String getName() {\n        return super.getName();\n    }\n\n    public void setName(String name) {\n        super.setName(name);\n    }\n\n    //...\n\n}\n</code></pre>\n"}],"owner":{"account_id":16962007,"reputation":1665,"user_id":12268910,"display_name":"java12399900"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":562,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70434462,"answer_count":1,"score":0,"last_activity_date":1640084817,"creation_date":1640081836,"question_id":70433826,"body_markdown":"I have the following 2 `Hiberante` entities:\r\n\r\n    Person\r\n    \r\n    Animal \r\n\r\nThey have the shared fields / columns e.g: `name, age` etc, however each primary key id field is named differently, e.g. there is `person_id` and `animal_id` \r\n\r\n    @Entity\r\n    @Table(name = &quot;person&quot;)\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class Person{\r\n        \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @JsonProperty\r\n        @Column(name = &quot;person_id&quot;)\r\n        private Integer person_id;\r\n    \r\n        // all below fields are generic in all the entities\r\n        @JsonProperty\r\n        @Column(name = &quot;name&quot;)\r\n        private String name;\r\n    \r\n        @JsonProperty\r\n        @Column(name = &quot;age&quot;)\r\n        private String age;\r\n    \r\n    }\r\n\r\nIs there a way that I can create a base entity super class that holds these generic `name, age` etc fields, then have Person, Animal and any new entities extend this super entity?\r\n\r\n\r\nNote that the super class does not have a table of its own so I am not sure what I would have for the `@Table` value? \r\n\r\nI also have the issue of the primary keys not all being named e.g. `id` so would have to specify them specifically in each entity.\r\n\r\n","title":"Hibernate - Extending Entities without a base table annotation?","body":"<p>I have the following 2 <code>Hiberante</code> entities:</p>\n<pre><code>Person\n\nAnimal \n</code></pre>\n<p>They have the shared fields / columns e.g: <code>name, age</code> etc, however each primary key id field is named differently, e.g. there is <code>person_id</code> and <code>animal_id</code></p>\n<pre><code>@Entity\n@Table(name = &quot;person&quot;)\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class Person{\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @JsonProperty\n    @Column(name = &quot;person_id&quot;)\n    private Integer person_id;\n\n    // all below fields are generic in all the entities\n    @JsonProperty\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n    @JsonProperty\n    @Column(name = &quot;age&quot;)\n    private String age;\n\n}\n</code></pre>\n<p>Is there a way that I can create a base entity super class that holds these generic <code>name, age</code> etc fields, then have Person, Animal and any new entities extend this super entity?</p>\n<p>Note that the super class does not have a table of its own so I am not sure what I would have for the <code>@Table</code> value?</p>\n<p>I also have the issue of the primary keys not all being named e.g. <code>id</code> so would have to specify them specifically in each entity.</p>\n"},{"tags":["java","awt","deadlock","gnome","manjaro"],"answers":[{"tags":[],"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1640084743,"creation_date":1640084743,"answer_id":70434441,"question_id":70348991,"body_markdown":"There are already several questions on SO about that issue:\r\n\r\n- https://stackoverflow.com/questions/27879854/desktop-getdesktop-browse-hangs\r\n- https://stackoverflow.com/questions/37926495/desktop-and-desktop-browse-are-supported-but-browse-still-hangs\r\n- https://stackoverflow.com/questions/21933442/desktop-browse-does-not-work-in-java-for-ubuntu\r\n\r\nThere is also this discussion:\r\n\r\nhttps://bugs.launchpad.net/ubuntu/+source/openjdk-8/+bug/1574879\r\n\r\nwhere someone says:\r\n\r\n&gt; gnome_url_show is actually in libgnome-2-0 package\r\n\r\nSo, if the package is missing, `Desktop.browse()` will fail. There are 2 solutions to fix that.\r\n\r\nSolution 1\r\n----------\r\n\r\nInstall the libgnome package.\r\n\r\nSolution 2\r\n----------\r\n\r\nExecute xdg-open to open the URL, e.g.:\r\n\r\n``` lang-java\r\nRuntime.getRuntime().exec(new String[]{&quot;xdg-open&quot;, someurl});\r\n```\r\n","title":"Is Desktop#browse supported on Linux platform just for Gnome desktop?","body":"<p>There are already several questions on SO about that issue:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/27879854/desktop-getdesktop-browse-hangs\">Desktop.getDesktop().browse Hangs</a></li>\n<li><a href=\"https://stackoverflow.com/questions/37926495/desktop-and-desktop-browse-are-supported-but-browse-still-hangs\">Desktop and desktop.browse are supported, but browse still hangs</a></li>\n<li><a href=\"https://stackoverflow.com/questions/21933442/desktop-browse-does-not-work-in-java-for-ubuntu\">Desktop browse does not work in java for Ubuntu</a></li>\n</ul>\n<p>There is also this discussion:</p>\n<p><a href=\"https://bugs.launchpad.net/ubuntu/+source/openjdk-8/+bug/1574879\" rel=\"nofollow noreferrer\">https://bugs.launchpad.net/ubuntu/+source/openjdk-8/+bug/1574879</a></p>\n<p>where someone says:</p>\n<blockquote>\n<p>gnome_url_show is actually in libgnome-2-0 package</p>\n</blockquote>\n<p>So, if the package is missing, <code>Desktop.browse()</code> will fail. There are 2 solutions to fix that.</p>\n<h2>Solution 1</h2>\n<p>Install the libgnome package.</p>\n<h2>Solution 2</h2>\n<p>Execute xdg-open to open the URL, e.g.:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Runtime.getRuntime().exec(new String[]{&quot;xdg-open&quot;, someurl});\n</code></pre>\n"}],"owner":{"account_id":14571259,"reputation":994,"user_id":10524503,"display_name":"Wortig"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":636,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70434441,"answer_count":1,"score":2,"last_activity_date":1640084743,"creation_date":1639485404,"question_id":70348991,"body_markdown":"Running my Java application with this code:\r\n\r\n    if (Desktop.isDesktopSupported())\r\n    {\r\n    \tDesktop d = Desktop.getDesktop();\r\n    \ttry\r\n    \t{\r\n    \t\td.browse(new URI(&quot;someurl&quot;)); // someurl is just an example, I am opening real url\r\n    \t}\r\n    \tcatch (IOException | URISyntaxException e)\r\n    \t{\r\n    \t\tlogger.warn(ExceptionUtils.getStackTrace(e));\r\n    \t}\r\n    }\r\n\r\nresults in application not responding (probably deadlock) on Manjaro Linux KDE. While it works with no problem on Windows, I do not want to check for OS in my application and allow it just for Windows. I have not tried other platforms yet. \r\n\r\nWhat i use:\r\n - Adoptium JDK 11 \r\n - Manjaro kernel 5.10.83-1-MANJARO 64bit \r\n - KDE Plasma 5.23.4 \r\n - Qt 5.15.2\r\n\r\n*Detailed deadlock location:*\r\n\r\n`Desktop` class:\r\n    \r\n    public void browse(URI uri) throws IOException {\r\n            checkAWTPermission();\r\n            checkExec();\r\n            checkActionSupport(Action.BROWSE);\r\n            Objects.requireNonNull(uri);\r\n            peer.browse(uri); // &lt;- goes here\r\n        }\r\n\r\nDeadlock happens in `XDesktopPeer` class that implements `DesktopPeer` interface (*peer*) on method `gnome_url_show(...)`:\r\n\r\n    private void launch(URI uri) throws IOException {\r\n            byte[] uriByteArray = ( uri.toString() + &#39;\\0&#39; ).getBytes();\r\n            boolean result = false;\r\n            XToolkit.awtLock();\r\n            try {\r\n                if (!nativeLibraryLoaded) {\r\n                    throw new IOException(&quot;Failed to load native libraries.&quot;);\r\n                }\r\n                result = gnome_url_show(uriByteArray); // &lt;- deadlock / app not responding here\r\n            } finally {\r\n                XToolkit.awtUnlock();\r\n            }\r\n            if (!result) {\r\n                throw new IOException(&quot;Failed to show URI:&quot; + uri);\r\n            }\r\n        }\r\n\r\nSo... is Desktop#browse supported on Linux platform just for Gnome desktop? \r\n\r\nI am guessing this, because of that method name.\r\n\r\n*If yes, can I make a check for deadlock around my code, so I prevent this in my app? rather than checking for OS and distros?*","title":"Is Desktop#browse supported on Linux platform just for Gnome desktop?","body":"<p>Running my Java application with this code:</p>\n<pre><code>if (Desktop.isDesktopSupported())\n{\n    Desktop d = Desktop.getDesktop();\n    try\n    {\n        d.browse(new URI(&quot;someurl&quot;)); // someurl is just an example, I am opening real url\n    }\n    catch (IOException | URISyntaxException e)\n    {\n        logger.warn(ExceptionUtils.getStackTrace(e));\n    }\n}\n</code></pre>\n<p>results in application not responding (probably deadlock) on Manjaro Linux KDE. While it works with no problem on Windows, I do not want to check for OS in my application and allow it just for Windows. I have not tried other platforms yet.</p>\n<p>What i use:</p>\n<ul>\n<li>Adoptium JDK 11</li>\n<li>Manjaro kernel 5.10.83-1-MANJARO 64bit</li>\n<li>KDE Plasma 5.23.4</li>\n<li>Qt 5.15.2</li>\n</ul>\n<p><em>Detailed deadlock location:</em></p>\n<p><code>Desktop</code> class:</p>\n<pre><code>public void browse(URI uri) throws IOException {\n        checkAWTPermission();\n        checkExec();\n        checkActionSupport(Action.BROWSE);\n        Objects.requireNonNull(uri);\n        peer.browse(uri); // &lt;- goes here\n    }\n</code></pre>\n<p>Deadlock happens in <code>XDesktopPeer</code> class that implements <code>DesktopPeer</code> interface (<em>peer</em>) on method <code>gnome_url_show(...)</code>:</p>\n<pre><code>private void launch(URI uri) throws IOException {\n        byte[] uriByteArray = ( uri.toString() + '\\0' ).getBytes();\n        boolean result = false;\n        XToolkit.awtLock();\n        try {\n            if (!nativeLibraryLoaded) {\n                throw new IOException(&quot;Failed to load native libraries.&quot;);\n            }\n            result = gnome_url_show(uriByteArray); // &lt;- deadlock / app not responding here\n        } finally {\n            XToolkit.awtUnlock();\n        }\n        if (!result) {\n            throw new IOException(&quot;Failed to show URI:&quot; + uri);\n        }\n    }\n</code></pre>\n<p>So... is Desktop#browse supported on Linux platform just for Gnome desktop?</p>\n<p>I am guessing this, because of that method name.</p>\n<p><em>If yes, can I make a check for deadlock around my code, so I prevent this in my app? rather than checking for OS and distros?</em></p>\n"},{"tags":["java","mongodb","apache-spark","objectid"],"answers":[{"tags":[],"owner":{"account_id":12051642,"reputation":1,"user_id":8814362,"display_name":"Rawad Daher"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640084500,"creation_date":1640083313,"answer_id":70434151,"question_id":69762779,"body_markdown":"You don&#39;t need to use `udf()`\r\nimport the `struct` first:\r\n\r\n    import static org.apache.spark.sql.functions.struct;\r\n\r\nThen use:\r\n\r\n    dataframe = dataframe.withColumn(&quot;pub_id&quot;, struct(col(&quot;publisherId&quot;).as(&quot;oid&quot;)))","title":"How do I write string value as MongoDB ObjectId in java spark?","body":"<p>You don't need to use <code>udf()</code>\nimport the <code>struct</code> first:</p>\n<pre><code>import static org.apache.spark.sql.functions.struct;\n</code></pre>\n<p>Then use:</p>\n<pre><code>dataframe = dataframe.withColumn(&quot;pub_id&quot;, struct(col(&quot;publisherId&quot;).as(&quot;oid&quot;)))\n</code></pre>\n"}],"owner":{"account_id":21626082,"reputation":31,"user_id":15950413,"display_name":"JuyounKim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":788,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640084500,"creation_date":1635472630,"question_id":69762779,"body_markdown":"I&#39;d like to write string value as ObjectId to MongoDB in java spark.\r\n\r\nI tried it like this.\r\n```\r\nList&lt;StructField&gt; structFields = new ArrayList&lt;&gt;();\r\nstructFields.add(DataTypes.createStructField(&quot;oid&quot;, DataTypes.StringType, true));\r\n\r\nStructType structType = DataTypes.createStructType(structFields);\r\n\r\nspark.sqlContext().udf().register(&quot;toObjectId&quot;, (String publisherId) -&gt; {\r\n\treturn new com.mongodb.spark.sql.fieldTypes.api.java.ObjectId(publisherId);\r\n}, StructType);\r\n\r\ndataframe = dataframe.withColumn(&quot;pub_id&quot;,\r\n\tfunctions.callUDF(&quot;toObjectId&quot;, dataset.col(&quot;publisherId&quot;).cast(DataTypes.StringType))\r\n);\r\n\r\nMap&lt;String, String&gt; writeOverrides = new HashMap&lt;String, String&gt;();\r\nwriteOverrides.put(&quot;writeConcern.w&quot;, &quot;majority&quot;);\r\nWriteConfig writeConfig = WriteConfig.create(jsc).withOptions(writeOverrides);\r\n\r\nMongoSpark.save(dataset, writeConfig);\r\n\r\n```\r\n\r\nbut I got this error.\r\n```\r\nCaused by: scala.MatchError: com.mongodb.spark.sql.fieldTypes.api.java.ObjectId@8b2d2973 (of class com.mongodb.spark.sql.fieldTypes.api.java.ObjectId)\r\n\tat org.apache.spark.sql.catalyst.CatalystTypeConverters$StructConverter.toCatalystImpl(CatalystTypeConverters.scala:236)\r\n\tat org.apache.spark.sql.catalyst.CatalystTypeConverters$StructConverter.toCatalystImpl(CatalystTypeConverters.scala:231)\r\n\tat org.apache.spark.sql.catalyst.CatalystTypeConverters$CatalystTypeConverter.toCatalyst(CatalystTypeConverters.scala:103)\r\n\tat org.apache.spark.sql.catalyst.CatalystTypeConverters$$anonfun$createToCatalystConverter$2.apply(CatalystTypeConverters.scala:379)\r\n```\r\n\r\nHow can I write ObjectId to MongoDB in spark through JAVA API ?","title":"How do I write string value as MongoDB ObjectId in java spark?","body":"<p>I'd like to write string value as ObjectId to MongoDB in java spark.</p>\n<p>I tried it like this.</p>\n<pre><code>List&lt;StructField&gt; structFields = new ArrayList&lt;&gt;();\nstructFields.add(DataTypes.createStructField(&quot;oid&quot;, DataTypes.StringType, true));\n\nStructType structType = DataTypes.createStructType(structFields);\n\nspark.sqlContext().udf().register(&quot;toObjectId&quot;, (String publisherId) -&gt; {\n    return new com.mongodb.spark.sql.fieldTypes.api.java.ObjectId(publisherId);\n}, StructType);\n\ndataframe = dataframe.withColumn(&quot;pub_id&quot;,\n    functions.callUDF(&quot;toObjectId&quot;, dataset.col(&quot;publisherId&quot;).cast(DataTypes.StringType))\n);\n\nMap&lt;String, String&gt; writeOverrides = new HashMap&lt;String, String&gt;();\nwriteOverrides.put(&quot;writeConcern.w&quot;, &quot;majority&quot;);\nWriteConfig writeConfig = WriteConfig.create(jsc).withOptions(writeOverrides);\n\nMongoSpark.save(dataset, writeConfig);\n\n</code></pre>\n<p>but I got this error.</p>\n<pre><code>Caused by: scala.MatchError: com.mongodb.spark.sql.fieldTypes.api.java.ObjectId@8b2d2973 (of class com.mongodb.spark.sql.fieldTypes.api.java.ObjectId)\n    at org.apache.spark.sql.catalyst.CatalystTypeConverters$StructConverter.toCatalystImpl(CatalystTypeConverters.scala:236)\n    at org.apache.spark.sql.catalyst.CatalystTypeConverters$StructConverter.toCatalystImpl(CatalystTypeConverters.scala:231)\n    at org.apache.spark.sql.catalyst.CatalystTypeConverters$CatalystTypeConverter.toCatalyst(CatalystTypeConverters.scala:103)\n    at org.apache.spark.sql.catalyst.CatalystTypeConverters$$anonfun$createToCatalystConverter$2.apply(CatalystTypeConverters.scala:379)\n</code></pre>\n<p>How can I write ObjectId to MongoDB in spark through JAVA API ?</p>\n"},{"tags":["java","quicktime"],"comments":[{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":2,"creation_date":1639765355,"post_id":70397282,"comment_id":124440765,"body_markdown":"This might be helpful.  https://docs.fileformat.com/video/mov/","body":"This might be helpful.  <a href=\"https://docs.fileformat.com/video/mov/\" rel=\"nofollow noreferrer\">docs.fileformat.com/video/mov</a>"}],"answers":[{"tags":[],"owner":{"account_id":5732403,"reputation":579,"user_id":4527515,"accept_rate":50,"display_name":"Pratim Singha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640084367,"creation_date":1640084367,"answer_id":70434368,"question_id":70397282,"body_markdown":"    if (array[4] == (byte)&#39;f&#39; &amp;&amp; array[5] == (byte)&#39;t&#39; &amp;&amp; array[6] == (byte)&#39;y&#39; &amp;&amp; array[7] == (byte)&#39;p&#39;)\r\n\r\nWe may need to check the signature of mov file as &quot;ftyp&quot;.\r\nhttps://docs.fileformat.com/video/mov/ \r\nAs suggested by Cheng Thao, Please refer to this link for more information on the file structures.","title":"Detecting Quicktime MOV File Type using java","body":"<pre><code>if (array[4] == (byte)'f' &amp;&amp; array[5] == (byte)'t' &amp;&amp; array[6] == (byte)'y' &amp;&amp; array[7] == (byte)'p')\n</code></pre>\n<p>We may need to check the signature of mov file as &quot;ftyp&quot;.\n<a href=\"https://docs.fileformat.com/video/mov/\" rel=\"nofollow noreferrer\">https://docs.fileformat.com/video/mov/</a>\nAs suggested by Cheng Thao, Please refer to this link for more information on the file structures.</p>\n"}],"owner":{"account_id":5732403,"reputation":579,"user_id":4527515,"accept_rate":50,"display_name":"Pratim Singha"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":162,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70434368,"answer_count":1,"score":0,"last_activity_date":1640084367,"creation_date":1639764893,"question_id":70397282,"body_markdown":"Please consider that I have an xml file which has the binary content of an MOV file.\r\n\r\nFor example:\r\n\r\n    &lt;MyFile&gt;AAAAFGZ0eXBxdCAgA.......&lt;/MyFile&gt;\r\n\r\nHow to detect that the content, inside that customised MyFile tag, is an MOV file.\r\n\r\nFor example, for MPEG video file, the condition that we put to check whether the file is an MPEG file is:\r\n\r\n    if (array[0] == (byte)0 &amp;&amp; array[1] == (byte)0 &amp;&amp; array[2] == (byte)0x01 &amp;&amp; (array[3] == (byte)0xb3 || array[3] == (byte)0xba))\r\n\r\nCan anyone please suggest what shall we check for an MOV file.","title":"Detecting Quicktime MOV File Type using java","body":"<p>Please consider that I have an xml file which has the binary content of an MOV file.</p>\n<p>For example:</p>\n<pre><code>&lt;MyFile&gt;AAAAFGZ0eXBxdCAgA.......&lt;/MyFile&gt;\n</code></pre>\n<p>How to detect that the content, inside that customised MyFile tag, is an MOV file.</p>\n<p>For example, for MPEG video file, the condition that we put to check whether the file is an MPEG file is:</p>\n<pre><code>if (array[0] == (byte)0 &amp;&amp; array[1] == (byte)0 &amp;&amp; array[2] == (byte)0x01 &amp;&amp; (array[3] == (byte)0xb3 || array[3] == (byte)0xba))\n</code></pre>\n<p>Can anyone please suggest what shall we check for an MOV file.</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc"],"comments":[{"owner":{"account_id":4185622,"reputation":933,"user_id":3429457,"display_name":"RicardoVallejo"},"score":0,"creation_date":1640081203,"post_id":70433582,"comment_id":124505061,"body_markdown":"Read this comment\nhttps://stackoverflow.com/questions/12837907/what-to-return-if-spring-mvc-controller-method-doesnt-return-value#comment41586596_12839817","body":"Read this comment <a href=\"https://stackoverflow.com/questions/12837907/what-to-return-if-spring-mvc-controller-method-doesnt-return-value#comment41586596_12839817\" title=\"what to return if spring mvc controller method doesnt return value%23comment41586596_12839817\">stackoverflow.com/questions/12837907/&hellip;</a>"},{"owner":{"account_id":968743,"reputation":3452,"user_id":991710,"accept_rate":82,"display_name":"filpa"},"score":2,"creation_date":1640082244,"post_id":70433582,"comment_id":124505432,"body_markdown":"Your question is a bit misleading. You say `returns 204 instead of 200` but then `why Spring doesn&#39;t do that by default?`? Which is it?","body":"Your question is a bit misleading. You say <code>returns 204 instead of 200</code> but then <code>why Spring doesn&#39;t do that by default?</code>? Which is it?"},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1640084836,"post_id":70433582,"comment_id":124506375,"body_markdown":"By the way, 204 looks a sensible HTTP status code to me. More on the 204 HTTP status code: *&quot;This might be used, for example, when implementing &quot;save and continue editing&quot; functionality for a wiki site.&quot;* [Source](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/204)","body":"By the way, 204 looks a sensible HTTP status code to me. More on the 204 HTTP status code: <i>&quot;This might be used, for example, when implementing &quot;save and continue editing&quot; functionality for a wiki site.&quot;</i> <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/204\" rel=\"nofollow noreferrer\">Source</a>"},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1640085260,"post_id":70433582,"comment_id":124506533,"body_markdown":"By the way, `Map` (assuming `java.util.Map`) is a raw type. Don&#39;t use raw types, always specify the necessary type parameters. In your case, `Map&lt;?, ?&gt;` will probably do, although keys of mixed types looks peculiar to me.","body":"By the way, <code>Map</code> (assuming <code>java.util.Map</code>) is a raw type. Don&#39;t use raw types, always specify the necessary type parameters. In your case, <code>Map&lt;?, ?&gt;</code> will probably do, although keys of mixed types looks peculiar to me."}],"answers":[{"tags":[],"owner":{"account_id":19196094,"reputation":474,"user_id":14024740,"display_name":"AussieDev81"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640084188,"creation_date":1640084188,"answer_id":70434333,"question_id":70433582,"body_markdown":"I don&#39;t have a direct answer for &quot;**why status 204 isn&#39;t returned by default**&quot; but it makes sense to me that it would return 200 (ok) by default because the status code 204 definition states that\r\n\r\n&gt; There is no content to send for this request, but the headers may be\r\n&gt; useful\r\n\r\nYet in the case of returning nothing at all, there is no response entity and therefore are also no useful headers.\r\n\r\nWith spring boot (and Java in general) being so explicit, we need to also be explicit when we are defining the behaviors we want.\r\n\r\nA slightly more explicit version of your endpoint method might be something like the following...\r\n\r\n```java\r\n@PostMapping(&quot;test&quot;)\r\npublic ResponseEntity&lt;?&gt; save(@RequestBody Map&lt;?,?&gt; payload) {\r\n    if(payload.isEmpty())\r\n        return ResponseEntity.noContent().build();\r\n    else\r\n        return ResponseEntity.ok().body(testService.save(payload));\r\n}\r\n```","title":"Why Spring RestController POST method returns 200 instead of 204 when return type is void?","body":"<p>I don't have a direct answer for &quot;<strong>why status 204 isn't returned by default</strong>&quot; but it makes sense to me that it would return 200 (ok) by default because the status code 204 definition states that</p>\n<blockquote>\n<p>There is no content to send for this request, but the headers may be\nuseful</p>\n</blockquote>\n<p>Yet in the case of returning nothing at all, there is no response entity and therefore are also no useful headers.</p>\n<p>With spring boot (and Java in general) being so explicit, we need to also be explicit when we are defining the behaviors we want.</p>\n<p>A slightly more explicit version of your endpoint method might be something like the following...</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PostMapping(&quot;test&quot;)\npublic ResponseEntity&lt;?&gt; save(@RequestBody Map&lt;?,?&gt; payload) {\n    if(payload.isEmpty())\n        return ResponseEntity.noContent().build();\n    else\n        return ResponseEntity.ok().body(testService.save(payload));\n}\n</code></pre>\n"}],"owner":{"account_id":19496972,"reputation":2160,"user_id":14263933,"display_name":"aatwork"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1478,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1640084188,"creation_date":1640080811,"question_id":70433582,"body_markdown":"```\r\n@PostMapping(path = &quot;/test&quot;)\r\npublic void save(Map payload) {\r\n    testService.save(payload);\r\n}\r\n```\r\nSpring RestController returns 204 instead of 200 in above scenario. Return type is void &amp; there is no content is response body. It is an established practice to return 204 HTTP code when there is no response body &amp; the processing is successful. I want to know why Spring doesn&#39;t do that by default? Is there any particular reason?\r\n\r\nI already know how to change the default status code, so that is not a question.","title":"Why Spring RestController POST method returns 200 instead of 204 when return type is void?","body":"<pre><code>@PostMapping(path = &quot;/test&quot;)\npublic void save(Map payload) {\n    testService.save(payload);\n}\n</code></pre>\n<p>Spring RestController returns 204 instead of 200 in above scenario. Return type is void &amp; there is no content is response body. It is an established practice to return 204 HTTP code when there is no response body &amp; the processing is successful. I want to know why Spring doesn't do that by default? Is there any particular reason?</p>\n<p>I already know how to change the default status code, so that is not a question.</p>\n"},{"tags":["java","sockets","ssl","tls1.2"],"comments":[{"owner":{"account_id":2453537,"reputation":31,"user_id":2139249,"display_name":"KJK"},"score":0,"creation_date":1467200639,"post_id":38098471,"comment_id":63631351,"body_markdown":"I want to set TLS to the above code","body":"I want to set TLS to the above code"},{"owner":{"account_id":55539,"reputation":160129,"user_id":166339,"display_name":"Asaph"},"score":0,"creation_date":1467244878,"post_id":38098471,"comment_id":63657445,"body_markdown":"What version of java are you using? Java 8 has much better TLS defaults than Java 7.","body":"What version of java are you using? Java 8 has much better TLS defaults than Java 7."},{"owner":{"account_id":2453537,"reputation":31,"user_id":2139249,"display_name":"KJK"},"score":0,"creation_date":1467260422,"post_id":38098471,"comment_id":63661010,"body_markdown":"I use java 7 and As of now i wont be able to upgrade","body":"I use java 7 and As of now i wont be able to upgrade"}],"answers":[{"tags":[],"owner":{"account_id":25589,"reputation":562121,"user_id":65863,"accept_rate":75,"display_name":"Remy Lebeau"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1467244706,"creation_date":1467244706,"answer_id":38111938,"question_id":38098471,"body_markdown":"`HttpClient` already handles TLS for you.  This is documented:\r\n\r\nhttp://hc.apache.org/httpclient-3.x/sslguide.html\r\n\r\n&gt; HttpClient provides full support for HTTP over Secure Sockets Layer (SSL) or IETF Transport Layer Security (TLS) protocols by leveraging the  Java Secure Socket Extension (JSSE). JSSE has been integrated into the Java 2 platform as of version 1.4 and works with HttpClient out of the box.\r\n\r\nAll you have to do is make sure your `targetURL` is using `https://` instead of `http://`, then `HttpClient` handles the rest for you. ","title":"Enable TLS in HTTP client with Post request","body":"<p><code>HttpClient</code> already handles TLS for you.  This is documented:</p>\n\n<p><a href=\"http://hc.apache.org/httpclient-3.x/sslguide.html\" rel=\"nofollow\">http://hc.apache.org/httpclient-3.x/sslguide.html</a></p>\n\n<blockquote>\n  <p>HttpClient provides full support for HTTP over Secure Sockets Layer (SSL) or IETF Transport Layer Security (TLS) protocols by leveraging the  Java Secure Socket Extension (JSSE). JSSE has been integrated into the Java 2 platform as of version 1.4 and works with HttpClient out of the box.</p>\n</blockquote>\n\n<p>All you have to do is make sure your <code>targetURL</code> is using <code>https://</code> instead of <code>http://</code>, then <code>HttpClient</code> handles the rest for you. </p>\n"},{"tags":[],"owner":{"account_id":7635211,"reputation":81,"user_id":5788964,"display_name":"Pekmezli D&#252;r&#252;m"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640084089,"creation_date":1640084089,"answer_id":70434308,"question_id":38098471,"body_markdown":"Forget HttpClient. Use **javax.net.ssl.HttpsURLConnection**. \r\n\r\n    String myResponse = null;\r\n    URL url = new URL(targetURL);\r\n    HttpsURLConnection con = (HttpsURLConnection) url.openConnection();\r\n    \r\n    con.setRequestProperty(&quot;Content-Type&quot;, &quot;text/xml; characterset=ISO-8859-1&quot;);\r\n    con.setRequestProperty(&quot;SOAPAction&quot;, &quot;\\&quot;\\&quot;&quot;);\r\n    \r\n    con.setRequestMethod(&quot;POST&quot;);\t\t\r\n    con.setDoInput(true);\r\n    con.setDoOutput(true);\t\t\r\n    con.setSSLSocketFactory(My_Lovely_CertificateHelper.getSslSocketFactory());\r\n    con.connect();\r\n    \r\n    OutputStream os = con.getOutputStream();\r\n    OutputStreamWriter osw = new OutputStreamWriter(os, &quot;ISO-8859-1&quot;);\r\n    osw.write(req);\r\n    osw.flush();\r\n    osw.close();\r\n    \r\n    InputStream is = null;\r\n    if (con.getResponseCode() &lt; HttpsURLConnection.HTTP_BAD_REQUEST) {\r\n    \tis = con.getInputStream();\r\n    } else {\r\n    \tis = con.getErrorStream();\r\n    }\r\n    InputStreamReader isr = new InputStreamReader(is, &quot;ISO-8859-1&quot;);\r\n    \r\n    int read = -1;\r\n    char[] buff = new char[1024];\r\n    StringBuilder sb = new StringBuilder();\r\n    \r\n    while ((read = isr.read(buff)) != -1) {\r\n    \tsb.append(buff, 0, read);\r\n    }\r\n    myResponse = sb.toString();\r\n    return myResponse;\t\t\r\n\r\n********************\r\n\r\ngetSslSocketFactory()\r\n\r\n    public static SSLSocketFactory getSslSocketFactory() throws Exception {\r\n    \t\tSSLContext sc = SSLContext.getInstance(&quot;TLSv1.2&quot;);\r\n    \t\tKeyManagerFactory kmf = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\r\n    \t\tString trustStorePath = getcertPath();  //&quot;user.dir&quot; + &quot;\\ohHappyDays.jks&quot;;\r\n    \t\tString password = &quot;finallyFoundLoveIn2021&quot;;\r\n    \t\tKeyStore ks = KeyStore.getInstance(KeyStore.getDefaultType());\r\n    \t\tks.load(new FileInputStream(trustStorePath), password.toCharArray());\r\n    \t\tkmf.init(ks, password.toCharArray());\r\n    \t\tsc.init(kmf.getKeyManagers(), (TrustManager[]) null, (SecureRandom) null);\r\n    \t\treturn sc.getSocketFactory();\r\n    }\r\n\r\n","title":"Enable TLS in HTTP client with Post request","body":"<p>Forget HttpClient. Use <strong>javax.net.ssl.HttpsURLConnection</strong>.</p>\n<pre><code>String myResponse = null;\nURL url = new URL(targetURL);\nHttpsURLConnection con = (HttpsURLConnection) url.openConnection();\n\ncon.setRequestProperty(&quot;Content-Type&quot;, &quot;text/xml; characterset=ISO-8859-1&quot;);\ncon.setRequestProperty(&quot;SOAPAction&quot;, &quot;\\&quot;\\&quot;&quot;);\n\ncon.setRequestMethod(&quot;POST&quot;);       \ncon.setDoInput(true);\ncon.setDoOutput(true);      \ncon.setSSLSocketFactory(My_Lovely_CertificateHelper.getSslSocketFactory());\ncon.connect();\n\nOutputStream os = con.getOutputStream();\nOutputStreamWriter osw = new OutputStreamWriter(os, &quot;ISO-8859-1&quot;);\nosw.write(req);\nosw.flush();\nosw.close();\n\nInputStream is = null;\nif (con.getResponseCode() &lt; HttpsURLConnection.HTTP_BAD_REQUEST) {\n    is = con.getInputStream();\n} else {\n    is = con.getErrorStream();\n}\nInputStreamReader isr = new InputStreamReader(is, &quot;ISO-8859-1&quot;);\n\nint read = -1;\nchar[] buff = new char[1024];\nStringBuilder sb = new StringBuilder();\n\nwhile ((read = isr.read(buff)) != -1) {\n    sb.append(buff, 0, read);\n}\nmyResponse = sb.toString();\nreturn myResponse;      \n</code></pre>\n<hr />\n<p>getSslSocketFactory()</p>\n<pre><code>public static SSLSocketFactory getSslSocketFactory() throws Exception {\n        SSLContext sc = SSLContext.getInstance(&quot;TLSv1.2&quot;);\n        KeyManagerFactory kmf = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\n        String trustStorePath = getcertPath();  //&quot;user.dir&quot; + &quot;\\ohHappyDays.jks&quot;;\n        String password = &quot;finallyFoundLoveIn2021&quot;;\n        KeyStore ks = KeyStore.getInstance(KeyStore.getDefaultType());\n        ks.load(new FileInputStream(trustStorePath), password.toCharArray());\n        kmf.init(ks, password.toCharArray());\n        sc.init(kmf.getKeyManagers(), (TrustManager[]) null, (SecureRandom) null);\n        return sc.getSocketFactory();\n}\n</code></pre>\n"}],"owner":{"account_id":2453537,"reputation":31,"user_id":2139249,"display_name":"KJK"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5880,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1640084089,"creation_date":1467200355,"question_id":38098471,"body_markdown":"I want to add TLS 1.2 to the below code, Tried by creating socket but no luck. Can someone help on it ? Can we add it after creating a client ?\r\n\r\n      private static int executeSOAPRequest(String req, String targetURL)\r\n\t\t\tthrows Exception {\r\n\t\tPostMethod post = new PostMethod(targetURL);\r\n\t\tpost.setRequestBody(req);\r\n\t\tpost.setRequestHeader(&quot;Content-type&quot;,\r\n\t\t\t\t&quot;text/xml; characterset=ISO-8859-1&quot;);\r\n\t\tpost.setRequestHeader(&quot;SOAPAction&quot;, &quot;\\&quot;\\&quot;&quot;);\r\n\r\n\t\t// prepare HTTP Client\r\n\t\tHttpClient client = new HttpClient();\r\n\t\tclient.getParams().setParameter(&quot;SOAPAction&quot;, &quot;\\&quot;\\&quot;&quot;);\r\n\t\r\n\t\t// Post the request\r\n\t\tint respCode = client.executeMethod(post);\r\n        System.out.println(post.getResponseBodyAsString());\r\n\t\t// If response is not success\r\n\t\tif (respCode != 200)\r\n\t\t\tthrow new Exception(&quot;Executing SOAP request has failed.&quot;);\r\n\t\t// Convert the response into NOM XML\r\n\t\tint resp = 0;\r\n\t\tDocument doc = nomDocPool.lendDocument();\r\n\t\ttry {\r\n\t\t\tresp = doc.parseString(post.getResponseBodyAsString());\r\n\t\t\tnomDocPool.returnDocument(doc);\r\n\t\t} catch (XMLException e) {\r\n\t\t\tnomDocPool.returnDocument(doc);\r\n\t\t\t//logger.error(&quot;Exception while generating SAML : &quot;\r\n\t\t\t\t\t//+ e);\r\n\t\t\tthrow e;\r\n\t\t}\r\n    System.out.println(&quot;resp: &quot;+resp);\r\n\t\treturn resp;\r\n\t}\r\n","title":"Enable TLS in HTTP client with Post request","body":"<p>I want to add TLS 1.2 to the below code, Tried by creating socket but no luck. Can someone help on it ? Can we add it after creating a client ?</p>\n\n<pre><code>  private static int executeSOAPRequest(String req, String targetURL)\n        throws Exception {\n    PostMethod post = new PostMethod(targetURL);\n    post.setRequestBody(req);\n    post.setRequestHeader(\"Content-type\",\n            \"text/xml; characterset=ISO-8859-1\");\n    post.setRequestHeader(\"SOAPAction\", \"\\\"\\\"\");\n\n    // prepare HTTP Client\n    HttpClient client = new HttpClient();\n    client.getParams().setParameter(\"SOAPAction\", \"\\\"\\\"\");\n\n    // Post the request\n    int respCode = client.executeMethod(post);\n    System.out.println(post.getResponseBodyAsString());\n    // If response is not success\n    if (respCode != 200)\n        throw new Exception(\"Executing SOAP request has failed.\");\n    // Convert the response into NOM XML\n    int resp = 0;\n    Document doc = nomDocPool.lendDocument();\n    try {\n        resp = doc.parseString(post.getResponseBodyAsString());\n        nomDocPool.returnDocument(doc);\n    } catch (XMLException e) {\n        nomDocPool.returnDocument(doc);\n        //logger.error(\"Exception while generating SAML : \"\n                //+ e);\n        throw e;\n    }\nSystem.out.println(\"resp: \"+resp);\n    return resp;\n}\n</code></pre>\n"},{"tags":["java","file","encoding"],"comments":[{"owner":{"account_id":1718670,"reputation":4778,"user_id":1575188,"display_name":"fantaghirocco"},"score":0,"creation_date":1640085893,"post_id":70434235,"comment_id":124506731,"body_markdown":"is there any reason why you&#39;re using *Modified UTF-8*?","body":"is there any reason why you&#39;re using <i>Modified UTF-8</i>?"},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1640088228,"post_id":70434235,"comment_id":124507576,"body_markdown":"You didn&#39;t say, but I bet you are running on Windows. [There is a long-known bug on Windows](https://en.wikipedia.org/wiki/Bush_hid_the_facts) which incorrectly interprets certain data patterns as UTF-16, which turns them into gibberish. Try looking at the file with a pre-Unicode function, like `type` in a CMD window.","body":"You didn&#39;t say, but I bet you are running on Windows. <a href=\"https://en.wikipedia.org/wiki/Bush_hid_the_facts\" rel=\"nofollow noreferrer\">There is a long-known bug on Windows</a> which incorrectly interprets certain data patterns as UTF-16, which turns them into gibberish. Try looking at the file with a pre-Unicode function, like <code>type</code> in a CMD window."},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":1,"creation_date":1640089185,"post_id":70434235,"comment_id":124507916,"body_markdown":"I think you are expecting something that isn&#39;t what you are actually doing. You are using a `DataOutputStream`. But you read it as if it was a text file. It isn&#39;t. It&#39;s a binary file. `writeUTF` first writes two bytes which are the string&#39;s length - which isn&#39;t done in a text file.","body":"I think you are expecting something that isn&#39;t what you are actually doing. You are using a <code>DataOutputStream</code>. But you read it as if it was a text file. It isn&#39;t. It&#39;s a binary file. <code>writeUTF</code> first writes two bytes which are the string&#39;s length - which isn&#39;t done in a text file."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1640095577,"post_id":70434235,"comment_id":124510399,"body_markdown":"Do not use DataOutputStream to write a text file.  Use an OutputStreamWriter, or use `Files.newBufferedWriter(Path.of(&quot;D:\\\\Bluej\\\\Files\\\\bOutput2i.txt&quot;))`.","body":"Do not use DataOutputStream to write a text file.  Use an OutputStreamWriter, or use <code>Files.newBufferedWriter(Path.of(&quot;D:\\\\Bluej\\\\Files\\\\bOutput2i&zwnj;&#8203;.txt&quot;))</code>."}],"owner":{"account_id":23616251,"reputation":11,"user_id":17650358,"display_name":"Sarthak"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1640083755,"creation_date":1640083755,"question_id":70434235,"body_markdown":"The following program attempts to encode text passed as parameters to the writeUTF() function and store it in a text file:\r\n```\r\nimport java.io.*;\r\nclass Output2{\r\n    public static void main(String[] args) throws IOException{\r\n        FileOutputStream fos = new FileOutputStream(&quot;D:\\\\Bluej\\\\Files\\\\bOutput2i.txt&quot;);\r\n        DataOutputStream dos = new DataOutputStream(fos);\r\n        //dos.writeUTF(&quot;Hello there&quot;);\r\n        \r\n        //dos.writeUTF(&quot;Hello hi&quot;);\r\n        \r\n        dos.close();\r\n        fos.close();\r\n        System.out.println(&quot;File ended&quot;);\r\n    }\r\n}\r\n```\r\nUncommenting `dos.writeUTF(&quot;Hello hi&quot;)` stores \r\n\r\n&gt; ࠀ效汬⁯楨\r\n\r\nin the bOutput2i.txt file. That is, the text is encoded in the file.\r\n\r\nHowever, if I uncomment `dos.writeUTF(&quot;Hello there&quot;)` instead, the bOutput2i.txt file stores\r\n\r\n&gt;  \u000BHello there\r\n\r\nThat is, the text is not encoded in the file.\r\n\r\nHow does this difference in encoding arise by simply changing the text to be encoded and how can this problem be resolved?","title":"Text not being encoded in text file","body":"<p>The following program attempts to encode text passed as parameters to the writeUTF() function and store it in a text file:</p>\n<pre><code>import java.io.*;\nclass Output2{\n    public static void main(String[] args) throws IOException{\n        FileOutputStream fos = new FileOutputStream(&quot;D:\\\\Bluej\\\\Files\\\\bOutput2i.txt&quot;);\n        DataOutputStream dos = new DataOutputStream(fos);\n        //dos.writeUTF(&quot;Hello there&quot;);\n        \n        //dos.writeUTF(&quot;Hello hi&quot;);\n        \n        dos.close();\n        fos.close();\n        System.out.println(&quot;File ended&quot;);\n    }\n}\n</code></pre>\n<p>Uncommenting <code>dos.writeUTF(&quot;Hello hi&quot;)</code> stores</p>\n<blockquote>\n<p>ࠀ效汬⁯楨</p>\n</blockquote>\n<p>in the bOutput2i.txt file. That is, the text is encoded in the file.</p>\n<p>However, if I uncomment <code>dos.writeUTF(&quot;Hello there&quot;)</code> instead, the bOutput2i.txt file stores</p>\n<blockquote>\n<p>Hello there</p>\n</blockquote>\n<p>That is, the text is not encoded in the file.</p>\n<p>How does this difference in encoding arise by simply changing the text to be encoded and how can this problem be resolved?</p>\n"},{"tags":["java","openapi"],"comments":[{"owner":{"account_id":39252,"reputation":89812,"user_id":113116,"display_name":"Helen"},"score":0,"creation_date":1640082782,"post_id":70433972,"comment_id":124505646,"body_markdown":"Are you writing the OpenAPI file manually (as YAML/JSON) or generating it from source code? Can you post the definitions/code you have have tried so far (even if it did not work), so we have a starting point to help you from?","body":"Are you writing the OpenAPI file manually (as YAML/JSON) or generating it from source code? Can you post the definitions/code you have have tried so far (even if it did not work), so we have a starting point to help you from?"},{"owner":{"account_id":23709276,"reputation":11,"user_id":17731359,"display_name":"Вася Пупкин"},"score":0,"creation_date":1640083469,"post_id":70433972,"comment_id":124505855,"body_markdown":"i try to write openapi file manually.","body":"i try to write openapi file manually."}],"owner":{"account_id":23709276,"reputation":11,"user_id":17731359,"display_name":"Вася Пупкин"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1640083643,"creation_date":1640082472,"question_id":70433972,"body_markdown":"I&#39;m new in OpenApi 3. Would you help me to describe in yaml construction with complex filter? \r\nCurl should look like  /...?page=0&amp;size=10?filter=startDate=2005-08-09;endDate=2006-08-09;status:active,overdue,closed\r\n\r\nfor now i have in path:\r\n\r\n\r\n    parameters:\r\n      - in: query\r\n        name: page\r\n        schema:\r\n          type: integer\r\n        required: true\r\n        description: Number of page to display\r\n      - in: query\r\n        name: size\r\n        schema:\r\n          type: integer\r\n        required: true\r\n        description: The size of page\r\n      - in: query\r\n        name: filter\r\n        schema: ???\r\n","title":"Complex filter in path OpenAPI 3","body":"<p>I'm new in OpenApi 3. Would you help me to describe in yaml construction with complex filter?\nCurl should look like  /...?page=0&amp;size=10?filter=startDate=2005-08-09;endDate=2006-08-09;status:active,overdue,closed</p>\n<p>for now i have in path:</p>\n<pre><code>parameters:\n  - in: query\n    name: page\n    schema:\n      type: integer\n    required: true\n    description: Number of page to display\n  - in: query\n    name: size\n    schema:\n      type: integer\n    required: true\n    description: The size of page\n  - in: query\n    name: filter\n    schema: ???\n</code></pre>\n"},{"tags":["java","networking","process","runtime","port"],"answers":[{"tags":[],"owner":{"account_id":8634690,"reputation":91,"user_id":6465315,"display_name":"RainerZufall"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640083641,"creation_date":1640083641,"answer_id":70434209,"question_id":70432989,"body_markdown":"A program doesn&#39;t use/open a port by default.  \r\nYou (-&gt; a program) need to query the OS to get a (free) port.  \r\nThus there&#39;s no general way to query a running process for its&#39; used port.  \r\nMaybe this tutorial will help you: https://www.baeldung.com/java-free-port","title":"Get the current process port in Java","body":"<p>A program doesn't use/open a port by default.<br />\nYou (-&gt; a program) need to query the OS to get a (free) port.<br />\nThus there's no general way to query a running process for its' used port.<br />\nMaybe this tutorial will help you: <a href=\"https://www.baeldung.com/java-free-port\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-free-port</a></p>\n"}],"owner":{"account_id":18105612,"reputation":171,"user_id":13162956,"display_name":"StackerSapper"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":266,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640083641,"creation_date":1640077985,"question_id":70432989,"body_markdown":"In order to get the process number of my java application I am using:\r\n\r\n    ManagementFactory.getRuntimeMXBean().getName()\r\n\r\nI also need to get the current port number the the process uses, but I can&#39;t seem to find how I can get it from the runtime.\r\n\r\nIs there any way for doing that?","title":"Get the current process port in Java","body":"<p>In order to get the process number of my java application I am using:</p>\n<pre><code>ManagementFactory.getRuntimeMXBean().getName()\n</code></pre>\n<p>I also need to get the current port number the the process uses, but I can't seem to find how I can get it from the runtime.</p>\n<p>Is there any way for doing that?</p>\n"},{"tags":["java","iterator","binary-search-tree"],"comments":[{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1397974647,"post_id":23178926,"comment_id":35449936,"body_markdown":"Can you add an explanation of what &quot;post order&quot; is?","body":"Can you add an explanation of what &quot;post order&quot; is?"},{"owner":{"account_id":4353990,"reputation":21,"user_id":3553265,"display_name":"user3553265"},"score":0,"creation_date":1398001127,"post_id":23178926,"comment_id":35456173,"body_markdown":"I added a description","body":"I added a description"},{"owner":{"account_id":1152371,"reputation":4169,"user_id":1133802,"accept_rate":90,"display_name":"mostruash"},"score":2,"creation_date":1398003001,"post_id":23178926,"comment_id":35456714,"body_markdown":"It&#39;s not possible to have a `next()` function that is `O(1)`. It will be `O(logn)`. Consider in-order traversal. When you first call the `next()`, it has to traverse from the root to the left-most leaf, so it is O(logn).","body":"It&#39;s not possible to have a <code>next()</code> function that is <code>O(1)</code>. It will be <code>O(logn)</code>. Consider in-order traversal. When you first call the <code>next()</code>, it has to traverse from the root to the left-most leaf, so it is O(logn)."},{"owner":{"account_id":4353990,"reputation":21,"user_id":3553265,"display_name":"user3553265"},"score":0,"creation_date":1398008892,"post_id":23178926,"comment_id":35458627,"body_markdown":"You are so right! How would I go about it not being in 0(1)?","body":"You are so right! How would I go about it not being in 0(1)?"},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1398071643,"post_id":23178926,"comment_id":35476166,"body_markdown":"@user3553265 Exactly the same as the Iterator for TreeSet does. ;)","body":"@user3553265 Exactly the same as the Iterator for TreeSet does. ;)"}],"answers":[{"tags":[],"owner":{"account_id":214939,"reputation":18275,"user_id":469220,"accept_rate":75,"display_name":"Vlad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1453326809,"creation_date":1453326809,"answer_id":34911340,"question_id":23178926,"body_markdown":"One fairly general way to achieve this is by starting from the recursive algorithm, and turning it into an iterative algorithm with an explicit stack. Then, you find points in the recursive algorithm where it would output data, and you pause your computation there (in this example, by returning from the `advance()` method, and making sure the stack is left in a good state for the next call to `advance()`).\r\n\r\nMy recursive algorithm (I&#39;m using Java 8 and a different `Node` class, but it&#39;s along the same lines) was:\r\n\r\n    private void postorder(Node&lt;V&gt; node, Consumer&lt;V&gt; c) {\r\n        // step 0\r\n        if (node == null) {\r\n            return; // pop\r\n        }  \r\n        postorder(node.left, onTraverse); // push\r\n        // step 1\r\n        postorder(node.right, onTraverse); // push\r\n        // step 2\r\n        c.accept(node.data);\r\n        // pop\r\n    }\r\n\r\nwhich turns into the following iterator:\r\n\r\n    class PostorderIterator&lt;V&gt; implements Iterator&lt;V&gt; {\r\n\r\n      class Frame {\r\n          int step;\r\n          Node&lt;V&gt; node;\r\n\r\n          public Frame(Node&lt;V&gt; node) {\r\n              this.node = node;\r\n              step = 0;\r\n          }\r\n      }\r\n\r\n      Stack&lt;Frame&gt; st = new Stack&lt;&gt;();\r\n      boolean ready;\r\n      V result;\r\n\r\n      public PostorderIterator(Node&lt;V&gt; node) {\r\n          st.push(new Frame(node));\r\n      }\r\n\r\n      private V advance() {\r\n          while (!st.isEmpty()) {\r\n              Frame f = st.peek();\r\n              switch (f.step) {\r\n                  case 0:\r\n                      if (f.node == null) {\r\n                          st.pop(); // return\r\n                      } else {\r\n                          f.step = 1;\r\n                          st.push(new Frame(f.node.left)); // ~postorder(node.left, ...)\r\n                      }\r\n                      break;\r\n                  case 1:\r\n                      f.step = 2;\r\n                      st.push(new Frame(f.node.right)); // ~postorder(node.right, ...)\r\n                      break;\r\n                  case 2:\r\n                      st.pop(); // ~return\r\n                      return f.node.data;\r\n                  default:\r\n                      throw new RuntimeException();\r\n              }\r\n          }\r\n          return null;\r\n      }\r\n\r\n      @Override\r\n      public void remove() {\r\n          throw new UnsupportedOperationException();\r\n      }\r\n\r\n      @Override\r\n      public boolean hasNext() {\r\n          if (!ready) {\r\n              result = advance();\r\n              ready = true;\r\n          }\r\n          return result != null;\r\n      }\r\n\r\n      @Override\r\n      public V next() {\r\n          if (!ready) {\r\n              result = advance();\r\n              ready = true;\r\n          }\r\n          if (result == null) {\r\n              throw new NoSuchElementException();\r\n          }\r\n          ready = false;\r\n          return result;\r\n      }\r\n    }\r\n\r\nThis approach might be a bit clunkier than necessary, but having an explicit `Frame` holding your local variables, arguments, and where you are in the code, should be a decent starting point to a cleaner algorithm.","title":"Post-order iterator in trees","body":"<p>One fairly general way to achieve this is by starting from the recursive algorithm, and turning it into an iterative algorithm with an explicit stack. Then, you find points in the recursive algorithm where it would output data, and you pause your computation there (in this example, by returning from the <code>advance()</code> method, and making sure the stack is left in a good state for the next call to <code>advance()</code>).</p>\n\n<p>My recursive algorithm (I'm using Java 8 and a different <code>Node</code> class, but it's along the same lines) was:</p>\n\n<pre><code>private void postorder(Node&lt;V&gt; node, Consumer&lt;V&gt; c) {\n    // step 0\n    if (node == null) {\n        return; // pop\n    }  \n    postorder(node.left, onTraverse); // push\n    // step 1\n    postorder(node.right, onTraverse); // push\n    // step 2\n    c.accept(node.data);\n    // pop\n}\n</code></pre>\n\n<p>which turns into the following iterator:</p>\n\n<pre><code>class PostorderIterator&lt;V&gt; implements Iterator&lt;V&gt; {\n\n  class Frame {\n      int step;\n      Node&lt;V&gt; node;\n\n      public Frame(Node&lt;V&gt; node) {\n          this.node = node;\n          step = 0;\n      }\n  }\n\n  Stack&lt;Frame&gt; st = new Stack&lt;&gt;();\n  boolean ready;\n  V result;\n\n  public PostorderIterator(Node&lt;V&gt; node) {\n      st.push(new Frame(node));\n  }\n\n  private V advance() {\n      while (!st.isEmpty()) {\n          Frame f = st.peek();\n          switch (f.step) {\n              case 0:\n                  if (f.node == null) {\n                      st.pop(); // return\n                  } else {\n                      f.step = 1;\n                      st.push(new Frame(f.node.left)); // ~postorder(node.left, ...)\n                  }\n                  break;\n              case 1:\n                  f.step = 2;\n                  st.push(new Frame(f.node.right)); // ~postorder(node.right, ...)\n                  break;\n              case 2:\n                  st.pop(); // ~return\n                  return f.node.data;\n              default:\n                  throw new RuntimeException();\n          }\n      }\n      return null;\n  }\n\n  @Override\n  public void remove() {\n      throw new UnsupportedOperationException();\n  }\n\n  @Override\n  public boolean hasNext() {\n      if (!ready) {\n          result = advance();\n          ready = true;\n      }\n      return result != null;\n  }\n\n  @Override\n  public V next() {\n      if (!ready) {\n          result = advance();\n          ready = true;\n      }\n      if (result == null) {\n          throw new NoSuchElementException();\n      }\n      ready = false;\n      return result;\n  }\n}\n</code></pre>\n\n<p>This approach might be a bit clunkier than necessary, but having an explicit <code>Frame</code> holding your local variables, arguments, and where you are in the code, should be a decent starting point to a cleaner algorithm.</p>\n"},{"tags":[],"owner":{"account_id":14640175,"reputation":21,"user_id":10572975,"display_name":"Jianfei Hua"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1540789873,"creation_date":1540789873,"answer_id":53039065,"question_id":23178926,"body_markdown":"I googled for a binary tree postorder iterator implementation but could not find a good one. So I implemented mine using two stacks.\r\n\r\n    public class BinaryTreePostorderIterator implements Iterator&lt;Integer&gt; {\r\n    private TreeNode root;\r\n    private Stack&lt;TreeNode&gt; nodes;\r\n    private Stack&lt;Boolean&gt; expanded;\r\n    public BinaryTreePostorderIterator(TreeNode root) {\r\n        this.root = root;\r\n        nodes = new Stack&lt;&gt;();\r\n        expanded = new Stack&lt;&gt;();\r\n        if (root != null) {\r\n            nodes.push(root);\r\n            expanded.push(false);\r\n        }\r\n    }\r\n    @Override\r\n    public Integer next() {\r\n        if (!hasNext()) {\r\n            throw new NoSuchElementException(&quot;End reached&quot;);\r\n        }\r\n        expanded.pop();\r\n        return nodes.pop().val;\r\n    }\r\n\r\n    @Override\r\n    public boolean hasNext() {\r\n        if (nodes.isEmpty()) {\r\n            return false;\r\n        }\r\n        while (!expanded.peek()) {\r\n            expanded.pop();\r\n            expanded.push(true);\r\n            TreeNode node = nodes.peek();\r\n            if (node.right != null) {\r\n                nodes.push(node.right);\r\n                expanded.push(false);\r\n            }\r\n            if (node.left != null) {\r\n                nodes.push(node.left);\r\n                expanded.push(false);\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        TreeNode root = new TreeNode(5);\r\n        root.left = new TreeNode(3);\r\n        root.left.right = new TreeNode(4);\r\n        root.left.left = new TreeNode(2);\r\n        root.right = new TreeNode(7);\r\n        root.right.right = new TreeNode(8);\r\n        root.right.left = new TreeNode(6);\r\n\r\n        BinaryTreePostorderIterator pi = new BinaryTreePostorderIterator(root);\r\n        while (pi.hasNext()) {\r\n            System.out.println(pi.next());\r\n        }\r\n    }\r\n}\r\n\r\n\r\n","title":"Post-order iterator in trees","body":"<p>I googled for a binary tree postorder iterator implementation but could not find a good one. So I implemented mine using two stacks.</p>\n\n<pre><code>public class BinaryTreePostorderIterator implements Iterator&lt;Integer&gt; {\nprivate TreeNode root;\nprivate Stack&lt;TreeNode&gt; nodes;\nprivate Stack&lt;Boolean&gt; expanded;\npublic BinaryTreePostorderIterator(TreeNode root) {\n    this.root = root;\n    nodes = new Stack&lt;&gt;();\n    expanded = new Stack&lt;&gt;();\n    if (root != null) {\n        nodes.push(root);\n        expanded.push(false);\n    }\n}\n@Override\npublic Integer next() {\n    if (!hasNext()) {\n        throw new NoSuchElementException(\"End reached\");\n    }\n    expanded.pop();\n    return nodes.pop().val;\n}\n\n@Override\npublic boolean hasNext() {\n    if (nodes.isEmpty()) {\n        return false;\n    }\n    while (!expanded.peek()) {\n        expanded.pop();\n        expanded.push(true);\n        TreeNode node = nodes.peek();\n        if (node.right != null) {\n            nodes.push(node.right);\n            expanded.push(false);\n        }\n        if (node.left != null) {\n            nodes.push(node.left);\n            expanded.push(false);\n        }\n    }\n    return true;\n}\n\npublic static void main(String[] args) {\n    TreeNode root = new TreeNode(5);\n    root.left = new TreeNode(3);\n    root.left.right = new TreeNode(4);\n    root.left.left = new TreeNode(2);\n    root.right = new TreeNode(7);\n    root.right.right = new TreeNode(8);\n    root.right.left = new TreeNode(6);\n\n    BinaryTreePostorderIterator pi = new BinaryTreePostorderIterator(root);\n    while (pi.hasNext()) {\n        System.out.println(pi.next());\n    }\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":560191,"reputation":1880,"user_id":922340,"display_name":"Moshe Bixenshpaner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596814601,"creation_date":1596813486,"answer_id":63304648,"question_id":23178926,"body_markdown":"I just played a bit with post order iterator..\r\nThis is what I&#39;ve come up with:\r\n\r\n```\r\n    class PostOrderIterator\r\n    implements Iterator&lt;T&gt; {\r\n\r\n        private Stack&lt;Node&lt;T&gt;&gt; stack;\r\n        private Node&lt;T&gt; prev;\r\n\r\n        public PostOrderIterator() {\r\n            this.stack = new Stack&lt;&gt;();\r\n            recurse(root);\r\n            this.prev = this.stack.peek();\r\n        }\r\n\r\n        private void recurse(Node&lt;T&gt; node) {\r\n            if(node == null) {\r\n                return;\r\n            }\r\n\r\n            while(node != null) {\r\n                stack.push(node);\r\n                node = node.left;\r\n            }\r\n            recurse(stack.peek().right);\r\n        }\r\n\r\n        @Override\r\n        public boolean hasNext() {\r\n            return !stack.isEmpty();\r\n        }\r\n\r\n        @Override\r\n        public T next() {\r\n            if(stack.peek().right != this.prev) {\r\n                recurse(stack.peek().right);\r\n            }\r\n\r\n            Node&lt;T&gt; next = stack.pop();\r\n            this.prev = next;\r\n            return next.value;\r\n        }\r\n    }\r\n```\r\n\r\nBasically, the main idea is that you should think how the initialization process puts the first item to print on the top of the stack, while the rest of the stack follow the nodes that would have been touched by the recursion. The rest would just then become a lot easier to nail.\r\n\r\nAlso, from design perspective, `PostOrderIterator` is an internal class exposed via some factory method of the tree class as an `Iterator&lt;T&gt;`.","title":"Post-order iterator in trees","body":"<p>I just played a bit with post order iterator..\nThis is what I've come up with:</p>\n<pre><code>    class PostOrderIterator\n    implements Iterator&lt;T&gt; {\n\n        private Stack&lt;Node&lt;T&gt;&gt; stack;\n        private Node&lt;T&gt; prev;\n\n        public PostOrderIterator() {\n            this.stack = new Stack&lt;&gt;();\n            recurse(root);\n            this.prev = this.stack.peek();\n        }\n\n        private void recurse(Node&lt;T&gt; node) {\n            if(node == null) {\n                return;\n            }\n\n            while(node != null) {\n                stack.push(node);\n                node = node.left;\n            }\n            recurse(stack.peek().right);\n        }\n\n        @Override\n        public boolean hasNext() {\n            return !stack.isEmpty();\n        }\n\n        @Override\n        public T next() {\n            if(stack.peek().right != this.prev) {\n                recurse(stack.peek().right);\n            }\n\n            Node&lt;T&gt; next = stack.pop();\n            this.prev = next;\n            return next.value;\n        }\n    }\n</code></pre>\n<p>Basically, the main idea is that you should think how the initialization process puts the first item to print on the top of the stack, while the rest of the stack follow the nodes that would have been touched by the recursion. The rest would just then become a lot easier to nail.</p>\n<p>Also, from design perspective, <code>PostOrderIterator</code> is an internal class exposed via some factory method of the tree class as an <code>Iterator&lt;T&gt;</code>.</p>\n"}],"owner":{"account_id":4353990,"reputation":21,"user_id":3553265,"display_name":"user3553265"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7065,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1640083590,"creation_date":1397972876,"question_id":23178926,"body_markdown":"I am trying to create an `Iterator` implementation for post-order and I am in a slump. I was able to get in-order and pre-order implementations but I can&#39;t seem to get a post-order. If you guys can point me in the right direction and give me some tips, that would be amazing.\r\n\r\nHere&#39;s my in-order class:\r\n\r\n    public class InOrderIterator&lt;T&gt; implements Iterator&lt;T&gt; {\r\n    \r\n    \tprivate final Deque&lt;BinaryTreeNode&lt;T&gt;&gt; stack;\r\n    \tprivate BinaryTreeNode&lt;T&gt; current;\r\n    \r\n    \tpublic InOrderIterator(BinaryTreeNode&lt;T&gt; root){\r\n    \t\tstack = new LinkedList&lt;BinaryTreeNode&lt;T&gt;&gt;();\r\n    \t\tthis.current = root;\r\n    \t}\r\n    \r\n    \t@Override\r\n        public boolean hasNext() {\r\n            return (!stack.isEmpty() || current != null);\r\n        }\r\n    \t\r\n    \t@Override\r\n    \tpublic T next() {\r\n            while (current != null) {\r\n                stack.push(current);\r\n                if (current.hasLeftChild())\r\n                \tcurrent = current.getLeftChild();\r\n                else\r\n                \tcurrent = null;\r\n            }\r\n    \r\n            current = stack.pop();\r\n            BinaryTreeNode&lt;T&gt; node = current;\r\n            if (current.hasRightChild())\r\n            \tcurrent = current.getRightChild();\r\n            else\r\n            \tcurrent = null;\r\n    \r\n            return node.getData();\r\n        }\r\n    \r\n    \t@Override\r\n    \tpublic void remove() {\r\n    \t\tthrow new UnsupportedOperationException();\r\n    \t}\r\n    \r\n    }\r\n\r\n Here&#39;s a description of pre-, in-, and post-order:\r\n\r\n**Pre-order**\r\n\r\n 1. Visit the root.\r\n 2. Traverse the left subtree.\r\n 3. Traverse the right subtree.\r\n\r\n**In-order**\r\n\r\n 1. Traverse the left subtree.\r\n 2. Visit root.\r\n 3. Traverse the right subtree.\r\n\r\n**Post-order**\r\n\r\n 1. Traverse the left subtree.\r\n 2. Traverse the right subtree.\r\n 3. Visit the root.\r\n\r\nhttp://en.wikipedia.org/wiki/Tree_traversal#Types\r\n\r\n","title":"Post-order iterator in trees","body":"<p>I am trying to create an <code>Iterator</code> implementation for post-order and I am in a slump. I was able to get in-order and pre-order implementations but I can't seem to get a post-order. If you guys can point me in the right direction and give me some tips, that would be amazing.</p>\n\n<p>Here's my in-order class:</p>\n\n<pre><code>public class InOrderIterator&lt;T&gt; implements Iterator&lt;T&gt; {\n\n    private final Deque&lt;BinaryTreeNode&lt;T&gt;&gt; stack;\n    private BinaryTreeNode&lt;T&gt; current;\n\n    public InOrderIterator(BinaryTreeNode&lt;T&gt; root){\n        stack = new LinkedList&lt;BinaryTreeNode&lt;T&gt;&gt;();\n        this.current = root;\n    }\n\n    @Override\n    public boolean hasNext() {\n        return (!stack.isEmpty() || current != null);\n    }\n\n    @Override\n    public T next() {\n        while (current != null) {\n            stack.push(current);\n            if (current.hasLeftChild())\n                current = current.getLeftChild();\n            else\n                current = null;\n        }\n\n        current = stack.pop();\n        BinaryTreeNode&lt;T&gt; node = current;\n        if (current.hasRightChild())\n            current = current.getRightChild();\n        else\n            current = null;\n\n        return node.getData();\n    }\n\n    @Override\n    public void remove() {\n        throw new UnsupportedOperationException();\n    }\n\n}\n</code></pre>\n\n<p>Here's a description of pre-, in-, and post-order:</p>\n\n<p><strong>Pre-order</strong></p>\n\n<ol>\n<li>Visit the root.</li>\n<li>Traverse the left subtree.</li>\n<li>Traverse the right subtree.</li>\n</ol>\n\n<p><strong>In-order</strong></p>\n\n<ol>\n<li>Traverse the left subtree.</li>\n<li>Visit root.</li>\n<li>Traverse the right subtree.</li>\n</ol>\n\n<p><strong>Post-order</strong></p>\n\n<ol>\n<li>Traverse the left subtree.</li>\n<li>Traverse the right subtree.</li>\n<li>Visit the root.</li>\n</ol>\n\n<p><a href=\"http://en.wikipedia.org/wiki/Tree_traversal#Types\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Tree_traversal#Types</a></p>\n"},{"tags":["java","unit-testing","junit","kotlin","annotation-processing"],"answers":[{"tags":[],"owner":{"account_id":1806762,"reputation":4128,"user_id":1643723,"display_name":"user1643723"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1484119383,"creation_date":1484119383,"answer_id":41584941,"question_id":41528471,"body_markdown":"Kotlin integrates with ordinary Java annotation processors by generating &quot;stubs&quot; (empty class carcasses, that have same semantic/methods/fields as target Kotlin classes) &lt;sup&gt;[[1]](https://blog.jetbrains.com/kotlin/2015/06/better-annotation-processing-supporting-stubs-in-kapt/)&lt;/sup&gt;. This means, that unit-testing Java annotation processors with `kapt` is essentially impossible — even if you somehow integrate the Kotlin tooling in your testing flow, you will end up testing `kapt` itself, rather then your own code.\r\n\r\nIf you want to ensure, that your annotation processing code works with Kotlin-generated stubs, just generate all possible invariants that may be produced by stub generator, and use those as test subjects like any ordinary Java code.","title":"Java annotation processor - Annotated Kotlin classes unit tests","body":"<p>Kotlin integrates with ordinary Java annotation processors by generating \"stubs\" (empty class carcasses, that have same semantic/methods/fields as target Kotlin classes) <sup><a href=\"https://blog.jetbrains.com/kotlin/2015/06/better-annotation-processing-supporting-stubs-in-kapt/\" rel=\"nofollow noreferrer\">[1]</a></sup>. This means, that unit-testing Java annotation processors with <code>kapt</code> is essentially impossible — even if you somehow integrate the Kotlin tooling in your testing flow, you will end up testing <code>kapt</code> itself, rather then your own code.</p>\n\n<p>If you want to ensure, that your annotation processing code works with Kotlin-generated stubs, just generate all possible invariants that may be produced by stub generator, and use those as test subjects like any ordinary Java code.</p>\n"},{"tags":[],"owner":{"account_id":8951272,"reputation":1,"user_id":6677204,"display_name":"Tristan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640083447,"creation_date":1640083447,"answer_id":70434176,"question_id":41528471,"body_markdown":"Old question but [kotlin-compile-testing](https://github.com/tschuchortdev/kotlin-compile-testing) is now available and widely used for this usage. It supports java and kotlin files as well.","title":"Java annotation processor - Annotated Kotlin classes unit tests","body":"<p>Old question but <a href=\"https://github.com/tschuchortdev/kotlin-compile-testing\" rel=\"nofollow noreferrer\">kotlin-compile-testing</a> is now available and widely used for this usage. It supports java and kotlin files as well.</p>\n"}],"owner":{"account_id":6480158,"reputation":143,"user_id":5017462,"display_name":"Robot Monkey"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1020,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":41584941,"answer_count":2,"score":5,"last_activity_date":1640083447,"creation_date":1483838577,"question_id":41528471,"body_markdown":"I have an annotation processor [library][1] that I would like to get working for Kotlin, however I have hit a snag in terms of my unit testing. I would really appreciate if someone could give me some advice.\r\n\r\nMy current unit testing implementation uses Google&#39;s [compile-testing][2] library. I create input and output classes and store them in the resources directory. Then during the unit test, the compile-testing library compiles the input java class, executes the annotation processor and then compares the generated classes against the expected output class from the resources directory.\r\n\r\nHere is an example (from my project) of what I am referring to:\r\n[Unit test class][3]\r\n[Resources (Input and expected output classes][4]\r\n\r\nThis is working great for all my current java based unit tests. However when I attempt to write some tests using Kotlin classes, my test fails to load the class.\r\n\r\nI believe this is due to the compile-testing library being first and foremost a Java specific library (I don&#39;t see any mention of Kotlin on their project)\r\n\r\nAt the moment I get the following issue:\r\n\r\n    java.lang.IllegalArgumentException: Compilation unit is not of SOURCE kind: &quot;/C:/dev/gsonpath/gsonpath-compiler/build/resources/test/adapter/auto/field_types/primitives/valid/TestValidPrimitives.kt&quot;\r\n    \r\n    at com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:137)\r\n    at com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:107)\r\n    at com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:64)\r\n    at com.google.testing.compile.Compilation.compile(Compilation.java:69)\r\n    at com.google.testing.compile.JavaSourcesSubject$CompilationClause.compilesWithoutError(JavaSourcesSubject.java:281)\r\n\r\nThe problem is fairly obvious that the incorrect compiler is being used. The exception itself is thrown when my file extension is not &#39;.java&#39;. If I attempt to load a Kotlin class with the &#39;.java&#39; file extension, it doesn&#39;t work since it is not correct Java syntax.\r\n\r\nHas anyone come across this issue before and solved it? I have had a look at a few other annotation processors (such as [DBFlow][5]), and they do not write unit tests in this manner.\r\n\r\nSince Kotlin is only recently dabbling in annotation processing, perhaps I am the first to have this problem?\r\n\r\n  [1]: https://github.com/LachlanMcKee/gsonpath\r\n  [2]: https://github.com/google/compile-testing\r\n  [3]: https://github.com/LachlanMcKee/gsonpath/blob/feature/updated-compiler-to-use-kotlin/gsonpath-compiler/src/test/java/gsonpath/generator/adapter/auto/FieldTypesTest.kt\r\n  [4]: https://github.com/LachlanMcKee/gsonpath/tree/feature/updated-compiler-to-use-kotlin/gsonpath-compiler/src/test/resources/adapter/auto/field_types/primitives/valid\r\n  [5]: https://github.com/Raizlabs/DBFlow/tree/master/dbflow-processor/src/test/java/com/raizlabs/android/dbflow/processor/test","title":"Java annotation processor - Annotated Kotlin classes unit tests","body":"<p>I have an annotation processor <a href=\"https://github.com/LachlanMcKee/gsonpath\" rel=\"noreferrer\">library</a> that I would like to get working for Kotlin, however I have hit a snag in terms of my unit testing. I would really appreciate if someone could give me some advice.</p>\n\n<p>My current unit testing implementation uses Google's <a href=\"https://github.com/google/compile-testing\" rel=\"noreferrer\">compile-testing</a> library. I create input and output classes and store them in the resources directory. Then during the unit test, the compile-testing library compiles the input java class, executes the annotation processor and then compares the generated classes against the expected output class from the resources directory.</p>\n\n<p>Here is an example (from my project) of what I am referring to:\n<a href=\"https://github.com/LachlanMcKee/gsonpath/blob/feature/updated-compiler-to-use-kotlin/gsonpath-compiler/src/test/java/gsonpath/generator/adapter/auto/FieldTypesTest.kt\" rel=\"noreferrer\">Unit test class</a>\n<a href=\"https://github.com/LachlanMcKee/gsonpath/tree/feature/updated-compiler-to-use-kotlin/gsonpath-compiler/src/test/resources/adapter/auto/field_types/primitives/valid\" rel=\"noreferrer\">Resources (Input and expected output classes</a></p>\n\n<p>This is working great for all my current java based unit tests. However when I attempt to write some tests using Kotlin classes, my test fails to load the class.</p>\n\n<p>I believe this is due to the compile-testing library being first and foremost a Java specific library (I don't see any mention of Kotlin on their project)</p>\n\n<p>At the moment I get the following issue:</p>\n\n<pre><code>java.lang.IllegalArgumentException: Compilation unit is not of SOURCE kind: \"/C:/dev/gsonpath/gsonpath-compiler/build/resources/test/adapter/auto/field_types/primitives/valid/TestValidPrimitives.kt\"\n\nat com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:137)\nat com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:107)\nat com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:64)\nat com.google.testing.compile.Compilation.compile(Compilation.java:69)\nat com.google.testing.compile.JavaSourcesSubject$CompilationClause.compilesWithoutError(JavaSourcesSubject.java:281)\n</code></pre>\n\n<p>The problem is fairly obvious that the incorrect compiler is being used. The exception itself is thrown when my file extension is not '.java'. If I attempt to load a Kotlin class with the '.java' file extension, it doesn't work since it is not correct Java syntax.</p>\n\n<p>Has anyone come across this issue before and solved it? I have had a look at a few other annotation processors (such as <a href=\"https://github.com/Raizlabs/DBFlow/tree/master/dbflow-processor/src/test/java/com/raizlabs/android/dbflow/processor/test\" rel=\"noreferrer\">DBFlow</a>), and they do not write unit tests in this manner.</p>\n\n<p>Since Kotlin is only recently dabbling in annotation processing, perhaps I am the first to have this problem?</p>\n"},{"tags":["java","batik"],"comments":[{"owner":{"account_id":3482475,"reputation":27230,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":0,"creation_date":1615650191,"post_id":66615175,"comment_id":117759565,"body_markdown":"Why do you need the library? SVG can be rasterized in many ways. Also, does exception depend on a file?","body":"Why do you need the library? SVG can be rasterized in many ways. Also, does exception depend on a file?"},{"owner":{"account_id":1725588,"reputation":5801,"user_id":1580348,"accept_rate":72,"display_name":"user1580348"},"score":0,"creation_date":1615650293,"post_id":66615175,"comment_id":117759597,"body_markdown":"Why are you asking?","body":"Why are you asking?"},{"owner":{"account_id":3482475,"reputation":27230,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":0,"creation_date":1615653965,"post_id":66615175,"comment_id":117760709,"body_markdown":"Sorry, I don&#39;t know this library.","body":"Sorry, I don&#39;t know this library."},{"owner":{"account_id":1852308,"reputation":490,"user_id":1678593,"accept_rate":75,"display_name":"Brian O Carroll"},"score":0,"creation_date":1639996804,"post_id":66615175,"comment_id":124481860,"body_markdown":"Did you ever get this resolved? I have the exact same problem (with a few of the batik sample SVGs). Batik 1.14, Java 8. Thanks","body":"Did you ever get this resolved? I have the exact same problem (with a few of the batik sample SVGs). Batik 1.14, Java 8. Thanks"}],"answers":[{"tags":[],"owner":{"account_id":1852308,"reputation":490,"user_id":1678593,"accept_rate":75,"display_name":"Brian O Carroll"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640082990,"creation_date":1640082286,"answer_id":70433930,"question_id":66615175,"body_markdown":"There is a [discussion here][1] that sheds some more light on this.\r\n\r\n**Workaround 1 - use &quot;one param&quot; stdDeviation in the SVG&#39;s feGaussianBlur.**\r\n\r\nThe specific SVG element that causes this error is the [stdDeviation][2] property of [feGaussianBlur][3]. If two params are provided, it does not work:\r\n\r\n    &lt;feGaussianBlur stdDeviation=&quot;2 3&quot; /&gt; &lt;!-- DOESN&#39;T WORK --&gt;\r\n\r\nHowever, if only one param is specified, it works fine:\r\n\r\n    &lt;feGaussianBlur stdDeviation=&quot;2&quot; /&gt; &lt;!-- WORKS! --&gt;\r\n\r\nThe &quot;two param&quot; version allows different blur to be applied on x and y axes. The &quot;one param&quot; version applies the same blur amount to both x and y.\r\n\r\n**Workaround 2 - Upgrade to Java 9 or higher.**\r\n\r\nIt seems to be a bug with Java 1.7 (and 1.8 in my experience - and possibly others). I can confirm that it is resolved in Java 9 (9.0.4 - Windows).\r\n\r\n  [1]: https://github.com/haraldk/TwelveMonkeys/issues/453\r\n  [2]: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stdDeviation\r\n  [3]: https://developer.mozilla.org/en-US/docs/Web/SVG/Element/feGaussianBlur","title":"Batik 1.14 error when trying to rasterize SVG file","body":"<p>There is a <a href=\"https://github.com/haraldk/TwelveMonkeys/issues/453\" rel=\"nofollow noreferrer\">discussion here</a> that sheds some more light on this.</p>\n<p><strong>Workaround 1 - use &quot;one param&quot; stdDeviation in the SVG's feGaussianBlur.</strong></p>\n<p>The specific SVG element that causes this error is the <a href=\"https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stdDeviation\" rel=\"nofollow noreferrer\">stdDeviation</a> property of <a href=\"https://developer.mozilla.org/en-US/docs/Web/SVG/Element/feGaussianBlur\" rel=\"nofollow noreferrer\">feGaussianBlur</a>. If two params are provided, it does not work:</p>\n<pre><code>&lt;feGaussianBlur stdDeviation=&quot;2 3&quot; /&gt; &lt;!-- DOESN'T WORK --&gt;\n</code></pre>\n<p>However, if only one param is specified, it works fine:</p>\n<pre><code>&lt;feGaussianBlur stdDeviation=&quot;2&quot; /&gt; &lt;!-- WORKS! --&gt;\n</code></pre>\n<p>The &quot;two param&quot; version allows different blur to be applied on x and y axes. The &quot;one param&quot; version applies the same blur amount to both x and y.</p>\n<p><strong>Workaround 2 - Upgrade to Java 9 or higher.</strong></p>\n<p>It seems to be a bug with Java 1.7 (and 1.8 in my experience - and possibly others). I can confirm that it is resolved in Java 9 (9.0.4 - Windows).</p>\n"}],"owner":{"account_id":1725588,"reputation":5801,"user_id":1580348,"accept_rate":72,"display_name":"user1580348"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":271,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640082990,"creation_date":1615649078,"question_id":66615175,"body_markdown":"In Windows 10 x64 with Java 8.281, I have downloaded BATIK 1.14 binaries from:\r\nhttps://xmlgraphics.apache.org/batik/download.html\r\n\r\nIn a Windows command prompt, I tried to rasterize one of the included SVG files, but it did not work:\r\n\r\n&gt; C:\\COMP\\_CLI_Tools\\batik-bin-1.14\\batik-1.14&gt;java -jar\r\n&gt; batik-rasterizer-1.14.jar samples\\textRotateShadows.svg About to\r\n&gt; transcode 1 SVG file(s)\r\n&gt; \r\n&gt; Converting textRotateShadows.svg to samples\\textRotateShadows.png ...\r\n&gt; org.apache.batik.transcoder.TranscoderException: null Enclosed\r\n&gt; Exception: Unable to transform src image\r\n&gt;         at org.apache.batik.transcoder.image.ImageTranscoder.transcode(ImageTranscoder.java:132)\r\n&gt;         at org.apache.batik.transcoder.XMLAbstractTranscoder.transcode(XMLAbstractTranscoder.java:142)\r\n&gt;         at org.apache.batik.transcoder.SVGAbstractTranscoder.transcode(SVGAbstractTranscoder.java:158)\r\n&gt;         at org.apache.batik.apps.rasterizer.SVGConverter.transcode(SVGConverter.java:1008)\r\n&gt;         at org.apache.batik.apps.rasterizer.SVGConverter.execute(SVGConverter.java:719)\r\n&gt;         at org.apache.batik.apps.rasterizer.Main.execute(Main.java:954)\r\n&gt;         at org.apache.batik.apps.rasterizer.Main.main(Main.java:1007) Caused by: java.awt.image.ImagingOpException: Unable to transform src\r\n&gt; image\r\n&gt;         at java.awt.image.AffineTransformOp.filter(AffineTransformOp.java:358)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.AffineRed.genRect(AffineRed.java:193)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.AffineRed.copyData(AffineRed.java:109)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.Any2sRGBRed.copyData(Any2sRGBRed.java:166)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.AbstractRed.getData(AbstractRed.java:523)\r\n&gt;         at org.apache.batik.ext.awt.image.GraphicsUtil.drawImage(GraphicsUtil.java:264)\r\n&gt;         at org.apache.batik.ext.awt.image.GraphicsUtil.drawImage(GraphicsUtil.java:455)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:550)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.filter.GraphicsNodeRed8Bit.genRect(GraphicsNodeRed8Bit.java:141)\r\n&gt;         at org.apache.batik.gvt.filter.GraphicsNodeRed8Bit.copyData(GraphicsNodeRed8Bit.java:117)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.Any2LsRGBRed.copyData(Any2LsRGBRed.java:109)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.GaussianBlurRed8Bit.copyData(GaussianBlurRed8Bit.java:232)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.AbstractRed.getData(AbstractRed.java:523)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.AffineRed.genRect(AffineRed.java:146)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.AffineRed.copyData(AffineRed.java:109)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.Any2sRGBRed.copyData(Any2sRGBRed.java:166)\r\n&gt;         at org.apache.batik.ext.awt.image.GraphicsUtil.drawImage(GraphicsUtil.java:347)\r\n&gt;         at org.apache.batik.ext.awt.image.GraphicsUtil.drawImage(GraphicsUtil.java:455)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:550)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.CanvasGraphicsNode.primitivePaint(CanvasGraphicsNode.java:159)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.filter.GraphicsNodeRed8Bit.genRect(GraphicsNodeRed8Bit.java:141)\r\n&gt;         at org.apache.batik.gvt.filter.GraphicsNodeRed8Bit.copyData(GraphicsNodeRed8Bit.java:117)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.TileCacheRed.genRect(TileCacheRed.java:63)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.AbstractTiledRed.drawBlockInPlace(AbstractTiledRed.java:625)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.AbstractTiledRed.drawBlock(AbstractTiledRed.java:544)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.AbstractTiledRed.copyToRasterByBlocks(AbstractTiledRed.java:430)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.AbstractTiledRed.copyData(AbstractTiledRed.java:297)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.TranslateRed.copyData(TranslateRed.java:105)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\r\n&gt;         at org.apache.batik.gvt.renderer.StaticRenderer.repaint(StaticRenderer.java:393)\r\n&gt;         at org.apache.batik.gvt.renderer.StaticRenderer.repaint(StaticRenderer.java:343)\r\n&gt;         at org.apache.batik.transcoder.image.ImageTranscoder.transcode(ImageTranscoder.java:111)\r\n&gt;         ... 6 more ... error (SVGConverter.error.while.rasterizing.file)","title":"Batik 1.14 error when trying to rasterize SVG file","body":"<p>In Windows 10 x64 with Java 8.281, I have downloaded BATIK 1.14 binaries from:\n<a href=\"https://xmlgraphics.apache.org/batik/download.html\" rel=\"nofollow noreferrer\">https://xmlgraphics.apache.org/batik/download.html</a></p>\n<p>In a Windows command prompt, I tried to rasterize one of the included SVG files, but it did not work:</p>\n<blockquote>\n<p>C:\\COMP_CLI_Tools\\batik-bin-1.14\\batik-1.14&gt;java -jar\nbatik-rasterizer-1.14.jar samples\\textRotateShadows.svg About to\ntranscode 1 SVG file(s)</p>\n<p>Converting textRotateShadows.svg to samples\\textRotateShadows.png ...\norg.apache.batik.transcoder.TranscoderException: null Enclosed\nException: Unable to transform src image\nat org.apache.batik.transcoder.image.ImageTranscoder.transcode(ImageTranscoder.java:132)\nat org.apache.batik.transcoder.XMLAbstractTranscoder.transcode(XMLAbstractTranscoder.java:142)\nat org.apache.batik.transcoder.SVGAbstractTranscoder.transcode(SVGAbstractTranscoder.java:158)\nat org.apache.batik.apps.rasterizer.SVGConverter.transcode(SVGConverter.java:1008)\nat org.apache.batik.apps.rasterizer.SVGConverter.execute(SVGConverter.java:719)\nat org.apache.batik.apps.rasterizer.Main.execute(Main.java:954)\nat org.apache.batik.apps.rasterizer.Main.main(Main.java:1007) Caused by: java.awt.image.ImagingOpException: Unable to transform src\nimage\nat java.awt.image.AffineTransformOp.filter(AffineTransformOp.java:358)\nat org.apache.batik.ext.awt.image.rendered.AffineRed.genRect(AffineRed.java:193)\nat org.apache.batik.ext.awt.image.rendered.AffineRed.copyData(AffineRed.java:109)\nat org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\nat org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\nat org.apache.batik.ext.awt.image.rendered.Any2sRGBRed.copyData(Any2sRGBRed.java:166)\nat org.apache.batik.ext.awt.image.rendered.AbstractRed.getData(AbstractRed.java:523)\nat org.apache.batik.ext.awt.image.GraphicsUtil.drawImage(GraphicsUtil.java:264)\nat org.apache.batik.ext.awt.image.GraphicsUtil.drawImage(GraphicsUtil.java:455)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:550)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.filter.GraphicsNodeRed8Bit.genRect(GraphicsNodeRed8Bit.java:141)\nat org.apache.batik.gvt.filter.GraphicsNodeRed8Bit.copyData(GraphicsNodeRed8Bit.java:117)\nat org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\nat org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\nat org.apache.batik.ext.awt.image.rendered.Any2LsRGBRed.copyData(Any2LsRGBRed.java:109)\nat org.apache.batik.ext.awt.image.rendered.GaussianBlurRed8Bit.copyData(GaussianBlurRed8Bit.java:232)\nat org.apache.batik.ext.awt.image.rendered.AbstractRed.getData(AbstractRed.java:523)\nat org.apache.batik.ext.awt.image.rendered.AffineRed.genRect(AffineRed.java:146)\nat org.apache.batik.ext.awt.image.rendered.AffineRed.copyData(AffineRed.java:109)\nat org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\nat org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\nat org.apache.batik.ext.awt.image.rendered.Any2sRGBRed.copyData(Any2sRGBRed.java:166)\nat org.apache.batik.ext.awt.image.GraphicsUtil.drawImage(GraphicsUtil.java:347)\nat org.apache.batik.ext.awt.image.GraphicsUtil.drawImage(GraphicsUtil.java:455)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:550)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.CanvasGraphicsNode.primitivePaint(CanvasGraphicsNode.java:159)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.filter.GraphicsNodeRed8Bit.genRect(GraphicsNodeRed8Bit.java:141)\nat org.apache.batik.gvt.filter.GraphicsNodeRed8Bit.copyData(GraphicsNodeRed8Bit.java:117)\nat org.apache.batik.ext.awt.image.rendered.TileCacheRed.genRect(TileCacheRed.java:63)\nat org.apache.batik.ext.awt.image.rendered.AbstractTiledRed.drawBlockInPlace(AbstractTiledRed.java:625)\nat org.apache.batik.ext.awt.image.rendered.AbstractTiledRed.drawBlock(AbstractTiledRed.java:544)\nat org.apache.batik.ext.awt.image.rendered.AbstractTiledRed.copyToRasterByBlocks(AbstractTiledRed.java:430)\nat org.apache.batik.ext.awt.image.rendered.AbstractTiledRed.copyData(AbstractTiledRed.java:297)\nat org.apache.batik.ext.awt.image.rendered.TranslateRed.copyData(TranslateRed.java:105)\nat org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\nat org.apache.batik.gvt.renderer.StaticRenderer.repaint(StaticRenderer.java:393)\nat org.apache.batik.gvt.renderer.StaticRenderer.repaint(StaticRenderer.java:343)\nat org.apache.batik.transcoder.image.ImageTranscoder.transcode(ImageTranscoder.java:111)\n... 6 more ... error (SVGConverter.error.while.rasterizing.file)</p>\n</blockquote>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":22365443,"reputation":396,"user_id":16581317,"display_name":"Youssef Idraiss"},"score":0,"creation_date":1640060941,"post_id":70430590,"comment_id":124500037,"body_markdown":"Prog_G i have a reference to the one I&#39;m willing to delete, so I use : departments.remove(department);","body":"Prog_G i have a reference to the one I&#39;m willing to delete, so I use : departments.remove(department);"},{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":1,"creation_date":1640062301,"post_id":70430590,"comment_id":124500271,"body_markdown":"The quick answer is to simply make a new stream again using `stream.flatMap` once the department has been removed, or iterate your employees list and remove them prior to deleting the department (Possible issues with duplicates?).","body":"The quick answer is to simply make a new stream again using <code>stream.flatMap</code> once the department has been removed, or iterate your employees list and remove them prior to deleting the department (Possible issues with duplicates?)."},{"owner":{"account_id":22365443,"reputation":396,"user_id":16581317,"display_name":"Youssef Idraiss"},"score":0,"creation_date":1640062438,"post_id":70430590,"comment_id":124500291,"body_markdown":"@sorifiend that&#39;s exactly what i thought to do, i was wondering if there will be better option, but it doesn&#39;t look so","body":"@sorifiend that&#39;s exactly what i thought to do, i was wondering if there will be better option, but it doesn&#39;t look so"},{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":1,"creation_date":1640062484,"post_id":70430590,"comment_id":124500300,"body_markdown":"If your list is not large then it&#39;s your best bet.","body":"If your list is not large then it&#39;s your best bet."},{"owner":{"account_id":8026267,"reputation":4734,"user_id":6053084,"display_name":"Turo"},"score":0,"creation_date":1640076926,"post_id":70430590,"comment_id":124503567,"body_markdown":"You could write a read-only List-Implementation backed by your Department-List. But there would be probably a bad performance when you access the List per get(index).","body":"You could write a read-only List-Implementation backed by your Department-List. But there would be probably a bad performance when you access the List per get(index)."}],"answers":[{"tags":[],"owner":{"account_id":10481421,"reputation":1559,"user_id":7726319,"accept_rate":0,"display_name":"Prog_G"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640064211,"creation_date":1640061646,"answer_id":70430760,"question_id":70430590,"body_markdown":"There is no direct way to automatically delete the objects from the employee list. You can use one of the below options:\r\n\r\n**Option 1:**\r\nFirst, delete all the employees of the to-be-deleted department and delete the department from the department list.  \r\n\r\n    employees.removeAll(departement2.getEmployeesList());\r\n    departments.remove(departement2);\r\n\r\n**Option 2:**\r\nDelete the department from the department list and then recreate the employee list:\r\n\r\n    departments.remove(departement2);\r\n    employees = departments.stream().flatMap(departement -&gt;departement.getEmployeesList().stream()).collect(Collectors.toList());\r\n\r\n","title":"How to delete children objects in list made by stream.flatMap when parent gets deleted?","body":"<p>There is no direct way to automatically delete the objects from the employee list. You can use one of the below options:</p>\n<p><strong>Option 1:</strong>\nFirst, delete all the employees of the to-be-deleted department and delete the department from the department list.</p>\n<pre><code>employees.removeAll(departement2.getEmployeesList());\ndepartments.remove(departement2);\n</code></pre>\n<p><strong>Option 2:</strong>\nDelete the department from the department list and then recreate the employee list:</p>\n<pre><code>departments.remove(departement2);\nemployees = departments.stream().flatMap(departement -&gt;departement.getEmployeesList().stream()).collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8026267,"reputation":4734,"user_id":6053084,"display_name":"Turo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640082957,"creation_date":1640081961,"answer_id":70433861,"question_id":70430590,"body_markdown":"Just to try it I implemented a generic Type of a List backed by a parent List:\r\n\r\n    public class FlatMapList&lt;C,P&gt; implements List&lt;C&gt;\r\n    {\r\n    \r\n        private Function&lt;P,List&lt;C&gt;&gt; getter;\r\n        private List&lt;P&gt; parents;\r\n    \r\n    \r\n        public FlatMapList(List&lt;P&gt; parents, Function&lt;P,List&lt;C&gt;&gt; getter)\r\n        {\r\n           this.parents = parents;\r\n           this.getter = getter;\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public int size()\r\n        {\r\n            return getList().size();\r\n        }\r\n    \r\n        @Override\r\n        public boolean isEmpty()\r\n        {\r\n            return getList().isEmpty();\r\n        }\r\n    \r\n        @Override\r\n        public boolean contains(Object o)\r\n        {\r\n            return getList().contains(o);\r\n        }\r\n    \r\n        @Override\r\n        public Iterator&lt;C&gt; iterator()\r\n        {\r\n            return getList().iterator();\r\n        }\r\n    \r\n        @Override\r\n        public Object[] toArray()\r\n        {\r\n            return getList().toArray();\r\n        }\r\n    \r\n        @Override\r\n        public &lt;T&gt; T[] toArray(T[] a)\r\n        {\r\n            return getList().toArray(a);\r\n        }\r\n    \r\n        @Override\r\n        public boolean add(C e)\r\n        {\r\n            throw new UnsupportedOperationException(&quot;List is readonly&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public boolean remove(Object o)\r\n        {\r\n            throw new UnsupportedOperationException(&quot;List is readonly&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public boolean containsAll(Collection&lt;?&gt; c)\r\n        {\r\n            throw new UnsupportedOperationException(&quot;List is readonly&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public boolean addAll(Collection&lt;? extends C&gt; c)\r\n        {\r\n            throw new UnsupportedOperationException(&quot;List is readonly&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public boolean addAll(int index, Collection&lt;? extends C&gt; c)\r\n        {\r\n            throw new UnsupportedOperationException(&quot;List is readonly&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public boolean removeAll(Collection&lt;?&gt; c)\r\n        {\r\n            throw new UnsupportedOperationException(&quot;List is readonly&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public boolean retainAll(Collection&lt;?&gt; c)\r\n        {\r\n            throw new UnsupportedOperationException(&quot;List is readonly&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public void clear()\r\n        {\r\n            throw new UnsupportedOperationException(&quot;List is readonly&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public C get(int index)\r\n        {\r\n            return getList().get(index);\r\n        }\r\n    \r\n        @Override\r\n        public C set(int index, C element)\r\n        {\r\n            throw new UnsupportedOperationException(&quot;List is readonly&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public void add(int index, C element)\r\n        {\r\n            throw new UnsupportedOperationException(&quot;List is readonly&quot;);\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public C remove(int index)\r\n        {\r\n            throw new UnsupportedOperationException(&quot;List is readonly&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public int indexOf(Object o)\r\n        {\r\n            return getList().indexOf(o);\r\n        }\r\n    \r\n        @Override\r\n        public int lastIndexOf(Object o)\r\n        {\r\n            return getList().lastIndexOf(o);\r\n        }\r\n    \r\n        @Override\r\n        public ListIterator&lt;C&gt; listIterator()\r\n        {\r\n            return getList().listIterator();\r\n        }\r\n    \r\n        @Override\r\n        public ListIterator&lt;C&gt; listIterator(int index)\r\n        {\r\n            return getList().listIterator(index);\r\n        }\r\n    \r\n        @Override\r\n        public List&lt;C&gt; subList(int fromIndex, int toIndex)\r\n        {\r\n            return getList().subList(fromIndex,toIndex);\r\n        }\r\n    \r\n        @Override\r\n        public String toString( ) {\r\n            return getList().toString();\r\n        }\r\n    \r\n        private List&lt;C&gt; getList() {\r\n            return Collections.unmodifiableList(parents.stream().flatMap(p -&gt;\r\n                this.getter.apply(p).stream()).collect(Collectors.toList()));\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n           Department dep1 = new Department();\r\n           dep1.setName(&quot;D1&quot;);\r\n           dep1.setEmployeesList(Arrays.asList(new Employee(&quot;e1&quot;),new Employee(&quot;e2&quot;)));\r\n           Department dep2 = new Department();\r\n           dep2.setName(&quot;D2&quot;);\r\n           dep2.setEmployeesList(Arrays.asList(new Employee(&quot;e3&quot;),new Employee(&quot;e4&quot;)));\r\n           List&lt;Department&gt; deps = new ArrayList&lt;&gt;(Arrays.asList(dep1,dep2));\r\n    \r\n           // Create a List backed with the parent list and the getter for the children\r\n           List&lt;Employee&gt; employees = new FlatMapList&lt;&gt;(deps,Department::getEmployeesList);\r\n           System.out.println(employees);\r\n           deps.remove(dep1);\r\n           System.out.println(employees);\r\n    \r\n        }\r\n    }\r\n\r\n\r\n**Output**\r\n\r\n    [Employee [name=e1], Employee [name=e2], Employee [name=e3], Employee [name=e4]] \r\n    [Employee [name=e3], Employee [name=e4]]\r\n\r\n","title":"How to delete children objects in list made by stream.flatMap when parent gets deleted?","body":"<p>Just to try it I implemented a generic Type of a List backed by a parent List:</p>\n<pre><code>public class FlatMapList&lt;C,P&gt; implements List&lt;C&gt;\n{\n\n    private Function&lt;P,List&lt;C&gt;&gt; getter;\n    private List&lt;P&gt; parents;\n\n\n    public FlatMapList(List&lt;P&gt; parents, Function&lt;P,List&lt;C&gt;&gt; getter)\n    {\n       this.parents = parents;\n       this.getter = getter;\n\n    }\n\n    @Override\n    public int size()\n    {\n        return getList().size();\n    }\n\n    @Override\n    public boolean isEmpty()\n    {\n        return getList().isEmpty();\n    }\n\n    @Override\n    public boolean contains(Object o)\n    {\n        return getList().contains(o);\n    }\n\n    @Override\n    public Iterator&lt;C&gt; iterator()\n    {\n        return getList().iterator();\n    }\n\n    @Override\n    public Object[] toArray()\n    {\n        return getList().toArray();\n    }\n\n    @Override\n    public &lt;T&gt; T[] toArray(T[] a)\n    {\n        return getList().toArray(a);\n    }\n\n    @Override\n    public boolean add(C e)\n    {\n        throw new UnsupportedOperationException(&quot;List is readonly&quot;);\n    }\n\n    @Override\n    public boolean remove(Object o)\n    {\n        throw new UnsupportedOperationException(&quot;List is readonly&quot;);\n    }\n\n    @Override\n    public boolean containsAll(Collection&lt;?&gt; c)\n    {\n        throw new UnsupportedOperationException(&quot;List is readonly&quot;);\n    }\n\n    @Override\n    public boolean addAll(Collection&lt;? extends C&gt; c)\n    {\n        throw new UnsupportedOperationException(&quot;List is readonly&quot;);\n    }\n\n    @Override\n    public boolean addAll(int index, Collection&lt;? extends C&gt; c)\n    {\n        throw new UnsupportedOperationException(&quot;List is readonly&quot;);\n    }\n\n    @Override\n    public boolean removeAll(Collection&lt;?&gt; c)\n    {\n        throw new UnsupportedOperationException(&quot;List is readonly&quot;);\n    }\n\n    @Override\n    public boolean retainAll(Collection&lt;?&gt; c)\n    {\n        throw new UnsupportedOperationException(&quot;List is readonly&quot;);\n    }\n\n    @Override\n    public void clear()\n    {\n        throw new UnsupportedOperationException(&quot;List is readonly&quot;);\n    }\n\n    @Override\n    public C get(int index)\n    {\n        return getList().get(index);\n    }\n\n    @Override\n    public C set(int index, C element)\n    {\n        throw new UnsupportedOperationException(&quot;List is readonly&quot;);\n    }\n\n    @Override\n    public void add(int index, C element)\n    {\n        throw new UnsupportedOperationException(&quot;List is readonly&quot;);\n\n    }\n\n    @Override\n    public C remove(int index)\n    {\n        throw new UnsupportedOperationException(&quot;List is readonly&quot;);\n    }\n\n    @Override\n    public int indexOf(Object o)\n    {\n        return getList().indexOf(o);\n    }\n\n    @Override\n    public int lastIndexOf(Object o)\n    {\n        return getList().lastIndexOf(o);\n    }\n\n    @Override\n    public ListIterator&lt;C&gt; listIterator()\n    {\n        return getList().listIterator();\n    }\n\n    @Override\n    public ListIterator&lt;C&gt; listIterator(int index)\n    {\n        return getList().listIterator(index);\n    }\n\n    @Override\n    public List&lt;C&gt; subList(int fromIndex, int toIndex)\n    {\n        return getList().subList(fromIndex,toIndex);\n    }\n\n    @Override\n    public String toString( ) {\n        return getList().toString();\n    }\n\n    private List&lt;C&gt; getList() {\n        return Collections.unmodifiableList(parents.stream().flatMap(p -&gt;\n            this.getter.apply(p).stream()).collect(Collectors.toList()));\n    }\n\n    public static void main(String[] args) {\n\n       Department dep1 = new Department();\n       dep1.setName(&quot;D1&quot;);\n       dep1.setEmployeesList(Arrays.asList(new Employee(&quot;e1&quot;),new Employee(&quot;e2&quot;)));\n       Department dep2 = new Department();\n       dep2.setName(&quot;D2&quot;);\n       dep2.setEmployeesList(Arrays.asList(new Employee(&quot;e3&quot;),new Employee(&quot;e4&quot;)));\n       List&lt;Department&gt; deps = new ArrayList&lt;&gt;(Arrays.asList(dep1,dep2));\n\n       // Create a List backed with the parent list and the getter for the children\n       List&lt;Employee&gt; employees = new FlatMapList&lt;&gt;(deps,Department::getEmployeesList);\n       System.out.println(employees);\n       deps.remove(dep1);\n       System.out.println(employees);\n\n    }\n}\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>[Employee [name=e1], Employee [name=e2], Employee [name=e3], Employee [name=e4]] \n[Employee [name=e3], Employee [name=e4]]\n</code></pre>\n"}],"owner":{"account_id":22365443,"reputation":396,"user_id":16581317,"display_name":"Youssef Idraiss"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":449,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70430760,"answer_count":2,"score":0,"last_activity_date":1640082957,"creation_date":1640059842,"question_id":70430590,"body_markdown":"Let&#39;s say I have a department class that contains a list of employees, as follows: \r\n\r\n    public class Departement {\r\n        List&lt;Employees&gt; employeesList;\r\n    \r\n        public List&lt;Employees&gt; getEmployeesList() {\r\n            return employeesList;\r\n        }\r\n    \r\n        public Departement setEmployeesList(List&lt;Employees&gt; employeesList) {\r\n            this.employeesList = employeesList;\r\n            return this;\r\n        }\r\n    }\r\n\r\nThere is a case where I need all employees on a separate list. To do that I&#39;m  using streams, as follows: \r\n\r\n    List&lt;Departement&gt; departments ...\r\n    List&lt;Employees&gt; employees = departments.stream().flatMap(departement -&gt; \r\n    departement.getEmployeesList().stream()).collect(Collectors.toList()));\r\n\r\nIn case I delete a department in the department list, is there a way to automatically delete its employees in the employees list made by `stream.flatMap`?","title":"How to delete children objects in list made by stream.flatMap when parent gets deleted?","body":"<p>Let's say I have a department class that contains a list of employees, as follows:</p>\n<pre><code>public class Departement {\n    List&lt;Employees&gt; employeesList;\n\n    public List&lt;Employees&gt; getEmployeesList() {\n        return employeesList;\n    }\n\n    public Departement setEmployeesList(List&lt;Employees&gt; employeesList) {\n        this.employeesList = employeesList;\n        return this;\n    }\n}\n</code></pre>\n<p>There is a case where I need all employees on a separate list. To do that I'm  using streams, as follows:</p>\n<pre><code>List&lt;Departement&gt; departments ...\nList&lt;Employees&gt; employees = departments.stream().flatMap(departement -&gt; \ndepartement.getEmployeesList().stream()).collect(Collectors.toList()));\n</code></pre>\n<p>In case I delete a department in the department list, is there a way to automatically delete its employees in the employees list made by <code>stream.flatMap</code>?</p>\n"},{"tags":["java","proguard"],"answers":[{"tags":[],"owner":{"account_id":8497379,"reputation":21,"user_id":6371567,"display_name":"user6371567"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640082789,"creation_date":1640082789,"answer_id":70434038,"question_id":70393883,"body_markdown":"So, it turned out that with new versions, the notation is not as it once was.\r\n\r\n    &lt;taskdef resource=&quot;proguard/ant/task.properties&quot; classpath=&quot;${proguard.path}/lib/proguard-ant.jar&quot; /&gt;","title":"Java and ProGuard - taskdef class proguard.ant.ProGuardTask cannot be found using the classloader AntClassLoader","body":"<p>So, it turned out that with new versions, the notation is not as it once was.</p>\n<pre><code>&lt;taskdef resource=&quot;proguard/ant/task.properties&quot; classpath=&quot;${proguard.path}/lib/proguard-ant.jar&quot; /&gt;\n</code></pre>\n"}],"owner":{"account_id":8497379,"reputation":21,"user_id":6371567,"display_name":"user6371567"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":155,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640082789,"creation_date":1639747512,"question_id":70393883,"body_markdown":"I have the pleasure of working on a embeded java program, which was writen 10+ years ago from a third party company. Source and project files were included.\r\n\r\nIt was imported into Eclipse and ported to a higher java version (17).\r\n\r\nNow I&#39;m stuck when trying to build the program. It uses ProGuard. The newest version was added to the project files. Config file proguard.pro was changed to discard rt.jar utilization in favore of the new methods. However, now I&#39;m getting a error message:\r\n\r\n    BUILD FAILED\r\n    C:\\mypath\\build.xml:16: taskdef class proguard.ant.ProGuardTask cannot be found\r\n     using the classloader AntClassLoader[C:\\mypath\\obf\\proguard.jar]\r\n\r\n\r\nbuild.xml (original) is as follows:\r\n\r\n    &lt;target name=&quot;obfuscate&quot; description=&quot;obfuscate a jar file&quot; depends=&quot;jar&quot;&gt;\r\n    \t&lt;taskdef name=&quot;proguard&quot; classname=&quot;proguard.ant.ProGuardTask&quot; classpath=&quot;obf/proguard.jar&quot; /&gt;\r\n    \t&lt;proguard configuration=&quot;obf/proguard.pro&quot; /&gt;\r\n    &lt;/target&gt;\r\n\r\nThe &#39;obf&#39; folder is inside the project (sublevel of build.xml). File proguard.jar is inside of it. Anyone haveing any clues why would this error show? No other changes were made beside the listed ones.","title":"Java and ProGuard - taskdef class proguard.ant.ProGuardTask cannot be found using the classloader AntClassLoader","body":"<p>I have the pleasure of working on a embeded java program, which was writen 10+ years ago from a third party company. Source and project files were included.</p>\n<p>It was imported into Eclipse and ported to a higher java version (17).</p>\n<p>Now I'm stuck when trying to build the program. It uses ProGuard. The newest version was added to the project files. Config file proguard.pro was changed to discard rt.jar utilization in favore of the new methods. However, now I'm getting a error message:</p>\n<pre><code>BUILD FAILED\nC:\\mypath\\build.xml:16: taskdef class proguard.ant.ProGuardTask cannot be found\n using the classloader AntClassLoader[C:\\mypath\\obf\\proguard.jar]\n</code></pre>\n<p>build.xml (original) is as follows:</p>\n<pre><code>&lt;target name=&quot;obfuscate&quot; description=&quot;obfuscate a jar file&quot; depends=&quot;jar&quot;&gt;\n    &lt;taskdef name=&quot;proguard&quot; classname=&quot;proguard.ant.ProGuardTask&quot; classpath=&quot;obf/proguard.jar&quot; /&gt;\n    &lt;proguard configuration=&quot;obf/proguard.pro&quot; /&gt;\n&lt;/target&gt;\n</code></pre>\n<p>The 'obf' folder is inside the project (sublevel of build.xml). File proguard.jar is inside of it. Anyone haveing any clues why would this error show? No other changes were made beside the listed ones.</p>\n"},{"tags":["java","logging","configuration","log4j","log4j2"],"answers":[{"tags":[],"owner":{"account_id":1891192,"reputation":8826,"user_id":1709216,"display_name":"rgoers"},"down_vote_count":1,"up_vote_count":10,"is_accepted":true,"score":9,"last_activity_date":1631662392,"creation_date":1460750070,"answer_id":36655789,"question_id":36655486,"body_markdown":"[The Charset is specified on the Layout. `AbstractStringLayout` defaults to UTF-8.](https://logging.apache.org/log4j/log4j-2.5/manual/layouts.html)\r\n\r\nYou should be able to change that by specifying `charset=&quot;UTF-16&quot;` on the Layout configuration.","title":"What does log4j2 file appenders use for file encoding/format?","body":"<p><a href=\"https://logging.apache.org/log4j/log4j-2.5/manual/layouts.html\" rel=\"nofollow noreferrer\">The Charset is specified on the Layout. <code>AbstractStringLayout</code> defaults to UTF-8.</a></p>\n<p>You should be able to change that by specifying <code>charset=&quot;UTF-16&quot;</code> on the Layout configuration.</p>\n"},{"tags":[],"owner":{"account_id":1555751,"reputation":35615,"user_id":1446916,"display_name":"Remko Popma"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1460785511,"creation_date":1460785511,"answer_id":36660604,"question_id":36655486,"body_markdown":"Small correction on Ralph&#39;s answer: for PatternLayout the default charset is the *system default*. This is important because for example the Windows console won&#39;t be able to correctly display UTF-8 on Japanese Windows. ","title":"What does log4j2 file appenders use for file encoding/format?","body":"<p>Small correction on Ralph's answer: for PatternLayout the default charset is the <em>system default</em>. This is important because for example the Windows console won't be able to correctly display UTF-8 on Japanese Windows. </p>\n"},{"tags":[],"owner":{"account_id":2293223,"reputation":556,"user_id":2015398,"display_name":"user2015398"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640082661,"creation_date":1640082661,"answer_id":70434017,"question_id":36655486,"body_markdown":"If you use log4j.properties, configure it as follow:\r\n\r\n    appender.rolling.layout.charset = UTF-16\r\n\r\nor make the corresponding configurations in your xml configuration file.","title":"What does log4j2 file appenders use for file encoding/format?","body":"<p>If you use log4j.properties, configure it as follow:</p>\n<pre><code>appender.rolling.layout.charset = UTF-16\n</code></pre>\n<p>or make the corresponding configurations in your xml configuration file.</p>\n"}],"owner":{"account_id":2344416,"reputation":340,"user_id":2055044,"display_name":"Adam Marcionek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7499,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":36655789,"answer_count":3,"score":12,"last_activity_date":1640082661,"creation_date":1460748837,"question_id":36655486,"body_markdown":"What file format does log4j2 use when it writes to rollingfileappender? Furthermore, is there a way to change it?  What I&#39;d like to do use use UTF-16.","title":"What does log4j2 file appenders use for file encoding/format?","body":"<p>What file format does log4j2 use when it writes to rollingfileappender? Furthermore, is there a way to change it?  What I'd like to do use use UTF-16.</p>\n"},{"tags":["java","spring-boot","validation","spring-restcontroller","spring-validator"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1640082585,"post_id":70433703,"comment_id":124505566,"body_markdown":"Have you tried to change the order of the annotations?","body":"Have you tried to change the order of the annotations?"},{"owner":{"account_id":16092544,"reputation":822,"user_id":11615575,"display_name":"Andrei Manolache"},"score":0,"creation_date":1640083072,"post_id":70433703,"comment_id":124505736,"body_markdown":"Yes, didn&#39;t work.","body":"Yes, didn&#39;t work."}],"answers":[{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640082589,"creation_date":1640082589,"answer_id":70433997,"question_id":70433703,"body_markdown":"This could be because you have applied `@CustomValidator` annotation at class Level, and classes are loaded first before properties, and that could be the reason you see this order or execution.\r\n\r\nYou have a few options:\r\n\r\n1- Apply this `@CustomValidator` at specific property level,\r\n\r\n2- Set your `CustomValidator` as a `@Component`, and remove the `@CustomValidator` annotation from the class level.   Then in your controller method you do:\r\n\r\n       @Autowired\r\n       private CustomValidator customValidator;\r\n    \r\n        @PostMapping(value = &quot;/blablabla/&quot;, consumes = MediaType.APPLICATION_JSON_VALUE)\r\n        public List&lt;Object&gt; createDisconnectRequestRest(@RequestBody List&lt;@Valid RequestObj&gt; dtos) { // here at the validators is the question\r\n            customValidator.validate(xyz);\r\n        }\r\n\r\n--- Untested Theory ---\r\n\r\nCould you try with changing the order of the annotations applied at the method level and see if it makes a difference:\r\n\r\n\r\n    @PostMapping(value = &quot;/blablabla/&quot;, consumes = MediaType.APPLICATION_JSON_VALUE)\r\n    public List&lt;Object&gt; createDisconnectRequestRest(@RequestBody List&lt;@Valid @CustomValidator RequestObj&gt; dtos) { // here at the validators is the question\r\n        ... //nevermind\r\n       return null;\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to specify order validation in Request body Spring Boot Rest Controller","body":"<p>This could be because you have applied <code>@CustomValidator</code> annotation at class Level, and classes are loaded first before properties, and that could be the reason you see this order or execution.</p>\n<p>You have a few options:</p>\n<p>1- Apply this <code>@CustomValidator</code> at specific property level,</p>\n<p>2- Set your <code>CustomValidator</code> as a <code>@Component</code>, and remove the <code>@CustomValidator</code> annotation from the class level.   Then in your controller method you do:</p>\n<pre><code>   @Autowired\n   private CustomValidator customValidator;\n\n    @PostMapping(value = &quot;/blablabla/&quot;, consumes = MediaType.APPLICATION_JSON_VALUE)\n    public List&lt;Object&gt; createDisconnectRequestRest(@RequestBody List&lt;@Valid RequestObj&gt; dtos) { // here at the validators is the question\n        customValidator.validate(xyz);\n    }\n</code></pre>\n<p>--- Untested Theory ---</p>\n<p>Could you try with changing the order of the annotations applied at the method level and see if it makes a difference:</p>\n<pre><code>@PostMapping(value = &quot;/blablabla/&quot;, consumes = MediaType.APPLICATION_JSON_VALUE)\npublic List&lt;Object&gt; createDisconnectRequestRest(@RequestBody List&lt;@Valid @CustomValidator RequestObj&gt; dtos) { // here at the validators is the question\n    ... //nevermind\n   return null;\n}\n</code></pre>\n"}],"owner":{"account_id":16092544,"reputation":822,"user_id":11615575,"display_name":"Andrei Manolache"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1135,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640082589,"creation_date":1640081306,"question_id":70433703,"body_markdown":"So I have a ```Rest Controller``` in ```Spring Boot``` and for an endpoint, I need to validate its ```Request Body```.\r\n\r\nController:\r\n\r\n&lt;br&gt;\r\n\r\n    @RestController\r\n    @Validated\r\n    @RequestMapping(&quot;/my_endpoint&quot;)\r\n    public class WorkflowController {\r\n    \r\n        @PostMapping(value = &quot;/blablabla/&quot;, consumes = MediaType.APPLICATION_JSON_VALUE)\r\n        public List&lt;Object&gt; createDisconnectRequestRest(@RequestBody List&lt;@CustomValidator @Valid RequestObj&gt; dtos) { // here at the validators is the question\r\n            ... //nevermind\r\n           return null;\r\n        }\r\n\r\nRequest object:\r\n\r\n    @Data\r\n    public class RequestObj{\r\n    \r\n        private String comment;\r\n    \r\n        @NotNull // this @NotNull annotation validator is triggered AFTER the custom validator is done. I want this to be first validated and then the custom validator should take place\r\n        private List&lt;Long&gt; ids = new ArrayList&lt;&gt;();\r\n    }\r\n\r\n\r\n\r\n    @Target({FIELD, TYPE_USE})\r\n    @Retention(RUNTIME)\r\n    @Constraint(validatedBy = CustomValidator.class)\r\n    @Documented\r\n    public @interface ValidRequest {\r\n    \r\n        String message() default &quot;Invalid request&quot;;\r\n    \r\n        Class&lt;?&gt;[] groups() default {};\r\n    \r\n        Class&lt;? extends Payload&gt;[] payload() default {};\r\n    }\r\n\r\n\r\n&lt;br&gt;\r\n\r\nCustomValidator:\r\n\r\n    public class CustomValidator implements ConstraintValidator&lt;ValidRequest, RequestObj&gt; {\r\n    \r\n     // repositories, constructor \r\n    \r\n        @Override\r\n        public boolean isValid(RequestObj request, ConstraintValidatorContext constraintValidatorContext) {\r\n         \r\n             myRepository.findAllById(request.getIds()); // I want the @NotNull annotation validate the object before this custom validator\r\n    \r\n            return true;\r\n        }\r\n    }\r\n\r\n\r\n\r\nHere is the **problem**:\r\n\r\nThe first one to be triggered is the **CustomValidator** and then the ```RequestObj``` is being validated. In other words, validation starts with the  ```@CustomValidator``` annotation and then the ```@Valid``` one. I&#39;d like that the first one to be triggered would be the ```@Valid``` annotation (so the ```@NotNull``` annotation would validate the object first) and then the ```@CustomValidator``` should do its job. For example, if the body field ```ids``` is NULL, I&#39;d like that the ```@CustomValidator``` not even start as the validation had already failed.","title":"How to specify order validation in Request body Spring Boot Rest Controller","body":"<p>So I have a <code>Rest Controller</code> in <code>Spring Boot</code> and for an endpoint, I need to validate its <code>Request Body</code>.</p>\n<p>Controller:</p>\n<br>\n<pre><code>@RestController\n@Validated\n@RequestMapping(&quot;/my_endpoint&quot;)\npublic class WorkflowController {\n\n    @PostMapping(value = &quot;/blablabla/&quot;, consumes = MediaType.APPLICATION_JSON_VALUE)\n    public List&lt;Object&gt; createDisconnectRequestRest(@RequestBody List&lt;@CustomValidator @Valid RequestObj&gt; dtos) { // here at the validators is the question\n        ... //nevermind\n       return null;\n    }\n</code></pre>\n<p>Request object:</p>\n<pre><code>@Data\npublic class RequestObj{\n\n    private String comment;\n\n    @NotNull // this @NotNull annotation validator is triggered AFTER the custom validator is done. I want this to be first validated and then the custom validator should take place\n    private List&lt;Long&gt; ids = new ArrayList&lt;&gt;();\n}\n\n\n\n@Target({FIELD, TYPE_USE})\n@Retention(RUNTIME)\n@Constraint(validatedBy = CustomValidator.class)\n@Documented\npublic @interface ValidRequest {\n\n    String message() default &quot;Invalid request&quot;;\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n}\n</code></pre>\n<br>\n<p>CustomValidator:</p>\n<pre><code>public class CustomValidator implements ConstraintValidator&lt;ValidRequest, RequestObj&gt; {\n\n // repositories, constructor \n\n    @Override\n    public boolean isValid(RequestObj request, ConstraintValidatorContext constraintValidatorContext) {\n     \n         myRepository.findAllById(request.getIds()); // I want the @NotNull annotation validate the object before this custom validator\n\n        return true;\n    }\n}\n</code></pre>\n<p>Here is the <strong>problem</strong>:</p>\n<p>The first one to be triggered is the <strong>CustomValidator</strong> and then the <code>RequestObj</code> is being validated. In other words, validation starts with the  <code>@CustomValidator</code> annotation and then the <code>@Valid</code> one. I'd like that the first one to be triggered would be the <code>@Valid</code> annotation (so the <code>@NotNull</code> annotation would validate the object first) and then the <code>@CustomValidator</code> should do its job. For example, if the body field <code>ids</code> is NULL, I'd like that the <code>@CustomValidator</code> not even start as the validation had already failed.</p>\n"},{"tags":["java","javafx","properties","javafx-8","listener"],"answers":[{"tags":[],"owner":{"account_id":7899184,"reputation":21451,"user_id":5966775,"display_name":"DVarga"},"down_vote_count":0,"up_vote_count":55,"is_accepted":true,"score":55,"last_activity_date":1494826196,"creation_date":1467783268,"answer_id":38216917,"question_id":38216268,"body_markdown":"You can listen to the changes of the [`widthProperty`][1] and the [`heightProperty`][2] of the `Stage`:\r\n\r\n    stage.widthProperty().addListener((obs, oldVal, newVal) -&gt; {\r\n    \t // Do whatever you want\r\n    });\r\n\t\r\n    stage.heightProperty().addListener((obs, oldVal, newVal) -&gt; {\r\n    \t // Do whatever you want\r\n    });\r\n\r\n______________________________________________________\r\n\r\n**Note:** To listen to both width and height changes, the same listener can be used really simply:\r\n\r\n\tChangeListener&lt;Number&gt; stageSizeListener = (observable, oldValue, newValue) -&gt;\r\n\t\tSystem.out.println(&quot;Height: &quot; + stage.getHeight() + &quot; Width: &quot; + stage.getWidth());\r\n\r\n\tstage.widthProperty().addListener(stageSizeListener);\r\n\tstage.heightProperty().addListener(stageSizeListener); \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/javafx/api/javafx/stage/Window.html#widthProperty--\r\n  [2]: https://docs.oracle.com/javase/8/javafx/api/javafx/stage/Window.html#heightProperty--","title":"How to listen resize event of Stage in JavaFX?","body":"<p>You can listen to the changes of the <a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/stage/Window.html#widthProperty--\" rel=\"noreferrer\"><code>widthProperty</code></a> and the <a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/stage/Window.html#heightProperty--\" rel=\"noreferrer\"><code>heightProperty</code></a> of the <code>Stage</code>:</p>\n\n<pre><code>stage.widthProperty().addListener((obs, oldVal, newVal) -&gt; {\n     // Do whatever you want\n});\n\nstage.heightProperty().addListener((obs, oldVal, newVal) -&gt; {\n     // Do whatever you want\n});\n</code></pre>\n\n<hr>\n\n<p><strong>Note:</strong> To listen to both width and height changes, the same listener can be used really simply:</p>\n\n<pre><code>ChangeListener&lt;Number&gt; stageSizeListener = (observable, oldValue, newValue) -&gt;\n    System.out.println(\"Height: \" + stage.getHeight() + \" Width: \" + stage.getWidth());\n\nstage.widthProperty().addListener(stageSizeListener);\nstage.heightProperty().addListener(stageSizeListener); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":7990930,"reputation":4132,"user_id":6028807,"display_name":"Miss Chanandler Bong"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1521650076,"creation_date":1521650076,"answer_id":49411865,"question_id":38216268,"body_markdown":"Keeping a fixed width to height ratio:\r\n\r\n    stage.minHeightProperty().bind(stage.widthProperty().multiply(0.5));\r\n    stage.maxHeightProperty().bind(stage.widthProperty().multiply(0.5));","title":"How to listen resize event of Stage in JavaFX?","body":"<p>Keeping a fixed width to height ratio:</p>\n\n<pre><code>stage.minHeightProperty().bind(stage.widthProperty().multiply(0.5));\nstage.maxHeightProperty().bind(stage.widthProperty().multiply(0.5));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6651349,"reputation":4535,"user_id":7756492,"display_name":"ucMedia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640082510,"creation_date":1640082510,"answer_id":70433983,"question_id":38216268,"body_markdown":"Cut the long story short :\r\n\r\n    container.widthProperty().addListener(new ChangeListener&lt;Number&gt;() {\r\n            @Override\r\n            public void changed(ObservableValue&lt;? extends Number&gt; observable, Number oldValue, Number newValue) {\r\n                if (newValue.floatValue()!=oldValue.floatValue()) resizeKids(newValue);\r\n            }\r\n        });\r\n\r\n Also you may want to check new width/height with the old values for **prevent duplication**. ","title":"How to listen resize event of Stage in JavaFX?","body":"<p>Cut the long story short :</p>\n<pre><code>container.widthProperty().addListener(new ChangeListener&lt;Number&gt;() {\n        @Override\n        public void changed(ObservableValue&lt;? extends Number&gt; observable, Number oldValue, Number newValue) {\n            if (newValue.floatValue()!=oldValue.floatValue()) resizeKids(newValue);\n        }\n    });\n</code></pre>\n<p>Also you may want to check new width/height with the old values for <strong>prevent duplication</strong>.</p>\n"}],"owner":{"account_id":3557875,"reputation":1330,"user_id":2971117,"accept_rate":90,"display_name":"Amita Patil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38222,"favorite_count":0,"down_vote_count":1,"up_vote_count":27,"accepted_answer_id":38216917,"answer_count":3,"score":26,"last_activity_date":1640082510,"creation_date":1467778759,"question_id":38216268,"body_markdown":"I want to perform some functionality on resize event of form (or `Scene` or `Stage` whatever it is).\r\n\r\nBut how can I detect resize event of form in JavaFX?","title":"How to listen resize event of Stage in JavaFX?","body":"<p>I want to perform some functionality on resize event of form (or <code>Scene</code> or <code>Stage</code> whatever it is).</p>\n\n<p>But how can I detect resize event of form in JavaFX?</p>\n"},{"tags":["java","spring","spring-boot","filter","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1639702334,"post_id":70387209,"comment_id":124423321,"body_markdown":"why have you created a filter that already exists in spring security? please google the spring security reference and read the chapter on jwt","body":"why have you created a filter that already exists in spring security? please google the spring security reference and read the chapter on jwt"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1639727001,"post_id":70387209,"comment_id":124427172,"body_markdown":"Your filter is an component, registered as part of the regular filter chain. It isn&#39;t part of the special security filter chain and thus will execute on each request.","body":"Your filter is an component, registered as part of the regular filter chain. It isn&#39;t part of the special security filter chain and thus will execute on each request."}],"answers":[{"tags":[],"owner":{"account_id":4642086,"reputation":23628,"user_id":3761628,"accept_rate":88,"display_name":"eol"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639731565,"creation_date":1639731565,"answer_id":70390638,"question_id":70387209,"body_markdown":"Your `JwtAuthenticationTokenFilter` will be picked up by Spring as a component and will be included in the filter chain and will **not** be automatically excluded through your `SecurityConfig`.\r\n\r\nSo overwriting `shouldNotFilter` seems like a valid approach and should work as expected.\r\n\r\nYou could try to use `request.getRequestURI()` instead of `request.getServletPath()` in order to ensure to match the actual request path. See [this][1] for further details.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/4931323/whats-the-difference-between-getrequesturi-and-getpathinfo-methods-in-httpservl","title":"Extends OncePerRequestFilter bypass specific URL","body":"<p>Your <code>JwtAuthenticationTokenFilter</code> will be picked up by Spring as a component and will be included in the filter chain and will <strong>not</strong> be automatically excluded through your <code>SecurityConfig</code>.</p>\n<p>So overwriting <code>shouldNotFilter</code> seems like a valid approach and should work as expected.</p>\n<p>You could try to use <code>request.getRequestURI()</code> instead of <code>request.getServletPath()</code> in order to ensure to match the actual request path. See <a href=\"https://stackoverflow.com/questions/4931323/whats-the-difference-between-getrequesturi-and-getpathinfo-methods-in-httpservl\">this</a> for further details.</p>\n"},{"tags":[],"owner":{"account_id":22498600,"reputation":46,"user_id":16695223,"display_name":"Vikas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639824975,"creation_date":1639824975,"answer_id":70402820,"question_id":70387209,"body_markdown":"You can create a simple array inside `JwtAuthenticationTokenFilter` if you want to bypass for multiple Urls.\r\n\r\nFor example:\r\n```\r\n    private static final String[] excluded_urls = {\r\n            &quot;/login&quot;,\r\n            &quot;**/doc.html&quot;\r\n    };\r\n```\r\n\r\nAnd then override `shouldNotFilter` method:\r\n```\r\n    @Override\r\n    protected boolean shouldNotFilter(HttpServletRequest request) throws ServletException {\r\n        String url = request.getRequestURI();\r\n        return Stream.of(excluded_urls).anyMatch(x -&gt; pathMatcher.match(x, url));\r\n    }\r\n```\r\nWhere \r\n```\r\npathMatcher = new AntPathMatcher();\r\n//can be injected or create wherever required\r\n```","title":"Extends OncePerRequestFilter bypass specific URL","body":"<p>You can create a simple array inside <code>JwtAuthenticationTokenFilter</code> if you want to bypass for multiple Urls.</p>\n<p>For example:</p>\n<pre><code>    private static final String[] excluded_urls = {\n            &quot;/login&quot;,\n            &quot;**/doc.html&quot;\n    };\n</code></pre>\n<p>And then override <code>shouldNotFilter</code> method:</p>\n<pre><code>    @Override\n    protected boolean shouldNotFilter(HttpServletRequest request) throws ServletException {\n        String url = request.getRequestURI();\n        return Stream.of(excluded_urls).anyMatch(x -&gt; pathMatcher.match(x, url));\n    }\n</code></pre>\n<p>Where</p>\n<pre><code>pathMatcher = new AntPathMatcher();\n//can be injected or create wherever required\n</code></pre>\n"}],"owner":{"account_id":19609004,"reputation":19,"user_id":14351927,"display_name":"First Rain"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1856,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1640086297,"answer_count":2,"score":0,"last_activity_date":1640082296,"creation_date":1639701501,"question_id":70387209,"body_markdown":"I use Spring Boot 2.5.6. I want to skip specific URL (`/doc.html`).\r\n\r\nI have created a `JwtAuthenticationTokenFilter` extending `OncePerRequestFilter`\r\n\r\n```java\r\n@Component\r\npublic class JwtAuthenticationTokenFilter extends OncePerRequestFilter {\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)\r\n            throws ServletException, IOException {\r\n        //the logic of authentication\r\n}\r\n```\r\n\r\nAnd then I create `SecurityConfig` extending `WebSecurityConfigurerAdapter`\r\n\r\n```java\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\r\n@Order(1)\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n    @Override\r\n    public void configure(WebSecurity web)\r\n            throws Exception {\r\n        web.ignoring()\r\n                .antMatchers(HttpMethod.OPTIONS, &quot;/**&quot;)\r\n                .antMatchers(&quot;/doc.html&quot;);\r\n    }\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity httpSecurity) throws Exception {\r\n        httpSecurity\r\n           .csrf().disable()\r\n           .sessionManagement()\r\n               .sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n           .authorizeRequests()\r\n               .antMatchers(&quot;/doc.html&quot;).anonymous()\r\n               .and()\r\n           .requestMatchers().antMatchers(&quot;/doc.html&quot;);\r\n```\r\n\r\nbut when I access `localhost:8080/doc.html`, the **`/doc.html`** didn&#39;t skip;\r\n\r\nand I also try to override `shouldNotFilter` in `JwtAuthenticationTokenFilter.java`, but it did&#39;t work also:\r\n\r\n```java\r\n@Override\r\n    protected boolean shouldNotFilter(HttpServletRequest request) throws ServletException {\r\n        return (\r\n                new AntPathMatcher().match(&quot;/doc.html&quot;, request.getServletPath()));\r\n    }\r\n```","title":"Extends OncePerRequestFilter bypass specific URL","body":"<p>I use Spring Boot 2.5.6. I want to skip specific URL (<code>/doc.html</code>).</p>\n<p>I have created a <code>JwtAuthenticationTokenFilter</code> extending <code>OncePerRequestFilter</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class JwtAuthenticationTokenFilter extends OncePerRequestFilter {\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)\n            throws ServletException, IOException {\n        //the logic of authentication\n}\n</code></pre>\n<p>And then I create <code>SecurityConfig</code> extending <code>WebSecurityConfigurerAdapter</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\n@Order(1)\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n    @Override\n    public void configure(WebSecurity web)\n            throws Exception {\n        web.ignoring()\n                .antMatchers(HttpMethod.OPTIONS, &quot;/**&quot;)\n                .antMatchers(&quot;/doc.html&quot;);\n    }\n\n    @Override\n    protected void configure(HttpSecurity httpSecurity) throws Exception {\n        httpSecurity\n           .csrf().disable()\n           .sessionManagement()\n               .sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n           .authorizeRequests()\n               .antMatchers(&quot;/doc.html&quot;).anonymous()\n               .and()\n           .requestMatchers().antMatchers(&quot;/doc.html&quot;);\n</code></pre>\n<p>but when I access <code>localhost:8080/doc.html</code>, the <strong><code>/doc.html</code></strong> didn't skip;</p>\n<p>and I also try to override <code>shouldNotFilter</code> in <code>JwtAuthenticationTokenFilter.java</code>, but it did't work also:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n    protected boolean shouldNotFilter(HttpServletRequest request) throws ServletException {\n        return (\n                new AntPathMatcher().match(&quot;/doc.html&quot;, request.getServletPath()));\n    }\n</code></pre>\n"},{"tags":["java","selenium-webdriver","xpath","css-selectors","webdriverwait"],"comments":[{"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"score":0,"creation_date":1549368103,"post_id":54533783,"comment_id":95869321,"body_markdown":"In case the textarea is not cleared, do you get any exception? Or your code overwrites default content? If page is beeing loaded you always need to wait, f.e. to element is clickable, see org.openqa.selenium.support.ui.ExpectedConditions","body":"In case the textarea is not cleared, do you get any exception? Or your code overwrites default content? If page is beeing loaded you always need to wait, f.e. to element is clickable, see org.openqa.selenium.support.ui.ExpectedConditions"}],"answers":[{"tags":[],"owner":{"account_id":15083819,"reputation":33038,"user_id":10885684,"display_name":"KunduK"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1549369415,"creation_date":1549369415,"answer_id":54534362,"question_id":54533783,"body_markdown":"Use Java Script executor it should work.\r\n\r\n    JavascriptExecutor executor = (JavascriptExecutor) driver;\r\n    \t\t \r\n    executor.executeScript(&quot;document.getElementById(&#39;CheckoutWelcomeTitle&#39;).value=&#39;&#39;&quot;);","title":"Unable to clear textarea which auto inputs text on clear and blur using Selenium WebDriver","body":"<p>Use Java Script executor it should work.</p>\n\n<pre><code>JavascriptExecutor executor = (JavascriptExecutor) driver;\n\nexecutor.executeScript(\"document.getElementById('CheckoutWelcomeTitle').value=''\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1549370660,"creation_date":1549370660,"answer_id":54534739,"question_id":54533783,"body_markdown":"The desired element is a dynamic element so to locate the element you have to induce _WebDriverWait_ for the _element to be clickable_ and you can use either of the following [Locator Strategies](https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890):\r\n\r\n\r\n- `cssSelector`:\r\n\r\n\t    WebElement myElement = new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;textarea.form-control.rd-control.rd-control--textarea.empty#CheckoutWelcomeTitle&quot;)));\r\n\t    myElement.click();\r\n\t    myElement.clear();\r\n           \t\r\n- `xpath`:\r\n\r\n\t    WebElement myElement = new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//textarea[@class=&#39;form-control rd-control rd-control--textarea empty&#39; and @id=&#39;CheckoutWelcomeTitle&#39;]&quot;)));\r\n\t    myElement.click();\r\n\t    myElement.clear();","title":"Unable to clear textarea which auto inputs text on clear and blur using Selenium WebDriver","body":"<p>The desired element is a dynamic element so to locate the element you have to induce <em>WebDriverWait</em> for the <em>element to be clickable</em> and you can use either of the following <a href=\"https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890\">Locator Strategies</a>:</p>\n\n<ul>\n<li><p><code>cssSelector</code>:</p>\n\n<pre><code>WebElement myElement = new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(By.cssSelector(\"textarea.form-control.rd-control.rd-control--textarea.empty#CheckoutWelcomeTitle\")));\nmyElement.click();\nmyElement.clear();\n</code></pre></li>\n<li><p><code>xpath</code>:</p>\n\n<pre><code>WebElement myElement = new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(By.xpath(\"//textarea[@class='form-control rd-control rd-control--textarea empty' and @id='CheckoutWelcomeTitle']\")));\nmyElement.click();\nmyElement.clear();\n</code></pre></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1796955,"reputation":2964,"user_id":1636173,"accept_rate":100,"display_name":"Giulio Caccin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640081938,"creation_date":1640081938,"answer_id":70433852,"question_id":54533783,"body_markdown":"I think it&#39;s worth mentioning a solution that works without custom scripts; to take in account all the possible permutations of drivers and os, the most up-to-date solution to the problem is:\r\n\r\n    private fun clearField(element: WebElement) {\r\n        element.sendKeys(Keys.chord(Keys.SHIFT, Keys.ARROW_UP), Keys.DELETE)\r\n        element.sendKeys(Keys.chord(Keys.CONTROL, &quot;a&quot;), Keys.DELETE)\r\n        element.clear()\r\n    }\r\n\r\n\r\nThis is the quite redundant solution to the fact that clear does not always work, and to the fact that the first works on mac and the second on windows.  \r\nAll the three combined has been tested also on react app with validation and input mask.\r\n\r\nThe namespace to import is `import org.openqa.selenium.Keys`.\r\n\r\nThis is an example code, to avoid stale elements you should not pass `WebElements` around.","title":"Unable to clear textarea which auto inputs text on clear and blur using Selenium WebDriver","body":"<p>I think it's worth mentioning a solution that works without custom scripts; to take in account all the possible permutations of drivers and os, the most up-to-date solution to the problem is:</p>\n<pre><code>private fun clearField(element: WebElement) {\n    element.sendKeys(Keys.chord(Keys.SHIFT, Keys.ARROW_UP), Keys.DELETE)\n    element.sendKeys(Keys.chord(Keys.CONTROL, &quot;a&quot;), Keys.DELETE)\n    element.clear()\n}\n</code></pre>\n<p>This is the quite redundant solution to the fact that clear does not always work, and to the fact that the first works on mac and the second on windows.<br />\nAll the three combined has been tested also on react app with validation and input mask.</p>\n<p>The namespace to import is <code>import org.openqa.selenium.Keys</code>.</p>\n<p>This is an example code, to avoid stale elements you should not pass <code>WebElements</code> around.</p>\n"}],"owner":{"account_id":12069267,"reputation":109,"user_id":8825187,"display_name":"Dev Solanki"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1745,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":54534362,"answer_count":3,"score":2,"last_activity_date":1640081938,"creation_date":1549367453,"question_id":54533783,"body_markdown":"I&#39;m using Selenium WebDriver using Java.\r\nI&#39;m having a textarea and I would like to clear default content and enter new content in it. Functionality is such that if I clear text from textarea and hit Tab button, then default text will auto fill.\r\nBelow is HTML of textarea:\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;textarea autocomplete=&quot;off&quot; class=&quot;form-control rd-control rd-control--textarea empty&quot; cols=&quot;20&quot; data-bind=&quot;value: offerTitle, expandedTextArea: offerTitle, valueUpdate: &#39;afterkeydown&#39;, customerRequiredFieldsBinding&quot; id=&quot;CheckoutWelcomeTitle&quot; name=&quot;CheckoutWelcomeTitle&quot; placeholder=&quot;ex. Here comes the best offer&quot; rows=&quot;1&quot; type=&quot;text&quot; data-autosize-on=&quot;true&quot; style=&quot;overflow-y: hidden; height: 35.9792px;&quot; onblur=&quot;setTextColorDefault(this)&quot; oninput=&quot;setTextColor(this)&quot;&gt;Let&#39;s bid on a discount code!&lt;/textarea&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nI tried using:\r\n\r\n    driver.findElement(By.id(&quot;CheckoutWelcomeTitle&quot;)).clear()\r\n\r\nBut this didn&#39;t work.  \r\nI also tried this:\r\n\r\n    driver.findElement(By.id(&quot;CheckoutWelcomeTitle&quot;)).sendKeys(Keys.CONTROL + &quot;a&quot;) \r\n    driver.findElement(By.id(&quot;CheckoutWelcomeTitle&quot;)).sendKeys(Keys.DELETE)\r\n\r\nThis sometimes works but not always. Sometimes it clears data and refills default text.\r\n\r\nIs there any other way I can clear this textarea in a way that it would work every time?\r\n\r\nIn case if it helps, developers have used JavaScript to refill the text box on blur event.\r\n\r\nEdit: I have used explicit wait with the condition of the element to be clickable.","title":"Unable to clear textarea which auto inputs text on clear and blur using Selenium WebDriver","body":"<p>I'm using Selenium WebDriver using Java.\nI'm having a textarea and I would like to clear default content and enter new content in it. Functionality is such that if I clear text from textarea and hit Tab button, then default text will auto fill.\nBelow is HTML of textarea:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;textarea autocomplete=&quot;off&quot; class=&quot;form-control rd-control rd-control--textarea empty&quot; cols=&quot;20&quot; data-bind=&quot;value: offerTitle, expandedTextArea: offerTitle, valueUpdate: 'afterkeydown', customerRequiredFieldsBinding&quot; id=&quot;CheckoutWelcomeTitle&quot; name=&quot;CheckoutWelcomeTitle&quot; placeholder=&quot;ex. Here comes the best offer&quot; rows=&quot;1&quot; type=&quot;text&quot; data-autosize-on=&quot;true&quot; style=&quot;overflow-y: hidden; height: 35.9792px;&quot; onblur=&quot;setTextColorDefault(this)&quot; oninput=&quot;setTextColor(this)&quot;&gt;Let's bid on a discount code!&lt;/textarea&gt;\n</code></pre>\n\n<p>I tried using:</p>\n<pre><code>driver.findElement(By.id(&quot;CheckoutWelcomeTitle&quot;)).clear()\n</code></pre>\n<p>But this didn't work.<br />\nI also tried this:</p>\n<pre><code>driver.findElement(By.id(&quot;CheckoutWelcomeTitle&quot;)).sendKeys(Keys.CONTROL + &quot;a&quot;) \ndriver.findElement(By.id(&quot;CheckoutWelcomeTitle&quot;)).sendKeys(Keys.DELETE)\n</code></pre>\n<p>This sometimes works but not always. Sometimes it clears data and refills default text.</p>\n<p>Is there any other way I can clear this textarea in a way that it would work every time?</p>\n<p>In case if it helps, developers have used JavaScript to refill the text box on blur event.</p>\n<p>Edit: I have used explicit wait with the condition of the element to be clickable.</p>\n"},{"tags":["java","spring-boot","logging","log4j2"],"comments":[{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":1,"creation_date":1640069387,"post_id":70424757,"comment_id":124501441,"body_markdown":"Your appender is a `File` appender, not a `RollingFile` appender, so it performs no rotation.","body":"Your appender is a <code>File</code> appender, not a <code>RollingFile</code> appender, so it performs no rotation."}],"answers":[{"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640079215,"creation_date":1640077944,"answer_id":70432979,"question_id":70424757,"body_markdown":"**Remark**: Spring Boot already defines a log file with rotation (cf. [`log4j2-file.xml`](https://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot/src/main/resources/org/springframework/boot/logging/log4j2/log4j2-file.xml)) with a size limit of 10 MiB (the limit is hardcoded). You just need to set:\r\n\r\n```\r\nlogging.file.path=D:\\\\Users\\\\User\\\\MyFiles\\\\Apache Camel github\\\\ChatServiceProject\\\\logs\r\nlogging.file.name=propertieslogs.log\r\n```\r\n\r\nin your `application.properties`.\r\n\r\nIf, however, you want to write your own configuration file, you should consider using the XML format:\r\n\r\n```lang-xml\r\n\t&lt;Properties&gt;\r\n\t\t&lt;Property name=&quot;LOG_PATH&quot;&gt;D:\\Users\\User\\MyFiles\\Apache Camel github\\ChatServiceProject\\logs&lt;/Property&gt;\r\n\t\t&lt;Property name=&quot;LOG_FILE&quot;&gt;${sys:LOG_PATH}/propertieslogs.log&lt;/Property&gt;\r\n\t&lt;/Properties&gt;\r\n\t&lt;Appenders&gt;\r\n\t\t&lt;RollingFile\r\n\t\t\tname=&quot;LOGFILE&quot;\r\n\t\t\tappend=&quot;true&quot;\r\n\t\t\tfileName=&quot;${sys:LOG_FILE}&quot;\r\n\t\t\tfilePattern=&quot;${sys:LOG_PATH}/propertieslogs.%i.log.gz&quot;&gt;\r\n\t\t\t&lt;PatternLayout pattern=&quot;[%-5level] %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %c{1} - %msg%n&quot; /&gt;\r\n\t\t\t&lt;SizeBasedTriggeringPolicy size=&quot;1 KB&quot; /&gt;\r\n\t\t&lt;/RollingFile&gt;\r\n\t&lt;/Appenders&gt;\r\n```\r\n\r\nThe properties format uses a lot of arbitrary identifiers to emulate the hierarchical structure of XML:\r\n\r\n```\r\nproperty.LOG_PATH=D:\\Users\\User\\MyFiles\\Apache Camel github\\ChatServiceProject\\logs\r\nproperty.LOG_FILE=${sys:LOG_PATH}/propertieslogs.log\r\n\r\nappender.&lt;id1&gt;.type=RollingFile\r\nappender.&lt;id1&gt;.name=LOGFILE\r\nappender.&lt;id1&gt;.append=true\r\nappender.&lt;id1&gt;.fileName=${sys:LOG_FILE}\r\nappender.&lt;id1&gt;.filePattern=${sys:LOG_PATH}/propertieslogs.%i.log.gz\r\nappender.&lt;id1&gt;.&lt;id2&gt;.type=PatternLayout\r\nappender.&lt;id1&gt;.&lt;id2&gt;.pattern=[%-5level] %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %c{1} - %msg%n\r\nappender.&lt;id1&gt;.&lt;id3&gt;.type=SizeBasedTriggeringPolicy\r\nappender.&lt;id1&gt;.&lt;id3&gt;.size=1 KB\r\n```\r\n\r\nwhere `&lt;id1&gt;`, `&lt;id2&gt;` and `&lt;id3&gt;` are strings chosen by you. They have no influence on the configuration.","title":"How to generate new log files based on size using log4j2 in spring boot application","body":"<p><strong>Remark</strong>: Spring Boot already defines a log file with rotation (cf. <a href=\"https://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot/src/main/resources/org/springframework/boot/logging/log4j2/log4j2-file.xml\" rel=\"nofollow noreferrer\"><code>log4j2-file.xml</code></a>) with a size limit of 10 MiB (the limit is hardcoded). You just need to set:</p>\n<pre><code>logging.file.path=D:\\\\Users\\\\User\\\\MyFiles\\\\Apache Camel github\\\\ChatServiceProject\\\\logs\nlogging.file.name=propertieslogs.log\n</code></pre>\n<p>in your <code>application.properties</code>.</p>\n<p>If, however, you want to write your own configuration file, you should consider using the XML format:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;Properties&gt;\n        &lt;Property name=&quot;LOG_PATH&quot;&gt;D:\\Users\\User\\MyFiles\\Apache Camel github\\ChatServiceProject\\logs&lt;/Property&gt;\n        &lt;Property name=&quot;LOG_FILE&quot;&gt;${sys:LOG_PATH}/propertieslogs.log&lt;/Property&gt;\n    &lt;/Properties&gt;\n    &lt;Appenders&gt;\n        &lt;RollingFile\n            name=&quot;LOGFILE&quot;\n            append=&quot;true&quot;\n            fileName=&quot;${sys:LOG_FILE}&quot;\n            filePattern=&quot;${sys:LOG_PATH}/propertieslogs.%i.log.gz&quot;&gt;\n            &lt;PatternLayout pattern=&quot;[%-5level] %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %c{1} - %msg%n&quot; /&gt;\n            &lt;SizeBasedTriggeringPolicy size=&quot;1 KB&quot; /&gt;\n        &lt;/RollingFile&gt;\n    &lt;/Appenders&gt;\n</code></pre>\n<p>The properties format uses a lot of arbitrary identifiers to emulate the hierarchical structure of XML:</p>\n<pre><code>property.LOG_PATH=D:\\Users\\User\\MyFiles\\Apache Camel github\\ChatServiceProject\\logs\nproperty.LOG_FILE=${sys:LOG_PATH}/propertieslogs.log\n\nappender.&lt;id1&gt;.type=RollingFile\nappender.&lt;id1&gt;.name=LOGFILE\nappender.&lt;id1&gt;.append=true\nappender.&lt;id1&gt;.fileName=${sys:LOG_FILE}\nappender.&lt;id1&gt;.filePattern=${sys:LOG_PATH}/propertieslogs.%i.log.gz\nappender.&lt;id1&gt;.&lt;id2&gt;.type=PatternLayout\nappender.&lt;id1&gt;.&lt;id2&gt;.pattern=[%-5level] %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %c{1} - %msg%n\nappender.&lt;id1&gt;.&lt;id3&gt;.type=SizeBasedTriggeringPolicy\nappender.&lt;id1&gt;.&lt;id3&gt;.size=1 KB\n</code></pre>\n<p>where <code>&lt;id1&gt;</code>, <code>&lt;id2&gt;</code> and <code>&lt;id3&gt;</code> are strings chosen by you. They have no influence on the configuration.</p>\n"},{"tags":[],"owner":{"account_id":10939897,"reputation":104,"user_id":8040148,"display_name":"shashi singh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640081653,"creation_date":1640081653,"answer_id":70433786,"question_id":70424757,"body_markdown":"The below properties can be used to override the default configuration (  **application.propertie**s)\r\n \r\n\r\n`logging.logback.rollingpolicy.max-index=10`\r\n\r\n`logging.logback.rollingpolicy.max-file-size=15MB`\r\n \r\n\r\n&gt; spring properties can be placed inside the log xml file.\r\n\r\n`&lt;springProperty scope=&quot;context&quot; name=&quot;MAX_INDEX&quot; source=&quot;logging.logback.rollingpolicy.max-index&quot;/&gt;`\r\n    \r\n`&lt;springProperty scope=&quot;context&quot; name=&quot;MAX_FILE_SIZE&quot; source=&quot;logging.logback.rollingpolicy.max-file-size&quot;/&gt;`\r\n\r\n&gt; sample:\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;configuration&gt;\r\n    &lt;include resource=&quot;org/springframework/boot/logging/logback/defaults.xml&quot;/&gt;\r\n    &lt;property name=&quot;LOG_FILE&quot; value=&quot;${LOG_PATH:-${LOG_TEMP:-${java.io.tmpdir:-/tmp}}}/e2e-tools.${nodename:-local}.log}&quot;/&gt;\r\n    &lt;springProperty scope=&quot;context&quot; name=&quot;MAX_INDEX&quot; source=&quot;logging.logback.rollingpolicy.max-index&quot;/&gt;\r\n    &lt;springProperty scope=&quot;context&quot; name=&quot;MAX_FILE_SIZE&quot; source=&quot;logging.logback.rollingpolicy.max-file-size&quot; defaultValue=&quot;10MB&quot;/&gt;\r\n    &lt;appender name=&quot;FIX_WINDOW_BASED_FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\r\n        &lt;file&gt;${LOG_FILE}&lt;/file&gt;\r\n        &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.FixedWindowRollingPolicy&quot;&gt;\r\n            &lt;fileNamePattern&gt;${LOG_FILE}.%i&lt;/fileNamePattern&gt;\r\n            &lt;minIndex&gt;1&lt;/minIndex&gt;\r\n            &lt;maxIndex&gt;${MAX_INDEX}&lt;/maxIndex&gt;\r\n        &lt;/rollingPolicy&gt;\r\n\r\n        &lt;triggeringPolicy class=&quot;ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy&quot;&gt;\r\n            &lt;maxFileSize&gt;${MAX_FILE_SIZE}&lt;/maxFileSize&gt;\r\n        &lt;/triggeringPolicy&gt;\r\n\r\n        &lt;encoder&gt;\r\n            &lt;pattern&gt;%date{ISO8601} [%thread] %level: %msg%n&lt;/pattern&gt;\r\n        &lt;/encoder&gt;\r\n    &lt;/appender&gt;\r\n    &lt;appender name=&quot;CONSOLE&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;encoder&gt;\r\n            &lt;pattern&gt;%date{ISO8601} [%thread] %level: %msg%n&lt;/pattern&gt;\r\n        &lt;/encoder&gt;\r\n    &lt;/appender&gt;\r\n\r\n    &lt;root level=&quot;INFO&quot;&gt;\r\n        &lt;appender-ref ref=&quot;FIX_WINDOW_BASED_FILE&quot;/&gt;\r\n        &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;\r\n    &lt;/root&gt;\r\n    &lt;/configuration&gt;\r\n\r\n\r\n\r\n","title":"How to generate new log files based on size using log4j2 in spring boot application","body":"<p>The below properties can be used to override the default configuration (  <strong>application.propertie</strong>s)</p>\n<p><code>logging.logback.rollingpolicy.max-index=10</code></p>\n<p><code>logging.logback.rollingpolicy.max-file-size=15MB</code></p>\n<blockquote>\n<p>spring properties can be placed inside the log xml file.</p>\n</blockquote>\n<p><code>&lt;springProperty scope=&quot;context&quot; name=&quot;MAX_INDEX&quot; source=&quot;logging.logback.rollingpolicy.max-index&quot;/&gt;</code></p>\n<p><code>&lt;springProperty scope=&quot;context&quot; name=&quot;MAX_FILE_SIZE&quot; source=&quot;logging.logback.rollingpolicy.max-file-size&quot;/&gt;</code></p>\n<blockquote>\n<p>sample:</p>\n</blockquote>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;configuration&gt;\n&lt;include resource=&quot;org/springframework/boot/logging/logback/defaults.xml&quot;/&gt;\n&lt;property name=&quot;LOG_FILE&quot; value=&quot;${LOG_PATH:-${LOG_TEMP:-${java.io.tmpdir:-/tmp}}}/e2e-tools.${nodename:-local}.log}&quot;/&gt;\n&lt;springProperty scope=&quot;context&quot; name=&quot;MAX_INDEX&quot; source=&quot;logging.logback.rollingpolicy.max-index&quot;/&gt;\n&lt;springProperty scope=&quot;context&quot; name=&quot;MAX_FILE_SIZE&quot; source=&quot;logging.logback.rollingpolicy.max-file-size&quot; defaultValue=&quot;10MB&quot;/&gt;\n&lt;appender name=&quot;FIX_WINDOW_BASED_FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\n    &lt;file&gt;${LOG_FILE}&lt;/file&gt;\n    &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.FixedWindowRollingPolicy&quot;&gt;\n        &lt;fileNamePattern&gt;${LOG_FILE}.%i&lt;/fileNamePattern&gt;\n        &lt;minIndex&gt;1&lt;/minIndex&gt;\n        &lt;maxIndex&gt;${MAX_INDEX}&lt;/maxIndex&gt;\n    &lt;/rollingPolicy&gt;\n\n    &lt;triggeringPolicy class=&quot;ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy&quot;&gt;\n        &lt;maxFileSize&gt;${MAX_FILE_SIZE}&lt;/maxFileSize&gt;\n    &lt;/triggeringPolicy&gt;\n\n    &lt;encoder&gt;\n        &lt;pattern&gt;%date{ISO8601} [%thread] %level: %msg%n&lt;/pattern&gt;\n    &lt;/encoder&gt;\n&lt;/appender&gt;\n&lt;appender name=&quot;CONSOLE&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n    &lt;encoder&gt;\n        &lt;pattern&gt;%date{ISO8601} [%thread] %level: %msg%n&lt;/pattern&gt;\n    &lt;/encoder&gt;\n&lt;/appender&gt;\n\n&lt;root level=&quot;INFO&quot;&gt;\n    &lt;appender-ref ref=&quot;FIX_WINDOW_BASED_FILE&quot;/&gt;\n    &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;\n&lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n"}],"owner":{"account_id":18128966,"reputation":395,"user_id":13184263,"display_name":"Jenny"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1657,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1640081653,"creation_date":1640016801,"question_id":70424757,"body_markdown":"I am generating a log file using log4j2, but I need to generate a new one based on size each time it reaches the limit.\r\n\r\n**log4j2.properties** file:\r\n```\r\nname=PropertiesConfig\r\nproperty.filename =D:\\\\Users\\\\User\\\\MyFiles\\\\Apache Camel github\\\\ChatServiceProject\\\\logs\\\\propertieslogs.log\r\nappenders = console, file\r\n\r\nappender.console.type = Console\r\nappender.console.name = STDOUT\r\nappender.console.layout.type = PatternLayout\r\nappender.console.layout.pattern = [%-5level] %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %c{1} - %msg%n\r\n\r\nappender.file.type = File\r\nappender.file.name = LOGFILE\r\nappender.file.fileName=${filename}\r\nappender.file.layout.type=PatternLayout\r\nappender.file.layout.pattern=[%-5level] %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %c{1} - %msg%n\r\nappender.file.append=true\r\nappender.file=org.apache.log4j.RollingFileAppender\r\nappender.fileLogger.MaxFileSize=1KB\r\n\r\nloggers=file\r\nlogger.file.name=Processors\r\nlogger.file.level = trace\r\nlogger.file.appenderRefs = file\r\nlogger.file.appenderRef.file.ref = LOGFILE\r\n\r\nrootLogger.level = trace\r\nrootLogger.appenderRefs = stdout\r\nrootLogger.appenderRef.stdout.ref = STDOUT\r\nrootLogger= INFO, file, stdout\r\n```\r\nHowever the size of the log file is now 16KB and still it is not generating a new file but appending logs to the same file. So I need help to fix this.\r\nThank you","title":"How to generate new log files based on size using log4j2 in spring boot application","body":"<p>I am generating a log file using log4j2, but I need to generate a new one based on size each time it reaches the limit.</p>\n<p><strong>log4j2.properties</strong> file:</p>\n<pre><code>name=PropertiesConfig\nproperty.filename =D:\\\\Users\\\\User\\\\MyFiles\\\\Apache Camel github\\\\ChatServiceProject\\\\logs\\\\propertieslogs.log\nappenders = console, file\n\nappender.console.type = Console\nappender.console.name = STDOUT\nappender.console.layout.type = PatternLayout\nappender.console.layout.pattern = [%-5level] %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %c{1} - %msg%n\n\nappender.file.type = File\nappender.file.name = LOGFILE\nappender.file.fileName=${filename}\nappender.file.layout.type=PatternLayout\nappender.file.layout.pattern=[%-5level] %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %c{1} - %msg%n\nappender.file.append=true\nappender.file=org.apache.log4j.RollingFileAppender\nappender.fileLogger.MaxFileSize=1KB\n\nloggers=file\nlogger.file.name=Processors\nlogger.file.level = trace\nlogger.file.appenderRefs = file\nlogger.file.appenderRef.file.ref = LOGFILE\n\nrootLogger.level = trace\nrootLogger.appenderRefs = stdout\nrootLogger.appenderRef.stdout.ref = STDOUT\nrootLogger= INFO, file, stdout\n</code></pre>\n<p>However the size of the log file is now 16KB and still it is not generating a new file but appending logs to the same file. So I need help to fix this.\nThank you</p>\n"},{"tags":["java","spring","aop","spring-aop"],"comments":[{"owner":{"account_id":5278004,"reputation":6696,"user_id":4214241,"display_name":"R.G"},"score":0,"creation_date":1582100328,"post_id":60295366,"comment_id":106656055,"body_markdown":"Spring AOP can be only used to intercept method calls happening to Spring beans. Please read through the documentation [seciton](https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#aop-spring-or-aspectj)","body":"Spring AOP can be only used to intercept method calls happening to Spring beans. Please read through the documentation <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#aop-spring-or-aspectj\" rel=\"nofollow noreferrer\">seciton</a>"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":2,"creation_date":1582101581,"post_id":60295366,"comment_id":106656633,"body_markdown":"Slightly off-topic: Please don&#39;t use `@Configuration` together with `@Aspect`. The Spring configuration belongs into a separate configuration class, an aspect is not the right place for it. I see this anti-pattern over and over again here. (Probably one person started doing this without thinking much and everybody just uses copy &amp; paste.) You should add `@Component` to the aspect instead.","body":"Slightly off-topic: Please don&#39;t use <code>@Configuration</code> together with <code>@Aspect</code>. The Spring configuration belongs into a separate configuration class, an aspect is not the right place for it. I see this anti-pattern over and over again here. (Probably one person started doing this without thinking much and everybody just uses copy &amp; paste.) You should add <code>@Component</code> to the aspect instead."},{"owner":{"account_id":5278004,"reputation":6696,"user_id":4214241,"display_name":"R.G"},"score":0,"creation_date":1582106165,"post_id":60295366,"comment_id":106659241,"body_markdown":"@SoftwareEngineer deduced based on the question that the method is not intercepted and my understanding that the point cut points to an external library class. I never posted this as an answer and the comment was a hint on what could be wrong. And there is no evidene here that the logger IS a spring-bean either","body":"@SoftwareEngineer deduced based on the question that the method is not intercepted and my understanding that the point cut points to an external library class. I never posted this as an answer and the comment was a hint on what could be wrong. And there is no evidene here that the logger IS a spring-bean either"}],"answers":[{"tags":[],"owner":{"account_id":38622,"reputation":1436,"user_id":110977,"accept_rate":90,"display_name":"Brendon Randall"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582101086,"creation_date":1582098957,"answer_id":60295449,"question_id":60295366,"body_markdown":"Check this other answer out https://stackoverflow.com/questions/39189454/intercepting-third-party-functions-in-android-using-aspectj\r\n\r\nUnfortunately, you can only weave your own code. \r\n\r\nHowever, depending on what you actually need to do with Logback, you could create a custom Appender and do what you need to in there?\r\n\r\n**UPDATE**\r\n\r\nSeeing as you want to record some form of metric of these exceptions, you could configure a StatusListener according to the logstash-logback docs \r\n\r\nhttps://github.com/logstash/logstash-logback-encoder#status-listeners\r\n\r\nWith this, you could receive the event, and record whatever metrics you need","title":"How to monitor method execution at third party library?","body":"<p>Check this other answer out <a href=\"https://stackoverflow.com/questions/39189454/intercepting-third-party-functions-in-android-using-aspectj\">Intercepting third party functions in android using AspectJ</a></p>\n\n<p>Unfortunately, you can only weave your own code. </p>\n\n<p>However, depending on what you actually need to do with Logback, you could create a custom Appender and do what you need to in there?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Seeing as you want to record some form of metric of these exceptions, you could configure a StatusListener according to the logstash-logback docs </p>\n\n<p><a href=\"https://github.com/logstash/logstash-logback-encoder#status-listeners\" rel=\"nofollow noreferrer\">https://github.com/logstash/logstash-logback-encoder#status-listeners</a></p>\n\n<p>With this, you could receive the event, and record whatever metrics you need</p>\n"},{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1582276337,"creation_date":1582100456,"answer_id":60295799,"question_id":60295366,"body_markdown":"&gt; Unfortunately, you can only weave your own code.\r\n\r\nBrendon&#39;s answer is incorrect because it is focused on Android. On platforms with normal Java like Windows, MacOS, Linux you can intercept third-party code, given the following conditions:\r\n\r\n* You use full AspectJ, not Spring AOP. AspectJ can be used without Spring or also in Spring projects.\r\n* You use LTW (load-time weaving), usually via JVM parameter `-javaagent:/path/to/aspectjweaver.jar`, and configure _aop.xml_ correctly.\r\n* As an alternative you can use the AspectJ compiler _ajc_ directly via command line or via _AspectJ Maven Plugin_ in order to do binary weaving, i.e. weaving aspect code into your 3rd party library, creating new woven class files and re-packaging them into a new JAR. Then you would use that JAR in place of the original. _(BTW, this would also work for Android if the library is something you can deliver and install with your app and not some system class/library which cannot be replaced or overridden.)_\r\n\r\nI recommend LTW over binary weaving if you have no restrictions using Java command line parameters. There is even a chapter in the Spring manual describing how to use it directly in Spring.\r\n\r\n---\r\n\r\n**Update:** Here is an [MCVE](https://stackoverflow.com/help/mcve) showing you how to do that in plain Java + AspectJ LTW.\r\n\r\nLet&#39;s create an AspectJ project in Eclipse with installed AJDT (AspectJ Development Tools). Of course you can also create a Maven project with AspectJ Maven Plugin or even without because actually you do not need the AspectJ compiler if you use LTW via `-javaagent:/path/to/aspectjweaver.jar`. My sample project has this structure (Eclipse layout, not Maven, I just did it quickly):\r\n\r\n[![Eclipse AspectJ project][1]][1]\r\n\r\nThe file contents are as follows.\r\n\r\n***src/de/scrum_master/app/Application.java***\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.app;\r\n    \r\n    import org.slf4j.LoggerFactory;\r\n    \r\n    import ch.qos.logback.classic.Logger;\r\n    \r\n    public class Application {\r\n      private static final Logger logger = (Logger) LoggerFactory.getLogger(Application.class);\r\n    \r\n      public static void main(String[] args) {\r\n        logger.info(&quot;Example log from {}&quot;, Application.class.getSimpleName());\r\n      }\r\n    }\r\n\r\n***src/logback.xml***\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;configuration&gt;\r\n      &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;encoder&gt;\r\n          &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;\r\n        &lt;/encoder&gt;\r\n      &lt;/appender&gt;\r\n     \r\n      &lt;root level=&quot;debug&quot;&gt;\r\n        &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\r\n      &lt;/root&gt;\r\n    &lt;/configuration&gt;\r\n\r\n***src/de/scrum_master/aspect/LogbackAspect.aj (or simply LogbackAspect.java)***\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.aspect;\r\n    \r\n    import org.aspectj.lang.JoinPoint;\r\n    import org.aspectj.lang.annotation.Aspect;\r\n    import org.aspectj.lang.annotation.Before;\r\n    \r\n    @Aspect\r\n    public class LogbackAspect {\r\n      @Before(value = &quot;execution(* ch.qos.logback.classic.Logger.*(..))&quot;)\r\n      public void getInfo(JoinPoint joinPoint) {\r\n        System.out.println(joinPoint);\r\n      }\r\n    }\r\n\r\n***src/META-INF/aop.xml***\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;aspectj&gt;\r\n      &lt;aspects&gt;\r\n        &lt;aspect name=&quot;de.scrum_master.aspect.LogbackAspect&quot; /&gt;\r\n      &lt;/aspects&gt;\r\n      &lt;weaver options=&quot;-verbose -showWeaveInfo&quot; /&gt;\r\n    &lt;/aspectj&gt;\r\n\r\nNow create a simple Java run configuration for `Application` and add the Java agent to the command line:\r\n\r\n[![AspectJ LTW run configuration][2]][2]\r\n\r\nNow run the program and the console log will be like this:\r\n\r\n```none\r\n[AppClassLoader@18b4aac2] info AspectJ Weaver Version 1.9.5 built on Thursday Nov 28, 2019 at 11:28:53 PST\r\n[AppClassLoader@18b4aac2] info register classloader sun.misc.Launcher$AppClassLoader@18b4aac2\r\n[AppClassLoader@18b4aac2] info using configuration /C:/Users/alexa/Documents/java-src/SO_AJ_LTW_Logback_60295366/bin/META-INF/aop.xml\r\n[AppClassLoader@18b4aac2] info register aspect de.scrum_master.aspect.LogbackAspect\r\n[AppClassLoader@18b4aac2] weaveinfo Join point &#39;method-execution(ch.qos.logback.classic.Level ch.qos.logback.classic.Logger.getEffectiveLevel())&#39; in Type &#39;ch.qos.logback.classic.Logger&#39; (Logger.java:109) advised by before advice from &#39;de.scrum_master.aspect.LogbackAspect&#39; (LogbackAspect.aj)\r\n[AppClassLoader@18b4aac2] weaveinfo Join point &#39;method-execution(int ch.qos.logback.classic.Logger.getEffectiveLevelInt())&#39; in Type &#39;ch.qos.logback.classic.Logger&#39; (Logger.java:113) advised by before advice from &#39;de.scrum_master.aspect.LogbackAspect&#39; (LogbackAspect.aj)\r\n[AppClassLoader@18b4aac2] weaveinfo Join point &#39;method-execution(ch.qos.logback.classic.Level ch.qos.logback.classic.Logger.getLevel())&#39; in Type &#39;ch.qos.logback.classic.Logger&#39; (Logger.java:117) advised by before advice from &#39;de.scrum_master.aspect.LogbackAspect&#39; (LogbackAspect.aj)\r\n(...)\r\n[AppClassLoader@18b4aac2] weaveinfo Join point &#39;method-execution(java.lang.Object ch.qos.logback.classic.Logger.readResolve())&#39; in Type &#39;ch.qos.logback.classic.Logger&#39; (Logger.java:787) advised by before advice from &#39;de.scrum_master.aspect.LogbackAspect&#39; (LogbackAspect.aj)\r\n[AppClassLoader@18b4aac2] info processing reweavable type de.scrum_master.aspect.LogbackAspect: de\\scrum_master\\aspect\\LogbackAspect.aj\r\n[AppClassLoader@18b4aac2] info successfully verified type de.scrum_master.aspect.LogbackAspect exists.  Originates from de\\scrum_master\\aspect\\LogbackAspect.aj\r\nexecution(void ch.qos.logback.classic.Logger.setLevel(Level))\r\nexecution(void ch.qos.logback.classic.Logger.setLevel(Level))\r\nexecution(String ch.qos.logback.classic.Logger.toString())\r\nexecution(void ch.qos.logback.classic.Logger.addAppender(Appender))\r\nexecution(Logger ch.qos.logback.classic.Logger.getChildByName(String))\r\nexecution(Logger ch.qos.logback.classic.Logger.createChildByName(String))\r\nexecution(Logger ch.qos.logback.classic.Logger.getChildByName(String))\r\nexecution(Logger ch.qos.logback.classic.Logger.createChildByName(String))\r\nexecution(Logger ch.qos.logback.classic.Logger.getChildByName(String))\r\nexecution(Logger ch.qos.logback.classic.Logger.createChildByName(String))\r\nexecution(Logger ch.qos.logback.classic.Logger.getChildByName(String))\r\nexecution(Logger ch.qos.logback.classic.Logger.createChildByName(String))\r\nexecution(void ch.qos.logback.classic.Logger.info(String, Object))\r\nexecution(void ch.qos.logback.classic.Logger.filterAndLog_1(String, Marker, Level, String, Object, Throwable))\r\nexecution(void ch.qos.logback.classic.Logger.buildLoggingEventAndAppend(String, Marker, Level, String, Object[], Throwable))\r\nexecution(String ch.qos.logback.classic.Logger.getName())\r\nexecution(LoggerContext ch.qos.logback.classic.Logger.getLoggerContext())\r\nexecution(void ch.qos.logback.classic.Logger.callAppenders(ILoggingEvent))\r\nexecution(int ch.qos.logback.classic.Logger.appendLoopOnAppenders(ILoggingEvent))\r\nexecution(int ch.qos.logback.classic.Logger.appendLoopOnAppenders(ILoggingEvent))\r\nexecution(int ch.qos.logback.classic.Logger.appendLoopOnAppenders(ILoggingEvent))\r\nexecution(int ch.qos.logback.classic.Logger.appendLoopOnAppenders(ILoggingEvent))\r\nexecution(int ch.qos.logback.classic.Logger.appendLoopOnAppenders(ILoggingEvent))\r\n16:04:52.791 [main] INFO  de.scrum_master.app.Application - Example log from Application\r\n```\r\n\r\nI think this is exactly what you want. Please refer to the [Spring manual](https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#aop-using-aspectj) in order to find out how to configure AspectJ LTW there.\r\n\r\n  [1]: https://i.stack.imgur.com/63C6c.png\r\n  [2]: https://i.stack.imgur.com/N0T30.png","title":"How to monitor method execution at third party library?","body":"<blockquote>\n  <p>Unfortunately, you can only weave your own code.</p>\n</blockquote>\n\n<p>Brendon's answer is incorrect because it is focused on Android. On platforms with normal Java like Windows, MacOS, Linux you can intercept third-party code, given the following conditions:</p>\n\n<ul>\n<li>You use full AspectJ, not Spring AOP. AspectJ can be used without Spring or also in Spring projects.</li>\n<li>You use LTW (load-time weaving), usually via JVM parameter <code>-javaagent:/path/to/aspectjweaver.jar</code>, and configure <em>aop.xml</em> correctly.</li>\n<li>As an alternative you can use the AspectJ compiler <em>ajc</em> directly via command line or via <em>AspectJ Maven Plugin</em> in order to do binary weaving, i.e. weaving aspect code into your 3rd party library, creating new woven class files and re-packaging them into a new JAR. Then you would use that JAR in place of the original. <em>(BTW, this would also work for Android if the library is something you can deliver and install with your app and not some system class/library which cannot be replaced or overridden.)</em></li>\n</ul>\n\n<p>I recommend LTW over binary weaving if you have no restrictions using Java command line parameters. There is even a chapter in the Spring manual describing how to use it directly in Spring.</p>\n\n<hr>\n\n<p><strong>Update:</strong> Here is an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> showing you how to do that in plain Java + AspectJ LTW.</p>\n\n<p>Let's create an AspectJ project in Eclipse with installed AJDT (AspectJ Development Tools). Of course you can also create a Maven project with AspectJ Maven Plugin or even without because actually you do not need the AspectJ compiler if you use LTW via <code>-javaagent:/path/to/aspectjweaver.jar</code>. My sample project has this structure (Eclipse layout, not Maven, I just did it quickly):</p>\n\n<p><a href=\"https://i.stack.imgur.com/63C6c.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/63C6c.png\" alt=\"Eclipse AspectJ project\"></a></p>\n\n<p>The file contents are as follows.</p>\n\n<p><strong><em>src/de/scrum_master/app/Application.java</em></strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\nimport org.slf4j.LoggerFactory;\n\nimport ch.qos.logback.classic.Logger;\n\npublic class Application {\n  private static final Logger logger = (Logger) LoggerFactory.getLogger(Application.class);\n\n  public static void main(String[] args) {\n    logger.info(\"Example log from {}\", Application.class.getSimpleName());\n  }\n}\n</code></pre>\n\n<p><strong><em>src/logback.xml</em></strong></p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;configuration&gt;\n  &lt;appender name=\"STDOUT\" class=\"ch.qos.logback.core.ConsoleAppender\"&gt;\n    &lt;encoder&gt;\n      &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;\n    &lt;/encoder&gt;\n  &lt;/appender&gt;\n\n  &lt;root level=\"debug\"&gt;\n    &lt;appender-ref ref=\"STDOUT\" /&gt;\n  &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p><strong><em>src/de/scrum_master/aspect/LogbackAspect.aj (or simply LogbackAspect.java)</em></strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.aspect;\n\nimport org.aspectj.lang.JoinPoint;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Before;\n\n@Aspect\npublic class LogbackAspect {\n  @Before(value = \"execution(* ch.qos.logback.classic.Logger.*(..))\")\n  public void getInfo(JoinPoint joinPoint) {\n    System.out.println(joinPoint);\n  }\n}\n</code></pre>\n\n<p><strong><em>src/META-INF/aop.xml</em></strong></p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;aspectj&gt;\n  &lt;aspects&gt;\n    &lt;aspect name=\"de.scrum_master.aspect.LogbackAspect\" /&gt;\n  &lt;/aspects&gt;\n  &lt;weaver options=\"-verbose -showWeaveInfo\" /&gt;\n&lt;/aspectj&gt;\n</code></pre>\n\n<p>Now create a simple Java run configuration for <code>Application</code> and add the Java agent to the command line:</p>\n\n<p><a href=\"https://i.stack.imgur.com/N0T30.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N0T30.png\" alt=\"AspectJ LTW run configuration\"></a></p>\n\n<p>Now run the program and the console log will be like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[AppClassLoader@18b4aac2] info AspectJ Weaver Version 1.9.5 built on Thursday Nov 28, 2019 at 11:28:53 PST\n[AppClassLoader@18b4aac2] info register classloader sun.misc.Launcher$AppClassLoader@18b4aac2\n[AppClassLoader@18b4aac2] info using configuration /C:/Users/alexa/Documents/java-src/SO_AJ_LTW_Logback_60295366/bin/META-INF/aop.xml\n[AppClassLoader@18b4aac2] info register aspect de.scrum_master.aspect.LogbackAspect\n[AppClassLoader@18b4aac2] weaveinfo Join point 'method-execution(ch.qos.logback.classic.Level ch.qos.logback.classic.Logger.getEffectiveLevel())' in Type 'ch.qos.logback.classic.Logger' (Logger.java:109) advised by before advice from 'de.scrum_master.aspect.LogbackAspect' (LogbackAspect.aj)\n[AppClassLoader@18b4aac2] weaveinfo Join point 'method-execution(int ch.qos.logback.classic.Logger.getEffectiveLevelInt())' in Type 'ch.qos.logback.classic.Logger' (Logger.java:113) advised by before advice from 'de.scrum_master.aspect.LogbackAspect' (LogbackAspect.aj)\n[AppClassLoader@18b4aac2] weaveinfo Join point 'method-execution(ch.qos.logback.classic.Level ch.qos.logback.classic.Logger.getLevel())' in Type 'ch.qos.logback.classic.Logger' (Logger.java:117) advised by before advice from 'de.scrum_master.aspect.LogbackAspect' (LogbackAspect.aj)\n(...)\n[AppClassLoader@18b4aac2] weaveinfo Join point 'method-execution(java.lang.Object ch.qos.logback.classic.Logger.readResolve())' in Type 'ch.qos.logback.classic.Logger' (Logger.java:787) advised by before advice from 'de.scrum_master.aspect.LogbackAspect' (LogbackAspect.aj)\n[AppClassLoader@18b4aac2] info processing reweavable type de.scrum_master.aspect.LogbackAspect: de\\scrum_master\\aspect\\LogbackAspect.aj\n[AppClassLoader@18b4aac2] info successfully verified type de.scrum_master.aspect.LogbackAspect exists.  Originates from de\\scrum_master\\aspect\\LogbackAspect.aj\nexecution(void ch.qos.logback.classic.Logger.setLevel(Level))\nexecution(void ch.qos.logback.classic.Logger.setLevel(Level))\nexecution(String ch.qos.logback.classic.Logger.toString())\nexecution(void ch.qos.logback.classic.Logger.addAppender(Appender))\nexecution(Logger ch.qos.logback.classic.Logger.getChildByName(String))\nexecution(Logger ch.qos.logback.classic.Logger.createChildByName(String))\nexecution(Logger ch.qos.logback.classic.Logger.getChildByName(String))\nexecution(Logger ch.qos.logback.classic.Logger.createChildByName(String))\nexecution(Logger ch.qos.logback.classic.Logger.getChildByName(String))\nexecution(Logger ch.qos.logback.classic.Logger.createChildByName(String))\nexecution(Logger ch.qos.logback.classic.Logger.getChildByName(String))\nexecution(Logger ch.qos.logback.classic.Logger.createChildByName(String))\nexecution(void ch.qos.logback.classic.Logger.info(String, Object))\nexecution(void ch.qos.logback.classic.Logger.filterAndLog_1(String, Marker, Level, String, Object, Throwable))\nexecution(void ch.qos.logback.classic.Logger.buildLoggingEventAndAppend(String, Marker, Level, String, Object[], Throwable))\nexecution(String ch.qos.logback.classic.Logger.getName())\nexecution(LoggerContext ch.qos.logback.classic.Logger.getLoggerContext())\nexecution(void ch.qos.logback.classic.Logger.callAppenders(ILoggingEvent))\nexecution(int ch.qos.logback.classic.Logger.appendLoopOnAppenders(ILoggingEvent))\nexecution(int ch.qos.logback.classic.Logger.appendLoopOnAppenders(ILoggingEvent))\nexecution(int ch.qos.logback.classic.Logger.appendLoopOnAppenders(ILoggingEvent))\nexecution(int ch.qos.logback.classic.Logger.appendLoopOnAppenders(ILoggingEvent))\nexecution(int ch.qos.logback.classic.Logger.appendLoopOnAppenders(ILoggingEvent))\n16:04:52.791 [main] INFO  de.scrum_master.app.Application - Example log from Application\n</code></pre>\n\n<p>I think this is exactly what you want. Please refer to the <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#aop-using-aspectj\" rel=\"nofollow noreferrer\">Spring manual</a> in order to find out how to configure AspectJ LTW there.</p>\n"}],"owner":{"account_id":13969214,"reputation":33,"user_id":12912354,"display_name":"Arthur Fonzerelli"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1621,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1640081452,"creation_date":1582098609,"question_id":60295366,"body_markdown":"I have task to somehow monitor method calling at logback library. I started doing it with spring aop. So, for instance, i should catch all methods execution at ch.qos.logback.classic.Logger class. And there is my Aspect for it:\r\n\r\n    @Aspect\r\n    @Configuration\r\n    public class LogbackAspect {\r\n\r\n        @Before(value = &quot;execution(* ch.qos.logback.classic.Logger.*(..))&quot;)\r\n        public void getInfo(JoinPoint joinPoint) {\r\n             System.out.println(&quot;+++++AOP &quot; + joinPoint.getSignature().getName());\r\n    }\r\n    }\r\n\r\nBut it&#39;s not working for now, so, is there any possibility to intercept method execution with spring aop? Or there are some better ways to do it?","title":"How to monitor method execution at third party library?","body":"<p>I have task to somehow monitor method calling at logback library. I started doing it with spring aop. So, for instance, i should catch all methods execution at ch.qos.logback.classic.Logger class. And there is my Aspect for it:</p>\n\n<pre><code>@Aspect\n@Configuration\npublic class LogbackAspect {\n\n    @Before(value = \"execution(* ch.qos.logback.classic.Logger.*(..))\")\n    public void getInfo(JoinPoint joinPoint) {\n         System.out.println(\"+++++AOP \" + joinPoint.getSignature().getName());\n}\n}\n</code></pre>\n\n<p>But it's not working for now, so, is there any possibility to intercept method execution with spring aop? Or there are some better ways to do it?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":8834,"reputation":297144,"user_id":16076,"display_name":"Mitch Wheat"},"score":3,"creation_date":1327459271,"post_id":8997228,"comment_id":11276246,"body_markdown":"create the date and then retrieve the day from it (format)","body":"create the date and then retrieve the day from it (format)"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":2,"creation_date":1327459309,"post_id":8997228,"comment_id":11276252,"body_markdown":"Search, my good man. [This SO Q&amp;A](http://stackoverflow.com/questions/4786169/first-day-of-next-month-with-java-joda-time) does it both the crappy way, and the Joda Time way. Coincidentally also asked today. Tons of hits.","body":"Search, my good man. <a href=\"http://stackoverflow.com/questions/4786169/first-day-of-next-month-with-java-joda-time\">This SO Q&amp;A</a> does it both the crappy way, and the Joda Time way. Coincidentally also asked today. Tons of hits."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1327459648,"post_id":8997228,"comment_id":11276299,"body_markdown":"@RanRag It&#39;s over there on the right under the big &quot;Related&quot; header.","body":"@RanRag It&#39;s over there on the right under the big &quot;Related&quot; header."},{"owner":{"account_id":406517,"reputation":48699,"user_id":776084,"accept_rate":79,"display_name":"RanRag"},"score":0,"creation_date":1327459735,"post_id":8997228,"comment_id":11276306,"body_markdown":"oh yes sorry, i don&#39;t know why i wrote that comment. I think I have done too much coding for the day.","body":"oh yes sorry, i don&#39;t know why i wrote that comment. I think I have done too much coding for the day."},{"owner":{"account_id":6177253,"reputation":3107,"user_id":4813777,"display_name":"Taras Melnyk"},"score":0,"creation_date":1549355355,"post_id":8997228,"comment_id":95862066,"body_markdown":"It helped me: https://stackoverflow.com/a/14241940/4813777","body":"It helped me: <a href=\"https://stackoverflow.com/a/14241940/4813777\">stackoverflow.com/a/14241940/4813777</a>"}],"answers":[{"tags":[],"owner":{"account_id":48120,"reputation":93879,"user_id":142822,"display_name":"KV Prajapati"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1327459755,"creation_date":1327459335,"answer_id":8997248,"question_id":8997228,"body_markdown":"Create `java.util.Date` or `java.util.Calendar` object, set date value and use `java.text.SimpleDateFormat` class method to format it.\r\n\r\n     Calendar cal=Calendar.getInstance();\r\n     cal.set(Calendar.DATE,1);\r\n     cal.set(Calendar.MONTH,0);\r\n     cal.set(Calendar.YEAR,2012);\r\n            \r\n     SimpleDateFormat sdf=new SimpleDateFormat(&quot;EEEE&quot;);\r\n     System.out.println(sdf.format(cal.getTime()));","title":"How to get name of the first day of a month?","body":"<p>Create <code>java.util.Date</code> or <code>java.util.Calendar</code> object, set date value and use <code>java.text.SimpleDateFormat</code> class method to format it.</p>\n\n<pre><code> Calendar cal=Calendar.getInstance();\n cal.set(Calendar.DATE,1);\n cal.set(Calendar.MONTH,0);\n cal.set(Calendar.YEAR,2012);\n\n SimpleDateFormat sdf=new SimpleDateFormat(\"EEEE\");\n System.out.println(sdf.format(cal.getTime()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":921430,"reputation":7972,"user_id":953068,"accept_rate":59,"display_name":"Joe"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1327460310,"creation_date":1327460310,"answer_id":8997351,"question_id":8997228,"body_markdown":"    public int getFirstDay(){\r\n    \tCalendar c=new GregorianCalendar();\r\n    \tc.set(Calendar.DAY_OF_MONTH, 1);\r\n    \treturn c.get(Calendar.DAY_OF_WEEK);\r\n    }\r\n\r\nFrom there you can see if the int is equal to Calendar.SUNDAY, Calendar.MONDAY, etc.  ","title":"How to get name of the first day of a month?","body":"<pre><code>public int getFirstDay(){\n    Calendar c=new GregorianCalendar();\n    c.set(Calendar.DAY_OF_MONTH, 1);\n    return c.get(Calendar.DAY_OF_WEEK);\n}\n</code></pre>\n\n<p>From there you can see if the int is equal to Calendar.SUNDAY, Calendar.MONDAY, etc.  </p>\n"},{"tags":[],"owner":{"account_id":1108799,"reputation":10647,"user_id":1099643,"accept_rate":80,"display_name":"Kushan"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1439393876,"creation_date":1327461928,"answer_id":8997469,"question_id":8997228,"body_markdown":"You can create a `Calendar` with whatever date you want and then do `set(Calendar.DAY_OF_MONTH, 1)` to get the first day of a month.\r\n\r\n         Calendar cal = Calendar.getInstance();\r\n    \t cal.set(Calendar.DATE, 25);\r\n         cal.set(Calendar.MONTH, Calendar.JANUARY);\r\n         cal.set(Calendar.YEAR, 2012);\r\n\r\n    \t cal.set(Calendar.DAY_OF_MONTH, 1);\r\n    \t Date firstDayOfMonth = cal.getTime();  \r\n    \t  \r\n         DateFormat sdf = new SimpleDateFormat(&quot;EEEEEEEE&quot;);   \r\n         System.out.println(&quot;First Day of Month: &quot; + sdf.format(firstDayOfMonth));  ","title":"How to get name of the first day of a month?","body":"<p>You can create a <code>Calendar</code> with whatever date you want and then do <code>set(Calendar.DAY_OF_MONTH, 1)</code> to get the first day of a month.</p>\n\n<pre><code>     Calendar cal = Calendar.getInstance();\n     cal.set(Calendar.DATE, 25);\n     cal.set(Calendar.MONTH, Calendar.JANUARY);\n     cal.set(Calendar.YEAR, 2012);\n\n     cal.set(Calendar.DAY_OF_MONTH, 1);\n     Date firstDayOfMonth = cal.getTime();  \n\n     DateFormat sdf = new SimpleDateFormat(\"EEEEEEEE\");   \n     System.out.println(\"First Day of Month: \" + sdf.format(firstDayOfMonth));  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1772206,"reputation":493,"user_id":1616764,"display_name":"Nadeeshani"},"down_vote_count":0,"up_vote_count":45,"is_accepted":false,"score":45,"last_activity_date":1456332591,"creation_date":1357621421,"answer_id":14208492,"question_id":8997228,"body_markdown":"To get the first date of the current month, use `java.util.Calendar`. First get an instance of it and set the field `Calendar.DAY_OF_MONTH` to the first date of the month.  Since the first day of any month is 1, inplace of `cal.getActualMinimum(Calendar.DAY_OF_MONTH)`, 1 can be used here.\r\n\r\n    private Date getFirstDateOfCurrentMonth() {\r\n      Calendar cal = Calendar.getInstance();\r\n      cal.set(Calendar.DAY_OF_MONTH, cal.getActualMinimum(Calendar.DAY_OF_MONTH));\r\n      return cal.getTime();\r\n    }","title":"How to get name of the first day of a month?","body":"<p>To get the first date of the current month, use <code>java.util.Calendar</code>. First get an instance of it and set the field <code>Calendar.DAY_OF_MONTH</code> to the first date of the month.  Since the first day of any month is 1, inplace of <code>cal.getActualMinimum(Calendar.DAY_OF_MONTH)</code>, 1 can be used here.</p>\n\n<pre><code>private Date getFirstDateOfCurrentMonth() {\n  Calendar cal = Calendar.getInstance();\n  cal.set(Calendar.DAY_OF_MONTH, cal.getActualMinimum(Calendar.DAY_OF_MONTH));\n  return cal.getTime();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1304932,"reputation":2021,"user_id":1254091,"display_name":"Gabriel"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1400254135,"creation_date":1400254135,"answer_id":23699152,"question_id":8997228,"body_markdown":"In the Java 8 you can use the **TemporalAdjusters:** \r\n\r\nThis is an example:\r\n\r\n    import java.time.DayOfWeek;\r\n    import java.time.LocalDate;\r\n    import java.time.temporal.TemporalAdjusters;\r\n    \r\n    /**\r\n     * Dates in Java8\r\n     *\r\n     */\r\n    public class App {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tLocalDate localDate = LocalDate.now();\r\n    \t\tSystem.out.println(&quot;Day of Month: &quot; + localDate.getDayOfMonth());\r\n    \t\tSystem.out.println(&quot;Month: &quot; + localDate.getMonth());\r\n    \t\tSystem.out.println(&quot;Year: &quot; + localDate.getYear());\r\n    \r\n    \t\tSystem.out.printf(&quot;first day of Month: %s%n&quot;,\r\n    \t\t\t\tlocalDate.with(TemporalAdjusters.firstDayOfMonth()));\r\n    \t\tSystem.out.printf(&quot;first Monday of Month: %s%n&quot;, localDate\r\n    \t\t\t\t.with(TemporalAdjusters.firstInMonth(DayOfWeek.MONDAY)));\r\n    \t\tSystem.out.printf(&quot;last day of Month: %s%n&quot;,\r\n    \t\t\t\tlocalDate.with(TemporalAdjusters.lastDayOfMonth()));\r\n    \t\tSystem.out.printf(&quot;first day of next Month: %s%n&quot;,\r\n    \t\t\t\tlocalDate.with(TemporalAdjusters.firstDayOfNextMonth()));\r\n    \t\tSystem.out.printf(&quot;first day of next Year: %s%n&quot;,\r\n    \t\t\t\tlocalDate.with(TemporalAdjusters.firstDayOfNextYear()));\r\n    \t\tSystem.out.printf(&quot;first day of Year: %s%n&quot;,\r\n    \t\t\t\tlocalDate.with(TemporalAdjusters.firstDayOfYear()));\r\n    \r\n    \t\tLocalDate tomorrow = localDate.plusDays(1);\r\n    \t\tSystem.out.println(&quot;Day of Month: &quot; + tomorrow.getDayOfMonth());\r\n    \t\tSystem.out.println(&quot;Month: &quot; + tomorrow.getMonth());\r\n    \t\tSystem.out.println(&quot;Year: &quot; + tomorrow.getYear());\r\n    \t}\r\n    \r\n    }\r\n\r\nThe results would be:\r\n\r\n    Day of Month: 16\r\n    Month: MAY\r\n    Year: 2014\r\n    first day of Month: 2014-05-01\r\n    first Monday of Month: 2014-05-05\r\n    last day of Month: 2014-05-31\r\n    first day of next Month: 2014-06-01\r\n    first day of next Year: 2015-01-01\r\n    first day of Year: 2014-01-01\r\n    Last in Month Tuesday: 2014-05-27\r\n    Day of Month: 17\r\n    Month: MAY\r\n    Year: 2014","title":"How to get name of the first day of a month?","body":"<p>In the Java 8 you can use the <strong>TemporalAdjusters:</strong> </p>\n\n<p>This is an example:</p>\n\n<pre><code>import java.time.DayOfWeek;\nimport java.time.LocalDate;\nimport java.time.temporal.TemporalAdjusters;\n\n/**\n * Dates in Java8\n *\n */\npublic class App {\n    public static void main(String[] args) {\n        LocalDate localDate = LocalDate.now();\n        System.out.println(\"Day of Month: \" + localDate.getDayOfMonth());\n        System.out.println(\"Month: \" + localDate.getMonth());\n        System.out.println(\"Year: \" + localDate.getYear());\n\n        System.out.printf(\"first day of Month: %s%n\",\n                localDate.with(TemporalAdjusters.firstDayOfMonth()));\n        System.out.printf(\"first Monday of Month: %s%n\", localDate\n                .with(TemporalAdjusters.firstInMonth(DayOfWeek.MONDAY)));\n        System.out.printf(\"last day of Month: %s%n\",\n                localDate.with(TemporalAdjusters.lastDayOfMonth()));\n        System.out.printf(\"first day of next Month: %s%n\",\n                localDate.with(TemporalAdjusters.firstDayOfNextMonth()));\n        System.out.printf(\"first day of next Year: %s%n\",\n                localDate.with(TemporalAdjusters.firstDayOfNextYear()));\n        System.out.printf(\"first day of Year: %s%n\",\n                localDate.with(TemporalAdjusters.firstDayOfYear()));\n\n        LocalDate tomorrow = localDate.plusDays(1);\n        System.out.println(\"Day of Month: \" + tomorrow.getDayOfMonth());\n        System.out.println(\"Month: \" + tomorrow.getMonth());\n        System.out.println(\"Year: \" + tomorrow.getYear());\n    }\n\n}\n</code></pre>\n\n<p>The results would be:</p>\n\n<pre><code>Day of Month: 16\nMonth: MAY\nYear: 2014\nfirst day of Month: 2014-05-01\nfirst Monday of Month: 2014-05-05\nlast day of Month: 2014-05-31\nfirst day of next Month: 2014-06-01\nfirst day of next Year: 2015-01-01\nfirst day of Year: 2014-01-01\nLast in Month Tuesday: 2014-05-27\nDay of Month: 17\nMonth: MAY\nYear: 2014\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1441075132,"creation_date":1435747821,"answer_id":31159201,"question_id":8997228,"body_markdown":"# java.time\r\n\r\nSince Java 8 we can also use [`YearMonth`][1] class which allows us to create [`LocalDate`][2] objects with specified days (first, last). Then We can simply convert these dates to [`DayOfWeek`][3] [Enum][4] ([Tutorial][5]) and read its [`name`][6] property.\r\n\r\n\tYearMonth ym = YearMonth.of(2012, 1);\r\n\t\r\n\tString firstDay = ym.atDay(1).getDayOfWeek().name();\r\n\tString lastDay = ym.atEndOfMonth().getDayOfWeek().name();\r\n\t\r\n\tSystem.out.println(firstDay);\r\n\tSystem.out.println(lastDay);\r\n\r\nresult:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    SUNDAY\r\n    TUESDAY\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/time/YearMonth.html\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\r\n  [3]: http://docs.oracle.com/javase/8/docs/api/java/time/DayOfWeek.html\r\n  [4]: http://docs.oracle.com/javase/8/docs/api/java/lang/Enum.html\r\n  [5]: http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html\r\n  [6]: http://docs.oracle.com/javase/8/docs/api/java/lang/Enum.html#name--","title":"How to get name of the first day of a month?","body":"<h1>java.time</h1>\n\n<p>Since Java 8 we can also use <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/YearMonth.html\" rel=\"nofollow\"><code>YearMonth</code></a> class which allows us to create <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\" rel=\"nofollow\"><code>LocalDate</code></a> objects with specified days (first, last). Then We can simply convert these dates to <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/DayOfWeek.html\" rel=\"nofollow\"><code>DayOfWeek</code></a> <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Enum.html\" rel=\"nofollow\">Enum</a> (<a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html\" rel=\"nofollow\">Tutorial</a>) and read its <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Enum.html#name--\" rel=\"nofollow\"><code>name</code></a> property.</p>\n\n<pre><code>YearMonth ym = YearMonth.of(2012, 1);\n\nString firstDay = ym.atDay(1).getDayOfWeek().name();\nString lastDay = ym.atEndOfMonth().getDayOfWeek().name();\n\nSystem.out.println(firstDay);\nSystem.out.println(lastDay);\n</code></pre>\n\n<p>result:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>SUNDAY\nTUESDAY\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1452491034,"creation_date":1441076014,"answer_id":32322812,"question_id":8997228,"body_markdown":"# java.time, soft-coded\r\n\r\nThe [Answer][1] by Pshemo was good and clever, but is hard-coded to English. Let&#39;s take a stab at it allowing for localization.\r\n\r\n    ZoneId zoneId = ZoneId.of( &quot;America/Montreal&quot; ); // Time zone is crucial to determining a date.\r\n    YearMonth yearMonth = YearMonth.now( zoneId );\r\n    LocalDate firstOfMonth = yearMonth.atDay( 1 );\r\n\r\n## Formatter\r\n\r\nGenerate a textual representation of that [`LocalDate`][2]. We specify a desired [`Locale`][3], in this case [`CANADA_FRENCH`][4]. If omitted, your JVM’s current default Locale is implicitly applied; better to specify explicit Locale.\r\n\r\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern( &quot;EEEE&quot; ).withZone( zoneId ).withLocale( Locale.CANADA_FRENCH );  // Exactly four &#39;E&#39; letters means full form. http://docs.oracle.com/javase/8/docs/api/java/time/format/TextStyle.html#FULL\r\n    String output = formatter.format( firstOfMonth );\r\n\r\nDump to console.\r\n\r\n    System.out.println( &quot;output: &quot; + output );\r\n\r\nWhen run.\r\n\r\n&gt;samedi\r\n\r\n## `DayOfWeek` Enum\r\n\r\nAnother route is to use the [`DayOfWeek`][5] enum. This enum includes a [`getDisplayName`][6] method where you specify both the [text style][7] (full name versus abbreviation) and a `Locale`.\r\n\r\n    DayOfWeek dayOfWeek = firstOfMonth.getDayOfWeek() ;\r\n    String output = dayOfWeek.getDisplayName( TextStyle.FULL_STANDALONE  , Locale.CANADA_FRENCH ) ;\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/31159201/642706\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\r\n  [3]: http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html\r\n  [4]: http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html#CANADA_FRENCH\r\n  [5]: http://docs.oracle.com/javase/8/docs/api/java/time/DayOfWeek.html\r\n  [6]: http://docs.oracle.com/javase/8/docs/api/java/time/DayOfWeek.html#getDisplayName-java.time.format.TextStyle-java.util.Locale-\r\n  [7]: http://docs.oracle.com/javase/8/docs/api/java/time/format/TextStyle.html","title":"How to get name of the first day of a month?","body":"<h1>java.time, soft-coded</h1>\n\n<p>The <a href=\"https://stackoverflow.com/a/31159201/642706\">Answer</a> by Pshemo was good and clever, but is hard-coded to English. Let's take a stab at it allowing for localization.</p>\n\n<pre><code>ZoneId zoneId = ZoneId.of( \"America/Montreal\" ); // Time zone is crucial to determining a date.\nYearMonth yearMonth = YearMonth.now( zoneId );\nLocalDate firstOfMonth = yearMonth.atDay( 1 );\n</code></pre>\n\n<h2>Formatter</h2>\n\n<p>Generate a textual representation of that <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\" rel=\"nofollow noreferrer\"><code>LocalDate</code></a>. We specify a desired <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html\" rel=\"nofollow noreferrer\"><code>Locale</code></a>, in this case <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html#CANADA_FRENCH\" rel=\"nofollow noreferrer\"><code>CANADA_FRENCH</code></a>. If omitted, your JVM’s current default Locale is implicitly applied; better to specify explicit Locale.</p>\n\n<pre><code>DateTimeFormatter formatter = DateTimeFormatter.ofPattern( \"EEEE\" ).withZone( zoneId ).withLocale( Locale.CANADA_FRENCH );  // Exactly four 'E' letters means full form. http://docs.oracle.com/javase/8/docs/api/java/time/format/TextStyle.html#FULL\nString output = formatter.format( firstOfMonth );\n</code></pre>\n\n<p>Dump to console.</p>\n\n<pre><code>System.out.println( \"output: \" + output );\n</code></pre>\n\n<p>When run.</p>\n\n<blockquote>\n  <p>samedi</p>\n</blockquote>\n\n<h2><code>DayOfWeek</code> Enum</h2>\n\n<p>Another route is to use the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/DayOfWeek.html\" rel=\"nofollow noreferrer\"><code>DayOfWeek</code></a> enum. This enum includes a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/DayOfWeek.html#getDisplayName-java.time.format.TextStyle-java.util.Locale-\" rel=\"nofollow noreferrer\"><code>getDisplayName</code></a> method where you specify both the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/format/TextStyle.html\" rel=\"nofollow noreferrer\">text style</a> (full name versus abbreviation) and a <code>Locale</code>.</p>\n\n<pre><code>DayOfWeek dayOfWeek = firstOfMonth.getDayOfWeek() ;\nString output = dayOfWeek.getDisplayName( TextStyle.FULL_STANDALONE  , Locale.CANADA_FRENCH ) ;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1248750,"reputation":6094,"user_id":1209628,"accept_rate":100,"display_name":"Mark"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1540396806,"creation_date":1540391851,"answer_id":52971730,"question_id":8997228,"body_markdown":"# `TemporalAdjuster`\n\nIn java 8 you can use the new [LocalDate][1] and [LocalTime][2] API.\r\n\r\nTo achieve the coveted result, give a try to the following. It prints the name of the given day.\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n    \r\n    import java.time.*;\r\n    import java.time.temporal.*;\r\n\r\n    public class Main {\r\n      public static void main(String[] args) {\r\n        LocalDate l = LocalDate.now().with(TemporalAdjusters.firstDayOfMonth());\r\n        System.out.println(l.getDayOfWeek());\r\n      }\r\n    }\r\n\r\n\r\nExplanation:\r\n\r\n  - `now` gives you the current date.\r\n  - by calling `with` you can pass a [`TemporalAdjuster`][3] which are a key tool for modifying temporal objects.\r\n  - `getDayOfWeek` Gets the day-of-week field, which is an enum `DayOfWeek`.\r\nThis includes textual names of the values.\r\n\r\n`TemporalAdjuster` has a brother class, called [`TemporalAdjusters`][4] which contains static methods regarding the adjustments, like the one you are looking for, the `firstDayOfMonth`\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/time/temporal/TemporalAdjuster.html\r\n  [4]: https://docs.oracle.com/javase/8/docs/api/java/time/temporal/TemporalAdjusters.html","title":"How to get name of the first day of a month?","body":"<h1><code>TemporalAdjuster</code></h1>\n\n<p>In java 8 you can use the new <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\" rel=\"nofollow noreferrer\">LocalDate</a> and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html\" rel=\"nofollow noreferrer\">LocalTime</a> API.</p>\n\n<p>To achieve the coveted result, give a try to the following. It prints the name of the given day.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.time.*;\nimport java.time.temporal.*;\n\npublic class Main {\n  public static void main(String[] args) {\n    LocalDate l = LocalDate.now().with(TemporalAdjusters.firstDayOfMonth());\n    System.out.println(l.getDayOfWeek());\n  }\n}\n</code></pre>\n\n<p>Explanation:</p>\n\n<ul>\n<li><code>now</code> gives you the current date.</li>\n<li>by calling <code>with</code> you can pass a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/temporal/TemporalAdjuster.html\" rel=\"nofollow noreferrer\"><code>TemporalAdjuster</code></a> which are a key tool for modifying temporal objects.</li>\n<li><code>getDayOfWeek</code> Gets the day-of-week field, which is an enum <code>DayOfWeek</code>.\nThis includes textual names of the values.</li>\n</ul>\n\n<p><code>TemporalAdjuster</code> has a brother class, called <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/temporal/TemporalAdjusters.html\" rel=\"nofollow noreferrer\"><code>TemporalAdjusters</code></a> which contains static methods regarding the adjustments, like the one you are looking for, the <code>firstDayOfMonth</code></p>\n"},{"tags":[],"owner":{"account_id":4106549,"reputation":715,"user_id":3370387,"display_name":"Suhad Bin Zubair"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640081291,"creation_date":1640081291,"answer_id":70433700,"question_id":8997228,"body_markdown":"**Simple and tricky answer**\r\n\r\n        val calendar = Date()    \r\n        val sdf = SimpleDateFormat(&quot;yyyy-MM-01 00:00:00&quot;, Locale.getDefault())\r\n        var result = sdf.format(calendar)\r\n\r\nyyyy-MM-01 -&gt; dd change to 01\r\n","title":"How to get name of the first day of a month?","body":"<p><strong>Simple and tricky answer</strong></p>\n<pre><code>    val calendar = Date()    \n    val sdf = SimpleDateFormat(&quot;yyyy-MM-01 00:00:00&quot;, Locale.getDefault())\n    var result = sdf.format(calendar)\n</code></pre>\n<p>yyyy-MM-01 -&gt; dd change to 01</p>\n"}],"owner":{"account_id":1193952,"reputation":321,"user_id":1166089,"display_name":"Austin Donovan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74858,"favorite_count":0,"down_vote_count":0,"up_vote_count":32,"answer_count":9,"score":32,"last_activity_date":1640081291,"creation_date":1327459154,"question_id":8997228,"body_markdown":"How would I go about getting the first day of the month?  So for January, of this year, it would return Sunday.  And then for February it would return Wednesday.","title":"How to get name of the first day of a month?","body":"<p>How would I go about getting the first day of the month?  So for January, of this year, it would return Sunday.  And then for February it would return Wednesday.</p>\n"},{"tags":["java","android","playing-cards"],"comments":[{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":1,"creation_date":1640082920,"post_id":70433217,"comment_id":124505695,"body_markdown":"You don&#39;t need a different `Random` instance for each value you generate. You just need one.","body":"You don&#39;t need a different <code>Random</code> instance for each value you generate. You just need one."}],"answers":[{"tags":[],"owner":{"account_id":6440866,"reputation":564,"user_id":4990927,"display_name":"Sean Powell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640080811,"creation_date":1640080811,"answer_id":70433583,"question_id":70433217,"body_markdown":"It would be best i think for you to create an object called Card\r\n\r\n    public class Card{\r\n        private int cardValue;\r\n\r\n        public Card(int cardValue){\r\n\r\n            this.cardValue = cardValue;\r\n        }\r\n\r\n        public int GetCardValue(){\r\n            return cardValue;\r\n        }\r\n    }\r\n\r\nI am not sure what other information you want to store on this card but it can easily be added by adding it to the constructor as was done with `cardValue` on the `Card` method. This will then allow you to store the `Card` object and when you want to compare them, you would call `card1.GetCardValue()` which will return the value in the `cardValue` variable. This will allow you to do the comparison which you are trying to do.\r\n\r\nyou would create a Card object with \r\n\r\n    Card card = new Card(5); // this would set the cards value to 5.\r\n\r\nIf you have any more questions feel free to comment an ill help you out as i am not entirely sure what other information about the card you need to store.","title":"Assign int value to image for compare with higher value wins (card game)","body":"<p>It would be best i think for you to create an object called Card</p>\n<pre><code>public class Card{\n    private int cardValue;\n\n    public Card(int cardValue){\n\n        this.cardValue = cardValue;\n    }\n\n    public int GetCardValue(){\n        return cardValue;\n    }\n}\n</code></pre>\n<p>I am not sure what other information you want to store on this card but it can easily be added by adding it to the constructor as was done with <code>cardValue</code> on the <code>Card</code> method. This will then allow you to store the <code>Card</code> object and when you want to compare them, you would call <code>card1.GetCardValue()</code> which will return the value in the <code>cardValue</code> variable. This will allow you to do the comparison which you are trying to do.</p>\n<p>you would create a Card object with</p>\n<pre><code>Card card = new Card(5); // this would set the cards value to 5.\n</code></pre>\n<p>If you have any more questions feel free to comment an ill help you out as i am not entirely sure what other information about the card you need to store.</p>\n"}],"owner":{"account_id":23708505,"reputation":29,"user_id":17730684,"display_name":"Sandman"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70433583,"answer_count":1,"score":0,"last_activity_date":1640080811,"creation_date":1640079077,"question_id":70433217,"body_markdown":"I&#39;m a rookie programmer and I&#39;m trying to develop a card game based on higher wins. \r\nThe problem is, I don&#39;t know how to assign int values to cards to compare. \r\nLet&#39;s say there are 46 cards, each one has a different value, something like:\r\n\r\n    int peter = 19; \r\n    int jack = 26; \r\n    int martin = 22; \r\n    //...and so on\r\nThere are two players, each one has four randomly generated cards (I did it like this, so I can cast  flip animation on each one, it&#39;s a bit clumsy but it works)\r\n\r\n        //Assign my cards\r\n        TypedArray my_cards = res.obtainTypedArray(R.array.mycards);\r\n        final Random random5 = new Random();\r\n        final Random random6 = new Random();\r\n        final Random random7 = new Random();\r\n        final Random random8 = new Random();\r\n\r\n        //Generate random indexes for my cards\r\n        int RandomCard5 = random5.nextInt(my_cards.length());\r\n        int RandomCard6 = random6.nextInt(my_cards.length());\r\n        int RandomCard7 = random7.nextInt(my_cards.length());\r\n        int RandomCard8 = random8.nextInt(my_cards.length());\r\n        //Generate my cards from RandomCard\r\n        int drawableCard5 = my_cards.getResourceId(RandomCard5,-1);\r\n        int drawableCard6 = my_cards.getResourceId(RandomCard6,-1);\r\n        int drawableCard7 = my_cards.getResourceId(RandomCard7,-1);\r\n        int drawableCard8 = my_cards.getResourceId(RandomCard8,-1);\r\n        //Deal my cards\r\n        card1.setImageResource(drawableCard5);\r\n        card2.setImageResource(drawableCard6);\r\n        card3.setImageResource(drawableCard7);\r\n        card4.setImageResource(drawableCard8);\r\n\r\nAs you can see, I&#39;m using typedArray (Not sure if it&#39;s a good idea for this).\r\nFor the enemy cards it&#39;s the same. \r\nAfter choosing a card for a fight (confirm button), it&#39;s transfered to other ImageView (fightcard1) and an enemy card is randomly choosen from those four random cards and transfered to ImageView (fightcard2).\r\n\r\nNow I need to compare those cards (let&#39;s say those cards will have values 19 and 24). \r\nThe compare function shouldn&#39;t be a problem, but I have no idea how to assign those specific int values to specific cards. \r\nIs there a way I could do this with my current &quot;garbage&quot; code, or is there a better and easier way with some/complete rewriting?\r\n\r\nThanks.","title":"Assign int value to image for compare with higher value wins (card game)","body":"<p>I'm a rookie programmer and I'm trying to develop a card game based on higher wins.\nThe problem is, I don't know how to assign int values to cards to compare.\nLet's say there are 46 cards, each one has a different value, something like:</p>\n<pre><code>int peter = 19; \nint jack = 26; \nint martin = 22; \n//...and so on\n</code></pre>\n<p>There are two players, each one has four randomly generated cards (I did it like this, so I can cast  flip animation on each one, it's a bit clumsy but it works)</p>\n<pre><code>    //Assign my cards\n    TypedArray my_cards = res.obtainTypedArray(R.array.mycards);\n    final Random random5 = new Random();\n    final Random random6 = new Random();\n    final Random random7 = new Random();\n    final Random random8 = new Random();\n\n    //Generate random indexes for my cards\n    int RandomCard5 = random5.nextInt(my_cards.length());\n    int RandomCard6 = random6.nextInt(my_cards.length());\n    int RandomCard7 = random7.nextInt(my_cards.length());\n    int RandomCard8 = random8.nextInt(my_cards.length());\n    //Generate my cards from RandomCard\n    int drawableCard5 = my_cards.getResourceId(RandomCard5,-1);\n    int drawableCard6 = my_cards.getResourceId(RandomCard6,-1);\n    int drawableCard7 = my_cards.getResourceId(RandomCard7,-1);\n    int drawableCard8 = my_cards.getResourceId(RandomCard8,-1);\n    //Deal my cards\n    card1.setImageResource(drawableCard5);\n    card2.setImageResource(drawableCard6);\n    card3.setImageResource(drawableCard7);\n    card4.setImageResource(drawableCard8);\n</code></pre>\n<p>As you can see, I'm using typedArray (Not sure if it's a good idea for this).\nFor the enemy cards it's the same.\nAfter choosing a card for a fight (confirm button), it's transfered to other ImageView (fightcard1) and an enemy card is randomly choosen from those four random cards and transfered to ImageView (fightcard2).</p>\n<p>Now I need to compare those cards (let's say those cards will have values 19 and 24).\nThe compare function shouldn't be a problem, but I have no idea how to assign those specific int values to specific cards.\nIs there a way I could do this with my current &quot;garbage&quot; code, or is there a better and easier way with some/complete rewriting?</p>\n<p>Thanks.</p>\n"},{"tags":["java","android","xml","datepicker","epoch"],"answers":[{"tags":[],"owner":{"account_id":11079440,"reputation":360,"user_id":8135043,"display_name":"Shahnawaz Ansari"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640076673,"creation_date":1640072762,"answer_id":70432061,"question_id":70431990,"body_markdown":"The format for your date is `EEE MMM dd HH:mm:ss zzzz yyyy`\r\n\r\n    String date = &quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot;;\r\n    try {\r\n        val sdf = SimpleDateFormat(&quot;EEE MMM dd HH:mm:ss zzzz yyyy&quot;)\r\n        val mDate = sdf.parse(date)\r\n        val epochTime = TimeUnit.MILLISECONDS.toSeconds(mDate.time)\r\n    } catch (e: ParseException) {\r\n        e.printStackTrace()\r\n    }\r\n       \r\nVariable `epochTime` will have the seconds stored in it.     \r\nTo convert it back to a format you can do -\r\n\r\n    val sdf = SimpleDateFormat(&quot;EEE MMM dd HH:mm:ss zzzz yyyy&quot;)\r\n    sdf.format(epochTime)\r\n\r\n**Latest Java 8 Requires Min Api Level 26**\r\n\r\n        String date = &quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot;;\r\n        DateTimeFormatter format = DateTimeFormatter.ofPattern(&quot;EEE MMM dd HH:mm:ss zzzz yyyy&quot;);\r\n        LocalDateTime parsedDate = LocalDateTime.parse(date, format);\r\n        val milliSeconds = parsedDate.atZone(ZoneId.systemDefault()).toInstant().toEpochMilli();","title":"How do I convert this time format into epoch in java? &quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot; to Epoch","body":"<p>The format for your date is <code>EEE MMM dd HH:mm:ss zzzz yyyy</code></p>\n<pre><code>String date = &quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot;;\ntry {\n    val sdf = SimpleDateFormat(&quot;EEE MMM dd HH:mm:ss zzzz yyyy&quot;)\n    val mDate = sdf.parse(date)\n    val epochTime = TimeUnit.MILLISECONDS.toSeconds(mDate.time)\n} catch (e: ParseException) {\n    e.printStackTrace()\n}\n   \n</code></pre>\n<p>Variable <code>epochTime</code> will have the seconds stored in it.<br />\nTo convert it back to a format you can do -</p>\n<pre><code>val sdf = SimpleDateFormat(&quot;EEE MMM dd HH:mm:ss zzzz yyyy&quot;)\nsdf.format(epochTime)\n</code></pre>\n<p><strong>Latest Java 8 Requires Min Api Level 26</strong></p>\n<pre><code>    String date = &quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot;;\n    DateTimeFormatter format = DateTimeFormatter.ofPattern(&quot;EEE MMM dd HH:mm:ss zzzz yyyy&quot;);\n    LocalDateTime parsedDate = LocalDateTime.parse(date, format);\n    val milliSeconds = parsedDate.atZone(ZoneId.systemDefault()).toInstant().toEpochMilli();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22523913,"reputation":98,"user_id":16925151,"display_name":"danklad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640075398,"creation_date":1640075398,"answer_id":70432507,"question_id":70431990,"body_markdown":"By Following Ansari&#39;s Answer, I did this to convert it into Epoch\r\n\r\n    SimpleDateFormat sdf3 = new SimpleDateFormat(&quot;EEE MMM dd HH:mm:ss zzzz yyyy&quot;, Locale.ENGLISH);\r\n    \r\n    Date d1 = null;\r\n    try{\r\n    d1 = sdf3.parse(&quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot;);\r\n    epochTime = TimeUnit.MILLISECONDS.toSeconds(d1.getTime());\r\n    Log.e(&quot;epoch time&quot;, &quot;onDateSelected: &quot;+epochTime );\r\n    }\r\n    catch (Exception e){ e.printStackTrace(); }","title":"How do I convert this time format into epoch in java? &quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot; to Epoch","body":"<p>By Following Ansari's Answer, I did this to convert it into Epoch</p>\n<pre><code>SimpleDateFormat sdf3 = new SimpleDateFormat(&quot;EEE MMM dd HH:mm:ss zzzz yyyy&quot;, Locale.ENGLISH);\n\nDate d1 = null;\ntry{\nd1 = sdf3.parse(&quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot;);\nepochTime = TimeUnit.MILLISECONDS.toSeconds(d1.getTime());\nLog.e(&quot;epoch time&quot;, &quot;onDateSelected: &quot;+epochTime );\n}\ncatch (Exception e){ e.printStackTrace(); }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640080751,"creation_date":1640080283,"answer_id":70433464,"question_id":70431990,"body_markdown":"Alternative solution with `java.time.OffsetDateTime`\r\n---\r\n\r\nHere&#39;s an alternative solution that makes use of `java.time` keeping all the information of the input `String`:\r\n\r\n```java\r\npublic static void main(String[] args) throws IOException {\r\n\t// input\r\n\tString dpDate = &quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot;;\r\n\t// define a formatter with the pattern and locale of the input\r\n\tDateTimeFormatter dtf = DateTimeFormatter.ofPattern(\r\n\t\t\t&quot;EEE MMM dd HH:mm:ss OOOO uuuu&quot;, Locale.ENGLISH);\r\n\t// parse the input to an OffsetDateTime using the formatter\r\n\tOffsetDateTime odt = OffsetDateTime.parse(dpDate, dtf);\r\n\t// receive the moment in time represented by the OffsetDateTime\r\n\tInstant instant = odt.toInstant();\r\n\t// extract its epoch millis\r\n\tlong epochMillis = instant.toEpochMilli();\r\n\t// and the epoch seconds\r\n\tlong epochSeconds = instant.getEpochSecond();\r\n\t// and print all the values\r\n\tSystem.out.println(String.format(&quot;%s ---&gt; %d (ms), %d (s)&quot;,\r\n\t\t\t\t\t\t\t\t\t\todt, epochMillis, epochSeconds));\r\n}\r\n```\r\nOutput:\r\n\r\n```lang-none\r\n2021-12-28T16:55+05:30 ---&gt; 1640690700000 (ms), 1640690700 (s)\r\n```\r\n\r\nA `LocalDateTime` should not be used here, because you may lose the information about the offset and a `ZonedDateTime` can neither be used due to the input lacking information about a zone like `&quot;Asia/Kolkata&quot;` or `&quot;America/Chicago&quot;`, it just provides an offset from UTC.\r\n\r\nIf you simply want to get the epoch millis, you can write a short method:\r\n\r\n```java\r\n// define a constant formatter in the desired class\r\nprivate static final DateTimeFormatter DTF_INPUT =\r\n        DateTimeFormatter dtf = DateTimeFormatter.ofPattern(\r\n            &quot;EEE MMM dd HH:mm:ss OOOO uuuu&quot;, Locale.ENGLISH);\r\n\r\n…\r\n\r\n/**\r\n * parses the input, converts to an instant and returns the millis\r\n */\r\npublic static long getEpochMillisFrom(String input) {\r\n    return OffsetDateTime.parse(input, DTF_INPUT)\r\n\t\t\t\t         .toInstant()\r\n\t\t\t\t         .toEpochMilli();\r\n}\r\n```","title":"How do I convert this time format into epoch in java? &quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot; to Epoch","body":"<h2>Alternative solution with <code>java.time.OffsetDateTime</code></h2>\n<p>Here's an alternative solution that makes use of <code>java.time</code> keeping all the information of the input <code>String</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) throws IOException {\n    // input\n    String dpDate = &quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot;;\n    // define a formatter with the pattern and locale of the input\n    DateTimeFormatter dtf = DateTimeFormatter.ofPattern(\n            &quot;EEE MMM dd HH:mm:ss OOOO uuuu&quot;, Locale.ENGLISH);\n    // parse the input to an OffsetDateTime using the formatter\n    OffsetDateTime odt = OffsetDateTime.parse(dpDate, dtf);\n    // receive the moment in time represented by the OffsetDateTime\n    Instant instant = odt.toInstant();\n    // extract its epoch millis\n    long epochMillis = instant.toEpochMilli();\n    // and the epoch seconds\n    long epochSeconds = instant.getEpochSecond();\n    // and print all the values\n    System.out.println(String.format(&quot;%s ---&gt; %d (ms), %d (s)&quot;,\n                                        odt, epochMillis, epochSeconds));\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>2021-12-28T16:55+05:30 ---&gt; 1640690700000 (ms), 1640690700 (s)\n</code></pre>\n<p>A <code>LocalDateTime</code> should not be used here, because you may lose the information about the offset and a <code>ZonedDateTime</code> can neither be used due to the input lacking information about a zone like <code>&quot;Asia/Kolkata&quot;</code> or <code>&quot;America/Chicago&quot;</code>, it just provides an offset from UTC.</p>\n<p>If you simply want to get the epoch millis, you can write a short method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// define a constant formatter in the desired class\nprivate static final DateTimeFormatter DTF_INPUT =\n        DateTimeFormatter dtf = DateTimeFormatter.ofPattern(\n            &quot;EEE MMM dd HH:mm:ss OOOO uuuu&quot;, Locale.ENGLISH);\n\n…\n\n/**\n * parses the input, converts to an instant and returns the millis\n */\npublic static long getEpochMillisFrom(String input) {\n    return OffsetDateTime.parse(input, DTF_INPUT)\n                         .toInstant()\n                         .toEpochMilli();\n}\n</code></pre>\n"}],"owner":{"account_id":22523913,"reputation":98,"user_id":16925151,"display_name":"danklad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":529,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70433464,"answer_count":3,"score":0,"last_activity_date":1640080751,"creation_date":1640072270,"question_id":70431990,"body_markdown":"I am using &#39;Single Date and Time Picker&#39; Library in my Android Project but it only returns date and time in the below mentioned format.\r\n\r\n&quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot; \r\n\r\nI want to convert this into epoch time format. \r\n\r\nLibrary:\r\nhttps://github.com/florent37/SingleDateAndTimePicker","title":"How do I convert this time format into epoch in java? &quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot; to Epoch","body":"<p>I am using 'Single Date and Time Picker' Library in my Android Project but it only returns date and time in the below mentioned format.</p>\n<p>&quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot;</p>\n<p>I want to convert this into epoch time format.</p>\n<p>Library:\n<a href=\"https://github.com/florent37/SingleDateAndTimePicker\" rel=\"nofollow noreferrer\">https://github.com/florent37/SingleDateAndTimePicker</a></p>\n"},{"tags":["java","database","azure","azure-devops","dataverse"],"comments":[{"owner":{"account_id":2040965,"reputation":1492,"user_id":1822181,"display_name":"J-M"},"score":0,"creation_date":1639993499,"post_id":70418344,"comment_id":124480762,"body_markdown":"There are at least three different ways I could think of to achieve this in Dataverse. Please specify more detsils about your requirements. Do you need previous value of the changed field? Do you only need to detect changes to a single specific attribute, or maybe any attribute? Any other requirements that come to mind?","body":"There are at least three different ways I could think of to achieve this in Dataverse. Please specify more detsils about your requirements. Do you need previous value of the changed field? Do you only need to detect changes to a single specific attribute, or maybe any attribute? Any other requirements that come to mind?"},{"owner":{"account_id":23392463,"reputation":183,"user_id":17456952,"display_name":"anonymous"},"score":0,"creation_date":1639995451,"post_id":70418344,"comment_id":124481396,"body_markdown":"Hello @JevgenijMartynenko, I have added more details to the question. Please let me know if you need more details. Thanks","body":"Hello @JevgenijMartynenko, I have added more details to the question. Please let me know if you need more details. Thanks"}],"answers":[{"tags":[],"owner":{"account_id":2040965,"reputation":1492,"user_id":1822181,"display_name":"J-M"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640080378,"creation_date":1640077488,"answer_id":70432891,"question_id":70418344,"body_markdown":"Solution 1: Custom changes table\r\n================================\r\n*If you may and can extend your current Dataverse environment*\r\n\r\n1. Create a new table called **Employee Change**. Add a column of type Lookup named **Employee** and link it to your **Employee** table\r\n2. Modify Main Form and add **Employee** column to the form\r\n3. Create a workflow process which would fire on field change. Inside the workflow process you create an **Employee Change** record and set lookup column value to the changed record\r\n\r\nYou can now query Employee Change table for changed records. You would need to expand the lookup column to get required columns from Employee table. \r\n\r\nExample Web API query:\r\n\r\n    GET [Organization URI]/api/data/v9.1/employee?$select=createdon, employeeid\r\n    &amp;$expand=employeeid($select=employeeid,fullname,column2,column3) HTTP/1.1  \r\n    Accept: application/json  \r\n    OData-MaxVersion: 4.0  \r\n    OData-Version: 4.0\r\n\r\nMore info on expanding lookup columns can be found [here][1] \r\n\r\n\r\nSolution 2: Auditing\r\n====================\r\n*Use built-in auditing feature*\r\n\r\n1. Make sure auditing is enabled. Details can be found in [docs][2]\r\n2. Enable auditing on required column in **Employee** table\r\n3. [Query audit records][3] for changes in **Employee** table. You have to pay attention only to changes to specific attributes of interest\r\n4. You will get a list of records changed and then you have to query once again to retrieve columns of the records\r\n\r\nSolution 3: Push instead of pull\r\n================================\r\nIt might make more sense to push changes from Dataverse to your API instead of constantly querying for changes.\r\nYou could use Microsoft Power Automate to create a simple flow which would call your API / platform when change is detected in Dataverse  \r\n\r\nA good start could be exploring the following Power Automate template: [When a record is updated in Microsoft Dataverse, send an email][4]. You could then replace &quot;send email&quot; steps with querying other APIs\r\n\r\n  [1]: https://learn.microsoft.com/en-us/powerapps/developer/data-platform/webapi/query-data-web-api#retrieve-related-rows-records-by-expanding-both-single-valued-and-collection-valued-navigation-properties\r\n  [2]: https://learn.microsoft.com/en-us/powerapps/developer/data-platform/configure-entities-attributes-auditing\r\n  [3]: https://learn.microsoft.com/en-us/powerapps/developer/data-platform/retrieve-and-delete-the-history-of-audited-data-changes\r\n  [4]: https://powerautomate.microsoft.com/en-us/templates/details/4da7dbf98cec40e9bcce29c80d305307/when-a-record-is-updated-in-microsoft-dataverse-send-an-email/","title":"How to detect changes in records of Dataverse tables","body":"<h1>Solution 1: Custom changes table</h1>\n<p><em>If you may and can extend your current Dataverse environment</em></p>\n<ol>\n<li>Create a new table called <strong>Employee Change</strong>. Add a column of type Lookup named <strong>Employee</strong> and link it to your <strong>Employee</strong> table</li>\n<li>Modify Main Form and add <strong>Employee</strong> column to the form</li>\n<li>Create a workflow process which would fire on field change. Inside the workflow process you create an <strong>Employee Change</strong> record and set lookup column value to the changed record</li>\n</ol>\n<p>You can now query Employee Change table for changed records. You would need to expand the lookup column to get required columns from Employee table.</p>\n<p>Example Web API query:</p>\n<pre><code>GET [Organization URI]/api/data/v9.1/employee?$select=createdon, employeeid\n&amp;$expand=employeeid($select=employeeid,fullname,column2,column3) HTTP/1.1  \nAccept: application/json  \nOData-MaxVersion: 4.0  \nOData-Version: 4.0\n</code></pre>\n<p>More info on expanding lookup columns can be found <a href=\"https://learn.microsoft.com/en-us/powerapps/developer/data-platform/webapi/query-data-web-api#retrieve-related-rows-records-by-expanding-both-single-valued-and-collection-valued-navigation-properties\" rel=\"nofollow noreferrer\">here</a></p>\n<h1>Solution 2: Auditing</h1>\n<p><em>Use built-in auditing feature</em></p>\n<ol>\n<li>Make sure auditing is enabled. Details can be found in <a href=\"https://learn.microsoft.com/en-us/powerapps/developer/data-platform/configure-entities-attributes-auditing\" rel=\"nofollow noreferrer\">docs</a></li>\n<li>Enable auditing on required column in <strong>Employee</strong> table</li>\n<li><a href=\"https://learn.microsoft.com/en-us/powerapps/developer/data-platform/retrieve-and-delete-the-history-of-audited-data-changes\" rel=\"nofollow noreferrer\">Query audit records</a> for changes in <strong>Employee</strong> table. You have to pay attention only to changes to specific attributes of interest</li>\n<li>You will get a list of records changed and then you have to query once again to retrieve columns of the records</li>\n</ol>\n<h1>Solution 3: Push instead of pull</h1>\n<p>It might make more sense to push changes from Dataverse to your API instead of constantly querying for changes.\nYou could use Microsoft Power Automate to create a simple flow which would call your API / platform when change is detected in Dataverse</p>\n<p>A good start could be exploring the following Power Automate template: <a href=\"https://powerautomate.microsoft.com/en-us/templates/details/4da7dbf98cec40e9bcce29c80d305307/when-a-record-is-updated-in-microsoft-dataverse-send-an-email/\" rel=\"nofollow noreferrer\">When a record is updated in Microsoft Dataverse, send an email</a>. You could then replace &quot;send email&quot; steps with querying other APIs</p>\n"}],"owner":{"account_id":23392463,"reputation":183,"user_id":17456952,"display_name":"anonymous"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2568,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640080378,"creation_date":1639983630,"question_id":70418344,"body_markdown":"I have a requirement to fetch the records from the Dataverse in which some changes have been done in specif columns values. For example, let&#39;s say we have a table named employee in which we have a field called position which can be changed over time from intern, software developer, development lead, etc. If we have 10 records currently and if the position of one of the employees gets changed, I need only that one employee record. I have gone through [Retrieve and detect changes to table definitions][1] but I believe it is related to changes in the schema and not related changes in the data. I am using the Spring Boot with Java 11 and to work with Dataverse I am using the [Olingo][2] library and also may use the Web APIs if required. Is there a way to detect the changes in the data as described above? \r\n\r\n\r\n----------\r\n**EDIT**\r\n\r\nTo add more details we will have a scheduled job that triggers at X minutes which needs to fetch the employee data for which position has changed from the last fetch time of X minutes. As we can see in the image below, all 3 records are being updated in that X minutes internal and last modified time has been updated for all. I need to fetch the records highlighted in green for which position attribute has changed. For a record with Id 2, I don&#39;t need to fetch it as the position is the same. \r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/powerapps/developer/data-platform/org-service/metadata-retrieve-detect-changes\r\n  [2]: https://olingo.apache.org/doc/odata4/index.html\r\n  [3]: https://i.stack.imgur.com/JFOZv.png","title":"How to detect changes in records of Dataverse tables","body":"<p>I have a requirement to fetch the records from the Dataverse in which some changes have been done in specif columns values. For example, let's say we have a table named employee in which we have a field called position which can be changed over time from intern, software developer, development lead, etc. If we have 10 records currently and if the position of one of the employees gets changed, I need only that one employee record. I have gone through <a href=\"https://learn.microsoft.com/en-us/powerapps/developer/data-platform/org-service/metadata-retrieve-detect-changes\" rel=\"nofollow noreferrer\">Retrieve and detect changes to table definitions</a> but I believe it is related to changes in the schema and not related changes in the data. I am using the Spring Boot with Java 11 and to work with Dataverse I am using the <a href=\"https://olingo.apache.org/doc/odata4/index.html\" rel=\"nofollow noreferrer\">Olingo</a> library and also may use the Web APIs if required. Is there a way to detect the changes in the data as described above?</p>\n<hr />\n<p><strong>EDIT</strong></p>\n<p>To add more details we will have a scheduled job that triggers at X minutes which needs to fetch the employee data for which position has changed from the last fetch time of X minutes. As we can see in the image below, all 3 records are being updated in that X minutes internal and last modified time has been updated for all. I need to fetch the records highlighted in green for which position attribute has changed. For a record with Id 2, I don't need to fetch it as the position is the same.</p>\n<p><a href=\"https://i.stack.imgur.com/JFOZv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JFOZv.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","spring-boot","projection"],"comments":[{"owner":{"account_id":10814530,"reputation":4195,"user_id":7954021,"display_name":"Renis1235"},"score":1,"creation_date":1640073910,"post_id":70431871,"comment_id":124502598,"body_markdown":"What does `demoRepository.findAll()` return?","body":"What does <code>demoRepository.findAll()</code> return?"},{"owner":{"display_name":"user17676679"},"score":0,"creation_date":1640074556,"post_id":70431871,"comment_id":124502800,"body_markdown":"It returns projection of course","body":"It returns projection of course"},{"owner":{"account_id":21330249,"reputation":297,"user_id":15702124,"display_name":"LenglBoy"},"score":0,"creation_date":1640074649,"post_id":70431871,"comment_id":124502832,"body_markdown":"`findAll()` seems to return more than 1 object and it is mapped to touples and not into just 1 single object. That means you can&#39;t access directly a field like you do with having a single object.\nYou should re-think your naming conventions.","body":"<code>findAll()</code> seems to return more than 1 object and it is mapped to touples and not into just 1 single object. That means you can&#39;t access directly a field like you do with having a single object. You should re-think your naming conventions."},{"owner":{"display_name":"user17676679"},"score":0,"creation_date":1640074784,"post_id":70431871,"comment_id":124502876,"body_markdown":"No, it returns exactly one single element in `DemoProjection` type.Sorry, I mistyped its name.","body":"No, it returns exactly one single element in <code>DemoProjection</code> type.Sorry, I mistyped its name."},{"owner":{"account_id":21330249,"reputation":297,"user_id":15702124,"display_name":"LenglBoy"},"score":0,"creation_date":1640075447,"post_id":70431871,"comment_id":124503094,"body_markdown":"Set a breakpoint and stop the code on `setLabel()`. You will see that your object might look different. MAybe not the main object itself but the label attribute.","body":"Set a breakpoint and stop the code on <code>setLabel()</code>. You will see that your object might look different. MAybe not the main object itself but the label attribute."},{"owner":{"display_name":"user17676679"},"score":0,"creation_date":1640076398,"post_id":70431871,"comment_id":124503402,"body_markdown":"my demo variable seems `org.springframework.data.jpa.repository.query.AbstractJpaQuery$TupleConverter$TupleBackedMap@20bdc2ce`","body":"my demo variable seems <code>org.springframework.data.jpa.repository.query.AbstractJpaQue&zwnj;&#8203;ry$TupleConverter$Tu&zwnj;&#8203;pleBackedMap@20bdc2c&zwnj;&#8203;e</code>"}],"answers":[{"tags":[],"owner":{"account_id":12173205,"reputation":101,"user_id":8887170,"display_name":"Aleksander Ndoci"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640077915,"creation_date":1640077915,"answer_id":70432972,"question_id":70431871,"body_markdown":"You can&#39;t actually do that. Spring Data uses proxies and AOP to bind the query result to your projection interface, and since it&#39;s an interface you can&#39;t change that in a magical way. I would suggest creating a model/dto and map your projection values there: \r\n\r\n    public class DemoDto {\r\n      private String uuid;\r\n      private String name;\r\n      private String surname;\r\n      \r\n      //getters and setters ommited for brevity\r\n    }\r\n\r\nYou can create a DemoDto object with your desired values.\r\n\r\nIn alternative, you can use a projection class instead of a projection interface. Check spring docs on how to do that :) ","title":"How to set variable in Java projection?","body":"<p>You can't actually do that. Spring Data uses proxies and AOP to bind the query result to your projection interface, and since it's an interface you can't change that in a magical way. I would suggest creating a model/dto and map your projection values there:</p>\n<pre><code>public class DemoDto {\n  private String uuid;\n  private String name;\n  private String surname;\n  \n  //getters and setters ommited for brevity\n}\n</code></pre>\n<p>You can create a DemoDto object with your desired values.</p>\n<p>In alternative, you can use a projection class instead of a projection interface. Check spring docs on how to do that :)</p>\n"},{"tags":[],"owner":{"account_id":16657879,"reputation":2625,"user_id":12038714,"display_name":"J Asgarov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640080309,"creation_date":1640080309,"answer_id":70433470,"question_id":70431871,"body_markdown":"Just create a default method in your DemoProjection interface to return getLabel formatted as you wish:\r\n\r\n    public interface DemoProjection {\r\n      UUID getUuid();\r\n      String getName();\r\n      String getSurname();\r\n\r\n      default String getLabel() {\r\n          return String.format(\r\n                &quot;Name: %s%nSurnamame Surname: %s&quot;,\r\n                geteName(),\r\n                getSurname());\r\n      }\r\n    }\r\n\r\nthis is required as you can&#39;t set a Projection after it has been created by JPA but since you only need formatting there is no need to set anything - default method does the trick.","title":"How to set variable in Java projection?","body":"<p>Just create a default method in your DemoProjection interface to return getLabel formatted as you wish:</p>\n<pre><code>public interface DemoProjection {\n  UUID getUuid();\n  String getName();\n  String getSurname();\n\n  default String getLabel() {\n      return String.format(\n            &quot;Name: %s%nSurnamame Surname: %s&quot;,\n            geteName(),\n            getSurname());\n  }\n}\n</code></pre>\n<p>this is required as you can't set a Projection after it has been created by JPA but since you only need formatting there is no need to set anything - default method does the trick.</p>\n"}],"owner":{"display_name":"user17676679"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2605,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":70432972,"answer_count":2,"score":-1,"last_activity_date":1640080309,"creation_date":1640071373,"question_id":70431871,"body_markdown":"I have the following projection in my Java (Spring Boot) app:\r\n\r\n```\r\npublic interface DemoProjection {\r\n    UUID getUuid();\r\n    String getName();\r\n    String getSurname();\r\n\r\n    String getLabel();\r\n    void setLabel(String label);\r\n```\r\n\r\n\r\nI want to set this `label` field in my service:\r\n\r\n```\r\npublic DemoProjection findAByUuid(UUID uuid) {\r\n        // returns a single record\r\n        final DemoProjection demo =  demoRepository.findAByUuid(uuid);\r\n        final String label = String.format(\r\n                &quot;Name: %s%nSurnamame Surname: %s&quot;,\r\n                demo.geteName(),\r\n                demo.getSurname());\r\n\r\n        // ! this line throws error\r\n        demo.setLabel(label);\r\n        return demo;\r\n    }\r\n```\r\n\r\n`demo.setLabel(label);` throws error: *&quot;cannot set projection A TupleBackedMap cannot be modified.&quot;* \r\n\r\nSo, how can I set `label` field in the projection? \r\n","title":"How to set variable in Java projection?","body":"<p>I have the following projection in my Java (Spring Boot) app:</p>\n<pre><code>public interface DemoProjection {\n    UUID getUuid();\n    String getName();\n    String getSurname();\n\n    String getLabel();\n    void setLabel(String label);\n</code></pre>\n<p>I want to set this <code>label</code> field in my service:</p>\n<pre><code>public DemoProjection findAByUuid(UUID uuid) {\n        // returns a single record\n        final DemoProjection demo =  demoRepository.findAByUuid(uuid);\n        final String label = String.format(\n                &quot;Name: %s%nSurnamame Surname: %s&quot;,\n                demo.geteName(),\n                demo.getSurname());\n\n        // ! this line throws error\n        demo.setLabel(label);\n        return demo;\n    }\n</code></pre>\n<p><code>demo.setLabel(label);</code> throws error: <em>&quot;cannot set projection A TupleBackedMap cannot be modified.&quot;</em></p>\n<p>So, how can I set <code>label</code> field in the projection?</p>\n"},{"tags":["java","spring-boot","apache","spring-security","reverse-proxy"],"answers":[{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640079859,"creation_date":1640079859,"answer_id":70433382,"question_id":70433229,"body_markdown":"My experience with Apache Proxy setup is limited, however based on my understanding, you will need to enable **SSLEngine** in order to support SSL Protocol:\r\n\r\nThe documentation:\r\n\r\n\r\n**SSLEngine Directive**\r\n\r\n    Description:\tSSL Engine Operation Switch\r\n    Syntax:\tSSLEngine on|off|optional\r\n    Default:\tSSLEngine off\r\n    Context:\tserver config, virtual host\r\n    Status:\tExtension\r\n    Module:\tmod_ssl\r\n\r\n&gt; This directive toggles the usage of the SSL/TLS Protocol Engine. This\r\n&gt; is should be used inside a &lt;VirtualHost&gt; section to enable SSL/TLS for\r\n&gt; a that virtual host. By default the SSL/TLS Protocol Engine is\r\n&gt; disabled for both the main server and all configured virtual hosts.\r\n\r\n**Example**\r\n\r\n    &lt;VirtualHost _default_:443&gt;\r\n    SSLEngine on\r\n    #...\r\n    &lt;/VirtualHost&gt;\r\n\r\n&gt; In Apache 2.1 and later, SSLEngine can be set to optional. This\r\n&gt; enables support for RFC 2817, Upgrading to TLS Within HTTP/1.1. At\r\n&gt; this time no web browsers support RFC 2817.\r\n\r\nhttps://httpd.apache.org/docs/2.4/mod/mod_ssl.html#page-header\r\n\r\n","title":"Spring security behind Apache reverse proxy","body":"<p>My experience with Apache Proxy setup is limited, however based on my understanding, you will need to enable <strong>SSLEngine</strong> in order to support SSL Protocol:</p>\n<p>The documentation:</p>\n<p><strong>SSLEngine Directive</strong></p>\n<pre><code>Description:    SSL Engine Operation Switch\nSyntax: SSLEngine on|off|optional\nDefault:    SSLEngine off\nContext:    server config, virtual host\nStatus: Extension\nModule: mod_ssl\n</code></pre>\n<blockquote>\n<p>This directive toggles the usage of the SSL/TLS Protocol Engine. This\nis should be used inside a  section to enable SSL/TLS for\na that virtual host. By default the SSL/TLS Protocol Engine is\ndisabled for both the main server and all configured virtual hosts.</p>\n</blockquote>\n<p><strong>Example</strong></p>\n<pre><code>&lt;VirtualHost _default_:443&gt;\nSSLEngine on\n#...\n&lt;/VirtualHost&gt;\n</code></pre>\n<blockquote>\n<p>In Apache 2.1 and later, SSLEngine can be set to optional. This\nenables support for RFC 2817, Upgrading to TLS Within HTTP/1.1. At\nthis time no web browsers support RFC 2817.</p>\n</blockquote>\n<p><a href=\"https://httpd.apache.org/docs/2.4/mod/mod_ssl.html#page-header\" rel=\"nofollow noreferrer\">https://httpd.apache.org/docs/2.4/mod/mod_ssl.html#page-header</a></p>\n"}],"owner":{"account_id":22498600,"reputation":46,"user_id":16695223,"display_name":"Vikas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":461,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1640085549,"answer_count":1,"score":0,"last_activity_date":1640079859,"creation_date":1640079135,"question_id":70433229,"body_markdown":"I have my Spring-boot app behind Apache proxy.\r\nMy app is working on `http` and SSL related tasks are handled by proxy server.\r\n\r\nI&#39;m using Spring-security&#39;s login page.\r\nBelow is my security configurations:\r\n\r\n```\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.csrf().disable();\r\n        http.cors();\r\n\r\n        http.authorizeRequests()\r\n                .antMatchers(&quot;/admin/**&quot;).hasAuthority(&quot;Admin&quot;)\r\n                .anyRequest().permitAll()\r\n                .and()\r\n                .formLogin()\r\n                .defaultSuccessUrl(&quot;/admin&quot;, true);\r\n\r\n    }\r\n```\r\n\r\nSo as a person with Admin authority login successfully I redirect to /admin.\r\nThis was working fine until I used apache proxy.\r\n\r\nBefore using proxy it was working fine.\r\n\r\n&gt; ( http://myhost/login &gt;&gt; after successful login redirects To &gt;&gt; http://myhost/admin )\r\n\r\nAfter using proxy:\r\n&gt; ( https://myhost/login &gt;&gt; after successful login redirects To &gt;&gt; http://myhost/admin )\r\n\r\nThe main issue is that it redirecting to `http` instead of `https`.\r\n\r\nBelow is my apache proxy config:\r\n\r\n```\r\nProxyPreserveHost on\r\nProxyPass / http://127.0.0.1:8080/\r\nProxyPassReverse / http://127.0.0.1:8080/\r\n```\r\nMy question is how can I redirect to `https` after login.\r\n\r\nAny help would be appreciated !!!","title":"Spring security behind Apache reverse proxy","body":"<p>I have my Spring-boot app behind Apache proxy.\nMy app is working on <code>http</code> and SSL related tasks are handled by proxy server.</p>\n<p>I'm using Spring-security's login page.\nBelow is my security configurations:</p>\n<pre><code>    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.csrf().disable();\n        http.cors();\n\n        http.authorizeRequests()\n                .antMatchers(&quot;/admin/**&quot;).hasAuthority(&quot;Admin&quot;)\n                .anyRequest().permitAll()\n                .and()\n                .formLogin()\n                .defaultSuccessUrl(&quot;/admin&quot;, true);\n\n    }\n</code></pre>\n<p>So as a person with Admin authority login successfully I redirect to /admin.\nThis was working fine until I used apache proxy.</p>\n<p>Before using proxy it was working fine.</p>\n<blockquote>\n<p>( http://myhost/login &gt;&gt; after successful login redirects To &gt;&gt; http://myhost/admin )</p>\n</blockquote>\n<p>After using proxy:</p>\n<blockquote>\n<p>( https://myhost/login &gt;&gt; after successful login redirects To &gt;&gt; http://myhost/admin )</p>\n</blockquote>\n<p>The main issue is that it redirecting to <code>http</code> instead of <code>https</code>.</p>\n<p>Below is my apache proxy config:</p>\n<pre><code>ProxyPreserveHost on\nProxyPass / http://127.0.0.1:8080/\nProxyPassReverse / http://127.0.0.1:8080/\n</code></pre>\n<p>My question is how can I redirect to <code>https</code> after login.</p>\n<p>Any help would be appreciated !!!</p>\n"},{"tags":["java","arrays","arraylist","contains"],"comments":[{"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"score":0,"creation_date":1640079112,"post_id":70433197,"comment_id":124504301,"body_markdown":"You can use a `Map&lt;String,Card&gt;` instead of `ArrayList&lt;Card&gt;` and use `map.containsKey(split[2])`","body":"You can use a <code>Map&lt;String,Card&gt;</code> instead of <code>ArrayList&lt;Card&gt;</code> and use <code>map.containsKey(split[2])</code>"},{"owner":{"account_id":22488238,"reputation":165,"user_id":16686308,"display_name":"Luna"},"score":0,"creation_date":1640079207,"post_id":70433197,"comment_id":124504337,"body_markdown":"Additionally, does Card have an String constructor? You could do `player1hand.contains(new Card(split[2]))`. It is possible that you need to overload `equals` for this approach","body":"Additionally, does Card have an String constructor? You could do <code>player1hand.contains(new Card(split[2]))</code>. It is possible that you need to overload <code>equals</code> for this approach"}],"answers":[{"tags":[],"owner":{"account_id":23665009,"reputation":88,"user_id":17692595,"display_name":"Roggi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640079847,"creation_date":1640079847,"answer_id":70433376,"question_id":70433197,"body_markdown":"You should create a named constructor (from Effective Java J.Bloch) for your Card class and override `equals` and `hashCode` for it like this:\r\n\r\n```\r\nclass Card {\r\n    private String valueAsString;\r\n\r\n    /*your code here*/\r\n    \r\n    public static Card of(String valueAsString) {\r\n         Card card = /*create your card here*/\r\n         card.valueAsString = valueAsString;\r\n         return card;\r\n    }\r\n\r\n    @Override\r\n    public boolean equals(Object other) {\r\n         /*another part of equals*/\r\n         return Objects.equals(valueAsString, other.valueAsString);\r\n    }\r\n\r\n    @Override\r\n    public int hashCode() {\r\n         return Objects.hash(valueAsString);\r\n    }\r\n}\r\n```\r\n\r\nWith that named constructor you can just do the following thing:\r\n\r\n```\r\n    if (player1Hand.contains(Card.of(split[2]))) {\r\n         /*do something*/\r\n    }\r\n```\r\n\r\nThe explanation: as soon as `ArrayList` uses an `equals` method to compare elements in the array you need to define it properly. Besides, a named constructor helps you to create a placeholder object based on value of `split[2]`. With this two steps you will be able to use `contains` and it will work as you want to. Why should you override a `hashCode` too? You should do it, because there is an informal rule that you should always override `equals` and `hashCode` like a pair, because they have to do it&#39;s stuff with the same set of fields.","title":"Adding elements of different type to arraylist","body":"<p>You should create a named constructor (from Effective Java J.Bloch) for your Card class and override <code>equals</code> and <code>hashCode</code> for it like this:</p>\n<pre><code>class Card {\n    private String valueAsString;\n\n    /*your code here*/\n    \n    public static Card of(String valueAsString) {\n         Card card = /*create your card here*/\n         card.valueAsString = valueAsString;\n         return card;\n    }\n\n    @Override\n    public boolean equals(Object other) {\n         /*another part of equals*/\n         return Objects.equals(valueAsString, other.valueAsString);\n    }\n\n    @Override\n    public int hashCode() {\n         return Objects.hash(valueAsString);\n    }\n}\n</code></pre>\n<p>With that named constructor you can just do the following thing:</p>\n<pre><code>    if (player1Hand.contains(Card.of(split[2]))) {\n         /*do something*/\n    }\n</code></pre>\n<p>The explanation: as soon as <code>ArrayList</code> uses an <code>equals</code> method to compare elements in the array you need to define it properly. Besides, a named constructor helps you to create a placeholder object based on value of <code>split[2]</code>. With this two steps you will be able to use <code>contains</code> and it will work as you want to. Why should you override a <code>hashCode</code> too? You should do it, because there is an informal rule that you should always override <code>equals</code> and <code>hashCode</code> like a pair, because they have to do it's stuff with the same set of fields.</p>\n"}],"owner":{"account_id":23699676,"reputation":3,"user_id":17722990,"display_name":"KepaArizzabalaga"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640079847,"creation_date":1640078981,"question_id":70433197,"body_markdown":"So I have an arraylist which looks like this `ArrayList&lt;Card&gt; player1Hand = Player.Player1(seed);`\r\nIt contains `[KH, 9L, 7L, 8L, KE]` Every combination represents one card.\r\nand an array `split[]` containing `[KH]`\r\n\r\nNow I tried this:\r\n`if (player1Hand.contains(split[2])) {//code}` Now the if statement does not get executed since split[] contains objects of type String and the arrayList contains objects of type `Card`. Is there an easy way to fix this?","title":"Adding elements of different type to arraylist","body":"<p>So I have an arraylist which looks like this <code>ArrayList&lt;Card&gt; player1Hand = Player.Player1(seed);</code>\nIt contains <code>[KH, 9L, 7L, 8L, KE]</code> Every combination represents one card.\nand an array <code>split[]</code> containing <code>[KH]</code></p>\n<p>Now I tried this:\n<code>if (player1Hand.contains(split[2])) {//code}</code> Now the if statement does not get executed since split[] contains objects of type String and the arrayList contains objects of type <code>Card</code>. Is there an easy way to fix this?</p>\n"},{"tags":["java","string-concatenation"],"comments":[{"owner":{"account_id":264582,"reputation":82175,"user_id":550966,"accept_rate":97,"display_name":"Pankaj Kumar"},"score":1,"creation_date":1325838069,"post_id":8755063,"comment_id":10909112,"body_markdown":"Read: http://stackoverflow.com/questions/693597/is-there-a-difference-between-string-concat-and-the-operator-in-java and http://stackoverflow.com/questions/47605/java-string-concatenation","body":"Read: <a href=\"http://stackoverflow.com/questions/693597/is-there-a-difference-between-string-concat-and-the-operator-in-java\" title=\"is there a difference between string concat and the operator in java\">stackoverflow.com/questions/693597/&hellip;</a> and <a href=\"http://stackoverflow.com/questions/47605/java-string-concatenation\" title=\"java string concatenation\">stackoverflow.com/questions/47605/java-string-concatenation</a>"},{"owner":{"account_id":264582,"reputation":82175,"user_id":550966,"accept_rate":97,"display_name":"Pankaj Kumar"},"score":0,"creation_date":1325838430,"post_id":8755063,"comment_id":10909181,"body_markdown":"About the only thing that looks different is when the string you are adding has zero length it just gives you back the original instead of creating a new String. The + operator can be a bit expensive ... if you are doing hundreds or thousands of string building operations look into StringBuffer.append(). It is common to see a method build up a StringBuffer and then return or use theBuffer.toString() at the end.","body":"About the only thing that looks different is when the string you are adding has zero length it just gives you back the original instead of creating a new String. The + operator can be a bit expensive ... if you are doing hundreds or thousands of string building operations look into StringBuffer.append(). It is common to see a method build up a StringBuffer and then return or use theBuffer.toString() at the end."},{"owner":{"account_id":261678,"reputation":2513,"user_id":546016,"accept_rate":69,"display_name":"ymajoros"},"score":0,"creation_date":1365059661,"post_id":8755063,"comment_id":22476589,"body_markdown":"@PankajKumar well, you probably want StringBuilder instead of StringBuffer","body":"@PankajKumar well, you probably want StringBuilder instead of StringBuffer"}],"answers":[{"tags":[],"owner":{"account_id":1080121,"reputation":4357,"user_id":1077325,"display_name":"Artem"},"down_vote_count":0,"up_vote_count":42,"is_accepted":true,"score":42,"last_activity_date":1496697802,"creation_date":1325837577,"answer_id":8755079,"question_id":8755063,"body_markdown":"The concat method always produces a new String with the result of concatenation. \r\n\r\nThe plus operator is backed by StringBuilder creation, appending all String values you need and further toString() calling on it.\r\n\r\nSo, if you need to concatenate two values, concat() will be better choice. If you need to concatenate 100 values, you should use the plus operator or explicitly use StringBuilder (e.g. in case of appending in a cycle).\r\n","title":"Concatenation operator (+) vs. concat()","body":"<p>The concat method always produces a new String with the result of concatenation. </p>\n\n<p>The plus operator is backed by StringBuilder creation, appending all String values you need and further toString() calling on it.</p>\n\n<p>So, if you need to concatenate two values, concat() will be better choice. If you need to concatenate 100 values, you should use the plus operator or explicitly use StringBuilder (e.g. in case of appending in a cycle).</p>\n"},{"tags":[],"owner":{"account_id":324087,"reputation":1527,"user_id":644474,"accept_rate":67,"display_name":"Ashish"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1496697851,"creation_date":1325837727,"answer_id":8755097,"question_id":8755063,"body_markdown":"Actually, both are the same. If you see the code of `concat(String paramString)` it will return a new object of string, and in the (+) operator it it will also generate a new string object.\r\n\r\nIf you don&#39;t want to create a new object then use string builder to concatenate two strings.\r\n","title":"Concatenation operator (+) vs. concat()","body":"<p>Actually, both are the same. If you see the code of <code>concat(String paramString)</code> it will return a new object of string, and in the (+) operator it it will also generate a new string object.</p>\n\n<p>If you don't want to create a new object then use string builder to concatenate two strings.</p>\n"},{"tags":[],"owner":{"account_id":83369,"reputation":15890,"user_id":233792,"accept_rate":72,"display_name":"Christian Kuetbach"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1496698047,"creation_date":1325837799,"answer_id":8755109,"question_id":8755063,"body_markdown":"In general it is a bad practice to concatenate Strings with `+` and with `concat()`. If you want to create a String use [`StringBuilder`][1] instead. \r\n\r\n  [1]: http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html\r\n","title":"Concatenation operator (+) vs. concat()","body":"<p>In general it is a bad practice to concatenate Strings with <code>+</code> and with <code>concat()</code>. If you want to create a String use <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html\" rel=\"nofollow noreferrer\"><code>StringBuilder</code></a> instead. </p>\n"},{"tags":[],"owner":{"account_id":169237,"reputation":39170,"user_id":395202,"accept_rate":59,"display_name":"Adrian Shum"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1496698321,"creation_date":1325838230,"answer_id":8755163,"question_id":8755063,"body_markdown":"I believe the &#39;style&#39; of concatenation is going to make a difference.\r\n\r\nFor concat(), it internally creates a new char array buffer, and returns a new string based on that char array.\r\n\r\nFor the + operator, the compiler in fact translate it to use StringBuffer/StringBuilder.\r\n\r\nTherefore, if you are concatenating two strings, concat() is definitely a better choice because the number of objects created is only the result String (and the char buffer used inside), while using the `+` operator will be translated to:\r\n\r\n    result = strA + strB;\r\n    -- translate to --&gt;\r\n    result = new StringBuilder(strA).append(strB).toString();\r\n\r\nAn extra StringBuilder instance is created.\r\n\r\nHowever, if you are concatenating, for example five strings in a row, each concat() will create a new String object. While using the `+` operator, the compiler will translate the statement to one StringBuilder with multiple append operations. It is definitely saving a lot of unnecessary temporary object instance:\r\n\r\n    result = strA + strB + strC + strD + strE;\r\n    -- translate to --&gt;\r\n    result = new StringBuilder(strA).append(strB).append(strC).append(strD).append(strE).toString();\r\n","title":"Concatenation operator (+) vs. concat()","body":"<p>I believe the 'style' of concatenation is going to make a difference.</p>\n\n<p>For concat(), it internally creates a new char array buffer, and returns a new string based on that char array.</p>\n\n<p>For the + operator, the compiler in fact translate it to use StringBuffer/StringBuilder.</p>\n\n<p>Therefore, if you are concatenating two strings, concat() is definitely a better choice because the number of objects created is only the result String (and the char buffer used inside), while using the <code>+</code> operator will be translated to:</p>\n\n<pre><code>result = strA + strB;\n-- translate to --&gt;\nresult = new StringBuilder(strA).append(strB).toString();\n</code></pre>\n\n<p>An extra StringBuilder instance is created.</p>\n\n<p>However, if you are concatenating, for example five strings in a row, each concat() will create a new String object. While using the <code>+</code> operator, the compiler will translate the statement to one StringBuilder with multiple append operations. It is definitely saving a lot of unnecessary temporary object instance:</p>\n\n<pre><code>result = strA + strB + strC + strD + strE;\n-- translate to --&gt;\nresult = new StringBuilder(strA).append(strB).append(strC).append(strD).append(strE).toString();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":280134,"reputation":9173,"user_id":575659,"accept_rate":93,"display_name":"dantuch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1496698443,"creation_date":1325838257,"answer_id":8755169,"question_id":8755063,"body_markdown":"You can **always** use `+` if only you use  &gt;= Java 1.5 and you **don&#39;t** declare your base String (that you want concatenate) outside of the loop. In Java 1.5 it results in creating `new StringBuilder` and working on it till your string is complete. That&#39;s the fastest way.\r\n\r\nAnyway - if you are in a loop (and concatenating strings with `+`) - every iteration of the loop creates a `new StringBuilder` - that&#39;s not the best idea. So this is where you should force the use of `StringBuilder` or `StringBuffer` (thread safe) classes.\r\n\r\nGenerally, this link clearly answers your question, and gives you complete knowledge:\r\n\r\nhttp://littletutorials.com/2008/07/16/stringbuffer-vs-stringbuilder-performance-comparison/\r\n","title":"Concatenation operator (+) vs. concat()","body":"<p>You can <strong>always</strong> use <code>+</code> if only you use  >= Java 1.5 and you <strong>don't</strong> declare your base String (that you want concatenate) outside of the loop. In Java 1.5 it results in creating <code>new StringBuilder</code> and working on it till your string is complete. That's the fastest way.</p>\n\n<p>Anyway - if you are in a loop (and concatenating strings with <code>+</code>) - every iteration of the loop creates a <code>new StringBuilder</code> - that's not the best idea. So this is where you should force the use of <code>StringBuilder</code> or <code>StringBuffer</code> (thread safe) classes.</p>\n\n<p>Generally, this link clearly answers your question, and gives you complete knowledge:</p>\n\n<p><a href=\"http://littletutorials.com/2008/07/16/stringbuffer-vs-stringbuilder-performance-comparison/\" rel=\"nofollow noreferrer\">http://littletutorials.com/2008/07/16/stringbuffer-vs-stringbuilder-performance-comparison/</a></p>\n"},{"tags":[],"owner":{"account_id":1143007,"reputation":1974,"user_id":1126412,"accept_rate":50,"display_name":"Manikandan Sigamani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1496698548,"creation_date":1325838279,"answer_id":8755174,"question_id":8755063,"body_markdown":"Though both the operator and the method are giving the same output, the way they work internally differs.\r\n\r\nThe `concat()` method that just concatenates str1 with str2 and outputs a string, is more efficient for a small number of concatenations.\r\n\r\nBut with concatenation operator &#39;+&#39;, `str1+=str2`; will be interpreted as\r\n`str1 = new StringBuilder().append(str1).append(str2).toString();`\r\n\r\nYou can use the concat method when using a fewer number of strings to concatenate. But the StringBuilder method would be fast in terms of performance, if you are using a large number of strings.\r\n","title":"Concatenation operator (+) vs. concat()","body":"<p>Though both the operator and the method are giving the same output, the way they work internally differs.</p>\n\n<p>The <code>concat()</code> method that just concatenates str1 with str2 and outputs a string, is more efficient for a small number of concatenations.</p>\n\n<p>But with concatenation operator '+', <code>str1+=str2</code>; will be interpreted as\n<code>str1 = new StringBuilder().append(str1).append(str2).toString();</code></p>\n\n<p>You can use the concat method when using a fewer number of strings to concatenate. But the StringBuilder method would be fast in terms of performance, if you are using a large number of strings.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1363476494,"creation_date":1325838306,"answer_id":8755178,"question_id":8755063,"body_markdown":"Your test needs to be running for at least 2 seconds with each loop in a separate method to be meaningful.  Short tests can be every difficult to reproduce and compare. From your timing it appears you are using Windows (i.e. because you times are 16 and 31 ms ;) Try System.nanoTime() instead.  When your loop iterates over 10,000 times the whole method is compiled.  This means your later method is already compiled when it is started.\r\n\r\nIn answer to your question concat is marginally faster when adding two Strings.  However, it comes with a typing and conceptual overhead which is likely to be much greater than the CPU you save.  Even based on your tests repeating 100,000 times it saves less than 15 ms, and yet it cost you far, far more than that in your time (which is likely to be worth more)  You could find in a future version of the JVM, the difference is optimised always and the complexity of your code is still there.\r\n\r\n---\r\n\r\nEDIT: I didn&#39;t notice that the memory result was suspect.\r\n\r\n    String str = null;\r\n\r\n    //------------Using Concatenation operator-------------\r\n    long time1 = System.currentTimeMillis();\r\n    long freeMemory1 = Runtime.getRuntime().freeMemory();\r\n    for (int i = 0; i &lt; 10000; i++) {\r\n        str = &quot;Hi&quot;;\r\n        str = str + &quot; Bye&quot;;\r\n    }\r\n    long time2 = System.currentTimeMillis();\r\n    long freeMemory2 = Runtime.getRuntime().freeMemory();\r\n\r\n    long timetaken1 = time2 - time1;\r\n    long memoryTaken1 = freeMemory1 - freeMemory2;\r\n    System.out.println(&quot;Concat operator  :&quot; + &quot;Time taken =&quot; + timetaken1 + &quot; Memory Consumed= &quot; + memoryTaken1);\r\n\r\n    str = null;\r\n    //------------Using Concat method-------------\r\n    long time3 = System.currentTimeMillis();\r\n    long freeMemory3 = Runtime.getRuntime().freeMemory();\r\n    for (int j = 0; j &lt; 10000; j++) {\r\n        str = &quot;Hi&quot;;\r\n        str = str.concat(&quot; Bye&quot;);\r\n\r\n    }\r\n    long time4 = System.currentTimeMillis();\r\n    long freeMemory4 = Runtime.getRuntime().freeMemory();\r\n\r\n    long timetaken2 = time4 - time3;\r\n    long memoryTaken2 = freeMemory3 - freeMemory4;\r\n    System.out.println(&quot;Concat method  :&quot; + &quot;Time taken =&quot; + timetaken2 + &quot; Memory Consumed= &quot; + memoryTaken2);\r\n\r\nprints when run with `-XX:-UseTLAB -mx1g`\r\n\r\n\r\n    Concat operator  :Time taken =12 Memory Consumed= 1291456\r\n    Concat method  :Time taken =7 Memory Consumed= 560000\r\n\r\nmaking the ratio of memory usage about 2:1.  In the original question the result vary every time you run it, sometimes the `.concat()` appears to use more.\r\n\r\n","title":"Concatenation operator (+) vs. concat()","body":"<p>Your test needs to be running for at least 2 seconds with each loop in a separate method to be meaningful.  Short tests can be every difficult to reproduce and compare. From your timing it appears you are using Windows (i.e. because you times are 16 and 31 ms ;) Try System.nanoTime() instead.  When your loop iterates over 10,000 times the whole method is compiled.  This means your later method is already compiled when it is started.</p>\n\n<p>In answer to your question concat is marginally faster when adding two Strings.  However, it comes with a typing and conceptual overhead which is likely to be much greater than the CPU you save.  Even based on your tests repeating 100,000 times it saves less than 15 ms, and yet it cost you far, far more than that in your time (which is likely to be worth more)  You could find in a future version of the JVM, the difference is optimised always and the complexity of your code is still there.</p>\n\n<hr>\n\n<p>EDIT: I didn't notice that the memory result was suspect.</p>\n\n<pre><code>String str = null;\n\n//------------Using Concatenation operator-------------\nlong time1 = System.currentTimeMillis();\nlong freeMemory1 = Runtime.getRuntime().freeMemory();\nfor (int i = 0; i &lt; 10000; i++) {\n    str = \"Hi\";\n    str = str + \" Bye\";\n}\nlong time2 = System.currentTimeMillis();\nlong freeMemory2 = Runtime.getRuntime().freeMemory();\n\nlong timetaken1 = time2 - time1;\nlong memoryTaken1 = freeMemory1 - freeMemory2;\nSystem.out.println(\"Concat operator  :\" + \"Time taken =\" + timetaken1 + \" Memory Consumed= \" + memoryTaken1);\n\nstr = null;\n//------------Using Concat method-------------\nlong time3 = System.currentTimeMillis();\nlong freeMemory3 = Runtime.getRuntime().freeMemory();\nfor (int j = 0; j &lt; 10000; j++) {\n    str = \"Hi\";\n    str = str.concat(\" Bye\");\n\n}\nlong time4 = System.currentTimeMillis();\nlong freeMemory4 = Runtime.getRuntime().freeMemory();\n\nlong timetaken2 = time4 - time3;\nlong memoryTaken2 = freeMemory3 - freeMemory4;\nSystem.out.println(\"Concat method  :\" + \"Time taken =\" + timetaken2 + \" Memory Consumed= \" + memoryTaken2);\n</code></pre>\n\n<p>prints when run with <code>-XX:-UseTLAB -mx1g</code></p>\n\n<pre><code>Concat operator  :Time taken =12 Memory Consumed= 1291456\nConcat method  :Time taken =7 Memory Consumed= 560000\n</code></pre>\n\n<p>making the ratio of memory usage about 2:1.  In the original question the result vary every time you run it, sometimes the <code>.concat()</code> appears to use more.</p>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1640079737,"creation_date":1354780651,"answer_id":13739225,"question_id":8755063,"body_markdown":"In fact `s1 + s2` and `s1.concat(s2)` are very different.\r\n\r\n`s1 + s2` is converted by javac into\r\n\r\n    (new StringBuilder(String.valueOf(s1)).append(s2).toString();\r\n\r\nYou can see it if you decompile .class. This construct is not very efficient; it involves up to three `new char[]` allocations and three `char[]` copy operations.\r\n\r\n`s1.concat(s2)` is always one `new char[]` + one copy operation, see String.java\r\n\r\n    public String concat(String str) {\r\n        int otherLen = str.length();\r\n        if (otherLen == 0) {\r\n            return this;\r\n        }\r\n        char buf[] = new char[count + otherLen];\r\n        getChars(0, count, buf, 0);\r\n        str.getChars(0, otherLen, buf, count);\r\n        return new String(0, count + otherLen, buf);\r\n    }\r\n\r\nNote that `new String(int, int, char[])` is `String`&#39;s package private constructor. It uses `char buf[]` directly, without the usual copying to ensure the `buf` invisibility for the `String` immutability.\r\n\r\n","title":"Concatenation operator (+) vs. concat()","body":"<p>In fact <code>s1 + s2</code> and <code>s1.concat(s2)</code> are very different.</p>\n<p><code>s1 + s2</code> is converted by javac into</p>\n<pre><code>(new StringBuilder(String.valueOf(s1)).append(s2).toString();\n</code></pre>\n<p>You can see it if you decompile .class. This construct is not very efficient; it involves up to three <code>new char[]</code> allocations and three <code>char[]</code> copy operations.</p>\n<p><code>s1.concat(s2)</code> is always one <code>new char[]</code> + one copy operation, see String.java</p>\n<pre><code>public String concat(String str) {\n    int otherLen = str.length();\n    if (otherLen == 0) {\n        return this;\n    }\n    char buf[] = new char[count + otherLen];\n    getChars(0, count, buf, 0);\n    str.getChars(0, otherLen, buf, count);\n    return new String(0, count + otherLen, buf);\n}\n</code></pre>\n<p>Note that <code>new String(int, int, char[])</code> is <code>String</code>'s package private constructor. It uses <code>char buf[]</code> directly, without the usual copying to ensure the <code>buf</code> invisibility for the <code>String</code> immutability.</p>\n"}],"owner":{"account_id":38907,"reputation":53159,"user_id":111988,"accept_rate":74,"display_name":"Sunil Kumar Sahoo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44021,"favorite_count":0,"down_vote_count":1,"up_vote_count":29,"closed_date":1408495766,"accepted_answer_id":8755079,"answer_count":8,"score":28,"last_activity_date":1640079737,"creation_date":1325837472,"question_id":8755063,"body_markdown":"For string concatenation we can use either the `concat()` or concat operator `(+)`.\r\n\r\nI have tried the following performance test and found `concat()` is faster and a memory efficient way for string concatenation.\r\n\r\n**String concatenation comparison for 100,000 times**:\r\n\r\n    String str = null;\r\n\r\n    //------------Using Concatenation operator-------------\r\n    long time1 = System.currentTimeMillis();\r\n    long freeMemory1 = Runtime.getRuntime().freeMemory();\r\n\r\n    for(int i=0; i&lt;100000; i++){\r\n        str = &quot;Hi&quot;;\r\n        str = str+&quot; Bye&quot;;\r\n    }\r\n    long time2 = System.currentTimeMillis();\r\n    long freeMemory2 = Runtime.getRuntime().freeMemory();\r\n\r\n    long timetaken1 = time2-time1;\r\n    long memoryTaken1 = freeMemory1 - freeMemory2;\r\n    System.out.println(&quot;Concat operator  :&quot; + &quot;Time taken =&quot; + timetaken1 +\r\n                       &quot; Memory Consumed =&quot; + memoryTaken1);\r\n\r\n    //------------Using Concat method-------------\r\n    long time3 = System.currentTimeMillis();\r\n    long freeMemory3 = Runtime.getRuntime().freeMemory();\r\n    for(int j=0; j&lt;100000; j++){\r\n        str = &quot;Hi&quot;;\r\n        str = str.concat(&quot; Bye&quot;);\r\n    }\r\n    long time4 = System.currentTimeMillis();\r\n    long freeMemory4 = Runtime.getRuntime().freeMemory();\r\n    long timetaken2 = time4-time3;\r\n    long memoryTaken2 = freeMemory3 - freeMemory4;\r\n    System.out.println(&quot;Concat method  :&quot; + &quot;Time taken =&quot; + timetaken2 +\r\n                       &quot; Memory Consumed =&quot; + memoryTaken2);\r\n\r\n**Result**\r\n\r\n    Concat operator: Time taken = 31; Memory Consumed = 2259096\r\n    Concat method  : Time taken = 16; Memory Consumed = 299592\r\n\r\n**If `concat()` is faster than the operator then when should we use concatenation operator `(+)`?**\r\n","title":"Concatenation operator (+) vs. concat()","body":"<p>For string concatenation we can use either the <code>concat()</code> or concat operator <code>(+)</code>.</p>\n\n<p>I have tried the following performance test and found <code>concat()</code> is faster and a memory efficient way for string concatenation.</p>\n\n<p><strong>String concatenation comparison for 100,000 times</strong>:</p>\n\n<pre><code>String str = null;\n\n//------------Using Concatenation operator-------------\nlong time1 = System.currentTimeMillis();\nlong freeMemory1 = Runtime.getRuntime().freeMemory();\n\nfor(int i=0; i&lt;100000; i++){\n    str = \"Hi\";\n    str = str+\" Bye\";\n}\nlong time2 = System.currentTimeMillis();\nlong freeMemory2 = Runtime.getRuntime().freeMemory();\n\nlong timetaken1 = time2-time1;\nlong memoryTaken1 = freeMemory1 - freeMemory2;\nSystem.out.println(\"Concat operator  :\" + \"Time taken =\" + timetaken1 +\n                   \" Memory Consumed =\" + memoryTaken1);\n\n//------------Using Concat method-------------\nlong time3 = System.currentTimeMillis();\nlong freeMemory3 = Runtime.getRuntime().freeMemory();\nfor(int j=0; j&lt;100000; j++){\n    str = \"Hi\";\n    str = str.concat(\" Bye\");\n}\nlong time4 = System.currentTimeMillis();\nlong freeMemory4 = Runtime.getRuntime().freeMemory();\nlong timetaken2 = time4-time3;\nlong memoryTaken2 = freeMemory3 - freeMemory4;\nSystem.out.println(\"Concat method  :\" + \"Time taken =\" + timetaken2 +\n                   \" Memory Consumed =\" + memoryTaken2);\n</code></pre>\n\n<p><strong>Result</strong></p>\n\n<pre><code>Concat operator: Time taken = 31; Memory Consumed = 2259096\nConcat method  : Time taken = 16; Memory Consumed = 299592\n</code></pre>\n\n<p><strong>If <code>concat()</code> is faster than the operator then when should we use concatenation operator <code>(+)</code>?</strong></p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":10751880,"reputation":3351,"user_id":7910980,"display_name":"Amit Phaltankar"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1520558706,"creation_date":1520556155,"answer_id":49184881,"question_id":49184683,"body_markdown":"You should use springs `@ConfigurationProperties` and heve nested classes in your `MyClass`\r\n\r\n    @ConfigurationProperties(prefix=&quot;my.prefix&quot;)\r\n    public class MyClass{\r\n      \r\n      private One id01;\r\n      private Two id02;\r\n      //GETTER SETTER\r\n \r\n      public static class One {\r\n        private String id;\r\n        // GETTER SETTER\r\n      }\r\n\r\n      public static class Two {\r\n        private String id;\r\n        // GETTER SETTER\r\n      }\r\n    }\r\n\r\nThen you can access it like\r\n\r\n    myClass.getOne().getId();\r\n\r\nBest thing for you to do is read through https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-typesafe-configuration-properties\r\n\r\n\r\n----------\r\n\r\n\r\n&gt; Update: OP doen&#39;t want to use nested classes to retrieve those fields\r\n\r\n        @ConfigurationProperties(prefix=&quot;my.prefix&quot;)\r\n        public class MyClass{\r\n          private String id01;\r\n          private String id02;\r\n    \r\n          @NotNull\r\n          private One one;\r\n          @NotNull\r\n          private Two two;\r\n         \r\n          public getId01(){\r\n            return one.id;\r\n          }\r\n          public getId02(){\r\n            return two.id;\r\n          }\r\n          \r\n          public static class One {\r\n            private String id;\r\n            // GETTER SETTER\r\n          }\r\n    \r\n          public static class Two {\r\n            private String id;\r\n            // GETTER SETTER\r\n          }\r\n        }\r\n\r\nand now you can use them like\r\n \r\n\r\n       myClass.getId01();\r\n       myClass.getId02();\r\n\r\n","title":"Is it possible to create multiple beans depending on prefix in application.properties in springboot","body":"<p>You should use springs <code>@ConfigurationProperties</code> and heve nested classes in your <code>MyClass</code></p>\n\n<pre><code>@ConfigurationProperties(prefix=\"my.prefix\")\npublic class MyClass{\n\n  private One id01;\n  private Two id02;\n  //GETTER SETTER\n\n  public static class One {\n    private String id;\n    // GETTER SETTER\n  }\n\n  public static class Two {\n    private String id;\n    // GETTER SETTER\n  }\n}\n</code></pre>\n\n<p>Then you can access it like</p>\n\n<pre><code>myClass.getOne().getId();\n</code></pre>\n\n<p>Best thing for you to do is read through <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-typesafe-configuration-properties\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-typesafe-configuration-properties</a></p>\n\n<hr>\n\n<blockquote>\n  <p>Update: OP doen't want to use nested classes to retrieve those fields</p>\n</blockquote>\n\n<pre><code>    @ConfigurationProperties(prefix=\"my.prefix\")\n    public class MyClass{\n      private String id01;\n      private String id02;\n\n      @NotNull\n      private One one;\n      @NotNull\n      private Two two;\n\n      public getId01(){\n        return one.id;\n      }\n      public getId02(){\n        return two.id;\n      }\n\n      public static class One {\n        private String id;\n        // GETTER SETTER\n      }\n\n      public static class Two {\n        private String id;\n        // GETTER SETTER\n      }\n    }\n</code></pre>\n\n<p>and now you can use them like</p>\n\n<pre><code>   myClass.getId01();\n   myClass.getId02();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4996148,"reputation":462,"user_id":4016683,"display_name":"Pavan Kumar"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1553358489,"creation_date":1553358489,"answer_id":55315886,"question_id":49184683,"body_markdown":"Since you are using springboot, you can also do:\r\n\r\n    @Configuration\r\n    public class AppBeanConfig {\r\n        @Bean\r\n        @ConfigurationProperties(prefix=&quot;my.prefix.one&quot;)  \r\n        public MyClass myClassOne(){\r\n          return new MyClass();\r\n       }\r\n    \r\n        @Bean\r\n        @ConfigurationProperties(prefix=&quot;my.prefix.two&quot;)  \r\n        public MyClass myClassTwo(){\r\n          return new MyClass();\r\n       }\r\n    }\r\n\r\nI am not aware of any meaningfull ways to avoid configuring individual beans.\r\n\r\nHowever, if that what you really want to do, you can gain access to ApplicationContext and manually process the properties and inject beans to Applicationcontext, personally I would prefer add multiple bean methods to configuration class than directly manipulating ApplicationContext.","title":"Is it possible to create multiple beans depending on prefix in application.properties in springboot","body":"<p>Since you are using springboot, you can also do:</p>\n\n<pre><code>@Configuration\npublic class AppBeanConfig {\n    @Bean\n    @ConfigurationProperties(prefix=\"my.prefix.one\")  \n    public MyClass myClassOne(){\n      return new MyClass();\n   }\n\n    @Bean\n    @ConfigurationProperties(prefix=\"my.prefix.two\")  \n    public MyClass myClassTwo(){\n      return new MyClass();\n   }\n}\n</code></pre>\n\n<p>I am not aware of any meaningfull ways to avoid configuring individual beans.</p>\n\n<p>However, if that what you really want to do, you can gain access to ApplicationContext and manually process the properties and inject beans to Applicationcontext, personally I would prefer add multiple bean methods to configuration class than directly manipulating ApplicationContext.</p>\n"},{"tags":[],"owner":{"account_id":3803727,"reputation":323,"user_id":3156671,"display_name":"Mick Belker - Pseudonym"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1589267468,"creation_date":1589267468,"answer_id":61745811,"question_id":49184683,"body_markdown":"If the properties for one, two are the same, simply use the same class. Lombok helps you to auto-create getter/setter methods, which are required in order to make it worke\r\n\r\n    @Getter\r\n    @Setter\r\n    @Configuration\r\n    @ConfigurationProperties(prefix=&quot;my.prefix&quot;)\r\n    public class MyClass {\r\n\r\n      private Child one;\r\n      private Child two;\r\n\r\n      @Getter\r\n      @Setter\r\n      public static class Child {\r\n\r\n        @NotNull\r\n        private String id;\r\n        @NotNull\r\n        private String name;\r\n      }\r\n    }","title":"Is it possible to create multiple beans depending on prefix in application.properties in springboot","body":"<p>If the properties for one, two are the same, simply use the same class. Lombok helps you to auto-create getter/setter methods, which are required in order to make it worke</p>\n\n<pre><code>@Getter\n@Setter\n@Configuration\n@ConfigurationProperties(prefix=\"my.prefix\")\npublic class MyClass {\n\n  private Child one;\n  private Child two;\n\n  @Getter\n  @Setter\n  public static class Child {\n\n    @NotNull\n    private String id;\n    @NotNull\n    private String name;\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322960,"reputation":7711,"user_id":642680,"accept_rate":74,"display_name":"D-Dᴙum"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640079494,"creation_date":1640079494,"answer_id":70433307,"question_id":49184683,"body_markdown":"I have tried to do similar and as far as I am aware the only way to create multiple instances is to to get *all* properties with a specified prefix and parse them yourself. For your example you could construct a `@Configuration` like so:\r\n```\r\n@Configuration\r\npublic class MyConfig {\r\n\r\n    @Bean\r\n    @ConfigurationProperties(prefix = &quot;my.prefix&quot;)\r\n    protected Map&lt;String, String&gt; myProperties() {\r\n        return new HashMap&lt;&gt;();\r\n    }\r\n\r\n    @Bean\r\n    public List&lt;MyClass&gt; myObjects(@Qualifier(&quot;myProperties&quot;) final Map&lt;String, String&gt; myProperties) {\r\n\r\n        final Map&lt;String, Map&lt;String, String&gt;&gt; mappedSources = new HashMap&lt;&gt;();\r\n        myProperties.forEach((key1, value) -&gt; {\r\n            final String[] key = key1.split(&quot;\\\\.&quot;);\r\n            final Map&lt;String, String&gt; myInstanceParams = mappedSources.computeIfAbsent(key[0], s -&gt; new HashMap&lt;&gt;(2));\r\n            myInstanceParams.put(key[1], value);\r\n        });\r\n        return mappedSources.values().stream()\r\n                .map(stringStringMap -&gt; new MyClass(stringStringMap.get(&quot;id&quot;), stringStringMap.get(&quot;name&quot;)))\r\n                .collect(Collectors.toList());\r\n    }\r\n}\r\n```\r\n\r\nIn this simple instance the `@Qualifier` is not needed in `myObjects()` parameter list but if you introduce a second prefix where you want to do similar then you need to qualify which map of strings is to be passed into the `myObjects()` method so I would recommend just including it from the start.\r\n\r\nThis is a simple example but a more robust implementation would check for missing properties and property validity etc. Nor can I say if this solution is good practice/good Spring practice.\r\n\r\n","title":"Is it possible to create multiple beans depending on prefix in application.properties in springboot","body":"<p>I have tried to do similar and as far as I am aware the only way to create multiple instances is to to get <em>all</em> properties with a specified prefix and parse them yourself. For your example you could construct a <code>@Configuration</code> like so:</p>\n<pre><code>@Configuration\npublic class MyConfig {\n\n    @Bean\n    @ConfigurationProperties(prefix = &quot;my.prefix&quot;)\n    protected Map&lt;String, String&gt; myProperties() {\n        return new HashMap&lt;&gt;();\n    }\n\n    @Bean\n    public List&lt;MyClass&gt; myObjects(@Qualifier(&quot;myProperties&quot;) final Map&lt;String, String&gt; myProperties) {\n\n        final Map&lt;String, Map&lt;String, String&gt;&gt; mappedSources = new HashMap&lt;&gt;();\n        myProperties.forEach((key1, value) -&gt; {\n            final String[] key = key1.split(&quot;\\\\.&quot;);\n            final Map&lt;String, String&gt; myInstanceParams = mappedSources.computeIfAbsent(key[0], s -&gt; new HashMap&lt;&gt;(2));\n            myInstanceParams.put(key[1], value);\n        });\n        return mappedSources.values().stream()\n                .map(stringStringMap -&gt; new MyClass(stringStringMap.get(&quot;id&quot;), stringStringMap.get(&quot;name&quot;)))\n                .collect(Collectors.toList());\n    }\n}\n</code></pre>\n<p>In this simple instance the <code>@Qualifier</code> is not needed in <code>myObjects()</code> parameter list but if you introduce a second prefix where you want to do similar then you need to qualify which map of strings is to be passed into the <code>myObjects()</code> method so I would recommend just including it from the start.</p>\n<p>This is a simple example but a more robust implementation would check for missing properties and property validity etc. Nor can I say if this solution is good practice/good Spring practice.</p>\n"}],"owner":{"account_id":4071823,"reputation":567,"user_id":3344591,"accept_rate":24,"display_name":"user3344591"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2383,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":4,"score":4,"last_activity_date":1640079494,"creation_date":1520554723,"question_id":49184683,"body_markdown":"I have the following in my application.properties in my springboot application (1.5.4.RELEASE)\r\n\r\n    my.prefix.one.id=id01\r\n    my.prefix.one.name=one\r\n    \r\n    my.prefix.two.id=id02\r\n    my.prefix.two.name=two\r\n\r\nAnd a class like the following\r\n\r\n    public class MyClass{\r\n     private String id;\r\n     private String name;\r\n     //getters and setters\r\n    }\r\n\r\nIf I use @ConfigurationProperties(prefix=&quot;my.prefix.one&quot;) then I get a MyClass bean with id field &quot;id01&quot;.\r\n\r\nIs there a way to indicate springboot to scan scan for all the properties with prefix &quot;my.prefix&quot; and create multiple beans. In this case two beans - bean with id field &quot;id01&quot; and bean with id field &quot;id02&quot; ?","title":"Is it possible to create multiple beans depending on prefix in application.properties in springboot","body":"<p>I have the following in my application.properties in my springboot application (1.5.4.RELEASE)</p>\n\n<pre><code>my.prefix.one.id=id01\nmy.prefix.one.name=one\n\nmy.prefix.two.id=id02\nmy.prefix.two.name=two\n</code></pre>\n\n<p>And a class like the following</p>\n\n<pre><code>public class MyClass{\n private String id;\n private String name;\n //getters and setters\n}\n</code></pre>\n\n<p>If I use @ConfigurationProperties(prefix=\"my.prefix.one\") then I get a MyClass bean with id field \"id01\".</p>\n\n<p>Is there a way to indicate springboot to scan scan for all the properties with prefix \"my.prefix\" and create multiple beans. In this case two beans - bean with id field \"id01\" and bean with id field \"id02\" ?</p>\n"},{"tags":["java","string","date","datetime","timestamp"],"comments":[{"owner":{"account_id":5004307,"reputation":3369,"user_id":4022390,"accept_rate":55,"display_name":"Viet"},"score":0,"creation_date":1478502190,"post_id":40459337,"comment_id":68164067,"body_markdown":"why not convert `stopDate1` to `TimeStamp` instead of `timeString ` ?","body":"why not convert <code>stopDate1</code> to <code>TimeStamp</code> instead of <code>timeString </code> ?"},{"owner":{"account_id":6009919,"reputation":547,"user_id":4720669,"display_name":"Aakash Patel"},"score":0,"creation_date":1478510559,"post_id":40459337,"comment_id":68168107,"body_markdown":"Beacuse stopDate1 has date and other time data as well. And i want only HH:MM. So i took them out in a string first. But nevermind,                 Object d1 = getMappedObjectValue(reportBeamDataMap, ReportBeamConstant.DAT_STOPDATE);\nDate stopDate12 = (Date)d1;\nSimpleDateFormat printFormat1 = new SimpleDateFormat(&quot;hh:mm&quot;);\nString timeString1 = printFormat.format(stopDate1);\t\t\t\t\t\nTimestamp tm1 = new Timestamp(printFormat1.parse(timeString1).getTime());  This worked perfectly fine. Thanks","body":"Beacuse stopDate1 has date and other time data as well. And i want only HH:MM. So i took them out in a string first. But nevermind,                 Object d1 = getMappedObjectValue(reportBeamDataMap, ReportBeamConstant.DAT_STOPDATE); Date stopDate12 = (Date)d1; SimpleDateFormat printFormat1 = new SimpleDateFormat(&quot;hh:mm&quot;); String timeString1 = printFormat.format(stopDate1);\t\t\t\t\t Timestamp tm1 = new Timestamp(printFormat1.parse(timeString1).getTime());  This worked perfectly fine. Thanks"}],"answers":[{"tags":[],"owner":{"account_id":5523724,"reputation":22000,"user_id":4385895,"accept_rate":58,"display_name":"Vasu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1478503332,"creation_date":1478502126,"answer_id":40459484,"question_id":40459337,"body_markdown":"You can use LocalTime to store times (from a string and vice-versa) as shown below:\r\n\r\n**Option(1): With Java8**\r\n\r\nYou can use Java8&#39;s LocalTime API for this, you can look [here][1]\r\n\r\n    String timeString = printFormat.format(stopDate1);\r\n    //Get your localTime object from timeString\r\n    LocalTime localTime = LocalTime.parse(timeString);\r\n&gt; static LocalTime\tparse(CharSequence text) Obtains an instance of\r\n&gt; LocalTime from a text string such as 10:15.\r\n\r\n**Option(2): Without Java8**\r\n\r\nYou need to use jodatime library API, you can look [here][2]\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html\r\n  [2]: http://www.joda.org/joda-time/","title":"How do I convert &quot;HH:MM&quot; format string to Timestamp in Java?","body":"<p>You can use LocalTime to store times (from a string and vice-versa) as shown below:</p>\n\n<p><strong>Option(1): With Java8</strong></p>\n\n<p>You can use Java8's LocalTime API for this, you can look <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html\" rel=\"nofollow noreferrer\">here</a></p>\n\n<pre><code>String timeString = printFormat.format(stopDate1);\n//Get your localTime object from timeString\nLocalTime localTime = LocalTime.parse(timeString);\n</code></pre>\n\n<blockquote>\n  <p>static LocalTime  parse(CharSequence text) Obtains an instance of\n  LocalTime from a text string such as 10:15.</p>\n</blockquote>\n\n<p><strong>Option(2): Without Java8</strong></p>\n\n<p>You need to use jodatime library API, you can look <a href=\"http://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":6663253,"reputation":1979,"user_id":5141632,"display_name":"Albin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1478502470,"creation_date":1478502470,"answer_id":40459559,"question_id":40459337,"body_markdown":"Timestamp format must be yyyy-mm-dd hh:mm:ss[.fffffffff]\r\n\r\nYou can convert date object to Timestamp directly by\r\n\r\n     Timestamp timestamp = new Timestamp(stopDate1.getTime());","title":"How do I convert &quot;HH:MM&quot; format string to Timestamp in Java?","body":"<p>Timestamp format must be yyyy-mm-dd hh:mm:ss[.fffffffff]</p>\n\n<p>You can convert date object to Timestamp directly by</p>\n\n<pre><code> Timestamp timestamp = new Timestamp(stopDate1.getTime());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7588258,"reputation":36,"user_id":5756650,"display_name":"Sai kiran"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1478503225,"creation_date":1478503225,"answer_id":40459752,"question_id":40459337,"body_markdown":"Please Use parse method to get Date Object and then construct Timestamp object.\r\n\r\n   \r\n\r\n     try {\r\n        Timestamp timestamp = new Timestamp(printFormat.parse(timeString).getTime());\r\n        } catch (ParseException e) {\r\n        \te.printStackTrace();\r\n        }","title":"How do I convert &quot;HH:MM&quot; format string to Timestamp in Java?","body":"<p>Please Use parse method to get Date Object and then construct Timestamp object.</p>\n\n<pre><code> try {\n    Timestamp timestamp = new Timestamp(printFormat.parse(timeString).getTime());\n    } catch (ParseException e) {\n        e.printStackTrace();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23700353,"reputation":1,"user_id":17723600,"display_name":"Hadj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640078933,"creation_date":1640078933,"answer_id":70433184,"question_id":40459337,"body_markdown":"if you are looking for the timestamp of today&#39;s hh:mm then try this\r\n\r\n    static String todaysFtoTimestamp(String f){\r\n        long todaystimestamp = ((System.currentTimeMillis() / 86400000 )  * 86400 );\r\n        //System.out.println(&quot;today: &quot; + todaystimestamp);\r\n        long todaysftimestamp = Integer.parseInt(fToTimestamp(f)) + todaystimestamp;\r\n        //System.out.println(&quot;todayF: &quot; + todaysftimestamp);\r\n        return todaysftimestamp+&quot;&quot;;\r\n    }\r\n    static String fToTimestamp(String f){\r\n        String[] fArray = f.split(&quot;:&quot;);\r\n        String r = &quot;null hehe&quot;;\r\n        int hours = Integer.parseInt(fArray[0]);\r\n        int minutes = Integer.parseInt(fArray[1]);\r\n        r = String.valueOf((minutes + (hours * 60))*60);\r\n        return r ;\r\n    }","title":"How do I convert &quot;HH:MM&quot; format string to Timestamp in Java?","body":"<p>if you are looking for the timestamp of today's hh:mm then try this</p>\n<pre><code>static String todaysFtoTimestamp(String f){\n    long todaystimestamp = ((System.currentTimeMillis() / 86400000 )  * 86400 );\n    //System.out.println(&quot;today: &quot; + todaystimestamp);\n    long todaysftimestamp = Integer.parseInt(fToTimestamp(f)) + todaystimestamp;\n    //System.out.println(&quot;todayF: &quot; + todaysftimestamp);\n    return todaysftimestamp+&quot;&quot;;\n}\nstatic String fToTimestamp(String f){\n    String[] fArray = f.split(&quot;:&quot;);\n    String r = &quot;null hehe&quot;;\n    int hours = Integer.parseInt(fArray[0]);\n    int minutes = Integer.parseInt(fArray[1]);\n    r = String.valueOf((minutes + (hours * 60))*60);\n    return r ;\n}\n</code></pre>\n"}],"owner":{"account_id":6009919,"reputation":547,"user_id":4720669,"display_name":"Aakash Patel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4430,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":40459752,"answer_count":4,"score":2,"last_activity_date":1640078933,"creation_date":1478501446,"question_id":40459337,"body_markdown":"I have a string `09:28.` and I want to convert this string to `Timestamp` object.\r\n\r\nBelow is my coding:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    Object d = getMappedObjectValue(reportBeamDataMap, ReportBeamConstant.DAT_STOPDATE);\r\n    Date stopDate1 = (Date)d;\r\n    SimpleDateFormat printFormat = new SimpleDateFormat(&quot;hh:mm&quot;);\r\n    String timeString = printFormat.format(stopDate1);\r\n\r\nNow I want above `String` as `Timestamp` (only HH:MM). How to do that?\r\n","title":"How do I convert &quot;HH:MM&quot; format string to Timestamp in Java?","body":"<p>I have a string <code>09:28.</code> and I want to convert this string to <code>Timestamp</code> object.</p>\n\n<p>Below is my coding:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Object d = getMappedObjectValue(reportBeamDataMap, ReportBeamConstant.DAT_STOPDATE);\nDate stopDate1 = (Date)d;\nSimpleDateFormat printFormat = new SimpleDateFormat(\"hh:mm\");\nString timeString = printFormat.format(stopDate1);\n</code></pre>\n\n<p>Now I want above <code>String</code> as <code>Timestamp</code> (only HH:MM). How to do that?</p>\n"},{"tags":["java","android","maven","android-studio","gradle"],"comments":[{"owner":{"account_id":2686715,"reputation":8194,"user_id":2320961,"display_name":"Nic3500"},"score":0,"creation_date":1535713093,"post_id":52113096,"comment_id":91178354,"body_markdown":"Improved readability + code formatting","body":"Improved readability + code formatting"},{"owner":{"account_id":52786,"reputation":8690,"user_id":157804,"accept_rate":86,"display_name":"mobibob"},"score":1,"creation_date":1604171512,"post_id":52113096,"comment_id":114267876,"body_markdown":"what is the &#39;Messages&#39; view?  I have searched every menu and submenu without any luck.","body":"what is the &#39;Messages&#39; view?  I have searched every menu and submenu without any luck."}],"answers":[{"tags":[],"owner":{"account_id":3964294,"reputation":961,"user_id":3270701,"display_name":"Akash"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1535710056,"creation_date":1535710056,"answer_id":52113139,"question_id":52113096,"body_markdown":"Can you please try with this\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }","title":"Build APK(s): Errors while building APK. You can find the errors in the &#39;Messages&#39; view","body":"<p>Can you please try with this</p>\n\n<pre><code>buildTypes {\n    release {\n        minifyEnabled false\n        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":10692781,"reputation":11,"user_id":7871050,"display_name":"Abdullahi isa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8398,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640078659,"creation_date":1535709913,"question_id":52113096,"body_markdown":"I cannot install app or build APK in android studio 3.1.4.  It continues showing this error:\r\n\r\n&gt; &quot;Build APK(s): Errors while building APK. You can find the errors in the &#39;Messages&#39; view.&quot;. \r\n\r\nHere is my gradle below.\r\n\r\n\r\n    \r\n\r\n 1. apply plugin: &#39;com.android.application&#39;\r\n        \r\n        android {\r\n            compileSdkVersion 27\r\n            buildToolsVersion &#39;27.0.3&#39;\r\n            defaultConfig {\r\n                applicationId &quot;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;\r\n                minSdkVersion 15\r\n                targetSdkVersion 27\r\n                versionCode 6\r\n                versionName &quot;6.0&quot;\r\n                testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;\r\n                multiDexEnabled = true\r\n                javaCompileOptions {\r\n                    annotationProcessorOptions {\r\n                        includeCompileClasspath false\r\n                    }\r\n                }\r\n                lintOptions {\r\n                    checkReleaseBuilds false\r\n                    abortOnError false\r\n                }\r\n        \r\n            }\r\n        \r\n            buildTypes {\r\n                release {\r\n                    debuggable true\r\n                    minifyEnabled false\r\n                    proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n                }\r\n            }\r\n        \r\n        \r\n        }\r\n        \r\n        // In the app build.gradle file\r\n        \r\n        \r\n        repositories {\r\n            mavenCentral()\r\n            maven { //url &quot;http://oss.sonatype.org/content/repositories/snapshots/&quot;\r\n                url &#39;https://maven.google.com&#39;\r\n        \r\n            }\r\n        }\r\n        repositories {\r\n            mavenCentral()\r\n            maven { url &quot;http://oss.sonatype.org/content/repositories/snapshots/&quot; }\r\n        }\r\n        \r\n        dependencies {\r\n            implementation &#39;com.jakewharton:butterknife:8.8.1&#39;\r\n            implementation &#39;com.jakewharton:butterknife-compiler:8.8.1&#39;\r\n            annotationProcessor &#39;com.jakewharton:butterknife-compiler:8.8.1&#39;\r\n            //compile &#39;com.amazonaws:aws-android-sdk-polly:2.3.8&#39;\r\n            implementation &#39;com.jakewharton.timber:timber:4.7.1&#39;\r\n            //implementation &#39;com.android.support:multidex:1.0.0&#39;\r\n            implementation &#39;com.android.support:multidex:1.0.3&#39;\r\n            implementation &#39;com.github.bumptech.glide:glide:3.7.0&#39;\r\n            implementation &#39;com.google.code.gson:gson:2.8.5&#39;\r\n            implementation &#39;com.github.pavlospt:circleview:1.2&#39;\r\n            implementation &#39;com.stripe:stripe-android:6.1.2&#39;\r\n            implementation &#39;com.facebook.android:facebook-login:[4,5)&#39;\r\n            //implementation &#39;com.google.android.gms:play-services:12.0.1&#39;\r\n            implementation &#39;com.google.android.gms:play-services-location:15.0.1&#39;\r\n            implementation &#39;com.google.android.gms:play-services-auth:16.0.0&#39;\r\n            implementation &#39;com.google.android.gms:play-services-maps:15.0.1&#39;\r\n            implementation &#39;com.ms-square:expandableTextView:0.1.4&#39;\r\n        }\r\n        \r\n        \r\n        dependencies {\r\n        \r\n            implementation (&#39;com.mapbox.mapboxsdk:mapbox-android-sdk:5.1.4@aar&#39;) {\r\n                transitive = true\r\n            }\r\n        \r\n        \r\n            implementation  &#39;com.mapbox.mapboxsdk:mapbox-android-navigation:0.6.3&#39;\r\n            implementation (&#39;com.mapbox.mapboxsdk:mapbox-android-navigation-ui:0.6.1&#39;) {\r\n                exclude group: &#39;android.arch.core&#39;\r\n                transitive = true\r\n            }\r\n        \r\n            implementation fileTree(dir: &#39;libs&#39;, include: &#39;Parse-*.jar&#39;)\r\n            implementation fileTree(include: [&#39;*.jar&#39;], dir: &#39;libs&#39;)\r\n        \r\n            implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n        \r\n        \r\n            \r\n        androidTestImplementation(&#39;com.android.support.test.espresso:espresso-core:2.2.2&#39;,\r\n        {\r\n                exclude group: &#39;com.android.support&#39;, module: &#39;support-annotations&#39;\r\n            })\r\n            // compile fileTree(include: [&#39;*.jar&#39;], dir: &#39;libs&#39;)\r\n        \r\n        // fire base SDK gradle\r\n            implementation &#39;com.google.firebase:firebase-core:16.0.3&#39;\r\n            //apply plugin: &#39;com.google.gms.google-services&#39;\r\n        \r\n        \r\n        \r\n            //implementation  &#39;com.squareup.picasso:picasso:2.71282&#39;\r\n            implementation  &#39;com.nineoldandroids:library:2.4.0&#39;\r\n            implementation  &#39;com.daimajia.slider:library:1.1.5@aar&#39;\r\n            implementation  &#39;com.github.bumptech.glide:glide:4.0.0-RC1&#39;\r\n            implementation  &#39;com.jakewharton:butterknife:8.8.1&#39;\r\n            //noinspection GradleCompatible\r\n            implementation  &#39;com.android.support:appcompat-v7:27.1.1&#39;\r\n            implementation &#39;com.android.support:support-compat:27.1.1&#39;\r\n            implementation  &#39;com.android.support:mediarouter-v7:27.1.1&#39;\r\n            implementation &#39;com.android.support:cardview-v7:27.1.1&#39;\r\n            implementation  &#39;com.android.support:design:27.1.1&#39;\r\n            implementation &#39;com.android.support.constraint:constraint-layout:2.0.0-alpha2&#39;\r\n            implementation  &#39;com.android.volley:volley:1.0.0&#39;\r\n            implementation  &#39;com.android.support:support-annotations:27.1.1&#39;\r\n            implementation  &#39;com.android.support:recyclerview-v7:27.1.1&#39;\r\n            testImplementation &#39;junit:junit:4.12&#39;\r\n            annotationProcessor &#39;com.github.bumptech.glide:compiler:4.0.0-RC1&#39;\r\n        \r\n        \r\n        }","title":"Build APK(s): Errors while building APK. You can find the errors in the &#39;Messages&#39; view","body":"<p>I cannot install app or build APK in android studio 3.1.4.  It continues showing this error:</p>\n\n<blockquote>\n  <p>\"Build APK(s): Errors while building APK. You can find the errors in the 'Messages' view.\". </p>\n</blockquote>\n\n<p>Here is my gradle below.</p>\n\n<ol>\n<li><p>apply plugin: 'com.android.application'</p>\n\n<pre><code>android {\n    compileSdkVersion 27\n    buildToolsVersion '27.0.3'\n    defaultConfig {\n        applicationId \"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\"\n        minSdkVersion 15\n        targetSdkVersion 27\n        versionCode 6\n        versionName \"6.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n        multiDexEnabled = true\n        javaCompileOptions {\n            annotationProcessorOptions {\n                includeCompileClasspath false\n            }\n        }\n        lintOptions {\n            checkReleaseBuilds false\n            abortOnError false\n        }\n\n    }\n\n    buildTypes {\n        release {\n            debuggable true\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n\n\n}\n\n// In the app build.gradle file\n\n\nrepositories {\n    mavenCentral()\n    maven { //url \"http://oss.sonatype.org/content/repositories/snapshots/\"\n        url 'https://maven.google.com'\n\n    }\n}\nrepositories {\n    mavenCentral()\n    maven { url \"http://oss.sonatype.org/content/repositories/snapshots/\" }\n}\n\ndependencies {\n    implementation 'com.jakewharton:butterknife:8.8.1'\n    implementation 'com.jakewharton:butterknife-compiler:8.8.1'\n    annotationProcessor 'com.jakewharton:butterknife-compiler:8.8.1'\n    //compile 'com.amazonaws:aws-android-sdk-polly:2.3.8'\n    implementation 'com.jakewharton.timber:timber:4.7.1'\n    //implementation 'com.android.support:multidex:1.0.0'\n    implementation 'com.android.support:multidex:1.0.3'\n    implementation 'com.github.bumptech.glide:glide:3.7.0'\n    implementation 'com.google.code.gson:gson:2.8.5'\n    implementation 'com.github.pavlospt:circleview:1.2'\n    implementation 'com.stripe:stripe-android:6.1.2'\n    implementation 'com.facebook.android:facebook-login:[4,5)'\n    //implementation 'com.google.android.gms:play-services:12.0.1'\n    implementation 'com.google.android.gms:play-services-location:15.0.1'\n    implementation 'com.google.android.gms:play-services-auth:16.0.0'\n    implementation 'com.google.android.gms:play-services-maps:15.0.1'\n    implementation 'com.ms-square:expandableTextView:0.1.4'\n}\n\n\ndependencies {\n\n    implementation ('com.mapbox.mapboxsdk:mapbox-android-sdk:5.1.4@aar') {\n        transitive = true\n    }\n\n\n    implementation  'com.mapbox.mapboxsdk:mapbox-android-navigation:0.6.3'\n    implementation ('com.mapbox.mapboxsdk:mapbox-android-navigation-ui:0.6.1') {\n        exclude group: 'android.arch.core'\n        transitive = true\n    }\n\n    implementation fileTree(dir: 'libs', include: 'Parse-*.jar')\n    implementation fileTree(include: ['*.jar'], dir: 'libs')\n\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n\n\n\nandroidTestImplementation('com.android.support.test.espresso:espresso-core:2.2.2',\n{\n        exclude group: 'com.android.support', module: 'support-annotations'\n    })\n    // compile fileTree(include: ['*.jar'], dir: 'libs')\n\n// fire base SDK gradle\n    implementation 'com.google.firebase:firebase-core:16.0.3'\n    //apply plugin: 'com.google.gms.google-services'\n\n\n\n    //implementation  'com.squareup.picasso:picasso:2.71282'\n    implementation  'com.nineoldandroids:library:2.4.0'\n    implementation  'com.daimajia.slider:library:1.1.5@aar'\n    implementation  'com.github.bumptech.glide:glide:4.0.0-RC1'\n    implementation  'com.jakewharton:butterknife:8.8.1'\n    //noinspection GradleCompatible\n    implementation  'com.android.support:appcompat-v7:27.1.1'\n    implementation 'com.android.support:support-compat:27.1.1'\n    implementation  'com.android.support:mediarouter-v7:27.1.1'\n    implementation 'com.android.support:cardview-v7:27.1.1'\n    implementation  'com.android.support:design:27.1.1'\n    implementation 'com.android.support.constraint:constraint-layout:2.0.0-alpha2'\n    implementation  'com.android.volley:volley:1.0.0'\n    implementation  'com.android.support:support-annotations:27.1.1'\n    implementation  'com.android.support:recyclerview-v7:27.1.1'\n    testImplementation 'junit:junit:4.12'\n    annotationProcessor 'com.github.bumptech.glide:compiler:4.0.0-RC1'\n\n\n}\n</code></pre></li>\n</ol>\n"},{"tags":["java","biginteger"],"comments":[{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1640109677,"post_id":70433073,"comment_id":124516169,"body_markdown":"`sign = new BigInteger(mac.doFinal(baseStringBytes));` this will be a negative integer about half the time. You need to use the [sign-magnitude constructer for BigInteger](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigInteger.html#%3Cinit%3E(int,byte%5B%5D)).","body":"<code>sign = new BigInteger(mac.doFinal(baseStringBytes));</code> this will be a negative integer about half the time. You need to use the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigInteger.html#%3Cinit%3E(int,byte%5B%5D)\" rel=\"nofollow noreferrer\">sign-magnitude constructer for BigInteger</a>."},{"owner":{"account_id":23707955,"reputation":1,"user_id":17730190,"display_name":"江江涛"},"score":0,"creation_date":1640142124,"post_id":70433073,"comment_id":124523619,"body_markdown":"@PresidentJamesK.Polk thank you,and I want to ask another question,Why the method &#39;String.format(%032x, sign) &#39; may return a String of length 63?","body":"@PresidentJamesK.Polk thank you,and I want to ask another question,Why the method &#39;String.format(%032x, sign) &#39; may return a String of length 63?"},{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1640142921,"post_id":70433073,"comment_id":124523732,"body_markdown":"The 32 in `%032x` is the **minimum** width. If the result needs more than 32 characters then it is expanded. HMAC-sha-256 produces a 32 *byte* result, which requires 64 hex characters to represent.  You should use `String.format(%064x, sign)`","body":"The 32 in <code>%032x</code> is the <b>minimum</b> width. If the result needs more than 32 characters then it is expanded. HMAC-sha-256 produces a 32 <i>byte</i> result, which requires 64 hex characters to represent.  You should use <code>String.format(%064x, sign)</code>"},{"owner":{"account_id":23707955,"reputation":1,"user_id":17730190,"display_name":"江江涛"},"score":0,"creation_date":1640154807,"post_id":70433073,"comment_id":124525575,"body_markdown":"@PresidentJamesK.Polk thank you very much indeed","body":"@PresidentJamesK.Polk thank you very much indeed"}],"owner":{"account_id":23707955,"reputation":1,"user_id":17730190,"display_name":"江江涛"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":420,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640078380,"creation_date":1640078380,"question_id":70433073,"body_markdown":"    public static String buildSignAndUrl(long partnerId, String secret, String path){\r\n                long timestamp = System.currentTimeMillis() / 1000L;\r\n                String base_String = String.format(&quot;%s%s%s&quot;, partnerId, path, timestamp);\r\n                byte[] baseStringBytes;\r\n                byte[] partner_key;\r\n                BigInteger sign = null;\r\n                try{\r\n                    baseStringBytes = base_String.getBytes(StandardCharsets.UTF_8);\r\n                    partner_key = secret.getBytes(StandardCharsets.UTF_8);\r\n                    Mac mac = Mac.getInstance(HmacAlgorithms.HMAC_SHA_256.toString());\r\n                    SecretKeySpec secret_key = new SecretKeySpec(partner_key, HmacAlgorithms.HMAC_SHA_256.toString());\r\n                    mac.init(secret_key);\r\n                    sign = new BigInteger(mac.doFinal(baseStringBytes));\r\n                } catch (Exception e){\r\n                    e.printStackTrace();\r\n                }\r\n                String url = SANDBOX_HOST + path + String.format(&quot;?partner_id=%s&amp;timestamp=%s&amp;sign=%s&quot;,\r\n                        partnerId, timestamp, String.format(&quot;%032x&quot;, sign));\r\n                return url;\r\n            }\r\n// Why use this url to send a post may cause &quot;Wrong sign&quot;? the timestamp in url and the timestamp to calculate a sign are same;","title":"when I use shopee open platform API,I use the follow method to build a url to send a post request,I often get the message &quot;Wrong sign&quot;,any solutions?","body":"<pre><code>public static String buildSignAndUrl(long partnerId, String secret, String path){\n            long timestamp = System.currentTimeMillis() / 1000L;\n            String base_String = String.format(&quot;%s%s%s&quot;, partnerId, path, timestamp);\n            byte[] baseStringBytes;\n            byte[] partner_key;\n            BigInteger sign = null;\n            try{\n                baseStringBytes = base_String.getBytes(StandardCharsets.UTF_8);\n                partner_key = secret.getBytes(StandardCharsets.UTF_8);\n                Mac mac = Mac.getInstance(HmacAlgorithms.HMAC_SHA_256.toString());\n                SecretKeySpec secret_key = new SecretKeySpec(partner_key, HmacAlgorithms.HMAC_SHA_256.toString());\n                mac.init(secret_key);\n                sign = new BigInteger(mac.doFinal(baseStringBytes));\n            } catch (Exception e){\n                e.printStackTrace();\n            }\n            String url = SANDBOX_HOST + path + String.format(&quot;?partner_id=%s&amp;timestamp=%s&amp;sign=%s&quot;,\n                    partnerId, timestamp, String.format(&quot;%032x&quot;, sign));\n            return url;\n        }\n</code></pre>\n<p>// Why use this url to send a post may cause &quot;Wrong sign&quot;? the timestamp in url and the timestamp to calculate a sign are same;</p>\n"},{"tags":["java","docx4j"],"comments":[{"owner":{"account_id":30580,"reputation":15467,"user_id":1031689,"accept_rate":67,"display_name":"JasonPlutext"},"score":0,"creation_date":1364433950,"post_id":15664726,"comment_id":22247512,"body_markdown":"I assume you&#39;re processing the 50 documents through a single JVM instance (so you&#39;re only incurring JAXB Context init delay once)?","body":"I assume you&#39;re processing the 50 documents through a single JVM instance (so you&#39;re only incurring JAXB Context init delay once)?"},{"owner":{"account_id":75286,"reputation":2896,"user_id":216011,"accept_rate":67,"display_name":"bertolami"},"score":0,"creation_date":1364451836,"post_id":15664726,"comment_id":22252175,"body_markdown":"yes. What I observed is that if the documents are generated concurrently, each in its own thread, the procedure takes even longer than if the documents are generated one after the other.","body":"yes. What I observed is that if the documents are generated concurrently, each in its own thread, the procedure takes even longer than if the documents are generated one after the other."}],"answers":[{"tags":[],"owner":{"account_id":30580,"reputation":15467,"user_id":1031689,"accept_rate":67,"display_name":"JasonPlutext"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1364463960,"creation_date":1364463960,"answer_id":15678574,"question_id":15664726,"body_markdown":"Please try http://www.docx4java.org/docx4j/docx4j-nightly-20130328.jar\r\n\r\nIt contains an experimental variableReplace method.  Assuming documentPart and mappings as per your question, you can call:\r\n\r\n\tdocumentPart.variableReplace(mappings);\r\n\r\nYou don&#39;t need documentPart.setJaxbElement.\r\n\r\nIn my testing with a 175 page document, processing took 1/3 sec (roughly 3 times faster).\r\n\r\nAny further performance improvements will come most easily from providing more resources (more cores, if you want to do it concurrently), and more RAM.\r\n\r\nLet me know what you think.","title":"Optimize docx4j performance","body":"<p>Please try <a href=\"http://www.docx4java.org/docx4j/docx4j-nightly-20130328.jar\" rel=\"nofollow\">http://www.docx4java.org/docx4j/docx4j-nightly-20130328.jar</a></p>\n\n<p>It contains an experimental variableReplace method.  Assuming documentPart and mappings as per your question, you can call:</p>\n\n<pre><code>documentPart.variableReplace(mappings);\n</code></pre>\n\n<p>You don't need documentPart.setJaxbElement.</p>\n\n<p>In my testing with a 175 page document, processing took 1/3 sec (roughly 3 times faster).</p>\n\n<p>Any further performance improvements will come most easily from providing more resources (more cores, if you want to do it concurrently), and more RAM.</p>\n\n<p>Let me know what you think.</p>\n"}],"owner":{"account_id":75286,"reputation":2896,"user_id":216011,"accept_rate":67,"display_name":"bertolami"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2146,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640077642,"creation_date":1364403321,"question_id":15664726,"body_markdown":"I am using docx4j 2.8.1 to replace texts and a logo within the word files. Now I want to improve performance since the processing of about 50 documents is quite slow. What options are recommended to increase performance of docx4j?\r\n\r\nThe code to replace the strings (not the logo) looks like:\r\n\r\n     String xml = XmlUtils.marshaltoString(documentPart.getJaxbElement(), true);\r\n     HashMap&lt;String, String&gt; mappings = buildReplaceMap(userData);\r\n\r\n     Object obj = XmlUtils.unmarshallFromTemplate(xml, mappings);\r\n     documentPart.setJaxbElement(obj);","title":"Optimize docx4j performance","body":"<p>I am using docx4j 2.8.1 to replace texts and a logo within the word files. Now I want to improve performance since the processing of about 50 documents is quite slow. What options are recommended to increase performance of docx4j?</p>\n\n<p>The code to replace the strings (not the logo) looks like:</p>\n\n<pre><code> String xml = XmlUtils.marshaltoString(documentPart.getJaxbElement(), true);\n HashMap&lt;String, String&gt; mappings = buildReplaceMap(userData);\n\n Object obj = XmlUtils.unmarshallFromTemplate(xml, mappings);\n documentPart.setJaxbElement(obj);\n</code></pre>\n"},{"tags":["java","android-source","aidl"],"answers":[{"tags":[],"owner":{"account_id":22215880,"reputation":41,"user_id":16454332,"display_name":"Markusbug"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640077397,"creation_date":1640077397,"answer_id":70432865,"question_id":70415713,"body_markdown":"Ok I found an answer:\r\n\r\nJust before the phone is booting you need to execute in the terminal `adb logcat`, once it boots it should show the logs.\r\n\r\nBut because there are so many logs you should pipe it into less, then a vim instance is started with all the logs:\r\n`adb logcat | less`","title":"How to debug System Service on AOSP?","body":"<p>Ok I found an answer:</p>\n<p>Just before the phone is booting you need to execute in the terminal <code>adb logcat</code>, once it boots it should show the logs.</p>\n<p>But because there are so many logs you should pipe it into less, then a vim instance is started with all the logs:\n<code>adb logcat | less</code></p>\n"}],"owner":{"account_id":22215880,"reputation":41,"user_id":16454332,"display_name":"Markusbug"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":243,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70432865,"answer_count":1,"score":0,"last_activity_date":1640077397,"creation_date":1639951700,"question_id":70415713,"body_markdown":"I wrote a simple system service that exposes the port 8545 on the localhost, but when I try to see if it runs, there is no open port.\r\n\r\nIs there any way I can debug my System Service and/or gain insight into the logs?","title":"How to debug System Service on AOSP?","body":"<p>I wrote a simple system service that exposes the port 8545 on the localhost, but when I try to see if it runs, there is no open port.</p>\n<p>Is there any way I can debug my System Service and/or gain insight into the logs?</p>\n"},{"tags":["java","jpa","db2","websphere","jpql"],"comments":[{"owner":{"account_id":16755858,"reputation":2962,"user_id":12111821,"display_name":"nfgl"},"score":0,"creation_date":1640072718,"post_id":70430432,"comment_id":124502259,"body_markdown":"Not your question but `DISTINCT` is not needed since you select _one_ row with the tables primary key, If you remove it then you have what this query was supposed to return.","body":"Not your question but <code>DISTINCT</code> is not needed since you select <i>one</i> row with the tables primary key, If you remove it then you have what this query was supposed to return."},{"owner":{"account_id":23706373,"reputation":3,"user_id":17728778,"display_name":"Peeranut Jeensopa"},"score":0,"creation_date":1640074205,"post_id":70430432,"comment_id":124502683,"body_markdown":"@nfgl I apologized for my mistake, this is a example code.","body":"@nfgl I apologized for my mistake, this is a example code."}],"answers":[{"tags":[],"owner":{"account_id":4558101,"reputation":17722,"user_id":3701228,"display_name":"Gas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640077362,"creation_date":1640077362,"answer_id":70432856,"question_id":70430432,"body_markdown":"If `freetext` is a Clob column, try to annotate it properly with `@Lob` . Check this post https://stackoverflow.com/questions/11793320/using-eclipselink-jpa-to-bind-strings-larger-than-255-characters  . \r\n\r\nThe error might be related to the JPA provider change between WAS7 and 9 (previously it was OpenJPA). If you dont care abouth JPA 2.1, you can switch back to 2.0 OpenJPA, for example like this using `wsadmin`:\r\n\r\n```\r\nwsadmin&gt;AdminTask.modifyJPASpecLevel(&#39;[-node myNode -server server1 -specLevel 2.0]&#39;)  \r\nCWWJP8813I: The JPA specification compliance level for Server server1 has been successfully set to JPA 2.0.\r\n```\r\nSee the following link for details: https://www.ibm.com/docs/en/was/9.0.5?topic=applications-identifying-modifying-jpa-specification-level\r\n\r\n","title":"JPQL SELECT Distinct Query with clob Column works fine on WAS7, but WAS9 doesn&#39;t","body":"<p>If <code>freetext</code> is a Clob column, try to annotate it properly with <code>@Lob</code> . Check this post <a href=\"https://stackoverflow.com/questions/11793320/using-eclipselink-jpa-to-bind-strings-larger-than-255-characters\">Using EclipseLink JPA to bind Strings larger than 255 characters</a>  .</p>\n<p>The error might be related to the JPA provider change between WAS7 and 9 (previously it was OpenJPA). If you dont care abouth JPA 2.1, you can switch back to 2.0 OpenJPA, for example like this using <code>wsadmin</code>:</p>\n<pre><code>wsadmin&gt;AdminTask.modifyJPASpecLevel('[-node myNode -server server1 -specLevel 2.0]')  \nCWWJP8813I: The JPA specification compliance level for Server server1 has been successfully set to JPA 2.0.\n</code></pre>\n<p>See the following link for details: <a href=\"https://www.ibm.com/docs/en/was/9.0.5?topic=applications-identifying-modifying-jpa-specification-level\" rel=\"nofollow noreferrer\">https://www.ibm.com/docs/en/was/9.0.5?topic=applications-identifying-modifying-jpa-specification-level</a></p>\n"}],"owner":{"account_id":23706373,"reputation":3,"user_id":17728778,"display_name":"Peeranut Jeensopa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":553,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70432856,"answer_count":1,"score":0,"last_activity_date":1640077362,"creation_date":1640058230,"question_id":70430432,"body_markdown":"I&#39;m Using Spring 3.0 based JPA2.0\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;MY_TABLE&quot;, schema = &quot;DB2XXXX&quot;)\r\npublic class MyTable  implements java.io.Serializable,Comparable&lt;MyTable&gt; {\r\n\tprivate static final long serialVersionUID = 1L;\r\n\t\r\n\t@Id\r\n\t@GeneratedValue(strategy=GenerationType.IDENTITY)\r\n\t@Column(name = &quot;MY_TABLE_ID&quot;)\r\n\tprivate BigInteger myTableId;\r\n\t\r\n\t@Column(name = &quot;FREETEXT&quot;)\r\n\tprivate String freetext;\r\n\t\r\n\tpublic MyTable() {\r\n\t}\r\n\t\r\n\tpublic MyTable(BigInteger myTableId,String freetext) {\r\n\t\tsuper();\r\n\t\tthis.myTableId = myTableId;\r\n\t\tthis.freetext = freetext\r\n\t}\r\n\t\r\n\tpublic BigInteger getMyTableId() {\r\n\t\treturn myTableId;\r\n\t}\r\n\tpublic void setMyTableId(myTableId) {\r\n\t\tthis.myTableId = myTableId;\r\n\t}\r\n\tpublic String getFreetext() {\r\n\t\treturn freetext;\r\n\t}\r\n\tpublic void setFreetext(String freetext) {\r\n\t\tthis.freetext = freetext;\r\n\t}\r\n}\r\n\r\n```\r\n\r\n**freetext is clob column**\r\n\r\n```\r\n\tpublic List&lt;MyTable&gt; getData(BigInteger myTableId) throws Exception {\r\n\t\tStringBuilder jpql = new StringBuilder();\r\n\t\tList&lt;MyTable&gt; resultList = null;\r\n\t\ttry {\r\n\t\t\tjpql.append(&quot;SELECT distinct data FROM MyTable data &quot;)\r\n\t\t\tresultList = findWithJpql(entityManager, jpql.toString(), null,false, 0, 0);\r\n\t\t} catch (Exception e) {\r\n\t\t}\r\n\t\treturn resultList;\r\n\t}\r\n```\r\n\r\n\r\n```\r\n    @TransactionAttribute(value = TransactionAttributeType.REQUIRED)\r\n\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\tpublic &lt;T&gt; T findWithJpql(EntityManager em, String jpql, Map&lt;String, Object&gt; conditions, boolean singleResult, int firstResult, int maxResult) {\r\n\t\tQuery query = em.createQuery(jpql);\r\n\t\tif(firstResult &gt; 0){\r\n\t\t\tquery.setFirstResult(firstResult);\r\n\t\t}\r\n\t\tif(maxResult &gt; 0){\r\n\t\t\tquery.setMaxResults(maxResult);\r\n\t\t}\r\n\r\n\t\tif(conditions != null &amp;&amp; conditions.size() &gt; 0){\r\n\t\t\tfor(String condition : conditions.keySet()){\r\n\t\t\t\tquery.setParameter(condition, conditions.get(condition));\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(singleResult){\r\n\t\t\ttry{\r\n\t\t\t\treturn (T)query.getSingleResult();\r\n\t\t\t}catch(NoResultException nrex){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tT a = (T)query.getResultList();\r\n\t\t\treturn a;\r\n\t\t}\r\n\t}\r\n```\r\n\r\nwhen call query method in WAS9 **Db2 error code -134** :\r\nA string value with a length attribute greater than 255 bytes is not allowed in a SELECT list that also specifies DISTINCT.\r\n**But this  query works fine on WAS7 **\r\n\r\n\r\n[21/12/2564, 10:28:10:731 ICT] 0000018e eclipselink   W   Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.6.8.WAS-v20181218-0accd7f): org.eclipse.persistence.exceptions.DatabaseException\r\nInternal Exception: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-134, SQLSTATE=42907, SQLERRMC=REMARK, DRIVER=4.25.13\r\nError Code: -134\r\n\r\nInternal Exception: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-134, SQLSTATE=42907, SQLERRMC=REMARK, DRIVER=4.25.13\r\nError Code: -134\r\n\r\n\r\n","title":"JPQL SELECT Distinct Query with clob Column works fine on WAS7, but WAS9 doesn&#39;t","body":"<p>I'm Using Spring 3.0 based JPA2.0</p>\n<pre><code>@Entity\n@Table(name = &quot;MY_TABLE&quot;, schema = &quot;DB2XXXX&quot;)\npublic class MyTable  implements java.io.Serializable,Comparable&lt;MyTable&gt; {\n    private static final long serialVersionUID = 1L;\n    \n    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    @Column(name = &quot;MY_TABLE_ID&quot;)\n    private BigInteger myTableId;\n    \n    @Column(name = &quot;FREETEXT&quot;)\n    private String freetext;\n    \n    public MyTable() {\n    }\n    \n    public MyTable(BigInteger myTableId,String freetext) {\n        super();\n        this.myTableId = myTableId;\n        this.freetext = freetext\n    }\n    \n    public BigInteger getMyTableId() {\n        return myTableId;\n    }\n    public void setMyTableId(myTableId) {\n        this.myTableId = myTableId;\n    }\n    public String getFreetext() {\n        return freetext;\n    }\n    public void setFreetext(String freetext) {\n        this.freetext = freetext;\n    }\n}\n\n</code></pre>\n<p><strong>freetext is clob column</strong></p>\n<pre><code>    public List&lt;MyTable&gt; getData(BigInteger myTableId) throws Exception {\n        StringBuilder jpql = new StringBuilder();\n        List&lt;MyTable&gt; resultList = null;\n        try {\n            jpql.append(&quot;SELECT distinct data FROM MyTable data &quot;)\n            resultList = findWithJpql(entityManager, jpql.toString(), null,false, 0, 0);\n        } catch (Exception e) {\n        }\n        return resultList;\n    }\n</code></pre>\n<pre><code>    @TransactionAttribute(value = TransactionAttributeType.REQUIRED)\n    @SuppressWarnings(&quot;unchecked&quot;)\n    public &lt;T&gt; T findWithJpql(EntityManager em, String jpql, Map&lt;String, Object&gt; conditions, boolean singleResult, int firstResult, int maxResult) {\n        Query query = em.createQuery(jpql);\n        if(firstResult &gt; 0){\n            query.setFirstResult(firstResult);\n        }\n        if(maxResult &gt; 0){\n            query.setMaxResults(maxResult);\n        }\n\n        if(conditions != null &amp;&amp; conditions.size() &gt; 0){\n            for(String condition : conditions.keySet()){\n                query.setParameter(condition, conditions.get(condition));\n            }\n        }\n        if(singleResult){\n            try{\n                return (T)query.getSingleResult();\n            }catch(NoResultException nrex){\n                return null;\n            }\n        }else{\n            T a = (T)query.getResultList();\n            return a;\n        }\n    }\n</code></pre>\n<p>when call query method in WAS9 <strong>Db2 error code -134</strong> :\nA string value with a length attribute greater than 255 bytes is not allowed in a SELECT list that also specifies DISTINCT.\n**But this  query works fine on WAS7 **</p>\n<p>[21/12/2564, 10:28:10:731 ICT] 0000018e eclipselink   W   Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.6.8.WAS-v20181218-0accd7f): org.eclipse.persistence.exceptions.DatabaseException\nInternal Exception: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-134, SQLSTATE=42907, SQLERRMC=REMARK, DRIVER=4.25.13\nError Code: -134</p>\n<p>Internal Exception: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-134, SQLSTATE=42907, SQLERRMC=REMARK, DRIVER=4.25.13\nError Code: -134</p>\n"},{"tags":["java","spring-boot","api","authentication","ldap"],"answers":[{"tags":[],"owner":{"account_id":22498600,"reputation":46,"user_id":16695223,"display_name":"Vikas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639811488,"creation_date":1639811488,"answer_id":70401620,"question_id":70398672,"body_markdown":"You can do this with Spring Data Ldap.\r\nJust map Java class with Ldap Entry, that way you will also be able to do CRUD operations on Ldap.\r\n\r\nCreate one LdapUserService which extends UserDetail from Spring security.\r\n\r\nAnd then use this LdapUserService in Spring security configurations.\r\n\r\nNow you can perform authentication, authorization along with CRUD operations.","title":"LDAP authentication using Spring Boot","body":"<p>You can do this with Spring Data Ldap.\nJust map Java class with Ldap Entry, that way you will also be able to do CRUD operations on Ldap.</p>\n<p>Create one LdapUserService which extends UserDetail from Spring security.</p>\n<p>And then use this LdapUserService in Spring security configurations.</p>\n<p>Now you can perform authentication, authorization along with CRUD operations.</p>\n"}],"owner":{"account_id":23678540,"reputation":343,"user_id":17704418,"display_name":"salam_verdim_alana_panyatkasi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1306,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1640075841,"creation_date":1639773654,"question_id":70398672,"body_markdown":"I have created a Restful API. I am using in here LDAP authentication. Our company has an LDAP directory server and I am using the below method `as utility` in my `service layer`.\r\n\r\nThis is my LDAP authentication method, which I am using this method as a utility in my service layer.\r\n\r\n        public Map&lt;String, Object&gt; authenticate(String user, String pass) {\r\n        String returnedAtts[] = {&quot;sn&quot;, &quot;givenName&quot;, &quot;name&quot;, &quot;userPrincipalName&quot;, &quot;displayName&quot;, &quot;memberOf&quot;};\r\n        String searchFilter = &quot;(&amp;(objectClass=User)(sAMAccountName=&quot; + user + &quot;))&quot;;\r\n        // Create the search controls\r\n        SearchControls searchCtls = new SearchControls();\r\n        searchCtls.setReturningAttributes(returnedAtts);\r\n        // Specify the search scope\r\n        searchCtls.setSearchScope(SearchControls.SUBTREE_SCOPE);\r\n        Hashtable&lt;String, String&gt; env = new Hashtable&lt;String, String&gt;();\r\n        env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\r\n        env.put(Context.PROVIDER_URL, ldapHost);\r\n        env.put(Context.SECURITY_AUTHENTICATION, &quot;simple&quot;);\r\n\r\n        env.put(Context.SECURITY_PRINCIPAL, user + &quot;@&quot; + domain);\r\n        env.put(Context.SECURITY_CREDENTIALS, pass);\r\n        env.put(Context.SECURITY_PROTOCOL, &quot;SSL&quot;);\r\n        LdapContext ctxGC = null;\r\n        NamingEnumeration&lt;SearchResult&gt; answer = null;\r\n        Attributes attrs = null;\r\n        SearchResult sr = null;\r\n        NamingEnumeration&lt;?&gt; ne = null;\r\n        Attribute attr = null;\r\n\r\n        try {\r\n            ctxGC = new InitialLdapContext(env, null);\r\n            if (ctxGC != null) {\r\n                answer = ctxGC.search(searchBase, searchFilter, searchCtls);\r\n                if (answer != null) {\r\n                    while (answer.hasMoreElements()) {\r\n                        sr = (SearchResult) answer.next();\r\n                        attrs = sr.getAttributes();\r\n                        if (attrs != null) {\r\n                            amap = new HashMap&lt;String, Object&gt;();\r\n                            ne = attrs.getAll();\r\n                            attr = (Attribute) ne.next();\r\n                            amap.put(attr.getID(), attr.get());\r\n                            ne.close();\r\n                        }\r\n                        ctxGC.close();         // Close and clean up\r\n                    }\r\n                } else {\r\n                    System.out.println(&quot;Answer from domen controller is null!&quot;);\r\n                }\r\n            } else {\r\n                System.out.println(&quot;Login or Password is wrong! &quot;);\r\n            }\r\n\r\n        } catch (NamingException ex) {\r\n            System.out.println(&quot;Exception: &quot;+ex.toString());\r\n        } finally {\r\n            System.out.println(&quot;&quot;);\r\n        }\r\n        return amap;\r\n    }\r\n\r\nThis is my service layer class and I am making utility class as an injection that can be used authentication method as you know. When I send a request in swagger or postman username and password, given the values that come from the request, I persist them into to database of the table. but before persisting, the authentication method controls my username and password. if the password or username is not correct I return an error response to the client otherwise I return a success response to the client. In both situations, I insert given values to the database of the table from the request.\r\n\r\n    @Override\r\n        public Optional&lt;ResponseEntity&lt;? extends ResponseDto&gt;&gt; login(String username, String password, String type) {\r\n\r\n    //Is there any method or feature that spring boot provides us instead of the method you see here?\r\n            Map&lt;String, Object&gt; authenticate = this.controlDomainLogin.authenticate(username, password);\r\n    //Is there any method or feature that spring boot provides us instead of the method you see here?\r\n\r\n \r\n            if (authenticate != null) {\r\n                DomainLogin domainLogin = new DomainLogin();\r\n                domainLogin.setUsername(username);\r\n                domainLogin.setType(type);\r\n                domainLogin.setLogDate(new Date());\r\n                ResponseEntity&lt;ResponseDto&gt; responseDtoResponseEntity = new ResponseEntity&lt;&gt;(new SuccessResponseDto(SUCCESS_OPERATION.getMessage(), SUCCESS_OPERATION.getCode(), authenticate), HttpStatus.OK);\r\n                domainLogin.setResponse(Objects.requireNonNull(responseDtoResponseEntity.getBody()).getMessage() + &quot;,&quot; + responseDtoResponseEntity.getBody().getCode());\r\n                this.domainLoginRepository.save(domainLogin);\r\n                return Optional.of(responseDtoResponseEntity);\r\n            } else {\r\n                DomainLogin domainLogin = new DomainLogin();\r\n                domainLogin.setUsername(username);\r\n                domainLogin.setType(type);\r\n                domainLogin.setLogDate(new Date());\r\n                ResponseEntity&lt;ResponseDto&gt; responseDtoResponseEntity = new ResponseEntity&lt;&gt;(new ErrorResponseDto(WRONG_USERNAME.getMessage(), WRONG_USERNAME.getCode()), HttpStatus.NOT_FOUND);\r\n                domainLogin.setResponse(Objects.requireNonNull(responseDtoResponseEntity.getBody()).getMessage() + &quot;,&quot; + responseDtoResponseEntity.getBody().getCode());\r\n                domainLogin.setException(Objects.requireNonNull(responseDtoResponseEntity.getBody()).getMessage() + &quot;,&quot; + responseDtoResponseEntity.getBody().getCode());\r\n                this.domainLoginRepository.save(domainLogin);\r\n                return Optional.of(responseDtoResponseEntity);\r\n            }\r\n        }\r\n\r\n\r\n\r\nNow I don&#39;t need to use this method, instead, does spring boot itself have a similar method or any feature, just like the method I showed above? I mean I shouldn&#39;t use this method, instead, is there something spring boot gave us that does the same thing?\r\n\r\nThe same operations will be repeated, but the difference is that I will delete the method that I wrote in java and use the spring boot&#39;s LDAP authentication method instead.\r\n\r\n\r\n\r\nIf it is the class I have shown below, when I run the project, the login page that spring has given by default appears, when I type my username and password there, it performs the validation process successfully, if it fails, it gives the following warning.\r\n\r\n    ctiveDirectoryLdapAuthenticationProvider : Active Directory authentication failed: Supplied password was invalid\r\n\r\n    \r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.security.authentication.AuthenticationManager;\r\n    import org.springframework.security.authentication.AuthenticationProvider;\r\n    import org.springframework.security.authentication.ProviderManager;\r\n    import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\n    import org.springframework.security.ldap.authentication.ad.ActiveDirectoryLdapAuthenticationProvider;\r\n    \r\n    import java.util.Arrays;\r\n    \r\n    import org.springframework.beans.factory.annotation.Value;\r\n    \r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n        @Value(&quot;${ad.domain}&quot;)\r\n        private String AD_DOMAIN;\r\n    \r\n        @Value(&quot;${ad.url}&quot;)\r\n        private String AD_URL;\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http\r\n                    .authorizeRequests()\r\n                    .anyRequest().fullyAuthenticated()\r\n                    .and()\r\n                    .formLogin();\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(AuthenticationManagerBuilder authManagerBuilder) throws Exception {\r\n            authManagerBuilder.authenticationProvider(activeDirectoryLdapAuthenticationProvider()).userDetailsService(userDetailsService());\r\n        }\r\n    \r\n        @Bean\r\n        public AuthenticationManager authenticationManager() {\r\n            return new ProviderManager(Arrays.asList(activeDirectoryLdapAuthenticationProvider()));\r\n        }\r\n        @Bean\r\n        public AuthenticationProvider activeDirectoryLdapAuthenticationProvider() {\r\n            ActiveDirectoryLdapAuthenticationProvider provider = new ActiveDirectoryLdapAuthenticationProvider(AD_DOMAIN, AD_URL);\r\n            provider.setConvertSubErrorCodesToExceptions(true);\r\n            provider.setUseAuthenticationRequestCredentials(true);\r\n    \r\n            return provider;\r\n        }\r\n    }","title":"LDAP authentication using Spring Boot","body":"<p>I have created a Restful API. I am using in here LDAP authentication. Our company has an LDAP directory server and I am using the below method <code>as utility</code> in my <code>service layer</code>.</p>\n<p>This is my LDAP authentication method, which I am using this method as a utility in my service layer.</p>\n<pre><code>    public Map&lt;String, Object&gt; authenticate(String user, String pass) {\n    String returnedAtts[] = {&quot;sn&quot;, &quot;givenName&quot;, &quot;name&quot;, &quot;userPrincipalName&quot;, &quot;displayName&quot;, &quot;memberOf&quot;};\n    String searchFilter = &quot;(&amp;(objectClass=User)(sAMAccountName=&quot; + user + &quot;))&quot;;\n    // Create the search controls\n    SearchControls searchCtls = new SearchControls();\n    searchCtls.setReturningAttributes(returnedAtts);\n    // Specify the search scope\n    searchCtls.setSearchScope(SearchControls.SUBTREE_SCOPE);\n    Hashtable&lt;String, String&gt; env = new Hashtable&lt;String, String&gt;();\n    env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\n    env.put(Context.PROVIDER_URL, ldapHost);\n    env.put(Context.SECURITY_AUTHENTICATION, &quot;simple&quot;);\n\n    env.put(Context.SECURITY_PRINCIPAL, user + &quot;@&quot; + domain);\n    env.put(Context.SECURITY_CREDENTIALS, pass);\n    env.put(Context.SECURITY_PROTOCOL, &quot;SSL&quot;);\n    LdapContext ctxGC = null;\n    NamingEnumeration&lt;SearchResult&gt; answer = null;\n    Attributes attrs = null;\n    SearchResult sr = null;\n    NamingEnumeration&lt;?&gt; ne = null;\n    Attribute attr = null;\n\n    try {\n        ctxGC = new InitialLdapContext(env, null);\n        if (ctxGC != null) {\n            answer = ctxGC.search(searchBase, searchFilter, searchCtls);\n            if (answer != null) {\n                while (answer.hasMoreElements()) {\n                    sr = (SearchResult) answer.next();\n                    attrs = sr.getAttributes();\n                    if (attrs != null) {\n                        amap = new HashMap&lt;String, Object&gt;();\n                        ne = attrs.getAll();\n                        attr = (Attribute) ne.next();\n                        amap.put(attr.getID(), attr.get());\n                        ne.close();\n                    }\n                    ctxGC.close();         // Close and clean up\n                }\n            } else {\n                System.out.println(&quot;Answer from domen controller is null!&quot;);\n            }\n        } else {\n            System.out.println(&quot;Login or Password is wrong! &quot;);\n        }\n\n    } catch (NamingException ex) {\n        System.out.println(&quot;Exception: &quot;+ex.toString());\n    } finally {\n        System.out.println(&quot;&quot;);\n    }\n    return amap;\n}\n</code></pre>\n<p>This is my service layer class and I am making utility class as an injection that can be used authentication method as you know. When I send a request in swagger or postman username and password, given the values that come from the request, I persist them into to database of the table. but before persisting, the authentication method controls my username and password. if the password or username is not correct I return an error response to the client otherwise I return a success response to the client. In both situations, I insert given values to the database of the table from the request.</p>\n<pre><code>@Override\n    public Optional&lt;ResponseEntity&lt;? extends ResponseDto&gt;&gt; login(String username, String password, String type) {\n\n//Is there any method or feature that spring boot provides us instead of the method you see here?\n        Map&lt;String, Object&gt; authenticate = this.controlDomainLogin.authenticate(username, password);\n//Is there any method or feature that spring boot provides us instead of the method you see here?\n\n\n        if (authenticate != null) {\n            DomainLogin domainLogin = new DomainLogin();\n            domainLogin.setUsername(username);\n            domainLogin.setType(type);\n            domainLogin.setLogDate(new Date());\n            ResponseEntity&lt;ResponseDto&gt; responseDtoResponseEntity = new ResponseEntity&lt;&gt;(new SuccessResponseDto(SUCCESS_OPERATION.getMessage(), SUCCESS_OPERATION.getCode(), authenticate), HttpStatus.OK);\n            domainLogin.setResponse(Objects.requireNonNull(responseDtoResponseEntity.getBody()).getMessage() + &quot;,&quot; + responseDtoResponseEntity.getBody().getCode());\n            this.domainLoginRepository.save(domainLogin);\n            return Optional.of(responseDtoResponseEntity);\n        } else {\n            DomainLogin domainLogin = new DomainLogin();\n            domainLogin.setUsername(username);\n            domainLogin.setType(type);\n            domainLogin.setLogDate(new Date());\n            ResponseEntity&lt;ResponseDto&gt; responseDtoResponseEntity = new ResponseEntity&lt;&gt;(new ErrorResponseDto(WRONG_USERNAME.getMessage(), WRONG_USERNAME.getCode()), HttpStatus.NOT_FOUND);\n            domainLogin.setResponse(Objects.requireNonNull(responseDtoResponseEntity.getBody()).getMessage() + &quot;,&quot; + responseDtoResponseEntity.getBody().getCode());\n            domainLogin.setException(Objects.requireNonNull(responseDtoResponseEntity.getBody()).getMessage() + &quot;,&quot; + responseDtoResponseEntity.getBody().getCode());\n            this.domainLoginRepository.save(domainLogin);\n            return Optional.of(responseDtoResponseEntity);\n        }\n    }\n</code></pre>\n<p>Now I don't need to use this method, instead, does spring boot itself have a similar method or any feature, just like the method I showed above? I mean I shouldn't use this method, instead, is there something spring boot gave us that does the same thing?</p>\n<p>The same operations will be repeated, but the difference is that I will delete the method that I wrote in java and use the spring boot's LDAP authentication method instead.</p>\n<p>If it is the class I have shown below, when I run the project, the login page that spring has given by default appears, when I type my username and password there, it performs the validation process successfully, if it fails, it gives the following warning.</p>\n<pre><code>ctiveDirectoryLdapAuthenticationProvider : Active Directory authentication failed: Supplied password was invalid\n\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.AuthenticationProvider;\nimport org.springframework.security.authentication.ProviderManager;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.ldap.authentication.ad.ActiveDirectoryLdapAuthenticationProvider;\n\nimport java.util.Arrays;\n\nimport org.springframework.beans.factory.annotation.Value;\n\n@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Value(&quot;${ad.domain}&quot;)\n    private String AD_DOMAIN;\n\n    @Value(&quot;${ad.url}&quot;)\n    private String AD_URL;\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                .authorizeRequests()\n                .anyRequest().fullyAuthenticated()\n                .and()\n                .formLogin();\n    }\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder authManagerBuilder) throws Exception {\n        authManagerBuilder.authenticationProvider(activeDirectoryLdapAuthenticationProvider()).userDetailsService(userDetailsService());\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager() {\n        return new ProviderManager(Arrays.asList(activeDirectoryLdapAuthenticationProvider()));\n    }\n    @Bean\n    public AuthenticationProvider activeDirectoryLdapAuthenticationProvider() {\n        ActiveDirectoryLdapAuthenticationProvider provider = new ActiveDirectoryLdapAuthenticationProvider(AD_DOMAIN, AD_URL);\n        provider.setConvertSubErrorCodesToExceptions(true);\n        provider.setUseAuthenticationRequestCredentials(true);\n\n        return provider;\n    }\n}\n</code></pre>\n"},{"tags":["java","kubernetes","jvm","cgroups"],"comments":[{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":2,"creation_date":1640079129,"post_id":70432565,"comment_id":124504310,"body_markdown":"Are you using ZGC? It&#39;s purposely reserves a huge amount of address space in order to use extra bits in the pointers ([colored pointers](https://stackoverflow.com/questions/62926652/the-java-zgc-garbage-collector-uses-a-lot-of-memory/62934057#62934057)). It&#39;s OK to have that much &quot;reserved&quot; memory. The reservation of address space costs nothing.","body":"Are you using ZGC? It&#39;s purposely reserves a huge amount of address space in order to use extra bits in the pointers (<a href=\"https://stackoverflow.com/questions/62926652/the-java-zgc-garbage-collector-uses-a-lot-of-memory/62934057#62934057\">colored pointers</a>). It&#39;s OK to have that much &quot;reserved&quot; memory. The reservation of address space costs nothing."},{"owner":{"account_id":10090818,"reputation":487,"user_id":7457872,"display_name":"bruto"},"score":0,"creation_date":1640100560,"post_id":70432565,"comment_id":124512518,"body_markdown":"@apangin Indeed, ZGC is the difference - the numbers are back to normal with G1\n\nthanks for clearing this up","body":"@apangin Indeed, ZGC is the difference - the numbers are back to normal with G1  thanks for clearing this up"}],"owner":{"account_id":10090818,"reputation":487,"user_id":7457872,"display_name":"bruto"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":272,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1640075746,"creation_date":1640075746,"question_id":70432565,"body_markdown":"Running my app in a container (adoptopenjdk11.0.13:debian) with 1g memory limit and maxrampercentage of 50\r\n\r\nNMT reports shows this:\r\n\r\n```\r\nTotal: reserved=17180391287KB, committed=817523KB\r\n                 Java Heap (reserved=17179869184KB, committed=557056KB)\r\n                            (mmap: reserved=17179869184KB, committed=557056KB)\r\n```\r\n\r\n&#39;cat /sys/fs/cgroup/memory/memory.limit_in_bytes&#39; shows 104857600 as expected\r\n\r\nHow exactly does JVM calculate available memory if not by looking at cgroups limits?","title":"Native memory tracking reports unrealistic reserved heap size","body":"<p>Running my app in a container (adoptopenjdk11.0.13:debian) with 1g memory limit and maxrampercentage of 50</p>\n<p>NMT reports shows this:</p>\n<pre><code>Total: reserved=17180391287KB, committed=817523KB\n                 Java Heap (reserved=17179869184KB, committed=557056KB)\n                            (mmap: reserved=17179869184KB, committed=557056KB)\n</code></pre>\n<p>'cat /sys/fs/cgroup/memory/memory.limit_in_bytes' shows 104857600 as expected</p>\n<p>How exactly does JVM calculate available memory if not by looking at cgroups limits?</p>\n"},{"tags":["java","cucumber","gherkin"],"answers":[{"tags":[],"owner":{"account_id":5700778,"reputation":8968,"user_id":4512398,"display_name":"Grasshopper"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1476995888,"creation_date":1476995888,"answer_id":40164099,"question_id":40163721,"body_markdown":"Modify your step definition to take in a String for the whole date. Maybe use something like (.*?) instead of 3 integers.\r\n\r\n    @Given(&quot;^the date of (.*?)$&quot;)\r\n    public void storeDate(@Transform(DateMapper.class) LocalDate date){\r\n    \r\n    }\r\n\r\nTransformer class\r\n\r\n    public class DateMapper extends Transformer&lt;LocalDate&gt;{\r\n    \r\n        @Override\r\n    \tpublic LocalDate transform(String date) {\r\n            \r\n            //Not too sure about the date pattern though, check it out if it gives correct result\r\n            DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;);\r\n            \r\n            return LocalDate.parse(date, formatter); \r\n       }\r\n    \r\n    }\r\n\r\nCucumber should transform the string format into a date object for you","title":"Date object in Cucumber","body":"<p>Modify your step definition to take in a String for the whole date. Maybe use something like (.*?) instead of 3 integers.</p>\n\n<pre><code>@Given(\"^the date of (.*?)$\")\npublic void storeDate(@Transform(DateMapper.class) LocalDate date){\n\n}\n</code></pre>\n\n<p>Transformer class</p>\n\n<pre><code>public class DateMapper extends Transformer&lt;LocalDate&gt;{\n\n    @Override\n    public LocalDate transform(String date) {\n\n        //Not too sure about the date pattern though, check it out if it gives correct result\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"yyyy-MM-dd\");\n\n        return LocalDate.parse(date, formatter); \n   }\n\n}\n</code></pre>\n\n<p>Cucumber should transform the string format into a date object for you</p>\n"},{"tags":[],"owner":{"account_id":9056085,"reputation":1023,"user_id":6744397,"display_name":"Anish Pillai"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1477007539,"creation_date":1477007539,"answer_id":40166295,"question_id":40163721,"body_markdown":"Please check if this works - \r\n\r\n    Scenario Outline: Date\t\r\n    Given the date of &lt;date&gt;\r\n    When blah blah\r\n    Then x y and z\r\n    Examples:\r\n    |date      |\r\n    |2015-01-01|\r\n    |2045-01-01|\r\n\r\nI have modified the default step definition like this - \r\n\r\n    @Given(&quot;^the date of (.*?)$&quot;)\r\n\tpublic void the_date_of(String strDate) throws Throwable {\r\n\t\tSimpleDateFormat format = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;, Locale.ENGLISH);\r\n\t\tDate date = format.parse(strDate);\r\n\t\tSystem.out.println(date);\r\n\t}\r\n\r\nThis prints the code like this - \r\n\r\n    Thu Jan 01 00:00:00 AEDT 2015\r\n    Sun Jan 01 00:00:00 AEDT 2045","title":"Date object in Cucumber","body":"<p>Please check if this works - </p>\n\n<pre><code>Scenario Outline: Date  \nGiven the date of &lt;date&gt;\nWhen blah blah\nThen x y and z\nExamples:\n|date      |\n|2015-01-01|\n|2045-01-01|\n</code></pre>\n\n<p>I have modified the default step definition like this - </p>\n\n<pre><code>@Given(\"^the date of (.*?)$\")\npublic void the_date_of(String strDate) throws Throwable {\n    SimpleDateFormat format = new SimpleDateFormat(\"yyyy-MM-dd\", Locale.ENGLISH);\n    Date date = format.parse(strDate);\n    System.out.println(date);\n}\n</code></pre>\n\n<p>This prints the code like this - </p>\n\n<pre><code>Thu Jan 01 00:00:00 AEDT 2015\nSun Jan 01 00:00:00 AEDT 2045\n</code></pre>\n"},{"tags":[],"owner":{"account_id":357783,"reputation":5010,"user_id":698168,"display_name":"Julien Kronegg"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1640075548,"creation_date":1640075548,"answer_id":70432532,"question_id":40163721,"body_markdown":"With Cucumber 7, I&#39;m defining a new `@ParameterType` :\r\n\r\n    @ParameterType(&quot;\\\\d{2}\\\\.\\\\d{2}\\\\.\\\\d{4}&quot;)\r\n    public LocalDate mydate(String dateString) {\r\n        return LocalDate.parse(dateString, DateTimeFormatter.ofPattern(&quot;dd.MM.yyyy&quot;));\r\n    }\r\n\r\nThen I can use step definition `@Given` such as :\r\n\r\n    @Given(&quot;person has birthdate {mydate}&quot;)\r\n    public void person_birthdate(LocalDate birthDate) {\r\n        ... // do something\r\n    }\r\n\r\nThe placeholder name `{mydate}` is the name of the mapping method, but you can override it through `@ParameterType.name`.","title":"Date object in Cucumber","body":"<p>With Cucumber 7, I'm defining a new <code>@ParameterType</code> :</p>\n<pre><code>@ParameterType(&quot;\\\\d{2}\\\\.\\\\d{2}\\\\.\\\\d{4}&quot;)\npublic LocalDate mydate(String dateString) {\n    return LocalDate.parse(dateString, DateTimeFormatter.ofPattern(&quot;dd.MM.yyyy&quot;));\n}\n</code></pre>\n<p>Then I can use step definition <code>@Given</code> such as :</p>\n<pre><code>@Given(&quot;person has birthdate {mydate}&quot;)\npublic void person_birthdate(LocalDate birthDate) {\n    ... // do something\n}\n</code></pre>\n<p>The placeholder name <code>{mydate}</code> is the name of the mapping method, but you can override it through <code>@ParameterType.name</code>.</p>\n"}],"owner":{"account_id":443973,"reputation":4509,"user_id":835523,"accept_rate":85,"display_name":"Steve"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21675,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":70432532,"answer_count":3,"score":7,"last_activity_date":1640075548,"creation_date":1476994452,"question_id":40163721,"body_markdown":"I have a cucumber stepdef like this\r\n\r\n    Given the date of &lt;date&gt;\r\n    When blah blah\r\n    Then x y and z\r\n    Examples:\r\n    |2015-01-01|\r\n    |2045-01-01|\r\nWhen I generate stepdefs off of this, I get `@Given(&quot;^the date of (\\\\d+)-(\\\\d+)-(\\\\d+)$&quot;)`\r\nAnd the method is generated with three integers as parameters.\r\nHow can I tell Cucumber to treat it like a Java.Time LocalDate? Is there a way to create a mapper that Cucumber will understand? Or at the very least, is there a way to treat that date object as a string instead of three numbers?","title":"Date object in Cucumber","body":"<p>I have a cucumber stepdef like this</p>\n\n<pre><code>Given the date of &lt;date&gt;\nWhen blah blah\nThen x y and z\nExamples:\n|2015-01-01|\n|2045-01-01|\n</code></pre>\n\n<p>When I generate stepdefs off of this, I get <code>@Given(\"^the date of (\\\\d+)-(\\\\d+)-(\\\\d+)$\")</code>\nAnd the method is generated with three integers as parameters.\nHow can I tell Cucumber to treat it like a Java.Time LocalDate? Is there a way to create a mapper that Cucumber will understand? Or at the very least, is there a way to treat that date object as a string instead of three numbers?</p>\n"},{"tags":["java","eclipse","wildfly"],"comments":[{"owner":{"account_id":3159259,"reputation":109668,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1640076021,"post_id":70432399,"comment_id":124503280,"body_markdown":"The version of Java you use to run Eclipse can be different from the version of Java you use to run applications - so use the latest Eclipse.","body":"The version of Java you use to run Eclipse can be different from the version of Java you use to run applications - so use the latest Eclipse."},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1640096277,"post_id":70432399,"comment_id":124510721,"body_markdown":"Don&#39;t use an Eclipse older than the Wildfly release you&#39;re trying to work on. Get the latest one.","body":"Don&#39;t use an Eclipse older than the Wildfly release you&#39;re trying to work on. Get the latest one."}],"owner":{"account_id":16710708,"reputation":1,"user_id":12077996,"display_name":"Marc"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640075127,"creation_date":1640074791,"question_id":70432399,"body_markdown":"How can I configure a WildFly 23 on a Eclipse 2020-06? I installed the JbossTools from Eclipse Marketplace (4.16.0.Final) but in the server list only appears until Wildfly 20.\r\n\r\nI want to work with Eclipse 2020-06 beacuse is the last version that runs in Java 8 according the eclipse documentation (1) and Wildfly 23 is also compatible with Java 8 (2).\r\n\r\n(1) https://wiki.eclipse.org/Eclipse/Installation\r\n\r\n(2) https://docs.wildfly.org/23/Getting_Started_Guide.html\r\n\r\nThanks!\r\n\r\n","title":"Using WildFly23 with eclipse 2020-06","body":"<p>How can I configure a WildFly 23 on a Eclipse 2020-06? I installed the JbossTools from Eclipse Marketplace (4.16.0.Final) but in the server list only appears until Wildfly 20.</p>\n<p>I want to work with Eclipse 2020-06 beacuse is the last version that runs in Java 8 according the eclipse documentation (1) and Wildfly 23 is also compatible with Java 8 (2).</p>\n<p>(1) <a href=\"https://wiki.eclipse.org/Eclipse/Installation\" rel=\"nofollow noreferrer\">https://wiki.eclipse.org/Eclipse/Installation</a></p>\n<p>(2) <a href=\"https://docs.wildfly.org/23/Getting_Started_Guide.html\" rel=\"nofollow noreferrer\">https://docs.wildfly.org/23/Getting_Started_Guide.html</a></p>\n<p>Thanks!</p>\n"},{"tags":["java","spring-boot","docusignapi"],"comments":[{"owner":{"account_id":4297204,"reputation":2499,"user_id":9926179,"display_name":"b.s"},"score":0,"creation_date":1613718091,"post_id":66273005,"comment_id":117167196,"body_markdown":"If it&#39;s working with the postman then you should first check whether you&#39;r requesting the docu sign service with proper grant type and request method using rest template.","body":"If it&#39;s working with the postman then you should first check whether you&#39;r requesting the docu sign service with proper grant type and request method using rest template."},{"owner":{"account_id":4027315,"reputation":175,"user_id":3314970,"accept_rate":0,"display_name":"fongfong"},"score":0,"creation_date":1649787858,"post_id":66273005,"comment_id":126963227,"body_markdown":"Hi @nani. Are you using spring security with spring boot? Which java code example did you download? Thanks!","body":"Hi @nani. Are you using spring security with spring boot? Which java code example did you download? Thanks!"},{"owner":{"account_id":8033968,"reputation":167,"user_id":6057802,"display_name":"Nani"},"score":0,"creation_date":1651160864,"post_id":66273005,"comment_id":127303107,"body_markdown":"I have built my own application using those two. @fongfong","body":"I have built my own application using those two. @fongfong"}],"answers":[{"tags":[],"owner":{"account_id":11599388,"reputation":1310,"user_id":8497060,"display_name":"Matt King DS"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1617438266,"creation_date":1614117007,"answer_id":66341608,"question_id":66273005,"body_markdown":"The Code Example Launchers that we have for Java do operate on SpringBoot and has an example framework for creating JWT tokens, they should work for you out of the box.\r\n\r\nUsually when we see someone getting stuck at a 302 it&#39;s because the application isn&#39;t following provided redirects -- most commonly when the baseUrl being targeted is using http over https.\r\n\r\nCan you doublecheck your baseUrl and make sure that&#39;s the case? It&#39;s common to see 302s like this but not so much for them to be a roadblock.","title":"Is there any example source code for java and spring boot integration available for docusign?","body":"<p>The Code Example Launchers that we have for Java do operate on SpringBoot and has an example framework for creating JWT tokens, they should work for you out of the box.</p>\n<p>Usually when we see someone getting stuck at a 302 it's because the application isn't following provided redirects -- most commonly when the baseUrl being targeted is using http over https.</p>\n<p>Can you doublecheck your baseUrl and make sure that's the case? It's common to see 302s like this but not so much for them to be a roadblock.</p>\n"},{"tags":[],"owner":{"account_id":8033968,"reputation":167,"user_id":6057802,"display_name":"Nani"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1614151599,"creation_date":1614151599,"answer_id":66346410,"question_id":66273005,"body_markdown":"I have figured out the solution myself. It&#39;s the issue with the session management and security in the example code. If I call any API from rest template there is no session at the beginning and it requires a JWT. So I need to pass a session Id in the header which is active and holds the value of the current user.","title":"Is there any example source code for java and spring boot integration available for docusign?","body":"<p>I have figured out the solution myself. It's the issue with the session management and security in the example code. If I call any API from rest template there is no session at the beginning and it requires a JWT. So I need to pass a session Id in the header which is active and holds the value of the current user.</p>\n"}],"owner":{"account_id":8033968,"reputation":167,"user_id":6057802,"display_name":"Nani"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":377,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"accepted_answer_id":66346410,"answer_count":2,"score":1,"last_activity_date":1640074772,"creation_date":1613717693,"question_id":66273005,"body_markdown":"I am trying to integrate my spring boot application with docusign for sending the documents and getting it signed from the users. I am not able to do it because I am not getting as how to get the JWT token to call the API&#39;s. I have downloaded the java code example from the docusign and configured accordingly. I am able to call the API&#39;s from the postman properly, But when I call any API from my application by rest template it gives me 302 redirect found. Is there any example project with java available for this ? Am I missing something.","title":"Is there any example source code for java and spring boot integration available for docusign?","body":"<p>I am trying to integrate my spring boot application with docusign for sending the documents and getting it signed from the users. I am not able to do it because I am not getting as how to get the JWT token to call the API's. I have downloaded the java code example from the docusign and configured accordingly. I am able to call the API's from the postman properly, But when I call any API from my application by rest template it gives me 302 redirect found. Is there any example project with java available for this ? Am I missing something.</p>\n"},{"tags":["java","hibernate"],"answers":[{"tags":[],"owner":{"account_id":93007,"reputation":51990,"user_id":254643,"display_name":"Raghuram"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1286179914,"creation_date":1286179914,"answer_id":3853567,"question_id":3853106,"body_markdown":"It looks like, `cargo` can have one or more `item`.  Each item would have a reference to its corresponding `cargo`.\r\n\r\nFrom the log, `item` object is *inserted* first and then an attempt is made to *update* the `cargo` object (which does not exist).  \r\n\r\nI guess what you actually want is `cargo` object to be created first and then the `item` object to be created with the *id* of the cargo object as the reference - so, essentally re-look at the *save*() method in the *Action* class.","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>It looks like, <code>cargo</code> can have one or more <code>item</code>.  Each item would have a reference to its corresponding <code>cargo</code>.</p>\n\n<p>From the log, <code>item</code> object is <em>inserted</em> first and then an attempt is made to <em>update</em> the <code>cargo</code> object (which does not exist).  </p>\n\n<p>I guess what you actually want is <code>cargo</code> object to be created first and then the <code>item</code> object to be created with the <em>id</em> of the cargo object as the reference - so, essentally re-look at the <em>save</em>() method in the <em>Action</em> class.</p>\n"},{"tags":[],"owner":{"account_id":67639,"reputation":16346,"user_id":197831,"accept_rate":89,"display_name":"M.J."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1286198378,"creation_date":1286198378,"answer_id":3855589,"question_id":3853106,"body_markdown":"It looks like, when you try to delete the same object and then again update the same object, then it gives you this error. As after every update hibernate for safe checking fires how many rows were updated, but during the code the data must have been deleted. Over here hibernate distinguish between the objects based on the key what u have assigned or the equals method. \r\n\r\nso, just go through once through your code for this check, or try with implementing equals &amp; hashcode method correctly which might help.","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>It looks like, when you try to delete the same object and then again update the same object, then it gives you this error. As after every update hibernate for safe checking fires how many rows were updated, but during the code the data must have been deleted. Over here hibernate distinguish between the objects based on the key what u have assigned or the equals method. </p>\n\n<p>so, just go through once through your code for this check, or try with implementing equals &amp; hashcode method correctly which might help.</p>\n"},{"tags":[],"owner":{"account_id":2217906,"reputation":471,"user_id":1958075,"display_name":"srinivasulu p"},"down_vote_count":0,"up_vote_count":47,"is_accepted":false,"score":47,"last_activity_date":1357649380,"creation_date":1357648051,"answer_id":14214940,"question_id":3853106,"body_markdown":"In the Hibernate mapping file for the `id` property, if you use any generator class, for that property you should not set the value explicitly by using a setter method.\r\n\r\nIf you set the value of the Id property explicitly, it will lead the error above. Check this to avoid this error.","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>In the Hibernate mapping file for the <code>id</code> property, if you use any generator class, for that property you should not set the value explicitly by using a setter method.</p>\n\n<p>If you set the value of the Id property explicitly, it will lead the error above. Check this to avoid this error.</p>\n"},{"tags":[],"owner":{"account_id":2401048,"reputation":11,"user_id":2098689,"display_name":"joel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1361524861,"creation_date":1361523577,"answer_id":15020301,"question_id":3853106,"body_markdown":"    /*\r\n    * Thrown when a version number or timestamp check failed, indicating that the\r\n    * Session contained stale data (when using long transactions with versioning). \r\n    * Also occurs if we try delete or update a row that does not exist.\r\n    *\r\n    */\r\n\r\n    if ( expectedRowCount &gt; rowCount ) {\r\n       throw new StaleStateException(\t\t\t\r\n      &quot;Batch update returned unexpected row count from update [&quot; + batchPosition +&quot;]; actual row count: &quot; + rowCount +&quot;; expected: &quot; + expectedRowCount);\r\n       }\r\n\r\n`&lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;`\r\n This should show you the SQL that is executed and causes the problem.\r\n\r\n*The StaleStateException would be thrown only after we successfully deleted one object, and then tried to delete another. The reason for this is, while persisting the  objects across sessions, objects must first be deleted from the Session before deleted. Otherwise, subsequent deletes will cause the  `StaleStateException` to be  thrown. \r\n\r\n     Session.Remove(obj); \r\n     objectDAO.Delete(obj);\r\n\r\n*The problem was that a table must have only one field that is primary key (I had a composite key and this is not a good idea, except for the many to many relation). I  have solved using a new id table field auto incremental.\r\n\r\n*It can be fix by using `Hibernate session.update()` -- you need to have the table/view&#39;s primary key equal your corresponding bean property (eg. id).\r\n\r\n*","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<pre><code>/*\n* Thrown when a version number or timestamp check failed, indicating that the\n* Session contained stale data (when using long transactions with versioning). \n* Also occurs if we try delete or update a row that does not exist.\n*\n*/\n\nif ( expectedRowCount &gt; rowCount ) {\n   throw new StaleStateException(           \n  \"Batch update returned unexpected row count from update [\" + batchPosition +\"]; actual row count: \" + rowCount +\"; expected: \" + expectedRowCount);\n   }\n</code></pre>\n\n<p><code>&lt;property name=\"show_sql\"&gt;true&lt;/property&gt;</code>\n This should show you the SQL that is executed and causes the problem.</p>\n\n<p>*The StaleStateException would be thrown only after we successfully deleted one object, and then tried to delete another. The reason for this is, while persisting the  objects across sessions, objects must first be deleted from the Session before deleted. Otherwise, subsequent deletes will cause the  <code>StaleStateException</code> to be  thrown. </p>\n\n<pre><code> Session.Remove(obj); \n objectDAO.Delete(obj);\n</code></pre>\n\n<p>*The problem was that a table must have only one field that is primary key (I had a composite key and this is not a good idea, except for the many to many relation). I  have solved using a new id table field auto incremental.</p>\n\n<p>*It can be fix by using <code>Hibernate session.update()</code> -- you need to have the table/view's primary key equal your corresponding bean property (eg. id).</p>\n\n<p>*</p>\n"},{"tags":[],"owner":{"account_id":1681180,"reputation":229,"user_id":1545379,"display_name":"Sumit Singh"},"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1381999324,"creation_date":1381998795,"answer_id":19421779,"question_id":3853106,"body_markdown":"its happen when you try to delete the same object and then again update the same object\r\nuse this after delete \r\n\r\n    session.clear();","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>its happen when you try to delete the same object and then again update the same object\nuse this after delete </p>\n\n<pre><code>session.clear();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1464103,"reputation":2882,"user_id":1377498,"accept_rate":88,"display_name":"Muhammad Suleman"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1400755866,"creation_date":1400755866,"answer_id":23804739,"question_id":3853106,"body_markdown":"what i have experienced is that this exception raise when updating object have an id which  not exist in table. if you read exception message it says &quot;Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1&quot; which means it was unable to found record with your given id.\r\n\r\nTo avoid this i always read record with same id if i found record back then i call update otherwise throw &quot;exception record not found&quot;.","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>what i have experienced is that this exception raise when updating object have an id which  not exist in table. if you read exception message it says \"Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1\" which means it was unable to found record with your given id.</p>\n\n<p>To avoid this i always read record with same id if i found record back then i call update otherwise throw \"exception record not found\".</p>\n"},{"tags":[],"owner":{"account_id":6635791,"reputation":41,"user_id":5122986,"display_name":"Emrah Denizer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1441183075,"creation_date":1441183075,"answer_id":32348368,"question_id":3853106,"body_markdown":"I had the same as well.Making the Id (0) doing &quot;(your Model value).setId(0)&quot; solved my problem.  ","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>I had the same as well.Making the Id (0) doing \"(your Model value).setId(0)\" solved my problem.  </p>\n"},{"tags":[],"owner":{"account_id":8427709,"reputation":1,"user_id":6324430,"display_name":"manjunath"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1463046186,"creation_date":1463046186,"answer_id":37183118,"question_id":3853106,"body_markdown":"if The given id is not exist in the DB ,then you may get this exception.\r\n\r\n    Exception in thread &quot;main&quot; org.springframework.orm.hibernate3.HibernateOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; nested exception is org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>if The given id is not exist in the DB ,then you may get this exception.</p>\n\n<pre><code>Exception in thread \"main\" org.springframework.orm.hibernate3.HibernateOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; nested exception is org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1\n</code></pre>\n"},{"tags":[],"owner":{"account_id":97189,"reputation":11,"user_id":263769,"display_name":"Blanford Robinson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640074757,"creation_date":1468254024,"answer_id":38311706,"question_id":3853106,"body_markdown":"This often happens when SQL statements are implemented in some performance costly way (implicit type conversions etc.).  \r\n\r\nI advice to debug the resulting SQL statements.\r\n\r\n### To debug turn on SQL logging\r\nTurn on hibernate SQL logging by adding the following lines to your log4j properties file:\r\n```\r\n# logs the SQL statements\r\nlog4j.logger.org.hibernate.SQL=debug\r\n\r\n# Logs the JDBC parameters passed to a query\r\nlog4j.logger.org.hibernate.type=trace\r\n```\r\n\r\nBefore failing you will see the last SQL statement attempted in your log, copy and paste this SQL into an external SQL client and run it. ","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>This often happens when SQL statements are implemented in some performance costly way (implicit type conversions etc.).</p>\n<p>I advice to debug the resulting SQL statements.</p>\n<h3>To debug turn on SQL logging</h3>\n<p>Turn on hibernate SQL logging by adding the following lines to your log4j properties file:</p>\n<pre><code># logs the SQL statements\nlog4j.logger.org.hibernate.SQL=debug\n\n# Logs the JDBC parameters passed to a query\nlog4j.logger.org.hibernate.type=trace\n</code></pre>\n<p>Before failing you will see the last SQL statement attempted in your log, copy and paste this SQL into an external SQL client and run it.</p>\n"},{"tags":[],"owner":{"account_id":9797649,"reputation":11,"user_id":7260064,"display_name":"user7260064"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1481083731,"creation_date":1481077786,"answer_id":41008433,"question_id":3853106,"body_markdown":"For `update()` and `saveOrUpdate()` methods, `id` generator value should be there in the database. For the `save()` method, `id` generator is not required.  ","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>For <code>update()</code> and <code>saveOrUpdate()</code> methods, <code>id</code> generator value should be there in the database. For the <code>save()</code> method, <code>id</code> generator is not required.  </p>\n"},{"tags":[],"owner":{"account_id":10826431,"reputation":1,"user_id":7962204,"display_name":"r.jatt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1501148294,"creation_date":1501148294,"answer_id":45346896,"question_id":3853106,"body_markdown":"*please do not set id of child class which is generator class is foreign only set parent class id if your parent class id is assigned...\r\njust do one thing dont set id of child class via setter method your problem will be fix.....definately*.\r\n\r\n","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p><em>please do not set id of child class which is generator class is foreign only set parent class id if your parent class id is assigned...\njust do one thing dont set id of child class via setter method your problem will be fix.....definately</em>.</p>\n"},{"tags":[],"owner":{"account_id":1618137,"reputation":1034,"user_id":1495261,"display_name":"Bashar Ali Labadi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1511538282,"creation_date":1511538282,"answer_id":47476483,"question_id":3853106,"body_markdown":"So For my case I noticed hibernate is trying to update the record rather than inserting it and that thrown the exception mentioned.\r\n\r\nI finally came to find that my entity had an updatedAt timestamp column:\r\n\r\n    &lt;timestamp name=&quot;updatedDate&quot; column=&quot;updated_date&quot; /&gt;\r\n\r\nand when I was trying to initialize the object i found that the code was \r\nsetting this field explicitly. \r\n\r\nafter removing that setUpdateDate(new Date()) it worked and did an insert instead.","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>So For my case I noticed hibernate is trying to update the record rather than inserting it and that thrown the exception mentioned.</p>\n\n<p>I finally came to find that my entity had an updatedAt timestamp column:</p>\n\n<pre><code>&lt;timestamp name=\"updatedDate\" column=\"updated_date\" /&gt;\n</code></pre>\n\n<p>and when I was trying to initialize the object i found that the code was \nsetting this field explicitly. </p>\n\n<p>after removing that setUpdateDate(new Date()) it worked and did an insert instead.</p>\n"},{"tags":[],"owner":{"account_id":3738655,"reputation":573,"user_id":3110605,"display_name":"real_paul"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1515765246,"creation_date":1515765246,"answer_id":48227689,"question_id":3853106,"body_markdown":"As mentioned above, be sure that you don&#39;t set any id fields which are supposed to be auto-generated.\r\n\r\nTo cause this problem during testing, make sure that the db &#39;sees&#39; aka flush this SQL, otherwise everything may seem fine when really its not.\r\n\r\nI encountered this problem when inserting my parent with a child into the db:\r\n\r\n1. Insert parent (with manual ID)\r\n2. Insert child (with autogenerated ID)\r\n3. Update foreign key in Child table to parent.\r\n\r\nThe 3. statement failed. Indeed the entry with the autogenerated ID (by Hibernate) was not in the table as a trigger changed the ID upon each insertion, thus letting the update fail with no matching row found.\r\n\r\nSince the table can be updated without any Hibernate I added a check whether the ID is null and only fill it in then to the trigger.\r\n","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>As mentioned above, be sure that you don't set any id fields which are supposed to be auto-generated.</p>\n\n<p>To cause this problem during testing, make sure that the db 'sees' aka flush this SQL, otherwise everything may seem fine when really its not.</p>\n\n<p>I encountered this problem when inserting my parent with a child into the db:</p>\n\n<ol>\n<li>Insert parent (with manual ID)</li>\n<li>Insert child (with autogenerated ID)</li>\n<li>Update foreign key in Child table to parent.</li>\n</ol>\n\n<p>The 3. statement failed. Indeed the entry with the autogenerated ID (by Hibernate) was not in the table as a trigger changed the ID upon each insertion, thus letting the update fail with no matching row found.</p>\n\n<p>Since the table can be updated without any Hibernate I added a check whether the ID is null and only fill it in then to the trigger.</p>\n"},{"tags":[],"owner":{"account_id":97204,"reputation":4979,"user_id":263801,"accept_rate":74,"display_name":"Archie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1605198289,"creation_date":1605198289,"answer_id":64807735,"question_id":3853106,"body_markdown":"FYI, another way this exception can occur is if:\r\n  * Your transaction isolation is `READ_COMMITTED`\r\n  * Transaction #1 queries for an entity, then deletes that entity\r\n  * A simultaneous transaction #2 does the same thing\r\n\r\nThen this can happen: TX #1 successfully commits before TX #2, then when TX #2 tries to delete the entity (again) it&#39;s not there any more - even though it was found by a query earlier in that same transaction. Note this anomaly is allowed with `READ_COMMITTED` isolation.\r\n\r\nIn my case the resulting exception looked like this:\r\n\r\n```\r\nHHH000315: Exception executing batch [org.hibernate.StaleStateException:\r\n  Batch update returned unexpected row count from update [0]; actual row\r\n  count: 0; expected: 1; statement executed: delete from Foobar where id=?],\r\n  SQL: delete from Foobar where id=?\r\n```","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>FYI, another way this exception can occur is if:</p>\n<ul>\n<li>Your transaction isolation is <code>READ_COMMITTED</code></li>\n<li>Transaction #1 queries for an entity, then deletes that entity</li>\n<li>A simultaneous transaction #2 does the same thing</li>\n</ul>\n<p>Then this can happen: TX #1 successfully commits before TX #2, then when TX #2 tries to delete the entity (again) it's not there any more - even though it was found by a query earlier in that same transaction. Note this anomaly is allowed with <code>READ_COMMITTED</code> isolation.</p>\n<p>In my case the resulting exception looked like this:</p>\n<pre><code>HHH000315: Exception executing batch [org.hibernate.StaleStateException:\n  Batch update returned unexpected row count from update [0]; actual row\n  count: 0; expected: 1; statement executed: delete from Foobar where id=?],\n  SQL: delete from Foobar where id=?\n</code></pre>\n"}],"owner":{"account_id":212611,"reputation":271,"user_id":465539,"display_name":"subbu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":109462,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"answer_count":14,"score":27,"last_activity_date":1640074757,"creation_date":1286170661,"question_id":3853106,"body_markdown":"I am using struts and hibernate. I have a parent and child relation using set in hbm.\r\nIn the action I am using `session.saveOrUpdate()` method to save but while saving it is showing the below error. Can anyone help regardng this with explanation where I made the mistake?\r\n\r\nHere is my hbm.file\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot;?&gt;\r\n    &lt;!DOCTYPE hibernate-mapping PUBLIC \r\n    &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;\r\n    &quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot;&gt;\r\n    \r\n    &lt;hibernate-mapping&gt;\r\n    \r\n     &lt;class name=&quot;com.model.cargo&quot; table=&quot;cargo&quot;&gt;\r\n      &lt;id name=&quot;id&quot; column=&quot;id&quot; type=&quot;java.lang.Long&quot;&gt;\r\n       &lt;generator class=&quot;increment&quot; /&gt;\r\n      &lt;/id&gt;\r\n      &lt;property name=&quot;cname&quot; column=&quot;cname&quot; /&gt;\r\n      &lt;property name=&quot;cdate&quot; column=&quot;cdate&quot; /&gt;\r\n      &lt;property name=&quot;csource&quot; column=&quot;csource&quot; /&gt;\r\n      &lt;property name=&quot;cdestination&quot; column=&quot;cdestination&quot; /&gt;\r\n      &lt;property name=&quot;create&quot; column=&quot;createby&quot; /&gt;\r\n      &lt;property name=&quot;status&quot; column=&quot;status&quot; /&gt;\r\n      \r\n      &lt;set name=&quot;itemList&quot; table=&quot;item&quot; inverse=&quot;true&quot;\r\n       cascade=&quot;all-delete-orphan&quot;&gt;\r\n       &lt;key&gt;\r\n        &lt;column name=&quot;id&quot; /&gt;\r\n       &lt;/key&gt;\r\n       &lt;one-to-many class=&quot;com.model.Item&quot; /&gt;\r\n      &lt;/set&gt;\r\n     &lt;/class&gt;\r\n     \r\n     &lt;class name=&quot;com.model.Item&quot; table=&quot;item&quot;&gt;\r\n      &lt;id name=&quot;itemid&quot; column=&quot;itemid&quot; type=&quot;java.lang.Long&quot;&gt;\r\n       &lt;generator class=&quot;increment&quot; /&gt;\r\n      &lt;/id&gt;\r\n      &lt;property name=&quot;itemName&quot; column=&quot;itemname&quot; /&gt;\r\n      &lt;property name=&quot;weight&quot; column=&quot;weight&quot; /&gt;\r\n      &lt;many-to-one class=&quot;com.model.cargo&quot; name=&quot;cargo&quot;\r\n       column=&quot;id&quot; /&gt;\r\n     &lt;/class&gt;\r\n    &lt;/hibernate-mapping&gt;\r\n\r\nMy action \r\n\r\n    package com.action;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.Collection;\r\n    import java.util.HashSet;\r\n    import java.util.Iterator;\r\n    import java.util.List;\r\n    import java.util.Set;\r\n    \r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    import javax.servlet.http.HttpSession;\r\n    \r\n    import org.apache.commons.beanutils.BeanUtils;\r\n    \r\n    import org.apache.struts.action.ActionForm;\r\n    import org.apache.struts.action.ActionForward;\r\n    import org.apache.struts.action.ActionMapping;\r\n    import org.apache.struts.actions.DispatchAction;\r\n    import org.hibernate.Query;\r\n    import org.hibernate.Session;\r\n    import org.hibernate.SessionFactory;\r\n    import org.hibernate.Transaction;\r\n    import com.plugin.HibernatePlugIn;\r\n    import com.form.cargoForm;\r\n    import com.model.cargo;\r\n    import com.model.Item;\r\n    \r\n    \r\n    public class CargoAction extends DispatchAction {\r\n    \r\n    \r\n     public ActionForward add(ActionMapping mapping, ActionForm form,\r\n       HttpServletRequest request, HttpServletResponse response)\r\n       throws Exception {\r\n    \r\n      if (log.isDebugEnabled()) {\r\n       log.debug(&quot;Entering Master add method&quot;);\r\n      }\r\n    \r\n      try {\r\n    \r\n       cargoForm cargoForm = (cargoForm) form;\r\n       //System.out.println(&quot;ID&quot; + cargoForm.getId());\r\n       cargo cargo = new cargo();\r\n       System.out.println(&quot;in cargo Action&quot;);\r\n       // copy customerform to model\r\n       cargoForm.reset(mapping, request);\r\n       BeanUtils.copyProperties(cargo, cargoForm);\r\n       cargoForm.reset(mapping, request);\r\n      // cargoForm.setInputParam(&quot;new&quot;);\r\n       // updateFormBean(mapping, request, cargoForm);\r\n    \r\n      }\r\n    \r\n      catch (Exception ex) {\r\n       ex.printStackTrace();\r\n       return mapping.findForward(&quot;failure&quot;);\r\n      }\r\n    \r\n      return mapping.findForward(&quot;success1&quot;);\r\n     }\r\n    \r\n     public ActionForward save(ActionMapping mapping, ActionForm form,\r\n       HttpServletRequest request, HttpServletResponse response)\r\n       throws Exception {\r\n                  \r\n      SessionFactory sessionFactory=null;\r\n      Session session =null;\r\n      System.out.println(&quot;in cargo Action&quot;);\r\n      try{\r\n      sessionFactory = (SessionFactory) servlet\r\n        .getServletContext().getAttribute(HibernatePlugIn.KEY_NAME);  \r\n      session = sessionFactory.openSession();\r\n      Transaction tx = session.beginTransaction();\r\n      \r\n      cargoForm carForm = (cargoForm) form;\r\n     \r\n      \r\n      cargo cargo = new cargo();\r\n       \r\n      System.out.println(&quot;in cargo Action&quot;);\r\n     \r\n      BeanUtils.copyProperties(cargo,carForm);\r\n      System.out.println(&quot;id&quot;+ carForm.getId()); \r\n      System.out.println(&quot;item id&quot;+ carForm.getItemid()); \r\n      Set itemset = carForm.getItemDtl();\r\n      \r\n        System.out.println(&quot;size&quot;+itemset.size()); \r\n        Iterator iterator =itemset.iterator();   \r\n        while(iterator.hasNext()) { \r\n         Item it = (Item)iterator.next();\r\n        System.out.println(&quot;name&quot;+it.getItemName()); //log.debug(&quot;HERE&quot;);\r\n       it.setCargo(cargo); } \r\n        \r\n      cargo.setItemList(itemset);\r\n      System.out.println(&quot;size&quot;+ itemset.size()); \r\n      session.saveOrUpdate(&quot;cargo&quot;,cargo);\r\n      tx.commit();\r\n      }catch(Exception e){\r\n       e.printStackTrace();\r\n      }\r\n      return mapping.findForward(&quot;success&quot;);\r\n    \r\n     }\r\n    \r\n     public ActionForward search(ActionMapping mapping, ActionForm form,\r\n       HttpServletRequest request, HttpServletResponse response)\r\n       throws Exception {\r\n      System.out.println(&quot;in cargo search Action&quot;);\r\n      SessionFactory sessionFactory = (SessionFactory) servlet\r\n        .getServletContext().getAttribute(HibernatePlugIn.KEY_NAME);\r\n      HttpSession session1 = request.getSession();\r\n      Session session = sessionFactory.openSession();\r\n      Transaction tx = session.beginTransaction();\r\n      cargoForm cargoform = (cargoForm) form;\r\n      // System.out.println(&quot;Name&quot;+cargoForm.getName());\r\n      cargo cargo = new cargo();\r\n      System.out.println(&quot;in cargo search Action&quot;);\r\n      // copy customerform to model\r\n      BeanUtils.copyProperties(cargo, cargoform);\r\n      String name;\r\n      String status;\r\n      String createby;\r\n    \r\n      name = cargo.getCname();\r\n      status = cargo.getStatus();\r\n      createby = cargo.getCreate();\r\n      System.out.println(&quot;Name...&quot; + name);\r\n      System.out.println(&quot;status...&quot; + status);\r\n      System.out.println(&quot;createby...&quot; + createby);\r\n      try {\r\n       if ((name.equals(&quot;&quot;)) &amp;&amp; (createby.equals(&quot;&quot;))\r\n         &amp;&amp; (status.equals(&quot;&quot;)))\r\n        return mapping.findForward(&quot;failure&quot;);\r\n       String SQL_QUERY = &quot;from cargo c where c.cname=:name or c.status=:status or c.create=:createby&quot;;\r\n       Query query = session.createQuery(SQL_QUERY);\r\n       query.setParameter(&quot;name&quot;, name);\r\n       query.setParameter(&quot;status&quot;, status);\r\n       query.setParameter(&quot;createby&quot;, createby);\r\n       ArrayList al = new ArrayList();\r\n       for (Iterator i = query.iterate(); i.hasNext();) {\r\n        cargo cargo1 = (cargo) i.next();\r\n        al.add(cargo1);\r\n        System.out.println(&quot;Cargo ID is:&quot; + cargo1.getId());\r\n       }\r\n       System.out.println(&quot;Cargo list is:&quot; + al.size());\r\n       session1.setAttribute(&quot;clist&quot;, al);\r\n      } catch (Exception e) {\r\n       e.printStackTrace();\r\n       return mapping.findForward(&quot;failure&quot;);\r\n      }\r\n      System.out.println(&quot;search Cargo list is success&quot;);\r\n    \r\n      return mapping.findForward(&quot;success&quot;);\r\n     }\r\n\r\n \r\n\r\n     \r\n     public ActionForward edit(ActionMapping mapping, ActionForm form,\r\n       HttpServletRequest request, HttpServletResponse response)\r\n       throws Exception {\r\n      SessionFactory sessionFactory=null;\r\n      Session session =null;\r\n      if (log.isDebugEnabled()) {\r\n       log.debug(&quot;Entering Master Edit method&quot;);\r\n      }\r\n    \r\n      try {\r\n       sessionFactory = (SessionFactory) servlet\r\n         .getServletContext().getAttribute(HibernatePlugIn.KEY_NAME);\r\n       session = sessionFactory.openSession();\r\n       Transaction transaction=session.beginTransaction();\r\n       cargoForm carForm = (cargoForm) form;\r\n       // System.out.println(carForm.getStatus());\r\n       // System.out.println(carForm.getCreate());\r\n       cargo cargo = new cargo();\r\n       BeanUtils.copyProperties(cargo, carForm);\r\n          System.out.println(&quot;In Cargo Edit &quot;+cargo.getId());\r\n          String qstring = &quot;from cargo c where c.id=:id&quot;;\r\n       Query query = session.createQuery(qstring);\r\n       query.setParameter(&quot;id&quot;, cargo.getId());\r\n       ArrayList all = new ArrayList();\r\n       cargo c = (cargo) query.iterate().next();\r\n       \r\n       System.out.println(&quot;Edit Cargo list &quot; + all.size()); \r\n       \r\n       \r\n         Set purchaseArray = new HashSet();\r\n               System.out.println(&quot;Edit&quot;+c.getItemList().size());\r\n               carForm.setItemDtl(purchaseArray);\r\n               BeanUtils.copyProperties(carForm,c);\r\n               // transaction.commit();\r\n                session.flush();\r\n      } catch (Exception e) {\r\n       e.printStackTrace();\r\n       return mapping.findForward(&quot;failure&quot;);\r\n      }\r\n      \r\n      // return a forward to edit forward\r\n      System.out.println(&quot;Edit Cargo list is success&quot;);\r\n      return mapping.findForward(&quot;succ&quot;);\r\n     }\r\n     \r\n     public ActionForward delete(ActionMapping mapping, ActionForm form,\r\n       HttpServletRequest request, HttpServletResponse response)\r\n       throws Exception {\r\n    \r\n      try {\r\n       SessionFactory sessionFactory = (SessionFactory) servlet\r\n         .getServletContext().getAttribute(HibernatePlugIn.KEY_NAME);\r\n       Session session = sessionFactory.openSession();\r\n       Transaction tx = session.beginTransaction();\r\n       cargoForm carForm = (cargoForm) form;\r\n       // System.out.println(carForm.getStatus());\r\n       // System.out.println(carForm.getCreate());\r\n       cargo cargo = new cargo();\r\n       BeanUtils.copyProperties(cargo, carForm);\r\n          System.out.println(&quot;In Cargo Delete &quot;+cargo.getId());\r\n       //String qstring = &quot;delete from cargo c where c.id=:id&quot;;\r\n       //Query query = session.createQuery(qstring);\r\n       session.delete(&quot;cargo&quot;,cargo);\r\n         // session.delete(cargo);\r\n         // session.flush();\r\n       //query.setParameter(&quot;id&quot;, cargo.getId());\r\n       //int row=query.executeUpdate();\r\n       //System.out.println(&quot;deleted row&quot;+row);\r\n       tx.commit();\r\n       \r\n      } catch (Exception e) {\r\n       e.printStackTrace();\r\n       return mapping.findForward(&quot;failure&quot;);\r\n      }\r\n      // return a forward to edit forward\r\n      System.out.println(&quot;Deleted success&quot;);\r\n      return mapping.findForward(&quot;succes&quot;);\r\n     }\r\n     \r\n    }\r\n    \r\n      \r\n\r\nMy parent model\r\n    \r\n    package com.model;\r\n    \r\n    import java.util.HashSet;\r\n    import java.util.Set;\r\n    \r\n    public class cargo {\r\n     \r\n     private Long id;\r\n     private String cname;\r\n     private String cdate;\r\n     private String csource;\r\n     private String cdestination;\r\n     private String create;\r\n     private String status;\r\n     \r\n     private Set itemList = new HashSet();\r\n    \r\n     public Long getId() {\r\n      return id;\r\n     }\r\n    \r\n     public void setId(Long id) {\r\n      this.id = id;\r\n     }\r\n    \r\n     public String getCname() {\r\n      return cname;\r\n     }\r\n    \r\n     public void setCname(String cname) {\r\n      this.cname = cname;\r\n     }\r\n    \r\n     public String getCdate() {\r\n      return cdate;\r\n     }\r\n    \r\n     public void setCdate(String cdate) {\r\n      this.cdate = cdate;\r\n     }\r\n    \r\n     public String getCsource() {\r\n      return csource;\r\n     }\r\n    \r\n     public void setCsource(String csource) {\r\n      this.csource = csource;\r\n     }\r\n    \r\n     public String getCdestination() {\r\n      return cdestination;\r\n     }\r\n    \r\n     public void setCdestination(String cdestination) {\r\n      this.cdestination = cdestination;\r\n     }\r\n    \r\n     public String getCreate() {\r\n      return create;\r\n     }\r\n    \r\n     public void setCreate(String create) {\r\n      this.create = create;\r\n     }\r\n    \r\n     public String getStatus() {\r\n      return status;\r\n     }\r\n    \r\n     public void setStatus(String status) {\r\n      this.status = status;\r\n     }\r\n    \r\n     public Set getItemList() {\r\n      return itemList;\r\n     }\r\n    \r\n     public void setItemList(Set itemList) {\r\n      this.itemList = itemList;\r\n     }\r\n    \r\n     \r\n    }  \r\n\r\nMy child model   \r\n\r\n    package com.model;\r\n    \r\n    public class Item{\r\n     \r\n     private Long itemid;\r\n     private String itemName;\r\n     private String weight;\r\n     private cargo cargo;\r\n     \r\n     public Long getItemid() {\r\n      return itemid;\r\n     }\r\n     public void setItemid(Long itemid) {\r\n      this.itemid = itemid;\r\n     }\r\n     public String getItemName() {\r\n      return itemName;\r\n     }\r\n     public void setItemName(String itemName) {\r\n      this.itemName = itemName;\r\n     }\r\n     public String getWeight() {\r\n      return weight;\r\n     }\r\n     public void setWeight(String weight) {\r\n      this.weight = weight;\r\n     }\r\n     public cargo getCargo() {\r\n      return cargo;\r\n     }\r\n     public void setCargo(cargo cargo) {\r\n      this.cargo = cargo;\r\n     }\r\n    \r\n     \r\n    } \r\n      \r\n\r\nAnd my form\r\n\r\n    \r\n    \r\n    package com.form;\r\n    \r\n    import java.util.HashSet;\r\n    import java.util.Set;\r\n    \r\n    import javax.servlet.http.HttpServletRequest;\r\n    \r\n    import org.apache.struts.action.ActionForm;\r\n    import org.apache.struts.action.ActionMapping;\r\n    \r\n    import com.model.Item;\r\n    \r\n    public class cargoForm extends ActionForm {\r\n     private Long id;\r\n     private String cname;\r\n     private String cdate;\r\n     private String csource;\r\n     private String cdestination;\r\n     private String create;\r\n     private String status;\r\n    \r\n     private Long[] itemid;\r\n     private String[] itemName;\r\n     private String[] weight;\r\n    \r\n     private Set itemset = new HashSet();\r\n    \r\n     public Long getId() {\r\n      return id;\r\n     }\r\n    \r\n     public void setId(Long id) {\r\n      this.id = id;\r\n     }\r\n    \r\n     public String getCname() {\r\n      return cname;\r\n     }\r\n    \r\n     public void setCname(String cname) {\r\n      this.cname = cname;\r\n     }\r\n    \r\n     public String getCdate() {\r\n      return cdate;\r\n     }\r\n    \r\n     public void setCdate(String cdate) {\r\n      this.cdate = cdate;\r\n     }\r\n    \r\n     public String getCsource() {\r\n      return csource;\r\n     }\r\n    \r\n     public void setCsource(String csource) {\r\n      this.csource = csource;\r\n     }\r\n    \r\n     public String getCdestination() {\r\n      return cdestination;\r\n     }\r\n    \r\n     public void setCdestination(String cdestination) {\r\n      this.cdestination = cdestination;\r\n     }\r\n    \r\n     public String getCreate() {\r\n      return create;\r\n     }\r\n    \r\n     public void setCreate(String create) {\r\n      this.create = create;\r\n     }\r\n    \r\n     public String getStatus() {\r\n      return status;\r\n     }\r\n    \r\n     public void setStatus(String status) {\r\n      this.status = status;\r\n     }\r\n    \r\n     public Long[] getItemid() {\r\n      return itemid;\r\n     }\r\n    \r\n     public void setItemid(Long[] itemid) {\r\n      this.itemid = itemid;\r\n     }\r\n    \r\n     public String[] getItemName() {\r\n      return itemName;\r\n     }\r\n    \r\n     public void setItemName(String[] itemName) {\r\n      this.itemName = itemName;\r\n     }\r\n    \r\n     public String[] getWeight() {\r\n      return weight;\r\n     }\r\n    \r\n     public void setWeight(String[] weight) {\r\n      this.weight = weight;\r\n     }\r\n    \r\n     /*\r\n      * public Set getItemset() { return itemset; }\r\n      * \r\n      * public void setItemset(Set itemset) { this.itemset = itemset; }\r\n      */\r\n     public Set getItemDtl() {\r\n      if (itemid != null) {\r\n       itemset = new HashSet();\r\n       System.out.println(&quot;cargadd form&quot; + itemid);\r\n       for (int i = 0; i &lt; itemid.length; i++) {\r\n        Item it = new Item();\r\n        // it.setItemId(itemId[i]);\r\n        it.setItemName(itemName[i]);\r\n        System.out.println(&quot;cargadd form&quot; + itemName[i]);\r\n        it.setWeight(weight[i]);\r\n    \r\n        itemset.add(it);\r\n        System.out.println(&quot;cargadd form&quot; + itemset.size());\r\n       }\r\n      }\r\n      return itemset;\r\n     }\r\n    \r\n     public void setItemDtl(Set itemset) {\r\n      System.out.println(&quot;cargadd form&quot; + itemset.size());\r\n      this.itemset = itemset;\r\n      System.out.println(&quot;cargadd form&quot; + itemset.size());\r\n     }\r\n    \r\n     public void reset(ActionMapping mapping, HttpServletRequest request) {\r\n    \r\n      cname = &quot;&quot;;\r\n      csource = &quot;&quot;;\r\n      cdestination = &quot;&quot;;\r\n      cdate = &quot;&quot;;\r\n      status = &quot;&quot;;\r\n      create = &quot;&quot;;\r\n    \r\n     }\r\n    \r\n    }\r\n\r\n\r\nThe error:\r\n\r\n    Hibernate: select max(itemid) from item\r\n    Hibernate: insert into item (itemname, weight, position, id, itemid) values (?, ?, ?, ?, ?)\r\n    Hibernate: update cargo set name=?, date=?, source=?, destination=?, createby=?, status=? where id=?\r\n    Oct 4, 2010 10:44:08 AM org.hibernate.jdbc.BatchingBatcher doExecuteBatch\r\n    SEVERE: Exception executing batch: \r\n    org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1\r\n     at org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:61)\r\n     at org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:46)\r\n     at org.hibernate.jdbc.BatchingBatcher.checkRowCounts(BatchingBatcher.java:68)\r\n     at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:48)\r\n     at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:242)\r\n     at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:235)\r\n     at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:140)\r\n     at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)\r\n     at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)\r\n     at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)\r\n     at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338)\r\n     at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)\r\n     at com.action.CargoAction.save(CargoAction.java:125)\r\n     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n     at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n     at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n     at java.lang.reflect.Method.invoke(Unknown Source)\r\n     at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:269)\r\n     at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:170)\r\n     at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)\r\n     at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)\r\n     at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)\r\n     at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\r\n     at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:305)\r\n     at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\r\n     at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)\r\n     at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)\r\n     at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)\r\n     at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\r\n     at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)\r\n     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)\r\n     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\r\n     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)\r\n     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\r\n     at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)\r\n     at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)\r\n     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)\r\n     at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:879)\r\n     at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)\r\n     at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)\r\n     at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)\r\n     at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)\r\n     at java.lang.Thread.run(Unknown Source)\r\n    Oct 4, 2010 10:44:08 AM org.hibernate.event.def.AbstractFlushingEventListener performExecutions\r\n    SEVERE: Could not synchronize database state with session\r\n    org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1\r\n     at org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:61)\r\n     at org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:46)\r\n     at org.hibernate.jdbc.BatchingBatcher.checkRowCounts(BatchingBatcher.java:68)\r\n     at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:48)\r\n     at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:242)\r\n     at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:235)\r\n     at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:140)\r\n     at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)\r\n     at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)\r\n     at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)\r\n     at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338)\r\n     at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)\r\n     at com.action.CargoAction.save(CargoAction.java:125)\r\n     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n     at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n     at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n     at java.lang.reflect.Method.invoke(Unknown Source)\r\n     at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:269)\r\n     at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:170)\r\n     at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)\r\n     at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)\r\n     at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)\r\n     at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\r\n     at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:305)\r\n     at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\r\n     at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)\r\n     at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)\r\n     at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)\r\n     at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\r\n     at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)\r\n     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)\r\n     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\r\n     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)\r\n     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\r\n     at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)\r\n     at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)\r\n     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)\r\n     at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:879)\r\n     at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)\r\n     at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)\r\n     at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)\r\n     at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)\r\n     at java.lang.Thread.run(Unknown Source)\r\n    org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1\r\n     at org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:61)\r\n     at org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:46)\r\n     at org.hibernate.jdbc.BatchingBatcher.checkRowCounts(BatchingBatcher.java:68)\r\n     at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:48)\r\n     at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:242)\r\n     at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:235)\r\n     at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:140)\r\n     at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)\r\n     at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)\r\n     at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)\r\n     at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338)\r\n     at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)\r\n     at com.action.CargoAction.save(CargoAction.java:125)\r\n     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n     at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n     at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n     at java.lang.reflect.Method.invoke(Unknown Source)\r\n     at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:269)\r\n     at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:170)\r\n     at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)\r\n     at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)\r\n     at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)\r\n     at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\r\n     at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:305)\r\n     at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\r\n     at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)\r\n     at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)\r\n     at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)\r\n     at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\r\n     at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)\r\n     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)\r\n     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\r\n     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)\r\n     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\r\n     at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)\r\n     at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)\r\n     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)\r\n     at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:879)\r\n     at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)\r\n     at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)\r\n     at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)\r\n     at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)\r\n     at java.lang.Thread.run(Unknown Source)\r\n\r\n","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>I am using struts and hibernate. I have a parent and child relation using set in hbm.\nIn the action I am using <code>session.saveOrUpdate()</code> method to save but while saving it is showing the below error. Can anyone help regardng this with explanation where I made the mistake?</p>\n\n<p>Here is my hbm.file</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;!DOCTYPE hibernate-mapping PUBLIC \n\"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"\n\"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\"&gt;\n\n&lt;hibernate-mapping&gt;\n\n &lt;class name=\"com.model.cargo\" table=\"cargo\"&gt;\n  &lt;id name=\"id\" column=\"id\" type=\"java.lang.Long\"&gt;\n   &lt;generator class=\"increment\" /&gt;\n  &lt;/id&gt;\n  &lt;property name=\"cname\" column=\"cname\" /&gt;\n  &lt;property name=\"cdate\" column=\"cdate\" /&gt;\n  &lt;property name=\"csource\" column=\"csource\" /&gt;\n  &lt;property name=\"cdestination\" column=\"cdestination\" /&gt;\n  &lt;property name=\"create\" column=\"createby\" /&gt;\n  &lt;property name=\"status\" column=\"status\" /&gt;\n\n  &lt;set name=\"itemList\" table=\"item\" inverse=\"true\"\n   cascade=\"all-delete-orphan\"&gt;\n   &lt;key&gt;\n    &lt;column name=\"id\" /&gt;\n   &lt;/key&gt;\n   &lt;one-to-many class=\"com.model.Item\" /&gt;\n  &lt;/set&gt;\n &lt;/class&gt;\n\n &lt;class name=\"com.model.Item\" table=\"item\"&gt;\n  &lt;id name=\"itemid\" column=\"itemid\" type=\"java.lang.Long\"&gt;\n   &lt;generator class=\"increment\" /&gt;\n  &lt;/id&gt;\n  &lt;property name=\"itemName\" column=\"itemname\" /&gt;\n  &lt;property name=\"weight\" column=\"weight\" /&gt;\n  &lt;many-to-one class=\"com.model.cargo\" name=\"cargo\"\n   column=\"id\" /&gt;\n &lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n\n<p>My action </p>\n\n<pre><code>package com.action;\n\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.HashSet;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.Set;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport javax.servlet.http.HttpSession;\n\nimport org.apache.commons.beanutils.BeanUtils;\n\nimport org.apache.struts.action.ActionForm;\nimport org.apache.struts.action.ActionForward;\nimport org.apache.struts.action.ActionMapping;\nimport org.apache.struts.actions.DispatchAction;\nimport org.hibernate.Query;\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.Transaction;\nimport com.plugin.HibernatePlugIn;\nimport com.form.cargoForm;\nimport com.model.cargo;\nimport com.model.Item;\n\n\npublic class CargoAction extends DispatchAction {\n\n\n public ActionForward add(ActionMapping mapping, ActionForm form,\n   HttpServletRequest request, HttpServletResponse response)\n   throws Exception {\n\n  if (log.isDebugEnabled()) {\n   log.debug(\"Entering Master add method\");\n  }\n\n  try {\n\n   cargoForm cargoForm = (cargoForm) form;\n   //System.out.println(\"ID\" + cargoForm.getId());\n   cargo cargo = new cargo();\n   System.out.println(\"in cargo Action\");\n   // copy customerform to model\n   cargoForm.reset(mapping, request);\n   BeanUtils.copyProperties(cargo, cargoForm);\n   cargoForm.reset(mapping, request);\n  // cargoForm.setInputParam(\"new\");\n   // updateFormBean(mapping, request, cargoForm);\n\n  }\n\n  catch (Exception ex) {\n   ex.printStackTrace();\n   return mapping.findForward(\"failure\");\n  }\n\n  return mapping.findForward(\"success1\");\n }\n\n public ActionForward save(ActionMapping mapping, ActionForm form,\n   HttpServletRequest request, HttpServletResponse response)\n   throws Exception {\n\n  SessionFactory sessionFactory=null;\n  Session session =null;\n  System.out.println(\"in cargo Action\");\n  try{\n  sessionFactory = (SessionFactory) servlet\n    .getServletContext().getAttribute(HibernatePlugIn.KEY_NAME);  \n  session = sessionFactory.openSession();\n  Transaction tx = session.beginTransaction();\n\n  cargoForm carForm = (cargoForm) form;\n\n\n  cargo cargo = new cargo();\n\n  System.out.println(\"in cargo Action\");\n\n  BeanUtils.copyProperties(cargo,carForm);\n  System.out.println(\"id\"+ carForm.getId()); \n  System.out.println(\"item id\"+ carForm.getItemid()); \n  Set itemset = carForm.getItemDtl();\n\n    System.out.println(\"size\"+itemset.size()); \n    Iterator iterator =itemset.iterator();   \n    while(iterator.hasNext()) { \n     Item it = (Item)iterator.next();\n    System.out.println(\"name\"+it.getItemName()); //log.debug(\"HERE\");\n   it.setCargo(cargo); } \n\n  cargo.setItemList(itemset);\n  System.out.println(\"size\"+ itemset.size()); \n  session.saveOrUpdate(\"cargo\",cargo);\n  tx.commit();\n  }catch(Exception e){\n   e.printStackTrace();\n  }\n  return mapping.findForward(\"success\");\n\n }\n\n public ActionForward search(ActionMapping mapping, ActionForm form,\n   HttpServletRequest request, HttpServletResponse response)\n   throws Exception {\n  System.out.println(\"in cargo search Action\");\n  SessionFactory sessionFactory = (SessionFactory) servlet\n    .getServletContext().getAttribute(HibernatePlugIn.KEY_NAME);\n  HttpSession session1 = request.getSession();\n  Session session = sessionFactory.openSession();\n  Transaction tx = session.beginTransaction();\n  cargoForm cargoform = (cargoForm) form;\n  // System.out.println(\"Name\"+cargoForm.getName());\n  cargo cargo = new cargo();\n  System.out.println(\"in cargo search Action\");\n  // copy customerform to model\n  BeanUtils.copyProperties(cargo, cargoform);\n  String name;\n  String status;\n  String createby;\n\n  name = cargo.getCname();\n  status = cargo.getStatus();\n  createby = cargo.getCreate();\n  System.out.println(\"Name...\" + name);\n  System.out.println(\"status...\" + status);\n  System.out.println(\"createby...\" + createby);\n  try {\n   if ((name.equals(\"\")) &amp;&amp; (createby.equals(\"\"))\n     &amp;&amp; (status.equals(\"\")))\n    return mapping.findForward(\"failure\");\n   String SQL_QUERY = \"from cargo c where c.cname=:name or c.status=:status or c.create=:createby\";\n   Query query = session.createQuery(SQL_QUERY);\n   query.setParameter(\"name\", name);\n   query.setParameter(\"status\", status);\n   query.setParameter(\"createby\", createby);\n   ArrayList al = new ArrayList();\n   for (Iterator i = query.iterate(); i.hasNext();) {\n    cargo cargo1 = (cargo) i.next();\n    al.add(cargo1);\n    System.out.println(\"Cargo ID is:\" + cargo1.getId());\n   }\n   System.out.println(\"Cargo list is:\" + al.size());\n   session1.setAttribute(\"clist\", al);\n  } catch (Exception e) {\n   e.printStackTrace();\n   return mapping.findForward(\"failure\");\n  }\n  System.out.println(\"search Cargo list is success\");\n\n  return mapping.findForward(\"success\");\n }\n\n\n\n\n public ActionForward edit(ActionMapping mapping, ActionForm form,\n   HttpServletRequest request, HttpServletResponse response)\n   throws Exception {\n  SessionFactory sessionFactory=null;\n  Session session =null;\n  if (log.isDebugEnabled()) {\n   log.debug(\"Entering Master Edit method\");\n  }\n\n  try {\n   sessionFactory = (SessionFactory) servlet\n     .getServletContext().getAttribute(HibernatePlugIn.KEY_NAME);\n   session = sessionFactory.openSession();\n   Transaction transaction=session.beginTransaction();\n   cargoForm carForm = (cargoForm) form;\n   // System.out.println(carForm.getStatus());\n   // System.out.println(carForm.getCreate());\n   cargo cargo = new cargo();\n   BeanUtils.copyProperties(cargo, carForm);\n      System.out.println(\"In Cargo Edit \"+cargo.getId());\n      String qstring = \"from cargo c where c.id=:id\";\n   Query query = session.createQuery(qstring);\n   query.setParameter(\"id\", cargo.getId());\n   ArrayList all = new ArrayList();\n   cargo c = (cargo) query.iterate().next();\n\n   System.out.println(\"Edit Cargo list \" + all.size()); \n\n\n     Set purchaseArray = new HashSet();\n           System.out.println(\"Edit\"+c.getItemList().size());\n           carForm.setItemDtl(purchaseArray);\n           BeanUtils.copyProperties(carForm,c);\n           // transaction.commit();\n            session.flush();\n  } catch (Exception e) {\n   e.printStackTrace();\n   return mapping.findForward(\"failure\");\n  }\n\n  // return a forward to edit forward\n  System.out.println(\"Edit Cargo list is success\");\n  return mapping.findForward(\"succ\");\n }\n\n public ActionForward delete(ActionMapping mapping, ActionForm form,\n   HttpServletRequest request, HttpServletResponse response)\n   throws Exception {\n\n  try {\n   SessionFactory sessionFactory = (SessionFactory) servlet\n     .getServletContext().getAttribute(HibernatePlugIn.KEY_NAME);\n   Session session = sessionFactory.openSession();\n   Transaction tx = session.beginTransaction();\n   cargoForm carForm = (cargoForm) form;\n   // System.out.println(carForm.getStatus());\n   // System.out.println(carForm.getCreate());\n   cargo cargo = new cargo();\n   BeanUtils.copyProperties(cargo, carForm);\n      System.out.println(\"In Cargo Delete \"+cargo.getId());\n   //String qstring = \"delete from cargo c where c.id=:id\";\n   //Query query = session.createQuery(qstring);\n   session.delete(\"cargo\",cargo);\n     // session.delete(cargo);\n     // session.flush();\n   //query.setParameter(\"id\", cargo.getId());\n   //int row=query.executeUpdate();\n   //System.out.println(\"deleted row\"+row);\n   tx.commit();\n\n  } catch (Exception e) {\n   e.printStackTrace();\n   return mapping.findForward(\"failure\");\n  }\n  // return a forward to edit forward\n  System.out.println(\"Deleted success\");\n  return mapping.findForward(\"succes\");\n }\n\n}\n</code></pre>\n\n<p>My parent model</p>\n\n<pre><code>package com.model;\n\nimport java.util.HashSet;\nimport java.util.Set;\n\npublic class cargo {\n\n private Long id;\n private String cname;\n private String cdate;\n private String csource;\n private String cdestination;\n private String create;\n private String status;\n\n private Set itemList = new HashSet();\n\n public Long getId() {\n  return id;\n }\n\n public void setId(Long id) {\n  this.id = id;\n }\n\n public String getCname() {\n  return cname;\n }\n\n public void setCname(String cname) {\n  this.cname = cname;\n }\n\n public String getCdate() {\n  return cdate;\n }\n\n public void setCdate(String cdate) {\n  this.cdate = cdate;\n }\n\n public String getCsource() {\n  return csource;\n }\n\n public void setCsource(String csource) {\n  this.csource = csource;\n }\n\n public String getCdestination() {\n  return cdestination;\n }\n\n public void setCdestination(String cdestination) {\n  this.cdestination = cdestination;\n }\n\n public String getCreate() {\n  return create;\n }\n\n public void setCreate(String create) {\n  this.create = create;\n }\n\n public String getStatus() {\n  return status;\n }\n\n public void setStatus(String status) {\n  this.status = status;\n }\n\n public Set getItemList() {\n  return itemList;\n }\n\n public void setItemList(Set itemList) {\n  this.itemList = itemList;\n }\n\n\n}  \n</code></pre>\n\n<p>My child model   </p>\n\n<pre><code>package com.model;\n\npublic class Item{\n\n private Long itemid;\n private String itemName;\n private String weight;\n private cargo cargo;\n\n public Long getItemid() {\n  return itemid;\n }\n public void setItemid(Long itemid) {\n  this.itemid = itemid;\n }\n public String getItemName() {\n  return itemName;\n }\n public void setItemName(String itemName) {\n  this.itemName = itemName;\n }\n public String getWeight() {\n  return weight;\n }\n public void setWeight(String weight) {\n  this.weight = weight;\n }\n public cargo getCargo() {\n  return cargo;\n }\n public void setCargo(cargo cargo) {\n  this.cargo = cargo;\n }\n\n\n} \n</code></pre>\n\n<p>And my form</p>\n\n<pre><code>package com.form;\n\nimport java.util.HashSet;\nimport java.util.Set;\n\nimport javax.servlet.http.HttpServletRequest;\n\nimport org.apache.struts.action.ActionForm;\nimport org.apache.struts.action.ActionMapping;\n\nimport com.model.Item;\n\npublic class cargoForm extends ActionForm {\n private Long id;\n private String cname;\n private String cdate;\n private String csource;\n private String cdestination;\n private String create;\n private String status;\n\n private Long[] itemid;\n private String[] itemName;\n private String[] weight;\n\n private Set itemset = new HashSet();\n\n public Long getId() {\n  return id;\n }\n\n public void setId(Long id) {\n  this.id = id;\n }\n\n public String getCname() {\n  return cname;\n }\n\n public void setCname(String cname) {\n  this.cname = cname;\n }\n\n public String getCdate() {\n  return cdate;\n }\n\n public void setCdate(String cdate) {\n  this.cdate = cdate;\n }\n\n public String getCsource() {\n  return csource;\n }\n\n public void setCsource(String csource) {\n  this.csource = csource;\n }\n\n public String getCdestination() {\n  return cdestination;\n }\n\n public void setCdestination(String cdestination) {\n  this.cdestination = cdestination;\n }\n\n public String getCreate() {\n  return create;\n }\n\n public void setCreate(String create) {\n  this.create = create;\n }\n\n public String getStatus() {\n  return status;\n }\n\n public void setStatus(String status) {\n  this.status = status;\n }\n\n public Long[] getItemid() {\n  return itemid;\n }\n\n public void setItemid(Long[] itemid) {\n  this.itemid = itemid;\n }\n\n public String[] getItemName() {\n  return itemName;\n }\n\n public void setItemName(String[] itemName) {\n  this.itemName = itemName;\n }\n\n public String[] getWeight() {\n  return weight;\n }\n\n public void setWeight(String[] weight) {\n  this.weight = weight;\n }\n\n /*\n  * public Set getItemset() { return itemset; }\n  * \n  * public void setItemset(Set itemset) { this.itemset = itemset; }\n  */\n public Set getItemDtl() {\n  if (itemid != null) {\n   itemset = new HashSet();\n   System.out.println(\"cargadd form\" + itemid);\n   for (int i = 0; i &lt; itemid.length; i++) {\n    Item it = new Item();\n    // it.setItemId(itemId[i]);\n    it.setItemName(itemName[i]);\n    System.out.println(\"cargadd form\" + itemName[i]);\n    it.setWeight(weight[i]);\n\n    itemset.add(it);\n    System.out.println(\"cargadd form\" + itemset.size());\n   }\n  }\n  return itemset;\n }\n\n public void setItemDtl(Set itemset) {\n  System.out.println(\"cargadd form\" + itemset.size());\n  this.itemset = itemset;\n  System.out.println(\"cargadd form\" + itemset.size());\n }\n\n public void reset(ActionMapping mapping, HttpServletRequest request) {\n\n  cname = \"\";\n  csource = \"\";\n  cdestination = \"\";\n  cdate = \"\";\n  status = \"\";\n  create = \"\";\n\n }\n\n}\n</code></pre>\n\n<p>The error:</p>\n\n<pre><code>Hibernate: select max(itemid) from item\nHibernate: insert into item (itemname, weight, position, id, itemid) values (?, ?, ?, ?, ?)\nHibernate: update cargo set name=?, date=?, source=?, destination=?, createby=?, status=? where id=?\nOct 4, 2010 10:44:08 AM org.hibernate.jdbc.BatchingBatcher doExecuteBatch\nSEVERE: Exception executing batch: \norg.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1\n at org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:61)\n at org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:46)\n at org.hibernate.jdbc.BatchingBatcher.checkRowCounts(BatchingBatcher.java:68)\n at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:48)\n at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:242)\n at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:235)\n at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:140)\n at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)\n at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)\n at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)\n at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338)\n at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)\n at com.action.CargoAction.save(CargoAction.java:125)\n at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n at java.lang.reflect.Method.invoke(Unknown Source)\n at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:269)\n at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:170)\n at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)\n at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)\n at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)\n at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\n at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:305)\n at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\n at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)\n at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)\n at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)\n at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\n at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)\n at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)\n at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\n at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)\n at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)\n at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)\n at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)\n at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:879)\n at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)\n at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)\n at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)\n at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)\n at java.lang.Thread.run(Unknown Source)\nOct 4, 2010 10:44:08 AM org.hibernate.event.def.AbstractFlushingEventListener performExecutions\nSEVERE: Could not synchronize database state with session\norg.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1\n at org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:61)\n at org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:46)\n at org.hibernate.jdbc.BatchingBatcher.checkRowCounts(BatchingBatcher.java:68)\n at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:48)\n at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:242)\n at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:235)\n at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:140)\n at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)\n at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)\n at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)\n at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338)\n at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)\n at com.action.CargoAction.save(CargoAction.java:125)\n at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n at java.lang.reflect.Method.invoke(Unknown Source)\n at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:269)\n at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:170)\n at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)\n at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)\n at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)\n at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\n at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:305)\n at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\n at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)\n at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)\n at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)\n at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\n at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)\n at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)\n at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\n at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)\n at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)\n at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)\n at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)\n at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:879)\n at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)\n at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)\n at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)\n at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)\n at java.lang.Thread.run(Unknown Source)\norg.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1\n at org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:61)\n at org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:46)\n at org.hibernate.jdbc.BatchingBatcher.checkRowCounts(BatchingBatcher.java:68)\n at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:48)\n at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:242)\n at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:235)\n at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:140)\n at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)\n at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)\n at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)\n at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338)\n at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)\n at com.action.CargoAction.save(CargoAction.java:125)\n at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n at java.lang.reflect.Method.invoke(Unknown Source)\n at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:269)\n at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:170)\n at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)\n at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)\n at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)\n at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\n at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:305)\n at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\n at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)\n at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)\n at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)\n at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\n at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)\n at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)\n at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\n at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)\n at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)\n at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)\n at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)\n at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:879)\n at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)\n at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)\n at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)\n at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)\n at java.lang.Thread.run(Unknown Source)\n</code></pre>\n"},{"tags":["java","string","integer"],"answers":[{"tags":[],"owner":{"account_id":19690456,"reputation":1,"user_id":14415525,"display_name":"Rangga Surya Prayoga"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640074642,"creation_date":1639927781,"answer_id":70412779,"question_id":70395440,"body_markdown":"And the answer: \r\nhttps://www.youtube.com/watch?v=TdgQW8T-KeQ&amp;t (this is my video) &lt;br&gt;\r\nhttps://www.youtube.com/watch?v=NQOK2cam3js&amp;t (this is my inspiration video)\r\n\r\n    String jumlahString = Objects.requireNonNull(String.valueOf(layoutJumlah.getEditText().getText()));\r\n    jumlahString = jumlahString.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;);\r\n    jumlah = Integer.parseInt(jumlahString);\r\n\r\n\r\n\r\n","title":"Convert formatCurrency (rupiah) to int","body":"<p>And the answer:\n<a href=\"https://www.youtube.com/watch?v=TdgQW8T-KeQ&amp;t\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=TdgQW8T-KeQ&amp;t</a> (this is my video) <br>\n<a href=\"https://www.youtube.com/watch?v=NQOK2cam3js&amp;t\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=NQOK2cam3js&amp;t</a> (this is my inspiration video)</p>\n<pre><code>String jumlahString = Objects.requireNonNull(String.valueOf(layoutJumlah.getEditText().getText()));\njumlahString = jumlahString.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;);\njumlah = Integer.parseInt(jumlahString);\n</code></pre>\n"}],"owner":{"account_id":19690456,"reputation":1,"user_id":14415525,"display_name":"Rangga Surya Prayoga"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":439,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640074642,"creation_date":1639755240,"question_id":70395440,"body_markdown":"Here I have a method like this:\r\n\r\n    // method currency format\r\n        private String formatRupiah(Double number) {\r\n            Locale locale = new Locale(&quot;IND&quot;, &quot;ID&quot;);\r\n            NumberFormat numberFormat = NumberFormat.getCurrencyInstance(locale);\r\n            String formatRupiah = numberFormat.format(number);\r\n            String[] split = formatRupiah.split(&quot;,&quot;);\r\n            int length = split[0].length();\r\n            String formatRupiahString = split[0].substring(0, 2) + &quot; &quot; + split[0].substring(2, length);\r\n            return formatRupiahString;\r\n        }\r\n\r\nAnd also have this method to change the text that is in the edit text into the currency format:\r\n\r\n    private void editTextToFormatCurrency() {\r\n            etJumlah.addTextChangedListener(new TextWatcher() {\r\n    \r\n                private String jumlahFormat = Objects.requireNonNull(etJumlah.getText()).toString().trim();\r\n    \r\n                @Override\r\n                public void beforeTextChanged(CharSequence s, int start, int count, int after) {\r\n    \r\n                }\r\n    \r\n                @Override\r\n                public void onTextChanged(CharSequence s, int start, int before, int count) {\r\n                    if (!s.toString().equals(jumlahFormat)) {\r\n                        etJumlah.removeTextChangedListener(this);\r\n                        String replace = s.toString().replaceAll(&quot;[Rp. ]&quot;, &quot;&quot;);\r\n                        if (!replace.isEmpty()) {\r\n                            jumlahFormat = formatRupiah(Double.parseDouble(replace));\r\n                        } else {\r\n                            jumlahFormat = &quot;&quot;;\r\n                        }\r\n                        etJumlah.setText(jumlahFormat);\r\n                        etJumlah.setSelection(jumlahFormat.length());\r\n                        etJumlah.addTextChangedListener(this);\r\n                    }\r\n                }\r\n    \r\n                @Override\r\n                public void afterTextChanged(Editable s) {\r\n    \r\n                }\r\n            });\r\n        }\r\n\r\nAnd now my question is how to change TextToFormatCurrencycto int or Integer without format currency ? &lt;br&gt;\r\nMy goal of changing back to Integer or int is so I can upload to Firestore with data type number.&lt;br&gt;","title":"Convert formatCurrency (rupiah) to int","body":"<p>Here I have a method like this:</p>\n<pre><code>// method currency format\n    private String formatRupiah(Double number) {\n        Locale locale = new Locale(&quot;IND&quot;, &quot;ID&quot;);\n        NumberFormat numberFormat = NumberFormat.getCurrencyInstance(locale);\n        String formatRupiah = numberFormat.format(number);\n        String[] split = formatRupiah.split(&quot;,&quot;);\n        int length = split[0].length();\n        String formatRupiahString = split[0].substring(0, 2) + &quot; &quot; + split[0].substring(2, length);\n        return formatRupiahString;\n    }\n</code></pre>\n<p>And also have this method to change the text that is in the edit text into the currency format:</p>\n<pre><code>private void editTextToFormatCurrency() {\n        etJumlah.addTextChangedListener(new TextWatcher() {\n\n            private String jumlahFormat = Objects.requireNonNull(etJumlah.getText()).toString().trim();\n\n            @Override\n            public void beforeTextChanged(CharSequence s, int start, int count, int after) {\n\n            }\n\n            @Override\n            public void onTextChanged(CharSequence s, int start, int before, int count) {\n                if (!s.toString().equals(jumlahFormat)) {\n                    etJumlah.removeTextChangedListener(this);\n                    String replace = s.toString().replaceAll(&quot;[Rp. ]&quot;, &quot;&quot;);\n                    if (!replace.isEmpty()) {\n                        jumlahFormat = formatRupiah(Double.parseDouble(replace));\n                    } else {\n                        jumlahFormat = &quot;&quot;;\n                    }\n                    etJumlah.setText(jumlahFormat);\n                    etJumlah.setSelection(jumlahFormat.length());\n                    etJumlah.addTextChangedListener(this);\n                }\n            }\n\n            @Override\n            public void afterTextChanged(Editable s) {\n\n            }\n        });\n    }\n</code></pre>\n<p>And now my question is how to change TextToFormatCurrencycto int or Integer without format currency ? <br>\nMy goal of changing back to Integer or int is so I can upload to Firestore with data type number.<br></p>\n"},{"tags":["java","tomcat","virtualhost","tomcat8"],"answers":[{"tags":[],"owner":{"account_id":8497217,"reputation":37834,"user_id":6371459,"accept_rate":25,"display_name":"pedrofb"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1640074121,"creation_date":1483005806,"answer_id":41377349,"question_id":41376063,"body_markdown":"You have defined two hosts with the same deployment directory `webapps`\r\n\r\nIf you want `localhost` to be different than `mydomain` define two deployment directories and rename the root context war to ROOT.war. it is not recommended to use `&lt;Context` tag\r\n\r\n    &lt;Host name=&quot;localhost&quot; autoDeploy=&quot;true&quot; unpackWARs=&quot;true&quot; appBase=&quot;webapps&quot;&gt;\r\n   &lt;/Host&gt;\r\n\r\n    &lt;Host name=&quot;www.mydomain.com&quot; autoDeploy=&quot;true&quot; unpackWARs=&quot;true&quot; appBase=&quot;mydomain&quot;&gt;\r\n    &lt;/Host&gt;\r\n\r\nYou do not need `alias` since the host name contains the domain name. All others requests coming from a DNS entry different to `www.mydomain.com` will be served by `localhost`\r\n\r\nIf `localhost` and `www.mydomain.com` are the same, then you just need a `&lt;Host` and deploy a `ROOT.war`\r\n\r\n     &lt;Host name=&quot;localhost&quot; autoDeploy=&quot;true&quot; unpackWARs=&quot;true&quot; appBase=&quot;webapps&quot;&gt;\r\n     &lt;/Host&gt;\r\n\r\n","title":"Virtual Host in Tomcat 8","body":"<p>You have defined two hosts with the same deployment directory <code>webapps</code></p>\n<p>If you want <code>localhost</code> to be different than <code>mydomain</code> define two deployment directories and rename the root context war to ROOT.war. it is not recommended to use <code>&lt;Context</code> tag</p>\n<pre><code>&lt;Host name=&quot;localhost&quot; autoDeploy=&quot;true&quot; unpackWARs=&quot;true&quot; appBase=&quot;webapps&quot;&gt;\n</code></pre>\n   \n<pre><code>&lt;Host name=&quot;www.mydomain.com&quot; autoDeploy=&quot;true&quot; unpackWARs=&quot;true&quot; appBase=&quot;mydomain&quot;&gt;\n&lt;/Host&gt;\n</code></pre>\n<p>You do not need <code>alias</code> since the host name contains the domain name. All others requests coming from a DNS entry different to <code>www.mydomain.com</code> will be served by <code>localhost</code></p>\n<p>If <code>localhost</code> and <code>www.mydomain.com</code> are the same, then you just need a <code>&lt;Host</code> and deploy a <code>ROOT.war</code></p>\n<pre><code> &lt;Host name=&quot;localhost&quot; autoDeploy=&quot;true&quot; unpackWARs=&quot;true&quot; appBase=&quot;webapps&quot;&gt;\n &lt;/Host&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":957088,"reputation":3922,"user_id":982198,"accept_rate":79,"display_name":"ddarellis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1483005815,"creation_date":1483005815,"answer_id":41377355,"question_id":41376063,"body_markdown":"What worked for me was to map my applications like this in the server.xml file.\r\n\r\nDelete the host entry you added and inside the host entry you had from the start put this:\r\n\r\n    &lt;Context path=&quot;/&quot; docBase=&quot;yourApp&quot;&gt;\r\n        &lt;WatchedResource&gt;WEB-INF/web.xml&lt;/WatchedResource&gt;\r\n    &lt;/Context&gt;\r\n    &lt;Context path=&quot;/ROOT&quot; docBase=&quot;ROOT&quot;&gt;\r\n        &lt;WatchedResource&gt;WEB-INF/web.xml&lt;/WatchedResource&gt;\r\n    &lt;/Context&gt;\r\n\r\nDont forget to change yourApp","title":"Virtual Host in Tomcat 8","body":"<p>What worked for me was to map my applications like this in the server.xml file.</p>\n\n<p>Delete the host entry you added and inside the host entry you had from the start put this:</p>\n\n<pre><code>&lt;Context path=\"/\" docBase=\"yourApp\"&gt;\n    &lt;WatchedResource&gt;WEB-INF/web.xml&lt;/WatchedResource&gt;\n&lt;/Context&gt;\n&lt;Context path=\"/ROOT\" docBase=\"ROOT\"&gt;\n    &lt;WatchedResource&gt;WEB-INF/web.xml&lt;/WatchedResource&gt;\n&lt;/Context&gt;\n</code></pre>\n\n<p>Dont forget to change yourApp</p>\n"}],"owner":{"account_id":2390378,"reputation":1410,"user_id":2090332,"accept_rate":68,"display_name":"0bj3ct"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3241,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":41377349,"answer_count":2,"score":0,"last_activity_date":1640074121,"creation_date":1483001232,"question_id":41376063,"body_markdown":"I want to map a domain `mydomain.com` to an application. I added a `&lt;Host&gt;` entry into `server.xml`, but when I go to `www.mydomain.com` it shows the Tomcat start page instead of my application.\r\n\r\nserver.xml:\r\n\r\n    &lt;Engine name=&quot;Catalina&quot; defaultHost=&quot;localhost&quot;&gt;\r\n \r\n      &lt;Realm className=&quot;org.apache.catalina.realm.LockOutRealm&quot;&gt;\r\n       &lt;Realm className=&quot;org.apache.catalina.realm.UserDatabaseRealm&quot; resourceName=&quot;UserDatabase&quot;/&gt;\r\n      &lt;/Realm&gt;\r\n\r\n      &lt;Host name=&quot;localhost&quot; autoDeploy=&quot;true&quot; unpackWARs=&quot;true&quot; appBase=&quot;webapps&quot;&gt;\r\n        &lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; pattern=&quot;%h %l %u %t &quot;%r&quot; %s %b&quot; suffix=&quot;.txt&quot; prefix=&quot;localhost_access_log&quot; directory=&quot;logs&quot;/&gt;\r\n      &lt;/Host&gt;\r\n\r\n\r\n      &lt;Host name=&quot;mydomain.com&quot; autoDeploy=&quot;true&quot; unpackWARs=&quot;true&quot; appBase=&quot;webapps&quot;&gt;\r\n        &lt;Alias&gt;www.mydomain.com&lt;/Alias&gt;\r\n        &lt;Context privileged=&quot;true&quot; debug=&quot;0&quot; docBase=&quot;/opt/tomcat/webapps/MyDomain&quot; path=&quot;&quot;/&gt;\r\n        &lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; pattern=&quot;%h %l %u %t &quot;%r&quot; %s %b&quot; suffix=&quot;.txt&quot; prefix=&quot;localhost_access_log.&quot; directory=&quot;logs&quot; resolveHosts=&quot;false&quot;/&gt;\r\n      &lt;/Host&gt;\r\n\r\n    &lt;/Engine&gt;\r\n\r\nThanks in advance!","title":"Virtual Host in Tomcat 8","body":"<p>I want to map a domain <code>mydomain.com</code> to an application. I added a <code>&lt;Host&gt;</code> entry into <code>server.xml</code>, but when I go to <code>www.mydomain.com</code> it shows the Tomcat start page instead of my application.</p>\n\n<p>server.xml:</p>\n\n<pre><code>&lt;Engine name=\"Catalina\" defaultHost=\"localhost\"&gt;\n\n  &lt;Realm className=\"org.apache.catalina.realm.LockOutRealm\"&gt;\n   &lt;Realm className=\"org.apache.catalina.realm.UserDatabaseRealm\" resourceName=\"UserDatabase\"/&gt;\n  &lt;/Realm&gt;\n\n  &lt;Host name=\"localhost\" autoDeploy=\"true\" unpackWARs=\"true\" appBase=\"webapps\"&gt;\n    &lt;Valve className=\"org.apache.catalina.valves.AccessLogValve\" pattern=\"%h %l %u %t \"%r\" %s %b\" suffix=\".txt\" prefix=\"localhost_access_log\" directory=\"logs\"/&gt;\n  &lt;/Host&gt;\n\n\n  &lt;Host name=\"mydomain.com\" autoDeploy=\"true\" unpackWARs=\"true\" appBase=\"webapps\"&gt;\n    &lt;Alias&gt;www.mydomain.com&lt;/Alias&gt;\n    &lt;Context privileged=\"true\" debug=\"0\" docBase=\"/opt/tomcat/webapps/MyDomain\" path=\"\"/&gt;\n    &lt;Valve className=\"org.apache.catalina.valves.AccessLogValve\" pattern=\"%h %l %u %t \"%r\" %s %b\" suffix=\".txt\" prefix=\"localhost_access_log.\" directory=\"logs\" resolveHosts=\"false\"/&gt;\n  &lt;/Host&gt;\n\n&lt;/Engine&gt;\n</code></pre>\n\n<p>Thanks in advance!</p>\n"},{"tags":["java","colors","bit","argb"],"comments":[{"owner":{"account_id":16914570,"reputation":1532,"user_id":12232870,"display_name":"terrorrussia-keeps-killing"},"score":0,"creation_date":1640073549,"post_id":70432097,"comment_id":124502497,"body_markdown":"You forgot to apply (the `0xFF000000` mask optionally to the shift result of `alpha`: left-most bits will be discarded anyway, and the right-most bits will be zeroes) `0xFF0000` to the shift result of `red`, `0xFF00` to the shift result of green, and `0xFF` to `blue`. If I still remember how bit math works. :D","body":"You forgot to apply (the <code>0xFF000000</code> mask optionally to the shift result of <code>alpha</code>: left-most bits will be discarded anyway, and the right-most bits will be zeroes) <code>0xFF0000</code> to the shift result of <code>red</code>, <code>0xFF00</code> to the shift result of green, and <code>0xFF</code> to <code>blue</code>. If I still remember how bit math works. :D"},{"owner":{"account_id":11901543,"reputation":2366,"user_id":8709389,"accept_rate":14,"display_name":"zhh"},"score":1,"creation_date":1640073839,"post_id":70432097,"comment_id":124502580,"body_markdown":"You need to check whether these values are in [0, 255) or not. If they are, then your implementation is correct.","body":"You need to check whether these values are in [0, 255) or not. If they are, then your implementation is correct."}],"answers":[{"tags":[],"owner":{"account_id":22338599,"reputation":73,"user_id":16558721,"display_name":"Ahmad"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1640074043,"creation_date":1640074043,"answer_id":70432288,"question_id":70432097,"body_markdown":"You should also add a mask to each input to make sure they are not greater than `0xFF`:\r\n\r\n    int argb = (0xFF &amp; alpha) &lt;&lt; 24 | (0xFF &amp; red) &lt;&lt; 16 | (0xFF &amp; green) &lt;&lt; 8 | (0xFF &amp; blue)","title":"Convert int colours to argb","body":"<p>You should also add a mask to each input to make sure they are not greater than <code>0xFF</code>:</p>\n<pre><code>int argb = (0xFF &amp; alpha) &lt;&lt; 24 | (0xFF &amp; red) &lt;&lt; 16 | (0xFF &amp; green) &lt;&lt; 8 | (0xFF &amp; blue)\n</code></pre>\n"}],"owner":{"account_id":23699676,"reputation":3,"user_id":17722990,"display_name":"KepaArizzabalaga"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640074043,"creation_date":1640072968,"question_id":70432097,"body_markdown":"```\r\npublic static int getARGB(final int red, final int green, final int blue, final int alpha) {\r\n        int argb = (alpha&lt;&lt;24)|(red&lt;&lt;16)|(green&lt;&lt;8)|blue;\r\n        return argb;\r\n    }\r\n```\r\nSo I have to convert the different colour ints to an argb value. Is the way I have done correct?","title":"Convert int colours to argb","body":"<pre><code>public static int getARGB(final int red, final int green, final int blue, final int alpha) {\n        int argb = (alpha&lt;&lt;24)|(red&lt;&lt;16)|(green&lt;&lt;8)|blue;\n        return argb;\n    }\n</code></pre>\n<p>So I have to convert the different colour ints to an argb value. Is the way I have done correct?</p>\n"},{"tags":["java","jackson","polymorphism","unmarshalling"],"answers":[{"tags":[],"owner":{"account_id":5797834,"reputation":2627,"user_id":4573065,"accept_rate":100,"display_name":"ST-DDT"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1640074025,"creation_date":1484566459,"answer_id":41675485,"question_id":41674776,"body_markdown":"You could use Jackson Mixins to fake a `@JsonDeserialize(using=CustomDeserializer.class)` annotation on the class/field in question.\r\nThen you can try to create the instances yourself in the given deserializer class.\r\n\r\n    // I&#39;m not sure whether annotations (@JsonTypeInfo) on class level are supported as well to allow the polymorphistic type decision.\r\n    abstract class MixIn {\r\n\r\n      // make constructor usable if available\r\n      MixIn(@JsonProperty(&quot;id&quot;) int a, @JsonProperty(&quot;name&quot;) String b) { }\r\n\r\n      @JsonDeserialize(using=CustomDeserializer.class) abstract TypeX getTypeX();\r\n      \r\n    }\r\n\r\nAnd then you can use it like this\r\n\r\n    objectMapper.addMixIn(TypeXContainer.class, MixIn.class);\r\n\r\nDoks: http://wiki.fasterxml.com/JacksonMixInAnnotations\r\n","title":"Jackson deserialize polymorphic types not under my control","body":"<p>You could use Jackson Mixins to fake a <code>@JsonDeserialize(using=CustomDeserializer.class)</code> annotation on the class/field in question.\nThen you can try to create the instances yourself in the given deserializer class.</p>\n<pre><code>// I'm not sure whether annotations (@JsonTypeInfo) on class level are supported as well to allow the polymorphistic type decision.\nabstract class MixIn {\n\n  // make constructor usable if available\n  MixIn(@JsonProperty(&quot;id&quot;) int a, @JsonProperty(&quot;name&quot;) String b) { }\n\n  @JsonDeserialize(using=CustomDeserializer.class) abstract TypeX getTypeX();\n  \n}\n</code></pre>\n<p>And then you can use it like this</p>\n<pre><code>objectMapper.addMixIn(TypeXContainer.class, MixIn.class);\n</code></pre>\n<p>Doks: <a href=\"http://wiki.fasterxml.com/JacksonMixInAnnotations\" rel=\"nofollow noreferrer\">http://wiki.fasterxml.com/JacksonMixInAnnotations</a></p>\n"}],"owner":{"account_id":201157,"reputation":12723,"user_id":447426,"accept_rate":62,"display_name":"dermoritz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":470,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":41675485,"answer_count":1,"score":1,"last_activity_date":1640074025,"creation_date":1484564233,"question_id":41674776,"body_markdown":"I want to (un)marshal an Object that contains a field of [this type][1]. While the serialization works well i am not able to deserialize it.\r\nThe implementing classes are not under my control. I guess in general it is not possible to deserialize to the original implementing class due to missing constructors and or setters.\r\n\r\nOn the other hand i want to save all information (as java object) contained in the json.\r\n\r\nWhat are my options to achieve this, are there best or good practices?\r\n\r\n\r\n  [1]: https://camel.apache.org/maven/camel-2.14.0/camel-core/apidocs/org/apache/camel/NamedNode.html","title":"Jackson deserialize polymorphic types not under my control","body":"<p>I want to (un)marshal an Object that contains a field of <a href=\"https://camel.apache.org/maven/camel-2.14.0/camel-core/apidocs/org/apache/camel/NamedNode.html\" rel=\"nofollow noreferrer\">this type</a>. While the serialization works well i am not able to deserialize it.\nThe implementing classes are not under my control. I guess in general it is not possible to deserialize to the original implementing class due to missing constructors and or setters.</p>\n\n<p>On the other hand i want to save all information (as java object) contained in the json.</p>\n\n<p>What are my options to achieve this, are there best or good practices?</p>\n"},{"tags":["java","string","substring"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1640055006,"post_id":70430140,"comment_id":124499247,"body_markdown":"I don&#39;t think this is possible.  You should show the code that you are currently using.","body":"I don&#39;t think this is possible.  You should show the code that you are currently using."}],"answers":[{"tags":[],"owner":{"account_id":2094057,"reputation":506072,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640055265,"creation_date":1640055265,"answer_id":70430168,"question_id":70430140,"body_markdown":"The best you could perhaps do would be to use an iterative regex approach:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    String str = &quot;She was born on DATE at TIME on DAY&quot;;\r\n    Map&lt;String, String&gt; repl = new HashMap&lt;&gt;();\r\n    repl.put(&quot;DATE&quot;, &quot;DATE_REPL&quot;);\r\n    repl.put(&quot;TIME&quot;, &quot;TIME_REPL&quot;);\r\n    repl.put(&quot;DAY&quot;, &quot;DAY_REPL&quot;);\r\n\r\n    Pattern pattern = Pattern.compile(&quot;\\\\b(DATE|TIME|DAY)\\\\b&quot;);\r\n    Matcher m = pattern.matcher(str);\r\n    StringBuffer buffer = new StringBuffer();\r\n      \r\n    while(m.find()) {\r\n        m.appendReplacement(buffer, repl.get(m.group(1)));\r\n      }\r\n    m.appendTail(buffer);\r\n\r\n    System.out.println(&quot;input:  &quot; + str);\r\n    System.out.println(&quot;output: &quot; + buffer.toString());\r\n\r\nThis prints:\r\n\r\n    input:  She was born on DATE at TIME on DAY\r\n    output: She was born on DATE_REPL at TIME_REPL on DAY_REPL\r\n\r\nHere we are searching on the regex alternation `\\b(DATE|TIME|DAY)\\b`.  Each time we find a match in the string, we do a lookup in a hashmap for the replacement string.","title":"How to replace substrings of string with different substrings in JAVA?","body":"<p>The best you could perhaps do would be to use an iterative regex approach:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String str = &quot;She was born on DATE at TIME on DAY&quot;;\nMap&lt;String, String&gt; repl = new HashMap&lt;&gt;();\nrepl.put(&quot;DATE&quot;, &quot;DATE_REPL&quot;);\nrepl.put(&quot;TIME&quot;, &quot;TIME_REPL&quot;);\nrepl.put(&quot;DAY&quot;, &quot;DAY_REPL&quot;);\n\nPattern pattern = Pattern.compile(&quot;\\\\b(DATE|TIME|DAY)\\\\b&quot;);\nMatcher m = pattern.matcher(str);\nStringBuffer buffer = new StringBuffer();\n  \nwhile(m.find()) {\n    m.appendReplacement(buffer, repl.get(m.group(1)));\n  }\nm.appendTail(buffer);\n\nSystem.out.println(&quot;input:  &quot; + str);\nSystem.out.println(&quot;output: &quot; + buffer.toString());\n</code></pre>\n<p>This prints:</p>\n<pre><code>input:  She was born on DATE at TIME on DAY\noutput: She was born on DATE_REPL at TIME_REPL on DAY_REPL\n</code></pre>\n<p>Here we are searching on the regex alternation <code>\\b(DATE|TIME|DAY)\\b</code>.  Each time we find a match in the string, we do a lookup in a hashmap for the replacement string.</p>\n"},{"tags":[],"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640058514,"creation_date":1640055615,"answer_id":70430193,"question_id":70430140,"body_markdown":"The built-in String replace doesn&#39;t support replacing multiple occurrences.  So, you will need to write your own method to do so.\r\n\r\nThe code below assumes ``oldstuff`` contains unique strings.  If they are not unique, you would have to write a different solution.\r\n\r\n```\r\n   public static void main(String[] args) {\r\n        String original = &quot; She was born on DATE at TIME on DAY&quot;;\r\n        String[] oldstuff = {&quot;DATE&quot;, &quot;TIME&quot;, &quot;DAY&quot;};\r\n        String[] newstuff = {&quot;Feb 14, 2000&quot;, &quot;midnight&quot;, &quot;Tuesday&quot;};\r\n\r\n        System.out.println(original);\r\n        String updated = replace(original, oldstuff, newstuff);\r\n        System.out.println(updated);\r\n\r\n    }\r\n\r\n    static String replace(String str, String[] oldstuff, String[] newstuff) {\r\n        for (int i = 0; i &lt; oldstuff.length; i++) {\r\n            str = str.replace(oldstuff[i], newstuff[i]);\r\n        }\r\n        return str;\r\n    }\r\n```\r\n\r\nOutput:\r\n\r\n```\r\n She was born on DATE at TIME on DAY\r\n She was born on Feb 14, 2000 at midnight on Tuesday\r\n```\r\n\r\nA better solution would be to scan word by word, replacing only a match is found.  \r\n\r\n```\r\n    static String replace2(String str, String[] oldstuff, String[] newstuff){\r\n        StringBuilder sb = new StringBuilder();\r\n        java.util.Scanner s = new Scanner(str);\r\n        int index = 0;\r\n        while(s.hasNext()){\r\n            String word = s.next();\r\n            if (word.equals(oldstuff[index])){\r\n                sb.append(&quot; &quot;).append(newstuff[index]).append(&quot; &quot;);\r\n                index++;\r\n            } else {\r\n                sb.append(&quot; &quot;).append(word).append(&quot; &quot;);\r\n            }\r\n        }\r\n        \r\n        return sb.toString();\r\n    }\r\n\r\n```","title":"How to replace substrings of string with different substrings in JAVA?","body":"<p>The built-in String replace doesn't support replacing multiple occurrences.  So, you will need to write your own method to do so.</p>\n<p>The code below assumes <code>oldstuff</code> contains unique strings.  If they are not unique, you would have to write a different solution.</p>\n<pre><code>   public static void main(String[] args) {\n        String original = &quot; She was born on DATE at TIME on DAY&quot;;\n        String[] oldstuff = {&quot;DATE&quot;, &quot;TIME&quot;, &quot;DAY&quot;};\n        String[] newstuff = {&quot;Feb 14, 2000&quot;, &quot;midnight&quot;, &quot;Tuesday&quot;};\n\n        System.out.println(original);\n        String updated = replace(original, oldstuff, newstuff);\n        System.out.println(updated);\n\n    }\n\n    static String replace(String str, String[] oldstuff, String[] newstuff) {\n        for (int i = 0; i &lt; oldstuff.length; i++) {\n            str = str.replace(oldstuff[i], newstuff[i]);\n        }\n        return str;\n    }\n</code></pre>\n<p>Output:</p>\n<pre><code> She was born on DATE at TIME on DAY\n She was born on Feb 14, 2000 at midnight on Tuesday\n</code></pre>\n<p>A better solution would be to scan word by word, replacing only a match is found.</p>\n<pre><code>    static String replace2(String str, String[] oldstuff, String[] newstuff){\n        StringBuilder sb = new StringBuilder();\n        java.util.Scanner s = new Scanner(str);\n        int index = 0;\n        while(s.hasNext()){\n            String word = s.next();\n            if (word.equals(oldstuff[index])){\n                sb.append(&quot; &quot;).append(newstuff[index]).append(&quot; &quot;);\n                index++;\n            } else {\n                sb.append(&quot; &quot;).append(word).append(&quot; &quot;);\n            }\n        }\n        \n        return sb.toString();\n    }\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23706429,"reputation":11,"user_id":17728828,"display_name":"itsbenchase"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640056592,"creation_date":1640056592,"answer_id":70430281,"question_id":70430140,"body_markdown":"The easiest way to do so would be to make date, time, and day separate variables, so that\r\n\r\n```\r\nString str = &quot;She was born on &quot; + date + &quot; at &quot; + time + &quot; on &quot; + day;\r\n```","title":"How to replace substrings of string with different substrings in JAVA?","body":"<p>The easiest way to do so would be to make date, time, and day separate variables, so that</p>\n<pre><code>String str = &quot;She was born on &quot; + date + &quot; at &quot; + time + &quot; on &quot; + day;\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user17233545"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640071511,"creation_date":1640060691,"answer_id":70430664,"question_id":70430140,"body_markdown":"Try this.\r\n\r\n    public static void main(String[] args) {\r\n        String str =&quot; She was born on DATE at TIME on DAY&quot;;\r\n\r\n        List&lt;String&gt; list = List.of(&quot;(date)&quot;, &quot;(time)&quot;, &quot;(day)&quot;);\r\n        Iterator&lt;String&gt; iterator = list.iterator();\r\n        String output = Pattern.compile(&quot;DATE|TIME|DAY&quot;).matcher(str)\r\n            .replaceAll(m -&gt; iterator.next());\r\n\r\n        System.out.println(output);\r\n    }\r\n\r\noutput:\r\n\r\n     She was born on (date) at (time) on (day)\r\n\r\nOr\r\n\r\n        Map&lt;String, String&gt; map = Map.of(&quot;DATE&quot;, &quot;(date)&quot;, &quot;TIME&quot;, &quot;(time)&quot;, &quot;DAY&quot;, &quot;(day)&quot;);\r\n        String output = Pattern.compile(String.join(&quot;|&quot;, map.keySet())).matcher(str)\r\n            .replaceAll(m -&gt; map.get(m.group()));\r\n        System.out.println(output);\r\n","title":"How to replace substrings of string with different substrings in JAVA?","body":"<p>Try this.</p>\n<pre><code>public static void main(String[] args) {\n    String str =&quot; She was born on DATE at TIME on DAY&quot;;\n\n    List&lt;String&gt; list = List.of(&quot;(date)&quot;, &quot;(time)&quot;, &quot;(day)&quot;);\n    Iterator&lt;String&gt; iterator = list.iterator();\n    String output = Pattern.compile(&quot;DATE|TIME|DAY&quot;).matcher(str)\n        .replaceAll(m -&gt; iterator.next());\n\n    System.out.println(output);\n}\n</code></pre>\n<p>output:</p>\n<pre><code> She was born on (date) at (time) on (day)\n</code></pre>\n<p>Or</p>\n<pre><code>    Map&lt;String, String&gt; map = Map.of(&quot;DATE&quot;, &quot;(date)&quot;, &quot;TIME&quot;, &quot;(time)&quot;, &quot;DAY&quot;, &quot;(day)&quot;);\n    String output = Pattern.compile(String.join(&quot;|&quot;, map.keySet())).matcher(str)\n        .replaceAll(m -&gt; map.get(m.group()));\n    System.out.println(output);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17849762,"reputation":104,"user_id":12965752,"display_name":"Bhushan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640065919,"creation_date":1640065919,"answer_id":70431172,"question_id":70430140,"body_markdown":"**In one go**\r\n\r\n    String str =&quot; She was born on DATE at TIME on DAY&quot;;\r\n\tstr = str.replaceAll(&quot;DATE&quot;, &quot;2021-12-21&quot;).replaceAll(&quot;TIME&quot;, &quot;11:20&quot;).replaceAll(&quot;DAY&quot;, &quot;Tue&quot;);","title":"How to replace substrings of string with different substrings in JAVA?","body":"<p><strong>In one go</strong></p>\n<pre><code>String str =&quot; She was born on DATE at TIME on DAY&quot;;\nstr = str.replaceAll(&quot;DATE&quot;, &quot;2021-12-21&quot;).replaceAll(&quot;TIME&quot;, &quot;11:20&quot;).replaceAll(&quot;DAY&quot;, &quot;Tue&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1710753,"reputation":993,"user_id":1568881,"accept_rate":40,"display_name":"Aguid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640073917,"creation_date":1640073917,"answer_id":70432260,"question_id":70430140,"body_markdown":"You can simply use String.format(&quot; She was born on %s at %s on %s&quot;,date ,time,day) ","title":"How to replace substrings of string with different substrings in JAVA?","body":"<p>You can simply use String.format(&quot; She was born on %s at %s on %s&quot;,date ,time,day)</p>\n"}],"owner":{"account_id":15635634,"reputation":151,"user_id":11280615,"display_name":"Saloni Singhal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":6,"score":-1,"last_activity_date":1640073917,"creation_date":1640054905,"question_id":70430140,"body_markdown":"I have to replace different substrings of a single string with different strings. For e.g.\r\n\r\n     String str =&quot; She was born on DATE at TIME on DAY&quot;;\r\n\r\nI want to replace DATE, TIME and DAY parts of string with different string values. Using replace(), I am able to replace just one part of the string. But I am working looking for is a solution to replace all these substrings with different strings at one go.","title":"How to replace substrings of string with different substrings in JAVA?","body":"<p>I have to replace different substrings of a single string with different strings. For e.g.</p>\n<pre><code> String str =&quot; She was born on DATE at TIME on DAY&quot;;\n</code></pre>\n<p>I want to replace DATE, TIME and DAY parts of string with different string values. Using replace(), I am able to replace just one part of the string. But I am working looking for is a solution to replace all these substrings with different strings at one go.</p>\n"},{"tags":["java","apache-poi","aspose-cells","spire.xls"],"comments":[{"owner":{"account_id":964210,"reputation":1018,"user_id":987959,"display_name":"PJ Fanning"},"score":0,"creation_date":1640195715,"post_id":70431909,"comment_id":124540287,"body_markdown":"https://github.com/dhatim/fastexcel is an alternative to POI SXSSF","body":"<a href=\"https://github.com/dhatim/fastexcel\" rel=\"nofollow noreferrer\">github.com/dhatim/fastexcel</a> is an alternative to POI SXSSF"}],"answers":[{"tags":[],"owner":{"account_id":10814530,"reputation":4195,"user_id":7954021,"display_name":"Renis1235"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640073359,"creation_date":1640072074,"answer_id":70431962,"question_id":70431909,"body_markdown":"### Update - User wants to append, my suggestion is not able to read workbooks. Leaving it here for any reference.\r\n\r\nUse a `SXSSFWorkbook` which is part of the Streaming API of POI. It makes it possible to keep only a specific limit of rows in memory while writing. It is a lot faster than using a normal Workbook.\r\n\r\nThis is for the newer format though. You should know that using the old `.xls` format, you are more limited on row and column count. Check [this][1] for more.\r\n\r\n```java\r\nSXSSFWorkbook workbook = new SXSSFWorkbook(10); // 10 is the row access window. It keeps only the last 10 rows in memory, then they are removed and the next ten are loaded\r\n```\r\n\r\nFor more take a look at [this][2], in the **SXSSF (Streaming Usermodel API)** part.\r\n\r\nP.S: Do not forget to `workbook.dispose()`.\r\n\r\n\r\n  [1]: https://docs.aspose.com/cells/net/find-maximum-rows-and-columns-supported-by-xls-and-xlsx-formats/#:~:text=For%20example%2C%20XLS%20supports%2065536,1048576%20rows%20and%2016384%20columns.\r\n  [2]: https://poi.apache.org/components/spreadsheet/how-to.html","title":"Write huge rows in Excel file (.xls format older version) in chunks without loading complete file in memory","body":"<h3>Update - User wants to append, my suggestion is not able to read workbooks. Leaving it here for any reference.</h3>\n<p>Use a <code>SXSSFWorkbook</code> which is part of the Streaming API of POI. It makes it possible to keep only a specific limit of rows in memory while writing. It is a lot faster than using a normal Workbook.</p>\n<p>This is for the newer format though. You should know that using the old <code>.xls</code> format, you are more limited on row and column count. Check <a href=\"https://docs.aspose.com/cells/net/find-maximum-rows-and-columns-supported-by-xls-and-xlsx-formats/#:%7E:text=For%20example%2C%20XLS%20supports%2065536,1048576%20rows%20and%2016384%20columns.\" rel=\"nofollow noreferrer\">this</a> for more.</p>\n<pre class=\"lang-java prettyprint-override\"><code>SXSSFWorkbook workbook = new SXSSFWorkbook(10); // 10 is the row access window. It keeps only the last 10 rows in memory, then they are removed and the next ten are loaded\n</code></pre>\n<p>For more take a look at <a href=\"https://poi.apache.org/components/spreadsheet/how-to.html\" rel=\"nofollow noreferrer\">this</a>, in the <strong>SXSSF (Streaming Usermodel API)</strong> part.</p>\n<p>P.S: Do not forget to <code>workbook.dispose()</code>.</p>\n"}],"owner":{"account_id":23707782,"reputation":1,"user_id":17730045,"display_name":"ved prakash kamma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1069,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640073359,"creation_date":1640071678,"question_id":70431909,"body_markdown":"I&#39;m working on a feature to export data into Excel file (**.xls** (Older version) format support).\r\n\r\nI have to append chunks into **.xls** file, **without loading file into memory.** The file should be in .xls format. chunks size can very in each steps and there are millions of rows . divided in chunks.\r\nIf I load file in memory, there can be a situation of **memory-overflow.** Can someone can suggest any free or paid api or solution in java which can help. ","title":"Write huge rows in Excel file (.xls format older version) in chunks without loading complete file in memory","body":"<p>I'm working on a feature to export data into Excel file (<strong>.xls</strong> (Older version) format support).</p>\n<p>I have to append chunks into <strong>.xls</strong> file, <strong>without loading file into memory.</strong> The file should be in .xls format. chunks size can very in each steps and there are millions of rows . divided in chunks.\nIf I load file in memory, there can be a situation of <strong>memory-overflow.</strong> Can someone can suggest any free or paid api or solution in java which can help.</p>\n"},{"tags":["java","json","string","jwk"],"answers":[{"tags":[],"owner":{"account_id":7865489,"reputation":380,"user_id":5944412,"display_name":"Bipin Kumar Chaurasia"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640073129,"creation_date":1640069208,"answer_id":70431588,"question_id":70431503,"body_markdown":"Please refer to the following logic implemented with `org.json` library.\r\n```\r\npublic void generateJSONObject() {\r\n    String a = &quot;{ \\&quot;kty\\&quot;: \\&quot;someText\\&quot;, \\&quot;e\\&quot;: \\&quot;someText\\&quot;, \\&quot;use\\&quot;: \\&quot;sig\\&quot;, \\&quot;kid\\&quot;: \\&quot;someText\\&quot;, \\&quot;alg\\&quot;: \\&quot;someText\\&quot;, \\&quot;n\\&quot;: \\&quot;someText\\&quot;}&quot;;\r\n    String b = &quot;{ \\&quot;kty\\&quot;: \\&quot;someText\\&quot;, \\&quot;e\\&quot;: \\&quot;someText\\&quot;, \\&quot;use\\&quot;: \\&quot;enc\\&quot;, \\&quot;kid\\&quot;: \\&quot;someText\\&quot;, \\&quot;alg\\&quot;: \\&quot;someText\\&quot;, \\&quot;n\\&quot;: \\&quot;someText\\&quot; }&quot;;\r\n    JSONObject jsonObject1 = new JSONObject(a);\r\n    JSONObject jsonObject2 = new JSONObject(b);\r\n    JSONObject jsonObject = new JSONObject();\r\n    jsonObject.append(&quot;keys&quot;, jsonObject1);\r\n    jsonObject.append(&quot;keys&quot;, jsonObject2);\r\n    System.out.println(jsonObject);\r\n  }\r\n```","title":"How to create a JSON Key Set from two JSON string","body":"<p>Please refer to the following logic implemented with <code>org.json</code> library.</p>\n<pre><code>public void generateJSONObject() {\n    String a = &quot;{ \\&quot;kty\\&quot;: \\&quot;someText\\&quot;, \\&quot;e\\&quot;: \\&quot;someText\\&quot;, \\&quot;use\\&quot;: \\&quot;sig\\&quot;, \\&quot;kid\\&quot;: \\&quot;someText\\&quot;, \\&quot;alg\\&quot;: \\&quot;someText\\&quot;, \\&quot;n\\&quot;: \\&quot;someText\\&quot;}&quot;;\n    String b = &quot;{ \\&quot;kty\\&quot;: \\&quot;someText\\&quot;, \\&quot;e\\&quot;: \\&quot;someText\\&quot;, \\&quot;use\\&quot;: \\&quot;enc\\&quot;, \\&quot;kid\\&quot;: \\&quot;someText\\&quot;, \\&quot;alg\\&quot;: \\&quot;someText\\&quot;, \\&quot;n\\&quot;: \\&quot;someText\\&quot; }&quot;;\n    JSONObject jsonObject1 = new JSONObject(a);\n    JSONObject jsonObject2 = new JSONObject(b);\n    JSONObject jsonObject = new JSONObject();\n    jsonObject.append(&quot;keys&quot;, jsonObject1);\n    jsonObject.append(&quot;keys&quot;, jsonObject2);\n    System.out.println(jsonObject);\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10481421,"reputation":1559,"user_id":7726319,"accept_rate":0,"display_name":"Prog_G"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1640069503,"creation_date":1640069503,"answer_id":70431619,"question_id":70431503,"body_markdown":"Try the below code :\r\n\r\n    public void test(){\r\n            String a=&quot;{ \\&quot;kty\\&quot;: \\&quot;someText\\&quot;, \\&quot;e\\&quot;: \\&quot;someText\\&quot;, \\&quot;use\\&quot;: \\&quot;sig\\&quot;, \\&quot;kid\\&quot;: \\&quot;someText\\&quot;, \\&quot;alg\\&quot;: \\&quot;someText\\&quot;, \\&quot;n\\&quot;: \\&quot;someText\\&quot;}&quot;;\r\n            String b= &quot;{ \\&quot;kty\\&quot;: \\&quot;someText\\&quot;, \\&quot;e\\&quot;: \\&quot;someText\\&quot;, \\&quot;use\\&quot;: \\&quot;enc\\&quot;, \\&quot;kid\\&quot;: \\&quot;someText\\&quot;, \\&quot;alg\\&quot;: \\&quot;someText\\&quot;, \\&quot;n\\&quot;: \\&quot;someText\\&quot; }&quot;;\r\n            JSONObject jsonObject = new JSONObject(a);\r\n            JSONObject jsonObject1 = new JSONObject(b);\r\n            JSONArray objects1 = new JSONArray();\r\n            objects1.put(jsonObject);\r\n            objects1.put(jsonObject1);\r\n    \r\n            JSONObject jsonObject2 = new JSONObject();\r\n            jsonObject2.put(&quot;keys&quot;,objects1);\r\n            System.out.println(jsonObject2);\r\n        }\r\n\r\n**Output:**\r\n\r\n    {&quot;keys&quot;:[{&quot;kty&quot;:&quot;someText&quot;,&quot;e&quot;:&quot;someText&quot;,&quot;use&quot;:&quot;sig&quot;,&quot;kid&quot;:&quot;someText&quot;,&quot;alg&quot;:&quot;someText&quot;,&quot;n&quot;:&quot;someText&quot;},{&quot;kty&quot;:&quot;someText&quot;,&quot;e&quot;:&quot;someText&quot;,&quot;use&quot;:&quot;enc&quot;,&quot;kid&quot;:&quot;someText&quot;,&quot;alg&quot;:&quot;someText&quot;,&quot;n&quot;:&quot;someText&quot;}]}\r\n\r\nLibrary used : [org.json][1]\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/org.json/json/20211205","title":"How to create a JSON Key Set from two JSON string","body":"<p>Try the below code :</p>\n<pre><code>public void test(){\n        String a=&quot;{ \\&quot;kty\\&quot;: \\&quot;someText\\&quot;, \\&quot;e\\&quot;: \\&quot;someText\\&quot;, \\&quot;use\\&quot;: \\&quot;sig\\&quot;, \\&quot;kid\\&quot;: \\&quot;someText\\&quot;, \\&quot;alg\\&quot;: \\&quot;someText\\&quot;, \\&quot;n\\&quot;: \\&quot;someText\\&quot;}&quot;;\n        String b= &quot;{ \\&quot;kty\\&quot;: \\&quot;someText\\&quot;, \\&quot;e\\&quot;: \\&quot;someText\\&quot;, \\&quot;use\\&quot;: \\&quot;enc\\&quot;, \\&quot;kid\\&quot;: \\&quot;someText\\&quot;, \\&quot;alg\\&quot;: \\&quot;someText\\&quot;, \\&quot;n\\&quot;: \\&quot;someText\\&quot; }&quot;;\n        JSONObject jsonObject = new JSONObject(a);\n        JSONObject jsonObject1 = new JSONObject(b);\n        JSONArray objects1 = new JSONArray();\n        objects1.put(jsonObject);\n        objects1.put(jsonObject1);\n\n        JSONObject jsonObject2 = new JSONObject();\n        jsonObject2.put(&quot;keys&quot;,objects1);\n        System.out.println(jsonObject2);\n    }\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>{&quot;keys&quot;:[{&quot;kty&quot;:&quot;someText&quot;,&quot;e&quot;:&quot;someText&quot;,&quot;use&quot;:&quot;sig&quot;,&quot;kid&quot;:&quot;someText&quot;,&quot;alg&quot;:&quot;someText&quot;,&quot;n&quot;:&quot;someText&quot;},{&quot;kty&quot;:&quot;someText&quot;,&quot;e&quot;:&quot;someText&quot;,&quot;use&quot;:&quot;enc&quot;,&quot;kid&quot;:&quot;someText&quot;,&quot;alg&quot;:&quot;someText&quot;,&quot;n&quot;:&quot;someText&quot;}]}\n</code></pre>\n<p>Library used : <a href=\"https://mvnrepository.com/artifact/org.json/json/20211205\" rel=\"nofollow noreferrer\">org.json</a></p>\n"}],"owner":{"account_id":18226753,"reputation":95,"user_id":13266400,"display_name":"Q2Dev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":327,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1640073129,"creation_date":1640068608,"question_id":70431503,"body_markdown":"I have two json string coresponding to &quot;**sig**&quot; and &quot;**enc**&quot;.\r\n\r\n`String a={\r\n      &quot;kty&quot;: &quot;someText&quot;,\r\n      &quot;e&quot;: &quot;someText&quot;,\r\n      &quot;use&quot;: &quot;sig&quot;,\r\n      &quot;kid&quot;: &quot;someText&quot;,\r\n      &quot;alg&quot;: &quot;someText&quot;,\r\n      &quot;n&quot;: &quot;someText&quot;}`\r\n\r\n`String b= {\r\n      &quot;kty&quot;: &quot;someText&quot;,\r\n      &quot;e&quot;: &quot;someText&quot;,\r\n      &quot;use&quot;: &quot;enc&quot;,\r\n      &quot;kid&quot;: &quot;someText&quot;,\r\n      &quot;alg&quot;: &quot;someText&quot;,\r\n      &quot;n&quot;: &quot;someText&quot;\r\n    }`\r\n\r\nI need to combine them both like this:\r\n\r\n`{\r\n  &quot;keys&quot;: [\r\n    {\r\n      &quot;kty&quot;: &quot;someText&quot;,\r\n      &quot;e&quot;: &quot;someText&quot;,\r\n      &quot;use&quot;: &quot;sig&quot;,\r\n      &quot;kid&quot;: &quot;someText&quot;,\r\n      &quot;alg&quot;: &quot;someText&quot;,\r\n      &quot;n&quot;: &quot;someText&quot;\r\n    },\r\n    {\r\n      &quot;kty&quot;: &quot;someText&quot;,\r\n      &quot;e&quot;: &quot;someText&quot;,\r\n      &quot;use&quot;: &quot;enc&quot;,\r\n      &quot;kid&quot;: &quot;someText&quot;,\r\n      &quot;alg&quot;: &quot;someText&quot;,\r\n      &quot;n&quot;: &quot;someText&quot;\r\n    }\r\n  ]\r\n}`\r\n\r\nThe resulting JSON is nothing but JWKS which includes both **sig** and **enc** public keys. I have replaced the actual values for these parameters.","title":"How to create a JSON Key Set from two JSON string","body":"<p>I have two json string coresponding to &quot;<strong>sig</strong>&quot; and &quot;<strong>enc</strong>&quot;.</p>\n<p><code>String a={ &quot;kty&quot;: &quot;someText&quot;, &quot;e&quot;: &quot;someText&quot;, &quot;use&quot;: &quot;sig&quot;, &quot;kid&quot;: &quot;someText&quot;, &quot;alg&quot;: &quot;someText&quot;, &quot;n&quot;: &quot;someText&quot;}</code></p>\n<p><code>String b= { &quot;kty&quot;: &quot;someText&quot;, &quot;e&quot;: &quot;someText&quot;, &quot;use&quot;: &quot;enc&quot;, &quot;kid&quot;: &quot;someText&quot;, &quot;alg&quot;: &quot;someText&quot;, &quot;n&quot;: &quot;someText&quot; }</code></p>\n<p>I need to combine them both like this:</p>\n<p><code>{ &quot;keys&quot;: [ { &quot;kty&quot;: &quot;someText&quot;, &quot;e&quot;: &quot;someText&quot;, &quot;use&quot;: &quot;sig&quot;, &quot;kid&quot;: &quot;someText&quot;, &quot;alg&quot;: &quot;someText&quot;, &quot;n&quot;: &quot;someText&quot; }, { &quot;kty&quot;: &quot;someText&quot;, &quot;e&quot;: &quot;someText&quot;, &quot;use&quot;: &quot;enc&quot;, &quot;kid&quot;: &quot;someText&quot;, &quot;alg&quot;: &quot;someText&quot;, &quot;n&quot;: &quot;someText&quot; } ] }</code></p>\n<p>The resulting JSON is nothing but JWKS which includes both <strong>sig</strong> and <strong>enc</strong> public keys. I have replaced the actual values for these parameters.</p>\n"},{"tags":["java","android","firebase-realtime-database","google-cloud-platform"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1639994838,"post_id":70418404,"comment_id":124481198,"body_markdown":"Where in your code are you adding that Map to the Bundle object?","body":"Where in your code are you adding that Map to the Bundle object?"},{"owner":{"account_id":21845664,"reputation":3,"user_id":16138542,"display_name":"Jhank Tatar"},"score":0,"creation_date":1639998361,"post_id":70418404,"comment_id":124482375,"body_markdown":"I edited question.I&#39;m trying add to Detail _Struct in second activity.","body":"I edited question.I&#39;m trying add to Detail _Struct in second activity."},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1639998951,"post_id":70418404,"comment_id":124482605,"body_markdown":"Does `newModel.getBasket()` return what you need?","body":"Does <code>newModel.getBasket()</code> return what you need?"},{"owner":{"account_id":21845664,"reputation":3,"user_id":16138542,"display_name":"Jhank Tatar"},"score":0,"creation_date":1640011876,"post_id":70418404,"comment_id":124487315,"body_markdown":"Yes it does however, I&#39;m not parsing the detail(Detail_Struct) in second activity","body":"Yes it does however, I&#39;m not parsing the detail(Detail_Struct) in second activity"},{"owner":{"account_id":21845664,"reputation":3,"user_id":16138542,"display_name":"Jhank Tatar"},"score":0,"creation_date":1640081436,"post_id":70418404,"comment_id":124505149,"body_markdown":"Do you have any idea this problem Alex?","body":"Do you have any idea this problem Alex?"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1640091510,"post_id":70418404,"comment_id":124508764,"body_markdown":"Since it returns what you need, most likely it&#39;s a matter of how you send to the second activity, right?","body":"Since it returns what you need, most likely it&#39;s a matter of how you send to the second activity, right?"},{"owner":{"account_id":21845664,"reputation":3,"user_id":16138542,"display_name":"Jhank Tatar"},"score":0,"creation_date":1640093898,"post_id":70418404,"comment_id":124509651,"body_markdown":"Yes, actually ı observe in second activity as array. But ı can not parsing array  (in second activity) so ı cannot send to second adapter(Log.d(&quot;Map_object:&quot;+ map1.get(&quot;orderid&quot;) //null);)","body":"Yes, actually ı observe in second activity as array. But ı can not parsing array  (in second activity) so ı cannot send to second adapter(Log.d(&quot;Map_object:&quot;+ map1.get(&quot;orderid&quot;) //null);)"}],"owner":{"account_id":21845664,"reputation":3,"user_id":16138542,"display_name":"Jhank Tatar"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640072722,"creation_date":1639983972,"question_id":70418404,"body_markdown":"I want to pass data from first activity to second activity. But when I want to read the data in the second activity response is null. How can I solve this problem?\r\n\r\n Firebase Node\r\n\r\n    Pro_:\r\n         Basket:\r\n            ID_1:\r\n               cat: “Tech”\r\n               info:”iOS” \r\n               orderid:”Ref_1” \r\n            ID_2:\r\n               cat: “Tech”\r\n               info:”Android” \r\n               orderid:”Ref_2” \r\n         name:”Mike”\r\n\r\nMy struct\r\n\r\n    public class Name_Struct implements Serializable {\r\n       private String name;\r\n       private Map&lt;String, Object&gt; basket;\r\n      public String getName() {\r\n           return name;\r\n       }\r\n       public void setName(String name) {\r\n           this.name = name;\r\n       }\r\n       @PropertyName(&quot;Basket&quot;)\r\n       public Map&lt;String, Object&gt; getBasket() {\r\n           return basket;\r\n       }\r\n       public void setBasket(Map&lt;String, Object&gt; basket) {\r\n           this.basket = basket;\r\n       }\r\n    }\r\n\r\nFirst Activity\r\n\r\n    private void retrieve_data(){\r\n        Query query = FirebaseDatabase.getInstance().getReference()\r\n                .child(“Pro_”);\r\n        query.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                mName.clear();\r\n                for(DataSnapshot snp : snapshot.getChildren()){\r\n                    Name_Struct names = snp.getValue(Name_Struct.class);\r\n                        mName.add(names);\r\n                    \r\n                }\r\n                mName_adapter.notifyDataSetChanged();\r\n            }\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n            }\r\n        });\r\n    }\r\n\r\nEDIT_1 First Adapter\r\n\r\n    final Name_Struct newModel = Name_Struct(position);\r\n\r\n            Bundle bundle1=new Bundle();\r\n            bundle1.putSerializable(&quot;basket&quot;, (Serializable) newModel.getBasket());\r\n            intent.putExtras(bundle1);\r\n\r\nEDIT_1 Second Activity\r\n\r\n    Map &lt;String, Object&gt; map1 = (Map)bundle.getSerializable(&quot;basket&quot;);\r\n       Detail_Struct detail = new Detail_Struct(\r\n              map1.get(&quot;cat&quot;),map1.get(&quot;info&quot;),map1.get(&quot;orderid&quot;));\r\n        mDetail_Struct.add(detail);\r\n\r\n    for (Map.Entry&lt;String, Object&gt; entry : map1.entrySet()) {\r\n        Log.d(&quot;Map_array:&quot;+ map1);\r\n\r\n&gt; Map_array:{ID_1={cat=Tech, info=iOS, orderid=Ref_1}, D_2={cat=Tech,\r\n&gt; info=Android, orderid=Ref_2}}\r\n\r\n            Log.d(&quot;Map_value:&quot;+ entry.getValue());\r\n\r\n&gt; Map_value:{cat=Tech, info=iOS, orderid=Ref_1} Map_value:{cat=Tech,\r\n&gt; info=Android, orderid=Ref_2}\r\n\r\n            Log.d(&quot;Map_object:&quot;+ map1.get(&quot;orderid&quot;));\r\nnull line???\r\n&gt; Map_object:null Map_object:null\r\n\r\n\r\n        }\r\nEDIT_1 Detail Struct\r\n\r\n    public class Detail_Struct {\r\n        private String cat;\r\n        private String info;\r\n        private String orderid;\r\n    \r\n    public String getCat() {\r\n        return cat;\r\n    }\r\n    public void setCat(String cat) {\r\n        this.cat = cat;\r\n    }\r\n    public String getInfo() {\r\n        return info;\r\n    }\r\n    public void setInfo(String info) {\r\n        this.info = info;\r\n    }\r\n    public String getOrderid() {\r\n        return orderid;\r\n    }\r\n    public void setOrderid(String orderid) {\r\n        this.orderid = orderid;\r\n    }\r\n\r\n","title":"Android Firebase pass data iterate map","body":"<p>I want to pass data from first activity to second activity. But when I want to read the data in the second activity response is null. How can I solve this problem?</p>\n<p>Firebase Node</p>\n<pre><code>Pro_:\n     Basket:\n        ID_1:\n           cat: “Tech”\n           info:”iOS” \n           orderid:”Ref_1” \n        ID_2:\n           cat: “Tech”\n           info:”Android” \n           orderid:”Ref_2” \n     name:”Mike”\n</code></pre>\n<p>My struct</p>\n<pre><code>public class Name_Struct implements Serializable {\n   private String name;\n   private Map&lt;String, Object&gt; basket;\n  public String getName() {\n       return name;\n   }\n   public void setName(String name) {\n       this.name = name;\n   }\n   @PropertyName(&quot;Basket&quot;)\n   public Map&lt;String, Object&gt; getBasket() {\n       return basket;\n   }\n   public void setBasket(Map&lt;String, Object&gt; basket) {\n       this.basket = basket;\n   }\n}\n</code></pre>\n<p>First Activity</p>\n<pre><code>private void retrieve_data(){\n    Query query = FirebaseDatabase.getInstance().getReference()\n            .child(“Pro_”);\n    query.addListenerForSingleValueEvent(new ValueEventListener() {\n        @Override\n        public void onDataChange(@NonNull DataSnapshot snapshot) {\n            mName.clear();\n            for(DataSnapshot snp : snapshot.getChildren()){\n                Name_Struct names = snp.getValue(Name_Struct.class);\n                    mName.add(names);\n                \n            }\n            mName_adapter.notifyDataSetChanged();\n        }\n        @Override\n        public void onCancelled(@NonNull DatabaseError error) {\n        }\n    });\n}\n</code></pre>\n<p>EDIT_1 First Adapter</p>\n<pre><code>final Name_Struct newModel = Name_Struct(position);\n\n        Bundle bundle1=new Bundle();\n        bundle1.putSerializable(&quot;basket&quot;, (Serializable) newModel.getBasket());\n        intent.putExtras(bundle1);\n</code></pre>\n<p>EDIT_1 Second Activity</p>\n<pre><code>Map &lt;String, Object&gt; map1 = (Map)bundle.getSerializable(&quot;basket&quot;);\n   Detail_Struct detail = new Detail_Struct(\n          map1.get(&quot;cat&quot;),map1.get(&quot;info&quot;),map1.get(&quot;orderid&quot;));\n    mDetail_Struct.add(detail);\n\nfor (Map.Entry&lt;String, Object&gt; entry : map1.entrySet()) {\n    Log.d(&quot;Map_array:&quot;+ map1);\n</code></pre>\n<blockquote>\n<p>Map_array:{ID_1={cat=Tech, info=iOS, orderid=Ref_1}, D_2={cat=Tech,\ninfo=Android, orderid=Ref_2}}</p>\n</blockquote>\n<pre><code>        Log.d(&quot;Map_value:&quot;+ entry.getValue());\n</code></pre>\n<blockquote>\n<p>Map_value:{cat=Tech, info=iOS, orderid=Ref_1} Map_value:{cat=Tech,\ninfo=Android, orderid=Ref_2}</p>\n</blockquote>\n<pre><code>        Log.d(&quot;Map_object:&quot;+ map1.get(&quot;orderid&quot;));\n</code></pre>\n<p>null line???</p>\n<blockquote>\n<p>Map_object:null Map_object:null</p>\n</blockquote>\n<pre><code>    }\n</code></pre>\n<p>EDIT_1 Detail Struct</p>\n<pre><code>public class Detail_Struct {\n    private String cat;\n    private String info;\n    private String orderid;\n\npublic String getCat() {\n    return cat;\n}\npublic void setCat(String cat) {\n    this.cat = cat;\n}\npublic String getInfo() {\n    return info;\n}\npublic void setInfo(String info) {\n    this.info = info;\n}\npublic String getOrderid() {\n    return orderid;\n}\npublic void setOrderid(String orderid) {\n    this.orderid = orderid;\n}\n</code></pre>\n"},{"tags":["java","server","client","communication","system-design"],"comments":[{"owner":{"account_id":10814530,"reputation":4195,"user_id":7954021,"display_name":"Renis1235"},"score":0,"creation_date":1640074012,"post_id":70431862,"comment_id":124502624,"body_markdown":"Do you mean two-way communication?","body":"Do you mean two-way communication?"},{"owner":{"account_id":7593789,"reputation":25,"user_id":5760563,"display_name":"Alex Stepanenko"},"score":0,"creation_date":1640086502,"post_id":70431862,"comment_id":124506928,"body_markdown":"Yes, but mostly in cases when the client should receive messages from the server, not as callbacks. Consider all probable problems with connection, like closed ports or restricted access from your ISP provider (clients aren&#39;t visible for all users on the internet, usually not visible at all).","body":"Yes, but mostly in cases when the client should receive messages from the server, not as callbacks. Consider all probable problems with connection, like closed ports or restricted access from your ISP provider (clients aren&#39;t visible for all users on the internet, usually not visible at all)."},{"owner":{"account_id":10814530,"reputation":4195,"user_id":7954021,"display_name":"Renis1235"},"score":0,"creation_date":1640096066,"post_id":70431862,"comment_id":124510619,"body_markdown":"WebSockets should be able to help you. The closed ports and restricted access should not affect anything, as long as the ISP does not block websites :)","body":"WebSockets should be able to help you. The closed ports and restricted access should not affect anything, as long as the ISP does not block websites :)"},{"owner":{"account_id":12810899,"reputation":143,"user_id":9269160,"display_name":"Changsong Li"},"score":0,"creation_date":1640860867,"post_id":70431862,"comment_id":124676502,"body_markdown":"You can use WebSocket for your needs.","body":"You can use WebSocket for your needs."}],"owner":{"account_id":7593789,"reputation":25,"user_id":5760563,"display_name":"Alex Stepanenko"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640071281,"creation_date":1640071281,"question_id":70431862,"body_markdown":"I have a server built on Java that interacts with the client written on C# via REST (Client makes requests and somehow behaves out of responses). The client sometimes sends a heartbeat, also via rest, and now I want to implement the client-message system when the server can send info messages to the client while it works. Which level and which technology I should use in this case to have the most efficient and lightweight path to have a messaging system?\r\n\r\n I think in way of good old socket connections, as I think that creating a web-server for REST requests/responses on the desktop client is an overhead and probably not all clients would be the accessible cause of NAT of ISP&#39;s.","title":"Which Client-server model communication fit&#39;s nowadays?","body":"<p>I have a server built on Java that interacts with the client written on C# via REST (Client makes requests and somehow behaves out of responses). The client sometimes sends a heartbeat, also via rest, and now I want to implement the client-message system when the server can send info messages to the client while it works. Which level and which technology I should use in this case to have the most efficient and lightweight path to have a messaging system?</p>\n<p>I think in way of good old socket connections, as I think that creating a web-server for REST requests/responses on the desktop client is an overhead and probably not all clients would be the accessible cause of NAT of ISP's.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1640015330,"post_id":70424341,"comment_id":124488744,"body_markdown":"Why do you need to create them in advance, and what&#39;s the use in storing them in a database? If you can programmatically create them, it&#39;s faster to generate them than read them from the database. What are you [actually trying to do](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)?","body":"Why do you need to create them in advance, and what&#39;s the use in storing them in a database? If you can programmatically create them, it&#39;s faster to generate them than read them from the database. What are you <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">actually trying to do</a>?"},{"owner":{"account_id":175930,"reputation":2593,"user_id":406290,"accept_rate":43,"display_name":"Kevin Hooke"},"score":1,"creation_date":1640016640,"post_id":70424341,"comment_id":124489296,"body_markdown":"Take a look at load testing and data generator tools. If you are are going to pre-generate and store them for later use, does it really matter how efficient or effective the approach is? You could run it for days as long as you know beforehand when you&#39;re going to start the &#39;real&#39; app that requires them?","body":"Take a look at load testing and data generator tools. If you are are going to pre-generate and store them for later use, does it really matter how efficient or effective the approach is? You could run it for days as long as you know beforehand when you&#39;re going to start the &#39;real&#39; app that requires them?"},{"owner":{"account_id":23701818,"reputation":1,"user_id":17724887,"display_name":"Omnis"},"score":0,"creation_date":1640028822,"post_id":70424341,"comment_id":124493617,"body_markdown":"@Kayaman the idea is to later create a weighting algorithm based on the attributes and their value to pick which combination of attribute/value will be better for a given situation. Also, I would like to have a global vision of what&#39;s available, this part does not have a pratical use so to speak it&#39;s just a personal preference.","body":"@Kayaman the idea is to later create a weighting algorithm based on the attributes and their value to pick which combination of attribute/value will be better for a given situation. Also, I would like to have a global vision of what&#39;s available, this part does not have a pratical use so to speak it&#39;s just a personal preference."},{"owner":{"account_id":23701818,"reputation":1,"user_id":17724887,"display_name":"Omnis"},"score":0,"creation_date":1640029120,"post_id":70424341,"comment_id":124493708,"body_markdown":"@KevinHooke Thanks I will take a look at that. It is in fact not that important that the generation code is efficient but I&#39;d prefer not to have my computer run for hours, maybe even days, to simulate all the possibilities. Another factor is that the range of available values may increases and so is the number of possible attributes. Therefore I fear that when the time comes for me to rerun the generation algorithm with new values, it will have to generate already existing combination plus the new ones.","body":"@KevinHooke Thanks I will take a look at that. It is in fact not that important that the generation code is efficient but I&#39;d prefer not to have my computer run for hours, maybe even days, to simulate all the possibilities. Another factor is that the range of available values may increases and so is the number of possible attributes. Therefore I fear that when the time comes for me to rerun the generation algorithm with new values, it will have to generate already existing combination plus the new ones."},{"owner":{"account_id":175930,"reputation":2593,"user_id":406290,"accept_rate":43,"display_name":"Kevin Hooke"},"score":0,"creation_date":1640033026,"post_id":70424341,"comment_id":124494975,"body_markdown":"This is what the cloud is for :-)","body":"This is what the cloud is for :-)"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1640069006,"post_id":70424341,"comment_id":124501367,"body_markdown":"&quot;I would have over 500k uniques instances&quot;  — No, I don&#39;t think so. Every possible combination of 5 factors, each with set of 64 values, produces a *billion* elements, billion with a &quot;b&quot;, not a half million, by my calculation of (64 ^ 5) = 1,073,741,824.","body":"&quot;I would have over 500k uniques instances&quot;  — No, I don&#39;t think so. Every possible combination of 5 factors, each with set of 64 values, produces a <i>billion</i> elements, billion with a &quot;b&quot;, not a half million, by my calculation of (64 ^ 5) = 1,073,741,824."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640070808,"creation_date":1640070808,"answer_id":70431803,"question_id":70424341,"body_markdown":"# Creating half million objects takes a half second\r\n\r\nCreating a half million objects with five fields takes under a half second. See example code below. So it seems you have fallen into the trap of *premature optimization*, expecting a performance problem before actually proving one. \r\n\r\nAs [I commented][1], your math confuses me. You expect 500K instances by combining each of 64 values for each of five attributes. But a Cartesian product of 64 ^ 5 = 1,073,741,824 — over a billion rather than a half million.\r\n\r\nSo in my example below I used 3 attributes with 64 values each, and created those twice for a total of 524,288, close to your desired half million.\r\n\r\nTo mix things up, I varied the data type for the three attributes: A custom enum, `LocalDate` objects, and `Locale` objects. \r\n\r\nTo make things more challenging, the example dynamically generates a UUID and captures the current moment.\r\n\r\n```java\r\npackage work.basil.many;\r\n\r\nimport java.time.Duration;\r\nimport java.time.Instant;\r\nimport java.time.LocalDate;\r\nimport java.time.Month;\r\nimport java.util.*;\r\n\r\npublic class Many\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        Many app = new Many();\r\n        app.demo();\r\n    }\r\n\r\n    private void demo ( )\r\n    {\r\n        // Initialize.\r\n        long start = System.nanoTime();\r\n        enum Color\r\n        {\r\n            AliceBlue, AntiqueWhite, Aqua, Aquamarine, Azure, Beige, Bisque, Black, BlanchedAlmond, Blue, BlueViolet, Brown, BurlyWood, CadetBlue, Chocolate, Coral,\r\n            CornflowerBlue, Cornsilk, Crimson, Cyan, DarkBlue, DarkCyan, DarkGoldenRod, DarkGray, DarkGreen, DarkKhaki, DarkMagenta, DarkOliveGreen, DarkOrange,\r\n            DarkOrchid, DarkRed, DarkSalmon, DarkSeaGreen, DarkSlateBlue, DarkSlateGray, DarkTurquoise, DarkViolet, DeepPink, DeepSkyBlue, DimGray, DodgerBlue,\r\n            FireBrick, FloralWhite, ForestGreen, Fuchsia, Gainsboro, GhostWhite, Gold, GoldenRod, Gray, Green, GreenYellow, HoneyDew, HotPink, IndianRed, Indigo,\r\n            Ivory, Khaki, Lavender, LavenderBlush, LawnGreen, LemonChiffon, LightBlue, LightCoral\r\n        }\r\n\r\n        LocalDate startDate = LocalDate.of( 2022 , Month.JANUARY , 1 );\r\n        List &lt; LocalDate &gt; dates = startDate.datesUntil( startDate.plusDays( 64 ) ).toList();\r\n\r\n        List &lt; Locale &gt; locales = Arrays.stream( Locale.getAvailableLocales() ).limit( 64 ).toList();\r\n\r\n        record Blah( UUID id , Instant instant , Color color , LocalDate date , Locale locale )\r\n        {\r\n        }\r\n\r\n        // Populate.\r\n        List &lt; Blah &gt; blahs = new ArrayList &lt;&gt;( ( int ) Math.pow( 64 , 3 ) * 2 );\r\n        for ( int i = 1 ; i &lt;= 2 ; i++ )\r\n        {\r\n            for ( Color color : Color.values() )\r\n            {\r\n                for ( LocalDate date : dates )\r\n                {\r\n                    for ( Locale locale : locales )\r\n                    {\r\n                        blahs.add( new Blah( UUID.randomUUID() , Instant.now() , color , date , locale ) );\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Report.\r\n        System.out.println( &quot;blahs.size() = &quot; + blahs.size() );\r\n        System.out.println( &quot;blahs.get(0) = &quot; + blahs.get( 0 ) );  // First.\r\n        System.out.println( &quot;blahs.get(blahs.size()) = &quot; + blahs.get( blahs.size() - 1 ) );  // Last.\r\n\r\n        Duration elapsed = Duration.ofNanos( System.nanoTime() - start );\r\n        System.out.println( &quot;elapsed = &quot; + elapsed );\r\n    }\r\n}\r\n```\r\n\r\nWhen running this code in Java 17 on a [MacBook Pro with Apple Silicon M1][2] chip, and 16 gigs of memory.\r\n\r\n```none\r\nblahs.size() = 524288\r\nblahs.get(0) = Blah[id=68f1478b-de38-4217-b28a-8f3b65c82e47, instant=2021-12-21T07:11:35.896362Z, color=AliceBlue, date=2022-01-01, locale=]\r\nblahs.get(blahs.size()) = Blah[id=58b1e46f-e09a-42a2-819f-e35bae197a27, instant=2021-12-21T07:11:36.224003Z, color=LightCoral, date=2022-03-05, locale=pl_PL_#Latn]\r\nelapsed = PT0.406977625S\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/70424341/how-to-generate-a-large-number-of-instances-effectively-in-java/70431803#comment124501367_70424341\r\n  [2]: https://en.wikipedia.org/wiki/MacBook_Pro#Apple_Silicon_revision","title":"How to generate a large number of instances effectively in Java","body":"<h1>Creating half million objects takes a half second</h1>\n<p>Creating a half million objects with five fields takes under a half second. See example code below. So it seems you have fallen into the trap of <em>premature optimization</em>, expecting a performance problem before actually proving one.</p>\n<p>As <a href=\"https://stackoverflow.com/questions/70424341/how-to-generate-a-large-number-of-instances-effectively-in-java/70431803#comment124501367_70424341\">I commented</a>, your math confuses me. You expect 500K instances by combining each of 64 values for each of five attributes. But a Cartesian product of 64 ^ 5 = 1,073,741,824 — over a billion rather than a half million.</p>\n<p>So in my example below I used 3 attributes with 64 values each, and created those twice for a total of 524,288, close to your desired half million.</p>\n<p>To mix things up, I varied the data type for the three attributes: A custom enum, <code>LocalDate</code> objects, and <code>Locale</code> objects.</p>\n<p>To make things more challenging, the example dynamically generates a UUID and captures the current moment.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.many;\n\nimport java.time.Duration;\nimport java.time.Instant;\nimport java.time.LocalDate;\nimport java.time.Month;\nimport java.util.*;\n\npublic class Many\n{\n    public static void main ( String[] args )\n    {\n        Many app = new Many();\n        app.demo();\n    }\n\n    private void demo ( )\n    {\n        // Initialize.\n        long start = System.nanoTime();\n        enum Color\n        {\n            AliceBlue, AntiqueWhite, Aqua, Aquamarine, Azure, Beige, Bisque, Black, BlanchedAlmond, Blue, BlueViolet, Brown, BurlyWood, CadetBlue, Chocolate, Coral,\n            CornflowerBlue, Cornsilk, Crimson, Cyan, DarkBlue, DarkCyan, DarkGoldenRod, DarkGray, DarkGreen, DarkKhaki, DarkMagenta, DarkOliveGreen, DarkOrange,\n            DarkOrchid, DarkRed, DarkSalmon, DarkSeaGreen, DarkSlateBlue, DarkSlateGray, DarkTurquoise, DarkViolet, DeepPink, DeepSkyBlue, DimGray, DodgerBlue,\n            FireBrick, FloralWhite, ForestGreen, Fuchsia, Gainsboro, GhostWhite, Gold, GoldenRod, Gray, Green, GreenYellow, HoneyDew, HotPink, IndianRed, Indigo,\n            Ivory, Khaki, Lavender, LavenderBlush, LawnGreen, LemonChiffon, LightBlue, LightCoral\n        }\n\n        LocalDate startDate = LocalDate.of( 2022 , Month.JANUARY , 1 );\n        List &lt; LocalDate &gt; dates = startDate.datesUntil( startDate.plusDays( 64 ) ).toList();\n\n        List &lt; Locale &gt; locales = Arrays.stream( Locale.getAvailableLocales() ).limit( 64 ).toList();\n\n        record Blah( UUID id , Instant instant , Color color , LocalDate date , Locale locale )\n        {\n        }\n\n        // Populate.\n        List &lt; Blah &gt; blahs = new ArrayList &lt;&gt;( ( int ) Math.pow( 64 , 3 ) * 2 );\n        for ( int i = 1 ; i &lt;= 2 ; i++ )\n        {\n            for ( Color color : Color.values() )\n            {\n                for ( LocalDate date : dates )\n                {\n                    for ( Locale locale : locales )\n                    {\n                        blahs.add( new Blah( UUID.randomUUID() , Instant.now() , color , date , locale ) );\n                    }\n                }\n            }\n        }\n\n        // Report.\n        System.out.println( &quot;blahs.size() = &quot; + blahs.size() );\n        System.out.println( &quot;blahs.get(0) = &quot; + blahs.get( 0 ) );  // First.\n        System.out.println( &quot;blahs.get(blahs.size()) = &quot; + blahs.get( blahs.size() - 1 ) );  // Last.\n\n        Duration elapsed = Duration.ofNanos( System.nanoTime() - start );\n        System.out.println( &quot;elapsed = &quot; + elapsed );\n    }\n}\n</code></pre>\n<p>When running this code in Java 17 on a <a href=\"https://en.wikipedia.org/wiki/MacBook_Pro#Apple_Silicon_revision\" rel=\"nofollow noreferrer\">MacBook Pro with Apple Silicon M1</a> chip, and 16 gigs of memory.</p>\n<pre class=\"lang-none prettyprint-override\"><code>blahs.size() = 524288\nblahs.get(0) = Blah[id=68f1478b-de38-4217-b28a-8f3b65c82e47, instant=2021-12-21T07:11:35.896362Z, color=AliceBlue, date=2022-01-01, locale=]\nblahs.get(blahs.size()) = Blah[id=58b1e46f-e09a-42a2-819f-e35bae197a27, instant=2021-12-21T07:11:36.224003Z, color=LightCoral, date=2022-03-05, locale=pl_PL_#Latn]\nelapsed = PT0.406977625S\n</code></pre>\n"}],"owner":{"account_id":23701818,"reputation":1,"user_id":17724887,"display_name":"Omnis"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":185,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1640073777,"answer_count":1,"score":-2,"last_activity_date":1640070808,"creation_date":1640015089,"question_id":70424341,"body_markdown":"I have a class with 5 possible different attributes, each of those attributes have a specific range of values (64 different values to be precise) and I&#39;m trying to generate each different possible outcome.  \r\nI estimated that in total I would have over 500k uniques instances of that class. My goal is to generate all unique outcome and store them in a database for later use. It would be nice if that &quot;generator&quot; can be easily upgradable or reused efficiently.  \r\n  \r\nThe reason why I created that post is that I want to know if there is a way for me to generate effectively and not doing each one of them with a slight difference one after another. I initially thought of trying multi-threading but I&#39;m not used to it, so it may not even be close to what I&#39;m looking for.    \r\n\r\nI&#39;m using java 8 but I&#39;m not bound to that version.\r\n\r\nI&#39;m sorry if I&#39;m not clear enough in my explanation and please excuse me if I made some mistakes in writting this post. Thanks for reading and have a nice day.","title":"How to generate a large number of instances effectively in Java","body":"<p>I have a class with 5 possible different attributes, each of those attributes have a specific range of values (64 different values to be precise) and I'm trying to generate each different possible outcome.<br />\nI estimated that in total I would have over 500k uniques instances of that class. My goal is to generate all unique outcome and store them in a database for later use. It would be nice if that &quot;generator&quot; can be easily upgradable or reused efficiently.</p>\n<p>The reason why I created that post is that I want to know if there is a way for me to generate effectively and not doing each one of them with a slight difference one after another. I initially thought of trying multi-threading but I'm not used to it, so it may not even be close to what I'm looking for.</p>\n<p>I'm using java 8 but I'm not bound to that version.</p>\n<p>I'm sorry if I'm not clear enough in my explanation and please excuse me if I made some mistakes in writting this post. Thanks for reading and have a nice day.</p>\n"},{"tags":["java","mybatis"],"comments":[{"owner":{"account_id":244028,"reputation":300,"user_id":516574,"display_name":"cgi"},"score":0,"creation_date":1423803354,"post_id":28051240,"comment_id":45306025,"body_markdown":"I think you could add full stack trace for error.","body":"I think you could add full stack trace for error."}],"answers":[{"tags":[],"owner":{"account_id":129028,"reputation":39302,"user_id":327301,"accept_rate":66,"display_name":"yankee"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1425583524,"creation_date":1425583524,"answer_id":28886023,"question_id":28051240,"body_markdown":"I see two problems here:\r\n\r\n1. The separator for the name of an inner class to its surrounding class is `$` and not `.`. So instead of `com.test.ObjectA.ObjectB` your path should be `com.test.ObjectA$ObjectB`.\r\n2. You ObjectB has not default constructor and you don&#39;t specify a constructor mapping. In addition to your explicit argument, remember that an inner class always has its outer class as implicit constructor argument unless you declare that class as static (`public static class ObjectB...`).","title":"Mybatis &quot;java.lang.IllegalArgumentException: Result Maps collection already contains value for&quot; error when mapping nested classes","body":"<p>I see two problems here:</p>\n\n<ol>\n<li>The separator for the name of an inner class to its surrounding class is <code>$</code> and not <code>.</code>. So instead of <code>com.test.ObjectA.ObjectB</code> your path should be <code>com.test.ObjectA$ObjectB</code>.</li>\n<li>You ObjectB has not default constructor and you don't specify a constructor mapping. In addition to your explicit argument, remember that an inner class always has its outer class as implicit constructor argument unless you declare that class as static (<code>public static class ObjectB...</code>).</li>\n</ol>\n"}],"owner":{"account_id":3014557,"reputation":1292,"user_id":2557108,"accept_rate":50,"display_name":"Yonoss"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10441,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":1,"score":2,"last_activity_date":1640070130,"creation_date":1421773904,"question_id":28051240,"body_markdown":"I&#39;m getting a java.lang.IllegalArgumentException: Result Maps collection already contains value for&quot; error when trying to do some XML mappings on a nested class:\r\n\r\nI have the following nested classes structure:\r\n\r\n    package com.test;   \r\n    public class ObjectA {\r\n\t  private List&lt;ObjectB&gt;\tentries;\r\n\t\r\n\t  public ObjectA(List&lt;ObjectB&gt;\tentries) {\r\n\t\tthis.entries = entries;\r\n\t  }\r\n\t\r\n\t  public void setEntries(List&lt;ObjectB&gt; entries) {\r\n\t\tthis.entries = entries;\r\n\t  }\r\n\t\r\n\t  public List&lt;ObjectB&gt; getEntries() {\r\n\t\treturn this.entries;\r\n\t  }\r\n\r\n\t  public class ObjectB {\r\n\t\tprivate String param1;\r\n\t\t\r\n\t\tpublic ObjectB(String param1) {\r\n\t\t\tthis.param1 = param1;\r\n\t\t}\r\n\t\t\r\n\t\tpublic void setParam1(String param1) {\r\n\t\t\tthis.param1 = param1;\r\n\t\t}\r\n\t\t\r\n\t\tpublic String getParam1() {\r\n\t\t\treturn this.param1;\r\n\t\t}\r\n\t\r\n\t  }\r\n    }\r\n\r\nAnd the xml mappers look like this:\r\n\r\n    &lt;resultMap id=&quot;ObjectA&quot; type=&quot;com.test.ObjectA&quot;&gt;\r\n        &lt;collection property=&quot;entries&quot; resultMap=&quot;Entries&quot;/&gt;\r\n    &lt;/resultMap&gt;\r\n    &lt;resultMap id=&quot;Entries&quot; type=&quot;com.test.ObjectA.ObjectB&quot;&gt;\r\n        &lt;result property=&quot;param1&quot; column=&quot;column1&quot;/&gt;\r\n    &lt;/resultMap&gt;\r\n\r\nIf i take the ObjectB class outside of ObjectA class, the mapping works fine. But the thing is that i don&#39;t want to do that. I want to have it nested.\r\n\r\nThanks ","title":"Mybatis &quot;java.lang.IllegalArgumentException: Result Maps collection already contains value for&quot; error when mapping nested classes","body":"<p>I'm getting a java.lang.IllegalArgumentException: Result Maps collection already contains value for\" error when trying to do some XML mappings on a nested class:</p>\n\n<p>I have the following nested classes structure:</p>\n\n<pre><code>package com.test;   \npublic class ObjectA {\n  private List&lt;ObjectB&gt; entries;\n\n  public ObjectA(List&lt;ObjectB&gt;  entries) {\n    this.entries = entries;\n  }\n\n  public void setEntries(List&lt;ObjectB&gt; entries) {\n    this.entries = entries;\n  }\n\n  public List&lt;ObjectB&gt; getEntries() {\n    return this.entries;\n  }\n\n  public class ObjectB {\n    private String param1;\n\n    public ObjectB(String param1) {\n        this.param1 = param1;\n    }\n\n    public void setParam1(String param1) {\n        this.param1 = param1;\n    }\n\n    public String getParam1() {\n        return this.param1;\n    }\n\n  }\n}\n</code></pre>\n\n<p>And the xml mappers look like this:</p>\n\n<pre><code>&lt;resultMap id=\"ObjectA\" type=\"com.test.ObjectA\"&gt;\n    &lt;collection property=\"entries\" resultMap=\"Entries\"/&gt;\n&lt;/resultMap&gt;\n&lt;resultMap id=\"Entries\" type=\"com.test.ObjectA.ObjectB\"&gt;\n    &lt;result property=\"param1\" column=\"column1\"/&gt;\n&lt;/resultMap&gt;\n</code></pre>\n\n<p>If i take the ObjectB class outside of ObjectA class, the mapping works fine. But the thing is that i don't want to do that. I want to have it nested.</p>\n\n<p>Thanks </p>\n"},{"tags":["java","design-patterns"],"comments":[{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":2,"creation_date":1640066583,"post_id":70431225,"comment_id":124500940,"body_markdown":"Looks like a builder to me.","body":"Looks like a builder to me."},{"owner":{"account_id":16914570,"reputation":1532,"user_id":12232870,"display_name":"terrorrussia-keeps-killing"},"score":1,"creation_date":1640066883,"post_id":70431225,"comment_id":124500983,"body_markdown":"Yeah, looks like a need of the Builder pattern since Java supports neither named parameters nor default arguments (I didn&#39;t pick a deep look into your methods, but in general dispatching overloads from one to another may be better than copying the same code to multiple places). Welcome to the Java world...","body":"Yeah, looks like a need of the Builder pattern since Java supports neither named parameters nor default arguments (I didn&#39;t pick a deep look into your methods, but in general dispatching overloads from one to another may be better than copying the same code to multiple places). Welcome to the Java world..."},{"owner":{"account_id":10481421,"reputation":1559,"user_id":7726319,"accept_rate":0,"display_name":"Prog_G"},"score":1,"creation_date":1640067980,"post_id":70431225,"comment_id":124501157,"body_markdown":"You can use the builder pattern","body":"You can use the builder pattern"}],"answers":[{"tags":[],"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640069716,"creation_date":1640069716,"answer_id":70431657,"question_id":70431225,"body_markdown":"Yes: it looks like the builder pattern.\r\n\r\nYou would only need two `compressor` methods that would return an instance of the `Compressor` class (the builder):\r\n\r\n\r\n    public class ImageCompressionUtil {\r\n        public Compressor compressor(InputStream image) {\r\n            return new Compressor(image);\r\n        }\r\n    \r\n        public Compressor compressor(byte[] image) {\r\n            return new Compressor(new ByteArrayInputStream(image));\r\n        }\r\n    }\r\n\r\nThe `Compressor` class would look like this:\r\n\r\n\r\n    public class Compressor {\r\n        private final Thumbnail thumbnail;\r\n    \r\n        public Compressor(InputStream image) {\r\n            this.thumbnail = Thumbnail.of(image).scale(1);\r\n        }\r\n    \r\n        public Compressor quality(double quality) {\r\n            thumbnail.outputQuality(quality);\r\n            return this;\r\n        }\r\n    \r\n        public Compressor outputFormat(String format) {\r\n            thumbnail.outputFormat(format);\r\n            return this;\r\n        }\r\n    \r\n        public void writeTo(OutputStream outputStream) {\r\n            thumbnail.toOutputStream(outputStream);\r\n        }\r\n    \r\n        public byte[] toBytes() {\r\n            ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n            writeTo(out);\r\n            return out.toByteArray();\r\n        }\r\n    }\r\n\r\nSo you would first create a compressor, then set the parameters, and then either write the result to an `OutputStream` or get it as an array of bytes.\r\n\r\nOne thing that is not clear is which class should close the `InputStream`.\r\n\r\nNote that the `Compressor` class is not much different than what I have called the `Thumbnail` class (what is returned by `Thumbnails.of()`), and you could directly return the result of `Thumbnails.of(image).scale(1)` instead of creating another class.\r\n\r\n","title":"design pattern: how to add optional params for methods?","body":"<p>Yes: it looks like the builder pattern.</p>\n<p>You would only need two <code>compressor</code> methods that would return an instance of the <code>Compressor</code> class (the builder):</p>\n<pre><code>public class ImageCompressionUtil {\n    public Compressor compressor(InputStream image) {\n        return new Compressor(image);\n    }\n\n    public Compressor compressor(byte[] image) {\n        return new Compressor(new ByteArrayInputStream(image));\n    }\n}\n</code></pre>\n<p>The <code>Compressor</code> class would look like this:</p>\n<pre><code>public class Compressor {\n    private final Thumbnail thumbnail;\n\n    public Compressor(InputStream image) {\n        this.thumbnail = Thumbnail.of(image).scale(1);\n    }\n\n    public Compressor quality(double quality) {\n        thumbnail.outputQuality(quality);\n        return this;\n    }\n\n    public Compressor outputFormat(String format) {\n        thumbnail.outputFormat(format);\n        return this;\n    }\n\n    public void writeTo(OutputStream outputStream) {\n        thumbnail.toOutputStream(outputStream);\n    }\n\n    public byte[] toBytes() {\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\n        writeTo(out);\n        return out.toByteArray();\n    }\n}\n</code></pre>\n<p>So you would first create a compressor, then set the parameters, and then either write the result to an <code>OutputStream</code> or get it as an array of bytes.</p>\n<p>One thing that is not clear is which class should close the <code>InputStream</code>.</p>\n<p>Note that the <code>Compressor</code> class is not much different than what I have called the <code>Thumbnail</code> class (what is returned by <code>Thumbnails.of()</code>), and you could directly return the result of <code>Thumbnails.of(image).scale(1)</code> instead of creating another class.</p>\n"}],"owner":{"account_id":15968441,"reputation":373,"user_id":11523294,"display_name":"Criwran"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70431657,"answer_count":1,"score":0,"last_activity_date":1640069716,"creation_date":1640066307,"question_id":70431225,"body_markdown":"I hava a util class:\r\n```\r\npublic class ImageCompressionUtil {\r\n\r\n  public static void compressor(InputStream image, OutputStream outputStream, double quality,\r\n      String outputFormat) throws IOException {\r\n    Thumbnails.of(image).scale(1).outputQuality(quality).outputFormat(outputFormat).\r\n        toOutputStream(outputStream);\r\n  }\r\n\r\n  public static void compressor(byte[] image, OutputStream outputStream, double quality,\r\n      String outputFormat) throws IOException {\r\n    ByteArrayInputStream inputStream = new ByteArrayInputStream(image);\r\n    Thumbnails.of(inputStream).scale(1).outputQuality(quality).\r\n        outputFormat(outputFormat).toOutputStream(outputStream);\r\n  }\r\n\r\n  public static byte[] compressor(InputStream image, double quality, String outputFormat)\r\n      throws IOException {\r\n    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n    Thumbnails.of(image).scale(1).outputQuality(quality).\r\n        outputFormat(outputFormat).toOutputStream(outputStream);\r\n    return outputStream.toByteArray();\r\n  }\r\n\r\n  public static byte[] compressor(byte[] image, double quality, String outputFormat) throws IOException {\r\n    ByteArrayInputStream inputStream = new ByteArrayInputStream(image);\r\n    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n    Thumbnails.of(inputStream).scale(1).outputQuality(quality).\r\n        outputFormat(outputFormat).toOutputStream(outputStream);\r\n    return outputStream.toByteArray();\r\n  }\r\n}\r\n```\r\nAmong these methods, we could see some duplicated params like `outputStream`,`quality`,`outputFormat`.\r\nHow to rewrite this class so that I can use this class like such patterns:\r\n```\r\n// no outputstream/quality/outputFormat specified, default values are used;\r\nImageCompressionUtil.compressor(image);\r\n\r\n// specifiy outputstream or quality or outputFormat\r\nImageCompressionUtil.compressor(image, outputstream);\r\nImageCompressionUtil.compressor(image).quality(quality);\r\nImageCompressionUtil.compressor(image).outputFormat(outputFormat);\r\n\r\n// both quality and outputFormat are specified\r\nImageCompressionUtil.compressor(image).quality(quality).outputFormat(outputFormat);\r\n\r\n...\r\n```","title":"design pattern: how to add optional params for methods?","body":"<p>I hava a util class:</p>\n<pre><code>public class ImageCompressionUtil {\n\n  public static void compressor(InputStream image, OutputStream outputStream, double quality,\n      String outputFormat) throws IOException {\n    Thumbnails.of(image).scale(1).outputQuality(quality).outputFormat(outputFormat).\n        toOutputStream(outputStream);\n  }\n\n  public static void compressor(byte[] image, OutputStream outputStream, double quality,\n      String outputFormat) throws IOException {\n    ByteArrayInputStream inputStream = new ByteArrayInputStream(image);\n    Thumbnails.of(inputStream).scale(1).outputQuality(quality).\n        outputFormat(outputFormat).toOutputStream(outputStream);\n  }\n\n  public static byte[] compressor(InputStream image, double quality, String outputFormat)\n      throws IOException {\n    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n    Thumbnails.of(image).scale(1).outputQuality(quality).\n        outputFormat(outputFormat).toOutputStream(outputStream);\n    return outputStream.toByteArray();\n  }\n\n  public static byte[] compressor(byte[] image, double quality, String outputFormat) throws IOException {\n    ByteArrayInputStream inputStream = new ByteArrayInputStream(image);\n    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n    Thumbnails.of(inputStream).scale(1).outputQuality(quality).\n        outputFormat(outputFormat).toOutputStream(outputStream);\n    return outputStream.toByteArray();\n  }\n}\n</code></pre>\n<p>Among these methods, we could see some duplicated params like <code>outputStream</code>,<code>quality</code>,<code>outputFormat</code>.\nHow to rewrite this class so that I can use this class like such patterns:</p>\n<pre><code>// no outputstream/quality/outputFormat specified, default values are used;\nImageCompressionUtil.compressor(image);\n\n// specifiy outputstream or quality or outputFormat\nImageCompressionUtil.compressor(image, outputstream);\nImageCompressionUtil.compressor(image).quality(quality);\nImageCompressionUtil.compressor(image).outputFormat(outputFormat);\n\n// both quality and outputFormat are specified\nImageCompressionUtil.compressor(image).quality(quality).outputFormat(outputFormat);\n\n...\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":5559956,"reputation":13819,"user_id":9840318,"display_name":"Madhu Bhat"},"score":1,"creation_date":1535642355,"post_id":52100384,"comment_id":91151624,"body_markdown":"Why are you running tests in prod? Is it a prod-like build environment? Coz you need to run tests only on build right?","body":"Why are you running tests in prod? Is it a prod-like build environment? Coz you need to run tests only on build right?"},{"owner":{"account_id":5559956,"reputation":13819,"user_id":9840318,"display_name":"Madhu Bhat"},"score":0,"creation_date":1535642684,"post_id":52100384,"comment_id":91151830,"body_markdown":"To find out if it&#39;s prod environment or not, you might need to use an environment variable or have another property in your config to specify the environment and then set the active profile for the test accordingly. Doesn&#39;t look like a good design to run tests in prod though.","body":"To find out if it&#39;s prod environment or not, you might need to use an environment variable or have another property in your config to specify the environment and then set the active profile for the test accordingly. Doesn&#39;t look like a good design to run tests in prod though."},{"owner":{"account_id":3450311,"reputation":137,"user_id":2890126,"accept_rate":40,"display_name":"smastika"},"score":0,"creation_date":1535642691,"post_id":52100384,"comment_id":91151835,"body_markdown":"Sorry I forgot to mention that it is a Maven project so the tests will be run when building and this will not happen on my machine. I just want to skip needing to change settings on my machine while developing locally :)","body":"Sorry I forgot to mention that it is a Maven project so the tests will be run when building and this will not happen on my machine. I just want to skip needing to change settings on my machine while developing locally :)"},{"owner":{"account_id":5559956,"reputation":13819,"user_id":9840318,"display_name":"Madhu Bhat"},"score":0,"creation_date":1535643095,"post_id":52100384,"comment_id":91152089,"body_markdown":"For your requirement, it is advisable not to dynamically set the @ActiveProfile as it would be kind of a hack and unnecessary config that you would need to add.","body":"For your requirement, it is advisable not to dynamically set the @ActiveProfile as it would be kind of a hack and unnecessary config that you would need to add."},{"owner":{"account_id":3450311,"reputation":137,"user_id":2890126,"accept_rate":40,"display_name":"smastika"},"score":0,"creation_date":1535643292,"post_id":52100384,"comment_id":91152205,"body_markdown":"I see, any suggestions then? Because I can add a .properties file for my test profile that points at the mongoserver, that works fine but I would need to outcomment it everytime I want to run tests on my local machine (Or thats what I can come up with right now at least :)).","body":"I see, any suggestions then? Because I can add a .properties file for my test profile that points at the mongoserver, that works fine but I would need to outcomment it everytime I want to run tests on my local machine (Or thats what I can come up with right now at least :))."},{"owner":{"account_id":5559956,"reputation":13819,"user_id":9840318,"display_name":"Madhu Bhat"},"score":0,"creation_date":1535643535,"post_id":52100384,"comment_id":91152328,"body_markdown":"Yes that&#39;s what would be advisable. Have a profile with local Mongo server and another with the prod Mongo server. Commit the code with the the prod test profile, but locally use the local test profile. See my answer :)","body":"Yes that&#39;s what would be advisable. Have a profile with local Mongo server and another with the prod Mongo server. Commit the code with the the prod test profile, but locally use the local test profile. See my answer :)"},{"owner":{"account_id":3450311,"reputation":137,"user_id":2890126,"accept_rate":40,"display_name":"smastika"},"score":0,"creation_date":1535644783,"post_id":52100384,"comment_id":91153162,"body_markdown":"ok I will, just waiting a bit more to see if something genius pops up otherwise I&#39;ll accept :) Thanks!","body":"ok I will, just waiting a bit more to see if something genius pops up otherwise I&#39;ll accept :) Thanks!"},{"owner":{"account_id":5559956,"reputation":13819,"user_id":9840318,"display_name":"Madhu Bhat"},"score":0,"creation_date":1535645024,"post_id":52100384,"comment_id":91153294,"body_markdown":"Sure that&#39;s better :)","body":"Sure that&#39;s better :)"}],"answers":[{"tags":[],"owner":{"account_id":6365827,"reputation":3652,"user_id":4939853,"accept_rate":69,"display_name":"Oreste Viron"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1535642478,"creation_date":1535642478,"answer_id":52100513,"question_id":52100384,"body_markdown":"Maybe you can use environment variables. Instead of providing an url in your application-test.yaml, define a variable like : ${MONGO_TEST_URL}\r\n\r\nYou will be able to run your jar using java -jar -DMONGO_TEST_URL=localhost or whatever address you want to use.","title":"Conditionally set @Activeprofile before database test in spring boot","body":"<p>Maybe you can use environment variables. Instead of providing an url in your application-test.yaml, define a variable like : ${MONGO_TEST_URL}</p>\n\n<p>You will be able to run your jar using java -jar -DMONGO_TEST_URL=localhost or whatever address you want to use.</p>\n"},{"tags":[],"owner":{"account_id":5559956,"reputation":13819,"user_id":9840318,"display_name":"Madhu Bhat"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1535643339,"creation_date":1535643339,"answer_id":52100761,"question_id":52100384,"body_markdown":"It is not advisable to dynamically change the @ActiveProfile based on the environment since it would need you to add extra config to find out which environment it is and set the @ActiveProfile for the tests based on that. The extra config and work that you do would not be a good design and would be unnecessary. If running the tests on your local is the only hiccup, I would advise you to always set the @ActiveProfile to `test-prod` and change it locally to `test` whenever you are developing on your machine. Do be careful not to commit the local @ActiveProfile though :) ","title":"Conditionally set @Activeprofile before database test in spring boot","body":"<p>It is not advisable to dynamically change the @ActiveProfile based on the environment since it would need you to add extra config to find out which environment it is and set the @ActiveProfile for the tests based on that. The extra config and work that you do would not be a good design and would be unnecessary. If running the tests on your local is the only hiccup, I would advise you to always set the @ActiveProfile to <code>test-prod</code> and change it locally to <code>test</code> whenever you are developing on your machine. Do be careful not to commit the local @ActiveProfile though :) </p>\n"},{"tags":[],"owner":{"account_id":2573819,"reputation":15175,"user_id":2231972,"display_name":"Roman-Stop RU aggression in UA"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1535665250,"creation_date":1535645963,"answer_id":52101540,"question_id":52100384,"body_markdown":"You can use resolver to dynamically set profile based on for example environment variable\r\n\r\n    @ActiveProfiles(resolver = MyActiveProfileResolver.class)\r\n    class MyTest { ... }\r\n\r\nAnd profile resolver:\r\n\r\n    public class MyActiveProfilesResolver  implements ActiveProfilesResolver{\r\n      @Override\r\n      public String[] resolve(Class&lt;?&gt; testClass) {\r\n          Map&lt;String, String&gt; env =  System.getenv();\r\n          String profile;\r\n          if (env.hasKey(&quot;TEST_ENV&quot;)) {\r\n              profile = env.get(&quot;TEST_ENV&quot;);\r\n          } else {\r\n              profile = &quot;local-test&quot;; // it is more convenient to to have this as default to be used in dev env and override it on test env\r\n          }\r\n          return new String[]{profile};\r\n      }\r\n    }\r\n\r\nCreate three profiles `test`, `local-test` and `prod`. Resolver should return `test` or `local-test` depending on the env variable `TEST_ENV`.","title":"Conditionally set @Activeprofile before database test in spring boot","body":"<p>You can use resolver to dynamically set profile based on for example environment variable</p>\n\n<pre><code>@ActiveProfiles(resolver = MyActiveProfileResolver.class)\nclass MyTest { ... }\n</code></pre>\n\n<p>And profile resolver:</p>\n\n<pre><code>public class MyActiveProfilesResolver  implements ActiveProfilesResolver{\n  @Override\n  public String[] resolve(Class&lt;?&gt; testClass) {\n      Map&lt;String, String&gt; env =  System.getenv();\n      String profile;\n      if (env.hasKey(\"TEST_ENV\")) {\n          profile = env.get(\"TEST_ENV\");\n      } else {\n          profile = \"local-test\"; // it is more convenient to to have this as default to be used in dev env and override it on test env\n      }\n      return new String[]{profile};\n  }\n}\n</code></pre>\n\n<p>Create three profiles <code>test</code>, <code>local-test</code> and <code>prod</code>. Resolver should return <code>test</code> or <code>local-test</code> depending on the env variable <code>TEST_ENV</code>.</p>\n"},{"tags":[],"owner":{"account_id":8915876,"reputation":3560,"user_id":6654475,"accept_rate":100,"display_name":"Francislainy Campos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640069353,"creation_date":1640069353,"answer_id":70431599,"question_id":52100384,"body_markdown":"Same as [@romal&#39;s answer][1] but a bit smaller, using `System.getProperty()` instead of `getEnv()`.\r\n\r\n    @ActiveProfiles(resolver = MyActiveProfileResolver.class)\r\n    class MyTest { ... }\r\n\r\nAnd\r\n\r\n    public class MyActiveProfileResolver implements ActiveProfilesResolver {\r\n        @NotNull\r\n        @Override\r\n        public String[] resolve(@NotNull Class&lt;?&gt; testClass) {\r\n            return new String[]{System.getProperty(&quot;testEnvt&quot;, &quot;dev&quot;)};\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/52101540/6654475","title":"Conditionally set @Activeprofile before database test in spring boot","body":"<p>Same as <a href=\"https://stackoverflow.com/a/52101540/6654475\">@romal's answer</a> but a bit smaller, using <code>System.getProperty()</code> instead of <code>getEnv()</code>.</p>\n<pre><code>@ActiveProfiles(resolver = MyActiveProfileResolver.class)\nclass MyTest { ... }\n</code></pre>\n<p>And</p>\n<pre><code>public class MyActiveProfileResolver implements ActiveProfilesResolver {\n    @NotNull\n    @Override\n    public String[] resolve(@NotNull Class&lt;?&gt; testClass) {\n        return new String[]{System.getProperty(&quot;testEnvt&quot;, &quot;dev&quot;)};\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3450311,"reputation":137,"user_id":2890126,"accept_rate":40,"display_name":"smastika"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1579,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":52101540,"answer_count":4,"score":3,"last_activity_date":1640069353,"creation_date":1535641968,"question_id":52100384,"body_markdown":"I have a spring-boot application with a test class that tests some crud operations and services against my mongodb. Until now everything was done on my machine (mongo was on localhost). When running tests I set the active profile to &quot;test&quot; to skip some authentication methods used in my services. Right now we are setting up a prod environment where mongo is on a dedicated server and I have setup different profiles using different application.properties files. That part works fine but when running the tests on the hosted environment the tests fail because mongo is not on localhost. I looked around a lot for some kind of solution.\r\n\r\nMy idea is to somehow before the tests are run to check if the active profile is &quot;prod&quot; and then set the active profile to something like &quot;test-prod&quot; that uses the hosted mongo, and if the active profile is &quot;default or dev&quot; set active profile to &quot;test&quot; that runs against localhost.\r\n\r\nAny ideas or solutions would be much appreciated.","title":"Conditionally set @Activeprofile before database test in spring boot","body":"<p>I have a spring-boot application with a test class that tests some crud operations and services against my mongodb. Until now everything was done on my machine (mongo was on localhost). When running tests I set the active profile to \"test\" to skip some authentication methods used in my services. Right now we are setting up a prod environment where mongo is on a dedicated server and I have setup different profiles using different application.properties files. That part works fine but when running the tests on the hosted environment the tests fail because mongo is not on localhost. I looked around a lot for some kind of solution.</p>\n\n<p>My idea is to somehow before the tests are run to check if the active profile is \"prod\" and then set the active profile to something like \"test-prod\" that uses the hosted mongo, and if the active profile is \"default or dev\" set active profile to \"test\" that runs against localhost.</p>\n\n<p>Any ideas or solutions would be much appreciated.</p>\n"},{"tags":["java","eclipse","debugging"],"comments":[{"owner":{"account_id":3159259,"reputation":109668,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1639761644,"post_id":70396044,"comment_id":124439635,"body_markdown":"You appear to be making copies of the two objects (p1, p2) - are the copies making deep copies of the `coefficients` map? You are then removing entries from the map, if you haven&#39;t make a deep copy you are removing the values from the original maps as well. You really need to show a [mre] that people can actually test.","body":"You appear to be making copies of the two objects (p1, p2) - are the copies making deep copies of the <code>coefficients</code> map? You are then removing entries from the map, if you haven&#39;t make a deep copy you are removing the values from the original maps as well. You really need to show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that people can actually test."},{"owner":{"account_id":21299102,"reputation":39,"user_id":15675174,"display_name":"Flyleaf"},"score":0,"creation_date":1639762567,"post_id":70396044,"comment_id":124439947,"body_markdown":"yes, these are deep copies as i would change the polynomials value if i were to remove values from the original map\nthis whole project is fairly large... over 10 files and the ones talked about are over 300 lines each\nand the thing is, i cannot recreate it at all \ni know this indicates that the issue is most likely somewhere else... but still im not sure what to do\nid add a minimal example as u suggested if ill find a way to recreate the issue but i doubt ill be able to as ive been trying for the past 4 hours with no success","body":"yes, these are deep copies as i would change the polynomials value if i were to remove values from the original map this whole project is fairly large... over 10 files and the ones talked about are over 300 lines each and the thing is, i cannot recreate it at all  i know this indicates that the issue is most likely somewhere else... but still im not sure what to do id add a minimal example as u suggested if ill find a way to recreate the issue but i doubt ill be able to as ive been trying for the past 4 hours with no success"}],"answers":[{"tags":[],"owner":{"account_id":21299102,"reputation":39,"user_id":15675174,"display_name":"Flyleaf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640069000,"creation_date":1640049959,"answer_id":70429729,"question_id":70396044,"body_markdown":"My mistake was making `.toString()` change the state of the object so the debugger didn&#39;t tell the whole story.\r\n\r\nThanks a lot guys!","title":"different sort outcome(SortedSet) in debug mode vs normal run","body":"<p>My mistake was making <code>.toString()</code> change the state of the object so the debugger didn't tell the whole story.</p>\n<p>Thanks a lot guys!</p>\n"}],"owner":{"account_id":21299102,"reputation":39,"user_id":15675174,"display_name":"Flyleaf"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70429729,"answer_count":1,"score":0,"last_activity_date":1640069000,"creation_date":1639757963,"question_id":70396044,"body_markdown":"so i wrote a comparator to sort out objects of the type Polynom (polynomials but in my lang basically). when i iterate slowly over it with a debugger i seem to get the result im expecting. yet when i run it, one of them craps out and returns the wrong value in the comparison which should be very straight forward.\r\n\r\nthe Polynom object is as follows:\r\n\r\n    public class Polynom&lt;E&gt; implements IPolynom&lt;E&gt; , Comparable&lt;Polynom&lt;E&gt;&gt;{\r\n\t    private SortedMap&lt;Integer, FieldMember&lt;E&gt;&gt; coefficients = new TreeMap&lt;&gt;();\r\n\r\nwhile IPolynom is just an interface to define the methods\r\nE can be either a complex number (which i also wrote and includes its methods and two fields real and image but its irrelevant to the error) \r\n\r\n    \tpublic int compareTo(Polynom&lt;E&gt; o) {\r\n\t\tPolynom&lt;E&gt; p1 = new Polynom&lt;&gt;(this);\r\n\t\tPolynom&lt;E&gt; p2 = new Polynom&lt;&gt;(o);\r\n\t\tint deg,co;\r\n\t\twhile(!p1.coefficients.isEmpty() &amp;&amp; !p2.coefficients.isEmpty())\r\n\t\t{\r\n\t\tdeg = p1.degree() - p2.degree();\r\n\t\tif(deg != 0)\r\n\t\t\treturn deg;\r\n\t\tco = p1.getCoefficient(p1.degree()).compareTo(p2.getCoefficient(p2.degree()));\r\n\t\tif(co != 0)\r\n\t\t\treturn co;\r\n\t\tp1.coefficients.remove(p1.degree());\r\n\t\tp2.coefficients.remove(p2.degree());\r\n\t\t\r\n\t\t}\r\n\t\treturn (p1.degree() - p2.degree());\r\n\t}\r\nthis is the compareTo method that i wrote\r\nand the method degree() simply returns the degree of x in this scenario\r\nthe coefficient part is never reached in this example so ill skip over it\r\nthe objects being compared are as follows: \r\n\r\np1 = Polynom: (1.00+0.00i)x^5\r\n\r\np2 = Polynom: (-1.00-5.00i)x^7\r\n\r\n\r\nthe comparison should be straight forward and indicate that p2 is greater than p1\r\nhowever when i run the opposite is returned\r\nwhen i debug (and specifically iterate over the lines as they happen) the method returns the correct result. if i skip over it even in debug it still returns the wrong result\r\nin my main method im adding a bunch of Polynom&lt;Complex&gt; type objects to a SortedSet and the ordering turns out to be wrong only on a single object (the one being p1 in this case which should be the &quot;smallest&quot; of them and go first up in the sorted set)\r\nim really at loss here... \r\n\r\nplease tell me if theres any other details that i need to add that would make the situation clearer as this is a fairly large project\r\n\r\np.s. all of this is done in eclipse (without any extensions)","title":"different sort outcome(SortedSet) in debug mode vs normal run","body":"<p>so i wrote a comparator to sort out objects of the type Polynom (polynomials but in my lang basically). when i iterate slowly over it with a debugger i seem to get the result im expecting. yet when i run it, one of them craps out and returns the wrong value in the comparison which should be very straight forward.</p>\n<p>the Polynom object is as follows:</p>\n<pre><code>public class Polynom&lt;E&gt; implements IPolynom&lt;E&gt; , Comparable&lt;Polynom&lt;E&gt;&gt;{\n    private SortedMap&lt;Integer, FieldMember&lt;E&gt;&gt; coefficients = new TreeMap&lt;&gt;();\n</code></pre>\n<p>while IPolynom is just an interface to define the methods\nE can be either a complex number (which i also wrote and includes its methods and two fields real and image but its irrelevant to the error)</p>\n<pre><code>    public int compareTo(Polynom&lt;E&gt; o) {\n    Polynom&lt;E&gt; p1 = new Polynom&lt;&gt;(this);\n    Polynom&lt;E&gt; p2 = new Polynom&lt;&gt;(o);\n    int deg,co;\n    while(!p1.coefficients.isEmpty() &amp;&amp; !p2.coefficients.isEmpty())\n    {\n    deg = p1.degree() - p2.degree();\n    if(deg != 0)\n        return deg;\n    co = p1.getCoefficient(p1.degree()).compareTo(p2.getCoefficient(p2.degree()));\n    if(co != 0)\n        return co;\n    p1.coefficients.remove(p1.degree());\n    p2.coefficients.remove(p2.degree());\n    \n    }\n    return (p1.degree() - p2.degree());\n}\n</code></pre>\n<p>this is the compareTo method that i wrote\nand the method degree() simply returns the degree of x in this scenario\nthe coefficient part is never reached in this example so ill skip over it\nthe objects being compared are as follows:</p>\n<p>p1 = Polynom: (1.00+0.00i)x^5</p>\n<p>p2 = Polynom: (-1.00-5.00i)x^7</p>\n<p>the comparison should be straight forward and indicate that p2 is greater than p1\nhowever when i run the opposite is returned\nwhen i debug (and specifically iterate over the lines as they happen) the method returns the correct result. if i skip over it even in debug it still returns the wrong result\nin my main method im adding a bunch of Polynom type objects to a SortedSet and the ordering turns out to be wrong only on a single object (the one being p1 in this case which should be the &quot;smallest&quot; of them and go first up in the sorted set)\nim really at loss here...</p>\n<p>please tell me if theres any other details that i need to add that would make the situation clearer as this is a fairly large project</p>\n<p>p.s. all of this is done in eclipse (without any extensions)</p>\n"},{"tags":["java","serialization"],"comments":[{"owner":{"account_id":7608172,"reputation":715,"user_id":5770084,"display_name":"whiplash"},"score":0,"creation_date":1640071465,"post_id":70431414,"comment_id":124501967,"body_markdown":"You might as well write `while(true)`. At least saves a CPU cycle by not having to perform the actual `1 != 2` evaluation every time. This looks like it might result in an infinite loop which gets broken when no more objects are left to read leading to an Exception which you catch. This is not a good approach. You might end up quitting for any Exception and you will not know what went wrong.","body":"You might as well write <code>while(true)</code>. At least saves a CPU cycle by not having to perform the actual <code>1 != 2</code> evaluation every time. This looks like it might result in an infinite loop which gets broken when no more objects are left to read leading to an Exception which you catch. This is not a good approach. You might end up quitting for any Exception and you will not know what went wrong."}],"answers":[{"tags":[],"owner":{"account_id":10481421,"reputation":1559,"user_id":7726319,"accept_rate":0,"display_name":"Prog_G"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1640068873,"creation_date":1640068873,"answer_id":70431536,"question_id":70431414,"body_markdown":"You can use java [Generics][1]. Please find the code below:\r\n\r\n    public static &lt;T&gt; ArrayList&lt;T&gt; ReadProducts(String fileName, Class&lt;T&gt; t) {\r\n            ArrayList p = null;\r\n            try {\r\n                ObjectInputStream in = new ObjectInputStream(\r\n                        new BufferedInputStream(\r\n                                new FileInputStream(fileName)));\r\n                p = new ArrayList&lt;T&gt;();\r\n    \r\n                while (1 != 2) {\r\n                    p.add(t.cast(in.readObject()));\r\n                }\r\n            } catch (Exception e) {\r\n                ;\r\n            }\r\n            return p;\r\n        }\r\n\r\n\r\n\r\n  [1]: https://www.tutorialspoint.com/java/java_generics.htm","title":"Java - Passing a class to a function","body":"<p>You can use java <a href=\"https://www.tutorialspoint.com/java/java_generics.htm\" rel=\"nofollow noreferrer\">Generics</a>. Please find the code below:</p>\n<pre><code>public static &lt;T&gt; ArrayList&lt;T&gt; ReadProducts(String fileName, Class&lt;T&gt; t) {\n        ArrayList p = null;\n        try {\n            ObjectInputStream in = new ObjectInputStream(\n                    new BufferedInputStream(\n                            new FileInputStream(fileName)));\n            p = new ArrayList&lt;T&gt;();\n\n            while (1 != 2) {\n                p.add(t.cast(in.readObject()));\n            }\n        } catch (Exception e) {\n            ;\n        }\n        return p;\n    }\n</code></pre>\n"}],"owner":{"account_id":22310675,"reputation":349,"user_id":16534694,"display_name":"Ryan Fu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":70431536,"answer_count":1,"score":-1,"last_activity_date":1640068873,"creation_date":1640068029,"question_id":70431414,"body_markdown":"I&#39;m implementing serialization, and am trying to make everything as modular as possible. When reading objects from files, I&#39;m trying to use just one function to pass everything to an ArrayList, or something of that sort. Currently I&#39;m doing something like this:\r\n\r\n    public static ArrayList&lt;Class1&gt; ReadClass1(String fileName) {\r\n    \tArrayList p = null;\r\n        try {\r\n        \tObjectInputStream in = new ObjectInputStream(\r\n                    new BufferedInputStream(\r\n                            new FileInputStream(fileName)));\r\n        \tp = new ArrayList&lt;Class1&gt;();\r\n        \twhile (1 != 2) {\r\n        \t\tp.add((Class1) in.readObject());\r\n        \t}\r\n        } catch (Exception e) {\r\n        \t;\r\n        }\r\n        \r\n        return p;\r\n\r\n    }\r\n\r\nHowever, I want to read other classes, let&#39;s say ```Class2``` or ```Class3```, and right now I&#39;m copy-pasting the code and just editing everything that says &quot;Class1&quot; to &quot;Class2&quot;. Is there a way to pass in a specific type I want to use, like this?\r\n\r\n    public static ArrayList&lt;myClass&gt; ReadProducts(String fileName, myClass) { //where myClass is a class\r\n    \tArrayList p = null;\r\n        try {\r\n        \tObjectInputStream in = new ObjectInputStream(\r\n                    new BufferedInputStream(\r\n                            new FileInputStream(fileName)));\r\n        \tp = new ArrayList&lt;myClass&gt;();\r\n        \twhile (1 != 2) {\r\n        \t\tp.add((myClass) in.readObject());\r\n        \t}\r\n        } catch (Exception e) {\r\n        \t;\r\n        }\r\n        \r\n        return p;\r\n\r\n    }\r\n\r\nSo that I could reuse the function for different classes?","title":"Java - Passing a class to a function","body":"<p>I'm implementing serialization, and am trying to make everything as modular as possible. When reading objects from files, I'm trying to use just one function to pass everything to an ArrayList, or something of that sort. Currently I'm doing something like this:</p>\n<pre><code>public static ArrayList&lt;Class1&gt; ReadClass1(String fileName) {\n    ArrayList p = null;\n    try {\n        ObjectInputStream in = new ObjectInputStream(\n                new BufferedInputStream(\n                        new FileInputStream(fileName)));\n        p = new ArrayList&lt;Class1&gt;();\n        while (1 != 2) {\n            p.add((Class1) in.readObject());\n        }\n    } catch (Exception e) {\n        ;\n    }\n    \n    return p;\n\n}\n</code></pre>\n<p>However, I want to read other classes, let's say <code>Class2</code> or <code>Class3</code>, and right now I'm copy-pasting the code and just editing everything that says &quot;Class1&quot; to &quot;Class2&quot;. Is there a way to pass in a specific type I want to use, like this?</p>\n<pre><code>public static ArrayList&lt;myClass&gt; ReadProducts(String fileName, myClass) { //where myClass is a class\n    ArrayList p = null;\n    try {\n        ObjectInputStream in = new ObjectInputStream(\n                new BufferedInputStream(\n                        new FileInputStream(fileName)));\n        p = new ArrayList&lt;myClass&gt;();\n        while (1 != 2) {\n            p.add((myClass) in.readObject());\n        }\n    } catch (Exception e) {\n        ;\n    }\n    \n    return p;\n\n}\n</code></pre>\n<p>So that I could reuse the function for different classes?</p>\n"},{"tags":["java","focus","tableview","javafx-8","treetableview"],"comments":[{"owner":{"account_id":348041,"reputation":48805,"user_id":682495,"accept_rate":77,"display_name":"Uluk Biy"},"score":0,"creation_date":1405083044,"post_id":24694616,"comment_id":38299199,"body_markdown":"The linked tutorial and the official tableview example (Example 12-11 Alternative Solution Of Cell Editing) use the approach of adding listener to textField.focusedProperty(). What do you mean by that approach is not working as I hoped? And which &quot;editingProperty&quot; are you mentioning?","body":"The linked tutorial and the official tableview example (Example 12-11 Alternative Solution Of Cell Editing) use the approach of adding listener to textField.focusedProperty(). What do you mean by that approach is not working as I hoped? And which &quot;editingProperty&quot; are you mentioning?"},{"owner":{"account_id":72918,"reputation":6140,"user_id":210290,"accept_rate":85,"display_name":"crusam"},"score":0,"creation_date":1405084369,"post_id":24694616,"comment_id":38300023,"body_markdown":"The offical example is unfortunatly not working (at least since 8u5). The value is only commited, when you leave the cell with pressing enter, but not due to focus lost. With not working as I hoped I just mean it doens`t work at all. It just sets the old value back again when focus is lost instead of commiting the value.","body":"The offical example is unfortunatly not working (at least since 8u5). The value is only commited, when you leave the cell with pressing enter, but not due to focus lost. With not working as I hoped I just mean it doens`t work at all. It just sets the old value back again when focus is lost instead of commiting the value."},{"owner":{"account_id":72918,"reputation":6140,"user_id":210290,"accept_rate":85,"display_name":"crusam"},"score":0,"creation_date":1405084517,"post_id":24694616,"comment_id":38300115,"body_markdown":"the reason is (at least I believe that) the editing Property, which is already set to editing=false, when focus is lost. therefore commitEdit can never succeed, since the cell wont be in editing state anymore. Editing is a boolean property of javafx.scene.control.Cell and therefore inherited to all Cell-Implementations (see for example at the first if-check in commitEdit()).","body":"the reason is (at least I believe that) the editing Property, which is already set to editing=false, when focus is lost. therefore commitEdit can never succeed, since the cell wont be in editing state anymore. Editing is a boolean property of javafx.scene.control.Cell and therefore inherited to all Cell-Implementations (see for example at the first if-check in commitEdit())."},{"owner":{"account_id":348041,"reputation":48805,"user_id":682495,"accept_rate":77,"display_name":"Uluk Biy"},"score":0,"creation_date":1405087083,"post_id":24694616,"comment_id":38301849,"body_markdown":"I have tested the official Example 12-11 Alternative Solution Of Cell Editing on JavaFX 8.0.5-b13, and it is committing the changes on focus lost (But note that it is not committing if focus is lost by clicking another item of tableview, which another problem).","body":"I have tested the official Example 12-11 Alternative Solution Of Cell Editing on JavaFX 8.0.5-b13, and it is committing the changes on focus lost (But note that it is not committing if focus is lost by clicking another item of tableview, which another problem)."},{"owner":{"account_id":348041,"reputation":48805,"user_id":682495,"accept_rate":77,"display_name":"Uluk Biy"},"score":0,"creation_date":1405087152,"post_id":24694616,"comment_id":38301898,"body_markdown":"By the way I was on Win7. What is yours?","body":"By the way I was on Win7. What is yours?"},{"owner":{"account_id":72918,"reputation":6140,"user_id":210290,"accept_rate":85,"display_name":"crusam"},"score":0,"creation_date":1405094515,"post_id":24694616,"comment_id":38306564,"body_markdown":"First of all thanks for your interest. I am not sure, if I really understand the difference between committing the value due to loosing focus and loosing focus by clicking another item of tableview. Maybe I get something wrong, would you mind explaining the difference? The only thing I try to achieve is, whereever the user clicks in the application, while editing a cell, the tableview should try to commit the current value in the textfield and closing the editmode. I am also using Win7.","body":"First of all thanks for your interest. I am not sure, if I really understand the difference between committing the value due to loosing focus and loosing focus by clicking another item of tableview. Maybe I get something wrong, would you mind explaining the difference? The only thing I try to achieve is, whereever the user clicks in the application, while editing a cell, the tableview should try to commit the current value in the textfield and closing the editmode. I am also using Win7."},{"owner":{"account_id":348041,"reputation":48805,"user_id":682495,"accept_rate":77,"display_name":"Uluk Biy"},"score":0,"creation_date":1405101129,"post_id":24694616,"comment_id":38310028,"body_markdown":"Did you run Example 12-11? Double click the cell then edit it. Click to empty space (where there is no item) of tableview. The changes should be committed. Just to be sure, check the version of javafx by printing out the com.sun.javafx.runtime.VersionInfo.getRuntimeVersion();.","body":"Did you run Example 12-11? Double click the cell then edit it. Click to empty space (where there is no item) of tableview. The changes should be committed. Just to be sure, check the version of javafx by printing out the com.sun.javafx.runtime.VersionInfo.getRuntimeVersion();."},{"owner":{"account_id":72918,"reputation":6140,"user_id":210290,"accept_rate":85,"display_name":"crusam"},"score":0,"creation_date":1405102431,"post_id":24694616,"comment_id":38310654,"body_markdown":"Yeah, I did run it. But I am pretty sure I clicked a different cell instead of free space, will test it again as soon as I can. So what you are saying is: there is a difference between &quot;the user clicking on a empty space&quot; and &quot;the user clicks on a different cell of the table&quot;, while editing an entry of the tableview? Is there any possibility to handle these identical? I&#39;d like the tableview to react the same. In both cases, the table should try to commit the changes in the cell, no matter where the user is going to click next.","body":"Yeah, I did run it. But I am pretty sure I clicked a different cell instead of free space, will test it again as soon as I can. So what you are saying is: there is a difference between &quot;the user clicking on a empty space&quot; and &quot;the user clicks on a different cell of the table&quot;, while editing an entry of the tableview? Is there any possibility to handle these identical? I&#39;d like the tableview to react the same. In both cases, the table should try to commit the changes in the cell, no matter where the user is going to click next."},{"owner":{"account_id":1389321,"reputation":1564,"user_id":1320555,"accept_rate":77,"display_name":"user555"},"score":0,"creation_date":1405293993,"post_id":24694616,"comment_id":38357080,"body_markdown":"When one clicks outside the current cell `cancelEdit` gets called and calling `commitEdit` has no effect due to `TableCell.isEditing` returning false. Is your issue related to [mine](http://stackoverflow.com/questions/23632884/how-to-commit-when-clicking-outside-an-editable-tableview-cell-in-javafx)? There is a [jira issue](https://javafx-jira.kenai.com/browse/RT-18492) for something like this dating back to december 2011.","body":"When one clicks outside the current cell <code>cancelEdit</code> gets called and calling <code>commitEdit</code> has no effect due to <code>TableCell.isEditing</code> returning false. Is your issue related to <a href=\"http://stackoverflow.com/questions/23632884/how-to-commit-when-clicking-outside-an-editable-tableview-cell-in-javafx\">mine</a>? There is a <a href=\"https://javafx-jira.kenai.com/browse/RT-18492\" rel=\"nofollow noreferrer\">jira issue</a> for something like this dating back to december 2011."},{"owner":{"account_id":1389321,"reputation":1564,"user_id":1320555,"accept_rate":77,"display_name":"user555"},"score":0,"creation_date":1405294171,"post_id":24694616,"comment_id":38357115,"body_markdown":"I fail to understand why committing when clicking outside the cell is not the default method of the the tableView API. No table implementation I&#39;ve seen behaves in this way, not to mention how bad this is from a UI and usability perspective.","body":"I fail to understand why committing when clicking outside the cell is not the default method of the the tableView API. No table implementation I&#39;ve seen behaves in this way, not to mention how bad this is from a UI and usability perspective."},{"owner":{"account_id":72918,"reputation":6140,"user_id":210290,"accept_rate":85,"display_name":"crusam"},"score":0,"creation_date":1405326857,"post_id":24694616,"comment_id":38365882,"body_markdown":"You are right, I also can`t understand, why the default behaviour is chosen to be like this. Unfortunatly the focuslistener approach doest work anymore. I am not sure how to provide a satisfying user experience in this case. My current approach is not really the way to go there I think. Thank you for pointing me to the jira issue.","body":"You are right, I also can`t understand, why the default behaviour is chosen to be like this. Unfortunatly the focuslistener approach doest work anymore. I am not sure how to provide a satisfying user experience in this case. My current approach is not really the way to go there I think. Thank you for pointing me to the jira issue."}],"answers":[{"tags":[],"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1640061653,"creation_date":1407946336,"answer_id":25291137,"question_id":24694616,"body_markdown":"After some digging, turned out that the culprit (aka: the collaborator that cancels the edit before the textField looses focus) is the TableCellBehaviour/Base in its processing of a mousePressed: \r\n\r\n- mousePressed calls `simpleSelect(..)`\r\n- on detecting a single click it calls `edit(-1, null)`\r\n- which calls the same method on TableView\r\n- which sets its editingCell property to null\r\n- a tableCell listens to that property and reacts by canceling its own edit\r\n\r\nUnfortunately, a hackaround requires 3 collaborators\r\n\r\n- a TableView with additional api to terminate an edit\r\n- a TableCellBehaviour with overridden `simpleSelect(...)` that calls the additional api (instead of edit(-1..)) before calling super\r\n- a TableCell that is configured with the extended behaviour _and_ is aware of table&#39;s extended properties\r\n\r\nSome code snippets ([full code][1]) :\r\n\r\n    // on XTableView:\r\n    public void terminateEdit() {\r\n        if (!isEditing()) return;\r\n        // terminatingCell is a property that supporting TableCells can listen to\r\n        setTerminatingCell(getEditingCell());\r\n        if (isEditing()) throw new IllegalStateException(\r\n              &quot;expected editing to be terminated but was &quot; + getEditingCell());\r\n        setTerminatingCell(null);\r\n    }\r\n\r\n    // on XTableCellBehaviour: override simpleSelect\r\n    @Override\r\n    protected void simpleSelect(MouseEvent e) {\r\n        TableCell&lt;S, T&gt; cell = getControl();\r\n        TableView&lt;S&gt; table = cell.getTableColumn().getTableView();\r\n        if (table instanceof XTableView) {\r\n            ((XTableView&lt;S&gt;) table).terminateEdit();\r\n        }\r\n        super.simpleSelect(e);\r\n    }\r\n\r\n    // on XTextFieldTableCell - this method is called from listener\r\n    // to table&#39;s terminatingCell property\r\n    protected void terminateEdit(TablePosition&lt;S, ?&gt; newPosition) {\r\n        if (!isEditing() || !match(newPosition)) return;\r\n        commitEdit();\r\n    }\r\n    \r\n    protected void commitEdit() {\r\n        T edited = getConverter().fromString(myTextField.getText());\r\n        commitEdit(edited);\r\n    }\r\n\r\n    /**\r\n     * Implemented to create XTableCellSkin which supports terminating edits.\r\n     */\r\n    @Override\r\n    protected Skin&lt;?&gt; createDefaultSkin() {\r\n        return new XTableCellSkin&lt;S, T&gt;(this);\r\n    }\r\n\r\nNote: the implementation of TableCellBehaviour changed massively between jdk8u5 and jdk8u20 (joys of hacking - not fit for production use ;-) - the method to override in the latter is `handleClicks(..)` \r\n\r\nBTW: massive votingfor [JDK-8089514][2] (was RT-18492 in old jira) might speed up a core fix. Unfortunately, at least the author role is needed to vote/comment bugs in the new tracker.\r\n\r\n\r\n  [1]: https://github.com/kleopatra/swingempire-fx/blob/master/fx8-swingempire/src/java/de/swingempire/fx/scene/control/XTableView.java\r\n  [2]: https://bugs.openjdk.java.net/browse/JDK-8089514","title":"How to enable commit on focusLost for TableView/TreeTableView?","body":"<p>After some digging, turned out that the culprit (aka: the collaborator that cancels the edit before the textField looses focus) is the TableCellBehaviour/Base in its processing of a mousePressed:</p>\n<ul>\n<li>mousePressed calls <code>simpleSelect(..)</code></li>\n<li>on detecting a single click it calls <code>edit(-1, null)</code></li>\n<li>which calls the same method on TableView</li>\n<li>which sets its editingCell property to null</li>\n<li>a tableCell listens to that property and reacts by canceling its own edit</li>\n</ul>\n<p>Unfortunately, a hackaround requires 3 collaborators</p>\n<ul>\n<li>a TableView with additional api to terminate an edit</li>\n<li>a TableCellBehaviour with overridden <code>simpleSelect(...)</code> that calls the additional api (instead of edit(-1..)) before calling super</li>\n<li>a TableCell that is configured with the extended behaviour <em>and</em> is aware of table's extended properties</li>\n</ul>\n<p>Some code snippets (<a href=\"https://github.com/kleopatra/swingempire-fx/blob/master/fx8-swingempire/src/java/de/swingempire/fx/scene/control/XTableView.java\" rel=\"nofollow noreferrer\">full code</a>) :</p>\n<pre><code>// on XTableView:\npublic void terminateEdit() {\n    if (!isEditing()) return;\n    // terminatingCell is a property that supporting TableCells can listen to\n    setTerminatingCell(getEditingCell());\n    if (isEditing()) throw new IllegalStateException(\n          &quot;expected editing to be terminated but was &quot; + getEditingCell());\n    setTerminatingCell(null);\n}\n\n// on XTableCellBehaviour: override simpleSelect\n@Override\nprotected void simpleSelect(MouseEvent e) {\n    TableCell&lt;S, T&gt; cell = getControl();\n    TableView&lt;S&gt; table = cell.getTableColumn().getTableView();\n    if (table instanceof XTableView) {\n        ((XTableView&lt;S&gt;) table).terminateEdit();\n    }\n    super.simpleSelect(e);\n}\n\n// on XTextFieldTableCell - this method is called from listener\n// to table's terminatingCell property\nprotected void terminateEdit(TablePosition&lt;S, ?&gt; newPosition) {\n    if (!isEditing() || !match(newPosition)) return;\n    commitEdit();\n}\n\nprotected void commitEdit() {\n    T edited = getConverter().fromString(myTextField.getText());\n    commitEdit(edited);\n}\n\n/**\n * Implemented to create XTableCellSkin which supports terminating edits.\n */\n@Override\nprotected Skin&lt;?&gt; createDefaultSkin() {\n    return new XTableCellSkin&lt;S, T&gt;(this);\n}\n</code></pre>\n<p>Note: the implementation of TableCellBehaviour changed massively between jdk8u5 and jdk8u20 (joys of hacking - not fit for production use ;-) - the method to override in the latter is <code>handleClicks(..)</code></p>\n<p>BTW: massive votingfor <a href=\"https://bugs.openjdk.java.net/browse/JDK-8089514\" rel=\"nofollow noreferrer\">JDK-8089514</a> (was RT-18492 in old jira) might speed up a core fix. Unfortunately, at least the author role is needed to vote/comment bugs in the new tracker.</p>\n"},{"tags":[],"owner":{"account_id":5454893,"reputation":91,"user_id":4338629,"display_name":"keyo"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1418070219,"creation_date":1418065641,"answer_id":27365088,"question_id":24694616,"body_markdown":"I also needed this functionality and did some study. I faced some stability issues with XTableView hacking mentioned above.\r\n\r\nAs problem seems to be commitEdit() won&#39;t take effect when focus is lost, why you don&#39;t just call your own commit callback from TableCell as follows:\r\n\r\n    public class SimpleEditingTextTableCell extends TableCell {\r\n        private TextArea textArea;\r\n        Callback commitChange;\r\n    \r\n        public SimpleEditingTextTableCell(Callback commitChange) {\r\n            this.commitChange = commitChange;\r\n        }\r\n    \r\n        @Override\r\n        public void startEdit() {\r\n             ...\r\n    \r\n            getTextArea().focusedProperty().addListener(new ChangeListener&lt;Boolean&gt;() {\r\n                @Override\r\n                public void changed(ObservableValue&lt;? extends Boolean&gt; arg0, Boolean arg1, Boolean arg2) {\r\n                    if (!arg2) {\r\n                        //commitEdit is replaced with own callback\r\n                        //commitEdit(getTextArea().getText());\r\n                        \r\n                        //Update item now since otherwise, it won&#39;t get refreshed\r\n                        setItem(getTextArea().getText());\r\n                        //Example, provide TableRow and index to get Object of TableView in callback implementation\r\n                        commitChange.call(new TableCellChangeInfo(getTableRow(), getTableRow().getIndex(), getTextArea().getText()));\r\n                    }\r\n                }\r\n            });\r\n           ...\r\n        }\r\n        ...\r\n    }\r\n\r\nIn cell factory, you just store committed value to the object or do whatever necessary to make it permanent:\r\n\r\n\r\n    col.setCellFactory(new Callback&lt;TableColumn&lt;Object, String&gt;, TableCell&lt;Object, String&gt;&gt;() {\r\n                @Override\r\n                public TableCell&lt;Object, String&gt; call(TableColumn&lt;Object, String&gt; p) {\r\n                    return new SimpleEditingTextTableCell(cellChange -&gt; {\r\n                                TableCellChangeInfo changeInfo = (TableCellChangeInfo)cellChange;\r\n                                Object obj = myTableView.getItems().get(changeInfo.getRowIndex());\r\n                                //Save committed value to the object in tableview (and maybe to DB)\r\n                                obj.field = changeInfo.getChangedObj().toString();\r\n                                return true;\r\n                            });\r\n                }\r\n            });\r\n\r\nSo far, I have not been able to find any problems with this workaround. On the other hand, I haven&#39;t been yet done extensive testing on this either.\r\n\r\nEDIT: Well, after some testing noticed, the workaround was working well with big data in tableview but with empty tableview cell was not getting updated after focus lost, only when double clicking it again. There would be ways to refresh table view but that too much hacking for me...\r\n\r\nEDIT2: Added setItem(getTextArea().getText()); before calling callback -&gt; works with empty tableview as well.\r\n","title":"How to enable commit on focusLost for TableView/TreeTableView?","body":"<p>I also needed this functionality and did some study. I faced some stability issues with XTableView hacking mentioned above.</p>\n\n<p>As problem seems to be commitEdit() won't take effect when focus is lost, why you don't just call your own commit callback from TableCell as follows:</p>\n\n<pre><code>public class SimpleEditingTextTableCell extends TableCell {\n    private TextArea textArea;\n    Callback commitChange;\n\n    public SimpleEditingTextTableCell(Callback commitChange) {\n        this.commitChange = commitChange;\n    }\n\n    @Override\n    public void startEdit() {\n         ...\n\n        getTextArea().focusedProperty().addListener(new ChangeListener&lt;Boolean&gt;() {\n            @Override\n            public void changed(ObservableValue&lt;? extends Boolean&gt; arg0, Boolean arg1, Boolean arg2) {\n                if (!arg2) {\n                    //commitEdit is replaced with own callback\n                    //commitEdit(getTextArea().getText());\n\n                    //Update item now since otherwise, it won't get refreshed\n                    setItem(getTextArea().getText());\n                    //Example, provide TableRow and index to get Object of TableView in callback implementation\n                    commitChange.call(new TableCellChangeInfo(getTableRow(), getTableRow().getIndex(), getTextArea().getText()));\n                }\n            }\n        });\n       ...\n    }\n    ...\n}\n</code></pre>\n\n<p>In cell factory, you just store committed value to the object or do whatever necessary to make it permanent:</p>\n\n<pre><code>col.setCellFactory(new Callback&lt;TableColumn&lt;Object, String&gt;, TableCell&lt;Object, String&gt;&gt;() {\n            @Override\n            public TableCell&lt;Object, String&gt; call(TableColumn&lt;Object, String&gt; p) {\n                return new SimpleEditingTextTableCell(cellChange -&gt; {\n                            TableCellChangeInfo changeInfo = (TableCellChangeInfo)cellChange;\n                            Object obj = myTableView.getItems().get(changeInfo.getRowIndex());\n                            //Save committed value to the object in tableview (and maybe to DB)\n                            obj.field = changeInfo.getChangedObj().toString();\n                            return true;\n                        });\n            }\n        });\n</code></pre>\n\n<p>So far, I have not been able to find any problems with this workaround. On the other hand, I haven't been yet done extensive testing on this either.</p>\n\n<p>EDIT: Well, after some testing noticed, the workaround was working well with big data in tableview but with empty tableview cell was not getting updated after focus lost, only when double clicking it again. There would be ways to refresh table view but that too much hacking for me...</p>\n\n<p>EDIT2: Added setItem(getTextArea().getText()); before calling callback -> works with empty tableview as well.</p>\n"},{"tags":[],"owner":{"account_id":2835528,"reputation":1834,"user_id":2436221,"accept_rate":81,"display_name":"Jonatan Stenbacka"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1446120017,"creation_date":1446111802,"answer_id":33410688,"question_id":24694616,"body_markdown":"With reservation of this being a dumb suggestion. Seems too easy. But why don&#39;t you just override `TableCell#cancelEdit()` and save the values manually when it is invoked? When the cell loses focus, `cancelEdit()` is always invoked to cancel the edit.\r\n\r\n    class EditableCell extends TableCell&lt;ObservableList&lt;StringProperty&gt;, String&gt; {\r\n\r\n\t\tprivate TextField textfield = new TextField();\r\n\t\tprivate int colIndex;\r\n\t\tprivate String originalValue = null;\r\n\r\n\t\tpublic EditableCell(int colIndex) {\r\n\t\t\tthis.colIndex = colIndex;\r\n\t\t\ttextfield.prefHeightProperty().bind(heightProperty().subtract(2.0d));\r\n\t\t\tthis.setPadding(new Insets(0));\r\n\t\t\tthis.setAlignment(Pos.CENTER);\r\n\t\t\t\r\n\t\t\ttextfield.setOnAction(e -&gt; {\r\n\t\t\t\tcancelEdit();\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\ttextfield.setOnKeyPressed(e -&gt; {\r\n\t\t\t\tif (e.getCode().equals(KeyCode.ESCAPE)) {\r\n\t\t\t\t\ttextfield.setText(originalValue);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void updateItem(String item, boolean empty) {\r\n\t\t\tsuper.updateItem(item, empty);\r\n\t\t\tif (isEmpty()) {\r\n\t\t\t\tsetText(null);\r\n\t\t\t\tsetGraphic(null);\r\n\t\t\t} else {\r\n\t\t\t\tif (isEditing()) {\r\n\t\t\t\t\ttextfield.setText(item);\r\n\t\t\t\t\tsetGraphic(textfield);\r\n\t\t\t\t\tsetText(null);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetText(item);\r\n\t\t\t\t\tsetGraphic(null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void startEdit() {\r\n\t\t\tsuper.startEdit();\r\n\t\t\toriginalValue = getItem();\r\n\t\t\ttextfield.setText(getItem());\r\n\t\t\tsetGraphic(textfield);\r\n\t\t\tsetText(null);\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void cancelEdit() {\r\n\t\t\tsuper.cancelEdit();\r\n\t\t\tsetGraphic(null);\r\n\t\t\tsetText(textfield.getText());\r\n\t\t\tObservableList&lt;StringProperty&gt; row = getTableView().getItems().get(getIndex());\r\n\t\t\trow.get(colIndex).set(getText());\r\n\t\t}\r\n\t}\r\n\r\nI don&#39;t know. Maybe I&#39;m missing something. But it seems to work for me.\r\n\r\n**Update:** Added cancel edit functionality. You can now cancel the edit by pressing escape while focusing the text field. Also added so that you can save the edit by pressing enter while focusing the textfield.","title":"How to enable commit on focusLost for TableView/TreeTableView?","body":"<p>With reservation of this being a dumb suggestion. Seems too easy. But why don't you just override <code>TableCell#cancelEdit()</code> and save the values manually when it is invoked? When the cell loses focus, <code>cancelEdit()</code> is always invoked to cancel the edit.</p>\n\n<pre><code>class EditableCell extends TableCell&lt;ObservableList&lt;StringProperty&gt;, String&gt; {\n\n    private TextField textfield = new TextField();\n    private int colIndex;\n    private String originalValue = null;\n\n    public EditableCell(int colIndex) {\n        this.colIndex = colIndex;\n        textfield.prefHeightProperty().bind(heightProperty().subtract(2.0d));\n        this.setPadding(new Insets(0));\n        this.setAlignment(Pos.CENTER);\n\n        textfield.setOnAction(e -&gt; {\n            cancelEdit();\n        });\n\n        textfield.setOnKeyPressed(e -&gt; {\n            if (e.getCode().equals(KeyCode.ESCAPE)) {\n                textfield.setText(originalValue);\n            }\n        });\n    }\n\n    @Override\n    public void updateItem(String item, boolean empty) {\n        super.updateItem(item, empty);\n        if (isEmpty()) {\n            setText(null);\n            setGraphic(null);\n        } else {\n            if (isEditing()) {\n                textfield.setText(item);\n                setGraphic(textfield);\n                setText(null);\n            } else {\n                setText(item);\n                setGraphic(null);\n            }\n        }\n    }\n\n    @Override\n    public void startEdit() {\n        super.startEdit();\n        originalValue = getItem();\n        textfield.setText(getItem());\n        setGraphic(textfield);\n        setText(null);\n    }\n\n    @Override\n    public void cancelEdit() {\n        super.cancelEdit();\n        setGraphic(null);\n        setText(textfield.getText());\n        ObservableList&lt;StringProperty&gt; row = getTableView().getItems().get(getIndex());\n        row.get(colIndex).set(getText());\n    }\n}\n</code></pre>\n\n<p>I don't know. Maybe I'm missing something. But it seems to work for me.</p>\n\n<p><strong>Update:</strong> Added cancel edit functionality. You can now cancel the edit by pressing escape while focusing the text field. Also added so that you can save the edit by pressing enter while focusing the textfield.</p>\n"},{"tags":[],"owner":{"account_id":2487644,"reputation":19,"user_id":2165790,"display_name":"A. Karali"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593635121,"creation_date":1458206243,"answer_id":36056150,"question_id":24694616,"body_markdown":"Since `TextFieldTableCell` is missing functionality (as reckoned in the [JDK bug tracker][1]), an alternative solution may work. Forget about `TextFieldTableCell` and use a custom `TableCell` class with a `TextField` in it. The custom `TableCell`:\r\n\r\n    public class CommentCell extends TableCell&lt;ListItem, String&gt; {\r\n    \r\n        private final TextField comment = new TextField();\r\n    \r\n        public CommentCell() {\r\n            this.comment.setMaxWidth( Integer.MAX_VALUE );\r\n            this.comment.setDisable( true );\r\n            this.comment.focusedProperty().addListener( new ChangeListener&lt;Boolean&gt;() {\r\n                @Override\r\n                public void changed( ObservableValue&lt;? extends Boolean&gt; arg0, Boolean oldPropertyValue,\r\n                        Boolean newPropertyValue ) {\r\n                    if ( !newPropertyValue ) {\r\n                        // Binding the TextField text to the model\r\n                        MainController.getInstance().setComment( getTableRow().getIndex(), comment.getText() );\r\n                    }\r\n                }\r\n            } );\r\n            this.setGraphic( this.comment );\r\n        }\r\n    \r\n        @Override\r\n        protected void updateItem( String s, boolean empty ) {\r\n            // Checking if the TextField should be editable (based on model condition)\r\n            if ( MainController.getInstance().isDependency( getTableRow().getIndex() ) ) {\r\n                this.comment.setDisable( false );\r\n                this.comment.setEditable( true );\r\n            }\r\n            // Setting the model value as the text for the TextField\r\n            if ( s != null &amp;&amp; !s.isEmpty() ) {\r\n                this.comment.setText( s );\r\n            }\r\n        }\r\n    }\r\n\r\nThe UI display might differ from a `TextFieldTableCell` but at least, it allows for better usability:\r\n\r\n[UI Display][2]\r\n\r\n\r\n  [1]: https://bugs.openjdk.java.net/browse/JDK-8089514\r\n  [2]: http://i.stack.imgur.com/u4aRn.png","title":"How to enable commit on focusLost for TableView/TreeTableView?","body":"<p>Since <code>TextFieldTableCell</code> is missing functionality (as reckoned in the <a href=\"https://bugs.openjdk.java.net/browse/JDK-8089514\" rel=\"nofollow noreferrer\">JDK bug tracker</a>), an alternative solution may work. Forget about <code>TextFieldTableCell</code> and use a custom <code>TableCell</code> class with a <code>TextField</code> in it. The custom <code>TableCell</code>:</p>\n<pre><code>public class CommentCell extends TableCell&lt;ListItem, String&gt; {\n\n    private final TextField comment = new TextField();\n\n    public CommentCell() {\n        this.comment.setMaxWidth( Integer.MAX_VALUE );\n        this.comment.setDisable( true );\n        this.comment.focusedProperty().addListener( new ChangeListener&lt;Boolean&gt;() {\n            @Override\n            public void changed( ObservableValue&lt;? extends Boolean&gt; arg0, Boolean oldPropertyValue,\n                    Boolean newPropertyValue ) {\n                if ( !newPropertyValue ) {\n                    // Binding the TextField text to the model\n                    MainController.getInstance().setComment( getTableRow().getIndex(), comment.getText() );\n                }\n            }\n        } );\n        this.setGraphic( this.comment );\n    }\n\n    @Override\n    protected void updateItem( String s, boolean empty ) {\n        // Checking if the TextField should be editable (based on model condition)\n        if ( MainController.getInstance().isDependency( getTableRow().getIndex() ) ) {\n            this.comment.setDisable( false );\n            this.comment.setEditable( true );\n        }\n        // Setting the model value as the text for the TextField\n        if ( s != null &amp;&amp; !s.isEmpty() ) {\n            this.comment.setText( s );\n        }\n    }\n}\n</code></pre>\n<p>The UI display might differ from a <code>TextFieldTableCell</code> but at least, it allows for better usability:</p>\n<p><a href=\"https://i.stack.imgur.com/u4aRn.png\" rel=\"nofollow noreferrer\">UI Display</a></p>\n"},{"tags":[],"owner":{"account_id":535038,"reputation":567,"user_id":904735,"accept_rate":64,"display_name":"Grigor Nazaryan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1469811905,"creation_date":1469811905,"answer_id":38664060,"question_id":24694616,"body_markdown":"I found a simple solution to this, one just needs to provide the commit function to column specific to data type:\r\n\r\n    TableColumn msgstr = new TableColumn(&quot;msgstr&quot;);\r\n    msgstr.setMinWidth(100);\r\n    msgstr.prefWidthProperty().bind(widthProperty().divide(3));\r\n    msgstr.setCellValueFactory(\r\n            new PropertyValueFactory&lt;&gt;(&quot;msgstr&quot;)\r\n    );\r\n    msgstr.setOnEditCommit(new EventHandler&lt;CellEditEvent&lt;PoEntry, String&gt;&gt;() {\r\n    @Override\r\n    public void handle(CellEditEvent&lt;PoEntry, String&gt; t) {\r\n        ((PoEntry)t.getTableView().getItems().get(t.getTablePosition().getRow())).setMsgstr(t.getNewValue());\r\n    }\r\n    });","title":"How to enable commit on focusLost for TableView/TreeTableView?","body":"<p>I found a simple solution to this, one just needs to provide the commit function to column specific to data type:</p>\n\n<pre><code>TableColumn msgstr = new TableColumn(\"msgstr\");\nmsgstr.setMinWidth(100);\nmsgstr.prefWidthProperty().bind(widthProperty().divide(3));\nmsgstr.setCellValueFactory(\n        new PropertyValueFactory&lt;&gt;(\"msgstr\")\n);\nmsgstr.setOnEditCommit(new EventHandler&lt;CellEditEvent&lt;PoEntry, String&gt;&gt;() {\n@Override\npublic void handle(CellEditEvent&lt;PoEntry, String&gt; t) {\n    ((PoEntry)t.getTableView().getItems().get(t.getTablePosition().getRow())).setMsgstr(t.getNewValue());\n}\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2172815,"reputation":646,"user_id":1924321,"display_name":"Ogmios"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1526481944,"creation_date":1525963461,"answer_id":50275614,"question_id":24694616,"body_markdown":"I prefer building as much as possible on the existing code, and since this behaviour is still not fixed w/ Java 10, here&#39;s a more general approach based on [J. Duke&#39;s solution][2] from bug: [JDK-8089311][1].\r\n\r\n    public class TextFieldTableCellAutoCmt&lt;S, T&gt; extends TextFieldTableCell&lt;S, T&gt; {\r\n    \r\n        protected TextField txtFldRef;\r\n        protected boolean isEdit;\r\n    \r\n        public TextFieldTableCellAutoCmt() {\r\n            this(null);\r\n        }\r\n    \r\n        public TextFieldTableCellAutoCmt(final StringConverter&lt;T&gt; conv) {\r\n            super(conv);\r\n        }\r\n    \r\n        public static &lt;S&gt; Callback&lt;TableColumn&lt;S, String&gt;, TableCell&lt;S, String&gt;&gt; forTableColumn() {\r\n            return forTableColumn(new DefaultStringConverter());\r\n        }\r\n    \r\n        public static &lt;S, T&gt; Callback&lt;TableColumn&lt;S, T&gt;, TableCell&lt;S, T&gt;&gt; forTableColumn(final StringConverter&lt;T&gt; conv) {\r\n            return list -&gt; new TextFieldTableCellAutoCmt&lt;S, T&gt;(conv);\r\n        }\r\n    \r\n        @Override\r\n        public void startEdit() {\r\n            super.startEdit();\r\n            isEdit = true;\r\n            if (updTxtFldRef()) {\r\n                txtFldRef.focusedProperty().addListener(this::onFocusChg);\r\n                txtFldRef.setOnKeyPressed(this::onKeyPrs);\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * @return whether {@link #txtFldRef} has been changed\r\n         */\r\n        protected boolean updTxtFldRef() {\r\n            final Node g = getGraphic();\r\n            final boolean isUpd = g != null &amp;&amp; txtFldRef != g;\r\n            if (isUpd) {\r\n                txtFldRef = g instanceof TextField ? (TextField) g : null;\r\n            }\r\n            return isUpd;\r\n        }\r\n    \r\n        @Override\r\n        public void commitEdit(final T valNew) {\r\n            if (isEditing()) {\r\n                super.commitEdit(valNew);\r\n            } else {\r\n                final TableView&lt;S&gt; tbl = getTableView();\r\n                if (tbl != null) {\r\n                    final TablePosition&lt;S, T&gt; pos = new TablePosition&lt;&gt;(tbl, getTableRow().getIndex(), getTableColumn()); // instead of tbl.getEditingCell()\r\n                    final CellEditEvent&lt;S, T&gt; ev  = new CellEditEvent&lt;&gt;(tbl, pos, TableColumn.editCommitEvent(), valNew);\r\n                    Event.fireEvent(getTableColumn(), ev);\r\n                }\r\n                updateItem(valNew, false);\r\n                if (tbl != null) {\r\n                    tbl.edit(-1, null);\r\n                }\r\n                // TODO ControlUtils.requestFocusOnControlOnlyIfCurrentFocusOwnerIsChild(tbl);\r\n            }\r\n        }\r\n    \r\n        public void onFocusChg(final ObservableValue&lt;? extends Boolean&gt; obs, final boolean v0, final boolean v1) {\r\n            if (isEdit &amp;&amp; !v1) {\r\n                commitEdit(getConverter().fromString(txtFldRef.getText()));\r\n            }\r\n        }\r\n    \r\n        protected void onKeyPrs(final KeyEvent e) {\r\n            switch (e.getCode()) {\r\n            case ESCAPE:\r\n                isEdit = false;\r\n                cancelEdit(); // see CellUtils#createTextField(...)\r\n                e.consume();\r\n                break;\r\n            case TAB:\r\n                if (e.isShiftDown()) {\r\n                    getTableView().getSelectionModel().selectPrevious();\r\n                } else {\r\n                    getTableView().getSelectionModel().selectNext();\r\n                }\r\n                e.consume();\r\n                break;\r\n            case UP:\r\n                getTableView().getSelectionModel().selectAboveCell();\r\n                e.consume();\r\n                break;\r\n            case DOWN:\r\n                getTableView().getSelectionModel().selectBelowCell();\r\n                e.consume();\r\n                break;\r\n            default:\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n  [1]: https://bugs.openjdk.java.net/browse/JDK-8089311\r\n  [2]: https://bugs.openjdk.java.net/browse/JDK-8089311?focusedCommentId=13810219&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-13810219","title":"How to enable commit on focusLost for TableView/TreeTableView?","body":"<p>I prefer building as much as possible on the existing code, and since this behaviour is still not fixed w/ Java 10, here's a more general approach based on <a href=\"https://bugs.openjdk.java.net/browse/JDK-8089311?focusedCommentId=13810219&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-13810219\" rel=\"nofollow noreferrer\">J. Duke's solution</a> from bug: <a href=\"https://bugs.openjdk.java.net/browse/JDK-8089311\" rel=\"nofollow noreferrer\">JDK-8089311</a>.</p>\n\n<pre><code>public class TextFieldTableCellAutoCmt&lt;S, T&gt; extends TextFieldTableCell&lt;S, T&gt; {\n\n    protected TextField txtFldRef;\n    protected boolean isEdit;\n\n    public TextFieldTableCellAutoCmt() {\n        this(null);\n    }\n\n    public TextFieldTableCellAutoCmt(final StringConverter&lt;T&gt; conv) {\n        super(conv);\n    }\n\n    public static &lt;S&gt; Callback&lt;TableColumn&lt;S, String&gt;, TableCell&lt;S, String&gt;&gt; forTableColumn() {\n        return forTableColumn(new DefaultStringConverter());\n    }\n\n    public static &lt;S, T&gt; Callback&lt;TableColumn&lt;S, T&gt;, TableCell&lt;S, T&gt;&gt; forTableColumn(final StringConverter&lt;T&gt; conv) {\n        return list -&gt; new TextFieldTableCellAutoCmt&lt;S, T&gt;(conv);\n    }\n\n    @Override\n    public void startEdit() {\n        super.startEdit();\n        isEdit = true;\n        if (updTxtFldRef()) {\n            txtFldRef.focusedProperty().addListener(this::onFocusChg);\n            txtFldRef.setOnKeyPressed(this::onKeyPrs);\n        }\n    }\n\n    /**\n     * @return whether {@link #txtFldRef} has been changed\n     */\n    protected boolean updTxtFldRef() {\n        final Node g = getGraphic();\n        final boolean isUpd = g != null &amp;&amp; txtFldRef != g;\n        if (isUpd) {\n            txtFldRef = g instanceof TextField ? (TextField) g : null;\n        }\n        return isUpd;\n    }\n\n    @Override\n    public void commitEdit(final T valNew) {\n        if (isEditing()) {\n            super.commitEdit(valNew);\n        } else {\n            final TableView&lt;S&gt; tbl = getTableView();\n            if (tbl != null) {\n                final TablePosition&lt;S, T&gt; pos = new TablePosition&lt;&gt;(tbl, getTableRow().getIndex(), getTableColumn()); // instead of tbl.getEditingCell()\n                final CellEditEvent&lt;S, T&gt; ev  = new CellEditEvent&lt;&gt;(tbl, pos, TableColumn.editCommitEvent(), valNew);\n                Event.fireEvent(getTableColumn(), ev);\n            }\n            updateItem(valNew, false);\n            if (tbl != null) {\n                tbl.edit(-1, null);\n            }\n            // TODO ControlUtils.requestFocusOnControlOnlyIfCurrentFocusOwnerIsChild(tbl);\n        }\n    }\n\n    public void onFocusChg(final ObservableValue&lt;? extends Boolean&gt; obs, final boolean v0, final boolean v1) {\n        if (isEdit &amp;&amp; !v1) {\n            commitEdit(getConverter().fromString(txtFldRef.getText()));\n        }\n    }\n\n    protected void onKeyPrs(final KeyEvent e) {\n        switch (e.getCode()) {\n        case ESCAPE:\n            isEdit = false;\n            cancelEdit(); // see CellUtils#createTextField(...)\n            e.consume();\n            break;\n        case TAB:\n            if (e.isShiftDown()) {\n                getTableView().getSelectionModel().selectPrevious();\n            } else {\n                getTableView().getSelectionModel().selectNext();\n            }\n            e.consume();\n            break;\n        case UP:\n            getTableView().getSelectionModel().selectAboveCell();\n            e.consume();\n            break;\n        case DOWN:\n            getTableView().getSelectionModel().selectBelowCell();\n            e.consume();\n            break;\n        default:\n            break;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23551,"reputation":30672,"user_id":59087,"accept_rate":99,"display_name":"Dave Jarvis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640068830,"creation_date":1640068830,"answer_id":70431526,"question_id":24694616,"body_markdown":"You&#39;ll need:\r\n\r\n* a `CellEditor`;\r\n* a `TableCell` or `TreeCell` subclass; and\r\n* a cell factory method.\r\n\r\n\r\nFor more details on the classes shown below, see:\r\n\r\n* [CellEditor](https://github.com/DaveJarvis/keenwrite/tree/master/src/main/java/com/keenwrite/ui/common)\r\n* [AltTableCell](https://github.com/DaveJarvis/keenwrite/tree/master/src/main/java/com/keenwrite/ui/table)\r\n* [AltTreeCell](https://github.com/DaveJarvis/keenwrite/tree/master/src/main/java/com/keenwrite/ui/tree)\r\n\r\n# CellEditor\r\n\r\nThe `CellEditor` is responsible for handling the &lt;kbd&gt;Esc&lt;/kbd&gt; and &lt;kbd&gt;Enter&lt;/kbd&gt;, as well as focus loss:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    import javafx.beans.property.ObjectProperty;\r\n    import javafx.beans.property.Property;\r\n    import javafx.beans.property.SimpleStringProperty;\r\n    import javafx.beans.value.ChangeListener;\r\n    import javafx.beans.value.ObservableValue;\r\n    import javafx.event.EventHandler;\r\n    import javafx.scene.Node;\r\n    import javafx.scene.control.TableCell;\r\n    import javafx.scene.control.TextField;\r\n    import javafx.scene.control.TreeCell;\r\n    import javafx.scene.input.KeyEvent;\r\n    \r\n    import java.util.function.Consumer;\r\n    \r\n    import static javafx.application.Platform.runLater;\r\n    import static javafx.scene.input.KeyCode.ENTER;\r\n    import static javafx.scene.input.KeyCode.TAB;\r\n    import static javafx.scene.input.KeyEvent.KEY_RELEASED;\r\n    \r\n    public class CellEditor {\r\n      private FocusListener mFocusListener;\r\n      private final Property&lt;String&gt; mInputText = new SimpleStringProperty();\r\n      private final Consumer&lt;String&gt; mConsumer;\r\n    \r\n      /**\r\n       * Responsible for accepting the text when users press the Enter or Tab key.\r\n       */\r\n      private class KeyHandler implements EventHandler&lt;KeyEvent&gt; {\r\n        @Override\r\n        public void handle( final KeyEvent event ) {\r\n          if( event.getCode() == ENTER || event.getCode() == TAB ) {\r\n            commitEdit();\r\n            event.consume();\r\n          }\r\n        }\r\n      }\r\n    \r\n      /**\r\n       * Responsible for committing edits when focus is lost. This will also\r\n       * deselect the input field when focus is gained so that typing text won&#39;t\r\n       * overwrite the entire existing text.\r\n       */\r\n      private class FocusListener implements ChangeListener&lt;Boolean&gt; {\r\n        private final TextField mInput;\r\n    \r\n        private FocusListener( final TextField input ) {\r\n          mInput = input;\r\n        }\r\n    \r\n        @Override\r\n        public void changed(\r\n          final ObservableValue&lt;? extends Boolean&gt; c,\r\n          final Boolean endedFocus, final Boolean beganFocus ) {\r\n    \r\n          if( beganFocus ) {\r\n            runLater( mInput::deselect );\r\n          }\r\n          else if( endedFocus ) {\r\n            commitEdit();\r\n          }\r\n        }\r\n      }\r\n    \r\n      /**\r\n       * Generalized cell editor suitable for use with {@link TableCell} or\r\n       * {@link TreeCell} instances.\r\n       *\r\n       * @param consumer        Converts the field input text to the required\r\n       *                        data type.\r\n       * @param graphicProperty Defines the graphical user input field.\r\n       */\r\n      public CellEditor(\r\n        final Consumer&lt;String&gt; consumer,\r\n        final ObjectProperty&lt;Node&gt; graphicProperty ) {\r\n        assert consumer != null;\r\n        mConsumer = consumer;\r\n    \r\n        init( graphicProperty );\r\n      }\r\n    \r\n      private void init( final ObjectProperty&lt;Node&gt; graphicProperty ) {\r\n        final var keyHandler = new KeyHandler();\r\n    \r\n        // When the text field is added as the graphics context, we hook into\r\n        // the changed value to get a handle on the text field. From there it is\r\n        // possible to add change the keyboard and focus behaviours.\r\n        graphicProperty.addListener( ( c, o, n ) -&gt; {\r\n          if( o instanceof TextField ) {\r\n            o.removeEventHandler( KEY_RELEASED, keyHandler );\r\n            o.focusedProperty().removeListener( mFocusListener );\r\n          }\r\n    \r\n          if( n instanceof final TextField input ) {\r\n            n.addEventFilter( KEY_RELEASED, keyHandler );\r\n            mInputText.bind( input.textProperty() );\r\n            mFocusListener = new FocusListener( input );\r\n            n.focusedProperty().addListener( mFocusListener );\r\n          }\r\n        } );\r\n      }\r\n    \r\n      private void commitEdit() {\r\n        mConsumer.accept( mInputText.getValue() );\r\n      }\r\n    }\r\n\r\n# AltTableCell\r\n\r\nThe only difference between an `AltTableCell` and an `AltTreeCell` is the inheritance hierarchy. They are otherwise identical:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    public class AltTableCell&lt;S, T&gt; extends TextFieldTableCell&lt;S, T&gt; {\r\n      public AltTableCell( final StringConverter&lt;T&gt; converter ) {\r\n        super( converter );\r\n    \r\n        assert converter != null;\r\n    \r\n        new CellEditor(\r\n          input -&gt; commitEdit( getConverter().fromString( input ) ),\r\n          graphicProperty()\r\n        );\r\n      }\r\n    }\r\n\r\nTo be concrete, the `AltTreeCell` would begin:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    public class AltTreeCell&lt;T&gt; extends TextFieldTreeCell&lt;T&gt;\r\n\r\n# Cell factory method\r\n\r\nAssign the alternate table cell to the table column&#39;s cell factory:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    final var column = new TableColumn&lt;Entry&lt;K, V&gt;, T&gt;( label );\r\n\r\n    column.setEditable( true );\r\n    column.setCellFactory(\r\n      tableColumn -&gt; new AltTableCell&lt;&gt;(\r\n        new StringConverter&lt;&gt;() {\r\n          @Override\r\n          public String toString( final T object ) {\r\n            return object.toString();\r\n          }\r\n\r\n          @Override\r\n          public T fromString( final String string ) {\r\n            return (T) string;\r\n          }\r\n        }\r\n      )\r\n    );\r\n\r\nFor a tree cell, it&#39;s fairly similar:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    final var view = new TreeView&lt;&gt;(); // ...\r\n\r\n    view.setEditable( true );\r\n    view.setCellFactory( treeView -&gt; new AltTreeCell&lt;&gt;( converter ) );\r\n","title":"How to enable commit on focusLost for TableView/TreeTableView?","body":"<p>You'll need:</p>\n<ul>\n<li>a <code>CellEditor</code>;</li>\n<li>a <code>TableCell</code> or <code>TreeCell</code> subclass; and</li>\n<li>a cell factory method.</li>\n</ul>\n<p>For more details on the classes shown below, see:</p>\n<ul>\n<li><a href=\"https://github.com/DaveJarvis/keenwrite/tree/master/src/main/java/com/keenwrite/ui/common\" rel=\"nofollow noreferrer\">CellEditor</a></li>\n<li><a href=\"https://github.com/DaveJarvis/keenwrite/tree/master/src/main/java/com/keenwrite/ui/table\" rel=\"nofollow noreferrer\">AltTableCell</a></li>\n<li><a href=\"https://github.com/DaveJarvis/keenwrite/tree/master/src/main/java/com/keenwrite/ui/tree\" rel=\"nofollow noreferrer\">AltTreeCell</a></li>\n</ul>\n<h1>CellEditor</h1>\n<p>The <code>CellEditor</code> is responsible for handling the <kbd>Esc</kbd> and <kbd>Enter</kbd>, as well as focus loss:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javafx.beans.property.ObjectProperty;\nimport javafx.beans.property.Property;\nimport javafx.beans.property.SimpleStringProperty;\nimport javafx.beans.value.ChangeListener;\nimport javafx.beans.value.ObservableValue;\nimport javafx.event.EventHandler;\nimport javafx.scene.Node;\nimport javafx.scene.control.TableCell;\nimport javafx.scene.control.TextField;\nimport javafx.scene.control.TreeCell;\nimport javafx.scene.input.KeyEvent;\n\nimport java.util.function.Consumer;\n\nimport static javafx.application.Platform.runLater;\nimport static javafx.scene.input.KeyCode.ENTER;\nimport static javafx.scene.input.KeyCode.TAB;\nimport static javafx.scene.input.KeyEvent.KEY_RELEASED;\n\npublic class CellEditor {\n  private FocusListener mFocusListener;\n  private final Property&lt;String&gt; mInputText = new SimpleStringProperty();\n  private final Consumer&lt;String&gt; mConsumer;\n\n  /**\n   * Responsible for accepting the text when users press the Enter or Tab key.\n   */\n  private class KeyHandler implements EventHandler&lt;KeyEvent&gt; {\n    @Override\n    public void handle( final KeyEvent event ) {\n      if( event.getCode() == ENTER || event.getCode() == TAB ) {\n        commitEdit();\n        event.consume();\n      }\n    }\n  }\n\n  /**\n   * Responsible for committing edits when focus is lost. This will also\n   * deselect the input field when focus is gained so that typing text won't\n   * overwrite the entire existing text.\n   */\n  private class FocusListener implements ChangeListener&lt;Boolean&gt; {\n    private final TextField mInput;\n\n    private FocusListener( final TextField input ) {\n      mInput = input;\n    }\n\n    @Override\n    public void changed(\n      final ObservableValue&lt;? extends Boolean&gt; c,\n      final Boolean endedFocus, final Boolean beganFocus ) {\n\n      if( beganFocus ) {\n        runLater( mInput::deselect );\n      }\n      else if( endedFocus ) {\n        commitEdit();\n      }\n    }\n  }\n\n  /**\n   * Generalized cell editor suitable for use with {@link TableCell} or\n   * {@link TreeCell} instances.\n   *\n   * @param consumer        Converts the field input text to the required\n   *                        data type.\n   * @param graphicProperty Defines the graphical user input field.\n   */\n  public CellEditor(\n    final Consumer&lt;String&gt; consumer,\n    final ObjectProperty&lt;Node&gt; graphicProperty ) {\n    assert consumer != null;\n    mConsumer = consumer;\n\n    init( graphicProperty );\n  }\n\n  private void init( final ObjectProperty&lt;Node&gt; graphicProperty ) {\n    final var keyHandler = new KeyHandler();\n\n    // When the text field is added as the graphics context, we hook into\n    // the changed value to get a handle on the text field. From there it is\n    // possible to add change the keyboard and focus behaviours.\n    graphicProperty.addListener( ( c, o, n ) -&gt; {\n      if( o instanceof TextField ) {\n        o.removeEventHandler( KEY_RELEASED, keyHandler );\n        o.focusedProperty().removeListener( mFocusListener );\n      }\n\n      if( n instanceof final TextField input ) {\n        n.addEventFilter( KEY_RELEASED, keyHandler );\n        mInputText.bind( input.textProperty() );\n        mFocusListener = new FocusListener( input );\n        n.focusedProperty().addListener( mFocusListener );\n      }\n    } );\n  }\n\n  private void commitEdit() {\n    mConsumer.accept( mInputText.getValue() );\n  }\n}\n</code></pre>\n<h1>AltTableCell</h1>\n<p>The only difference between an <code>AltTableCell</code> and an <code>AltTreeCell</code> is the inheritance hierarchy. They are otherwise identical:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class AltTableCell&lt;S, T&gt; extends TextFieldTableCell&lt;S, T&gt; {\n  public AltTableCell( final StringConverter&lt;T&gt; converter ) {\n    super( converter );\n\n    assert converter != null;\n\n    new CellEditor(\n      input -&gt; commitEdit( getConverter().fromString( input ) ),\n      graphicProperty()\n    );\n  }\n}\n</code></pre>\n<p>To be concrete, the <code>AltTreeCell</code> would begin:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class AltTreeCell&lt;T&gt; extends TextFieldTreeCell&lt;T&gt;\n</code></pre>\n<h1>Cell factory method</h1>\n<p>Assign the alternate table cell to the table column's cell factory:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final var column = new TableColumn&lt;Entry&lt;K, V&gt;, T&gt;( label );\n\ncolumn.setEditable( true );\ncolumn.setCellFactory(\n  tableColumn -&gt; new AltTableCell&lt;&gt;(\n    new StringConverter&lt;&gt;() {\n      @Override\n      public String toString( final T object ) {\n        return object.toString();\n      }\n\n      @Override\n      public T fromString( final String string ) {\n        return (T) string;\n      }\n    }\n  )\n);\n</code></pre>\n<p>For a tree cell, it's fairly similar:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final var view = new TreeView&lt;&gt;(); // ...\n\nview.setEditable( true );\nview.setCellFactory( treeView -&gt; new AltTreeCell&lt;&gt;( converter ) );\n</code></pre>\n"}],"owner":{"account_id":72918,"reputation":6140,"user_id":210290,"accept_rate":85,"display_name":"crusam"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10419,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"answer_count":7,"score":15,"last_activity_date":1640068830,"creation_date":1405071364,"question_id":24694616,"body_markdown":"Is there any simple approach to let the TreeTableView (or TableView) try to commit values on focus lost?\r\n\r\nUnfortunatly I didn&#39;t succed with any default-implementations of javafx TableCellFactories, which is why I tried my own TreeTableCell implementations and also some different tableCell implementations like the one from [Graham Smith][1], which seemed the most straight forward, since it already implemented a hook for focus lost, but nevertheless the value is never committed and the userchanges are resetted to the original value.\r\n\r\nMy guess is, whenever focus is lost, the editingProperty of the affected Cell is always already false which causes the Cell never to commit a value on focusLost. Here the relevant part from the original (oracle-)TreeTableCell Implementation (8u20ea), which causes my approaches to fail:\r\n\r\n\r\n     @Override public void commitEdit(T newValue) {\r\n            if (! isEditing()) return; // &lt;-- here my approaches are blocked, because on focus lost its not editing anymore.\r\n            \r\n            final TreeTableView&lt;S&gt; table = getTreeTableView();\r\n            if (table != null) {\r\n                @SuppressWarnings(&quot;unchecked&quot;)\r\n                TreeTablePosition&lt;S,T&gt; editingCell = (TreeTablePosition&lt;S,T&gt;) table.getEditingCell();\r\n                \r\n                // Inform the TableView of the edit being ready to be committed.\r\n                CellEditEvent&lt;S,T&gt; editEvent = new CellEditEvent&lt;S,T&gt;(\r\n                    table,\r\n                    editingCell,\r\n                    TreeTableColumn.&lt;S,T&gt;editCommitEvent(),\r\n                    newValue\r\n                );\r\n    \r\n                Event.fireEvent(getTableColumn(), editEvent);\r\n            }\r\n    \r\n            // inform parent classes of the commit, so that they can switch us\r\n            // out of the editing state.\r\n            // This MUST come before the updateItem call below, otherwise it will\r\n            // call cancelEdit(), resulting in both commit and cancel events being\r\n            // fired (as identified in RT-29650)\r\n            super.commitEdit(newValue);\r\n    \r\n            // update the item within this cell, so that it represents the new value\r\n            updateItem(newValue, false);\r\n    \r\n            if (table != null) {\r\n                // reset the editing cell on the TableView\r\n                table.edit(-1, null);\r\n    \r\n                // request focus back onto the table, only if the current focus\r\n                // owner has the table as a parent (otherwise the user might have\r\n                // clicked out of the table entirely and given focus to something else.\r\n                // It would be rude of us to request it back again.\r\n                ControlUtils.requestFocusOnControlOnlyIfCurrentFocusOwnerIsChild(table);\r\n            }\r\n        }\r\n\r\nI succeded with overriding this method and commiting the value &quot;by hand&quot; before the original commitEdit() method is called, but this causes the commit on keys like enter to commit the value twice (on key + on focus lost). Moreover I dont really like my approach at all, so I wonder, if anyone else has solved this in a &quot;nicer&quot; way?\r\n\r\n\r\n  [1]: http://www.wobblycogs.co.uk/index.php/computing/javafx/93-complete-javafx-2-editable-table-example","title":"How to enable commit on focusLost for TableView/TreeTableView?","body":"<p>Is there any simple approach to let the TreeTableView (or TableView) try to commit values on focus lost?</p>\n\n<p>Unfortunatly I didn't succed with any default-implementations of javafx TableCellFactories, which is why I tried my own TreeTableCell implementations and also some different tableCell implementations like the one from <a href=\"http://www.wobblycogs.co.uk/index.php/computing/javafx/93-complete-javafx-2-editable-table-example\">Graham Smith</a>, which seemed the most straight forward, since it already implemented a hook for focus lost, but nevertheless the value is never committed and the userchanges are resetted to the original value.</p>\n\n<p>My guess is, whenever focus is lost, the editingProperty of the affected Cell is always already false which causes the Cell never to commit a value on focusLost. Here the relevant part from the original (oracle-)TreeTableCell Implementation (8u20ea), which causes my approaches to fail:</p>\n\n<pre><code> @Override public void commitEdit(T newValue) {\n        if (! isEditing()) return; // &lt;-- here my approaches are blocked, because on focus lost its not editing anymore.\n\n        final TreeTableView&lt;S&gt; table = getTreeTableView();\n        if (table != null) {\n            @SuppressWarnings(\"unchecked\")\n            TreeTablePosition&lt;S,T&gt; editingCell = (TreeTablePosition&lt;S,T&gt;) table.getEditingCell();\n\n            // Inform the TableView of the edit being ready to be committed.\n            CellEditEvent&lt;S,T&gt; editEvent = new CellEditEvent&lt;S,T&gt;(\n                table,\n                editingCell,\n                TreeTableColumn.&lt;S,T&gt;editCommitEvent(),\n                newValue\n            );\n\n            Event.fireEvent(getTableColumn(), editEvent);\n        }\n\n        // inform parent classes of the commit, so that they can switch us\n        // out of the editing state.\n        // This MUST come before the updateItem call below, otherwise it will\n        // call cancelEdit(), resulting in both commit and cancel events being\n        // fired (as identified in RT-29650)\n        super.commitEdit(newValue);\n\n        // update the item within this cell, so that it represents the new value\n        updateItem(newValue, false);\n\n        if (table != null) {\n            // reset the editing cell on the TableView\n            table.edit(-1, null);\n\n            // request focus back onto the table, only if the current focus\n            // owner has the table as a parent (otherwise the user might have\n            // clicked out of the table entirely and given focus to something else.\n            // It would be rude of us to request it back again.\n            ControlUtils.requestFocusOnControlOnlyIfCurrentFocusOwnerIsChild(table);\n        }\n    }\n</code></pre>\n\n<p>I succeded with overriding this method and commiting the value \"by hand\" before the original commitEdit() method is called, but this causes the commit on keys like enter to commit the value twice (on key + on focus lost). Moreover I dont really like my approach at all, so I wonder, if anyone else has solved this in a \"nicer\" way?</p>\n"},{"tags":["java","certificate","keystore","x509","azure-keyvault"],"comments":[{"owner":{"account_id":8497217,"reputation":37834,"user_id":6371459,"accept_rate":25,"display_name":"pedrofb"},"score":0,"creation_date":1594101827,"post_id":62701407,"comment_id":111000016,"body_markdown":"`keyStore.load()` requires a PKCS#12 file, but you are providing a privateKey, which is usually in pcks1 or pkcs8 (java needs pcks8). Your private key doesn&#39;t seem to be in pkcs8 either because you converted it from a string, and pkcs8 is binary (DER encoding). `String privateKey = secret.getValue ();` I have looked at the AzureKeyVault API for java and it is not clear what `secret.getValue ()` returns. Maybe you have to look for an example, or if you prefer, paste an example in the question and take a look at the content","body":"<code>keyStore.load()</code> requires a PKCS#12 file, but you are providing a privateKey, which is usually in pcks1 or pkcs8 (java needs pcks8). Your private key doesn&#39;t seem to be in pkcs8 either because you converted it from a string, and pkcs8 is binary (DER encoding). <code>String privateKey = secret.getValue ();</code> I have looked at the AzureKeyVault API for java and it is not clear what <code>secret.getValue ()</code> returns. Maybe you have to look for an example, or if you prefer, paste an example in the question and take a look at the content"},{"owner":{"account_id":496401,"reputation":25022,"user_id":4148708,"accept_rate":70,"display_name":"evilSnobu"},"score":0,"creation_date":1594111498,"post_id":62701407,"comment_id":111004087,"body_markdown":"`secret.getValue()` returns a string that starts with &quot;MII..&quot;, so base64. If i base64 decode that i get a bunch of binary. Is that DER?","body":"<code>secret.getValue()</code> returns a string that starts with &quot;MII..&quot;, so base64. If i base64 decode that i get a bunch of binary. Is that DER?"},{"owner":{"account_id":8497217,"reputation":37834,"user_id":6371459,"accept_rate":25,"display_name":"pedrofb"},"score":0,"creation_date":1594113631,"post_id":62701407,"comment_id":111005228,"body_markdown":"Yes, it is base64. To get binary DER just decode it. What is not clear is if it is a private key or a pcks12. If `KeyStore.load()` still doesn&#39;t work, they try to load the private key directly. https://stackoverflow.com/a/19387517/6371459","body":"Yes, it is base64. To get binary DER just decode it. What is not clear is if it is a private key or a pcks12. If <code>KeyStore.load()</code> still doesn&#39;t work, they try to load the private key directly. <a href=\"https://stackoverflow.com/a/19387517/6371459\">stackoverflow.com/a/19387517/6371459</a>"},{"owner":{"account_id":496401,"reputation":25022,"user_id":4148708,"accept_rate":70,"display_name":"evilSnobu"},"score":0,"creation_date":1594114236,"post_id":62701407,"comment_id":111005537,"body_markdown":"Alright, but `SSLContexts.custom().loadKeyMaterial(...` expects a KeyStore object, so i guess i&#39;ve gone nowhere.","body":"Alright, but <code>SSLContexts.custom().loadKeyMaterial(...</code> expects a KeyStore object, so i guess i&#39;ve gone nowhere."},{"owner":{"account_id":8497217,"reputation":37834,"user_id":6371459,"accept_rate":25,"display_name":"pedrofb"},"score":1,"creation_date":1594123058,"post_id":62701407,"comment_id":111010079,"body_markdown":"You can add programmatically an entry to your `KeyStore` using `PrivateKey` and  `Certificate`. Use `KeyStore.load(null,null)` and `keystore.setKeyEntry()`. Alternatively you can download the keying material and create a pkcs12 file using openssl or KeystoreExplorer tool","body":"You can add programmatically an entry to your <code>KeyStore</code> using <code>PrivateKey</code> and  <code>Certificate</code>. Use <code>KeyStore.load(null,null)</code> and <code>keystore.setKeyEntry()</code>. Alternatively you can download the keying material and create a pkcs12 file using openssl or KeystoreExplorer tool"},{"owner":{"account_id":496401,"reputation":25022,"user_id":4148708,"accept_rate":70,"display_name":"evilSnobu"},"score":0,"creation_date":1594146642,"post_id":62701407,"comment_id":111022823,"body_markdown":"Thanks. I think i&#39;m very close, however now i&#39;m getting a `java.security.InvalidKeyException: IOException : version mismatch: (supported:     00, parsed:     03` for the private key which i&#39;m not sure what it means. My key is RSA2048 generated by `openssl req -x509 -days 365 -newkey rsa:2048 -keyout key.pem -out cert.pem`","body":"Thanks. I think i&#39;m very close, however now i&#39;m getting a <code>java.security.InvalidKeyException: IOException : version mismatch: (supported:     00, parsed:     03</code> for the private key which i&#39;m not sure what it means. My key is RSA2048 generated by <code>openssl req -x509 -days 365 -newkey rsa:2048 -keyout key.pem -out cert.pem</code>"},{"owner":{"account_id":8497217,"reputation":37834,"user_id":6371459,"accept_rate":25,"display_name":"pedrofb"},"score":0,"creation_date":1594150084,"post_id":62701407,"comment_id":111024240,"body_markdown":"Openssl generates private keys in pkcs#1 format, but java only supports pkcs#8. You probably need to convert the key to pkcs8 format using openssl or bouncycastle. See https://stackoverflow.com/a/7473874/6371459 or https://stackoverflow.com/a/41953072/6371459","body":"Openssl generates private keys in pkcs#1 format, but java only supports pkcs#8. You probably need to convert the key to pkcs8 format using openssl or bouncycastle. See <a href=\"https://stackoverflow.com/a/7473874/6371459\">stackoverflow.com/a/7473874/6371459</a> or <a href=\"https://stackoverflow.com/a/41953072/6371459\">stackoverflow.com/a/41953072/6371459</a>"},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1594604043,"post_id":62701407,"comment_id":111173953,"body_markdown":"@pedrofb: that&#39;s mostly wrong for OpenSSL since 1.0.0 in 2010. `genrsa rsa` still write PKCS1, but `genpkey pkey pkcs12 (import)` and (as here) `req -newkey` all write PKCS8 for PEM (though not DER, weirdly). But _both_ PKCS1-private _and_ PKCS8-clear have version=00, or 01 for rfc5958 which isn&#39;t really PKCS8 and anyway neither OpenSSL nor JCE supports; only PKCS12 has version=03, suggesting this was (base64&#39;ed) PKCS12 after all, but then I don&#39;t know why KeyStore type PKCS12 had trouble reading it, without looking in detail at data that shouldn&#39;t be made public.","body":"@pedrofb: that&#39;s mostly wrong for OpenSSL since 1.0.0 in 2010. <code>genrsa rsa</code> still write PKCS1, but <code>genpkey pkey pkcs12 (import)</code> and (as here) <code>req -newkey</code> all write PKCS8 for PEM (though not DER, weirdly). But <i>both</i> PKCS1-private <i>and</i> PKCS8-clear have version=00, or 01 for rfc5958 which isn&#39;t really PKCS8 and anyway neither OpenSSL nor JCE supports; only PKCS12 has version=03, suggesting this was (base64&#39;ed) PKCS12 after all, but then I don&#39;t know why KeyStore type PKCS12 had trouble reading it, without looking in detail at data that shouldn&#39;t be made public."},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1594604115,"post_id":62701407,"comment_id":111173961,"body_markdown":"Snobu: can you reproduce the problem with a _throwaway_ key that you don&#39;t need to keep secure and can safely post for us to look at? And specify Java version(s)?","body":"Snobu: can you reproduce the problem with a <i>throwaway</i> key that you don&#39;t need to keep secure and can safely post for us to look at? And specify Java version(s)?"},{"owner":{"account_id":496401,"reputation":25022,"user_id":4148708,"accept_rate":70,"display_name":"evilSnobu"},"score":0,"creation_date":1594658929,"post_id":62701407,"comment_id":111196044,"body_markdown":"Here it is: https://gist.github.com/snobu/ebf9258717691ac93784398a9b54922b (as `.pem`). This is the exact private key that makes the code throw version mismatch `supported: 00, parsed: 03`.","body":"Here it is: <a href=\"https://gist.github.com/snobu/ebf9258717691ac93784398a9b54922b\" rel=\"nofollow noreferrer\">gist.github.com/snobu/ebf9258717691ac93784398a9b54922b</a> (as <code>.pem</code>). This is the exact private key that makes the code throw version mismatch <code>supported: 00, parsed: 03</code>."},{"owner":{"account_id":8497217,"reputation":37834,"user_id":6371459,"accept_rate":25,"display_name":"pedrofb"},"score":0,"creation_date":1594805280,"post_id":62701407,"comment_id":111252405,"body_markdown":"@dave_thompson_085, the documentation doesn&#39;t make any reference to the type of key it generates, but I&#39;ve tested it and you&#39;re right","body":"@dave_thompson_085, the documentation doesn&#39;t make any reference to the type of key it generates, but I&#39;ve tested it and you&#39;re right"},{"owner":{"account_id":8497217,"reputation":37834,"user_id":6371459,"accept_rate":25,"display_name":"pedrofb"},"score":0,"creation_date":1594805395,"post_id":62701407,"comment_id":111252465,"body_markdown":"@evilSnobu, your key is pkcs8 so you should have no problem loading it as a `PrivateKey` object (not using `KeyStore`) as I indicated above","body":"@evilSnobu, your key is pkcs8 so you should have no problem loading it as a <code>PrivateKey</code> object (not using <code>KeyStore</code>) as I indicated above"},{"owner":{"account_id":24662336,"reputation":504,"user_id":18558424,"display_name":"Abe"},"score":0,"creation_date":1677561785,"post_id":62701407,"comment_id":133357579,"body_markdown":"@evilSnobu Did you figure out what secret.getValue() returns? I have same issue. My testing shows it is not any of certificate/public/private key https://stackoverflow.com/questions/75577031/what-is- it-that-i-get-in-java-from-azure-keyvault-certificate","body":"@evilSnobu Did you figure out what secret.getValue() returns? I have same issue. My testing shows it is not any of certificate/public/private key <a href=\"https://stackoverflow.com/questions/75577031/what-is-\">stackoverflow.com/questions/75577031/what-is-</a> it-that-i-get-in-java-from-azure-keyvault-certificate"},{"owner":{"account_id":496401,"reputation":25022,"user_id":4148708,"accept_rate":70,"display_name":"evilSnobu"},"score":0,"creation_date":1677847008,"post_id":62701407,"comment_id":133422488,"body_markdown":"Sorry, no, it was so long ago i don&#39;t even remember why i needed it :) You could revive this issue here - https://github.com/Azure/azure-sdk-for-java/issues/6681 - hopefully it gets more traction this time around.","body":"Sorry, no, it was so long ago i don&#39;t even remember why i needed it :) You could revive this issue here - <a href=\"https://github.com/Azure/azure-sdk-for-java/issues/6681\" rel=\"nofollow noreferrer\">github.com/Azure/azure-sdk-for-java/issues/6681</a> - hopefully it gets more traction this time around."}],"answers":[{"tags":[],"owner":{"account_id":11125108,"reputation":5965,"user_id":8166854,"display_name":"Michael Fehr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1594456878,"creation_date":1594456878,"answer_id":62847027,"question_id":62701407,"body_markdown":"It sounds to me that the import is a &quot;one time job&quot; and do not need to get solved programmatically.\r\nI recommend (same as @pedrofb) that you use the Keystore Explorer for this job - it worked perfectly in my testcase:\r\n\r\nHere are my steps to do the import, all files are available in my GitHub-Repo (https://github.com/java-crypto/Stackoverflow/tree/master/Load_certificate_and_private_key_into_Java_KeyStore):\r\n\r\n1) create the private key + certificate file with open ssl:\r\n\r\nopenssl req -x509 -days 365 -newkey rsa:2048 -keyout key.pem -out cert.pem\r\n\r\nThis will create the 2 files key.pem (encrypted private key) and cert.pem (certificate with public key). I used some sample data and the password for key.pem is 123456.\r\n\r\n2) download the Keystore Explorer from https://keystore-explorer.org/downloads.html\r\n\r\n3) run explorer and create a new KeyStore\r\n\r\n[![create new keystore][1]][1]\r\n\r\n4) select KeyStore type = PKCS12\r\n\r\n[![select Key Store type][2]][2]\r\n\r\n5) Import KeyPair with &quot;Tools&quot; - &quot;Import Key Pair&quot;\r\n\r\n[![import Key Pair][3]][3]\r\n\r\n6) Select Key Pair Type as PKCS #8\r\n\r\n[![select Key Pair type][4]][4]\r\n\r\n7) Set the password (123456) and choose the key- and cert-file and press &quot;Import&quot;\r\n\r\n[![set the password][5]][5]\r\n\r\n8) Choose the alias for the key (default is the given email in the certificate\r\n\r\n[![choose an alias][6]][6]\r\n\r\n9) Set a Key Pair Entry password: kpe123456\r\n\r\n[![set Key Pair Entry password][7]][7]\r\n\r\n10) Message: Key Pair Import successful\r\n\r\n[![Message Key Pair Import successful][8]][8]\r\n\r\n[![save your new keystore][9]][9]\r\n\r\n11) save your new keystore with &quot;File&quot; - &quot;Save as&quot;\r\n\r\n[![save your new Key Store][10]][10]\r\n\r\n12) Set a password for the Key Store: ks123456\r\n\r\n[![Set a password for the Key Store][11]][11]\r\n\r\n13) choose path + filename: keystore.p12\r\n\r\n14) ready - your private and certificate are imported in the new created Key Store keystore.p12\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/icKUX.png\r\n  [2]: https://i.stack.imgur.com/a9oOj.png\r\n  [3]: https://i.stack.imgur.com/YPkDn.png\r\n  [4]: https://i.stack.imgur.com/A75HB.png\r\n  [5]: https://i.stack.imgur.com/JzpeJ.png\r\n  [6]: https://i.stack.imgur.com/2W9BJ.png\r\n  [7]: https://i.stack.imgur.com/W5fmF.png\r\n  [8]: https://i.stack.imgur.com/xcLvl.png\r\n  [9]: https://i.stack.imgur.com/KtKoa.png\r\n  [10]: https://i.stack.imgur.com/WbsXQ.png\r\n  [11]: https://i.stack.imgur.com/8iTiu.png","title":"Load certificate and private key into Java KeyStore","body":"<p>It sounds to me that the import is a &quot;one time job&quot; and do not need to get solved programmatically.\nI recommend (same as @pedrofb) that you use the Keystore Explorer for this job - it worked perfectly in my testcase:</p>\n<p>Here are my steps to do the import, all files are available in my GitHub-Repo (<a href=\"https://github.com/java-crypto/Stackoverflow/tree/master/Load_certificate_and_private_key_into_Java_KeyStore\" rel=\"nofollow noreferrer\">https://github.com/java-crypto/Stackoverflow/tree/master/Load_certificate_and_private_key_into_Java_KeyStore</a>):</p>\n<ol>\n<li>create the private key + certificate file with open ssl:</li>\n</ol>\n<p>openssl req -x509 -days 365 -newkey rsa:2048 -keyout key.pem -out cert.pem</p>\n<p>This will create the 2 files key.pem (encrypted private key) and cert.pem (certificate with public key). I used some sample data and the password for key.pem is 123456.</p>\n<ol start=\"2\">\n<li><p>download the Keystore Explorer from <a href=\"https://keystore-explorer.org/downloads.html\" rel=\"nofollow noreferrer\">https://keystore-explorer.org/downloads.html</a></p>\n</li>\n<li><p>run explorer and create a new KeyStore</p>\n</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/icKUX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/icKUX.png\" alt=\"create new keystore\" /></a></p>\n<ol start=\"4\">\n<li>select KeyStore type = PKCS12</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/a9oOj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a9oOj.png\" alt=\"select Key Store type\" /></a></p>\n<ol start=\"5\">\n<li>Import KeyPair with &quot;Tools&quot; - &quot;Import Key Pair&quot;</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/YPkDn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YPkDn.png\" alt=\"import Key Pair\" /></a></p>\n<ol start=\"6\">\n<li>Select Key Pair Type as PKCS #8</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/A75HB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A75HB.png\" alt=\"select Key Pair type\" /></a></p>\n<ol start=\"7\">\n<li>Set the password (123456) and choose the key- and cert-file and press &quot;Import&quot;</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/JzpeJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JzpeJ.png\" alt=\"set the password\" /></a></p>\n<ol start=\"8\">\n<li>Choose the alias for the key (default is the given email in the certificate</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/2W9BJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2W9BJ.png\" alt=\"choose an alias\" /></a></p>\n<ol start=\"9\">\n<li>Set a Key Pair Entry password: kpe123456</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/W5fmF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W5fmF.png\" alt=\"set Key Pair Entry password\" /></a></p>\n<ol start=\"10\">\n<li>Message: Key Pair Import successful</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/xcLvl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xcLvl.png\" alt=\"Message Key Pair Import successful\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/KtKoa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KtKoa.png\" alt=\"save your new keystore\" /></a></p>\n<ol start=\"11\">\n<li>save your new keystore with &quot;File&quot; - &quot;Save as&quot;</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/WbsXQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WbsXQ.png\" alt=\"save your new Key Store\" /></a></p>\n<ol start=\"12\">\n<li>Set a password for the Key Store: ks123456</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/8iTiu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8iTiu.png\" alt=\"Set a password for the Key Store\" /></a></p>\n<ol start=\"13\">\n<li><p>choose path + filename: keystore.p12</p>\n</li>\n<li><p>ready - your private and certificate are imported in the new created Key Store keystore.p12</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":11125108,"reputation":5965,"user_id":8166854,"display_name":"Michael Fehr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594598361,"creation_date":1594598361,"answer_id":62867597,"question_id":62701407,"body_markdown":"When searching via Google and &quot;azure key vault get private key&quot; I found a GitHub-issue that describes in detail\r\nhow to retrieve a private key from Azure Key Vault:\r\n\r\nhttps://github.com/Azure/azure-sdk-for-js/issues/7647\r\n\r\nScrolling down to answer https://github.com/Azure/azure-sdk-for-js/issues/7647#issuecomment-594935307 there is this statement\r\nfrom one of the Dev&#39;s:\r\n\r\n**How to obtain the private key**\r\n\r\nKnowing that the private key is stored in a KeyVault Secret, with the public certificate included, we can retrieve it by using the KeyVault-Secrets client, as follows:\r\n\r\n    // Using the same credential object we used before,\r\n    // and the same keyVaultUrl,\r\n    // let&#39;s create a SecretClient\r\n    const secretClient = new SecretClient(keyVaultUrl, credential);\r\n    \r\n    // Assuming you&#39;ve already created a KeyVault certificate,\r\n    // and that certificateName contains the name of your certificate\r\n    const certificateSecret = await secretClient.getSecret(certificateName);\r\n    \r\n    // Here we can find both the private key and the public certificate, in PKCS 12 format:\r\n    const PKCS12Certificate = certificateSecret.value!;\r\n    \r\n    // You can write this into a file:\r\n    fs.writeFileSync(&quot;myCertificate.p12&quot;, PKCS12Certificate);\r\n\r\n**Note that, by default, the contentType of the certificates is PKCS 12**. Though specifying the content type of your certificate will make it trivial to get it&#39;s secret key in PEM format, let&#39;s explore how to retrieve a PEM secret key from a PKCS 12 certificate first.\r\n\r\n    Using openssl, you can retrieve the public certificate in PEM format by using the following command:\r\n    openssl pkcs12 -in myCertificate.p12 -out myCertificate.crt.pem -clcerts -nokeys\r\n    You can also use openssl to retrieve the private key, as follows:\r\n    openssl pkcs12 -in myCertificate.p12 -out myCertificate.key.pem -nocerts -nodes\r\n\r\nIn short: **You do not need to &quot;rebuild&quot; a PKCS12-keystore from separate &quot;files&quot; (private key-PEM and certificate-PEM) as you get the PKCS12/P12-keystore as shown in the example**.\r\n\r\n","title":"Load certificate and private key into Java KeyStore","body":"<p>When searching via Google and &quot;azure key vault get private key&quot; I found a GitHub-issue that describes in detail\nhow to retrieve a private key from Azure Key Vault:</p>\n<p><a href=\"https://github.com/Azure/azure-sdk-for-js/issues/7647\" rel=\"nofollow noreferrer\">https://github.com/Azure/azure-sdk-for-js/issues/7647</a></p>\n<p>Scrolling down to answer <a href=\"https://github.com/Azure/azure-sdk-for-js/issues/7647#issuecomment-594935307\" rel=\"nofollow noreferrer\">https://github.com/Azure/azure-sdk-for-js/issues/7647#issuecomment-594935307</a> there is this statement\nfrom one of the Dev's:</p>\n<p><strong>How to obtain the private key</strong></p>\n<p>Knowing that the private key is stored in a KeyVault Secret, with the public certificate included, we can retrieve it by using the KeyVault-Secrets client, as follows:</p>\n<pre><code>// Using the same credential object we used before,\n// and the same keyVaultUrl,\n// let's create a SecretClient\nconst secretClient = new SecretClient(keyVaultUrl, credential);\n\n// Assuming you've already created a KeyVault certificate,\n// and that certificateName contains the name of your certificate\nconst certificateSecret = await secretClient.getSecret(certificateName);\n\n// Here we can find both the private key and the public certificate, in PKCS 12 format:\nconst PKCS12Certificate = certificateSecret.value!;\n\n// You can write this into a file:\nfs.writeFileSync(&quot;myCertificate.p12&quot;, PKCS12Certificate);\n</code></pre>\n<p><strong>Note that, by default, the contentType of the certificates is PKCS 12</strong>. Though specifying the content type of your certificate will make it trivial to get it's secret key in PEM format, let's explore how to retrieve a PEM secret key from a PKCS 12 certificate first.</p>\n<pre><code>Using openssl, you can retrieve the public certificate in PEM format by using the following command:\nopenssl pkcs12 -in myCertificate.p12 -out myCertificate.crt.pem -clcerts -nokeys\nYou can also use openssl to retrieve the private key, as follows:\nopenssl pkcs12 -in myCertificate.p12 -out myCertificate.key.pem -nocerts -nodes\n</code></pre>\n<p>In short: <strong>You do not need to &quot;rebuild&quot; a PKCS12-keystore from separate &quot;files&quot; (private key-PEM and certificate-PEM) as you get the PKCS12/P12-keystore as shown in the example</strong>.</p>\n"},{"tags":[],"owner":{"account_id":1088907,"reputation":1550,"user_id":1083981,"display_name":"nurisezgin"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1640068216,"creation_date":1608570475,"answer_id":65397023,"question_id":62701407,"body_markdown":"It is a bit late, but I want to place a resolution that I have practiced whilst retrieving a certificate from Azure Keyvault then putting it into the java Keystore.\r\n\r\nThe dependencies that I utilized are the following.\r\n\r\n    com.azure:azure-security-keyvault-certificates:jar:4.1.3\r\n    com.azure:azure-identity:jar:1.0.4\r\n    com.azure:azure-security-keyvault-secrets:jar:4.1.1\r\n\r\n\r\nThen, the code block is below.\r\n\r\n    public class RestTemplateProvider {\r\n    \r\n    \t@Value(&quot;${azure.keyvault.service.cert-alias}&quot;)\r\n    \tprivate String alias;\r\n    \t@Value(&quot;${azure.keyvault.tenant-id}&quot;)\r\n    \tprivate String tenantId;\r\n    \t@Value(&quot;${azure.keyvault.client-key}&quot;)\r\n    \tprivate String clientSecret;\r\n    \t@Value(&quot;${azure.keyvault.client-id}&quot;)\r\n    \tprivate String clientId;\r\n    \t@Value(&quot;${azure.keyvault.uri}&quot;)\r\n    \tprivate String vaultUri;\r\n    \r\n    \tpublic RestTemplate provideRestTemplate() {\r\n    \t\tchar[] emptyPass = {};\r\n    \t\tCloseIoStream closeableIoStream = CloseIoStream.newInstance();\r\n    \r\n    \t\ttry {\r\n    \t\t\t// Azure KeyVault Credentials\r\n    \t\t\tClientSecretCredential credential = new ClientSecretCredentialBuilder()\r\n    \t\t\t\t.tenantId(tenantId)\r\n    \t\t\t\t.clientId(clientId)\r\n    \t\t\t\t.clientSecret(clientSecret)\r\n    \t\t\t\t.build();\r\n    \r\n    \t\t\tCertificateClient certificateClient = new CertificateClientBuilder()\r\n    \t\t\t\t.vaultUrl(vaultUri)\r\n    \t\t\t\t.credential(credential)\r\n    \t\t\t\t.buildClient();\r\n    \r\n    \t\t\tSecretClient secretClient = new SecretClientBuilder()\r\n    \t\t\t\t.vaultUrl(vaultUri)\r\n    \t\t\t\t.credential(credential)\r\n    \t\t\t\t.buildClient();\r\n    \t\t\t// Azure KeyVault Credentials\r\n    \r\n    \t\t\t// Retrieving certificate\r\n    \t\t\tKeyVaultCertificateWithPolicy certificateWithPolicy = certificateClient.getCertificate(alias);\r\n    \t\t\tKeyVaultSecret secret = secretClient.getSecret(alias, certificateWithPolicy.getProperties().getVersion());\r\n    \r\n    \t\t\tbyte[] rawCertificate = certificateWithPolicy.getCer();\r\n    \t\t\tCertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\r\n    \t\t\tByteArrayInputStream certificateStream = new ByteArrayInputStream(rawCertificate);\r\n    \t\t\tCertificate certificate = cf.generateCertificate(certificateStream);\r\n    \r\n    \t\t\tclose(certificateStream);\r\n    \t\t\t// Retrieving certificate\r\n    \r\n    \t\t\t// Retrieving private key\r\n    \t\t\tString base64PrivateKey = secret.getValue();\r\n    \t\t\tbyte[] rawPrivateKey = Base64.getDecoder().decode(base64PrivateKey);\r\n    \r\n    \t\t\tKeyStore rsaKeyGenerator = KeyStore.getInstance(KeyStore.getDefaultType());\r\n    \t\t\tByteArrayInputStream keyStream = new ByteArrayInputStream(rawPrivateKey);\r\n    \t\t\trsaKeyGenerator.load(keyStream, null);\r\n    \r\n    \t\t\tclose(keyStream);\r\n    \r\n    \t\t\tKey rsaPrivateKey = rsaKeyGenerator.getKey(rsaKeyGenerator.aliases().nextElement(), emptyPass);\r\n    \t\t\t// Retrieving private key\r\n    \r\n    \t\t\t// Importing certificate and private key into the KeyStore\r\n    \t\t\tKeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());\r\n    \t\t\tkeyStore.load(null);\r\n    \t\t\tkeyStore.setKeyEntry(alias, rsaPrivateKey, emptyPass, new Certificate[] {certificate});\r\n    \t\t\t// Importing certificate and private key into the KeyStore\r\n    \r\n    \t\t\tSSLConnectionSocketFactory socketFactory = new SSLConnectionSocketFactory(\r\n    \t\t\t\tnew SSLContextBuilder()\r\n    \t\t\t\t\t.loadTrustMaterial(null, new TrustAllStrategy())\r\n    \t\t\t\t\t.loadKeyMaterial(keyStore, emptyPass)\r\n    \t\t\t\t\t.build(),\r\n    \t\t\t\tNoopHostnameVerifier.INSTANCE);\r\n    \r\n                // It is just a sample, except for the sslsocketfactory please use the configuration which is right for you.\r\n    \t\t\tCloseableHttpClient httpClient = HttpClients.custom()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.setSSLSocketFactory(socketFactory)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.setConnectionTimeToLive(1000, TimeUnit.MILLISECONDS)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.setKeepAliveStrategy((httpResponse, httpContext) -&gt; 10 * 1000)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.build();\r\n    \r\n    \t\t\tClientHttpRequestFactory requestFactory = new HttpComponentsClientHttpRequestFactory(httpClient);\r\n    \t\t\tRestTemplate restTemplate = new RestTemplate(requestFactory);\r\n    \r\n    \t\t\treturn restTemplate;\r\n    \t\t} catch (IOException | CertificateException\r\n    \t\t\t| NoSuchAlgorithmException | UnrecoverableKeyException\r\n    \t\t\t| KeyStoreException | KeyManagementException e) {\r\n    \t\t\tlog.error(&quot;Error!!!&quot;)\r\n    \t\t}\r\n    \r\n    \t\treturn null;\r\n    \t}\r\n    \r\n        private void close(Closeable c) {\r\n    \t\tif (c != null) {\r\n    \t\t\ttry {\r\n    \t\t\t\tc.close();\r\n    \t\t\t} catch (IOException e) {\r\n    \t\t\t\t// log\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nI hope someone looking for a solution around using Azure Keyvault certificates in java Keystores can benefit from it.\r\n","title":"Load certificate and private key into Java KeyStore","body":"<p>It is a bit late, but I want to place a resolution that I have practiced whilst retrieving a certificate from Azure Keyvault then putting it into the java Keystore.</p>\n<p>The dependencies that I utilized are the following.</p>\n<pre><code>com.azure:azure-security-keyvault-certificates:jar:4.1.3\ncom.azure:azure-identity:jar:1.0.4\ncom.azure:azure-security-keyvault-secrets:jar:4.1.1\n</code></pre>\n<p>Then, the code block is below.</p>\n<pre><code>public class RestTemplateProvider {\n\n    @Value(&quot;${azure.keyvault.service.cert-alias}&quot;)\n    private String alias;\n    @Value(&quot;${azure.keyvault.tenant-id}&quot;)\n    private String tenantId;\n    @Value(&quot;${azure.keyvault.client-key}&quot;)\n    private String clientSecret;\n    @Value(&quot;${azure.keyvault.client-id}&quot;)\n    private String clientId;\n    @Value(&quot;${azure.keyvault.uri}&quot;)\n    private String vaultUri;\n\n    public RestTemplate provideRestTemplate() {\n        char[] emptyPass = {};\n        CloseIoStream closeableIoStream = CloseIoStream.newInstance();\n\n        try {\n            // Azure KeyVault Credentials\n            ClientSecretCredential credential = new ClientSecretCredentialBuilder()\n                .tenantId(tenantId)\n                .clientId(clientId)\n                .clientSecret(clientSecret)\n                .build();\n\n            CertificateClient certificateClient = new CertificateClientBuilder()\n                .vaultUrl(vaultUri)\n                .credential(credential)\n                .buildClient();\n\n            SecretClient secretClient = new SecretClientBuilder()\n                .vaultUrl(vaultUri)\n                .credential(credential)\n                .buildClient();\n            // Azure KeyVault Credentials\n\n            // Retrieving certificate\n            KeyVaultCertificateWithPolicy certificateWithPolicy = certificateClient.getCertificate(alias);\n            KeyVaultSecret secret = secretClient.getSecret(alias, certificateWithPolicy.getProperties().getVersion());\n\n            byte[] rawCertificate = certificateWithPolicy.getCer();\n            CertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\n            ByteArrayInputStream certificateStream = new ByteArrayInputStream(rawCertificate);\n            Certificate certificate = cf.generateCertificate(certificateStream);\n\n            close(certificateStream);\n            // Retrieving certificate\n\n            // Retrieving private key\n            String base64PrivateKey = secret.getValue();\n            byte[] rawPrivateKey = Base64.getDecoder().decode(base64PrivateKey);\n\n            KeyStore rsaKeyGenerator = KeyStore.getInstance(KeyStore.getDefaultType());\n            ByteArrayInputStream keyStream = new ByteArrayInputStream(rawPrivateKey);\n            rsaKeyGenerator.load(keyStream, null);\n\n            close(keyStream);\n\n            Key rsaPrivateKey = rsaKeyGenerator.getKey(rsaKeyGenerator.aliases().nextElement(), emptyPass);\n            // Retrieving private key\n\n            // Importing certificate and private key into the KeyStore\n            KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());\n            keyStore.load(null);\n            keyStore.setKeyEntry(alias, rsaPrivateKey, emptyPass, new Certificate[] {certificate});\n            // Importing certificate and private key into the KeyStore\n\n            SSLConnectionSocketFactory socketFactory = new SSLConnectionSocketFactory(\n                new SSLContextBuilder()\n                    .loadTrustMaterial(null, new TrustAllStrategy())\n                    .loadKeyMaterial(keyStore, emptyPass)\n                    .build(),\n                NoopHostnameVerifier.INSTANCE);\n\n            // It is just a sample, except for the sslsocketfactory please use the configuration which is right for you.\n            CloseableHttpClient httpClient = HttpClients.custom()\n                                                        .setSSLSocketFactory(socketFactory)\n                                                        .setConnectionTimeToLive(1000, TimeUnit.MILLISECONDS)\n                                                        .setKeepAliveStrategy((httpResponse, httpContext) -&gt; 10 * 1000)\n                                                        .build();\n\n            ClientHttpRequestFactory requestFactory = new HttpComponentsClientHttpRequestFactory(httpClient);\n            RestTemplate restTemplate = new RestTemplate(requestFactory);\n\n            return restTemplate;\n        } catch (IOException | CertificateException\n            | NoSuchAlgorithmException | UnrecoverableKeyException\n            | KeyStoreException | KeyManagementException e) {\n            log.error(&quot;Error!!!&quot;)\n        }\n\n        return null;\n    }\n\n    private void close(Closeable c) {\n        if (c != null) {\n            try {\n                c.close();\n            } catch (IOException e) {\n                // log\n            }\n        }\n    }\n}\n</code></pre>\n<p>I hope someone looking for a solution around using Azure Keyvault certificates in java Keystores can benefit from it.</p>\n"}],"owner":{"account_id":496401,"reputation":25022,"user_id":4148708,"accept_rate":70,"display_name":"evilSnobu"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6350,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":3,"score":7,"last_activity_date":1640068216,"creation_date":1593708932,"question_id":62701407,"body_markdown":"I&#39;m trying to fetch a certificate and its private key from Azure Key Vault then call a remote server and do client certificate authentication.\r\n\r\nThe first part works well (fetching from Key Vault), however i&#39;m completely stuck at importing the public and private material into KeyStore.\r\n\r\nI&#39;ve tried\r\n```\r\nkeyStore.load(publicKey, null);\r\nkeyStore.load(new ByteArrayInputStream(privateKey.getBytes()),\r\n    &quot;thePassphrase&quot;.toCharArray());\r\n```\r\nbut this leads to\r\n```\r\njava.io.IOException: DER input, Integer tag error\r\n        at java.base/sun.security.util.DerInputStream.getInteger(DerInputStream.java:192)\r\n        at java.base/sun.security.pkcs12.PKCS12KeyStore.engineLoad(PKCS12KeyStore.java:1995)\r\n        at java.base/sun.security.util.KeyStoreDelegator.engineLoad(KeyStoreDelegator.java:222)\r\n        at java.base/java.security.KeyStore.load(KeyStore.java:1479)\r\n```\r\n\r\nHere&#39;s the full thing minus what i don&#39;t know how to implement -\r\n\r\n```java\r\nDefaultAzureCredential credential = new DefaultAzureCredentialBuilder().build();\r\n\r\nSecretClient secretClient = new SecretClientBuilder()\r\n    .vaultUrl(&quot;https://&lt;myvault&gt;.vault.azure.net&quot;)\r\n\t.credential(credential)\r\n    .buildClient();\r\n\r\nCertificateClient certClient = new CertificateClientBuilder()\r\n    .vaultUrl(&quot;https://&lt;myvault&gt;.vault.azure.net&quot;)\r\n\t.credential(credential)\r\n    .buildClient();\r\n\r\n// Get the public part of the cert\r\nKeyVaultCertificateWithPolicy certificate = certClient.getCertificate(&quot;Joes-Crab-Shack&quot;);\r\nbyte[] publicKey = certificate.getCer();\r\n\r\n// Get the private key\r\nKeyVaultSecret secret = secretClient.getSecret(\r\n    certificate.getName(),\r\n    certificate.getProperties().getVersion());\r\nString privateKey = secret.getValue();\r\n\r\n// ***************\r\n// How do i get the cert and its private key into KeyStore?\r\nKeyStore keyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n// I&#39;ve also tried &quot;JKS&quot; but that leads to\r\n//    java.io.IOException: Invalid keystore format\r\nkeyStore.load(...)\r\n// ***************\r\n\r\n// Do client certificate authentication\r\nSSLContext sslContext = SSLContexts.custom().loadKeyMaterial(keyStore, null).build();\r\n\r\nCloseableHttpClient httpClient = HttpClients.custom().setSSLContext(sslContext).build();\r\nresponse = httpClient.execute(new HttpGet(&quot;https://remote.that.asks.for.client.cert/&quot;));\r\n\r\nInputStream inputStream = response.getEntity().getContent();\r\n\r\nbody = IOUtils.readInputStreamToString(inputStream, Charsets.UTF_8);\r\n```\r\n\r\nHow do i get the certificate and its private key into KeyStore so i can then use it in my HTTP client?","title":"Load certificate and private key into Java KeyStore","body":"<p>I'm trying to fetch a certificate and its private key from Azure Key Vault then call a remote server and do client certificate authentication.</p>\n<p>The first part works well (fetching from Key Vault), however i'm completely stuck at importing the public and private material into KeyStore.</p>\n<p>I've tried</p>\n<pre><code>keyStore.load(publicKey, null);\nkeyStore.load(new ByteArrayInputStream(privateKey.getBytes()),\n    &quot;thePassphrase&quot;.toCharArray());\n</code></pre>\n<p>but this leads to</p>\n<pre><code>java.io.IOException: DER input, Integer tag error\n        at java.base/sun.security.util.DerInputStream.getInteger(DerInputStream.java:192)\n        at java.base/sun.security.pkcs12.PKCS12KeyStore.engineLoad(PKCS12KeyStore.java:1995)\n        at java.base/sun.security.util.KeyStoreDelegator.engineLoad(KeyStoreDelegator.java:222)\n        at java.base/java.security.KeyStore.load(KeyStore.java:1479)\n</code></pre>\n<p>Here's the full thing minus what i don't know how to implement -</p>\n<pre class=\"lang-java prettyprint-override\"><code>DefaultAzureCredential credential = new DefaultAzureCredentialBuilder().build();\n\nSecretClient secretClient = new SecretClientBuilder()\n    .vaultUrl(&quot;https://&lt;myvault&gt;.vault.azure.net&quot;)\n    .credential(credential)\n    .buildClient();\n\nCertificateClient certClient = new CertificateClientBuilder()\n    .vaultUrl(&quot;https://&lt;myvault&gt;.vault.azure.net&quot;)\n    .credential(credential)\n    .buildClient();\n\n// Get the public part of the cert\nKeyVaultCertificateWithPolicy certificate = certClient.getCertificate(&quot;Joes-Crab-Shack&quot;);\nbyte[] publicKey = certificate.getCer();\n\n// Get the private key\nKeyVaultSecret secret = secretClient.getSecret(\n    certificate.getName(),\n    certificate.getProperties().getVersion());\nString privateKey = secret.getValue();\n\n// ***************\n// How do i get the cert and its private key into KeyStore?\nKeyStore keyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\n// I've also tried &quot;JKS&quot; but that leads to\n//    java.io.IOException: Invalid keystore format\nkeyStore.load(...)\n// ***************\n\n// Do client certificate authentication\nSSLContext sslContext = SSLContexts.custom().loadKeyMaterial(keyStore, null).build();\n\nCloseableHttpClient httpClient = HttpClients.custom().setSSLContext(sslContext).build();\nresponse = httpClient.execute(new HttpGet(&quot;https://remote.that.asks.for.client.cert/&quot;));\n\nInputStream inputStream = response.getEntity().getContent();\n\nbody = IOUtils.readInputStreamToString(inputStream, Charsets.UTF_8);\n</code></pre>\n<p>How do i get the certificate and its private key into KeyStore so i can then use it in my HTTP client?</p>\n"},{"tags":["java","android","android-studio","interstitial","mopub"],"comments":[{"owner":{"account_id":5055380,"reputation":256,"user_id":4058773,"display_name":"Adi Oz"},"score":0,"creation_date":1641043421,"post_id":70431351,"comment_id":124710986,"body_markdown":"Do you use proguard when building your app? did you check which proguard rules are required by MoPub?","body":"Do you use proguard when building your app? did you check which proguard rules are required by MoPub?"},{"owner":{"account_id":16445373,"reputation":613,"user_id":11880323,"display_name":"cmak"},"score":0,"creation_date":1641758625,"post_id":70431351,"comment_id":124884336,"body_markdown":"MoPub platform is going to get deprecated","body":"MoPub platform is going to get deprecated"}],"owner":{"account_id":6574621,"reputation":13,"user_id":5081218,"display_name":"zaryab tahir"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640067516,"creation_date":1640067516,"question_id":70431351,"body_markdown":"**MoPub SDK Version** :\r\n5.18.0\r\n\r\n**Android Studio Version** :\r\n2020.3.1\r\n\r\n**Gradle Version** :\r\n7.0.0\r\n\r\n**Device model and OS Version** :\r\nandroid, any model and version\r\n\r\n**Ad Unit IDs used in reproducing the issue** :\r\nInterstitial\r\n\r\n**Steps to reproduce the behavior** :\r\nCrash produced in only my firebase crashlytics that put my App in bad behaviour.\r\n\r\n**Crash Log** :\r\n\r\nFatal Exception: java.lang.RuntimeException\r\nUnable to start activity ComponentInfo{com.../com.mopub.mobileads.MoPubFullscreenActivity}: java.lang.ClassCastException: l8.o cannot be cast to java.lang.Comparable\r\n\r\n\r\nCaused by java.lang.ClassCastException: l8.o cannot be cast to java.lang.Comparable\r\n       at java.util.ComparableTimSort.countRunAndMakeAscending(ComparableTimSort.java:320)\r\n       at java.util.ComparableTimSort.sort(ComparableTimSort.java:188)\r\n       at java.util.Arrays.sort(Arrays.java:1302)\r\n       at java.util.Arrays.sort(Arrays.java:1485)\r\n       at java.util.ArrayList.sort(ArrayList.java:1470)\r\n       at java.util.Collections.sort(Collections.java:206)\r\n       at java.util.Collections.sort(Collections.java:159)\r\n       at kotlin.collections.CollectionsKt__MutableCollectionsJVMKt.sort(CollectionsKt__MutableCollectionsJVMKt.java:31)\r\n       at com.mopub.mobileads.VastVideoConfig.addFractionalTrackers(VastVideoConfig.kt:223)\r\n       at com.mopub.mobileads.VastVideoViewProgressRunnable.&lt;init&gt;(VastVideoViewProgressRunnable.kt:79)\r\n       at com.mopub.mobileads.VastVideoViewController.&lt;init&gt;(VastVideoViewController.kt:306)\r\n       at com.mopub.mobileads.FullscreenAdController.createVideoViewController(FullscreenAdController.java:350)\r\n       at com.mopub.mobileads.FullscreenAdController.&lt;init&gt;(FullscreenAdController.java:219)\r\n       at com.mopub.mobileads.MoPubFullscreenActivity.onCreate(MoPubFullscreenActivity.java:73)\r\n       at android.app.Activity.performCreate(Activity.java:8142)\r\n       at android.app.Activity.performCreate(Activity.java:8114)\r\n       at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1309)\r\n       at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3565)\r\n       at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3752)\r\n       at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\r\n       at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n       at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n       at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2178)\r\n       at android.os.Handler.dispatchMessage(Handler.java:106)\r\n       at android.os.Looper.loop(Looper.java:236)\r\n       at android.app.ActivityThread.main(ActivityThread.java:8051)\r\n       at java.lang.reflect.Method.invoke(Method.java)\r\n       at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:620)\r\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1011)","title":"com.mopub.mobileads.MoPubFullscreenActivity: java.lang.ClassCastException: l8.o cannot be cast to java.lang.Comparable","body":"<p><strong>MoPub SDK Version</strong> :\n5.18.0</p>\n<p><strong>Android Studio Version</strong> :\n2020.3.1</p>\n<p><strong>Gradle Version</strong> :\n7.0.0</p>\n<p><strong>Device model and OS Version</strong> :\nandroid, any model and version</p>\n<p><strong>Ad Unit IDs used in reproducing the issue</strong> :\nInterstitial</p>\n<p><strong>Steps to reproduce the behavior</strong> :\nCrash produced in only my firebase crashlytics that put my App in bad behaviour.</p>\n<p><strong>Crash Log</strong> :</p>\n<p>Fatal Exception: java.lang.RuntimeException\nUnable to start activity ComponentInfo{com.../com.mopub.mobileads.MoPubFullscreenActivity}: java.lang.ClassCastException: l8.o cannot be cast to java.lang.Comparable</p>\n<p>Caused by java.lang.ClassCastException: l8.o cannot be cast to java.lang.Comparable\nat java.util.ComparableTimSort.countRunAndMakeAscending(ComparableTimSort.java:320)\nat java.util.ComparableTimSort.sort(ComparableTimSort.java:188)\nat java.util.Arrays.sort(Arrays.java:1302)\nat java.util.Arrays.sort(Arrays.java:1485)\nat java.util.ArrayList.sort(ArrayList.java:1470)\nat java.util.Collections.sort(Collections.java:206)\nat java.util.Collections.sort(Collections.java:159)\nat kotlin.collections.CollectionsKt__MutableCollectionsJVMKt.sort(CollectionsKt__MutableCollectionsJVMKt.java:31)\nat com.mopub.mobileads.VastVideoConfig.addFractionalTrackers(VastVideoConfig.kt:223)\nat com.mopub.mobileads.VastVideoViewProgressRunnable.(VastVideoViewProgressRunnable.kt:79)\nat com.mopub.mobileads.VastVideoViewController.(VastVideoViewController.kt:306)\nat com.mopub.mobileads.FullscreenAdController.createVideoViewController(FullscreenAdController.java:350)\nat com.mopub.mobileads.FullscreenAdController.(FullscreenAdController.java:219)\nat com.mopub.mobileads.MoPubFullscreenActivity.onCreate(MoPubFullscreenActivity.java:73)\nat android.app.Activity.performCreate(Activity.java:8142)\nat android.app.Activity.performCreate(Activity.java:8114)\nat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1309)\nat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3565)\nat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3752)\nat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\nat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\nat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2178)\nat android.os.Handler.dispatchMessage(Handler.java:106)\nat android.os.Looper.loop(Looper.java:236)\nat android.app.ActivityThread.main(ActivityThread.java:8051)\nat java.lang.reflect.Method.invoke(Method.java)\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:620)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1011)</p>\n"},{"tags":["java","netbeans","out-of-memory"],"answers":[{"tags":[],"owner":{"account_id":1419439,"reputation":1433,"user_id":1344386,"accept_rate":100,"display_name":"Stefan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1396946700,"creation_date":1396938165,"answer_id":22929121,"question_id":22929009,"body_markdown":"What is the file size of the file you&#39;re trying to open? The only time I have seen this is when the file Netbeans is going to open is relatively large (not sure what threshold Netbeans uses to show this warning).\r\n\r\n\r\nIf it&#39;s a large text file with data you&#39;re reading (or writing) with your software, open it outside of Netbeans with something like [Notepad++][1].\r\n\r\n\r\n**Update**\r\n\r\nOkay, so it&#39;s clear now that a file that contains code is relatively large, and Netbeans is already warning you that it might be too large to be opened. I strongly recommend that you split that file into multiple files (multiple classes maybe)?\r\n\r\nExample:\r\n\r\n**Old situation**\r\n\r\n    public class Class1\r\n    {\r\n    \tpublic void doSomething()\r\n    \t{\r\n    \t\t//do stuff (1)\r\n    \t\t//do stuff (2)\r\n    \t}\r\n    }\r\n\r\n\r\n**New situation**\r\n\r\n    public class Class1\r\n    {\r\n    \r\n    \tprivate NewClass1 newClass1;\r\n    \tprivate NewClass2 newClass2;\r\n    \tprivate JComponent jComponent;\r\n    \r\n    \tpublic Class1()\r\n    \t{\r\n    \t\tnewClass1 = new NewClass1();\r\n    \t\tnewClass2 = new NewClass2();\r\n    \t\t//instantiating jComponent\r\n    \t}\r\n    \r\n    \tpublic void doSomething()\r\n    \t{\r\n    \t\tnewClass1.doSomethingSmaller(jComponent); //possibly with some return value\r\n    \t\tnewClass2.doSomethingSmallerToo(jComponent); //possibly with some return value\r\n    \t}\r\n    }\r\n    \r\n    public class NewClass1\r\n    {\r\n    \tpublic void doSomethingSmaller(JComponent jComponent)\r\n    \t{\r\n    \t\t//do stuff (1)\r\n    \t\tjComponent.doStuff();\r\n    \t}\r\n    }\r\n    \r\n    public class NewClass2\r\n    {\r\n    \tpublic void doSomethingSmallerToo(JComponent jComponent)\r\n    \t{\r\n    \t\t//do stuff (2)\r\n    \t\tjComponent.doOtherStuff();\r\n    \t]\r\n    }\r\n\r\nThose new classes should then be in separate files, which reduces the size of your file. It also encourages reusing (parts of) your code in other places in your code.\r\n\r\n  [1]: http://notepad-plus-plus.org/","title":"NetBeans is Showing Error file could cause outofmemoryerror netbeans","body":"<p>What is the file size of the file you're trying to open? The only time I have seen this is when the file Netbeans is going to open is relatively large (not sure what threshold Netbeans uses to show this warning).</p>\n\n<p>If it's a large text file with data you're reading (or writing) with your software, open it outside of Netbeans with something like <a href=\"http://notepad-plus-plus.org/\" rel=\"nofollow\">Notepad++</a>.</p>\n\n<p><strong>Update</strong></p>\n\n<p>Okay, so it's clear now that a file that contains code is relatively large, and Netbeans is already warning you that it might be too large to be opened. I strongly recommend that you split that file into multiple files (multiple classes maybe)?</p>\n\n<p>Example:</p>\n\n<p><strong>Old situation</strong></p>\n\n<pre><code>public class Class1\n{\n    public void doSomething()\n    {\n        //do stuff (1)\n        //do stuff (2)\n    }\n}\n</code></pre>\n\n<p><strong>New situation</strong></p>\n\n<pre><code>public class Class1\n{\n\n    private NewClass1 newClass1;\n    private NewClass2 newClass2;\n    private JComponent jComponent;\n\n    public Class1()\n    {\n        newClass1 = new NewClass1();\n        newClass2 = new NewClass2();\n        //instantiating jComponent\n    }\n\n    public void doSomething()\n    {\n        newClass1.doSomethingSmaller(jComponent); //possibly with some return value\n        newClass2.doSomethingSmallerToo(jComponent); //possibly with some return value\n    }\n}\n\npublic class NewClass1\n{\n    public void doSomethingSmaller(JComponent jComponent)\n    {\n        //do stuff (1)\n        jComponent.doStuff();\n    }\n}\n\npublic class NewClass2\n{\n    public void doSomethingSmallerToo(JComponent jComponent)\n    {\n        //do stuff (2)\n        jComponent.doOtherStuff();\n    ]\n}\n</code></pre>\n\n<p>Those new classes should then be in separate files, which reduces the size of your file. It also encourages reusing (parts of) your code in other places in your code.</p>\n"},{"tags":[],"owner":{"account_id":4226365,"reputation":394,"user_id":3459806,"accept_rate":82,"display_name":"Raider"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1396940554,"creation_date":1396940554,"answer_id":22929853,"question_id":22929009,"body_markdown":"If you couldn&#39;t reduce your class size try to add this in your **\\NetBeans\\harness\\etc\\app.conf**\r\n\r\n    default_options=&quot;-J-Xms24m -J-Xmx1024m&quot; ","title":"NetBeans is Showing Error file could cause outofmemoryerror netbeans","body":"<p>If you couldn't reduce your class size try to add this in your <strong>\\NetBeans\\harness\\etc\\app.conf</strong></p>\n\n<pre><code>default_options=\"-J-Xms24m -J-Xmx1024m\" \n</code></pre>\n"},{"tags":[],"owner":{"account_id":14943360,"reputation":1,"user_id":10789330,"display_name":"Adarsh Balachandran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640067445,"creation_date":1640067445,"answer_id":70431342,"question_id":22929009,"body_markdown":"I just got this warning and i was not able to open it directly from a reference to that class&#39;s method.\r\nso i did this to open(in case if its not opening through reference from a class)\r\nGo to Navigator -&gt;\r\nlocate file -&gt;\r\nopen , click YES\r\n","title":"NetBeans is Showing Error file could cause outofmemoryerror netbeans","body":"<p>I just got this warning and i was not able to open it directly from a reference to that class's method.\nso i did this to open(in case if its not opening through reference from a class)\nGo to Navigator -&gt;\nlocate file -&gt;\nopen , click YES</p>\n"}],"owner":{"account_id":3281906,"reputation":3459,"user_id":2762311,"accept_rate":74,"display_name":"Kishan Bheemajiyani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1190,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":22929121,"answer_count":3,"score":0,"last_activity_date":1640067445,"creation_date":1396937815,"question_id":22929009,"body_markdown":"Hello I am using netbeans editor for my Java Desktop application and i am getting error i mean warning like this\r\n\r\n    opening this file could cause outofmemoryerror netbeans\r\n\r\nThis warning shows up because I have a file containing code which is &gt;1MB. And after that I am not able to see error too its not pointing so how could i fix it?","title":"NetBeans is Showing Error file could cause outofmemoryerror netbeans","body":"<p>Hello I am using netbeans editor for my Java Desktop application and i am getting error i mean warning like this</p>\n\n<pre><code>opening this file could cause outofmemoryerror netbeans\n</code></pre>\n\n<p>This warning shows up because I have a file containing code which is >1MB. And after that I am not able to see error too its not pointing so how could i fix it?</p>\n"},{"tags":["java","spring","lru"],"answers":[{"tags":[],"owner":{"account_id":75804,"reputation":94815,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640059597,"creation_date":1640056439,"answer_id":70430260,"question_id":70430066,"body_markdown":"Take a closer look at the get method. The choices made   to maximize the number of concurrent readers mean the code doesn&#39;t enforce the exclusion needed to be able to use non-threadsafe collections. \r\n\r\nThe cache is accessed without any lock held. The authors want to avoid having to acquire a lock just to read from the cache. \r\n\r\nThe queue is accessed with a read lock, so there can be multiple concurrent readers. That requires the queue implementation to be threadsafe. \r\n\r\n(Of course if the code used a read lock to read from the cache, then the same issue with multiple readers would be true for the cache as well.)\r\n\r\n\r\nFor the question about using hashmap instead of CHM, part of what you get from using locks is memory visibility. If you use HashMap then when the cache is updated the get method also needs to lock in order to avoid all the issues around insufficiently-synchronized code like JIT optimizations and reorderings. \r\n\r\n","title":"Why does ConcurrentLruCache in Spring still use thread-safe maps and queues instead of ordinary maps and queues even when read-write lock are used?","body":"<p>Take a closer look at the get method. The choices made   to maximize the number of concurrent readers mean the code doesn't enforce the exclusion needed to be able to use non-threadsafe collections.</p>\n<p>The cache is accessed without any lock held. The authors want to avoid having to acquire a lock just to read from the cache.</p>\n<p>The queue is accessed with a read lock, so there can be multiple concurrent readers. That requires the queue implementation to be threadsafe.</p>\n<p>(Of course if the code used a read lock to read from the cache, then the same issue with multiple readers would be true for the cache as well.)</p>\n<p>For the question about using hashmap instead of CHM, part of what you get from using locks is memory visibility. If you use HashMap then when the cache is updated the get method also needs to lock in order to avoid all the issues around insufficiently-synchronized code like JIT optimizations and reorderings.</p>\n"}],"owner":{"account_id":7909307,"reputation":409,"user_id":5973816,"display_name":"Poison"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":615,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1640066258,"creation_date":1640053959,"question_id":70430066,"body_markdown":"[spring-framework/ConcurrentLruCache.java at main &#183; spring-projects/spring-framework &#183; GitHub](https://github.com/spring-projects/spring-framework/blob/main/spring-core/src/main/java/org/springframework/util/ConcurrentLruCache.java)\r\n\r\n#### Update\r\nBecause there may be multiple readers writing to the queue concurrently, the queue must use a thread-safe data structure, and the put operation of the cache is done in the write lock, can the implementation of the cache be replaced with a HashMap? Because the get method of ConcurrentHashMap is implemented without lock.\r\n\r\n&gt; Retrieval operations (including get) generally do not block, so may overlap with update operations (including put and remove). Retrievals reflect the results of the most recently completed update operations holding upon their onset. (More formally, an update operation for a given key bears a happens-before relation with any (non-null) retrieval for that key reporting the updated value.)\r\n\r\nFrom [ConcurrentHashMap (Java Platform SE 8 )](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html)","title":"Why does ConcurrentLruCache in Spring still use thread-safe maps and queues instead of ordinary maps and queues even when read-write lock are used?","body":"<p><a href=\"https://github.com/spring-projects/spring-framework/blob/main/spring-core/src/main/java/org/springframework/util/ConcurrentLruCache.java\" rel=\"nofollow noreferrer\">spring-framework/ConcurrentLruCache.java at main · spring-projects/spring-framework · GitHub</a></p>\n<h4>Update</h4>\n<p>Because there may be multiple readers writing to the queue concurrently, the queue must use a thread-safe data structure, and the put operation of the cache is done in the write lock, can the implementation of the cache be replaced with a HashMap? Because the get method of ConcurrentHashMap is implemented without lock.</p>\n<blockquote>\n<p>Retrieval operations (including get) generally do not block, so may overlap with update operations (including put and remove). Retrievals reflect the results of the most recently completed update operations holding upon their onset. (More formally, an update operation for a given key bears a happens-before relation with any (non-null) retrieval for that key reporting the updated value.)</p>\n</blockquote>\n<p>From <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html\" rel=\"nofollow noreferrer\">ConcurrentHashMap (Java Platform SE 8 )</a></p>\n"},{"tags":["java","graphql","reactive-feign-client"],"owner":{"account_id":6911872,"reputation":25,"user_id":5307396,"display_name":"Radar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1640065829,"creation_date":1640051351,"question_id":70429836,"body_markdown":"I have a GraphQL application running. In another application, I am trying to send mutation request in which a field is omitted (using Java). How can I ensure that GraphQL can handle my request as expected. For example if I have MyInput = {field1: &quot;val1&quot;, field2: null}, and I want to update field1 only. How can I construct a request such that GraphQL handles it as {field1: &quot;val1&quot;}?   \r\n```\r\nclass MyInput {\r\n    String field1;\r\n    String field2;\r\n}\r\n\r\nclass MyClient {\r\npublic void callGraphQlApi(String query, MyInput input, String optName) {\r\nMap&lt;String, Object&gt; vars = new HashMap&lt;&gt;();\r\nvars.put(&quot;request&quot;, input);\r\n//send GraphGL request using FeignClient POST request\r\n}\r\n}\r\n```","title":"Handle not present field in GraphQL request in Java","body":"<p>I have a GraphQL application running. In another application, I am trying to send mutation request in which a field is omitted (using Java). How can I ensure that GraphQL can handle my request as expected. For example if I have MyInput = {field1: &quot;val1&quot;, field2: null}, and I want to update field1 only. How can I construct a request such that GraphQL handles it as {field1: &quot;val1&quot;}?</p>\n<pre><code>class MyInput {\n    String field1;\n    String field2;\n}\n\nclass MyClient {\npublic void callGraphQlApi(String query, MyInput input, String optName) {\nMap&lt;String, Object&gt; vars = new HashMap&lt;&gt;();\nvars.put(&quot;request&quot;, input);\n//send GraphGL request using FeignClient POST request\n}\n}\n</code></pre>\n"},{"tags":["java","apache-kafka","microservices","batch-processing","apache-kafka-streams"],"answers":[{"tags":[],"owner":{"account_id":175930,"reputation":2593,"user_id":406290,"accept_rate":43,"display_name":"Kevin Hooke"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1640018258,"creation_date":1640018258,"answer_id":70425098,"question_id":70424979,"body_markdown":"&gt; How can I signal a Stream that all of the messages have arrived\r\n\r\nYou can do this using Streams and joins. Since joins are limited to 2 topics you&#39;ll need to do 2 joins to get the event where all 3 have occurred.\r\n\r\nJoin TopicA and TopicB to get the event when A and B have occurred. Join AB with TopicC to get the event where A, B and C occur.","title":"Are Kafka Streams Appropriate for Triggering Batch Processing of Records?","body":"<blockquote>\n<p>How can I signal a Stream that all of the messages have arrived</p>\n</blockquote>\n<p>You can do this using Streams and joins. Since joins are limited to 2 topics you'll need to do 2 joins to get the event where all 3 have occurred.</p>\n<p>Join TopicA and TopicB to get the event when A and B have occurred. Join AB with TopicC to get the event where A, B and C occur.</p>\n"}],"owner":{"account_id":7337005,"reputation":352,"user_id":5588032,"accept_rate":60,"display_name":"Pmsmm"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":603,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":70425098,"answer_count":1,"score":3,"last_activity_date":1640065757,"creation_date":1640017784,"question_id":70424979,"body_markdown":"**Context**\r\n==============\r\n\r\nI have three services in place, each of which generate a certain JSON payload (**and take different times to do so**) that is needed to be able to process a message which is the result of combining all three JSON payloads into a single payload. This final payload in turn is to be sent to another Kafka Topic so that it can then be consumed by another service.\r\n\r\nBelow you can find a diagram that better explains the problem at hand. The information aggregator service receives a request to aggregate information, it sends that request to a Kafka topic so that Service 1, Service 2 and Service 3 consume that request and send their data (JSON Payload) to 3 different Kafka Topics.\r\n\r\n[![Architecture of the Application with their main components][2]][2]\r\n\r\nThe Information Aggregator has to consume the messages from the three services (Which are sent to their respective Kafka Topics at very different times e.g. Service 1 takes half an hour to respond while service 2 and 3 take under 10 minutes) so that it can generate a final payload (Represented as **Aggregated Information**) to send to another Kafka Topic.\r\n\r\n**Research**\r\n-----------\r\n\r\nAfter having researched a lot about Kafka and Kafka Streams, I came across [this article][1] that provides some great insights on how this should be elaborated. \r\n\r\nIn this article, the author consumes messages from a single topic while in my specific use case I must consume from three different topics, wait for each message from each topic with a certain ID to arrive so that I can then signal my process that it can proceed to consume the 3 messages with the same ID in different topics to generate the final message and send that final message to another Kafka topic (Which then another service will consume that message).\r\n\r\n**Thought Out Solution**\r\n---\r\n\r\nMy thoughts are that I need to have a Kafka Stream checking all three topics and when it sees that has all the 3 messages available, send a message to a kafka topic called e.g. TopicEvents from which the Information Aggregator will be consuming and by consuming the message will know exactly which messages to get from which topic, partition and offset and then can proceed to send the final payload to another Kafka Topic.\r\n\r\nQuestions\r\n==\r\n\r\n - Am I making a very wrong use of Kafka Streams and Batch\r\n   Processing?\r\n\r\n - How can I signal a Stream that all of the messages have arrived so that it can generate the message to place in the TopicEvent so as to signal the Information Aggregator that all the messages in the different topics have arrived and are ready to be consumed?\r\n\r\nSorry for this long post, any pointers that you can provide will be very helpful and thank you in advance\r\n\r\n  [1]: https://www.xeotek.com/batch-processing-with-apache-kafka/\r\n  [2]: https://i.stack.imgur.com/CKA7t.png","title":"Are Kafka Streams Appropriate for Triggering Batch Processing of Records?","body":"<h1><strong>Context</strong></h1>\n<p>I have three services in place, each of which generate a certain JSON payload (<strong>and take different times to do so</strong>) that is needed to be able to process a message which is the result of combining all three JSON payloads into a single payload. This final payload in turn is to be sent to another Kafka Topic so that it can then be consumed by another service.</p>\n<p>Below you can find a diagram that better explains the problem at hand. The information aggregator service receives a request to aggregate information, it sends that request to a Kafka topic so that Service 1, Service 2 and Service 3 consume that request and send their data (JSON Payload) to 3 different Kafka Topics.</p>\n<p><a href=\"https://i.stack.imgur.com/CKA7t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CKA7t.png\" alt=\"Architecture of the Application with their main components\" /></a></p>\n<p>The Information Aggregator has to consume the messages from the three services (Which are sent to their respective Kafka Topics at very different times e.g. Service 1 takes half an hour to respond while service 2 and 3 take under 10 minutes) so that it can generate a final payload (Represented as <strong>Aggregated Information</strong>) to send to another Kafka Topic.</p>\n<h2><strong>Research</strong></h2>\n<p>After having researched a lot about Kafka and Kafka Streams, I came across <a href=\"https://www.xeotek.com/batch-processing-with-apache-kafka/\" rel=\"nofollow noreferrer\">this article</a> that provides some great insights on how this should be elaborated.</p>\n<p>In this article, the author consumes messages from a single topic while in my specific use case I must consume from three different topics, wait for each message from each topic with a certain ID to arrive so that I can then signal my process that it can proceed to consume the 3 messages with the same ID in different topics to generate the final message and send that final message to another Kafka topic (Which then another service will consume that message).</p>\n<h2><strong>Thought Out Solution</strong></h2>\n<p>My thoughts are that I need to have a Kafka Stream checking all three topics and when it sees that has all the 3 messages available, send a message to a kafka topic called e.g. TopicEvents from which the Information Aggregator will be consuming and by consuming the message will know exactly which messages to get from which topic, partition and offset and then can proceed to send the final payload to another Kafka Topic.</p>\n<h1>Questions</h1>\n<ul>\n<li><p>Am I making a very wrong use of Kafka Streams and Batch\nProcessing?</p>\n</li>\n<li><p>How can I signal a Stream that all of the messages have arrived so that it can generate the message to place in the TopicEvent so as to signal the Information Aggregator that all the messages in the different topics have arrived and are ready to be consumed?</p>\n</li>\n</ul>\n<p>Sorry for this long post, any pointers that you can provide will be very helpful and thank you in advance</p>\n"},{"tags":["java","file","delete-file"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1640058900,"post_id":70430329,"comment_id":124499722,"body_markdown":"This question is too broad.   There is no specific question here. Perhaps it would be better asked on CodeReview ... although I doubt that they will be happy reviewing code where the identifiers and comments are not in English.  Perhaps you could ask on https://es.stackoverflow.com","body":"This question is too broad.   There is no specific question here. Perhaps it would be better asked on CodeReview ... although I doubt that they will be happy reviewing code where the identifiers and comments are not in English.  Perhaps you could ask on <a href=\"https://es.stackoverflow.com\">es.stackoverflow.com</a>"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1640059103,"post_id":70430329,"comment_id":124499750,"body_markdown":"However, one problem I can see is that your I/O methods have potential resource leaks in them because the streams are not closed when there is an exception.  Read about Java 7+ *try with resources*.  That&#39;s the best way to fix the problem.","body":"However, one problem I can see is that your I/O methods have potential resource leaks in them because the streams are not closed when there is an exception.  Read about Java 7+ <i>try with resources</i>.  That&#39;s the best way to fix the problem."}],"answers":[{"tags":[],"owner":{"account_id":23707148,"reputation":21,"user_id":17729476,"display_name":"AKSHAY BHADERIYA"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640064933,"creation_date":1640064933,"answer_id":70431077,"question_id":70430329,"body_markdown":"You can use libraries like Java.File for doing this operation.","title":"java delete text from a file","body":"<p>You can use libraries like Java.File for doing this operation.</p>\n"}],"owner":{"account_id":4221948,"reputation":1,"user_id":3456516,"display_name":"user3456516"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1640075527,"answer_count":1,"score":-2,"last_activity_date":1640064933,"creation_date":1640057200,"question_id":70430329,"body_markdown":"i created a method that removes text from a file. but it is not the best solution. can you please help me improve it\r\n\r\nit work as follow:\r\n\r\n1.use the method buscarIndiceLibro to find the position of the  text to delete\r\n2.call the method listarLibros to load the content of the hole file.\r\n3.remove from the array the text using the position\r\n4.  write again in the file.\r\n///////////////////////\r\n\r\n\r\n    @Override\r\n        public void borrarLibroDeArchivo(String nombrelibroBorrar, String nombreRecurso) throws ErrorEscrituraDatos {\r\n                   \r\n    try {\r\n                \r\n                int posicion =  this.buscarIndiceLibro(nombrelibroBorrar, nombreRecurso);\r\n                System.out.println(&quot;posicion&quot;+ posicion+&quot;\\n&quot;);\r\n                var catalogocompleto=   this.listarLibros(nombreRecurso);\r\n                System.out.println(&quot;catalogo completo&quot;+ catalogocompleto+&quot;\\n&quot;);\r\n                catalogocompleto.remove(posicion);\r\n               \r\n            \r\n                try {\r\n                    PrintWriter sobreEscribir = new PrintWriter(new FileWriter(nombreRecurso));\r\n                    \r\n                    for( libro posicionArray: catalogocompleto){\r\n                    \r\n                        libro agregarArchivo =posicionArray;\r\n                    \r\n                    sobreEscribir.println(agregarArchivo.toString());\r\n                    }\r\n                    \r\n                    \r\n                    \r\n                    \r\n                    \r\n                    \r\n                    \r\n                    sobreEscribir.close();\r\n                    \r\n                    // System.out.println(&quot;el nuevo catalogo de libros es: &quot;+ this.listarLibros(nombreRecurso));\r\n                } catch (IOException ex) {\r\n                    ex.printStackTrace(System.out);\r\n                    System.out.println(&quot; error al escribir el archivo&quot;);\r\n                }\r\n                \r\n                \r\n            } catch (ErrorLeyendoDatos ex) {\r\n                ex.printStackTrace(System.out);\r\n            }\r\n    \r\n    \r\n    \r\n        }\r\n\r\n\r\n    \r\n //////////////       \r\n\r\n    @Override\r\n        public List&lt;libro&gt; listarLibros(String nombreRecurso) throws ErrorLeyendoDatos {\r\n            var archivo = new File(nombreRecurso);\r\n            List&lt;libro&gt; catalogoLibros = new ArrayList&lt;&gt;();\r\n            try {\r\n                //cargar el contenido del archivo en memoria\r\n                BufferedReader datosEntrada = new BufferedReader(new FileReader(archivo));\r\n                // creo una variable para leer cada linea\r\n                String leerLinea = null;\r\n                leerLinea = datosEntrada.readLine();\r\n                while (leerLinea != null) {\r\n                    // se crea un objeto tipo libro para meter al array\r\n                    libro nombreLibro = new libro(leerLinea);\r\n                    catalogoLibros.add(nombreLibro);\r\n                    leerLinea = datosEntrada.readLine();\r\n                }\r\n                datosEntrada.close();\r\n            } catch (FileNotFoundException ex) {\r\n                // atrapa el error al leer el archivo\r\n                ex.printStackTrace(System.out);\r\n                throw new ErrorLeyendoDatos(&quot;error al listar las peliculas&quot; + ex.getMessage());\r\n            } catch (IOException ex) {\r\n                // atrapa el erro al leer la linea\r\n                ex.printStackTrace();\r\n                throw new ErrorLeyendoDatos(&quot;error al leer la Pelicula&quot; + ex.getMessage());\r\n            }\r\n            return catalogoLibros;\r\n        }\r\n\r\n////////////////////////////////\r\n\r\n\r\n    public int buscarIndiceLibro(String nombreLibroBuscar, String nombreRecurso) throws ErrorLeyendoDatos {\r\n            var archivo = new File(nombreRecurso);\r\n            int posicion = 0;\r\n            try {\r\n                var datosEntrada = new BufferedReader(new FileReader(archivo));\r\n                var leerlinea = datosEntrada.readLine();\r\n                int index = 0;\r\n                while (leerlinea != null) {\r\n                    if (nombreLibroBuscar != null &amp;&amp; nombreLibroBuscar.equalsIgnoreCase(leerlinea)) {\r\n                        posicion = index;\r\n                        break;\r\n                    }\r\n                    leerlinea = datosEntrada.readLine();\r\n                    index++;\r\n                }\r\n                datosEntrada.close();\r\n            } catch (FileNotFoundException ex) {\r\n                ex.printStackTrace();\r\n                throw new ErrorLeyendoDatos(&quot;error leyendo el archivo&quot; + ex.getMessage());\r\n            } catch (IOException ex) {\r\n                ex.printStackTrace(System.out);\r\n                throw new ErrorLeyendoDatos(&quot;error leyendo el archivo&quot; + ex.getMessage());\r\n            }\r\n            return posicion;\r\n        }\r\n\r\n///////////////////////////////**\r\n\r\nalso tried to use  replaceall without success\r\n\r\n\r\n     **// metodo no funciono\r\n    //\r\n    //        try {\r\n    //            \r\n    //            \r\n    //            \r\n    //            \r\n    //            BufferedReader leerarchivo = new BufferedReader(new FileReader(archivo));\r\n    //            String archivoCompleto = leerarchivo.toString();\r\n    //            System.out.println(&quot;El contenido completo del archivo es &quot; + archivoCompleto);\r\n    //          ///borrar la pelicula\r\n    //            var archivoEditado = archivoCompleto.replaceAll(nombrelibroBorrar, &quot;&quot;);\r\n    //            //volver a escribir el archivo\r\n    //            PrintWriter sobreescribir = new PrintWriter(new FileWriter(nombreRecurso));\r\n    //            sobreescribir.append(archivoEditado);\r\n    //             sobreescribir.close();\r\n    //\r\n    //            leerarchivo.close();\r\n    //           \r\n    //\r\n    //        } catch (IOException ex) {\r\n    //            ex.printStackTrace(System.out);\r\n    //            throw new ErrorEscrituraDatos(&quot;error al eliminar la pelicula&quot; + ex.getMessage());\r\n    //        }\r\n    \r\n    // fin metodo no funciono**\r\n\r\n\r\nThank you for your assistance\r\n\r\n\r\n\r\n","title":"java delete text from a file","body":"<p>i created a method that removes text from a file. but it is not the best solution. can you please help me improve it</p>\n<p>it work as follow:</p>\n<p>1.use the method buscarIndiceLibro to find the position of the  text to delete\n2.call the method listarLibros to load the content of the hole file.\n3.remove from the array the text using the position\n4.  write again in the file.\n///////////////////////</p>\n<pre><code>@Override\n    public void borrarLibroDeArchivo(String nombrelibroBorrar, String nombreRecurso) throws ErrorEscrituraDatos {\n               \ntry {\n            \n            int posicion =  this.buscarIndiceLibro(nombrelibroBorrar, nombreRecurso);\n            System.out.println(&quot;posicion&quot;+ posicion+&quot;\\n&quot;);\n            var catalogocompleto=   this.listarLibros(nombreRecurso);\n            System.out.println(&quot;catalogo completo&quot;+ catalogocompleto+&quot;\\n&quot;);\n            catalogocompleto.remove(posicion);\n           \n        \n            try {\n                PrintWriter sobreEscribir = new PrintWriter(new FileWriter(nombreRecurso));\n                \n                for( libro posicionArray: catalogocompleto){\n                \n                    libro agregarArchivo =posicionArray;\n                \n                sobreEscribir.println(agregarArchivo.toString());\n                }\n                \n                \n                \n                \n                \n                \n                \n                sobreEscribir.close();\n                \n                // System.out.println(&quot;el nuevo catalogo de libros es: &quot;+ this.listarLibros(nombreRecurso));\n            } catch (IOException ex) {\n                ex.printStackTrace(System.out);\n                System.out.println(&quot; error al escribir el archivo&quot;);\n            }\n            \n            \n        } catch (ErrorLeyendoDatos ex) {\n            ex.printStackTrace(System.out);\n        }\n\n\n\n    }\n</code></pre>\n<p>//////////////</p>\n<pre><code>@Override\n    public List&lt;libro&gt; listarLibros(String nombreRecurso) throws ErrorLeyendoDatos {\n        var archivo = new File(nombreRecurso);\n        List&lt;libro&gt; catalogoLibros = new ArrayList&lt;&gt;();\n        try {\n            //cargar el contenido del archivo en memoria\n            BufferedReader datosEntrada = new BufferedReader(new FileReader(archivo));\n            // creo una variable para leer cada linea\n            String leerLinea = null;\n            leerLinea = datosEntrada.readLine();\n            while (leerLinea != null) {\n                // se crea un objeto tipo libro para meter al array\n                libro nombreLibro = new libro(leerLinea);\n                catalogoLibros.add(nombreLibro);\n                leerLinea = datosEntrada.readLine();\n            }\n            datosEntrada.close();\n        } catch (FileNotFoundException ex) {\n            // atrapa el error al leer el archivo\n            ex.printStackTrace(System.out);\n            throw new ErrorLeyendoDatos(&quot;error al listar las peliculas&quot; + ex.getMessage());\n        } catch (IOException ex) {\n            // atrapa el erro al leer la linea\n            ex.printStackTrace();\n            throw new ErrorLeyendoDatos(&quot;error al leer la Pelicula&quot; + ex.getMessage());\n        }\n        return catalogoLibros;\n    }\n</code></pre>\n<p>////////////////////////////////</p>\n<pre><code>public int buscarIndiceLibro(String nombreLibroBuscar, String nombreRecurso) throws ErrorLeyendoDatos {\n        var archivo = new File(nombreRecurso);\n        int posicion = 0;\n        try {\n            var datosEntrada = new BufferedReader(new FileReader(archivo));\n            var leerlinea = datosEntrada.readLine();\n            int index = 0;\n            while (leerlinea != null) {\n                if (nombreLibroBuscar != null &amp;&amp; nombreLibroBuscar.equalsIgnoreCase(leerlinea)) {\n                    posicion = index;\n                    break;\n                }\n                leerlinea = datosEntrada.readLine();\n                index++;\n            }\n            datosEntrada.close();\n        } catch (FileNotFoundException ex) {\n            ex.printStackTrace();\n            throw new ErrorLeyendoDatos(&quot;error leyendo el archivo&quot; + ex.getMessage());\n        } catch (IOException ex) {\n            ex.printStackTrace(System.out);\n            throw new ErrorLeyendoDatos(&quot;error leyendo el archivo&quot; + ex.getMessage());\n        }\n        return posicion;\n    }\n</code></pre>\n<p>///////////////////////////////**</p>\n<p>also tried to use  replaceall without success</p>\n<pre><code> **// metodo no funciono\n//\n//        try {\n//            \n//            \n//            \n//            \n//            BufferedReader leerarchivo = new BufferedReader(new FileReader(archivo));\n//            String archivoCompleto = leerarchivo.toString();\n//            System.out.println(&quot;El contenido completo del archivo es &quot; + archivoCompleto);\n//          ///borrar la pelicula\n//            var archivoEditado = archivoCompleto.replaceAll(nombrelibroBorrar, &quot;&quot;);\n//            //volver a escribir el archivo\n//            PrintWriter sobreescribir = new PrintWriter(new FileWriter(nombreRecurso));\n//            sobreescribir.append(archivoEditado);\n//             sobreescribir.close();\n//\n//            leerarchivo.close();\n//           \n//\n//        } catch (IOException ex) {\n//            ex.printStackTrace(System.out);\n//            throw new ErrorEscrituraDatos(&quot;error al eliminar la pelicula&quot; + ex.getMessage());\n//        }\n\n// fin metodo no funciono**\n</code></pre>\n<p>Thank you for your assistance</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":3146783,"reputation":11131,"user_id":2661118,"display_name":"Gopal Gopi"},"score":0,"creation_date":1384152760,"post_id":19900402,"comment_id":29606999,"body_markdown":"how and what you want to display then?","body":"how and what you want to display then?"},{"owner":{"account_id":1112634,"reputation":3922,"user_id":1102799,"accept_rate":56,"display_name":"Rethinavel"},"score":1,"creation_date":1384152853,"post_id":19900402,"comment_id":29607033,"body_markdown":"@Software sainath For the 3rd one 100/250 = 0.04. The result above is o.0.","body":"@Software sainath For the 3rd one 100/250 = 0.04. The result above is o.0."},{"owner":{"account_id":2602697,"reputation":820,"user_id":2254638,"accept_rate":39,"display_name":"pitu"},"score":0,"creation_date":1384152883,"post_id":19900402,"comment_id":29607042,"body_markdown":"100/250=0.4 &amp; 1/5 =0.2 ,so how it is correct, why 0.0 ?","body":"100/250=0.4 &amp; 1/5 =0.2 ,so how it is correct, why 0.0 ?"},{"owner":{"account_id":1588352,"reputation":273,"user_id":1472234,"display_name":"Pawan Kumar"},"score":1,"creation_date":1384152943,"post_id":19900402,"comment_id":29607057,"body_markdown":"I think you&#39;re looking to get a floating point values in the log. You should be doing `Float.toString(100f/50)` instead of `Float.toString(100/50)`","body":"I think you&#39;re looking to get a floating point values in the log. You should be doing <code>Float.toString(100f&#47;50)</code> instead of <code>Float.toString(100&#47;50)</code>"},{"owner":{"account_id":1875383,"reputation":1040,"user_id":1696704,"accept_rate":35,"display_name":"Software Sainath"},"score":0,"creation_date":1384152999,"post_id":19900402,"comment_id":29607081,"body_markdown":"Yeah You are doing Integer Division and result is definitely an integer and later you are casting to float thats why it is adding .0 to the int","body":"Yeah You are doing Integer Division and result is definitely an integer and later you are casting to float thats why it is adding .0 to the int"},{"owner":{"account_id":2602697,"reputation":820,"user_id":2254638,"accept_rate":39,"display_name":"pitu"},"score":0,"creation_date":1384153195,"post_id":19900402,"comment_id":29607151,"body_markdown":"ok thnak you all, all you are right,","body":"ok thnak you all, all you are right,"}],"answers":[{"tags":[],"owner":{"account_id":2409874,"reputation":2850,"user_id":2105241,"accept_rate":33,"display_name":"Ahmad Raza"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1384152876,"creation_date":1384152876,"answer_id":19900506,"question_id":19900402,"body_markdown":"Use this code.\r\n\r\nLog.i(&quot;100/50&quot;, Float.toString(100/50f));\r\nLog.i(&quot;100/100&quot;, Float.toString(100/100f));\r\nLog.i(&quot;100/250&quot;, Float.toString(100/250f));\r\nLog.i(&quot;1/5&quot;, Float.toString(1/5f));\r\n\r\nHope it will work for you.","title":"Float to String conversion in android","body":"<p>Use this code.</p>\n\n<p>Log.i(\"100/50\", Float.toString(100/50f));\nLog.i(\"100/100\", Float.toString(100/100f));\nLog.i(\"100/250\", Float.toString(100/250f));\nLog.i(\"1/5\", Float.toString(1/5f));</p>\n\n<p>Hope it will work for you.</p>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1384152892,"creation_date":1384152892,"answer_id":19900509,"question_id":19900402,"body_markdown":"You need to use floats instead of ints, try `Log.i(&quot;100/50&quot;, Float.toString(100f/50));` this makes Java to use float arithmetic, otherwise it does int division then converts the result to float\r\n","title":"Float to String conversion in android","body":"<p>You need to use floats instead of ints, try <code>Log.i(\"100/50\", Float.toString(100f/50));</code> this makes Java to use float arithmetic, otherwise it does int division then converts the result to float</p>\n"},{"tags":[],"owner":{"account_id":2072408,"reputation":6907,"user_id":1846558,"accept_rate":25,"display_name":"Jitender Dev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1384153412,"creation_date":1384153009,"answer_id":19900541,"question_id":19900402,"body_markdown":"Do like this\r\n\r\n    Log.i(&quot;100/250&quot;, Float.toString(100f/250f));\r\n    Log.i(&quot;1/5&quot;, Float.toString(1f/5f));\r\n\r\noutput is\r\n\r\n    11-11 12:25:32.198: I/100/250(351): 0.4\r\n    11-11 12:25:32.208: I/1/5(351): 0.2\r\n\r\nFloat.toString takes an input floating point\r\n\r\n    public static String toString (float f)\r\n\r\n    where f is the float to convert to a string.\r\n\r\nMore information is available on [Developers Website][1].\r\n\r\n\r\n  [1]: http://developer.android.com/reference/java/lang/Float.html","title":"Float to String conversion in android","body":"<p>Do like this</p>\n\n<pre><code>Log.i(\"100/250\", Float.toString(100f/250f));\nLog.i(\"1/5\", Float.toString(1f/5f));\n</code></pre>\n\n<p>output is</p>\n\n<pre><code>11-11 12:25:32.198: I/100/250(351): 0.4\n11-11 12:25:32.208: I/1/5(351): 0.2\n</code></pre>\n\n<p>Float.toString takes an input floating point</p>\n\n<pre><code>public static String toString (float f)\n\nwhere f is the float to convert to a string.\n</code></pre>\n\n<p>More information is available on <a href=\"http://developer.android.com/reference/java/lang/Float.html\" rel=\"nofollow\">Developers Website</a>.</p>\n"},{"tags":[],"owner":{"account_id":38907,"reputation":53159,"user_id":111988,"accept_rate":74,"display_name":"Sunil Kumar Sahoo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640064859,"creation_date":1384153028,"answer_id":19900546,"question_id":19900402,"body_markdown":"You are performing division of two integers. So by default output will be in integer. Instead of that try to type cast the dividend into float e.g. (float)100/250, so the output will be in float and you will get proper result.\r\n\r\nE.g. instead of 100/250 try (float)100/250 or 100f/250.","title":"Float to String conversion in android","body":"<p>You are performing division of two integers. So by default output will be in integer. Instead of that try to type cast the dividend into float e.g. (float)100/250, so the output will be in float and you will get proper result.</p>\n<p>E.g. instead of 100/250 try (float)100/250 or 100f/250.</p>\n"}],"owner":{"account_id":2602697,"reputation":820,"user_id":2254638,"accept_rate":39,"display_name":"pitu"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11653,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":19900509,"answer_count":4,"score":0,"last_activity_date":1640064859,"creation_date":1384152395,"question_id":19900402,"body_markdown":"i am trying simple calculation of float value but the output are not proper\r\n\r\n    Log.i(&quot;100/50&quot;, Float.toString(100/50));\r\n    Log.i(&quot;100/100&quot;, Float.toString(100/100));\r\n    Log.i(&quot;100/250&quot;, Float.toString(100/250));\r\n    Log.i(&quot;1/5&quot;, Float.toString(1/5));\r\n\r\nlogcat output\r\n\r\n    11-10 23:36:23.677: I/100/50(28562): 2.0\r\n    11-10 23:36:23.677: I/100/100(28562): 1.0\r\n    11-10 23:36:23.685: I/100/250(28562): 0.0\r\n    11-10 23:38:23.685: I/1/5(28562): 0.0\r\n\r\nits a simple calculation of float, why its displaying such answer\r\n","title":"Float to String conversion in android","body":"<p>i am trying simple calculation of float value but the output are not proper</p>\n\n<pre><code>Log.i(\"100/50\", Float.toString(100/50));\nLog.i(\"100/100\", Float.toString(100/100));\nLog.i(\"100/250\", Float.toString(100/250));\nLog.i(\"1/5\", Float.toString(1/5));\n</code></pre>\n\n<p>logcat output</p>\n\n<pre><code>11-10 23:36:23.677: I/100/50(28562): 2.0\n11-10 23:36:23.677: I/100/100(28562): 1.0\n11-10 23:36:23.685: I/100/250(28562): 0.0\n11-10 23:38:23.685: I/1/5(28562): 0.0\n</code></pre>\n\n<p>its a simple calculation of float, why its displaying such answer</p>\n"},{"tags":["java","if-statement","conditional-statements"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1639941681,"post_id":70414609,"comment_id":124471262,"body_markdown":"Please read: [Why not upload images of code/errors when asking a question?](https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-errors-when-asking-a-question) --- Please read: [Why is “Can someone help me?” not an actual question?](https://meta.stackoverflow.com/questions/284236/why-is-can-someone-help-me-not-an-actual-question)","body":"Please read: <a href=\"https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-errors-when-asking-a-question\">Why not upload images of code/errors when asking a question?</a> --- Please read: <a href=\"https://meta.stackoverflow.com/questions/284236/why-is-can-someone-help-me-not-an-actual-question\">Why is “Can someone help me?” not an actual question?</a>"},{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1639941953,"post_id":70414609,"comment_id":124471319,"body_markdown":"HOw did you get a negative value for c?","body":"HOw did you get a negative value for c?"}],"answers":[{"tags":[],"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1639942433,"creation_date":1639942433,"answer_id":70414712,"question_id":70414609,"body_markdown":"We want to display the temperature closest to `0`, i.e. the temperature whose absolute value is smallest. The code presented is already pretty close. There is just one small bug in this line:\r\n\r\n    if (Math.abs(inp) &lt; c)\r\n\r\nWe compare the absolute value of `inp` against the value of `c`. Looking at the body of the `if`, we see that `c` is set to the value of `inp`. The value of `inp` can be negative, thus `c` can be negative. Going back to the `if`-condition: as soon as `c` is negative, `Math.abs(inp) &lt; c` will always evaluate to `false`. Hence, we have to also take the absolute value of `c` in the condition:\r\n\r\n    if (Math.abs(inp) &lt; Math.abs(c))\r\n\r\n[&lt;kbd&gt;Ideone demo&lt;/kbd&gt;][Ideone]\r\n\r\nThis will produce the expected output.\r\n\r\n[Ideone]: https://ideone.com/BfQxdN","title":"Unexpected output while trying to display the temperature closest to zero (java)","body":"<p>We want to display the temperature closest to <code>0</code>, i.e. the temperature whose absolute value is smallest. The code presented is already pretty close. There is just one small bug in this line:</p>\n<pre><code>if (Math.abs(inp) &lt; c)\n</code></pre>\n<p>We compare the absolute value of <code>inp</code> against the value of <code>c</code>. Looking at the body of the <code>if</code>, we see that <code>c</code> is set to the value of <code>inp</code>. The value of <code>inp</code> can be negative, thus <code>c</code> can be negative. Going back to the <code>if</code>-condition: as soon as <code>c</code> is negative, <code>Math.abs(inp) &lt; c</code> will always evaluate to <code>false</code>. Hence, we have to also take the absolute value of <code>c</code> in the condition:</p>\n<pre><code>if (Math.abs(inp) &lt; Math.abs(c))\n</code></pre>\n<p><a href=\"https://ideone.com/BfQxdN\" rel=\"nofollow noreferrer\"><kbd>Ideone demo</kbd></a></p>\n<p>This will produce the expected output.</p>\n"},{"tags":[],"owner":{"account_id":15006333,"reputation":66,"user_id":10832295,"display_name":"Aziz Gasimov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639999664,"creation_date":1639999664,"answer_id":70421100,"question_id":70414609,"body_markdown":"The question is not asked properly but nevertheless, I will try to answer according to my best understanding. So the problem is when you run the program you are entering input in the wrong way for example you enter the number of temperatures that will be compared and then add the temperatures one after the other which in this case it is not accepted as a valid number instead it should be followed by Enter. Also, your code is not producing the correct result you have a logic error.","title":"Unexpected output while trying to display the temperature closest to zero (java)","body":"<p>The question is not asked properly but nevertheless, I will try to answer according to my best understanding. So the problem is when you run the program you are entering input in the wrong way for example you enter the number of temperatures that will be compared and then add the temperatures one after the other which in this case it is not accepted as a valid number instead it should be followed by Enter. Also, your code is not producing the correct result you have a logic error.</p>\n"}],"owner":{"account_id":23406965,"reputation":13,"user_id":17469215,"display_name":"Aqua"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70414712,"answer_count":2,"score":0,"last_activity_date":1640064682,"creation_date":1639941620,"question_id":70414609,"body_markdown":"```\r\nimport java.util.*;\r\nclass Solution\r\n{\r\n\r\n    public static void main(String args[]) \r\n    {\r\n        Scanner sc = new Scanner(System.in);\r\n        int n = sc.nextInt();\r\n        int c=5526;\r\n        int inp;\r\n        for(int a=0;a&lt;n;a++)\r\n        {\r\n            inp=sc.nextInt();\r\n            if(Math.abs(inp)&lt;c)\r\n            {\r\n                c=inp;\r\n            }\r\n        }\r\n        System.out.print(c);\r\n    }\r\n}\r\n```\r\n\r\nInput:  \r\n![Inputs][1]\r\n\r\nError:  \r\n![Error][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kBZal.png\r\n  [2]: https://i.stack.imgur.com/EiKvX.png\r\n\r\nI don&#39;t know what the problem is, I cant *try* anything cuz I don&#39;t even know where the bug is.","title":"Unexpected output while trying to display the temperature closest to zero (java)","body":"<pre><code>import java.util.*;\nclass Solution\n{\n\n    public static void main(String args[]) \n    {\n        Scanner sc = new Scanner(System.in);\n        int n = sc.nextInt();\n        int c=5526;\n        int inp;\n        for(int a=0;a&lt;n;a++)\n        {\n            inp=sc.nextInt();\n            if(Math.abs(inp)&lt;c)\n            {\n                c=inp;\n            }\n        }\n        System.out.print(c);\n    }\n}\n</code></pre>\n<p>Input:<br />\n<img src=\"https://i.stack.imgur.com/kBZal.png\" alt=\"Inputs\" /></p>\n<p>Error:<br />\n<img src=\"https://i.stack.imgur.com/EiKvX.png\" alt=\"Error\" /></p>\n<p>I don't know what the problem is, I cant <em>try</em> anything cuz I don't even know where the bug is.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8250,"page":1742,"page_size":100}
