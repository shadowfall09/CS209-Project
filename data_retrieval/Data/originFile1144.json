{"items":[{"tags":["java","xml","jackson"],"answers":[{"tags":[],"owner":{"account_id":16036243,"reputation":154,"user_id":11573887,"display_name":"Henry Xiloj Herrera"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659323154,"creation_date":1659323154,"answer_id":73188471,"question_id":73188004,"body_markdown":"Create two classes:\r\n\r\n```\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlElementWrapper;\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlRootElement;\r\n\r\n@JacksonXmlRootElement(localName = &quot;root&quot;)\r\npublic class Root {\r\n\r\n\t@JacksonXmlProperty(localName = &quot;row&quot;)\r\n\t@JacksonXmlElementWrapper(useWrapping = false)\r\n\tprivate Row[] row;\r\n\r\n\tpublic Row[] getRow() {\r\n\t\treturn row;\r\n\t}\r\n\r\n\tpublic void setRow(Row[] row) {\r\n\t\tthis.row = row;\r\n\t}\r\n\r\n}\r\n```\r\n```\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\r\n\r\npublic class Row {\r\n\r\n\t@JacksonXmlProperty(localName = &quot;foo&quot;)\r\n\tprivate String foo;\r\n\t@JacksonXmlProperty(localName = &quot;bar&quot;)\r\n\tprivate String bar;\r\n\r\n\tpublic String getFoo() {\r\n\t\treturn foo;\r\n\t}\r\n\r\n\tpublic void setFoo(String foo) {\r\n\t\tthis.foo = foo;\r\n\t}\r\n\r\n\tpublic String getBar() {\r\n\t\treturn bar;\r\n\t}\r\n\r\n\tpublic void setBar(String bar) {\r\n\t\tthis.bar = bar;\r\n\t}\r\n\r\n}\r\n```\r\n\r\nFor test: \r\n\r\n```\r\n\r\nimport com.fasterxml.jackson.core.JsonProcessingException;\r\nimport com.fasterxml.jackson.databind.JsonMappingException;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport com.fasterxml.jackson.dataformat.xml.XmlMapper;\r\n\r\nimport generated.Root; // your package\r\n\r\npublic class Demo {\r\n\r\n\tpublic static void main(String[] args) throws JsonMappingException, JsonProcessingException {\r\n\t\r\n\t\tObjectMapper mapper = new ObjectMapper();\r\n\t\tXmlMapper xmlMapper = new XmlMapper();\r\n\r\n\t\tString xml = &quot;&lt;root&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;  &lt;row&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;    &lt;foo&gt;foo&lt;/foo&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;    &lt;bar&gt;bar&lt;/bar&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;  &lt;/row&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;  &lt;row&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;    &lt;foo&gt;foo2&lt;/foo&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;    &lt;bar&gt;bar2&lt;/bar&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;  &lt;/row&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;  &lt;row&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;    &lt;foo&gt;foo3&lt;/foo&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;    &lt;bar&gt;bar3&lt;/bar&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;  &lt;/row&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;&lt;/root&gt;&quot;;\r\n\t\tRoot map = xmlMapper.readValue(xml, Root.class);\r\n\t\t\r\n\t\tSystem.out.println(&quot;value &quot;+ mapper.writeValueAsString(map));\r\n\t\t\r\n\t\t\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\nResul this:\r\n\r\n```\r\nvalue {&quot;row&quot;:[{&quot;foo&quot;:&quot;foo&quot;,&quot;bar&quot;:&quot;bar&quot;},{&quot;foo&quot;:&quot;foo2&quot;,&quot;bar&quot;:&quot;bar2&quot;},{&quot;foo&quot;:&quot;foo3&quot;,&quot;bar&quot;:&quot;bar3&quot;}]}\r\n```","title":"How to parse xml like below with jackson?","body":"<p>Create two classes:</p>\n<pre><code>import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlElementWrapper;\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlRootElement;\n\n@JacksonXmlRootElement(localName = &quot;root&quot;)\npublic class Root {\n\n    @JacksonXmlProperty(localName = &quot;row&quot;)\n    @JacksonXmlElementWrapper(useWrapping = false)\n    private Row[] row;\n\n    public Row[] getRow() {\n        return row;\n    }\n\n    public void setRow(Row[] row) {\n        this.row = row;\n    }\n\n}\n</code></pre>\n<pre><code>import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\n\npublic class Row {\n\n    @JacksonXmlProperty(localName = &quot;foo&quot;)\n    private String foo;\n    @JacksonXmlProperty(localName = &quot;bar&quot;)\n    private String bar;\n\n    public String getFoo() {\n        return foo;\n    }\n\n    public void setFoo(String foo) {\n        this.foo = foo;\n    }\n\n    public String getBar() {\n        return bar;\n    }\n\n    public void setBar(String bar) {\n        this.bar = bar;\n    }\n\n}\n</code></pre>\n<p>For test:</p>\n<pre><code>\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.JsonMappingException;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.dataformat.xml.XmlMapper;\n\nimport generated.Root; // your package\n\npublic class Demo {\n\n    public static void main(String[] args) throws JsonMappingException, JsonProcessingException {\n    \n        ObjectMapper mapper = new ObjectMapper();\n        XmlMapper xmlMapper = new XmlMapper();\n\n        String xml = &quot;&lt;root&gt;\\r\\n&quot;\n                + &quot;  &lt;row&gt;\\r\\n&quot;\n                + &quot;    &lt;foo&gt;foo&lt;/foo&gt;\\r\\n&quot;\n                + &quot;    &lt;bar&gt;bar&lt;/bar&gt;\\r\\n&quot;\n                + &quot;  &lt;/row&gt;\\r\\n&quot;\n                + &quot;  &lt;row&gt;\\r\\n&quot;\n                + &quot;    &lt;foo&gt;foo2&lt;/foo&gt;\\r\\n&quot;\n                + &quot;    &lt;bar&gt;bar2&lt;/bar&gt;\\r\\n&quot;\n                + &quot;  &lt;/row&gt;\\r\\n&quot;\n                + &quot;  &lt;row&gt;\\r\\n&quot;\n                + &quot;    &lt;foo&gt;foo3&lt;/foo&gt;\\r\\n&quot;\n                + &quot;    &lt;bar&gt;bar3&lt;/bar&gt;\\r\\n&quot;\n                + &quot;  &lt;/row&gt;\\r\\n&quot;\n                + &quot;&lt;/root&gt;&quot;;\n        Root map = xmlMapper.readValue(xml, Root.class);\n        \n        System.out.println(&quot;value &quot;+ mapper.writeValueAsString(map));\n        \n        \n    }\n\n}\n\n</code></pre>\n<p>Resul this:</p>\n<pre><code>value {&quot;row&quot;:[{&quot;foo&quot;:&quot;foo&quot;,&quot;bar&quot;:&quot;bar&quot;},{&quot;foo&quot;:&quot;foo2&quot;,&quot;bar&quot;:&quot;bar2&quot;},{&quot;foo&quot;:&quot;foo3&quot;,&quot;bar&quot;:&quot;bar3&quot;}]}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25933323,"reputation":76,"user_id":19654044,"display_name":"choco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659324663,"creation_date":1659324663,"answer_id":73188585,"question_id":73188004,"body_markdown":"I think you can change into \r\n\r\n    List list = xmlMapper.readValue(decodedXml, List.class)\r\n\r\nobjects in list is LinkedHashMap\r\n\r\n","title":"How to parse xml like below with jackson?","body":"<p>I think you can change into</p>\n<pre><code>List list = xmlMapper.readValue(decodedXml, List.class)\n</code></pre>\n<p>objects in list is LinkedHashMap</p>\n"}],"owner":{"account_id":15924438,"reputation":137,"user_id":11490407,"display_name":"Bill Billy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":507,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73188585,"answer_count":2,"score":0,"last_activity_date":1659324663,"creation_date":1659315625,"question_id":73188004,"body_markdown":"The input xml:\r\n```xml\r\n&lt;root&gt;\r\n  &lt;row&gt;\r\n    &lt;foo&gt;foo&lt;/foo&gt;\r\n    &lt;bar&gt;bar&lt;/bar&gt;\r\n  &lt;/row&gt;\r\n  &lt;row&gt;\r\n    &lt;foo&gt;foo2&lt;/foo&gt;\r\n    &lt;bar&gt;bar2&lt;/bar&gt;\r\n  &lt;/row&gt;\r\n  &lt;row&gt;\r\n    &lt;foo&gt;foo3&lt;/foo&gt;\r\n    &lt;bar&gt;bar3&lt;/bar&gt;\r\n  &lt;/row&gt;\r\n&lt;/root&gt;\r\n```\r\nIf I parse it like this:\r\n```java\r\nXmlMapper = new XmlMapper();\r\nMap map = xmlMapper.readValue(decodedXml, Map.class);\r\n```\r\nThe result map will only contain the last row.\r\n\r\nHow to make it parse rows into an ArrayList?\r\n","title":"How to parse xml like below with jackson?","body":"<p>The input xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;root&gt;\n  &lt;row&gt;\n    &lt;foo&gt;foo&lt;/foo&gt;\n    &lt;bar&gt;bar&lt;/bar&gt;\n  &lt;/row&gt;\n  &lt;row&gt;\n    &lt;foo&gt;foo2&lt;/foo&gt;\n    &lt;bar&gt;bar2&lt;/bar&gt;\n  &lt;/row&gt;\n  &lt;row&gt;\n    &lt;foo&gt;foo3&lt;/foo&gt;\n    &lt;bar&gt;bar3&lt;/bar&gt;\n  &lt;/row&gt;\n&lt;/root&gt;\n</code></pre>\n<p>If I parse it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>XmlMapper = new XmlMapper();\nMap map = xmlMapper.readValue(decodedXml, Map.class);\n</code></pre>\n<p>The result map will only contain the last row.</p>\n<p>How to make it parse rows into an ArrayList?</p>\n"},{"tags":["java","spring","jar","runtime","compatibility"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1659007773,"post_id":73151186,"comment_id":129196011,"body_markdown":"Mixing jars from different versions of a framework in this case Spring. Or using an incompatible library with this version. However you haven&#39;t shown your dependencies (please include your pom.xml or build.gradle).","body":"Mixing jars from different versions of a framework in this case Spring. Or using an incompatible library with this version. However you haven&#39;t shown your dependencies (please include your pom.xml or build.gradle)."}],"owner":{"account_id":25916131,"reputation":1,"user_id":19639501,"display_name":"Yashodha K A"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1004,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659324539,"creation_date":1659003613,"question_id":73151186,"body_markdown":"We are getting the below error, when we are trying to migrate to the srping version.\r\n\r\nCaused by: java.lang.NoSuchMethodError: org.springframework.beans.factory.config.ConfigurableListableBeanFactory.getApplicationStartup()Lorg/springframework/core/metrics/ApplicationStartup;\r\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:112) ~[spring-context.jar:5.2.20.RELEASE]\r\n        at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:746) ~[spring-context.jar:5.2.20.RELEASE]\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:564) ~[spring-context.jar:5.2.20.RELEASE]\r\n        at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:401) ~[spring-web.jar:5.2.20.RELEASE]\r\n        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:292) ~[spring-web.jar:5.2.20.RELEASE]\r\n        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:103) ~[spring-web.jar:5.2.20.RELEASE]\r\n        at com.liferay.portal.kernel.servlet.SecurePluginContextListener.instantiatingListener(SecurePluginContextListener.java:357) ~[portal-kernel.jar:?]\r\n        at com.liferay.portal.kernel.servlet.SecurePluginContextListener.instantiatingListeners(SecurePluginContextListener.java:164) ~[portal-kernel.jar:?]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_292]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_292]\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_292]\r\n        at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_292]\r\n        at com.liferay.portal.deploy.hot.ServletContextListenerHotDeployListener.doInvokeDeploy(ServletContextListenerHotDeployListener.java:74) ~[portal-impl.jar:?]\r\n        at com.liferay.portal.deploy.hot.ServletContextListenerHotDeployListener.invokeDeploy(ServletContextListenerHotDeployListener.java:37) ~[portal-impl.jar:?]\r\n        ... 67 more\r\n\r\npom.xml\r\n\r\n  \r\n\r\n     &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;com.liferay.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;liferay-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${liferay.maven.plugin.version}&lt;/version&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;autoDeployDir&gt;${liferay.auto.deploy.dir}&lt;/autoDeployDir&gt;\r\n    \t\t\t\t\t&lt;appServerDeployDir&gt;${liferay.app.server.deploy.dir}&lt;/appServerDeployDir&gt;\r\n    \t\t\t\t\t&lt;appServerLibGlobalDir&gt;${liferay.app.server.lib.global.dir}&lt;/appServerLibGlobalDir&gt;\r\n    \t\t\t\t\t&lt;appServerPortalDir&gt;${liferay.app.server.portal.dir}&lt;/appServerPortalDir&gt;\r\n    \t\t\t\t\t&lt;liferayVersion&gt;${liferay.version}&lt;/liferayVersion&gt;\r\n    \t\t\t\t\t&lt;pluginType&gt;portlet&lt;/pluginType&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;3.0&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n    \t\t\t\t\t&lt;source&gt;1.8&lt;/source&gt;\r\n    \t\t\t\t\t&lt;target&gt;1.8&lt;/target&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;2.5&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n     \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n     \t\t\t\t&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n     \t\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\t\t\t\t\r\n    \t\t\t\t&lt;configuration&gt;\t\r\n     \t\t\t\t\t&lt;packagingExcludes&gt;WEB-INF/lib/jaxb-api-2.2.11.jar&lt;/packagingExcludes&gt;\r\n     \t\t\t\t\t&lt;packagingExcludes&gt;WEB-INF/lib/jaxb-impl-2.2.11.jar&lt;/packagingExcludes&gt;\r\n     \t\t\t\t&lt;/configuration&gt;\r\n    \t\t&lt;/plugin&gt;\r\n    \t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;id&gt;deploy_to_liferay&lt;/id&gt;\r\n    \t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;run&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t\t&lt;tasks&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;copy todir=&quot;${liferay.auto.deploy.dir}&quot; &gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;fileset dir=&quot;./target&quot;&gt;\r\n    \t\t\t\t\t\t\t\t\t\t&lt;include name=&quot;${project.artifactId}.war&quot; /&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;/fileset&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;/copy&gt;\t\t\t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\t&lt;/tasks&gt;\r\n    \t\t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t &lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.portlet&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;portlet-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.0&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.4&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.0&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n    \t\t\t&lt;exclusions&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;xml-apis&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t&lt;/exclusions&gt;\r\n    \t\t\t&lt;version&gt;5.2.1.RELEASE&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\r\n    \t\t &lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.3.8&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt; \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-jcl&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.3.20&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;com.liferay.portletmvc4spring&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;com.liferay.portletmvc4spring.framework&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;5.3.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.17.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;2.10.3&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.17.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t\r\n            &lt;dependency&gt;\r\n        \t\t&lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n        \t\t&lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n        \t\t&lt;version&gt;2.2.4&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt; \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.2.11&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;compile&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\r\n    \t\t\r\n    \t   &lt;dependency&gt;\r\n    \t   \t&lt;groupId&gt;org.javassist&lt;/groupId&gt;\r\n    \t   \t&lt;artifactId&gt;javassist&lt;/artifactId&gt;\r\n    \t   \t&lt;version&gt;3.16.1-GA&lt;/version&gt;\r\n    \t   &lt;/dependency&gt;\r\n    \r\n    \t   &lt;dependency&gt;\r\n    \t   \t&lt;groupId&gt;jstl&lt;/groupId&gt;\r\n    \t   \t&lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n    \t   \t&lt;version&gt;1.2&lt;/version&gt;\r\n    \t   &lt;/dependency&gt;\r\n    \t   &lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;taglibs&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;standard&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.1.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \r\n    \t   &lt;dependency&gt;\r\n    \t   \t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    \t   \t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n    \t   \t&lt;version&gt;5.4.32.Final&lt;/version&gt;\r\n    \t   &lt;/dependency&gt;\r\n    \t   \r\n    \t   \r\n    \t   &lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;javax.mail&lt;/groupId&gt;\r\n    \t\t  &lt;artifactId&gt;mail&lt;/artifactId&gt;\r\n    \t\t  &lt;version&gt;1.4.7&lt;/version&gt;\r\n    \t\t  &lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t\r\n    \t\t&lt;dependency&gt;\r\n    \t\t  &lt;groupId&gt;commons-lang&lt;/groupId&gt;\r\n    \t\t  &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;\r\n    \t\t  &lt;version&gt;2.6&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.4&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;jfree&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jfreechart&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.0.13&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\t \r\n    \t\t  \r\n    \t  &lt;dependency&gt;\r\n    \t   &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    \t   &lt;artifactId&gt;hibernate-search&lt;/artifactId&gt;\r\n    \t   &lt;version&gt;4.0.0.Final&lt;/version&gt;\r\n    \t   \r\n    \t   \r\n    \t   \t&lt;exclusions&gt;\r\n    \t   \t\t&lt;exclusion&gt;\r\n    \t   \t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    \t   \t\t\t&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n    \t   \t\t&lt;/exclusion&gt;\r\n    \t   \t&lt;/exclusions&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t\r\n    \t\r\n       \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.swinglabs&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;pdf-renderer&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.0.5&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n       \t&lt;dependency&gt;\r\n    \t    &lt;groupId&gt;org.quartz-scheduler&lt;/groupId&gt;\r\n    \t    &lt;artifactId&gt;quartz&lt;/artifactId&gt;\r\n    \t    &lt;version&gt;2.3.2&lt;/version&gt;\r\n    \t    \r\n    \t    &lt;exclusions&gt;\r\n    \t   \t\t&lt;exclusion&gt;\r\n    \t   \t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    \t   \t\t\t&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n    \t   \t\t&lt;/exclusion&gt;\r\n    \t   \t&lt;/exclusions&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n        \t&lt;groupId&gt;org.quartz-scheduler&lt;/groupId&gt;\r\n        \t&lt;artifactId&gt;quartz-jobs&lt;/artifactId&gt;\r\n        \t&lt;version&gt;2.3.2&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;  \r\n    \t\t&lt;artifactId&gt;pdfbox&lt;/artifactId&gt;  \r\n    \t\t&lt;version&gt;2.0.24&lt;/version&gt;  \r\n    \t\t&lt;/dependency&gt;  \r\n    \t\t  \r\n    \t\t&lt;dependency&gt;  \r\n    \t\t&lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;  \r\n    \t\t&lt;artifactId&gt;fontbox&lt;/artifactId&gt;  \r\n    \t\t&lt;version&gt;2.0.24&lt;/version&gt;  \r\n    \t\t&lt;/dependency&gt;  \r\n    \t\t\r\n    \t\t&lt;dependency&gt;  \r\n    \t\t\t&lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;  \r\n    \t\t\t&lt;artifactId&gt;jempbox&lt;/artifactId&gt;  \r\n    \t\t\t&lt;version&gt;1.8.16&lt;/version&gt;  \r\n    \t\t&lt;/dependency&gt;\r\n    \t\t  \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;xmpbox&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.0.24&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t  \r\n    \t\t&lt;dependency&gt;  \r\n    \t\t\t&lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;preflight&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.0.24&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;  \r\n    \t\t  \r\n    \t\t&lt;dependency&gt;  \r\n    \t\t&lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;  \r\n    \t\t&lt;artifactId&gt;pdfbox-tools&lt;/artifactId&gt;  \r\n    \t\t&lt;version&gt;2.0.24&lt;/version&gt;  \r\n    \t\t&lt;/dependency&gt; \r\n    \t\t&lt;dependency&gt;\r\n    \t    &lt;groupId&gt;com.github.dhorions&lt;/groupId&gt;\r\n    \t    &lt;artifactId&gt;boxable&lt;/artifactId&gt;\r\n    \t    &lt;version&gt;1.5&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt; \r\n    \t\t\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;com.liferay.portal&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;util-taglib&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;7.0.0-nightly&lt;/version&gt;\r\n    \t\t    &lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;com.liferay.portal&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;util-java&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;7.0.0-nightly&lt;/version&gt;\r\n    \t\t    &lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;com.liferay.portal&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;util-bridges&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;7.0.0-nightly&lt;/version&gt;\r\n    \t\t    &lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;cxf-rt-frontend-jaxws&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.2.1&lt;/version&gt;\r\n    \t\t\t&lt;exclusions&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.codehaus.woodstox&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;stax2-api&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t&lt;/exclusions&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;cxf-rt-transports-http-hc&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.2.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n\r\nAny help will be appreciated, Thanks in advance.\r\n","title":"java.lang.NoSuchMethodError: org.springframework.beans.factory.config.ConfigurableListableBeanFactory.getApplicationStartup()","body":"<p>We are getting the below error, when we are trying to migrate to the srping version.</p>\n<p>Caused by: java.lang.NoSuchMethodError: org.springframework.beans.factory.config.ConfigurableListableBeanFactory.getApplicationStartup()Lorg/springframework/core/metrics/ApplicationStartup;\nat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:112) ~[spring-context.jar:5.2.20.RELEASE]\nat org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:746) ~[spring-context.jar:5.2.20.RELEASE]\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:564) ~[spring-context.jar:5.2.20.RELEASE]\nat org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:401) ~[spring-web.jar:5.2.20.RELEASE]\nat org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:292) ~[spring-web.jar:5.2.20.RELEASE]\nat org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:103) ~[spring-web.jar:5.2.20.RELEASE]\nat com.liferay.portal.kernel.servlet.SecurePluginContextListener.instantiatingListener(SecurePluginContextListener.java:357) ~[portal-kernel.jar:?]\nat com.liferay.portal.kernel.servlet.SecurePluginContextListener.instantiatingListeners(SecurePluginContextListener.java:164) ~[portal-kernel.jar:?]\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_292]\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_292]\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_292]\nat java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_292]\nat com.liferay.portal.deploy.hot.ServletContextListenerHotDeployListener.doInvokeDeploy(ServletContextListenerHotDeployListener.java:74) ~[portal-impl.jar:?]\nat com.liferay.portal.deploy.hot.ServletContextListenerHotDeployListener.invokeDeploy(ServletContextListenerHotDeployListener.java:37) ~[portal-impl.jar:?]\n... 67 more</p>\n<p>pom.xml</p>\n<pre><code> &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.liferay.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;liferay-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${liferay.maven.plugin.version}&lt;/version&gt;\n                &lt;executions&gt;\n                                        \n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;autoDeployDir&gt;${liferay.auto.deploy.dir}&lt;/autoDeployDir&gt;\n                    &lt;appServerDeployDir&gt;${liferay.app.server.deploy.dir}&lt;/appServerDeployDir&gt;\n                    &lt;appServerLibGlobalDir&gt;${liferay.app.server.lib.global.dir}&lt;/appServerLibGlobalDir&gt;\n                    &lt;appServerPortalDir&gt;${liferay.app.server.portal.dir}&lt;/appServerPortalDir&gt;\n                    &lt;liferayVersion&gt;${liferay.version}&lt;/liferayVersion&gt;\n                    &lt;pluginType&gt;portlet&lt;/pluginType&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.5&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.0.0&lt;/version&gt;                \n                &lt;configuration&gt; \n                    &lt;packagingExcludes&gt;WEB-INF/lib/jaxb-api-2.2.11.jar&lt;/packagingExcludes&gt;\n                    &lt;packagingExcludes&gt;WEB-INF/lib/jaxb-impl-2.2.11.jar&lt;/packagingExcludes&gt;\n                &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n                &lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                &lt;execution&gt;\n                        &lt;id&gt;deploy_to_liferay&lt;/id&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;run&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;tasks&gt;\n                                    &lt;copy todir=&quot;${liferay.auto.deploy.dir}&quot; &gt;\n                                    &lt;fileset dir=&quot;./target&quot;&gt;\n                                        &lt;include name=&quot;${project.artifactId}.war&quot; /&gt;\n                                    &lt;/fileset&gt;\n                                    &lt;/copy&gt;                                 \n                            &lt;/tasks&gt;\n                        &lt;/configuration&gt;\n                        &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            \n        &lt;/plugins&gt;\n    &lt;/build&gt;\n    &lt;dependencies&gt;\n         &lt;dependency&gt;\n            &lt;groupId&gt;javax.portlet&lt;/groupId&gt;\n            &lt;artifactId&gt;portlet-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;2.4&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\n            &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;xml-apis&lt;/groupId&gt;\n                    &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n            &lt;version&gt;5.2.1.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n    \n         &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n            &lt;version&gt;5.3.8&lt;/version&gt;\n        &lt;/dependency&gt; \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-jcl&lt;/artifactId&gt;\n            &lt;version&gt;5.3.20&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.liferay.portletmvc4spring&lt;/groupId&gt;\n            &lt;artifactId&gt;com.liferay.portletmvc4spring.framework&lt;/artifactId&gt;\n            &lt;version&gt;5.3.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;2.17.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n            &lt;version&gt;2.10.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n            &lt;version&gt;2.17.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n            &lt;artifactId&gt;gson&lt;/artifactId&gt;\n            &lt;version&gt;2.2.4&lt;/version&gt;\n        &lt;/dependency&gt; \n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n            &lt;version&gt;2.2.11&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n    \n        \n       &lt;dependency&gt;\n        &lt;groupId&gt;org.javassist&lt;/groupId&gt;\n        &lt;artifactId&gt;javassist&lt;/artifactId&gt;\n        &lt;version&gt;3.16.1-GA&lt;/version&gt;\n       &lt;/dependency&gt;\n\n       &lt;dependency&gt;\n        &lt;groupId&gt;jstl&lt;/groupId&gt;\n        &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n        &lt;version&gt;1.2&lt;/version&gt;\n       &lt;/dependency&gt;\n       &lt;dependency&gt;\n            &lt;groupId&gt;taglibs&lt;/groupId&gt;\n            &lt;artifactId&gt;standard&lt;/artifactId&gt;\n            &lt;version&gt;1.1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n       &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n        &lt;version&gt;5.4.32.Final&lt;/version&gt;\n       &lt;/dependency&gt;\n       \n       \n       &lt;dependency&gt;\n        &lt;groupId&gt;javax.mail&lt;/groupId&gt;\n          &lt;artifactId&gt;mail&lt;/artifactId&gt;\n          &lt;version&gt;1.4.7&lt;/version&gt;\n          &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n          &lt;groupId&gt;commons-lang&lt;/groupId&gt;\n          &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;\n          &lt;version&gt;2.6&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n            &lt;version&gt;2.4&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;jfree&lt;/groupId&gt;\n            &lt;artifactId&gt;jfreechart&lt;/artifactId&gt;\n            &lt;version&gt;1.0.13&lt;/version&gt;\n        &lt;/dependency&gt;    \n          \n      &lt;dependency&gt;\n       &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n       &lt;artifactId&gt;hibernate-search&lt;/artifactId&gt;\n       &lt;version&gt;4.0.0.Final&lt;/version&gt;\n       \n       \n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    \n    \n    &lt;dependency&gt;\n        &lt;groupId&gt;org.swinglabs&lt;/groupId&gt;\n        &lt;artifactId&gt;pdf-renderer&lt;/artifactId&gt;\n        &lt;version&gt;1.0.5&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.quartz-scheduler&lt;/groupId&gt;\n        &lt;artifactId&gt;quartz&lt;/artifactId&gt;\n        &lt;version&gt;2.3.2&lt;/version&gt;\n        \n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.quartz-scheduler&lt;/groupId&gt;\n        &lt;artifactId&gt;quartz-jobs&lt;/artifactId&gt;\n        &lt;version&gt;2.3.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n         &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;  \n        &lt;artifactId&gt;pdfbox&lt;/artifactId&gt;  \n        &lt;version&gt;2.0.24&lt;/version&gt;  \n        &lt;/dependency&gt;  \n          \n        &lt;dependency&gt;  \n        &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;  \n        &lt;artifactId&gt;fontbox&lt;/artifactId&gt;  \n        &lt;version&gt;2.0.24&lt;/version&gt;  \n        &lt;/dependency&gt;  \n        \n        &lt;dependency&gt;  \n            &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;  \n            &lt;artifactId&gt;jempbox&lt;/artifactId&gt;  \n            &lt;version&gt;1.8.16&lt;/version&gt;  \n        &lt;/dependency&gt;\n          \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\n            &lt;artifactId&gt;xmpbox&lt;/artifactId&gt;\n            &lt;version&gt;2.0.24&lt;/version&gt;\n        &lt;/dependency&gt;\n          \n        &lt;dependency&gt;  \n            &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\n            &lt;artifactId&gt;preflight&lt;/artifactId&gt;\n            &lt;version&gt;2.0.24&lt;/version&gt;\n        &lt;/dependency&gt;  \n          \n        &lt;dependency&gt;  \n        &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;  \n        &lt;artifactId&gt;pdfbox-tools&lt;/artifactId&gt;  \n        &lt;version&gt;2.0.24&lt;/version&gt;  \n        &lt;/dependency&gt; \n        &lt;dependency&gt;\n        &lt;groupId&gt;com.github.dhorions&lt;/groupId&gt;\n        &lt;artifactId&gt;boxable&lt;/artifactId&gt;\n        &lt;version&gt;1.5&lt;/version&gt;\n        &lt;/dependency&gt; \n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;com.liferay.portal&lt;/groupId&gt;\n            &lt;artifactId&gt;util-taglib&lt;/artifactId&gt;\n            &lt;version&gt;7.0.0-nightly&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.liferay.portal&lt;/groupId&gt;\n            &lt;artifactId&gt;util-java&lt;/artifactId&gt;\n            &lt;version&gt;7.0.0-nightly&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.liferay.portal&lt;/groupId&gt;\n            &lt;artifactId&gt;util-bridges&lt;/artifactId&gt;\n            &lt;version&gt;7.0.0-nightly&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n         \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n            &lt;artifactId&gt;cxf-rt-frontend-jaxws&lt;/artifactId&gt;\n            &lt;version&gt;3.2.1&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.codehaus.woodstox&lt;/groupId&gt;\n                    &lt;artifactId&gt;stax2-api&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n            &lt;artifactId&gt;cxf-rt-transports-http-hc&lt;/artifactId&gt;\n            &lt;version&gt;3.2.1&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Any help will be appreciated, Thanks in advance.</p>\n"},{"tags":["java","android","exoplayer"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1659325190,"post_id":73188564,"comment_id":129259744,"body_markdown":"For a test use exo player in mainactivity directly.","body":"For a test use exo player in mainactivity directly."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1659325303,"post_id":73188564,"comment_id":129259760,"body_markdown":"`it&#39;s not working` Sorry, but we have no idea what you mean by that. Errors? Exceptions?","body":"<code>it&#39;s not working</code> Sorry, but we have no idea what you mean by that. Errors? Exceptions?"},{"owner":{"account_id":21806975,"reputation":7,"user_id":16105042,"display_name":"Chen Argon"},"score":0,"creation_date":1659325501,"post_id":73188564,"comment_id":129259788,"body_markdown":"Caused by: java.lang.NullPointerException\n        at com.example.videoplayer1.PlayerActivity.onCreate(PlayerActivity.java:31)","body":"Caused by: java.lang.NullPointerException         at com.example.videoplayer1.PlayerActivity.onCreate(PlayerActiv&zwnj;&#8203;ity.java:31)"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1659326224,"post_id":73188564,"comment_id":129259850,"body_markdown":"Well show the code that causes that exception. And tell which statement exactly.","body":"Well show the code that causes that exception. And tell which statement exactly."},{"owner":{"account_id":21806975,"reputation":7,"user_id":16105042,"display_name":"Chen Argon"},"score":0,"creation_date":1659341438,"post_id":73188564,"comment_id":129263092,"body_markdown":"String url = intent.getStringExtra(&quot;video&quot;); After debug, I see my error. I can&#39;t get string url from intent, it&#39;s null","body":"String url = intent.getStringExtra(&quot;video&quot;); After debug, I see my error. I can&#39;t get string url from intent, it&#39;s null"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1659341573,"post_id":73188564,"comment_id":129263126,"body_markdown":"If you use getStringExtra() you should have put a String with intent.putExtra(). Now what did you put?","body":"If you use getStringExtra() you should have put a String with intent.putExtra(). Now what did you put?"}],"owner":{"account_id":21806975,"reputation":7,"user_id":16105042,"display_name":"Chen Argon"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":369,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659324466,"creation_date":1659324466,"question_id":73188564,"body_markdown":"I&#39;m just started learning android and\r\nI want to try to play videos from local storage with Exoplayer. \r\n&lt;br&gt;\r\nI have list videos from local storage by using Recyleview.\r\n\r\n&lt;br&gt;\r\nThis is my code, I&#39;m using SDK 32 and Exoplayer 2.14\r\n&lt;br&gt;\r\n&lt;b&gt; MainActivity &lt;/b&gt;\r\n&lt;br&gt;\r\n\r\n    public void onFileClicked(File file) {\r\n            startActivity(new Intent(MainActivity.this, PlayerActivity.class)\r\n                    .putExtra(&quot;video&quot;, file.getAbsoluteFile()));\r\n    }\r\n\r\n&lt;br&gt;\r\n&lt;b&gt; PlayerActivity &lt;/b&gt;\r\n&lt;br&gt;\r\n\r\n     Intent intent = getIntent();\r\n        String url = intent.getStringExtra(&quot;video&quot;);\r\n        ExoPlayer player = new ExoPlayer.Builder(this).build();\r\n        PlayerView playerView = findViewById(R.id.player);\r\n        playerView.setPlayer(player);\r\n\r\n        MediaItem mediaItem = MediaItem.fromUri(url);\r\n        player.addMediaItem(mediaItem);\r\n\r\n        player.prepare();\r\n        player.play();\r\n\r\n&lt;br&gt;\r\nI&#39;m trying using intent it&#39;s not working. \r\n&lt;br&gt;\r\nWhat should I do?\r\n","title":"How to play ExoPlayer from local file .mp4?","body":"<p>I'm just started learning android and\nI want to try to play videos from local storage with Exoplayer.\n<br>\nI have list videos from local storage by using Recyleview.</p>\n<br>\nThis is my code, I'm using SDK 32 and Exoplayer 2.14\n<br>\n<b> MainActivity </b>\n<br>\n<pre><code>public void onFileClicked(File file) {\n        startActivity(new Intent(MainActivity.this, PlayerActivity.class)\n                .putExtra(&quot;video&quot;, file.getAbsoluteFile()));\n}\n</code></pre>\n<br>\n<b> PlayerActivity </b>\n<br>\n<pre><code> Intent intent = getIntent();\n    String url = intent.getStringExtra(&quot;video&quot;);\n    ExoPlayer player = new ExoPlayer.Builder(this).build();\n    PlayerView playerView = findViewById(R.id.player);\n    playerView.setPlayer(player);\n\n    MediaItem mediaItem = MediaItem.fromUri(url);\n    player.addMediaItem(mediaItem);\n\n    player.prepare();\n    player.play();\n</code></pre>\n<br>\nI'm trying using intent it's not working. \n<br>\nWhat should I do?\n"},{"tags":["java","uri"],"answers":[{"tags":[],"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1320431868,"creation_date":1320431868,"answer_id":8014184,"question_id":8014099,"body_markdown":"The following code works for me (based on https://stackoverflow.com/questions/402683/how-do-i-get-just-the-jar-url-from-a-jar-url-containing-a-and-a-specific-file/402771#402771):\r\n\r\n    URL url = new URL(&quot;jar:file:/C:/Program%20Files/test.jar!/foo/bar&quot;);\r\n    JarURLConnection connection = (JarURLConnection) url.openConnection();\r\n    File file = new File(connection.getJarFileURL().toURI())","title":"How do I convert a &quot;jar:file&quot; URI to the path of Jar file?","body":"<p>The following code works for me (based on <a href=\"https://stackoverflow.com/questions/402683/how-do-i-get-just-the-jar-url-from-a-jar-url-containing-a-and-a-specific-file/402771#402771\">How do I get just the jar URL from a jar: URL containing a &quot;!&quot; and a specific file in the jar?</a>):</p>\n\n<pre><code>URL url = new URL(\"jar:file:/C:/Program%20Files/test.jar!/foo/bar\");\nJarURLConnection connection = (JarURLConnection) url.openConnection();\nFile file = new File(connection.getJarFileURL().toURI())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4399542,"reputation":99,"user_id":3585648,"display_name":"Hari Chandu Vakacharla"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1659323858,"creation_date":1442204128,"answer_id":32557217,"question_id":8014099,"body_markdown":"You can do this.This works\r\n\r\n    ClassLoader loader = this.getClass().getClassLoader();\r\n    URL url = loader.getResource(&quot;resource name&quot;);\r\n    String[] filePath = null;\r\n    String protocol = url.getProtocol();\r\n    if(protocol.equals(&quot;jar&quot;)){\r\n        url = new URL(url.getPath());\r\n        protocol = url.getProtocol();\r\n    }\r\n    if(protocol.equals(&quot;file&quot;)){\r\n        String[] pathArray = url.getPath().split(&quot;!&quot;);\r\n        filePath = pathArray[0].split(&quot;/&quot;,2);\r\n    }\r\n    File required = new File(FilePath[1]);","title":"How do I convert a &quot;jar:file&quot; URI to the path of Jar file?","body":"<p>You can do this.This works</p>\n<pre><code>ClassLoader loader = this.getClass().getClassLoader();\nURL url = loader.getResource(&quot;resource name&quot;);\nString[] filePath = null;\nString protocol = url.getProtocol();\nif(protocol.equals(&quot;jar&quot;)){\n    url = new URL(url.getPath());\n    protocol = url.getProtocol();\n}\nif(protocol.equals(&quot;file&quot;)){\n    String[] pathArray = url.getPath().split(&quot;!&quot;);\n    filePath = pathArray[0].split(&quot;/&quot;,2);\n}\nFile required = new File(FilePath[1]);\n</code></pre>\n"}],"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16194,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":8014184,"answer_count":2,"score":7,"last_activity_date":1659323858,"creation_date":1320431408,"question_id":8014099,"body_markdown":"How do I go from `jar:file:/C:/Program%20Files/test.jar!/foo/bar` to a `File` that points to `C:/Program Files/test.jar`?","title":"How do I convert a &quot;jar:file&quot; URI to the path of Jar file?","body":"<p>How do I go from <code>jar:file:/C:/Program%20Files/test.jar!/foo/bar</code> to a <code>File</code> that points to <code>C:/Program Files/test.jar</code>?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":6,"creation_date":1659317394,"post_id":73188073,"comment_id":129258855,"body_markdown":"Unless your application has a large scope or you have thousands of constants, then you really don&#39;t need to worry. They use next to no space/memory, and trying to produce a workaround to remove them will just add extra steps and hassle.","body":"Unless your application has a large scope or you have thousands of constants, then you really don&#39;t need to worry. They use next to no space/memory, and trying to produce a workaround to remove them will just add extra steps and hassle."},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1659324644,"post_id":73188073,"comment_id":129259670,"body_markdown":"you would need millions of constants before you&#39;d notice the difference. source is for humans to read. leave it as is and let the compiler and JVM do the heavy lifting.","body":"you would need millions of constants before you&#39;d notice the difference. source is for humans to read. leave it as is and let the compiler and JVM do the heavy lifting."}],"answers":[{"tags":[],"owner":{"account_id":14105611,"reputation":76,"user_id":10189757,"display_name":"nklisch"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1659323553,"creation_date":1659319480,"answer_id":73188227,"question_id":73188073,"body_markdown":"The compiler is smart enough to use memory efficiently in this kind of case. And, even let&#39;s suppose that you did have wasted memory per constant, let&#39;s do a thought experiment on how much &#39;space&#39; that may be, realistically.\r\n\r\nLet&#39;s say we had a mixture of string, int, and other basic types. Each char in a string is 2 bytes in java, and an int is 4 bytes. Let&#39;s say we had 75,000 char constants and 25,000 int constants.\r\nThat is 75k * 2 so 150k bytes or ~150 kilobytes of memory for the string constants\r\nFor the ints that is 25k * 4 or 100k, so ~100 kilobyte of memory.\r\n\r\nSo a total of ~250kb.\r\n\r\nThe most basic computer you can buy these days has a minimum of 4gb of ram, more likely 8gb to 16gb.\r\n\r\nSo 250kb / 4000000kb * 100 = 0.00625% of the lowest spec modern computer. \r\n\r\nNow if you are running some microcontroller or other limited hardware, it maaay be something, but even then it is doubtful and you probably aren&#39;t using java.\r\n\r\nAs a general rule of thumb, compilers and interpreters tend to be pretty good at their job, and trusting them to do the right thing most of the time, for most programmers and programs is good enough.\r\n\r\nThere are times when certain patterns, such as massive creation of new objects, then triggering garbage collection or other issues like that can have large performance impacts. \r\n\r\nThe key is to know where actual bottlenecks and gotchya&#39;s are within a language/computer/use patterns.\r\n\r\nIt does get more complicated once we move into the distributed space and massive scale - but again unless you are working in that kind of environment, you generally don&#39;t need to consider it.\r\n\r\nFocus your expectations on your use case, and if you are optimizing for a 10 millisecond gain for something only a few people use, it&#39;s probably a waste of time - unless you are doing it for fun.  ","title":"How to remove the unused constants from the generated Java class file","body":"<p>The compiler is smart enough to use memory efficiently in this kind of case. And, even let's suppose that you did have wasted memory per constant, let's do a thought experiment on how much 'space' that may be, realistically.</p>\n<p>Let's say we had a mixture of string, int, and other basic types. Each char in a string is 2 bytes in java, and an int is 4 bytes. Let's say we had 75,000 char constants and 25,000 int constants.\nThat is 75k * 2 so 150k bytes or ~150 kilobytes of memory for the string constants\nFor the ints that is 25k * 4 or 100k, so ~100 kilobyte of memory.</p>\n<p>So a total of ~250kb.</p>\n<p>The most basic computer you can buy these days has a minimum of 4gb of ram, more likely 8gb to 16gb.</p>\n<p>So 250kb / 4000000kb * 100 = 0.00625% of the lowest spec modern computer.</p>\n<p>Now if you are running some microcontroller or other limited hardware, it maaay be something, but even then it is doubtful and you probably aren't using java.</p>\n<p>As a general rule of thumb, compilers and interpreters tend to be pretty good at their job, and trusting them to do the right thing most of the time, for most programmers and programs is good enough.</p>\n<p>There are times when certain patterns, such as massive creation of new objects, then triggering garbage collection or other issues like that can have large performance impacts.</p>\n<p>The key is to know where actual bottlenecks and gotchya's are within a language/computer/use patterns.</p>\n<p>It does get more complicated once we move into the distributed space and massive scale - but again unless you are working in that kind of environment, you generally don't need to consider it.</p>\n<p>Focus your expectations on your use case, and if you are optimizing for a 10 millisecond gain for something only a few people use, it's probably a waste of time - unless you are doing it for fun.</p>\n"}],"owner":{"account_id":13132920,"reputation":101,"user_id":9486920,"display_name":"Amit_dash_234"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":159,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":73188227,"answer_count":1,"score":3,"last_activity_date":1659323553,"creation_date":1659317072,"question_id":73188073,"body_markdown":"I often use constants in my Java programs, however when taking a look at a decompiled Java class file, I noticed that all the constant&#39;s uses throughout the program was replaced by their literal values, while the original declarations and assignments at the top of the class was still present, I&#39;m wondering if these variables are just sitting there wasting memory since they&#39;re not being used anywhere in the file. and if there&#39;s a way to restrict constants only to compile time and have them removed after the class file is generated. ","title":"How to remove the unused constants from the generated Java class file","body":"<p>I often use constants in my Java programs, however when taking a look at a decompiled Java class file, I noticed that all the constant's uses throughout the program was replaced by their literal values, while the original declarations and assignments at the top of the class was still present, I'm wondering if these variables are just sitting there wasting memory since they're not being used anywhere in the file. and if there's a way to restrict constants only to compile time and have them removed after the class file is generated.</p>\n"},{"tags":["java","javascript","apache","object"],"comments":[{"owner":{"account_id":88204,"reputation":152972,"user_id":244128,"accept_rate":80,"display_name":"maerics"},"score":0,"creation_date":1316533658,"post_id":7487908,"comment_id":9063828,"body_markdown":"@Felix: as cool as it is, Node.js has nothing to do with Java or web browsers, right?","body":"@Felix: as cool as it is, Node.js has nothing to do with Java or web browsers, right?"},{"owner":{"account_id":60544,"reputation":88712,"user_id":180784,"accept_rate":95,"display_name":"Felix"},"score":0,"creation_date":1316533918,"post_id":7487908,"comment_id":9063901,"body_markdown":"@maerics Right, but it can provide a console in which to tinker. And it can run scripts. And the OP didn&#39;t mention anything about web browsers :)","body":"@maerics Right, but it can provide a console in which to tinker. And it can run scripts. And the OP didn&#39;t mention anything about web browsers :)"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":1,"creation_date":1316536406,"post_id":7487908,"comment_id":9064645,"body_markdown":"@Felix Then the idea of a &quot;JavaScript console that every browser has isn&#39;t relevant, and node.js isn&#39;t Java, so... doesn&#39;t seem very helpful either.","body":"@Felix Then the idea of a &quot;JavaScript console that every browser has isn&#39;t relevant, and node.js isn&#39;t Java, so... doesn&#39;t seem very helpful either."},{"owner":{"account_id":1581709,"reputation":16841,"user_id":1466970,"accept_rate":73,"display_name":"Richard Chambers"},"score":1,"creation_date":1395505358,"post_id":7487908,"comment_id":34373398,"body_markdown":"Java 8 is providing a new JavaScript engine, Nashorn, to replace Rhino. See the Nashorn blog https://blogs.oracle.com/nashorn/","body":"Java 8 is providing a new JavaScript engine, Nashorn, to replace Rhino. See the Nashorn blog <a href=\"https://blogs.oracle.com/nashorn/\" rel=\"nofollow noreferrer\">blogs.oracle.com/nashorn</a>"},{"owner":{"account_id":321204,"reputation":19977,"user_id":639891,"accept_rate":91,"display_name":"Dungeon Hunter"},"score":0,"creation_date":1395514735,"post_id":7487908,"comment_id":34376886,"body_markdown":"@RichardChambers good to know thanks richard. Turn it as an answer so that it can be useful for the users","body":"@RichardChambers good to know thanks richard. Turn it as an answer so that it can be useful for the users"}],"answers":[{"tags":[],"owner":{"account_id":215055,"reputation":9713,"user_id":469414,"accept_rate":75,"display_name":"kdabir"},"down_vote_count":0,"up_vote_count":40,"is_accepted":true,"score":40,"last_activity_date":1659323136,"creation_date":1316533404,"answer_id":7487925,"question_id":7487908,"body_markdown":"[Rhino][1] is what you are looking for.\r\n\r\n&gt; Rhino is an open-source implementation of JavaScript written entirely\r\n&gt; in Java. It is typically embedded into Java applications to provide\r\n&gt; scripting to end users.\r\n\r\n**Update:** Now [Nashorn](http://en.wikipedia.org/wiki/Nashorn_(JavaScript_engine)), which is more performant JavaScript Engine for Java, is available with jdk8.  \r\n\r\n**Update 2022:** Nashorn [was deprecated in Java 11][2], then eventually [removed in Java 15][3]. \r\n\r\n\r\n  [1]: http://www.mozilla.org/rhino/\r\n  [2]: https://openjdk.org/jeps/335\r\n  [3]: https://openjdk.org/jeps/372","title":"How can I use JavaScript in Java?","body":"<p><a href=\"http://www.mozilla.org/rhino/\" rel=\"nofollow noreferrer\">Rhino</a> is what you are looking for.</p>\n<blockquote>\n<p>Rhino is an open-source implementation of JavaScript written entirely\nin Java. It is typically embedded into Java applications to provide\nscripting to end users.</p>\n</blockquote>\n<p><strong>Update:</strong> Now <a href=\"http://en.wikipedia.org/wiki/Nashorn_(JavaScript_engine)\" rel=\"nofollow noreferrer\">Nashorn</a>, which is more performant JavaScript Engine for Java, is available with jdk8.</p>\n<p><strong>Update 2022:</strong> Nashorn <a href=\"https://openjdk.org/jeps/335\" rel=\"nofollow noreferrer\">was deprecated in Java 11</a>, then eventually <a href=\"https://openjdk.org/jeps/372\" rel=\"nofollow noreferrer\">removed in Java 15</a>.</p>\n"},{"tags":[],"owner":{"account_id":88204,"reputation":152972,"user_id":244128,"accept_rate":80,"display_name":"maerics"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1316534597,"creation_date":1316533451,"answer_id":7487938,"question_id":7487908,"body_markdown":"Java includes a [scripting language extension package](http://download.oracle.com/javase/6/docs/api/javax/script/package-summary.html) starting with version 6.\r\n\r\nSee the [Rhino project documentation for embedding a JavaScript interpreter in Java](http://www.mozilla.org/rhino/tutorial.html).\r\n\r\n**[Edit]**\r\n\r\nHere is a small example of how you can expose Java objects to your interpreted script:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n    \r\n    public class JS {\r\n      public static void main(String args[]) throws Exception {\r\n        ScriptEngine js = new ScriptEngineManager().getEngineByName(&quot;javascript&quot;);\r\n        Bindings bindings = js.getBindings(ScriptContext.ENGINE_SCOPE);\r\n        bindings.put(&quot;stdout&quot;, System.out);\r\n        js.eval(&quot;stdout.println(Math.cos(Math.PI));&quot;);\r\n        // Prints &quot;-1.0&quot; to the standard output stream.\r\n      }\r\n    }\r\n","title":"How can I use JavaScript in Java?","body":"<p>Java includes a <a href=\"http://download.oracle.com/javase/6/docs/api/javax/script/package-summary.html\">scripting language extension package</a> starting with version 6.</p>\n\n<p>See the <a href=\"http://www.mozilla.org/rhino/tutorial.html\">Rhino project documentation for embedding a JavaScript interpreter in Java</a>.</p>\n\n<p><strong>[Edit]</strong></p>\n\n<p>Here is a small example of how you can expose Java objects to your interpreted script:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class JS {\n  public static void main(String args[]) throws Exception {\n    ScriptEngine js = new ScriptEngineManager().getEngineByName(\"javascript\");\n    Bindings bindings = js.getBindings(ScriptContext.ENGINE_SCOPE);\n    bindings.put(\"stdout\", System.out);\n    js.eval(\"stdout.println(Math.cos(Math.PI));\");\n    // Prints \"-1.0\" to the standard output stream.\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":231028,"reputation":1874,"user_id":495011,"accept_rate":81,"display_name":"Eder"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1316537808,"creation_date":1316533933,"answer_id":7488051,"question_id":7487908,"body_markdown":"You can use *ScriptEngine*, example: \r\n\r\n\r\n&lt;pre&gt;\r\n&lt;code&gt;\r\npublic class Main {\r\n\tpublic static void main(String[] args) {\r\n\t\tStringBuffer javascript = null;\r\n\t\tScriptEngine runtime = null;\r\n\r\n\t\ttry {\r\n\t\t\truntime = new ScriptEngineManager().getEngineByName(&quot;javascript&quot;);\r\n\t\t\tjavascript = new StringBuffer();\r\n\r\n\t\t\tjavascript.append(&quot;1 + 1&quot;);\r\n\r\n\t\t\tdouble result = (Double) runtime.eval(javascript.toString());\r\n\r\n\t\t\tSystem.out.println(&quot;Result: &quot; + result);\r\n\t\t} catch (Exception ex) {\r\n\t\t\tSystem.out.println(ex.getMessage());\r\n\t\t}\r\n\t}\r\n}\r\n&lt;/code&gt;\r\n&lt;/pre&gt;\r\n","title":"How can I use JavaScript in Java?","body":"<p>You can use <em>ScriptEngine</em>, example: </p>\n\n<pre>\n<code>\npublic class Main {\n    public static void main(String[] args) {\n        StringBuffer javascript = null;\n        ScriptEngine runtime = null;\n\n        try {\n            runtime = new ScriptEngineManager().getEngineByName(\"javascript\");\n            javascript = new StringBuffer();\n\n            javascript.append(\"1 + 1\");\n\n            double result = (Double) runtime.eval(javascript.toString());\n\n            System.out.println(\"Result: \" + result);\n        } catch (Exception ex) {\n            System.out.println(ex.getMessage());\n        }\n    }\n}\n</code>\n</pre>\n"},{"tags":[],"owner":{"account_id":1233250,"reputation":488,"user_id":1197396,"display_name":"Ashok M A"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1519648753,"creation_date":1519648753,"answer_id":48988739,"question_id":7487908,"body_markdown":"I just wanted to answer something new for this question - `J2V8`.\r\n\r\nAuthor Ian Bull says &quot;Rhino and Nashorn are two common JavaScript runtimes, but these did not meet our requirements in a number of areas:\r\n\r\nNeither support Primitives. All interactions with these platforms require wrapper classes such as Integer, Double or Boolean.\r\nNashorn is not supported on Android.\r\nRhino compiler optimizations are not supported on Android.\r\nNeither engines support remote debugging on Android.&quot;&quot;\r\n\r\n[Highly Efficient Java &amp; JavaScript Integration][1]\r\n\r\n[Github link][2]\r\n\r\n\r\n  [1]: https://eclipsesource.com/blogs/2014/11/17/highly-efficient-java-javascript-integration/\r\n  [2]: https://github.com/eclipsesource/j2v8","title":"How can I use JavaScript in Java?","body":"<p>I just wanted to answer something new for this question - <code>J2V8</code>.</p>\n\n<p>Author Ian Bull says \"Rhino and Nashorn are two common JavaScript runtimes, but these did not meet our requirements in a number of areas:</p>\n\n<p>Neither support Primitives. All interactions with these platforms require wrapper classes such as Integer, Double or Boolean.\nNashorn is not supported on Android.\nRhino compiler optimizations are not supported on Android.\nNeither engines support remote debugging on Android.\"\"</p>\n\n<p><a href=\"https://eclipsesource.com/blogs/2014/11/17/highly-efficient-java-javascript-integration/\" rel=\"nofollow noreferrer\">Highly Efficient Java &amp; JavaScript Integration</a></p>\n\n<p><a href=\"https://github.com/eclipsesource/j2v8\" rel=\"nofollow noreferrer\">Github link</a></p>\n"}],"owner":{"account_id":321204,"reputation":19977,"user_id":639891,"accept_rate":91,"display_name":"Dungeon Hunter"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125977,"favorite_count":0,"down_vote_count":2,"up_vote_count":48,"closed_date":1525006855,"accepted_answer_id":7487925,"answer_count":4,"score":46,"last_activity_date":1659323136,"creation_date":1316533339,"question_id":7487908,"body_markdown":"I wanted to build a small product in which I wanted to give a kind of feature in which user can write a script language kind of JavaScript.\r\n\r\nAnd also from JavaScript able to build objects and calling methods on them.\r\n\r\nIs there any framework for this?","title":"How can I use JavaScript in Java?","body":"<p>I wanted to build a small product in which I wanted to give a kind of feature in which user can write a script language kind of JavaScript.</p>\n\n<p>And also from JavaScript able to build objects and calling methods on them.</p>\n\n<p>Is there any framework for this?</p>\n"},{"tags":["java","android","scrollview"],"comments":[{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1659310688,"post_id":73187513,"comment_id":129258023,"body_markdown":"`ScrollView` does not support infinite scrolling, regardless of background. You will need to investigate other solutions. Depending on your circumstances, there are ways to get a `RecyclerView` to appear infinite, for example.","body":"<code>ScrollView</code> does not support infinite scrolling, regardless of background. You will need to investigate other solutions. Depending on your circumstances, there are ways to get a <code>RecyclerView</code> to appear infinite, for example."},{"owner":{"display_name":"user19662073"},"score":0,"creation_date":1659311355,"post_id":73187513,"comment_id":129258122,"body_markdown":"@CommonsWare I kow. That why i ask this question. I need ways to do it.","body":"@CommonsWare I kow. That why i ask this question. I need ways to do it."},{"owner":{"account_id":18463410,"reputation":18363,"user_id":13598222,"display_name":"cactustictacs"},"score":0,"creation_date":1659316350,"post_id":73187513,"comment_id":129258726,"body_markdown":"Did you post the wrong image? I don&#39;t know Unreal Engine but that seems to be about launching a player character at a target? Or are you talking about the tiled background?","body":"Did you post the wrong image? I don&#39;t know Unreal Engine but that seems to be about launching a player character at a target? Or are you talking about the tiled background?"},{"owner":{"display_name":"user19662073"},"score":0,"creation_date":1659318788,"post_id":73187513,"comment_id":129259007,"body_markdown":"@cactustictacs iam talking about the squares behind the blueprints. Whe you place items.","body":"@cactustictacs iam talking about the squares behind the blueprints. Whe you place items."}],"answers":[{"tags":[],"owner":{"account_id":18463410,"reputation":18363,"user_id":13598222,"display_name":"cactustictacs"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1659322141,"creation_date":1659322141,"answer_id":73188402,"question_id":73187513,"body_markdown":"You can make a `BitmapDrawable` that tiles (repeats) like this:\r\n\r\n[![A tileable grid image][1]][1]\r\n\r\n*tileable.png*\r\n\r\n(That&#39;s *24px x 24px*, or *24dp x 24dp* at the base LDPI)\r\n\r\n````\r\ntiled.xml (in drawables)\r\n\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;bitmap xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:src=&quot;@drawable/tileable&quot;\r\n    android:tileMode=&quot;repeat&quot;\r\n    android:antialias=&quot;false&quot;\r\n    android:filter=&quot;false&quot;\r\n    /&gt;\r\n````\r\n(it&#39;s vertical and horizontal lines so we don&#39;t want any smoothing/filtering when it&#39;s scaled up for higher DPIs)\r\n\r\nThen you can use that as a `background` in a `View` and it&#39;ll tile. If you want a `View` you can scroll infinitely for some reason, you can do it with a `RecyclerView`:\r\n\r\n````\r\nitem_view.xml\r\n\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;96dp&quot;\r\n    android:background=&quot;@drawable/tiled&quot; /&gt;\r\n````\r\n(Height is a multiple of the *24dp* size of the tiled image so it repeats properly)\r\n\r\n````\r\nclass MyAdapter : RecyclerView.Adapter&lt;MyAdapter.ViewHolder&gt;() {\r\n\r\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder =\r\n        ItemViewBinding.inflate(LayoutInflater.from(parent.context), parent, false).run(::ViewHolder)\r\n\r\n    override fun onBindViewHolder(holder: ViewHolder, position: Int) { }\r\n\r\n    // not literally infinite scrolling but they&#39;ll have to work to crash it\r\n    override fun getItemCount(): Int = Int.MAX_VALUE\r\n\r\n    inner class ViewHolder(binding: ItemViewBinding) : RecyclerView.ViewHolder(binding.root)\r\n\r\n}\r\n````\r\n\r\nStick that adapter in a `RecyclerView` and you have a scrolling grid\r\n\r\n````\r\nrecyclerView.adapter = MyAdapter()\r\nrecyclerView.layoutManager = LinearLayoutManager(requireContext())\r\n````\r\n\r\n[![A RecyclerView looking like a big scrolling grid][2]][2]\r\n\r\nI&#39;m not sure why you&#39;d want to do this, but there you go! If you&#39;re trying to create a scrollable field containing things you can interact with (like the node editor example you posted) that&#39;s a *whole* other thing, where the &quot;infiniteness&quot; is more about the widget&#39;s representation of space and its contents, and painting a tiled background that moves as you navigate that component&#39;s internal space would be the simplest part of that system.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/tLTog.png\r\n  [2]: https://i.stack.imgur.com/Uk5o7.png","title":"ScrollView : Infinity scrolling with squares background","body":"<p>You can make a <code>BitmapDrawable</code> that tiles (repeats) like this:</p>\n<p><a href=\"https://i.stack.imgur.com/tLTog.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tLTog.png\" alt=\"A tileable grid image\" /></a></p>\n<p><em>tileable.png</em></p>\n<p>(That's <em>24px x 24px</em>, or <em>24dp x 24dp</em> at the base LDPI)</p>\n<pre><code>tiled.xml (in drawables)\n\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;bitmap xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:src=&quot;@drawable/tileable&quot;\n    android:tileMode=&quot;repeat&quot;\n    android:antialias=&quot;false&quot;\n    android:filter=&quot;false&quot;\n    /&gt;\n</code></pre>\n<p>(it's vertical and horizontal lines so we don't want any smoothing/filtering when it's scaled up for higher DPIs)</p>\n<p>Then you can use that as a <code>background</code> in a <code>View</code> and it'll tile. If you want a <code>View</code> you can scroll infinitely for some reason, you can do it with a <code>RecyclerView</code>:</p>\n<pre><code>item_view.xml\n\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;96dp&quot;\n    android:background=&quot;@drawable/tiled&quot; /&gt;\n</code></pre>\n<p>(Height is a multiple of the <em>24dp</em> size of the tiled image so it repeats properly)</p>\n<pre><code>class MyAdapter : RecyclerView.Adapter&lt;MyAdapter.ViewHolder&gt;() {\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder =\n        ItemViewBinding.inflate(LayoutInflater.from(parent.context), parent, false).run(::ViewHolder)\n\n    override fun onBindViewHolder(holder: ViewHolder, position: Int) { }\n\n    // not literally infinite scrolling but they'll have to work to crash it\n    override fun getItemCount(): Int = Int.MAX_VALUE\n\n    inner class ViewHolder(binding: ItemViewBinding) : RecyclerView.ViewHolder(binding.root)\n\n}\n</code></pre>\n<p>Stick that adapter in a <code>RecyclerView</code> and you have a scrolling grid</p>\n<pre><code>recyclerView.adapter = MyAdapter()\nrecyclerView.layoutManager = LinearLayoutManager(requireContext())\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/Uk5o7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Uk5o7.png\" alt=\"A RecyclerView looking like a big scrolling grid\" /></a></p>\n<p>I'm not sure why you'd want to do this, but there you go! If you're trying to create a scrollable field containing things you can interact with (like the node editor example you posted) that's a <em>whole</em> other thing, where the &quot;infiniteness&quot; is more about the widget's representation of space and its contents, and painting a tiled background that moves as you navigate that component's internal space would be the simplest part of that system.</p>\n"}],"owner":{"display_name":"user19662073"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":73188402,"answer_count":1,"score":-1,"last_activity_date":1659322141,"creation_date":1659308497,"question_id":73187513,"body_markdown":"I need to make my ```ScrollView``` infinity scrolling with squares background. Something like [this][1] in unreal engine. I will agree if there is  a library can do that for me.\r\n[another example][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VR34J.png\r\n  [2]: https://i.stack.imgur.com/ywJLT.png","title":"ScrollView : Infinity scrolling with squares background","body":"<p>I need to make my <code>ScrollView</code> infinity scrolling with squares background. Something like <a href=\"https://i.stack.imgur.com/VR34J.png\" rel=\"nofollow noreferrer\">this</a> in unreal engine. I will agree if there is  a library can do that for me.\n<a href=\"https://i.stack.imgur.com/ywJLT.png\" rel=\"nofollow noreferrer\">another example</a></p>\n"},{"tags":["java","performance","centos","jstack"],"comments":[{"owner":{"account_id":447587,"reputation":1361,"user_id":841289,"accept_rate":57,"display_name":"jpints14"},"score":0,"creation_date":1456328550,"post_id":16866361,"comment_id":58897278,"body_markdown":"Did you ever find an answer to this? I am currently having the same problem.","body":"Did you ever find an answer to this? I am currently having the same problem."}],"answers":[{"tags":[],"owner":{"account_id":3896733,"reputation":586,"user_id":3225578,"display_name":"v-tec"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1471276419,"creation_date":1471276419,"answer_id":38958482,"question_id":16866361,"body_markdown":"Try to run jstack under the jboss owner. This way you&#39;ll get more threads as an output. By issuing\r\n\r\n    jstack -l 12345\r\n\r\nI got\r\n\r\n     &quot;Service Thread&quot; #9 daemon prio=9 os_prio=0 tid=0x00007f976c0d3000 nid=0x1f56a runnable [0x0000000000000000]\r\n       java.lang.Thread.State: RUNNABLE\r\n    \r\n       Locked ownable synchronizers:\r\n            - None\r\n\r\nnote the nid is the hex representation of thread id got from top -H","title":"top -H shows few thread IDs that do not appear in jstack output","body":"<p>Try to run jstack under the jboss owner. This way you'll get more threads as an output. By issuing</p>\n\n<pre><code>jstack -l 12345\n</code></pre>\n\n<p>I got</p>\n\n<pre><code> \"Service Thread\" #9 daemon prio=9 os_prio=0 tid=0x00007f976c0d3000 nid=0x1f56a runnable [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n   Locked ownable synchronizers:\n        - None\n</code></pre>\n\n<p>note the nid is the hex representation of thread id got from top -H</p>\n"},{"tags":[],"owner":{"account_id":25943761,"reputation":1,"user_id":19662784,"display_name":""},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659321430,"creation_date":1659321430,"answer_id":73188361,"question_id":16866361,"body_markdown":"use jstack -mcan show threads from native(C/C++)\r\n","title":"top -H shows few thread IDs that do not appear in jstack output","body":"<p>use jstack -mcan show threads from native(C/C++)</p>\n"}],"owner":{"account_id":2842680,"reputation":53,"user_id":2441953,"display_name":"Yoram G"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":969,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1659321430,"creation_date":1370036074,"question_id":16866361,"body_markdown":"I am trying to investigate why my jboss is taking up 600% CPU (running on CentOS 5).\r\n\r\nI run `top -H` and try to compare the result with `jstack` output. Most of the thread IDs that come from top appear in the output of jstack but unfortunately the threads that take up most of the CPU are not listed there. \r\n\r\nBecause the output is very long I am only listing part of it here.\r\n\r\n    $top -b -n1 -H -p &lt;jboss pid&gt;\r\n    \r\n    top - 08:04:58 up 73 days, 19:50,  1 user,  load average: 5.72, 5.97, 5.95\r\n    Tasks: 128 total,   6 running, 122 sleeping,   0 stopped,   0 zombie\r\n    Cpu(s): 63.6%us,  1.7%sy,  0.0%ni, 34.2%id,  0.3%wa,  0.0%hi,  0.2%si,  0.0%st\r\n    Mem:  32946160k total, 32545228k used,   400932k free,    86776k buffers\r\n    Swap: 34996216k total,      136k used, 34996080k free, 21577176k cached\r\n    \r\n      PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                                                                          \r\n    12908 jboss     16   0 9488m 8.6g  18m S 71.5 27.4 146:45.68 java                                                                                                                             \r\n    12903 jboss     16   0 9488m 8.6g  18m S 69.5 27.4 146:36.08 java                                                                                                                             \r\n    12904 jboss     16   0 9488m 8.6g  18m S 69.5 27.4 146:39.63 java                                                                                                                             \r\n    12905 jboss     16   0 9488m 8.6g  18m S 69.5 27.4 146:44.46 java                                                                                                                             \r\n    12906 jboss     16   0 9488m 8.6g  18m S 69.5 27.4 146:53.94 java                                                                                                                             \r\n    12907 jboss     16   0 9488m 8.6g  18m S 69.5 27.4 146:39.18 java                                                                                                                             \r\n    12914 jboss     16   0 9488m 8.6g  18m R 27.8 27.4  36:26.64 java                                                                                                                             \r\n    12901 jboss     25   0 9488m 8.6g  18m S  0.0 27.4   0:00.00 java                                                                                                                             \r\n    12902 jboss     25   0 9488m 8.6g  18m S  0.0 27.4   0:00.05 java                                                                                                                             \r\n    12909 jboss     23   0 9488m 8.6g  18m S  0.0 27.4  76:34.09 java                                                                                                                             \r\n    12910 jboss     23   0 9488m 8.6g  18m S  0.0 27.4  76:33.49 java                                                                                                                             \r\n    12911 jboss     15   0 9488m 8.6g  18m S  0.0 27.4 257:10.35 java                                                                                                                             \r\n    12915 jboss     15   0 9488m 8.6g  18m S  0.0 27.4   0:06.63 java                                                                                                                             \r\n    12916 jboss     15   0 9488m 8.6g  18m S  0.0 27.4   0:19.61 java  \r\n    more lines.... \r\n\r\nThe jstack outpout is as follows \r\n\r\n\r\n    # /usr/java/jdk1.6.0_33/bin/jstack -F 3362\r\n    \r\n    Deadlock Detection:\r\n    \r\n    No deadlocks found.\r\n    \r\n    Thread 13055: (state = BLOCKED)\r\n     - java.lang.Object.wait(long) @bci=0 (Interpreted frame)\r\n     - java.lang.Object.wait() @bci=2, line=485 (Interpreted frame)\r\n     - org.apache.tomcat.util.net.JIoEndpoint$Worker.await() @bci=8, line=415 (Interpreted frame)\r\n     - org.apache.tomcat.util.net.JIoEndpoint$Worker.run() @bci=11, line=441 (Interpreted frame)\r\n     - java.lang.Thread.run() @bci=11, line=662 (Interpreted frame)\r\n    \r\n    \r\n    Thread 12996: (state = BLOCKED)\r\n     - java.lang.Object.wait(long) @bci=0 (Interpreted frame)\r\n     - java.lang.Object.wait() @bci=2, line=485 (Interpreted frame)\r\n     - org.apache.tomcat.util.net.JIoEndpoint$Worker.await() @bci=8, line=415 (Interpreted frame)\r\n     - org.apache.tomcat.util.net.JIoEndpoint$Worker.run() @bci=11, line=441 (Interpreted frame)\r\n     - java.lang.Thread.run() @bci=11, line=662 (Interpreted frame)\r\n    \r\n    \r\n    Thread 12994: (state = BLOCKED)\r\n     - java.lang.Object.wait(long) @bci=0 (Interpreted frame)\r\n     - java.lang.Object.wait() @bci=2, line=485 (Interpreted frame)\r\n     - org.apache.tomcat.util.net.JIoEndpoint$Worker.await() @bci=8, line=415 (Interpreted frame)\r\n     - org.apache.tomcat.util.net.JIoEndpoint$Worker.run() @bci=11, line=441 (Interpreted frame)\r\n     - java.lang.Thread.run() @bci=11, line=662 (Interpreted frame)\r\n\r\nmore stacks....\r\n\r\n\r\nThe thread IDs in the output of `jstack` also appear in the output of `top` but the thread IDs from top *that are most CPU intensive* (1903-1908) do not appear in the output of jstack. \r\n\r\nI thought these can be GC threads but I can&#39;t find anything to prove this.\r\n\r\nAny idea why I don&#39;t see all the threads in jstack or what I can do to see the missing threads?\r\n","title":"top -H shows few thread IDs that do not appear in jstack output","body":"<p>I am trying to investigate why my jboss is taking up 600% CPU (running on CentOS 5).</p>\n\n<p>I run <code>top -H</code> and try to compare the result with <code>jstack</code> output. Most of the thread IDs that come from top appear in the output of jstack but unfortunately the threads that take up most of the CPU are not listed there. </p>\n\n<p>Because the output is very long I am only listing part of it here.</p>\n\n<pre><code>$top -b -n1 -H -p &lt;jboss pid&gt;\n\ntop - 08:04:58 up 73 days, 19:50,  1 user,  load average: 5.72, 5.97, 5.95\nTasks: 128 total,   6 running, 122 sleeping,   0 stopped,   0 zombie\nCpu(s): 63.6%us,  1.7%sy,  0.0%ni, 34.2%id,  0.3%wa,  0.0%hi,  0.2%si,  0.0%st\nMem:  32946160k total, 32545228k used,   400932k free,    86776k buffers\nSwap: 34996216k total,      136k used, 34996080k free, 21577176k cached\n\n  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                                                                          \n12908 jboss     16   0 9488m 8.6g  18m S 71.5 27.4 146:45.68 java                                                                                                                             \n12903 jboss     16   0 9488m 8.6g  18m S 69.5 27.4 146:36.08 java                                                                                                                             \n12904 jboss     16   0 9488m 8.6g  18m S 69.5 27.4 146:39.63 java                                                                                                                             \n12905 jboss     16   0 9488m 8.6g  18m S 69.5 27.4 146:44.46 java                                                                                                                             \n12906 jboss     16   0 9488m 8.6g  18m S 69.5 27.4 146:53.94 java                                                                                                                             \n12907 jboss     16   0 9488m 8.6g  18m S 69.5 27.4 146:39.18 java                                                                                                                             \n12914 jboss     16   0 9488m 8.6g  18m R 27.8 27.4  36:26.64 java                                                                                                                             \n12901 jboss     25   0 9488m 8.6g  18m S  0.0 27.4   0:00.00 java                                                                                                                             \n12902 jboss     25   0 9488m 8.6g  18m S  0.0 27.4   0:00.05 java                                                                                                                             \n12909 jboss     23   0 9488m 8.6g  18m S  0.0 27.4  76:34.09 java                                                                                                                             \n12910 jboss     23   0 9488m 8.6g  18m S  0.0 27.4  76:33.49 java                                                                                                                             \n12911 jboss     15   0 9488m 8.6g  18m S  0.0 27.4 257:10.35 java                                                                                                                             \n12915 jboss     15   0 9488m 8.6g  18m S  0.0 27.4   0:06.63 java                                                                                                                             \n12916 jboss     15   0 9488m 8.6g  18m S  0.0 27.4   0:19.61 java  \nmore lines.... \n</code></pre>\n\n<p>The jstack outpout is as follows </p>\n\n<pre><code># /usr/java/jdk1.6.0_33/bin/jstack -F 3362\n\nDeadlock Detection:\n\nNo deadlocks found.\n\nThread 13055: (state = BLOCKED)\n - java.lang.Object.wait(long) @bci=0 (Interpreted frame)\n - java.lang.Object.wait() @bci=2, line=485 (Interpreted frame)\n - org.apache.tomcat.util.net.JIoEndpoint$Worker.await() @bci=8, line=415 (Interpreted frame)\n - org.apache.tomcat.util.net.JIoEndpoint$Worker.run() @bci=11, line=441 (Interpreted frame)\n - java.lang.Thread.run() @bci=11, line=662 (Interpreted frame)\n\n\nThread 12996: (state = BLOCKED)\n - java.lang.Object.wait(long) @bci=0 (Interpreted frame)\n - java.lang.Object.wait() @bci=2, line=485 (Interpreted frame)\n - org.apache.tomcat.util.net.JIoEndpoint$Worker.await() @bci=8, line=415 (Interpreted frame)\n - org.apache.tomcat.util.net.JIoEndpoint$Worker.run() @bci=11, line=441 (Interpreted frame)\n - java.lang.Thread.run() @bci=11, line=662 (Interpreted frame)\n\n\nThread 12994: (state = BLOCKED)\n - java.lang.Object.wait(long) @bci=0 (Interpreted frame)\n - java.lang.Object.wait() @bci=2, line=485 (Interpreted frame)\n - org.apache.tomcat.util.net.JIoEndpoint$Worker.await() @bci=8, line=415 (Interpreted frame)\n - org.apache.tomcat.util.net.JIoEndpoint$Worker.run() @bci=11, line=441 (Interpreted frame)\n - java.lang.Thread.run() @bci=11, line=662 (Interpreted frame)\n</code></pre>\n\n<p>more stacks....</p>\n\n<p>The thread IDs in the output of <code>jstack</code> also appear in the output of <code>top</code> but the thread IDs from top <em>that are most CPU intensive</em> (1903-1908) do not appear in the output of jstack. </p>\n\n<p>I thought these can be GC threads but I can't find anything to prove this.</p>\n\n<p>Any idea why I don't see all the threads in jstack or what I can do to see the missing threads?</p>\n"},{"tags":["java","spring-security","sap-commerce-cloud"],"answers":[{"tags":[],"owner":{"account_id":4424306,"reputation":186,"user_id":3603194,"display_name":"Adiputera"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659319875,"creation_date":1659319875,"answer_id":73188256,"question_id":73149592,"body_markdown":"Role in SAP Commerce can be added from backoffice.\r\n\r\nlogin to backoffice , navigate to system -&gt; OAuth -&gt; OAuth Client\r\nselect your desired client, and edit the OAuth authorities\r\n[![OAuth authorities config in hybris backoffice][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/I10v0.png","title":"How to create Spring security Role on SAP Commerce cloud (Hybris)","body":"<p>Role in SAP Commerce can be added from backoffice.</p>\n<p>login to backoffice , navigate to system -&gt; OAuth -&gt; OAuth Client\nselect your desired client, and edit the OAuth authorities\n<a href=\"https://i.stack.imgur.com/I10v0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I10v0.png\" alt=\"OAuth authorities config in hybris backoffice\" /></a></p>\n"}],"owner":{"account_id":12711139,"reputation":373,"user_id":11697033,"display_name":"whatspoppin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":172,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659319875,"creation_date":1658996934,"question_id":73149592,"body_markdown":"I have a REST Controller that need to be checked with @PreAuthoriz(&quot;hasRole(&#39;ROLE_MYCUSTOMROLE&#39;&quot;) but I dont know how to create a role in Hybirs.\r\n\r\nDoes anyone have an idea ?","title":"How to create Spring security Role on SAP Commerce cloud (Hybris)","body":"<p>I have a REST Controller that need to be checked with @PreAuthoriz(&quot;hasRole('ROLE_MYCUSTOMROLE'&quot;) but I dont know how to create a role in Hybirs.</p>\n<p>Does anyone have an idea ?</p>\n"},{"tags":["java","swing","user-interface","layout"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":1,"creation_date":1659165713,"post_id":73173618,"comment_id":129232584,"body_markdown":"null layout is __always_ wrong! no screenshots of plain text please","body":"null layout is <i>_always</i> wrong! no screenshots of plain text please"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1659167844,"post_id":73173618,"comment_id":129232927,"body_markdown":"Try using `&lt;br&gt;` instead of `\\n` to indicate a line break.   See https://docs.oracle.com/javase/tutorial/uiswing/components/html.html","body":"Try using <code>&lt;br&gt;</code> instead of <code>\\n</code> to indicate a line break.   See <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/html.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/uiswing/components/html.html</a>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1659179022,"post_id":73173618,"comment_id":129234963,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":2,"creation_date":1659188253,"post_id":73173618,"comment_id":129236809,"body_markdown":"*Do I need to ... use another Layout??* - yes. Read the Swing tutorial on [Layout Managers](https://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html) for the basics. You can also nest panels with different layout managers.","body":"<i>Do I need to ... use another Layout??</i> - yes. Read the Swing tutorial on <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html\" rel=\"nofollow noreferrer\">Layout Managers</a> for the basics. You can also nest panels with different layout managers."}],"answers":[{"tags":[],"owner":{"account_id":20084784,"reputation":85,"user_id":14726617,"display_name":"MrLegendGaming"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659319809,"creation_date":1659319809,"answer_id":73188253,"question_id":73173618,"body_markdown":"You can use HTML text formatting in JLabels.\r\n\r\nTry doing this:\r\n```\r\ntag.setText(&quot;&lt;html&gt;:&lt;br&gt;&lt;/html&gt;&quot;);\r\nnum.setText(&quot;&lt;html&gt;:&lt;br&gt;11111111&lt;/html&gt;&quot;);\r\n```","title":"How can I make this example with java GUI JFrame?","body":"<p>You can use HTML text formatting in JLabels.</p>\n<p>Try doing this:</p>\n<pre><code>tag.setText(&quot;&lt;html&gt;:&lt;br&gt;&lt;/html&gt;&quot;);\nnum.setText(&quot;&lt;html&gt;:&lt;br&gt;11111111&lt;/html&gt;&quot;);\n</code></pre>\n"}],"owner":{"account_id":25931132,"reputation":3,"user_id":19652187,"display_name":"harriet99"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":73188253,"answer_count":1,"score":-2,"last_activity_date":1659319809,"creation_date":1659165147,"question_id":73173618,"body_markdown":"I want to make the tag (:  : 1111111) looks like this,\r\n\r\n:\r\n\r\n\r\n\r\n\r\n:\r\n\r\n111111\r\n\r\nbut only I can make looks like this,\r\n\r\n:  : 111111\r\n\r\nI made it to JLabel on SidePanel which extends JPanel. And \\n is not working on JPanel I guess? ..and I don&#39;t know how to fix it.\r\n\r\nDo I need to make some other JPanel on the SidePanel or use another Layout?? like.. Grid or null? or more JLabel??\r\n\r\n\r\n**Here&#39;s my code.**\r\n\r\n    public class MyFrame extends JFrame {\r\n\t\r\n\tprivate JButton proscons = new JButton();\r\n\tprivate JLabel tag = new JLabel();\r\n\tprivate JLabel num = new JLabel();\r\n\t\r\n\tMyFrame() {\r\n\t\tsetTitle(&quot;2 &quot;);\r\n\t\t\r\n\t\tContainer cp = getContentPane();\r\n\t\tcp.setLayout(new BorderLayout());\r\n\t\tcp.add(new WestPanel(), BorderLayout.WEST);\r\n\t\tcp.add(new MyPanel(), BorderLayout.CENTER);\r\n\t\t\r\n\t\tsetLocationRelativeTo(null); //  GUI  \r\n\t\tsetSize(400, 400);\r\n\t\tsetVisible(true);\r\n\t\tsetDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t}\r\n\t\r\n\tclass WestPanel extends JPanel {\r\n\t\tWestPanel() {\r\n\t\t\tsetBackground(Color.YELLOW);\r\n\t\t\tsetSize(100,400);\r\n\t\t\tadd(proscons);\r\n\t\t\tproscons.setText(&quot;&quot;);\r\n\t\t\tadd(tag);\r\n\t\t\ttag.setText(&quot;: \\n&quot;);\r\n\t\t\tadd(num);\r\n\t\t\tnum.setText(&quot;: \\n11111111&quot;);\r\n\t\t}\r\n\t}\r\n\t\r\n\tclass MyPanel extends JPanel {\r\n\t\tMyPanel() {\r\n\t\t\tsetBackground(Color.lightGray);\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tnew MyFrame();\r\n\t}\r\n\r\n}\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/uHyfU.png\r\n  [2]: https://i.stack.imgur.com/OiS6v.png","title":"How can I make this example with java GUI JFrame?","body":"<p>I want to make the tag (:  : 1111111) looks like this,</p>\n<p>:</p>\n<p></p>\n<p>:</p>\n<p>111111</p>\n<p>but only I can make looks like this,</p>\n<p>:  : 111111</p>\n<p>I made it to JLabel on SidePanel which extends JPanel. And \\n is not working on JPanel I guess? ..and I don't know how to fix it.</p>\n<p>Do I need to make some other JPanel on the SidePanel or use another Layout?? like.. Grid or null? or more JLabel??</p>\n<p><strong>Here's my code.</strong></p>\n<pre><code>public class MyFrame extends JFrame {\n\nprivate JButton proscons = new JButton();\nprivate JLabel tag = new JLabel();\nprivate JLabel num = new JLabel();\n\nMyFrame() {\n    setTitle(&quot;2 &quot;);\n    \n    Container cp = getContentPane();\n    cp.setLayout(new BorderLayout());\n    cp.add(new WestPanel(), BorderLayout.WEST);\n    cp.add(new MyPanel(), BorderLayout.CENTER);\n    \n    setLocationRelativeTo(null); //  GUI  \n    setSize(400, 400);\n    setVisible(true);\n    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n}\n\nclass WestPanel extends JPanel {\n    WestPanel() {\n        setBackground(Color.YELLOW);\n        setSize(100,400);\n        add(proscons);\n        proscons.setText(&quot;&quot;);\n        add(tag);\n        tag.setText(&quot;: \\n&quot;);\n        add(num);\n        num.setText(&quot;: \\n11111111&quot;);\n    }\n}\n\nclass MyPanel extends JPanel {\n    MyPanel() {\n        setBackground(Color.lightGray);\n    }\n}\n\npublic static void main(String[] args) {\n    new MyFrame();\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1659241368,"post_id":73180372,"comment_id":129245600,"body_markdown":"We have no idea what Helper.setTimeout() does.  (Well I&#39;m pretty sure I know what it does, but no idea which of the few dozen ways it could be working).  But basically, you need to cancel that timeout.  And how to do that (or even if its possible) depends on the method you&#39;re using there.  We can&#39;t help you without the code of Helper.setTimeout.","body":"We have no idea what Helper.setTimeout() does.  (Well I&#39;m pretty sure I know what it does, but no idea which of the few dozen ways it could be working).  But basically, you need to cancel that timeout.  And how to do that (or even if its possible) depends on the method you&#39;re using there.  We can&#39;t help you without the code of Helper.setTimeout."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1659241591,"post_id":73180372,"comment_id":129245616,"body_markdown":"Also, you need to change the function in your setOnCompletionListener to NOT call the Helper at all if you canceled it via the button.  Because calling stop always calls the onCompletionListener.  That can be done by a simple flag-  set the flag when you press the button, check the flag in the setOnCompletionListener, then set the flag false at the end of the onCompleteionListener.","body":"Also, you need to change the function in your setOnCompletionListener to NOT call the Helper at all if you canceled it via the button.  Because calling stop always calls the onCompletionListener.  That can be done by a simple flag-  set the flag when you press the button, check the flag in the setOnCompletionListener, then set the flag false at the end of the onCompleteionListener."},{"owner":{"account_id":17113839,"reputation":641,"user_id":12383916,"display_name":"xRay"},"score":0,"creation_date":1659268428,"post_id":73180372,"comment_id":129249754,"body_markdown":"@GabeSechan `setTimeout()` is just the method for the delay. I have now updated my question.","body":"@GabeSechan <code>setTimeout()</code> is just the method for the delay. I have now updated my question."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1659278959,"post_id":73180372,"comment_id":129251767,"body_markdown":"Yeah, so you need to do what I described with the flag.   You also need to call removeMessage on that handler in case its already waiting to play a sound.","body":"Yeah, so you need to do what I described with the flag.   You also need to call removeMessage on that handler in case its already waiting to play a sound."}],"answers":[{"tags":[],"owner":{"account_id":5896787,"reputation":5103,"user_id":4641680,"accept_rate":55,"display_name":"Reza Saadati"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1659314863,"creation_date":1659314863,"answer_id":73187956,"question_id":73180372,"body_markdown":"The interesting part of your code is `getStatus()`. You should make use of it. Somehow like this:\r\n\r\n```java\r\npublic class Scanner {\r\n    public static MediaPlayer mediaPlayer = new MediaPlayer();\r\n    public View mView;\r\n    private Context mContext;\r\n    public boolean status;\r\n    private boolean mScannerIsWating = false;\r\n\r\n    public boolean getStatus() {\r\n        return status;\r\n    }\r\n    public void setStatus(boolean status) {\r\n        this.status = status;\r\n    }\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)\r\n    public void toggle(View view, Context context) {\r\n        this.mView = view;\r\n        this.mContext = context;\r\n\r\n        // Activate the scanner\r\n        if (!mediaPlayer.isPlaying() &amp;&amp; !getStatus()) {\r\n            this.start();\r\n        }\r\n        // Deactivate the scanner\r\n        else if (mediaPlayer.isPlaying() || getStatus()) {\r\n            this.stop();\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * Star the scanner\r\n     */\r\n    @SuppressLint(&quot;UseCompatLoadingForColorStateLists&quot;)\r\n    @RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)\r\n    public void start() {\r\n        if (!mediaPlayer.isPlaying()) {\r\n            setStatus(true);\r\n            mediaPlayer = MediaPlayer.create(mContext, scanner);\r\n            mediaPlayer.setOnPreparedListener(mediaPlayerListener -&gt; mediaPlayer.start());\r\n            int scanTimer = (!Objects.equals(Helper.getSharedPreference(mContext, &quot;scanTimer&quot;), &quot;&quot;)) ? Integer.parseInt(Helper.getSharedPreference(mContext,&quot;scanTimer&quot;)) * 1000 : 0;\r\n            mediaPlayer.setOnCompletionListener(listener -&gt; Helper.setTimeout(() -&gt; {\r\n                if (getStatus()) {\r\n                    mediaPlayer.start();\r\n                }\r\n            }, scanTimer));\r\n\r\n            // View\r\n            mView.setBackgroundTintList(mView.getResources().getColorStateList(R.color.darkRed));\r\n            Snackbar.make(mView, &quot;Scanner is ON&quot;, Snackbar.LENGTH_LONG).setAction(&quot;Action&quot;, null).show();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Stop the scanner\r\n     */\r\n    @SuppressLint(&quot;UseCompatLoadingForColorStateLists&quot;)\r\n    @RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)\r\n    public void stop() {\r\n        setStatus(false);\r\n        if (mediaPlayer.isPlaying()) {\r\n            mediaPlayer.stop();\r\n        }\r\n        mView.setBackgroundTintList(null);\r\n        Snackbar.make(mView, &quot;Scanner is OFF&quot;, Snackbar.LENGTH_LONG).setAction(&quot;Action&quot;, null).show();\r\n    }\r\n}\r\n```\r\nHint: You should remove `mediaPlayer.release()`, otherwise you may get an error when you stop and start the mediaplayer.","title":"Stop the audio, with or without the delay","body":"<p>The interesting part of your code is <code>getStatus()</code>. You should make use of it. Somehow like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Scanner {\n    public static MediaPlayer mediaPlayer = new MediaPlayer();\n    public View mView;\n    private Context mContext;\n    public boolean status;\n    private boolean mScannerIsWating = false;\n\n    public boolean getStatus() {\n        return status;\n    }\n    public void setStatus(boolean status) {\n        this.status = status;\n    }\n\n    @RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)\n    public void toggle(View view, Context context) {\n        this.mView = view;\n        this.mContext = context;\n\n        // Activate the scanner\n        if (!mediaPlayer.isPlaying() &amp;&amp; !getStatus()) {\n            this.start();\n        }\n        // Deactivate the scanner\n        else if (mediaPlayer.isPlaying() || getStatus()) {\n            this.stop();\n        }\n\n    }\n\n    /**\n     * Star the scanner\n     */\n    @SuppressLint(&quot;UseCompatLoadingForColorStateLists&quot;)\n    @RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)\n    public void start() {\n        if (!mediaPlayer.isPlaying()) {\n            setStatus(true);\n            mediaPlayer = MediaPlayer.create(mContext, scanner);\n            mediaPlayer.setOnPreparedListener(mediaPlayerListener -&gt; mediaPlayer.start());\n            int scanTimer = (!Objects.equals(Helper.getSharedPreference(mContext, &quot;scanTimer&quot;), &quot;&quot;)) ? Integer.parseInt(Helper.getSharedPreference(mContext,&quot;scanTimer&quot;)) * 1000 : 0;\n            mediaPlayer.setOnCompletionListener(listener -&gt; Helper.setTimeout(() -&gt; {\n                if (getStatus()) {\n                    mediaPlayer.start();\n                }\n            }, scanTimer));\n\n            // View\n            mView.setBackgroundTintList(mView.getResources().getColorStateList(R.color.darkRed));\n            Snackbar.make(mView, &quot;Scanner is ON&quot;, Snackbar.LENGTH_LONG).setAction(&quot;Action&quot;, null).show();\n        }\n    }\n\n    /**\n     * Stop the scanner\n     */\n    @SuppressLint(&quot;UseCompatLoadingForColorStateLists&quot;)\n    @RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)\n    public void stop() {\n        setStatus(false);\n        if (mediaPlayer.isPlaying()) {\n            mediaPlayer.stop();\n        }\n        mView.setBackgroundTintList(null);\n        Snackbar.make(mView, &quot;Scanner is OFF&quot;, Snackbar.LENGTH_LONG).setAction(&quot;Action&quot;, null).show();\n    }\n}\n</code></pre>\n<p>Hint: You should remove <code>mediaPlayer.release()</code>, otherwise you may get an error when you stop and start the mediaplayer.</p>\n"}],"owner":{"account_id":17113839,"reputation":641,"user_id":12383916,"display_name":"xRay"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73187956,"answer_count":1,"score":0,"last_activity_date":1659314863,"creation_date":1659236225,"question_id":73180372,"body_markdown":"I have a button. When I click on it, audio will be played. That audio will always be repeated with a delay. I.e. the audio will be played and then there is a pause for 5 seconds and then it will be played over and over again. So far, that works fine.\r\n\r\n```java\r\npublic static MediaPlayer mediaPlayer = new MediaPlayer();\r\npublic View mView;\r\nprivate Context mContext;\r\npublic boolean status;\r\n\r\npublic boolean getStatus() {\r\n    return status;\r\n}\r\npublic void setStatus(boolean status) {\r\n    this.status = status;\r\n}\r\n\r\n@RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)\r\npublic void toggle(View view, Context context) {\r\n    this.mView = view;\r\n    this.mContext = context;\r\n\r\n    // Activate the scanner\r\n    if (!mediaPlayer.isPlaying()) {\r\n        this.start();\r\n    }\r\n    // Deactivate the scanner\r\n    else {\r\n        this.stop();\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * Star the scanner\r\n */\r\n@SuppressLint(&quot;UseCompatLoadingForColorStateLists&quot;)\r\n@RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)\r\npublic void start() {\r\n    if (!mediaPlayer.isPlaying()) {\r\n        mediaPlayer = MediaPlayer.create(mContext, scanner);\r\n        mediaPlayer.setOnPreparedListener(mediaPlayerListener -&gt; mediaPlayer.start());\r\n        mediaPlayer.setOnCompletionListener(listener -&gt; Helper.setTimeout(() -&gt; mediaPlayer.start(), 5000));\r\n    }\r\n}\r\n\r\n/**\r\n * Stop the scanner\r\n */\r\n@SuppressLint(&quot;UseCompatLoadingForColorStateLists&quot;)\r\n@RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)\r\npublic void stop() {\r\n    if (mediaPlayer.isPlaying()) {\r\n        mediaPlayer.stop();\r\n        mediaPlayer.release();\r\n        mView.setBackgroundTintList(null);\r\n        Snackbar.make(mView, &quot;Scanner is OFF&quot;, Snackbar.LENGTH_LONG).setAction(&quot;Action&quot;, null).show();\r\n        setStatus(false);\r\n    }\r\n}\r\n```\r\n```java\r\npublic static void setTimeout(Runnable runnable, int delay) {\r\n    new Handler(Looper.getMainLooper()).postDelayed(runnable, delay);\r\n}\r\n```\r\n\r\nThe Problem\r\n-----------\r\n\r\nI use `toggle()` for my button. So when I click on it, the audio will be played and when I click again, it should be stopped. That used to work fine, until I added `setOnCompletionListener()`. So now the audio will only stop when it is already playing. But when I click on that button during the 5000ms delay, it will not work. \r\n\r\nI want my toggle button to work, with or without that delay. So is there a way I could cancel that CompletionListener?","title":"Stop the audio, with or without the delay","body":"<p>I have a button. When I click on it, audio will be played. That audio will always be repeated with a delay. I.e. the audio will be played and then there is a pause for 5 seconds and then it will be played over and over again. So far, that works fine.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static MediaPlayer mediaPlayer = new MediaPlayer();\npublic View mView;\nprivate Context mContext;\npublic boolean status;\n\npublic boolean getStatus() {\n    return status;\n}\npublic void setStatus(boolean status) {\n    this.status = status;\n}\n\n@RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)\npublic void toggle(View view, Context context) {\n    this.mView = view;\n    this.mContext = context;\n\n    // Activate the scanner\n    if (!mediaPlayer.isPlaying()) {\n        this.start();\n    }\n    // Deactivate the scanner\n    else {\n        this.stop();\n    }\n\n}\n\n/**\n * Star the scanner\n */\n@SuppressLint(&quot;UseCompatLoadingForColorStateLists&quot;)\n@RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)\npublic void start() {\n    if (!mediaPlayer.isPlaying()) {\n        mediaPlayer = MediaPlayer.create(mContext, scanner);\n        mediaPlayer.setOnPreparedListener(mediaPlayerListener -&gt; mediaPlayer.start());\n        mediaPlayer.setOnCompletionListener(listener -&gt; Helper.setTimeout(() -&gt; mediaPlayer.start(), 5000));\n    }\n}\n\n/**\n * Stop the scanner\n */\n@SuppressLint(&quot;UseCompatLoadingForColorStateLists&quot;)\n@RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)\npublic void stop() {\n    if (mediaPlayer.isPlaying()) {\n        mediaPlayer.stop();\n        mediaPlayer.release();\n        mView.setBackgroundTintList(null);\n        Snackbar.make(mView, &quot;Scanner is OFF&quot;, Snackbar.LENGTH_LONG).setAction(&quot;Action&quot;, null).show();\n        setStatus(false);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public static void setTimeout(Runnable runnable, int delay) {\n    new Handler(Looper.getMainLooper()).postDelayed(runnable, delay);\n}\n</code></pre>\n<h2>The Problem</h2>\n<p>I use <code>toggle()</code> for my button. So when I click on it, the audio will be played and when I click again, it should be stopped. That used to work fine, until I added <code>setOnCompletionListener()</code>. So now the audio will only stop when it is already playing. But when I click on that button during the 5000ms delay, it will not work.</p>\n<p>I want my toggle button to work, with or without that delay. So is there a way I could cancel that CompletionListener?</p>\n"},{"tags":["java","arrays","sorting"],"comments":[{"owner":{"account_id":5120689,"reputation":242,"user_id":4697393,"display_name":"Mariano Macchi"},"score":0,"creation_date":1427075011,"post_id":29202044,"comment_id":46616097,"body_markdown":"The loop you&#39;re using to read the numbers to be sorted reads only one number before your sorting algorithm begins.","body":"The loop you&#39;re using to read the numbers to be sorted reads only one number before your sorting algorithm begins."}],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1427074695,"creation_date":1427074695,"answer_id":29202068,"question_id":29202044,"body_markdown":"First read in the numbers, then sort the array (and it&#39;s an array of `double` not `int`). Something like,\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSystem.out.print(&quot;How many numbers: &quot;);\r\n\t\tint num = IO.readInt();\r\n\t\tdouble array[] = new double[num];\r\n\t\tfor (int j = 0; j &lt; num; j++) {\r\n\t\t\tSystem.out.printf(&quot;Please enter double %d:%n&quot;, j + 1);\r\n\t\t\tarray[j] = IO.readDouble();\r\n\t\t}\r\n\t\tSystem.out.println(&quot;unsorted array: &quot; + Arrays.toString(array));\r\n\t\tArrays.sort(array); // &lt;-- or however you want to sort the array.\r\n\t\tSystem.out.println(&quot;sorted array: &quot; + Arrays.toString(array));\r\n\t}\r\n","title":"Sorting numbers with user input in an array Java","body":"<p>First read in the numbers, then sort the array (and it's an array of <code>double</code> not <code>int</code>). Something like,</p>\n\n<pre><code>public static void main(String[] args) {\n    System.out.print(\"How many numbers: \");\n    int num = IO.readInt();\n    double array[] = new double[num];\n    for (int j = 0; j &lt; num; j++) {\n        System.out.printf(\"Please enter double %d:%n\", j + 1);\n        array[j] = IO.readDouble();\n    }\n    System.out.println(\"unsorted array: \" + Arrays.toString(array));\n    Arrays.sort(array); // &lt;-- or however you want to sort the array.\n    System.out.println(\"sorted array: \" + Arrays.toString(array));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5984137,"reputation":1,"user_id":4702139,"display_name":"Tien Bui"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1427098155,"creation_date":1427098155,"answer_id":29205593,"question_id":29202044,"body_markdown":"    public static void main(String[] args) {\r\n    \t    System.out.print(&quot;How many numbers: &quot;);\r\n    \t    int num = IO.readInt();\r\n    \t    double array[] = new double[num];\r\n    \t    for (int i = 0; i &lt; num; i++) {\r\n    \t        System.out.print(&quot;[&quot;+i+&quot;]Please enter your double&quot;);\r\n    \t        array[i] = IO.readDouble();\r\n    \t    }\r\n    \t    \r\n    \t    //Sort\r\n    \t    double temp = 0;\r\n    \t    for (int i = 0; i &lt; num - 1; i++) {\r\n                for (int j = i + 1; j &lt; num ; j++) {\r\n                    if (array[j] &gt; array[j]) {\r\n                        temp = array[i];\r\n                        array[i] = array[j];\r\n                        array[j] = temp;\r\n                     }\r\n                }\r\n            }\r\n    \t    \r\n    \t    //Result\r\n    \t    for(int i = 0; i &lt; array.length; i++){\r\n    \t    \tSystem.out.print(array[i] + &quot; &quot;);\r\n    \t    }\r\n    \t}","title":"Sorting numbers with user input in an array Java","body":"<pre><code>public static void main(String[] args) {\n        System.out.print(\"How many numbers: \");\n        int num = IO.readInt();\n        double array[] = new double[num];\n        for (int i = 0; i &lt; num; i++) {\n            System.out.print(\"[\"+i+\"]Please enter your double\");\n            array[i] = IO.readDouble();\n        }\n\n        //Sort\n        double temp = 0;\n        for (int i = 0; i &lt; num - 1; i++) {\n            for (int j = i + 1; j &lt; num ; j++) {\n                if (array[j] &gt; array[j]) {\n                    temp = array[i];\n                    array[i] = array[j];\n                    array[j] = temp;\n                 }\n            }\n        }\n\n        //Result\n        for(int i = 0; i &lt; array.length; i++){\n            System.out.print(array[i] + \" \");\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14179546,"reputation":1,"user_id":10243683,"display_name":"SANDIP PANDIT sandy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659314354,"creation_date":1659314354,"answer_id":73187917,"question_id":29202044,"body_markdown":"    import java.util.*;\r\n    import java.lang.*;\r\n    import java.io.*;\r\n    \r\n    public class Main\r\n    {\r\n    \tpublic static void main (String[] args) throws java.lang.Exception\r\n    \t{\r\n    \tScanner sc =new Scanner(System.in);\r\n    \tint n =sc.nextInt();\r\n    \tint arr[]=new int [n];\r\n    \r\n    \tfor (int i =0;i&lt;n;i++){\r\n    \t\tarr[i]=sc.nextInt();}\r\n    \r\n    \t\tArrays.sort(arr);\r\n    \t\t//if(n%2==0){median}\r\n    \t\t\r\n    \t\tSystem.out.println( Arrays.toString(arr));\r\n    \r\n    \t}\r\n    }","title":"Sorting numbers with user input in an array Java","body":"<pre><code>import java.util.*;\nimport java.lang.*;\nimport java.io.*;\n\npublic class Main\n{\n    public static void main (String[] args) throws java.lang.Exception\n    {\n    Scanner sc =new Scanner(System.in);\n    int n =sc.nextInt();\n    int arr[]=new int [n];\n\n    for (int i =0;i&lt;n;i++){\n        arr[i]=sc.nextInt();}\n\n        Arrays.sort(arr);\n        //if(n%2==0){median}\n        \n        System.out.println( Arrays.toString(arr));\n\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3442048,"reputation":31,"user_id":2883767,"accept_rate":25,"display_name":"Seiji"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8382,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1659314354,"creation_date":1427074472,"question_id":29202044,"body_markdown":"I&#39;m a beginner at java and I have a hopefully simple question. \r\nI can get the numbers in order, but only a certain amount of numbers are added to the array. When there is a number less than the smallest number, it replaces that smallest number (the previous smallest gets removed from array). What can I do so that all of the array spots can be filled in?\r\n\r\n    \r\n    public class apples {\r\n\t    public static void main(String[] args) {\r\n\t\t    System.out.print(&quot;How many numbers: &quot;);\r\n\t    \tint num=IO.readInt();\r\n\t\t    double array[]=new double[num];\r\n\t\t    double temp;\r\n\t\t    boolean fixed=false;\r\n\t\t\r\n\t\t    while (fixed==false){\r\n\t\t\t    fixed=true;\r\n\t\t\r\n\t\t        for(int j=0; j&lt;num;j++){\r\n\t\t\t        double x = IO.readDouble();\r\n\t\t\t        array[j] = x;\r\n\t\t\r\n\t\t\t        for (int i = 0; i &lt; ( num - 1 ); i++) {\r\n\t\t\t            for (j = 0; j &lt; num - i - 1; j++) {\r\n\t\t\t                if (array[j] &gt; array[j+1]) {\r\n\t\t\t                    temp = array[j];\r\n\t\t\t                    array[j] = array[j+1];\r\n\t\t\t                    array[j+1] = temp;\r\n\t\t\t                    fixed=false;\r\n\t\t\t                 }\r\n\t\t\t            }\r\n\t\t\t        }\r\n\t\t\t \r\n\t\t\t        System.out.println(&quot;Sorted list of integers:&quot;);\r\n\t\t\t        for (int i = 0; i &lt; num; i++) \r\n\t\t\t            System.out.println(array[i]);\r\n\t\t\t    }\r\n\t        }\r\n\t    }\r\n\t}","title":"Sorting numbers with user input in an array Java","body":"<p>I'm a beginner at java and I have a hopefully simple question. \nI can get the numbers in order, but only a certain amount of numbers are added to the array. When there is a number less than the smallest number, it replaces that smallest number (the previous smallest gets removed from array). What can I do so that all of the array spots can be filled in?</p>\n\n<pre><code>public class apples {\n    public static void main(String[] args) {\n        System.out.print(\"How many numbers: \");\n        int num=IO.readInt();\n        double array[]=new double[num];\n        double temp;\n        boolean fixed=false;\n\n        while (fixed==false){\n            fixed=true;\n\n            for(int j=0; j&lt;num;j++){\n                double x = IO.readDouble();\n                array[j] = x;\n\n                for (int i = 0; i &lt; ( num - 1 ); i++) {\n                    for (j = 0; j &lt; num - i - 1; j++) {\n                        if (array[j] &gt; array[j+1]) {\n                            temp = array[j];\n                            array[j] = array[j+1];\n                            array[j+1] = temp;\n                            fixed=false;\n                         }\n                    }\n                }\n\n                System.out.println(\"Sorted list of integers:\");\n                for (int i = 0; i &lt; num; i++) \n                    System.out.println(array[i]);\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","string","split"],"comments":[{"owner":{"account_id":1005212,"reputation":28558,"user_id":1019167,"accept_rate":92,"display_name":"AlexWien"},"score":0,"creation_date":1359899513,"post_id":14673143,"comment_id":20510891,"body_markdown":"clarify more: what is a letter? a char or string?","body":"clarify more: what is a letter? a char or string?"},{"owner":{"account_id":1005212,"reputation":28558,"user_id":1019167,"accept_rate":92,"display_name":"AlexWien"},"score":2,"creation_date":1359899693,"post_id":14673143,"comment_id":20510935,"body_markdown":"string split uses regular exression analyisi, which makes them handy, but not very efficient. A loop would be bettet","body":"string split uses regular exression analyisi, which makes them handy, but not very efficient. A loop would be bettet"},{"owner":{"account_id":6773,"reputation":4547,"user_id":1856916,"accept_rate":86,"display_name":"WalkingRandomly"},"score":0,"creation_date":1359899743,"post_id":14673143,"comment_id":20514375,"body_markdown":"A very similar question was asked at http://stackoverflow.com/questions/13170551/how-to-using-string-split-in-this-case -- do any of the answers there help you?","body":"A very similar question was asked at <a href=\"http://stackoverflow.com/questions/13170551/how-to-using-string-split-in-this-case\" title=\"how to using string split in this case\">stackoverflow.com/questions/13170551/&hellip;</a> -- do any of the answers there help you?"},{"owner":{"account_id":242097,"reputation":6263,"user_id":513393,"accept_rate":81,"display_name":"Skip"},"score":0,"creation_date":1359900796,"post_id":14673143,"comment_id":20511251,"body_markdown":"if you are willing to write a loop for every simple thing, you probably dont bother about smelly code?","body":"if you are willing to write a loop for every simple thing, you probably dont bother about smelly code?"},{"owner":{"account_id":1489010,"reputation":7802,"user_id":1396594,"accept_rate":67,"display_name":"exexzian"},"score":1,"creation_date":1359900845,"post_id":14673143,"comment_id":20511264,"body_markdown":"agreed with @AlexWien one liner regex are not always effective","body":"agreed with @AlexWien one liner regex are not always effective"},{"owner":{"account_id":1063749,"reputation":14067,"user_id":1064809,"accept_rate":70,"display_name":"Natix"},"score":1,"creation_date":1359900955,"post_id":14673143,"comment_id":20511290,"body_markdown":"@Skip Since when are loops &quot;smelly code&quot;?","body":"@Skip Since when are loops &quot;smelly code&quot;?"},{"owner":{"account_id":242097,"reputation":6263,"user_id":513393,"accept_rate":81,"display_name":"Skip"},"score":0,"creation_date":1359901018,"post_id":14673143,"comment_id":20511305,"body_markdown":"Its about understandable code, its not about efficiency of code","body":"Its about understandable code, its not about efficiency of code"},{"owner":{"account_id":1005212,"reputation":28558,"user_id":1019167,"accept_rate":92,"display_name":"AlexWien"},"score":0,"creation_date":1359909941,"post_id":14673143,"comment_id":20513861,"body_markdown":"@Skip look at the solution you have accepted (regex), and read my comment, this is the smelliest of all solutions. and you probably should study a bit of java introduction, especially in the chapter methods: Using a method you create a solution, such that it is later a one line call.","body":"@Skip look at the solution you have accepted (regex), and read my comment, this is the smelliest of all solutions. and you probably should study a bit of java introduction, especially in the chapter methods: Using a method you create a solution, such that it is later a one line call."}],"answers":[{"tags":[],"owner":{"account_id":29986,"reputation":28837,"user_id":81424,"accept_rate":54,"display_name":"MartinStettner"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1359899371,"creation_date":1359899371,"answer_id":14673165,"question_id":14673143,"body_markdown":"Would `String.toCharArray()` solve your problem?","title":"A short, clear approach to split a String into letters?","body":"<p>Would <code>String.toCharArray()</code> solve your problem?</p>\n"},{"tags":[],"owner":{"account_id":1489010,"reputation":7802,"user_id":1396594,"accept_rate":67,"display_name":"exexzian"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1359900018,"creation_date":1359899661,"answer_id":14673207,"question_id":14673143,"body_markdown":"why dont you go with [subString()][1] of lenth 1 - which will give you `String` of individual chars\r\n\r\nhere is an simple demo code\r\n\r\n     public void subStrChar{\r\n        String s = &quot;helo&quot;;\r\n        for(int i=0;i&lt;s.length();i++){        \r\n            System.out.println(&quot; &quot; + s.substring(i, i+1));\r\n         }\r\n        }\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int,%20int%29","title":"A short, clear approach to split a String into letters?","body":"<p>why dont you go with <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int,%20int%29\" rel=\"nofollow\">subString()</a> of lenth 1 - which will give you <code>String</code> of individual chars</p>\n\n<p>here is an simple demo code</p>\n\n<pre><code> public void subStrChar{\n    String s = \"helo\";\n    for(int i=0;i&lt;s.length();i++){        \n        System.out.println(\" \" + s.substring(i, i+1));\n     }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1335967,"reputation":2922,"user_id":1278725,"accept_rate":73,"display_name":"nansen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1359899703,"creation_date":1359899703,"answer_id":14673211,"question_id":14673143,"body_markdown":"Have a look at guava&#39;s [Splitter][1] maybe.\r\n\r\n\r\n  [1]: http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Splitter.html","title":"A short, clear approach to split a String into letters?","body":"<p>Have a look at guava's <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Splitter.html\" rel=\"nofollow\">Splitter</a> maybe.</p>\n"},{"tags":[],"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1359903354,"creation_date":1359899775,"answer_id":14673221,"question_id":14673143,"body_markdown":"How about this:\r\n\r\n    public static String[] splitMyString(String input)\r\n      {\r\n      final String[] array = new String[input.length()];\r\n      for (int i = 0; i &lt; input.length(); ++i)\r\n      \t array[i] = input.substring(i, i+1);\r\n      return array;\r\n      }","title":"A short, clear approach to split a String into letters?","body":"<p>How about this:</p>\n\n<pre><code>public static String[] splitMyString(String input)\n  {\n  final String[] array = new String[input.length()];\n  for (int i = 0; i &lt; input.length(); ++i)\n     array[i] = input.substring(i, i+1);\n  return array;\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1359900567,"creation_date":1359900567,"answer_id":14673345,"question_id":14673143,"body_markdown":"    str.split(&quot;(?!^)&quot;)\r\n\r\nThe regex will prevent the empty string at the beginning from matching, so the result will not contain starting empty string. This solution will work without any assumption.","title":"A short, clear approach to split a String into letters?","body":"<pre><code>str.split(\"(?!^)\")\n</code></pre>\n\n<p>The regex will prevent the empty string at the beginning from matching, so the result will not contain starting empty string. This solution will work without any assumption.</p>\n"}],"owner":{"account_id":242097,"reputation":6263,"user_id":513393,"accept_rate":81,"display_name":"Skip"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":235,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":14673345,"answer_count":5,"score":-2,"last_activity_date":1659313429,"creation_date":1359899195,"question_id":14673143,"body_markdown":"I have a very basic task in java:\r\n\r\nSplit a string into letters (of type String, not char).\r\n\r\nWhat I used first was `String.split(&quot;123&quot;)`, which returned a leading empty space &quot;{,1,2,3}&quot;.\r\nSince you need to convert the Array into something else or create a new one to remove the first space - I searched for a good appraoch and found many many variants, but all of them are bulky, like using loops and various conversionos.\r\n\r\nSo how would you convert a String into a collection of letter Strings?\r\n\r\n - by using StringBuffers?\r\n - converting to a ArrayList?\r\n - using split and creating a new Array without leading empty space?\r\n - use Tokenizer?\r\n\r\nHow does a short, clear approach look like?\r\n\r\nMy favorite for now is \r\n\r\n   \t\tString[] singleLetters = string.split(&quot;&quot;);\r\n\t\tsingleLetters = Arrays.copyOfRange(singleLetters, 1, singleLetters.length);\r\n\r\nA better approach is:\r\n   \t\t\r\n   \t\tString[] singleLetters = string.split(&quot;(?!^)&quot;)\t","title":"A short, clear approach to split a String into letters?","body":"<p>I have a very basic task in java:</p>\n<p>Split a string into letters (of type String, not char).</p>\n<p>What I used first was <code>String.split(&quot;123&quot;)</code>, which returned a leading empty space &quot;{,1,2,3}&quot;.\nSince you need to convert the Array into something else or create a new one to remove the first space - I searched for a good appraoch and found many many variants, but all of them are bulky, like using loops and various conversionos.</p>\n<p>So how would you convert a String into a collection of letter Strings?</p>\n<ul>\n<li>by using StringBuffers?</li>\n<li>converting to a ArrayList?</li>\n<li>using split and creating a new Array without leading empty space?</li>\n<li>use Tokenizer?</li>\n</ul>\n<p>How does a short, clear approach look like?</p>\n<p>My favorite for now is</p>\n<pre><code>    String[] singleLetters = string.split(&quot;&quot;);\n    singleLetters = Arrays.copyOfRange(singleLetters, 1, singleLetters.length);\n</code></pre>\n<p>A better approach is:</p>\n<pre><code>    String[] singleLetters = string.split(&quot;(?!^)&quot;)  \n</code></pre>\n"},{"tags":["java","multithreading","random","java-17"],"comments":[{"owner":{"account_id":18230881,"reputation":66,"user_id":13269836,"display_name":"suff"},"score":2,"creation_date":1658143380,"post_id":73021220,"comment_id":128969619,"body_markdown":"ThreadLocalRandom implements RandomGenerator interface...  so you do not need that boilerplate.","body":"ThreadLocalRandom implements RandomGenerator interface...  so you do not need that boilerplate."},{"owner":{"account_id":8321997,"reputation":522,"user_id":6253321,"accept_rate":82,"display_name":"cpp beginner"},"score":0,"creation_date":1658143484,"post_id":73021220,"comment_id":128969666,"body_markdown":"You do, because the only way to get an instance is by using `ThreadLocalRandom.current()`, but the returned object is not intended to be shared between threads.","body":"You do, because the only way to get an instance is by using <code>ThreadLocalRandom.current()</code>, but the returned object is not intended to be shared between threads."},{"owner":{"account_id":8321997,"reputation":522,"user_id":6253321,"accept_rate":82,"display_name":"cpp beginner"},"score":0,"creation_date":1658143733,"post_id":73021220,"comment_id":128969773,"body_markdown":"I&#39;ve edited the question to clarify that the boilerplate is needed to get a *thread-safe* implementation of `RandomGenerator` from `ThreadLocalRandom`.","body":"I&#39;ve edited the question to clarify that the boilerplate is needed to get a <i>thread-safe</i> implementation of <code>RandomGenerator</code> from <code>ThreadLocalRandom</code>."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":5,"creation_date":1658144087,"post_id":73021220,"comment_id":128969900,"body_markdown":"The fundamental problem lies in the don&#39;t have control over the parts of the code where the new threads are spawned aspect. So you only have control over the creation of the `RandomGenerator` but neither, the creation of threads nor the code that uses the `RandomGenerator`? Thats an astonishing lack of control, especially over the last part, i.e. code that uses the new `RandomGenerator` interface but doesnt understand the correct usage in multi-threaded environments.","body":"The fundamental problem lies in the don&#39;t have control over the parts of the code where the new threads are spawned aspect. So you only have control over the creation of the <code>RandomGenerator</code> but neither, the creation of threads nor the code that uses the <code>RandomGenerator</code>? Thats an astonishing lack of control, especially over the last part, i.e. code that uses the new <code>RandomGenerator</code> interface but doesnt understand the correct usage in multi-threaded environments."},{"owner":{"account_id":18230881,"reputation":66,"user_id":13269836,"display_name":"suff"},"score":0,"creation_date":1658144491,"post_id":73021220,"comment_id":128970048,"body_markdown":"My bad, I didn&#39;t read past the &quot;implements RandomGenerator&quot;. Still, if you need to &quot;share an instance&quot; then just make your own wrapper that implements RandomGenerator and delegates to ThreadLocalRandom.current().","body":"My bad, I didn&#39;t read past the &quot;implements RandomGenerator&quot;. Still, if you need to &quot;share an instance&quot; then just make your own wrapper that implements RandomGenerator and delegates to ThreadLocalRandom.current()."},{"owner":{"account_id":8321997,"reputation":522,"user_id":6253321,"accept_rate":82,"display_name":"cpp beginner"},"score":0,"creation_date":1658145068,"post_id":73021220,"comment_id":128970260,"body_markdown":"I have control over the parts of the code where the `RandomGenerator` is used, just not where the threads are spawned. I&#39;d like to be able to use the interface so that I can use different implementations in different situations. I can easily make a thread-safe `RandomGenerator` using a `ThreadLocal&lt;RandomGenerator&gt;` but it&#39;s a lot of boilerplate and to me it seems like a common enough situation that it could be included in the jdk.","body":"I have control over the parts of the code where the <code>RandomGenerator</code> is used, just not where the threads are spawned. I&#39;d like to be able to use the interface so that I can use different implementations in different situations. I can easily make a thread-safe <code>RandomGenerator</code> using a <code>ThreadLocal&lt;RandomGenerator&gt;</code> but it&#39;s a lot of boilerplate and to me it seems like a common enough situation that it could be included in the jdk."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1658145140,"post_id":73021220,"comment_id":128970286,"body_markdown":"Well, you already said it, you *could use Random but this leads to contention because of all the synchronization*. So why should the JDK provide you with a thread safe implementation that you dont want? If you want efficient multi-threaded access, use, e.g. a splittable rng. Combine it with a thread local variable if you dont want to check for the actual thread.","body":"Well, you already said it, you <i>could use Random but this leads to contention because of all the synchronization</i>. So why should the JDK provide you with a thread safe implementation that you dont want? If you want efficient multi-threaded access, use, e.g. a splittable rng. Combine it with a thread local variable if you dont want to check for the actual thread."},{"owner":{"account_id":8321997,"reputation":522,"user_id":6253321,"accept_rate":82,"display_name":"cpp beginner"},"score":0,"creation_date":1658145380,"post_id":73021220,"comment_id":128970372,"body_markdown":"I think I&#39;m just confused about how the splittable rng should be used in the case where you don&#39;t control how the threads are spawned. I guess it&#39;s something like `ThreadLocal&lt;RandomGenerator&gt; threadLocal = ThreadLocal.withInitial(... baseRandomGenerator.split()...?)` but it&#39;s not obvious to me how exactly this should be written - isn&#39;t `split` supposed to be called from the original thread? I&#39;d definitely accept an answer giving the details to this.","body":"I think I&#39;m just confused about how the splittable rng should be used in the case where you don&#39;t control how the threads are spawned. I guess it&#39;s something like <code>ThreadLocal&lt;RandomGenerator&gt; threadLocal = ThreadLocal.withInitial(... baseRandomGenerator.split()...?)</code> but it&#39;s not obvious to me how exactly this should be written - isn&#39;t <code>split</code> supposed to be called from the original thread? I&#39;d definitely accept an answer giving the details to this."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1658146264,"post_id":73021220,"comment_id":128970687,"body_markdown":"Good point about the caller of the `split` method. I dont see a statement about the thread itself, but since the state is not thread safe, all callers of `split` should synchronize. Since this happens only once per thread when using `ThreadLocal.withInitial()`, this would be an acceptable overhead. Splitting beforehand in the initiating thread when you dont have control over the creation of worker threads would be indeed impractical.","body":"Good point about the caller of the <code>split</code> method. I dont see a statement about the thread itself, but since the state is not thread safe, all callers of <code>split</code> should synchronize. Since this happens only once per thread when using <code>ThreadLocal.withInitial()</code>, this would be an acceptable overhead. Splitting beforehand in the initiating thread when you dont have control over the creation of worker threads would be indeed impractical."},{"owner":{"account_id":8321997,"reputation":522,"user_id":6253321,"accept_rate":82,"display_name":"cpp beginner"},"score":0,"creation_date":1658146468,"post_id":73021220,"comment_id":128970769,"body_markdown":"Thank you! I think you&#39;ve fully answered my question. Invoking `split` from a synchronized block within the argument passed to `ThreadLocal::withInitial` will do it. I still believe something like this would be worth adding to the JDK, but I guess time will tell if others agree with me that there&#39;s a gap in the Java 17 APIs. If I find time later I&#39;ll write my own answer outlining this solution.","body":"Thank you! I think you&#39;ve fully answered my question. Invoking <code>split</code> from a synchronized block within the argument passed to <code>ThreadLocal::withInitial</code> will do it. I still believe something like this would be worth adding to the JDK, but I guess time will tell if others agree with me that there&#39;s a gap in the Java 17 APIs. If I find time later I&#39;ll write my own answer outlining this solution."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1659309002,"post_id":73021220,"comment_id":129257787,"body_markdown":"Why do you say: ThreadLocalRandom  is now considered &quot;legacy&quot;?","body":"Why do you say: ThreadLocalRandom  is now considered &quot;legacy&quot;?"},{"owner":{"account_id":8321997,"reputation":522,"user_id":6253321,"accept_rate":82,"display_name":"cpp beginner"},"score":1,"creation_date":1659309530,"post_id":73021220,"comment_id":129257864,"body_markdown":"@BasilBourque https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/random/package-summary.html#algorithms","body":"@BasilBourque <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/random/package-summary.html#algorithms\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/17/docs/api/java.base/java/ut&zwnj;&#8203;il/&hellip;</a>"},{"owner":{"account_id":8321997,"reputation":522,"user_id":6253321,"accept_rate":82,"display_name":"cpp beginner"},"score":0,"creation_date":1659309982,"post_id":73021220,"comment_id":129257930,"body_markdown":"I&#39;ve added that link to the question. Granted, legacy doesn&#39;t mean deprecated, but the word doesn&#39;t exactly encourage you to use it.","body":"I&#39;ve added that link to the question. Granted, legacy doesn&#39;t mean deprecated, but the word doesn&#39;t exactly encourage you to use it."}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1658147768,"creation_date":1658147768,"answer_id":73022401,"question_id":73021220,"body_markdown":"When you dont have control over the work splitting or creation of threads, the simplest solution from the using sites perspective, is a `ThreadLocal&lt;RandomGenerator&gt;`.\r\n\r\n```java\r\npublic static void main(String[] args) {\r\n    // spin up threads\r\n    ForkJoinPool.commonPool().invokeAll(\r\n        Collections.nCopies(8, () -&gt; { Thread.sleep(300); return null; }));\r\n\r\n    doWork(ThreadLocal.withInitial(synching(SplittableGenerator.of(&quot;L32X64MixRandom&quot;))));\r\n    doWork(ThreadLocal.withInitial(synching(new SplittableRandom())));\r\n    doWork(ThreadLocal.withInitial(ThreadLocalRandom::current));\r\n}\r\n\r\nstatic final Supplier&lt;SplittableGenerator&gt; synching(SplittableGenerator r) {\r\n    return () -&gt; {\r\n        synchronized(r) {\r\n            return r.split();\r\n        }\r\n    };\r\n}\r\n\r\nprivate static void doWork(ThreadLocal&lt;RandomGenerator&gt; theGenerator) {\r\n    System.out.println(theGenerator.get().toString());\r\n    Set&lt;Thread&gt; threads = ConcurrentHashMap.newKeySet();\r\n    var ints = Stream.generate(() -&gt; theGenerator.get().nextInt(10, 90))\r\n        .parallel()\r\n        .limit(100)\r\n        .peek(x -&gt; threads.add(Thread.currentThread()))\r\n        .toArray();\r\n    System.out.println(Arrays.toString(ints));\r\n    System.out.println(threads.stream().map(Thread::getName).toList());\r\n    System.out.println();\r\n}\r\n```\r\nSince this will not split the RNG before handing one over to another thread but from the already existing worker thread, it has to synchronize the operation. But this happens exactly once per thread when the thread local variable is queried the first time. Its also worth noting the the base RNG is only accessed from that synchronized block.\r\n\r\nNote that this also allows the integration of the legacy `ThreadLocalRandom.current()` without additional synchronization. It would even work with a synchronizing RNG like `Random r = new Random(); doTheWork(ThreadLocal.withInitial(() -&gt; r));`.\r\n\r\nOf course, thats only for illustration, as the RNGs in question have dedicated methods for creating streams which can split before workload is handed over to another worker thread.\r\n\r\n","title":"Thread-Safe RandomGenerator in Java 17","body":"<p>When you dont have control over the work splitting or creation of threads, the simplest solution from the using sites perspective, is a <code>ThreadLocal&lt;RandomGenerator&gt;</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    // spin up threads\n    ForkJoinPool.commonPool().invokeAll(\n        Collections.nCopies(8, () -&gt; { Thread.sleep(300); return null; }));\n\n    doWork(ThreadLocal.withInitial(synching(SplittableGenerator.of(&quot;L32X64MixRandom&quot;))));\n    doWork(ThreadLocal.withInitial(synching(new SplittableRandom())));\n    doWork(ThreadLocal.withInitial(ThreadLocalRandom::current));\n}\n\nstatic final Supplier&lt;SplittableGenerator&gt; synching(SplittableGenerator r) {\n    return () -&gt; {\n        synchronized(r) {\n            return r.split();\n        }\n    };\n}\n\nprivate static void doWork(ThreadLocal&lt;RandomGenerator&gt; theGenerator) {\n    System.out.println(theGenerator.get().toString());\n    Set&lt;Thread&gt; threads = ConcurrentHashMap.newKeySet();\n    var ints = Stream.generate(() -&gt; theGenerator.get().nextInt(10, 90))\n        .parallel()\n        .limit(100)\n        .peek(x -&gt; threads.add(Thread.currentThread()))\n        .toArray();\n    System.out.println(Arrays.toString(ints));\n    System.out.println(threads.stream().map(Thread::getName).toList());\n    System.out.println();\n}\n</code></pre>\n<p>Since this will not split the RNG before handing one over to another thread but from the already existing worker thread, it has to synchronize the operation. But this happens exactly once per thread when the thread local variable is queried the first time. Its also worth noting the the base RNG is only accessed from that synchronized block.</p>\n<p>Note that this also allows the integration of the legacy <code>ThreadLocalRandom.current()</code> without additional synchronization. It would even work with a synchronizing RNG like <code>Random r = new Random(); doTheWork(ThreadLocal.withInitial(() -&gt; r));</code>.</p>\n<p>Of course, thats only for illustration, as the RNGs in question have dedicated methods for creating streams which can split before workload is handed over to another worker thread.</p>\n"},{"tags":[],"owner":{"account_id":8321997,"reputation":522,"user_id":6253321,"accept_rate":82,"display_name":"cpp beginner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658306994,"creation_date":1658305489,"answer_id":73048242,"question_id":73021220,"body_markdown":"The most direct answer to the question is that the new Java 17 APIs do not provide any direct support for obtaining efficient, thread-safe implementations of `RandomGenerator`.\r\n\r\nUsing the idea from [this answer][1], the following code shows how you could use the new `SplittableGenerator` interface to do it, but it&#39;s a lot of boilerplate.\r\n\r\n```\r\nimport java.util.random.RandomGenerator;\r\n\r\npublic final class ThreadSafeGenerator implements RandomGenerator {\r\n\r\n  private final ThreadLocal&lt;RandomGenerator&gt; threadLocal;\r\n\r\n  public ThreadSafeGenerator(String name) {\r\n    SplittableGenerator baseGenerator = SplittableGenerator.of(name);\r\n    threadLocal = ThreadLocal.withInitial(() -&gt; {\r\n      synchronized (baseGenerator) {\r\n        return baseGenerator.split();\r\n      }\r\n    });\r\n  }\r\n\r\n  @Override\r\n  public boolean nextBoolean() {\r\n    return threadLocal.get().nextBoolean();\r\n  }\r\n\r\n  @Override\r\n  public int nextInt() {\r\n    return threadLocal.get().nextInt();\r\n  }\r\n\r\n  // Not finished. All methods of RandomGenerator should be implemented following this pattern.\r\n}\r\n```\r\n\r\n  [1]: https://stackoverflow.com/a/73022401/6253321","title":"Thread-Safe RandomGenerator in Java 17","body":"<p>The most direct answer to the question is that the new Java 17 APIs do not provide any direct support for obtaining efficient, thread-safe implementations of <code>RandomGenerator</code>.</p>\n<p>Using the idea from <a href=\"https://stackoverflow.com/a/73022401/6253321\">this answer</a>, the following code shows how you could use the new <code>SplittableGenerator</code> interface to do it, but it's a lot of boilerplate.</p>\n<pre><code>import java.util.random.RandomGenerator;\n\npublic final class ThreadSafeGenerator implements RandomGenerator {\n\n  private final ThreadLocal&lt;RandomGenerator&gt; threadLocal;\n\n  public ThreadSafeGenerator(String name) {\n    SplittableGenerator baseGenerator = SplittableGenerator.of(name);\n    threadLocal = ThreadLocal.withInitial(() -&gt; {\n      synchronized (baseGenerator) {\n        return baseGenerator.split();\n      }\n    });\n  }\n\n  @Override\n  public boolean nextBoolean() {\n    return threadLocal.get().nextBoolean();\n  }\n\n  @Override\n  public int nextInt() {\n    return threadLocal.get().nextInt();\n  }\n\n  // Not finished. All methods of RandomGenerator should be implemented following this pattern.\n}\n</code></pre>\n"}],"owner":{"account_id":8321997,"reputation":522,"user_id":6253321,"accept_rate":82,"display_name":"cpp beginner"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":856,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73022401,"answer_count":2,"score":2,"last_activity_date":1659309903,"creation_date":1658141708,"question_id":73021220,"body_markdown":"Java 17 has added a new `RandomGenerator` interface. However it seems that all of the new implementations are not thread-safe. The recommended way to use the new interface in multi-threaded situations is to use `SplittableRandom` and call `split` from the original thread when a new thread is spawned. However, in some situations you don&#39;t have control over the parts of the code where the new threads are spawned, and you just need to share an instance between several threads.\r\n\r\nI could use `Random` but this leads to contention because of all the synchronization. It would also be possible to use `ThreadLocalRandom`, but I&#39;m reluctant to do this because this class is now considered &quot;[legacy][1]&quot;, and because this doesn&#39;t give me a thread-safe implementation of `RandomGenerator` without a whole load of boilerplate:\r\n\r\n```\r\n new RandomGenerator() {\r\n    \r\n    @Override \r\n    public int nextInt() {\r\n      return ThreadLocalRandom.current().nextInt();\r\n    }\r\n    \r\n    @Override\r\n    public long nextLong() {\r\n      return ThreadLocalRandom.current().nextLong();\r\n    }\r\n    \r\n    ...\r\n}\r\n```\r\n\r\nTo me this appears to be a fairly fundamental gap in the new API, but I could be missing something. What is the idiomatic Java 17 way to get a thread-safe implementation of `RandomGenerator`? \r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/random/package-summary.html#algorithms","title":"Thread-Safe RandomGenerator in Java 17","body":"<p>Java 17 has added a new <code>RandomGenerator</code> interface. However it seems that all of the new implementations are not thread-safe. The recommended way to use the new interface in multi-threaded situations is to use <code>SplittableRandom</code> and call <code>split</code> from the original thread when a new thread is spawned. However, in some situations you don't have control over the parts of the code where the new threads are spawned, and you just need to share an instance between several threads.</p>\n<p>I could use <code>Random</code> but this leads to contention because of all the synchronization. It would also be possible to use <code>ThreadLocalRandom</code>, but I'm reluctant to do this because this class is now considered &quot;<a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/random/package-summary.html#algorithms\" rel=\"nofollow noreferrer\">legacy</a>&quot;, and because this doesn't give me a thread-safe implementation of <code>RandomGenerator</code> without a whole load of boilerplate:</p>\n<pre><code> new RandomGenerator() {\n    \n    @Override \n    public int nextInt() {\n      return ThreadLocalRandom.current().nextInt();\n    }\n    \n    @Override\n    public long nextLong() {\n      return ThreadLocalRandom.current().nextLong();\n    }\n    \n    ...\n}\n</code></pre>\n<p>To me this appears to be a fairly fundamental gap in the new API, but I could be missing something. What is the idiomatic Java 17 way to get a thread-safe implementation of <code>RandomGenerator</code>?</p>\n"},{"tags":["java","c++","memory","jvm","java-native-interface"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1659016776,"post_id":73152825,"comment_id":129199471,"body_markdown":"[`totalMemory()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Runtime.html#totalMemory()): Returns:\nthe total amount of memory currently available **for current and future objects**, measured in bytes. [`freeMemory()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Runtime.html#freeMemory()): Returns:\nan approximation to the total amount of memory currently available **for future allocated objects**, measured in bytes. In other words, no code, no native memory, no I/O buffersunless they affect the memory available for objects.","body":"<a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Runtime.html#totalMemory()\" rel=\"nofollow noreferrer\"><code>totalMemory()</code></a>: Returns: the total amount of memory currently available <b>for current and future objects</b>, measured in bytes. <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Runtime.html#freeMemory()\" rel=\"nofollow noreferrer\"><code>freeMemory()</code></a>: Returns: an approximation to the total amount of memory currently available <b>for future allocated objects</b>, measured in bytes. In other words, no code, no native memory, no I/O buffersunless they affect the memory available for objects."}],"answers":[{"tags":[],"owner":{"account_id":25918039,"reputation":1,"user_id":19641155,"display_name":"linghuchong"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659309627,"creation_date":1659018727,"answer_id":73154577,"question_id":73152825,"body_markdown":"`Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory()`:\r\nThe memory includes all objects of the JVM and the allocation of some JNI objects.\r\n\r\nIn the Java runtime data area there are native method references to C++ objects or Java objects in the heap.\r\n\r\nAll objects are allocated on the heap.","title":"JNI code and Runtime.getRuntime().totalMemory()","body":"<p><code>Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory()</code>:\nThe memory includes all objects of the JVM and the allocation of some JNI objects.</p>\n<p>In the Java runtime data area there are native method references to C++ objects or Java objects in the heap.</p>\n<p>All objects are allocated on the heap.</p>\n"}],"owner":{"account_id":3581132,"reputation":1802,"user_id":2989330,"accept_rate":69,"display_name":"Green"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659309627,"creation_date":1659010856,"question_id":73152825,"body_markdown":"Does `Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory()` also include memory allocated by JNI code or does it only include memory that is allocated by Java objects? Furthermore, does the C++ code also has to fit into the memory that was assigned to the JVM or is it independent from the JVM?","title":"JNI code and Runtime.getRuntime().totalMemory()","body":"<p>Does <code>Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory()</code> also include memory allocated by JNI code or does it only include memory that is allocated by Java objects? Furthermore, does the C++ code also has to fit into the memory that was assigned to the JVM or is it independent from the JVM?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","oauth-2.0"],"comments":[{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1659308635,"post_id":73187392,"comment_id":129257729,"body_markdown":"`exchange authorization code for access token, which I further want to access REST API resource server` we have no idea what you architecture looks like. Who is the authorization server, privetely hosted? using github? github only allows single applications, you cant use them as fully fledged authorization server with multiple resource servers. Okta? keycloak? depending on architecture the configuration and solutions are different. read the oauth2 rfc, i strongly recommend it.","body":"<code>exchange authorization code for access token, which I further want to access REST API resource server</code> we have no idea what you architecture looks like. Who is the authorization server, privetely hosted? using github? github only allows single applications, you cant use them as fully fledged authorization server with multiple resource servers. Okta? keycloak? depending on architecture the configuration and solutions are different. read the oauth2 rfc, i strongly recommend it."},{"owner":{"account_id":1384758,"reputation":23053,"user_id":1317018,"accept_rate":59,"display_name":"Mahesha999"},"score":0,"creation_date":1659309538,"post_id":73187392,"comment_id":129257866,"body_markdown":"@Toerktumlare I have modified the question and added what I am trying to do in the first sentence. Please let me know if any more information is required.","body":"@Toerktumlare I have modified the question and added what I am trying to do in the first sentence. Please let me know if any more information is required."},{"owner":{"account_id":12626017,"reputation":5868,"user_id":10426557,"display_name":"Jonathan JOhx"},"score":0,"creation_date":1659316005,"post_id":73187392,"comment_id":129258681,"body_markdown":"Just as a comment, this question is highly to be answered as a bounty.","body":"Just as a comment, this question is highly to be answered as a bounty."},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1659335134,"post_id":73187392,"comment_id":129261338,"body_markdown":"Question is asking multiple questions in the same post, and what is considered a lot of research or not is individual. Reading the official docs, some blog posts and a udemy course is to some a lot of research to others not. No one is ever need to defend their downvotes. https://meta.stackoverflow.com/questions/285081/am-i-still-supposed-to-explain-my-downvotes-or-not Just accept downvotes and move on. Good luck","body":"Question is asking multiple questions in the same post, and what is considered a lot of research or not is individual. Reading the official docs, some blog posts and a udemy course is to some a lot of research to others not. No one is ever need to defend their downvotes. <a href=\"https://meta.stackoverflow.com/questions/285081/am-i-still-supposed-to-explain-my-downvotes-or-not\" title=\"am i still supposed to explain my downvotes or not\">meta.stackoverflow.com/questions/285081/&hellip;</a> Just accept downvotes and move on. Good luck"},{"owner":{"account_id":15841746,"reputation":6011,"user_id":11430047,"display_name":"Eleftheria Stein-Kousathana"},"score":0,"creation_date":1660835317,"post_id":73187392,"comment_id":129632060,"body_markdown":"Does this answer your question? [How to add the OAuth 2.0 bearer token to WebClient](https://stackoverflow.com/questions/65128485/how-to-add-the-oauth-2-0-bearer-token-to-webclient)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/65128485/how-to-add-the-oauth-2-0-bearer-token-to-webclient\">How to add the OAuth 2.0 bearer token to WebClient</a>"}],"owner":{"account_id":1384758,"reputation":23053,"user_id":1317018,"accept_rate":59,"display_name":"Mahesha999"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1315,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":0,"score":3,"last_activity_date":1659309327,"creation_date":1659307074,"question_id":73187392,"body_markdown":"I have a spring boot application exposing several REST API endpoints. I want to enable google oauth authentication (authorization code grant) on it. I am trying to figure it out what is spring-security-recommended-way to exchange authorization code for access token, which I further want to access REST API resource server. And more importantly if it is handled automatically with some minimal configuration. I checked different sources which I summarized below:\r\n\r\n1. I checked [this](https://spring.io/guides/tutorials/spring-boot-oauth2/) official tutorial, which asks to add `spring-boot-starter-oauth2-client` dependency and specifying client information in `application.yml` file. Then it says:\r\n\r\n      &gt; The app uses the authorization code grant to obtain an access token from GitHub (the Authorization Server). It then uses the access token to ask GitHub for some personal details (only what you permitted it to do), including your login ID and your name. In this phase, GitHub is acting as a Resource Server, decoding the token that you send and checking if it gives the app permission to access the users details.\r\n\r\n2. I checked [spring security samples github repository](https://github.com/spring-projects/spring-security-samples), but I did not find any example demonstrating this. \r\n\r\n3. In the docs, I found [this section](https://docs.spring.io/spring-security/reference/servlet/oauth2/client/authorization-grants.html#_requesting_an_access_token) which talks about &quot;customizing access token request with `DefaultAuthorizationCodeTokenResponseClient`&quot; but I did not find any example of the same in the official docs. Also, after referring to [this article](https://www.baeldung.com/spring-security-custom-oauth-requests), it seems that this is useful when OAuth2 APIs diverge from standards and is not useful to obtain access token to include in request to resource server&#39;s REST API.\r\n\r\n4. After referring to [this blog post](https://spring.io/blog/2018/03/06/using-spring-security-5-to-integrate-with-oauth-2-secured-services-such-as-facebook-and-github) on spring.io, it seems that we need to manually obtain access token with \r\n\r\n       accessToken = oauth2AuthorizedClient.getAccessToken().getTokenValue() \r\n\r\n   and then explicitly add it to the every REST API resource server request:\r\n\r\n       request.getHeaders().add(&quot;Authorization&quot;, &quot;Bearer &quot; + accessToken);\r\n\r\n   But, with this approach, it seem that we have to write single proxy REST endpoint in the client corresponding to every REST endpoint in the resource server. \r\n\r\n   (The proxy endpoint will do the work of fetching the access token and adding it to the request to corresponding resource server&#39;s endpoint.)  \r\n\r\n5. I also went through [this Udemy&#39;s course](https://www.udemy.com/course/oauth2-in-spring-boot-applications/). In this, author uses WebClient to [retrieve access token](https://github.com/simplyi/PhotoAppWebClient/blob/d98d8eee03533f473c1a3ebad1b0c50460a77cfa/src/main/java/com/appsdeveloperblog/ws/clients/photoappwebclient/PhotoAppWebClientApplication.java#L25) and add to every request to resource server&#39;s REST endpoint. But this also seem to require writing [proxy REST endpoints](https://github.com/simplyi/PhotoAppWebClient/blob/d98d8eee03533f473c1a3ebad1b0c50460a77cfa/src/main/java/com/appsdeveloperblog/ws/clients/photoappwebclient/controllers/AlbumsController.java#L42) in client for every resource server&#39;s REST endpoint. (The proxy endpoint will do the work of fetching the access token and adding it to the request to corresponding resource server&#39;s endpoint.)  \r\n\r\nAfter going through all these resources, I have following questions:\r\n\r\n**Q1.** Does point 1 mean I dont have to manually / explicitly obtain access token and its automatically accessed and included in request to resource server, especially if I have my own REST API resource server?\r\n\r\n**Q2.** Is my interpretation Q1 regarding point 1 incorrect? and I indeed have to manually fetch access token and add it to requests to resource server&#39;s REST endpoint as stated in point 4 and 5 above?\r\n\r\n**Q3.** If answer to Q2 is YES, then do I really need to write proxy REST end point in client for every actual REST endpoint in resource server as stated in point 4 and 5 above?\r\n\r\n**Q4.** Are there any related examples in official docs or spring security samples? (since I didnt find any as stated in point 2 and 3 above)","title":"What is spring-security-recommended way to include access token in request to resource server&#39;s REST end points?","body":"<p>I have a spring boot application exposing several REST API endpoints. I want to enable google oauth authentication (authorization code grant) on it. I am trying to figure it out what is spring-security-recommended-way to exchange authorization code for access token, which I further want to access REST API resource server. And more importantly if it is handled automatically with some minimal configuration. I checked different sources which I summarized below:</p>\n<ol>\n<li><p>I checked <a href=\"https://spring.io/guides/tutorials/spring-boot-oauth2/\" rel=\"noreferrer\">this</a> official tutorial, which asks to add <code>spring-boot-starter-oauth2-client</code> dependency and specifying client information in <code>application.yml</code> file. Then it says:</p>\n<blockquote>\n<p>The app uses the authorization code grant to obtain an access token from GitHub (the Authorization Server). It then uses the access token to ask GitHub for some personal details (only what you permitted it to do), including your login ID and your name. In this phase, GitHub is acting as a Resource Server, decoding the token that you send and checking if it gives the app permission to access the users details.</p>\n</blockquote>\n</li>\n<li><p>I checked <a href=\"https://github.com/spring-projects/spring-security-samples\" rel=\"noreferrer\">spring security samples github repository</a>, but I did not find any example demonstrating this.</p>\n</li>\n<li><p>In the docs, I found <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/client/authorization-grants.html#_requesting_an_access_token\" rel=\"noreferrer\">this section</a> which talks about &quot;customizing access token request with <code>DefaultAuthorizationCodeTokenResponseClient</code>&quot; but I did not find any example of the same in the official docs. Also, after referring to <a href=\"https://www.baeldung.com/spring-security-custom-oauth-requests\" rel=\"noreferrer\">this article</a>, it seems that this is useful when OAuth2 APIs diverge from standards and is not useful to obtain access token to include in request to resource server's REST API.</p>\n</li>\n<li><p>After referring to <a href=\"https://spring.io/blog/2018/03/06/using-spring-security-5-to-integrate-with-oauth-2-secured-services-such-as-facebook-and-github\" rel=\"noreferrer\">this blog post</a> on spring.io, it seems that we need to manually obtain access token with</p>\n<pre><code>accessToken = oauth2AuthorizedClient.getAccessToken().getTokenValue() \n</code></pre>\n<p>and then explicitly add it to the every REST API resource server request:</p>\n<pre><code>request.getHeaders().add(&quot;Authorization&quot;, &quot;Bearer &quot; + accessToken);\n</code></pre>\n<p>But, with this approach, it seem that we have to write single proxy REST endpoint in the client corresponding to every REST endpoint in the resource server.</p>\n<p>(The proxy endpoint will do the work of fetching the access token and adding it to the request to corresponding resource server's endpoint.)</p>\n</li>\n<li><p>I also went through <a href=\"https://www.udemy.com/course/oauth2-in-spring-boot-applications/\" rel=\"noreferrer\">this Udemy's course</a>. In this, author uses WebClient to <a href=\"https://github.com/simplyi/PhotoAppWebClient/blob/d98d8eee03533f473c1a3ebad1b0c50460a77cfa/src/main/java/com/appsdeveloperblog/ws/clients/photoappwebclient/PhotoAppWebClientApplication.java#L25\" rel=\"noreferrer\">retrieve access token</a> and add to every request to resource server's REST endpoint. But this also seem to require writing <a href=\"https://github.com/simplyi/PhotoAppWebClient/blob/d98d8eee03533f473c1a3ebad1b0c50460a77cfa/src/main/java/com/appsdeveloperblog/ws/clients/photoappwebclient/controllers/AlbumsController.java#L42\" rel=\"noreferrer\">proxy REST endpoints</a> in client for every resource server's REST endpoint. (The proxy endpoint will do the work of fetching the access token and adding it to the request to corresponding resource server's endpoint.)</p>\n</li>\n</ol>\n<p>After going through all these resources, I have following questions:</p>\n<p><strong>Q1.</strong> Does point 1 mean I dont have to manually / explicitly obtain access token and its automatically accessed and included in request to resource server, especially if I have my own REST API resource server?</p>\n<p><strong>Q2.</strong> Is my interpretation Q1 regarding point 1 incorrect? and I indeed have to manually fetch access token and add it to requests to resource server's REST endpoint as stated in point 4 and 5 above?</p>\n<p><strong>Q3.</strong> If answer to Q2 is YES, then do I really need to write proxy REST end point in client for every actual REST endpoint in resource server as stated in point 4 and 5 above?</p>\n<p><strong>Q4.</strong> Are there any related examples in official docs or spring security samples? (since I didnt find any as stated in point 2 and 3 above)</p>\n"},{"tags":["java","spring-boot","jwt","mockito"],"comments":[{"owner":{"account_id":1465269,"reputation":10929,"user_id":1712294,"display_name":"Michal Trojanowski"},"score":1,"creation_date":1638964151,"post_id":70262617,"comment_id":124225822,"body_markdown":"You have a utility function which can generate a JWT. Why not use it in the test to generate a fresh token and put it in the header? I would probably even generate the token once for all tests which use a valid token.","body":"You have a utility function which can generate a JWT. Why not use it in the test to generate a fresh token and put it in the header? I would probably even generate the token once for all tests which use a valid token."},{"owner":{"account_id":8915876,"reputation":3560,"user_id":6654475,"accept_rate":100,"display_name":"Francislainy Campos"},"score":0,"creation_date":1638967889,"post_id":70262617,"comment_id":124227258,"body_markdown":"Even when I hardcode a valid token it won&#39;t work. It&#39;ll give me a 200 status code yes but the tests will fail with nothing to print for the result. Not sure why.","body":"Even when I hardcode a valid token it won&#39;t work. It&#39;ll give me a 200 status code yes but the tests will fail with nothing to print for the result. Not sure why."},{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":0,"creation_date":1638970815,"post_id":70262617,"comment_id":124228433,"body_markdown":"Can you create a branch that can reproduce your problem?","body":"Can you create a branch that can reproduce your problem?"},{"owner":{"account_id":8915876,"reputation":3560,"user_id":6654475,"accept_rate":100,"display_name":"Francislainy Campos"},"score":0,"creation_date":1638970841,"post_id":70262617,"comment_id":124228440,"body_markdown":"https://github.com/francislainy/adverts-backend/tree/dev_jwt","body":"<a href=\"https://github.com/francislainy/adverts-backend/tree/dev_jwt\" rel=\"nofollow noreferrer\">github.com/francislainy/adverts-backend/tree/dev_jwt</a>"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1659290419,"post_id":70262617,"comment_id":129254499,"body_markdown":"If writing unit-tests, just ignorea `Authorization` header. All that is need is `@MockBean JwtDecoder` and popolate test security context with the right type of `Authentication` instance. For `JwtAuthenticationToken`, there are at least three options list In my answer below.","body":"If writing unit-tests, just ignorea <code>Authorization</code> header. All that is need is <code>@MockBean JwtDecoder</code> and popolate test security context with the right type of <code>Authentication</code> instance. For <code>JwtAuthenticationToken</code>, there are at least three options list In my answer below."}],"answers":[{"tags":[],"owner":{"account_id":8915876,"reputation":3560,"user_id":6654475,"accept_rate":100,"display_name":"Francislainy Campos"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640498352,"creation_date":1638974388,"answer_id":70276817,"question_id":70262617,"body_markdown":"We just fixed the issue (accepting the other answer for being a more elegant solution).\r\n\r\n**1st and easier option:** \r\n\r\nDisable filter authentication for controller test classes:\r\n\r\n    @AutoConfigureMockMvc(addFilters = false)\r\n    class CategoryCommandControllerTest {\r\n\r\nYou can then perhaps test jwt authorization separately.\r\n\r\n\r\n**2nd and perhaps better option:** \r\n\r\n\r\nRemove the extra pieces from the configure method within the WebSecurity class to end up with only this.\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n\r\n        http.csrf().disable();\r\n    }\r\n\r\nThen under the JwtRequestFilter class add a return when a 403 is caught on the else part of this if block.\r\n\r\n     if (authorizationHeader != null &amp;&amp; authorizationHeader.startsWith(&quot;Bearer &quot;)) {\r\n            jwt = authorizationHeader.substring(7);\r\n            username = jwtUtil.extractUsername(jwt);\r\n        } else {\r\n            response.setStatus(HttpStatus.FORBIDDEN.value());\r\n            return;\r\n        }\r\n\r\nAnd move the doChain.filter piece outside of the other if block.\r\n\r\n      if (username != null) {\r\n\r\n            UserDetails userDetails = this.userDetailsService.loadUserByUsername(username);\r\n\r\n            if (jwtUtil.validateToken(jwt, userDetails)) {\r\n\r\n                UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(\r\n                        userDetails, null, userDetails.getAuthorities());\r\n                usernamePasswordAuthenticationToken\r\n                        .setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n                SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\r\n            }\r\n\r\n            // chain.doFilter(request, response);\r\n\r\n        }\r\n\r\n        chain.doFilter(request, response);\r\n    \r\n    }\r\n\r\n","title":"How to mock JWT token to use it with Mockito and Spring Boot","body":"<p>We just fixed the issue (accepting the other answer for being a more elegant solution).</p>\n<p><strong>1st and easier option:</strong></p>\n<p>Disable filter authentication for controller test classes:</p>\n<pre><code>@AutoConfigureMockMvc(addFilters = false)\nclass CategoryCommandControllerTest {\n</code></pre>\n<p>You can then perhaps test jwt authorization separately.</p>\n<p><strong>2nd and perhaps better option:</strong></p>\n<p>Remove the extra pieces from the configure method within the WebSecurity class to end up with only this.</p>\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n\n    http.csrf().disable();\n}\n</code></pre>\n<p>Then under the JwtRequestFilter class add a return when a 403 is caught on the else part of this if block.</p>\n<pre><code> if (authorizationHeader != null &amp;&amp; authorizationHeader.startsWith(&quot;Bearer &quot;)) {\n        jwt = authorizationHeader.substring(7);\n        username = jwtUtil.extractUsername(jwt);\n    } else {\n        response.setStatus(HttpStatus.FORBIDDEN.value());\n        return;\n    }\n</code></pre>\n<p>And move the doChain.filter piece outside of the other if block.</p>\n<pre><code>  if (username != null) {\n\n        UserDetails userDetails = this.userDetailsService.loadUserByUsername(username);\n\n        if (jwtUtil.validateToken(jwt, userDetails)) {\n\n            UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(\n                    userDetails, null, userDetails.getAuthorities());\n            usernamePasswordAuthenticationToken\n                    .setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n            SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\n        }\n\n        // chain.doFilter(request, response);\n\n    }\n\n    chain.doFilter(request, response);\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1638975525,"creation_date":1638974976,"answer_id":70276960,"question_id":70262617,"body_markdown":"The main problem is using \r\n```\r\n@MockBean\r\nprivate JwtUtil jwtUtil;\r\n```\r\nWhich make JwtRequestFilter perform wrongly in \r\n```java\r\n    if (authorizationHeader != null &amp;&amp; authorizationHeader.startsWith(&quot;Bearer &quot;)) {\r\n        jwt = authorizationHeader.substring(7);\r\n        username = jwtUtil.extractUsername(jwt);\r\n    }\r\n```\r\nAs `username` will always return null from the mock bean.\r\n\r\nTo use the actual `JwtUtils`\r\nAdd `includeFilters` to include it in spring context,\r\nthen we also need to mock `myUserDetailsService.loadUserByUsername` used in `JwtRequestFilter`. After that the test will pass.\r\nRefer to comment inside below code for the changes.\r\n```java\r\n@WebMvcTest(value = CategoryCommandController.class, includeFilters = {\r\n        // to include JwtUtil in spring context\r\n        @ComponentScan.Filter(type = FilterType.ASSIGNABLE_TYPE, classes = JwtUtil.class)})\r\nclass CategoryCommandControllerTest {\r\n\r\n    Logger logger = LoggerFactory.getLogger(CategoryCommandController.class);\r\n\r\n    @MockBean\r\n    private CategoryCommandService categoryCommandService;\r\n\r\n    @Autowired\r\n    private MockMvc mockMvc;\r\n\r\n    @MockBean\r\n    private MyUserDetailsService myUserDetailsService;\r\n\r\n    @MockBean\r\n    private CategoryRepository categoryRepository;\r\n\r\n    @Autowired\r\n    private JwtUtil jwtUtil;\r\n\r\n    @Autowired\r\n    private JwtRequestFilter filter;\r\n\r\n    //    @WithMockUser\r\n    @Test\r\n    void testCreateCategory() throws Exception {\r\n\r\n        CategoryCreateDto categoryCreateDto = new CategoryCreateDto(&quot;category&quot;);\r\n        CategoryCreateDto categoryCreateResponseDto = new CategoryCreateDto(UUID.fromString(&quot;2da4002a-31c5-4cc7-9b92-cbf0db998c41&quot;), &quot;category&quot;);\r\n\r\n        String jsonCreate = asJsonString(categoryCreateDto);\r\n        String jsonResponse = asJsonString(categoryCreateResponseDto);\r\n        UserDetails dummy = new User(&quot;foo@email.com&quot;, &quot;foo&quot;, new ArrayList&lt;&gt;());\r\n        String jwtToken = jwtUtil.generateToken(dummy);\r\n        RequestBuilder request = MockMvcRequestBuilders\r\n                .post(&quot;/api/adverts/category&quot;)\r\n                .content(jsonCreate)\r\n                .header(&quot;Authorization&quot;, &quot;Bearer &quot; + jwtToken)\r\n                .contentType(MediaType.APPLICATION_JSON_VALUE)\r\n                .accept(MediaType.APPLICATION_JSON);\r\n// Below line is not used\r\n//        mockMvc.perform(request).andReturn();\r\n\r\n        //             Should be createCategory(eq(categoryCreateDto))?\r\n        when(categoryCommandService.createCategory(categoryCreateDto)).thenReturn(\r\n                categoryCreateResponseDto);\r\n        // Mock Service method used in JwtRequestFilter\r\n        when(myUserDetailsService.loadUserByUsername(eq(&quot;foo@email.com&quot;))).thenReturn(dummy);\r\n        MvcResult mvcResult = mockMvc.perform(request)\r\n                .andExpect(status().is2xxSuccessful())\r\n//                .andExpect(content().json(jsonResponse, true))\r\n                .andExpect(jsonPath(&quot;$.id&quot;).value(&quot;2da4002a-31c5-4cc7-9b92-cbf0db998c41&quot;))\r\n//                .andExpect(jsonPath(&quot;$.title&quot;).value(&quot;category&quot;))\r\n                .andReturn();\r\n\r\n        logger.info(mvcResult.getResponse().getContentAsString());\r\n    }\r\n    ...\r\n}\r\n```","title":"How to mock JWT token to use it with Mockito and Spring Boot","body":"<p>The main problem is using</p>\n<pre><code>@MockBean\nprivate JwtUtil jwtUtil;\n</code></pre>\n<p>Which make JwtRequestFilter perform wrongly in</p>\n<pre class=\"lang-java prettyprint-override\"><code>    if (authorizationHeader != null &amp;&amp; authorizationHeader.startsWith(&quot;Bearer &quot;)) {\n        jwt = authorizationHeader.substring(7);\n        username = jwtUtil.extractUsername(jwt);\n    }\n</code></pre>\n<p>As <code>username</code> will always return null from the mock bean.</p>\n<p>To use the actual <code>JwtUtils</code>\nAdd <code>includeFilters</code> to include it in spring context,\nthen we also need to mock <code>myUserDetailsService.loadUserByUsername</code> used in <code>JwtRequestFilter</code>. After that the test will pass.\nRefer to comment inside below code for the changes.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@WebMvcTest(value = CategoryCommandController.class, includeFilters = {\n        // to include JwtUtil in spring context\n        @ComponentScan.Filter(type = FilterType.ASSIGNABLE_TYPE, classes = JwtUtil.class)})\nclass CategoryCommandControllerTest {\n\n    Logger logger = LoggerFactory.getLogger(CategoryCommandController.class);\n\n    @MockBean\n    private CategoryCommandService categoryCommandService;\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @MockBean\n    private MyUserDetailsService myUserDetailsService;\n\n    @MockBean\n    private CategoryRepository categoryRepository;\n\n    @Autowired\n    private JwtUtil jwtUtil;\n\n    @Autowired\n    private JwtRequestFilter filter;\n\n    //    @WithMockUser\n    @Test\n    void testCreateCategory() throws Exception {\n\n        CategoryCreateDto categoryCreateDto = new CategoryCreateDto(&quot;category&quot;);\n        CategoryCreateDto categoryCreateResponseDto = new CategoryCreateDto(UUID.fromString(&quot;2da4002a-31c5-4cc7-9b92-cbf0db998c41&quot;), &quot;category&quot;);\n\n        String jsonCreate = asJsonString(categoryCreateDto);\n        String jsonResponse = asJsonString(categoryCreateResponseDto);\n        UserDetails dummy = new User(&quot;foo@email.com&quot;, &quot;foo&quot;, new ArrayList&lt;&gt;());\n        String jwtToken = jwtUtil.generateToken(dummy);\n        RequestBuilder request = MockMvcRequestBuilders\n                .post(&quot;/api/adverts/category&quot;)\n                .content(jsonCreate)\n                .header(&quot;Authorization&quot;, &quot;Bearer &quot; + jwtToken)\n                .contentType(MediaType.APPLICATION_JSON_VALUE)\n                .accept(MediaType.APPLICATION_JSON);\n// Below line is not used\n//        mockMvc.perform(request).andReturn();\n\n        //             Should be createCategory(eq(categoryCreateDto))?\n        when(categoryCommandService.createCategory(categoryCreateDto)).thenReturn(\n                categoryCreateResponseDto);\n        // Mock Service method used in JwtRequestFilter\n        when(myUserDetailsService.loadUserByUsername(eq(&quot;foo@email.com&quot;))).thenReturn(dummy);\n        MvcResult mvcResult = mockMvc.perform(request)\n                .andExpect(status().is2xxSuccessful())\n//                .andExpect(content().json(jsonResponse, true))\n                .andExpect(jsonPath(&quot;$.id&quot;).value(&quot;2da4002a-31c5-4cc7-9b92-cbf0db998c41&quot;))\n//                .andExpect(jsonPath(&quot;$.title&quot;).value(&quot;category&quot;))\n                .andReturn();\n\n        logger.info(mvcResult.getResponse().getContentAsString());\n    }\n    ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659308573,"creation_date":1656007196,"answer_id":72734650,"question_id":70262617,"body_markdown":"`@MockBean JwtDecoder jwtDecoder;` should be enough in association with either (in my own preference order):\r\n\r\n - @WithMockJwtAuth from https://github.com/ch4mpy/spring-addons\r\n - mockMvc.perform(get(...).with(SecurityMockMvcRequestPostProcessors.jwt()...)) I contributed to spring-security-test. IMO, less readable than annotation (see sample below) and also usable for `@Controller` unit tests only when annotation can be used without `MockMvc`\r\n- a mock you put in security context with `SecurityContextHolder.getSecurityContext.setAuthentication(mockJwtAuth)`. This requires more coding and also more knowledge of `JwtAuthenticationToken` internals. \r\n\r\nThe first two in action:\r\n```java\r\n@WebMvcTest(GreetingController.class)\r\n@Import(SampleApi.WebSecurityConfig.class)\r\nclass GreetingControllerAnnotatedTest {\r\n\r\n    @MockBean JwtDecoder jwtDecoder;\r\n\r\n    @Autowired\r\n    MockMvc api;\r\n\r\n    @Test\r\n    @WithMockJwtAuth(authorities = &quot;ROLE_AUTHORIZED_PERSONNEL&quot;, claims = @OpenIdClaims(sub = &quot;Ch4mpy&quot;, preferredUsername = &quot;Tonton Pirate&quot;))\r\n    void greetWithAnnotation() throws Exception {\r\n        api.perform(get(&quot;/greet&quot;)).andExpect(content().string(&quot;Hello Ch4mpy! You are granted with [ROLE_AUTHORIZED_PERSONNEL].&quot;));\r\n    }\r\n\r\n    @Test\r\n    void greetWithPostProcessor() throws Exception {\r\n        api.perform(get(&quot;/greet&quot;).with(SecurityMockMvcRequestPostProcessors.jwt()\r\n                .authorities(List.of(new SimpleGrantedAuthority(&quot;ROLE_AUTHORIZED_PERSONNEL&quot;))).jwt(jwt -&gt; {\r\n                    jwt.subject(&quot;Ch4mpy&quot;);\r\n                    jwt.claims(claims -&gt; claims.put(StandardClaimNames.PREFERRED_USERNAME, &quot;Tonton Pirate&quot;));\r\n                }))).andExpect(content().string(&quot;Hello Ch4mpy! You are granted with [ROLE_AUTHORIZED_PERSONNEL].&quot;));\r\n    }\r\n}\r\n```\r\nComplete sample [there][1]\r\n\r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons/tree/master/samples/webmvc-jwtauthenticationtoken","title":"How to mock JWT token to use it with Mockito and Spring Boot","body":"<p><code>@MockBean JwtDecoder jwtDecoder;</code> should be enough in association with either (in my own preference order):</p>\n<ul>\n<li>@WithMockJwtAuth from <a href=\"https://github.com/ch4mpy/spring-addons\" rel=\"nofollow noreferrer\">https://github.com/ch4mpy/spring-addons</a></li>\n<li>mockMvc.perform(get(...).with(SecurityMockMvcRequestPostProcessors.jwt()...)) I contributed to spring-security-test. IMO, less readable than annotation (see sample below) and also usable for <code>@Controller</code> unit tests only when annotation can be used without <code>MockMvc</code></li>\n<li>a mock you put in security context with <code>SecurityContextHolder.getSecurityContext.setAuthentication(mockJwtAuth)</code>. This requires more coding and also more knowledge of <code>JwtAuthenticationToken</code> internals.</li>\n</ul>\n<p>The first two in action:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@WebMvcTest(GreetingController.class)\n@Import(SampleApi.WebSecurityConfig.class)\nclass GreetingControllerAnnotatedTest {\n\n    @MockBean JwtDecoder jwtDecoder;\n\n    @Autowired\n    MockMvc api;\n\n    @Test\n    @WithMockJwtAuth(authorities = &quot;ROLE_AUTHORIZED_PERSONNEL&quot;, claims = @OpenIdClaims(sub = &quot;Ch4mpy&quot;, preferredUsername = &quot;Tonton Pirate&quot;))\n    void greetWithAnnotation() throws Exception {\n        api.perform(get(&quot;/greet&quot;)).andExpect(content().string(&quot;Hello Ch4mpy! You are granted with [ROLE_AUTHORIZED_PERSONNEL].&quot;));\n    }\n\n    @Test\n    void greetWithPostProcessor() throws Exception {\n        api.perform(get(&quot;/greet&quot;).with(SecurityMockMvcRequestPostProcessors.jwt()\n                .authorities(List.of(new SimpleGrantedAuthority(&quot;ROLE_AUTHORIZED_PERSONNEL&quot;))).jwt(jwt -&gt; {\n                    jwt.subject(&quot;Ch4mpy&quot;);\n                    jwt.claims(claims -&gt; claims.put(StandardClaimNames.PREFERRED_USERNAME, &quot;Tonton Pirate&quot;));\n                }))).andExpect(content().string(&quot;Hello Ch4mpy! You are granted with [ROLE_AUTHORIZED_PERSONNEL].&quot;));\n    }\n}\n</code></pre>\n<p>Complete sample <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/webmvc-jwtauthenticationtoken\" rel=\"nofollow noreferrer\">there</a></p>\n"}],"owner":{"account_id":8915876,"reputation":3560,"user_id":6654475,"accept_rate":100,"display_name":"Francislainy Campos"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13984,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":70276960,"answer_count":3,"score":6,"last_activity_date":1659308573,"creation_date":1638890089,"question_id":70262617,"body_markdown":"I have a controller which gives the user a 403 response unless they are authenticated with a JWT token which is passed as a Bearer token via the authorization header. \r\nI&#39;m looking for resources on how to test this with Mockito but I&#39;m not very successful so far as most of them tell me to use the @WithMockUser annotation, which I understand is for Spring security yes, but does not include the mocking for a JWT token. I&#39;ve tried to mock a few objects such as the UserDetailsClass and the JwtFilter and even hardcoding the bearer token but I think there should be more to it.\r\n\r\n    @MockBean\r\n    private CategoryCommandService categoryCommandService;\r\n\r\n    @Autowired\r\n    private MockMvc mockMvc;\r\n\r\n    @MockBean\r\n    private MyUserDetailsService myUserDetailsService;\r\n\r\n    @MockBean\r\n    private CategoryRepository categoryRepository;\r\n\r\n    @MockBean\r\n    private JwtUtil jwtUtil;\r\n\r\n    @Autowired\r\n    private JwtRequestFilter filter;\r\n\r\n\r\n    @Test\r\n    void testCreateCategory() throws Exception {\r\n\r\n        CategoryCreateDto categoryCreateDto = new CategoryCreateDto(&quot;category&quot;);\r\n        CategoryCreateDto categoryCreateResponseDto = new CategoryCreateDto(UUID.fromString(&quot;2da4002a-31c5-4cc7-9b92-cbf0db998c41&quot;), &quot;category&quot;);\r\n\r\n        String jsonCreate = asJsonString(categoryCreateDto);\r\n        String jsonResponse = asJsonString(categoryCreateResponseDto);\r\n\r\n        RequestBuilder request = MockMvcRequestBuilders\r\n                .post(&quot;/api/adverts/category&quot;)\r\n                .content(jsonCreate)\r\n                .header(&quot;Authorization&quot;, &quot;Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJmb29AZW1haWwuY29tIiwiZXhwIjoxNjM4ODU1MzA1LCJpYXQiOjE2Mzg4MTkzMDV9.q4FWV7yVDAs_DREiF524VZ-udnqwV81GEOgdCj6QQAs&quot;)\r\n                .contentType(MediaType.APPLICATION_JSON_VALUE)\r\n                .accept(MediaType.APPLICATION_JSON);\r\n        mockMvc.perform(request).andReturn();\r\n\r\n        when(categoryCommandService.createCategory(categoryCreateDto)).thenReturn(\r\n                categoryCreateResponseDto);\r\n\r\n        MvcResult mvcResult = mockMvc.perform(request)\r\n                .andExpect(status().is2xxSuccessful())\r\n                .andExpect(content().json(jsonResponse, true))\r\n                .andExpect(jsonPath(&quot;$.id&quot;).value(&quot;2da4002a-31c5-4cc7-9b92-cbf0db998c41&quot;))\r\n                .andExpect(jsonPath(&quot;$.title&quot;).value(&quot;category&quot;))\r\n                .andReturn();\r\n\r\n        logger.info(mvcResult.getResponse().getContentAsString());\r\n    }\r\n\r\n\r\nHere my controller:\r\n\r\n    @CrossOrigin\r\n    @RequestMapping(&quot;/api/adverts/category&quot;)\r\n    @RestController\r\n    public class CategoryCommandController {\r\n\r\n    @Autowired\r\n    private CategoryCommandService categoryCommandService;\r\n\r\n    @Autowired\r\n    private CategoryRepository categoryRepository;\r\n\r\n    @PostMapping(produces = MediaType.APPLICATION_JSON_VALUE, consumes = MediaType.APPLICATION_JSON_VALUE)\r\n    public ResponseEntity&lt;Object&gt; createCategory(@RequestBody CategoryCreateDto categoryCreateDto) {\r\n\r\n        if (categoryCreateDto.getTitle() != null) {\r\n            return new ResponseEntity&lt;&gt;(categoryCommandService.createCategory(categoryCreateDto), HttpStatus.CREATED);\r\n        }\r\n        else {\r\n            return new ResponseEntity&lt;&gt;(new FeedbackMessage(&quot;Missing title&quot;), HttpStatus.BAD_REQUEST);\r\n        }\r\n\r\n    }\r\n    }\r\n\r\n\r\nAnd here my filter:\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\n    import org.springframework.security.core.context.SecurityContextHolder;\r\n    import org.springframework.security.core.userdetails.UserDetails;\r\n    import org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\r\n    import org.springframework.stereotype.Component;\r\n    import org.springframework.web.filter.OncePerRequestFilter;\r\n\r\n    import javax.servlet.FilterChain;\r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    import java.io.IOException;\r\n\r\n    import static com.example.adverts.SecurityConstants.SIGN_UP_URL;\r\n\r\n    @Component\r\n    public class JwtRequestFilter extends OncePerRequestFilter {\r\n\r\n    @Autowired\r\n    private MyUserDetailsService userDetailsService;\r\n\r\n    @Autowired\r\n    private JwtUtil jwtUtil;\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)\r\n            throws ServletException, IOException {\r\n\r\n        String path = request.getRequestURI();\r\n        if (path.equals(SIGN_UP_URL)) {\r\n            chain.doFilter(request, response);\r\n            return;\r\n        }\r\n\r\n        final String authorizationHeader = request.getHeader(&quot;Authorization&quot;);\r\n\r\n        String username = null;\r\n        String jwt = null;\r\n\r\n        if (authorizationHeader != null &amp;&amp; authorizationHeader.startsWith(&quot;Bearer &quot;)) {\r\n            jwt = authorizationHeader.substring(7);\r\n            username = jwtUtil.extractUsername(jwt);\r\n        } else {\r\n\r\n            response.setStatus(HttpStatus.FORBIDDEN.value());\r\n        }\r\n\r\n        if (username != null) {\r\n\r\n            UserDetails userDetails = this.userDetailsService.loadUserByUsername(username);\r\n\r\n            if (jwtUtil.validateToken(jwt, userDetails)) {\r\n\r\n                UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(\r\n                        userDetails, null, userDetails.getAuthorities());\r\n                usernamePasswordAuthenticationToken\r\n                        .setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n                SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\r\n            }\r\n\r\n            chain.doFilter(request, response);\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    }\r\n\r\nAnd JwtUtil class:\r\n\r\n    @Service\r\n    public class JwtUtil {\r\n\r\n    private String SECRET_KEY = &quot;secret&quot;;\r\n\r\n    public String extractUsername(String token) {\r\n        return extractClaim(token, Claims::getSubject);\r\n    }\r\n\r\n    public Date extractExpiration(String token) {\r\n        return extractClaim(token, Claims::getExpiration);\r\n    }\r\n\r\n    public &lt;T&gt; T extractClaim(String token, Function&lt;Claims, T&gt; claimsResolver) {\r\n        final Claims claims = extractAllClaims(token);\r\n        return claimsResolver.apply(claims);\r\n    }\r\n    private Claims extractAllClaims(String token) {\r\n        return Jwts.parser().setSigningKey(SECRET_KEY).parseClaimsJws(token).getBody();\r\n    }\r\n\r\n    private Boolean isTokenExpired(String token) {\r\n        return extractExpiration(token).before(new Date());\r\n    }\r\n\r\n    public String generateToken(UserDetails userDetails) {\r\n        Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\r\n        return createToken(claims, userDetails.getUsername());\r\n    }\r\n\r\n    private String createToken(Map&lt;String, Object&gt; claims, String subject) {\r\n\r\n        return Jwts.builder().setClaims(claims).setSubject(subject).setIssuedAt(new Date(System.currentTimeMillis()))\r\n                .setExpiration(new Date(System.currentTimeMillis() + 1000 * 60 * 60 * 10))\r\n                .signWith(SignatureAlgorithm.HS256, SECRET_KEY).compact();\r\n    }\r\n\r\n    public Boolean validateToken(String token, UserDetails userDetails) {\r\n        final String username = extractUsername(token);\r\n        return (username.equals(userDetails.getUsername()) &amp;&amp; !isTokenExpired(token));\r\n    }\r\n    }\r\n\r\n\r\nHere is the whole Github branch.\r\n\r\nhttps://github.com/francislainy/adverts-backend/tree/dev_jwt\r\n\r\nThank you.\r\n\r\n\r\n**UPDATE**\r\n\r\nFor clarity if I hardcode a valid token I get a 200 status code but my tests will still fail with nothing returned for content whereas before JWT and Spring security they were passing.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VxgeJ.png","title":"How to mock JWT token to use it with Mockito and Spring Boot","body":"<p>I have a controller which gives the user a 403 response unless they are authenticated with a JWT token which is passed as a Bearer token via the authorization header.\nI'm looking for resources on how to test this with Mockito but I'm not very successful so far as most of them tell me to use the @WithMockUser annotation, which I understand is for Spring security yes, but does not include the mocking for a JWT token. I've tried to mock a few objects such as the UserDetailsClass and the JwtFilter and even hardcoding the bearer token but I think there should be more to it.</p>\n<pre><code>@MockBean\nprivate CategoryCommandService categoryCommandService;\n\n@Autowired\nprivate MockMvc mockMvc;\n\n@MockBean\nprivate MyUserDetailsService myUserDetailsService;\n\n@MockBean\nprivate CategoryRepository categoryRepository;\n\n@MockBean\nprivate JwtUtil jwtUtil;\n\n@Autowired\nprivate JwtRequestFilter filter;\n\n\n@Test\nvoid testCreateCategory() throws Exception {\n\n    CategoryCreateDto categoryCreateDto = new CategoryCreateDto(&quot;category&quot;);\n    CategoryCreateDto categoryCreateResponseDto = new CategoryCreateDto(UUID.fromString(&quot;2da4002a-31c5-4cc7-9b92-cbf0db998c41&quot;), &quot;category&quot;);\n\n    String jsonCreate = asJsonString(categoryCreateDto);\n    String jsonResponse = asJsonString(categoryCreateResponseDto);\n\n    RequestBuilder request = MockMvcRequestBuilders\n            .post(&quot;/api/adverts/category&quot;)\n            .content(jsonCreate)\n            .header(&quot;Authorization&quot;, &quot;Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJmb29AZW1haWwuY29tIiwiZXhwIjoxNjM4ODU1MzA1LCJpYXQiOjE2Mzg4MTkzMDV9.q4FWV7yVDAs_DREiF524VZ-udnqwV81GEOgdCj6QQAs&quot;)\n            .contentType(MediaType.APPLICATION_JSON_VALUE)\n            .accept(MediaType.APPLICATION_JSON);\n    mockMvc.perform(request).andReturn();\n\n    when(categoryCommandService.createCategory(categoryCreateDto)).thenReturn(\n            categoryCreateResponseDto);\n\n    MvcResult mvcResult = mockMvc.perform(request)\n            .andExpect(status().is2xxSuccessful())\n            .andExpect(content().json(jsonResponse, true))\n            .andExpect(jsonPath(&quot;$.id&quot;).value(&quot;2da4002a-31c5-4cc7-9b92-cbf0db998c41&quot;))\n            .andExpect(jsonPath(&quot;$.title&quot;).value(&quot;category&quot;))\n            .andReturn();\n\n    logger.info(mvcResult.getResponse().getContentAsString());\n}\n</code></pre>\n<p>Here my controller:</p>\n<pre><code>@CrossOrigin\n@RequestMapping(&quot;/api/adverts/category&quot;)\n@RestController\npublic class CategoryCommandController {\n\n@Autowired\nprivate CategoryCommandService categoryCommandService;\n\n@Autowired\nprivate CategoryRepository categoryRepository;\n\n@PostMapping(produces = MediaType.APPLICATION_JSON_VALUE, consumes = MediaType.APPLICATION_JSON_VALUE)\npublic ResponseEntity&lt;Object&gt; createCategory(@RequestBody CategoryCreateDto categoryCreateDto) {\n\n    if (categoryCreateDto.getTitle() != null) {\n        return new ResponseEntity&lt;&gt;(categoryCommandService.createCategory(categoryCreateDto), HttpStatus.CREATED);\n    }\n    else {\n        return new ResponseEntity&lt;&gt;(new FeedbackMessage(&quot;Missing title&quot;), HttpStatus.BAD_REQUEST);\n    }\n\n}\n}\n</code></pre>\n<p>And here my filter:</p>\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.filter.OncePerRequestFilter;\n\nimport javax.servlet.FilterChain;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport java.io.IOException;\n\nimport static com.example.adverts.SecurityConstants.SIGN_UP_URL;\n\n@Component\npublic class JwtRequestFilter extends OncePerRequestFilter {\n\n@Autowired\nprivate MyUserDetailsService userDetailsService;\n\n@Autowired\nprivate JwtUtil jwtUtil;\n\n@Override\nprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)\n        throws ServletException, IOException {\n\n    String path = request.getRequestURI();\n    if (path.equals(SIGN_UP_URL)) {\n        chain.doFilter(request, response);\n        return;\n    }\n\n    final String authorizationHeader = request.getHeader(&quot;Authorization&quot;);\n\n    String username = null;\n    String jwt = null;\n\n    if (authorizationHeader != null &amp;&amp; authorizationHeader.startsWith(&quot;Bearer &quot;)) {\n        jwt = authorizationHeader.substring(7);\n        username = jwtUtil.extractUsername(jwt);\n    } else {\n\n        response.setStatus(HttpStatus.FORBIDDEN.value());\n    }\n\n    if (username != null) {\n\n        UserDetails userDetails = this.userDetailsService.loadUserByUsername(username);\n\n        if (jwtUtil.validateToken(jwt, userDetails)) {\n\n            UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(\n                    userDetails, null, userDetails.getAuthorities());\n            usernamePasswordAuthenticationToken\n                    .setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n            SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\n        }\n\n        chain.doFilter(request, response);\n\n    }\n\n\n}\n\n}\n</code></pre>\n<p>And JwtUtil class:</p>\n<pre><code>@Service\npublic class JwtUtil {\n\nprivate String SECRET_KEY = &quot;secret&quot;;\n\npublic String extractUsername(String token) {\n    return extractClaim(token, Claims::getSubject);\n}\n\npublic Date extractExpiration(String token) {\n    return extractClaim(token, Claims::getExpiration);\n}\n\npublic &lt;T&gt; T extractClaim(String token, Function&lt;Claims, T&gt; claimsResolver) {\n    final Claims claims = extractAllClaims(token);\n    return claimsResolver.apply(claims);\n}\nprivate Claims extractAllClaims(String token) {\n    return Jwts.parser().setSigningKey(SECRET_KEY).parseClaimsJws(token).getBody();\n}\n\nprivate Boolean isTokenExpired(String token) {\n    return extractExpiration(token).before(new Date());\n}\n\npublic String generateToken(UserDetails userDetails) {\n    Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\n    return createToken(claims, userDetails.getUsername());\n}\n\nprivate String createToken(Map&lt;String, Object&gt; claims, String subject) {\n\n    return Jwts.builder().setClaims(claims).setSubject(subject).setIssuedAt(new Date(System.currentTimeMillis()))\n            .setExpiration(new Date(System.currentTimeMillis() + 1000 * 60 * 60 * 10))\n            .signWith(SignatureAlgorithm.HS256, SECRET_KEY).compact();\n}\n\npublic Boolean validateToken(String token, UserDetails userDetails) {\n    final String username = extractUsername(token);\n    return (username.equals(userDetails.getUsername()) &amp;&amp; !isTokenExpired(token));\n}\n}\n</code></pre>\n<p>Here is the whole Github branch.</p>\n<p><a href=\"https://github.com/francislainy/adverts-backend/tree/dev_jwt\" rel=\"nofollow noreferrer\">https://github.com/francislainy/adverts-backend/tree/dev_jwt</a></p>\n<p>Thank you.</p>\n<p><strong>UPDATE</strong></p>\n<p>For clarity if I hardcode a valid token I get a 200 status code but my tests will still fail with nothing returned for content whereas before JWT and Spring security they were passing.</p>\n<p><a href=\"https://i.stack.imgur.com/VxgeJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VxgeJ.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":0,"creation_date":1659064267,"post_id":73161181,"comment_id":129211553,"body_markdown":"You need to make use of a `while` loop. See this section from the official Java tutorial: [The while and do-while Statements](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/while.html). The short explanation is that you need to wrap all the code that needs to repeat inside the `while` loop. If you want to keep values between loops then declare them before/outside the loop.","body":"You need to make use of a <code>while</code> loop. See this section from the official Java tutorial: <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/while.html\" rel=\"nofollow noreferrer\">The while and do-while Statements</a>. The short explanation is that you need to wrap all the code that needs to repeat inside the <code>while</code> loop. If you want to keep values between loops then declare them before/outside the loop."}],"answers":[{"tags":[],"owner":{"account_id":24371833,"reputation":9,"user_id":18304680,"display_name":"CuiYGA"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1659308251,"creation_date":1659065126,"answer_id":73161297,"question_id":73161181,"body_markdown":"You can use [while](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/while.html) and [break](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html) statements","title":"how do i implement user input in loop in the following code?","body":"<p>You can use <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/while.html\" rel=\"nofollow noreferrer\">while</a> and <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html\" rel=\"nofollow noreferrer\">break</a> statements</p>\n"},{"tags":[],"owner":{"account_id":7413926,"reputation":5474,"user_id":11374957,"display_name":"Kaan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659067043,"creation_date":1659067043,"answer_id":73161481,"question_id":73161181,"body_markdown":"Here&#39;s a solution that behaves like you&#39;re describing, and how your code currently behaves:\r\n\r\n* ask for a few numbers up front (minimum, maximum)\r\n* determine a random &quot;target&quot; number for the user to guess\r\n* ask the user to guess &#160;if they&#39;re correct, show a message; if they&#39;re incorrect, ask for another guess\r\n* repeat until their guess is correct\r\n\r\nA few things I did:\r\n* introduce a &quot;getNumber()&quot; helper that will make sure the numbers make sense &#160;put some guardrails around what a user can enter to minimize unexpected results if user enters unexpected input\r\n* use a &quot;while&quot; loop, go forever  `while (true)`\r\n* if their guess matches the target, use `break` to stop the loop\r\n\r\n```\r\npublic static void main(String[] args) {\r\n    Scanner scanner = new Scanner(System.in);\r\n\r\n    int minimum = getNumber(scanner, 0, &quot;minimum&quot;);\r\n    int maximum = getNumber(scanner, minimum + 1, &quot;maximum&quot;);\r\n    int target = (int) ((Math.random() * (maximum - minimum)) + minimum);\r\n\r\n    while (true) {\r\n        System.out.print(&quot;enter a guess: &quot;);\r\n        int guess = scanner.nextInt();\r\n        if (guess == target) {\r\n            System.out.println(&quot;correct guess! the number was &quot; + target);\r\n            break;\r\n        } else {\r\n            System.out.print(&quot;nope, please try again.. &quot;);\r\n        }\r\n    }\r\n}\r\n\r\nstatic int getNumber(Scanner scanner, int minimumAllowed, String numberType) {\r\n    while (true) {\r\n        System.out.print(&quot;enter &quot; + numberType + &quot; number: &quot;);\r\n        int minimum = scanner.nextInt();\r\n        if (minimum &gt;= minimumAllowed) {\r\n            return minimum;\r\n        } else {\r\n            System.out.println(&quot;too small, must be at least &quot; + minimumAllowed);\r\n        }\r\n    }\r\n}\r\n```\r\nHere&#39;s a sample run:\r\n```\r\nenter minimum number: 1\r\nenter maximum number: -3\r\ntoo small, must be at least 2\r\nenter maximum number: 5\r\nenter a guess: 1\r\nnope, please try again.. enter a guess: 2\r\nnope, please try again.. enter a guess: 3\r\nnope, please try again.. enter a guess: 4\r\ncorrect guess! the number was 4\r\n```\r\n","title":"how do i implement user input in loop in the following code?","body":"<p>Here's a solution that behaves like you're describing, and how your code currently behaves:</p>\n<ul>\n<li>ask for a few numbers up front (minimum, maximum)</li>\n<li>determine a random &quot;target&quot; number for the user to guess</li>\n<li>ask the user to guess if they're correct, show a message; if they're incorrect, ask for another guess</li>\n<li>repeat until their guess is correct</li>\n</ul>\n<p>A few things I did:</p>\n<ul>\n<li>introduce a &quot;getNumber()&quot; helper that will make sure the numbers make sense put some guardrails around what a user can enter to minimize unexpected results if user enters unexpected input</li>\n<li>use a &quot;while&quot; loop, go forever  <code>while (true)</code></li>\n<li>if their guess matches the target, use <code>break</code> to stop the loop</li>\n</ul>\n<pre><code>public static void main(String[] args) {\n    Scanner scanner = new Scanner(System.in);\n\n    int minimum = getNumber(scanner, 0, &quot;minimum&quot;);\n    int maximum = getNumber(scanner, minimum + 1, &quot;maximum&quot;);\n    int target = (int) ((Math.random() * (maximum - minimum)) + minimum);\n\n    while (true) {\n        System.out.print(&quot;enter a guess: &quot;);\n        int guess = scanner.nextInt();\n        if (guess == target) {\n            System.out.println(&quot;correct guess! the number was &quot; + target);\n            break;\n        } else {\n            System.out.print(&quot;nope, please try again.. &quot;);\n        }\n    }\n}\n\nstatic int getNumber(Scanner scanner, int minimumAllowed, String numberType) {\n    while (true) {\n        System.out.print(&quot;enter &quot; + numberType + &quot; number: &quot;);\n        int minimum = scanner.nextInt();\n        if (minimum &gt;= minimumAllowed) {\n            return minimum;\n        } else {\n            System.out.println(&quot;too small, must be at least &quot; + minimumAllowed);\n        }\n    }\n}\n</code></pre>\n<p>Here's a sample run:</p>\n<pre><code>enter minimum number: 1\nenter maximum number: -3\ntoo small, must be at least 2\nenter maximum number: 5\nenter a guess: 1\nnope, please try again.. enter a guess: 2\nnope, please try again.. enter a guess: 3\nnope, please try again.. enter a guess: 4\ncorrect guess! the number was 4\n</code></pre>\n"}],"owner":{"account_id":23814662,"reputation":21,"user_id":17823087,"display_name":"Marauders"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1659308251,"creation_date":1659063460,"question_id":73161181,"body_markdown":"  this is guess number programme using constructor but the issue which I am facing \r\nis not able to express user input in loop.I tried to look for it but not good explanation.\r\n\r\n \r\n    \r\n\r\n    import  java.util.Scanner;\r\n    import java.lang.Math;\r\n    class guessnumber{\r\n\r\n \r\n    public int getRandomNumber(int min, int max) {\r\n    return (int) ((Math.random() * (max - min)) + min);\r\n    }\r\n\r\n    public String userinput(int repeats,int rand){\r\n    String e;\r\n    e=&quot;that&#39;s it&quot;;\r\n    if(repeats&lt;rand){\r\n        String z=&quot;choose higher number&quot;;\r\n        System.out.println(z);\r\n    }\r\n    else if (repeats&gt;rand){\r\n        String z=&quot;choose lower number&quot;;\r\n        System.out.println(z);\r\n    }\r\n    return e;\r\n    }\r\n    public String iscorrect(){\r\n    String correct=&quot;correct number&quot;;\r\n    return correct;\r\n    }\r\n    }\r\n    public class guessthenumber {\r\n    public static void main(String[] args) {\r\n    Scanner sc = new Scanner(System.in);\r\n    guessnumber gun = new guessnumber();\r\n    System.out.println(&quot;enter number &quot;);\r\n    int number = sc.nextInt();\r\n    System.out.println(&quot;enter max and min number&quot;);\r\n    int min = sc.nextInt();\r\n    int max = sc.nextInt();\r\n    int o=gun.getRandomNumber(min,max);\r\n    System.out.println(o);\r\n    if (number &lt; o || number &gt; o) {\r\n        System.out.println(gun.userinput(number, o));}\r\n   \r\n    else if(number==o){\r\n       String correct= gun.iscorrect();\r\n        System.out.println(correct);\r\n\r\n    }\r\n    }\r\n    }\r\n\r\nI want to user to keep entering data till correct number is hit","title":"how do i implement user input in loop in the following code?","body":"<p>this is guess number programme using constructor but the issue which I am facing\nis not able to express user input in loop.I tried to look for it but not good explanation.</p>\n<pre><code>import  java.util.Scanner;\nimport java.lang.Math;\nclass guessnumber{\n\n\npublic int getRandomNumber(int min, int max) {\nreturn (int) ((Math.random() * (max - min)) + min);\n}\n\npublic String userinput(int repeats,int rand){\nString e;\ne=&quot;that's it&quot;;\nif(repeats&lt;rand){\n    String z=&quot;choose higher number&quot;;\n    System.out.println(z);\n}\nelse if (repeats&gt;rand){\n    String z=&quot;choose lower number&quot;;\n    System.out.println(z);\n}\nreturn e;\n}\npublic String iscorrect(){\nString correct=&quot;correct number&quot;;\nreturn correct;\n}\n}\npublic class guessthenumber {\npublic static void main(String[] args) {\nScanner sc = new Scanner(System.in);\nguessnumber gun = new guessnumber();\nSystem.out.println(&quot;enter number &quot;);\nint number = sc.nextInt();\nSystem.out.println(&quot;enter max and min number&quot;);\nint min = sc.nextInt();\nint max = sc.nextInt();\nint o=gun.getRandomNumber(min,max);\nSystem.out.println(o);\nif (number &lt; o || number &gt; o) {\n    System.out.println(gun.userinput(number, o));}\n\nelse if(number==o){\n   String correct= gun.iscorrect();\n    System.out.println(correct);\n\n}\n}\n}\n</code></pre>\n<p>I want to user to keep entering data till correct number is hit</p>\n"},{"tags":["java","reactjs","spring","spring-boot"],"comments":[{"owner":{"account_id":2565865,"reputation":5531,"user_id":2225960,"display_name":"Juan"},"score":0,"creation_date":1659308087,"post_id":73187366,"comment_id":129257639,"body_markdown":"If you are hitting port 8080 on the server why are you enabeling port 3000 for CORS?","body":"If you are hitting port 8080 on the server why are you enabeling port 3000 for CORS?"},{"owner":{"account_id":19648646,"reputation":559,"user_id":14385721,"display_name":"TTT2"},"score":0,"creation_date":1659312383,"post_id":73187366,"comment_id":129258266,"body_markdown":"because the request comes from the client that is running on port 3000, or what do you mean?","body":"because the request comes from the client that is running on port 3000, or what do you mean?"},{"owner":{"account_id":2565865,"reputation":5531,"user_id":2225960,"display_name":"Juan"},"score":1,"creation_date":1659314877,"post_id":73187366,"comment_id":129258564,"body_markdown":"It doesn&#39;t matter where the client runs, the problem here is about the browser running XHR requests to the server. With CORS you let the browser do the request, so what matters is the url and port the browser is targeting on your server.","body":"It doesn&#39;t matter where the client runs, the problem here is about the browser running XHR requests to the server. With CORS you let the browser do the request, so what matters is the url and port the browser is targeting on your server."},{"owner":{"account_id":19648646,"reputation":559,"user_id":14385721,"display_name":"TTT2"},"score":0,"creation_date":1659315350,"post_id":73187366,"comment_id":129258616,"body_markdown":"Could you please explain that a little bit deeper please, also the tutorial configured CORS in port 3000 and there it runs well, also I just changed the annotation to http://localhost:8080 and didn&#39;t run.","body":"Could you please explain that a little bit deeper please, also the tutorial configured CORS in port 3000 and there it runs well, also I just changed the annotation to <a href=\"http://localhost:8080\" rel=\"nofollow noreferrer\">localhost:8080</a> and didn&#39;t run."},{"owner":{"account_id":2565865,"reputation":5531,"user_id":2225960,"display_name":"Juan"},"score":0,"creation_date":1659315444,"post_id":73187366,"comment_id":129258623,"body_markdown":"To get around CORS you need to understand what it does and how it works. I suggest you checkout this documentation: https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS","body":"To get around CORS you need to understand what it does and how it works. I suggest you checkout this documentation: <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/HTTP/CORS</a>"},{"owner":{"account_id":19648646,"reputation":559,"user_id":14385721,"display_name":"TTT2"},"score":0,"creation_date":1659317128,"post_id":73187366,"comment_id":129258825,"body_markdown":"thanks, just read and is what i knew about CORS, the client make a request and send in headers the origin from where he is doing the request i.e where is running (?) the server must have in it access control allow origin policy the http://localhost:3000 url, also saw the request in the browser and server in response does not have the access control allow origin header, so maybe i think is spring missconfiguration the problem","body":"thanks, just read and is what i knew about CORS, the client make a request and send in headers the origin from where he is doing the request i.e where is running (?) the server must have in it access control allow origin policy the <a href=\"http://localhost:3000\" rel=\"nofollow noreferrer\">localhost:3000</a> url, also saw the request in the browser and server in response does not have the access control allow origin header, so maybe i think is spring missconfiguration the problem"},{"owner":{"account_id":8873402,"reputation":1052,"user_id":6626461,"display_name":"heyitsvajid"},"score":1,"creation_date":1659330777,"post_id":73187366,"comment_id":129260442,"body_markdown":"`@CrossOrigin(origins = &quot;*&quot;, allowedHeaders = &quot;*&quot;)`\nTry changing it to this. Make sure you restart the Spring Boot App","body":"<code>@CrossOrigin(origins = &quot;*&quot;, allowedHeaders = &quot;*&quot;)</code> Try changing it to this. Make sure you restart the Spring Boot App"},{"owner":{"account_id":22296747,"reputation":151,"user_id":16522650,"display_name":"NebuCodeNezzar"},"score":0,"creation_date":1696061230,"post_id":73187366,"comment_id":136108167,"body_markdown":"@heyitsvajid, doesn&#39;t @CrossOrigin(origins = &quot;*&quot;, allowedHeaders = &quot;*&quot;) allow access to your app backend by all external domains?","body":"@heyitsvajid, doesn&#39;t @CrossOrigin(origins = &quot;<i>&quot;, allowedHeaders = &quot;</i>&quot;) allow access to your app backend by all external domains?"}],"owner":{"account_id":19648646,"reputation":559,"user_id":14385721,"display_name":"TTT2"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":836,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1659306788,"creation_date":1659306788,"question_id":73187366,"body_markdown":"I am learning spring boot from a youtube course, we are doing a rest api and consuming the backend data from react client, i am not using spring security so as the video said i just have to configure the @CrossOrigin annotation as follows in the RestController:\r\n\r\n**Controller that blocks request from react client**\r\n```\r\npackage com.user.springBackend.controller;\r\n\r\n\r\nimport com.user.springBackend.model.Employee;\r\nimport com.user.springBackend.repository.EmployeeRepository;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.CrossOrigin;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport java.util.List;\r\n\r\n@CrossOrigin(origins = &quot;http://localhost:3000&quot;)\r\n@RestController\r\n@RequestMapping(&quot;/api/v1/&quot;)\r\npublic class EmployeeController {\r\n\r\n    @Autowired\r\n    private EmployeeRepository employeeRepository;\r\n\r\n    //get all employees\r\n\r\n    @GetMapping(&quot;/employees&quot;)\r\n    public List&lt;Employee&gt; getAllEmployees(){\r\n        return employeeRepository.findAll();\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nthe react client is doing the request with axios as seen here: \r\n\r\n**React client code doing request**\r\n```\r\nimport axios from &#39;axios&#39;;\r\nconst EMPLOYEE_API_BASE_URL = &#39;http://localhost:8080/api/V1/employees&#39;;\r\n\r\nclass EmployeeService{\r\n\r\n    getEmployees(){\r\n        return axios.get(EMPLOYEE_API_BASE_URL);\r\n    }\r\n\r\n}\r\n\r\nexport default new EmployeeService();\r\n```\r\n\r\nand the error that the browser sends when i run both applications is:\r\n\r\n[![cors error when running both applications][1]][1]\r\n\r\nHow can i fix this? there are other question that may tend to see this as a duplicated question but the others are using spring security which change the configuration needed to cors.\r\n\r\nalso my pom.xml file is this:\r\n\r\n**pom.xml file**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.tito&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;springBackend&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;springBackend&lt;/name&gt;\r\n\t&lt;description&gt;backend in springboot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;18&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n  [1]: https://i.stack.imgur.com/sFBZL.png","title":"Spring Boot CORS not letting react app in localhost port 3000 to acces content","body":"<p>I am learning spring boot from a youtube course, we are doing a rest api and consuming the backend data from react client, i am not using spring security so as the video said i just have to configure the @CrossOrigin annotation as follows in the RestController:</p>\n<p><strong>Controller that blocks request from react client</strong></p>\n<pre><code>package com.user.springBackend.controller;\n\n\nimport com.user.springBackend.model.Employee;\nimport com.user.springBackend.repository.EmployeeRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.CrossOrigin;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport java.util.List;\n\n@CrossOrigin(origins = &quot;http://localhost:3000&quot;)\n@RestController\n@RequestMapping(&quot;/api/v1/&quot;)\npublic class EmployeeController {\n\n    @Autowired\n    private EmployeeRepository employeeRepository;\n\n    //get all employees\n\n    @GetMapping(&quot;/employees&quot;)\n    public List&lt;Employee&gt; getAllEmployees(){\n        return employeeRepository.findAll();\n    }\n\n}\n\n</code></pre>\n<p>the react client is doing the request with axios as seen here:</p>\n<p><strong>React client code doing request</strong></p>\n<pre><code>import axios from 'axios';\nconst EMPLOYEE_API_BASE_URL = 'http://localhost:8080/api/V1/employees';\n\nclass EmployeeService{\n\n    getEmployees(){\n        return axios.get(EMPLOYEE_API_BASE_URL);\n    }\n\n}\n\nexport default new EmployeeService();\n</code></pre>\n<p>and the error that the browser sends when i run both applications is:</p>\n<p><a href=\"https://i.stack.imgur.com/sFBZL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sFBZL.png\" alt=\"cors error when running both applications\" /></a></p>\n<p>How can i fix this? there are other question that may tend to see this as a duplicated question but the others are using spring security which change the configuration needed to cors.</p>\n<p>also my pom.xml file is this:</p>\n<p><strong>pom.xml file</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.tito&lt;/groupId&gt;\n    &lt;artifactId&gt;springBackend&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;springBackend&lt;/name&gt;\n    &lt;description&gt;backend in springboot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;18&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n"},{"tags":["java","image","math","processing"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1658875635,"post_id":73130483,"comment_id":129159734,"body_markdown":"I don&#39;t quite understand what you&#39;re trying to do. If the 512x512 was upscaled to 1024x1024 then a pixel (x,y) in the smaller image would map to the pixel (2*x,2*y) in the larger image, so you would do x&#39; = x * (1024/512) which is x&#39; = 2x. You&#39;d do the same for the y coordinate.","body":"I don&#39;t quite understand what you&#39;re trying to do. If the 512x512 was upscaled to 1024x1024 then a pixel (x,y) in the smaller image would map to the pixel (2*x,2*y) in the larger image, so you would do x&#39; = x * (1024/512) which is x&#39; = 2x. You&#39;d do the same for the y coordinate."},{"owner":{"account_id":16680445,"reputation":37,"user_id":12055676,"display_name":"Andrea Efficace"},"score":0,"creation_date":1658876230,"post_id":73130483,"comment_id":129159870,"body_markdown":"@tgdavies Actually I would like that if I a click at some point in the `512x512` and get the coordinate i.e. `(30,30)` then this should have a similar value in the `1024x1024` if I&#39;m near the top-left corner. Like if I have a geographical map, where proportions aren&#39;t fully respected. Am I missing something and double the value is correct?","body":"@tgdavies Actually I would like that if I a click at some point in the <code>512x512</code> and get the coordinate i.e. <code>(30,30)</code> then this should have a similar value in the <code>1024x1024</code> if I&#39;m near the top-left corner. Like if I have a geographical map, where proportions aren&#39;t fully respected. Am I missing something and double the value is correct?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1658876922,"post_id":73130483,"comment_id":129159970,"body_markdown":"In your question you say *y* = x*1024/512 -- you don&#39;t want to mix the x and y coordinates. I&#39;m not sure what you mean by &quot;a geographical map, where proportions aren&#39;t fully respected&quot;. If you want map from one projection to another that&#39;s more complicated.","body":"In your question you say <i>y</i> = x*1024/512 -- you don&#39;t want to mix the x and y coordinates. I&#39;m not sure what you mean by &quot;a geographical map, where proportions aren&#39;t fully respected&quot;. If you want map from one projection to another that&#39;s more complicated."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1658877161,"post_id":73130483,"comment_id":129160008,"body_markdown":"Yes, doubling the value is correct, assuming the transformation is linear.","body":"Yes, doubling the value is correct, assuming the transformation is linear."},{"owner":{"account_id":16680445,"reputation":37,"user_id":12055676,"display_name":"Andrea Efficace"},"score":0,"creation_date":1658877182,"post_id":73130483,"comment_id":129160011,"body_markdown":"Well yes, I didn&#39;t use y as the &quot;vertical axis&quot; in the question, it was just to call the result of that calculation. By the way yes, probably it&#39;s a projection-related problem.","body":"Well yes, I didn&#39;t use y as the &quot;vertical axis&quot; in the question, it was just to call the result of that calculation. By the way yes, probably it&#39;s a projection-related problem."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1658877233,"post_id":73130483,"comment_id":129160019,"body_markdown":"You&#39;ll need to edit your question and explain what projections you are trying to convert between.","body":"You&#39;ll need to edit your question and explain what projections you are trying to convert between."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1658878805,"post_id":73130483,"comment_id":129160254,"body_markdown":"Doubling the value of x (and y) *is* a mapping.","body":"Doubling the value of x (and y) <i>is</i> a mapping."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1658895405,"post_id":73130483,"comment_id":129162721,"body_markdown":"You should add the actual code you are using, and explain why you think you are &quot;missing something&quot; -- what is happening which is undesired/unexpected?","body":"You should add the actual code you are using, and explain why you think you are &quot;missing something&quot; -- what is happening which is undesired/unexpected?"}],"answers":[{"tags":[],"owner":{"account_id":32369,"reputation":51044,"user_id":89766,"accept_rate":92,"display_name":"George Profenza"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659306738,"creation_date":1659009092,"answer_id":73152438,"question_id":73130483,"body_markdown":"Your math checks out: if one image is 512x512 and the other is 1024x1024 the scale factor is 2 (multiplying x, y coordinates by 2 should do the trick.\r\n\r\nAlternatively you can use [`map()`][1], but in this trivial case it might be more simpler to just use the scale factor directly if you also need to maintain the mapped x,y values as integers.\r\n\r\nHere&#39;s a basic sketch to demonstrate your mapping (and if you hold the mouse pressed it will use `map()` instead, though the results are the same and you&#39;ll notice no difference):\r\n\r\n```java\r\nPImage img512, img1024;\r\n\r\nvoid setup(){\r\n  size(1536, 1024);\r\n  strokeWeight(2);\r\n  \r\n  img512  = makeTestImage(512, 512);\r\n  img1024 = makeTestImage(1024, 1024);\r\n}\r\n\r\nvoid draw(){\r\n  background(0);\r\n  image(img512, 0, 0);\r\n  image(img1024, 512, 0);\r\n  \r\n  int x = mouseX;\r\n  int y = mouseY;\r\n  \r\n  if((x &gt;= 0 &amp;&amp; x &lt; 512) &amp;&amp;\r\n     (y &gt;= 0 &amp;&amp; y &lt; 512)){\r\n     \r\n       \r\n      // for debugging pruposes compare with map() when mousePressed\r\n      int xp, yp;\r\n      if(mousePressed){\r\n        xp = (int)map(x, 0, 512, 0, 1024);\r\n        yp = (int)map(y, 0, 512, 0, 1024);\r\n      }else{\r\n        xp = x * 1024 / 512;\r\n        yp = y * 1024 / 512;    \r\n      }\r\n      \r\n      drawCrosshair(x, y, color(0), String.format(&quot;original [%d,%d]&quot;, x, y));\r\n      // for visualisation purposes offset x ( since we&#39;re drawing the 1024 image at 512, 0 )\r\n      drawCrosshair(xp + 512, yp, color(255), String.format(&quot;mapped [%d,%d]&quot;, xp, yp));\r\n  }\r\n  \r\n}\r\n\r\nvoid drawCrosshair(float x, float y, color c, String label){\r\n  stroke(c);\r\n  // h\r\n  line(0, y, width, y);\r\n  // v\r\n  line(x, 0, x, height);\r\n  text(label, x - 100, y);\r\n}\r\n\r\nPImage makeTestImage(int w, int h){\r\n  pushStyle();\r\n  colorMode(HSB, 255, 255, 255);\r\n  \r\n  PImage out = createImage(w, h, RGB);\r\n  \r\n  out.loadPixels();\r\n  \r\n  for(int i = 0 ; i &lt; out.pixels.length; i++){\r\n    out.pixels[i] = color(i % 255, 128, 128);\r\n  }\r\n  \r\n  out.updatePixels();\r\n  \r\n  popStyle();\r\n  \r\n  return out;\r\n}\r\n```\r\n\r\nNote that the mapped coordinate is displayed coorectly, but it&#39;s rendered with an offset of 512 pixels given the second `PImage` is rendered to the right of the first.\r\n\r\nHere&#39;s a modified version that accesses `pixels[]` to copy a single pixel from one image to another:\r\n\r\n```\r\nPImage img512, img1024;\r\n\r\nvoid setup(){\r\n  size(1536, 1024);\r\n  strokeWeight(2);\r\n  \r\n  img512  = makeTestImage(512, 512);\r\n  img1024 = makeTestImage(1024, 1024);\r\n}\r\n\r\nvoid draw(){\r\n  background(0);\r\n  image(img512, 0, 0);\r\n  image(img1024, 512, 0);\r\n  \r\n  int x = mouseX;\r\n  int y = mouseY;\r\n  \r\n  if((x &gt;= 0 &amp;&amp; x &lt; 512) &amp;&amp;\r\n     (y &gt;= 0 &amp;&amp; y &lt; 512)){\r\n     \r\n       \r\n      // for debugging pruposes compare with map() when mousePressed\r\n      int xp, yp;\r\n      if(mousePressed){\r\n        xp = (int)map(x, 0, 512, 0, 1024);\r\n        yp = (int)map(y, 0, 512, 0, 1024);\r\n        \r\n        // test 1D pixel index\r\n        copyPixel(img512, img1024, x, y);\r\n        \r\n      }else{\r\n        xp = x * 1024 / 512;\r\n        yp = y * 1024 / 512;    \r\n      }\r\n      \r\n      drawCrosshair(x, y, color(0), String.format(&quot;original [%d,%d]&quot;, x, y));\r\n      // for visualisation purposes offset x ( since we&#39;re drawing the 1024 image at 512, 0 )\r\n      drawCrosshair(xp + 512, yp, color(255), String.format(&quot;mapped [%d,%d]&quot;, xp, yp));\r\n  }\r\n  \r\n}\r\n\r\nvoid copyPixel(PImage from, PImage to, int xsrc, int ysrc){\r\n  xsrc = constrain(xsrc, 0, from.width);\r\n  ysrc = constrain(ysrc, 0, from.height);\r\n  \r\n  from.loadPixels();\r\n  to.loadPixels();\r\n  \r\n  int fromIndex = xsrc + (ysrc * from.width);\r\n  \r\n  float scaleFactor = (float)to.width / from.width;\r\n  int xdst = (int)(xsrc * scaleFactor);\r\n  int ydst = (int)(ysrc * scaleFactor);\r\n  \r\n  int toIndex = xdst + (ydst * to.width);\r\n  \r\n  to.pixels[toIndex] = from.pixels[fromIndex];\r\n  \r\n  to.updatePixels();\r\n}\r\n\r\n\r\nvoid drawCrosshair(float x, float y, color c, String label){\r\n  stroke(c);\r\n  // h\r\n  line(0, y, width, y);\r\n  // v\r\n  line(x, 0, x, height);\r\n  text(label, x - 100, y);\r\n}\r\n\r\nPImage makeTestImage(int w, int h){\r\n  pushStyle();\r\n  colorMode(HSB, 255, 255, 255);\r\n  \r\n  PImage out = createImage(w, h, RGB);\r\n  \r\n  out.loadPixels();\r\n  \r\n  for(int i = 0 ; i &lt; out.pixels.length; i++){\r\n    out.pixels[i] = color(i % 255, 128, 128);\r\n  }\r\n  \r\n  out.updatePixels();\r\n  \r\n  popStyle();\r\n  \r\n  return out;\r\n}\r\n```\r\nAs you drag you&#39;ll notice colours around the white crosshair change.\r\nThe above is more to demonstrate mapping from 2D x,y indices to an 1D `pixels[]` index. \r\n(If you simply want to swap a single pixel using PImage&#39;s `get()` and `set()` functions would be simpler. You can also achieve a similar effect with `PImage`&#39;s [`copy()`][2] (specifying source and destination width and height of 1 pixel))\r\n\r\n\r\nAlternatively you can call [`resize()`][3] on one image to match the dimensions of the other and have 1:1 mapping between pixels.\r\n\r\n\r\n  [1]: https://processing.org/reference/map_.html\r\n  [2]: https://processing.org/reference/copy_.html\r\n  [3]: https://processing.org/reference/PImage_resize_.html","title":"convert coordinates from one resolution to another","body":"<p>Your math checks out: if one image is 512x512 and the other is 1024x1024 the scale factor is 2 (multiplying x, y coordinates by 2 should do the trick.</p>\n<p>Alternatively you can use <a href=\"https://processing.org/reference/map_.html\" rel=\"nofollow noreferrer\"><code>map()</code></a>, but in this trivial case it might be more simpler to just use the scale factor directly if you also need to maintain the mapped x,y values as integers.</p>\n<p>Here's a basic sketch to demonstrate your mapping (and if you hold the mouse pressed it will use <code>map()</code> instead, though the results are the same and you'll notice no difference):</p>\n<pre class=\"lang-java prettyprint-override\"><code>PImage img512, img1024;\n\nvoid setup(){\n  size(1536, 1024);\n  strokeWeight(2);\n  \n  img512  = makeTestImage(512, 512);\n  img1024 = makeTestImage(1024, 1024);\n}\n\nvoid draw(){\n  background(0);\n  image(img512, 0, 0);\n  image(img1024, 512, 0);\n  \n  int x = mouseX;\n  int y = mouseY;\n  \n  if((x &gt;= 0 &amp;&amp; x &lt; 512) &amp;&amp;\n     (y &gt;= 0 &amp;&amp; y &lt; 512)){\n     \n       \n      // for debugging pruposes compare with map() when mousePressed\n      int xp, yp;\n      if(mousePressed){\n        xp = (int)map(x, 0, 512, 0, 1024);\n        yp = (int)map(y, 0, 512, 0, 1024);\n      }else{\n        xp = x * 1024 / 512;\n        yp = y * 1024 / 512;    \n      }\n      \n      drawCrosshair(x, y, color(0), String.format(&quot;original [%d,%d]&quot;, x, y));\n      // for visualisation purposes offset x ( since we're drawing the 1024 image at 512, 0 )\n      drawCrosshair(xp + 512, yp, color(255), String.format(&quot;mapped [%d,%d]&quot;, xp, yp));\n  }\n  \n}\n\nvoid drawCrosshair(float x, float y, color c, String label){\n  stroke(c);\n  // h\n  line(0, y, width, y);\n  // v\n  line(x, 0, x, height);\n  text(label, x - 100, y);\n}\n\nPImage makeTestImage(int w, int h){\n  pushStyle();\n  colorMode(HSB, 255, 255, 255);\n  \n  PImage out = createImage(w, h, RGB);\n  \n  out.loadPixels();\n  \n  for(int i = 0 ; i &lt; out.pixels.length; i++){\n    out.pixels[i] = color(i % 255, 128, 128);\n  }\n  \n  out.updatePixels();\n  \n  popStyle();\n  \n  return out;\n}\n</code></pre>\n<p>Note that the mapped coordinate is displayed coorectly, but it's rendered with an offset of 512 pixels given the second <code>PImage</code> is rendered to the right of the first.</p>\n<p>Here's a modified version that accesses <code>pixels[]</code> to copy a single pixel from one image to another:</p>\n<pre><code>PImage img512, img1024;\n\nvoid setup(){\n  size(1536, 1024);\n  strokeWeight(2);\n  \n  img512  = makeTestImage(512, 512);\n  img1024 = makeTestImage(1024, 1024);\n}\n\nvoid draw(){\n  background(0);\n  image(img512, 0, 0);\n  image(img1024, 512, 0);\n  \n  int x = mouseX;\n  int y = mouseY;\n  \n  if((x &gt;= 0 &amp;&amp; x &lt; 512) &amp;&amp;\n     (y &gt;= 0 &amp;&amp; y &lt; 512)){\n     \n       \n      // for debugging pruposes compare with map() when mousePressed\n      int xp, yp;\n      if(mousePressed){\n        xp = (int)map(x, 0, 512, 0, 1024);\n        yp = (int)map(y, 0, 512, 0, 1024);\n        \n        // test 1D pixel index\n        copyPixel(img512, img1024, x, y);\n        \n      }else{\n        xp = x * 1024 / 512;\n        yp = y * 1024 / 512;    \n      }\n      \n      drawCrosshair(x, y, color(0), String.format(&quot;original [%d,%d]&quot;, x, y));\n      // for visualisation purposes offset x ( since we're drawing the 1024 image at 512, 0 )\n      drawCrosshair(xp + 512, yp, color(255), String.format(&quot;mapped [%d,%d]&quot;, xp, yp));\n  }\n  \n}\n\nvoid copyPixel(PImage from, PImage to, int xsrc, int ysrc){\n  xsrc = constrain(xsrc, 0, from.width);\n  ysrc = constrain(ysrc, 0, from.height);\n  \n  from.loadPixels();\n  to.loadPixels();\n  \n  int fromIndex = xsrc + (ysrc * from.width);\n  \n  float scaleFactor = (float)to.width / from.width;\n  int xdst = (int)(xsrc * scaleFactor);\n  int ydst = (int)(ysrc * scaleFactor);\n  \n  int toIndex = xdst + (ydst * to.width);\n  \n  to.pixels[toIndex] = from.pixels[fromIndex];\n  \n  to.updatePixels();\n}\n\n\nvoid drawCrosshair(float x, float y, color c, String label){\n  stroke(c);\n  // h\n  line(0, y, width, y);\n  // v\n  line(x, 0, x, height);\n  text(label, x - 100, y);\n}\n\nPImage makeTestImage(int w, int h){\n  pushStyle();\n  colorMode(HSB, 255, 255, 255);\n  \n  PImage out = createImage(w, h, RGB);\n  \n  out.loadPixels();\n  \n  for(int i = 0 ; i &lt; out.pixels.length; i++){\n    out.pixels[i] = color(i % 255, 128, 128);\n  }\n  \n  out.updatePixels();\n  \n  popStyle();\n  \n  return out;\n}\n</code></pre>\n<p>As you drag you'll notice colours around the white crosshair change.\nThe above is more to demonstrate mapping from 2D x,y indices to an 1D <code>pixels[]</code> index.\n(If you simply want to swap a single pixel using PImage's <code>get()</code> and <code>set()</code> functions would be simpler. You can also achieve a similar effect with <code>PImage</code>'s <a href=\"https://processing.org/reference/copy_.html\" rel=\"nofollow noreferrer\"><code>copy()</code></a> (specifying source and destination width and height of 1 pixel))</p>\n<p>Alternatively you can call <a href=\"https://processing.org/reference/PImage_resize_.html\" rel=\"nofollow noreferrer\"><code>resize()</code></a> on one image to match the dimensions of the other and have 1:1 mapping between pixels.</p>\n"}],"owner":{"account_id":16680445,"reputation":37,"user_id":12055676,"display_name":"Andrea Efficace"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":611,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73152438,"answer_count":1,"score":0,"last_activity_date":1659306738,"creation_date":1658875270,"question_id":73130483,"body_markdown":"I have an image at a resolution of `512x512` pixels and I need to map a point in this image, selected through a mouse&#39;s click, to a point in the same image but at a resolution of `1024x1024`.\r\n\r\nI think that the problem is easy but I&#39;m missing something. I tried calculating the mapping with a classical mathematical proportion like:\r\n\r\n    xp = x*1024/512\r\nBut it obviously doubles the value of `x` without actually making a map/conversion.\r\nHow should I make this mapping?\r\n\r\n**EDIT**\r\nAs suggested in the comments, the core of the question is:\r\nHow can I make a projection of a point in a `512x512` image to a `1024x1024` image?","title":"convert coordinates from one resolution to another","body":"<p>I have an image at a resolution of <code>512x512</code> pixels and I need to map a point in this image, selected through a mouse's click, to a point in the same image but at a resolution of <code>1024x1024</code>.</p>\n<p>I think that the problem is easy but I'm missing something. I tried calculating the mapping with a classical mathematical proportion like:</p>\n<pre><code>xp = x*1024/512\n</code></pre>\n<p>But it obviously doubles the value of <code>x</code> without actually making a map/conversion.\nHow should I make this mapping?</p>\n<p><strong>EDIT</strong>\nAs suggested in the comments, the core of the question is:\nHow can I make a projection of a point in a <code>512x512</code> image to a <code>1024x1024</code> image?</p>\n"},{"tags":["java","android","webview"],"answers":[{"tags":[],"owner":{"account_id":13085011,"reputation":11,"user_id":9454267,"display_name":"Mark McCabe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659305355,"creation_date":1659305355,"answer_id":73187242,"question_id":73162971,"body_markdown":"This has ended up being a non-issue. After reviewing the saveState function on the WebView it appears the majority of the use-case we would use it for no longer applies. \r\n\r\nhttps://developer.android.com/reference/android/webkit/WebView#saveState(android.os.Bundle)\r\n\r\n&quot;Please note that this method no longer stores the display data for this WebView. The previous behavior could potentially leak files if restoreState(Bundle) was never called.&quot;\r\n\r\nsaveState seems to just save WebHistoryItem objects in a WebBackForwardList so as the user spends longer in the app navigating pages the state gets larger and larger. \r\n\r\nSince the web app doesn&#39;t use back/forward I don&#39;t consider this a negative. Have tested completely removing the saveState and as long as the app isn&#39;t destroyed by Android the WebView is still in the state it was on resume, i.e. the app being paused by the camera call, or switching to another app, the webview is still fine. ","title":"TransactionTooLargeException with Chrome WebView","body":"<p>This has ended up being a non-issue. After reviewing the saveState function on the WebView it appears the majority of the use-case we would use it for no longer applies.</p>\n<p><a href=\"https://developer.android.com/reference/android/webkit/WebView#saveState(android.os.Bundle)\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/webkit/WebView#saveState(android.os.Bundle)</a></p>\n<p>&quot;Please note that this method no longer stores the display data for this WebView. The previous behavior could potentially leak files if restoreState(Bundle) was never called.&quot;</p>\n<p>saveState seems to just save WebHistoryItem objects in a WebBackForwardList so as the user spends longer in the app navigating pages the state gets larger and larger.</p>\n<p>Since the web app doesn't use back/forward I don't consider this a negative. Have tested completely removing the saveState and as long as the app isn't destroyed by Android the WebView is still in the state it was on resume, i.e. the app being paused by the camera call, or switching to another app, the webview is still fine.</p>\n"}],"owner":{"account_id":13085011,"reputation":11,"user_id":9454267,"display_name":"Mark McCabe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":227,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73187242,"answer_count":1,"score":0,"last_activity_date":1659305355,"creation_date":1659079224,"question_id":73162971,"body_markdown":"we&#39;re currently having an issue where we&#39;ll end up getting a TransactionTooLargeException when application is paused or when calling other activities (i.e. camera activity). The application is simply a wrapper for a web application using WebView and exposes BLE tag and a barcode reader through a javascript interface. \r\n\r\nAfter utilizing the TooLargeTool library we were able to get some logcat messages and the culprit seems to be WEBVIEW_CHROMIUM_STATE. Below is 3 captures during different app pauses and it shows webview&#39;s state seems to balloon over time, though sometimes it goes down as well.\r\n\r\n    * android:state = 0.0 KB\r\n    * android:viewHierarchyState = 0.4 KB\r\n    * @android:autofillResetNeeded = 0.1 KB\r\n    * WEBVIEW_CHROMIUM_STATE = 61.8 KB\r\n    * android:lastAutofillId = 0.1 KB\r\n    * android:fragments = 0.4 KB\r\n    * android:sessionId = 0.1 KB\r\n\r\n    * android:state = 0.0 KB\r\n    * android:viewHierarchyState = 0.4 KB\r\n    * @android:autofillResetNeeded = 0.1 KB\r\n    * WEBVIEW_CHROMIUM_STATE = 171.0 KB\r\n    * android:lastAutofillId = 0.1 KB\r\n    * android:fragments = 0.4 KB\r\n    * android:sessionId = 0.1 KB\r\n\r\n    * android:state = 0.0 KB\r\n    * android:viewHierarchyState = 0.4 KB\r\n    * @android:autofillResetNeeded = 0.1 KB\r\n    * WEBVIEW_CHROMIUM_STATE = 252.3 KB\r\n    * android:lastAutofillId = 0.1 KB\r\n    * android:fragments = 0.4 KB\r\n    * android:sessionId = 0.1 KB\r\n\r\nOn older tablets (Samsung Android 7 and 8) it seems to occur around the 550k mark. On newer tablers (also Samsung) it seems to occur around the 1MB mark.\r\n\r\nWe don&#39;t have  any control over the web application (which maintains session state), so we&#39;re trying to fix this on the tablet. Does anyone know a solution to prevent the WebView&#39;s state from ballooning, or other solution (maybe stream the state to storage and only store a handle to the file) that maintains compatibility with the session based web app?\r\n\r\nCheers.\r\n\r\nMark.","title":"TransactionTooLargeException with Chrome WebView","body":"<p>we're currently having an issue where we'll end up getting a TransactionTooLargeException when application is paused or when calling other activities (i.e. camera activity). The application is simply a wrapper for a web application using WebView and exposes BLE tag and a barcode reader through a javascript interface.</p>\n<p>After utilizing the TooLargeTool library we were able to get some logcat messages and the culprit seems to be WEBVIEW_CHROMIUM_STATE. Below is 3 captures during different app pauses and it shows webview's state seems to balloon over time, though sometimes it goes down as well.</p>\n<pre><code>* android:state = 0.0 KB\n* android:viewHierarchyState = 0.4 KB\n* @android:autofillResetNeeded = 0.1 KB\n* WEBVIEW_CHROMIUM_STATE = 61.8 KB\n* android:lastAutofillId = 0.1 KB\n* android:fragments = 0.4 KB\n* android:sessionId = 0.1 KB\n\n* android:state = 0.0 KB\n* android:viewHierarchyState = 0.4 KB\n* @android:autofillResetNeeded = 0.1 KB\n* WEBVIEW_CHROMIUM_STATE = 171.0 KB\n* android:lastAutofillId = 0.1 KB\n* android:fragments = 0.4 KB\n* android:sessionId = 0.1 KB\n\n* android:state = 0.0 KB\n* android:viewHierarchyState = 0.4 KB\n* @android:autofillResetNeeded = 0.1 KB\n* WEBVIEW_CHROMIUM_STATE = 252.3 KB\n* android:lastAutofillId = 0.1 KB\n* android:fragments = 0.4 KB\n* android:sessionId = 0.1 KB\n</code></pre>\n<p>On older tablets (Samsung Android 7 and 8) it seems to occur around the 550k mark. On newer tablers (also Samsung) it seems to occur around the 1MB mark.</p>\n<p>We don't have  any control over the web application (which maintains session state), so we're trying to fix this on the tablet. Does anyone know a solution to prevent the WebView's state from ballooning, or other solution (maybe stream the state to storage and only store a handle to the file) that maintains compatibility with the session based web app?</p>\n<p>Cheers.</p>\n<p>Mark.</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":7778530,"reputation":3138,"user_id":9860374,"display_name":"Matheus"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659304871,"creation_date":1659304871,"answer_id":73187203,"question_id":73187188,"body_markdown":"[The `@ExceptionHandler` annotation can receive an array of `Class&lt;? extends Throwable&gt;`][1]\r\n\r\nJust do:\r\n\r\n    @ExceptionHandler({ Item1NotFoundException.class, Item2NotFoundException.class })\r\n\r\nBoth exceptions will be handled by the same method.\r\n\r\nOf course, you&#39;ll need to create a super type to handle both of these properly. Maybe a `NotFoundException` and then extend it from `Item1NotFoundException` and `Item2NotFoundException`, then, you can just do\r\n\r\n    @ExceptionHandler({ NotFoundException.class })\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/ExceptionHandler.html","title":"Spring Boot - Best way to manage multiple exception / advice class?","body":"<p><a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/ExceptionHandler.html\" rel=\"nofollow noreferrer\">The <code>@ExceptionHandler</code> annotation can receive an array of <code>Class&lt;? extends Throwable&gt;</code></a></p>\n<p>Just do:</p>\n<pre><code>@ExceptionHandler({ Item1NotFoundException.class, Item2NotFoundException.class })\n</code></pre>\n<p>Both exceptions will be handled by the same method.</p>\n<p>Of course, you'll need to create a super type to handle both of these properly. Maybe a <code>NotFoundException</code> and then extend it from <code>Item1NotFoundException</code> and <code>Item2NotFoundException</code>, then, you can just do</p>\n<pre><code>@ExceptionHandler({ NotFoundException.class })\n</code></pre>\n"}],"owner":{"account_id":7439048,"reputation":697,"user_id":5657412,"display_name":"Nicolas Gimelli"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":291,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73187203,"answer_count":1,"score":0,"last_activity_date":1659304871,"creation_date":1659304693,"question_id":73187188,"body_markdown":"I have several entities in a Spring Boot project, and for each of them I&#39;ve written an exception class like so:\r\n\r\n    public class Item1NotFoundException extends RuntimeException{\r\n    \tItem1NotFoundException(Long id) {\r\n    \t\tsuper(&quot;Cannot find Item1 with ID &quot; + id);\r\n    \t}\r\n    }\r\n\r\n    public class Item2NotFoundException extends RuntimeException{\r\n        \tItem1NotFoundException(Long id) {\r\n        \t\tsuper(&quot;Cannot find Item2 with ID &quot; + id);\r\n        \t}\r\n        }\r\n\r\nTo go along with these exceptions, I&#39;ve also written corresponding advice classes:\r\n\r\n    @ControllerAdvice\r\n    public class Item1NotFoundAdvice {\r\n    \t@ResponseBody\r\n    \t@ExceptionHandler(Item1NotFoundException.class)\r\n    \t@ResponseStatus(HttpStatus.NOT_FOUND)\r\n    \tString item1NotFoundHandler(Item1NotFoundException ex) {\r\n    \t\treturn ex.getMessage();\r\n    \t}\r\n    }\r\n\r\nAnd I&#39;ve written an almost identical class for `Item2NotFoundAdvice`. As you can see, this code is highly redundant, and I was wondering what the best way to handle that is. Can I make a generic class for NotFound exceptions and corresponding advice classes to avoid redundant code? I&#39;m not totally sure how I would go about that so any advice is appreciated.\r\n\r\nThanks in advance.","title":"Spring Boot - Best way to manage multiple exception / advice class?","body":"<p>I have several entities in a Spring Boot project, and for each of them I've written an exception class like so:</p>\n<pre><code>public class Item1NotFoundException extends RuntimeException{\n    Item1NotFoundException(Long id) {\n        super(&quot;Cannot find Item1 with ID &quot; + id);\n    }\n}\n\npublic class Item2NotFoundException extends RuntimeException{\n        Item1NotFoundException(Long id) {\n            super(&quot;Cannot find Item2 with ID &quot; + id);\n        }\n    }\n</code></pre>\n<p>To go along with these exceptions, I've also written corresponding advice classes:</p>\n<pre><code>@ControllerAdvice\npublic class Item1NotFoundAdvice {\n    @ResponseBody\n    @ExceptionHandler(Item1NotFoundException.class)\n    @ResponseStatus(HttpStatus.NOT_FOUND)\n    String item1NotFoundHandler(Item1NotFoundException ex) {\n        return ex.getMessage();\n    }\n}\n</code></pre>\n<p>And I've written an almost identical class for <code>Item2NotFoundAdvice</code>. As you can see, this code is highly redundant, and I was wondering what the best way to handle that is. Can I make a generic class for NotFound exceptions and corresponding advice classes to avoid redundant code? I'm not totally sure how I would go about that so any advice is appreciated.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","maven","junit","mockito"],"comments":[{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":1,"creation_date":1659304378,"post_id":73187013,"comment_id":129257152,"body_markdown":"At least show your pom; details matter. Also, do you expect maven to build .class files for a dependency? That&#39;s not how maven works...","body":"At least show your pom; details matter. Also, do you expect maven to build .class files for a dependency? That&#39;s not how maven works..."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1659340980,"post_id":73187013,"comment_id":129262944,"body_markdown":"The mockito-inline contains only a two files for configuration internally. No class file. Apart from that in general I would say using powermockito (or the need for that) sounds like a smell for me...Furthermore I would suggest to check the docs: https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#48","body":"The mockito-inline contains only a two files for configuration internally. No class file. Apart from that in general I would say using powermockito (or the need for that) sounds like a smell for me...Furthermore I would suggest to check the docs: <a href=\"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#48\" rel=\"nofollow noreferrer\">javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/&hellip;</a>"}],"owner":{"account_id":3872776,"reputation":55,"user_id":3207650,"accept_rate":60,"display_name":"user3207650"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":435,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659302798,"creation_date":1659302798,"question_id":73187013,"body_markdown":"So I am trying to mock a static method in Java 11 with Junit5 tests and Mockito. Previously I was doing this using PowerMockito, but this isnt supported with Junit5. I am trying to use the built in inline mock functionality in Mockito-Inline, but when I add the dependency to the pom, maven is able to resolve the dependency but no class files are built.\r\n\r\nWhat I mean is that if I go do the dependencies in IntelliJ, the dependency folder for mockito-inline does appear but no class files or org.mockito-inline folder is there.\r\n\r\nHas anyone experienced anything like this or know how I could potentially resolve? I have tried so many different versions of mockito dependencies, cleared my intellij cache many times. Any help or guidance is greatly appreciated.","title":"Issue with Mockito Inline","body":"<p>So I am trying to mock a static method in Java 11 with Junit5 tests and Mockito. Previously I was doing this using PowerMockito, but this isnt supported with Junit5. I am trying to use the built in inline mock functionality in Mockito-Inline, but when I add the dependency to the pom, maven is able to resolve the dependency but no class files are built.</p>\n<p>What I mean is that if I go do the dependencies in IntelliJ, the dependency folder for mockito-inline does appear but no class files or org.mockito-inline folder is there.</p>\n<p>Has anyone experienced anything like this or know how I could potentially resolve? I have tried so many different versions of mockito dependencies, cleared my intellij cache many times. Any help or guidance is greatly appreciated.</p>\n"},{"tags":["java","gradle","build.gradle","bukkit","gradle-kotlin-dsl"],"comments":[{"owner":{"account_id":21458034,"reputation":85,"user_id":15809316,"display_name":"FoliageOwO"},"score":1,"creation_date":1658917026,"post_id":73136123,"comment_id":129169048,"body_markdown":"I guess it might be the Java version and the library mismatch, but I&#39;ve been using it this way before and it didn&#39;t give an error","body":"I guess it might be the Java version and the library mismatch, but I&#39;ve been using it this way before and it didn&#39;t give an error"}],"answers":[{"tags":[],"owner":{"account_id":4623673,"reputation":6002,"user_id":4161471,"display_name":"aSemy"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1659300961,"creation_date":1659300961,"answer_id":73186843,"question_id":73136123,"body_markdown":"tl;dr: The [Paper API docs](https://papermc.io/using-the-api#gradle) say to set the Java version to 17 - it doesn&#39;t look like you&#39;ve done that. Try adding \r\n\r\n```kotlin\r\njava {\r\n    toolchain.languageVersion.set(JavaLanguageVersion.of(17))\r\n}\r\n```\r\n\r\n\r\n### Explanation\r\n\r\nThe error that Gradle gives you is verbose, but it does explain what&#39;s going on.  Let&#39;s break it down\r\n\r\nThe first bit that&#39;s interesting is this:\r\n\r\n```none\r\nCould not resolve io.papermc.paper:paper-api:1.18.2-R0.1-SNAPSHOT\r\n```\r\n\r\nGradle can&#39;t find the dependency that you&#39;ve declared. From looking at the [Paper API docs](https://papermc.io/using-the-api#gradle) you&#39;re using the right Maven Repository, and the right dependency, so Gradle must have another reason...\r\n\r\n```none\r\nNo matching variant of \r\nio.papermc.paper:paper-api:1.18.2-R0.1-SNAPSHOT:20220703.182221-166 \r\nwas found.\r\n\r\nThe consumer was configured to find an API of a library compatible with Java 16\r\n```\r\n\r\nBasically, the &quot;the consumer&quot; (that&#39;s your project) is saying &quot;I need something that works with Java 16, because that&#39;s what I&#39;m using&quot;. \r\n\r\n```none\r\nIncompatible because this component declares a component compatible with Java 17\r\nand the consumer needed a component compatible with Java 16\r\n```\r\n\r\nNow Gradle has found something really close, but it&#39;s disqualified because it&#39;s using Java 17 - which doesn&#39;t match what your project needs.\r\n\r\nGradle also lists some other variants, but they&#39;re also disqualified because they&#39;re not a Java library - they&#39;re source code, or Javadoc variants.","title":"Gradle build failed at :compileJava: `No matching variant`","body":"<p>tl;dr: The <a href=\"https://papermc.io/using-the-api#gradle\" rel=\"noreferrer\">Paper API docs</a> say to set the Java version to 17 - it doesn't look like you've done that. Try adding</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>java {\n    toolchain.languageVersion.set(JavaLanguageVersion.of(17))\n}\n</code></pre>\n<h3>Explanation</h3>\n<p>The error that Gradle gives you is verbose, but it does explain what's going on.  Let's break it down</p>\n<p>The first bit that's interesting is this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Could not resolve io.papermc.paper:paper-api:1.18.2-R0.1-SNAPSHOT\n</code></pre>\n<p>Gradle can't find the dependency that you've declared. From looking at the <a href=\"https://papermc.io/using-the-api#gradle\" rel=\"noreferrer\">Paper API docs</a> you're using the right Maven Repository, and the right dependency, so Gradle must have another reason...</p>\n<pre class=\"lang-none prettyprint-override\"><code>No matching variant of \nio.papermc.paper:paper-api:1.18.2-R0.1-SNAPSHOT:20220703.182221-166 \nwas found.\n\nThe consumer was configured to find an API of a library compatible with Java 16\n</code></pre>\n<p>Basically, the &quot;the consumer&quot; (that's your project) is saying &quot;I need something that works with Java 16, because that's what I'm using&quot;.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Incompatible because this component declares a component compatible with Java 17\nand the consumer needed a component compatible with Java 16\n</code></pre>\n<p>Now Gradle has found something really close, but it's disqualified because it's using Java 17 - which doesn't match what your project needs.</p>\n<p>Gradle also lists some other variants, but they're also disqualified because they're not a Java library - they're source code, or Javadoc variants.</p>\n"}],"owner":{"account_id":21458034,"reputation":85,"user_id":15809316,"display_name":"FoliageOwO"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4162,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":73186843,"answer_count":1,"score":5,"last_activity_date":1659300961,"creation_date":1658916873,"question_id":73136123,"body_markdown":"I&#39;m trying making a library for Minecraft Bukkit (Paper) plugin. I&#39;m trying to build a jar file, but Gradle gives me this error:\r\n\r\n```none\r\nExecution failed for task &#39;:compileJava&#39;.\r\n&gt; Could not resolve all files for configuration &#39;:compileClasspath&#39;.\r\n```\r\n\r\nI&#39;d never seen this error before.\r\n\r\n```none\r\nExecution failed for task &#39;:compileJava&#39;.\r\n&gt; Could not resolve all files for configuration &#39;:compileClasspath&#39;.\r\n   &gt; Could not resolve io.papermc.paper:paper-api:1.18.2-R0.1-SNAPSHOT.\r\n     Required by:\r\n         project :\r\n      &gt; No matching variant of io.papermc.paper:paper-api:1.18.2-R0.1-SNAPSHOT:20220703.182221-166 was found. The consumer was configured to find an API of a library compatible with Java 16, preferably in the form of class files, preferably optimized for standard JVMs, and its dependencies declared externally but:\r\n          - Variant &#39;apiElements&#39; capability io.papermc.paper:paper-api:1.18.2-R0.1-SNAPSHOT declares an API of a library, packaged as a jar, and its dependencies declared externally:\r\n              - Incompatible because this component declares a component compatible with Java 17 and the consumer needed a component compatible with Java 16\r\n              - Other compatible attribute:\r\n                  - Doesn&#39;t say anything about its target Java environment (preferred optimized for standard JVMs)\r\n          - Variant &#39;javadocElements&#39; capability io.papermc.paper:paper-api:1.18.2-R0.1-SNAPSHOT declares a runtime of a component, and its dependencies declared externally:\r\n              - Incompatible because this component declares documentation and the consumer needed a library\r\n              - Other compatible attributes:\r\n                  - Doesn&#39;t say anything about its target Java environment (preferred optimized for standard JVMs)\r\n                  - Doesn&#39;t say anything about its target Java version (required compatibility with Java 16)\r\n                  - Doesn&#39;t say anything about its elements (required them preferably in the form of class files)\r\n          - Variant &#39;runtimeElements&#39; capability io.papermc.paper:paper-api:1.18.2-R0.1-SNAPSHOT declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\r\n              - Incompatible because this component declares a component compatible with Java 17 and the consumer needed a component compatible with Java 16\r\n              - Other compatible attribute:\r\n                  - Doesn&#39;t say anything about its target Java environment (preferred optimized for standard JVMs)\r\n          - Variant &#39;sourcesElements&#39; capability io.papermc.paper:paper-api:1.18.2-R0.1-SNAPSHOT declares a runtime of a component, and its dependencies declared externally:\r\n              - Incompatible because this component declares documentation and the consumer needed a library\r\n              - Other compatible attributes:\r\n                  - Doesn&#39;t say anything about its target Java environment (preferred optimized for standard JVMs)\r\n                  - Doesn&#39;t say anything about its target Java version (required compatibility with Java 16)\r\n                  - Doesn&#39;t say anything about its elements (required them preferably in the form of class files)\r\n\r\n```\r\nThe full output log is so long that I have uploaded it to pastebin:\r\n\r\n[With -scan -debug (full output)](https://pastebin.ubuntu.com/p/2mrjNTrthf/)\r\n\r\n```kotlin\r\nplugins {\r\n    id(&quot;java&quot;)\r\n    id(&quot;maven-publish&quot;)\r\n}\r\n\r\ngroup = &quot;ml.windleaf&quot;\r\nversion = &quot;1.0.1&quot;\r\n\r\nrepositories {\r\n    mavenCentral()\r\n    maven(&quot;https://jitpack.io&quot;)\r\n    maven(&quot;https://repo.papermc.io/repository/maven-public/&quot;)\r\n}\r\n\r\ndependencies {\r\n    testImplementation(&quot;org.junit.jupiter:junit-jupiter-api:5.8.1&quot;)\r\n    testRuntimeOnly(&quot;org.junit.jupiter:junit-jupiter-engine:5.8.1&quot;)\r\n    implementation(&quot;io.papermc.paper:paper-api:1.18.2-R0.1-SNAPSHOT&quot;)\r\n    // https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core\r\n    implementation(&quot;org.apache.logging.log4j:log4j-core:2.18.0&quot;)\r\n}\r\n\r\ntasks.getByName&lt;Test&gt;(&quot;test&quot;) {\r\n    useJUnitPlatform()\r\n}\r\n\r\nallprojects {\r\n    apply(plugin = &quot;java&quot;)\r\n    apply(plugin = &quot;java-library&quot;)\r\n    apply(plugin = &quot;maven-publish&quot;)\r\n\r\n    repositories {\r\n        mavenCentral()\r\n        maven(&quot;https://jitpack.io&quot;)\r\n        maven(&quot;https://repo.papermc.io/repository/maven-public/&quot;)\r\n    }\r\n\r\n    dependencies {\r\n        implementation(&quot;org.jetbrains:annotations:23.0.0&quot;)\r\n        implementation(&quot;org.apache.maven:maven-artifact:3.8.5&quot;)\r\n    }\r\n\r\n    tasks {\r\n        compileJava {\r\n            options.encoding = &quot;UTF-8&quot;\r\n        }\r\n    }\r\n}\r\n\r\npublishing {\r\n    publications {\r\n        create(&quot;maven_public&quot;, MavenPublication::class) {\r\n            groupId = &quot;ml.windleaf&quot;\r\n            artifactId = &quot;PlugApi&quot;\r\n            version = version\r\n            from(components.getByName(&quot;java&quot;))\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnyone please help me to analyse why it gives such an error.","title":"Gradle build failed at :compileJava: `No matching variant`","body":"<p>I'm trying making a library for Minecraft Bukkit (Paper) plugin. I'm trying to build a jar file, but Gradle gives me this error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Execution failed for task ':compileJava'.\n&gt; Could not resolve all files for configuration ':compileClasspath'.\n</code></pre>\n<p>I'd never seen this error before.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Execution failed for task ':compileJava'.\n&gt; Could not resolve all files for configuration ':compileClasspath'.\n   &gt; Could not resolve io.papermc.paper:paper-api:1.18.2-R0.1-SNAPSHOT.\n     Required by:\n         project :\n      &gt; No matching variant of io.papermc.paper:paper-api:1.18.2-R0.1-SNAPSHOT:20220703.182221-166 was found. The consumer was configured to find an API of a library compatible with Java 16, preferably in the form of class files, preferably optimized for standard JVMs, and its dependencies declared externally but:\n          - Variant 'apiElements' capability io.papermc.paper:paper-api:1.18.2-R0.1-SNAPSHOT declares an API of a library, packaged as a jar, and its dependencies declared externally:\n              - Incompatible because this component declares a component compatible with Java 17 and the consumer needed a component compatible with Java 16\n              - Other compatible attribute:\n                  - Doesn't say anything about its target Java environment (preferred optimized for standard JVMs)\n          - Variant 'javadocElements' capability io.papermc.paper:paper-api:1.18.2-R0.1-SNAPSHOT declares a runtime of a component, and its dependencies declared externally:\n              - Incompatible because this component declares documentation and the consumer needed a library\n              - Other compatible attributes:\n                  - Doesn't say anything about its target Java environment (preferred optimized for standard JVMs)\n                  - Doesn't say anything about its target Java version (required compatibility with Java 16)\n                  - Doesn't say anything about its elements (required them preferably in the form of class files)\n          - Variant 'runtimeElements' capability io.papermc.paper:paper-api:1.18.2-R0.1-SNAPSHOT declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\n              - Incompatible because this component declares a component compatible with Java 17 and the consumer needed a component compatible with Java 16\n              - Other compatible attribute:\n                  - Doesn't say anything about its target Java environment (preferred optimized for standard JVMs)\n          - Variant 'sourcesElements' capability io.papermc.paper:paper-api:1.18.2-R0.1-SNAPSHOT declares a runtime of a component, and its dependencies declared externally:\n              - Incompatible because this component declares documentation and the consumer needed a library\n              - Other compatible attributes:\n                  - Doesn't say anything about its target Java environment (preferred optimized for standard JVMs)\n                  - Doesn't say anything about its target Java version (required compatibility with Java 16)\n                  - Doesn't say anything about its elements (required them preferably in the form of class files)\n\n</code></pre>\n<p>The full output log is so long that I have uploaded it to pastebin:</p>\n<p><a href=\"https://pastebin.ubuntu.com/p/2mrjNTrthf/\" rel=\"noreferrer\">With -scan -debug (full output)</a></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>plugins {\n    id(&quot;java&quot;)\n    id(&quot;maven-publish&quot;)\n}\n\ngroup = &quot;ml.windleaf&quot;\nversion = &quot;1.0.1&quot;\n\nrepositories {\n    mavenCentral()\n    maven(&quot;https://jitpack.io&quot;)\n    maven(&quot;https://repo.papermc.io/repository/maven-public/&quot;)\n}\n\ndependencies {\n    testImplementation(&quot;org.junit.jupiter:junit-jupiter-api:5.8.1&quot;)\n    testRuntimeOnly(&quot;org.junit.jupiter:junit-jupiter-engine:5.8.1&quot;)\n    implementation(&quot;io.papermc.paper:paper-api:1.18.2-R0.1-SNAPSHOT&quot;)\n    // https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core\n    implementation(&quot;org.apache.logging.log4j:log4j-core:2.18.0&quot;)\n}\n\ntasks.getByName&lt;Test&gt;(&quot;test&quot;) {\n    useJUnitPlatform()\n}\n\nallprojects {\n    apply(plugin = &quot;java&quot;)\n    apply(plugin = &quot;java-library&quot;)\n    apply(plugin = &quot;maven-publish&quot;)\n\n    repositories {\n        mavenCentral()\n        maven(&quot;https://jitpack.io&quot;)\n        maven(&quot;https://repo.papermc.io/repository/maven-public/&quot;)\n    }\n\n    dependencies {\n        implementation(&quot;org.jetbrains:annotations:23.0.0&quot;)\n        implementation(&quot;org.apache.maven:maven-artifact:3.8.5&quot;)\n    }\n\n    tasks {\n        compileJava {\n            options.encoding = &quot;UTF-8&quot;\n        }\n    }\n}\n\npublishing {\n    publications {\n        create(&quot;maven_public&quot;, MavenPublication::class) {\n            groupId = &quot;ml.windleaf&quot;\n            artifactId = &quot;PlugApi&quot;\n            version = version\n            from(components.getByName(&quot;java&quot;))\n        }\n    }\n}\n</code></pre>\n<p>Anyone please help me to analyse why it gives such an error.</p>\n"},{"tags":["python","java","apache-spark-sql","data-analysis"],"comments":[{"owner":{"account_id":10214922,"reputation":4209,"user_id":7540911,"accept_rate":80,"display_name":"Nullman"},"score":1,"creation_date":1650189458,"post_id":71900906,"comment_id":127054168,"body_markdown":"you either don&#39;t have Java installed, or you haven&#39;t set your `JAVA_HOME` environment variable","body":"you either don&#39;t have Java installed, or you haven&#39;t set your <code>JAVA_HOME</code> environment variable"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1650190175,"post_id":71900906,"comment_id":127054308,"body_markdown":"Sometimes you should read the entire error message: &#39;Java not found and JAVA_HOME environment variable is not set.\nInstall Java and set JAVA_HOME to point to the Java installation \ndirectory.&#39;.","body":"Sometimes you should read the entire error message: &#39;Java not found and JAVA_HOME environment variable is not set. Install Java and set JAVA_HOME to point to the Java installation  directory.&#39;."}],"answers":[{"tags":[],"owner":{"account_id":2679033,"reputation":27742,"user_id":2314737,"accept_rate":82,"display_name":"user2314737"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1650193314,"creation_date":1650193314,"answer_id":71901315,"question_id":71900906,"body_markdown":"This issue is caused by a missing `$JAVA_HOME` variable. Just set it in your `~/.bashrc` (or `~/.zshrc` on a Mac) file by adding the line:\r\n\r\n    export JAVA_HOME=&quot;/path/to/java_home/&quot;\r\n\r\nIn Windows you need to add the environment variable `JAVA_HOME` in the System Settings.\r\n\r\nNote that for Spark/pyspark you need a Java version &gt;=8. Here&#39;s how to check your Java version:\r\n\r\n    % $JAVA_HOME/bin/java -version\r\n    java version &quot;1.8.0_301&quot;\r\n    Java(TM) SE Runtime Environment (build 1.8.0_301-b09)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 25.301-b09, mixed mode)","title":"###RuntimeError: Java gateway process exited before sending its port number","body":"<p>This issue is caused by a missing <code>$JAVA_HOME</code> variable. Just set it in your <code>~/.bashrc</code> (or <code>~/.zshrc</code> on a Mac) file by adding the line:</p>\n<pre><code>export JAVA_HOME=&quot;/path/to/java_home/&quot;\n</code></pre>\n<p>In Windows you need to add the environment variable <code>JAVA_HOME</code> in the System Settings.</p>\n<p>Note that for Spark/pyspark you need a Java version &gt;=8. Here's how to check your Java version:</p>\n<pre><code>% $JAVA_HOME/bin/java -version\njava version &quot;1.8.0_301&quot;\nJava(TM) SE Runtime Environment (build 1.8.0_301-b09)\nJava HotSpot(TM) 64-Bit Server VM (build 25.301-b09, mixed mode)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25736796,"reputation":1,"user_id":19491389,"display_name":"Danilo Donato"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659300815,"creation_date":1659300815,"answer_id":73186828,"question_id":71900906,"body_markdown":"I managed to solve the error by entering the environment variable where Java was installed.\r\n\r\nNote: I am using Windows.\r\n\r\n```\r\nimport os\r\n\r\nos.environ[&#39;SPARK_HOME&#39;] = &#39;C:\\spark\\spark-3.3.0-bin-hadoop3&#39;\r\nos.environ[&quot;JAVA_HOME&quot;] = &#39;C:\\Java\\jdk1.8.0_321&#39;\r\n```","title":"###RuntimeError: Java gateway process exited before sending its port number","body":"<p>I managed to solve the error by entering the environment variable where Java was installed.</p>\n<p>Note: I am using Windows.</p>\n<pre><code>import os\n\nos.environ['SPARK_HOME'] = 'C:\\spark\\spark-3.3.0-bin-hadoop3'\nos.environ[&quot;JAVA_HOME&quot;] = 'C:\\Java\\jdk1.8.0_321'\n</code></pre>\n"}],"owner":{"account_id":24601126,"reputation":21,"user_id":18503997,"display_name":"ININ CHEN"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9823,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1659300815,"creation_date":1650189322,"question_id":71900906,"body_markdown":"I trying to analytic those data with python :\r\n    \r\n    from pyspark.sql import SparkSession\r\n    from pyspark.sql.types import *\r\n    from pyspark.sql.functions import*\r\n    spark = SparkSession.builder.getOrCreate()\r\n\r\n    ds1 = spark.read.csv(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\Trip_data\\\\202101-divvy-tripdata.csv&quot;, \r\n    header=True)\r\n    ds2 = spark.read.csv(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\Trip_data\\\\202102-divvy-tripdata.csv&quot;, \r\n    header=True)\r\n    ds3 = spark.read.csv(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\Trip_data\\\\202103-divvy-tripdata.csv&quot;, \r\n    header=True)\r\n    ds4 = spark.read.csv(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\Trip_data\\\\202104-divvy-tripdata.csv&quot;, \r\n    header=True)\r\n    ds5 = spark.read.csv(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\Trip_data\\\\202105-divvy-tripdata.csv&quot;, \r\n    header=True)\r\n    ds6 = spark.read.csv(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\Trip_data\\\\202106-divvy-tripdata.csv&quot;, \r\n    header=True)\r\n    ds7 = spark.read.csv(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\Trip_data\\\\202107-divvy-tripdata.csv&quot;, \r\n    header=True)\r\n    ds8 = spark.read.csv(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\Trip_data\\\\202108-divvy-tripdata.csv&quot;, \r\n    header=True)\r\n    ds9 = spark.read.csv(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\Trip_data\\\\202109-divvy-tripdata.csv&quot;, \r\n    header=True)\r\n    ds10 = spark.read.csv(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\Trip_data\\\\202110-divvy-tripdata.csv&quot;, \r\n    header=True)\r\n    ds11 = spark.read.csv(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\Trip_data\\\\202111-divvy-tripdata.csv&quot;, \r\n    header=True)\r\n    ds12 = spark.read.csv(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\Trip_data\\\\202112-divvy-tripdata.csv&quot;, \r\n    header=True)\r\n    ds_all=ds1.union(ds2).union(ds3).union(ds4).union(ds5).union(ds6).union(ds7).union(ds8).union(ds9).union(ds10).union(ds11).union(ds12)\r\n\r\n    print((ds_all.count(), len(ds_all.columns)))\r\n\r\nHere is my error:\r\n\r\n    Java not found and JAVA_HOME environment variable is not set.\r\n    Install Java and set JAVA_HOME to point to the Java installation \r\n    directory.\r\n    Traceback (most recent call last):\r\n    File &quot;C:\\Users\\User\\PycharmProjects\\pythonProject\\Case Study 1.py&quot;, l \r\n    ine 4, in &lt;module&gt;\r\n    spark = SparkSession.builder.getOrCreate()\r\n    File &quot;C:\\Users\\User\\PycharmProjects\\pythonProject\\venv\\lib\\site- \r\n    packages\\pyspark\\sql\\session.py&quot;, line 228, in getOrCreate\r\n    sc = SparkContext.getOrCreate(sparkConf)\r\n    File &quot;C:\\Users\\User\\PycharmProjects\\pythonProject\\venv\\lib\\site- \r\n    packages\\pyspark\\context.py&quot;, line 392, in getOrCreate\r\n    SparkContext(conf=conf or SparkConf())\r\n    File &quot;C:\\Users\\User\\PycharmProjects\\pythonProject\\venv\\lib\\site- \r\n    packages\\pyspark\\context.py&quot;, line 144, in __init__\r\n    SparkContext._ensure_initialized(self, gateway=gateway, conf=conf)\r\n    File &quot;C:\\Users\\User\\PycharmProjects\\pythonProject\\venv\\lib\\site- \r\n    packages\\pyspark\\context.py&quot;, line 339, in _ensure_initialized\r\n    SparkContext._gateway = gateway or launch_gateway(conf)\r\n    File &quot;C:\\Users\\User\\PycharmProjects\\pythonProject\\venv\\lib\\site- \r\n    packages\\pyspark\\java_gateway.py&quot;, line 108, in launch_gateway\r\n    raise RuntimeError(&quot;Java gateway process exited before sending its \r\n    port number&quot;)\r\n    RuntimeError: Java gateway process exited before sending its port \r\n    number\r\n\r\nI have google it, but many solving are very confusing to me, I can&#39;t understand and follow it. So can anybody have ideas about this problem?\r\nor have more convenient package in pycharm community to code? \r\nplease give me some suggestions, I would appreciate it!","title":"###RuntimeError: Java gateway process exited before sending its port number","body":"<p>I trying to analytic those data with python :</p>\n<pre><code>from pyspark.sql import SparkSession\nfrom pyspark.sql.types import *\nfrom pyspark.sql.functions import*\nspark = SparkSession.builder.getOrCreate()\n\nds1 = spark.read.csv(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\Trip_data\\\\202101-divvy-tripdata.csv&quot;, \nheader=True)\nds2 = spark.read.csv(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\Trip_data\\\\202102-divvy-tripdata.csv&quot;, \nheader=True)\nds3 = spark.read.csv(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\Trip_data\\\\202103-divvy-tripdata.csv&quot;, \nheader=True)\nds4 = spark.read.csv(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\Trip_data\\\\202104-divvy-tripdata.csv&quot;, \nheader=True)\nds5 = spark.read.csv(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\Trip_data\\\\202105-divvy-tripdata.csv&quot;, \nheader=True)\nds6 = spark.read.csv(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\Trip_data\\\\202106-divvy-tripdata.csv&quot;, \nheader=True)\nds7 = spark.read.csv(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\Trip_data\\\\202107-divvy-tripdata.csv&quot;, \nheader=True)\nds8 = spark.read.csv(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\Trip_data\\\\202108-divvy-tripdata.csv&quot;, \nheader=True)\nds9 = spark.read.csv(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\Trip_data\\\\202109-divvy-tripdata.csv&quot;, \nheader=True)\nds10 = spark.read.csv(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\Trip_data\\\\202110-divvy-tripdata.csv&quot;, \nheader=True)\nds11 = spark.read.csv(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\Trip_data\\\\202111-divvy-tripdata.csv&quot;, \nheader=True)\nds12 = spark.read.csv(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\Trip_data\\\\202112-divvy-tripdata.csv&quot;, \nheader=True)\nds_all=ds1.union(ds2).union(ds3).union(ds4).union(ds5).union(ds6).union(ds7).union(ds8).union(ds9).union(ds10).union(ds11).union(ds12)\n\nprint((ds_all.count(), len(ds_all.columns)))\n</code></pre>\n<p>Here is my error:</p>\n<pre><code>Java not found and JAVA_HOME environment variable is not set.\nInstall Java and set JAVA_HOME to point to the Java installation \ndirectory.\nTraceback (most recent call last):\nFile &quot;C:\\Users\\User\\PycharmProjects\\pythonProject\\Case Study 1.py&quot;, l \nine 4, in &lt;module&gt;\nspark = SparkSession.builder.getOrCreate()\nFile &quot;C:\\Users\\User\\PycharmProjects\\pythonProject\\venv\\lib\\site- \npackages\\pyspark\\sql\\session.py&quot;, line 228, in getOrCreate\nsc = SparkContext.getOrCreate(sparkConf)\nFile &quot;C:\\Users\\User\\PycharmProjects\\pythonProject\\venv\\lib\\site- \npackages\\pyspark\\context.py&quot;, line 392, in getOrCreate\nSparkContext(conf=conf or SparkConf())\nFile &quot;C:\\Users\\User\\PycharmProjects\\pythonProject\\venv\\lib\\site- \npackages\\pyspark\\context.py&quot;, line 144, in __init__\nSparkContext._ensure_initialized(self, gateway=gateway, conf=conf)\nFile &quot;C:\\Users\\User\\PycharmProjects\\pythonProject\\venv\\lib\\site- \npackages\\pyspark\\context.py&quot;, line 339, in _ensure_initialized\nSparkContext._gateway = gateway or launch_gateway(conf)\nFile &quot;C:\\Users\\User\\PycharmProjects\\pythonProject\\venv\\lib\\site- \npackages\\pyspark\\java_gateway.py&quot;, line 108, in launch_gateway\nraise RuntimeError(&quot;Java gateway process exited before sending its \nport number&quot;)\nRuntimeError: Java gateway process exited before sending its port \nnumber\n</code></pre>\n<p>I have google it, but many solving are very confusing to me, I can't understand and follow it. So can anybody have ideas about this problem?\nor have more convenient package in pycharm community to code?\nplease give me some suggestions, I would appreciate it!</p>\n"},{"tags":["java","jpa","spring-data"],"answers":[{"tags":[],"owner":{"account_id":2189883,"reputation":5162,"user_id":1937263,"accept_rate":90,"display_name":"makasprzak"},"down_vote_count":1,"up_vote_count":19,"is_accepted":true,"score":18,"last_activity_date":1397845810,"creation_date":1397845810,"answer_id":23160019,"question_id":23136469,"body_markdown":"I&#39;ve solved the puzzle using hints and inspirations from:\r\n\r\n 1. https://stackoverflow.com/questions/21923897/limiting-resultset-using-query-anotations/21926544#21926544 by Koitoer\r\n 2. https://stackoverflow.com/questions/7001226/how-to-order-by-count-in-jpa by MicSim\r\n 3. Exhaustive experiments on my own\r\n\r\nThe first and most important thing I&#39;ve not been aware of about [tag:spring-data] is that even using `@Query` custom methods one can still create paging queries by simply passing the `Pageable` object as parameter. This is something that could have been explicitely stated by spring-data documentation as it is definitely not obvious though very powerful feature.\r\n\r\nGreat, now the second problem - how do I actually sort the results by size of associated collection in JPA? I&#39;ve managed to come to a following JPQL:\r\n\r\n    select new package.AwithBCount(count(b.id) as bCount,c) from A a join a.bes b group by a\r\n\r\nwhere _AwithBCount_ is a class that the query results are actually mapped to:\r\n\r\n    public class AwithBCount{\r\n        private Long bCount;\r\n        private A a;\r\n\r\n        public AwithBCount(Long bCount, A a){\r\n            this.bCount = bCount;\r\n            this.a = a;\r\n        }\r\n        //getters\r\n    }\r\n\r\nExcited that I can now simply define my repository like the one below\r\n\r\n    public interface ARepository extends JpaRepository&lt;A, Long&gt; {\r\n        @Query(\r\n            value = &quot;select new package.AwithBCount(count(b.id) as bCount,c) from A a join a.bes b group by a&quot;,\r\n            countQuery = &quot;select count(a) from A a&quot;\r\n        )\r\n        Page&lt;AwithBCount&gt; findAllWithBCount(Pageable pageable);\r\n    }\r\n\r\nI hurried to try my solution out. Perfect - the page is returned but when I tried to sort by bCount I got disappointed. It turned out that since this is a ARepository (not AwithBCount repository) spring-data will try to look for a bCount property in A instead of AwithBCount. So finally I ended up with three custom methods:\r\n\r\n    public interface ARepository extends JpaRepository&lt;A, Long&gt; {\r\n        @Query(\r\n            value = &quot;select new package.AwithBCount(count(b.id) as bCount,c) from A a join a.bes b group by a&quot;,\r\n            countQuery = &quot;select count(a) from A a&quot;\r\n        )\r\n        Page&lt;AwithBCount&gt; findAllWithBCount(Pageable pageable);\r\n\r\n        @Query(\r\n            value = &quot;select new package.AwithBCount(count(b.id) as bCount,c) from A a join a.bes b group by a order by bCount asc&quot;,\r\n            countQuery = &quot;select count(a) from A a&quot;\r\n        )\r\n        Page&lt;AwithBCount&gt; findAllWithBCountOrderByCountAsc(Pageable pageable);\r\n\r\n        @Query(\r\n            value = &quot;select new package.AwithBCount(count(b.id) as bCount,c) from A a join a.bes b group by a order by bCount desc&quot;,\r\n            countQuery = &quot;select count(a) from A a&quot;\r\n        )\r\n        Page&lt;AwithBCount&gt; findAllWithBCountOrderByCountDesc(Pageable pageable);\r\n    }\r\n\r\n...and some additional conditional logic on service level (which could be probably encapsulated with an abstract repository implementation). So, although not extremely elegant, that made the trick - this way (having more complex entities) I can sort by other properties, do the filtering and pagination.","title":"Order by count using Spring Data JpaRepository","body":"<p>I've solved the puzzle using hints and inspirations from:</p>\n\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/21923897/limiting-resultset-using-query-anotations/21926544#21926544\">Limiting resultset using @Query anotations</a> by Koitoer</li>\n<li><a href=\"https://stackoverflow.com/questions/7001226/how-to-order-by-count-in-jpa\">How to order by count() in JPA</a> by MicSim</li>\n<li>Exhaustive experiments on my own</li>\n</ol>\n\n<p>The first and most important thing I've not been aware of about <a href=\"/questions/tagged/spring-data\" class=\"post-tag\" title=\"show questions tagged &#39;spring-data&#39;\" rel=\"tag\">spring-data</a> is that even using <code>@Query</code> custom methods one can still create paging queries by simply passing the <code>Pageable</code> object as parameter. This is something that could have been explicitely stated by spring-data documentation as it is definitely not obvious though very powerful feature.</p>\n\n<p>Great, now the second problem - how do I actually sort the results by size of associated collection in JPA? I've managed to come to a following JPQL:</p>\n\n<pre><code>select new package.AwithBCount(count(b.id) as bCount,c) from A a join a.bes b group by a\n</code></pre>\n\n<p>where <em>AwithBCount</em> is a class that the query results are actually mapped to:</p>\n\n<pre><code>public class AwithBCount{\n    private Long bCount;\n    private A a;\n\n    public AwithBCount(Long bCount, A a){\n        this.bCount = bCount;\n        this.a = a;\n    }\n    //getters\n}\n</code></pre>\n\n<p>Excited that I can now simply define my repository like the one below</p>\n\n<pre><code>public interface ARepository extends JpaRepository&lt;A, Long&gt; {\n    @Query(\n        value = \"select new package.AwithBCount(count(b.id) as bCount,c) from A a join a.bes b group by a\",\n        countQuery = \"select count(a) from A a\"\n    )\n    Page&lt;AwithBCount&gt; findAllWithBCount(Pageable pageable);\n}\n</code></pre>\n\n<p>I hurried to try my solution out. Perfect - the page is returned but when I tried to sort by bCount I got disappointed. It turned out that since this is a ARepository (not AwithBCount repository) spring-data will try to look for a bCount property in A instead of AwithBCount. So finally I ended up with three custom methods:</p>\n\n<pre><code>public interface ARepository extends JpaRepository&lt;A, Long&gt; {\n    @Query(\n        value = \"select new package.AwithBCount(count(b.id) as bCount,c) from A a join a.bes b group by a\",\n        countQuery = \"select count(a) from A a\"\n    )\n    Page&lt;AwithBCount&gt; findAllWithBCount(Pageable pageable);\n\n    @Query(\n        value = \"select new package.AwithBCount(count(b.id) as bCount,c) from A a join a.bes b group by a order by bCount asc\",\n        countQuery = \"select count(a) from A a\"\n    )\n    Page&lt;AwithBCount&gt; findAllWithBCountOrderByCountAsc(Pageable pageable);\n\n    @Query(\n        value = \"select new package.AwithBCount(count(b.id) as bCount,c) from A a join a.bes b group by a order by bCount desc\",\n        countQuery = \"select count(a) from A a\"\n    )\n    Page&lt;AwithBCount&gt; findAllWithBCountOrderByCountDesc(Pageable pageable);\n}\n</code></pre>\n\n<p>...and some additional conditional logic on service level (which could be probably encapsulated with an abstract repository implementation). So, although not extremely elegant, that made the trick - this way (having more complex entities) I can sort by other properties, do the filtering and pagination.</p>\n"},{"tags":[],"owner":{"account_id":7216594,"reputation":834,"user_id":5508847,"display_name":"thanh ngo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1476796329,"creation_date":1476796329,"answer_id":40109285,"question_id":23136469,"body_markdown":"I don&#39;t know much about Spring Data but for JPQL, to sort the objects by size of associated collection, you can use the query\r\n\r\n    Select a from A a order by a.bes.size desc","title":"Order by count using Spring Data JpaRepository","body":"<p>I don't know much about Spring Data but for JPQL, to sort the objects by size of associated collection, you can use the query</p>\n\n<pre><code>Select a from A a order by a.bes.size desc\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1434762,"reputation":22772,"user_id":1356423,"accept_rate":65,"display_name":"Alan Hay"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1477050447,"creation_date":1477032701,"answer_id":40170121,"question_id":23136469,"body_markdown":"One option, which is much simpler than the original solution and which also has additional benefits, is to create a database view of aggregate data and link your Entity to this by means of a `@SecondaryTable` or `@OneToOne`.\r\n\r\nFor example:\r\n\r\n    create view a_summary_view as\r\n    select\r\n       a_id as id, \r\n       count(*) as b_count, \r\n       sum(value) as b_total, \r\n       max(some_date) as last_b_date \r\n    from b \r\n\r\nUsing `@SecondaryTable`\r\n\r\n    @Entity\r\n    @Table\r\n    @SecondaryTable(name = &quot;a_summary_view&quot;, \r\n           pkJoinColumns = {@PrimaryKeyJoinColumn(name = &quot;id&quot;, referencedColumnName= &quot;id&quot;)})\r\n    public class A{\r\n    \r\n       @Column(table = &quot;a_summary_view&quot;)\r\n       private Integer bCount;\r\n    \r\n       @Column(table = &quot;a_summary_view&quot;)\r\n       private BigDecimal bTotal;\r\n    \r\n       @Column(table = &quot;a_summary_view&quot;)\r\n       private Date lastBDate;\r\n    }\r\n\r\nYou can now then sort, filer, query etc purely with reference to entity A.\r\n\r\nAs an additional advantage you have within your domain model data that may be expensive to compute in-memory e.g. the total value of all orders for a customer without having to load all orders or revert to a separate query.","title":"Order by count using Spring Data JpaRepository","body":"<p>One option, which is much simpler than the original solution and which also has additional benefits, is to create a database view of aggregate data and link your Entity to this by means of a <code>@SecondaryTable</code> or <code>@OneToOne</code>.</p>\n\n<p>For example:</p>\n\n<pre><code>create view a_summary_view as\nselect\n   a_id as id, \n   count(*) as b_count, \n   sum(value) as b_total, \n   max(some_date) as last_b_date \nfrom b \n</code></pre>\n\n<p>Using <code>@SecondaryTable</code></p>\n\n<pre><code>@Entity\n@Table\n@SecondaryTable(name = \"a_summary_view\", \n       pkJoinColumns = {@PrimaryKeyJoinColumn(name = \"id\", referencedColumnName= \"id\")})\npublic class A{\n\n   @Column(table = \"a_summary_view\")\n   private Integer bCount;\n\n   @Column(table = \"a_summary_view\")\n   private BigDecimal bTotal;\n\n   @Column(table = \"a_summary_view\")\n   private Date lastBDate;\n}\n</code></pre>\n\n<p>You can now then sort, filer, query etc purely with reference to entity A.</p>\n\n<p>As an additional advantage you have within your domain model data that may be expensive to compute in-memory e.g. the total value of all orders for a customer without having to load all orders or revert to a separate query.</p>\n"},{"tags":[],"owner":{"account_id":18877677,"reputation":129,"user_id":13770841,"display_name":"Theo Martinez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1612108781,"creation_date":1612108781,"answer_id":65981191,"question_id":23136469,"body_markdown":"Thank you @Alan Hay, this solution worked fine for me. I just had to set the foreignKey attribute of the `@SecondaryTable` annotation and everything worked fine (otherwise Spring Boot tried to add a foreignkey constraint to the id, which raise an error for a sql View).\r\n\r\nResult:\r\n\r\n    @SecondaryTable(name = &quot;product_view&quot;,\r\n                pkJoinColumns = {@PrimaryKeyJoinColumn(name = &quot;id&quot;, referencedColumnName = &quot;id&quot;)},\r\n                foreignKey = @javax.persistence.ForeignKey(ConstraintMode.NO_CONSTRAINT))","title":"Order by count using Spring Data JpaRepository","body":"<p>Thank you @Alan Hay, this solution worked fine for me. I just had to set the foreignKey attribute of the <code>@SecondaryTable</code> annotation and everything worked fine (otherwise Spring Boot tried to add a foreignkey constraint to the id, which raise an error for a sql View).</p>\n<p>Result:</p>\n<pre><code>@SecondaryTable(name = &quot;product_view&quot;,\n            pkJoinColumns = {@PrimaryKeyJoinColumn(name = &quot;id&quot;, referencedColumnName = &quot;id&quot;)},\n            foreignKey = @javax.persistence.ForeignKey(ConstraintMode.NO_CONSTRAINT))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4433951,"reputation":151,"user_id":3610320,"display_name":"Flore"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637261407,"creation_date":1637261407,"answer_id":70025212,"question_id":23136469,"body_markdown":"You can use the name of an attribute found in the select clause as a sort property:\r\n\r\n    @Query(value = &quot;select a, count(b) as besCount from A a join a.bes b group by a&quot;, countQuery = &quot;select count(a) from A a&quot;)\r\n        Page&lt;Tuple&gt; findAllWithBesCount(Pageable pageable);\r\n\r\nYou can now sort on property besCount : \r\n\r\n    findAllWithBesCount(PageRequest.of(1, 10, Sort.Direction.ASC, &quot;besCount&quot;));\r\n\r\n","title":"Order by count using Spring Data JpaRepository","body":"<p>You can use the name of an attribute found in the select clause as a sort property:</p>\n<pre><code>@Query(value = &quot;select a, count(b) as besCount from A a join a.bes b group by a&quot;, countQuery = &quot;select count(a) from A a&quot;)\n    Page&lt;Tuple&gt; findAllWithBesCount(Pageable pageable);\n</code></pre>\n<p>You can now sort on property besCount :</p>\n<pre><code>findAllWithBesCount(PageRequest.of(1, 10, Sort.Direction.ASC, &quot;besCount&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21291742,"reputation":1,"user_id":18284091,"display_name":"Raf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645759470,"creation_date":1645583570,"answer_id":71230693,"question_id":23136469,"body_markdown":" I used nativeQuery to arrange sorting by number of records from another table, pagable works.\r\n\r\n      \r\n     @Query(value = &quot;SELECT * FROM posts where posts.is_active = 1 and posts.moderation_status = &#39;ACCEPTED&#39; &quot; +\r\n                    &quot;group by posts.id order by (SELECT count(post_id) FROM post_comments where post_id = posts.id) desc&quot;,\r\n                    countQuery = &quot;SELECT count(*) FROM posts&quot;,\r\n                    nativeQuery = true)\r\n            Page &lt;Post&gt; findPostsWithPagination(Pageable pageable);","title":"Order by count using Spring Data JpaRepository","body":"<p>I used nativeQuery to arrange sorting by number of records from another table, pagable works.</p>\n<pre><code> @Query(value = &quot;SELECT * FROM posts where posts.is_active = 1 and posts.moderation_status = 'ACCEPTED' &quot; +\n                &quot;group by posts.id order by (SELECT count(post_id) FROM post_comments where post_id = posts.id) desc&quot;,\n                countQuery = &quot;SELECT count(*) FROM posts&quot;,\n                nativeQuery = true)\n        Page &lt;Post&gt; findPostsWithPagination(Pageable pageable);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12206881,"reputation":840,"user_id":8909722,"display_name":"monstereo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659300637,"creation_date":1659300637,"answer_id":73186804,"question_id":23136469,"body_markdown":"For SpringBoot v2.6.6, accepted answer isn&#39;t working if you need to use pageable with child&#39;s side field especially when using @ManyToOne.\r\n\r\nFor the accepted answer: \r\n\r\n- You can return new object with static query method, which have to include `order by count(b.id)`\r\n- And also `order by bCount` isn&#39;t working.\r\n\r\n\r\nPlease use @AlanHay solution, it is working, but you can&#39;t use primitive field and change foreign key constraint. For instance, change `long` with `Long`. Because:\r\n\r\n**When saving a new entity Hibernate does think a record has to be written to the secondary table with a value of zero. (if you use primitive type)**\r\n\r\nOtherwise you will get an exception: \r\n**Caused by: org.postgresql.util.PSQLException: ERROR: cannot insert into view &quot;....view&quot;**\r\n\r\nHere is the example:\r\n```java\r\n@Entity\r\n@Table(name = &quot;...&quot;)\r\n@SecondaryTable(name = &quot;a_summary_view,\r\n        pkJoinColumns = {@PrimaryKeyJoinColumn(name = &quot;id&quot;,\r\n                referencedColumnName= &quot;id&quot;)},\r\nforeignKey =  @javax.persistence.ForeignKey(name = &quot;none&quot;))\r\npublic class UserEntity  {\r\n    @Id\r\n    private String id;\r\n    @NotEmpty\r\n    private String password;\r\n    @Column(table = &quot;a_summary_view&quot;,\r\n            name = &quot;b_count&quot;)\r\n    private Integer bCount;\r\n\r\n}\r\n```\r\n","title":"Order by count using Spring Data JpaRepository","body":"<p>For SpringBoot v2.6.6, accepted answer isn't working if you need to use pageable with child's side field especially when using @ManyToOne.</p>\n<p>For the accepted answer:</p>\n<ul>\n<li>You can return new object with static query method, which have to include <code>order by count(b.id)</code></li>\n<li>And also <code>order by bCount</code> isn't working.</li>\n</ul>\n<p>Please use @AlanHay solution, it is working, but you can't use primitive field and change foreign key constraint. For instance, change <code>long</code> with <code>Long</code>. Because:</p>\n<p><strong>When saving a new entity Hibernate does think a record has to be written to the secondary table with a value of zero. (if you use primitive type)</strong></p>\n<p>Otherwise you will get an exception:\n<strong>Caused by: org.postgresql.util.PSQLException: ERROR: cannot insert into view &quot;....view&quot;</strong></p>\n<p>Here is the example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;...&quot;)\n@SecondaryTable(name = &quot;a_summary_view,\n        pkJoinColumns = {@PrimaryKeyJoinColumn(name = &quot;id&quot;,\n                referencedColumnName= &quot;id&quot;)},\nforeignKey =  @javax.persistence.ForeignKey(name = &quot;none&quot;))\npublic class UserEntity  {\n    @Id\n    private String id;\n    @NotEmpty\n    private String password;\n    @Column(table = &quot;a_summary_view&quot;,\n            name = &quot;b_count&quot;)\n    private Integer bCount;\n\n}\n</code></pre>\n"}],"owner":{"account_id":2189883,"reputation":5162,"user_id":1937263,"accept_rate":90,"display_name":"makasprzak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14917,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":23160019,"answer_count":7,"score":14,"last_activity_date":1659300637,"creation_date":1397746257,"question_id":23136469,"body_markdown":"I am using Spring Data JpaRepository and I find it extremely easy to use. I actually need all those features - paging, sorting, filtering. Unfortunately there is one little nasty thing that seems to force me to fall back to use of plain JPA.\r\n\r\nI need to order by a size of associated collection. For instance I have:\r\n\r\n    @Entity\r\n    public class A{\r\n        @Id\r\n        private long id;\r\n        @OneToMany\r\n        private List&lt;B&gt; bes;\r\n    //boilerplate\r\n    }\r\n\r\nand I have to sort by `bes.size()`\r\n\r\nIs there a way to somehow customize the ordering still taking the advantage of pagination, filtering and other Spring Data great features?","title":"Order by count using Spring Data JpaRepository","body":"<p>I am using Spring Data JpaRepository and I find it extremely easy to use. I actually need all those features - paging, sorting, filtering. Unfortunately there is one little nasty thing that seems to force me to fall back to use of plain JPA.</p>\n\n<p>I need to order by a size of associated collection. For instance I have:</p>\n\n<pre><code>@Entity\npublic class A{\n    @Id\n    private long id;\n    @OneToMany\n    private List&lt;B&gt; bes;\n//boilerplate\n}\n</code></pre>\n\n<p>and I have to sort by <code>bes.size()</code></p>\n\n<p>Is there a way to somehow customize the ordering still taking the advantage of pagination, filtering and other Spring Data great features?</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":8937054,"reputation":1080,"user_id":6667539,"display_name":"Paplusc"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1525681636,"creation_date":1525681636,"answer_id":50209984,"question_id":50209826,"body_markdown":"You can get the Absolute path using this method:\r\n\r\n`myFileChooser.getSelectedFile().getAbsolutePath()`","title":"Full path of saved file in Java","body":"<p>You can get the Absolute path using this method:</p>\n\n<p><code>myFileChooser.getSelectedFile().getAbsolutePath()</code></p>\n"},{"tags":[],"owner":{"account_id":13494709,"reputation":1473,"user_id":9735889,"display_name":"Kovacic"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1525681710,"creation_date":1525681710,"answer_id":50210006,"question_id":50209826,"body_markdown":"Here is a sample of java code for absolute path from JFileChoose\r\n\r\n    JFileChooser fileChooser = new JFileChooser();\r\n    fileChooser.setDialogTitle(&quot;Specify a file to save&quot;);&#160;&#160;&#160;\r\n    &#160;\r\n    int userSelection = fileChooser.showSaveDialog(parentFrame);\r\n    &#160;\r\n    if (userSelection == JFileChooser.APPROVE_OPTION) {\r\n    &#160;&#160;&#160;&#160;File fileToSave = fileChooser.getSelectedFile();\r\n    &#160;&#160;&#160;&#160;System.out.println(&quot;Save as file: &quot; + fileToSave.getAbsolutePath());\r\n    }\r\n\r\nhope it helps...","title":"Full path of saved file in Java","body":"<p>Here is a sample of java code for absolute path from JFileChoose</p>\n\n<pre><code>JFileChooser fileChooser = new JFileChooser();\nfileChooser.setDialogTitle(\"Specify a file to save\");\n\nint userSelection = fileChooser.showSaveDialog(parentFrame);\n\nif (userSelection == JFileChooser.APPROVE_OPTION) {\nFile fileToSave = fileChooser.getSelectedFile();\nSystem.out.println(\"Save as file: \" + fileToSave.getAbsolutePath());\n}\n</code></pre>\n\n<p>hope it helps...</p>\n"}],"owner":{"account_id":12959238,"reputation":29,"user_id":9368987,"display_name":"Asma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":113,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":50210006,"answer_count":2,"score":0,"last_activity_date":1659300203,"creation_date":1525680999,"question_id":50209826,"body_markdown":"I want to get the full path of the file that the user saved in Java.\r\nHere is the code of the method save and it works okay but actually i need to get the path that the user had save his file in. Could someone help me:\r\n\r\n    import java.awt.*;\r\n    import java.io.*;\r\n    import javax.swing.*;\r\n\r\n    public class FileChooserSave {\r\n    \tprivate static void createAndShowUI() {\r\n    \t\tfinal JFileChooser chooser = new JFileChooser(new File(&quot;.&quot;)) {\r\n    \t\t\tpublic void approveSelection() {\r\n    \t\t\t\tif (getSelectedFile().exists()) {\r\n    \t\t\t\t\tint n = JOptionPane.showConfirmDialog(this, &quot;Do You Want to Overwrite File?&quot;, &quot;Confirm Overwrite&quot;,\r\n    \t\t\t\t\t\t\tJOptionPane.YES_NO_OPTION);\r\n    \r\n    \t\t\t\t\tif (n == JOptionPane.YES_OPTION)\r\n    \t\t\t\t\t\tsuper.approveSelection();\r\n    \r\n    \t\t\t\t} else\r\n    \t\t\t\t\tsuper.approveSelection();\r\n    \t\t\t}\r\n    \t\t};\r\n    \r\n    \t\tchooser.setSelectedFile(new File(&quot;&quot;));\r\n    \t\tint returnVal = chooser.showSaveDialog(null);\r\n    \r\n    \t\tif (returnVal == JFileChooser.APPROVE_OPTION) {\r\n    \t\t\tSystem.out.println(chooser.getSelectedFile());\r\n    \t\t}\r\n    \t}\r\n    \tpublic static void main(String[] args) {\r\n    \t\tEventQueue.invokeLater(new Runnable() {\r\n    \t\t\tpublic void run() {\r\n    \t\t\t\tcreateAndShowUI();\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}\r\n    }\r\n","title":"Full path of saved file in Java","body":"<p>I want to get the full path of the file that the user saved in Java.\nHere is the code of the method save and it works okay but actually i need to get the path that the user had save his file in. Could someone help me:</p>\n\n<pre><code>import java.awt.*;\nimport java.io.*;\nimport javax.swing.*;\n\npublic class FileChooserSave {\n    private static void createAndShowUI() {\n        final JFileChooser chooser = new JFileChooser(new File(\".\")) {\n            public void approveSelection() {\n                if (getSelectedFile().exists()) {\n                    int n = JOptionPane.showConfirmDialog(this, \"Do You Want to Overwrite File?\", \"Confirm Overwrite\",\n                            JOptionPane.YES_NO_OPTION);\n\n                    if (n == JOptionPane.YES_OPTION)\n                        super.approveSelection();\n\n                } else\n                    super.approveSelection();\n            }\n        };\n\n        chooser.setSelectedFile(new File(\"\"));\n        int returnVal = chooser.showSaveDialog(null);\n\n        if (returnVal == JFileChooser.APPROVE_OPTION) {\n            System.out.println(chooser.getSelectedFile());\n        }\n    }\n    public static void main(String[] args) {\n        EventQueue.invokeLater(new Runnable() {\n            public void run() {\n                createAndShowUI();\n            }\n        });\n    }\n}\n</code></pre>\n"},{"tags":["java","selenium","modal-dialog","bootstrap-modal","alert"],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659300135,"creation_date":1659299364,"answer_id":73186699,"question_id":73185429,"body_markdown":"Alert\r\n-----\r\nAn alert box is used if the user wants to make sure information comes through to the user. The user will have to click on &lt;kbd&gt;OK&lt;/kbd&gt; to agree or &lt;kbd&gt;Cancel&lt;/kbd&gt; to deny the information.\r\n\r\n![Alert_Ok_Cancel](https://i.stack.imgur.com/WtZF3.png)\r\n\r\n\r\n----------\r\n\r\n\r\nThis usecase\r\n------------\r\nThe following element doesn&#39;t seems to be an alert but a [Modal Dialog Box](https://www.w3schools.com/Bootstrap/bootstrap_modal.asp) :\r\n\r\n![HLR](https://i.stack.imgur.com/m6nU5.png)\r\n\r\nIn such cases you need to locate the element with the Modal Dialog Box to locate the element with text as &lt;kbd&gt;Yes&lt;/kbd&gt; or &lt;kbd&gt;No&lt;/kbd&gt; and invoke [_click()_](https://stackoverflow.com/a/70077251/7429447) on the respective element of youe choice.","title":"Using &#39;Alert&#39; Interface in Selenium Java for alert conformation not working as expected","body":"<h2>Alert</h2>\n<p>An alert box is used if the user wants to make sure information comes through to the user. The user will have to click on <kbd>OK</kbd> to agree or <kbd>Cancel</kbd> to deny the information.</p>\n<p><img src=\"https://i.stack.imgur.com/WtZF3.png\" alt=\"Alert_Ok_Cancel\" /></p>\n<hr />\n<h2>This usecase</h2>\n<p>The following element doesn't seems to be an alert but a <a href=\"https://www.w3schools.com/Bootstrap/bootstrap_modal.asp\" rel=\"nofollow noreferrer\">Modal Dialog Box</a> :</p>\n<p><img src=\"https://i.stack.imgur.com/m6nU5.png\" alt=\"HLR\" /></p>\n<p>In such cases you need to locate the element with the Modal Dialog Box to locate the element with text as <kbd>Yes</kbd> or <kbd>No</kbd> and invoke <a href=\"https://stackoverflow.com/a/70077251/7429447\"><em>click()</em></a> on the respective element of youe choice.</p>\n"}],"owner":{"account_id":25872845,"reputation":23,"user_id":19603435,"display_name":"Arunprashath"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73186699,"answer_count":1,"score":1,"last_activity_date":1659300135,"creation_date":1659287849,"question_id":73185429,"body_markdown":"I used below selenium codes to click &quot;OK&quot; alert box, But It is not identifying, I dont knw wht&#39;s the reason, Can anyone help to solve this Issue ?\r\n\r\nElement image:\r\n\r\n![enter image description here][1]\r\n\r\nCode trials:\r\n\r\n     Alert click_on_update_button_Htwelveyes = driver.switchTo().alert();\r\n        click_on_update_button_Htwelveyes.accept();\r\n    }\r\n\r\nConsole Output:\r\n\r\n        org.openqa.selenium.NoAlertPresentException: no such alert\r\n    (Session info: chrome=103.0.5060.134)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/m6nU5.png","title":"Using &#39;Alert&#39; Interface in Selenium Java for alert conformation not working as expected","body":"<p>I used below selenium codes to click &quot;OK&quot; alert box, But It is not identifying, I dont knw wht's the reason, Can anyone help to solve this Issue ?</p>\n<p>Element image:</p>\n<p><img src=\"https://i.stack.imgur.com/m6nU5.png\" alt=\"enter image description here\" /></p>\n<p>Code trials:</p>\n<pre><code> Alert click_on_update_button_Htwelveyes = driver.switchTo().alert();\n    click_on_update_button_Htwelveyes.accept();\n}\n</code></pre>\n<p>Console Output:</p>\n<pre><code>    org.openqa.selenium.NoAlertPresentException: no such alert\n(Session info: chrome=103.0.5060.134)\n</code></pre>\n"},{"tags":["java","list"],"comments":[{"owner":{"account_id":3354520,"reputation":5062,"user_id":2817802,"accept_rate":100,"display_name":"Baby"},"score":0,"creation_date":1387515160,"post_id":20696511,"comment_id":30997714,"body_markdown":"by default, it will be saved in folder where you run your program. you can specify it by including the folder path in your file name. for example, `String filename= &quot;D:/document/filename.txt&quot;;`","body":"by default, it will be saved in folder where you run your program. you can specify it by including the folder path in your file name. for example, <code>String filename= &quot;D:&#47;document&#47;filename.txt&quot;;</code>"},{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1387515179,"post_id":20696511,"comment_id":30997719,"body_markdown":"I don&#39;t know.  What does `Track#save` look like?  It would **seem** that it&#39;d save it wherever `filename` points to, but I can&#39;t be entirely certain.","body":"I don&#39;t know.  What does <code>Track#save</code> look like?  It would <b>seem</b> that it&#39;d save it wherever <code>filename</code> points to, but I can&#39;t be entirely certain."}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1387515081,"creation_date":1387515081,"answer_id":20696522,"question_id":20696511,"body_markdown":"The file will be saved in within the execution context of the application - in other words, the directory you ran it from...\r\n\r\nFor example...\r\n\r\nIf you ran the program from `C:\\MyJavaProgram`, then it will be saved within this directory","title":"where does the saved file go java","body":"<p>The file will be saved in within the execution context of the application - in other words, the directory you ran it from...</p>\n\n<p>For example...</p>\n\n<p>If you ran the program from <code>C:\\MyJavaProgram</code>, then it will be saved within this directory</p>\n"},{"tags":[],"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1387516545,"creation_date":1387515169,"answer_id":20696541,"question_id":20696511,"body_markdown":"When specified without a path, Java is going to write the file into the [working directory](http://en.wikipedia.org/wiki/Working_directory). You can always determine where that is with something like this\r\n\r\n    File file = new File(filename);\r\n    System.out.println(file.getCanonicalPath());  // &lt;-- should print the full path to the file\r\n    BufferedWriter bw = new BufferedWriter(new FileWriter(file));\r\n\r\nYou can also specify a full path when you call your method, for example - \r\n\r\n     combine.save(&quot;C:/combined&quot;); // &lt;-- or C:\\\\combined\r\n\r\nor a relative path, for example - \r\n \r\n     combine.save(&quot;./output/combined&quot;); // &lt;-- or ../output/combined","title":"where does the saved file go java","body":"<p>When specified without a path, Java is going to write the file into the <a href=\"http://en.wikipedia.org/wiki/Working_directory\" rel=\"nofollow\">working directory</a>. You can always determine where that is with something like this</p>\n\n<pre><code>File file = new File(filename);\nSystem.out.println(file.getCanonicalPath());  // &lt;-- should print the full path to the file\nBufferedWriter bw = new BufferedWriter(new FileWriter(file));\n</code></pre>\n\n<p>You can also specify a full path when you call your method, for example - </p>\n\n<pre><code> combine.save(\"C:/combined\"); // &lt;-- or C:\\\\combined\n</code></pre>\n\n<p>or a relative path, for example - </p>\n\n<pre><code> combine.save(\"./output/combined\"); // &lt;-- or ../output/combined\n</code></pre>\n"}],"owner":{"account_id":2349524,"reputation":63,"user_id":2058776,"accept_rate":25,"display_name":"user2058776"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3418,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":20696541,"answer_count":2,"score":2,"last_activity_date":1659300019,"creation_date":1387515014,"question_id":20696511,"body_markdown":"I have a method \r\n\r\n     public void save(String filename)\r\n    {\r\n        try\r\n        {\r\n            BufferedWriter bw = new BufferedWriter(new FileWriter(new File(filename)));\r\n \r\n            for(Track item : thePlayList)\r\n            {\r\n                item.save(bw);\r\n            }\r\n            bw.close();\r\n        }\r\n        catch (Exception e)\r\n        {\r\n           System.out.println(&quot;couldn&#39;t save M3U file &quot; + filename);                   \r\n        }\r\n\r\nand I have this in the main method, I would like to know where does the saved file go ?  if not then how to save the file in a specific folder. \r\n  \r\n    combine.save(&quot;combined&quot;);\r\n","title":"where does the saved file go java","body":"<p>I have a method </p>\n\n<pre><code> public void save(String filename)\n{\n    try\n    {\n        BufferedWriter bw = new BufferedWriter(new FileWriter(new File(filename)));\n\n        for(Track item : thePlayList)\n        {\n            item.save(bw);\n        }\n        bw.close();\n    }\n    catch (Exception e)\n    {\n       System.out.println(\"couldn't save M3U file \" + filename);                   \n    }\n</code></pre>\n\n<p>and I have this in the main method, I would like to know where does the saved file go ?  if not then how to save the file in a specific folder. </p>\n\n<pre><code>combine.save(\"combined\");\n</code></pre>\n"},{"tags":["java","file-io","bufferedimage"],"answers":[{"tags":[],"owner":{"account_id":211025,"reputation":10266,"user_id":462963,"display_name":"Werner Kvalem Vester&#229;s"},"down_vote_count":0,"up_vote_count":308,"is_accepted":false,"score":308,"last_activity_date":1349097553,"creation_date":1349097553,"answer_id":12674109,"question_id":12674064,"body_markdown":"    File outputfile = new File(&quot;image.jpg&quot;);\r\n    ImageIO.write(bufferedImage, &quot;jpg&quot;, outputfile);","title":"How to save a BufferedImage as a File","body":"<pre><code>File outputfile = new File(\"image.jpg\");\nImageIO.write(bufferedImage, \"jpg\", outputfile);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1865980,"reputation":3828,"user_id":1689539,"accept_rate":93,"display_name":"Raj Adroit"},"down_vote_count":1,"up_vote_count":27,"is_accepted":false,"score":26,"last_activity_date":1423238040,"creation_date":1349097592,"answer_id":12674121,"question_id":12674064,"body_markdown":"You can save a `BufferedImage` object using write method of the [`javax.imageio.ImageIO`][1] class. The signature of the method is like this:\r\n\r\n    public static boolean write(RenderedImage im, String formatName, File output) throws IOException\r\nHere `im` is the `RenderedImage` to be written, `formatName` is the String containing the informal name of the format (e.g. png) and `output` is the file object to be written to. An example usage of the method for PNG file format is shown below:\r\n\r\n    ImageIO.write(image, &quot;png&quot;, file);\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html","title":"How to save a BufferedImage as a File","body":"<p>You can save a <code>BufferedImage</code> object using write method of the <a href=\"http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html\" rel=\"noreferrer\"><code>javax.imageio.ImageIO</code></a> class. The signature of the method is like this:</p>\n\n<pre><code>public static boolean write(RenderedImage im, String formatName, File output) throws IOException\n</code></pre>\n\n<p>Here <code>im</code> is the <code>RenderedImage</code> to be written, <code>formatName</code> is the String containing the informal name of the format (e.g. png) and <code>output</code> is the file object to be written to. An example usage of the method for PNG file format is shown below:</p>\n\n<pre><code>ImageIO.write(image, \"png\", file);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":412676,"reputation":14001,"user_id":785864,"accept_rate":72,"display_name":"Nicolas Modrzyk"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1428876901,"creation_date":1349097842,"answer_id":12674190,"question_id":12674064,"body_markdown":"As a one liner:\r\n\r\n    ImageIO.write(Scalr.resize(ImageIO.read(...), 150));\r\n\r\n","title":"How to save a BufferedImage as a File","body":"<p>As a one liner:</p>\n\n<pre><code>ImageIO.write(Scalr.resize(ImageIO.read(...), 150));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1125613,"reputation":18964,"user_id":1112963,"accept_rate":59,"display_name":"Zon"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1382414013,"creation_date":1382374991,"answer_id":19500543,"question_id":12674064,"body_markdown":"1. Download and add [imgscalr-lib-x.x.jar][1] and [imgscalr-lib-x.x-javadoc.jar][2] to your Projects Libraries.\r\n2. In your code:\r\n\r\n\r\n        import static org.imgscalr.Scalr.*;\r\n\r\n        public static BufferedImage resizeBufferedImage(BufferedImage image, Scalr.Method scalrMethod, Scalr.Mode scalrMode, int width, int height)  {\r\n            BufferedImage bi = image;\r\n            bi = resize( image, scalrMethod, scalrMode, width, height);\r\n        return bi;\r\n        }\r\n         \r\n        // Save image:\r\n        ImageIO.write(Scalr.resize(etotBImage, 150), &quot;jpg&quot;, new File(myDir));\r\n\r\n\r\n  [1]: https://github.com/thebuzzmedia/imgscalr/downloads\r\n  [2]: https://github.com/thebuzzmedia/imgscalr/downloads","title":"How to save a BufferedImage as a File","body":"<ol>\n<li>Download and add <a href=\"https://github.com/thebuzzmedia/imgscalr/downloads\" rel=\"nofollow\">imgscalr-lib-x.x.jar</a> and <a href=\"https://github.com/thebuzzmedia/imgscalr/downloads\" rel=\"nofollow\">imgscalr-lib-x.x-javadoc.jar</a> to your Projects Libraries.</li>\n<li><p>In your code:</p>\n\n<pre><code>import static org.imgscalr.Scalr.*;\n\npublic static BufferedImage resizeBufferedImage(BufferedImage image, Scalr.Method scalrMethod, Scalr.Mode scalrMode, int width, int height)  {\n    BufferedImage bi = image;\n    bi = resize( image, scalrMethod, scalrMode, width, height);\nreturn bi;\n}\n\n// Save image:\nImageIO.write(Scalr.resize(etotBImage, 150), \"jpg\", new File(myDir));\n</code></pre></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":199671,"reputation":148444,"user_id":445131,"accept_rate":89,"display_name":"Eric Leschinski"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1428881129,"creation_date":1428876823,"answer_id":29595252,"question_id":12674064,"body_markdown":"**Create and save a java.awt.image.bufferedImage to file:**\r\n\r\n    import java.io.*;\r\n    import java.awt.image.*;\r\n    import javax.imageio.*;\r\n    public class Main{\r\n        public static void main(String args[]){\r\n            try{\r\n                BufferedImage img = new BufferedImage( \r\n                    500, 500, BufferedImage.TYPE_INT_RGB );\r\n\r\n                File f = new File(&quot;MyFile.png&quot;);\r\n                int r = 5;\r\n                int g = 25;\r\n                int b = 255;\r\n                int col = (r &lt;&lt; 16) | (g &lt;&lt; 8) | b;\r\n                for(int x = 0; x &lt; 500; x++){\r\n                    for(int y = 20; y &lt; 300; y++){\r\n                        img.setRGB(x, y, col);\r\n                    }\r\n                }\r\n                ImageIO.write(img, &quot;PNG&quot;, f);\r\n            }\r\n            catch(Exception e){\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n**Notes:**\r\n\r\n1.  Creates a file called MyFile.png.\r\n2.  Image is 500 by 500 pixels.\r\n2.  Overwrites the existing file.\r\n3.  The color of the image is black with a blue stripe across the top.\r\n","title":"How to save a BufferedImage as a File","body":"<p><strong>Create and save a java.awt.image.bufferedImage to file:</strong></p>\n\n<pre><code>import java.io.*;\nimport java.awt.image.*;\nimport javax.imageio.*;\npublic class Main{\n    public static void main(String args[]){\n        try{\n            BufferedImage img = new BufferedImage( \n                500, 500, BufferedImage.TYPE_INT_RGB );\n\n            File f = new File(\"MyFile.png\");\n            int r = 5;\n            int g = 25;\n            int b = 255;\n            int col = (r &lt;&lt; 16) | (g &lt;&lt; 8) | b;\n            for(int x = 0; x &lt; 500; x++){\n                for(int y = 20; y &lt; 300; y++){\n                    img.setRGB(x, y, col);\n                }\n            }\n            ImageIO.write(img, \"PNG\", f);\n        }\n        catch(Exception e){\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Notes:</strong></p>\n\n<ol>\n<li>Creates a file called MyFile.png.</li>\n<li>Image is 500 by 500 pixels.</li>\n<li>Overwrites the existing file.</li>\n<li>The color of the image is black with a blue stripe across the top.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":7180435,"reputation":1104,"user_id":5484609,"accept_rate":80,"display_name":"Kartik Chugh"},"down_vote_count":0,"up_vote_count":39,"is_accepted":false,"score":39,"last_activity_date":1514597809,"creation_date":1514597809,"answer_id":48030161,"question_id":12674064,"body_markdown":"The answer lies within the Java Documentation&#39;s [Tutorial for Writing/Saving an Image](https://docs.oracle.com/javase/tutorial/2d/images/saveimage.html).\n\nThe `Image I/O` class provides the following method for saving an image:\n\n    static boolean ImageIO.write(RenderedImage im, String formatName, File output)  throws IOException\n\nThe tutorial explains that\n&gt; The BufferedImage class implements the RenderedImage interface.\n\nso it&#39;s able to be used in the method. \n\nFor example,\n\n    try {\n        BufferedImage bi = getMyImage();  // retrieve image\n        File outputfile = new File(&quot;saved.png&quot;);\n        ImageIO.write(bi, &quot;png&quot;, outputfile);\n    } catch (IOException e) {\n        // handle exception\n    }\n\nIt&#39;s important to surround the `write` call with a [try block](https://docs.oracle.com/javase/tutorial/essential/exceptions/try.html) because, as per [the API](https://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html#write(java.awt.image.RenderedImage,%20java.lang.String,%20java.io.File)), the method throws an `IOException` &quot;if an error occurs during writing&quot;\n\nAlso explained are the method&#39;s objective, parameters, returns, and throws, in more detail:\n\n&gt; Writes an image using an arbitrary ImageWriter that supports the given format to a File. If there is already a File present, its contents are discarded.\n&gt;\n&gt; # Parameters: #\n&gt;\n&gt; im - a RenderedImage to be written.\n&gt;\n&gt; formatName - a String containg the informal name of the format.\n&gt;\n&gt; output - a File to be written to.\n&gt;\n&gt; # Returns: #\n&gt;\n&gt; false if no appropriate writer is found.\n&gt;\n&gt; # Throws: #\n&gt;\n&gt; IllegalArgumentException - if any parameter is null.\n&gt;\n&gt; IOException - if an error occurs during writing.\n\n\nHowever, `formatName` may still seem rather vague and ambiguous; the tutorial clears it up a bit:\n\n&gt; The ImageIO.write method calls the code that implements PNG writing a PNG writer plug-in. The term plug-in is used since Image I/O is extensible and can support a wide range of formats.\n&gt;\n&gt; But the following standard image format plugins : JPEG, PNG, GIF, BMP and WBMP are always be present.\n&gt;\n&gt; For most applications it is sufficient to use one of these standard plugins. They have the advantage of being readily available. \n\nThere are, however, additional formats you can use:\n\n&gt; The Image I/O class provides a way to plug in support for additional formats which can be used, and many such plug-ins exist. If you are interested in what file formats are available to load or save in your system, you may use the getReaderFormatNames and getWriterFormatNames methods of the ImageIO class. These methods return an array of strings listing all of the formats supported in this JRE.\n&gt;\n&gt; `String writerNames[] = ImageIO.getWriterFormatNames();`\n&gt;\n&gt; The returned array of names will include any additional plug-ins that are installed and any of these names may be used as a format name to select an image writer. \n\nFor a full and practical example, one can refer to Oracle&#39;s [`SaveImage.java` example.](https://docs.oracle.com/javase/tutorial/2d/images/examples/SaveImage.java)","title":"How to save a BufferedImage as a File","body":"<p>The answer lies within the Java Documentation's <a href=\"https://docs.oracle.com/javase/tutorial/2d/images/saveimage.html\" rel=\"noreferrer\">Tutorial for Writing/Saving an Image</a>.</p>\n<p>The <code>Image I/O</code> class provides the following method for saving an image:</p>\n<pre><code>static boolean ImageIO.write(RenderedImage im, String formatName, File output)  throws IOException\n</code></pre>\n<p>The tutorial explains that</p>\n<blockquote>\n<p>The BufferedImage class implements the RenderedImage interface.</p>\n</blockquote>\n<p>so it's able to be used in the method.</p>\n<p>For example,</p>\n<pre><code>try {\n    BufferedImage bi = getMyImage();  // retrieve image\n    File outputfile = new File(&quot;saved.png&quot;);\n    ImageIO.write(bi, &quot;png&quot;, outputfile);\n} catch (IOException e) {\n    // handle exception\n}\n</code></pre>\n<p>It's important to surround the <code>write</code> call with a <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/try.html\" rel=\"noreferrer\">try block</a> because, as per <a href=\"https://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html#write(java.awt.image.RenderedImage,%20java.lang.String,%20java.io.File)\" rel=\"noreferrer\">the API</a>, the method throws an <code>IOException</code> &quot;if an error occurs during writing&quot;</p>\n<p>Also explained are the method's objective, parameters, returns, and throws, in more detail:</p>\n<blockquote>\n<p>Writes an image using an arbitrary ImageWriter that supports the given format to a File. If there is already a File present, its contents are discarded.</p>\n<h1>Parameters:</h1>\n<p>im - a RenderedImage to be written.</p>\n<p>formatName - a String containg the informal name of the format.</p>\n<p>output - a File to be written to.</p>\n<h1>Returns:</h1>\n<p>false if no appropriate writer is found.</p>\n<h1>Throws:</h1>\n<p>IllegalArgumentException - if any parameter is null.</p>\n<p>IOException - if an error occurs during writing.</p>\n</blockquote>\n<p>However, <code>formatName</code> may still seem rather vague and ambiguous; the tutorial clears it up a bit:</p>\n<blockquote>\n<p>The ImageIO.write method calls the code that implements PNG writing a PNG writer plug-in. The term plug-in is used since Image I/O is extensible and can support a wide range of formats.</p>\n<p>But the following standard image format plugins : JPEG, PNG, GIF, BMP and WBMP are always be present.</p>\n<p>For most applications it is sufficient to use one of these standard plugins. They have the advantage of being readily available.</p>\n</blockquote>\n<p>There are, however, additional formats you can use:</p>\n<blockquote>\n<p>The Image I/O class provides a way to plug in support for additional formats which can be used, and many such plug-ins exist. If you are interested in what file formats are available to load or save in your system, you may use the getReaderFormatNames and getWriterFormatNames methods of the ImageIO class. These methods return an array of strings listing all of the formats supported in this JRE.</p>\n<p><code>String writerNames[] = ImageIO.getWriterFormatNames();</code></p>\n<p>The returned array of names will include any additional plug-ins that are installed and any of these names may be used as a format name to select an image writer.</p>\n</blockquote>\n<p>For a full and practical example, one can refer to Oracle's <a href=\"https://docs.oracle.com/javase/tutorial/2d/images/examples/SaveImage.java\" rel=\"noreferrer\"><code>SaveImage.java</code> example.</a></p>\n"}],"owner":{"account_id":26725,"reputation":50482,"user_id":69803,"accept_rate":65,"display_name":"Ankur"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":282946,"favorite_count":0,"down_vote_count":0,"up_vote_count":176,"answer_count":6,"score":176,"last_activity_date":1659299810,"creation_date":1349097410,"question_id":12674064,"body_markdown":"I am using the [imgscalr][1] Java library to resize an image .\r\n\r\nThe result of a resize() method call is a BufferedImage object. I now want to save this as a file (usually .jpg).\r\n\r\nHow can I do that? I want to go from `BufferedImage` -&gt; `File` but perhaps this is not the correct approach?\r\n\r\n\r\n  [1]: http://www.thebuzzmedia.com/software/imgscalr-java-image-scaling-library\r\n  [2]: http://www.thebuzzmedia.com/software/imgscalr-java-image-scaling-library","title":"How to save a BufferedImage as a File","body":"<p>I am using the <a href=\"http://www.thebuzzmedia.com/software/imgscalr-java-image-scaling-library\" rel=\"noreferrer\">imgscalr</a> Java library to resize an image .</p>\n\n<p>The result of a resize() method call is a BufferedImage object. I now want to save this as a file (usually .jpg).</p>\n\n<p>How can I do that? I want to go from <code>BufferedImage</code> -> <code>File</code> but perhaps this is not the correct approach?</p>\n"},{"tags":["java","android","save"],"comments":[{"owner":{"account_id":17782422,"reputation":357,"user_id":12913325,"display_name":"Jay_Panchal"},"score":0,"creation_date":1648837849,"post_id":71710445,"comment_id":126734288,"body_markdown":"this might be the answer for your question. https://stackoverflow.com/a/28184936/12913325","body":"this might be the answer for your question. <a href=\"https://stackoverflow.com/a/28184936/12913325\">stackoverflow.com/a/28184936/12913325</a>"}],"answers":[{"tags":[],"owner":{"account_id":22627540,"reputation":298,"user_id":16805423,"display_name":"Brentspine"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648926620,"creation_date":1648833072,"answer_id":71710568,"question_id":71710445,"body_markdown":"```\r\ntry (PrintWriter out = new PrintWriter(&quot;storage/emulated/0/myfile.txt&quot;)) {\r\n    out.println(text);\r\n}\r\n```\r\nIf this is not what you want you&#39;ll have to add more details","title":"How to save file in folder on java?","body":"<pre><code>try (PrintWriter out = new PrintWriter(&quot;storage/emulated/0/myfile.txt&quot;)) {\n    out.println(text);\n}\n</code></pre>\n<p>If this is not what you want you'll have to add more details</p>\n"},{"tags":[],"owner":{"account_id":22380441,"reputation":29,"user_id":16594125,"display_name":"Abdel Wadoud"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1659299546,"creation_date":1659299546,"answer_id":73186724,"question_id":71710445,"body_markdown":"I have published a library that saves files, and handles everything with one line of code only, you can find it here along with its documentation\r\n\r\n[Github repository][1]\r\n\r\n\r\n  [1]: https://github.com/rasmi-aw/StorageManager\r\n\r\nand the answer to your question is so easy\r\n\r\n    String path = FileSaver\r\n            .get()\r\n            .save(inputStream,&quot;your/path&quot;,&quot;file.mp3&quot;);","title":"How to save file in folder on java?","body":"<p>I have published a library that saves files, and handles everything with one line of code only, you can find it here along with its documentation</p>\n<p><a href=\"https://github.com/rasmi-aw/StorageManager\" rel=\"nofollow noreferrer\">Github repository</a></p>\n<p>and the answer to your question is so easy</p>\n<pre><code>String path = FileSaver\n        .get()\n        .save(inputStream,&quot;your/path&quot;,&quot;file.mp3&quot;);\n</code></pre>\n"}],"owner":{"account_id":24189199,"reputation":11,"user_id":18148605,"display_name":"RD1706"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":120,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1659299546,"creation_date":1648832290,"question_id":71710445,"body_markdown":"How can I save a file in a selected folder in Java? &lt;br&gt;\r\nI need it like this: `storage/emulated/0/myfile.txt` &lt;br&gt;\r\nIs there is an example?","title":"How to save file in folder on java?","body":"<p>How can I save a file in a selected folder in Java? <br>\nI need it like this: <code>storage/emulated/0/myfile.txt</code> <br>\nIs there is an example?</p>\n"},{"tags":["java","java-io"],"answers":[{"tags":[],"owner":{"account_id":60521,"reputation":34336,"user_id":180719,"accept_rate":88,"display_name":"Olivier Gr&#233;goire"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1479940885,"creation_date":1479940885,"answer_id":40775360,"question_id":40775230,"body_markdown":"Add the following to your program, run it and it&#39;ll show you the expected location:\r\n\r\n    System.out.println(f.getCanonicalFile());","title":"Where does Java save files to?","body":"<p>Add the following to your program, run it and it'll show you the expected location:</p>\n\n<pre><code>System.out.println(f.getCanonicalFile());\n</code></pre>\n"}],"owner":{"account_id":9703557,"reputation":1,"user_id":7197702,"display_name":"ibrahim baig"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1659299281,"creation_date":1479940308,"question_id":40775230,"body_markdown":"I ran the below code and created a file. Where can I find it in my filesystem?\r\n\r\n    import java.io.*;\r\n    \r\n    public class FileReaderDemo {\r\n        public static void main(String args[]) throws Exception {\r\n            File f = new File (&quot;wayback.txt&quot;);\r\n            f.createNewFile();\r\n            System.out.println(f.exists());\r\n        }\r\n    }","title":"Where does Java save files to?","body":"<p>I ran the below code and created a file. Where can I find it in my filesystem?</p>\n\n<pre><code>import java.io.*;\n\npublic class FileReaderDemo {\n    public static void main(String args[]) throws Exception {\n        File f = new File (\"wayback.txt\");\n        f.createNewFile();\n        System.out.println(f.exists());\n    }\n}\n</code></pre>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1659294712,"post_id":73186011,"comment_id":129255418,"body_markdown":"Not as a typical add*Listener method, but there are plenty of ways to do this:  synchronized and the wait/notify/notifyAll methods of Object;  the await/signal methods of Lock;  the awaitTermination method of ExecutorService;  Semaphore/CountDownLatch/CyclicBarrier/Phaser;  if using Swing, the addPropertyChangeListener method of SwingWorker;  and if youre using JavaFX, you can listen to the running or state properties of Worker implementations.","body":"Not as a typical add*Listener method, but there are plenty of ways to do this:  synchronized and the wait/notify/notifyAll methods of Object;  the await/signal methods of Lock;  the awaitTermination method of ExecutorService;  Semaphore/CountDownLatch/CyclicBarrier/Phaser;  if using Swing, the addPropertyChangeListener method of SwingWorker;  and if youre using JavaFX, you can listen to the running or state properties of Worker implementations."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1659299437,"post_id":73186011,"comment_id":129256310,"body_markdown":"By the way, you need to add code to handle graceful shutdown of your executer service. See boilerplate in the Javadoc.","body":"By the way, you need to add code to handle graceful shutdown of your executer service. See boilerplate in the Javadoc."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1659299584,"post_id":73186011,"comment_id":129256331,"body_markdown":"This Question could be improved by specifying the nature of your &quot;long running task without a loop&quot;. Example code would help.","body":"This Question could be improved by specifying the nature of your &quot;long running task without a loop&quot;. Example code would help."},{"owner":{"account_id":20070524,"reputation":11,"user_id":14715389,"display_name":"pizzadox9999"},"score":0,"creation_date":1659299950,"post_id":73186011,"comment_id":129256388,"body_markdown":"I don&#39;t think so. But In there I load something with a load method. Now to avoid rewriting anything so that I can shut it down properly in the load method I would like to figure out other ways, because if the user hits stop I don&#39;t care any more about the state of that Class.","body":"I don&#39;t think so. But In there I load something with a load method. Now to avoid rewriting anything so that I can shut it down properly in the load method I would like to figure out other ways, because if the user hits stop I don&#39;t care any more about the state of that Class."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1659322867,"post_id":73186011,"comment_id":129259490,"body_markdown":"The cancel method of Future will only work if the DoTask.run method checks for an interrupt with reasonable frequency.","body":"The cancel method of Future will only work if the DoTask.run method checks for an interrupt with reasonable frequency."}],"answers":[{"tags":[],"owner":{"account_id":25382190,"reputation":30,"user_id":19194414,"display_name":"Rauchbier"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1659297923,"creation_date":1659297923,"answer_id":73186543,"question_id":73186011,"body_markdown":"This may help. You may be able to use the button to give the interrupt command if I am reading your question correctly. It should only require you to place the command in the buttons action listener execution.\r\n\r\nhttps://www.tutorialspoint.com/how-a-thread-can-interrupt-another-thread-in-java#:~:text=The%20%E2%80%98interrupt%E2%80%99%20function%20can%20be%20used%20in%20Java,once%20it%20is%20interrupted%20%E2%88%92%20Example%20Live%20Demo","title":"Are there Thread interruption Event listeners","body":"<p>This may help. You may be able to use the button to give the interrupt command if I am reading your question correctly. It should only require you to place the command in the buttons action listener execution.</p>\n<p><a href=\"https://www.tutorialspoint.com/how-a-thread-can-interrupt-another-thread-in-java#:%7E:text=The%20%E2%80%98interrupt%E2%80%99%20function%20can%20be%20used%20in%20Java,once%20it%20is%20interrupted%20%E2%88%92%20Example%20Live%20Demo\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/how-a-thread-can-interrupt-another-thread-in-java#:~:text=The%20%E2%80%98interrupt%E2%80%99%20function%20can%20be%20used%20in%20Java,once%20it%20is%20interrupted%20%E2%88%92%20Example%20Live%20Demo</a></p>\n"}],"owner":{"account_id":20070524,"reputation":11,"user_id":14715389,"display_name":"pizzadox9999"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1659299149,"creation_date":1659292853,"question_id":73186011,"body_markdown":"I was wondering if there are EventListeners for when the interrupted flag on a Thread gets changed via the `.interrupt()` method? The current problem is that I have a run method without a loop, but if an abort button is pushed, I want to stop the execution. If such things don&#39;t exist, the question becomes, how can I put it in now? Do I have to design the application from the ground up to support such features? My goal is to have the same functionality as the deprecated `stop()` method without having the downside. My current situtation is the following:\r\n\r\n```\r\npublic class DoTask implements Runnable {\r\n  public void run(){\r\n    /* a long running task without a loop like loading something with a \r\n       simple load method.\r\n    */\r\n  }\r\n}\r\npublic class Main {\r\n  public static void main(String[] args){\r\n    ExecutorService executor=Executors.newSingleThreadExecutor();\r\n    JButton button = new JButton(&quot;Stop&quot;);\r\n    button.addMouseListener(new MouseAdapter() {\r\n\t  public void mouseClicked(MouseEvent e) {\r\n\t\t/* stop the executor (or Thread) somehow */\r\n\t  }\r\n\t});\r\n\texecutor.submit(new DoTask());\r\n    /* all methods from the executor don&#39;t stop the Runnable \r\n       immediately without their knowledge. They don&#39;t stop it.\r\n    */\r\n  }\r\n}\r\n```\r\n\r\nBest regards pizzadox9999","title":"Are there Thread interruption Event listeners","body":"<p>I was wondering if there are EventListeners for when the interrupted flag on a Thread gets changed via the <code>.interrupt()</code> method? The current problem is that I have a run method without a loop, but if an abort button is pushed, I want to stop the execution. If such things don't exist, the question becomes, how can I put it in now? Do I have to design the application from the ground up to support such features? My goal is to have the same functionality as the deprecated <code>stop()</code> method without having the downside. My current situtation is the following:</p>\n<pre><code>public class DoTask implements Runnable {\n  public void run(){\n    /* a long running task without a loop like loading something with a \n       simple load method.\n    */\n  }\n}\npublic class Main {\n  public static void main(String[] args){\n    ExecutorService executor=Executors.newSingleThreadExecutor();\n    JButton button = new JButton(&quot;Stop&quot;);\n    button.addMouseListener(new MouseAdapter() {\n      public void mouseClicked(MouseEvent e) {\n        /* stop the executor (or Thread) somehow */\n      }\n    });\n    executor.submit(new DoTask());\n    /* all methods from the executor don't stop the Runnable \n       immediately without their knowledge. They don't stop it.\n    */\n  }\n}\n</code></pre>\n<p>Best regards pizzadox9999</p>\n"},{"tags":["java","loops","file-io"],"answers":[{"tags":[],"owner":{"account_id":2524075,"reputation":36076,"user_id":2193767,"accept_rate":78,"display_name":"TheLostMind"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1410169353,"creation_date":1410169353,"answer_id":25721380,"question_id":25721357,"body_markdown":"Put these lines outside (before) the loop. You are *overwriting* the file in each loop iteration.\r\n\r\n           File file = new File(&quot;resultset.csv&quot;);\r\n            // if file doesnt exists, then create it\r\n            if (!file.exists()) {\r\n                file.createNewFile();\r\n            }\r\n\r\n            FileWriter fw = new FileWriter(file.getAbsoluteFile());\r\n            BufferedWriter bw = new BufferedWriter(fw);\r\n\r\nAlso,\r\n\r\n     bw.close(); // outside (after) the loop","title":"Java save temporary data to file","body":"<p>Put these lines outside (before) the loop. You are <em>overwriting</em> the file in each loop iteration.</p>\n\n<pre><code>       File file = new File(\"resultset.csv\");\n        // if file doesnt exists, then create it\n        if (!file.exists()) {\n            file.createNewFile();\n        }\n\n        FileWriter fw = new FileWriter(file.getAbsoluteFile());\n        BufferedWriter bw = new BufferedWriter(fw);\n</code></pre>\n\n<p>Also,</p>\n\n<pre><code> bw.close(); // outside (after) the loop\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3245347,"reputation":3398,"user_id":3887073,"accept_rate":75,"display_name":"Ben"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1410169612,"creation_date":1410169612,"answer_id":25721456,"question_id":25721357,"body_markdown":"You can try to use FileWriter with TRUE parameter:\r\n\r\n\r\n     FileWriter fw = new FileWriter(file.getAbsoluteFile(),true); //see here!\r\n     BufferedWriter bw = new BufferedWriter(fw);\r\n\r\n\r\nBy doing this, new Text will be **appended** to the file.\r\n","title":"Java save temporary data to file","body":"<p>You can try to use FileWriter with TRUE parameter:</p>\n\n<pre><code> FileWriter fw = new FileWriter(file.getAbsoluteFile(),true); //see here!\n BufferedWriter bw = new BufferedWriter(fw);\n</code></pre>\n\n<p>By doing this, new Text will be <strong>appended</strong> to the file.</p>\n"}],"owner":{"account_id":2464083,"reputation":856,"user_id":2147581,"accept_rate":68,"display_name":"S&#252;ni&#218;r"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":206,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":25721456,"answer_count":2,"score":0,"last_activity_date":1659299053,"creation_date":1410169274,"question_id":25721357,"body_markdown":"I have this code:\r\n\r\n    \t\t\tfor (Record record : Adatok) {\r\n\t\t\t\t//System.out.println(record.toString2());\r\n\t\t\t\tact_data=tmp.testtestclass(record);\r\n\t\t\t\tSystem.out.println(&quot;*******&quot;);\r\n\t\t\t\tSystem.out.println(&quot;Feldolgoz&#225;s eredm&#233;nye:&quot;);\r\n\t\t\t\tSystem.out.println(data_restructure(act_data));\r\n\t\t\t\r\n\t\t\t//\tString content = record.nev + &quot;;&quot; + record.address + &quot;\\n&quot;+&quot;asd&quot;;\r\n\t\t\t\t \r\n\t\t\t\tFile file = new File(&quot;resultset.csv&quot;);\r\n\t \r\n\t\t\t\t// if file doesnt exists, then create it\r\n\t\t\t\tif (!file.exists()) {\r\n\t\t\t\t\tfile.createNewFile();\r\n\t\t\t\t}\r\n\t \r\n\t\t\t\tFileWriter fw = new FileWriter(file.getAbsoluteFile());\r\n\t\t\t\tBufferedWriter bw = new BufferedWriter(fw);\r\n\t\t\t\tbw.write(data_restructure(act_data) + &quot;\\n&quot;);\r\n\t\t\t\tbw.close();\r\n\t\t\t\t\r\n\t\t\t\r\n\t\t\t}\r\n\r\nMy problem is that this loop running time is hours and can be interupting. So I do this filewrite/bufferedwrite in it.\r\nSo everytime he get data back than I want to write it to file.\r\n\r\nBut when I do this it is always write only 1 line to my file than nothing.\r\n\r\nHow can I improve it?  I tried with firewriter, bufferedwriter but It kinda bugging.\r\n\r\nI know its a dumb question but I cant figurit out how to solve it cause the basic examples does not works.","title":"Java save temporary data to file","body":"<p>I have this code:</p>\n\n<pre><code>            for (Record record : Adatok) {\n            //System.out.println(record.toString2());\n            act_data=tmp.testtestclass(record);\n            System.out.println(\"*******\");\n            System.out.println(\"Feldolgozs eredmnye:\");\n            System.out.println(data_restructure(act_data));\n\n        //  String content = record.nev + \";\" + record.address + \"\\n\"+\"asd\";\n\n            File file = new File(\"resultset.csv\");\n\n            // if file doesnt exists, then create it\n            if (!file.exists()) {\n                file.createNewFile();\n            }\n\n            FileWriter fw = new FileWriter(file.getAbsoluteFile());\n            BufferedWriter bw = new BufferedWriter(fw);\n            bw.write(data_restructure(act_data) + \"\\n\");\n            bw.close();\n\n\n        }\n</code></pre>\n\n<p>My problem is that this loop running time is hours and can be interupting. So I do this filewrite/bufferedwrite in it.\nSo everytime he get data back than I want to write it to file.</p>\n\n<p>But when I do this it is always write only 1 line to my file than nothing.</p>\n\n<p>How can I improve it?  I tried with firewriter, bufferedwriter but It kinda bugging.</p>\n\n<p>I know its a dumb question but I cant figurit out how to solve it cause the basic examples does not works.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":2741582,"reputation":1314,"user_id":2363015,"accept_rate":43,"display_name":"Luke"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1526144973,"creation_date":1526144973,"answer_id":50308777,"question_id":50308756,"body_markdown":"You&#39;re not closing the FileWriter in `saveAs` method. Use the [try-with-resources](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html) so the writer is closed and output is written to file. Maybe contrary to its name, `FileWriter` is also buffered, though it has smaller buffer than `BufferedWriter`, so contents are not written to disk immediately. The code would go like:\r\n\r\n    try (FileWriter fw = new FileWriter(saveOption.getSelectedFile()+&quot;.txt&quot;)) {\r\n        fw.write(value);\r\n    } catch (IOException ex) {\r\n        Logger.getLogger(SaveAs.class.getName()).log(Level.SEVERE, null, ex);\r\n    }\r\n\r\nAlternatively, you can add a finally block after the catch and call `fw.close()` explicitly there (calling `fw.flush()` is redundant if closing the stream).","title":"Java save text file","body":"<p>You're not closing the FileWriter in <code>saveAs</code> method. Use the <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\">try-with-resources</a> so the writer is closed and output is written to file. Maybe contrary to its name, <code>FileWriter</code> is also buffered, though it has smaller buffer than <code>BufferedWriter</code>, so contents are not written to disk immediately. The code would go like:</p>\n\n<pre><code>try (FileWriter fw = new FileWriter(saveOption.getSelectedFile()+\".txt\")) {\n    fw.write(value);\n} catch (IOException ex) {\n    Logger.getLogger(SaveAs.class.getName()).log(Level.SEVERE, null, ex);\n}\n</code></pre>\n\n<p>Alternatively, you can add a finally block after the catch and call <code>fw.close()</code> explicitly there (calling <code>fw.flush()</code> is redundant if closing the stream).</p>\n"},{"tags":[],"owner":{"account_id":3433285,"reputation":4199,"user_id":2877029,"accept_rate":62,"display_name":"Viacheslav Shalamov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1526145519,"creation_date":1526144980,"answer_id":50308778,"question_id":50308756,"body_markdown":"You can force `FileWriter` to flush all written data to file immediately with `fw.flush()`.\r\n\r\nDo not forget to `close` the file at the end.   After you do `fw.close()`, all data you&#39;ve written will be automatically flushed to file and the file will be safely closed.\r\n\r\n\r\nIf you use try with resources, the file will be flushed and saved automatically.\r\n\r\n     public void saveAs(String value,JFileChooser saveOption) {\r\n        try(FileWriter fw = new FileWriter(saveOption.getSelectedFile()+&quot;.txt&quot;)) {\r\n            fw.write(value);\r\n        } catch (IOException ex) {\r\n            Logger.getLogger(SaveAs.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n     }","title":"Java save text file","body":"<p>You can force <code>FileWriter</code> to flush all written data to file immediately with <code>fw.flush()</code>.</p>\n\n<p>Do not forget to <code>close</code> the file at the end.   After you do <code>fw.close()</code>, all data you've written will be automatically flushed to file and the file will be safely closed.</p>\n\n<p>If you use try with resources, the file will be flushed and saved automatically.</p>\n\n<pre><code> public void saveAs(String value,JFileChooser saveOption) {\n    try(FileWriter fw = new FileWriter(saveOption.getSelectedFile()+\".txt\")) {\n        fw.write(value);\n    } catch (IOException ex) {\n        Logger.getLogger(SaveAs.class.getName()).log(Level.SEVERE, null, ex);\n    }\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":39409,"reputation":47624,"user_id":113632,"accept_rate":84,"display_name":"dimo414"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1526145081,"creation_date":1526145081,"answer_id":50308792,"question_id":50308756,"body_markdown":"Use the [try-with-resources](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html) syntax to ensure your data is written out.\r\n\r\n    try (FileWriter fw = new FileWriter(saveOption.getSelectedFile()+&quot;.txt&quot;) {\r\n        fw.write(value);\r\n    } catch (IOException ex) {\r\n        Logger.getLogger(SaveAs.class.getName()).log(Level.SEVERE, null, ex);\r\n    }\r\n\r\nYou might also want to either let that `IOException` propagate from `saveAs()` (by adding `throws IOException` to the method signature) or do something else like return a `boolean` to indicate whether the write succeeded or not. Otherwise your program can&#39;t tell whether `saveAs()` actually worked or not.","title":"Java save text file","body":"<p>Use the <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\">try-with-resources</a> syntax to ensure your data is written out.</p>\n\n<pre><code>try (FileWriter fw = new FileWriter(saveOption.getSelectedFile()+\".txt\") {\n    fw.write(value);\n} catch (IOException ex) {\n    Logger.getLogger(SaveAs.class.getName()).log(Level.SEVERE, null, ex);\n}\n</code></pre>\n\n<p>You might also want to either let that <code>IOException</code> propagate from <code>saveAs()</code> (by adding <code>throws IOException</code> to the method signature) or do something else like return a <code>boolean</code> to indicate whether the write succeeded or not. Otherwise your program can't tell whether <code>saveAs()</code> actually worked or not.</p>\n"}],"owner":{"account_id":12322777,"reputation":95,"user_id":8991667,"display_name":"user8991667"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":50308777,"answer_count":3,"score":1,"last_activity_date":1659298752,"creation_date":1526144826,"question_id":50308756,"body_markdown":"I have a JFileChooser that is set as a set Save Dialog and a jTextArea where I can write stuff, my problem is that when I save it, the text doesn&#39;t get saved. Any ideas what I&#39;m doing wrong?\r\n\r\n    private void saveAsButtonMouseClicked(java.awt.event.MouseEvent evt) {                                          \r\n        SaveAs saveasbtn= new SaveAs();\r\n        int retrival = saveOption.showSaveDialog(null);\r\n        if (retrival == JFileChooser.APPROVE_OPTION) \r\n           {saveasbtn.saveAs(jTextArea2.getText(),saveOption);}\r\n        }\r\n\r\n\r\n     public void saveAs(String value,JFileChooser saveOption){\r\n        \r\n        try {\r\n            FileWriter fw;\r\n            fw = new FileWriter(saveOption.getSelectedFile()+&quot;.txt&quot;);\r\n            fw.write(value);\r\n        } catch (IOException ex) {\r\n            Logger.getLogger(SaveAs.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n     }","title":"Java save text file","body":"<p>I have a JFileChooser that is set as a set Save Dialog and a jTextArea where I can write stuff, my problem is that when I save it, the text doesn't get saved. Any ideas what I'm doing wrong?</p>\n\n<pre><code>private void saveAsButtonMouseClicked(java.awt.event.MouseEvent evt) {                                          \n    SaveAs saveasbtn= new SaveAs();\n    int retrival = saveOption.showSaveDialog(null);\n    if (retrival == JFileChooser.APPROVE_OPTION) \n       {saveasbtn.saveAs(jTextArea2.getText(),saveOption);}\n    }\n\n\n public void saveAs(String value,JFileChooser saveOption){\n\n    try {\n        FileWriter fw;\n        fw = new FileWriter(saveOption.getSelectedFile()+\".txt\");\n        fw.write(value);\n    } catch (IOException ex) {\n        Logger.getLogger(SaveAs.class.getName()).log(Level.SEVERE, null, ex);\n    }\n }\n</code></pre>\n"},{"tags":["java","android","binaryfiles","outputstream","fileoutputstream"],"comments":[{"owner":{"account_id":1439301,"reputation":2196,"user_id":1359923,"accept_rate":100,"display_name":"ametren"},"score":0,"creation_date":1336596468,"post_id":10523801,"comment_id":13611236,"body_markdown":"Are you getting anything at all in your local file?  Any specific error message?","body":"Are you getting anything at all in your local file?  Any specific error message?"},{"owner":{"account_id":1093356,"reputation":7034,"user_id":1087479,"accept_rate":89,"display_name":"sschrass"},"score":0,"creation_date":1336596769,"post_id":10523801,"comment_id":13611360,"body_markdown":"it is &#39;log cat&#39; not &#39;low cat&#39; x)","body":"it is &#39;log cat&#39; not &#39;low cat&#39; x)"},{"owner":{"account_id":1417281,"reputation":655,"user_id":1342645,"accept_rate":40,"display_name":"user1342645"},"score":0,"creation_date":1336598003,"post_id":10523801,"comment_id":13611784,"body_markdown":"the filename i want to save the file as. it would be like pic.gif","body":"the filename i want to save the file as. it would be like pic.gif"}],"answers":[{"tags":[],"owner":{"account_id":1093356,"reputation":7034,"user_id":1087479,"accept_rate":89,"display_name":"sschrass"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1336596575,"creation_date":1336596244,"answer_id":10523823,"question_id":10523801,"body_markdown":"have you set the permission to save on sd card?\r\n\r\n[https://developer.android.com/guide/topics/data/data-storage.html][1] and [https://developer.android.com/reference/android/Manifest.permission.html][2] \r\n([https://developer.android.com/reference/android/Manifest.permission.html#WRITE_EXTERNAL_STORAGE][3])\r\n\r\n\r\n  [1]: https://developer.android.com/guide/topics/data/data-storage.html\r\n  [2]: https://developer.android.com/reference/android/Manifest.permission.html\r\n  [3]: https://developer.android.com/reference/android/Manifest.permission.html#WRITE_EXTERNAL_STORAGE","title":"java save binary code to a file","body":"<p>have you set the permission to save on sd card?</p>\n\n<p><a href=\"https://developer.android.com/guide/topics/data/data-storage.html\" rel=\"nofollow\">https://developer.android.com/guide/topics/data/data-storage.html</a> and <a href=\"https://developer.android.com/reference/android/Manifest.permission.html\" rel=\"nofollow\">https://developer.android.com/reference/android/Manifest.permission.html</a> \n(<a href=\"https://developer.android.com/reference/android/Manifest.permission.html#WRITE_EXTERNAL_STORAGE\" rel=\"nofollow\">https://developer.android.com/reference/android/Manifest.permission.html#WRITE_EXTERNAL_STORAGE</a>)</p>\n"},{"tags":[],"owner":{"account_id":1439301,"reputation":2196,"user_id":1359923,"accept_rate":100,"display_name":"ametren"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1336596428,"creation_date":1336596428,"answer_id":10523852,"question_id":10523801,"body_markdown":"I believe you want to use `writeBytes()` instead of `writeUTF()` so that it doesn&#39;t change your encoding on you.","title":"java save binary code to a file","body":"<p>I believe you want to use <code>writeBytes()</code> instead of <code>writeUTF()</code> so that it doesn't change your encoding on you.</p>\n"},{"tags":[],"owner":{"account_id":1093356,"reputation":7034,"user_id":1087479,"accept_rate":89,"display_name":"sschrass"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1336598494,"creation_date":1336598494,"answer_id":10524270,"question_id":10523801,"body_markdown":"this one works for me:\r\n\r\n    public void WriteSettings(Context context, String data){\r\n         FileOutputStream fOut = null;\r\n         OutputStreamWriter osw = null;\r\n \r\n         try{\r\n             fOut = openFileOutput(&quot;settings.dat&quot;, MODE_PRIVATE);      \r\n             osw = new OutputStreamWriter(fOut);\r\n \r\n             osw.write(data);\r\n             osw.flush();\r\n \r\n             Toast.makeText(context, &quot;Settings saved&quot;, Toast.LENGTH_SHORT).show();\r\n         }\r\n \r\n          catch (Exception e) {      \r\n             e.printStackTrace();\r\n             Toast.makeText(context, &quot;Settings not saved&quot;, Toast.LENGTH_SHORT).show();\r\n          }\r\n \r\n          finally {\r\n             try {\r\n                 osw.close();\r\n                 fOut.close();\r\n             } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                 }\r\n          }\r\n     }","title":"java save binary code to a file","body":"<p>this one works for me:</p>\n\n<pre><code>public void WriteSettings(Context context, String data){\n     FileOutputStream fOut = null;\n     OutputStreamWriter osw = null;\n\n     try{\n         fOut = openFileOutput(\"settings.dat\", MODE_PRIVATE);      \n         osw = new OutputStreamWriter(fOut);\n\n         osw.write(data);\n         osw.flush();\n\n         Toast.makeText(context, \"Settings saved\", Toast.LENGTH_SHORT).show();\n     }\n\n      catch (Exception e) {      \n         e.printStackTrace();\n         Toast.makeText(context, \"Settings not saved\", Toast.LENGTH_SHORT).show();\n      }\n\n      finally {\n         try {\n             osw.close();\n             fOut.close();\n         } catch (IOException e) {\n                e.printStackTrace();\n             }\n      }\n }\n</code></pre>\n"}],"owner":{"account_id":1417281,"reputation":655,"user_id":1342645,"accept_rate":40,"display_name":"user1342645"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2614,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1659298468,"creation_date":1336596147,"question_id":10523801,"body_markdown":"I&#39;m retrieving a picture file as binary code through ajax, then javascript passes it to java on android and android is getting the binary code but I can&#39;t make it save it... I have tried many diiferent ways and nothing works.\r\n\r\nthe code on java so far looks like this:\r\n\r\n     public void setFile(String sFileName, String sBody){\r\n        try\r\n        {\r\n        \t//Log.w(&quot;setfile&quot;, sBody);\r\n            File root = new File(Environment.getExternalStorageDirectory(), local_address);\r\n            if (!root.exists()) {\r\n                root.mkdirs();\r\n            }\r\n            File gpxfile = new File(root, sFileName);\r\n            FileOutputStream aFileOutStream = new FileOutputStream(gpxfile);\r\n            DataOutputStream aDataOutputStream = new DataOutputStream(aFileOutStream);\r\n            \r\n            \r\n            aDataOutputStream.writeUTF(sBody);\r\n            aDataOutputStream.flush();\r\n            aDataOutputStream.close();\r\n            aFileOutStream.close();\r\n            \r\n            //FileWriter writer = new FileWriter(gpxfile);\r\n            //writer.append(sBody);\r\n            //writer.flush();\r\n            //writer.close();\r\n            //Toast.makeText(this, &quot;Saved&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n        catch(IOException e)\r\n        {\r\n             e.printStackTrace();\r\n        }\r\n       }  \r\n\r\ni know java is working because if I uncomment this line\r\n\r\n   //Log.w(&quot;setfile&quot;, sBody);\r\n\r\nlog cat would return the binary code that javascript sent java\r\n\t","title":"java save binary code to a file","body":"<p>I'm retrieving a picture file as binary code through ajax, then javascript passes it to java on android and android is getting the binary code but I can't make it save it... I have tried many diiferent ways and nothing works.</p>\n\n<p>the code on java so far looks like this:</p>\n\n<pre><code> public void setFile(String sFileName, String sBody){\n    try\n    {\n        //Log.w(\"setfile\", sBody);\n        File root = new File(Environment.getExternalStorageDirectory(), local_address);\n        if (!root.exists()) {\n            root.mkdirs();\n        }\n        File gpxfile = new File(root, sFileName);\n        FileOutputStream aFileOutStream = new FileOutputStream(gpxfile);\n        DataOutputStream aDataOutputStream = new DataOutputStream(aFileOutStream);\n\n\n        aDataOutputStream.writeUTF(sBody);\n        aDataOutputStream.flush();\n        aDataOutputStream.close();\n        aFileOutStream.close();\n\n        //FileWriter writer = new FileWriter(gpxfile);\n        //writer.append(sBody);\n        //writer.flush();\n        //writer.close();\n        //Toast.makeText(this, \"Saved\", Toast.LENGTH_SHORT).show();\n    }\n    catch(IOException e)\n    {\n         e.printStackTrace();\n    }\n   }  \n</code></pre>\n\n<p>i know java is working because if I uncomment this line</p>\n\n<p>//Log.w(\"setfile\", sBody);</p>\n\n<p>log cat would return the binary code that javascript sent java</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":8491545,"reputation":2041,"user_id":6367716,"display_name":"DBX12"},"score":0,"creation_date":1499430699,"post_id":44970776,"comment_id":76916276,"body_markdown":"Creating a new &quot;standard&quot; is not the solution these days. It makes it hard to make your documents work with other software. Which is a bad idea, because no one will use software which you get locked into.","body":"Creating a new &quot;standard&quot; is not the solution these days. It makes it hard to make your documents work with other software. Which is a bad idea, because no one will use software which you get locked into."},{"owner":{"account_id":6430849,"reputation":5,"user_id":4984093,"display_name":"sandy Roy"},"score":0,"creation_date":1499434733,"post_id":44970776,"comment_id":76919190,"body_markdown":"my file can be open with my program, not with other as MS-Word can&#39;t be opened with other programs. does it need to create any encoding scheme to read and write my file.","body":"my file can be open with my program, not with other as MS-Word can&#39;t be opened with other programs. does it need to create any encoding scheme to read and write my file."},{"owner":{"account_id":8491545,"reputation":2041,"user_id":6367716,"display_name":"DBX12"},"score":0,"creation_date":1499457768,"post_id":44970776,"comment_id":76932844,"body_markdown":"&quot;so that this soft of file can only be read by my programs.&quot; sounds like a custom encoding scheme to me","body":"&quot;so that this soft of file can only be read by my programs.&quot; sounds like a custom encoding scheme to me"}],"answers":[{"tags":[],"owner":{"account_id":4042580,"reputation":736,"user_id":3324924,"accept_rate":77,"display_name":"Sameen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1499430943,"creation_date":1499430943,"answer_id":44970941,"question_id":44970776,"body_markdown":"Your requirement seems ambiguous. Are you looking to make a program that creates MS Office Word documents or plain text files with a custom file extension?\r\n\r\nIn the case of the former, you can&#39;t have a custom extension as MS Word documents, by definition, have a .doc / .docx extension. \r\n\r\nHowever, if you are looking to create a program that produces text files then you can easily have a custom extension. Just look at this tutorial: [How to create a file in Java][1]\r\n\r\n\r\n  [1]: https://www.mkyong.com/java/how-to-create-a-file-in-java/","title":"How to save file with custom file extension in java?","body":"<p>Your requirement seems ambiguous. Are you looking to make a program that creates MS Office Word documents or plain text files with a custom file extension?</p>\n\n<p>In the case of the former, you can't have a custom extension as MS Word documents, by definition, have a .doc / .docx extension. </p>\n\n<p>However, if you are looking to create a program that produces text files then you can easily have a custom extension. Just look at this tutorial: <a href=\"https://www.mkyong.com/java/how-to-create-a-file-in-java/\" rel=\"nofollow noreferrer\">How to create a file in Java</a></p>\n"},{"tags":[],"owner":{"account_id":8491545,"reputation":2041,"user_id":6367716,"display_name":"DBX12"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1499431067,"creation_date":1499431067,"answer_id":44970981,"question_id":44970776,"body_markdown":"I already stated why this is a bad idea. Yet I have a solution for you (more like a how-not-to-do-it)\r\n\r\nTake your plain text you want to save, convert it to bytes and apply this &quot;highly enthusiastic encryption nobody will ever be able to break&quot; on it:\r\n\r\n    string plainText = &quot;yadayada&quot;;\r\n    bytes[] bytesFromText = toBytes(plainText);\r\n    bytes[] encrypted = new Array(sizeof(bytesFromText)*2);\r\n    for(int i = 0; i &lt; sizeof(bytesFromText); i++){\r\n        if((i modulo 2) == 0){\r\n            encrypted.push(toByte(Math.random modulo 255));\r\n        }\r\n        encrypted.push(bytesFromText[i]);\r\n    }\r\n\r\nI let it up to you to figure out why this is a bad idea and how to decrypt it. ;)\r\n\r\n   ","title":"How to save file with custom file extension in java?","body":"<p>I already stated why this is a bad idea. Yet I have a solution for you (more like a how-not-to-do-it)</p>\n\n<p>Take your plain text you want to save, convert it to bytes and apply this \"highly enthusiastic encryption nobody will ever be able to break\" on it:</p>\n\n<pre><code>string plainText = \"yadayada\";\nbytes[] bytesFromText = toBytes(plainText);\nbytes[] encrypted = new Array(sizeof(bytesFromText)*2);\nfor(int i = 0; i &lt; sizeof(bytesFromText); i++){\n    if((i modulo 2) == 0){\n        encrypted.push(toByte(Math.random modulo 255));\n    }\n    encrypted.push(bytesFromText[i]);\n}\n</code></pre>\n\n<p>I let it up to you to figure out why this is a bad idea and how to decrypt it. ;)</p>\n"},{"tags":[],"owner":{"account_id":482157,"reputation":589,"user_id":896369,"display_name":"Darshit Chokshi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1499433268,"creation_date":1499433268,"answer_id":44971712,"question_id":44970776,"body_markdown":"You can create file with any extension \r\n\r\nFor example,\r\n\r\n    File f = new File(&quot;confidential.sad&quot;);\r\n\r\nHope this will work for you :)","title":"How to save file with custom file extension in java?","body":"<p>You can create file with any extension </p>\n\n<p>For example,</p>\n\n<pre><code>File f = new File(\"confidential.sad\");\n</code></pre>\n\n<p>Hope this will work for you :)</p>\n"},{"tags":[],"owner":{"account_id":13752789,"reputation":128,"user_id":9924483,"display_name":"Kamran Siddique"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593828151,"creation_date":1593828151,"answer_id":62724569,"question_id":44970776,"body_markdown":"# Working with custom files in Java #\r\nHere is the tutorial that will help you in getting the concept about how to create your own files with custom extension such as .doc or .sad with some information embedded in it and after saving the file you want to read that information form the file.  \r\n&gt;# ZIP #\r\n&gt;Similar applications often use archives to store data. Consider MS-Word and its documents &gt;with the .docx file extension. If you change the extension of any .docx file to .zip, you &gt;will find that the document is actually a zip archive, with only a different extension.\r\n\r\nhttps://www.ict.social/java/files/working-with-custom-files-in-java-zip-archive","title":"How to save file with custom file extension in java?","body":"<h1>Working with custom files in Java</h1>\n<p>Here is the tutorial that will help you in getting the concept about how to create your own files with custom extension such as .doc or .sad with some information embedded in it and after saving the file you want to read that information form the file.</p>\n<blockquote>\n<h1>ZIP</h1>\n<p>Similar applications often use archives to store data. Consider MS-Word and its documents &gt;with the .docx file extension. If you change the extension of any .docx file to .zip, you &gt;will find that the document is actually a zip archive, with only a different extension.</p>\n</blockquote>\n<p><a href=\"https://www.ict.social/java/files/working-with-custom-files-in-java-zip-archive\" rel=\"nofollow noreferrer\">https://www.ict.social/java/files/working-with-custom-files-in-java-zip-archive</a></p>\n"},{"tags":[],"owner":{"account_id":22380441,"reputation":29,"user_id":16594125,"display_name":"Abdel Wadoud"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659298204,"creation_date":1659298204,"answer_id":73186582,"question_id":44970776,"body_markdown":"I have published a library that saves files, and handles everything with one line of code only, you can find it here along with its documentation\r\n\r\n[Github repository][1]\r\n\r\n\r\n  [1]: https://github.com/rasmi-aw/StorageManager\r\n\r\nand the answer to your question is so easy\r\n\r\n    String path = FileSaver\r\n            .get()\r\n            .save(file,&quot;file.custom&quot;);","title":"How to save file with custom file extension in java?","body":"<p>I have published a library that saves files, and handles everything with one line of code only, you can find it here along with its documentation</p>\n<p><a href=\"https://github.com/rasmi-aw/StorageManager\" rel=\"nofollow noreferrer\">Github repository</a></p>\n<p>and the answer to your question is so easy</p>\n<pre><code>String path = FileSaver\n        .get()\n        .save(file,&quot;file.custom&quot;);\n</code></pre>\n"}],"owner":{"account_id":6430849,"reputation":5,"user_id":4984093,"display_name":"sandy Roy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4647,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"answer_count":5,"score":-4,"last_activity_date":1659298204,"creation_date":1499430477,"question_id":44970776,"body_markdown":"Dear brothers Hope you all right?\r\nI&#39;m designing a document program, however, rather to save file .text extension or using any other MS-Office API in java, i want to create my custom file format such as &quot;.sad&quot; extension so that this sort of file can only be read by my programs, how this can be possible?","title":"How to save file with custom file extension in java?","body":"<p>Dear brothers Hope you all right?\nI'm designing a document program, however, rather to save file .text extension or using any other MS-Office API in java, i want to create my custom file format such as \".sad\" extension so that this sort of file can only be read by my programs, how this can be possible?</p>\n"},{"tags":["java","pdf","xls"],"comments":[{"owner":{"account_id":8766622,"reputation":1498,"user_id":6554747,"accept_rate":100,"display_name":"progyammer"},"score":1,"creation_date":1474287036,"post_id":39572244,"comment_id":66455264,"body_markdown":"Unless you paste your code (and also, preferably, the expected and obtained outputs), you can&#39;t find help.","body":"Unless you paste your code (and also, preferably, the expected and obtained outputs), you can&#39;t find help."}],"answers":[{"tags":[],"owner":{"account_id":7397520,"reputation":3703,"user_id":5628922,"accept_rate":100,"display_name":"mhasan"},"down_vote_count":3,"up_vote_count":6,"is_accepted":false,"score":3,"last_activity_date":1474285920,"creation_date":1474285920,"answer_id":39572526,"question_id":39572244,"body_markdown":"Not sure, please provide more details , share code so that the answer can be more precise, but for code perspective it can  be achieved via Apache POI.something like below ....\r\n\r\n     //Instantiate a new workbook with excel file path\r\n    Workbook workbook = new Workbook(&quot;F:\\\\FileTemp\\\\Book1.xls&quot;);\r\n    \r\n    //Save the document in Pdf format\r\n    workbook.save(&quot;F:\\\\FileTemp\\\\MyPdfFile.pdf&quot;, FileFormatType.PDF);","title":"Java save xls file as PDF","body":"<p>Not sure, please provide more details , share code so that the answer can be more precise, but for code perspective it can  be achieved via Apache POI.something like below ....</p>\n\n<pre><code> //Instantiate a new workbook with excel file path\nWorkbook workbook = new Workbook(\"F:\\\\FileTemp\\\\Book1.xls\");\n\n//Save the document in Pdf format\nworkbook.save(\"F:\\\\FileTemp\\\\MyPdfFile.pdf\", FileFormatType.PDF);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22380441,"reputation":29,"user_id":16594125,"display_name":"Abdel Wadoud"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659297955,"creation_date":1659297955,"answer_id":73186550,"question_id":39572244,"body_markdown":"I have published a library that saves files, and handles everything with one line of code only, you can find it here along with its documentation\r\n\r\n[Github repository][1]\r\n\r\n\r\n  [1]: https://github.com/rasmi-aw/StorageManager\r\n\r\nand the answer to your question is so easy\r\n\r\n    String path = FileSaver\r\n            .get()\r\n            .save(fileXls,&quot;file.pdf&quot;);","title":"Java save xls file as PDF","body":"<p>I have published a library that saves files, and handles everything with one line of code only, you can find it here along with its documentation</p>\n<p><a href=\"https://github.com/rasmi-aw/StorageManager\" rel=\"nofollow noreferrer\">Github repository</a></p>\n<p>and the answer to your question is so easy</p>\n<pre><code>String path = FileSaver\n        .get()\n        .save(fileXls,&quot;file.pdf&quot;);\n</code></pre>\n"}],"owner":{"account_id":3530666,"reputation":55,"user_id":2950329,"accept_rate":20,"display_name":"user2950329"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9534,"favorite_count":0,"down_vote_count":3,"up_vote_count":3,"answer_count":2,"score":0,"last_activity_date":1659297955,"creation_date":1474285012,"question_id":39572244,"body_markdown":"I have a simple java program that creates .xls file (open office excel file), and I want to save it as pdf. I saw some answers here but none of them worked for me. Is there a simple and free way to do so?\r\nThe file contains only 1 page of .xls\r\n\r\nThanks","title":"Java save xls file as PDF","body":"<p>I have a simple java program that creates .xls file (open office excel file), and I want to save it as pdf. I saw some answers here but none of them worked for me. Is there a simple and free way to do so?\nThe file contains only 1 page of .xls</p>\n\n<p>Thanks</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":3210601,"reputation":516,"user_id":2710704,"display_name":"Tokazio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1475149350,"creation_date":1475149350,"answer_id":39769352,"question_id":39769182,"body_markdown":"Use Files.copy(source, target, REPLACE_EXISTING);\r\n\r\nhttps://docs.oracle.com/javase/tutorial/essential/io/copy.html","title":"Java save mp3 file","body":"<p>Use Files.copy(source, target, REPLACE_EXISTING);</p>\n\n<p><a href=\"https://docs.oracle.com/javase/tutorial/essential/io/copy.html\" rel=\"nofollow\">https://docs.oracle.com/javase/tutorial/essential/io/copy.html</a></p>\n"},{"tags":[],"owner":{"account_id":1927021,"reputation":52,"user_id":1737203,"display_name":"Lennart"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1475149355,"creation_date":1475149355,"answer_id":39769355,"question_id":39769182,"body_markdown":"Try it like this: \r\n    \r\n    File f = new File(&quot;H:\\\\TestFolder\\\\test.mp3&quot;);\r\n    InputStream is = new FileInputStream(f);\r\n\r\n    OutputStream outstream = new FileOutputStream(new File(&quot;H:\\\\TestFolder2\\\\blabla.mp3&quot;));\r\n    byte[] buffer = new byte[4096];\r\n    int len;\r\n    while ((len = is.read(buffer)) &gt; 0) {\r\n        outstream.write(buffer, 0, len);\r\n    }\r\n    outstream.close();","title":"Java save mp3 file","body":"<p>Try it like this: </p>\n\n<pre><code>File f = new File(\"H:\\\\TestFolder\\\\test.mp3\");\nInputStream is = new FileInputStream(f);\n\nOutputStream outstream = new FileOutputStream(new File(\"H:\\\\TestFolder2\\\\blabla.mp3\"));\nbyte[] buffer = new byte[4096];\nint len;\nwhile ((len = is.read(buffer)) &gt; 0) {\n    outstream.write(buffer, 0, len);\n}\noutstream.close();\n</code></pre>\n"}],"owner":{"account_id":7036865,"reputation":25,"user_id":5390643,"accept_rate":60,"display_name":"Alexander Kirwan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1545,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1659297748,"creation_date":1475148942,"question_id":39769182,"body_markdown":"I am trying to create import images and mp3 files from one directory using a file chooser and save them to another . The images went fine but I cant seem to find out how to save the mp3 file .\r\n\r\n**Images**\r\n\r\n    @Override\r\n     public void saveFile(File file) {\r\n      //Get image path\r\n      String imagePath = file.getAbsolutePath();\r\n      String imageName = file.getName();\r\n      System.out.println(imagePath);\r\n    \r\n      //Read image\r\n      try {\r\n       bufferedImage = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);\r\n       bufferedImage = ImageIO.read(new File(imagePath));\r\n       System.out.println(&quot;Reading complete.&quot;);\r\n      } catch (IOException e) {\r\n       System.out.println(&quot;Error: &quot; + e);\r\n      }\r\n    \r\n      //write image\r\n      try {\r\n       f = new File(&quot;H:\\\\TestFolder\\\\images\\\\&quot; + imageName); //output file path\r\n       ImageIO.write(bufferedImage, &quot;jpg&quot;, f);\r\n       System.out.println(&quot;Writing complete.&quot;);\r\n      } catch (IOException e) {\r\n       System.out.println(&quot;Error: &quot; + e);\r\n      }\r\n     }\r\n\r\n**Mp3**\r\n\r\n    @Override\r\n    public void saveFile(File file) {\r\n    \t\r\n    \ttry{\r\n    \t\tf = new File(file, &quot;H:\\\\TestFolder\\\\test.mp3&quot;); //file.getAbsolutePath();\r\n    \t\t\r\n    \t}catch (Exception e) {\r\n    \t\te.printStackTrace();\r\n    \t}\r\n    \t\r\n    }","title":"Java save mp3 file","body":"<p>I am trying to create import images and mp3 files from one directory using a file chooser and save them to another . The images went fine but I cant seem to find out how to save the mp3 file .</p>\n\n<p><strong>Images</strong></p>\n\n<pre><code>@Override\n public void saveFile(File file) {\n  //Get image path\n  String imagePath = file.getAbsolutePath();\n  String imageName = file.getName();\n  System.out.println(imagePath);\n\n  //Read image\n  try {\n   bufferedImage = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);\n   bufferedImage = ImageIO.read(new File(imagePath));\n   System.out.println(\"Reading complete.\");\n  } catch (IOException e) {\n   System.out.println(\"Error: \" + e);\n  }\n\n  //write image\n  try {\n   f = new File(\"H:\\\\TestFolder\\\\images\\\\\" + imageName); //output file path\n   ImageIO.write(bufferedImage, \"jpg\", f);\n   System.out.println(\"Writing complete.\");\n  } catch (IOException e) {\n   System.out.println(\"Error: \" + e);\n  }\n }\n</code></pre>\n\n<p><strong>Mp3</strong></p>\n\n<pre><code>@Override\npublic void saveFile(File file) {\n\n    try{\n        f = new File(file, \"H:\\\\TestFolder\\\\test.mp3\"); //file.getAbsolutePath();\n\n    }catch (Exception e) {\n        e.printStackTrace();\n    }\n\n}\n</code></pre>\n"},{"tags":["java","arrays","go","jna"],"answers":[{"tags":[],"owner":{"account_id":1187908,"reputation":8617,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659297647,"creation_date":1659250114,"answer_id":73181214,"question_id":73181105,"body_markdown":"You&#39;re misunderstanding the `Pointer` constructor&#39;s argument.  It&#39;s a native peer value, not an allocation size.\r\n\r\nWhat you have:\r\n```java\r\nkeys.data[0] = new Pointer(byte1.length + 1);\r\n```\r\nFrom the `Pointer` [Javadoc][1]:\r\n&gt; `public Pointer(long peer)`\r\n&gt;\r\n&gt; Create from native pointer. Don&#39;t use this unless you know what you&#39;re doing.\r\n\r\nThe correct way to allocate new memory (which calls `malloc()` internally) is the `Memory` class which extends `Pointer`.  The argument for the `Memory` constructor [is indeed the size][2]:\r\n&gt; `public Memory(long size)`\r\n&gt; \r\n&gt; Allocate space in the native heap via a call to C&#39;s malloc.\r\n&gt;\r\n&gt; Parameters:\r\n&gt;\r\n&gt; size - number of *bytes* of space to allocate\r\n\r\nSo you want:\r\n```java\r\nkeys.data[0] = new Memory(byte1.length + 1);\r\n```\r\nOne other note:\r\n\r\n`Memory` isn&#39;t cleared on allocation, so if you want that &quot;+1&quot; null terminator you need to either `clear()` the memory or explicitly set that null byte when writing a string to it (or perhaps append a null byte to the string in Java before converting to bytes).\r\n\r\nUpdating for your follow-on questions:\r\n\r\nYou have a mismatch between the C header (which has `data` first followed by `len` and `cap` and your own `GoSlice` structure definition which puts `data` in the middle.  When you pass this to native, you are just sending the value of that initial `long` which is probably zero, and getting the `nil` pointer error.\r\n\r\nAdditionally, you are not allocating enough memory for what you&#39;re doing.  When you declare a `Structure` in JNA it allocates the memory it needs.  In your earlier version of code you used `Structure.toArray()` to allocate more memory for more structures -- this was correct (but you did it twice!).  You should do that once.\r\n\r\nIn your latest code you set `value` as just one `GoSlice` structure. That memory is just 24 bytes, for the two `long`s and the `Pointer`.  But then for your second array value you are using the original `data` (which is in the wrong order) and trying to write to a memory location that isn&#39;t even allocated.\r\n\r\nIn summary:\r\n1. Declare the field order in your Java `GoSlice` to match the native header\r\n2. Use the Structure&#39;s `toArray()` on an initial GoSlice structure to allocate space for an array of them.\r\n3. Use the `data` field of the GoSlice[n] structure to write the string values to.\r\n\r\n  [1]: http://java-native-access.github.io/jna/5.12.1/javadoc/com/sun/jna/Pointer.html#Pointer-long-\r\n  [2]: http://java-native-access.github.io/jna/5.12.1/javadoc/com/sun/jna/Memory.html#Memory-long-","title":"How can I use JNA to pass byte[][] to go","body":"<p>You're misunderstanding the <code>Pointer</code> constructor's argument.  It's a native peer value, not an allocation size.</p>\n<p>What you have:</p>\n<pre class=\"lang-java prettyprint-override\"><code>keys.data[0] = new Pointer(byte1.length + 1);\n</code></pre>\n<p>From the <code>Pointer</code> <a href=\"http://java-native-access.github.io/jna/5.12.1/javadoc/com/sun/jna/Pointer.html#Pointer-long-\" rel=\"nofollow noreferrer\">Javadoc</a>:</p>\n<blockquote>\n<p><code>public Pointer(long peer)</code></p>\n<p>Create from native pointer. Don't use this unless you know what you're doing.</p>\n</blockquote>\n<p>The correct way to allocate new memory (which calls <code>malloc()</code> internally) is the <code>Memory</code> class which extends <code>Pointer</code>.  The argument for the <code>Memory</code> constructor <a href=\"http://java-native-access.github.io/jna/5.12.1/javadoc/com/sun/jna/Memory.html#Memory-long-\" rel=\"nofollow noreferrer\">is indeed the size</a>:</p>\n<blockquote>\n<p><code>public Memory(long size)</code></p>\n<p>Allocate space in the native heap via a call to C's malloc.</p>\n<p>Parameters:</p>\n<p>size - number of <em>bytes</em> of space to allocate</p>\n</blockquote>\n<p>So you want:</p>\n<pre class=\"lang-java prettyprint-override\"><code>keys.data[0] = new Memory(byte1.length + 1);\n</code></pre>\n<p>One other note:</p>\n<p><code>Memory</code> isn't cleared on allocation, so if you want that &quot;+1&quot; null terminator you need to either <code>clear()</code> the memory or explicitly set that null byte when writing a string to it (or perhaps append a null byte to the string in Java before converting to bytes).</p>\n<p>Updating for your follow-on questions:</p>\n<p>You have a mismatch between the C header (which has <code>data</code> first followed by <code>len</code> and <code>cap</code> and your own <code>GoSlice</code> structure definition which puts <code>data</code> in the middle.  When you pass this to native, you are just sending the value of that initial <code>long</code> which is probably zero, and getting the <code>nil</code> pointer error.</p>\n<p>Additionally, you are not allocating enough memory for what you're doing.  When you declare a <code>Structure</code> in JNA it allocates the memory it needs.  In your earlier version of code you used <code>Structure.toArray()</code> to allocate more memory for more structures -- this was correct (but you did it twice!).  You should do that once.</p>\n<p>In your latest code you set <code>value</code> as just one <code>GoSlice</code> structure. That memory is just 24 bytes, for the two <code>long</code>s and the <code>Pointer</code>.  But then for your second array value you are using the original <code>data</code> (which is in the wrong order) and trying to write to a memory location that isn't even allocated.</p>\n<p>In summary:</p>\n<ol>\n<li>Declare the field order in your Java <code>GoSlice</code> to match the native header</li>\n<li>Use the Structure's <code>toArray()</code> on an initial GoSlice structure to allocate space for an array of them.</li>\n<li>Use the <code>data</code> field of the GoSlice[n] structure to write the string values to.</li>\n</ol>\n"}],"owner":{"account_id":24526064,"reputation":33,"user_id":18438504,"display_name":"tangrunze"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":173,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1659297647,"creation_date":1659248657,"question_id":73181105,"body_markdown":"This is **go** code\r\n```go\r\nimport (\r\n\t&quot;C&quot;\r\n\t&quot;fmt&quot;\r\n)\r\n//export Print\r\nfunc Print(keys, values [][]byte) {\r\n  for len(keys) &gt; 0 {\r\n  err := txn.Set(keys[0], values[0])\r\n  errMustBeNil(err)\r\n  fmt.Printf(&quot;%s %s&quot;, string(keys[0]), string(values[0]))\r\n  keys = keys[1:]\r\n  values = values[1:]\r\n }\r\n}\r\n```\r\n\r\nThis is **libPrint.h**\r\n```h\r\n/*\r\n  static assertion to make sure the file is being used on architecture\r\n  at least with matching size of GoInt.\r\n*/\r\ntypedef char _check_for_64_bit_pointer_matching_GoInt[sizeof(void*)==64/8 ? 1:-1];\r\n\r\n#ifndef GO_CGO_GOSTRING_TYPEDEF\r\ntypedef _GoString_ GoString;\r\n#endif\r\ntypedef void *GoMap;\r\ntypedef void *GoChan;\r\ntypedef struct { void *t; void *v; } GoInterface;\r\ntypedef struct { void *data; GoInt len; GoInt cap; } GoSlice;\r\n\r\n#endif\r\n\r\n/* End of boilerplate cgo prologue.  */\r\n\r\n#ifdef __cplusplus\r\nextern &quot;C&quot; {\r\n#endif\r\n\r\nextern void Print(GoSlice keys, GoSlice values);\r\n\r\n#ifdef __cplusplus\r\n}\r\n#endif\r\n```\r\nThis is my **Java** code,I want to put byte[] into pointer one by one,``GoSlice`` is represents the array[] in `go`,I don&#39;t know if this is correct\r\n```java\r\npublic interface Test extends Library {\r\n  Test TEST = (Test) Native.load(&quot;Print&quot;, Test.class);\r\n\r\n  void Print(GoSlice key, GoSlice val);\r\n\r\n  class GoSlice extends Structure {\r\n    public Pointer[] data;\r\n    public long len;\r\n    public long cap;\r\n  }\r\n  static void main(String[] args) {\r\n    byte[] byte1 = &quot;key1&quot;.getBytes(StandardCharsets.UTF_8);\r\n    byte[] byte2 = &quot;value1new&quot;.getBytes(StandardCharsets.UTF_8);\r\n\r\n    GoSlice keys = new GoSlice();\r\n    keys.data = new Pointer[1];\r\n    keys.data[0] = new Pointer(byte1.length + 1);\r\n    keys.len = 1;\r\n    keys.cap = 1;\r\n\r\n    GoSlice values = new GoSlice();\r\n    values.data = new Pointer[1];\r\n    keys.data[0] = new Pointer(byte2.length + 1);\r\n    values.len = 1;\r\n    values.cap = 1;\r\n\r\n    keys.data[0].write(0, byte1, 0, byte1.length);\r\n    values.data[0].write(0, byte2, 0, byte2.length);\r\n\r\n    Test.TEST.Print(keys, values);\r\n  }\r\n}\r\n```\r\nBut it doesn&#39;t work correctly,I feel that byte[][] is not correctly converted to the type in go.\r\n\r\n&gt; This is the console log after running the Java program\r\n\r\n```log\r\n#\r\n# A fatal error has been detected by the Java Runtime Environment:\r\n#\r\n#  SIGSEGV (0xb) at pc=0x00000001a2775a34, pid=64329, tid=0x0000000000002903\r\n#\r\n# JRE version: OpenJDK Runtime Environment (Zulu 8.62.0.19-CA-macos-aarch64) (8.0_332-b09) (build 1.8.0_332-b09)\r\n# Java VM: OpenJDK 64-Bit Server VM (25.332-b09 mixed mode bsd-aarch64 compressed oops)\r\n# Problematic frame:\r\n# C  [libsystem_platform.dylib+0x3a34]  _platform_memmove+0xf4\r\n#\r\n# Failed to write core dump. Core dumps have been disabled. To enable core dumping, try &quot;ulimit -c unlimited&quot; before starting Java again\r\n#\r\n# An error report file with more information is saved as:\r\n# /Users/user/project/hs_err_pid64329.log\r\n#\r\n# If you would like to submit a bug report, please visit:\r\n#   http://www.azul.com/support/\r\n#\r\n```\r\n\r\n**This is my first change**\r\n```java\r\npublic interface TxnClient extends Library {\r\n  TxnClient TNX_CLIENT = (TxnClient) Native.load(&quot;Tikv&quot;, TxnClient.class);\r\n\r\n  int TxnSave(GoSlice[] key, GoSlice[] val);\r\n\r\n  class GoSlice extends Structure {\r\n    public long cap;\r\n    public Pointer data;\r\n    public long len;\r\n\r\n    @Override\r\n    protected List&lt;String&gt; getFieldOrder() {\r\n      return Arrays.asList(&quot;cap&quot;, &quot;data&quot;, &quot;len&quot;);\r\n    }\r\n  }\r\n\r\n  static void main(String[] args) {\r\n    byte[] key1 = &quot;key1&quot;.getBytes(StandardCharsets.UTF_8);\r\n    byte[] value1 = &quot;value1new&quot;.getBytes(StandardCharsets.UTF_8);\r\n    byte[] key2 = &quot;key2&quot;.getBytes(StandardCharsets.UTF_8);\r\n    byte[] value2 = &quot;value2new&quot;.getBytes(StandardCharsets.UTF_8);\r\n\r\n    GoSlice tmp = new GoSlice();\r\n    GoSlice[] keys = (GoSlice[]) tmp.toArray(2);\r\n    keys[0].data = new Memory(key1.length + 1);\r\n    keys[0].len = keys[0].cap = key1.length;\r\n    keys[0].data.write(0, key1, 0, key1.length);\r\n\r\n    keys[1].data = new Memory(key2.length + 1);\r\n    keys[1].len = keys[1].cap = key2.length;\r\n    keys[1].data.write(0, key2, 0, key2.length);\r\n\r\n    GoSlice[] values = (GoSlice[]) tmp.toArray(2);\r\n    values[0].data = new Memory(value1.length + 1);\r\n    values[0].len = values[0].cap = value1.length;\r\n    values[0].data.write(0, value1, 0, value1.length);\r\n\r\n    values[1].data = new Memory(value2.length + 1);\r\n    values[1].len = values[1].cap = value2.length;\r\n    values[1].data.write(0, value2, 0, value2.length);\r\n\r\n    int i = TxnClient.TNX_CLIENT.TxnSave(keys, values);\r\n    System.out.println(i);\r\n  }\r\n}\r\n```\r\n```log\r\n5431788016 5431788016panic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x2 addr=0x9 pc=0x1225b2b80]\r\n\r\ngoroutine 17 [running, locked to thread]:\r\nmain.TxnSave({0x9, 0x143c281f0, 0x14000182000?}, {0x9, 0x143c281f0, 0x121daf2c8?})\r\n\t/Users/user/project/print.go:52 +0x180\r\n```\r\n**second change**\r\n```go\r\n//export TxnSave\r\nfunc TxnSave(keys, values [][]byte) (res int) {\r\n // ignore\r\n}\r\n```\r\n```java\r\npublic interface TxnClient extends Library {\r\n  TxnClient TNX_CLIENT = (TxnClient) Native.load(&quot;Tikv&quot;, TxnClient.class);\r\n\r\n  int TxnSave(GoSlice key, GoSlice val);\r\n\r\n  class GoSlice extends Structure {\r\n    public long cap;\r\n    public Pointer data;\r\n    public long len;\r\n\r\n    @Override\r\n    protected List&lt;String&gt; getFieldOrder() {\r\n      return Arrays.asList(&quot;cap&quot;, &quot;data&quot;, &quot;len&quot;);\r\n    }\r\n  }\r\n\r\n  static void main(String[] args) {\r\n    byte[] key1 = &quot;key1&quot;.getBytes(StandardCharsets.UTF_8);\r\n    byte[] value1 = &quot;value1new&quot;.getBytes(StandardCharsets.UTF_8);\r\n    byte[] key2 = &quot;key2&quot;.getBytes(StandardCharsets.UTF_8);\r\n    byte[] value2 = &quot;value2new&quot;.getBytes(StandardCharsets.UTF_8);\r\n\r\n    GoSlice keys = new GoSlice();\r\n    keys.data = new Memory(key1.length + key2.length + 1);\r\n    keys.data.write(0, key1, 0, key1.length);\r\n    keys.len = keys.cap = key1.length + key2.length;\r\n    keys.data.write(key1.length, key2, 0, key2.length);\r\n\r\n    GoSlice values = new GoSlice();\r\n    values.data = new Memory(value1.length + value2.length + 1);\r\n    values.len = values.cap = value1.length + value2.length;\r\n    values.data.write(0, value1, 0, value1.length);\r\n    values.data.write(value1.length, value2, 0, value2.length);\r\n\r\n    int i = TxnClient.TNX_CLIENT.TxnSave(keys, values);\r\n    System.out.println(i);\r\n  }\r\n}\r\n```\r\n```log\r\n[2022/07/31 22:36:57.225 +08:00] [INFO] [client.go:378] [&quot;[pd] create pd client with endpoints&quot;] [pd-address=&quot;[127.0.0.1:2379]&quot;]\r\n[2022/07/31 22:36:57.228 +08:00] [INFO] [base_client.go:350] [&quot;[pd] switch leader&quot;] [new-leader=http://127.0.0.1:2379] [old-leader=]\r\n[2022/07/31 22:36:57.228 +08:00] [INFO] [base_client.go:105] [&quot;[pd] init cluster id&quot;] [cluster-id=7126545341327379321]\r\n[2022/07/31 22:36:57.228 +08:00] [INFO] [client.go:673] [&quot;[pd] tso dispatcher created&quot;] [dc-location=global]\r\n\r\n4981923696 4981923392panic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x2 addr=0x8 pc=0x12b00a6e0]\r\n// this is error\r\ngoroutine 17 [running, locked to thread]:\r\nmain.TxnSave({0x8, 0x128f21f70, 0x14000190000?}, {0x12, 0x128f21e40, 0x12a806d38?})\r\n\t/Users/user/go-tikv/tikv.go:53 +0x180\r\n```","title":"How can I use JNA to pass byte[][] to go","body":"<p>This is <strong>go</strong> code</p>\n<pre class=\"lang-golang prettyprint-override\"><code>import (\n    &quot;C&quot;\n    &quot;fmt&quot;\n)\n//export Print\nfunc Print(keys, values [][]byte) {\n  for len(keys) &gt; 0 {\n  err := txn.Set(keys[0], values[0])\n  errMustBeNil(err)\n  fmt.Printf(&quot;%s %s&quot;, string(keys[0]), string(values[0]))\n  keys = keys[1:]\n  values = values[1:]\n }\n}\n</code></pre>\n<p>This is <strong>libPrint.h</strong></p>\n<pre><code>/*\n  static assertion to make sure the file is being used on architecture\n  at least with matching size of GoInt.\n*/\ntypedef char _check_for_64_bit_pointer_matching_GoInt[sizeof(void*)==64/8 ? 1:-1];\n\n#ifndef GO_CGO_GOSTRING_TYPEDEF\ntypedef _GoString_ GoString;\n#endif\ntypedef void *GoMap;\ntypedef void *GoChan;\ntypedef struct { void *t; void *v; } GoInterface;\ntypedef struct { void *data; GoInt len; GoInt cap; } GoSlice;\n\n#endif\n\n/* End of boilerplate cgo prologue.  */\n\n#ifdef __cplusplus\nextern &quot;C&quot; {\n#endif\n\nextern void Print(GoSlice keys, GoSlice values);\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n<p>This is my <strong>Java</strong> code,I want to put byte[] into pointer one by one,<code>GoSlice</code> is represents the array[] in <code>go</code>,I don't know if this is correct</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Test extends Library {\n  Test TEST = (Test) Native.load(&quot;Print&quot;, Test.class);\n\n  void Print(GoSlice key, GoSlice val);\n\n  class GoSlice extends Structure {\n    public Pointer[] data;\n    public long len;\n    public long cap;\n  }\n  static void main(String[] args) {\n    byte[] byte1 = &quot;key1&quot;.getBytes(StandardCharsets.UTF_8);\n    byte[] byte2 = &quot;value1new&quot;.getBytes(StandardCharsets.UTF_8);\n\n    GoSlice keys = new GoSlice();\n    keys.data = new Pointer[1];\n    keys.data[0] = new Pointer(byte1.length + 1);\n    keys.len = 1;\n    keys.cap = 1;\n\n    GoSlice values = new GoSlice();\n    values.data = new Pointer[1];\n    keys.data[0] = new Pointer(byte2.length + 1);\n    values.len = 1;\n    values.cap = 1;\n\n    keys.data[0].write(0, byte1, 0, byte1.length);\n    values.data[0].write(0, byte2, 0, byte2.length);\n\n    Test.TEST.Print(keys, values);\n  }\n}\n</code></pre>\n<p>But it doesn't work correctly,I feel that byte[][] is not correctly converted to the type in go.</p>\n<blockquote>\n<p>This is the console log after running the Java program</p>\n</blockquote>\n<pre><code>#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x00000001a2775a34, pid=64329, tid=0x0000000000002903\n#\n# JRE version: OpenJDK Runtime Environment (Zulu 8.62.0.19-CA-macos-aarch64) (8.0_332-b09) (build 1.8.0_332-b09)\n# Java VM: OpenJDK 64-Bit Server VM (25.332-b09 mixed mode bsd-aarch64 compressed oops)\n# Problematic frame:\n# C  [libsystem_platform.dylib+0x3a34]  _platform_memmove+0xf4\n#\n# Failed to write core dump. Core dumps have been disabled. To enable core dumping, try &quot;ulimit -c unlimited&quot; before starting Java again\n#\n# An error report file with more information is saved as:\n# /Users/user/project/hs_err_pid64329.log\n#\n# If you would like to submit a bug report, please visit:\n#   http://www.azul.com/support/\n#\n</code></pre>\n<p><strong>This is my first change</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface TxnClient extends Library {\n  TxnClient TNX_CLIENT = (TxnClient) Native.load(&quot;Tikv&quot;, TxnClient.class);\n\n  int TxnSave(GoSlice[] key, GoSlice[] val);\n\n  class GoSlice extends Structure {\n    public long cap;\n    public Pointer data;\n    public long len;\n\n    @Override\n    protected List&lt;String&gt; getFieldOrder() {\n      return Arrays.asList(&quot;cap&quot;, &quot;data&quot;, &quot;len&quot;);\n    }\n  }\n\n  static void main(String[] args) {\n    byte[] key1 = &quot;key1&quot;.getBytes(StandardCharsets.UTF_8);\n    byte[] value1 = &quot;value1new&quot;.getBytes(StandardCharsets.UTF_8);\n    byte[] key2 = &quot;key2&quot;.getBytes(StandardCharsets.UTF_8);\n    byte[] value2 = &quot;value2new&quot;.getBytes(StandardCharsets.UTF_8);\n\n    GoSlice tmp = new GoSlice();\n    GoSlice[] keys = (GoSlice[]) tmp.toArray(2);\n    keys[0].data = new Memory(key1.length + 1);\n    keys[0].len = keys[0].cap = key1.length;\n    keys[0].data.write(0, key1, 0, key1.length);\n\n    keys[1].data = new Memory(key2.length + 1);\n    keys[1].len = keys[1].cap = key2.length;\n    keys[1].data.write(0, key2, 0, key2.length);\n\n    GoSlice[] values = (GoSlice[]) tmp.toArray(2);\n    values[0].data = new Memory(value1.length + 1);\n    values[0].len = values[0].cap = value1.length;\n    values[0].data.write(0, value1, 0, value1.length);\n\n    values[1].data = new Memory(value2.length + 1);\n    values[1].len = values[1].cap = value2.length;\n    values[1].data.write(0, value2, 0, value2.length);\n\n    int i = TxnClient.TNX_CLIENT.TxnSave(keys, values);\n    System.out.println(i);\n  }\n}\n</code></pre>\n<pre><code>5431788016 5431788016panic: runtime error: invalid memory address or nil pointer dereference\n[signal SIGSEGV: segmentation violation code=0x2 addr=0x9 pc=0x1225b2b80]\n\ngoroutine 17 [running, locked to thread]:\nmain.TxnSave({0x9, 0x143c281f0, 0x14000182000?}, {0x9, 0x143c281f0, 0x121daf2c8?})\n    /Users/user/project/print.go:52 +0x180\n</code></pre>\n<p><strong>second change</strong></p>\n<pre class=\"lang-golang prettyprint-override\"><code>//export TxnSave\nfunc TxnSave(keys, values [][]byte) (res int) {\n // ignore\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public interface TxnClient extends Library {\n  TxnClient TNX_CLIENT = (TxnClient) Native.load(&quot;Tikv&quot;, TxnClient.class);\n\n  int TxnSave(GoSlice key, GoSlice val);\n\n  class GoSlice extends Structure {\n    public long cap;\n    public Pointer data;\n    public long len;\n\n    @Override\n    protected List&lt;String&gt; getFieldOrder() {\n      return Arrays.asList(&quot;cap&quot;, &quot;data&quot;, &quot;len&quot;);\n    }\n  }\n\n  static void main(String[] args) {\n    byte[] key1 = &quot;key1&quot;.getBytes(StandardCharsets.UTF_8);\n    byte[] value1 = &quot;value1new&quot;.getBytes(StandardCharsets.UTF_8);\n    byte[] key2 = &quot;key2&quot;.getBytes(StandardCharsets.UTF_8);\n    byte[] value2 = &quot;value2new&quot;.getBytes(StandardCharsets.UTF_8);\n\n    GoSlice keys = new GoSlice();\n    keys.data = new Memory(key1.length + key2.length + 1);\n    keys.data.write(0, key1, 0, key1.length);\n    keys.len = keys.cap = key1.length + key2.length;\n    keys.data.write(key1.length, key2, 0, key2.length);\n\n    GoSlice values = new GoSlice();\n    values.data = new Memory(value1.length + value2.length + 1);\n    values.len = values.cap = value1.length + value2.length;\n    values.data.write(0, value1, 0, value1.length);\n    values.data.write(value1.length, value2, 0, value2.length);\n\n    int i = TxnClient.TNX_CLIENT.TxnSave(keys, values);\n    System.out.println(i);\n  }\n}\n</code></pre>\n<pre><code>[2022/07/31 22:36:57.225 +08:00] [INFO] [client.go:378] [&quot;[pd] create pd client with endpoints&quot;] [pd-address=&quot;[127.0.0.1:2379]&quot;]\n[2022/07/31 22:36:57.228 +08:00] [INFO] [base_client.go:350] [&quot;[pd] switch leader&quot;] [new-leader=http://127.0.0.1:2379] [old-leader=]\n[2022/07/31 22:36:57.228 +08:00] [INFO] [base_client.go:105] [&quot;[pd] init cluster id&quot;] [cluster-id=7126545341327379321]\n[2022/07/31 22:36:57.228 +08:00] [INFO] [client.go:673] [&quot;[pd] tso dispatcher created&quot;] [dc-location=global]\n\n4981923696 4981923392panic: runtime error: invalid memory address or nil pointer dereference\n[signal SIGSEGV: segmentation violation code=0x2 addr=0x8 pc=0x12b00a6e0]\n// this is error\ngoroutine 17 [running, locked to thread]:\nmain.TxnSave({0x8, 0x128f21f70, 0x14000190000?}, {0x12, 0x128f21e40, 0x12a806d38?})\n    /Users/user/go-tikv/tikv.go:53 +0x180\n</code></pre>\n"},{"tags":["java","file","text","save","multiline"],"answers":[{"tags":[],"owner":{"account_id":78814,"reputation":715,"user_id":224018,"display_name":"Helter Scelter"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1299717950,"creation_date":1299714164,"answer_id":5253741,"question_id":5253627,"body_markdown":"depending on how you are constructing your string, you may just be running into a line ending problem.  Notepad does not support unix line endings (\\n only) it only supports windows line endings (\\n\\r). try opening your saved file using a more robust editor, and/or make sure you are using the proper line endings for your platform.  java&#39;s system property (System.getProperty(&quot;line.separator&quot;)) will get you the proper line ending for the platform that the code is running on.\r\n\r\nwhile you&#39;re building your string to be saved to the file, rather than explicitly specifying &quot;\\n&quot; or &quot;\\n\\r&quot; (or on the mac &quot;\\r&quot;) for your line endings, you would instead append the value of that system property.\r\n\r\nlike so:\r\n\r\n    String eol = System.getProperty(&quot;line.separator&quot;);\r\n\r\n    ... somewhere else in your code ...\r\n\r\n    String texttosave = &quot;Here is a line of text.&quot; + eol;\r\n\r\n    ... more code.. optionally adding lines of text .....\r\n    // call your save file method\r\n    saveFile(texttosave);\r\n\r\n\r\n","title":"Java save multiline string to text file","body":"<p>depending on how you are constructing your string, you may just be running into a line ending problem.  Notepad does not support unix line endings (\\n only) it only supports windows line endings (\\n\\r). try opening your saved file using a more robust editor, and/or make sure you are using the proper line endings for your platform.  java's system property (System.getProperty(\"line.separator\")) will get you the proper line ending for the platform that the code is running on.</p>\n\n<p>while you're building your string to be saved to the file, rather than explicitly specifying \"\\n\" or \"\\n\\r\" (or on the mac \"\\r\") for your line endings, you would instead append the value of that system property.</p>\n\n<p>like so:</p>\n\n<pre><code>String eol = System.getProperty(\"line.separator\");\n\n... somewhere else in your code ...\n\nString texttosave = \"Here is a line of text.\" + eol;\n\n... more code.. optionally adding lines of text .....\n// call your save file method\nsaveFile(texttosave);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":234263,"reputation":358,"user_id":500307,"accept_rate":100,"display_name":"bluphoenix"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1299717201,"creation_date":1299717201,"answer_id":5254121,"question_id":5253627,"body_markdown":"Yea as the previous answer mentions the System.getProperty(&quot;line.seperator&quot;). \r\n\r\nyour code doesn&#39;t show how you created String contents but since you said you were new to java I thought i&#39;d mention that in java concatenating Strings is not nice since it creates a. If you are building the String by doing this:\r\n\r\n    String contents = &quot;&quot;\r\n    contents = contents + &quot;sometext&quot; + &quot;some more text\\n&quot;\r\nThen consider using java.lang.StrinBuilder instead\r\n\r\n    StringBuilder strBuilder = new StringBuilder();\r\n    strBuilder.append(&quot;sometext&quot;).append(&quot;somre more text\\n&quot;);\r\n    ...\r\n    String contents = strBuilder.toString();\r\n\r\nAnother alternative is to stream what ever your planning to write to a file rather than building a large string and then outputting that.","title":"Java save multiline string to text file","body":"<p>Yea as the previous answer mentions the System.getProperty(\"line.seperator\"). </p>\n\n<p>your code doesn't show how you created String contents but since you said you were new to java I thought i'd mention that in java concatenating Strings is not nice since it creates a. If you are building the String by doing this:</p>\n\n<pre><code>String contents = \"\"\ncontents = contents + \"sometext\" + \"some more text\\n\"\n</code></pre>\n\n<p>Then consider using java.lang.StrinBuilder instead</p>\n\n<pre><code>StringBuilder strBuilder = new StringBuilder();\nstrBuilder.append(\"sometext\").append(\"somre more text\\n\");\n...\nString contents = strBuilder.toString();\n</code></pre>\n\n<p>Another alternative is to stream what ever your planning to write to a file rather than building a large string and then outputting that.</p>\n"},{"tags":[],"owner":{"account_id":316076,"reputation":690,"user_id":632046,"accept_rate":68,"display_name":"brainwash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1299717399,"creation_date":1299717399,"answer_id":5254143,"question_id":5253627,"body_markdown":"You could add something like:\r\n\r\n    contents = contents.replaceAll(&quot;\\\\n&quot;,&quot;\\\\n\\\\r&quot;);\r\n\r\nif notepad does not display correctly. However you might run into a different problem: at each save/load you will get multiple \\r chars. Then to avoid that at load you would have to call the same code above but with reversed parameters. This is really an ugly solution just to get the text to display properly in notepad.","title":"Java save multiline string to text file","body":"<p>You could add something like:</p>\n\n<pre><code>contents = contents.replaceAll(\"\\\\n\",\"\\\\n\\\\r\");\n</code></pre>\n\n<p>if notepad does not display correctly. However you might run into a different problem: at each save/load you will get multiple \\r chars. Then to avoid that at load you would have to call the same code above but with reversed parameters. This is really an ugly solution just to get the text to display properly in notepad.</p>\n"},{"tags":[],"owner":{"account_id":5414463,"reputation":11,"user_id":4310031,"display_name":"Paulo Brito"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1417401111,"creation_date":1417401111,"answer_id":27220864,"question_id":5253627,"body_markdown":"I had this same problem my guy friend, after much thought and research I even found a solution.\r\n\r\nYou can use the ArrayList to put all the contents of the TextArea for exemple, and send as parameter by calling the save, as the writer just wrote string lines, then we use the &quot;for&quot; line by line to write our ArrayList in the end we will be content TextArea in txt file.\r\nif something does not make sense, I&#39;m sorry is google translator and I who do not speak English.\r\n\r\nWatch the Windows Notepad, it does not always jump lines, and shows all in one line, use Wordpad ok.\r\n\r\n__________________________________________________________________\r\n\r\nprivate void SaveActionPerformed(java.awt.event.ActionEvent evt) {                                       \r\n\r\n        String NameFile = Name.getText();\r\n        ArrayList&lt; String &gt; Text = new ArrayList&lt; String &gt;();\r\n\r\n        Text.add(TextArea.getText());\r\n\r\n        SaveFile(NameFile, Text);\r\n    } \r\n\r\n_________________________________________________________________\r\n\r\npublic void SaveFile(String name, ArrayList&lt; String&gt; message) {\r\n\r\n        path = &quot;C:\\\\Users\\\\Paulo Brito\\\\Desktop\\\\&quot; + name + &quot;.txt&quot;;\r\n\r\n        File file1 = new File(path);\r\n\r\n        try {\r\n\r\n            if (!file1.exists()) {\r\n\r\n                file1.createNewFile();\r\n            }\r\n\r\n\r\n            File[] files = file1.listFiles();\r\n\r\n\r\n            FileWriter fw = new FileWriter(file1, true);\r\n\r\n            BufferedWriter bw = new BufferedWriter(fw);\r\n\r\n            for (int i = 0; i &lt; message.size(); i++) {\r\n\r\n                bw.write(message.get(i));\r\n                bw.newLine();\r\n            }\r\n\r\n            bw.close();\r\n            fw.close();\r\n\r\n            FileReader fr = new FileReader(file1);\r\n\r\n            BufferedReader br = new BufferedReader(fr);\r\n\r\n            fw = new FileWriter(file1, true);\r\n\r\n            bw = new BufferedWriter(fw);\r\n\r\n            while (br.ready()) {\r\n\r\n                String line = br.readLine();\r\n\r\n                System.out.println(line);\r\n\r\n                bw.write(line);\r\n                bw.newLine();\r\n\r\n            }\r\n            br.close();\r\n            fr.close();\r\n           \r\n        } catch (IOException ex) {\r\n            ex.printStackTrace();\r\n            JOptionPane.showMessageDialog(null, &quot;Error in&quot; + ex);        \r\n    }","title":"Java save multiline string to text file","body":"<p>I had this same problem my guy friend, after much thought and research I even found a solution.</p>\n\n<p>You can use the ArrayList to put all the contents of the TextArea for exemple, and send as parameter by calling the save, as the writer just wrote string lines, then we use the \"for\" line by line to write our ArrayList in the end we will be content TextArea in txt file.\nif something does not make sense, I'm sorry is google translator and I who do not speak English.</p>\n\n<p>Watch the Windows Notepad, it does not always jump lines, and shows all in one line, use Wordpad ok.</p>\n\n<hr>\n\n<p>private void SaveActionPerformed(java.awt.event.ActionEvent evt) {                                       </p>\n\n<pre><code>    String NameFile = Name.getText();\n    ArrayList&lt; String &gt; Text = new ArrayList&lt; String &gt;();\n\n    Text.add(TextArea.getText());\n\n    SaveFile(NameFile, Text);\n} \n</code></pre>\n\n<hr>\n\n<p>public void SaveFile(String name, ArrayList&lt; String> message) {</p>\n\n<pre><code>    path = \"C:\\\\Users\\\\Paulo Brito\\\\Desktop\\\\\" + name + \".txt\";\n\n    File file1 = new File(path);\n\n    try {\n\n        if (!file1.exists()) {\n\n            file1.createNewFile();\n        }\n\n\n        File[] files = file1.listFiles();\n\n\n        FileWriter fw = new FileWriter(file1, true);\n\n        BufferedWriter bw = new BufferedWriter(fw);\n\n        for (int i = 0; i &lt; message.size(); i++) {\n\n            bw.write(message.get(i));\n            bw.newLine();\n        }\n\n        bw.close();\n        fw.close();\n\n        FileReader fr = new FileReader(file1);\n\n        BufferedReader br = new BufferedReader(fr);\n\n        fw = new FileWriter(file1, true);\n\n        bw = new BufferedWriter(fw);\n\n        while (br.ready()) {\n\n            String line = br.readLine();\n\n            System.out.println(line);\n\n            bw.write(line);\n            bw.newLine();\n\n        }\n        br.close();\n        fr.close();\n\n    } catch (IOException ex) {\n        ex.printStackTrace();\n        JOptionPane.showMessageDialog(null, \"Error in\" + ex);        \n}\n</code></pre>\n"}],"owner":{"account_id":319303,"reputation":517,"user_id":636997,"accept_rate":92,"display_name":"JT White"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8744,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":5253741,"answer_count":4,"score":2,"last_activity_date":1659297257,"creation_date":1299713394,"question_id":5253627,"body_markdown":"I am new to Java and trying to save a multi line string to a text file. \r\n\r\nRight now, it does work within my application. Like, if I save the file from my application and then open it from my application, it does put a space between lines. However, if I save the file from my app and then open it in Notepad, it is all on one line.\r\n\r\nIs there a way to make it show multi line on all programs? Here&#39;s my current code:\r\n\r\n    public static void saveFile(String contents) {\r\n    \r\n        // Get where the person wants to save the file\r\n        JFileChooser fc = new JFileChooser();\r\n    \r\n        int rval = fc.showSaveDialog(fc);\r\n    \r\n            if(rval == JFileChooser.APPROVE_OPTION) {\r\n                \r\n                File file = fc.getSelectedFile();\r\n    \r\n                try {\r\n                    //File out_file = new File(file);\r\n                    BufferedWriter out = new BufferedWriter(new FileWriter(file));\r\n                    out.write(contents);\r\n                    out.flush();\r\n                    out.close();\r\n                } catch(IOException e) {\r\n                    messageUtilities.errorMessage(&quot;There was an error saving your file. IOException was thrown.&quot;, &quot;File Error&quot;);\r\n                }\r\n            }\r\n    \r\n            else {\r\n                // Do nothing\r\n                System.out.println(&quot;The user choose not to save anything&quot;);\r\n            }\r\n    }","title":"Java save multiline string to text file","body":"<p>I am new to Java and trying to save a multi line string to a text file. </p>\n\n<p>Right now, it does work within my application. Like, if I save the file from my application and then open it from my application, it does put a space between lines. However, if I save the file from my app and then open it in Notepad, it is all on one line.</p>\n\n<p>Is there a way to make it show multi line on all programs? Here's my current code:</p>\n\n<pre><code>public static void saveFile(String contents) {\n\n    // Get where the person wants to save the file\n    JFileChooser fc = new JFileChooser();\n\n    int rval = fc.showSaveDialog(fc);\n\n        if(rval == JFileChooser.APPROVE_OPTION) {\n\n            File file = fc.getSelectedFile();\n\n            try {\n                //File out_file = new File(file);\n                BufferedWriter out = new BufferedWriter(new FileWriter(file));\n                out.write(contents);\n                out.flush();\n                out.close();\n            } catch(IOException e) {\n                messageUtilities.errorMessage(\"There was an error saving your file. IOException was thrown.\", \"File Error\");\n            }\n        }\n\n        else {\n            // Do nothing\n            System.out.println(\"The user choose not to save anything\");\n        }\n}\n</code></pre>\n"},{"tags":["java","spring","annotations","spring-annotations"],"owner":{"account_id":25388385,"reputation":75,"user_id":19199839,"display_name":"Axel Herrmann"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":197,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1659297155,"creation_date":1659297155,"question_id":73186468,"body_markdown":"I created the following annotation to only activate test methods, if the given file (of `fileName` attribute) exists in the `data.scans.path` directory (configured in Spring&#39;s `application.yml`):\r\n\r\n```java\r\n@Target({ElementType.TYPE, ElementType.METHOD})\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@EnabledIf(\r\n    value = &quot;#{new java.io.File(\\&quot;${data.scans.path}\\&quot;, \\&quot;R000008-ueberraschungsei4\\&quot;).isDirectory()}&quot;,\r\n    loadContext = true\r\n)\r\npublic @interface EnabledWhenScanDirExists {\r\n    String fileName() default &quot;R000008-ueberraschungsei4&quot;;\r\n}\r\n```\r\nThis works for the hard-coded file with name `R000008-ueberraschungsei4`, but, the `fileName` attribute is not used. I wanna change that. I tried to figure out how to use it in the `@EnabledIf` meta annotation. I found the possibility to use the attribute as a full parameter in a meta annotation via `@AliasFor` in Spring (f.e. [here](https://stackoverflow.com/questions/10087467/passing-annotation-properties-to-meta-annotations)).  \r\nBut from what I understood, I would think I can&#39;t use the `@AliasFor` annotation only for a small part of the `@EnabledIf.value()` attribute.  \r\nIs that correct? Is there any other way to do it?  \r\nInitially I tried things like this, but none of them worked:\r\n```java\r\nvalue = &quot;#{new java.io.File(\\&quot;${data.scans.path}\\&quot;, fileName()).isDirectory()}&quot;,\r\n```","title":"Using annotation attributes in meta-annotations","body":"<p>I created the following annotation to only activate test methods, if the given file (of <code>fileName</code> attribute) exists in the <code>data.scans.path</code> directory (configured in Spring's <code>application.yml</code>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Target({ElementType.TYPE, ElementType.METHOD})\n@Retention(RetentionPolicy.RUNTIME)\n@EnabledIf(\n    value = &quot;#{new java.io.File(\\&quot;${data.scans.path}\\&quot;, \\&quot;R000008-ueberraschungsei4\\&quot;).isDirectory()}&quot;,\n    loadContext = true\n)\npublic @interface EnabledWhenScanDirExists {\n    String fileName() default &quot;R000008-ueberraschungsei4&quot;;\n}\n</code></pre>\n<p>This works for the hard-coded file with name <code>R000008-ueberraschungsei4</code>, but, the <code>fileName</code> attribute is not used. I wanna change that. I tried to figure out how to use it in the <code>@EnabledIf</code> meta annotation. I found the possibility to use the attribute as a full parameter in a meta annotation via <code>@AliasFor</code> in Spring (f.e. <a href=\"https://stackoverflow.com/questions/10087467/passing-annotation-properties-to-meta-annotations\">here</a>).<br />\nBut from what I understood, I would think I can't use the <code>@AliasFor</code> annotation only for a small part of the <code>@EnabledIf.value()</code> attribute.<br />\nIs that correct? Is there any other way to do it?<br />\nInitially I tried things like this, but none of them worked:</p>\n<pre class=\"lang-java prettyprint-override\"><code>value = &quot;#{new java.io.File(\\&quot;${data.scans.path}\\&quot;, fileName()).isDirectory()}&quot;,\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1659296011,"post_id":73186240,"comment_id":129255692,"body_markdown":"It looks like a good first step would be to add some logic to that last `if` block, (under `tabla[u][i] = sc.nextInt();`) to figure out which team won that game, and increase that team&#39;s total (`puntos[i]` or `puntos[u]`) by 3 points.  Or increase both of them by 1 point if it&#39;s a draw.","body":"It looks like a good first step would be to add some logic to that last <code>if</code> block, (under <code>tabla[u][i] = sc.nextInt();</code>) to figure out which team won that game, and increase that team&#39;s total (<code>puntos[i]</code> or <code>puntos[u]</code>) by 3 points.  Or increase both of them by 1 point if it&#39;s a draw."}],"answers":[{"tags":[],"owner":{"account_id":25382190,"reputation":30,"user_id":19194414,"display_name":"Rauchbier"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1659296885,"creation_date":1659296885,"answer_id":73186436,"question_id":73186240,"body_markdown":"Thank you for posting your question. It looks like you are only updating one set of data in you 3d array in the loops. With programming there are 1000 ways to achieve a desired end result. \r\n\r\nFor the simplest path, I would recommend making your points array 3d as well so you can save the scores associated with each team (ie. points[team based on index][points that team has]). Then update the nested loops to update data for your 3d array. One loop should suffice if you update one 3d array based on the outcome from the other 3d array. \r\n\r\nto make it interesting you can also use Random.nextInt(numbers to use) to determine the outcome of a game.","title":"how can i do the calculation of score with java?","body":"<p>Thank you for posting your question. It looks like you are only updating one set of data in you 3d array in the loops. With programming there are 1000 ways to achieve a desired end result.</p>\n<p>For the simplest path, I would recommend making your points array 3d as well so you can save the scores associated with each team (ie. points[team based on index][points that team has]). Then update the nested loops to update data for your 3d array. One loop should suffice if you update one 3d array based on the outcome from the other 3d array.</p>\n<p>to make it interesting you can also use Random.nextInt(numbers to use) to determine the outcome of a game.</p>\n"}],"owner":{"account_id":23504590,"reputation":21,"user_id":17554057,"display_name":"brieft20"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":1,"score":0,"last_activity_date":1659296885,"creation_date":1659294925,"question_id":73186240,"body_markdown":"I have a homework assignment... it says:\r\n\r\nYour need to show 5 soccer teams from Colombian league on a menu. Remember that each teams plays 4 games. You must ask the score obtained in the 4 games against each team (cycles) and so on with other teams.\r\n\r\n    Marcador equipo1 vs equipo2 = ?\r\n    Marcador equipo1 vs equipo3 = ?\r\n    Marcador equipo1 vs equipo4 = ?\r\n    Marcador equipo1 vs equipo5 = ?\r\n\r\ncalculate at the end according to the table of the first 3 places, and show requested result.\r\n\r\nit is necessary to know the position (1, 2 and 3) of soccer championship, indicating at the end the name of the team, the position occupied, and the number of points calculated as follows:\r\n\r\nif tied, 1 point is added.\r\n&lt;br/&gt;\r\nif win, 3 points are added.\r\n&lt;br/&gt;\r\nif lose, 1 point is deducted.\r\n&lt;br/&gt;\r\nThis is what I did but I&#39;m not sure how to store the points, do the calculations and then display them.\r\nThis is the code:\r\n```\r\npublic static void main(String arg[]){\r\n            \r\n    String [] equipos = {&quot;Atletico Nacional&quot;,&quot;Deportes Quindio&quot;, &quot;Millonarios F.C&quot;, &quot;Jr de Barranquilla&quot;, &quot;America de Cali&quot;};\r\n\r\n    int [][] tabla;\r\n    int [] puntos;\r\n    int gana = 3;\r\n    int pierde = -1;\r\n    int empata = 1;\r\n            \r\n    Scanner sc = new Scanner(System.in);\r\n            \r\n    System.out.println(&quot; _________________________________________________&quot;);\r\n    System.out.println(&quot;|                                                 |&quot;);\r\n    System.out.println(&quot;|                      MENU                       |&quot;);\r\n    System.out.println(&quot;|_________________________________________________|&quot;);\r\n    System.out.println(&quot;|                                                 |&quot;); \r\n    System.out.println(&quot;| Equipos                                         |&quot;);\r\n    System.out.println(&quot;|                                                 |&quot;);\r\n    System.out.println(&quot;| 1. Atletico nacional                            |&quot;);       \r\n    System.out.println(&quot;| 2. Deportes Quindio                             |&quot;);\r\n    System.out.println(&quot;| 3. Jr de barranquilla                           |&quot;);\r\n    System.out.println(&quot;| 4. Millonarios F.C                              |&quot;);\r\n    System.out.println(&quot;| 5. America de cali                              |&quot;);\r\n    System.out.println(&quot;|_________________________________________________|&quot;);\r\n            \r\n    System.out.println(&quot;Inicio del juego...&quot;);\r\n    System.out.println();\r\n   \r\n    tabla = new int[5][5];\r\n      for (int i = 0; i &lt; 5; i++){\r\n                for(int u = 0; u &lt; 5; u++){\r\n                    if(i==u){\r\n                        tabla[i][u] = -2;\r\n                    }else{\r\n                        tabla[i][u] = -1;\r\n                    }\r\n                }\r\n            }\r\n            //Imprime y pregunta el marcador de cada juego.`\r\n            for (int i = 0; i &lt; 5; i++){\r\n                for(int u = 0; u &lt; 5; u++){\r\n                    if(tabla[i][u] == -1){\r\n                        System.out.println(equipos[i] + &quot; VS &quot; + equipos[u]);\r\n                        System.out.println(&quot;Marcador 1: &quot;);\r\n                        tabla[i][u] = sc.nextInt();\r\n                        System.out.println(&quot;Marcador 2: &quot;);\r\n                        tabla[u][i] = sc.nextInt();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n```\r\n","title":"how can i do the calculation of score with java?","body":"<p>I have a homework assignment... it says:</p>\n<p>Your need to show 5 soccer teams from Colombian league on a menu. Remember that each teams plays 4 games. You must ask the score obtained in the 4 games against each team (cycles) and so on with other teams.</p>\n<pre><code>Marcador equipo1 vs equipo2 = ?\nMarcador equipo1 vs equipo3 = ?\nMarcador equipo1 vs equipo4 = ?\nMarcador equipo1 vs equipo5 = ?\n</code></pre>\n<p>calculate at the end according to the table of the first 3 places, and show requested result.</p>\n<p>it is necessary to know the position (1, 2 and 3) of soccer championship, indicating at the end the name of the team, the position occupied, and the number of points calculated as follows:</p>\n<p>if tied, 1 point is added.\n<br/>\nif win, 3 points are added.\n<br/>\nif lose, 1 point is deducted.\n<br/>\nThis is what I did but I'm not sure how to store the points, do the calculations and then display them.\nThis is the code:</p>\n<pre><code>public static void main(String arg[]){\n            \n    String [] equipos = {&quot;Atletico Nacional&quot;,&quot;Deportes Quindio&quot;, &quot;Millonarios F.C&quot;, &quot;Jr de Barranquilla&quot;, &quot;America de Cali&quot;};\n\n    int [][] tabla;\n    int [] puntos;\n    int gana = 3;\n    int pierde = -1;\n    int empata = 1;\n            \n    Scanner sc = new Scanner(System.in);\n            \n    System.out.println(&quot; _________________________________________________&quot;);\n    System.out.println(&quot;|                                                 |&quot;);\n    System.out.println(&quot;|                      MENU                       |&quot;);\n    System.out.println(&quot;|_________________________________________________|&quot;);\n    System.out.println(&quot;|                                                 |&quot;); \n    System.out.println(&quot;| Equipos                                         |&quot;);\n    System.out.println(&quot;|                                                 |&quot;);\n    System.out.println(&quot;| 1. Atletico nacional                            |&quot;);       \n    System.out.println(&quot;| 2. Deportes Quindio                             |&quot;);\n    System.out.println(&quot;| 3. Jr de barranquilla                           |&quot;);\n    System.out.println(&quot;| 4. Millonarios F.C                              |&quot;);\n    System.out.println(&quot;| 5. America de cali                              |&quot;);\n    System.out.println(&quot;|_________________________________________________|&quot;);\n            \n    System.out.println(&quot;Inicio del juego...&quot;);\n    System.out.println();\n   \n    tabla = new int[5][5];\n      for (int i = 0; i &lt; 5; i++){\n                for(int u = 0; u &lt; 5; u++){\n                    if(i==u){\n                        tabla[i][u] = -2;\n                    }else{\n                        tabla[i][u] = -1;\n                    }\n                }\n            }\n            //Imprime y pregunta el marcador de cada juego.`\n            for (int i = 0; i &lt; 5; i++){\n                for(int u = 0; u &lt; 5; u++){\n                    if(tabla[i][u] == -1){\n                        System.out.println(equipos[i] + &quot; VS &quot; + equipos[u]);\n                        System.out.println(&quot;Marcador 1: &quot;);\n                        tabla[i][u] = sc.nextInt();\n                        System.out.println(&quot;Marcador 2: &quot;);\n                        tabla[u][i] = sc.nextInt();\n                    }\n                }\n            }\n        }\n</code></pre>\n"},{"tags":["java","multithreading","concurrency","java-threads"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1659296431,"post_id":73185882,"comment_id":129255777,"body_markdown":"You probably want [`CompletableFuture`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html#runAsync%28java.lang.Runnable,java.util.concurrent.Executor%29)s","body":"You probably want <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html#runAsync%28java.lang.Runnable,java.util.concurrent.Executor%29\" rel=\"nofollow noreferrer\"><code>CompletableFuture</code></a>s"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1659301812,"post_id":73185882,"comment_id":129256697,"body_markdown":"How do you avoid an endless loop with your `while (true) {` code? Am I missing something?","body":"How do you avoid an endless loop with your <code>while (true) {</code> code? Am I missing something?"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1659301882,"post_id":73185882,"comment_id":129256714,"body_markdown":"Is your `this.dataStructure` map changing? Or is it a fixed quantity of inputs to be consumed fully by this code here?","body":"Is your <code>this.dataStructure</code> map changing? Or is it a fixed quantity of inputs to be consumed fully by this code here?"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1659302168,"post_id":73185882,"comment_id":129256768,"body_markdown":"I am confused by `// run computations over this.dataStructure`. Your loop is processing individual `MyObject` objects, one at a time, each taken from your `Map&lt;MyObject&gt;` title `this.dataStructure`, accessed via the `ArrayBlockingQueue`. So why does this comment refer to going back over that `this.dataStructure` map of `MyObject` objects?","body":"I am confused by <code>&#47;&#47; run computations over this.dataStructure</code>. Your loop is processing individual <code>MyObject</code> objects, one at a time, each taken from your <code>Map&lt;MyObject&gt;</code> title <code>this.dataStructure</code>, accessed via the <code>ArrayBlockingQueue</code>. So why does this comment refer to going back over that <code>this.dataStructure</code> map of <code>MyObject</code> objects?"},{"owner":{"account_id":6296579,"reputation":304,"user_id":4892577,"display_name":"Fledgling Pidgeon"},"score":0,"creation_date":1659308431,"post_id":73185882,"comment_id":129257688,"body_markdown":"To clarify, because the queue is only input to once and never gets added to during the execution of the threads, eventually the result of polling will be null, which terminates the loop. Also, my apologies for the lack of clarity in exactly what this does: this.dataStructure is in actuality a matrix, its entries being a row index and a Map for the row itself. What the computations do is fill out those rows, but they do not actually add to or remove from the existing set of rows. This is why the iteration works; the objects being iterated over may be modified, but their location is not.","body":"To clarify, because the queue is only input to once and never gets added to during the execution of the threads, eventually the result of polling will be null, which terminates the loop. Also, my apologies for the lack of clarity in exactly what this does: this.dataStructure is in actuality a matrix, its entries being a row index and a Map for the row itself. What the computations do is fill out those rows, but they do not actually add to or remove from the existing set of rows. This is why the iteration works; the objects being iterated over may be modified, but their location is not."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1659337108,"post_id":73185882,"comment_id":129261796,"body_markdown":"I suspect your work could be much simpler and much more performant with the new concurrency features of *Project Loom* being incubated and previewed in Java 19. I tried to start writing some example code but despite a dozen readings  of your Question I cannot get a handle on your data and operations. My gut tells me the queue is a distraction, and likely unnecessary. This kind of question could be much improved with a contrived example of concrete data structures containing concrete data samples.","body":"I suspect your work could be much simpler and much more performant with the new concurrency features of <i>Project Loom</i> being incubated and previewed in Java 19. I tried to start writing some example code but despite a dozen readings  of your Question I cannot get a handle on your data and operations. My gut tells me the queue is a distraction, and likely unnecessary. This kind of question could be much improved with a contrived example of concrete data structures containing concrete data samples."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1659337325,"post_id":73185882,"comment_id":129261870,"body_markdown":"FYI, [*Project Loom*](https://wiki.openjdk.org/display/loom/Main), [virtual threads](https://openjdk.org/jeps/425), and [structured concurrency](https://openjdk.org/jeps/428).","body":"FYI, <a href=\"https://wiki.openjdk.org/display/loom/Main\" rel=\"nofollow noreferrer\"><i>Project Loom</i></a>, <a href=\"https://openjdk.org/jeps/425\" rel=\"nofollow noreferrer\">virtual threads</a>, and <a href=\"https://openjdk.org/jeps/428\" rel=\"nofollow noreferrer\">structured concurrency</a>."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1659296155,"creation_date":1659296155,"answer_id":73186366,"question_id":73185882,"body_markdown":"Per definition, you cannot restart a thread. According to the [documentation][1]:\r\n*It is never legal to start a thread more than once. In particular, a thread may not be restarted once it has completed execution.*\r\n\r\nNevertheless a thread is a valuable resource, and there are implementations to reuse threads. Have a look at the [Java Tutorial about Executors][2].\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Thread.html#start()\r\n  [2]: https://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html","title":"Is re-starting a Thread better than creating a new one?","body":"<p>Per definition, you cannot restart a thread. According to the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Thread.html#start()\" rel=\"nofollow noreferrer\">documentation</a>:\n<em>It is never legal to start a thread more than once. In particular, a thread may not be restarted once it has completed execution.</em></p>\n<p>Nevertheless a thread is a valuable resource, and there are implementations to reuse threads. Have a look at the <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html\" rel=\"nofollow noreferrer\">Java Tutorial about Executors</a>.</p>\n"},{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1659296714,"creation_date":1659296714,"answer_id":73186418,"question_id":73185882,"body_markdown":"It is not possible to start a Thread more than once, but conceptually, the answer to your question is yes.\r\n\r\nThis is normally accomplished with a thread pool.  A thread pool is a set of Threads which rarely actually terminate.  Instead, an application is passes its task to the thread pool, which picks a Thread in which to run it.  The thread pool then decides whether the Thread should be terminated or reused after the task completes.\r\n\r\nJava has some classes which make use of thread pools quite easy:  [ExecutorService](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/concurrent/ExecutorService.html) and [CompletableFuture](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/concurrent/CompletableFuture.html).\r\n\r\nExecutorService usage typically looks like this:\r\n\r\n    ExecutorService executor = Executors.newCachedThreadPool();\r\n\r\n    for (int i = 0; i &lt; n; i++) {\r\n        tasks[i] = () -&gt; {\r\n            while (true) {\r\n                MyObject input = inputs.poll(1L, TimeUnit.MICROSECONDS);\r\n                if (input == null) return;\r\n                // run computations over this.dataStructure\r\n            }\r\n        };\r\n        executor.submit(tasks[i]);\r\n    }\r\n\r\n    // Doesn&#39;t interrupt or halt any tasks.  Will wait for them all to finish\r\n    // before terminating its threads.\r\n    executor.shutdown();\r\n\r\n    executor.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS);\r\n\r\n`Executors` has other methods which can create thread pools, like [newFixedThreadPool()](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/concurrent/Executors.html#newFixedThreadPool(int)) and [newWorkStealingPool()](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/concurrent/Executors.html#newWorkStealingPool()).  You can decide for yourself which one best suits your needs.\r\n\r\nCompletableFuture use might look like this:\r\n\r\n    Runnable[] tasks = new Runnable[n];\r\n    CompletableFuture&lt;?&gt;[] futures = new CompletableFuture&lt;?&gt;[n];\r\n\r\n    for (int i = 0; i &lt; n; i++) {\r\n        tasks[i] = () -&gt; {\r\n            while (true) {\r\n                MyObject input = inputs.poll(1L, TimeUnit.MICROSECONDS);\r\n                if (input == null) return;\r\n                // run computations over this.dataStructure\r\n            }\r\n        };\r\n        futures[i] = CompletableFuture.runAsync(tasks[i]);\r\n    }\r\n\r\n    CompletableFuture.allOf(futures).get();\r\n\r\nThe disadvantage of CompletableFuture is that the tasks cannot be canceled or interrupted.  (Calling `cancel` will mark the task as completing with an exception instead of completing successfully, but the task will not be interrupted.)\r\n","title":"Is re-starting a Thread better than creating a new one?","body":"<p>It is not possible to start a Thread more than once, but conceptually, the answer to your question is yes.</p>\n<p>This is normally accomplished with a thread pool.  A thread pool is a set of Threads which rarely actually terminate.  Instead, an application is passes its task to the thread pool, which picks a Thread in which to run it.  The thread pool then decides whether the Thread should be terminated or reused after the task completes.</p>\n<p>Java has some classes which make use of thread pools quite easy:  <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/concurrent/ExecutorService.html\" rel=\"nofollow noreferrer\">ExecutorService</a> and <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/concurrent/CompletableFuture.html\" rel=\"nofollow noreferrer\">CompletableFuture</a>.</p>\n<p>ExecutorService usage typically looks like this:</p>\n<pre><code>ExecutorService executor = Executors.newCachedThreadPool();\n\nfor (int i = 0; i &lt; n; i++) {\n    tasks[i] = () -&gt; {\n        while (true) {\n            MyObject input = inputs.poll(1L, TimeUnit.MICROSECONDS);\n            if (input == null) return;\n            // run computations over this.dataStructure\n        }\n    };\n    executor.submit(tasks[i]);\n}\n\n// Doesn't interrupt or halt any tasks.  Will wait for them all to finish\n// before terminating its threads.\nexecutor.shutdown();\n\nexecutor.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS);\n</code></pre>\n<p><code>Executors</code> has other methods which can create thread pools, like <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/concurrent/Executors.html#newFixedThreadPool(int)\" rel=\"nofollow noreferrer\">newFixedThreadPool()</a> and <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/concurrent/Executors.html#newWorkStealingPool()\" rel=\"nofollow noreferrer\">newWorkStealingPool()</a>.  You can decide for yourself which one best suits your needs.</p>\n<p>CompletableFuture use might look like this:</p>\n<pre><code>Runnable[] tasks = new Runnable[n];\nCompletableFuture&lt;?&gt;[] futures = new CompletableFuture&lt;?&gt;[n];\n\nfor (int i = 0; i &lt; n; i++) {\n    tasks[i] = () -&gt; {\n        while (true) {\n            MyObject input = inputs.poll(1L, TimeUnit.MICROSECONDS);\n            if (input == null) return;\n            // run computations over this.dataStructure\n        }\n    };\n    futures[i] = CompletableFuture.runAsync(tasks[i]);\n}\n\nCompletableFuture.allOf(futures).get();\n</code></pre>\n<p>The disadvantage of CompletableFuture is that the tasks cannot be canceled or interrupted.  (Calling <code>cancel</code> will mark the task as completing with an exception instead of completing successfully, but the task will not be interrupted.)</p>\n"}],"owner":{"account_id":6296579,"reputation":304,"user_id":4892577,"display_name":"Fledgling Pidgeon"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":184,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73186418,"answer_count":2,"score":1,"last_activity_date":1659296714,"creation_date":1659291618,"question_id":73185882,"body_markdown":"I&#39;m wondering whether there is any advantage to keeping the same threads over the course of the execution of an object, rather than re-using the same Thread objects. I have an object for which a single (frequently used) method is parallelized using local Thread variables, such that every time the method is called, new Threads (and Runnables) are instantiated. Because the method is called so frequently, a single execution may instantiate upwards of a hundred thousand Thread objects, even though there are never more than a few (~4-6) active at any given time.\r\n\r\nFollowing is a cut down example of how this method is currently implemented, to give a sense of what I mean. For reference, `n` is of course the pre-determined number of threads to use, whereas `this.dataStructure` is a (thread-safe) `Map` which serves as the input to the computation, as well as being modified by the computation. There are other inputs involved, but as they are not relevant to this question, I&#39;ve omitted their usage. I&#39;ve also omitted exception handling for the same reason.\r\n\r\n    Runnable[] tasks = new Runnable[n];\r\n    Thread[] threads = new Thread[n];\r\n    ArrayBlockingQueue&lt;MyObject&gt; inputs = new ArrayBlockingQueue&lt;&gt;(this.dataStructure.size());\r\n    inputs.addAll(this.dataStructure.values());\r\n\r\n    for (int i = 0; i &lt; n; i++) {\r\n    \ttasks[i] = () -&gt; {\r\n    \t\twhile (true) {\r\n    \t\t\tMyObject input = inputs.poll(1L, TimeUnit.MICROSECONDS);\r\n    \t\t\tif (input == null) return;\r\n    \t\t\t// run computations over this.dataStructure\r\n    \t\t}\r\n   \t\t};\r\n   \t\tthreads[i] = new Thread(tasks[i]);\r\n   \t\tthreads[i].start();\r\n\t}\r\n\r\n\tfor (int i = 0; i &lt; n; i++)\r\n\t\tthreads[i].join();\r\n\r\n\r\nBecause these Threads (and their runnables) always execute the same way using a single ArrayBlockingQueue as input, an alternative to this would be to just &quot;refill the queue&quot; every time the method is called and just re-start the same Threads. This is easily implemented, but I&#39;m unsure as to whether it would make any difference one way or the other. I&#39;m not too familiar with concurrency, so any help is appreciated.\r\n\r\nPS.: If there is a more elegant way to handle the polling, that would also be helpful.","title":"Is re-starting a Thread better than creating a new one?","body":"<p>I'm wondering whether there is any advantage to keeping the same threads over the course of the execution of an object, rather than re-using the same Thread objects. I have an object for which a single (frequently used) method is parallelized using local Thread variables, such that every time the method is called, new Threads (and Runnables) are instantiated. Because the method is called so frequently, a single execution may instantiate upwards of a hundred thousand Thread objects, even though there are never more than a few (~4-6) active at any given time.</p>\n<p>Following is a cut down example of how this method is currently implemented, to give a sense of what I mean. For reference, <code>n</code> is of course the pre-determined number of threads to use, whereas <code>this.dataStructure</code> is a (thread-safe) <code>Map</code> which serves as the input to the computation, as well as being modified by the computation. There are other inputs involved, but as they are not relevant to this question, I've omitted their usage. I've also omitted exception handling for the same reason.</p>\n<pre><code>Runnable[] tasks = new Runnable[n];\nThread[] threads = new Thread[n];\nArrayBlockingQueue&lt;MyObject&gt; inputs = new ArrayBlockingQueue&lt;&gt;(this.dataStructure.size());\ninputs.addAll(this.dataStructure.values());\n\nfor (int i = 0; i &lt; n; i++) {\n    tasks[i] = () -&gt; {\n        while (true) {\n            MyObject input = inputs.poll(1L, TimeUnit.MICROSECONDS);\n            if (input == null) return;\n            // run computations over this.dataStructure\n        }\n    };\n    threads[i] = new Thread(tasks[i]);\n    threads[i].start();\n}\n\nfor (int i = 0; i &lt; n; i++)\n    threads[i].join();\n</code></pre>\n<p>Because these Threads (and their runnables) always execute the same way using a single ArrayBlockingQueue as input, an alternative to this would be to just &quot;refill the queue&quot; every time the method is called and just re-start the same Threads. This is easily implemented, but I'm unsure as to whether it would make any difference one way or the other. I'm not too familiar with concurrency, so any help is appreciated.</p>\n<p>PS.: If there is a more elegant way to handle the polling, that would also be helpful.</p>\n"},{"tags":["java","json","serialization","jackson"],"comments":[{"owner":{"account_id":7495548,"reputation":167,"user_id":5695935,"display_name":"Graphican0"},"score":0,"creation_date":1452026648,"post_id":34620826,"comment_id":56987365,"body_markdown":"Does changing &quot;!=&quot; to &quot;token.equals(JsonToken.START_ARRAY)&quot; solves the problem?","body":"Does changing &quot;!=&quot; to &quot;token.equals(JsonToken.START_ARRAY)&quot; solves the problem?"}],"answers":[{"tags":[],"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1659295911,"creation_date":1452026878,"answer_id":34620957,"question_id":34620826,"body_markdown":"By the time `LocalTimeDeserializer#deserialize` is called, Jackson has already moved to the array token. In other words, within `deserialize`, the `JsonParser`&#39;s current token is the array token.\r\n\r\nYou can use that to validate that you&#39;re deserializing what you expect and then move on to the deserialization:\r\n\r\n \r\n    if (jp.getCurrentToken() != JsonToken.START_ARRAY) {\r\n        throw new JsonParseException(&quot;Start array expected&quot;, jp.getCurrentLocation());\r\n    }","title":"How to custom deserialize from array in Jackson?","body":"<p>By the time <code>LocalTimeDeserializer#deserialize</code> is called, Jackson has already moved to the array token. In other words, within <code>deserialize</code>, the <code>JsonParser</code>'s current token is the array token.</p>\n<p>You can use that to validate that you're deserializing what you expect and then move on to the deserialization:</p>\n<pre><code>if (jp.getCurrentToken() != JsonToken.START_ARRAY) {\n    throw new JsonParseException(&quot;Start array expected&quot;, jp.getCurrentLocation());\n}\n</code></pre>\n"}],"owner":{"account_id":1200939,"reputation":29479,"user_id":1171620,"accept_rate":43,"display_name":"Suzan Cioc"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6537,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":34620957,"answer_count":1,"score":0,"last_activity_date":1659295911,"creation_date":1452026395,"question_id":34620826,"body_markdown":"I would like to serialize / deserialize (Joda) date as an array.\r\n\r\nUnfortunately, I can&#39;t figure out how to do deserializtion part:\r\n\r\n    import com.fasterxml.jackson.core.*;\r\n    import com.fasterxml.jackson.databind.*;\r\n    import com.fasterxml.jackson.databind.annotation.JsonDeserialize;\r\n    import com.fasterxml.jackson.databind.annotation.JsonSerialize;\r\n    import org.joda.time.LocalDate;\r\n    import org.joda.time.LocalTime;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    public class TryJodaTime {\r\n    \r\n       public static class LocalTimeSerializer extends JsonSerializer&lt;LocalTime&gt; {\r\n    \r\n          @Override\r\n          public void serialize(LocalTime value, JsonGenerator gen, SerializerProvider serializers) throws IOException, JsonProcessingException {\r\n    \r\n             gen.writeStartArray();\r\n             gen.writeNumber(value.getHourOfDay());\r\n             gen.writeNumber(value.getMinuteOfHour());\r\n             gen.writeNumber(value.getSecondOfMinute());\r\n             gen.writeNumber(value.getMillisOfSecond());\r\n    \r\n             gen.writeEndArray();\r\n    \r\n          }\r\n       }\r\n    \r\n       public static class LocalTimeDeserializer extends JsonDeserializer&lt;LocalTime&gt; {\r\n    \r\n          @Override\r\n          public LocalTime deserialize(JsonParser jp, DeserializationContext ctxt) throws IOException, JsonProcessingException {\r\n    \r\n             JsonToken token;\r\n    \r\n             token = jp.nextToken();\r\n             if( token != JsonToken.START_ARRAY ) {\r\n                throw new JsonParseException(&quot;Start array expected&quot;, jp.getCurrentLocation());\r\n             }\r\n    \r\n             int hour = jp.nextIntValue(0);\r\n             int minute = jp.nextIntValue(0);\r\n             int second = jp.nextIntValue(0);\r\n             int ms = jp.nextIntValue(0);\r\n    \r\n             token = jp.nextToken();\r\n             if( token != JsonToken.END_ARRAY ) {\r\n                throw new JsonParseException(&quot;End array expected&quot;, jp.getCurrentLocation());\r\n             }\r\n    \r\n             return new LocalTime(hour, minute, second, ms);\r\n          }\r\n       }\r\n    \r\n    \r\n       public static class MyClass {\r\n    \r\n          private LocalTime localTime;\r\n    \r\n          public MyClass() {\r\n             localTime = LocalTime.now();\r\n          }\r\n    \r\n          @JsonSerialize(using = LocalTimeSerializer.class)\r\n          public LocalTime getLocalTime() {\r\n             return localTime;\r\n          }\r\n    \r\n          @JsonDeserialize(using = LocalTimeDeserializer.class)\r\n          public void setLocalTime(LocalTime localTime) {\r\n             this.localTime = localTime;\r\n          }\r\n    \r\n       }\r\n    \r\n       public static void main(String[] args) throws IOException {\r\n    \r\n    \r\n          MyClass myClass = new MyClass();\r\n          ObjectMapper mapper = new ObjectMapper();\r\n          String string = mapper.writeValueAsString(myClass);\r\n    \r\n          System.out.println(string);\r\n    \r\n          MyClass myClass2 = mapper.readValue(string, MyClass.class);\r\n    \r\n          System.out.println(myClass2.toString());\r\n    \r\n    \r\n       }\r\n    }\r\n\r\nThis code causes my own exception thrown\r\n\r\n    throw new JsonParseException(&quot;Start array expected&quot;, jp.getCurrentLocation());\r\n","title":"How to custom deserialize from array in Jackson?","body":"<p>I would like to serialize / deserialize (Joda) date as an array.</p>\n\n<p>Unfortunately, I can't figure out how to do deserializtion part:</p>\n\n<pre><code>import com.fasterxml.jackson.core.*;\nimport com.fasterxml.jackson.databind.*;\nimport com.fasterxml.jackson.databind.annotation.JsonDeserialize;\nimport com.fasterxml.jackson.databind.annotation.JsonSerialize;\nimport org.joda.time.LocalDate;\nimport org.joda.time.LocalTime;\n\nimport java.io.IOException;\n\npublic class TryJodaTime {\n\n   public static class LocalTimeSerializer extends JsonSerializer&lt;LocalTime&gt; {\n\n      @Override\n      public void serialize(LocalTime value, JsonGenerator gen, SerializerProvider serializers) throws IOException, JsonProcessingException {\n\n         gen.writeStartArray();\n         gen.writeNumber(value.getHourOfDay());\n         gen.writeNumber(value.getMinuteOfHour());\n         gen.writeNumber(value.getSecondOfMinute());\n         gen.writeNumber(value.getMillisOfSecond());\n\n         gen.writeEndArray();\n\n      }\n   }\n\n   public static class LocalTimeDeserializer extends JsonDeserializer&lt;LocalTime&gt; {\n\n      @Override\n      public LocalTime deserialize(JsonParser jp, DeserializationContext ctxt) throws IOException, JsonProcessingException {\n\n         JsonToken token;\n\n         token = jp.nextToken();\n         if( token != JsonToken.START_ARRAY ) {\n            throw new JsonParseException(\"Start array expected\", jp.getCurrentLocation());\n         }\n\n         int hour = jp.nextIntValue(0);\n         int minute = jp.nextIntValue(0);\n         int second = jp.nextIntValue(0);\n         int ms = jp.nextIntValue(0);\n\n         token = jp.nextToken();\n         if( token != JsonToken.END_ARRAY ) {\n            throw new JsonParseException(\"End array expected\", jp.getCurrentLocation());\n         }\n\n         return new LocalTime(hour, minute, second, ms);\n      }\n   }\n\n\n   public static class MyClass {\n\n      private LocalTime localTime;\n\n      public MyClass() {\n         localTime = LocalTime.now();\n      }\n\n      @JsonSerialize(using = LocalTimeSerializer.class)\n      public LocalTime getLocalTime() {\n         return localTime;\n      }\n\n      @JsonDeserialize(using = LocalTimeDeserializer.class)\n      public void setLocalTime(LocalTime localTime) {\n         this.localTime = localTime;\n      }\n\n   }\n\n   public static void main(String[] args) throws IOException {\n\n\n      MyClass myClass = new MyClass();\n      ObjectMapper mapper = new ObjectMapper();\n      String string = mapper.writeValueAsString(myClass);\n\n      System.out.println(string);\n\n      MyClass myClass2 = mapper.readValue(string, MyClass.class);\n\n      System.out.println(myClass2.toString());\n\n\n   }\n}\n</code></pre>\n\n<p>This code causes my own exception thrown</p>\n\n<pre><code>throw new JsonParseException(\"Start array expected\", jp.getCurrentLocation());\n</code></pre>\n"},{"tags":["java","spring","httpclient","apache-httpclient-4.x","apache-commons-httpclient"],"comments":[{"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"score":2,"creation_date":1658891129,"post_id":73071266,"comment_id":129162078,"body_markdown":"can you make a [minimal reproducibible example](https://stackoverflow.com/help/minimal-reproducible-example) with your dependency, it will be very helpful","body":"can you make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducibible example</a> with your dependency, it will be very helpful"},{"owner":{"account_id":4668137,"reputation":6228,"user_id":9681755,"display_name":"Dirk Deyne"},"score":0,"creation_date":1659014703,"post_id":73071266,"comment_id":129198800,"body_markdown":"RE: *When I am printing class classloader for template*... If you want to know or check the actual class then use `template..getClass().getName()`","body":"RE: <i>When I am printing class classloader for template</i>... If you want to know or check the actual class then use <code>template..getClass().getName()</code>"},{"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"score":0,"creation_date":1659339596,"post_id":73071266,"comment_id":129262534,"body_markdown":"@Anshu, how you are printing classloader? moreover , based on error your template reference has a type of ` com.sun.proxy.$Proxy21 `  instead of your desired type `cbi.receptor.http.HttpTemplate`. This means,  when you are calling `ManageProxy.setProxy` method , you are not passing `template ` reference with correct type.","body":"@Anshu, how you are printing classloader? moreover , based on error your template reference has a type of ` com.sun.proxy.$Proxy21 `  instead of your desired type <code>cbi.receptor.http.HttpTemplate</code>. This means,  when you are calling <code>ManageProxy.setProxy</code> method , you are not passing <code>template </code> reference with correct type."}],"answers":[{"tags":[],"owner":{"account_id":25382190,"reputation":30,"user_id":19194414,"display_name":"Rauchbier"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659295043,"creation_date":1659294842,"answer_id":73186234,"question_id":73071266,"body_markdown":"If I understand correctly, you want to type cast from one class to another, which may not be related and may not be possible. Type casting is intended to either broaden or narrow the scope of an object for a specific purpose. For example, I use type casting to save my class instances in objects to be saved to file. Then I re-cast them to the original scope for use after reading from file. \r\n\r\nPerhaps you could create a child class that can extend both classes. This should give you the flexibility to move data between the two or use the data from both. You just need to ensure you properly format the data to be transferred correctly. Does this help at all?","title":"FaultDescription:java.lang.ClassCastException - Error while casting HttpTemplate to CommonsHttpClient4XTemplate","body":"<p>If I understand correctly, you want to type cast from one class to another, which may not be related and may not be possible. Type casting is intended to either broaden or narrow the scope of an object for a specific purpose. For example, I use type casting to save my class instances in objects to be saved to file. Then I re-cast them to the original scope for use after reading from file.</p>\n<p>Perhaps you could create a child class that can extend both classes. This should give you the flexibility to move data between the two or use the data from both. You just need to ensure you properly format the data to be transferred correctly. Does this help at all?</p>\n"}],"owner":{"account_id":11757082,"reputation":69,"user_id":8604431,"display_name":"Anshu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73186234,"answer_count":1,"score":0,"last_activity_date":1659295043,"creation_date":1658429187,"question_id":73071266,"body_markdown":"Problem statement- Getting class castException while casting cbi.receptor.http.HttpTemplate template object to cbi.receptor.http.CommonsHttpClient4XTemplate\r\n\r\nOverview- I am trying to type cast template object coming from *cbi.receptor.http.HttpTemplate* to *cbi.receptor.http.CommonsHttpClient4XTemplate* .Below is the piece of code from same.\r\n\r\n    ManageProxy.setProxy((CommonsHttpClient4XTemplate)template, dLogger, proxyFlag, proxyHost, proxyPort);\r\n\r\nwhile casting it is throwing error i.e.\r\n\r\n    FaultDescription:java.lang.ClassCastException: com.sun.proxy.$Proxy21 cannot be cast to cbi.receptor.http.CommonsHttpClient4XTemplate\r\n\r\nDebugging steps- When I am printing class classloader for template object I can see it is coming from default class loader **sun.misc.Launcher$AppClassLoader@52cc8049** instead of **cbi.receptor.http.HttpTemplate** and that&#39;s why it is not getting casted as desired.\r\n\r\nI have checked the required class files are present in my classpath .\r\n\r\nCan anyone help me here to debug this issue as I am stuck from last two days only for this issue.Thanks in Advance.\r\n\r\nAnshu","title":"FaultDescription:java.lang.ClassCastException - Error while casting HttpTemplate to CommonsHttpClient4XTemplate","body":"<p>Problem statement- Getting class castException while casting cbi.receptor.http.HttpTemplate template object to cbi.receptor.http.CommonsHttpClient4XTemplate</p>\n<p>Overview- I am trying to type cast template object coming from <em>cbi.receptor.http.HttpTemplate</em> to <em>cbi.receptor.http.CommonsHttpClient4XTemplate</em> .Below is the piece of code from same.</p>\n<pre><code>ManageProxy.setProxy((CommonsHttpClient4XTemplate)template, dLogger, proxyFlag, proxyHost, proxyPort);\n</code></pre>\n<p>while casting it is throwing error i.e.</p>\n<pre><code>FaultDescription:java.lang.ClassCastException: com.sun.proxy.$Proxy21 cannot be cast to cbi.receptor.http.CommonsHttpClient4XTemplate\n</code></pre>\n<p>Debugging steps- When I am printing class classloader for template object I can see it is coming from default class loader <strong>sun.misc.Launcher$AppClassLoader@52cc8049</strong> instead of <strong>cbi.receptor.http.HttpTemplate</strong> and that's why it is not getting casted as desired.</p>\n<p>I have checked the required class files are present in my classpath .</p>\n<p>Can anyone help me here to debug this issue as I am stuck from last two days only for this issue.Thanks in Advance.</p>\n<p>Anshu</p>\n"},{"tags":["java","android","angular","ionic-framework","capacitor"],"comments":[{"owner":{"account_id":1428527,"reputation":52235,"user_id":1351469,"accept_rate":100,"display_name":"jcesarmobile"},"score":1,"creation_date":1659310298,"post_id":73186103,"comment_id":129257969,"body_markdown":"Thats a Java 16 bug, use java 11","body":"Thats a Java 16 bug, use java 11"},{"owner":{"account_id":22810107,"reputation":135,"user_id":16961560,"display_name":"jo1"},"score":0,"creation_date":1659627821,"post_id":73186103,"comment_id":129344851,"body_markdown":"thank you - uninstalled java 16 and used 11 instead.","body":"thank you - uninstalled java 16 and used 11 instead."}],"owner":{"account_id":22810107,"reputation":135,"user_id":16961560,"display_name":"jo1"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":339,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659293508,"creation_date":1659293508,"question_id":73186103,"body_markdown":"I am trying to run my Ionic app on a Android virtual device with capacitor, however i am having issues when running this command.\r\n\r\nCommand:\r\n\r\n    ionic capacitor run android\r\n\r\n  \r\n\r\nI get the following error:\r\n\r\n    Execution failed for task &#39;:app:processDebugMainManifest&#39;.\r\n    [capacitor] &gt; Unable to make field private final java.lang.String java.io.File.path accessible: module java.base does not &quot;opens java.io&quot; to unnamed module @10f1863c\r\n\r\nI am unsure what this means. Ios runs find, but android throws this error. Any help would be appreciated.","title":"ionic capacitor run android throws an error","body":"<p>I am trying to run my Ionic app on a Android virtual device with capacitor, however i am having issues when running this command.</p>\n<p>Command:</p>\n<pre><code>ionic capacitor run android\n</code></pre>\n<p>I get the following error:</p>\n<pre><code>Execution failed for task ':app:processDebugMainManifest'.\n[capacitor] &gt; Unable to make field private final java.lang.String java.io.File.path accessible: module java.base does not &quot;opens java.io&quot; to unnamed module @10f1863c\n</code></pre>\n<p>I am unsure what this means. Ios runs find, but android throws this error. Any help would be appreciated.</p>\n"},{"tags":["java","loops","timer","wait"],"answers":[{"tags":[],"owner":{"account_id":2848514,"reputation":10932,"user_id":2446208,"accept_rate":69,"display_name":"blacktide"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1659293286,"creation_date":1659292415,"answer_id":73185967,"question_id":73185804,"body_markdown":"The reason why it seems to be looping infinitely, is because the `myIterator.next()` call doesn&#39;t happen until the `TimerTask` is executed, so `myIterator.hasNext()` is not updating on each loop iteration. Try moving the `myIterator.next()` call outside of the `TimerTask` and inside the loop.\r\n\r\nYou can also maintain a count of each iteration to schedule each task in 5 second increments, as well as reusing the `Timer` instance.\r\n\r\nI would also recommend using a `while` loop instead of a `do-while` loop, unless you&#39;re certain that your iterator will always have at least one element, or else you may get a `NoSuchElementException`.\r\n\r\nHere is a working example:\r\n\r\n```java\r\nList&lt;String&gt; list = Arrays.asList(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;);\r\nIterator&lt;String&gt; iterator = list.iterator();\r\nint i = 0;\r\nTimer timer = new Timer();\r\nwhile(iterator.hasNext()) {\r\n    String value = iterator.next();\r\n    TimerTask task = new TimerTask() {\r\n        @Override\r\n        public void run() {\r\n            System.out.println(value);\r\n        }\r\n    };\r\n    timer.schedule(task, 5000L * i++);\r\n}\r\n```\r\n\r\nWhich outputs the following:\r\n\r\n```java\r\na // after 0 seconds\r\nb // after 5 seconds\r\nc // after 10 seconds\r\n```","title":"Using Java&#39;s Timer to wait for a period of time between loop iterations","body":"<p>The reason why it seems to be looping infinitely, is because the <code>myIterator.next()</code> call doesn't happen until the <code>TimerTask</code> is executed, so <code>myIterator.hasNext()</code> is not updating on each loop iteration. Try moving the <code>myIterator.next()</code> call outside of the <code>TimerTask</code> and inside the loop.</p>\n<p>You can also maintain a count of each iteration to schedule each task in 5 second increments, as well as reusing the <code>Timer</code> instance.</p>\n<p>I would also recommend using a <code>while</code> loop instead of a <code>do-while</code> loop, unless you're certain that your iterator will always have at least one element, or else you may get a <code>NoSuchElementException</code>.</p>\n<p>Here is a working example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; list = Arrays.asList(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;);\nIterator&lt;String&gt; iterator = list.iterator();\nint i = 0;\nTimer timer = new Timer();\nwhile(iterator.hasNext()) {\n    String value = iterator.next();\n    TimerTask task = new TimerTask() {\n        @Override\n        public void run() {\n            System.out.println(value);\n        }\n    };\n    timer.schedule(task, 5000L * i++);\n}\n</code></pre>\n<p>Which outputs the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>a // after 0 seconds\nb // after 5 seconds\nc // after 10 seconds\n</code></pre>\n"}],"owner":{"account_id":2440167,"reputation":1156,"user_id":2128915,"accept_rate":64,"display_name":"Fiery Phoenix"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":293,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73185967,"answer_count":1,"score":1,"last_activity_date":1659293286,"creation_date":1659291027,"question_id":73185804,"body_markdown":"Learning to use the Java Timer. \r\n\r\nIf I want to print the contents of an iterator inside a loop and wait for say 5 seconds inbetween each print, I could use `Thread.sleep`. But I&#39;m trying to do this without `Thread.sleep`. This is my attempt so far:\r\n\r\n\t\t\tdo {\r\n\t\t\t\tTimer printTimer = new Timer();\r\n\t\t\t\tprintTimer.schedule(\r\n\t\t\t\t    new TimerTask() {\r\n                      @Override\r\n\t\t\t\t      public void run() {  \r\n\t\t\t\t\t\tprint(myIterator.next().toString()); // using System.out.println internally\r\n\t\t\t\t\t }\r\n\t\t\t\t    }, 5000);\r\n\t\t\t} while (myIterator.hasNext())\r\n\r\nHowever, the above basically results in an infinite loop. It doesn&#39;t execute the task once per iteration and wait 5 seconds like I could do with `Thread.sleep`. In other words, it doesn&#39;t seem to check the `myIterator.hasNext()` condition. \r\n\r\nIs there a way to get it to simulate a call to `Thread.sleep(5000)` after printing? ","title":"Using Java&#39;s Timer to wait for a period of time between loop iterations","body":"<p>Learning to use the Java Timer.</p>\n<p>If I want to print the contents of an iterator inside a loop and wait for say 5 seconds inbetween each print, I could use <code>Thread.sleep</code>. But I'm trying to do this without <code>Thread.sleep</code>. This is my attempt so far:</p>\n<pre><code>        do {\n            Timer printTimer = new Timer();\n            printTimer.schedule(\n                new TimerTask() {\n                  @Override\n                  public void run() {  \n                    print(myIterator.next().toString()); // using System.out.println internally\n                 }\n                }, 5000);\n        } while (myIterator.hasNext())\n</code></pre>\n<p>However, the above basically results in an infinite loop. It doesn't execute the task once per iteration and wait 5 seconds like I could do with <code>Thread.sleep</code>. In other words, it doesn't seem to check the <code>myIterator.hasNext()</code> condition.</p>\n<p>Is there a way to get it to simulate a call to <code>Thread.sleep(5000)</code> after printing?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":1849514,"reputation":193868,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"score":0,"creation_date":1659291651,"post_id":73182604,"comment_id":129254778,"body_markdown":"What Android API level are you testing this on?","body":"What Android API level are you testing this on?"},{"owner":{"account_id":27431,"reputation":46856,"user_id":72437,"accept_rate":86,"display_name":"Cheok Yan Cheng"},"score":0,"creation_date":1659292393,"post_id":73182604,"comment_id":129254928,"body_markdown":"My app is targeting API 30 (Android 11) and I run such test in Android 12. I just notice such new behavior is for Android 12 ( https://developer.android.com/about/versions/12/behavior-changes-all#back-press ). Is this norm? Thanks.","body":"My app is targeting API 30 (Android 11) and I run such test in Android 12. I just notice such new behavior is for Android 12 ( <a href=\"https://developer.android.com/about/versions/12/behavior-changes-all#back-press\" rel=\"nofollow noreferrer\">developer.android.com/about/versions/12/&hellip;</a> ). Is this norm? Thanks."}],"answers":[{"tags":[],"owner":{"account_id":1849514,"reputation":193868,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1659292729,"creation_date":1659292729,"answer_id":73185994,"question_id":73182604,"body_markdown":"This is expected on all Android 12 and higher devices as per the [Behavior changes for all apps in Android 12][1]:\r\n\r\n&gt; Android 12 changes the default handling of the system Back press on launcher activities that are at the root of their tasks. In previous versions, the system would finish these activities on Back press. In Android 12, the system now moves the activity and its task to the background instead of finishing the activity. The new behavior matches the current behavior when navigating out of an app using the Home button or gesture.\r\n\r\nTherefore there is no way to tell the difference between the system back button and the home button on the root activity - they purposefully both put the activity in the exact same state in the exact same way. You shouldn&#39;t be trying to distinguish between the two as they are not meant to be treated any differently (i.e., you shouldn&#39;t clear any state or make any changes for one that you wouldn&#39;t also do for the other).\r\n\r\nThis only applies to the root activity of your task stack, which is why your other activities still show as `isFinishing()` when the back button is pressed.\r\n\r\n\r\n  [1]: https://developer.android.com/about/versions/12/behavior-changes-all#back-press","title":"Why does isFinishing() behaves differently in entry point Activity (with android.intent.action.MAIN) and non entry point Activity","body":"<p>This is expected on all Android 12 and higher devices as per the <a href=\"https://developer.android.com/about/versions/12/behavior-changes-all#back-press\" rel=\"nofollow noreferrer\">Behavior changes for all apps in Android 12</a>:</p>\n<blockquote>\n<p>Android 12 changes the default handling of the system Back press on launcher activities that are at the root of their tasks. In previous versions, the system would finish these activities on Back press. In Android 12, the system now moves the activity and its task to the background instead of finishing the activity. The new behavior matches the current behavior when navigating out of an app using the Home button or gesture.</p>\n</blockquote>\n<p>Therefore there is no way to tell the difference between the system back button and the home button on the root activity - they purposefully both put the activity in the exact same state in the exact same way. You shouldn't be trying to distinguish between the two as they are not meant to be treated any differently (i.e., you shouldn't clear any state or make any changes for one that you wouldn't also do for the other).</p>\n<p>This only applies to the root activity of your task stack, which is why your other activities still show as <code>isFinishing()</code> when the back button is pressed.</p>\n"}],"owner":{"account_id":27431,"reputation":46856,"user_id":72437,"accept_rate":86,"display_name":"Cheok Yan Cheng"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73185994,"answer_count":1,"score":1,"last_activity_date":1659292729,"creation_date":1659264438,"question_id":73182604,"body_markdown":"I have 2 types of `Activity` - \r\n\r\n 1. One acts as the entry point of the Application, with `android.intent.action.MAIN`.\r\n 2. Another activity is launched by the entry point activity.\r\n\r\nThey looks as the following\r\n\r\n    // Act as entry point of the application, with android.intent.action.MAIN\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        @Override\r\n        public void onPause() {\r\n            super.onPause();\r\n    \r\n            Log.i(TAG, &quot;MainActivity isFinishing() : &quot; + this.isFinishing());\r\n        }\r\n    }\r\n    \r\n    // Launched by MainActivity.\r\n    public class MainActivity2 extends AppCompatActivity {\r\n    \r\n        @Override\r\n        public void onPause() {\r\n            super.onPause();\r\n    \r\n            Log.i(TAG, &quot;MainActivity2 isFinishing() : &quot; + this.isFinishing());\r\n        }\r\n    }\r\n\r\nI notice that `this.isFinishing()` behaves differently in both Activity, when I tested via\r\n\r\n 1. Back button press\r\n 2. Home button press\r\n\r\nHere&#39;s the observation\r\n\r\nMainActivity (Entry point Activity)\r\n-----------------------------------\r\n\r\n 1. When back button pressed, `isFinishing()` returns false.\r\n 2. When home button pressed, `isFinishing()` returns false.\r\n\r\nMainActivity2 (Launched by MainActivity)\r\n----------------------------------------\r\n\r\n 1. When back button pressed, `isFinishing()` returns **true**.\r\n 2. When home button pressed, `isFinishing()` returns false.\r\n\r\n\r\n----------\r\n\r\nI want to differentiate between back button press, and home button press by using `isFinishing()` method. Now, I realize I can&#39;t do that in entry point Activity, because both scenarios returns the same `false`.\r\n\r\nMay I know, why does isFinishing() behaves differently in entry point Activity (with android.intent.action.MAIN) and non entry point Activity?\r\n\r\nThanks.","title":"Why does isFinishing() behaves differently in entry point Activity (with android.intent.action.MAIN) and non entry point Activity","body":"<p>I have 2 types of <code>Activity</code> -</p>\n<ol>\n<li>One acts as the entry point of the Application, with <code>android.intent.action.MAIN</code>.</li>\n<li>Another activity is launched by the entry point activity.</li>\n</ol>\n<p>They looks as the following</p>\n<pre><code>// Act as entry point of the application, with android.intent.action.MAIN\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    public void onPause() {\n        super.onPause();\n\n        Log.i(TAG, &quot;MainActivity isFinishing() : &quot; + this.isFinishing());\n    }\n}\n\n// Launched by MainActivity.\npublic class MainActivity2 extends AppCompatActivity {\n\n    @Override\n    public void onPause() {\n        super.onPause();\n\n        Log.i(TAG, &quot;MainActivity2 isFinishing() : &quot; + this.isFinishing());\n    }\n}\n</code></pre>\n<p>I notice that <code>this.isFinishing()</code> behaves differently in both Activity, when I tested via</p>\n<ol>\n<li>Back button press</li>\n<li>Home button press</li>\n</ol>\n<p>Here's the observation</p>\n<h2>MainActivity (Entry point Activity)</h2>\n<ol>\n<li>When back button pressed, <code>isFinishing()</code> returns false.</li>\n<li>When home button pressed, <code>isFinishing()</code> returns false.</li>\n</ol>\n<h2>MainActivity2 (Launched by MainActivity)</h2>\n<ol>\n<li>When back button pressed, <code>isFinishing()</code> returns <strong>true</strong>.</li>\n<li>When home button pressed, <code>isFinishing()</code> returns false.</li>\n</ol>\n<hr />\n<p>I want to differentiate between back button press, and home button press by using <code>isFinishing()</code> method. Now, I realize I can't do that in entry point Activity, because both scenarios returns the same <code>false</code>.</p>\n<p>May I know, why does isFinishing() behaves differently in entry point Activity (with android.intent.action.MAIN) and non entry point Activity?</p>\n<p>Thanks.</p>\n"},{"tags":["java","spring-boot","authentication","authorization","websecurity"],"answers":[{"tags":[],"owner":{"account_id":17866469,"reputation":46,"user_id":12978730,"display_name":"Bahmed Benyammi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659292473,"creation_date":1659292473,"answer_id":73185969,"question_id":73184448,"body_markdown":"just add `loginProcessingUrl()`\r\n\r\n    ....\r\n     http\r\n                .cors().and().csrf().disable()\r\n                .authorizeRequests()\r\n                .antMatchers(&quot;/yolo/**&quot;).permitAll()\r\n                .anyRequest().authenticated()\r\n                .and().formLogin()\r\n                .loginPage(&quot;/login&quot;).permitAll().loginProcessingUrl(&quot;/login&quot;)//or any another url ,this url accept just post request\r\n                .and()\r\n                .logout().permitAll();","title":"Authenticating without WebSecurityConfigurerAdapter","body":"<p>just add <code>loginProcessingUrl()</code></p>\n<pre><code>....\n http\n            .cors().and().csrf().disable()\n            .authorizeRequests()\n            .antMatchers(&quot;/yolo/**&quot;).permitAll()\n            .anyRequest().authenticated()\n            .and().formLogin()\n            .loginPage(&quot;/login&quot;).permitAll().loginProcessingUrl(&quot;/login&quot;)//or any another url ,this url accept just post request\n            .and()\n            .logout().permitAll();\n</code></pre>\n"}],"owner":{"account_id":25093748,"reputation":67,"user_id":18945133,"display_name":"coolguy123"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":272,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73185969,"answer_count":1,"score":1,"last_activity_date":1659292473,"creation_date":1659280328,"question_id":73184448,"body_markdown":"I&#39;ve been following issues such as [this][1] one in order to figure out how to implement Authentication without WebSecurityConfigurerAdapter, but my code simply fails to work.\r\n\r\nThis is my SecurityConfig class:\r\n\r\n    package com.authentication.take.security;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.context.annotation.Lazy;\r\n    import org.springframework.security.authentication.AuthenticationManager;\r\n    import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\n    import org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\n    import org.springframework.security.crypto.password.NoOpPasswordEncoder;\r\n    import org.springframework.security.crypto.password.PasswordEncoder;\r\n    import org.springframework.security.web.SecurityFilterChain;\r\n    \r\n    import com.authentication.take.services.CustomUserDetailsService;\r\n    \r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfig {\r\n    \t\r\n    \tprivate final CustomUserDetailsService customUserDetailsService;\r\n    \tprivate final AuthenticationConfiguration configuration;\r\n    \r\n    \tpublic SecurityConfig(CustomUserDetailsService customUserDetailsService,\r\n    \t\t\tAuthenticationConfiguration configuration) {\r\n    \t\tsuper();\r\n    \t\tthis.customUserDetailsService = customUserDetailsService;\r\n    \t\tthis.configuration = configuration;\r\n    \t}\r\n    \t\r\n    \t@Bean\r\n    \tpublic PasswordEncoder getPasswordEncoder() {\r\n    \t\treturn NoOpPasswordEncoder.getInstance();\r\n    \t}\r\n    \t\r\n    \t@Bean\r\n    \tprotected SecurityFilterChain filterChain(HttpSecurity http) \r\n    \tthrows Exception {\r\n    \t    http\r\n    \t            .cors().and().csrf().disable()\r\n    \t            .authorizeRequests()\r\n    \t            .antMatchers(&quot;/yolo/**&quot;).permitAll()\r\n    \t            .anyRequest().authenticated()\r\n    \t            .and().formLogin()\r\n    \t            .loginPage(&quot;/login&quot;).permitAll()\r\n                    .and()\r\n                    .logout().permitAll();\r\n    \t    return http.build();\r\n    \t}\r\n    \t\r\n    \t@Bean\r\n        AuthenticationManager authenticationManager() throws Exception {\r\n            return configuration.getAuthenticationManager();\r\n        }\r\n    \t\r\n        void configure(AuthenticationManagerBuilder builder) throws Exception {\r\n            builder.userDetailsService(customUserDetailsService).passwordEncoder(getPasswordEncoder());\r\n        }\r\n    }\r\n\r\nThe problem I am getting is that the /login route is being overriden somehow, and cannot be found. Therefore, when I post data to /login, it isn&#39;t interpreted because there is no form in that location.\r\n\r\n  [1]: https://stackoverflow.com/questions/71605941/spring-security-global-authenticationmanager-without-the-websecurityconfigurera","title":"Authenticating without WebSecurityConfigurerAdapter","body":"<p>I've been following issues such as <a href=\"https://stackoverflow.com/questions/71605941/spring-security-global-authenticationmanager-without-the-websecurityconfigurera\">this</a> one in order to figure out how to implement Authentication without WebSecurityConfigurerAdapter, but my code simply fails to work.</p>\n<p>This is my SecurityConfig class:</p>\n<pre><code>package com.authentication.take.security;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.Lazy;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.crypto.password.NoOpPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.SecurityFilterChain;\n\nimport com.authentication.take.services.CustomUserDetailsService;\n\n@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n    \n    private final CustomUserDetailsService customUserDetailsService;\n    private final AuthenticationConfiguration configuration;\n\n    public SecurityConfig(CustomUserDetailsService customUserDetailsService,\n            AuthenticationConfiguration configuration) {\n        super();\n        this.customUserDetailsService = customUserDetailsService;\n        this.configuration = configuration;\n    }\n    \n    @Bean\n    public PasswordEncoder getPasswordEncoder() {\n        return NoOpPasswordEncoder.getInstance();\n    }\n    \n    @Bean\n    protected SecurityFilterChain filterChain(HttpSecurity http) \n    throws Exception {\n        http\n                .cors().and().csrf().disable()\n                .authorizeRequests()\n                .antMatchers(&quot;/yolo/**&quot;).permitAll()\n                .anyRequest().authenticated()\n                .and().formLogin()\n                .loginPage(&quot;/login&quot;).permitAll()\n                .and()\n                .logout().permitAll();\n        return http.build();\n    }\n    \n    @Bean\n    AuthenticationManager authenticationManager() throws Exception {\n        return configuration.getAuthenticationManager();\n    }\n    \n    void configure(AuthenticationManagerBuilder builder) throws Exception {\n        builder.userDetailsService(customUserDetailsService).passwordEncoder(getPasswordEncoder());\n    }\n}\n</code></pre>\n<p>The problem I am getting is that the /login route is being overriden somehow, and cannot be found. Therefore, when I post data to /login, it isn't interpreted because there is no form in that location.</p>\n"},{"tags":["java","spring","aop","execution"],"comments":[{"owner":{"account_id":9583217,"reputation":9600,"user_id":7117003,"display_name":"petezurich"},"score":0,"creation_date":1499577908,"post_id":44993253,"comment_id":76961125,"body_markdown":"Welcome to SO. Please look into this to improve your questions, especially regarding formatting and proofreading: https://stackoverflow.com/help/how-to-ask","body":"Welcome to SO. Please look into this to improve your questions, especially regarding formatting and proofreading: <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}],"answers":[{"tags":[],"owner":{"account_id":2914806,"reputation":5288,"user_id":2596915,"accept_rate":14,"display_name":"xyz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659292078,"creation_date":1499774553,"answer_id":45034071,"question_id":44993253,"body_markdown":"in this case `within(concert.*)` is important and result will not be  the same as just with `execution(* concert.Performance.perform(..))` \r\n\r\nexecution it&#39;s matching for  methods.\r\n\r\nwithin it&#39;s matching for types.\r\n\r\nin this example you already has poincut execution -- for any parameter for method \r\nperform with any access modifier and you add &#39;specific type&#39; - `within(concert.*)`\r\n\r\nso your poincut it&#39;s --\r\n\r\n    execution(* concert.Performance.perform(..)) &amp;&amp; within(concert.*)\r\n\r\nfor *any return type* , for *method perform* *from class Performance* from `package concert` that consume *any type from package and sub - package concert*\r\n\r\nin case if you have just `execution(* concert.Performance.perform(..))` it almost the same as for previous except that type can by ANY","title":"within is not necessary,spring aop.execution(* concert.Performance.perform(..)) &amp;&amp; within(concert.*)","body":"<p>in this case <code>within(concert.*)</code> is important and result will not be  the same as just with <code>execution(* concert.Performance.perform(..))</code></p>\n<p>execution it's matching for  methods.</p>\n<p>within it's matching for types.</p>\n<p>in this example you already has poincut execution -- for any parameter for method\nperform with any access modifier and you add 'specific type' - <code>within(concert.*)</code></p>\n<p>so your poincut it's --</p>\n<pre><code>execution(* concert.Performance.perform(..)) &amp;&amp; within(concert.*)\n</code></pre>\n<p>for <em>any return type</em> , for <em>method perform</em> <em>from class Performance</em> from <code>package concert</code> that consume <em>any type from package and sub - package concert</em></p>\n<p>in case if you have just <code>execution(* concert.Performance.perform(..))</code> it almost the same as for previous except that type can by ANY</p>\n"}],"owner":{"account_id":8880491,"reputation":65,"user_id":6630815,"accept_rate":83,"display_name":"user6630815"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":276,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":45034071,"answer_count":1,"score":0,"last_activity_date":1659292078,"creation_date":1499577764,"question_id":44993253,"body_markdown":"In the book &quot;spring in action&quot;,there is an aspectj expresssion:\r\n\r\n    execution(* concert.Performance.perform(..)) &amp;&amp; within(concert.*)\r\n\r\nexecution() Matches join points that are method execution.  \r\nYou  use  the execution() designator to select  Performances perform() method.\r\n\r\n    execution(* concert.Performance.perform(..))\r\n\r\n\r\nwithin() Limits matching to join points within certain type.  \r\nyou want to confine the reach of that pointcut to only the concert package.\r\n\r\n    within(concert.*)\r\n\r\nBut I think,left part and right part of the expression both matches join points,&quot;* concert.Performance.perform(..)&quot; indicates join points must be in one class &quot;Performance&quot;,it is already in package &quot;concert&quot;,so what is the use of &quot;within(concert.*)&quot;?  \r\nIf it is an &quot;or&quot;,maybe useful,but it is an &quot;and&quot;.","title":"within is not necessary,spring aop.execution(* concert.Performance.perform(..)) &amp;&amp; within(concert.*)","body":"<p>In the book \"spring in action\",there is an aspectj expresssion:</p>\n\n<pre><code>execution(* concert.Performance.perform(..)) &amp;&amp; within(concert.*)\n</code></pre>\n\n<p>execution() Matches join points that are method execution.<br>\nYou  use  the execution() designator to select  Performances perform() method.</p>\n\n<pre><code>execution(* concert.Performance.perform(..))\n</code></pre>\n\n<p>within() Limits matching to join points within certain type.<br>\nyou want to confine the reach of that pointcut to only the concert package.</p>\n\n<pre><code>within(concert.*)\n</code></pre>\n\n<p>But I think,left part and right part of the expression both matches join points,\"* concert.Performance.perform(..)\" indicates join points must be in one class \"Performance\",it is already in package \"concert\",so what is the use of \"within(concert.*)\"?<br>\nIf it is an \"or\",maybe useful,but it is an \"and\".</p>\n"},{"tags":["java","android","android-studio","android-fragments","android-navigation-bar"],"answers":[{"tags":[],"owner":{"account_id":1849514,"reputation":193868,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1659291586,"creation_date":1659291586,"answer_id":73185876,"question_id":73184891,"body_markdown":"Your XML file says:\r\n\r\n    android:name=&quot;com.example.jetpacklesson.MainFragment&quot;\r\n\r\nIf you want that to be a `NavHostFragment`, you need to change that to\r\n\r\n    android:name=&quot;androidx.navigation.fragment.NavHostFragment&quot;\r\n\r\nAs per the [Navigation Getting Started guide][1].\r\n\r\n\r\n  [1]: https://developer.android.com/guide/navigation/navigation-getting-started#add-navhostfragment","title":"ERROR: cannot be cast to androidx.navigation.fragment.NavHostFragment. -- app crashing every time","body":"<p>Your XML file says:</p>\n<pre><code>android:name=&quot;com.example.jetpacklesson.MainFragment&quot;\n</code></pre>\n<p>If you want that to be a <code>NavHostFragment</code>, you need to change that to</p>\n<pre><code>android:name=&quot;androidx.navigation.fragment.NavHostFragment&quot;\n</code></pre>\n<p>As per the <a href=\"https://developer.android.com/guide/navigation/navigation-getting-started#add-navhostfragment\" rel=\"noreferrer\">Navigation Getting Started guide</a>.</p>\n"}],"owner":{"account_id":22858744,"reputation":153,"user_id":19369820,"display_name":"Elazar Halperin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1318,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73185876,"answer_count":1,"score":2,"last_activity_date":1659291586,"creation_date":1659283959,"question_id":73184891,"body_markdown":"So I&#39;m trying to build an app with a bottom navigation bar that will switch between fragments.\r\nI did the coding according to some documentation.\r\n\r\nI tried every solution on the internet but none of them seems to work for me.\r\n\r\nthe error:\r\n```\r\nCaused by: java.lang.ClassCastException: com.example.jetpacklesson.MainFragment cannot be cast to androidx.navigation.fragment.NavHostFragment\r\n        at com.example.jetpacklesson.MainActivity.onCreate(MainActivity.java:30)\r\n```\r\n\r\nhere is the XML main activity code\r\n```\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n    &lt;androidx.fragment.app.FragmentContainerView\r\n        android:id=&quot;@+id/firstFragmentHolder&quot;\r\n        android:layout_width=&quot;0dp&quot;\r\n        android:layout_height=&quot;0dp&quot;\r\n        android:name=&quot;com.example.jetpacklesson.MainFragment&quot;\r\n        app:defaultNavHost = &quot;true&quot;\r\n        app:layout_constraintBottom_toTopOf=&quot;@+id/bnv_bottomBar&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:navGraph = &quot;@navigation/nav_graph&quot;/&gt;\r\n\r\n    &lt;com.google.android.material.bottomnavigation.BottomNavigationView\r\n        android:id=&quot;@+id/bnv_bottomBar&quot;\r\n        android:layout_width=&quot;0dp&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:menu=&quot;@menu/nav_bottom_navigation&quot; /&gt;\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n````\r\nand main activity java code:\r\n\r\n```\r\n\r\n    BottomNavigationView bnv_navigationBar;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        \r\n        NavHostFragment navHostFragment = (NavHostFragment) getSupportFragmentManager().findFragmentById(R.id.firstFragmentHolder);\r\n        NavController navController = navHostFragment.getNavController();\r\n        bnv_navigationBar = findViewById(R.id.bnv_bottomBar);\r\n        NavigationUI.setupWithNavController(bnv_navigationBar, navController);\r\n    }\r\n","title":"ERROR: cannot be cast to androidx.navigation.fragment.NavHostFragment. -- app crashing every time","body":"<p>So I'm trying to build an app with a bottom navigation bar that will switch between fragments.\nI did the coding according to some documentation.</p>\n<p>I tried every solution on the internet but none of them seems to work for me.</p>\n<p>the error:</p>\n<pre><code>Caused by: java.lang.ClassCastException: com.example.jetpacklesson.MainFragment cannot be cast to androidx.navigation.fragment.NavHostFragment\n        at com.example.jetpacklesson.MainActivity.onCreate(MainActivity.java:30)\n</code></pre>\n<p>here is the XML main activity code</p>\n<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;androidx.fragment.app.FragmentContainerView\n        android:id=&quot;@+id/firstFragmentHolder&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;0dp&quot;\n        android:name=&quot;com.example.jetpacklesson.MainFragment&quot;\n        app:defaultNavHost = &quot;true&quot;\n        app:layout_constraintBottom_toTopOf=&quot;@+id/bnv_bottomBar&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:navGraph = &quot;@navigation/nav_graph&quot;/&gt;\n\n    &lt;com.google.android.material.bottomnavigation.BottomNavigationView\n        android:id=&quot;@+id/bnv_bottomBar&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:menu=&quot;@menu/nav_bottom_navigation&quot; /&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>and main activity java code:</p>\n<pre><code>\n    BottomNavigationView bnv_navigationBar;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        \n        NavHostFragment navHostFragment = (NavHostFragment) getSupportFragmentManager().findFragmentById(R.id.firstFragmentHolder);\n        NavController navController = navHostFragment.getNavController();\n        bnv_navigationBar = findViewById(R.id.bnv_bottomBar);\n        NavigationUI.setupWithNavController(bnv_navigationBar, navController);\n    }\n</code></pre>\n"},{"tags":["java","spring","spring-integration","ibm-mq","message-queue"],"comments":[{"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1659150487,"post_id":73171307,"comment_id":129231023,"body_markdown":"You dont show what is subscribed to that `inbound.endpoint` channel . The stack trace should really say what channel is without subscribers. Or you use very old out of support Spring Integration version","body":"You dont show what is subscribed to that <code>inbound.endpoint</code> channel . The stack trace should really say what channel is without subscribers. Or you use very old out of support Spring Integration version"},{"owner":{"account_id":11963552,"reputation":247,"user_id":8753957,"accept_rate":40,"display_name":"Santosh Ravi Teja"},"score":0,"creation_date":1659274051,"post_id":73171307,"comment_id":129250769,"body_markdown":"I have added the subscriptions to `inbound.endpoint`. Could you once advise now ?","body":"I have added the subscriptions to <code>inbound.endpoint</code>. Could you once advise now ?"},{"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1659274305,"post_id":73171307,"comment_id":129250816,"body_markdown":"The `&lt;chain&gt;` cannot be empty. You also dont show who is subscribing to that `inbound.xml.database`. See the stack trace carefully to determine what channel consumer is missing","body":"The <code>&lt;chain&gt;</code> cannot be empty. You also dont show who is subscribing to that <code>inbound.xml.database</code>. See the stack trace carefully to determine what channel consumer is missing"},{"owner":{"account_id":11963552,"reputation":247,"user_id":8753957,"accept_rate":40,"display_name":"Santosh Ravi Teja"},"score":0,"creation_date":1659274392,"post_id":73171307,"comment_id":129250833,"body_markdown":"Updated the dispatcher for the channel Ids now and also added the chain `&lt;chain input-channel=&quot;inbound.endpoint.xml&quot;`","body":"Updated the dispatcher for the channel Ids now and also added the chain <code>&lt;chain input-channel=&quot;inbound.endpoint.xml&quot;</code>"},{"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1659274631,"post_id":73171307,"comment_id":129250877,"body_markdown":"Not sure what you mean: I have already commented your edit.","body":"Not sure what you mean: I have already commented your edit."},{"owner":{"account_id":11963552,"reputation":247,"user_id":8753957,"accept_rate":40,"display_name":"Santosh Ravi Teja"},"score":0,"creation_date":1659275025,"post_id":73171307,"comment_id":129250946,"body_markdown":"I mean - while you were commenting I added the following details. `&lt;chain&gt;` was added too and also the `&lt;channel id&gt;`.","body":"I mean - while you were commenting I added the following details. <code>&lt;chain&gt;</code> was added too and also the <code>&lt;channel id&gt;</code>."},{"owner":{"account_id":11963552,"reputation":247,"user_id":8753957,"accept_rate":40,"display_name":"Santosh Ravi Teja"},"score":0,"creation_date":1659275093,"post_id":73171307,"comment_id":129250963,"body_markdown":"`&lt;channel id=&quot;inbound.endpoint&quot;&gt;\n    &lt;dispatcher task-executor=&quot;preDatabaseChannelExecutor&quot;/&gt;\n&lt;/channel&gt;`\n`&lt;bridge input-channel=&quot;inbound.endpoint&quot; output-channel=&quot;inbound.endpoint.xml&quot;/&gt;`\n`&lt;channel id=&quot;inbound.endpoint.xml&quot; datatype=&quot;java.lang.String&quot;/&gt;`\n`&lt;chain input-channel=&quot;inbound.endpoint.xml&quot; output-channel=&quot;inbound.xml.database&quot;&gt;\n&lt;/chain&gt;`\n\n`&lt;channel id=&quot;inbound.xml.database&quot;&gt;\n    &lt;dispatcher task-executor=&quot;postDatabaseChannelExecutor&quot;/&gt;\n&lt;/channel&gt;`","body":"<code>&lt;channel id=&quot;inbound.endpoint&quot;&gt;     &lt;dispatcher task-executor=&quot;preDatabaseChannelExecutor&quot;&#47;&gt; &lt;&#47;channel&gt;</code> <code>&lt;bridge input-channel=&quot;inbound.endpoint&quot; output-channel=&quot;inbound.endpoint.xml&quot;&#47;&gt;</code> <code>&lt;channel id=&quot;inbound.endpoint.xml&quot; datatype=&quot;java.lang.String&quot;&#47;&gt;</code> <code>&lt;chain input-channel=&quot;inbound.endpoint.xml&quot; output-channel=&quot;inbound.xml.database&quot;&gt; &lt;&#47;chain&gt;</code>  <code>&lt;channel id=&quot;inbound.xml.database&quot;&gt;     &lt;dispatcher task-executor=&quot;postDatabaseChannelExecutor&quot;&#47;&gt; &lt;&#47;channel&gt;</code>"},{"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1659275226,"post_id":73171307,"comment_id":129250989,"body_markdown":"Right. I commented exactly that. Does it work now? Do you see any clues in the stack trace what part of your flow fails?","body":"Right. I commented exactly that. Does it work now? Do you see any clues in the stack trace what part of your flow fails?"},{"owner":{"account_id":11963552,"reputation":247,"user_id":8753957,"accept_rate":40,"display_name":"Santosh Ravi Teja"},"score":0,"creation_date":1659291198,"post_id":73171307,"comment_id":129254677,"body_markdown":"Thanks a lot, @ArtemBilan. I printed the exception stack trace to figure out the channel and the suggestions above and in the link https://stackoverflow.com/questions/53597318/spring-integration-dispatcher-has-no-subscribers have helped.","body":"Thanks a lot, @ArtemBilan. I printed the exception stack trace to figure out the channel and the suggestions above and in the link <a href=\"https://stackoverflow.com/questions/53597318/spring-integration-dispatcher-has-no-subscribers\" title=\"spring integration dispatcher has no subscribers\">stackoverflow.com/questions/53597318/&hellip;</a> have helped."}],"answers":[{"tags":[],"owner":{"account_id":11963552,"reputation":247,"user_id":8753957,"accept_rate":40,"display_name":"Santosh Ravi Teja"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659291205,"creation_date":1659291205,"answer_id":73185827,"question_id":73171307,"body_markdown":"**Fix:**\r\n\r\nLooks like I missed adding the `&lt;service-activator&gt; input-channel` for the &quot;channel&quot; which had an issue with &quot;dispatcher has no subscribers&quot;.\r\n\r\nI had my channel in the output-channel\r\n\r\nThe channel was `outbound.f.queue` and added the line\r\n\r\n`&lt;service-activator&gt; input-channel=&quot;outbound_f.queue&quot; ref=&quot;outboundPublisher&quot;/&gt;`\r\n\r\nThis link also has helped: https://stackoverflow.com/questions/53597318/spring-integration-dispatcher-has-no-subscribers","title":"MessageDispatchingException: Dispatcher has no subscribers bad message cause = null","body":"<p><strong>Fix:</strong></p>\n<p>Looks like I missed adding the <code>&lt;service-activator&gt; input-channel</code> for the &quot;channel&quot; which had an issue with &quot;dispatcher has no subscribers&quot;.</p>\n<p>I had my channel in the output-channel</p>\n<p>The channel was <code>outbound.f.queue</code> and added the line</p>\n<p><code>&lt;service-activator&gt; input-channel=&quot;outbound_f.queue&quot; ref=&quot;outboundPublisher&quot;/&gt;</code></p>\n<p>This link also has helped: <a href=\"https://stackoverflow.com/questions/53597318/spring-integration-dispatcher-has-no-subscribers\">Spring Integration - Dispatcher has no subscribers</a></p>\n"}],"owner":{"account_id":11963552,"reputation":247,"user_id":8753957,"accept_rate":40,"display_name":"Santosh Ravi Teja"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659291205,"creation_date":1659131501,"question_id":73171307,"body_markdown":"I&#39;m implementing an MQ producer which will send messages via an OUT Queue. I have the channel, bridge, outbound bean, and the JMS outbound-channel-adapter setup. When I run my test case by sending the message, I see this error-&gt; `bad message cause=org.springframework.integration.MessageDispatchingException: Dispatcher has no subscribersbad message cause=null`\r\n\r\nMessage config.xml\r\n\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoing=&quot;utf-8&quot;?&gt;\r\n          &lt;beans\r\n            \r\n          &lt;int:channel id=&quot;inbound.rawjms&quot;&gt;\r\n             &lt;int: interceptors&gt;\r\n                &lt;int ref bean=&quot;jmsTransportHeaderEnricher&quot;/&gt;\r\n             &lt;/int: interceptors&gt;\r\n          &lt;/int:channel&gt;\r\n        \r\n        &lt;int:bridge input-channel=&quot;inbound.rawjms&quot; output-channel=&quot;inbound.endpoint&quot;/&gt;\r\n\r\n    &lt;channel id=&quot;inbound.endpoint&quot;&gt;\r\n        &lt;dispatcher task-executor=&quot;preDatabaseChannelExecutor&quot;/&gt;\r\n    &lt;/channel&gt;\r\n\r\n    &lt;bridge input-channel=&quot;inbound.endpoint&quot; output-channel=&quot;inbound.endpoint.xml&quot;/&gt;\r\n\r\n    &lt;channel id=&quot;inbound.endpoint.xml&quot; datatype=&quot;java.lang.String&quot;/&gt;\r\n    &lt;chain input-channel=&quot;inbound.endpoint.xml&quot; output-channel=&quot;inbound.xml.database&quot;&gt;\r\n    &lt;/chain&gt;\r\n\r\n\r\n    &lt;channel id=&quot;inbound.xml.database&quot;&gt;\r\n        &lt;dispatcher task-executor=&quot;postDatabaseChannelExecutor&quot;/&gt;\r\n    &lt;/channel&gt;\r\n                \r\n        &lt;bean id=&quot;jms.queue&quot; class=&quot;com.ibm.mq.jms.MQQueue&quot;&gt;\r\n          &lt;constructir-arg index=&quot;0&quot; value=&quot;${txbus.mq.destination.outbound.queue}&quot;/&gt;\r\n        &lt;/bean&gt;\r\n        \r\n    &lt;channel id=&quot;outbound.f.queue&quot; datatype=&quot;java.lang.String&quot;/&gt;\r\n    \r\n        &lt;int-jms:outbound-channel-adapter\r\n               id=&quot;jms.outbound.adapter.queue&quot;\r\n               channel=&quot;outbound.f.queue&quot;\r\n               connection-factory=&quot;connectionFactory&quot;\r\n               destination=&quot;jms.queue&quot;\r\n               auto-startup=&quot;true&quot;/&gt;\r\n        &lt;/beans&gt;\r\n\r\nConfig Class\r\n\r\n    @Configuration\r\n    @ImportResource(&quot;classpath:/META-INF/spring/message-config.xml&quot;)\r\n    public class Config{\r\n    \r\n    \r\n       @Bean\r\n       public Queue focusIn(@Value(&quot;${txbus.mq.destination}&quot;) String destinationIn){\r\n         return new MQQueue(destinationIn);\r\n      }\r\n    \r\n    }\r\n\r\n**NOTE:** I have removed the `xmlns, xmlns:xsi, xsi:schema location` from the `.xml` file as I couldn&#39;t copy them over.\r\n","title":"MessageDispatchingException: Dispatcher has no subscribers bad message cause = null","body":"<p>I'm implementing an MQ producer which will send messages via an OUT Queue. I have the channel, bridge, outbound bean, and the JMS outbound-channel-adapter setup. When I run my test case by sending the message, I see this error-&gt; <code>bad message cause=org.springframework.integration.MessageDispatchingException: Dispatcher has no subscribersbad message cause=null</code></p>\n<p>Message config.xml</p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoing=&quot;utf-8&quot;?&gt;\n      &lt;beans\n        \n      &lt;int:channel id=&quot;inbound.rawjms&quot;&gt;\n         &lt;int: interceptors&gt;\n            &lt;int ref bean=&quot;jmsTransportHeaderEnricher&quot;/&gt;\n         &lt;/int: interceptors&gt;\n      &lt;/int:channel&gt;\n    \n    &lt;int:bridge input-channel=&quot;inbound.rawjms&quot; output-channel=&quot;inbound.endpoint&quot;/&gt;\n\n&lt;channel id=&quot;inbound.endpoint&quot;&gt;\n    &lt;dispatcher task-executor=&quot;preDatabaseChannelExecutor&quot;/&gt;\n&lt;/channel&gt;\n\n&lt;bridge input-channel=&quot;inbound.endpoint&quot; output-channel=&quot;inbound.endpoint.xml&quot;/&gt;\n\n&lt;channel id=&quot;inbound.endpoint.xml&quot; datatype=&quot;java.lang.String&quot;/&gt;\n&lt;chain input-channel=&quot;inbound.endpoint.xml&quot; output-channel=&quot;inbound.xml.database&quot;&gt;\n&lt;/chain&gt;\n\n\n&lt;channel id=&quot;inbound.xml.database&quot;&gt;\n    &lt;dispatcher task-executor=&quot;postDatabaseChannelExecutor&quot;/&gt;\n&lt;/channel&gt;\n            \n    &lt;bean id=&quot;jms.queue&quot; class=&quot;com.ibm.mq.jms.MQQueue&quot;&gt;\n      &lt;constructir-arg index=&quot;0&quot; value=&quot;${txbus.mq.destination.outbound.queue}&quot;/&gt;\n    &lt;/bean&gt;\n    \n&lt;channel id=&quot;outbound.f.queue&quot; datatype=&quot;java.lang.String&quot;/&gt;\n\n    &lt;int-jms:outbound-channel-adapter\n           id=&quot;jms.outbound.adapter.queue&quot;\n           channel=&quot;outbound.f.queue&quot;\n           connection-factory=&quot;connectionFactory&quot;\n           destination=&quot;jms.queue&quot;\n           auto-startup=&quot;true&quot;/&gt;\n    &lt;/beans&gt;\n</code></pre>\n<p>Config Class</p>\n<pre><code>@Configuration\n@ImportResource(&quot;classpath:/META-INF/spring/message-config.xml&quot;)\npublic class Config{\n\n\n   @Bean\n   public Queue focusIn(@Value(&quot;${txbus.mq.destination}&quot;) String destinationIn){\n     return new MQQueue(destinationIn);\n  }\n\n}\n</code></pre>\n<p><strong>NOTE:</strong> I have removed the <code>xmlns, xmlns:xsi, xsi:schema location</code> from the <code>.xml</code> file as I couldn't copy them over.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1659291370,"post_id":73162194,"comment_id":129254716,"body_markdown":"Please **don&#39;t** post your code as an image. See if you wonder why: https://stackoverflow.com/help/how-to-ask and https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors-when-asking-a-question","body":"Please <b>don&#39;t</b> post your code as an image. See if you wonder why: <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> and <a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors-when-asking-a-question\" title=\"why should i not upload images of code data errors when asking a question\">meta.stackoverflow.com/questions/285551/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":25888394,"reputation":37,"user_id":19616150,"display_name":"JayCold"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659291008,"creation_date":1659074687,"answer_id":73162239,"question_id":73162194,"body_markdown":"To fix this problem, I&#39;ve done the following:\r\n 1. Instead of the annotation `@RestController` on the class, I&#39;ve applied `@Controller`.\r\n 2. *`html`-files* should reside in the following location: `resources/templates/`.","title":"sts4 how can connect Controller with html?","body":"<p>To fix this problem, I've done the following:</p>\n<ol>\n<li>Instead of the annotation <code>@RestController</code> on the class, I've applied <code>@Controller</code>.</li>\n<li><em><code>html</code>-files</em> should reside in the following location: <code>resources/templates/</code>.</li>\n</ol>\n"}],"owner":{"account_id":25888394,"reputation":37,"user_id":19616150,"display_name":"JayCold"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659291008,"creation_date":1659074330,"question_id":73162194,"body_markdown":"Trying to connect a Controller and html files in sts4.  \r\nBut instead of index.html connection, just browser showing &quot;index&quot; string on the screen.  \r\nHow can i connect with a html file and Controller.  \r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  \r\n[![enter image description here][2]][2]\r\n\r\n\r\n   [![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Q3Ur4.png\r\n  [2]: https://i.stack.imgur.com/lcQEj.png\r\n  [3]: https://i.stack.imgur.com/Unpw9.png","title":"sts4 how can connect Controller with html?","body":"<p>Trying to connect a Controller and html files in sts4.<br />\nBut instead of index.html connection, just browser showing &quot;index&quot; string on the screen.<br />\nHow can i connect with a html file and Controller.</p>\n<p><a href=\"https://i.stack.imgur.com/Q3Ur4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Q3Ur4.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/lcQEj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lcQEj.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/Unpw9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Unpw9.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android","kotlin","user-interface"],"comments":[{"owner":{"account_id":18463410,"reputation":18363,"user_id":13598222,"display_name":"cactustictacs"},"score":0,"creation_date":1659304915,"post_id":73185695,"comment_id":129257230,"body_markdown":"You probably want to use `adjustPan` instead of `adjustResize` - the latter squishes the whole screen as much as it can, so the whole thing is visible. There&#39;s some explanation and nice visual examples here: https://stackoverflow.com/q/17410499 If you explicitly want one button visible and one hidden though, I&#39;m not sure if that&#39;s possible. Maybe if you do something really clever with an adaptive layout, but that would cause issues on small screens / resized windows.","body":"You probably want to use <code>adjustPan</code> instead of <code>adjustResize</code> - the latter squishes the whole screen as much as it can, so the whole thing is visible. There&#39;s some explanation and nice visual examples here: <a href=\"https://stackoverflow.com/q/17410499\">stackoverflow.com/q/17410499</a> If you explicitly want one button visible and one hidden though, I&#39;m not sure if that&#39;s possible. Maybe if you do something really clever with an adaptive layout, but that would cause issues on small screens / resized windows."},{"owner":{"account_id":18463410,"reputation":18363,"user_id":13598222,"display_name":"cactustictacs"},"score":0,"creation_date":1659304957,"post_id":73185695,"comment_id":129257239,"body_markdown":"There&#39;s also this possibility for Android 11+: https://proandroiddev.com/android-11-creating-an-ime-keyboard-visibility-listener-c390a40d1ad0 Maybe you can hide the bad button when the soft keyboard is visible","body":"There&#39;s also this possibility for Android 11+: <a href=\"https://proandroiddev.com/android-11-creating-an-ime-keyboard-visibility-listener-c390a40d1ad0\" rel=\"nofollow noreferrer\">proandroiddev.com/&hellip;</a> Maybe you can hide the bad button when the soft keyboard is visible"}],"owner":{"account_id":9029901,"reputation":18061,"user_id":6727914,"accept_rate":52,"display_name":"TSR"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1659290788,"creation_date":1659290086,"question_id":73185695,"body_markdown":"I have two buttons and an EditText. When the keyboard is open, I want the EditText to resize and only one of the two buttons to be above the keyboard.\r\n\r\nWhat I tried was: \r\n\r\n   \r\n\r\n      &lt;activity\r\n                android:name=&quot;.activities.MyActivity&quot;\r\n                android:exported=&quot;false&quot;\r\n                android:windowSoftInputMode=&quot;stateVisible|adjustResize&quot;/&gt;\r\n\r\n\r\nHowever, this moves both buttons above the keyboard, not only one.\r\n\r\n\r\nExpected when the keyboard is closed\r\n\r\n[![enter image description here][1]][1]\r\n\r\nExpected when the keyboard is opened\r\n\r\n\r\n\r\n\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n    \r\n        &lt;androidx.appcompat.widget.Toolbar\r\n            android:id=&quot;@+id/toolbar&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            app:title=&quot;Motivation Setting&quot;\r\n            android:layout_height=&quot;56dp&quot;\r\n            android:background=&quot;?attr/colorPrimary&quot;\r\n            android:theme=&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintRight_toRightOf=&quot;parent&quot;\r\n            app:layout_constraintLeft_toLeftOf=&quot;parent&quot;/&gt;\r\n    \r\n        &lt;com.google.android.material.textfield.TextInputLayout\r\n    \r\n    \r\n            android:id=&quot;@+id/textInputLayout&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;0dp&quot;\r\n            android:layout_marginStart=&quot;16dp&quot;\r\n            android:layout_marginEnd=&quot;16dp&quot;\r\n            android:layout_marginTop=&quot;8dp&quot;\r\n            app:counterEnabled=&quot;true&quot;\r\n            app:hintEnabled=&quot;true&quot;\r\n            app:layout_constraintBottom_toTopOf=&quot;@id/previewButton&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@+id/toolbar&quot;&gt;\r\n    \r\n            &lt;EditText\r\n                android:id=&quot;@+id/motivationEditText&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:autofillHints=&quot;Motivation Text&quot;\r\n                android:focusable=&quot;true&quot;\r\n                android:focusableInTouchMode=&quot;true&quot;\r\n                android:gravity=&quot;start|top&quot;\r\n                android:hint=&quot;@string/text_reminder&quot;\r\n                android:inputType=&quot;textCapSentences|textMultiLine&quot;\r\n                android:minLines=&quot;10&quot;\r\n                android:overScrollMode=&quot;always&quot;\r\n                android:scrollbarStyle=&quot;insideInset&quot;\r\n                android:scrollbars=&quot;vertical&quot;\r\n                android:textColorHint=&quot;#616161&quot; /&gt;\r\n        &lt;/com.google.android.material.textfield.TextInputLayout&gt;\r\n    \r\n    \r\n        &lt;Button\r\n            android:id=&quot;@+id/previewButton&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginBottom=&quot;16dp&quot;\r\n            android:text=&quot;@string/preview&quot;\r\n            app:layout_constraintBottom_toTopOf=&quot;@id/submitRequest&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;\r\n    \r\n    \r\n        &lt;Button\r\n            android:id=&quot;@+id/submitRequest&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginBottom=&quot;16dp&quot;\r\n            android:text=&quot;@string/submitRequest&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;\r\n    \r\n    \r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KFlzl.png\r\n  [2]: https://i.stack.imgur.com/X2KJk.png\r\n  [3]: https://i.stack.imgur.com/WhbJt.png","title":"Resize EditText when keyboard opens but do not move button above keyboard","body":"<p>I have two buttons and an EditText. When the keyboard is open, I want the EditText to resize and only one of the two buttons to be above the keyboard.</p>\n<p>What I tried was:</p>\n<pre><code>  &lt;activity\n            android:name=&quot;.activities.MyActivity&quot;\n            android:exported=&quot;false&quot;\n            android:windowSoftInputMode=&quot;stateVisible|adjustResize&quot;/&gt;\n</code></pre>\n<p>However, this moves both buttons above the keyboard, not only one.</p>\n<p>Expected when the keyboard is closed</p>\n<p><a href=\"https://i.stack.imgur.com/KFlzl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KFlzl.png\" alt=\"enter image description here\" /></a></p>\n<p>Expected when the keyboard is opened</p>\n<p><a href=\"https://i.stack.imgur.com/WhbJt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WhbJt.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n\n\n    &lt;androidx.appcompat.widget.Toolbar\n        android:id=&quot;@+id/toolbar&quot;\n        android:layout_width=&quot;0dp&quot;\n        app:title=&quot;Motivation Setting&quot;\n        android:layout_height=&quot;56dp&quot;\n        android:background=&quot;?attr/colorPrimary&quot;\n        android:theme=&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintRight_toRightOf=&quot;parent&quot;\n        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;/&gt;\n\n    &lt;com.google.android.material.textfield.TextInputLayout\n\n\n        android:id=&quot;@+id/textInputLayout&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;0dp&quot;\n        android:layout_marginStart=&quot;16dp&quot;\n        android:layout_marginEnd=&quot;16dp&quot;\n        android:layout_marginTop=&quot;8dp&quot;\n        app:counterEnabled=&quot;true&quot;\n        app:hintEnabled=&quot;true&quot;\n        app:layout_constraintBottom_toTopOf=&quot;@id/previewButton&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/toolbar&quot;&gt;\n\n        &lt;EditText\n            android:id=&quot;@+id/motivationEditText&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:autofillHints=&quot;Motivation Text&quot;\n            android:focusable=&quot;true&quot;\n            android:focusableInTouchMode=&quot;true&quot;\n            android:gravity=&quot;start|top&quot;\n            android:hint=&quot;@string/text_reminder&quot;\n            android:inputType=&quot;textCapSentences|textMultiLine&quot;\n            android:minLines=&quot;10&quot;\n            android:overScrollMode=&quot;always&quot;\n            android:scrollbarStyle=&quot;insideInset&quot;\n            android:scrollbars=&quot;vertical&quot;\n            android:textColorHint=&quot;#616161&quot; /&gt;\n    &lt;/com.google.android.material.textfield.TextInputLayout&gt;\n\n\n    &lt;Button\n        android:id=&quot;@+id/previewButton&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginBottom=&quot;16dp&quot;\n        android:text=&quot;@string/preview&quot;\n        app:layout_constraintBottom_toTopOf=&quot;@id/submitRequest&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;\n\n\n    &lt;Button\n        android:id=&quot;@+id/submitRequest&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginBottom=&quot;16dp&quot;\n        android:text=&quot;@string/submitRequest&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;\n\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n"},{"tags":["java","jakarta-ee","glassfish","netbeans-8"],"answers":[{"tags":[],"owner":{"account_id":11977814,"reputation":111,"user_id":8764474,"display_name":"Flemming G. Jensen"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1507802684,"creation_date":1507802684,"answer_id":46706820,"question_id":46648971,"body_markdown":"I had the same problems, but managed to solved it this way:\r\n\r\nIn the parent pom located in ../glassfish5/docs/javaee-tutorial/examples directory I change the following properties to\r\n\r\n    &lt;cargo.plugin.version&gt;1.6.4&lt;/cargo.plugin.version&gt;\r\n    &lt;glassfish.domain.name&gt;domain1&lt;/glassfish.domain.name&gt;       \r\n    &lt;glassfish.home&gt;/Users/fgjensen/Java/J2EE8/glassfish5&lt;/glassfish.home&gt;\r\n    &lt;integration.container.id&gt;glassfish4x&lt;/integration.container.id&gt; \r\n\r\nThis forces Maven to use the latest version of the cargo plugin. The plugin does not support Glassfish 5 as integration container currently. However, it builds and installs the applications anyway.\r\n\r\nAfter this I also had to set the asadmin password in the password.properties file located in the /glassfish5/glassfish/domains directory.\r\n\r\nI hope this solves your problems. \r\n ","title":"The JavaEE 8 Tutorial, deploy failed on hello1 project","body":"<p>I had the same problems, but managed to solved it this way:</p>\n\n<p>In the parent pom located in ../glassfish5/docs/javaee-tutorial/examples directory I change the following properties to</p>\n\n<pre><code>&lt;cargo.plugin.version&gt;1.6.4&lt;/cargo.plugin.version&gt;\n&lt;glassfish.domain.name&gt;domain1&lt;/glassfish.domain.name&gt;       \n&lt;glassfish.home&gt;/Users/fgjensen/Java/J2EE8/glassfish5&lt;/glassfish.home&gt;\n&lt;integration.container.id&gt;glassfish4x&lt;/integration.container.id&gt; \n</code></pre>\n\n<p>This forces Maven to use the latest version of the cargo plugin. The plugin does not support Glassfish 5 as integration container currently. However, it builds and installs the applications anyway.</p>\n\n<p>After this I also had to set the asadmin password in the password.properties file located in the /glassfish5/glassfish/domains directory.</p>\n\n<p>I hope this solves your problems. </p>\n"},{"tags":[],"owner":{"account_id":8072064,"reputation":495,"user_id":6084506,"accept_rate":0,"display_name":"Deglans Dalpasso"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1507897747,"creation_date":1507897747,"answer_id":46729974,"question_id":46648971,"body_markdown":"Flemming G. Jensen has say:\r\n&gt; I had the same problems, but managed to solved it this way:\r\n&gt;\r\n&gt;In the parent pom located in ../glassfish5/docs/javaee-tutorial/examples directory I change the following properties to\r\n&gt;\r\n&gt;        &lt;cargo.plugin.version&gt;1.6.4&lt;/cargo.plugin.version&gt;\r\n&gt;        &lt;glassfish.domain.name&gt;domain1&lt;/glassfish.domain.name&gt;       \r\n&gt;        &lt;glassfish.home&gt;/Users/fgjensen/Java/J2EE8/glassfish5&lt;/glassfish.home&gt;\r\n&gt;        &lt;integration.container.id&gt;glassfish4x&lt;/integration.container.id&gt;\r\n&gt;\r\n&gt; This forces Maven to use the latest version of the cargo plugin. The plugin does not support Glassfish 5 as integration container currently. However, it builds and installs the applications anyway.\r\n&gt;\r\n&gt; After this I also had to set the asadmin password in the password.properties file located in the /glassfish5/glassfish/domains directory.\r\n&gt;\r\n&gt; I hope this solves your problems.\r\n\r\nYou can also create a symbolic link in your home dir to GlassFish and to JDK instead of modify the line\r\n\r\n    &lt;glassfish.home&gt;/Users/fgjensen/Java/J2EE8/glassfish5&lt;/glassfish.home&gt;\r\n","title":"The JavaEE 8 Tutorial, deploy failed on hello1 project","body":"<p>Flemming G. Jensen has say:</p>\n\n<blockquote>\n  <p>I had the same problems, but managed to solved it this way:</p>\n  \n  <p>In the parent pom located in ../glassfish5/docs/javaee-tutorial/examples directory I change the following properties to</p>\n\n<pre><code>   &lt;cargo.plugin.version&gt;1.6.4&lt;/cargo.plugin.version&gt;\n   &lt;glassfish.domain.name&gt;domain1&lt;/glassfish.domain.name&gt;       \n   &lt;glassfish.home&gt;/Users/fgjensen/Java/J2EE8/glassfish5&lt;/glassfish.home&gt;\n   &lt;integration.container.id&gt;glassfish4x&lt;/integration.container.id&gt;\n</code></pre>\n  \n  <p>This forces Maven to use the latest version of the cargo plugin. The plugin does not support Glassfish 5 as integration container currently. However, it builds and installs the applications anyway.</p>\n  \n  <p>After this I also had to set the asadmin password in the password.properties file located in the /glassfish5/glassfish/domains directory.</p>\n  \n  <p>I hope this solves your problems.</p>\n</blockquote>\n\n<p>You can also create a symbolic link in your home dir to GlassFish and to JDK instead of modify the line</p>\n\n<pre><code>&lt;glassfish.home&gt;/Users/fgjensen/Java/J2EE8/glassfish5&lt;/glassfish.home&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3701712,"reputation":1,"user_id":3081221,"display_name":"Renan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1515619680,"creation_date":1515619680,"answer_id":48196357,"question_id":46648971,"body_markdown":"I solve it following these steps:\r\n\r\n 1. Starting Glassfish server\r\n 2. Starting JavaDB\r\n 3. Setting Path environment to Glassfish and Marven\r\n 4. Editing glassfish home properties on pom.xml in this way:\r\n\r\n                &lt;properties&gt;\r\n                &lt;glassfish.home&gt;${glassfish.home.prefix}/glassfish4&lt;/glassfish.home&gt;\r\n                &lt;/properties&gt;\r\n\r\n   \r\n\r\nYou Should run &quot;mvn install -X&quot; on your shell to verify what is happening","title":"The JavaEE 8 Tutorial, deploy failed on hello1 project","body":"<p>I solve it following these steps:</p>\n\n<ol>\n<li>Starting Glassfish server</li>\n<li>Starting JavaDB</li>\n<li>Setting Path environment to Glassfish and Marven</li>\n<li><p>Editing glassfish home properties on pom.xml in this way:</p>\n\n<pre><code>        &lt;properties&gt;\n        &lt;glassfish.home&gt;${glassfish.home.prefix}/glassfish4&lt;/glassfish.home&gt;\n        &lt;/properties&gt;\n</code></pre></li>\n</ol>\n\n<p>You Should run \"mvn install -X\" on your shell to verify what is happening</p>\n"},{"tags":[],"owner":{"account_id":5137917,"reputation":718,"user_id":4116091,"accept_rate":100,"display_name":"Andres C&#225;rdenas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1532595378,"creation_date":1532595378,"answer_id":51534857,"question_id":46648971,"body_markdown":"Try just editing the parent pom (in my case C:\\Program Files\\Java\\glassfish4\\docs\\javaee-tutorial\\pom.xml) and change this line\r\n\r\n    &lt;glassfish.home&gt;${glassfish.home.prefix}/glassfish4&lt;/glassfish.home&gt;\r\n\r\nfor an absolute route.\r\n\r\nIn my case:\r\n\r\n    &lt;glassfish.home&gt;C:\\Program Files\\Java\\glassfish4&lt;/glassfish.home&gt;\r\nIt worked for me. Good luck.\r\n\r\n\r\n","title":"The JavaEE 8 Tutorial, deploy failed on hello1 project","body":"<p>Try just editing the parent pom (in my case C:\\Program Files\\Java\\glassfish4\\docs\\javaee-tutorial\\pom.xml) and change this line</p>\n\n<pre><code>&lt;glassfish.home&gt;${glassfish.home.prefix}/glassfish4&lt;/glassfish.home&gt;\n</code></pre>\n\n<p>for an absolute route.</p>\n\n<p>In my case:</p>\n\n<pre><code>&lt;glassfish.home&gt;C:\\Program Files\\Java\\glassfish4&lt;/glassfish.home&gt;\n</code></pre>\n\n<p>It worked for me. Good luck.</p>\n"},{"tags":[],"owner":{"account_id":11885668,"reputation":729,"user_id":8698137,"display_name":"Shadyar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1544081204,"creation_date":1544081204,"answer_id":53646454,"question_id":46648971,"body_markdown":"ensure glassfish server, has started before deploying (the command $ mvn install)\r\nnote that glassfish v4 needs JDK6 or JDK7. and glassfish v5 needs JDK7 or JDK8, not beyond. \r\nshare","title":"The JavaEE 8 Tutorial, deploy failed on hello1 project","body":"<p>ensure glassfish server, has started before deploying (the command $ mvn install)\nnote that glassfish v4 needs JDK6 or JDK7. and glassfish v5 needs JDK7 or JDK8, not beyond. \nshare</p>\n"},{"tags":[],"owner":{"account_id":2628037,"reputation":96,"user_id":2348440,"display_name":"Aaron Rykhus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600913639,"creation_date":1600911912,"answer_id":64038410,"question_id":46648971,"body_markdown":"This works for me on Windows 10 with NetBeans 11.3\r\n```\r\n&lt;cargo.plugin.version&gt;1.4.4&lt;/cargo.plugin.version&gt;\r\n&lt;glassfish.domain.name&gt;domain1&lt;/glassfish.domain.name&gt;\r\n&lt;glassfish.home&gt;C:\\Javatools\\glassfish5&lt;/glassfish.home&gt;\r\n&lt;integration.container.id&gt;glassfish4x&lt;/integration.container.id&gt;\r\n```\r\non lines 43-46 of C:\\Javatools\\glassfish5\\docs\\javaee-tutorial\\examples\\pom.xml where java_ee_sdk-8u1.zip is extracted to C:\\Javatools.\r\n\r\nOriginal code that threw error:\r\n```\r\n&lt;cargo.plugin.version&gt;1.4.4&lt;/cargo.plugin.version&gt;\r\n&lt;glassfish.domain.name&gt;domain1&lt;/glassfish.domain.name&gt;\r\n&lt;glassfish.home&gt;${glassfish.home.prefix}/glassfish5&lt;/glassfish.home&gt;\r\n&lt;integration.container.id&gt;glassfish5x&lt;/integration.container.id&gt;\r\n```\r\n\r\nI needed to use absolute path for the glassfish.home value to get it to work.\r\n\r\n","title":"The JavaEE 8 Tutorial, deploy failed on hello1 project","body":"<p>This works for me on Windows 10 with NetBeans 11.3</p>\n<pre><code>&lt;cargo.plugin.version&gt;1.4.4&lt;/cargo.plugin.version&gt;\n&lt;glassfish.domain.name&gt;domain1&lt;/glassfish.domain.name&gt;\n&lt;glassfish.home&gt;C:\\Javatools\\glassfish5&lt;/glassfish.home&gt;\n&lt;integration.container.id&gt;glassfish4x&lt;/integration.container.id&gt;\n</code></pre>\n<p>on lines 43-46 of C:\\Javatools\\glassfish5\\docs\\javaee-tutorial\\examples\\pom.xml where java_ee_sdk-8u1.zip is extracted to C:\\Javatools.</p>\n<p>Original code that threw error:</p>\n<pre><code>&lt;cargo.plugin.version&gt;1.4.4&lt;/cargo.plugin.version&gt;\n&lt;glassfish.domain.name&gt;domain1&lt;/glassfish.domain.name&gt;\n&lt;glassfish.home&gt;${glassfish.home.prefix}/glassfish5&lt;/glassfish.home&gt;\n&lt;integration.container.id&gt;glassfish5x&lt;/integration.container.id&gt;\n</code></pre>\n<p>I needed to use absolute path for the glassfish.home value to get it to work.</p>\n"}],"owner":{"account_id":8072064,"reputation":495,"user_id":6084506,"accept_rate":0,"display_name":"Deglans Dalpasso"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5046,"favorite_count":0,"down_vote_count":1,"up_vote_count":10,"answer_count":6,"score":9,"last_activity_date":1659289891,"creation_date":1507559790,"question_id":46648971,"body_markdown":"I&#39;m try to learn Java EE 8, I have followed the official guide at https://javaee.github.io/tutorial/ but I have this problem:\r\n\r\n    --- cargo-maven2-plugin:1.4.4:redeploy (deploy) @ hello1 ---\r\n    [DeployerRedeployMojo] Resolved container artifact org.codehaus.cargo:cargo-core-container-glassfish:jar:1.4.4 for container glassfish5x\r\n    ------------------------------------------------------------------------\r\n    BUILD FAILURE\r\n    ------------------------------------------------------------------------\r\n    Total time: 4.730s\r\n    Finished at: Mon Oct 09 16:16:40 CEST 2017\r\n    Final Memory: 18M/183M\r\n    ------------------------------------------------------------------------\r\n    Failed to execute goal org.codehaus.cargo:cargo-maven2-plugin:1.4.4:redeploy (deploy) on project hello1: Execution deploy of goal org.codehaus.cargo:cargo-maven2-plugin:1.4.4:redeploy failed: Cannot create configuration. There&#39;s no registered configuration for the parameters (container [id = [glassfish5x], type = [installed]], configuration type [existing]). Actually there are no valid types registered for this configuration. Maybe you&#39;ve made a mistake spelling it? -&gt; [Help 1]\r\n    \r\n    To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n    Re-run Maven using the -X switch to enable full debug logging.\r\n\r\n    For more information about the errors and possible solutions, please read the following articles:\r\n    [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException\r\nI have followed exactly the guide so I don&#39;t understood where is the mistake...\r\n\r\nEDIT:\r\nThis error is the same for glassfish 5 and 4.1.1. \r\nIf I deploy manually the war package it&#39;s work; so the problem is the communication between maven and the glassfish server...\r\n\r\nEDIT 2:\r\nI have found this https://netbeans.org/bugzilla/show_bug.cgi?id=247746 but it dosen&#39;t work...","title":"The JavaEE 8 Tutorial, deploy failed on hello1 project","body":"<p>I'm try to learn Java EE 8, I have followed the official guide at <a href=\"https://javaee.github.io/tutorial/\" rel=\"noreferrer\">https://javaee.github.io/tutorial/</a> but I have this problem:</p>\n\n<pre><code>--- cargo-maven2-plugin:1.4.4:redeploy (deploy) @ hello1 ---\n[DeployerRedeployMojo] Resolved container artifact org.codehaus.cargo:cargo-core-container-glassfish:jar:1.4.4 for container glassfish5x\n------------------------------------------------------------------------\nBUILD FAILURE\n------------------------------------------------------------------------\nTotal time: 4.730s\nFinished at: Mon Oct 09 16:16:40 CEST 2017\nFinal Memory: 18M/183M\n------------------------------------------------------------------------\nFailed to execute goal org.codehaus.cargo:cargo-maven2-plugin:1.4.4:redeploy (deploy) on project hello1: Execution deploy of goal org.codehaus.cargo:cargo-maven2-plugin:1.4.4:redeploy failed: Cannot create configuration. There's no registered configuration for the parameters (container [id = [glassfish5x], type = [installed]], configuration type [existing]). Actually there are no valid types registered for this configuration. Maybe you've made a mistake spelling it? -&gt; [Help 1]\n\nTo see the full stack trace of the errors, re-run Maven with the -e switch.\nRe-run Maven using the -X switch to enable full debug logging.\n\nFor more information about the errors and possible solutions, please read the following articles:\n[Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException\n</code></pre>\n\n<p>I have followed exactly the guide so I don't understood where is the mistake...</p>\n\n<p>EDIT:\nThis error is the same for glassfish 5 and 4.1.1. \nIf I deploy manually the war package it's work; so the problem is the communication between maven and the glassfish server...</p>\n\n<p>EDIT 2:\nI have found this <a href=\"https://netbeans.org/bugzilla/show_bug.cgi?id=247746\" rel=\"noreferrer\">https://netbeans.org/bugzilla/show_bug.cgi?id=247746</a> but it dosen't work...</p>\n"},{"tags":["java","spring-boot","rest","junit","pitest"],"comments":[{"owner":{"account_id":321412,"reputation":5968,"user_id":640224,"accept_rate":71,"display_name":"henry"},"score":0,"creation_date":1659255669,"post_id":73179208,"comment_id":129247290,"body_markdown":"What do the tests for this code look like?","body":"What do the tests for this code look like?"},{"owner":{"account_id":15633552,"reputation":103,"user_id":11279198,"display_name":"shdu12"},"score":0,"creation_date":1659258513,"post_id":73179208,"comment_id":129247845,"body_markdown":"@henry i have updated the above with test methods i wrote for them.","body":"@henry i have updated the above with test methods i wrote for them."},{"owner":{"account_id":321412,"reputation":5968,"user_id":640224,"accept_rate":71,"display_name":"henry"},"score":0,"creation_date":1659260239,"post_id":73179208,"comment_id":129248182,"body_markdown":"The code you posted accepts a String id, the first test you posted passes a Request object, so is hitting a different method. Please post enough code to see how the two methods are related.","body":"The code you posted accepts a String id, the first test you posted passes a Request object, so is hitting a different method. Please post enough code to see how the two methods are related."},{"owner":{"account_id":15633552,"reputation":103,"user_id":11279198,"display_name":"shdu12"},"score":0,"creation_date":1659289924,"post_id":73179208,"comment_id":129254362,"body_markdown":"@henry thanks for correcting it . Yes it has to be string ! Got the wrong methods pasted here . Corrected it .","body":"@henry thanks for correcting it . Yes it has to be string ! Got the wrong methods pasted here . Corrected it ."},{"owner":{"account_id":321412,"reputation":5968,"user_id":640224,"accept_rate":71,"display_name":"henry"},"score":0,"creation_date":1659300671,"post_id":73179208,"comment_id":129256513,"body_markdown":"If you manually change the method to return null and run the tests, what happens?","body":"If you manually change the method to return null and run the tests, what happens?"},{"owner":{"account_id":15633552,"reputation":103,"user_id":11279198,"display_name":"shdu12"},"score":0,"creation_date":1659304852,"post_id":73179208,"comment_id":129257220,"body_markdown":"i tried that, it just says  WARNING : No mutations found. This probably means there is an issue with either the supplied classpath or filters . I actually want to return the Object Response instead as this method will be used by other classes too.","body":"i tried that, it just says  WARNING : No mutations found. This probably means there is an issue with either the supplied classpath or filters . I actually want to return the Object Response instead as this method will be used by other classes too."},{"owner":{"account_id":321412,"reputation":5968,"user_id":640224,"accept_rate":71,"display_name":"henry"},"score":0,"creation_date":1659335592,"post_id":73179208,"comment_id":129261423,"body_markdown":"I mean, make change the method to return null. Then run the normal tests (not pitest).","body":"I mean, make change the method to return null. Then run the normal tests (not pitest)."},{"owner":{"account_id":15633552,"reputation":103,"user_id":11279198,"display_name":"shdu12"},"score":0,"creation_date":1659368441,"post_id":73179208,"comment_id":129272676,"body_markdown":"@henry yeah junit tests works when we modify the tests also to assert null.","body":"@henry yeah junit tests works when we modify the tests also to assert null."},{"owner":{"account_id":321412,"reputation":5968,"user_id":640224,"accept_rate":71,"display_name":"henry"},"score":0,"creation_date":1659431288,"post_id":73179208,"comment_id":129287451,"body_markdown":"If you can create a minimal executable project (i.e a fully working project with a buildscript) that reproduces the issue I can take a look.","body":"If you can create a minimal executable project (i.e a fully working project with a buildscript) that reproduces the issue I can take a look."}],"owner":{"account_id":15633552,"reputation":103,"user_id":11279198,"display_name":"shdu12"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":254,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659289810,"creation_date":1659216910,"question_id":73179208,"body_markdown":"i have a method which is returning an Response(entity class), Both Response and Request are entities defined using lombak.\r\n\r\n    public Response get(String id) {\r\n        Request request = Request.builder()\r\n                .id(id)\r\n                .build();\r\n        try {\r\n          return service.post(request, Response.class);\r\n        } catch (Exception e) {\r\n          var msg = &quot;Failed calling the service&quot;;\r\n          log.error(msg, e);\r\n          throw new IllegalStateException(msg, e);\r\n        }\r\n      }\r\nTest methods:\r\n\r\n    public void testGet() {\r\n    \r\n        Request request = Request.builder()\r\n                .id(123)\r\n                .build();\r\n        Response response = Response.builder().id(&quot;123&quot;).build();\r\n    \r\n        when(service.post(eq(request), eq(Response.class))).thenReturn(response);\r\n    \r\n        assertEquals(response, controller.get(123);\r\n      }\r\n\r\n \r\n\r\n    @Test\r\n      public void testException() {\r\n      Request request = Request.builder()\r\n                .id(123)\r\n                .build();\r\n    \r\n        when(service.post(eq(request), eq(Response.class))).thenReturn(response);\r\n    \r\n       Exception exception = assertThrows(IllegalStateException.class, () -&gt; {\r\n         controller.get(123);\r\n       });\r\n       String expectedMessage = &quot;Failed calling the service&quot;;\r\n       String actualMessage = exception.getMessage();\r\n    \r\n       assertTrue(actualMessage.contains(expectedMessage));\r\n    \r\n      }\r\n\r\nWhen i run ./gradlew pitest, it errors out saying &quot;replaced return value with null for Response::get&quot; with this message below:\r\n\r\n    &gt; org.pitest.mutationtest.engine.gregor.mutators.returns.NullReturnValsMutator\r\n    &gt;&gt; Generated 1 Killed 1 (100%)\r\n    &gt; KILLED 1 SURVIVED 0 TIMED_OUT 0 NON_VIABLE 0 \r\n    &gt; MEMORY_ERROR 0 NOT_STARTED 0 STARTED 0 RUN_ERROR 0 \r\n    &gt; NO_COVERAGE 0 \r\n\r\nCould anyone please help with how to resolve the NullReturnValsMutator error here.\r\n","title":"Fix piTest causing NullReturnValsMutator gradle","body":"<p>i have a method which is returning an Response(entity class), Both Response and Request are entities defined using lombak.</p>\n<pre><code>public Response get(String id) {\n    Request request = Request.builder()\n            .id(id)\n            .build();\n    try {\n      return service.post(request, Response.class);\n    } catch (Exception e) {\n      var msg = &quot;Failed calling the service&quot;;\n      log.error(msg, e);\n      throw new IllegalStateException(msg, e);\n    }\n  }\n</code></pre>\n<p>Test methods:</p>\n<pre><code>public void testGet() {\n\n    Request request = Request.builder()\n            .id(123)\n            .build();\n    Response response = Response.builder().id(&quot;123&quot;).build();\n\n    when(service.post(eq(request), eq(Response.class))).thenReturn(response);\n\n    assertEquals(response, controller.get(123);\n  }\n\n\n\n@Test\n  public void testException() {\n  Request request = Request.builder()\n            .id(123)\n            .build();\n\n    when(service.post(eq(request), eq(Response.class))).thenReturn(response);\n\n   Exception exception = assertThrows(IllegalStateException.class, () -&gt; {\n     controller.get(123);\n   });\n   String expectedMessage = &quot;Failed calling the service&quot;;\n   String actualMessage = exception.getMessage();\n\n   assertTrue(actualMessage.contains(expectedMessage));\n\n  }\n</code></pre>\n<p>When i run ./gradlew pitest, it errors out saying &quot;replaced return value with null for Response::get&quot; with this message below:</p>\n<pre><code>&gt; org.pitest.mutationtest.engine.gregor.mutators.returns.NullReturnValsMutator\n&gt;&gt; Generated 1 Killed 1 (100%)\n&gt; KILLED 1 SURVIVED 0 TIMED_OUT 0 NON_VIABLE 0 \n&gt; MEMORY_ERROR 0 NOT_STARTED 0 STARTED 0 RUN_ERROR 0 \n&gt; NO_COVERAGE 0 \n</code></pre>\n<p>Could anyone please help with how to resolve the NullReturnValsMutator error here.</p>\n"},{"tags":["java","spring","spring-boot","spring-security","unauthorized"],"answers":[{"tags":[],"owner":{"account_id":19655273,"reputation":64,"user_id":14388047,"display_name":"Aman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659235292,"creation_date":1659235292,"answer_id":73180336,"question_id":73180226,"body_markdown":"Make following changes inside antmatchers() method of SecurityConfig.java file.\r\n\r\nAdd one more entry of &quot;/characters&quot; endpoint like following and see whether the error still persists or not. \r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.csrf().disable().authorizeRequests().antMatchers(HttpMethod.GET, &quot;/characters&quot;,&quot;/characters/**&quot;).permitAll()\r\n                .anyRequest()\r\n                .authenticated()\r\n                .and()\r\n                .httpBasic();\r\n    }","title":"Unauthorized Spring Security","body":"<p>Make following changes inside antmatchers() method of SecurityConfig.java file.</p>\n<p>Add one more entry of &quot;/characters&quot; endpoint like following and see whether the error still persists or not.</p>\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http.csrf().disable().authorizeRequests().antMatchers(HttpMethod.GET, &quot;/characters&quot;,&quot;/characters/**&quot;).permitAll()\n            .anyRequest()\n            .authenticated()\n            .and()\n            .httpBasic();\n}\n</code></pre>\n"}],"owner":{"account_id":23412796,"reputation":21,"user_id":17474181,"display_name":"Esteban Ospina"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":208,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659289756,"creation_date":1659233204,"question_id":73180226,"body_markdown":"I am programing a Springboot api rest but i have a problem with Spring security.\r\nWhen i want to Make a request to the server , it throws Unauthorized 401 but i have already configured spring security. Here is the code:\r\n\r\n    public class SecurityConfig  extends WebSecurityConfigurerAdapter {\r\n\r\n    @Bean\r\n    PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.csrf().disable().authorizeRequests().antMatchers(HttpMethod.GET, &quot;/characters/**&quot;).permitAll()\r\n                .anyRequest()\r\n                .authenticated()\r\n                .and()\r\n                .httpBasic();\r\n    }\r\n\r\n\r\n\r\n    @Override\r\n    @Bean\r\n    protected UserDetailsService userDetailsService() {\r\n\r\n        UserDetails admin= User.builder().username(&quot;admin&quot;).password(passwordEncoder().encode(&quot;123&quot;)).roles(&quot;ADMIN&quot;)\r\n                .build();\r\n\r\n        UserDetails user= User.builder().username(&quot;user&quot;).password(passwordEncoder().encode(&quot;123&quot;)).roles(&quot;USER&quot;)\r\n                .build();\r\n\r\n        return new InMemoryUserDetailsManager(admin,user);\r\n    }\r\n}\r\n\r\n  Request method:\r\n\r\n     @PreAuthorize(&quot;hasRole(&#39;ADMIN&#39;)&quot;)\r\n    @RequestMapping(value =&quot;/characters&quot;  ,method = RequestMethod.GET)\r\n    public List&lt;ImagenNombreDTO&gt; listarPersonajes(){\r\n        try {\r\n            return personajeService.listarPersonajes();\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n","title":"Unauthorized Spring Security","body":"<p>I am programing a Springboot api rest but i have a problem with Spring security.\nWhen i want to Make a request to the server , it throws Unauthorized 401 but i have already configured spring security. Here is the code:</p>\n<pre><code>public class SecurityConfig  extends WebSecurityConfigurerAdapter {\n\n@Bean\nPasswordEncoder passwordEncoder() {\n    return new BCryptPasswordEncoder();\n}\n\n\n@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http.csrf().disable().authorizeRequests().antMatchers(HttpMethod.GET, &quot;/characters/**&quot;).permitAll()\n            .anyRequest()\n            .authenticated()\n            .and()\n            .httpBasic();\n}\n\n\n\n@Override\n@Bean\nprotected UserDetailsService userDetailsService() {\n\n    UserDetails admin= User.builder().username(&quot;admin&quot;).password(passwordEncoder().encode(&quot;123&quot;)).roles(&quot;ADMIN&quot;)\n            .build();\n\n    UserDetails user= User.builder().username(&quot;user&quot;).password(passwordEncoder().encode(&quot;123&quot;)).roles(&quot;USER&quot;)\n            .build();\n\n    return new InMemoryUserDetailsManager(admin,user);\n}\n</code></pre>\n<p>}</p>\n<p>Request method:</p>\n<pre><code> @PreAuthorize(&quot;hasRole('ADMIN')&quot;)\n@RequestMapping(value =&quot;/characters&quot;  ,method = RequestMethod.GET)\npublic List&lt;ImagenNombreDTO&gt; listarPersonajes(){\n    try {\n        return personajeService.listarPersonajes();\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n"},{"tags":["java","mysql","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":19655273,"reputation":64,"user_id":14388047,"display_name":"Aman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659289652,"creation_date":1659284654,"answer_id":73184984,"question_id":73184620,"body_markdown":"Reason\r\n------\r\n\r\nThe JPA auto configuration feature of the spring boot application attempts to establish database connection using JPA Datasource. The JPA DataSource bean requires database driver to connect to a database.\r\n\r\nThe database driver should be available as a dependency in the pom.xml file. For the external databases such as Oracle, SQL Server, MySql, DB2, Postgres, MongoDB etc requires the database JDBC connection properties to establish the connection.\r\nThe in-memory databases such as H2, HSQL, Derby etc will establish a connection without JDBC connection properties as it is part of the spring boot application.\r\n\r\n\r\nThis error happens if you have configured in your pom.xml file the spring-boot-starter-data-jpa dependency and you havent defined any datasource url in your application.properties\r\n\r\n\r\nSolution\r\n--------\r\n\r\nI had the same problem, I resolved it by clean install and then doing right click on the project, maven/update project.\r\n\r\nIf that does not solve your issue then make sure your **application.properties** contains the complete configuration. Also make sure that your pom.xml file has the JDBC Driver for your DB\r\n\r\n    &lt;dependency&gt; \r\n       &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; \r\n       &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt; \r\n    &lt;/dependency&gt; \r\n    &lt;dependency&gt; \r\n       &lt;groupId&gt;mysql&lt;/groupId&gt; \r\n       &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; \r\n       &lt;scope&gt;runtime&lt;/scope&gt; \r\n    &lt;/dependency&gt;\r\n\r\n**application.properties**\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/kculter\r\n    spring.datasource.username=id \r\n    spring.datasource.password=1234 \r\n    spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n    spring.jpa.hibernate.ddl-auto=update \r\n    spring.jpa.show-sql=true \r\n    spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5InnoDBDialect\r\n\r\n    ## Hibernate Properties \r\n    # The SQL dialect makes Hibernate generate better SQL for the chosen database \r\n\r\n","title":"Spring boot data source error during mysql connection","body":"<h2>Reason</h2>\n<p>The JPA auto configuration feature of the spring boot application attempts to establish database connection using JPA Datasource. The JPA DataSource bean requires database driver to connect to a database.</p>\n<p>The database driver should be available as a dependency in the pom.xml file. For the external databases such as Oracle, SQL Server, MySql, DB2, Postgres, MongoDB etc requires the database JDBC connection properties to establish the connection.\nThe in-memory databases such as H2, HSQL, Derby etc will establish a connection without JDBC connection properties as it is part of the spring boot application.</p>\n<p>This error happens if you have configured in your pom.xml file the spring-boot-starter-data-jpa dependency and you havent defined any datasource url in your application.properties</p>\n<h2>Solution</h2>\n<p>I had the same problem, I resolved it by clean install and then doing right click on the project, maven/update project.</p>\n<p>If that does not solve your issue then make sure your <strong>application.properties</strong> contains the complete configuration. Also make sure that your pom.xml file has the JDBC Driver for your DB</p>\n<pre><code>&lt;dependency&gt; \n   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; \n   &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt; \n&lt;/dependency&gt; \n&lt;dependency&gt; \n   &lt;groupId&gt;mysql&lt;/groupId&gt; \n   &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; \n   &lt;scope&gt;runtime&lt;/scope&gt; \n&lt;/dependency&gt;\n</code></pre>\n<p><strong>application.properties</strong></p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/kculter\nspring.datasource.username=id \nspring.datasource.password=1234 \nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.jpa.hibernate.ddl-auto=update \nspring.jpa.show-sql=true \nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5InnoDBDialect\n\n## Hibernate Properties \n# The SQL dialect makes Hibernate generate better SQL for the chosen database \n</code></pre>\n"}],"owner":{"account_id":21310254,"reputation":109,"user_id":15684755,"display_name":"codingRookie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":366,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73184984,"answer_count":1,"score":0,"last_activity_date":1659289652,"creation_date":1659281796,"question_id":73184620,"body_markdown":"When I worked on my computer at home, it worked well without any errors, but when I downloaded the project to my laptop through git, the error occurred as below.\r\n\r\n```\r\n2022-08-01 00:12:43.419  INFO 25004 --- [           main] c.p.r.mysqlcheck.MySqlConnectionTest     : The following 1 profile is active: &quot;config&quot;\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nFailed to configure a DataSource: &#39;url&#39; attribute is not specified and no embedded datasource could be configured.\r\n\r\nReason: Failed to determine a suitable driver class\r\n2\r\n\r\nAction:\r\n\r\nConsider the following:\r\n\tIf you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\r\n\tIf you have database settings to be loaded from a particular profile you may need to activate it (the profiles config are currently active).\r\n```\r\n\r\nI search on google and it saids that this error occur because of wrong data source information.\r\nBut I checked data source several times but nothing&#39;s wrong.\r\n\r\nSo I think config profile file is not registered properly.\r\n\r\nHow can I solve this problem??\r\n\r\nI&#39;ll show my code below.\r\n\r\napplication.properties\r\n```\r\n#Important information will be placed in here\r\nspring.profiles.include=config\r\n## I&#39;m going to hide this file beacause it has personal information\r\n\r\n#mybatis mapper location\r\nmybatis.type-aliases-package=com.prac.react.model.dto\r\nmybatis.mapper-locations=classpath:mappers/*.xml\r\nmybatis.configuration.map-underscore-to-camel-case=true\r\n```\r\n\r\n\r\napplication-config.properties\r\n```\r\nspring.datasource.url=jdbc:mysql://localhost:3306/kculter?serverTimezone=UTC&amp;allowPublicKeyRetrieval=true\r\nspring.datasource.username=id\r\nspring.datasource.password=1234\r\n##db    username pwd    .\r\n\r\n##db      .\r\nmysqlusername=id\r\npwd=1234\r\n```\r\n\r\nTest Code\r\n```\r\n@SpringBootTest\r\npublic class MySqlConnectionTest {\r\n    private final String DRIVER = &quot;com.mysql.jdbc.Driver&quot;; //mysql   ?\r\n\tprivate final String URL = &quot;jdbc:mysql://localhost:3306/kculter&quot;; //mysql \r\n\t\r\n\t@Autowired\r\n\tMysql mysql;\r\n\r\n\tLogger logger = LoggerFactory.getLogger(MySqlConnectionTest.class);\r\n\t\r\n\t@Test\r\n\t@DisplayName(&quot;MySql   &quot;)\r\n\tpublic void testConnection() throws Exception{\r\n\t\t\r\n\t\tboolean flag = true;\r\n\r\n\t\tlogger.info(mysql.toString());\r\n\r\n\t\tClass.forName(DRIVER); //    driver JVM \r\n\t\ttry(Connection con = DriverManager.getConnection(URL,mysql.getUsername(),mysql.getPwd())){\r\n\t\t\tlogger.info(con.toString()); //  \r\n\t\t}catch(Exception e) {\r\n\t\t\tlogger.error(&quot; &quot;);\r\n\t\t\tflag = false;\r\n\t\t\tassertTrue(flag);\r\n\t\t}\t\r\n\t}\r\n}\r\n```\r\nMysql.java\r\n```\r\npackage com.prac.react.model.dto;\r\n\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\npublic class Mysql {\r\n\r\n\r\n    @Value(&quot;${mysqlusername}&quot;)\r\n    private String username;\r\n    @Value(&quot;${pwd}&quot;)\r\n    private String pwd;\r\n\r\n    public Mysql() {}\r\n\r\n    public String getUsername() {\r\n        return this.username;\r\n    }\r\n\r\n    public void setUsername(String username) {\r\n        this.username = username;\r\n    }\r\n\r\n    public String getPwd() {\r\n        return this.pwd;\r\n    }\r\n\r\n    public void setPwd(String pwd) {\r\n        this.pwd = pwd;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;{&quot; +\r\n            &quot; username=&#39;&quot; + getUsername() + &quot;&#39;&quot; +\r\n            &quot;, pwd=&#39;&quot; + getPwd() + &quot;&#39;&quot; +\r\n            &quot;}&quot;;\r\n    }\r\n\r\n}\r\n\r\n```\r\n","title":"Spring boot data source error during mysql connection","body":"<p>When I worked on my computer at home, it worked well without any errors, but when I downloaded the project to my laptop through git, the error occurred as below.</p>\n<pre><code>2022-08-01 00:12:43.419  INFO 25004 --- [           main] c.p.r.mysqlcheck.MySqlConnectionTest     : The following 1 profile is active: &quot;config&quot;\n***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nFailed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.\n\nReason: Failed to determine a suitable driver class\n2\n\nAction:\n\nConsider the following:\n    If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\n    If you have database settings to be loaded from a particular profile you may need to activate it (the profiles config are currently active).\n</code></pre>\n<p>I search on google and it saids that this error occur because of wrong data source information.\nBut I checked data source several times but nothing's wrong.</p>\n<p>So I think config profile file is not registered properly.</p>\n<p>How can I solve this problem??</p>\n<p>I'll show my code below.</p>\n<p>application.properties</p>\n<pre><code>#Important information will be placed in here\nspring.profiles.include=config\n## I'm going to hide this file beacause it has personal information\n\n#mybatis mapper location\nmybatis.type-aliases-package=com.prac.react.model.dto\nmybatis.mapper-locations=classpath:mappers/*.xml\nmybatis.configuration.map-underscore-to-camel-case=true\n</code></pre>\n<p>application-config.properties</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/kculter?serverTimezone=UTC&amp;allowPublicKeyRetrieval=true\nspring.datasource.username=id\nspring.datasource.password=1234\n##db    username pwd    .\n\n##db      .\nmysqlusername=id\npwd=1234\n</code></pre>\n<p>Test Code</p>\n<pre><code>@SpringBootTest\npublic class MySqlConnectionTest {\n    private final String DRIVER = &quot;com.mysql.jdbc.Driver&quot;; //mysql   ?\n    private final String URL = &quot;jdbc:mysql://localhost:3306/kculter&quot;; //mysql \n    \n    @Autowired\n    Mysql mysql;\n\n    Logger logger = LoggerFactory.getLogger(MySqlConnectionTest.class);\n    \n    @Test\n    @DisplayName(&quot;MySql   &quot;)\n    public void testConnection() throws Exception{\n        \n        boolean flag = true;\n\n        logger.info(mysql.toString());\n\n        Class.forName(DRIVER); //    driver JVM \n        try(Connection con = DriverManager.getConnection(URL,mysql.getUsername(),mysql.getPwd())){\n            logger.info(con.toString()); //  \n        }catch(Exception e) {\n            logger.error(&quot; &quot;);\n            flag = false;\n            assertTrue(flag);\n        }   \n    }\n}\n</code></pre>\n<p>Mysql.java</p>\n<pre><code>package com.prac.react.model.dto;\n\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class Mysql {\n\n\n    @Value(&quot;${mysqlusername}&quot;)\n    private String username;\n    @Value(&quot;${pwd}&quot;)\n    private String pwd;\n\n    public Mysql() {}\n\n    public String getUsername() {\n        return this.username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public String getPwd() {\n        return this.pwd;\n    }\n\n    public void setPwd(String pwd) {\n        this.pwd = pwd;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;{&quot; +\n            &quot; username='&quot; + getUsername() + &quot;'&quot; +\n            &quot;, pwd='&quot; + getPwd() + &quot;'&quot; +\n            &quot;}&quot;;\n    }\n\n}\n\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","heroku"],"answers":[{"tags":[],"owner":{"account_id":25183595,"reputation":11,"user_id":19024799,"display_name":"Niz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659289585,"creation_date":1659289585,"answer_id":73185634,"question_id":73184838,"body_markdown":"Well it was pointing to a ridiculously stupid bug all along. Of course it was.\r\n\r\n```\r\npublic int pickRandomPrizeFromListByRank(String rank) {\r\n        Random rnd = new Random();\r\n        int prizesLeftInRank = getAllPrizesByRank(rank).size();\r\n        return rnd.nextInt(prizesLeftInRank);\r\n    }\r\n```\r\n\r\nThis fixed it. My test database didn&#39;t have enough elements inside of it, so the while loop you can see in the code in my question kept firing. ","title":"Heroku timeout for simple calls to Postgres db","body":"<p>Well it was pointing to a ridiculously stupid bug all along. Of course it was.</p>\n<pre><code>public int pickRandomPrizeFromListByRank(String rank) {\n        Random rnd = new Random();\n        int prizesLeftInRank = getAllPrizesByRank(rank).size();\n        return rnd.nextInt(prizesLeftInRank);\n    }\n</code></pre>\n<p>This fixed it. My test database didn't have enough elements inside of it, so the while loop you can see in the code in my question kept firing.</p>\n"}],"owner":{"account_id":25183595,"reputation":11,"user_id":19024799,"display_name":"Niz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1659289585,"creation_date":1659283626,"question_id":73184838,"body_markdown":"I created a simple Spring Boot application that is deployed on Heroku and uses a Heroku Postgres database. However, when I try to make a certain call to an endpoint, the call always times out (Heroku&#39;s 30 second timeout limit kicks in). I could increase the timeout limit, but this kind of call should just fire within seconds instead of timing out.\r\n\r\nMy application.properties. I included the last two lines to make sure I always have enough connections available to the database.\r\n```\r\nspring.datasource.url=&lt;DATABASE_URL&gt;\r\nspring.datasource.username=&lt;USERNAME&gt;\r\nspring.datasource.password=&lt;PASSWORD&gt;\r\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.PostgreSQLDialect\r\nspring.jpa.database-platform=postgres\r\nspring.datasource.hikari.minimum-idle= 1\r\nspring.datasource.hikari.maximum-pool-size= 1\r\n```\r\n\r\nMy controller. The method that fails is the getRandomPrizeByRank method.\r\n```\r\n@RestController\r\n@CrossOrigin(origins = &quot;http://localhost:3000&quot;)\r\n@RequestMapping(&quot;/&quot;)\r\npublic class PrizeController {\r\n    PrizeService prizeService;\r\n\r\n    public PrizeController(PrizeService prizeService) {\r\n        this.prizeService = prizeService;\r\n    }\r\n\r\n    @GetMapping(&quot;/{rank}/prizes&quot;)\r\n    public List&lt;Prize&gt; getAllPrizesByRank(@PathVariable String rank) {\r\n        return prizeService.getAllPrizesByRank(rank);\r\n    }\r\n\r\n    @GetMapping(&quot;/prizes&quot;)\r\n    public List&lt;Prize&gt; getAllPrizes() {\r\n        return prizeService.getAllPrizes();\r\n    }\r\n\r\n\r\n    @GetMapping(&quot;/{rank}/randomPrize&quot;)\r\n    public Prize getRandomPrizeByRank(@PathVariable String rank) {\r\n        return prizeService.getRandomPrizeByRank(rank);\r\n    }\r\n\r\n    @DeleteMapping(&quot;/{prizeId}&quot;)\r\n    public void removePrize(@PathVariable int prizeId) {\r\n        prizeService.deletePrize(prizeId);\r\n    }\r\n\r\n    @PostMapping(path = &quot;/saveUsedPrize&quot;, consumes = &quot;application/json&quot;)\r\n    @ResponseStatus(HttpStatus.CREATED)\r\n    public void saveUsedPrize(@RequestBody UsedPrize usedPrize) {\r\n        prizeService.saveRandomPrizeInUsedPrizeTable(usedPrize);\r\n    }\r\n\r\n    @PostMapping(value = &quot;/savePrize&quot;, consumes = &quot;application/json&quot;)\r\n    @ResponseStatus(HttpStatus.CREATED)\r\n    public void savePrize(@RequestBody Prize prize) {\r\n        prizeService.savePrize(prize);\r\n    }\r\n}\r\n```\r\n\r\nMy service, I&#39;ll limit this to the relevant methods for this call.\r\n```\r\npublic Prize getRandomPrizeByRank(String rank) {\r\n        List&lt;Prize&gt; prizeList = getAllPrizesByRank(rank);\r\n        int randomPrizeId = prizeList.get(pickRandomPrizeFromListByRank(rank)).getId();\r\n        return prizeRepository.findPrizeByRankAndId(rank, randomPrizeId);\r\n    }\r\n\r\npublic List&lt;Prize&gt; getAllPrizesByRank(String rank) {\r\n        return prizeRepository.findAllByRank(rank);\r\n    }\r\n\r\npublic int pickRandomPrizeFromListByRank(String rank) {\r\n        Random rnd = new Random();\r\n        int randomPriceNumber = 0;\r\n        int prizesLeftInRank = getAllPrizesByRank(rank).size();\r\n        while (randomPriceNumber == 0) {\r\n            randomPriceNumber = rnd.nextInt(prizesLeftInRank);\r\n        }\r\n        return randomPriceNumber;\r\n    }\r\n```\r\n\r\nMy repository:\r\n```\r\npublic interface PrizeRepository extends JpaRepository&lt;Prize, Integer&gt; {\r\n\r\n    @Query(&quot;SELECT p FROM Prize p WHERE p.rank = :rank&quot;)\r\n    List&lt;Prize&gt; findAllByRank(@Param(&quot;rank&quot;) String rank);\r\n\r\n    @Query(&quot;SELECT p FROM Prize p WHERE p.rank = :rank AND p.id = :nextInt&quot;)\r\n    Prize findPrizeByRankAndId(String rank, int nextInt);\r\n\r\n    void deletePrizeById(int id);\r\n}\r\n```\r\n\r\nI have no clue why this should timeout? I previously made similar simple apps and deployed them to Heroku and this always went smooth. This has been bugging me for days, any help would be appreciated!\r\n\r\n\r\n\r\n\r\n","title":"Heroku timeout for simple calls to Postgres db","body":"<p>I created a simple Spring Boot application that is deployed on Heroku and uses a Heroku Postgres database. However, when I try to make a certain call to an endpoint, the call always times out (Heroku's 30 second timeout limit kicks in). I could increase the timeout limit, but this kind of call should just fire within seconds instead of timing out.</p>\n<p>My application.properties. I included the last two lines to make sure I always have enough connections available to the database.</p>\n<pre><code>spring.datasource.url=&lt;DATABASE_URL&gt;\nspring.datasource.username=&lt;USERNAME&gt;\nspring.datasource.password=&lt;PASSWORD&gt;\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.PostgreSQLDialect\nspring.jpa.database-platform=postgres\nspring.datasource.hikari.minimum-idle= 1\nspring.datasource.hikari.maximum-pool-size= 1\n</code></pre>\n<p>My controller. The method that fails is the getRandomPrizeByRank method.</p>\n<pre><code>@RestController\n@CrossOrigin(origins = &quot;http://localhost:3000&quot;)\n@RequestMapping(&quot;/&quot;)\npublic class PrizeController {\n    PrizeService prizeService;\n\n    public PrizeController(PrizeService prizeService) {\n        this.prizeService = prizeService;\n    }\n\n    @GetMapping(&quot;/{rank}/prizes&quot;)\n    public List&lt;Prize&gt; getAllPrizesByRank(@PathVariable String rank) {\n        return prizeService.getAllPrizesByRank(rank);\n    }\n\n    @GetMapping(&quot;/prizes&quot;)\n    public List&lt;Prize&gt; getAllPrizes() {\n        return prizeService.getAllPrizes();\n    }\n\n\n    @GetMapping(&quot;/{rank}/randomPrize&quot;)\n    public Prize getRandomPrizeByRank(@PathVariable String rank) {\n        return prizeService.getRandomPrizeByRank(rank);\n    }\n\n    @DeleteMapping(&quot;/{prizeId}&quot;)\n    public void removePrize(@PathVariable int prizeId) {\n        prizeService.deletePrize(prizeId);\n    }\n\n    @PostMapping(path = &quot;/saveUsedPrize&quot;, consumes = &quot;application/json&quot;)\n    @ResponseStatus(HttpStatus.CREATED)\n    public void saveUsedPrize(@RequestBody UsedPrize usedPrize) {\n        prizeService.saveRandomPrizeInUsedPrizeTable(usedPrize);\n    }\n\n    @PostMapping(value = &quot;/savePrize&quot;, consumes = &quot;application/json&quot;)\n    @ResponseStatus(HttpStatus.CREATED)\n    public void savePrize(@RequestBody Prize prize) {\n        prizeService.savePrize(prize);\n    }\n}\n</code></pre>\n<p>My service, I'll limit this to the relevant methods for this call.</p>\n<pre><code>public Prize getRandomPrizeByRank(String rank) {\n        List&lt;Prize&gt; prizeList = getAllPrizesByRank(rank);\n        int randomPrizeId = prizeList.get(pickRandomPrizeFromListByRank(rank)).getId();\n        return prizeRepository.findPrizeByRankAndId(rank, randomPrizeId);\n    }\n\npublic List&lt;Prize&gt; getAllPrizesByRank(String rank) {\n        return prizeRepository.findAllByRank(rank);\n    }\n\npublic int pickRandomPrizeFromListByRank(String rank) {\n        Random rnd = new Random();\n        int randomPriceNumber = 0;\n        int prizesLeftInRank = getAllPrizesByRank(rank).size();\n        while (randomPriceNumber == 0) {\n            randomPriceNumber = rnd.nextInt(prizesLeftInRank);\n        }\n        return randomPriceNumber;\n    }\n</code></pre>\n<p>My repository:</p>\n<pre><code>public interface PrizeRepository extends JpaRepository&lt;Prize, Integer&gt; {\n\n    @Query(&quot;SELECT p FROM Prize p WHERE p.rank = :rank&quot;)\n    List&lt;Prize&gt; findAllByRank(@Param(&quot;rank&quot;) String rank);\n\n    @Query(&quot;SELECT p FROM Prize p WHERE p.rank = :rank AND p.id = :nextInt&quot;)\n    Prize findPrizeByRankAndId(String rank, int nextInt);\n\n    void deletePrizeById(int id);\n}\n</code></pre>\n<p>I have no clue why this should timeout? I previously made similar simple apps and deployed them to Heroku and this always went smooth. This has been bugging me for days, any help would be appreciated!</p>\n"},{"tags":["java","logging","web-applications"],"comments":[{"owner":{"account_id":121840,"reputation":36551,"user_id":315228,"accept_rate":100,"display_name":"SMA"},"score":0,"creation_date":1417608631,"post_id":27271336,"comment_id":43012622,"body_markdown":"Third party code that might be writing?","body":"Third party code that might be writing?"},{"owner":{"account_id":4728074,"reputation":1608,"user_id":3826188,"display_name":"MihaiC"},"score":0,"creation_date":1417608653,"post_id":27271336,"comment_id":43012637,"body_markdown":"libraries used might write. check the jars from the project.","body":"libraries used might write. check the jars from the project."},{"owner":{"account_id":2431730,"reputation":1425,"user_id":2122484,"accept_rate":75,"display_name":"Naveen Ramawat"},"score":0,"creation_date":1417608919,"post_id":27271336,"comment_id":43012801,"body_markdown":"check the logger name which is printing it, if it is from any  third party jar than create a logger for that and provide log level error. so the low level log will not print from that logger.","body":"check the logger name which is printing it, if it is from any  third party jar than create a logger for that and provide log level error. so the low level log will not print from that logger."},{"owner":{"account_id":394950,"reputation":2790,"user_id":757661,"accept_rate":80,"display_name":"gordon613"},"score":0,"creation_date":1417610739,"post_id":27271336,"comment_id":43013857,"body_markdown":"Thanks for comments... I edited my question accordingly. @Naveen I am first interested in finding what is causing it...  and then I will think about whether I will try and get rid of it","body":"Thanks for comments... I edited my question accordingly. @Naveen I am first interested in finding what is causing it...  and then I will think about whether I will try and get rid of it"}],"answers":[{"tags":[],"owner":{"account_id":394950,"reputation":2790,"user_id":757661,"accept_rate":80,"display_name":"gordon613"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659286984,"creation_date":1659286984,"answer_id":73185306,"question_id":27271336,"body_markdown":"It was caused by the following in `web.xml`\r\n\r\n        &lt;filter&gt;\r\n    \t\t&lt;filter-name&gt;Compress&lt;/filter-name&gt;\r\n    \t\t&lt;filter-class&gt;com.jspbook.GZIPFilter&lt;/filter-class&gt;\r\n    \t&lt;/filter&gt;\r\n    \r\n    \t&lt;filter-mapping&gt;\r\n    \t\t&lt;filter-name&gt;Compress&lt;/filter-name&gt;\r\n    \t\t&lt;url-pattern&gt;*.jsp&lt;/url-pattern&gt;\r\n    \t&lt;/filter-mapping&gt;\r\n    \t&lt;filter-mapping&gt;\r\n    \t\t&lt;filter-name&gt;Compress&lt;/filter-name&gt;\r\n    \t\t&lt;url-pattern&gt;*.html&lt;/url-pattern&gt;\r\n    \t&lt;/filter-mapping&gt;","title":"Log file says &quot;Writing...&quot;","body":"<p>It was caused by the following in <code>web.xml</code></p>\n<pre><code>    &lt;filter&gt;\n        &lt;filter-name&gt;Compress&lt;/filter-name&gt;\n        &lt;filter-class&gt;com.jspbook.GZIPFilter&lt;/filter-class&gt;\n    &lt;/filter&gt;\n\n    &lt;filter-mapping&gt;\n        &lt;filter-name&gt;Compress&lt;/filter-name&gt;\n        &lt;url-pattern&gt;*.jsp&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;\n    &lt;filter-mapping&gt;\n        &lt;filter-name&gt;Compress&lt;/filter-name&gt;\n        &lt;url-pattern&gt;*.html&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;\n</code></pre>\n"}],"owner":{"account_id":394950,"reputation":2790,"user_id":757661,"accept_rate":80,"display_name":"gordon613"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73185306,"answer_count":1,"score":0,"last_activity_date":1659286984,"creation_date":1417608240,"question_id":27271336,"body_markdown":"My web application runs using `Tomcat 7`, `Windows Server 2008R2`, `Java`, `JSP`, `SQL Server 2012`\r\n\r\nThe .out log file has thousands of rows with just the words &quot;writing....&quot; \r\n\r\nI used NotePad++ to search the entire application (including JARs etc.) for &quot;Writing.&quot; and and nowhere can I find any code that is the culprit.\r\n\r\nAlthough it does seem that .jar files are zip files - and thus this search wouldn&#39;t work as I am searching for plaintext (see comments on  https://stackoverflow.com/questions/25735374/fast-way-to-update-text-in-a-jar-file ) when I edit the .jar files in NotePad++ they all seem to have plaintext in them such as `org/saxpath/XPathHandler.class`\r\n\r\nI had the same problem when the application ran under Oracle and Oracle Application Server.\r\n \r\nAny ideas?\r\n","title":"Log file says &quot;Writing...&quot;","body":"<p>My web application runs using <code>Tomcat 7</code>, <code>Windows Server 2008R2</code>, <code>Java</code>, <code>JSP</code>, <code>SQL Server 2012</code></p>\n\n<p>The .out log file has thousands of rows with just the words \"writing....\" </p>\n\n<p>I used NotePad++ to search the entire application (including JARs etc.) for \"Writing.\" and and nowhere can I find any code that is the culprit.</p>\n\n<p>Although it does seem that .jar files are zip files - and thus this search wouldn't work as I am searching for plaintext (see comments on  <a href=\"https://stackoverflow.com/questions/25735374/fast-way-to-update-text-in-a-jar-file\">Fast way to update text in a Jar file</a> ) when I edit the .jar files in NotePad++ they all seem to have plaintext in them such as <code>org/saxpath/XPathHandler.class</code></p>\n\n<p>I had the same problem when the application ran under Oracle and Oracle Application Server.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["java","ajax"],"answers":[{"tags":[],"owner":{"account_id":3344519,"reputation":477,"user_id":2809933,"display_name":"Przemek Bielicki"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1486125250,"creation_date":1486125250,"answer_id":42024459,"question_id":42024155,"body_markdown":"From [JavaDoc][1] \r\n\r\n&gt; A FileInputStream obtains input bytes from a file in a file system.\r\n\r\nI would suggest two solutions:\r\n\r\n1. The proper one is to change the API and to have ``InputStream`` as a parameter. I don&#39;t see a reason why you have ``FileInputStream`` in your API.\r\n2. If you don&#39;t own the API and cannot change it I&#39;m afraid you will need to save the ``InputStream`` to [temp file][2] and then create ``FileInputStream`` giving a path to this file (it&#39;s a suboptimal solution as you first write the file to disk - risking out of space - and then read it and streaming API is designed for reading / writing data on the fly)\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/io/File.html#createTempFile(java.lang.String,%20java.lang.String,%20java.io.File)","title":"FileItem inputStream to FileInputStream","body":"<p>From <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html\" rel=\"nofollow noreferrer\">JavaDoc</a> </p>\n\n<blockquote>\n  <p>A FileInputStream obtains input bytes from a file in a file system.</p>\n</blockquote>\n\n<p>I would suggest two solutions:</p>\n\n<ol>\n<li>The proper one is to change the API and to have <code>InputStream</code> as a parameter. I don't see a reason why you have <code>FileInputStream</code> in your API.</li>\n<li>If you don't own the API and cannot change it I'm afraid you will need to save the <code>InputStream</code> to <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/File.html#createTempFile(java.lang.String,%20java.lang.String,%20java.io.File)\" rel=\"nofollow noreferrer\">temp file</a> and then create <code>FileInputStream</code> giving a path to this file (it's a suboptimal solution as you first write the file to disk - risking out of space - and then read it and streaming API is designed for reading / writing data on the fly)</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4787547,"reputation":5568,"user_id":3867574,"accept_rate":43,"display_name":"Serg M Ten"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1486125436,"creation_date":1486125436,"answer_id":42024499,"question_id":42024155,"body_markdown":"If you are using org.apache.commons.fileupload.FileItem interface then your class is probably DefaultFileItem which is a subclass of DiskFileItem. So you can cast FileItem to DiskFileItem. then if you look at the [source code of DiskFileItem][1] you&#39;ll find that getInputStream() is actually returning a FileInputStream or a ByteArrayInputStream If you get a FileInputStream from DiskFileItem you can pass it directly to your other class. But if you get a ByteArrayInputStream you will have to write the contents to your own temporary file and then open another FileInputStream on this temp file. There is also another method DiskFileItem.getStoreLocation() which seem to return the server side File used for upload, but it may return null if the file is cached in memory.\r\n\r\nIn conclusion: you cannot be sure that there is going to be a server side file because the upload may be cached in memory. Therefore if you need a FileInputStream elsewhere you will have to create it yourself by creating a temp file. There is an example on how to pipe between two streams [here][2].\r\n\r\n\r\n  [1]: http://commons.apache.org/proper/commons-fileupload/apidocs/src-html/org/apache/commons/fileupload/disk/DiskFileItem.html\r\n  [2]: https://github.com/sergiomt/knowgate9/blob/master/knowgate-base/src/main/java/com/knowgate/io/StreamPipe.java","title":"FileItem inputStream to FileInputStream","body":"<p>If you are using org.apache.commons.fileupload.FileItem interface then your class is probably DefaultFileItem which is a subclass of DiskFileItem. So you can cast FileItem to DiskFileItem. then if you look at the <a href=\"http://commons.apache.org/proper/commons-fileupload/apidocs/src-html/org/apache/commons/fileupload/disk/DiskFileItem.html\" rel=\"nofollow noreferrer\">source code of DiskFileItem</a> you'll find that getInputStream() is actually returning a FileInputStream or a ByteArrayInputStream If you get a FileInputStream from DiskFileItem you can pass it directly to your other class. But if you get a ByteArrayInputStream you will have to write the contents to your own temporary file and then open another FileInputStream on this temp file. There is also another method DiskFileItem.getStoreLocation() which seem to return the server side File used for upload, but it may return null if the file is cached in memory.</p>\n\n<p>In conclusion: you cannot be sure that there is going to be a server side file because the upload may be cached in memory. Therefore if you need a FileInputStream elsewhere you will have to create it yourself by creating a temp file. There is an example on how to pipe between two streams <a href=\"https://github.com/sergiomt/knowgate9/blob/master/knowgate-base/src/main/java/com/knowgate/io/StreamPipe.java\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":6657856,"reputation":39,"user_id":5138047,"display_name":"user5138047"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659286971,"creation_date":1659286971,"answer_id":73185302,"question_id":42024155,"body_markdown":"//Pass file path/name directly to FileInputStream\r\n\r\n    FileInputStream input1 = new FileInputStream(&quot;input.txt&quot;);\r\n\r\n//Save file path that has been passed in by the user, into a string variable. \r\n\r\n    String fileName = args[0];\r\n\r\n//pass path to File object \r\n\r\n    File inputFile = new File(fileName);\r\n\r\n//pass file object to FileOutputStream\r\n\r\n    FileOutputStream output = new FileOutputStream(inputFile);","title":"FileItem inputStream to FileInputStream","body":"<p>//Pass file path/name directly to FileInputStream</p>\n<pre><code>FileInputStream input1 = new FileInputStream(&quot;input.txt&quot;);\n</code></pre>\n<p>//Save file path that has been passed in by the user, into a string variable.</p>\n<pre><code>String fileName = args[0];\n</code></pre>\n<p>//pass path to File object</p>\n<pre><code>File inputFile = new File(fileName);\n</code></pre>\n<p>//pass file object to FileOutputStream</p>\n<pre><code>FileOutputStream output = new FileOutputStream(inputFile);\n</code></pre>\n"}],"owner":{"account_id":4635480,"reputation":337,"user_id":3756848,"accept_rate":83,"display_name":"butYouDontLookLikeADeveloper"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2111,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":42024459,"answer_count":3,"score":2,"last_activity_date":1659286971,"creation_date":1486124306,"question_id":42024155,"body_markdown":"I have a web page with an upload feature which lets you upload a excel file, on hitting upload an Ajax call is fired. From there I get the `FileItem` input stream and using the method `fileItem.getInputStream()`, I have another class with a method which I need to pass the file to, which has a `FileInputStream` parameter. So my question is how do I convert the input stream to a `FileInputStream`?\r\n\r\nA detailed solution would be appreciated as I am a junior developer, so I am still learning.\r\n\r\nMany thanks.","title":"FileItem inputStream to FileInputStream","body":"<p>I have a web page with an upload feature which lets you upload a excel file, on hitting upload an Ajax call is fired. From there I get the <code>FileItem</code> input stream and using the method <code>fileItem.getInputStream()</code>, I have another class with a method which I need to pass the file to, which has a <code>FileInputStream</code> parameter. So my question is how do I convert the input stream to a <code>FileInputStream</code>?</p>\n\n<p>A detailed solution would be appreciated as I am a junior developer, so I am still learning.</p>\n\n<p>Many thanks.</p>\n"},{"tags":["java","label","vaadin"],"answers":[{"tags":[],"owner":{"account_id":1831742,"reputation":1989,"user_id":1662997,"display_name":"Knoobie"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1659207234,"creation_date":1659204734,"answer_id":73178024,"question_id":73177851,"body_markdown":"`Label` is standard HTML element. See [Mozilla Developer documentation][1]. Not a specific Vaadin crafted component with [shadow DOM][2] (where you would need the vaadin-*.css in the components folder). \r\n\r\nInstead you can put your css inside `styles.css` and use a simple `label.bold-label` selector.\r\n\r\n\r\n  [1]: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/label\r\n  [2]: https://de.wikipedia.org/wiki/Shadow_DOM","title":"Vaadin Label CSS","body":"<p><code>Label</code> is standard HTML element. See <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/label\" rel=\"noreferrer\">Mozilla Developer documentation</a>. Not a specific Vaadin crafted component with <a href=\"https://de.wikipedia.org/wiki/Shadow_DOM\" rel=\"noreferrer\">shadow DOM</a> (where you would need the vaadin-*.css in the components folder).</p>\n<p>Instead you can put your css inside <code>styles.css</code> and use a simple <code>label.bold-label</code> selector.</p>\n"}],"owner":{"account_id":25841185,"reputation":23,"user_id":19576687,"display_name":"Vishu Dhanawade"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":182,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1659285533,"creation_date":1659203159,"question_id":73177851,"body_markdown":"I want to apply CSS for Vaadin 23 label but its not working properly. Please suggest me appropriate process.\r\n\r\n```java\r\nLabel label1 = new Label(&quot;Temp&quot;);\r\nlabel1.addClassName(&quot;bold-label&quot;);\r\n```\r\n\r\n`vaadin-label.css`:\r\n\r\n```css\r\n:host(.bold-label) [part~=&quot;label&quot;] {\r\n\tfont-weight: bold;\r\n\tcolor:red;\r\n}\r\n```\r\n","title":"Vaadin Label CSS","body":"<p>I want to apply CSS for Vaadin 23 label but its not working properly. Please suggest me appropriate process.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Label label1 = new Label(&quot;Temp&quot;);\nlabel1.addClassName(&quot;bold-label&quot;);\n</code></pre>\n<p><code>vaadin-label.css</code>:</p>\n<pre class=\"lang-css prettyprint-override\"><code>:host(.bold-label) [part~=&quot;label&quot;] {\n    font-weight: bold;\n    color:red;\n}\n</code></pre>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1488273782,"post_id":42504334,"comment_id":72147222,"body_markdown":"Let it run to completion?","body":"Let it run to completion?"}],"answers":[{"tags":[],"owner":{"account_id":2987615,"reputation":1799,"user_id":2535987,"accept_rate":67,"display_name":"Monish Sen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1488274575,"creation_date":1488274575,"answer_id":42505034,"question_id":42504334,"body_markdown":"Possible bug with STS. See [here][1]\r\n\r\nYou can also try disabling through the Eclipse preferences: Window / Preferences / Maven / &quot;Download repository index updates on startup&quot;\r\n\r\nSee [here][2] and [here][3]\r\n\r\n\r\n  [1]: https://issuetracker.springsource.com/browse/STS-4333\r\n  [2]: https://stackoverflow.com/questions/8647769/what-is-eclipse-doing-when-it-says-that-its-updating-indexes\r\n  [3]: https://stackoverflow.com/questions/9514814/stopping-maven-index-update-eclipse","title":"How to close this process on eclipse","body":"<p>Possible bug with STS. See <a href=\"https://issuetracker.springsource.com/browse/STS-4333\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>You can also try disabling through the Eclipse preferences: Window / Preferences / Maven / \"Download repository index updates on startup\"</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/8647769/what-is-eclipse-doing-when-it-says-that-its-updating-indexes\">here</a> and <a href=\"https://stackoverflow.com/questions/9514814/stopping-maven-index-update-eclipse\">here</a></p>\n"}],"owner":{"account_id":9798887,"reputation":9,"user_id":7260844,"display_name":"CNWWH"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":215,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659285319,"creation_date":1488272686,"question_id":42504334,"body_markdown":"When I open my SpringIDE.It always have a process running!It display &#39;Indexing Jar Types&#39;,It looks maybe takes much CPU space,I want to close it but warried about if it will cause any problem?\r\nPlease help me.","title":"How to close this process on eclipse","body":"<p>When I open my SpringIDE.It always have a process running!It display 'Indexing Jar Types',It looks maybe takes much CPU space,I want to close it but warried about if it will cause any problem?\nPlease help me.</p>\n"},{"tags":["java","api","httpclient","splunk"],"comments":[{"owner":{"account_id":123802,"reputation":37785,"user_id":318493,"accept_rate":67,"display_name":"RoToRa"},"score":1,"creation_date":1659281734,"post_id":73184554,"comment_id":129252487,"body_markdown":"Is there an error? What does it return? Does that compile? (`StringBuilder` doesn&#39;t have a method `header`.)","body":"Is there an error? What does it return? Does that compile? (<code>StringBuilder</code> doesn&#39;t have a method <code>header</code>.)"},{"owner":{"account_id":25928373,"reputation":15,"user_id":19649906,"display_name":"gvk"},"score":0,"creation_date":1659282343,"post_id":73184554,"comment_id":129252634,"body_markdown":"@RoToRa\nThats a copy/paste issue.\nheader is request attribute. By mistake i added to StringBuilder, while posting here.\nI updated code in the question, but issue exists.","body":"@RoToRa Thats a copy/paste issue. header is request attribute. By mistake i added to StringBuilder, while posting here. I updated code in the question, but issue exists."},{"owner":{"account_id":5940172,"reputation":3457,"user_id":4671717,"accept_rate":25,"display_name":"Chris Maggiulli"},"score":1,"creation_date":1659283065,"post_id":73184554,"comment_id":129252836,"body_markdown":"Have you tried to use single quotes instead of double for the POST body? The issue is somewhere with your escape","body":"Have you tried to use single quotes instead of double for the POST body? The issue is somewhere with your escape"},{"owner":{"account_id":25928373,"reputation":15,"user_id":19649906,"display_name":"gvk"},"score":0,"creation_date":1659284595,"post_id":73184554,"comment_id":129253156,"body_markdown":"@ChrisMaggiulli\nI tired with single Quotes, double Quotes, and even infact no request payload.\nI still do not see splunk search id (sid).\nIt appears as if no matter, what request payload (.POST(HttpRequest.BodyPublishers.ofString(json)))   OR Without Payload (.POST(HttpRequest.BodyPublishers.noBody()), i still no difference.","body":"@ChrisMaggiulli I tired with single Quotes, double Quotes, and even infact no request payload. I still do not see splunk search id (sid). It appears as if no matter, what request payload (.POST(HttpRequest.BodyPublishers.ofString(json)))   OR Without Payload (.POST(HttpRequest.BodyPublishers.noBody()), i still no difference."},{"owner":{"account_id":3761306,"reputation":1040,"user_id":3126207,"accept_rate":67,"display_name":"pedrohreis"},"score":1,"creation_date":1659285554,"post_id":73184554,"comment_id":129253386,"body_markdown":"why you are wrapping the java request into a json object while not for python/curl? maybe your request payload is just wrong?","body":"why you are wrapping the java request into a json object while not for python/curl? maybe your request payload is just wrong?"}],"answers":[{"tags":[],"owner":{"account_id":25937120,"reputation":2268,"user_id":19657183,"display_name":"Mihe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659285039,"creation_date":1659285039,"answer_id":73185037,"question_id":73184554,"body_markdown":"Your payload is JSON text, but the mime-type indicates it would consist of urlencoded key-value pairs. The python code results in a x-www-form-urlencoded body:\r\n\r\n```\r\nsearch=%7Ctstats+count+where+index%3Dmain&amp;count=0&amp;output_mode=json\r\n```\r\n\r\nIf you assign this value to the `json`-String (rename it, please) in the main-method like\r\n```\r\nString json = &quot;search=%7Ctstats+count+where+index%3Dmain&amp;count=0&amp;output_mode=json&quot;;\r\n```\r\nthe payload matches the mime-type.","title":"Java 11 HttpClient - POST issue","body":"<p>Your payload is JSON text, but the mime-type indicates it would consist of urlencoded key-value pairs. The python code results in a x-www-form-urlencoded body:</p>\n<pre><code>search=%7Ctstats+count+where+index%3Dmain&amp;count=0&amp;output_mode=json\n</code></pre>\n<p>If you assign this value to the <code>json</code>-String (rename it, please) in the main-method like</p>\n<pre><code>String json = &quot;search=%7Ctstats+count+where+index%3Dmain&amp;count=0&amp;output_mode=json&quot;;\n</code></pre>\n<p>the payload matches the mime-type.</p>\n"}],"owner":{"account_id":25928373,"reputation":15,"user_id":19649906,"display_name":"gvk"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":566,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73185037,"answer_count":1,"score":0,"last_activity_date":1659285039,"creation_date":1659281135,"question_id":73184554,"body_markdown":"I am writing java HttpClient code, to query splunk API, and get search id (sid) as output.\r\nI was able to write this in curl and python, with no issues.\r\nBut java is proving to be difficult.\r\n\r\nCurl: (Working. Got the sid as output)\r\n\r\n    curl -u user https://url:8089/services/search/jobs -d&quot;search=|tstats count where index=main&quot;\r\n   \r\n    **output:**\r\n    &lt;response&gt;\r\n      &lt;sid&gt;1352061658.136&lt;/sid&gt;\r\n    &lt;/response&gt;\r\n\r\n\r\nPython: (Working. Got sid as output)\r\n\r\n    import json\r\n    import requests\r\n\r\n\r\n    baseurl = &#39;https://url:8089/services/search/jobs&#39;\r\n    username = &#39;my_username&#39;\r\n    password = &#39;my_password&#39;\r\n\r\n    payload = {\r\n\t   &quot;search&quot;: &quot;|tstats count where index=main&quot;,\r\n       &quot;count&quot;: 0,\r\n       &quot;output_mode&quot;: &quot;json&quot; \r\n    }\r\n    headers={&quot;Content-Type&quot;: &quot;application/x-www-form-urlencoded&quot;}\r\n\r\n\r\n    response = requests.post(url, auth=(userid,password), data=payload, headers=headers, verify=False)\r\n\r\n    print(response.status_code)\r\n    print(response.text)\r\n\r\n\r\nJava: (Not working. No matter what request payload, we POST, getting list of all SPlunk jobs, instead of sid, like what we see in curl or python)\r\n\r\n    import java.io.IOException;\r\n\timport java.net.URI;\r\n\timport java.net.http.HttpClient;\r\n\timport java.net.http.HttpRequest;\r\n\timport java.net.http.HttpResponse;\r\n\timport java.time.Duration;\r\n\r\n\tpublic class HttpClientPostJSON {\r\n\r\n\t\tprivate static final HttpClient httpClient = HttpClient.newBuilder()\r\n\t\t\t\t.authenticator(new Authenticator() {\r\n\t\t\t\t\t@Override\r\n\t\t\t\t\tprotected PasswordAuthentication getPasswordAuthentication() {\r\n\t\t\t\t\t\treturn new PasswordAuthentication(\r\n\t\t\t\t\t\t\t\t&quot;user&quot;,\r\n\t\t\t\t\t\t\t\t&quot;password&quot;.toCharArray());\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t})\t\t\t\t\r\n\t\t\t\t.build();\r\n\r\n\t\tpublic static void main(String[] args) throws IOException, InterruptedException {\r\n\r\n\t\t\t// json formatted data\r\n\t\t\tString json = new StringBuilder()\r\n\t\t\t\t\t.append(&quot;{&quot;)\r\n\t\t\t\t\t.append(&quot;\\&quot;search\\&quot;:\\&quot;|tstats count where index=main\\&quot;&quot;)\t\t\t              \r\n\t\t\t\t\t.append(&quot;}&quot;).toString();\r\n\r\n\t\t\t// add json header\r\n\t\t\tHttpRequest request = HttpRequest.newBuilder()\r\n\t\t\t\t\t.POST(HttpRequest.BodyPublishers.ofString(json))\r\n                    .header(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;) \r\n\t\t\t\t\t.uri(URI.create(&quot;https://url:8089/services/search/jobs&quot;))          \r\n\t\t\t\t\t\r\n\t\t\t\t\t.build();\r\n\r\n\t\t\tHttpResponse&lt;String&gt; response = httpClient.send(request, HttpResponse.BodyHandlers.ofString());\r\n\r\n\t\t\t// print status code\r\n\t\t\tSystem.out.println(response.statusCode());\r\n\r\n\t\t\t// print response body\r\n\t\t\tSystem.out.println(response.body());\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\nWhat is the issue with java code? is there a better way to pass payload?\r\nWhy am i not gettting splunk search id (sid) as output.\r\nI see some  20MB+ output that is listing all the jobs in the splunk.","title":"Java 11 HttpClient - POST issue","body":"<p>I am writing java HttpClient code, to query splunk API, and get search id (sid) as output.\nI was able to write this in curl and python, with no issues.\nBut java is proving to be difficult.</p>\n<p>Curl: (Working. Got the sid as output)</p>\n<pre><code>curl -u user https://url:8089/services/search/jobs -d&quot;search=|tstats count where index=main&quot;\n\n**output:**\n&lt;response&gt;\n  &lt;sid&gt;1352061658.136&lt;/sid&gt;\n&lt;/response&gt;\n</code></pre>\n<p>Python: (Working. Got sid as output)</p>\n<pre><code>import json\nimport requests\n\n\nbaseurl = 'https://url:8089/services/search/jobs'\nusername = 'my_username'\npassword = 'my_password'\n\npayload = {\n   &quot;search&quot;: &quot;|tstats count where index=main&quot;,\n   &quot;count&quot;: 0,\n   &quot;output_mode&quot;: &quot;json&quot; \n}\nheaders={&quot;Content-Type&quot;: &quot;application/x-www-form-urlencoded&quot;}\n\n\nresponse = requests.post(url, auth=(userid,password), data=payload, headers=headers, verify=False)\n\nprint(response.status_code)\nprint(response.text)\n</code></pre>\n<p>Java: (Not working. No matter what request payload, we POST, getting list of all SPlunk jobs, instead of sid, like what we see in curl or python)</p>\n<pre><code>import java.io.IOException;\nimport java.net.URI;\nimport java.net.http.HttpClient;\nimport java.net.http.HttpRequest;\nimport java.net.http.HttpResponse;\nimport java.time.Duration;\n\npublic class HttpClientPostJSON {\n\n    private static final HttpClient httpClient = HttpClient.newBuilder()\n            .authenticator(new Authenticator() {\n                @Override\n                protected PasswordAuthentication getPasswordAuthentication() {\n                    return new PasswordAuthentication(\n                            &quot;user&quot;,\n                            &quot;password&quot;.toCharArray());\n                }\n\n            })              \n            .build();\n\n    public static void main(String[] args) throws IOException, InterruptedException {\n\n        // json formatted data\n        String json = new StringBuilder()\n                .append(&quot;{&quot;)\n                .append(&quot;\\&quot;search\\&quot;:\\&quot;|tstats count where index=main\\&quot;&quot;)                          \n                .append(&quot;}&quot;).toString();\n\n        // add json header\n        HttpRequest request = HttpRequest.newBuilder()\n                .POST(HttpRequest.BodyPublishers.ofString(json))\n                .header(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;) \n                .uri(URI.create(&quot;https://url:8089/services/search/jobs&quot;))          \n                \n                .build();\n\n        HttpResponse&lt;String&gt; response = httpClient.send(request, HttpResponse.BodyHandlers.ofString());\n\n        // print status code\n        System.out.println(response.statusCode());\n\n        // print response body\n        System.out.println(response.body());\n\n    }\n\n}\n</code></pre>\n<p>What is the issue with java code? is there a better way to pass payload?\nWhy am i not gettting splunk search id (sid) as output.\nI see some  20MB+ output that is listing all the jobs in the splunk.</p>\n"},{"tags":["java","arrays","string","substring"],"comments":[{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1534613747,"post_id":51911104,"comment_id":90772301,"body_markdown":"2 foreach loops will do thee trick","body":"2 foreach loops will do thee trick"},{"owner":{"account_id":1664820,"reputation":32801,"user_id":1532460,"accept_rate":88,"display_name":"awesoon"},"score":1,"creation_date":1534613778,"post_id":51911104,"comment_id":90772306,"body_markdown":"&quot;Contains&quot; is a way too general here. Please clarify - should `test2` contain `test` as a subset, or it should contain any value from `test` or it should contain a (continuous or not) subsequence of `test`","body":"&quot;Contains&quot; is a way too general here. Please clarify - should <code>test2</code> contain <code>test</code> as a subset, or it should contain any value from <code>test</code> or it should contain a (continuous or not) subsequence of <code>test</code>"},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":2,"creation_date":1534613969,"post_id":51911104,"comment_id":90772354,"body_markdown":"HashSet + contains would do the trick.","body":"HashSet + contains would do the trick."}],"answers":[{"tags":[],"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1534614147,"creation_date":1534613873,"answer_id":51911152,"question_id":51911104,"body_markdown":"    public boolean checkIfHaveSameElements(String[] test1, String[] test2) {\r\n        for (String str2 : test2) {\r\n            for (String str1 : test1) {\r\n                if (str2.equals(str1)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\nJust pass your arrays as method call argumnents.","title":"check if string array contains value","body":"<pre><code>public boolean checkIfHaveSameElements(String[] test1, String[] test2) {\n    for (String str2 : test2) {\n        for (String str1 : test1) {\n            if (str2.equals(str1)) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n</code></pre>\n\n<p>Just pass your arrays as method call argumnents.</p>\n"},{"tags":[],"owner":{"account_id":4862517,"reputation":1544,"user_id":3921725,"display_name":"Alex Roig"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1534613960,"creation_date":1534613960,"answer_id":51911161,"question_id":51911104,"body_markdown":"You just need couple nested loops and iterate. Your question is ambiguous and the `contains` word you say might mean `equals` or `contains the substring`. In either case, if you want equal match, just replace `.contains()` with `.equals()`.\r\n\r\n    for (String value : test) {\r\n            for (String sampleString : test2) {\r\n                if (sampleString.contains(value)) {\r\n                    System.out.println(&quot;Value &quot; + value + &quot; is contained in the array in &quot; + sampleString);\r\n                }\r\n            }\r\n        }","title":"check if string array contains value","body":"<p>You just need couple nested loops and iterate. Your question is ambiguous and the <code>contains</code> word you say might mean <code>equals</code> or <code>contains the substring</code>. In either case, if you want equal match, just replace <code>.contains()</code> with <code>.equals()</code>.</p>\n\n<pre><code>for (String value : test) {\n        for (String sampleString : test2) {\n            if (sampleString.contains(value)) {\n                System.out.println(\"Value \" + value + \" is contained in the array in \" + sampleString);\n            }\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10754908,"reputation":2116,"user_id":7913153,"display_name":"Madhan Varadhodiyil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1534614130,"creation_date":1534614130,"answer_id":51911185,"question_id":51911104,"body_markdown":"You could use two for loops, one to iterate `test` and the other to check if the item is contained in `test2`\r\n\r\n\r\n    public static boolean checkIfExists(String[] arr, String item) {\r\n\t    for (String n : arr) {\r\n\t    \t  \r\n\t         if (n.contains(item)) {\r\n\t            return true;\r\n\t         }\r\n\t      }\r\n\t      return false;\r\n\t   }\r\n\r\n\r\nAnd in main method\r\n\r\n    String[] test = {&quot;Test1&quot;, &quot;Test2&quot;};\r\n    String[] test2 = {&quot;Test3&quot;, &quot;Test4&quot;, &quot;Test5&quot;, &quot;Test6&quot;, &quot;Test1 - Test7&quot;};\r\n    for(String t : test) {\r\n\t\tSystem.out.println(checkIfExists(test2, t));\r\n\t}","title":"check if string array contains value","body":"<p>You could use two for loops, one to iterate <code>test</code> and the other to check if the item is contained in <code>test2</code></p>\n\n<pre><code>public static boolean checkIfExists(String[] arr, String item) {\n    for (String n : arr) {\n\n         if (n.contains(item)) {\n            return true;\n         }\n      }\n      return false;\n   }\n</code></pre>\n\n<p>And in main method</p>\n\n<pre><code>String[] test = {\"Test1\", \"Test2\"};\nString[] test2 = {\"Test3\", \"Test4\", \"Test5\", \"Test6\", \"Test1 - Test7\"};\nfor(String t : test) {\n    System.out.println(checkIfExists(test2, t));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4816916,"reputation":16538,"user_id":3888766,"accept_rate":100,"display_name":"Fullstack Guy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1534614794,"creation_date":1534614794,"answer_id":51911258,"question_id":51911104,"body_markdown":"Using Java 8 APIs, I am first checking whether the entire string is present or whether the substring is present.\r\n\r\n    public class CheckString {\r\n\r\n    public static void main(String[] args) {      \r\n\r\n        String[] test = {&quot;Test1&quot;, &quot;Test3&quot;, &quot;Test2&quot;};\r\n        String[] test2 = {&quot;Test3&quot;, &quot;Test4&quot;, &quot;Test5&quot;, &quot;Test6&quot;, &quot;Test1 - Test7&quot;};\r\n\r\n        boolean isPresent = Arrays.stream(test2)\r\n                                  .filter(str-&gt;{\r\n                                   return Arrays.asList(test).indexOf(str) &gt; 0 || checkString(test,str);\r\n                                   })\r\n                                  .collect(Collectors.toList())\r\n                                  .isEmpty();\r\n\r\n        System.out.println(!isPresent);\r\n\r\n        }\r\n        private static boolean checkString(String[] strs, String chkStr){\r\n            for(String str: strs){\r\n                if(chkStr.contains(str)){\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    }","title":"check if string array contains value","body":"<p>Using Java 8 APIs, I am first checking whether the entire string is present or whether the substring is present.</p>\n\n<pre><code>public class CheckString {\n\npublic static void main(String[] args) {      \n\n    String[] test = {\"Test1\", \"Test3\", \"Test2\"};\n    String[] test2 = {\"Test3\", \"Test4\", \"Test5\", \"Test6\", \"Test1 - Test7\"};\n\n    boolean isPresent = Arrays.stream(test2)\n                              .filter(str-&gt;{\n                               return Arrays.asList(test).indexOf(str) &gt; 0 || checkString(test,str);\n                               })\n                              .collect(Collectors.toList())\n                              .isEmpty();\n\n    System.out.println(!isPresent);\n\n    }\n    private static boolean checkString(String[] strs, String chkStr){\n        for(String str: strs){\n            if(chkStr.contains(str)){\n                return true;\n            }\n        }\n        return false;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4425296,"reputation":379,"user_id":3603935,"accept_rate":25,"display_name":"Vik0809"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1659284932,"creation_date":1534613576,"question_id":51911104,"body_markdown":"I have to check, if String Array `test2[]` contains a value of `test1[]`. How to do that? Both Arrays have different size. I also have to check if `test2[]` contains a substring of `test1[]`. \r\n\r\n    String[] test = {&quot;Test1&quot;, &quot;Test2&quot;};\r\n    String[] test2 = {&quot;Test3&quot;, &quot;Test4&quot;, &quot;Test5&quot;, &quot;Test6&quot;, &quot;Test1 - Test7&quot;};\r\n\r\n\r\n","title":"check if string array contains value","body":"<p>I have to check, if String Array <code>test2[]</code> contains a value of <code>test1[]</code>. How to do that? Both Arrays have different size. I also have to check if <code>test2[]</code> contains a substring of <code>test1[]</code>.</p>\n<pre><code>String[] test = {&quot;Test1&quot;, &quot;Test2&quot;};\nString[] test2 = {&quot;Test3&quot;, &quot;Test4&quot;, &quot;Test5&quot;, &quot;Test6&quot;, &quot;Test1 - Test7&quot;};\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-mvc","spring-data"],"comments":[{"owner":{"account_id":6921189,"reputation":1490,"user_id":5313817,"display_name":"Rishal"},"score":0,"creation_date":1659206999,"post_id":73178192,"comment_id":129241031,"body_markdown":"as per your json structure why you think its not a good way. your json have 5-6 months already? Dynamic getter setter what exactly you are trying to achieve can you give one example","body":"as per your json structure why you think its not a good way. your json have 5-6 months already? Dynamic getter setter what exactly you are trying to achieve can you give one example"},{"owner":{"account_id":25934975,"reputation":49,"user_id":19655432,"display_name":"Hanufa Hannan"},"score":0,"creation_date":1659207520,"post_id":73178192,"comment_id":129241169,"body_markdown":"@Rishal - If we keep like this, how do I map it to the specific month in a serviceImp ? \n\nCan please provide the code ? How do I map it. Like If I got the JSONObject like this - \n\n for(int i = 0; i &lt; filterUser.length(); i++) {\n\t\t        JSONObject jsb = (JSONObject) filterUser.get(i);\n\t\t       \n\t\t        jsb.keySet().forEach(keyStr -&gt;\n\t\t        {\n\t\t        \t// Here Key is January, and jsb.get(keyStr) -&gt; January data\n                              //  How can I set the setter and getter here ?\n\t\t        });\n\t\t        filteredTotalFeedbackData.put(i, jsb);\n\t\t    }","body":"@Rishal - If we keep like this, how do I map it to the specific month in a serviceImp ?   Can please provide the code ? How do I map it. Like If I got the JSONObject like this -    for(int i = 0; i &lt; filterUser.length(); i++) { \t\t        JSONObject jsb = (JSONObject) filterUser.get(i); \t\t        \t\t        jsb.keySet().forEach(keyStr -&gt; \t\t        { \t\t        \t// Here Key is January, and jsb.get(keyStr) -&gt; January data                               //  How can I set the setter and getter here ? \t\t        }); \t\t        filteredTotalFeedbackData.put(i, jsb); \t\t    }"},{"owner":{"account_id":25934975,"reputation":49,"user_id":19655432,"display_name":"Hanufa Hannan"},"score":0,"creation_date":1659207586,"post_id":73178192,"comment_id":129241182,"body_markdown":"@Rishal - Month is Dynamic !!","body":"@Rishal - Month is Dynamic !!"},{"owner":{"account_id":6921189,"reputation":1490,"user_id":5313817,"display_name":"Rishal"},"score":0,"creation_date":1659209669,"post_id":73178192,"comment_id":129241613,"body_markdown":"Update the details in the question and also post minimal reproducible example which can detail out your question. follow the link [https://stackoverflow.com/help/minimal-reproducible-example](https://stackoverflow.com/help/minimal-reproducible-example)","body":"Update the details in the question and also post minimal reproducible example which can detail out your question. follow the link <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">https://stackoverflow.com/help/minimal-reproducible-example</a>"},{"owner":{"account_id":25934975,"reputation":49,"user_id":19655432,"display_name":"Hanufa Hannan"},"score":0,"creation_date":1659210268,"post_id":73178192,"comment_id":129241721,"body_markdown":"Does not help much. Can you please provide some code ?","body":"Does not help much. Can you please provide some code ?"}],"answers":[{"tags":[],"owner":{"account_id":6921189,"reputation":1490,"user_id":5313817,"display_name":"Rishal"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1659212222,"creation_date":1659211885,"answer_id":73178744,"question_id":73178192,"body_markdown":"There are few things which I am assuming, because as per your details the question is somewhat unclear.\r\n\r\nYou have a database having records as per what you have mentioned in your question.\r\n\r\n    [\r\n       {\r\n           &quot;userName&quot;: &quot;Sita&quot;,\r\n           &quot;userEmail&quot;: &quot;sita@gmail.com&quot;,\r\n           &quot;January&quot;: 3,\r\n           &quot;February&quot;: 10,\r\n           &quot;March&quot;: 1,\r\n           &quot;April&quot;: 3,\r\n           &quot;May&quot;: 32,\r\n           &quot;June&quot;: 31\r\n       }\r\n    ]\r\nIts basically Json Object contained inside Json Array, So, as per Java you will have a Entity class to hold the values and that Entity class will be contained inside a List.\r\n\r\n    @Entity\r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    class Details{\r\n        private String userName;\r\n        private String January;\r\n        private String February;\r\n        private String March;\r\n        private String April;\r\n        private String May;\r\n        private String June;\r\n        private String July;\r\n        private String August;\r\n        private String September;\r\n        private String October;\r\n        private String November;\r\n        private String December;\r\n    }\r\n\r\nYour result after fetching the data from database will be something like,\r\n\r\n    List&lt;Details&gt; result = //database call (Repository call);\r\n\r\nNow, this all things will be happening inside some service class , we are calling that service class as `DetailsServiceImpl.java`\r\n\r\n**Repository**\r\n\r\n    @Repository\r\n    interface DetailsRepository extends JpaRepository&lt;Details,Long&gt;{\r\n        \r\n    }\r\n\r\n**Service**\r\n\r\n    @Service\r\n    @RequiredArgsConstructor\r\n    class DetailsServiceImpl{\r\n        private final DetailsRepository detailsRepository;\r\n        \r\n        public List&lt;DetailsDto&gt; getLastSixMonthsData(){\r\n            //List&lt;Details&gt; result = //detailsRepository database call;\r\n    \r\n            //either use Modelmapper to copy the data from entity to DTO\r\n            //BeanUtils can also be used.\r\n            return //Copied ArrayList&lt;DetailsDto&gt;(); which will be populated by ModelMapper or BeanUtils.\r\n        }\r\n    }\r\n\r\n**DTO**\r\nThis `DTO` is responsible for rendering the data to `controller`, or you can say sending the `representable` data to `controller`.\r\n\r\n    @Data\r\n    //@JsonInclude(JsonInclude.Include.NON_NULL) can be used if you dont want non-null values in your response.\r\n    class DetailsDto{\r\n        private String userName;\r\n        private String January;\r\n        private String February;\r\n        private String March;\r\n        private String April;\r\n        private String May;\r\n        private String June;\r\n        private String July;\r\n        private String August;\r\n        private String September;\r\n        private String October;\r\n        private String November;\r\n        private String December;\r\n    }\r\n\r\n**RestController**\r\n\r\n    @RestController\r\n    @RequiredArgsConstructor\r\n    class DetailsController{\r\n        private final DetailsServiceImpl detailsService;\r\n        public ResponseEntity&lt;List&lt;DetailsDto&gt;&gt; getDetailsLastSixMonths(){\r\n            return new ResponseEntity&lt;List&lt;DetailsDto&gt;&gt;(detailsService.getLastSixMonthsData(), HttpStatus.OK);\r\n        }\r\n    }\r\n\r\n\r\nLinks to follow\r\n[https://stackoverflow.com/questions/19763278/how-to-use-beanutils-copyproperties][1]\r\n\r\n[https://stackoverflow.com/questions/72951449/copy-one-class-properties-to-another-class-with-set-the-field-to-map-in-java-sp/72953276#72953276][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/19763278/how-to-use-beanutils-copyproperties\r\n  [2]: https://stackoverflow.com/questions/72951449/copy-one-class-properties-to-another-class-with-set-the-field-to-map-in-java-sp/72953276#72953276\r\n\r\n\r\nNo need to use `JSONObject` and operating on each `object`. Hope it helps.","title":"Spring boot - How to Write Setter and Getter field Name Dynamic way","body":"<p>There are few things which I am assuming, because as per your details the question is somewhat unclear.</p>\n<p>You have a database having records as per what you have mentioned in your question.</p>\n<pre><code>[\n   {\n       &quot;userName&quot;: &quot;Sita&quot;,\n       &quot;userEmail&quot;: &quot;sita@gmail.com&quot;,\n       &quot;January&quot;: 3,\n       &quot;February&quot;: 10,\n       &quot;March&quot;: 1,\n       &quot;April&quot;: 3,\n       &quot;May&quot;: 32,\n       &quot;June&quot;: 31\n   }\n]\n</code></pre>\n<p>Its basically Json Object contained inside Json Array, So, as per Java you will have a Entity class to hold the values and that Entity class will be contained inside a List.</p>\n<pre><code>@Entity\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\nclass Details{\n    private String userName;\n    private String January;\n    private String February;\n    private String March;\n    private String April;\n    private String May;\n    private String June;\n    private String July;\n    private String August;\n    private String September;\n    private String October;\n    private String November;\n    private String December;\n}\n</code></pre>\n<p>Your result after fetching the data from database will be something like,</p>\n<pre><code>List&lt;Details&gt; result = //database call (Repository call);\n</code></pre>\n<p>Now, this all things will be happening inside some service class , we are calling that service class as <code>DetailsServiceImpl.java</code></p>\n<p><strong>Repository</strong></p>\n<pre><code>@Repository\ninterface DetailsRepository extends JpaRepository&lt;Details,Long&gt;{\n    \n}\n</code></pre>\n<p><strong>Service</strong></p>\n<pre><code>@Service\n@RequiredArgsConstructor\nclass DetailsServiceImpl{\n    private final DetailsRepository detailsRepository;\n    \n    public List&lt;DetailsDto&gt; getLastSixMonthsData(){\n        //List&lt;Details&gt; result = //detailsRepository database call;\n\n        //either use Modelmapper to copy the data from entity to DTO\n        //BeanUtils can also be used.\n        return //Copied ArrayList&lt;DetailsDto&gt;(); which will be populated by ModelMapper or BeanUtils.\n    }\n}\n</code></pre>\n<p><strong>DTO</strong>\nThis <code>DTO</code> is responsible for rendering the data to <code>controller</code>, or you can say sending the <code>representable</code> data to <code>controller</code>.</p>\n<pre><code>@Data\n//@JsonInclude(JsonInclude.Include.NON_NULL) can be used if you dont want non-null values in your response.\nclass DetailsDto{\n    private String userName;\n    private String January;\n    private String February;\n    private String March;\n    private String April;\n    private String May;\n    private String June;\n    private String July;\n    private String August;\n    private String September;\n    private String October;\n    private String November;\n    private String December;\n}\n</code></pre>\n<p><strong>RestController</strong></p>\n<pre><code>@RestController\n@RequiredArgsConstructor\nclass DetailsController{\n    private final DetailsServiceImpl detailsService;\n    public ResponseEntity&lt;List&lt;DetailsDto&gt;&gt; getDetailsLastSixMonths(){\n        return new ResponseEntity&lt;List&lt;DetailsDto&gt;&gt;(detailsService.getLastSixMonthsData(), HttpStatus.OK);\n    }\n}\n</code></pre>\n<p>Links to follow\n<a href=\"https://stackoverflow.com/questions/19763278/how-to-use-beanutils-copyproperties\">How to use BeanUtils.copyProperties?</a></p>\n<p><a href=\"https://stackoverflow.com/questions/72951449/copy-one-class-properties-to-another-class-with-set-the-field-to-map-in-java-sp/72953276#72953276\">Copy one class properties to another class, with set the field to map in java Spring boot</a></p>\n<p>No need to use <code>JSONObject</code> and operating on each <code>object</code>. Hope it helps.</p>\n"}],"owner":{"account_id":25934975,"reputation":49,"user_id":19655432,"display_name":"Hanufa Hannan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1503,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73178744,"answer_count":1,"score":0,"last_activity_date":1659284775,"creation_date":1659206171,"question_id":73178192,"body_markdown":"I am getting the record last 6 months from the database. Based on the current Date. I am storing into an JSONArray when I am returning it - I am getting Serialization Error, because there is not Getter and setter. My data looks like this - \r\n\r\n    [\r\n       {\r\n           &quot;userName&quot;: &quot;Sita&quot;,\r\n           &quot;userEmail&quot;: &quot;sita@gmail.com&quot;,\r\n           &quot;January&quot;: 3,\r\n           &quot;February&quot;: 10,\r\n           &quot;March&quot;: 1,\r\n           &quot;April&quot;: 3,\r\n           &quot;May&quot;: 32,\r\n           &quot;June&quot;: 31\r\n       },\r\n       {\r\n           &quot;userName&quot;: &quot;Gita&quot;,\r\n           &quot;userEmail&quot;: &quot;gita@gmail.com&quot;,\r\n           &quot;January&quot;: 3,\r\n           &quot;February&quot;: 10,\r\n           &quot;March&quot;: 1,\r\n           &quot;April&quot;: 3,\r\n           &quot;May&quot;: 32,\r\n           &quot;June&quot;: 31\r\n       },\r\n       {\r\n           &quot;userName&quot;: &quot;Ram&quot;,\r\n           &quot;userEmail&quot;: &quot;ram@gmail.com&quot;,\r\n           &quot;January&quot;: 3,\r\n           &quot;February&quot;: 10,\r\n           &quot;March&quot;: 1,\r\n           &quot;April&quot;: 3,\r\n           &quot;May&quot;: 32,\r\n           &quot;June&quot;: 31\r\n       }\r\n    ]\r\n\r\nNow the question is --&gt; Month Name can come dynamiclly. How I can I set this into my setter Getter Method, and call it from ServiceImp --&gt; controller\r\n\r\nI can&#39;t do like this - \r\n\r\n   \r\n\r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n\r\n    private String userName;\r\n       private String userName;\r\n       private String January;\r\n       private String February;\r\n       private String March;\r\n       private String April;\r\n       private String May;\r\n       private String June;\r\n       private String July;\r\n       private String August;\r\n       private String September;\r\n       private String October;\r\n       private String November;\r\n       private String December;\r\n\r\nIts not the good way. I tried with many way. Can you please help me how I can achive this, and Write In a serviceImpl and Controller file. I am new to this spring boot, Any help would be appriciated. \r\n\r\nIf we keep like this, how do I map it to the specific month in a serviceImp ? Can please provide the code ? How do I map it. Like If I got the JSONObject like this - \r\n            \r\n        \r\n```\r\nfor (int i = 0; i &lt; filterUser.length(); i++) { \r\n    JSONObject jsb = (JSONObject) filterUser.get(i); \r\n    jsb.keySet().forEach(keyStr -&gt; { \r\n         // Here Key is January, and jsb.get(keyStr) -&gt; January data \r\n         // How can I set the setter and getter here ? \r\n    // }); \r\n    //  filteredTotalFeedbackData.put(i, jsb); \r\n}\r\n```","title":"Spring boot - How to Write Setter and Getter field Name Dynamic way","body":"<p>I am getting the record last 6 months from the database. Based on the current Date. I am storing into an JSONArray when I am returning it - I am getting Serialization Error, because there is not Getter and setter. My data looks like this -</p>\n<pre><code>[\n   {\n       &quot;userName&quot;: &quot;Sita&quot;,\n       &quot;userEmail&quot;: &quot;sita@gmail.com&quot;,\n       &quot;January&quot;: 3,\n       &quot;February&quot;: 10,\n       &quot;March&quot;: 1,\n       &quot;April&quot;: 3,\n       &quot;May&quot;: 32,\n       &quot;June&quot;: 31\n   },\n   {\n       &quot;userName&quot;: &quot;Gita&quot;,\n       &quot;userEmail&quot;: &quot;gita@gmail.com&quot;,\n       &quot;January&quot;: 3,\n       &quot;February&quot;: 10,\n       &quot;March&quot;: 1,\n       &quot;April&quot;: 3,\n       &quot;May&quot;: 32,\n       &quot;June&quot;: 31\n   },\n   {\n       &quot;userName&quot;: &quot;Ram&quot;,\n       &quot;userEmail&quot;: &quot;ram@gmail.com&quot;,\n       &quot;January&quot;: 3,\n       &quot;February&quot;: 10,\n       &quot;March&quot;: 1,\n       &quot;April&quot;: 3,\n       &quot;May&quot;: 32,\n       &quot;June&quot;: 31\n   }\n]\n</code></pre>\n<p>Now the question is --&gt; Month Name can come dynamiclly. How I can I set this into my setter Getter Method, and call it from ServiceImp --&gt; controller</p>\n<p>I can't do like this -</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\n\nprivate String userName;\n   private String userName;\n   private String January;\n   private String February;\n   private String March;\n   private String April;\n   private String May;\n   private String June;\n   private String July;\n   private String August;\n   private String September;\n   private String October;\n   private String November;\n   private String December;\n</code></pre>\n<p>Its not the good way. I tried with many way. Can you please help me how I can achive this, and Write In a serviceImpl and Controller file. I am new to this spring boot, Any help would be appriciated.</p>\n<p>If we keep like this, how do I map it to the specific month in a serviceImp ? Can please provide the code ? How do I map it. Like If I got the JSONObject like this -</p>\n<pre><code>for (int i = 0; i &lt; filterUser.length(); i++) { \n    JSONObject jsb = (JSONObject) filterUser.get(i); \n    jsb.keySet().forEach(keyStr -&gt; { \n         // Here Key is January, and jsb.get(keyStr) -&gt; January data \n         // How can I set the setter and getter here ? \n    // }); \n    //  filteredTotalFeedbackData.put(i, jsb); \n}\n</code></pre>\n"},{"tags":["java","data-structures","entity-relationship","indexoutofboundsexception"],"comments":[{"owner":{"display_name":"user1531971"},"score":1,"creation_date":1436731830,"post_id":31371997,"comment_id":50723307,"body_markdown":"You should write a utility/testing method that takes your arg and dumps them to standard out. Just writing this method will probably show you where the error is.","body":"You should write a utility/testing method that takes your arg and dumps them to standard out. Just writing this method will probably show you where the error is."},{"owner":{"account_id":4280743,"reputation":3423,"user_id":3500191,"accept_rate":100,"display_name":"Ethan Bierlein"},"score":0,"creation_date":1436732682,"post_id":31371997,"comment_id":50723544,"body_markdown":"@GiovanniBotta Codereview is for **working code only**. Broken code is off-topic there.","body":"@GiovanniBotta Codereview is for <b>working code only</b>. Broken code is off-topic there."},{"owner":{"account_id":5937234,"reputation":31,"user_id":4669783,"display_name":"Prince Soni"},"score":0,"creation_date":1436735008,"post_id":31371997,"comment_id":50724193,"body_markdown":"@jdv Writing a testing method is later topic once I figure out  this change in length problem, I had explained.\n\nThe question right now is that why the hell firstSubString  length got changed after computeSubString method and how can I prevent it from changing.","body":"@jdv Writing a testing method is later topic once I figure out  this change in length problem, I had explained.  The question right now is that why the hell firstSubString  length got changed after computeSubString method and how can I prevent it from changing."},{"owner":{"account_id":5937234,"reputation":31,"user_id":4669783,"display_name":"Prince Soni"},"score":0,"creation_date":1436735804,"post_id":31371997,"comment_id":50724405,"body_markdown":"Anyone, here to help me??","body":"Anyone, here to help me??"},{"owner":{"display_name":"user1531971"},"score":0,"creation_date":1436796457,"post_id":31371997,"comment_id":50748025,"body_markdown":"@PrinceSoni, if you write the test method/debug method to dump the contents of the byte arrays, you will find your error.","body":"@PrinceSoni, if you write the test method/debug method to dump the contents of the byte arrays, you will find your error."}],"answers":[{"tags":[],"owner":{"account_id":4724677,"reputation":1116,"user_id":3821695,"display_name":"JDrost1818"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1436738805,"creation_date":1436738805,"answer_id":31373049,"question_id":31371997,"body_markdown":"Well, it changes because you are overwriting `firstSubString ` here:\r\n\r\n    firstSubString = so.computeSubstring(firstName, pos);\r\n\r\nWhat you want to do; however, is copy the result of `computeString` *into* the first part of `firstSubString`. You can do this rather simply with [System.arraycopy()][1]\r\n\r\n    char[] result = so.computeSubstring(firstName, pos);\r\n    System.arraycopy(result, 0, firstSubstring, 0, result.length); \r\n\r\nThis will copy the result into the front of the firstSubstring. This will not alter its length at all. \r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29 &quot;System.arraycopy&amp;#40;&amp;#41;&quot;","title":"Java : Creating a String class : ArrayIndexOutOfBoundsException","body":"<p>Well, it changes because you are overwriting <code>firstSubString</code> here:</p>\n\n<pre><code>firstSubString = so.computeSubstring(firstName, pos);\n</code></pre>\n\n<p>What you want to do; however, is copy the result of <code>computeString</code> <em>into</em> the first part of <code>firstSubString</code>. You can do this rather simply with <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29\" rel=\"nofollow\" title=\"System.arraycopy&#40;&#41;\">System.arraycopy()</a></p>\n\n<pre><code>char[] result = so.computeSubstring(firstName, pos);\nSystem.arraycopy(result, 0, firstSubstring, 0, result.length); \n</code></pre>\n\n<p>This will copy the result into the front of the firstSubstring. This will not alter its length at all. </p>\n"}],"owner":{"account_id":5937234,"reputation":31,"user_id":4669783,"display_name":"Prince Soni"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":4,"up_vote_count":3,"accepted_answer_id":31373049,"answer_count":1,"score":-1,"last_activity_date":1659284412,"creation_date":1436731280,"question_id":31371997,"body_markdown":"Note : Please don&#39;t say to use String class methods as here I am creating all String method on my own.\r\n\r\nObjective : Consider two string prince and soni. I want  **computeConcate**   method to ask for position ( Say 4 is entered ) and then obtain string from first name starting from beginning till 4th position and concate it with the last name viz soni. Hence I got prinsoni\r\n\r\nError : ArrayIndexOutOfBondsException on line labled as Error within computeConcate() method\r\n\r\nReason of the error : The string so obtained ( viz concatenation of first and last name can be of atmost length of first + last name )\r\n\r\nSo I created String \r\n\r\n    char []firstSubString;\r\n    \tfirstSubString = new char[so.computeLength(firstName) + so.computeLength(lastName)];\r\n\t\r\n\r\nIts length right now is as I though sum of first and last name but after this method computeSubstring() it changes to of length of first name.\r\n\r\nWhat I want?\r\n\r\n&gt; Can you provide me a way so that computeSubstring doesn&#39;t end up\r\n&gt; changing lenght of firstSubString.\r\n\r\n\r\n\r\n\r\n    /**\r\n     * Take two strings \r\n     * Run a loop pause when counter is encountered\r\n     * Now use + to concatenate them\r\n     **/\r\n    @Override\r\n    public char[] computeConcatenation(char[] firstName, char[] lastName, int pos ) {\r\n    \tStringClass so = new StringClass();\r\n    \tBoolean flag = false;\r\n    \tchar []firstSubString;\r\n    \tfirstSubString = new char[so.computeLength(firstName) + so.computeLength(lastName)];\r\n    \t\r\n    \tSystem.out.println( firstSubString.length ); // O/p is 10 ( length of                                            //                                                  first name + last name\r\n    \r\n    \tfirstSubString = so.computeSubstring(firstName, pos);\r\n    \t\r\n    \tSystem.out.println( firstSubString.length );   // o/p is 6. length of                         //                                                   first name\r\n    \r\n    \tint len = so.computeLength(firstSubString);\r\n    \t\r\n    \t// To find pos\r\n    \tfor(int i = 0; i &lt; so.computeLength(lastName); i++){\r\n    \r\n    \t\t// ArrayIndexOfOfBondsException on this line\r\n    Error :\tfirstSubString[len + i]\t= lastName[i]; \r\n    \t} \r\n    \treturn firstSubString;\r\n    }\r\n    \r\n    \r\n    \r\n    Here is the code for substring method\r\n    \r\n    /**\r\n     * Traverse the string till pos. Store this string into a new string\r\n     */\r\n    @Override\r\n    public  char[]  computeSubstring(char[] name, int pos) {\r\n    \tStringClass so = new StringClass();\r\n    \tchar []newName;\r\n    \tnewName = new char[so.computeLength(name)];\r\n    \t\r\n    \r\n    \r\n    \t\tfor(int i = 0; i &lt; so.computeLength(name); i++){\r\n    \t\tif( i == pos) break;\r\n    \t\tnewName[i] = name[i];\r\n    \t}\r\n    \treturn newName;\r\n    }\r\n\r\n","title":"Java : Creating a String class : ArrayIndexOutOfBoundsException","body":"<p>Note : Please don't say to use String class methods as here I am creating all String method on my own.</p>\n\n<p>Objective : Consider two string prince and soni. I want  <strong>computeConcate</strong>   method to ask for position ( Say 4 is entered ) and then obtain string from first name starting from beginning till 4th position and concate it with the last name viz soni. Hence I got prinsoni</p>\n\n<p>Error : ArrayIndexOutOfBondsException on line labled as Error within computeConcate() method</p>\n\n<p>Reason of the error : The string so obtained ( viz concatenation of first and last name can be of atmost length of first + last name )</p>\n\n<p>So I created String </p>\n\n<pre><code>char []firstSubString;\n    firstSubString = new char[so.computeLength(firstName) + so.computeLength(lastName)];\n</code></pre>\n\n<p>Its length right now is as I though sum of first and last name but after this method computeSubstring() it changes to of length of first name.</p>\n\n<p>What I want?</p>\n\n<blockquote>\n  <p>Can you provide me a way so that computeSubstring doesn't end up\n  changing lenght of firstSubString.</p>\n</blockquote>\n\n<pre><code>/**\n * Take two strings \n * Run a loop pause when counter is encountered\n * Now use + to concatenate them\n **/\n@Override\npublic char[] computeConcatenation(char[] firstName, char[] lastName, int pos ) {\n    StringClass so = new StringClass();\n    Boolean flag = false;\n    char []firstSubString;\n    firstSubString = new char[so.computeLength(firstName) + so.computeLength(lastName)];\n\n    System.out.println( firstSubString.length ); // O/p is 10 ( length of                                            //                                                  first name + last name\n\n    firstSubString = so.computeSubstring(firstName, pos);\n\n    System.out.println( firstSubString.length );   // o/p is 6. length of                         //                                                   first name\n\n    int len = so.computeLength(firstSubString);\n\n    // To find pos\n    for(int i = 0; i &lt; so.computeLength(lastName); i++){\n\n        // ArrayIndexOfOfBondsException on this line\nError : firstSubString[len + i] = lastName[i]; \n    } \n    return firstSubString;\n}\n\n\n\nHere is the code for substring method\n\n/**\n * Traverse the string till pos. Store this string into a new string\n */\n@Override\npublic  char[]  computeSubstring(char[] name, int pos) {\n    StringClass so = new StringClass();\n    char []newName;\n    newName = new char[so.computeLength(name)];\n\n\n\n        for(int i = 0; i &lt; so.computeLength(name); i++){\n        if( i == pos) break;\n        newName[i] = name[i];\n    }\n    return newName;\n}\n</code></pre>\n"},{"tags":["java","spring","hibernate","jpa","tomcat"],"comments":[{"owner":{"account_id":20122112,"reputation":88,"user_id":14756421,"display_name":"Maxim Bezmen"},"score":0,"creation_date":1659272351,"post_id":73182787,"comment_id":129250447,"body_markdown":"see it https://stackoverflow.com/a/3827546/14756421","body":"see it <a href=\"https://stackoverflow.com/a/3827546/14756421\">stackoverflow.com/a/3827546/14756421</a>"}],"owner":{"account_id":21785106,"reputation":37,"user_id":16086275,"display_name":"peace3106"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1659284385,"creation_date":1659265844,"question_id":73182787,"body_markdown":"I have a maven project with Spring and Hibernate and I have entity class called `Abonnement`. \r\n\r\nI created a `persistence.xml` file. When I&#39;m running my application in the **Tomcat 8** server, my server is running normally but any table is created in my database.\r\n\r\nThis is my entity class, `persistence.xml` file, `web.xml` file, `applicationContext.xml` file and `pom.xml` file.\r\n\r\n    @Entity\r\n    @Inheritance(strategy = InheritanceType.SINGLE_TABLE)\r\n    @DiscriminatorColumn(name = &quot;TYPE_AB&quot;, length = 5)\r\n    public abstract class Abonnement {\r\n    \t@Id\r\n    \t@GeneratedValue(strategy = GenerationType.AUTO)\r\n    \tprivate Long idAbonnement;\r\n    \tprivate Date dateAbonnement;\r\n    \tprivate double solde;\r\n    \tprivate boolean actif;\r\n    \r\n    \tpublic Long getIdAbonnement() {\r\n    \t\treturn idAbonnement;\r\n    \t}\r\n    \r\n    \tpublic void setIdAbonnement(Long idAbonnement) {\r\n    \t\tthis.idAbonnement = idAbonnement;\r\n    \t}\r\n    \r\n    \tpublic Date getDateAbonnement() {\r\n    \t\treturn dateAbonnement;\r\n    \t}\r\n    \r\n    \tpublic void setDateAbonnement(Date dateAbonnement) {\r\n    \t\tthis.dateAbonnement = dateAbonnement;\r\n    \t}\r\n    \r\n    \tpublic double getSolde() {\r\n    \t\treturn solde;\r\n    \t}\r\n    \r\n    \tpublic void setSolde(double solde) {\r\n    \t\tthis.solde = solde;\r\n    \t}\r\n    \r\n    \tpublic boolean isActif() {\r\n    \t\treturn actif;\r\n    \t}\r\n    \r\n    \tpublic void setActif(boolean actif) {\r\n    \t\tthis.actif = actif;\r\n    \t}\r\n    \r\n    \tpublic Abonnement() {\r\n    \t\tsuper();\r\n    \t\t// TODO Auto-generated constructor stub\r\n    \t}\r\n    \r\n    \tpublic Abonnement(Date dateAbonnement, double solde, boolean actif) {\r\n    \t\tsuper();\r\n    \t\tthis.dateAbonnement = dateAbonnement;\r\n    \t\tthis.solde = solde;\r\n    \t\tthis.actif = actif;\r\n    \t}\r\n    \r\n    }\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;persistence version=&quot;2.1&quot;\r\n        xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n        xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd&quot;&gt;\r\n        &lt;persistence-unit name=&quot;JPADemo&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n         &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\r\n            &lt;properties&gt;\r\n            \t&lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.MariaDB103Dialect&quot;/&gt;\r\n            \t&lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;create&quot;/&gt;\r\n            \t&lt;property name=&quot;hibernate.show.sql&quot; value=&quot;true&quot;/&gt;     \r\n            &lt;/properties&gt;\r\n        &lt;/persistence-unit&gt;\r\n    &lt;/persistence&gt;\r\n\r\n    &lt;?xml  version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n        xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;\r\n        xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n        xmlns:jee=&quot;http://www.springframework.org/schema/jee&quot;\r\n        xmlns:lang=&quot;http://www.springframework.org/schema/lang&quot;\r\n        xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\r\n        xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\r\n        xmlns:util=&quot;http://www.springframework.org/schema/util&quot;\r\n        xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\r\n            http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd\r\n            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\r\n            http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd\r\n            http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd\r\n            http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd\r\n            http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd&quot;&gt;\r\n        \r\n        &lt;!-- This bean has been referred fron struts.xml file; So type it correctly; --&gt;\r\n        &lt;!-- Make scope prototype; This is really important. --&gt;\r\n        &lt;bean name=&quot;dataSource&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;\r\n    \t     &lt;property name=&quot;driverClassName&quot; value=&quot;org.mariadb.jdbc.Driver&quot;&gt;&lt;/property&gt;\r\n    \t     &lt;property name=&quot;url&quot; value=&quot;jdbc:mariadb://localhost:3306/localbdd&quot;&gt;&lt;/property&gt;\r\n    \t     &lt;property name=&quot;username&quot; value=&quot;root&quot;&gt;&lt;/property&gt;\r\n    \t     &lt;property name=&quot;password&quot; value=&quot;root&quot;&gt;&lt;/property&gt;\r\n        &lt;/bean&gt;\r\n        \r\n        &lt;bean id=&quot;persistenceUnitManager&quot; class=&quot;org.springframework.orm.jpa.persistenceunit.DefaultPersistenceUnitManager&quot; &gt;\r\n    \t     &lt;property name=&quot;persistenceXmlLocations&quot;&gt;\r\n    \t        &lt;list&gt;\r\n    \t        \t&lt;value&gt;classpath*:META-INF/persistence.xml&lt;/value&gt;\r\n    \t        &lt;/list&gt;\r\n    \t     &lt;/property&gt;\r\n    \t     &lt;property name=&quot;defaultDataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;\r\n        &lt;/bean&gt;\r\n        \r\n        &lt;bean id=&quot;entityManagerFactory&quot; class=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot; &gt;\r\n    \t     &lt;property name=&quot;persistenceUnitManager&quot; ref=&quot;persistenceUnitManager&quot;&gt;&lt;/property&gt;\r\n        &lt;/bean&gt;\r\n        \r\n        &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.orm.jpa.JpaTransactionManager&quot;&gt;\r\n      \t\t&lt;property name=&quot;entityManagerFactory&quot; ref=&quot;entityManagerFactory&quot;&gt;&lt;/property&gt;\r\n       \t&lt;/bean&gt;\r\n       \t&lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;/&gt;\r\n       \t&lt;context:annotation-config&gt;&lt;/context:annotation-config&gt;\r\n    &lt;/beans&gt;\r\n\r\n    &lt;web-app&gt;\r\n      &lt;display-name&gt;Struts Hibernate Examples&lt;/display-name&gt;\r\n      \r\n     &lt;!-- The definition of the Root Spring Container shared by all servlets and filters --&gt;\r\n      &lt;context-param&gt;\r\n      \t&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n      \t&lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;\r\n      &lt;/context-param&gt;\r\n      \r\n      &lt;!-- Creates the Spring Container shared by all servlets and Filters --&gt;\r\n      &lt;listener&gt;\r\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\r\n      &lt;/listener&gt;\r\n      \r\n       &lt;!-- Configuration STRUTS :  ActionServlet --&gt;\r\n      &lt;servlet&gt;\r\n        &lt;servlet-name&gt;action&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;\r\n            org.apache.struts.action.ActionServlet\r\n        &lt;/servlet-class&gt;\r\n        &lt;init-param&gt;\r\n            &lt;param-name&gt;config&lt;/param-name&gt;\r\n            &lt;param-value&gt;\r\n             /WEB-INF/struts-config.xml\r\n            &lt;/param-value&gt;\r\n        &lt;/init-param&gt;\r\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n      &lt;/servlet&gt;\r\n     \r\n      &lt;servlet-mapping&gt;\r\n           &lt;servlet-name&gt;action&lt;/servlet-name&gt;\r\n           &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;\r\n      &lt;/servlet-mapping&gt;\r\n      \r\n      &lt;!-- Page d&#39;accueil --&gt;\r\n    \t&lt;welcome-file-list&gt;\r\n    \t\t&lt;welcome-file&gt;index.html&lt;/welcome-file&gt;\r\n    \t&lt;/welcome-file-list&gt;\r\n      \r\n      \r\n    &lt;/web-app&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n      &lt;groupId&gt;dev.mvn.ln&lt;/groupId&gt;\r\n      &lt;artifactId&gt;GestionAbonnement&lt;/artifactId&gt;\r\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n      &lt;packaging&gt;war&lt;/packaging&gt;\r\n    \r\n      &lt;name&gt;GestionAbonnement Maven Webapp&lt;/name&gt;\r\n      &lt;!-- FIXME change it to the project&#39;s website --&gt;\r\n      &lt;url&gt;http://www.example.com&lt;/url&gt;\r\n    \r\n      &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;\r\n        &lt;struts.version&gt;1.3.10&lt;/struts.version&gt;\r\n       &lt;!-- &lt;spring.version&gt;5.3.20&lt;/spring.version&gt; 4.3.11.RELEASE--&gt;\r\n        &lt;spring.version&gt;3.2.3.RELEASE&lt;/spring.version&gt; &lt;!--4.3.11.RELEASE--&gt;\r\n        &lt;spring.data.mongo.version&gt;3.4.0&lt;/spring.data.mongo.version&gt; &lt;!--2.2.6.RELEASE--&gt;\r\n        &lt;mongo.driver.version&gt;4.6.0&lt;/mongo.driver.version&gt;\r\n        &lt;jackson.version&gt;2.12.6&lt;/jackson.version&gt;\r\n        &lt;swagger.version&gt;2.1.11&lt;/swagger.version&gt;\r\n       &lt;!-- &lt;hibernate.version&gt;4.2.1.Final&lt;/hibernate.version&gt; --&gt;\r\n        &lt;hibernate.version&gt;5.4.30.Final&lt;/hibernate.version&gt;\r\n      &lt;/properties&gt;\r\n    \r\n      &lt;dependencies&gt;\r\n      \r\n       &lt;!--spring --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n         &lt;!--spring --&gt;\r\n         \r\n         &lt;dependency&gt;\r\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n            &lt;version&gt;8.0.28&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n       &lt;!-- &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mariadb.jdbc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mariadb-java-client&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.4&lt;/version&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt; --&gt;\r\n        \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.mariadb.jdbc&lt;/groupId&gt;\r\n          &lt;artifactId&gt;mariadb-java-client&lt;/artifactId&gt;\r\n          &lt;version&gt;1.5.7&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \t\r\n    \t\r\n    \t\r\n        &lt;!-- J2EE library --&gt;\r\n    \t&lt;dependency&gt;\r\n    \t  &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n    \t  &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\r\n    \t  &lt;version&gt;2.4&lt;/version&gt;\r\n    \t  &lt;scope&gt;provided&lt;/scope&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t\r\n    \t&lt;dependency&gt;\r\n    \t  &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n    \t  &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\r\n    \t  &lt;version&gt;2.0&lt;/version&gt;\r\n    \t  &lt;scope&gt;provided&lt;/scope&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t\r\n    \t&lt;dependency&gt;\r\n    \t  &lt;groupId&gt;log4j&lt;/groupId&gt;\r\n    \t  &lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n    \t  &lt;version&gt;1.2.17&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \r\n        &lt;!-- Unit Test --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;4.5&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        \r\n         &lt;!-- Struts 1.3 framework --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.apache.struts&lt;/groupId&gt;\r\n    \t  &lt;artifactId&gt;struts-core&lt;/artifactId&gt;\r\n          &lt;version&gt;${struts.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.apache.struts&lt;/groupId&gt;\r\n    \t  &lt;artifactId&gt;struts-taglib&lt;/artifactId&gt;\r\n          &lt;version&gt;${struts.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n       \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.apache.struts&lt;/groupId&gt;\r\n    \t  &lt;artifactId&gt;struts-extras&lt;/artifactId&gt;\r\n          &lt;version&gt;${struts.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        \r\n    \r\n    \t&lt;!-- Hibernate core --&gt;\r\n    \t&lt;dependency&gt;\r\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n                &lt;version&gt;${hibernate.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n                &lt;version&gt;${hibernate.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n    \t&lt;!-- Hibernate core library dependecy start --&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;dom4j&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;dom4j&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.6.1&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.1.1&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;commons-collections&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;commons-collections&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.2.1&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;cglib&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;cglib&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.2&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;!-- Hibernate core library dependecy end --&gt;\r\n    \r\n    \t&lt;!-- Hibernate query library dependecy start --&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;antlr&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;antlr&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.7.7&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;!-- Hibernate query library dependecy end --&gt;\r\n        \r\n      &lt;/dependencies&gt;\r\n    \r\n      &lt;build&gt;\r\n        &lt;finalName&gt;GestionAbonnement&lt;/finalName&gt;\r\n        &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\r\n          &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;3.1.0&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_war_packaging --&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;3.0.2&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;3.8.0&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;2.22.1&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;3.2.2&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;2.5.2&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;2.8.2&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n          &lt;/plugins&gt;\r\n        &lt;/pluginManagement&gt;\r\n      &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nI&#39;m using Eclipse IDE, Tomcat 8 and MariaDB 10.7.\r\n\r\nI&#39;ve added connector `jar` maria db in Tomcat `lib` folder.\r\n\r\nMy Eclipse trace server tomcat not displaying any connection to the database:\r\n\r\n    juil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Nom version serveur :              Apache Tomcat/8.5.81\r\n    juil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Serveur compil&#233; :                  Jun 8 2022 21:30:15 UTC\r\n    juil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Version du serveur :               8.5.81.0\r\n    juil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Nom de l&#39;OS :                      Windows 11\r\n    juil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Version OS :                       10.0\r\n    juil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Architecture :                     amd64\r\n    juil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Java Home :                        C:\\Program Files\\Java\\jdk-11.0.14\r\n    juil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Version JVM :                      11.0.14+8-LTS-263\r\n    juil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Fournisseur de la JVM :            Oracle Corporation\r\n    juil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: CATALINA_BASE :                    C:\\eclipse-workspace\\.metadata\\.plugins\\org.eclipse.wst.server.core\\tmp0\r\n    juil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: CATALINA_HOME :                    C:\\apache-tomcat-8.5.81\r\n    juil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Argument de la ligne de commande : -Dcatalina.base=C:\\eclipse-workspace\\.metadata\\.plugins\\org.eclipse.wst.server.core\\tmp0\r\n    juil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Argument de la ligne de commande : -Dcatalina.home=C:\\apache-tomcat-8.5.81\r\n    juil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Argument de la ligne de commande : -Dwtp.deploy=C:\\eclipse-workspace\\.metadata\\.plugins\\org.eclipse.wst.server.core\\tmp0\\wtpwebapps\r\n    juil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Argument de la ligne de commande : --add-opens=java.base/java.lang=ALL-UNNAMED\r\n    juil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Argument de la ligne de commande : --add-opens=java.base/java.io=ALL-UNNAMED\r\n    juil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Argument de la ligne de commande : --add-opens=java.base/java.util=ALL-UNNAMED\r\n    juil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Argument de la ligne de commande : --add-opens=java.base/java.util.concurrent=ALL-UNNAMED\r\n    juil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Argument de la ligne de commande : --add-opens=java.rmi/sun.rmi.transport=ALL-UNNAMED\r\n    juil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Argument de la ligne de commande : -Dfile.encoding=UTF-8\r\n    juil. 31, 2022 1:09:13 PM org.apache.catalina.core.AprLifecycleListener lifecycleEvent\r\n    INFO: La librairie Apache Tomcat Native bas&#233;e sur APR qui permet des performances optimales dans les environnements de production n&#39;a pas &#233;t&#233; trouv&#233;e sur le java.library.path : [C:\\Program Files\\Java\\jdk-11.0.14\\bin;C:\\Windows\\Sun\\Java\\bin;C:\\Windows\\system32;C:\\Windows;C:/Program Files/eclipse//plugins/org.eclipse.justj.openjdk.hotspot.jre.full.win32.x86_64_17.0.3.v20220515-1416/jre/bin/server;C:/Program Files/eclipse//plugins/org.eclipse.justj.openjdk.hotspot.jre.full.win32.x86_64_17.0.3.v20220515-1416/jre/bin;C:\\Program Files\\Common Files\\Oracle\\Java\\javapath;C:\\Program Files (x86)\\Common Files\\Oracle\\Java\\javapath;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Windows\\System32\\OpenSSH\\;C:\\Program Files\\Git\\cmd;C:\\Program Files\\Java\\jdk-11.0.14\\bin;C:\\maven-3.8.5\\bin;C:\\Program Files\\MongoDB\\Server\\4.2\\bin;%NVM_HOME%;%NVM_SYMLINK%;C:\\Users\\lelon\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lelon\\AppData\\Roaming\\npm;C:\\Users\\lelon\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.1\\bin;;C:\\Users\\lelon\\AppData\\Roaming\\nvm;C:\\Program Files\\nodejs;C:\\Program Files\\eclipse;;.]\r\n    juil. 31, 2022 1:09:13 PM org.apache.coyote.AbstractProtocol init\r\n    INFO: Initialisation du gestionnaire de protocole [&quot;http-nio-8080&quot;]\r\n    juil. 31, 2022 1:09:13 PM org.apache.catalina.startup.Catalina load\r\n    INFO: Initialization processed in 767 ms\r\n    juil. 31, 2022 1:09:13 PM org.apache.catalina.core.StandardService startInternal\r\n    INFO: D&#233;marrage du service [Catalina]\r\n    juil. 31, 2022 1:09:13 PM org.apache.catalina.core.StandardEngine startInternal\r\n    INFO: D&#233;marrage du moteur de Servlets : [Apache Tomcat/8.5.81]\r\n    juil. 31, 2022 1:09:14 PM org.apache.jasper.servlet.TldScanner scanJars\r\n    INFO: Au moins un fichier JAR a &#233;t&#233; analys&#233; pour trouver des TLDs mais il n&#39;en contenait pas, le mode &quot;debug&quot; du journal peut &#234;tre activ&#233; pour obtenir une liste compl&#232;te de JAR scann&#233;s sans succ&#232;s ; &#233;viter d&#39;analyser des JARs inutilement peut am&#233;liorer sensiblement le temps de d&#233;marrage et le temps de compilation des JSPs\r\n    juil. 31, 2022 1:09:14 PM org.apache.catalina.util.SessionIdGeneratorBase createSecureRandom\r\n    WARNING: La cr&#233;ation de l&#39;instance de SecureRandom pour le g&#233;n&#233;rateur d&#39;id de session en utilisant [SHA1PRNG] a pris [111] millisecondes\r\n    juil. 31, 2022 1:09:16 PM org.apache.jasper.servlet.TldScanner scanJars\r\n    INFO: Au moins un fichier JAR a &#233;t&#233; analys&#233; pour trouver des TLDs mais il n&#39;en contenait pas, le mode &quot;debug&quot; du journal peut &#234;tre activ&#233; pour obtenir une liste compl&#232;te de JAR scann&#233;s sans succ&#232;s ; &#233;viter d&#39;analyser des JARs inutilement peut am&#233;liorer sensiblement le temps de d&#233;marrage et le temps de compilation des JSPs\r\n    juil. 31, 2022 1:09:16 PM org.apache.catalina.core.ApplicationContext log\r\n    INFO: No Spring WebApplicationInitializer types detected on classpath\r\n    juil. 31, 2022 1:09:16 PM org.apache.catalina.core.ApplicationContext log\r\n    INFO: Initializing Spring root WebApplicationContext\r\n    log4j:WARN No appenders could be found for logger (org.springframework.web.context.ContextLoader).\r\n    log4j:WARN Please initialize the log4j system properly.\r\n    log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\r\n    juil. 31, 2022 1:09:18 PM org.apache.coyote.AbstractProtocol start\r\n    INFO: D&#233;marrage du gestionnaire de protocole [&quot;http-nio-8080&quot;]\r\n    juil. 31, 2022 1:09:18 PM org.apache.catalina.startup.Catalina start\r\n    INFO: Server startup in 5157 ms\r\n\r\n\r\nMy project structure in the Eclipse IDE:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xq8RB.png","title":"Problem to create my entity in database by using in jpa with persistence xml file","body":"<p>I have a maven project with Spring and Hibernate and I have entity class called <code>Abonnement</code>.</p>\n<p>I created a <code>persistence.xml</code> file. When I'm running my application in the <strong>Tomcat 8</strong> server, my server is running normally but any table is created in my database.</p>\n<p>This is my entity class, <code>persistence.xml</code> file, <code>web.xml</code> file, <code>applicationContext.xml</code> file and <code>pom.xml</code> file.</p>\n<pre><code>@Entity\n@Inheritance(strategy = InheritanceType.SINGLE_TABLE)\n@DiscriminatorColumn(name = &quot;TYPE_AB&quot;, length = 5)\npublic abstract class Abonnement {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long idAbonnement;\n    private Date dateAbonnement;\n    private double solde;\n    private boolean actif;\n\n    public Long getIdAbonnement() {\n        return idAbonnement;\n    }\n\n    public void setIdAbonnement(Long idAbonnement) {\n        this.idAbonnement = idAbonnement;\n    }\n\n    public Date getDateAbonnement() {\n        return dateAbonnement;\n    }\n\n    public void setDateAbonnement(Date dateAbonnement) {\n        this.dateAbonnement = dateAbonnement;\n    }\n\n    public double getSolde() {\n        return solde;\n    }\n\n    public void setSolde(double solde) {\n        this.solde = solde;\n    }\n\n    public boolean isActif() {\n        return actif;\n    }\n\n    public void setActif(boolean actif) {\n        this.actif = actif;\n    }\n\n    public Abonnement() {\n        super();\n        // TODO Auto-generated constructor stub\n    }\n\n    public Abonnement(Date dateAbonnement, double solde, boolean actif) {\n        super();\n        this.dateAbonnement = dateAbonnement;\n        this.solde = solde;\n        this.actif = actif;\n    }\n\n}\n\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;persistence version=&quot;2.1&quot;\n    xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd&quot;&gt;\n    &lt;persistence-unit name=&quot;JPADemo&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\n     &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\n        &lt;properties&gt;\n            &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.MariaDB103Dialect&quot;/&gt;\n            &lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;create&quot;/&gt;\n            &lt;property name=&quot;hibernate.show.sql&quot; value=&quot;true&quot;/&gt;     \n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n\n&lt;?xml  version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;\n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n    xmlns:jee=&quot;http://www.springframework.org/schema/jee&quot;\n    xmlns:lang=&quot;http://www.springframework.org/schema/lang&quot;\n    xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\n    xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\n    xmlns:util=&quot;http://www.springframework.org/schema/util&quot;\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd\n        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\n        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd\n        http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd\n        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd\n        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd&quot;&gt;\n    \n    &lt;!-- This bean has been referred fron struts.xml file; So type it correctly; --&gt;\n    &lt;!-- Make scope prototype; This is really important. --&gt;\n    &lt;bean name=&quot;dataSource&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;\n         &lt;property name=&quot;driverClassName&quot; value=&quot;org.mariadb.jdbc.Driver&quot;&gt;&lt;/property&gt;\n         &lt;property name=&quot;url&quot; value=&quot;jdbc:mariadb://localhost:3306/localbdd&quot;&gt;&lt;/property&gt;\n         &lt;property name=&quot;username&quot; value=&quot;root&quot;&gt;&lt;/property&gt;\n         &lt;property name=&quot;password&quot; value=&quot;root&quot;&gt;&lt;/property&gt;\n    &lt;/bean&gt;\n    \n    &lt;bean id=&quot;persistenceUnitManager&quot; class=&quot;org.springframework.orm.jpa.persistenceunit.DefaultPersistenceUnitManager&quot; &gt;\n         &lt;property name=&quot;persistenceXmlLocations&quot;&gt;\n            &lt;list&gt;\n                &lt;value&gt;classpath*:META-INF/persistence.xml&lt;/value&gt;\n            &lt;/list&gt;\n         &lt;/property&gt;\n         &lt;property name=&quot;defaultDataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;\n    &lt;/bean&gt;\n    \n    &lt;bean id=&quot;entityManagerFactory&quot; class=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot; &gt;\n         &lt;property name=&quot;persistenceUnitManager&quot; ref=&quot;persistenceUnitManager&quot;&gt;&lt;/property&gt;\n    &lt;/bean&gt;\n    \n    &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.orm.jpa.JpaTransactionManager&quot;&gt;\n        &lt;property name=&quot;entityManagerFactory&quot; ref=&quot;entityManagerFactory&quot;&gt;&lt;/property&gt;\n    &lt;/bean&gt;\n    &lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;/&gt;\n    &lt;context:annotation-config&gt;&lt;/context:annotation-config&gt;\n&lt;/beans&gt;\n\n&lt;web-app&gt;\n  &lt;display-name&gt;Struts Hibernate Examples&lt;/display-name&gt;\n  \n &lt;!-- The definition of the Root Spring Container shared by all servlets and filters --&gt;\n  &lt;context-param&gt;\n    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n    &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;\n  &lt;/context-param&gt;\n  \n  &lt;!-- Creates the Spring Container shared by all servlets and Filters --&gt;\n  &lt;listener&gt;\n    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n  &lt;/listener&gt;\n  \n   &lt;!-- Configuration STRUTS :  ActionServlet --&gt;\n  &lt;servlet&gt;\n    &lt;servlet-name&gt;action&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;\n        org.apache.struts.action.ActionServlet\n    &lt;/servlet-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;config&lt;/param-name&gt;\n        &lt;param-value&gt;\n         /WEB-INF/struts-config.xml\n        &lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n  &lt;/servlet&gt;\n \n  &lt;servlet-mapping&gt;\n       &lt;servlet-name&gt;action&lt;/servlet-name&gt;\n       &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;\n  &lt;/servlet-mapping&gt;\n  \n  &lt;!-- Page d'accueil --&gt;\n    &lt;welcome-file-list&gt;\n        &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;\n    &lt;/welcome-file-list&gt;\n  \n  \n&lt;/web-app&gt;\n\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;dev.mvn.ln&lt;/groupId&gt;\n  &lt;artifactId&gt;GestionAbonnement&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n\n  &lt;name&gt;GestionAbonnement Maven Webapp&lt;/name&gt;\n  &lt;!-- FIXME change it to the project's website --&gt;\n  &lt;url&gt;http://www.example.com&lt;/url&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;\n    &lt;struts.version&gt;1.3.10&lt;/struts.version&gt;\n   &lt;!-- &lt;spring.version&gt;5.3.20&lt;/spring.version&gt; 4.3.11.RELEASE--&gt;\n    &lt;spring.version&gt;3.2.3.RELEASE&lt;/spring.version&gt; &lt;!--4.3.11.RELEASE--&gt;\n    &lt;spring.data.mongo.version&gt;3.4.0&lt;/spring.data.mongo.version&gt; &lt;!--2.2.6.RELEASE--&gt;\n    &lt;mongo.driver.version&gt;4.6.0&lt;/mongo.driver.version&gt;\n    &lt;jackson.version&gt;2.12.6&lt;/jackson.version&gt;\n    &lt;swagger.version&gt;2.1.11&lt;/swagger.version&gt;\n   &lt;!-- &lt;hibernate.version&gt;4.2.1.Final&lt;/hibernate.version&gt; --&gt;\n    &lt;hibernate.version&gt;5.4.30.Final&lt;/hibernate.version&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n  \n   &lt;!--spring --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n     &lt;!--spring --&gt;\n     \n     &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;version&gt;8.0.28&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n   &lt;!-- &lt;dependency&gt;\n        &lt;groupId&gt;org.mariadb.jdbc&lt;/groupId&gt;\n        &lt;artifactId&gt;mariadb-java-client&lt;/artifactId&gt;\n        &lt;version&gt;2.7.4&lt;/version&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt; --&gt;\n    \n    &lt;dependency&gt;\n      &lt;groupId&gt;org.mariadb.jdbc&lt;/groupId&gt;\n      &lt;artifactId&gt;mariadb-java-client&lt;/artifactId&gt;\n      &lt;version&gt;1.5.7&lt;/version&gt;\n    &lt;/dependency&gt;\n    \n    \n    \n    &lt;!-- J2EE library --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n      &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n      &lt;version&gt;2.4&lt;/version&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    \n    &lt;dependency&gt;\n      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n      &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\n      &lt;version&gt;2.0&lt;/version&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    \n    &lt;dependency&gt;\n      &lt;groupId&gt;log4j&lt;/groupId&gt;\n      &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n      &lt;version&gt;1.2.17&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Unit Test --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;4.5&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    \n     &lt;!-- Struts 1.3 framework --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.struts&lt;/groupId&gt;\n      &lt;artifactId&gt;struts-core&lt;/artifactId&gt;\n      &lt;version&gt;${struts.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    \n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.struts&lt;/groupId&gt;\n      &lt;artifactId&gt;struts-taglib&lt;/artifactId&gt;\n      &lt;version&gt;${struts.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n   \n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.struts&lt;/groupId&gt;\n      &lt;artifactId&gt;struts-extras&lt;/artifactId&gt;\n      &lt;version&gt;${struts.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    \n\n    &lt;!-- Hibernate core --&gt;\n    &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;${hibernate.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n            &lt;version&gt;${hibernate.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Hibernate core library dependecy start --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;dom4j&lt;/groupId&gt;\n        &lt;artifactId&gt;dom4j&lt;/artifactId&gt;\n        &lt;version&gt;1.6.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n        &lt;version&gt;1.1.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-collections&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;\n        &lt;version&gt;3.2.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;cglib&lt;/groupId&gt;\n        &lt;artifactId&gt;cglib&lt;/artifactId&gt;\n        &lt;version&gt;2.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- Hibernate core library dependecy end --&gt;\n\n    &lt;!-- Hibernate query library dependecy start --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;antlr&lt;/groupId&gt;\n        &lt;artifactId&gt;antlr&lt;/artifactId&gt;\n        &lt;version&gt;2.7.7&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- Hibernate query library dependecy end --&gt;\n    \n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;finalName&gt;GestionAbonnement&lt;/finalName&gt;\n    &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\n      &lt;plugins&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_war_packaging --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.8.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.22.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.2.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.5.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.8.2&lt;/version&gt;\n        &lt;/plugin&gt;\n      &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>I'm using Eclipse IDE, Tomcat 8 and MariaDB 10.7.</p>\n<p>I've added connector <code>jar</code> maria db in Tomcat <code>lib</code> folder.</p>\n<p>My Eclipse trace server tomcat not displaying any connection to the database:</p>\n<pre><code>juil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Nom version serveur :              Apache Tomcat/8.5.81\njuil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Serveur compil :                  Jun 8 2022 21:30:15 UTC\njuil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Version du serveur :               8.5.81.0\njuil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Nom de l'OS :                      Windows 11\njuil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Version OS :                       10.0\njuil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Architecture :                     amd64\njuil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Java Home :                        C:\\Program Files\\Java\\jdk-11.0.14\njuil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Version JVM :                      11.0.14+8-LTS-263\njuil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Fournisseur de la JVM :            Oracle Corporation\njuil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: CATALINA_BASE :                    C:\\eclipse-workspace\\.metadata\\.plugins\\org.eclipse.wst.server.core\\tmp0\njuil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: CATALINA_HOME :                    C:\\apache-tomcat-8.5.81\njuil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Argument de la ligne de commande : -Dcatalina.base=C:\\eclipse-workspace\\.metadata\\.plugins\\org.eclipse.wst.server.core\\tmp0\njuil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Argument de la ligne de commande : -Dcatalina.home=C:\\apache-tomcat-8.5.81\njuil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Argument de la ligne de commande : -Dwtp.deploy=C:\\eclipse-workspace\\.metadata\\.plugins\\org.eclipse.wst.server.core\\tmp0\\wtpwebapps\njuil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Argument de la ligne de commande : --add-opens=java.base/java.lang=ALL-UNNAMED\njuil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Argument de la ligne de commande : --add-opens=java.base/java.io=ALL-UNNAMED\njuil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Argument de la ligne de commande : --add-opens=java.base/java.util=ALL-UNNAMED\njuil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Argument de la ligne de commande : --add-opens=java.base/java.util.concurrent=ALL-UNNAMED\njuil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Argument de la ligne de commande : --add-opens=java.rmi/sun.rmi.transport=ALL-UNNAMED\njuil. 31, 2022 1:09:13 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Argument de la ligne de commande : -Dfile.encoding=UTF-8\njuil. 31, 2022 1:09:13 PM org.apache.catalina.core.AprLifecycleListener lifecycleEvent\nINFO: La librairie Apache Tomcat Native base sur APR qui permet des performances optimales dans les environnements de production n'a pas t trouve sur le java.library.path : [C:\\Program Files\\Java\\jdk-11.0.14\\bin;C:\\Windows\\Sun\\Java\\bin;C:\\Windows\\system32;C:\\Windows;C:/Program Files/eclipse//plugins/org.eclipse.justj.openjdk.hotspot.jre.full.win32.x86_64_17.0.3.v20220515-1416/jre/bin/server;C:/Program Files/eclipse//plugins/org.eclipse.justj.openjdk.hotspot.jre.full.win32.x86_64_17.0.3.v20220515-1416/jre/bin;C:\\Program Files\\Common Files\\Oracle\\Java\\javapath;C:\\Program Files (x86)\\Common Files\\Oracle\\Java\\javapath;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Windows\\System32\\OpenSSH\\;C:\\Program Files\\Git\\cmd;C:\\Program Files\\Java\\jdk-11.0.14\\bin;C:\\maven-3.8.5\\bin;C:\\Program Files\\MongoDB\\Server\\4.2\\bin;%NVM_HOME%;%NVM_SYMLINK%;C:\\Users\\lelon\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lelon\\AppData\\Roaming\\npm;C:\\Users\\lelon\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.1\\bin;;C:\\Users\\lelon\\AppData\\Roaming\\nvm;C:\\Program Files\\nodejs;C:\\Program Files\\eclipse;;.]\njuil. 31, 2022 1:09:13 PM org.apache.coyote.AbstractProtocol init\nINFO: Initialisation du gestionnaire de protocole [&quot;http-nio-8080&quot;]\njuil. 31, 2022 1:09:13 PM org.apache.catalina.startup.Catalina load\nINFO: Initialization processed in 767 ms\njuil. 31, 2022 1:09:13 PM org.apache.catalina.core.StandardService startInternal\nINFO: Dmarrage du service [Catalina]\njuil. 31, 2022 1:09:13 PM org.apache.catalina.core.StandardEngine startInternal\nINFO: Dmarrage du moteur de Servlets : [Apache Tomcat/8.5.81]\njuil. 31, 2022 1:09:14 PM org.apache.jasper.servlet.TldScanner scanJars\nINFO: Au moins un fichier JAR a t analys pour trouver des TLDs mais il n'en contenait pas, le mode &quot;debug&quot; du journal peut tre activ pour obtenir une liste complte de JAR scanns sans succs ; viter d'analyser des JARs inutilement peut amliorer sensiblement le temps de dmarrage et le temps de compilation des JSPs\njuil. 31, 2022 1:09:14 PM org.apache.catalina.util.SessionIdGeneratorBase createSecureRandom\nWARNING: La cration de l'instance de SecureRandom pour le gnrateur d'id de session en utilisant [SHA1PRNG] a pris [111] millisecondes\njuil. 31, 2022 1:09:16 PM org.apache.jasper.servlet.TldScanner scanJars\nINFO: Au moins un fichier JAR a t analys pour trouver des TLDs mais il n'en contenait pas, le mode &quot;debug&quot; du journal peut tre activ pour obtenir une liste complte de JAR scanns sans succs ; viter d'analyser des JARs inutilement peut amliorer sensiblement le temps de dmarrage et le temps de compilation des JSPs\njuil. 31, 2022 1:09:16 PM org.apache.catalina.core.ApplicationContext log\nINFO: No Spring WebApplicationInitializer types detected on classpath\njuil. 31, 2022 1:09:16 PM org.apache.catalina.core.ApplicationContext log\nINFO: Initializing Spring root WebApplicationContext\nlog4j:WARN No appenders could be found for logger (org.springframework.web.context.ContextLoader).\nlog4j:WARN Please initialize the log4j system properly.\nlog4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\njuil. 31, 2022 1:09:18 PM org.apache.coyote.AbstractProtocol start\nINFO: Dmarrage du gestionnaire de protocole [&quot;http-nio-8080&quot;]\njuil. 31, 2022 1:09:18 PM org.apache.catalina.startup.Catalina start\nINFO: Server startup in 5157 ms\n</code></pre>\n<p>My project structure in the Eclipse IDE:\n<a href=\"https://i.stack.imgur.com/xq8RB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xq8RB.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","mongodb","aggregation-framework"],"comments":[{"owner":{"account_id":2726009,"reputation":503,"user_id":8510226,"display_name":"Pranay Nailwal"},"score":0,"creation_date":1616678275,"post_id":66800216,"comment_id":118081943,"body_markdown":"maintain some kind of a counter in `processBlock`. store the docs in an array and get its length in next step ?","body":"maintain some kind of a counter in <code>processBlock</code>. store the docs in an array and get its length in next step ?"},{"owner":{"account_id":62234,"reputation":19819,"user_id":185034,"accept_rate":100,"display_name":"Paul"},"score":0,"creation_date":1616687334,"post_id":66800216,"comment_id":118086833,"body_markdown":"I&#39;ve found it generally helpful to have an `updated` `Date` field in documents.  If you had such a field you could query on it after the operation to find docs updated since the start of the operation.","body":"I&#39;ve found it generally helpful to have an <code>updated</code> <code>Date</code> field in documents.  If you had such a field you could query on it after the operation to find docs updated since the start of the operation."},{"owner":{"account_id":13859774,"reputation":111,"user_id":10005690,"display_name":"Rose"},"score":0,"creation_date":1617113835,"post_id":66800216,"comment_id":118208952,"body_markdown":"Thank you for suggestion . I am able to fetch the number of records","body":"Thank you for suggestion . I am able to fetch the number of records"}],"answers":[{"tags":[],"owner":{"account_id":8235627,"reputation":23,"user_id":6194945,"display_name":"javaman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659284325,"creation_date":1659284325,"answer_id":73184941,"question_id":66800216,"body_markdown":"I wrote an article that explains why you should avoid using the Document object as long as you can &amp; [transfer the call to MongoDB as a mongo shell script][1].\r\n\r\nTake a look at it. I think that even though you&#39;ll have to invest more of your time in learning the mongo shell script in the short run, it will save you huge amount of debugging &amp; performance time in the long run.\r\n\r\n\r\n  [1]: http://www.sharonavigdor.com/mongodb/mongodb-orm-as-a-general-purpose-integration-solution-for-java/","title":"How to get the updated record count when running the Mongodb aggregation queries With Java driver","body":"<p>I wrote an article that explains why you should avoid using the Document object as long as you can &amp; <a href=\"http://www.sharonavigdor.com/mongodb/mongodb-orm-as-a-general-purpose-integration-solution-for-java/\" rel=\"nofollow noreferrer\">transfer the call to MongoDB as a mongo shell script</a>.</p>\n<p>Take a look at it. I think that even though you'll have to invest more of your time in learning the mongo shell script in the short run, it will save you huge amount of debugging &amp; performance time in the long run.</p>\n"}],"owner":{"account_id":13859774,"reputation":111,"user_id":10005690,"display_name":"Rose"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659284325,"creation_date":1616677815,"question_id":66800216,"body_markdown":"I need number of updated MongoDB records in database for the below syntax. Could you anyone help me to get the number of updated records for the below syntax\r\n   \r\n\r\nMongoDatabase database = client.getDatabase(&quot;sample);\r\n    MongoCollection&lt;Document&gt; collection = database.getCollection(&quot;collection&quot;);\r\n    \r\n    // Created with Studio 3T, the IDE for MongoDB - https://studio3t.com/\r\n    \r\n    Consumer&lt;Document&gt; processBlock = new Consumer&lt;Document&gt;() {\r\n        @Override\r\n        public void accept(Document document) {\r\n            System.out.println(document);\r\n        }\r\n    };\r\n    Consumer&lt;Document&gt; processBlock = new Consumer&lt;Document&gt;() {\r\n        @Override\r\n        public void accept(Document document) {\r\n            System.out.println(document);\r\n        }\r\n    };\r\n    List&lt;? extends Bson&gt; pipeline = Arrays.asList(\r\n            new Document()\r\n                    .append(&quot;$match&quot;, new Document()\r\n                            .append(&quot;key&quot;, &quot;123&quot;)\r\n                            .append(&quot;value&quot;, &quot;ss&quot;)\r\n                    ),\r\n            new Document()\r\n                    .append(&quot;$addFields&quot;, new Document()\r\n                            .append(&quot;sample&quot;, &quot;$_id&quot;)\r\n                            .append(&quot;period&quot;, period)\r\n                            )\r\n                            .append(&quot;amount&quot;, new Document()\r\n                                    .append(&quot;$multiply&quot;, Arrays.asList(\r\n                                            &quot;$amountVal&quot;,\r\n                                             Decimal128.parse(&quot;-1.0&quot;)\r\n                                            )\r\n                                    )\r\n                            )\r\n                           \r\n          \r\n            new Document()\r\n                    .append(&quot;$out&quot;, &quot;TMP&quot;)\r\n    );\r\n\r\n    collection.aggregate(pipeline)\r\n            .allowDiskUse(false)\r\n            .forEach(processBlock);\r\n    \r\n\r\n","title":"How to get the updated record count when running the Mongodb aggregation queries With Java driver","body":"<p>I need number of updated MongoDB records in database for the below syntax. Could you anyone help me to get the number of updated records for the below syntax</p>\n<p>MongoDatabase database = client.getDatabase(&quot;sample);\nMongoCollection collection = database.getCollection(&quot;collection&quot;);</p>\n<pre><code>// Created with Studio 3T, the IDE for MongoDB - https://studio3t.com/\n\nConsumer&lt;Document&gt; processBlock = new Consumer&lt;Document&gt;() {\n    @Override\n    public void accept(Document document) {\n        System.out.println(document);\n    }\n};\nConsumer&lt;Document&gt; processBlock = new Consumer&lt;Document&gt;() {\n    @Override\n    public void accept(Document document) {\n        System.out.println(document);\n    }\n};\nList&lt;? extends Bson&gt; pipeline = Arrays.asList(\n        new Document()\n                .append(&quot;$match&quot;, new Document()\n                        .append(&quot;key&quot;, &quot;123&quot;)\n                        .append(&quot;value&quot;, &quot;ss&quot;)\n                ),\n        new Document()\n                .append(&quot;$addFields&quot;, new Document()\n                        .append(&quot;sample&quot;, &quot;$_id&quot;)\n                        .append(&quot;period&quot;, period)\n                        )\n                        .append(&quot;amount&quot;, new Document()\n                                .append(&quot;$multiply&quot;, Arrays.asList(\n                                        &quot;$amountVal&quot;,\n                                         Decimal128.parse(&quot;-1.0&quot;)\n                                        )\n                                )\n                        )\n                       \n      \n        new Document()\n                .append(&quot;$out&quot;, &quot;TMP&quot;)\n);\n\ncollection.aggregate(pipeline)\n        .allowDiskUse(false)\n        .forEach(processBlock);\n</code></pre>\n"},{"tags":["java","algorithm","data-structures","linked-list","circular-list"],"comments":[{"owner":{"account_id":17195014,"reputation":1215,"user_id":13173633,"display_name":"Higigig"},"score":0,"creation_date":1589056871,"post_id":61703382,"comment_id":109143307,"body_markdown":"What is going wrong?","body":"What is going wrong?"},{"owner":{"account_id":1089130,"reputation":38492,"user_id":1084174,"accept_rate":89,"display_name":"Sazzad Hissain Khan"},"score":1,"creation_date":1589057068,"post_id":61703382,"comment_id":109143379,"body_markdown":"`I saw in the internet and used that then it worked`, please give the link where you saw it?","body":"<code>I saw in the internet and used that then it worked</code>, please give the link where you saw it?"}],"answers":[{"tags":[],"owner":{"account_id":8762988,"reputation":33,"user_id":6552415,"display_name":"Cabbler25"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1589056957,"creation_date":1589056957,"answer_id":61703468,"question_id":61703382,"body_markdown":"It&#39;s a circular list. `temp.next` will never be null, and so your while loop will never end. You need to change your logic a bit and check when `temp.next == head`.","title":"Why the function is not working in circular Linked list?","body":"<p>It's a circular list. <code>temp.next</code> will never be null, and so your while loop will never end. You need to change your logic a bit and check when <code>temp.next == head</code>.</p>\n"},{"tags":[],"owner":{"account_id":1507181,"reputation":13906,"user_id":1410303,"accept_rate":40,"display_name":"SomeDude"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1589057072,"creation_date":1589057072,"answer_id":61703493,"question_id":61703382,"body_markdown":"Does any node in a circular linked list have its `next` field as `null` ? If it is, then its not a circular linked list. In your code you are looping until you find a `null` for the `next`. In fact after the first inserted node , for the next insert the loop `while ( temp.next != null )` never ends.\r\n\r\nYou need to get to the node whose `next` is `head`, that&#39;s your last node for the moment. You need to push your new node after that.\r\n\r\nSo your code should be:\r\n\r\n    public void pushEnd(int new_data){\r\n     Node new_node = new Node(new_data);\r\n       if(head == null){\r\n         head = new_node;\r\n         new_node.next = head;\r\n       }\r\n       else{\r\n         Node temp = head;\r\n         while(temp.next!=head){\r\n           temp = temp.next;\r\n         }\r\n         temp.next = new_node //assign the temp&#39;s next to new_node.\r\n     \r\n         new_node.next = head; //then assign new_node&#39;s next to head\r\n      }\r\n    }","title":"Why the function is not working in circular Linked list?","body":"<p>Does any node in a circular linked list have its <code>next</code> field as <code>null</code> ? If it is, then its not a circular linked list. In your code you are looping until you find a <code>null</code> for the <code>next</code>. In fact after the first inserted node , for the next insert the loop <code>while ( temp.next != null )</code> never ends.</p>\n\n<p>You need to get to the node whose <code>next</code> is <code>head</code>, that's your last node for the moment. You need to push your new node after that.</p>\n\n<p>So your code should be:</p>\n\n<pre><code>public void pushEnd(int new_data){\n Node new_node = new Node(new_data);\n   if(head == null){\n     head = new_node;\n     new_node.next = head;\n   }\n   else{\n     Node temp = head;\n     while(temp.next!=head){\n       temp = temp.next;\n     }\n     temp.next = new_node //assign the temp's next to new_node.\n\n     new_node.next = head; //then assign new_node's next to head\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":18085122,"reputation":11,"user_id":13146249,"display_name":"kaushik mandal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1659284120,"creation_date":1589056524,"question_id":61703382,"body_markdown":"Here is the piece of code in java for inserting node at the end of the circular linked list, but its not working using this function but when I saw in the internet and used that then it worked. Can anyone suggest me that what is wrong with this piece of code?\r\n\r\n//PUSH NODE AT END IN CIRCULAR LL\r\n\r\n    public void pushEnd(int new_data){\r\n        Node new_node = new Node(new_data);\r\n        if(head == null){\r\n            head = new_node;\r\n            new_node.next = head;\r\n        }\r\n        else{\r\n            Node temp = head;\r\n            while(temp.next!=null){\r\n                temp = temp.next;\r\n            }\r\n            temp.next = new_node;\r\n            new_node.next = head;\r\n        }\r\n    }\r\n\r\n ","title":"Why the function is not working in circular Linked list?","body":"<p>Here is the piece of code in java for inserting node at the end of the circular linked list, but its not working using this function but when I saw in the internet and used that then it worked. Can anyone suggest me that what is wrong with this piece of code?</p>\n\n<p>//PUSH NODE AT END IN CIRCULAR LL</p>\n\n<pre><code>public void pushEnd(int new_data){\n    Node new_node = new Node(new_data);\n    if(head == null){\n        head = new_node;\n        new_node.next = head;\n    }\n    else{\n        Node temp = head;\n        while(temp.next!=null){\n            temp = temp.next;\n        }\n        temp.next = new_node;\n        new_node.next = head;\n    }\n}\n</code></pre>\n"},{"tags":["java","arrays","matrix","multidimensional-array"],"comments":[{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":2,"creation_date":1603193919,"post_id":64444313,"comment_id":113953296,"body_markdown":"You are checking the length of `matrix[0]`. That is, the length of the first row. But then you use `i` to access other rows. How do you know it has `n` rows?","body":"You are checking the length of <code>matrix[0]</code>. That is, the length of the first row. But then you use <code>i</code> to access other rows. How do you know it has <code>n</code> rows?"}],"answers":[{"tags":[],"owner":{"account_id":17323025,"reputation":1344,"user_id":12547954,"display_name":"Hasindu Dahanayake"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1603196301,"creation_date":1603194419,"answer_id":64444492,"question_id":64444313,"body_markdown":"You are using a wrong way to iterate the multi-dimensional array. Please use the following way to iterate through your array.\r\n\r\n```java\r\nfor (int i = 0; i &lt; matrix.length; ++i) {\r\n    for(int j = 0; j &lt; matrix[i].length; ++j) {\r\n        System.out.println(matrix[i][j]); // Here you can place your logic by accessing the array elements\r\n    }\r\n}\r\n```\r\n","title":"Showing java.lang.ArrayIndexOutOfBoundsException: Index 2 out of bounds for length 2 in some test cases?","body":"<p>You are using a wrong way to iterate the multi-dimensional array. Please use the following way to iterate through your array.</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i = 0; i &lt; matrix.length; ++i) {\n    for(int j = 0; j &lt; matrix[i].length; ++j) {\n        System.out.println(matrix[i][j]); // Here you can place your logic by accessing the array elements\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":19498631,"reputation":1,"user_id":14265264,"display_name":"Vishal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1498,"favorite_count":0,"down_vote_count":6,"up_vote_count":0,"answer_count":1,"score":-6,"last_activity_date":1659283958,"creation_date":1603193725,"question_id":64444313,"body_markdown":"Code: \r\n    \r\n    static void exchangeColumns(int matrix[][])\r\n    {    \r\n        int i;\r\n        int n = matrix[0].length;\r\n        for (i=0;i&lt;n;i++){\r\n        \r\n            int temp = matrix[i][0];\r\n            matrix[i][0] = matrix[i][n-1];\r\n            matrix[i][n-1] = temp;\r\n            \r\n        }\r\n    }","title":"Showing java.lang.ArrayIndexOutOfBoundsException: Index 2 out of bounds for length 2 in some test cases?","body":"<p>Code:</p>\n<pre><code>static void exchangeColumns(int matrix[][])\n{    \n    int i;\n    int n = matrix[0].length;\n    for (i=0;i&lt;n;i++){\n    \n        int temp = matrix[i][0];\n        matrix[i][0] = matrix[i][n-1];\n        matrix[i][n-1] = temp;\n        \n    }\n}\n</code></pre>\n"},{"tags":["java","algorithm","stack-overflow"],"comments":[{"owner":{"account_id":248321,"reputation":62665,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":1,"creation_date":1605765245,"post_id":64906067,"comment_id":114753528,"body_markdown":"Hi, can you please explain in more detail what problem the code is trying to solve, and show some example input and output? Also can you explain the general approach to solving the problem that you are trying to implement in the code? For example, why does the code use recursion? Also please format your code neatly so that it is easy to see how the brackets line up.","body":"Hi, can you please explain in more detail what problem the code is trying to solve, and show some example input and output? Also can you explain the general approach to solving the problem that you are trying to implement in the code? For example, why does the code use recursion? Also please format your code neatly so that it is easy to see how the brackets line up."},{"owner":{"account_id":19950217,"reputation":21,"user_id":14620047,"display_name":"Ashna kohli"},"score":1,"creation_date":1605765514,"post_id":64906067,"comment_id":114753596,"body_markdown":"I am finding non-subsequences that contain the first number in array nums and rest number of non-zero subsequences are obtained using recursion.","body":"I am finding non-subsequences that contain the first number in array nums and rest number of non-zero subsequences are obtained using recursion."},{"owner":{"account_id":10491815,"reputation":26310,"user_id":7733418,"display_name":"Yunnosch"},"score":1,"creation_date":1605769418,"post_id":64906067,"comment_id":114754612,"body_markdown":"Please provide a [mre] to demonstrate the problem. I propose to use hard-coded input.","body":"Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to demonstrate the problem. I propose to use hard-coded input."}],"answers":[{"tags":[],"owner":{"account_id":8764366,"reputation":27439,"user_id":6553328,"display_name":"Emma"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1605795671,"creation_date":1605795671,"answer_id":64913624,"question_id":64906067,"body_markdown":"- I guess there would be a problem here in this line:\r\n\r\n```\r\nreturn (int)((res+numSubseq(nums,target,i++))%M);\r\n```\r\n\r\n- We can solve the problem a bit easier though, similarly using sort, then two pointers.\r\n\r\n\r\n### Test with a `b.java`:\r\n\r\n```\r\nimport java.util.*;\r\n\r\nclass Solution {\r\n    private static final int MOD = (int)1e9 + 7;\r\n    public static final int numSubseq(\r\n        final int[] nums,\r\n        final int target\r\n    ) {\r\n        Arrays.sort(nums);\r\n        int[] pows = new int[nums.length];\r\n        pows[0] = 1;\r\n\r\n        int subsequences = 0;\r\n        int left = 0;\r\n        int right = nums.length - 1;\r\n\r\n        for (int index = 1 ; index &lt; nums.length ; ++index) {\r\n            pows[index] = pows[index - 1] * 2;\r\n            pows[index] %= MOD;\r\n        }\r\n\r\n        while (left &lt;= right) {\r\n            if (nums[left] + nums[right] &gt; target) {\r\n                --right;\r\n\r\n            } else {\r\n                subsequences += pows[right - left++];\r\n                subsequences %=  MOD;\r\n            }\r\n        }\r\n\r\n        return subsequences;\r\n    }\r\n}\r\n\r\n\r\nclass b {\r\n    public static void main(String[] args) {\r\n        System.out.println(new Solution().numSubseq(new int[] {3, 5, 6, 7}, 9));\r\n        System.out.println(new Solution().numSubseq(new int[] {3, 3, 6, 8}, 10));\r\n        System.out.println(new Solution().numSubseq(new int[] {2, 3, 3, 4, 6, 7}, 12));\r\n        System.out.println(new Solution().numSubseq(new int[] {5, 2, 4, 1, 7, 6, 8}, 16));\r\n    }\r\n}\r\n```\r\n\r\n\r\n### prints\r\n\r\n```\r\n4\r\n6\r\n61\r\n127\r\n```","title":"Can someone please point out error for the code &quot;Number of Subsequences That Satisfy the Given Sum Condition&quot; which is giving stack overflow error","body":"<ul>\n<li>I guess there would be a problem here in this line:</li>\n</ul>\n<pre><code>return (int)((res+numSubseq(nums,target,i++))%M);\n</code></pre>\n<ul>\n<li>We can solve the problem a bit easier though, similarly using sort, then two pointers.</li>\n</ul>\n<h3>Test with a <code>b.java</code>:</h3>\n<pre><code>import java.util.*;\n\nclass Solution {\n    private static final int MOD = (int)1e9 + 7;\n    public static final int numSubseq(\n        final int[] nums,\n        final int target\n    ) {\n        Arrays.sort(nums);\n        int[] pows = new int[nums.length];\n        pows[0] = 1;\n\n        int subsequences = 0;\n        int left = 0;\n        int right = nums.length - 1;\n\n        for (int index = 1 ; index &lt; nums.length ; ++index) {\n            pows[index] = pows[index - 1] * 2;\n            pows[index] %= MOD;\n        }\n\n        while (left &lt;= right) {\n            if (nums[left] + nums[right] &gt; target) {\n                --right;\n\n            } else {\n                subsequences += pows[right - left++];\n                subsequences %=  MOD;\n            }\n        }\n\n        return subsequences;\n    }\n}\n\n\nclass b {\n    public static void main(String[] args) {\n        System.out.println(new Solution().numSubseq(new int[] {3, 5, 6, 7}, 9));\n        System.out.println(new Solution().numSubseq(new int[] {3, 3, 6, 8}, 10));\n        System.out.println(new Solution().numSubseq(new int[] {2, 3, 3, 4, 6, 7}, 12));\n        System.out.println(new Solution().numSubseq(new int[] {5, 2, 4, 1, 7, 6, 8}, 16));\n    }\n}\n</code></pre>\n<h3>prints</h3>\n<pre><code>4\n6\n61\n127\n</code></pre>\n"}],"owner":{"account_id":19950217,"reputation":21,"user_id":14620047,"display_name":"Ashna kohli"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":307,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659283933,"creation_date":1605764908,"question_id":64906067,"body_markdown":"This is leetCode problem. I solved it using the following method but its giving stack overflow error. \r\n\r\nGiven an array of integers nums and an integer target.\r\nReturn the number of non-empty subsequences of nums such that the sum of the minimum and maximum element on it is less or equal than the target.\r\nSince the answer may be too large, return it modulo 10^9 + 7.  \r\nInput: nums = [3,5,6,7], target = 9\r\nOutput: 4\r\n    Explanation: There are 4 subsequences that satisfy the condition.\r\n    [3] : Min value + max value &lt;= target (3 + 3 &lt;= 9)\r\n    [3,5] : (3 + 5 &lt;= 9)\r\n    [3,5,6] : (3 + 6 &lt;= 9)\r\n    [3,6] : (3 + 6 &lt;= 9) \r\n \r\n    enter code here:\r\n\r\n    import java.lang.Math;\r\n    class Solution {\r\n    static int maxIndex=0;\r\n    static long M=1000000007;\r\n    public int numSubseq(int[] nums, int target) {\r\n    Arrays.sort(nums);\r\n    maxIndex=nums.length-1;\r\n    return numSubseq(nums,target,0);\r\n    }\r\n\r\n    public int numSubseq(int[] nums,int target, int i){\r\n     if(target==0 || nums.length==0 || i==nums.length)\r\n    return 0;\r\n    int res=0;\r\n    if(2*nums[i]&lt;=target){\r\n         res=1;\r\n        if(nums[i]&lt;nums[maxIndex]){\r\n            int j=maxIndex;\r\n            while(j&gt;i){\r\n             if(nums[i]+nums[maxIndex]&lt;=target)\r\n                 break;\r\n                j--;\r\n            }\r\n            maxIndex=j;\r\n            if(nums[i]+nums[maxIndex]&lt;=target &amp;&amp; i!=maxIndex) \r\n            {\r\n                int diffIndex=maxIndex-i;\r\n                res+=Math.pow(2,diffIndex)-1;\r\n            }\r\n            \r\n           }\r\n       }\r\n          else{\r\n               return 0;\r\n         }\r\n          return (int)((res+numSubseq(nums,target,i++))%M);\r\n       }\r\n    }``","title":"Can someone please point out error for the code &quot;Number of Subsequences That Satisfy the Given Sum Condition&quot; which is giving stack overflow error","body":"<p>This is leetCode problem. I solved it using the following method but its giving stack overflow error.</p>\n<p>Given an array of integers nums and an integer target.\nReturn the number of non-empty subsequences of nums such that the sum of the minimum and maximum element on it is less or equal than the target.\nSince the answer may be too large, return it modulo 10^9 + 7.<br />\nInput: nums = [3,5,6,7], target = 9\nOutput: 4\nExplanation: There are 4 subsequences that satisfy the condition.\n[3] : Min value + max value &lt;= target (3 + 3 &lt;= 9)\n[3,5] : (3 + 5 &lt;= 9)\n[3,5,6] : (3 + 6 &lt;= 9)\n[3,6] : (3 + 6 &lt;= 9)</p>\n<pre><code>enter code here:\n\nimport java.lang.Math;\nclass Solution {\nstatic int maxIndex=0;\nstatic long M=1000000007;\npublic int numSubseq(int[] nums, int target) {\nArrays.sort(nums);\nmaxIndex=nums.length-1;\nreturn numSubseq(nums,target,0);\n}\n\npublic int numSubseq(int[] nums,int target, int i){\n if(target==0 || nums.length==0 || i==nums.length)\nreturn 0;\nint res=0;\nif(2*nums[i]&lt;=target){\n     res=1;\n    if(nums[i]&lt;nums[maxIndex]){\n        int j=maxIndex;\n        while(j&gt;i){\n         if(nums[i]+nums[maxIndex]&lt;=target)\n             break;\n            j--;\n        }\n        maxIndex=j;\n        if(nums[i]+nums[maxIndex]&lt;=target &amp;&amp; i!=maxIndex) \n        {\n            int diffIndex=maxIndex-i;\n            res+=Math.pow(2,diffIndex)-1;\n        }\n        \n       }\n   }\n      else{\n           return 0;\n     }\n      return (int)((res+numSubseq(nums,target,i++))%M);\n   }\n}``\n</code></pre>\n"},{"tags":["java","function","stack"],"comments":[{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":2,"creation_date":1610273836,"post_id":65652096,"comment_id":116075409,"body_markdown":"Draw your &quot;stack&quot; on a piece of paper and trace the execution using pointers (pen, pencil) to indicate current position and compare with the code. (Note that your code looks like a _tree_, not a stack.)","body":"Draw your &quot;stack&quot; on a piece of paper and trace the execution using pointers (pen, pencil) to indicate current position and compare with the code. (Note that your code looks like a <i>tree</i>, not a stack.)"},{"owner":{"account_id":14183035,"reputation":3277,"user_id":10245948,"display_name":"Hero Wanders"},"score":0,"creation_date":1610274584,"post_id":65652096,"comment_id":116075585,"body_markdown":"Just another note which becomes relevant after fixing the `print` method: you probably forgot to add the results of the two `allLeafNodes` calls to your `stack`. In the current implementation those results are silently ignored.","body":"Just another note which becomes relevant after fixing the <code>print</code> method: you probably forgot to add the results of the two <code>allLeafNodes</code> calls to your <code>stack</code>. In the current implementation those results are silently ignored."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1610274994,"post_id":65652096,"comment_id":116075694,"body_markdown":"You need to include the code which calls `allLeafNodes`.","body":"You need to include the code which calls <code>allLeafNodes</code>."}],"answers":[{"tags":[],"owner":{"account_id":18452928,"reputation":2722,"user_id":14927001,"display_name":"Dmitrii B"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1610273824,"creation_date":1610273824,"answer_id":65652145,"question_id":65652096,"body_markdown":"I think in your `print()` method realization you use `pop()` method. For its this behavior is normal. From javadoc `pop()`\r\n\r\n    Removes the object at the top of this stack and returns that object as the value of this function.\r\n\r\n\r\nAnyway, your method `print()` cleared your stack.\r\n","title":"Why my function is not returning a stack (self made stack class) when data is storing in stack?","body":"<p>I think in your <code>print()</code> method realization you use <code>pop()</code> method. For its this behavior is normal. From javadoc <code>pop()</code></p>\n<pre><code>Removes the object at the top of this stack and returns that object as the value of this function.\n</code></pre>\n<p>Anyway, your method <code>print()</code> cleared your stack.</p>\n"},{"tags":[],"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1610283664,"creation_date":1610274036,"answer_id":65652178,"question_id":65652096,"body_markdown":"It seems you use some custom class `Stack` (not `java.util.Stack`) with custom implementation of method `print` which could be using `pop()` operation thus removing all elements from the stack.\r\n\r\nThus, method `print()` needs to be revised;  probably it is worth to override `Stack`&#39;s method `toString()` to make sure the stack contents is not modified and use it for debug printing.\r\n\r\n----\r\n**Update**\r\n\r\nAnother issue is with implementation of recursive method `allLeafNodes` in which the resulting instance of stack is always re-created, while it needs to be passed as an accumulator in the recursive calls for the left and right nodes:\r\n```java\r\npublic static Stack allLeafNodes(TreeNode root) {\r\n    return allLeafNodes(root, new Stack());\r\n}\r\n\r\npublic static Stack allLeafNodes(TreeNode root, Stack stack) {\r\n\r\n    if (root == null)\r\n        return stack;\r\n        \r\n    if (root.left == null &amp;&amp; root.right == null) {\r\n        stack.push(root.data);\r\n    }\r\n    if (root.left != null)\r\n        allLeafNodes(root.left, stack);\r\n    if (root.right != null)\r\n        allLeafNodes(root.right, stack);\r\n    \r\n    //    stack.print(); // at this call all elements are getting printed\r\n    System.out.println(stack);\r\n    return stack;\r\n}\r\n```\r\n\r\nOtherwise, `Stack` implementation needs to have a method similar to `Collections::addAll` which has to be used to add the contents of &quot;inner&quot; leaf nodes when returning from recursive calls:\r\n```java\r\npublic static Stack allLeafNodes(TreeNode root) {\r\n\r\n    if (root == null)\r\n        return null;\r\n    \r\n    Stack stack = new Stack();\r\n    if (root.left == null &amp;&amp; root.right == null) {\r\n        stack.push(root.data);\r\n    }\r\n    if (root.left != null) {\r\n        Stack left = allLeafNodes(root.left);\r\n        if (null != left)\r\n            stack.addAll(left);\r\n    }\r\n    if (root.right != null) {\r\n        Stack right = allLeafNodes(root.right);\r\n        if (null != right)\r\n            stack.addAll(right);\r\n    }\r\n    \r\n    //    stack.print(); // at this call all elements are getting printed\r\n    \r\n    System.out.println(stack);\r\n    return stack;\r\n}\r\n```","title":"Why my function is not returning a stack (self made stack class) when data is storing in stack?","body":"<p>It seems you use some custom class <code>Stack</code> (not <code>java.util.Stack</code>) with custom implementation of method <code>print</code> which could be using <code>pop()</code> operation thus removing all elements from the stack.</p>\n<p>Thus, method <code>print()</code> needs to be revised;  probably it is worth to override <code>Stack</code>'s method <code>toString()</code> to make sure the stack contents is not modified and use it for debug printing.</p>\n<hr />\n<p><strong>Update</strong></p>\n<p>Another issue is with implementation of recursive method <code>allLeafNodes</code> in which the resulting instance of stack is always re-created, while it needs to be passed as an accumulator in the recursive calls for the left and right nodes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static Stack allLeafNodes(TreeNode root) {\n    return allLeafNodes(root, new Stack());\n}\n\npublic static Stack allLeafNodes(TreeNode root, Stack stack) {\n\n    if (root == null)\n        return stack;\n        \n    if (root.left == null &amp;&amp; root.right == null) {\n        stack.push(root.data);\n    }\n    if (root.left != null)\n        allLeafNodes(root.left, stack);\n    if (root.right != null)\n        allLeafNodes(root.right, stack);\n    \n    //    stack.print(); // at this call all elements are getting printed\n    System.out.println(stack);\n    return stack;\n}\n</code></pre>\n<p>Otherwise, <code>Stack</code> implementation needs to have a method similar to <code>Collections::addAll</code> which has to be used to add the contents of &quot;inner&quot; leaf nodes when returning from recursive calls:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static Stack allLeafNodes(TreeNode root) {\n\n    if (root == null)\n        return null;\n    \n    Stack stack = new Stack();\n    if (root.left == null &amp;&amp; root.right == null) {\n        stack.push(root.data);\n    }\n    if (root.left != null) {\n        Stack left = allLeafNodes(root.left);\n        if (null != left)\n            stack.addAll(left);\n    }\n    if (root.right != null) {\n        Stack right = allLeafNodes(root.right);\n        if (null != right)\n            stack.addAll(right);\n    }\n    \n    //    stack.print(); // at this call all elements are getting printed\n    \n    System.out.println(stack);\n    return stack;\n}\n</code></pre>\n"}],"owner":{"account_id":18789256,"reputation":29,"user_id":13702114,"display_name":"Techistan pro"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1610283000,"answer_count":2,"score":1,"last_activity_date":1659283891,"creation_date":1610273428,"question_id":65652096,"body_markdown":"I am trying to first save data in a self made stack data structure&#39;s object in java. But problem is when I wanna return that stack to be reused in another function where I can use that stack then it returns an empty stack there. However, right in the previous line I have printed all stack elements and it was not empty. Here is the code:\r\n\r\n    public Stack allLeafNodes(TreeNode root)\r\n    {\r\n        Stack stack= new Stack();\r\n        if (root == null)\r\n            return null;\r\n        if (root.getLeft() == null &amp;&amp;\r\n                root.getRight() == null)\r\n        {\r\n            stack.push(root.getData());\r\n        }\r\n        if (root.getLeft() != null)\r\n            allLeafNodes(root.getLeft());\r\n        if (root.getRight() != null)\r\n            allLeafNodes(root.getRight());\r\n        else{\r\n            stack.print(); // at this call all elements are getting printed\r\n            return stack; //but when it returns, the stack is empty\r\n        }\r\n        return stack;\r\n    }","title":"Why my function is not returning a stack (self made stack class) when data is storing in stack?","body":"<p>I am trying to first save data in a self made stack data structure's object in java. But problem is when I wanna return that stack to be reused in another function where I can use that stack then it returns an empty stack there. However, right in the previous line I have printed all stack elements and it was not empty. Here is the code:</p>\n<pre><code>public Stack allLeafNodes(TreeNode root)\n{\n    Stack stack= new Stack();\n    if (root == null)\n        return null;\n    if (root.getLeft() == null &amp;&amp;\n            root.getRight() == null)\n    {\n        stack.push(root.getData());\n    }\n    if (root.getLeft() != null)\n        allLeafNodes(root.getLeft());\n    if (root.getRight() != null)\n        allLeafNodes(root.getRight());\n    else{\n        stack.print(); // at this call all elements are getting printed\n        return stack; //but when it returns, the stack is empty\n    }\n    return stack;\n}\n</code></pre>\n"},{"tags":["java","arrays","algorithm"],"comments":[{"owner":{"account_id":100225,"reputation":43187,"user_id":270287,"accept_rate":89,"display_name":"IVlad"},"score":6,"creation_date":1442695871,"post_id":32673076,"comment_id":53191804,"body_markdown":"This is still `O(n)`, just so you know. You have the same number of additions. You only avoided incrementing `i` `n` times, but now you&#39;re doing a subtraction.","body":"This is still <code>O(n)</code>, just so you know. You have the same number of additions. You only avoided incrementing <code>i</code> <code>n</code> times, but now you&#39;re doing a subtraction."},{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":2,"creation_date":1442695876,"post_id":32673076,"comment_id":53191805,"body_markdown":"`O(n)` is equal to `O(n/2)`.","body":"<code>O(n)</code> is equal to <code>O(n&#47;2)</code>."},{"owner":{"account_id":4196075,"reputation":17303,"user_id":3437460,"accept_rate":49,"display_name":"user3437460"},"score":0,"creation_date":1442696137,"post_id":32673076,"comment_id":53191875,"body_markdown":"If your array values follows a trend for example the index, it can be less than O(n), else, the lowest will be O(n).","body":"If your array values follows a trend for example the index, it can be less than O(n), else, the lowest will be O(n)."},{"owner":{"account_id":267086,"reputation":62435,"user_id":555045,"accept_rate":100,"display_name":"harold"},"score":0,"creation_date":1442696217,"post_id":32673076,"comment_id":53191904,"body_markdown":"Real life efficiency is not that closely related to big O&#39;s. The constant factor matters. So what do you want here, theoretical time complexity (can&#39;t do any better than O(n), obviously) or real life efficiency?","body":"Real life efficiency is not that closely related to big O&#39;s. The constant factor matters. So what do you want here, theoretical time complexity (can&#39;t do any better than O(n), obviously) or real life efficiency?"},{"owner":{"account_id":2158740,"reputation":5197,"user_id":1913389,"accept_rate":77,"display_name":"theGreenCabbage"},"score":0,"creation_date":1442696234,"post_id":32673076,"comment_id":53191910,"body_markdown":"Thanks a lot guys - this way when correctly implemented actually is slower than iterating through each index. I feel stupid now =)","body":"Thanks a lot guys - this way when correctly implemented actually is slower than iterating through each index. I feel stupid now =)"},{"owner":{"account_id":1751283,"reputation":1654,"user_id":1600316,"display_name":"Mohamed AbdElRazek"},"score":0,"creation_date":1518542109,"post_id":32673076,"comment_id":84545635,"body_markdown":"You will have an issue if the array consist from one element.","body":"You will have an issue if the array consist from one element."}],"answers":[{"tags":[],"owner":{"account_id":4243266,"reputation":792,"user_id":3472617,"accept_rate":60,"display_name":"Amr"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1442695870,"creation_date":1442695870,"answer_id":32673107,"question_id":32673076,"body_markdown":"That&#39;s still O(n) even if you go from 0 to n/2 at the end of the day you are touching every element of the array at least one time. And to sum up an array of integers the least you can do is O(n) because you have to touch every element in the array one time to include it in the sum.","title":"Most efficient way to sum up an array of integers","body":"<p>That's still O(n) even if you go from 0 to n/2 at the end of the day you are touching every element of the array at least one time. And to sum up an array of integers the least you can do is O(n) because you have to touch every element in the array one time to include it in the sum.</p>\n"},{"tags":[],"owner":{"account_id":6908859,"reputation":678,"user_id":5305563,"display_name":"Michael D"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1442695920,"creation_date":1442695920,"answer_id":32673114,"question_id":32673076,"body_markdown":"You solution is O(n), not sub-O(n). Just by adding two numbers inside the loop does not change it. There is no way to make it sub-O(n), as you need to iterate over all numbers.","title":"Most efficient way to sum up an array of integers","body":"<p>You solution is O(n), not sub-O(n). Just by adding two numbers inside the loop does not change it. There is no way to make it sub-O(n), as you need to iterate over all numbers.</p>\n"}],"owner":{"account_id":2158740,"reputation":5197,"user_id":1913389,"accept_rate":77,"display_name":"theGreenCabbage"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6848,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":32673107,"answer_count":2,"score":3,"last_activity_date":1659282569,"creation_date":1442695688,"question_id":32673076,"body_markdown":"I am trying to find a sub-`O(n)` method to calculate the sum of an integer array ~~~(instead of iterating through `0 - n`, I am doing it in `n/2`)~~~ **I&#39;m still doing it in O(n)**.\r\n\r\n\tpublic static int sum(int[] s) {\r\n\t\tint length = s.length - 1;\r\n\t\tint half = length/2;\r\n\t\tint sum = 0;\r\n\t\tfor(int i = 0; i &lt;= half; i++) {\r\n            System.out.println(i + &quot; &quot; + s[i] + &quot; + &quot; + s[length - i]);\r\n\t\t\tsum += s[i] + s[length - i];\r\n\t\t}\r\n\t\treturn sum;\r\n\t}\r\n\r\nMy algorithm works for even number of integers, however, when there are odd number of integers, it would sum the middle index twice:\r\n\r\nTest:\r\n\r\n\t\tint[] arr = {1, 2, 3, 4, 5};\r\n\t\tSystem.out.println(sum(arr));\r\n\r\nOutput:\r\n\r\n    0 1 + 5\r\n    1 2 + 4\r\n    2 3 + 3\r\n    Sum: 18\r\n\r\nMy question is - what is the best way to sum up the middle index for odd-number of numbers?","title":"Most efficient way to sum up an array of integers","body":"<p>I am trying to find a sub-<code>O(n)</code> method to calculate the sum of an integer array ~~~(instead of iterating through <code>0 - n</code>, I am doing it in <code>n/2</code>)~~~ <strong>I'm still doing it in O(n)</strong>.</p>\n\n<pre><code>public static int sum(int[] s) {\n    int length = s.length - 1;\n    int half = length/2;\n    int sum = 0;\n    for(int i = 0; i &lt;= half; i++) {\n        System.out.println(i + \" \" + s[i] + \" + \" + s[length - i]);\n        sum += s[i] + s[length - i];\n    }\n    return sum;\n}\n</code></pre>\n\n<p>My algorithm works for even number of integers, however, when there are odd number of integers, it would sum the middle index twice:</p>\n\n<p>Test:</p>\n\n<pre><code>    int[] arr = {1, 2, 3, 4, 5};\n    System.out.println(sum(arr));\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>0 1 + 5\n1 2 + 4\n2 3 + 3\nSum: 18\n</code></pre>\n\n<p>My question is - what is the best way to sum up the middle index for odd-number of numbers?</p>\n"},{"tags":["java","rest","aws-lambda","aws-api-gateway"],"answers":[{"tags":[],"owner":{"account_id":8704066,"reputation":812,"user_id":6512807,"display_name":"Vikram S"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659272620,"creation_date":1659272620,"answer_id":73183526,"question_id":73183294,"body_markdown":"Check the answer below\r\n\r\nhttps://stackoverflow.com/questions/55675629/how-do-i-map-path-parameters-from-an-api-gateway-api-to-the-request-object-of-a\r\n\r\nuse the APIGatewayProxyRequestEvent instead of your own Java Object, \r\n\r\n```\r\nimport com.amazonaws.services.lambda.runtime.Context;\r\nimport com.amazonaws.services.lambda.runtime.RequestHandler;\r\nimport com.amazonaws.services.lambda.runtime.events.APIGatewayProxyRequestEvent;\r\nimport com.amazonaws.services.lambda.runtime.events.APIGatewayProxyResponseEvent;\r\n\r\n\r\n/**\r\n * Handler for requests to Lambda function.\r\n */\r\npublic class App implements RequestHandler&lt;APIGatewayProxyRequestEvent, APIGatewayProxyResponseEvent&gt; {\r\n\r\n    public APIGatewayProxyResponseEvent handleRequest(final APIGatewayProxyRequestEvent input, final Context context) {\r\n\r\nMap&lt;String, String&gt; pathParameters = input.getPathParameters();\r\n    String id = pathParameters.get(&quot;id&quot;);\r\n    String body = input.getBody(); \r\n    String path = input.getPath();\r\n\r\n    \r\n```","title":"Access path variable in AWS lambda","body":"<p>Check the answer below</p>\n<p><a href=\"https://stackoverflow.com/questions/55675629/how-do-i-map-path-parameters-from-an-api-gateway-api-to-the-request-object-of-a\">How do I map path parameters from an API Gateway API to the Request Object of a Java Lambda</a></p>\n<p>use the APIGatewayProxyRequestEvent instead of your own Java Object,</p>\n<pre><code>import com.amazonaws.services.lambda.runtime.Context;\nimport com.amazonaws.services.lambda.runtime.RequestHandler;\nimport com.amazonaws.services.lambda.runtime.events.APIGatewayProxyRequestEvent;\nimport com.amazonaws.services.lambda.runtime.events.APIGatewayProxyResponseEvent;\n\n\n/**\n * Handler for requests to Lambda function.\n */\npublic class App implements RequestHandler&lt;APIGatewayProxyRequestEvent, APIGatewayProxyResponseEvent&gt; {\n\n    public APIGatewayProxyResponseEvent handleRequest(final APIGatewayProxyRequestEvent input, final Context context) {\n\nMap&lt;String, String&gt; pathParameters = input.getPathParameters();\n    String id = pathParameters.get(&quot;id&quot;);\n    String body = input.getBody(); \n    String path = input.getPath();\n\n    \n</code></pre>\n"}],"owner":{"account_id":16641195,"reputation":359,"user_id":13154548,"display_name":"eternal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":776,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73183526,"answer_count":1,"score":1,"last_activity_date":1659282204,"creation_date":1659270357,"question_id":73183294,"body_markdown":"I have created REST API Gateway with path **/{productId}**\r\nAnd I have a simple Java handler:\r\n\r\n    public class UpdateProductHandler implements RequestHandler&lt;ProductRequest, ProductResponse&gt; {\r\n\r\n        protected final Logger logger = Logger.getLogger(UpdateProductHandler.class.getName());\r\n    \r\n        @Override\r\n        public ProductResponse handleRequest(ProductRequest productRequest, Context context) {\r\n    \r\n        }\r\n    \r\n    }\r\nThe product request looks like this:\r\n\r\n    {\r\n        &quot;name&quot;: &quot;name&quot;,\r\n        &quot;price&quot;: 51,\r\n        &quot;pictureUrl&quot;: &quot;image.png&quot;\r\n    }\r\nHow do I access the path variable in my handler? I saw a few answers that suggested making some kind of mapping in my Integration Request in the API gateway, to pass the path variable in the body. But it doesn&#39;t seem right, to do it. Is there any other way to achieve it? \r\n\r\nWhen I was playing with HTTP API, my handler was accepting InputStream, inside which I had all information about requests. I like the REST API way when a ready object is already passed inside the handler, so maybe I can somehow access the path variable from context or something? Maybe I need to enable Use Lambda Proxy integration in my Integration Request?","title":"Access path variable in AWS lambda","body":"<p>I have created REST API Gateway with path <strong>/{productId}</strong>\nAnd I have a simple Java handler:</p>\n<pre><code>public class UpdateProductHandler implements RequestHandler&lt;ProductRequest, ProductResponse&gt; {\n\n    protected final Logger logger = Logger.getLogger(UpdateProductHandler.class.getName());\n\n    @Override\n    public ProductResponse handleRequest(ProductRequest productRequest, Context context) {\n\n    }\n\n}\n</code></pre>\n<p>The product request looks like this:</p>\n<pre><code>{\n    &quot;name&quot;: &quot;name&quot;,\n    &quot;price&quot;: 51,\n    &quot;pictureUrl&quot;: &quot;image.png&quot;\n}\n</code></pre>\n<p>How do I access the path variable in my handler? I saw a few answers that suggested making some kind of mapping in my Integration Request in the API gateway, to pass the path variable in the body. But it doesn't seem right, to do it. Is there any other way to achieve it?</p>\n<p>When I was playing with HTTP API, my handler was accepting InputStream, inside which I had all information about requests. I like the REST API way when a ready object is already passed inside the handler, so maybe I can somehow access the path variable from context or something? Maybe I need to enable Use Lambda Proxy integration in my Integration Request?</p>\n"},{"tags":["java","java-8","java-stream"],"comments":[{"owner":{"account_id":2795364,"reputation":7571,"user_id":2404683,"display_name":"Davide D&#39;Alto"},"score":0,"creation_date":1659282148,"post_id":73174753,"comment_id":129252581,"body_markdown":"What&#39;s emptyListObject like?","body":"What&#39;s emptyListObject like?"}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1659279957,"creation_date":1659189745,"answer_id":73176252,"question_id":73174753,"body_markdown":"Here is another solution without using `flatMap`.  It uses `mapMulti`.  Also, you didn&#39;t say whether the the  maps had  duplicate keys either among the different maps.  If that is true then you need to consider that and save the duplicate keys to a list of `Employee`.  In lieu of a class I am using a `record` for the `Employee` for demo but it will work the same as a class.\r\n\r\n**Data**\r\n```\r\n\t\r\nrecord Employee(String name) {\r\n\tpublic String toString() {\r\n\t\treturn name;\r\n\t}\r\n}\r\n\r\nList&lt;Map&lt;String, Employee&gt;&gt; mapList = new ArrayList&lt;&gt;(\r\n\t\tList.of(Map.of(&quot;A&quot;, new Employee(&quot;John&quot;)),\r\n\t\t\t\tMap.of(&quot;B&quot;, new Employee(&quot;Mary&quot;), &quot;C&quot;, new Employee(&quot;Sara&quot;)),\r\n\t\t\t\tMap.of(&quot;A&quot;, new Employee(&quot;Bob&quot;)),\r\n\t\t\t\tMap.of(&quot;C&quot;, new Employee(&quot;John&quot;), &quot;D&quot;,new Employee(&quot;Joan&quot;))));\r\n```\r\n**Method**\r\n- Stream the maps as you were doing\r\n- then place each `Entry&lt;String,Employee&gt;` on the stream.\r\n- then collect into a map of `Map&lt;String, List&lt;Employee&gt;&gt;`\r\n```\t\r\nMap&lt;String, List&lt;Employee&gt;&gt; map = mapList.stream()\r\n\t.&lt;Entry&lt;String, Employee&gt;&gt;mapMulti((m, consumer) -&gt; m\r\n\t\t\t\t\t\t.entrySet().forEach(consumer))\t\r\n\t\t\t\t).collect(Collectors.groupingBy(Entry::getKey,\r\n\t\t\t\t\t\tCollectors.mapping(Entry::getValue, Collectors.toList())));\r\n\t\t\t\t\r\nmap.entrySet().forEach(System.out::println);\r\n```\r\n**prints**\r\n```\r\nA=[John, Bob]\r\nB=[Mary]\r\nC=[Sara, John]\r\nD=[Joan]\r\n\r\n```\r\n**Notes:**\r\n- `mapMulti` needs a type witness to tell it the stream is changing types.  Hence the preceding `&lt;Entry&lt;String, Employee&gt;&gt;`\r\n- if there are no duplicate keys between all the maps, the the simple `toMap` collector is fine.\r\n- whether you use `flatMap` or `mapMulti`, you still need to handle duplicates if they exist.\r\n\r\n\r\n\t","title":"I want to extract Map from List&lt;Map&lt;String, Employee&gt;&gt;","body":"<p>Here is another solution without using <code>flatMap</code>.  It uses <code>mapMulti</code>.  Also, you didn't say whether the the  maps had  duplicate keys either among the different maps.  If that is true then you need to consider that and save the duplicate keys to a list of <code>Employee</code>.  In lieu of a class I am using a <code>record</code> for the <code>Employee</code> for demo but it will work the same as a class.</p>\n<p><strong>Data</strong></p>\n<pre><code>    \nrecord Employee(String name) {\n    public String toString() {\n        return name;\n    }\n}\n\nList&lt;Map&lt;String, Employee&gt;&gt; mapList = new ArrayList&lt;&gt;(\n        List.of(Map.of(&quot;A&quot;, new Employee(&quot;John&quot;)),\n                Map.of(&quot;B&quot;, new Employee(&quot;Mary&quot;), &quot;C&quot;, new Employee(&quot;Sara&quot;)),\n                Map.of(&quot;A&quot;, new Employee(&quot;Bob&quot;)),\n                Map.of(&quot;C&quot;, new Employee(&quot;John&quot;), &quot;D&quot;,new Employee(&quot;Joan&quot;))));\n</code></pre>\n<p><strong>Method</strong></p>\n<ul>\n<li>Stream the maps as you were doing</li>\n<li>then place each <code>Entry&lt;String,Employee&gt;</code> on the stream.</li>\n<li>then collect into a map of <code>Map&lt;String, List&lt;Employee&gt;&gt;</code></li>\n</ul>\n<pre><code>Map&lt;String, List&lt;Employee&gt;&gt; map = mapList.stream()\n    .&lt;Entry&lt;String, Employee&gt;&gt;mapMulti((m, consumer) -&gt; m\n                        .entrySet().forEach(consumer))  \n                ).collect(Collectors.groupingBy(Entry::getKey,\n                        Collectors.mapping(Entry::getValue, Collectors.toList())));\n                \nmap.entrySet().forEach(System.out::println);\n</code></pre>\n<p><strong>prints</strong></p>\n<pre><code>A=[John, Bob]\nB=[Mary]\nC=[Sara, John]\nD=[Joan]\n\n</code></pre>\n<p><strong>Notes:</strong></p>\n<ul>\n<li><code>mapMulti</code> needs a type witness to tell it the stream is changing types.  Hence the preceding <code>&lt;Entry&lt;String, Employee&gt;&gt;</code></li>\n<li>if there are no duplicate keys between all the maps, the the simple <code>toMap</code> collector is fine.</li>\n<li>whether you use <code>flatMap</code> or <code>mapMulti</code>, you still need to handle duplicates if they exist.</li>\n</ul>\n"}],"owner":{"account_id":13365564,"reputation":1,"user_id":9645982,"display_name":"MayurJ"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":438,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1659282043,"answer_count":1,"score":-2,"last_activity_date":1659281939,"creation_date":1659176533,"question_id":73174753,"body_markdown":"\r\nI&#39;ve written the code below:\r\n\r\n```java\r\nMap&lt;String,Employee&gt; empObj = empListObject.stream()\r\n    .collect(Collectors.toMap(Map.Entry::getKey,Map.Entry::getValue));\r\n```\r\n\r\nBut it gives me a compilation error: \r\n\r\n```\r\nType mismatch: cannot convert from Map&lt;Object,Object&gt; to Map&lt;String,Employee&gt;\r\n```\r\n\r\n","title":"I want to extract Map from List&lt;Map&lt;String, Employee&gt;&gt;","body":"<p>I've written the code below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String,Employee&gt; empObj = empListObject.stream()\n    .collect(Collectors.toMap(Map.Entry::getKey,Map.Entry::getValue));\n</code></pre>\n<p>But it gives me a compilation error:</p>\n<pre><code>Type mismatch: cannot convert from Map&lt;Object,Object&gt; to Map&lt;String,Employee&gt;\n</code></pre>\n"},{"tags":["java","openimaj"],"answers":[{"tags":[],"owner":{"account_id":1637870,"reputation":553,"user_id":1510874,"display_name":"asbachb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659257791,"creation_date":1659257791,"answer_id":73181864,"question_id":73181725,"body_markdown":"You should be able to load the `FaceRecognitionEngine&lt;KEDetectedFace, Person&gt;`  object again with `IOutils.readFromFile`. \r\n\r\n(see http://openimaj.org/apidocs/src-html/org/openimaj/io/IOUtils.html#line.1071)","title":"How to read trained file to FaceRecognitionEngine object in OpenImaj","body":"<p>You should be able to load the <code>FaceRecognitionEngine&lt;KEDetectedFace, Person&gt;</code>  object again with <code>IOutils.readFromFile</code>.</p>\n<p>(see <a href=\"http://openimaj.org/apidocs/src-html/org/openimaj/io/IOUtils.html#line.1071\" rel=\"nofollow noreferrer\">http://openimaj.org/apidocs/src-html/org/openimaj/io/IOUtils.html#line.1071</a>)</p>\n"}],"owner":{"account_id":13914691,"reputation":81,"user_id":10046859,"display_name":"Emperor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659281609,"creation_date":1659256357,"question_id":73181725,"body_markdown":"I am using OpenImaj for face recognition. Due to the long time it takes train the data at runtime, I am saving the already trained data to system to use it later.\r\n\r\nI am using the below code to save the trained data\r\n```java\r\nIOUtils.writeToFile(faceEngine, new File(&quot;traineddata.txt&quot;));\r\n```\r\n\r\nPlease how do I read the data back to the faceEngine object when the software loads?\r\n\r\nThe faceEngine object is created this way\r\n\r\n```java\r\nFKEFaceDetector faceDetector = new FKEFaceDetector(new HaarCascadeDetector(40));`\r\nEigenFaceRecogniser&lt;KEDetectedFace, Person&gt; faceRecogniser = EigenFaceRecogniser.create(20, new RotateScaleAligner(), 1, DoubleFVComparison.CORRELATION, 0.9f);\r\nFaceRecognitionEngine&lt;KEDetectedFace, Person&gt; faceEngine = FaceRecognitionEngine.create(faceDetector, faceRecogniser);\r\n```\r\n\r\nHow do I load the `traineddata.txt` file?","title":"How to read trained file to FaceRecognitionEngine object in OpenImaj","body":"<p>I am using OpenImaj for face recognition. Due to the long time it takes train the data at runtime, I am saving the already trained data to system to use it later.</p>\n<p>I am using the below code to save the trained data</p>\n<pre class=\"lang-java prettyprint-override\"><code>IOUtils.writeToFile(faceEngine, new File(&quot;traineddata.txt&quot;));\n</code></pre>\n<p>Please how do I read the data back to the faceEngine object when the software loads?</p>\n<p>The faceEngine object is created this way</p>\n<pre class=\"lang-java prettyprint-override\"><code>FKEFaceDetector faceDetector = new FKEFaceDetector(new HaarCascadeDetector(40));`\nEigenFaceRecogniser&lt;KEDetectedFace, Person&gt; faceRecogniser = EigenFaceRecogniser.create(20, new RotateScaleAligner(), 1, DoubleFVComparison.CORRELATION, 0.9f);\nFaceRecognitionEngine&lt;KEDetectedFace, Person&gt; faceEngine = FaceRecognitionEngine.create(faceDetector, faceRecogniser);\n</code></pre>\n<p>How do I load the <code>traineddata.txt</code> file?</p>\n"},{"tags":["java","html","spring-boot","controller"],"answers":[{"tags":[],"owner":{"account_id":17484901,"reputation":90,"user_id":12678146,"display_name":"Aman Agarwal"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1659278368,"creation_date":1659278368,"answer_id":73184201,"question_id":73184073,"body_markdown":"Try returning the string without the extension.\r\nFor e.g return &quot;thin_client&quot;;","title":"I want to display different html in Spring Boot","body":"<p>Try returning the string without the extension.\nFor e.g return &quot;thin_client&quot;;</p>\n"}],"owner":{"account_id":18291745,"reputation":21,"user_id":13318397,"display_name":"judo_&#252;rgens"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":197,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659281191,"creation_date":1659277206,"question_id":73184073,"body_markdown":"I need to test different client against each other. for that i need to be able to open different html pages with spring boot. \r\n\r\ni tried to do this: \r\n[https://stackoverflow.com/questions/43072061/multiple-index-html-in-spring-boot][1]\r\nbut it does only return a string &quot;thick_client&quot; on the webpage.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nmy controller looks like this:\r\n\r\n\r\n    @RestController\r\n    public class ApiController {\r\n\t@Autowired\r\n\tprivate StockRepository stockRepository;\r\n\r\n\t@RequestMapping(value = &quot;/&quot;, method = RequestMethod.GET)\r\n\tpublic String index() {\r\n\t    return &quot;thick_client&quot;;\r\n\t}\r\n\r\n\t@RequestMapping(value = &quot;/anotherIndex&quot;, method = RequestMethod.GET)\r\n\tpublic String anotherIndex() {\r\n\t    return &quot;thin_client&quot;;\r\n\t}\r\n\r\napplication.properties:\r\n\r\n    spring.mvc.view.prefix=/\r\n    spring.mvc.view.suffix=.html\r\n\r\nMy Folder Structure looks like this:\r\n\r\n[![Folder Structure][3]][3]\r\n\r\npom.xml:\r\n\r\n    &lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.13.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\ncheers!\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/43072061/multiple-index-html-in-spring-boot\r\n  [2]: https://i.stack.imgur.com/Lrtpb.png\r\n  [3]: https://i.stack.imgur.com/2zNC4.png","title":"I want to display different html in Spring Boot","body":"<p>I need to test different client against each other. for that i need to be able to open different html pages with spring boot.</p>\n<p>i tried to do this:\n<a href=\"https://stackoverflow.com/questions/43072061/multiple-index-html-in-spring-boot\">Multiple index.html in spring boot</a>\nbut it does only return a string &quot;thick_client&quot; on the webpage.</p>\n<p><a href=\"https://i.stack.imgur.com/Lrtpb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Lrtpb.png\" alt=\"enter image description here\" /></a></p>\n<p>my controller looks like this:</p>\n<pre><code>@RestController\npublic class ApiController {\n@Autowired\nprivate StockRepository stockRepository;\n\n@RequestMapping(value = &quot;/&quot;, method = RequestMethod.GET)\npublic String index() {\n    return &quot;thick_client&quot;;\n}\n\n@RequestMapping(value = &quot;/anotherIndex&quot;, method = RequestMethod.GET)\npublic String anotherIndex() {\n    return &quot;thin_client&quot;;\n}\n</code></pre>\n<p>application.properties:</p>\n<pre><code>spring.mvc.view.prefix=/\nspring.mvc.view.suffix=.html\n</code></pre>\n<p>My Folder Structure looks like this:</p>\n<p><a href=\"https://i.stack.imgur.com/2zNC4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2zNC4.png\" alt=\"Folder Structure\" /></a></p>\n<p>pom.xml:</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;version&gt;2.13.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>cheers!</p>\n"},{"tags":["java","spring-boot","scala","apache-spark","google-cloud-dataproc"],"comments":[{"owner":{"account_id":20016512,"reputation":3080,"user_id":14672383,"display_name":"AminMal"},"score":0,"creation_date":1659291531,"post_id":73184456,"comment_id":129254761,"body_markdown":"Are Java/Scala versions the same on your computer and the server?","body":"Are Java/Scala versions the same on your computer and the server?"},{"owner":{"account_id":174724,"reputation":25097,"user_id":404264,"accept_rate":58,"display_name":"Dagang Wei"},"score":1,"creation_date":1659308574,"post_id":73184456,"comment_id":129257717,"body_markdown":"Consider creating a uber jar for your Spark app, more details here https://cloud.google.com/dataproc/docs/guides/manage-spark-dependencies","body":"Consider creating a uber jar for your Spark app, more details here <a href=\"https://cloud.google.com/dataproc/docs/guides/manage-spark-dependencies\" rel=\"nofollow noreferrer\">cloud.google.com/dataproc/docs/guides/manage-spark-dependenc&zwnj;&#8203;ies</a>"},{"owner":{"account_id":16973317,"reputation":21,"user_id":12277352,"display_name":"Achraf Nasri"},"score":0,"creation_date":1659526194,"post_id":73184456,"comment_id":129314700,"body_markdown":"solved! This is what I did : https://stackoverflow.com/a/58098501/12277352.","body":"solved! This is what I did : <a href=\"https://stackoverflow.com/a/58098501/12277352\">stackoverflow.com/a/58098501/12277352</a>."}],"owner":{"account_id":16973317,"reputation":21,"user_id":12277352,"display_name":"Achraf Nasri"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":414,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1659280386,"creation_date":1659280386,"question_id":73184456,"body_markdown":"I&#39;m trying to run a spark job (written in Java with Spring boot) in dataproc and I get the following error : \r\n\r\n```\r\n...\r\n22/07/31 14:44:07 WARN org.apache.spark.scheduler.TaskSetManager: Lost task 0.0 in stage 0.0 (TID 0) (cluster123-m.europe-west2-b.c.crypto-trading-automate-357313.internal executor 1): java.lang.ClassCastException: cannot assign instance of java.lang.invoke.SerializedLambda to field org.apache.spark.rdd.MapPartitionsRDD.f of type scala.Function3 in instance of org.apache.spark.rdd.MapPartitionsRDD\r\n\tat java.io.ObjectStreamClass$FieldReflector.setObjFieldValues(ObjectStreamClass.java:2301)\r\n\tat java.io.ObjectStreamClass.setObjFieldValues(ObjectStreamClass.java:1431)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2437)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\r\n\tat scala.collection.immutable.List$SerializationProxy.readObject(List.scala:527)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2322)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\r\n\tat scala.collection.immutable.List$SerializationProxy.readObject(List.scala:527)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2322)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\r\n\tat scala.collection.immutable.List$SerializationProxy.readObject(List.scala:527)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2322)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\r\n\tat org.apache.spark.serializer.JavaDeserializationStream.readObject(JavaSerializer.scala:76)\r\n\tat org.apache.spark.serializer.JavaSerializerInstance.deserialize(JavaSerializer.scala:115)\r\n\tat org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:83)\r\n\tat org.apache.spark.scheduler.Task.run(Task.scala:131)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:498)\r\n\tat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1439)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:501)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:750)\r\n\r\n22/07/31 14:44:08 ERROR org.apache.spark.scheduler.TaskSetManager: Task 0 in stage 0.0 failed 4 times; aborting job\r\nException in thread &quot;main&quot; org.apache.spark.SparkException: Job aborted due to stage failure: Task 0 in stage 0.0 failed 4 times, most recent failure: Lost task 0.3 in stage 0.0 (TID 3) (cluster123-m.europe-west2-b.c.crypto-trading-automate-357313.internal executor 2): java.lang.ClassCastException: cannot assign instance of java.lang.invoke.SerializedLambda to field org.apache.spark.rdd.MapPartitionsRDD.f of type scala.Function3 in instance of org.apache.spark.rdd.MapPartitionsRDD\r\n\tat java.io.ObjectStreamClass$FieldReflector.setObjFieldValues(ObjectStreamClass.java:2301)\r\n\tat java.io.ObjectStreamClass.setObjFieldValues(ObjectStreamClass.java:1431)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2437)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\r\n\tat scala.collection.immutable.List$SerializationProxy.readObject(List.scala:527)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2322)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\r\n\tat scala.collection.immutable.List$SerializationProxy.readObject(List.scala:527)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2322)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\r\n\tat scala.collection.immutable.List$SerializationProxy.readObject(List.scala:527)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2322)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\r\n\tat org.apache.spark.serializer.JavaDeserializationStream.readObject(JavaSerializer.scala:76)\r\n\tat org.apache.spark.serializer.JavaSerializerInstance.deserialize(JavaSerializer.scala:115)\r\n\tat org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:83)\r\n\tat org.apache.spark.scheduler.Task.run(Task.scala:131)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:498)\r\n\tat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1439)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:501)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:750)\r\n\r\nDriver stacktrace:\r\n\tat org.apache.spark.scheduler.DAGScheduler.failJobAndIndependentStages(DAGScheduler.scala:2304)\r\n\tat org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2(DAGScheduler.scala:2253)\r\n\tat org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2$adapted(DAGScheduler.scala:2252)\r\n\tat scala.collection.mutable.ResizableArray.foreach(ResizableArray.scala:62)\r\n\tat scala.collection.mutable.ResizableArray.foreach$(ResizableArray.scala:55)\r\n\tat scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:49)\r\n\tat org.apache.spark.scheduler.DAGScheduler.abortStage(DAGScheduler.scala:2252)\r\n\tat org.apache.spark.scheduler.DAGScheduler.$anonfun$handleTaskSetFailed$1(DAGScheduler.scala:1124)\r\n\tat org.apache.spark.scheduler.DAGScheduler.$anonfun$handleTaskSetFailed$1$adapted(DAGScheduler.scala:1124)\r\n\tat scala.Option.foreach(Option.scala:407)\r\n\tat org.apache.spark.scheduler.DAGScheduler.handleTaskSetFailed(DAGScheduler.scala:1124)\r\n\tat org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.doOnReceive(DAGScheduler.scala:2491)\r\n\tat org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2433)\r\n\tat org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2422)\r\n\tat org.apache.spark.util.EventLoop$$anon$1.run(EventLoop.scala:49)\r\n\tat org.apache.spark.scheduler.DAGScheduler.runJob(DAGScheduler.scala:902)\r\n\tat org.apache.spark.SparkContext.runJob(SparkContext.scala:2204)\r\n\tat org.apache.spark.SparkContext.runJob(SparkContext.scala:2225)\r\n\tat org.apache.spark.SparkContext.runJob(SparkContext.scala:2244)\r\n\tat org.apache.spark.sql.execution.SparkPlan.executeTake(SparkPlan.scala:472)\r\n\tat org.apache.spark.sql.execution.SparkPlan.executeTake(SparkPlan.scala:425)\r\n\tat org.apache.spark.sql.execution.CollectLimitExec.executeCollect(limit.scala:47)\r\n\tat org.apache.spark.sql.Dataset.collectFromPlan(Dataset.scala:3709)\r\n\tat org.apache.spark.sql.Dataset.$anonfun$head$1(Dataset.scala:2735)\r\n\tat org.apache.spark.sql.Dataset.$anonfun$withAction$1(Dataset.scala:3700)\r\n\tat org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$5(SQLExecution.scala:103)\r\n\tat org.apache.spark.sql.execution.SQLExecution$.withSQLConfPropagated(SQLExecution.scala:163)\r\n\tat org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$1(SQLExecution.scala:90)\r\n\tat org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:775)\r\n\tat org.apache.spark.sql.execution.SQLExecution$.withNewExecutionId(SQLExecution.scala:64)\r\n\tat org.apache.spark.sql.Dataset.withAction(Dataset.scala:3698)\r\n\tat org.apache.spark.sql.Dataset.head(Dataset.scala:2735)\r\n\tat org.apache.spark.sql.Dataset.take(Dataset.scala:2942)\r\n\tat org.apache.spark.sql.Dataset.getRows(Dataset.scala:302)\r\n\tat org.apache.spark.sql.Dataset.showString(Dataset.scala:339)\r\n\tat org.apache.spark.sql.Dataset.show(Dataset.scala:826)\r\n\tat org.apache.spark.sql.Dataset.show(Dataset.scala:785)\r\n\tat org.apache.spark.sql.Dataset.show(Dataset.scala:794)\r\n\tat com.example.demo.MyJob.start(MyJob.java:30)\r\n\tat com.example.demo.DemoApplication.main(DemoApplication.java:17)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)\r\n\tat org.springframework.boot.loader.Launcher.launch(Launcher.java:108)\r\n\tat org.springframework.boot.loader.Launcher.launch(Launcher.java:58)\r\n\tat org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:65)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.apache.spark.deploy.JavaMainApplication.start(SparkApplication.scala:52)\r\n\tat org.apache.spark.deploy.SparkSubmit.org$apache$spark$deploy$SparkSubmit$$runMain(SparkSubmit.scala:951)\r\n\tat org.apache.spark.deploy.SparkSubmit.doRunMain$1(SparkSubmit.scala:180)\r\n\tat org.apache.spark.deploy.SparkSubmit.submit(SparkSubmit.scala:203)\r\n\tat org.apache.spark.deploy.SparkSubmit.doSubmit(SparkSubmit.scala:90)\r\n\tat org.apache.spark.deploy.SparkSubmit$$anon$2.doSubmit(SparkSubmit.scala:1039)\r\n\tat org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:1048)\r\n\tat org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)\r\nCaused by: java.lang.ClassCastException: cannot assign instance of java.lang.invoke.SerializedLambda to field org.apache.spark.rdd.MapPartitionsRDD.f of type scala.Function3 in instance of org.apache.spark.rdd.MapPartitionsRDD\r\n\tat java.io.ObjectStreamClass$FieldReflector.setObjFieldValues(ObjectStreamClass.java:2301)\r\n\tat java.io.ObjectStreamClass.setObjFieldValues(ObjectStreamClass.java:1431)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2437)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\r\n\tat scala.collection.immutable.List$SerializationProxy.readObject(List.scala:527)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2322)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\r\n\tat scala.collection.immutable.List$SerializationProxy.readObject(List.scala:527)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2322)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\r\n\tat scala.collection.immutable.List$SerializationProxy.readObject(List.scala:527)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2322)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\r\n\tat org.apache.spark.serializer.JavaDeserializationStream.readObject(JavaSerializer.scala:76)\r\n\tat org.apache.spark.serializer.JavaSerializerInstance.deserialize(JavaSerializer.scala:115)\r\n\tat org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:83)\r\n\tat org.apache.spark.scheduler.Task.run(Task.scala:131)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:498)\r\n\tat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1439)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:501)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:750)\r\n\r\n\r\n```\r\n\r\nHere is my code :\r\n\r\nThe beans :\r\n\r\n```\r\npackage com.example.demo.model;\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Getter;\r\nimport lombok.Setter;\r\nimport lombok.ToString;\r\n\r\n@Getter\r\n@Setter\r\n@ToString\r\n@AllArgsConstructor\r\npublic class Address {\r\n\r\n    private String city;\r\n    private String country;\r\n}\r\n\r\n\r\npackage com.example.demo.model;\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Getter;\r\nimport lombok.Setter;\r\nimport lombok.ToString;\r\n\r\n@Getter\r\n@Setter\r\n@ToString\r\n@AllArgsConstructor\r\npublic class Person {\r\n\r\n    private String name;\r\n    private int age;\r\n\r\n}\r\n\r\n\r\npackage com.example.demo.model;\r\n\r\nimport lombok.*;\r\n\r\n@Getter\r\n@Setter\r\n@ToString\r\n@Builder\r\n@AllArgsConstructor\r\npublic class PersonWithAddress {\r\n\r\n    private String name;\r\n    private int age;\r\n    private String city;\r\n    private String country;\r\n}\r\n\r\n\r\n```\r\n\r\n\r\n```\r\n\r\npackage com.example.demo;\r\n\r\nimport com.example.demo.model.Address;\r\nimport com.example.demo.model.Person;\r\nimport com.example.demo.model.PersonWithAddress;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.apache.spark.sql.*;\r\nimport org.springframework.stereotype.Service;\r\nimport java.io.Serializable;\r\nimport java.util.Arrays;\r\nimport java.util.Iterator;\r\nimport java.util.stream.Stream;\r\n\r\n\r\n@Service\r\n@AllArgsConstructor\r\n@Slf4j\r\npublic class MyJob implements Serializable {\r\n\r\n    public void start() {\r\n\r\n        SparkSession spark = SparkSession.builder().appName(&quot;demo&quot;).getOrCreate();\r\n\r\n        Person john = new Person(&quot;John&quot;, 30);\r\n        Person david = new Person(&quot;David&quot;, 35);\r\n\r\n        Dataset&lt;Person&gt; personDs = spark.createDataset(Arrays.asList(john, david), Encoders.bean(Person.class));\r\n        Dataset&lt;PersonWithAddress&gt; personWithAddressDs = personDs.flatMap(this::addAddresses, Encoders.bean(PersonWithAddress.class));\r\n        personWithAddressDs.show();\r\n\r\n    }\r\n\r\n    private Iterator&lt;PersonWithAddress&gt; addAddresses(Person person) {\r\n\r\n        Address paris = new Address(&quot;Paris&quot;, &quot;France&quot;);\r\n        Address madrid = new Address(&quot;Madrid&quot;, &quot;Spain&quot;);\r\n\r\n        return Stream.of(paris, madrid).map(address -&gt; createPersonWithAddress(person, address)).iterator();\r\n\r\n    }\r\n\r\n    private PersonWithAddress createPersonWithAddress(Person person, Address address) {\r\n\r\n        return PersonWithAddress.builder()\r\n                .name(person.getName())\r\n                .age(person.getAge())\r\n                .city(address.getCity())\r\n                .country(address.getCountry())\r\n                .build();\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\n```\r\npackage com.example.demo;\r\n\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration;\r\nimport org.springframework.context.ApplicationContext;\r\n\r\n@SpringBootApplication(exclude = {GsonAutoConfiguration.class})\r\n@Slf4j\r\npublic class DemoApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tApplicationContext applicationContext = SpringApplication.run(DemoApplication.class, args);\r\n\t\tMyJob myJob = applicationContext.getBean(MyJob.class);\r\n\t\tmyJob.start();\r\n\t}\r\n\r\n}\r\n\r\n\r\n```\r\n\r\nand the pom\r\n\r\n```\r\n\t\t...\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n\t\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;/exclusions&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n\t\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spark-sql_2.12&lt;/artifactId&gt;\r\n\t\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t\t\t&lt;version&gt;3.1.2&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;janino&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.0.8&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;commons-compiler&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.0.8&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;1.18.24&lt;/version&gt;\r\n\t\t\t\t&lt;scope&gt;compile&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\r\n\t\t&lt;build&gt;\r\n\t\t\t&lt;plugins&gt;\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;/plugins&gt;\r\n\t\t&lt;/build&gt;\r\n\r\n\t&lt;/project&gt;\r\n\r\n\r\n```\r\n\r\nI tried 2 solutions based on previous feeds on stackoverflow :\r\n\r\nhttps://stackoverflow.com/questions/28186607/java-lang-classcastexception-using-lambda-expressions-in-spark-job-on-remote-ser/28367602#28367602\r\n\r\n- replacing lambdas with innerclass\r\n- use the --jars to provide the generated jar to executors (but it seems that this is what dataproc do by default)\r\n\r\n\r\nIn local it works fine, only when I deploy in dataproc that I get the error.\r\n\r\nThank you for your help :) ","title":"ClassCastException while running Spark Spring boot app on Dataproc","body":"<p>I'm trying to run a spark job (written in Java with Spring boot) in dataproc and I get the following error :</p>\n<pre><code>...\n22/07/31 14:44:07 WARN org.apache.spark.scheduler.TaskSetManager: Lost task 0.0 in stage 0.0 (TID 0) (cluster123-m.europe-west2-b.c.crypto-trading-automate-357313.internal executor 1): java.lang.ClassCastException: cannot assign instance of java.lang.invoke.SerializedLambda to field org.apache.spark.rdd.MapPartitionsRDD.f of type scala.Function3 in instance of org.apache.spark.rdd.MapPartitionsRDD\n    at java.io.ObjectStreamClass$FieldReflector.setObjFieldValues(ObjectStreamClass.java:2301)\n    at java.io.ObjectStreamClass.setObjFieldValues(ObjectStreamClass.java:1431)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2437)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\n    at scala.collection.immutable.List$SerializationProxy.readObject(List.scala:527)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2322)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\n    at scala.collection.immutable.List$SerializationProxy.readObject(List.scala:527)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2322)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\n    at scala.collection.immutable.List$SerializationProxy.readObject(List.scala:527)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2322)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\n    at org.apache.spark.serializer.JavaDeserializationStream.readObject(JavaSerializer.scala:76)\n    at org.apache.spark.serializer.JavaSerializerInstance.deserialize(JavaSerializer.scala:115)\n    at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:83)\n    at org.apache.spark.scheduler.Task.run(Task.scala:131)\n    at org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:498)\n    at org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1439)\n    at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:501)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:750)\n\n22/07/31 14:44:08 ERROR org.apache.spark.scheduler.TaskSetManager: Task 0 in stage 0.0 failed 4 times; aborting job\nException in thread &quot;main&quot; org.apache.spark.SparkException: Job aborted due to stage failure: Task 0 in stage 0.0 failed 4 times, most recent failure: Lost task 0.3 in stage 0.0 (TID 3) (cluster123-m.europe-west2-b.c.crypto-trading-automate-357313.internal executor 2): java.lang.ClassCastException: cannot assign instance of java.lang.invoke.SerializedLambda to field org.apache.spark.rdd.MapPartitionsRDD.f of type scala.Function3 in instance of org.apache.spark.rdd.MapPartitionsRDD\n    at java.io.ObjectStreamClass$FieldReflector.setObjFieldValues(ObjectStreamClass.java:2301)\n    at java.io.ObjectStreamClass.setObjFieldValues(ObjectStreamClass.java:1431)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2437)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\n    at scala.collection.immutable.List$SerializationProxy.readObject(List.scala:527)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2322)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\n    at scala.collection.immutable.List$SerializationProxy.readObject(List.scala:527)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2322)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\n    at scala.collection.immutable.List$SerializationProxy.readObject(List.scala:527)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2322)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\n    at org.apache.spark.serializer.JavaDeserializationStream.readObject(JavaSerializer.scala:76)\n    at org.apache.spark.serializer.JavaSerializerInstance.deserialize(JavaSerializer.scala:115)\n    at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:83)\n    at org.apache.spark.scheduler.Task.run(Task.scala:131)\n    at org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:498)\n    at org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1439)\n    at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:501)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:750)\n\nDriver stacktrace:\n    at org.apache.spark.scheduler.DAGScheduler.failJobAndIndependentStages(DAGScheduler.scala:2304)\n    at org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2(DAGScheduler.scala:2253)\n    at org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2$adapted(DAGScheduler.scala:2252)\n    at scala.collection.mutable.ResizableArray.foreach(ResizableArray.scala:62)\n    at scala.collection.mutable.ResizableArray.foreach$(ResizableArray.scala:55)\n    at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:49)\n    at org.apache.spark.scheduler.DAGScheduler.abortStage(DAGScheduler.scala:2252)\n    at org.apache.spark.scheduler.DAGScheduler.$anonfun$handleTaskSetFailed$1(DAGScheduler.scala:1124)\n    at org.apache.spark.scheduler.DAGScheduler.$anonfun$handleTaskSetFailed$1$adapted(DAGScheduler.scala:1124)\n    at scala.Option.foreach(Option.scala:407)\n    at org.apache.spark.scheduler.DAGScheduler.handleTaskSetFailed(DAGScheduler.scala:1124)\n    at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.doOnReceive(DAGScheduler.scala:2491)\n    at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2433)\n    at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2422)\n    at org.apache.spark.util.EventLoop$$anon$1.run(EventLoop.scala:49)\n    at org.apache.spark.scheduler.DAGScheduler.runJob(DAGScheduler.scala:902)\n    at org.apache.spark.SparkContext.runJob(SparkContext.scala:2204)\n    at org.apache.spark.SparkContext.runJob(SparkContext.scala:2225)\n    at org.apache.spark.SparkContext.runJob(SparkContext.scala:2244)\n    at org.apache.spark.sql.execution.SparkPlan.executeTake(SparkPlan.scala:472)\n    at org.apache.spark.sql.execution.SparkPlan.executeTake(SparkPlan.scala:425)\n    at org.apache.spark.sql.execution.CollectLimitExec.executeCollect(limit.scala:47)\n    at org.apache.spark.sql.Dataset.collectFromPlan(Dataset.scala:3709)\n    at org.apache.spark.sql.Dataset.$anonfun$head$1(Dataset.scala:2735)\n    at org.apache.spark.sql.Dataset.$anonfun$withAction$1(Dataset.scala:3700)\n    at org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$5(SQLExecution.scala:103)\n    at org.apache.spark.sql.execution.SQLExecution$.withSQLConfPropagated(SQLExecution.scala:163)\n    at org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$1(SQLExecution.scala:90)\n    at org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:775)\n    at org.apache.spark.sql.execution.SQLExecution$.withNewExecutionId(SQLExecution.scala:64)\n    at org.apache.spark.sql.Dataset.withAction(Dataset.scala:3698)\n    at org.apache.spark.sql.Dataset.head(Dataset.scala:2735)\n    at org.apache.spark.sql.Dataset.take(Dataset.scala:2942)\n    at org.apache.spark.sql.Dataset.getRows(Dataset.scala:302)\n    at org.apache.spark.sql.Dataset.showString(Dataset.scala:339)\n    at org.apache.spark.sql.Dataset.show(Dataset.scala:826)\n    at org.apache.spark.sql.Dataset.show(Dataset.scala:785)\n    at org.apache.spark.sql.Dataset.show(Dataset.scala:794)\n    at com.example.demo.MyJob.start(MyJob.java:30)\n    at com.example.demo.DemoApplication.main(DemoApplication.java:17)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:108)\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:58)\n    at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:65)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.apache.spark.deploy.JavaMainApplication.start(SparkApplication.scala:52)\n    at org.apache.spark.deploy.SparkSubmit.org$apache$spark$deploy$SparkSubmit$$runMain(SparkSubmit.scala:951)\n    at org.apache.spark.deploy.SparkSubmit.doRunMain$1(SparkSubmit.scala:180)\n    at org.apache.spark.deploy.SparkSubmit.submit(SparkSubmit.scala:203)\n    at org.apache.spark.deploy.SparkSubmit.doSubmit(SparkSubmit.scala:90)\n    at org.apache.spark.deploy.SparkSubmit$$anon$2.doSubmit(SparkSubmit.scala:1039)\n    at org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:1048)\n    at org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)\nCaused by: java.lang.ClassCastException: cannot assign instance of java.lang.invoke.SerializedLambda to field org.apache.spark.rdd.MapPartitionsRDD.f of type scala.Function3 in instance of org.apache.spark.rdd.MapPartitionsRDD\n    at java.io.ObjectStreamClass$FieldReflector.setObjFieldValues(ObjectStreamClass.java:2301)\n    at java.io.ObjectStreamClass.setObjFieldValues(ObjectStreamClass.java:1431)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2437)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\n    at scala.collection.immutable.List$SerializationProxy.readObject(List.scala:527)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2322)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\n    at scala.collection.immutable.List$SerializationProxy.readObject(List.scala:527)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2322)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\n    at scala.collection.immutable.List$SerializationProxy.readObject(List.scala:527)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2322)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\n    at org.apache.spark.serializer.JavaDeserializationStream.readObject(JavaSerializer.scala:76)\n    at org.apache.spark.serializer.JavaSerializerInstance.deserialize(JavaSerializer.scala:115)\n    at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:83)\n    at org.apache.spark.scheduler.Task.run(Task.scala:131)\n    at org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:498)\n    at org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1439)\n    at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:501)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:750)\n\n\n</code></pre>\n<p>Here is my code :</p>\n<p>The beans :</p>\n<pre><code>package com.example.demo.model;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport lombok.Setter;\nimport lombok.ToString;\n\n@Getter\n@Setter\n@ToString\n@AllArgsConstructor\npublic class Address {\n\n    private String city;\n    private String country;\n}\n\n\npackage com.example.demo.model;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport lombok.Setter;\nimport lombok.ToString;\n\n@Getter\n@Setter\n@ToString\n@AllArgsConstructor\npublic class Person {\n\n    private String name;\n    private int age;\n\n}\n\n\npackage com.example.demo.model;\n\nimport lombok.*;\n\n@Getter\n@Setter\n@ToString\n@Builder\n@AllArgsConstructor\npublic class PersonWithAddress {\n\n    private String name;\n    private int age;\n    private String city;\n    private String country;\n}\n\n\n</code></pre>\n<pre><code>\npackage com.example.demo;\n\nimport com.example.demo.model.Address;\nimport com.example.demo.model.Person;\nimport com.example.demo.model.PersonWithAddress;\nimport lombok.AllArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.apache.spark.sql.*;\nimport org.springframework.stereotype.Service;\nimport java.io.Serializable;\nimport java.util.Arrays;\nimport java.util.Iterator;\nimport java.util.stream.Stream;\n\n\n@Service\n@AllArgsConstructor\n@Slf4j\npublic class MyJob implements Serializable {\n\n    public void start() {\n\n        SparkSession spark = SparkSession.builder().appName(&quot;demo&quot;).getOrCreate();\n\n        Person john = new Person(&quot;John&quot;, 30);\n        Person david = new Person(&quot;David&quot;, 35);\n\n        Dataset&lt;Person&gt; personDs = spark.createDataset(Arrays.asList(john, david), Encoders.bean(Person.class));\n        Dataset&lt;PersonWithAddress&gt; personWithAddressDs = personDs.flatMap(this::addAddresses, Encoders.bean(PersonWithAddress.class));\n        personWithAddressDs.show();\n\n    }\n\n    private Iterator&lt;PersonWithAddress&gt; addAddresses(Person person) {\n\n        Address paris = new Address(&quot;Paris&quot;, &quot;France&quot;);\n        Address madrid = new Address(&quot;Madrid&quot;, &quot;Spain&quot;);\n\n        return Stream.of(paris, madrid).map(address -&gt; createPersonWithAddress(person, address)).iterator();\n\n    }\n\n    private PersonWithAddress createPersonWithAddress(Person person, Address address) {\n\n        return PersonWithAddress.builder()\n                .name(person.getName())\n                .age(person.getAge())\n                .city(address.getCity())\n                .country(address.getCountry())\n                .build();\n    }\n}\n\n\n</code></pre>\n<pre><code>package com.example.demo;\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration;\nimport org.springframework.context.ApplicationContext;\n\n@SpringBootApplication(exclude = {GsonAutoConfiguration.class})\n@Slf4j\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n\n        ApplicationContext applicationContext = SpringApplication.run(DemoApplication.class, args);\n        MyJob myJob = applicationContext.getBean(MyJob.class);\n        myJob.start();\n    }\n\n}\n\n\n</code></pre>\n<p>and the pom</p>\n<pre><code>        ...\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n                &lt;exclusions&gt;\n                    &lt;exclusion&gt;\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                        &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                    &lt;/exclusion&gt;\n                &lt;/exclusions&gt;\n            &lt;/dependency&gt;\n\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n                &lt;scope&gt;runtime&lt;/scope&gt;\n                &lt;optional&gt;true&lt;/optional&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n                &lt;optional&gt;true&lt;/optional&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                &lt;optional&gt;true&lt;/optional&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n                &lt;scope&gt;test&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n                &lt;artifactId&gt;spark-sql_2.12&lt;/artifactId&gt;\n                &lt;scope&gt;provided&lt;/scope&gt;\n                &lt;version&gt;3.1.2&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\n                &lt;artifactId&gt;janino&lt;/artifactId&gt;\n                &lt;version&gt;3.0.8&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\n                &lt;artifactId&gt;commons-compiler&lt;/artifactId&gt;\n                &lt;version&gt;3.0.8&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                &lt;version&gt;1.18.24&lt;/version&gt;\n                &lt;scope&gt;compile&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n\n        &lt;build&gt;\n            &lt;plugins&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                    &lt;configuration&gt;\n                        &lt;excludes&gt;\n                            &lt;exclude&gt;\n                                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                            &lt;/exclude&gt;\n                        &lt;/excludes&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n            &lt;/plugins&gt;\n        &lt;/build&gt;\n\n    &lt;/project&gt;\n\n\n</code></pre>\n<p>I tried 2 solutions based on previous feeds on stackoverflow :</p>\n<p><a href=\"https://stackoverflow.com/questions/28186607/java-lang-classcastexception-using-lambda-expressions-in-spark-job-on-remote-ser/28367602#28367602\">java.lang.ClassCastException using lambda expressions in spark job on remote server</a></p>\n<ul>\n<li>replacing lambdas with innerclass</li>\n<li>use the --jars to provide the generated jar to executors (but it seems that this is what dataproc do by default)</li>\n</ul>\n<p>In local it works fine, only when I deploy in dataproc that I get the error.</p>\n<p>Thank you for your help :)</p>\n"},{"tags":["java","mysql","spring-boot","hibernate","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":2795364,"reputation":7571,"user_id":2404683,"display_name":"Davide D&#39;Alto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659279907,"creation_date":1659279907,"answer_id":73184395,"question_id":73184133,"body_markdown":"You can check the SQL for the table creation:\r\n```\r\nshow create table business;\r\n```\r\n\r\nor you can run the following query:\r\n```\r\nselect COLUMN_NAME\r\nfrom information_schema.KEY_COLUMN_USAGE\r\nwhere TABLE_NAME = &#39;business&#39; and CONSTRAINT_NAME=&#39;UK_3h6o7iww8015m4q3yffbkqtrw&#39;\r\n```\r\n","title":"Finding the name of the column in which duplicate value was inserted","body":"<p>You can check the SQL for the table creation:</p>\n<pre><code>show create table business;\n</code></pre>\n<p>or you can run the following query:</p>\n<pre><code>select COLUMN_NAME\nfrom information_schema.KEY_COLUMN_USAGE\nwhere TABLE_NAME = 'business' and CONSTRAINT_NAME='UK_3h6o7iww8015m4q3yffbkqtrw'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25937120,"reputation":2268,"user_id":19657183,"display_name":"Mihe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659280369,"creation_date":1659280369,"answer_id":73184454,"question_id":73184133,"body_markdown":"In addition to what Davide D&#39;Alto wrote, you can also enable SQL logging, e. g. as shown [here](https://stackoverflow.com/a/2538954/19657183).","title":"Finding the name of the column in which duplicate value was inserted","body":"<p>In addition to what Davide D'Alto wrote, you can also enable SQL logging, e. g. as shown <a href=\"https://stackoverflow.com/a/2538954/19657183\">here</a>.</p>\n"}],"owner":{"account_id":17484901,"reputation":90,"user_id":12678146,"display_name":"Aman Agarwal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73184395,"answer_count":2,"score":0,"last_activity_date":1659280369,"creation_date":1659277769,"question_id":73184133,"body_markdown":"In **hibernate** for columns annotated with **@Column(unique = true)** we get an exception when trying to insert a duplicate value for that column.\r\n\r\n```\r\n2022-07-31 19:47:18.112 ERROR 14372 --- [io-8080-exec-10] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry &#39; someValue&#39; for key &#39;business.UK_3h6o7iww8015m4q3yffbkqtrw&#39;\r\n```\r\n\r\nSo from the above log, I know that **business** is the table in which I am inputting a duplicate value. \r\n\r\nIs there a way to know in which **column** the duplicate value is getting inserted into? Since a single table can have multiple unique columns.","title":"Finding the name of the column in which duplicate value was inserted","body":"<p>In <strong>hibernate</strong> for columns annotated with <strong>@Column(unique = true)</strong> we get an exception when trying to insert a duplicate value for that column.</p>\n<pre><code>2022-07-31 19:47:18.112 ERROR 14372 --- [io-8080-exec-10] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry ' someValue' for key 'business.UK_3h6o7iww8015m4q3yffbkqtrw'\n</code></pre>\n<p>So from the above log, I know that <strong>business</strong> is the table in which I am inputting a duplicate value.</p>\n<p>Is there a way to know in which <strong>column</strong> the duplicate value is getting inserted into? Since a single table can have multiple unique columns.</p>\n"},{"tags":["java","arraylist"],"answers":[{"tags":[],"owner":{"account_id":2000267,"reputation":732,"user_id":1791487,"display_name":"D180"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1365277090,"creation_date":1365277090,"answer_id":15855184,"question_id":15855154,"body_markdown":"use \r\n\r\n    tree.get(2).set(1,Integer.valueOf(9));\r\nto get the ArrayList at the position 2 and then set the second element to 9.","title":"Two-Dimensional ArrayList set an element","body":"<p>use </p>\n\n<pre><code>tree.get(2).set(1,Integer.valueOf(9));\n</code></pre>\n\n<p>to get the ArrayList at the position 2 and then set the second element to 9.</p>\n"},{"tags":[],"owner":{"account_id":1719352,"reputation":190,"user_id":1575681,"display_name":"edwga"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1365277996,"creation_date":1365277135,"answer_id":15855196,"question_id":15855154,"body_markdown":"    tree.get(2).set(1, 9)\r\n\r\nThis gets the third (i.e. index = 2) element of the outer ArrayList, which returns the inner ArrayList. Then set the 2nd element (index = 1) to 9. Autoboxing takes care of the int to Integer conversion.","title":"Two-Dimensional ArrayList set an element","body":"<pre><code>tree.get(2).set(1, 9)\n</code></pre>\n\n<p>This gets the third (i.e. index = 2) element of the outer ArrayList, which returns the inner ArrayList. Then set the 2nd element (index = 1) to 9. Autoboxing takes care of the int to Integer conversion.</p>\n"},{"tags":[],"owner":{"account_id":280134,"reputation":9173,"user_id":575659,"accept_rate":93,"display_name":"dantuch"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1365277205,"creation_date":1365277205,"answer_id":15855206,"question_id":15855154,"body_markdown":"find index of elements that you want to replace and use twice [set(index, newElement)][1]\r\n method to do the replacement\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#set%28int,%20E%29","title":"Two-Dimensional ArrayList set an element","body":"<p>find index of elements that you want to replace and use twice <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#set%28int,%20E%29\" rel=\"nofollow\">set(index, newElement)</a>\n method to do the replacement</p>\n"},{"tags":[],"owner":{"account_id":21992608,"reputation":1,"user_id":18381341,"display_name":"Aman Bhardwaj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659279912,"creation_date":1659279912,"answer_id":73184396,"question_id":15855154,"body_markdown":"## The major methods we use in a 2-Dimensional ArrayList are --&gt; ##\r\n\r\nlet say we have a 2-Dimensional ArrayList as\r\n\r\n    ArrayList&lt;ArrayList&lt;Integer&gt;&gt; ArrayList_2D = new ArrayList&lt;&gt;()\r\n\r\nTo find the size\r\n\r\n    ArrayList_2D.size();\r\n\r\nTo access some element at position (i , j)\r\n\r\n    ArrayList_2D.get(i).get(j);\r\n\r\nTo set value of an element at position (i , j) equal to x\r\n\r\n    ArrayList_2D.get(i).set(j , x);\r\n\r\nTo remove (i , j) element \r\n\r\n    ArrayList_2D.get(i).remove(j);\r\n\r\nTo find the index of first occurring of element y \r\n\r\n     int col , row;\r\n     for(int a=0;a&lt;ArrayList_2D.size();a++){\r\n         for(int b=0;b&lt;ArrayList_2D.size();b++){\r\n             if(ArrayList_2D.get(i).get(j)==y){\r\n                     col = i;\r\n                     row = j;\r\n                     break;\r\n             }\r\n         }\r\n     }\r\n\r\n**Hope This Is Will Be HelpFul**\r\n\r\n","title":"Two-Dimensional ArrayList set an element","body":"<h2>The major methods we use in a 2-Dimensional ArrayList are --&gt;</h2>\n<p>let say we have a 2-Dimensional ArrayList as</p>\n<pre><code>ArrayList&lt;ArrayList&lt;Integer&gt;&gt; ArrayList_2D = new ArrayList&lt;&gt;()\n</code></pre>\n<p>To find the size</p>\n<pre><code>ArrayList_2D.size();\n</code></pre>\n<p>To access some element at position (i , j)</p>\n<pre><code>ArrayList_2D.get(i).get(j);\n</code></pre>\n<p>To set value of an element at position (i , j) equal to x</p>\n<pre><code>ArrayList_2D.get(i).set(j , x);\n</code></pre>\n<p>To remove (i , j) element</p>\n<pre><code>ArrayList_2D.get(i).remove(j);\n</code></pre>\n<p>To find the index of first occurring of element y</p>\n<pre><code> int col , row;\n for(int a=0;a&lt;ArrayList_2D.size();a++){\n     for(int b=0;b&lt;ArrayList_2D.size();b++){\n         if(ArrayList_2D.get(i).get(j)==y){\n                 col = i;\n                 row = j;\n                 break;\n         }\n     }\n }\n</code></pre>\n<p><strong>Hope This Is Will Be HelpFul</strong></p>\n"}],"owner":{"account_id":1906088,"reputation":2053,"user_id":1720938,"accept_rate":68,"display_name":"hamid"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12673,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":15855184,"answer_count":4,"score":5,"last_activity_date":1659279912,"creation_date":1365276929,"question_id":15855154,"body_markdown":"I have this piece of code:\r\n\r\n    List&lt;ArrayList&lt;Integer&gt;&gt; tree = new ArrayList&lt;ArrayList&lt;Integer&gt;&gt;();\r\n \r\n    tree.add(0, new ArrayList&lt;Integer&gt;(Arrays.asList(1)));\r\n    tree.add(1, new ArrayList&lt;Integer&gt;(Arrays.asList(2,3)));\r\n    tree.add(2, new ArrayList&lt;Integer&gt;(Arrays.asList(4,5,6)));\r\n\r\nI would like, for example, to replace 5 with 9. how can I do this?","title":"Two-Dimensional ArrayList set an element","body":"<p>I have this piece of code:</p>\n\n<pre><code>List&lt;ArrayList&lt;Integer&gt;&gt; tree = new ArrayList&lt;ArrayList&lt;Integer&gt;&gt;();\n\ntree.add(0, new ArrayList&lt;Integer&gt;(Arrays.asList(1)));\ntree.add(1, new ArrayList&lt;Integer&gt;(Arrays.asList(2,3)));\ntree.add(2, new ArrayList&lt;Integer&gt;(Arrays.asList(4,5,6)));\n</code></pre>\n\n<p>I would like, for example, to replace 5 with 9. how can I do this?</p>\n"},{"tags":["java","spring-boot","rabbitmq"],"comments":[{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1659275843,"post_id":73183796,"comment_id":129251109,"body_markdown":"Do you have more than one class called `AdvertisementDto` in your project, in different packages? One in `com.springbootmicroservices.advertisement.dto` and another one in `com.springbootmicroservices.report.dto`?","body":"Do you have more than one class called <code>AdvertisementDto</code> in your project, in different packages? One in <code>com.springbootmicroservices.advertisement.dto</code> and another one in <code>com.springbootmicroservices.report.dto</code>?"},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1659276275,"post_id":73183796,"comment_id":129251186,"body_markdown":"@andrewJames I editted my post.","body":"@andrewJames I editted my post."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1659276571,"post_id":73183796,"comment_id":129251258,"body_markdown":"Sorry if my comment was not clear. I was not suggesting any changes/fixes. I was only asking about the class names. You can certainly do that (duplicate class names in different packages), but it can be confusing and it may lead to errors. I don&#39;t know if it&#39;s relevant to your specific problem.","body":"Sorry if my comment was not clear. I was not suggesting any changes/fixes. I was only asking about the class names. You can certainly do that (duplicate class names in different packages), but it can be confusing and it may lead to errors. I don&#39;t know if it&#39;s relevant to your specific problem."},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1659371420,"post_id":73183796,"comment_id":129273666,"body_markdown":"@andrewJames I tried to find this way adding advertisement dependency into report service. But I cannot run docker-compose.","body":"@andrewJames I tried to find this way adding advertisement dependency into report service. But I cannot run docker-compose."},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1659557881,"post_id":73183796,"comment_id":129325658,"body_markdown":"@andrewJames I still cannot fix the issue.","body":"@andrewJames I still cannot fix the issue."}],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":314,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659279390,"creation_date":1659274825,"question_id":73183796,"body_markdown":"I have a problem about listening the message through RabbitListener.\r\n\r\nI got this issue on the console.\r\n\r\n    org.springframework.messaging.converter.MessageConversionException: Cannot convert from [com.springbootmicroservices.advertisement.dto.AdvertisementDto] to [com.springbootmicroservices.report.dto.AdvertisementDto] for GenericMessage [payload=AdvertisementDto(id=1, title=Advertisement 1 for User 1, viewCount=1), headers={amqp_receivedDeliveryMode=PERSISTENT, amqp_receivedRoutingKey=queue-advertisement, amqp_deliveryTag=1, amqp_consumerQueue=queue-advertisement, amqp_redelivered=false, id=ee288162-ac5a-749b-eddb-3724b0b05755, amqp_consumerTag=amq.ctag-lMN6cQgBhDXZlME7_J_RFQ, amqp_lastInBatch=false, contentType=application/x-java-serialized-object, timestamp=1659275716934}]\r\n\r\nHow can I fix the issue.\r\n\r\nHere is my message service of report service shown below.\r\n\r\n    @RabbitListener(queues = &quot;${queue.name}&quot;)\r\n    @Override\r\n    public void receiveMessage(@Payload AdvertisementDto advertisementDto) {\r\n        \r\n       LOGGER.info(&quot;MessageServiceImpl | receiveMessage is started&quot;);\r\n        \r\n       LOGGER.info(&quot;MessageServiceImpl | receiveMessage | Report is creating&quot;);\r\n        \r\n       reportService.createReport(advertisementDto);\r\n    }\r\n\r\nHere is my project link : [Link][1]\r\n\r\nHere is the screenshots : [Image Link 1][2]\r\n                          [Image Link 2][3]\r\n\r\n\r\nHere is AdvertisementDto of Advertisement Service\r\n\r\n    @Data\r\n    public class AdvertisementDto implements Serializable {\r\n    \r\n        private Long id;\r\n        private String title;\r\n        private Long viewCount;\r\n    }\r\n\r\nHere is AdvertisementDto of Report Service\r\n\r\n    @Data\r\n    public class AdvertisementDto implements Serializable {\r\n    \r\n        private Long id;\r\n        private String title;\r\n        private Long viewCount;\r\n    }\r\n\r\n\r\n  [1]: https://github.com/Rapter1990/SpringBootMicroservices\r\n  [2]: https://ibb.co/6ndsV3x\r\n  [3]: https://ibb.co/p00bBn7","title":"Spring Boot Microservices RabbitMq org.springframework.messaging.converter.MessageConversionException: Cannot convert from","body":"<p>I have a problem about listening the message through RabbitListener.</p>\n<p>I got this issue on the console.</p>\n<pre><code>org.springframework.messaging.converter.MessageConversionException: Cannot convert from [com.springbootmicroservices.advertisement.dto.AdvertisementDto] to [com.springbootmicroservices.report.dto.AdvertisementDto] for GenericMessage [payload=AdvertisementDto(id=1, title=Advertisement 1 for User 1, viewCount=1), headers={amqp_receivedDeliveryMode=PERSISTENT, amqp_receivedRoutingKey=queue-advertisement, amqp_deliveryTag=1, amqp_consumerQueue=queue-advertisement, amqp_redelivered=false, id=ee288162-ac5a-749b-eddb-3724b0b05755, amqp_consumerTag=amq.ctag-lMN6cQgBhDXZlME7_J_RFQ, amqp_lastInBatch=false, contentType=application/x-java-serialized-object, timestamp=1659275716934}]\n</code></pre>\n<p>How can I fix the issue.</p>\n<p>Here is my message service of report service shown below.</p>\n<pre><code>@RabbitListener(queues = &quot;${queue.name}&quot;)\n@Override\npublic void receiveMessage(@Payload AdvertisementDto advertisementDto) {\n    \n   LOGGER.info(&quot;MessageServiceImpl | receiveMessage is started&quot;);\n    \n   LOGGER.info(&quot;MessageServiceImpl | receiveMessage | Report is creating&quot;);\n    \n   reportService.createReport(advertisementDto);\n}\n</code></pre>\n<p>Here is my project link : <a href=\"https://github.com/Rapter1990/SpringBootMicroservices\" rel=\"nofollow noreferrer\">Link</a></p>\n<p>Here is the screenshots : <a href=\"https://ibb.co/6ndsV3x\" rel=\"nofollow noreferrer\">Image Link 1</a>\n<a href=\"https://ibb.co/p00bBn7\" rel=\"nofollow noreferrer\">Image Link 2</a></p>\n<p>Here is AdvertisementDto of Advertisement Service</p>\n<pre><code>@Data\npublic class AdvertisementDto implements Serializable {\n\n    private Long id;\n    private String title;\n    private Long viewCount;\n}\n</code></pre>\n<p>Here is AdvertisementDto of Report Service</p>\n<pre><code>@Data\npublic class AdvertisementDto implements Serializable {\n\n    private Long id;\n    private String title;\n    private Long viewCount;\n}\n</code></pre>\n"},{"tags":["java","mysql","sql","liquibase"],"comments":[{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":1,"creation_date":1649773749,"post_id":71844357,"comment_id":126957860,"body_markdown":"`SET columnA = !columnA`","body":"<code>SET columnA = !columnA</code>"}],"answers":[{"tags":[],"owner":{"account_id":6740011,"reputation":46650,"user_id":5193536,"display_name":"nbk"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1649774007,"creation_date":1649773545,"answer_id":71844427,"question_id":71844357,"body_markdown":"You can make a `CASE WHEN`\r\n\r\n    UPDATE tableA SET columnA = CASE columna WHEN false then  true\r\n    ELSE false ENd;\r\n\r\nIf you have more nested conditions, it is not problem to expand the conditions","title":"MySQL, change true values to false and false values to true. How?","body":"<p>You can make a <code>CASE WHEN</code></p>\n<pre><code>UPDATE tableA SET columnA = CASE columna WHEN false then  true\nELSE false ENd;\n</code></pre>\n<p>If you have more nested conditions, it is not problem to expand the conditions</p>\n"},{"tags":[],"owner":{"account_id":17253187,"reputation":15250,"user_id":12492890,"display_name":"lemon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659278956,"creation_date":1649773654,"answer_id":71844457,"question_id":71844357,"body_markdown":"Applying the `NOT` on each of your rows will solve your problem:\r\n\r\n```\r\nUPDATE tableA \r\nSET columnA = NOT columnA\r\n```","title":"MySQL, change true values to false and false values to true. How?","body":"<p>Applying the <code>NOT</code> on each of your rows will solve your problem:</p>\n<pre><code>UPDATE tableA \nSET columnA = NOT columnA\n</code></pre>\n"}],"owner":{"account_id":3886051,"reputation":39,"user_id":3217382,"display_name":"SpringBootDev"},"comment_count":1,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":779,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1649773764,"answer_count":2,"score":1,"last_activity_date":1659279000,"creation_date":1649773276,"question_id":71844357,"body_markdown":"I need to change a column in a table in my database so that the values in the column that are currently true change to false, and the values that were false before to true.\r\n\r\nBefore:\r\nValue A: false\r\nValue B: true\r\n\r\nAfter:\r\nValue A: true\r\nValue B: false\r\n\r\nHow do I do this? Trying to write a liquibase migration for this. I first thought of something like:\r\n\r\n```\r\nUPDATE tableA\r\nSET columnA = false where columnA = true,\r\nSET columnA = true where columnA = false;\r\n```\r\n\r\nBut I realized that if I first change the true values to false, then all values will be false, and then MySQL will flip everything from false to true. Obviously not what I want. \r\n\r\nAny ideas?","title":"MySQL, change true values to false and false values to true. How?","body":"<p>I need to change a column in a table in my database so that the values in the column that are currently true change to false, and the values that were false before to true.</p>\n<p>Before:\nValue A: false\nValue B: true</p>\n<p>After:\nValue A: true\nValue B: false</p>\n<p>How do I do this? Trying to write a liquibase migration for this. I first thought of something like:</p>\n<pre><code>UPDATE tableA\nSET columnA = false where columnA = true,\nSET columnA = true where columnA = false;\n</code></pre>\n<p>But I realized that if I first change the true values to false, then all values will be false, and then MySQL will flip everything from false to true. Obviously not what I want.</p>\n<p>Any ideas?</p>\n"},{"tags":["java","android","firebase","google-cloud-firestore"],"comments":[{"owner":{"account_id":22248513,"reputation":25,"user_id":16481825,"display_name":"vibhum mohan"},"score":0,"creation_date":1659267295,"post_id":73182954,"comment_id":129249539,"body_markdown":"Please tell me if anything else is needed :)","body":"Please tell me if anything else is needed :)"},{"owner":{"account_id":22248513,"reputation":25,"user_id":16481825,"display_name":"vibhum mohan"},"score":0,"creation_date":1659269008,"post_id":73182954,"comment_id":129249838,"body_markdown":"Also i have initialized image view with find view by id still its giving NPE","body":"Also i have initialized image view with find view by id still its giving NPE"},{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":0,"creation_date":1659275631,"post_id":73182954,"comment_id":129251070,"body_markdown":"1) can you show the holder class where you set the view, 2) can you show the row xml, 3) have you tried using something like Glide or Picasso to do this? It would be a lot easier than writing your own image loader.","body":"1) can you show the holder class where you set the view, 2) can you show the row xml, 3) have you tried using something like Glide or Picasso to do this? It would be a lot easier than writing your own image loader."},{"owner":{"account_id":22248513,"reputation":25,"user_id":16481825,"display_name":"vibhum mohan"},"score":0,"creation_date":1659277947,"post_id":73182954,"comment_id":129251553,"body_markdown":"@TylerV Attaching View holder Class in above question","body":"@TylerV Attaching View holder Class in above question"},{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":0,"creation_date":1659278381,"post_id":73182954,"comment_id":129251623,"body_markdown":"In general, you should post code/text as images. I don&#39;t see anything that would make it null from what you posted... If you log `holder.contactImageView` before launching the Firebase call is it null there? (or right before you call `setImageTask.execute`)","body":"In general, you should post code/text as images. I don&#39;t see anything that would make it null from what you posted... If you log <code>holder.contactImageView</code> before launching the Firebase call is it null there? (or right before you call <code>setImageTask.execute</code>)"},{"owner":{"account_id":22248513,"reputation":25,"user_id":16481825,"display_name":"vibhum mohan"},"score":0,"creation_date":1659278537,"post_id":73182954,"comment_id":129251659,"body_markdown":"@TylerV I&#39;ve pasted xml also as image if you say i can edit it","body":"@TylerV I&#39;ve pasted xml also as image if you say i can edit it"},{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":0,"creation_date":1659278807,"post_id":73182954,"comment_id":129251727,"body_markdown":"Also, I would expect your current code to give you an error from modifying views off the UI thread even without the NPE. Try using [Glide or Picasso](https://stackoverflow.com/questions/72930584/firestore-recycleview-image-holder/72930828#72930828) instead of your own thread pool.","body":"Also, I would expect your current code to give you an error from modifying views off the UI thread even without the NPE. Try using <a href=\"https://stackoverflow.com/questions/72930584/firestore-recycleview-image-holder/72930828#72930828\">Glide or Picasso</a> instead of your own thread pool."},{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":0,"creation_date":1659279311,"post_id":73182954,"comment_id":129251864,"body_markdown":"One other note, you seem to be using adapter class variables in this, which is dangerous when making async calls. In general you should only use local variables in `onBindViewHolder` since the class members will be reset when it binds a different row.","body":"One other note, you seem to be using adapter class variables in this, which is dangerous when making async calls. In general you should only use local variables in <code>onBindViewHolder</code> since the class members will be reset when it binds a different row."},{"owner":{"account_id":22248513,"reputation":25,"user_id":16481825,"display_name":"vibhum mohan"},"score":0,"creation_date":1659293517,"post_id":73182954,"comment_id":129255170,"body_markdown":"@TylerV ohh, yes you&#39;re right, I shouldn&#39;t do that I&#39;ll implement local variables in onBindViewHolder and picasso library... thanks for the info : ) I&#39;ll use and tell if it works or not. Thanks a ton!","body":"@TylerV ohh, yes you&#39;re right, I shouldn&#39;t do that I&#39;ll implement local variables in onBindViewHolder and picasso library... thanks for the info : ) I&#39;ll use and tell if it works or not. Thanks a ton!"},{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":0,"creation_date":1659293867,"post_id":73182954,"comment_id":129255242,"body_markdown":"Glad to help. If you use Glide you can also pass a firebase StorageReference to it directly to load (makes the code simpler). There&#39;s some details on that [here](https://stackoverflow.com/questions/48762263/using-firebase-storage-image-with-glide).","body":"Glad to help. If you use Glide you can also pass a firebase StorageReference to it directly to load (makes the code simpler). There&#39;s some details on that <a href=\"https://stackoverflow.com/questions/48762263/using-firebase-storage-image-with-glide\">here</a>."},{"owner":{"account_id":22248513,"reputation":25,"user_id":16481825,"display_name":"vibhum mohan"},"score":0,"creation_date":1659424221,"post_id":73182954,"comment_id":129284997,"body_markdown":"@TylerV thanks for your help, I dont how but without doing any changes code started to work properly... but as you said I changed variables from global to local and used picasso it is now working fine...","body":"@TylerV thanks for your help, I dont how but without doing any changes code started to work properly... but as you said I changed variables from global to local and used picasso it is now working fine..."},{"owner":{"account_id":22248513,"reputation":25,"user_id":16481825,"display_name":"vibhum mohan"},"score":0,"creation_date":1659424474,"post_id":73182954,"comment_id":129285090,"body_markdown":"@TylerV  I have an issue though, every time i add contact it uploads the image data on firestore and then when the add contact activity finishes the main activity is called recycler view fetches data back from the cloud to set to the corresponding contact but the contact image does not appear (I think it is because contact row is created quickly but fetching image from cloud takes time) so thats why i guess pic does not set but when i restart the app that is when main activity is recreated all the contact rows have their images.... how can i fix this ?","body":"@TylerV  I have an issue though, every time i add contact it uploads the image data on firestore and then when the add contact activity finishes the main activity is called recycler view fetches data back from the cloud to set to the corresponding contact but the contact image does not appear (I think it is because contact row is created quickly but fetching image from cloud takes time) so thats why i guess pic does not set but when i restart the app that is when main activity is recreated all the contact rows have their images.... how can i fix this ?"}],"owner":{"account_id":22248513,"reputation":25,"user_id":16481825,"display_name":"vibhum mohan"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659278957,"creation_date":1659267258,"question_id":73182954,"body_markdown":"I am trying to fetch image from my firebase storage of which location is stored in a field of firestore doc, convert it into a bitmap and then set it to recycler view imageview.\r\n\r\nThis is my onBindViewHolder method :\r\n    \r\n    @Override\r\n    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\r\n\r\n        //This is an executor task for fetching image from firebase storage\r\n        setImageTask = Executors.newFixedThreadPool(4);\r\n\r\n        //contactToShow is a contact class object which has id, name and ph no. as fields\r\n        contactToShow = Objects.requireNonNull(contactList.get(position));\r\n        //setting name and ph no in recycler view\r\n        holder.name.setText(contactToShow.getName());\r\n        holder.phoneNumber.setText(contactToShow.getPhoneNumber());\r\n\r\n        //This is for fetching image location from firebase document for corresponding contact\r\n        db.collection(&quot;ContactData&quot;).document(String.valueOf(contactToShow.getId())).get().addOnSuccessListener(new OnSuccessListener&lt;DocumentSnapshot&gt;() {\r\n            @Override\r\n            public void onSuccess(DocumentSnapshot documentSnapshot) {\r\n                //this fetches location and saves it in contactProfileImageLocation\r\n                contactProfileImageLocation = documentSnapshot.getString(&quot;IMAGE LOCATION&quot;);\r\n                Log.d(&quot;AppLogs&quot;, &quot;ImageLocFromAdapter : &quot; + contactProfileImageLocation);\r\n\r\n                //executor class for fetching image from location got from above code\r\n                setImageTask.execute(() -&gt; {\r\n                    \r\n                    //imageRef is a storage reference and storage is a firebase storage instance\r\n                    //These are the following Global Variables :\r\n                    //    FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n                    //   FirebaseStorage storage = FirebaseStorage.getInstance();\r\n                    //Contact contactToShow;\r\n                    //String contactProfileImageLocation;\r\n                    //ExecutorService setImageTask;\r\n                    \r\n                    //setting imageRef\r\n                    imageRef = storage.getReference(contactProfileImageLocation);\r\n                    try {\r\n                        //creating a local file to store downloaded image\r\n                        File localFile = File.createTempFile(&quot;tempFile&quot;,&quot;.jpg&quot;);\r\n                        //downloading image\r\n                        imageRef.getFile(localFile).addOnSuccessListener(new OnSuccessListener&lt;FileDownloadTask.TaskSnapshot&gt;() {\r\n                            @Override\r\n                            public void onSuccess(FileDownloadTask.TaskSnapshot taskSnapshot) {\r\n                                //creating bitmap out of image file on success\r\n                                Bitmap bitmap = BitmapFactory.decodeFile(localFile.getAbsolutePath());\r\n                                //setting bitmap to image view\r\n                                holder.contactImageView.setImageBitmap(bitmap);\r\n                            }\r\n                        });\r\n\r\n                    } catch (IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n\r\n                });\r\n            };\r\n        });\r\n    }\r\n\r\nand I am getting this error :\r\n\r\n\r\n    2022-07-31 16:46:49.872 19977-19977/com.example.contactroom E/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: com.example.contactroom, PID: 19977\r\n    java.lang.NullPointerException: Attempt to invoke virtual method &#39;void android.widget.ImageView.setImageBitmap(android.graphics.Bitmap)&#39; on a null object reference\r\n        at com.example.contactroom.adapter.RecyclerViewAdapter$1$1.onSuccess(RecyclerViewAdapter.java:106)\r\n        at com.example.contactroom.adapter.RecyclerViewAdapter$1$1.onSuccess(RecyclerViewAdapter.java:102)\r\n        at com.google.firebase.storage.StorageTask.lambda$new$0$com-google-firebase-storage-StorageTask(StorageTask.java:123)\r\n        at com.google.firebase.storage.StorageTask$$ExternalSyntheticLambda12.raise(Unknown Source:6)\r\n        at com.google.firebase.storage.TaskListenerImpl.lambda$onInternalStateChanged$2$com-google-firebase-storage-TaskListenerImpl(TaskListenerImpl.java:90)\r\n        at com.google.firebase.storage.TaskListenerImpl$$ExternalSyntheticLambda2.run(Unknown Source:6)\r\n        at android.os.Handler.handleCallback(Handler.java:938)\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)\r\n        at android.os.Looper.loop(Looper.java:223)\r\n        at android.app.ActivityThread.main(ActivityThread.java:7656)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\r\n2022-07-31 16:46:49.893 19977-19977/com.example.contactroom I/Process: Sending signal. PID: 19977 SIG: 9\r\n\r\nMy Debug log is showing :\r\n\r\n2022-07-31 16:19:58.028 19382-19382/com.example.contactroom D/AppLogs: ImageLocFromAdapter : images/1659264211278\r\n\r\nthis means image is getting saved on firebase and location for the corresponding contact is being fetched correctly and getting stored in contactProfileImageLocation\r\n\r\nThen where i am going wrong ?\r\n\r\nViewHolder Class :\r\n\r\n[![ViewHolderClass][1]][1]\r\n\r\n\r\nContactRow.xml :\r\n\r\n[![ContactRow.xml][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/e7I6Y.png\r\n  [2]: https://i.stack.imgur.com/ahgkB.jpg","title":"NPE while setting image bitmap in recycler view","body":"<p>I am trying to fetch image from my firebase storage of which location is stored in a field of firestore doc, convert it into a bitmap and then set it to recycler view imageview.</p>\n<p>This is my onBindViewHolder method :</p>\n<pre><code>@Override\npublic void onBindViewHolder(@NonNull ViewHolder holder, int position) {\n\n    //This is an executor task for fetching image from firebase storage\n    setImageTask = Executors.newFixedThreadPool(4);\n\n    //contactToShow is a contact class object which has id, name and ph no. as fields\n    contactToShow = Objects.requireNonNull(contactList.get(position));\n    //setting name and ph no in recycler view\n    holder.name.setText(contactToShow.getName());\n    holder.phoneNumber.setText(contactToShow.getPhoneNumber());\n\n    //This is for fetching image location from firebase document for corresponding contact\n    db.collection(&quot;ContactData&quot;).document(String.valueOf(contactToShow.getId())).get().addOnSuccessListener(new OnSuccessListener&lt;DocumentSnapshot&gt;() {\n        @Override\n        public void onSuccess(DocumentSnapshot documentSnapshot) {\n            //this fetches location and saves it in contactProfileImageLocation\n            contactProfileImageLocation = documentSnapshot.getString(&quot;IMAGE LOCATION&quot;);\n            Log.d(&quot;AppLogs&quot;, &quot;ImageLocFromAdapter : &quot; + contactProfileImageLocation);\n\n            //executor class for fetching image from location got from above code\n            setImageTask.execute(() -&gt; {\n                \n                //imageRef is a storage reference and storage is a firebase storage instance\n                //These are the following Global Variables :\n                //    FirebaseFirestore db = FirebaseFirestore.getInstance();\n                //   FirebaseStorage storage = FirebaseStorage.getInstance();\n                //Contact contactToShow;\n                //String contactProfileImageLocation;\n                //ExecutorService setImageTask;\n                \n                //setting imageRef\n                imageRef = storage.getReference(contactProfileImageLocation);\n                try {\n                    //creating a local file to store downloaded image\n                    File localFile = File.createTempFile(&quot;tempFile&quot;,&quot;.jpg&quot;);\n                    //downloading image\n                    imageRef.getFile(localFile).addOnSuccessListener(new OnSuccessListener&lt;FileDownloadTask.TaskSnapshot&gt;() {\n                        @Override\n                        public void onSuccess(FileDownloadTask.TaskSnapshot taskSnapshot) {\n                            //creating bitmap out of image file on success\n                            Bitmap bitmap = BitmapFactory.decodeFile(localFile.getAbsolutePath());\n                            //setting bitmap to image view\n                            holder.contactImageView.setImageBitmap(bitmap);\n                        }\n                    });\n\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n\n            });\n        };\n    });\n}\n</code></pre>\n<p>and I am getting this error :</p>\n<pre><code>2022-07-31 16:46:49.872 19977-19977/com.example.contactroom E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: com.example.contactroom, PID: 19977\njava.lang.NullPointerException: Attempt to invoke virtual method 'void android.widget.ImageView.setImageBitmap(android.graphics.Bitmap)' on a null object reference\n    at com.example.contactroom.adapter.RecyclerViewAdapter$1$1.onSuccess(RecyclerViewAdapter.java:106)\n    at com.example.contactroom.adapter.RecyclerViewAdapter$1$1.onSuccess(RecyclerViewAdapter.java:102)\n    at com.google.firebase.storage.StorageTask.lambda$new$0$com-google-firebase-storage-StorageTask(StorageTask.java:123)\n    at com.google.firebase.storage.StorageTask$$ExternalSyntheticLambda12.raise(Unknown Source:6)\n    at com.google.firebase.storage.TaskListenerImpl.lambda$onInternalStateChanged$2$com-google-firebase-storage-TaskListenerImpl(TaskListenerImpl.java:90)\n    at com.google.firebase.storage.TaskListenerImpl$$ExternalSyntheticLambda2.run(Unknown Source:6)\n    at android.os.Handler.handleCallback(Handler.java:938)\n    at android.os.Handler.dispatchMessage(Handler.java:99)\n    at android.os.Looper.loop(Looper.java:223)\n    at android.app.ActivityThread.main(ActivityThread.java:7656)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\n</code></pre>\n<p>2022-07-31 16:46:49.893 19977-19977/com.example.contactroom I/Process: Sending signal. PID: 19977 SIG: 9</p>\n<p>My Debug log is showing :</p>\n<p>2022-07-31 16:19:58.028 19382-19382/com.example.contactroom D/AppLogs: ImageLocFromAdapter : images/1659264211278</p>\n<p>this means image is getting saved on firebase and location for the corresponding contact is being fetched correctly and getting stored in contactProfileImageLocation</p>\n<p>Then where i am going wrong ?</p>\n<p>ViewHolder Class :</p>\n<p><a href=\"https://i.stack.imgur.com/e7I6Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e7I6Y.png\" alt=\"ViewHolderClass\" /></a></p>\n<p>ContactRow.xml :</p>\n<p><a href=\"https://i.stack.imgur.com/ahgkB.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ahgkB.jpg\" alt=\"ContactRow.xml\" /></a></p>\n"},{"tags":["java","android","textview","rss"],"comments":[{"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"score":0,"creation_date":1659296172,"post_id":73184208,"comment_id":129255723,"body_markdown":"What do you mean by &quot;that it&#39;s caused by the app not implementing open stream&quot;? You say you debugged your code. Are the callback methods startElement() and characters() called?","body":"What do you mean by &quot;that it&#39;s caused by the app not implementing open stream&quot;? You say you debugged your code. Are the callback methods startElement() and characters() called?"},{"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"score":0,"creation_date":1659296318,"post_id":73184208,"comment_id":129255751,"body_markdown":"By the way, you shouldn&#39;t concatenate strings. Use StringBuilder for that.","body":"By the way, you shouldn&#39;t concatenate strings. Use StringBuilder for that."}],"owner":{"account_id":19242301,"reputation":49,"user_id":14062055,"display_name":"ReginaldRey"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659278442,"creation_date":1659278442,"question_id":73184208,"body_markdown":"I&#39;m trying to build a news reader app for a project that takes the BBC RSS feed and loads it into a textview. All my code seems to be correct but for some reason the textview doesn&#39;t populate and I have a sneaking suspicion, after debugging it, that it&#39;s caused by the app not implementing open stream. Code is below. Any idea what might be causing the issue?\r\n\r\n   \r\n\r\n     package com.example.finalproject_newsapp;\r\n    \r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    \r\n    import javax.xml.parsers.ParserConfigurationException;\r\n    import javax.xml.parsers.SAXParser;\r\n    import javax.xml.parsers.SAXParserFactory;\r\n    \r\n    import org.xml.sax.Attributes;\r\n    import org.xml.sax.InputSource;\r\n    import org.xml.sax.SAXException;\r\n    import org.xml.sax.XMLReader;\r\n    import org.xml.sax.helpers.DefaultHandler;\r\n    \r\n    import android.os.Bundle;\r\n    import android.widget.ListView;\r\n    import android.widget.TextView;\r\n    \r\n    import java.io.IOException;\r\n    import java.net.MalformedURLException;\r\n    import java.net.URL;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        String rss = &quot;&quot;;\r\n        boolean item = false;\r\n    \r\n        private class RSSHandler extends DefaultHandler {\r\n    \r\n            public void startElement(String uri, String localName, String qName,\r\n                                     Attributes attrs) throws SAXException {\r\n                if (localName.equals(&quot;item&quot;))\r\n                    item = true;\r\n    \r\n                if (!localName.equals(&quot;item&quot;) &amp;&amp; item == true)\r\n                    rss = rss + localName + &quot;: &quot;;\r\n    \r\n            }\r\n    \r\n            public void endElement(String namespaceURI, String localName,\r\n                                   String qName) throws SAXException {\r\n    \r\n            }\r\n    \r\n            public void characters(char[] ch, int start, int length)\r\n                    throws SAXException {\r\n                String cdata = new String(ch, start, length);\r\n                if (item == true)\r\n                    rss = rss + (cdata.trim()).replaceAll(&quot;\\\\s+&quot;, &quot; &quot;) + &quot;\\t&quot;;\r\n    \r\n            }\r\n        }\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            TextView feed = findViewById(R.id.BBC_feed);\r\n    \r\n            try {\r\n                URL rssUrl = new URL(&quot;http://feeds.bbci.co.uk/news/world/us_and_canada/rss.xml&quot;);\r\n                SAXParserFactory factory = SAXParserFactory.newInstance();\r\n                SAXParser saxParser = factory.newSAXParser();\r\n                XMLReader xmlReader = saxParser.getXMLReader();\r\n                RSSHandler rssHandler = new RSSHandler();\r\n                xmlReader.setContentHandler(rssHandler);\r\n                InputSource inputSource = new InputSource(rssUrl.openStream());\r\n                xmlReader.parse(inputSource);\r\n            } catch (MalformedURLException | ParserConfigurationException | SAXException e) {\r\n                e.printStackTrace();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n            feed.setText(rss);\r\n        }\r\n    }","title":"RSS Feed not populating textview","body":"<p>I'm trying to build a news reader app for a project that takes the BBC RSS feed and loads it into a textview. All my code seems to be correct but for some reason the textview doesn't populate and I have a sneaking suspicion, after debugging it, that it's caused by the app not implementing open stream. Code is below. Any idea what might be causing the issue?</p>\n<pre><code> package com.example.finalproject_newsapp;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport javax.xml.parsers.ParserConfigurationException;\nimport javax.xml.parsers.SAXParser;\nimport javax.xml.parsers.SAXParserFactory;\n\nimport org.xml.sax.Attributes;\nimport org.xml.sax.InputSource;\nimport org.xml.sax.SAXException;\nimport org.xml.sax.XMLReader;\nimport org.xml.sax.helpers.DefaultHandler;\n\nimport android.os.Bundle;\nimport android.widget.ListView;\nimport android.widget.TextView;\n\nimport java.io.IOException;\nimport java.net.MalformedURLException;\nimport java.net.URL;\n\npublic class MainActivity extends AppCompatActivity {\n\n    String rss = &quot;&quot;;\n    boolean item = false;\n\n    private class RSSHandler extends DefaultHandler {\n\n        public void startElement(String uri, String localName, String qName,\n                                 Attributes attrs) throws SAXException {\n            if (localName.equals(&quot;item&quot;))\n                item = true;\n\n            if (!localName.equals(&quot;item&quot;) &amp;&amp; item == true)\n                rss = rss + localName + &quot;: &quot;;\n\n        }\n\n        public void endElement(String namespaceURI, String localName,\n                               String qName) throws SAXException {\n\n        }\n\n        public void characters(char[] ch, int start, int length)\n                throws SAXException {\n            String cdata = new String(ch, start, length);\n            if (item == true)\n                rss = rss + (cdata.trim()).replaceAll(&quot;\\\\s+&quot;, &quot; &quot;) + &quot;\\t&quot;;\n\n        }\n    }\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        TextView feed = findViewById(R.id.BBC_feed);\n\n        try {\n            URL rssUrl = new URL(&quot;http://feeds.bbci.co.uk/news/world/us_and_canada/rss.xml&quot;);\n            SAXParserFactory factory = SAXParserFactory.newInstance();\n            SAXParser saxParser = factory.newSAXParser();\n            XMLReader xmlReader = saxParser.getXMLReader();\n            RSSHandler rssHandler = new RSSHandler();\n            xmlReader.setContentHandler(rssHandler);\n            InputSource inputSource = new InputSource(rssUrl.openStream());\n            xmlReader.parse(inputSource);\n        } catch (MalformedURLException | ParserConfigurationException | SAXException e) {\n            e.printStackTrace();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n        feed.setText(rss);\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":25919932,"reputation":1,"user_id":19642751,"display_name":"Mohammad Shahnawaz"},"score":0,"creation_date":1659281909,"post_id":73184129,"comment_id":129252528,"body_markdown":"I did some debugging and if I click resume something like 20 times eventually the debugger goes back to the proper place and does the debugging properly","body":"I did some debugging and if I click resume something like 20 times eventually the debugger goes back to the proper place and does the debugging properly"},{"owner":{"account_id":25919932,"reputation":1,"user_id":19642751,"display_name":"Mohammad Shahnawaz"},"score":0,"creation_date":1659282450,"post_id":73184129,"comment_id":129252667,"body_markdown":"When I uncheck async stack traces I don&#39;t get the error anymore but IntelliJ still opens multiple files that I have to skip through for me to reach the debugger","body":"When I uncheck async stack traces I don&#39;t get the error anymore but IntelliJ still opens multiple files that I have to skip through for me to reach the debugger"},{"owner":{"account_id":25919932,"reputation":1,"user_id":19642751,"display_name":"Mohammad Shahnawaz"},"score":0,"creation_date":1659282755,"post_id":73184129,"comment_id":129252766,"body_markdown":"Nevermind I was being an idiot, java was being programmed to treat any exception as a breakpoint for some reason","body":"Nevermind I was being an idiot, java was being programmed to treat any exception as a breakpoint for some reason"}],"owner":{"account_id":25919932,"reputation":1,"user_id":19642751,"display_name":"Mohammad Shahnawaz"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659277703,"creation_date":1659277703,"question_id":73184129,"body_markdown":"Whenever I try to use the debugger in IntelliJ this error pops up and it opens up the java file FileInputStream. I found this ticket https://stackoverflow.com/questions/65613084/java-hotspottm-64-bit-server-vm-warning-sharing-is-only-supported-for-boot-lo but changing the async setting didn&#39;t work for me. I&#39;m running java and JDK version 15.0.2. I haven&#39;t updated my java or IntelliJ at all recently but this error started showin up anyways","title":"Java HotSpot(TM) 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended error","body":"<p>Whenever I try to use the debugger in IntelliJ this error pops up and it opens up the java file FileInputStream. I found this ticket <a href=\"https://stackoverflow.com/questions/65613084/java-hotspottm-64-bit-server-vm-warning-sharing-is-only-supported-for-boot-lo\">Java HotSpot(TM) 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended</a> but changing the async setting didn't work for me. I'm running java and JDK version 15.0.2. I haven't updated my java or IntelliJ at all recently but this error started showin up anyways</p>\n"},{"tags":["java","spring","spring-boot","jpa","transactions"],"answers":[{"tags":[],"owner":{"account_id":12142871,"reputation":97,"user_id":8866086,"display_name":"sjy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659277312,"creation_date":1659056702,"answer_id":73160626,"question_id":73158995,"body_markdown":"Spring AOP same class method will not works . this.method1(); // @Transactional will not work.\r\n\r\nmore explanation in this thread https://stackoverflow.com/questions/42921388/same-class-invoke-not-effective-in-spring-aop-cglib","title":"How to use different spring transactions for different methods","body":"<p>Spring AOP same class method will not works . this.method1(); // @Transactional will not work.</p>\n<p>more explanation in this thread <a href=\"https://stackoverflow.com/questions/42921388/same-class-invoke-not-effective-in-spring-aop-cglib\">Same class invoke NOT effective in Spring AOP cglib</a></p>\n"},{"tags":[],"owner":{"account_id":25921954,"reputation":1,"user_id":19644401,"display_name":"youxiaxiaomage"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659059835,"creation_date":1659059835,"answer_id":73160880,"question_id":73158995,"body_markdown":"u can register different transactionManager, and ur services use its @Transactional(tx=&quot;xxx&quot;)","title":"How to use different spring transactions for different methods","body":"<p>u can register different transactionManager, and ur services use its @Transactional(tx=&quot;xxx&quot;)</p>\n"}],"owner":{"account_id":14502332,"reputation":27,"user_id":10477247,"display_name":"Yoel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1659277312,"creation_date":1659041257,"question_id":73158995,"body_markdown":"I am having a problem with the persistence of a method that is calling another methods to do persistence at my oracle db.\r\n\r\nI will try to explain as better as i can to make more easy to you guys, I hope that you can help me.\r\n\r\nThis is my scenario.\r\n\r\nI have a component, in which i am calling a method that looks like that:\r\n\r\n    public void execute() throws Exception {\r\n   \t\tservice1.method1(); // @Transactional\r\n        service2.method2(); // @Transactional(propagation = Propagation.REQUIRES_NEW)\r\n   \t\tservice3.method3(); // @Transactional(propagation = Propagation.REQUIRES_NEW)\r\n   \t}\r\n\r\nThe thing is that i need to persist every method separately in case that one of them gets an exception, the others could be persisted.\r\n\r\nRight now the problem i have is that i am having a deadlock and my code stills running until i stop my application, and the transactions never end.\r\n\r\nI tried so many things, but i am trying without the needed knowledge to work with this spring transactions and i do not know what more i can try to do.\r\n\r\nCan you bring me some light on this dark hole where i am right now?\r\n\r\nReally, thank you.\r\n\r\n","title":"How to use different spring transactions for different methods","body":"<p>I am having a problem with the persistence of a method that is calling another methods to do persistence at my oracle db.</p>\n<p>I will try to explain as better as i can to make more easy to you guys, I hope that you can help me.</p>\n<p>This is my scenario.</p>\n<p>I have a component, in which i am calling a method that looks like that:</p>\n<pre><code>public void execute() throws Exception {\n    service1.method1(); // @Transactional\n    service2.method2(); // @Transactional(propagation = Propagation.REQUIRES_NEW)\n    service3.method3(); // @Transactional(propagation = Propagation.REQUIRES_NEW)\n}\n</code></pre>\n<p>The thing is that i need to persist every method separately in case that one of them gets an exception, the others could be persisted.</p>\n<p>Right now the problem i have is that i am having a deadlock and my code stills running until i stop my application, and the transactions never end.</p>\n<p>I tried so many things, but i am trying without the needed knowledge to work with this spring transactions and i do not know what more i can try to do.</p>\n<p>Can you bring me some light on this dark hole where i am right now?</p>\n<p>Really, thank you.</p>\n"},{"tags":["java","datetime","jodatime"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1659112917,"post_id":73167265,"comment_id":129223651,"body_markdown":"Isnt it a locale problem? Your string is in English, so if your default locale isnt, it will likely cause parsing to fail. Does `DateTimeFormat.forPattern(&quot;EEE MMM dd HH:mm:ss z yyyy&quot;).withLocale(Locale.ROOT)` work for you? Similar: [java DateTimeFormatterBuilder fails on testtime \\[duplicate\\]](https://stackoverflow.com/questions/50526234/java-datetimeformatterbuilder-fails-on-testtime).","body":"Isnt it a locale problem? Your string is in English, so if your default locale isnt, it will likely cause parsing to fail. Does <code>DateTimeFormat.forPattern(&quot;EEE MMM dd HH:mm:ss z yyyy&quot;).withLocale(Locale.ROOT)</code> work for you? Similar: <a href=\"https://stackoverflow.com/questions/50526234/java-datetimeformatterbuilder-fails-on-testtime\">java DateTimeFormatterBuilder fails on testtime &#91;duplicate&#93;</a>."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":3,"creation_date":1659113209,"post_id":73167265,"comment_id":129223765,"body_markdown":"Please, except if for use with a legacy API that you cannot change, do not create a `java.util.Date`. Its for your own sake. That class is so poorly designed, nothing we want to deal with. Either stick with Joda-Time or follow the official Joda-Time recommendation and migrate to java.time.","body":"Please, except if for use with a legacy API that you cannot change, do not create a <code>java.util.Date</code>. Its for your own sake. That class is so poorly designed, nothing we want to deal with. Either stick with Joda-Time or follow the official Joda-Time recommendation and migrate to java.time."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1659171788,"post_id":73167265,"comment_id":129233654,"body_markdown":"Similar: [Joda-Time invalid format \\[duplicate\\]](https://stackoverflow.com/questions/35086527/joda-time-invalid-format). Unfortunately that one is unanswered.","body":"Similar: <a href=\"https://stackoverflow.com/questions/35086527/joda-time-invalid-format\">Joda-Time invalid format &#91;duplicate&#93;</a>. Unfortunately that one is unanswered."}],"answers":[{"tags":[],"owner":{"account_id":15708211,"reputation":1,"user_id":11334371,"display_name":"Samad Soleimani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659277037,"creation_date":1659277037,"answer_id":73184054,"question_id":73167265,"body_markdown":"You can use a code like this :\r\n\r\n    String time = &quot;Fri Jul 29 12:56:35 UTC 2022&quot;;\r\n\tDate date = new Date(time);\r\n\tlong millis = date.getTime();\r\n\tSystem.out.println(millis);","title":"How to convert a custom Date Time string to milliseconds using Joda Time?","body":"<p>You can use a code like this :</p>\n<pre><code>String time = &quot;Fri Jul 29 12:56:35 UTC 2022&quot;;\nDate date = new Date(time);\nlong millis = date.getTime();\nSystem.out.println(millis);\n</code></pre>\n"}],"owner":{"account_id":14402529,"reputation":911,"user_id":10403679,"display_name":"Amine"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1659277037,"creation_date":1659100036,"question_id":73167265,"body_markdown":"How can I create an instance of `java.util.Date` out of a custom date time string? \r\nThis is what I tried so far:\r\n\r\nGiven I have the this custom date time string:\r\n\r\n    Fri Jul 29 12:56:35 UTC 2022\r\n\r\nUsing Joda-Time in the following piece of code:\r\n\r\n    String time = &quot;Fri Jul 29 12:56:35 UTC 2022&quot;;\r\n    DateTimeFormatter df = DateTimeFormat.forPattern(&quot;EEE MMM dd HH:mm:ss z yyyy&quot;);\r\n    long millis = df.parseMillis(time);\r\n\r\nI get the following exception:\r\n\r\n    java.lang.IllegalArgumentException: Invalid format: &quot;Fri Jul 29 12:56:35 UTC 2022&quot; is malformed at &quot; UTC 2022&quot;\r\n            at org.joda.time.format.DateTimeFormatter.parseMillis(DateTimeFormatter.java:644)","title":"How to convert a custom Date Time string to milliseconds using Joda Time?","body":"<p>How can I create an instance of <code>java.util.Date</code> out of a custom date time string?\nThis is what I tried so far:</p>\n<p>Given I have the this custom date time string:</p>\n<pre><code>Fri Jul 29 12:56:35 UTC 2022\n</code></pre>\n<p>Using Joda-Time in the following piece of code:</p>\n<pre><code>String time = &quot;Fri Jul 29 12:56:35 UTC 2022&quot;;\nDateTimeFormatter df = DateTimeFormat.forPattern(&quot;EEE MMM dd HH:mm:ss z yyyy&quot;);\nlong millis = df.parseMillis(time);\n</code></pre>\n<p>I get the following exception:</p>\n<pre><code>java.lang.IllegalArgumentException: Invalid format: &quot;Fri Jul 29 12:56:35 UTC 2022&quot; is malformed at &quot; UTC 2022&quot;\n        at org.joda.time.format.DateTimeFormatter.parseMillis(DateTimeFormatter.java:644)\n</code></pre>\n"},{"tags":["java","exception","try-catch"],"comments":[{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":2,"creation_date":1659209669,"post_id":73178494,"comment_id":129241614,"body_markdown":"You can remove the `catch(IOException e) { throw e; }` part if you don&#39;t want to handle potential IOException here and want it to propagate from your method. Just don&#39;t forget to add `throws IOException` in method declaration (but you should already have it, otherwise `throw e;` wouldn&#39;t compile).","body":"You can remove the <code>catch(IOException e) { throw e; }</code> part if you don&#39;t want to handle potential IOException here and want it to propagate from your method. Just don&#39;t forget to add <code>throws IOException</code> in method declaration (but you should already have it, otherwise <code>throw e;</code> wouldn&#39;t compile)."}],"answers":[{"tags":[],"owner":{"account_id":45934,"reputation":203659,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1659276953,"creation_date":1659210315,"answer_id":73178600,"question_id":73178494,"body_markdown":"A `catch` block is not *required* in a [try-with-resources](https://www.baeldung.com/java-try-with-resources) statement. You could write the following, which would mean exactly the same as your original code:\r\n\r\n    try (BufferedReader reader = new BufferedReader(\r\n            new InputStreamReader(url.openStream()))) {\r\n        // do something\r\n    }\r\n\r\nSo, you can leave out the `catch` block, if all you ever do there is immediately throw the same exception again.\r\n\r\nYou *do* want the `try` block however, so that the `BufferedReader` and underlying stream(s) are automatically closed at the end of the block.\r\n\r\n&gt; Is this a good pattern to catch and instantly throw?\r\n\r\nNo, catching and immediately re-throwing the same exception does not add anything useful.","title":"Can I omit try-catch?","body":"<p>A <code>catch</code> block is not <em>required</em> in a <a href=\"https://www.baeldung.com/java-try-with-resources\" rel=\"nofollow noreferrer\">try-with-resources</a> statement. You could write the following, which would mean exactly the same as your original code:</p>\n<pre><code>try (BufferedReader reader = new BufferedReader(\n        new InputStreamReader(url.openStream()))) {\n    // do something\n}\n</code></pre>\n<p>So, you can leave out the <code>catch</code> block, if all you ever do there is immediately throw the same exception again.</p>\n<p>You <em>do</em> want the <code>try</code> block however, so that the <code>BufferedReader</code> and underlying stream(s) are automatically closed at the end of the block.</p>\n<blockquote>\n<p>Is this a good pattern to catch and instantly throw?</p>\n</blockquote>\n<p>No, catching and immediately re-throwing the same exception does not add anything useful.</p>\n"},{"tags":[],"owner":{"account_id":5018541,"reputation":12092,"user_id":4032703,"accept_rate":100,"display_name":"EJoshuaS - Stand with Ukraine"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659240785,"creation_date":1659215458,"answer_id":73179076,"question_id":73178494,"body_markdown":"To add to @Jesper&#39;s excellent answer, you do want to include the `try` block so that the BufferedReader will be closed right away. If you don&#39;t do this, it&#39;ll [eventually be closed when the object is garbage collected](https://stackoverflow.com/questions/18510031/will-stream-classes-or-connections-considered-as-a-resource-leak-in-java), so it isn&#39;t *technically* a resource leak in the sense that the resources would eventually be reclaimed; however, the &quot;eventually&quot; part is potentially problematic because there are no guarantees as to exactly when that&#39;ll happen. Thus, a bigger issue is whether this would create race conditions if it&#39;s using a resource that needs to be reused eventually. \r\n\r\nI&#39;m not very familiar with the implementation details of that exact class, so this is somewhat speculative, but one example of an issue you can run into with some classes that perform network calls if you fail to return resources to the operating system promptly is port exhaustion.\r\n\r\nBy way of another example, if you are modifying a file, the file could remain locked until the GC happens to release the file lock by cleaning up the relevant object.","title":"Can I omit try-catch?","body":"<p>To add to @Jesper's excellent answer, you do want to include the <code>try</code> block so that the BufferedReader will be closed right away. If you don't do this, it'll <a href=\"https://stackoverflow.com/questions/18510031/will-stream-classes-or-connections-considered-as-a-resource-leak-in-java\">eventually be closed when the object is garbage collected</a>, so it isn't <em>technically</em> a resource leak in the sense that the resources would eventually be reclaimed; however, the &quot;eventually&quot; part is potentially problematic because there are no guarantees as to exactly when that'll happen. Thus, a bigger issue is whether this would create race conditions if it's using a resource that needs to be reused eventually.</p>\n<p>I'm not very familiar with the implementation details of that exact class, so this is somewhat speculative, but one example of an issue you can run into with some classes that perform network calls if you fail to return resources to the operating system promptly is port exhaustion.</p>\n<p>By way of another example, if you are modifying a file, the file could remain locked until the GC happens to release the file lock by cleaning up the relevant object.</p>\n"}],"owner":{"account_id":19819644,"reputation":83,"user_id":14516525,"display_name":"floatfoo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":114,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73178600,"answer_count":2,"score":0,"last_activity_date":1659276953,"creation_date":1659209118,"question_id":73178494,"body_markdown":"I want to fetch an HTML page and read in with BufferedReader. So I use try-with-resources to open it handles *IOException* this way:\r\n\r\n    try(BufferedReader reader = new BufferedReader(new InputStreamReader(url.openStream()))) {\r\n            \r\n        } catch(IOException e) {\r\n            throw e;\r\n        }\r\nIs this a good pattern to catch and instantly throw? And what if I omit try at all and state that function throws IOException? If then any potentional memory leak?\r\nMuch appreciate any advice!","title":"Can I omit try-catch?","body":"<p>I want to fetch an HTML page and read in with BufferedReader. So I use try-with-resources to open it handles <em>IOException</em> this way:</p>\n<pre><code>try(BufferedReader reader = new BufferedReader(new InputStreamReader(url.openStream()))) {\n        \n    } catch(IOException e) {\n        throw e;\n    }\n</code></pre>\n<p>Is this a good pattern to catch and instantly throw? And what if I omit try at all and state that function throws IOException? If then any potentional memory leak?\nMuch appreciate any advice!</p>\n"},{"tags":["java","date"],"comments":[{"owner":{"account_id":45934,"reputation":203659,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":1,"creation_date":1308552825,"post_id":6406470,"comment_id":7514100,"body_markdown":"Note that the question about parsing ISO 8601 dates is a frequently asked and answered question. Search for &quot;Java ISO 8601 date&quot; or something similar and you&#39;ll find many answers.","body":"Note that the question about parsing ISO 8601 dates is a frequently asked and answered question. Search for &quot;Java ISO 8601 date&quot; or something similar and you&#39;ll find many answers."},{"owner":{"account_id":45934,"reputation":203659,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1308552909,"post_id":6406470,"comment_id":7514113,"body_markdown":"For example: http://stackoverflow.com/questions/6279647/converting-a-string-to-date-almost-done/6280206#6280206","body":"For example: <a href=\"http://stackoverflow.com/questions/6279647/converting-a-string-to-date-almost-done/6280206#6280206\" title=\"converting a string to date almost done\">stackoverflow.com/questions/6279647/&hellip;</a>"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1613510514,"post_id":6406470,"comment_id":117095904,"body_markdown":"For anyone reading this question today or tomorrow I recommend you dont use `SimpleDateFormat`. That class is notoriously troublesome and long outdated. Instead just use `OffsetDateTime` from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/).","body":"For anyone reading this question today or tomorrow I recommend you dont use <code>SimpleDateFormat</code>. That class is notoriously troublesome and long outdated. Instead just use <code>OffsetDateTime</code> from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>."}],"answers":[{"tags":[],"owner":{"account_id":101585,"reputation":107721,"user_id":273200,"accept_rate":100,"display_name":"Bala R"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1308539323,"creation_date":1308539323,"answer_id":6406484,"question_id":6406470,"body_markdown":"You can try\r\n\r\n    String format = &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ssz&quot;;\r\n\r\nReference : from [Javadoc][1]\r\n\r\n&gt; Text can be quoted using single quotes\r\n&gt; (&#39;) to avoid interpretation.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html","title":"java SimpleDateFormat","body":"<p>You can try</p>\n\n<pre><code>String format = \"yyyy-MM-dd'T'HH:mm:ssz\";\n</code></pre>\n\n<p>Reference : from <a href=\"http://download.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html\" rel=\"noreferrer\">Javadoc</a></p>\n\n<blockquote>\n  <p>Text can be quoted using single quotes\n  (') to avoid interpretation.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":85376,"reputation":15716,"user_id":238052,"accept_rate":66,"display_name":"gmhk"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1308539434,"creation_date":1308539434,"answer_id":6406493,"question_id":6406470,"body_markdown":"    String testDate = &quot;2007-11-02T14:46:03+01:00&quot;;\r\n    DateFormat formatter = new SimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ssz&quot;);\r\n    Date date = formatter.parse(testDate);\r\n    System.out.println(date);\r\n\r\n\r\nYou can try similar to the above\r\n\r\nYou can use following [link][1] for reference\r\n\r\n\r\n  [1]: http://javatechniques.com/blog/dateformat-and-simpledateformat-examples/","title":"java SimpleDateFormat","body":"<pre><code>String testDate = \"2007-11-02T14:46:03+01:00\";\nDateFormat formatter = new SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ssz\");\nDate date = formatter.parse(testDate);\nSystem.out.println(date);\n</code></pre>\n\n<p>You can try similar to the above</p>\n\n<p>You can use following <a href=\"http://javatechniques.com/blog/dateformat-and-simpledateformat-examples/\" rel=\"nofollow\">link</a> for reference</p>\n"},{"tags":[],"owner":{"account_id":200630,"reputation":27386,"user_id":446591,"accept_rate":65,"display_name":"Brad Mace"},"down_vote_count":1,"up_vote_count":6,"is_accepted":true,"score":5,"last_activity_date":1308551089,"creation_date":1308540184,"answer_id":6406547,"question_id":6406470,"body_markdown":"The time you&#39;re trying to parse appears to be in [ISO 8601 format](http://en.wikipedia.org/wiki/ISO_8601#Combined_date_and_time_representations). `SimpleDateFormat` unfortunately doesn&#39;t support all the same timezone specifiers as ISO 8601. If you want to be able to properly handle all the forms specified in the ISO, the best thing to do is use [Joda time](http://joda-time.sourceforge.net/quickstart.html).\r\n\r\nThis example is straight out of the [user guide](http://joda-time.sourceforge.net/userguide.html#Working_with_DateTime):\r\n\r\n    DateTime dt = new DateTime(&quot;2004-12-13T21:39:45.618-08:00&quot;);","title":"java SimpleDateFormat","body":"<p>The time you're trying to parse appears to be in <a href=\"http://en.wikipedia.org/wiki/ISO_8601#Combined_date_and_time_representations\" rel=\"noreferrer\">ISO 8601 format</a>. <code>SimpleDateFormat</code> unfortunately doesn't support all the same timezone specifiers as ISO 8601. If you want to be able to properly handle all the forms specified in the ISO, the best thing to do is use <a href=\"http://joda-time.sourceforge.net/quickstart.html\" rel=\"noreferrer\">Joda time</a>.</p>\n\n<p>This example is straight out of the <a href=\"http://joda-time.sourceforge.net/userguide.html#Working_with_DateTime\" rel=\"noreferrer\">user guide</a>:</p>\n\n<pre><code>DateTime dt = new DateTime(\"2004-12-13T21:39:45.618-08:00\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":396011,"reputation":706,"user_id":759300,"accept_rate":100,"display_name":"j2gl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1351222674,"creation_date":1351222674,"answer_id":13080400,"question_id":6406470,"body_markdown":"If you don&#39;t care about the time zone, you can use this method.\r\n    \r\n      public static Date convertToDate(String strDate) throws ParseException {\r\n        Date date = null;\r\n        if (strDate != null) {\r\n          SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss&quot;);\r\n          date = sdf.parse(strDate);\r\n        }\r\n        return date;\r\n      }\r\n\r\nI don&#39;t know if it&#39;s still useful for you, but I encounter with the same problem now, and after a little I come up with this.","title":"java SimpleDateFormat","body":"<p>If you don't care about the time zone, you can use this method.</p>\n\n<pre><code>  public static Date convertToDate(String strDate) throws ParseException {\n    Date date = null;\n    if (strDate != null) {\n      SimpleDateFormat sdf = new SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ss\");\n      date = sdf.parse(strDate);\n    }\n    return date;\n  }\n</code></pre>\n\n<p>I don't know if it's still useful for you, but I encounter with the same problem now, and after a little I come up with this.</p>\n"},{"tags":[],"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1613510395,"creation_date":1613510395,"answer_id":66232341,"question_id":6406470,"body_markdown":"## No formatter needed\r\n\r\nIts time to post the modern answer, the answer that uses java.time, the modern Java date and time API. Your format is ISO 8601, and the classes of java.time generally parse the most common ISO 8601 variants as their default, that is, without any explicit formatter.\r\n\r\n\t\tString date =&quot;2007-11-02T14:46:03+01:00&quot;;\r\n\t\tOffsetDateTime dateTime = OffsetDateTime.parse(date);\r\n\t\tSystem.out.println(dateTime);\r\n\r\nOutput is:\r\n\r\n&gt; 2007-11-02T14:46:03+01:00\r\n\r\nYes, java.time also gives ISO 8601 format back from the `toString` methods, implicitly called when we print an object.\r\n\r\n## Enclose literal letters in single quotes\r\n\r\nTo answer the question as asked, you may enclose letters in single quotes to make `DateTimeFormatter` take them as literal letters rather than format specifiers. There would be no point whatsoever in doing the following in real code, but for the sake of demonstration:\r\n\r\n\t\tDateTimeFormatter isoFormatter\r\n\t\t\t\t= DateTimeFormatter.ofPattern(&quot;uuuu-MM-dd&#39;T&#39;HH:mm:ssXXX&quot;);\r\n\t\tString date =&quot;2007-11-02T14:46:03+01:00&quot;;\r\n\t\tOffsetDateTime dateTime = OffsetDateTime.parse(date, isoFormatter);\r\n\r\nThe result is the same as before.\r\n\r\n## Link\r\n\r\n[Oracle tutorial: Date Time](https://docs.oracle.com/javase/tutorial/datetime/) explaining how to use java.time.\r\n","title":"java SimpleDateFormat","body":"<h2>No formatter needed</h2>\n<p>Its time to post the modern answer, the answer that uses java.time, the modern Java date and time API. Your format is ISO 8601, and the classes of java.time generally parse the most common ISO 8601 variants as their default, that is, without any explicit formatter.</p>\n<pre><code>    String date =&quot;2007-11-02T14:46:03+01:00&quot;;\n    OffsetDateTime dateTime = OffsetDateTime.parse(date);\n    System.out.println(dateTime);\n</code></pre>\n<p>Output is:</p>\n<blockquote>\n<p>2007-11-02T14:46:03+01:00</p>\n</blockquote>\n<p>Yes, java.time also gives ISO 8601 format back from the <code>toString</code> methods, implicitly called when we print an object.</p>\n<h2>Enclose literal letters in single quotes</h2>\n<p>To answer the question as asked, you may enclose letters in single quotes to make <code>DateTimeFormatter</code> take them as literal letters rather than format specifiers. There would be no point whatsoever in doing the following in real code, but for the sake of demonstration:</p>\n<pre><code>    DateTimeFormatter isoFormatter\n            = DateTimeFormatter.ofPattern(&quot;uuuu-MM-dd'T'HH:mm:ssXXX&quot;);\n    String date =&quot;2007-11-02T14:46:03+01:00&quot;;\n    OffsetDateTime dateTime = OffsetDateTime.parse(date, isoFormatter);\n</code></pre>\n<p>The result is the same as before.</p>\n<h2>Link</h2>\n<p><a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">Oracle tutorial: Date Time</a> explaining how to use java.time.</p>\n"},{"tags":[],"owner":{"account_id":21913345,"reputation":75,"user_id":16197546,"display_name":"Dhruv sahu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659276307,"creation_date":1659276307,"answer_id":73183966,"question_id":6406470,"body_markdown":"\r\nBelow format code works for me ! \r\n\r\nBut the code converts the date : 20220722 to date : 22-July-2022\r\n\r\nwhere tradeDate = 20220722\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5tIEU.png","title":"java SimpleDateFormat","body":"<p>Below format code works for me !</p>\n<p>But the code converts the date : 20220722 to date : 22-July-2022</p>\n<p>where tradeDate = 20220722</p>\n<p><a href=\"https://i.stack.imgur.com/5tIEU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5tIEU.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":405967,"reputation":22581,"user_id":775187,"accept_rate":71,"display_name":"user775187"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66070,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":6406547,"answer_count":6,"score":13,"last_activity_date":1659276307,"creation_date":1308539081,"question_id":6406470,"body_markdown":"in Java, how to parse a date string that contains a letter that does not represent a pattern?\r\n&lt;pre&gt;\r\n&quot;2007-11-02T14:46:03+01:00&quot;\r\n&lt;/pre&gt;\r\n&lt;pre&gt;\r\nString date =&quot;2007-11-02T14:46:03+01:00&quot;;\r\nString format = &quot;yyyy-MM-ddTHH:mm:ssz&quot;;\r\nnew SimpleDateFormat(format).parse(date);\r\n\r\nException in thread &quot;main&quot; java.lang.IllegalArgumentException: Illegal pattern character &#39;T&#39;\r\n\tat java.text.SimpleDateFormat.compile(SimpleDateFormat.java:769)\r\n\tat java.text.SimpleDateFormat.initialize(SimpleDateFormat.java:576)\r\n\tat java.text.SimpleDateFormat.&lt;init&gt;(SimpleDateFormat.java:501)\r\n\tat java.text.SimpleDateFormat.&lt;init&gt;(SimpleDateFormat.java:476)\r\n&lt;/pre&gt;","title":"java SimpleDateFormat","body":"<p>in Java, how to parse a date string that contains a letter that does not represent a pattern?</p>\n\n<pre>\n\"2007-11-02T14:46:03+01:00\"\n</pre>\n\n<pre>\nString date =\"2007-11-02T14:46:03+01:00\";\nString format = \"yyyy-MM-ddTHH:mm:ssz\";\nnew SimpleDateFormat(format).parse(date);\n\nException in thread \"main\" java.lang.IllegalArgumentException: Illegal pattern character 'T'\n    at java.text.SimpleDateFormat.compile(SimpleDateFormat.java:769)\n    at java.text.SimpleDateFormat.initialize(SimpleDateFormat.java:576)\n    at java.text.SimpleDateFormat.(SimpleDateFormat.java:501)\n    at java.text.SimpleDateFormat.(SimpleDateFormat.java:476)\n</pre>\n"},{"tags":["java","spring-boot","controller-advice"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1659188323,"post_id":73171774,"comment_id":129236828,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":25925921,"reputation":11,"user_id":19647807,"display_name":"Shazman Malik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659276150,"creation_date":1659215120,"answer_id":73179047,"question_id":73171774,"body_markdown":"We can keep v1 and v2 API in different controllers in different packages. Then we should be able to use basePackages param of @RestControllerAdvice\r\n\r\n\r\n\r\n    basepackage.controller\r\n       - v1\r\n          - ControllerV1.java\r\n       \r\n    \r\n         @GetMapping(value = &quot;v1/user/{id}&quot;)\r\n            public UserDetails getUser(\r\n                    @PathVariable(&quot;id&quot;) String userId\r\n            ) throws NotFoundException {\r\n                return userService.getUserDetails(userId);\r\n            }\r\n    \r\n       - v2\r\n          - ControllerV2.java\r\n    \r\n        @GetMapping(value = &quot;v2/user/{id}&quot;)\r\n            public UserDetails getUser(\r\n                    @PathVariable(&quot;id&quot;) String userId\r\n            ) throws NotFoundException {\r\n                return userService.getUserDetails(userId);\r\n            }\r\n    \r\n        @RestControllerAdvice(basePackages = &quot;path-to-v1-controller-package&quot;)\r\n        @Log4j2\r\n        public class V1APIExceptionHandler extends ResponseEntityExceptionHandler {\r\n            \r\n            @ExceptionHandler(NotFoundException.class)\r\n            @ResponseStatus(HttpStatus.NOT_FOUND)\r\n            public V1ErrorResponse handleNotFoundException(NotFoundException ex) {\r\n                    return V1ErrorResponse.builder().error(ex.getMessage()).build();\r\n                }\r\n            }\r\n        \r\n        \r\n        @RestControllerAdvice(basePackages = &quot;path-to-v1-controller-package&quot;)\r\n        @Log4j2\r\n        public class V2APIExceptionHandler extends ResponseEntityExceptionHandler {\r\n            \r\n            @ExceptionHandler(NotFoundException.class)\r\n            @ResponseStatus(HttpStatus.NOT_FOUND)\r\n            public V2ErrorResponse handleNotFoundException(NotFoundException ex) {\r\n                    return V2ErrorResponse.builder().error(ex.getMessage()).build();\r\n                }\r\n            }\r\n\r\n","title":"Multiple rest advisor in spring boot based on API path","body":"<p>We can keep v1 and v2 API in different controllers in different packages. Then we should be able to use basePackages param of @RestControllerAdvice</p>\n<pre><code>basepackage.controller\n   - v1\n      - ControllerV1.java\n   \n\n     @GetMapping(value = &quot;v1/user/{id}&quot;)\n        public UserDetails getUser(\n                @PathVariable(&quot;id&quot;) String userId\n        ) throws NotFoundException {\n            return userService.getUserDetails(userId);\n        }\n\n   - v2\n      - ControllerV2.java\n\n    @GetMapping(value = &quot;v2/user/{id}&quot;)\n        public UserDetails getUser(\n                @PathVariable(&quot;id&quot;) String userId\n        ) throws NotFoundException {\n            return userService.getUserDetails(userId);\n        }\n\n    @RestControllerAdvice(basePackages = &quot;path-to-v1-controller-package&quot;)\n    @Log4j2\n    public class V1APIExceptionHandler extends ResponseEntityExceptionHandler {\n        \n        @ExceptionHandler(NotFoundException.class)\n        @ResponseStatus(HttpStatus.NOT_FOUND)\n        public V1ErrorResponse handleNotFoundException(NotFoundException ex) {\n                return V1ErrorResponse.builder().error(ex.getMessage()).build();\n            }\n        }\n    \n    \n    @RestControllerAdvice(basePackages = &quot;path-to-v1-controller-package&quot;)\n    @Log4j2\n    public class V2APIExceptionHandler extends ResponseEntityExceptionHandler {\n        \n        @ExceptionHandler(NotFoundException.class)\n        @ResponseStatus(HttpStatus.NOT_FOUND)\n        public V2ErrorResponse handleNotFoundException(NotFoundException ex) {\n                return V2ErrorResponse.builder().error(ex.getMessage()).build();\n            }\n        }\n</code></pre>\n"}],"owner":{"account_id":25925921,"reputation":11,"user_id":19647807,"display_name":"Shazman Malik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":268,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1659276150,"creation_date":1659136217,"question_id":73171774,"body_markdown":"\r\nI have a spring boot application currently in production. It has APIs which return the error in this format\r\n\r\n    {\r\n       &quot;success&quot;: true,\r\n       &quot;error&quot;: &quot;Error message&quot; \r\n    }\r\n\r\nThis error response I&#39;m handling through the controller advisor.\r\n\r\nI&#39;m creating v2 APIs and wanted to change the error response structure for the newer APIs. I want to write code in such a way, that It can have two rest advisors one is handling errors for the older APIs, and the other is for v2 APIs. We can have multiple rest advisors in Spring boot and we can set the order of execution using @Order annotation but for my use case, I want to get it executed based on the API path, If it has v2 it should be executed first otherwise it should get skipped.\r\n\r\n\r\n    @RestControllerAdvice(annotations = RestController.class)\r\n    @Log4j2\r\n    public class V1APIExceptionHandler extends ResponseEntityExceptionHandler {\r\n        \r\n        @ExceptionHandler(NotFoundException.class)\r\n        @ResponseStatus(HttpStatus.NOT_FOUND)\r\n        public V1ErrorResponse handleNotFoundException(NotFoundException ex) {\r\n                return V1ErrorResponse.builder().error(ex.getMessage()).build();\r\n            }\r\n        }\r\n\r\n\r\n    @RestControllerAdvice(annotations = RestController.class)\r\n    @Log4j2\r\n    public class V2APIExceptionHandler extends ResponseEntityExceptionHandler {\r\n        \r\n        @ExceptionHandler(NotFoundException.class)\r\n        @ResponseStatus(HttpStatus.NOT_FOUND)\r\n        public V2ErrorResponse handleNotFoundException(NotFoundException ex) {\r\n                return V2ErrorResponse.builder().error(ex.getMessage()).build();\r\n            }\r\n        }\r\n\r\n\r\n    @GetMapping(value = &quot;v1/user/{id}&quot;)\r\n        public UserDetails getUser(\r\n                @PathVariable(&quot;id&quot;) String userId\r\n        ) throws NotFoundException {\r\n            return userService.getUserDetails(userId);\r\n        }\r\n    \r\n    @GetMapping(value = &quot;v2/user/{id}&quot;)\r\n        public UserDetails getUser(\r\n                @PathVariable(&quot;id&quot;) String userId\r\n        ) throws NotFoundException {\r\n            return userService.getUserDetails(userId);\r\n        }\r\n\r\n","title":"Multiple rest advisor in spring boot based on API path","body":"<p>I have a spring boot application currently in production. It has APIs which return the error in this format</p>\n<pre><code>{\n   &quot;success&quot;: true,\n   &quot;error&quot;: &quot;Error message&quot; \n}\n</code></pre>\n<p>This error response I'm handling through the controller advisor.</p>\n<p>I'm creating v2 APIs and wanted to change the error response structure for the newer APIs. I want to write code in such a way, that It can have two rest advisors one is handling errors for the older APIs, and the other is for v2 APIs. We can have multiple rest advisors in Spring boot and we can set the order of execution using @Order annotation but for my use case, I want to get it executed based on the API path, If it has v2 it should be executed first otherwise it should get skipped.</p>\n<pre><code>@RestControllerAdvice(annotations = RestController.class)\n@Log4j2\npublic class V1APIExceptionHandler extends ResponseEntityExceptionHandler {\n    \n    @ExceptionHandler(NotFoundException.class)\n    @ResponseStatus(HttpStatus.NOT_FOUND)\n    public V1ErrorResponse handleNotFoundException(NotFoundException ex) {\n            return V1ErrorResponse.builder().error(ex.getMessage()).build();\n        }\n    }\n\n\n@RestControllerAdvice(annotations = RestController.class)\n@Log4j2\npublic class V2APIExceptionHandler extends ResponseEntityExceptionHandler {\n    \n    @ExceptionHandler(NotFoundException.class)\n    @ResponseStatus(HttpStatus.NOT_FOUND)\n    public V2ErrorResponse handleNotFoundException(NotFoundException ex) {\n            return V2ErrorResponse.builder().error(ex.getMessage()).build();\n        }\n    }\n\n\n@GetMapping(value = &quot;v1/user/{id}&quot;)\n    public UserDetails getUser(\n            @PathVariable(&quot;id&quot;) String userId\n    ) throws NotFoundException {\n        return userService.getUserDetails(userId);\n    }\n\n@GetMapping(value = &quot;v2/user/{id}&quot;)\n    public UserDetails getUser(\n            @PathVariable(&quot;id&quot;) String userId\n    ) throws NotFoundException {\n        return userService.getUserDetails(userId);\n    }\n</code></pre>\n"},{"tags":["java","apache-spark","apache-kafka","kafka-consumer-api","spark-structured-streaming"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1659203135,"post_id":73175888,"comment_id":129240132,"body_markdown":"You should be using `option(&quot;kafka.group.id&quot;` and ideally remove the starting and ending offsets options. Then offsets are automatically handled by Spark and Kafka across restarts","body":"You should be using <code>option(&quot;kafka.group.id&quot;</code> and ideally remove the starting and ending offsets options. Then offsets are automatically handled by Spark and Kafka across restarts"},{"owner":{"account_id":3969128,"reputation":123,"user_id":3274140,"display_name":"user3274140"},"score":0,"creation_date":1659248337,"post_id":73175888,"comment_id":129246279,"body_markdown":"@OneCricketeer first of all kafka.group.id is not valid spark option for kafka and even after i remove offset option from spark read code, i get same offset reading post n pre processing of records.have updated output in my ask.","body":"@OneCricketeer first of all kafka.group.id is not valid spark option for kafka and even after i remove offset option from spark read code, i get same offset reading post n pre processing of records.have updated output in my ask."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1659275973,"post_id":73175888,"comment_id":129251132,"body_markdown":"Sounds like you didn&#39;t try it. Yes, it is an option. From Spark docs, says `group.id` **cannot be set**. Then says &quot;You can ... set **`kafka.group.id`**  to force Spark to use a special group id, however, please read warnings for this option and use it with caution.&quot;","body":"Sounds like you didn&#39;t try it. Yes, it is an option. From Spark docs, says <code>group.id</code> <b>cannot be set</b>. Then says &quot;You can ... set <b><code>kafka.group.id</code></b>  to force Spark to use a special group id, however, please read warnings for this option and use it with caution.&quot;"},{"owner":{"account_id":3969128,"reputation":123,"user_id":3274140,"display_name":"user3274140"},"score":0,"creation_date":1659277759,"post_id":73175888,"comment_id":129251521,"body_markdown":"i get this error  Kafka option &#39;group.id&#39; is not supported as user-specified consumer groups is not used to track offsets if i use kafka.group.id","body":"i get this error  Kafka option &#39;group.id&#39; is not supported as user-specified consumer groups is not used to track offsets if i use kafka.group.id"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1659281233,"post_id":73175888,"comment_id":129252364,"body_markdown":"What Spark version are you using? You will need to upgrade to Spark 3 to use that option","body":"What Spark version are you using? You will need to upgrade to Spark 3 to use that option"},{"owner":{"account_id":3969128,"reputation":123,"user_id":3274140,"display_name":"user3274140"},"score":0,"creation_date":1659282602,"post_id":73175888,"comment_id":129252724,"body_markdown":"i am using 2.4.0 currently, challenge for me is i cannot upgrade the spark version","body":"i am using 2.4.0 currently, challenge for me is i cannot upgrade the spark version"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1659283539,"post_id":73175888,"comment_id":129252938,"body_markdown":"In that case, [documentation still says `group.id` cannot be set. Spark automatically creates one. Similarly `enable.auto.commit` cannot be set.](https://spark.apache.org/docs/2.4.0/structured-streaming-kafka-integration.html#kafka-specific-configurations) You&#39;ll need another place to store and fetch offsets, such as Zookeeper. Otherwise, it&#39;ll always use the same start/end that you&#39;ve hard-coded","body":"In that case, <a href=\"https://spark.apache.org/docs/2.4.0/structured-streaming-kafka-integration.html#kafka-specific-configurations\" rel=\"nofollow noreferrer\">documentation still says <code>group.id</code> cannot be set. Spark automatically creates one. Similarly <code>enable.auto.commit</code> cannot be set.</a> You&#39;ll need another place to store and fetch offsets, such as Zookeeper. Otherwise, it&#39;ll always use the same start/end that you&#39;ve hard-coded"}],"owner":{"account_id":3969128,"reputation":123,"user_id":3274140,"display_name":"user3274140"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":479,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1659276121,"creation_date":1659186514,"question_id":73175888,"body_markdown":"I have a use case where i am writing to a Kafka topic in batches using spark job (no streaming).Initially i pump-in suppose 10 records to Kafka topic and run the spark job which does some processing and finally write to another Kafka topic.\r\nNext time when i push another 5 records and run the spark job, my requirement is to start processing these 5 records only not from starting offset. I need to maintain the committed offset so that spark job should run on next offset position and do the processing.\r\nHere is code from kafka side to fetch the offset:\r\n\r\n```\r\nprivate static List&lt;TopicPartition&gt; getPartitions(KafkaConsumer consumer, String topic) {\r\n        List&lt;PartitionInfo&gt; partitionInfoList = consumer.partitionsFor(topic);\r\n        return partitionInfoList.stream().map(x -&gt; new TopicPartition(topic, x.partition())).collect(Collectors.toList());\r\n    }\r\n\r\n    public static void getOffSet(KafkaConsumer consumer) {\r\n        \r\n        List&lt;TopicPartition&gt; topicPartitions = getPartitions(consumer, topic);\r\n        \r\n        consumer.assign(topicPartitions);\r\n        consumer.seekToBeginning(topicPartitions);\r\n\r\n        topicPartitions.forEach(x -&gt; {\r\n            System.out.println(&quot;Partition-&gt; &quot; + x + &quot; startingOffSet-&gt; &quot; + consumer.position(x));\r\n        });\r\n        consumer.assign(topicPartitions);\r\n        consumer.seekToEnd(topicPartitions);\r\n        topicPartitions.forEach(x -&gt; {\r\n            System.out.println(&quot;Partition-&gt; &quot; + x + &quot; endingOffSet-&gt; &quot; + consumer.position(x));\r\n        });\r\n        \r\n        topicPartitions.forEach(x -&gt; {\r\n            consumer.poll(1000) ;\r\n            OffsetAndMetadata offsetAndMetadata = consumer.committed(x);\r\n            long position = consumer.position(x);\r\n            System.out.printf(&quot;Committed: %s, current position %s%n&quot;, offsetAndMetadata == null ? null : offsetAndMetadata\r\n                    .offset(), position);\r\n        });\r\n    }\r\n```\r\n\r\nBelow code is for spark to load the messages from topic which is not working :\r\n```\r\n Dataset&lt;Row&gt; kafkaDataset = session.read().format(&quot;kafka&quot;)\r\n                .option(&quot;kafka.bootstrap.servers&quot;, &quot;localhost:9092&quot;)\r\n                .option(&quot;subscribe&quot;, topic)\r\n                .option(&quot;group.id&quot;, &quot;test-consumer-group&quot;)\r\n                .option(&quot;startingOffsets&quot;,&quot;{\\&quot;Topic1\\&quot;:{\\&quot;0\\&quot;:2}}&quot;)\r\n                .option(&quot;endingOffsets&quot;, &quot;{\\&quot;Topic1\\&quot;:{\\&quot;0\\&quot;:3}}&quot;)\r\n                .option(&quot;enable.auto.commit&quot;,&quot;true&quot;)\r\n                .load();\r\n       \r\n```\r\nAfter above code executes i am again trying to get the offset by calling \r\n\r\n```\r\ngetoffset(consumer)\r\n```\r\n from the topic which always reads from 0 offset and committed offset fetched initially keeps on increasing. I am new to kafka and still figuring out how to handle such scenarion.Please help here.\r\n\r\nInitially i had 10 records in my topic, i published another 2 records and here is the o/p:\r\nOutput post getoffset method executes :\r\n\r\n&gt; Partition-&gt; Topic00-0 startingOffSet-&gt; 0 Partition-&gt;\r\n&gt; Topic00-0 endingOffSet-&gt; 12 Committed: 12, current position\r\n&gt; 12\r\n\r\nOutput post spark code executes for loading messages.\r\n\r\n&gt; Partition-&gt; Topic00-0 startingOffSet-&gt; 0 Partition-&gt;\r\n&gt; Topic00-0 endingOffSet-&gt; 12 Committed: 12, current position\r\n&gt; 12\r\n\r\nI see no diff and . Please take a look and suggest resolution for this sceanario.","title":"How to track committed offset with Spark job for kafka batch","body":"<p>I have a use case where i am writing to a Kafka topic in batches using spark job (no streaming).Initially i pump-in suppose 10 records to Kafka topic and run the spark job which does some processing and finally write to another Kafka topic.\nNext time when i push another 5 records and run the spark job, my requirement is to start processing these 5 records only not from starting offset. I need to maintain the committed offset so that spark job should run on next offset position and do the processing.\nHere is code from kafka side to fetch the offset:</p>\n<pre><code>private static List&lt;TopicPartition&gt; getPartitions(KafkaConsumer consumer, String topic) {\n        List&lt;PartitionInfo&gt; partitionInfoList = consumer.partitionsFor(topic);\n        return partitionInfoList.stream().map(x -&gt; new TopicPartition(topic, x.partition())).collect(Collectors.toList());\n    }\n\n    public static void getOffSet(KafkaConsumer consumer) {\n        \n        List&lt;TopicPartition&gt; topicPartitions = getPartitions(consumer, topic);\n        \n        consumer.assign(topicPartitions);\n        consumer.seekToBeginning(topicPartitions);\n\n        topicPartitions.forEach(x -&gt; {\n            System.out.println(&quot;Partition-&gt; &quot; + x + &quot; startingOffSet-&gt; &quot; + consumer.position(x));\n        });\n        consumer.assign(topicPartitions);\n        consumer.seekToEnd(topicPartitions);\n        topicPartitions.forEach(x -&gt; {\n            System.out.println(&quot;Partition-&gt; &quot; + x + &quot; endingOffSet-&gt; &quot; + consumer.position(x));\n        });\n        \n        topicPartitions.forEach(x -&gt; {\n            consumer.poll(1000) ;\n            OffsetAndMetadata offsetAndMetadata = consumer.committed(x);\n            long position = consumer.position(x);\n            System.out.printf(&quot;Committed: %s, current position %s%n&quot;, offsetAndMetadata == null ? null : offsetAndMetadata\n                    .offset(), position);\n        });\n    }\n</code></pre>\n<p>Below code is for spark to load the messages from topic which is not working :</p>\n<pre><code> Dataset&lt;Row&gt; kafkaDataset = session.read().format(&quot;kafka&quot;)\n                .option(&quot;kafka.bootstrap.servers&quot;, &quot;localhost:9092&quot;)\n                .option(&quot;subscribe&quot;, topic)\n                .option(&quot;group.id&quot;, &quot;test-consumer-group&quot;)\n                .option(&quot;startingOffsets&quot;,&quot;{\\&quot;Topic1\\&quot;:{\\&quot;0\\&quot;:2}}&quot;)\n                .option(&quot;endingOffsets&quot;, &quot;{\\&quot;Topic1\\&quot;:{\\&quot;0\\&quot;:3}}&quot;)\n                .option(&quot;enable.auto.commit&quot;,&quot;true&quot;)\n                .load();\n       \n</code></pre>\n<p>After above code executes i am again trying to get the offset by calling</p>\n<pre><code>getoffset(consumer)\n</code></pre>\n<p>from the topic which always reads from 0 offset and committed offset fetched initially keeps on increasing. I am new to kafka and still figuring out how to handle such scenarion.Please help here.</p>\n<p>Initially i had 10 records in my topic, i published another 2 records and here is the o/p:\nOutput post getoffset method executes :</p>\n<blockquote>\n<p>Partition-&gt; Topic00-0 startingOffSet-&gt; 0 Partition-&gt;\nTopic00-0 endingOffSet-&gt; 12 Committed: 12, current position\n12</p>\n</blockquote>\n<p>Output post spark code executes for loading messages.</p>\n<blockquote>\n<p>Partition-&gt; Topic00-0 startingOffSet-&gt; 0 Partition-&gt;\nTopic00-0 endingOffSet-&gt; 12 Committed: 12, current position\n12</p>\n</blockquote>\n<p>I see no diff and . Please take a look and suggest resolution for this sceanario.</p>\n"},{"tags":["java","android","json","android-studio","onclicklistener"],"comments":[{"owner":{"account_id":13837518,"reputation":673,"user_id":9988706,"display_name":"Gobu CSG"},"score":0,"creation_date":1659291647,"post_id":73183883,"comment_id":129254777,"body_markdown":"implement clicklistener to the convertView.. you can get context from viewgroup parent.Context or you can use view context as well","body":"implement clicklistener to the convertView.. you can get context from viewgroup parent.Context or you can use view context as well"},{"owner":{"account_id":14361048,"reputation":448,"user_id":10373347,"display_name":"Peer Mohamed"},"score":0,"creation_date":1659596372,"post_id":73183883,"comment_id":129332981,"body_markdown":"in viewholder, get the parent layout id and declare. then put onclicklistener for parent layout and send the url in intent to webview class.","body":"in viewholder, get the parent layout id and declare. then put onclicklistener for parent layout and send the url in intent to webview class."}],"owner":{"account_id":23487515,"reputation":11,"user_id":17538894,"display_name":"RadioTracer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659275568,"creation_date":1659275568,"question_id":73183883,"body_markdown":"I have an activity that fetches content from a JSON URL and displays the contents in a list view.\r\n\r\nThe contents include images, URL of the post, description etc. Each content item has its own URL.\r\n\r\nI want to open it in another activity which has a WebView.\r\n\r\nThis is MainActivity.java\r\n\r\n    import android.os.Bundle;\r\n    import android.view.View;\r\n    import android.widget.ListView;\r\n    import android.widget.ProgressBar;\r\n    import android.widget.Toast;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import com.android.volley.Request;\r\n    import com.android.volley.RequestQueue;\r\n    import com.android.volley.Response;\r\n    import com.android.volley.VolleyError;\r\n    import com.android.volley.toolbox.StringRequest;\r\n    import com.android.volley.toolbox.Volley;\r\n    import org.json.JSONArray;\r\n    import org.json.JSONException;\r\n    import org.json.JSONObject;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n\r\n    ListView listView;\r\n    private static final String JSON_URL = &quot;https://gist.githubusercontent.com/radiotracer133/f9c5abf2c1fb403c4091ff7bc2ed8845/raw/78b956f078191c3f4b6c2c9c27f92da7ada2f7b4/example.json&quot;;\r\n    //the tutorial list where we will store all the tutorial objects after parsing json\r\n    List&lt;Books&gt; booksList;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        listView = findViewById(R.id.listView);\r\n        booksList = new ArrayList&lt;&gt;();\r\n        //this method will fetch and parse the data\r\n        loadTutorialList();\r\n    }\r\n\r\n    private void loadTutorialList() {\r\n        //getting the progressbar\r\n        final ProgressBar progressBar = findViewById(R.id.progressBar);\r\n        progressBar.setVisibility(View.VISIBLE);\r\n\r\n        //creating a string request to send request to the url\r\n        StringRequest stringRequest = new StringRequest(Request.Method.GET, JSON_URL,\r\n                new Response.Listener&lt;String&gt;() {\r\n                    @Override\r\n                    public void onResponse(String response) {\r\n                        //hiding the progressbar after completion\r\n                        progressBar.setVisibility(View.INVISIBLE);\r\n\r\n\r\n                        try {\r\n                            //getting the whole json object from the response\r\n                            JSONObject obj = new JSONObject(response);\r\n\r\n                            //we have the array named tutorial inside the object\r\n                            //so here we are getting that json array\r\n                            JSONArray tutorialsArray = obj.getJSONArray(&quot;Books&quot;);\r\n\r\n                            //now looping through all the elements of the json array\r\n                            for (int i = 0; i &lt; tutorialsArray.length(); i++) {\r\n                                //getting the json object of the particular index inside the array\r\n                                JSONObject tutorialsObject = tutorialsArray.getJSONObject(i);\r\n\r\n                                //creating a books object and giving them the values from json object\r\n                                Books books = new Books(tutorialsObject.getString(&quot;Name&quot;), tutorialsObject.getString(&quot;image&quot;),tutorialsObject.getString(&quot;Author&quot;), tutorialsObject.getString( &quot;Name_url&quot; ));\r\n\r\n                                //adding the books to tutoriallist\r\n                                booksList.add( books );\r\n\r\n                            }\r\n\r\n                            //creating custom adapter object\r\n                            MyAdapter adapter = new MyAdapter( booksList, getApplicationContext());\r\n\r\n                            //adding the adapter to listview\r\n                            listView.setAdapter(adapter);\r\n\r\n                        } catch (JSONException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n\r\n                    }\r\n                },\r\n                new Response.ErrorListener() {\r\n                    @Override\r\n                    public void onErrorResponse(VolleyError error) {\r\n                        //displaying the error in toast if occur\r\n                        Toast.makeText(getApplicationContext(), error.getMessage(), Toast.LENGTH_SHORT).show();\r\n                    }\r\n                });\r\n\r\n        //creating a request queue\r\n        RequestQueue requestQueue = Volley.newRequestQueue(this);\r\n\r\n        //adding the string request to request queue\r\n        requestQueue.add(stringRequest);\r\n    }\r\n\r\n    }\r\n\r\nThis is MyAdapter.java\r\n\r\n    import android.content.Context;\r\n    import android.graphics.Bitmap;\r\n    import android.view.LayoutInflater;\r\n    import android.view.View;\r\n    import android.view.ViewGroup;\r\n    import android.widget.ArrayAdapter;\r\n    import android.widget.ImageView;\r\n    import android.widget.TextView;\r\n    import java.util.List;\r\n\r\n\r\n    public class MyAdapter extends ArrayAdapter&lt;Books&gt; {\r\n    //the tutorial list that will be displayed\r\n    private List&lt;Books&gt; booksList;\r\n    private Bitmap bitmap;\r\n    private Context mCtx;\r\n    //here we are getting the tutoriallist and context\r\n    //so while creating the object of this adapter class we need to give tutoriallist and context\r\n    public MyAdapter(List&lt;Books&gt; booksList, Context mCtx) {\r\n        super(mCtx, R.layout.list_item, booksList );\r\n        this.booksList = booksList;\r\n        this.mCtx = mCtx;\r\n    }\r\n\r\n    //this method will return the list item\r\n    @Override\r\n    public View getView(int position, View convertView, ViewGroup parent) {\r\n        //getting the layoutinflater\r\n        ViewHolder holder;\r\n        LayoutInflater inflater = LayoutInflater.from(mCtx);\r\n        convertView = inflater.inflate(R.layout.list_item, null, true);\r\n        holder = new ViewHolder();\r\n        //getting text views\r\n        holder.textViewName = convertView.findViewById(R.id.textViewName);\r\n        holder.textDescription = convertView.findViewById(R.id.textViewImageUrl);\r\n        holder.imageView = convertView.findViewById(R.id.imageView);\r\n        holder.detailsView = convertView.findViewById( R.id.detailsview );\r\n\r\n        convertView.setTag(holder);\r\n        //Getting the books for the specified position\r\n        Books books = booksList.get(position);\r\n        String imageUrl = books.getImageUrl();\r\n        String tutorialDescription = books.getDescription();\r\n        String tutorialTitle = books.getName();\r\n        String detailsTitle = books.getDetails();\r\n\r\n        holder.textViewName.setText(tutorialTitle);\r\n        holder.textDescription.setText(tutorialDescription);\r\n        holder.detailsView.setText( detailsTitle );\r\n\r\n        if (holder.imageView != null) {\r\n            /*-------------fatching image------------*/;\r\n            new ImageDownloaderTask(holder.imageView).execute(imageUrl);\r\n        }\r\n\r\n        holder.imageView.setImageBitmap(bitmap);\r\n        return convertView;\r\n\r\n    }\r\n\r\n    static class ViewHolder {\r\n        TextView textViewName;\r\n        TextView textDescription;\r\n        ImageView imageView;\r\n        TextView detailsView;\r\n    }\r\n    }\r\n\r\nHow can I implement OnclickListerner here to open WebView?","title":"JSON listview OnItemClickListener url open in WebView","body":"<p>I have an activity that fetches content from a JSON URL and displays the contents in a list view.</p>\n<p>The contents include images, URL of the post, description etc. Each content item has its own URL.</p>\n<p>I want to open it in another activity which has a WebView.</p>\n<p>This is MainActivity.java</p>\n<pre><code>import android.os.Bundle;\nimport android.view.View;\nimport android.widget.ListView;\nimport android.widget.ProgressBar;\nimport android.widget.Toast;\nimport androidx.appcompat.app.AppCompatActivity;\nimport com.android.volley.Request;\nimport com.android.volley.RequestQueue;\nimport com.android.volley.Response;\nimport com.android.volley.VolleyError;\nimport com.android.volley.toolbox.StringRequest;\nimport com.android.volley.toolbox.Volley;\nimport org.json.JSONArray;\nimport org.json.JSONException;\nimport org.json.JSONObject;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class MainActivity extends AppCompatActivity {\n\nListView listView;\nprivate static final String JSON_URL = &quot;https://gist.githubusercontent.com/radiotracer133/f9c5abf2c1fb403c4091ff7bc2ed8845/raw/78b956f078191c3f4b6c2c9c27f92da7ada2f7b4/example.json&quot;;\n//the tutorial list where we will store all the tutorial objects after parsing json\nList&lt;Books&gt; booksList;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    listView = findViewById(R.id.listView);\n    booksList = new ArrayList&lt;&gt;();\n    //this method will fetch and parse the data\n    loadTutorialList();\n}\n\nprivate void loadTutorialList() {\n    //getting the progressbar\n    final ProgressBar progressBar = findViewById(R.id.progressBar);\n    progressBar.setVisibility(View.VISIBLE);\n\n    //creating a string request to send request to the url\n    StringRequest stringRequest = new StringRequest(Request.Method.GET, JSON_URL,\n            new Response.Listener&lt;String&gt;() {\n                @Override\n                public void onResponse(String response) {\n                    //hiding the progressbar after completion\n                    progressBar.setVisibility(View.INVISIBLE);\n\n\n                    try {\n                        //getting the whole json object from the response\n                        JSONObject obj = new JSONObject(response);\n\n                        //we have the array named tutorial inside the object\n                        //so here we are getting that json array\n                        JSONArray tutorialsArray = obj.getJSONArray(&quot;Books&quot;);\n\n                        //now looping through all the elements of the json array\n                        for (int i = 0; i &lt; tutorialsArray.length(); i++) {\n                            //getting the json object of the particular index inside the array\n                            JSONObject tutorialsObject = tutorialsArray.getJSONObject(i);\n\n                            //creating a books object and giving them the values from json object\n                            Books books = new Books(tutorialsObject.getString(&quot;Name&quot;), tutorialsObject.getString(&quot;image&quot;),tutorialsObject.getString(&quot;Author&quot;), tutorialsObject.getString( &quot;Name_url&quot; ));\n\n                            //adding the books to tutoriallist\n                            booksList.add( books );\n\n                        }\n\n                        //creating custom adapter object\n                        MyAdapter adapter = new MyAdapter( booksList, getApplicationContext());\n\n                        //adding the adapter to listview\n                        listView.setAdapter(adapter);\n\n                    } catch (JSONException e) {\n                        e.printStackTrace();\n                    }\n\n                }\n            },\n            new Response.ErrorListener() {\n                @Override\n                public void onErrorResponse(VolleyError error) {\n                    //displaying the error in toast if occur\n                    Toast.makeText(getApplicationContext(), error.getMessage(), Toast.LENGTH_SHORT).show();\n                }\n            });\n\n    //creating a request queue\n    RequestQueue requestQueue = Volley.newRequestQueue(this);\n\n    //adding the string request to request queue\n    requestQueue.add(stringRequest);\n}\n\n}\n</code></pre>\n<p>This is MyAdapter.java</p>\n<pre><code>import android.content.Context;\nimport android.graphics.Bitmap;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.ArrayAdapter;\nimport android.widget.ImageView;\nimport android.widget.TextView;\nimport java.util.List;\n\n\npublic class MyAdapter extends ArrayAdapter&lt;Books&gt; {\n//the tutorial list that will be displayed\nprivate List&lt;Books&gt; booksList;\nprivate Bitmap bitmap;\nprivate Context mCtx;\n//here we are getting the tutoriallist and context\n//so while creating the object of this adapter class we need to give tutoriallist and context\npublic MyAdapter(List&lt;Books&gt; booksList, Context mCtx) {\n    super(mCtx, R.layout.list_item, booksList );\n    this.booksList = booksList;\n    this.mCtx = mCtx;\n}\n\n//this method will return the list item\n@Override\npublic View getView(int position, View convertView, ViewGroup parent) {\n    //getting the layoutinflater\n    ViewHolder holder;\n    LayoutInflater inflater = LayoutInflater.from(mCtx);\n    convertView = inflater.inflate(R.layout.list_item, null, true);\n    holder = new ViewHolder();\n    //getting text views\n    holder.textViewName = convertView.findViewById(R.id.textViewName);\n    holder.textDescription = convertView.findViewById(R.id.textViewImageUrl);\n    holder.imageView = convertView.findViewById(R.id.imageView);\n    holder.detailsView = convertView.findViewById( R.id.detailsview );\n\n    convertView.setTag(holder);\n    //Getting the books for the specified position\n    Books books = booksList.get(position);\n    String imageUrl = books.getImageUrl();\n    String tutorialDescription = books.getDescription();\n    String tutorialTitle = books.getName();\n    String detailsTitle = books.getDetails();\n\n    holder.textViewName.setText(tutorialTitle);\n    holder.textDescription.setText(tutorialDescription);\n    holder.detailsView.setText( detailsTitle );\n\n    if (holder.imageView != null) {\n        /*-------------fatching image------------*/;\n        new ImageDownloaderTask(holder.imageView).execute(imageUrl);\n    }\n\n    holder.imageView.setImageBitmap(bitmap);\n    return convertView;\n\n}\n\nstatic class ViewHolder {\n    TextView textViewName;\n    TextView textDescription;\n    ImageView imageView;\n    TextView detailsView;\n}\n}\n</code></pre>\n<p>How can I implement OnclickListerner here to open WebView?</p>\n"},{"tags":["java","concurrency","future","promise"],"comments":[{"owner":{"account_id":55108,"reputation":49619,"user_id":165009,"accept_rate":100,"display_name":"Kevin Wright"},"score":131,"creation_date":1391441104,"post_id":14541975,"comment_id":32511183,"body_markdown":"You can make a `Promise` and it&#39;s up to you to keep it.  When someone else makes you a promise you must wait to see if they honour it in the `Future`","body":"You can make a <code>Promise</code> and it&#39;s up to you to keep it.  When someone else makes you a promise you must wait to see if they honour it in the <code>Future</code>"},{"owner":{"account_id":2102941,"reputation":7351,"user_id":1870054,"accept_rate":72,"display_name":"wener"},"score":2,"creation_date":1421133599,"post_id":14541975,"comment_id":44231955,"body_markdown":"wikipedia [Futures and promises](http://en.wikipedia.org/wiki/Futures_and_promises)","body":"wikipedia <a href=\"http://en.wikipedia.org/wiki/Futures_and_promises\" rel=\"nofollow noreferrer\">Futures and promises</a>"},{"owner":{"account_id":1565759,"reputation":516,"user_id":1454613,"accept_rate":78,"display_name":"Fulluphigh"},"score":43,"creation_date":1448048168,"post_id":14541975,"comment_id":55434586,"body_markdown":"One of the least helpful Wikipedia articles I&#39;ve ever read","body":"One of the least helpful Wikipedia articles I&#39;ve ever read"},{"owner":{"account_id":1157059,"reputation":1746,"user_id":1137382,"display_name":"Jim Hewitt"},"score":2,"creation_date":1515257711,"post_id":14541975,"comment_id":83235976,"body_markdown":"http://dist-prog-book.com/chapter/2/futures.html","body":"<a href=\"http://dist-prog-book.com/chapter/2/futures.html\" rel=\"nofollow noreferrer\">dist-prog-book.com/chapter/2/futures.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"down_vote_count":3,"up_vote_count":163,"is_accepted":true,"score":160,"last_activity_date":1433321499,"creation_date":1359238025,"answer_id":14542066,"question_id":14541975,"body_markdown":"According to [this discussion][1], `Promise` has finally been called `CompletableFuture` for inclusion in Java 8, and [its javadoc][2] explains:\r\n\r\n&gt; A Future that may be explicitly completed (setting its value and status), and may be used as a CompletionStage, supporting dependent functions and actions that trigger upon its completion.  \r\n\r\nAn example is also given on the list:\r\n\r\n    f.then((s -&gt; aStringFunction(s)).thenAsync(s -&gt; ...);\r\n\r\nNote that the final API is slightly different but allows similar asynchronous execution:\r\n\r\n    CompletableFuture&lt;String&gt; f = ...;\r\n    f.thenApply(this::modifyString).thenAccept(System.out::println);\r\n\r\n [1]: http://cs.oswego.edu/pipermail/concurrency-interest/2012-December/010423.html\r\n [2]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html","title":"What&#39;s the difference between a Future and a Promise?","body":"<p>According to <a href=\"http://cs.oswego.edu/pipermail/concurrency-interest/2012-December/010423.html\">this discussion</a>, <code>Promise</code> has finally been called <code>CompletableFuture</code> for inclusion in Java 8, and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\">its javadoc</a> explains:</p>\n\n<blockquote>\n  <p>A Future that may be explicitly completed (setting its value and status), and may be used as a CompletionStage, supporting dependent functions and actions that trigger upon its completion.  </p>\n</blockquote>\n\n<p>An example is also given on the list:</p>\n\n<pre><code>f.then((s -&gt; aStringFunction(s)).thenAsync(s -&gt; ...);\n</code></pre>\n\n<p>Note that the final API is slightly different but allows similar asynchronous execution:</p>\n\n<pre><code>CompletableFuture&lt;String&gt; f = ...;\nf.thenApply(this::modifyString).thenAccept(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23037,"reputation":6947,"user_id":57448,"accept_rate":71,"display_name":"Rahel L&#252;thy"},"down_vote_count":0,"up_vote_count":159,"is_accepted":false,"score":159,"last_activity_date":1550045670,"creation_date":1420528629,"answer_id":27793863,"question_id":14541975,"body_markdown":"I am aware that there&#39;s already an accepted answer but would like to add my two cents nevertheless:\r\n\r\nTLDR: Future and Promise are the two sides of an asynchronous operation: **consumer/caller** vs. **producer/implementor**.\r\n\r\nAs a **caller** of an asynchronous API method, you will get a **`Future`** as a handle to the computation&#39;s result. You can e.g. call `get()` on it to wait for the computation to complete and retrieve the result.\r\n\r\nNow think of how this API method is actually implemented: The **implementor** must return a `Future` immediately. They are responsible for completing that future as soon as the computation is done (which they will know because it is implementing the dispatch logic ;-)). They will use a **`Promise`**/**`CompletableFuture`** to do just that: Construct and return the `CompletableFuture` immediately, and call `complete(T result)` once the computation is done.","title":"What&#39;s the difference between a Future and a Promise?","body":"<p>I am aware that there's already an accepted answer but would like to add my two cents nevertheless:</p>\n\n<p>TLDR: Future and Promise are the two sides of an asynchronous operation: <strong>consumer/caller</strong> vs. <strong>producer/implementor</strong>.</p>\n\n<p>As a <strong>caller</strong> of an asynchronous API method, you will get a <strong><code>Future</code></strong> as a handle to the computation's result. You can e.g. call <code>get()</code> on it to wait for the computation to complete and retrieve the result.</p>\n\n<p>Now think of how this API method is actually implemented: The <strong>implementor</strong> must return a <code>Future</code> immediately. They are responsible for completing that future as soon as the computation is done (which they will know because it is implementing the dispatch logic ;-)). They will use a <strong><code>Promise</code></strong>/<strong><code>CompletableFuture</code></strong> to do just that: Construct and return the <code>CompletableFuture</code> immediately, and call <code>complete(T result)</code> once the computation is done.</p>\n"},{"tags":[],"owner":{"account_id":1281940,"reputation":17524,"user_id":1235867,"accept_rate":80,"display_name":"lbalazscs"},"down_vote_count":1,"up_vote_count":209,"is_accepted":false,"score":208,"last_activity_date":1641721226,"creation_date":1425337262,"answer_id":28821051,"question_id":14541975,"body_markdown":"(I&#39;m not completely happy with the answers so far, so here is my attempt...)\r\n\r\nI think that  [Kevin Wright&#39;s comment](https://stackoverflow.com/questions/14541975/whats-the-difference-between-a-future-and-a-promise#comment32511183_14541975)\r\n&gt; You can make a Promise and it&#39;s up to you to keep it. When someone else makes you a promise you must wait to see if they honour it in the Future\r\n\r\nsummarizes it pretty well, but some explanation can be useful.\r\n\r\n[Futures and promises][1] are pretty similar concepts, the difference is that a future is a read-only container for a result that does not yet exist, while a promise can be written (normally only once). The Java 8 [CompletableFuture ][2] and the Guava [SettableFuture][3] can be thought of as promises, because their value can be set (&quot;completed&quot;), but they also implement the Future interface, therefore there is no difference for the client. \r\n\r\nThe result of the future will be set by &quot;someone else&quot; - by the result of an asynchronous computation. Note how [FutureTask][6] - a classic future - *must* be initialized with a Callable or Runnable, there is no no-argument constructor, and both Future and FutureTask are read-only from the outside (the set methods of FutureTask are protected). The value will be set to the result of the computation from the inside.\r\n\r\nOn the other hand, the result of a promise can be set by &quot;you&quot; (or in fact by anybody) anytime because it has a public setter method. Both CompletableFuture and SettableFuture can be created without any task, and their value can be set at any time. You send a promise to the client code, and fulfill it later as you wish.\r\n\r\nNote that CompletableFuture is not a &quot;pure&quot; promise, it can be initialized with a task just like FutureTask, and its most useful feature is the unrelated chaining of processing steps.\r\n\r\nAlso note that a promise does not have to be a subtype of future and it does not have to be the same object. In Scala a Future object is created by an asynchronous computation or by a *different* Promise object. In C++ the situation is similar: the promise object is used by the producer and the future object by the consumer. The advantage of this separation is that the client cannot set the value of the future.\r\n\r\nBoth [Spring][4] and [EJB 3.1][5] have an AsyncResult class, which is similar to the Scala/C++ promises. AsyncResult does implement Future but this is not the real future: asynchronous methods in Spring/EJB return a different, read-only Future object through some background magic, and this second &quot;real&quot; future can be used by the client to access the result.\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Futures_and_promises\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\r\n  [3]: http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/util/concurrent/SettableFuture.html\r\n  [4]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/scheduling/annotation/AsyncResult.html\r\n  [5]: http://docs.oracle.com/javaee/7/api/javax/ejb/AsyncResult.html?is-external=true\r\n  [6]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/FutureTask.html","title":"What&#39;s the difference between a Future and a Promise?","body":"<p>(I'm not completely happy with the answers so far, so here is my attempt...)</p>\n<p>I think that  <a href=\"https://stackoverflow.com/questions/14541975/whats-the-difference-between-a-future-and-a-promise#comment32511183_14541975\">Kevin Wright's comment</a></p>\n<blockquote>\n<p>You can make a Promise and it's up to you to keep it. When someone else makes you a promise you must wait to see if they honour it in the Future</p>\n</blockquote>\n<p>summarizes it pretty well, but some explanation can be useful.</p>\n<p><a href=\"http://en.wikipedia.org/wiki/Futures_and_promises\" rel=\"noreferrer\">Futures and promises</a> are pretty similar concepts, the difference is that a future is a read-only container for a result that does not yet exist, while a promise can be written (normally only once). The Java 8 <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\" rel=\"noreferrer\">CompletableFuture </a> and the Guava <a href=\"http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/util/concurrent/SettableFuture.html\" rel=\"noreferrer\">SettableFuture</a> can be thought of as promises, because their value can be set (&quot;completed&quot;), but they also implement the Future interface, therefore there is no difference for the client.</p>\n<p>The result of the future will be set by &quot;someone else&quot; - by the result of an asynchronous computation. Note how <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/FutureTask.html\" rel=\"noreferrer\">FutureTask</a> - a classic future - <em>must</em> be initialized with a Callable or Runnable, there is no no-argument constructor, and both Future and FutureTask are read-only from the outside (the set methods of FutureTask are protected). The value will be set to the result of the computation from the inside.</p>\n<p>On the other hand, the result of a promise can be set by &quot;you&quot; (or in fact by anybody) anytime because it has a public setter method. Both CompletableFuture and SettableFuture can be created without any task, and their value can be set at any time. You send a promise to the client code, and fulfill it later as you wish.</p>\n<p>Note that CompletableFuture is not a &quot;pure&quot; promise, it can be initialized with a task just like FutureTask, and its most useful feature is the unrelated chaining of processing steps.</p>\n<p>Also note that a promise does not have to be a subtype of future and it does not have to be the same object. In Scala a Future object is created by an asynchronous computation or by a <em>different</em> Promise object. In C++ the situation is similar: the promise object is used by the producer and the future object by the consumer. The advantage of this separation is that the client cannot set the value of the future.</p>\n<p>Both <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/scheduling/annotation/AsyncResult.html\" rel=\"noreferrer\">Spring</a> and <a href=\"http://docs.oracle.com/javaee/7/api/javax/ejb/AsyncResult.html?is-external=true\" rel=\"noreferrer\">EJB 3.1</a> have an AsyncResult class, which is similar to the Scala/C++ promises. AsyncResult does implement Future but this is not the real future: asynchronous methods in Spring/EJB return a different, read-only Future object through some background magic, and this second &quot;real&quot; future can be used by the client to access the result.</p>\n"},{"tags":[],"owner":{"account_id":1003622,"reputation":516,"user_id":1017901,"display_name":"bodrin"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1464334672,"creation_date":1464334672,"answer_id":37477557,"question_id":14541975,"body_markdown":"Not sure if this can be an answer but as I see what others have said for someone it may look like you need two separate abstractions for both of these concepts so that one of them (`Future`) is just a read-only view of the other (`Promise`) ... but actually this is not needed.\r\n\r\nFor example take a look at how promises are defined in javascript:\r\n\r\nhttps://promisesaplus.com/\r\n\r\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\r\n\r\nThe focus is on the composability using the `then` method like:\r\n\r\n    asyncOp1()\r\n    .then(function(op1Result){\r\n      // do something\r\n      return asyncOp2();\r\n    })\r\n    .then(function(op2Result){\r\n      // do something more\r\n      return asyncOp3();\r\n    })\r\n    .then(function(op3Result){\r\n      // do something even more\r\n      return syncOp4(op3Result);\r\n    })\r\n    ...\r\n    .then(function(result){\r\n      console.log(result);\r\n    })\r\n    .catch(function(error){\r\n      console.log(error);\r\n    })\r\n\r\nwhich makes asynchronous computation to look like synchronous:\r\n\r\n    try {\r\n      op1Result = syncOp1();\r\n      // do something\r\n      op1Result = syncOp2();\r\n      // do something more\r\n      op3Result = syncOp3();\r\n      // do something even more\r\n      syncOp4(op3Result);\r\n      ...\r\n      console.log(result);\r\n    } catch(error) {\r\n      console.log(error);\r\n    }\r\n\r\nwhich is pretty cool.\r\n(Not as cool as &lt;em&gt;async-await&lt;/em&gt; but &lt;em&gt;async-await&lt;/em&gt; just removes the boilerplate &lt;em&gt;....then(function(result) {....&lt;/em&gt; from it).\r\n\r\nAnd actually their abstraction is pretty good as the promise constructor \r\n\r\n    new Promise( function(resolve, reject) { /* do it */ } );\r\n\r\nallows you to provide two callbacks which can be used to either complete the `Promise` successfully or with an error. So that only the code that constructs the `Promise` can complete it and the code that receives an already constructed `Promise` object has the read-only view.\r\n\r\nWith inheritance the above can be achieved if &lt;em&gt;resolve&lt;/em&gt; and &lt;em&gt;reject&lt;/em&gt; are protected methods.","title":"What&#39;s the difference between a Future and a Promise?","body":"<p>Not sure if this can be an answer but as I see what others have said for someone it may look like you need two separate abstractions for both of these concepts so that one of them (<code>Future</code>) is just a read-only view of the other (<code>Promise</code>) ... but actually this is not needed.</p>\n\n<p>For example take a look at how promises are defined in javascript:</p>\n\n<p><a href=\"https://promisesaplus.com/\" rel=\"noreferrer\">https://promisesaplus.com/</a></p>\n\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\" rel=\"noreferrer\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise</a></p>\n\n<p>The focus is on the composability using the <code>then</code> method like:</p>\n\n<pre><code>asyncOp1()\n.then(function(op1Result){\n  // do something\n  return asyncOp2();\n})\n.then(function(op2Result){\n  // do something more\n  return asyncOp3();\n})\n.then(function(op3Result){\n  // do something even more\n  return syncOp4(op3Result);\n})\n...\n.then(function(result){\n  console.log(result);\n})\n.catch(function(error){\n  console.log(error);\n})\n</code></pre>\n\n<p>which makes asynchronous computation to look like synchronous:</p>\n\n<pre><code>try {\n  op1Result = syncOp1();\n  // do something\n  op1Result = syncOp2();\n  // do something more\n  op3Result = syncOp3();\n  // do something even more\n  syncOp4(op3Result);\n  ...\n  console.log(result);\n} catch(error) {\n  console.log(error);\n}\n</code></pre>\n\n<p>which is pretty cool.\n(Not as cool as <em>async-await</em> but <em>async-await</em> just removes the boilerplate <em>....then(function(result) {....</em> from it).</p>\n\n<p>And actually their abstraction is pretty good as the promise constructor </p>\n\n<pre><code>new Promise( function(resolve, reject) { /* do it */ } );\n</code></pre>\n\n<p>allows you to provide two callbacks which can be used to either complete the <code>Promise</code> successfully or with an error. So that only the code that constructs the <code>Promise</code> can complete it and the code that receives an already constructed <code>Promise</code> object has the read-only view.</p>\n\n<p>With inheritance the above can be achieved if <em>resolve</em> and <em>reject</em> are protected methods.</p>\n"},{"tags":[],"owner":{"account_id":2641595,"reputation":1817,"user_id":2285111,"accept_rate":70,"display_name":"Vladimir Nabokov"},"down_vote_count":1,"up_vote_count":118,"is_accepted":false,"score":117,"last_activity_date":1572953692,"creation_date":1485928524,"answer_id":41972838,"question_id":14541975,"body_markdown":"I will give an example of what is Promise and how its value could be set at any time, in opposite to Future, which value is only readable.\r\n\r\n\r\nSuppose you have a mom and you ask her for money.\r\n     \r\n    // Now , you trick your mom into creating you a promise of eventual\r\n    // donation, she gives you that promise object, but she is not really\r\n    // in rush to fulfill it yet:\r\n    Supplier&lt;Integer&gt; momsPurse = ()-&gt; {\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tThread.sleep(1000);//mom is busy\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn 100;\r\n\t\t\t\r\n\t\t};\r\n\r\n\r\n    ExecutorService ex = Executors.newFixedThreadPool(10);\r\n\r\n\tCompletableFuture&lt;Integer&gt; promise =  \r\n    CompletableFuture.supplyAsync(momsPurse, ex);\r\n\r\n    // You are happy, you run to thank you your mom:\r\n    promise.thenAccept(u-&gt;System.out.println(&quot;Thank you mom for $&quot; + u ));\r\n\r\n    // But your father interferes and generally aborts mom&#39;s plans and \r\n    // completes the promise (sets its value!) with far lesser contribution,\r\n    // as fathers do, very resolutely, while mom is slowly opening her purse \r\n    // (remember the Thread.sleep(...)) :\r\n    promise.complete(10); \r\n\r\nOutput of that is:\r\n\r\n    Thank you mom for $10\r\n\r\n\r\nMom&#39;s promise was created , but waited for some &quot;completion&quot; event.\r\n\r\n    CompletableFuture&lt;Integer&gt; promise...\r\n\r\nYou created such event, accepting her promise and announcing your plans to thank your mom:\r\n\r\n    promise.thenAccept...\r\n\r\nAt this moment mom started open her purse...but very slow...\r\n\r\nand father interfered much faster and completed the promise instead of your mom:\r\n\r\n    promise.complete(10);\r\n\r\nHave you noticed an executor that I wrote explicitly?\r\n\r\nInterestingly, if you use a default implicit executor instead (commonPool) and father is not at home, but only mom with her &quot;slow purse&quot;, then her promise will only complete, if the program lives longer than mom needs to get money from the purse.\r\n\r\nThe default executor acts kind of like a &quot;daemon&quot; and does not wait for all promises to be fulfilled. I have not found a good description of this fact...","title":"What&#39;s the difference between a Future and a Promise?","body":"<p>I will give an example of what is Promise and how its value could be set at any time, in opposite to Future, which value is only readable.</p>\n\n<p>Suppose you have a mom and you ask her for money.</p>\n\n<pre><code>// Now , you trick your mom into creating you a promise of eventual\n// donation, she gives you that promise object, but she is not really\n// in rush to fulfill it yet:\nSupplier&lt;Integer&gt; momsPurse = ()-&gt; {\n\n        try {\n            Thread.sleep(1000);//mom is busy\n        } catch (InterruptedException e) {\n            ;\n        }\n\n        return 100;\n\n    };\n\n\nExecutorService ex = Executors.newFixedThreadPool(10);\n\nCompletableFuture&lt;Integer&gt; promise =  \nCompletableFuture.supplyAsync(momsPurse, ex);\n\n// You are happy, you run to thank you your mom:\npromise.thenAccept(u-&gt;System.out.println(\"Thank you mom for $\" + u ));\n\n// But your father interferes and generally aborts mom's plans and \n// completes the promise (sets its value!) with far lesser contribution,\n// as fathers do, very resolutely, while mom is slowly opening her purse \n// (remember the Thread.sleep(...)) :\npromise.complete(10); \n</code></pre>\n\n<p>Output of that is:</p>\n\n<pre><code>Thank you mom for $10\n</code></pre>\n\n<p>Mom's promise was created , but waited for some \"completion\" event.</p>\n\n<pre><code>CompletableFuture&lt;Integer&gt; promise...\n</code></pre>\n\n<p>You created such event, accepting her promise and announcing your plans to thank your mom:</p>\n\n<pre><code>promise.thenAccept...\n</code></pre>\n\n<p>At this moment mom started open her purse...but very slow...</p>\n\n<p>and father interfered much faster and completed the promise instead of your mom:</p>\n\n<pre><code>promise.complete(10);\n</code></pre>\n\n<p>Have you noticed an executor that I wrote explicitly?</p>\n\n<p>Interestingly, if you use a default implicit executor instead (commonPool) and father is not at home, but only mom with her \"slow purse\", then her promise will only complete, if the program lives longer than mom needs to get money from the purse.</p>\n\n<p>The default executor acts kind of like a \"daemon\" and does not wait for all promises to be fulfilled. I have not found a good description of this fact...</p>\n"},{"tags":[],"owner":{"account_id":11681394,"reputation":157,"user_id":8552977,"display_name":"Jacky"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1504719223,"creation_date":1504719223,"answer_id":46081225,"question_id":14541975,"body_markdown":"No set method in Future interface, only get method, so it is read-only.\r\nAbout CompletableFuture, this article maybe helpful.\r\n[completablefuture][1]\r\n\r\n\r\n  [1]: http://www.deadcoderising.com/java8-writing-asynchronous-code-with-completablefuture/","title":"What&#39;s the difference between a Future and a Promise?","body":"<p>No set method in Future interface, only get method, so it is read-only.\nAbout CompletableFuture, this article maybe helpful.\n<a href=\"http://www.deadcoderising.com/java8-writing-asynchronous-code-with-completablefuture/\" rel=\"nofollow noreferrer\">completablefuture</a></p>\n"},{"tags":[],"owner":{"account_id":3021223,"reputation":73,"user_id":2562234,"display_name":"user2562234"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1511633438,"creation_date":1511633438,"answer_id":47489103,"question_id":14541975,"body_markdown":"For client code, Promise is for observing or attaching callback when a result is available, whereas Future is to wait for result and then continue. Theoretically anything which is possible to do with futures what can done with promises, but due to the style difference, the resultant API for promises in different languages make chaining easier.    ","title":"What&#39;s the difference between a Future and a Promise?","body":"<p>For client code, Promise is for observing or attaching callback when a result is available, whereas Future is to wait for result and then continue. Theoretically anything which is possible to do with futures what can done with promises, but due to the style difference, the resultant API for promises in different languages make chaining easier.    </p>\n"},{"tags":[],"owner":{"account_id":16625289,"reputation":1,"user_id":12014554,"display_name":"George Meyer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593694297,"creation_date":1593694297,"answer_id":62696784,"question_id":14541975,"body_markdown":"In [this example][1] you can take a look at how Promises can be used in Java\r\nfor creating asynchronous sequences of calls:\r\n\r\n    doSomeProcess()\r\n        .whenResult(result -&gt; System.out.println(String.format(&quot;Result of some process is &#39;%s&#39;&quot;, result)))\r\n        .whenException(e -&gt; System.out.println(String.format(&quot;Exception after some process is &#39;%s&#39;&quot;, e.getMessage())))\r\n        .map(String::toLowerCase)\r\n        .mapEx((result, e) -&gt; e == null ? String.format(&quot;The mapped result is &#39;%s&#39;&quot;, result) : e.getMessage())\r\n        .whenResult(s -&gt; System.out.println(s));\r\n\r\n  [1]: https://activej.io/promise","title":"What&#39;s the difference between a Future and a Promise?","body":"<p>In <a href=\"https://activej.io/promise\" rel=\"nofollow noreferrer\">this example</a> you can take a look at how Promises can be used in Java\nfor creating asynchronous sequences of calls:</p>\n<pre><code>doSomeProcess()\n    .whenResult(result -&gt; System.out.println(String.format(&quot;Result of some process is '%s'&quot;, result)))\n    .whenException(e -&gt; System.out.println(String.format(&quot;Exception after some process is '%s'&quot;, e.getMessage())))\n    .map(String::toLowerCase)\n    .mapEx((result, e) -&gt; e == null ? String.format(&quot;The mapped result is '%s'&quot;, result) : e.getMessage())\n    .whenResult(s -&gt; System.out.println(s));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6115775,"reputation":30435,"user_id":4770877,"display_name":"yoAlex5"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1659274754,"creation_date":1612648733,"answer_id":66082407,"question_id":14541975,"body_markdown":"**Future vs Promise**\r\n\r\n`Future` and `Promise` are proxy object for unknown result\r\n\r\n`Promise` completes a `Future`\r\n\r\n- `Promise` - write/producer of unknown result.\r\n- `Future` - read/consumer of unknown result. It has next states: pending, fulfilled, canceled \r\n\r\n```\r\n//Future has a reference to Promise\r\nFuture -&gt; Promise\r\n```\r\n\r\nAs a `producer` I `promise` something and responsible for it\r\n\r\nAs a `consumer` who retrieved a `promise` I expect to have a result in `future`. In `future` I can use the `promise` or reject it\r\n\r\nAs for Java `CompletableFutures` it is a `Promise` because you can set the result and also it implements `Future` \r\n","title":"What&#39;s the difference between a Future and a Promise?","body":"<p><strong>Future vs Promise</strong></p>\n<p><code>Future</code> and <code>Promise</code> are proxy object for unknown result</p>\n<p><code>Promise</code> completes a <code>Future</code></p>\n<ul>\n<li><code>Promise</code> - write/producer of unknown result.</li>\n<li><code>Future</code> - read/consumer of unknown result. It has next states: pending, fulfilled, canceled</li>\n</ul>\n<pre><code>//Future has a reference to Promise\nFuture -&gt; Promise\n</code></pre>\n<p>As a <code>producer</code> I <code>promise</code> something and responsible for it</p>\n<p>As a <code>consumer</code> who retrieved a <code>promise</code> I expect to have a result in <code>future</code>. In <code>future</code> I can use the <code>promise</code> or reject it</p>\n<p>As for Java <code>CompletableFutures</code> it is a <code>Promise</code> because you can set the result and also it implements <code>Future</code></p>\n"}],"owner":{"account_id":957889,"reputation":18106,"user_id":982865,"accept_rate":94,"display_name":"Evgenij Reznik"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":220288,"favorite_count":0,"down_vote_count":1,"up_vote_count":379,"accepted_answer_id":14542066,"answer_count":9,"score":378,"last_activity_date":1659274754,"creation_date":1359237382,"question_id":14541975,"body_markdown":"What&#39;s the difference between `Future` and `Promise`?  \r\nThey both act like a placeholder for future results, but where is the main difference?","title":"What&#39;s the difference between a Future and a Promise?","body":"<p>What's the difference between <code>Future</code> and <code>Promise</code>?<br>\nThey both act like a placeholder for future results, but where is the main difference?</p>\n"},{"tags":["java","arrays","json","jackson","hashmap"],"comments":[{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":1,"creation_date":1659206489,"post_id":73178199,"comment_id":129240909,"body_markdown":"`[...]` represents *list/array* of elements. So instead of `Map&lt;String,String&gt; transactionProperties;` you want `List&lt;Map&lt;String,String&gt;&gt; transactionProperties;`","body":"<code>[...]</code> represents <i>list/array</i> of elements. So instead of <code>Map&lt;String,String&gt; transactionProperties;</code> you want <code>List&lt;Map&lt;String,String&gt;&gt; transactionProperties;</code>"},{"owner":{"account_id":1897589,"reputation":13249,"user_id":1714187,"display_name":"1000111"},"score":0,"creation_date":1659207058,"post_id":73178199,"comment_id":129241052,"body_markdown":"Thanks, @Pshemo. After the deserialization, I want to access different keys in the transactionProperties map. If it&#39;s converted into a List&lt;Map&lt;String,String&gt;&gt; then it becomes complex. FYI, the keys are guaranteed to be unique so at the end I want one single flat map. Any idea how to make it better?","body":"Thanks, @Pshemo. After the deserialization, I want to access different keys in the transactionProperties map. If it&#39;s converted into a List&lt;Map&lt;String,String&gt;&gt; then it becomes complex. FYI, the keys are guaranteed to be unique so at the end I want one single flat map. Any idea how to make it better?"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":1,"creation_date":1659207269,"post_id":73178199,"comment_id":129241115,"body_markdown":"&quot;*keys are guaranteed to be unique so at the end I want one single flat map*&quot; consider adding that information to the question since it looks like crucial requirement.","body":"&quot;<i>keys are guaranteed to be unique so at the end I want one single flat map</i>&quot; consider adding that information to the question since it looks like crucial requirement."},{"owner":{"account_id":1897589,"reputation":13249,"user_id":1714187,"display_name":"1000111"},"score":0,"creation_date":1659207462,"post_id":73178199,"comment_id":129241159,"body_markdown":"Thanks for your feedback. Added this information to the question. @Pshemo","body":"Thanks for your feedback. Added this information to the question. @Pshemo"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":1,"creation_date":1659207473,"post_id":73178199,"comment_id":129241162,"body_markdown":"Also please clarify what should be result of *serialization* `TransactionInfo` back to JSON. Should that flat-map be split back to list of objects with single keys or to single object with many unique keys. If it is split back to array of objects then will their order matter?","body":"Also please clarify what should be result of <i>serialization</i> <code>TransactionInfo</code> back to JSON. Should that flat-map be split back to list of objects with single keys or to single object with many unique keys. If it is split back to array of objects then will their order matter?"},{"owner":{"account_id":1897589,"reputation":13249,"user_id":1714187,"display_name":"1000111"},"score":0,"creation_date":1659207587,"post_id":73178199,"comment_id":129241183,"body_markdown":"I don&#39;t have to serialize `TransactionInfo` back to`JSON`. You can skip that part. @Pshemo","body":"I don&#39;t have to serialize <code>TransactionInfo</code> back to<code>JSON</code>. You can skip that part. @Pshemo"}],"answers":[{"tags":[],"owner":{"account_id":8770150,"reputation":90,"user_id":6557264,"display_name":"Alessandro Leo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659206649,"creation_date":1659206649,"answer_id":73178246,"question_id":73178199,"body_markdown":"One option is to change the type of the `transactionProperties` field to `List&lt;ObjectNode&gt;` then iterate over the list and for each element use it&#39;s `fields()` method to retrieve its members","title":"Deserialize json string with nested array of objects with dynamic key","body":"<p>One option is to change the type of the <code>transactionProperties</code> field to <code>List&lt;ObjectNode&gt;</code> then iterate over the list and for each element use it's <code>fields()</code> method to retrieve its members</p>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659209156,"creation_date":1659207898,"answer_id":73178371,"question_id":73178199,"body_markdown":"&gt; the **keys** are guaranteed to be **unique** so in the end, I want one single flat map. Another point, I don&#39;t need to serialize `TransactionInfo` back to JSON.\r\n\r\nSince all keys are unique, and you don&#39;t care about serialization of this POJO back into JSON, you can transform the list of maps into a *map* inside a constructor.\r\n\r\n\r\n    public class TransactionInfo {\r\n        String transactionId;\r\n        Boolean isSettled;\r\n        Map&lt;String, String&gt; transactionProperties;\r\n    \r\n        public TransactionInfo(String transactionId, Boolean isSettled, Map&lt;String, String&gt; transactionProperties) {\r\n            this.transactionId = transactionId;\r\n            this.isSettled = isSettled;\r\n            this.transactionProperties = transactionProperties;\r\n        }\r\n    \r\n        public TransactionInfo(\r\n            @JsonProperty(&quot;transactionId&quot;) String transactionId,\r\n            @JsonProperty(&quot;isSettled&quot;) Boolean isSettled,\r\n            @JsonProperty(&quot;transactionProperties&quot;) List&lt;Map&lt;String, String&gt;&gt; transactionPropertiesList) {\r\n            \r\n            this.transactionId = transactionId;\r\n            this.isSettled = isSettled;\r\n            this.transactionProperties = transactionPropertiesList.stream()\r\n                .flatMap(map -&gt; map.entrySet().stream())\r\n                .collect(Collectors.toMap(\r\n                    Map.Entry::getKey,\r\n                    Map.Entry::getValue\r\n                ));\r\n        }\r\n    }\r\n\r\nCode-snippet from the `main()`:\r\n\r\n```\r\nString json = &quot;&quot;&quot;\r\n            {\r\n               &quot;transactionId&quot;: &quot;EFODKKXHE003&quot;,\r\n               &quot;isSettled&quot;: false,\r\n               &quot;transactionProperties&quot;: [\r\n                 {\r\n                   &quot;key1&quot;: &quot;Value1&quot;\r\n                 },\r\n                 {\r\n                   &quot;key2&quot;: &quot;Value2&quot;\r\n                 },\r\n                 {\r\n                   &quot;key3&quot;: &quot;Value3&quot;\r\n                 }\r\n               ]\r\n             }&quot;&quot;&quot;;\r\n\r\nObjectMapper mapper = new ObjectMapper();\r\nTransactionInfo transactionInfo = mapper.readValue(json, TransactionInfo.class);\r\nSystem.out.println(transactionInfo);\r\n```\r\n*Output:*\r\n```\r\nTransactionInfo{transactionId=&#39;EFODKKXHE003&#39;, isSettled=false, transactionProperties={key1=Value1, key2=Value2, key3=Value3}}\r\n```","title":"Deserialize json string with nested array of objects with dynamic key","body":"<blockquote>\n<p>the <strong>keys</strong> are guaranteed to be <strong>unique</strong> so in the end, I want one single flat map. Another point, I don't need to serialize <code>TransactionInfo</code> back to JSON.</p>\n</blockquote>\n<p>Since all keys are unique, and you don't care about serialization of this POJO back into JSON, you can transform the list of maps into a <em>map</em> inside a constructor.</p>\n<pre><code>public class TransactionInfo {\n    String transactionId;\n    Boolean isSettled;\n    Map&lt;String, String&gt; transactionProperties;\n\n    public TransactionInfo(String transactionId, Boolean isSettled, Map&lt;String, String&gt; transactionProperties) {\n        this.transactionId = transactionId;\n        this.isSettled = isSettled;\n        this.transactionProperties = transactionProperties;\n    }\n\n    public TransactionInfo(\n        @JsonProperty(&quot;transactionId&quot;) String transactionId,\n        @JsonProperty(&quot;isSettled&quot;) Boolean isSettled,\n        @JsonProperty(&quot;transactionProperties&quot;) List&lt;Map&lt;String, String&gt;&gt; transactionPropertiesList) {\n        \n        this.transactionId = transactionId;\n        this.isSettled = isSettled;\n        this.transactionProperties = transactionPropertiesList.stream()\n            .flatMap(map -&gt; map.entrySet().stream())\n            .collect(Collectors.toMap(\n                Map.Entry::getKey,\n                Map.Entry::getValue\n            ));\n    }\n}\n</code></pre>\n<p>Code-snippet from the <code>main()</code>:</p>\n<pre><code>String json = &quot;&quot;&quot;\n            {\n               &quot;transactionId&quot;: &quot;EFODKKXHE003&quot;,\n               &quot;isSettled&quot;: false,\n               &quot;transactionProperties&quot;: [\n                 {\n                   &quot;key1&quot;: &quot;Value1&quot;\n                 },\n                 {\n                   &quot;key2&quot;: &quot;Value2&quot;\n                 },\n                 {\n                   &quot;key3&quot;: &quot;Value3&quot;\n                 }\n               ]\n             }&quot;&quot;&quot;;\n\nObjectMapper mapper = new ObjectMapper();\nTransactionInfo transactionInfo = mapper.readValue(json, TransactionInfo.class);\nSystem.out.println(transactionInfo);\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>TransactionInfo{transactionId='EFODKKXHE003', isSettled=false, transactionProperties={key1=Value1, key2=Value2, key3=Value3}}\n</code></pre>\n"}],"owner":{"account_id":1897589,"reputation":13249,"user_id":1714187,"display_name":"1000111"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":885,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73178371,"answer_count":2,"score":1,"last_activity_date":1659274504,"creation_date":1659206199,"question_id":73178199,"body_markdown":"Given the `JSON` string I need to convert it to my `POJO` named `TransactionInfo`\r\n\r\n**JSON String**\r\n\r\n    {\r\n      &quot;transactionId&quot;: &quot;EFODKKXHE003&quot;,\r\n      &quot;isSettled&quot;: false,\r\n      &quot;transactionProperties&quot;: [\r\n        {\r\n          &quot;key1&quot;: &quot;Value1&quot;\r\n        },\r\n        {\r\n          &quot;key2&quot;: &quot;Value2&quot;\r\n        },\r\n        {\r\n          &quot;key3&quot;: &quot;Value3&quot;\r\n        }\r\n      ]\r\n    }\r\n\r\n**POJO**\r\n\r\n    class TransactionInfo {\r\n       String transactionId;\r\n       Boolean isSettled;\r\n       Map&lt;String,String&gt; transactionProperties;\r\n    }\r\n\r\n**Additional Note (From comment)**\r\n\r\nAfter the deserialization, I want to access different keys in the `transactionProperties` map. If it&#39;s converted into a `List&lt;Map&lt;String,String&gt;&gt;` then it becomes complex. **FYI, the keys are guaranteed to be unique so in the end, I want one single flat map**. Another point, I don&#39;t need to serialize `TransactionInfo` back to `JSON`. \r\n\r\n**What I tried**\r\n\r\n    ObjectMapper objectMapper = new ObjectMapper();\r\n    objectMapper.readValue(jsonString, TransactionInfo.class);\r\n\r\nBut I am getting an exception like below:\r\n\r\n\r\n----------\r\nCannot deserialize value of type `java.util.LinkedHashMap&lt;java.lang.String,java.lang.Object&gt;` from Array value (token `JsonToken.START_ARRAY`)\r\n\r\n\r\nCan anyone guide me on how to do that properly? Any help is much appreciated. \r\n\r\n\r\n\r\n\r\n----------\r\n\r\n\r\n**Edit**\r\n\r\nI have already gone through the following post(s) but none of them seems to match my use case\r\n\r\n - https://stackoverflow.com/questions/35465273/jackson-de-serialize-json-with-dynamic-key","title":"Deserialize json string with nested array of objects with dynamic key","body":"<p>Given the <code>JSON</code> string I need to convert it to my <code>POJO</code> named <code>TransactionInfo</code></p>\n<p><strong>JSON String</strong></p>\n<pre><code>{\n  &quot;transactionId&quot;: &quot;EFODKKXHE003&quot;,\n  &quot;isSettled&quot;: false,\n  &quot;transactionProperties&quot;: [\n    {\n      &quot;key1&quot;: &quot;Value1&quot;\n    },\n    {\n      &quot;key2&quot;: &quot;Value2&quot;\n    },\n    {\n      &quot;key3&quot;: &quot;Value3&quot;\n    }\n  ]\n}\n</code></pre>\n<p><strong>POJO</strong></p>\n<pre><code>class TransactionInfo {\n   String transactionId;\n   Boolean isSettled;\n   Map&lt;String,String&gt; transactionProperties;\n}\n</code></pre>\n<p><strong>Additional Note (From comment)</strong></p>\n<p>After the deserialization, I want to access different keys in the <code>transactionProperties</code> map. If it's converted into a <code>List&lt;Map&lt;String,String&gt;&gt;</code> then it becomes complex. <strong>FYI, the keys are guaranteed to be unique so in the end, I want one single flat map</strong>. Another point, I don't need to serialize <code>TransactionInfo</code> back to <code>JSON</code>.</p>\n<p><strong>What I tried</strong></p>\n<pre><code>ObjectMapper objectMapper = new ObjectMapper();\nobjectMapper.readValue(jsonString, TransactionInfo.class);\n</code></pre>\n<p>But I am getting an exception like below:</p>\n<hr />\n<p>Cannot deserialize value of type <code>java.util.LinkedHashMap&lt;java.lang.String,java.lang.Object&gt;</code> from Array value (token <code>JsonToken.START_ARRAY</code>)</p>\n<p>Can anyone guide me on how to do that properly? Any help is much appreciated.</p>\n<hr />\n<p><strong>Edit</strong></p>\n<p>I have already gone through the following post(s) but none of them seems to match my use case</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/35465273/jackson-de-serialize-json-with-dynamic-key\">Jackson - De-Serialize json with dynamic key</a></li>\n</ul>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":24547019,"reputation":36,"user_id":18456722,"display_name":"Muhammed Duzgun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659273699,"creation_date":1659272779,"answer_id":73183550,"question_id":73179280,"body_markdown":"if you want it to send notification even if app is closed you should use worker class.\r\nHere is the implementation: \r\n\r\n        implementation &quot;androidx.work:work-runtime:2.7.1&quot;\r\n\r\n\r\nthen create a class that extends the worker class. Create this class&#39;s constructor and doWork methods. Create the showNotification method inside the doWork method. Thus, even if the application is closed, you will be able to send notifications within the time intervals you set. The minimum notification time interval is 15 minutes.\r\n\r\nhere is the MyWorkerNotification Class:\r\n\r\n    public class MyWorkerNotification extends Worker {\r\n\r\n    public MyWorkerNotification(@NonNull Context context, @NonNull WorkerParameters workerParams) {\r\n        super(context, workerParams);\r\n    }\r\n\r\n\r\n    @NonNull\r\n    @Override\r\n    public Result doWork() {\r\n        showNotification();\r\n\r\n        return Result.success();\r\n    }\r\n\r\n    private void showNotification() {\r\n\r\n        NotificationCompat.Builder builder;\r\n        NotificationManager notificationManager = (NotificationManager) getApplicationContext().getSystemService(Context.NOTIFICATION_SERVICE);\r\n\r\n        Intent intent = new Intent(getApplicationContext(), MainActivity.class);\r\n        PendingIntent targetActivity = PendingIntent.getActivity(getApplicationContext(),\r\n                1, intent, PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_IMMUTABLE);\r\n\r\n\r\n        if(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n\r\n            String chanelId = &quot;chanelId&quot;;\r\n            String chanelName = &quot;chanelName&quot;;\r\n            String chanelDescription = &quot;chanelDescription&quot;;\r\n            int chanelPriority = NotificationManager.IMPORTANCE_HIGH;\r\n\r\n            NotificationChannel chanel = notificationManager.getNotificationChannel(chanelId);\r\n\r\n            if(chanel == null) {\r\n                chanel = new NotificationChannel(chanelId, chanelName, chanelPriority);\r\n                chanel.setDescription(chanelDescription);\r\n                notificationManager.createNotificationChannel(chanel);\r\n            }\r\n\r\n            builder = new NotificationCompat.Builder(getApplicationContext(), chanelId);\r\n\r\n            builder.setContentTitle(&quot;Title&quot;)\r\n                    .setContentText(&quot;text&quot;)\r\n                    .setSmallIcon(R.drawable.notifications)\r\n                    .setContentIntent(targetActivity)\r\n                    .setAutoCancel(true);\r\n\r\n\r\n        } else {\r\n            //Depreceted\r\n            builder = new NotificationCompat.Builder(getApplicationContext());\r\n\r\n            builder.setContentTitle(&quot;Title&quot;)\r\n                    .setContentText(&quot;text&quot;)\r\n                    .setSmallIcon(R.drawable.notifications)\r\n                    .setContentIntent(targetActivity)\r\n                    .setAutoCancel(true)\r\n                    .setPriority(Notification.PRIORITY_HIGH);\r\n\r\n        }\r\n\r\n        notificationManager.notify(1,builder.build());\r\n\r\n    }\r\n\r\n}\r\n    \r\nand here is the MainActivity Class:\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n\r\n    private ActivityMainBinding activityMainBinding;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        activityMainBinding = ActivityMainBinding.inflate(getLayoutInflater());\r\n        setContentView(activityMainBinding.getRoot());\r\n\r\n        //Button Show Notification\r\n        buttonShowNotificcation();\r\n\r\n    }\r\n\r\n    public void buttonShowNotificcation() {\r\n\r\n\r\n        activityMainBinding.buttonShowNotification.setOnClickListener(view -&gt; {\r\n\r\n\r\n            //Notification Request\r\n            WorkRequest request= new PeriodicWorkRequest.Builder(MyWorkerNotification.class, 15, TimeUnit.MINUTES)\r\n                    .setInitialDelay(10, TimeUnit.SECONDS)\r\n                    .build();\r\n\r\n            WorkManager.getInstance(this).enqueue(request);\r\n\r\n\r\n            \r\n        });\r\n    }\r\n\r\n}\r\n\r\n\r\nso when you click buttonShowNotification in this application, the first notification will come within 10 seconds. You will then be able to send notifications every 15 minutes, even if the app is running in the background.\r\n\r\n\r\n\r\n\r\n ","title":"Issue trying to send android push notification when time is about to reach a value","body":"<p>if you want it to send notification even if app is closed you should use worker class.\nHere is the implementation:</p>\n<pre><code>    implementation &quot;androidx.work:work-runtime:2.7.1&quot;\n</code></pre>\n<p>then create a class that extends the worker class. Create this class's constructor and doWork methods. Create the showNotification method inside the doWork method. Thus, even if the application is closed, you will be able to send notifications within the time intervals you set. The minimum notification time interval is 15 minutes.</p>\n<p>here is the MyWorkerNotification Class:</p>\n<pre><code>public class MyWorkerNotification extends Worker {\n\npublic MyWorkerNotification(@NonNull Context context, @NonNull WorkerParameters workerParams) {\n    super(context, workerParams);\n}\n\n\n@NonNull\n@Override\npublic Result doWork() {\n    showNotification();\n\n    return Result.success();\n}\n\nprivate void showNotification() {\n\n    NotificationCompat.Builder builder;\n    NotificationManager notificationManager = (NotificationManager) getApplicationContext().getSystemService(Context.NOTIFICATION_SERVICE);\n\n    Intent intent = new Intent(getApplicationContext(), MainActivity.class);\n    PendingIntent targetActivity = PendingIntent.getActivity(getApplicationContext(),\n            1, intent, PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_IMMUTABLE);\n\n\n    if(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n\n        String chanelId = &quot;chanelId&quot;;\n        String chanelName = &quot;chanelName&quot;;\n        String chanelDescription = &quot;chanelDescription&quot;;\n        int chanelPriority = NotificationManager.IMPORTANCE_HIGH;\n\n        NotificationChannel chanel = notificationManager.getNotificationChannel(chanelId);\n\n        if(chanel == null) {\n            chanel = new NotificationChannel(chanelId, chanelName, chanelPriority);\n            chanel.setDescription(chanelDescription);\n            notificationManager.createNotificationChannel(chanel);\n        }\n\n        builder = new NotificationCompat.Builder(getApplicationContext(), chanelId);\n\n        builder.setContentTitle(&quot;Title&quot;)\n                .setContentText(&quot;text&quot;)\n                .setSmallIcon(R.drawable.notifications)\n                .setContentIntent(targetActivity)\n                .setAutoCancel(true);\n\n\n    } else {\n        //Depreceted\n        builder = new NotificationCompat.Builder(getApplicationContext());\n\n        builder.setContentTitle(&quot;Title&quot;)\n                .setContentText(&quot;text&quot;)\n                .setSmallIcon(R.drawable.notifications)\n                .setContentIntent(targetActivity)\n                .setAutoCancel(true)\n                .setPriority(Notification.PRIORITY_HIGH);\n\n    }\n\n    notificationManager.notify(1,builder.build());\n\n}\n</code></pre>\n<p>}</p>\n<p>and here is the MainActivity Class:</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\nprivate ActivityMainBinding activityMainBinding;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    activityMainBinding = ActivityMainBinding.inflate(getLayoutInflater());\n    setContentView(activityMainBinding.getRoot());\n\n    //Button Show Notification\n    buttonShowNotificcation();\n\n}\n\npublic void buttonShowNotificcation() {\n\n\n    activityMainBinding.buttonShowNotification.setOnClickListener(view -&gt; {\n\n\n        //Notification Request\n        WorkRequest request= new PeriodicWorkRequest.Builder(MyWorkerNotification.class, 15, TimeUnit.MINUTES)\n                .setInitialDelay(10, TimeUnit.SECONDS)\n                .build();\n\n        WorkManager.getInstance(this).enqueue(request);\n\n\n        \n    });\n}\n</code></pre>\n<p>}</p>\n<p>so when you click buttonShowNotification in this application, the first notification will come within 10 seconds. You will then be able to send notifications every 15 minutes, even if the app is running in the background.</p>\n"}],"owner":{"account_id":22250524,"reputation":181,"user_id":16483521,"display_name":"ServletException"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659273699,"creation_date":1659217907,"question_id":73179280,"body_markdown":"I have a Project management app with Java android and I&#39;d like to implement a push notification feature where a user can select the intervals in which they would like to be reminded before the projects due date is reached.\r\n\r\nAt the moment when creating a project, a user can select to be reminded 2 weeks before a due date, 1 week, 1 day etc.. and then it should send notifications when it&#39;s time (similar to the Notion app if you&#39;ve used it).\r\n\r\nMy question is, how do I send a push notification when these conditions are met, I&#39;m aware i would need some type of service to continuously check if certain interval is reached even if the app is closed so the notification can be sent, but unsure of the full process.\r\n\r\n\r\n\r\n\r\n","title":"Issue trying to send android push notification when time is about to reach a value","body":"<p>I have a Project management app with Java android and I'd like to implement a push notification feature where a user can select the intervals in which they would like to be reminded before the projects due date is reached.</p>\n<p>At the moment when creating a project, a user can select to be reminded 2 weeks before a due date, 1 week, 1 day etc.. and then it should send notifications when it's time (similar to the Notion app if you've used it).</p>\n<p>My question is, how do I send a push notification when these conditions are met, I'm aware i would need some type of service to continuously check if certain interval is reached even if the app is closed so the notification can be sent, but unsure of the full process.</p>\n"},{"tags":["java","multithreading","profiling"],"comments":[{"owner":{"account_id":292208,"reputation":10665,"user_id":2245707,"accept_rate":17,"display_name":"pveentjer"},"score":0,"creation_date":1659277400,"post_id":73182853,"comment_id":129251447,"body_markdown":"Runnable means that it scheduled or running. What do you want to do?","body":"Runnable means that it scheduled or running. What do you want to do?"},{"owner":{"account_id":25534785,"reputation":532,"user_id":19322069,"display_name":"access violation"},"score":2,"creation_date":1659282441,"post_id":73182853,"comment_id":129252661,"body_markdown":"I don&#39;t suppose Java has any need to care whether they&#39;re running or not. In most systems, that&#39;s the operating system scheduler&#39;s job.  In any case, if all 4 CPUs were occupied with running your compute threads, you asking what was running would have to pre-empt one of them.","body":"I don&#39;t suppose Java has any need to care whether they&#39;re running or not. In most systems, that&#39;s the operating system scheduler&#39;s job.  In any case, if all 4 CPUs were occupied with running your compute threads, you asking what was running would have to pre-empt one of them."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1659285081,"post_id":73182853,"comment_id":129253271,"body_markdown":"I dont know the details, but I suspect youll find thread debugging and monitoring is being revamped now as part of the *Project Loom* technology being previewed in Java 19 for [virtual threads](https://openjdk.org/jeps/425), [structured concurrency](https://openjdk.org/jeps/428), and more. The Loom changes meant some serious reworking of Java internals. You may find improved thread debugging/monitoring features in the IDEs soon, perhaps in their early access versions.","body":"I dont know the details, but I suspect youll find thread debugging and monitoring is being revamped now as part of the <i>Project Loom</i> technology being previewed in Java 19 for <a href=\"https://openjdk.org/jeps/425\" rel=\"nofollow noreferrer\">virtual threads</a>, <a href=\"https://openjdk.org/jeps/428\" rel=\"nofollow noreferrer\">structured concurrency</a>, and more. The Loom changes meant some serious reworking of Java internals. You may find improved thread debugging/monitoring features in the IDEs soon, perhaps in their early access versions."}],"owner":{"account_id":7287204,"reputation":1737,"user_id":5554930,"accept_rate":52,"display_name":"Rahul"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1659273147,"creation_date":1659266373,"question_id":73182853,"body_markdown":"Is it possible in java to understand if my thread is actually running or is it waiting for CPU to give it some time? It looks like it is not mapped to java thread states (like BLOCKED, WAITING, etc.)\r\n\r\nI have started 50 CPU-intensive threads on a 4 CPU machine. All of these threads are shown as &quot;RUNNABLE&quot;. jstack / jvisualvm are showing all of them as runnable. Tasks are not using native code exxplicitly.","title":"Is it possible to understand which are really running and which are waiting for CPU time?","body":"<p>Is it possible in java to understand if my thread is actually running or is it waiting for CPU to give it some time? It looks like it is not mapped to java thread states (like BLOCKED, WAITING, etc.)</p>\n<p>I have started 50 CPU-intensive threads on a 4 CPU machine. All of these threads are shown as &quot;RUNNABLE&quot;. jstack / jvisualvm are showing all of them as runnable. Tasks are not using native code exxplicitly.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":4468601,"reputation":7627,"user_id":3635454,"accept_rate":75,"display_name":"pleft"},"score":0,"creation_date":1633717667,"post_id":69500042,"comment_id":122843415,"body_markdown":"And your `@SpringBootApplication` class please? Also please post the packages of your classes maybe the missing clue is there.","body":"And your <code>@SpringBootApplication</code> class please? Also please post the packages of your classes maybe the missing clue is there."},{"owner":{"account_id":2637536,"reputation":1977,"user_id":2281858,"accept_rate":62,"display_name":"user2281858"},"score":0,"creation_date":1633719919,"post_id":69500042,"comment_id":122844181,"body_markdown":"@pleft added the SpringBootApplication and also the packages, please check.","body":"@pleft added the SpringBootApplication and also the packages, please check."},{"owner":{"account_id":4468601,"reputation":7627,"user_id":3635454,"accept_rate":75,"display_name":"pleft"},"score":0,"creation_date":1633720521,"post_id":69500042,"comment_id":122844373,"body_markdown":"Hmm I think you should post the whole error stacktrace and not just those 3 lines...Do you have any class annotated `@Configuration` by the way? Make sure you post its code also","body":"Hmm I think you should post the whole error stacktrace and not just those 3 lines...Do you have any class annotated <code>@Configuration</code> by the way? Make sure you post its code also"},{"owner":{"account_id":10218955,"reputation":101,"user_id":7543702,"display_name":"Sebastian Aguerre"},"score":0,"creation_date":1633720871,"post_id":69500042,"comment_id":122844462,"body_markdown":"I&#39;d recommend you to autowire beans in constructors, not only it&#39;s a better practice, but it will help you debug better.","body":"I&#39;d recommend you to autowire beans in constructors, not only it&#39;s a better practice, but it will help you debug better."},{"owner":{"account_id":2637536,"reputation":1977,"user_id":2281858,"accept_rate":62,"display_name":"user2281858"},"score":0,"creation_date":1633721338,"post_id":69500042,"comment_id":122844592,"body_markdown":"@SebastianAguerre what do you mean by Autowire beans in constrcture.","body":"@SebastianAguerre what do you mean by Autowire beans in constrcture."},{"owner":{"account_id":2637536,"reputation":1977,"user_id":2281858,"accept_rate":62,"display_name":"user2281858"},"score":0,"creation_date":1633721428,"post_id":69500042,"comment_id":122844619,"body_markdown":"@pleft i added the full error stack trace.","body":"@pleft i added the full error stack trace."},{"owner":{"account_id":10218955,"reputation":101,"user_id":7543702,"display_name":"Sebastian Aguerre"},"score":0,"creation_date":1633721727,"post_id":69500042,"comment_id":122844705,"body_markdown":"@user2281858 See this https://www.baeldung.com/spring-autowire","body":"@user2281858 See this <a href=\"https://www.baeldung.com/spring-autowire\" rel=\"nofollow noreferrer\">baeldung.com/spring-autowire</a>"}],"answers":[{"tags":[],"owner":{"account_id":4468601,"reputation":7627,"user_id":3635454,"accept_rate":75,"display_name":"pleft"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1633721621,"creation_date":1633721621,"answer_id":69500935,"question_id":69500042,"body_markdown":"The actual error is:\r\n\r\n    Caused by: org.springframework.data.mapping.PropertyReferenceException: No property id found for type Department!\r\n\r\nYour repository method:\r\n\r\n    Department findDepartmentById(Long departmentId);\r\n\r\nBut you dont have `id` property in your `Department` entity. You have `departmentId`. So try renaming your method to something like:\r\n\r\n    Department findByDepartmentId(Long departmentId);","title":"JAVA: Error creating bean with name; Unsatisfied dependency expressed through field","body":"<p>The actual error is:</p>\n<pre><code>Caused by: org.springframework.data.mapping.PropertyReferenceException: No property id found for type Department!\n</code></pre>\n<p>Your repository method:</p>\n<pre><code>Department findDepartmentById(Long departmentId);\n</code></pre>\n<p>But you dont have <code>id</code> property in your <code>Department</code> entity. You have <code>departmentId</code>. So try renaming your method to something like:</p>\n<pre><code>Department findByDepartmentId(Long departmentId);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15252346,"reputation":1,"user_id":11005304,"display_name":"Azam Khan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659273042,"creation_date":1659268803,"answer_id":73183126,"question_id":69500042,"body_markdown":"Instead of writing `department_id` try to use id in `Department` entity.","title":"JAVA: Error creating bean with name; Unsatisfied dependency expressed through field","body":"<p>Instead of writing <code>department_id</code> try to use id in <code>Department</code> entity.</p>\n"}],"owner":{"account_id":2637536,"reputation":1977,"user_id":2281858,"accept_rate":62,"display_name":"user2281858"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13264,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":69500935,"answer_count":2,"score":0,"last_activity_date":1659273042,"creation_date":1633716272,"question_id":69500042,"body_markdown":"I have the following code and structure. I am getting the following error, it is very long error message.\r\n\r\n&gt; Error creating bean with name &#39;departmentController&#39;: Unsatisfied\r\n&gt; dependency expressed through field &#39;departmentService&#39;; nested\r\n&gt; exception is\r\n&gt; org.springframework.beans.factory.UnsatisfiedDependencyException:\r\n\r\nEntity Class\r\n\r\n    package com.example.departmentservice.entity;\r\n    \r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.GenerationType;\r\n    import javax.persistence.Id;\r\n    \r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Data;\r\n    import lombok.NoArgsConstructor;\r\n\r\n    @Entity\r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class Department {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n        private Long departmentId;\r\n        private String departmentName;\r\n        private String departmentAddress;\r\n        private String departmentCode;\r\n    }\r\n\r\nRepository Interface\r\n\r\n    package com.example.departmentservice.repository;\r\n    \r\n    import com.example.departmentservice.entity.Department;\r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import org.springframework.stereotype.Repository;\r\n\r\n    @Repository\r\n    public interface DepartmentRepository extends JpaRepository&lt;Department, Long&gt; {\r\n        Department findDepartmentById(Long departmentId);\r\n    }\r\n\r\nService  Class\r\n\r\n    package com.example.departmentservice.service;\r\n    \r\n    import com.example.departmentservice.entity.Department;\r\n    import com.example.departmentservice.repository.DepartmentRepository;\r\n    import lombok.extern.slf4j.Slf4j;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Service;\r\n\r\n    @Service\r\n    @Slf4j\r\n    public class DepartmentService {\r\n        @Autowired\r\n        private DepartmentRepository departmentRepository;\r\n    \r\n        public Department saveDepartment(Department department) {\r\n            log.info(&quot;Inside saveDepartment of department service&quot;);\r\n            return departmentRepository.save(department);\r\n        }\r\n    \r\n        public Department findDepartmentById(Long departmentId) {\r\n            log.info(&quot;Inside findDepartmentById of department service&quot;);\r\n            return departmentRepository.findDepartmentById(departmentId);\r\n        }\r\n    }\r\n\r\nController Class\r\n\r\n    package com.example.departmentservice.controller;\r\n    \r\n    import com.example.departmentservice.entity.Department;\r\n    import com.example.departmentservice.service.DepartmentService;\r\n    import lombok.extern.slf4j.Slf4j;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.PathVariable;\r\n    import org.springframework.web.bind.annotation.PostMapping;\r\n    import org.springframework.web.bind.annotation.RequestBody;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/departments&quot;)\r\n    @Slf4j\r\n    public class DepartmentController {\r\n        @Autowired\r\n        private DepartmentService departmentService;\r\n    \r\n        @PostMapping(&quot;/&quot;)\r\n        public Department saveDepartment(@RequestBody Department department) {\r\n            log.info(&quot;Inside saveDepartment of department controller&quot;);\r\n            return departmentService.saveDepartment(department);\r\n        }\r\n    \r\n        @GetMapping(&quot;/{id}&quot;)\r\n        public Department findDepartmentById(@PathVariable(&quot;id&quot;) Long departmentId) {\r\n            log.info(&quot;Inside findDepartmentById of department controller&quot;);\r\n            return departmentService.findDepartmentById(departmentId);\r\n        }\r\n    }\r\n\r\nMain class\r\n\r\n    package com.example.departmentservice;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n    @SpringBootApplication\r\n    public class DepartmentServiceApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(DepartmentServiceApplication.class, args);\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\nProject Structure\r\n\r\n    src\r\n      main\r\n        java\r\n          com.example.departmentservice\r\n            controller\r\n            entity\r\n            repository\r\n            service\r\n\r\nFull Error Stack Trace:\r\n\r\n    org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;departmentController&#39;: Unsatisfied dependency expressed through field &#39;departmentService&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;departmentService&#39;: Unsatisfied dependency expressed through field &#39;departmentRepository&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;departmentRepository&#39; defined in com.example.departmentservice.repository.DepartmentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! Reason: Failed to create query for method public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! No property id found for type Department!; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! No property id found for type Department!\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:660) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:944) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) [spring-boot-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434) [spring-boot-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:338) [spring-boot-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1343) [spring-boot-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1332) [spring-boot-2.5.5.jar:2.5.5]\r\n    \tat com.example.departmentservice.DepartmentServiceApplication.main(DepartmentServiceApplication.java:10) [classes/:na]\r\n    Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;departmentService&#39;: Unsatisfied dependency expressed through field &#39;departmentRepository&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;departmentRepository&#39; defined in com.example.departmentservice.repository.DepartmentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! Reason: Failed to create query for method public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! No property id found for type Department!; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! No property id found for type Department!\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:660) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1380) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1300) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:657) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \t... 20 common frames omitted\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;departmentRepository&#39; defined in com.example.departmentservice.repository.DepartmentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! Reason: Failed to create query for method public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! No property id found for type Department!; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! No property id found for type Department!\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1380) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1300) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:657) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \t... 34 common frames omitted\r\n    Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! Reason: Failed to create query for method public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! No property id found for type Department!; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! No property id found for type Department!\r\n    \tat org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101) ~[spring-data-commons-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:106) ~[spring-data-commons-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$mapMethodsToQuery$1(QueryExecutorMethodInterceptor.java:94) ~[spring-data-commons-2.5.5.jar:2.5.5]\r\n    \tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193) ~[na:1.8.0_292]\r\n    \tat java.util.Iterator.forEachRemaining(Iterator.java:116) ~[na:1.8.0_292]\r\n    \tat java.util.Collections$UnmodifiableCollection$1.forEachRemaining(Collections.java:1051) ~[na:1.8.0_292]\r\n    \tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801) ~[na:1.8.0_292]\r\n    \tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482) ~[na:1.8.0_292]\r\n    \tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472) ~[na:1.8.0_292]\r\n    \tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708) ~[na:1.8.0_292]\r\n    \tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:1.8.0_292]\r\n    \tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566) ~[na:1.8.0_292]\r\n    \tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:96) ~[spring-data-commons-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:86) ~[spring-data-commons-2.5.5.jar:2.5.5]\r\n    \tat java.util.Optional.map(Optional.java:215) ~[na:1.8.0_292]\r\n    \tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.&lt;init&gt;(QueryExecutorMethodInterceptor.java:86) ~[spring-data-commons-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:360) ~[spring-data-commons-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:323) ~[spring-data-commons-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.data.util.Lazy.getNullable(Lazy.java:230) ~[spring-data-commons-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:329) ~[spring-data-commons-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:144) ~[spring-data-jpa-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \t... 44 common frames omitted\r\n    Caused by: java.lang.IllegalArgumentException: Failed to create query for method public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! No property id found for type Department!\r\n    \tat org.springframework.data.jpa.repository.query.PartTreeJpaQuery.&lt;init&gt;(PartTreeJpaQuery.java:96) ~[spring-data-jpa-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:107) ~[spring-data-jpa-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:218) ~[spring-data-jpa-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:81) ~[spring-data-jpa-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:102) ~[spring-data-commons-2.5.5.jar:2.5.5]\r\n    \t... 66 common frames omitted\r\n    Caused by: org.springframework.data.mapping.PropertyReferenceException: No property id found for type Department!\r\n    \tat org.springframework.data.mapping.PropertyPath.&lt;init&gt;(PropertyPath.java:90) ~[spring-data-commons-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:437) ~[spring-data-commons-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:413) ~[spring-data-commons-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.data.mapping.PropertyPath.lambda$from$0(PropertyPath.java:366) ~[spring-data-commons-2.5.5.jar:2.5.5]\r\n    \tat java.util.concurrent.ConcurrentMap.computeIfAbsent(ConcurrentMap.java:324) ~[na:1.8.0_292]\r\n    \tat org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:348) ~[spring-data-commons-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:331) ~[spring-data-commons-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.data.repository.query.parser.Part.&lt;init&gt;(Part.java:81) ~[spring-data-commons-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.data.repository.query.parser.PartTree$OrPart.lambda$new$0(PartTree.java:249) ~[spring-data-commons-2.5.5.jar:2.5.5]\r\n    \tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193) ~[na:1.8.0_292]\r\n    \tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175) ~[na:1.8.0_292]\r\n    \tat java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948) ~[na:1.8.0_292]\r\n    \tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482) ~[na:1.8.0_292]\r\n    \tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472) ~[na:1.8.0_292]\r\n    \tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708) ~[na:1.8.0_292]\r\n    \tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:1.8.0_292]\r\n    \tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566) ~[na:1.8.0_292]\r\n    \tat org.springframework.data.repository.query.parser.PartTree$OrPart.&lt;init&gt;(PartTree.java:250) ~[spring-data-commons-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.data.repository.query.parser.PartTree$Predicate.lambda$new$0(PartTree.java:383) ~[spring-data-commons-2.5.5.jar:2.5.5]\r\n    \tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193) ~[na:1.8.0_292]\r\n    \tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175) ~[na:1.8.0_292]\r\n    \tat java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948) ~[na:1.8.0_292]\r\n    \tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482) ~[na:1.8.0_292]\r\n    \tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472) ~[na:1.8.0_292]\r\n    \tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708) ~[na:1.8.0_292]\r\n    \tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:1.8.0_292]\r\n    \tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566) ~[na:1.8.0_292]\r\n    \tat org.springframework.data.repository.query.parser.PartTree$Predicate.&lt;init&gt;(PartTree.java:384) ~[spring-data-commons-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.data.repository.query.parser.PartTree.&lt;init&gt;(PartTree.java:95) ~[spring-data-commons-2.5.5.jar:2.5.5]\r\n    \tat org.springframework.data.jpa.repository.query.PartTreeJpaQuery.&lt;init&gt;(PartTreeJpaQuery.java:89) ~[spring-data-jpa-2.5.5.jar:2.5.5]\r\n    \t... 70 common frames omitted\r\n\r\n\r\n\r\n\r\n","title":"JAVA: Error creating bean with name; Unsatisfied dependency expressed through field","body":"<p>I have the following code and structure. I am getting the following error, it is very long error message.</p>\n<blockquote>\n<p>Error creating bean with name 'departmentController': Unsatisfied\ndependency expressed through field 'departmentService'; nested\nexception is\norg.springframework.beans.factory.UnsatisfiedDependencyException:</p>\n</blockquote>\n<p>Entity Class</p>\n<pre><code>package com.example.departmentservice.entity;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Entity\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\npublic class Department {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long departmentId;\n    private String departmentName;\n    private String departmentAddress;\n    private String departmentCode;\n}\n</code></pre>\n<p>Repository Interface</p>\n<pre><code>package com.example.departmentservice.repository;\n\nimport com.example.departmentservice.entity.Department;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface DepartmentRepository extends JpaRepository&lt;Department, Long&gt; {\n    Department findDepartmentById(Long departmentId);\n}\n</code></pre>\n<p>Service  Class</p>\n<pre><code>package com.example.departmentservice.service;\n\nimport com.example.departmentservice.entity.Department;\nimport com.example.departmentservice.repository.DepartmentRepository;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\n@Service\n@Slf4j\npublic class DepartmentService {\n    @Autowired\n    private DepartmentRepository departmentRepository;\n\n    public Department saveDepartment(Department department) {\n        log.info(&quot;Inside saveDepartment of department service&quot;);\n        return departmentRepository.save(department);\n    }\n\n    public Department findDepartmentById(Long departmentId) {\n        log.info(&quot;Inside findDepartmentById of department service&quot;);\n        return departmentRepository.findDepartmentById(departmentId);\n    }\n}\n</code></pre>\n<p>Controller Class</p>\n<pre><code>package com.example.departmentservice.controller;\n\nimport com.example.departmentservice.entity.Department;\nimport com.example.departmentservice.service.DepartmentService;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(&quot;/departments&quot;)\n@Slf4j\npublic class DepartmentController {\n    @Autowired\n    private DepartmentService departmentService;\n\n    @PostMapping(&quot;/&quot;)\n    public Department saveDepartment(@RequestBody Department department) {\n        log.info(&quot;Inside saveDepartment of department controller&quot;);\n        return departmentService.saveDepartment(department);\n    }\n\n    @GetMapping(&quot;/{id}&quot;)\n    public Department findDepartmentById(@PathVariable(&quot;id&quot;) Long departmentId) {\n        log.info(&quot;Inside findDepartmentById of department controller&quot;);\n        return departmentService.findDepartmentById(departmentId);\n    }\n}\n</code></pre>\n<p>Main class</p>\n<pre><code>package com.example.departmentservice;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class DepartmentServiceApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DepartmentServiceApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>Project Structure</p>\n<pre><code>src\n  main\n    java\n      com.example.departmentservice\n        controller\n        entity\n        repository\n        service\n</code></pre>\n<p>Full Error Stack Trace:</p>\n<pre><code>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'departmentController': Unsatisfied dependency expressed through field 'departmentService'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'departmentService': Unsatisfied dependency expressed through field 'departmentRepository'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'departmentRepository' defined in com.example.departmentservice.repository.DepartmentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! Reason: Failed to create query for method public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! No property id found for type Department!; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! No property id found for type Department!\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:660) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:944) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.10.jar:5.3.10]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.10.jar:5.3.10]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.5.5.jar:2.5.5]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) [spring-boot-2.5.5.jar:2.5.5]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434) [spring-boot-2.5.5.jar:2.5.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:338) [spring-boot-2.5.5.jar:2.5.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343) [spring-boot-2.5.5.jar:2.5.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1332) [spring-boot-2.5.5.jar:2.5.5]\n    at com.example.departmentservice.DepartmentServiceApplication.main(DepartmentServiceApplication.java:10) [classes/:na]\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'departmentService': Unsatisfied dependency expressed through field 'departmentRepository'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'departmentRepository' defined in com.example.departmentservice.repository.DepartmentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! Reason: Failed to create query for method public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! No property id found for type Department!; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! No property id found for type Department!\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:660) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1380) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1300) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:657) ~[spring-beans-5.3.10.jar:5.3.10]\n    ... 20 common frames omitted\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'departmentRepository' defined in com.example.departmentservice.repository.DepartmentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! Reason: Failed to create query for method public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! No property id found for type Department!; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! No property id found for type Department!\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1380) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1300) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:657) ~[spring-beans-5.3.10.jar:5.3.10]\n    ... 34 common frames omitted\nCaused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! Reason: Failed to create query for method public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! No property id found for type Department!; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! No property id found for type Department!\n    at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101) ~[spring-data-commons-2.5.5.jar:2.5.5]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:106) ~[spring-data-commons-2.5.5.jar:2.5.5]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$mapMethodsToQuery$1(QueryExecutorMethodInterceptor.java:94) ~[spring-data-commons-2.5.5.jar:2.5.5]\n    at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193) ~[na:1.8.0_292]\n    at java.util.Iterator.forEachRemaining(Iterator.java:116) ~[na:1.8.0_292]\n    at java.util.Collections$UnmodifiableCollection$1.forEachRemaining(Collections.java:1051) ~[na:1.8.0_292]\n    at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801) ~[na:1.8.0_292]\n    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482) ~[na:1.8.0_292]\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472) ~[na:1.8.0_292]\n    at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708) ~[na:1.8.0_292]\n    at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:1.8.0_292]\n    at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566) ~[na:1.8.0_292]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:96) ~[spring-data-commons-2.5.5.jar:2.5.5]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:86) ~[spring-data-commons-2.5.5.jar:2.5.5]\n    at java.util.Optional.map(Optional.java:215) ~[na:1.8.0_292]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.&lt;init&gt;(QueryExecutorMethodInterceptor.java:86) ~[spring-data-commons-2.5.5.jar:2.5.5]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:360) ~[spring-data-commons-2.5.5.jar:2.5.5]\n    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:323) ~[spring-data-commons-2.5.5.jar:2.5.5]\n    at org.springframework.data.util.Lazy.getNullable(Lazy.java:230) ~[spring-data-commons-2.5.5.jar:2.5.5]\n    at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-2.5.5.jar:2.5.5]\n    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:329) ~[spring-data-commons-2.5.5.jar:2.5.5]\n    at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:144) ~[spring-data-jpa-2.5.5.jar:2.5.5]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.10.jar:5.3.10]\n    ... 44 common frames omitted\nCaused by: java.lang.IllegalArgumentException: Failed to create query for method public abstract com.example.departmentservice.entity.Department com.example.departmentservice.repository.DepartmentRepository.findDepartmentById(java.lang.Long)! No property id found for type Department!\n    at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.&lt;init&gt;(PartTreeJpaQuery.java:96) ~[spring-data-jpa-2.5.5.jar:2.5.5]\n    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:107) ~[spring-data-jpa-2.5.5.jar:2.5.5]\n    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:218) ~[spring-data-jpa-2.5.5.jar:2.5.5]\n    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:81) ~[spring-data-jpa-2.5.5.jar:2.5.5]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:102) ~[spring-data-commons-2.5.5.jar:2.5.5]\n    ... 66 common frames omitted\nCaused by: org.springframework.data.mapping.PropertyReferenceException: No property id found for type Department!\n    at org.springframework.data.mapping.PropertyPath.&lt;init&gt;(PropertyPath.java:90) ~[spring-data-commons-2.5.5.jar:2.5.5]\n    at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:437) ~[spring-data-commons-2.5.5.jar:2.5.5]\n    at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:413) ~[spring-data-commons-2.5.5.jar:2.5.5]\n    at org.springframework.data.mapping.PropertyPath.lambda$from$0(PropertyPath.java:366) ~[spring-data-commons-2.5.5.jar:2.5.5]\n    at java.util.concurrent.ConcurrentMap.computeIfAbsent(ConcurrentMap.java:324) ~[na:1.8.0_292]\n    at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:348) ~[spring-data-commons-2.5.5.jar:2.5.5]\n    at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:331) ~[spring-data-commons-2.5.5.jar:2.5.5]\n    at org.springframework.data.repository.query.parser.Part.&lt;init&gt;(Part.java:81) ~[spring-data-commons-2.5.5.jar:2.5.5]\n    at org.springframework.data.repository.query.parser.PartTree$OrPart.lambda$new$0(PartTree.java:249) ~[spring-data-commons-2.5.5.jar:2.5.5]\n    at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193) ~[na:1.8.0_292]\n    at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175) ~[na:1.8.0_292]\n    at java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948) ~[na:1.8.0_292]\n    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482) ~[na:1.8.0_292]\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472) ~[na:1.8.0_292]\n    at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708) ~[na:1.8.0_292]\n    at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:1.8.0_292]\n    at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566) ~[na:1.8.0_292]\n    at org.springframework.data.repository.query.parser.PartTree$OrPart.&lt;init&gt;(PartTree.java:250) ~[spring-data-commons-2.5.5.jar:2.5.5]\n    at org.springframework.data.repository.query.parser.PartTree$Predicate.lambda$new$0(PartTree.java:383) ~[spring-data-commons-2.5.5.jar:2.5.5]\n    at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193) ~[na:1.8.0_292]\n    at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175) ~[na:1.8.0_292]\n    at java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948) ~[na:1.8.0_292]\n    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482) ~[na:1.8.0_292]\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472) ~[na:1.8.0_292]\n    at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708) ~[na:1.8.0_292]\n    at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:1.8.0_292]\n    at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566) ~[na:1.8.0_292]\n    at org.springframework.data.repository.query.parser.PartTree$Predicate.&lt;init&gt;(PartTree.java:384) ~[spring-data-commons-2.5.5.jar:2.5.5]\n    at org.springframework.data.repository.query.parser.PartTree.&lt;init&gt;(PartTree.java:95) ~[spring-data-commons-2.5.5.jar:2.5.5]\n    at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.&lt;init&gt;(PartTreeJpaQuery.java:89) ~[spring-data-jpa-2.5.5.jar:2.5.5]\n    ... 70 common frames omitted\n</code></pre>\n"},{"tags":["java","file"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1659187923,"post_id":73175808,"comment_id":129236739,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1659190463,"post_id":73175808,"comment_id":129237306,"body_markdown":"A compiled program contains compiled classes and program resources.  It does not and should not contain the projects source directory.  Furthermore, you cannot and must not try to modify your program at runtime.  If you want to save an image, dont try to write inside your program;  write to a known external location, like a subdirectory of the systems temporary directory.","body":"A compiled program contains compiled classes and program resources.  It does not and should not contain the projects source directory.  Furthermore, you cannot and must not try to modify your program at runtime.  If you want to save an image, dont try to write inside your program;  write to a known external location, like a subdirectory of the systems temporary directory."}],"answers":[{"tags":[],"owner":{"account_id":15708211,"reputation":1,"user_id":11334371,"display_name":"Samad Soleimani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659270957,"creation_date":1659270957,"answer_id":73183357,"question_id":73175808,"body_markdown":"if you want to use dynamic addressing\r\nin linux based system :\r\n\r\n    String filePath = System.getProperty(&quot;user.dir&quot;)+&quot;/path/to/file/QR_Code.png&quot;;\r\n\r\nin windows based system :\r\n\r\n    String filePath = System.getProperty(&quot;user.dir&quot;)+&quot;\\\\path\\\\to\\\\file\\\\QR_Code.png&quot;;\r\n\r\nSystem.getProperty(&quot;user.dir&quot;) is your project address.\r\n\r\nif you want to use static addressing\r\nin linux based system :\r\n\r\n    String filePath = &quot;/home/username/eclipse-workspace/test/path/to/file/QR_Code.png&quot;;\r\n\r\nin windows based system :\r\n\r\n    String filePath = &quot;C:\\\\Work\\\\QR_CODE\\\\QR_Code.png&quot;;\r\n\r\n","title":"FileNotFoundException when reading file in resources folder","body":"<p>if you want to use dynamic addressing\nin linux based system :</p>\n<pre><code>String filePath = System.getProperty(&quot;user.dir&quot;)+&quot;/path/to/file/QR_Code.png&quot;;\n</code></pre>\n<p>in windows based system :</p>\n<pre><code>String filePath = System.getProperty(&quot;user.dir&quot;)+&quot;\\\\path\\\\to\\\\file\\\\QR_Code.png&quot;;\n</code></pre>\n<p>System.getProperty(&quot;user.dir&quot;) is your project address.</p>\n<p>if you want to use static addressing\nin linux based system :</p>\n<pre><code>String filePath = &quot;/home/username/eclipse-workspace/test/path/to/file/QR_Code.png&quot;;\n</code></pre>\n<p>in windows based system :</p>\n<pre><code>String filePath = &quot;C:\\\\Work\\\\QR_CODE\\\\QR_Code.png&quot;;\n</code></pre>\n"}],"owner":{"account_id":25932970,"reputation":1,"user_id":19653744,"display_name":"Mayank Palandurkar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659272992,"creation_date":1659185789,"question_id":73175808,"body_markdown":"Code:\r\n\r\n      String filePath = &quot;src//main//resources//QR_CODE//QR_Code.png&quot;;\r\n                //String filePath = &quot;C:\\\\Work\\\\QR_CODE\\\\QR_Code.png&quot;;\r\n                String charset = &quot;UTF-8&quot;; // or &quot;ISO-8859-1&quot;\r\n                Map &lt;EncodeHintType, ErrorCorrectionLevel&gt; hintMap = new HashMap &lt; EncodeHintType, ErrorCorrectionLevel &gt; ();\r\n                hintMap.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.L);\r\n                BitMatrix matrix = new MultiFormatWriter().encode(\r\n                        new String(qrCodeData.getBytes(charset), charset),\r\n                        BarcodeFormat.QR_CODE, 200, 200, hintMap);\r\n                MatrixToImageWriter.writeToFile(matrix, filePath.substring(filePath\r\n                        .lastIndexOf(&#39;.&#39;) + 1), new File(filePath));\r\n\r\n\r\nOutput:\r\n\r\n    12:33:09,948 ERROR [stderr] (default task-17) java.io.FileNotFoundException: src\\main\\resources\\QR_CODE\\QR_Code.png (The system cannot find the path specified)\r\n    12:33:09,948 ERROR [stderr] (default task-17)   at java.io.RandomAccessFile.open0(Native Method)\r\n    12:33:09,950 ERROR [stderr] (default task-17)   at java.io.RandomAccessFile.open(RandomAccessFile.java:316)\r\n    12:33:09,950 ERROR [stderr] (default task-17)   at java.io.RandomAccessFile(RandomAccessFile.java:243)\r\n    12:33:","title":"FileNotFoundException when reading file in resources folder","body":"<p>Code:</p>\n<pre><code>  String filePath = &quot;src//main//resources//QR_CODE//QR_Code.png&quot;;\n            //String filePath = &quot;C:\\\\Work\\\\QR_CODE\\\\QR_Code.png&quot;;\n            String charset = &quot;UTF-8&quot;; // or &quot;ISO-8859-1&quot;\n            Map &lt;EncodeHintType, ErrorCorrectionLevel&gt; hintMap = new HashMap &lt; EncodeHintType, ErrorCorrectionLevel &gt; ();\n            hintMap.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.L);\n            BitMatrix matrix = new MultiFormatWriter().encode(\n                    new String(qrCodeData.getBytes(charset), charset),\n                    BarcodeFormat.QR_CODE, 200, 200, hintMap);\n            MatrixToImageWriter.writeToFile(matrix, filePath.substring(filePath\n                    .lastIndexOf('.') + 1), new File(filePath));\n</code></pre>\n<p>Output:</p>\n<pre><code>12:33:09,948 ERROR [stderr] (default task-17) java.io.FileNotFoundException: src\\main\\resources\\QR_CODE\\QR_Code.png (The system cannot find the path specified)\n12:33:09,948 ERROR [stderr] (default task-17)   at java.io.RandomAccessFile.open0(Native Method)\n12:33:09,950 ERROR [stderr] (default task-17)   at java.io.RandomAccessFile.open(RandomAccessFile.java:316)\n12:33:09,950 ERROR [stderr] (default task-17)   at java.io.RandomAccessFile(RandomAccessFile.java:243)\n12:33:\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8848,"page":1144,"page_size":100}
