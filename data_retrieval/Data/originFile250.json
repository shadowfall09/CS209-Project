{"items":[{"tags":["java","spring-boot","apache-kafka"],"comments":[{"owner":{"account_id":13798611,"reputation":37885,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1553009466,"post_id":55244407,"comment_id":97222220,"body_markdown":"you want to deserialize to bytes or pojo?","body":"you want to deserialize to bytes or pojo?"},{"owner":{"account_id":15562403,"reputation":117,"user_id":11227198,"display_name":"Priya Tanwar"},"score":0,"creation_date":1553011308,"post_id":55244407,"comment_id":97223475,"body_markdown":"Initially, I was trying to deserialize it with POJO. But my consumer was not picking up messages. Any way is fine but apart from String it is not picking up the data","body":"Initially, I was trying to deserialize it with POJO. But my consumer was not picking up messages. Any way is fine but apart from String it is not picking up the data"},{"owner":{"account_id":13798611,"reputation":37885,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1553011367,"post_id":55244407,"comment_id":97223512,"body_markdown":"Show that part i can help you out with that @PriyaTanwar","body":"Show that part i can help you out with that @PriyaTanwar"},{"owner":{"account_id":15562403,"reputation":117,"user_id":11227198,"display_name":"Priya Tanwar"},"score":0,"creation_date":1553011467,"post_id":55244407,"comment_id":97223570,"body_markdown":"@Bean\n    public ConcurrentKafkaListenerContainerFactory&lt;String, PageViewEvent&gt; priceEventsKafkaListenerContainerFactory() {\n        ConcurrentKafkaListenerContainerFactory&lt;String, PageViewEvent&gt; factory =\n                new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n        factory.setConsumerFactory(priceEventConsumerFactory());\n        return factory;\n    }","body":"@Bean     public ConcurrentKafkaListenerContainerFactory&lt;String, PageViewEvent&gt; priceEventsKafkaListenerContainerFactory() {         ConcurrentKafkaListenerContainerFactory&lt;String, PageViewEvent&gt; factory =                 new ConcurrentKafkaListenerContainerFactory&lt;&gt;();         factory.setConsumerFactory(priceEventConsumerFactory());         return factory;     }"},{"owner":{"account_id":15562403,"reputation":117,"user_id":11227198,"display_name":"Priya Tanwar"},"score":0,"creation_date":1553011603,"post_id":55244407,"comment_id":97223677,"body_markdown":"This was my container factory and I was using String and Json Deserializer for key and value respectively. At the kafka listener end, I had below change : @KafkaListener(topics = &quot;test1&quot; , groupId = &quot;json&quot;, containerFactory = &quot;priceEventsKafkaListenerContainerFactory&quot;)\n    public void receive(@Payload PageViewEvent data,@Headers MessageHeaders headers) {}","body":"This was my container factory and I was using String and Json Deserializer for key and value respectively. At the kafka listener end, I had below change : @KafkaListener(topics = &quot;test1&quot; , groupId = &quot;json&quot;, containerFactory = &quot;priceEventsKafkaListenerContainerFactory&quot;)     public void receive(@Payload PageViewEvent data,@Headers MessageHeaders headers) {}"},{"owner":{"account_id":13798611,"reputation":37885,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1553011661,"post_id":55244407,"comment_id":97223716,"body_markdown":"Please update this in the post, not in comments @PriyaTanwar","body":"Please update this in the post, not in comments @PriyaTanwar"},{"owner":{"account_id":15562403,"reputation":117,"user_id":11227198,"display_name":"Priya Tanwar"},"score":0,"creation_date":1553013636,"post_id":55244407,"comment_id":97224895,"body_markdown":"@Deadpool - updated in the post.","body":"@Deadpool - updated in the post."}],"answers":[{"tags":[],"owner":{"account_id":13798611,"reputation":37885,"user_id":9959152,"display_name":"Ryuzaki L"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1553022894,"creation_date":1553022894,"answer_id":55248495,"question_id":55244407,"body_markdown":"You can deserialize the record from kfka into POJO, for versions &lt;2.2.x use the `MessageConverter` \r\n\r\n&gt;Starting with version 2.2, you can explicitly configure the deserializer to use the supplied target type and ignore type information in headers by using one of the overloaded constructors that have a boolean \r\n\r\n    @Bean\r\n    public ConsumerFactory&lt;String,PageViewEvent &gt; priceEventConsumerFactory() {\r\n\r\n    Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\r\n    props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);\r\n    props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\r\n    props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, JsonDeserializer.class);\r\n    props.put(ConsumerConfig.GROUP_ID_CONFIG, &quot;json&quot;);\r\n    props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\r\n    return new DefaultKafkaConsumerFactory&lt;&gt;(props, new StringDeserializer(), new JsonDeserializer&lt;&gt;(PageViewEvent.class,false));\r\n\r\n    }\r\n\r\nOr by using `MessageConverter`\r\n\r\n     @Bean\r\n     public ConcurrentKafkaListenerContainerFactory&lt;String, Bytes&gt; kafkaListenerContainerFactory() {\r\n\r\n     ConcurrentKafkaListenerContainerFactory&lt;String, Bytes&gt; factory =\r\n        new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n     factory.setConsumerFactory(consumerFactory());\r\n     factory.setMessageConverter(new StringJsonMessageConverter());\r\n     return factory;\r\n    }","title":"@KafkaListener is not consuming messages - issue with deserialization","body":"<p>You can deserialize the record from kfka into POJO, for versions &lt;2.2.x use the <code>MessageConverter</code> </p>\n\n<blockquote>\n  <p>Starting with version 2.2, you can explicitly configure the deserializer to use the supplied target type and ignore type information in headers by using one of the overloaded constructors that have a boolean </p>\n</blockquote>\n\n<pre><code>@Bean\npublic ConsumerFactory&lt;String,PageViewEvent &gt; priceEventConsumerFactory() {\n\nMap&lt;String, Object&gt; props = new HashMap&lt;&gt;();\nprops.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, \"localhost:9092\");\nprops.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\nprops.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, JsonDeserializer.class);\nprops.put(ConsumerConfig.GROUP_ID_CONFIG, \"json\");\nprops.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, \"earliest\");\nreturn new DefaultKafkaConsumerFactory&lt;&gt;(props, new StringDeserializer(), new JsonDeserializer&lt;&gt;(PageViewEvent.class,false));\n\n}\n</code></pre>\n\n<p>Or by using <code>MessageConverter</code></p>\n\n<pre><code> @Bean\n public ConcurrentKafkaListenerContainerFactory&lt;String, Bytes&gt; kafkaListenerContainerFactory() {\n\n ConcurrentKafkaListenerContainerFactory&lt;String, Bytes&gt; factory =\n    new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n factory.setConsumerFactory(consumerFactory());\n factory.setMessageConverter(new StringJsonMessageConverter());\n return factory;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1493772,"reputation":61,"user_id":1400201,"display_name":"Anand"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1597393601,"creation_date":1597393601,"answer_id":63409207,"question_id":55244407,"body_markdown":"Use `JsonDeserializer` of package `org.springframework.kafka.support.serializer`\r\n\r\nAlso have trust the json deserializer package `props.put(JsonDeserializer.TRUSTED_PACKAGES, &lt;package-name&gt;)`","title":"@KafkaListener is not consuming messages - issue with deserialization","body":"<p>Use <code>JsonDeserializer</code> of package <code>org.springframework.kafka.support.serializer</code></p>\n<p>Also have trust the json deserializer package <code>props.put(JsonDeserializer.TRUSTED_PACKAGES, &lt;package-name&gt;)</code></p>\n"},{"tags":[],"owner":{"account_id":7158503,"reputation":1,"user_id":5469974,"display_name":"Dmitry Illy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692017315,"creation_date":1692016662,"answer_id":76898987,"question_id":55244407,"body_markdown":"the same as to the previous answers this works, add it into application.properties:\r\n\r\n    spring.kafka.consumer.properties.spring.json.value.default.type=your.package.dto.yourDto\r\n    spring.kafka.consumer.properties.spring.json.use.type.headers=false","title":"@KafkaListener is not consuming messages - issue with deserialization","body":"<p>the same as to the previous answers this works, add it into application.properties:</p>\n<pre><code>spring.kafka.consumer.properties.spring.json.value.default.type=your.package.dto.yourDto\nspring.kafka.consumer.properties.spring.json.use.type.headers=false\n</code></pre>\n"}],"owner":{"account_id":15562403,"reputation":117,"user_id":11227198,"display_name":"Priya Tanwar"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7920,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":55248495,"answer_count":3,"score":3,"last_activity_date":1692017315,"creation_date":1553008749,"question_id":55244407,"body_markdown":"Message Producer using Kafka bindings of Spring cloud streams\r\n\r\n    @Component\r\n    public static class PageViewEventSource implements ApplicationRunner {\r\n\r\n\tprivate final MessageChannel pageViewsOut;\r\n\tprivate final Log log = LogFactory.getLog(getClass());\r\n\r\n\tpublic PageViewEventSource(AnalyticsBinding binding) {\r\n\t\tthis.pageViewsOut = binding.pageViewsOut();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void run(ApplicationArguments args) throws Exception {\r\n\t\tList&lt;String&gt; names = Arrays.asList(&quot;priya&quot;, &quot;dyser&quot;, &quot;Ray&quot;, &quot;Mark&quot;, &quot;Oman&quot;, &quot;Larry&quot;);\r\n\t\tList&lt;String&gt; pages = Arrays.asList(&quot;blog&quot;, &quot;facebook&quot;, &quot;instagram&quot;, &quot;news&quot;, &quot;youtube&quot;, &quot;about&quot;);\r\n\t\tRunnable runnable = () -&gt; {\r\n\t\t\tString rPage = pages.get(new Random().nextInt(pages.size()));\r\n\t\t\tString rName = pages.get(new Random().nextInt(names.size()));\r\n\t\t\tPageViewEvent pageViewEvent = new PageViewEvent(rName, rPage, Math.random() &gt; .5 ? 10 : 1000);\r\n\t\t\t\r\n\r\n\t\t\tSerializer&lt;PageViewEvent&gt; serializer = new JsonSerde&lt;&gt;(PageViewEvent.class).serializer();\r\n\t\t\tbyte[] m = serializer.serialize(null, pageViewEvent);\r\n\r\n\t\t\tMessage&lt;byte[]&gt; message =  MessageBuilder\r\n\t\t\t\t\t.withPayload(m).build();\r\n\t\t\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tthis.pageViewsOut.send(message);\r\n\t\t\t\tlog.info(&quot;sent &quot; + message);\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t\tlog.error(e);\r\n\t\t\t}\r\n\t\t};\r\n\t\tExecutors.newScheduledThreadPool(1).scheduleAtFixedRate(runnable, 1, 1, TimeUnit.SECONDS);\r\n\t}\r\n\r\n\r\nThis use below serialization\r\n\r\n &gt;spring.cloud.stream.kafka.streams.binder.configuration.default.key.serde=org.apache.kafka.common.serialization.Serdes$StringSerde\r\nspring.cloud.stream.kafka.streams.binder.configuration.default.value.serde=org.apache.kafka.common.serialization.Serdes$BytesSerde\r\n\r\n\r\nI am Trying to consume these messages in separate Consumer Application via Spring Kafka - KafkaListener\r\n\r\n    @Service\r\n    public class PriceEventConsumer {\r\n\r\n \r\n    private static final Logger LOG = LoggerFactory.getLogger(PriceEventConsumer.class);\r\n\r\n    @KafkaListener(topics = &quot;test1&quot; , groupId = &quot;json&quot;, containerFactory = &quot;kafkaListenerContainerFactory&quot;)\r\n    public void receive(Bytes data){\r\n    //public void receive(@Payload PageViewEvent data,@Headers MessageHeaders headers) {\r\n        LOG.info(&quot;Message received&quot;);\r\n        LOG.info(&quot;received data=&#39;{}&#39;&quot;, data);\r\n\r\n        }\r\n\r\n\r\nContainer factory configuration \r\n\r\n\r\n\r\n     @Bean\r\n     public ConsumerFactory&lt;String, Bytes&gt; consumerFactory() {\r\n\r\n      Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\r\n      props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);\r\n      props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG,\r\n      StringDeserializer.class);\r\n       props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, \r\n      BytesDeserializer.class);\r\n      props.put(ConsumerConfig.GROUP_ID_CONFIG, &quot;json&quot;);\r\n      props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\r\n\r\n      return new DefaultKafkaConsumerFactory&lt;&gt;(props);\r\n\r\n     }\r\n\r\n     @Bean\r\n     public ConcurrentKafkaListenerContainerFactory&lt;String, Bytes&gt; \r\n\r\n     kafkaListenerContainerFactory() {\r\n\r\n      ConcurrentKafkaListenerContainerFactory&lt;String, Bytes&gt; factory =\r\n            new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n      factory.setConsumerFactory(consumerFactory());\r\n      return factory;\r\n     }\r\n\r\nWith this Configuration Consumer is not picking up the messages(Bytes). If I change Kafka listener to accept String then it gives me below exception :\r\n\r\n\r\n       @KafkaListener(topics = &quot;test1&quot; , groupId = &quot;json&quot;, containerFactory = &quot;kafkaListenerContainerFactory&quot;)\r\n\r\n     public void receive(String data){\r\n\r\n        LOG.info(&quot;Message received&quot;);\r\n        LOG.info(&quot;received data=&#39;{}&#39;&quot;, data);\r\n\r\n        }\r\n\r\n **Caused by:**\r\n\r\n&gt;org.springframework.messaging.converter.MessageConversionException: Cannot handle message; nested exception is org.springframework.messaging.converter.MessageConversionException: Cannot convert from [org.apache.kafka.common.utils.Bytes] to [java.lang.String] for GenericMessage [payload={&quot;userId&quot;:&quot;facebook&quot;,&quot;page&quot;:&quot;about&quot;,&quot;duration&quot;:10}, headers={kafka_offset=4213, kafka_consumer=brave.kafka.clients.TracingConsumer@9a75f94, kafka_timestampType=CREATE_TIME, kafka_receivedMessageKey=null, kafka_receivedPartitionId=0, kafka_receivedTopic=test1, kafka_receivedTimestamp=1553007593670}], failedMessage=GenericMessage [payload={&quot;userId&quot;:&quot;facebook&quot;,&quot;page&quot;:&quot;about&quot;,&quot;duration&quot;:10}, headers={kafka_offset=4213, kafka_consumer=brave.kafka.clients.TracingConsumer@9a75f94, kafka_timestampType=CREATE_TIME, kafka_receivedMessageKey=null, kafka_receivedPartitionId=0, kafka_receivedTopic=test1, kafka_receivedTimestamp=1553007593670}]\r\n\t... 23 more\r\nCaused by: org.springframework.messaging.converter.MessageConversionException: Cannot convert from [org.apache.kafka.common.utils.Bytes] to [java.lang.String] for GenericMessage [payload={&quot;userId&quot;:&quot;facebook&quot;,&quot;page&quot;:&quot;about&quot;,&quot;duration&quot;:10}, headers={kafka_offset=4213, kafka_consumer=brave.kafka.clients.TracingConsumer@9a75f94, kafka_timestampType=CREATE_TIME, kafka_receivedMessageKey=null, kafka_receivedPartitionId=0, kafka_receivedTopic=test1, kafka_receivedTimestamp=1553007593670}]\r\n\tat org.springframework.messaging.handler.annotation.support.PayloadArgumentResolver.resolveArgument(PayloadArgumentResolver.java:144) ~[spring-messaging-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\n\tat org.springframework.messaging.handler.invocation.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:117) ~[spring-messaging-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:147) ~[spring-messaging-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:116) ~[spring-messaging-5.1.4.RELEASE.jar:5.1.4.RELEASE]\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:48) ~[spring-kafka-2.2.3.RELEASE.jar:2.2.3.RELEASE]\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:283) ~[spring-kafka-2.2.3.RELEASE.jar:2.2.3.RELEASE]\r\n\t... 22 more\r\n\r\nAny pointers will be very helpful.\r\n\r\n\r\nUpdating POJO Part\r\n\r\n\r\nPojo Part ——\r\n\r\n      @KafkaListener(topics = &quot;test1&quot; , groupId = &quot;json&quot;, containerFactory = &quot;kafkaListenerContainerFactory&quot;)\r\n    \r\n      public void receive(@Payload PageViewEvent data,@Headers MessageHeaders headers) {\r\n        LOG.info(&quot;Message received&quot;);\r\n        LOG.info(&quot;received data=&#39;{}&#39;&quot;, data);\r\n\r\n       }\r\n\r\n\r\n\r\nContainer factory configuration \r\n\r\n     @Bean\r\n     public ConsumerFactory&lt;String,PageViewEvent &gt; priceEventConsumerFactory() {\r\n\r\n        Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\r\n        props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);\r\n        props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\r\n        props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, JsonDeserializer.class);\r\n        props.put(ConsumerConfig.GROUP_ID_CONFIG, &quot;json&quot;);\r\n        props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\r\n        return new DefaultKafkaConsumerFactory&lt;&gt;(props, new StringDeserializer(), new JsonDeserializer&lt;&gt;(PageViewEvent.class));\r\n\r\n\r\n\r\n    }\r\n\r\n        @Bean\r\n        public ConcurrentKafkaListenerContainerFactory&lt;String, PageViewEvent&gt; priceEventsKafkaListenerContainerFactory() {\r\n          ConcurrentKafkaListenerContainerFactory&lt;String, PageViewEvent&gt; factory =\r\n                new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n         factory.setConsumerFactory(priceEventConsumerFactory());\r\n         return factory;\r\n         }\r\n\r\n\r\nProducer -\r\n\r\n\r\n      @Override\r\n      public void run(ApplicationArguments args) throws Exception {\r\n\t  List&lt;String&gt; names = Arrays.asList(&quot;priya&quot;, &quot;dyser&quot;, &quot;Ray&quot;, &quot;Mark&quot;, &quot;Oman&quot;, &quot;Larry&quot;);\r\n\t   List&lt;String&gt; pages = Arrays.asList(&quot;blog&quot;, &quot;facebook&quot;, &quot;instagram&quot;, &quot;news&quot;, &quot;youtube&quot;, &quot;about&quot;);\r\n\t   Runnable runnable = () -&gt; {\r\n\t\tString rPage = pages.get(new Random().nextInt(pages.size()));\r\n\t\tString rName = pages.get(new Random().nextInt(names.size()));\r\n\t\tPageViewEvent pageViewEvent = new PageViewEvent(rName, rPage, Math.random() &gt; .5 ? 10 : 1000);\r\n\t\t\r\n\t\tMessage&lt;PageViewEvent&gt; message =  MessageBuilder\r\n\t\t\t\t.withPayload(pageViewEvent).build();\r\n\t\t\t\t\t\ttry {\r\n\t\t\tthis.pageViewsOut.send(message);\r\n\t\t\tlog.info(&quot;sent &quot; + message);\r\n\t\t} catch (Exception e) {\r\n\t\t\tlog.error(e);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n\r\n\r\n","title":"@KafkaListener is not consuming messages - issue with deserialization","body":"<p>Message Producer using Kafka bindings of Spring cloud streams</p>\n\n<pre><code>@Component\npublic static class PageViewEventSource implements ApplicationRunner {\n\nprivate final MessageChannel pageViewsOut;\nprivate final Log log = LogFactory.getLog(getClass());\n\npublic PageViewEventSource(AnalyticsBinding binding) {\n    this.pageViewsOut = binding.pageViewsOut();\n}\n\n@Override\npublic void run(ApplicationArguments args) throws Exception {\n    List&lt;String&gt; names = Arrays.asList(\"priya\", \"dyser\", \"Ray\", \"Mark\", \"Oman\", \"Larry\");\n    List&lt;String&gt; pages = Arrays.asList(\"blog\", \"facebook\", \"instagram\", \"news\", \"youtube\", \"about\");\n    Runnable runnable = () -&gt; {\n        String rPage = pages.get(new Random().nextInt(pages.size()));\n        String rName = pages.get(new Random().nextInt(names.size()));\n        PageViewEvent pageViewEvent = new PageViewEvent(rName, rPage, Math.random() &gt; .5 ? 10 : 1000);\n\n\n        Serializer&lt;PageViewEvent&gt; serializer = new JsonSerde&lt;&gt;(PageViewEvent.class).serializer();\n        byte[] m = serializer.serialize(null, pageViewEvent);\n\n        Message&lt;byte[]&gt; message =  MessageBuilder\n                .withPayload(m).build();\n\n        try {\n            this.pageViewsOut.send(message);\n            log.info(\"sent \" + message);\n        } catch (Exception e) {\n            log.error(e);\n        }\n    };\n    Executors.newScheduledThreadPool(1).scheduleAtFixedRate(runnable, 1, 1, TimeUnit.SECONDS);\n}\n</code></pre>\n\n<p>This use below serialization</p>\n\n<blockquote>\n  <p>spring.cloud.stream.kafka.streams.binder.configuration.default.key.serde=org.apache.kafka.common.serialization.Serdes$StringSerde\n  spring.cloud.stream.kafka.streams.binder.configuration.default.value.serde=org.apache.kafka.common.serialization.Serdes$BytesSerde</p>\n</blockquote>\n\n<p>I am Trying to consume these messages in separate Consumer Application via Spring Kafka - KafkaListener</p>\n\n<pre><code>@Service\npublic class PriceEventConsumer {\n\n\nprivate static final Logger LOG = LoggerFactory.getLogger(PriceEventConsumer.class);\n\n@KafkaListener(topics = \"test1\" , groupId = \"json\", containerFactory = \"kafkaListenerContainerFactory\")\npublic void receive(Bytes data){\n//public void receive(@Payload PageViewEvent data,@Headers MessageHeaders headers) {\n    LOG.info(\"Message received\");\n    LOG.info(\"received data='{}'\", data);\n\n    }\n</code></pre>\n\n<p>Container factory configuration </p>\n\n<pre><code> @Bean\n public ConsumerFactory&lt;String, Bytes&gt; consumerFactory() {\n\n  Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\n  props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, \"localhost:9092\");\n  props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG,\n  StringDeserializer.class);\n   props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, \n  BytesDeserializer.class);\n  props.put(ConsumerConfig.GROUP_ID_CONFIG, \"json\");\n  props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, \"earliest\");\n\n  return new DefaultKafkaConsumerFactory&lt;&gt;(props);\n\n }\n\n @Bean\n public ConcurrentKafkaListenerContainerFactory&lt;String, Bytes&gt; \n\n kafkaListenerContainerFactory() {\n\n  ConcurrentKafkaListenerContainerFactory&lt;String, Bytes&gt; factory =\n        new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n  factory.setConsumerFactory(consumerFactory());\n  return factory;\n }\n</code></pre>\n\n<p>With this Configuration Consumer is not picking up the messages(Bytes). If I change Kafka listener to accept String then it gives me below exception :</p>\n\n<pre><code>   @KafkaListener(topics = \"test1\" , groupId = \"json\", containerFactory = \"kafkaListenerContainerFactory\")\n\n public void receive(String data){\n\n    LOG.info(\"Message received\");\n    LOG.info(\"received data='{}'\", data);\n\n    }\n</code></pre>\n\n<p><strong>Caused by:</strong></p>\n\n<blockquote>\n  <p>org.springframework.messaging.converter.MessageConversionException: Cannot handle message; nested exception is org.springframework.messaging.converter.MessageConversionException: Cannot convert from [org.apache.kafka.common.utils.Bytes] to [java.lang.String] for GenericMessage [payload={\"userId\":\"facebook\",\"page\":\"about\",\"duration\":10}, headers={kafka_offset=4213, kafka_consumer=brave.kafka.clients.TracingConsumer@9a75f94, kafka_timestampType=CREATE_TIME, kafka_receivedMessageKey=null, kafka_receivedPartitionId=0, kafka_receivedTopic=test1, kafka_receivedTimestamp=1553007593670}], failedMessage=GenericMessage [payload={\"userId\":\"facebook\",\"page\":\"about\",\"duration\":10}, headers={kafka_offset=4213, kafka_consumer=brave.kafka.clients.TracingConsumer@9a75f94, kafka_timestampType=CREATE_TIME, kafka_receivedMessageKey=null, kafka_receivedPartitionId=0, kafka_receivedTopic=test1, kafka_receivedTimestamp=1553007593670}]\n      ... 23 more\n  Caused by: org.springframework.messaging.converter.MessageConversionException: Cannot convert from [org.apache.kafka.common.utils.Bytes] to [java.lang.String] for GenericMessage [payload={\"userId\":\"facebook\",\"page\":\"about\",\"duration\":10}, headers={kafka_offset=4213, kafka_consumer=brave.kafka.clients.TracingConsumer@9a75f94, kafka_timestampType=CREATE_TIME, kafka_receivedMessageKey=null, kafka_receivedPartitionId=0, kafka_receivedTopic=test1, kafka_receivedTimestamp=1553007593670}]\n      at org.springframework.messaging.handler.annotation.support.PayloadArgumentResolver.resolveArgument(PayloadArgumentResolver.java:144) ~[spring-messaging-5.1.4.RELEASE.jar:5.1.4.RELEASE]\n      at org.springframework.messaging.handler.invocation.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:117) ~[spring-messaging-5.1.4.RELEASE.jar:5.1.4.RELEASE]\n      at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:147) ~[spring-messaging-5.1.4.RELEASE.jar:5.1.4.RELEASE]\n      at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:116) ~[spring-messaging-5.1.4.RELEASE.jar:5.1.4.RELEASE]\n      at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:48) ~[spring-kafka-2.2.3.RELEASE.jar:2.2.3.RELEASE]\n      at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:283) ~[spring-kafka-2.2.3.RELEASE.jar:2.2.3.RELEASE]\n      ... 22 more</p>\n</blockquote>\n\n<p>Any pointers will be very helpful.</p>\n\n<p>Updating POJO Part</p>\n\n<p>Pojo Part ——</p>\n\n<pre><code>  @KafkaListener(topics = \"test1\" , groupId = \"json\", containerFactory = \"kafkaListenerContainerFactory\")\n\n  public void receive(@Payload PageViewEvent data,@Headers MessageHeaders headers) {\n    LOG.info(\"Message received\");\n    LOG.info(\"received data='{}'\", data);\n\n   }\n</code></pre>\n\n<p>Container factory configuration </p>\n\n<pre><code> @Bean\n public ConsumerFactory&lt;String,PageViewEvent &gt; priceEventConsumerFactory() {\n\n    Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\n    props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, \"localhost:9092\");\n    props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\n    props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, JsonDeserializer.class);\n    props.put(ConsumerConfig.GROUP_ID_CONFIG, \"json\");\n    props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, \"earliest\");\n    return new DefaultKafkaConsumerFactory&lt;&gt;(props, new StringDeserializer(), new JsonDeserializer&lt;&gt;(PageViewEvent.class));\n\n\n\n}\n\n    @Bean\n    public ConcurrentKafkaListenerContainerFactory&lt;String, PageViewEvent&gt; priceEventsKafkaListenerContainerFactory() {\n      ConcurrentKafkaListenerContainerFactory&lt;String, PageViewEvent&gt; factory =\n            new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n     factory.setConsumerFactory(priceEventConsumerFactory());\n     return factory;\n     }\n</code></pre>\n\n<p>Producer -</p>\n\n<pre><code>  @Override\n  public void run(ApplicationArguments args) throws Exception {\n  List&lt;String&gt; names = Arrays.asList(\"priya\", \"dyser\", \"Ray\", \"Mark\", \"Oman\", \"Larry\");\n   List&lt;String&gt; pages = Arrays.asList(\"blog\", \"facebook\", \"instagram\", \"news\", \"youtube\", \"about\");\n   Runnable runnable = () -&gt; {\n    String rPage = pages.get(new Random().nextInt(pages.size()));\n    String rName = pages.get(new Random().nextInt(names.size()));\n    PageViewEvent pageViewEvent = new PageViewEvent(rName, rPage, Math.random() &gt; .5 ? 10 : 1000);\n\n    Message&lt;PageViewEvent&gt; message =  MessageBuilder\n            .withPayload(pageViewEvent).build();\n                    try {\n        this.pageViewsOut.send(message);\n        log.info(\"sent \" + message);\n    } catch (Exception e) {\n        log.error(e);\n    }\n};\n</code></pre>\n"},{"tags":["java","while-loop","goto"],"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":3,"creation_date":1692013995,"post_id":76898675,"comment_id":135564020,"body_markdown":"Once `ab` is false there is nothing to make it true again.  The loop executes once only.","body":"Once <code>ab</code> is false there is nothing to make it true again.  The loop executes once only."},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":3,"creation_date":1692014044,"post_id":76898675,"comment_id":135564033,"body_markdown":"Better variable names would make this code more readable.","body":"Better variable names would make this code more readable."}],"answers":[{"comments":[{"owner":{"account_id":27834272,"reputation":688,"user_id":21252090,"display_name":"Grinding For Reputation"},"score":0,"creation_date":1692034132,"post_id":76899051,"comment_id":135568298,"body_markdown":"A side note which isn&#39;t necessary and personal preference but try to separate functions to make it easier for yourself.","body":"A side note which isn&#39;t necessary and personal preference but try to separate functions to make it easier for yourself."}],"tags":[],"owner":{"account_id":27834272,"reputation":688,"user_id":21252090,"display_name":"Grinding For Reputation"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1692017264,"creation_date":1692017264,"answer_id":76899051,"question_id":76898675,"body_markdown":"You forgot the curly brackets for your while loop `while(MO)`! this means that it will only execute the *first line* after the statement which is `while(MO==true) MO=false`. Here is the fixed code.\r\n```\r\nimport java.util.Objects;\r\nimport java.util.Scanner;\r\n\r\npublic class Main {\r\n\tpublic static void main(String[] args) {\r\n\t\tboolean MO=true;\r\n\r\n\t\twhile(MO==true) {\r\n\t\t\tMO=false;\r\n\t\tSystem.out.println(&quot;Please enter your operation&quot;);\r\n\t\tSystem.out.println(&quot;1 - Addition&quot;);\r\n\t\tSystem.out.println(&quot;2 - Subtraction&quot;);\r\n\t\tSystem.out.println(&quot;3 - Multiplication&quot;);\r\n\t\tSystem.out.println(&quot;4 - Division&quot;);\r\n\t\tScanner scanner = new Scanner(System.in);\r\n\t\tint op = scanner.nextInt();\r\n\t\tSystem.out.println(op);\r\n\t\tscanner.reset();\r\n\t\t// Addition\r\n\t\tif(op == 1) {\r\n\t\t\tSystem.out.println(&quot;Enter a starting value!&quot;);\r\n\t\t\tint as =   scanner.nextInt();\r\n\t\t\tscanner.reset();\r\n\r\n\t\t\tboolean ab = true;\r\n\t\t\twhile(ab) {\r\n\t\t\t\tab=false;\r\n\t\t\t\tSystem.out.println(&quot;Please enter a number to add or type &#39;End&#39; to end or &#39;Clear&#39; to reset or &#39;Restart&#39; to exit the mode&quot;);\r\n\t\t\t\tString an = scanner.next();\r\n\t\t\t\tif(Objects.equals(an, &quot;End&quot;)) {\r\n\t\t\t\t\tSystem.out.println(&quot;Quitting&quot;); }\r\n\t\t\t\telse if(Objects.equals(an,&quot;Clear&quot;)) {\r\n\t\t\t\t\tint  ae = 0;\r\n\t\t\t\t\tSystem.out.println(&quot;Cache clear!&quot;);\r\n\t\t\t\t\tab = true;} else if(Objects.equals(an,&quot;Restart&quot;)) {\r\n\t\t\t\t\t\tSystem.out.println(&quot;Restarting!&quot;);\r\n\t\t\t\t\t\tMO=true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\tint ra = Integer.parseInt(an);\r\n\r\n\r\n\t\t\t\t\t\tint ae = as+ra;\r\n\t\t\t\t\t\tSystem.out.println(ae);\r\n\t\t\t\t\t\tas = ae;\r\n\t\t\t\t\t}}\r\n\t\t}}\r\n\t}\r\n}\r\n```\r\n","title":"How do you activate a line of code that happened before?","body":"<p>You forgot the curly brackets for your while loop <code>while(MO)</code>! this means that it will only execute the <em>first line</em> after the statement which is <code>while(MO==true) MO=false</code>. Here is the fixed code.</p>\n<pre><code>import java.util.Objects;\nimport java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        boolean MO=true;\n\n        while(MO==true) {\n            MO=false;\n        System.out.println(&quot;Please enter your operation&quot;);\n        System.out.println(&quot;1 - Addition&quot;);\n        System.out.println(&quot;2 - Subtraction&quot;);\n        System.out.println(&quot;3 - Multiplication&quot;);\n        System.out.println(&quot;4 - Division&quot;);\n        Scanner scanner = new Scanner(System.in);\n        int op = scanner.nextInt();\n        System.out.println(op);\n        scanner.reset();\n        // Addition\n        if(op == 1) {\n            System.out.println(&quot;Enter a starting value!&quot;);\n            int as =   scanner.nextInt();\n            scanner.reset();\n\n            boolean ab = true;\n            while(ab) {\n                ab=false;\n                System.out.println(&quot;Please enter a number to add or type 'End' to end or 'Clear' to reset or 'Restart' to exit the mode&quot;);\n                String an = scanner.next();\n                if(Objects.equals(an, &quot;End&quot;)) {\n                    System.out.println(&quot;Quitting&quot;); }\n                else if(Objects.equals(an,&quot;Clear&quot;)) {\n                    int  ae = 0;\n                    System.out.println(&quot;Cache clear!&quot;);\n                    ab = true;} else if(Objects.equals(an,&quot;Restart&quot;)) {\n                        System.out.println(&quot;Restarting!&quot;);\n                        MO=true;\n                        break;\n                    }else {\n                        int ra = Integer.parseInt(an);\n\n\n                        int ae = as+ra;\n                        System.out.println(ae);\n                        as = ae;\n                    }}\n        }}\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29222434,"reputation":13,"user_id":22387906,"display_name":"ThunderCoder"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76899051,"answer_count":1,"score":1,"last_activity_date":1692017264,"creation_date":1692013523,"question_id":76898675,"body_markdown":"I am new to Java coding and am practising by making a calculator. I want it so that when I type\r\nRestart it does the the operation selection part.\r\n```\r\nimport java.util.Objects;\r\nimport java.util.Scanner;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        boolean MO=true;\r\n\r\nwhile(MO==true)\r\n    MO=false;\r\n        System.out.println(&quot;Please enter your operation&quot;);\r\n        System.out.println(&quot;1 - Addition&quot;);\r\n        System.out.println(&quot;2 - Subtraction&quot;);\r\n        System.out.println(&quot;3 - Multiplication&quot;);\r\n        System.out.println(&quot;4 - Division&quot;);\r\n        Scanner scanner = new Scanner(System.in);\r\n        int op = scanner.nextInt();\r\n        System.out.println(op);\r\n        scanner.reset();\r\n        // Addition\r\n        if(op == 1) {\r\n            System.out.println(&quot;Enter a starting value!&quot;);\r\n            int as =   scanner.nextInt();\r\n            scanner.reset();\r\n\r\n            boolean ab = true;\r\n            while(ab) {\r\n               ab=false;\r\n            System.out.println(&quot;Please enter a number to add or type &#39;End&#39; to end or &#39;Clear&#39; to reset or &#39;Restart&#39; to exit the mode&quot;);\r\n            String an = scanner.next();\r\n            if(Objects.equals(an, &quot;End&quot;)) {\r\n                System.out.println(&quot;Quitting&quot;); }\r\n            else if(Objects.equals(an,&quot;Clear&quot;)) {\r\n             int  ae = 0;\r\n                System.out.println(&quot;Cache clear!&quot;);\r\nab = true;} else if(Objects.equals(an,&quot;Restart&quot;)) {\r\n                System.out.println(&quot;Restarting!&quot;);\r\n                MO=true;\r\n                break;\r\n            }else {\r\n int ra = Integer.parseInt(an);\r\n\r\n\r\n               int ae = as+ra;\r\n                System.out.println(ae);\r\n                as = ae;\r\n            }}\r\n        }}\r\n```\r\n\r\n\r\nUsing a while(probably incorrectly) , expecting a success ,  but failure occurs ;(","title":"How do you activate a line of code that happened before?","body":"<p>I am new to Java coding and am practising by making a calculator. I want it so that when I type\nRestart it does the the operation selection part.</p>\n<pre><code>import java.util.Objects;\nimport java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        boolean MO=true;\n\nwhile(MO==true)\n    MO=false;\n        System.out.println(&quot;Please enter your operation&quot;);\n        System.out.println(&quot;1 - Addition&quot;);\n        System.out.println(&quot;2 - Subtraction&quot;);\n        System.out.println(&quot;3 - Multiplication&quot;);\n        System.out.println(&quot;4 - Division&quot;);\n        Scanner scanner = new Scanner(System.in);\n        int op = scanner.nextInt();\n        System.out.println(op);\n        scanner.reset();\n        // Addition\n        if(op == 1) {\n            System.out.println(&quot;Enter a starting value!&quot;);\n            int as =   scanner.nextInt();\n            scanner.reset();\n\n            boolean ab = true;\n            while(ab) {\n               ab=false;\n            System.out.println(&quot;Please enter a number to add or type 'End' to end or 'Clear' to reset or 'Restart' to exit the mode&quot;);\n            String an = scanner.next();\n            if(Objects.equals(an, &quot;End&quot;)) {\n                System.out.println(&quot;Quitting&quot;); }\n            else if(Objects.equals(an,&quot;Clear&quot;)) {\n             int  ae = 0;\n                System.out.println(&quot;Cache clear!&quot;);\nab = true;} else if(Objects.equals(an,&quot;Restart&quot;)) {\n                System.out.println(&quot;Restarting!&quot;);\n                MO=true;\n                break;\n            }else {\n int ra = Integer.parseInt(an);\n\n\n               int ae = as+ra;\n                System.out.println(ae);\n                as = ae;\n            }}\n        }}\n</code></pre>\n<p>Using a while(probably incorrectly) , expecting a success ,  but failure occurs ;(</p>\n"},{"tags":["java","json","jackson"],"answers":[{"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1692014111,"post_id":76898702,"comment_id":135564047,"body_markdown":"Why does everyone always recommend custom mappers when Jackson has features to support structures like this out of the box? So complicated...","body":"Why does everyone always recommend custom mappers when Jackson has features to support structures like this out of the box? So complicated..."},{"owner":{"account_id":11479182,"reputation":303,"user_id":8430810,"display_name":"Bitlejuce Do"},"score":0,"creation_date":1692023815,"post_id":76898702,"comment_id":135566192,"body_markdown":"This is also a working solution, but I would prefer annotation, anyway thanks!","body":"This is also a working solution, but I would prefer annotation, anyway thanks!"}],"tags":[],"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"comment_count":2,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1692013801,"creation_date":1692013801,"answer_id":76898702,"question_id":76898618,"body_markdown":"You may try to create a customer Mapper, something like:\r\n```java\r\npublic class CustomDeserializer extends JsonDeserializer&lt;BaseClass&gt; {\r\n    @Override\r\n    public BaseClass deserialize(JsonParser jp, DeserializationContext ctxt) \r\n      throws IOException, JsonProcessingException {\r\n        ObjectCodec oc = jp.getCodec();\r\n        JsonNode node = oc.readTree(jp);\r\n        String type = node.get(&quot;type&quot;).asText();\r\n        String id = node.get(&quot;id&quot;).asText();\r\n        \r\n        if (&quot;MyClass1&quot;.equals(type)) {\r\n            MyClass1 myClass1 = new MyClass1();\r\n            myClass1.id = id;\r\n            myClass1.type = type;\r\n            return myClass1;\r\n        } else if (&quot;MyClass2&quot;.equals(type)) {\r\n            MyClass2 myClass2 = new MyClass2();\r\n            myClass2.id = id;\r\n            myClass2.type = type;\r\n            return myClass2;\r\n        }\r\n        return null; // or throw an exception\r\n    }\r\n}\r\n```\r\n```java\r\npublic class SomeClass {\r\n    @JsonDeserialize(contentUsing = CustomDeserializer.class)\r\n    ArrayList&lt;BaseClass&gt; list;\r\n}\r\n```\r\n","title":"ObjectMapper create specific instance based on json value","body":"<p>You may try to create a customer Mapper, something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CustomDeserializer extends JsonDeserializer&lt;BaseClass&gt; {\n    @Override\n    public BaseClass deserialize(JsonParser jp, DeserializationContext ctxt) \n      throws IOException, JsonProcessingException {\n        ObjectCodec oc = jp.getCodec();\n        JsonNode node = oc.readTree(jp);\n        String type = node.get(&quot;type&quot;).asText();\n        String id = node.get(&quot;id&quot;).asText();\n        \n        if (&quot;MyClass1&quot;.equals(type)) {\n            MyClass1 myClass1 = new MyClass1();\n            myClass1.id = id;\n            myClass1.type = type;\n            return myClass1;\n        } else if (&quot;MyClass2&quot;.equals(type)) {\n            MyClass2 myClass2 = new MyClass2();\n            myClass2.id = id;\n            myClass2.type = type;\n            return myClass2;\n        }\n        return null; // or throw an exception\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class SomeClass {\n    @JsonDeserialize(contentUsing = CustomDeserializer.class)\n    ArrayList&lt;BaseClass&gt; list;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1692014599,"creation_date":1692014599,"answer_id":76898793,"question_id":76898618,"body_markdown":"You can make this happen simply using Jackson annotations:\r\n\r\n```\r\n@JsonTypeInfo(use = NAME, property = &quot;type&quot;)\r\n@JsonSubTypes(\r\n  @Type(MyClass1.class, name = &quot;MyClass1&quot;),\r\n  @Type(MyClass2.class, name = &quot;MyClass2&quot;)\r\n)\r\npublic class BaseClass {\r\n  String id;\r\n}\r\n```\r\n\r\nYou may also want to look into other values for [`use`](https://fasterxml.github.io/jackson-annotations/javadoc/2.9/com/fasterxml/jackson/annotation/JsonTypeInfo.Id.html), such as `CLASS` or `MINIMAL_CLASS`.","title":"ObjectMapper create specific instance based on json value","body":"<p>You can make this happen simply using Jackson annotations:</p>\n<pre><code>@JsonTypeInfo(use = NAME, property = &quot;type&quot;)\n@JsonSubTypes(\n  @Type(MyClass1.class, name = &quot;MyClass1&quot;),\n  @Type(MyClass2.class, name = &quot;MyClass2&quot;)\n)\npublic class BaseClass {\n  String id;\n}\n</code></pre>\n<p>You may also want to look into other values for <a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.9/com/fasterxml/jackson/annotation/JsonTypeInfo.Id.html\" rel=\"nofollow noreferrer\"><code>use</code></a>, such as <code>CLASS</code> or <code>MINIMAL_CLASS</code>.</p>\n"},{"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1692017817,"post_id":76898977,"comment_id":135564750,"body_markdown":"This looks a lot like my own answer...","body":"This looks a lot like my own answer..."}],"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1692016582,"creation_date":1692016582,"answer_id":76898977,"question_id":76898618,"body_markdown":"See [jackson polymorphic type handling annotations](https://www.baeldung.com/jackson-annotations#bd-jackson-polymorphic-type-handling-annotations)\r\n\r\nYou should be able to do something like\r\n\r\n```java\r\n@JsonTypeInfo(\r\n   use = JsonTypeInfo.Id.NAME, \r\n   include = As.PROPERTY, \r\n   property = &quot;type&quot;\r\n)\r\n@JsonSubTypes({\r\n   @JsonSubTypes.Type(value = MyClass1.class, name = &quot;MyClass1&quot;),\r\n   @JsonSubTypes.Type(value = MyClass2.class, name = &quot;MyClass2&quot;)\r\n})\r\npublic class BaseClass {\r\n    String id;\r\n    String type;\r\n}\r\n```","title":"ObjectMapper create specific instance based on json value","body":"<p>See <a href=\"https://www.baeldung.com/jackson-annotations#bd-jackson-polymorphic-type-handling-annotations\" rel=\"nofollow noreferrer\">jackson polymorphic type handling annotations</a></p>\n<p>You should be able to do something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonTypeInfo(\n   use = JsonTypeInfo.Id.NAME, \n   include = As.PROPERTY, \n   property = &quot;type&quot;\n)\n@JsonSubTypes({\n   @JsonSubTypes.Type(value = MyClass1.class, name = &quot;MyClass1&quot;),\n   @JsonSubTypes.Type(value = MyClass2.class, name = &quot;MyClass2&quot;)\n})\npublic class BaseClass {\n    String id;\n    String type;\n}\n</code></pre>\n"}],"owner":{"account_id":11479182,"reputation":303,"user_id":8430810,"display_name":"Bitlejuce Do"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1692023746,"accepted_answer_id":76898977,"answer_count":3,"score":0,"last_activity_date":1692016901,"creation_date":1692013066,"question_id":76898618,"body_markdown":"I&#39;m trying to use ObjectMapper to deserialize json but got some problem. Probably what I want is not possible with ObjectMapper but I will ask anyway for a good approach. Let&#39; say I have a class with the list of objects like this:\r\n\r\n    public class SomeClass {\r\n    \r\n        ArrayList&lt;BaseClass&gt; list;\r\n    }\r\n    public class BaseClass {\r\n        String id;\r\n        String type;\r\n    }\r\n    public class MyClass1 extends BaseClass{\r\n    \r\n    }\r\n    public class MyClass2 extends BaseClass{\r\n    \r\n    }\r\nAnd a json like this:\r\n\r\n    {\r\n        &quot;list&quot;: [\r\n          {\r\n            &quot;id&quot;: &quot;1&quot;,\r\n            &quot;type&quot;: &quot;MyClass1&quot;,\r\n          },\r\n          {\r\n            &quot;id&quot;: &quot;2&quot;,\r\n            &quot;type&quot;: &quot;MyClass2&quot;,\r\n          },\r\n          {\r\n            &quot;id&quot;: &quot;3&quot;,\r\n            &quot;type&quot;: &quot;MyClass1&quot;,\r\n          }\r\n        ]\r\n    }\r\n\r\nThe question is how to tell ObjectMapper to create and put to the list not a `BaseClass` objects but `MyClass1, MyClass2...` objects depends on the value of &quot;type&quot;? Is that possible?","title":"ObjectMapper create specific instance based on json value","body":"<p>I'm trying to use ObjectMapper to deserialize json but got some problem. Probably what I want is not possible with ObjectMapper but I will ask anyway for a good approach. Let' say I have a class with the list of objects like this:</p>\n<pre><code>public class SomeClass {\n\n    ArrayList&lt;BaseClass&gt; list;\n}\npublic class BaseClass {\n    String id;\n    String type;\n}\npublic class MyClass1 extends BaseClass{\n\n}\npublic class MyClass2 extends BaseClass{\n\n}\n</code></pre>\n<p>And a json like this:</p>\n<pre><code>{\n    &quot;list&quot;: [\n      {\n        &quot;id&quot;: &quot;1&quot;,\n        &quot;type&quot;: &quot;MyClass1&quot;,\n      },\n      {\n        &quot;id&quot;: &quot;2&quot;,\n        &quot;type&quot;: &quot;MyClass2&quot;,\n      },\n      {\n        &quot;id&quot;: &quot;3&quot;,\n        &quot;type&quot;: &quot;MyClass1&quot;,\n      }\n    ]\n}\n</code></pre>\n<p>The question is how to tell ObjectMapper to create and put to the list not a <code>BaseClass</code> objects but <code>MyClass1, MyClass2...</code> objects depends on the value of &quot;type&quot;? Is that possible?</p>\n"},{"tags":["java","json","spring","jackson"],"comments":[{"owner":{"account_id":2077587,"reputation":388,"user_id":1850484,"accept_rate":90,"display_name":"user1850484"},"score":0,"creation_date":1691945994,"post_id":76894305,"comment_id":135556409,"body_markdown":"What is your question?","body":"What is your question?"},{"owner":{"account_id":12370469,"reputation":11,"user_id":9020906,"display_name":"Browbeat"},"score":0,"creation_date":1691946098,"post_id":76894305,"comment_id":135556431,"body_markdown":"As I wrote in my question: I am looking for code improvements to improve the performance or simpler ways of achieving what my code achieves. Formulated as a question: &quot;How can I make this code quicker or use utilities of Jackson to make it cleaner?&quot;","body":"As I wrote in my question: I am looking for code improvements to improve the performance or simpler ways of achieving what my code achieves. Formulated as a question: &quot;How can I make this code quicker or use utilities of Jackson to make it cleaner?&quot;"},{"owner":{"account_id":1107169,"reputation":6727,"user_id":1098361,"accept_rate":86,"display_name":"Zack Macomber"},"score":0,"creation_date":1692017944,"post_id":76894305,"comment_id":135564781,"body_markdown":"What is your performance requirements? I think your code is logical and orderly and it appears you&#39;re doing the best you know how to do.","body":"What is your performance requirements? I think your code is logical and orderly and it appears you&#39;re doing the best you know how to do."},{"owner":{"account_id":12370469,"reputation":11,"user_id":9020906,"display_name":"Browbeat"},"score":0,"creation_date":1692021266,"post_id":76894305,"comment_id":135565576,"body_markdown":"I don&#39;t really like the fact though that I use mapper.treeToValue(mapper.valueToTree(object)) over and over again. I wonder if there is a better way of only decoding the top level of the JSONNode, while leaving the deeper nested tree intact as JSONNodes that I can pass on to the recursive call.\nI feel like this is just too slow considering that I want to store arbitrary JSON content this way and that this deserializer gets called, for example, everytime someone wants to read any news article and for all news articles that I decide to load at the initial page load at that.","body":"I don&#39;t really like the fact though that I use mapper.treeToValue(mapper.valueToTree(object)) over and over again. I wonder if there is a better way of only decoding the top level of the JSONNode, while leaving the deeper nested tree intact as JSONNodes that I can pass on to the recursive call. I feel like this is just too slow considering that I want to store arbitrary JSON content this way and that this deserializer gets called, for example, everytime someone wants to read any news article and for all news articles that I decide to load at the initial page load at that."}],"owner":{"account_id":12370469,"reputation":11,"user_id":9020906,"display_name":"Browbeat"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1692016679,"creation_date":1691944520,"question_id":76894305,"body_markdown":"I am currently writing a backend in Spring for an extensible, at least somewhat modular, small-scale custom CMS for a gaming community. This requires me to store various information, like installed modules and their configurations or module content, in the database as JSON strings. (NoSQL is unfortunetaly not an option and I was asked to do it in Java, hence my choice of Spring.)\r\n\r\nFor this to work, I need to be able to store nested Maps of the type &lt;String, Object&gt; inside the database in JSON format. The serialization also is relatively easy, the problem was the deserialization and regularly getting LinkedHashMaps as default fallback from Jackson thrown at me.\r\n\r\nSo now after I wrote the code to make it all work, I need ideas for improving the performance or, better yet, other and simpler ways of achieving the same thing, since this is a very hacky solution I came up with so far, since I am still a Jackson newb.\r\n\r\nIn short:\r\nHow can I make the following code quicker or use Jackson utilities to make it cleaner and yet still achieve the same?\r\n\r\n```java\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class ObjectWrapper {\r\n    private String clazz;\r\n    private Object value;\r\n}\r\n```\r\n\r\n```java\r\n@Log4j2\r\npublic class CustomHashMapJsonConverter implements AttributeConverter&lt;HashMap&lt;String, Object&gt;, String&gt; {\r\n\r\n    private static ObjectMapper objectMapper = getDefaultObjectMapper();\r\n\r\n    private static ObjectMapper getDefaultObjectMapper() {\r\n        ObjectMapper defaultObjectMapper = new ObjectMapper();\r\n        defaultObjectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\n        return defaultObjectMapper;\r\n    }\r\n\r\n    @Override\r\n    public String convertToDatabaseColumn(HashMap&lt;String, Object&gt; attributeMap) {\r\n        String jsonResult = null;\r\n        ObjectWrapper topLevelWrapper = wrapMapAndContents(attributeMap);\r\n        ObjectWriter objectWriter = objectMapper.writer();\r\n        objectWriter = objectWriter.with(SerializationFeature.INDENT_OUTPUT);\r\n        try {\r\n            jsonResult = objectWriter.writeValueAsString(objectMapper.valueToTree(topLevelWrapper));\r\n        } catch (JsonProcessingException | IllegalArgumentException e) {\r\n            log.error(&quot;Error while serializing a map: &quot;, e);\r\n        }\r\n        return jsonResult;\r\n    }\r\n\r\n    @Override\r\n    public HashMap&lt;String, Object&gt; convertToEntityAttribute(String dbJsonData) {\r\n\r\n        HashMap&lt;String, Object&gt; resultMap = new HashMap&lt;&gt;();\r\n\r\n        SimpleModule module = new SimpleModule();\r\n        module.addDeserializer(ObjectWrapper.class, new CustomHashMapJsonDeserializer());\r\n        objectMapper.registerModule(module);\r\n\r\n        try {\r\n            ObjectWrapper topLevelWrapper = objectMapper.readValue(dbJsonData, ObjectWrapper.class);\r\n            resultMap = (HashMap&lt;String, Object&gt;) unwrapObjectWrapperContent(topLevelWrapper);\r\n        } catch (JsonProcessingException | ClassNotFoundException | InstantiationException | IllegalAccessException\r\n                | IllegalArgumentException | InvocationTargetException | NoSuchMethodException | SecurityException e) {\r\n            log.error(&quot;Error while deserializing a retrieved JSON from the DB: &quot;, e);\r\n        }\r\n\r\n        return resultMap;\r\n    }\r\n\r\n    public ObjectWrapper wrapMapAndContents(Map&lt;String, Object&gt; map) {\r\n        HashMap&lt;String, Object&gt; resultMap = new HashMap&lt;&gt;();\r\n        for (Map.Entry&lt;String, Object&gt; entry : map.entrySet()) {\r\n            if (entry.getValue() instanceof Map) {\r\n                resultMap.put(entry.getKey(), wrapMapAndContents((Map&lt;String, Object&gt;) entry.getValue()));\r\n            } else if (entry.getValue() instanceof List) {\r\n                resultMap.put(entry.getKey(), wrapListAndContents((List&lt;Object&gt;) entry.getValue()));\r\n            } else {\r\n                resultMap.put(entry.getKey(), wrapObject(entry.getValue()));\r\n            }\r\n        }\r\n        return wrapObject(resultMap);\r\n    }\r\n\r\n    public ObjectWrapper wrapListAndContents(List&lt;Object&gt; list) {\r\n        ArrayList&lt;Object&gt; resultList = new ArrayList&lt;&gt;();\r\n        for (Object listObject : list) {\r\n            if (listObject instanceof Map) {\r\n                resultList.add(wrapMapAndContents((Map&lt;String, Object&gt;) listObject));\r\n            } else if (listObject instanceof List) {\r\n                resultList.add(wrapListAndContents((List&lt;Object&gt;) listObject));\r\n            } else {\r\n                resultList.add(wrapObject(listObject));\r\n            }\r\n        }\r\n        return wrapObject(resultList);\r\n    }\r\n\r\n    public ObjectWrapper wrapObject(Object object) {\r\n        return new ObjectWrapper(object.getClass().toString().split(&quot; &quot;)[1], object);\r\n    }\r\n\r\n    public Object unwrapObjectWrapperContent(ObjectWrapper topLevelWrapper)\r\n            throws ClassNotFoundException, InstantiationException, IllegalAccessException, IllegalArgumentException,\r\n            InvocationTargetException, NoSuchMethodException, SecurityException {\r\n        Object topLevelObject = Class.forName(topLevelWrapper.getClazz()).cast(topLevelWrapper.getValue());\r\n        if (topLevelObject instanceof Map) {\r\n            Map&lt;String, ObjectWrapper&gt; topLevelMap = (Map&lt;String, ObjectWrapper&gt;) topLevelObject;\r\n            Map&lt;String, Object&gt; newMap = (Map&lt;String, Object&gt;) Class.forName(topLevelWrapper.getClazz())\r\n                    .getDeclaredConstructor().newInstance();\r\n            for (Map.Entry&lt;String, ObjectWrapper&gt; entry : topLevelMap.entrySet()) {\r\n                newMap.put(entry.getKey(), unwrapObjectWrapperContent(entry.getValue()));\r\n            }\r\n            topLevelObject = newMap;\r\n        } else if (topLevelObject instanceof List) {\r\n            List&lt;ObjectWrapper&gt; listOfObjectWrappers = (List&lt;ObjectWrapper&gt;) topLevelObject;\r\n            List&lt;Object&gt; newList = (List&lt;Object&gt;) Class.forName(topLevelWrapper.getClazz())\r\n                    .getDeclaredConstructor().newInstance();\r\n            for (ObjectWrapper objectWrapper : listOfObjectWrappers) {\r\n                newList.add(unwrapObjectWrapperContent(objectWrapper));\r\n            }\r\n            topLevelObject = newList;\r\n        }\r\n        return topLevelObject;\r\n    }\r\n}\r\n```\r\n\r\n```java\r\n@Log4j2\r\npublic class CustomHashMapJsonDeserializer extends JsonDeserializer&lt;ObjectWrapper&gt; {\r\n\r\n    private final ObjectMapper objectMapper = getDefaultObjectMapper();\r\n\r\n    private static ObjectMapper getDefaultObjectMapper() {\r\n        ObjectMapper defaultObjectMapper = new ObjectMapper();\r\n        defaultObjectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\n        return defaultObjectMapper;\r\n    }\r\n\r\n    @Override\r\n    public ObjectWrapper deserialize(JsonParser p, DeserializationContext ctxt)\r\n            throws IOException, JacksonException {\r\n        JsonNode node = p.getCodec().readTree(p);\r\n        return convertNode(node);\r\n    }\r\n\r\n    private ObjectWrapper convertNode(JsonNode node)\r\n            throws IOException, IllegalArgumentException {\r\n        ObjectWrapper topLevelWrapper = objectMapper.readValue(objectMapper.treeAsTokens(node), ObjectWrapper.class);\r\n        try {\r\n            // TODO: Ugly workaround with mapper.treeToValue(mapper.valueToTree(object)) to\r\n            // get back the JsonNode in order to properly deserialize the objects into their\r\n            // respective types\r\n            topLevelWrapper.setValue(objectMapper.treeToValue(objectMapper.valueToTree(topLevelWrapper.getValue()),\r\n                    Class.forName(topLevelWrapper.getClazz())));\r\n            if (topLevelWrapper.getValue() instanceof Map) {\r\n                Map&lt;String, Object&gt; mapObject = (Map&lt;String, Object&gt;) topLevelWrapper.getValue();\r\n                for (Map.Entry&lt;String, Object&gt; entry : mapObject.entrySet()) {\r\n                    // TODO: Ugly workaround with mapper.valueToTree(object) to get back the\r\n                    // JsonNode in order to properly deserialize the objects into their respective\r\n                    // types\r\n                    mapObject.put(entry.getKey(), convertNode(objectMapper.valueToTree(entry.getValue())));\r\n                }\r\n                topLevelWrapper.setValue(mapObject);\r\n            } else if (topLevelWrapper.getValue() instanceof List) {\r\n                List&lt;Object&gt; listObject = (List&lt;Object&gt;) topLevelWrapper.getValue();\r\n                List&lt;Object&gt; listObjectCopy = (List&lt;Object&gt;) Class.forName(topLevelWrapper.getClazz())\r\n                        .getDeclaredConstructor().newInstance();\r\n                for (Object objectInList : listObject) {\r\n                    // TODO: Ugly workaround with mapper.valueToTree(object) to get back the\r\n                    // JsonNode in order to properly deserialize the objects into their respective\r\n                    // types\r\n                    listObjectCopy.add(convertNode(objectMapper.valueToTree(objectInList)));\r\n                }\r\n                topLevelWrapper.setValue(listObjectCopy);\r\n                listObject = null;\r\n            }\r\n            // TODO: Too many damn exceptions... Isn&#39;t there a way how I can do all this\r\n            // without so many possible Exceptions being thrown?\r\n        } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | InvocationTargetException\r\n                | NoSuchMethodException | SecurityException e) {\r\n            log.error(&quot;Error while deserializing JSON: &quot;, e);\r\n        }\r\n        return topLevelWrapper;\r\n    }\r\n}\r\n```\r\n","title":"Looking for code improvements for Jackson serialization and deserialization of complex nested structures","body":"<p>I am currently writing a backend in Spring for an extensible, at least somewhat modular, small-scale custom CMS for a gaming community. This requires me to store various information, like installed modules and their configurations or module content, in the database as JSON strings. (NoSQL is unfortunetaly not an option and I was asked to do it in Java, hence my choice of Spring.)</p>\n<p>For this to work, I need to be able to store nested Maps of the type &lt;String, Object&gt; inside the database in JSON format. The serialization also is relatively easy, the problem was the deserialization and regularly getting LinkedHashMaps as default fallback from Jackson thrown at me.</p>\n<p>So now after I wrote the code to make it all work, I need ideas for improving the performance or, better yet, other and simpler ways of achieving the same thing, since this is a very hacky solution I came up with so far, since I am still a Jackson newb.</p>\n<p>In short:\nHow can I make the following code quicker or use Jackson utilities to make it cleaner and yet still achieve the same?</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class ObjectWrapper {\n    private String clazz;\n    private Object value;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Log4j2\npublic class CustomHashMapJsonConverter implements AttributeConverter&lt;HashMap&lt;String, Object&gt;, String&gt; {\n\n    private static ObjectMapper objectMapper = getDefaultObjectMapper();\n\n    private static ObjectMapper getDefaultObjectMapper() {\n        ObjectMapper defaultObjectMapper = new ObjectMapper();\n        defaultObjectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n        return defaultObjectMapper;\n    }\n\n    @Override\n    public String convertToDatabaseColumn(HashMap&lt;String, Object&gt; attributeMap) {\n        String jsonResult = null;\n        ObjectWrapper topLevelWrapper = wrapMapAndContents(attributeMap);\n        ObjectWriter objectWriter = objectMapper.writer();\n        objectWriter = objectWriter.with(SerializationFeature.INDENT_OUTPUT);\n        try {\n            jsonResult = objectWriter.writeValueAsString(objectMapper.valueToTree(topLevelWrapper));\n        } catch (JsonProcessingException | IllegalArgumentException e) {\n            log.error(&quot;Error while serializing a map: &quot;, e);\n        }\n        return jsonResult;\n    }\n\n    @Override\n    public HashMap&lt;String, Object&gt; convertToEntityAttribute(String dbJsonData) {\n\n        HashMap&lt;String, Object&gt; resultMap = new HashMap&lt;&gt;();\n\n        SimpleModule module = new SimpleModule();\n        module.addDeserializer(ObjectWrapper.class, new CustomHashMapJsonDeserializer());\n        objectMapper.registerModule(module);\n\n        try {\n            ObjectWrapper topLevelWrapper = objectMapper.readValue(dbJsonData, ObjectWrapper.class);\n            resultMap = (HashMap&lt;String, Object&gt;) unwrapObjectWrapperContent(topLevelWrapper);\n        } catch (JsonProcessingException | ClassNotFoundException | InstantiationException | IllegalAccessException\n                | IllegalArgumentException | InvocationTargetException | NoSuchMethodException | SecurityException e) {\n            log.error(&quot;Error while deserializing a retrieved JSON from the DB: &quot;, e);\n        }\n\n        return resultMap;\n    }\n\n    public ObjectWrapper wrapMapAndContents(Map&lt;String, Object&gt; map) {\n        HashMap&lt;String, Object&gt; resultMap = new HashMap&lt;&gt;();\n        for (Map.Entry&lt;String, Object&gt; entry : map.entrySet()) {\n            if (entry.getValue() instanceof Map) {\n                resultMap.put(entry.getKey(), wrapMapAndContents((Map&lt;String, Object&gt;) entry.getValue()));\n            } else if (entry.getValue() instanceof List) {\n                resultMap.put(entry.getKey(), wrapListAndContents((List&lt;Object&gt;) entry.getValue()));\n            } else {\n                resultMap.put(entry.getKey(), wrapObject(entry.getValue()));\n            }\n        }\n        return wrapObject(resultMap);\n    }\n\n    public ObjectWrapper wrapListAndContents(List&lt;Object&gt; list) {\n        ArrayList&lt;Object&gt; resultList = new ArrayList&lt;&gt;();\n        for (Object listObject : list) {\n            if (listObject instanceof Map) {\n                resultList.add(wrapMapAndContents((Map&lt;String, Object&gt;) listObject));\n            } else if (listObject instanceof List) {\n                resultList.add(wrapListAndContents((List&lt;Object&gt;) listObject));\n            } else {\n                resultList.add(wrapObject(listObject));\n            }\n        }\n        return wrapObject(resultList);\n    }\n\n    public ObjectWrapper wrapObject(Object object) {\n        return new ObjectWrapper(object.getClass().toString().split(&quot; &quot;)[1], object);\n    }\n\n    public Object unwrapObjectWrapperContent(ObjectWrapper topLevelWrapper)\n            throws ClassNotFoundException, InstantiationException, IllegalAccessException, IllegalArgumentException,\n            InvocationTargetException, NoSuchMethodException, SecurityException {\n        Object topLevelObject = Class.forName(topLevelWrapper.getClazz()).cast(topLevelWrapper.getValue());\n        if (topLevelObject instanceof Map) {\n            Map&lt;String, ObjectWrapper&gt; topLevelMap = (Map&lt;String, ObjectWrapper&gt;) topLevelObject;\n            Map&lt;String, Object&gt; newMap = (Map&lt;String, Object&gt;) Class.forName(topLevelWrapper.getClazz())\n                    .getDeclaredConstructor().newInstance();\n            for (Map.Entry&lt;String, ObjectWrapper&gt; entry : topLevelMap.entrySet()) {\n                newMap.put(entry.getKey(), unwrapObjectWrapperContent(entry.getValue()));\n            }\n            topLevelObject = newMap;\n        } else if (topLevelObject instanceof List) {\n            List&lt;ObjectWrapper&gt; listOfObjectWrappers = (List&lt;ObjectWrapper&gt;) topLevelObject;\n            List&lt;Object&gt; newList = (List&lt;Object&gt;) Class.forName(topLevelWrapper.getClazz())\n                    .getDeclaredConstructor().newInstance();\n            for (ObjectWrapper objectWrapper : listOfObjectWrappers) {\n                newList.add(unwrapObjectWrapperContent(objectWrapper));\n            }\n            topLevelObject = newList;\n        }\n        return topLevelObject;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Log4j2\npublic class CustomHashMapJsonDeserializer extends JsonDeserializer&lt;ObjectWrapper&gt; {\n\n    private final ObjectMapper objectMapper = getDefaultObjectMapper();\n\n    private static ObjectMapper getDefaultObjectMapper() {\n        ObjectMapper defaultObjectMapper = new ObjectMapper();\n        defaultObjectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n        return defaultObjectMapper;\n    }\n\n    @Override\n    public ObjectWrapper deserialize(JsonParser p, DeserializationContext ctxt)\n            throws IOException, JacksonException {\n        JsonNode node = p.getCodec().readTree(p);\n        return convertNode(node);\n    }\n\n    private ObjectWrapper convertNode(JsonNode node)\n            throws IOException, IllegalArgumentException {\n        ObjectWrapper topLevelWrapper = objectMapper.readValue(objectMapper.treeAsTokens(node), ObjectWrapper.class);\n        try {\n            // TODO: Ugly workaround with mapper.treeToValue(mapper.valueToTree(object)) to\n            // get back the JsonNode in order to properly deserialize the objects into their\n            // respective types\n            topLevelWrapper.setValue(objectMapper.treeToValue(objectMapper.valueToTree(topLevelWrapper.getValue()),\n                    Class.forName(topLevelWrapper.getClazz())));\n            if (topLevelWrapper.getValue() instanceof Map) {\n                Map&lt;String, Object&gt; mapObject = (Map&lt;String, Object&gt;) topLevelWrapper.getValue();\n                for (Map.Entry&lt;String, Object&gt; entry : mapObject.entrySet()) {\n                    // TODO: Ugly workaround with mapper.valueToTree(object) to get back the\n                    // JsonNode in order to properly deserialize the objects into their respective\n                    // types\n                    mapObject.put(entry.getKey(), convertNode(objectMapper.valueToTree(entry.getValue())));\n                }\n                topLevelWrapper.setValue(mapObject);\n            } else if (topLevelWrapper.getValue() instanceof List) {\n                List&lt;Object&gt; listObject = (List&lt;Object&gt;) topLevelWrapper.getValue();\n                List&lt;Object&gt; listObjectCopy = (List&lt;Object&gt;) Class.forName(topLevelWrapper.getClazz())\n                        .getDeclaredConstructor().newInstance();\n                for (Object objectInList : listObject) {\n                    // TODO: Ugly workaround with mapper.valueToTree(object) to get back the\n                    // JsonNode in order to properly deserialize the objects into their respective\n                    // types\n                    listObjectCopy.add(convertNode(objectMapper.valueToTree(objectInList)));\n                }\n                topLevelWrapper.setValue(listObjectCopy);\n                listObject = null;\n            }\n            // TODO: Too many damn exceptions... Isn't there a way how I can do all this\n            // without so many possible Exceptions being thrown?\n        } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | InvocationTargetException\n                | NoSuchMethodException | SecurityException e) {\n            log.error(&quot;Error while deserializing JSON: &quot;, e);\n        }\n        return topLevelWrapper;\n    }\n}\n</code></pre>\n"},{"tags":["java","multithreading","cpu-usage"],"answers":[{"tags":[],"owner":{"account_id":31944,"reputation":482,"user_id":88086,"display_name":"Gadi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1239885545,"creation_date":1239885545,"answer_id":755936,"question_id":755899,"body_markdown":"Though this is platform dependent, I believe what you&#39;re looking for is the ThreadMXBean: http://java.sun.com/j2se/1.5.0/docs/api/java/lang/management/ThreadMXBean.html . You can use the getThreadUserTime method, for example, to get what you need. To check if your platform supports CPU measurement, you can call isThreadCpuTimeSupported() .","title":"`Monitor cpu usage per thread in java?","body":"<p>Though this is platform dependent, I believe what you're looking for is the ThreadMXBean: <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/lang/management/ThreadMXBean.html\" rel=\"nofollow noreferrer\">http://java.sun.com/j2se/1.5.0/docs/api/java/lang/management/ThreadMXBean.html</a> . You can use the getThreadUserTime method, for example, to get what you need. To check if your platform supports CPU measurement, you can call isThreadCpuTimeSupported() .</p>\n"},{"comments":[{"owner":{"account_id":449810,"reputation":651,"user_id":844809,"accept_rate":88,"display_name":"Graham"},"score":1,"creation_date":1341560242,"post_id":755940,"comment_id":14960534,"body_markdown":"Just a note, you might also want to check that CpuTime is enabled in the JVM which you are running. &#39;threadBean_.isThreadCpuTimeEnabled()&#39; will return boolean value and you can always set it if it is not with &#39;threadBean_.setThreadCpuTimeEnabled(true)&#39;","body":"Just a note, you might also want to check that CpuTime is enabled in the JVM which you are running. &#39;threadBean_.isThreadCpuTimeEnabled()&#39; will return boolean value and you can always set it if it is not with &#39;threadBean_.setThreadCpuTimeEnabled(true)&#39;"}],"tags":[],"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"comment_count":1,"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1496133251,"creation_date":1239885613,"answer_id":755940,"question_id":755899,"body_markdown":"I believe the [JConsole][1] ([archived link][4]) does provide this kind of information through a plugin\r\n\r\n![JConsole Thread CPU usage, after blogs.oracle.com/lmalventosa/resource/thread_cpu_usage.jpg][2]\r\n\r\nIt uses [ThreadMXBean][3] getThreadCpuTime() function.\r\n\r\nSomething along the line of:\r\n\r\n            long upTime = runtimeProxy.getUptime();\r\n            List&lt;Long&gt; threadCpuTime = new ArrayList&lt;Long&gt;();\r\n            for (int i = 0; i &lt; threadIds.size(); i++) {\r\n                long threadId = threadIds.get(i);\r\n                if (threadId != -1) {\r\n                    threadCpuTime.add(threadProxy.getThreadCpuTime(threadId));\r\n                } else {\r\n                    threadCpuTime.add(0L);\r\n                }\r\n            }\r\n            int nCPUs = osProxy.getAvailableProcessors();\r\n            List&lt;Float&gt; cpuUsageList = new ArrayList&lt;Float&gt;();\r\n            if (prevUpTime &gt; 0L &amp;&amp; upTime &gt; prevUpTime) {\r\n                // elapsedTime is in ms\r\n                long elapsedTime = upTime - prevUpTime;\r\n                for (int i = 0; i &lt; threadIds.size(); i++) {\r\n                    // elapsedCpu is in ns\r\n                    long elapsedCpu = threadCpuTime.get(i) - prevThreadCpuTime.get(i);\r\n                    // cpuUsage could go higher than 100% because elapsedTime\r\n                    // and elapsedCpu are not fetched simultaneously. Limit to\r\n                    // 99% to avoid Chart showing a scale from 0% to 200%.\r\n                    float cpuUsage = Math.min(99F, elapsedCpu / (elapsedTime * 1000000F * nCPUs));\r\n                    cpuUsageList.add(cpuUsage);\r\n                }\r\n            }\r\n\r\n\r\n  [1]: http://blogs.oracle.com/lmalventosa/entry/per_thread_cpu_usage_jconsole\r\n  [2]: http://i.stack.imgur.com/IUvk6.jpg\r\n  [3]: http://kickjava.com/src/java/lang/management/ThreadMXBean.java.htm\r\n  [4]: https://web.archive.org/web/20131215001011/https://blogs.oracle.com/lmalventosa/entry/per_thread_cpu_usage_jconsole","title":"`Monitor cpu usage per thread in java?","body":"<p>I believe the <a href=\"http://blogs.oracle.com/lmalventosa/entry/per_thread_cpu_usage_jconsole\" rel=\"noreferrer\">JConsole</a> (<a href=\"https://web.archive.org/web/20131215001011/https://blogs.oracle.com/lmalventosa/entry/per_thread_cpu_usage_jconsole\" rel=\"noreferrer\">archived link</a>) does provide this kind of information through a plugin</p>\n\n<p><img src=\"https://i.stack.imgur.com/IUvk6.jpg\" alt=\"JConsole Thread CPU usage, after blogs.oracle.com/lmalventosa/resource/thread_cpu_usage.jpg\"></p>\n\n<p>It uses <a href=\"http://kickjava.com/src/java/lang/management/ThreadMXBean.java.htm\" rel=\"noreferrer\">ThreadMXBean</a> getThreadCpuTime() function.</p>\n\n<p>Something along the line of:</p>\n\n<pre><code>        long upTime = runtimeProxy.getUptime();\n        List&lt;Long&gt; threadCpuTime = new ArrayList&lt;Long&gt;();\n        for (int i = 0; i &lt; threadIds.size(); i++) {\n            long threadId = threadIds.get(i);\n            if (threadId != -1) {\n                threadCpuTime.add(threadProxy.getThreadCpuTime(threadId));\n            } else {\n                threadCpuTime.add(0L);\n            }\n        }\n        int nCPUs = osProxy.getAvailableProcessors();\n        List&lt;Float&gt; cpuUsageList = new ArrayList&lt;Float&gt;();\n        if (prevUpTime &gt; 0L &amp;&amp; upTime &gt; prevUpTime) {\n            // elapsedTime is in ms\n            long elapsedTime = upTime - prevUpTime;\n            for (int i = 0; i &lt; threadIds.size(); i++) {\n                // elapsedCpu is in ns\n                long elapsedCpu = threadCpuTime.get(i) - prevThreadCpuTime.get(i);\n                // cpuUsage could go higher than 100% because elapsedTime\n                // and elapsedCpu are not fetched simultaneously. Limit to\n                // 99% to avoid Chart showing a scale from 0% to 200%.\n                float cpuUsage = Math.min(99F, elapsedCpu / (elapsedTime * 1000000F * nCPUs));\n                cpuUsageList.add(cpuUsage);\n            }\n        }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5068712,"reputation":2406,"user_id":4068123,"display_name":"Michael Sims"},"score":0,"creation_date":1618214027,"post_id":755942,"comment_id":118524515,"body_markdown":"getThreadCPUTime is NOT the same as CPU % consumption - CPUTime tells you how much time the thread has used the CPU, not how much of the CPUs resources are being consumed in that moment.","body":"getThreadCPUTime is NOT the same as CPU % consumption - CPUTime tells you how much time the thread has used the CPU, not how much of the CPUs resources are being consumed in that moment."}],"tags":[],"owner":{"account_id":32251,"reputation":114942,"user_id":89266,"accept_rate":91,"display_name":"dfa"},"comment_count":1,"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1239885665,"creation_date":1239885665,"answer_id":755942,"question_id":755899,"body_markdown":"by using  [java.lang.management.ThreadMXBean][1]. How to obtain a ThreadMXBean:\r\n\r\n     ThreadMXBean tmxb = ManagementFactory.getThreadMXBean();\r\n\r\nthen you can query how much a specific thread is consuming by using:\r\n\r\n     long cpuTime = tmxb.getThreadCpuTime(aThreadID);\r\n\r\nHope it helps.\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/lang/management/ThreadMXBean.html","title":"`Monitor cpu usage per thread in java?","body":"<p>by using  <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/lang/management/ThreadMXBean.html\" rel=\"noreferrer\">java.lang.management.ThreadMXBean</a>. How to obtain a ThreadMXBean:</p>\n\n<pre><code> ThreadMXBean tmxb = ManagementFactory.getThreadMXBean();\n</code></pre>\n\n<p>then you can query how much a specific thread is consuming by using:</p>\n\n<pre><code> long cpuTime = tmxb.getThreadCpuTime(aThreadID);\n</code></pre>\n\n<p>Hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":9631,"reputation":7981,"user_id":17876,"accept_rate":70,"display_name":"idrosid"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1239886153,"creation_date":1239886153,"answer_id":755978,"question_id":755899,"body_markdown":"Indeed the object ThreadMXBean provides the functionality you need (however it might not be implemented on all virtual machines).\r\n\r\nIn JDK 1.5 there was a demo program doing exactly what you need. It was in the folder demo/management and it was called JTop.java\r\n\r\nUnfortnately, it&#39;s not there in Java6. Maybe you can find at with google or download JDK5.","title":"`Monitor cpu usage per thread in java?","body":"<p>Indeed the object ThreadMXBean provides the functionality you need (however it might not be implemented on all virtual machines).</p>\n\n<p>In JDK 1.5 there was a demo program doing exactly what you need. It was in the folder demo/management and it was called JTop.java</p>\n\n<p>Unfortnately, it's not there in Java6. Maybe you can find at with google or download JDK5.</p>\n"},{"comments":[{"owner":{"account_id":352680,"reputation":3179,"user_id":689893,"accept_rate":88,"display_name":"Joost"},"score":0,"creation_date":1499937537,"post_id":4799051,"comment_id":77125202,"body_markdown":"Link has rotten, https://arnhem.luminis.eu/new_version_topthreads_jconsole_plugin/","body":"Link has rotten, <a href=\"https://arnhem.luminis.eu/new_version_topthreads_jconsole_plugin/\" rel=\"nofollow noreferrer\">arnhem.luminis.eu/new_version_topthreads_jconsole_plugin</a>"}],"tags":[],"owner":{"account_id":699777,"reputation":21,"user_id":589743,"display_name":"peter"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1295990909,"creation_date":1295990909,"answer_id":4799051,"question_id":755899,"body_markdown":"Try the &quot;TopThreads&quot; JConsole plugin. See http://lsd.luminis.nl/top-threads-plugin-for-jconsole/","title":"`Monitor cpu usage per thread in java?","body":"<p>Try the \"TopThreads\" JConsole plugin. See <a href=\"http://lsd.luminis.nl/top-threads-plugin-for-jconsole/\" rel=\"nofollow\">http://lsd.luminis.nl/top-threads-plugin-for-jconsole/</a></p>\n"},{"tags":[],"owner":{"account_id":543250,"reputation":18874,"user_id":912319,"accept_rate":62,"display_name":"Kanagavelu Sugumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1423514887,"creation_date":1423482222,"answer_id":28408974,"question_id":755899,"body_markdown":"&gt; Option_1: Code level\r\n\r\nIn your business logic code; in the beginning call start() API and in the finally block call stop(). So that you will get CPU time for executing your logic by the current running thread. Then log it. [Reference][1].\r\n\r\n    class CPUTimer \r\n    {\r\n        private long _startTime = 0l;\r\n    \r\n        public void start ()\r\n        {\r\n            _startTime = getCpuTimeInMillis();\r\n        }\r\n    \r\n    \r\n        public long stop ()\r\n        {\r\n            long result = (getCpuTimeInMillis() - _startTime);\r\n            _startTime = 0l;\r\n            return result;\r\n        }\r\n    \r\n        public boolean isRunning ()\r\n        {\r\n            return _startTime != 0l;\r\n        }\r\n    \r\n        /** thread CPU time in milliseconds. */\r\n        private long getCpuTimeInMillis ()\r\n        {\r\n            ThreadMXBean bean = ManagementFactory.getThreadMXBean();\r\n            return bean.isCurrentThreadCpuTimeSupported() ? bean.getCurrentThreadCpuTime()/1000000: 0L;\r\n        }\r\n    }\r\n\r\n&gt; Option_2: Monitor level using plugins (AIX IBM box which don&#39;t have jvisualvm support)\r\n\r\nIf you think it is delay in adding code now, then you can prefer JConsole with plugins support. I followed [this][2] article. Download the topthreads jar from that article and run `./jconsole -pluginpath topthreads-1.1.jar`\r\n\r\n&gt; Option_3: Monitor level using TOP (shift H) + JSTACK (Unix machine which has &#39;Shif+H&#39; support)\r\n\r\nFollow [this][3] tutorial, where top command will give option to find top CPU thread (nid). Take that check that nid in jstack output file.\r\n\r\n\r\n  [1]: http://nadeausoftware.com/articles/2008/03/java_tip_how_get_cpu_and_user_time_benchmarking\r\n  [2]: http://arnhem.luminis.eu/top-threads-plugin-for-jconsole/\r\n  [3]: http://code.nomad-labs.com/2010/11/18/identifying-which-java-thread-is-consuming-most-cpu/","title":"`Monitor cpu usage per thread in java?","body":"<blockquote>\n  <p>Option_1: Code level</p>\n</blockquote>\n\n<p>In your business logic code; in the beginning call start() API and in the finally block call stop(). So that you will get CPU time for executing your logic by the current running thread. Then log it. <a href=\"http://nadeausoftware.com/articles/2008/03/java_tip_how_get_cpu_and_user_time_benchmarking\" rel=\"noreferrer\">Reference</a>.</p>\n\n<pre><code>class CPUTimer \n{\n    private long _startTime = 0l;\n\n    public void start ()\n    {\n        _startTime = getCpuTimeInMillis();\n    }\n\n\n    public long stop ()\n    {\n        long result = (getCpuTimeInMillis() - _startTime);\n        _startTime = 0l;\n        return result;\n    }\n\n    public boolean isRunning ()\n    {\n        return _startTime != 0l;\n    }\n\n    /** thread CPU time in milliseconds. */\n    private long getCpuTimeInMillis ()\n    {\n        ThreadMXBean bean = ManagementFactory.getThreadMXBean();\n        return bean.isCurrentThreadCpuTimeSupported() ? bean.getCurrentThreadCpuTime()/1000000: 0L;\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>Option_2: Monitor level using plugins (AIX IBM box which don't have jvisualvm support)</p>\n</blockquote>\n\n<p>If you think it is delay in adding code now, then you can prefer JConsole with plugins support. I followed <a href=\"http://arnhem.luminis.eu/top-threads-plugin-for-jconsole/\" rel=\"noreferrer\">this</a> article. Download the topthreads jar from that article and run <code>./jconsole -pluginpath topthreads-1.1.jar</code></p>\n\n<blockquote>\n  <p>Option_3: Monitor level using TOP (shift H) + JSTACK (Unix machine which has 'Shif+H' support)</p>\n</blockquote>\n\n<p>Follow <a href=\"http://code.nomad-labs.com/2010/11/18/identifying-which-java-thread-is-consuming-most-cpu/\" rel=\"noreferrer\">this</a> tutorial, where top command will give option to find top CPU thread (nid). Take that check that nid in jstack output file.</p>\n"},{"tags":[],"owner":{"account_id":57405,"reputation":3587,"user_id":171956,"accept_rate":19,"display_name":"99Sono"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692015039,"creation_date":1691937854,"answer_id":76893852,"question_id":755899,"body_markdown":"My answer to this goes in a different direction.\r\n\r\nA a very powerful and transparent way, and also super for production of collection thread CPU statistics is not by having your java program collect it internally, but by having an programing language agnostic approach to do it.\r\n\r\nIn linux for example, you have the TOP command that has options to collect CPU statistics focused a single java process.\r\n\r\n    top -bcH -n 1 -p ${theProcesIdYouWantToMonitor} \r\n\r\nSee: https://man7.org/linux/man-pages/man1/top.1.html\r\n\r\n&gt; -H, --threads-show\r\n&gt;           Instructs top to display individual threads.  Without this\r\n&gt;           command-line option a summation of all threads in each process\r\n&gt;           is shown.  Later this can be changed with the `H&#39; interactive\r\n&gt;           command.\r\n\r\nDoes not get any simpler than that.\r\n\r\nIf you then use jstack in parallel with a process that monitors CPU utilization per thread then you have the best of both worlds:\r\n(a) You know at a given point in time what your code was doing via jstack thread dumps.\r\nBut this only one part of the picture.\r\nThis does not tell you who is actually burning your cpu, just what is happening.\r\nIf for example your CPU is being burned by garbage colleciton threads you will never know that out of the thread dump.\r\n\r\n(b) You pair the jstack time stamp with that of a tool like linux TOP, as shown above.\r\n\r\nYou need to convert the linux thread id into a an HEX decimal.\r\nAnd the hex decimal appears in our stack trace.\r\nAnd there you have it.\r\n\r\nNow you know at any point in time that you have sampled, who was burning your cpu and what it was doing. Finally, your strange CPU spiles are explained.\r\n\r\n\r\nFor windows, I have just discovered recently how to do the same.\r\nHere is the reference:\r\nhttps://xkln.net/blog/analyzing-thread-cpu-utilization-with-processexplorer-powershell-and-wmi/\r\n\r\n\r\nSo here is some code that could be useful to you:\r\n\r\n    # use the command:\r\n    #     Set-ExecutionPolicy -ExecutionPolicy Bypass -Scope Process\r\n    # in order to be allowed to run the powerhsell script\r\n    \r\n    # SEE Original script: https://xkln.net/blog/analyzing-thread-cpu-utilization-with-processexplorer-powershell-and-wmi/\r\n    \r\n    # (a) Discover the process we want to be monitoring\r\n    $process = ( (Get-WmiObject win32_process -Filter &quot;name like &#39;%java%&#39;&quot;) | Where-object  {$_.CommandLine -like &quot;*power*&quot;} )\r\n    $processId = $process.processId\r\n    \r\n    # (b) define the folder where we want to write out our staticis \r\n    $baseFolterForSamples=&quot;C:\\dev\\apps_standalone\\powersheell_threadCpuUtilization\\threadCpuSamples&quot;\r\n    \r\n    # (c) Definition of a function that loops forever collecting the thread id of a \r\n    \r\n        process\r\n        function Get-ThreadProcessorUtilization() {\r\n        \r\n            Param(\r\n                [Parameter(Mandatory=$true)]\r\n                [int]$ProcId,\r\n                [int]$DurationMs = 2000\r\n            )\r\n        \r\n            $StatsPrev=$null;\r\n            $ThreadAge = @{L=&quot;ThreadAge&quot;;E={[Timespan]::FromMilliseconds($_.ElapsedTime).ToString(&quot;hh\\:mm\\:ss&quot;)}}\r\n            $ProcUtilization = @{L=&quot;ProcUtilization&quot;;E={(([Math]::Round(($_.UserModeTime - ($StatsPrev | ? Handle -eq $_.Handle).UserModeTime)/($_.ElapsedTime - ($StatsPrev | ? Handle -eq $_.Handle).ElapsedTime)*100,2)).ToString() + &quot;%&quot;)}}\r\n            \r\n            # Define dome helper loop variables\r\n            $currentItrationNumber = 0\r\n            $previousIterationDateTime = $null\r\n            \r\n            while ($true) {\r\n                $Stopwatch =  [System.Diagnostics.Stopwatch]::StartNew(); \r\n                $Stats = Get-CimInstance Win32_Thread -filter &quot;ProcessHandle = $ProcId&quot; | Select ProcessHandle, Handle, UserModeTime, ElapsedTime | Sort-Object -Property UserModeTime -Descending; \r\n                \r\n                # create some loop variables that we will use to define the file name into which we want to \r\n                $currentTirationDateTime = $(get-date -f yyyy-MM-dd&#39;T&#39;hh:mm:ss.fff)\r\n                $currentItrationNumberLpadZeros = &#39;{0:d6}&#39; -f $currentItrationNumber\r\n                $currentOutputFileName = &quot;$baseFolterForSamples\\ThreadCpuTime_PID_${ProcId}_ItrationNr_$currentItrationNumber.txt&quot;\r\n                \r\n                \r\n                if ($StatsPrev -ne $null) {\r\n                    # This is the slow statement that is collecting the stats\r\n                    $CurrStats = $Stats | Select-Object ProcessHandle, Handle, $ThreadAge, $ProcUtilization\r\n                    Clear-Host\r\n                    \r\n                    # Write the current statistics into an output file\r\n                    $fileHeaderStart = &quot;START Current Itration:  $currentItrationNumber Time Interval Sampled: [$previousIterationDateTime until $currentTirationDateTime]: &quot;\r\n                    $fileHeaderEnd = &quot;END Current Itration:  $currentItrationNumber Time Interval Sampled: [$previousIterationDateTime until $currentTirationDateTime]: &quot;\r\n                    Write-Output $fileHeaderStart | Out-File -Filepath $currentOutputFileName\r\n                    Write-Output $CurrStats | Format-Table -AutoSize | Out-File -Filepath $currentOutputFileName -Append \r\n                    Write-Output $fileHeaderEnd | Out-File -Filepath $currentOutputFileName -Append\r\n                    \r\n                    # REM Explain what we have just done here:\r\n                    echo &quot;Generated sample output file: $currentOutputFileName with stats for CPU thread utilization for time period: [$previousIterationDateTime until $currentTirationDateTime]&quot;\r\n                }\r\n                $statsPrev=$stats\r\n                $Stopwatch.Stop()\r\n        \r\n                # This value could be coming negative          \r\n                # $sleepDuration = $DurationMs-($Stopwatch.ElapsedMilliseconds)\r\n                $sleepDuration = $DurationMs-($Stopwatch.ElapsedMilliseconds)\r\n                $sleepDuration = [Math]::Max($sleepDuration,0)\r\n                [System.Threading.Thread]::Sleep( $sleepDuration )\r\n                \r\n                # update the counter of curernt iteration\r\n                $currentItrationNumber =  $currentItrationNumber + 1\r\n                $previousIterationDateTime = $currentTirationDateTime\r\n            }\r\n        }\r\n        \r\n        Get-ThreadProcessorUtilization -ProcId $processId\r\n\r\nYou will see appearing in the folder:\r\nC:\\dev\\pps_standalone\\powersheell_threadCpuUtilization\\threadCpuSamples\r\n\r\nThe code you see thre is not exactly the same as the one in the reference:\r\nhttps://xkln.net/blog/analyzing-thread-cpu-utilization-with-processexplorer-powershell-and-wmi/\r\n\r\nBut it is close enough that you just need to read the reference to understand it.\r\n\r\nAnd this, in my opinion, I was better approach because you apply it to any java project that you have ecounter along the way and manifests CPU spikes performance problems.\r\nYou do not a massive infrastructure to do a super high quality analysis. Jstack + Thread Per Cpu is all you need.\r\n\r\nIf you wish, of course, you can integrate into your big data server elastic server / or whatever  by reading the produced files of jstacks together with thread statistics and pumping them to your big data storage. \r\n\r\nWell, the sky is the limit really.\r\n\r\nUnfortunately, the graphical user interfaces like the task manager, they are nice to show you here is a spike ... something is somehow not going well. But you will not derive much more than that.\r\nYou then need to come down to worth and point your finger:\r\n-&gt; in that interval of time it was that thread that was gobling 50% cpu.\r\n\r\nFor linux the solution is way similar, you can just google how to get CPU per thread of a process with top command, and there you have the keys to to the ferrari.\r\n\r\nSo now you know how to do it properly.\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"`Monitor cpu usage per thread in java?","body":"<p>My answer to this goes in a different direction.</p>\n<p>A a very powerful and transparent way, and also super for production of collection thread CPU statistics is not by having your java program collect it internally, but by having an programing language agnostic approach to do it.</p>\n<p>In linux for example, you have the TOP command that has options to collect CPU statistics focused a single java process.</p>\n<pre><code>top -bcH -n 1 -p ${theProcesIdYouWantToMonitor} \n</code></pre>\n<p>See: <a href=\"https://man7.org/linux/man-pages/man1/top.1.html\" rel=\"nofollow noreferrer\">https://man7.org/linux/man-pages/man1/top.1.html</a></p>\n<blockquote>\n<p>-H, --threads-show\nInstructs top to display individual threads.  Without this\ncommand-line option a summation of all threads in each process\nis shown.  Later this can be changed with the `H' interactive\ncommand.</p>\n</blockquote>\n<p>Does not get any simpler than that.</p>\n<p>If you then use jstack in parallel with a process that monitors CPU utilization per thread then you have the best of both worlds:\n(a) You know at a given point in time what your code was doing via jstack thread dumps.\nBut this only one part of the picture.\nThis does not tell you who is actually burning your cpu, just what is happening.\nIf for example your CPU is being burned by garbage colleciton threads you will never know that out of the thread dump.</p>\n<p>(b) You pair the jstack time stamp with that of a tool like linux TOP, as shown above.</p>\n<p>You need to convert the linux thread id into a an HEX decimal.\nAnd the hex decimal appears in our stack trace.\nAnd there you have it.</p>\n<p>Now you know at any point in time that you have sampled, who was burning your cpu and what it was doing. Finally, your strange CPU spiles are explained.</p>\n<p>For windows, I have just discovered recently how to do the same.\nHere is the reference:\n<a href=\"https://xkln.net/blog/analyzing-thread-cpu-utilization-with-processexplorer-powershell-and-wmi/\" rel=\"nofollow noreferrer\">https://xkln.net/blog/analyzing-thread-cpu-utilization-with-processexplorer-powershell-and-wmi/</a></p>\n<p>So here is some code that could be useful to you:</p>\n<pre><code># use the command:\n#     Set-ExecutionPolicy -ExecutionPolicy Bypass -Scope Process\n# in order to be allowed to run the powerhsell script\n\n# SEE Original script: https://xkln.net/blog/analyzing-thread-cpu-utilization-with-processexplorer-powershell-and-wmi/\n\n# (a) Discover the process we want to be monitoring\n$process = ( (Get-WmiObject win32_process -Filter &quot;name like '%java%'&quot;) | Where-object  {$_.CommandLine -like &quot;*power*&quot;} )\n$processId = $process.processId\n\n# (b) define the folder where we want to write out our staticis \n$baseFolterForSamples=&quot;C:\\dev\\apps_standalone\\powersheell_threadCpuUtilization\\threadCpuSamples&quot;\n\n# (c) Definition of a function that loops forever collecting the thread id of a \n\n    process\n    function Get-ThreadProcessorUtilization() {\n    \n        Param(\n            [Parameter(Mandatory=$true)]\n            [int]$ProcId,\n            [int]$DurationMs = 2000\n        )\n    \n        $StatsPrev=$null;\n        $ThreadAge = @{L=&quot;ThreadAge&quot;;E={[Timespan]::FromMilliseconds($_.ElapsedTime).ToString(&quot;hh\\:mm\\:ss&quot;)}}\n        $ProcUtilization = @{L=&quot;ProcUtilization&quot;;E={(([Math]::Round(($_.UserModeTime - ($StatsPrev | ? Handle -eq $_.Handle).UserModeTime)/($_.ElapsedTime - ($StatsPrev | ? Handle -eq $_.Handle).ElapsedTime)*100,2)).ToString() + &quot;%&quot;)}}\n        \n        # Define dome helper loop variables\n        $currentItrationNumber = 0\n        $previousIterationDateTime = $null\n        \n        while ($true) {\n            $Stopwatch =  [System.Diagnostics.Stopwatch]::StartNew(); \n            $Stats = Get-CimInstance Win32_Thread -filter &quot;ProcessHandle = $ProcId&quot; | Select ProcessHandle, Handle, UserModeTime, ElapsedTime | Sort-Object -Property UserModeTime -Descending; \n            \n            # create some loop variables that we will use to define the file name into which we want to \n            $currentTirationDateTime = $(get-date -f yyyy-MM-dd'T'hh:mm:ss.fff)\n            $currentItrationNumberLpadZeros = '{0:d6}' -f $currentItrationNumber\n            $currentOutputFileName = &quot;$baseFolterForSamples\\ThreadCpuTime_PID_${ProcId}_ItrationNr_$currentItrationNumber.txt&quot;\n            \n            \n            if ($StatsPrev -ne $null) {\n                # This is the slow statement that is collecting the stats\n                $CurrStats = $Stats | Select-Object ProcessHandle, Handle, $ThreadAge, $ProcUtilization\n                Clear-Host\n                \n                # Write the current statistics into an output file\n                $fileHeaderStart = &quot;START Current Itration:  $currentItrationNumber Time Interval Sampled: [$previousIterationDateTime until $currentTirationDateTime]: &quot;\n                $fileHeaderEnd = &quot;END Current Itration:  $currentItrationNumber Time Interval Sampled: [$previousIterationDateTime until $currentTirationDateTime]: &quot;\n                Write-Output $fileHeaderStart | Out-File -Filepath $currentOutputFileName\n                Write-Output $CurrStats | Format-Table -AutoSize | Out-File -Filepath $currentOutputFileName -Append \n                Write-Output $fileHeaderEnd | Out-File -Filepath $currentOutputFileName -Append\n                \n                # REM Explain what we have just done here:\n                echo &quot;Generated sample output file: $currentOutputFileName with stats for CPU thread utilization for time period: [$previousIterationDateTime until $currentTirationDateTime]&quot;\n            }\n            $statsPrev=$stats\n            $Stopwatch.Stop()\n    \n            # This value could be coming negative          \n            # $sleepDuration = $DurationMs-($Stopwatch.ElapsedMilliseconds)\n            $sleepDuration = $DurationMs-($Stopwatch.ElapsedMilliseconds)\n            $sleepDuration = [Math]::Max($sleepDuration,0)\n            [System.Threading.Thread]::Sleep( $sleepDuration )\n            \n            # update the counter of curernt iteration\n            $currentItrationNumber =  $currentItrationNumber + 1\n            $previousIterationDateTime = $currentTirationDateTime\n        }\n    }\n    \n    Get-ThreadProcessorUtilization -ProcId $processId\n</code></pre>\n<p>You will see appearing in the folder:\nC:\\dev\\pps_standalone\\powersheell_threadCpuUtilization\\threadCpuSamples</p>\n<p>The code you see thre is not exactly the same as the one in the reference:\n<a href=\"https://xkln.net/blog/analyzing-thread-cpu-utilization-with-processexplorer-powershell-and-wmi/\" rel=\"nofollow noreferrer\">https://xkln.net/blog/analyzing-thread-cpu-utilization-with-processexplorer-powershell-and-wmi/</a></p>\n<p>But it is close enough that you just need to read the reference to understand it.</p>\n<p>And this, in my opinion, I was better approach because you apply it to any java project that you have ecounter along the way and manifests CPU spikes performance problems.\nYou do not a massive infrastructure to do a super high quality analysis. Jstack + Thread Per Cpu is all you need.</p>\n<p>If you wish, of course, you can integrate into your big data server elastic server / or whatever  by reading the produced files of jstacks together with thread statistics and pumping them to your big data storage.</p>\n<p>Well, the sky is the limit really.</p>\n<p>Unfortunately, the graphical user interfaces like the task manager, they are nice to show you here is a spike ... something is somehow not going well. But you will not derive much more than that.\nYou then need to come down to worth and point your finger:\n-&gt; in that interval of time it was that thread that was gobling 50% cpu.</p>\n<p>For linux the solution is way similar, you can just google how to get CPU per thread of a process with top command, and there you have the keys to to the ferrari.</p>\n<p>So now you know how to do it properly.</p>\n"}],"owner":{"account_id":32893,"reputation":526,"user_id":91596,"display_name":"awk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41048,"favorite_count":0,"down_vote_count":0,"up_vote_count":36,"answer_count":7,"score":36,"last_activity_date":1692015039,"creation_date":1239884860,"question_id":755899,"body_markdown":"I would like to ask whether there is some simple way to determine `cpu usage` per thread in `java`. Thanks","title":"`Monitor cpu usage per thread in java?","body":"<p>I would like to ask whether there is some simple way to determine <code>cpu usage</code> per thread in <code>java</code>. Thanks</p>\n"},{"tags":["java","multithreading","atomicinteger"],"comments":[{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1687133953,"post_id":76501911,"comment_id":134890011,"body_markdown":"Your code as pasted cannot possibly work; it would NPE because you never initialize the `countUriInAction` field. Clearly then you&#39;ve pasted parts of your code and not all of it. One explanation is that you keep re-initializing this field. It is important to paste the _actual_ code that fails, not your guess at the &#39;relevant parts&#39; - after all, you&#39;re asking questions, it&#39;s likely you don&#39;t really know how everything interacts.","body":"Your code as pasted cannot possibly work; it would NPE because you never initialize the <code>countUriInAction</code> field. Clearly then you&#39;ve pasted parts of your code and not all of it. One explanation is that you keep re-initializing this field. It is important to paste the <i>actual</i> code that fails, not your guess at the &#39;relevant parts&#39; - after all, you&#39;re asking questions, it&#39;s likely you don&#39;t really know how everything interacts."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1687134136,"post_id":76501911,"comment_id":134890022,"body_markdown":"There are a number of glaring issues with the few things you have pasted: [1] Making a final reference `volatile` is completely useless - `countUrlInAction` shouldn&#39;t be volatile (or, if you&#39;re re-assigning it, don&#39;t re-assign it). [2] You are writing to other fields with abandon. That&#39;s not how thread safety works. You can&#39;t share fields between threads __at all__ without things going wonky unless you establish Happens-Before/Happens-After, which you aren&#39;t. [3] Your operations aren&#39;t atomic. Most likely, AtomicInteger isn&#39;t part of the solution.","body":"There are a number of glaring issues with the few things you have pasted: [1] Making a final reference <code>volatile</code> is completely useless - <code>countUrlInAction</code> shouldn&#39;t be volatile (or, if you&#39;re re-assigning it, don&#39;t re-assign it). [2] You are writing to other fields with abandon. That&#39;s not how thread safety works. You can&#39;t share fields between threads <b>at all</b> without things going wonky unless you establish Happens-Before/Happens-After, which you aren&#39;t. [3] Your operations aren&#39;t atomic. Most likely, AtomicInteger isn&#39;t part of the solution."}],"answers":[{"comments":[{"owner":{"account_id":7522842,"reputation":3473,"user_id":8082162,"accept_rate":71,"display_name":"aschoerk"},"score":1,"creation_date":1687148941,"post_id":76502452,"comment_id":134891043,"body_markdown":"Does the -1 mean, you tested and it did not work? I would be very much interested, how you solved the problem, since I am using AtomicIntegers very much and they never failed.","body":"Does the -1 mean, you tested and it did not work? I would be very much interested, how you solved the problem, since I am using AtomicIntegers very much and they never failed."},{"owner":{"account_id":14574364,"reputation":11,"user_id":11558849,"display_name":"Myphre"},"score":0,"creation_date":1692014348,"post_id":76502452,"comment_id":135564094,"body_markdown":"Hi, sorry for the delay, in my mind i answered but now i see i do not. I think I dont put -1 in your awnsred, I considered it.  Anyway, I put and anwsred myself about what and happened or should happned.","body":"Hi, sorry for the delay, in my mind i answered but now i see i do not. I think I dont put -1 in your awnsred, I considered it.  Anyway, I put and anwsred myself about what and happened or should happned."}],"tags":[],"owner":{"account_id":7522842,"reputation":3473,"user_id":8082162,"accept_rate":71,"display_name":"aschoerk"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1687120710,"creation_date":1687120710,"answer_id":76502452,"question_id":76501911,"body_markdown":"You should use decreaseUrlInActionAndVerifyStatus(); always in a finally block.\r\nOtherwise RuntimeExceptions occurring during processing will lead to omitting the decrementing. Why these Exceptions occur is another question, but I suppose more Threads will lead to other problems, perhaps the changing functions on entity are not properly synchronized.","title":"Java Thread Atomic Integer checking not working?","body":"<p>You should use decreaseUrlInActionAndVerifyStatus(); always in a finally block.\nOtherwise RuntimeExceptions occurring during processing will lead to omitting the decrementing. Why these Exceptions occur is another question, but I suppose more Threads will lead to other problems, perhaps the changing functions on entity are not properly synchronized.</p>\n"},{"comments":[{"owner":{"account_id":9557295,"reputation":664,"user_id":7099374,"display_name":"Amuoeba"},"score":1,"creation_date":1692172107,"post_id":76898739,"comment_id":135586175,"body_markdown":"I think this is not a general solution. I agree with the commenters on your question, that you should provide full code that exhibits the unexpected behaviour. From my perspective it looks like you don&#39;t use any thread safety principles as locking and unlocking, when you are accessing and modifying variables from multiple threads.","body":"I think this is not a general solution. I agree with the commenters on your question, that you should provide full code that exhibits the unexpected behaviour. From my perspective it looks like you don&#39;t use any thread safety principles as locking and unlocking, when you are accessing and modifying variables from multiple threads."}],"tags":[],"owner":{"account_id":14574364,"reputation":11,"user_id":11558849,"display_name":"Myphre"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692014184,"creation_date":1692014184,"answer_id":76898739,"question_id":76501911,"body_markdown":"Just to answer the question, i dont know if was some cache from linux or from the Intelij Idea, but after I closed it and rebooted the system everything works fine. [ normally i keep my computer on so enven after a day the error keeped happening ]\r\n\r\nAbout some exception in the thread, i could not find anything. For precautions, i put the finally block too. \r\n\r\nThx for the help.  And sorry for the delay in the return. ","title":"Java Thread Atomic Integer checking not working?","body":"<p>Just to answer the question, i dont know if was some cache from linux or from the Intelij Idea, but after I closed it and rebooted the system everything works fine. [ normally i keep my computer on so enven after a day the error keeped happening ]</p>\n<p>About some exception in the thread, i could not find anything. For precautions, i put the finally block too.</p>\n<p>Thx for the help.  And sorry for the delay in the return.</p>\n"}],"owner":{"account_id":14574364,"reputation":11,"user_id":11558849,"display_name":"Myphre"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1692014184,"creation_date":1687111311,"question_id":76501911,"body_markdown":"im newbie with multi-threads and im trying to make a program that use it. Technically, it has a class with executor and a worker class. The worker class takes the info to work on, process it, if there are more infos to processes the worker calls the executor again and the program keeps going until the text is finished, after that the workers decrease the AtomicInteger check variable and and if equals zero change the status attribute to DONE and saves it. The executor class receive the attributes needed to the worker class, check if the text/site  was proceeded before, if not increments an atomic integer attribute and  put the new text/site reference into a Vector for further checks again. \r\n\r\n\r\nThe Executor class:\r\n\r\n ```\r\n  public class DoScrapper implements IDoScrapper {\r\n    private static Logger log = LoggerFactory.getLogger(DoScrapper.class);\r\n\r\n    private final ThreadPoolExecutor executor = (ThreadPoolExecutor) Executors.newFixedThreadPool(30);\r\n\r\n\r\n\r\n    void doScrapper(final ScrapperWorker scrapperWorker) {\r\n        executor.execute(scrapperWorker);\r\n    }\r\n\r\n    @Override\r\n    public void sendToProccess(\r\n            ScrapperEntity entity,\r\n            String urlToProccess,\r\n            String rootUrl,\r\n            Vector&lt;String&gt; urlVisited,\r\n            IRequestService requestService,\r\n            IDoScrapper doScrapper,\r\n            Database database) {\r\n\r\n        urlVisited.add(urlToProccess);\r\n        int qtd = entity.addUrlInAction();;\r\n        log.info(&quot;sending to procces url {} for keyword {} , with {} sites opened to visited&quot;,\r\n                urlToProccess, entity.getKeyword(), qtd);\r\n        ScrapperWorker newWorker = new ScrapperWorker(\r\n                entity, urlToProccess, rootUrl,\r\n                urlVisited, requestService,\r\n                doScrapper, database\r\n        );\r\n        doScrapper(newWorker);\r\n    }\r\n\r\n}\r\n``` \r\n\r\nThe worker class:\r\n```\r\n    public class ScrapperWorker implements Runnable{\r\n        private static final Logger log = LoggerFactory.getLogger(ScrapperWorker.class);\r\n    \r\n    \r\n        final ScrapperEntity entity;\r\n        final String url;\r\n        final String rootUrl;\r\n        final Vector&lt;String&gt; urlVisited;\r\n        private final IDoScrapper doScrapper;\r\n        private final Database database;\r\n    \r\n    \r\n    \r\n        public ScrapperWorker(ScrapperEntity entity,\r\n                              String url,\r\n                              String rootUrl,\r\n                              Vector&lt;String&gt; urlVisited,\r\n                              IRequestService requestService,\r\n                              IDoScrapper doScrapper,\r\n                              Database database) {\r\n            this.entity = entity;\r\n            this.url = url;\r\n            this.rootUrl = rootUrl;\r\n            this.urlVisited = urlVisited;\r\n            this.requestService = requestService;\r\n            this.doScrapper = doScrapper;\r\n            this.database = database;\r\n        }\r\n    \r\n        @Override\r\n        public void run() {\r\n            log.info(&quot;thred doing scrapper for url {} keyword {} &quot;,\r\n                    url, entity.getKeyword());\r\n            .... \r\n            do actions and can or cannot call based on the check() method doScrapper();\r\n            ...\r\n\r\n\r\n            decreaseUrlInActionAndVerifyStatus();\r\n        }\r\n    \r\n       \r\n    \r\n        private void decreaseUrlInActionAndVerifyStatus() {\r\n            int sitesToCheck = entity.decreaseUrlInAction();\r\n            log.info(&quot;decreasing visitedSites on entity {}, sites to check {}, sites visited {}  &quot;,\r\n                    entity.getId(), sitesToCheck,  urlVisited.size());\r\n    \r\n    \r\n            if(sitesToCheck == 0 ){\r\n                log.info(&quot;last url, setting STATUS as done ... sitess visited: {} &quot;, urlVisited.size());\r\n                entity.setStatus(StatusScrapper.DONE);\r\n                database.updateData(entity);\r\n            }\r\n    \r\n        }    \r\n    \r\n    private boolean check( String urlComplete, Vector&lt;String&gt; urlVisited) {\r\n        return urlComplete != null\r\n                &amp;&amp; isNotVisitedUrl(urlComplete, urlVisited);\r\n    }\r\n    private boolean isNotVisitedUrl(String url, Vector&lt;String&gt; vector) {\r\n\r\n        return ! vector.contains(url);\r\n\r\n    }\r\n    \r\n\r\n\r\n    }\r\n\r\n\r\n``` \r\n\r\n\r\nThe methods on entity class to decrease and increase:\r\n``` \r\n    private volatile AtomicInteger countUrlInAction;\r\n\r\n    public int addUrlInAction(){\r\n        return countUrlInAction.addAndGet(1);\r\n    }\r\n\r\n    public int decreaseUrlInAction() {\r\n        return countUrlInAction.decrementAndGet();\r\n    }\r\n``` \r\n\r\n\r\nThe problem im having its that sometimes, principally when I put more Threads on the thread pool of the executor or more parallel processing [ more entities to be processed in parallel ] the AtomicInteger become random, sometimes stopping in 1, others in 7 and so on, and the status never change to DONE. \r\nIsn&#39;t for AtomicInteger to increase and decrease correctly in this case or Im missing something? If I cant use AtomicInteger for this, which way is better to do this check?\r\n\r\nThere aren&#39;t any error in the console log, so all threads must be processing all the texts and decreasing the AtomicInteger variable\r\n","title":"Java Thread Atomic Integer checking not working?","body":"<p>im newbie with multi-threads and im trying to make a program that use it. Technically, it has a class with executor and a worker class. The worker class takes the info to work on, process it, if there are more infos to processes the worker calls the executor again and the program keeps going until the text is finished, after that the workers decrease the AtomicInteger check variable and and if equals zero change the status attribute to DONE and saves it. The executor class receive the attributes needed to the worker class, check if the text/site  was proceeded before, if not increments an atomic integer attribute and  put the new text/site reference into a Vector for further checks again.</p>\n<p>The Executor class:</p>\n<pre><code> public class DoScrapper implements IDoScrapper {\n   private static Logger log = LoggerFactory.getLogger(DoScrapper.class);\n\n   private final ThreadPoolExecutor executor = (ThreadPoolExecutor) Executors.newFixedThreadPool(30);\n\n\n\n   void doScrapper(final ScrapperWorker scrapperWorker) {\n       executor.execute(scrapperWorker);\n   }\n\n   @Override\n   public void sendToProccess(\n           ScrapperEntity entity,\n           String urlToProccess,\n           String rootUrl,\n           Vector&lt;String&gt; urlVisited,\n           IRequestService requestService,\n           IDoScrapper doScrapper,\n           Database database) {\n\n       urlVisited.add(urlToProccess);\n       int qtd = entity.addUrlInAction();;\n       log.info(&quot;sending to procces url {} for keyword {} , with {} sites opened to visited&quot;,\n               urlToProccess, entity.getKeyword(), qtd);\n       ScrapperWorker newWorker = new ScrapperWorker(\n               entity, urlToProccess, rootUrl,\n               urlVisited, requestService,\n               doScrapper, database\n       );\n       doScrapper(newWorker);\n   }\n\n}\n</code></pre>\n<p>The worker class:</p>\n<pre><code>    public class ScrapperWorker implements Runnable{\n        private static final Logger log = LoggerFactory.getLogger(ScrapperWorker.class);\n    \n    \n        final ScrapperEntity entity;\n        final String url;\n        final String rootUrl;\n        final Vector&lt;String&gt; urlVisited;\n        private final IDoScrapper doScrapper;\n        private final Database database;\n    \n    \n    \n        public ScrapperWorker(ScrapperEntity entity,\n                              String url,\n                              String rootUrl,\n                              Vector&lt;String&gt; urlVisited,\n                              IRequestService requestService,\n                              IDoScrapper doScrapper,\n                              Database database) {\n            this.entity = entity;\n            this.url = url;\n            this.rootUrl = rootUrl;\n            this.urlVisited = urlVisited;\n            this.requestService = requestService;\n            this.doScrapper = doScrapper;\n            this.database = database;\n        }\n    \n        @Override\n        public void run() {\n            log.info(&quot;thred doing scrapper for url {} keyword {} &quot;,\n                    url, entity.getKeyword());\n            .... \n            do actions and can or cannot call based on the check() method doScrapper();\n            ...\n\n\n            decreaseUrlInActionAndVerifyStatus();\n        }\n    \n       \n    \n        private void decreaseUrlInActionAndVerifyStatus() {\n            int sitesToCheck = entity.decreaseUrlInAction();\n            log.info(&quot;decreasing visitedSites on entity {}, sites to check {}, sites visited {}  &quot;,\n                    entity.getId(), sitesToCheck,  urlVisited.size());\n    \n    \n            if(sitesToCheck == 0 ){\n                log.info(&quot;last url, setting STATUS as done ... sitess visited: {} &quot;, urlVisited.size());\n                entity.setStatus(StatusScrapper.DONE);\n                database.updateData(entity);\n            }\n    \n        }    \n    \n    private boolean check( String urlComplete, Vector&lt;String&gt; urlVisited) {\n        return urlComplete != null\n                &amp;&amp; isNotVisitedUrl(urlComplete, urlVisited);\n    }\n    private boolean isNotVisitedUrl(String url, Vector&lt;String&gt; vector) {\n\n        return ! vector.contains(url);\n\n    }\n    \n\n\n    }\n\n\n</code></pre>\n<p>The methods on entity class to decrease and increase:</p>\n<pre><code>    private volatile AtomicInteger countUrlInAction;\n\n    public int addUrlInAction(){\n        return countUrlInAction.addAndGet(1);\n    }\n\n    public int decreaseUrlInAction() {\n        return countUrlInAction.decrementAndGet();\n    }\n</code></pre>\n<p>The problem im having its that sometimes, principally when I put more Threads on the thread pool of the executor or more parallel processing [ more entities to be processed in parallel ] the AtomicInteger become random, sometimes stopping in 1, others in 7 and so on, and the status never change to DONE.\nIsn't for AtomicInteger to increase and decrease correctly in this case or Im missing something? If I cant use AtomicInteger for this, which way is better to do this check?</p>\n<p>There aren't any error in the console log, so all threads must be processing all the texts and decreasing the AtomicInteger variable</p>\n"},{"tags":["java","html","spring","url","thymeleaf"],"answers":[{"tags":[],"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1692013997,"creation_date":1692013997,"answer_id":76898721,"question_id":76898342,"body_markdown":"Param object returns an array of strings for each parameter, even if there&#39;s only one value for that parameter, that&#39;s why you are seeing the object reference `[Ljava.lang.String;@767a8ed5`. You may access the first element of that array by using an index instead, like:\r\n```html\r\n&lt;p th:text=&quot;${param.message[0]}&quot;&gt;&lt;/p&gt;\r\n```","title":"Thymeleaf failed query param resolution","body":"<p>Param object returns an array of strings for each parameter, even if there's only one value for that parameter, that's why you are seeing the object reference <code>[Ljava.lang.String;@767a8ed5</code>. You may access the first element of that array by using an index instead, like:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;p th:text=&quot;${param.message[0]}&quot;&gt;&lt;/p&gt;\n</code></pre>\n"}],"owner":{"account_id":10535224,"reputation":423,"user_id":9116264,"accept_rate":0,"display_name":"Akhmad Zaki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692013997,"creation_date":1692010661,"question_id":76898342,"body_markdown":"I am using Thymeleaf version 2.1.4, When sending query param to an URL, I wanted to print the string. Instead of proper string, it prints string object like this `[Ljava.lang.String;@767a8ed5`. I try to print it in HTML like this:\r\n\r\n```\r\n&lt;p th:text=&quot;${param.message}&quot;&gt;&lt;/p&gt;\r\n```\r\n\r\nThe url is like this:\r\n```\r\nhttp://localhost:8000/about?message=This%20is%20about%20page.\r\n```\r\n\r\nAny help will be appreciated with mistakes in my code.","title":"Thymeleaf failed query param resolution","body":"<p>I am using Thymeleaf version 2.1.4, When sending query param to an URL, I wanted to print the string. Instead of proper string, it prints string object like this <code>[Ljava.lang.String;@767a8ed5</code>. I try to print it in HTML like this:</p>\n<pre><code>&lt;p th:text=&quot;${param.message}&quot;&gt;&lt;/p&gt;\n</code></pre>\n<p>The url is like this:</p>\n<pre><code>http://localhost:8000/about?message=This%20is%20about%20page.\n</code></pre>\n<p>Any help will be appreciated with mistakes in my code.</p>\n"},{"tags":["java","spring-boot","docker"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1692013573,"post_id":76898500,"comment_id":135563939,"body_markdown":"wait, can you clarify? Are you trying to pass it to the docker container as an environment variable? It sounds quite confusing the way you describe it in the question, please provide more details","body":"wait, can you clarify? Are you trying to pass it to the docker container as an environment variable? It sounds quite confusing the way you describe it in the question, please provide more details"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1692013718,"post_id":76898500,"comment_id":135563972,"body_markdown":"if you want to pass it as a environment variable to a docker container, you could use the -e option, `-e SERVER_CONFIG_IPS=10.10.10.10,10.10.10.11` or if in docker compose pass it using the environment attribute similarly `SERVER_CONFIG_IPS=10.10.10.10,10.10.10.11`","body":"if you want to pass it as a environment variable to a docker container, you could use the -e option, <code>-e SERVER_CONFIG_IPS=10.10.10.10,10.10.10.11</code> or if in docker compose pass it using the environment attribute similarly <code>SERVER_CONFIG_IPS=10.10.10.10,10.10.10.11</code>"},{"owner":{"account_id":8739741,"reputation":6543,"user_id":6537157,"accept_rate":100,"display_name":"akop"},"score":0,"creation_date":1692014080,"post_id":76898500,"comment_id":135564043,"body_markdown":"Are you using [tag:docker-compose]? Or [tag:kubernetes]? Or manually like `docker run ...`?","body":"Are you using <a href=\"https://stackoverflow.com/questions/tagged/docker-compose\">docker-compose</a>? Or <a href=\"https://stackoverflow.com/questions/tagged/kubernetes\">kubernetes</a>? Or manually like <code>docker run ...</code>?"},{"owner":{"account_id":13863020,"reputation":137043,"user_id":10008173,"display_name":"David Maze"},"score":1,"creation_date":1692015424,"post_id":76898500,"comment_id":135564303,"body_markdown":"The Spring Boot documentation chapter on [Externalized Configuration](https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config) covers most of the possible options.  Bind-mounting a configuration file into the container is an option.  If you want to use environment variables, experimenting with it outside a container might be easier, and then porting your results into Docker syntax.","body":"The Spring Boot documentation chapter on <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config\" rel=\"nofollow noreferrer\">Externalized Configuration</a> covers most of the possible options.  Bind-mounting a configuration file into the container is an option.  If you want to use environment variables, experimenting with it outside a container might be easier, and then porting your results into Docker syntax."}],"answers":[{"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692013561,"creation_date":1692013145,"answer_id":76898623,"question_id":76898500,"body_markdown":"\r\n```yaml\r\nserver:\r\n  config:\r\n    ips:\r\n      - 10.10.10.10\r\n      - 10.10.10.11\r\n      - 10.10.10.12\r\n      - 10.10.10.13\r\n```\r\n\r\nIs equivalent to \r\n\r\n```yaml\r\nserver:\r\n  config:\r\n    ips: [&quot;10.10.10.10&quot;, &quot;10.10.10.11&quot;, &quot;10.10.10.12&quot;, &quot;10.10.10.13&quot;]\r\n```\r\n\r\nIt seems you are using spring... so perhaps you could do\r\n\r\n```yaml\r\nserver:\r\n  config:\r\n    ips: [${SERVER_IPS}]\r\n```\r\n\r\nThen set an environment variable\r\n```\r\nSERVER_IPS=&quot;10.10.10.10&quot;,&quot;10.10.10.11&quot;,&quot;10.10.10.12&quot;,&quot;10.10.10.13&quot;\r\n```\r\n\r\nIn this instance I don&#39;t think you need the quotes (each value contains at least one non-numeric character, values don&#39;t contain commas) so you can likely do\r\n```\r\nSERVER_IPS=10.10.10.10,10.10.10.11,10.10.10.12,10.10.10.13\r\n```","title":"How to pass dynamic array from ENV to a docker container","body":"<pre class=\"lang-yaml prettyprint-override\"><code>server:\n  config:\n    ips:\n      - 10.10.10.10\n      - 10.10.10.11\n      - 10.10.10.12\n      - 10.10.10.13\n</code></pre>\n<p>Is equivalent to</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>server:\n  config:\n    ips: [&quot;10.10.10.10&quot;, &quot;10.10.10.11&quot;, &quot;10.10.10.12&quot;, &quot;10.10.10.13&quot;]\n</code></pre>\n<p>It seems you are using spring... so perhaps you could do</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>server:\n  config:\n    ips: [${SERVER_IPS}]\n</code></pre>\n<p>Then set an environment variable</p>\n<pre><code>SERVER_IPS=&quot;10.10.10.10&quot;,&quot;10.10.10.11&quot;,&quot;10.10.10.12&quot;,&quot;10.10.10.13&quot;\n</code></pre>\n<p>In this instance I don't think you need the quotes (each value contains at least one non-numeric character, values don't contain commas) so you can likely do</p>\n<pre><code>SERVER_IPS=10.10.10.10,10.10.10.11,10.10.10.12,10.10.10.13\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8636871,"reputation":21,"user_id":6466767,"display_name":"Michal Kov&#225;čik"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692013520,"creation_date":1692013520,"answer_id":76898672,"question_id":76898500,"body_markdown":"I&#39;d use a colon (or separator char of your preference) separated value list to send it in a single env variable and then just split it by separator on the receiver end.\r\n\r\n    env:\r\n      name: IP_LIST\r\n      value: &quot;10.10.10.10;10.10.10.11;10.10.10.12;10.10.10.13&quot;","title":"How to pass dynamic array from ENV to a docker container","body":"<p>I'd use a colon (or separator char of your preference) separated value list to send it in a single env variable and then just split it by separator on the receiver end.</p>\n<pre><code>env:\n  name: IP_LIST\n  value: &quot;10.10.10.10;10.10.10.11;10.10.10.12;10.10.10.13&quot;\n</code></pre>\n"}],"owner":{"account_id":143734,"reputation":791,"user_id":352290,"accept_rate":100,"display_name":"user352290"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":76898623,"answer_count":2,"score":-1,"last_activity_date":1692013561,"creation_date":1692012034,"question_id":76898500,"body_markdown":"We currently load ips from src/main/resources/application.properties as a Map&lt;String, List&lt;String&gt;&gt;\r\n\r\n\r\n&gt;     server:\r\n&gt;       config:\r\n&gt;         ips:\r\n&gt;           - 10.10.10.10\r\n&gt;           - 10.10.10.11\r\n&gt;           - 10.10.10.12\r\n&gt;           - 10.10.10.13\r\n\r\nIf I have to pass this from the ENV for a docker container, how should I do it","title":"How to pass dynamic array from ENV to a docker container","body":"<p>We currently load ips from src/main/resources/application.properties as a Map&lt;String, List&gt;</p>\n<blockquote>\n<pre><code>server:\n  config:\n    ips:\n      - 10.10.10.10\n      - 10.10.10.11\n      - 10.10.10.12\n      - 10.10.10.13\n</code></pre>\n</blockquote>\n<p>If I have to pass this from the ENV for a docker container, how should I do it</p>\n"},{"tags":["java","heap-dump","oql","eclipse-mat"],"comments":[{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":0,"creation_date":1689700239,"post_id":76715072,"comment_id":135249786,"body_markdown":"Does this answer your question? [How can I parse/format dates with LocalDateTime? (Java 8)](https://stackoverflow.com/questions/22463062/how-can-i-parse-format-dates-with-localdatetime-java-8)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/22463062/how-can-i-parse-format-dates-with-localdatetime-java-8\">How can I parse/format dates with LocalDateTime? (Java 8)</a>"},{"owner":{"account_id":3552273,"reputation":894,"user_id":3340829,"accept_rate":62,"display_name":"Leprechaun"},"score":0,"creation_date":1689701591,"post_id":76715072,"comment_id":135250049,"body_markdown":"@ChristopherSchneider No, I need to format it in OQL","body":"@ChristopherSchneider No, I need to format it in OQL"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1690247925,"post_id":76715072,"comment_id":135323600,"body_markdown":"Perhaps just `SELECT mci.firstName, mci.importantDateTime …`?","body":"Perhaps just <code>SELECT mci.firstName, mci.importantDateTime …</code>?"},{"owner":{"account_id":3552273,"reputation":894,"user_id":3340829,"accept_rate":62,"display_name":"Leprechaun"},"score":0,"creation_date":1690320542,"post_id":76715072,"comment_id":135336531,"body_markdown":"@BasilBourque Unfortunately, no, it&#39;s not that easy. It just prints the same address in a slightly different format: `java.time.LocalDateTime [id=0x83be8420]`","body":"@BasilBourque Unfortunately, no, it&#39;s not that easy. It just prints the same address in a slightly different format: <code>java.time.LocalDateTime [id=0x83be8420]</code>"}],"answers":[{"tags":[],"owner":{"account_id":18866500,"reputation":431,"user_id":13762112,"display_name":"user13762112"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692013481,"creation_date":1692013481,"answer_id":76898667,"question_id":76715072,"body_markdown":"Something like this could help:\r\n\r\n    SELECT ((((((((((((toString(l.date.year) + &quot;-&quot;) + l.date.month) + &quot;-&quot;) + l.date.day) + &quot;T&quot;) + l.time.hour) + &quot;:&quot;) + l.time.minute) + &quot;:&quot;) + l.time.second) + &quot;.&quot;) + l.time.nano) AS &quot;Local date time&quot; FROM java.time.LocalDateTime l \r\n\r\nModify this replacing `l` with `mci.importantDateTime`.\r\n\r\nAlternatively, you could write an extension for MAT with a class specific name resolver [org_eclipse_mat_api_nameResolver][1] for `java.time.LocalDateTime`, `java.time.LocalDate` and `java.time.LocalTime`.\r\n\r\n  [1]: https://help.eclipse.org/latest/index.jsp?topic=%2Forg.eclipse.mat.ui.help%2Fdoc%2Forg_eclipse_mat_api_nameResolver.html","title":"How to convert LocalDateTime to human readable string in OQL","body":"<p>Something like this could help:</p>\n<pre><code>SELECT ((((((((((((toString(l.date.year) + &quot;-&quot;) + l.date.month) + &quot;-&quot;) + l.date.day) + &quot;T&quot;) + l.time.hour) + &quot;:&quot;) + l.time.minute) + &quot;:&quot;) + l.time.second) + &quot;.&quot;) + l.time.nano) AS &quot;Local date time&quot; FROM java.time.LocalDateTime l \n</code></pre>\n<p>Modify this replacing <code>l</code> with <code>mci.importantDateTime</code>.</p>\n<p>Alternatively, you could write an extension for MAT with a class specific name resolver <a href=\"https://help.eclipse.org/latest/index.jsp?topic=%2Forg.eclipse.mat.ui.help%2Fdoc%2Forg_eclipse_mat_api_nameResolver.html\" rel=\"nofollow noreferrer\">org_eclipse_mat_api_nameResolver</a> for <code>java.time.LocalDateTime</code>, <code>java.time.LocalDate</code> and <code>java.time.LocalTime</code>.</p>\n"}],"owner":{"account_id":3552273,"reputation":894,"user_id":3340829,"accept_rate":62,"display_name":"Leprechaun"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692013481,"creation_date":1689699630,"question_id":76715072,"body_markdown":"I am trying to create an **OQL query** in Eclipse MAT to select a bunch of objects from a Java heapdump with `LocalDateTime` fields. Simply calling the `.toString()` function of the object just returns the object address, e.g. this:\r\n\r\n```oql\r\nSELECT mci.firstName.toString(), mci.importantDateTime.toString() AS mydatetime FROM com.example.MyClass$Inner mci WHERE (mci.firstName.toString() = &quot;John&quot;)\r\n```\r\nreturns `John | java.time.LocalDateTime @ 0x83be8420`\r\n\r\nHow do I convert the object to a human-readable datetime string?\r\n\r\n\r\nOnce again to make it crystal clear: I don&#39;t want to parse a date time in Java. I need an Object Query Language (**OQL**) statement that produces a human readable string out of a `LocalDateTime` field.","title":"How to convert LocalDateTime to human readable string in OQL","body":"<p>I am trying to create an <strong>OQL query</strong> in Eclipse MAT to select a bunch of objects from a Java heapdump with <code>LocalDateTime</code> fields. Simply calling the <code>.toString()</code> function of the object just returns the object address, e.g. this:</p>\n<pre><code>SELECT mci.firstName.toString(), mci.importantDateTime.toString() AS mydatetime FROM com.example.MyClass$Inner mci WHERE (mci.firstName.toString() = &quot;John&quot;)\n</code></pre>\n<p>returns <code>John | java.time.LocalDateTime @ 0x83be8420</code></p>\n<p>How do I convert the object to a human-readable datetime string?</p>\n<p>Once again to make it crystal clear: I don't want to parse a date time in Java. I need an Object Query Language (<strong>OQL</strong>) statement that produces a human readable string out of a <code>LocalDateTime</code> field.</p>\n"},{"tags":["java","spring","spring-mvc"],"comments":[{"owner":{"account_id":3750645,"reputation":28034,"user_id":3118209,"accept_rate":93,"display_name":"Arpit Aggarwal"},"score":2,"creation_date":1483725521,"post_id":41511511,"comment_id":70228955,"body_markdown":"Where is the implementation class of  `ClientRepository`?","body":"Where is the implementation class of  <code>ClientRepository</code>?"},{"owner":{"account_id":7774276,"reputation":1301,"user_id":6480625,"accept_rate":33,"display_name":"kopylov"},"score":0,"creation_date":1483732568,"post_id":41511511,"comment_id":70232696,"body_markdown":"@Arpit I create an instance of ClientRepository only in ClientServiceImpl.\nIt&#39;s my first experience this Spring Data JPA and i don&#39;t know how do correctly. So I followed example","body":"@Arpit I create an instance of ClientRepository only in ClientServiceImpl. It&#39;s my first experience this Spring Data JPA and i don&#39;t know how do correctly. So I followed example"},{"owner":{"account_id":7774276,"reputation":1301,"user_id":6480625,"accept_rate":33,"display_name":"kopylov"},"score":0,"creation_date":1483738977,"post_id":41511511,"comment_id":70235715,"body_markdown":"@Arpit Please look at my project on github (i add link)","body":"@Arpit Please look at my project on github (i add link)"}],"answers":[{"tags":[],"owner":{"account_id":3507861,"reputation":408,"user_id":2932980,"display_name":"Sergio"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1483725831,"creation_date":1483725831,"answer_id":41511609,"question_id":41511511,"body_markdown":"Add @Repository annotation to the Spring Data JPA repo","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>Add @Repository annotation to the Spring Data JPA repo</p>\n"},{"comments":[{"owner":{"account_id":7774276,"reputation":1301,"user_id":6480625,"accept_rate":33,"display_name":"kopylov"},"score":1,"creation_date":1483731877,"post_id":41511610,"comment_id":70232290,"body_markdown":"This is I have in my appContext.xml and it doesn&#39;t help","body":"This is I have in my appContext.xml and it doesn&#39;t help"}],"tags":[],"owner":{"account_id":2962536,"reputation":2218,"user_id":7330729,"display_name":"Dmitry Gorkovets"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1483725834,"creation_date":1483725834,"answer_id":41511610,"question_id":41511511,"body_markdown":"According to [documentation][1] you should set XML configuration:\r\n\r\n    &lt;jpa:repositories base-package=&quot;com.kopylov.repository&quot; /&gt;\r\n\r\n\r\n  [1]: https://spring.io/blog/2011/02/10/getting-started-with-spring-data-jpa/","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>According to <a href=\"https://spring.io/blog/2011/02/10/getting-started-with-spring-data-jpa/\" rel=\"nofollow noreferrer\">documentation</a> you should set XML configuration:</p>\n\n<pre><code>&lt;jpa:repositories base-package=\"com.kopylov.repository\" /&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7774276,"reputation":1301,"user_id":6480625,"accept_rate":33,"display_name":"kopylov"},"score":5,"creation_date":1484426532,"post_id":41511612,"comment_id":70508184,"body_markdown":"Now I have such error:\n\norg.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;com.kopylov.repository.ClientRepository&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}","body":"Now I have such error:  org.springframework.beans.factory.NoSuchBeanDefinitionExcept&zwnj;&#8203;ion: No qualifying bean of type &#39;com.kopylov.repository.ClientRepository&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(req&zwnj;&#8203;uired=true)}"},{"owner":{"account_id":2837149,"reputation":308,"user_id":2437542,"display_name":"Rajantha Fernando"},"score":2,"creation_date":1584509518,"post_id":41511612,"comment_id":107454792,"body_markdown":"I also had the same issue, forgot to add Service annotation in impl. Adding Service annotation fixed the issue. Thanks @Alex","body":"I also had the same issue, forgot to add Service annotation in impl. Adding Service annotation fixed the issue. Thanks @Alex"},{"owner":{"account_id":3801000,"reputation":624,"user_id":3154666,"accept_rate":75,"display_name":"Introspective"},"score":0,"creation_date":1686135153,"post_id":41511612,"comment_id":134756643,"body_markdown":"I have the same issue. It runs perfectly as a Maven based project, but fails with the same horrific error message and stacktrace when built &amp; run as a Gradle based project. I already spent 2 days trying all the ideas posted here - to no avail. Anyone has experienced this before? Additional tips?","body":"I have the same issue. It runs perfectly as a Maven based project, but fails with the same horrific error message and stacktrace when built &amp; run as a Gradle based project. I already spent 2 days trying all the ideas posted here - to no avail. Anyone has experienced this before? Additional tips?"}],"tags":[],"owner":{"account_id":4862517,"reputation":1544,"user_id":3921725,"display_name":"Alex Roig"},"comment_count":3,"down_vote_count":1,"up_vote_count":57,"is_accepted":true,"score":56,"last_activity_date":1483947509,"creation_date":1483725845,"answer_id":41511612,"question_id":41511511,"body_markdown":"The ClientRepository should be annotated with `@Repository` tag. \r\nWith your current configuration Spring will not scan the class and have knowledge about it. At the moment of booting and wiring will not find the ClientRepository class. \r\n\r\n**EDIT**\r\nIf adding the `@Repository` tag doesn&#39;t help, then I think that the problem might be now with the `ClientService` and `ClientServiceImpl`.\r\n\r\nTry to annotate the `ClientService` (interface) with `@Service`. As you should only have a single implementation for your service, you don&#39;t need to specify a name with the optional parameter `@Service(&quot;clientService&quot;)`. Spring will autogenerate it based on the interface&#39; name.\r\n\r\nAlso, as Bruno mentioned, the `@Qualifier` is not needed in the `ClientController` as you only have a single implementation for the service. \r\n\r\n**ClientService.java**\r\n\r\n    @Service\r\n    public interface ClientService {\r\n    \r\n        void addClient(Client client);\r\n    }\r\n\r\n\r\n**ClientServiceImpl.java** (option 1)\r\n\r\n    @Service\r\n    public class ClientServiceImpl implements ClientService{\r\n\r\n        private ClientRepository clientRepository;\r\n\r\n        @Autowired\r\n        public void setClientRepository(ClientRepository clientRepository){\r\n            this.clientRepository=clientRepository;\r\n        }\r\n\r\n        @Transactional\r\n        public void addClient(Client client){\r\n            clientRepository.saveAndFlush(client);\r\n        }\r\n    }\r\n\r\n\r\n**ClientServiceImpl.java** (option 2/preferred)\r\n\r\n    @Service\r\n    public class ClientServiceImpl implements ClientService{\r\n\r\n        @Autowired\r\n        private ClientRepository clientRepository;\r\n\r\n        @Transactional\r\n        public void addClient(Client client){\r\n            clientRepository.saveAndFlush(client);\r\n        }\r\n    }\r\n\r\n**ClientController.java**\r\n\r\n    @Controller\r\n    public class ClientController {\r\n        private ClientService clientService;\r\n\r\n        @Autowired\r\n        //@Qualifier(&quot;clientService&quot;)\r\n        public void setClientService(ClientService clientService){\r\n            this.clientService=clientService;\r\n        }\r\n\r\n        @RequestMapping(value = &quot;registration&quot;, method = RequestMethod.GET)\r\n        public String reg(Model model){\r\n            model.addAttribute(&quot;client&quot;, new Client());\r\n            return &quot;registration&quot;;\r\n        }\r\n\r\n        @RequestMapping(value = &quot;registration/add&quot;, method = RequestMethod.POST)\r\n        public String addUser(@ModelAttribute Client client){\r\n            this.clientService.addClient(client);\r\n        return &quot;home&quot;;\r\n        }\r\n    }","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>The ClientRepository should be annotated with <code>@Repository</code> tag. \nWith your current configuration Spring will not scan the class and have knowledge about it. At the moment of booting and wiring will not find the ClientRepository class. </p>\n\n<p><strong>EDIT</strong>\nIf adding the <code>@Repository</code> tag doesn't help, then I think that the problem might be now with the <code>ClientService</code> and <code>ClientServiceImpl</code>.</p>\n\n<p>Try to annotate the <code>ClientService</code> (interface) with <code>@Service</code>. As you should only have a single implementation for your service, you don't need to specify a name with the optional parameter <code>@Service(\"clientService\")</code>. Spring will autogenerate it based on the interface' name.</p>\n\n<p>Also, as Bruno mentioned, the <code>@Qualifier</code> is not needed in the <code>ClientController</code> as you only have a single implementation for the service. </p>\n\n<p><strong>ClientService.java</strong></p>\n\n<pre><code>@Service\npublic interface ClientService {\n\n    void addClient(Client client);\n}\n</code></pre>\n\n<p><strong>ClientServiceImpl.java</strong> (option 1)</p>\n\n<pre><code>@Service\npublic class ClientServiceImpl implements ClientService{\n\n    private ClientRepository clientRepository;\n\n    @Autowired\n    public void setClientRepository(ClientRepository clientRepository){\n        this.clientRepository=clientRepository;\n    }\n\n    @Transactional\n    public void addClient(Client client){\n        clientRepository.saveAndFlush(client);\n    }\n}\n</code></pre>\n\n<p><strong>ClientServiceImpl.java</strong> (option 2/preferred)</p>\n\n<pre><code>@Service\npublic class ClientServiceImpl implements ClientService{\n\n    @Autowired\n    private ClientRepository clientRepository;\n\n    @Transactional\n    public void addClient(Client client){\n        clientRepository.saveAndFlush(client);\n    }\n}\n</code></pre>\n\n<p><strong>ClientController.java</strong></p>\n\n<pre><code>@Controller\npublic class ClientController {\n    private ClientService clientService;\n\n    @Autowired\n    //@Qualifier(\"clientService\")\n    public void setClientService(ClientService clientService){\n        this.clientService=clientService;\n    }\n\n    @RequestMapping(value = \"registration\", method = RequestMethod.GET)\n    public String reg(Model model){\n        model.addAttribute(\"client\", new Client());\n        return \"registration\";\n    }\n\n    @RequestMapping(value = \"registration/add\", method = RequestMethod.POST)\n    public String addUser(@ModelAttribute Client client){\n        this.clientService.addClient(client);\n    return \"home\";\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":19259266,"reputation":1853,"user_id":14075508,"display_name":"Alex Vergara"},"score":0,"creation_date":1634805409,"post_id":41511651,"comment_id":123126207,"body_markdown":"You are just writting the same things that already have been posted","body":"You are just writting the same things that already have been posted"}],"tags":[],"owner":{"account_id":9568737,"reputation":308,"user_id":7107113,"display_name":"Bruno Delor"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1483725980,"creation_date":1483725980,"answer_id":41511651,"question_id":41511511,"body_markdown":"Considering that your package scanning is correctly set either through XML configuration or annotation based configuration.\r\n\r\nYou will need a `@Repository` on your `ClientRepository` implementation as well to allow Spring to use it in an `@Autowired`. Since it&#39;s not here we can only suppose that&#39;s what&#39;s missing.\r\n\r\nAs a side note, it would be cleaner to put your `@Autowired`/`@Qualifier` directly on your member if the setter method is only used for the `@Autowired`.\r\n\r\n    @Autowired\r\n    @Qualifier(&quot;clientRepository&quot;)\r\n    private ClientRepository clientRepository;\r\n\r\nLastly, you don&#39;t need the `@Qualifier` is there is only one class implementing the bean definition so unless you have several implementation of `ClientService ` and `ClientRepository ` you can remove the `@Qualifier`","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>Considering that your package scanning is correctly set either through XML configuration or annotation based configuration.</p>\n\n<p>You will need a <code>@Repository</code> on your <code>ClientRepository</code> implementation as well to allow Spring to use it in an <code>@Autowired</code>. Since it's not here we can only suppose that's what's missing.</p>\n\n<p>As a side note, it would be cleaner to put your <code>@Autowired</code>/<code>@Qualifier</code> directly on your member if the setter method is only used for the <code>@Autowired</code>.</p>\n\n<pre><code>@Autowired\n@Qualifier(\"clientRepository\")\nprivate ClientRepository clientRepository;\n</code></pre>\n\n<p>Lastly, you don't need the <code>@Qualifier</code> is there is only one class implementing the bean definition so unless you have several implementation of <code>ClientService</code> and <code>ClientRepository</code> you can remove the <code>@Qualifier</code></p>\n"},{"comments":[{"owner":{"account_id":6580880,"reputation":180,"user_id":5085212,"accept_rate":67,"display_name":"Lucas"},"score":0,"creation_date":1600082299,"post_id":49251441,"comment_id":112966098,"body_markdown":"What about i have no main class ?","body":"What about i have no main class ?"}],"tags":[],"owner":{"account_id":12546935,"reputation":1675,"user_id":9129885,"display_name":"Shubham Chopra"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1520929649,"creation_date":1520929649,"answer_id":49251441,"question_id":41511511,"body_markdown":"Try adding @EntityScan(basePackages = &quot;insert package name here&quot;) on top of your main class.","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>Try adding @EntityScan(basePackages = \"insert package name here\") on top of your main class.</p>\n"},{"tags":[],"owner":{"account_id":12158049,"reputation":51,"user_id":8876452,"display_name":"Ricuzzo"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1522743683,"creation_date":1522743683,"answer_id":49625394,"question_id":41511511,"body_markdown":"That might happen because the pojos you are using lack of the precise constructor the service needs. That is, try to generate  all the constructors for the pojo or objects (model object) that your serviceClient uses, so that the client can be instanced correctly. In your case,regenerate the constructors (with arguments)for your client object (taht is your model object).","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>That might happen because the pojos you are using lack of the precise constructor the service needs. That is, try to generate  all the constructors for the pojo or objects (model object) that your serviceClient uses, so that the client can be instanced correctly. In your case,regenerate the constructors (with arguments)for your client object (taht is your model object).</p>\n"},{"tags":[],"owner":{"account_id":13413002,"reputation":31,"user_id":9678664,"display_name":"oceangs"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1524319586,"creation_date":1524314763,"answer_id":49955921,"question_id":41511511,"body_markdown":"The application needs to be placed in the same directory as the scanned package:\r\n\r\n![enter image description here][1]\r\n\r\n  [1]: https://i.stack.imgur.com/gFQLN.png","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>The application needs to be placed in the same directory as the scanned package:</p>\n\n<p><img src=\"https://i.stack.imgur.com/gFQLN.png\" alt=\"enter image description here\"></p>\n"},{"tags":[],"owner":{"account_id":1170705,"reputation":3957,"user_id":1147963,"display_name":"Krist&#243;f Dombi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1525439325,"creation_date":1525439325,"answer_id":50175757,"question_id":41511511,"body_markdown":"I had the exactly same issue, with a very very long stack trace.\r\nAt the end of the trace I saw this:\r\n\r\n&gt; InvalidQueryException: Keyspace &#39;mykeyspace&#39; does not exist\r\n\r\nI created the keyspace in cassandra, and solved the problem.\r\n\r\n    CREATE KEYSPACE mykeyspace\r\n      WITH REPLICATION = { \r\n       &#39;class&#39; : &#39;SimpleStrategy&#39;, \r\n       &#39;replication_factor&#39; : 1 \r\n      };","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>I had the exactly same issue, with a very very long stack trace.\nAt the end of the trace I saw this:</p>\n\n<blockquote>\n  <p>InvalidQueryException: Keyspace 'mykeyspace' does not exist</p>\n</blockquote>\n\n<p>I created the keyspace in cassandra, and solved the problem.</p>\n\n<pre><code>CREATE KEYSPACE mykeyspace\n  WITH REPLICATION = { \n   'class' : 'SimpleStrategy', \n   'replication_factor' : 1 \n  };\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3233674,"reputation":41,"user_id":2728345,"display_name":"Nitish Sharma"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1526763077,"creation_date":1526763077,"answer_id":50429384,"question_id":41511511,"body_markdown":"I was facing the same issue, and it was, as i missed marking my DAO class with Entity annotations. I tried below and error got resolved.\r\n\r\n    /**\r\n    *`enter code here`\r\n    */\r\n    @Entity &lt;-- was missing earlier\r\n        public class Topic {\r\n        \t@Id  \r\n        \tString id;\r\n        \tString name;\r\n        \tString desc;\r\n        \r\n        .\r\n        .\r\n        .\r\n        }","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>I was facing the same issue, and it was, as i missed marking my DAO class with Entity annotations. I tried below and error got resolved.</p>\n\n<pre><code>/**\n*`enter code here`\n*/\n@Entity &lt;-- was missing earlier\n    public class Topic {\n        @Id  \n        String id;\n        String name;\n        String desc;\n\n    .\n    .\n    .\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9428710,"reputation":11,"user_id":7012916,"display_name":"Siddaraju Siddappa"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536605925,"creation_date":1536605925,"answer_id":52263897,"question_id":41511511,"body_markdown":"Check out the table structure of Client table, if there is a mismatch between table structure in db and the entity, you would get this error..\r\n\r\n\r\nI had this error which was coming due to datatype mismatch of primary key between db table and the entity ...  \r\n\r\n","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>Check out the table structure of Client table, if there is a mismatch between table structure in db and the entity, you would get this error..</p>\n\n<p>I had this error which was coming due to datatype mismatch of primary key between db table and the entity ...  </p>\n"},{"comments":[{"owner":{"account_id":6999107,"reputation":760,"user_id":5365730,"display_name":"Bruno Cal&#231;a"},"score":0,"creation_date":1602179736,"post_id":52736540,"comment_id":113646198,"body_markdown":"im not sure if would have helped the OP, but if anyone is using SpringBoot and have @EnableAutoConfiguration(exclude = {DataSource/HibernateJpa..etc} \n\nThese excludes may deny spring to auto verify the annotations declared in the CRUD classes, so the removal of the exclusions might fix it together with adding the @EnableJpaRepositories in the Main class","body":"im not sure if would have helped the OP, but if anyone is using SpringBoot and have @EnableAutoConfiguration(exclude = {DataSource/HibernateJpa..etc}   These excludes may deny spring to auto verify the annotations declared in the CRUD classes, so the removal of the exclusions might fix it together with adding the @EnableJpaRepositories in the Main class"}],"tags":[],"owner":{"account_id":14513422,"reputation":41,"user_id":10483192,"display_name":"Nesryna"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1539163401,"creation_date":1539162411,"answer_id":52736540,"question_id":41511511,"body_markdown":"I just added the `@Repository` annotation to Repository interface and `@EnableJpaRepositories` (&quot;domain.repositroy-package&quot;) to the main class. It worked just fine.","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>I just added the <code>@Repository</code> annotation to Repository interface and <code>@EnableJpaRepositories</code> (\"domain.repositroy-package\") to the main class. It worked just fine.</p>\n"},{"tags":[],"owner":{"account_id":3732221,"reputation":566,"user_id":4361933,"accept_rate":0,"display_name":"&#214;MER TAŞCI"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1540420557,"creation_date":1540420557,"answer_id":52978845,"question_id":41511511,"body_markdown":"If you describe a field as criteria in method definition (&quot;findBy&quot;), You must pass that parameter to the method, otherwise you will get &quot;Unsatisfied dependency expressed through method  parameter&quot; exception.\r\n\r\n\r\n    public interface ClientRepository extends JpaRepository&lt;Client, Integer&gt; {\r\n           Client findByClientId();                ////WRONG !!!!\r\n           Client findByClientId(int clientId);    /// CORRECT \r\n    }\r\n*I assume that your Client entity has clientId attribute.","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>If you describe a field as criteria in method definition (\"findBy\"), You must pass that parameter to the method, otherwise you will get \"Unsatisfied dependency expressed through method  parameter\" exception.</p>\n\n<pre><code>public interface ClientRepository extends JpaRepository&lt;Client, Integer&gt; {\n       Client findByClientId();                ////WRONG !!!!\n       Client findByClientId(int clientId);    /// CORRECT \n}\n</code></pre>\n\n<p>*I assume that your Client entity has clientId attribute.</p>\n"},{"comments":[{"owner":{"account_id":7146129,"reputation":99,"user_id":5461766,"display_name":"sar"},"score":0,"creation_date":1627640321,"post_id":53785214,"comment_id":121215846,"body_markdown":"Could you please make it more clearer to understand","body":"Could you please make it more clearer to understand"}],"tags":[],"owner":{"account_id":8788967,"reputation":131,"user_id":9528389,"display_name":"ben fadhel Ichraf"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1544816922,"creation_date":1544812737,"answer_id":53785214,"question_id":41511511,"body_markdown":"I know it seems too late, but it may help others in future.\r\n\r\nI face the same error and the problem was that spring boot did not read my services package so add:\r\n\r\n`@ComponentScan(basePackages = {&quot;com.example.demo.Services&quot;})` (you have to specify your own path to the services package) and in the class  `demoApplication` (class that have main function) and for service interface must be annotated  `@Service` and the class that implement the service interface must be annotated with `@Component`, then autowired the service interface.\r\n\r\n\r\n","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>I know it seems too late, but it may help others in future.</p>\n\n<p>I face the same error and the problem was that spring boot did not read my services package so add:</p>\n\n<p><code>@ComponentScan(basePackages = {\"com.example.demo.Services\"})</code> (you have to specify your own path to the services package) and in the class  <code>demoApplication</code> (class that have main function) and for service interface must be annotated  <code>@Service</code> and the class that implement the service interface must be annotated with <code>@Component</code>, then autowired the service interface.</p>\n"},{"comments":[{"owner":{"account_id":7565436,"reputation":1179,"user_id":5741227,"accept_rate":86,"display_name":"iamjoshua"},"score":1,"creation_date":1558261712,"post_id":54773593,"comment_id":99035422,"body_markdown":"this fixed mine. THanks alot. But I wonder why it doesn&#39;t automatically detect my beans/classes even though they exist. Is this some sort of a bug?. My application is all under one package anyway and I dont have any other packages.I don&#39;t get why I have to manually have the component class be declared.","body":"this fixed mine. THanks alot. But I wonder why it doesn&#39;t automatically detect my beans/classes even though they exist. Is this some sort of a bug?. My application is all under one package anyway and I dont have any other packages.I don&#39;t get why I have to manually have the component class be declared."},{"owner":{"account_id":14172586,"reputation":337,"user_id":10238776,"display_name":"Tejas Garde"},"score":0,"creation_date":1602655214,"post_id":54773593,"comment_id":113785524,"body_markdown":"Well if you are using @ SPringbootApplication annotation then you dont need @ ComponentScan . \n\n@ SpringBootApplication = @ Configuration + @ ComponentScan + @ EnableAutoConfiguration","body":"Well if you are using @ SPringbootApplication annotation then you dont need @ ComponentScan .   @ SpringBootApplication = @ Configuration + @ ComponentScan + @ EnableAutoConfiguration"}],"tags":[],"owner":{"account_id":11653885,"reputation":2966,"user_id":8534285,"display_name":"Ajay Kumar"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1550604422,"creation_date":1550604422,"answer_id":54773593,"question_id":41511511,"body_markdown":"If you are using Spring Boot, your main app should be like this (just to make and understand things in simple way)  - \r\n\r\n    package aaa.bbb.ccc;\r\n    @SpringBootApplication\r\n    @ComponentScan({ &quot;aaa.bbb.ccc.*&quot; })\r\n    public class Application {\r\n    .....\r\n\r\nMake sure you have @Repository and @Service appropriately annotated.\r\n\r\nMake sure all your packages fall under - aaa.bbb.ccc.*\r\n\r\nIn most cases this setup resolves these kind of trivial issues. [Here][1] is a full blown example. Hope it helps.\r\n\r\n\r\n  [1]: https://github.com/ajkr195/springbootrocks","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>If you are using Spring Boot, your main app should be like this (just to make and understand things in simple way)  - </p>\n\n<pre><code>package aaa.bbb.ccc;\n@SpringBootApplication\n@ComponentScan({ \"aaa.bbb.ccc.*\" })\npublic class Application {\n.....\n</code></pre>\n\n<p>Make sure you have @Repository and @Service appropriately annotated.</p>\n\n<p>Make sure all your packages fall under - aaa.bbb.ccc.*</p>\n\n<p>In most cases this setup resolves these kind of trivial issues. <a href=\"https://github.com/ajkr195/springbootrocks\" rel=\"noreferrer\">Here</a> is a full blown example. Hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":14293268,"reputation":105,"user_id":10324643,"display_name":"Himanshu Shukla"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1609551280,"creation_date":1553136397,"answer_id":55273041,"question_id":41511511,"body_markdown":"See if your \t`&lt;context:component-scan base-package=&quot;your package &quot;/&gt;` is missing in either config or context xml file","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>See if your     <code>&lt;context:component-scan base-package=&quot;your package &quot;/&gt;</code> is missing in either config or context xml file</p>\n"},{"tags":[],"owner":{"account_id":1303659,"reputation":2036,"user_id":1253088,"display_name":"Vaibs"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1556597888,"creation_date":1556597888,"answer_id":55913916,"question_id":41511511,"body_markdown":"That was the version incompatibility where their was the inclusion of lettuce. When i excluded , it worked for me.\r\n\r\n    &lt;!--Spring-Boot 2.0.0 --&gt;\r\n        &lt;dependency&gt;\r\n        \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        \t\t\t&lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\r\n        \t\t\t&lt;exclusions&gt;\r\n        \t\t        &lt;exclusion&gt;\r\n        \t\t            &lt;groupId&gt;io.lettuce&lt;/groupId&gt;\r\n        \t\t            &lt;artifactId&gt;lettuce-core&lt;/artifactId&gt;\r\n        \t\t        &lt;/exclusion&gt;\r\n        \t\t    &lt;/exclusions&gt;    \r\n        \t\t&lt;/dependency&gt;\r\n        \t\t&lt;dependency&gt;\r\n        \t\t    &lt;groupId&gt;redis.clients&lt;/groupId&gt;\r\n        \t\t    &lt;artifactId&gt;jedis&lt;/artifactId&gt;\r\n        \t\t&lt;/dependency&gt;","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>That was the version incompatibility where their was the inclusion of lettuce. When i excluded , it worked for me.</p>\n\n<pre><code>&lt;!--Spring-Boot 2.0.0 --&gt;\n    &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\n                &lt;exclusions&gt;\n                    &lt;exclusion&gt;\n                        &lt;groupId&gt;io.lettuce&lt;/groupId&gt;\n                        &lt;artifactId&gt;lettuce-core&lt;/artifactId&gt;\n                    &lt;/exclusion&gt;\n                &lt;/exclusions&gt;    \n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;redis.clients&lt;/groupId&gt;\n                &lt;artifactId&gt;jedis&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1839842,"reputation":674,"user_id":1669478,"display_name":"erdikanik"},"comment_count":0,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1564343317,"creation_date":1564343317,"answer_id":57244428,"question_id":41511511,"body_markdown":"Just add @Service annotation to top of the service class","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>Just add @Service annotation to top of the service class</p>\n"},{"tags":[],"owner":{"account_id":7659881,"reputation":354,"user_id":5805507,"display_name":"sashiksu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570088453,"creation_date":1570047781,"answer_id":58208879,"question_id":41511511,"body_markdown":"There is **another** instance still same error will shown after you doing everything above mentioned. When you change your codes accordingly mentioned solutions make sure to keep originals. So you can easily go back. So go and again **check dispatcher-servelet** configuration file&#39;s base package location. Is it *scanning all relevant packages* when you running application.\r\n\r\n    &lt;context:component-scan base-package=&quot;your.pakage.path.here&quot;/&gt;","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>There is <strong>another</strong> instance still same error will shown after you doing everything above mentioned. When you change your codes accordingly mentioned solutions make sure to keep originals. So you can easily go back. So go and again <strong>check dispatcher-servelet</strong> configuration file's base package location. Is it <em>scanning all relevant packages</em> when you running application.</p>\n\n<pre><code>&lt;context:component-scan base-package=\"your.pakage.path.here\"/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8279939,"reputation":272,"user_id":6224955,"display_name":"Rajeev Ranjan"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1597141129,"creation_date":1597141129,"answer_id":63356130,"question_id":41511511,"body_markdown":"Add @Component annotation just above the component definition","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>Add @Component annotation just above the component definition</p>\n"},{"tags":[],"owner":{"account_id":13069368,"reputation":386,"user_id":9443465,"display_name":"Sachithra Dilshan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1609548675,"creation_date":1609537096,"answer_id":65533924,"question_id":41511511,"body_markdown":"This error can occur if there are syntax errors with Derived Query Methods. For example, if there are some mismatches with entity class fields and the Derived methods&#39; names.","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>This error can occur if there are syntax errors with Derived Query Methods. For example, if there are some mismatches with entity class fields and the Derived methods' names.</p>\n"},{"tags":[],"owner":{"account_id":5977736,"reputation":47,"user_id":4697987,"display_name":"Aamir Shaikh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1632290139,"creation_date":1632290139,"answer_id":69278893,"question_id":41511511,"body_markdown":"I was facing this issue because of duplicate column name **staffId** and **staff_id** in same entity class.\r\n\r\n        private Integer staffId;\r\n        @ManyToOne(cascade = CascadeType.ALL, optional = false)\r\n        @JoinColumn(name = &quot;staff_id&quot;)\r\n        private User user;","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>I was facing this issue because of duplicate column name <strong>staffId</strong> and <strong>staff_id</strong> in same entity class.</p>\n<pre><code>    private Integer staffId;\n    @ManyToOne(cascade = CascadeType.ALL, optional = false)\n    @JoinColumn(name = &quot;staff_id&quot;)\n    private User user;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11968464,"reputation":61,"user_id":8757504,"display_name":"Bilal Sheikh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647871226,"creation_date":1647871226,"answer_id":71558885,"question_id":41511511,"body_markdown":"My issue got resolved by adding &quot;value&quot; &amp; &quot;nativeQuery&quot; tags in @Query annotation like this:\r\n\r\n    @Query(value = &quot;select * from employee e where e.email_address = ?1&quot;, nativeQuery = true)","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>My issue got resolved by adding &quot;value&quot; &amp; &quot;nativeQuery&quot; tags in @Query annotation like this:</p>\n<pre><code>@Query(value = &quot;select * from employee e where e.email_address = ?1&quot;, nativeQuery = true)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16429226,"reputation":1519,"user_id":11868502,"display_name":"Saurabh Dhage"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650878808,"creation_date":1650878808,"answer_id":71997284,"question_id":41511511,"body_markdown":"In my case, I was using dependency of `spring boot 3` in `spring boot 4.`\r\nmake sure you use latest dependency version.\r\n\r\nyou can find that here https://mvnrepository.com/","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>In my case, I was using dependency of <code>spring boot 3</code> in <code>spring boot 4.</code>\nmake sure you use latest dependency version.</p>\n<p>you can find that here <a href=\"https://mvnrepository.com/\" rel=\"nofollow noreferrer\">https://mvnrepository.com/</a></p>\n"},{"tags":[],"owner":{"account_id":19320165,"reputation":99,"user_id":14124017,"display_name":"Om Prakash N"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672891517,"creation_date":1672891517,"answer_id":75013745,"question_id":41511511,"body_markdown":"I was facing the same issue. In my **Product Entity Class** I had imported @Id from `org.springframework.data.annotation.Id` and this was causing the error.\r\n\r\nIt was fixed after I change it to `import jakarta.persistence.Id;`","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>I was facing the same issue. In my <strong>Product Entity Class</strong> I had imported @Id from <code>org.springframework.data.annotation.Id</code> and this was causing the error.</p>\n<p>It was fixed after I change it to <code>import jakarta.persistence.Id;</code></p>\n"},{"tags":[],"owner":{"account_id":20283456,"reputation":31,"user_id":14876640,"display_name":"kumar_kal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677950051,"creation_date":1677950051,"answer_id":75637299,"question_id":41511511,"body_markdown":"Below one may be one of the reason, I was able to solve my error by doing that.\r\n\r\n**Just make sure that the methods you have written in Dao are correct or not, means the method is unique or not.**","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>Below one may be one of the reason, I was able to solve my error by doing that.</p>\n<p><strong>Just make sure that the methods you have written in Dao are correct or not, means the method is unique or not.</strong></p>\n"},{"tags":[],"owner":{"account_id":8426224,"reputation":348,"user_id":10379995,"display_name":"Gouranga Satapathy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692013329,"creation_date":1692013329,"answer_id":76898645,"question_id":41511511,"body_markdown":"add the below code in your main class, springboot might not able to scan the jpa lavel pakage.\r\n\r\n    @SpringBootApplication(scanBasePackages={&quot;com.*&quot;})\r\n    @EntityScan( basePackages = {&quot;com.*&quot;} )\r\n    @EnableJpaRepositories( basePackages = {&quot;com.*&quot;} )\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dgzSY.png","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>add the below code in your main class, springboot might not able to scan the jpa lavel pakage.</p>\n<pre><code>@SpringBootApplication(scanBasePackages={&quot;com.*&quot;})\n@EntityScan( basePackages = {&quot;com.*&quot;} )\n@EnableJpaRepositories( basePackages = {&quot;com.*&quot;} )\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/dgzSY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dgzSY.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":7774276,"reputation":1301,"user_id":6480625,"accept_rate":33,"display_name":"kopylov"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":918510,"favorite_count":0,"down_vote_count":0,"up_vote_count":108,"accepted_answer_id":41511612,"answer_count":26,"score":108,"last_activity_date":1692013329,"creation_date":1483725446,"question_id":41511511,"body_markdown":"For several days I have been trying to create a Spring CRUD application. I&#39;m confused.\r\nI can&#39;t solve these errors.\r\n\r\n&gt; org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;clientController&#39;: Unsatisfied dependency expressed through method &#39;setClientService&#39; parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;clientService&#39;: Unsatisfied dependency expressed through field &#39;clientRepository&#39;; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;com.kopylov.repository.ClientRepository&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n\r\nAnd this:\r\n\r\n&gt; org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;clientService&#39;: Unsatisfied dependency expressed through field &#39;clientRepository&#39;; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;com.kopylov.repository.ClientRepository&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n\r\n**ClientController**\r\n\r\n    @Controller\r\n    public class ClientController {\r\n        private ClientService clientService;\r\n    \r\n        @Autowired\r\n        @Qualifier(&quot;clientService&quot;)\r\n        public void setClientService(ClientService clientService) {\r\n            this.clientService = clientService;\r\n        }\r\n    \r\n        @RequestMapping(value = &quot;registration/add&quot;, method = RequestMethod.POST)\r\n        public String addUser(@ModelAttribute Client client) {\r\n            this.clientService.addClient(client);\r\n            return &quot;home&quot;;\r\n        }\r\n    }\r\n\r\n**ClientServiceImpl**\r\n\r\n    @Service(&quot;clientService&quot;)\r\n    public class ClientServiceImpl implements ClientService {\r\n    \r\n        private ClientRepository clientRepository;\r\n    \r\n        @Autowired\r\n        @Qualifier(&quot;clientRepository&quot;)\r\n        public void setClientRepository(ClientRepository clientRepository) {\r\n            this.clientRepository = clientRepository;\r\n        }\r\n    \r\n        @Transactional\r\n        public void addClient(Client client) {\r\n            clientRepository.saveAndFlush(client);\r\n        }\r\n    }\r\n\r\n**ClientRepository**\r\n\r\n    public interface ClientRepository extends JpaRepository&lt;Client, Integer&gt; {\r\n\r\n    }\r\n\r\nI looked through a lot of similar questions, but not one answer to them helps me.\r\n","title":"UnsatisfiedDependencyException: Error creating bean with name","body":"<p>For several days I have been trying to create a Spring CRUD application. I'm confused.\nI can't solve these errors.</p>\n<blockquote>\n<p>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'clientController': Unsatisfied dependency expressed through method 'setClientService' parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'clientService': Unsatisfied dependency expressed through field 'clientRepository'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.kopylov.repository.ClientRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}</p>\n</blockquote>\n<p>And this:</p>\n<blockquote>\n<p>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'clientService': Unsatisfied dependency expressed through field 'clientRepository'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.kopylov.repository.ClientRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}</p>\n</blockquote>\n<p><strong>ClientController</strong></p>\n<pre><code>@Controller\npublic class ClientController {\n    private ClientService clientService;\n\n    @Autowired\n    @Qualifier(&quot;clientService&quot;)\n    public void setClientService(ClientService clientService) {\n        this.clientService = clientService;\n    }\n\n    @RequestMapping(value = &quot;registration/add&quot;, method = RequestMethod.POST)\n    public String addUser(@ModelAttribute Client client) {\n        this.clientService.addClient(client);\n        return &quot;home&quot;;\n    }\n}\n</code></pre>\n<p><strong>ClientServiceImpl</strong></p>\n<pre><code>@Service(&quot;clientService&quot;)\npublic class ClientServiceImpl implements ClientService {\n\n    private ClientRepository clientRepository;\n\n    @Autowired\n    @Qualifier(&quot;clientRepository&quot;)\n    public void setClientRepository(ClientRepository clientRepository) {\n        this.clientRepository = clientRepository;\n    }\n\n    @Transactional\n    public void addClient(Client client) {\n        clientRepository.saveAndFlush(client);\n    }\n}\n</code></pre>\n<p><strong>ClientRepository</strong></p>\n<pre><code>public interface ClientRepository extends JpaRepository&lt;Client, Integer&gt; {\n\n}\n</code></pre>\n<p>I looked through a lot of similar questions, but not one answer to them helps me.</p>\n"},{"tags":["java","logging","aws-lambda","micronaut"],"answers":[{"tags":[],"owner":{"account_id":29144271,"reputation":1,"user_id":22326559,"display_name":"Parag Kapoor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692012962,"creation_date":1691752948,"answer_id":76883107,"question_id":58490168,"body_markdown":"The default Micronaut application when deployed on AWS lambda needs to send logs to CloudWatch. I notice you had only listed STDOUT appenders, which could be the reason for logs not showing up on CloudWatch.\r\n\r\nAdd a CloudWatch appender; something like this:\r\n\r\n        &lt;appender name=&quot;CLOUDWATCH&quot; class=&quot;io.micronaut.aws.cloudwatch.logging.CloudWatchLoggingAppender&quot;&gt;\r\n        &lt;encoder class=&quot;ch.qos.logback.core.encoder.LayoutWrappingEncoder&quot;&gt;\r\n            &lt;layout class=&quot;ch.qos.logback.contrib.json.classic.JsonLayout&quot;&gt;\r\n                &lt;jsonFormatter class=&quot;io.micronaut.aws.cloudwatch.logging.CloudWatchJsonFormatter&quot;/&gt;\r\n                &lt;!-- Define the custom fields using %X --&gt;\r\n                &lt;pattern&gt;\r\n                    {\r\n                    &quot;timestamp&quot;: &quot;%date{yyyy-MM-dd HH:mm:ss.SSS}&quot;,\r\n                    &quot;level&quot;: &quot;%level&quot;,\r\n                    &quot;message&quot;: &quot;%msg&quot;,\r\n                    &quot;AWSRequestId&quot;: &quot;%X{AWSRequestId}&quot;,\r\n                    &quot;AWSFunctionName&quot;: &quot;%X{AWSFunctionName}&quot;,\r\n                    &quot;AWSFunctionVersion&quot;: &quot;%X{AWSFunctionVersion}&quot;,\r\n                    &quot;AWSXRayTraceId&quot;: &quot;%X{AWS-XRAY-TRACE-ID}&quot;\r\n                    }\r\n                &lt;/pattern&gt;\r\n                &lt;logEntrySeparator&gt;&lt;/logEntrySeparator&gt;\r\n            &lt;/layout&gt;\r\n        &lt;/encoder&gt;\r\n    &lt;/appender&gt;\r\n\r\nFeel free to remove the pattern and any other bells and whistles. \r\n\r\nAlso as a side note, I noticed you have turned Jansi on, so make sure to include the required library in your Maven or Gradle dependencies. \r\n\r\nRegarding SAM CLI, by which I assume you mean:\r\n```\r\n&gt; sam local\r\n```\r\nYou could do something like this to print logs in a log file:\r\n\r\n    sam local start-api --template sam-template-local.yaml --log-file sam-local.log \r\n\r\nAlso, you don&#39;t need any specific logger dependency in case you are using Micronaut logging dependency, just the slf4j wrapper to go with it, like (in build.gradle)\r\n\r\n    implementation(&quot;io.micronaut.aws:micronaut-aws-cloudwatch-logging&quot;)\r\n    implementation(&quot;org.slf4j:slf4j-api&quot;)","title":"Micronaut AWS Lambda logs are not showing in cloudfront","body":"<p>The default Micronaut application when deployed on AWS lambda needs to send logs to CloudWatch. I notice you had only listed STDOUT appenders, which could be the reason for logs not showing up on CloudWatch.</p>\n<p>Add a CloudWatch appender; something like this:</p>\n<pre><code>    &lt;appender name=&quot;CLOUDWATCH&quot; class=&quot;io.micronaut.aws.cloudwatch.logging.CloudWatchLoggingAppender&quot;&gt;\n    &lt;encoder class=&quot;ch.qos.logback.core.encoder.LayoutWrappingEncoder&quot;&gt;\n        &lt;layout class=&quot;ch.qos.logback.contrib.json.classic.JsonLayout&quot;&gt;\n            &lt;jsonFormatter class=&quot;io.micronaut.aws.cloudwatch.logging.CloudWatchJsonFormatter&quot;/&gt;\n            &lt;!-- Define the custom fields using %X --&gt;\n            &lt;pattern&gt;\n                {\n                &quot;timestamp&quot;: &quot;%date{yyyy-MM-dd HH:mm:ss.SSS}&quot;,\n                &quot;level&quot;: &quot;%level&quot;,\n                &quot;message&quot;: &quot;%msg&quot;,\n                &quot;AWSRequestId&quot;: &quot;%X{AWSRequestId}&quot;,\n                &quot;AWSFunctionName&quot;: &quot;%X{AWSFunctionName}&quot;,\n                &quot;AWSFunctionVersion&quot;: &quot;%X{AWSFunctionVersion}&quot;,\n                &quot;AWSXRayTraceId&quot;: &quot;%X{AWS-XRAY-TRACE-ID}&quot;\n                }\n            &lt;/pattern&gt;\n            &lt;logEntrySeparator&gt;&lt;/logEntrySeparator&gt;\n        &lt;/layout&gt;\n    &lt;/encoder&gt;\n&lt;/appender&gt;\n</code></pre>\n<p>Feel free to remove the pattern and any other bells and whistles.</p>\n<p>Also as a side note, I noticed you have turned Jansi on, so make sure to include the required library in your Maven or Gradle dependencies.</p>\n<p>Regarding SAM CLI, by which I assume you mean:</p>\n<pre><code>&gt; sam local\n</code></pre>\n<p>You could do something like this to print logs in a log file:</p>\n<pre><code>sam local start-api --template sam-template-local.yaml --log-file sam-local.log \n</code></pre>\n<p>Also, you don't need any specific logger dependency in case you are using Micronaut logging dependency, just the slf4j wrapper to go with it, like (in build.gradle)</p>\n<pre><code>implementation(&quot;io.micronaut.aws:micronaut-aws-cloudwatch-logging&quot;)\nimplementation(&quot;org.slf4j:slf4j-api&quot;)\n</code></pre>\n"}],"owner":{"account_id":2554082,"reputation":1268,"user_id":5638943,"display_name":"Kristi Jorgji"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":454,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1692012962,"creation_date":1571674087,"question_id":58490168,"body_markdown":"I setup a micronaut java aws lambda project like explained here:\r\nhttps://guides.micronaut.io/micronaut-function-aws-lambda/guide/index.html\r\n\r\nIn the main function of the Function class I have an example:\r\n```\r\nSystem.out.println(&quot;LOG TEST LOG LOG&quot;);\r\n\r\n```\r\n\r\nRunning locally as described in the documentation via \r\n```\r\necho &#39;{&quot;param1&quot;: &quot;23&quot;}&#39; | java -jar build/lib/myjar-full.jar\r\n```\r\nShows correctly the console output.\r\n\r\nRunning the same function online in AWS lambda, does not log that message in cloudwatch logs.\r\n\r\nThe same problem happens also running locally via SAM CLI as explained in Micronaut docs.\r\n\r\nAlso using slf4j logger, still I am not getting the output. \r\nI am providing below all the relevant code of my micronaut lambda function\r\n```\r\npackage lambda.test;\r\n\r\nimport io.micronaut.function.executor.FunctionInitializer;\r\nimport io.micronaut.function.FunctionBean;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\n\r\nimport java.io.IOException;\r\nimport java.lang.invoke.MethodHandles;\r\nimport java.util.function.Function;\r\n\r\n@FunctionBean(&quot;example-lambda&quot;)\r\npublic class LambdaFunction extends FunctionInitializer implements Function&lt;Request, Response&gt; {\r\n    private static final Logger logger = LoggerFactory.getLogger(MethodHandles.lookup().lookupClass().getSimpleName());\r\n\r\n \r\n    /**\r\n     * This main method allows running the function as a CLI application using: echo &#39;{}&#39; | java -jar function.jar\r\n     * where the argument to echo is the JSON to be parsed.\r\n     */\r\n    public static void main(String... args) throws IOException {\r\n        System.out.println(&quot;LOG TEST LOG LOG&quot;);\r\n        logger.info(String.format(&quot;Received the following payload: %s&quot;, String.join(&quot;;&quot;, args)));\r\n        LambdaFunction function = new LambdaFunction();\r\n        function.run(args, (context) -&gt; function.apply(context.get(Request.class)));\r\n    }\r\n```\r\n\r\nI also created ```log4j2.xml``` config file in the resources, with the following content\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;Configuration status=&quot;INFO&quot;&gt;\r\n    &lt;Appenders&gt;\r\n        &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt;\r\n            &lt;PatternLayout pattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot;/&gt;\r\n        &lt;/Console&gt;\r\n    &lt;/Appenders&gt;\r\n    &lt;Loggers&gt;\r\n        &lt;Root level=&quot;INFO&quot;&gt;\r\n            &lt;AppenderRef ref=&quot;Console&quot;/&gt;\r\n        &lt;/Root&gt;\r\n    &lt;/Loggers&gt;\r\n&lt;/Configuration&gt;\r\n```\r\n\r\nThe default ```logback.xml``` config that comes with micronaut has these content:\r\n```\r\n&lt;configuration&gt;\r\n\r\n    &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;withJansi&gt;true&lt;/withJansi&gt;\r\n        &lt;!-- encoders are assigned the type\r\n             ch.qos.logback.classic.encoder.PatternLayoutEncoder by default --&gt;\r\n        &lt;encoder&gt;\r\n            &lt;pattern&gt;%cyan(%d{HH:mm:ss.SSS}) %gray([%thread]) %highlight(%-5level) %magenta(%logger{36}) - %msg%n&lt;/pattern&gt;\r\n        &lt;/encoder&gt;\r\n    &lt;/appender&gt;\r\n\r\n    &lt;root level=&quot;error&quot;&gt;\r\n        &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\r\n    &lt;/root&gt;\r\n&lt;/configuration&gt;\r\n```\r\n\r\nBoth ways of trying to log are not working online or with SAM CLI.\r\nI am still researching on how to do this, but so far I cannot find any information on their documentation or elsewhere.","title":"Micronaut AWS Lambda logs are not showing in cloudfront","body":"<p>I setup a micronaut java aws lambda project like explained here:\n<a href=\"https://guides.micronaut.io/micronaut-function-aws-lambda/guide/index.html\" rel=\"nofollow noreferrer\">https://guides.micronaut.io/micronaut-function-aws-lambda/guide/index.html</a></p>\n\n<p>In the main function of the Function class I have an example:</p>\n\n<pre><code>System.out.println(\"LOG TEST LOG LOG\");\n\n</code></pre>\n\n<p>Running locally as described in the documentation via </p>\n\n<pre><code>echo '{\"param1\": \"23\"}' | java -jar build/lib/myjar-full.jar\n</code></pre>\n\n<p>Shows correctly the console output.</p>\n\n<p>Running the same function online in AWS lambda, does not log that message in cloudwatch logs.</p>\n\n<p>The same problem happens also running locally via SAM CLI as explained in Micronaut docs.</p>\n\n<p>Also using slf4j logger, still I am not getting the output. \nI am providing below all the relevant code of my micronaut lambda function</p>\n\n<pre><code>package lambda.test;\n\nimport io.micronaut.function.executor.FunctionInitializer;\nimport io.micronaut.function.FunctionBean;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport java.io.IOException;\nimport java.lang.invoke.MethodHandles;\nimport java.util.function.Function;\n\n@FunctionBean(\"example-lambda\")\npublic class LambdaFunction extends FunctionInitializer implements Function&lt;Request, Response&gt; {\n    private static final Logger logger = LoggerFactory.getLogger(MethodHandles.lookup().lookupClass().getSimpleName());\n\n\n    /**\n     * This main method allows running the function as a CLI application using: echo '{}' | java -jar function.jar\n     * where the argument to echo is the JSON to be parsed.\n     */\n    public static void main(String... args) throws IOException {\n        System.out.println(\"LOG TEST LOG LOG\");\n        logger.info(String.format(\"Received the following payload: %s\", String.join(\";\", args)));\n        LambdaFunction function = new LambdaFunction();\n        function.run(args, (context) -&gt; function.apply(context.get(Request.class)));\n    }\n</code></pre>\n\n<p>I also created <code>log4j2.xml</code> config file in the resources, with the following content</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;Configuration status=\"INFO\"&gt;\n    &lt;Appenders&gt;\n        &lt;Console name=\"Console\" target=\"SYSTEM_OUT\"&gt;\n            &lt;PatternLayout pattern=\"%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n\"/&gt;\n        &lt;/Console&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;Root level=\"INFO\"&gt;\n            &lt;AppenderRef ref=\"Console\"/&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n\n<p>The default <code>logback.xml</code> config that comes with micronaut has these content:</p>\n\n<pre><code>&lt;configuration&gt;\n\n    &lt;appender name=\"STDOUT\" class=\"ch.qos.logback.core.ConsoleAppender\"&gt;\n        &lt;withJansi&gt;true&lt;/withJansi&gt;\n        &lt;!-- encoders are assigned the type\n             ch.qos.logback.classic.encoder.PatternLayoutEncoder by default --&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;%cyan(%d{HH:mm:ss.SSS}) %gray([%thread]) %highlight(%-5level) %magenta(%logger{36}) - %msg%n&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n    &lt;root level=\"error\"&gt;\n        &lt;appender-ref ref=\"STDOUT\" /&gt;\n    &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Both ways of trying to log are not working online or with SAM CLI.\nI am still researching on how to do this, but so far I cannot find any information on their documentation or elsewhere.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3206885,"reputation":44070,"user_id":2707792,"accept_rate":100,"display_name":"Andrey Tyukin"},"score":1,"creation_date":1538262746,"post_id":9127644,"comment_id":92082830,"body_markdown":"Since 2008, there is an uppercase version: `ẞ` (U+1E9E), but the standard `toUpperCase` algorithm still maps `&#223;` to `SS` in 2018.","body":"Since 2008, there is an uppercase version: <code>ẞ</code> (U+1E9E), but the standard <code>toUpperCase</code> algorithm still maps <code>&#223;</code> to <code>SS</code> in 2018."}],"answers":[{"tags":[],"owner":{"display_name":"user647772"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1328267300,"creation_date":1328267300,"answer_id":9127689,"question_id":9127644,"body_markdown":"Try [`java.lang.String.toUpperCase(java.util.Locale)`][1].\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#toUpperCase%28java.util.Locale%29","title":"converting &#223;.cfg to upper case using toUpperCase() in java","body":"<p>Try <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#toUpperCase%28java.util.Locale%29\" rel=\"nofollow\"><code>java.lang.String.toUpperCase(java.util.Locale)</code></a>.</p>\n"},{"comments":[{"owner":{"account_id":216384,"reputation":23447,"user_id":471607,"accept_rate":73,"display_name":"Umesh Awasthi"},"score":0,"creation_date":1328267661,"post_id":9127697,"comment_id":11470723,"body_markdown":"even passing locale results are same no change in output at all","body":"even passing locale results are same no change in output at all"},{"owner":{"account_id":209343,"reputation":4288,"user_id":460306,"accept_rate":79,"display_name":"greuze"},"score":0,"creation_date":1328268681,"post_id":9127697,"comment_id":11471055,"body_markdown":"You are right, the first 255 characters in unicode are translated with latin1 (class Character):\n\n        if (codePoint &lt;= FAST_PATH_MAX) { // FAST_PATH_MAX = 255\n            upperCase = CharacterDataLatin1.toUpperCaseEx(codePoint);\n        } else {\n...","body":"You are right, the first 255 characters in unicode are translated with latin1 (class Character):          if (codePoint &lt;= FAST_PATH_MAX) { // FAST_PATH_MAX = 255             upperCase = CharacterDataLatin1.toUpperCaseEx(codePoint);         } else { ..."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1692013796,"post_id":9127697,"comment_id":135563985,"body_markdown":"I would use `&#39;ẞ&#39;` directly, instead of `&#39;\\u9999&#39;&#39;, and no need for the last replace....","body":"I would use <code>&#39;ẞ&#39;</code> directly, instead of `&#39;\\u9999&#39;&#39;, and no need for the last replace...."}],"tags":[],"owner":{"account_id":209343,"reputation":4288,"user_id":460306,"accept_rate":79,"display_name":"greuze"},"comment_count":3,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1328269085,"creation_date":1328267347,"answer_id":9127697,"question_id":9127644,"body_markdown":"&quot;&#223;&quot; character is equivalent to &quot;ss&quot; (used in German, for example), and this is defined so in your Locale (the Locale you are using in your app).\r\n\r\nYou can try to do some experiment with a different Locale using method:\r\n\r\n    toUpperCase(Locale locale) \r\n\r\nEdit: As the user said, this method is not valid, a possible workaroud (not very elegant) is:\r\n\r\n        String s1 = new String (&quot;au&#223;.cfg&quot;).replace(&#39;&#223;&#39;, &#39;\\u9999&#39;);\r\n        System.out.println (s1.toUpperCase(Locale.UK).replace(&#39;\\u9999&#39;, &#39;&#223;&#39;));","title":"converting &#223;.cfg to upper case using toUpperCase() in java","body":"<p>\"ß\" character is equivalent to \"ss\" (used in German, for example), and this is defined so in your Locale (the Locale you are using in your app).</p>\n\n<p>You can try to do some experiment with a different Locale using method:</p>\n\n<pre><code>toUpperCase(Locale locale) \n</code></pre>\n\n<p>Edit: As the user said, this method is not valid, a possible workaroud (not very elegant) is:</p>\n\n<pre><code>    String s1 = new String (\"auß.cfg\").replace('ß', '\\u9999');\n    System.out.println (s1.toUpperCase(Locale.UK).replace('\\u9999', 'ß'));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":216384,"reputation":23447,"user_id":471607,"accept_rate":73,"display_name":"Umesh Awasthi"},"score":0,"creation_date":1328267778,"post_id":9127750,"comment_id":11470768,"body_markdown":"is there any way i can achieve what i am trying to do?","body":"is there any way i can achieve what i am trying to do?"},{"owner":{"account_id":4358,"reputation":168420,"user_id":6509,"display_name":"tim_yates"},"score":0,"creation_date":1328268031,"post_id":9127750,"comment_id":11470842,"body_markdown":"I think you would need to write your own implementation of `toUppercase` so that it gets this letter wrong.  Maybe scan for `&#223;`, replace it, then delegate to the existing method... The Java implementation is the correct way to get uppercase `&#223;`","body":"I think you would need to write your own implementation of <code>toUppercase</code> so that it gets this letter wrong.  Maybe scan for <code>&#223;</code>, replace it, then delegate to the existing method... The Java implementation is the correct way to get uppercase <code>&#223;</code>"},{"owner":{"account_id":15360992,"reputation":123,"user_id":11081843,"display_name":"Yava"},"score":0,"creation_date":1597525273,"post_id":9127750,"comment_id":112163039,"body_markdown":"No it&#39;s not the correct way... anymore. Or it depends on your definition of correct. German had no ẞ in the past, so turning &#223; to SS was correct but now the German Language haves an upper case &#223; which is ẞ. I see why the java implementation can&#39;t be changed for compatibility but it&#39;s not what I would call correct.","body":"No it&#39;s not the correct way... anymore. Or it depends on your definition of correct. German had no ẞ in the past, so turning &#223; to SS was correct but now the German Language haves an upper case &#223; which is ẞ. I see why the java implementation can&#39;t be changed for compatibility but it&#39;s not what I would call correct."}],"tags":[],"owner":{"account_id":4358,"reputation":168420,"user_id":6509,"display_name":"tim_yates"},"comment_count":3,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1328267564,"creation_date":1328267564,"answer_id":9127750,"question_id":9127644,"body_markdown":"The documentation for [`toUpperCase( Locale )`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#toUpperCase%28java.util.Locale%29) explicitly states that this is what will happen:\n\n&gt; Since case mappings are not always 1:1 char mappings, the resulting String may be a different length than the original String. \n&gt;\n&gt; small letter sharp s -&gt; two letters: SS","title":"converting &#223;.cfg to upper case using toUpperCase() in java","body":"<p>The documentation for <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#toUpperCase%28java.util.Locale%29\" rel=\"noreferrer\"><code>toUpperCase( Locale )</code></a> explicitly states that this is what will happen:</p>\n<blockquote>\n<p>Since case mappings are not always 1:1 char mappings, the resulting String may be a different length than the original String.</p>\n<p>small letter sharp s -&gt; two letters: SS</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":36208,"reputation":240326,"user_id":103154,"display_name":"axtavt"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1328267807,"creation_date":1328267807,"answer_id":9127793,"question_id":9127644,"body_markdown":"It looks like `Characeter.toUpperCase()` ignores these rules, so that you can use it to implement the desired conversion:\r\n\r\n&gt; String case mapping methods have several benefits over Character case mapping methods. String case mapping methods can perform locale-sensitive mappings, context-sensitive mappings, and 1:M character mappings, whereas the Character case mapping methods cannot. \r\n\r\n","title":"converting &#223;.cfg to upper case using toUpperCase() in java","body":"<p>It looks like <code>Characeter.toUpperCase()</code> ignores these rules, so that you can use it to implement the desired conversion:</p>\n\n<blockquote>\n  <p>String case mapping methods have several benefits over Character case mapping methods. String case mapping methods can perform locale-sensitive mappings, context-sensitive mappings, and 1:M character mappings, whereas the Character case mapping methods cannot. </p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1328269294,"creation_date":1328268714,"answer_id":9127989,"question_id":9127644,"body_markdown":"The Java implementation is simply following what the Unicode specification says.  And Unicode says this:\r\n\r\n    # ================================================================================\r\n    # Unconditional mappings\r\n    # ================================================================================\r\n\r\n    # The German es-zed is special--the normal mapping is to SS.\r\n    # Note: the titlecase should never occur in practice. It is equal to titlecase(uppercase(&lt;es-zed&gt;))\r\n\r\n    00DF; 00DF; 0053 0073; 0053 0053; # LATIN SMALL LETTER SHARP S\r\n\r\nReference: http://unicode.org/Public/UNIDATA/SpecialCasing.txt\r\n\r\nIf you want to implement a form of uppercase conversion that is different to Unicode, you&#39;ll need to specify and implement it yourself. \r\n\r\n----------\r\n\r\n&lt;sub&gt;(If you want to see a bunch of people getting hot under the collar about &quot;uppercase &#223;&quot;, read this email thread - http://unicode.org/mail-arch/unicode-ml/y2007-m05/0007.html )&lt;/sub&gt;","title":"converting &#223;.cfg to upper case using toUpperCase() in java","body":"<p>The Java implementation is simply following what the Unicode specification says.  And Unicode says this:</p>\n\n<pre><code># ================================================================================\n# Unconditional mappings\n# ================================================================================\n\n# The German es-zed is special--the normal mapping is to SS.\n# Note: the titlecase should never occur in practice. It is equal to titlecase(uppercase(&lt;es-zed&gt;))\n\n00DF; 00DF; 0053 0073; 0053 0053; # LATIN SMALL LETTER SHARP S\n</code></pre>\n\n<p>Reference: <a href=\"http://unicode.org/Public/UNIDATA/SpecialCasing.txt\" rel=\"nofollow\">http://unicode.org/Public/UNIDATA/SpecialCasing.txt</a></p>\n\n<p>If you want to implement a form of uppercase conversion that is different to Unicode, you'll need to specify and implement it yourself. </p>\n\n<hr>\n\n<p><sub>(If you want to see a bunch of people getting hot under the collar about \"uppercase ß\", read this email thread - <a href=\"http://unicode.org/mail-arch/unicode-ml/y2007-m05/0007.html\" rel=\"nofollow\">http://unicode.org/mail-arch/unicode-ml/y2007-m05/0007.html</a> )</sub></p>\n"},{"tags":[],"owner":{"account_id":18929931,"reputation":1,"user_id":13812237,"display_name":"רואד מנסור"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674038938,"creation_date":1674038851,"answer_id":75158044,"question_id":9127644,"body_markdown":"&gt; this will solve the case\r\n\r\n    char[] chars = &quot;&#223;denr&#228;&quot;.toCharArray();\r\n    for (int i = 0; i &lt; chars.length; i++) {\r\n    chars[i] = Character.toUpperCase(chars[i]);\r\n    }\r\n    String output = new String(chars);\r\n    System.out.println(output);\r\n\r\n\r\n&gt; result: &#223;DENR&#196;","title":"converting &#223;.cfg to upper case using toUpperCase() in java","body":"<blockquote>\n<p>this will solve the case</p>\n</blockquote>\n<pre><code>char[] chars = &quot;ßdenrä&quot;.toCharArray();\nfor (int i = 0; i &lt; chars.length; i++) {\nchars[i] = Character.toUpperCase(chars[i]);\n}\nString output = new String(chars);\nSystem.out.println(output);\n</code></pre>\n<blockquote>\n<p>result: ßDENRÄ</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1692013364,"post_id":76898580,"comment_id":135563899,"body_markdown":"why not just `originString.replace(&quot;&#223;&quot;, &quot;ẞ&quot;).toUpperCase()`  (at least it will not fail if the original text contains `SHARP-S`, and slightly simpler) BTW no need to use regular expression to just replace plain text","body":"why not just <code>originString.replace(&quot;&#223;&quot;, &quot;ẞ&quot;).toUpperCase()</code>  (at least it will not fail if the original text contains <code>SHARP-S</code>, and slightly simpler) BTW no need to use regular expression to just replace plain text"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1692013854,"post_id":76898580,"comment_id":135563995,"body_markdown":"or  `... .replace(&#39;&#223;&#39;, &#39;ẞ&#39;).toUpperCase()`","body":"or  <code>... .replace(&#39;&#223;&#39;, &#39;ẞ&#39;).toUpperCase()</code>"},{"owner":{"account_id":5728675,"reputation":21,"user_id":4524905,"display_name":"Rasto"},"score":0,"creation_date":1693829201,"post_id":76898580,"comment_id":135807605,"body_markdown":"yes of course that works, however in my case there was weird goal to have in the output all letters with uppercase, but with small &#223;.\nDesired (though weird):            `PARISER STRA&#223;E`\nYour proposal would produce: `PARISER STRAẞE`","body":"yes of course that works, however in my case there was weird goal to have in the output all letters with uppercase, but with small &#223;. Desired (though weird):            <code>PARISER STRA&#223;E</code> Your proposal would produce: <code>PARISER STRAẞE</code>"}],"tags":[],"owner":{"account_id":5728675,"reputation":21,"user_id":4524905,"display_name":"Rasto"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692012790,"creation_date":1692012790,"answer_id":76898580,"question_id":9127644,"body_markdown":"If you have mixed occurence of &quot;&#223;&quot; and &quot;SS&quot; in the origin word, then such simple method would help:\r\n\r\n        private String toUppercaseWithSharpS(String originString) {\r\n        Pattern sharpSPattern = Pattern.compile(&quot;&#223;&quot;);\r\n        Matcher shaprSMatcher = sharpSPattern.matcher(originString);\r\n        String placeholder = &quot;SHARP-S&quot;;\r\n        String upperCasedString = shaprSMatcher.replaceAll(placeholder);\r\n        upperCasedString = upperCasedString.toUpperCase(); //replaces &#223; with SS, see https://bugs.openjdk.org/browse/JDK-8186073);\r\n        upperCasedString = upperCasedString.replaceAll(placeholder, &quot;&#223;&quot;);\r\n\r\n        return upperCasedString;\r\n    }","title":"converting &#223;.cfg to upper case using toUpperCase() in java","body":"<p>If you have mixed occurence of &quot;ß&quot; and &quot;SS&quot; in the origin word, then such simple method would help:</p>\n<pre><code>    private String toUppercaseWithSharpS(String originString) {\n    Pattern sharpSPattern = Pattern.compile(&quot;ß&quot;);\n    Matcher shaprSMatcher = sharpSPattern.matcher(originString);\n    String placeholder = &quot;SHARP-S&quot;;\n    String upperCasedString = shaprSMatcher.replaceAll(placeholder);\n    upperCasedString = upperCasedString.toUpperCase(); //replaces ß with SS, see https://bugs.openjdk.org/browse/JDK-8186073);\n    upperCasedString = upperCasedString.replaceAll(placeholder, &quot;ß&quot;);\n\n    return upperCasedString;\n}\n</code></pre>\n"}],"owner":{"account_id":216384,"reputation":23447,"user_id":471607,"accept_rate":73,"display_name":"Umesh Awasthi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7294,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":9127750,"answer_count":7,"score":7,"last_activity_date":1692012790,"creation_date":1328267135,"question_id":9127644,"body_markdown":"I am trying following code \r\n\r\n    String s1 = &quot;&#223;.cfg&quot;;\r\n    System.out.println (s.toUpperCase());\r\n\r\noutput I am getting is `SS.CFG` since Unicode didn&#39;t define an uppercase version of &#223; while I want the output as `&#223;.CFG`.\r\n\r\nIs there any way I can achieve that?","title":"converting &#223;.cfg to upper case using toUpperCase() in java","body":"<p>I am trying following code </p>\n\n<pre><code>String s1 = \"ß.cfg\";\nSystem.out.println (s.toUpperCase());\n</code></pre>\n\n<p>output I am getting is <code>SS.CFG</code> since Unicode didn't define an uppercase version of ß while I want the output as <code>ß.CFG</code>.</p>\n\n<p>Is there any way I can achieve that?</p>\n"},{"tags":["java","swing","jtree"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":1,"creation_date":1691708947,"post_id":76879780,"comment_id":135532013,"body_markdown":"Use the `UIManager` to change icons; see also [_How to remove folder symbol which comes in front of each node from JTree in java_](https://stackoverflow.com/q/5260223/230513) and [_JTree: Set custom open/closed icons for individual groups_](https://stackoverflow.com/a/14097270/230513).","body":"Use the <code>UIManager</code> to change icons; see also <a href=\"https://stackoverflow.com/q/5260223/230513\"><i>How to remove folder symbol which comes in front of each node from JTree in java</i></a> and <a href=\"https://stackoverflow.com/a/14097270/230513\"><i>JTree: Set custom open/closed icons for individual groups</i></a>."},{"owner":{"account_id":10353015,"reputation":167,"user_id":7635893,"accept_rate":60,"display_name":"Alpha"},"score":0,"creation_date":1691709925,"post_id":76879780,"comment_id":135532087,"body_markdown":"In above examples the default arrows are still there in solution as well, which I don&#39;t need that.","body":"In above examples the default arrows are still there in solution as well, which I don&#39;t need that."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1691710209,"post_id":76879780,"comment_id":135532118,"body_markdown":"Why can&#39;t you replace them with `empty` from the first example?","body":"Why can&#39;t you replace them with <code>empty</code> from the first example?"},{"owner":{"account_id":10353015,"reputation":167,"user_id":7635893,"accept_rate":60,"display_name":"Alpha"},"score":0,"creation_date":1691710993,"post_id":76879780,"comment_id":135532201,"body_markdown":"check out the updated one, by applying empty it works! Now how can I make clickable closed arrow to expand &amp; How I can set a different icon for root only?","body":"check out the updated one, by applying empty it works! Now how can I make clickable closed arrow to expand &amp; How I can set a different icon for root only?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1691712700,"post_id":76879780,"comment_id":135532360,"body_markdown":"Note, a renderer should NOT do I/O. The Icons should be preloaded and ready to use so the renderer is efficient.","body":"Note, a renderer should NOT do I/O. The Icons should be preloaded and ready to use so the renderer is efficient."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1691713876,"post_id":76879780,"comment_id":135532478,"body_markdown":"*Now how can I make clickable closed arrow to expand* - never played with JTree before but based on the first link above, it seems to me like you should use your custom Icons for the collapsed/expanded icon UIManager properties. Then use the EmptyIcon for the closed/open icon properties.","body":"<i>Now how can I make clickable closed arrow to expand</i> - never played with JTree before but based on the first link above, it seems to me like you should use your custom Icons for the collapsed/expanded icon UIManager properties. Then use the EmptyIcon for the closed/open icon properties."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1691723371,"post_id":76879780,"comment_id":135533204,"body_markdown":"Have c loser look at the [JavaDocs for `DefaultTreeCellRenderer`](https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/tree/DefaultTreeCellRenderer.html), it actually lists the look and feel properties for the expand/collapse icons, but you can also configure them individually via the classes `setOpen/Close/LeafIcon` methods","body":"Have c loser look at the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/tree/DefaultTreeCellRenderer.html\" rel=\"nofollow noreferrer\">JavaDocs for <code>DefaultTreeCellRenderer</code></a>, it actually lists the look and feel properties for the expand/collapse icons, but you can also configure them individually via the classes <code>setOpen&#47;Close&#47;LeafIcon</code> methods"},{"owner":{"account_id":10353015,"reputation":167,"user_id":7635893,"accept_rate":60,"display_name":"Alpha"},"score":0,"creation_date":1691983046,"post_id":76879780,"comment_id":135559477,"body_markdown":"@MadProgrammer well, in that case how can I make it actionable. I added `mouse listener action` but this works with whole row. I need to click only icons not the whole row?","body":"@MadProgrammer well, in that case how can I make it actionable. I added <code>mouse listener action</code> but this works with whole row. I need to click only icons not the whole row?"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1691985714,"post_id":76879780,"comment_id":135559679,"body_markdown":"@Alpha The `JTree` will do it automatically - when you click on the expand/collapse handle, the tree will perform the require action itself - [for example](https://stackoverflow.com/questions/14096725/jtree-set-custom-open-closed-icons-for-individual-groups/14098574#14098574)","body":"@Alpha The <code>JTree</code> will do it automatically - when you click on the expand/collapse handle, the tree will perform the require action itself - <a href=\"https://stackoverflow.com/questions/14096725/jtree-set-custom-open-closed-icons-for-individual-groups/14098574#14098574\">for example</a>"}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692012720,"creation_date":1692012720,"answer_id":76898575,"question_id":76879780,"body_markdown":"I apologies, you mean you want to replace the expand/collapse handles, not customise the expand/closed icons of the cell ... because `JTree` isn&#39;t confusing &#128580;\r\n\r\nIn order to do this, you either need to supply your own look and feel implementation OR customise the existing UI properties.\r\n\r\nThanks to TrashGod, the second method is relatively easy, just remember, this will effect ALL `JTree`s in your application.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n    import java.awt.BorderLayout;\r\n    import java.awt.Component;\r\n    import java.awt.EventQueue;\r\n    import java.io.IOException;\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    import javax.imageio.ImageIO;\r\n    import javax.swing.ImageIcon;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.JScrollPane;\r\n    import javax.swing.JTree;\r\n    import javax.swing.UIManager;\r\n    import javax.swing.tree.DefaultMutableTreeNode;\r\n    import javax.swing.tree.DefaultTreeCellRenderer;\r\n    import javax.swing.tree.DefaultTreeModel;\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n\r\n        public Main() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    try {\r\n                        UIManager.put(&quot;Tree.expandedIcon&quot;, new ImageIcon(ImageIO.read(getClass().getResource(&quot;/images/icons8-expand-arrow-24.png&quot;))));\r\n                        UIManager.put(&quot;Tree.collapsedIcon&quot;, new ImageIcon(ImageIO.read(getClass().getResource(&quot;/images/icons8-collapse-arrow-24.png&quot;))));\r\n\r\n                        JFrame frame = new JFrame();\r\n                        frame.add(new TestPane());\r\n                        frame.pack();\r\n                        frame.setLocationRelativeTo(null);\r\n                        frame.setVisible(true);\r\n                    } catch (IOException ex) {\r\n                        ex.printStackTrace();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        public class TestPane extends JPanel {\r\n\r\n            public TestPane() throws IOException {\r\n                setLayout(new BorderLayout());\r\n                JTree tree = new JTree();\r\n                tree.setShowsRootHandles(true);\r\n\r\n                List&lt;Item&gt; items = new ArrayList&lt;&gt;(8);\r\n                items.add(new Item(&quot;Bowle&quot;,\r\n                        new Item[]{\r\n                            new Item(&quot;Apple&quot;),\r\n                            new Item(&quot;Pear&quot;),\r\n                            new Item(&quot;Orangle&quot;)\r\n                        }));\r\n                items.add(new Item(&quot;Freezer&quot;,\r\n                        new Item[]{\r\n                            new Item(&quot;Top draw&quot;, new Item[]{\r\n                                new Item(&quot;Chicken&quot;),\r\n                                new Item(&quot;Steak&quot;),\r\n                                new Item(&quot;Fish&quot;)}),\r\n                            new Item(&quot;Bottom draw&quot;, new Item[]{\r\n                                new Item(&quot;Pears&quot;),\r\n                                new Item(&quot;Chips&quot;),\r\n                                new Item(&quot;Ice cream&quot;)})\r\n                        }));\r\n\r\n                DefaultMutableTreeNode rootNode = new DefaultMutableTreeNode(&quot;My stuff&quot;);\r\n                for (Item item : items) {\r\n                    populate(rootNode, item);\r\n                }\r\n                DefaultTreeModel model = new DefaultTreeModel(rootNode);\r\n                tree.setModel(model);\r\n                tree.setCellRenderer(new ItemTreeCellRenderer());\r\n\r\n                add(new JScrollPane(tree));\r\n            }\r\n\r\n            protected void populate(DefaultMutableTreeNode parent, Item item) {\r\n                DefaultMutableTreeNode node = new DefaultMutableTreeNode(item);\r\n                parent.add(node);\r\n\r\n                for (Item child : item.getContents()) {\r\n                    populate(node, child);\r\n                }\r\n            }\r\n        }\r\n\r\n        class ItemTreeCellRenderer extends DefaultTreeCellRenderer {\r\n            @Override\r\n            public Component getTreeCellRendererComponent(JTree tree, Object value, boolean sel, boolean expanded, boolean leaf, int row, boolean hasFocus) {\r\n                if (value instanceof DefaultMutableTreeNode) {\r\n                    DefaultMutableTreeNode node = (DefaultMutableTreeNode) value;\r\n                    Object userValue = node.getUserObject();\r\n                    if (userValue instanceof Item) {\r\n                        Item item = (Item) userValue;\r\n                        value = item.getName();\r\n                    }\r\n                }\r\n                return super.getTreeCellRendererComponent(tree, value, sel, expanded, leaf, row, hasFocus);\r\n            }\r\n        }\r\n\r\n        public class Item {\r\n            private String name;\r\n            private List&lt;Item&gt; contents;\r\n\r\n            public Item(String name) {\r\n                this.name = name;\r\n                this.contents = new ArrayList&lt;&gt;(8);\r\n            }\r\n\r\n            public Item(String name, Item[] children) {\r\n                this.name = name;\r\n                this.contents = new ArrayList&lt;&gt;(Arrays.asList(children));\r\n            }\r\n\r\n            public String getName() {\r\n                return name;\r\n            }\r\n\r\n            public List&lt;Item&gt; getContents() {\r\n                return contents;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gXtAn.png","title":"JTree Default icons not removed with Root Icon","body":"<p>I apologies, you mean you want to replace the expand/collapse handles, not customise the expand/closed icons of the cell ... because <code>JTree</code> isn't confusing 🙄</p>\n<p>In order to do this, you either need to supply your own look and feel implementation OR customise the existing UI properties.</p>\n<p>Thanks to TrashGod, the second method is relatively easy, just remember, this will effect ALL <code>JTree</code>s in your application.</p>\n<p><a href=\"https://i.stack.imgur.com/gXtAn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gXtAn.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.Component;\nimport java.awt.EventQueue;\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\nimport javax.imageio.ImageIO;\nimport javax.swing.ImageIcon;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\nimport javax.swing.JTree;\nimport javax.swing.UIManager;\nimport javax.swing.tree.DefaultMutableTreeNode;\nimport javax.swing.tree.DefaultTreeCellRenderer;\nimport javax.swing.tree.DefaultTreeModel;\n\npublic class Main {\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    UIManager.put(&quot;Tree.expandedIcon&quot;, new ImageIcon(ImageIO.read(getClass().getResource(&quot;/images/icons8-expand-arrow-24.png&quot;))));\n                    UIManager.put(&quot;Tree.collapsedIcon&quot;, new ImageIcon(ImageIO.read(getClass().getResource(&quot;/images/icons8-collapse-arrow-24.png&quot;))));\n\n                    JFrame frame = new JFrame();\n                    frame.add(new TestPane());\n                    frame.pack();\n                    frame.setLocationRelativeTo(null);\n                    frame.setVisible(true);\n                } catch (IOException ex) {\n                    ex.printStackTrace();\n                }\n            }\n        });\n    }\n\n    public class TestPane extends JPanel {\n\n        public TestPane() throws IOException {\n            setLayout(new BorderLayout());\n            JTree tree = new JTree();\n            tree.setShowsRootHandles(true);\n\n            List&lt;Item&gt; items = new ArrayList&lt;&gt;(8);\n            items.add(new Item(&quot;Bowle&quot;,\n                    new Item[]{\n                        new Item(&quot;Apple&quot;),\n                        new Item(&quot;Pear&quot;),\n                        new Item(&quot;Orangle&quot;)\n                    }));\n            items.add(new Item(&quot;Freezer&quot;,\n                    new Item[]{\n                        new Item(&quot;Top draw&quot;, new Item[]{\n                            new Item(&quot;Chicken&quot;),\n                            new Item(&quot;Steak&quot;),\n                            new Item(&quot;Fish&quot;)}),\n                        new Item(&quot;Bottom draw&quot;, new Item[]{\n                            new Item(&quot;Pears&quot;),\n                            new Item(&quot;Chips&quot;),\n                            new Item(&quot;Ice cream&quot;)})\n                    }));\n\n            DefaultMutableTreeNode rootNode = new DefaultMutableTreeNode(&quot;My stuff&quot;);\n            for (Item item : items) {\n                populate(rootNode, item);\n            }\n            DefaultTreeModel model = new DefaultTreeModel(rootNode);\n            tree.setModel(model);\n            tree.setCellRenderer(new ItemTreeCellRenderer());\n\n            add(new JScrollPane(tree));\n        }\n\n        protected void populate(DefaultMutableTreeNode parent, Item item) {\n            DefaultMutableTreeNode node = new DefaultMutableTreeNode(item);\n            parent.add(node);\n\n            for (Item child : item.getContents()) {\n                populate(node, child);\n            }\n        }\n    }\n\n    class ItemTreeCellRenderer extends DefaultTreeCellRenderer {\n        @Override\n        public Component getTreeCellRendererComponent(JTree tree, Object value, boolean sel, boolean expanded, boolean leaf, int row, boolean hasFocus) {\n            if (value instanceof DefaultMutableTreeNode) {\n                DefaultMutableTreeNode node = (DefaultMutableTreeNode) value;\n                Object userValue = node.getUserObject();\n                if (userValue instanceof Item) {\n                    Item item = (Item) userValue;\n                    value = item.getName();\n                }\n            }\n            return super.getTreeCellRendererComponent(tree, value, sel, expanded, leaf, row, hasFocus);\n        }\n    }\n\n    public class Item {\n        private String name;\n        private List&lt;Item&gt; contents;\n\n        public Item(String name) {\n            this.name = name;\n            this.contents = new ArrayList&lt;&gt;(8);\n        }\n\n        public Item(String name, Item[] children) {\n            this.name = name;\n            this.contents = new ArrayList&lt;&gt;(Arrays.asList(children));\n        }\n\n        public String getName() {\n            return name;\n        }\n\n        public List&lt;Item&gt; getContents() {\n            return contents;\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":10353015,"reputation":167,"user_id":7635893,"accept_rate":60,"display_name":"Alpha"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1692012720,"creation_date":1691708329,"question_id":76879780,"body_markdown":"I am aware that there are relevant materials exists on google about JTree icons change, but still I am unable to sort out my simple requirements.\r\n\r\nI need to change the icon of `Root` element of JTree different than it&#39;s `node` &amp; `leaf`.\r\nI manage to change the node &amp; leaf icons, but the default arrow icons (red highlighted in picture) are still there &amp; I have to click on it to drill down the tree whereas I want to click on custom image icons to drill down the tree.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n        /** CHANGE JTREE DEFAULT ICONS  **/\r\n        \tprivate class userRendererForTree extends DefaultTreeCellRenderer {\r\n        \t\tprivate static final long serialVersionUID = 1L;\r\n        \r\n        \t\tpublic Component getTreeCellRendererComponent(JTree tree, Object value, boolean sel, boolean expanded,\r\n        \t\t\t\tboolean leaf, int row, boolean hasFocus) {\r\n        \r\n        \t\t\tsuper.getTreeCellRendererComponent(tree, value, sel, expanded, leaf, row, hasFocus);\r\n        \t\t\tif (leaf) {\r\n        \t\t\t\tsetIcon(setImageIcon(AppConstants.BOM_ROUTE_NODE_LEAF));\r\n        \t\t\t} else {\r\n        \t\t\t\tsetIcon(setImageIcon(AppConstants.BOM_ROUTE_NODE_RIGHT));\r\n        \t\t\t}\r\n        \t\t\tif (expanded) {\r\n        \t\t\t\tsetIcon(setImageIcon(AppConstants.BOM_ROUTE_NODE_BOTTOM));\r\n        \t\t\t}\r\n        \t\t\treturn this;\r\n        \t\t}\r\n        \t}\r\n    \r\n    /**  LOAD IMAGE ICON FROM RESOURCES  **/\r\n    \tprivate ImageIcon setImageIcon(String path){\r\n    \t\tImage image = null;\r\n    \t\tImageIcon icon = null;\r\n    \t\ttry {\r\n    \t\t\timage = LoadResource.getImageFromResourceAsURL(path);\r\n    \t\t\timage = image.getScaledInstance(10, 10, Image.SCALE_SMOOTH);\r\n    \t\t\ticon = new ImageIcon(image);\r\n    \t\t\treturn icon;\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\treturn icon;\r\n    \t}\r\n\r\nCalling of Renderer: -\r\n\r\n    JTree BomTree = new JTree(createTreeModel());\r\n    scrollPane.setColumnHeaderView(BomTree);\r\n    BomTree.setCellRenderer(new userRendererForTree());\r\n\r\n\r\nUPDATED -\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/NOfFl.png\r\n  [2]: https://i.stack.imgur.com/ALZTD.png","title":"JTree Default icons not removed with Root Icon","body":"<p>I am aware that there are relevant materials exists on google about JTree icons change, but still I am unable to sort out my simple requirements.</p>\n<p>I need to change the icon of <code>Root</code> element of JTree different than it's <code>node</code> &amp; <code>leaf</code>.\nI manage to change the node &amp; leaf icons, but the default arrow icons (red highlighted in picture) are still there &amp; I have to click on it to drill down the tree whereas I want to click on custom image icons to drill down the tree.</p>\n<p><a href=\"https://i.stack.imgur.com/NOfFl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NOfFl.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>    /** CHANGE JTREE DEFAULT ICONS  **/\n        private class userRendererForTree extends DefaultTreeCellRenderer {\n            private static final long serialVersionUID = 1L;\n    \n            public Component getTreeCellRendererComponent(JTree tree, Object value, boolean sel, boolean expanded,\n                    boolean leaf, int row, boolean hasFocus) {\n    \n                super.getTreeCellRendererComponent(tree, value, sel, expanded, leaf, row, hasFocus);\n                if (leaf) {\n                    setIcon(setImageIcon(AppConstants.BOM_ROUTE_NODE_LEAF));\n                } else {\n                    setIcon(setImageIcon(AppConstants.BOM_ROUTE_NODE_RIGHT));\n                }\n                if (expanded) {\n                    setIcon(setImageIcon(AppConstants.BOM_ROUTE_NODE_BOTTOM));\n                }\n                return this;\n            }\n        }\n\n/**  LOAD IMAGE ICON FROM RESOURCES  **/\n    private ImageIcon setImageIcon(String path){\n        Image image = null;\n        ImageIcon icon = null;\n        try {\n            image = LoadResource.getImageFromResourceAsURL(path);\n            image = image.getScaledInstance(10, 10, Image.SCALE_SMOOTH);\n            icon = new ImageIcon(image);\n            return icon;\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return icon;\n    }\n</code></pre>\n<p>Calling of Renderer: -</p>\n<pre><code>JTree BomTree = new JTree(createTreeModel());\nscrollPane.setColumnHeaderView(BomTree);\nBomTree.setCellRenderer(new userRendererForTree());\n</code></pre>\n<p>UPDATED -\n<a href=\"https://i.stack.imgur.com/ALZTD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ALZTD.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","mysql","spring","hibernate"],"comments":[{"owner":{"account_id":8172423,"reputation":17307,"user_id":6152400,"display_name":"P.Salmon"},"score":0,"creation_date":1692009792,"post_id":76898190,"comment_id":135563239,"body_markdown":"&#39;Referencing column &#39;fk_xxxx_id&#39; and referenced column &#39;xxxx_id&#39; in foreign key constraint &#39;fk_yyyy_xxxx&#39; are incompatible.&#39; - is clear..what are the respective datatypes?","body":"&#39;Referencing column &#39;fk_xxxx_id&#39; and referenced column &#39;xxxx_id&#39; in foreign key constraint &#39;fk_yyyy_xxxx&#39; are incompatible.&#39; - is clear..what are the respective datatypes?"},{"owner":{"account_id":1310169,"reputation":3813,"user_id":1258319,"accept_rate":81,"display_name":"Julian"},"score":0,"creation_date":1692044903,"post_id":76898190,"comment_id":135569955,"body_markdown":"Could it be because of the type in here? `private List&lt;yyyyntity&gt; yyyys;` It should be `private List&lt;yyyyEntity&gt; yyyys;` I don&#39;t think your code will even compile","body":"Could it be because of the type in here? <code>private List&lt;yyyyntity&gt; yyyys;</code> It should be <code>private List&lt;yyyyEntity&gt; yyyys;</code> I don&#39;t think your code will even compile"}],"owner":{"account_id":29221947,"reputation":1,"user_id":22387513,"display_name":"nylaysu meike"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692012387,"creation_date":1692009275,"question_id":76898190,"body_markdown":"So, i&#39;ve been looking for a fix to this problem for a bit:\r\n```\r\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL &quot;alter table ____ modify column xxxx_id  bigint not null auto_increment&quot; via JDBC [Referencing column &#39;fk_xxxx_id&#39; and referenced column &#39;xxxx_id&#39; in foreign key constraint &#39;fk_yyyy_xxxx&#39; are incompatible.]\r\n```\r\nMy application.propierties is:\r\n\r\n```\r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\nspring.jpa.hibernate.ddl-auto=update\r\nspring.jpa.show-sql=true\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\r\nspring.jpa.hibernate.ddl-auto=update\r\n```\r\n\r\nAnd the two classes involved (just the part where i think i have the problem):\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;xxxxs&quot;)\r\npublic class yyyyEntity {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long xxxx_id;\r\n\r\n\tprivate String name;\r\n\r\n\t@Temporal(TemporalType.TIMESTAMP)\r\n\t@Column(name = &quot;registration_date&quot;)\r\n\tprivate Date registrationDate;\r\n\r\n\t@Column(name = &quot;success_rate&quot;)\r\n\tprivate Double successRate;\r\n\t\r\n\t@OneToMany(mappedBy = &quot;xxxx&quot;, cascade = CascadeType.ALL, fetch = FetchType.LAZY)\r\n    private List&lt;yyyyntity&gt; yyyys;\r\n```\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;yyyys&quot;)\r\npublic class yyyyEntity {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long yyyy_id;\r\n\r\n\t@ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;fk_xxxx_id&quot;, referencedColumnName = &quot;xxxx_id&quot;)\r\n\tprivate xxxxEntity xxxx;\r\n```\r\n\r\n\r\nI&#39;ve checked multiple times the names on the tables and on the Enities as well as the other tags\r\n\r\nI&#39;ve tried to change the names on both sides (DB and code), restart the database, and change the parameters of the foreign key to not have anything when before i had it marked as not null as it is necessary for it to be not null in how its supposed to work.\r\n\r\nSo far nothing has worked and the only thing that changes on the error message are the names of the columns","title":"How to fix &quot;Error executing DDL alter table _____ modify column ___ bigint not null auto_increment &quot;","body":"<p>So, i've been looking for a fix to this problem for a bit:</p>\n<pre><code>org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL &quot;alter table ____ modify column xxxx_id  bigint not null auto_increment&quot; via JDBC [Referencing column 'fk_xxxx_id' and referenced column 'xxxx_id' in foreign key constraint 'fk_yyyy_xxxx' are incompatible.]\n</code></pre>\n<p>My application.propierties is:</p>\n<pre><code>spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\nspring.jpa.hibernate.ddl-auto=update\n</code></pre>\n<p>And the two classes involved (just the part where i think i have the problem):</p>\n<pre><code>@Entity\n@Table(name = &quot;xxxxs&quot;)\npublic class yyyyEntity {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long xxxx_id;\n\n    private String name;\n\n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name = &quot;registration_date&quot;)\n    private Date registrationDate;\n\n    @Column(name = &quot;success_rate&quot;)\n    private Double successRate;\n    \n    @OneToMany(mappedBy = &quot;xxxx&quot;, cascade = CascadeType.ALL, fetch = FetchType.LAZY)\n    private List&lt;yyyyntity&gt; yyyys;\n</code></pre>\n<pre><code>@Entity\n@Table(name = &quot;yyyys&quot;)\npublic class yyyyEntity {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long yyyy_id;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;fk_xxxx_id&quot;, referencedColumnName = &quot;xxxx_id&quot;)\n    private xxxxEntity xxxx;\n</code></pre>\n<p>I've checked multiple times the names on the tables and on the Enities as well as the other tags</p>\n<p>I've tried to change the names on both sides (DB and code), restart the database, and change the parameters of the foreign key to not have anything when before i had it marked as not null as it is necessary for it to be not null in how its supposed to work.</p>\n<p>So far nothing has worked and the only thing that changes on the error message are the names of the columns</p>\n"},{"tags":["java","pdfbox","digital-signature","trusted-timestamp"],"comments":[{"owner":{"account_id":28668458,"reputation":15,"user_id":21951977,"display_name":"Qazazazaz"},"score":0,"creation_date":1692012052,"post_id":76898496,"comment_id":135563648,"body_markdown":"@mkl any comments?","body":"@mkl any comments?"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1692018775,"post_id":76898496,"comment_id":135564966,"body_markdown":"*&quot;As per my requirements, the signature time should be consistent for a PDF in unsigned attribute, PDSignature.signDate and in appearance of signature field.&quot;* - That&#39;s unfortunate because - as you noticed yourself - the signature appearance is part of the signed content and, therefore, is created before signing and in particular before creation of the signature time stamp. If your signing and time stamping processes are fairly quick, you can try to time the calls accordingly which is may be likely to work as intended quite often.","body":"<i>&quot;As per my requirements, the signature time should be consistent for a PDF in unsigned attribute, PDSignature.signDate and in appearance of signature field.&quot;</i> - That&#39;s unfortunate because - as you noticed yourself - the signature appearance is part of the signed content and, therefore, is created before signing and in particular before creation of the signature time stamp. If your signing and time stamping processes are fairly quick, you can try to time the calls accordingly which is may be likely to work as intended quite often."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1692019122,"post_id":76898496,"comment_id":135565050,"body_markdown":"Another option would be to update the signature appearance in an incremental update. But that only works for a certification level with allowed annotation changes. Furthermore, validators will likely report changes after signing. Many years ago I played around with that option with iText, see [this old answer](https://stackoverflow.com/a/37070234/1729265) for a first impression.","body":"Another option would be to update the signature appearance in an incremental update. But that only works for a certification level with allowed annotation changes. Furthermore, validators will likely report changes after signing. Many years ago I played around with that option with iText, see <a href=\"https://stackoverflow.com/a/37070234/1729265\">this old answer</a> for a first impression."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1692019451,"post_id":76898496,"comment_id":135565141,"body_markdown":"Also consider _not_ including the signing time in the signature appearance. Users should look for reliable information about the signature in the signature panel and signature properties anyways, not in the document. The signature appearance is only there to look nice.","body":"Also consider <i>not</i> including the signing time in the signature appearance. Users should look for reliable information about the signature in the signature panel and signature properties anyways, not in the document. The signature appearance is only there to look nice."},{"owner":{"account_id":28668458,"reputation":15,"user_id":21951977,"display_name":"Qazazazaz"},"score":0,"creation_date":1692043703,"post_id":76898496,"comment_id":135569766,"body_markdown":"Thanks @mkl. It&#39;s not just about signature appearance, If I change the my local server time, Two different times are visible on the same signature panel, one is signing time which is local signing server time and other is trusted embedded timestamp token. But I think there is no option to make it consistent. User will need to understand that only trusted embedded timestamp should be considered reliable. User should not rely on other timestamp for validity of the document as it can be changed by changing local server&#39;s time.","body":"Thanks @mkl. It&#39;s not just about signature appearance, If I change the my local server time, Two different times are visible on the same signature panel, one is signing time which is local signing server time and other is trusted embedded timestamp token. But I think there is no option to make it consistent. User will need to understand that only trusted embedded timestamp should be considered reliable. User should not rely on other timestamp for validity of the document as it can be changed by changing local server&#39;s time."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1692074818,"post_id":76898496,"comment_id":135572404,"body_markdown":"You can try to make them very similar by requesting 2 time stamps - one at the start of which you only use the date time value to initialize `PDSignature` with, and one later for embedding. This should make the times differ only slightly.","body":"You can try to make them very similar by requesting 2 time stamps - one at the start of which you only use the date time value to initialize <code>PDSignature</code> with, and one later for embedding. This should make the times differ only slightly."},{"owner":{"account_id":28668458,"reputation":15,"user_id":21951977,"display_name":"Qazazazaz"},"score":0,"creation_date":1692168106,"post_id":76898496,"comment_id":135585460,"body_markdown":"Yes @mkl, that is one of the way but I heard timestamp requests are bit costly. And I would prefer to use local timestamp rather than making an unnecessary requests. Acrobat also works same way.","body":"Yes @mkl, that is one of the way but I heard timestamp requests are bit costly. And I would prefer to use local timestamp rather than making an unnecessary requests. Acrobat also works same way."}],"owner":{"account_id":28668458,"reputation":15,"user_id":21951977,"display_name":"Qazazazaz"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692012018,"creation_date":1692012018,"question_id":76898496,"body_markdown":"I am working on adding signature timestamp support using external TSAs while digitally signing the PDF. I am using `PDFBox` for my signature implementation. My steps are:\r\n\r\n1. Creating `PDDocument` and `PDSignature` instance.\r\n2. Adding appearance to the signature field as per my requirements.\r\n3. Configuring `PDSignature` with values like `sub-filter` and `signDate`.\r\n4. Adding `PDSignature` to the `PDDocument`. \r\n5. Generating Hash of the PDF and getting it signed.\r\n6. Using this signed digest for getting timestamp token and adding it as unsigned attribute.\r\n7. Generating the output PDF.\r\n\r\nI need to set date in signature appearance(in step 2) and also I need to set `PDSignature.signDate` in step 3. But I am getting timestamp token in step 6. As per my knowledge, I cannot modify `PDSignature.signDate` and date in signature appearance after step 6. As per my requirements, the signature time should be consistent for a PDF in unsigned attribute, `PDSignature.signDate` and in appearance of signature field.\r\n\r\nIs there a way to make the signature time consistent in the entire signed PDF? ","title":"Inconsistent Signature Time using PDFBox","body":"<p>I am working on adding signature timestamp support using external TSAs while digitally signing the PDF. I am using <code>PDFBox</code> for my signature implementation. My steps are:</p>\n<ol>\n<li>Creating <code>PDDocument</code> and <code>PDSignature</code> instance.</li>\n<li>Adding appearance to the signature field as per my requirements.</li>\n<li>Configuring <code>PDSignature</code> with values like <code>sub-filter</code> and <code>signDate</code>.</li>\n<li>Adding <code>PDSignature</code> to the <code>PDDocument</code>.</li>\n<li>Generating Hash of the PDF and getting it signed.</li>\n<li>Using this signed digest for getting timestamp token and adding it as unsigned attribute.</li>\n<li>Generating the output PDF.</li>\n</ol>\n<p>I need to set date in signature appearance(in step 2) and also I need to set <code>PDSignature.signDate</code> in step 3. But I am getting timestamp token in step 6. As per my knowledge, I cannot modify <code>PDSignature.signDate</code> and date in signature appearance after step 6. As per my requirements, the signature time should be consistent for a PDF in unsigned attribute, <code>PDSignature.signDate</code> and in appearance of signature field.</p>\n<p>Is there a way to make the signature time consistent in the entire signed PDF?</p>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":7484981,"reputation":166,"user_id":5688552,"display_name":"Loginus"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692011623,"creation_date":1692010232,"answer_id":76898286,"question_id":76898163,"body_markdown":"You want to test behavior of Spring using spring beans (Controller, Advice) but your test is not starting the spring context. So basically your test does not know that DelIntakeExceptionHandler is supposed to handle the exception.\r\nIn your case you can or just test exception thrown\r\n```\r\n@Test(expected=DelIntakeGlobalException.class)\r\npublic getTest(){\r\n\r\ncontroller.get(&quot;123po&quot;);\r\nassertFail();\r\n}\r\n```\r\nOr start spring context within test annotating test with  @SpringBootTest and to have even better simulation of the controller using [MockMVC][1]. \r\nso sth like\r\n```\r\n@SpringBootTest\r\n@AutoConfigureMockMvc\r\npublic class TestClass{\r\n\r\n@Test\r\npublic getTest(){\r\nthis.mockMvc.perform(get(&quot;/getId/123po&quot;)))\r\n.andExpect(MockMvcResultMatchers.status().is(HttpStatus.BAD_REQUEST.value()));\r\n}\r\n}\r\n```\r\n\r\n  [1]: https://spring.io/guides/gs/testing-web/","title":"Junit for spring boot global exception","body":"<p>You want to test behavior of Spring using spring beans (Controller, Advice) but your test is not starting the spring context. So basically your test does not know that DelIntakeExceptionHandler is supposed to handle the exception.\nIn your case you can or just test exception thrown</p>\n<pre><code>@Test(expected=DelIntakeGlobalException.class)\npublic getTest(){\n\ncontroller.get(&quot;123po&quot;);\nassertFail();\n}\n</code></pre>\n<p>Or start spring context within test annotating test with  @SpringBootTest and to have even better simulation of the controller using <a href=\"https://spring.io/guides/gs/testing-web/\" rel=\"nofollow noreferrer\">MockMVC</a>.\nso sth like</p>\n<pre><code>@SpringBootTest\n@AutoConfigureMockMvc\npublic class TestClass{\n\n@Test\npublic getTest(){\nthis.mockMvc.perform(get(&quot;/getId/123po&quot;)))\n.andExpect(MockMvcResultMatchers.status().is(HttpStatus.BAD_REQUEST.value()));\n}\n}\n</code></pre>\n"}],"owner":{"account_id":29104131,"reputation":25,"user_id":22295330,"display_name":"Iswarya Elango"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692011623,"creation_date":1692009017,"question_id":76898163,"body_markdown":"I want to cover the exception code in the get method of the DelController class, but it is not calling the DelIntakeGlobalException.\r\n\r\n\r\n\r\n```\r\n@RestController\r\npublic class DelController{\r\n@GetMapping(&quot;/getId&quot;)\r\npublic ResponseEntity&lt;?&gt; get(@PathVariable String intakeNumber){\r\n\r\ntry{\r\nInteger.parseInt(intakeNumber);\r\nreturn new ResponseEntity&lt;&gt;(&quot;success&quot;,HttpStatus.OK);\r\n\r\n}catch(NumberFormatException e){\r\n\r\nthrow new DelIntakeGlobalException(&quot;intakeNumber is invalid&quot;);\r\n}\r\n}\r\n}\r\n\r\n\r\n@ControllerAdvice\r\npublic class DelIntakeExceptionHandler{\r\n@ExceptionHandler(DelIntakeGlobalException.class)\r\npublic ResponseEntity handleException(DelIntakeGlobalException exp, ServletWebRequest req){\r\n\r\nreturn new ResponseEntity&lt;&gt;(exp.getMessage(),HttpStatus.BAD_REQUEST);\r\n\r\n}\r\n}\r\n\r\n@Runwith(MockitoJunitRunner.class)\r\npublic class controllerTest{\r\n\r\n@InjectMocks\r\nDelController controller;\r\n\r\n@Test\r\npublic getTest(){\r\n\r\nassertEquals(HttpStatus.BAD_REQUEST,controller.get(&quot;123po&quot;).getStatusCode());\r\n}\r\n\r\n}\r\n```\r\n\r\nI could not find a solution for this. Could you please help on how to handle this scenario? Thanks","title":"Junit for spring boot global exception","body":"<p>I want to cover the exception code in the get method of the DelController class, but it is not calling the DelIntakeGlobalException.</p>\n<pre><code>@RestController\npublic class DelController{\n@GetMapping(&quot;/getId&quot;)\npublic ResponseEntity&lt;?&gt; get(@PathVariable String intakeNumber){\n\ntry{\nInteger.parseInt(intakeNumber);\nreturn new ResponseEntity&lt;&gt;(&quot;success&quot;,HttpStatus.OK);\n\n}catch(NumberFormatException e){\n\nthrow new DelIntakeGlobalException(&quot;intakeNumber is invalid&quot;);\n}\n}\n}\n\n\n@ControllerAdvice\npublic class DelIntakeExceptionHandler{\n@ExceptionHandler(DelIntakeGlobalException.class)\npublic ResponseEntity handleException(DelIntakeGlobalException exp, ServletWebRequest req){\n\nreturn new ResponseEntity&lt;&gt;(exp.getMessage(),HttpStatus.BAD_REQUEST);\n\n}\n}\n\n@Runwith(MockitoJunitRunner.class)\npublic class controllerTest{\n\n@InjectMocks\nDelController controller;\n\n@Test\npublic getTest(){\n\nassertEquals(HttpStatus.BAD_REQUEST,controller.get(&quot;123po&quot;).getStatusCode());\n}\n\n}\n</code></pre>\n<p>I could not find a solution for this. Could you please help on how to handle this scenario? Thanks</p>\n"},{"tags":["java","algorithm","formula"],"comments":[{"owner":{"account_id":6402640,"reputation":17528,"user_id":4964822,"display_name":"nice_dev"},"score":0,"creation_date":1691990290,"post_id":76896283,"comment_id":135560049,"body_markdown":"Always copy paste the problem statement instead of images.","body":"Always copy paste the problem statement instead of images."}],"answers":[{"tags":[],"owner":{"account_id":24290111,"reputation":23,"user_id":18235293,"display_name":"mudders"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691988403,"creation_date":1691988403,"answer_id":76896332,"question_id":76896283,"body_markdown":"Essentially, what the formula says in words is: &lt;br&gt;\r\nIf the difference of the initial positions is a multiple of the difference of the velocities, then they will meet. \r\n\r\nThe `%` operator returns the remainder when the first number is divided by the second. So to check if `a%b==0` means to check if b divides a. Another common use is to check for odd numbers by checking if `a%2==1`. \r\n\r\nIn your problem, they are checking if the distance, say `d`, is divisible by the difference of the velocities. You can imagine fixing `x1` at a place, which would be equivalent to subtracting the velocity `v1` from `x2`. So if they meet, the difference in position should be a multiple of the new velocity `v2-v1`.   \r\n\r\n\r\n\r\n","title":"Number Line Jumps Hacker Rank Question Algorithms","body":"<p>Essentially, what the formula says in words is: <br>\nIf the difference of the initial positions is a multiple of the difference of the velocities, then they will meet.</p>\n<p>The <code>%</code> operator returns the remainder when the first number is divided by the second. So to check if <code>a%b==0</code> means to check if b divides a. Another common use is to check for odd numbers by checking if <code>a%2==1</code>.</p>\n<p>In your problem, they are checking if the distance, say <code>d</code>, is divisible by the difference of the velocities. You can imagine fixing <code>x1</code> at a place, which would be equivalent to subtracting the velocity <code>v1</code> from <code>x2</code>. So if they meet, the difference in position should be a multiple of the new velocity <code>v2-v1</code>.</p>\n"},{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1692009741,"creation_date":1691992017,"answer_id":76896515,"question_id":76896283,"body_markdown":"The formula can be derived using basic algebra:\r\n\r\nYou can write an expression for the position of each kangaroo after some number of jumps, `j`:\r\n\r\n```\r\np1 = x1 + j * v1\r\np2 = x2 + j * v2\r\n```\r\n\r\nClearly if they are at the same position, `p1 = p2`, so:\r\n\r\n```\r\nx1 + j * v1 = x2 + j * v2\r\n```\r\n\r\nRearranging for `j`:\r\n\r\n```\r\nj = (x2 - x1) / (v1 - v2)\r\n```\r\n\r\nNow, the particular value of `j` doesn&#39;t matter from the perspective of the question: you simply want it to be a whole number. For that to happen, the denominator has to divide the numerator.\r\n\r\nIn other words,\r\n\r\n```\r\n(x2 - x1) % (v1 - v2) == 0\r\n```\r\n\r\nThere are (at least) a couple of edge cases to watch out for:\r\n\r\n* You also probably want `(x2 - x1) / (v1 - v2) &gt;= 0`, otherwise the kangaroos would only be at the same place in the past.\r\n* You should handle the case where `v1 = v2` before applying the modulo operation - otherwise you&#39;d get an `ArithmeticException`. There is a possibly valid solution in such a case, namely that `x1 = x2`.","title":"Number Line Jumps Hacker Rank Question Algorithms","body":"<p>The formula can be derived using basic algebra:</p>\n<p>You can write an expression for the position of each kangaroo after some number of jumps, <code>j</code>:</p>\n<pre><code>p1 = x1 + j * v1\np2 = x2 + j * v2\n</code></pre>\n<p>Clearly if they are at the same position, <code>p1 = p2</code>, so:</p>\n<pre><code>x1 + j * v1 = x2 + j * v2\n</code></pre>\n<p>Rearranging for <code>j</code>:</p>\n<pre><code>j = (x2 - x1) / (v1 - v2)\n</code></pre>\n<p>Now, the particular value of <code>j</code> doesn't matter from the perspective of the question: you simply want it to be a whole number. For that to happen, the denominator has to divide the numerator.</p>\n<p>In other words,</p>\n<pre><code>(x2 - x1) % (v1 - v2) == 0\n</code></pre>\n<p>There are (at least) a couple of edge cases to watch out for:</p>\n<ul>\n<li>You also probably want <code>(x2 - x1) / (v1 - v2) &gt;= 0</code>, otherwise the kangaroos would only be at the same place in the past.</li>\n<li>You should handle the case where <code>v1 = v2</code> before applying the modulo operation - otherwise you'd get an <code>ArithmeticException</code>. There is a possibly valid solution in such a case, namely that <code>x1 = x2</code>.</li>\n</ul>\n"}],"owner":{"account_id":28071151,"reputation":3,"user_id":21443713,"display_name":"Đ&#244;ng Nguyễn"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76896515,"answer_count":2,"score":-1,"last_activity_date":1692009741,"creation_date":1691987493,"question_id":76896283,"body_markdown":"I passed the exercise which has the description below: \r\n![enter image description here][1]\r\n\r\nThis is my code: \r\n\r\n```\r\nprivate static boolean findPosition(int x1, int v1, int x2, int v2) {\r\n         int n = Math.abs(x1 - x2);\r\n         for(int i = n; i &gt;= 0; i--) {\r\n             if(x1 == x2) {\r\n                 return true;\r\n             } else {\r\n                 x1 += v1;\r\n                 x2 += v2;\r\n             }\r\n         }\r\n         return false;\r\n     }\r\n     \r\n\r\n    public static String kangaroo(int x1, int v1, int x2, int v2) {\r\n    // Write your code here\r\n        if( (x1 &lt; x2 &amp;&amp; v1 &lt;= v2) || (x2 &lt; x1 &amp;&amp; v2 &lt;= v1) ) {\r\n            return &quot;NO&quot;;\r\n        } else {\r\n            if(findPosition(x1,v1,x2,v2)) {\r\n                return &quot;YES&quot;;\r\n            }\r\n        }\r\n        return &quot;NO&quot;;\r\n    }\r\n```\r\nBut when I refer to another post, which also successfully passed the test case,\r\nI met a formula : `(x2-x1)%(v1-v2)==0`\r\n\r\n\r\n\r\n\r\nI&#39;ve been trying to understand how the formula works failed :(\r\n\r\nCan anyone help me understand this formula works \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4svT5.png","title":"Number Line Jumps Hacker Rank Question Algorithms","body":"<p>I passed the exercise which has the description below:\n<img src=\"https://i.stack.imgur.com/4svT5.png\" alt=\"enter image description here\" /></p>\n<p>This is my code:</p>\n<pre><code>private static boolean findPosition(int x1, int v1, int x2, int v2) {\n         int n = Math.abs(x1 - x2);\n         for(int i = n; i &gt;= 0; i--) {\n             if(x1 == x2) {\n                 return true;\n             } else {\n                 x1 += v1;\n                 x2 += v2;\n             }\n         }\n         return false;\n     }\n     \n\n    public static String kangaroo(int x1, int v1, int x2, int v2) {\n    // Write your code here\n        if( (x1 &lt; x2 &amp;&amp; v1 &lt;= v2) || (x2 &lt; x1 &amp;&amp; v2 &lt;= v1) ) {\n            return &quot;NO&quot;;\n        } else {\n            if(findPosition(x1,v1,x2,v2)) {\n                return &quot;YES&quot;;\n            }\n        }\n        return &quot;NO&quot;;\n    }\n</code></pre>\n<p>But when I refer to another post, which also successfully passed the test case,\nI met a formula : <code>(x2-x1)%(v1-v2)==0</code></p>\n<p>I've been trying to understand how the formula works failed :(</p>\n<p>Can anyone help me understand this formula works</p>\n"},{"tags":["java","spring","spring-boot","maven","lombok"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1642613273,"post_id":70775068,"comment_id":125119799,"body_markdown":"Does `UserCredentialsEntity` have any lombok annotations?","body":"Does <code>UserCredentialsEntity</code> have any lombok annotations?"},{"owner":{"account_id":18883827,"reputation":186,"user_id":13775698,"display_name":"Sh&#238;vam Yadav"},"score":0,"creation_date":1642613511,"post_id":70775068,"comment_id":125119889,"body_markdown":"Yes, I have used ```@Getter```, ```@Setter```, and ```@ToString``` annotations.","body":"Yes, I have used <code>@Getter</code>, <code>@Setter</code>, and <code>@ToString</code> annotations."},{"owner":{"account_id":20854541,"reputation":1009,"user_id":15318227,"display_name":"Gurkirat Singh Guliani"},"score":0,"creation_date":1642613527,"post_id":70775068,"comment_id":125119896,"body_markdown":"sometimes the ide is not able to recognize the lombok statements, have you ensured that lombok plugin is detected by intellij ? \nhttps://stackoverflow.com/questions/41161076/adding-lombok-plugin-to-intellij-project","body":"sometimes the ide is not able to recognize the lombok statements, have you ensured that lombok plugin is detected by intellij ?  <a href=\"https://stackoverflow.com/questions/41161076/adding-lombok-plugin-to-intellij-project\" title=\"adding lombok plugin to intellij project\">stackoverflow.com/questions/41161076/&hellip;</a>"},{"owner":{"account_id":18883827,"reputation":186,"user_id":13775698,"display_name":"Sh&#238;vam Yadav"},"score":0,"creation_date":1642614333,"post_id":70775068,"comment_id":125120269,"body_markdown":"Already done this. Yet not working.","body":"Already done this. Yet not working."}],"answers":[{"comments":[{"owner":{"account_id":18883827,"reputation":186,"user_id":13775698,"display_name":"Sh&#238;vam Yadav"},"score":0,"creation_date":1642613914,"post_id":70775248,"comment_id":125120097,"body_markdown":"I have already done this. In fact, it was working fine earlier, but after opening the project in STS, it&#39;s not working in IntelliJ also.","body":"I have already done this. In fact, it was working fine earlier, but after opening the project in STS, it&#39;s not working in IntelliJ also."},{"owner":{"account_id":8056033,"reputation":2316,"user_id":6073148,"accept_rate":75,"display_name":"Zahid Khan"},"score":0,"creation_date":1642614068,"post_id":70775248,"comment_id":125120168,"body_markdown":"Have you restarted IDE?","body":"Have you restarted IDE?"},{"owner":{"account_id":18883827,"reputation":186,"user_id":13775698,"display_name":"Sh&#238;vam Yadav"},"score":0,"creation_date":1642614289,"post_id":70775248,"comment_id":125120247,"body_markdown":"Yes, many times.","body":"Yes, many times."},{"owner":{"account_id":8056033,"reputation":2316,"user_id":6073148,"accept_rate":75,"display_name":"Zahid Khan"},"score":0,"creation_date":1642614338,"post_id":70775248,"comment_id":125120271,"body_markdown":"Please install Lombok in the plugin.","body":"Please install Lombok in the plugin."},{"owner":{"account_id":18883827,"reputation":186,"user_id":13775698,"display_name":"Sh&#238;vam Yadav"},"score":0,"creation_date":1642614397,"post_id":70775248,"comment_id":125120301,"body_markdown":"I have installed already.","body":"I have installed already."}],"tags":[],"owner":{"account_id":8056033,"reputation":2316,"user_id":6073148,"accept_rate":75,"display_name":"Zahid Khan"},"comment_count":5,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1642616141,"creation_date":1642613761,"answer_id":70775248,"question_id":70775068,"body_markdown":"For IntelliJ Idea, when using Lombok you have to enable annotation processing.\r\n\r\n\r\n- Preferences (&lt;kbd&gt;Ctrl&lt;/kbd&gt; + &lt;kbd&gt;Alt&lt;/kbd&gt; + &lt;kbd&gt;S&lt;/kbd&gt;)\r\n   - Build, Execution, Deployment\r\n      - Compiler\r\n         - Annotation Processors\r\n             - Enable annotation processing\r\n\r\n---\r\nIf the problem still persist:\r\n\r\nAdd version 1.18.16.\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    &lt;version&gt;1.18.16&lt;/version&gt; \r\n    &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;","title":"Cannot find symbol (all the constructors, getters and setters) in spring boot","body":"<p>For IntelliJ Idea, when using Lombok you have to enable annotation processing.</p>\n<ul>\n<li>Preferences (<kbd>Ctrl</kbd> + <kbd>Alt</kbd> + <kbd>S</kbd>)\n<ul>\n<li>Build, Execution, Deployment\n<ul>\n<li>Compiler\n<ul>\n<li>Annotation Processors\n<ul>\n<li>Enable annotation processing</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<hr />\n<p>If the problem still persist:</p>\n<p>Add version 1.18.16.</p>\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n&lt;artifactId&gt;lombok&lt;/artifactId&gt;\n&lt;version&gt;1.18.16&lt;/version&gt; \n&lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8420805,"reputation":760,"user_id":6319675,"display_name":"JPG"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683048835,"creation_date":1683048835,"answer_id":76157466,"question_id":70775068,"body_markdown":"if you are using Apache maven with JDK9+ with module-info.java\r\n\r\nyou will need to add to the compiler plugin the **path** \r\n\r\nfor example \r\n\r\n    \t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;annotationProcessorPaths&gt;\r\n\t\t\t\t\t\t&lt;path&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t\t&lt;version&gt;1.18.26&lt;/version&gt;\r\n\t\t\t\t\t\t&lt;/path&gt;\r\n\t\t\t\t\t&lt;/annotationProcessorPaths&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\nref: https://projectlombok.org/setup/maven","title":"Cannot find symbol (all the constructors, getters and setters) in spring boot","body":"<p>if you are using Apache maven with JDK9+ with module-info.java</p>\n<p>you will need to add to the compiler plugin the <strong>path</strong></p>\n<p>for example</p>\n<pre><code>            &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;annotationProcessorPaths&gt;\n                    &lt;path&gt;\n                        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;version&gt;1.18.26&lt;/version&gt;\n                    &lt;/path&gt;\n                &lt;/annotationProcessorPaths&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p>ref: <a href=\"https://projectlombok.org/setup/maven\" rel=\"nofollow noreferrer\">https://projectlombok.org/setup/maven</a></p>\n"},{"tags":[],"owner":{"account_id":16666560,"reputation":31,"user_id":12045047,"display_name":"Yury Fomichev"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1692009431,"creation_date":1692009431,"answer_id":76898209,"question_id":70775068,"body_markdown":"If you&#39;re using Gradle do not forget to add \r\n\r\nannotationProcessor &#39;org.projectlombok:lombok:1.18.8&#39;","title":"Cannot find symbol (all the constructors, getters and setters) in spring boot","body":"<p>If you're using Gradle do not forget to add</p>\n<p>annotationProcessor 'org.projectlombok:lombok:1.18.8'</p>\n"}],"owner":{"account_id":18883827,"reputation":186,"user_id":13775698,"display_name":"Sh&#238;vam Yadav"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4210,"favorite_count":0,"down_vote_count":2,"up_vote_count":4,"accepted_answer_id":70775248,"answer_count":3,"score":2,"last_activity_date":1692009431,"creation_date":1642612996,"question_id":70775068,"body_markdown":"My project was working fine earlier, but when I open this in STS and then opened it in IntelliJ, it started giving me this error. I was searching for a solution but didn&#39;t got any. Anyone, please help me. \r\n\r\nAlso, **I have already installed the Lombok plugin in my IntelliJ**.\r\n\r\n**Error picture**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OECTA.png\r\n\r\n\r\nMy **pom.xml**\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.6.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;training-management-server&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;training-management-server&lt;/name&gt;\r\n\t&lt;description&gt;Backend for Training management&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/javax.validation/validation-api --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.validation&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;validation-api&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-validator --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;7.0.2.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/com.h2database/h2 --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.0.206&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/com.auth0/java-jwt --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.auth0&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;java-jwt&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.18.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.project-lombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n**UserController**\r\n\r\n```\r\npackage com.trainingmanagementserver.api;\r\n\r\nimport com.auth0.jwt.JWT;\r\nimport com.auth0.jwt.JWTVerifier;\r\nimport com.auth0.jwt.algorithms.Algorithm;\r\nimport com.auth0.jwt.interfaces.DecodedJWT;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport com.trainingmanagementserver.entity.*;\r\nimport com.trainingmanagementserver.exception.ApiRequestException;\r\nimport com.trainingmanagementserver.message.ResponseFile;\r\nimport com.trainingmanagementserver.message.ResponseMessage;\r\nimport com.trainingmanagementserver.repository.TraineesTrainerRepository;\r\nimport com.trainingmanagementserver.repository.UserCredentialsRepository;\r\nimport com.trainingmanagementserver.service.AssignmentDetailsService;\r\nimport com.trainingmanagementserver.service.FileDBService;\r\nimport com.trainingmanagementserver.service.UserCredentialsService;\r\nimport com.trainingmanagementserver.service.UserDetailService;\r\nimport com.trainingmanagementserver.utility.Utility;\r\nimport lombok.Data;\r\nimport lombok.RequiredArgsConstructor;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.MediaType;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.*;\r\nimport org.springframework.web.multipart.MultipartFile;\r\nimport org.springframework.web.servlet.support.ServletUriComponentsBuilder;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport javax.validation.Valid;\r\nimport java.io.IOException;\r\nimport java.net.URI;\r\nimport java.util.*;\r\nimport java.util.stream.Collectors;\r\nimport static org.springframework.http.HttpHeaders.AUTHORIZATION;\r\nimport static org.springframework.http.HttpStatus.FORBIDDEN;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/api&quot;)\r\n@RequiredArgsConstructor\r\n@Slf4j\r\n//@Validated\r\n@CrossOrigin(&quot;http://localhost:8080&quot;)\r\npublic class UserController {\r\n    private final UserCredentialsService userCredentialsService;\r\n    private final UserDetailService userDetailService;\r\n    private final UserCredentialsRepository userCredentialsRepository;\r\n    private final TraineesTrainerRepository traineesTrainerRepository;\r\n    private final AssignmentDetailsService assignmentDetailsService;\r\n    private final FileDBService fileDBService;\r\n\r\n    @PostMapping(&quot;/auth/signup&quot;)\r\n    public ResponseEntity&lt;UserCredentialsEntity&gt; saveUser(@RequestBody UserCredentialsEntity userCredentialsEntity) throws ApiRequestException{\r\n        URI uri = URI.create(ServletUriComponentsBuilder.fromCurrentContextPath().path(&quot;/api/auth/signup&quot;).toUriString());\r\n        var username = userCredentialsRepository.findByUsername(userCredentialsEntity.getUsername());\r\n        var email = userCredentialsRepository.findByEmail(userCredentialsEntity.getEmail());\r\n        if(username == null  &amp;&amp; email == null) {\r\n            return ResponseEntity.created(uri).body(userCredentialsService.userCredentialsSave(userCredentialsEntity));\r\n        } else if(username != null &amp;&amp; email != null) {\r\n            throw new ApiRequestException(&quot;Username and Email already exist&quot;);\r\n        }\r\n        else if(username != null){\r\n            throw new ApiRequestException(&quot;Username already exist&quot;);\r\n        }\r\n        throw new ApiRequestException(&quot;Email already exist&quot;);\r\n    }\r\n\r\n    @PostMapping(&quot;/trainee/addBulk&quot;)\r\n    public ResponseEntity&lt;List&lt;UserCredentialsEntity&gt;&gt; addBulkTrainees(@RequestBody List&lt;UserCredentialsEntity&gt; bulkUserCredentialsEntity, HttpServletRequest request) throws ApiRequestException{\r\n        URI uri = URI.create(ServletUriComponentsBuilder.fromCurrentContextPath().path(&quot;/api/role&quot;).toUriString());\r\n        String username = (new Utility()).getUsernameFromToken(request);\r\n        int trainerId = userCredentialsRepository.findByUsername(username).getId();\r\n        bulkUserCredentialsEntity.forEach(trainee -&gt; {\r\n            var checkUsername = userCredentialsRepository.findByUsername(trainee.getUsername());\r\n            var checkEmail = userCredentialsRepository.findByEmail(trainee.getEmail());\r\n            if(checkUsername != null || checkEmail != null) {\r\n                throw new ApiRequestException(&quot;Invalid Entry&quot;);\r\n            }\r\n        });\r\n        var savedTrainees = userCredentialsService.addBulkTrainees(bulkUserCredentialsEntity);\r\n        savedTrainees.forEach(trainees -&gt; {\r\n            int traineeId = trainees.getId();\r\n            TraineesTrainer traineesTrainer = new TraineesTrainer();\r\n            traineesTrainer.setTraineeId(traineeId);\r\n            traineesTrainer.setTrainerId(trainerId);\r\n            traineesTrainerRepository.save(traineesTrainer);\r\n            userCredentialsService.addRoleToUser(&quot;ROLE_TRAINEE&quot;, trainees.getUsername());\r\n        });\r\n        return ResponseEntity.created(uri).body(savedTrainees);\r\n    }\r\n\r\n    @GetMapping(&quot;/trainee/all&quot;)\r\n    public ResponseEntity&lt;List&lt;UserMerged&gt;&gt; getAllTrainees(HttpServletRequest request) {\r\n        String username = (new Utility().getUsernameFromToken(request));\r\n        if(username.isEmpty()) throw new ApiRequestException(&quot;Username not present&quot;);\r\n        var trainerId = userCredentialsRepository.findByUsername(username).getId();\r\n        return ResponseEntity.ok().body(userCredentialsService.showTraineesEnrolled(trainerId));\r\n    }\r\n\r\n    @PostMapping(&quot;/role&quot;)\r\n    public ResponseEntity&lt;Role&gt; saveRole(@RequestBody Role role) {\r\n        URI uri = URI.create(ServletUriComponentsBuilder.fromCurrentContextPath().path(&quot;/api/role&quot;).toUriString());\r\n        return ResponseEntity.created(uri).body(userCredentialsService.roleSave(role));\r\n    }\r\n\r\n    @GetMapping(&quot;/register/check&quot;)\r\n    public ResponseEntity&lt;?&gt; checkRegister(HttpServletRequest request) throws ApiRequestException{\r\n        try {\r\n            String username = (new Utility()).getUsernameFromToken(request);\r\n            int userId = userCredentialsRepository.findByUsername(username).getId();\r\n            Map&lt;String, Boolean&gt; response = new HashMap&lt;&gt;();\r\n            if (userDetailService.fetchUserDetails(userId).isPresent()) {\r\n                response.put(&quot;isPresent&quot;, true);\r\n            } else {\r\n                response.put(&quot;isPresent&quot;, false);\r\n            }\r\n            return ResponseEntity.ok().body(response);\r\n        } catch (ApiRequestException exception) {\r\n            throw new ApiRequestException(&quot;Token is mismatch&quot;);\r\n        }\r\n    }\r\n\r\n    @PostMapping(&quot;/role/addToUser&quot;)\r\n    public ResponseEntity&lt;?&gt; addRoleToUser(@RequestBody RoleToUserForm roleForm) throws ApiRequestException {\r\n        try {\r\n            userCredentialsService.addRoleToUser(roleForm.getRoleName(), roleForm.getUsername());\r\n            return ResponseEntity.ok().build();\r\n        } catch (Exception e) {\r\n            throw new ApiRequestException(&quot;Not able to add role to the user&quot;);\r\n        }\r\n    }\r\n\r\n    @PostMapping(&quot;/me&quot;)\r\n    public ResponseEntity&lt;?&gt; saveUser(@Valid @RequestBody UserDetailsEntity userDetailsEntity, HttpServletRequest request) {\r\n//        System.out.println(&quot;Printing result &quot;+result);\r\n//        if(result.hasErrors()) {\r\n//            Map&lt;String, BindingResult&gt; errors = new HashMap&lt;&gt;();\r\n//            errors.put(&quot;error&quot;, result);\r\n//            return ResponseEntity.badRequest().body(errors);\r\n//        }\r\n        URI uri = URI.create(ServletUriComponentsBuilder.fromCurrentContextPath().path(&quot;/api/user/detail&quot;).toUriString());\r\n        String username = (new Utility()).getUsernameFromToken(request);\r\n        int userId = userCredentialsRepository.findByUsername(username).getId();\r\n        userDetailsEntity.setId(userId);\r\n        return ResponseEntity.created(uri).body(userDetailService.save(userDetailsEntity));\r\n    }\r\n\r\n    @GetMapping(&quot;/me&quot;)\r\n    public ResponseEntity&lt;UserMerged&gt; fetchUserDetails(HttpServletRequest request) throws ApiRequestException {\r\n        try {\r\n            String username = (new Utility()).getUsernameFromToken(request);\r\n            int userId = userCredentialsRepository.findByUsername(username).getId();\r\n            if (userDetailService.fetchUserDetails(userId).isPresent()) {\r\n                UserDetailsEntity userDetailsEntity = userDetailService.fetchUserDetails(userId).get();\r\n                UserCredentialsEntity userCredentialsEntity = userCredentialsRepository.findByUsername(username);\r\n                UserMerged userMerged = new UserMerged();\r\n                userMerged.setUser_detail(userDetailsEntity);\r\n                userMerged.setUser_credential(userCredentialsEntity);\r\n                return ResponseEntity.ok().body(userMerged);\r\n            }\r\n        } catch (ApiRequestException exception) {\r\n            throw new ApiRequestException(&quot;Token mismatch&quot;);\r\n        }\r\n        return new ResponseEntity&lt;&gt;(HttpStatus.NOT_ACCEPTABLE);\r\n    }\r\n\r\n    @GetMapping(&quot;/token/refresh&quot;)\r\n    public void refreshToken(HttpServletRequest request, HttpServletResponse response) throws IOException {\r\n        String authorizationHeader = request.getHeader(AUTHORIZATION);\r\n        log.info(authorizationHeader);\r\n        if (authorizationHeader != null &amp;&amp; authorizationHeader.startsWith(&quot;Bearer &quot;)) {\r\n            try {\r\n                String refresh_token = authorizationHeader.substring(&quot;Bearer &quot;.length());\r\n                log.info(refresh_token);\r\n                Algorithm algorithm = Algorithm.HMAC256(&quot;secret&quot;.getBytes());\r\n                JWTVerifier verifier = JWT.require(algorithm).build();\r\n                DecodedJWT decodedJWT = verifier.verify(refresh_token);\r\n                String username = decodedJWT.getSubject();\r\n                UserCredentialsEntity userCredentialsEntity = userCredentialsService.getUser(username);\r\n                String access_token = JWT.create()\r\n                        .withSubject(userCredentialsEntity.getUsername())\r\n                        .withExpiresAt(new Date(System.currentTimeMillis() + 10 * 60 * 1000))\r\n                        .withIssuer(request.getRequestURL().toString())\r\n                        .withClaim(&quot;roles&quot;, userCredentialsEntity.getRoles().stream().map(Role::getName).collect(Collectors.toList()))\r\n                        .sign(algorithm);\r\n                Map&lt;String, String&gt; tokens = new HashMap&lt;&gt;();\r\n                tokens.put(&quot;access_token&quot;, access_token);\r\n                tokens.put(&quot;refresh_token&quot;, refresh_token);\r\n                response.setContentType(MediaType.APPLICATION_JSON_VALUE);\r\n                new ObjectMapper().writeValue(response.getOutputStream(), tokens);\r\n            } catch (Exception exception) {\r\n                response.setHeader(&quot;error&quot;, exception.getMessage());\r\n                response.setStatus(FORBIDDEN.value());\r\n                Map&lt;String, String&gt; error = new HashMap&lt;&gt;();\r\n                error.put(&quot;error&quot;, exception.getMessage());\r\n                response.setContentType(MediaType.APPLICATION_JSON_VALUE);\r\n                new ObjectMapper().writeValue(response.getOutputStream(), error);\r\n            }\r\n        } else {\r\n            throw new RuntimeException(&quot;Refresh token required!&quot;);\r\n        }\r\n    }\r\n\r\n    @GetMapping(&quot;/user/all&quot;)\r\n    public List&lt;UserCredentialsEntity&gt; fetchUsers() {\r\n        return userCredentialsService.fetchUsersCredentials();\r\n    }\r\n\r\n    @DeleteMapping(&quot;/user/{id}&quot;)\r\n    public ResponseEntity&lt;String&gt; deleteUser(@PathVariable(&quot;id&quot;) int userId) {\r\n        userCredentialsService.deleteUser(userId);\r\n        return ResponseEntity.ok(&quot;User is deleted Successfully!!&quot;);\r\n    }\r\n\r\n    @PostMapping(&quot;/assignment/upload&quot;)\r\n    public ResponseEntity&lt;ResponseMessage&gt; uploadFile(@RequestParam(value = &quot;file&quot;, required = false) MultipartFile file,@RequestParam(&quot;title&quot;) String title, @RequestParam(&quot;description&quot;) String description, @RequestParam(&quot;total_credit&quot;) int total_credit, @RequestParam(&quot;due_date&quot;) String due_date, HttpServletRequest request) {\r\n        String senderUsername = (new Utility()).getUsernameFromToken(request);\r\n        int trainerId = userCredentialsRepository.findByUsername(senderUsername).getId();\r\n        var savedAssignment = assignmentDetailsService.save(new AssignmentDetail(trainerId, title, description, total_credit, due_date, true));\r\n        String message = &quot;Assignment Uploaded Successfully&quot;;\r\n        if(file != null) {\r\n            try {\r\n                fileDBService.store(file, savedAssignment.getId());\r\n            } catch(IOException exception) {\r\n                message = &quot;Could not upload the file &quot; + file.getOriginalFilename();\r\n                return ResponseEntity.status(HttpStatus.EXPECTATION_FAILED).body(new ResponseMessage(message));\r\n            }\r\n        }\r\n        return ResponseEntity.ok(new ResponseMessage(message));\r\n    }\r\n\r\n    @GetMapping(&quot;/files/{id}&quot;)\r\n    public ResponseEntity&lt;ResponseFile&gt; getFile(@PathVariable(&quot;id&quot;) int id) {\r\n        var file = fileDBService.getFileByFileId(id);\r\n        String fileDownloadUri = ServletUriComponentsBuilder\r\n                .fromCurrentContextPath()\r\n                .path(&quot;/files/&quot;)\r\n                .path(Integer.toString(file.getId()))\r\n                .toUriString();\r\n\r\n        ResponseFile responseFile = new ResponseFile(file.getName(),fileDownloadUri, file.getType(), file.getData().length);\r\n        return ResponseEntity.ok().body(responseFile);\r\n    }\r\n\r\n}\r\n\r\n@Data\r\nclass RoleToUserForm {\r\n    private String username;\r\n    private String roleName;\r\n}\r\n\r\n```\r\n\r\nThank You.","title":"Cannot find symbol (all the constructors, getters and setters) in spring boot","body":"<p>My project was working fine earlier, but when I open this in STS and then opened it in IntelliJ, it started giving me this error. I was searching for a solution but didn't got any. Anyone, please help me.</p>\n<p>Also, <strong>I have already installed the Lombok plugin in my IntelliJ</strong>.</p>\n<p><strong>Error picture</strong></p>\n<p><a href=\"https://i.stack.imgur.com/OECTA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OECTA.png\" alt=\"enter image description here\" /></a></p>\n<p>My <strong>pom.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com&lt;/groupId&gt;\n    &lt;artifactId&gt;training-management-server&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;training-management-server&lt;/name&gt;\n    &lt;description&gt;Backend for Training management&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/javax.validation/validation-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.validation&lt;/groupId&gt;\n            &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-validator --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n            &lt;version&gt;7.0.2.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/com.h2database/h2 --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;version&gt;2.0.206&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/com.auth0/java-jwt --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.auth0&lt;/groupId&gt;\n            &lt;artifactId&gt;java-jwt&lt;/artifactId&gt;\n            &lt;version&gt;3.18.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                &lt;scope&gt;provided&lt;/scope&gt;\n            &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.project-lombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p><strong>UserController</strong></p>\n<pre><code>package com.trainingmanagementserver.api;\n\nimport com.auth0.jwt.JWT;\nimport com.auth0.jwt.JWTVerifier;\nimport com.auth0.jwt.algorithms.Algorithm;\nimport com.auth0.jwt.interfaces.DecodedJWT;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.trainingmanagementserver.entity.*;\nimport com.trainingmanagementserver.exception.ApiRequestException;\nimport com.trainingmanagementserver.message.ResponseFile;\nimport com.trainingmanagementserver.message.ResponseMessage;\nimport com.trainingmanagementserver.repository.TraineesTrainerRepository;\nimport com.trainingmanagementserver.repository.UserCredentialsRepository;\nimport com.trainingmanagementserver.service.AssignmentDetailsService;\nimport com.trainingmanagementserver.service.FileDBService;\nimport com.trainingmanagementserver.service.UserCredentialsService;\nimport com.trainingmanagementserver.service.UserDetailService;\nimport com.trainingmanagementserver.utility.Utility;\nimport lombok.Data;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\nimport org.springframework.web.multipart.MultipartFile;\nimport org.springframework.web.servlet.support.ServletUriComponentsBuilder;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport javax.validation.Valid;\nimport java.io.IOException;\nimport java.net.URI;\nimport java.util.*;\nimport java.util.stream.Collectors;\nimport static org.springframework.http.HttpHeaders.AUTHORIZATION;\nimport static org.springframework.http.HttpStatus.FORBIDDEN;\n\n@RestController\n@RequestMapping(&quot;/api&quot;)\n@RequiredArgsConstructor\n@Slf4j\n//@Validated\n@CrossOrigin(&quot;http://localhost:8080&quot;)\npublic class UserController {\n    private final UserCredentialsService userCredentialsService;\n    private final UserDetailService userDetailService;\n    private final UserCredentialsRepository userCredentialsRepository;\n    private final TraineesTrainerRepository traineesTrainerRepository;\n    private final AssignmentDetailsService assignmentDetailsService;\n    private final FileDBService fileDBService;\n\n    @PostMapping(&quot;/auth/signup&quot;)\n    public ResponseEntity&lt;UserCredentialsEntity&gt; saveUser(@RequestBody UserCredentialsEntity userCredentialsEntity) throws ApiRequestException{\n        URI uri = URI.create(ServletUriComponentsBuilder.fromCurrentContextPath().path(&quot;/api/auth/signup&quot;).toUriString());\n        var username = userCredentialsRepository.findByUsername(userCredentialsEntity.getUsername());\n        var email = userCredentialsRepository.findByEmail(userCredentialsEntity.getEmail());\n        if(username == null  &amp;&amp; email == null) {\n            return ResponseEntity.created(uri).body(userCredentialsService.userCredentialsSave(userCredentialsEntity));\n        } else if(username != null &amp;&amp; email != null) {\n            throw new ApiRequestException(&quot;Username and Email already exist&quot;);\n        }\n        else if(username != null){\n            throw new ApiRequestException(&quot;Username already exist&quot;);\n        }\n        throw new ApiRequestException(&quot;Email already exist&quot;);\n    }\n\n    @PostMapping(&quot;/trainee/addBulk&quot;)\n    public ResponseEntity&lt;List&lt;UserCredentialsEntity&gt;&gt; addBulkTrainees(@RequestBody List&lt;UserCredentialsEntity&gt; bulkUserCredentialsEntity, HttpServletRequest request) throws ApiRequestException{\n        URI uri = URI.create(ServletUriComponentsBuilder.fromCurrentContextPath().path(&quot;/api/role&quot;).toUriString());\n        String username = (new Utility()).getUsernameFromToken(request);\n        int trainerId = userCredentialsRepository.findByUsername(username).getId();\n        bulkUserCredentialsEntity.forEach(trainee -&gt; {\n            var checkUsername = userCredentialsRepository.findByUsername(trainee.getUsername());\n            var checkEmail = userCredentialsRepository.findByEmail(trainee.getEmail());\n            if(checkUsername != null || checkEmail != null) {\n                throw new ApiRequestException(&quot;Invalid Entry&quot;);\n            }\n        });\n        var savedTrainees = userCredentialsService.addBulkTrainees(bulkUserCredentialsEntity);\n        savedTrainees.forEach(trainees -&gt; {\n            int traineeId = trainees.getId();\n            TraineesTrainer traineesTrainer = new TraineesTrainer();\n            traineesTrainer.setTraineeId(traineeId);\n            traineesTrainer.setTrainerId(trainerId);\n            traineesTrainerRepository.save(traineesTrainer);\n            userCredentialsService.addRoleToUser(&quot;ROLE_TRAINEE&quot;, trainees.getUsername());\n        });\n        return ResponseEntity.created(uri).body(savedTrainees);\n    }\n\n    @GetMapping(&quot;/trainee/all&quot;)\n    public ResponseEntity&lt;List&lt;UserMerged&gt;&gt; getAllTrainees(HttpServletRequest request) {\n        String username = (new Utility().getUsernameFromToken(request));\n        if(username.isEmpty()) throw new ApiRequestException(&quot;Username not present&quot;);\n        var trainerId = userCredentialsRepository.findByUsername(username).getId();\n        return ResponseEntity.ok().body(userCredentialsService.showTraineesEnrolled(trainerId));\n    }\n\n    @PostMapping(&quot;/role&quot;)\n    public ResponseEntity&lt;Role&gt; saveRole(@RequestBody Role role) {\n        URI uri = URI.create(ServletUriComponentsBuilder.fromCurrentContextPath().path(&quot;/api/role&quot;).toUriString());\n        return ResponseEntity.created(uri).body(userCredentialsService.roleSave(role));\n    }\n\n    @GetMapping(&quot;/register/check&quot;)\n    public ResponseEntity&lt;?&gt; checkRegister(HttpServletRequest request) throws ApiRequestException{\n        try {\n            String username = (new Utility()).getUsernameFromToken(request);\n            int userId = userCredentialsRepository.findByUsername(username).getId();\n            Map&lt;String, Boolean&gt; response = new HashMap&lt;&gt;();\n            if (userDetailService.fetchUserDetails(userId).isPresent()) {\n                response.put(&quot;isPresent&quot;, true);\n            } else {\n                response.put(&quot;isPresent&quot;, false);\n            }\n            return ResponseEntity.ok().body(response);\n        } catch (ApiRequestException exception) {\n            throw new ApiRequestException(&quot;Token is mismatch&quot;);\n        }\n    }\n\n    @PostMapping(&quot;/role/addToUser&quot;)\n    public ResponseEntity&lt;?&gt; addRoleToUser(@RequestBody RoleToUserForm roleForm) throws ApiRequestException {\n        try {\n            userCredentialsService.addRoleToUser(roleForm.getRoleName(), roleForm.getUsername());\n            return ResponseEntity.ok().build();\n        } catch (Exception e) {\n            throw new ApiRequestException(&quot;Not able to add role to the user&quot;);\n        }\n    }\n\n    @PostMapping(&quot;/me&quot;)\n    public ResponseEntity&lt;?&gt; saveUser(@Valid @RequestBody UserDetailsEntity userDetailsEntity, HttpServletRequest request) {\n//        System.out.println(&quot;Printing result &quot;+result);\n//        if(result.hasErrors()) {\n//            Map&lt;String, BindingResult&gt; errors = new HashMap&lt;&gt;();\n//            errors.put(&quot;error&quot;, result);\n//            return ResponseEntity.badRequest().body(errors);\n//        }\n        URI uri = URI.create(ServletUriComponentsBuilder.fromCurrentContextPath().path(&quot;/api/user/detail&quot;).toUriString());\n        String username = (new Utility()).getUsernameFromToken(request);\n        int userId = userCredentialsRepository.findByUsername(username).getId();\n        userDetailsEntity.setId(userId);\n        return ResponseEntity.created(uri).body(userDetailService.save(userDetailsEntity));\n    }\n\n    @GetMapping(&quot;/me&quot;)\n    public ResponseEntity&lt;UserMerged&gt; fetchUserDetails(HttpServletRequest request) throws ApiRequestException {\n        try {\n            String username = (new Utility()).getUsernameFromToken(request);\n            int userId = userCredentialsRepository.findByUsername(username).getId();\n            if (userDetailService.fetchUserDetails(userId).isPresent()) {\n                UserDetailsEntity userDetailsEntity = userDetailService.fetchUserDetails(userId).get();\n                UserCredentialsEntity userCredentialsEntity = userCredentialsRepository.findByUsername(username);\n                UserMerged userMerged = new UserMerged();\n                userMerged.setUser_detail(userDetailsEntity);\n                userMerged.setUser_credential(userCredentialsEntity);\n                return ResponseEntity.ok().body(userMerged);\n            }\n        } catch (ApiRequestException exception) {\n            throw new ApiRequestException(&quot;Token mismatch&quot;);\n        }\n        return new ResponseEntity&lt;&gt;(HttpStatus.NOT_ACCEPTABLE);\n    }\n\n    @GetMapping(&quot;/token/refresh&quot;)\n    public void refreshToken(HttpServletRequest request, HttpServletResponse response) throws IOException {\n        String authorizationHeader = request.getHeader(AUTHORIZATION);\n        log.info(authorizationHeader);\n        if (authorizationHeader != null &amp;&amp; authorizationHeader.startsWith(&quot;Bearer &quot;)) {\n            try {\n                String refresh_token = authorizationHeader.substring(&quot;Bearer &quot;.length());\n                log.info(refresh_token);\n                Algorithm algorithm = Algorithm.HMAC256(&quot;secret&quot;.getBytes());\n                JWTVerifier verifier = JWT.require(algorithm).build();\n                DecodedJWT decodedJWT = verifier.verify(refresh_token);\n                String username = decodedJWT.getSubject();\n                UserCredentialsEntity userCredentialsEntity = userCredentialsService.getUser(username);\n                String access_token = JWT.create()\n                        .withSubject(userCredentialsEntity.getUsername())\n                        .withExpiresAt(new Date(System.currentTimeMillis() + 10 * 60 * 1000))\n                        .withIssuer(request.getRequestURL().toString())\n                        .withClaim(&quot;roles&quot;, userCredentialsEntity.getRoles().stream().map(Role::getName).collect(Collectors.toList()))\n                        .sign(algorithm);\n                Map&lt;String, String&gt; tokens = new HashMap&lt;&gt;();\n                tokens.put(&quot;access_token&quot;, access_token);\n                tokens.put(&quot;refresh_token&quot;, refresh_token);\n                response.setContentType(MediaType.APPLICATION_JSON_VALUE);\n                new ObjectMapper().writeValue(response.getOutputStream(), tokens);\n            } catch (Exception exception) {\n                response.setHeader(&quot;error&quot;, exception.getMessage());\n                response.setStatus(FORBIDDEN.value());\n                Map&lt;String, String&gt; error = new HashMap&lt;&gt;();\n                error.put(&quot;error&quot;, exception.getMessage());\n                response.setContentType(MediaType.APPLICATION_JSON_VALUE);\n                new ObjectMapper().writeValue(response.getOutputStream(), error);\n            }\n        } else {\n            throw new RuntimeException(&quot;Refresh token required!&quot;);\n        }\n    }\n\n    @GetMapping(&quot;/user/all&quot;)\n    public List&lt;UserCredentialsEntity&gt; fetchUsers() {\n        return userCredentialsService.fetchUsersCredentials();\n    }\n\n    @DeleteMapping(&quot;/user/{id}&quot;)\n    public ResponseEntity&lt;String&gt; deleteUser(@PathVariable(&quot;id&quot;) int userId) {\n        userCredentialsService.deleteUser(userId);\n        return ResponseEntity.ok(&quot;User is deleted Successfully!!&quot;);\n    }\n\n    @PostMapping(&quot;/assignment/upload&quot;)\n    public ResponseEntity&lt;ResponseMessage&gt; uploadFile(@RequestParam(value = &quot;file&quot;, required = false) MultipartFile file,@RequestParam(&quot;title&quot;) String title, @RequestParam(&quot;description&quot;) String description, @RequestParam(&quot;total_credit&quot;) int total_credit, @RequestParam(&quot;due_date&quot;) String due_date, HttpServletRequest request) {\n        String senderUsername = (new Utility()).getUsernameFromToken(request);\n        int trainerId = userCredentialsRepository.findByUsername(senderUsername).getId();\n        var savedAssignment = assignmentDetailsService.save(new AssignmentDetail(trainerId, title, description, total_credit, due_date, true));\n        String message = &quot;Assignment Uploaded Successfully&quot;;\n        if(file != null) {\n            try {\n                fileDBService.store(file, savedAssignment.getId());\n            } catch(IOException exception) {\n                message = &quot;Could not upload the file &quot; + file.getOriginalFilename();\n                return ResponseEntity.status(HttpStatus.EXPECTATION_FAILED).body(new ResponseMessage(message));\n            }\n        }\n        return ResponseEntity.ok(new ResponseMessage(message));\n    }\n\n    @GetMapping(&quot;/files/{id}&quot;)\n    public ResponseEntity&lt;ResponseFile&gt; getFile(@PathVariable(&quot;id&quot;) int id) {\n        var file = fileDBService.getFileByFileId(id);\n        String fileDownloadUri = ServletUriComponentsBuilder\n                .fromCurrentContextPath()\n                .path(&quot;/files/&quot;)\n                .path(Integer.toString(file.getId()))\n                .toUriString();\n\n        ResponseFile responseFile = new ResponseFile(file.getName(),fileDownloadUri, file.getType(), file.getData().length);\n        return ResponseEntity.ok().body(responseFile);\n    }\n\n}\n\n@Data\nclass RoleToUserForm {\n    private String username;\n    private String roleName;\n}\n\n</code></pre>\n<p>Thank You.</p>\n"},{"tags":["java","spotify"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1692009829,"post_id":76880247,"comment_id":135563245,"body_markdown":"*&quot;I apologize if I get any terminology wrong.&quot;*  ... Ermm headers are not in the body.   You are not talking about headers.  You are talking about attributes of some JSON sent as the response body.  If you learn and use the correct terminology, it is easier to understand you ... and you are more likely to be able to find the solution for yourself. In this case, the solution is to use a JSON parser library to parse the JSON in the body.  That will give you an in-memory object and you can call a method on that object to &quot;get&quot; the value of the attribute.","body":"<i>&quot;I apologize if I get any terminology wrong.&quot;</i>  ... Ermm headers are not in the body.   You are not talking about headers.  You are talking about attributes of some JSON sent as the response body.  If you learn and use the correct terminology, it is easier to understand you ... and you are more likely to be able to find the solution for yourself. In this case, the solution is to use a JSON parser library to parse the JSON in the body.  That will give you an in-memory object and you can call a method on that object to &quot;get&quot; the value of the attribute."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1692010124,"post_id":76880247,"comment_id":135563301,"body_markdown":"In short: learn the terminology *first* by reading about the technology that you are trying to use.  It will save you time.   (P.S. I am teaching ... not criticizing.)","body":"In short: learn the terminology <i>first</i> by reading about the technology that you are trying to use.  It will save you time.   (P.S. I am teaching ... not criticizing.)"}],"answers":[{"comments":[{"owner":{"account_id":23582187,"reputation":1,"user_id":22372495,"display_name":"ant"},"score":0,"creation_date":1691720175,"post_id":76880264,"comment_id":135532994,"body_markdown":"I was under the impression that the body is made up of various headers, and I thought that &quot;access_token&quot; was one of them. In this case, I was under the impression that the body was &quot;access_token&quot;, &quot;token-type&quot;, and &quot;expires_in&quot;; do I have that wrong?\n\nI will look into Jackson JSON, though, thank you!","body":"I was under the impression that the body is made up of various headers, and I thought that &quot;access_token&quot; was one of them. In this case, I was under the impression that the body was &quot;access_token&quot;, &quot;token-type&quot;, and &quot;expires_in&quot;; do I have that wrong?  I will look into Jackson JSON, though, thank you!"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1691729328,"post_id":76880264,"comment_id":135533651,"body_markdown":"The term &#39;header&#39; has a very specific meaning in HTML land. These aren&#39;t headers. Parameter is something else too. These aren&#39;t parameters. The body consists of JSON and the JSON contains key and value pairs. &#39;header&#39; as a word doesn&#39;t apply to JSON. I don&#39;t know what you&#39;re thinking, but either you&#39;re misunderstanding, or you are using words that mean wildly different things than what you think they mean.","body":"The term &#39;header&#39; has a very specific meaning in HTML land. These aren&#39;t headers. Parameter is something else too. These aren&#39;t parameters. The body consists of JSON and the JSON contains key and value pairs. &#39;header&#39; as a word doesn&#39;t apply to JSON. I don&#39;t know what you&#39;re thinking, but either you&#39;re misunderstanding, or you are using words that mean wildly different things than what you think they mean."},{"owner":{"account_id":23582187,"reputation":1,"user_id":22372495,"display_name":"ant"},"score":0,"creation_date":1691758806,"post_id":76880264,"comment_id":135538862,"body_markdown":"Oh, got it! So &quot;access_token&quot; is a key and &quot;[ACCESS_TOKEN]&quot; would be its value, and they make up the JSON, which make up the body. Those are the things I had wrong, I think. Thank you!","body":"Oh, got it! So &quot;access_token&quot; is a key and &quot;[ACCESS_TOKEN]&quot; would be its value, and they make up the JSON, which make up the body. Those are the things I had wrong, I think. Thank you!"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1691769923,"post_id":76880264,"comment_id":135541307,"body_markdown":"You got it now :)","body":"You got it now :)"}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691718945,"creation_date":1691718945,"answer_id":76880264,"question_id":76880247,"body_markdown":"That response __is not a header__. Headers are something else. Here, the spotify API server is no doubt responding with headers like `Content-Type` (and its value would be `application/json; charset=UTF-8`).\r\n\r\nWhat you&#39;re looking at __is__ the body. It would be kinda silly if calling `.body()` returns the thing that is the opposite of the body.\r\n\r\nThat body is in a format called JSON. You need a JSON parser to parse it. I suggest [Jackson JSON](https://www.baeldung.com/jackson).\r\n","title":"Is there a way to access individual header parameters from the body of a response in Java?","body":"<p>That response <strong>is not a header</strong>. Headers are something else. Here, the spotify API server is no doubt responding with headers like <code>Content-Type</code> (and its value would be <code>application/json; charset=UTF-8</code>).</p>\n<p>What you're looking at <strong>is</strong> the body. It would be kinda silly if calling <code>.body()</code> returns the thing that is the opposite of the body.</p>\n<p>That body is in a format called JSON. You need a JSON parser to parse it. I suggest <a href=\"https://www.baeldung.com/jackson\" rel=\"nofollow noreferrer\">Jackson JSON</a>.</p>\n"},{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692009256,"creation_date":1692009256,"answer_id":76898188,"question_id":76880247,"body_markdown":"You have the JSON string you need, now you can use JSON the get the information you want. The runnable demo console application below utilizes the **[json-20210307.jar](https://repo1.maven.org/maven2/org/json/json/20210307/)** library which you will need to apply.\r\n\r\nBe sure to read the extensive comments in code so to see what is going on. You can remove the comments later if you like.\r\n\r\nImportant methods within the demo code below are the `getJsonKeys()` method and the `getJsonKeyValue()` method:\r\n\r\n```\r\n/*\r\n    Dependencies (libraries): json-20210307.jar\r\n        You can download this JAR file from here:\r\n            https://repo1.maven.org/maven2/org/json/json/20210307/\r\n        or download directly from here:\r\n            https://repo1.maven.org/maven2/org/json/json/20210307/json-20210307.jar\r\n\r\n        Add this library to your project.\r\n */\r\npackage getobjectfromjsonstringdemo;\r\n\r\npublic class GetObjectFromJsonStringDemo {\r\n    \r\n    // Class Member Variables:\r\n    public final String LS = System.lineSeparator();\r\n    \r\n    /* Open a Keyboard Input Stream. &#39;Don&#39;t close&#39; this Stream! \r\n       If you do, you will have restart the application in order \r\n       to utilize it again. The JVM will automatically close this \r\n       resource when the application ends. Never close it unless\r\n       you are absolutely sure you will not need it again for the \r\n       current run life of your app.              */\r\n    public final java.util.Scanner userInput = new java.util.Scanner(System.in);\r\n    \r\n    \r\n    // Application entry point:\r\n    public static void main(String[] args) {\r\n        /* App started this way to avoid the need for statics \r\n           (unless we want them):        */\r\n        new GetObjectFromJsonStringDemo().startApp(args);\r\n    }\r\n    \r\n    /** \r\n     * Alternate application entry point - called from the &#39;main()&#39; method: \r\n     * \r\n     * @param args (Optional - String VarArgs) If there are going to be \r\n     * command-line arguments, they would be supplied from the &#39;main()&#39;\r\n     * method. Doing the method parameter this way allows us to call this \r\n     * method without any arguments at all. This is done for the sake of \r\n     * this demo so that another &#39;while&#39; loop didn&#39;t need to be used to \r\n     * continuously redisplay the menu after the &quot;Press Enter to Continue&quot; \r\n     * prompt. \r\n     */   \r\n    private void startApp(String... args) {\r\n        // The JSON String:  {&quot;access_token&quot;:&quot;[ACCESS_TOKEN]&quot;,&quot;token_type&quot;:&quot;Bearer&quot;,&quot;expires_in&quot;:3600}\r\n        String json = &quot;{\\&quot;access_token\\&quot;:\\&quot;[ACCESS_TOKEN]\\&quot;,\\&quot;token_type\\&quot;:\\&quot;Bearer\\&quot;,\\&quot;expires_in\\&quot;:3600}&quot;;\r\n        System.out.println(&quot;The Supplied JSON String:&quot; + LS + &quot;------------------------&quot;);\r\n        System.out.println(json + LS);\r\n        \r\n        // Get the Keys from the JSON String:\r\n        String[] keys = getJsonKeys(json);\r\n        \r\n        // Build The Menu To select any one of the acquired Keys so to get its value:\r\n        // ==========================================================================\r\n        // User Prompt menu input varaible initialized to empty (null string):\r\n        String choice = &quot;&quot;;\r\n        int finalI = keys.length + 1; // Will hold the last item number in Menu for &#39;Quit&#39;:\r\n        \r\n        // Keep looping while &#39;choice&#39; is empty:\r\n        while (choice.isEmpty()) {\r\n            // Prompt string:\r\n            System.out.println(&quot;Select the Key Name you would like the Value for:&quot;);\r\n            \r\n            // Loop through the &#39;keys[]&#39; array and build into menu:            \r\n            for (int i = 0; i &lt; keys.length; i++) {\r\n                System.out.println(&quot;  &quot; + (i + 1) + &quot;) &quot; + keys[i]);\r\n            }\r\n            // Menu separator so to apply the &#39;Quit&#39; menu item beneath it:\r\n            System.out.println(&quot;  -------------------------&quot;);\r\n            System.out.println(&quot;  &quot; + finalI + &quot;) Quit This Application!&quot;);\r\n            System.out.print(&quot;Your Choice? -&gt; &quot;);\r\n            \r\n            /* Get User Input and trim it so to remove any possible\r\n               leading or trailing whitespaces:      */\r\n            choice = userInput.nextLine().trim();\r\n            \r\n            // Entry Validation:\r\n            /* Make sure the entry is an integer numerical value. If it\r\n               is then make sure the numercal value entered is within \r\n               the range of the number of menu item (however number of \r\n               menu items there actually are):            */\r\n            if (!choice.matches(&quot;\\\\d+&quot;) || Integer.parseInt(choice) &lt; 1 || \r\n                                           Integer.parseInt(choice) &gt; finalI) {\r\n                // If input validation fails then inform User and repropmt:\r\n                System.out.println(&quot;Invalid Menu Choice! (&quot; + choice + &quot;) Try Again...&quot; + LS);\r\n                choice = &quot;&quot;; // Empty &#39;choice&#39; to ensure reprompt:\r\n            }\r\n        }\r\n        \r\n        /* If we make it to this point then validation was successful \r\n           so convert the menu item number to an int type variable. \r\n           This value will be used as an index number (minus 1) to get \r\n           the related Key Name from the &#39;keys[]&#39; string array:   */\r\n        int choiceVal = Integer.parseInt(choice);\r\n        \r\n        // Has QUIT been selected (the last menu item)?\r\n        if (choiceVal == finalI) {\r\n            System.out.println(LS + &quot;Quitting - Bye Bye&quot; + LS);\r\n            // Effectively exit this method which will ultimately end the application:\r\n            return; \r\n        }\r\n        \r\n        /* No...Quit hasn&#39;t been selected so let&#39;s get and \r\n           display the selected Key Value:        */\r\n        Object keyValue = getJsonKeyValue(json, keys[choiceVal - 1]);\r\n        System.out.println(LS + &quot;Value for the Key: \\&quot;&quot; + keys[choiceVal - 1] \r\n                           + &quot;\\&quot; is: -&gt; &quot; + keyValue.toString() + LS);\r\n        pressEnterToContinue();\r\n    }\r\n    \r\n    /* A prompt to allow User to continue and disply the menu again.\r\n       (a million and a half ways to do this sort of thing)    */\r\n    private void pressEnterToContinue() {\r\n        // Prompt...\r\n        String entry = &quot;&quot;;\r\n        while (entry.isEmpty()) {\r\n            System.out.println(&quot;&lt;&lt; Press ENTER To Continue &gt;&gt;&quot;);\r\n            System.out.println(&quot;&lt;&lt;     Enter q to Quit     &gt;&gt;&quot;);\r\n            entry = userInput.nextLine().trim();\r\n            // Validate...\r\n            /* If the entry isn&#39;t empty (which an ENTER Key Hit \r\n               will do) and the entry wasn&#39;t a &#39;Q&#39; in any letter \r\n               case then the entry is Invalid to continue the demo \r\n               so, ask again.            */\r\n            if (!entry.isEmpty() &amp;&amp; !entry.equalsIgnoreCase(&quot;q&quot;)) {\r\n                System.out.println(&quot;Invalid Entry! (&quot; + entry + &quot;) - Try Again...&quot; + LS);\r\n                entry = &quot;&quot;; // Empty so to ensure re-loop.\r\n                continue;\r\n            }\r\n            \r\n            // If we make it to this point then, validation is successful:\r\n            if (!entry.equalsIgnoreCase(&quot;q&quot;)) {\r\n                // Make &#39;entry&#39; contain something relative so not to re-loop:\r\n                entry = &quot;continueON&quot;;\r\n            }\r\n            // Otherwise....QUIT.\r\n            else {\r\n                System.out.println(&quot;Quitting - Bye Bye&quot; + LS);\r\n                System.exit(0);\r\n            }\r\n           \r\n        }\r\n        \r\n        /* Call the startApp() method again but with no arguments\r\n           so to display the menu again:        */\r\n        startApp();\r\n    }\r\n\r\n    /**\r\n     * This method retrieves the Key Names within a JSON String and returns them\r\n     * within a String[] array.&lt;br&gt;\r\n     *\r\n     * @param jsonString (String) The JSON String to work on.&lt;br&gt;\r\n     * \r\n     * @param parentNodeName (Optional - String VarArg) A lot of times Keys and \r\n     * their respective values are nested within sever specific parent nodes. \r\n     * This parameter allows you to specify the parent node from where to acquire \r\n     * the desired Key names.\r\n     * &lt;p&gt;\r\n     * If there are parent nodes within the JSON string and you supply nothing \r\n     * to this parameter then, the outer most Parent Key names will be returned.\r\n     *&lt;p&gt;\r\n     * @return (String[] Array) A String array of Key names contained within the\r\n     *         supplied JSON String.\r\n     */\r\n    public String[] getJsonKeys(String jsonString, String... parentNodeName) {\r\n        String parentNode = &quot;&quot;;\r\n        if (parentNodeName.length &gt; 0 &amp;&amp; !parentNodeName[0].trim().isEmpty()) {\r\n               parentNode = parentNodeName[0];\r\n        }\r\n        \r\n        org.json.JSONObject obj = new org.json.JSONObject(jsonString);\r\n        if (!parentNode.isEmpty()) {\r\n            org.json.JSONObject parentObj = obj.getJSONObject(parentNode);\r\n            java.util.Set&lt;String&gt; keyNames = parentObj.keySet();\r\n            return keyNames.toArray(new String[0]);\r\n        }\r\n        else {\r\n            java.util.Set&lt;String&gt; keyNames = obj.keySet();\r\n            return keyNames.toArray(new String[0]);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * This method retrieves the Key Value for the supplied Key Name contained\r\n     * within the supplied JSON String.\r\n     * \r\n     * @param jsonString (String) The JSON String to work on.&lt;br&gt;\r\n     * \r\n     * @param keyName (String) The Key Name to get the related Value for.&lt;br&gt;\r\n     * \r\n     * @return (Object) The Value related to the supplied Key Name. You will \r\n     * need to cast the returned object to the desired data type the key value \r\n     * is meant to be or use the &#39;toString()&#39; method.\r\n     */\r\n    public Object getJsonKeyValue(String jsonString, String keyName) {\r\n        org.json.JSONObject obj = new org.json.JSONObject(jsonString);\r\n        Object keyValue = obj.get(keyName);\r\n        return keyValue;\r\n    }\r\n    // DONE.\r\n}\r\n```","title":"Is there a way to access individual header parameters from the body of a response in Java?","body":"<p>You have the JSON string you need, now you can use JSON the get the information you want. The runnable demo console application below utilizes the <strong><a href=\"https://repo1.maven.org/maven2/org/json/json/20210307/\" rel=\"nofollow noreferrer\">json-20210307.jar</a></strong> library which you will need to apply.</p>\n<p>Be sure to read the extensive comments in code so to see what is going on. You can remove the comments later if you like.</p>\n<p>Important methods within the demo code below are the <code>getJsonKeys()</code> method and the <code>getJsonKeyValue()</code> method:</p>\n<pre><code>/*\n    Dependencies (libraries): json-20210307.jar\n        You can download this JAR file from here:\n            https://repo1.maven.org/maven2/org/json/json/20210307/\n        or download directly from here:\n            https://repo1.maven.org/maven2/org/json/json/20210307/json-20210307.jar\n\n        Add this library to your project.\n */\npackage getobjectfromjsonstringdemo;\n\npublic class GetObjectFromJsonStringDemo {\n    \n    // Class Member Variables:\n    public final String LS = System.lineSeparator();\n    \n    /* Open a Keyboard Input Stream. 'Don't close' this Stream! \n       If you do, you will have restart the application in order \n       to utilize it again. The JVM will automatically close this \n       resource when the application ends. Never close it unless\n       you are absolutely sure you will not need it again for the \n       current run life of your app.              */\n    public final java.util.Scanner userInput = new java.util.Scanner(System.in);\n    \n    \n    // Application entry point:\n    public static void main(String[] args) {\n        /* App started this way to avoid the need for statics \n           (unless we want them):        */\n        new GetObjectFromJsonStringDemo().startApp(args);\n    }\n    \n    /** \n     * Alternate application entry point - called from the 'main()' method: \n     * \n     * @param args (Optional - String VarArgs) If there are going to be \n     * command-line arguments, they would be supplied from the 'main()'\n     * method. Doing the method parameter this way allows us to call this \n     * method without any arguments at all. This is done for the sake of \n     * this demo so that another 'while' loop didn't need to be used to \n     * continuously redisplay the menu after the &quot;Press Enter to Continue&quot; \n     * prompt. \n     */   \n    private void startApp(String... args) {\n        // The JSON String:  {&quot;access_token&quot;:&quot;[ACCESS_TOKEN]&quot;,&quot;token_type&quot;:&quot;Bearer&quot;,&quot;expires_in&quot;:3600}\n        String json = &quot;{\\&quot;access_token\\&quot;:\\&quot;[ACCESS_TOKEN]\\&quot;,\\&quot;token_type\\&quot;:\\&quot;Bearer\\&quot;,\\&quot;expires_in\\&quot;:3600}&quot;;\n        System.out.println(&quot;The Supplied JSON String:&quot; + LS + &quot;------------------------&quot;);\n        System.out.println(json + LS);\n        \n        // Get the Keys from the JSON String:\n        String[] keys = getJsonKeys(json);\n        \n        // Build The Menu To select any one of the acquired Keys so to get its value:\n        // ==========================================================================\n        // User Prompt menu input varaible initialized to empty (null string):\n        String choice = &quot;&quot;;\n        int finalI = keys.length + 1; // Will hold the last item number in Menu for 'Quit':\n        \n        // Keep looping while 'choice' is empty:\n        while (choice.isEmpty()) {\n            // Prompt string:\n            System.out.println(&quot;Select the Key Name you would like the Value for:&quot;);\n            \n            // Loop through the 'keys[]' array and build into menu:            \n            for (int i = 0; i &lt; keys.length; i++) {\n                System.out.println(&quot;  &quot; + (i + 1) + &quot;) &quot; + keys[i]);\n            }\n            // Menu separator so to apply the 'Quit' menu item beneath it:\n            System.out.println(&quot;  -------------------------&quot;);\n            System.out.println(&quot;  &quot; + finalI + &quot;) Quit This Application!&quot;);\n            System.out.print(&quot;Your Choice? -&gt; &quot;);\n            \n            /* Get User Input and trim it so to remove any possible\n               leading or trailing whitespaces:      */\n            choice = userInput.nextLine().trim();\n            \n            // Entry Validation:\n            /* Make sure the entry is an integer numerical value. If it\n               is then make sure the numercal value entered is within \n               the range of the number of menu item (however number of \n               menu items there actually are):            */\n            if (!choice.matches(&quot;\\\\d+&quot;) || Integer.parseInt(choice) &lt; 1 || \n                                           Integer.parseInt(choice) &gt; finalI) {\n                // If input validation fails then inform User and repropmt:\n                System.out.println(&quot;Invalid Menu Choice! (&quot; + choice + &quot;) Try Again...&quot; + LS);\n                choice = &quot;&quot;; // Empty 'choice' to ensure reprompt:\n            }\n        }\n        \n        /* If we make it to this point then validation was successful \n           so convert the menu item number to an int type variable. \n           This value will be used as an index number (minus 1) to get \n           the related Key Name from the 'keys[]' string array:   */\n        int choiceVal = Integer.parseInt(choice);\n        \n        // Has QUIT been selected (the last menu item)?\n        if (choiceVal == finalI) {\n            System.out.println(LS + &quot;Quitting - Bye Bye&quot; + LS);\n            // Effectively exit this method which will ultimately end the application:\n            return; \n        }\n        \n        /* No...Quit hasn't been selected so let's get and \n           display the selected Key Value:        */\n        Object keyValue = getJsonKeyValue(json, keys[choiceVal - 1]);\n        System.out.println(LS + &quot;Value for the Key: \\&quot;&quot; + keys[choiceVal - 1] \n                           + &quot;\\&quot; is: -&gt; &quot; + keyValue.toString() + LS);\n        pressEnterToContinue();\n    }\n    \n    /* A prompt to allow User to continue and disply the menu again.\n       (a million and a half ways to do this sort of thing)    */\n    private void pressEnterToContinue() {\n        // Prompt...\n        String entry = &quot;&quot;;\n        while (entry.isEmpty()) {\n            System.out.println(&quot;&lt;&lt; Press ENTER To Continue &gt;&gt;&quot;);\n            System.out.println(&quot;&lt;&lt;     Enter q to Quit     &gt;&gt;&quot;);\n            entry = userInput.nextLine().trim();\n            // Validate...\n            /* If the entry isn't empty (which an ENTER Key Hit \n               will do) and the entry wasn't a 'Q' in any letter \n               case then the entry is Invalid to continue the demo \n               so, ask again.            */\n            if (!entry.isEmpty() &amp;&amp; !entry.equalsIgnoreCase(&quot;q&quot;)) {\n                System.out.println(&quot;Invalid Entry! (&quot; + entry + &quot;) - Try Again...&quot; + LS);\n                entry = &quot;&quot;; // Empty so to ensure re-loop.\n                continue;\n            }\n            \n            // If we make it to this point then, validation is successful:\n            if (!entry.equalsIgnoreCase(&quot;q&quot;)) {\n                // Make 'entry' contain something relative so not to re-loop:\n                entry = &quot;continueON&quot;;\n            }\n            // Otherwise....QUIT.\n            else {\n                System.out.println(&quot;Quitting - Bye Bye&quot; + LS);\n                System.exit(0);\n            }\n           \n        }\n        \n        /* Call the startApp() method again but with no arguments\n           so to display the menu again:        */\n        startApp();\n    }\n\n    /**\n     * This method retrieves the Key Names within a JSON String and returns them\n     * within a String[] array.&lt;br&gt;\n     *\n     * @param jsonString (String) The JSON String to work on.&lt;br&gt;\n     * \n     * @param parentNodeName (Optional - String VarArg) A lot of times Keys and \n     * their respective values are nested within sever specific parent nodes. \n     * This parameter allows you to specify the parent node from where to acquire \n     * the desired Key names.\n     * &lt;p&gt;\n     * If there are parent nodes within the JSON string and you supply nothing \n     * to this parameter then, the outer most Parent Key names will be returned.\n     *&lt;p&gt;\n     * @return (String[] Array) A String array of Key names contained within the\n     *         supplied JSON String.\n     */\n    public String[] getJsonKeys(String jsonString, String... parentNodeName) {\n        String parentNode = &quot;&quot;;\n        if (parentNodeName.length &gt; 0 &amp;&amp; !parentNodeName[0].trim().isEmpty()) {\n               parentNode = parentNodeName[0];\n        }\n        \n        org.json.JSONObject obj = new org.json.JSONObject(jsonString);\n        if (!parentNode.isEmpty()) {\n            org.json.JSONObject parentObj = obj.getJSONObject(parentNode);\n            java.util.Set&lt;String&gt; keyNames = parentObj.keySet();\n            return keyNames.toArray(new String[0]);\n        }\n        else {\n            java.util.Set&lt;String&gt; keyNames = obj.keySet();\n            return keyNames.toArray(new String[0]);\n        }\n    }\n\n    /**\n     * This method retrieves the Key Value for the supplied Key Name contained\n     * within the supplied JSON String.\n     * \n     * @param jsonString (String) The JSON String to work on.&lt;br&gt;\n     * \n     * @param keyName (String) The Key Name to get the related Value for.&lt;br&gt;\n     * \n     * @return (Object) The Value related to the supplied Key Name. You will \n     * need to cast the returned object to the desired data type the key value \n     * is meant to be or use the 'toString()' method.\n     */\n    public Object getJsonKeyValue(String jsonString, String keyName) {\n        org.json.JSONObject obj = new org.json.JSONObject(jsonString);\n        Object keyValue = obj.get(keyName);\n        return keyValue;\n    }\n    // DONE.\n}\n</code></pre>\n"}],"owner":{"account_id":23582187,"reputation":1,"user_id":22372495,"display_name":"ant"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1692009256,"creation_date":1691718620,"question_id":76880247,"body_markdown":"I am new to coding with APIs and am not very experienced otherwise so I apologize if I get any terminology wrong.\r\n\r\nI was wondering if there is a way to access only the value for a header without having to parse through the whole response as a string? Is there a method where I can pass the header and receive the value associated to it if there is a header with that title already in the java.net package?\r\n\r\nThe goal would be to save the access token in a string variable so that it could be used for other API calls that require it. \r\n\r\nHere&#39;s my code;\r\n\r\n```\r\nimport java.net.URI;\r\nimport java.net.http.HttpClient;\r\nimport java.net.http.HttpRequest;\r\nimport java.net.http.HttpResponse;\r\n\r\npublic class App {\r\n    public static void main(String[] args) throws Exception {\r\n    HttpRequest request = HttpRequest.newBuilder()\r\n        .uri(URI.create(&quot;https://accounts.spotify.com/api/token&quot;))\r\n        .header(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;)\r\n        .method(&quot;POST&quot;, HttpRequest.BodyPublishers.ofString(&quot;grant_type=client_credentials&amp;client_id=[MY_ID]&amp;client_secret=[MY_SECRET]&quot;))\r\n        .build();\r\n    HttpResponse&lt;String&gt; response = HttpClient.newHttpClient().send(request, HttpResponse.BodyHandlers.ofString());\r\n    System.out.println(response.body());\r\n}\r\n```\r\n\r\nAnd I get this;\r\n\r\n```\r\n{&quot;access_token&quot;:&quot;[ACCESS_TOKEN]&quot;,&quot;token_type&quot;:&quot;Bearer&quot;,&quot;expires_in&quot;:3600}\r\n```\r\n\r\nI just want to save \\[ACCESS_TOKEN\\] into a string variable. Thanks!","title":"Is there a way to access individual header parameters from the body of a response in Java?","body":"<p>I am new to coding with APIs and am not very experienced otherwise so I apologize if I get any terminology wrong.</p>\n<p>I was wondering if there is a way to access only the value for a header without having to parse through the whole response as a string? Is there a method where I can pass the header and receive the value associated to it if there is a header with that title already in the java.net package?</p>\n<p>The goal would be to save the access token in a string variable so that it could be used for other API calls that require it.</p>\n<p>Here's my code;</p>\n<pre><code>import java.net.URI;\nimport java.net.http.HttpClient;\nimport java.net.http.HttpRequest;\nimport java.net.http.HttpResponse;\n\npublic class App {\n    public static void main(String[] args) throws Exception {\n    HttpRequest request = HttpRequest.newBuilder()\n        .uri(URI.create(&quot;https://accounts.spotify.com/api/token&quot;))\n        .header(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;)\n        .method(&quot;POST&quot;, HttpRequest.BodyPublishers.ofString(&quot;grant_type=client_credentials&amp;client_id=[MY_ID]&amp;client_secret=[MY_SECRET]&quot;))\n        .build();\n    HttpResponse&lt;String&gt; response = HttpClient.newHttpClient().send(request, HttpResponse.BodyHandlers.ofString());\n    System.out.println(response.body());\n}\n</code></pre>\n<p>And I get this;</p>\n<pre><code>{&quot;access_token&quot;:&quot;[ACCESS_TOKEN]&quot;,&quot;token_type&quot;:&quot;Bearer&quot;,&quot;expires_in&quot;:3600}\n</code></pre>\n<p>I just want to save [ACCESS_TOKEN] into a string variable. Thanks!</p>\n"},{"tags":["java","mockito"],"answers":[{"comments":[{"owner":{"account_id":21774282,"reputation":15,"user_id":16076953,"display_name":"user16076953"},"score":0,"creation_date":1692019296,"post_id":76898107,"comment_id":135565098,"body_markdown":"Thanks a lot :-) I had an error saying that the getArgument() method can&#39;t be resolved, replaced it with getArgumentAt() and now it works &#128079;","body":"Thanks a lot :-) I had an error saying that the getArgument() method can&#39;t be resolved, replaced it with getArgumentAt() and now it works 👏"},{"owner":{"account_id":5493520,"reputation":9833,"user_id":4365460,"accept_rate":90,"display_name":"Roland Weisleder"},"score":0,"creation_date":1692020465,"post_id":76898107,"comment_id":135565379,"body_markdown":"@user16076953 It looks like `getArgumentAt(..)` is only available in Mockito v1.x, so if it&#39;s possible consider to upgrade to a newer version. ;-)","body":"@user16076953 It looks like <code>getArgumentAt(..)</code> is only available in Mockito v1.x, so if it&#39;s possible consider to upgrade to a newer version. ;-)"}],"tags":[],"owner":{"account_id":5493520,"reputation":9833,"user_id":4365460,"accept_rate":90,"display_name":"Roland Weisleder"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1692008588,"creation_date":1692008588,"answer_id":76898107,"question_id":76898061,"body_markdown":"To mock all calls of `originalMethod` regardless the passed integer, you can use `anyInt()`. To call the `differentMethod` you can extract the passed integer with `invocation.getArgument(..)`. In summary it could look like this:\r\n\r\n```java\r\nwhen(mock.originalMethod(anyInt())).thenAnswer(invocation -&gt; {\r\n    int theInt = invocation.getArgument(0, int.class);\r\n    return mock.differentMethod(theInt);\r\n});\r\n```","title":"Using the parameters of the original method in the overriding method","body":"<p>To mock all calls of <code>originalMethod</code> regardless the passed integer, you can use <code>anyInt()</code>. To call the <code>differentMethod</code> you can extract the passed integer with <code>invocation.getArgument(..)</code>. In summary it could look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>when(mock.originalMethod(anyInt())).thenAnswer(invocation -&gt; {\n    int theInt = invocation.getArgument(0, int.class);\n    return mock.differentMethod(theInt);\n});\n</code></pre>\n"}],"owner":{"account_id":21774282,"reputation":15,"user_id":16076953,"display_name":"user16076953"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76898107,"answer_count":1,"score":0,"last_activity_date":1692009197,"creation_date":1692008131,"question_id":76898061,"body_markdown":"Using Mockito, I want to override the original method with a different method, using one of the parameters of the original method. So it should look something like that:\r\n\r\n    Mockito.when(mock.originalMethod(someInteger)).thenAnswer(differentMethod(someInteger));\r\n\r\nIt should work no matter what integer is passed to the original method. It&#39;s important that the same integer passed to the original method will be used in the newMethod. \r\n\r\nHow can I do that?\r\n","title":"Using the parameters of the original method in the overriding method","body":"<p>Using Mockito, I want to override the original method with a different method, using one of the parameters of the original method. So it should look something like that:</p>\n<pre><code>Mockito.when(mock.originalMethod(someInteger)).thenAnswer(differentMethod(someInteger));\n</code></pre>\n<p>It should work no matter what integer is passed to the original method. It's important that the same integer passed to the original method will be used in the newMethod.</p>\n<p>How can I do that?</p>\n"},{"tags":["java","spring-boot","security","h2"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1692009077,"post_id":76897442,"comment_id":135563111,"body_markdown":"Well ... if some hacker could get into your network or machine by some route that could evade your firewall. Or another employee who happens to be a bad actor.  And yes ... there could be hidden pitfalls (e.g. undisclosed vulnerabilities) in H2 or in other software that you have installed that mean that your assumption that nobody can access port 8000 is ill-founded.","body":"Well ... if some hacker could get into your network or machine by some route that could evade your firewall. Or another employee who happens to be a bad actor.  And yes ... there could be hidden pitfalls (e.g. undisclosed vulnerabilities) in H2 or in other software that you have installed that mean that your assumption that nobody can access port 8000 is ill-founded."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1692009297,"post_id":76897442,"comment_id":135563162,"body_markdown":"*&quot;Thanks for any hint.&quot;* - My advice would be to look for ways to patch the CVE rather than looking for ways to put it off.","body":"<i>&quot;Thanks for any hint.&quot;</i> - My advice would be to look for ways to patch the CVE rather than looking for ways to put it off."}],"answers":[{"tags":[],"owner":{"account_id":29026638,"reputation":16,"user_id":22234634,"display_name":"cedar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692008644,"creation_date":1692008644,"answer_id":76898111,"question_id":76897442,"body_markdown":"H2 Console is like any other web other application which can be hosted on a said port.\r\n\r\nAs you mentioned the default port upon which the h2 console is serving the requests (8000) is not exposed by firewall. I do not see any visible issues right now.\r\n\r\nBeing said that CVE can occur from any source of (code, network, dependency) external exposure. it is best to limit the exposure of h2 from your production application in that case.\r\n\r\nHope this helps.\r\n\r\n","title":"Are there ways to inadvertently expose the H2 Console?","body":"<p>H2 Console is like any other web other application which can be hosted on a said port.</p>\n<p>As you mentioned the default port upon which the h2 console is serving the requests (8000) is not exposed by firewall. I do not see any visible issues right now.</p>\n<p>Being said that CVE can occur from any source of (code, network, dependency) external exposure. it is best to limit the exposure of h2 from your production application in that case.</p>\n<p>Hope this helps.</p>\n"}],"owner":{"account_id":283091,"reputation":609,"user_id":580406,"accept_rate":50,"display_name":"kaidentity"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692008644,"creation_date":1692002220,"question_id":76897442,"body_markdown":"I have a question about CVE-2022-23221 (https://github.com/advisories/GHSA-45hx-wfhj-473x, \r\nhttps://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-23221).\r\nI have a Spring Boot application which uses the applicable library &quot;h2database&quot;. I cannot update the impacted lib immediately and I am looking for workaround solutions. My questions are:\r\n\r\nAccording to my research, the H2 console can by default be accessed on http port 8000. My firewall config only allows access to 80 and 443. That configuration would mean that the application is only vulnerable through yet another vuln, such as an SSRF vulnerability, for instance. My question is whether there is a possiblity that I accidentally make the console accessible by any other way that I am may not be aware of because there is no obvious connection to the console.\r\n\r\nSomething similar to the situation with JMX: Even if you avoid insecure JMX to your Java application by omitting the corresponding system properties when starting the JVM, your application is still vulnerable if someone starts the JMX-listeners programmatically in the code.\r\n\r\nSo essentially, my question is whether there exist any hidden pitfalls in the H2 DB area which would inadvertently make my app vulnerable even though the H2 console is not accessible from the outside world.\r\n\r\nThanks for any hint.\r\n\r\n\r\n","title":"Are there ways to inadvertently expose the H2 Console?","body":"<p>I have a question about CVE-2022-23221 (<a href=\"https://github.com/advisories/GHSA-45hx-wfhj-473x\" rel=\"nofollow noreferrer\">https://github.com/advisories/GHSA-45hx-wfhj-473x</a>,\n<a href=\"https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-23221\" rel=\"nofollow noreferrer\">https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-23221</a>).\nI have a Spring Boot application which uses the applicable library &quot;h2database&quot;. I cannot update the impacted lib immediately and I am looking for workaround solutions. My questions are:</p>\n<p>According to my research, the H2 console can by default be accessed on http port 8000. My firewall config only allows access to 80 and 443. That configuration would mean that the application is only vulnerable through yet another vuln, such as an SSRF vulnerability, for instance. My question is whether there is a possiblity that I accidentally make the console accessible by any other way that I am may not be aware of because there is no obvious connection to the console.</p>\n<p>Something similar to the situation with JMX: Even if you avoid insecure JMX to your Java application by omitting the corresponding system properties when starting the JVM, your application is still vulnerable if someone starts the JMX-listeners programmatically in the code.</p>\n<p>So essentially, my question is whether there exist any hidden pitfalls in the H2 DB area which would inadvertently make my app vulnerable even though the H2 console is not accessible from the outside world.</p>\n<p>Thanks for any hint.</p>\n"},{"tags":["java","apache-kafka","kafka-producer-api"],"comments":[{"owner":{"account_id":11561699,"reputation":4182,"user_id":8471208,"display_name":"Kevin Boone"},"score":0,"creation_date":1600783534,"post_id":64010696,"comment_id":113192833,"body_markdown":"I don&#39;t think this is possible just using simple configuration, although it&#39;s a feature people keep asking for. The usual suggestion is to add a connection callback (https://docs.confluent.io/current/clients/librdkafka/rdkafka_8h.html#a53dd1b77019324170d0168617fdaf040) and then call `setsockopt()` on the connection socket. Although this ought to work in principle, I confess I haven&#39;t tried it.","body":"I don&#39;t think this is possible just using simple configuration, although it&#39;s a feature people keep asking for. The usual suggestion is to add a connection callback (<a href=\"https://docs.confluent.io/current/clients/librdkafka/rdkafka_8h.html#a53dd1b77019324170d0168617fdaf040\" rel=\"nofollow noreferrer\">docs.confluent.io/current/clients/librdkafka/&hellip;</a>) and then call <code>setsockopt()</code> on the connection socket. Although this ought to work in principle, I confess I haven&#39;t tried it."},{"owner":{"account_id":2790946,"reputation":444,"user_id":2401191,"display_name":"Ahmad Alhilal"},"score":0,"creation_date":1601281380,"post_id":64010696,"comment_id":113347422,"body_markdown":"Is there any way I can track the source port of Kafka producer? I need to track the bandwidth of kafka producers and consumers.","body":"Is there any way I can track the source port of Kafka producer? I need to track the bandwidth of kafka producers and consumers."},{"owner":{"account_id":11561699,"reputation":4182,"user_id":8471208,"display_name":"Kevin Boone"},"score":0,"creation_date":1601281432,"post_id":64010696,"comment_id":113347454,"body_markdown":"Use `netstat` ?","body":"Use <code>netstat</code> ?"},{"owner":{"account_id":2790946,"reputation":444,"user_id":2401191,"display_name":"Ahmad Alhilal"},"score":0,"creation_date":1601282208,"post_id":64010696,"comment_id":113347792,"body_markdown":"I mean, if I have dozens of producers running, can I track which producer is using a specific port, and its bandwidth?\n\nI used iftop, which shows the producers&#39; connections are consuming very heterogenous bandwith, with difference, e.g.,  from 2Mbps to 1Kbps.","body":"I mean, if I have dozens of producers running, can I track which producer is using a specific port, and its bandwidth?  I used iftop, which shows the producers&#39; connections are consuming very heterogenous bandwith, with difference, e.g.,  from 2Mbps to 1Kbps."},{"owner":{"account_id":11561699,"reputation":4182,"user_id":8471208,"display_name":"Kevin Boone"},"score":0,"creation_date":1601287197,"post_id":64010696,"comment_id":113350092,"body_markdown":"I&#39;m sorry, I don&#39;t know how to handle that situation. At the network level, all the producers are going to look the same.","body":"I&#39;m sorry, I don&#39;t know how to handle that situation. At the network level, all the producers are going to look the same."}],"answers":[{"comments":[{"owner":{"account_id":2790946,"reputation":444,"user_id":2401191,"display_name":"Ahmad Alhilal"},"score":0,"creation_date":1601281192,"post_id":64014718,"comment_id":113347338,"body_markdown":"Is there any way I can track the source port of Kafka producer?\nI need to track the bandwidth of kafka producers and consumers.","body":"Is there any way I can track the source port of Kafka producer? I need to track the bandwidth of kafka producers and consumers."},{"owner":{"account_id":11561699,"reputation":4182,"user_id":8471208,"display_name":"Kevin Boone"},"score":1,"creation_date":1601287564,"post_id":64014718,"comment_id":113350278,"body_markdown":"@OneCricketeer -- This isn&#39;t (I think) about inbound sockets. It&#39;s about setting a source IP and port on an _outbound_ socket. This is a legitimate operation, but one that the Kafka client (so far as I know) does not expose to users.","body":"@OneCricketeer -- This isn&#39;t (I think) about inbound sockets. It&#39;s about setting a source IP and port on an <i>outbound</i> socket. This is a legitimate operation, but one that the Kafka client (so far as I know) does not expose to users."},{"owner":{"account_id":2790946,"reputation":444,"user_id":2401191,"display_name":"Ahmad Alhilal"},"score":0,"creation_date":1601299075,"post_id":64014718,"comment_id":113355698,"body_markdown":"Exactly. Set socket address of an outbound socket.","body":"Exactly. Set socket address of an outbound socket."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1601305075,"post_id":64014718,"comment_id":113358841,"body_markdown":"@Ahmad As mentioned, `bootstrap.servers` is the only network information youre going to get. If you want to inspect TCP traffic on the server side, then you could add a client-id to each producer, then do extra packet inspection to see who sent what, otherwise Kafka producers expose JMX metrics for seeing much much data is being sent","body":"@Ahmad As mentioned, <code>bootstrap.servers</code> is the only network information youre going to get. If you want to inspect TCP traffic on the server side, then you could add a client-id to each producer, then do extra packet inspection to see who sent what, otherwise Kafka producers expose JMX metrics for seeing much much data is being sent"}],"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1600795216,"creation_date":1600795216,"answer_id":64014718,"question_id":64010696,"body_markdown":"Producers don&#39;t open inbound sockets, so there is no binding of a &quot;source port&quot;. \r\n\r\nThe only network information you must provide is `bootstrap.servers`","title":"Can we assign a source port for Kafka Producer?","body":"<p>Producers don't open inbound sockets, so there is no binding of a &quot;source port&quot;.</p>\n<p>The only network information you must provide is <code>bootstrap.servers</code></p>\n"},{"tags":[],"owner":{"account_id":27575180,"reputation":1,"user_id":21045562,"display_name":"Robin dubey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692007588,"creation_date":1692007099,"answer_id":76897960,"question_id":64010696,"body_markdown":"To achieve this you can use something called a socket_cb() in librdKafka library\r\n(I was using 2.0.2 version).\r\nTo achieve this u need to set\r\n\r\nRdkadka::Conf* globalConf = Rdkafka::Conf::create(Rdkafka::Conf::CONF_GLOBAL)\r\n\r\nglobalConf-&gt;set(&quot;socket_cb&quot;, static_cast&lt;RdKafka::EventCb*&gt;(this), errstr);\r\n\r\nAnd now rewrite the socket_cb() function\r\n1. getaddrinfo() //gives list of address structure\r\n2. socket() to get the the FD\r\n3. bind to the selected FD\r\n\r\nthis should solve the above issue.","title":"Can we assign a source port for Kafka Producer?","body":"<p>To achieve this you can use something called a socket_cb() in librdKafka library\n(I was using 2.0.2 version).\nTo achieve this u need to set</p>\n<p>Rdkadka::Conf* globalConf = Rdkafka::Conf::create(Rdkafka::Conf::CONF_GLOBAL)</p>\n<p>globalConf-&gt;set(&quot;socket_cb&quot;, static_castRdKafka::EventCb*(this), errstr);</p>\n<p>And now rewrite the socket_cb() function</p>\n<ol>\n<li>getaddrinfo() //gives list of address structure</li>\n<li>socket() to get the the FD</li>\n<li>bind to the selected FD</li>\n</ol>\n<p>this should solve the above issue.</p>\n"}],"owner":{"account_id":2790946,"reputation":444,"user_id":2401191,"display_name":"Ahmad Alhilal"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":481,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1692007588,"creation_date":1600780965,"question_id":64010696,"body_markdown":"I noticed that Kafka Producer uses tcp protocol.\r\n\r\nIs there any way to fix the source ports of the multiple Kafka producers in advance?\r\nOr at least, Is there any way I can track the source port of Kafka producer?\r\nI need to track the bandwidth of kafka producers and consumers.\r\nAnd need to set up traffic control (tc) rules according to these ports. \r\n\r\n ","title":"Can we assign a source port for Kafka Producer?","body":"<p>I noticed that Kafka Producer uses tcp protocol.</p>\n<p>Is there any way to fix the source ports of the multiple Kafka producers in advance?\nOr at least, Is there any way I can track the source port of Kafka producer?\nI need to track the bandwidth of kafka producers and consumers.\nAnd need to set up traffic control (tc) rules according to these ports.</p>\n"},{"tags":["java","kubernetes","mac-address"],"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":6,"creation_date":1691996607,"post_id":76896828,"comment_id":135560796,"body_markdown":"You can&#39;t. MAC addresses only exist in a local network. You cannot query MAC addresses from outside your local network.","body":"You can&#39;t. MAC addresses only exist in a local network. You cannot query MAC addresses from outside your local network."},{"owner":{"account_id":298566,"reputation":537,"user_id":604656,"accept_rate":47,"display_name":"ashish.g"},"score":1,"creation_date":1691996721,"post_id":76896828,"comment_id":135560806,"body_markdown":"Why do you need the MAC address of the requestor? You may want to reconsider your use case. Almost always you won&#39;t be able to see the mac address of the device where the request originated.","body":"Why do you need the MAC address of the requestor? You may want to reconsider your use case. Almost always you won&#39;t be able to see the mac address of the device where the request originated."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1691999569,"post_id":76896828,"comment_id":135561294,"body_markdown":"Do you need the MAC address of the client that sent the request or of the server interface that received it?","body":"Do you need the MAC address of the client that sent the request or of the server interface that received it?"},{"owner":{"account_id":16961433,"reputation":5,"user_id":12268488,"display_name":"yameng chen"},"score":0,"creation_date":1692000234,"post_id":76896828,"comment_id":135561423,"body_markdown":"@cyberbrain  i just need the mac address of request. do you have any idea?","body":"@cyberbrain  i just need the mac address of request. do you have any idea?"},{"owner":{"account_id":16961433,"reputation":5,"user_id":12268488,"display_name":"yameng chen"},"score":0,"creation_date":1692000320,"post_id":76896828,"comment_id":135561437,"body_markdown":"@knittl okkk, thanks for your reply","body":"@knittl okkk, thanks for your reply"},{"owner":{"account_id":16961433,"reputation":5,"user_id":12268488,"display_name":"yameng chen"},"score":0,"creation_date":1692000359,"post_id":76896828,"comment_id":135561442,"body_markdown":"@ashish.g ok, thanks for your time.","body":"@ashish.g ok, thanks for your time."},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1692000512,"post_id":76896828,"comment_id":135561467,"body_markdown":"The real question is: _why_ do you need this information? What are you going to do with the MAC address?","body":"The real question is: <i>why</i> do you need this information? What are you going to do with the MAC address?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1692002917,"post_id":76896828,"comment_id":135561957,"body_markdown":"Are you aware that (1) MAC addresses are only unique within the subnet? (2) MAC address can usually be changed by the user? so therefore (3) MAC address is not a reliable unique identifier for anything other than the purpose for which it was devised?","body":"Are you aware that (1) MAC addresses are only unique within the subnet? (2) MAC address can usually be changed by the user? so therefore (3) MAC address is not a reliable unique identifier for anything other than the purpose for which it was devised?"}],"answers":[{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692007354,"creation_date":1692007354,"answer_id":76897985,"question_id":76896828,"body_markdown":"As you want to read the MAC address of &quot;the user&quot; on the login, I suppose you mean the MAC address of the network interface that is used in the client machine to establish the network connection to the server.\r\n\r\nUnfortunately this is not possible, because the networking stack that the internet protocol (IP) uses, keeps this information only for the local network. This doesn&#39;t even mean for the whole LAN, but only for the network segement a machine is directly connected to, so you can find the MAC address only for IP addresses that can be reached without using the configured &quot;gateway&quot;.\r\n\r\nOnly for those IP addresses you could use the mentioned `arp` tool (ARP = address resolution protocol).\r\n\r\nFor all other addresses this information is not kept in the network packages.\r\n\r\nBut on the other hand it&#39;s good for you: The MAC address can easily be faked (this means that you can set any MAC address for any of your network interfaces if you know what to do, sometimes even the device drivers in Windows provide a nice UI for that...), so it is a very bad idea to rely on such information for a login.\r\n\r\nMaybe a better solution would be to rely on a properly set up network infrastructure and limit the range of the allowed incoming IP addresses. While it&#39;s also not hard to fake the senders IP address in a network package, it is not useful for a login procedure because that usually needs an answer, and with a faked sender address, the answer will never reach the original sender.","title":"How to get the Mac address in k8s?","body":"<p>As you want to read the MAC address of &quot;the user&quot; on the login, I suppose you mean the MAC address of the network interface that is used in the client machine to establish the network connection to the server.</p>\n<p>Unfortunately this is not possible, because the networking stack that the internet protocol (IP) uses, keeps this information only for the local network. This doesn't even mean for the whole LAN, but only for the network segement a machine is directly connected to, so you can find the MAC address only for IP addresses that can be reached without using the configured &quot;gateway&quot;.</p>\n<p>Only for those IP addresses you could use the mentioned <code>arp</code> tool (ARP = address resolution protocol).</p>\n<p>For all other addresses this information is not kept in the network packages.</p>\n<p>But on the other hand it's good for you: The MAC address can easily be faked (this means that you can set any MAC address for any of your network interfaces if you know what to do, sometimes even the device drivers in Windows provide a nice UI for that...), so it is a very bad idea to rely on such information for a login.</p>\n<p>Maybe a better solution would be to rely on a properly set up network infrastructure and limit the range of the allowed incoming IP addresses. While it's also not hard to fake the senders IP address in a network package, it is not useful for a login procedure because that usually needs an answer, and with a faked sender address, the answer will never reach the original sender.</p>\n"}],"owner":{"account_id":16961433,"reputation":5,"user_id":12268488,"display_name":"yameng chen"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":131,"favorite_count":0,"down_vote_count":5,"up_vote_count":1,"answer_count":1,"score":-4,"last_activity_date":1692007354,"creation_date":1691995656,"question_id":76896828,"body_markdown":"I need to restrict the user&#39;s login based on their mac address,and I have deployed the project inside k8s, but there is a problem that I cannot get the mac address of the client. \r\n\r\nI&#39;ve tried these:\r\n1. ```Enumeration&lt;NetworkInterface&gt; networkInterfaces = NetworkInterface.getNetworkInterfaces();``` However, this method can only obtain the mac address of the server, not the mac address of the client.\r\n2. use &#39;arp -a ipaddress&#39;, because the project is deployed in k8s, you also cannot get the client&#39;s mac address\r\n\r\nSo, how can I get the mac address of the client?\r\nthanks a lot.","title":"How to get the Mac address in k8s?","body":"<p>I need to restrict the user's login based on their mac address,and I have deployed the project inside k8s, but there is a problem that I cannot get the mac address of the client.</p>\n<p>I've tried these:</p>\n<ol>\n<li><code>Enumeration&lt;NetworkInterface&gt; networkInterfaces = NetworkInterface.getNetworkInterfaces();</code> However, this method can only obtain the mac address of the server, not the mac address of the client.</li>\n<li>use 'arp -a ipaddress', because the project is deployed in k8s, you also cannot get the client's mac address</li>\n</ol>\n<p>So, how can I get the mac address of the client?\nthanks a lot.</p>\n"},{"tags":["java","serialization"],"comments":[{"owner":{"account_id":1597725,"reputation":34231,"user_id":1479414,"accept_rate":71,"display_name":"Andremoniy"},"score":0,"creation_date":1452677954,"post_id":34763034,"comment_id":57271239,"body_markdown":"What values do you receive after serialization?","body":"What values do you receive after serialization?"},{"owner":{"account_id":7593326,"reputation":348,"user_id":5760254,"display_name":"botem"},"score":0,"creation_date":1452678054,"post_id":34763034,"comment_id":57271316,"body_markdown":"long, int, short, byte, float, double ... normal values.","body":"long, int, short, byte, float, double ... normal values."},{"owner":{"account_id":1597725,"reputation":34231,"user_id":1479414,"accept_rate":71,"display_name":"Andremoniy"},"score":0,"creation_date":1452678213,"post_id":34763034,"comment_id":57271430,"body_markdown":"No, question is about which exactly bytes do you receive output?","body":"No, question is about which exactly bytes do you receive output?"},{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1452678412,"post_id":34763034,"comment_id":57271588,"body_markdown":"How do you serialize it now? And what does that produce instead of the expected output?","body":"How do you serialize it now? And what does that produce instead of the expected output?"},{"owner":{"account_id":7593326,"reputation":348,"user_id":5760254,"display_name":"botem"},"score":0,"creation_date":1452678455,"post_id":34763034,"comment_id":57271620,"body_markdown":"my server receive bytes data. but I don&#39;t have sample. I just want to know how to make the object compact byte array","body":"my server receive bytes data. but I don&#39;t have sample. I just want to know how to make the object compact byte array"},{"owner":{"account_id":7593326,"reputation":348,"user_id":5760254,"display_name":"botem"},"score":0,"creation_date":1452678559,"post_id":34763034,"comment_id":57271711,"body_markdown":"I check each byte and split bytes are enough","body":"I check each byte and split bytes are enough"}],"answers":[{"tags":[],"owner":{"account_id":1293274,"reputation":2686,"user_id":1244949,"display_name":"WalterM"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1452678556,"creation_date":1452678556,"answer_id":34763308,"question_id":34763034,"body_markdown":"If you want a byte array you can do this. However if you are using something like DataOutputStream it&#39;s best to just call writeInt, writeShort, ...\r\n\r\n    A a = new A();\r\n    a.a = 3;\r\n    a.b = 0x02;\r\n    a.c = 15;\r\n\r\n    ByteBuffer bb = ByteBuffer.allocate(7).order(ByteOrder.BIG_ENDIAN);\r\n    bb.putShort(a.a).put(a.b).putInt(a.c).flip();\r\n    byte[] buffer = bb.array();\r\n    for (byte b : buffer)\r\n        System.out.printf(&quot;%02X &quot;, b);","title":"How to Serialize object to byte array with compact bytes in java","body":"<p>If you want a byte array you can do this. However if you are using something like DataOutputStream it's best to just call writeInt, writeShort, ...</p>\n\n<pre><code>A a = new A();\na.a = 3;\na.b = 0x02;\na.c = 15;\n\nByteBuffer bb = ByteBuffer.allocate(7).order(ByteOrder.BIG_ENDIAN);\nbb.putShort(a.a).put(a.b).putInt(a.c).flip();\nbyte[] buffer = bb.array();\nfor (byte b : buffer)\n    System.out.printf(\"%02X \", b);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1683634,"reputation":7046,"user_id":1547337,"display_name":"dejvuth"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1452686947,"creation_date":1452686947,"answer_id":34766342,"question_id":34763034,"body_markdown":"You can use reflection to get all [`fields`](https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/Field.html) in the class, and loop them to convert to an array of bytes.\r\n\r\nIf all your fields are [`Number`](https://docs.oracle.com/javase/8/docs/api/java/lang/Number.html) (i.e. not references nor `boolean`), you can convert and collect them to a `List` of `Byte` as follows:\r\n\r\n    List&lt;Byte&gt; list = new ArrayList&lt;&gt;();\r\n    for (Field field : A.class.getDeclaredFields()) {\r\n        // Do something else if field is not a Number\r\n        // ...\r\n\r\n        // Otherwise, convert and collect into list\r\n\t\tNumber n = (Number) field.get(a);\r\n\t\tint size = n.getClass().getDeclaredField(&quot;BYTES&quot;).getInt(null);\r\n\t\tIntStream.range(0, size)\r\n\t\t\t.mapToObj(i -&gt; (byte) (n.longValue() &gt;&gt; 8*(size-i-1)))\r\n\t\t\t.forEach(b -&gt; list.add(b));\r\n    }","title":"How to Serialize object to byte array with compact bytes in java","body":"<p>You can use reflection to get all <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/Field.html\" rel=\"nofollow\"><code>fields</code></a> in the class, and loop them to convert to an array of bytes.</p>\n\n<p>If all your fields are <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Number.html\" rel=\"nofollow\"><code>Number</code></a> (i.e. not references nor <code>boolean</code>), you can convert and collect them to a <code>List</code> of <code>Byte</code> as follows:</p>\n\n<pre><code>List&lt;Byte&gt; list = new ArrayList&lt;&gt;();\nfor (Field field : A.class.getDeclaredFields()) {\n    // Do something else if field is not a Number\n    // ...\n\n    // Otherwise, convert and collect into list\n    Number n = (Number) field.get(a);\n    int size = n.getClass().getDeclaredField(\"BYTES\").getInt(null);\n    IntStream.range(0, size)\n        .mapToObj(i -&gt; (byte) (n.longValue() &gt;&gt; 8*(size-i-1)))\n        .forEach(b -&gt; list.add(b));\n}\n</code></pre>\n"}],"owner":{"account_id":7593326,"reputation":348,"user_id":5760254,"display_name":"botem"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":775,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":34763308,"answer_count":2,"score":0,"last_activity_date":1692007122,"creation_date":1452677848,"question_id":34763034,"body_markdown":"For example, I have a class that has short, byte, int type member variable.\r\n    \r\n    class A{\r\n        short a;\r\n        byte b;\r\n        int c;\r\n    }\r\n\r\nIf I serialize or convert to byte array, the Array is unexpected value.\r\n\r\nif values like,\r\n\r\n    A a = new A();\r\n    a.a = 3;\r\n    a.b = 0x02;\r\n    a.c = 15;\r\n\r\nthen, I expect its bytes as,\r\n \r\n    00 03 02 00 00 00 0F\r\n\r\nSo... How to Serialize Object like that?\r\n\r\nIt needs my socket server... other language ","title":"How to Serialize object to byte array with compact bytes in java","body":"<p>For example, I have a class that has short, byte, int type member variable.</p>\n\n<pre><code>class A{\n    short a;\n    byte b;\n    int c;\n}\n</code></pre>\n\n<p>If I serialize or convert to byte array, the Array is unexpected value.</p>\n\n<p>if values like,</p>\n\n<pre><code>A a = new A();\na.a = 3;\na.b = 0x02;\na.c = 15;\n</code></pre>\n\n<p>then, I expect its bytes as,</p>\n\n<pre><code>00 03 02 00 00 00 0F\n</code></pre>\n\n<p>So... How to Serialize Object like that?</p>\n\n<p>It needs my socket server... other language </p>\n"},{"tags":["java","arraylist","java-stream","spring-webflux"],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692007118,"creation_date":1692007118,"answer_id":76897963,"question_id":76897615,"body_markdown":"Unlike some NoSQL databases, relational databases are usually not reactive. You can call `Flux.fromIterable`, but that still gives you a list as intermediate. You could try letting the method return `Stream&lt;EmployeeDO&gt;` instead of `List&lt;EmployeeDO&gt;` and call `Flux.fromStream`, but depending on the database implementation this may not give any performance improvements (it may collect to a list internally).\r\n\r\nThere are some wrappers that let you return `Mono&lt;EmployeeDO&gt;` and `Flux&lt;EmployeeDO&gt;` directly from the repository, but as long as the database itself is not reactive this will still not be fully reactive.\r\n\r\n\r\nAs for the multiple stream operations, you should consider a custom collector that collects all information in one go. `IntSummaryStatistics` is an example where the JDK itself has built-in support, but it&#39;s not that hard to create a class + collector like that yourself.","title":"Java-17 Spring Webflux - Java Streaming elements inside arraylist","body":"<p>Unlike some NoSQL databases, relational databases are usually not reactive. You can call <code>Flux.fromIterable</code>, but that still gives you a list as intermediate. You could try letting the method return <code>Stream&lt;EmployeeDO&gt;</code> instead of <code>List&lt;EmployeeDO&gt;</code> and call <code>Flux.fromStream</code>, but depending on the database implementation this may not give any performance improvements (it may collect to a list internally).</p>\n<p>There are some wrappers that let you return <code>Mono&lt;EmployeeDO&gt;</code> and <code>Flux&lt;EmployeeDO&gt;</code> directly from the repository, but as long as the database itself is not reactive this will still not be fully reactive.</p>\n<p>As for the multiple stream operations, you should consider a custom collector that collects all information in one go. <code>IntSummaryStatistics</code> is an example where the JDK itself has built-in support, but it's not that hard to create a class + collector like that yourself.</p>\n"}],"owner":{"account_id":1703086,"reputation":9,"user_id":1562707,"display_name":"Senthilkumar P"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692007118,"creation_date":1692003828,"question_id":76897615,"body_markdown":"Currently am working on Java-17 Spring Webflux and Spring Data JPA\r\n    \r\nbasically am retrieving data from DB through repository class and doing summing, averaging calculations inn serviceImpl class. So, the flow goes like below,\r\n    \r\n**Entity Class**\r\n    \r\n    @Data\r\n    @AllArgsConstructor\r\n    @Builder\r\n    @NoArgsConstructor\r\n    @Entity\r\n    @Table(name = &quot;Employee&quot;)\r\n    public class EmployeeDO implements Serializable {\r\n    \r\n        @Serial\r\n        private static final long serialVersionUID = 1L;\r\n    \r\n        @Id\r\n        @Column(name = &quot;EMPLOYEE_ID&quot;)\r\n        private int employeeId;\r\n    \r\n        @Column(name = &quot;DATE&quot;)\r\n        private LocalDate date;\r\n    \r\n        @Column(name = &quot;DEPT_ID&quot;)\r\n        private int deptId;\r\n    \r\n        @Column(name = &quot;NUMBER_OF_DAYS&quot;)\r\n        private String numberOfDays;\r\n    \r\n        @Column(name = &quot;TOTAL_HOURS&quot;)\r\n        private String totalHours;\r\n    \r\n        @Column(name = &quot;TOTAL_MANPOWER&quot;)\r\n        private String totalManpower;\r\n    \r\n        @Column(name = &quot;TOTAL_WAGES&quot;)\r\n        private String totalWages;\r\n    \r\n        @Column(name = &quot;NUMBER_OF_ITEMS&quot;)\r\n        private String numberOfItems;\r\n\r\n** Repository Class ** \r\n    \r\n    @Query(&quot;FROM EmployeeDO e WHERE e.deptId =:deptId and e.date =:date ORDER BY e.date ASC&quot;)\r\n    List&lt;EmployeeDO&gt; getEmployeeRec(@Param(&quot;deptId&quot;) int deptId,\r\n    @Param(&quot;date&quot;) int date);\r\n\r\n** Service Impl class **\r\n\r\n    var empList = employeeDao.getEmployeeRec(100, &#39;2023-08-14&#39;);\r\n    var avgNumberOdDays = empList.stream().mapToDouble(empList::getNumberOfDays)\r\n    .sum();\r\n    var avgTotalHours = empList.stream().mapToDouble(empList::getTotalHours)\r\n    .average();\r\n    var avgTotalManpower = empList.stream().mapToDouble(empList::getTotalManpower)\r\n    .sum();\r\n    var avgTotakwages = empList.stream().mapToDouble(empList::getTotalWages)\r\n    .average();\r\n    \t\t\t \r\n   \r\nNeed to avoid Streaming to each element and Streaming should be more efficient way. Any best approach&#39;s from Java or Webflux to Stream whole ArrayList one time and doing the calculation. Thanks.\r\n\r\n","title":"Java-17 Spring Webflux - Java Streaming elements inside arraylist","body":"<p>Currently am working on Java-17 Spring Webflux and Spring Data JPA</p>\n<p>basically am retrieving data from DB through repository class and doing summing, averaging calculations inn serviceImpl class. So, the flow goes like below,</p>\n<p><strong>Entity Class</strong></p>\n<pre><code>@Data\n@AllArgsConstructor\n@Builder\n@NoArgsConstructor\n@Entity\n@Table(name = &quot;Employee&quot;)\npublic class EmployeeDO implements Serializable {\n\n    @Serial\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @Column(name = &quot;EMPLOYEE_ID&quot;)\n    private int employeeId;\n\n    @Column(name = &quot;DATE&quot;)\n    private LocalDate date;\n\n    @Column(name = &quot;DEPT_ID&quot;)\n    private int deptId;\n\n    @Column(name = &quot;NUMBER_OF_DAYS&quot;)\n    private String numberOfDays;\n\n    @Column(name = &quot;TOTAL_HOURS&quot;)\n    private String totalHours;\n\n    @Column(name = &quot;TOTAL_MANPOWER&quot;)\n    private String totalManpower;\n\n    @Column(name = &quot;TOTAL_WAGES&quot;)\n    private String totalWages;\n\n    @Column(name = &quot;NUMBER_OF_ITEMS&quot;)\n    private String numberOfItems;\n</code></pre>\n<p>** Repository Class **</p>\n<pre><code>@Query(&quot;FROM EmployeeDO e WHERE e.deptId =:deptId and e.date =:date ORDER BY e.date ASC&quot;)\nList&lt;EmployeeDO&gt; getEmployeeRec(@Param(&quot;deptId&quot;) int deptId,\n@Param(&quot;date&quot;) int date);\n</code></pre>\n<p>** Service Impl class **</p>\n<pre><code>var empList = employeeDao.getEmployeeRec(100, '2023-08-14');\nvar avgNumberOdDays = empList.stream().mapToDouble(empList::getNumberOfDays)\n.sum();\nvar avgTotalHours = empList.stream().mapToDouble(empList::getTotalHours)\n.average();\nvar avgTotalManpower = empList.stream().mapToDouble(empList::getTotalManpower)\n.sum();\nvar avgTotakwages = empList.stream().mapToDouble(empList::getTotalWages)\n.average();\n             \n</code></pre>\n<p>Need to avoid Streaming to each element and Streaming should be more efficient way. Any best approach's from Java or Webflux to Stream whole ArrayList one time and doing the calculation. Thanks.</p>\n"},{"tags":["java","web-services","cxf"],"owner":{"account_id":24745023,"reputation":81,"user_id":18631324,"display_name":"SereneAtk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1692006810,"creation_date":1692006810,"question_id":76897929,"body_markdown":"I have simple cxf client and trying to write simple unit test. For now I am not intereseted in integration test thats why I mock my service.\r\n\r\nIn service implementation I need to get its current url:\r\n\r\n    (String) ((BindingProvider) myService).getRequestContext().get(BindingProvider.ENDPOINT_ADDRESS_PROPERTY)\r\n\r\n\r\nAnd this line causes classcast: : \r\n\r\n&gt;  java.lang.ClassCastException: class\r\n&gt; xxx.MyService$MockitoMock$9v45s0v6 cannot be cast to class\r\n&gt; javax.xml.ws.BindingProvider (xxx.MyService$MockitoMock$9v45s0v6)\r\n\r\n \r\n\r\nBecause in unit test I am using:\r\n   \r\n    @Mock\r\n        private MyService myService ;\r\n \r\n And MyService class is CXF generated client. How to create a simplest mock of it that would also be a BindingProvicer instance? In runtime everything works fine, when application is deployed, myService is always BindingProvider instance - the CXF library creates it but I don&#39;t know how.","title":"Cxf client JUnit: java.lang.ClassCastException: class MyService$MockitoMock$9v45s0v6 cannot be cast to class javax.xml.ws.BindingProvider","body":"<p>I have simple cxf client and trying to write simple unit test. For now I am not intereseted in integration test thats why I mock my service.</p>\n<p>In service implementation I need to get its current url:</p>\n<pre><code>(String) ((BindingProvider) myService).getRequestContext().get(BindingProvider.ENDPOINT_ADDRESS_PROPERTY)\n</code></pre>\n<p>And this line causes classcast: :</p>\n<blockquote>\n<p>java.lang.ClassCastException: class\nxxx.MyService$MockitoMock$9v45s0v6 cannot be cast to class\njavax.xml.ws.BindingProvider (xxx.MyService$MockitoMock$9v45s0v6)</p>\n</blockquote>\n<p>Because in unit test I am using:</p>\n<pre><code>@Mock\n    private MyService myService ;\n</code></pre>\n<p>And MyService class is CXF generated client. How to create a simplest mock of it that would also be a BindingProvicer instance? In runtime everything works fine, when application is deployed, myService is always BindingProvider instance - the CXF library creates it but I don't know how.</p>\n"},{"tags":["java","spring-boot","graphql","spring-graphql"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690876079,"post_id":76809497,"comment_id":135410434,"body_markdown":"Don&#39;t you need to annotate that controller method with something like `@PostMapping(&quot;graphql&quot;)`?","body":"Don&#39;t you need to annotate that controller method with something like <code>@PostMapping(&quot;graphql&quot;)</code>?"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690876175,"post_id":76809497,"comment_id":135410444,"body_markdown":"And are you sure that Postman is set to use HTTP POST?","body":"And are you sure that Postman is set to use HTTP POST?"},{"owner":{"account_id":13383913,"reputation":19,"user_id":9658381,"display_name":"Abhishek"},"score":0,"creation_date":1690888292,"post_id":76809497,"comment_id":135412945,"body_markdown":"Jorn, Yes I am using POST request and I don&#39;t think i need @postmapping. since it should be autoconfigured from spring-boot-starter-graphql dependency","body":"Jorn, Yes I am using POST request and I don&#39;t think i need @postmapping. since it should be autoconfigured from spring-boot-starter-graphql dependency"}],"answers":[{"comments":[{"owner":{"account_id":13383913,"reputation":19,"user_id":9658381,"display_name":"Abhishek"},"score":0,"creation_date":1690888365,"post_id":76809569,"comment_id":135412964,"body_markdown":"I am using POST method and getting this issue. Sorry i didn&#39;t mentioned method in my question","body":"I am using POST method and getting this issue. Sorry i didn&#39;t mentioned method in my question"}],"tags":[],"owner":{"account_id":18641618,"reputation":1,"user_id":13587235,"display_name":"Rohan Pandya"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691207615,"creation_date":1690876628,"answer_id":76809569,"question_id":76809497,"body_markdown":"By default, GraphQL queries should be sent as a POST request, not a GET request. When you try to access the `/graphql` endpoint using a GET request, it&#39;s likely to return a 405 error since the endpoint is configured to handle only POST requests.\r\n\r\nIn Postman, set HTTP method to POST. In the request body, provide your GraphQL query in JSON format for example:\r\n\r\n\r\n    {\r\n      &quot;query&quot;: &quot;{ phoneNumber(phoneNumber: \\&quot;yourPhoneNumber\\&quot;) { /* fields you want to retrieve */ } }&quot;\r\n    }\r\n\r\n","title":"GraphQL error : Method not allowed error for GraphQL requests with Spring 3.1.1","body":"<p>By default, GraphQL queries should be sent as a POST request, not a GET request. When you try to access the <code>/graphql</code> endpoint using a GET request, it's likely to return a 405 error since the endpoint is configured to handle only POST requests.</p>\n<p>In Postman, set HTTP method to POST. In the request body, provide your GraphQL query in JSON format for example:</p>\n<pre><code>{\n  &quot;query&quot;: &quot;{ phoneNumber(phoneNumber: \\&quot;yourPhoneNumber\\&quot;) { /* fields you want to retrieve */ } }&quot;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13383913,"reputation":19,"user_id":9658381,"display_name":"Abhishek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692006657,"creation_date":1692006657,"answer_id":76897908,"question_id":76809497,"body_markdown":"After going through all documentation and other resources. I was able to find the bug in latest spring upgrade for graphql.\r\n1. graphql schemas needs to be in src/main/resources/graphql/\r\n2. If there is an any API existing with GET method where it take single variable as path variable then default graphql request will be sent to that api and api throw 405 as response. This is some kind of bug we found after upgrading to spring-boot 3x.\r\nOnly way to solve this issue is provide unique URI for graphql and providing that path in application.yml. in my case default /graphql endpoint changed to /query/graphql after updatin yml file as spring.graphql.path : /query/graphql","title":"GraphQL error : Method not allowed error for GraphQL requests with Spring 3.1.1","body":"<p>After going through all documentation and other resources. I was able to find the bug in latest spring upgrade for graphql.</p>\n<ol>\n<li>graphql schemas needs to be in src/main/resources/graphql/</li>\n<li>If there is an any API existing with GET method where it take single variable as path variable then default graphql request will be sent to that api and api throw 405 as response. This is some kind of bug we found after upgrading to spring-boot 3x.\nOnly way to solve this issue is provide unique URI for graphql and providing that path in application.yml. in my case default /graphql endpoint changed to /query/graphql after updatin yml file as spring.graphql.path : /query/graphql</li>\n</ol>\n"}],"owner":{"account_id":13383913,"reputation":19,"user_id":9658381,"display_name":"Abhishek"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":224,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76897908,"answer_count":2,"score":0,"last_activity_date":1692006657,"creation_date":1690876007,"question_id":76809497,"body_markdown":"I have upgraded spring boot to 3.1.1 and I am getting 405 method not allowed for graphql call. I tried all the known options.\r\npom.xml\r\n```&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-graphql&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\nclass\r\n```\r\n@Controller\r\n\r\npublic class DemoGraphQLResolver {\r\n\r\n\r\n\r\n  @QueryMapping(name = &quot;phoneNumber&quot;)\r\n  public List&lt;Party&gt; phoneNumber(@Argument String phoneNumber) {\r\n    return phoneNumber;\r\n  }\r\n}\r\n```\r\n\r\nI have .graphqls file under src/main/resources/graphql.\r\n\r\n [INFO] [, ] [main] org.springframework.graphql.execution.DefaultSchemaResourceGraphQlSourceBuilder - Loaded 1 resource(s) in the GraphQL schema.\r\n [INFO] [, ] [main] org.springframework.boot.autoconfigure.graphql.servlet.GraphQlWebMvcAutoConfiguration - GraphQL endpoint HTTP POST /graphql\r\n\r\nabove logs shows it loaded schema file and exposed endpoint but while requesting through postman i am getting 405 method not allowed\r\n\r\npostman\r\n```\r\nPOST http://localhost:8802/graphql\r\n```\r\n\r\nI am fairly new to graphql and any help on this is appreciated. Thanks","title":"GraphQL error : Method not allowed error for GraphQL requests with Spring 3.1.1","body":"<p>I have upgraded spring boot to 3.1.1 and I am getting 405 method not allowed for graphql call. I tried all the known options.\npom.xml</p>\n<pre><code>            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-graphql&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n&lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>class</p>\n<pre><code>@Controller\n\npublic class DemoGraphQLResolver {\n\n\n\n  @QueryMapping(name = &quot;phoneNumber&quot;)\n  public List&lt;Party&gt; phoneNumber(@Argument String phoneNumber) {\n    return phoneNumber;\n  }\n}\n</code></pre>\n<p>I have .graphqls file under src/main/resources/graphql.</p>\n<p>[INFO] [, ] [main] org.springframework.graphql.execution.DefaultSchemaResourceGraphQlSourceBuilder - Loaded 1 resource(s) in the GraphQL schema.\n[INFO] [, ] [main] org.springframework.boot.autoconfigure.graphql.servlet.GraphQlWebMvcAutoConfiguration - GraphQL endpoint HTTP POST /graphql</p>\n<p>above logs shows it loaded schema file and exposed endpoint but while requesting through postman i am getting 405 method not allowed</p>\n<p>postman</p>\n<pre><code>POST http://localhost:8802/graphql\n</code></pre>\n<p>I am fairly new to graphql and any help on this is appreciated. Thanks</p>\n"},{"tags":["java","azure"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1692006414,"post_id":76897822,"comment_id":135562600,"body_markdown":"Move the `BufferedWriter` into the resource section of the try-with-resources (just like the `FileWriter` already is), and remove the `escribe.flush()` and `escribo.close()` statements. That likely won&#39;t fix the problem, but it will result in better code. In any case, with the information given, we can&#39;t help you. Likely you missed some kind of exception somewhere.","body":"Move the <code>BufferedWriter</code> into the resource section of the try-with-resources (just like the <code>FileWriter</code> already is), and remove the <code>escribe.flush()</code> and <code>escribo.close()</code> statements. That likely won&#39;t fix the problem, but it will result in better code. In any case, with the information given, we can&#39;t help you. Likely you missed some kind of exception somewhere."}],"owner":{"account_id":29221581,"reputation":1,"user_id":22387218,"display_name":"Eduardo Sanchez"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692006348,"creation_date":1692005899,"question_id":76897822,"body_markdown":"I have a JAR file that generates an XML file. When I run it in my machine, it works fine, but when I upload the JAR file to the AVD (fslogic) and try to create the file, it is generated empty (0kb)\r\n\r\n```hava\r\ntry (FileWriter archEscritura = new FileWriter(arch)) {\r\n    BufferedWriter escribo = new BufferedWriter(archEscritura);\r\n\r\n    escribo.write(&quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;?&gt;\\r\\n&quot;);\r\n    escribo.write(&quot;&lt;envio comunicacion=\\&quot;2010/052\\&quot; institucion=\\&quot;&quot;+bic.trim()+ &quot;\\&quot;&gt;\\r\\n&quot;);\r\n    escribo.flush()\r\n    escribo.close()\r\n}\r\n```","title":"Write file in Azure Virtual Desktop","body":"<p>I have a JAR file that generates an XML file. When I run it in my machine, it works fine, but when I upload the JAR file to the AVD (fslogic) and try to create the file, it is generated empty (0kb)</p>\n<pre><code>try (FileWriter archEscritura = new FileWriter(arch)) {\n    BufferedWriter escribo = new BufferedWriter(archEscritura);\n\n    escribo.write(&quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;?&gt;\\r\\n&quot;);\n    escribo.write(&quot;&lt;envio comunicacion=\\&quot;2010/052\\&quot; institucion=\\&quot;&quot;+bic.trim()+ &quot;\\&quot;&gt;\\r\\n&quot;);\n    escribo.flush()\n    escribo.close()\n}\n</code></pre>\n"},{"tags":["java","arrays","loops","for-loop"],"comments":[{"owner":{"account_id":2611382,"reputation":6389,"user_id":2261424,"accept_rate":100,"display_name":"AntonH"},"score":4,"creation_date":1487083282,"post_id":42228948,"comment_id":71617336,"body_markdown":"You may have a problem, but you haven&#39;t asked a question.","body":"You may have a problem, but you haven&#39;t asked a question."},{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":11,"creation_date":1487083324,"post_id":42228948,"comment_id":71617360,"body_markdown":"Lookup the `break` keyword","body":"Lookup the <code>break</code> keyword"},{"owner":{"account_id":9443335,"reputation":15252,"user_id":7023245,"accept_rate":25,"display_name":"Timothy Truckle"},"score":2,"creation_date":1487083395,"post_id":42228948,"comment_id":71617420,"body_markdown":"Welcome to Stack Overflow! Please take the [tour](http://stackoverflow.com/tour), have a look around, and read through the [help center](http://stackoverflow.com/help), in particular [How do I ask a good question?](http://stackoverflow.com/help/how-to-ask) and [What topics can I ask about here?](http://stackoverflow.com/help/on-topic).","body":"Welcome to Stack Overflow! Please take the <a href=\"http://stackoverflow.com/tour\">tour</a>, have a look around, and read through the <a href=\"http://stackoverflow.com/help\">help center</a>, in particular <a href=\"http://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a> and <a href=\"http://stackoverflow.com/help/on-topic\">What topics can I ask about here?</a>."},{"owner":{"account_id":2366187,"reputation":60162,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":1,"creation_date":1487083424,"post_id":42228948,"comment_id":71617435,"body_markdown":"What happens when the array is &quot;full&quot;?","body":"What happens when the array is &quot;full&quot;?"},{"owner":{"account_id":9443335,"reputation":15252,"user_id":7023245,"accept_rate":25,"display_name":"Timothy Truckle"},"score":0,"creation_date":1487083489,"post_id":42228948,"comment_id":71617477,"body_markdown":"If the method that contains your loop does not have any code after the loop a `return` is preffered over the `break` statement.","body":"If the method that contains your loop does not have any code after the loop a <code>return</code> is preffered over the <code>break</code> statement."},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":3,"creation_date":1487083538,"post_id":42228948,"comment_id":71617512,"body_markdown":"@TimothyTruckle Preferred by who? Why?","body":"@TimothyTruckle Preferred by who? Why?"},{"owner":{"account_id":2366187,"reputation":60162,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1487083597,"post_id":42228948,"comment_id":71617555,"body_markdown":"@TimothyTruckle agree with [Micheal](https://stackoverflow.com/questions/42228948/java-iterating-through-a-array-until-it-hits-an-null-value#comment71617512_42228948) - a well placed `break` can make certain algorithms make much more sense. I would say generally you&#39;re right, but as with most things there are no absolute rules. Apart from never use `GOTO` - but that&#39;s (thankfully) not relevant for Java.","body":"@TimothyTruckle agree with <a href=\"https://stackoverflow.com/questions/42228948/java-iterating-through-a-array-until-it-hits-an-null-value#comment71617512_42228948\">Micheal</a> - a well placed <code>break</code> can make certain algorithms make much more sense. I would say generally you&#39;re right, but as with most things there are no absolute rules. Apart from never use <code>GOTO</code> - but that&#39;s (thankfully) not relevant for Java."},{"owner":{"account_id":9443335,"reputation":15252,"user_id":7023245,"accept_rate":25,"display_name":"Timothy Truckle"},"score":0,"creation_date":1487083775,"post_id":42228948,"comment_id":71617677,"body_markdown":"*&quot;Preferred by who?&quot;* by any skilled programmer. *&quot;Why?&quot;* because `break` (outside of `switch ... case`) is merily a `goto` and is a sign of a flawed design.","body":"<i>&quot;Preferred by who?&quot;</i> by any skilled programmer. <i>&quot;Why?&quot;</i> because <code>break</code> (outside of <code>switch ... case</code>) is merily a <code>goto</code> and is a sign of a flawed design."},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":1,"creation_date":1487083901,"post_id":42228948,"comment_id":71617767,"body_markdown":"@TimothyTruckle [citation needed]","body":"@TimothyTruckle [citation needed]"},{"owner":{"account_id":10248433,"reputation":171,"user_id":7563498,"accept_rate":0,"display_name":"Yusof Bandar"},"score":0,"creation_date":1487084086,"post_id":42228948,"comment_id":71617901,"body_markdown":"I was just wondering is it better to use a break or a Boolean flag","body":"I was just wondering is it better to use a break or a Boolean flag"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1487084143,"post_id":42228948,"comment_id":71617948,"body_markdown":"@TimothyTruckle there is a lot of information and discussion [here](http://stackoverflow.com/questions/4805258/is-it-bad-style-to-use-return-to-break-a-for-loop-in-java). There is no absolute answer.","body":"@TimothyTruckle there is a lot of information and discussion <a href=\"http://stackoverflow.com/questions/4805258/is-it-bad-style-to-use-return-to-break-a-for-loop-in-java\">here</a>. There is no absolute answer."},{"owner":{"account_id":10248433,"reputation":171,"user_id":7563498,"accept_rate":0,"display_name":"Yusof Bandar"},"score":0,"creation_date":1487084200,"post_id":42228948,"comment_id":71617994,"body_markdown":"@AntonH the question is implied. No need to explicitly say the question.","body":"@AntonH the question is implied. No need to explicitly say the question."},{"owner":{"account_id":10248433,"reputation":171,"user_id":7563498,"accept_rate":0,"display_name":"Yusof Bandar"},"score":0,"creation_date":1487084228,"post_id":42228948,"comment_id":71618021,"body_markdown":"@Boris the Spider when the array is full no more objects can be added","body":"@Boris the Spider when the array is full no more objects can be added"}],"answers":[{"comments":[{"owner":{"account_id":2366187,"reputation":60162,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1487083684,"post_id":42229096,"comment_id":71617609,"body_markdown":"3 ways I suppose - 3) place in method an use `return`. Would prefer 3) over 1) over 2). Dislike 2).","body":"3 ways I suppose - 3) place in method an use <code>return</code>. Would prefer 3) over 1) over 2). Dislike 2)."},{"owner":{"account_id":10248433,"reputation":171,"user_id":7563498,"accept_rate":0,"display_name":"Yusof Bandar"},"score":0,"creation_date":1487084128,"post_id":42229096,"comment_id":71617940,"body_markdown":"Many thanks, I was just wondering which one would you choose. (which is more commonly accepted)","body":"Many thanks, I was just wondering which one would you choose. (which is more commonly accepted)"},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1487084522,"post_id":42229096,"comment_id":71618233,"body_markdown":"My preference is for `break`. For me, it makes the code more legible and the stackframe smaller. On the other hand, `break` is not &quot;clean&quot; - it is effectively like a goto... But then again, I was never that much for &quot;clean&quot; programming - don&#39;t shoot me","body":"My preference is for <code>break</code>. For me, it makes the code more legible and the stackframe smaller. On the other hand, <code>break</code> is not &quot;clean&quot; - it is effectively like a goto... But then again, I was never that much for &quot;clean&quot; programming - don&#39;t shoot me"},{"owner":{"account_id":3428879,"reputation":3755,"user_id":2873896,"display_name":"Luke Briggs"},"score":0,"creation_date":1487084788,"post_id":42229096,"comment_id":71618441,"body_markdown":"@MightyGarlic `break` is my preference too, but if a loop is getting large then I&#39;d separate it out and use return instead. I also dislike #2 - it&#39;s a waste of cycles and doesn&#39;t add much other than excess complexity. A flag only really works for breaking out of nested loops, but those are one of the only cases where a goto can potentially be applied instead (as you can just jump straight after the loops, instead of breaking out of one, then breaking again).","body":"@MightyGarlic <code>break</code> is my preference too, but if a loop is getting large then I&#39;d separate it out and use return instead. I also dislike #2 - it&#39;s a waste of cycles and doesn&#39;t add much other than excess complexity. A flag only really works for breaking out of nested loops, but those are one of the only cases where a goto can potentially be applied instead (as you can just jump straight after the loops, instead of breaking out of one, then breaking again)."},{"owner":{"account_id":10248433,"reputation":171,"user_id":7563498,"accept_rate":0,"display_name":"Yusof Bandar"},"score":0,"creation_date":1487086144,"post_id":42229096,"comment_id":71619484,"body_markdown":"@LukeBriggs cheers man, I have been using the flag method for a quite a while, I think I will switch to the `break` method.","body":"@LukeBriggs cheers man, I have been using the flag method for a quite a while, I think I will switch to the <code>break</code> method."}],"tags":[],"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1487083825,"creation_date":1487083610,"answer_id":42229096,"question_id":42228948,"body_markdown":"There are two ways to approach this: You can use `break` to exit your loop, or you can use a Boolean flag\r\n\r\nExample 1 (break)\r\n\r\n    for(int i=0;i&lt;testArray.length;i++)\r\n    {\r\n      if(testArray[i] == null)\r\n      {\r\n       testArray[i] = new object();\r\n       break;\r\n      }\r\n     }\r\n\r\nExample 2: Boolean flag\r\n    \r\n    boolean found = false;\r\n    for(int i=0;i&lt;testArray.length &amp;&amp; !found;i++)\r\n    {\r\n      if(testArray[i] == null)\r\n      {\r\n       testArray[i] = new object();\r\n       found = true;\r\n      }\r\n     }","title":"(Java) Iterating through a Array until it hits an null value","body":"<p>There are two ways to approach this: You can use <code>break</code> to exit your loop, or you can use a Boolean flag</p>\n\n<p>Example 1 (break)</p>\n\n<pre><code>for(int i=0;i&lt;testArray.length;i++)\n{\n  if(testArray[i] == null)\n  {\n   testArray[i] = new object();\n   break;\n  }\n }\n</code></pre>\n\n<p>Example 2: Boolean flag</p>\n\n<pre><code>boolean found = false;\nfor(int i=0;i&lt;testArray.length &amp;&amp; !found;i++)\n{\n  if(testArray[i] == null)\n  {\n   testArray[i] = new object();\n   found = true;\n  }\n }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":1,"creation_date":1487083902,"post_id":42229139,"comment_id":71617769,"body_markdown":"You do not need to use `.equals()`","body":"You do not need to use <code>.equals()</code>"},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":3,"creation_date":1487084039,"post_id":42229139,"comment_id":71617872,"body_markdown":"@ChristopherSchneider More than that, if it *is* indeed null you&#39;ll get a null pointer exception for trying to dereference it.","body":"@ChristopherSchneider More than that, if it <i>is</i> indeed null you&#39;ll get a null pointer exception for trying to dereference it."},{"owner":{"account_id":8235378,"reputation":755,"user_id":6194785,"accept_rate":86,"display_name":"jseashell"},"score":0,"creation_date":1487084175,"post_id":42229139,"comment_id":71617969,"body_markdown":"@ChristopherSchneider OP might, we don&#39;t really know. Depends on what is in that array. `int[] testArray = new int[10]` would not pass a null check, because `int` cannot be null, for instance. We don&#39;t have enough information.","body":"@ChristopherSchneider OP might, we don&#39;t really know. Depends on what is in that array. <code>int[] testArray = new int[10]</code> would not pass a null check, because <code>int</code> cannot be null, for instance. We don&#39;t have enough information."},{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":1,"creation_date":1487089821,"post_id":42229139,"comment_id":71622202,"body_markdown":"That doesn&#39;t really help your case. `int` doesn&#39;t have an `equals` method because it&#39;s a primitive, so that wouldn&#39;t even compile. I&#39;m not sure there&#39;s a single reason to call `.equals(null)` because, as @Michael says, you risk a NPE. To add, if it is `null` and you use `==`, you&#39;re just say `if(null == null)` which is perfectly fine.","body":"That doesn&#39;t really help your case. <code>int</code> doesn&#39;t have an <code>equals</code> method because it&#39;s a primitive, so that wouldn&#39;t even compile. I&#39;m not sure there&#39;s a single reason to call <code>.equals(null)</code> because, as @Michael says, you risk a NPE. To add, if it is <code>null</code> and you use <code>==</code>, you&#39;re just say <code>if(null == null)</code> which is perfectly fine."},{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":0,"creation_date":1487090048,"post_id":42229139,"comment_id":71622360,"body_markdown":"And another case, if whoever wrote the `.equals()` method didn&#39;t check for null for some reason, that could also throw a NPE.","body":"And another case, if whoever wrote the <code>.equals()</code> method didn&#39;t check for null for some reason, that could also throw a NPE."}],"tags":[],"owner":{"account_id":8235378,"reputation":755,"user_id":6194785,"accept_rate":86,"display_name":"jseashell"},"comment_count":5,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1487083745,"creation_date":1487083745,"answer_id":42229139,"question_id":42228948,"body_markdown":"If your `testArray[]` is an array of `Object`, then you need to use `.equals()` to check for `null`, instead of `==`. Then, you can add `break;` to get out of the `for-loop`.\r\n\r\n    for(int i=0;i&lt;testArray.length;i++)\r\n    {\r\n        if(testArray[i].equals(null))\r\n        {\r\n            testArray[i] = new Object();\r\n            break;\r\n        }\r\n    }\r\n\r\nAlternatively, you could use an flag to indicate that it is time to get out of the loop\r\n\r\n    private boolean keepLooping = true;\r\n    private int i = 0;\r\n\r\n    while(keepLooping)\r\n    {\r\n        if(testArray[i].equals(null))\r\n        {\r\n            testArray[i] = new object();\r\n            keepLooping = false;\r\n        }\r\n\r\n        i++;\r\n    }\r\n    ","title":"(Java) Iterating through a Array until it hits an null value","body":"<p>If your <code>testArray[]</code> is an array of <code>Object</code>, then you need to use <code>.equals()</code> to check for <code>null</code>, instead of <code>==</code>. Then, you can add <code>break;</code> to get out of the <code>for-loop</code>.</p>\n\n<pre><code>for(int i=0;i&lt;testArray.length;i++)\n{\n    if(testArray[i].equals(null))\n    {\n        testArray[i] = new Object();\n        break;\n    }\n}\n</code></pre>\n\n<p>Alternatively, you could use an flag to indicate that it is time to get out of the loop</p>\n\n<pre><code>private boolean keepLooping = true;\nprivate int i = 0;\n\nwhile(keepLooping)\n{\n    if(testArray[i].equals(null))\n    {\n        testArray[i] = new object();\n        keepLooping = false;\n    }\n\n    i++;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1487083772,"post_id":42229140,"comment_id":71617674,"body_markdown":"Got to hope that `i &lt; testArray.length` afterwards.","body":"Got to hope that <code>i &lt; testArray.length</code> afterwards."},{"owner":{"account_id":8219023,"reputation":79,"user_id":6184271,"display_name":"Vasilut Lucian"},"score":0,"creation_date":1487083854,"post_id":42229140,"comment_id":71617735,"body_markdown":"To be sure you can include testArray[i] = new object() in an if condition ;)","body":"To be sure you can include testArray[i] = new object() in an if condition ;)"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1487083880,"post_id":42229140,"comment_id":71617754,"body_markdown":"Also: look carefully, this doesn&#39;t compile.","body":"Also: look carefully, this doesn&#39;t compile."}],"tags":[],"owner":{"account_id":8219023,"reputation":79,"user_id":6184271,"display_name":"Vasilut Lucian"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1487083893,"creation_date":1487083746,"answer_id":42229140,"question_id":42228948,"body_markdown":"You can make something like this:\r\n    \r\n    int i = 0;\r\n    for(int i = 0; i&lt;testArray.length &amp;&amp; testArray[i] != null; i++);\r\n    \r\n    if(i &lt; testArray.length)\r\n    {\r\n    //now i will represent a position with a null element\r\n    testArray[i] = new object();\r\n    }","title":"(Java) Iterating through a Array until it hits an null value","body":"<p>You can make something like this:</p>\n\n<pre><code>int i = 0;\nfor(int i = 0; i&lt;testArray.length &amp;&amp; testArray[i] != null; i++);\n\nif(i &lt; testArray.length)\n{\n//now i will represent a position with a null element\ntestArray[i] = new object();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":957044,"reputation":47672,"user_id":982161,"accept_rate":63,"display_name":"ΦXocę 웃 Пepe&#250;pa ツ"},"score":0,"creation_date":1487083902,"post_id":42229144,"comment_id":71617768,"body_markdown":"looking for the doc I forgot to break..  :P","body":"looking for the doc I forgot to break..  :P"}],"tags":[],"owner":{"account_id":957044,"reputation":47672,"user_id":982161,"accept_rate":63,"display_name":"ΦXocę 웃 Пepe&#250;pa ツ"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1487083911,"creation_date":1487083753,"answer_id":42229144,"question_id":42228948,"body_markdown":"[break][1] the loop as soon as you find the element....\r\n\r\nthat is what you are missing:\r\n\r\n    for(int i = 0; i&lt;testArray.length; i++) {\r\n       if(testArray[i] == null) {\r\n          testArray[i] = new object();\r\n          break;\r\n       }\r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html","title":"(Java) Iterating through a Array until it hits an null value","body":"<p><a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html\" rel=\"nofollow noreferrer\">break</a> the loop as soon as you find the element....</p>\n\n<p>that is what you are missing:</p>\n\n<pre><code>for(int i = 0; i&lt;testArray.length; i++) {\n   if(testArray[i] == null) {\n      testArray[i] = new object();\n      break;\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user6557305"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1487083949,"creation_date":1487083949,"answer_id":42229219,"question_id":42228948,"body_markdown":"Maybe [KeyListener](https://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html) could help? You would just need to listen for the key you are trying to listen     for and check if it&#39;s null with \r\n\r\n    for(int i = 0; i &lt; record.length; i++)\r\n            if(record[i] == null) {\r\n                System.out.println(i+1 + &quot; position is null&quot;);\r\n            }\r\nFeel free to customize this.\r\nAlso ControlAltDel&#39;s break solution works great.","title":"(Java) Iterating through a Array until it hits an null value","body":"<p>Maybe <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html\" rel=\"nofollow noreferrer\">KeyListener</a> could help? You would just need to listen for the key you are trying to listen     for and check if it's null with </p>\n\n<pre><code>for(int i = 0; i &lt; record.length; i++)\n        if(record[i] == null) {\n            System.out.println(i+1 + \" position is null\");\n        }\n</code></pre>\n\n<p>Feel free to customize this.\nAlso ControlAltDel's break solution works great.</p>\n"},{"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1691739060,"post_id":76880902,"comment_id":135535049,"body_markdown":"You didn&#39;t completely answer the question since the OP wants to add an object to the array once he encounters a null element in the array.","body":"You didn&#39;t completely answer the question since the OP wants to add an object to the array once he encounters a null element in the array."}],"tags":[],"owner":{"account_id":14112653,"reputation":33,"user_id":10195099,"display_name":"Shaheaz"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692005875,"creation_date":1691731885,"answer_id":76880902,"question_id":42228948,"body_markdown":"```java\r\n Object [] allitems = {&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;,null,null,null};\r\n\r\n int index= Arrays.asList(allitems).indexOf(null);\r\n System.out.println(&quot;INFO:: The index is:: &quot;+index);\r\n allitems[index]= new Object();\r\n```","title":"(Java) Iterating through a Array until it hits an null value","body":"<pre class=\"lang-java prettyprint-override\"><code> Object [] allitems = {&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;,null,null,null};\n\n int index= Arrays.asList(allitems).indexOf(null);\n System.out.println(&quot;INFO:: The index is:: &quot;+index);\n allitems[index]= new Object();\n</code></pre>\n"}],"owner":{"account_id":10248433,"reputation":171,"user_id":7563498,"accept_rate":0,"display_name":"Yusof Bandar"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8158,"favorite_count":0,"down_vote_count":4,"up_vote_count":4,"answer_count":6,"score":0,"last_activity_date":1692005875,"creation_date":1487083240,"question_id":42228948,"body_markdown":"My problem is that I want a `for loop` to iterate through an array until it hits a `null` value, add an object to the array and then stop iterating through the array.\r\n\r\nSo for example when I press a key it will add an object to the array but only one object each time I press a key.\r\n\r\nHere is my code:\r\n\r\n    for(int i = 0; i&lt;testArray.length; i++)\r\n    {\r\n       if(testArray[i] == null)\r\n       {\r\n          testArray[i] = new object();\r\n       }\r\n    }\r\n\r\nMany thanks","title":"(Java) Iterating through a Array until it hits an null value","body":"<p>My problem is that I want a <code>for loop</code> to iterate through an array until it hits a <code>null</code> value, add an object to the array and then stop iterating through the array.</p>\n\n<p>So for example when I press a key it will add an object to the array but only one object each time I press a key.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>for(int i = 0; i&lt;testArray.length; i++)\n{\n   if(testArray[i] == null)\n   {\n      testArray[i] = new object();\n   }\n}\n</code></pre>\n\n<p>Many thanks</p>\n"},{"tags":["java","kotlin","pytorch","torchscript","djl"],"answers":[{"tags":[],"owner":{"account_id":24418405,"reputation":11,"user_id":18345001,"display_name":"Romeo RKPK"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692005451,"creation_date":1692005451,"answer_id":76897779,"question_id":76895864,"body_markdown":"**Summary** &lt;br&gt;\r\nImage preprocessing incorrect\r\n&lt;hr&gt;\r\nlook at this kotlin code, it is part of code from question\r\n\r\n    val translator = ImageClassificationTranslator.builder()\r\n    .setPipeline(Pipeline().apply {\r\n        add(Resize(128))\r\n        add(ToTensor())\r\n    })\r\n    .optSynsetArtifactName(&quot;synset.txt&quot;)\r\n    .build()\r\n\r\nand python code from question\r\n\r\n    tensor_transform = T.Compose([T.PILToTensor()])\r\n\r\nUnfortunately, that are does not same. Python code wich do preprocessing should be\r\n\r\n    preprocess = transforms.Compose([transforms.Resize(128), transforms.ToTensor()])\r\n\r\nI fix this problem...\r\n\r\n1. fix my python code, about image preprocessing part\r\n2. train my model again\r\n3. export to torchscript\r\n4. load torchscript model by kotlin code\r\n5. It works well :)","title":"forwarded value different between python and DJL","body":"<p><strong>Summary</strong> <br>\nImage preprocessing incorrect</p>\n<hr>\nlook at this kotlin code, it is part of code from question\n<pre><code>val translator = ImageClassificationTranslator.builder()\n.setPipeline(Pipeline().apply {\n    add(Resize(128))\n    add(ToTensor())\n})\n.optSynsetArtifactName(&quot;synset.txt&quot;)\n.build()\n</code></pre>\n<p>and python code from question</p>\n<pre><code>tensor_transform = T.Compose([T.PILToTensor()])\n</code></pre>\n<p>Unfortunately, that are does not same. Python code wich do preprocessing should be</p>\n<pre><code>preprocess = transforms.Compose([transforms.Resize(128), transforms.ToTensor()])\n</code></pre>\n<p>I fix this problem...</p>\n<ol>\n<li>fix my python code, about image preprocessing part</li>\n<li>train my model again</li>\n<li>export to torchscript</li>\n<li>load torchscript model by kotlin code</li>\n<li>It works well :)</li>\n</ol>\n"}],"owner":{"account_id":24418405,"reputation":11,"user_id":18345001,"display_name":"Romeo RKPK"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692005451,"creation_date":1691977404,"question_id":76895864,"body_markdown":"I see example https://docs.djl.ai/jupyter/load_pytorch_model.html\r\nI made my own `torchscript` witch named `qooModel.pt` file and `synset.txt`\r\n\r\nI tried to imitate the example. Here is my code.\r\n\r\n```kotlin\r\nval translator = ImageClassificationTranslator.builder()\r\n    .setPipeline(Pipeline().apply {\r\n        add(Resize(128))\r\n        add(ToTensor())\r\n    })\r\n    .optSynsetArtifactName(&quot;synset.txt&quot;)\r\n    .build()\r\n\r\n\r\nval criteria = Criteria.builder()\r\n    .setTypes(Image::class.java, Classifications::class.java)\r\n    .optApplication(Application.CV.IMAGE_CLASSIFICATION)\r\n    .optModelPath(Paths.get(&quot;models/qooModel.pt&quot;))\r\n    .optTranslator(translator)\r\n    .build()\r\n\r\nval imgFactory = ImageFactory.getInstance()\r\nval imgPath    = Paths.get(args.getOrElse(0){&quot;./images/qoo_learning.png&quot;})\r\nval image      = imgFactory.fromFile(imgPath)\r\n\r\nval model = ModelZoo.loadModel(criteria)\r\n\r\n\r\nval predict = model.newPredictor()\r\n\r\nval result = predict.predict(image)\r\nprint(result)\r\n\r\nmodel.close()\r\n```\r\n\r\nMy code does not makes error, but forwarded value in `result` looks strange.\r\nI expect\r\n\r\n```json\r\n[\r\n\t{&quot;class&quot;: &quot;qoo&quot;, &quot;probability&quot;: 0.9597}\r\n]\r\n```\r\n\r\nbut\r\n\r\n```json\r\n[\r\n\t{&quot;class&quot;: &quot;qoo&quot;, &quot;probability&quot;: 0.00463}\r\n]\r\n```\r\n\r\nprinted.\r\n\r\nI exepect `0.9597` because when I running under Python code in Google Colab\r\n\r\n```python\r\nimport torch\r\nfrom PIL import Image\r\nimport torchvision.transforms as T\r\n\r\ntensor_transform = T.Compose([T.PILToTensor()])\r\n\r\nimage = Image.open(&quot;qoo_learning.png&quot;).convert(&quot;RGB&quot;).resize((128, 128))\r\nimg_tensor = tensor_transform(image).type(torch.FloatTensor)\r\nimg_tensor = torch.unsqueeze(img_tensor, 0)\r\nmodel(img_tensor)\r\n```\r\n\r\nthe result of code show me `tensor([[0.9597]], grad_fn=&lt;SigmoidBackward0&gt;)`\r\n\r\n**Questions.**\r\n\r\nQ1. Why I cannot get correct result (likes 0.9597) in my Kotlin code?\r\n\r\nQ2. What should I do for get correct result?\r\n\r\n**My guess**\r\n\r\nG1. there some issue between pytorch version between 2.0.1(I write torchscript) and 1.13.1(Kotlin use)\r\n\r\nG2. I should use pytorch 2.0.1 in my kotlin code\r\n....unfortunately I tried to use torch 2.0.1 but I couldn&#39;t understand document\r\n\r\n```\r\nExplicitly specify pytorch-native-xxx package version to override the version in the BOM.\r\n```\r\n\r\nand I could not find example about that\r\n\r\nor\r\n\r\nG1. My code wrong. It load model but it does not load pre-trained weights.\r\n\r\nG2. I should fix my code\r\n\r\n....example https://docs.djl.ai/jupyter/load_pytorch_model.html looks like using pre-trained model\r\n\r\nbut I think my code is almost same.\r\n\r\n**My Develop Environment.**\r\n\r\nI make my torchscript file(`qooModel.pt`) in Window 11, pytorch 2.0.1\r\n\r\nI run my Kotlin code in macOS, I did not install torch by pip\r\n\r\n... and it looks like running pytorch 1.13.1, look under debug log\r\n\r\n```\r\n[main] DEBUG ai.djl.pytorch.jni.LibUtils - Using cache dir: /Users/romeo/.djl.ai/pytorch/1.13.1-cpu-osx-aarch64\r\n[main] DEBUG ai.djl.pytorch.jni.LibUtils - Loading native library: /Users/romeo/.djl.ai/pytorch/1.13.1-cpu-osx-aarch64/libc10.dylib\r\n[main] DEBUG ai.djl.pytorch.jni.LibUtils - Loading native library: /Users/romeo/.djl.ai/pytorch/1.13.1-cpu-osx-aarch64/libtorch_cpu.dylib\r\n[main] DEBUG ai.djl.pytorch.jni.LibUtils - Loading native library: /Users/romeo/.djl.ai/pytorch/1.13.1-cpu-osx-aarch64/libtorch.dylib\r\n[main] DEBUG ai.djl.pytorch.jni.LibUtils - Loading native library: /Users/romeo/.djl.ai/pytorch/1.13.1-cpu-osx-aarch64/0.23.0-libdjl_torch.dylib\r\n```\r\n\r\nsorry about my poor english.","title":"forwarded value different between python and DJL","body":"<p>I see example <a href=\"https://docs.djl.ai/jupyter/load_pytorch_model.html\" rel=\"nofollow noreferrer\">https://docs.djl.ai/jupyter/load_pytorch_model.html</a>\nI made my own <code>torchscript</code> witch named <code>qooModel.pt</code> file and <code>synset.txt</code></p>\n<p>I tried to imitate the example. Here is my code.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val translator = ImageClassificationTranslator.builder()\n    .setPipeline(Pipeline().apply {\n        add(Resize(128))\n        add(ToTensor())\n    })\n    .optSynsetArtifactName(&quot;synset.txt&quot;)\n    .build()\n\n\nval criteria = Criteria.builder()\n    .setTypes(Image::class.java, Classifications::class.java)\n    .optApplication(Application.CV.IMAGE_CLASSIFICATION)\n    .optModelPath(Paths.get(&quot;models/qooModel.pt&quot;))\n    .optTranslator(translator)\n    .build()\n\nval imgFactory = ImageFactory.getInstance()\nval imgPath    = Paths.get(args.getOrElse(0){&quot;./images/qoo_learning.png&quot;})\nval image      = imgFactory.fromFile(imgPath)\n\nval model = ModelZoo.loadModel(criteria)\n\n\nval predict = model.newPredictor()\n\nval result = predict.predict(image)\nprint(result)\n\nmodel.close()\n</code></pre>\n<p>My code does not makes error, but forwarded value in <code>result</code> looks strange.\nI expect</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n    {&quot;class&quot;: &quot;qoo&quot;, &quot;probability&quot;: 0.9597}\n]\n</code></pre>\n<p>but</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n    {&quot;class&quot;: &quot;qoo&quot;, &quot;probability&quot;: 0.00463}\n]\n</code></pre>\n<p>printed.</p>\n<p>I exepect <code>0.9597</code> because when I running under Python code in Google Colab</p>\n<pre class=\"lang-py prettyprint-override\"><code>import torch\nfrom PIL import Image\nimport torchvision.transforms as T\n\ntensor_transform = T.Compose([T.PILToTensor()])\n\nimage = Image.open(&quot;qoo_learning.png&quot;).convert(&quot;RGB&quot;).resize((128, 128))\nimg_tensor = tensor_transform(image).type(torch.FloatTensor)\nimg_tensor = torch.unsqueeze(img_tensor, 0)\nmodel(img_tensor)\n</code></pre>\n<p>the result of code show me <code>tensor([[0.9597]], grad_fn=&lt;SigmoidBackward0&gt;)</code></p>\n<p><strong>Questions.</strong></p>\n<p>Q1. Why I cannot get correct result (likes 0.9597) in my Kotlin code?</p>\n<p>Q2. What should I do for get correct result?</p>\n<p><strong>My guess</strong></p>\n<p>G1. there some issue between pytorch version between 2.0.1(I write torchscript) and 1.13.1(Kotlin use)</p>\n<p>G2. I should use pytorch 2.0.1 in my kotlin code\n....unfortunately I tried to use torch 2.0.1 but I couldn't understand document</p>\n<pre><code>Explicitly specify pytorch-native-xxx package version to override the version in the BOM.\n</code></pre>\n<p>and I could not find example about that</p>\n<p>or</p>\n<p>G1. My code wrong. It load model but it does not load pre-trained weights.</p>\n<p>G2. I should fix my code</p>\n<p>....example <a href=\"https://docs.djl.ai/jupyter/load_pytorch_model.html\" rel=\"nofollow noreferrer\">https://docs.djl.ai/jupyter/load_pytorch_model.html</a> looks like using pre-trained model</p>\n<p>but I think my code is almost same.</p>\n<p><strong>My Develop Environment.</strong></p>\n<p>I make my torchscript file(<code>qooModel.pt</code>) in Window 11, pytorch 2.0.1</p>\n<p>I run my Kotlin code in macOS, I did not install torch by pip</p>\n<p>... and it looks like running pytorch 1.13.1, look under debug log</p>\n<pre><code>[main] DEBUG ai.djl.pytorch.jni.LibUtils - Using cache dir: /Users/romeo/.djl.ai/pytorch/1.13.1-cpu-osx-aarch64\n[main] DEBUG ai.djl.pytorch.jni.LibUtils - Loading native library: /Users/romeo/.djl.ai/pytorch/1.13.1-cpu-osx-aarch64/libc10.dylib\n[main] DEBUG ai.djl.pytorch.jni.LibUtils - Loading native library: /Users/romeo/.djl.ai/pytorch/1.13.1-cpu-osx-aarch64/libtorch_cpu.dylib\n[main] DEBUG ai.djl.pytorch.jni.LibUtils - Loading native library: /Users/romeo/.djl.ai/pytorch/1.13.1-cpu-osx-aarch64/libtorch.dylib\n[main] DEBUG ai.djl.pytorch.jni.LibUtils - Loading native library: /Users/romeo/.djl.ai/pytorch/1.13.1-cpu-osx-aarch64/0.23.0-libdjl_torch.dylib\n</code></pre>\n<p>sorry about my poor english.</p>\n"},{"tags":["java","google-drive-api"],"answers":[{"comments":[{"owner":{"account_id":1522105,"reputation":3437,"user_id":1421482,"accept_rate":91,"display_name":"XamDev"},"score":0,"creation_date":1552046114,"post_id":45757757,"comment_id":96873374,"body_markdown":"@GaneshR Can you give me the example how to execute this code?","body":"@GaneshR Can you give me the example how to execute this code?"}],"tags":[],"owner":{"account_id":7052079,"reputation":2257,"user_id":5400793,"display_name":"Tobias Geiselmann"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1503062517,"creation_date":1503062517,"answer_id":45757757,"question_id":45757635,"body_markdown":"You can search for a specific folder with these parameters:\r\n\r\n    name = &#39;your-folder-name&#39;\r\n    mimeType = &#39;application/vnd.google-apps.folder&#39;\r\n\r\nThe mime type makes sure, that you are only searching for folders. For more information, take a look at the documentation of the search parameters [here](https://developers.google.com/drive/v3/web/search-parameters).","title":"Google DRIVE API V3 - Get a folder id with name","body":"<p>You can search for a specific folder with these parameters:</p>\n\n<pre><code>name = 'your-folder-name'\nmimeType = 'application/vnd.google-apps.folder'\n</code></pre>\n\n<p>The mime type makes sure, that you are only searching for folders. For more information, take a look at the documentation of the search parameters <a href=\"https://developers.google.com/drive/v3/web/search-parameters\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"comments":[{"owner":{"account_id":17725408,"reputation":359,"user_id":12869273,"display_name":"Akintomiwa Opemipo"},"score":0,"creation_date":1623241886,"post_id":67554376,"comment_id":120022317,"body_markdown":"You are a life saver @Selver Mary. Exactly what I was looking. I will give 1000 upvotes if I could. Thanks.","body":"You are a life saver @Selver Mary. Exactly what I was looking. I will give 1000 upvotes if I could. Thanks."}],"tags":[],"owner":{"account_id":15392851,"reputation":668,"user_id":11104937,"display_name":"Selva Mary"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1621152501,"creation_date":1621152501,"answer_id":67554376,"question_id":45757635,"body_markdown":"Use the following to find the folder id with folder name. if such folder is not found it will result folderId as 0.\r\n      \r\n    let folderName = &quot;myFolder&quot;;\r\n    let result = await drive.files.list({\r\n        q: &quot;mimeType=&#39;application/vnd.google-apps.folder&#39; and trashed=false&quot;,\r\n        fields: &#39;nextPageToken, files(id, name)&#39;,\r\n        spaces: &#39;drive&#39;,\r\n    }).catch(e =&gt; console.log(&quot;eeee&quot;, e));\r\n    let folder = result.data.files.filter(x =&gt; x.name === folderName);\r\n    var folderId = folder.length?folder[0].id:0;\r\n    console.log(folder.id)\r\n\r\n","title":"Google DRIVE API V3 - Get a folder id with name","body":"<p>Use the following to find the folder id with folder name. if such folder is not found it will result folderId as 0.</p>\n<pre><code>let folderName = &quot;myFolder&quot;;\nlet result = await drive.files.list({\n    q: &quot;mimeType='application/vnd.google-apps.folder' and trashed=false&quot;,\n    fields: 'nextPageToken, files(id, name)',\n    spaces: 'drive',\n}).catch(e =&gt; console.log(&quot;eeee&quot;, e));\nlet folder = result.data.files.filter(x =&gt; x.name === folderName);\nvar folderId = folder.length?folder[0].id:0;\nconsole.log(folder.id)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7798349,"reputation":73,"user_id":5898690,"display_name":"fahad sulaiman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692004567,"creation_date":1692004567,"answer_id":76897693,"question_id":45757635,"body_markdown":"// $client will be get auth detail\r\n\r\n$server = new Google_Service_Drive ( $client );\r\n\r\n\t\t\t\t$metaDataArray= array(\r\n\t\t\t\t\tq=&gt;&quot;mimeType=&#39;application/vnd.google-apps.folder&#39; and name=&#39;folder_name&#39; and trashed=false&quot;,\r\n\t\t\t\t   spaces =&gt;&#39;drive&#39;,\r\n\t\t\t\t   fields =&gt;&#39;nextPageToken, files(id, name)&#39;,\r\n\t\t\t   );\r\n\r\n\t\t\t   $fl = $server-&gt;files-&gt;listFiles( $metaDataArray);\r\n\r\nThis is in php . you can just convert to java","title":"Google DRIVE API V3 - Get a folder id with name","body":"<p>// $client will be get auth detail</p>\n<p>$server = new Google_Service_Drive ( $client );</p>\n<pre><code>            $metaDataArray= array(\n                q=&gt;&quot;mimeType='application/vnd.google-apps.folder' and name='folder_name' and trashed=false&quot;,\n               spaces =&gt;'drive',\n               fields =&gt;'nextPageToken, files(id, name)',\n           );\n\n           $fl = $server-&gt;files-&gt;listFiles( $metaDataArray);\n</code></pre>\n<p>This is in php . you can just convert to java</p>\n"}],"owner":{"display_name":"user1510154"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14227,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1692004567,"creation_date":1503062160,"question_id":45757635,"body_markdown":"I could find only ways to get the root folder id from google drive api -[REFERENCE]: https://stackoverflow.com/questions/41483808/google-drive-api-v3-getting-root-folder-id-in-java . I have to get the folder id by giving a name. Is there anyway i could get Folder id of a directory in Drive by passing its name.","title":"Google DRIVE API V3 - Get a folder id with name","body":"<p>I could find only ways to get the root folder id from google drive api -[REFERENCE]: <a href=\"https://stackoverflow.com/questions/41483808/google-drive-api-v3-getting-root-folder-id-in-java\">Google Drive API v3 getting root folder Id in java</a> . I have to get the folder id by giving a name. Is there anyway i could get Folder id of a directory in Drive by passing its name.</p>\n"},{"tags":["java","javascript","websocket","vert.x"],"answers":[{"comments":[{"owner":{"display_name":"user3699849"},"score":0,"creation_date":1401871275,"post_id":24031519,"comment_id":37047719,"body_markdown":"Thank you for your answer but I have &quot;resolved&quot; my problem. I use a proxy and Wireshark show that this proxy cut my websocket http header. So my core didn&#39;t see the websocket connection. Without this proxy, the websocket works...","body":"Thank you for your answer but I have &quot;resolved&quot; my problem. I use a proxy and Wireshark show that this proxy cut my websocket http header. So my core didn&#39;t see the websocket connection. Without this proxy, the websocket works..."},{"owner":{"account_id":117631,"reputation":35009,"user_id":307976,"accept_rate":91,"display_name":"vtortola"},"score":0,"creation_date":1401926875,"post_id":24031519,"comment_id":37079854,"body_markdown":"Use wss:// (secure) connection then. Some proxies are not WS friendly and they try to alter the headers like in a normal HTTP request. Some proxies for example remove the &quot;Upgrade:websocket&quot; header (because is marked as &quot;Connection&quot;).","body":"Use wss:// (secure) connection then. Some proxies are not WS friendly and they try to alter the headers like in a normal HTTP request. Some proxies for example remove the &quot;Upgrade:websocket&quot; header (because is marked as &quot;Connection&quot;)."}],"tags":[],"owner":{"account_id":207868,"reputation":179,"user_id":458008,"accept_rate":100,"display_name":"Daniel"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1401867066,"creation_date":1401867066,"answer_id":24031519,"question_id":24031357,"body_markdown":"Yes, Websocket can do cross-domain, but you will need to have a handshake in order to get this going. You might want to take a look at: http://en.wikipedia.org/wiki/WebSockets for an example of a handshake.\r\n\r\nAlso related and maybe duplicate: https://stackoverflow.com/questions/4042691/web-sockets-make-ajax-cors-obsolete","title":"Websocket and cross-domain","body":"<p>Yes, Websocket can do cross-domain, but you will need to have a handshake in order to get this going. You might want to take a look at: <a href=\"http://en.wikipedia.org/wiki/WebSockets\" rel=\"nofollow noreferrer\">http://en.wikipedia.org/wiki/WebSockets</a> for an example of a handshake.</p>\n\n<p>Also related and maybe duplicate: <a href=\"https://stackoverflow.com/questions/4042691/web-sockets-make-ajax-cors-obsolete\">Web sockets make ajax/CORS obsolete?</a></p>\n"}],"owner":{"display_name":"user3699849"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17269,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1692003780,"creation_date":1401866356,"question_id":24031357,"body_markdown":"Currently, I am developing two webapps : \r\n\r\n- the core, developed in Java with Vert.x, receives data from a lot of other apps and sends it to client) \r\n- the client, developed in PHP/JS, display data from the core.\r\n\r\nThe client isn&#39;t on the same domain as my core for the production phase.\r\n\r\nSince my development period, the two webapps are hosted in the same computer. I used &quot;ws:\\\\\\\\localhost:9090&quot; to connect my client to my core and I had no problem to transfer data.\r\n\r\nBut, today, I try to replace localhost with my IP Address and, it didn&#39;t work :s\r\n\r\nI think that it&#39;s because the client isn&#39;t in the same domain as the core. But I don&#39;t know how I can correct this problem ?\r\n\r\nDo you have any idea ?\r\n\r\nThanks !\r\n\r\nCode example (based on my code but not my code ;) ):\r\n\r\n- For the core : http://pastebin.com/h2ZnBvQJ\r\n- For the client : http://pastebin.com/DR5BeABf ","title":"Websocket and cross-domain","body":"<p>Currently, I am developing two webapps : </p>\n\n<ul>\n<li>the core, developed in Java with Vert.x, receives data from a lot of other apps and sends it to client) </li>\n<li>the client, developed in PHP/JS, display data from the core.</li>\n</ul>\n\n<p>The client isn't on the same domain as my core for the production phase.</p>\n\n<p>Since my development period, the two webapps are hosted in the same computer. I used \"ws:\\\\localhost:9090\" to connect my client to my core and I had no problem to transfer data.</p>\n\n<p>But, today, I try to replace localhost with my IP Address and, it didn't work :s</p>\n\n<p>I think that it's because the client isn't in the same domain as the core. But I don't know how I can correct this problem ?</p>\n\n<p>Do you have any idea ?</p>\n\n<p>Thanks !</p>\n\n<p>Code example (based on my code but not my code ;) ):</p>\n\n<ul>\n<li>For the core : <a href=\"http://pastebin.com/h2ZnBvQJ\" rel=\"nofollow\">http://pastebin.com/h2ZnBvQJ</a></li>\n<li>For the client : <a href=\"http://pastebin.com/DR5BeABf\" rel=\"nofollow\">http://pastebin.com/DR5BeABf</a> </li>\n</ul>\n"},{"tags":["java","rest","spring-boot","gson"],"answers":[{"comments":[{"owner":{"account_id":1306591,"reputation":1077,"user_id":1255480,"accept_rate":45,"display_name":"A j"},"score":3,"creation_date":1526126826,"post_id":50032452,"comment_id":87628158,"body_markdown":"It turned out that one of my dependency projects was using gson, i removed that project&#39;s dependency on gson and the problem went away.","body":"It turned out that one of my dependency projects was using gson, i removed that project&#39;s dependency on gson and the problem went away."}],"tags":[],"owner":{"account_id":7233173,"reputation":626,"user_id":5519285,"display_name":"E. Makarovas"},"comment_count":1,"down_vote_count":0,"up_vote_count":56,"is_accepted":true,"score":56,"last_activity_date":1524696930,"creation_date":1524696930,"answer_id":50032452,"question_id":50031381,"body_markdown":"I would write this as a comment, but I still haven&#39;t got enough rep.\r\n\r\nThe problem must be with your dependencies. What happens here is that SpringBoot loads the [GsonAutoConfiguration][1] `@Configuration` class, which tries to call `GsonBuilder`&#39;s `setLenient()` method. SpringBoot already has the correct gson jar set as a dependency which should automatically be included in your build; however, explicitly specifying a dependency to gson would override the dependency brought by SpringBoot. Apparently, `setLenient()` still did not exist in the version of gson that you are using. \r\n\r\nThe best you can do is either remove the explicit dependency to gson from your pom.xml (or build.gradle, or whatever else you use), or update it to match the one which is expected by the SpringBoot version you are using.\r\n\r\nThis is the most recent version of gson, in case you are using a recent version of SpringBoot:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n        &lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n        &lt;version&gt;2.8.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nEDIT: it could also happen that even if you don&#39;t declare gson explicitly in your build, another one of your dependencies is using an older version of it, and it overrides the version which SpringBoot expects. In that case, instead of trying to brute-force through the problem, I would suggest to go through all your dependencies and make sure that the versions line up. Going through the dependencies and their versions listed in [Maven Central][2] might be a good idea.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/gson/GsonAutoConfiguration.html\r\n  [2]: https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-autoconfigure/2.0.1.RELEASE","title":"Why do I get Gson builder error when starting a Spring Boot application?","body":"<p>I would write this as a comment, but I still haven't got enough rep.</p>\n\n<p>The problem must be with your dependencies. What happens here is that SpringBoot loads the <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/gson/GsonAutoConfiguration.html\" rel=\"noreferrer\">GsonAutoConfiguration</a> <code>@Configuration</code> class, which tries to call <code>GsonBuilder</code>'s <code>setLenient()</code> method. SpringBoot already has the correct gson jar set as a dependency which should automatically be included in your build; however, explicitly specifying a dependency to gson would override the dependency brought by SpringBoot. Apparently, <code>setLenient()</code> still did not exist in the version of gson that you are using. </p>\n\n<p>The best you can do is either remove the explicit dependency to gson from your pom.xml (or build.gradle, or whatever else you use), or update it to match the one which is expected by the SpringBoot version you are using.</p>\n\n<p>This is the most recent version of gson, in case you are using a recent version of SpringBoot:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n    &lt;artifactId&gt;gson&lt;/artifactId&gt;\n    &lt;version&gt;2.8.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>EDIT: it could also happen that even if you don't declare gson explicitly in your build, another one of your dependencies is using an older version of it, and it overrides the version which SpringBoot expects. In that case, instead of trying to brute-force through the problem, I would suggest to go through all your dependencies and make sure that the versions line up. Going through the dependencies and their versions listed in <a href=\"https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-autoconfigure/2.0.1.RELEASE\" rel=\"noreferrer\">Maven Central</a> might be a good idea.</p>\n"},{"comments":[{"owner":{"account_id":3675763,"reputation":1288,"user_id":3061903,"accept_rate":55,"display_name":"Vishal Maral"},"score":2,"creation_date":1569165067,"post_id":50710072,"comment_id":102499186,"body_markdown":"What features will be missing if `GsonAutoConfiguration` is skipped?","body":"What features will be missing if <code>GsonAutoConfiguration</code> is skipped?"}],"tags":[],"owner":{"account_id":3211731,"reputation":3690,"user_id":2711596,"display_name":"Debasis"},"comment_count":1,"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1528239667,"creation_date":1528239667,"answer_id":50710072,"question_id":50031381,"body_markdown":"I faced the same problem and had to waste a lot of time trying to fix this.\r\n\r\nThe problem arises due to the version mismatch of the Gson library from existing dependencies already included in your project with that of Spring Boot&#39;s default one.\r\n\r\nThe easiest fix of this problem (that worked for me) is to replace each occurrence of the\r\n\r\n    @EnableAutoConfiguration\r\n\r\ntag with\r\n\r\n    @EnableAutoConfiguration(exclude = {org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration.class})\r\n\r\nwhich basically tells the Spring boot application to skip auto configuration for Gson.\r\n\r\nThis solution also applies to any other class that might create the same problem. You just need to add the name of each such conflicting class to the **exclude** attribute of **EnableAutoConfiguration**. ","title":"Why do I get Gson builder error when starting a Spring Boot application?","body":"<p>I faced the same problem and had to waste a lot of time trying to fix this.</p>\n\n<p>The problem arises due to the version mismatch of the Gson library from existing dependencies already included in your project with that of Spring Boot's default one.</p>\n\n<p>The easiest fix of this problem (that worked for me) is to replace each occurrence of the</p>\n\n<pre><code>@EnableAutoConfiguration\n</code></pre>\n\n<p>tag with</p>\n\n<pre><code>@EnableAutoConfiguration(exclude = {org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration.class})\n</code></pre>\n\n<p>which basically tells the Spring boot application to skip auto configuration for Gson.</p>\n\n<p>This solution also applies to any other class that might create the same problem. You just need to add the name of each such conflicting class to the <strong>exclude</strong> attribute of <strong>EnableAutoConfiguration</strong>. </p>\n"},{"comments":[{"owner":{"account_id":3253096,"reputation":4401,"user_id":2987755,"accept_rate":50,"display_name":"dkb"},"score":0,"creation_date":1539692233,"post_id":52834955,"comment_id":92586570,"body_markdown":"How this answer is different from already existing answer: https://stackoverflow.com/a/50710072/2987755 ?","body":"How this answer is different from already existing answer: <a href=\"https://stackoverflow.com/a/50710072/2987755\">stackoverflow.com/a/50710072/2987755</a> ?"},{"owner":{"account_id":1701147,"reputation":129,"user_id":1561183,"display_name":"Geraldo Ferraz"},"score":1,"creation_date":1539696138,"post_id":52834955,"comment_id":92589027,"body_markdown":"It does not explain the root cause of the problem. So the solution may be either one: removing the dependency or removing the auto-configuration","body":"It does not explain the root cause of the problem. So the solution may be either one: removing the dependency or removing the auto-configuration"}],"tags":[],"owner":{"account_id":1701147,"reputation":129,"user_id":1561183,"display_name":"Geraldo Ferraz"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1539691141,"creation_date":1539691141,"answer_id":52834955,"question_id":50031381,"body_markdown":"I think the problem is related to how Spring triggers the &quot;AutoConfiguration&quot;. In this case the &quot;GsonAutoConfiguration&quot; is triggered on the presence of com.google.gson.Gson.class, even if you are not using it, as it has the @ConditionalOnClass(value=Gson.class) annotation.\r\n\r\nSo the solution may be either removing the dependency that has Gson class or removing the specific &quot;AutoConfiguration&quot;:\r\n\r\n@EnableAutoConfiguration(exclude = {org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration.class})\r\n\r\n\r\nhttps://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/gson/GsonAutoConfiguration.html","title":"Why do I get Gson builder error when starting a Spring Boot application?","body":"<p>I think the problem is related to how Spring triggers the \"AutoConfiguration\". In this case the \"GsonAutoConfiguration\" is triggered on the presence of com.google.gson.Gson.class, even if you are not using it, as it has the @ConditionalOnClass(value=Gson.class) annotation.</p>\n\n<p>So the solution may be either removing the dependency that has Gson class or removing the specific \"AutoConfiguration\":</p>\n\n<p>@EnableAutoConfiguration(exclude = {org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration.class})</p>\n\n<p><a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/gson/GsonAutoConfiguration.html\" rel=\"noreferrer\">https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/gson/GsonAutoConfiguration.html</a></p>\n"},{"tags":[],"owner":{"account_id":13507264,"reputation":283,"user_id":9744855,"display_name":"Nisarg Bhagavantanavar"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1562516301,"creation_date":1562516301,"answer_id":56923959,"question_id":50031381,"body_markdown":"Ok, same problem i have faced , issue is due to version mismatch between spring boot and gson....solution is remove version\r\n\r\n    &lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.1.6.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;!-- Gson dependency --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n[refer my pom.xml snip png][1] \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HPNQ3.png","title":"Why do I get Gson builder error when starting a Spring Boot application?","body":"<p>Ok, same problem i have faced , issue is due to version mismatch between spring boot and gson....solution is remove version</p>\n\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.1.6.RELEASE&lt;/version&gt;\n    &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n\n&lt;properties&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;!-- Gson dependency --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n        &lt;artifactId&gt;gson&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/HPNQ3.png\" rel=\"nofollow noreferrer\">refer my pom.xml snip png</a> </p>\n"},{"comments":[{"owner":{"account_id":5641224,"reputation":2476,"user_id":4465028,"accept_rate":68,"display_name":"Gherbi Hicham"},"score":0,"creation_date":1635454189,"post_id":60865354,"comment_id":123310272,"body_markdown":"this is the only method that takes into consideration excluding the dependency.","body":"this is the only method that takes into consideration excluding the dependency."}],"tags":[],"owner":{"account_id":6499111,"reputation":906,"user_id":5030597,"display_name":"Kyrylo Semenko"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1585219136,"creation_date":1585219136,"answer_id":60865354,"question_id":50031381,"body_markdown":"You can exclude GsonAutoConfiguration\r\n    \r\n    @SpringBootApplication(exclude = {org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration.class})","title":"Why do I get Gson builder error when starting a Spring Boot application?","body":"<p>You can exclude GsonAutoConfiguration</p>\n\n<pre><code>@SpringBootApplication(exclude = {org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration.class})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17923040,"reputation":59,"user_id":13022329,"display_name":"CHARITRA JAIN"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1612771033,"creation_date":1612769966,"answer_id":66097530,"question_id":50031381,"body_markdown":"Just remove the version number the Maven dependency.\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n    &lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Why do I get Gson builder error when starting a Spring Boot application?","body":"<p>Just remove the version number the Maven dependency.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n    &lt;artifactId&gt;gson&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15832854,"reputation":707,"user_id":11423630,"display_name":"Shubham"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692003666,"creation_date":1692003666,"answer_id":76897597,"question_id":50031381,"body_markdown":"Just update the Gson version then it will match with the latest version of spring boot.\r\n\r\n         // https://mvnrepository.com/artifact/com.google.code.gson/gson\r\n    \timplementation group: &#39;com.google.code.gson&#39;, name: &#39;gson&#39;, version: &#39;2.8.1&#39;","title":"Why do I get Gson builder error when starting a Spring Boot application?","body":"<p>Just update the Gson version then it will match with the latest version of spring boot.</p>\n<pre><code>     // https://mvnrepository.com/artifact/com.google.code.gson/gson\n    implementation group: 'com.google.code.gson', name: 'gson', version: '2.8.1'\n</code></pre>\n"}],"owner":{"account_id":1306591,"reputation":1077,"user_id":1255480,"accept_rate":45,"display_name":"A j"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46426,"favorite_count":0,"down_vote_count":0,"up_vote_count":33,"accepted_answer_id":50032452,"answer_count":7,"score":33,"last_activity_date":1692003666,"creation_date":1524690533,"question_id":50031381,"body_markdown":"I have downloaded eclipse and installed the spring suit into it.\r\nI have written a JPA based Rest application by following one of the spring.io guides. When I try to run it as spring boot application.\r\nI get the following error.\r\n\r\n    java.lang.NoSuchMethodError: com.google.gson.GsonBuilder.setLenient()Lcom/google/gson/GsonBuilder;\r\n\r\nWhy am I getting this error? How do I fix this error?\r\n\r\nHere is the full output from the console.\r\n\r\n\r\n      .   ____          _            __ _ _\r\n     /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n    ( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n     \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n      &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n     =========|_|==============|___/=/_/_/_/\r\n     :: Spring Boot ::        (v2.0.1.RELEASE)\r\n    \r\n    2018-04-25 21:58:28.303  INFO 3574 --- [           main] .m.e.UserProfileEntityServiceApplication : Starting UserProfileEntityServiceApplication on Ajays-MBP.lan with PID 3574 (/Users/ajayamrite/workspaces/meghdoot_spring/UserProfileEntityService/target/classes started by ajayamrite in /Users/ajayamrite/workspaces/meghdoot_spring/UserProfileEntityService)\r\n    2018-04-25 21:58:28.306  INFO 3574 --- [           main] .m.e.UserProfileEntityServiceApplication : No active profile set, falling back to default profiles: default\r\n    2018-04-25 21:58:28.359  INFO 3574 --- [           main] ConfigServletWebServerApplicationContext : Refreshing org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@3bd40a57: startup date [Wed Apr 25 21:58:28 BST 2018]; root of context hierarchy\r\n    2018-04-25 21:58:29.557  INFO 3574 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Overriding bean definition for bean &#39;httpRequestHandlerAdapter&#39; with a different definition: replacing [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration; factoryMethodName=httpRequestHandlerAdapter; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]] with [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.data.rest.webmvc.config.RepositoryRestMvcConfiguration; factoryMethodName=httpRequestHandlerAdapter; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/data/rest/webmvc/config/RepositoryRestMvcConfiguration.class]]\r\n    2018-04-25 21:58:30.142  INFO 3574 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean &#39;org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration&#39; of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$8d2d15cf] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\r\n    2018-04-25 21:58:30.553  INFO 3574 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n    2018-04-25 21:58:30.612  INFO 3574 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n    2018-04-25 21:58:30.612  INFO 3574 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/8.5.29\r\n    2018-04-25 21:58:30.617  INFO 3574 --- [ost-startStop-1] o.a.catalina.core.AprLifecycleListener   : The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: [/Users/ajayamrite/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.]\r\n    2018-04-25 21:58:30.716  INFO 3574 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n    2018-04-25 21:58:30.716  INFO 3574 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 2360 ms\r\n    2018-04-25 21:58:30.826  INFO 3574 --- [ost-startStop-1] o.s.b.w.servlet.ServletRegistrationBean  : Servlet dispatcherServlet mapped to [/]\r\n    2018-04-25 21:58:30.830  INFO 3574 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: &#39;characterEncodingFilter&#39; to: [/*]\r\n    2018-04-25 21:58:30.831  INFO 3574 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: &#39;hiddenHttpMethodFilter&#39; to: [/*]\r\n    2018-04-25 21:58:30.831  INFO 3574 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: &#39;httpPutFormContentFilter&#39; to: [/*]\r\n    2018-04-25 21:58:30.831  INFO 3574 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: &#39;requestContextFilter&#39; to: [/*]\r\n    2018-04-25 21:58:31.049  INFO 3574 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n    Wed Apr 25 21:58:31 BST 2018 WARN: Establishing SSL connection without server&#39;s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn&#39;t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to &#39;false&#39;. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\r\n    2018-04-25 21:58:31.311  INFO 3574 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\r\n    2018-04-25 21:58:31.373  INFO 3574 --- [           main] j.LocalContainerEntityManagerFactoryBean : Building JPA container EntityManagerFactory for persistence unit &#39;default&#39;\r\n    Wed Apr 25 21:58:31 BST 2018 WARN: Establishing SSL connection without server&#39;s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn&#39;t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to &#39;false&#39;. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\r\n    Wed Apr 25 21:58:31 BST 2018 WARN: Establishing SSL connection without server&#39;s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn&#39;t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to &#39;false&#39;. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\r\n    2018-04-25 21:58:31.443  INFO 3574 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [\r\n    \tname: default\r\n    \t...]\r\n    Wed Apr 25 21:58:31 BST 2018 WARN: Establishing SSL connection without server&#39;s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn&#39;t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to &#39;false&#39;. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\r\n    Wed Apr 25 21:58:31 BST 2018 WARN: Establishing SSL connection without server&#39;s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn&#39;t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to &#39;false&#39;. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\r\n    Wed Apr 25 21:58:31 BST 2018 WARN: Establishing SSL connection without server&#39;s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn&#39;t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to &#39;false&#39;. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\r\n    Wed Apr 25 21:58:31 BST 2018 WARN: Establishing SSL connection without server&#39;s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn&#39;t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to &#39;false&#39;. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\r\n    Wed Apr 25 21:58:31 BST 2018 WARN: Establishing SSL connection without server&#39;s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn&#39;t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to &#39;false&#39;. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\r\n    Wed Apr 25 21:58:31 BST 2018 WARN: Establishing SSL connection without server&#39;s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn&#39;t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to &#39;false&#39;. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\r\n    Wed Apr 25 21:58:31 BST 2018 WARN: Establishing SSL connection without server&#39;s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn&#39;t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to &#39;false&#39;. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\r\n    2018-04-25 21:58:31.674  INFO 3574 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate Core {5.2.16.Final}\r\n    2018-04-25 21:58:31.675  INFO 3574 --- [           main] org.hibernate.cfg.Environment            : HHH000206: hibernate.properties not found\r\n    2018-04-25 21:58:31.717  INFO 3574 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.0.1.Final}\r\n    2018-04-25 21:58:31.854  INFO 3574 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect\r\n    2018-04-25 21:58:32.718  INFO 3574 --- [           main] o.h.t.schema.internal.SchemaCreatorImpl  : HHH000476: Executing import script &#39;org.hibernate.tool.schema.internal.exec.ScriptSourceInputNonExistentImpl@294aba23&#39;\r\n    2018-04-25 21:58:32.722  INFO 3574 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n    2018-04-25 21:58:33.709  INFO 3574 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]\r\n    2018-04-25 21:58:33.881  INFO 3574 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : Looking for @ControllerAdvice: org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@3bd40a57: startup date [Wed Apr 25 21:58:28 BST 2018]; root of context hierarchy\r\n    2018-04-25 21:58:33.917  WARN 3574 --- [           main] aWebConfiguration$JpaWebMvcConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\r\n    2018-04-25 21:58:33.947  INFO 3574 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped &quot;{[/error]}&quot; onto public org.springframework.http.ResponseEntity&lt;java.util.Map&lt;java.lang.String, java.lang.Object&gt;&gt; org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController.error(javax.servlet.http.HttpServletRequest)\r\n    2018-04-25 21:58:33.947  INFO 3574 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped &quot;{[/error],produces=[text/html]}&quot; onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)\r\n    2018-04-25 21:58:33.967  INFO 3574 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]\r\n    2018-04-25 21:58:33.967  INFO 3574 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]\r\n    2018-04-25 21:58:33.977  INFO 3574 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : Detected @ExceptionHandler methods in repositoryRestExceptionHandler\r\n    2018-04-25 21:58:34.103  WARN 3574 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;gsonBuilder&#39; defined in class path resource [org/springframework/boot/autoconfigure/gson/GsonAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.google.gson.GsonBuilder]: Factory method &#39;gsonBuilder&#39; threw exception; nested exception is java.lang.BootstrapMethodError: java.lang.NoSuchMethodError: com.google.gson.GsonBuilder.setLenient()Lcom/google/gson/GsonBuilder;\r\n    2018-04-25 21:58:34.103  INFO 3574 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Unregistering JMX-exposed beans on shutdown\r\n    2018-04-25 21:58:34.105  INFO 3574 --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n    2018-04-25 21:58:34.106  INFO 3574 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\r\n    2018-04-25 21:58:34.109  INFO 3574 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.\r\n    2018-04-25 21:58:34.110  INFO 3574 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\n    2018-04-25 21:58:34.120  INFO 3574 --- [           main] ConditionEvaluationReportLoggingListener : \r\n    \r\n    Error starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n    2018-04-25 21:58:34.128 ERROR 3574 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n    \r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;gsonBuilder&#39; defined in class path resource [org/springframework/boot/autoconfigure/gson/GsonAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.google.gson.GsonBuilder]: Factory method &#39;gsonBuilder&#39; threw exception; nested exception is java.lang.BootstrapMethodError: java.lang.NoSuchMethodError: com.google.gson.GsonBuilder.setLenient()Lcom/google/gson/GsonBuilder;\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:587) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1250) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1099) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:541) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:501) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:317) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:760) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:869) ~[spring-context-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550) ~[spring-context-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:140) ~[spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:759) [spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:395) [spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:327) [spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1255) [spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1243) [spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\r\n    \tat co.uk.meghdoot.entity.UserProfileEntityServiceApplication.main(UserProfileEntityServiceApplication.java:12) [classes/:na]\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.google.gson.GsonBuilder]: Factory method &#39;gsonBuilder&#39; threw exception; nested exception is java.lang.BootstrapMethodError: java.lang.NoSuchMethodError: com.google.gson.GsonBuilder.setLenient()Lcom/google/gson/GsonBuilder;\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:579) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \t... 18 common frames omitted\r\n    Caused by: java.lang.BootstrapMethodError: java.lang.NoSuchMethodError: com.google.gson.GsonBuilder.setLenient()Lcom/google/gson/GsonBuilder;\r\n    \tat org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration$StandardGsonBuilderCustomizer.customize(GsonAutoConfiguration.java:96) ~[spring-boot-autoconfigure-2.0.1.RELEASE.jar:2.0.1.RELEASE]\r\n    \tat org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration.lambda$gsonBuilder$0(GsonAutoConfiguration.java:49) ~[spring-boot-autoconfigure-2.0.1.RELEASE.jar:2.0.1.RELEASE]\r\n    \tat java.util.ArrayList.forEach(ArrayList.java:1249) ~[na:1.8.0_144]\r\n    \tat org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration.gsonBuilder(GsonAutoConfiguration.java:49) ~[spring-boot-autoconfigure-2.0.1.RELEASE.jar:2.0.1.RELEASE]\r\n    \tat org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration$$EnhancerBySpringCGLIB$$cbe82959.CGLIB$gsonBuilder$1(&lt;generated&gt;) ~[spring-boot-autoconfigure-2.0.1.RELEASE.jar:2.0.1.RELEASE]\r\n    \tat org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration$$EnhancerBySpringCGLIB$$cbe82959$$FastClassBySpringCGLIB$$6d1b6b91.invoke(&lt;generated&gt;) ~[spring-boot-autoconfigure-2.0.1.RELEASE.jar:2.0.1.RELEASE]\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228) ~[spring-core-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:361) ~[spring-context-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration$$EnhancerBySpringCGLIB$$cbe82959.gsonBuilder(&lt;generated&gt;) ~[spring-boot-autoconfigure-2.0.1.RELEASE.jar:2.0.1.RELEASE]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_144]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_144]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_144]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_144]\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \t... 19 common frames omitted\r\n    Caused by: java.lang.NoSuchMethodError: com.google.gson.GsonBuilder.setLenient()Lcom/google/gson/GsonBuilder;\r\n    \tat java.lang.invoke.MethodHandleNatives.resolve(Native Method) ~[na:1.8.0_144]\r\n    \tat java.lang.invoke.MemberName$Factory.resolve(MemberName.java:975) ~[na:1.8.0_144]\r\n    \tat java.lang.invoke.MemberName$Factory.resolveOrFail(MemberName.java:1000) ~[na:1.8.0_144]\r\n    \tat java.lang.invoke.MethodHandles$Lookup.resolveOrFail(MethodHandles.java:1394) ~[na:1.8.0_144]\r\n    \tat java.lang.invoke.MethodHandles$Lookup.linkMethodHandleConstant(MethodHandles.java:1750) ~[na:1.8.0_144]\r\n    \tat java.lang.invoke.MethodHandleNatives.linkMethodHandleConstant(MethodHandleNatives.java:477) ~[na:1.8.0_144]\r\n    \t... 33 common frames omitted\r\n\r\n","title":"Why do I get Gson builder error when starting a Spring Boot application?","body":"<p>I have downloaded eclipse and installed the spring suit into it.\nI have written a JPA based Rest application by following one of the spring.io guides. When I try to run it as spring boot application.\nI get the following error.</p>\n\n<pre><code>java.lang.NoSuchMethodError: com.google.gson.GsonBuilder.setLenient()Lcom/google/gson/GsonBuilder;\n</code></pre>\n\n<p>Why am I getting this error? How do I fix this error?</p>\n\n<p>Here is the full output from the console.</p>\n\n<pre><code>  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::        (v2.0.1.RELEASE)\n\n2018-04-25 21:58:28.303  INFO 3574 --- [           main] .m.e.UserProfileEntityServiceApplication : Starting UserProfileEntityServiceApplication on Ajays-MBP.lan with PID 3574 (/Users/ajayamrite/workspaces/meghdoot_spring/UserProfileEntityService/target/classes started by ajayamrite in /Users/ajayamrite/workspaces/meghdoot_spring/UserProfileEntityService)\n2018-04-25 21:58:28.306  INFO 3574 --- [           main] .m.e.UserProfileEntityServiceApplication : No active profile set, falling back to default profiles: default\n2018-04-25 21:58:28.359  INFO 3574 --- [           main] ConfigServletWebServerApplicationContext : Refreshing org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@3bd40a57: startup date [Wed Apr 25 21:58:28 BST 2018]; root of context hierarchy\n2018-04-25 21:58:29.557  INFO 3574 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Overriding bean definition for bean 'httpRequestHandlerAdapter' with a different definition: replacing [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration; factoryMethodName=httpRequestHandlerAdapter; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]] with [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.data.rest.webmvc.config.RepositoryRestMvcConfiguration; factoryMethodName=httpRequestHandlerAdapter; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/data/rest/webmvc/config/RepositoryRestMvcConfiguration.class]]\n2018-04-25 21:58:30.142  INFO 3574 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$8d2d15cf] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n2018-04-25 21:58:30.553  INFO 3574 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2018-04-25 21:58:30.612  INFO 3574 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2018-04-25 21:58:30.612  INFO 3574 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/8.5.29\n2018-04-25 21:58:30.617  INFO 3574 --- [ost-startStop-1] o.a.catalina.core.AprLifecycleListener   : The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: [/Users/ajayamrite/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.]\n2018-04-25 21:58:30.716  INFO 3574 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2018-04-25 21:58:30.716  INFO 3574 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 2360 ms\n2018-04-25 21:58:30.826  INFO 3574 --- [ost-startStop-1] o.s.b.w.servlet.ServletRegistrationBean  : Servlet dispatcherServlet mapped to [/]\n2018-04-25 21:58:30.830  INFO 3574 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'characterEncodingFilter' to: [/*]\n2018-04-25 21:58:30.831  INFO 3574 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'hiddenHttpMethodFilter' to: [/*]\n2018-04-25 21:58:30.831  INFO 3574 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'httpPutFormContentFilter' to: [/*]\n2018-04-25 21:58:30.831  INFO 3574 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'requestContextFilter' to: [/*]\n2018-04-25 21:58:31.049  INFO 3574 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\nWed Apr 25 21:58:31 BST 2018 WARN: Establishing SSL connection without server's identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn't set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to 'false'. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\n2018-04-25 21:58:31.311  INFO 3574 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2018-04-25 21:58:31.373  INFO 3574 --- [           main] j.LocalContainerEntityManagerFactoryBean : Building JPA container EntityManagerFactory for persistence unit 'default'\nWed Apr 25 21:58:31 BST 2018 WARN: Establishing SSL connection without server's identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn't set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to 'false'. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\nWed Apr 25 21:58:31 BST 2018 WARN: Establishing SSL connection without server's identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn't set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to 'false'. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\n2018-04-25 21:58:31.443  INFO 3574 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [\n    name: default\n    ...]\nWed Apr 25 21:58:31 BST 2018 WARN: Establishing SSL connection without server's identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn't set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to 'false'. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\nWed Apr 25 21:58:31 BST 2018 WARN: Establishing SSL connection without server's identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn't set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to 'false'. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\nWed Apr 25 21:58:31 BST 2018 WARN: Establishing SSL connection without server's identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn't set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to 'false'. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\nWed Apr 25 21:58:31 BST 2018 WARN: Establishing SSL connection without server's identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn't set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to 'false'. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\nWed Apr 25 21:58:31 BST 2018 WARN: Establishing SSL connection without server's identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn't set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to 'false'. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\nWed Apr 25 21:58:31 BST 2018 WARN: Establishing SSL connection without server's identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn't set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to 'false'. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\nWed Apr 25 21:58:31 BST 2018 WARN: Establishing SSL connection without server's identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn't set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to 'false'. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\n2018-04-25 21:58:31.674  INFO 3574 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate Core {5.2.16.Final}\n2018-04-25 21:58:31.675  INFO 3574 --- [           main] org.hibernate.cfg.Environment            : HHH000206: hibernate.properties not found\n2018-04-25 21:58:31.717  INFO 3574 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.0.1.Final}\n2018-04-25 21:58:31.854  INFO 3574 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect\n2018-04-25 21:58:32.718  INFO 3574 --- [           main] o.h.t.schema.internal.SchemaCreatorImpl  : HHH000476: Executing import script 'org.hibernate.tool.schema.internal.exec.ScriptSourceInputNonExistentImpl@294aba23'\n2018-04-25 21:58:32.722  INFO 3574 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'\n2018-04-25 21:58:33.709  INFO 3574 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]\n2018-04-25 21:58:33.881  INFO 3574 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : Looking for @ControllerAdvice: org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@3bd40a57: startup date [Wed Apr 25 21:58:28 BST 2018]; root of context hierarchy\n2018-04-25 21:58:33.917  WARN 3574 --- [           main] aWebConfiguration$JpaWebMvcConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\n2018-04-25 21:58:33.947  INFO 3574 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped \"{[/error]}\" onto public org.springframework.http.ResponseEntity&lt;java.util.Map&lt;java.lang.String, java.lang.Object&gt;&gt; org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController.error(javax.servlet.http.HttpServletRequest)\n2018-04-25 21:58:33.947  INFO 3574 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped \"{[/error],produces=[text/html]}\" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)\n2018-04-25 21:58:33.967  INFO 3574 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]\n2018-04-25 21:58:33.967  INFO 3574 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]\n2018-04-25 21:58:33.977  INFO 3574 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : Detected @ExceptionHandler methods in repositoryRestExceptionHandler\n2018-04-25 21:58:34.103  WARN 3574 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'gsonBuilder' defined in class path resource [org/springframework/boot/autoconfigure/gson/GsonAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.google.gson.GsonBuilder]: Factory method 'gsonBuilder' threw exception; nested exception is java.lang.BootstrapMethodError: java.lang.NoSuchMethodError: com.google.gson.GsonBuilder.setLenient()Lcom/google/gson/GsonBuilder;\n2018-04-25 21:58:34.103  INFO 3574 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Unregistering JMX-exposed beans on shutdown\n2018-04-25 21:58:34.105  INFO 3574 --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'\n2018-04-25 21:58:34.106  INFO 3574 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\n2018-04-25 21:58:34.109  INFO 3574 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.\n2018-04-25 21:58:34.110  INFO 3574 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2018-04-25 21:58:34.120  INFO 3574 --- [           main] ConditionEvaluationReportLoggingListener : \n\nError starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2018-04-25 21:58:34.128 ERROR 3574 --- [           main] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'gsonBuilder' defined in class path resource [org/springframework/boot/autoconfigure/gson/GsonAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.google.gson.GsonBuilder]: Factory method 'gsonBuilder' threw exception; nested exception is java.lang.BootstrapMethodError: java.lang.NoSuchMethodError: com.google.gson.GsonBuilder.setLenient()Lcom/google/gson/GsonBuilder;\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:587) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1250) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1099) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:541) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:501) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:317) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:760) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:869) ~[spring-context-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550) ~[spring-context-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:140) ~[spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:759) [spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:395) [spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:327) [spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1255) [spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1243) [spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\n    at co.uk.meghdoot.entity.UserProfileEntityServiceApplication.main(UserProfileEntityServiceApplication.java:12) [classes/:na]\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.google.gson.GsonBuilder]: Factory method 'gsonBuilder' threw exception; nested exception is java.lang.BootstrapMethodError: java.lang.NoSuchMethodError: com.google.gson.GsonBuilder.setLenient()Lcom/google/gson/GsonBuilder;\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:579) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    ... 18 common frames omitted\nCaused by: java.lang.BootstrapMethodError: java.lang.NoSuchMethodError: com.google.gson.GsonBuilder.setLenient()Lcom/google/gson/GsonBuilder;\n    at org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration$StandardGsonBuilderCustomizer.customize(GsonAutoConfiguration.java:96) ~[spring-boot-autoconfigure-2.0.1.RELEASE.jar:2.0.1.RELEASE]\n    at org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration.lambda$gsonBuilder$0(GsonAutoConfiguration.java:49) ~[spring-boot-autoconfigure-2.0.1.RELEASE.jar:2.0.1.RELEASE]\n    at java.util.ArrayList.forEach(ArrayList.java:1249) ~[na:1.8.0_144]\n    at org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration.gsonBuilder(GsonAutoConfiguration.java:49) ~[spring-boot-autoconfigure-2.0.1.RELEASE.jar:2.0.1.RELEASE]\n    at org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration$$EnhancerBySpringCGLIB$$cbe82959.CGLIB$gsonBuilder$1(&lt;generated&gt;) ~[spring-boot-autoconfigure-2.0.1.RELEASE.jar:2.0.1.RELEASE]\n    at org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration$$EnhancerBySpringCGLIB$$cbe82959$$FastClassBySpringCGLIB$$6d1b6b91.invoke(&lt;generated&gt;) ~[spring-boot-autoconfigure-2.0.1.RELEASE.jar:2.0.1.RELEASE]\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228) ~[spring-core-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:361) ~[spring-context-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration$$EnhancerBySpringCGLIB$$cbe82959.gsonBuilder(&lt;generated&gt;) ~[spring-boot-autoconfigure-2.0.1.RELEASE.jar:2.0.1.RELEASE]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_144]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_144]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_144]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_144]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    ... 19 common frames omitted\nCaused by: java.lang.NoSuchMethodError: com.google.gson.GsonBuilder.setLenient()Lcom/google/gson/GsonBuilder;\n    at java.lang.invoke.MethodHandleNatives.resolve(Native Method) ~[na:1.8.0_144]\n    at java.lang.invoke.MemberName$Factory.resolve(MemberName.java:975) ~[na:1.8.0_144]\n    at java.lang.invoke.MemberName$Factory.resolveOrFail(MemberName.java:1000) ~[na:1.8.0_144]\n    at java.lang.invoke.MethodHandles$Lookup.resolveOrFail(MethodHandles.java:1394) ~[na:1.8.0_144]\n    at java.lang.invoke.MethodHandles$Lookup.linkMethodHandleConstant(MethodHandles.java:1750) ~[na:1.8.0_144]\n    at java.lang.invoke.MethodHandleNatives.linkMethodHandleConstant(MethodHandleNatives.java:477) ~[na:1.8.0_144]\n    ... 33 common frames omitted\n</code></pre>\n"},{"tags":["java","maven","jetty","wiremock"],"answers":[{"comments":[{"owner":{"account_id":1503775,"reputation":18065,"user_id":1407656,"accept_rate":81,"display_name":"toniedzwiedz"},"score":0,"creation_date":1491894492,"post_id":43327317,"comment_id":73741151,"body_markdown":"Yes, I&#39;m aware of that. One of the libraries I&#39;m using has a dependency on `cobertura`, which has a dependency on `servlet-api-2.5`. I was looking for a way to work around this problem.","body":"Yes, I&#39;m aware of that. One of the libraries I&#39;m using has a dependency on <code>cobertura</code>, which has a dependency on <code>servlet-api-2.5</code>. I was looking for a way to work around this problem."},{"owner":{"account_id":406289,"reputation":47511,"user_id":775715,"accept_rate":100,"display_name":"Joakim Erdfelt"},"score":0,"creation_date":1491923130,"post_id":43327317,"comment_id":73762542,"body_markdown":"Not possible.  You have to select a single servlet-api for your project, you cannot have multiple.   Since you are using Jetty 9.2.x, I would recommend using Servlet 3.1.  Cobertura wont care that a newer servlet api exists, but everything else will care about the older servlet-api.","body":"Not possible.  You have to select a single servlet-api for your project, you cannot have multiple.   Since you are using Jetty 9.2.x, I would recommend using Servlet 3.1.  Cobertura wont care that a newer servlet api exists, but everything else will care about the older servlet-api."},{"owner":{"account_id":1503775,"reputation":18065,"user_id":1407656,"accept_rate":81,"display_name":"toniedzwiedz"},"score":0,"creation_date":1491923827,"post_id":43327317,"comment_id":73763033,"body_markdown":"Excluding the implicit servlet API dependency introduced by Cobertura did the trick, see the other answer.","body":"Excluding the implicit servlet API dependency introduced by Cobertura did the trick, see the other answer."}],"tags":[],"owner":{"account_id":406289,"reputation":47511,"user_id":775715,"accept_rate":100,"display_name":"Joakim Erdfelt"},"comment_count":3,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1491838332,"creation_date":1491838332,"answer_id":43327317,"question_id":43327076,"body_markdown":"Check your servlet-api version, you likely are using an old version.\r\n\r\nBoth of those methods were added in Servlet 3.0\r\n\r\n * [`HttpServletResponse.getHeader(String name)`][1]\r\n * [`HttpServletRequest.isAsyncStarted()`][2]\r\n\r\nYou probably have the Servlet 2.5 (or Servlet 2.4) jar in your classpath.\r\n\r\n  [1]: http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletResponse.html#getHeader-java.lang.String-\r\n  [2]: http://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#isAsyncStarted--","title":"WireMock fails with NoSuchMethodError HttpServletResponse.getHeader","body":"<p>Check your servlet-api version, you likely are using an old version.</p>\n\n<p>Both of those methods were added in Servlet 3.0</p>\n\n<ul>\n<li><a href=\"http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletResponse.html#getHeader-java.lang.String-\" rel=\"noreferrer\"><code>HttpServletResponse.getHeader(String name)</code></a></li>\n<li><a href=\"http://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#isAsyncStarted--\" rel=\"noreferrer\"><code>HttpServletRequest.isAsyncStarted()</code></a></li>\n</ul>\n\n<p>You probably have the Servlet 2.5 (or Servlet 2.4) jar in your classpath.</p>\n"},{"comments":[{"owner":{"account_id":406289,"reputation":47511,"user_id":775715,"accept_rate":100,"display_name":"Joakim Erdfelt"},"score":0,"creation_date":1502977364,"post_id":43339109,"comment_id":78431261,"body_markdown":"You should be excluding that older version of Jetty, not the servlet-api specifically.","body":"You should be excluding that older version of Jetty, not the servlet-api specifically."}],"tags":[],"owner":{"account_id":1503775,"reputation":18065,"user_id":1407656,"accept_rate":81,"display_name":"toniedzwiedz"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1494062775,"creation_date":1491894785,"answer_id":43339109,"question_id":43327076,"body_markdown":"As mentioned, in the question, one of the libraries I was using had a dependency on Cobertura, which in turn introducde a dependency on Servlet API 2.5 (both as a transitive dependency via an older verison of Jetty and a direct dependency).\r\n\r\n[![Cobertura dependency][1]][1]\r\n\r\nExcluding the artifact from the original dependency (the one dependent on cobertura) allowed me to run my test successfully.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.cognifide.slice&lt;/groupId&gt;\r\n        &lt;artifactId&gt;slice-core-api&lt;/artifactId&gt;\r\n        &lt;version&gt;${slice.version}&lt;/version&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;exclusions&gt;\r\n            &lt;exclusion&gt;\r\n                &lt;groupId&gt;org.mortbay.jetty&lt;/groupId&gt;\r\n                &lt;artifactId&gt;servlet-api-2.5&lt;/artifactId&gt;\r\n            &lt;/exclusion&gt;\r\n        &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\r\n\n\r\n  [1]: https://i.stack.imgur.com/Us0Gm.png","title":"WireMock fails with NoSuchMethodError HttpServletResponse.getHeader","body":"<p>As mentioned, in the question, one of the libraries I was using had a dependency on Cobertura, which in turn introducde a dependency on Servlet API 2.5 (both as a transitive dependency via an older verison of Jetty and a direct dependency).</p>\n\n<p><a href=\"https://i.stack.imgur.com/Us0Gm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Us0Gm.png\" alt=\"Cobertura dependency\"></a></p>\n\n<p>Excluding the artifact from the original dependency (the one dependent on cobertura) allowed me to run my test successfully.</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.cognifide.slice&lt;/groupId&gt;\n    &lt;artifactId&gt;slice-core-api&lt;/artifactId&gt;\n    &lt;version&gt;${slice.version}&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;org.mortbay.jetty&lt;/groupId&gt;\n            &lt;artifactId&gt;servlet-api-2.5&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":539660,"reputation":15051,"user_id":907576,"accept_rate":62,"display_name":"radistao"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1692003640,"creation_date":1692003640,"answer_id":76897593,"question_id":43327076,"body_markdown":"For those who lend to this ticket while using `wiremock-jre8` (with transitive Jetty 9) when upgrading to Java 17/Spring Boot 3/Spring 6 having `NoSuchMethodError: NetworkTrafficServerConnector.addNetworkTrafficListener`:\r\nMigrate to [`wiremock-standalone`][1]\r\n\r\nSee more: https://github.com/wiremock/wiremock/issues/1760#issuecomment-1234404609\r\n\r\n  [1]: https://mvnrepository.com/artifact/com.github.tomakehurst/wiremock-standalone","title":"WireMock fails with NoSuchMethodError HttpServletResponse.getHeader","body":"<p>For those who lend to this ticket while using <code>wiremock-jre8</code> (with transitive Jetty 9) when upgrading to Java 17/Spring Boot 3/Spring 6 having <code>NoSuchMethodError: NetworkTrafficServerConnector.addNetworkTrafficListener</code>:\nMigrate to <a href=\"https://mvnrepository.com/artifact/com.github.tomakehurst/wiremock-standalone\" rel=\"nofollow noreferrer\"><code>wiremock-standalone</code></a></p>\n<p>See more: <a href=\"https://github.com/wiremock/wiremock/issues/1760#issuecomment-1234404609\" rel=\"nofollow noreferrer\">https://github.com/wiremock/wiremock/issues/1760#issuecomment-1234404609</a></p>\n"}],"owner":{"account_id":1503775,"reputation":18065,"user_id":1407656,"accept_rate":81,"display_name":"toniedzwiedz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8892,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":43339109,"answer_count":3,"score":6,"last_activity_date":1692003640,"creation_date":1491837649,"question_id":43327076,"body_markdown":"I&#39;m trying to use WireMock in my JUnit tests to mock calls to an external API. \r\n\r\n    public class ExampleWiremockTest {\r\n\r\n        @Rule\r\n        public WireMockRule wireMockRule = new WireMockRule(9999);\r\n\r\n        @Before\r\n        public void setUp() {\r\n            stubFor(get(urlEqualTo(&quot;/bin/sillyServlet&quot;))\r\n                .willReturn(aResponse()\r\n                    .withStatus(200)\r\n                    .withBody(&quot;Hello WireMock!&quot;)\r\n                )\r\n            );\r\n\r\n        }\r\n\r\n        @Test\r\n        public void testNothing() throws URISyntaxException, IOException {\r\n            URI uri = new URIBuilder().setScheme(&quot;http&quot;)\r\n                .setHost(&quot;localhost&quot;)\r\n                .setPort(9999)\r\n                .setPath(&quot;/bin/sillyServlet&quot;)\r\n                .build();\r\n            HttpGet httpGet = new HttpGet(uri);\r\n            CloseableHttpClient httpClient = HttpClients.createDefault();\r\n            CloseableHttpResponse response = httpClient.execute(httpGet);\r\n            HttpEntity entity = response.getEntity();\r\n            String body = EntityUtils.toString(entity);\r\n            assertThat(body, is(&quot;Hello WireMock!&quot;));\r\n        }\r\n\r\n    }\r\n\r\nThe code compiles but when I run my test, WireMock throws an HTTP 500 that seems to be caused by an inconsistency in the underlying Servlet API version.\r\n\r\n    Running com.example.core.ExampleWiremockTest\r\n    [main] INFO wiremock.org.eclipse.jetty.util.log - Logging initialized @1030ms\r\n    [main] INFO wiremock.org.eclipse.jetty.server.Server - jetty-9.2.z-SNAPSHOT\r\n    [main] INFO wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@ef9296d{/__admin,null,AVAILABLE}\r\n    [main] INFO wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@659a969b{/,null,AVAILABLE}\r\n    [main] INFO wiremock.org.eclipse.jetty.server.NetworkTrafficServerConnector - Started NetworkTrafficServerConnector@723d73e1{HTTP/1.1}{0.0.0.0:9999}\r\n    [main] INFO wiremock.org.eclipse.jetty.server.Server - Started @1168ms\r\n    [qtp436546048-16] INFO /__admin - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.AdminRequestHandler. Normalized mapped under returned &#39;null&#39;\r\n    [qtp436546048-20] INFO / - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned &#39;null&#39;\r\n    [qtp436546048-20] WARN wiremock.org.eclipse.jetty.servlet.ServletHandler - Error for /bin/sillyServlet\r\n    java.lang.NoSuchMethodError: javax.servlet.http.HttpServletResponse.getHeader(Ljava/lang/String;)Ljava/lang/String;\r\n            at wiremock.org.eclipse.jetty.servlets.GzipFilter.doFilter(GzipFilter.java:322)\r\n            at wiremock.org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1652)\r\n            at wiremock.org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:585)\r\n            at wiremock.org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1127)\r\n            at wiremock.org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:515)\r\n            at wiremock.org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1061)\r\n            at wiremock.org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\r\n            at wiremock.org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:110)\r\n            at wiremock.org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)\r\n            at wiremock.org.eclipse.jetty.server.Server.handle(Server.java:499)\r\n            at wiremock.org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:310)\r\n            at wiremock.org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:257)\r\n            at wiremock.org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540)\r\n            at wiremock.org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:635)\r\n            at wiremock.org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:555)\r\n            at java.lang.Thread.run(Thread.java:745)\r\n    [qtp436546048-20] WARN wiremock.org.eclipse.jetty.server.HttpChannel - /bin/sillyServlet\r\n    java.lang.NoSuchMethodError: javax.servlet.http.HttpServletRequest.isAsyncStarted()Z\r\n            at wiremock.org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:684)\r\n            at wiremock.org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1127)\r\n            at wiremock.org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:515)\r\n            at wiremock.org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1061)\r\n            at wiremock.org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\r\n            at wiremock.org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:110)\r\n            at wiremock.org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)\r\n            at wiremock.org.eclipse.jetty.server.Server.handle(Server.java:499)\r\n            at wiremock.org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:310)\r\n            at wiremock.org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:257)\r\n            at wiremock.org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540)\r\n            at wiremock.org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:635)\r\n            at wiremock.org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:555)\r\n            at java.lang.Thread.run(Thread.java:745)\r\n    [qtp436546048-20] WARN wiremock.org.eclipse.jetty.server.HttpChannel - Could not send response error 500: java.lang.NoSuchMethodError: javax.servlet.http.HttpServletRequest.isAsyncStarted()Z\r\n    [main] INFO wiremock.org.eclipse.jetty.server.NetworkTrafficServerConnector - Stopped NetworkTrafficServerConnector@723d73e1{HTTP/1.1}{0.0.0.0:9999}\r\n    [main] INFO wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@659a969b{/,null,UNAVAILABLE}\r\n    [main] INFO wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@ef9296d{/__admin,null,UNAVAILABLE}\r\n    Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 1.577 sec &lt;&lt;&lt; FAILURE! - in com.example.core.ExampleWiremockTest\r\n\r\nI do have other libraries in my classpath that rely on different versions of Jetty, which I suppose is the cause of the problem.\r\n\r\nWireMock uses Jetty 9.2.13, I also have a transitive dependency on Cobertura, which relies on 6.1.14\r\n\r\nI was originally trying to use the following dependency:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.github.tomakehurst&lt;/groupId&gt;\r\n        &lt;artifactId&gt;wiremock&lt;/artifactId&gt;\r\n        &lt;version&gt;2.6.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nI switched to the standalone Jar version, hoping it would help me avoid the conflict but the result is exactly the same.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.github.tomakehurst&lt;/groupId&gt;\r\n        &lt;artifactId&gt;wiremock-standalone&lt;/artifactId&gt;\r\n        &lt;version&gt;2.6.0&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"WireMock fails with NoSuchMethodError HttpServletResponse.getHeader","body":"<p>I'm trying to use WireMock in my JUnit tests to mock calls to an external API. </p>\n\n<pre><code>public class ExampleWiremockTest {\n\n    @Rule\n    public WireMockRule wireMockRule = new WireMockRule(9999);\n\n    @Before\n    public void setUp() {\n        stubFor(get(urlEqualTo(\"/bin/sillyServlet\"))\n            .willReturn(aResponse()\n                .withStatus(200)\n                .withBody(\"Hello WireMock!\")\n            )\n        );\n\n    }\n\n    @Test\n    public void testNothing() throws URISyntaxException, IOException {\n        URI uri = new URIBuilder().setScheme(\"http\")\n            .setHost(\"localhost\")\n            .setPort(9999)\n            .setPath(\"/bin/sillyServlet\")\n            .build();\n        HttpGet httpGet = new HttpGet(uri);\n        CloseableHttpClient httpClient = HttpClients.createDefault();\n        CloseableHttpResponse response = httpClient.execute(httpGet);\n        HttpEntity entity = response.getEntity();\n        String body = EntityUtils.toString(entity);\n        assertThat(body, is(\"Hello WireMock!\"));\n    }\n\n}\n</code></pre>\n\n<p>The code compiles but when I run my test, WireMock throws an HTTP 500 that seems to be caused by an inconsistency in the underlying Servlet API version.</p>\n\n<pre><code>Running com.example.core.ExampleWiremockTest\n[main] INFO wiremock.org.eclipse.jetty.util.log - Logging initialized @1030ms\n[main] INFO wiremock.org.eclipse.jetty.server.Server - jetty-9.2.z-SNAPSHOT\n[main] INFO wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@ef9296d{/__admin,null,AVAILABLE}\n[main] INFO wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@659a969b{/,null,AVAILABLE}\n[main] INFO wiremock.org.eclipse.jetty.server.NetworkTrafficServerConnector - Started NetworkTrafficServerConnector@723d73e1{HTTP/1.1}{0.0.0.0:9999}\n[main] INFO wiremock.org.eclipse.jetty.server.Server - Started @1168ms\n[qtp436546048-16] INFO /__admin - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.AdminRequestHandler. Normalized mapped under returned 'null'\n[qtp436546048-20] INFO / - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'\n[qtp436546048-20] WARN wiremock.org.eclipse.jetty.servlet.ServletHandler - Error for /bin/sillyServlet\njava.lang.NoSuchMethodError: javax.servlet.http.HttpServletResponse.getHeader(Ljava/lang/String;)Ljava/lang/String;\n        at wiremock.org.eclipse.jetty.servlets.GzipFilter.doFilter(GzipFilter.java:322)\n        at wiremock.org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1652)\n        at wiremock.org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:585)\n        at wiremock.org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1127)\n        at wiremock.org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:515)\n        at wiremock.org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1061)\n        at wiremock.org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n        at wiremock.org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:110)\n        at wiremock.org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)\n        at wiremock.org.eclipse.jetty.server.Server.handle(Server.java:499)\n        at wiremock.org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:310)\n        at wiremock.org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:257)\n        at wiremock.org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540)\n        at wiremock.org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:635)\n        at wiremock.org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:555)\n        at java.lang.Thread.run(Thread.java:745)\n[qtp436546048-20] WARN wiremock.org.eclipse.jetty.server.HttpChannel - /bin/sillyServlet\njava.lang.NoSuchMethodError: javax.servlet.http.HttpServletRequest.isAsyncStarted()Z\n        at wiremock.org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:684)\n        at wiremock.org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1127)\n        at wiremock.org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:515)\n        at wiremock.org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1061)\n        at wiremock.org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n        at wiremock.org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:110)\n        at wiremock.org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)\n        at wiremock.org.eclipse.jetty.server.Server.handle(Server.java:499)\n        at wiremock.org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:310)\n        at wiremock.org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:257)\n        at wiremock.org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540)\n        at wiremock.org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:635)\n        at wiremock.org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:555)\n        at java.lang.Thread.run(Thread.java:745)\n[qtp436546048-20] WARN wiremock.org.eclipse.jetty.server.HttpChannel - Could not send response error 500: java.lang.NoSuchMethodError: javax.servlet.http.HttpServletRequest.isAsyncStarted()Z\n[main] INFO wiremock.org.eclipse.jetty.server.NetworkTrafficServerConnector - Stopped NetworkTrafficServerConnector@723d73e1{HTTP/1.1}{0.0.0.0:9999}\n[main] INFO wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@659a969b{/,null,UNAVAILABLE}\n[main] INFO wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@ef9296d{/__admin,null,UNAVAILABLE}\nTests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 1.577 sec &lt;&lt;&lt; FAILURE! - in com.example.core.ExampleWiremockTest\n</code></pre>\n\n<p>I do have other libraries in my classpath that rely on different versions of Jetty, which I suppose is the cause of the problem.</p>\n\n<p>WireMock uses Jetty 9.2.13, I also have a transitive dependency on Cobertura, which relies on 6.1.14</p>\n\n<p>I was originally trying to use the following dependency:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.github.tomakehurst&lt;/groupId&gt;\n    &lt;artifactId&gt;wiremock&lt;/artifactId&gt;\n    &lt;version&gt;2.6.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>I switched to the standalone Jar version, hoping it would help me avoid the conflict but the result is exactly the same.</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.github.tomakehurst&lt;/groupId&gt;\n    &lt;artifactId&gt;wiremock-standalone&lt;/artifactId&gt;\n    &lt;version&gt;2.6.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","jdbc","spring-data-jpa"],"comments":[{"owner":{"account_id":6545869,"reputation":53,"user_id":5061908,"display_name":"ariamadeus"},"score":0,"creation_date":1688574341,"post_id":76621716,"comment_id":135092850,"body_markdown":"I figured out, instead of using ManyToMany, we can use this \n`@ManyToOne(fetch = FetchType.balanced:p)  @JoinColumn(name = &quot;blackboxparam_id&quot;, nullable = false)` above the `private BlackboxParamEntity foo;` in BlackboxEntity.java and MatingEntity.java.  Just remove the ManyToMany in those Entities, either in BlackboxParamEntity.","body":"I figured out, instead of using ManyToMany, we can use this  <code>@ManyToOne(fetch = FetchType.balanced:p)  @JoinColumn(name = &quot;blackboxparam_id&quot;, nullable = false)</code> above the <code>private BlackboxParamEntity foo;</code> in BlackboxEntity.java and MatingEntity.java.  Just remove the ManyToMany in those Entities, either in BlackboxParamEntity."},{"owner":{"account_id":6545869,"reputation":53,"user_id":5061908,"display_name":"ariamadeus"},"score":0,"creation_date":1688574644,"post_id":76621716,"comment_id":135092921,"body_markdown":"Referring to this https://stackoverflow.com/questions/60772300/spring-boot-jpa-many-to-many-relation-as-its-own-class","body":"Referring to this <a href=\"https://stackoverflow.com/questions/60772300/spring-boot-jpa-many-to-many-relation-as-its-own-class\" title=\"spring boot jpa many to many relation as its own class\">stackoverflow.com/questions/60772300/&hellip;</a>"}],"owner":{"account_id":6545869,"reputation":53,"user_id":5061908,"display_name":"ariamadeus"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692003167,"creation_date":1688569933,"question_id":76621716,"body_markdown":"I currently make a RestAPI and struggling in multidirections relation.\r\n\r\nUsing\r\n```\r\nJava: 20.0.1\r\nSpring Boot: 3.1.1\r\n\r\n```\r\n\r\nI made the OurUserEntity become primary for the BlackboxEntity and MatingEntity as the foreign.\r\n\r\nBut then I tried to make the BlackboxParamEntity become primary for the BlackboxEntity and MatingEntity as the foreign, and struggled in this error:`Failed to initialize JPA EntityManagerFactory: Could not determine recommended JdbcType for &#39;com.myplace.projectname.entity.BlackboxParamEntity&#39;`\r\n\r\nThis is my **application.yaml**\r\n\r\n```\r\nspring:\r\n  # autoconfigure:\r\n  #   exclude: org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration\r\n  datasource:\r\n    driver-class-name: org.postgresql.Driver\r\n    url: jdbc:postgresql://localhost:5432/belajar_spring\r\n    username: postgres\r\n    password: postgres\r\n\r\n  jpa:\r\n    show-sql: true\r\n    hibernate:\r\n      ddl-auto: update\r\n    properties:\r\n      hibernate:\r\n        format_sql: true\r\n        jdbc:\r\n          time_zone: GMT+07:00\r\n    database: postgresql\r\n    database-platform: org.hibernate.dialect.PostgreSQLDialect\r\n\r\nserver:\r\n  port: 8081\r\n```\r\n\r\n\r\nI Have this 4 example of entity codes:\r\n\r\n**BlackboxEntity.java**\r\n```\r\npackage com.myplace.projectname.entity.blackbox;\r\n\r\nimport java.sql.Date;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Set;\r\n\r\nimport com.myplace.projectname.entity.OurUserEntity;\r\nimport com.myplace.projectname.entity.inAppConfig.BlackboxParamEntity;\r\nimport com.myplace.projectname.entity.side.Status;\r\nimport com.fasterxml.jackson.annotation.JsonIgnore;\r\n\r\nimport jakarta.persistence.CascadeType;\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.EnumType;\r\nimport jakarta.persistence.Enumerated;\r\nimport jakarta.persistence.FetchType;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.JoinColumn;\r\nimport jakarta.persistence.JoinTable;\r\nimport jakarta.persistence.ManyToMany;\r\nimport jakarta.persistence.OneToOne;\r\nimport jakarta.persistence.Table;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\n@Entity\r\n@Table(name = &quot;blackbox&quot;)\r\n@Data\r\n@NoArgsConstructor\r\npublic class BlackboxEntity {\r\n    @Id\r\n    @Column(name = &quot;blackbox_id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private long id;\r\n\r\n    @Column(name = &quot;name&quot;)\r\n    private BlackboxParamEntity name;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    @Column(name = &quot;status&quot;)\r\n    private Status status = Status.WAITING_ENTRY;\r\n\r\n    @Column(name = &quot;entrydate&quot;)\r\n    private Date entryDate = null;\r\n\r\n    @Column(name = &quot;entryBy&quot;)\r\n    private OurUserEntity entryBy;\r\n\r\n    @Column(name = &quot;revision&quot;)\r\n    private int revision = -1;\r\n\r\n    @Column(name = &quot;malescounted&quot;)\r\n    private int malesCounted = -1;\r\n\r\n    @Column(name = &quot;femalescounted&quot;)\r\n    private int femalesCounted = -1;\r\n\r\n    @Column(name = &quot;blackbox&quot;)\r\n    private int blackbox = -1;\r\n\r\n    @Column(name = &quot;flyadded&quot;)\r\n    private int flyadded = -1;\r\n\r\n    @Column(name = &quot;eggharvested&quot;)\r\n    private int eggharvested = -1;\r\n\r\n    @Column(name = &quot;liveflycount&quot;)\r\n    private int liveflycount = -1;\r\n\r\n    @Column(name = &quot;deadflycount&quot;)\r\n    private int deadflycount = -1;\r\n\r\n    @Column(name = &quot;deadflyweight&quot;)\r\n    private int deadflyweight = -1;\r\n\r\n    @Column(name = &quot;sweight&quot;)\r\n    private int sWeight = -1;\r\n\r\n    @Column(name = &quot;scount&quot;)\r\n    private int sCount = -1;\r\n\r\n    @Column(name = &quot;iweight&quot;)\r\n    private double iWeight = -1;\r\n\r\n    @Column(name = &quot;notes&quot;)\r\n    private String notes = null;\r\n\r\n    @Column(name = &quot;enable&quot;)\r\n    private boolean enable = true;\r\n\r\n    @JsonIgnore\r\n    @ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n    @JoinTable(name = &quot;user_blackbox&quot;, joinColumns = @JoinColumn(name = &quot;blackbox_id&quot;), inverseJoinColumns = @JoinColumn(name = &quot;user_id&quot;))\r\n    private List&lt;OurUserEntity&gt; userEntity = new ArrayList&lt;OurUserEntity&gt;();\r\n\r\n    @JsonIgnore\r\n    @ManyToMany()\r\n    @JoinTable(name = &quot;blackboxparam_blackbox&quot;, joinColumns = @JoinColumn(name = &quot;blackbox_id&quot;), inverseJoinColumns = @JoinColumn(name = &quot;blackboxparam_id&quot;))\r\n    private Set&lt;BlackboxParamEntity&gt; blackboxparamentites;\r\n\r\n    public BlackboxEntity(\r\n            BlackboxParamEntity name,\r\n            Status status,\r\n            Date entryDate,\r\n            OurUserEntity entryBy,\r\n            double iWeight,\r\n            String notes,\r\n            boolean enable) {\r\n        this.name = name;\r\n        this.status = status;\r\n        this.entryDate = entryDate;\r\n        this.entryBy = entryBy;\r\n        this.iWeight = iWeight;\r\n        this.notes = notes;\r\n        this.enable = enable;\r\n    }\r\n}\r\n```\r\n\r\n\r\n**BlackboxParamEntity.java**\r\n\r\n```\r\npackage com.myplace.projectname.entity.inAppConfig;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Set;\r\n\r\nimport com.myplace.projectname.entity.eggfly.BlackboxEntity;\r\nimport com.myplace.projectname.entity.mating.MatingEntity;\r\nimport com.fasterxml.jackson.annotation.JsonIgnore;\r\n\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.FetchType;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.ManyToMany;\r\nimport jakarta.persistence.Table;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\n@Entity\r\n@Table(name = &quot;blackboxparam&quot;)\r\n@Data\r\n@NoArgsConstructor\r\npublic class BlackboxParamEntity {\r\n    @Id\r\n    @Column(name = &quot;blackboxparam_id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private long id;\r\n\r\n    @Column(name = &quot;blackbox&quot;)\r\n    private int blackbox;\r\n\r\n    @Column(name = &quot;name&quot;, unique = true)\r\n    private String name;\r\n\r\n    @JsonIgnore\r\n    @ManyToMany(mappedBy = &quot;blackboxParamEntites&quot;, fetch = FetchType.EAGER)\r\n    private List&lt;MatingEntity&gt; matingentity = new ArrayList&lt;MatingEntity&gt;();\r\n\r\n    @JsonIgnore\r\n    @ManyToMany(mappedBy = &quot;blackboxParamEntites&quot;, fetch = FetchType.EAGER)\r\n    private Set&lt;BlackboxEntity&gt; blackboxentity;\r\n\r\n    public BlackboxParamEntity(\r\n            int blackbox,\r\n            String name) {\r\n        this.blackbox = blackbox;\r\n        this.name = name;\r\n    }\r\n}\r\n```\r\n\r\n\r\n**MatingEntity.java**\r\n\r\n```\r\npackage com.myplace.projectname.entity.mating;\r\n\r\nimport java.sql.Date;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport com.myplace.projectname.entity.OurUserEntity;\r\nimport com.myplace.projectname.entity.inAppConfig.BlackboxParamEntity;\r\nimport com.myplace.projectname.entity.side.Status;\r\nimport com.myplace.projectname.entity.side.Treatment;\r\nimport com.fasterxml.jackson.annotation.JsonIgnore;\r\n\r\nimport jakarta.persistence.CascadeType;\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.EnumType;\r\nimport jakarta.persistence.Enumerated;\r\nimport jakarta.persistence.FetchType;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.JoinColumn;\r\nimport jakarta.persistence.JoinTable;\r\nimport jakarta.persistence.ManyToMany;\r\nimport jakarta.persistence.OneToMany;\r\nimport jakarta.persistence.OneToOne;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\n@Entity\r\n@Data\r\n@NoArgsConstructor\r\npublic class MatingEntity {\r\n    @Id\r\n    @Column(name = &quot;mating_id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private long id;\r\n\r\n    @Column(name = &quot;name&quot;)\r\n    private BlackboxParamEntity name;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    @Column(name = &quot;status&quot;)\r\n    private Status status;\r\n\r\n    @Column(name = &quot;entrydate&quot;)\r\n    private Date entryDate;\r\n\r\n    @Column(name = &quot;entryby&quot;)\r\n    private OurUserEntity entryBy;\r\n\r\n    @Column(name = &quot;revision&quot;)\r\n    private int revision;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    @Column(name = &quot;treatment&quot;)\r\n    private Treatment treatment;\r\n\r\n    @Column(name = &quot;blackbox&quot;)\r\n    private int blackbox;\r\n\r\n    @Column(name = &quot;notes&quot;)\r\n    private String notes;\r\n\r\n    @OneToMany(mappedBy = &quot;matingentity&quot;)\r\n    private List&lt;ObservationEntity&gt; observations;\r\n\r\n    @JsonIgnore\r\n    @ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n    @JoinTable(name = &quot;user_mating&quot;, joinColumns = @JoinColumn(name = &quot;mating_id&quot;), inverseJoinColumns = @JoinColumn(name = &quot;user_id&quot;))\r\n    private List&lt;OurUserEntity&gt; userEntity = new ArrayList&lt;OurUserEntity&gt;();\r\n\r\n    @JsonIgnore\r\n    @ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n    @JoinTable(name = &quot;blackboxparam_mating&quot;, joinColumns = @JoinColumn(name = &quot;mating_id&quot;), inverseJoinColumns = @JoinColumn(name = &quot;blackboxparam_id&quot;))\r\n    private List&lt;BlackboxParamEntity&gt; blackboxParamEntites = new ArrayList&lt;BlackboxParamEntity&gt;();\r\n\r\n    public MatingEntity(\r\n            BlackboxParamEntity name,\r\n            Status status,\r\n            Date entryDate,\r\n            int revision,\r\n            Treatment treatment,\r\n            OurUserEntity entryBy,\r\n            int blackbox,\r\n            String notes) {\r\n\r\n        this.name = name;\r\n        this.status = status;\r\n        this.entryDate = entryDate;\r\n        this.revision = revision;\r\n        this.treatment = treatment;\r\n        this.entryBy = entryBy;\r\n        this.blackbox = blackbox;\r\n        this.notes = notes;\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n**OurUserEntity.java**\r\n\r\n```\r\npackage com.myplace.projectname.entity;\r\n\r\nimport java.sql.Date;\r\nimport java.util.ArrayList;\r\nimport java.util.Collection;\r\nimport java.util.List;\r\n\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\n\r\nimport com.myplace.projectname.entity.crawlout.CrawloutEntity;\r\nimport com.myplace.projectname.entity.eggfly.BlackboxEntity;\r\nimport com.myplace.projectname.entity.mating.MatingEntity;\r\nimport com.myplace.projectname.entity.prepupae.PrepupaeEntity;\r\nimport com.myplace.projectname.entity.side.Role;\r\nimport com.fasterxml.jackson.annotation.JsonIgnore;\r\n\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.EnumType;\r\nimport jakarta.persistence.Enumerated;\r\nimport jakarta.persistence.FetchType;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.ManyToMany;\r\nimport jakarta.persistence.Table;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\n@Entity\r\n@Table(name = &quot;users&quot;)\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class OurUserEntity implements UserDetails {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private long id;\r\n\r\n    private String name;\r\n\r\n    @Column(name = &quot;password&quot;)\r\n    private String password;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    @Column(name = &quot;role&quot;)\r\n    private Role role;\r\n\r\n    @Column(name = &quot;expDate&quot;)\r\n    private Date expDate;\r\n\r\n    @JsonIgnore\r\n    @ManyToMany(mappedBy = &quot;userEntity&quot;, fetch = FetchType.EAGER)\r\n    private List&lt;MatingEntity&gt; matingentity = new ArrayList&lt;MatingEntity&gt;();\r\n\r\n    @JsonIgnore\r\n    @ManyToMany(mappedBy = &quot;userEntity&quot;, fetch = FetchType.EAGER)\r\n    private List&lt;BlackboxEntity&gt; blackboxentity = new ArrayList&lt;BlackboxEntity&gt;();\r\n\r\n    public String setPassword(String password) {\r\n        this.password = password;\r\n        return this.password;\r\n    }\r\n\r\n    public String getPassword() {\r\n        return this.password;\r\n    }\r\n\r\n    @Override\r\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n        // TODO Auto-generated method stub\r\n        return List.of(new SimpleGrantedAuthority(role.name()));\r\n    }\r\n\r\n    @Override\r\n    public String getUsername() {\r\n        // TODO Auto-generated method stub\r\n        return name;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonExpired() {\r\n        // TODO Auto-generated method stub\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonLocked() {\r\n        // TODO Auto-generated method stub\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isCredentialsNonExpired() {\r\n        // TODO Auto-generated method stub\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isEnabled() {\r\n        // TODO Auto-generated method stub\r\n        return true;\r\n    }\r\n}\r\n```\r\n\r\n\r\nI tried anything like to move the BlackboxParamEntity out from the inAppConfig or make the annotations as similar as OurUserEntity, so it can similarly like the OurUserEntity does.","title":"Multiple Entity (Tables) Many to Many relations spring boot","body":"<p>I currently make a RestAPI and struggling in multidirections relation.</p>\n<p>Using</p>\n<pre><code>Java: 20.0.1\nSpring Boot: 3.1.1\n\n</code></pre>\n<p>I made the OurUserEntity become primary for the BlackboxEntity and MatingEntity as the foreign.</p>\n<p>But then I tried to make the BlackboxParamEntity become primary for the BlackboxEntity and MatingEntity as the foreign, and struggled in this error:<code>Failed to initialize JPA EntityManagerFactory: Could not determine recommended JdbcType for 'com.myplace.projectname.entity.BlackboxParamEntity'</code></p>\n<p>This is my <strong>application.yaml</strong></p>\n<pre><code>spring:\n  # autoconfigure:\n  #   exclude: org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration\n  datasource:\n    driver-class-name: org.postgresql.Driver\n    url: jdbc:postgresql://localhost:5432/belajar_spring\n    username: postgres\n    password: postgres\n\n  jpa:\n    show-sql: true\n    hibernate:\n      ddl-auto: update\n    properties:\n      hibernate:\n        format_sql: true\n        jdbc:\n          time_zone: GMT+07:00\n    database: postgresql\n    database-platform: org.hibernate.dialect.PostgreSQLDialect\n\nserver:\n  port: 8081\n</code></pre>\n<p>I Have this 4 example of entity codes:</p>\n<p><strong>BlackboxEntity.java</strong></p>\n<pre><code>package com.myplace.projectname.entity.blackbox;\n\nimport java.sql.Date;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Set;\n\nimport com.myplace.projectname.entity.OurUserEntity;\nimport com.myplace.projectname.entity.inAppConfig.BlackboxParamEntity;\nimport com.myplace.projectname.entity.side.Status;\nimport com.fasterxml.jackson.annotation.JsonIgnore;\n\nimport jakarta.persistence.CascadeType;\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.EnumType;\nimport jakarta.persistence.Enumerated;\nimport jakarta.persistence.FetchType;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.JoinColumn;\nimport jakarta.persistence.JoinTable;\nimport jakarta.persistence.ManyToMany;\nimport jakarta.persistence.OneToOne;\nimport jakarta.persistence.Table;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Entity\n@Table(name = &quot;blackbox&quot;)\n@Data\n@NoArgsConstructor\npublic class BlackboxEntity {\n    @Id\n    @Column(name = &quot;blackbox_id&quot;)\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private long id;\n\n    @Column(name = &quot;name&quot;)\n    private BlackboxParamEntity name;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = &quot;status&quot;)\n    private Status status = Status.WAITING_ENTRY;\n\n    @Column(name = &quot;entrydate&quot;)\n    private Date entryDate = null;\n\n    @Column(name = &quot;entryBy&quot;)\n    private OurUserEntity entryBy;\n\n    @Column(name = &quot;revision&quot;)\n    private int revision = -1;\n\n    @Column(name = &quot;malescounted&quot;)\n    private int malesCounted = -1;\n\n    @Column(name = &quot;femalescounted&quot;)\n    private int femalesCounted = -1;\n\n    @Column(name = &quot;blackbox&quot;)\n    private int blackbox = -1;\n\n    @Column(name = &quot;flyadded&quot;)\n    private int flyadded = -1;\n\n    @Column(name = &quot;eggharvested&quot;)\n    private int eggharvested = -1;\n\n    @Column(name = &quot;liveflycount&quot;)\n    private int liveflycount = -1;\n\n    @Column(name = &quot;deadflycount&quot;)\n    private int deadflycount = -1;\n\n    @Column(name = &quot;deadflyweight&quot;)\n    private int deadflyweight = -1;\n\n    @Column(name = &quot;sweight&quot;)\n    private int sWeight = -1;\n\n    @Column(name = &quot;scount&quot;)\n    private int sCount = -1;\n\n    @Column(name = &quot;iweight&quot;)\n    private double iWeight = -1;\n\n    @Column(name = &quot;notes&quot;)\n    private String notes = null;\n\n    @Column(name = &quot;enable&quot;)\n    private boolean enable = true;\n\n    @JsonIgnore\n    @ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n    @JoinTable(name = &quot;user_blackbox&quot;, joinColumns = @JoinColumn(name = &quot;blackbox_id&quot;), inverseJoinColumns = @JoinColumn(name = &quot;user_id&quot;))\n    private List&lt;OurUserEntity&gt; userEntity = new ArrayList&lt;OurUserEntity&gt;();\n\n    @JsonIgnore\n    @ManyToMany()\n    @JoinTable(name = &quot;blackboxparam_blackbox&quot;, joinColumns = @JoinColumn(name = &quot;blackbox_id&quot;), inverseJoinColumns = @JoinColumn(name = &quot;blackboxparam_id&quot;))\n    private Set&lt;BlackboxParamEntity&gt; blackboxparamentites;\n\n    public BlackboxEntity(\n            BlackboxParamEntity name,\n            Status status,\n            Date entryDate,\n            OurUserEntity entryBy,\n            double iWeight,\n            String notes,\n            boolean enable) {\n        this.name = name;\n        this.status = status;\n        this.entryDate = entryDate;\n        this.entryBy = entryBy;\n        this.iWeight = iWeight;\n        this.notes = notes;\n        this.enable = enable;\n    }\n}\n</code></pre>\n<p><strong>BlackboxParamEntity.java</strong></p>\n<pre><code>package com.myplace.projectname.entity.inAppConfig;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Set;\n\nimport com.myplace.projectname.entity.eggfly.BlackboxEntity;\nimport com.myplace.projectname.entity.mating.MatingEntity;\nimport com.fasterxml.jackson.annotation.JsonIgnore;\n\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.FetchType;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.ManyToMany;\nimport jakarta.persistence.Table;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Entity\n@Table(name = &quot;blackboxparam&quot;)\n@Data\n@NoArgsConstructor\npublic class BlackboxParamEntity {\n    @Id\n    @Column(name = &quot;blackboxparam_id&quot;)\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private long id;\n\n    @Column(name = &quot;blackbox&quot;)\n    private int blackbox;\n\n    @Column(name = &quot;name&quot;, unique = true)\n    private String name;\n\n    @JsonIgnore\n    @ManyToMany(mappedBy = &quot;blackboxParamEntites&quot;, fetch = FetchType.EAGER)\n    private List&lt;MatingEntity&gt; matingentity = new ArrayList&lt;MatingEntity&gt;();\n\n    @JsonIgnore\n    @ManyToMany(mappedBy = &quot;blackboxParamEntites&quot;, fetch = FetchType.EAGER)\n    private Set&lt;BlackboxEntity&gt; blackboxentity;\n\n    public BlackboxParamEntity(\n            int blackbox,\n            String name) {\n        this.blackbox = blackbox;\n        this.name = name;\n    }\n}\n</code></pre>\n<p><strong>MatingEntity.java</strong></p>\n<pre><code>package com.myplace.projectname.entity.mating;\n\nimport java.sql.Date;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport com.myplace.projectname.entity.OurUserEntity;\nimport com.myplace.projectname.entity.inAppConfig.BlackboxParamEntity;\nimport com.myplace.projectname.entity.side.Status;\nimport com.myplace.projectname.entity.side.Treatment;\nimport com.fasterxml.jackson.annotation.JsonIgnore;\n\nimport jakarta.persistence.CascadeType;\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.EnumType;\nimport jakarta.persistence.Enumerated;\nimport jakarta.persistence.FetchType;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.JoinColumn;\nimport jakarta.persistence.JoinTable;\nimport jakarta.persistence.ManyToMany;\nimport jakarta.persistence.OneToMany;\nimport jakarta.persistence.OneToOne;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Entity\n@Data\n@NoArgsConstructor\npublic class MatingEntity {\n    @Id\n    @Column(name = &quot;mating_id&quot;)\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private long id;\n\n    @Column(name = &quot;name&quot;)\n    private BlackboxParamEntity name;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = &quot;status&quot;)\n    private Status status;\n\n    @Column(name = &quot;entrydate&quot;)\n    private Date entryDate;\n\n    @Column(name = &quot;entryby&quot;)\n    private OurUserEntity entryBy;\n\n    @Column(name = &quot;revision&quot;)\n    private int revision;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = &quot;treatment&quot;)\n    private Treatment treatment;\n\n    @Column(name = &quot;blackbox&quot;)\n    private int blackbox;\n\n    @Column(name = &quot;notes&quot;)\n    private String notes;\n\n    @OneToMany(mappedBy = &quot;matingentity&quot;)\n    private List&lt;ObservationEntity&gt; observations;\n\n    @JsonIgnore\n    @ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n    @JoinTable(name = &quot;user_mating&quot;, joinColumns = @JoinColumn(name = &quot;mating_id&quot;), inverseJoinColumns = @JoinColumn(name = &quot;user_id&quot;))\n    private List&lt;OurUserEntity&gt; userEntity = new ArrayList&lt;OurUserEntity&gt;();\n\n    @JsonIgnore\n    @ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n    @JoinTable(name = &quot;blackboxparam_mating&quot;, joinColumns = @JoinColumn(name = &quot;mating_id&quot;), inverseJoinColumns = @JoinColumn(name = &quot;blackboxparam_id&quot;))\n    private List&lt;BlackboxParamEntity&gt; blackboxParamEntites = new ArrayList&lt;BlackboxParamEntity&gt;();\n\n    public MatingEntity(\n            BlackboxParamEntity name,\n            Status status,\n            Date entryDate,\n            int revision,\n            Treatment treatment,\n            OurUserEntity entryBy,\n            int blackbox,\n            String notes) {\n\n        this.name = name;\n        this.status = status;\n        this.entryDate = entryDate;\n        this.revision = revision;\n        this.treatment = treatment;\n        this.entryBy = entryBy;\n        this.blackbox = blackbox;\n        this.notes = notes;\n    }\n}\n\n</code></pre>\n<p><strong>OurUserEntity.java</strong></p>\n<pre><code>package com.myplace.projectname.entity;\n\nimport java.sql.Date;\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.List;\n\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\n\nimport com.myplace.projectname.entity.crawlout.CrawloutEntity;\nimport com.myplace.projectname.entity.eggfly.BlackboxEntity;\nimport com.myplace.projectname.entity.mating.MatingEntity;\nimport com.myplace.projectname.entity.prepupae.PrepupaeEntity;\nimport com.myplace.projectname.entity.side.Role;\nimport com.fasterxml.jackson.annotation.JsonIgnore;\n\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.EnumType;\nimport jakarta.persistence.Enumerated;\nimport jakarta.persistence.FetchType;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.ManyToMany;\nimport jakarta.persistence.Table;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Entity\n@Table(name = &quot;users&quot;)\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class OurUserEntity implements UserDetails {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private long id;\n\n    private String name;\n\n    @Column(name = &quot;password&quot;)\n    private String password;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = &quot;role&quot;)\n    private Role role;\n\n    @Column(name = &quot;expDate&quot;)\n    private Date expDate;\n\n    @JsonIgnore\n    @ManyToMany(mappedBy = &quot;userEntity&quot;, fetch = FetchType.EAGER)\n    private List&lt;MatingEntity&gt; matingentity = new ArrayList&lt;MatingEntity&gt;();\n\n    @JsonIgnore\n    @ManyToMany(mappedBy = &quot;userEntity&quot;, fetch = FetchType.EAGER)\n    private List&lt;BlackboxEntity&gt; blackboxentity = new ArrayList&lt;BlackboxEntity&gt;();\n\n    public String setPassword(String password) {\n        this.password = password;\n        return this.password;\n    }\n\n    public String getPassword() {\n        return this.password;\n    }\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        // TODO Auto-generated method stub\n        return List.of(new SimpleGrantedAuthority(role.name()));\n    }\n\n    @Override\n    public String getUsername() {\n        // TODO Auto-generated method stub\n        return name;\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        // TODO Auto-generated method stub\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        // TODO Auto-generated method stub\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        // TODO Auto-generated method stub\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        // TODO Auto-generated method stub\n        return true;\n    }\n}\n</code></pre>\n<p>I tried anything like to move the BlackboxParamEntity out from the inAppConfig or make the annotations as similar as OurUserEntity, so it can similarly like the OurUserEntity does.</p>\n"},{"tags":["java","android","kotlin","android-mediaplayer","audio-player"],"owner":{"account_id":27032814,"reputation":11,"user_id":20588913,"display_name":"NDC00"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692003161,"creation_date":1692003161,"question_id":76897550,"body_markdown":"i want to cut or trim audio with wade form view and save it. But i haven&#39;t found a way to solve this problem yet. Thanks for helping me\r\n\r\ni try library android-audio-visualizer, and ffmpeg to trim audio. but it&#39;s not my expected","title":"Cut or trim audio with wade form view and save it","body":"<p>i want to cut or trim audio with wade form view and save it. But i haven't found a way to solve this problem yet. Thanks for helping me</p>\n<p>i try library android-audio-visualizer, and ffmpeg to trim audio. but it's not my expected</p>\n"},{"tags":["java","reactive-programming","publish-subscribe","project-reactor","reactive-streams"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":1,"creation_date":1595796325,"post_id":63105300,"comment_id":111591203,"body_markdown":"Please edit your question to include a longer example. It looks like it is not just when the sum is equal or above 5, but also the value 5 is subtracted again which reduces the &quot;sum&quot; again, at which point the next sum *might* not reach the limit 5 again. Also what is the logic behind the last entry which has do emitted anyway? Also add what you are trying to do overall, maybe you can solve your problem in a different way (XY problem?).","body":"Please edit your question to include a longer example. It looks like it is not just when the sum is equal or above 5, but also the value 5 is subtracted again which reduces the &quot;sum&quot; again, at which point the next sum <i>might</i> not reach the limit 5 again. Also what is the logic behind the last entry which has do emitted anyway? Also add what you are trying to do overall, maybe you can solve your problem in a different way (XY problem?)."},{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":0,"creation_date":1595804161,"post_id":63105300,"comment_id":111593134,"body_markdown":"@Progman Edited question.","body":"@Progman Edited question."}],"answers":[{"comments":[{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":0,"creation_date":1595804262,"post_id":63105736,"comment_id":111593150,"body_markdown":"I can use `scan`, but as I said, the intermediate elements need to be filtered out. I was hoping for something more elegant.","body":"I can use <code>scan</code>, but as I said, the intermediate elements need to be filtered out. I was hoping for something more elegant."},{"owner":{"account_id":16676851,"reputation":751,"user_id":12053054,"display_name":"Norbert Dopjera"},"score":0,"creation_date":1595809112,"post_id":63105736,"comment_id":111594077,"body_markdown":"Cant see any other more elegant solution as `Flux` is much restricted in this case. Filter after Scan is still much more elegant then usual implementation so i guess the answer is to stick with Scan and filter unwanted intermediate result&#39;s.","body":"Cant see any other more elegant solution as <code>Flux</code> is much restricted in this case. Filter after Scan is still much more elegant then usual implementation so i guess the answer is to stick with Scan and filter unwanted intermediate result&#39;s."},{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":0,"creation_date":1595811773,"post_id":63105736,"comment_id":111594482,"body_markdown":"Actually, `scan` won’t work because it has no way to know when the emit the last element","body":"Actually, <code>scan</code> won’t work because it has no way to know when the emit the last element"},{"owner":{"account_id":16676851,"reputation":751,"user_id":12053054,"display_name":"Norbert Dopjera"},"score":0,"creation_date":1595813094,"post_id":63105736,"comment_id":111594687,"body_markdown":"I still don&#39;t understand that requirement for the last element. Also why are u emitting cumSum of required number. Do you need to count how many times cumSum has been achieved? Do you need that last element as some form of information of how much cumSum was accumulted at last element ? These information&#39;s would be appropriate since algorithm consisting of `Flux` operator&#39;s (high order function&#39;s) might be adjusted to it.","body":"I still don&#39;t understand that requirement for the last element. Also why are u emitting cumSum of required number. Do you need to count how many times cumSum has been achieved? Do you need that last element as some form of information of how much cumSum was accumulted at last element ? These information&#39;s would be appropriate since algorithm consisting of <code>Flux</code> operator&#39;s (high order function&#39;s) might be adjusted to it."},{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":0,"creation_date":1595820090,"post_id":63105736,"comment_id":111595889,"body_markdown":"I&#39;m not sure what about the last element is not clear to you. We wouldn&#39;t want to drop it, right? Since there are no more elements coming (Flux doesn&#39;t know that), if we waited for sum = n, the last element would be lost (assuming it&#39;s &lt; n, as in my example).","body":"I&#39;m not sure what about the last element is not clear to you. We wouldn&#39;t want to drop it, right? Since there are no more elements coming (Flux doesn&#39;t know that), if we waited for sum = n, the last element would be lost (assuming it&#39;s &lt; n, as in my example)."},{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":0,"creation_date":1595829952,"post_id":63105736,"comment_id":111598158,"body_markdown":"Got it, see my answer.","body":"Got it, see my answer."}],"tags":[],"owner":{"account_id":16676851,"reputation":751,"user_id":12053054,"display_name":"Norbert Dopjera"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1595798994,"creation_date":1595797880,"answer_id":63105736,"question_id":63105300,"body_markdown":"This is not possible to do directly on `Flux` object, but you might achieve solution if you have access to resource from which the `Flux` object is created. Since inside stream (Flux) you are not able access previous element&#39;s you can create `Flux` over indices to you resource and access this resource (since its read only operation) from that `Flux` of indices directly. For example something like this:\r\n\r\n```\r\nList&lt;Integer&gt; list = List.of(1, 2, 3, 4, 5, 2);\r\nAtomicReference&lt;Integer&gt; atomicSum = new AtomicReference&lt;&gt;(0);\r\nreturn Flux.fromStream(IntStream.range(0, list.size() - 1).boxed())\r\n        .flatMap(i -&gt; {\r\n            int sum = atomicSum.updateAndGet((integer -&gt; integer + list.get(i)));\r\n            if (sum &gt;= 5) {\r\n                atomicSum.updateAndGet(integer -&gt; integer - 5);\r\n                return Flux.just(5);\r\n            }\r\n\r\n            return (i.equals(list.size() -1))\r\n                    ? Flux.just(list.get(i)) // emit last element even if sum was not 5\r\n                    : Flux.empty();\r\n        }); // emitted element&#39;s\r\n```\r\n\r\nNote that this is not good practice to do and i don&#39;t advice such solution. `Flux` objects processing might skip between thread&#39;s, so if you modify object outside of `Flux` you should do it in synchronized way (therefore usage of `AtomicReference`). List is used only for read-only operation&#39;s and therefore it&#39;s OK. Also i don&#39;t know if that part of the code will actually work but i wanted to show you how you might find solution if you have access to resource over which your `Flux` object is created.\r\n\r\nEdit: even such solution would not work. I have mistaken myslef, `Flux` object don&#39;t skip between threads but might be processed by multiple threads leading single atomic reference to invalid state. This cloud still be solved with some synchronizing mechanism like lock&#39;s instead of Atomic reference but is far beyond average developer experience. Are you sure you cannot use `scan()` function since you can provided your own accumulator function as argument? ","title":"How to emit cumulative sum only from a reactive stream?","body":"<p>This is not possible to do directly on <code>Flux</code> object, but you might achieve solution if you have access to resource from which the <code>Flux</code> object is created. Since inside stream (Flux) you are not able access previous element's you can create <code>Flux</code> over indices to you resource and access this resource (since its read only operation) from that <code>Flux</code> of indices directly. For example something like this:</p>\n<pre><code>List&lt;Integer&gt; list = List.of(1, 2, 3, 4, 5, 2);\nAtomicReference&lt;Integer&gt; atomicSum = new AtomicReference&lt;&gt;(0);\nreturn Flux.fromStream(IntStream.range(0, list.size() - 1).boxed())\n        .flatMap(i -&gt; {\n            int sum = atomicSum.updateAndGet((integer -&gt; integer + list.get(i)));\n            if (sum &gt;= 5) {\n                atomicSum.updateAndGet(integer -&gt; integer - 5);\n                return Flux.just(5);\n            }\n\n            return (i.equals(list.size() -1))\n                    ? Flux.just(list.get(i)) // emit last element even if sum was not 5\n                    : Flux.empty();\n        }); // emitted element's\n</code></pre>\n<p>Note that this is not good practice to do and i don't advice such solution. <code>Flux</code> objects processing might skip between thread's, so if you modify object outside of <code>Flux</code> you should do it in synchronized way (therefore usage of <code>AtomicReference</code>). List is used only for read-only operation's and therefore it's OK. Also i don't know if that part of the code will actually work but i wanted to show you how you might find solution if you have access to resource over which your <code>Flux</code> object is created.</p>\n<p>Edit: even such solution would not work. I have mistaken myslef, <code>Flux</code> object don't skip between threads but might be processed by multiple threads leading single atomic reference to invalid state. This cloud still be solved with some synchronizing mechanism like lock's instead of Atomic reference but is far beyond average developer experience. Are you sure you cannot use <code>scan()</code> function since you can provided your own accumulator function as argument?</p>\n"},{"comments":[{"owner":{"account_id":16676851,"reputation":751,"user_id":12053054,"display_name":"Norbert Dopjera"},"score":0,"creation_date":1595866165,"post_id":63109504,"comment_id":111616074,"body_markdown":"Nice solution, i lately noticed edit about what&#39;s your use-case for such feature. And therefore was restricted my answer to usual flux operation&#39;s.","body":"Nice solution, i lately noticed edit about what&#39;s your use-case for such feature. And therefore was restricted my answer to usual flux operation&#39;s."}],"tags":[],"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1595837715,"creation_date":1595829938,"answer_id":63109504,"question_id":63105300,"body_markdown":"&gt; In reality, I&#39;m reading data from a network call, and subsequently\r\n&gt; sending them to a downstream consumer who only accepts fixed size\r\n&gt; chunks, except for the last one, of course (upstream completed).\r\n\r\nIt occurred to me that trying to split the response `Flux` myself is probably little late and quite difficult; instead, I could use something like Netty [FixedLengthFrameDecoder](https://netty.io/4.1/api/io/netty/handler/codec/FixedLengthFrameDecoder.html), which does exactly what I&#39;m looking for.\r\n\r\nThat led me to [reactor-netty](https://github.com/reactor/reactor-netty) source code, and after extensive digging, I found exactly what I needed.\r\n\r\n    fun get(url: String, maxChunkSize: Int): List&lt;ByteArray&gt; {\r\n        return HttpClient.create()\r\n            .httpResponseDecoder { it.maxChunkSize(maxChunkSize) }\r\n            .get()\r\n            .uri(url)\r\n            .responseContent()\r\n            .asByteArray()\r\n            .collectList()\r\n            .block()!!\r\n    }\r\n\r\nThe crucial part is `httpResponseDecoder { it.maxChunkSize(maxChunkSize) }`; a unit test proves this to be working:\r\n\r\n    @Test\r\n\r\n    fun testHonorsMaxChunkSize() {\r\n        val maxChunkSize = 4096\r\n        val chunks = FixedLengthResponseFrameClient.get(\r\n            &quot;http://doesnotexist.nowhere/binary&quot;, maxChunkSize\r\n        )\r\n    \r\n        assertThat(chunks.subList(0, chunks.size - 1))\r\n            .allMatch { it.size ==  maxChunkSize}\r\n        assertThat(chunks.last().size).isLessThanOrEqualTo(maxChunkSize)\r\n    }\r\n\r\n`WebClient` can be configured with a custom `HttpClient` (configured with `httpResponseDecoder`) as shown below:\r\n\r\n    WebClient\r\n      .builder()\r\n      .clientConnector(ReactorClientHttpConnector(httpClient))\r\n      .build()\r\n      .get()\r\n      .uri(&quot;uri&quot;)\r\n      .exchange()\r\n      .flatMapMany { it.body(BodyExtractors.toDataBuffers()) }\r\n      ...\r\n\r\nThe size of these buffers would be what&#39;s set in the `HttpClient.httpResponseDecoder` (8192 Kb by default).","title":"How to emit cumulative sum only from a reactive stream?","body":"<blockquote>\n<p>In reality, I'm reading data from a network call, and subsequently\nsending them to a downstream consumer who only accepts fixed size\nchunks, except for the last one, of course (upstream completed).</p>\n</blockquote>\n<p>It occurred to me that trying to split the response <code>Flux</code> myself is probably little late and quite difficult; instead, I could use something like Netty <a href=\"https://netty.io/4.1/api/io/netty/handler/codec/FixedLengthFrameDecoder.html\" rel=\"nofollow noreferrer\">FixedLengthFrameDecoder</a>, which does exactly what I'm looking for.</p>\n<p>That led me to <a href=\"https://github.com/reactor/reactor-netty\" rel=\"nofollow noreferrer\">reactor-netty</a> source code, and after extensive digging, I found exactly what I needed.</p>\n<pre><code>fun get(url: String, maxChunkSize: Int): List&lt;ByteArray&gt; {\n    return HttpClient.create()\n        .httpResponseDecoder { it.maxChunkSize(maxChunkSize) }\n        .get()\n        .uri(url)\n        .responseContent()\n        .asByteArray()\n        .collectList()\n        .block()!!\n}\n</code></pre>\n<p>The crucial part is <code>httpResponseDecoder { it.maxChunkSize(maxChunkSize) }</code>; a unit test proves this to be working:</p>\n<pre><code>@Test\n\nfun testHonorsMaxChunkSize() {\n    val maxChunkSize = 4096\n    val chunks = FixedLengthResponseFrameClient.get(\n        &quot;http://doesnotexist.nowhere/binary&quot;, maxChunkSize\n    )\n\n    assertThat(chunks.subList(0, chunks.size - 1))\n        .allMatch { it.size ==  maxChunkSize}\n    assertThat(chunks.last().size).isLessThanOrEqualTo(maxChunkSize)\n}\n</code></pre>\n<p><code>WebClient</code> can be configured with a custom <code>HttpClient</code> (configured with <code>httpResponseDecoder</code>) as shown below:</p>\n<pre><code>WebClient\n  .builder()\n  .clientConnector(ReactorClientHttpConnector(httpClient))\n  .build()\n  .get()\n  .uri(&quot;uri&quot;)\n  .exchange()\n  .flatMapMany { it.body(BodyExtractors.toDataBuffers()) }\n  ...\n</code></pre>\n<p>The size of these buffers would be what's set in the <code>HttpClient.httpResponseDecoder</code> (8192 Kb by default).</p>\n"},{"comments":[{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":0,"creation_date":1692004723,"post_id":76897546,"comment_id":135562271,"body_markdown":"Where’s the check in this code that prevents sum &lt; n to be emitted? It looks like it emits all the intermediate sums.","body":"Where’s the check in this code that prevents sum &lt; n to be emitted? It looks like it emits all the intermediate sums."},{"owner":{"account_id":3941817,"reputation":1056,"user_id":3255867,"display_name":"Chomeh"},"score":0,"creation_date":1692010341,"post_id":76897546,"comment_id":135563335,"body_markdown":"It could be in the lambda passed to subscribe. The principle is the same.","body":"It could be in the lambda passed to subscribe. The principle is the same."}],"tags":[],"owner":{"account_id":3941817,"reputation":1056,"user_id":3255867,"display_name":"Chomeh"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692003144,"creation_date":1692003144,"answer_id":76897546,"question_id":63105300,"body_markdown":"If you need to keep a running total or otherwise maintain state from which your flux is derived, a way to go about it is to create a new flux that subscribes to the first flux, and maintains the state with the subscription, e.g    \r\n\r\n    Flux&lt;Long&gt; flux = Flux.just(1L, 2L, 3L, 4L, 5L);\r\n\r\n    Sinks.Many&lt;Long&gt; runningTotalSink = Sinks.many().unicast().onBackpressureBuffer();\r\n    Flux&lt;Long&gt; runningTotalFlux = runningTotalSink.asFlux()\r\n            .doOnSubscribe(subscription -&gt; {\r\n                AtomicLong runningTotal = new AtomicLong();\r\n                flux\r\n                        .doOnCancel(subscription::cancel)\r\n                        .doOnError(runningTotalSink::tryEmitError)\r\n                        .doOnComplete(runningTotalSink::tryEmitComplete)\r\n                        .subscribe(i -&gt; {\r\n                            runningTotalSink.tryEmitNext(runningTotal.accumulateAndGet(i, Long::sum));\r\n                        });\r\n            });\r\n\r\n    runningTotalFlux.toStream().forEach(i -&gt; {\r\n        System.out.println(i);\r\n    });","title":"How to emit cumulative sum only from a reactive stream?","body":"<p>If you need to keep a running total or otherwise maintain state from which your flux is derived, a way to go about it is to create a new flux that subscribes to the first flux, and maintains the state with the subscription, e.g</p>\n<pre><code>Flux&lt;Long&gt; flux = Flux.just(1L, 2L, 3L, 4L, 5L);\n\nSinks.Many&lt;Long&gt; runningTotalSink = Sinks.many().unicast().onBackpressureBuffer();\nFlux&lt;Long&gt; runningTotalFlux = runningTotalSink.asFlux()\n        .doOnSubscribe(subscription -&gt; {\n            AtomicLong runningTotal = new AtomicLong();\n            flux\n                    .doOnCancel(subscription::cancel)\n                    .doOnError(runningTotalSink::tryEmitError)\n                    .doOnComplete(runningTotalSink::tryEmitComplete)\n                    .subscribe(i -&gt; {\n                        runningTotalSink.tryEmitNext(runningTotal.accumulateAndGet(i, Long::sum));\n                    });\n        });\n\nrunningTotalFlux.toStream().forEach(i -&gt; {\n    System.out.println(i);\n});\n</code></pre>\n"}],"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1023,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":63109504,"answer_count":3,"score":0,"last_activity_date":1692003144,"creation_date":1595794849,"question_id":63105300,"body_markdown":"I&#39;ve a use case where the stream should only emit when the cumulative &quot;sum&quot; equals or exceeds a given value, n. Let&#39;s take the example of six integers with n = 5.\r\n\r\n    +---+------+---------+\r\n    | i | Emit |   Sum   |\r\n    +---+------+---------+\r\n    | 1 |    - | 1       |\r\n    | 2 |    - | 3       |\r\n    | 3 |    5 | 1       |\r\n    | 4 |    5 | 0       |\r\n    | 5 |    5 | 0       |\r\n    | 2 |    2 | 0 (end) |\r\n    +---+------+---------+\r\n\r\n\r\nAs you can see, nothing is emitted unless the sum equals or exceeds 5, except for the last element, which is emitted anyway.\r\n\r\nOnce an item is emitted, the sum gets reduced by that value (n). In reality, I&#39;m reading data from a network call, and subsequently sending them to a downstream consumer who only accepts fixed size chunks, except for the last one, of course (upstream completed).\r\n\r\nI&#39;m using project Reactor [Flux](https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Flux.html) as the `Publisher`; I couldn&#39;t find any method on it that allows me do what is shown above. `scan` comes closest, but it also emits intermediate elements that need to be filtered out.","title":"How to emit cumulative sum only from a reactive stream?","body":"<p>I've a use case where the stream should only emit when the cumulative &quot;sum&quot; equals or exceeds a given value, n. Let's take the example of six integers with n = 5.</p>\n<pre><code>+---+------+---------+\n| i | Emit |   Sum   |\n+---+------+---------+\n| 1 |    - | 1       |\n| 2 |    - | 3       |\n| 3 |    5 | 1       |\n| 4 |    5 | 0       |\n| 5 |    5 | 0       |\n| 2 |    2 | 0 (end) |\n+---+------+---------+\n</code></pre>\n<p>As you can see, nothing is emitted unless the sum equals or exceeds 5, except for the last element, which is emitted anyway.</p>\n<p>Once an item is emitted, the sum gets reduced by that value (n). In reality, I'm reading data from a network call, and subsequently sending them to a downstream consumer who only accepts fixed size chunks, except for the last one, of course (upstream completed).</p>\n<p>I'm using project Reactor <a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Flux.html\" rel=\"nofollow noreferrer\">Flux</a> as the <code>Publisher</code>; I couldn't find any method on it that allows me do what is shown above. <code>scan</code> comes closest, but it also emits intermediate elements that need to be filtered out.</p>\n"},{"tags":["java","oop","gradle","kotlin","kotlin-interop"],"comments":[{"owner":{"account_id":1691040,"reputation":437,"user_id":1553369,"display_name":"developer"},"score":2,"creation_date":1568620669,"post_id":47117017,"comment_id":102317292,"body_markdown":"Apply the kotlin-android plugin to your library module build.gradle (see the docs):\n\napply plugin: &#39;kotlin-android&#39;","body":"Apply the kotlin-android plugin to your library module build.gradle (see the docs):  apply plugin: &#39;kotlin-android&#39;"}],"answers":[{"comments":[{"owner":{"account_id":96769,"reputation":8248,"user_id":262852,"accept_rate":65,"display_name":"Thufir"},"score":0,"creation_date":1509842495,"post_id":47117088,"comment_id":81184191,"body_markdown":"Absolutley, thx.yes, I made that change already; will update whole question to reflect that.","body":"Absolutley, thx.yes, I made that change already; will update whole question to reflect that."},{"owner":{"account_id":96769,"reputation":8248,"user_id":262852,"accept_rate":65,"display_name":"Thufir"},"score":0,"creation_date":1509842597,"post_id":47117088,"comment_id":81184212,"body_markdown":"no.  wait.  you say ../kotlin/demo/example.kt but that&#39;s NOT what the demo (link at bottom of q) seems to do.  They just seem to do ../kotlin/example.kt  I think...","body":"no.  wait.  you say ../kotlin/demo/example.kt but that&#39;s NOT what the demo (link at bottom of q) seems to do.  They just seem to do ../kotlin/example.kt  I think..."},{"owner":{"account_id":5119511,"reputation":954,"user_id":4103578,"display_name":"Xavier Bouclet"},"score":1,"creation_date":1509842778,"post_id":47117088,"comment_id":81184246,"body_markdown":"Yeah but the error tell you that it’s try to find demo.example.kt and you don’t have the demo package under your kotlin source files.","body":"Yeah but the error tell you that it’s try to find demo.example.kt and you don’t have the demo package under your kotlin source files."},{"owner":{"account_id":5119511,"reputation":954,"user_id":4103578,"display_name":"Xavier Bouclet"},"score":0,"creation_date":1509843917,"post_id":47117088,"comment_id":81184438,"body_markdown":"new demo.Foo(); is not useful but is just an example of how you can create an kotlin object from a java class. It&#39;s confusing though","body":"new demo.Foo(); is not useful but is just an example of how you can create an kotlin object from a java class. It&#39;s confusing though"},{"owner":{"account_id":5119511,"reputation":954,"user_id":4103578,"display_name":"Xavier Bouclet"},"score":1,"creation_date":1509844180,"post_id":47117088,"comment_id":81184466,"body_markdown":"It&#39;s confusing but I read in the documentation that It is not required to match directories and packages: source files can be placed arbitrarily in the file system.","body":"It&#39;s confusing but I read in the documentation that It is not required to match directories and packages: source files can be placed arbitrarily in the file system."},{"owner":{"account_id":1691040,"reputation":437,"user_id":1553369,"display_name":"developer"},"score":0,"creation_date":1568620743,"post_id":47117088,"comment_id":102317322,"body_markdown":"apply plugin: &#39;kotlin-android&#39;  to   your library module build.gradle.","body":"apply plugin: &#39;kotlin-android&#39;  to   your library module build.gradle."}],"tags":[],"owner":{"account_id":5119511,"reputation":954,"user_id":4103578,"display_name":"Xavier Bouclet"},"comment_count":6,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1509845368,"creation_date":1509842428,"answer_id":47117088,"question_id":47117017,"body_markdown":"The demo folder should be under the src/main/kotlin and the example.kt under it.\r\n\r\nSo it should be src/main/kotlin/demo/example.kt\r\n\r\n[edit] It is not required to match directories and packages: source files can be placed arbitrarily in the file system.\r\n\r\n[edit2] I made an example worked :\r\n\r\nJava code\r\n\r\n    package test;\r\n    \r\n    import demo.HelloWorldKt;\r\n    \r\n     public class Test {\r\n        public static void main(String[] args) {\r\n           ExampleKt.bar();\r\n        }\r\n    }\r\n\r\n\r\nKotlin code :\r\n\r\n    package demo\r\n    \r\n    fun bar() {\r\n        println(&quot;yeah&quot;)\r\n    }\r\n\r\n\r\nWhere the kotlin file is helloWrold.kt directly under src/main/kotlin\r\n\r\nThe import of the kotlin file seems missing in your java file.","title":"Calling Kotlin from Java -- error: package demo does not exist","body":"<p>The demo folder should be under the src/main/kotlin and the example.kt under it.</p>\n\n<p>So it should be src/main/kotlin/demo/example.kt</p>\n\n<p>[edit] It is not required to match directories and packages: source files can be placed arbitrarily in the file system.</p>\n\n<p>[edit2] I made an example worked :</p>\n\n<p>Java code</p>\n\n<pre><code>package test;\n\nimport demo.HelloWorldKt;\n\n public class Test {\n    public static void main(String[] args) {\n       ExampleKt.bar();\n    }\n}\n</code></pre>\n\n<p>Kotlin code :</p>\n\n<pre><code>package demo\n\nfun bar() {\n    println(\"yeah\")\n}\n</code></pre>\n\n<p>Where the kotlin file is helloWrold.kt directly under src/main/kotlin</p>\n\n<p>The import of the kotlin file seems missing in your java file.</p>\n"},{"tags":[],"owner":{"account_id":10218032,"reputation":741,"user_id":7543081,"display_name":"m.sajjad.s"},"comment_count":0,"down_vote_count":2,"up_vote_count":15,"is_accepted":false,"score":13,"last_activity_date":1583785206,"creation_date":1583785206,"answer_id":60607802,"question_id":47117017,"body_markdown":"use this in your build.gradle (module):\r\n\r\n    apply plugin: &#39;kotlin-android&#39;","title":"Calling Kotlin from Java -- error: package demo does not exist","body":"<p>use this in your build.gradle (module):</p>\n\n<pre><code>apply plugin: 'kotlin-android'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14889423,"reputation":85,"user_id":10751598,"display_name":"Stefan Irndorfer"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1611698451,"creation_date":1611698451,"answer_id":65909894,"question_id":47117017,"body_markdown":" 1. Make sure you have the Kotlin plugin installed in Android Studio\r\n 2. add Kotlin to the class path in your projects `gradle.build` file:\r\n```\r\n         dependencies {\r\n            classpath &quot;com.android.tools.build:gradle:4.1.2&quot;\r\n            classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:1.4.21&quot;\r\n            classpath &quot;org.jetbrains.kotlin:kotlin-android-extensions:1.4.21&quot;\r\n            // NOTE: Do not place your application dependencies here; they belong\r\n            // in the individual module build.gradle files\r\n        }\r\n```\r\n 3. apply the kotlin-android plugin on your modlues (app) `gradle.build` like this:\r\n\r\n        plugins {\r\n            id &#39;com.android.application&#39;\r\n            id &#39;kotlin-android&#39;\r\n        }","title":"Calling Kotlin from Java -- error: package demo does not exist","body":"<ol>\n<li>Make sure you have the Kotlin plugin installed in Android Studio</li>\n<li>add Kotlin to the class path in your projects <code>gradle.build</code> file:</li>\n</ol>\n<pre><code>         dependencies {\n            classpath &quot;com.android.tools.build:gradle:4.1.2&quot;\n            classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:1.4.21&quot;\n            classpath &quot;org.jetbrains.kotlin:kotlin-android-extensions:1.4.21&quot;\n            // NOTE: Do not place your application dependencies here; they belong\n            // in the individual module build.gradle files\n        }\n</code></pre>\n<ol start=\"3\">\n<li><p>apply the kotlin-android plugin on your modlues (app) <code>gradle.build</code> like this:</p>\n<pre><code>plugins {\n    id 'com.android.application'\n    id 'kotlin-android'\n}\n</code></pre>\n</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1692107244,"post_id":76897528,"comment_id":135577569,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76897528/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":28219161,"reputation":1,"user_id":21570179,"display_name":"Laxmikant Mahamuni"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692002933,"creation_date":1692002933,"answer_id":76897528,"question_id":47117017,"body_markdown":"//app level build.gradle\r\n````plugins {\r\n    id(&quot;com.android.application&quot;)\r\n    id(&quot;org.jetbrains.kotlin.android&quot;) //Added for kotlin\r\n}\r\n\r\n\r\n//project level build.gradle\r\nplugins {\r\n    id(&quot;com.android.application&quot;)\r\n    id(&quot;org.jetbrains.kotlin.android&quot;)\r\n}\r\n````","title":"Calling Kotlin from Java -- error: package demo does not exist","body":"<p>//app level build.gradle</p>\n<pre><code>    id(&quot;com.android.application&quot;)\n    id(&quot;org.jetbrains.kotlin.android&quot;) //Added for kotlin\n}\n\n\n//project level build.gradle\nplugins {\n    id(&quot;com.android.application&quot;)\n    id(&quot;org.jetbrains.kotlin.android&quot;)\n}\n</code></pre>\n"}],"owner":{"account_id":96769,"reputation":8248,"user_id":262852,"accept_rate":65,"display_name":"Thufir"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8252,"favorite_count":0,"down_vote_count":1,"up_vote_count":8,"answer_count":4,"score":7,"last_activity_date":1692002933,"creation_date":1509841649,"question_id":47117017,"body_markdown":"I don&#39;t understand the [documentation][1]:\r\n\r\n&gt; Package-Level Functions\r\n&gt; \r\n&gt; All the functions and properties declared in a file example.kt inside\r\n&gt; a package org.foo.bar, including extension functions, are compiled\r\n&gt; into static methods of a Java class named org.foo.bar.ExampleKt.\r\n\r\n    // example.kt\r\n    package demo\r\n    \r\n    class Foo\r\n    \r\n    fun bar() {\r\n    }\r\n    \r\n    // Java\r\n    new demo.Foo();\r\n    demo.ExampleKt.bar();\r\n\r\nmy code below.\r\n\r\n\r\ncompile error; build failed:\r\n\r\n    thufir@dur:~/NetBeansProjects/kotlin$ \r\n    thufir@dur:~/NetBeansProjects/kotlin$ gradle compileJava\r\n    \r\n    &gt; Task :compileJava\r\n    /home/thufir/NetBeansProjects/kotlin/src/main/java/net/bounceme/dur/kotlin/App.java:12: error: package demo does not exist\r\n            new demo.Foo();\r\n                    ^\r\n    /home/thufir/NetBeansProjects/kotlin/src/main/java/net/bounceme/dur/kotlin/App.java:13: error: package demo does not exist\r\n            demo.ExampleKt.bar();\r\n                ^\r\n    2 errors\r\n    \r\n    \r\n    FAILURE: Build failed with an exception.\r\n    \r\n    * What went wrong:\r\n    Execution failed for task &#39;:compileJava&#39;.\r\n    &gt; Compilation failed; see the compiler error output for details.\r\n    \r\n    * Try:\r\n    Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\r\n    \r\n    * Get more help at https://help.gradle.org\r\n    \r\n    BUILD FAILED in 0s\r\n    1 actionable task: 1 executed\r\n    thufir@dur:~/NetBeansProjects/kotlin$ \r\n    \r\n\r\njava source:    \r\n    \r\n    package net.bounceme.dur.kotlin;\r\n    \r\n    import java.util.logging.Logger;\r\n    \r\n    public class App {\r\n    \r\n        private static final Logger LOG = Logger.getLogger(App.class.getName());\r\n    \r\n        private void run() {\r\n            LOG.info(&quot;running&quot;);\r\n    \r\n            new demo.Foo();\r\n            demo.ExampleKt.bar();\r\n    \r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            new App().run();\r\n        }\r\n    }\r\n    \r\n    \r\nkotlin source:\r\n    \r\n    package demo;\r\n    \r\n    class Foo\r\n    \r\n    fun bar() {\r\n    }\r\n    \r\n\r\nproject:    \r\n     \r\n    thufir@dur:~/NetBeansProjects/kotlin$ \r\n    thufir@dur:~/NetBeansProjects/kotlin$ tree\r\n    .\r\n    ├── build\r\n    │   ├── classes\r\n    │   │   └── java\r\n    │   │       └── main\r\n    │   └── tmp\r\n    │       └── compileJava\r\n    ├── build.gradle\r\n    ├── gradle\r\n    │   └── wrapper\r\n    │       ├── gradle-wrapper.jar\r\n    │       └── gradle-wrapper.properties\r\n    ├── gradlew\r\n    ├── gradlew.bat\r\n    ├── settings.gradle\r\n    └── src\r\n        ├── main\r\n        │   ├── java\r\n        │   │   └── net\r\n        │   │       └── bounceme\r\n        │   │           └── dur\r\n        │   │               └── kotlin\r\n        │   │                   └── App.java\r\n        │   └── kotlin\r\n        │       └── example.kt\r\n        └── test\r\n            └── java\r\n                └── AppTest.java\r\n    \r\n    18 directories, 9 files\r\n    thufir@dur:~/NetBeansProjects/kotlin$ \r\n\r\n\r\n\r\n[1]: https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html\r\n","title":"Calling Kotlin from Java -- error: package demo does not exist","body":"<p>I don't understand the <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html\" rel=\"noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p>Package-Level Functions</p>\n  \n  <p>All the functions and properties declared in a file example.kt inside\n  a package org.foo.bar, including extension functions, are compiled\n  into static methods of a Java class named org.foo.bar.ExampleKt.</p>\n</blockquote>\n\n<pre><code>// example.kt\npackage demo\n\nclass Foo\n\nfun bar() {\n}\n\n// Java\nnew demo.Foo();\ndemo.ExampleKt.bar();\n</code></pre>\n\n<p>my code below.</p>\n\n<p>compile error; build failed:</p>\n\n<pre><code>thufir@dur:~/NetBeansProjects/kotlin$ \nthufir@dur:~/NetBeansProjects/kotlin$ gradle compileJava\n\n&gt; Task :compileJava\n/home/thufir/NetBeansProjects/kotlin/src/main/java/net/bounceme/dur/kotlin/App.java:12: error: package demo does not exist\n        new demo.Foo();\n                ^\n/home/thufir/NetBeansProjects/kotlin/src/main/java/net/bounceme/dur/kotlin/App.java:13: error: package demo does not exist\n        demo.ExampleKt.bar();\n            ^\n2 errors\n\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':compileJava'.\n&gt; Compilation failed; see the compiler error output for details.\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 0s\n1 actionable task: 1 executed\nthufir@dur:~/NetBeansProjects/kotlin$ \n</code></pre>\n\n<p>java source:    </p>\n\n<pre><code>package net.bounceme.dur.kotlin;\n\nimport java.util.logging.Logger;\n\npublic class App {\n\n    private static final Logger LOG = Logger.getLogger(App.class.getName());\n\n    private void run() {\n        LOG.info(\"running\");\n\n        new demo.Foo();\n        demo.ExampleKt.bar();\n\n    }\n\n    public static void main(String[] args) {\n        new App().run();\n    }\n}\n</code></pre>\n\n<p>kotlin source:</p>\n\n<pre><code>package demo;\n\nclass Foo\n\nfun bar() {\n}\n</code></pre>\n\n<p>project:    </p>\n\n<pre><code>thufir@dur:~/NetBeansProjects/kotlin$ \nthufir@dur:~/NetBeansProjects/kotlin$ tree\n.\n├── build\n│   ├── classes\n│   │   └── java\n│   │       └── main\n│   └── tmp\n│       └── compileJava\n├── build.gradle\n├── gradle\n│   └── wrapper\n│       ├── gradle-wrapper.jar\n│       └── gradle-wrapper.properties\n├── gradlew\n├── gradlew.bat\n├── settings.gradle\n└── src\n    ├── main\n    │   ├── java\n    │   │   └── net\n    │   │       └── bounceme\n    │   │           └── dur\n    │   │               └── kotlin\n    │   │                   └── App.java\n    │   └── kotlin\n    │       └── example.kt\n    └── test\n        └── java\n            └── AppTest.java\n\n18 directories, 9 files\nthufir@dur:~/NetBeansProjects/kotlin$ \n</code></pre>\n"},{"tags":["java","eclipse","console","carriage-return","linefeed"],"comments":[{"owner":{"display_name":"user2030471"},"score":11,"creation_date":1360450973,"post_id":14792478,"comment_id":20714523,"body_markdown":"Seems like an unresolved bug https://bugs.eclipse.org/bugs/show_bug.cgi?id=76936","body":"Seems like an unresolved bug <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=76936\" rel=\"nofollow noreferrer\">bugs.eclipse.org/bugs/show_bug.cgi?id=76936</a>"},{"owner":{"account_id":189633,"reputation":2129,"user_id":429082,"accept_rate":64,"display_name":"Tustin2121"},"score":2,"creation_date":1360688798,"post_id":14792478,"comment_id":20791490,"body_markdown":"While I can understand the use of this, I ask why you need it to work in Eclipse. It might be inconvenient, but at some point I would imagine that you will just have to test it in a console window, presumably its final execution place anyway. Eclipse is capable of running external programs for testing - I have to do it all the time since my program runs via .bat file. (Sorry I can&#39;t be of more help.:/ )","body":"While I can understand the use of this, I ask why you need it to work in Eclipse. It might be inconvenient, but at some point I would imagine that you will just have to test it in a console window, presumably its final execution place anyway. Eclipse is capable of running external programs for testing - I have to do it all the time since my program runs via .bat file. (Sorry I can&#39;t be of more help.:/ )"}],"answers":[{"comments":[{"owner":{"account_id":8505551,"reputation":569,"user_id":6377268,"display_name":"TuringTux"},"score":3,"creation_date":1470759315,"post_id":15304405,"comment_id":65075797,"body_markdown":"Does not work in Eclipse Neon Release (4.6.0) (Build id: 20160613-1800)","body":"Does not work in Eclipse Neon Release (4.6.0) (Build id: 20160613-1800)"},{"owner":{"account_id":10439160,"reputation":162,"user_id":7696418,"accept_rate":50,"display_name":"ViceroyFaust"},"score":0,"creation_date":1589290017,"post_id":15304405,"comment_id":109229551,"body_markdown":"As of Eclipse 2020-03, the bug is *still* present. I guess some bugs are literal cockroaches!","body":"As of Eclipse 2020-03, the bug is <i>still</i> present. I guess some bugs are literal cockroaches!"},{"owner":{"account_id":111410,"reputation":8252,"user_id":294317,"accept_rate":69,"display_name":"Nathan"},"score":0,"creation_date":1618847187,"post_id":15304405,"comment_id":118720628,"body_markdown":"The bug is fixed now.  See another answer.","body":"The bug is fixed now.  See another answer."}],"tags":[],"owner":{"account_id":536794,"reputation":21199,"user_id":905619,"accept_rate":88,"display_name":"poitroae"},"comment_count":3,"down_vote_count":2,"up_vote_count":23,"is_accepted":true,"score":21,"last_activity_date":1362781638,"creation_date":1362781638,"answer_id":15304405,"question_id":14792478,"body_markdown":"As Nishant already pointed out in the comments, **[you&#39;ve found a bug][1]** here.\r\n\r\nThis bug initially was reported in 2004 *(&gt;9 years ago!?!!)* and this bug seems **not to be fixed very soon** (or ever). I tested it on several Eclipse version, even on *Eclipse Juno SR2*, and the bug is still there.\r\n\r\n\r\n  [1]: https://bugs.eclipse.org/bugs/show_bug.cgi?id=76936","title":"How to get carriage return without line feed effect in Eclipse console?","body":"<p>As Nishant already pointed out in the comments, <strong><a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=76936\">you've found a bug</a></strong> here.</p>\n\n<p>This bug initially was reported in 2004 <em>(>9 years ago!?!!)</em> and this bug seems <strong>not to be fixed very soon</strong> (or ever). I tested it on several Eclipse version, even on <em>Eclipse Juno SR2</em>, and the bug is still there.</p>\n"},{"comments":[{"owner":{"account_id":161771,"reputation":823,"user_id":382798,"accept_rate":71,"display_name":"Dane411"},"score":9,"creation_date":1453002246,"post_id":32466805,"comment_id":57411039,"body_markdown":"Version: Mars.1 Release (4.5.1)\nBuild id: 20150924-1200\n\nOutput:\nsomething\n any","body":"Version: Mars.1 Release (4.5.1) Build id: 20150924-1200  Output: something  any"},{"owner":{"account_id":2278572,"reputation":1743,"user_id":2004265,"display_name":"DAB"},"score":4,"creation_date":1493045837,"post_id":32466805,"comment_id":74232471,"body_markdown":"Doesn&#39;t seem to work in Neon.  Version: Neon.3 Release (4.6.3) Build id: 20170314-1500","body":"Doesn&#39;t seem to work in Neon.  Version: Neon.3 Release (4.6.3) Build id: 20170314-1500"},{"owner":{"account_id":1621785,"reputation":921,"user_id":1506761,"accept_rate":78,"display_name":"Zeta.Investigator"},"score":0,"creation_date":1503325106,"post_id":32466805,"comment_id":78556667,"body_markdown":"weird ask: how can I make it to treat &quot;\\n&quot; as &quot;\\r\\n&quot; again? (version Oxygen)","body":"weird ask: how can I make it to treat &quot;\\n&quot; as &quot;\\r\\n&quot; again? (version Oxygen)"},{"owner":{"account_id":6685933,"reputation":1308,"user_id":5157192,"display_name":"newsha"},"score":0,"creation_date":1521823996,"post_id":32466805,"comment_id":85912390,"body_markdown":"Bug was fixed at some point but fix was reverted again due to some problems - https://bugs.eclipse.org/bugs/show_bug.cgi?id=76936#c72. Right now it does not work Version: Oxygen Release (4.7.0)\nBuild id: 20170620-1800","body":"Bug was fixed at some point but fix was reverted again due to some problems - <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=76936#c72\" rel=\"nofollow noreferrer\">bugs.eclipse.org/bugs/show_bug.cgi?id=76936#c72</a>. Right now it does not work Version: Oxygen Release (4.7.0) Build id: 20170620-1800"},{"owner":{"account_id":10185463,"reputation":128,"user_id":7520602,"display_name":"Spotlightsrule"},"score":0,"creation_date":1540421125,"post_id":32466805,"comment_id":92864256,"body_markdown":"Broken again in Eclipse Photon 4.8.0 (20180619-1200)","body":"Broken again in Eclipse Photon 4.8.0 (20180619-1200)"}],"tags":[],"owner":{"account_id":2294607,"reputation":3803,"user_id":2016386,"accept_rate":46,"display_name":"das Keks"},"comment_count":5,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1441744594,"creation_date":1441744594,"answer_id":32466805,"question_id":14792478,"body_markdown":"It finally seems to be fixed in Mars!\r\n\r\n    Version: Mars Release (4.5.0)\r\n    Build id: 20150621-1200\r\n    Used Java: jre1.8.0_60\r\n\r\nYour code\r\n\r\n\tpublic class Main {\r\n\t\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tSystem.out.print(&quot;something\\r&quot;);\r\n\t\t\tSystem.out.print(&quot; any\\r&quot;);\r\n\t\t}\r\n\t}\r\n\r\nOutput\r\n\r\n     anything","title":"How to get carriage return without line feed effect in Eclipse console?","body":"<p>It finally seems to be fixed in Mars!</p>\n\n<pre><code>Version: Mars Release (4.5.0)\nBuild id: 20150621-1200\nUsed Java: jre1.8.0_60\n</code></pre>\n\n<p>Your code</p>\n\n<pre><code>public class Main {\n\n    public static void main(String[] args) {\n        System.out.print(\"something\\r\");\n        System.out.print(\" any\\r\");\n    }\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code> anything\n</code></pre>\n"},{"comments":[{"owner":{"account_id":184402,"reputation":1458,"user_id":2411916,"accept_rate":75,"display_name":"symbiont"},"score":1,"creation_date":1614122570,"post_id":62108112,"comment_id":117287987,"body_markdown":"great. it only too them 16 years","body":"great. it only too them 16 years"}],"tags":[],"owner":{"account_id":13546471,"reputation":3498,"user_id":9772691,"display_name":"John McClane"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1590869498,"creation_date":1590869498,"answer_id":62108112,"question_id":14792478,"body_markdown":"The bug is fixed by now (Eclipse 2020-03).\r\nJust go to\r\n\r\n&lt;pre&gt;Window ➺ Preferences ➺ Run/Debug ➺ Console&lt;/pre&gt;\r\n\r\nand make sure that both checkboxes\r\n\r\n&lt;pre&gt;Interpret ASCII control characters&lt;/pre&gt;\r\n\r\nand\r\n\r\n&lt;pre&gt;Interpret Carriage Return (\\r) as control character&lt;/pre&gt;\r\n\r\nare enabled.","title":"How to get carriage return without line feed effect in Eclipse console?","body":"<p>The bug is fixed by now (Eclipse 2020-03).\nJust go to</p>\n\n<pre>Window ➺ Preferences ➺ Run/Debug ➺ Console</pre>\n\n<p>and make sure that both checkboxes</p>\n\n<pre>Interpret ASCII control characters</pre>\n\n<p>and</p>\n\n<pre>Interpret Carriage Return (\\r) as control character</pre>\n\n<p>are enabled.</p>\n"},{"tags":[],"owner":{"account_id":18853986,"reputation":1,"user_id":13752426,"display_name":"Jeff"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692002440,"creation_date":1692002440,"answer_id":76897465,"question_id":14792478,"body_markdown":"Move the mouse pointer into the console area,\r\nclick on the right mouse button, a popup menu opens.\r\nClick on &quot;Preferences...&quot; item.\r\nCheck &quot;Interpret Carriage Return (\\r) as control character&quot; box.\r\nClick on &quot;Apply and Close&quot; button.\r\n","title":"How to get carriage return without line feed effect in Eclipse console?","body":"<p>Move the mouse pointer into the console area,\nclick on the right mouse button, a popup menu opens.\nClick on &quot;Preferences...&quot; item.\nCheck &quot;Interpret Carriage Return (\\r) as control character&quot; box.\nClick on &quot;Apply and Close&quot; button.</p>\n"}],"owner":{"account_id":94736,"reputation":48421,"user_id":258483,"accept_rate":46,"display_name":"Dims"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16484,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"accepted_answer_id":15304405,"answer_count":4,"score":29,"last_activity_date":1692002440,"creation_date":1360449888,"question_id":14792478,"body_markdown":"If I\r\n\r\n    System.out.print(&quot;something\\r&quot;);\r\n\r\nat console, I have cursor back at the beginning of line, and finally after\r\n\r\n    System.out.print(&quot;something\\r&quot;);\r\n    System.out.print(&quot; any\\r&quot;);\r\n\r\nI have\r\n\r\n     anything\r\n\r\ntyped.\r\n\r\nBut at Eclipse console I get\r\n\r\n    something\r\n     anything\r\n\r\nas if it treated `\\r` as CR/LF.\r\n\r\nHow can I setup this?","title":"How to get carriage return without line feed effect in Eclipse console?","body":"<p>If I</p>\n\n<pre><code>System.out.print(\"something\\r\");\n</code></pre>\n\n<p>at console, I have cursor back at the beginning of line, and finally after</p>\n\n<pre><code>System.out.print(\"something\\r\");\nSystem.out.print(\" any\\r\");\n</code></pre>\n\n<p>I have</p>\n\n<pre><code> anything\n</code></pre>\n\n<p>typed.</p>\n\n<p>But at Eclipse console I get</p>\n\n<pre><code>something\n anything\n</code></pre>\n\n<p>as if it treated <code>\\r</code> as CR/LF.</p>\n\n<p>How can I setup this?</p>\n"},{"tags":["java","spring-boot","elide"],"answers":[{"tags":[],"owner":{"account_id":29026006,"reputation":56,"user_id":22234165,"display_name":"guest"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689517292,"creation_date":1689517292,"answer_id":76698747,"question_id":76438697,"body_markdown":"In general a query using sparse fields and compound documents should meet your query requirements.\r\n\r\nFor instance a query to include specific fields of related tables\r\n\r\n`/book?include=authors&amp;fields[book]=title,authors&amp;fields[author]=name`\r\n\r\n","title":"Filtering, sorting multiple tables with Elide.io","body":"<p>In general a query using sparse fields and compound documents should meet your query requirements.</p>\n<p>For instance a query to include specific fields of related tables</p>\n<p><code>/book?include=authors&amp;fields[book]=title,authors&amp;fields[author]=name</code></p>\n"},{"tags":[],"owner":{"account_id":25254519,"reputation":32,"user_id":19086479,"display_name":"Mohamed amine ben hassen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692002362,"creation_date":1692002362,"answer_id":76897456,"question_id":76438697,"body_markdown":"Try implementing Swagger documentation() for Elide endpoints it helps a lot with filtring and sorting .\r\n\r\n    \t&lt;dependency&gt;\r\n\t\t\t\t\t&lt;groupId&gt;com.yahoo.elide&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;elide-swagger&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;version&gt;6.1.4&lt;/version&gt;\r\n\t\t\t\t&lt;/dependency&gt;\r\n\r\n\t\t\t\t&lt;dependency&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;version&gt;1.7.0&lt;/version&gt;\r\n\t\t\t\t&lt;/dependency&gt;\r\n\r\nusing the swagger filds will help you avoid syntax error .\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/PGleH.png","title":"Filtering, sorting multiple tables with Elide.io","body":"<p>Try implementing Swagger documentation() for Elide endpoints it helps a lot with filtring and sorting .</p>\n<pre><code>    &lt;dependency&gt;\n                &lt;groupId&gt;com.yahoo.elide&lt;/groupId&gt;\n                &lt;artifactId&gt;elide-swagger&lt;/artifactId&gt;\n                &lt;version&gt;6.1.4&lt;/version&gt;\n            &lt;/dependency&gt;\n\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n                &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n                &lt;version&gt;1.7.0&lt;/version&gt;\n            &lt;/dependency&gt;\n</code></pre>\n<p>using the swagger filds will help you avoid syntax error .</p>\n<p><a href=\"https://i.stack.imgur.com/PGleH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PGleH.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":2778706,"reputation":2137,"user_id":2391712,"accept_rate":100,"display_name":"5th"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1692002362,"creation_date":1686300739,"question_id":76438697,"body_markdown":"I am using Java (11), Spring Boot (2.7) and [Elide (6.1)][1]. I want to create a GET endpoint (`/table3data`) which combines data from three different tables - `Table1`, `Table2`, `Table3`. I need this endpoint to provide such common Elide API features as filtering, sorting, pagination.\r\n\r\nSpecifically, I need to filter by `table1Id` (one or several comma-separated `table1Id`s) and by `date` (both found in `Table3`) - that could also include filtering by two `date`s. `table1Id` is also `refId` in `Table1`.\r\n\r\nNormally, when fetching data from an endpoint which contains one table data, such as only `Table1` (`/table1`), operations such as filtering and sorting will work fine. \r\n\r\n`Table3` has many-to-one relationships with both `Table1` and `Table2`. `Table1` and `Table2` are not connected with each other.\r\n\r\n```java\r\n@Include\r\n@Entity\r\n@Table(name = &quot;table1&quot;)\r\n@Getter\r\n@Setter\r\n@Builder\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@SequenceGenerator(name = &quot;seq&quot;, sequenceName = &quot;my_entity&quot;)\r\n@CreatePermission(expression = &quot;deny all&quot;)\r\n@DeletePermission(expression = &quot;deny all&quot;)\r\n@UpdatePermission(expression = &quot;deny all&quot;)\r\npublic class Table1 {\r\n\r\n  @Id\r\n  @GeneratedValue(generator = &quot;seq&quot;)\r\n  private Long id;\r\n  private String type;\r\n  private String status;\r\n  @Column(unique = true)\r\n  private String refId;\r\n\r\n  @OneToMany(mappedBy = &quot;table1&quot;, cascade = CascadeType.ALL)\r\n  private List&lt;Table3&gt; table3 = new ArrayList&lt;&gt;();\r\n}\r\n\r\n```\r\n\r\n```java\r\n@Include\r\n@Entity\r\n@Table(name = &quot;table2&quot;)\r\n@Getter\r\n@Setter\r\n@Builder\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@SequenceGenerator(name = &quot;seq&quot;, sequenceName = &quot;my_entity&quot;)\r\n@CreatePermission(expression = &quot;deny all&quot;)\r\n@DeletePermission(expression = &quot;deny all&quot;)\r\n@UpdatePermission(expression = &quot;deny all&quot;)\r\npublic class Table2 {\r\n\r\n  @Id\r\n  @GeneratedValue(generator = &quot;seq&quot;)\r\n  private Long id;\r\n  private String name;\r\n  private String reference;\r\n  @Column(unique = true)\r\n  private String refId;\r\n\r\n  @OneToMany(mappedBy = &quot;table2&quot;, cascade = CascadeType.ALL)\r\n  private List&lt;Table3&gt; table3 = new ArrayList&lt;&gt;();\r\n}\r\n\r\n```\r\n\r\n```java\r\n@Include\r\n@Entity\r\n@Table(name = &quot;table3&quot;)\r\n@Getter\r\n@Setter\r\n@Builder\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@SequenceGenerator(name = &quot;seq&quot;, sequenceName = &quot;my_entity&quot;)\r\n@CreatePermission(expression = &quot;deny all&quot;)\r\n@DeletePermission(expression = &quot;deny all&quot;)\r\n@UpdatePermission(expression = &quot;deny all&quot;)\r\npublic class Table3 {\r\n\r\n  @Id\r\n  @GeneratedValue(generator = &quot;seq&quot;)\r\n  private Long id;\r\n\r\n  @NotNull\r\n  @ManyToOne(fetch = FetchType.LAZY)\r\n  @JoinColumn(name = &quot;table1_id&quot;, referencedColumnName = &quot;refId&quot;)\r\n  private Table1 table1;\r\n  private BigDecimal amount;\r\n  private Date date;\r\n\r\n  @NotNull\r\n  @ManyToOne(fetch = FetchType.LAZY)\r\n  @JoinColumn(name = &quot;table2_id&quot;, referencedColumnName = &quot;refId&quot;)\r\n  private Table2 table2;\r\n}\r\n```\r\n\r\nI am using Repositories:\r\n```java\r\npublic interface Table1Repository\r\n    extends PagingAndSortingRepository&lt;Table1, Long&gt;, JpaSpecificationExecutor&lt;Table1&gt; {\r\n}\r\n```\r\n\r\n```java\r\npublic interface Table2Repository\r\n    extends PagingAndSortingRepository&lt;Table2, Long&gt;, JpaSpecificationExecutor&lt;Table2&gt; {\r\n}\r\n```\r\n\r\n```java\r\npublic interface Table3Repository\r\n    extends PagingAndSortingRepository&lt;Table3, Long&gt;, JpaSpecificationExecutor&lt;Table3&gt; {\r\n}\r\n```\r\n\r\nSo far I have implemented a `Table3DTO` entity which contains all of the properties from the three tables (`id`, `type`, `status`, `name`, `reference`, `amount`, `date`, `table1Id`, `table2Id`).\r\n\r\nThen I have a `Table3Service` class, which combines the data in the correct way (it has a method `getAllTable3Data()` which returns a `List&lt;Table3DTO&gt;`).\r\n\r\nThen I have a `Table3Response` which is the wrapper for `Table3ResponseData`. `Table3ResponseData` creates the inner structure of the response.\r\n\r\nLastly I have a `Table3Controller`, which has the `/table3data` implemented and returns the `Table3Response`.\r\n\r\nHowever, even though I get the necessary data, I still need to implement filtering, sorting and other operations myself. Usually these would be provided by Elide.\r\nI prefer not to use the current solution, that&#39;s why I am not including the code.\r\n\r\nIs there a better way to implement this with Elide, so that I wouldn&#39;t have to implement these operations myself, as that is not only time-consuming, but also can get error-prone?\r\n\r\n\r\n  [1]: https://elide.io/\r\n\r\n","title":"Filtering, sorting multiple tables with Elide.io","body":"<p>I am using Java (11), Spring Boot (2.7) and <a href=\"https://elide.io/\" rel=\"nofollow noreferrer\">Elide (6.1)</a>. I want to create a GET endpoint (<code>/table3data</code>) which combines data from three different tables - <code>Table1</code>, <code>Table2</code>, <code>Table3</code>. I need this endpoint to provide such common Elide API features as filtering, sorting, pagination.</p>\n<p>Specifically, I need to filter by <code>table1Id</code> (one or several comma-separated <code>table1Id</code>s) and by <code>date</code> (both found in <code>Table3</code>) - that could also include filtering by two <code>date</code>s. <code>table1Id</code> is also <code>refId</code> in <code>Table1</code>.</p>\n<p>Normally, when fetching data from an endpoint which contains one table data, such as only <code>Table1</code> (<code>/table1</code>), operations such as filtering and sorting will work fine.</p>\n<p><code>Table3</code> has many-to-one relationships with both <code>Table1</code> and <code>Table2</code>. <code>Table1</code> and <code>Table2</code> are not connected with each other.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Include\n@Entity\n@Table(name = &quot;table1&quot;)\n@Getter\n@Setter\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\n@SequenceGenerator(name = &quot;seq&quot;, sequenceName = &quot;my_entity&quot;)\n@CreatePermission(expression = &quot;deny all&quot;)\n@DeletePermission(expression = &quot;deny all&quot;)\n@UpdatePermission(expression = &quot;deny all&quot;)\npublic class Table1 {\n\n  @Id\n  @GeneratedValue(generator = &quot;seq&quot;)\n  private Long id;\n  private String type;\n  private String status;\n  @Column(unique = true)\n  private String refId;\n\n  @OneToMany(mappedBy = &quot;table1&quot;, cascade = CascadeType.ALL)\n  private List&lt;Table3&gt; table3 = new ArrayList&lt;&gt;();\n}\n\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Include\n@Entity\n@Table(name = &quot;table2&quot;)\n@Getter\n@Setter\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\n@SequenceGenerator(name = &quot;seq&quot;, sequenceName = &quot;my_entity&quot;)\n@CreatePermission(expression = &quot;deny all&quot;)\n@DeletePermission(expression = &quot;deny all&quot;)\n@UpdatePermission(expression = &quot;deny all&quot;)\npublic class Table2 {\n\n  @Id\n  @GeneratedValue(generator = &quot;seq&quot;)\n  private Long id;\n  private String name;\n  private String reference;\n  @Column(unique = true)\n  private String refId;\n\n  @OneToMany(mappedBy = &quot;table2&quot;, cascade = CascadeType.ALL)\n  private List&lt;Table3&gt; table3 = new ArrayList&lt;&gt;();\n}\n\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Include\n@Entity\n@Table(name = &quot;table3&quot;)\n@Getter\n@Setter\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\n@SequenceGenerator(name = &quot;seq&quot;, sequenceName = &quot;my_entity&quot;)\n@CreatePermission(expression = &quot;deny all&quot;)\n@DeletePermission(expression = &quot;deny all&quot;)\n@UpdatePermission(expression = &quot;deny all&quot;)\npublic class Table3 {\n\n  @Id\n  @GeneratedValue(generator = &quot;seq&quot;)\n  private Long id;\n\n  @NotNull\n  @ManyToOne(fetch = FetchType.LAZY)\n  @JoinColumn(name = &quot;table1_id&quot;, referencedColumnName = &quot;refId&quot;)\n  private Table1 table1;\n  private BigDecimal amount;\n  private Date date;\n\n  @NotNull\n  @ManyToOne(fetch = FetchType.LAZY)\n  @JoinColumn(name = &quot;table2_id&quot;, referencedColumnName = &quot;refId&quot;)\n  private Table2 table2;\n}\n</code></pre>\n<p>I am using Repositories:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Table1Repository\n    extends PagingAndSortingRepository&lt;Table1, Long&gt;, JpaSpecificationExecutor&lt;Table1&gt; {\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Table2Repository\n    extends PagingAndSortingRepository&lt;Table2, Long&gt;, JpaSpecificationExecutor&lt;Table2&gt; {\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Table3Repository\n    extends PagingAndSortingRepository&lt;Table3, Long&gt;, JpaSpecificationExecutor&lt;Table3&gt; {\n}\n</code></pre>\n<p>So far I have implemented a <code>Table3DTO</code> entity which contains all of the properties from the three tables (<code>id</code>, <code>type</code>, <code>status</code>, <code>name</code>, <code>reference</code>, <code>amount</code>, <code>date</code>, <code>table1Id</code>, <code>table2Id</code>).</p>\n<p>Then I have a <code>Table3Service</code> class, which combines the data in the correct way (it has a method <code>getAllTable3Data()</code> which returns a <code>List&lt;Table3DTO&gt;</code>).</p>\n<p>Then I have a <code>Table3Response</code> which is the wrapper for <code>Table3ResponseData</code>. <code>Table3ResponseData</code> creates the inner structure of the response.</p>\n<p>Lastly I have a <code>Table3Controller</code>, which has the <code>/table3data</code> implemented and returns the <code>Table3Response</code>.</p>\n<p>However, even though I get the necessary data, I still need to implement filtering, sorting and other operations myself. Usually these would be provided by Elide.\nI prefer not to use the current solution, that's why I am not including the code.</p>\n<p>Is there a better way to implement this with Elide, so that I wouldn't have to implement these operations myself, as that is not only time-consuming, but also can get error-prone?</p>\n"},{"tags":["java","spring","spring-boot","validation","customvalidator"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1692004427,"post_id":76897446,"comment_id":135562236,"body_markdown":"Remove `jakarta.validation-api` dependency and fix your `spring-boot-starter-validation` dependency. Your current `pom.xml` (at least what you added here) isn&#39;t even a valid one. Finally remove `@Validated` from the controller that is not needed (and was probably added in an attempt to fix it).","body":"Remove <code>jakarta.validation-api</code> dependency and fix your <code>spring-boot-starter-validation</code> dependency. Your current <code>pom.xml</code> (at least what you added here) isn&#39;t even a valid one. Finally remove <code>@Validated</code> from the controller that is not needed (and was probably added in an attempt to fix it)."},{"owner":{"account_id":29221183,"reputation":9,"user_id":22386893,"display_name":"AppleBees"},"score":0,"creation_date":1692031302,"post_id":76897446,"comment_id":135567715,"body_markdown":"@M.Deinum Thanks for your response. If I remove `jakarta.validation-api` how do I import annotations such as `@valid` and `@Constraint` ?","body":"@M.Deinum Thanks for your response. If I remove <code>jakarta.validation-api</code> how do I import annotations such as <code>@valid</code> and <code>@Constraint</code> ?"},{"owner":{"account_id":1310169,"reputation":3813,"user_id":1258319,"accept_rate":81,"display_name":"Julian"},"score":0,"creation_date":1692045828,"post_id":76897446,"comment_id":135570073,"body_markdown":"You seem to be doing the right thing code like. Just replace `jakarta.validation-api` with `org.hibernate:hibernate-validator:6.010.Final` and I think it should work. This is what we use anyway and it does.","body":"You seem to be doing the right thing code like. Just replace <code>jakarta.validation-api</code> with <code>org.hibernate:hibernate-validator:6.010.Final</code> and I think it should work. This is what we use anyway and it does."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1692080303,"post_id":76897446,"comment_id":135572885,"body_markdown":"You should have a dependency on `spring-boot-starter-validator`, which is what I also explained you need to fix.","body":"You should have a dependency on <code>spring-boot-starter-validator</code>, which is what I also explained you need to fix."},{"owner":{"account_id":29221183,"reputation":9,"user_id":22386893,"display_name":"AppleBees"},"score":0,"creation_date":1692949628,"post_id":76897446,"comment_id":135696891,"body_markdown":"Adding the dependency `spring-boot-starter-validator` resolved the problem. Thank you.","body":"Adding the dependency <code>spring-boot-starter-validator</code> resolved the problem. Thank you."}],"owner":{"account_id":29221183,"reputation":9,"user_id":22386893,"display_name":"AppleBees"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692002238,"creation_date":1692002238,"question_id":76897446,"body_markdown":"I am creating a custom validator with Spring and Java 17.0.8 to validate names in a `Person` class. However, it is not being called.\r\n\r\nAnnotation:\r\n\r\n```\r\npackage com.example.demo.validation;\r\n\r\nimport jakarta.validation.Constraint;\r\nimport jakarta.validation.Payload;\r\n\r\nimport java.lang.annotation.Documented;\r\nimport java.lang.annotation.Retention;\r\nimport java.lang.annotation.RetentionPolicy;\r\nimport java.lang.annotation.Target;\r\n\r\nimport static java.lang.annotation.ElementType.FIELD;\r\nimport static java.lang.annotation.ElementType.PARAMETER;\r\n\r\n@Target( { FIELD, PARAMETER })\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Documented\r\n@Constraint(validatedBy = NameValidator.class)\r\npublic @interface NameValidation {\r\npublic String message() default &quot;Invalid Name&quot;;\r\npublic Class\\&lt;?\\&gt;\\[\\] groups() default {};\r\npublic Class\\&lt;? extends Payload\\&gt;\\[\\] payload() default {};\r\n}\r\n```\r\n\r\nValidator class:\r\n\r\n```\r\npackage com.example.demo.validation;\r\n\r\nimport jakarta.validation.ConstraintValidator;\r\nimport jakarta.validation.ConstraintValidatorContext;\r\n\r\npublic class NameValidator implements ConstraintValidator&lt;NameValidation, String&gt; {\r\n    public boolean isValid(String name, ConstraintValidatorContext cxt) {\r\n        // For simplicity of this example, we only check whether the value is null\r\n        return name != null;\r\n    }\r\n}\r\n```\r\n\r\nController class:\r\n\r\n```\r\n\r\npackage com.example.demo.api;\r\n\r\nimport com.example.demo.model.Person;\r\nimport com.example.demo.service.PersonService;\r\nimport jakarta.validation.Valid;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.validation.annotation.Validated;\r\nimport org.springframework.web.bind.annotation.\\*;\r\nimport org.springframework.web.server.ResponseStatusException;\r\n\r\nimport java.util.List;\r\nimport java.util.Optional;\r\nimport java.util.UUID;\r\n\r\n@Validated\r\n@RequestMapping(&quot;api/v1/person&quot;)\r\n@RestController\r\npublic class PersonController {\r\nprivate final PersonService service;\r\n\r\n    @Autowired\r\n    public PersonController(PersonService service) {\r\n        this.service = service;\r\n    }\r\n    \r\n    \r\n    @PostMapping\r\n    public void addPerson( @Valid @RequestBody Person person) {\r\n        service.insertPerson(person);\r\n    }\r\n\r\n}\r\n```\r\n\r\nService class:\r\n\r\n```\r\n\r\npackage com.example.demo.service;\r\n\r\nimport com.example.demo.dao.PersonDAO;\r\nimport com.example.demo.model.Person;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.util.List;\r\nimport java.util.Optional;\r\nimport java.util.UUID;\r\n\r\n@Service\r\npublic class PersonService {\r\n\r\n    public int insertPerson(Person person) {\r\n        return 0;\r\n    }\r\n\r\n}\r\n```\r\n\r\nPerson class:\r\n\r\n```\r\n\r\npackage com.example.demo.model;\r\n\r\nimport com.example.demo.validation.NameValidation;\r\nimport com.fasterxml.jackson.annotation.JsonProperty;\r\n\r\nimport java.util.UUID;\r\n\r\npublic class Person {\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Person{&quot; +\r\n                &quot;id=&quot; + id +\r\n                &quot;, name=&#39;&quot; + name + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n    }\r\n    \r\n    private final UUID id;\r\n    \r\n    @NameValidation\r\n    private final String name;\r\n    \r\n    \r\n    public Person(@JsonProperty(&quot;id&quot;) UUID id, @JsonProperty(&quot;name&quot;) String name) {\r\n        this.id = id;\r\n        this.name = name;\r\n    }\r\n    \r\n    public UUID getId() {\r\n        return id;\r\n    }\r\n    \r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n}\r\n```\r\n\r\nPom.xml:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;demo&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;jakarta.validation&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jakarta.validation-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```","title":"Spring custom validator not being called","body":"<p>I am creating a custom validator with Spring and Java 17.0.8 to validate names in a <code>Person</code> class. However, it is not being called.</p>\n<p>Annotation:</p>\n<pre><code>package com.example.demo.validation;\n\nimport jakarta.validation.Constraint;\nimport jakarta.validation.Payload;\n\nimport java.lang.annotation.Documented;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\nimport static java.lang.annotation.ElementType.FIELD;\nimport static java.lang.annotation.ElementType.PARAMETER;\n\n@Target( { FIELD, PARAMETER })\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Constraint(validatedBy = NameValidator.class)\npublic @interface NameValidation {\npublic String message() default &quot;Invalid Name&quot;;\npublic Class\\&lt;?\\&gt;\\[\\] groups() default {};\npublic Class\\&lt;? extends Payload\\&gt;\\[\\] payload() default {};\n}\n</code></pre>\n<p>Validator class:</p>\n<pre><code>package com.example.demo.validation;\n\nimport jakarta.validation.ConstraintValidator;\nimport jakarta.validation.ConstraintValidatorContext;\n\npublic class NameValidator implements ConstraintValidator&lt;NameValidation, String&gt; {\n    public boolean isValid(String name, ConstraintValidatorContext cxt) {\n        // For simplicity of this example, we only check whether the value is null\n        return name != null;\n    }\n}\n</code></pre>\n<p>Controller class:</p>\n<pre><code>\npackage com.example.demo.api;\n\nimport com.example.demo.model.Person;\nimport com.example.demo.service.PersonService;\nimport jakarta.validation.Valid;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.validation.annotation.Validated;\nimport org.springframework.web.bind.annotation.\\*;\nimport org.springframework.web.server.ResponseStatusException;\n\nimport java.util.List;\nimport java.util.Optional;\nimport java.util.UUID;\n\n@Validated\n@RequestMapping(&quot;api/v1/person&quot;)\n@RestController\npublic class PersonController {\nprivate final PersonService service;\n\n    @Autowired\n    public PersonController(PersonService service) {\n        this.service = service;\n    }\n    \n    \n    @PostMapping\n    public void addPerson( @Valid @RequestBody Person person) {\n        service.insertPerson(person);\n    }\n\n}\n</code></pre>\n<p>Service class:</p>\n<pre><code>\npackage com.example.demo.service;\n\nimport com.example.demo.dao.PersonDAO;\nimport com.example.demo.model.Person;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\nimport java.util.List;\nimport java.util.Optional;\nimport java.util.UUID;\n\n@Service\npublic class PersonService {\n\n    public int insertPerson(Person person) {\n        return 0;\n    }\n\n}\n</code></pre>\n<p>Person class:</p>\n<pre><code>\npackage com.example.demo.model;\n\nimport com.example.demo.validation.NameValidation;\nimport com.fasterxml.jackson.annotation.JsonProperty;\n\nimport java.util.UUID;\n\npublic class Person {\n\n    @Override\n    public String toString() {\n        return &quot;Person{&quot; +\n                &quot;id=&quot; + id +\n                &quot;, name='&quot; + name + '\\'' +\n                '}';\n    }\n    \n    private final UUID id;\n    \n    @NameValidation\n    private final String name;\n    \n    \n    public Person(@JsonProperty(&quot;id&quot;) UUID id, @JsonProperty(&quot;name&quot;) String name) {\n        this.id = id;\n        this.name = name;\n    }\n    \n    public UUID getId() {\n        return id;\n    }\n    \n    public String getName() {\n        return name;\n    }\n\n}\n</code></pre>\n<p>Pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.validation&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.validation-api&lt;/artifactId&gt;\n            &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","spring","maven"],"comments":[{"owner":{"account_id":16657879,"reputation":2625,"user_id":12038714,"display_name":"J Asgarov"},"score":0,"creation_date":1621969833,"post_id":67694112,"comment_id":119653682,"body_markdown":"Spring has trouble... what does that mean? Where is the error message? And if that red line is what you mean (which is not Spring - it is a compilation error) then just hover your mouse over it and see what it says","body":"Spring has trouble... what does that mean? Where is the error message? And if that red line is what you mean (which is not Spring - it is a compilation error) then just hover your mouse over it and see what it says"},{"owner":{"account_id":14671497,"reputation":99,"user_id":10595865,"display_name":"Jan Chabik"},"score":0,"creation_date":1621973732,"post_id":67694112,"comment_id":119655186,"body_markdown":"@JAsgarov Added poms and IntelliJ error message. Please let know if I&#39;m lacking some dependencies between modules.","body":"@JAsgarov Added poms and IntelliJ error message. Please let know if I&#39;m lacking some dependencies between modules."},{"owner":{"account_id":16657879,"reputation":2625,"user_id":12038714,"display_name":"J Asgarov"},"score":0,"creation_date":1621974140,"post_id":67694112,"comment_id":119655337,"body_markdown":"you need to define spring only once in `restaurant-management/pom.xml`. Child modules will automatically have access to it. Right now you have 3 different spring dependencies all with different spring container. For further reference: https://www.baeldung.com/spring-boot-multiple-modules","body":"you need to define spring only once in <code>restaurant-management&#47;pom.xml</code>. Child modules will automatically have access to it. Right now you have 3 different spring dependencies all with different spring container. For further reference: <a href=\"https://www.baeldung.com/spring-boot-multiple-modules\" rel=\"nofollow noreferrer\">baeldung.com/spring-boot-multiple-modules</a>"},{"owner":{"account_id":14671497,"reputation":99,"user_id":10595865,"display_name":"Jan Chabik"},"score":0,"creation_date":1621975824,"post_id":67694112,"comment_id":119655925,"body_markdown":"@JAsgarov thanks for the advice ! I did so but it didn&#39;t solve my issue with Beans not being available","body":"@JAsgarov thanks for the advice ! I did so but it didn&#39;t solve my issue with Beans not being available"},{"owner":{"account_id":16657879,"reputation":2625,"user_id":12038714,"display_name":"J Asgarov"},"score":0,"creation_date":1622018596,"post_id":67694112,"comment_id":119666252,"body_markdown":"please show your updated `pom.xml`s","body":"please show your updated <code>pom.xml</code>s"}],"answers":[{"tags":[],"owner":{"account_id":16657879,"reputation":2625,"user_id":12038714,"display_name":"J Asgarov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621970277,"creation_date":1621970277,"answer_id":67694286,"question_id":67694112,"body_markdown":"Actually I see already what the problem is - you have defined several modules but modules dont see classes defined in another module by default. `RestaurantService` is in another module from `Controller`\r\n\r\nYou need to add module as a dependency to the other modules pom. Intellij should suggest you to help with that if you just press &quot;Alt+Enter&quot; over the red line. \r\n\r\nYou might also need to make sure to set up Spring in parent pom to make sure that it spans over all modules.","title":"Autowiring Spring Beans by Interface","body":"<p>Actually I see already what the problem is - you have defined several modules but modules dont see classes defined in another module by default. <code>RestaurantService</code> is in another module from <code>Controller</code></p>\n<p>You need to add module as a dependency to the other modules pom. Intellij should suggest you to help with that if you just press &quot;Alt+Enter&quot; over the red line.</p>\n<p>You might also need to make sure to set up Spring in parent pom to make sure that it spans over all modules.</p>\n"}],"owner":{"account_id":14671497,"reputation":99,"user_id":10595865,"display_name":"Jan Chabik"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1692001639,"creation_date":1621969489,"question_id":67694112,"body_markdown":"I&#39;m trying to do hexagonal architecture in my Project. \r\nThe module structure looks like this:\r\n\r\n[![My project structure][1]][1]\r\n\r\n\r\n[![IntelliJ error message][2]][2]\r\n\r\nI don&#39;t want domain(core) module to be dependant on other modules. It&#39;s logic should be exposed through api, hence I want other modules/clients, like a rest module, to be dependant on the API module only.\r\n\r\nI want to use RestaurantServiceImpl (from module core) through an interface RestaurantService (from module api). Spring has trouble autowiring a Bean for an interface RestaurantService. Here  is RestaurantServiceImpl which should register correctly as a spring bean:\r\n\r\n    @Service\r\n    public class RestaurantServiceImpl implements RestaurantService {\r\n\r\n        private final RestaurantRepository restaurantRepository;\r\n\r\n        @Autowired\r\n        public RestaurantServiceImpl(RestaurantRepository restaurantRepository) {\r\n            this.restaurantRepository = restaurantRepository;\r\n        }\r\n\r\n        @Override\r\n        public Optional&lt;Restaurant&gt; getById(RestaurantId restaurantId) {\r\n            return restaurantRepository.findById(restaurantId);\r\n        }\r\n    }\r\n\r\nrestaurant-management-api/pom.xml\r\n\r\n    &lt;parent&gt;\r\n        &lt;artifactId&gt;restaurant-management&lt;/artifactId&gt;\r\n        &lt;groupId&gt;com.jc&lt;/groupId&gt;\r\n        &lt;version&gt;1&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n    &lt;artifactId&gt;restaurant-management-api&lt;/artifactId&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n            &lt;version&gt;5.3.7&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n            &lt;version&gt;5.3.7&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n            &lt;version&gt;5.3.7&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;version&gt;1.18.4&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n\r\nrestaurant-management-core/pom.xml\r\n\r\n    &lt;parent&gt;\r\n        &lt;artifactId&gt;restaurant-management&lt;/artifactId&gt;\r\n        &lt;groupId&gt;com.jc&lt;/groupId&gt;\r\n        &lt;version&gt;1&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;artifactId&gt;restaurant-management-core&lt;/artifactId&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;!--________________________INTERNAL________________________--&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.jc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;restaurant-management-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1&lt;/version&gt;\r\n       &lt;/dependency&gt;\r\n        &lt;!--________________________SPRING________________________--&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n            &lt;version&gt;5.3.7&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n            &lt;version&gt;5.3.7&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n            &lt;version&gt;5.3.7&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n       &lt;!--________________________DATABASE________________________--&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\r\n            &lt;version&gt;2.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\r\n            &lt;version&gt;2.5.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;version&gt;1.18.4&lt;/version&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\nrestaurant-management-rest/pom.xml\r\n\r\n    &lt;parent&gt;\r\n        &lt;artifactId&gt;restaurant-management&lt;/artifactId&gt;\r\n        &lt;groupId&gt;com.jc&lt;/groupId&gt;\r\n        &lt;version&gt;1&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;artifactId&gt;restaurant-management-rest&lt;/artifactId&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;!--________________________SPRING________________________--&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n            &lt;version&gt;5.3.7&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n            &lt;version&gt;5.3.7&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n            &lt;version&gt;5.3.7&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n            &lt;version&gt;5.3.7&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.jc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;restaurant-management-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\nrestaurant-management/pom.xml\r\n\r\n    &lt;artifactId&gt;restaurant-management&lt;/artifactId&gt;\r\n    &lt;packaging&gt;pom&lt;/packaging&gt;\r\n    &lt;version&gt;1&lt;/version&gt;\r\n    &lt;groupId&gt;com.jc&lt;/groupId&gt;\r\n    &lt;modules&gt;\r\n        &lt;module&gt;restaurant-management-core&lt;/module&gt;\r\n        &lt;module&gt;restaurant-management-api&lt;/module&gt;\r\n        &lt;module&gt;restaurant-management-rest&lt;/module&gt;\r\n    &lt;/modules&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xwSHg.png\r\n  [2]: https://i.stack.imgur.com/JC2Z2.png","title":"Autowiring Spring Beans by Interface","body":"<p>I'm trying to do hexagonal architecture in my Project.\nThe module structure looks like this:</p>\n<p><a href=\"https://i.stack.imgur.com/xwSHg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xwSHg.png\" alt=\"My project structure\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/JC2Z2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JC2Z2.png\" alt=\"IntelliJ error message\" /></a></p>\n<p>I don't want domain(core) module to be dependant on other modules. It's logic should be exposed through api, hence I want other modules/clients, like a rest module, to be dependant on the API module only.</p>\n<p>I want to use RestaurantServiceImpl (from module core) through an interface RestaurantService (from module api). Spring has trouble autowiring a Bean for an interface RestaurantService. Here  is RestaurantServiceImpl which should register correctly as a spring bean:</p>\n<pre><code>@Service\npublic class RestaurantServiceImpl implements RestaurantService {\n\n    private final RestaurantRepository restaurantRepository;\n\n    @Autowired\n    public RestaurantServiceImpl(RestaurantRepository restaurantRepository) {\n        this.restaurantRepository = restaurantRepository;\n    }\n\n    @Override\n    public Optional&lt;Restaurant&gt; getById(RestaurantId restaurantId) {\n        return restaurantRepository.findById(restaurantId);\n    }\n}\n</code></pre>\n<p>restaurant-management-api/pom.xml</p>\n<pre><code>&lt;parent&gt;\n    &lt;artifactId&gt;restaurant-management&lt;/artifactId&gt;\n    &lt;groupId&gt;com.jc&lt;/groupId&gt;\n    &lt;version&gt;1&lt;/version&gt;\n&lt;/parent&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n&lt;artifactId&gt;restaurant-management-api&lt;/artifactId&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n        &lt;version&gt;5.3.7&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n        &lt;version&gt;5.3.7&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n        &lt;version&gt;5.3.7&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;version&gt;1.18.4&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>restaurant-management-core/pom.xml</p>\n<pre><code>&lt;parent&gt;\n    &lt;artifactId&gt;restaurant-management&lt;/artifactId&gt;\n    &lt;groupId&gt;com.jc&lt;/groupId&gt;\n    &lt;version&gt;1&lt;/version&gt;\n&lt;/parent&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n&lt;artifactId&gt;restaurant-management-core&lt;/artifactId&gt;\n&lt;dependencies&gt;\n    &lt;!--________________________INTERNAL________________________--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.jc&lt;/groupId&gt;\n        &lt;artifactId&gt;restaurant-management-api&lt;/artifactId&gt;\n        &lt;version&gt;1&lt;/version&gt;\n   &lt;/dependency&gt;\n    &lt;!--________________________SPRING________________________--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n        &lt;version&gt;5.3.7&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n        &lt;version&gt;5.3.7&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n        &lt;version&gt;5.3.7&lt;/version&gt;\n    &lt;/dependency&gt;\n   &lt;!--________________________DATABASE________________________--&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\n        &lt;version&gt;2.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\n        &lt;version&gt;2.5.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;version&gt;1.18.4&lt;/version&gt;\n        &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>restaurant-management-rest/pom.xml</p>\n<pre><code>&lt;parent&gt;\n    &lt;artifactId&gt;restaurant-management&lt;/artifactId&gt;\n    &lt;groupId&gt;com.jc&lt;/groupId&gt;\n    &lt;version&gt;1&lt;/version&gt;\n&lt;/parent&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n&lt;artifactId&gt;restaurant-management-rest&lt;/artifactId&gt;\n&lt;dependencies&gt;\n    &lt;!--________________________SPRING________________________--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n        &lt;version&gt;5.3.7&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n        &lt;version&gt;5.3.7&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n        &lt;version&gt;5.3.7&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n        &lt;version&gt;5.3.7&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.jc&lt;/groupId&gt;\n        &lt;artifactId&gt;restaurant-management-api&lt;/artifactId&gt;\n        &lt;version&gt;1&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>restaurant-management/pom.xml</p>\n<pre><code>&lt;artifactId&gt;restaurant-management&lt;/artifactId&gt;\n&lt;packaging&gt;pom&lt;/packaging&gt;\n&lt;version&gt;1&lt;/version&gt;\n&lt;groupId&gt;com.jc&lt;/groupId&gt;\n&lt;modules&gt;\n    &lt;module&gt;restaurant-management-core&lt;/module&gt;\n    &lt;module&gt;restaurant-management-api&lt;/module&gt;\n    &lt;module&gt;restaurant-management-rest&lt;/module&gt;\n&lt;/modules&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","vue.js","azure-active-directory"],"owner":{"account_id":7459405,"reputation":1115,"user_id":5671480,"accept_rate":67,"display_name":"Sanal S"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692000833,"creation_date":1692000833,"question_id":76897313,"body_markdown":"TLDR: I am not familiar with Spring security that much and is finding it difficult to implement refresh token mechanism with Azure AD authentication and springboot.\r\n\r\nOur application is having AzureAD authentication with the default microsoft login page. Backend is in SpringBoot-Java and front end in in VueJS. The JSESSIONID is expiring after the default 30 minutes if there is no api request send to the backend.\r\n\r\nWhen the JSESSIONID expires and a new request is sent, a new JSESSIONID is returned back to the frontend by default. When we try to make a subsequent request, this new JSESSIONID is automatically included in the request, but it fails again. \r\n\r\n&gt; We have decided to send a heartbeat/keepalive request to the server every 10 minutes to overcome this for now.\r\n\r\nBut I would like to know if there is any way we can handle the session/token in the backend and use this token instead of this JSESSIONID which is directly provided by Azure.\r\n\r\nWe have only configured the bare minimum for AzureAD authentication. \r\n\r\nFollowing are the code snippets for any reference.\r\n\r\nSnippet of dependencies related to azure\r\n\r\n \r\n    &lt;spring.boot.version&gt;2.7.0&lt;/spring.boot.version&gt;\r\n\t&lt;spring.framework.bom&gt;5.3.20&lt;/spring.framework.bom&gt;\r\n\t&lt;spring.integration.bom&gt;5.5.12&lt;/spring.integration.bom&gt;\r\n    ...\r\n    ...\r\n    &lt;dependency&gt; \r\n        &lt;groupId&gt;com.azure.spring&lt;/groupId&gt;  \r\n        &lt;artifactId&gt;azure-spring-boot-starter-active-directory&lt;/artifactId&gt;  \r\n        &lt;version&gt;3.9.0&lt;/version&gt; \r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt; \r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;  \r\n        &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt; \r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.microsoft.graph&lt;/groupId&gt;\r\n        &lt;artifactId&gt;microsoft-graph&lt;/artifactId&gt;\r\n        &lt;version&gt;5.5.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nproperties file\r\n\r\n    azure.activedirectory.tenant-id=...\r\n    azure.activedirectory.client-id=...\r\n    azure.activedirectory.client-secret=...\r\n    azure.activedirectory.post-logout-redirect-uri=https://localhost\r\n    azure.activedirectory.redirect-uri-template[0]=https://localhost/login/oauth2/code/\r\n    azure.activedirectory.authorization-clients.graph.scopes=https://graph.microsoft.com/User.Read\r\n\r\nsecurity class\r\n\r\n    import com.azure.spring.aad.webapp.AADWebSecurityConfigurerAdapter;\r\n    import org.springframework.context.annotation.Profile;\r\n    import org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\n\r\n    @Profile({&quot;one&quot;, &quot;two&quot;})\r\n    @EnableWebSecurity\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true)\r\n    public class AADSecurityConfig extends AADWebSecurityConfigurerAdapter {\r\n\r\n        @Override\r\n        public void configure(HttpSecurity http) throws Exception {\r\n            super.configure(http);\r\n            http.authorizeRequests()\r\n                .antMatchers(&quot;/sample/check&quot;).permitAll()\r\n                .anyRequest().authenticated();\r\n\r\n            http.csrf().disable();\r\n        }\r\n    }\r\n\r\nAnd if it helps, we are able to fetch the current token using the following code.\r\n\r\n    import org.springframework.security.oauth2.core.oidc.user.OidcUser;\r\n    ...\r\n    ...\r\n    @RequestMapping(value = &quot;/token&quot;)\r\n    public ResponseEntity&lt;String&gt; getToken(@AuthenticationPrincipal OidcUser principal) {\r\n        try {\r\n            return principal.getIdToken().getTokenValue();\r\n        } catch (Exception e) {\r\n            throw new ResponseStatusException(HttpStatus.NOT_FOUND, &quot;Token Not Available&quot;);\r\n        }\r\n    }\r\n\r\n","title":"The JSESSIONID of my AzureAD-SpringBoot application is expiring after the default 30 minutes. How to set up refresh token?","body":"<p>TLDR: I am not familiar with Spring security that much and is finding it difficult to implement refresh token mechanism with Azure AD authentication and springboot.</p>\n<p>Our application is having AzureAD authentication with the default microsoft login page. Backend is in SpringBoot-Java and front end in in VueJS. The JSESSIONID is expiring after the default 30 minutes if there is no api request send to the backend.</p>\n<p>When the JSESSIONID expires and a new request is sent, a new JSESSIONID is returned back to the frontend by default. When we try to make a subsequent request, this new JSESSIONID is automatically included in the request, but it fails again.</p>\n<blockquote>\n<p>We have decided to send a heartbeat/keepalive request to the server every 10 minutes to overcome this for now.</p>\n</blockquote>\n<p>But I would like to know if there is any way we can handle the session/token in the backend and use this token instead of this JSESSIONID which is directly provided by Azure.</p>\n<p>We have only configured the bare minimum for AzureAD authentication.</p>\n<p>Following are the code snippets for any reference.</p>\n<p>Snippet of dependencies related to azure</p>\n<pre><code>&lt;spring.boot.version&gt;2.7.0&lt;/spring.boot.version&gt;\n&lt;spring.framework.bom&gt;5.3.20&lt;/spring.framework.bom&gt;\n&lt;spring.integration.bom&gt;5.5.12&lt;/spring.integration.bom&gt;\n...\n...\n&lt;dependency&gt; \n    &lt;groupId&gt;com.azure.spring&lt;/groupId&gt;  \n    &lt;artifactId&gt;azure-spring-boot-starter-active-directory&lt;/artifactId&gt;  \n    &lt;version&gt;3.9.0&lt;/version&gt; \n&lt;/dependency&gt;\n&lt;dependency&gt; \n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;  \n    &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt; \n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.microsoft.graph&lt;/groupId&gt;\n    &lt;artifactId&gt;microsoft-graph&lt;/artifactId&gt;\n    &lt;version&gt;5.5.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>properties file</p>\n<pre><code>azure.activedirectory.tenant-id=...\nazure.activedirectory.client-id=...\nazure.activedirectory.client-secret=...\nazure.activedirectory.post-logout-redirect-uri=https://localhost\nazure.activedirectory.redirect-uri-template[0]=https://localhost/login/oauth2/code/\nazure.activedirectory.authorization-clients.graph.scopes=https://graph.microsoft.com/User.Read\n</code></pre>\n<p>security class</p>\n<pre><code>import com.azure.spring.aad.webapp.AADWebSecurityConfigurerAdapter;\nimport org.springframework.context.annotation.Profile;\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\n\n@Profile({&quot;one&quot;, &quot;two&quot;})\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class AADSecurityConfig extends AADWebSecurityConfigurerAdapter {\n\n    @Override\n    public void configure(HttpSecurity http) throws Exception {\n        super.configure(http);\n        http.authorizeRequests()\n            .antMatchers(&quot;/sample/check&quot;).permitAll()\n            .anyRequest().authenticated();\n\n        http.csrf().disable();\n    }\n}\n</code></pre>\n<p>And if it helps, we are able to fetch the current token using the following code.</p>\n<pre><code>import org.springframework.security.oauth2.core.oidc.user.OidcUser;\n...\n...\n@RequestMapping(value = &quot;/token&quot;)\npublic ResponseEntity&lt;String&gt; getToken(@AuthenticationPrincipal OidcUser principal) {\n    try {\n        return principal.getIdToken().getTokenValue();\n    } catch (Exception e) {\n        throw new ResponseStatusException(HttpStatus.NOT_FOUND, &quot;Token Not Available&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1692001528,"post_id":76897174,"comment_id":135561683,"body_markdown":"Better dupe target: https://stackoverflow.com/questions/1801718/why-can-outer-java-classes-access-inner-class-private-members","body":"Better dupe target: <a href=\"https://stackoverflow.com/questions/1801718/why-can-outer-java-classes-access-inner-class-private-members\" title=\"why can outer java classes access inner class private members\">stackoverflow.com/questions/1801718/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":18770327,"reputation":13,"user_id":13687288,"display_name":"Đạt Phạm Nguyễn Ngọc"},"score":0,"creation_date":1692001378,"post_id":76897197,"comment_id":135561648,"body_markdown":"I think this is not the best design out there. Because you could make a getter, or a setter, or make those fields public @tamtejszystan","body":"I think this is not the best design out there. Because you could make a getter, or a setter, or make those fields public @tamtejszystan"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1692001584,"post_id":76897197,"comment_id":135561693,"body_markdown":"@ĐạtPhạmNguyễnNgọc encapsulation exists for a reason, not for the sake of creating getters and setters. What reason do you see for an inner class to hide its implementation to its containing class.","body":"@ĐạtPhạmNguyễnNgọc encapsulation exists for a reason, not for the sake of creating getters and setters. What reason do you see for an inner class to hide its implementation to its containing class."},{"owner":{"account_id":18770327,"reputation":13,"user_id":13687288,"display_name":"Đạt Phạm Nguyễn Ngọc"},"score":0,"creation_date":1692001708,"post_id":76897197,"comment_id":135561717,"body_markdown":"Because private fields could not be access or modified outside of the class makes more sense to me. In this case, outside of the class mentioned but inside of its containing class. @FedericoklezCulloca","body":"Because private fields could not be access or modified outside of the class makes more sense to me. In this case, outside of the class mentioned but inside of its containing class. @FedericoklezCulloca"}],"tags":[],"owner":{"account_id":28578269,"reputation":142,"user_id":21879587,"display_name":"tamtejszystan"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691999635,"creation_date":1691999635,"answer_id":76897197,"question_id":76897174,"body_markdown":"An instance of a class can access private fields of its own type because Java&#39;s visibility rules allow nested classes to access private members of their enclosing class. In your example, `PokedexViewHolder` is an inner static class of `PokedexAdapter`, so it can access the private fields of `PokedexAdapter`. This encapsulation enables internal components to work together effectively within the same class.","title":"Why can an instance of a class access private fields of its own inner class?","body":"<p>An instance of a class can access private fields of its own type because Java's visibility rules allow nested classes to access private members of their enclosing class. In your example, <code>PokedexViewHolder</code> is an inner static class of <code>PokedexAdapter</code>, so it can access the private fields of <code>PokedexAdapter</code>. This encapsulation enables internal components to work together effectively within the same class.</p>\n"}],"owner":{"account_id":18770327,"reputation":13,"user_id":13687288,"display_name":"Đạt Phạm Nguyễn Ngọc"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1692001496,"accepted_answer_id":76897197,"answer_count":1,"score":0,"last_activity_date":1692000812,"creation_date":1691999409,"question_id":76897174,"body_markdown":"An instance of a class, in Java, can access private fields of its own inner class, as the last line of code does, `holder.textView` , in the following listing:\r\n\r\n \r\n\r\n       public class PokedexAdapter extends RecyclerView.Adapter&lt;PokedexAdapter.PokedexViewHolder&gt; {\r\n           public static class PokedexViewHolder extends RecyclerView.ViewHolder {\r\n               private LinearLayout containerView;\r\n               private TextView textView;\r\n\r\n               PokedexViewHolder(View view) {      \r\n                   super(view);\r\n                   containerView = view.findViewById(R.id.pokedex_row);\r\n                   textView = view.findViewById(R.id.pokedex_row_text_view);\r\n               }\r\n           }\r\n\r\n           private List&lt;Pokemon&gt; pokemon = Arrays.asList(\r\n                   new Pokemon(&quot;Bulbasaur&quot;, 1),\r\n                   new Pokemon(&quot;Ivysaur&quot;, 2),\r\n                   new Pokemon(&quot;Venusaur&quot;, 3)\r\n           );\r\n\r\n           @Override\r\n           public void onBindViewHolder(@NonNull PokedexViewHolder holder, int position) {\r\n                Pokemon current = pokemon.get(position);\r\n                holder.textView.setText(current.getName());\r\n           }\r\n       }","title":"Why can an instance of a class access private fields of its own inner class?","body":"<p>An instance of a class, in Java, can access private fields of its own inner class, as the last line of code does, <code>holder.textView</code> , in the following listing:</p>\n<pre><code>   public class PokedexAdapter extends RecyclerView.Adapter&lt;PokedexAdapter.PokedexViewHolder&gt; {\n       public static class PokedexViewHolder extends RecyclerView.ViewHolder {\n           private LinearLayout containerView;\n           private TextView textView;\n\n           PokedexViewHolder(View view) {      \n               super(view);\n               containerView = view.findViewById(R.id.pokedex_row);\n               textView = view.findViewById(R.id.pokedex_row_text_view);\n           }\n       }\n\n       private List&lt;Pokemon&gt; pokemon = Arrays.asList(\n               new Pokemon(&quot;Bulbasaur&quot;, 1),\n               new Pokemon(&quot;Ivysaur&quot;, 2),\n               new Pokemon(&quot;Venusaur&quot;, 3)\n       );\n\n       @Override\n       public void onBindViewHolder(@NonNull PokedexViewHolder holder, int position) {\n            Pokemon current = pokemon.get(position);\n            holder.textView.setText(current.getName());\n       }\n   }\n</code></pre>\n"},{"tags":["java","spring-boot","factory-pattern"],"answers":[{"comments":[{"owner":{"account_id":4308682,"reputation":12633,"user_id":3520404,"display_name":"saran3h"},"score":0,"creation_date":1612805831,"post_id":66100299,"comment_id":116876056,"body_markdown":"This works like charm :) Although it introduces some extra code in all my Validators. Instead of returning true, I check for `return DocumentDto.class == clazz` for example in all my Validators.","body":"This works like charm :) Although it introduces some extra code in all my Validators. Instead of returning true, I check for <code>return DocumentDto.class == clazz</code> for example in all my Validators."}],"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1612813330,"creation_date":1612781940,"answer_id":66100299,"question_id":66099924,"body_markdown":"Based on my understanding your Factory needs to return based on a specific type.\r\n\r\nRough Code to give you an idea:\r\n\r\nThe ValidatorFactory is going to filter from its list of Validators, based on whether they support a given Object or not.\r\n\r\nKeep in mind if &gt;1 Validator that supports a given Type, then your filter will return 2 or more.  You will only return findFirst().\r\n\r\n\r\nOption 1:\r\n\r\n\r\n    Public class ValidatorFactory {\r\n    \r\n        validators.stream().filter(v -&gt; v.supports(object.getClass()).findFirst();\r\n    \r\n    \r\n    }\r\n\r\n    public class DocumentValidator{\r\n    \r\n      public boolean supports(Class clazz){\r\n    \r\n       return true;\r\n       }\r\n    }\r\n\r\nOption 2:\r\n\r\n    public class ValidatorFactory{\r\n      \r\n       private Map&lt;Class, Validator&gt; validatorAssociations = new HashMap&lt;&gt;();\r\n    \r\n    \r\n       public Validator getValidator(Object object){\r\n     \r\n          return validatorAssociations.get(object.class);\r\n       }\r\n      \r\n    }\r\n\r\n\r\nYou will need some sort of mapping, whether it is the responsibility of the ValidatorFactory (Which is generally the case for the FactoryPattern), or you push the responsibility down to the validator to know its own capabilities.  Up to you.","title":"Designing a sophisticated validation framework: Find correct validator from factory","body":"<p>Based on my understanding your Factory needs to return based on a specific type.</p>\n<p>Rough Code to give you an idea:</p>\n<p>The ValidatorFactory is going to filter from its list of Validators, based on whether they support a given Object or not.</p>\n<p>Keep in mind if &gt;1 Validator that supports a given Type, then your filter will return 2 or more.  You will only return findFirst().</p>\n<p>Option 1:</p>\n<pre><code>Public class ValidatorFactory {\n\n    validators.stream().filter(v -&gt; v.supports(object.getClass()).findFirst();\n\n\n}\n\npublic class DocumentValidator{\n\n  public boolean supports(Class clazz){\n\n   return true;\n   }\n}\n</code></pre>\n<p>Option 2:</p>\n<pre><code>public class ValidatorFactory{\n  \n   private Map&lt;Class, Validator&gt; validatorAssociations = new HashMap&lt;&gt;();\n\n\n   public Validator getValidator(Object object){\n \n      return validatorAssociations.get(object.class);\n   }\n  \n}\n</code></pre>\n<p>You will need some sort of mapping, whether it is the responsibility of the ValidatorFactory (Which is generally the case for the FactoryPattern), or you push the responsibility down to the validator to know its own capabilities.  Up to you.</p>\n"}],"owner":{"account_id":4308682,"reputation":12633,"user_id":3520404,"display_name":"saran3h"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":374,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":66100299,"answer_count":1,"score":0,"last_activity_date":1692000335,"creation_date":1612780496,"question_id":66099924,"body_markdown":"I am designing a validation framework that will handle many different types of validations based on the object that I pass to my Validator class. Below is the Factory pattern based iplementation of the same.\r\n\r\n**Validator.java**\r\n```\r\n\r\n/**\r\n * Validator interface\r\n *\r\n * @param &lt;T&gt; generic type\r\n * @param &lt;M&gt; generic type\r\n *\r\n */\r\n@FunctionalInterface\r\npublic interface Validator&lt;T, M extends Serializable&gt; {\r\n\t/**\r\n\t * Validates target object\r\n\t *\r\n\t * @param object target object\r\n\t * @return map of errors (empty if valid)\r\n\t */\r\n\tMap&lt;String, M&gt; validate(T object);\r\n\r\n\t/**\r\n\t * Validates target object and throws exception in case\r\n\t * if list of errors is not empty\r\n\t *\r\n\t * @param object target object\r\n\t * @throws ValidationException if any validation errors exist\r\n\t */\r\n\tdefault void validateAndThrow(T object) throws ValidationException {\r\n\t\tMap&lt;String, M&gt; errors = validate(object);\r\n\t\tif (!errors.isEmpty()) {\r\n\t\t\tthrow new ValidationException(errors);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Allows to configure validator if necessary\r\n\t *\r\n\t * @param visitor Validator visitor\r\n\t */\r\n\tdefault void configure(ValidatorVisitor visitor) {\r\n\t\tvisitor.visit(this);\r\n\t}\r\n\r\n\t/**\r\n\t * Validator visitor functional interface\r\n\t */\r\n\t@FunctionalInterface\r\n\tinterface ValidatorVisitor {\r\n\r\n\t\t/**\r\n\t\t * Action to be performed on a validator\r\n\t\t *\r\n\t\t * @param validator target validator\r\n\t\t */\r\n\t\tvoid visit(Validator validator);\r\n\t}\r\n}\r\n```\r\n**ValidatorFactory.java**\r\n```\r\n\r\n\r\n/**\r\n * Implementation of validation factory\r\n *\r\n * Created by Saransh Bansal on 15/05/2020\r\n */\r\n@Component\r\npublic class ValidatorFactory {\r\n\r\n\t@Autowired\r\n\tList&lt;Validator&gt; validators;\r\n\r\n\t/**\r\n\t * Returns specific validator based on object&#39;s class.\r\n\t *\r\n\t * @param object target object\r\n\t * @return instance of {@link Validator}\r\n\t */\r\n\tpublic Validator getValidatorForObject(Object object) {\r\n\t\treturn validators.stream()\r\n\t\t\t\t.filter(v -&gt; {\r\n\t\t\t\t\tSystem.out.println(&quot;.....&quot; + v.getClass());\r\n\t\t\t\t\t// return v.getClass().isAssignableFrom(object.getClass()); - ???\r\n\t\t\t\t})\r\n\t\t\t\t.findFirst()\r\n\t\t\t\t.orElseThrow(() -&gt; new GenericRuntimeException(ERROR_TYPE_VALIDATOR_NOT_FOUND.getText(\r\n\t\t\t\t\t\tobject == null ? &quot;null&quot; : object.getClass())));\r\n\t}\r\n}\r\n```\r\n\r\n**Custom validators - DocumentValidator.java**\r\n```\r\n\r\n/**\r\n * Document upload Request validator\r\n *\r\n */\r\n@Component\r\npublic class DocumentValidator implements Validator&lt;DocumentDto, Serializable&gt; {\r\n\tprivate static final long DEFAULT_MAX_FILE_SIZE = 5 * 1024L * 1024;\r\n\r\n\t@Value(&quot;${aap.apricot.document.allowedContentTypes:}#{T(java.util.Collections).emptyList()}&quot;)\r\n\tprivate List&lt;String&gt; allowedContentTypes;\r\n\r\n\t@Value(&quot;${aap.apricot.document.allowedFileNames:}#{T(java.util.Collections).emptyList()}&quot;)\r\n\tprivate List&lt;String&gt; allowedFileNames;\r\n\r\n\t@Value(&quot;${aap.apricot.document.max.size:&quot; + DEFAULT_MAX_FILE_SIZE + &quot;}&quot;)\r\n\tprivate long maxFileSize;\r\n\r\n\t@Override\r\n\tpublic Map&lt;String, Serializable&gt; validate(DocumentDto documentData) {\r\n\t\tnotNull(documentData, ERROR_MSG_DOCUMENT_MISSED.getText());\r\n\r\n\t\tMap&lt;String, Serializable&gt; errors = new HashMap&lt;&gt;();\r\n\r\n\t\tif (isNull(documentData.getFile())) {\r\n\t\t\terrors.put(FIELD_DOCUMENT_FILE.getText(), ERROR_MSG_DOCUMENT_FILE_MISSED.getText());\r\n\t\t} else {\r\n\t\t\tString contentType = documentData.getFile().getContentType();\r\n\t\t\tString fileName = documentData.getFile().getOriginalFilename();\r\n\r\n\t\t\tif (isNull(documentData.getBusinessDate())) {\r\n\t\t\t\terrors.put(FIELD_DOCUMENT_FILE.getText(), buildMessage(ERROR_MSG_DOCUMENT_BUSINESS_DATE_MISSED.getText()));\r\n\t\t\t}\r\n\t\t\tif (documentData.getFile().getSize() &gt; maxFileSize) {\r\n\t\t\t\terrors.put(FIELD_DOCUMENT_FILE.getText(), buildMessage(ERROR_MSG_DOCUMENT_FILE_SIZE_EXCEEDED.getText(), maxFileSize));\r\n\t\t\t}\r\n\t\t\tif (!isEmpty(allowedContentTypes) &amp;&amp; contentType != null &amp;&amp;\r\n\t\t\t\t\tallowedContentTypes.stream().noneMatch(contentType::equalsIgnoreCase)) {\r\n\t\t\t\terrors.put(FIELD_DOCUMENT_FILE.getText(), buildMessage(ERROR_MSG_DOCUMENT_RESTRICTED_CONTENT_TYPE.getText(), contentType));\r\n\t\t\t}\r\n\t\t\tif (!isEmpty(allowedFileNames) &amp;&amp; fileName != null &amp;&amp;\r\n\t\t\t\t\t\tallowedFileNames.stream().noneMatch(fileName::startsWith)) {\r\n\t\t\t\terrors.put(FIELD_DOCUMENT_FILE.getText(), buildMessage(ERROR_MSG_DOCUMENT_RESTRICTED_FILE_NAME.getText(), fileName));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn errors;\r\n\t}\r\n}\r\n```\r\n\r\nI cannot seem to figure out how to correctly return a validator from my Factory class. (See the code commented with `???` in ValidatorFactory.java)\r\n\r\nCan anyone help with the same.\r\n","title":"Designing a sophisticated validation framework: Find correct validator from factory","body":"<p>I am designing a validation framework that will handle many different types of validations based on the object that I pass to my Validator class. Below is the Factory pattern based iplementation of the same.</p>\n<p><strong>Validator.java</strong></p>\n<pre><code>\n/**\n * Validator interface\n *\n * @param &lt;T&gt; generic type\n * @param &lt;M&gt; generic type\n *\n */\n@FunctionalInterface\npublic interface Validator&lt;T, M extends Serializable&gt; {\n    /**\n     * Validates target object\n     *\n     * @param object target object\n     * @return map of errors (empty if valid)\n     */\n    Map&lt;String, M&gt; validate(T object);\n\n    /**\n     * Validates target object and throws exception in case\n     * if list of errors is not empty\n     *\n     * @param object target object\n     * @throws ValidationException if any validation errors exist\n     */\n    default void validateAndThrow(T object) throws ValidationException {\n        Map&lt;String, M&gt; errors = validate(object);\n        if (!errors.isEmpty()) {\n            throw new ValidationException(errors);\n        }\n    }\n\n    /**\n     * Allows to configure validator if necessary\n     *\n     * @param visitor Validator visitor\n     */\n    default void configure(ValidatorVisitor visitor) {\n        visitor.visit(this);\n    }\n\n    /**\n     * Validator visitor functional interface\n     */\n    @FunctionalInterface\n    interface ValidatorVisitor {\n\n        /**\n         * Action to be performed on a validator\n         *\n         * @param validator target validator\n         */\n        void visit(Validator validator);\n    }\n}\n</code></pre>\n<p><strong>ValidatorFactory.java</strong></p>\n<pre><code>\n\n/**\n * Implementation of validation factory\n *\n * Created by Saransh Bansal on 15/05/2020\n */\n@Component\npublic class ValidatorFactory {\n\n    @Autowired\n    List&lt;Validator&gt; validators;\n\n    /**\n     * Returns specific validator based on object's class.\n     *\n     * @param object target object\n     * @return instance of {@link Validator}\n     */\n    public Validator getValidatorForObject(Object object) {\n        return validators.stream()\n                .filter(v -&gt; {\n                    System.out.println(&quot;.....&quot; + v.getClass());\n                    // return v.getClass().isAssignableFrom(object.getClass()); - ???\n                })\n                .findFirst()\n                .orElseThrow(() -&gt; new GenericRuntimeException(ERROR_TYPE_VALIDATOR_NOT_FOUND.getText(\n                        object == null ? &quot;null&quot; : object.getClass())));\n    }\n}\n</code></pre>\n<p><strong>Custom validators - DocumentValidator.java</strong></p>\n<pre><code>\n/**\n * Document upload Request validator\n *\n */\n@Component\npublic class DocumentValidator implements Validator&lt;DocumentDto, Serializable&gt; {\n    private static final long DEFAULT_MAX_FILE_SIZE = 5 * 1024L * 1024;\n\n    @Value(&quot;${aap.apricot.document.allowedContentTypes:}#{T(java.util.Collections).emptyList()}&quot;)\n    private List&lt;String&gt; allowedContentTypes;\n\n    @Value(&quot;${aap.apricot.document.allowedFileNames:}#{T(java.util.Collections).emptyList()}&quot;)\n    private List&lt;String&gt; allowedFileNames;\n\n    @Value(&quot;${aap.apricot.document.max.size:&quot; + DEFAULT_MAX_FILE_SIZE + &quot;}&quot;)\n    private long maxFileSize;\n\n    @Override\n    public Map&lt;String, Serializable&gt; validate(DocumentDto documentData) {\n        notNull(documentData, ERROR_MSG_DOCUMENT_MISSED.getText());\n\n        Map&lt;String, Serializable&gt; errors = new HashMap&lt;&gt;();\n\n        if (isNull(documentData.getFile())) {\n            errors.put(FIELD_DOCUMENT_FILE.getText(), ERROR_MSG_DOCUMENT_FILE_MISSED.getText());\n        } else {\n            String contentType = documentData.getFile().getContentType();\n            String fileName = documentData.getFile().getOriginalFilename();\n\n            if (isNull(documentData.getBusinessDate())) {\n                errors.put(FIELD_DOCUMENT_FILE.getText(), buildMessage(ERROR_MSG_DOCUMENT_BUSINESS_DATE_MISSED.getText()));\n            }\n            if (documentData.getFile().getSize() &gt; maxFileSize) {\n                errors.put(FIELD_DOCUMENT_FILE.getText(), buildMessage(ERROR_MSG_DOCUMENT_FILE_SIZE_EXCEEDED.getText(), maxFileSize));\n            }\n            if (!isEmpty(allowedContentTypes) &amp;&amp; contentType != null &amp;&amp;\n                    allowedContentTypes.stream().noneMatch(contentType::equalsIgnoreCase)) {\n                errors.put(FIELD_DOCUMENT_FILE.getText(), buildMessage(ERROR_MSG_DOCUMENT_RESTRICTED_CONTENT_TYPE.getText(), contentType));\n            }\n            if (!isEmpty(allowedFileNames) &amp;&amp; fileName != null &amp;&amp;\n                        allowedFileNames.stream().noneMatch(fileName::startsWith)) {\n                errors.put(FIELD_DOCUMENT_FILE.getText(), buildMessage(ERROR_MSG_DOCUMENT_RESTRICTED_FILE_NAME.getText(), fileName));\n            }\n        }\n        return errors;\n    }\n}\n</code></pre>\n<p>I cannot seem to figure out how to correctly return a validator from my Factory class. (See the code commented with <code>???</code> in ValidatorFactory.java)</p>\n<p>Can anyone help with the same.</p>\n"},{"tags":["java","intellij-idea","gradle","build.gradle"],"comments":[{"owner":{"account_id":1245628,"reputation":150,"user_id":1207155,"accept_rate":100,"display_name":"RobbingDaHood"},"score":0,"creation_date":1643049474,"post_id":35478176,"comment_id":125231874,"body_markdown":"Here is an answer using maven: https://stackoverflow.com/questions/5162009/building-artifacts-for-multiple-java-architectures-using-maven-anything-better","body":"Here is an answer using maven: <a href=\"https://stackoverflow.com/questions/5162009/building-artifacts-for-multiple-java-architectures-using-maven-anything-better\" title=\"building artifacts for multiple java architectures using maven anything better\">stackoverflow.com/questions/5162009/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":4164052,"reputation":1648,"user_id":3424487,"accept_rate":77,"display_name":"Michael Hobbs"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1455816775,"creation_date":1455816775,"answer_id":35488482,"question_id":35478176,"body_markdown":"The answer is yes but you will have to use the new Gradle software model which is very much incubating. It will be a road full of pain as you will be a trail blazer as I have learned using it for a C/Cpp project. Here is generally how your build will look like.\r\n\r\n    plugins {\r\n        id &#39;jvm-component&#39;\r\n        id &#39;java-lang&#39;\r\n    }\r\n\r\n    model {\r\n      buildTypes {\r\n        debug\r\n        release\r\n      }\r\n      flavors {\r\n        free\r\n        paid\r\n      }\r\n        components {\r\n            server(JvmLibrarySpec) {\r\n                sources {\r\n                    java {\r\n                      if (flavor == flavors.paid) {\r\n                        // do something to your sources\r\n                      }\r\n                      if (builtType == buildTypes.debug) {\r\n                        // do something for debuging\r\n                      }\r\n                        dependencies {\r\n                            library &#39;core&#39;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            core(JvmLibrarySpec) {\r\n                dependencies {\r\n                    library &#39;commons&#39;\r\n                }\r\n            }\r\n\r\n            commons(JvmLibrarySpec) {\r\n                api {\r\n                    dependencies {\r\n                        library &#39;collections&#39;\r\n                    }\r\n                }\r\n            }\r\n\r\n            collections(JvmLibrarySpec)\r\n        }\r\n    }\r\n\r\nReference: https://docs.gradle.org/current/userguide/java_software.html","title":"Build variants (product flavours) in IntelliJ Java application","body":"<p>The answer is yes but you will have to use the new Gradle software model which is very much incubating. It will be a road full of pain as you will be a trail blazer as I have learned using it for a C/Cpp project. Here is generally how your build will look like.</p>\n\n<pre><code>plugins {\n    id 'jvm-component'\n    id 'java-lang'\n}\n\nmodel {\n  buildTypes {\n    debug\n    release\n  }\n  flavors {\n    free\n    paid\n  }\n    components {\n        server(JvmLibrarySpec) {\n            sources {\n                java {\n                  if (flavor == flavors.paid) {\n                    // do something to your sources\n                  }\n                  if (builtType == buildTypes.debug) {\n                    // do something for debuging\n                  }\n                    dependencies {\n                        library 'core'\n                    }\n                }\n            }\n        }\n\n        core(JvmLibrarySpec) {\n            dependencies {\n                library 'commons'\n            }\n        }\n\n        commons(JvmLibrarySpec) {\n            api {\n                dependencies {\n                    library 'collections'\n                }\n            }\n        }\n\n        collections(JvmLibrarySpec)\n    }\n}\n</code></pre>\n\n<p>Reference: <a href=\"https://docs.gradle.org/current/userguide/java_software.html\" rel=\"nofollow\">https://docs.gradle.org/current/userguide/java_software.html</a></p>\n"},{"tags":[],"owner":{"account_id":1482563,"reputation":421,"user_id":1391572,"display_name":"tobiasH"},"comment_count":0,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1455868604,"creation_date":1455868604,"answer_id":35500170,"question_id":35478176,"body_markdown":"We use Gradle multi-module projects for our variant system. There is a core project that contains the common code. Customizations are simply done in subprojects.\n\n    subprojects {\n       dependencies {\n         compile project(&#39;:core&#39;)\n       }\n    }\n\nThe variant subprojects depend on the core and each build individual .war files. Note that in this case we don&#39;t override classes from the core project. For code customizations we use Spring and in some cases SPI, but I guess any dependency injection framework can accomplish that. It just forces you to provide explicit extension points in the core which I think is a good thing.","title":"Build variants (product flavours) in IntelliJ Java application","body":"<p>We use Gradle multi-module projects for our variant system. There is a core project that contains the common code. Customizations are simply done in subprojects.</p>\n\n<pre><code>subprojects {\n   dependencies {\n     compile project(':core')\n   }\n}\n</code></pre>\n\n<p>The variant subprojects depend on the core and each build individual .war files. Note that in this case we don't override classes from the core project. For code customizations we use Spring and in some cases SPI, but I guess any dependency injection framework can accomplish that. It just forces you to provide explicit extension points in the core which I think is a good thing.</p>\n"},{"tags":[],"owner":{"account_id":13880682,"reputation":19,"user_id":10021124,"display_name":"yora"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685336994,"creation_date":1685336994,"answer_id":76354806,"question_id":35478176,"body_markdown":"Maven allows you to create profiles for different configurations of your project. For example, you can specify different Java versions, dependencies, plugins, etc. for each profile. Profiles can be activated by various criteria, such as environment variables, JDK versions, or command line parameters. You can also use different pom.xml files for the same project, but this is not recommended as it can cause confusion and inconsistency. Profiles are a more flexible and maintainable way to manage your project settings. You can learn more about profiles here: https://maven.apache.org/guides/introduction/introduction-to-profiles.html","title":"Build variants (product flavours) in IntelliJ Java application","body":"<p>Maven allows you to create profiles for different configurations of your project. For example, you can specify different Java versions, dependencies, plugins, etc. for each profile. Profiles can be activated by various criteria, such as environment variables, JDK versions, or command line parameters. You can also use different pom.xml files for the same project, but this is not recommended as it can cause confusion and inconsistency. Profiles are a more flexible and maintainable way to manage your project settings. You can learn more about profiles here: <a href=\"https://maven.apache.org/guides/introduction/introduction-to-profiles.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/guides/introduction/introduction-to-profiles.html</a></p>\n"},{"tags":[],"owner":{"account_id":9510973,"reputation":1,"user_id":7068927,"display_name":"oem"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692000248,"creation_date":1692000248,"answer_id":76897254,"question_id":35478176,"body_markdown":"I am using maven profiles. It is very flexible and convenient. With a profiles you can define especial properties, dependencies,  modules, builds for each profile. Profiles could be activated by environment variables or command line parameters. You could combine your profiles. IntelliJ maven view gives you a convenient way to activate profiles. See below the pom.xml example with profiles.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n     &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n      &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n      &lt;artifactId&gt;test&lt;/artifactId&gt;\r\n      &lt;packaging&gt;pom&lt;/packaging&gt;\r\n      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n      &lt;profiles&gt;\r\n          &lt;profile&gt;\r\n              &lt;id&gt;blue&lt;/id&gt;\r\n              &lt;modules&gt;\r\n                  &lt;module&gt;module-1&lt;/module&gt;\r\n              &lt;/modules&gt;\r\n              &lt;dependencies&gt;\r\n                  &lt;dependency&gt;\r\n                      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                      &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n                      &lt;version&gt;2.11.1&lt;/version&gt;\r\n                  &lt;/dependency&gt;\r\n              &lt;/dependencies&gt;\r\n          &lt;/profile&gt;\r\n          &lt;profile&gt;\r\n              &lt;id&gt;red&lt;/id&gt;\r\n              &lt;modules&gt;\r\n                  &lt;module&gt;module-2&lt;/module&gt;\r\n              &lt;/modules&gt;\r\n              &lt;dependencies&gt;\r\n                  &lt;dependency&gt;\r\n                      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                      &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n                      &lt;version&gt;2.15.0&lt;/version&gt;\r\n                  &lt;/dependency&gt;\r\n              &lt;/dependencies&gt;\r\n          &lt;/profile&gt;\r\n      &lt;/profiles&gt;\r\n\r\n      &lt;modules&gt;\r\n          &lt;module&gt;main&lt;/module&gt;\r\n      &lt;/modules&gt;\r\n\r\n      &lt;properties&gt;\r\n          &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n      &lt;/properties&gt; &lt;/project&gt;","title":"Build variants (product flavours) in IntelliJ Java application","body":"<p>I am using maven profiles. It is very flexible and convenient. With a profiles you can define especial properties, dependencies,  modules, builds for each profile. Profiles could be activated by environment variables or command line parameters. You could combine your profiles. IntelliJ maven view gives you a convenient way to activate profiles. See below the pom.xml example with profiles.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n     xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n     xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;org.example&lt;/groupId&gt;\n  &lt;artifactId&gt;test&lt;/artifactId&gt;\n  &lt;packaging&gt;pom&lt;/packaging&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n  &lt;profiles&gt;\n      &lt;profile&gt;\n          &lt;id&gt;blue&lt;/id&gt;\n          &lt;modules&gt;\n              &lt;module&gt;module-1&lt;/module&gt;\n          &lt;/modules&gt;\n          &lt;dependencies&gt;\n              &lt;dependency&gt;\n                  &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n                  &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n                  &lt;version&gt;2.11.1&lt;/version&gt;\n              &lt;/dependency&gt;\n          &lt;/dependencies&gt;\n      &lt;/profile&gt;\n      &lt;profile&gt;\n          &lt;id&gt;red&lt;/id&gt;\n          &lt;modules&gt;\n              &lt;module&gt;module-2&lt;/module&gt;\n          &lt;/modules&gt;\n          &lt;dependencies&gt;\n              &lt;dependency&gt;\n                  &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n                  &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n                  &lt;version&gt;2.15.0&lt;/version&gt;\n              &lt;/dependency&gt;\n          &lt;/dependencies&gt;\n      &lt;/profile&gt;\n  &lt;/profiles&gt;\n\n  &lt;modules&gt;\n      &lt;module&gt;main&lt;/module&gt;\n  &lt;/modules&gt;\n\n  &lt;properties&gt;\n      &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n  &lt;/properties&gt; &lt;/project&gt;\n</code></pre>\n"}],"owner":{"account_id":4838190,"reputation":331,"user_id":3904083,"display_name":"user3904083"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3183,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"answer_count":4,"score":22,"last_activity_date":1692000248,"creation_date":1455789427,"question_id":35478176,"body_markdown":"Is it possible to have build variants based on different source sets for a traditional Java app (NOT an Android project) in IntelliJ?\r\n\r\nI&#39;d like to use a feature like productFlavors that comes with the Android gradle plugin, but for a traditional Java application.\r\n\r\nExample:\r\n\r\n    library_red -- HelloImpl.java\r\n    library_blue -- HelloImpl.java\r\n    library_common -- Hello.java\r\n    \r\n    compiled library_blue -- Hello.class, HelloImpl.class\r\n    compiled library_red -- Hello.class, HelloImpl.class\r\n","title":"Build variants (product flavours) in IntelliJ Java application","body":"<p>Is it possible to have build variants based on different source sets for a traditional Java app (NOT an Android project) in IntelliJ?</p>\n<p>I'd like to use a feature like productFlavors that comes with the Android gradle plugin, but for a traditional Java application.</p>\n<p>Example:</p>\n<pre><code>library_red -- HelloImpl.java\nlibrary_blue -- HelloImpl.java\nlibrary_common -- Hello.java\n\ncompiled library_blue -- Hello.class, HelloImpl.class\ncompiled library_red -- Hello.class, HelloImpl.class\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":4308682,"reputation":12633,"user_id":3520404,"display_name":"saran3h"},"score":0,"creation_date":1623834827,"post_id":67999471,"comment_id":120188521,"body_markdown":"The root package is already configured in `@ComponentScan` yet it doesn&#39;t work due to optional dependency. I&#39;ll try the @Bean approach but it may not be useful as i need to deal with many such optional dependencies.","body":"The root package is already configured in <code>@ComponentScan</code> yet it doesn&#39;t work due to optional dependency. I&#39;ll try the @Bean approach but it may not be useful as i need to deal with many such optional dependencies."},{"owner":{"account_id":7021940,"reputation":2155,"user_id":5380897,"accept_rate":62,"display_name":"Uladzislau Kaminski"},"score":0,"creation_date":1623843719,"post_id":67999471,"comment_id":120192305,"body_markdown":"@saran3h if a bean definition is in the area of `@componentscan` it should instantiate a bean even for optional dependencies.","body":"@saran3h if a bean definition is in the area of <code>@componentscan</code> it should instantiate a bean even for optional dependencies."}],"tags":[],"owner":{"account_id":7021940,"reputation":2155,"user_id":5380897,"accept_rate":62,"display_name":"Uladzislau Kaminski"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1623833930,"creation_date":1623833930,"answer_id":67999471,"question_id":67999217,"body_markdown":"The `AddressHistoryRepository` should be in the Spring Context. To do it provide the bean definition in the configuration that will be scanned by `@ComponentScan`. If you know that Spring has this definition you can add `@ComponentScan` with the package where this definition is. The other way is to create your own definition with `@Bean` annotation.   ","title":"Spring boot autowire external dependency with further optional dependencies","body":"<p>The <code>AddressHistoryRepository</code> should be in the Spring Context. To do it provide the bean definition in the configuration that will be scanned by <code>@ComponentScan</code>. If you know that Spring has this definition you can add <code>@ComponentScan</code> with the package where this definition is. The other way is to create your own definition with <code>@Bean</code> annotation.</p>\n"}],"owner":{"account_id":4308682,"reputation":12633,"user_id":3520404,"display_name":"saran3h"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692000126,"creation_date":1623832958,"question_id":67999217,"body_markdown":"I&#39;m trying to autowire an external service which has further optional dependencies.\r\n```\r\n\t@Autowired\r\n\tprivate CustomerService customerService; // external dependency\r\n\r\n\t@GetMapping(value = &quot;/test-cdl2&quot;)\r\n\tpublic ResponseEntity&lt;List&lt;CustomerLightweightDto&gt;&gt; testCdl2()  {\r\n\t\treturn ResponseEntity.ok(customerService.searchForCustomerAddressByCin(&quot;1931454603&quot;));\r\n\t}\r\n```\r\n\r\nHere `CustomerService` is an external service. Inside `CustomerService.searchForCustomerAddressByCin` method:\r\n```\t\r\n\t@Autowired(required = false)\r\n\tprivate AddressHistoryRepository addressRepository; // optional\r\n\r\n\t@Transactional(readOnly = true)\r\n\tpublic List&lt;AddressHistoryDto&gt; retrieveAddressHistory(String cin) {\r\n\t\tnotNull(cin, ERROR_CIN_MISSED.getText());\r\n\t\tlog.debug(&quot;Retrieve list of address history by cin [{}]...&quot;, cin);\r\n\t\treturn addressRepository.findByPartyIdOrderByEndDateDesc(findPartyIdByCin(cin));\r\n\t}\r\n```\r\n\r\nWe have `addressRepository` which is defined as an optional dependency.\r\n\r\nNow when I try to run `testCdl2`, it throws NPEs. How can i tell Spring to create a bean for nested dependencies?\r\n\r\nEDIT:\r\nAlready configured the root package of external dependency in `ApplicationConfig`:\r\n```\r\n@Configuration\r\n@ComponentScan({&quot;com.my.fsap.aap.customer.data&quot;, &quot;com.my.fsap.aap.ldap.security&quot;})\r\n@EnableCaching\r\n@EnableRetry\r\npublic class ApplicationConfig {\r\n```\r\n\r\nHere `com.my.fsap.aap.customer.data` is the root where the optional dependency is present.","title":"Spring boot autowire external dependency with further optional dependencies","body":"<p>I'm trying to autowire an external service which has further optional dependencies.</p>\n<pre><code>    @Autowired\n    private CustomerService customerService; // external dependency\n\n    @GetMapping(value = &quot;/test-cdl2&quot;)\n    public ResponseEntity&lt;List&lt;CustomerLightweightDto&gt;&gt; testCdl2()  {\n        return ResponseEntity.ok(customerService.searchForCustomerAddressByCin(&quot;1931454603&quot;));\n    }\n</code></pre>\n<p>Here <code>CustomerService</code> is an external service. Inside <code>CustomerService.searchForCustomerAddressByCin</code> method:</p>\n<pre><code>    @Autowired(required = false)\n    private AddressHistoryRepository addressRepository; // optional\n\n    @Transactional(readOnly = true)\n    public List&lt;AddressHistoryDto&gt; retrieveAddressHistory(String cin) {\n        notNull(cin, ERROR_CIN_MISSED.getText());\n        log.debug(&quot;Retrieve list of address history by cin [{}]...&quot;, cin);\n        return addressRepository.findByPartyIdOrderByEndDateDesc(findPartyIdByCin(cin));\n    }\n</code></pre>\n<p>We have <code>addressRepository</code> which is defined as an optional dependency.</p>\n<p>Now when I try to run <code>testCdl2</code>, it throws NPEs. How can i tell Spring to create a bean for nested dependencies?</p>\n<p>EDIT:\nAlready configured the root package of external dependency in <code>ApplicationConfig</code>:</p>\n<pre><code>@Configuration\n@ComponentScan({&quot;com.my.fsap.aap.customer.data&quot;, &quot;com.my.fsap.aap.ldap.security&quot;})\n@EnableCaching\n@EnableRetry\npublic class ApplicationConfig {\n</code></pre>\n<p>Here <code>com.my.fsap.aap.customer.data</code> is the root where the optional dependency is present.</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":262968,"reputation":767160,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"score":1,"creation_date":1623908724,"post_id":68013544,"comment_id":120212054,"body_markdown":"What is your regex platform?","body":"What is your regex platform?"},{"owner":{"account_id":4308682,"reputation":12633,"user_id":3520404,"display_name":"saran3h"},"score":1,"creation_date":1623910535,"post_id":68013544,"comment_id":120212554,"body_markdown":"@anubhava It&#39;s Java","body":"@anubhava It&#39;s Java"}],"answers":[{"tags":[],"owner":{"account_id":7750510,"reputation":131491,"user_id":5866580,"accept_rate":25,"display_name":"RavinderSingh13"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1623908774,"creation_date":1623908774,"answer_id":68013593,"question_id":68013544,"body_markdown":"With your shown samples, please try following regex.\r\n\r\n    ^Filter:(?:\\w+=[^;]*;)*$\r\n\r\n[online demo for above regex][1]\r\n\r\n\r\n  [1]: https://regex101.com/r/q8AcU3/1\r\n\r\n\r\n\r\n***Explanation:*** Adding detailed explanation for above regex.\r\n\r\n\r\n    ^Filter:       ##Matching Filter: from starting of value.\r\n    (?:            ##Starting a non-capturing group from here.\r\n      \\w+=[^;]*;   ##Matching \\w(1 or more occurrences) followed by = till a semi colon comes, including ; in match.\r\n    )*$            ##Matching 0 or more occurrences of regex mentioned above till end of value.\r\n\r\n\r\n***NOTE:*** Change above regex to `^Filter:(?:\\w+=[^;]*;)+$` in case you want to match at least 1 match of value-key pair, only change here is from `*` to `+` in regex.","title":"Create a regex with target text having varying key-value pairs?","body":"<p>With your shown samples, please try following regex.</p>\n<pre><code>^Filter:(?:\\w+=[^;]*;)*$\n</code></pre>\n<p><a href=\"https://regex101.com/r/q8AcU3/1\" rel=\"nofollow noreferrer\">online demo for above regex</a></p>\n<p><em><strong>Explanation:</strong></em> Adding detailed explanation for above regex.</p>\n<pre><code>^Filter:       ##Matching Filter: from starting of value.\n(?:            ##Starting a non-capturing group from here.\n  \\w+=[^;]*;   ##Matching \\w(1 or more occurrences) followed by = till a semi colon comes, including ; in match.\n)*$            ##Matching 0 or more occurrences of regex mentioned above till end of value.\n</code></pre>\n<p><em><strong>NOTE:</strong></em> Change above regex to <code>^Filter:(?:\\w+=[^;]*;)+$</code> in case you want to match at least 1 match of value-key pair, only change here is from <code>*</code> to <code>+</code> in regex.</p>\n"}],"owner":{"account_id":4308682,"reputation":12633,"user_id":3520404,"display_name":"saran3h"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":211,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":68013593,"answer_count":1,"score":1,"last_activity_date":1692000084,"creation_date":1623908476,"question_id":68013544,"body_markdown":"I&#39;m writing some regex to do some config file validation automation which I intend to include in to a CICD pipeline, but I&#39;m facing some issues getting the regex to work properly on certain strings.\r\n\r\nI have strings like the following:\r\n\r\n```\r\nFilter:Class=ABC_Root_Base;\r\nFilter:Class=Logfile_Base;\r\nFilter:Class=Logfile_Sendmail;\r\nFilter:Class=Daemon_Notice;\r\nFilter:Class=Logfile_Syslogd;msg=re:&#39;syslogd: restart&#39;;\r\nFilter:Class=Logfile_Cron;msg=re:&#39;CMD&#39;;\r\nFilter:Class=Logfile_Cron;msg=re:&#39;STARTUP&#39;;\r\nFilter:Class=AppLog;sub_source=MTResourceMonitor;msg=re:&#39;support&#39;;\r\n```\r\n\r\nRules are:\r\n1) Filter lines must start with &quot;Filter:&quot;\r\n2) Filter lines must end with a semi-colon\r\n3) Each key-value pair within a filter line, must terminate with a semi-colon (and multiple key-value pairs are allowed within a single filter line)\r\n\r\nI need to validate them using some regex, but I&#39;m having some challenge getting it to match strings properly when they have multiple key-value pairs in them. It works fine with just a single key-value pair though.\r\n\r\nFor example, the following string would match fine:\r\n```\r\nFilter:Class=Logfile_Base;\r\n```\r\n\r\nHowever, the following doesn&#39;t correctly match:\r\n```\r\nFilter:ClassAppLog;sub_sourceMTRMonmsg=re:&#39;su;dnsdjs;\r\n```\r\n\r\nThe start and end of that string above is fine, but there are no semi-colon separators between key-value pairs and so it&#39;s actually invalid. It breaks rule number 3.\r\n\r\nHere is the regex I created thus far, which works sometimes as above:\r\n```\r\n^Filter:.*=.*;$\r\n```\r\n","title":"Create a regex with target text having varying key-value pairs?","body":"<p>I'm writing some regex to do some config file validation automation which I intend to include in to a CICD pipeline, but I'm facing some issues getting the regex to work properly on certain strings.</p>\n<p>I have strings like the following:</p>\n<pre><code>Filter:Class=ABC_Root_Base;\nFilter:Class=Logfile_Base;\nFilter:Class=Logfile_Sendmail;\nFilter:Class=Daemon_Notice;\nFilter:Class=Logfile_Syslogd;msg=re:'syslogd: restart';\nFilter:Class=Logfile_Cron;msg=re:'CMD';\nFilter:Class=Logfile_Cron;msg=re:'STARTUP';\nFilter:Class=AppLog;sub_source=MTResourceMonitor;msg=re:'support';\n</code></pre>\n<p>Rules are:</p>\n<ol>\n<li>Filter lines must start with &quot;Filter:&quot;</li>\n<li>Filter lines must end with a semi-colon</li>\n<li>Each key-value pair within a filter line, must terminate with a semi-colon (and multiple key-value pairs are allowed within a single filter line)</li>\n</ol>\n<p>I need to validate them using some regex, but I'm having some challenge getting it to match strings properly when they have multiple key-value pairs in them. It works fine with just a single key-value pair though.</p>\n<p>For example, the following string would match fine:</p>\n<pre><code>Filter:Class=Logfile_Base;\n</code></pre>\n<p>However, the following doesn't correctly match:</p>\n<pre><code>Filter:ClassAppLog;sub_sourceMTRMonmsg=re:'su;dnsdjs;\n</code></pre>\n<p>The start and end of that string above is fine, but there are no semi-colon separators between key-value pairs and so it's actually invalid. It breaks rule number 3.</p>\n<p>Here is the regex I created thus far, which works sometimes as above:</p>\n<pre><code>^Filter:.*=.*;$\n</code></pre>\n"},{"tags":["java","hibernate","jpa","spring-data-jpa","jpql"],"comments":[{"owner":{"account_id":7310906,"reputation":438,"user_id":5570150,"display_name":"Benjamin Bau"},"score":1,"creation_date":1448458332,"post_id":33917442,"comment_id":55596675,"body_markdown":"This may be too heavy-weight for what you are trying to do, but you can also check out the hibernate search project (http://hibernate.org/search/documentation/getting-started/). Hibernate Search indexes fields that you want to do text search on. Then a query takes the form:  qb.keyword().onFields(&lt;list of fields&gt;).matching(&lt;search term&gt;).createQuery();","body":"This may be too heavy-weight for what you are trying to do, but you can also check out the hibernate search project (<a href=\"http://hibernate.org/search/documentation/getting-started/\" rel=\"nofollow noreferrer\">hibernate.org/search/documentation/getting-started</a>). Hibernate Search indexes fields that you want to do text search on. Then a query takes the form:  qb.keyword().onFields(&lt;list of fields&gt;).matching(&lt;search term&gt;).createQuery();"},{"owner":{"account_id":160350,"reputation":11421,"user_id":380338,"display_name":"Neil Stockton"},"score":2,"creation_date":1448460292,"post_id":33917442,"comment_id":55598108,"body_markdown":"clearly that JPQL you quote is not valid JPQL either. There is no || operator, use CONCAT.","body":"clearly that JPQL you quote is not valid JPQL either. There is no || operator, use CONCAT."}],"answers":[{"tags":[],"owner":{"account_id":2774008,"reputation":18025,"user_id":2387977,"accept_rate":69,"display_name":"Dherik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1448458141,"creation_date":1448458141,"answer_id":33917747,"question_id":33917442,"body_markdown":"Well, for the most cases, **option 1** is not a really an alternative. If your application grow up of registers the memory and performance problems will hit you after some time. I guarantee you.\r\n\r\nI cannot see a problem in the **option 2**. Is not performant but it&#39;s simple to understand.\r\n\r\nIf performance on database is a problem, you can create a native query to call the native function of your database to do a full text search. Will not be a JPQL query, but for this kind of query you are trying to do this solution can be used.","title":"How to implement simple full text search in JPA (Spring Data JPA)?","body":"<p>Well, for the most cases, <strong>option 1</strong> is not a really an alternative. If your application grow up of registers the memory and performance problems will hit you after some time. I guarantee you.</p>\n\n<p>I cannot see a problem in the <strong>option 2</strong>. Is not performant but it's simple to understand.</p>\n\n<p>If performance on database is a problem, you can create a native query to call the native function of your database to do a full text search. Will not be a JPQL query, but for this kind of query you are trying to do this solution can be used.</p>\n"},{"tags":[],"owner":{"account_id":255080,"reputation":15519,"user_id":534877,"accept_rate":65,"display_name":"Robert Niestroj"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1692000008,"creation_date":1469189100,"answer_id":38526001,"question_id":33917442,"body_markdown":"Solved this by saving the search string on every persist and update to the DB.\r\nFirst created a column for the searchString:\r\n\r\n       @Column(name = &quot;SEARCH_STRING&quot;, length = 1000)\r\n       private String searchString;\r\n\r\nStorage is cheap, overhead on DB is not that big.\r\n\r\nThen the saving on update and persist:\r\n\r\n       @PreUpdate\r\n       @PrePersist\r\n       void updateSearchString() {\r\n          final String fullSearchString = String.join(&quot; &quot;, List.of(\r\n                  login,\r\n                  firstName,\r\n                  lastName,\r\n                  email,\r\n                  Boolean.TRUE.equals(active) ? &quot;tak&quot; : &quot;nie&quot;,\r\n                  profile.getDescription()));\r\n          this.searchString = StringUtils.substring(fullSearchString, 0, 999);\r\n       }\r\n\r\nThen i can have a normal JPQL query with `LIKE`: \r\n\r\n    SELECT u FROM User u WHERE u.searchString LIKE &#39;%&#39; || :text || &#39;%&#39;\r\n\r\nOr using [Query By Example][1]:\r\n\r\n      ExampleMatcher matcher = ExampleMatcher.matching().\r\n              withMatcher(&quot;searchString&quot;, ExampleMatcher.GenericPropertyMatcher.of(ExampleMatcher.StringMatcher.CONTAINING).ignoreCase());\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-data/jpa/docs/current/reference/html/#query-by-example","title":"How to implement simple full text search in JPA (Spring Data JPA)?","body":"<p>Solved this by saving the search string on every persist and update to the DB.\nFirst created a column for the searchString:</p>\n<pre><code>   @Column(name = &quot;SEARCH_STRING&quot;, length = 1000)\n   private String searchString;\n</code></pre>\n<p>Storage is cheap, overhead on DB is not that big.</p>\n<p>Then the saving on update and persist:</p>\n<pre><code>   @PreUpdate\n   @PrePersist\n   void updateSearchString() {\n      final String fullSearchString = String.join(&quot; &quot;, List.of(\n              login,\n              firstName,\n              lastName,\n              email,\n              Boolean.TRUE.equals(active) ? &quot;tak&quot; : &quot;nie&quot;,\n              profile.getDescription()));\n      this.searchString = StringUtils.substring(fullSearchString, 0, 999);\n   }\n</code></pre>\n<p>Then i can have a normal JPQL query with <code>LIKE</code>:</p>\n<pre><code>SELECT u FROM User u WHERE u.searchString LIKE '%' || :text || '%'\n</code></pre>\n<p>Or using <a href=\"http://docs.spring.io/spring-data/jpa/docs/current/reference/html/#query-by-example\" rel=\"nofollow noreferrer\">Query By Example</a>:</p>\n<pre><code>  ExampleMatcher matcher = ExampleMatcher.matching().\n          withMatcher(&quot;searchString&quot;, ExampleMatcher.GenericPropertyMatcher.of(ExampleMatcher.StringMatcher.CONTAINING).ignoreCase());\n</code></pre>\n"}],"owner":{"account_id":255080,"reputation":15519,"user_id":534877,"accept_rate":65,"display_name":"Robert Niestroj"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15661,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":38526001,"answer_count":2,"score":11,"last_activity_date":1692000008,"creation_date":1448457194,"question_id":33917442,"body_markdown":"i&#39;m using JPA 2.1 (Hibernate 4 as impl) and Spring Data JPA 1.9.0. How do i implement full text search? \r\n\r\nMy scenario is as follows. I have a `User` entity and on the UI a have a table which display&#39;s most of users properties and i want the user to give text box enter there a search term and search in all properties. \r\n\r\nI see 2 options to do this:\r\n\r\n 1. Load all users users from DB and filter them in Java \r\n 2. Write a JPQL query with many `ORs` and `LIKE % :searchString %`\r\n\r\n**Option 1** is not good for performance but quite nice to write.\r\n\r\n**Option 2** is performant beacuse executed on DB side but cumbersome to write. \r\n\r\nRight now im suing option 1 because i need to translate boolean to `&quot;yes&quot;/&quot;no&quot;` and also have a profile enum where i want to search by it&#39;s field description and not by actual enum value. \r\n\r\nIn the User entity i have a method which returns all fields i want to be searched seperated by spaces:\r\n\r\n       public String getSearchString(){\r\n          return StringUtils.join(\r\n                  Arrays.asList(\r\n                          login, \r\n                          firstName, \r\n                          lastName, \r\n                          email, \r\n                          active ? &quot;yes&quot; : &quot;no&quot;, \r\n                          profile.getDescription())\r\n                  , &quot; &quot;);\r\n       }\r\n\r\nThe in a service i load all users from DB and filter by this search string:\r\n\r\n       @Override\r\n       public List&lt;User&gt; getUsers(final String searchText) {\r\n          final List&lt;User&gt; users = getUsers();\r\n          if(StringUtils.isBlank(searchText)){\r\n             return users;\r\n          }\r\n          CollectionUtils.filter(users, new Predicate&lt;User&gt;() {\r\n             @Override\r\n             public boolean evaluate(User object) {\r\n                return StringUtils.containsIgnoreCase(object.getSearchString(), searchText);\r\n             }\r\n          });\r\n          return users;\r\n       }\r\n\r\n On the other side in JPQL i end up with queries like this, which i dont think is the nice&#39;est and easiest way to implement this functionality. Also there is a problem with translatin boolean to &quot;yes&quot; and &quot;no&quot;.\r\n\r\n    @Query(&quot;SELECT r FROM User r WHERE &quot;\r\n            + &quot;r.firstname LIKE &#39;%&#39; || :searchString || &#39;%&#39; &quot;\r\n            + &quot;OR r.lastname LIKE &#39;%&#39; || :searchString || &#39;%&#39; &quot;\r\n            + &quot;OR r.login LIKE &#39;%&#39; || :searchString || &#39;%&#39; &quot;\r\n            + &quot;OR r.profile.description LIKE &#39;%&#39; || :searchString || &#39;%&#39; &quot;\r\n            + &quot;OR r.active LIKE &#39;%&#39; || :searchString || &#39;%&#39; &quot;\r\n            + &quot;OR r.email LIKE &#39;%&#39; || :searchString || &#39;%&#39;&quot;)\r\n    List&lt;User&gt; selectUsers(@Param(&quot;searchString&quot;)String searchString, Pageable page);\r\n\r\n\r\n**Is there a better solution to this problem?**","title":"How to implement simple full text search in JPA (Spring Data JPA)?","body":"<p>i'm using JPA 2.1 (Hibernate 4 as impl) and Spring Data JPA 1.9.0. How do i implement full text search? </p>\n\n<p>My scenario is as follows. I have a <code>User</code> entity and on the UI a have a table which display's most of users properties and i want the user to give text box enter there a search term and search in all properties. </p>\n\n<p>I see 2 options to do this:</p>\n\n<ol>\n<li>Load all users users from DB and filter them in Java </li>\n<li>Write a JPQL query with many <code>ORs</code> and <code>LIKE % :searchString %</code></li>\n</ol>\n\n<p><strong>Option 1</strong> is not good for performance but quite nice to write.</p>\n\n<p><strong>Option 2</strong> is performant beacuse executed on DB side but cumbersome to write. </p>\n\n<p>Right now im suing option 1 because i need to translate boolean to <code>\"yes\"/\"no\"</code> and also have a profile enum where i want to search by it's field description and not by actual enum value. </p>\n\n<p>In the User entity i have a method which returns all fields i want to be searched seperated by spaces:</p>\n\n<pre><code>   public String getSearchString(){\n      return StringUtils.join(\n              Arrays.asList(\n                      login, \n                      firstName, \n                      lastName, \n                      email, \n                      active ? \"yes\" : \"no\", \n                      profile.getDescription())\n              , \" \");\n   }\n</code></pre>\n\n<p>The in a service i load all users from DB and filter by this search string:</p>\n\n<pre><code>   @Override\n   public List&lt;User&gt; getUsers(final String searchText) {\n      final List&lt;User&gt; users = getUsers();\n      if(StringUtils.isBlank(searchText)){\n         return users;\n      }\n      CollectionUtils.filter(users, new Predicate&lt;User&gt;() {\n         @Override\n         public boolean evaluate(User object) {\n            return StringUtils.containsIgnoreCase(object.getSearchString(), searchText);\n         }\n      });\n      return users;\n   }\n</code></pre>\n\n<p>On the other side in JPQL i end up with queries like this, which i dont think is the nice'est and easiest way to implement this functionality. Also there is a problem with translatin boolean to \"yes\" and \"no\".</p>\n\n<pre><code>@Query(\"SELECT r FROM User r WHERE \"\n        + \"r.firstname LIKE '%' || :searchString || '%' \"\n        + \"OR r.lastname LIKE '%' || :searchString || '%' \"\n        + \"OR r.login LIKE '%' || :searchString || '%' \"\n        + \"OR r.profile.description LIKE '%' || :searchString || '%' \"\n        + \"OR r.active LIKE '%' || :searchString || '%' \"\n        + \"OR r.email LIKE '%' || :searchString || '%'\")\nList&lt;User&gt; selectUsers(@Param(\"searchString\")String searchString, Pageable page);\n</code></pre>\n\n<p><strong>Is there a better solution to this problem?</strong></p>\n"},{"tags":["java","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":14365136,"reputation":890,"user_id":10376405,"display_name":"Paul"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591622198,"creation_date":1591622198,"answer_id":62262967,"question_id":38135017,"body_markdown":"Normally, I&#39;d do the following: \r\n\r\nin your module settings on the Sources-Tab, in the right pane you click on the directory and then on &quot;Excluded&quot;. The directory will then appear in the left pane as an &quot;Excluded Folder&quot;\r\n\r\nI was satisfied by that, but it wasn&#39;t exactly what you wanted to achieve. \r\n\r\nWould it be better to configure a custom scope? Try [this.][1]\r\n\r\n\r\n  [1]: https://intellij-support.jetbrains.com/hc/en-us/community/posts/206336559-exclude-directory-from-search","title":"In IntelliJ, how to exclude \\target\\*.html files in search (everywhere) result?","body":"<p>Normally, I'd do the following: </p>\n\n<p>in your module settings on the Sources-Tab, in the right pane you click on the directory and then on \"Excluded\". The directory will then appear in the left pane as an \"Excluded Folder\"</p>\n\n<p>I was satisfied by that, but it wasn't exactly what you wanted to achieve. </p>\n\n<p>Would it be better to configure a custom scope? Try <a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/206336559-exclude-directory-from-search\" rel=\"nofollow noreferrer\">this.</a></p>\n"},{"tags":[],"owner":{"account_id":59771,"reputation":140,"user_id":178749,"display_name":"Duarte Cunha Le&#227;o"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1606150460,"creation_date":1606150460,"answer_id":64972744,"question_id":38135017,"body_markdown":"In my case, I had the target folder marked as excluded but also, partially, marked as source. This caused the problem for me.","title":"In IntelliJ, how to exclude \\target\\*.html files in search (everywhere) result?","body":"<p>In my case, I had the target folder marked as excluded but also, partially, marked as source. This caused the problem for me.</p>\n"},{"tags":[],"owner":{"account_id":29221029,"reputation":1,"user_id":22386753,"display_name":"WalterP"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691999882,"creation_date":1691999882,"answer_id":76897219,"question_id":38135017,"body_markdown":"With current Intellij versions, excluding the target folder (right click on folder -&gt; Mark directory as -&gt; Excluded) and then searching with selected tab &quot;In Project&quot; definitely does the trick. No more java.html in the search results.","title":"In IntelliJ, how to exclude \\target\\*.html files in search (everywhere) result?","body":"<p>With current Intellij versions, excluding the target folder (right click on folder -&gt; Mark directory as -&gt; Excluded) and then searching with selected tab &quot;In Project&quot; definitely does the trick. No more java.html in the search results.</p>\n"}],"owner":{"account_id":4558291,"reputation":3780,"user_id":3701346,"accept_rate":75,"display_name":"modeller"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":938,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":3,"score":6,"last_activity_date":1691999882,"creation_date":1467330869,"question_id":38135017,"body_markdown":"I have a IntelliJ java project, there are some HTML file templates under my source folder. This project is built and output to \\target\\ folder. The HTML file templates are copied over to the target folder as well.\r\n\r\nI have been trying to exclude the HTML files in target folder from &quot;search everywhere&quot; result. \r\n\r\n**I have already set the \\target folder as &#39;Excluded&#39; in &#39;Project Structure settings&#39;**. \r\n\r\nBut this is not working: although target\\*.java and target\\*.js are excluded in this way, the target\\*.html files are not. I think IntelliJ&#39;s &#39;Excluded&#39; folder only exclude these files it considered as source files, but html is not.\r\n\r\nIs there any workaround for this? I am using IntelliJ Idea 2016.1.3","title":"In IntelliJ, how to exclude \\target\\*.html files in search (everywhere) result?","body":"<p>I have a IntelliJ java project, there are some HTML file templates under my source folder. This project is built and output to \\target\\ folder. The HTML file templates are copied over to the target folder as well.</p>\n\n<p>I have been trying to exclude the HTML files in target folder from \"search everywhere\" result. </p>\n\n<p><strong>I have already set the \\target folder as 'Excluded' in 'Project Structure settings'</strong>. </p>\n\n<p>But this is not working: although target*.java and target*.js are excluded in this way, the target*.html files are not. I think IntelliJ's 'Excluded' folder only exclude these files it considered as source files, but html is not.</p>\n\n<p>Is there any workaround for this? I am using IntelliJ Idea 2016.1.3</p>\n"},{"tags":["java","spring","spring-mvc"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1691999918,"post_id":76897163,"comment_id":135561350,"body_markdown":"The problem isn&#39;t the JDBC driver.  (Changing won&#39;t help.) The problem is that the SSL/TLS version and/or cipher suites provided/required by your server JVM are incompatible with what the MSSQL server provides/requires.  It could simply be that either your JVM or your database server are too out of date.","body":"The problem isn&#39;t the JDBC driver.  (Changing won&#39;t help.) The problem is that the SSL/TLS version and/or cipher suites provided/required by your server JVM are incompatible with what the MSSQL server provides/requires.  It could simply be that either your JVM or your database server are too out of date."},{"owner":{"account_id":27109277,"reputation":11,"user_id":20654661,"display_name":"Rushikesh"},"score":0,"creation_date":1692000024,"post_id":76897163,"comment_id":135561374,"body_markdown":"Yes my mssql sever is i think of version of 2013 so is there any solution to get this code connected to database.","body":"Yes my mssql sever is i think of version of 2013 so is there any solution to get this code connected to database."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1692002590,"post_id":76897163,"comment_id":135561890,"body_markdown":"Have you applied this patch?  https://learn.microsoft.com/en-US/troubleshoot/sql/database-engine/connect/tls-1-2-support-microsoft-sql-server","body":"Have you applied this patch?  <a href=\"https://learn.microsoft.com/en-US/troubleshoot/sql/database-engine/connect/tls-1-2-support-microsoft-sql-server\" rel=\"nofollow noreferrer\">learn.microsoft.com/en-US/troubleshoot/sql/database-engine/&hellip;</a>"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1692003030,"post_id":76897163,"comment_id":135561981,"body_markdown":"It could also be that your server couldn&#39;t find its private key.","body":"It could also be that your server couldn&#39;t find its private key."},{"owner":{"account_id":27109277,"reputation":11,"user_id":20654661,"display_name":"Rushikesh"},"score":0,"creation_date":1692006390,"post_id":76897163,"comment_id":135562594,"body_markdown":"Hi @Stephen C I am using microsoft server version 2016 (SP3) so according to you patch there is no need to update .","body":"Hi @Stephen C I am using microsoft server version 2016 (SP3) so according to you patch there is no need to update ."},{"owner":{"account_id":27109277,"reputation":11,"user_id":20654661,"display_name":"Rushikesh"},"score":0,"creation_date":1692006437,"post_id":76897163,"comment_id":135562607,"body_markdown":"Hello user207421 can you please explain in details i am new in java and sql server","body":"Hello user207421 can you please explain in details i am new in java and sql server"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1692006710,"post_id":76897163,"comment_id":135562663,"body_markdown":"What version of Java are you using on the client side?","body":"What version of Java are you using on the client side?"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1692006834,"post_id":76897163,"comment_id":135562689,"body_markdown":"If you can&#39;t gain any traction on the MSSQL side, you need to diagnose the SSL connection from the Java side; see https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/ReadDebug.html.  That should tell you what the TLS versions and cipher suites are at both ends.  (I don&#39;t thing this is a private key or cert problem.  That shouldn&#39;t result in an &quot;no appropriate protocol&quot; error.)","body":"If you can&#39;t gain any traction on the MSSQL side, you need to diagnose the SSL connection from the Java side; see <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/ReadDebug.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/technotes/guides/security/jsse&zwnj;&#8203;/&hellip;</a>.  That should tell you what the TLS versions and cipher suites are at both ends.  (I don&#39;t thing this is a private key or cert problem.  That shouldn&#39;t result in an &quot;no appropriate protocol&quot; error.)"},{"owner":{"account_id":27109277,"reputation":11,"user_id":20654661,"display_name":"Rushikesh"},"score":0,"creation_date":1692007128,"post_id":76897163,"comment_id":135562741,"body_markdown":"I ma using java version &quot;1.8.0_351&quot; in client side.","body":"I ma using java version &quot;1.8.0_351&quot; in client side."},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1692011960,"post_id":76897163,"comment_id":135563627,"body_markdown":"@StephenC+ &quot;no appropriate protocol&quot; happens in the local stack _before_ the handshake starts, so javax.net.debug won&#39;t give any useful info, nor will looking on the server. This is an incompatibility between the client code+config (i.e. the driver) and the local JVM, so driver version may indeed be relevant, but configuring it (I don&#39;t know enough about mssql-jdbc, or even mssql, to say) or relaxing jdk.tls.disabledAlgorithms in java.security (which we have existing Qs on; I&#39;ve answered some relating to old javax.mail vs recent more-secure JVMs) may be needed.","body":"@StephenC+ &quot;no appropriate protocol&quot; happens in the local stack <i>before</i> the handshake starts, so javax.net.debug won&#39;t give any useful info, nor will looking on the server. This is an incompatibility between the client code+config (i.e. the driver) and the local JVM, so driver version may indeed be relevant, but configuring it (I don&#39;t know enough about mssql-jdbc, or even mssql, to say) or relaxing jdk.tls.disabledAlgorithms in java.security (which we have existing Qs on; I&#39;ve answered some relating to old javax.mail vs recent more-secure JVMs) may be needed."},{"owner":{"account_id":27109277,"reputation":11,"user_id":20654661,"display_name":"Rushikesh"},"score":0,"creation_date":1692606781,"post_id":76897163,"comment_id":135641196,"body_markdown":"Hello Guys error has been solved there is compatibility issue as my database has compatible with TLS version 1 and my code is of 1.8 version which support TLS version 1.2 by default so solution for this i changes my library to 1.7 JAVA SE and reduce tomcat to 8.5 (ealier using tomcat 9 version). Thank you all to help me out.","body":"Hello Guys error has been solved there is compatibility issue as my database has compatible with TLS version 1 and my code is of 1.8 version which support TLS version 1.2 by default so solution for this i changes my library to 1.7 JAVA SE and reduce tomcat to 8.5 (ealier using tomcat 9 version). Thank you all to help me out."}],"owner":{"account_id":27109277,"reputation":11,"user_id":20654661,"display_name":"Rushikesh"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":324,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691999428,"creation_date":1691999267,"question_id":76897163,"body_markdown":"I am using spring mvc concept in java when i am trying to login in my application its gets login successfully but after login its giving me error as below.\r\n\r\n![This is the my connection string i am using in code ][1]  \r\n\r\n```\r\nSEVERE: Servlet.service() for servlet [SpringDispatcher] in context with path [/PasswordReset] threw exception [Request processing failed; nested exception is org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is com.microsoft.sqlserver.jdbc.SQLServerException: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption. Error: &quot;No appropriate protocol (protocol is disabled or cipher suites are inappropriate)&quot;.] with root cause\r\njavax.net.ssl.SSLHandshakeException: No appropriate protocol (protocol is disabled or cipher suites are inappropriate)\r\n```\r\nThis error i am facinf my code i already using diffrent version of sql driver like latest one and older one but still issue persist.\r\n\r\n  [1]: https://i.stack.imgur.com/QcLok.png","title":"I am facing error of javax.net.ssl.SSLHandshakeException: No appropriate protocol (protocol is disabled or cipher suites are inappropriate)","body":"<p>I am using spring mvc concept in java when i am trying to login in my application its gets login successfully but after login its giving me error as below.</p>\n<p><img src=\"https://i.stack.imgur.com/QcLok.png\" alt=\"This is the my connection string i am using in code \" /></p>\n<pre><code>SEVERE: Servlet.service() for servlet [SpringDispatcher] in context with path [/PasswordReset] threw exception [Request processing failed; nested exception is org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is com.microsoft.sqlserver.jdbc.SQLServerException: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption. Error: &quot;No appropriate protocol (protocol is disabled or cipher suites are inappropriate)&quot;.] with root cause\njavax.net.ssl.SSLHandshakeException: No appropriate protocol (protocol is disabled or cipher suites are inappropriate)\n</code></pre>\n<p>This error i am facinf my code i already using diffrent version of sql driver like latest one and older one but still issue persist.</p>\n"},{"tags":["java","android","kotlin","kapt"],"comments":[{"owner":{"account_id":6023206,"reputation":7990,"user_id":4729721,"display_name":"a_local_nobody"},"score":0,"creation_date":1647600034,"post_id":71525731,"comment_id":126416755,"body_markdown":"Does this answer your question? [Kapt is not working properly with OpenJDK 16](https://stackoverflow.com/questions/67509099/kapt-is-not-working-properly-with-openjdk-16)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/67509099/kapt-is-not-working-properly-with-openjdk-16\">Kapt is not working properly with OpenJDK 16</a>"},{"owner":{"account_id":16474455,"reputation":1051,"user_id":11902787,"display_name":"Nisa Efendioglu"},"score":0,"creation_date":1647600115,"post_id":71525731,"comment_id":126416782,"body_markdown":"No, unfortunately the answers didn&#39;t work for me. @a_local_nobody","body":"No, unfortunately the answers didn&#39;t work for me. @a_local_nobody"},{"owner":{"account_id":6023206,"reputation":7990,"user_id":4729721,"display_name":"a_local_nobody"},"score":0,"creation_date":1647600841,"post_id":71525731,"comment_id":126417064,"body_markdown":"ahh, i assume you did try these before asking here, these do seem relevant but i can&#39;t say i&#39;ve ever seen this error before, hope you get an answer","body":"ahh, i assume you did try these before asking here, these do seem relevant but i can&#39;t say i&#39;ve ever seen this error before, hope you get an answer"},{"owner":{"account_id":16474455,"reputation":1051,"user_id":11902787,"display_name":"Nisa Efendioglu"},"score":0,"creation_date":1647600973,"post_id":71525731,"comment_id":126417108,"body_markdown":"Yes I tried almost all the answers on google :D thank you, I hope @a_local_nobody","body":"Yes I tried almost all the answers on google :D thank you, I hope @a_local_nobody"},{"owner":{"account_id":3289988,"reputation":1268,"user_id":2768515,"accept_rate":50,"display_name":"Chetan Gaikwad"},"score":2,"creation_date":1652268776,"post_id":71525731,"comment_id":127564181,"body_markdown":"For me I was using Mac M1 the following answer helped https://stackoverflow.com/a/71319188/2768515","body":"For me I was using Mac M1 the following answer helped <a href=\"https://stackoverflow.com/a/71319188/2768515\">stackoverflow.com/a/71319188/2768515</a>"},{"owner":{"account_id":1201634,"reputation":3471,"user_id":1172181,"accept_rate":100,"display_name":"Luis"},"score":0,"creation_date":1679518572,"post_id":71525731,"comment_id":133738585,"body_markdown":"Bumping the kotlin version to 1.6.0 fixed it for me (on m1 macos)","body":"Bumping the kotlin version to 1.6.0 fixed it for me (on m1 macos)"}],"answers":[{"comments":[{"owner":{"account_id":16474455,"reputation":1051,"user_id":11902787,"display_name":"Nisa Efendioglu"},"score":0,"creation_date":1647609158,"post_id":71527580,"comment_id":126419740,"body_markdown":"https://issuetracker.google.com/issues/174695268?pli=1#comment9","body":"<a href=\"https://issuetracker.google.com/issues/174695268?pli=1#comment9\" rel=\"nofollow noreferrer\">issuetracker.google.com/issues/174695268?pli=1#comment9</a>"},{"owner":{"account_id":5487443,"reputation":500,"user_id":4361781,"display_name":"Meet"},"score":0,"creation_date":1698992737,"post_id":71527580,"comment_id":136477270,"body_markdown":"Unfortunately this solution isn&#39;t working for me.","body":"Unfortunately this solution isn&#39;t working for me."}],"tags":[],"owner":{"account_id":16474455,"reputation":1051,"user_id":11902787,"display_name":"Nisa Efendioglu"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1647609130,"creation_date":1647609130,"answer_id":71527580,"question_id":71525731,"body_markdown":"I found a solution and fixed this damn problem :D\r\n\r\n I recommend using, adding it to the root build.gradle. This will force using the given dependency in the whole project:\r\n\r\n\r\nbuild.gradle (Project)\r\n\r\n    allprojects {\r\n        configurations.all {\r\n            resolutionStrategy {\r\n                force &#39;org.xerial:sqlite-jdbc:3.34.0&#39;\r\n            }\r\n        }\r\n    }","title":"java.lang.IllegalAccessError: class org.jetbrains.kotlin.kapt3.base.KaptContext Android","body":"<p>I found a solution and fixed this damn problem :D</p>\n<p>I recommend using, adding it to the root build.gradle. This will force using the given dependency in the whole project:</p>\n<p>build.gradle (Project)</p>\n<pre><code>allprojects {\n    configurations.all {\n        resolutionStrategy {\n            force 'org.xerial:sqlite-jdbc:3.34.0'\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":905320,"reputation":1682,"user_id":1800854,"accept_rate":82,"display_name":"Mo Beigi"},"score":3,"creation_date":1668057852,"post_id":72276309,"comment_id":131316213,"body_markdown":"This was my issue (was set to JDK17 instead of JDK11). Thanks!","body":"This was my issue (was set to JDK17 instead of JDK11). Thanks!"},{"owner":{"account_id":1682942,"reputation":360,"user_id":1546808,"display_name":"Micah Engle-Eshleman"},"score":3,"creation_date":1684906264,"post_id":72276309,"comment_id":134583891,"body_markdown":"This worked for me! Just had to restart Android Studio afterwards","body":"This worked for me! Just had to restart Android Studio afterwards"}],"tags":[],"owner":{"account_id":25315289,"reputation":111,"user_id":19137488,"display_name":"IToncek"},"comment_count":2,"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1652799540,"creation_date":1652799540,"answer_id":72276309,"question_id":71525731,"body_markdown":"You can solve this by switching Java version to **Java 15**. Also if you are working with gradle on Intellij IDEA, change java also in **File&gt; Settings &gt; Build, Execution, Deployment &gt; Build Tools &gt; Gradle**. ","title":"java.lang.IllegalAccessError: class org.jetbrains.kotlin.kapt3.base.KaptContext Android","body":"<p>You can solve this by switching Java version to <strong>Java 15</strong>. Also if you are working with gradle on Intellij IDEA, change java also in <strong>File&gt; Settings &gt; Build, Execution, Deployment &gt; Build Tools &gt; Gradle</strong>.</p>\n"},{"tags":[],"owner":{"account_id":20836429,"reputation":131,"user_id":15304208,"display_name":"Simsim"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658216035,"creation_date":1658216035,"answer_id":73032840,"question_id":71525731,"body_markdown":"After switching JAVA_HOME to java 1.8 and restarting Android Studio, problem \r\nis solved.","title":"java.lang.IllegalAccessError: class org.jetbrains.kotlin.kapt3.base.KaptContext Android","body":"<p>After switching JAVA_HOME to java 1.8 and restarting Android Studio, problem\nis solved.</p>\n"},{"tags":[],"owner":{"account_id":9207894,"reputation":702,"user_id":6842407,"display_name":"NeeK"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675316952,"creation_date":1675316952,"answer_id":75319139,"question_id":71525731,"body_markdown":"I was able to solve this problem by adding following workaround :\r\n\r\n    org.gradle.jvmargs=-Xmx1536m --illegal-access=permit\r\n\r\nto gradle.properties file. ","title":"java.lang.IllegalAccessError: class org.jetbrains.kotlin.kapt3.base.KaptContext Android","body":"<p>I was able to solve this problem by adding following workaround :</p>\n<pre><code>org.gradle.jvmargs=-Xmx1536m --illegal-access=permit\n</code></pre>\n<p>to gradle.properties file.</p>\n"},{"comments":[{"owner":{"account_id":18812812,"reputation":92,"user_id":13720647,"display_name":"Zobaer Hossain"},"score":0,"creation_date":1696881210,"post_id":76015058,"comment_id":136207249,"body_markdown":"It worked for me,Thanks. Just don&#39;t forget to Invalid cache &amp; Restart.","body":"It worked for me,Thanks. Just don&#39;t forget to Invalid cache &amp; Restart."}],"tags":[],"owner":{"account_id":10470352,"reputation":679,"user_id":7738516,"display_name":"Vishnu Satheesh"},"comment_count":1,"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1681475029,"creation_date":1681475029,"answer_id":76015058,"question_id":71525731,"body_markdown":"Upgrade Kotlin Gradle Plugin Version to ***1.6.0+***. Kapt works seamlessly with JDK 16+ when Kotlin is 1.6.0 or higher.\r\n\r\n```\r\nclasspath &#39;org.jetbrains.kotlin:kotlin-gradle-plugin:1.6.21&#39;\r\n```\r\n\r\n[Kotlin plugins for Gradle][1]\r\n\r\n\r\n  [1]: https://plugins.gradle.org/plugin/org.jetbrains.kotlin.android","title":"java.lang.IllegalAccessError: class org.jetbrains.kotlin.kapt3.base.KaptContext Android","body":"<p>Upgrade Kotlin Gradle Plugin Version to <em><strong>1.6.0+</strong></em>. Kapt works seamlessly with JDK 16+ when Kotlin is 1.6.0 or higher.</p>\n<pre><code>classpath 'org.jetbrains.kotlin:kotlin-gradle-plugin:1.6.21'\n</code></pre>\n<p><a href=\"https://plugins.gradle.org/plugin/org.jetbrains.kotlin.android\" rel=\"noreferrer\">Kotlin plugins for Gradle</a></p>\n"},{"tags":[],"owner":{"account_id":13249741,"reputation":191,"user_id":9567585,"display_name":"neelkanth_vyas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682425001,"creation_date":1682425001,"answer_id":76101076,"question_id":71525731,"body_markdown":"Add \r\n\r\n    org.gradle.jvmargs=-Dfile.encoding=UTF-8 \\\r\n                       --add-opens jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED \\\r\n                       --add-opens jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED \\\r\n                       --add-opens jdk.compiler/com.sun.tools.javac.main=ALL-UNNAMED \\\r\n                       --add-opens jdk.compiler/com.sun.tools.javac.jvm=ALL-UNNAMED  \\\r\n                       --add-opens jdk.compiler/com.sun.tools.javac.processing=ALL-UNNAMED \\\r\n                       --add-opens jdk.compiler/com.sun.tools.javac.comp=ALL-UNNAMED \\\r\n                       --add-opens jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED\r\n\r\nto the gradle.properties file using JDK-11 in gradle-jdk.","title":"java.lang.IllegalAccessError: class org.jetbrains.kotlin.kapt3.base.KaptContext Android","body":"<p>Add</p>\n<pre><code>org.gradle.jvmargs=-Dfile.encoding=UTF-8 \\\n                   --add-opens jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED \\\n                   --add-opens jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED \\\n                   --add-opens jdk.compiler/com.sun.tools.javac.main=ALL-UNNAMED \\\n                   --add-opens jdk.compiler/com.sun.tools.javac.jvm=ALL-UNNAMED  \\\n                   --add-opens jdk.compiler/com.sun.tools.javac.processing=ALL-UNNAMED \\\n                   --add-opens jdk.compiler/com.sun.tools.javac.comp=ALL-UNNAMED \\\n                   --add-opens jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED\n</code></pre>\n<p>to the gradle.properties file using JDK-11 in gradle-jdk.</p>\n"},{"tags":[],"owner":{"account_id":24997503,"reputation":448,"user_id":18858169,"display_name":"Bhavin Solanki"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691999224,"creation_date":1691999224,"answer_id":76897157,"question_id":71525731,"body_markdown":"This is work for me and pretty sure work for most of people.\r\n\r\nChange Gradle Version to `JDK17 to JDK11 or visa versa`\r\n\r\nStill Facing Problem Go for `Invalid cache &amp; Restart`.","title":"java.lang.IllegalAccessError: class org.jetbrains.kotlin.kapt3.base.KaptContext Android","body":"<p>This is work for me and pretty sure work for most of people.</p>\n<p>Change Gradle Version to <code>JDK17 to JDK11 or visa versa</code></p>\n<p>Still Facing Problem Go for <code>Invalid cache &amp; Restart</code>.</p>\n"}],"owner":{"account_id":16474455,"reputation":1051,"user_id":11902787,"display_name":"Nisa Efendioglu"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31603,"favorite_count":0,"down_vote_count":0,"up_vote_count":45,"accepted_answer_id":71527580,"answer_count":7,"score":45,"last_activity_date":1691999224,"creation_date":1647599888,"question_id":71525731,"body_markdown":"I&#39;ve been getting an error like this for days, but I couldn&#39;t find a solution. Can you please help me?\r\n\r\nWhat could the problem be caused by?\r\n\r\nError :\r\n\r\n    java.lang.IllegalAccessError: class org.jetbrains.kotlin.kapt3.base.KaptContext (in unnamed module @0x6acdb135) cannot access class com.sun.tools.javac.util.Context (in module jdk.compiler) because module jdk.compiler does not export com.sun.tools.javac.util to unnamed module @0x6acdb135\r\n    \tat org.jetbrains.kotlin.kapt3.base.KaptContext.&lt;init&gt;(KaptContext.kt:28)\r\n    \tat org.jetbrains.kotlin.kapt3.KaptContextForStubGeneration.&lt;init&gt;(KaptContextForStubGeneration.kt:40)\r\n    \tat org.jetbrains.kotlin.kapt3.AbstractKapt3Extension.contextForStubGeneration(Kapt3Extension.kt:287)\r\n    \tat org.jetbrains.kotlin.kapt3.AbstractKapt3Extension.analysisCompleted(Kapt3Extension.kt:171)\r\n    \tat org.jetbrains.kotlin.kapt3.ClasspathBasedKapt3Extension.analysisCompleted(Kapt3Extension.kt:102)\r\n    \tat org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration$invokeExtensionsOnAnalysisComplete(TopDownAnalyzerFacadeForJVM.kt:112)\r\n    \tat org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration(TopDownAnalyzerFacadeForJVM.kt:122)\r\n    \tat org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration$default(TopDownAnalyzerFacadeForJVM.kt:86)\r\n    \tat org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:252)\r\n    \tat org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:243)\r\n    \tat org.jetbrains.kotlin.cli.common.messages.AnalyzerWithCompilerReport.analyzeAndReport(AnalyzerWithCompilerReport.kt:113)\r\n    \tat org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.analyze(KotlinToJVMBytecodeCompiler.kt:243)\r\n    \tat org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules$cli(KotlinToJVMBytecodeCompiler.kt:90)\r\n    \tat org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules$cli$default(KotlinToJVMBytecodeCompiler.kt:56)\r\n    \tat org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:169)\r\n    \tat org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:52)\r\n    \tat org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.kt:92)\r\n    \tat org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.kt:44)\r\n    \tat org.jetbrains.kotlin.cli.common.CLITool.exec(CLITool.kt:98)\r\n    \tat org.jetbrains.kotlin.incremental.IncrementalJvmCompilerRunner.runCompiler(IncrementalJvmCompilerRunner.kt:412)\r\n    \tat org.jetbrains.kotlin.incremental.IncrementalJvmCompilerRunner.runCompiler(IncrementalJvmCompilerRunner.kt:112)\r\n    \tat org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.compileIncrementally(IncrementalCompilerRunner.kt:358)\r\n    \tat org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.compileIncrementally$default(IncrementalCompilerRunner.kt:300)\r\n    \tat org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.compileImpl$rebuild(IncrementalCompilerRunner.kt:119)\r\n    \tat org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.compileImpl(IncrementalCompilerRunner.kt:170)\r\n    \tat org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.compile(IncrementalCompilerRunner.kt:81)\r\n    \tat org.jetbrains.kotlin.daemon.CompileServiceImplBase.execIncrementalCompiler(CompileServiceImpl.kt:607)\r\n    \tat org.jetbrains.kotlin.daemon.CompileServiceImplBase.access$execIncrementalCompiler(CompileServiceImpl.kt:96)\r\n    \tat org.jetbrains.kotlin.daemon.CompileServiceImpl.compile(CompileServiceImpl.kt:1658)\r\n    \tat jdk.internal.reflect.GeneratedMethodAccessor103.invoke(Unknown Source)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    \tat java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\r\n    \tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\r\n    \tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\r\n    \tat java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\r\n    \tat java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)\r\n    \tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)\r\n    \tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n    \tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n    \r\n    \r\n    Execution failed for task &#39;:app:kaptGenerateStubsMacellanDebugKotlin&#39;.\r\n    &gt; Internal compiler error. See log for more details","title":"java.lang.IllegalAccessError: class org.jetbrains.kotlin.kapt3.base.KaptContext Android","body":"<p>I've been getting an error like this for days, but I couldn't find a solution. Can you please help me?</p>\n<p>What could the problem be caused by?</p>\n<p>Error :</p>\n<pre><code>java.lang.IllegalAccessError: class org.jetbrains.kotlin.kapt3.base.KaptContext (in unnamed module @0x6acdb135) cannot access class com.sun.tools.javac.util.Context (in module jdk.compiler) because module jdk.compiler does not export com.sun.tools.javac.util to unnamed module @0x6acdb135\n    at org.jetbrains.kotlin.kapt3.base.KaptContext.&lt;init&gt;(KaptContext.kt:28)\n    at org.jetbrains.kotlin.kapt3.KaptContextForStubGeneration.&lt;init&gt;(KaptContextForStubGeneration.kt:40)\n    at org.jetbrains.kotlin.kapt3.AbstractKapt3Extension.contextForStubGeneration(Kapt3Extension.kt:287)\n    at org.jetbrains.kotlin.kapt3.AbstractKapt3Extension.analysisCompleted(Kapt3Extension.kt:171)\n    at org.jetbrains.kotlin.kapt3.ClasspathBasedKapt3Extension.analysisCompleted(Kapt3Extension.kt:102)\n    at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration$invokeExtensionsOnAnalysisComplete(TopDownAnalyzerFacadeForJVM.kt:112)\n    at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration(TopDownAnalyzerFacadeForJVM.kt:122)\n    at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration$default(TopDownAnalyzerFacadeForJVM.kt:86)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:252)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:243)\n    at org.jetbrains.kotlin.cli.common.messages.AnalyzerWithCompilerReport.analyzeAndReport(AnalyzerWithCompilerReport.kt:113)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.analyze(KotlinToJVMBytecodeCompiler.kt:243)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules$cli(KotlinToJVMBytecodeCompiler.kt:90)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules$cli$default(KotlinToJVMBytecodeCompiler.kt:56)\n    at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:169)\n    at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:52)\n    at org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.kt:92)\n    at org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.kt:44)\n    at org.jetbrains.kotlin.cli.common.CLITool.exec(CLITool.kt:98)\n    at org.jetbrains.kotlin.incremental.IncrementalJvmCompilerRunner.runCompiler(IncrementalJvmCompilerRunner.kt:412)\n    at org.jetbrains.kotlin.incremental.IncrementalJvmCompilerRunner.runCompiler(IncrementalJvmCompilerRunner.kt:112)\n    at org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.compileIncrementally(IncrementalCompilerRunner.kt:358)\n    at org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.compileIncrementally$default(IncrementalCompilerRunner.kt:300)\n    at org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.compileImpl$rebuild(IncrementalCompilerRunner.kt:119)\n    at org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.compileImpl(IncrementalCompilerRunner.kt:170)\n    at org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.compile(IncrementalCompilerRunner.kt:81)\n    at org.jetbrains.kotlin.daemon.CompileServiceImplBase.execIncrementalCompiler(CompileServiceImpl.kt:607)\n    at org.jetbrains.kotlin.daemon.CompileServiceImplBase.access$execIncrementalCompiler(CompileServiceImpl.kt:96)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl.compile(CompileServiceImpl.kt:1658)\n    at jdk.internal.reflect.GeneratedMethodAccessor103.invoke(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\n    at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\n    at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\n    at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n    at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)\n    at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)\n    at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n\n\nExecution failed for task ':app:kaptGenerateStubsMacellanDebugKotlin'.\n&gt; Internal compiler error. See log for more details\n</code></pre>\n"},{"tags":["java","lambda","functional-programming","stream"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1691999519,"post_id":76897123,"comment_id":135561286,"body_markdown":"you could also use method references instead of typing out the whole lambda fyi. ie `mapToInt(Integer::valueOf)`","body":"you could also use method references instead of typing out the whole lambda fyi. ie <code>mapToInt(Integer::valueOf)</code>"}],"answers":[{"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":2,"creation_date":1691999859,"post_id":76897147,"comment_id":135561341,"body_markdown":"I&#39;d create a variable, to prevent having to evaluate the answer every single time: `IntPredicate filter = &quot;n&quot;.equals(answer) ? pos -&gt; pos &lt; 0 : pos  -&gt; pos &gt; 0`","body":"I&#39;d create a variable, to prevent having to evaluate the answer every single time: <code>IntPredicate filter = &quot;n&quot;.equals(answer) ? pos -&gt; pos &lt; 0 : pos  -&gt; pos &gt; 0</code>"}],"tags":[],"owner":{"account_id":2094057,"reputation":506144,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1691999153,"creation_date":1691999153,"answer_id":76897147,"question_id":76897123,"body_markdown":"You could use a single stream containing a ternary expression in the `filter()` step which chooses which comparison against `pos` to use:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    average = inputs.stream()\r\n                    .mapToInt(s -&gt; Integer.valueOf(s))\r\n                    .filter(pos -&gt; &quot;n&quot;.equals(answer) ? pos &lt; 0 : pos &gt; 0)\r\n                    .average()\r\n                    .getAsDouble();","title":"How to use an if statement in a Java stream to avoid a duplicate stream process","body":"<p>You could use a single stream containing a ternary expression in the <code>filter()</code> step which chooses which comparison against <code>pos</code> to use:</p>\n<pre class=\"lang-java prettyprint-override\"><code>average = inputs.stream()\n                .mapToInt(s -&gt; Integer.valueOf(s))\n                .filter(pos -&gt; &quot;n&quot;.equals(answer) ? pos &lt; 0 : pos &gt; 0)\n                .average()\n                .getAsDouble();\n</code></pre>\n"}],"owner":{"account_id":28754292,"reputation":3,"user_id":22021631,"display_name":"Bekz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76897147,"answer_count":1,"score":0,"last_activity_date":1691999153,"creation_date":1691998915,"question_id":76897123,"body_markdown":"Here is my code from the Java MOOC.fi course where I am learning about streams. The code below works but the way I wrote it is quite amateur. I was thinking of somehow integrating an if statement in the stream with the condition of the answer given in an earlier input to predicate the process by changing one line (the filter method). Any ideas?\r\n\r\n```\r\nSystem.out.println(&quot;Print the average of the negative numbers or the positive numbers? (n/p)&quot;);\r\n        String answer = scanner.nextLine();\r\n        double average;\r\n        \r\n        if (answer.equals(&quot;n&quot;)) {\r\n            average = inputs.stream()\r\n                    .mapToInt(s -&gt; Integer.valueOf(s))\r\n                    .filter(pos -&gt; pos &lt; 0)\r\n                    .average()\r\n                    .getAsDouble();\r\n        } else {\r\n            average = inputs.stream()\r\n                    .mapToInt(s -&gt; Integer.valueOf(s))\r\n                    .filter(pos -&gt; pos &gt; 0)\r\n                    .average()\r\n                    .getAsDouble();\r\n        }\r\n```\r\n\r\n\r\nI tried forEach but I did not understand how to use it. The collection I am giving to stream is an ArrayList.\r\n\r\nI am on Java v11.0.18 and running the program on NetBeans v1.5.0.","title":"How to use an if statement in a Java stream to avoid a duplicate stream process","body":"<p>Here is my code from the Java MOOC.fi course where I am learning about streams. The code below works but the way I wrote it is quite amateur. I was thinking of somehow integrating an if statement in the stream with the condition of the answer given in an earlier input to predicate the process by changing one line (the filter method). Any ideas?</p>\n<pre><code>System.out.println(&quot;Print the average of the negative numbers or the positive numbers? (n/p)&quot;);\n        String answer = scanner.nextLine();\n        double average;\n        \n        if (answer.equals(&quot;n&quot;)) {\n            average = inputs.stream()\n                    .mapToInt(s -&gt; Integer.valueOf(s))\n                    .filter(pos -&gt; pos &lt; 0)\n                    .average()\n                    .getAsDouble();\n        } else {\n            average = inputs.stream()\n                    .mapToInt(s -&gt; Integer.valueOf(s))\n                    .filter(pos -&gt; pos &gt; 0)\n                    .average()\n                    .getAsDouble();\n        }\n</code></pre>\n<p>I tried forEach but I did not understand how to use it. The collection I am giving to stream is an ArrayList.</p>\n<p>I am on Java v11.0.18 and running the program on NetBeans v1.5.0.</p>\n"},{"tags":["java","android","autocompletetextview","multiautocompletetextview"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1692053044,"post_id":76897130,"comment_id":135570941,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":28578269,"reputation":142,"user_id":21879587,"display_name":"tamtejszystan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691998964,"creation_date":1691998964,"question_id":76897130,"body_markdown":"**Question:**\r\n\r\nI&#39;m working on creating a custom `MultiAutoCompleteTextView` in my Android app, and I&#39;ve implemented the basic functionality. However, I&#39;m struggling with implementing a feature that limits the user to a specific number of selections, for example, a maximum of 3 selected items. I want to prevent the user from selecting more than this limit.\r\n\r\nI have searched the docs, but I didn&#39;t find anything helpful. I was thinking about tracking the number of user clicks on the dropdown menu, but I am not sure it&#39;s the way to go. Are there any best practices or recommended approaches for this kind of requirement? Additionally, how should I handle cases like removing items or clearing the selected items? Any insights, code examples, or guidance would be greatly appreciated. Thank you in advance!","title":"Limiting selections in MultiAutoCompleteTextView in Android","body":"<p><strong>Question:</strong></p>\n<p>I'm working on creating a custom <code>MultiAutoCompleteTextView</code> in my Android app, and I've implemented the basic functionality. However, I'm struggling with implementing a feature that limits the user to a specific number of selections, for example, a maximum of 3 selected items. I want to prevent the user from selecting more than this limit.</p>\n<p>I have searched the docs, but I didn't find anything helpful. I was thinking about tracking the number of user clicks on the dropdown menu, but I am not sure it's the way to go. Are there any best practices or recommended approaches for this kind of requirement? Additionally, how should I handle cases like removing items or clearing the selected items? Any insights, code examples, or guidance would be greatly appreciated. Thank you in advance!</p>\n"},{"tags":["java","findbugs"],"answers":[{"tags":[],"owner":{"account_id":1531328,"reputation":3720,"user_id":1428461,"display_name":"Jacob Raihle"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1343377788,"creation_date":1343377788,"answer_id":11684187,"question_id":11683925,"body_markdown":"If you _know_ that `event` will always be a `GridWrapperEvent`, you can ignore the warning. Otherwise you can wrap the cast (and the logic depending on it) inside a check like\r\n\r\n    if (event instanceof GridWrapperEvent) {\r\n      // ...\r\n    }\r\nIn fact you&#39;re already doing this, but for the (I assume) more generic `WrapperEvent` class. Perhaps you could adapt that check instead of adding a new one.","title":"Unchecked casting complain by FindBugs","body":"<p>If you <em>know</em> that <code>event</code> will always be a <code>GridWrapperEvent</code>, you can ignore the warning. Otherwise you can wrap the cast (and the logic depending on it) inside a check like</p>\n\n<pre><code>if (event instanceof GridWrapperEvent) {\n  // ...\n}\n</code></pre>\n\n<p>In fact you're already doing this, but for the (I assume) more generic <code>WrapperEvent</code> class. Perhaps you could adapt that check instead of adding a new one.</p>\n"},{"tags":[],"owner":{"account_id":8052584,"reputation":519,"user_id":6070667,"display_name":"Dulmina"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691998729,"creation_date":1691998729,"answer_id":76897110,"question_id":11683925,"body_markdown":"You can use `spotbugs-exclude.xml` to skip false positive warnings\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;FindBugsFilter&gt;\r\n        &lt;Match&gt;\r\n            &lt;!-- Unchecked cast warning --&gt;\r\n            &lt;Bug pattern=&quot;BC_UNCONFIRMED_CAST&quot;/&gt;\r\n            &lt;Class name=&quot;com.example.MyClass&quot;/&gt; &lt;!-- Specify your class name --&gt;\r\n            &lt;Method name=&quot;someMethod&quot;/&gt; &lt;!-- Specify your method name --&gt;\r\n        &lt;/Match&gt;\r\n    &lt;/FindBugsFilter&gt;\r\n\r\n","title":"Unchecked casting complain by FindBugs","body":"<p>You can use <code>spotbugs-exclude.xml</code> to skip false positive warnings</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;FindBugsFilter&gt;\n    &lt;Match&gt;\n        &lt;!-- Unchecked cast warning --&gt;\n        &lt;Bug pattern=&quot;BC_UNCONFIRMED_CAST&quot;/&gt;\n        &lt;Class name=&quot;com.example.MyClass&quot;/&gt; &lt;!-- Specify your class name --&gt;\n        &lt;Method name=&quot;someMethod&quot;/&gt; &lt;!-- Specify your method name --&gt;\n    &lt;/Match&gt;\n&lt;/FindBugsFilter&gt;\n</code></pre>\n"}],"owner":{"account_id":1658137,"reputation":26719,"user_id":1527084,"accept_rate":81,"display_name":"Geek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11998,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":11684187,"answer_count":2,"score":3,"last_activity_date":1691998729,"creation_date":1343376676,"question_id":11683925,"body_markdown":"Consider the following code :\r\n\r\n\r\n     public void broadcast(FacesEvent event)\r\n        throws AbortProcessingException {\r\n    \r\n        if(!(event instanceof WrapperEvent)) {\r\n          super.broadcast(event);\r\n          return;\r\n        }\r\n    \r\n        // Sets up the correct context and fire our wrapped event.\r\n        GridWrapperEvent revent = (GridWrapperEvent)event; // FindBugs is complaining here \r\n        int oldRowIndex = getRowIndex();\r\n        int oldColumnIndex = getColumnIndex();\r\n        boolean oldClientIdRewritting = clientIdRewritting;\r\n        setClientIdRewritting(revent.isClientIdRewritting());\r\n    \r\n        setActiveCell(revent.getRowIndex(), revent.getColumnIndex());\r\n    \r\n        FacesEvent rowEvent = revent.getFacesEvent();\r\n        rowEvent.getComponent().broadcast(rowEvent);\r\n        setActiveCell(oldRowIndex, oldColumnIndex);\r\n        setClientIdRewritting(oldClientIdRewritting);\r\n      }\r\n\r\n[FindBugs][1] is complaining about the commented line. Is there anything that I can do about it? This is what FindBugs says:\r\n\r\n&gt; **Unchecked/unconfirmed cast** \r\n&gt;    This cast is unchecked, and not all\r\n&gt; instances of the type casted from can be cast to the type it is being\r\n&gt; cast to. Ensure that your program logic ensures that this cast will\r\n&gt; not fail.\r\n\r\n[1]:http://findbugs.sourceforge.net/","title":"Unchecked casting complain by FindBugs","body":"<p>Consider the following code :</p>\n\n<pre><code> public void broadcast(FacesEvent event)\n    throws AbortProcessingException {\n\n    if(!(event instanceof WrapperEvent)) {\n      super.broadcast(event);\n      return;\n    }\n\n    // Sets up the correct context and fire our wrapped event.\n    GridWrapperEvent revent = (GridWrapperEvent)event; // FindBugs is complaining here \n    int oldRowIndex = getRowIndex();\n    int oldColumnIndex = getColumnIndex();\n    boolean oldClientIdRewritting = clientIdRewritting;\n    setClientIdRewritting(revent.isClientIdRewritting());\n\n    setActiveCell(revent.getRowIndex(), revent.getColumnIndex());\n\n    FacesEvent rowEvent = revent.getFacesEvent();\n    rowEvent.getComponent().broadcast(rowEvent);\n    setActiveCell(oldRowIndex, oldColumnIndex);\n    setClientIdRewritting(oldClientIdRewritting);\n  }\n</code></pre>\n\n<p><a href=\"http://findbugs.sourceforge.net/\" rel=\"nofollow\">FindBugs</a> is complaining about the commented line. Is there anything that I can do about it? This is what FindBugs says:</p>\n\n<blockquote>\n  <p><strong>Unchecked/unconfirmed cast</strong> \n     This cast is unchecked, and not all\n  instances of the type casted from can be cast to the type it is being\n  cast to. Ensure that your program logic ensures that this cast will\n  not fail.</p>\n</blockquote>\n"},{"tags":["java","scala","sbt"],"comments":[{"owner":{"account_id":7034556,"reputation":12335,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":2,"creation_date":1671277552,"post_id":74833234,"comment_id":132067686,"body_markdown":"Maybe not related but the first error is that you&#39;re running SBT in a folder which is not a SBT project.","body":"Maybe not related but the first error is that you&#39;re running SBT in a folder which is not a SBT project."},{"owner":{"account_id":7034556,"reputation":12335,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":3,"creation_date":1671277584,"post_id":74833234,"comment_id":132067690,"body_markdown":"Do you have `SBT_OPTS` env variable?","body":"Do you have <code>SBT_OPTS</code> env variable?"},{"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"score":3,"creation_date":1671289293,"post_id":74833234,"comment_id":132069764,"body_markdown":"sbt should work with Java 11. `Neither build.sbt nor a &#39;project&#39; directory` is a warning, not error. I can see that you&#39;re starting sbt from sbt 1.8 folder but not sure that you&#39;re starting sbt 1.8. Normally it&#39;s in `bin` subdirectory, so try something like `./bin/sbt`. Also please add output of `which java`, `echo $JAVA_HOME`, `which sbt`, `echo $SBT_OPTS`, `echo $JAVA_OPTS`, `echo $PATH`.","body":"sbt should work with Java 11. <code>Neither build.sbt nor a &#39;project&#39; directory</code> is a warning, not error. I can see that you&#39;re starting sbt from sbt 1.8 folder but not sure that you&#39;re starting sbt 1.8. Normally it&#39;s in <code>bin</code> subdirectory, so try something like <code>.&#47;bin&#47;sbt</code>. Also please add output of <code>which java</code>, <code>echo $JAVA_HOME</code>, <code>which sbt</code>, <code>echo $SBT_OPTS</code>, <code>echo $JAVA_OPTS</code>, <code>echo $PATH</code>."},{"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"score":3,"creation_date":1671289685,"post_id":74833234,"comment_id":132069832,"body_markdown":"Also if there was previous `sbt` installation maybe you could try to delete `~/.sbt`","body":"Also if there was previous <code>sbt</code> installation maybe you could try to delete <code>~&#47;.sbt</code>"},{"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"score":1,"creation_date":1671291331,"post_id":74833234,"comment_id":132070113,"body_markdown":"https://stackoverflow.com/questions/47112412/unrecognized-vm-option-maxpermsize-512m-when-running-zeppelin https://stackoverflow.com/questions/31411989/android-studio-unrecognized-vm-option-maxpermsize-256m","body":"<a href=\"https://stackoverflow.com/questions/47112412/unrecognized-vm-option-maxpermsize-512m-when-running-zeppelin\" title=\"unrecognized vm option maxpermsize 512m when running zeppelin\">stackoverflow.com/questions/47112412/&hellip;</a> <a href=\"https://stackoverflow.com/questions/31411989/android-studio-unrecognized-vm-option-maxpermsize-256m\" title=\"android studio unrecognized vm option maxpermsize 256m\">stackoverflow.com/questions/31411989/&hellip;</a>"},{"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"score":1,"creation_date":1671293021,"post_id":74833234,"comment_id":132070363,"body_markdown":"https://docs.scala-lang.org/getting-started/index.html#create-a-hello-world-project-with-sbt","body":"<a href=\"https://docs.scala-lang.org/getting-started/index.html#create-a-hello-world-project-with-sbt\" rel=\"nofollow noreferrer\">docs.scala-lang.org/getting-started/&hellip;</a>"},{"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"score":1,"creation_date":1671293415,"post_id":74833234,"comment_id":132070441,"body_markdown":"You should start sbt from the directory where you have a project or where you&#39;d like to create a project (starting from a different directory is in principle [possible](https://stackoverflow.com/questions/74440324/sbt-gives-java-lang-nullpointerexception-when-trying-to-run-spark) but tricky). Now you seem trying to create a new project in sbt installation folder.","body":"You should start sbt from the directory where you have a project or where you&#39;d like to create a project (starting from a different directory is in principle <a href=\"https://stackoverflow.com/questions/74440324/sbt-gives-java-lang-nullpointerexception-when-trying-to-run-spark\">possible</a> but tricky). Now you seem trying to create a new project in sbt installation folder."},{"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"score":1,"creation_date":1671500649,"post_id":74833234,"comment_id":132108355,"body_markdown":"Do you have any updates?","body":"Do you have any updates?"},{"owner":{"account_id":215504,"reputation":52472,"user_id":470184,"accept_rate":91,"display_name":"blue-sky"},"score":0,"creation_date":1672016399,"post_id":74833234,"comment_id":132208309,"body_markdown":"I&#39;m going to vote to close this question as a machine restart fixed the issue, im unsure as to the cause.","body":"I&#39;m going to vote to close this question as a machine restart fixed the issue, im unsure as to the cause."}],"answers":[{"tags":[],"owner":{"account_id":9209922,"reputation":43,"user_id":6843587,"display_name":"suv1sh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691998672,"creation_date":1691998672,"answer_id":76897106,"question_id":74833234,"body_markdown":"I was using this sbt version in my project along with `jdk1.8.0.171`:\r\n\r\n    :project/build.properties\r\n    \r\n    sbt.version=0.13.17\r\n\r\n\r\nbut due to some issue, I had to replace my laptop and reconfigure all setups, however, my sbt version in the project was the same but I had installed an upgraded jdk `jdk1.8.0.361` which was causing this issue. \r\n\r\n    build.properties\r\n    sbt.version=0.13.17\r\n\r\nI re-installed the `jdk1.8.0.171` and now it is working fine for me.\r\n","title":"sbt and Java compatibility","body":"<p>I was using this sbt version in my project along with <code>jdk1.8.0.171</code>:</p>\n<pre><code>:project/build.properties\n\nsbt.version=0.13.17\n</code></pre>\n<p>but due to some issue, I had to replace my laptop and reconfigure all setups, however, my sbt version in the project was the same but I had installed an upgraded jdk <code>jdk1.8.0.361</code> which was causing this issue.</p>\n<pre><code>build.properties\nsbt.version=0.13.17\n</code></pre>\n<p>I re-installed the <code>jdk1.8.0.171</code> and now it is working fine for me.</p>\n"}],"owner":{"account_id":215504,"reputation":52472,"user_id":470184,"accept_rate":91,"display_name":"blue-sky"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":275,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691998672,"creation_date":1671271445,"question_id":74833234,"body_markdown":"I&#39;ve download sbt-1.8.0, when I try to run sbt I receive error : \r\n\r\n    \\Downloads\\sbt-1.8.0&gt;sbt\r\n    [warn] Neither build.sbt nor a &#39;project&#39; directory in the current directory: C:\\Users\\fff\\Downloads\\sbt-1.8.0\r\n    c) continue\r\n    q) quit\r\n    ? c\r\n    Unrecognized VM option &#39;MaxPermSize=256m&#39;\r\n    Error: Could not create the Java Virtual Machine.\r\n    Error: A fatal exception has occurred. Program will exit.\r\n    The filename, directory name, or volume label syntax is incorrect.\r\n    Unrecognized VM option &#39;MaxPermSize=256m&#39;\r\n    Error: Could not create the Java Virtual Machine.\r\n    Error: A fatal exception has occurred. Program will exit.\r\n    Unrecognized VM option &#39;MaxPermSize=256m&#39;\r\n    Error: Could not create the Java Virtual Machine.\r\n    Error: A fatal exception has occurred. Program will exit.\r\n\r\nI&#39;m using Java 11 version : \r\n\r\n    \\Downloads\\sbt-1.8.0&gt;java -version\r\n    openjdk version &quot;11.0.16.1&quot; 2022-08-12\r\n    OpenJDK Runtime Environment Temurin-11.0.16.1+1 (build 11.0.16.1+1)\r\n    OpenJDK 64-Bit Server VM Temurin-11.0.16.1+1 (build 11.0.16.1+1, mixed mode)\r\n\r\nMy understanding is that MaxPermSize support has been removed from Java post version 8 ? Is sbt1.8 not compatible with Java 11 ?","title":"sbt and Java compatibility","body":"<p>I've download sbt-1.8.0, when I try to run sbt I receive error :</p>\n<pre><code>\\Downloads\\sbt-1.8.0&gt;sbt\n[warn] Neither build.sbt nor a 'project' directory in the current directory: C:\\Users\\fff\\Downloads\\sbt-1.8.0\nc) continue\nq) quit\n? c\nUnrecognized VM option 'MaxPermSize=256m'\nError: Could not create the Java Virtual Machine.\nError: A fatal exception has occurred. Program will exit.\nThe filename, directory name, or volume label syntax is incorrect.\nUnrecognized VM option 'MaxPermSize=256m'\nError: Could not create the Java Virtual Machine.\nError: A fatal exception has occurred. Program will exit.\nUnrecognized VM option 'MaxPermSize=256m'\nError: Could not create the Java Virtual Machine.\nError: A fatal exception has occurred. Program will exit.\n</code></pre>\n<p>I'm using Java 11 version :</p>\n<pre><code>\\Downloads\\sbt-1.8.0&gt;java -version\nopenjdk version &quot;11.0.16.1&quot; 2022-08-12\nOpenJDK Runtime Environment Temurin-11.0.16.1+1 (build 11.0.16.1+1)\nOpenJDK 64-Bit Server VM Temurin-11.0.16.1+1 (build 11.0.16.1+1, mixed mode)\n</code></pre>\n<p>My understanding is that MaxPermSize support has been removed from Java post version 8 ? Is sbt1.8 not compatible with Java 11 ?</p>\n"},{"tags":["java","file","serialization"],"comments":[{"owner":{"account_id":20937,"reputation":167576,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"score":0,"creation_date":1302899181,"post_id":5681999,"comment_id":6487981,"body_markdown":"What does _&quot;open all of them in java&quot;_ mean? Do you want to open them by launching their associated applications, or do you want to read the bytes from these files?","body":"What does <i>&quot;open all of them in java&quot;</i> mean? Do you want to open them by launching their associated applications, or do you want to read the bytes from these files?"},{"owner":{"account_id":296289,"reputation":949,"user_id":601163,"accept_rate":91,"display_name":"Mojo_Jojo"},"score":0,"creation_date":1302899334,"post_id":5681999,"comment_id":6488021,"body_markdown":"THey&#39;re basically .ser files. So I have to fetch the objects in them.","body":"THey&#39;re basically .ser files. So I have to fetch the objects in them."}],"answers":[{"tags":[],"owner":{"account_id":130645,"reputation":81705,"user_id":330057,"accept_rate":77,"display_name":"corsiKa"},"comment_count":0,"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1329272829,"creation_date":1302899189,"answer_id":5682025,"question_id":5681999,"body_markdown":"    File dir = new File(&quot;.&quot;);\r\n    if(!dir.isDirectory()) throw new IllegalStateException(&quot;wtf mate?&quot;);\r\n    for(File file : dir.listFiles()) {\r\n        if(file.getName().startsWith(&quot;@&quot;))\r\n            process(file);\r\n    }\r\n\r\nAfter revisiting this, it turns out there&#39;s something else you can do. Notice the file filter I used.\r\n\r\n    import java.io.File;\r\n    class Test {\r\n        public static void main(String[] args) {\r\n            File dir = new File(&quot;.&quot;);\r\n            if(!dir.isDirectory()) throw new IllegalStateException(&quot;wtf mate?&quot;);\r\n            for(File file : dir.listFiles(new RegexFileFilter(&quot;@*\\\\.ser&quot;))) {\r\n                    process(file);\r\n            }\r\n        }\r\n        \r\n        public static void process(File f) {\r\n            System.out.println(f.getAbsolutePath());\r\n        }\r\n    }\r\n\r\nHere&#39;s the RegexFileFilter I used\r\n\r\n    public class RegexFileFilter implements java.io.FileFilter {\r\n    \r\n        final java.util.regex.Pattern pattern;\r\n        \r\n        public RegexFileFilter(String regex) {\r\n            pattern = java.util.regex.Pattern.compile(regex);\r\n        }\r\n        \r\n        public boolean accept(java.io.File f) {\r\n            return pattern.matcher(f.getName()).find();\r\n        }\r\n    \r\n    }\r\n\r\nAnd here&#39;s the result. Note the three good files and the three bad files. If you had to do this on a more regular basis, I&#39;d recommend using this, especially if you need to do it based on other attributes of the file other than file name, like length, modify date, etc.\r\n\r\n    C:\\junk\\j&gt;dir\r\n     Volume in drive C has no label.\r\n     Volume Serial Number is 48FA-B715\r\n    \r\n     Directory of C:\\junk\\j\r\n    \r\n    02/14/2012  06:16 PM    &lt;DIR&gt;          .\r\n    02/14/2012  06:16 PM    &lt;DIR&gt;          ..\r\n    02/14/2012  06:15 PM                 0 @bad.serr\r\n    02/14/2012  06:15 PM                 0 @badser\r\n    02/14/2012  06:15 PM                 0 @first.ser\r\n    02/14/2012  06:15 PM                 0 @second.ser\r\n    02/14/2012  06:15 PM                 0 @third.ser\r\n    02/14/2012  06:15 PM                 0 bad@file.ser\r\n    02/14/2012  06:24 PM               692 RegexFileFilter.class\r\n    02/14/2012  06:24 PM               338 RegexFileFilter.java\r\n    02/14/2012  06:24 PM               901 Test.class\r\n    02/14/2012  06:24 PM               421 Test.java\r\n                  10 File(s)          2,352 bytes\r\n                   2 Dir(s)  10,895,474,688 bytes free\r\n    \r\n    C:\\junk\\j&gt;java Test\r\n    @first.ser\r\n    @second.ser\r\n    @third.ser","title":"List of files starting with a particular letter in java","body":"<pre><code>File dir = new File(\".\");\nif(!dir.isDirectory()) throw new IllegalStateException(\"wtf mate?\");\nfor(File file : dir.listFiles()) {\n    if(file.getName().startsWith(\"@\"))\n        process(file);\n}\n</code></pre>\n\n<p>After revisiting this, it turns out there's something else you can do. Notice the file filter I used.</p>\n\n<pre><code>import java.io.File;\nclass Test {\n    public static void main(String[] args) {\n        File dir = new File(\".\");\n        if(!dir.isDirectory()) throw new IllegalStateException(\"wtf mate?\");\n        for(File file : dir.listFiles(new RegexFileFilter(\"@*\\\\.ser\"))) {\n                process(file);\n        }\n    }\n\n    public static void process(File f) {\n        System.out.println(f.getAbsolutePath());\n    }\n}\n</code></pre>\n\n<p>Here's the RegexFileFilter I used</p>\n\n<pre><code>public class RegexFileFilter implements java.io.FileFilter {\n\n    final java.util.regex.Pattern pattern;\n\n    public RegexFileFilter(String regex) {\n        pattern = java.util.regex.Pattern.compile(regex);\n    }\n\n    public boolean accept(java.io.File f) {\n        return pattern.matcher(f.getName()).find();\n    }\n\n}\n</code></pre>\n\n<p>And here's the result. Note the three good files and the three bad files. If you had to do this on a more regular basis, I'd recommend using this, especially if you need to do it based on other attributes of the file other than file name, like length, modify date, etc.</p>\n\n<pre><code>C:\\junk\\j&gt;dir\n Volume in drive C has no label.\n Volume Serial Number is 48FA-B715\n\n Directory of C:\\junk\\j\n\n02/14/2012  06:16 PM    &lt;DIR&gt;          .\n02/14/2012  06:16 PM    &lt;DIR&gt;          ..\n02/14/2012  06:15 PM                 0 @bad.serr\n02/14/2012  06:15 PM                 0 @badser\n02/14/2012  06:15 PM                 0 @first.ser\n02/14/2012  06:15 PM                 0 @second.ser\n02/14/2012  06:15 PM                 0 @third.ser\n02/14/2012  06:15 PM                 0 bad@file.ser\n02/14/2012  06:24 PM               692 RegexFileFilter.class\n02/14/2012  06:24 PM               338 RegexFileFilter.java\n02/14/2012  06:24 PM               901 Test.class\n02/14/2012  06:24 PM               421 Test.java\n              10 File(s)          2,352 bytes\n               2 Dir(s)  10,895,474,688 bytes free\n\nC:\\junk\\j&gt;java Test\n@first.ser\n@second.ser\n@third.ser\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1302899228,"creation_date":1302899228,"answer_id":5682029,"question_id":5681999,"body_markdown":"Yes, open a directory File, get its List of child Files using a FileFilter that only allows through those file names that you want.\r\n","title":"List of files starting with a particular letter in java","body":"<p>Yes, open a directory File, get its List of child Files using a FileFilter that only allows through those file names that you want.</p>\n"},{"tags":[],"owner":{"account_id":41963,"reputation":7450,"user_id":122101,"accept_rate":75,"display_name":"rodrigoap"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1536214750,"creation_date":1302899247,"answer_id":5682032,"question_id":5681999,"body_markdown":"If it helps check `java.io.FileFilter`\r\n.\r\n","title":"List of files starting with a particular letter in java","body":"<p>If it helps check <code>java.io.FileFilter</code>\n.</p>\n"},{"tags":[],"owner":{"account_id":365331,"reputation":44,"user_id":710187,"display_name":"heksemann"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1302899324,"creation_date":1302899324,"answer_id":5682040,"question_id":5681999,"body_markdown":"please see\r\n&lt;a href=&quot;https://stackoverflow.com/questions/794381/how-to-find-files-that-match-a-wildcard-string-in-java&quot;&gt;here&lt;/a&gt;, I think that is what you need. See the post referring to FileFilter","title":"List of files starting with a particular letter in java","body":"<p>please see\n<a href=\"https://stackoverflow.com/questions/794381/how-to-find-files-that-match-a-wildcard-string-in-java\">here</a>, I think that is what you need. See the post referring to FileFilter</p>\n"},{"tags":[],"owner":{"display_name":"user1328876"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1489666544,"creation_date":1489666544,"answer_id":42833827,"question_id":5681999,"body_markdown":"You could use java.nio.file.DirectoryStream; \r\n\r\n    import java.nio.file.DirectoryStream;\r\n    import java.nio.file.Files;\r\n    import java.nio.file.Path;\r\n    import java.nio.file.Paths;\r\n\r\n      //Java version 7 \r\n      class A { \r\n        public static void main(String[] args) throws Exception\r\n        { \r\n           // Example directory on dos system\r\n           Path dir = Paths.get(&quot;c:\\\\a\\\\b\\\\&quot;);\r\n\r\n            /**\r\n            *\r\n            * Create a new DirectoryStream for the above path. \r\n            * \r\n            * List all files within this directory that begin\r\n            * with the letters A or B i.e &quot;[AB)]*&quot;\r\n            * \r\n            */\r\n            try (DirectoryStream&lt;Path&gt; stream = Files.newDirectoryStream(dir, &quot;[AB]*&quot;))\r\n            {\r\n                // Print all the files to output stream\r\n                for(Path p: stream)\r\n                {  \r\n                    System.out.println(p.getFileName());\r\n                }\r\n            }\r\n            catch(Exception e)\r\n            {\r\n                System.out.println(&quot;problems locating directory&quot;);\r\n            }\r\n        }\r\n     } ","title":"List of files starting with a particular letter in java","body":"<p>You could use java.nio.file.DirectoryStream; </p>\n\n<pre><code>import java.nio.file.DirectoryStream;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\n\n  //Java version 7 \n  class A { \n    public static void main(String[] args) throws Exception\n    { \n       // Example directory on dos system\n       Path dir = Paths.get(\"c:\\\\a\\\\b\\\\\");\n\n        /**\n        *\n        * Create a new DirectoryStream for the above path. \n        * \n        * List all files within this directory that begin\n        * with the letters A or B i.e \"[AB)]*\"\n        * \n        */\n        try (DirectoryStream&lt;Path&gt; stream = Files.newDirectoryStream(dir, \"[AB]*\"))\n        {\n            // Print all the files to output stream\n            for(Path p: stream)\n            {  \n                System.out.println(p.getFileName());\n            }\n        }\n        catch(Exception e)\n        {\n            System.out.println(\"problems locating directory\");\n        }\n    }\n } \n</code></pre>\n"},{"tags":[],"owner":{"account_id":25266691,"reputation":1,"user_id":19096730,"display_name":"Roman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671893401,"creation_date":1671893105,"answer_id":74908360,"question_id":5681999,"body_markdown":"One-liner returning the list of `File` objects:\r\n\r\n    myDir.listFiles((FilenameFilter)((d, n) -&gt; n.startsWith(&#39;myPrefix&#39;)))","title":"List of files starting with a particular letter in java","body":"<p>One-liner returning the list of <code>File</code> objects:</p>\n<pre><code>myDir.listFiles((FilenameFilter)((d, n) -&gt; n.startsWith('myPrefix')))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29220889,"reputation":1,"user_id":22386633,"display_name":"Ufuk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691998459,"creation_date":1691998332,"answer_id":76897069,"question_id":5681999,"body_markdown":"You could use Apache AndFileFilter (docx files starting with @) :\r\n\r\n    Collection&lt;File&gt; files = FileUtils.listFiles(new File(outputPath), new AndFileFilter(new PrefixFileFilter(&quot;@&quot;), new SuffixFileFilter(&quot;.docx&quot;), TrueFileFilter.TRUE));\r\n    for(File file : files) { \r\n        System.out.println(file.getAbsolutePath());\r\n    }","title":"List of files starting with a particular letter in java","body":"<p>You could use Apache AndFileFilter (docx files starting with @) :</p>\n<pre><code>Collection&lt;File&gt; files = FileUtils.listFiles(new File(outputPath), new AndFileFilter(new PrefixFileFilter(&quot;@&quot;), new SuffixFileFilter(&quot;.docx&quot;), TrueFileFilter.TRUE));\nfor(File file : files) { \n    System.out.println(file.getAbsolutePath());\n}\n</code></pre>\n"}],"owner":{"account_id":296289,"reputation":949,"user_id":601163,"accept_rate":91,"display_name":"Mojo_Jojo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19172,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":5682025,"answer_count":7,"score":7,"last_activity_date":1691998459,"creation_date":1302899024,"question_id":5681999,"body_markdown":"I&#39;ve got some files in the relative directory (directory the app is running in) starting with &#39;@&#39; and I need to open all of them in java. Show me a way to accomplish it. If it helps, I&#39;m working on netbeans.They&#39;re basically .ser files. So I have to fetch the objects in them","title":"List of files starting with a particular letter in java","body":"<p>I've got some files in the relative directory (directory the app is running in) starting with '@' and I need to open all of them in java. Show me a way to accomplish it. If it helps, I'm working on netbeans.They're basically .ser files. So I have to fetch the objects in them</p>\n"},{"tags":["java","flutter","kotlin","mobile"],"comments":[{"owner":{"account_id":26019001,"reputation":244,"user_id":19726949,"display_name":"Dhruvil Patel"},"score":0,"creation_date":1692011107,"post_id":76897048,"comment_id":135563468,"body_markdown":"Can you please provide me a your Flutter version?","body":"Can you please provide me a your Flutter version?"}],"owner":{"account_id":13126789,"reputation":1,"user_id":9482461,"display_name":"Fatih T&#252;rker"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691998145,"creation_date":1691998145,"question_id":76897048,"body_markdown":"I am working on an old project and these are the errors I encountered, but I couldn&#39;t find a solution. How can I fix this\r\n\r\n**ERROR:**\r\n\r\n```\r\n/C:/Src/flutter/.pub-cache/hosted/pub.dartlang.org/firebase_messaging_web-2.4.4/lib/src/internals.dart:2:1: Error: Error when reading &#39;/C:/Src/flutter/.pub-cache/hosted/pub.dartlang.org/firebase_core-1.24.0/lib/src/internals.dart&#39;: Sistem belirtilen dosyayı bulamıyor.\r\n\r\nexport &#39;package:firebase_core/src/internals.dart&#39; hide guardWebExceptions;\r\n^\r\n/C:/Src/flutter/.pub-cache/hosted/pub.dartlang.org/firebase_messaging_web-2.4.4/lib/src/internals.dart:6:8: Error: Error when reading &#39;/C:/Src/flutter/.pub-cache/hosted/pub.dartlang.org/firebase_core-1.24.0/lib/src/internals.dart&#39;: Sistem belirtilen dosyayı bulamıyor.\r\n\r\nimport &#39;package:firebase_core/src/internals.dart&#39; as internals;\r\n       ^\r\n/C:/Src/flutter/.pub-cache/hosted/pub.dartlang.org/firebase_core-1.24.0/lib/src/firebase_app.dart:18:25: Error: Member not found: &#39;FirebaseAppPlatform.verifyExtends&#39;.\r\n    FirebaseAppPlatform.verifyExtends(_delegate);\r\n                        ^^^^^^^^^^^^^\r\n/C:/Src/flutter/.pub-cache/hosted/pub.dartlang.org/firebase_messaging_web-2.4.4/lib/src/internals.dart:11:20: Error: Method not found: &#39;guardWebExceptions&#39;.\r\n  return internals.guardWebExceptions(\r\n                   ^^^^^^^^^^^^^^^^^^\r\n/C:/Src/flutter/.pub-cache/hosted/pub.dartlang.org/photo_view-0.11.1/lib/src/core/photo_view_gesture_detector.dart:106:29: Error: The argument type &#39;PointerEvent&#39; can&#39;t be assigned to the parameter type &#39;PointerDownEvent&#39;.\r\n - &#39;PointerEvent&#39; is from &#39;package:flutter/src/gestures/events.dart&#39; (&#39;/C:/Src/flutter/packages/flutter/lib/src/gestures/events.dart&#39;).\r\n - &#39;PointerDownEvent&#39; is from &#39;package:flutter/src/gestures/events.dart&#39; (&#39;/C:/Src/flutter/packages/flutter/lib/src/gestures/events.dart&#39;).\r\n    super.addAllowedPointer(event);\r\n```\r\n\r\n**dependencies:**\r\n\r\n```\r\n  shared_preferences: ^2.0.5\r\n  firebase_auth: ^2.0.0\r\n  in_app_purchase: ^0.6.0+1\r\n  uuid: ^3.0.4\r\n  firebase_storage: ^10.2.8\r\n  cloud_firestore: ^3.1.9\r\n  firebase_core: ^1.11.0\r\n  permission_handler: ^7.1.0\r\n  image_picker: ^0.7.4\r\n  agora_rtc_engine: ^4.0.0-rc.3\r\n  audioplayers: ^0.19.0\r\n  flutter_local_notifications: ^5.0.0+4\r\n  firebase_messaging: ^10.0.3\r\n  connectycube_flutter_call_kit: ^0.1.0-dev.1\r\n  flutter_email_sender: ^5.0.0\r\n  all_sensors: ^0.3.1+2\r\n  url_launcher: ^6.0.3\r\n  photo_view: ^0.11.1\r\n  carousel_slider: ^4.0.0-nullsafety.0\r\n  google_nav_bar: ^5.0.3\r\n  expansion_card: ^0.1.0\r\n  google_fonts: ^2.0.0\r\n  get: ^4.1.4\r\n```\r\n\r\nI tried upgrading the versions, it didn&#39;t work, my goal is to get the project running","title":"Incompatibility Issue Between Firebase and Flutter Libraries","body":"<p>I am working on an old project and these are the errors I encountered, but I couldn't find a solution. How can I fix this</p>\n<p><strong>ERROR:</strong></p>\n<pre><code>/C:/Src/flutter/.pub-cache/hosted/pub.dartlang.org/firebase_messaging_web-2.4.4/lib/src/internals.dart:2:1: Error: Error when reading '/C:/Src/flutter/.pub-cache/hosted/pub.dartlang.org/firebase_core-1.24.0/lib/src/internals.dart': Sistem belirtilen dosyayı bulamıyor.\n\nexport 'package:firebase_core/src/internals.dart' hide guardWebExceptions;\n^\n/C:/Src/flutter/.pub-cache/hosted/pub.dartlang.org/firebase_messaging_web-2.4.4/lib/src/internals.dart:6:8: Error: Error when reading '/C:/Src/flutter/.pub-cache/hosted/pub.dartlang.org/firebase_core-1.24.0/lib/src/internals.dart': Sistem belirtilen dosyayı bulamıyor.\n\nimport 'package:firebase_core/src/internals.dart' as internals;\n       ^\n/C:/Src/flutter/.pub-cache/hosted/pub.dartlang.org/firebase_core-1.24.0/lib/src/firebase_app.dart:18:25: Error: Member not found: 'FirebaseAppPlatform.verifyExtends'.\n    FirebaseAppPlatform.verifyExtends(_delegate);\n                        ^^^^^^^^^^^^^\n/C:/Src/flutter/.pub-cache/hosted/pub.dartlang.org/firebase_messaging_web-2.4.4/lib/src/internals.dart:11:20: Error: Method not found: 'guardWebExceptions'.\n  return internals.guardWebExceptions(\n                   ^^^^^^^^^^^^^^^^^^\n/C:/Src/flutter/.pub-cache/hosted/pub.dartlang.org/photo_view-0.11.1/lib/src/core/photo_view_gesture_detector.dart:106:29: Error: The argument type 'PointerEvent' can't be assigned to the parameter type 'PointerDownEvent'.\n - 'PointerEvent' is from 'package:flutter/src/gestures/events.dart' ('/C:/Src/flutter/packages/flutter/lib/src/gestures/events.dart').\n - 'PointerDownEvent' is from 'package:flutter/src/gestures/events.dart' ('/C:/Src/flutter/packages/flutter/lib/src/gestures/events.dart').\n    super.addAllowedPointer(event);\n</code></pre>\n<p><strong>dependencies:</strong></p>\n<pre><code>  shared_preferences: ^2.0.5\n  firebase_auth: ^2.0.0\n  in_app_purchase: ^0.6.0+1\n  uuid: ^3.0.4\n  firebase_storage: ^10.2.8\n  cloud_firestore: ^3.1.9\n  firebase_core: ^1.11.0\n  permission_handler: ^7.1.0\n  image_picker: ^0.7.4\n  agora_rtc_engine: ^4.0.0-rc.3\n  audioplayers: ^0.19.0\n  flutter_local_notifications: ^5.0.0+4\n  firebase_messaging: ^10.0.3\n  connectycube_flutter_call_kit: ^0.1.0-dev.1\n  flutter_email_sender: ^5.0.0\n  all_sensors: ^0.3.1+2\n  url_launcher: ^6.0.3\n  photo_view: ^0.11.1\n  carousel_slider: ^4.0.0-nullsafety.0\n  google_nav_bar: ^5.0.3\n  expansion_card: ^0.1.0\n  google_fonts: ^2.0.0\n  get: ^4.1.4\n</code></pre>\n<p>I tried upgrading the versions, it didn't work, my goal is to get the project running</p>\n"},{"tags":["java","android","scheduled-tasks","interop"],"comments":[{"owner":{"account_id":10993074,"reputation":164,"user_id":8174311,"display_name":"Igmer Rodriguez"},"score":0,"creation_date":1536067336,"post_id":52167332,"comment_id":91284479,"body_markdown":"Build-&gt; clean project","body":"Build-&gt; clean project"},{"owner":{"account_id":6804205,"reputation":1529,"user_id":5720436,"accept_rate":91,"display_name":"Ouissal"},"score":0,"creation_date":1536067381,"post_id":52167332,"comment_id":91284521,"body_markdown":"My app runs, I just want to understand the reason behind the error message.","body":"My app runs, I just want to understand the reason behind the error message."},{"owner":{"account_id":3175248,"reputation":7363,"user_id":5457878,"accept_rate":67,"display_name":"gi097"},"score":0,"creation_date":1536324379,"post_id":52167332,"comment_id":91394473,"body_markdown":"_which caused my phone to get stuck for a while and restart._, does your app access system/root files?","body":"<i>which caused my phone to get stuck for a while and restart.</i>, does your app access system/root files?"},{"owner":{"account_id":6804205,"reputation":1529,"user_id":5720436,"accept_rate":91,"display_name":"Ouissal"},"score":0,"creation_date":1536588657,"post_id":52167332,"comment_id":91466801,"body_markdown":"@GiovanniTerlingen no it doesn&#39;t","body":"@GiovanniTerlingen no it doesn&#39;t"},{"owner":{"account_id":13730636,"reputation":1296,"user_id":9908240,"display_name":"Viral Patel"},"score":0,"creation_date":1536822740,"post_id":52167332,"comment_id":91563874,"body_markdown":"have you check gradle version is latest?","body":"have you check gradle version is latest?"},{"owner":{"account_id":6804205,"reputation":1529,"user_id":5720436,"accept_rate":91,"display_name":"Ouissal"},"score":0,"creation_date":1536831349,"post_id":52167332,"comment_id":91568593,"body_markdown":"@ViralPatel Yes, it&#39;s the latest","body":"@ViralPatel Yes, it&#39;s the latest"}],"answers":[{"tags":[],"owner":{"account_id":3175248,"reputation":7363,"user_id":5457878,"accept_rate":67,"display_name":"gi097"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536324998,"creation_date":1536324998,"answer_id":52223066,"question_id":52167332,"body_markdown":"&gt; does this mean that my application is probably not properly structured and got killed in the middle of an important process?\r\n\r\nWell, I think there is not much to worry since you mention that your app is running fine. I think we should not search the problem in your app. Since it runs fine, it should be coded fine as well.\r\n\r\n&gt; Android studio was trying to install and run the app\r\n\r\nThere we go! This is purely speculation, but I think Android Studio was the problem. When you are developing an app, every time you make changes, Android Studio will restart the app. Which is the so called _instant run_: https://developer.android.com/studio/run/#ir-limitations\r\n\r\nI developed lots of native apps and I never enjoyed instant run. In rare cases, it malformed my application. UI didn&#39;t reload properly and got several issues. So whenever I develop mobile applications now, I just disable instant run. \r\n\r\nI am mentioning instant run, since it might have broken your application while it was busy doing some I/O operations. This is not bad from your side, but I would recommend you to test and develop without using instant run for a while. Without instant run, you are guaranteed to install a full compiled application in your phone. This will or should also prevent you this issue in the future.\r\n","title":"Unknown failure (cmd:Failure calling service package: Broken pipe (32))","body":"<blockquote>\n  <p>does this mean that my application is probably not properly structured and got killed in the middle of an important process?</p>\n</blockquote>\n\n<p>Well, I think there is not much to worry since you mention that your app is running fine. I think we should not search the problem in your app. Since it runs fine, it should be coded fine as well.</p>\n\n<blockquote>\n  <p>Android studio was trying to install and run the app</p>\n</blockquote>\n\n<p>There we go! This is purely speculation, but I think Android Studio was the problem. When you are developing an app, every time you make changes, Android Studio will restart the app. Which is the so called <em>instant run</em>: <a href=\"https://developer.android.com/studio/run/#ir-limitations\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/run/#ir-limitations</a></p>\n\n<p>I developed lots of native apps and I never enjoyed instant run. In rare cases, it malformed my application. UI didn't reload properly and got several issues. So whenever I develop mobile applications now, I just disable instant run. </p>\n\n<p>I am mentioning instant run, since it might have broken your application while it was busy doing some I/O operations. This is not bad from your side, but I would recommend you to test and develop without using instant run for a while. Without instant run, you are guaranteed to install a full compiled application in your phone. This will or should also prevent you this issue in the future.</p>\n"},{"tags":[],"owner":{"account_id":14218047,"reputation":11740,"user_id":10271334,"display_name":"Jeel Vankhede"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":true,"score":3,"last_activity_date":1536871446,"creation_date":1536869367,"answer_id":52321115,"question_id":52167332,"body_markdown":"Just for some clarification :\r\n\r\n&gt; *What exactly the Broken Pipe error means ?*\r\n&gt; \r\n&gt; It means that when a process requests an output to pipe or socket,\r\n&gt; which was closed by peer.\r\n\r\nSo, according to error here in **Android Studio** is that **Gradle Deamon** was trying to execute an adb command to install *(push)* latest generate `.apk` file *(writing application package through socket using tcpip protocol)* but connection gets lost by adb to device so that Gradle failed to execute command.\r\n\r\nSometimes, loose/poor connection to device causes this kind of issue. \r\n\r\n(In some of the cases, updated `incremental dex` doesn&#39;t gets written to device, and `.apk` becomes corrupted due to outdated `dex` &amp; so that it warns to reinstall apk by removing old one.)\r\n\r\nNow, if you failed to grab **logcat** from Android Studio &#39;Logcat&#39; window then you can still get bug report/logcat using this command in terminal\r\n\r\n    adb bugreport &#39;path to store bug report(optional)&#39;\r\n\r\nor use \r\n\r\n    adb logcat\r\n\r\nto see log of device\r\n\r\nFor grabbing detailed or filtered log: [link][1]\r\n\r\n\r\nThat has nothing to do with your query: *(does this mean that my application is probably not properly structured and got killed in the middle of an important process?)*\r\n\r\nSo, everything will be perfectly fine once you re-run *(reinstall)* your `.apk`\r\n\r\n\r\n  [1]: https://developer.android.com/studio/command-line/logcat#Syntax","title":"Unknown failure (cmd:Failure calling service package: Broken pipe (32))","body":"<p>Just for some clarification :</p>\n\n<blockquote>\n  <p><em>What exactly the Broken Pipe error means ?</em></p>\n  \n  <p>It means that when a process requests an output to pipe or socket,\n  which was closed by peer.</p>\n</blockquote>\n\n<p>So, according to error here in <strong>Android Studio</strong> is that <strong>Gradle Deamon</strong> was trying to execute an adb command to install <em>(push)</em> latest generate <code>.apk</code> file <em>(writing application package through socket using tcpip protocol)</em> but connection gets lost by adb to device so that Gradle failed to execute command.</p>\n\n<p>Sometimes, loose/poor connection to device causes this kind of issue. </p>\n\n<p>(In some of the cases, updated <code>incremental dex</code> doesn't gets written to device, and <code>.apk</code> becomes corrupted due to outdated <code>dex</code> &amp; so that it warns to reinstall apk by removing old one.)</p>\n\n<p>Now, if you failed to grab <strong>logcat</strong> from Android Studio 'Logcat' window then you can still get bug report/logcat using this command in terminal</p>\n\n<pre><code>adb bugreport 'path to store bug report(optional)'\n</code></pre>\n\n<p>or use </p>\n\n<pre><code>adb logcat\n</code></pre>\n\n<p>to see log of device</p>\n\n<p>For grabbing detailed or filtered log: <a href=\"https://developer.android.com/studio/command-line/logcat#Syntax\" rel=\"nofollow noreferrer\">link</a></p>\n\n<p>That has nothing to do with your query: <em>(does this mean that my application is probably not properly structured and got killed in the middle of an important process?)</em></p>\n\n<p>So, everything will be perfectly fine once you re-run <em>(reinstall)</em> your <code>.apk</code></p>\n"},{"tags":[],"owner":{"account_id":25357260,"reputation":81,"user_id":19173185,"display_name":"Farial Mahmod"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660631014,"creation_date":1660631014,"answer_id":73369590,"question_id":52167332,"body_markdown":"I had the same problem. This solution worked for me :\r\n\r\n 1. Upgrading plugins &amp; Flutter SDK\r\n 2. Cleaned and re-build the project \r\n 3. Cold Booting the emulator\r\n\r\nThe app properly runs now and that error is gone . Answering in case it might help someone else .","title":"Unknown failure (cmd:Failure calling service package: Broken pipe (32))","body":"<p>I had the same problem. This solution worked for me :</p>\n<ol>\n<li>Upgrading plugins &amp; Flutter SDK</li>\n<li>Cleaned and re-build the project</li>\n<li>Cold Booting the emulator</li>\n</ol>\n<p>The app properly runs now and that error is gone . Answering in case it might help someone else .</p>\n"},{"tags":[],"owner":{"account_id":24980182,"reputation":1,"user_id":18842476,"display_name":"小杨不吃草"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669288344,"creation_date":1669283843,"answer_id":74558793,"question_id":52167332,"body_markdown":"All `\\` on your paths should be replaced by `/`.","title":"Unknown failure (cmd:Failure calling service package: Broken pipe (32))","body":"<p>All <code>\\</code> on your paths should be replaced by <code>/</code>.</p>\n"},{"tags":[],"owner":{"account_id":15235548,"reputation":113,"user_id":10993327,"display_name":"Mark S. Khalil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691998050,"creation_date":1691998050,"answer_id":76897031,"question_id":52167332,"body_markdown":"In my case it was failure on the Emulator device so the solution for me was to \r\n1-Restart the device you are running on \r\n2-try to run again \r\nPS : maybe you should clean and rebuild the project ","title":"Unknown failure (cmd:Failure calling service package: Broken pipe (32))","body":"<p>In my case it was failure on the Emulator device so the solution for me was to\n1-Restart the device you are running on\n2-try to run again\nPS : maybe you should clean and rebuild the project</p>\n"}],"owner":{"account_id":6804205,"reputation":1529,"user_id":5720436,"accept_rate":91,"display_name":"Ouissal"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15734,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":52321115,"answer_count":5,"score":9,"last_activity_date":1691998050,"creation_date":1536067214,"question_id":52167332,"body_markdown":"I was trying to run my application on my Android device using Android Studio, it runs fine otherwise but in this case some data was being deleted from my mobile phone and while that process wasn&#39;t done yet, Android studio was trying to install and run the app which caused my phone to get stuck for a while and restart.\n\nSo I would like to know if there is a way to get the full stack trace of the error and does this mean that my application is **probably not** properly structured and got killed in the middle of an important process?\n\nThank you.\n\n\nThis is the error I got at that time:\n\n&gt; Installation failed with message Failed to finalize session : Unknown\n&gt; failure (cmd:Failure calling service package: Broken pipe (32)). \n&gt;\n&gt;It is\n&gt; possible that this issue is resolved by uninstalling an existing\n&gt; version of the apk if it is present, and then re-installing.\n\n\n\n-----\n\n**PS** : I&#39;m not asking about how to solve this error because my app runs, I want to understand what might have caused it.","title":"Unknown failure (cmd:Failure calling service package: Broken pipe (32))","body":"<p>I was trying to run my application on my Android device using Android Studio, it runs fine otherwise but in this case some data was being deleted from my mobile phone and while that process wasn't done yet, Android studio was trying to install and run the app which caused my phone to get stuck for a while and restart.</p>\n<p>So I would like to know if there is a way to get the full stack trace of the error and does this mean that my application is <strong>probably not</strong> properly structured and got killed in the middle of an important process?</p>\n<p>Thank you.</p>\n<p>This is the error I got at that time:</p>\n<blockquote>\n<p>Installation failed with message Failed to finalize session : Unknown\nfailure (cmd:Failure calling service package: Broken pipe (32)).</p>\n<p>It is\npossible that this issue is resolved by uninstalling an existing\nversion of the apk if it is present, and then re-installing.</p>\n</blockquote>\n<hr />\n<p><strong>PS</strong> : I'm not asking about how to solve this error because my app runs, I want to understand what might have caused it.</p>\n"},{"tags":["java","json","jolt"],"owner":{"account_id":29190271,"reputation":25,"user_id":22362539,"display_name":"Mehdi Abniki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691998002,"creation_date":1691998002,"question_id":76897030,"body_markdown":"As next step from the last [question](https://stackoverflow.com/questions/76888279/jolt-spect-improve/76888344#76888344) , I have an special issue on Jolt\r\n\r\nBy consider the input schema as:\r\n```\r\n{\r\n  &quot;iban&quot;: &quot;IR970130100000000000001399&quot;,\r\n  &quot;paymentCode&quot;: &quot;124&quot;\r\n}\r\n```\r\n\r\nand the spec as:\r\n\r\n```\r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;default&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;parameters&quot;: [\r\n        {\r\n          &quot;name&quot;: &quot;ACCOUNT&quot;,\r\n          &quot;value&quot;: &quot;convertedIBAN&quot;\r\n        },\r\n        {\r\n          &quot;name&quot;: &quot;RQUD&quot;,\r\n          &quot;value&quot;: &quot;4f2ba174-690f-4d41-9bcc-b958789fe6d7&quot;\r\n        },\r\n        {\r\n          &quot;name&quot;: &quot;TYPEX&quot;,\r\n          &quot;value&quot;: &quot;1&quot;\r\n        },\r\n        {\r\n          &quot;name&quot;: &quot;BIC&quot;,\r\n          &quot;value&quot;: &quot;1&quot;\r\n        }\r\n     ]\r\n    }\r\n  },\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;parameters&quot;: { &quot;*&quot;: &quot;&amp;1&quot; },\r\n      &quot;*&quot;: {\r\n        &quot;$&quot;: &quot;parameters[#2].name&quot;,\r\n        &quot;@&quot;: &quot;parameters[#2].value&quot;\r\n      },\r\n      &quot;#RequestID&quot;: &quot;requestID&quot;,\r\n      &quot;#Reader&quot;: &quot;callType&quot;,\r\n      &quot;#ASCII&quot;: &quot;encoding&quot;\r\n    }\r\n  },\r\n  {\r\n    &quot;operation&quot;: &quot;modify-overwrite-beta&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;parameters&quot;: {\r\n        &quot;*&quot;: {\r\n          &quot;n&quot;: &quot;=toUpper(@(1,name))&quot;,\r\n          &quot;name&quot;: &quot;=concat(&#39;P_&#39;,@(1,n))&quot;\r\n        }\r\n      }\r\n    }\r\n  },\r\n  {\r\n    &quot;operation&quot;: &quot;remove&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;parameters&quot;: {\r\n        &quot;*&quot;: {\r\n          &quot;n&quot;: &quot;&quot;\r\n        }\r\n      }\r\n    }\r\n  }\r\n]\r\n```\r\n\r\nI have the below output:\r\n\r\n```\r\n{\r\n  &quot;requestID&quot; : &quot;RequestID&quot;,\r\n  &quot;callType&quot; : &quot;Reader&quot;,\r\n  &quot;encoding&quot; : &quot;ASCII&quot;,\r\n  &quot;parameters&quot; : [ {\r\n    &quot;name&quot; : &quot;P_IBAN&quot;,\r\n    &quot;value&quot; : &quot;IR970130100000000000001399&quot;\r\n  }, {\r\n    &quot;name&quot; : &quot;P_PAYMENTCODE&quot;,\r\n    &quot;value&quot; : &quot;124&quot;\r\n  }, {\r\n    &quot;name&quot; : &quot;P_ACCOUNT&quot;,\r\n    &quot;value&quot; : &quot;convertedIBAN&quot;\r\n  }, {\r\n    &quot;name&quot; : &quot;P_RQUD&quot;,\r\n    &quot;value&quot; : &quot;4f2ba174-690f-4d41-9bcc-b958789fe6d7&quot;\r\n  }, {\r\n    &quot;name&quot; : &quot;P_TYPEX&quot;,\r\n    &quot;value&quot; : &quot;1&quot;\r\n  }, {\r\n    &quot;name&quot; : &quot;P_BIC&quot;,\r\n    &quot;value&quot; : &quot;1&quot;\r\n  } ]\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\nIn next, I need to change the value of P_Account(as is &#39;convertedIBAN&#39;) to a new one, but this value should be\r\nretrieve from DB by the value of iban from input schema(which is &#39;IR970130100000000000001399&#39;).\r\nTo do so, I think I should have a Jolt method(in Jolt core or somewhere) to do this job.\r\nI have an idea same as what&#39;s going on with &quot;=toUpper...&quot; and &quot;=concat...&quot;, with the name such as &quot;=convert...&quot; or &quot;=fetch...) but go through the DB communication in background\r\n","title":"Jolt server side data manipulation/convertion","body":"<p>As next step from the last <a href=\"https://stackoverflow.com/questions/76888279/jolt-spect-improve/76888344#76888344\">question</a> , I have an special issue on Jolt</p>\n<p>By consider the input schema as:</p>\n<pre><code>{\n  &quot;iban&quot;: &quot;IR970130100000000000001399&quot;,\n  &quot;paymentCode&quot;: &quot;124&quot;\n}\n</code></pre>\n<p>and the spec as:</p>\n<pre><code>[\n  {\n    &quot;operation&quot;: &quot;default&quot;,\n    &quot;spec&quot;: {\n      &quot;parameters&quot;: [\n        {\n          &quot;name&quot;: &quot;ACCOUNT&quot;,\n          &quot;value&quot;: &quot;convertedIBAN&quot;\n        },\n        {\n          &quot;name&quot;: &quot;RQUD&quot;,\n          &quot;value&quot;: &quot;4f2ba174-690f-4d41-9bcc-b958789fe6d7&quot;\n        },\n        {\n          &quot;name&quot;: &quot;TYPEX&quot;,\n          &quot;value&quot;: &quot;1&quot;\n        },\n        {\n          &quot;name&quot;: &quot;BIC&quot;,\n          &quot;value&quot;: &quot;1&quot;\n        }\n     ]\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;parameters&quot;: { &quot;*&quot;: &quot;&amp;1&quot; },\n      &quot;*&quot;: {\n        &quot;$&quot;: &quot;parameters[#2].name&quot;,\n        &quot;@&quot;: &quot;parameters[#2].value&quot;\n      },\n      &quot;#RequestID&quot;: &quot;requestID&quot;,\n      &quot;#Reader&quot;: &quot;callType&quot;,\n      &quot;#ASCII&quot;: &quot;encoding&quot;\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;modify-overwrite-beta&quot;,\n    &quot;spec&quot;: {\n      &quot;parameters&quot;: {\n        &quot;*&quot;: {\n          &quot;n&quot;: &quot;=toUpper(@(1,name))&quot;,\n          &quot;name&quot;: &quot;=concat('P_',@(1,n))&quot;\n        }\n      }\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;remove&quot;,\n    &quot;spec&quot;: {\n      &quot;parameters&quot;: {\n        &quot;*&quot;: {\n          &quot;n&quot;: &quot;&quot;\n        }\n      }\n    }\n  }\n]\n</code></pre>\n<p>I have the below output:</p>\n<pre><code>{\n  &quot;requestID&quot; : &quot;RequestID&quot;,\n  &quot;callType&quot; : &quot;Reader&quot;,\n  &quot;encoding&quot; : &quot;ASCII&quot;,\n  &quot;parameters&quot; : [ {\n    &quot;name&quot; : &quot;P_IBAN&quot;,\n    &quot;value&quot; : &quot;IR970130100000000000001399&quot;\n  }, {\n    &quot;name&quot; : &quot;P_PAYMENTCODE&quot;,\n    &quot;value&quot; : &quot;124&quot;\n  }, {\n    &quot;name&quot; : &quot;P_ACCOUNT&quot;,\n    &quot;value&quot; : &quot;convertedIBAN&quot;\n  }, {\n    &quot;name&quot; : &quot;P_RQUD&quot;,\n    &quot;value&quot; : &quot;4f2ba174-690f-4d41-9bcc-b958789fe6d7&quot;\n  }, {\n    &quot;name&quot; : &quot;P_TYPEX&quot;,\n    &quot;value&quot; : &quot;1&quot;\n  }, {\n    &quot;name&quot; : &quot;P_BIC&quot;,\n    &quot;value&quot; : &quot;1&quot;\n  } ]\n}\n\n</code></pre>\n<p>In next, I need to change the value of P_Account(as is 'convertedIBAN') to a new one, but this value should be\nretrieve from DB by the value of iban from input schema(which is 'IR970130100000000000001399').\nTo do so, I think I should have a Jolt method(in Jolt core or somewhere) to do this job.\nI have an idea same as what's going on with &quot;=toUpper...&quot; and &quot;=concat...&quot;, with the name such as &quot;=convert...&quot; or &quot;=fetch...) but go through the DB communication in background</p>\n"},{"tags":["java","casting","type-conversion","implicit-conversion","narrowing"],"answers":[{"comments":[{"owner":{"account_id":19104610,"reputation":341,"user_id":13952043,"display_name":"mohsin ahmed"},"score":0,"creation_date":1595058022,"post_id":62965909,"comment_id":111348164,"body_markdown":"I didn&#39;t understand what you meant by _final variables_?","body":"I didn&#39;t understand what you meant by <i>final variables</i>?"},{"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"score":2,"creation_date":1595058397,"post_id":62965909,"comment_id":111348233,"body_markdown":"there is a special keyword `final` in Java, which denotes a variable that cannot be reassigned. See my second example","body":"there is a special keyword <code>final</code> in Java, which denotes a variable that cannot be reassigned. See my second example"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1595058520,"post_id":62965909,"comment_id":111348267,"body_markdown":"Actually, declaring `n1` as `final` is not sufficient to make `n1/2` a compile time constant.  The `n1` variable also needs to be `static`.","body":"Actually, declaring <code>n1</code> as <code>final</code> is not sufficient to make <code>n1&#47;2</code> a compile time constant.  The <code>n1</code> variable also needs to be <code>static</code>."}],"tags":[],"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"comment_count":3,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1595059339,"creation_date":1595057671,"answer_id":62965909,"question_id":62965817,"body_markdown":"This is described in https://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.2\r\n\r\n&gt; In addition, if the expression is a constant expression (&#167;15.28) of type byte, short, char, or int:\r\n&gt;\r\n&gt; - A narrowing primitive conversion may be used if the type of the variable is byte, short, or char, and the value of the constant expression is representable in the type of the variable.\r\n\r\nToo large a result:\r\n```\r\nbyte byteValue = 100000000/2;\r\n\r\nerror: incompatible types: possible lossy conversion from int to byte\r\n```\r\n\r\nfinal variable as an operand:\r\n```   \r\nfinal byte n1 = 4;\r\nbyte value = n1/2;\r\n```","title":"How does implicit conversion work in Java?","body":"<p>This is described in <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.2\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.2</a></p>\n<blockquote>\n<p>In addition, if the expression is a constant expression (§15.28) of type byte, short, char, or int:</p>\n<ul>\n<li>A narrowing primitive conversion may be used if the type of the variable is byte, short, or char, and the value of the constant expression is representable in the type of the variable.</li>\n</ul>\n</blockquote>\n<p>Too large a result:</p>\n<pre><code>byte byteValue = 100000000/2;\n\nerror: incompatible types: possible lossy conversion from int to byte\n</code></pre>\n<p>final variable as an operand:</p>\n<pre><code>final byte n1 = 4;\nbyte value = n1/2;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"comment_count":0,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1691997764,"creation_date":1595059516,"answer_id":62966154,"question_id":62965817,"body_markdown":"## Explanation ##\r\n\r\nLet&#39;s take a look at your code and some modified examples:\r\n\r\n    // Example 1\r\n    byte byteValue = 2;\r\n\r\n    // Example 2\r\n    byte byteValue = 4/2;\r\n\r\n    // Example 3\r\n    byte byteValue = 2000;\r\n\r\n    // Example 4\r\n    byte byteValue = 500/2;\r\n\r\n    // Example 5\r\n    int n1 = 4;\r\n    byte byteValue = n1/2;\r\n\r\n----------\r\n## Non-lossy conversion ##\r\n\r\nYou will get the mentioned compile-time error for *Example 3*, *Example 4* and *Example 5*.\r\n\r\nFirst of all, the simple math you have for Example 1 to 4 is executed at compile-time. So Java will compute `500 / 2` at compile-time and replace the code with basically `byte byteValue = 250;`.\r\n\r\nValid values for bytes in Java are `-128` to `127`. So any value outside of that range can not just be taken as a `byte` but requires explicit conversion. Because of that, *Example 1* and *Example 2* pass.\r\n\r\n----------\r\n## Lossy narrowing conversion ##\r\n\r\nTo understand why the rest fails, we have to study the Java Language Specification (JLS), more specifically chapter [5.1.3. Narrowing Primitive Conversion](https://docs.oracle.com/javase/specs/jls/se14/html/jls-5.html#jls-5.1.3) and [5.2. Assignment Contexts](https://docs.oracle.com/javase/specs/jls/se14/html/jls-5.html#jls-5.2).\r\n\r\nIt says that a conversion from `int` to `byte` (if it is outside of the range of `byte`) is a **narrowing primitive conversion** and that it **may lose information** (for obvious reasons). It continues by explaining how the conversion is done:\r\n\r\n&gt; A narrowing conversion of a signed integer to an integral type T simply discards all but the n lowest order bits, where n is the number of bits used to represent type T. In addition to a possible loss of information about the magnitude of the numeric value, this may cause the sign of the resulting value to differ from the sign of the input value.\r\n\r\nFrom the second chapter, **assignments** with narrow conversions are allowed if the value is a **constant expression**.\r\n\r\n&gt;  In addition, if the expression is a constant expression (&#167;15.29) of type `byte`, short, char, or int:\r\n&gt; \r\n&gt; A narrowing primitive conversion may be used if the variable is of type `byte`, short, or char, and the value of the constant expression is representable in the type of the variable.\r\n\r\nLong story short, a narrowing conversion that may lose information (because the value exceeds the range) has to explicitly be announced to Java. Java will not just do it for you without you forcing it. That is done by a cast.\r\n\r\nSo for example\r\n\r\n    byte byteValue = (byte) (500 / 2);\r\n\r\nresulting in the value `-6`.\r\n\r\n----------\r\n## Constant expression ##\r\n\r\nYour last example is very interesting:\r\n\r\n    int n1 = 4;\r\n    byte byteValue = n1/2;\r\n\r\nAlthough this does not exceed the range, Java still treats it as lossy narrowing conversion. Why is that the case?\r\n\r\nWell, Java can not ensure 100% that `n1` is not changed last second before `n1/2` is executed. Therefore, it would have to consider all of your code to see if maybe someone accesses `n1` sneaky and changes it. Java does not do this kind of analysis at compile-time.\r\n\r\nSo if you can tell Java that `n1` stays `4` and can actually never change, then this will actually compile. In this specific case, it would be enough to make it `final`. So with\r\n\r\n    final int n1 = 4;\r\n    byte byteValue = n1/2;\r\n\r\nit will actually compile because Java knows that `n1` stays `4` and can not change anymore. Hence it can compute `n1/2` at compile-time to `2` and replace the code with basically `byte byteValue = 2;`, which is in range.\r\n\r\nSo you made `n1 / 2` a **constant expression**, as explained before in [5.2. Assignment Contexts](https://docs.oracle.com/javase/specs/jls/se14/html/jls-5.html#jls-5.2).\r\n\r\nYou can check the details what it needs to have a constant expression in [15.29. Constant Expressions](https://docs.oracle.com/javase/specs/jls/se14/html/jls-15.html#jls-15.29). Basically everything simple that can easily be computed in place without any method invocations or other fancy stuff.","title":"How does implicit conversion work in Java?","body":"<h2>Explanation</h2>\n<p>Let's take a look at your code and some modified examples:</p>\n<pre><code>// Example 1\nbyte byteValue = 2;\n\n// Example 2\nbyte byteValue = 4/2;\n\n// Example 3\nbyte byteValue = 2000;\n\n// Example 4\nbyte byteValue = 500/2;\n\n// Example 5\nint n1 = 4;\nbyte byteValue = n1/2;\n</code></pre>\n<hr />\n<h2>Non-lossy conversion</h2>\n<p>You will get the mentioned compile-time error for <em>Example 3</em>, <em>Example 4</em> and <em>Example 5</em>.</p>\n<p>First of all, the simple math you have for Example 1 to 4 is executed at compile-time. So Java will compute <code>500 / 2</code> at compile-time and replace the code with basically <code>byte byteValue = 250;</code>.</p>\n<p>Valid values for bytes in Java are <code>-128</code> to <code>127</code>. So any value outside of that range can not just be taken as a <code>byte</code> but requires explicit conversion. Because of that, <em>Example 1</em> and <em>Example 2</em> pass.</p>\n<hr />\n<h2>Lossy narrowing conversion</h2>\n<p>To understand why the rest fails, we have to study the Java Language Specification (JLS), more specifically chapter <a href=\"https://docs.oracle.com/javase/specs/jls/se14/html/jls-5.html#jls-5.1.3\" rel=\"nofollow noreferrer\">5.1.3. Narrowing Primitive Conversion</a> and <a href=\"https://docs.oracle.com/javase/specs/jls/se14/html/jls-5.html#jls-5.2\" rel=\"nofollow noreferrer\">5.2. Assignment Contexts</a>.</p>\n<p>It says that a conversion from <code>int</code> to <code>byte</code> (if it is outside of the range of <code>byte</code>) is a <strong>narrowing primitive conversion</strong> and that it <strong>may lose information</strong> (for obvious reasons). It continues by explaining how the conversion is done:</p>\n<blockquote>\n<p>A narrowing conversion of a signed integer to an integral type T simply discards all but the n lowest order bits, where n is the number of bits used to represent type T. In addition to a possible loss of information about the magnitude of the numeric value, this may cause the sign of the resulting value to differ from the sign of the input value.</p>\n</blockquote>\n<p>From the second chapter, <strong>assignments</strong> with narrow conversions are allowed if the value is a <strong>constant expression</strong>.</p>\n<blockquote>\n<p>In addition, if the expression is a constant expression (§15.29) of type <code>byte</code>, short, char, or int:</p>\n<p>A narrowing primitive conversion may be used if the variable is of type <code>byte</code>, short, or char, and the value of the constant expression is representable in the type of the variable.</p>\n</blockquote>\n<p>Long story short, a narrowing conversion that may lose information (because the value exceeds the range) has to explicitly be announced to Java. Java will not just do it for you without you forcing it. That is done by a cast.</p>\n<p>So for example</p>\n<pre><code>byte byteValue = (byte) (500 / 2);\n</code></pre>\n<p>resulting in the value <code>-6</code>.</p>\n<hr />\n<h2>Constant expression</h2>\n<p>Your last example is very interesting:</p>\n<pre><code>int n1 = 4;\nbyte byteValue = n1/2;\n</code></pre>\n<p>Although this does not exceed the range, Java still treats it as lossy narrowing conversion. Why is that the case?</p>\n<p>Well, Java can not ensure 100% that <code>n1</code> is not changed last second before <code>n1/2</code> is executed. Therefore, it would have to consider all of your code to see if maybe someone accesses <code>n1</code> sneaky and changes it. Java does not do this kind of analysis at compile-time.</p>\n<p>So if you can tell Java that <code>n1</code> stays <code>4</code> and can actually never change, then this will actually compile. In this specific case, it would be enough to make it <code>final</code>. So with</p>\n<pre><code>final int n1 = 4;\nbyte byteValue = n1/2;\n</code></pre>\n<p>it will actually compile because Java knows that <code>n1</code> stays <code>4</code> and can not change anymore. Hence it can compute <code>n1/2</code> at compile-time to <code>2</code> and replace the code with basically <code>byte byteValue = 2;</code>, which is in range.</p>\n<p>So you made <code>n1 / 2</code> a <strong>constant expression</strong>, as explained before in <a href=\"https://docs.oracle.com/javase/specs/jls/se14/html/jls-5.html#jls-5.2\" rel=\"nofollow noreferrer\">5.2. Assignment Contexts</a>.</p>\n<p>You can check the details what it needs to have a constant expression in <a href=\"https://docs.oracle.com/javase/specs/jls/se14/html/jls-15.html#jls-15.29\" rel=\"nofollow noreferrer\">15.29. Constant Expressions</a>. Basically everything simple that can easily be computed in place without any method invocations or other fancy stuff.</p>\n"},{"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1595059629,"creation_date":1595059629,"answer_id":62966168,"question_id":62965817,"body_markdown":"This is documented in [&#167;5.2][1] of the Java Language Specification. That section talks about what conversions are allowed in an assignment context, like the one in `byte byteValue = n1/2;`.\r\n\r\n&gt; Assignment contexts allow the use of one of the following:\r\n&gt;\r\n&gt; - ...\r\n&gt; - ... (conversions irrelevant to the question)\r\n&gt;\r\n&gt; In addition, if the expression is a **constant expression** (&#167;15.28) of type `byte`, `short`, `char`, or `int`:\r\n&gt;\r\n&gt; - A narrowing primitive conversion may be used if the type of the variable is `byte`, `short`, or `char`, **and the value of the constant expression is representable in the type of the variable.**\r\n\r\nThe conversion from `int` to `byte` is a kind of narrowing primitive conversion.\r\n\r\nIn these cases, the expression on the right hand side are both constant expressions, that is, an expression which the compiler can evaluate at compile time:\r\n\r\n    byte byteValue = 2;\r\n    byte byteValue = 4/2;\r\n\r\nSo the conversion is applied and the code compiles.\r\n\r\nYou can see exactly what constitutes a constant expression in [&#167;15.28][2]. And you will see that if an expression has a non-`final` variable like in `n1/2`, it is not a constant expression. The compiler doesn&#39;t want to analyse/run/trace your code to find out what exactly is the value of `n1`. Therefore, the conversion is not available and the code doesn&#39;t compile.\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se8/html/jls-5.html#jls-5.2\r\n  [2]: https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.28","title":"How does implicit conversion work in Java?","body":"<p>This is documented in <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-5.html#jls-5.2\" rel=\"nofollow noreferrer\">§5.2</a> of the Java Language Specification. That section talks about what conversions are allowed in an assignment context, like the one in <code>byte byteValue = n1/2;</code>.</p>\n<blockquote>\n<p>Assignment contexts allow the use of one of the following:</p>\n<ul>\n<li>...</li>\n<li>... (conversions irrelevant to the question)</li>\n</ul>\n<p>In addition, if the expression is a <strong>constant expression</strong> (§15.28) of type <code>byte</code>, <code>short</code>, <code>char</code>, or <code>int</code>:</p>\n<ul>\n<li>A narrowing primitive conversion may be used if the type of the variable is <code>byte</code>, <code>short</code>, or <code>char</code>, <strong>and the value of the constant expression is representable in the type of the variable.</strong></li>\n</ul>\n</blockquote>\n<p>The conversion from <code>int</code> to <code>byte</code> is a kind of narrowing primitive conversion.</p>\n<p>In these cases, the expression on the right hand side are both constant expressions, that is, an expression which the compiler can evaluate at compile time:</p>\n<pre><code>byte byteValue = 2;\nbyte byteValue = 4/2;\n</code></pre>\n<p>So the conversion is applied and the code compiles.</p>\n<p>You can see exactly what constitutes a constant expression in <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.28\" rel=\"nofollow noreferrer\">§15.28</a>. And you will see that if an expression has a non-<code>final</code> variable like in <code>n1/2</code>, it is not a constant expression. The compiler doesn't want to analyse/run/trace your code to find out what exactly is the value of <code>n1</code>. Therefore, the conversion is not available and the code doesn't compile.</p>\n"},{"tags":[],"owner":{"account_id":5268074,"reputation":17816,"user_id":4207306,"display_name":"Eklavya"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1595061384,"creation_date":1595060458,"answer_id":62966296,"question_id":62965817,"body_markdown":"From [doc][1] :\r\n\r\n&gt; In addition, if the expression is a **constant expression** (&#167;15.28) of\r\n&gt; type byte, short, char, or int:\r\n&gt; \r\n&gt; A narrowing primitive conversion may be used if the type of the variable is byte, short, or char, and **the value of the constant**\r\n&gt; **expression is representable in the type of the variable.**\r\n\r\nSo for your first two case value is constant that why is it&#39;s value is representable as the variable type `byte`.\r\n\r\n    byte byteValue = 2;\r\n    byte byteValue = 4/2;\r\nAnd for later two case for `n1`, here `n1/2` is not a `constant expression`, so conversion is not available. So value of `n1/2` is not representable in the type of the variable `byte`.\r\n\r\n    int n1 = 4;\r\n    byte value = n1/2;\r\n    \r\n    byte n1 = 4;\r\n    byte value = n1/2;\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.2\r\n","title":"How does implicit conversion work in Java?","body":"<p>From <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.2\" rel=\"nofollow noreferrer\">doc</a> :</p>\n<blockquote>\n<p>In addition, if the expression is a <strong>constant expression</strong> (§15.28) of\ntype byte, short, char, or int:</p>\n<p>A narrowing primitive conversion may be used if the type of the variable is byte, short, or char, and <strong>the value of the constant</strong>\n<strong>expression is representable in the type of the variable.</strong></p>\n</blockquote>\n<p>So for your first two case value is constant that why is it's value is representable as the variable type <code>byte</code>.</p>\n<pre><code>byte byteValue = 2;\nbyte byteValue = 4/2;\n</code></pre>\n<p>And for later two case for <code>n1</code>, here <code>n1/2</code> is not a <code>constant expression</code>, so conversion is not available. So value of <code>n1/2</code> is not representable in the type of the variable <code>byte</code>.</p>\n<pre><code>int n1 = 4;\nbyte value = n1/2;\n\nbyte n1 = 4;\nbyte value = n1/2;\n</code></pre>\n"}],"owner":{"account_id":19104610,"reputation":341,"user_id":13952043,"display_name":"mohsin ahmed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2303,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"answer_count":4,"score":34,"last_activity_date":1691997764,"creation_date":1595056943,"question_id":62965817,"body_markdown":"I know that in Java Integer literals are *int* by default,so if I write something like this\r\n\r\n    byte byteValue = 2;\r\nJava auto converts the literal value **2**(which is an int by default) to byte.\r\nAnd the same thing works if  I write\r\n\r\n    byte byteValue = 4/2;\r\nThe RHS is evaluated as an int and implicitly converted to a byte.\r\n\r\n**But why doesn&#39;t implicit conversion happen in the below two cases?**\r\n    \r\n\r\n    int n1 = 4;\r\n    byte value = n1/2;\r\nOR in this\r\n\r\n    byte n1 = 4;\r\n    byte value = n1/2;\r\nI know that the RHS of both these examples are evaluated as an *int*. But why doesn&#39;t Java convert it to a byte implicitly like it did in the first two cases.Does implicit conversion to smaller data type happen only if there are literals?","title":"How does implicit conversion work in Java?","body":"<p>I know that in Java Integer literals are <em>int</em> by default,so if I write something like this</p>\n<pre><code>byte byteValue = 2;\n</code></pre>\n<p>Java auto converts the literal value <strong>2</strong>(which is an int by default) to byte.\nAnd the same thing works if  I write</p>\n<pre><code>byte byteValue = 4/2;\n</code></pre>\n<p>The RHS is evaluated as an int and implicitly converted to a byte.</p>\n<p><strong>But why doesn't implicit conversion happen in the below two cases?</strong></p>\n<pre><code>int n1 = 4;\nbyte value = n1/2;\n</code></pre>\n<p>OR in this</p>\n<pre><code>byte n1 = 4;\nbyte value = n1/2;\n</code></pre>\n<p>I know that the RHS of both these examples are evaluated as an <em>int</em>. But why doesn't Java convert it to a byte implicitly like it did in the first two cases.Does implicit conversion to smaller data type happen only if there are literals?</p>\n"},{"tags":["java","chatbot"],"answers":[{"tags":[],"owner":{"account_id":215914,"reputation":1347,"user_id":470835,"accept_rate":0,"display_name":"Saurabh Saxena"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1319158322,"creation_date":1319158322,"answer_id":7843922,"question_id":7843109,"body_markdown":"This is a NLP task, and for building a system like this require lot of R&amp;D. You can start by building a set of question that might be asked. Analyzing the questions and coming up with word patterns for each type of question. The next step would be to transform the English sentence into some form of formal structure( maybe SQL or lambda calculus). The backend DB should have the data stored in it which can be queried by the formal language.\r\n\r\nThe main problem lies in converting the English sentence to a formal language. You can start with regex and progress to make it more complex by checking Part of Speech, Syntactic structure of input sentences. Check out NLTK package for doing NLP tasks.","title":"Best way to build a chat bot","body":"<p>This is a NLP task, and for building a system like this require lot of R&amp;D. You can start by building a set of question that might be asked. Analyzing the questions and coming up with word patterns for each type of question. The next step would be to transform the English sentence into some form of formal structure( maybe SQL or lambda calculus). The backend DB should have the data stored in it which can be queried by the formal language.</p>\n\n<p>The main problem lies in converting the English sentence to a formal language. You can start with regex and progress to make it more complex by checking Part of Speech, Syntactic structure of input sentences. Check out NLTK package for doing NLP tasks.</p>\n"},{"tags":[],"owner":{"account_id":744762,"reputation":1560,"user_id":720655,"display_name":"pelumi"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1475244882,"creation_date":1475244882,"answer_id":39793603,"question_id":7843109,"body_markdown":"Typically, chatbots within a narrow field like yours typically rely on 2 important concepts:\r\n\r\n- **Intent detection**: identifying what the user is requesting\r\n- **Entity Extraction**: Identifying entites in the users request. For instance in a flight reservation bot examples of entities are the source, destination and travel dates. In a weather bot the entities can be the desired date for the weather or the location where the weather is required.\r\n\r\nFor your specific type of chatbot, which has a definite goal of retrieving list of completed tasks and retrieving the last completed task. To develop this, you need to define the intents of interest. From you examples we can easily define 2 intents:\r\n\r\n - `COMPLETED_TASKS_REQUEST`\r\n - `LAST_COMPLETED_TASK`\r\n\r\nBased on this 2 intents, there is really no entity to be detected. You simply query your service API to retrieve the requested information in each scenario.\r\n\r\nThe next phase will be to train a classifier to identify the intents. This can be done by getting some sample sentences for each request type and training over those.\r\n\r\nThe flow is then reduced to the following:\r\n\r\n1. Bot receives message\r\n2. Bot identifies intent\r\n3. Bot extracts relevant entities (if required)\r\n4. If intent is recognised bot queries data source to retrieve answer else bot complains it doesn&#39;t understand the request. Alternatively if bot needs an entity to complete request, bot asks user to provide the information and completes its task. This is usually called a slot based approach. You can read more on how a [Dialog Manager][1] works.\r\n\r\nNote that if you&#39;re not into Machine Learning or NLP you can easily train an intent detector on platforms like wit.ai or api.ai and the entity classification part of this task will be reduced to simple `http` API requests. Though when building genuinely complicated or sophisticated bots it is almost always better to build your own models since you can have full control and can handle edge cases better. Platforms like wit.ai or api.ai generally need to perform well across multiple fields while you can focus on making yours an expert in task management.\r\n\r\nHope this helps.\r\n\r\nPS: To make your bot more interesting we can add one more intent like retrieving the status of a specific task given the id. E.g a user can ask what is the status of task 54. This intent can be called:\r\n`TASK_STATUS_REQUEST`. In this example, the intent has an entity which is the id of the requested task so you will need to extract that :)\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Dialog_manager","title":"Best way to build a chat bot","body":"<p>Typically, chatbots within a narrow field like yours typically rely on 2 important concepts:</p>\n\n<ul>\n<li><strong>Intent detection</strong>: identifying what the user is requesting</li>\n<li><strong>Entity Extraction</strong>: Identifying entites in the users request. For instance in a flight reservation bot examples of entities are the source, destination and travel dates. In a weather bot the entities can be the desired date for the weather or the location where the weather is required.</li>\n</ul>\n\n<p>For your specific type of chatbot, which has a definite goal of retrieving list of completed tasks and retrieving the last completed task. To develop this, you need to define the intents of interest. From you examples we can easily define 2 intents:</p>\n\n<ul>\n<li><code>COMPLETED_TASKS_REQUEST</code></li>\n<li><code>LAST_COMPLETED_TASK</code></li>\n</ul>\n\n<p>Based on this 2 intents, there is really no entity to be detected. You simply query your service API to retrieve the requested information in each scenario.</p>\n\n<p>The next phase will be to train a classifier to identify the intents. This can be done by getting some sample sentences for each request type and training over those.</p>\n\n<p>The flow is then reduced to the following:</p>\n\n<ol>\n<li>Bot receives message</li>\n<li>Bot identifies intent</li>\n<li>Bot extracts relevant entities (if required)</li>\n<li>If intent is recognised bot queries data source to retrieve answer else bot complains it doesn't understand the request. Alternatively if bot needs an entity to complete request, bot asks user to provide the information and completes its task. This is usually called a slot based approach. You can read more on how a <a href=\"https://en.wikipedia.org/wiki/Dialog_manager\" rel=\"noreferrer\">Dialog Manager</a> works.</li>\n</ol>\n\n<p>Note that if you're not into Machine Learning or NLP you can easily train an intent detector on platforms like wit.ai or api.ai and the entity classification part of this task will be reduced to simple <code>http</code> API requests. Though when building genuinely complicated or sophisticated bots it is almost always better to build your own models since you can have full control and can handle edge cases better. Platforms like wit.ai or api.ai generally need to perform well across multiple fields while you can focus on making yours an expert in task management.</p>\n\n<p>Hope this helps.</p>\n\n<p>PS: To make your bot more interesting we can add one more intent like retrieving the status of a specific task given the id. E.g a user can ask what is the status of task 54. This intent can be called:\n<code>TASK_STATUS_REQUEST</code>. In this example, the intent has an entity which is the id of the requested task so you will need to extract that :)</p>\n"},{"comments":[{"owner":{"account_id":1183468,"reputation":3711,"user_id":1157879,"accept_rate":80,"display_name":"Nikhil"},"score":0,"creation_date":1479791272,"post_id":40731438,"comment_id":68694777,"body_markdown":"While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - [From Review](/review/low-quality-posts/14362572)","body":"While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - <a href=\"/review/low-quality-posts/14362572\">From Review</a>"},{"owner":{"account_id":1474136,"reputation":1018,"user_id":1384978,"accept_rate":88,"display_name":"Jerry"},"score":0,"creation_date":1479792832,"post_id":40731438,"comment_id":68695277,"body_markdown":"Thanks for the feedback, just updated the comment, hope that would be helpful.","body":"Thanks for the feedback, just updated the comment, hope that would be helpful."}],"tags":[],"owner":{"account_id":1474136,"reputation":1018,"user_id":1384978,"accept_rate":88,"display_name":"Jerry"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1479792787,"creation_date":1479771554,"answer_id":40731438,"question_id":7843109,"body_markdown":"On top of chat bot library, you can integration instant messaging library like Hyphenate to enable chat bot for mobile and web communication.\r\n\r\nHere&#39;re few simple steps:\r\n\r\n1. Hyphenate Console: Create a chatbot entity by sign up an account at Hyphenate console (console.hyphenate.io) to give your chatbot an identity and a voice by creating Hyphenate IM account for the bot.\r\n2. Platform SDK: Integrate your app (iOS, Android, or Web) with Hyphenate IM services and open source UI library.\r\n3. Webhooks (event callback): Set up Hyphenate webhooks to receive the messages from the user that push to your developer backend, then process it in with your chatbot AI library.\r\n4. Backend REST API: push chatbot&#39;s messages to the user via REST APIs provided by Hyphenate from your developer backend. \r\n5. Hooray! Webhooks + backend REST API = relay messages between chatbot and user.\r\n\r\nhttp://docs.hyphenate.io/docs/chat-bot-integration","title":"Best way to build a chat bot","body":"<p>On top of chat bot library, you can integration instant messaging library like Hyphenate to enable chat bot for mobile and web communication.</p>\n\n<p>Here're few simple steps:</p>\n\n<ol>\n<li>Hyphenate Console: Create a chatbot entity by sign up an account at Hyphenate console (console.hyphenate.io) to give your chatbot an identity and a voice by creating Hyphenate IM account for the bot.</li>\n<li>Platform SDK: Integrate your app (iOS, Android, or Web) with Hyphenate IM services and open source UI library.</li>\n<li>Webhooks (event callback): Set up Hyphenate webhooks to receive the messages from the user that push to your developer backend, then process it in with your chatbot AI library.</li>\n<li>Backend REST API: push chatbot's messages to the user via REST APIs provided by Hyphenate from your developer backend. </li>\n<li>Hooray! Webhooks + backend REST API = relay messages between chatbot and user.</li>\n</ol>\n\n<p><a href=\"http://docs.hyphenate.io/docs/chat-bot-integration\" rel=\"nofollow noreferrer\">http://docs.hyphenate.io/docs/chat-bot-integration</a></p>\n"},{"tags":[],"owner":{"account_id":1964600,"reputation":976,"user_id":1765193,"display_name":"Ravi K"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1557649747,"creation_date":1557649747,"answer_id":56097441,"question_id":7843109,"body_markdown":"Not sure which language you are familiar with, but in Java you can do it using Apache OpenNLP library. This is a very good &amp; easy to use library for natural language processing. To give very basic approach, you can break sentences &amp; tokenize them into words. Then you can lemmatize words to get them to basic word forms. Then you can classify or categorize them using categorizer with proper training data. better the training, smarter the chat bot. Also you can select categories to make chat bot have conversation in more engaging way. [Here is a very good article with detailed example &amp; demo][1].\r\n\r\n\r\n  [1]: http://itsallbinary.com/create-your-own-chat-bot-in-java-using-apache-opennlp-artificial-intelligence-natural-language-processing/","title":"Best way to build a chat bot","body":"<p>Not sure which language you are familiar with, but in Java you can do it using Apache OpenNLP library. This is a very good &amp; easy to use library for natural language processing. To give very basic approach, you can break sentences &amp; tokenize them into words. Then you can lemmatize words to get them to basic word forms. Then you can classify or categorize them using categorizer with proper training data. better the training, smarter the chat bot. Also you can select categories to make chat bot have conversation in more engaging way. <a href=\"http://itsallbinary.com/create-your-own-chat-bot-in-java-using-apache-opennlp-artificial-intelligence-natural-language-processing/\" rel=\"nofollow noreferrer\">Here is a very good article with detailed example &amp; demo</a>.</p>\n"},{"tags":[],"owner":{"account_id":14789129,"reputation":108,"user_id":10680564,"display_name":"Prabhanath"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1568632339,"creation_date":1557650265,"answer_id":56097500,"question_id":7843109,"body_markdown":"You can use Microsoft NLP frameworks which are pretty straight forward and easy to use for beginners. Also was earlier know as LUIS, it&#39;s one of the Cognitive services that Microsoft provides.\r\nIt&#39;s basically a combination of API calls.","title":"Best way to build a chat bot","body":"<p>You can use Microsoft NLP frameworks which are pretty straight forward and easy to use for beginners. Also was earlier know as LUIS, it's one of the Cognitive services that Microsoft provides.\nIt's basically a combination of API calls.</p>\n"}],"owner":{"account_id":408586,"reputation":5227,"user_id":779348,"accept_rate":82,"display_name":"Sap"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4326,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":7843922,"answer_count":5,"score":4,"last_activity_date":1691997352,"creation_date":1319150440,"question_id":7843109,"body_markdown":"What framework can I start with to create a simple chatbot? the focus of the bot is very limited. \r\n\r\nOne can compare it with SIRI on iPhone. I want to create a simple &quot;answering&quot; chat which will answer questions like &quot;give me all completed tasks so far&quot; or &quot;show me last completed task&quot; or &quot;show|list|give me my pending tasks&quot; etc. After user asks the question I want to present the data to the user\r\n\r\nAs of now I am creating a regex dictionary of possible questions and if there is no match then I do a lucene search to find the nearest match.\r\nAm I doing it right?\r\n","title":"Best way to build a chat bot","body":"<p>What framework can I start with to create a simple chatbot? the focus of the bot is very limited.</p>\n<p>One can compare it with SIRI on iPhone. I want to create a simple &quot;answering&quot; chat which will answer questions like &quot;give me all completed tasks so far&quot; or &quot;show me last completed task&quot; or &quot;show|list|give me my pending tasks&quot; etc. After user asks the question I want to present the data to the user</p>\n<p>As of now I am creating a regex dictionary of possible questions and if there is no match then I do a lucene search to find the nearest match.\nAm I doing it right?</p>\n"},{"tags":["java","spring-boot","spring-mvc","migration","struts-1"],"comments":[{"owner":{"account_id":6357629,"reputation":1740,"user_id":4934324,"accept_rate":50,"display_name":"roookeee"},"score":1,"creation_date":1563983754,"post_id":57186714,"comment_id":100884014,"body_markdown":"I would argue that sharing the session seems like the smoothest way as you can migrate endpoint by endpoint and have your reverse proxy figure out on a per request basis whether to ask the new or old system. Once an endpoint has been migrated you can remove it in the old application. Having both struts and spring in the same application screams weird behaviour, hard to debug issues and all sorts of other compat issues. From my point of view having two applications has the least risk as I have experienced this approach first hand and don&#39;t see as many downsides compared to the other approaches","body":"I would argue that sharing the session seems like the smoothest way as you can migrate endpoint by endpoint and have your reverse proxy figure out on a per request basis whether to ask the new or old system. Once an endpoint has been migrated you can remove it in the old application. Having both struts and spring in the same application screams weird behaviour, hard to debug issues and all sorts of other compat issues. From my point of view having two applications has the least risk as I have experienced this approach first hand and don&#39;t see as many downsides compared to the other approaches"},{"owner":{"account_id":1275953,"reputation":26182,"user_id":1231230,"accept_rate":76,"display_name":"Ankur Singhal"},"score":1,"creation_date":1563983992,"post_id":57186714,"comment_id":100884132,"body_markdown":"@roookeee Right, bang on. Just exploring on public views, for all the scenarios, edge cases. sharing session means lot of code movement, session is currently manipulates at service layer, action and JSP layer.For every fetch/updates , call needs to be changed","body":"@roookeee Right, bang on. Just exploring on public views, for all the scenarios, edge cases. sharing session means lot of code movement, session is currently manipulates at service layer, action and JSP layer.For every fetch/updates , call needs to be changed"},{"owner":{"account_id":6357629,"reputation":1740,"user_id":4934324,"accept_rate":50,"display_name":"roookeee"},"score":0,"creation_date":1563984366,"post_id":57186714,"comment_id":100884325,"body_markdown":"Duh, changing the session in the jsp is indeed a problem and I do feel your pain :) Can&#39;t help you with your other approaches though but I know it&#39;s hard to even have two spring application contexts next to each other so struts + spring should be even worse. Better pay the performance cost instead of losing your sanity","body":"Duh, changing the session in the jsp is indeed a problem and I do feel your pain :) Can&#39;t help you with your other approaches though but I know it&#39;s hard to even have two spring application contexts next to each other so struts + spring should be even worse. Better pay the performance cost instead of losing your sanity"}],"answers":[{"comments":[{"owner":{"account_id":1275953,"reputation":26182,"user_id":1231230,"accept_rate":76,"display_name":"Ankur Singhal"},"score":0,"creation_date":1563986012,"post_id":57187439,"comment_id":100885147,"body_markdown":"equally interesting was your answer :) Thanks for giving so much time to my question and explaining every pros &amp; cons.","body":"equally interesting was your answer :) Thanks for giving so much time to my question and explaining every pros &amp; cons."}],"tags":[],"owner":{"account_id":6815604,"reputation":793,"user_id":5244415,"accept_rate":100,"display_name":"Estevao Santiago"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1563987221,"creation_date":1563985445,"answer_id":57187439,"question_id":57186714,"body_markdown":"My friend, it is so good to read your question! I lived the same hell you are about to enter using the very same stack... \r\n\r\n**Approach 3**\r\n\r\nHonestly I would never try it. The reason would be simple, we wouldn&#39;t want the risk of having old project and new project mixing with each other. Libraries from the legacy are very likely to conflict with libraries from the new project (same libraries, different versions) and you would then need to either refactor old code to allow use of the new version, or change libraries completely.\r\n\r\nWhen migrating, you will want to keep your work on the legacy code to a minimal, to none if possible.\r\n\r\n**Approach 2** \r\n\r\nThe perfect one, but as you said, it won&#39;t pay the bills. If you have the cash to work on it, then great, go for it, otherwise, you are for...\r\n\r\n**Approach 1**\r\n\r\nStrangulation, that&#39;s what worked for me. Start with a working shared login and then move to small functionalities. Think of a tree, you start by removing some small branches, them you move to nodes, until you are able to cut everything. As you remove the small functionalities, they should be made available on the new product (obviously you can&#39;t disrupt service otherwise you would go with approach 2).\r\n\r\nMore specifically, my suggestion is:\r\n\r\n*Back-end*\r\n\r\n1) Get the login working. In my case, legacy was all about session, but we didn&#39;t want that on the new product. So we implemented a method on the legacy code during login, which would call Oauth from the new product and store in the database the login information, just as you mentioned. The reason for this is on the front-end part of my reply.\r\n\r\n2) Define how your legacy and back-end will live together and the resources to have both of them working (ram and CPU to be more precise).\r\n\r\n2.1) If by any chance, your legacy runs on tomcat with custom libraries, you might have problems running your new product in a different context. If that happens, my suggestions, go for Docker (just get a close look on memory usage and make sure to limit them on your container(s)).\r\n\r\n3) Start very small, replace functionalities related to creating new stuff which hold little to no logic (small crud, such as users, etc) then move to things that have mid-sized logic or that are really ugly on the legacy product and are used on day-to-day basis by your end-users.\r\n\r\n4) All of the rest (by the time I left the company, we were not in this phase yet, so I can&#39;t provide much info on that).\r\n\r\n5) Don&#39;t treat this project as a migration only. Get everyone on the page that this a new product. Old code should not be copied and pasted, it should be understood and improved using best practices. \r\n\r\n5.1) Unit and integration tests as soon as possible, if your legacy have them, GREAT, compare results to make sure your refactoring didn&#39;t break anything or changed the expected outputs. THIS IS ESSENTIAL.\r\n\r\n*Front-end*\r\n\r\n1) Once you have the &quot;unified&quot; login working, you will be able to load the pages from the new product as if they were part of the legacy (you could even add a frame on the jsp of the legacy that will load your angular page, we did it and it works like a charm). \r\n\r\n1.1) Not cute from a UI/UX perspective to have old and new pages, but it will add value to end-user and provide you with feedback from them once you release the pieces to production. Since your legacy now have access to the token (or whatever auth method you are using, that will be feasible).\r\n\r\n2) Define the styles from the beginning. Don&#39;t get the job of UI/UX to later (like my team did). The sooner you figure out things such as colors, design, icons, etc, the less time you will waste on meetings that should discuss the release and its impact but are wasted discussing &quot;this is not the color I wanted&quot; or similar. Honestly, get UX defined before UI and make that crystal clear.\r\n\r\n3) Design it as if you were designing a micro-services front-end. You might take a lot of time to get to that point, but if and when you do, the migration from the new architecture to micro-services will be much less traumatic.\r\n\r\n**Culture**\r\n\r\nI don&#39;t know the culture of your workplace, but mine was far from perfect, old people with old thinking into their comfort zones. \r\n\r\nGet to change the workplace culture to adapt to what we currently have on the marketplace, old people sometimes tend to resist change, specially when they are technical and do not update on what&#39;s new out there. It will make much easier to replace people when they leave the company (because people do move on).\r\n\r\nI heard they are still trying to run Scrum (as I mentioned I am no longer there), so there was a huge headache for developers defining What and How the migration of functionalities will take place.\r\n\r\nThose are my two cents, hope they help you in some way, and I wish you the best of luck.","title":"Struts 1 to Spring Migration - Strategy","body":"<p>My friend, it is so good to read your question! I lived the same hell you are about to enter using the very same stack... </p>\n\n<p><strong>Approach 3</strong></p>\n\n<p>Honestly I would never try it. The reason would be simple, we wouldn't want the risk of having old project and new project mixing with each other. Libraries from the legacy are very likely to conflict with libraries from the new project (same libraries, different versions) and you would then need to either refactor old code to allow use of the new version, or change libraries completely.</p>\n\n<p>When migrating, you will want to keep your work on the legacy code to a minimal, to none if possible.</p>\n\n<p><strong>Approach 2</strong> </p>\n\n<p>The perfect one, but as you said, it won't pay the bills. If you have the cash to work on it, then great, go for it, otherwise, you are for...</p>\n\n<p><strong>Approach 1</strong></p>\n\n<p>Strangulation, that's what worked for me. Start with a working shared login and then move to small functionalities. Think of a tree, you start by removing some small branches, them you move to nodes, until you are able to cut everything. As you remove the small functionalities, they should be made available on the new product (obviously you can't disrupt service otherwise you would go with approach 2).</p>\n\n<p>More specifically, my suggestion is:</p>\n\n<p><em>Back-end</em></p>\n\n<p>1) Get the login working. In my case, legacy was all about session, but we didn't want that on the new product. So we implemented a method on the legacy code during login, which would call Oauth from the new product and store in the database the login information, just as you mentioned. The reason for this is on the front-end part of my reply.</p>\n\n<p>2) Define how your legacy and back-end will live together and the resources to have both of them working (ram and CPU to be more precise).</p>\n\n<p>2.1) If by any chance, your legacy runs on tomcat with custom libraries, you might have problems running your new product in a different context. If that happens, my suggestions, go for Docker (just get a close look on memory usage and make sure to limit them on your container(s)).</p>\n\n<p>3) Start very small, replace functionalities related to creating new stuff which hold little to no logic (small crud, such as users, etc) then move to things that have mid-sized logic or that are really ugly on the legacy product and are used on day-to-day basis by your end-users.</p>\n\n<p>4) All of the rest (by the time I left the company, we were not in this phase yet, so I can't provide much info on that).</p>\n\n<p>5) Don't treat this project as a migration only. Get everyone on the page that this a new product. Old code should not be copied and pasted, it should be understood and improved using best practices. </p>\n\n<p>5.1) Unit and integration tests as soon as possible, if your legacy have them, GREAT, compare results to make sure your refactoring didn't break anything or changed the expected outputs. THIS IS ESSENTIAL.</p>\n\n<p><em>Front-end</em></p>\n\n<p>1) Once you have the \"unified\" login working, you will be able to load the pages from the new product as if they were part of the legacy (you could even add a frame on the jsp of the legacy that will load your angular page, we did it and it works like a charm). </p>\n\n<p>1.1) Not cute from a UI/UX perspective to have old and new pages, but it will add value to end-user and provide you with feedback from them once you release the pieces to production. Since your legacy now have access to the token (or whatever auth method you are using, that will be feasible).</p>\n\n<p>2) Define the styles from the beginning. Don't get the job of UI/UX to later (like my team did). The sooner you figure out things such as colors, design, icons, etc, the less time you will waste on meetings that should discuss the release and its impact but are wasted discussing \"this is not the color I wanted\" or similar. Honestly, get UX defined before UI and make that crystal clear.</p>\n\n<p>3) Design it as if you were designing a micro-services front-end. You might take a lot of time to get to that point, but if and when you do, the migration from the new architecture to micro-services will be much less traumatic.</p>\n\n<p><strong>Culture</strong></p>\n\n<p>I don't know the culture of your workplace, but mine was far from perfect, old people with old thinking into their comfort zones. </p>\n\n<p>Get to change the workplace culture to adapt to what we currently have on the marketplace, old people sometimes tend to resist change, specially when they are technical and do not update on what's new out there. It will make much easier to replace people when they leave the company (because people do move on).</p>\n\n<p>I heard they are still trying to run Scrum (as I mentioned I am no longer there), so there was a huge headache for developers defining What and How the migration of functionalities will take place.</p>\n\n<p>Those are my two cents, hope they help you in some way, and I wish you the best of luck.</p>\n"},{"tags":[],"owner":{"account_id":1550597,"reputation":8924,"user_id":1443084,"display_name":"Shailendra"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1564058748,"creation_date":1564058748,"answer_id":57202321,"question_id":57186714,"body_markdown":"Since option 2 is not considerable because of business feasibility  let’s talk about the other two.\r\n\r\n**Approach 1** \r\n\r\nIf you push your session state as far back as appropriate datastore ( Redis/Memcache) and use a transparent mechanism to get the \r\nsession data and update any changes made by app server then you would not need to change any code interacting with session.\r\nAny call to get session object from any piece of code in your application is delegated to container and it is container which \r\nprovides you with the object ( usually a mapping of sessionid and object is maintained). For container such as Tomcat I am aware of \r\nsession manager which can be replaced by just putting the jar in the container and pointing the config to the backend store. I have used \r\nmemcache based session manager successfully in production for a high traffic internet application.\r\nCheck this for Redis (https://github.com/pivotalsoftware/session-managers) and Redisson Tomcat manager (https://github.com/redisson/redisson/tree/master/redisson-tomcat), Memcache (https://github.com/magro/memcached-session-manager) \r\nUsing this will tranparently fetch/store session in respective datastore without changing any session related code in your application.\r\n\r\nSo the request with session id in cookie can land up on any of the tomcats ( hosting struts or Spring MVC app) and get the session \r\nfetched from the backend store, made changes upon and tranparently stored back.\r\n\r\n**Approach 3** \r\n\r\nIs technically possible ( they are after all different servlets with different configuration responding to different url patterns) \r\nbut opens a lots of problems areas in terms of \r\ndependency jars conflicts. But if you freeze the library versions of both the framework during the migration and somehow don&#39;t get any \r\nconflict with a certain versions of your mix then it can be worth trying as eventually the struts library and it&#39;s dependencies will go away.\r\n\r\nAs for the Angular part - you can still still have the user info in the session and rest of the stateful interaction will need to be designed\r\nin a series of stateless ( stateless on the middle tier as eventually you will need some state  - just that it will be pushed to the database) interactions.\r\n","title":"Struts 1 to Spring Migration - Strategy","body":"<p>Since option 2 is not considerable because of business feasibility  let’s talk about the other two.</p>\n\n<p><strong>Approach 1</strong> </p>\n\n<p>If you push your session state as far back as appropriate datastore ( Redis/Memcache) and use a transparent mechanism to get the \nsession data and update any changes made by app server then you would not need to change any code interacting with session.\nAny call to get session object from any piece of code in your application is delegated to container and it is container which \nprovides you with the object ( usually a mapping of sessionid and object is maintained). For container such as Tomcat I am aware of \nsession manager which can be replaced by just putting the jar in the container and pointing the config to the backend store. I have used \nmemcache based session manager successfully in production for a high traffic internet application.\nCheck this for Redis (<a href=\"https://github.com/pivotalsoftware/session-managers\" rel=\"nofollow noreferrer\">https://github.com/pivotalsoftware/session-managers</a>) and Redisson Tomcat manager (<a href=\"https://github.com/redisson/redisson/tree/master/redisson-tomcat\" rel=\"nofollow noreferrer\">https://github.com/redisson/redisson/tree/master/redisson-tomcat</a>), Memcache (<a href=\"https://github.com/magro/memcached-session-manager\" rel=\"nofollow noreferrer\">https://github.com/magro/memcached-session-manager</a>) \nUsing this will tranparently fetch/store session in respective datastore without changing any session related code in your application.</p>\n\n<p>So the request with session id in cookie can land up on any of the tomcats ( hosting struts or Spring MVC app) and get the session \nfetched from the backend store, made changes upon and tranparently stored back.</p>\n\n<p><strong>Approach 3</strong> </p>\n\n<p>Is technically possible ( they are after all different servlets with different configuration responding to different url patterns) \nbut opens a lots of problems areas in terms of \ndependency jars conflicts. But if you freeze the library versions of both the framework during the migration and somehow don't get any \nconflict with a certain versions of your mix then it can be worth trying as eventually the struts library and it's dependencies will go away.</p>\n\n<p>As for the Angular part - you can still still have the user info in the session and rest of the stateful interaction will need to be designed\nin a series of stateless ( stateless on the middle tier as eventually you will need some state  - just that it will be pushed to the database) interactions.</p>\n"},{"tags":[],"owner":{"account_id":87230,"reputation":36826,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691996672,"creation_date":1691995900,"answer_id":76896848,"question_id":57186714,"body_markdown":"Since my situation was having a framework that is built on top of struts, I chose **Approach 3** so that work can go on while I start putting in Spring-isms to the app.  This allowed incremental modernization of the application without throwing the baby with the bath water.\r\n\r\nI&#39;ll try to put as much information as I can as there were many things that were done.\r\n\r\n# Initial integration so we can get the Application Context\r\n\r\n1. Add `org.springframework:spring-context` and `org.springframework:spring-web` to your dependencies\r\n\r\n2. Create your context configuration class (I am presuming the use of the annotation based configuration not XML).  I am also assuming your Spring beans will be defined in the same package.\r\n```\r\n@Configuration\r\n@ComponentScan\r\npublic class MyContextConfig {\r\n}\r\n```\r\n\r\n2. in `web.xml` you need to add the Spring web context and request listeners.  These will make the ApplicationContext available to the ServletApplicationContext\r\n\r\n```xml\r\n  &lt;context-param&gt;\r\n    &lt;param-name&gt;contextClass&lt;/param-name&gt;\r\n    &lt;param-value&gt;org.springframework.web.context.support.AnnotationConfigWebApplicationContext&lt;/param-value&gt;\r\n  &lt;/context-param&gt;\r\n\r\n  &lt;context-param&gt;\r\n    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n    &lt;param-value&gt;myapp.spring.MyContextConfig&lt;/param-value&gt;\r\n  &lt;/context-param&gt;\r\n\r\n  &lt;listener&gt;\r\n    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\r\n  &lt;/listener&gt;\r\n\r\n  &lt;listener&gt;\r\n    &lt;listener-class&gt;org.springframework.web.context.request.RequestContextListener&lt;/listener-class&gt;\r\n  &lt;/listener&gt;\r\n```\r\n\r\n3. To get the application context you use from the `ServletContext` use the following \r\n\r\n```\r\norg.springframework.web.context.support.WebApplicationContextUtils\r\n  .getRequiredWebApplicationContext(servletContext);\r\n```\r\n\r\n4. To get the application context inside a JSP, the JSP engine provides `application` as the `ServletContext` i.e.\r\n\r\n```\r\norg.springframework.web.context.support.WebApplicationContextUtils\r\n  .getRequiredWebApplicationContext(application);\r\n```\r\n\r\nAt this point you now have Spring with your Struts app and the JSPs and can take advantage of the dependency injection mechanism.\r\n\r\n# Datasource integration\r\n\r\nOne of the first things you&#39;d probably try to provide Spring is your datasource so assuming your Struts app is using the data source provided by the JEE container.  In which case add `org.springframework:spring-jdbc` to your dependencies then\r\n\r\nIn the MyContextConfig add the following\r\n\r\n```\r\n@Bean\r\nDataSource dataSource() throws NamingException {\r\n\r\n  final var jndiTemplate = new JndiTemplate();\r\n  final var ds = jndiTemplate.lookup(&quot;java:comp/env/jdbc/MyDB&quot;,\r\n    DataSource.class);\r\n  // the TransactionAwareDataSourceProxy allows the datasource to work with\r\n  // Spring managed transactions.  So it gives a bit of interoperability.\r\n  // Spring components like JpaTransactionManager will be aware of this\r\n  // class and pull out the actual data source if needed.\r\n  return new TransactionAwareDataSourceProxy(ds);\r\n}\r\n```\r\n\r\n# Actions as Components\r\n\r\nAt this point you may want to have dependency injection for your `Action` classes to do that you&#39;d have to set up a `RequestProcessor`\r\n\r\n```\r\npublic SpringRequestProcessor extends RequestProcessor {\r\n  private ApplicationContext applicationContext;\r\n  @Override\r\n  public void init(ActionServlet servlet, ModuleConfig moduleConfig) \r\n    throws ServletException {\r\n\r\n    super.init(servlet, moduleConfig);\r\n    applicationContext = WebApplicationContextUtils\r\n     .getRequiredWebApplicationContext(servlet.getServletContext());\r\n  }\r\n\r\n  @Override\r\n  protected Action processActionCreate(\r\n      final HttpServletRequest request,\r\n      final HttpServletResponse response,\r\n      final ActionMapping mapping)\r\n      throws IOException {\r\n    final var className = mapping.getType();\r\n    final var fromSpring = getInstanceFromSpring(className);\r\n    return fromSpring.ifPresentOrElse(\r\n      action -&gt;{\r\n        action.setServlet(servlet); \r\n        return action;\r\n      },\r\n      () -&gt; super.processActionCreate(request, response, mapping);\r\n    }\r\n  }\r\n  @SupressWarnings(&quot;unchecked&quot;)\r\n  private Optional&lt;Action&gt; getInstanceFromSpring(String className) {\r\n\r\n    try {\r\n      final Class&lt;? extends Action&gt; controllerClass =\r\n          (Class&lt;? extends Action&gt;) Class.forName(className);\r\n      return Optional.of(applicationContext.getBean(controllerClass));\r\n    } catch (final NoSuchBeanDefinitionException e) {\r\n      return Optional.empty();\r\n    } catch (final ClassNotFoundException e) {\r\n      throw new ServletException(e);\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThe `struts-config.xml` should then specify the processor class in it&#39;s `controller` element\r\n\r\n```xml\r\n&lt;controller contentType=&quot;text/html;charset=UTF-8&quot;\r\n  locale=&quot;true&quot;\r\n  nocache=&quot;true&quot;\r\n  processorClass=&quot;my.SpringRequestProcessor&quot;\r\n/&gt;\r\n```\r\n# The rabbit hole...\r\nFrom here the rabbit hole may eventually bring you to use spring-data-jpa in which case you&#39;d have to set up quite a number of things including the `JpaTransactionManager` and maybe wanting to ensure all requests are transactional that is managed by Spring.  You&#39;d have to add that as an override to `RequestProcessor.processActionPerform`.  I didn&#39;t include that because setting up the JPA is not trivial.\r\n\r\nHowever, with this approach the capabilities can be slowly added to the legacy app with a modern dependency injection framework.  For example the legacy system had it&#39;s own SMTP and data source management but we swapped it with JPA and Spring Mail (which allowed us to use TLS on email)\r\n\r\nYou also leverage your existing staff and skills with Struts since the changes to Struts are in fact minimal.","title":"Struts 1 to Spring Migration - Strategy","body":"<p>Since my situation was having a framework that is built on top of struts, I chose <strong>Approach 3</strong> so that work can go on while I start putting in Spring-isms to the app.  This allowed incremental modernization of the application without throwing the baby with the bath water.</p>\n<p>I'll try to put as much information as I can as there were many things that were done.</p>\n<h1>Initial integration so we can get the Application Context</h1>\n<ol>\n<li><p>Add <code>org.springframework:spring-context</code> and <code>org.springframework:spring-web</code> to your dependencies</p>\n</li>\n<li><p>Create your context configuration class (I am presuming the use of the annotation based configuration not XML).  I am also assuming your Spring beans will be defined in the same package.</p>\n</li>\n</ol>\n<pre><code>@Configuration\n@ComponentScan\npublic class MyContextConfig {\n}\n</code></pre>\n<ol start=\"2\">\n<li>in <code>web.xml</code> you need to add the Spring web context and request listeners.  These will make the ApplicationContext available to the ServletApplicationContext</li>\n</ol>\n<pre class=\"lang-xml prettyprint-override\"><code>  &lt;context-param&gt;\n    &lt;param-name&gt;contextClass&lt;/param-name&gt;\n    &lt;param-value&gt;org.springframework.web.context.support.AnnotationConfigWebApplicationContext&lt;/param-value&gt;\n  &lt;/context-param&gt;\n\n  &lt;context-param&gt;\n    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n    &lt;param-value&gt;myapp.spring.MyContextConfig&lt;/param-value&gt;\n  &lt;/context-param&gt;\n\n  &lt;listener&gt;\n    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n  &lt;/listener&gt;\n\n  &lt;listener&gt;\n    &lt;listener-class&gt;org.springframework.web.context.request.RequestContextListener&lt;/listener-class&gt;\n  &lt;/listener&gt;\n</code></pre>\n<ol start=\"3\">\n<li>To get the application context you use from the <code>ServletContext</code> use the following</li>\n</ol>\n<pre><code>org.springframework.web.context.support.WebApplicationContextUtils\n  .getRequiredWebApplicationContext(servletContext);\n</code></pre>\n<ol start=\"4\">\n<li>To get the application context inside a JSP, the JSP engine provides <code>application</code> as the <code>ServletContext</code> i.e.</li>\n</ol>\n<pre><code>org.springframework.web.context.support.WebApplicationContextUtils\n  .getRequiredWebApplicationContext(application);\n</code></pre>\n<p>At this point you now have Spring with your Struts app and the JSPs and can take advantage of the dependency injection mechanism.</p>\n<h1>Datasource integration</h1>\n<p>One of the first things you'd probably try to provide Spring is your datasource so assuming your Struts app is using the data source provided by the JEE container.  In which case add <code>org.springframework:spring-jdbc</code> to your dependencies then</p>\n<p>In the MyContextConfig add the following</p>\n<pre><code>@Bean\nDataSource dataSource() throws NamingException {\n\n  final var jndiTemplate = new JndiTemplate();\n  final var ds = jndiTemplate.lookup(&quot;java:comp/env/jdbc/MyDB&quot;,\n    DataSource.class);\n  // the TransactionAwareDataSourceProxy allows the datasource to work with\n  // Spring managed transactions.  So it gives a bit of interoperability.\n  // Spring components like JpaTransactionManager will be aware of this\n  // class and pull out the actual data source if needed.\n  return new TransactionAwareDataSourceProxy(ds);\n}\n</code></pre>\n<h1>Actions as Components</h1>\n<p>At this point you may want to have dependency injection for your <code>Action</code> classes to do that you'd have to set up a <code>RequestProcessor</code></p>\n<pre><code>public SpringRequestProcessor extends RequestProcessor {\n  private ApplicationContext applicationContext;\n  @Override\n  public void init(ActionServlet servlet, ModuleConfig moduleConfig) \n    throws ServletException {\n\n    super.init(servlet, moduleConfig);\n    applicationContext = WebApplicationContextUtils\n     .getRequiredWebApplicationContext(servlet.getServletContext());\n  }\n\n  @Override\n  protected Action processActionCreate(\n      final HttpServletRequest request,\n      final HttpServletResponse response,\n      final ActionMapping mapping)\n      throws IOException {\n    final var className = mapping.getType();\n    final var fromSpring = getInstanceFromSpring(className);\n    return fromSpring.ifPresentOrElse(\n      action -&gt;{\n        action.setServlet(servlet); \n        return action;\n      },\n      () -&gt; super.processActionCreate(request, response, mapping);\n    }\n  }\n  @SupressWarnings(&quot;unchecked&quot;)\n  private Optional&lt;Action&gt; getInstanceFromSpring(String className) {\n\n    try {\n      final Class&lt;? extends Action&gt; controllerClass =\n          (Class&lt;? extends Action&gt;) Class.forName(className);\n      return Optional.of(applicationContext.getBean(controllerClass));\n    } catch (final NoSuchBeanDefinitionException e) {\n      return Optional.empty();\n    } catch (final ClassNotFoundException e) {\n      throw new ServletException(e);\n    }\n  }\n}\n</code></pre>\n<p>The <code>struts-config.xml</code> should then specify the processor class in it's <code>controller</code> element</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;controller contentType=&quot;text/html;charset=UTF-8&quot;\n  locale=&quot;true&quot;\n  nocache=&quot;true&quot;\n  processorClass=&quot;my.SpringRequestProcessor&quot;\n/&gt;\n</code></pre>\n<h1>The rabbit hole...</h1>\n<p>From here the rabbit hole may eventually bring you to use spring-data-jpa in which case you'd have to set up quite a number of things including the <code>JpaTransactionManager</code> and maybe wanting to ensure all requests are transactional that is managed by Spring.  You'd have to add that as an override to <code>RequestProcessor.processActionPerform</code>.  I didn't include that because setting up the JPA is not trivial.</p>\n<p>However, with this approach the capabilities can be slowly added to the legacy app with a modern dependency injection framework.  For example the legacy system had it's own SMTP and data source management but we swapped it with JPA and Spring Mail (which allowed us to use TLS on email)</p>\n<p>You also leverage your existing staff and skills with Struts since the changes to Struts are in fact minimal.</p>\n"}],"owner":{"account_id":1275953,"reputation":26182,"user_id":1231230,"accept_rate":76,"display_name":"Ankur Singhal"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7532,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":3,"score":6,"last_activity_date":1691996672,"creation_date":1563982972,"question_id":57186714,"body_markdown":"I have a *legacy* banking application coded in **Struts 1 + JSP**\r\nNow requirement is to migrate the *backend (for now MVC)* to *`Springboot` (MVC)*.\r\nLater UI (JSP) will be migrated to `angular`.\r\n\r\n**Caveats**\r\n\r\n1.) Backend is not stateless\r\n\r\n2.) Lot of data stored in session object\r\n\r\n**Approach**\r\n\r\n1. Have *2 application running in parallel* (*Struts and Spring*), and **share the session object** between the two, *Storing session in Database, in memory (Redis) etc*. This means lot of code changes, as currently *session is manipulated across layers of JSP, action, service for every update/fetch*\r\n\r\n2. *Build complete Spring application* and then make it live, which is again not feasible and we can&#39;t have user waiting.\r\n\r\n3. **Marry Struts 1 and Spring in same app and later Divorce them**, and removing struts components progressively.\r\n\r\n**Question**\r\n\r\nIs it feasible to have Struts 1 and Spring together in same web application.\r\nCan 2 different servlets (`ActionServlet` &amp; `DispatcherServlet` exists together), possible if i have 2 different context paths for spring &amp; struts\r\n\r\nCurrently focus is to migrate MVC layer, service layer will not be an issue.\r\n\r\nAlso if i need to keep **backend design of API to support REST in future**, possible if i can design in such way.\r\n\r\n**Current**\r\n\r\nJSP -&gt; Struts 1 MVC -&gt; Service Layer -&gt; DB\r\n\r\n**What we can built**\r\n\r\nJSP -&gt; Struts 1 MVC &lt;-&gt; JSON Object parser &lt;-&gt; Spring REST MVC -&gt; Service Layer -&gt; DB\r\n\r\n**Future**\r\n\r\n*Just remove JSP -&gt; Struts MVC*\r\n\r\nAngular (or any other framework) -&gt; Spring REST MVC -&gt; Service Layer -&gt; DB","title":"Struts 1 to Spring Migration - Strategy","body":"<p>I have a <em>legacy</em> banking application coded in <strong>Struts 1 + JSP</strong>\nNow requirement is to migrate the <em>backend (for now MVC)</em> to <em><code>Springboot</code> (MVC)</em>.\nLater UI (JSP) will be migrated to <code>angular</code>.</p>\n\n<p><strong>Caveats</strong></p>\n\n<p>1.) Backend is not stateless</p>\n\n<p>2.) Lot of data stored in session object</p>\n\n<p><strong>Approach</strong></p>\n\n<ol>\n<li><p>Have <em>2 application running in parallel</em> (<em>Struts and Spring</em>), and <strong>share the session object</strong> between the two, <em>Storing session in Database, in memory (Redis) etc</em>. This means lot of code changes, as currently <em>session is manipulated across layers of JSP, action, service for every update/fetch</em></p></li>\n<li><p><em>Build complete Spring application</em> and then make it live, which is again not feasible and we can't have user waiting.</p></li>\n<li><p><strong>Marry Struts 1 and Spring in same app and later Divorce them</strong>, and removing struts components progressively.</p></li>\n</ol>\n\n<p><strong>Question</strong></p>\n\n<p>Is it feasible to have Struts 1 and Spring together in same web application.\nCan 2 different servlets (<code>ActionServlet</code> &amp; <code>DispatcherServlet</code> exists together), possible if i have 2 different context paths for spring &amp; struts</p>\n\n<p>Currently focus is to migrate MVC layer, service layer will not be an issue.</p>\n\n<p>Also if i need to keep <strong>backend design of API to support REST in future</strong>, possible if i can design in such way.</p>\n\n<p><strong>Current</strong></p>\n\n<p>JSP -> Struts 1 MVC -> Service Layer -> DB</p>\n\n<p><strong>What we can built</strong></p>\n\n<p>JSP -> Struts 1 MVC &lt;-> JSON Object parser &lt;-> Spring REST MVC -> Service Layer -> DB</p>\n\n<p><strong>Future</strong></p>\n\n<p><em>Just remove JSP -> Struts MVC</em></p>\n\n<p>Angular (or any other framework) -> Spring REST MVC -> Service Layer -> DB</p>\n"},{"tags":["java","spring-boot","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":5300710,"reputation":269,"user_id":4230445,"display_name":"rahulP"},"score":0,"creation_date":1690995028,"post_id":76810946,"comment_id":135431736,"body_markdown":"It will be really hard to solve your problem just by using native CTE query in JPA. I am not sure if you already have come across this link https://stackoverflow.com/questions/3638082/recursive-jpa-query  but do check this once. It provides one solution of Blaze-Persistence or considering changing the data model for almost same problem.","body":"It will be really hard to solve your problem just by using native CTE query in JPA. I am not sure if you already have come across this link <a href=\"https://stackoverflow.com/questions/3638082/recursive-jpa-query\">stackoverflow.com/questions/3638082/recursive-jpa-query</a>  but do check this once. It provides one solution of Blaze-Persistence or considering changing the data model for almost same problem."},{"owner":{"account_id":9983336,"reputation":4132,"user_id":7769052,"accept_rate":75,"display_name":"banan3&#39;14"},"score":0,"creation_date":1691482192,"post_id":76810946,"comment_id":135493970,"body_markdown":"JPQL queries with fetch joins instead of CTE queries would probably solve the problem, I don&#39;t think CTE queries would be even more efficient because you somehow have to make sure it recursively initializes the children all the same","body":"JPQL queries with fetch joins instead of CTE queries would probably solve the problem, I don&#39;t think CTE queries would be even more efficient because you somehow have to make sure it recursively initializes the children all the same"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1691504854,"post_id":76810946,"comment_id":135498919,"body_markdown":"I don&#39;t think Hibernate has this ability, as there is no way to know that a TreeNode&#39;s children are all in memory or which ones they really are without a DB query to find them. EclipseLink, with forced (or only) in-memory queries, could be configured to handle this in a single query, but I don&#39;t know that JPA or other providers can support it. If you are going to attempt it, you are better off reading in TreeNode instances and having the parent_id column be a basic mapping that you can sort and arrange yourself.","body":"I don&#39;t think Hibernate has this ability, as there is no way to know that a TreeNode&#39;s children are all in memory or which ones they really are without a DB query to find them. EclipseLink, with forced (or only) in-memory queries, could be configured to handle this in a single query, but I don&#39;t know that JPA or other providers can support it. If you are going to attempt it, you are better off reading in TreeNode instances and having the parent_id column be a basic mapping that you can sort and arrange yourself."}],"answers":[{"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691610660,"creation_date":1691610660,"answer_id":76870863,"question_id":76810946,"body_markdown":"Which database are you using? If using oracle you can do\r\n\r\n```sql\r\nSELECT * \r\nFROM tree_node \r\nCONNECT BY PRIOR parent_id = id\r\nSTART WITH parent_id = :parentId\r\n```","title":"Initialize all entities at once in a tree structure with hibernate","body":"<p>Which database are you using? If using oracle you can do</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT * \nFROM tree_node \nCONNECT BY PRIOR parent_id = id\nSTART WITH parent_id = :parentId\n</code></pre>\n"}],"owner":{"account_id":19844600,"reputation":704,"user_id":14536535,"display_name":"Reifocs"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":227,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1691996577,"creation_date":1690887401,"question_id":76810946,"body_markdown":"I have a tree structure that I need to convert to a DTO starting from root node.\r\nCurrently I query the root node with JPA findById and I have to traverse the whole tree through a DFS to convert each node to a DTO, resulting in a lot of SQL selects, one for each time I call getChildren. It get even worse with the other associations that I also need to retrieve. \r\n\r\nI would like to initialize the whole tree at once, with every associations also loaded, then do my DFS without worrying about triggering too much selects. \r\n\r\nThe node entity looks like this.\r\n```java\r\nimport jakarta.persistence.*;\r\nimport org.hibernate.annotations.BatchSize;\r\n\r\nimport java.util.LinkedHashSet;\r\nimport java.util.Set;\r\n\r\n@Entity\r\npublic class TreeNode {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;treenode_seq&quot;)\r\n    @SequenceGenerator(name = &quot;treenode_seq&quot;)\r\n    @Column(name = &quot;id&quot;, nullable = false)\r\n    private Long id;\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;parent_id&quot;)\r\n    private TreeNode parent;\r\n\r\n    @OneToMany(mappedBy = &quot;parent&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n    @BatchSize(size = 100)\r\n    private Set&lt;TreeNode&gt; children = new LinkedHashSet&lt;&gt;();\r\n\r\n    @OneToMany(mappedBy = &quot;treeNode&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n    @BatchSize(size = 100)\r\n    private Set&lt;Association&gt; associations = new LinkedHashSet&lt;&gt;();\r\n\r\n    // Getters and setters\r\n}\r\n```\r\nAs you can see it also has an oneToMany association, the association itself has another one to many association resulting in multiple n+1 selects while traversing the tree.\r\n\r\nAnd this is the DTO\r\n```java\r\nimport java.util.List;\r\n\r\npublic class TreeNodeDTO {\r\n    private Long id;\r\n    private Long parentId;\r\n    private List&lt;TreeNodeDTO&gt; children;\r\n    private List&lt;AssociationDTO&gt; associations;\r\n\r\n    //getters and setters\r\n}\r\n```\r\nI thinked about doing a CTE query with inner joins but when I select the root node, only direct children are initialized. It seems to make batching more efficient because all treeNode are in persistence context before I traverse the tree.\r\n```java\r\n@Query(value = &quot;WITH RECURSIVE TreeCTE AS (&quot; +\r\n            &quot;  SELECT * FROM tree_node WHERE id = :parentId&quot; +\r\n            &quot;  UNION ALL&quot; +\r\n            &quot;  SELECT t.* FROM tree_node t JOIN TreeCTE c ON c.id = t.parent_id&quot; +\r\n            &quot;)&quot; +\r\n            &quot;SELECT DISTINCT t.* FROM TreeCTE t where t.id = :parentId INNER JOIN tree_node tchildren on tchildren.parent_id = t.id&quot;, nativeQuery = true)\r\n    TreeNode findTreeWithChildren(@Param(&quot;parentId&quot;) Long parentId);\r\n```\r\nHow can I initialize all my tree (including other associations in the object graph) before I traverse it with a DFS, so accessing unloaded entities and collections won&#39;t cause database roundtrips?","title":"Initialize all entities at once in a tree structure with hibernate","body":"<p>I have a tree structure that I need to convert to a DTO starting from root node.\nCurrently I query the root node with JPA findById and I have to traverse the whole tree through a DFS to convert each node to a DTO, resulting in a lot of SQL selects, one for each time I call getChildren. It get even worse with the other associations that I also need to retrieve.</p>\n<p>I would like to initialize the whole tree at once, with every associations also loaded, then do my DFS without worrying about triggering too much selects.</p>\n<p>The node entity looks like this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import jakarta.persistence.*;\nimport org.hibernate.annotations.BatchSize;\n\nimport java.util.LinkedHashSet;\nimport java.util.Set;\n\n@Entity\npublic class TreeNode {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;treenode_seq&quot;)\n    @SequenceGenerator(name = &quot;treenode_seq&quot;)\n    @Column(name = &quot;id&quot;, nullable = false)\n    private Long id;\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;parent_id&quot;)\n    private TreeNode parent;\n\n    @OneToMany(mappedBy = &quot;parent&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n    @BatchSize(size = 100)\n    private Set&lt;TreeNode&gt; children = new LinkedHashSet&lt;&gt;();\n\n    @OneToMany(mappedBy = &quot;treeNode&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n    @BatchSize(size = 100)\n    private Set&lt;Association&gt; associations = new LinkedHashSet&lt;&gt;();\n\n    // Getters and setters\n}\n</code></pre>\n<p>As you can see it also has an oneToMany association, the association itself has another one to many association resulting in multiple n+1 selects while traversing the tree.</p>\n<p>And this is the DTO</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.List;\n\npublic class TreeNodeDTO {\n    private Long id;\n    private Long parentId;\n    private List&lt;TreeNodeDTO&gt; children;\n    private List&lt;AssociationDTO&gt; associations;\n\n    //getters and setters\n}\n</code></pre>\n<p>I thinked about doing a CTE query with inner joins but when I select the root node, only direct children are initialized. It seems to make batching more efficient because all treeNode are in persistence context before I traverse the tree.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(value = &quot;WITH RECURSIVE TreeCTE AS (&quot; +\n            &quot;  SELECT * FROM tree_node WHERE id = :parentId&quot; +\n            &quot;  UNION ALL&quot; +\n            &quot;  SELECT t.* FROM tree_node t JOIN TreeCTE c ON c.id = t.parent_id&quot; +\n            &quot;)&quot; +\n            &quot;SELECT DISTINCT t.* FROM TreeCTE t where t.id = :parentId INNER JOIN tree_node tchildren on tchildren.parent_id = t.id&quot;, nativeQuery = true)\n    TreeNode findTreeWithChildren(@Param(&quot;parentId&quot;) Long parentId);\n</code></pre>\n<p>How can I initialize all my tree (including other associations in the object graph) before I traverse it with a DFS, so accessing unloaded entities and collections won't cause database roundtrips?</p>\n"},{"tags":["java","ms-word"],"comments":[{"owner":{"account_id":13696,"reputation":17531,"user_id":27657,"accept_rate":65,"display_name":"javamonkey79"},"score":0,"creation_date":1331879984,"post_id":9732832,"comment_id":12376552,"body_markdown":"Can you post some example code of what you&#39;ve tried?","body":"Can you post some example code of what you&#39;ve tried?"},{"owner":{"account_id":1299528,"reputation":559,"user_id":1249744,"accept_rate":67,"display_name":"Sunmit Girme"},"score":0,"creation_date":1331880398,"post_id":9732832,"comment_id":12376629,"body_markdown":"Theres not much of a coding iv done.. I have created a simple xml file for the word doc and replaced the placeholders in the xml with the values in my java program.","body":"Theres not much of a coding iv done.. I have created a simple xml file for the word doc and replaced the placeholders in the xml with the values in my java program."},{"owner":{"account_id":1317368,"reputation":28514,"user_id":1263942,"accept_rate":96,"display_name":"Bruno Grieder"},"score":0,"creation_date":1331881485,"post_id":9732832,"comment_id":12376835,"body_markdown":"Have you looked at Apache POI? http://poi.apache.org/hwpf/index.html","body":"Have you looked at Apache POI? <a href=\"http://poi.apache.org/hwpf/index.html\" rel=\"nofollow noreferrer\">poi.apache.org/hwpf/index.html</a>"},{"owner":{"account_id":1299528,"reputation":559,"user_id":1249744,"accept_rate":67,"display_name":"Sunmit Girme"},"score":0,"creation_date":1331881914,"post_id":9732832,"comment_id":12376922,"body_markdown":"Apache poi does not provide anything for checkboxes..","body":"Apache poi does not provide anything for checkboxes.."}],"answers":[{"comments":[{"owner":{"account_id":1299528,"reputation":559,"user_id":1249744,"accept_rate":67,"display_name":"Sunmit Girme"},"score":0,"creation_date":1332135609,"post_id":9757044,"comment_id":12426777,"body_markdown":"Thanks Jason.. I am working on it. Can you provide a sample code or some links that can help me..","body":"Thanks Jason.. I am working on it. Can you provide a sample code or some links that can help me.."}],"tags":[],"owner":{"account_id":30580,"reputation":15487,"user_id":1031689,"accept_rate":67,"display_name":"JasonPlutext"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1332059982,"creation_date":1332059982,"answer_id":9757044,"question_id":9732832,"body_markdown":"I had a play with a bound checkbox content control.  \r\n\r\nI found that Word updates the custom xml part when you check/uncheck the checkbox on the document surface, but that the checkbox doesn&#39;t automatically update when you change the value in the custom xml part outside word.  Nor is it enough to update the checked state (w14:checkbox/w14:checked) outside Word 2010: it seems to be ignored.\r\n\r\nIn other words, unlike for bound text content controls, the update isn&#39;t bi-directional.\r\n\r\nSo to make this work, you&#39;d need to apply the binding yourself (ie alter the sdtContent to be a checked or unchecked box).  \r\n\r\nIn terms of Java implementations, [docx4j 2.7.1][1] can apply bindings for text content controls, but would need a minor patch to insert the checked or unchecked box.\r\n\r\n\r\n  [1]: http://www.docx4java.org","title":"Creating word document from a template using java","body":"<p>I had a play with a bound checkbox content control.  </p>\n\n<p>I found that Word updates the custom xml part when you check/uncheck the checkbox on the document surface, but that the checkbox doesn't automatically update when you change the value in the custom xml part outside word.  Nor is it enough to update the checked state (w14:checkbox/w14:checked) outside Word 2010: it seems to be ignored.</p>\n\n<p>In other words, unlike for bound text content controls, the update isn't bi-directional.</p>\n\n<p>So to make this work, you'd need to apply the binding yourself (ie alter the sdtContent to be a checked or unchecked box).  </p>\n\n<p>In terms of Java implementations, <a href=\"http://www.docx4java.org\" rel=\"nofollow\">docx4j 2.7.1</a> can apply bindings for text content controls, but would need a minor patch to insert the checked or unchecked box.</p>\n"},{"tags":[],"owner":{"account_id":135266,"reputation":6543,"user_id":338004,"display_name":"Paul Jowett"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1332911760,"creation_date":1332911760,"answer_id":9901532,"question_id":9732832,"body_markdown":"[JDReports][1] and [Docmosis][2] might help you.  I think both can do what you require given the template requirement and output format.\r\n\r\n\r\n  [1]: http://jodreports.sourceforge.net/\r\n  [2]: http://www.docmosis.com","title":"Creating word document from a template using java","body":"<p><a href=\"http://jodreports.sourceforge.net/\" rel=\"nofollow\">JDReports</a> and <a href=\"http://www.docmosis.com\" rel=\"nofollow\">Docmosis</a> might help you.  I think both can do what you require given the template requirement and output format.</p>\n"}],"owner":{"account_id":1299528,"reputation":559,"user_id":1249744,"accept_rate":67,"display_name":"Sunmit Girme"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10406,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1691996555,"creation_date":1331878851,"question_id":9732832,"body_markdown":"I want to create a word document which has a text part, checkboxes and tables in it. I want to create a template of this document and use the template to create a word document using java.\r\n\r\nCan anyone please suggest me an easiest way to do the same. I tried doing xml mapping but it only works fine with text and tables. I am more concerned about the checkboxes in the word document.\r\n\r\nPlease help!","title":"Creating word document from a template using java","body":"<p>I want to create a word document which has a text part, checkboxes and tables in it. I want to create a template of this document and use the template to create a word document using java.</p>\n\n<p>Can anyone please suggest me an easiest way to do the same. I tried doing xml mapping but it only works fine with text and tables. I am more concerned about the checkboxes in the word document.</p>\n\n<p>Please help!</p>\n"},{"tags":["java","spring-boot","jwt","single-sign-on","spring-authorization-server"],"answers":[{"tags":[],"owner":{"account_id":1141214,"reputation":53,"user_id":7522000,"display_name":"Ran Sedaka"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680174919,"creation_date":1680174919,"answer_id":75887517,"question_id":75885899,"body_markdown":"Answering my own questions for now..\r\n\r\nI added to my user entity ```implements OAuth2User``` as well as UserDetails.\r\nNow, when authentication succeeds, the returned principal is my user which contains all the roles and scopes needed.\r\n","title":"SSO flow using Spring authorization server + Spring boot 3.0.4 + Google","body":"<p>Answering my own questions for now..</p>\n<p>I added to my user entity <code>implements OAuth2User</code> as well as UserDetails.\nNow, when authentication succeeds, the returned principal is my user which contains all the roles and scopes needed.</p>\n"}],"owner":{"account_id":1141214,"reputation":53,"user_id":7522000,"display_name":"Ran Sedaka"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":325,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691996463,"creation_date":1680165502,"question_id":75885899,"body_markdown":"I&#39;m trying to understand the flow of a SSO with any provider (in this case Google).\r\nI implemented an authorization server using Spring boot 3 and Spring authorization server version 1.0.0.\r\n\r\nAuthorize/token endpoints work well and i get my JWT as expected with all the extra claims i&#39;ve added.\r\nAbove every API i have the following annotation:\r\n```@RolesAllowed({&quot;ADMIN&quot;})```\r\n\r\nI&#39;m now trying to add the SSO functionality in order for users to sign-up/login via Google. I&#39;ve defined my application in Google, added to application.yaml the relevant information: private,public,redirect-uri and added in my SecurityConfig class:\r\n```\r\n @Bean\r\n    @Order(2)\r\n    public SecurityFilterChain defaultSecurity(HttpSecurity http) throws Exception {\r\n\r\n        http.csrf().disable()\r\n                .cors().configurationSource(corsConfigurationSource())\r\n                .and()\r\n                .authorizeHttpRequests()\r\n                .requestMatchers(&quot;/v1/sign-up/**&quot;)\r\n                .permitAll()\r\n                .anyRequest()\r\n                .authenticated()\r\n                .and()\r\n                .oauth2ResourceServer()\r\n                .jwt().decoder(jwtDecoder)\r\n                .jwtAuthenticationConverter(customJwtAuthenticationConverter())\r\n                .and()\r\n                .and()\r\n                .formLogin(c -&gt;\r\n                        c.defaultSuccessUrl(&quot;/my-ui/index.html&quot;))\r\n                .oauth2Login()\r\n                .userInfoEndpoint()\r\n                .userService(oauthUserService)\r\n                .and()\r\n                .successHandler((request, response, authentication) -&gt; {\r\n                    CustomOAuth2User oauthUser = (CustomOAuth2User) authentication.getPrincipal();\r\n                    response.sendRedirect(&quot;http://localhost:8080/my-ui/index.html&quot;);\r\n                    });\r\n\r\n        return http.build();\r\n    }\r\n```\r\nMy CustomOAuth2UserService.java:\r\n```\r\n@Service\r\npublic class CustomOAuth2UserService extends DefaultOAuth2UserService {\r\n\r\n    @Override\r\n    public OAuth2User loadUser(OAuth2UserRequest userRequest) throws OAuth2AuthenticationException {\r\n        OAuth2User user = super.loadUser(userRequest);\r\n        return new CustomOAuth2User(user);\r\n    }\r\n}\r\n```\r\nI succeed to perform the login but when i try to run any of the APIs i fail because when i try to check the permissions i don&#39;t have them ofcourse because this is not my JWT token with extra claims and because the token initiated is OAuth2AuthenticationToken and not JWTAuthenticationToken.\r\n\r\nMy questions:\r\n1. Do i need to create my JWT after the user signed up/login using SSO?\r\n2. How can this be done if i didn&#39;t implement the JWT encoding? I don&#39;t want to implement something different than how Spring does it behind the scenes. I don&#39;t want 2 implementations.\r\n3. If #1 is true, after creating the JWT, how do i return it to the user? \r\n\r\nThanks a lot for the help\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"SSO flow using Spring authorization server + Spring boot 3.0.4 + Google","body":"<p>I'm trying to understand the flow of a SSO with any provider (in this case Google).\nI implemented an authorization server using Spring boot 3 and Spring authorization server version 1.0.0.</p>\n<p>Authorize/token endpoints work well and i get my JWT as expected with all the extra claims i've added.\nAbove every API i have the following annotation:\n<code>@RolesAllowed({&quot;ADMIN&quot;})</code></p>\n<p>I'm now trying to add the SSO functionality in order for users to sign-up/login via Google. I've defined my application in Google, added to application.yaml the relevant information: private,public,redirect-uri and added in my SecurityConfig class:</p>\n<pre><code> @Bean\n    @Order(2)\n    public SecurityFilterChain defaultSecurity(HttpSecurity http) throws Exception {\n\n        http.csrf().disable()\n                .cors().configurationSource(corsConfigurationSource())\n                .and()\n                .authorizeHttpRequests()\n                .requestMatchers(&quot;/v1/sign-up/**&quot;)\n                .permitAll()\n                .anyRequest()\n                .authenticated()\n                .and()\n                .oauth2ResourceServer()\n                .jwt().decoder(jwtDecoder)\n                .jwtAuthenticationConverter(customJwtAuthenticationConverter())\n                .and()\n                .and()\n                .formLogin(c -&gt;\n                        c.defaultSuccessUrl(&quot;/my-ui/index.html&quot;))\n                .oauth2Login()\n                .userInfoEndpoint()\n                .userService(oauthUserService)\n                .and()\n                .successHandler((request, response, authentication) -&gt; {\n                    CustomOAuth2User oauthUser = (CustomOAuth2User) authentication.getPrincipal();\n                    response.sendRedirect(&quot;http://localhost:8080/my-ui/index.html&quot;);\n                    });\n\n        return http.build();\n    }\n</code></pre>\n<p>My CustomOAuth2UserService.java:</p>\n<pre><code>@Service\npublic class CustomOAuth2UserService extends DefaultOAuth2UserService {\n\n    @Override\n    public OAuth2User loadUser(OAuth2UserRequest userRequest) throws OAuth2AuthenticationException {\n        OAuth2User user = super.loadUser(userRequest);\n        return new CustomOAuth2User(user);\n    }\n}\n</code></pre>\n<p>I succeed to perform the login but when i try to run any of the APIs i fail because when i try to check the permissions i don't have them ofcourse because this is not my JWT token with extra claims and because the token initiated is OAuth2AuthenticationToken and not JWTAuthenticationToken.</p>\n<p>My questions:</p>\n<ol>\n<li>Do i need to create my JWT after the user signed up/login using SSO?</li>\n<li>How can this be done if i didn't implement the JWT encoding? I don't want to implement something different than how Spring does it behind the scenes. I don't want 2 implementations.</li>\n<li>If #1 is true, after creating the JWT, how do i return it to the user?</li>\n</ol>\n<p>Thanks a lot for the help</p>\n"},{"tags":["java","command-line-interface","apache-commons-cli"],"comments":[{"owner":{"account_id":347810,"reputation":911,"user_id":682161,"accept_rate":50,"display_name":"ohshazbot"},"score":0,"creation_date":1445886997,"post_id":33338787,"comment_id":54503283,"body_markdown":"What if you set the number of args for it too?","body":"What if you set the number of args for it too?"},{"owner":{"account_id":3243739,"reputation":35,"user_id":2735997,"display_name":"BunkerBob"},"score":0,"creation_date":1445901325,"post_id":33338787,"comment_id":54510368,"body_markdown":"@ohshazbot:  not sure I follow the question, but if I specify that an argument must be provided for the -O option, then the code works  -- as long as user provides an argument.  But in the actual application, the user needs to be able to select -O and then optionally either provide an argument or not.","body":"@ohshazbot:  not sure I follow the question, but if I specify that an argument must be provided for the -O option, then the code works  -- as long as user provides an argument.  But in the actual application, the user needs to be able to select -O and then optionally either provide an argument or not."},{"owner":{"account_id":347810,"reputation":911,"user_id":682161,"accept_rate":50,"display_name":"ohshazbot"},"score":0,"creation_date":1445951079,"post_id":33338787,"comment_id":54532046,"body_markdown":"There is an additional flag on the builder for not setting if there are/aren&#39;t args, but for setting number of args. It is numberOfArgs","body":"There is an additional flag on the builder for not setting if there are/aren&#39;t args, but for setting number of args. It is numberOfArgs"},{"owner":{"account_id":3243739,"reputation":35,"user_id":2735997,"display_name":"BunkerBob"},"score":0,"creation_date":1445967696,"post_id":33338787,"comment_id":54543925,"body_markdown":"@ohshzabot:  I don&#39;t think that helps, because the number of arguments is variable.  I actually have about 20 different possible command line flags,  some are required and have required arguments while some are optional and have either required arguments or optional arguments.","body":"@ohshzabot:  I don&#39;t think that helps, because the number of arguments is variable.  I actually have about 20 different possible command line flags,  some are required and have required arguments while some are optional and have either required arguments or optional arguments."},{"owner":{"account_id":3243739,"reputation":35,"user_id":2735997,"display_name":"BunkerBob"},"score":0,"creation_date":1445968364,"post_id":33338787,"comment_id":54544313,"body_markdown":"@ohshzabot:  I spoke too soon:  I added a line &quot;.numberOfArgs(1)&quot;, and that made it work!  Thanks for your help.   Not sure if that is how it is supposed to work, i.e. if it was intended that &quot;numberOfArgs&quot; had to be specified, but it seems to be.   If you respond with an answer I can mark it accepted.  Thanks.","body":"@ohshzabot:  I spoke too soon:  I added a line &quot;.numberOfArgs(1)&quot;, and that made it work!  Thanks for your help.   Not sure if that is how it is supposed to work, i.e. if it was intended that &quot;numberOfArgs&quot; had to be specified, but it seems to be.   If you respond with an answer I can mark it accepted.  Thanks."}],"answers":[{"tags":[],"owner":{"account_id":347810,"reputation":911,"user_id":682161,"accept_rate":50,"display_name":"ohshazbot"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1445983501,"creation_date":1445983501,"answer_id":33379307,"question_id":33338787,"body_markdown":"It seems you need to set numberOfArgs in addition to hasOptionalArgs in order for it to work properly.","title":"Java Apache CLI Optional Command Line Arguments not working","body":"<p>It seems you need to set numberOfArgs in addition to hasOptionalArgs in order for it to work properly.</p>\n"},{"tags":[],"owner":{"account_id":11829128,"reputation":1,"user_id":8656346,"display_name":"malcolm"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1506089973,"creation_date":1506089973,"answer_id":46366943,"question_id":33338787,"body_markdown":"There is another parse() method that takes a third param option called stopAtNonOption.\r\n\r\nSetting stopAtNonOption to false will cause the parsing to fail and throw and exception when an unknown parameter is reached.\r\n\r\nI have found out that the parser stops parsing when it reaches an unknown param.","title":"Java Apache CLI Optional Command Line Arguments not working","body":"<p>There is another parse() method that takes a third param option called stopAtNonOption.</p>\n\n<p>Setting stopAtNonOption to false will cause the parsing to fail and throw and exception when an unknown parameter is reached.</p>\n\n<p>I have found out that the parser stops parsing when it reaches an unknown param.</p>\n"},{"tags":[],"owner":{"account_id":8736919,"reputation":129,"user_id":6535239,"display_name":"Elegant.Obj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691996220,"creation_date":1691996220,"answer_id":76896875,"question_id":33338787,"body_markdown":"Apache Command-CLI is too verbose, causing misunderstandings and problems. You can use a convenient wrapper for it: \r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.github.bogdanovmn.cmdline&lt;/groupId&gt;\r\n    &lt;artifactId&gt;cmdline-app&lt;/artifactId&gt;\r\n    &lt;version&gt;3.0.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nThe original code will look like this (works as you expected): \r\n```java\r\nimport com.github.bogdanovmn.cmdline.CmdLineAppBuilder;\r\n\r\npublic class TestCommandLine {\r\n    public static void main(String[] args) throws Exception {\r\n        new CmdLineAppBuilder(args)\r\n            .withArg(&quot;R&quot;, &quot;Enter this required argument&quot;).required()\r\n            .withArg(&quot;O&quot;, &quot;Enter this argument if you want to&quot;)\r\n            .withEntryPoint(options -&gt; {\r\n                // The R arg is required, we shouldn&#39;t check it is specified\r\n                System.out.println(&quot;First argument is &quot; + options.get(&quot;R&quot;));\r\n                if (options.has(&quot;O&quot;)) {\r\n                    String secondargument = options.get(&quot;O&quot;);\r\n                    if (secondargument == null) {\r\n                        // Will never go here\r\n                        System.out.println(&quot;Second argument is NULL&quot;);\r\n                    } else{\r\n                        // should end up here if optional argument is provided\r\n                        System.out.println(&quot;Second argument is &quot; + secondargument);\r\n                    }\r\n                }\r\n            })\r\n        .build().run();\r\n    }\r\n}\r\n```\r\n\r\nIt will throw a runtime exception in case of &quot;-R myfirstarg -O&quot; arguments command line:\r\n```bash\r\njava.lang.RuntimeException: Missing argument for option: O\r\n```\r\n[See documentation for more details][1]\r\n\r\n\r\n  [1]: https://github.com/bogdanovmn/java-cmdline-app/blob/master/README.md","title":"Java Apache CLI Optional Command Line Arguments not working","body":"<p>Apache Command-CLI is too verbose, causing misunderstandings and problems. You can use a convenient wrapper for it:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.github.bogdanovmn.cmdline&lt;/groupId&gt;\n    &lt;artifactId&gt;cmdline-app&lt;/artifactId&gt;\n    &lt;version&gt;3.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>The original code will look like this (works as you expected):</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.github.bogdanovmn.cmdline.CmdLineAppBuilder;\n\npublic class TestCommandLine {\n    public static void main(String[] args) throws Exception {\n        new CmdLineAppBuilder(args)\n            .withArg(&quot;R&quot;, &quot;Enter this required argument&quot;).required()\n            .withArg(&quot;O&quot;, &quot;Enter this argument if you want to&quot;)\n            .withEntryPoint(options -&gt; {\n                // The R arg is required, we shouldn't check it is specified\n                System.out.println(&quot;First argument is &quot; + options.get(&quot;R&quot;));\n                if (options.has(&quot;O&quot;)) {\n                    String secondargument = options.get(&quot;O&quot;);\n                    if (secondargument == null) {\n                        // Will never go here\n                        System.out.println(&quot;Second argument is NULL&quot;);\n                    } else{\n                        // should end up here if optional argument is provided\n                        System.out.println(&quot;Second argument is &quot; + secondargument);\n                    }\n                }\n            })\n        .build().run();\n    }\n}\n</code></pre>\n<p>It will throw a runtime exception in case of &quot;-R myfirstarg -O&quot; arguments command line:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>java.lang.RuntimeException: Missing argument for option: O\n</code></pre>\n<p><a href=\"https://github.com/bogdanovmn/java-cmdline-app/blob/master/README.md\" rel=\"nofollow noreferrer\">See documentation for more details</a></p>\n"}],"owner":{"account_id":3243739,"reputation":35,"user_id":2735997,"display_name":"BunkerBob"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7065,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":33379307,"answer_count":3,"score":3,"last_activity_date":1691996220,"creation_date":1445835856,"question_id":33338787,"body_markdown":"Trying to use `Apache Commons Command Line Interface 1.3.1` [from here][1]  It works fine for required arguments, but seems to drop any optional arguments.   Can anyone spot a problem with my code below?   \r\n\r\n    import org.apache.commons.cli.CommandLine;\r\n    import org.apache.commons.cli.CommandLineParser;\r\n    import org.apache.commons.cli.DefaultParser;\r\n    import org.apache.commons.cli.Option;\r\n    import org.apache.commons.cli.Options;\r\n    import org.apache.commons.cli.ParseException;\r\n    \r\n    public class TestCommandLine {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\t// *****  test with command line arguments -R myfirstarg -O mysecondarg  *****\r\n    \t\t// *****  the second arg is not being captured                          *****\r\n    \t\r\n    \t\tSystem.out.println(&quot;Number of Arguments : &quot; + args.length);\r\n    \r\n    \t\tString commandline = &quot;&quot;;\r\n    \t\tfor (String arg : args) {\r\n    \t\t\tcommandline = commandline + (arg + &quot; &quot;);\r\n    \t\t}\r\n    \t\tcommandline.trim();\r\n    \t\tSystem.out.println(&quot;Command-line arguments: &quot; + commandline);\r\n    \r\n    \t\t// create Options object\r\n    \t\tOptions options = new Options();\r\n    \t\toptions.addOption(&quot;R&quot;, true, &quot;Enter this required argument&quot;);\r\n    \t\tOption optionalargument = Option.builder(&quot;O&quot;)\r\n    \t\t\t\t.optionalArg(true)   // if I change this line to .hasArg(true) it works, but then is not optional\r\n    \t\t\t\t.desc(&quot;Enter this argument if you want to&quot;)\r\n    \t\t\t\t.build();\r\n    \t\toptions.addOption(optionalargument);\r\n    \r\n    \t\t// initialize variables used with command line arguments\r\n    \t\tString firstargument = null;\r\n    \t\tString secondargument = null;\r\n    \r\n    \r\n    \t\tCommandLineParser parser = new DefaultParser();\r\n    \t\ttry {\r\n    \t\t\t// parse the command line arguments\r\n    \t\t\tCommandLine cmd = parser.parse( options, args );\r\n    \r\n    \t\t\tfirstargument = cmd.getOptionValue(&quot;R&quot;);\r\n    \t\t\tsecondargument = cmd.getOptionValue(&quot;O&quot;);\r\n    \r\n    \t\t\tif(cmd.hasOption(&quot;R&quot;)){\r\n    \t\t\t\tif(firstargument == null){\r\n    \t\t\t\t\tSystem.out.println(&quot;Must provide the first argument  ...  exiting...&quot;);\r\n    \t\t\t\t\tSystem.exit(0);\r\n    \t\t\t\t}\r\n    \t\t\t\telse {\r\n    \t\t\t\t\tSystem.out.println(&quot;First argument is &quot; + firstargument);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\tif(cmd.hasOption(&quot;O&quot;)) {\r\n    \t\t\t\t// optional argument\r\n    \t\t\t\tif (secondargument == null){\r\n    \t\t\t\t\tSystem.out.println(&quot;Second argument is NULL&quot;);\r\n    \t\t\t\t}\r\n    \t\t\t\telse{\r\n    \t\t\t\t\t// should end up here if optional argument is provided, but it doesn&#39;t happen\r\n    \t\t\t\t\tSystem.out.println(&quot;Second argument is &quot; + secondargument);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t}\r\n    \t\tcatch( ParseException exp ) {\r\n    \t\t\t// oops, something went wrong\r\n    \t\t\tSystem.err.println( &quot;Parsing failed.  Reason: &quot; + exp.getMessage() );\r\n    \t\t}\r\n    \t}\r\n\r\n    }\r\nThe output from the above code is:\r\n\r\n    Number of Arguments : 4\r\n    Command-line arguments: -R myfirstarg -O mysecondarg \r\n    First argument is myfirstarg\r\n    Second argument is NULL\r\nWhy isn&#39;t &quot;mysecondarg&quot; being captured?\r\nIf I change the line .optionalArg(true) to .hasArg(true), then the second argument is captured, but the whole idea is to be able to optionally leave the second argument out.\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-cli/javadocs/api-release/index.html","title":"Java Apache CLI Optional Command Line Arguments not working","body":"<p>Trying to use <code>Apache Commons Command Line Interface 1.3.1</code> <a href=\"https://commons.apache.org/proper/commons-cli/javadocs/api-release/index.html\" rel=\"nofollow\">from here</a>  It works fine for required arguments, but seems to drop any optional arguments.   Can anyone spot a problem with my code below?   </p>\n\n<pre><code>import org.apache.commons.cli.CommandLine;\nimport org.apache.commons.cli.CommandLineParser;\nimport org.apache.commons.cli.DefaultParser;\nimport org.apache.commons.cli.Option;\nimport org.apache.commons.cli.Options;\nimport org.apache.commons.cli.ParseException;\n\npublic class TestCommandLine {\n\n    public static void main(String[] args) {\n\n        // *****  test with command line arguments -R myfirstarg -O mysecondarg  *****\n        // *****  the second arg is not being captured                          *****\n\n        System.out.println(\"Number of Arguments : \" + args.length);\n\n        String commandline = \"\";\n        for (String arg : args) {\n            commandline = commandline + (arg + \" \");\n        }\n        commandline.trim();\n        System.out.println(\"Command-line arguments: \" + commandline);\n\n        // create Options object\n        Options options = new Options();\n        options.addOption(\"R\", true, \"Enter this required argument\");\n        Option optionalargument = Option.builder(\"O\")\n                .optionalArg(true)   // if I change this line to .hasArg(true) it works, but then is not optional\n                .desc(\"Enter this argument if you want to\")\n                .build();\n        options.addOption(optionalargument);\n\n        // initialize variables used with command line arguments\n        String firstargument = null;\n        String secondargument = null;\n\n\n        CommandLineParser parser = new DefaultParser();\n        try {\n            // parse the command line arguments\n            CommandLine cmd = parser.parse( options, args );\n\n            firstargument = cmd.getOptionValue(\"R\");\n            secondargument = cmd.getOptionValue(\"O\");\n\n            if(cmd.hasOption(\"R\")){\n                if(firstargument == null){\n                    System.out.println(\"Must provide the first argument  ...  exiting...\");\n                    System.exit(0);\n                }\n                else {\n                    System.out.println(\"First argument is \" + firstargument);\n                }\n            }\n            if(cmd.hasOption(\"O\")) {\n                // optional argument\n                if (secondargument == null){\n                    System.out.println(\"Second argument is NULL\");\n                }\n                else{\n                    // should end up here if optional argument is provided, but it doesn't happen\n                    System.out.println(\"Second argument is \" + secondargument);\n                }\n            }\n\n        }\n        catch( ParseException exp ) {\n            // oops, something went wrong\n            System.err.println( \"Parsing failed.  Reason: \" + exp.getMessage() );\n        }\n    }\n\n}\n</code></pre>\n\n<p>The output from the above code is:</p>\n\n<pre><code>Number of Arguments : 4\nCommand-line arguments: -R myfirstarg -O mysecondarg \nFirst argument is myfirstarg\nSecond argument is NULL\n</code></pre>\n\n<p>Why isn't \"mysecondarg\" being captured?\nIf I change the line .optionalArg(true) to .hasArg(true), then the second argument is captured, but the whole idea is to be able to optionally leave the second argument out.</p>\n"},{"tags":["java","lambda","java-11"],"comments":[{"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"score":1,"creation_date":1691918075,"post_id":76892680,"comment_id":135553581,"body_markdown":"You only have the name of the product. Do you want to create a new Product with only the `name` field set?","body":"You only have the name of the product. Do you want to create a new Product with only the <code>name</code> field set?"},{"owner":{"account_id":448169,"reputation":5643,"user_id":842225,"accept_rate":49,"display_name":"user842225"},"score":0,"creation_date":1691918221,"post_id":76892680,"comment_id":135553589,"body_markdown":"I will provide more information very soon","body":"I will provide more information very soon"},{"owner":{"account_id":448169,"reputation":5643,"user_id":842225,"accept_rate":49,"display_name":"user842225"},"score":0,"creation_date":1691918424,"post_id":76892680,"comment_id":135553613,"body_markdown":"I updated my post with more information.","body":"I updated my post with more information."}],"answers":[{"tags":[],"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1691918486,"creation_date":1691918486,"answer_id":76892704,"question_id":76892680,"body_markdown":"\r\nFor each element in the `data` Set, you can create a new Product and set its `name` and collect the resultant stream as a `Set&lt;Product&gt;`.\r\n```\r\nSet&lt;Product&gt; products = data.stream()\r\n        .map(name -&gt; {\r\n            Product product = new Product();\r\n            product.setName(name);\r\n            return product;\r\n        })\r\n        .collect(Collectors.toSet());\r\n````\r\nIf there is a constructor in the Product class which accepts the product name like,\r\n\r\n```\r\npublic static class Product {\r\n    int id;\r\n    String name;\r\n        \r\n    public Product(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    // getter &amp; setters\r\n}\r\n```\r\nThen you can simplify the *map* step with a method reference.\r\n```\r\n Set&lt;Product&gt; products = data.stream()\r\n        .map(Product::new)\r\n        .collect(Collectors.toSet());\r\n```","title":"Using Lambda function to transform a set of string to a set of object","body":"<p>For each element in the <code>data</code> Set, you can create a new Product and set its <code>name</code> and collect the resultant stream as a <code>Set&lt;Product&gt;</code>.</p>\n<pre><code>Set&lt;Product&gt; products = data.stream()\n        .map(name -&gt; {\n            Product product = new Product();\n            product.setName(name);\n            return product;\n        })\n        .collect(Collectors.toSet());\n</code></pre>\n<p>If there is a constructor in the Product class which accepts the product name like,</p>\n<pre><code>public static class Product {\n    int id;\n    String name;\n        \n    public Product(String name) {\n        this.name = name;\n    }\n\n    // getter &amp; setters\n}\n</code></pre>\n<p>Then you can simplify the <em>map</em> step with a method reference.</p>\n<pre><code> Set&lt;Product&gt; products = data.stream()\n        .map(Product::new)\n        .collect(Collectors.toSet());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5037493,"reputation":2383,"user_id":4045880,"display_name":"Michal"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691996096,"creation_date":1691996096,"answer_id":76896861,"question_id":76892680,"body_markdown":"Outsourcing the `Product` creation into a `static` factory method\r\n\r\n    static public Product forName(String name) {\r\n       Product = new Product();\r\n       product.setName(name);\r\n       return product;\r\n    }\r\n       \r\nallows for the usage of a method reference\r\n\r\n     Set&lt;Product&gt; products = data.stream()\r\n        .map(Product::forName)\r\n        .collect(Collectors.toSet());\r\n\r\n","title":"Using Lambda function to transform a set of string to a set of object","body":"<p>Outsourcing the <code>Product</code> creation into a <code>static</code> factory method</p>\n<pre><code>static public Product forName(String name) {\n   Product = new Product();\n   product.setName(name);\n   return product;\n}\n   \n</code></pre>\n<p>allows for the usage of a method reference</p>\n<pre><code> Set&lt;Product&gt; products = data.stream()\n    .map(Product::forName)\n    .collect(Collectors.toSet());\n</code></pre>\n"}],"owner":{"account_id":448169,"reputation":5643,"user_id":842225,"accept_rate":49,"display_name":"user842225"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76892704,"answer_count":2,"score":1,"last_activity_date":1691996096,"creation_date":1691918001,"question_id":76892680,"body_markdown":"I am new in Java Lambda function, so the question probably is very simple.\r\n\r\nI have an entity class and using Lombok:\r\n```\r\n@Entity\r\n@Data\r\npublic class Product {\r\n  @Id\r\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n  private int id;\r\n  private String name;\r\n  \r\n  // getter &amp; setters\r\n  ...\r\n\r\n}\r\n```\r\n\r\nThen, I got a `Set&lt;String&gt; data`, each element there represents the name of a `Product`. Now I would like to transform this `data` to `Set&lt;Product&gt; prodcts`. I tried two things:\r\n\r\n1. I firstly tried to use constructor of `Product`:\r\n```\r\nSet&lt;String&gt; data = getData();\r\n\r\n//Compiler error:reason: no instance(s) of type variable(s) exist so that String conforms to Product\r\nvar products = data.stream().map(Product::new)\r\n``` \r\nBut I am not sure how to pass parameter to the constructor with this Lambda sytax &amp; get also compiler error as shown in code.\r\n\r\n2. Then, I tried directly calling the method:\r\n```\r\nSet&lt;String&gt; data = getData();\r\n\r\n//Compiler error: Incompatible types: expected not void but compile-time declaration for the method reference has void return type\r\nvar products = data.stream().map(Product::setName)\r\n``` \r\nBut I get the compiler error `Incompatible types: expected not void but compile-time declaration for the method reference has void return type`.\r\n\r\n What is the right way to do this transformation with Lambda function then?","title":"Using Lambda function to transform a set of string to a set of object","body":"<p>I am new in Java Lambda function, so the question probably is very simple.</p>\n<p>I have an entity class and using Lombok:</p>\n<pre><code>@Entity\n@Data\npublic class Product {\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  private int id;\n  private String name;\n  \n  // getter &amp; setters\n  ...\n\n}\n</code></pre>\n<p>Then, I got a <code>Set&lt;String&gt; data</code>, each element there represents the name of a <code>Product</code>. Now I would like to transform this <code>data</code> to <code>Set&lt;Product&gt; prodcts</code>. I tried two things:</p>\n<ol>\n<li>I firstly tried to use constructor of <code>Product</code>:</li>\n</ol>\n<pre><code>Set&lt;String&gt; data = getData();\n\n//Compiler error:reason: no instance(s) of type variable(s) exist so that String conforms to Product\nvar products = data.stream().map(Product::new)\n</code></pre>\n<p>But I am not sure how to pass parameter to the constructor with this Lambda sytax &amp; get also compiler error as shown in code.</p>\n<ol start=\"2\">\n<li>Then, I tried directly calling the method:</li>\n</ol>\n<pre><code>Set&lt;String&gt; data = getData();\n\n//Compiler error: Incompatible types: expected not void but compile-time declaration for the method reference has void return type\nvar products = data.stream().map(Product::setName)\n</code></pre>\n<p>But I get the compiler error <code>Incompatible types: expected not void but compile-time declaration for the method reference has void return type</code>.</p>\n<p>What is the right way to do this transformation with Lambda function then?</p>\n"},{"tags":["java","select","nio"],"answers":[{"comments":[{"owner":{"account_id":13900,"reputation":221,"user_id":28164,"display_name":"Frank Taylor"},"score":0,"creation_date":1225965354,"post_id":205354,"comment_id":123189,"body_markdown":"Thanks for the answer. This is clearly an anomaly in the behaviour of select, but its easily solvable.","body":"Thanks for the answer. This is clearly an anomaly in the behaviour of select, but its easily solvable."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1334274974,"post_id":205354,"comment_id":12989986,"body_markdown":"@FrankTaylor I don&#39;t know why a programming error should be considered `an anomaly in the behaviour of select&#39;.","body":"@FrankTaylor I don&#39;t know why a programming error should be considered `an anomaly in the behaviour of select&#39;."}],"tags":[],"owner":{"account_id":9122,"reputation":9322,"user_id":16724,"display_name":"Alexander"},"comment_count":2,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1224087583,"creation_date":1224087201,"answer_id":205354,"question_id":204186,"body_markdown":"Short answer: remove &lt;code&gt;OP_CONNECT&lt;/code&gt; from the list of operations you are interested in for the accepted connection -- an accepted connection is already connected.\r\n\r\nI managed to reproduce the issue, which might be exactly what&#39;s happening to you:\r\n\r\n    import java.net.*;\r\n    import java.nio.channels.*;\r\n    \r\n    \r\n    public class MyNioServer {\r\n      public static void main(String[] params) throws Exception {\r\n        final ServerSocketChannel serverChannel = ServerSocketChannel.open();\r\n        serverChannel.configureBlocking(true);\r\n        serverChannel.socket().bind(new InetSocketAddress(&quot;localhost&quot;, 12345));\r\n        System.out.println(&quot;Listening for incoming connections&quot;);\r\n        final SocketChannel clientChannel = serverChannel.accept();\r\n        System.out.println(&quot;Accepted connection: &quot; + clientChannel);\r\n        \r\n        \r\n        final Selector selector = Selector.open();\r\n        clientChannel.configureBlocking(false);\r\n        final SelectionKey clientKey = clientChannel.register(selector, SelectionKey.OP_READ | SelectionKey.OP_CONNECT);\r\n        System.out.println(&quot;Selecting...&quot;);\r\n        System.out.println(selector.select());\r\n        System.out.println(selector.selectedKeys().size());\r\n        System.out.println(clientKey.readyOps());\r\n      }\r\n    }\r\n\r\nAfter the above server receives a connection, the very first &lt;code&gt;select()&lt;/code&gt; on the connection exits without blocking and there are no keys with ready operations. I don&#39;t know why Java behaves in this way, but it appears many people get bitten by this behavior.\r\n\r\nThe outcome is the same on Sun&#39;s JVM 1.5.0_06 on Windows XP as well as Sun&#39;s JVM 1.5.0_05 and 1.4.2_04 on Linux 2.6.","title":"Java NIO select() returns without selected keys - why?","body":"<p>Short answer: remove <code>OP_CONNECT</code> from the list of operations you are interested in for the accepted connection -- an accepted connection is already connected.</p>\n\n<p>I managed to reproduce the issue, which might be exactly what's happening to you:</p>\n\n<pre><code>import java.net.*;\nimport java.nio.channels.*;\n\n\npublic class MyNioServer {\n  public static void main(String[] params) throws Exception {\n    final ServerSocketChannel serverChannel = ServerSocketChannel.open();\n    serverChannel.configureBlocking(true);\n    serverChannel.socket().bind(new InetSocketAddress(\"localhost\", 12345));\n    System.out.println(\"Listening for incoming connections\");\n    final SocketChannel clientChannel = serverChannel.accept();\n    System.out.println(\"Accepted connection: \" + clientChannel);\n\n\n    final Selector selector = Selector.open();\n    clientChannel.configureBlocking(false);\n    final SelectionKey clientKey = clientChannel.register(selector, SelectionKey.OP_READ | SelectionKey.OP_CONNECT);\n    System.out.println(\"Selecting...\");\n    System.out.println(selector.select());\n    System.out.println(selector.selectedKeys().size());\n    System.out.println(clientKey.readyOps());\n  }\n}\n</code></pre>\n\n<p>After the above server receives a connection, the very first <code>select()</code> on the connection exits without blocking and there are no keys with ready operations. I don't know why Java behaves in this way, but it appears many people get bitten by this behavior.</p>\n\n<p>The outcome is the same on Sun's JVM 1.5.0_06 on Windows XP as well as Sun's JVM 1.5.0_05 and 1.4.2_04 on Linux 2.6.</p>\n"},{"tags":[],"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1691995730,"creation_date":1310362325,"answer_id":6646131,"question_id":204186,"body_markdown":"The reason is that `OP_CONNECT` and `OP_WRITE` are the same thing under the hood, so you should never be registered for both simultaneously (ditto `OP_ACCEPT` and `OP_READ`), and you should never be registered for `OP_CONNECT` at all when the channel is already connected, as it is in this case, having been accepted.\r\n\r\nAnd `OP_WRITE` is almost always ready, except when the socket send buffer in the kernel is full, so you should only register for that after you get a zero length write. So by registering the already connected channel for `OP_CONNECT,` you were really registering for `OP_WRITE,` which was ready, so `select()` got triggered.","title":"Java NIO select() returns without selected keys - why?","body":"<p>The reason is that <code>OP_CONNECT</code> and <code>OP_WRITE</code> are the same thing under the hood, so you should never be registered for both simultaneously (ditto <code>OP_ACCEPT</code> and <code>OP_READ</code>), and you should never be registered for <code>OP_CONNECT</code> at all when the channel is already connected, as it is in this case, having been accepted.</p>\n<p>And <code>OP_WRITE</code> is almost always ready, except when the socket send buffer in the kernel is full, so you should only register for that after you get a zero length write. So by registering the already connected channel for <code>OP_CONNECT,</code> you were really registering for <code>OP_WRITE,</code> which was ready, so <code>select()</code> got triggered.</p>\n"},{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1683851486,"post_id":74562799,"comment_id":134433803,"body_markdown":"If `isConnectable()` fires you need to call `finishConnect()` and check its return value. Your `log.info()` call is wrong as well. This code is not correct.","body":"If <code>isConnectable()</code> fires you need to call <code>finishConnect()</code> and check its return value. Your <code>log.info()</code> call is wrong as well. This code is not correct."}],"tags":[],"owner":{"account_id":329609,"reputation":159,"user_id":5260478,"display_name":"Pavel Moukhataev"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1691687526,"creation_date":1669302498,"answer_id":74562799,"question_id":204186,"body_markdown":"Upd: added client.finishConnect() as per [@user207421][1] suggestion \r\n\r\nYou should use `OP_CONNECT` when you connect to server, not when you are listening for incoming connections. Also make sure to configureBlocking **before** connect:\r\n\r\n        Selector selector = Selector.open();\r\n        SocketChannel serverChannel = SocketChannel.open(StandardProtocolFamily.INET);\r\n        serverChannel.configureBlocking(false);\r\n        serverChannel.connect(new InetSocketAddress(&quot;localhost&quot;, 5454));\r\n        serverChannel.register(selector, SelectionKey.OP_CONNECT);\r\n        // event process cycle\r\n        { \r\n            int count = selector.select();\r\n            for (SelectionKey key : selector.selectedKeys()) {\r\n                log.info(&quot;    {}&quot;, key.readyOps());\r\n                if (key.isConnectable()) {\r\n                    boolean connected = client.finishConnect();\r\n                    log.info(&quot;Connection is ready: {}&quot;, connected);\r\n                    if (connected) {\r\n                        key.interestOps(SelectionKey.OP_READ);\r\n                    }\r\n                }\r\n                if (key.isReadable()) {\r\n                    // read data here\r\n                }\r\n        }\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/207421/user207421","title":"Java NIO select() returns without selected keys - why?","body":"<p>Upd: added client.finishConnect() as per <a href=\"https://stackoverflow.com/users/207421/user207421\">@user207421</a> suggestion</p>\n<p>You should use <code>OP_CONNECT</code> when you connect to server, not when you are listening for incoming connections. Also make sure to configureBlocking <strong>before</strong> connect:</p>\n<pre><code>    Selector selector = Selector.open();\n    SocketChannel serverChannel = SocketChannel.open(StandardProtocolFamily.INET);\n    serverChannel.configureBlocking(false);\n    serverChannel.connect(new InetSocketAddress(&quot;localhost&quot;, 5454));\n    serverChannel.register(selector, SelectionKey.OP_CONNECT);\n    // event process cycle\n    { \n        int count = selector.select();\n        for (SelectionKey key : selector.selectedKeys()) {\n            log.info(&quot;    {}&quot;, key.readyOps());\n            if (key.isConnectable()) {\n                boolean connected = client.finishConnect();\n                log.info(&quot;Connection is ready: {}&quot;, connected);\n                if (connected) {\n                    key.interestOps(SelectionKey.OP_READ);\n                }\n            }\n            if (key.isReadable()) {\n                // read data here\n            }\n    }\n</code></pre>\n"}],"owner":{"account_id":13900,"reputation":221,"user_id":28164,"display_name":"Frank Taylor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6876,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":205354,"answer_count":3,"score":9,"last_activity_date":1691995730,"creation_date":1224063969,"question_id":204186,"body_markdown":"In writing some test code I have found that Selector.select() can return without Selector.selectedKeys() containing any keys to process. This is happening in a tight loop when I register an accept()ed channel with\r\n\r\n&lt;pre&gt;SelectionKey.OP_READ | SelectionKey.OP_CONNECT&lt;/pre&gt;\r\n\r\nas the operations of interest.\r\n\r\nAccording to the docs, select() should return when:\r\n\r\n1) There are channels that can be acted upon.\r\n\r\n2) You explicitly call Selector.wakeup() - no keys are selected.\r\n\r\n3) You explicitly Thread.interrupt() the thread doing the select() - no keys are selected.\r\n\r\nIf I get no keys after the select() I must be in cases (2) and (3). However, my code is not calling wakeup() or interrupt() to initiate these returns.\r\n\r\nAny ideas as to what is causing this behaviour?\r\n","title":"Java NIO select() returns without selected keys - why?","body":"<p>In writing some test code I have found that Selector.select() can return without Selector.selectedKeys() containing any keys to process. This is happening in a tight loop when I register an accept()ed channel with</p>\n\n<pre>SelectionKey.OP_READ | SelectionKey.OP_CONNECT</pre>\n\n<p>as the operations of interest.</p>\n\n<p>According to the docs, select() should return when:</p>\n\n<p>1) There are channels that can be acted upon.</p>\n\n<p>2) You explicitly call Selector.wakeup() - no keys are selected.</p>\n\n<p>3) You explicitly Thread.interrupt() the thread doing the select() - no keys are selected.</p>\n\n<p>If I get no keys after the select() I must be in cases (2) and (3). However, my code is not calling wakeup() or interrupt() to initiate these returns.</p>\n\n<p>Any ideas as to what is causing this behaviour?</p>\n"},{"tags":["java","jquery","rest","get"],"answers":[{"comments":[{"owner":{"account_id":29219597,"reputation":11,"user_id":22385606,"display_name":"Allen Poirier"},"score":0,"creation_date":1691984100,"post_id":76896082,"comment_id":135559568,"body_markdown":"Thank you for the quick answer. \nI’m consuming a service to get documents from an external application. As a service consumer, I don’t think either of the suggestions would work for me.","body":"Thank you for the quick answer.  I’m consuming a service to get documents from an external application. As a service consumer, I don’t think either of the suggestions would work for me."},{"owner":{"account_id":4874824,"reputation":8171,"user_id":3930247,"accept_rate":78,"display_name":"technophyle"},"score":0,"creation_date":1691984131,"post_id":76896082,"comment_id":135559571,"body_markdown":"What&#39;s the service you&#39;re using?","body":"What&#39;s the service you&#39;re using?"},{"owner":{"account_id":29219597,"reputation":11,"user_id":22385606,"display_name":"Allen Poirier"},"score":0,"creation_date":1691985075,"post_id":76896082,"comment_id":135559636,"body_markdown":"Hyland onbase -get stored documents by id","body":"Hyland onbase -get stored documents by id"}],"tags":[],"owner":{"account_id":4874824,"reputation":8171,"user_id":3930247,"accept_rate":78,"display_name":"technophyle"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691982859,"creation_date":1691982859,"answer_id":76896082,"question_id":76896037,"body_markdown":"First of all, if you don&#39;t want users to randomly view documents, you need to implement a proper authorization on the backend, so that even if users try a random (but correct) unique ID, the API rejects the request with 403.\r\n\r\nSecond, if you want anyone with a valid URL to be able to access the documents without being authorized, but still don&#39;t want them to guess the unique IDs, you may want to add a new public-facing field in the DB and let them use it in the URL instead of the actual `uniqueID` value in the DB.\r\n\r\nIn any case, the changes you need to make should be done on the backend because there&#39;s no way to &quot;hide&quot; query parameters from the user if you want them to open it with a link on the browser, i.e. let them use a GET request.","title":"How to remove parameter’s value from a GET call","body":"<p>First of all, if you don't want users to randomly view documents, you need to implement a proper authorization on the backend, so that even if users try a random (but correct) unique ID, the API rejects the request with 403.</p>\n<p>Second, if you want anyone with a valid URL to be able to access the documents without being authorized, but still don't want them to guess the unique IDs, you may want to add a new public-facing field in the DB and let them use it in the URL instead of the actual <code>uniqueID</code> value in the DB.</p>\n<p>In any case, the changes you need to make should be done on the backend because there's no way to &quot;hide&quot; query parameters from the user if you want them to open it with a link on the browser, i.e. let them use a GET request.</p>\n"},{"comments":[{"owner":{"account_id":29219597,"reputation":11,"user_id":22385606,"display_name":"Allen Poirier"},"score":0,"creation_date":1691984144,"post_id":76896095,"comment_id":135559572,"body_markdown":"I’m the service consumer btw.  I appreciate the quick response and your comment.","body":"I’m the service consumer btw.  I appreciate the quick response and your comment."}],"tags":[],"owner":{"account_id":29026638,"reputation":16,"user_id":22234634,"display_name":"cedar"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691983147,"creation_date":1691983147,"answer_id":76896095,"question_id":76896037,"body_markdown":"Good going Allen, the scenario currently you have is an open question for discussion and can have multiple solutions to implement.\r\n\r\nYou are right on the part where users can experiment with ids to get your data of users ideally he/she shouldn&#39;t access. \r\n\r\nOne way to curb this is, your ID it&#39;s not the actual id of let&#39;s say database or sort. you can use temp ids (tokens) which then internally maps to actuals ids of the system/db.\r\n\r\nThis will solve a few issues for you. And now to make sure that you hand out these tokens to authorized users you need to implement an access control layer.\r\n\r\nAs I mentioned this is an open topic for discussion I hope my answer serves you a good starting point to work upon.\r\n","title":"How to remove parameter’s value from a GET call","body":"<p>Good going Allen, the scenario currently you have is an open question for discussion and can have multiple solutions to implement.</p>\n<p>You are right on the part where users can experiment with ids to get your data of users ideally he/she shouldn't access.</p>\n<p>One way to curb this is, your ID it's not the actual id of let's say database or sort. you can use temp ids (tokens) which then internally maps to actuals ids of the system/db.</p>\n<p>This will solve a few issues for you. And now to make sure that you hand out these tokens to authorized users you need to implement an access control layer.</p>\n<p>As I mentioned this is an open topic for discussion I hope my answer serves you a good starting point to work upon.</p>\n"},{"comments":[{"owner":{"account_id":29219597,"reputation":11,"user_id":22385606,"display_name":"Allen Poirier"},"score":0,"creation_date":1691988036,"post_id":76896240,"comment_id":135559856,"body_markdown":"The document unique ids are generated by the document management system, then, it’s sent to my system, then my system stores it in the document table. And then to get the document, we get the document by the document unique id using GET call. Thank you for the quick reply.","body":"The document unique ids are generated by the document management system, then, it’s sent to my system, then my system stores it in the document table. And then to get the document, we get the document by the document unique id using GET call. Thank you for the quick reply."},{"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"score":0,"creation_date":1691988405,"post_id":76896240,"comment_id":135559893,"body_markdown":"When the document comes to your system, you can assign unique uuids to them before you save them to your system. \n\nBut, adding a new column to the db will require you to update the existing data as well which might or might not be feasible.","body":"When the document comes to your system, you can assign unique uuids to them before you save them to your system.   But, adding a new column to the db will require you to update the existing data as well which might or might not be feasible."},{"owner":{"account_id":29219597,"reputation":11,"user_id":22385606,"display_name":"Allen Poirier"},"score":0,"creation_date":1692012485,"post_id":76896240,"comment_id":135563747,"body_markdown":"That I may be able to do. So, are you saying to send the uuids in the request to get the document from onbase?","body":"That I may be able to do. So, are you saying to send the uuids in the request to get the document from onbase?"},{"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"score":0,"creation_date":1692016120,"post_id":76896240,"comment_id":135564435,"body_markdown":"What I was saying is: 1. Add uuid column in your document table 2. When the document is sent from the DMS to your system, assign uuid to them and save to dB 3. Make api call with uuid 4. Fetch uuid from the GET request param, query db with uuid and get the document.","body":"What I was saying is: 1. Add uuid column in your document table 2. When the document is sent from the DMS to your system, assign uuid to them and save to dB 3. Make api call with uuid 4. Fetch uuid from the GET request param, query db with uuid and get the document."},{"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"score":0,"creation_date":1692016493,"post_id":76896240,"comment_id":135564499,"body_markdown":"It is not 100 percent full proof. Users might still be able to guess the uuid. But ,it will be very difficult and this solution is certainly improvement over your existing approach. Atleast, until you implement authentication.","body":"It is not 100 percent full proof. Users might still be able to guess the uuid. But ,it will be very difficult and this solution is certainly improvement over your existing approach. Atleast, until you implement authentication."},{"owner":{"account_id":29219597,"reputation":11,"user_id":22385606,"display_name":"Allen Poirier"},"score":0,"creation_date":1692018495,"post_id":76896240,"comment_id":135564902,"body_markdown":"That will requires a change from the DMS side. I don’t think they are willing to make any changes. I appreciate your comments. \nRegarding authentication, how would that work in this situation? \nCan I use a POST and have the doc details inside the body of the request instead of the URL?","body":"That will requires a change from the DMS side. I don’t think they are willing to make any changes. I appreciate your comments.  Regarding authentication, how would that work in this situation?  Can I use a POST and have the doc details inside the body of the request instead of the URL?"},{"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"score":0,"creation_date":1692019710,"post_id":76896240,"comment_id":135565207,"body_markdown":"Technically POST will work, although POST is generally used to create a resource. But, it could be a workaround.","body":"Technically POST will work, although POST is generally used to create a resource. But, it could be a workaround."},{"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"score":0,"creation_date":1692020376,"post_id":76896240,"comment_id":135565355,"body_markdown":"Authentication is to make sure that random unauthenticated users cannot access the docs via the GET api.","body":"Authentication is to make sure that random unauthenticated users cannot access the docs via the GET api."},{"owner":{"account_id":29219597,"reputation":11,"user_id":22385606,"display_name":"Allen Poirier"},"score":0,"creation_date":1692330976,"post_id":76896240,"comment_id":135611441,"body_markdown":"Got that! Thank you. \nThese users are not random users -they successfully authenticate-, but we still don’t want them to guess what the uids are and access other files’ docs.","body":"Got that! Thank you.  These users are not random users -they successfully authenticate-, but we still don’t want them to guess what the uids are and access other files’ docs."}],"tags":[],"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"comment_count":9,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691987363,"creation_date":1691986629,"answer_id":76896240,"question_id":76896037,"body_markdown":"A good option is to use `UUID`s.They can be used to uniquely identify a resource. They are unique universally and use 128 bits to store the information.\r\n\r\nThey look something like:\r\n\r\n    cc26d321-58fc-4cc1-978a-03f2bbdb2a55\r\n\r\nJust add a column of type `UUID` in your document entity and use it as the unique identifier.\r\n\r\nIt will solve your problem as well because it will be difficult to guess the next uuid in comparison to the integer numbers.\r\n\r\nMoreover, you might consider authenticating the request as well if you do not want unauthorised users to access the resources.\r\n\r\nMore details here: https://docs.oracle.com/javase/8/docs/api/java/util/UUID.html","title":"How to remove parameter’s value from a GET call","body":"<p>A good option is to use <code>UUID</code>s.They can be used to uniquely identify a resource. They are unique universally and use 128 bits to store the information.</p>\n<p>They look something like:</p>\n<pre><code>cc26d321-58fc-4cc1-978a-03f2bbdb2a55\n</code></pre>\n<p>Just add a column of type <code>UUID</code> in your document entity and use it as the unique identifier.</p>\n<p>It will solve your problem as well because it will be difficult to guess the next uuid in comparison to the integer numbers.</p>\n<p>Moreover, you might consider authenticating the request as well if you do not want unauthorised users to access the resources.</p>\n<p>More details here: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/UUID.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/UUID.html</a></p>\n"}],"owner":{"account_id":29219597,"reputation":11,"user_id":22385606,"display_name":"Allen Poirier"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1691995657,"creation_date":1691981974,"question_id":76896037,"body_markdown":"I have a GET call to a document management system to get a document based on its document UniqueID. The URL looks like this: www.url.com/getdocument?uniqueid=“**12345**”\r\nSince the uniqueid is visible in the users browser, users can navigate through other documents by randomly trying different uniqueids. \r\nI’m looking to replace the value of the uniqueid with a variable that can be used as part of the URL. \r\n\r\nI thought about storing the uniqueid value in a variable and using it in the URL. I’m just not sure how this should be done -high level design prescriptive-","title":"How to remove parameter’s value from a GET call","body":"<p>I have a GET call to a document management system to get a document based on its document UniqueID. The URL looks like this: <a href=\"http://www.url.com/getdocument?uniqueid=%E2%80%9C**12345**%E2%80%9D\" rel=\"nofollow noreferrer\">www.url.com/getdocument?uniqueid=“**12345**”</a>\nSince the uniqueid is visible in the users browser, users can navigate through other documents by randomly trying different uniqueids.\nI’m looking to replace the value of the uniqueid with a variable that can be used as part of the URL.</p>\n<p>I thought about storing the uniqueid value in a variable and using it in the URL. I’m just not sure how this should be done -high level design prescriptive-</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":2680559,"reputation":5110,"user_id":2317829,"accept_rate":76,"display_name":"eebbesen"},"score":0,"creation_date":1388679107,"post_id":7339264,"comment_id":68852878,"body_markdown":"Not sure if there was file corruption or what, but after confirming dependencies via @TomaszNurkiewicz&#39;s method I was able to resolve this issue by deleting the jar from my local m2 repository when I ran the tests.","body":"Not sure if there was file corruption or what, but after confirming dependencies via @TomaszNurkiewicz&#39;s method I was able to resolve this issue by deleting the jar from my local m2 repository when I ran the tests."},{"owner":{"account_id":1856445,"reputation":5907,"user_id":1681903,"accept_rate":71,"display_name":"vanduc1102"},"score":0,"creation_date":1471829690,"post_id":7339264,"comment_id":65489073,"body_markdown":"First, I deleted commons-lang in repository, and it worked.","body":"First, I deleted commons-lang in repository, and it worked."}],"answers":[{"comments":[{"owner":{"account_id":472259,"reputation":4851,"user_id":880642,"accept_rate":95,"display_name":"Rondel"},"score":6,"creation_date":1315424265,"post_id":7339357,"comment_id":8852123,"body_markdown":"Thanks that helped a bunch! I added a reference for the commons-lang 2.4 to my jar pom.xml and now it works. I closed and reopened command prompt before doing the clean package and then it downloaded the correct versions of the jars and built successfully. Should&#39;ve posted this question hours ago. Thanks","body":"Thanks that helped a bunch! I added a reference for the commons-lang 2.4 to my jar pom.xml and now it works. I closed and reopened command prompt before doing the clean package and then it downloaded the correct versions of the jars and built successfully. Should&#39;ve posted this question hours ago. Thanks"},{"owner":{"account_id":1532234,"reputation":79,"user_id":1429165,"display_name":"RedBirdISU"},"score":0,"creation_date":1441733146,"post_id":7339357,"comment_id":52789443,"body_markdown":"What command prompt we are talking about here? I am using netbeans on windows 8","body":"What command prompt we are talking about here? I am using netbeans on windows 8"}],"tags":[],"owner":{"account_id":299251,"reputation":335925,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"comment_count":2,"down_vote_count":1,"up_vote_count":42,"is_accepted":true,"score":41,"last_activity_date":1315422980,"creation_date":1315422980,"answer_id":7339357,"question_id":7339264,"body_markdown":"Try running the following commands and examine the output:\r\n\r\n    $ mvn dependency:tree\r\n    $ mvn help:effective-pom\r\n\r\nLook for `commons-lang`, maybe something will draw your attention like excludes or dependency overrides. Also, is:\r\n\r\n    $ mvn dependency:copy-dependencies\r\n\r\ncopying `commons-lang` JAR to your `target`?","title":"Maven package error: org.apache.commons-lang does not exist (Java)","body":"<p>Try running the following commands and examine the output:</p>\n\n<pre><code>$ mvn dependency:tree\n$ mvn help:effective-pom\n</code></pre>\n\n<p>Look for <code>commons-lang</code>, maybe something will draw your attention like excludes or dependency overrides. Also, is:</p>\n\n<pre><code>$ mvn dependency:copy-dependencies\n</code></pre>\n\n<p>copying <code>commons-lang</code> JAR to your <code>target</code>?</p>\n"},{"tags":[],"owner":{"account_id":7002481,"reputation":1,"user_id":5368067,"display_name":"Madhur Malu"},"comment_count":0,"down_vote_count":11,"up_vote_count":0,"is_accepted":false,"score":-11,"last_activity_date":1477396719,"creation_date":1477396719,"answer_id":40239377,"question_id":7339264,"body_markdown":"In src/main/java there would be a .auth folder. Open the folder, Go to AuthController.java file and delete the import io.swagger line. Restart.","title":"Maven package error: org.apache.commons-lang does not exist (Java)","body":"<p>In src/main/java there would be a .auth folder. Open the folder, Go to AuthController.java file and delete the import io.swagger line. Restart.</p>\n"},{"tags":[],"owner":{"account_id":15947528,"reputation":261,"user_id":11507665,"display_name":"Kavya Pandian"},"comment_count":0,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1557982516,"creation_date":1557982516,"answer_id":56161076,"question_id":7339264,"body_markdown":"Adding following dependency to pom.xml in dependencies tag helped me:\r\n\r\n        &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n        &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n","title":"Maven package error: org.apache.commons-lang does not exist (Java)","body":"<p>Adding following dependency to pom.xml in dependencies tag helped me:</p>\n\n<pre><code>    &lt;dependency&gt;\n    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n    &lt;version&gt;3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3924607,"reputation":802,"user_id":3245621,"display_name":"Janet"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1560290531,"creation_date":1560290531,"answer_id":56552227,"question_id":7339264,"body_markdown":"I did &quot;mvn clean install -U&quot; without settings.xml, so it erred. Then I added settings.xml, did &quot;mvn clean install -U&quot;, it said &quot;error:org.apache.commons-lang does not exist&quot;. I know the code was built successfully on another machine. So it was not my code. After about 2 or 3 hours, I finally realized it was .m2\\repository was corrupted by my first run. So just delete &quot;repository&quot; folder complete and run &quot;mvn clean install -U&quot; and succeeded. ","title":"Maven package error: org.apache.commons-lang does not exist (Java)","body":"<p>I did \"mvn clean install -U\" without settings.xml, so it erred. Then I added settings.xml, did \"mvn clean install -U\", it said \"error:org.apache.commons-lang does not exist\". I know the code was built successfully on another machine. So it was not my code. After about 2 or 3 hours, I finally realized it was .m2\\repository was corrupted by my first run. So just delete \"repository\" folder complete and run \"mvn clean install -U\" and succeeded. </p>\n"},{"tags":[],"owner":{"account_id":4405015,"reputation":634,"user_id":3589678,"accept_rate":25,"display_name":"Ashu"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1685421166,"creation_date":1685420667,"answer_id":76361616,"question_id":7339264,"body_markdown":"Add the following in the pom.xml\r\n  \r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n    &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n    &lt;version&gt;3.12.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nand make sure that your Java code has this import entry\r\nimport org.apache.commons.lang3.StringUtils;\r\nNOT import org.apache.commons.lang.StringUtils;\r\n\r\nPlease pay attention to lang3 that makes the difference out here.\r\n","title":"Maven package error: org.apache.commons-lang does not exist (Java)","body":"<p>Add the following in the pom.xml</p>\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n&lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n&lt;version&gt;3.12.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>and make sure that your Java code has this import entry\nimport org.apache.commons.lang3.StringUtils;\nNOT import org.apache.commons.lang.StringUtils;</p>\n<p>Please pay attention to lang3 that makes the difference out here.</p>\n"},{"tags":[],"owner":{"account_id":13389301,"reputation":1,"user_id":9662114,"display_name":"anusha thaninki"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691994997,"creation_date":1691994997,"answer_id":76896772,"question_id":7339264,"body_markdown":"I recently faced the same Issue. I tried all the approaches but what I did at last is downloaded the jar file and extracted. In intelliJ, Files &gt; projectStructure &gt; libraries. Click on the plus symbol and the extracted jar file there. I worked as wonder.","title":"Maven package error: org.apache.commons-lang does not exist (Java)","body":"<p>I recently faced the same Issue. I tried all the approaches but what I did at last is downloaded the jar file and extracted. In intelliJ, Files &gt; projectStructure &gt; libraries. Click on the plus symbol and the extracted jar file there. I worked as wonder.</p>\n"}],"owner":{"account_id":472259,"reputation":4851,"user_id":880642,"accept_rate":95,"display_name":"Rondel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":148238,"favorite_count":0,"down_vote_count":0,"up_vote_count":41,"accepted_answer_id":7339357,"answer_count":6,"score":41,"last_activity_date":1691994997,"creation_date":1315422568,"question_id":7339264,"body_markdown":"I&#39;m using MyEclipse to develop a really simple Java Struts project. Everything was working fine until I wanted to use the `StringUtils` class in **org.apache.commons.lang**. In MyEclipse I imported the package like\r\n\r\n    import org.apache.commons.lang.StringUtils;\r\n\r\nI added the Jar file for **commons-lang-2.4** to my build path. This all works fine and dandy and I get the Intellisense and no errors in Eclipse or anything. Now, when I go to do a `mvn clean package`, I get an error saying that \r\n\r\n&gt; The package org.apache.commons.lang does not exist\r\n\r\nI checked in my war/Pom.xml file and I do have it declared as a dependency\r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n            &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n            &lt;version&gt;4.0.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-lang&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;\r\n            &lt;version&gt;2.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n      \r\n    &lt;/dependencies&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n\r\nFrom my research I figured that Maven should download the package and install it to my local repository if it doesn&#39;t exists. I checked the repository and the jar file was in there. I figured the jar file must be corrupted so I deleted the **commons-lang** folder to get a fresh download of commons-lang. Now this is where it blows my mind, after I deleted it from the local repository and ran a `mvn clean package`, it goes out and downloads the **commons-lang-2.1**.pom and jar (even though the pom.xml has 2.4) **BUT** still gives a compilation failure saying that *the package org.apache.commons.lang does not exist*. \r\n\r\nI haven&#39;t been using Maven for very long so I&#39;m not sure how to go about fixing this. Am I missing something? Do I need to add the dependency in another pom.xml file somewhere else?\r\n","title":"Maven package error: org.apache.commons-lang does not exist (Java)","body":"<p>I'm using MyEclipse to develop a really simple Java Struts project. Everything was working fine until I wanted to use the <code>StringUtils</code> class in <strong>org.apache.commons.lang</strong>. In MyEclipse I imported the package like</p>\n\n<pre><code>import org.apache.commons.lang.StringUtils;\n</code></pre>\n\n<p>I added the Jar file for <strong>commons-lang-2.4</strong> to my build path. This all works fine and dandy and I get the Intellisense and no errors in Eclipse or anything. Now, when I go to do a <code>mvn clean package</code>, I get an error saying that </p>\n\n<blockquote>\n  <p>The package org.apache.commons.lang does not exist</p>\n</blockquote>\n\n<p>I checked in my war/Pom.xml file and I do have it declared as a dependency</p>\n\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n        &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n        &lt;version&gt;4.0.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-lang&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;\n        &lt;version&gt;2.4&lt;/version&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n</code></pre>\n\n<p></p>\n\n<p>From my research I figured that Maven should download the package and install it to my local repository if it doesn't exists. I checked the repository and the jar file was in there. I figured the jar file must be corrupted so I deleted the <strong>commons-lang</strong> folder to get a fresh download of commons-lang. Now this is where it blows my mind, after I deleted it from the local repository and ran a <code>mvn clean package</code>, it goes out and downloads the <strong>commons-lang-2.1</strong>.pom and jar (even though the pom.xml has 2.4) <strong>BUT</strong> still gives a compilation failure saying that <em>the package org.apache.commons.lang does not exist</em>. </p>\n\n<p>I haven't been using Maven for very long so I'm not sure how to go about fixing this. Am I missing something? Do I need to add the dependency in another pom.xml file somewhere else?</p>\n"},{"tags":["java","sql","apache-spark"],"answers":[{"tags":[],"owner":{"account_id":17134943,"reputation":9221,"user_id":12400214,"display_name":"Gabio"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691994173,"creation_date":1691994173,"answer_id":76896692,"question_id":76893756,"body_markdown":"You can use `coalesce` function (also from `org.apache.spark.sql.functions`) to return another column if the `lag/lead` expressions returns `null`:\r\n\r\n```java\r\ndataset\r\n    .withColumn(&quot;LAST_NUM_DAY&quot;, coalesce(lag(col(&quot;NUM_DAY&quot;),1, -1).over(someSpec), col(&quot;DEFAULT_COLUMN&quot;)));\r\n```","title":"Default value from another column for lead/lag in Spark Sql","body":"<p>You can use <code>coalesce</code> function (also from <code>org.apache.spark.sql.functions</code>) to return another column if the <code>lag/lead</code> expressions returns <code>null</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>dataset\n    .withColumn(&quot;LAST_NUM_DAY&quot;, coalesce(lag(col(&quot;NUM_DAY&quot;),1, -1).over(someSpec), col(&quot;DEFAULT_COLUMN&quot;)));\n</code></pre>\n"}],"owner":{"account_id":13134034,"reputation":41,"user_id":9487697,"display_name":"clipper1995"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691994355,"creation_date":1691936180,"question_id":76893756,"body_markdown":"I have a question about the lag(), lead() functions from the `org.apache.spark.sql` package (third version);\r\n\r\nI can provide a default value in the third argument if lag() or lead() returns null.\r\n\r\nOn pure sql, the third argument can be passed both a literal and a column of the table over which the query is performed.\r\n\r\nIn `org.apache.spark.sql` I can only pass a scalar value literal.\r\n\r\nMaybe there is some way in spark java to get instead of null the column of the table on which the query is being executed?\r\n\r\n```\r\ndataset\r\n        .withColumn(&quot;LAST_NUM_DAY&quot;, lag(col(&quot;NUM_DAY&quot;),1, -1).over(someSpec))\r\n        .withColumn(&quot;NEXT_NUM_DAY&quot;, lead(col(&quot;NUM_DAY&quot;),1, -1).over(someSpec))\r\n        ;\r\n```\r\n\r\n\r\n\r\n","title":"Default value from another column for lead/lag in Spark Sql","body":"<p>I have a question about the lag(), lead() functions from the <code>org.apache.spark.sql</code> package (third version);</p>\n<p>I can provide a default value in the third argument if lag() or lead() returns null.</p>\n<p>On pure sql, the third argument can be passed both a literal and a column of the table over which the query is performed.</p>\n<p>In <code>org.apache.spark.sql</code> I can only pass a scalar value literal.</p>\n<p>Maybe there is some way in spark java to get instead of null the column of the table on which the query is being executed?</p>\n<pre><code>dataset\n        .withColumn(&quot;LAST_NUM_DAY&quot;, lag(col(&quot;NUM_DAY&quot;),1, -1).over(someSpec))\n        .withColumn(&quot;NEXT_NUM_DAY&quot;, lead(col(&quot;NUM_DAY&quot;),1, -1).over(someSpec))\n        ;\n</code></pre>\n"},{"tags":["java","oracle","nullpointerexception","jasper-reports","redhat"],"comments":[{"owner":{"account_id":5626156,"reputation":593,"user_id":4457564,"display_name":"Ewa"},"score":0,"creation_date":1690244014,"post_id":76356076,"comment_id":135323260,"body_markdown":"Installing the fonts packages helped me, when running on alpine. Particularly: `apk add --no-cache msttcorefonts-installer fontconfig &amp;&amp; update-ms-fonts`. See: https://stackoverflow.com/a/74978195/4457564 The names of the packages might be a bit different on Red Hat Linux","body":"Installing the fonts packages helped me, when running on alpine. Particularly: <code>apk add --no-cache msttcorefonts-installer fontconfig &amp;&amp; update-ms-fonts</code>. See: <a href=\"https://stackoverflow.com/a/74978195/4457564\">stackoverflow.com/a/74978195/4457564</a> The names of the packages might be a bit different on Red Hat Linux"}],"answers":[{"comments":[{"owner":{"account_id":5988641,"reputation":121,"user_id":4705385,"display_name":"Rusli Usman"},"score":0,"creation_date":1687275239,"post_id":76463460,"comment_id":134912357,"body_markdown":"That solves my problem.  Thanks.","body":"That solves my problem.  Thanks."}],"tags":[],"owner":{"account_id":28811145,"reputation":31,"user_id":22065819,"display_name":"Honza Velčovsk&#253;"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1686648490,"creation_date":1686648413,"answer_id":76463460,"question_id":76356076,"body_markdown":"the problem is with Java :)\r\n\r\nWe solved it, by copying the folder and file from the old JDK.\r\n\r\nMake copy from JDK8/jre/lib :\r\n\r\n- file fontconfig.bfc\r\n- folder fonts\r\n\r\nTo JDK17/lib\r\n\r\nBR Jan V.","title":"Cannot load from short array because &quot;sun.awt.FontConfiguration.head&quot; is null thrown with Java 17 and Jasper 6.20.0","body":"<p>the problem is with Java :)</p>\n<p>We solved it, by copying the folder and file from the old JDK.</p>\n<p>Make copy from JDK8/jre/lib :</p>\n<ul>\n<li>file fontconfig.bfc</li>\n<li>folder fonts</li>\n</ul>\n<p>To JDK17/lib</p>\n<p>BR Jan V.</p>\n"},{"tags":[],"owner":{"account_id":14606405,"reputation":113,"user_id":10549133,"display_name":"Ndrik7"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691994331,"creation_date":1691994331,"answer_id":76896709,"question_id":76356076,"body_markdown":"Install fontconfig helped me to solve the error.\r\n\r\n[https://yum-info.contradodigital.com/view-package/base/fontconfig/][1]\r\n\r\njust run command `sudo yum install fontconfig` and restart the application server. The error is gone.\r\n\r\n\r\n  [1]: https://yum-info.contradodigital.com/view-package/base/fontconfig/","title":"Cannot load from short array because &quot;sun.awt.FontConfiguration.head&quot; is null thrown with Java 17 and Jasper 6.20.0","body":"<p>Install fontconfig helped me to solve the error.</p>\n<p><a href=\"https://yum-info.contradodigital.com/view-package/base/fontconfig/\" rel=\"nofollow noreferrer\">https://yum-info.contradodigital.com/view-package/base/fontconfig/</a></p>\n<p>just run command <code>sudo yum install fontconfig</code> and restart the application server. The error is gone.</p>\n"}],"owner":{"account_id":28701141,"reputation":11,"user_id":21978298,"display_name":"Madhawa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3600,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1691994331,"creation_date":1685351815,"question_id":76356076,"body_markdown":"We upgrading the our application to Java 17 (from Java 8) and Jasper to 6.20.0 (from 6.0.3). During this upgrade Jasper reports getting failed with the two exceptions.\r\nThe fonts is already exported and used as an extension jar which was working fine with java 8 and jasper 6.0.3. But once the upgrade is done, following given exceptions occurs.\r\n\r\nOS     :  red hat linux 7.9\r\ntomcat :  jws 5.4 (-Djava.awt.headless=true)   \r\njdk    :  Oracle Java 17 \r\n            \r\n1) &quot;Caused by: java.lang.NullPointerException: Cannot load from short array because   &quot;sun.awt.FontConfiguration.head&quot; is null&quot; \r\n\r\n2) Could not initialize class net.sf.jasperreports.engine.util.JRStyledTextParser.\r\n\r\n\r\nTried on following resolutions but failed with them\r\n\r\n\r\n1) first tried to enable healess mode, but it did not resolve it\r\n2) most of the dependent optional jar for the Jasper 6.20.0 was aslo added but did not resolve it\r\n3) the jasper file for th report was regenerated based on the java 17 , but did not helped\r\n4) extracted the font from the extetion jar and added with the resources folder but it did not resolve","title":"Cannot load from short array because &quot;sun.awt.FontConfiguration.head&quot; is null thrown with Java 17 and Jasper 6.20.0","body":"<p>We upgrading the our application to Java 17 (from Java 8) and Jasper to 6.20.0 (from 6.0.3). During this upgrade Jasper reports getting failed with the two exceptions.\nThe fonts is already exported and used as an extension jar which was working fine with java 8 and jasper 6.0.3. But once the upgrade is done, following given exceptions occurs.</p>\n<p>OS     :  red hat linux 7.9\ntomcat :  jws 5.4 (-Djava.awt.headless=true)<br />\njdk    :  Oracle Java 17</p>\n<ol>\n<li><p>&quot;Caused by: java.lang.NullPointerException: Cannot load from short array because   &quot;sun.awt.FontConfiguration.head&quot; is null&quot;</p>\n</li>\n<li><p>Could not initialize class net.sf.jasperreports.engine.util.JRStyledTextParser.</p>\n</li>\n</ol>\n<p>Tried on following resolutions but failed with them</p>\n<ol>\n<li>first tried to enable healess mode, but it did not resolve it</li>\n<li>most of the dependent optional jar for the Jasper 6.20.0 was aslo added but did not resolve it</li>\n<li>the jasper file for th report was regenerated based on the java 17 , but did not helped</li>\n<li>extracted the font from the extetion jar and added with the resources folder but it did not resolve</li>\n</ol>\n"},{"tags":["java","smtp","mime-message"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1692053194,"post_id":76896531,"comment_id":135570953,"body_markdown":"Process the bounce emails you get, look for the error message and the original recipient, and remove these from your list. Make sure you email only people that want to receive email from you. Don&#39;t buy email lists.","body":"Process the bounce emails you get, look for the error message and the original recipient, and remove these from your list. Make sure you email only people that want to receive email from you. Don&#39;t buy email lists."}],"owner":{"account_id":28850403,"reputation":1,"user_id":22096426,"display_name":"Teja Ayyappa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691992576,"creation_date":1691992217,"question_id":76896531,"body_markdown":"\t@Override\r\n\tpublic boolean sendOnboardingEmail(String emailTo, String onboardingDateTime, String userName) {\r\n\t\tProperties prop = System.getProperties();\r\n        prop.put(&quot;mail.smtp.host&quot;, SMTP_SERVER);\r\n        prop.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\r\n        prop.put(&quot;mail.smtp.port&quot;, &quot;587&quot;);\r\n        prop.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\r\n        prop.put(&quot;mail.smtp.ssl.trust&quot;, SMTP_SERVER);\r\n\r\n        Session session = Session.getInstance(prop, null);\r\n        Message msg = new MimeMessage(session);\r\n\r\n        try {\r\n            msg.setFrom(new InternetAddress(EMAIL_FROM));\r\n            msg.setRecipients(Message.RecipientType.TO, InternetAddress.parse(emailTo, false));\r\n            msg.setSubject(EMAIL_SUBJECT);\r\n            msg.setText(EMAIL_TEXT);\r\n            msg.setSentDate(new Date());\r\n\r\n            SMTPTransport t = (SMTPTransport) session.getTransport(&quot;smtp&quot;);\r\n\r\n            t.connect(SMTP_SERVER, EMAIL_FROM, PASSWORD);\r\n\r\n            t.sendMessage(msg, msg.getAllRecipients());\r\n            t.close();\r\n\r\n            return true;\r\n        }  catch (MessagingException e) {\r\n            e.printStackTrace();\r\n            return false;\r\n        }\r\n\t\t\r\n\t}\r\n\r\n\r\n`I am using the above approach for sending emails,\r\nI have to validate emails that are sent or not sent,\r\nValid emails have been sent but some emails have shown like the below in the inbox\r\ni.e., address not found(The response was:\r\n550 5.1.1 The email account that you tried to reach does not exist. Please try double-checking the recipient&#39;s email address for typos or unnecessary spaces. Learn more at https://support.google.com/mail/?p=NoSuchUser y9-20020aa79e09000000b00687b0584e6bsor4586365pfq.1 - gsmtp)\r\n\r\ncan you suggest how to validate those mails (has sent or not)?`","title":"How to Validate Address Not Found Mails(Sent Mails) in SMTP(Java)","body":"<pre><code>@Override\npublic boolean sendOnboardingEmail(String emailTo, String onboardingDateTime, String userName) {\n    Properties prop = System.getProperties();\n    prop.put(&quot;mail.smtp.host&quot;, SMTP_SERVER);\n    prop.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\n    prop.put(&quot;mail.smtp.port&quot;, &quot;587&quot;);\n    prop.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\n    prop.put(&quot;mail.smtp.ssl.trust&quot;, SMTP_SERVER);\n\n    Session session = Session.getInstance(prop, null);\n    Message msg = new MimeMessage(session);\n\n    try {\n        msg.setFrom(new InternetAddress(EMAIL_FROM));\n        msg.setRecipients(Message.RecipientType.TO, InternetAddress.parse(emailTo, false));\n        msg.setSubject(EMAIL_SUBJECT);\n        msg.setText(EMAIL_TEXT);\n        msg.setSentDate(new Date());\n\n        SMTPTransport t = (SMTPTransport) session.getTransport(&quot;smtp&quot;);\n\n        t.connect(SMTP_SERVER, EMAIL_FROM, PASSWORD);\n\n        t.sendMessage(msg, msg.getAllRecipients());\n        t.close();\n\n        return true;\n    }  catch (MessagingException e) {\n        e.printStackTrace();\n        return false;\n    }\n    \n}\n</code></pre>\n<p>`I am using the above approach for sending emails,\nI have to validate emails that are sent or not sent,\nValid emails have been sent but some emails have shown like the below in the inbox\ni.e., address not found(The response was:\n550 5.1.1 The email account that you tried to reach does not exist. Please try double-checking the recipient's email address for typos or unnecessary spaces. Learn more at <a href=\"https://support.google.com/mail/?p=NoSuchUser\" rel=\"nofollow noreferrer\">https://support.google.com/mail/?p=NoSuchUser</a> y9-20020aa79e09000000b00687b0584e6bsor4586365pfq.1 - gsmtp)</p>\n<p>can you suggest how to validate those mails (has sent or not)?`</p>\n"},{"tags":["java","spring","streaming","resttemplate"],"comments":[{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1692005792,"post_id":76895701,"comment_id":135562489,"body_markdown":"You could use `WebClient` instead of `RestTemplate`. See [the documentation](https://docs.spring.io/spring-framework/docs/5.3.29/reference/html/web.html#webmvc-client) which mentions that `RestTemplate` is in &quot;maintenance mode&quot; since Spring 5.0 and which recommends using `WebClient` - which definitely supports streaming.","body":"You could use <code>WebClient</code> instead of <code>RestTemplate</code>. See <a href=\"https://docs.spring.io/spring-framework/docs/5.3.29/reference/html/web.html#webmvc-client\" rel=\"nofollow noreferrer\">the documentation</a> which mentions that <code>RestTemplate</code> is in &quot;maintenance mode&quot; since Spring 5.0 and which recommends using <code>WebClient</code> - which definitely supports streaming."}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1692174671,"post_id":76896510,"comment_id":135586646,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76896510/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29220149,"reputation":1,"user_id":22386034,"display_name":"Ronmi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691991901,"creation_date":1691991901,"answer_id":76896510,"question_id":76895701,"body_markdown":"Currently posting files with stream and it’s working just fine.\r\nMaybe for testing purposes try and take an http request which you know is working in stream and just add the http headers explicitly to the request, along with the buffered=false.\r\nBut again you should know it’s possible.","title":"Spring RestTemplate does not support streaming","body":"<p>Currently posting files with stream and it’s working just fine.\nMaybe for testing purposes try and take an http request which you know is working in stream and just add the http headers explicitly to the request, along with the buffered=false.\nBut again you should know it’s possible.</p>\n"}],"owner":{"account_id":441792,"reputation":377,"user_id":832091,"display_name":"marcel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691991901,"creation_date":1691972697,"question_id":76895701,"body_markdown":"There is a number of anwsers for the question on how to make RestTemplate stream the request.\r\n\r\n&lt;https://stackoverflow.com/questions/62714339/why-does-resttemplate-consume-excessive-amounts-of-memory&gt;\r\n\r\n&lt;https://stackoverflow.com/questions/34048612/post-inputstream-with-resttemplate&gt;\r\n\r\nIt looks like simple by setting the buffering to false on the requestfactory. Well, now after 3 days of debugging I think it just never actually supports streaming at all. If anyone can explain me why following explanation is wrong, it would be very helpful.\r\n\r\nI am using springframework 5.3.19. Maybe it only does not work in that version? And true, I should use WebClient but at first I wanted to understand why I am the only one on the planet not having a working solution...\r\n\r\nSo what happens when using spring RestTemplate. Here is some pseudocode to explain what is happening on a high level:\r\n\r\n```\r\nRequest request = create(args); // creates the intercepting request\r\nmessageConverters.prepare(request); // uses the intercepting request!!\r\nrequest.execute(); // create the actual request as underlying delegate\r\n```\r\n\r\n\r\nBy definition RestTemplate is a InterceptingHttpAccessor, which means it supports interceptors by having its own wrapping requestFactory (InterceptingClientHttpRequestFactory). Imho not the best practice, but ok this can be debatable. At first there is nothing problematic here, if it did not create its own request type (InterceptingClientHttpRequest). That request type is by definition a AbstractBufferingClientHttpRequest. Well, we try to stream here... \r\n\r\nOk, no worries, it behaves a bit like a proxy to the actual request... Well, not really. Only when the request is &quot;executed&quot; it will instantiate the actual underlying (streaming) request type. Ironically the InterceptingClientHttpRequest is used for preparing the request body when writing it via a message converter (which happens before executing the request). In its superclass AbstractHttpMessageConverter it checks on whether the request is instanceof StreamingHttpOutputMessage, and in that case it prepares for streaming.\r\n\r\nBut that code will never be executed since on this level the request is always an InterceptingClientHttpRequest, not a StreamingHttpOutputMessage.\r\n\r\nI tried following to bypass this behavior: I made sure the body was set on a HttpComponentsStreamingClientHttpRequest but that was simply not working because underlying the outputstream to the request was a ContentLengthOutputStream, which was actually just ignoring all the written bytes because it checks whether the length of the array of bytes is less than the content length (which is set to some default for streaming, genre 0 or -1). Anyhow the class StreamingHttpEntity inside HttpComponentsStreamingClientHttpRequest returns false for property chunked (which is something that I would expect as the value to flush chunk by chunk).\r\n\r\nAnd as far as I can see the SimpleStreamingClientHttpRequest via the SimpleClientHttpRequestFactory is unlikely to work since it has no link with the resource. It could maybe work if it was already created when interfacing with the message converter, but that is not the case, see earlier explanation. Also, a SimpleStreamingClientHttpRequest is not a StreamingHttpOutputMessage while HttpComponentsStreamingClientHttpRequest is in fact.\r\n\r\nJust a last note: the way I found out it is not streaming at all is because I had to send a file of more than 2.2 GB, which is basically the limit of a byte array in Java because its length can only be MAX_INT long. And the ByteArrayOutputStream used has that as max size (obviously), with a check boiling down to ArraysSupport.hugeLength. Which throws imho wrongly a OutOfMemoryError when you exceed that length. That should have been a RuntimeException. At first I was confused, because I actually thought the JVM had a heap size issue (which was completely not the case).\r\n\r\nSo anyone any idea where I&#39;m doing the wrong thing. Wrong assumptions? Thanks in advance.","title":"Spring RestTemplate does not support streaming","body":"<p>There is a number of anwsers for the question on how to make RestTemplate stream the request.</p>\n<p><a href=\"https://stackoverflow.com/questions/62714339/why-does-resttemplate-consume-excessive-amounts-of-memory\">Why does RestTemplate consume excessive amounts of memory?</a></p>\n<p><a href=\"https://stackoverflow.com/questions/34048612/post-inputstream-with-resttemplate\">POST InputStream with RestTemplate</a></p>\n<p>It looks like simple by setting the buffering to false on the requestfactory. Well, now after 3 days of debugging I think it just never actually supports streaming at all. If anyone can explain me why following explanation is wrong, it would be very helpful.</p>\n<p>I am using springframework 5.3.19. Maybe it only does not work in that version? And true, I should use WebClient but at first I wanted to understand why I am the only one on the planet not having a working solution...</p>\n<p>So what happens when using spring RestTemplate. Here is some pseudocode to explain what is happening on a high level:</p>\n<pre><code>Request request = create(args); // creates the intercepting request\nmessageConverters.prepare(request); // uses the intercepting request!!\nrequest.execute(); // create the actual request as underlying delegate\n</code></pre>\n<p>By definition RestTemplate is a InterceptingHttpAccessor, which means it supports interceptors by having its own wrapping requestFactory (InterceptingClientHttpRequestFactory). Imho not the best practice, but ok this can be debatable. At first there is nothing problematic here, if it did not create its own request type (InterceptingClientHttpRequest). That request type is by definition a AbstractBufferingClientHttpRequest. Well, we try to stream here...</p>\n<p>Ok, no worries, it behaves a bit like a proxy to the actual request... Well, not really. Only when the request is &quot;executed&quot; it will instantiate the actual underlying (streaming) request type. Ironically the InterceptingClientHttpRequest is used for preparing the request body when writing it via a message converter (which happens before executing the request). In its superclass AbstractHttpMessageConverter it checks on whether the request is instanceof StreamingHttpOutputMessage, and in that case it prepares for streaming.</p>\n<p>But that code will never be executed since on this level the request is always an InterceptingClientHttpRequest, not a StreamingHttpOutputMessage.</p>\n<p>I tried following to bypass this behavior: I made sure the body was set on a HttpComponentsStreamingClientHttpRequest but that was simply not working because underlying the outputstream to the request was a ContentLengthOutputStream, which was actually just ignoring all the written bytes because it checks whether the length of the array of bytes is less than the content length (which is set to some default for streaming, genre 0 or -1). Anyhow the class StreamingHttpEntity inside HttpComponentsStreamingClientHttpRequest returns false for property chunked (which is something that I would expect as the value to flush chunk by chunk).</p>\n<p>And as far as I can see the SimpleStreamingClientHttpRequest via the SimpleClientHttpRequestFactory is unlikely to work since it has no link with the resource. It could maybe work if it was already created when interfacing with the message converter, but that is not the case, see earlier explanation. Also, a SimpleStreamingClientHttpRequest is not a StreamingHttpOutputMessage while HttpComponentsStreamingClientHttpRequest is in fact.</p>\n<p>Just a last note: the way I found out it is not streaming at all is because I had to send a file of more than 2.2 GB, which is basically the limit of a byte array in Java because its length can only be MAX_INT long. And the ByteArrayOutputStream used has that as max size (obviously), with a check boiling down to ArraysSupport.hugeLength. Which throws imho wrongly a OutOfMemoryError when you exceed that length. That should have been a RuntimeException. At first I was confused, because I actually thought the JVM had a heap size issue (which was completely not the case).</p>\n<p>So anyone any idea where I'm doing the wrong thing. Wrong assumptions? Thanks in advance.</p>\n"},{"tags":["java","spring-boot","scala","apache-spark"],"comments":[{"owner":{"account_id":7034556,"reputation":12335,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":0,"creation_date":1690349283,"post_id":76768033,"comment_id":135339118,"body_markdown":"How do you &quot;see&quot; that the DF is empty?","body":"How do you &quot;see&quot; that the DF is empty?"},{"owner":{"account_id":25028548,"reputation":425,"user_id":18886549,"display_name":"shalnarkftw"},"score":0,"creation_date":1690376864,"post_id":76768033,"comment_id":135344824,"body_markdown":"check Andrey Tyukin answer here: https://stackoverflow.com/questions/48619101/how-to-bridge-scala-case-classes-and-collections-to-java","body":"check Andrey Tyukin answer here: <a href=\"https://stackoverflow.com/questions/48619101/how-to-bridge-scala-case-classes-and-collections-to-java\" title=\"how to bridge scala case classes and collections to java\">stackoverflow.com/questions/48619101/&hellip;</a>"},{"owner":{"account_id":9804404,"reputation":33,"user_id":7264704,"display_name":"Harminder Singh"},"score":0,"creation_date":1690390335,"post_id":76768033,"comment_id":135348021,"body_markdown":"@Ga&#235;lJ When I ran `employeeDF.show()`, it was showing me an empty record.","body":"@Ga&#235;lJ When I ran <code>employeeDF.show()</code>, it was showing me an empty record."},{"owner":{"account_id":9804404,"reputation":33,"user_id":7264704,"display_name":"Harminder Singh"},"score":1,"creation_date":1690390483,"post_id":76768033,"comment_id":135348050,"body_markdown":"@shalnarkftw Thank you but looks like we would have to rewrite those classes in Java. Cannot do changes on Scala side as it is defined by other team and whatever we can we have to do in our Java code.","body":"@shalnarkftw Thank you but looks like we would have to rewrite those classes in Java. Cannot do changes on Scala side as it is defined by other team and whatever we can we have to do in our Java code."}],"answers":[{"tags":[],"owner":{"account_id":1017255,"reputation":1526,"user_id":1028537,"display_name":"Chris"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1691991027,"creation_date":1690541146,"answer_id":76787095,"question_id":76768033,"body_markdown":"For reference the output of employeeDF.show() is:\r\n\r\n```\r\n++\r\n||\r\n++\r\n||\r\n++\r\n```\r\n\r\nThis is due to:\r\n\r\n```scala\r\nDataset&lt;Row&gt; employeeDF = spark.createDataFrame(employees,Employee.class);\r\n```\r\n\r\nexpecting a bean class, which Employee probably isn&#39;t, you need an Encoder to handle Scala Products (case class or tuple), which needs the Scala compiler in order to generate a TypeTag.  Ask your Scala team to add this object to their code (based on [this SO](https://stackoverflow.com/a/38591695/1028537)):\r\n\r\n```scala\r\nobject TypeUtils {\r\n\r\n  import org.apache.spark.sql.{Encoder, Encoders}\r\n\r\n  import scala.reflect.api.Universe\r\n\r\n  import scala.reflect.ClassTag\r\n  import scala.reflect.runtime.universe._\r\n\r\n  def typeTag[T](clazz: Class[T]): TypeTag[T] = {\r\n    val classTag = ClassTag[T](clazz)\r\n\r\n    val m = runtimeMirror(clazz.getClassLoader)\r\n    val tpe = m.classSymbol(clazz).toType\r\n    val typeCreator = new scala.reflect.api.TypeCreator {\r\n      def apply[U &lt;: Universe with Singleton](m1: scala.reflect.api.Mirror[U]): U # Type =\r\n        if (m1 != m) throw new RuntimeException(&quot;wrong mirror&quot;) else tpe.asInstanceOf[U#Type]\r\n    }\r\n    val typeTag = TypeTag[T](m, typeCreator)\r\n    typeTag\r\n  }\r\n\r\n  def productEncoderFor[T &lt;: Product](clazz: Class[T]): Encoder[T] =\r\n    Encoders.product[T](typeTag(clazz))\r\n}\r\n```\r\n\r\n, then you can write:\r\n\r\n```scala\r\nDataset&lt;Employee&gt; employeeDF = spark.createDataset(employees, TypeUtils.productEncoderFor(Employee.class));\r\nemployeeDF.show();\r\n```\r\n\r\nyielding:\r\n\r\n```\r\n+---+----+---+\r\n| id|name|age|\r\n+---+----+---+\r\n|  1| Tom| 25|\r\n+---+----+---+\r\n```\r\n\r\nThe productEncoderFor function will work for any such case class / tuple.  If you really need a Dataset\\&lt;Row\\&gt; then just call .toDF() after creating the dataset.","title":"Java Dataset using Scala class","body":"<p>For reference the output of employeeDF.show() is:</p>\n<pre><code>++\n||\n++\n||\n++\n</code></pre>\n<p>This is due to:</p>\n<pre class=\"lang-scala prettyprint-override\"><code>Dataset&lt;Row&gt; employeeDF = spark.createDataFrame(employees,Employee.class);\n</code></pre>\n<p>expecting a bean class, which Employee probably isn't, you need an Encoder to handle Scala Products (case class or tuple), which needs the Scala compiler in order to generate a TypeTag.  Ask your Scala team to add this object to their code (based on <a href=\"https://stackoverflow.com/a/38591695/1028537\">this SO</a>):</p>\n<pre class=\"lang-scala prettyprint-override\"><code>object TypeUtils {\n\n  import org.apache.spark.sql.{Encoder, Encoders}\n\n  import scala.reflect.api.Universe\n\n  import scala.reflect.ClassTag\n  import scala.reflect.runtime.universe._\n\n  def typeTag[T](clazz: Class[T]): TypeTag[T] = {\n    val classTag = ClassTag[T](clazz)\n\n    val m = runtimeMirror(clazz.getClassLoader)\n    val tpe = m.classSymbol(clazz).toType\n    val typeCreator = new scala.reflect.api.TypeCreator {\n      def apply[U &lt;: Universe with Singleton](m1: scala.reflect.api.Mirror[U]): U # Type =\n        if (m1 != m) throw new RuntimeException(&quot;wrong mirror&quot;) else tpe.asInstanceOf[U#Type]\n    }\n    val typeTag = TypeTag[T](m, typeCreator)\n    typeTag\n  }\n\n  def productEncoderFor[T &lt;: Product](clazz: Class[T]): Encoder[T] =\n    Encoders.product[T](typeTag(clazz))\n}\n</code></pre>\n<p>, then you can write:</p>\n<pre class=\"lang-scala prettyprint-override\"><code>Dataset&lt;Employee&gt; employeeDF = spark.createDataset(employees, TypeUtils.productEncoderFor(Employee.class));\nemployeeDF.show();\n</code></pre>\n<p>yielding:</p>\n<pre><code>+---+----+---+\n| id|name|age|\n+---+----+---+\n|  1| Tom| 25|\n+---+----+---+\n</code></pre>\n<p>The productEncoderFor function will work for any such case class / tuple.  If you really need a Dataset&lt;Row&gt; then just call .toDF() after creating the dataset.</p>\n"}],"owner":{"account_id":9804404,"reputation":33,"user_id":7264704,"display_name":"Harminder Singh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691991027,"creation_date":1690345615,"question_id":76768033,"body_markdown":"I am trying to use Spark SQL in the spring boot application. We would want to create the dataset from the list of objects (Employee). The Employee is a Scala case class that is defined by another team and we were able to define the list of objects in our project\r\n\r\nBut when we were trying to create a dataset from that list, we are getting an empty dataset without any values. \r\n\r\n```\r\nList&lt;Employee&gt; employees = new ArrayList&lt;&gt;();\r\nemployees.add(new Employee(1,&quot;Tom&quot;,25));\r\nDataset&lt;Row&gt; employeeDF = spark.createDataFrame(employees,Employee.class);\r\n```\r\nThe employeeDF is coming out to be empty, so not sure if we are doing it correctly or missing anything.\r\n\r\nIs it possible to create a Dataset from the list of objects that refer to the Scala case class? \r\n\r\nI tried everywhere to look for the issue and I was not able to find it. If its a duplicate please let me know.\r\n\r\nThanks for your reply Harminder\r\n","title":"Java Dataset using Scala class","body":"<p>I am trying to use Spark SQL in the spring boot application. We would want to create the dataset from the list of objects (Employee). The Employee is a Scala case class that is defined by another team and we were able to define the list of objects in our project</p>\n<p>But when we were trying to create a dataset from that list, we are getting an empty dataset without any values.</p>\n<pre><code>List&lt;Employee&gt; employees = new ArrayList&lt;&gt;();\nemployees.add(new Employee(1,&quot;Tom&quot;,25));\nDataset&lt;Row&gt; employeeDF = spark.createDataFrame(employees,Employee.class);\n</code></pre>\n<p>The employeeDF is coming out to be empty, so not sure if we are doing it correctly or missing anything.</p>\n<p>Is it possible to create a Dataset from the list of objects that refer to the Scala case class?</p>\n<p>I tried everywhere to look for the issue and I was not able to find it. If its a duplicate please let me know.</p>\n<p>Thanks for your reply Harminder</p>\n"},{"tags":["java","game-development"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":2,"creation_date":1691593341,"post_id":76869016,"comment_id":135513175,"body_markdown":"Maybe because you cast to `int` for some reason!?","body":"Maybe because you cast to <code>int</code> for some reason!?"},{"owner":{"account_id":25466,"reputation":36566,"user_id":65464,"accept_rate":93,"display_name":"Erich Kitzmueller"},"score":0,"creation_date":1691593409,"post_id":76869016,"comment_id":135513190,"body_markdown":"When you turned vx and vy into doubles (IMO absolutely necessary to avoid rounding errors), did you maybe forgot to remove the (int) casts?","body":"When you turned vx and vy into doubles (IMO absolutely necessary to avoid rounding errors), did you maybe forgot to remove the (int) casts?"},{"owner":{"account_id":29192646,"reputation":1,"user_id":22364465,"display_name":"Techno"},"score":0,"creation_date":1691593902,"post_id":76869016,"comment_id":135513307,"body_markdown":"I casted it to int because my x and y are also int, does it make any difference if I casted them to int right before I add them to the x and y values?","body":"I casted it to int because my x and y are also int, does it make any difference if I casted them to int right before I add them to the x and y values?"},{"owner":{"account_id":25466,"reputation":36566,"user_id":65464,"accept_rate":93,"display_name":"Erich Kitzmueller"},"score":0,"creation_date":1691694040,"post_id":76869016,"comment_id":135529792,"body_markdown":"You have to keep X and y as double values as well, only convert to int when drawing to the screen or so. This way, you can add up the fractional parts correctly.","body":"You have to keep X and y as double values as well, only convert to int when drawing to the screen or so. This way, you can add up the fractional parts correctly."}],"answers":[{"comments":[{"owner":{"account_id":29192646,"reputation":1,"user_id":22364465,"display_name":"Techno"},"score":0,"creation_date":1691595058,"post_id":76869192,"comment_id":135513571,"body_markdown":"then what can i do? I can recompute the velocity every frame but if there&#39;s any easier way to do it I&#39;m open to suggestions","body":"then what can i do? I can recompute the velocity every frame but if there&#39;s any easier way to do it I&#39;m open to suggestions"}],"tags":[],"owner":{"account_id":1236873,"reputation":21,"user_id":1200296,"display_name":"user1200296"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691594486,"creation_date":1691594486,"answer_id":76869192,"question_id":76869016,"body_markdown":"Because you are converting the real values to ints, you are building up a trajectory error.  Note that converting the vx and vy to floats probably won&#39;t fix this unless you recompute the trajectory for each iteration/frame.","title":"Why does the bullet not go perfectly towards the cursors position?","body":"<p>Because you are converting the real values to ints, you are building up a trajectory error.  Note that converting the vx and vy to floats probably won't fix this unless you recompute the trajectory for each iteration/frame.</p>\n"},{"tags":[],"owner":{"account_id":25466,"reputation":36566,"user_id":65464,"accept_rate":93,"display_name":"Erich Kitzmueller"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691989478,"creation_date":1691989478,"answer_id":76896383,"question_id":76869016,"body_markdown":"All the variables vx, vy, x and y should be of type `double`. Only when you e.g. call the drawing method of Graphics2d, you need to cast x and y to `int`. This way, the rounding errors don&#39;t add up in each iteration. ","title":"Why does the bullet not go perfectly towards the cursors position?","body":"<p>All the variables vx, vy, x and y should be of type <code>double</code>. Only when you e.g. call the drawing method of Graphics2d, you need to cast x and y to <code>int</code>. This way, the rounding errors don't add up in each iteration.</p>\n"}],"owner":{"account_id":29192646,"reputation":1,"user_id":22364465,"display_name":"Techno"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691989478,"creation_date":1691593125,"question_id":76869016,"body_markdown":"The bullets doesnt go pefectly towards the cursor and is usually a few degrees off, but when I multiply the velocity by like 20 it does.\r\n\r\n```\r\nthis.bulletSpeed = bulletSpeed;\r\ndouble angle = Math.atan2(cursorY - shipYCenter, cursorX - shipXCenter);\r\n\r\nvx = (int) (bulletSpeed * Math.cos(angle));\r\nvy = (int) (bulletSpeed * Math.sin(angle));\r\n```\r\n\r\n[Sample of my problem](https://i.stack.imgur.com/Kqf3F.png)\r\n\r\nI&#39;ve tried multiple formulas and the result is all the same, I tried turning the velocities into doubles but the result is stayed the same maybe I did it wrong but now I&#39;m not sure what to do next. I&#39;ve also tried a lot of the solutions here but I haven&#39;t found one specific to my problem","title":"Why does the bullet not go perfectly towards the cursors position?","body":"<p>The bullets doesnt go pefectly towards the cursor and is usually a few degrees off, but when I multiply the velocity by like 20 it does.</p>\n<pre><code>this.bulletSpeed = bulletSpeed;\ndouble angle = Math.atan2(cursorY - shipYCenter, cursorX - shipXCenter);\n\nvx = (int) (bulletSpeed * Math.cos(angle));\nvy = (int) (bulletSpeed * Math.sin(angle));\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/Kqf3F.png\" rel=\"nofollow noreferrer\">Sample of my problem</a></p>\n<p>I've tried multiple formulas and the result is all the same, I tried turning the velocities into doubles but the result is stayed the same maybe I did it wrong but now I'm not sure what to do next. I've also tried a lot of the solutions here but I haven't found one specific to my problem</p>\n"},{"tags":["java","jakarta-ee","jdbc","wildfly"],"comments":[{"owner":{"account_id":3509196,"reputation":16493,"user_id":2933977,"display_name":"stdunbar"},"score":0,"creation_date":1574965150,"post_id":59076182,"comment_id":104422787,"body_markdown":"Is there anything in the server logs (normally in standalone/log/server.log under your Wildfly install)?","body":"Is there anything in the server logs (normally in standalone/log/server.log under your Wildfly install)?"},{"owner":{"account_id":17194475,"reputation":187,"user_id":12447578,"display_name":"ayou392"},"score":0,"creation_date":1574968286,"post_id":59076182,"comment_id":104423748,"body_markdown":"There is nothing in the log files that&#39;s indicating a problem. Also nothing changes after I get the error in the log file.","body":"There is nothing in the log files that&#39;s indicating a problem. Also nothing changes after I get the error in the log file."},{"owner":{"account_id":14975066,"reputation":359,"user_id":10810743,"display_name":"Galadriel"},"score":0,"creation_date":1576141370,"post_id":59076182,"comment_id":104804859,"body_markdown":"I have the same problem and no idea why. I installed version 18.0.1_Final and 16.0.0_Final, but same issue. Have you already found a solution?","body":"I have the same problem and no idea why. I installed version 18.0.1_Final and 16.0.0_Final, but same issue. Have you already found a solution?"}],"answers":[{"tags":[],"owner":{"account_id":3509196,"reputation":16493,"user_id":2933977,"display_name":"stdunbar"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1574973932,"creation_date":1574973932,"answer_id":59095945,"question_id":59076182,"body_markdown":"I can reproduce your problem completely.  I&#39;ve not used the Wildfly console in quite some time but this looks like a bug to me.  However, there is another way that has the advantage of being easily repeatable and scriptable.\r\n\r\nIf you run `jboss-cli` from the Wildfly bin directory you can add a JDBC driver and JEE datasource with a script.  My script looks like:\r\n\r\n    embed-server --server-config=standalone.xml --std-out=echo\r\n    \r\n    batch\r\n    \r\n    module add --name=org.postgres --resources=${user.home}/Downloads/postgresql-42.2.8.jar --dependencies=javax.api,javax.transaction.api\r\n    \r\n    /subsystem=datasources/jdbc-driver=postgres:add(driver-name=&quot;postgres&quot;,driver-module-name=&quot;org.postgres&quot;,driver-class-name=org.postgresql.Driver)\r\n    \r\n    \r\n    /subsystem=datasources/data-source=myDS/:add(connection-url=jdbc:postgresql://localhost:5432/dbname,driver-name=postgres,jndi-name=java:/jdbc/myDS,background-validation=true,background-validation-millis=60000,blocking-timeout-wait-millis=2000,flush-strategy=Gracefully,idle-timeout-minutes=5,initial-pool-size=4,max-pool-size=64,min-pool-size=4,password=the-password,query-timeout=10,track-statements=true,tracking=true,user-name=the-user,validate-on-match=false)\r\n\r\n    run-batch\r\n\r\nThis script should be run without the server running.  If you&#39;d like to run it while the server is running then remove the `embed-server`, `batch`, and `run-batch` lines.  Basically this starts by creating a module which in this case is a PostgreSQL driver.  It then adds a JDBC driver and lastly a DataSource.  It can be run with:\r\n\r\n    jboss-cli.sh --file=the-file-name.cli\r\n\r\nassuming that you saved the above to a file named `the-file-name.cli`.  Again, the `bin` directory for Wildfly needs to be on your path to run this on the command line.","title":"WildFly 18.0.1 JDBC Drivers : Internal error (newValue is null)","body":"<p>I can reproduce your problem completely.  I've not used the Wildfly console in quite some time but this looks like a bug to me.  However, there is another way that has the advantage of being easily repeatable and scriptable.</p>\n\n<p>If you run <code>jboss-cli</code> from the Wildfly bin directory you can add a JDBC driver and JEE datasource with a script.  My script looks like:</p>\n\n<pre><code>embed-server --server-config=standalone.xml --std-out=echo\n\nbatch\n\nmodule add --name=org.postgres --resources=${user.home}/Downloads/postgresql-42.2.8.jar --dependencies=javax.api,javax.transaction.api\n\n/subsystem=datasources/jdbc-driver=postgres:add(driver-name=\"postgres\",driver-module-name=\"org.postgres\",driver-class-name=org.postgresql.Driver)\n\n\n/subsystem=datasources/data-source=myDS/:add(connection-url=jdbc:postgresql://localhost:5432/dbname,driver-name=postgres,jndi-name=java:/jdbc/myDS,background-validation=true,background-validation-millis=60000,blocking-timeout-wait-millis=2000,flush-strategy=Gracefully,idle-timeout-minutes=5,initial-pool-size=4,max-pool-size=64,min-pool-size=4,password=the-password,query-timeout=10,track-statements=true,tracking=true,user-name=the-user,validate-on-match=false)\n\nrun-batch\n</code></pre>\n\n<p>This script should be run without the server running.  If you'd like to run it while the server is running then remove the <code>embed-server</code>, <code>batch</code>, and <code>run-batch</code> lines.  Basically this starts by creating a module which in this case is a PostgreSQL driver.  It then adds a JDBC driver and lastly a DataSource.  It can be run with:</p>\n\n<pre><code>jboss-cli.sh --file=the-file-name.cli\n</code></pre>\n\n<p>assuming that you saved the above to a file named <code>the-file-name.cli</code>.  Again, the <code>bin</code> directory for Wildfly needs to be on your path to run this on the command line.</p>\n"},{"tags":[],"owner":{"account_id":19033,"reputation":514,"user_id":44223,"accept_rate":40,"display_name":"koenig"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1578831041,"creation_date":1578831041,"answer_id":59703651,"question_id":59076182,"body_markdown":"This is apparently a known problem (see https://developer.jboss.org/thread/280649 and https://issues.redhat.com/browse/WFLY-12642) and will be fixed in the next release.","title":"WildFly 18.0.1 JDBC Drivers : Internal error (newValue is null)","body":"<p>This is apparently a known problem (see <a href=\"https://developer.jboss.org/thread/280649\" rel=\"nofollow noreferrer\">https://developer.jboss.org/thread/280649</a> and <a href=\"https://issues.redhat.com/browse/WFLY-12642\" rel=\"nofollow noreferrer\">https://issues.redhat.com/browse/WFLY-12642</a>) and will be fixed in the next release.</p>\n"},{"tags":[],"owner":{"account_id":9424381,"reputation":62,"user_id":7009850,"display_name":"neha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580277640,"creation_date":1580277640,"answer_id":59961279,"question_id":59076182,"body_markdown":"Use this link, [how_to_setup_postgresql_datasource_with_wildfly][1].This will solve your problem in alternate ways.\r\n\r\n\r\n## **Configuration file edition(One way)**\r\nStandalone.xml is the configuration file for the server. The management console is just a friendly UI to edit this file.\r\n\r\n### Deploy the JDBC driver \r\n\r\n - Open a file explorer and go to /modules/ directory in your *Wildfly*\r\n   installation directory.\r\n - Create folders /org/postgresql/main/. These\r\n   folder need to match the hierarchy package of the JDBC driver.\r\n - Copy the JDBC driver into the &#39;main&#39; directory you have created. In this\r\n   directory, create a &quot;module.xml&quot; file with this\r\n   \r\n\t\r\n       &lt;? xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n        &lt;module xmlns=&quot;urn:jboss:module:1.3&quot; name=&quot;org.postgresql&quot;&gt;\r\n    \r\n            &lt;resources&gt;\r\n                &lt;resource-root path=&quot;postgresql-42.2.1.jar&quot;/&gt;\r\n                &lt;!-- Make sure this matches the name of the JAR you are installing --&gt;\r\n            &lt;/resources&gt;\r\n            &lt;dependencies&gt;\r\n                &lt;module name=&quot;javax.api&quot;/&gt;\r\n                &lt;module name=&quot;javax.transaction.api&quot;/&gt;\r\n            &lt;/dependencies&gt;\r\n        &lt;/module&gt;\r\n\r\n\r\n**Create the datasource**\r\n- Go to /standalone/configuration directory in your Wildfly installation directory.\r\n- Open standalone.xml (it&#39;s the default configuration file used by the standalone server)\r\n- Search &#39;datasource&#39; to go to the right part.\r\n- In the &lt;datasources&gt; element, you need to add both &lt;driver&gt; for PostgreSQL and &lt;datasource&gt;\r\n\r\n\r\nA restart of Wildfly is needed and you can validate your change by testing the connection in the management console.\r\n\r\n    &lt;drivers&gt;\r\n        &lt;driver name=&quot;postgresql&quot; module=&quot;org.postgresql&quot;&gt;\r\n            &lt;!-- for xa datasource --&gt;\r\n            &lt;xa-datasource-class&gt;org.postgresql.xa.PGXADataSource&lt;/xa-datasource-class&gt;\r\n            &lt;!-- for non-xa datasource --&gt;\r\n            &lt;driver-class&gt;org.postgresql.Driver&lt;/driver-class&gt;\r\n        &lt;/driver&gt;\r\n    &lt;/drivers&gt;\r\n    &lt;datasources&gt;\r\n        &lt;datasource jndi-name=&quot;java:jboss/datasources/StemoDS&quot; pool-name=&quot;StemoDS&quot; enabled=&quot;true&quot; use-java-context=&quot;true&quot;&gt;\r\n            &lt;connection-url&gt;jdbc:postgresql://localhost:5432/StemoDS&lt;/connection-url&gt;\r\n            &lt;driver&gt;postgresql&lt;/driver&gt;\r\n            &lt;security&gt;\r\n                &lt;user-name&gt;postgres&lt;/user-name&gt;\r\n                &lt;password&gt;admin&lt;/password&gt;\r\n            &lt;/security&gt;\r\n        &lt;/datasource&gt;\r\n    &lt;/datasources&gt;\r\n\r\n##  Another way Using Wildfly CLI(2 way) \r\n\r\nThe other way to add datasource is using the console line interface (CLI). Again, the process is divided into two steps.\r\n\r\nDeploy the JDBC driver\r\n- Go to /bin directory in your Wildfly installation directory.\r\n- Open a terminal on this directory and run\r\n\r\n      ./jboss-cli.sh --connect controller=127.0.0.1 (or jboss-cli.bat if you are on Windows)\r\n\r\n- To install the module, run this command\r\n\r\n       module add --name=org.postgresql --resources=/tmp/postgresql-42.2.1.jar --dependencies=javax.api,javax.transaction.api\r\n\r\n- Create the datasource\r\nThe driver creation is done with this command\r\n\r\n      /subsystem=datasources/jdbc-driver=postgres:add(driver-name=&quot;postgres&quot;,driver-module-name=&quot;org.postgresql&quot;,driver-class-name=org.postgresql.Driver)\r\n\r\n- And then, the last command to add the datasource\r\n\r\n      data-source add --jndi-name=java:jboss/datasources/StenusysDemoDS \r\n        --name=StenusysDemoDS --connection-url=jdbc:postgresql://localhost:5432/StenusysDemo --driver-name=postgres --user-name=postgres --password=admin\r\n\r\nYou can validate your change by testing the connection in the management console.\r\n[1]:https://www.stenusys.com/how_to_setup_postgresql_datasource_with_wildfly/\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"WildFly 18.0.1 JDBC Drivers : Internal error (newValue is null)","body":"<p>Use this link, <a href=\"https://www.stenusys.com/how_to_setup_postgresql_datasource_with_wildfly/\" rel=\"nofollow noreferrer\">how_to_setup_postgresql_datasource_with_wildfly</a>.This will solve your problem in alternate ways.</p>\n\n<h2><strong>Configuration file edition(One way)</strong></h2>\n\n<p>Standalone.xml is the configuration file for the server. The management console is just a friendly UI to edit this file.</p>\n\n<h3>Deploy the JDBC driver</h3>\n\n<ul>\n<li>Open a file explorer and go to /modules/ directory in your <em>Wildfly</em>\ninstallation directory.</li>\n<li>Create folders /org/postgresql/main/. These\nfolder need to match the hierarchy package of the JDBC driver.</li>\n<li><p>Copy the JDBC driver into the 'main' directory you have created. In this\ndirectory, create a \"module.xml\" file with this</p>\n\n<p>\n    </p>\n\n<pre><code>    &lt;resources&gt;\n        &lt;resource-root path=\"postgresql-42.2.1.jar\"/&gt;\n        &lt;!-- Make sure this matches the name of the JAR you are installing --&gt;\n    &lt;/resources&gt;\n    &lt;dependencies&gt;\n        &lt;module name=\"javax.api\"/&gt;\n        &lt;module name=\"javax.transaction.api\"/&gt;\n    &lt;/dependencies&gt;\n&lt;/module&gt;\n</code></pre></li>\n</ul>\n\n<p><strong>Create the datasource</strong>\n- Go to /standalone/configuration directory in your Wildfly installation directory.\n- Open standalone.xml (it's the default configuration file used by the standalone server)\n- Search 'datasource' to go to the right part.\n- In the  element, you need to add both  for PostgreSQL and </p>\n\n<p>A restart of Wildfly is needed and you can validate your change by testing the connection in the management console.</p>\n\n<pre><code>&lt;drivers&gt;\n    &lt;driver name=\"postgresql\" module=\"org.postgresql\"&gt;\n        &lt;!-- for xa datasource --&gt;\n        &lt;xa-datasource-class&gt;org.postgresql.xa.PGXADataSource&lt;/xa-datasource-class&gt;\n        &lt;!-- for non-xa datasource --&gt;\n        &lt;driver-class&gt;org.postgresql.Driver&lt;/driver-class&gt;\n    &lt;/driver&gt;\n&lt;/drivers&gt;\n&lt;datasources&gt;\n    &lt;datasource jndi-name=\"java:jboss/datasources/StemoDS\" pool-name=\"StemoDS\" enabled=\"true\" use-java-context=\"true\"&gt;\n        &lt;connection-url&gt;jdbc:postgresql://localhost:5432/StemoDS&lt;/connection-url&gt;\n        &lt;driver&gt;postgresql&lt;/driver&gt;\n        &lt;security&gt;\n            &lt;user-name&gt;postgres&lt;/user-name&gt;\n            &lt;password&gt;admin&lt;/password&gt;\n        &lt;/security&gt;\n    &lt;/datasource&gt;\n&lt;/datasources&gt;\n</code></pre>\n\n<h2>Another way Using Wildfly CLI(2 way)</h2>\n\n<p>The other way to add datasource is using the console line interface (CLI). Again, the process is divided into two steps.</p>\n\n<p>Deploy the JDBC driver\n- Go to /bin directory in your Wildfly installation directory.\n- Open a terminal on this directory and run</p>\n\n<pre><code>  ./jboss-cli.sh --connect controller=127.0.0.1 (or jboss-cli.bat if you are on Windows)\n</code></pre>\n\n<ul>\n<li><p>To install the module, run this command</p>\n\n<p>module add --name=org.postgresql --resources=/tmp/postgresql-42.2.1.jar --dependencies=javax.api,javax.transaction.api</p></li>\n<li><p>Create the datasource\nThe driver creation is done with this command</p>\n\n<p>/subsystem=datasources/jdbc-driver=postgres:add(driver-name=\"postgres\",driver-module-name=\"org.postgresql\",driver-class-name=org.postgresql.Driver)</p></li>\n<li><p>And then, the last command to add the datasource</p>\n\n<p>data-source add --jndi-name=java:jboss/datasources/StenusysDemoDS \n    --name=StenusysDemoDS --connection-url=jdbc:postgresql://localhost:5432/StenusysDemo --driver-name=postgres --user-name=postgres --password=admin</p></li>\n</ul>\n\n<p>You can validate your change by testing the connection in the management console.</p>\n"},{"comments":[{"owner":{"account_id":1838522,"reputation":472,"user_id":1668411,"display_name":"T-Gergely"},"score":3,"creation_date":1582218601,"post_id":60005205,"comment_id":106710578,"body_markdown":"The github archive doesn&#39;t seem to contain the target folder, only the source code. So we either build that maven project, or extract a console jar from somewhere else, e.g. a WildFly 19 beta.","body":"The github archive doesn&#39;t seem to contain the target folder, only the source code. So we either build that maven project, or extract a console jar from somewhere else, e.g. a WildFly 19 beta."},{"owner":{"account_id":252456,"reputation":2993,"user_id":530513,"accept_rate":100,"display_name":"David O&#39;Meara"},"score":1,"creation_date":1583991283,"post_id":60005205,"comment_id":107299258,"body_markdown":"Step 1a. - install maven, cd app, mvn package (then wait, then copy the jar)","body":"Step 1a. - install maven, cd app, mvn package (then wait, then copy the jar)"},{"owner":{"account_id":6301019,"reputation":198,"user_id":4895684,"display_name":"Daniel Xavier Oliveira"},"score":0,"creation_date":1584107875,"post_id":60005205,"comment_id":107342866,"body_markdown":"I forgot to include the step to compile the src. I will add this in my answer","body":"I forgot to include the step to compile the src. I will add this in my answer"},{"owner":{"account_id":5106065,"reputation":133,"user_id":4094108,"display_name":"Giampaolo"},"score":1,"creation_date":1584724508,"post_id":60005205,"comment_id":107533528,"body_markdown":"Correct URL is https://repository.jboss.org/nexus/content/repositories/ea/org/jboss/hal/hal-console/3.2.7.Final/hal-console-3.2.7.Final-resources.jar","body":"Correct URL is <a href=\"https://repository.jboss.org/nexus/content/repositories/ea/org/jboss/hal/hal-console/3.2.7.Final/hal-console-3.2.7.Final-resources.jar\" rel=\"nofollow noreferrer\">repository.jboss.org/nexus/content/repositories/ea/org/jboss&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":6301019,"reputation":198,"user_id":4895684,"display_name":"Daniel Xavier Oliveira"},"score":0,"creation_date":1584993145,"post_id":60005205,"comment_id":107607742,"body_markdown":"Thanks @Giampaolo, I edit the answer providing your link","body":"Thanks @Giampaolo, I edit the answer providing your link"},{"owner":{"account_id":5106065,"reputation":133,"user_id":4094108,"display_name":"Giampaolo"},"score":2,"creation_date":1585001019,"post_id":60005205,"comment_id":107610620,"body_markdown":"Another little thing: restarting the server is not enough, you need to force browser cache refresh ^ _ ^ &#39;","body":"Another little thing: restarting the server is not enough, you need to force browser cache refresh ^ _ ^ &#39;"},{"owner":{"account_id":7986346,"reputation":962,"user_id":6025730,"accept_rate":67,"display_name":"Nakamura"},"score":0,"creation_date":1587046258,"post_id":60005205,"comment_id":108359610,"body_markdown":"Upgrading to 3.2.4 + clearing browser cache works for me. If you want to upgrade to version newer than 3.2.4, find it under this directory: https://repository.jboss.org/nexus/content/repositories/ea/org/jboss/hal/hal-console/.","body":"Upgrading to 3.2.4 + clearing browser cache works for me. If you want to upgrade to version newer than 3.2.4, find it under this directory: <a href=\"https://repository.jboss.org/nexus/content/repositories/ea/org/jboss/hal/hal-console/\" rel=\"nofollow noreferrer\">repository.jboss.org/nexus/content/repositories/ea/org/jboss&zwnj;&#8203;/&hellip;</a>."}],"tags":[],"owner":{"account_id":6301019,"reputation":198,"user_id":4895684,"display_name":"Daniel Xavier Oliveira"},"comment_count":7,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1584992983,"creation_date":1580478599,"answer_id":60005205,"question_id":59076182,"body_markdown":"This is not a wildfly/jboss problem. The bug is in Hal Management console (version 3.2.1). I fix this error, changing HAL console version to 3.2.4.\r\n\r\n1. Download release:\r\n\r\n```\r\nwget https://repository.jboss.org/nexus/content/repositories/ea/org/jboss/hal/hal-console/3.2.4.Final/hal-console-3.2.4.Final-resources.jar\r\n```\r\n2. Copy the jar file to wildfly directory \r\n```\r\nsudo cp hal-console-3.2.4.Final-resources.jar /opt/wildfly/modules/system/layers/base/org/jboss/as/console/main/\r\n```\r\n3. Edit the file module.xml\r\n```\r\nsudo vim /opt/wildfly/modules/system/layers/base/org/jboss/as/console/main/module.xml\r\n```\r\n\r\n4. Change version in file module.xml\r\n```\r\n   &lt;resources&gt;\r\n        &lt;resource-root path=&quot;hal-console-3.2.4.Final-resources.jar&quot;/&gt;\r\n    &lt;/resources&gt;\r\n```\r\n\r\n5. Restart jboss/wildfly\r\n```\r\nsudo systemctl restart wildfly or sudo service wildfly restart\r\n```","title":"WildFly 18.0.1 JDBC Drivers : Internal error (newValue is null)","body":"<p>This is not a wildfly/jboss problem. The bug is in Hal Management console (version 3.2.1). I fix this error, changing HAL console version to 3.2.4.</p>\n\n<ol>\n<li>Download release:</li>\n</ol>\n\n<pre><code>wget https://repository.jboss.org/nexus/content/repositories/ea/org/jboss/hal/hal-console/3.2.4.Final/hal-console-3.2.4.Final-resources.jar\n</code></pre>\n\n<ol start=\"2\">\n<li>Copy the jar file to wildfly directory </li>\n</ol>\n\n<pre><code>sudo cp hal-console-3.2.4.Final-resources.jar /opt/wildfly/modules/system/layers/base/org/jboss/as/console/main/\n</code></pre>\n\n<ol start=\"3\">\n<li>Edit the file module.xml</li>\n</ol>\n\n<pre><code>sudo vim /opt/wildfly/modules/system/layers/base/org/jboss/as/console/main/module.xml\n</code></pre>\n\n<ol start=\"4\">\n<li>Change version in file module.xml</li>\n</ol>\n\n<pre><code>   &lt;resources&gt;\n        &lt;resource-root path=\"hal-console-3.2.4.Final-resources.jar\"/&gt;\n    &lt;/resources&gt;\n</code></pre>\n\n<ol start=\"5\">\n<li>Restart jboss/wildfly</li>\n</ol>\n\n<pre><code>sudo systemctl restart wildfly or sudo service wildfly restart\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6071826,"reputation":416,"user_id":4740396,"display_name":"woland"},"score":0,"creation_date":1621517788,"post_id":60806205,"comment_id":119524305,"body_markdown":"How having a password formatted like that solves that problem?","body":"How having a password formatted like that solves that problem?"}],"tags":[],"owner":{"account_id":18032392,"reputation":1,"user_id":13106615,"display_name":"Esteban Vallejo"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586587769,"creation_date":1584920154,"answer_id":60806205,"question_id":59076182,"body_markdown":"I had the same problem, but the solution that I did was create a console user with password using alphanumeric and 1 non-alphanumeric character.\r\n\r\n1. run the server wildfly phat\\bin\\standalone.bat\r\n2. wildfly phat\\bin\\add-user.bat\r\n3. press a if manager console\r\n4. username: admin or enter your user name you want\r\n5. press a fo update admin user\r\n6. password: for example p@ssword1 or your password with 1 non-aphanumeric character\r\n7. repassword: the same password you used\r\n8. enter\r\n9. no and enter\r\n\r\nand finally use web browser different like chrome\r\n\r\n[Config user with password without 1 non-aphanumeric character][1]\r\n\r\n[Config user with password with 1 non-aphanumeric character][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sSyKC.png\r\n  [2]: https://i.stack.imgur.com/63y6S.png","title":"WildFly 18.0.1 JDBC Drivers : Internal error (newValue is null)","body":"<p>I had the same problem, but the solution that I did was create a console user with password using alphanumeric and 1 non-alphanumeric character.</p>\n\n<ol>\n<li>run the server wildfly phat\\bin\\standalone.bat</li>\n<li>wildfly phat\\bin\\add-user.bat</li>\n<li>press a if manager console</li>\n<li>username: admin or enter your user name you want</li>\n<li>press a fo update admin user</li>\n<li>password: for example p@ssword1 or your password with 1 non-aphanumeric character</li>\n<li>repassword: the same password you used</li>\n<li>enter</li>\n<li>no and enter</li>\n</ol>\n\n<p>and finally use web browser different like chrome</p>\n\n<p><a href=\"https://i.stack.imgur.com/sSyKC.png\" rel=\"nofollow noreferrer\">Config user with password without 1 non-aphanumeric character</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/63y6S.png\" rel=\"nofollow noreferrer\">Config user with password with 1 non-aphanumeric character</a></p>\n"},{"tags":[],"owner":{"account_id":29198675,"reputation":1,"user_id":22369256,"display_name":"MilaS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691989165,"creation_date":1691663792,"answer_id":76874932,"question_id":59076182,"body_markdown":"If the problem remains after updating HAL console version, then change `jboss.management.http.port` (in `configuration/standalone.xml`) from 9990 to 9991.\r\n","title":"WildFly 18.0.1 JDBC Drivers : Internal error (newValue is null)","body":"<p>If the problem remains after updating HAL console version, then change <code>jboss.management.http.port</code> (in <code>configuration/standalone.xml</code>) from 9990 to 9991.</p>\n"}],"owner":{"account_id":17194475,"reputation":187,"user_id":12447578,"display_name":"ayou392"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9222,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":59095945,"answer_count":6,"score":18,"last_activity_date":1691989165,"creation_date":1574878220,"question_id":59076182,"body_markdown":"I have a problem configuring JDBC drivers in **WildFly (18.0.1)**.\r\n\r\nWhenever I open ***(Configuration/Subsystems/DataSources &amp; Drivers/JDBC Drivers)***,\r\n\r\nI get:\r\n&gt;Internal error (Details: newValue is null).\r\n\r\n**Error Image 1:**\r\n\r\n![][1]\r\n\r\n**Error Image 2:**\r\n\r\n![][2]\r\n\r\nAny help would be very much appreciated!\r\n\r\n  [1]: https://i.stack.imgur.com/iN4iZ.png\r\n  [2]: https://i.stack.imgur.com/i6DNb.png","title":"WildFly 18.0.1 JDBC Drivers : Internal error (newValue is null)","body":"<p>I have a problem configuring JDBC drivers in <strong>WildFly (18.0.1)</strong>.</p>\n\n<p>Whenever I open <strong><em>(Configuration/Subsystems/DataSources &amp; Drivers/JDBC Drivers)</em></strong>,</p>\n\n<p>I get:</p>\n\n<blockquote>\n  <p>Internal error (Details: newValue is null).</p>\n</blockquote>\n\n<p><strong>Error Image 1:</strong></p>\n\n<p><img src=\"https://i.stack.imgur.com/iN4iZ.png\" alt=\"\"></p>\n\n<p><strong>Error Image 2:</strong></p>\n\n<p><img src=\"https://i.stack.imgur.com/i6DNb.png\" alt=\"\"></p>\n\n<p>Any help would be very much appreciated!</p>\n"},{"tags":["java","hashmap","slack"],"comments":[{"owner":{"account_id":26377,"reputation":352197,"user_id":68587,"accept_rate":95,"display_name":"John Kugelman"},"score":0,"creation_date":1691981628,"post_id":76895988,"comment_id":135559382,"body_markdown":"Could you create a [mre]? There&#39;s not enough context here to answer.","body":"Could you create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? There&#39;s not enough context here to answer."},{"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"score":0,"creation_date":1691988023,"post_id":76895988,"comment_id":135559855,"body_markdown":"Where are you getting undefined at?","body":"Where are you getting undefined at?"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1691999782,"post_id":76895988,"comment_id":135561327,"body_markdown":"you need to end the stream with a terminal operation - a `collect(Collectors.toList())` in this case, or else you will only have a stream (streams dont process any data if you do not have a terminal operation)","body":"you need to end the stream with a terminal operation - a <code>collect(Collectors.toList())</code> in this case, or else you will only have a stream (streams dont process any data if you do not have a terminal operation)"}],"answers":[{"comments":[{"owner":{"account_id":4008661,"reputation":961,"user_id":3302683,"accept_rate":75,"display_name":"trever"},"score":0,"creation_date":1692204524,"post_id":76896351,"comment_id":135593045,"body_markdown":"Thanks! I was missing the `toList`, that got what I was looking for!","body":"Thanks! I was missing the <code>toList</code>, that got what I was looking for!"}],"tags":[],"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691988767,"creation_date":1691988767,"answer_id":76896351,"question_id":76895988,"body_markdown":"Hope you are you collecting the filtered values in this manner?\r\n\r\n    List&lt;String&gt; keys = blockValues.keySet().stream().filter(s -&gt; s.startsWith(&quot;status_block&quot;)).collect(Collectors.toList());\r\n\r\nNow, this ```keys```list will contain your key.\r\n\r\nThis part was missing in the question, so I could not be sure.\r\n\r\n","title":"Using Starts with to find the key of a List","body":"<p>Hope you are you collecting the filtered values in this manner?</p>\n<pre><code>List&lt;String&gt; keys = blockValues.keySet().stream().filter(s -&gt; s.startsWith(&quot;status_block&quot;)).collect(Collectors.toList());\n</code></pre>\n<p>Now, this <code>keys</code>list will contain your key.</p>\n<p>This part was missing in the question, so I could not be sure.</p>\n"}],"owner":{"account_id":4008661,"reputation":961,"user_id":3302683,"accept_rate":75,"display_name":"trever"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76896351,"answer_count":1,"score":0,"last_activity_date":1691988767,"creation_date":1691980827,"question_id":76895988,"body_markdown":"I have a list of objects (Slack Bolt framework), one of them is appended dynamically upstream and then passed in an array list. I need to fetch out this key (it looks like this: `status_block_EPOCH`) but when I try to filter I get undefined in the evaluate expression in IntelliJ. I am trying something like this:\r\n\r\n```\r\nMap&lt;String, Map&lt;String, ViewState.Value&gt;&gt; blockValues = viewSubmissionRequest.getPayload().getView().getState().getValues();\r\n\r\nblockValues.keySet().stream().filter(s -&gt; s.startsWith(&quot;status_block&quot;)\r\n```\r\n\r\nThat should give me the key that matches this (i.e. `status_block_123646484568`) that I can use but I cant get it to work for some reason. What am I doing wrong here?","title":"Using Starts with to find the key of a List","body":"<p>I have a list of objects (Slack Bolt framework), one of them is appended dynamically upstream and then passed in an array list. I need to fetch out this key (it looks like this: <code>status_block_EPOCH</code>) but when I try to filter I get undefined in the evaluate expression in IntelliJ. I am trying something like this:</p>\n<pre><code>Map&lt;String, Map&lt;String, ViewState.Value&gt;&gt; blockValues = viewSubmissionRequest.getPayload().getView().getState().getValues();\n\nblockValues.keySet().stream().filter(s -&gt; s.startsWith(&quot;status_block&quot;)\n</code></pre>\n<p>That should give me the key that matches this (i.e. <code>status_block_123646484568</code>) that I can use but I cant get it to work for some reason. What am I doing wrong here?</p>\n"},{"tags":["java","numbers","decimal","bigdecimal"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1691999721,"post_id":76896312,"comment_id":135561318,"body_markdown":"It doesn&#39;t really help that you don&#39;t say what this mysterious &quot;problem&quot; is","body":"It doesn&#39;t really help that you don&#39;t say what this mysterious &quot;problem&quot; is"},{"owner":{"account_id":28912871,"reputation":21,"user_id":22145479,"display_name":"LXIV"},"score":0,"creation_date":1692001653,"post_id":76896312,"comment_id":135561706,"body_markdown":"@g00se BigDecimal#pow(int) doesn&#39;t allow the use of the full integer range. And even if it did, it still wouldb&#39;t be enough coverage for by double exponent, even if I gave up the accuracy of double.","body":"@g00se BigDecimal#pow(int) doesn&#39;t allow the use of the full integer range. And even if it did, it still wouldb&#39;t be enough coverage for by double exponent, even if I gave up the accuracy of double."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1692027571,"post_id":76896312,"comment_id":135567031,"body_markdown":"Raising 2 to the xth power can be done with `new BigDecimal(BigInteger.ONE.shiftLeft(x))`.  I’m not sure if that helps.","body":"Raising 2 to the xth power can be done with <code>new BigDecimal(BigInteger.ONE.shiftLeft(x))</code>.  I’m not sure if that helps."}],"owner":{"account_id":28912871,"reputation":21,"user_id":22145479,"display_name":"LXIV"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1691988150,"creation_date":1691988082,"question_id":76896312,"body_markdown":"I&#39;m trying to create a number class which can hold values from `4.9E-324e-1.7976931348623157E308` to `1.7976931348623157E308e1.7976931348623157E308` in both signs. (yes, the exponent is also a double)\r\n\r\nMy number class is in base 2.\r\n\r\nI have all the arithmetic working, but I&#39;m having trouble trying to display it as a string in the format `...#####.#####...`.\r\n\r\nThis is what I&#39;ve come up with.\r\n\r\n\r\n```\r\n@Nonnull\r\n    public String toReadableString(@Nonnull MathContext context) {\r\n        try {\r\n            final BigDecimal mantissa = BigDecimal.valueOf(y);\r\n            final BigDecimal exponentiation = BigDecimal.valueOf(2).pow((int) x, context);\r\n            // The above line throws an ArithmeticException if magnitude(x) &gt; 999999999\r\n            // This is defined in BigDecimal, and I can&#39;t change the limit\r\n\r\n            final BigDecimal result = mantissa.multiply(exponentiation);\r\n\r\n            return result.toPlainString();\r\n        } catch (final ArithmeticException e) {\r\n            return &quot;OUT_OF_DISPLAYABLE_RANGE&quot;;\r\n        }\r\n    }\r\n```\r\n\r\nI&#39;ve tried searching for other methods of converting base 2 to base 10, but every method I could find involves actually calculating the value as a `double`, which would obviously not work for most values of this number class.\r\n\r\n\r\n### Summary\r\n\r\nI need a function `toReadableString() : String` which can reliably convert base 2 scientific notation in the form of `2^double * double` for an arbitrary `n` number of decimal points.\r\n\r\nAny help would be great, even if it&#39;s not a complete solution.\r\n\r\nFor reference, here&#39;s the structure of my number class.\r\n\r\n\r\n```\r\n// This extends Vector2 to use all the features provided by the vector class\r\npublic class RealNumber extends Vector2 implements Comparable&lt;RealNumber&gt; {\r\n    public RealNumber(double val);\r\n    public RealNumber(double exponent, double mantissa);\r\n\r\n    public final double exponent();\r\n    public final double mantissa();\r\n\r\n    // Code ommitted\r\n\r\n    public String toReadableString(MathContext context); // Body defined above\r\n}\r\n```\r\n\r\n**I know this is very impractical and abstract. I personally like that kind of stuff, and this is a purely personal project which I&#39;m doing for fun.**\r\n\r\n\r\nI&#39;ve tried:\r\n- Converting `exponent` and `mantissa` to `BigDecimal` to calculate the value (BigDecimal.pow(int) causes a problem)\r\n- The current approach\r\n- Just using `double` (of course it doesn&#39;t work)\r\n- Iterating through each digit and adding the value to a `BigDecimal` (maybe there was an error in my code, but didn&#39;t work)","title":"How to format scientific E notation into human readable numbers? (numbers larger than BigDecimal)","body":"<p>I'm trying to create a number class which can hold values from <code>4.9E-324e-1.7976931348623157E308</code> to <code>1.7976931348623157E308e1.7976931348623157E308</code> in both signs. (yes, the exponent is also a double)</p>\n<p>My number class is in base 2.</p>\n<p>I have all the arithmetic working, but I'm having trouble trying to display it as a string in the format <code>...#####.#####...</code>.</p>\n<p>This is what I've come up with.</p>\n<pre><code>@Nonnull\n    public String toReadableString(@Nonnull MathContext context) {\n        try {\n            final BigDecimal mantissa = BigDecimal.valueOf(y);\n            final BigDecimal exponentiation = BigDecimal.valueOf(2).pow((int) x, context);\n            // The above line throws an ArithmeticException if magnitude(x) &gt; 999999999\n            // This is defined in BigDecimal, and I can't change the limit\n\n            final BigDecimal result = mantissa.multiply(exponentiation);\n\n            return result.toPlainString();\n        } catch (final ArithmeticException e) {\n            return &quot;OUT_OF_DISPLAYABLE_RANGE&quot;;\n        }\n    }\n</code></pre>\n<p>I've tried searching for other methods of converting base 2 to base 10, but every method I could find involves actually calculating the value as a <code>double</code>, which would obviously not work for most values of this number class.</p>\n<h3>Summary</h3>\n<p>I need a function <code>toReadableString() : String</code> which can reliably convert base 2 scientific notation in the form of <code>2^double * double</code> for an arbitrary <code>n</code> number of decimal points.</p>\n<p>Any help would be great, even if it's not a complete solution.</p>\n<p>For reference, here's the structure of my number class.</p>\n<pre><code>// This extends Vector2 to use all the features provided by the vector class\npublic class RealNumber extends Vector2 implements Comparable&lt;RealNumber&gt; {\n    public RealNumber(double val);\n    public RealNumber(double exponent, double mantissa);\n\n    public final double exponent();\n    public final double mantissa();\n\n    // Code ommitted\n\n    public String toReadableString(MathContext context); // Body defined above\n}\n</code></pre>\n<p><strong>I know this is very impractical and abstract. I personally like that kind of stuff, and this is a purely personal project which I'm doing for fun.</strong></p>\n<p>I've tried:</p>\n<ul>\n<li>Converting <code>exponent</code> and <code>mantissa</code> to <code>BigDecimal</code> to calculate the value (BigDecimal.pow(int) causes a problem)</li>\n<li>The current approach</li>\n<li>Just using <code>double</code> (of course it doesn't work)</li>\n<li>Iterating through each digit and adding the value to a <code>BigDecimal</code> (maybe there was an error in my code, but didn't work)</li>\n</ul>\n"},{"tags":["java","android","sdk","android-virtual-device","android-studio"],"answers":[{"comments":[{"owner":{"account_id":279863,"reputation":5261,"user_id":942296,"accept_rate":70,"display_name":"Arvind Bhardwaj"},"score":0,"creation_date":1369200705,"post_id":16684104,"comment_id":24009713,"body_markdown":"These are not present in the &quot;android-studio\\sdk\\tools\\lib&quot; but at &quot;Android\\android-sdk-windows&quot;. Does it make any difference?","body":"These are not present in the &quot;android-studio\\sdk\\tools\\lib&quot; but at &quot;Android\\android-sdk-windows&quot;. Does it make any difference?"}],"tags":[],"owner":{"account_id":2696362,"reputation":748,"user_id":2328317,"accept_rate":50,"display_name":"Chintan Trivedi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1369200496,"creation_date":1369200496,"answer_id":16684104,"question_id":16683975,"body_markdown":"Go to the android-studio\\sdk\\tools\\lib and search for AVD Manager and SDK Manager. If they are present, try running them. \r\n\r\nWhile I do not know the actual reason for the disabled buttons, but this might just help in troubleshooting the problem.","title":"Virtual Device Manager Disabled in Android Studio","body":"<p>Go to the android-studio\\sdk\\tools\\lib and search for AVD Manager and SDK Manager. If they are present, try running them. </p>\n\n<p>While I do not know the actual reason for the disabled buttons, but this might just help in troubleshooting the problem.</p>\n"},{"comments":[{"owner":{"account_id":279863,"reputation":5261,"user_id":942296,"accept_rate":70,"display_name":"Arvind Bhardwaj"},"score":0,"creation_date":1369282077,"post_id":16697822,"comment_id":24047261,"body_markdown":"Thanks for help. But I found the solution :)","body":"Thanks for help. But I found the solution :)"}],"tags":[],"owner":{"account_id":1796040,"reputation":3817,"user_id":1635416,"display_name":"jsc0"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1369242798,"creation_date":1369242798,"answer_id":16697822,"question_id":16683975,"body_markdown":"I haven&#39;t seen this error myself, but try going to\r\n`File -&gt; Project Structure -&gt; SDKs` and make sure you have a listing for the Android SDK and that the home path is pointing to the correct location.\r\n\r\n![example](http://i.stack.imgur.com/PIJtX.jpg)","title":"Virtual Device Manager Disabled in Android Studio","body":"<p>I haven't seen this error myself, but try going to\n<code>File -&gt; Project Structure -&gt; SDKs</code> and make sure you have a listing for the Android SDK and that the home path is pointing to the correct location.</p>\n\n<p><img src=\"https://i.stack.imgur.com/PIJtX.jpg\" alt=\"example\"></p>\n"},{"tags":[],"owner":{"account_id":279863,"reputation":5261,"user_id":942296,"accept_rate":70,"display_name":"Arvind Bhardwaj"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1369282266,"creation_date":1369282266,"answer_id":16705531,"question_id":16683975,"body_markdown":"Well I found the problem. The `gradle` was not installed as my internet connection was not active. Make sure the Android Studio installs the `gradle` when you first start and create a project.","title":"Virtual Device Manager Disabled in Android Studio","body":"<p>Well I found the problem. The <code>gradle</code> was not installed as my internet connection was not active. Make sure the Android Studio installs the <code>gradle</code> when you first start and create a project.</p>\n"}],"owner":{"account_id":279863,"reputation":5261,"user_id":942296,"accept_rate":70,"display_name":"Arvind Bhardwaj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17932,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":16705531,"answer_count":3,"score":6,"last_activity_date":1691986226,"creation_date":1369199916,"question_id":16683975,"body_markdown":"I have installed Android Studio on my Windows 7 PC. But I cannot create the virtual devices on the studio as the button for AVD and SDK is disabled by default. How ca I enable them?","title":"Virtual Device Manager Disabled in Android Studio","body":"<p>I have installed Android Studio on my Windows 7 PC. But I cannot create the virtual devices on the studio as the button for AVD and SDK is disabled by default. How ca I enable them?</p>\n"},{"tags":["java","selenium","selenium-webdriver","ui-automation"],"comments":[{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":0,"creation_date":1625341811,"post_id":68239139,"comment_id":120603924,"body_markdown":"What are you trying to do there? I see the elements are already appearing sorted there","body":"What are you trying to do there? I see the elements are already appearing sorted there"},{"owner":{"account_id":16585000,"reputation":338,"user_id":11984655,"display_name":"Sachidanand Pandit"},"score":0,"creation_date":1625386233,"post_id":68239139,"comment_id":120609813,"body_markdown":"Actually, I am trying to Sort elements in reverse order. If I will manually drag the element from one position to another position then also Order should not need to change. Atlast I want to sort the elements in reverse order.","body":"Actually, I am trying to Sort elements in reverse order. If I will manually drag the element from one position to another position then also Order should not need to change. Atlast I want to sort the elements in reverse order."}],"answers":[{"comments":[{"owner":{"account_id":16585000,"reputation":338,"user_id":11984655,"display_name":"Sachidanand Pandit"},"score":0,"creation_date":1625386335,"post_id":68241281,"comment_id":120609832,"body_markdown":"Actually, I am trying to Sort elements in reverse order. If I will manually drag the element from one position to another position then also Order should not need to change. Atlast I want to sort the elements in reverse order. Can you please help me?","body":"Actually, I am trying to Sort elements in reverse order. If I will manually drag the element from one position to another position then also Order should not need to change. Atlast I want to sort the elements in reverse order. Can you please help me?"},{"owner":{"account_id":16585000,"reputation":338,"user_id":11984655,"display_name":"Sachidanand Pandit"},"score":0,"creation_date":1625387002,"post_id":68241281,"comment_id":120609985,"body_markdown":"Thank you for response, Can you help me with adject solution?","body":"Thank you for response, Can you help me with adject solution?"},{"owner":{"account_id":6677596,"reputation":1285,"user_id":5151769,"display_name":"YaDav MaNish"},"score":0,"creation_date":1625398788,"post_id":68241281,"comment_id":120612574,"body_markdown":"can you check with the above answer","body":"can you check with the above answer"},{"owner":{"account_id":16585000,"reputation":338,"user_id":11984655,"display_name":"Sachidanand Pandit"},"score":0,"creation_date":1625418307,"post_id":68241281,"comment_id":120616975,"body_markdown":"Thank you for help, but I am adding Debug Point at line,  where Action Object is defined. After that I drag one with Four and  Three with Two. So Atlast it&#39;s fail.","body":"Thank you for help, but I am adding Debug Point at line,  where Action Object is defined. After that I drag one with Four and  Three with Two. So Atlast it&#39;s fail."},{"owner":{"account_id":6677596,"reputation":1285,"user_id":5151769,"display_name":"YaDav MaNish"},"score":0,"creation_date":1625419585,"post_id":68241281,"comment_id":120617274,"body_markdown":"Are you dragging that element manually? coz the code just sorts the elements in descending order.","body":"Are you dragging that element manually? coz the code just sorts the elements in descending order."},{"owner":{"account_id":16585000,"reputation":338,"user_id":11984655,"display_name":"Sachidanand Pandit"},"score":0,"creation_date":1625450310,"post_id":68241281,"comment_id":120622376,"body_markdown":"Yes, After manually drag also order should need to same.","body":"Yes, After manually drag also order should need to same."},{"owner":{"account_id":16585000,"reputation":338,"user_id":11984655,"display_name":"Sachidanand Pandit"},"score":0,"creation_date":1625508805,"post_id":68241281,"comment_id":120640364,"body_markdown":"Can you please help me how can I perform this task?","body":"Can you please help me how can I perform this task?"},{"owner":{"account_id":6677596,"reputation":1285,"user_id":5151769,"display_name":"YaDav MaNish"},"score":0,"creation_date":1625653233,"post_id":68241281,"comment_id":120682193,"body_markdown":"What is the point of automating those if you are debugging it and changing sequence of it manually?","body":"What is the point of automating those if you are debugging it and changing sequence of it manually?"}],"tags":[],"owner":{"account_id":6677596,"reputation":1285,"user_id":5151769,"display_name":"YaDav MaNish"},"comment_count":8,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1625389805,"creation_date":1625366567,"answer_id":68241281,"question_id":68239139,"body_markdown":"    List&lt;WebElement&gt; list = driver.findElements(By.xpath(&quot;//* [@id=&#39;demo-tabpane-list&#39;]/div/div&quot;));\r\n\t\t\r\n    for(int i =1;i&lt;list.size();i++) {\r\n\t\t\t\r\n\tWebElement element = driver.findElement(By.xpath(&quot;//*[@id=&#39;demo-tabpane-list&#39;]/div/div[&quot;+ i +&quot;]&quot;));\r\n\t\t\t\r\n\t\t\tWebElement destination6 = driver.findElement(By.xpath(&quot;//*[@id=&#39;demo-tabpane-list&#39;]/div/div[6]&quot;));\r\n\t\t\tWebElement destination5 = driver.findElement(By.xpath(&quot;//*[@id=&#39;demo-tabpane-list&#39;]/div/div[5]&quot;));\r\n\t\t\tWebElement destination4 = driver.findElement(By.xpath(&quot;//*[@id=&#39;demo-tabpane-list&#39;]/div/div[4]&quot;));\r\n\t\t\tWebElement destination3 = driver.findElement(By.xpath(&quot;//*[@id=&#39;demo-tabpane-list&#39;]/div/div[3]&quot;));\r\n\t\t\tWebElement destination2 = driver.findElement(By.xpath(&quot;//*[@id=&#39;demo-tabpane-list&#39;]/div/div[2]&quot;));\r\n\t\t\tWebElement destination1 = driver.findElement(By.xpath(&quot;//*[@id=&#39;demo-tabpane-list&#39;]/div/div[1]&quot;));\r\n\t\t\t\r\n\t\t\tActions action = new Actions(driver);\r\n\t\t\t\r\n\t\t\tif(element!=null) {\r\n\t\t\taction.dragAndDrop(element, destination6).perform();\r\n\t\t\taction.dragAndDrop(element, destination5).perform();\r\n\t\t\taction.dragAndDrop(element, destination4).perform();\r\n\t\t\taction.dragAndDrop(element, destination3).perform();\r\n\t\t\taction.dragAndDrop(element, destination2).perform();\r\n\t\t\taction.dragAndDrop(element, destination1).perform();\r\n\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n    Please enhance it as per your need.","title":"How I can Sort this Draggable List in Selenium","body":"<pre><code>List&lt;WebElement&gt; list = driver.findElements(By.xpath(&quot;//* [@id='demo-tabpane-list']/div/div&quot;));\n    \nfor(int i =1;i&lt;list.size();i++) {\n        \nWebElement element = driver.findElement(By.xpath(&quot;//*[@id='demo-tabpane-list']/div/div[&quot;+ i +&quot;]&quot;));\n        \n        WebElement destination6 = driver.findElement(By.xpath(&quot;//*[@id='demo-tabpane-list']/div/div[6]&quot;));\n        WebElement destination5 = driver.findElement(By.xpath(&quot;//*[@id='demo-tabpane-list']/div/div[5]&quot;));\n        WebElement destination4 = driver.findElement(By.xpath(&quot;//*[@id='demo-tabpane-list']/div/div[4]&quot;));\n        WebElement destination3 = driver.findElement(By.xpath(&quot;//*[@id='demo-tabpane-list']/div/div[3]&quot;));\n        WebElement destination2 = driver.findElement(By.xpath(&quot;//*[@id='demo-tabpane-list']/div/div[2]&quot;));\n        WebElement destination1 = driver.findElement(By.xpath(&quot;//*[@id='demo-tabpane-list']/div/div[1]&quot;));\n        \n        Actions action = new Actions(driver);\n        \n        if(element!=null) {\n        action.dragAndDrop(element, destination6).perform();\n        action.dragAndDrop(element, destination5).perform();\n        action.dragAndDrop(element, destination4).perform();\n        action.dragAndDrop(element, destination3).perform();\n        action.dragAndDrop(element, destination2).perform();\n        action.dragAndDrop(element, destination1).perform();\n        break;\n        }\n    }\n\nPlease enhance it as per your need.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28732699,"reputation":67,"user_id":22004305,"display_name":"lorvindc"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691986067,"creation_date":1691590564,"answer_id":76868646,"question_id":68239139,"body_markdown":"In order to sort the elements, you need to get each element and drag it to a destination.\r\n\r\nThe solution below basically drags and drops each sortable element above the table (although this uses C#, I think logic can be used in Java).\r\nIn this case I set the destination to the List Tab to ensure the the element is above the list. \r\nReason: When I tried to set it to the 1st row, it goes to the second row.\r\n\r\nThe logic is as follows\r\n* Drag/drop element 2 above 1\r\n* Drag/drop element 3 above 2\r\n* Drag/drop element 4 above 3\r\n* Drag/drop element 5 above 4\r\n* Drag/drop element 6 above 5\r\n\r\n        // Function to sort the elements\r\n        public void SortElements()\r\n        {\r\n            var action = new Actions(webDriver);\r\n            action.DragAndDrop(sortablePage.GetSortableElementByIndex(2), sortablePage.GetListTab()).Perform();\r\n            action.DragAndDrop(sortablePage.GetSortableElementByIndex(3), sortablePage.GetListTab()).Perform();\r\n            action.DragAndDrop(sortablePage.GetSortableElementByIndex(4), sortablePage.GetListTab()).Perform();\r\n            action.DragAndDrop(sortablePage.GetSortableElementByIndex(5), sortablePage.GetListTab()).Perform();\r\n            action.DragAndDrop(sortablePage.GetSortableElementByIndex(6), sortablePage.GetListTab()).Perform();\r\n        }\r\n\r\n        // Create a method to get the sortable element by index\r\n        public IWebElement GetSortableElementByIndex(int index)\r\n        {\r\n            return WaitForElementByXPath(wait, $&quot;//div[@id=&#39;demo-tabpane-list&#39;]/div/div[{index}]&quot;);\r\n        }\r\n\r\n        // Create a method to get the Tab above the list\r\n        public IWebElement GetListTab()\r\n        {\r\n            return WaitForElementById(wait, $&quot;demo-tab-list&quot;);\r\n        }\r\n\r\nIf you want to check more details of the C# code, you may refer to the following:\r\nhttps://github.com/lorvindc/web-ui-specflow-framework","title":"How I can Sort this Draggable List in Selenium","body":"<p>In order to sort the elements, you need to get each element and drag it to a destination.</p>\n<p>The solution below basically drags and drops each sortable element above the table (although this uses C#, I think logic can be used in Java).\nIn this case I set the destination to the List Tab to ensure the the element is above the list.\nReason: When I tried to set it to the 1st row, it goes to the second row.</p>\n<p>The logic is as follows</p>\n<ul>\n<li><p>Drag/drop element 2 above 1</p>\n</li>\n<li><p>Drag/drop element 3 above 2</p>\n</li>\n<li><p>Drag/drop element 4 above 3</p>\n</li>\n<li><p>Drag/drop element 5 above 4</p>\n</li>\n<li><p>Drag/drop element 6 above 5</p>\n<pre><code>  // Function to sort the elements\n  public void SortElements()\n  {\n      var action = new Actions(webDriver);\n      action.DragAndDrop(sortablePage.GetSortableElementByIndex(2), sortablePage.GetListTab()).Perform();\n      action.DragAndDrop(sortablePage.GetSortableElementByIndex(3), sortablePage.GetListTab()).Perform();\n      action.DragAndDrop(sortablePage.GetSortableElementByIndex(4), sortablePage.GetListTab()).Perform();\n      action.DragAndDrop(sortablePage.GetSortableElementByIndex(5), sortablePage.GetListTab()).Perform();\n      action.DragAndDrop(sortablePage.GetSortableElementByIndex(6), sortablePage.GetListTab()).Perform();\n  }\n\n  // Create a method to get the sortable element by index\n  public IWebElement GetSortableElementByIndex(int index)\n  {\n      return WaitForElementByXPath(wait, $&quot;//div[@id='demo-tabpane-list']/div/div[{index}]&quot;);\n  }\n\n  // Create a method to get the Tab above the list\n  public IWebElement GetListTab()\n  {\n      return WaitForElementById(wait, $&quot;demo-tab-list&quot;);\n  }\n</code></pre>\n</li>\n</ul>\n<p>If you want to check more details of the C# code, you may refer to the following:\n<a href=\"https://github.com/lorvindc/web-ui-specflow-framework\" rel=\"nofollow noreferrer\">https://github.com/lorvindc/web-ui-specflow-framework</a></p>\n"}],"owner":{"account_id":16585000,"reputation":338,"user_id":11984655,"display_name":"Sachidanand Pandit"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":885,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691986067,"creation_date":1625338401,"question_id":68239139,"body_markdown":"Link for Practice \r\nhttps://demoqa.com/sortable\r\n\r\nI tried with this code \r\n```\r\nActions action=new Actions(driver);\r\nList&lt;WebElement&gt; elements=driver.findElements(By.xpath(&quot;//*[@id=\\&quot;demo-tabpane-list\\&quot;]/div/div&quot;));\r\nfor(int i=5;i&gt;=0;i--) {\r\n\r\n\r\naction.dragAndDrop(elements.get(0), elements.get(i)).build().perform();\r\n}\r\n```","title":"How I can Sort this Draggable List in Selenium","body":"<p>Link for Practice\n<a href=\"https://demoqa.com/sortable\" rel=\"nofollow noreferrer\">https://demoqa.com/sortable</a></p>\n<p>I tried with this code</p>\n<pre><code>Actions action=new Actions(driver);\nList&lt;WebElement&gt; elements=driver.findElements(By.xpath(&quot;//*[@id=\\&quot;demo-tabpane-list\\&quot;]/div/div&quot;));\nfor(int i=5;i&gt;=0;i--) {\n\n\naction.dragAndDrop(elements.get(0), elements.get(i)).build().perform();\n}\n</code></pre>\n"},{"tags":["java","apache-flink","flink-streaming"],"answers":[{"comments":[{"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"score":0,"creation_date":1692231342,"post_id":76896194,"comment_id":135596977,"body_markdown":"So, does each job has it&#39;s own RocksDB? Because here we have 3 parallel jobs...","body":"So, does each job has it&#39;s own RocksDB? Because here we have 3 parallel jobs..."},{"owner":{"account_id":2274094,"reputation":40374,"user_id":2000823,"display_name":"David Anderson"},"score":1,"creation_date":1692299397,"post_id":76896194,"comment_id":135608135,"body_markdown":"Yes. I believe there&#39;s actually a separate RocksDB instance for each stateful task.","body":"Yes. I believe there&#39;s actually a separate RocksDB instance for each stateful task."},{"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"score":0,"creation_date":1692303929,"post_id":76896194,"comment_id":135608853,"body_markdown":"When you say, separate rocksDB instance for each stateful task..... say, within  a single job... If a task  partition stream  into 4 datastreams(using `keyBy()`) before running a stateful task for each partitioned stream, then,  does each job maintain 4 instances of RocksDB?","body":"When you say, separate rocksDB instance for each stateful task..... say, within  a single job... If a task  partition stream  into 4 datastreams(using <code>keyBy()</code>) before running a stateful task for each partitioned stream, then,  does each job maintain 4 instances of RocksDB?"},{"owner":{"account_id":2274094,"reputation":40374,"user_id":2000823,"display_name":"David Anderson"},"score":0,"creation_date":1692309174,"post_id":76896194,"comment_id":135609678,"body_markdown":"Possibly more than 4. Typically the source and sink are also stateful, so there might be 12 instances. But this is an implementation detail that shouldn&#39;t matter.","body":"Possibly more than 4. Typically the source and sink are also stateful, so there might be 12 instances. But this is an implementation detail that shouldn&#39;t matter."},{"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"score":0,"creation_date":1692312517,"post_id":76896194,"comment_id":135610005,"body_markdown":"Yes. 4 RocksDB per job &amp; 3 jparallel jobs. So total is 12. I need some clarificaition on `addSink()` api...https://stackoverflow.com/questions/76925478/does-filesink-accumulate-data-across-partitions","body":"Yes. 4 RocksDB per job &amp; 3 jparallel jobs. So total is 12. I need some clarificaition on <code>addSink()</code> api...<a href=\"https://stackoverflow.com/questions/76925478/does-filesink-accumulate-data-across-partitions\" title=\"does filesink accumulate data across partitions\">stackoverflow.com/questions/76925478/&hellip;</a>"},{"owner":{"account_id":2274094,"reputation":40374,"user_id":2000823,"display_name":"David Anderson"},"score":0,"creation_date":1692328289,"post_id":76896194,"comment_id":135611256,"body_markdown":"I think the answer might be 36 (but I&#39;m not sure): 3 jobs x 3 stateful operators per job x 4 slots per job.","body":"I think the answer might be 36 (but I&#39;m not sure): 3 jobs x 3 stateful operators per job x 4 slots per job."}],"tags":[],"owner":{"account_id":2274094,"reputation":40374,"user_id":2000823,"display_name":"David Anderson"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691985624,"creation_date":1691985624,"answer_id":76896194,"question_id":76872428,"body_markdown":"RocksDB is not a networked service; it&#39;s an embedded key/value store. There are separate RocksDB instances in each task manager. ","title":"Flink statebackend - how does parallelism work with RocksDB?","body":"<p>RocksDB is not a networked service; it's an embedded key/value store. There are separate RocksDB instances in each task manager.</p>\n"}],"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76896194,"answer_count":1,"score":0,"last_activity_date":1691985624,"creation_date":1691637112,"question_id":76872428,"body_markdown":"In the below code:\r\n\r\n\r\n    package spendreport;\r\n    \r\n    import org.apache.flink.streaming.api.datastream.DataStream;\r\n    import org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\r\n    import org.apache.flink.walkthrough.common.sink.AlertSink;\r\n    import org.apache.flink.walkthrough.common.entity.Alert;\r\n    import org.apache.flink.walkthrough.common.entity.Transaction;\r\n    import org.apache.flink.walkthrough.common.source.TransactionSource;\r\n    \r\n    public class FraudDetectionJob {\r\n    \r\n       private String checkpointsDir  = &quot;file://checkpoints/&quot;\r\n        private String rocksDBStateDir = &quot;file://state/rocksdb/&quot;\r\n\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\r\n            env.SetParallelism(3);     \r\n            EnvironmentSettings tableSettings = EnvironmentSettings\r\n                .newInstance()\r\n                   .useBlinkPlanner()\r\n                   .build();\r\n    \r\n           StreamTableEnvironment tableEnv = StreamTableEnvironment\r\n                .create(env, tableSettings);\r\n    \r\n          tableEnv.executeSql(&quot;CREATE TABLE Orders (`user` BIGINT, product STRING, amount INT) WITH (...)&quot;);\r\n    \r\n           env.enableCheckpointing(5000)\r\n           env.checkpointConfig.minPauseBetweenCheckpoints = 100\r\n           env.checkpointConfig.setCheckpointStorage(checkpointsDir)\r\n\r\n           stateBackend = EmbeddedRocksDBStateBackend()\r\n           stateBackend.setDbStoragePath(rocksDBStateDir)\r\n           env.stateBackend = stateBackend\r\n\r\n\r\n           DataStream&lt;Transaction&gt; transactions = env\r\n                .addSource(new TransactionSource())\r\n                .name(&quot;transactions&quot;);\r\n            \r\n            DataStream&lt;Alert&gt; alerts = transactions\r\n                .keyBy(Transaction::getAccountId)\r\n                .process(new FraudDetector())\r\n                .name(&quot;fraud-detector&quot;);\r\n    \r\n            alerts\r\n                .addSink(new AlertSink())\r\n                .name(&quot;send-alerts&quot;);\r\n    \r\n            env.execute(&quot;Fraud Detection&quot;);\r\n        }\r\n    }\r\n\r\n--------\r\n\r\n\r\nAbove job has parallelism set to 3. `env.SetParallelism(3)`\r\n\r\nDoes the operator  in each job access the same single RocksDB table(`Orders`)? to read or write records...\r\n\r\nOr \r\n\r\nDoes parallelism(at job level) mean every job has its own RocksDB? Because RocksDB is per task manager and there is no guarantee if each job runs in same task manager ","title":"Flink statebackend - how does parallelism work with RocksDB?","body":"<p>In the below code:</p>\n<pre><code>package spendreport;\n\nimport org.apache.flink.streaming.api.datastream.DataStream;\nimport org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\nimport org.apache.flink.walkthrough.common.sink.AlertSink;\nimport org.apache.flink.walkthrough.common.entity.Alert;\nimport org.apache.flink.walkthrough.common.entity.Transaction;\nimport org.apache.flink.walkthrough.common.source.TransactionSource;\n\npublic class FraudDetectionJob {\n\n   private String checkpointsDir  = &quot;file://checkpoints/&quot;\n    private String rocksDBStateDir = &quot;file://state/rocksdb/&quot;\n\n\n    public static void main(String[] args) throws Exception {\n        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n        env.SetParallelism(3);     \n        EnvironmentSettings tableSettings = EnvironmentSettings\n            .newInstance()\n               .useBlinkPlanner()\n               .build();\n\n       StreamTableEnvironment tableEnv = StreamTableEnvironment\n            .create(env, tableSettings);\n\n      tableEnv.executeSql(&quot;CREATE TABLE Orders (`user` BIGINT, product STRING, amount INT) WITH (...)&quot;);\n\n       env.enableCheckpointing(5000)\n       env.checkpointConfig.minPauseBetweenCheckpoints = 100\n       env.checkpointConfig.setCheckpointStorage(checkpointsDir)\n\n       stateBackend = EmbeddedRocksDBStateBackend()\n       stateBackend.setDbStoragePath(rocksDBStateDir)\n       env.stateBackend = stateBackend\n\n\n       DataStream&lt;Transaction&gt; transactions = env\n            .addSource(new TransactionSource())\n            .name(&quot;transactions&quot;);\n        \n        DataStream&lt;Alert&gt; alerts = transactions\n            .keyBy(Transaction::getAccountId)\n            .process(new FraudDetector())\n            .name(&quot;fraud-detector&quot;);\n\n        alerts\n            .addSink(new AlertSink())\n            .name(&quot;send-alerts&quot;);\n\n        env.execute(&quot;Fraud Detection&quot;);\n    }\n}\n</code></pre>\n<hr />\n<p>Above job has parallelism set to 3. <code>env.SetParallelism(3)</code></p>\n<p>Does the operator  in each job access the same single RocksDB table(<code>Orders</code>)? to read or write records...</p>\n<p>Or</p>\n<p>Does parallelism(at job level) mean every job has its own RocksDB? Because RocksDB is per task manager and there is no guarantee if each job runs in same task manager</p>\n"},{"tags":["java","android","uri","exoplayer"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1509495325,"post_id":47046321,"comment_id":81040008,"body_markdown":"If you are not using HTTP, perhaps `DefaultHttpDataSourceFactory` is the problem. See also `FileDataSource`: http://google.github.io/ExoPlayer/doc/reference/com/google/android/exoplayer2/upstream/FileDataSource.html","body":"If you are not using HTTP, perhaps <code>DefaultHttpDataSourceFactory</code> is the problem. See also <code>FileDataSource</code>: <a href=\"http://google.github.io/ExoPlayer/doc/reference/com/google/android/exoplayer2/upstream/FileDataSource.html\" rel=\"nofollow noreferrer\">google.github.io/ExoPlayer/doc/reference/com/google/android/&zwnj;&#8203;&hellip;</a>"},{"owner":{"account_id":8725718,"reputation":1712,"user_id":6527410,"accept_rate":53,"display_name":"androidXP"},"score":0,"creation_date":1509524624,"post_id":47046321,"comment_id":81048445,"body_markdown":"I&#39;m need to play streaming files and local files with audio.","body":"I&#39;m need to play streaming files and local files with audio."}],"answers":[{"comments":[{"owner":{"account_id":5475193,"reputation":6876,"user_id":4353365,"display_name":"Francis"},"score":5,"creation_date":1537190833,"post_id":47107181,"comment_id":91682025,"body_markdown":"`ExtractorMediaSource()` is deprecated, you should use `ExtractorMediaSource.Factory(DefaultDataSourceFactory(context, &quot;ua&quot;)).createMediaSource(uri)`","body":"<code>ExtractorMediaSource()</code> is deprecated, you should use <code>ExtractorMediaSource.Factory(DefaultDataSourceFactory(contex&zwnj;&#8203;t, &quot;ua&quot;)).createMediaSource(uri)</code>"},{"owner":{"account_id":10399567,"reputation":1041,"user_id":7668336,"display_name":"Dinu Nicolae"},"score":0,"creation_date":1567354212,"post_id":47107181,"comment_id":101932594,"body_markdown":"are you sure AVI is supported?","body":"are you sure AVI is supported?"},{"owner":{"account_id":8725718,"reputation":1712,"user_id":6527410,"accept_rate":53,"display_name":"androidXP"},"score":0,"creation_date":1567465009,"post_id":47107181,"comment_id":101962459,"body_markdown":"Yes and tried and tested on most of the format (audio/video) but not sure how to stream Youtube video in Exoplayer","body":"Yes and tried and tested on most of the format (audio/video) but not sure how to stream Youtube video in Exoplayer"},{"owner":{"account_id":206479,"reputation":11678,"user_id":455796,"accept_rate":67,"display_name":"Damn Vegetables"},"score":2,"creation_date":1568729446,"post_id":47107181,"comment_id":102361936,"body_markdown":"Now the whole `ExtractorMediaSource` class is depreciated (&quot;use ProgressiveMediaSource instead&quot;). Dang, this player was already completed to use and all these continued fast changes are like salt to injury.","body":"Now the whole <code>ExtractorMediaSource</code> class is depreciated (&quot;use ProgressiveMediaSource instead&quot;). Dang, this player was already completed to use and all these continued fast changes are like salt to injury."}],"tags":[],"owner":{"account_id":8725718,"reputation":1712,"user_id":6527410,"accept_rate":53,"display_name":"androidXP"},"comment_count":4,"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1563528476,"creation_date":1509767318,"answer_id":47107181,"question_id":47046321,"body_markdown":"I got the answer from google official Exoplayer repository that \r\n\r\n&gt; The DefaultDataSource supports both local and Http sources. It automatically detects which one to use.\r\n\r\nSo i changed \r\n\r\n  \r\n\r\n    private MediaSource buildMediaSource(Uri uri){\r\n            return new ExtractorMediaSource(uri,\r\n                    new DefaultHttpDataSourceFactory(&quot;ua&quot;),\r\n                    new DefaultExtractorsFactory(),null,null);\r\n    \r\n        }\r\n\r\nto this\r\n\r\n    private MediaSource buildMediaSource(Uri uri){    \r\n            return new ExtractorMediaSource(uri,\r\n                    new DefaultDataSourceFactory(context,&quot;ua&quot;),\r\n                    new DefaultExtractorsFactory(),null,null);\r\n    \r\n        }\r\n\r\n`DefaultDataSourceFactory` detect streaming or local storage file automatically where `DefaultHttpDataSourceFactory` only works on streaming request.\r\n\r\n\r\n**UPDATE**: As new version introduced (2.9.0). Some classes are deprecated also media sources. I am using new version of media source which plays almost every type of files (MP3,MP4,AVI and more)\r\n\r\n   \r\n\r\n     private MediaSource buildMediaSourceNew(Uri uri,int buildType){    \r\n                    DataSource.Factory datasourceFactroy = new DefaultDataSourceFactory(context, Util.getUserAgent(context,&quot;Your App Name&quot;));\r\n                    return new ExtractorMediaSource.Factory(datasourceFactroy).createMediaSource(uri);\r\n    }\r\n\r\n","title":"Exoplayer not playing local file on local storage","body":"<p>I got the answer from google official Exoplayer repository that </p>\n\n<blockquote>\n  <p>The DefaultDataSource supports both local and Http sources. It automatically detects which one to use.</p>\n</blockquote>\n\n<p>So i changed </p>\n\n<pre><code>private MediaSource buildMediaSource(Uri uri){\n        return new ExtractorMediaSource(uri,\n                new DefaultHttpDataSourceFactory(\"ua\"),\n                new DefaultExtractorsFactory(),null,null);\n\n    }\n</code></pre>\n\n<p>to this</p>\n\n<pre><code>private MediaSource buildMediaSource(Uri uri){    \n        return new ExtractorMediaSource(uri,\n                new DefaultDataSourceFactory(context,\"ua\"),\n                new DefaultExtractorsFactory(),null,null);\n\n    }\n</code></pre>\n\n<p><code>DefaultDataSourceFactory</code> detect streaming or local storage file automatically where <code>DefaultHttpDataSourceFactory</code> only works on streaming request.</p>\n\n<p><strong>UPDATE</strong>: As new version introduced (2.9.0). Some classes are deprecated also media sources. I am using new version of media source which plays almost every type of files (MP3,MP4,AVI and more)</p>\n\n<pre><code> private MediaSource buildMediaSourceNew(Uri uri,int buildType){    \n                DataSource.Factory datasourceFactroy = new DefaultDataSourceFactory(context, Util.getUserAgent(context,\"Your App Name\"));\n                return new ExtractorMediaSource.Factory(datasourceFactroy).createMediaSource(uri);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13893,"reputation":21403,"user_id":28149,"accept_rate":93,"display_name":"TimothyP"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691985018,"creation_date":1691985018,"answer_id":76896164,"question_id":47046321,"body_markdown":"At the time of writing, `ExtractorMediaSource` is also deprecated.  \r\n\r\nThe following solution works for me:  \r\n\r\n```java\r\nprivate MediaSource buildMediaSource(Uri uri) {\r\n        MediaItem mediaItem = MediaItem.fromUri(uri);\r\n        return new ProgressiveMediaSource.Factory(new DefaultDataSource.Factory(context)).createMediaSource(mediaItem);\r\n    }\r\n```\r\n\r\nExample usage:\r\n\r\n```java\r\nMediaSource mediaSource = buildMediaSource(Uri.parse(source));\r\nexoPlayer.setMediaSource(mediaSource);\r\nexoPlayer.setRepeatMode(repeat ? Player.REPEAT_MODE_ALL : Player.REPEAT_MODE_OFF);\r\nexoPlayer.prepare();\r\nexoPlayer.setPlayWhenReady(true);\r\n```\r\n\r\nWhere `source` is the full path to a file in the private app data folder of my application, for example:\r\n\r\n`/data/data/com.example.someapp/files/demo.mp4`\r\n\r\nFor me it does not work for files on the `sdcard`, for example: `/mnt/sdcard/Movies/demo.mp4`.\r\n\r\n","title":"Exoplayer not playing local file on local storage","body":"<p>At the time of writing, <code>ExtractorMediaSource</code> is also deprecated.</p>\n<p>The following solution works for me:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private MediaSource buildMediaSource(Uri uri) {\n        MediaItem mediaItem = MediaItem.fromUri(uri);\n        return new ProgressiveMediaSource.Factory(new DefaultDataSource.Factory(context)).createMediaSource(mediaItem);\n    }\n</code></pre>\n<p>Example usage:</p>\n<pre class=\"lang-java prettyprint-override\"><code>MediaSource mediaSource = buildMediaSource(Uri.parse(source));\nexoPlayer.setMediaSource(mediaSource);\nexoPlayer.setRepeatMode(repeat ? Player.REPEAT_MODE_ALL : Player.REPEAT_MODE_OFF);\nexoPlayer.prepare();\nexoPlayer.setPlayWhenReady(true);\n</code></pre>\n<p>Where <code>source</code> is the full path to a file in the private app data folder of my application, for example:</p>\n<p><code>/data/data/com.example.someapp/files/demo.mp4</code></p>\n<p>For me it does not work for files on the <code>sdcard</code>, for example: <code>/mnt/sdcard/Movies/demo.mp4</code>.</p>\n"}],"owner":{"account_id":8725718,"reputation":1712,"user_id":6527410,"accept_rate":53,"display_name":"androidXP"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10488,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":47107181,"answer_count":2,"score":2,"last_activity_date":1691985018,"creation_date":1509494866,"question_id":47046321,"body_markdown":"I am trying to play local file in device like this\r\n\r\n    String filePath=&quot;/storage/emulated/0/MyFiles/Media/Video/Xvid1509401908940.mp4&quot;\r\n    File file=new File(filePath);\r\n    Uri localUri=Uri.fromFile(file);\r\n    exoPlayer_main.initializePlayer(localUri);\r\n\r\n**Getting ClassCastException**\r\n\r\n    11-01 04:45:23.356 27145-29468/com.example.com.pro_working1 E/LoadTask: Unexpected exception loading stream\r\n                                                                             java.lang.ClassCastException: libcore.net.url.FileURLConnection cannot be cast to java.net.HttpURLConnection\r\n                                                                                 at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.makeConnection(DefaultHttpDataSource.java:393)\r\n                                                                                 at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.makeConnection(DefaultHttpDataSource.java:350)\r\n                                                                                 at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.open(DefaultHttpDataSource.java:192)\r\n                                                                                 at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:692)\r\n                                                                                 at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:315)\r\n                                                                                 at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)\r\n                                                                                 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)\r\n                                                                                 at java.lang.Thread.run(Thread.java:818)\r\n    11-01 04:45:23.357 27145-29468/com.example.com.pro_working1 E/LoadTask: Unexpected exception loading stream\r\n                                                                             java.lang.ClassCastException: libcore.net.url.FileURLConnection cannot be cast to java.net.HttpURLConnection\r\n                                                                                 at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.makeConnection(DefaultHttpDataSource.java:393)\r\n                                                                                 at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.makeConnection(DefaultHttpDataSource.java:350)\r\n                                                                                 at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.open(DefaultHttpDataSource.java:192)\r\n                                                                                 at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:692)\r\n                                                                                 at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:315)\r\n                                                                                 at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)\r\n                                                                                 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)\r\n                                                                                 at java.lang.Thread.run(Thread.java:818)\r\n\r\n\r\nMy ExoPlayer Methods which used to initialize exoplayer \r\n\r\n     public void initializePlayer(Uri uri){\r\n            Log.d(TAG,&quot;Init Player Calling&quot;);\r\n    \r\n            if (player==null){\r\n                Log.d(TAG,&quot;Player Is Null Setting Up Player&quot;);\r\n                player= ExoPlayerFactory.newSimpleInstance(\r\n                        new DefaultRenderersFactory(context),\r\n                        new DefaultTrackSelector(),\r\n                        new DefaultLoadControl());\r\n                playerView.setPlayer(player);\r\n                player.addListener(componentListener);\r\n                player.setPlayWhenReady(playWhenReady);\r\n                player.seekTo(currentWindow,playbackPosition);\r\n    \r\n                MediaSource mediaSource=buildMediaSource(uri);\r\n                player.prepare(mediaSource,true,false);\r\n            }\r\n        }\r\n    \r\n        private MediaSource buildMediaSource(Uri uri){\r\n            return new ExtractorMediaSource(uri,\r\n                    new DefaultHttpDataSourceFactory(&quot;ua&quot;),\r\n                    new DefaultExtractorsFactory(),null,null);\r\n    \r\n        }\r\n\r\nI tried to `Uri.parse(path)` and file way as above but it still giving me `ClassCastException` . Please guide me how to play local storage file in exoplayer.","title":"Exoplayer not playing local file on local storage","body":"<p>I am trying to play local file in device like this</p>\n\n<pre><code>String filePath=\"/storage/emulated/0/MyFiles/Media/Video/Xvid1509401908940.mp4\"\nFile file=new File(filePath);\nUri localUri=Uri.fromFile(file);\nexoPlayer_main.initializePlayer(localUri);\n</code></pre>\n\n<p><strong>Getting ClassCastException</strong></p>\n\n<pre><code>11-01 04:45:23.356 27145-29468/com.example.com.pro_working1 E/LoadTask: Unexpected exception loading stream\n                                                                         java.lang.ClassCastException: libcore.net.url.FileURLConnection cannot be cast to java.net.HttpURLConnection\n                                                                             at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.makeConnection(DefaultHttpDataSource.java:393)\n                                                                             at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.makeConnection(DefaultHttpDataSource.java:350)\n                                                                             at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.open(DefaultHttpDataSource.java:192)\n                                                                             at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:692)\n                                                                             at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:315)\n                                                                             at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)\n                                                                             at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)\n                                                                             at java.lang.Thread.run(Thread.java:818)\n11-01 04:45:23.357 27145-29468/com.example.com.pro_working1 E/LoadTask: Unexpected exception loading stream\n                                                                         java.lang.ClassCastException: libcore.net.url.FileURLConnection cannot be cast to java.net.HttpURLConnection\n                                                                             at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.makeConnection(DefaultHttpDataSource.java:393)\n                                                                             at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.makeConnection(DefaultHttpDataSource.java:350)\n                                                                             at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.open(DefaultHttpDataSource.java:192)\n                                                                             at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:692)\n                                                                             at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:315)\n                                                                             at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)\n                                                                             at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)\n                                                                             at java.lang.Thread.run(Thread.java:818)\n</code></pre>\n\n<p>My ExoPlayer Methods which used to initialize exoplayer </p>\n\n<pre><code> public void initializePlayer(Uri uri){\n        Log.d(TAG,\"Init Player Calling\");\n\n        if (player==null){\n            Log.d(TAG,\"Player Is Null Setting Up Player\");\n            player= ExoPlayerFactory.newSimpleInstance(\n                    new DefaultRenderersFactory(context),\n                    new DefaultTrackSelector(),\n                    new DefaultLoadControl());\n            playerView.setPlayer(player);\n            player.addListener(componentListener);\n            player.setPlayWhenReady(playWhenReady);\n            player.seekTo(currentWindow,playbackPosition);\n\n            MediaSource mediaSource=buildMediaSource(uri);\n            player.prepare(mediaSource,true,false);\n        }\n    }\n\n    private MediaSource buildMediaSource(Uri uri){\n        return new ExtractorMediaSource(uri,\n                new DefaultHttpDataSourceFactory(\"ua\"),\n                new DefaultExtractorsFactory(),null,null);\n\n    }\n</code></pre>\n\n<p>I tried to <code>Uri.parse(path)</code> and file way as above but it still giving me <code>ClassCastException</code> . Please guide me how to play local storage file in exoplayer.</p>\n"},{"tags":["java","multithreading","concurrency"],"comments":[{"owner":{"account_id":360576,"reputation":60355,"user_id":702638,"accept_rate":98,"display_name":"Hunter McMillen"},"score":0,"creation_date":1335628562,"post_id":10365132,"comment_id":13356947,"body_markdown":"In this scenario all threads would be blocked at the outer lock, until it was released by the thread in the inner lock.","body":"In this scenario all threads would be blocked at the outer lock, until it was released by the thread in the inner lock."},{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":3,"creation_date":1335628608,"post_id":10365132,"comment_id":13356957,"body_markdown":"The snippit you&#39;ve posted doesn&#39;t do anything; the only thread that can have `lock2` is the one that has `lock1`. Without knowing what the rest of the code is and what those locks are being used for, it&#39;s impossible to answer.","body":"The snippit you&#39;ve posted doesn&#39;t do anything; the only thread that can have <code>lock2</code> is the one that has <code>lock1</code>. Without knowing what the rest of the code is and what those locks are being used for, it&#39;s impossible to answer."},{"owner":{"account_id":395357,"reputation":44547,"user_id":758280,"accept_rate":100,"display_name":"Jeffrey"},"score":0,"creation_date":1335628838,"post_id":10365132,"comment_id":13357006,"body_markdown":"Which article were you reading?","body":"Which article were you reading?"}],"answers":[{"comments":[{"owner":{"account_id":3158057,"reputation":2327,"user_id":2669960,"accept_rate":83,"display_name":"Kevin Lee"},"score":1,"creation_date":1395483594,"post_id":10365261,"comment_id":34366253,"body_markdown":"Could I ask if there is any solution to the nested monitor lockout? Is it possible to call wait on both the inner lock and outer lock or there is no way to do this?","body":"Could I ask if there is any solution to the nested monitor lockout? Is it possible to call wait on both the inner lock and outer lock or there is no way to do this?"},{"owner":{"account_id":397349,"reputation":2541,"user_id":761427,"accept_rate":50,"display_name":"Arthur Coll&#233;"},"score":1,"creation_date":1411679682,"post_id":10365261,"comment_id":40806097,"body_markdown":"Deadlock requires 4 preconditions. Mutual exclusion (so sync(nodes) { sync(edges) { } } while another function has sync(edges) { sync (nodes) { } } ), non-pre-emptibility, circular waiting and resource holding. Only having mutual exclusion is not enough for there to be deadlock. These are called the Coffman conditions if you are curious. http://en.wikipedia.org/wiki/Deadlock_prevention_algorithms","body":"Deadlock requires 4 preconditions. Mutual exclusion (so sync(nodes) { sync(edges) { } } while another function has sync(edges) { sync (nodes) { } } ), non-pre-emptibility, circular waiting and resource holding. Only having mutual exclusion is not enough for there to be deadlock. These are called the Coffman conditions if you are curious. <a href=\"http://en.wikipedia.org/wiki/Deadlock_prevention_algorithms\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Deadlock_prevention_algorithms</a>"}],"tags":[],"owner":{"account_id":1368204,"reputation":6083,"user_id":1304164,"accept_rate":84,"display_name":"Bruce Lowe"},"comment_count":2,"down_vote_count":0,"up_vote_count":37,"is_accepted":true,"score":37,"last_activity_date":1691983031,"creation_date":1335629453,"answer_id":10365261,"question_id":10365132,"body_markdown":"There are 2 possible issues that one would have to watch out for\r\n\r\n1. Nested locks can result in deadlocks quite easily if one is using wait/notify.  Here is an explanation of why. https://jenkov.com/tutorials/java-concurrency/nested-monitor-lockout.html\r\n\r\n2. One should be wary that if another method wishes to lock the same two objects, they must always do it in the same order, otherwise there is the possibility of another deadlock situation as explained in this post: https://stackoverflow.com/questions/5151266/how-to-avoid-nested-synchronization-and-the-resulting-deadlock\r\n\r\n","title":"Java: Nested synchronization blocks","body":"<p>There are 2 possible issues that one would have to watch out for</p>\n<ol>\n<li><p>Nested locks can result in deadlocks quite easily if one is using wait/notify.  Here is an explanation of why. <a href=\"https://jenkov.com/tutorials/java-concurrency/nested-monitor-lockout.html\" rel=\"nofollow noreferrer\">https://jenkov.com/tutorials/java-concurrency/nested-monitor-lockout.html</a></p>\n</li>\n<li><p>One should be wary that if another method wishes to lock the same two objects, they must always do it in the same order, otherwise there is the possibility of another deadlock situation as explained in this post: <a href=\"https://stackoverflow.com/questions/5151266/how-to-avoid-nested-synchronization-and-the-resulting-deadlock\">How to avoid Nested synchronization and the resulting deadlock</a></p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6236104,"reputation":681,"user_id":4851359,"display_name":"infoj"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1485703315,"creation_date":1438970110,"answer_id":31883912,"question_id":10365132,"body_markdown":"On its own this code snippet won&#39;t cause any problem. \r\nBut the problem may come in the form of deadlock if there is something like this code; where we have two methods with synchronized blocks in such a way that objects are locked in opposite orders- \r\n\r\n    public void doSomething() {\r\n        synchronized(lock1) {\r\n            synchronized(lock2) {\r\n                // ...\r\n            }\r\n        }\r\n    }\r\n        \r\n    public void doOtherthing() {\r\n        synchronized(lock2) {\r\n            synchronized(lock1) {\r\n                // ...\r\n            }\r\n        } \r\n    }\r\n\r\nnow if more than one thread are trying to access these methods then there may be a deadlock because of nested synchronized blocks.\r\n","title":"Java: Nested synchronization blocks","body":"<p>On its own this code snippet won't cause any problem. \nBut the problem may come in the form of deadlock if there is something like this code; where we have two methods with synchronized blocks in such a way that objects are locked in opposite orders- </p>\n\n<pre><code>public void doSomething() {\n    synchronized(lock1) {\n        synchronized(lock2) {\n            // ...\n        }\n    }\n}\n\npublic void doOtherthing() {\n    synchronized(lock2) {\n        synchronized(lock1) {\n            // ...\n        }\n    } \n}\n</code></pre>\n\n<p>now if more than one thread are trying to access these methods then there may be a deadlock because of nested synchronized blocks.</p>\n"},{"tags":[],"owner":{"account_id":4112480,"reputation":460,"user_id":4135997,"accept_rate":67,"display_name":"LittleLittleQ"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691983064,"creation_date":1483090770,"answer_id":41393921,"question_id":10365132,"body_markdown":"According to [Nested Monitor Lockout Tutorial][1]\r\n\r\n&gt; In nested monitor lockout, Thread 1 is holding a lock A, and waits\r\nfor a signal from Thread 2. Thread 2 needs the lock A to send the\r\nsignal to Thread 1. While in deadlock, two threads are waiting for each other to release locks.\r\n\r\nDeadlock might be analogous to two persons are imprisoned in two rooms, they want to make a switch to the other&#39;s room but both of them only have their counterpart&#39;s key. While nested monitor lockout just like the boss is arranged to sleep in a room and suppose he&#39;ll be waked up only when someone comes in the room. And the secretary is responsible for waking up his boss. But the boss still hold the key to the room when slept, so the secretary could not come in to wake him up. \r\n\r\n  [1]: https://jenkov.com/tutorials/java-concurrency/nested-monitor-lockout.html","title":"Java: Nested synchronization blocks","body":"<p>According to <a href=\"https://jenkov.com/tutorials/java-concurrency/nested-monitor-lockout.html\" rel=\"nofollow noreferrer\">Nested Monitor Lockout Tutorial</a></p>\n<blockquote>\n<p>In nested monitor lockout, Thread 1 is holding a lock A, and waits\nfor a signal from Thread 2. Thread 2 needs the lock A to send the\nsignal to Thread 1. While in deadlock, two threads are waiting for each other to release locks.</p>\n</blockquote>\n<p>Deadlock might be analogous to two persons are imprisoned in two rooms, they want to make a switch to the other's room but both of them only have their counterpart's key. While nested monitor lockout just like the boss is arranged to sleep in a room and suppose he'll be waked up only when someone comes in the room. And the secretary is responsible for waking up his boss. But the boss still hold the key to the room when slept, so the secretary could not come in to wake him up.</p>\n"}],"owner":{"account_id":490670,"reputation":55804,"user_id":892029,"accept_rate":84,"display_name":"IAmYourFaja"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26909,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":10365261,"answer_count":3,"score":27,"last_activity_date":1691983064,"creation_date":1335628419,"question_id":10365132,"body_markdown":"I saw this in one of Heinz Kabutz&#39;s *Java Specialist* newsletter editions and, although the rest (and indeed, all) of Dr. Kabutz&#39;s articles are well-explained and detailed, he seemed to gloss over what this code is doing, or more importantly, what it&#39;s significance is:\r\n\r\n    public class SomeObject {\r\n        private Object lock1;\r\n        private Object lock2;\r\n\r\n        public void doSomething() {\r\n            synchronized(lock1) {\r\n                synchronized(lock2) {\r\n                    // ...\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nWhat are the implications of nesting `synchronized` blocks? How does this affect different threads attempting to `doSomething()`?","title":"Java: Nested synchronization blocks","body":"<p>I saw this in one of Heinz Kabutz's <em>Java Specialist</em> newsletter editions and, although the rest (and indeed, all) of Dr. Kabutz's articles are well-explained and detailed, he seemed to gloss over what this code is doing, or more importantly, what it's significance is:</p>\n\n<pre><code>public class SomeObject {\n    private Object lock1;\n    private Object lock2;\n\n    public void doSomething() {\n        synchronized(lock1) {\n            synchronized(lock2) {\n                // ...\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>What are the implications of nesting <code>synchronized</code> blocks? How does this affect different threads attempting to <code>doSomething()</code>?</p>\n"},{"tags":["java","android","mobile","in-app-purchase","in-app-billing"],"comments":[{"owner":{"account_id":13575915,"reputation":69,"user_id":9793289,"display_name":"TNT"},"score":0,"creation_date":1691999991,"post_id":76896088,"comment_id":135561369,"body_markdown":"exactly what problem you are facing? are able to purchase SKU successfully or getting the issue in that flow?","body":"exactly what problem you are facing? are able to purchase SKU successfully or getting the issue in that flow?"},{"owner":{"account_id":19451777,"reputation":1,"user_id":14228018,"display_name":"komutanlogar"},"score":0,"creation_date":1692027549,"post_id":76896088,"comment_id":135567027,"body_markdown":"When the user makes a successful purchase, the user&#39;s credit amount does not increase.","body":"When the user makes a successful purchase, the user&#39;s credit amount does not increase."}],"owner":{"account_id":19451777,"reputation":1,"user_id":14228018,"display_name":"komutanlogar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691983053,"creation_date":1691983053,"question_id":76896088,"body_markdown":"    public class CreditBuyActivity extends AppCompatActivity  implements PurchasesUpdatedListener {\r\n    ImageView creditArrowBack;\r\n    private BillingClient billingClient;\r\n    RelativeLayout relative1, relative2,relative3;\r\n    private Map&lt;String, SkuDetails&gt; skuDetailsMap = new HashMap&lt;&gt;();\r\n\r\n    private String[] textArray1 = {&quot;Premium &#252;yelik ile beğeni hakkın artsın&quot;,&quot;Premiumlulara &#246;zel, kredi ile hesap boostlama&quot;,&quot;Premium &#252;ye ol ayrıcalıklara eriş&quot;};\r\n\r\n    private String[] textArray = {\r\n            &quot;Kredilerin ile sohbetin yarıda kalmasın&quot;,&quot;Premiumlulara &#246;zel, kredi ile hesap boostlama&quot;,\r\n            &quot;Kredi ile daha fazla kişiyi beğenebilirsin&quot;};\r\n\r\n    TextView creditAmount;\r\n\r\n    TextView changeText,changeText1;\r\n\r\n    RelativeLayout relativePremium, relativePremium1,relativePremium2;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_credit_buy);\r\n\r\n        creditArrowBack = findViewById(R.id.imageBackArrow);\r\n\r\n        relativePremium = findViewById(R.id.relativePremium);\r\n        relativePremium1 = findViewById(R.id.relativePremium2);\r\n        relativePremium2 = findViewById(R.id.relativePremium3);\r\n\r\n        changeText = findViewById(R.id.changeText);\r\n        changeText1 = findViewById(R.id.changeText1);\r\n\r\n\r\n\r\n        creditArrowBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent intent = new Intent(CreditBuyActivity.this,MainScreen.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n        creditAmount = findViewById(R.id.textCreditAmount);\r\n\r\n\r\n\r\n        FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();\r\n        assert user != null;\r\n        String currentId = user.getUid();\r\n\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        DatabaseReference reference = database.getReference(&quot;profiles&quot;).child(currentId).child(&quot;credit&quot;);\r\n\r\n        reference.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(DataSnapshot snapshot) {\r\n                Integer credit = snapshot.getValue(Integer.class);\r\n\r\n                creditAmount.setText(String.valueOf(credit));\r\n\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n        relative1 = findViewById(R.id.relative1);\r\n        relative2 = findViewById(R.id.relative2);\r\n        relative3 = findViewById(R.id.relative3);\r\n\r\n        relative1.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startPurchaseFlow(&quot;10tl&quot;);\r\n            }\r\n        });\r\n\r\n        relative2.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startPurchaseFlow(&quot;40tl&quot;);\r\n            }\r\n        });\r\n\r\n        relative3.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startPurchaseFlow(&quot;80tl&quot;);\r\n            }\r\n        });\r\n\r\n        relativePremium.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startPurchaseFlow(&quot;onemonthplan&quot;);\r\n            }\r\n        });\r\n\r\n        relativePremium1.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startPurchaseFlow(&quot;139tl&quot;);\r\n            }\r\n        });\r\n\r\n        relativePremium2.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startPurchaseFlow(&quot;499tl&quot;);\r\n\r\n            }\r\n        });\r\n\r\n\r\n\r\n        setupBillingClient();\r\n\r\n        animateTextChange();\r\n        animateTextChange1();\r\n\r\n    }\r\n\r\n    private void setupBillingClient() {\r\n        billingClient = BillingClient.newBuilder(this)\r\n                .setListener(this)\r\n                .enablePendingPurchases()\r\n                .build();\r\n\r\n        billingClient.startConnection(new BillingClientStateListener() {\r\n            @Override\r\n            public void onBillingSetupFinished(@NonNull BillingResult billingResult) {\r\n                if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\r\n                    querySkuDetails();\r\n                    querySkuDetailsMonth();\r\n                    querySkuDetailsYear();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onBillingServiceDisconnected() {\r\n                // Try to restart the connection on the next request to\r\n                // Google Play by calling the startConnection() method.\r\n            }\r\n        });\r\n    }\r\n\r\n    private void querySkuDetails() {\r\n        List&lt;String&gt; skuList = Arrays.asList(&quot;10tl&quot;, &quot;40tl&quot;, &quot;80tl&quot;,&quot;499tl&quot;);\r\n        SkuDetailsParams.Builder params = SkuDetailsParams.newBuilder();\r\n        params.setSkusList(skuList).setType(BillingClient.SkuType.INAPP);\r\n\r\n        billingClient.querySkuDetailsAsync(params.build(), new SkuDetailsResponseListener() {\r\n            @Override\r\n            public void onSkuDetailsResponse(@NonNull BillingResult billingResult, List&lt;SkuDetails&gt; skuDetailsList) {\r\n                if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK &amp;&amp; skuDetailsList != null) {\r\n                    for (SkuDetails skuDetails : skuDetailsList) {\r\n                        skuDetailsMap.put(skuDetails.getSku(), skuDetails);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    private void querySkuDetailsYear(){\r\n        List&lt;String&gt; skuList = Arrays.asList(&quot;139tl&quot;);\r\n        SkuDetailsParams.Builder params = SkuDetailsParams.newBuilder();\r\n        params.setSkusList(skuList).setType(BillingClient.SkuType.INAPP);\r\n\r\n        billingClient.querySkuDetailsAsync(params.build(), new SkuDetailsResponseListener() {\r\n            @Override\r\n            public void onSkuDetailsResponse(@NonNull BillingResult billingResult, List&lt;SkuDetails&gt; skuDetailsList) {\r\n                if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK &amp;&amp; skuDetailsList != null) {\r\n                    for (SkuDetails skuDetails : skuDetailsList) {\r\n                        skuDetailsMap.put(skuDetails.getSku(), skuDetails);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    private void querySkuDetailsMonth() {\r\n        List&lt;String&gt; skuList = Arrays.asList(&quot;onemonthplan&quot;);\r\n        SkuDetailsParams.Builder params = SkuDetailsParams.newBuilder();\r\n        params.setSkusList(skuList).setType(BillingClient.SkuType.SUBS);\r\n\r\n        billingClient.querySkuDetailsAsync(params.build(), new SkuDetailsResponseListener() {\r\n            @Override\r\n            public void onSkuDetailsResponse(@NonNull BillingResult billingResult, List&lt;SkuDetails&gt; skuDetailsList) {\r\n                if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK &amp;&amp; skuDetailsList != null) {\r\n                    for (SkuDetails skuDetails : skuDetailsList) {\r\n                        skuDetailsMap.put(skuDetails.getSku(), skuDetails);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    private void startPurchaseFlow(String skuId) {\r\n        SkuDetails skuDetails = skuDetailsMap.get(skuId);\r\n        if (skuDetails != null) {\r\n            BillingFlowParams billingFlowParams = BillingFlowParams.newBuilder()\r\n                    .setSkuDetails(skuDetails)\r\n                    .build();\r\n            billingClient.launchBillingFlow(this, billingFlowParams);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onPurchasesUpdated(BillingResult billingResult, List&lt;Purchase&gt; purchases) {\r\n        if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK &amp;&amp; purchases != null) {\r\n            for (com.android.billingclient.api.Purchase purchase : purchases) {\r\n                handlePurchase(purchase);\r\n            }\r\n        }\r\n    }\r\n\r\n    private void handlePurchase(Purchase purchase) {\r\n        // Handle the purchase here (e.g., grant the user access to the purchased item)\r\n        if (!purchase.isAcknowledged()) {\r\n            // Acknowledge the purchase\r\n            acknowledgePurchase(purchase.getPurchaseToken());\r\n\r\n        }\r\n\r\n        // Grant the user access to the purchased item\r\n        ArrayList&lt;String&gt; sku = purchase.getSkus();\r\n        int quantity = purchase.getQuantity();\r\n        if (&quot;10tl&quot;.equals(sku)) {\r\n            // Grant access to the &quot;diamond100&quot; product\r\n            grantAccessToDiamond100();\r\n        }else if (&quot;40tl&quot;.equals(sku)) {\r\n            // Grant access to the &quot;diamond300&quot; product\r\n            grantAccessToDiamond300();\r\n        }else if (&quot;80tl&quot;.equals(sku)) {\r\n            // Grant access to the &quot;diamond559&quot; product\r\n            grantAccessToDiamond559();\r\n        }else if (&quot;onemonthplan&quot;.equals(sku)){\r\n            grantAccessToOneMonthPlan();\r\n        }else if (&quot;139tl&quot;.equals(sku)){\r\n            grantAccessToSixMonthPlan();\r\n        }else if (&quot;499tl&quot;.equals(sku)){\r\n            grantAccessToOneYearPlan();\r\n        }\r\n\r\n\r\n    }\r\n\r\n    private void grantAccessToDiamond300(){\r\n\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();\r\n        String currentUserId = user.getUid();\r\n        DatabaseReference reference = database.getReference(&quot;profiles&quot;).child(currentUserId);\r\n\r\n\r\n\r\n        // Retrieve the current &quot;coins&quot; value\r\n        reference.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(DataSnapshot snapshot) {\r\n                Integer credit = snapshot.child(&quot;credit&quot;).getValue(Integer.class);\r\n\r\n                Log.d(&quot;CreditBuyActivity&quot;, &quot;onDataChange: &quot; +credit);\r\n                int newCredit = credit + 500;\r\n\r\n                reference.child(&quot;credit&quot;).setValue(newCredit);\r\n\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void grantAccessToDiamond559() {\r\n        DatabaseReference databaseRef = FirebaseDatabase.getInstance().getReference();\r\n        String userId = FirebaseAuth.getInstance().getCurrentUser().getUid(); // Kullanıcının UID&#39;si\r\n\r\n        // Retrieve the current &quot;coins&quot; value\r\n        databaseRef.child(&quot;profiles&quot;).child(userId).addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                if (snapshot.exists()) {\r\n                    Integer credit = snapshot.child(&quot;credit&quot;).getValue(Integer.class);\r\n\r\n                    int newCredit = credit + 1000;\r\n\r\n                    databaseRef.child(&quot;credit&quot;).setValue(newCredit);\r\n\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n                Log.d(&quot;TAG&quot;, &quot;Failed to update coin count.&quot;, error.toException());\r\n            }\r\n        });\r\n    }\r\n\r\n    private void grantAccessToDiamond100() {\r\n        // Grant the user access to the &quot;diamond100&quot; product\r\n        // This could involve updating the user&#39;s subscription status in your app or on your server\r\n\r\n        // Increase &quot;diamond100&quot; count in the database\r\n        DatabaseReference databaseRef = FirebaseDatabase.getInstance().getReference();\r\n        String userId = FirebaseAuth.getInstance().getCurrentUser().getUid(); // Kullanıcının UID&#39;si\r\n\r\n        // Retrieve the current &quot;coins&quot; value\r\n        databaseRef.child(&quot;profiles&quot;).child(userId).addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                if (snapshot.exists()) {\r\n                    Integer credit = snapshot.child(&quot;credit&quot;).getValue(Integer.class);\r\n\r\n                    int newCredit = credit + 100;\r\n\r\n                    databaseRef.child(&quot;credit&quot;).setValue(newCredit);\r\n\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n                Log.d(&quot;TAG&quot;, &quot;Failed to update coin count.&quot;, error.toException());\r\n            }\r\n        });\r\n    }\r\n\r\n    private void acknowledgePurchase(String purchaseToken) {\r\n        AcknowledgePurchaseParams acknowledgePurchaseParams =\r\n                AcknowledgePurchaseParams.newBuilder()\r\n                        .setPurchaseToken(purchaseToken)\r\n                        .build();\r\n        billingClient.acknowledgePurchase(acknowledgePurchaseParams, new AcknowledgePurchaseResponseListener() {\r\n            @Override\r\n            public void onAcknowledgePurchaseResponse(@NonNull BillingResult billingResult) {\r\n                if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\r\n                    // Purchase acknowledged successfully\r\n\r\n                    \r\n                    Toast.makeText(CreditBuyActivity.this, &quot;Satın alım başarılı&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void grantAccessToOneMonthPlan() {\r\n\r\n        FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();\r\n        String currentUserId = user.getUid();\r\n\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        DatabaseReference reference = database.getReference(&quot;profiles&quot;).child(currentUserId);\r\n\r\n        reference.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(DataSnapshot snapshot) {\r\n                    if (snapshot.exists()){\r\n                        boolean isPremium = snapshot.child(&quot;premium&quot;).getValue(Boolean.class);\r\n                        Log.d(&quot;CreditBuyActivity&quot;, &quot;onDataChange: &quot;+ isPremium);\r\n\r\n                        reference.child(&quot;premium&quot;).setValue(true);\r\n\r\n                    }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void grantAccessToSixMonthPlan() {\r\n        // Grant the user access to the six-month plan\r\n        // This could involve updating the user&#39;s subscription status in your app or on your server\r\n        FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();\r\n        String currentUserId = user.getUid();\r\n\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        DatabaseReference reference = database.getReference(&quot;profiles&quot;).child(currentUserId);\r\n\r\n        reference.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(DataSnapshot snapshot) {\r\n                if (snapshot.exists()){\r\n                    boolean isPremium = snapshot.child(&quot;premium&quot;).getValue(Boolean.class);\r\n                    Log.d(&quot;CreditBuyActivity&quot;, &quot;onDataChange: &quot;+ isPremium);\r\n\r\n                    reference.child(&quot;premium&quot;).setValue(true);\r\n\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void grantAccessToOneYearPlan() {\r\n        // Grant the user access to the one-year plan\r\n        // This could involve updating the user&#39;s subscription status in your app or on your server\r\n        DatabaseReference databaseRef = FirebaseDatabase.getInstance().getReference();\r\n        String userId = FirebaseAuth.getInstance().getCurrentUser().getUid(); // Kullanıcının UID&#39;si\r\n\r\n        // Retrieve the current &quot;coins&quot; value\r\n        FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();\r\n        String currentUserId = user.getUid();\r\n\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        DatabaseReference reference = database.getReference(&quot;profiles&quot;).child(currentUserId);\r\n\r\n        reference.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(DataSnapshot snapshot) {\r\n                if (snapshot.exists()){\r\n                    boolean isPremium = snapshot.child(&quot;premium&quot;).getValue(Boolean.class);\r\n                    Log.d(&quot;CreditBuyActivity&quot;, &quot;onDataChange: &quot;+ isPremium);\r\n\r\n                    reference.child(&quot;premium&quot;).setValue(true);\r\n\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n\r\n I&#39;m reaching out regarding an issue you might be able to help me with. I&#39;ve recently encountered a situation related to in-app purchases and access to purchased content.\r\n\r\nThe scenario is as follows: After successfully completing a purchase, I&#39;m facing difficulties in granting users access to the purchased content. I&#39;ve verified that the SKUs (Stock Keeping Units) are correctly set up, and the Firebase connections seem to be in order as well.\r\n\r\nGiven that the purchase process is successfully concluding, the challenge seems to lie in delivering the appropriate content associated with the purchased SKU. I&#39;ve ensured that the SKU values match both in the code and on the Google Play Developer Console. Additionally, I&#39;ve double-checked the configuration of Firebase connections to ensure accuracy.\r\n\r\nIf you have any insights or suggestions on how to address this issue, I would greatly appreciate your assistance. I&#39;m open to any recommendations or potential solutions that could help me grant users access to the content they&#39;ve purchased.\r\n\r\nThank you in advance for your time and expertise. Your input could be immensely valuable in resolving this issue and ensuring a smooth user experience.","title":"Android billing client purchase SKU not getting","body":"<pre><code>public class CreditBuyActivity extends AppCompatActivity  implements PurchasesUpdatedListener {\nImageView creditArrowBack;\nprivate BillingClient billingClient;\nRelativeLayout relative1, relative2,relative3;\nprivate Map&lt;String, SkuDetails&gt; skuDetailsMap = new HashMap&lt;&gt;();\n\nprivate String[] textArray1 = {&quot;Premium üyelik ile beğeni hakkın artsın&quot;,&quot;Premiumlulara özel, kredi ile hesap boostlama&quot;,&quot;Premium üye ol ayrıcalıklara eriş&quot;};\n\nprivate String[] textArray = {\n        &quot;Kredilerin ile sohbetin yarıda kalmasın&quot;,&quot;Premiumlulara özel, kredi ile hesap boostlama&quot;,\n        &quot;Kredi ile daha fazla kişiyi beğenebilirsin&quot;};\n\nTextView creditAmount;\n\nTextView changeText,changeText1;\n\nRelativeLayout relativePremium, relativePremium1,relativePremium2;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_credit_buy);\n\n    creditArrowBack = findViewById(R.id.imageBackArrow);\n\n    relativePremium = findViewById(R.id.relativePremium);\n    relativePremium1 = findViewById(R.id.relativePremium2);\n    relativePremium2 = findViewById(R.id.relativePremium3);\n\n    changeText = findViewById(R.id.changeText);\n    changeText1 = findViewById(R.id.changeText1);\n\n\n\n    creditArrowBack.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            Intent intent = new Intent(CreditBuyActivity.this,MainScreen.class);\n            startActivity(intent);\n        }\n    });\n\n    creditAmount = findViewById(R.id.textCreditAmount);\n\n\n\n    FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();\n    assert user != null;\n    String currentId = user.getUid();\n\n    FirebaseDatabase database = FirebaseDatabase.getInstance();\n    DatabaseReference reference = database.getReference(&quot;profiles&quot;).child(currentId).child(&quot;credit&quot;);\n\n    reference.addListenerForSingleValueEvent(new ValueEventListener() {\n        @Override\n        public void onDataChange(DataSnapshot snapshot) {\n            Integer credit = snapshot.getValue(Integer.class);\n\n            creditAmount.setText(String.valueOf(credit));\n\n\n        }\n\n        @Override\n        public void onCancelled(DatabaseError error) {\n\n        }\n    });\n\n\n    relative1 = findViewById(R.id.relative1);\n    relative2 = findViewById(R.id.relative2);\n    relative3 = findViewById(R.id.relative3);\n\n    relative1.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            startPurchaseFlow(&quot;10tl&quot;);\n        }\n    });\n\n    relative2.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            startPurchaseFlow(&quot;40tl&quot;);\n        }\n    });\n\n    relative3.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            startPurchaseFlow(&quot;80tl&quot;);\n        }\n    });\n\n    relativePremium.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            startPurchaseFlow(&quot;onemonthplan&quot;);\n        }\n    });\n\n    relativePremium1.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            startPurchaseFlow(&quot;139tl&quot;);\n        }\n    });\n\n    relativePremium2.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            startPurchaseFlow(&quot;499tl&quot;);\n\n        }\n    });\n\n\n\n    setupBillingClient();\n\n    animateTextChange();\n    animateTextChange1();\n\n}\n\nprivate void setupBillingClient() {\n    billingClient = BillingClient.newBuilder(this)\n            .setListener(this)\n            .enablePendingPurchases()\n            .build();\n\n    billingClient.startConnection(new BillingClientStateListener() {\n        @Override\n        public void onBillingSetupFinished(@NonNull BillingResult billingResult) {\n            if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\n                querySkuDetails();\n                querySkuDetailsMonth();\n                querySkuDetailsYear();\n            }\n        }\n\n        @Override\n        public void onBillingServiceDisconnected() {\n            // Try to restart the connection on the next request to\n            // Google Play by calling the startConnection() method.\n        }\n    });\n}\n\nprivate void querySkuDetails() {\n    List&lt;String&gt; skuList = Arrays.asList(&quot;10tl&quot;, &quot;40tl&quot;, &quot;80tl&quot;,&quot;499tl&quot;);\n    SkuDetailsParams.Builder params = SkuDetailsParams.newBuilder();\n    params.setSkusList(skuList).setType(BillingClient.SkuType.INAPP);\n\n    billingClient.querySkuDetailsAsync(params.build(), new SkuDetailsResponseListener() {\n        @Override\n        public void onSkuDetailsResponse(@NonNull BillingResult billingResult, List&lt;SkuDetails&gt; skuDetailsList) {\n            if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK &amp;&amp; skuDetailsList != null) {\n                for (SkuDetails skuDetails : skuDetailsList) {\n                    skuDetailsMap.put(skuDetails.getSku(), skuDetails);\n                }\n            }\n        }\n    });\n}\n\nprivate void querySkuDetailsYear(){\n    List&lt;String&gt; skuList = Arrays.asList(&quot;139tl&quot;);\n    SkuDetailsParams.Builder params = SkuDetailsParams.newBuilder();\n    params.setSkusList(skuList).setType(BillingClient.SkuType.INAPP);\n\n    billingClient.querySkuDetailsAsync(params.build(), new SkuDetailsResponseListener() {\n        @Override\n        public void onSkuDetailsResponse(@NonNull BillingResult billingResult, List&lt;SkuDetails&gt; skuDetailsList) {\n            if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK &amp;&amp; skuDetailsList != null) {\n                for (SkuDetails skuDetails : skuDetailsList) {\n                    skuDetailsMap.put(skuDetails.getSku(), skuDetails);\n                }\n            }\n        }\n    });\n}\n\nprivate void querySkuDetailsMonth() {\n    List&lt;String&gt; skuList = Arrays.asList(&quot;onemonthplan&quot;);\n    SkuDetailsParams.Builder params = SkuDetailsParams.newBuilder();\n    params.setSkusList(skuList).setType(BillingClient.SkuType.SUBS);\n\n    billingClient.querySkuDetailsAsync(params.build(), new SkuDetailsResponseListener() {\n        @Override\n        public void onSkuDetailsResponse(@NonNull BillingResult billingResult, List&lt;SkuDetails&gt; skuDetailsList) {\n            if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK &amp;&amp; skuDetailsList != null) {\n                for (SkuDetails skuDetails : skuDetailsList) {\n                    skuDetailsMap.put(skuDetails.getSku(), skuDetails);\n                }\n            }\n        }\n    });\n}\n\nprivate void startPurchaseFlow(String skuId) {\n    SkuDetails skuDetails = skuDetailsMap.get(skuId);\n    if (skuDetails != null) {\n        BillingFlowParams billingFlowParams = BillingFlowParams.newBuilder()\n                .setSkuDetails(skuDetails)\n                .build();\n        billingClient.launchBillingFlow(this, billingFlowParams);\n    }\n}\n\n@Override\npublic void onPurchasesUpdated(BillingResult billingResult, List&lt;Purchase&gt; purchases) {\n    if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK &amp;&amp; purchases != null) {\n        for (com.android.billingclient.api.Purchase purchase : purchases) {\n            handlePurchase(purchase);\n        }\n    }\n}\n\nprivate void handlePurchase(Purchase purchase) {\n    // Handle the purchase here (e.g., grant the user access to the purchased item)\n    if (!purchase.isAcknowledged()) {\n        // Acknowledge the purchase\n        acknowledgePurchase(purchase.getPurchaseToken());\n\n    }\n\n    // Grant the user access to the purchased item\n    ArrayList&lt;String&gt; sku = purchase.getSkus();\n    int quantity = purchase.getQuantity();\n    if (&quot;10tl&quot;.equals(sku)) {\n        // Grant access to the &quot;diamond100&quot; product\n        grantAccessToDiamond100();\n    }else if (&quot;40tl&quot;.equals(sku)) {\n        // Grant access to the &quot;diamond300&quot; product\n        grantAccessToDiamond300();\n    }else if (&quot;80tl&quot;.equals(sku)) {\n        // Grant access to the &quot;diamond559&quot; product\n        grantAccessToDiamond559();\n    }else if (&quot;onemonthplan&quot;.equals(sku)){\n        grantAccessToOneMonthPlan();\n    }else if (&quot;139tl&quot;.equals(sku)){\n        grantAccessToSixMonthPlan();\n    }else if (&quot;499tl&quot;.equals(sku)){\n        grantAccessToOneYearPlan();\n    }\n\n\n}\n\nprivate void grantAccessToDiamond300(){\n\n    FirebaseDatabase database = FirebaseDatabase.getInstance();\n    FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();\n    String currentUserId = user.getUid();\n    DatabaseReference reference = database.getReference(&quot;profiles&quot;).child(currentUserId);\n\n\n\n    // Retrieve the current &quot;coins&quot; value\n    reference.addValueEventListener(new ValueEventListener() {\n        @Override\n        public void onDataChange(DataSnapshot snapshot) {\n            Integer credit = snapshot.child(&quot;credit&quot;).getValue(Integer.class);\n\n            Log.d(&quot;CreditBuyActivity&quot;, &quot;onDataChange: &quot; +credit);\n            int newCredit = credit + 500;\n\n            reference.child(&quot;credit&quot;).setValue(newCredit);\n\n\n        }\n\n        @Override\n        public void onCancelled(DatabaseError error) {\n\n        }\n    });\n\n}\n\nprivate void grantAccessToDiamond559() {\n    DatabaseReference databaseRef = FirebaseDatabase.getInstance().getReference();\n    String userId = FirebaseAuth.getInstance().getCurrentUser().getUid(); // Kullanıcının UID'si\n\n    // Retrieve the current &quot;coins&quot; value\n    databaseRef.child(&quot;profiles&quot;).child(userId).addListenerForSingleValueEvent(new ValueEventListener() {\n        @Override\n        public void onDataChange(@NonNull DataSnapshot snapshot) {\n            if (snapshot.exists()) {\n                Integer credit = snapshot.child(&quot;credit&quot;).getValue(Integer.class);\n\n                int newCredit = credit + 1000;\n\n                databaseRef.child(&quot;credit&quot;).setValue(newCredit);\n\n            }\n        }\n\n        @Override\n        public void onCancelled(@NonNull DatabaseError error) {\n            Log.d(&quot;TAG&quot;, &quot;Failed to update coin count.&quot;, error.toException());\n        }\n    });\n}\n\nprivate void grantAccessToDiamond100() {\n    // Grant the user access to the &quot;diamond100&quot; product\n    // This could involve updating the user's subscription status in your app or on your server\n\n    // Increase &quot;diamond100&quot; count in the database\n    DatabaseReference databaseRef = FirebaseDatabase.getInstance().getReference();\n    String userId = FirebaseAuth.getInstance().getCurrentUser().getUid(); // Kullanıcının UID'si\n\n    // Retrieve the current &quot;coins&quot; value\n    databaseRef.child(&quot;profiles&quot;).child(userId).addListenerForSingleValueEvent(new ValueEventListener() {\n        @Override\n        public void onDataChange(@NonNull DataSnapshot snapshot) {\n            if (snapshot.exists()) {\n                Integer credit = snapshot.child(&quot;credit&quot;).getValue(Integer.class);\n\n                int newCredit = credit + 100;\n\n                databaseRef.child(&quot;credit&quot;).setValue(newCredit);\n\n            }\n        }\n\n        @Override\n        public void onCancelled(@NonNull DatabaseError error) {\n            Log.d(&quot;TAG&quot;, &quot;Failed to update coin count.&quot;, error.toException());\n        }\n    });\n}\n\nprivate void acknowledgePurchase(String purchaseToken) {\n    AcknowledgePurchaseParams acknowledgePurchaseParams =\n            AcknowledgePurchaseParams.newBuilder()\n                    .setPurchaseToken(purchaseToken)\n                    .build();\n    billingClient.acknowledgePurchase(acknowledgePurchaseParams, new AcknowledgePurchaseResponseListener() {\n        @Override\n        public void onAcknowledgePurchaseResponse(@NonNull BillingResult billingResult) {\n            if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\n                // Purchase acknowledged successfully\n\n                \n                Toast.makeText(CreditBuyActivity.this, &quot;Satın alım başarılı&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n    });\n\n}\n\nprivate void grantAccessToOneMonthPlan() {\n\n    FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();\n    String currentUserId = user.getUid();\n\n    FirebaseDatabase database = FirebaseDatabase.getInstance();\n    DatabaseReference reference = database.getReference(&quot;profiles&quot;).child(currentUserId);\n\n    reference.addListenerForSingleValueEvent(new ValueEventListener() {\n        @Override\n        public void onDataChange(DataSnapshot snapshot) {\n                if (snapshot.exists()){\n                    boolean isPremium = snapshot.child(&quot;premium&quot;).getValue(Boolean.class);\n                    Log.d(&quot;CreditBuyActivity&quot;, &quot;onDataChange: &quot;+ isPremium);\n\n                    reference.child(&quot;premium&quot;).setValue(true);\n\n                }\n        }\n\n        @Override\n        public void onCancelled(DatabaseError error) {\n\n        }\n    });\n\n}\n\nprivate void grantAccessToSixMonthPlan() {\n    // Grant the user access to the six-month plan\n    // This could involve updating the user's subscription status in your app or on your server\n    FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();\n    String currentUserId = user.getUid();\n\n    FirebaseDatabase database = FirebaseDatabase.getInstance();\n    DatabaseReference reference = database.getReference(&quot;profiles&quot;).child(currentUserId);\n\n    reference.addListenerForSingleValueEvent(new ValueEventListener() {\n        @Override\n        public void onDataChange(DataSnapshot snapshot) {\n            if (snapshot.exists()){\n                boolean isPremium = snapshot.child(&quot;premium&quot;).getValue(Boolean.class);\n                Log.d(&quot;CreditBuyActivity&quot;, &quot;onDataChange: &quot;+ isPremium);\n\n                reference.child(&quot;premium&quot;).setValue(true);\n\n            }\n        }\n\n        @Override\n        public void onCancelled(DatabaseError error) {\n\n        }\n    });\n}\n\nprivate void grantAccessToOneYearPlan() {\n    // Grant the user access to the one-year plan\n    // This could involve updating the user's subscription status in your app or on your server\n    DatabaseReference databaseRef = FirebaseDatabase.getInstance().getReference();\n    String userId = FirebaseAuth.getInstance().getCurrentUser().getUid(); // Kullanıcının UID'si\n\n    // Retrieve the current &quot;coins&quot; value\n    FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();\n    String currentUserId = user.getUid();\n\n    FirebaseDatabase database = FirebaseDatabase.getInstance();\n    DatabaseReference reference = database.getReference(&quot;profiles&quot;).child(currentUserId);\n\n    reference.addListenerForSingleValueEvent(new ValueEventListener() {\n        @Override\n        public void onDataChange(DataSnapshot snapshot) {\n            if (snapshot.exists()){\n                boolean isPremium = snapshot.child(&quot;premium&quot;).getValue(Boolean.class);\n                Log.d(&quot;CreditBuyActivity&quot;, &quot;onDataChange: &quot;+ isPremium);\n\n                reference.child(&quot;premium&quot;).setValue(true);\n\n            }\n        }\n\n        @Override\n        public void onCancelled(DatabaseError error) {\n\n        }\n    });\n}\n</code></pre>\n<p>I'm reaching out regarding an issue you might be able to help me with. I've recently encountered a situation related to in-app purchases and access to purchased content.</p>\n<p>The scenario is as follows: After successfully completing a purchase, I'm facing difficulties in granting users access to the purchased content. I've verified that the SKUs (Stock Keeping Units) are correctly set up, and the Firebase connections seem to be in order as well.</p>\n<p>Given that the purchase process is successfully concluding, the challenge seems to lie in delivering the appropriate content associated with the purchased SKU. I've ensured that the SKU values match both in the code and on the Google Play Developer Console. Additionally, I've double-checked the configuration of Firebase connections to ensure accuracy.</p>\n<p>If you have any insights or suggestions on how to address this issue, I would greatly appreciate your assistance. I'm open to any recommendations or potential solutions that could help me grant users access to the content they've purchased.</p>\n<p>Thank you in advance for your time and expertise. Your input could be immensely valuable in resolving this issue and ensuring a smooth user experience.</p>\n"},{"tags":["java","cloudsim"],"answers":[{"tags":[],"owner":{"account_id":5524310,"reputation":140,"user_id":4386292,"accept_rate":25,"display_name":"Md Razon Hossain"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691982757,"creation_date":1691982757,"answer_id":76896075,"question_id":74857569,"body_markdown":"You can consider an app module as your data replica manager. Make a custom app module and use a Fog device to host that. For this, you can make a custom Fog device as well.","title":"Replication in ifogsim","body":"<p>You can consider an app module as your data replica manager. Make a custom app module and use a Fog device to host that. For this, you can make a custom Fog device as well.</p>\n"}],"owner":{"account_id":27302440,"reputation":1,"user_id":20818937,"display_name":"Melika Asedel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691982757,"creation_date":1671498389,"question_id":74857569,"body_markdown":"I want to make a data replication manager in my fog architecture\r\nthis data replica manager component has 3 methods a monitor module, a predication module, data replica placement module)in fog layer\r\nI really need it for my thesis\r\nin ifogsim i made a class and made my 3layer architecture\r\nbut I don&#39;t know which of the class of ifogsim I should modify to make a data replica manager","title":"Replication in ifogsim","body":"<p>I want to make a data replication manager in my fog architecture\nthis data replica manager component has 3 methods a monitor module, a predication module, data replica placement module)in fog layer\nI really need it for my thesis\nin ifogsim i made a class and made my 3layer architecture\nbut I don't know which of the class of ifogsim I should modify to make a data replica manager</p>\n"},{"tags":["java","jboss7.x","resteasy","swagger"],"comments":[{"owner":{"account_id":1113341,"reputation":14270,"user_id":1103327,"display_name":"Ron"},"score":0,"creation_date":1418543368,"post_id":27464010,"comment_id":43370321,"body_markdown":"Can you clarify a few things? Swagger is a spec, not a library. When you say Swagger 1.3.10 I understand you mean swagger-core 1.3.10. I&#39;m not sure what you mean by `http://localhost:8080/RestEasy-1/ (RUNS SWAGGER)` - what&#39;s SWAGGER here?","body":"Can you clarify a few things? Swagger is a spec, not a library. When you say Swagger 1.3.10 I understand you mean swagger-core 1.3.10. I&#39;m not sure what you mean by <code>http:&#47;&#47;localhost:8080&#47;RestEasy-1&#47; (RUNS SWAGGER)</code> - what&#39;s SWAGGER here?"},{"owner":{"account_id":1032762,"reputation":682,"user_id":1040740,"accept_rate":62,"display_name":"javatestcase"},"score":0,"creation_date":1418578712,"post_id":27464010,"comment_id":43378728,"body_markdown":"@webron swagger-ui, specifically the index.html of swagger-ui in the WEB-INF folder.","body":"@webron swagger-ui, specifically the index.html of swagger-ui in the WEB-INF folder."},{"owner":{"account_id":6304715,"reputation":615,"user_id":4898146,"accept_rate":70,"display_name":"Renan Geraldo"},"score":0,"creation_date":1618609039,"post_id":27464010,"comment_id":118663202,"body_markdown":"Have you find any solution for this?","body":"Have you find any solution for this?"}],"answers":[{"comments":[{"owner":{"account_id":1032762,"reputation":682,"user_id":1040740,"accept_rate":62,"display_name":"javatestcase"},"score":1,"creation_date":1418590189,"post_id":27472144,"comment_id":43382236,"body_markdown":"that is definitely the issue.  I will update my question with the exact code I use later. Thanks!","body":"that is definitely the issue.  I will update my question with the exact code I use later. Thanks!"}],"tags":[],"owner":{"account_id":1113341,"reputation":14270,"user_id":1103327,"display_name":"Ron"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1418579271,"creation_date":1418579271,"answer_id":27472144,"question_id":27464010,"body_markdown":"The problem is that you&#39;re trying to serve both the application and static context from the same resource root, and there are some technical issues behind it.\r\n\r\nI believe this SO question - https://stackoverflow.com/questions/10874188/jax-rs-application-on-the-root-context-how-can-it-be-done - refers to the same thing and contains an extensive solution to the problem.","title":"Why Can&#39;t Swagger + RESTEasy use @ApplicationPath(&quot;&quot;)","body":"<p>The problem is that you're trying to serve both the application and static context from the same resource root, and there are some technical issues behind it.</p>\n\n<p>I believe this SO question - <a href=\"https://stackoverflow.com/questions/10874188/jax-rs-application-on-the-root-context-how-can-it-be-done\">JAX-RS Application on the root context - how can it be done?</a> - refers to the same thing and contains an extensive solution to the problem.</p>\n"},{"tags":[],"owner":{"account_id":7656575,"reputation":596,"user_id":5803213,"display_name":"Robinyo"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691982312,"creation_date":1481575984,"answer_id":41109353,"question_id":27464010,"body_markdown":"While you can&#39;t use the @ApplicationPath annotation, you can set the application path using an initialisation parameter:\r\n\r\n    package org.robferguson.resteasy.examples.fatjar;\r\n    \r\n    import org.eclipse.jetty.server.Server;\r\n    import org.eclipse.jetty.servlet.ServletContextHandler;\r\n    import org.eclipse.jetty.servlet.ServletHolder;\r\n    import org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher;\r\n    \r\n    public class Main {\r\n    \r\n      static final String APPLICATION_PATH = &quot;/api&quot;;\r\n      static final String API_PATH_SPEC = &quot;/api/*&quot;;\r\n      static final String SWAGGER_UI_PATH_SPEC = &quot;/*&quot;;\r\n    \r\n      public Main() {}\r\n    \r\n      public static void main( String[] args ) throws Exception\r\n      {\r\n        try\r\n        {\r\n          new Main().run();\r\n        }\r\n        catch (Throwable t)\r\n        {\r\n          t.printStackTrace();\r\n        }\r\n      }\r\n    \r\n      public void run() throws Exception\r\n      {\r\n        final int port = 8080;\r\n        final Server server = new Server(port);\r\n    \r\n        // setup Application context\r\n        ServletContextHandler context = new ServletContextHandler();\r\n    \r\n        // setup JAX-RS (RESTEasy) resources\r\n        ServletHolder apiServlet = new ServletHolder(\r\n            new HttpServletDispatcher());\r\n        apiServlet.setInitOrder(1);\r\n        apiServlet.setInitParameter(&quot;resteasy.servlet.mapping.prefix&quot;,\r\n            APPLICATION_PATH);\r\n        apiServlet.setInitParameter(&quot;javax.ws.rs.Application&quot;,\r\n            &quot;org.robferguson.resteasy.examples.fatjar.FatJarApplication&quot;);\r\n    \r\n        // setup static (Swagger UI) resources\r\n        String resourceBasePath = Main.class.getResource(\r\n          &quot;/swagger-ui&quot;).toExternalForm();\r\n        context.setResourceBase(resourceBasePath);\r\n        context.setWelcomeFiles(new String[] { &quot;index.html&quot; });\r\n    \r\n        ServletHolder swaggerUiServlet = new ServletHolder(\r\n          new DefaultServlet());\r\n        swaggerUiServlet.setInitOrder(2);\r\n    \r\n        context.addServlet(apiServlet, API_PATH_SPEC);\r\n        context.addServlet(swaggerUiServlet, SWAGGER_UI_PATH_SPEC);\r\n    \r\n        server.setHandler(context);\r\n        server.start();\r\n        server.join();\r\n      } \r\n    }\r\n\r\nSee my blog for more information:&lt;br&gt; http://robferguson.org/2016/12/11/resteasy-embedded-jetty-fat-jars-swagger-and-swagger-ui/\r\n\r\nAs well as my GitHub repo: &lt;br&gt; https://github.com/Robinyo/resteasy/tree/master/examples/fatjar-swagger","title":"Why Can&#39;t Swagger + RESTEasy use @ApplicationPath(&quot;&quot;)","body":"<p>While you can't use the @ApplicationPath annotation, you can set the application path using an initialisation parameter:</p>\n<pre><code>package org.robferguson.resteasy.examples.fatjar;\n\nimport org.eclipse.jetty.server.Server;\nimport org.eclipse.jetty.servlet.ServletContextHandler;\nimport org.eclipse.jetty.servlet.ServletHolder;\nimport org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher;\n\npublic class Main {\n\n  static final String APPLICATION_PATH = &quot;/api&quot;;\n  static final String API_PATH_SPEC = &quot;/api/*&quot;;\n  static final String SWAGGER_UI_PATH_SPEC = &quot;/*&quot;;\n\n  public Main() {}\n\n  public static void main( String[] args ) throws Exception\n  {\n    try\n    {\n      new Main().run();\n    }\n    catch (Throwable t)\n    {\n      t.printStackTrace();\n    }\n  }\n\n  public void run() throws Exception\n  {\n    final int port = 8080;\n    final Server server = new Server(port);\n\n    // setup Application context\n    ServletContextHandler context = new ServletContextHandler();\n\n    // setup JAX-RS (RESTEasy) resources\n    ServletHolder apiServlet = new ServletHolder(\n        new HttpServletDispatcher());\n    apiServlet.setInitOrder(1);\n    apiServlet.setInitParameter(&quot;resteasy.servlet.mapping.prefix&quot;,\n        APPLICATION_PATH);\n    apiServlet.setInitParameter(&quot;javax.ws.rs.Application&quot;,\n        &quot;org.robferguson.resteasy.examples.fatjar.FatJarApplication&quot;);\n\n    // setup static (Swagger UI) resources\n    String resourceBasePath = Main.class.getResource(\n      &quot;/swagger-ui&quot;).toExternalForm();\n    context.setResourceBase(resourceBasePath);\n    context.setWelcomeFiles(new String[] { &quot;index.html&quot; });\n\n    ServletHolder swaggerUiServlet = new ServletHolder(\n      new DefaultServlet());\n    swaggerUiServlet.setInitOrder(2);\n\n    context.addServlet(apiServlet, API_PATH_SPEC);\n    context.addServlet(swaggerUiServlet, SWAGGER_UI_PATH_SPEC);\n\n    server.setHandler(context);\n    server.start();\n    server.join();\n  } \n}\n</code></pre>\n<p>See my blog for more information:<br> <a href=\"http://robferguson.org/2016/12/11/resteasy-embedded-jetty-fat-jars-swagger-and-swagger-ui/\" rel=\"nofollow noreferrer\">http://robferguson.org/2016/12/11/resteasy-embedded-jetty-fat-jars-swagger-and-swagger-ui/</a></p>\n<p>As well as my GitHub repo: <br> <a href=\"https://github.com/Robinyo/resteasy/tree/master/examples/fatjar-swagger\" rel=\"nofollow noreferrer\">https://github.com/Robinyo/resteasy/tree/master/examples/fatjar-swagger</a></p>\n"}],"owner":{"account_id":1032762,"reputation":682,"user_id":1040740,"accept_rate":62,"display_name":"javatestcase"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2867,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":27472144,"answer_count":2,"score":4,"last_activity_date":1691982312,"creation_date":1418507563,"question_id":27464010,"body_markdown":"Environment = JBoss 7.2.0.Final + RESTEasy 2.3.5.Final + Swagger 1.3.10\r\n\r\nTrying to set up a WAR with no web.xml and use Swagger.  It works if there is any value in the ApplicationPath\r\n\r\n    @javax.ws.rs.ApplicationPath(&quot;test&quot;)\r\n\r\n    @WebServlet(name = &quot;RestEasy-1&quot;, loadOnStartup = 1)\r\n\r\n    @Path(&quot;/message&quot;)\r\n    @Api(value=&quot;/message&quot;,description=&quot;hello api&quot;)\r\n\r\nWorks for URL\r\n\r\n    http://localhost:8080/RestEasy-1/test/message/xyz (THE SERVICE)\r\n    http://localhost:8080/RestEasy-1/test/api-docs (SHOWS SWAGGER JSON)\r\n    http://localhost:8080/RestEasy-1/ (RUNS SWAGGER UI)\r\n\r\nHowever if I change to:\r\n\r\n    @javax.ws.rs.ApplicationPath(&quot;&quot;) (also tried /* or * or /)\r\n\r\nThe service and api-docs work, but Swagger doesn&#39;t seem to be available.\r\n\r\nI guess it is a collision with listeners on the root of the servlet, but I have a pre-existing constraint that the services run at the root + path, so I need a blank ApplicationPath.\r\n\r\nAny idea if Swagger can be set to run of a different path manually?\r\n","title":"Why Can&#39;t Swagger + RESTEasy use @ApplicationPath(&quot;&quot;)","body":"<p>Environment = JBoss 7.2.0.Final + RESTEasy 2.3.5.Final + Swagger 1.3.10</p>\n\n<p>Trying to set up a WAR with no web.xml and use Swagger.  It works if there is any value in the ApplicationPath</p>\n\n<pre><code>@javax.ws.rs.ApplicationPath(\"test\")\n\n@WebServlet(name = \"RestEasy-1\", loadOnStartup = 1)\n\n@Path(\"/message\")\n@Api(value=\"/message\",description=\"hello api\")\n</code></pre>\n\n<p>Works for URL</p>\n\n<pre><code>http://localhost:8080/RestEasy-1/test/message/xyz (THE SERVICE)\nhttp://localhost:8080/RestEasy-1/test/api-docs (SHOWS SWAGGER JSON)\nhttp://localhost:8080/RestEasy-1/ (RUNS SWAGGER UI)\n</code></pre>\n\n<p>However if I change to:</p>\n\n<pre><code>@javax.ws.rs.ApplicationPath(\"\") (also tried /* or * or /)\n</code></pre>\n\n<p>The service and api-docs work, but Swagger doesn't seem to be available.</p>\n\n<p>I guess it is a collision with listeners on the root of the servlet, but I have a pre-existing constraint that the services run at the root + path, so I need a blank ApplicationPath.</p>\n\n<p>Any idea if Swagger can be set to run of a different path manually?</p>\n"},{"tags":["java","log4j"],"comments":[{"owner":{"account_id":73100,"reputation":3555,"user_id":210713,"accept_rate":78,"display_name":"TedTrippin"},"score":0,"creation_date":1527244747,"post_id":50527201,"comment_id":88066034,"body_markdown":"Do you actually write anything to your logger? I would at least add a debug line for starters.","body":"Do you actually write anything to your logger? I would at least add a debug line for starters."},{"owner":{"account_id":254134,"reputation":323,"user_id":533315,"accept_rate":0,"display_name":"Abhinav"},"score":0,"creation_date":1527247804,"post_id":50527201,"comment_id":88067862,"body_markdown":"Yeah, the actual code has logger which is not writing to any log file.however if we change the logger to console appender it writes to stdout log","body":"Yeah, the actual code has logger which is not writing to any log file.however if we change the logger to console appender it writes to stdout log"},{"owner":{"account_id":73100,"reputation":3555,"user_id":210713,"accept_rate":78,"display_name":"TedTrippin"},"score":0,"creation_date":1527253939,"post_id":50527201,"comment_id":88071784,"body_markdown":"I can only suggest replacing `org.apache.ibatis` with `file` and using the rolling appender, since you have specified a `DatePattern`","body":"I can only suggest replacing <code>org.apache.ibatis</code> with <code>file</code> and using the rolling appender, since you have specified a <code>DatePattern</code>"}],"answers":[{"tags":[],"owner":{"account_id":2425876,"reputation":700,"user_id":2117814,"display_name":"Nagarjuna Yalamanchili"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1527245203,"creation_date":1527244775,"answer_id":50527323,"question_id":50527201,"body_markdown":"  **log4j.properties**\r\n \r\n    # Root logger option\r\n    log4j.rootLogger=INFO,FILE,stdout\r\n    # Define the file appender\r\n    log4j.appender.FILE=org.apache.log4j.FileAppender\r\n    log4j.appender.FILE.File=automatio.out\r\n    log4j.appender.FILE.Append=true\r\n    log4j.appender.FILE.layout=org.apache.log4j.PatternLayout\r\n    log4j.appender.FILE.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p \r\n    %c{1}:%L - %m%n\r\n    log4j.appender.file.MaxFileSize=48\r\n    log4j.appender.file.MaxBackupIndex=9\r\n\r\n    # Direct log messages to stdout\r\n    log4j.appender.stdout=org.apache.log4j.ConsoleAppender\r\n    log4j.appender.stdout.Target=System.out\r\n    log4j.appender.stdout.layout=org.apache.log4j.PatternLayout\r\n    log4j.appender.stdout.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p \r\n    %c{1}:%L - %m%n\r\n \r\n \r\n **In Baseclass.java**\r\n\r\n        public void init() throws IOException \r\n\t    {\r\n          String log4jConfPath=&quot;log4j.properties&quot;;\r\n\t\t  PropertyConfigurator.configure(log4jConfPath);\r\n        }\r\n\r\n       public void log(String data) \r\n       {\r\n\t\t  log.info(data);\r\n\t\t  Reporter.log(data);\t\r\n\t   }\r\n\t","title":"log4j not creating log files","body":"<p><strong>log4j.properties</strong></p>\n\n<pre><code># Root logger option\nlog4j.rootLogger=INFO,FILE,stdout\n# Define the file appender\nlog4j.appender.FILE=org.apache.log4j.FileAppender\nlog4j.appender.FILE.File=automatio.out\nlog4j.appender.FILE.Append=true\nlog4j.appender.FILE.layout=org.apache.log4j.PatternLayout\nlog4j.appender.FILE.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p \n%c{1}:%L - %m%n\nlog4j.appender.file.MaxFileSize=48\nlog4j.appender.file.MaxBackupIndex=9\n\n# Direct log messages to stdout\nlog4j.appender.stdout=org.apache.log4j.ConsoleAppender\nlog4j.appender.stdout.Target=System.out\nlog4j.appender.stdout.layout=org.apache.log4j.PatternLayout\nlog4j.appender.stdout.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p \n%c{1}:%L - %m%n\n</code></pre>\n\n<p><strong>In Baseclass.java</strong></p>\n\n<pre><code>    public void init() throws IOException \n    {\n      String log4jConfPath=\"log4j.properties\";\n      PropertyConfigurator.configure(log4jConfPath);\n    }\n\n   public void log(String data) \n   {\n      log.info(data);\n      Reporter.log(data);   \n   }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16482688,"reputation":51,"user_id":11909008,"display_name":"Guram Kankava"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1605733382,"creation_date":1605733382,"answer_id":64901341,"question_id":50527201,"body_markdown":"Check logs of app start up.\r\n\r\nIn my case project was deployed as WAR file to tomcat, \r\nproject had 2 SLF4J implementations, &quot;log4j&quot; and &quot;logback&quot;.\r\nOn application deployment catalina.out had this message \r\n&quot;SLF4J: Class path contains multiple SLF4J bindings....&quot;.\r\nRemoved logback by dependency exclusion in pom and after that file was created and populated by logs.\r\n\r\nSee this link \r\nhttps://www.baeldung.com/slf4j-classpath-multiple-bindings","title":"log4j not creating log files","body":"<p>Check logs of app start up.</p>\n<p>In my case project was deployed as WAR file to tomcat,\nproject had 2 SLF4J implementations, &quot;log4j&quot; and &quot;logback&quot;.\nOn application deployment catalina.out had this message\n&quot;SLF4J: Class path contains multiple SLF4J bindings....&quot;.\nRemoved logback by dependency exclusion in pom and after that file was created and populated by logs.</p>\n<p>See this link\n<a href=\"https://www.baeldung.com/slf4j-classpath-multiple-bindings\" rel=\"nofollow noreferrer\">https://www.baeldung.com/slf4j-classpath-multiple-bindings</a></p>\n"}],"owner":{"account_id":254134,"reputation":323,"user_id":533315,"accept_rate":0,"display_name":"Abhinav"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9707,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1691982190,"creation_date":1527244361,"question_id":50527201,"body_markdown":"Below is the log4j.properties file which i have used in a project to generate logs. But the logs are not getting generated at the mentioned location.  \r\n\r\n    log4j.rootLogger=DEBUG,file\r\n    #log4j.appender.file=org.apache.log4j.DailyRollingFileAppender\r\n    log4j.appender.file=org.apache.log4j.FileAppender\r\n    log4j.appender.org.apache.ibatis.MaxFileSize=15MB \r\n    log4j.appender.org.apache.ibatis.MaxBackupIndex=10\r\n    log4j.appender.file.File=E:\\logs\\file.log\r\n    log4j.appender.file.DatePattern=&#39;.&#39;yyyy-MM-dd\r\n    log4j.appender.file.layout=org.apache.log4j.PatternLayout\r\n    log4j.appender.file.layout.ConversionPattern=[%p] %d %c %M - %m%n\r\n\r\nSo I followed it up with writing a sample jsp as below and found that only `ConsoleAppender` class is returned by `out.println(app.getClass());` and this happens when I deploy the code in TOMCAT on windows server 2012. If the same code is deployed on windows server 2008 on TOMCAT, logs are generating properly as well as proper appender mentioned in properties file is returned. I have tried placing the log location inside and outside the Tomcat folder but still no luck. log4j version which we are using is 1.2.17. \r\n\r\n\r\n    &lt;%@page import=&quot;org.apache.log4j.*&quot;%&gt;\r\n    &lt;%@page import=&quot;java.io.*&quot;%&gt;\r\n    &lt;%@page import=&quot;java.lang.*&quot;%&gt;\r\n    &lt;%@page import=&quot;java.util.*&quot;%&gt;\r\n    &lt;%@page contentType=&quot;text/html&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n        &lt;head&gt;\r\n            &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;\r\n            &lt;title&gt;JSP Page&lt;/title&gt;\r\n        &lt;/head&gt;\r\n        &lt;body&gt;\r\n            &lt;%! static Logger logger = Logger.getLogger(&quot;sample_jsp&quot;);\r\n     %&gt;\r\n            &lt;%\r\n    \t\t  Enumeration e = Logger.getRootLogger().getAllAppenders();\r\n        while ( e.hasMoreElements() ){\r\n          Appender app = (Appender)e.nextElement();\r\n    \t  out.println(app.getClass());\r\n         if ( app instanceof ConsoleAppender ){\r\n        //out.println(&quot;File: &quot; + ((ConsoleAppender)app).getFile());\r\n      }\r\n      }\r\n            %&gt;\r\n        &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nWhat could be the reason for the abnormal behavior? Please help\r\n\r\n","title":"log4j not creating log files","body":"<p>Below is the log4j.properties file which i have used in a project to generate logs. But the logs are not getting generated at the mentioned location.  </p>\n\n<pre><code>log4j.rootLogger=DEBUG,file\n#log4j.appender.file=org.apache.log4j.DailyRollingFileAppender\nlog4j.appender.file=org.apache.log4j.FileAppender\nlog4j.appender.org.apache.ibatis.MaxFileSize=15MB \nlog4j.appender.org.apache.ibatis.MaxBackupIndex=10\nlog4j.appender.file.File=E:\\logs\\file.log\nlog4j.appender.file.DatePattern='.'yyyy-MM-dd\nlog4j.appender.file.layout=org.apache.log4j.PatternLayout\nlog4j.appender.file.layout.ConversionPattern=[%p] %d %c %M - %m%n\n</code></pre>\n\n<p>So I followed it up with writing a sample jsp as below and found that only <code>ConsoleAppender</code> class is returned by <code>out.println(app.getClass());</code> and this happens when I deploy the code in TOMCAT on windows server 2012. If the same code is deployed on windows server 2008 on TOMCAT, logs are generating properly as well as proper appender mentioned in properties file is returned. I have tried placing the log location inside and outside the Tomcat folder but still no luck. log4j version which we are using is 1.2.17. </p>\n\n<pre><code>&lt;%@page import=\"org.apache.log4j.*\"%&gt;\n&lt;%@page import=\"java.io.*\"%&gt;\n&lt;%@page import=\"java.lang.*\"%&gt;\n&lt;%@page import=\"java.util.*\"%&gt;\n&lt;%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"&gt;\n        &lt;title&gt;JSP Page&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;%! static Logger logger = Logger.getLogger(\"sample_jsp\");\n %&gt;\n        &lt;%\n          Enumeration e = Logger.getRootLogger().getAllAppenders();\n    while ( e.hasMoreElements() ){\n      Appender app = (Appender)e.nextElement();\n      out.println(app.getClass());\n     if ( app instanceof ConsoleAppender ){\n    //out.println(\"File: \" + ((ConsoleAppender)app).getFile());\n  }\n  }\n        %&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>What could be the reason for the abnormal behavior? Please help</p>\n"},{"tags":["java","hibernate"],"owner":{"account_id":29219543,"reputation":1,"user_id":22385564,"display_name":"nvmduc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691982126,"creation_date":1691981529,"question_id":76896020,"body_markdown":"hibernate\r\n```\r\n@NamedQuery(name = &quot;EkRequest.getAllCompletedKycRequestsByStatus&quot;, query = &quot;select ekr.ekId,   ekr.serviceLocation, ekr.phoneNo,ekr.email,&quot;\r\n                + &quot;ekr.fullName, ekr.createdCustodyCode, ekr.referCode, r.associatedBroker.fullName from EKYCRequest ekr JOIN ekr.referer r where&quot;\r\n                                + &quot; status = :ekStatus and completedAt between :ekFromDate and :ekToDate order by ekr.completedAt desc&quot;)\r\n```\r\nforeign key\r\n```\r\n@ManyToOne\r\n        @JoinColumn(name = &quot;REFERER_ID&quot;)\r\n        @EqualsAndHashCode.Exclude\r\n        @ToString.Exclude\r\n        EKReferer referer;\r\n\r\n```\r\nRespository\r\n```\r\npublic List&lt;EKYCRequest&gt; findAllEkRequestsByCompleted(LocalDate fromDate, LocalDate toDate,\r\n            EKYCRequest.EKStatus status, boolean foreignInvestor) {\r\n\r\n        LocalDateTime fromDateTime = LocalDateTime.of(fromDate, LocalTime.MIN);\r\n        LocalDateTime toDateTime = LocalDateTime.of(toDate, LocalTime.MAX);\r\n        var list = em.createNamedQuery(&quot;EkRequest.getAllCompletedKycRequestsByStatus&quot;, EKYCRequest.class)\r\n                .setParameter(&quot;ekFromDate&quot;, fromDateTime)\r\n                .setParameter(&quot;ekToDate&quot;, toDateTime)\r\n                .setParameter(&quot;ekStatus&quot;, status)\r\n                .getResultList();\r\n        if (foreignInvestor) {\r\n            return list.stream().filter(r -&gt; r.getForeignInvestor() == Boolean.TRUE).collect(Collectors.toList());\r\n        } else {\r\n            return list.stream().filter(r -&gt; r.getForeignInvestor() != Boolean.TRUE).collect(Collectors.toList());\r\n        }\r\n    }\r\n```\r\n\r\nFix error:\r\nCannot create TypedQuery for query with more than one return using requested result type [com.nguyennp.domain.ekyc.EKYCRequest]","title":"Cannot create TypedQuery for query with more than one return using requested result type hibernate","body":"<p>hibernate</p>\n<pre><code>@NamedQuery(name = &quot;EkRequest.getAllCompletedKycRequestsByStatus&quot;, query = &quot;select ekr.ekId,   ekr.serviceLocation, ekr.phoneNo,ekr.email,&quot;\n                + &quot;ekr.fullName, ekr.createdCustodyCode, ekr.referCode, r.associatedBroker.fullName from EKYCRequest ekr JOIN ekr.referer r where&quot;\n                                + &quot; status = :ekStatus and completedAt between :ekFromDate and :ekToDate order by ekr.completedAt desc&quot;)\n</code></pre>\n<p>foreign key</p>\n<pre><code>@ManyToOne\n        @JoinColumn(name = &quot;REFERER_ID&quot;)\n        @EqualsAndHashCode.Exclude\n        @ToString.Exclude\n        EKReferer referer;\n\n</code></pre>\n<p>Respository</p>\n<pre><code>public List&lt;EKYCRequest&gt; findAllEkRequestsByCompleted(LocalDate fromDate, LocalDate toDate,\n            EKYCRequest.EKStatus status, boolean foreignInvestor) {\n\n        LocalDateTime fromDateTime = LocalDateTime.of(fromDate, LocalTime.MIN);\n        LocalDateTime toDateTime = LocalDateTime.of(toDate, LocalTime.MAX);\n        var list = em.createNamedQuery(&quot;EkRequest.getAllCompletedKycRequestsByStatus&quot;, EKYCRequest.class)\n                .setParameter(&quot;ekFromDate&quot;, fromDateTime)\n                .setParameter(&quot;ekToDate&quot;, toDateTime)\n                .setParameter(&quot;ekStatus&quot;, status)\n                .getResultList();\n        if (foreignInvestor) {\n            return list.stream().filter(r -&gt; r.getForeignInvestor() == Boolean.TRUE).collect(Collectors.toList());\n        } else {\n            return list.stream().filter(r -&gt; r.getForeignInvestor() != Boolean.TRUE).collect(Collectors.toList());\n        }\n    }\n</code></pre>\n<p>Fix error:\nCannot create TypedQuery for query with more than one return using requested result type [com.nguyennp.domain.ekyc.EKYCRequest]</p>\n"},{"tags":["java","multithreading","synchronization","thread-safety","boolean"],"answers":[{"tags":[],"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1691982011,"creation_date":1345454952,"answer_id":12035204,"question_id":12035176,"body_markdown":"You must at least make the boolean variable `volatile` and the AtomicBoolean variable `final` in order to have a comparable solution. After you do that, there will be no difference for your use case.\r\n\r\nThe difference comes about if you use `AtomicBoolean`&#39;s `getAndSet` or `compareAndSet` methods, which combine one read and one write action into an atomic whole, whereas these are not atomic when done against a `volatile`.\r\n","title":"Java: What is the different between AtomicBoolean and a static boolean variable when locking a thread?","body":"<p>You must at least make the boolean variable <code>volatile</code> and the AtomicBoolean variable <code>final</code> in order to have a comparable solution. After you do that, there will be no difference for your use case.</p>\n<p>The difference comes about if you use <code>AtomicBoolean</code>'s <code>getAndSet</code> or <code>compareAndSet</code> methods, which combine one read and one write action into an atomic whole, whereas these are not atomic when done against a <code>volatile</code>.</p>\n"},{"tags":[],"owner":{"account_id":162919,"reputation":53273,"user_id":384706,"accept_rate":64,"display_name":"Cratylus"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1345455809,"creation_date":1345455809,"answer_id":12035419,"question_id":12035176,"body_markdown":"You can use a `boolean` and with proper synchronization (and making `volatile`) can achieve what you need.  \r\nBut by using the `AtomicBoolean` you can check the current value atomically without the need to write code for synchronization yourself","title":"Java: What is the different between AtomicBoolean and a static boolean variable when locking a thread?","body":"<p>You can use a <code>boolean</code> and with proper synchronization (and making <code>volatile</code>) can achieve what you need.<br>\nBut by using the <code>AtomicBoolean</code> you can check the current value atomically without the need to write code for synchronization yourself</p>\n"},{"tags":[],"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1345457346,"creation_date":1345457346,"answer_id":12035780,"question_id":12035176,"body_markdown":"As said by others you must make the variables final / volatile respectively.\r\n\r\nFrom what you describe I fear you have a place where you do something like this:\r\n\r\n    if (!BUSY){\r\n        BUSY = true;\r\n    }\r\n\r\nNote that this is broken in absence of commons synchronization, because two threads might check the flag, both seeing it as false and starting their work.\r\n\r\nI suggest looking into the existing structures for handling concurrency: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html\r\n\r\nEspecially [Semaphore][1] with a single permit might be what you are looking for.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html","title":"Java: What is the different between AtomicBoolean and a static boolean variable when locking a thread?","body":"<p>As said by others you must make the variables final / volatile respectively.</p>\n\n<p>From what you describe I fear you have a place where you do something like this:</p>\n\n<pre><code>if (!BUSY){\n    BUSY = true;\n}\n</code></pre>\n\n<p>Note that this is broken in absence of commons synchronization, because two threads might check the flag, both seeing it as false and starting their work.</p>\n\n<p>I suggest looking into the existing structures for handling concurrency: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html</a></p>\n\n<p>Especially <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html\" rel=\"nofollow\">Semaphore</a> with a single permit might be what you are looking for.</p>\n"},{"comments":[{"owner":{"account_id":3535938,"reputation":4707,"user_id":2954288,"accept_rate":48,"display_name":"Harald"},"score":0,"creation_date":1676535722,"post_id":12045001,"comment_id":133157320,"body_markdown":"I suggest to perform the `BUSY.set(false)` in a `finally` to be sure it actually gets done.","body":"I suggest to perform the <code>BUSY.set(false)</code> in a <code>finally</code> to be sure it actually gets done."}],"tags":[],"owner":{"account_id":65386,"reputation":39895,"user_id":192444,"accept_rate":100,"display_name":"John Vint"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1345496078,"creation_date":1345496078,"answer_id":12045001,"question_id":12035176,"body_markdown":"A useful feature of an `AtomicBoolean` is to allow a single thread to continue if and only if BUSY is false but not to let any other threads to continue.\r\n\r\n    private static AtomicBoolean BUSY = new AtomicBoolean(false);\r\n\r\n    public void doWork(){\r\n      if(BUSY.compareAndSet(false,true)){\r\n         //do some work\r\n         BUSY.set(false);\r\n      }else{\r\n         //some other thread won, return now or retry later?\r\n      }\r\n    }\r\n\r\nSo here only one thread will `doWork` at any given time.  You cannot achieve this with a `volatile boolean` because you cannot be sure that `Thread.currentThread()` set the boolean.","title":"Java: What is the different between AtomicBoolean and a static boolean variable when locking a thread?","body":"<p>A useful feature of an <code>AtomicBoolean</code> is to allow a single thread to continue if and only if BUSY is false but not to let any other threads to continue.</p>\n\n<pre><code>private static AtomicBoolean BUSY = new AtomicBoolean(false);\n\npublic void doWork(){\n  if(BUSY.compareAndSet(false,true)){\n     //do some work\n     BUSY.set(false);\n  }else{\n     //some other thread won, return now or retry later?\n  }\n}\n</code></pre>\n\n<p>So here only one thread will <code>doWork</code> at any given time.  You cannot achieve this with a <code>volatile boolean</code> because you cannot be sure that <code>Thread.currentThread()</code> set the boolean.</p>\n"}],"owner":{"account_id":1370508,"reputation":525,"user_id":1305842,"accept_rate":22,"display_name":"Hexor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4683,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":4,"score":5,"last_activity_date":1691982011,"creation_date":1345454820,"question_id":12035176,"body_markdown":"I write a thread class called T.\r\n\r\nMy purpose is to make sure only one thread object running at a time.\r\n\r\nSo when the thread object is called, it would check a boolean flag called BUSY.\r\n\r\nMy question is what is the different between \r\n\r\n\tprivate static AtomicBoolean BUSY = new AtomicBoolean(false);\r\nand\r\n\r\n\tprivate static boolean BUSY = false;\r\n\r\n\r\nI thought if using the &#39;static&#39;, all object would only check one BUSY boolean variable so that would make sure only one thread object is running.\r\n","title":"Java: What is the different between AtomicBoolean and a static boolean variable when locking a thread?","body":"<p>I write a thread class called T.</p>\n\n<p>My purpose is to make sure only one thread object running at a time.</p>\n\n<p>So when the thread object is called, it would check a boolean flag called BUSY.</p>\n\n<p>My question is what is the different between </p>\n\n<pre><code>private static AtomicBoolean BUSY = new AtomicBoolean(false);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>private static boolean BUSY = false;\n</code></pre>\n\n<p>I thought if using the 'static', all object would only check one BUSY boolean variable so that would make sure only one thread object is running.</p>\n"},{"tags":["java","apache-poi","xwpf"],"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":1,"creation_date":1691753589,"post_id":76883150,"comment_id":135537810,"body_markdown":"[Apache POI 3.17 was released in 2017](https://poi.apache.org/devel/history/changes-3x.html#3.17), what happens if you a more modern and supported version?","body":"<a href=\"https://poi.apache.org/devel/history/changes-3x.html#3.17\" rel=\"nofollow noreferrer\">Apache POI 3.17 was released in 2017</a>, what happens if you a more modern and supported version?"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1691818443,"post_id":76883150,"comment_id":135546005,"body_markdown":"It does not create a totally blank page. There is an empty paragraph below the table. And that paragraph does not fit onto the page before. That&#39;s why the page break.","body":"It does not create a totally blank page. There is an empty paragraph below the table. And that paragraph does not fit onto the page before. That&#39;s why the page break."},{"owner":{"account_id":27687075,"reputation":1,"user_id":21134641,"display_name":"Kapil Bhatt"},"score":0,"creation_date":1691856344,"post_id":76883150,"comment_id":135549397,"body_markdown":"But that paragraph comes with table itself, not able to delete or remove this paragraph, if the content is in the first page itself then this paragraph is also visible at the end of the table.","body":"But that paragraph comes with table itself, not able to delete or remove this paragraph, if the content is in the first page itself then this paragraph is also visible at the end of the table."},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1691858843,"post_id":76883150,"comment_id":135549632,"body_markdown":"@Kapil Bhatt: That&#39;s all true. So what do you think what options you - or Apache POI - have? Only option will be setting &quot;Keep text together&quot;, so last table row always be hold together with empty paragraph below the table. Examples: https://stackoverflow.com/search?q=%5Bapache-poi%5D+keep+text+together.","body":"@Kapil Bhatt: That&#39;s all true. So what do you think what options you - or Apache POI - have? Only option will be setting &quot;Keep text together&quot;, so last table row always be hold together with empty paragraph below the table. Examples: <a href=\"https://stackoverflow.com/search?q=%5Bapache-poi%5D+keep+text+together\">stackoverflow.com/search?q=%5Bapache-poi%5D+keep+text+togeth&zwnj;&#8203;er</a>."}],"answers":[{"tags":[],"owner":{"account_id":27687075,"reputation":1,"user_id":21134641,"display_name":"Kapil Bhatt"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691981962,"creation_date":1691981962,"answer_id":76896036,"question_id":76883150,"body_markdown":"I&#39;ve found a solution to the problem. The issue arises because Microsoft Word automatically adds a paragraph at the end of a table. This behavior causes a blank page to appear when a table row reaches the end of a page and overflows due to the automatically added paragraph.\r\n\r\nhttps://www.technewstoday.com/page-wont-delete-in-word/#:~:text=Since%20Word%20automatically%20adds%20a,paragraph%20marker%20that%20Word%20inserted.\r\n\r\nTo resolve this issue manually in a Word document, I followed these steps:\r\n\r\nClick on the &quot;Home&quot; tab.\r\nRight-click in front of the paragraph marker at the end of the table.\r\nChoose the &quot;Paragraph&quot; option from the context menu.\r\nIn the &quot;Indents and Spacing&quot; tab, set &quot;Before&quot; and &quot;After&quot; fields to 0pt under the &quot;Spacing&quot; section.\r\nSet the line spacing to &quot;Exactly&quot; and the &quot;At&quot; value to 0.7pt (minimum).\r\n\r\nAfterward, I applied a similar solution programmatically using the XWPF document instance and the Apache POI library. Here&#39;s how I did it:\r\n\r\n    XWPFParagraph preventBlankPage = document.createParagraph();\r\n    preventBlankPage.setSpacingAfter(0);\r\n    preventBlankPage.setSpacingBefore(0);\r\n    preventBlankPage.setSpacingBetween(0.1, LineSpacingRule.EXACT);\r\n\r\nBy adding an empty paragraph after creating the table and then setting the spacing before and after the paragraph to 0pt, as well as spacing between to 0.1pt with line spacing set to &quot;Exactly,&quot; I was able to prevent the document application from adding an extra blank page.\r\n\r\nThis approach ensures that the table&#39;s layout remains consistent and avoids the appearance of unnecessary blank pages in the document.","title":"Creating word document with Apache Poi 3.17, while creating table if table row ends just before the footer, it is creating another blank page?","body":"<p>I've found a solution to the problem. The issue arises because Microsoft Word automatically adds a paragraph at the end of a table. This behavior causes a blank page to appear when a table row reaches the end of a page and overflows due to the automatically added paragraph.</p>\n<p><a href=\"https://www.technewstoday.com/page-wont-delete-in-word/#:%7E:text=Since%20Word%20automatically%20adds%20a,paragraph%20marker%20that%20Word%20inserted\" rel=\"nofollow noreferrer\">https://www.technewstoday.com/page-wont-delete-in-word/#:~:text=Since%20Word%20automatically%20adds%20a,paragraph%20marker%20that%20Word%20inserted</a>.</p>\n<p>To resolve this issue manually in a Word document, I followed these steps:</p>\n<p>Click on the &quot;Home&quot; tab.\nRight-click in front of the paragraph marker at the end of the table.\nChoose the &quot;Paragraph&quot; option from the context menu.\nIn the &quot;Indents and Spacing&quot; tab, set &quot;Before&quot; and &quot;After&quot; fields to 0pt under the &quot;Spacing&quot; section.\nSet the line spacing to &quot;Exactly&quot; and the &quot;At&quot; value to 0.7pt (minimum).</p>\n<p>Afterward, I applied a similar solution programmatically using the XWPF document instance and the Apache POI library. Here's how I did it:</p>\n<pre><code>XWPFParagraph preventBlankPage = document.createParagraph();\npreventBlankPage.setSpacingAfter(0);\npreventBlankPage.setSpacingBefore(0);\npreventBlankPage.setSpacingBetween(0.1, LineSpacingRule.EXACT);\n</code></pre>\n<p>By adding an empty paragraph after creating the table and then setting the spacing before and after the paragraph to 0pt, as well as spacing between to 0.1pt with line spacing set to &quot;Exactly,&quot; I was able to prevent the document application from adding an extra blank page.</p>\n<p>This approach ensures that the table's layout remains consistent and avoids the appearance of unnecessary blank pages in the document.</p>\n"}],"owner":{"account_id":27687075,"reputation":1,"user_id":21134641,"display_name":"Kapil Bhatt"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76896036,"answer_count":1,"score":0,"last_activity_date":1691981962,"creation_date":1691753401,"question_id":76883150,"body_markdown":"I am using Apache POI version 3.17 and want to stick with that version only, due to some other dependency of the application. Table data is dynamic and I can&#39;t fix the row height, sometimes when table&#39;s last row ends near the footer, it is creating a separate blank page.\r\nCould anyone please help me out how to tackle this scenario?\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI prefer to prevent the creation of empty pages.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4pqUC.png","title":"Creating word document with Apache Poi 3.17, while creating table if table row ends just before the footer, it is creating another blank page?","body":"<p>I am using Apache POI version 3.17 and want to stick with that version only, due to some other dependency of the application. Table data is dynamic and I can't fix the row height, sometimes when table's last row ends near the footer, it is creating a separate blank page.\nCould anyone please help me out how to tackle this scenario?</p>\n<p><a href=\"https://i.stack.imgur.com/4pqUC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4pqUC.png\" alt=\"enter image description here\" /></a></p>\n<p>I prefer to prevent the creation of empty pages.</p>\n"},{"tags":["java","assembly","runtime","mips"],"comments":[{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1691885907,"post_id":76891544,"comment_id":135551731,"body_markdown":"Performance depends on the MIPS implementation you&#39;re running on.  Are you looking for a cycle-accurate simulation of a classic MIPS R2000 or something (classic in-order 5-stage pipeline) vs. R10000 (4-way superscalar out-of-order exec), with some specific cache sizes? (I don&#39;t know of such a simulator, unless GEM5 can do that.)  Of course that would give you time in cycles, and you&#39;d need to divide by the clock frequency to get seconds.  Also, to compare hand-written asm against Java, you&#39;d have to run a JVM on the same MIPS CPU, so MARS/SPIM aren&#39;t options for that.","body":"Performance depends on the MIPS implementation you&#39;re running on.  Are you looking for a cycle-accurate simulation of a classic MIPS R2000 or something (classic in-order 5-stage pipeline) vs. R10000 (4-way superscalar out-of-order exec), with some specific cache sizes? (I don&#39;t know of such a simulator, unless GEM5 can do that.)  Of course that would give you time in cycles, and you&#39;d need to divide by the clock frequency to get seconds.  Also, to compare hand-written asm against Java, you&#39;d have to run a JVM on the same MIPS CPU, so MARS/SPIM aren&#39;t options for that."},{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1691886124,"post_id":76891544,"comment_id":135551743,"body_markdown":"QEMU can emulate a full-system MIPS CPU, but it&#39;s not a cycle-accurate simulator.  It runs as fast as possible on the host CPU, not trying to count guest cycles or simulate microarchitectural stuff like cache misses or stalls for `mflo` after a `mult` or `div` that wasn&#39;t ready yet.  QEMU may even do dynamic translation to the host&#39;s machine-code format, for some hots like x86 where QEMU has specialized code for some architectures.","body":"QEMU can emulate a full-system MIPS CPU, but it&#39;s not a cycle-accurate simulator.  It runs as fast as possible on the host CPU, not trying to count guest cycles or simulate microarchitectural stuff like cache misses or stalls for <code>mflo</code> after a <code>mult</code> or <code>div</code> that wasn&#39;t ready yet.  QEMU may even do dynamic translation to the host&#39;s machine-code format, for some hots like x86 where QEMU has specialized code for some architectures."},{"owner":{"account_id":216101,"reputation":24334,"user_id":471129,"display_name":"Erik Eidt"},"score":0,"creation_date":1691904046,"post_id":76891544,"comment_id":135552529,"body_markdown":"Doesn&#39;t the fact that mars. &amp; qtspim don&#39;t have these give you a clue about the differences?  Also, maybe compare with a full C envrnment as assembly can acess a C library when it is available.","body":"Doesn&#39;t the fact that mars. &amp; qtspim don&#39;t have these give you a clue about the differences?  Also, maybe compare with a full C envrnment as assembly can acess a C library when it is available."},{"owner":{"account_id":26540474,"reputation":19,"user_id":20171304,"display_name":"Wajdy Elsobky"},"score":0,"creation_date":1691974136,"post_id":76891544,"comment_id":135558869,"body_markdown":"@PeterCordes thanks for replying. I’ve decided to stop looking for softwares that calculate it and instead use a formula using reasonable placeholders. I know my processors clock rate and it’s 2.30GHz but that’s about it. I believe I can manually find the instruction count but I’m not entirely sure if I’d be doing it correctly,  I don’t think the marker would dive too deep into the accuracy so long as it’s somewhat reasonable.  plus I don’t think the TA even understands assembly.","body":"@PeterCordes thanks for replying. I’ve decided to stop looking for softwares that calculate it and instead use a formula using reasonable placeholders. I know my processors clock rate and it’s 2.30GHz but that’s about it. I believe I can manually find the instruction count but I’m not entirely sure if I’d be doing it correctly,  I don’t think the marker would dive too deep into the accuracy so long as it’s somewhat reasonable.  plus I don’t think the TA even understands assembly."},{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1691974232,"post_id":76891544,"comment_id":135558875,"body_markdown":"Wait, you have a 2.3GHz MIPS processor?  Or you&#39;re running a MIPS simulator on a 2.3GHz x86-64 host, and you actually want to know the speed of a MIPS simulator/emulator running hand-written asm vs. the speed of an optimized JVM JIT-compiling to native machine code, both on your native CPU?","body":"Wait, you have a 2.3GHz MIPS processor?  Or you&#39;re running a MIPS simulator on a 2.3GHz x86-64 host, and you actually want to know the speed of a MIPS simulator/emulator running hand-written asm vs. the speed of an optimized JVM JIT-compiling to native machine code, both on your native CPU?"},{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1691974354,"post_id":76891544,"comment_id":135558889,"body_markdown":"I think SPIM can be run from the command line, so it exits when the MIPS program exits.  Perhaps MARS can, too, but different emulators will have different speeds. (And Java startup overhead will hurt MARS, unless your MIPS program runs for a long time to amortize that startup overhead.) QEMU emulating Linux MIPS user-space should be fairly well optimized for speed.","body":"I think SPIM can be run from the command line, so it exits when the MIPS program exits.  Perhaps MARS can, too, but different emulators will have different speeds. (And Java startup overhead will hurt MARS, unless your MIPS program runs for a long time to amortize that startup overhead.) QEMU emulating Linux MIPS user-space should be fairly well optimized for speed."},{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1691974589,"post_id":76891544,"comment_id":135558904,"body_markdown":"Or if you do want to estimate performance for a real MIPS CPU, yes counting *dynamic* instructions (on the path of execution) is a good start if you can estimate the instructions-per-clock.  With no stalls, it will be exactly 1.0 on a classic MIPS pipeline. And yes for simple programs like naive recursive Fibonacci, you can assume no cache misses, and with no mult or div instructions, so no stalls.","body":"Or if you do want to estimate performance for a real MIPS CPU, yes counting <i>dynamic</i> instructions (on the path of execution) is a good start if you can estimate the instructions-per-clock.  With no stalls, it will be exactly 1.0 on a classic MIPS pipeline. And yes for simple programs like naive recursive Fibonacci, you can assume no cache misses, and with no mult or div instructions, so no stalls."},{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1691974684,"post_id":76891544,"comment_id":135558907,"body_markdown":"Real MIPS (with branch delay slots) fully hides branch latency on 5-stage pipelines like R2000, so there are no stalls or any need for branch prediction: [Why does MIPS use one delay slot instead of two?](https://stackoverflow.com/q/58422262) .  (Often students are taught about a simplified pipeline without branch delay slots, which is not actual MIPS.  In that case you either assume every branch costs an extra NOP, or you make some assumptions about a pipeline more like RISC-V with some branch prediction success rate, e.g. loop branches predict correctly except the final iteration.)","body":"Real MIPS (with branch delay slots) fully hides branch latency on 5-stage pipelines like R2000, so there are no stalls or any need for branch prediction: <a href=\"https://stackoverflow.com/q/58422262\">Why does MIPS use one delay slot instead of two?</a> .  (Often students are taught about a simplified pipeline without branch delay slots, which is not actual MIPS.  In that case you either assume every branch costs an extra NOP, or you make some assumptions about a pipeline more like RISC-V with some branch prediction success rate, e.g. loop branches predict correctly except the final iteration.)"},{"owner":{"account_id":26540474,"reputation":19,"user_id":20171304,"display_name":"Wajdy Elsobky"},"score":0,"creation_date":1691976001,"post_id":76891544,"comment_id":135559002,"body_markdown":"@ErikEidt, if I’m understanding you correctly, are you referring to inline assembly in c?","body":"@ErikEidt, if I’m understanding you correctly, are you referring to inline assembly in c?"},{"owner":{"account_id":26540474,"reputation":19,"user_id":20171304,"display_name":"Wajdy Elsobky"},"score":0,"creation_date":1691978112,"post_id":76891544,"comment_id":135559163,"body_markdown":"@PeterCordes, sorry, what I meant by 2.30Ghz is that I went to MSI laptops settings and looked under performance and saw this “11th gen intel(R) core(TM)i7-11800H @2.30GHz”. Judging by what you’re saying it sounds like I have to run the programs (Java and assembly) on the same platform since different platforms will produce different results? For Java i just used System.nanoTime from start to end and made the difference my execution time and ran it on my command prompt. The range of the Outputs across all programs are 0.0023-1.18 ms.","body":"@PeterCordes, sorry, what I meant by 2.30Ghz is that I went to MSI laptops settings and looked under performance and saw this “11th gen intel(R) core(TM)i7-11800H @2.30GHz”. Judging by what you’re saying it sounds like I have to run the programs (Java and assembly) on the same platform since different platforms will produce different results? For Java i just used System.nanoTime from start to end and made the difference my execution time and ran it on my command prompt. The range of the Outputs across all programs are 0.0023-1.18 ms."},{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1691978214,"post_id":76891544,"comment_id":135559171,"body_markdown":"You can&#39;t run MIPS assembly directly on an x86-64, so yes, you can&#39;t directly compare native Java against MIPS assembly on your CPU.  I just commented about that on your other question ([Very rough estimate for runtime of mips assembly program](https://stackoverflow.com/posts/comments/135559149)).","body":"You can&#39;t run MIPS assembly directly on an x86-64, so yes, you can&#39;t directly compare native Java against MIPS assembly on your CPU.  I just commented about that on your other question (<a href=\"https://stackoverflow.com/posts/comments/135559149\">Very rough estimate for runtime of mips assembly program</a>)."},{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1691978423,"post_id":76891544,"comment_id":135559179,"body_markdown":"Also, your i7-11800H&#39;s max turbo frequency is 4.6GHz; I&#39;d expect it to run at or near that for most single-threaded light-weight tasks like Fibonacci.  The 2.3 GHz &quot;sticker&quot; frequency is the non-turbo frequency it can sustain at its rated power (40 watts I think) with all cores active running the most power-intensive workloads (like Prime95, doing SIMD floating-point FMAs.)  i.e. the slowest it&#39;s ever limited to except when slowing down to save power, assuming adequate cooling.","body":"Also, your i7-11800H&#39;s max turbo frequency is 4.6GHz; I&#39;d expect it to run at or near that for most single-threaded light-weight tasks like Fibonacci.  The 2.3 GHz &quot;sticker&quot; frequency is the non-turbo frequency it can sustain at its rated power (40 watts I think) with all cores active running the most power-intensive workloads (like Prime95, doing SIMD floating-point FMAs.)  i.e. the slowest it&#39;s ever limited to except when slowing down to save power, assuming adequate cooling."},{"owner":{"account_id":26540474,"reputation":19,"user_id":20171304,"display_name":"Wajdy Elsobky"},"score":0,"creation_date":1691978427,"post_id":76891544,"comment_id":135559180,"body_markdown":"@PeterCordes, could I use the formula; execution time = IC*CPI/Clock frequency? Assuming CPI is 1 (no stalls or hazards). Clock frequency being my laptops processor base speed (4.6GHz***) and IC which I’d have to manually calculate? Would this be a decent approximation? I believe the execution time should be faster than Java (what I’ve seen on the internet). - just read your other reply, seems like that’s not usually not the case","body":"@PeterCordes, could I use the formula; execution time = IC<i>CPI/Clock frequency? Assuming CPI is 1 (no stalls or hazards). Clock frequency being my laptops processor base speed (4.6GHz**</i>) and IC which I’d have to manually calculate? Would this be a decent approximation? I believe the execution time should be faster than Java (what I’ve seen on the internet). - just read your other reply, seems like that’s not usually not the case"},{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1691978662,"post_id":76891544,"comment_id":135559197,"body_markdown":"That would calculate time for a 2.3 GHz MIPS R2000, not your CPU.  Your Tiger Lake CPU is capable of up to 7 instructions per clock (if 2 of them are branches that macro-fuse, for a total of 5 uops, the width of the front-end; https://agner.org/optimize/ / https://en.wikichip.org/wiki/intel/microarchitectures/willow_cove).  It can&#39;t usually sustain even 5 IPC, but more than 1 is very common.  Of course, those are x86 instructions, not MIPS.  x86-64 has fewer registers so it sometimes needs extra loads and stores, but it can use memory source operands so it sometimes save instructions that way.","body":"That would calculate time for a 2.3 GHz MIPS R2000, not your CPU.  Your Tiger Lake CPU is capable of up to 7 instructions per clock (if 2 of them are branches that macro-fuse, for a total of 5 uops, the width of the front-end; <a href=\"https://agner.org/optimize/\" rel=\"nofollow noreferrer\">agner.org/optimize</a> / <a href=\"https://en.wikichip.org/wiki/intel/microarchitectures/willow_cove\" rel=\"nofollow noreferrer\">en.wikichip.org/wiki/intel/microarchitectures/willow_cove</a>).  It can&#39;t usually sustain even 5 IPC, but more than 1 is very common.  Of course, those are x86 instructions, not MIPS.  x86-64 has fewer registers so it sometimes needs extra loads and stores, but it can use memory source operands so it sometimes save instructions that way."},{"owner":{"account_id":26540474,"reputation":19,"user_id":20171304,"display_name":"Wajdy Elsobky"},"score":0,"creation_date":1691980222,"post_id":76891544,"comment_id":135559284,"body_markdown":"@PeterCordes, so what do you suggest I do to complete this project? The professors requires us to use mips assembly. What would be my best bet to calculate the runtime given my resources? Or perhaps using hypothetical values on a mips processor. What should those values be? I’m gonna be upfront on the project that’s it’s a rough estimation. \nI ended up using chat gpt to write the code because it obviously knows more than me and it gave correct outputs. I then tried to ask it to add code that estimates  execution time in cycles (I still need to remove pseudo instructions which isn’t allowed.","body":"@PeterCordes, so what do you suggest I do to complete this project? The professors requires us to use mips assembly. What would be my best bet to calculate the runtime given my resources? Or perhaps using hypothetical values on a mips processor. What should those values be? I’m gonna be upfront on the project that’s it’s a rough estimation.  I ended up using chat gpt to write the code because it obviously knows more than me and it gave correct outputs. I then tried to ask it to add code that estimates  execution time in cycles (I still need to remove pseudo instructions which isn’t allowed."},{"owner":{"account_id":26540474,"reputation":19,"user_id":20171304,"display_name":"Wajdy Elsobky"},"score":0,"creation_date":1691980297,"post_id":76891544,"comment_id":135559287,"body_markdown":"@PeterCordes for example the Fibonacci sequence, the output was 12 (execution time in cycles) for fib of 5.  Does that sound like a good estimation? Unfortunately chat gpt struggled to code that for the Euclidean and a program that calculates a^b","body":"@PeterCordes for example the Fibonacci sequence, the output was 12 (execution time in cycles) for fib of 5.  Does that sound like a good estimation? Unfortunately chat gpt struggled to code that for the Euclidean and a program that calculates a^b"},{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1691980446,"post_id":76891544,"comment_id":135559295,"body_markdown":"It&#39;s kind of a nonsensical assignment.  If I had to do something, I&#39;d probably run Linux MIPS inside QEMU, and run a MIPS JVM inside that vs. my hand-written MIPS assembly-language program.  That&#39;s I think the closest you could come to an apples-to-apples comparison, since it involves Java suffering the same emulation overhead as your asm.   Also, no, ChatGPT doesn&#39;t know anything about assembly; it often makes buggy code, and I certainly wouldn&#39;t expect it to be well-optimized.  Anything it learns is by example, and most examples are from beginners and aren&#39;t super optimized.","body":"It&#39;s kind of a nonsensical assignment.  If I had to do something, I&#39;d probably run Linux MIPS inside QEMU, and run a MIPS JVM inside that vs. my hand-written MIPS assembly-language program.  That&#39;s I think the closest you could come to an apples-to-apples comparison, since it involves Java suffering the same emulation overhead as your asm.   Also, no, ChatGPT doesn&#39;t know anything about assembly; it often makes buggy code, and I certainly wouldn&#39;t expect it to be well-optimized.  Anything it learns is by example, and most examples are from beginners and aren&#39;t super optimized."},{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1691980673,"post_id":76891544,"comment_id":135559314,"body_markdown":"12 cycles?  That&#39;s *way* too short an interval to time accurately in Java (or any language on your native CPU).  I have no idea what kind of Fibonacci program you wrote; if it&#39;s an unrolled loop with `add $t0, $t0, $t1` / `add $t1, $t1, $t0`, plus some startup stuff (like I did [for x86 in another Q&amp;A](https://stackoverflow.com/questions/32659715/assembly-language-x86-how-to-create-a-loop-to-calculate-fibonacci-sequence/32661389#32661389)) then yeah 12 cycles is probably reasonable.  It seems low if that was a recursive function, but recursive Fibonacci is terrible for performance.","body":"12 cycles?  That&#39;s <i>way</i> too short an interval to time accurately in Java (or any language on your native CPU).  I have no idea what kind of Fibonacci program you wrote; if it&#39;s an unrolled loop with <code>add $t0, $t0, $t1</code> / <code>add $t1, $t1, $t0</code>, plus some startup stuff (like I did <a href=\"https://stackoverflow.com/questions/32659715/assembly-language-x86-how-to-create-a-loop-to-calculate-fibonacci-sequence/32661389#32661389\">for x86 in another Q&amp;A</a>) then yeah 12 cycles is probably reasonable.  It seems low if that was a recursive function, but recursive Fibonacci is terrible for performance."},{"owner":{"account_id":26540474,"reputation":19,"user_id":20171304,"display_name":"Wajdy Elsobky"},"score":0,"creation_date":1691980730,"post_id":76891544,"comment_id":135559318,"body_markdown":"@PeterCordes Is it possible to share the code with you somehow? It’s 100 lines long.","body":"@PeterCordes Is it possible to share the code with you somehow? It’s 100 lines long."},{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1691980914,"post_id":76891544,"comment_id":135559333,"body_markdown":"You should be able to edit it into your question in a code block.  If not, pastebin is an option.  100 lines sounds way too long unless most of them are comments.  My x86 Fibonacci (iterative loop, not recursive) was 45 lines for the not-unrolled version and more than half are just comments.","body":"You should be able to edit it into your question in a code block.  If not, pastebin is an option.  100 lines sounds way too long unless most of them are comments.  My x86 Fibonacci (iterative loop, not recursive) was 45 lines for the not-unrolled version and more than half are just comments."},{"owner":{"account_id":26540474,"reputation":19,"user_id":20171304,"display_name":"Wajdy Elsobky"},"score":0,"creation_date":1691981448,"post_id":76891544,"comment_id":135559369,"body_markdown":"@PeterCordes I’ve added it to the post.","body":"@PeterCordes I’ve added it to the post."},{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1691982737,"post_id":76891544,"comment_id":135559453,"body_markdown":"What MIPS simulator are you using where `hi:lo` hold a timestamp or cycle counter that updates on its own?  Or is that code from ChatGPT, so that `mflo $t4` at the top of `main` is just ChatGPT hallucinating?  The hi:lo registers are the outputs for `mult` and `div` instructions, and normally keep their values (except in some cases, [as Raymond Chen explains](https://devblogs.microsoft.com/oldnewthing/20180404-00/?p=98435)).","body":"What MIPS simulator are you using where <code>hi:lo</code> hold a timestamp or cycle counter that updates on its own?  Or is that code from ChatGPT, so that <code>mflo $t4</code> at the top of <code>main</code> is just ChatGPT hallucinating?  The hi:lo registers are the outputs for <code>mult</code> and <code>div</code> instructions, and normally keep their values (except in some cases, <a href=\"https://devblogs.microsoft.com/oldnewthing/20180404-00/?p=98435\" rel=\"nofollow noreferrer\">as Raymond Chen explains</a>)."},{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1691982930,"post_id":76891544,"comment_id":135559471,"body_markdown":"It seems weird to use multiple instructions inside the same loop to increment `$t9` multiple times.  Just figure out which instructions you want to count and `add $t9, $t9,  imm` by that amount, probably 5 since you have an `add` and two `move` pseudo-instructions for Fibonacci, plus loop overhead of a `bge` and another `add`.  (And a wasted `j` because you didn&#39;t put the `b..` at the bottom of the loop, so actually 6 instructions if you weren&#39;t printing.)  Of course you could just calculate how many iterations it will run from the input number, so `6 * n + startup overhead`.","body":"It seems weird to use multiple instructions inside the same loop to increment <code>$t9</code> multiple times.  Just figure out which instructions you want to count and <code>add $t9, $t9,  imm</code> by that amount, probably 5 since you have an <code>add</code> and two <code>move</code> pseudo-instructions for Fibonacci, plus loop overhead of a <code>bge</code> and another <code>add</code>.  (And a wasted <code>j</code> because you didn&#39;t put the <code>b..</code> at the bottom of the loop, so actually 6 instructions if you weren&#39;t printing.)  Of course you could just calculate how many iterations it will run from the input number, so <code>6 * n + startup overhead</code>."},{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1691983535,"post_id":76891544,"comment_id":135559518,"body_markdown":"Re: way too short to time: see [Idiomatic way of performance evaluation?](https://stackoverflow.com/q/60291987) re: benchmarking in Java.  A good benchmarking framework will hopefully use a repeat loop to run your code long enough that it can be meaningfully timed, and takes longer than timing overhead.","body":"Re: way too short to time: see <a href=\"https://stackoverflow.com/q/60291987\">Idiomatic way of performance evaluation?</a> re: benchmarking in Java.  A good benchmarking framework will hopefully use a repeat loop to run your code long enough that it can be meaningfully timed, and takes longer than timing overhead."}],"owner":{"account_id":26540474,"reputation":19,"user_id":20171304,"display_name":"Wajdy Elsobky"},"comment_count":24,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691981388,"creation_date":1691885340,"question_id":76891544,"body_markdown":"Having trouble figuring out how to find runtime of assembly program\r\n\r\nI’ve got a project and it’s comparing the runtime of Java vs assembly programs for mathematical algorithms like the Fibonacci sequence, Euclidean  algorithm, factorial algorithm and buy and binary exponential algorithm. Tried using spim and mars but they don’t have this feature.\r\n\r\nAny suggestions? Due dates coming up.\r\n\r\nEx fib code that calculates estimated clock cycles and fib given a user input.\r\n\r\n    .data\r\nfibonacciLabel: .asciiz &quot;Fibonacci sequence: &quot;\r\nenterLabel: .asciiz &quot;Enter a number to calculate its Fibonacci sequence: &quot;\r\ncycleLabel: .asciiz &quot;Execution time in cycles: &quot;\r\nspace: .asciiz &quot; &quot;      # Space character\r\nnewline: .asciiz &quot;\\n&quot;\r\n\r\n.text\r\n.globl main\r\nmain:\r\n    # Start measuring time - store the initial cycle counter value\r\n    mflo $t4\r\n    mfhi $t5\r\n\r\n    # Prompt the user to enter a number\r\n    li $v0, 4               # Print string syscall\r\n    la $a0, enterLabel      # Load address of the prompt message\r\n    syscall\r\n\r\n    # Read user input\r\n    li $v0, 5               # Read integer syscall\r\n    syscall\r\n    add $t0, $zero, $v0     # Save the user input in $t0\r\n\r\n    # Initialize variables\r\n    li $t1, 0               # First Fibonacci number (F(0))\r\n    li $t2, 1               # Second Fibonacci number (F(1))\r\n    li $t3, 2               # Counter for the Fibonacci sequence\r\n\r\n    # Print the Fibonacci label\r\n    li $v0, 4               # Print string syscall\r\n    la $a0, fibonacciLabel  # Load address of the Fibonacci label\r\n    syscall\r\n\r\n    # Print the first two Fibonacci numbers (F(0) and F(1))\r\n    move $a0, $t1           # Move the first Fibonacci number (F(0)) to $a0\r\n    li $v0, 1               # Print integer syscall\r\n    syscall\r\n\r\n    # Print a space between the numbers\r\n    li $v0, 4               # Print string syscall\r\n    la $a0, space           # Load address of space character\r\n    syscall\r\n\r\n    move $a0, $t2           # Move the second Fibonacci number (F(1)) to $a0\r\n    li $v0, 1               # Print integer syscall\r\n    syscall\r\n\r\n    # Calculate and print the rest of the Fibonacci sequence\r\nloop:\r\n    # Check loop condition\r\n    bge $t3, $t0, endLoop   # If the counter is greater than or equal to the input, exit the loop\r\n\r\n    # Count the loop instruction (branch instruction)\r\n    addi $t9, $t9, 1\r\n\r\n    # Calculate the next Fibonacci number\r\n    add $t4, $t1, $t2       # Sum of the two preceding Fibonacci numbers\r\n\r\n    # Print a space between the numbers\r\n    li $v0, 4               # Print string syscall\r\n    la $a0, space           # Load address of space character\r\n    syscall\r\n\r\n    # Print the next Fibonacci number\r\n    move $a0, $t4           # Move the result to $a0\r\n    li $v0, 1               # Print integer syscall\r\n    syscall\r\n\r\n    # Store the result in $t2 for the next iteration\r\n    move $t1, $t2\r\n    move $t2, $t4\r\n\r\n    # Count the instruction inside the loop (addition and move)\r\n    addi $t9, $t9, 2\r\n\r\n    addi $t3, $t3, 1        # Increment the counter\r\n\r\n    # Count the instruction inside the loop (increment)\r\n    addi $t9, $t9, 1\r\n\r\n    j loop                  # Jump back to the beginning of the loop\r\n\r\nendLoop:\r\n    # Print a newline\r\n    li $v0, 4               # Print string syscall\r\n    la $a0, newline         # Load address of newline\r\n    syscall\r\n\r\n    # End measuring time - store the final cycle counter value\r\n    mflo $t6\r\n    mfhi $t7\r\n\r\n    # Calculate the cycle count difference\r\n    sub $t6, $t6, $t4\r\n    sra $t7, $t7, 1         # Shift the high part to get the accurate difference\r\n    sub $t6, $t6, $t7\r\n\r\n    # Print the cycle count label\r\n    li $v0, 4               # Print string syscall\r\n    la $a0, cycleLabel      # Load address of the cycle count label\r\n    syscall\r\n\r\n    # Print the number of cycles\r\n    move $a0, $t9           # Move the cycle count to $a0\r\n    li $v0, 1               # Print integer syscall\r\n    syscall\r\n\r\n    # Print a newline\r\n    li $v0, 4               # Print string syscall\r\n    la $a0, newline         # Load address of newline\r\n    syscall\r\n\r\n    # Exit the program\r\n    li $v0, 10\r\n    syscall","title":"Getting runtime for mips assembly program","body":"<p>Having trouble figuring out how to find runtime of assembly program</p>\n<p>I’ve got a project and it’s comparing the runtime of Java vs assembly programs for mathematical algorithms like the Fibonacci sequence, Euclidean  algorithm, factorial algorithm and buy and binary exponential algorithm. Tried using spim and mars but they don’t have this feature.</p>\n<p>Any suggestions? Due dates coming up.</p>\n<p>Ex fib code that calculates estimated clock cycles and fib given a user input.</p>\n<pre><code>.data\n</code></pre>\n<p>fibonacciLabel: .asciiz &quot;Fibonacci sequence: &quot;\nenterLabel: .asciiz &quot;Enter a number to calculate its Fibonacci sequence: &quot;\ncycleLabel: .asciiz &quot;Execution time in cycles: &quot;\nspace: .asciiz &quot; &quot;      # Space character\nnewline: .asciiz &quot;\\n&quot;</p>\n<p>.text\n.globl main\nmain:\n# Start measuring time - store the initial cycle counter value\nmflo $t4\nmfhi $t5</p>\n<pre><code># Prompt the user to enter a number\nli $v0, 4               # Print string syscall\nla $a0, enterLabel      # Load address of the prompt message\nsyscall\n\n# Read user input\nli $v0, 5               # Read integer syscall\nsyscall\nadd $t0, $zero, $v0     # Save the user input in $t0\n\n# Initialize variables\nli $t1, 0               # First Fibonacci number (F(0))\nli $t2, 1               # Second Fibonacci number (F(1))\nli $t3, 2               # Counter for the Fibonacci sequence\n\n# Print the Fibonacci label\nli $v0, 4               # Print string syscall\nla $a0, fibonacciLabel  # Load address of the Fibonacci label\nsyscall\n\n# Print the first two Fibonacci numbers (F(0) and F(1))\nmove $a0, $t1           # Move the first Fibonacci number (F(0)) to $a0\nli $v0, 1               # Print integer syscall\nsyscall\n\n# Print a space between the numbers\nli $v0, 4               # Print string syscall\nla $a0, space           # Load address of space character\nsyscall\n\nmove $a0, $t2           # Move the second Fibonacci number (F(1)) to $a0\nli $v0, 1               # Print integer syscall\nsyscall\n\n# Calculate and print the rest of the Fibonacci sequence\n</code></pre>\n<p>loop:\n# Check loop condition\nbge $t3, $t0, endLoop   # If the counter is greater than or equal to the input, exit the loop</p>\n<pre><code># Count the loop instruction (branch instruction)\naddi $t9, $t9, 1\n\n# Calculate the next Fibonacci number\nadd $t4, $t1, $t2       # Sum of the two preceding Fibonacci numbers\n\n# Print a space between the numbers\nli $v0, 4               # Print string syscall\nla $a0, space           # Load address of space character\nsyscall\n\n# Print the next Fibonacci number\nmove $a0, $t4           # Move the result to $a0\nli $v0, 1               # Print integer syscall\nsyscall\n\n# Store the result in $t2 for the next iteration\nmove $t1, $t2\nmove $t2, $t4\n\n# Count the instruction inside the loop (addition and move)\naddi $t9, $t9, 2\n\naddi $t3, $t3, 1        # Increment the counter\n\n# Count the instruction inside the loop (increment)\naddi $t9, $t9, 1\n\nj loop                  # Jump back to the beginning of the loop\n</code></pre>\n<p>endLoop:\n# Print a newline\nli $v0, 4               # Print string syscall\nla $a0, newline         # Load address of newline\nsyscall</p>\n<pre><code># End measuring time - store the final cycle counter value\nmflo $t6\nmfhi $t7\n\n# Calculate the cycle count difference\nsub $t6, $t6, $t4\nsra $t7, $t7, 1         # Shift the high part to get the accurate difference\nsub $t6, $t6, $t7\n\n# Print the cycle count label\nli $v0, 4               # Print string syscall\nla $a0, cycleLabel      # Load address of the cycle count label\nsyscall\n\n# Print the number of cycles\nmove $a0, $t9           # Move the cycle count to $a0\nli $v0, 1               # Print integer syscall\nsyscall\n\n# Print a newline\nli $v0, 4               # Print string syscall\nla $a0, newline         # Load address of newline\nsyscall\n\n# Exit the program\nli $v0, 10\nsyscall\n</code></pre>\n"},{"tags":["java","multithreading","swing"],"answers":[{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1477275318,"post_id":40209772,"comment_id":67683958,"body_markdown":"The reason for this rule is so as to largely avoid having synchronized methods in Swing.","body":"The reason for this rule is so as to largely avoid having synchronized methods in Swing."}],"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1477274788,"creation_date":1477274788,"answer_id":40209772,"question_id":40209669,"body_markdown":"Why would you ever want to make this assumption? \r\n\r\nThe rule of Swing is that all code that updates the GUI should execute on the EDT so that all updates to Swing components are done in order. \r\n\r\nThe reason for this rule is you can&#39;t control when a thread is interrupted, so you don&#39;t want another thread to update the same GUI component at the same, which would leave the component in an inconsistent state, which would cause random problems you wouldn&#39;t be able to duplicate.","title":"Does the Swing event dispatch thread run at higher priority than the main thread?","body":"<p>Why would you ever want to make this assumption? </p>\n\n<p>The rule of Swing is that all code that updates the GUI should execute on the EDT so that all updates to Swing components are done in order. </p>\n\n<p>The reason for this rule is you can't control when a thread is interrupted, so you don't want another thread to update the same GUI component at the same, which would leave the component in an inconsistent state, which would cause random problems you wouldn't be able to duplicate.</p>\n"},{"comments":[{"owner":{"account_id":315381,"reputation":6586,"user_id":631051,"accept_rate":85,"display_name":"Ellen Spertus"},"score":0,"creation_date":1477275506,"post_id":40209797,"comment_id":67683997,"body_markdown":"Thanks, but while you&#39;ve shown this to be true for one implementation, I can&#39;t find anything in the javadoc to guarantee this is true of all implementations.","body":"Thanks, but while you&#39;ve shown this to be true for one implementation, I can&#39;t find anything in the javadoc to guarantee this is true of all implementations."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1477275906,"post_id":40209797,"comment_id":67684065,"body_markdown":"@espertus: and you likely won&#39;t","body":"@espertus: and you likely won&#39;t"},{"owner":{"account_id":315381,"reputation":6586,"user_id":631051,"accept_rate":85,"display_name":"Ellen Spertus"},"score":0,"creation_date":1477275978,"post_id":40209797,"comment_id":67684077,"body_markdown":"@HovercraftFullOfEels Then I guess the answer is &quot;maybe&quot;, not &quot;yes&quot;.","body":"@HovercraftFullOfEels Then I guess the answer is &quot;maybe&quot;, not &quot;yes&quot;."}],"tags":[],"owner":{"account_id":5657239,"reputation":958,"user_id":4475997,"accept_rate":50,"display_name":"MasterBlaster"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1691980762,"creation_date":1477275061,"answer_id":40209797,"question_id":40209669,"body_markdown":"**Maybe.**\r\n\r\nIn the implementation I tested, the EDT runs at a higher priority than the main thread when running the following MCVE:\r\n\r\n    import java.awt.EventQueue;\r\n\r\n    public class Test {\r\n        \r\n        public static void main(String[] args) {\r\n            System.out.println(Thread.currentThread().getPriority());\r\n            EventQueue.invokeLater(() -&gt; {\r\n                System.out.println(Thread.currentThread().getPriority());\r\n            });\r\n        }\r\n    }\r\n\r\nOutput:\r\n\r\n&lt;!-- language: lang-none --&gt; \r\n    \r\n    5\r\n    6\r\n\r\nNote that `5 == Thread.NORM_PRIORITY` and `10 == Thread.MAX_PRIORITY`.\r\n\r\nEdited in response to @ellen-spertus&#39; comment.","title":"Does the Swing event dispatch thread run at higher priority than the main thread?","body":"<p><strong>Maybe.</strong></p>\n<p>In the implementation I tested, the EDT runs at a higher priority than the main thread when running the following MCVE:</p>\n<pre><code>import java.awt.EventQueue;\n\npublic class Test {\n    \n    public static void main(String[] args) {\n        System.out.println(Thread.currentThread().getPriority());\n        EventQueue.invokeLater(() -&gt; {\n            System.out.println(Thread.currentThread().getPriority());\n        });\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>5\n6\n</code></pre>\n<p>Note that <code>5 == Thread.NORM_PRIORITY</code> and <code>10 == Thread.MAX_PRIORITY</code>.</p>\n<p>Edited in response to @ellen-spertus' comment.</p>\n"}],"owner":{"account_id":315381,"reputation":6586,"user_id":631051,"accept_rate":85,"display_name":"Ellen Spertus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":641,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":40209772,"answer_count":2,"score":2,"last_activity_date":1691980762,"creation_date":1477273801,"question_id":40209669,"body_markdown":"When I create a Java Swing application without specifying any thread priority levels, does the event dispatch thread run at a higher priority than the main thread? I understand that this does not guarantee that the main thread will never interrupt the event dispatch thread.","title":"Does the Swing event dispatch thread run at higher priority than the main thread?","body":"<p>When I create a Java Swing application without specifying any thread priority levels, does the event dispatch thread run at a higher priority than the main thread? I understand that this does not guarantee that the main thread will never interrupt the event dispatch thread.</p>\n"},{"tags":["java","language-design","visibility"],"comments":[{"owner":{"account_id":37701,"reputation":44030,"user_id":128645,"accept_rate":100,"display_name":"Jeff Foster"},"score":1,"creation_date":1300114142,"post_id":5300163,"comment_id":5976502,"body_markdown":"As a workaround for this kind of restriction, you could make the variables private and then use a static inner class to achieve this.","body":"As a workaround for this kind of restriction, you could make the variables private and then use a static inner class to achieve this."},{"owner":{"account_id":138790,"reputation":61721,"user_id":343955,"accept_rate":85,"display_name":"adarshr"},"score":1,"creation_date":1300114230,"post_id":5300163,"comment_id":5976528,"body_markdown":"Perhaps because usually, people create subclasses that live in a different package than the parent? One typical example is extending third party libraries to provide our own implementation.","body":"Perhaps because usually, people create subclasses that live in a different package than the parent? One typical example is extending third party libraries to provide our own implementation."},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":1,"creation_date":1300114365,"post_id":5300163,"comment_id":5976565,"body_markdown":"@adarshr: that&#39;s the precise reason for a sub-class modifier to exist. If all sub-classes where in the same package as the super class, it wouldn&#39;t be any different from protected.","body":"@adarshr: that&#39;s the precise reason for a sub-class modifier to exist. If all sub-classes where in the same package as the super class, it wouldn&#39;t be any different from protected."},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":5,"creation_date":1300114998,"post_id":5300163,"comment_id":5976726,"body_markdown":"As it happens Java 1.0 had `private protected`. I believe the implementation was buggy. Dropped in 1.1.","body":"As it happens Java 1.0 had <code>private protected</code>. I believe the implementation was buggy. Dropped in 1.1."},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":0,"creation_date":1300115196,"post_id":5300163,"comment_id":5976784,"body_markdown":"@Tom, interesting! You have a reference for that?","body":"@Tom, interesting! You have a reference for that?"},{"owner":{"account_id":974203,"reputation":4692,"user_id":996025,"accept_rate":67,"display_name":"Robert"},"score":5,"creation_date":1410265667,"post_id":5300163,"comment_id":40253728,"body_markdown":"I also miss this visibility, for the same reasons as @Michael. It feels kind of &quot;unnecessary&quot; to put my classes in a separate package(abstract superclass and concrete subclasses) just to restrict visibility. Also making such hacky solutions like making super class concrete adding it as a private member variable in subclasses, implementing some interface and so on, it makes the code  more complicated than it should. private protected would really make things nicer by bringing encapsulation while inheriting, to the least amount of complexity.","body":"I also miss this visibility, for the same reasons as @Michael. It feels kind of &quot;unnecessary&quot; to put my classes in a separate package(abstract superclass and concrete subclasses) just to restrict visibility. Also making such hacky solutions like making super class concrete adding it as a private member variable in subclasses, implementing some interface and so on, it makes the code  more complicated than it should. private protected would really make things nicer by bringing encapsulation while inheriting, to the least amount of complexity."}],"answers":[{"comments":[{"owner":{"account_id":76005,"reputation":38195,"user_id":217862,"accept_rate":64,"display_name":"ewernli"},"score":0,"creation_date":1366871640,"post_id":5300403,"comment_id":23176832,"body_markdown":"I don&#39;t understand your comment in parenthesis. protected *is* sub-class visiblity + package visiblity. What do you mean?","body":"I don&#39;t understand your comment in parenthesis. protected <i>is</i> sub-class visiblity + package visiblity. What do you mean?"},{"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"score":1,"creation_date":1366917694,"post_id":5300403,"comment_id":23202979,"body_markdown":"@ewernli `protected` is a bit less. Although every class inherits from `Object` (i.e. `clone()` should be visible everywhere), you can&#39;t call `anyObject.clone()` for an arbitrary object.","body":"@ewernli <code>protected</code> is a bit less. Although every class inherits from <code>Object</code> (i.e. <code>clone()</code> should be visible everywhere), you can&#39;t call <code>anyObject.clone()</code> for an arbitrary object."},{"owner":{"account_id":1922154,"reputation":3638,"user_id":1733377,"accept_rate":90,"display_name":"Michael Plautz"},"score":1,"creation_date":1385049226,"post_id":5300403,"comment_id":29991838,"body_markdown":"In a similar manner, any instance of class can access the `private` members of another instance of the same class. You would think that because a member is `private`, only that instance should be able to access it, but as @PaŭloEbermann was saying, you would have _full_ control over the class already. If you&#39;re accessing `private` members of another instance, it&#39;s because _you_ designed it that way. On the same note, if you are developing a package and you access a `protected` member of another class, it&#39;s because _you_ are the one developing that package, to which others do not have access.","body":"In a similar manner, any instance of class can access the <code>private</code> members of another instance of the same class. You would think that because a member is <code>private</code>, only that instance should be able to access it, but as @PaŭloEbermann was saying, you would have <i>full</i> control over the class already. If you&#39;re accessing <code>private</code> members of another instance, it&#39;s because <i>you</i> designed it that way. On the same note, if you are developing a package and you access a <code>protected</code> member of another class, it&#39;s because <i>you</i> are the one developing that package, to which others do not have access."},{"owner":{"account_id":2450090,"reputation":4212,"user_id":2136603,"accept_rate":45,"display_name":"Mubin"},"score":0,"creation_date":1398176383,"post_id":5300403,"comment_id":35525968,"body_markdown":"Old comments/question to comment, but can somebody clarify the statement - &quot;You should have control over your package&quot;? If I have a 3rd party library, then I can always create a package with the same hierarchy and access the protected members if required. Isn&#39;t that the case?","body":"Old comments/question to comment, but can somebody clarify the statement - &quot;You should have control over your package&quot;? If I have a 3rd party library, then I can always create a package with the same hierarchy and access the protected members if required. Isn&#39;t that the case?"},{"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"score":0,"creation_date":1398190491,"post_id":5300403,"comment_id":35535049,"body_markdown":"@Mubin this is the case, yes (if there isn&#39;t a security manager which restricts which class loader can create classes in a package). But you could also create a modified version of your third party library, and by make private members public. Or use reflection. All of these access modifiers are not waterproof at all.","body":"@Mubin this is the case, yes (if there isn&#39;t a security manager which restricts which class loader can create classes in a package). But you could also create a modified version of your third party library, and by make private members public. Or use reflection. All of these access modifiers are not waterproof at all."}],"tags":[],"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"comment_count":5,"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1300114986,"creation_date":1300114986,"answer_id":5300403,"question_id":5300163,"body_markdown":"I suppose they want to avoid the added complexity by having a non-linear access hierarchy.\r\n\r\nYou should have control over your package, so simply don&#39;t call these protected methods there.\r\n\r\n(By the way, `protected` is not quite the same as `sub-class and package`, as non-static protected methods (if not in the same package) can&#39;t be called on arbitrary objects of the declaring class, but only on objects of the subclass the code is in.  (You can see this on `Object.clone()`, which can only be called by the class whose object is being cloned.))","title":"Why is there no sub-class visibility modifier in Java?","body":"<p>I suppose they want to avoid the added complexity by having a non-linear access hierarchy.</p>\n\n<p>You should have control over your package, so simply don't call these protected methods there.</p>\n\n<p>(By the way, <code>protected</code> is not quite the same as <code>sub-class and package</code>, as non-static protected methods (if not in the same package) can't be called on arbitrary objects of the declaring class, but only on objects of the subclass the code is in.  (You can see this on <code>Object.clone()</code>, which can only be called by the class whose object is being cloned.))</p>\n"},{"comments":[{"owner":{"account_id":164832,"reputation":6558,"user_id":387852,"accept_rate":71,"display_name":"Michael McGowan"},"score":0,"creation_date":1300116235,"post_id":5300409,"comment_id":5977085,"body_markdown":"I can&#39;t decide which relationship I think is closer.  My instinct was that *being-a-subtype-of* was a closer relationship (and maybe that&#39;s part of the reason I think this type of modifier makes more sense than protected and default).  However, some random coder using a JAR library that I created could sub-class one of my classes, whereas I probably know what&#39;s going on in my package.  Hmmm...","body":"I can&#39;t decide which relationship I think is closer.  My instinct was that <i>being-a-subtype-of</i> was a closer relationship (and maybe that&#39;s part of the reason I think this type of modifier makes more sense than protected and default).  However, some random coder using a JAR library that I created could sub-class one of my classes, whereas I probably know what&#39;s going on in my package.  Hmmm..."},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":0,"creation_date":1300116439,"post_id":5300409,"comment_id":5977145,"body_markdown":"Yep. Precisely I course of thoughts too. And you could even strike *&quot;probably&quot;* in your last sentence if you [seal the package](http://download.oracle.com/javase/tutorial/deployment/jar/sealman.html).","body":"Yep. Precisely I course of thoughts too. And you could even strike <i>&quot;probably&quot;</i> in your last sentence if you <a href=\"http://download.oracle.com/javase/tutorial/deployment/jar/sealman.html\" rel=\"nofollow noreferrer\">seal the package</a>."},{"owner":{"account_id":130645,"reputation":81705,"user_id":330057,"accept_rate":77,"display_name":"corsiKa"},"score":0,"creation_date":1302732106,"post_id":5300409,"comment_id":6452096,"body_markdown":"I&#39;m having difficulty imagining a scenario where you would not want a sealed package.","body":"I&#39;m having difficulty imagining a scenario where you would not want a sealed package."}],"tags":[],"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"comment_count":3,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1691979529,"creation_date":1300115014,"answer_id":5300409,"question_id":5300163,"body_markdown":"*Being-in-the-same-package* is simply considered a closer relationship than *being-a-subtype-of*.\r\n\r\nWhy?\r\n-\r\nYou typically control all source code of the package you&#39;re developing&lt;sup&gt;(*)&lt;/sup&gt;, so you at least have the *possibility* to avoid making erroneous calls.\r\n\r\nYou do *not* control all code that extends your classes. (Anyone can extend your class.) This means that package private access plays a more important role.\r\n\r\n---\r\n&lt;sup&gt;*) But hey, I can start any source file with `package com.yourpackage;` so you don&#39;t control all code in your package! Well, yes, but a) you&#39;re not really supposed to do that, and b) it can be prevented by [sealing the packages](https://docs.oracle.com/javase/tutorial/deployment/jar/sealman.html).&lt;/sup&gt;","title":"Why is there no sub-class visibility modifier in Java?","body":"<p><em>Being-in-the-same-package</em> is simply considered a closer relationship than <em>being-a-subtype-of</em>.</p>\n<h2>Why?</h2>\n<p>You typically control all source code of the package you're developing<sup>(*)</sup>, so you at least have the <em>possibility</em> to avoid making erroneous calls.</p>\n<p>You do <em>not</em> control all code that extends your classes. (Anyone can extend your class.) This means that package private access plays a more important role.</p>\n<hr />\n<p><sup>*) But hey, I can start any source file with <code>package com.yourpackage;</code> so you don't control all code in your package! Well, yes, but a) you're not really supposed to do that, and b) it can be prevented by <a href=\"https://docs.oracle.com/javase/tutorial/deployment/jar/sealman.html\" rel=\"nofollow noreferrer\">sealing the packages</a>.</sup></p>\n"},{"tags":[],"owner":{"account_id":277446,"reputation":237,"user_id":571452,"display_name":"jumping-jack"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1691979586,"creation_date":1300117083,"answer_id":5300842,"question_id":5300163,"body_markdown":"You should put your class in a package of its own and mark the member (instance variable or method) as protected. \r\nThis way, no other classes, except the subclasses, can access that member which you marked as protected.\r\nYou will end up with one class in one package, if you desperately want only subclasses to access that protected member.\r\n\r\n","title":"Why is there no sub-class visibility modifier in Java?","body":"<p>You should put your class in a package of its own and mark the member (instance variable or method) as protected.\nThis way, no other classes, except the subclasses, can access that member which you marked as protected.\nYou will end up with one class in one package, if you desperately want only subclasses to access that protected member.</p>\n"}],"owner":{"account_id":164832,"reputation":6558,"user_id":387852,"accept_rate":71,"display_name":"Michael McGowan"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10842,"favorite_count":0,"down_vote_count":0,"up_vote_count":81,"accepted_answer_id":5300403,"answer_count":3,"score":81,"last_activity_date":1691979586,"creation_date":1300113952,"question_id":5300163,"body_markdown":"On more than one occasion I have found myself desiring a variable visibility that is not possible in Java.  I wanted certain members to be visible within their own class and within any sub-classes, but not to the rest of the package or to the rest of the world.  In other words, I wanted this:\r\n\r\n\r\n    Modifier        Class     Package   Subclass  World\r\n    sub-class       Y         N         Y         N\r\n\r\nHowever, the designers of Java only gave me [this][1]:\r\n\r\n\r\n    Modifier        Class     Package   Subclass  World\r\n    public          Y         Y         Y         Y\r\n    protected       Y         Y         Y         N\r\n    no modifier     Y         Y         N         N\r\n    private         Y         N         N         N\r\n\r\nThe typical case when I want something like this is when creating an abstract class.  Sometimes I find the abstract parent needs access to certain members, but concrete children do as well.  I can give them this access by making the members `protected`, but that opens up accessibility to the rest of the package when I don&#39;t really want to.\r\n\r\nTo be fully clear, I know such a modifier is _not_ possible in Java.  My question is why is such a modifier not included in Java?  It seems (to me) to be a more natural visibility level than either `protected` or the default.  Is the reason just along the lines of it not being sufficiently important to be included, or is it more related to possible side effects that I haven&#39;t considered?\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html","title":"Why is there no sub-class visibility modifier in Java?","body":"<p>On more than one occasion I have found myself desiring a variable visibility that is not possible in Java.  I wanted certain members to be visible within their own class and within any sub-classes, but not to the rest of the package or to the rest of the world.  In other words, I wanted this:</p>\n\n<pre><code>Modifier        Class     Package   Subclass  World\nsub-class       Y         N         Y         N\n</code></pre>\n\n<p>However, the designers of Java only gave me <a href=\"http://download.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html\" rel=\"noreferrer\">this</a>:</p>\n\n<pre><code>Modifier        Class     Package   Subclass  World\npublic          Y         Y         Y         Y\nprotected       Y         Y         Y         N\nno modifier     Y         Y         N         N\nprivate         Y         N         N         N\n</code></pre>\n\n<p>The typical case when I want something like this is when creating an abstract class.  Sometimes I find the abstract parent needs access to certain members, but concrete children do as well.  I can give them this access by making the members <code>protected</code>, but that opens up accessibility to the rest of the package when I don't really want to.</p>\n\n<p>To be fully clear, I know such a modifier is <em>not</em> possible in Java.  My question is why is such a modifier not included in Java?  It seems (to me) to be a more natural visibility level than either <code>protected</code> or the default.  Is the reason just along the lines of it not being sufficiently important to be included, or is it more related to possible side effects that I haven't considered?</p>\n"},{"tags":["java","spring-boot","dependency-injection","autowired"],"comments":[{"owner":{"account_id":9896111,"reputation":2731,"user_id":7327572,"accept_rate":80,"display_name":"FilipRistic"},"score":0,"creation_date":1691748081,"post_id":76882464,"comment_id":135536721,"body_markdown":"Your problem is that you are trying to inject via `@Autowired` to static field which is not possible.","body":"Your problem is that you are trying to inject via <code>@Autowired</code> to static field which is not possible."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1691748554,"post_id":76882464,"comment_id":135536833,"body_markdown":"Why does a `@Component` have a main method?","body":"Why does a <code>@Component</code> have a main method?"},{"owner":{"account_id":28395388,"reputation":1,"user_id":21720536,"display_name":"Randy T"},"score":0,"creation_date":1691821731,"post_id":76882464,"comment_id":135546212,"body_markdown":"@FilipRistic thanks for reply, that I actually noticed, \nhowever, although I use a  `@RestController` class and use constructor injection the clientId,    \nthen test it by a `@GetMapping`, it won&#39;t work either, still read null.\nOn the contrary,  `@autowired` works if I autowired another Component that set directly an id value in member like : \n  \n        `public String coachid = &quot;123&quot;;`\n \nmeaning that there are other reasons leading to read .yml data failure.","body":"@FilipRistic thanks for reply, that I actually noticed,  however, although I use a  <code>@RestController</code> class and use constructor injection the clientId,     then test it by a <code>@GetMapping</code>, it won&#39;t work either, still read null. On the contrary,  <code>@autowired</code> works if I autowired another Component that set directly an id value in member like :             <code>public String coachid = &quot;123&quot;;</code>   meaning that there are other reasons leading to read .yml data failure."},{"owner":{"account_id":28395388,"reputation":1,"user_id":21720536,"display_name":"Randy T"},"score":0,"creation_date":1691821988,"post_id":76882464,"comment_id":135546229,"body_markdown":"@FilipRistic thanks for the reply, just wanna try any method run and print out to see if iD can be autowired and read from .yml","body":"@FilipRistic thanks for the reply, just wanna try any method run and print out to see if iD can be autowired and read from .yml"}],"answers":[{"comments":[{"owner":{"account_id":98471,"reputation":15227,"user_id":266531,"accept_rate":100,"display_name":"Kirby"},"score":0,"creation_date":1692122428,"post_id":76895943,"comment_id":135580686,"body_markdown":"probably best to ask your new questions as a new post","body":"probably best to ask your new questions as a new post"}],"tags":[],"owner":{"account_id":28395388,"reputation":1,"user_id":21720536,"display_name":"Randy T"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691979447,"creation_date":1691979447,"answer_id":76895943,"question_id":76882464,"body_markdown":"Finally...I found out what happened to this question, it&#39;s my typo : &quot;appication.yml&quot; , since Spring Boot can only read the name &quot;application.yml&quot;.\r\n\r\nHowever, this begs another question that I&#39;ve been finding the answer to for a while: Is there a way for me to read any named yml file ?? e.g. if I want to use &quot;config-dev.yml&quot; or &quot;config-prod.yml&quot; to read different values with same property&#39;s name for development version or production version.","title":"Spring Boot using record clas to store metadata in .yml file not work","body":"<p>Finally...I found out what happened to this question, it's my typo : &quot;appication.yml&quot; , since Spring Boot can only read the name &quot;application.yml&quot;.</p>\n<p>However, this begs another question that I've been finding the answer to for a while: Is there a way for me to read any named yml file ?? e.g. if I want to use &quot;config-dev.yml&quot; or &quot;config-prod.yml&quot; to read different values with same property's name for development version or production version.</p>\n"}],"owner":{"account_id":28395388,"reputation":1,"user_id":21720536,"display_name":"Randy T"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1691979447,"creation_date":1691747730,"question_id":76882464,"body_markdown":"I&#39;m trying to read metadata in .yml file then injecting values in record class, finally use those value in other classes.\r\n\r\nI have a application.yml file with value:\r\n\r\n```\r\nteamson:\r\n    clientId: 123\r\n    clientSecret: 456\r\n    tenantId: 789\r\n```\r\n\r\nhava a GaphConfig.java :\r\n\r\n```\r\n@ConfigurationProperties(prefix = &quot;teamson&quot;)\r\npublic record GraphConfig(String clientId, String clientSecret, String tenantId) {\r\n}\r\n```\r\n\r\nand want to use metadata value in tryRead.java:\r\n\r\n```\r\n@Component\r\npublic class tryRead {\r\n\r\n@Autowired\r\nprivate static GraphConfig cofig;\r\n\r\n    public static void main(String arts[]){\r\n    \r\n       System.out.println(cofig.clientId());\r\n    \r\n    }\r\n\r\n}\r\n```\r\n\r\nbut always get error  : Cannot invoke &quot;com.xxx.GraphConfig.clientId()&quot; because &quot;com.xxx.tryRead.cofig&quot; is null\r\n\r\nI have included depedency:\r\n\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nI use JAVA 17 and SpringBoot Version 2.7.14\r\n\r\nI want\r\nSystem.out.println(cofig.clientId()); in class tryRead can read id that set in properties.yml\r\nand also reusable in other spring classes","title":"Spring Boot using record clas to store metadata in .yml file not work","body":"<p>I'm trying to read metadata in .yml file then injecting values in record class, finally use those value in other classes.</p>\n<p>I have a application.yml file with value:</p>\n<pre><code>teamson:\n    clientId: 123\n    clientSecret: 456\n    tenantId: 789\n</code></pre>\n<p>hava a GaphConfig.java :</p>\n<pre><code>@ConfigurationProperties(prefix = &quot;teamson&quot;)\npublic record GraphConfig(String clientId, String clientSecret, String tenantId) {\n}\n</code></pre>\n<p>and want to use metadata value in tryRead.java:</p>\n<pre><code>@Component\npublic class tryRead {\n\n@Autowired\nprivate static GraphConfig cofig;\n\n    public static void main(String arts[]){\n    \n       System.out.println(cofig.clientId());\n    \n    }\n\n}\n</code></pre>\n<p>but always get error  : Cannot invoke &quot;com.xxx.GraphConfig.clientId()&quot; because &quot;com.xxx.tryRead.cofig&quot; is null</p>\n<p>I have included depedency:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>I use JAVA 17 and SpringBoot Version 2.7.14</p>\n<p>I want\nSystem.out.println(cofig.clientId()); in class tryRead can read id that set in properties.yml\nand also reusable in other spring classes</p>\n"},{"tags":["java","mapbox"],"answers":[{"tags":[],"owner":{"account_id":17436725,"reputation":154,"user_id":12639568,"display_name":"furkanayilmaz"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1608969199,"creation_date":1608969199,"answer_id":65454521,"question_id":65453302,"body_markdown":"So this documentation could help you as in this documentation it says these are the lines of codes that needs to be added and I will be also including the link to that [documentation][1] They do also have a demo project on github as well so I would recommend that to try out that demo and take a look at the [source code][2] so you will have a better idea \r\n\r\nI would recommend you to try these codes out just even for an example to see if it would work\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;FrameLayout\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:mapbox=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.examples.styles.BasicSymbolLayerActivity&quot;&gt;\r\n     \r\n    &lt;com.mapbox.mapboxsdk.maps.MapView\r\n    android:id=&quot;@+id/mapView&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    mapbox:mapbox_cameraTargetLat=&quot;-32.557013&quot;\r\n    mapbox:mapbox_cameraTargetLng=&quot;-56.149056&quot;\r\n    mapbox:mapbox_cameraZoom=&quot;5.526846&quot;/&gt;\r\n     \r\n    &lt;/FrameLayout&gt;\r\n\r\nBasicSymbolLayerActivity.java\r\n\r\n    package com.mapbox.mapboxandroiddemo.examples.styles;\r\n    \r\n    import android.graphics.BitmapFactory;\r\n    import android.os.Bundle;\r\n    import androidx.annotation.NonNull;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    \r\n    import com.mapbox.geojson.Feature;\r\n    import com.mapbox.geojson.FeatureCollection;\r\n    import com.mapbox.geojson.Point;\r\n    import com.mapbox.mapboxandroiddemo.R;\r\n    import com.mapbox.mapboxsdk.Mapbox;\r\n    import com.mapbox.mapboxsdk.maps.MapView;\r\n    import com.mapbox.mapboxsdk.maps.MapboxMap;\r\n    import com.mapbox.mapboxsdk.maps.OnMapReadyCallback;\r\n    import com.mapbox.mapboxsdk.maps.Style;\r\n    import com.mapbox.mapboxsdk.style.layers.SymbolLayer;\r\n    import com.mapbox.mapboxsdk.style.sources.GeoJsonSource;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    import static com.mapbox.mapboxsdk.style.layers.PropertyFactory.iconAllowOverlap;\r\n    import static com.mapbox.mapboxsdk.style.layers.PropertyFactory.iconIgnorePlacement;\r\n    import static com.mapbox.mapboxsdk.style.layers.PropertyFactory.iconImage;\r\n    \r\n    /**\r\n     * Display {@link SymbolLayer} icons on the map.\r\n     */\r\n    public class BasicSymbolLayerActivity extends AppCompatActivity implements\r\n      OnMapReadyCallback {\r\n    \r\n      private static final String SOURCE_ID = &quot;SOURCE_ID&quot;;\r\n      private static final String ICON_ID = &quot;ICON_ID&quot;;\r\n      private static final String LAYER_ID = &quot;LAYER_ID&quot;;\r\n      private MapView mapView;\r\n    \r\n      @Override\r\n      protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n    \r\n        // Mapbox access token is configured here. This needs to be called either in your application\r\n        // object or in the same activity which contains the mapview.\r\n        Mapbox.getInstance(this, getString(R.string.access_token));\r\n    \r\n        // This contains the MapView in XML and needs to be called after the access token is configured.\r\n        setContentView(R.layout.activity_style_basic_symbol_layer);\r\n    \r\n        mapView = findViewById(R.id.mapView);\r\n        mapView.onCreate(savedInstanceState);\r\n        mapView.getMapAsync(this);\r\n      }\r\n    \r\n      @Override\r\n      public void onMapReady(@NonNull final MapboxMap mapboxMap) {\r\n    \r\n        List&lt;Feature&gt; symbolLayerIconFeatureList = new ArrayList&lt;&gt;();\r\n        symbolLayerIconFeatureList.add(Feature.fromGeometry(\r\n          Point.fromLngLat(-57.225365, -33.213144)));\r\n        symbolLayerIconFeatureList.add(Feature.fromGeometry(\r\n          Point.fromLngLat(-54.14164, -33.981818)));\r\n        symbolLayerIconFeatureList.add(Feature.fromGeometry(\r\n          Point.fromLngLat(-56.990533, -30.583266)));\r\n    \r\n        mapboxMap.setStyle(new Style.Builder().fromUri(&quot;mapbox://styles/mapbox/cjf4m44iw0uza2spb3q0a7s41&quot;)\r\n    \r\n          // Add the SymbolLayer icon image to the map style\r\n          .withImage(ICON_ID, BitmapFactory.decodeResource(\r\n            BasicSymbolLayerActivity.this.getResources(), R.drawable.mapbox_marker_icon_default))\r\n    \r\n          // Adding a GeoJson source for the SymbolLayer icons.\r\n          .withSource(new GeoJsonSource(SOURCE_ID,\r\n            FeatureCollection.fromFeatures(symbolLayerIconFeatureList)))\r\n    \r\n          // Adding the actual SymbolLayer to the map style. An offset is added that the bottom of the red\r\n          // marker icon gets fixed to the coordinate, rather than the middle of the icon being fixed to\r\n          // the coordinate point. This is offset is not always needed and is dependent on the image\r\n          // that you use for the SymbolLayer icon.\r\n          .withLayer(new SymbolLayer(LAYER_ID, SOURCE_ID)\r\n            .withProperties(\r\n                iconImage(ICON_ID),\r\n                iconAllowOverlap(true),\r\n                iconIgnorePlacement(true)\r\n            )\r\n          ), new Style.OnStyleLoaded() {\r\n            @Override\r\n            public void onStyleLoaded(@NonNull Style style) {\r\n    \r\n              // Map is set up and the style has loaded. Now you can add additional data or make other map adjustments.\r\n    \r\n    \r\n            }\r\n            });\r\n      }\r\n    \r\n      @Override\r\n      public void onResume() {\r\n        super.onResume();\r\n        mapView.onResume();\r\n      }\r\n    \r\n      @Override\r\n      protected void onStart() {\r\n        super.onStart();\r\n        mapView.onStart();\r\n      }\r\n    \r\n      @Override\r\n      protected void onStop() {\r\n        super.onStop();\r\n        mapView.onStop();\r\n      }\r\n    \r\n      @Override\r\n      public void onPause() {\r\n        super.onPause();\r\n        mapView.onPause();\r\n      }\r\n    \r\n      @Override\r\n      public void onLowMemory() {\r\n        super.onLowMemory();\r\n        mapView.onLowMemory();\r\n      }\r\n    \r\n      @Override\r\n      protected void onDestroy() {\r\n        super.onDestroy();\r\n        mapView.onDestroy();\r\n      }\r\n    \r\n      @Override\r\n      protected void onSaveInstanceState(Bundle outState) {\r\n        super.onSaveInstanceState(outState);\r\n        mapView.onSaveInstanceState(outState);\r\n      }\r\n    }\r\n\r\n\r\n  [1]: https://docs.mapbox.com/android/maps/examples/marker-symbol-layer/\r\n  [2]: https://github.com/mapbox/mapbox-android-demo","title":"Android: How to add custom marker in MapBox?","body":"<p>So this documentation could help you as in this documentation it says these are the lines of codes that needs to be added and I will be also including the link to that <a href=\"https://docs.mapbox.com/android/maps/examples/marker-symbol-layer/\" rel=\"nofollow noreferrer\">documentation</a> They do also have a demo project on github as well so I would recommend that to try out that demo and take a look at the <a href=\"https://github.com/mapbox/mapbox-android-demo\" rel=\"nofollow noreferrer\">source code</a> so you will have a better idea</p>\n<p>I would recommend you to try these codes out just even for an example to see if it would work</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;FrameLayout\nxmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nxmlns:mapbox=&quot;http://schemas.android.com/apk/res-auto&quot;\nxmlns:tools=&quot;http://schemas.android.com/tools&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;match_parent&quot;\ntools:context=&quot;.examples.styles.BasicSymbolLayerActivity&quot;&gt;\n \n&lt;com.mapbox.mapboxsdk.maps.MapView\nandroid:id=&quot;@+id/mapView&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;match_parent&quot;\nmapbox:mapbox_cameraTargetLat=&quot;-32.557013&quot;\nmapbox:mapbox_cameraTargetLng=&quot;-56.149056&quot;\nmapbox:mapbox_cameraZoom=&quot;5.526846&quot;/&gt;\n \n&lt;/FrameLayout&gt;\n</code></pre>\n<p>BasicSymbolLayerActivity.java</p>\n<pre><code>package com.mapbox.mapboxandroiddemo.examples.styles;\n\nimport android.graphics.BitmapFactory;\nimport android.os.Bundle;\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport com.mapbox.geojson.Feature;\nimport com.mapbox.geojson.FeatureCollection;\nimport com.mapbox.geojson.Point;\nimport com.mapbox.mapboxandroiddemo.R;\nimport com.mapbox.mapboxsdk.Mapbox;\nimport com.mapbox.mapboxsdk.maps.MapView;\nimport com.mapbox.mapboxsdk.maps.MapboxMap;\nimport com.mapbox.mapboxsdk.maps.OnMapReadyCallback;\nimport com.mapbox.mapboxsdk.maps.Style;\nimport com.mapbox.mapboxsdk.style.layers.SymbolLayer;\nimport com.mapbox.mapboxsdk.style.sources.GeoJsonSource;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport static com.mapbox.mapboxsdk.style.layers.PropertyFactory.iconAllowOverlap;\nimport static com.mapbox.mapboxsdk.style.layers.PropertyFactory.iconIgnorePlacement;\nimport static com.mapbox.mapboxsdk.style.layers.PropertyFactory.iconImage;\n\n/**\n * Display {@link SymbolLayer} icons on the map.\n */\npublic class BasicSymbolLayerActivity extends AppCompatActivity implements\n  OnMapReadyCallback {\n\n  private static final String SOURCE_ID = &quot;SOURCE_ID&quot;;\n  private static final String ICON_ID = &quot;ICON_ID&quot;;\n  private static final String LAYER_ID = &quot;LAYER_ID&quot;;\n  private MapView mapView;\n\n  @Override\n  protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n\n    // Mapbox access token is configured here. This needs to be called either in your application\n    // object or in the same activity which contains the mapview.\n    Mapbox.getInstance(this, getString(R.string.access_token));\n\n    // This contains the MapView in XML and needs to be called after the access token is configured.\n    setContentView(R.layout.activity_style_basic_symbol_layer);\n\n    mapView = findViewById(R.id.mapView);\n    mapView.onCreate(savedInstanceState);\n    mapView.getMapAsync(this);\n  }\n\n  @Override\n  public void onMapReady(@NonNull final MapboxMap mapboxMap) {\n\n    List&lt;Feature&gt; symbolLayerIconFeatureList = new ArrayList&lt;&gt;();\n    symbolLayerIconFeatureList.add(Feature.fromGeometry(\n      Point.fromLngLat(-57.225365, -33.213144)));\n    symbolLayerIconFeatureList.add(Feature.fromGeometry(\n      Point.fromLngLat(-54.14164, -33.981818)));\n    symbolLayerIconFeatureList.add(Feature.fromGeometry(\n      Point.fromLngLat(-56.990533, -30.583266)));\n\n    mapboxMap.setStyle(new Style.Builder().fromUri(&quot;mapbox://styles/mapbox/cjf4m44iw0uza2spb3q0a7s41&quot;)\n\n      // Add the SymbolLayer icon image to the map style\n      .withImage(ICON_ID, BitmapFactory.decodeResource(\n        BasicSymbolLayerActivity.this.getResources(), R.drawable.mapbox_marker_icon_default))\n\n      // Adding a GeoJson source for the SymbolLayer icons.\n      .withSource(new GeoJsonSource(SOURCE_ID,\n        FeatureCollection.fromFeatures(symbolLayerIconFeatureList)))\n\n      // Adding the actual SymbolLayer to the map style. An offset is added that the bottom of the red\n      // marker icon gets fixed to the coordinate, rather than the middle of the icon being fixed to\n      // the coordinate point. This is offset is not always needed and is dependent on the image\n      // that you use for the SymbolLayer icon.\n      .withLayer(new SymbolLayer(LAYER_ID, SOURCE_ID)\n        .withProperties(\n            iconImage(ICON_ID),\n            iconAllowOverlap(true),\n            iconIgnorePlacement(true)\n        )\n      ), new Style.OnStyleLoaded() {\n        @Override\n        public void onStyleLoaded(@NonNull Style style) {\n\n          // Map is set up and the style has loaded. Now you can add additional data or make other map adjustments.\n\n\n        }\n        });\n  }\n\n  @Override\n  public void onResume() {\n    super.onResume();\n    mapView.onResume();\n  }\n\n  @Override\n  protected void onStart() {\n    super.onStart();\n    mapView.onStart();\n  }\n\n  @Override\n  protected void onStop() {\n    super.onStop();\n    mapView.onStop();\n  }\n\n  @Override\n  public void onPause() {\n    super.onPause();\n    mapView.onPause();\n  }\n\n  @Override\n  public void onLowMemory() {\n    super.onLowMemory();\n    mapView.onLowMemory();\n  }\n\n  @Override\n  protected void onDestroy() {\n    super.onDestroy();\n    mapView.onDestroy();\n  }\n\n  @Override\n  protected void onSaveInstanceState(Bundle outState) {\n    super.onSaveInstanceState(outState);\n    mapView.onSaveInstanceState(outState);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14274600,"reputation":1750,"user_id":10311158,"display_name":"Moritz"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1610016675,"creation_date":1610016675,"answer_id":65610973,"question_id":65453302,"body_markdown":"Markers were deprecated in favor for the Annotation Plugin which &quot;simplifies the way to set and adjust the visual properties of annotations on a Mapbox map&quot;:\r\n\r\nhttps://docs.mapbox.com/android/plugins/guides/annotation/ \r\n\r\nTo get it to work, you would have to add this additional dependency in your build.gradle\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n     implementation &#39;com.mapbox.mapboxsdk:mapbox-android-plugin-annotation-v9:0.9.0&#39;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nOnce the map has loaded you can create the symbolmanager and add the marker:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    @Override\r\n    public void onMapReady(@NonNull final MapboxMap mapboxMap) {\r\n    mapboxMap.setStyle(Style.DARK, new Style.OnStyleLoaded() {\r\n    @Override\r\n    public void onStyleLoaded(@NonNull Style style) {\r\n     \r\n    // Set up a SymbolManager instance\r\n    symbolManager = new SymbolManager(mapView, mapboxMap, style);\r\n     \r\n    symbolManager.setIconAllowOverlap(true);\r\n    symbolManager.setTextAllowOverlap(true);\r\n     \r\n    // Add symbol at specified lat/lon\r\n    symbol = symbolManager.create(new SymbolOptions()\r\n    .withLatLng(new LatLng(60.169091, 24.939876))\r\n    .withIconImage(MAKI_ICON_HARBOR)\r\n    .withIconSize(2.0f)\r\n    .withDraggable(true));\r\n\r\n    }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nPlease also see this example: https://docs.mapbox.com/android/plugins/examples/symbol-listener/","title":"Android: How to add custom marker in MapBox?","body":"<p>Markers were deprecated in favor for the Annotation Plugin which &quot;simplifies the way to set and adjust the visual properties of annotations on a Mapbox map&quot;:</p>\n<p><a href=\"https://docs.mapbox.com/android/plugins/guides/annotation/\" rel=\"nofollow noreferrer\">https://docs.mapbox.com/android/plugins/guides/annotation/</a></p>\n<p>To get it to work, you would have to add this additional dependency in your build.gradle</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code> implementation 'com.mapbox.mapboxsdk:mapbox-android-plugin-annotation-v9:0.9.0'</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>Once the map has loaded you can create the symbolmanager and add the marker:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>@Override\npublic void onMapReady(@NonNull final MapboxMap mapboxMap) {\nmapboxMap.setStyle(Style.DARK, new Style.OnStyleLoaded() {\n@Override\npublic void onStyleLoaded(@NonNull Style style) {\n \n// Set up a SymbolManager instance\nsymbolManager = new SymbolManager(mapView, mapboxMap, style);\n \nsymbolManager.setIconAllowOverlap(true);\nsymbolManager.setTextAllowOverlap(true);\n \n// Add symbol at specified lat/lon\nsymbol = symbolManager.create(new SymbolOptions()\n.withLatLng(new LatLng(60.169091, 24.939876))\n.withIconImage(MAKI_ICON_HARBOR)\n.withIconSize(2.0f)\n.withDraggable(true));\n\n}\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>Please also see this example: <a href=\"https://docs.mapbox.com/android/plugins/examples/symbol-listener/\" rel=\"nofollow noreferrer\">https://docs.mapbox.com/android/plugins/examples/symbol-listener/</a></p>\n"}],"owner":{"account_id":14125331,"reputation":455,"user_id":10204803,"display_name":"Green Y."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2040,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":2,"score":-1,"last_activity_date":1691979359,"creation_date":1608951132,"question_id":65453302,"body_markdown":"I have a problem to use Mapbox for one android project. But when I use it, it&#39;s difficult to add a custom marker.\r\n\r\nhttps://docs.mapbox.com/android/plugins/guides/markerview/\r\n\r\nI tried to use markerview, but it&#39;s deprecated.\r\n\r\nPlease advise me. Thanks.","title":"Android: How to add custom marker in MapBox?","body":"<p>I have a problem to use Mapbox for one android project. But when I use it, it's difficult to add a custom marker.</p>\n<p><a href=\"https://docs.mapbox.com/android/plugins/guides/markerview/\" rel=\"nofollow noreferrer\">https://docs.mapbox.com/android/plugins/guides/markerview/</a></p>\n<p>I tried to use markerview, but it's deprecated.</p>\n<p>Please advise me. Thanks.</p>\n"},{"tags":["java","ignite"],"comments":[{"owner":{"account_id":5190889,"reputation":2147,"user_id":4153863,"display_name":"Stanislav Lukyanov"},"score":1,"creation_date":1691983706,"post_id":76895855,"comment_id":135559536,"body_markdown":"While the main question seems to be about suspend/resume for pessimistic transactions, and I&#39;ll leave this to someone more familiar with these internals. But to answer the more general question: yes, Ignite 2.x generally ties transactions to threads which is easy with traditional programming but complicates things with continuations and reactive programming. Ignite 3.0 (in beta as of Aug 2023) changes transactions API - transactions are no longer bound to a thread, specifically to support reactive style. BTW community will be happy to hear feedback on that! ;)","body":"While the main question seems to be about suspend/resume for pessimistic transactions, and I&#39;ll leave this to someone more familiar with these internals. But to answer the more general question: yes, Ignite 2.x generally ties transactions to threads which is easy with traditional programming but complicates things with continuations and reactive programming. Ignite 3.0 (in beta as of Aug 2023) changes transactions API - transactions are no longer bound to a thread, specifically to support reactive style. BTW community will be happy to hear feedback on that! ;)"},{"owner":{"account_id":2331995,"reputation":503,"user_id":2045179,"display_name":"Mikha"},"score":0,"creation_date":1691985470,"post_id":76895855,"comment_id":135559668,"body_markdown":"Thanks @StanislavLukyanov! Great to know that Apache 3 addresses this. Do you know what&#39;s the expected timeline for releasing it?","body":"Thanks @StanislavLukyanov! Great to know that Apache 3 addresses this. Do you know what&#39;s the expected timeline for releasing it?"}],"owner":{"account_id":2331995,"reputation":503,"user_id":2045179,"display_name":"Mikha"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691977861,"creation_date":1691977149,"question_id":76895855,"body_markdown":"I&#39;m a bit puzzled by the transaction model in Ignite, where an operation is associated with a transaction by the thread. The happy path therefore is to:\r\n - Start a transaction\r\n - Do operations (`get` or `put` data)\r\n - End the transaction...\r\n\r\n...when all of the above happens in one thread.\r\n\r\nBut how to use the async IO in this case then, i.e. `putAsync` and `getAsync`? After the first call to any of it I&#39;d like to release the thread for the subsequent events, which won&#39;t be related to the transaction I started.\r\n\r\nOr in general - how to use multiple threads with such transactions - say reactive streams implementations (RxJava or Project-Reactor) where where events might be handled in different threads?\r\n\r\nThere is a nice couple of method that seem like what might help: `Transaction::suspend` and `Transaction::resume`, which can transfer a transaction along the threads. These methods even seem to work in my scenarios with pessimistic transactions. However, their javadoc says:\r\n\r\n&gt; Supported only for optimistic transactions.\r\n\r\nLike I said, I didn&#39;t find it true - `suspend` and `resume` seem to be working like a charm for the pessimistic ones too so far... So, maybe the javadoc is incorrect? And if it still is correct, how could I use a pessimistic transaction from multiple threads?\r\n\r\nThanks!","title":"Apache Ignite - async IO and pessimistic transactions","body":"<p>I'm a bit puzzled by the transaction model in Ignite, where an operation is associated with a transaction by the thread. The happy path therefore is to:</p>\n<ul>\n<li>Start a transaction</li>\n<li>Do operations (<code>get</code> or <code>put</code> data)</li>\n<li>End the transaction...</li>\n</ul>\n<p>...when all of the above happens in one thread.</p>\n<p>But how to use the async IO in this case then, i.e. <code>putAsync</code> and <code>getAsync</code>? After the first call to any of it I'd like to release the thread for the subsequent events, which won't be related to the transaction I started.</p>\n<p>Or in general - how to use multiple threads with such transactions - say reactive streams implementations (RxJava or Project-Reactor) where where events might be handled in different threads?</p>\n<p>There is a nice couple of method that seem like what might help: <code>Transaction::suspend</code> and <code>Transaction::resume</code>, which can transfer a transaction along the threads. These methods even seem to work in my scenarios with pessimistic transactions. However, their javadoc says:</p>\n<blockquote>\n<p>Supported only for optimistic transactions.</p>\n</blockquote>\n<p>Like I said, I didn't find it true - <code>suspend</code> and <code>resume</code> seem to be working like a charm for the pessimistic ones too so far... So, maybe the javadoc is incorrect? And if it still is correct, how could I use a pessimistic transaction from multiple threads?</p>\n<p>Thanks!</p>\n"},{"tags":["java","generics","arraylist"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":3,"creation_date":1691891451,"post_id":76891626,"comment_id":135551967,"body_markdown":"What is `E`? Also, kind of weird that product and categories implement shop - I would have thought a shop contained products grouped by categories","body":"What is <code>E</code>? Also, kind of weird that product and categories implement shop - I would have thought a shop contained products grouped by categories"}],"answers":[{"tags":[],"owner":{"account_id":27668746,"reputation":233,"user_id":21120027,"display_name":"Dulan Jayawickrama"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1691894396,"creation_date":1691894396,"answer_id":76891744,"question_id":76891626,"body_markdown":"According to the code snippet you have provided, it looks like you are applying **Generics** without a proper idea.\r\n\r\nIn this code, you need to ensure that the type you&#39;re using supports the methods you want to call. In your case, you&#39;re trying to call the `getProductId()` method on elements in a `List&lt;E&gt; productList`, where `E` is a generic type parameter. The problem is that the compiler doesn&#39;t know for sure what methods `E` supports because it&#39;s a generic placeholder.\r\n\r\nYou can try in this way:\r\n\r\nEnsure that the type `E` used in the `List&lt;E&gt; productList` actually has a method named `getProductId()`. You can specify a bound on the generic type parameter when defining your interface or class.\r\n(if your `Product` class has a `getProductId()` method, you can define your interface `IShop` with a generic type parameter that extends `Product`)\r\n\r\n    public interface IShop&lt;E extends Product&gt; {\r\n        void inputData(Scanner input, List&lt;E&gt; productList);\r\n    }\r\n\r\nLikewise, when implementing the `IShop` interface in your Product and Categories classes, you need to specify the type argument for `E`.\r\n\r\n    public class Product implements IShop&lt;Product&gt; {\r\n        // your logic\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n","title":"Java Interface Generics argument","body":"<p>According to the code snippet you have provided, it looks like you are applying <strong>Generics</strong> without a proper idea.</p>\n<p>In this code, you need to ensure that the type you're using supports the methods you want to call. In your case, you're trying to call the <code>getProductId()</code> method on elements in a <code>List&lt;E&gt; productList</code>, where <code>E</code> is a generic type parameter. The problem is that the compiler doesn't know for sure what methods <code>E</code> supports because it's a generic placeholder.</p>\n<p>You can try in this way:</p>\n<p>Ensure that the type <code>E</code> used in the <code>List&lt;E&gt; productList</code> actually has a method named <code>getProductId()</code>. You can specify a bound on the generic type parameter when defining your interface or class.\n(if your <code>Product</code> class has a <code>getProductId()</code> method, you can define your interface <code>IShop</code> with a generic type parameter that extends <code>Product</code>)</p>\n<pre><code>public interface IShop&lt;E extends Product&gt; {\n    void inputData(Scanner input, List&lt;E&gt; productList);\n}\n</code></pre>\n<p>Likewise, when implementing the <code>IShop</code> interface in your Product and Categories classes, you need to specify the type argument for <code>E</code>.</p>\n<pre><code>public class Product implements IShop&lt;Product&gt; {\n    // your logic\n}\n</code></pre>\n"}],"owner":{"account_id":28874770,"reputation":13,"user_id":22115555,"display_name":"Cao Tung"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":76891744,"answer_count":1,"score":-1,"last_activity_date":1691977170,"creation_date":1691888875,"question_id":76891626,"body_markdown":"```\r\npublic void inputData(Scanner input, List&lt;E&gt; productList) {\r\n\tSystem.out.println(&quot;Please input the product ID:&quot;);\r\n\tdo {\r\n\t\tthis.productId = input.nextLine();\r\n\t\tboolean checkId = false;\r\n\t\tif (this.productId.startsWith(&quot;P&quot;) &amp;&amp; this.productId.length() == 5) {\r\n\t\t\tif (productList.size() == 0) {\r\n\t\t\t\tbreak;\r\n\t\t\t} else {\r\n\t\t\t\tfor (int i = 0; i &lt; productList.size(); i++) {\r\n\t\t\t\t\tif (this.productId.equals(productList.get(i).getProductId())) {\r\n\t\t\t\t\t\tSystem.err.println(&quot;The inputted ID is already existed. Please try another!&quot;);\r\n\t\t\t\t\t\tcheckId = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!checkId) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tSystem.err.println(&quot;Please input the correct format of product ID(exp: P****)!&quot;);\r\n\t\t}\r\n\t} while (true);\r\n```\r\n\r\nI created an inteface class IShop and the classes Product and Categories implements Ishop. I would like to use generics type to pass method&#39;s parameters.\r\nPlease help me to explain why I cannot access getProductId() in this case.","title":"Java Interface Generics argument","body":"<pre><code>public void inputData(Scanner input, List&lt;E&gt; productList) {\n    System.out.println(&quot;Please input the product ID:&quot;);\n    do {\n        this.productId = input.nextLine();\n        boolean checkId = false;\n        if (this.productId.startsWith(&quot;P&quot;) &amp;&amp; this.productId.length() == 5) {\n            if (productList.size() == 0) {\n                break;\n            } else {\n                for (int i = 0; i &lt; productList.size(); i++) {\n                    if (this.productId.equals(productList.get(i).getProductId())) {\n                        System.err.println(&quot;The inputted ID is already existed. Please try another!&quot;);\n                        checkId = true;\n                    }\n                }\n                if (!checkId) {\n                    break;\n                }\n            }\n        } else {\n            System.err.println(&quot;Please input the correct format of product ID(exp: P****)!&quot;);\n        }\n    } while (true);\n</code></pre>\n<p>I created an inteface class IShop and the classes Product and Categories implements Ishop. I would like to use generics type to pass method's parameters.\nPlease help me to explain why I cannot access getProductId() in this case.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1691963471,"post_id":76895324,"comment_id":135558155,"body_markdown":"Please [edit] the post and format the code properly. --- Please read: [How to debug small programs (`https://ericlippert.com/`)](https://ericlippert.com/2014/03/05/how-to-debug-small-programs/)","body":"Please <a href=\"https://stackoverflow.com/posts/76895324/edit\">edit</a> the post and format the code properly. --- Please read: <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (<code>https:&#47;&#47;ericlippert.com&#47;</code>)</a>"},{"owner":{"account_id":27834272,"reputation":688,"user_id":21252090,"display_name":"Grinding For Reputation"},"score":0,"creation_date":1692017635,"post_id":76895324,"comment_id":135564713,"body_markdown":"A small note, but you don&#39;t need `System.out.println(&quot;&quot;)` you could just use `System.out.println()`","body":"A small note, but you don&#39;t need <code>System.out.println(&quot;&quot;)</code> you could just use <code>System.out.println()</code>"}],"answers":[{"comments":[{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1691963858,"post_id":76895355,"comment_id":135558191,"body_markdown":"Thank you for adding &quot;hoisting&quot; to my coding vocabulary.","body":"Thank you for adding &quot;hoisting&quot; to my coding vocabulary."},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1691966210,"post_id":76895355,"comment_id":135558344,"body_markdown":"@Bohemian [*How to Hoist a Sail*](https://youtu.be/YQTFaqRjk5o)","body":"@Bohemian <a href=\"https://youtu.be/YQTFaqRjk5o\" rel=\"nofollow noreferrer\"><i>How to Hoist a Sail</i></a>"},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1691991771,"post_id":76895355,"comment_id":135560184,"body_markdown":"fYeah I know what &quot;hoist&quot; means (flags, sails etc). I&#39;ve just never seen/heard it used in the context of code scope. It&#39;s perfect.","body":"fYeah I know what &quot;hoist&quot; means (flags, sails etc). I&#39;ve just never seen/heard it used in the context of code scope. It&#39;s perfect."}],"tags":[],"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691963490,"creation_date":1691963490,"answer_id":76895355,"question_id":76895324,"body_markdown":"Yes, in the final iteration of the loop `b` is decremented from `0` to `-1` at which point the loop ends and `b` goes out of scope. We can demonstrate this by &quot;hoisting&quot; `b`. You could also eliminate the inner loop by using [`String.repeat(int)`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#repeat(int)). Like,\r\n\r\n\tint b;\r\n\tfor (b = 3; b &gt;= 0; b--) {\r\n\t\tSystem.out.println(&quot;*&quot;.repeat(b + 1));\r\n\t}\r\n\tSystem.out.println(b);\r\n\r\nOutputs\r\n\r\n    ****\r\n    ***\r\n    **\r\n    *\r\n    -1\r\n\r\n","title":"What is the last value of b which breaks the loop? ( Is it -1 if I am not wrong?? )","body":"<p>Yes, in the final iteration of the loop <code>b</code> is decremented from <code>0</code> to <code>-1</code> at which point the loop ends and <code>b</code> goes out of scope. We can demonstrate this by &quot;hoisting&quot; <code>b</code>. You could also eliminate the inner loop by using <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#repeat(int)\" rel=\"nofollow noreferrer\"><code>String.repeat(int)</code></a>. Like,</p>\n<pre><code>int b;\nfor (b = 3; b &gt;= 0; b--) {\n    System.out.println(&quot;*&quot;.repeat(b + 1));\n}\nSystem.out.println(b);\n</code></pre>\n<p>Outputs</p>\n<pre><code>****\n***\n**\n*\n-1\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1691968848,"post_id":76895564,"comment_id":135558497,"body_markdown":"`int n = 4; IntStream.range(0, n).mapToObj(i -&gt; &quot;*&quot;.repeat(n - i)).forEach(System.out::println);`","body":"<code>int n = 4; IntStream.range(0, n).mapToObj(i -&gt; &quot;*&quot;.repeat(n - i)).forEach(System.out::println);</code>"},{"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"score":0,"creation_date":1691968923,"post_id":76895564,"comment_id":135558505,"body_markdown":"@ElliottFrisch I think this is too difficult to him","body":"@ElliottFrisch I think this is too difficult to him"},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1691968982,"post_id":76895564,"comment_id":135558509,"body_markdown":"That&#39;s why I just made it a comment, instead of covering it in my answer. But it is nicely concise.","body":"That&#39;s why I just made it a comment, instead of covering it in my answer. But it is nicely concise."}],"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691968654,"creation_date":1691968654,"answer_id":76895564,"question_id":76895324,"body_markdown":"`0\r\n`for (&lt;A&gt;; &lt;B&gt;; &lt;C&gt;)`\r\n\r\n - **A** - set initial value (do it once before start)\r\n - **B** - check condition to continue (do it before each iteration; even before the first one)\r\n - **C** - set new value (do it after each iteration)\r\n\r\nSo your condition is `b &gt;= 0`, indeed in case you do not have `brake`, so only one way to finish a loop is when `b &lt; 0`. \r\n\r\n---\r\n**P.S.** Why don&#39;t you use normal iteration: from the `0` to the `b`. It should be more intuitive.\r\n```java\r\npublic static void foo(int width) {\r\n    for (int i = 0; i &lt; width; i++) {\r\n        for (int j = 0; j &lt; width - i; j++)\r\n            System.out.print(&#39;*&#39;);\r\n\r\n        System.out.println();\r\n    }\r\n}\r\n```\r\nOutput:\r\n```\r\n****\r\n***\r\n**\r\n*\r\n```","title":"What is the last value of b which breaks the loop? ( Is it -1 if I am not wrong?? )","body":"<p><code>0 </code>for (; ; )`</p>\n<ul>\n<li><strong>A</strong> - set initial value (do it once before start)</li>\n<li><strong>B</strong> - check condition to continue (do it before each iteration; even before the first one)</li>\n<li><strong>C</strong> - set new value (do it after each iteration)</li>\n</ul>\n<p>So your condition is <code>b &gt;= 0</code>, indeed in case you do not have <code>brake</code>, so only one way to finish a loop is when <code>b &lt; 0</code>.</p>\n<hr />\n<p><strong>P.S.</strong> Why don't you use normal iteration: from the <code>0</code> to the <code>b</code>. It should be more intuitive.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void foo(int width) {\n    for (int i = 0; i &lt; width; i++) {\n        for (int j = 0; j &lt; width - i; j++)\n            System.out.print('*');\n\n        System.out.println();\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>****\n***\n**\n*\n</code></pre>\n"}],"owner":{"account_id":17354628,"reputation":3,"user_id":12572358,"display_name":"Swapnil Mishra"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691976561,"creation_date":1691962664,"question_id":76895324,"body_markdown":"```\r\nfor (int b = 3; b &gt;= 0; b--) {\r\n    System.out.println(&quot;&quot;);\r\n\r\n    for (int a = 0; a &lt;= b; a++) {\r\n        System.out.print(&quot;*&quot;);\r\n    }\r\n}\r\n```\r\n\r\nIt is an asterisk pattern, I understand this code and as per my understanding that last value of b should be -1 so that the final outer loop breaks and stops the printing of the pattern. I even tried to print the value of b but understood that it won&#39;t work due to the scope limitations. Can someone please confirm me the value of final value of b here in this code. ","title":"What is the last value of b which breaks the loop? ( Is it -1 if I am not wrong?? )","body":"<pre><code>for (int b = 3; b &gt;= 0; b--) {\n    System.out.println(&quot;&quot;);\n\n    for (int a = 0; a &lt;= b; a++) {\n        System.out.print(&quot;*&quot;);\n    }\n}\n</code></pre>\n<p>It is an asterisk pattern, I understand this code and as per my understanding that last value of b should be -1 so that the final outer loop breaks and stops the printing of the pattern. I even tried to print the value of b but understood that it won't work due to the scope limitations. Can someone please confirm me the value of final value of b here in this code.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9884,"page":250,"page_size":100}
