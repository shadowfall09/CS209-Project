{"items":[{"tags":["java","spring-boot","authentication","kerberos","parallelstream"],"answers":[{"tags":[],"owner":{"account_id":23775056,"reputation":11,"user_id":17788633,"display_name":"Hao Deng"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1670898332,"creation_date":1670898293,"answer_id":74779343,"question_id":74779261,"body_markdown":"Maybe you can cache the ticket and the token on Kerberos&#39; server-side. ","title":"How to achieve Parallel Authentication using Kerberos?","body":"<p>Maybe you can cache the ticket and the token on Kerberos' server-side.</p>\n"},{"tags":[],"owner":{"account_id":20740,"reputation":13570,"user_id":49849,"display_name":"user1686"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671272393,"creation_date":1671272393,"answer_id":74833322,"question_id":74779261,"body_markdown":"&gt; When I initially tried to make these calls as parallel, I understood that the Kerberos Ticket and the Token will be invalidated when initiating the parallel request as the previous ticket will no longer be valid, but I would like to listen from other experts here if there&#39;s any other way that we can achieve this.\r\n\r\nNo, the _ticket_ is multiple-use and never invalidated (until it reaches the ~10h expiry) &amp;ndash; you can see in `klist` that the same ticket stays around across multiple runs. Only the _token_ built out of a ticket + verifier is single-use, but the application can freely create as many tokens from a single cached ticket as it wants.\r\n\r\nWhen using e.g. HTTP, normally you (or the HTTP client library) would call the GSSAPI or Kerberos library to start a new &quot;security context&quot; and get a new token immediately before every HTTP request. It&#39;s fine to start multiple GSSAPI contexts and get multiple tokens in parallel; the GSSAPI/Kerberos library will take care of acquiring and caching the service ticket.","title":"How to achieve Parallel Authentication using Kerberos?","body":"<blockquote>\n<p>When I initially tried to make these calls as parallel, I understood that the Kerberos Ticket and the Token will be invalidated when initiating the parallel request as the previous ticket will no longer be valid, but I would like to listen from other experts here if there's any other way that we can achieve this.</p>\n</blockquote>\n<p>No, the <em>ticket</em> is multiple-use and never invalidated (until it reaches the ~10h expiry) – you can see in <code>klist</code> that the same ticket stays around across multiple runs. Only the <em>token</em> built out of a ticket + verifier is single-use, but the application can freely create as many tokens from a single cached ticket as it wants.</p>\n<p>When using e.g. HTTP, normally you (or the HTTP client library) would call the GSSAPI or Kerberos library to start a new &quot;security context&quot; and get a new token immediately before every HTTP request. It's fine to start multiple GSSAPI contexts and get multiple tokens in parallel; the GSSAPI/Kerberos library will take care of acquiring and caching the service ticket.</p>\n"}],"owner":{"account_id":13606034,"reputation":101,"user_id":9815155,"display_name":"Mohamed Yusuff"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1671272393,"creation_date":1670897344,"question_id":74779261,"body_markdown":"I have a requirement to make multiple independent micro service calls in parallel in Spring Boot (Java) in order to address the performance issue in making sequential calls and these micro services are authenticated using Kerberos.\r\n\r\nWhen I initially tried to make these calls as parallel, I understood that the Kerberos Ticket and the Token will be invalidated when initiating the parallel request as the previous ticket will no longer be valid, but I would like to listen from other experts here if there&#39;s any other way that we can achieve this.","title":"How to achieve Parallel Authentication using Kerberos?","body":"<p>I have a requirement to make multiple independent micro service calls in parallel in Spring Boot (Java) in order to address the performance issue in making sequential calls and these micro services are authenticated using Kerberos.</p>\n<p>When I initially tried to make these calls as parallel, I understood that the Kerberos Ticket and the Token will be invalidated when initiating the parallel request as the previous ticket will no longer be valid, but I would like to listen from other experts here if there's any other way that we can achieve this.</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":27141954,"reputation":1,"user_id":20682697,"display_name":"Yosseuf"},"score":0,"creation_date":1671216891,"post_id":74828591,"comment_id":132059241,"body_markdown":"Done a little research found out that All I had to do was just using @Embedded Anotation.","body":"Done a little research found out that All I had to do was just using @Embedded Anotation."}],"answers":[{"tags":[],"owner":{"account_id":480617,"reputation":2495,"user_id":893952,"accept_rate":57,"display_name":"Harry Coder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671227122,"creation_date":1671227122,"answer_id":74830040,"question_id":74828591,"body_markdown":"You can use: `@Embeddable` and `@Embedded`. Use this [link][1] for more details.\r\n\r\n\r\n  [1]: https://www.baeldung.com/jpa-embedded-embeddable","title":"How to turn an object properties into coulmns in spring jpa","body":"<p>You can use: <code>@Embeddable</code> and <code>@Embedded</code>. Use this <a href=\"https://www.baeldung.com/jpa-embedded-embeddable\" rel=\"nofollow noreferrer\">link</a> for more details.</p>\n"},{"tags":[],"owner":{"account_id":14962947,"reputation":132,"user_id":10802150,"display_name":"mingle08"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671249203,"creation_date":1671249203,"answer_id":74831676,"question_id":74828591,"body_markdown":"if class MsgDetail has a field: Msg, then add @Entity and @Table on Msg.","title":"How to turn an object properties into coulmns in spring jpa","body":"<p>if class MsgDetail has a field: Msg, then add @Entity and @Table on Msg.</p>\n"}],"owner":{"account_id":27141954,"reputation":1,"user_id":20682697,"display_name":"Yosseuf"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1671272301,"creation_date":1671216143,"question_id":74828591,"body_markdown":"So I have an entity class where one of its properties is another object. How can I make spring jpa turn that class&#39;s properties into columns just like the properties of my entity class?\r\n\r\nI have tried to make that object&#39;s class into an entity but didn&#39;t know how I can include it in my first class.","title":"How to turn an object properties into coulmns in spring jpa","body":"<p>So I have an entity class where one of its properties is another object. How can I make spring jpa turn that class's properties into columns just like the properties of my entity class?</p>\n<p>I have tried to make that object's class into an entity but didn't know how I can include it in my first class.</p>\n"},{"tags":["java","lambda","foreach"],"comments":[{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":1,"creation_date":1532872943,"post_id":51581061,"comment_id":90127423,"body_markdown":"Why woud you loop if you don&#39;t do anything with the other elements? What do you **actually** want to achieve? Note that forEach() is not the only way to loop over a list. Use what is best for your use-case.","body":"Why woud you loop if you don&#39;t do anything with the other elements? What do you <b>actually</b> want to achieve? Note that forEach() is not the only way to loop over a list. Use what is best for your use-case."}],"answers":[{"tags":[],"owner":{"account_id":7743155,"reputation":55371,"user_id":5862071,"accept_rate":86,"display_name":"Ousmane D."},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1532873661,"creation_date":1532873147,"answer_id":51581110,"question_id":51581061,"body_markdown":"It seems like you&#39;re asking, how to print the first object but iterate over the remaining elements and do some other logic with them, in which case you can go with:\r\n\r\n    if(!userList.isEmpty()) System.out.println(userList.get(0));\r\n    userList.subList(1, userList.size()).forEach(user -&gt; ...);\r\n","title":"Java List forEach Lambda expressional - first elements and loop through all elements","body":"<p>It seems like you're asking, how to print the first object but iterate over the remaining elements and do some other logic with them, in which case you can go with:</p>\n\n<pre><code>if(!userList.isEmpty()) System.out.println(userList.get(0));\nuserList.subList(1, userList.size()).forEach(user -&gt; ...);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9489110,"reputation":2186,"user_id":7054574,"display_name":"Anddo"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1532876561,"creation_date":1532873186,"answer_id":51581121,"question_id":51581061,"body_markdown":"If you want to apply certain logic to first user and continue looping with others then you might use condition to check the first object is the current or not. As I understand from your question, this is what you want \r\n\r\n    userList.forEach(user -&gt; {\r\n    \tif (userList.get(0) == user)\r\n    \t\tSystem.out.println(&quot;This is user with index 0&quot;);\r\n        System.out.println(user + &quot; All users including 0&quot;);\r\n    });\r\n\r\nAs Aomine said in the comments, this might not be great solution for checking the first element of the list each time and might not work correctly if the same user object is repeated on the list so better to separate the logic like this\r\n\r\n    // Do something with the first user only\r\n    if(!userList.isEmpty())\r\n    \tSystem.out.println(userList.get(0));\r\n    \r\n    // Do some stuff for all users in the list except the first one\r\n    userList.subList(1, userList.size()).forEach(user -&gt; {\r\n        \tSystem.out.println(user + &quot; All users without 0&quot;);\r\n    );\r\n    \r\n    // Do some stuff for all users in the list\r\n    userList.forEach(user -&gt; {\r\n        \tSystem.out.println(user + &quot; All users&quot;);\r\n    );\r\n\r\nAnother approach using stream\r\n\r\n    // Dealing with first user only\r\n    if (!userList.isEmpty()) {\r\n        System.out.println(&quot;this is first user: &quot; + userList.get(0));\r\n    }\r\n    // using stream skipping the first element\r\n    userList.stream().skip(1).forEach(user -&gt; {\r\n        System.out.println(user);\r\n    });\r\n\r\nAlso you might use iterator approach\r\n\r\n    // getting the iterator from the list\r\n    Iterator&lt;String&gt; users = userList.iterator();\r\n    \r\n    // the first user\r\n    if(users.hasNext())\r\n        System.out.println(&quot;this is first user :&quot; + users.next());\r\n    \r\n    // the rest of the users\r\n    users.forEachRemaining(user -&gt; {\r\n        System.out.println(user);\r\n    });","title":"Java List forEach Lambda expressional - first elements and loop through all elements","body":"<p>If you want to apply certain logic to first user and continue looping with others then you might use condition to check the first object is the current or not. As I understand from your question, this is what you want </p>\n\n<pre><code>userList.forEach(user -&gt; {\n    if (userList.get(0) == user)\n        System.out.println(\"This is user with index 0\");\n    System.out.println(user + \" All users including 0\");\n});\n</code></pre>\n\n<p>As Aomine said in the comments, this might not be great solution for checking the first element of the list each time and might not work correctly if the same user object is repeated on the list so better to separate the logic like this</p>\n\n<pre><code>// Do something with the first user only\nif(!userList.isEmpty())\n    System.out.println(userList.get(0));\n\n// Do some stuff for all users in the list except the first one\nuserList.subList(1, userList.size()).forEach(user -&gt; {\n        System.out.println(user + \" All users without 0\");\n);\n\n// Do some stuff for all users in the list\nuserList.forEach(user -&gt; {\n        System.out.println(user + \" All users\");\n);\n</code></pre>\n\n<p>Another approach using stream</p>\n\n<pre><code>// Dealing with first user only\nif (!userList.isEmpty()) {\n    System.out.println(\"this is first user: \" + userList.get(0));\n}\n// using stream skipping the first element\nuserList.stream().skip(1).forEach(user -&gt; {\n    System.out.println(user);\n});\n</code></pre>\n\n<p>Also you might use iterator approach</p>\n\n<pre><code>// getting the iterator from the list\nIterator&lt;String&gt; users = userList.iterator();\n\n// the first user\nif(users.hasNext())\n    System.out.println(\"this is first user :\" + users.next());\n\n// the rest of the users\nusers.forEachRemaining(user -&gt; {\n    System.out.println(user);\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9671656,"reputation":2721,"user_id":7176382,"display_name":"Shubhendu Pramanik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1532873223,"creation_date":1532873223,"answer_id":51581125,"question_id":51581061,"body_markdown":"Here&#39;s the solution using `for-each`\r\n\r\n    List&lt;String&gt; userList = Arrays.asList(&quot;2&quot;,&quot;3&quot;,&quot;4&quot;);\r\n    \r\n            IntStream.range(0, userList.size()).forEach(i -&gt; {\r\n                if (i == 0)\r\n                    System.out.println(userList.get(i));\r\n                else {\r\n                    System.out.println(&quot;do other stuff&quot;);\r\n                }\r\n            });\r\n\r\n***O/P:***\r\n\r\n    2\r\n    do other stuff\r\n    do other stuff","title":"Java List forEach Lambda expressional - first elements and loop through all elements","body":"<p>Here's the solution using <code>for-each</code></p>\n\n<pre><code>List&lt;String&gt; userList = Arrays.asList(\"2\",\"3\",\"4\");\n\n        IntStream.range(0, userList.size()).forEach(i -&gt; {\n            if (i == 0)\n                System.out.println(userList.get(i));\n            else {\n                System.out.println(\"do other stuff\");\n            }\n        });\n</code></pre>\n\n<p><strong><em>O/P:</em></strong></p>\n\n<pre><code>2\ndo other stuff\ndo other stuff\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1874713,"reputation":518,"user_id":1696156,"accept_rate":67,"display_name":"rlwheeler"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1532873477,"creation_date":1532873477,"answer_id":51581171,"question_id":51581061,"body_markdown":"This should work\r\n\r\n    userList.foreach(user -&gt; {\r\n        If(user == userList.get(0){\r\n            System.out.println(user)\r\n        }\r\n    })","title":"Java List forEach Lambda expressional - first elements and loop through all elements","body":"<p>This should work</p>\n\n<pre><code>userList.foreach(user -&gt; {\n    If(user == userList.get(0){\n        System.out.println(user)\n    }\n})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7743155,"reputation":55371,"user_id":5862071,"accept_rate":86,"display_name":"Ousmane D."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1532874849,"creation_date":1532874849,"answer_id":51581357,"question_id":51581061,"body_markdown":"Here&#39;s another solution in JDK9 since you&#39;re into lambda expressions:\r\n\r\n    IntStream.range(0, userList.size())\r\n             .peek(i -&gt; {if(i == 0) System.out.println(userList.get(i));})\r\n             .dropWhile(i -&gt; i == 0)\r\n             .forEach(i -&gt; /* some other logic here */ );\r\n\r\nPersonally, and for production code, I&#39;d go with [my other answer][1] but if you&#39;re just having fun with lambda then the above is another approach you could take.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/51581061/java-list-foreach-lamba-expressional-first-elements-and-loop-through-all-eleme/51581110#51581110","title":"Java List forEach Lambda expressional - first elements and loop through all elements","body":"<p>Here's another solution in JDK9 since you're into lambda expressions:</p>\n\n<pre><code>IntStream.range(0, userList.size())\n         .peek(i -&gt; {if(i == 0) System.out.println(userList.get(i));})\n         .dropWhile(i -&gt; i == 0)\n         .forEach(i -&gt; /* some other logic here */ );\n</code></pre>\n\n<p>Personally, and for production code, I'd go with <a href=\"https://stackoverflow.com/questions/51581061/java-list-foreach-lamba-expressional-first-elements-and-loop-through-all-eleme/51581110#51581110\">my other answer</a> but if you're just having fun with lambda then the above is another approach you could take.</p>\n"}],"owner":{"account_id":7212490,"reputation":1864,"user_id":5506061,"accept_rate":64,"display_name":"Krish"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1521,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":51581121,"answer_count":5,"score":6,"last_activity_date":1671272154,"creation_date":1532872798,"question_id":51581061,"body_markdown":"I can able to loop through all elements of List like below:\r\n\r\n    userList.forEach(user -&gt; {\r\n        System.out.println(user);\r\n    });\r\n\r\nI want to print the user object only for first element but I should loop for all elements in list.\r\nHow to achieve that ?\r\n\r\n\r\n\r\n","title":"Java List forEach Lambda expressional - first elements and loop through all elements","body":"<p>I can able to loop through all elements of List like below:</p>\n\n<pre><code>userList.forEach(user -&gt; {\n    System.out.println(user);\n});\n</code></pre>\n\n<p>I want to print the user object only for first element but I should loop for all elements in list.\nHow to achieve that ?</p>\n"},{"tags":["java","javafx","compilation","graalvm-native-image"],"comments":[{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":5,"creation_date":1671266159,"post_id":74832753,"comment_id":132066132,"body_markdown":"You should look at jpackage for generating self-contained applications. But in its simplest form, you can use jlink to generate a custom runtime image (including an equivalent of the JRE). See also https://openjfx.io/openjfx-docs/#modular.","body":"You should look at jpackage for generating self-contained applications. But in its simplest form, you can use jlink to generate a custom runtime image (including an equivalent of the JRE). See also <a href=\"https://openjfx.io/openjfx-docs/#modular\" rel=\"nofollow noreferrer\">openjfx.io/openjfx-docs/#modular</a>."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":5,"creation_date":1671266821,"post_id":74832753,"comment_id":132066198,"body_markdown":"Take a look at the &quot;Packaging&quot; section of the FAQs in the [JavaFX tag wiki](https://stackoverflow.com/tags/javafx/info). The [jpackage tool](https://docs.oracle.com/en/java/javase/17/jpackage/packaging-overview.html#GUID-E0966C49-ABBB-46A2-8DF7-1D3F96640F05) may be what you&#39;re looking for.","body":"Take a look at the &quot;Packaging&quot; section of the FAQs in the <a href=\"https://stackoverflow.com/tags/javafx/info\">JavaFX tag wiki</a>. The <a href=\"https://docs.oracle.com/en/java/javase/17/jpackage/packaging-overview.html#GUID-E0966C49-ABBB-46A2-8DF7-1D3F96640F05\" rel=\"nofollow noreferrer\">jpackage tool</a> may be what you&#39;re looking for."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":1,"creation_date":1671400862,"post_id":74832753,"comment_id":132086133,"body_markdown":"The powers to be got so caught up in the modular stuff that they forgot simplicity. We got use to just focusing on the logic involved in our code. Lately, it&#39;s has been more difficult to get projects running and to create executables than writing code.","body":"The powers to be got so caught up in the modular stuff that they forgot simplicity. We got use to just focusing on the logic involved in our code. Lately, it&#39;s has been more difficult to get projects running and to create executables than writing code."}],"answers":[{"tags":[],"owner":{"account_id":5347179,"reputation":10433,"user_id":4262407,"accept_rate":40,"display_name":"mipa"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1671271970,"creation_date":1671271970,"answer_id":74833289,"question_id":74832753,"body_markdown":"I understand your frustration because properly packaging JavaFX applications is made mored complicated than it should be. There are a lot of tools that you have to combine which also leave much room for errors. The main problem is that the official OpenJFX Maven plugin (https://github.com/openjfx/javafx-maven-plugin) still doesn&#39;t have a packaging option. It has a Jlink goal but that does not help much in practice because it requires a fully modularised application which I have not yet seen in the wild for any serious project because many important libraries are not yet modular (and probably never will be).\r\n\r\nTogether with Dirk I have therefore created a demo project which combines jdeps, jlink and jpackage in a way that it can also handle non-modular projects and build an application and installer for all desktop platforms. Maybe you want to have a look at this repo:\r\nhttps://github.com/dlemmermann/JPackageScriptFX\r\n\r\nYou could also use Gluons GluonFX plugin (https://github.com/gluonhq/gluonfx-maven-plugin) which does contain a packaging option but that internally uses GraalVM native-image which requires some extra care to get it going and I personally never felt the need for this on desktop. It&#39;s the best option though if you also want to go mobile.","title":"How to distribute java programs?","body":"<p>I understand your frustration because properly packaging JavaFX applications is made mored complicated than it should be. There are a lot of tools that you have to combine which also leave much room for errors. The main problem is that the official OpenJFX Maven plugin (<a href=\"https://github.com/openjfx/javafx-maven-plugin\" rel=\"noreferrer\">https://github.com/openjfx/javafx-maven-plugin</a>) still doesn't have a packaging option. It has a Jlink goal but that does not help much in practice because it requires a fully modularised application which I have not yet seen in the wild for any serious project because many important libraries are not yet modular (and probably never will be).</p>\n<p>Together with Dirk I have therefore created a demo project which combines jdeps, jlink and jpackage in a way that it can also handle non-modular projects and build an application and installer for all desktop platforms. Maybe you want to have a look at this repo:\n<a href=\"https://github.com/dlemmermann/JPackageScriptFX\" rel=\"noreferrer\">https://github.com/dlemmermann/JPackageScriptFX</a></p>\n<p>You could also use Gluons GluonFX plugin (<a href=\"https://github.com/gluonhq/gluonfx-maven-plugin\" rel=\"noreferrer\">https://github.com/gluonhq/gluonfx-maven-plugin</a>) which does contain a packaging option but that internally uses GraalVM native-image which requires some extra care to get it going and I personally never felt the need for this on desktop. It's the best option though if you also want to go mobile.</p>\n"}],"owner":{"account_id":22458671,"reputation":49,"user_id":16661679,"display_name":"Alex"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":232,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":1,"score":4,"last_activity_date":1671271970,"creation_date":1671265876,"question_id":74832753,"body_markdown":"I started developing applications in Java + JavaFx a little over a month ago.\r\n\r\nI was able to make a couple of beautiful animated applications.\r\nWhen compiling to a jar-file, I ran into the following problems:\r\n- Java17 doesn&#39;t run with jre which is for normal people, https://www.java.com/en/download/ , this begs the first question, why can&#39;t I develop on newer versions of java jdk without pain, why should I go down to version 8 and lose a lot of features\r\n\r\n- Also my javafx jars didn&#39;t want to run at all without any console messages (javafx unnamed .... @729347c ) and wouldn&#39;t run on double click. There were also messages like No runtime for favafx blah blah blah.\r\n  I solved it by installing liberica jdk https://bell-sw.com/pages/downloads/#/java-17-lts. Now I can successfully compile jar files and run them by double clicking\r\n\r\n- I read right there, in a bunch of topics, that Oracle now means that I have to deliver to the clients the required version of jre (Jre17), the question is how can I do this. Newer versions of Lauch4j removed the ability to package jar along with jre. But I don&#39;t like Lauch4j either.\r\n\r\n- Later I learned about such thing as native-image in GraalVm. I tried compiling a jar file with javafx and it didn&#39;t work for me in any way. The program just crashed. And I found on the BellSoft website the package I needed https://bell-sw.com/pages/downloads/native-image-kit/#/nik-22-17, which has a configured graalvm. Thinking that these gods solved all my problems again, I compiled my jar file into an exe (yes, I changed the jdk in the environment paths). And Now I am getting Segment Fault message. But this is already better, at least it starts, although it crashes immediately after launch. Inside, by the way, the code of the usual default javafx program from Inteliji with the Hello javafx button\r\n\r\nIn general, I painted all the problems that I encountered. And I have 2 questions\r\n- How can I distribute my javafx programs with my own jre like big companies do?\r\n- How to compile javafx program to native-image?\r\n\r\nMy environment:\r\n- Windows 10\r\n- Liberica Native Image Kit 22.3.0+2 (java17 jdk)\r\n- Latest version of Inteliji\r\n\r\nI will also clarify that I do not want to force clients to download anything (except perhaps https://www.java.com/en/download/, but no more), I want a completely native program\r\n\r\nSorry if it&#39;s messy\r\n\r\n\r\neverything I tried and did is described above","title":"How to distribute java programs?","body":"<p>I started developing applications in Java + JavaFx a little over a month ago.</p>\n<p>I was able to make a couple of beautiful animated applications.\nWhen compiling to a jar-file, I ran into the following problems:</p>\n<ul>\n<li><p>Java17 doesn't run with jre which is for normal people, <a href=\"https://www.java.com/en/download/\" rel=\"nofollow noreferrer\">https://www.java.com/en/download/</a> , this begs the first question, why can't I develop on newer versions of java jdk without pain, why should I go down to version 8 and lose a lot of features</p>\n</li>\n<li><p>Also my javafx jars didn't want to run at all without any console messages (javafx unnamed .... @729347c ) and wouldn't run on double click. There were also messages like No runtime for favafx blah blah blah.\nI solved it by installing liberica jdk <a href=\"https://bell-sw.com/pages/downloads/#/java-17-lts\" rel=\"nofollow noreferrer\">https://bell-sw.com/pages/downloads/#/java-17-lts</a>. Now I can successfully compile jar files and run them by double clicking</p>\n</li>\n<li><p>I read right there, in a bunch of topics, that Oracle now means that I have to deliver to the clients the required version of jre (Jre17), the question is how can I do this. Newer versions of Lauch4j removed the ability to package jar along with jre. But I don't like Lauch4j either.</p>\n</li>\n<li><p>Later I learned about such thing as native-image in GraalVm. I tried compiling a jar file with javafx and it didn't work for me in any way. The program just crashed. And I found on the BellSoft website the package I needed <a href=\"https://bell-sw.com/pages/downloads/native-image-kit/#/nik-22-17\" rel=\"nofollow noreferrer\">https://bell-sw.com/pages/downloads/native-image-kit/#/nik-22-17</a>, which has a configured graalvm. Thinking that these gods solved all my problems again, I compiled my jar file into an exe (yes, I changed the jdk in the environment paths). And Now I am getting Segment Fault message. But this is already better, at least it starts, although it crashes immediately after launch. Inside, by the way, the code of the usual default javafx program from Inteliji with the Hello javafx button</p>\n</li>\n</ul>\n<p>In general, I painted all the problems that I encountered. And I have 2 questions</p>\n<ul>\n<li>How can I distribute my javafx programs with my own jre like big companies do?</li>\n<li>How to compile javafx program to native-image?</li>\n</ul>\n<p>My environment:</p>\n<ul>\n<li>Windows 10</li>\n<li>Liberica Native Image Kit 22.3.0+2 (java17 jdk)</li>\n<li>Latest version of Inteliji</li>\n</ul>\n<p>I will also clarify that I do not want to force clients to download anything (except perhaps <a href=\"https://www.java.com/en/download/\" rel=\"nofollow noreferrer\">https://www.java.com/en/download/</a>, but no more), I want a completely native program</p>\n<p>Sorry if it's messy</p>\n<p>everything I tried and did is described above</p>\n"},{"tags":["java","jackson","yaml","snakeyaml"],"answers":[{"tags":[],"owner":{"account_id":7953408,"reputation":1827,"user_id":6003541,"display_name":"Rafał Sokalski"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671271901,"creation_date":1671271224,"answer_id":74833206,"question_id":74832841,"body_markdown":"As far as I know SnakeYAML uses reflection inside, so because of that you need to have property names in your classes equal to property name in your YAML file.\r\n\r\nSo in your case if you have yaml file with snake case you would have to use property name in your classes with snake case.\r\n\r\nSee example below:\r\n\r\nCustomer.java\r\n\r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class Customer {\r\n        private String first_name;\r\n        private String last_name;\r\n        private Integer age;\r\n    }\r\n\r\n\r\nOrder.java\r\n\r\n\r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class Order {\r\n        private List&lt;Customer&gt; customers;\r\n    }\r\n\r\n\r\n\r\nMain.java\r\n\r\n    public class Main {\r\n    \r\n        @SneakyThrows\r\n        public static void main(String[] args) {\r\n            InputStream inputStream = Main.class.getClassLoader().getResourceAsStream(&quot;jackson.yaml&quot;);\r\n    \r\n            Yaml yaml = new Yaml();\r\n            Order order = yaml.loadAs(inputStream, Order.class);\r\n            System.out.println(order);\r\n        }\r\n    }\r\n\r\n\r\njackson.yaml\r\n\r\n\r\n    customers:\r\n      - first_name: &quot;John&quot;\r\n        last_name: &quot;Doe&quot;\r\n        age: 52\r\n\r\n\r\n\r\n\r\nOutput:\r\n\r\n    Order(customers=[Customer(first_name=John, last_name=Doe, age=52)])\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n**EDIT:**\r\n\r\n\r\nThere is also an option to define TypeDescriptors which tells SnakeYAML how to map fields. See example below:\r\n\r\n\r\n    public class Main {\r\n    \r\n        @SneakyThrows\r\n        public static void main(String[] args) {\r\n            InputStream inputStream = Main.class.getClassLoader().getResourceAsStream(&quot;jackson.yaml&quot;);\r\n    \r\n            TypeDescription customerDescriptor = new TypeDescription(Customer.class);\r\n            customerDescriptor.substituteProperty(&quot;first_name&quot;, String.class, &quot;getFirstName&quot;, &quot;setFirstName&quot;);\r\n            customerDescriptor.substituteProperty(&quot;last_name&quot;, String.class, &quot;getLastName&quot;, &quot;setLastName&quot;);\r\n            customerDescriptor.setExcludes(&quot;firstName&quot;, &quot;lastName&quot;);\r\n    \r\n            Constructor constructor = new Constructor(Customer.class);\r\n            Representer representer = new Representer(new DumperOptions());\r\n    \r\n            constructor.addTypeDescription(customerDescriptor);\r\n            representer.addTypeDescription(customerDescriptor);\r\n    \r\n            Yaml yaml = new Yaml(constructor, representer);\r\n            Order order = yaml.loadAs(inputStream, Order.class);\r\n            System.out.println(order);\r\n        }\r\n    }\r\n\r\n\r\njackson.yaml\r\n\r\n    customers:\r\n      - first_name: &quot;John&quot;\r\n        last_name: &quot;Doe&quot;\r\n        age: 52\r\n\r\n\r\nCustomer.java\r\n\r\n\r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class Customer {\r\n        private String firstName;\r\n        private String lastName;\r\n        private Integer age;\r\n    }\r\n\r\n\r\n\r\nOutput:\r\n\r\nOrder(customers=[Customer(firstName=John, lastName=Doe, age=52)])\r\n","title":"How to parse snake_case properties in SnakeYAML","body":"<p>As far as I know SnakeYAML uses reflection inside, so because of that you need to have property names in your classes equal to property name in your YAML file.</p>\n<p>So in your case if you have yaml file with snake case you would have to use property name in your classes with snake case.</p>\n<p>See example below:</p>\n<p>Customer.java</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Customer {\n    private String first_name;\n    private String last_name;\n    private Integer age;\n}\n</code></pre>\n<p>Order.java</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Order {\n    private List&lt;Customer&gt; customers;\n}\n</code></pre>\n<p>Main.java</p>\n<pre><code>public class Main {\n\n    @SneakyThrows\n    public static void main(String[] args) {\n        InputStream inputStream = Main.class.getClassLoader().getResourceAsStream(&quot;jackson.yaml&quot;);\n\n        Yaml yaml = new Yaml();\n        Order order = yaml.loadAs(inputStream, Order.class);\n        System.out.println(order);\n    }\n}\n</code></pre>\n<p>jackson.yaml</p>\n<pre><code>customers:\n  - first_name: &quot;John&quot;\n    last_name: &quot;Doe&quot;\n    age: 52\n</code></pre>\n<p>Output:</p>\n<pre><code>Order(customers=[Customer(first_name=John, last_name=Doe, age=52)])\n</code></pre>\n<p><strong>EDIT:</strong></p>\n<p>There is also an option to define TypeDescriptors which tells SnakeYAML how to map fields. See example below:</p>\n<pre><code>public class Main {\n\n    @SneakyThrows\n    public static void main(String[] args) {\n        InputStream inputStream = Main.class.getClassLoader().getResourceAsStream(&quot;jackson.yaml&quot;);\n\n        TypeDescription customerDescriptor = new TypeDescription(Customer.class);\n        customerDescriptor.substituteProperty(&quot;first_name&quot;, String.class, &quot;getFirstName&quot;, &quot;setFirstName&quot;);\n        customerDescriptor.substituteProperty(&quot;last_name&quot;, String.class, &quot;getLastName&quot;, &quot;setLastName&quot;);\n        customerDescriptor.setExcludes(&quot;firstName&quot;, &quot;lastName&quot;);\n\n        Constructor constructor = new Constructor(Customer.class);\n        Representer representer = new Representer(new DumperOptions());\n\n        constructor.addTypeDescription(customerDescriptor);\n        representer.addTypeDescription(customerDescriptor);\n\n        Yaml yaml = new Yaml(constructor, representer);\n        Order order = yaml.loadAs(inputStream, Order.class);\n        System.out.println(order);\n    }\n}\n</code></pre>\n<p>jackson.yaml</p>\n<pre><code>customers:\n  - first_name: &quot;John&quot;\n    last_name: &quot;Doe&quot;\n    age: 52\n</code></pre>\n<p>Customer.java</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Customer {\n    private String firstName;\n    private String lastName;\n    private Integer age;\n}\n</code></pre>\n<p>Output:</p>\n<p>Order(customers=[Customer(firstName=John, lastName=Doe, age=52)])</p>\n"}],"owner":{"account_id":1813580,"reputation":431,"user_id":1649163,"display_name":"mgramin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":562,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74833206,"answer_count":1,"score":0,"last_activity_date":1671271901,"creation_date":1671266991,"question_id":74832841,"body_markdown":"Jackson provides a dead simple way to parse camel_case properties. For example:\r\n\r\njackson.yaml with snake_case properties:\r\n```\r\ncustomers:\r\n  - first_name: &quot;John&quot;\r\n    last_name: &quot;Doe&quot;\r\n    age: 52\r\n```\r\n\r\nCode for parse:\r\n```\r\nObjectMapper objectMapper = new ObjectMapper(new YAMLFactory());\r\nobjectMapper.setPropertyNamingStrategy(PropertyNamingStrategies.SNAKE_CASE);\r\nInputStream inputStream = Main.class.getClassLoader().getResourceAsStream(&quot;jackson.yaml&quot;);\r\nOrders orders = objectMapper.readValue(inputStream, Orders.class);\r\n```\r\n\r\nBut is there something similar in SnakeYaml (such as `PropertyNamingStrategies.SNAKE_CASE` option) ?\r\n\r\n\r\nPS\r\nFor now, the only way I&#39;ve found is to use the `@YamlProperty` annotation on each property separately","title":"How to parse snake_case properties in SnakeYAML","body":"<p>Jackson provides a dead simple way to parse camel_case properties. For example:</p>\n<p>jackson.yaml with snake_case properties:</p>\n<pre><code>customers:\n  - first_name: &quot;John&quot;\n    last_name: &quot;Doe&quot;\n    age: 52\n</code></pre>\n<p>Code for parse:</p>\n<pre><code>ObjectMapper objectMapper = new ObjectMapper(new YAMLFactory());\nobjectMapper.setPropertyNamingStrategy(PropertyNamingStrategies.SNAKE_CASE);\nInputStream inputStream = Main.class.getClassLoader().getResourceAsStream(&quot;jackson.yaml&quot;);\nOrders orders = objectMapper.readValue(inputStream, Orders.class);\n</code></pre>\n<p>But is there something similar in SnakeYaml (such as <code>PropertyNamingStrategies.SNAKE_CASE</code> option) ?</p>\n<p>PS\nFor now, the only way I've found is to use the <code>@YamlProperty</code> annotation on each property separately</p>\n"},{"tags":["java","char"],"comments":[{"owner":{"account_id":11590,"reputation":10755,"user_id":22417,"display_name":"brianpeiris"},"score":0,"creation_date":1261851224,"post_id":1963908,"comment_id":1877480,"body_markdown":"This question is duplicate of http://stackoverflow.com/questions/1008802/converting-symbols-accent-letters-to-english-alphabet Please refer to that question for an answer","body":"This question is duplicate of <a href=\"http://stackoverflow.com/questions/1008802/converting-symbols-accent-letters-to-english-alphabet\" title=\"converting symbols accent letters to english alphabet\">stackoverflow.com/questions/1008802/&hellip;</a> Please refer to that question for an answer"},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1261862989,"post_id":1963908,"comment_id":1878057,"body_markdown":"&amp;#198; corresponds to the char with int value 198.","body":"&amp;#198; corresponds to the char with int value 198."}],"answers":[{"tags":[],"owner":{"account_id":59951,"reputation":51423,"user_id":179233,"accept_rate":100,"display_name":"Kaleb Brasee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1261850288,"creation_date":1261850288,"answer_id":1963924,"question_id":1963908,"body_markdown":"As far as I know, there&#39;s no way to do this automatically -- you&#39;d have to substitute manually using [String.replaceAll][1].\r\n\r\n    String str = &quot;Paran&#225;&quot;;\r\n    str = str.replaceAll(&quot;&#225;&quot;, &quot;a&quot;);\r\n    str = str.replaceAll(&quot;&#198;&quot;, &quot;a&quot;);\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29","title":"How to convert accented letters to regular char in Java","body":"<p>As far as I know, there's no way to do this automatically -- you'd have to substitute manually using <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29\" rel=\"nofollow noreferrer\">String.replaceAll</a>.</p>\n\n<pre><code>String str = \"Paraná\";\nstr = str.replaceAll(\"á\", \"a\");\nstr = str.replaceAll(\"Æ\", \"a\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":44736,"reputation":98412,"user_id":131433,"accept_rate":76,"display_name":"bmargulies"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1605827198,"creation_date":1261851095,"answer_id":1963956,"question_id":1963908,"body_markdown":"Look at icu4j or the JDK 1.6 Normalizer:\r\n\r\n    public String removeAccents(String text) {\r\n        return Normalizer.normalize(text, Normalizer.Form.NFD)\r\n                         .replaceAll(&quot;\\\\p{InCombiningDiacriticalMarks}+&quot;, &quot;&quot;);\r\n    }","title":"How to convert accented letters to regular char in Java","body":"<p>Look at icu4j or the JDK 1.6 Normalizer:</p>\n<pre><code>public String removeAccents(String text) {\n    return Normalizer.normalize(text, Normalizer.Form.NFD)\n                     .replaceAll(&quot;\\\\p{InCombiningDiacriticalMarks}+&quot;, &quot;&quot;);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27251064,"reputation":1,"user_id":20775516,"display_name":"user20775516"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671271829,"creation_date":1671022145,"answer_id":74798561,"question_id":1963908,"body_markdown":"Try something similar to the following code snippet:\r\n```\r\nimport org.apache.commons.lang3.StringUtils;\r\n\r\npublic class Test {\r\n    public static void main(String[] args) {\r\n\r\n\t\tString original = new String(&quot;Ramesh &#214;hrman&quot;);\r\n\t\ttry {\r\n\t\t\t\r\n\t\t    System.out.println(StringUtils.stripAccents(original));\r\n\t\t\t\r\n\t\t} catch (Exception e) {\r\n\t\t}\r\n\t\t\r\n\t}\r\n}\r\n```\r\nOutput: Ramesh Ohrman","title":"How to convert accented letters to regular char in Java","body":"<p>Try something similar to the following code snippet:</p>\n<pre><code>import org.apache.commons.lang3.StringUtils;\n\npublic class Test {\n    public static void main(String[] args) {\n\n        String original = new String(&quot;Ramesh Öhrman&quot;);\n        try {\n            \n            System.out.println(StringUtils.stripAccents(original));\n            \n        } catch (Exception e) {\n        }\n        \n    }\n}\n</code></pre>\n<p>Output: Ramesh Ohrman</p>\n"}],"owner":{"account_id":15510,"reputation":30708,"user_id":32834,"accept_rate":79,"display_name":"Frank"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5470,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":1963956,"answer_count":3,"score":4,"last_activity_date":1671271829,"creation_date":1261849851,"question_id":1963908,"body_markdown":"How do I convert `&amp;#198;` and `&amp;#225;` into a regular English char with Java ? What I have is something like this : Local TV from Paran`&amp;#225;`. How to convert it to [Parana] ?","title":"How to convert accented letters to regular char in Java","body":"<p>How do I convert <code>&amp;#198;</code> and <code>&amp;#225;</code> into a regular English char with Java ? What I have is something like this : Local TV from Paran<code>&amp;#225;</code>. How to convert it to [Parana] ?</p>\n"},{"tags":["java","java-8","option-type"],"answers":[{"tags":[],"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1671271697,"creation_date":1452485248,"answer_id":34714054,"question_id":34713973,"body_markdown":"No, there&#39;s no way to do it in more elegant way using standard Java API. I asked Paul Sandoz about adding `mapToInt`, etc., [here](http://mail.openjdk.java.net/pipermail/core-libs-dev/2015-September/035426.html)&#39;s his answer:\r\n\r\nMe:\r\n\r\n&gt; Isn&#39;t it a good idea to provide also a way\r\n&gt; to transfer between `Optional` types like `mapToInt`, `mapToObj`, etc.,\r\n&gt; like it&#39;s done in Stream API?\r\n\r\nPaul:\r\n\r\n&gt; I don’t wanna go there, my response is transform `Optional*` into a `*Stream`. An argument for adding `mapOrElseGet` (notice that the primitive variants return `U`) is that other functionality can be composed from it.\r\n\r\nSo you will likely to have in Java-9:\r\n\r\n    return Optional.of(someString).filter(s -&gt; s.matches(&quot;\\\\d+&quot;))\r\n         .mapOrElseGet(s -&gt; OptionalInt.of(Integer.parseInt(s)), OptionalInt::empty);\r\n\r\nBut nothing more.\r\n\r\nThat&#39;s because JDK authors insist that the `Optional` class and its primitive friends (especially primitive friends) should not be widely used, it&#39;s just a convenient way to perform a limited set of operations on the return value of methods which may return &quot;the absence of the value&quot;. Also primitive optionals are designed for performance improvement, but actually it&#39;s much less significant than with streams, so using `Optional&lt;Integer&gt;` is also fine. With Valhalla project you will be able to use `Optional&lt;int&gt;` and `OptionalInt` will become unnecessary.\r\n\r\nIn your particular case the better way to do it is using ternary operator:\r\n\r\n    return someString != null &amp;&amp; someString.matches(&quot;\\\\d+&quot;) ? \r\n           OptionalInt.of(Integer.parseInt(someString)) : OptionalInt.empty();\r\n\r\nI assume that you want to return the `OptionalInt` from the method. Otherwise it&#39;s even more questionable why you would need it.\r\n\r\n","title":"How to convert an Optional to an OptionalInt?","body":"<p>No, there's no way to do it in more elegant way using standard Java API. I asked Paul Sandoz about adding <code>mapToInt</code>, etc., <a href=\"http://mail.openjdk.java.net/pipermail/core-libs-dev/2015-September/035426.html\" rel=\"nofollow noreferrer\">here</a>'s his answer:</p>\n<p>Me:</p>\n<blockquote>\n<p>Isn't it a good idea to provide also a way\nto transfer between <code>Optional</code> types like <code>mapToInt</code>, <code>mapToObj</code>, etc.,\nlike it's done in Stream API?</p>\n</blockquote>\n<p>Paul:</p>\n<blockquote>\n<p>I don’t wanna go there, my response is transform <code>Optional*</code> into a <code>*Stream</code>. An argument for adding <code>mapOrElseGet</code> (notice that the primitive variants return <code>U</code>) is that other functionality can be composed from it.</p>\n</blockquote>\n<p>So you will likely to have in Java-9:</p>\n<pre><code>return Optional.of(someString).filter(s -&gt; s.matches(&quot;\\\\d+&quot;))\n     .mapOrElseGet(s -&gt; OptionalInt.of(Integer.parseInt(s)), OptionalInt::empty);\n</code></pre>\n<p>But nothing more.</p>\n<p>That's because JDK authors insist that the <code>Optional</code> class and its primitive friends (especially primitive friends) should not be widely used, it's just a convenient way to perform a limited set of operations on the return value of methods which may return &quot;the absence of the value&quot;. Also primitive optionals are designed for performance improvement, but actually it's much less significant than with streams, so using <code>Optional&lt;Integer&gt;</code> is also fine. With Valhalla project you will be able to use <code>Optional&lt;int&gt;</code> and <code>OptionalInt</code> will become unnecessary.</p>\n<p>In your particular case the better way to do it is using ternary operator:</p>\n<pre><code>return someString != null &amp;&amp; someString.matches(&quot;\\\\d+&quot;) ? \n       OptionalInt.of(Integer.parseInt(someString)) : OptionalInt.empty();\n</code></pre>\n<p>I assume that you want to return the <code>OptionalInt</code> from the method. Otherwise it's even more questionable why you would need it.</p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1452527999,"creation_date":1452509529,"answer_id":34719670,"question_id":34713973,"body_markdown":"While the code isn&#39;t more readable than an ordinary conditional expression, there is a simple solution:\r\n\r\n    public OptionalInt getInt() {\r\n        return Stream.of(someString).filter(s -&gt; s != null &amp;&amp; s.matches(&quot;\\\\d+&quot;))\r\n            .mapToInt(Integer::parseInt).findAny();\r\n    }\r\n\r\n---\r\nWith Java&#160;9, you could use\r\n\r\n    public OptionalInt getInt() {\r\n        return Stream.ofNullable(someString).filter(s -&gt; s.matches(&quot;\\\\d+&quot;))\r\n            .mapToInt(Integer::parseInt).findAny();\r\n    }\r\nAs said, neither is more readable than an ordinary conditional expression, but I think, it still looks better than using `mapOrElseGet` (and the first variant doesn&#39;t need Java&#160;9.","title":"How to convert an Optional to an OptionalInt?","body":"<p>While the code isn't more readable than an ordinary conditional expression, there is a simple solution:</p>\n\n<pre><code>public OptionalInt getInt() {\n    return Stream.of(someString).filter(s -&gt; s != null &amp;&amp; s.matches(\"\\\\d+\"))\n        .mapToInt(Integer::parseInt).findAny();\n}\n</code></pre>\n\n<hr>\n\n<p>With Java 9, you could use</p>\n\n<pre><code>public OptionalInt getInt() {\n    return Stream.ofNullable(someString).filter(s -&gt; s.matches(\"\\\\d+\"))\n        .mapToInt(Integer::parseInt).findAny();\n}\n</code></pre>\n\n<p>As said, neither is more readable than an ordinary conditional expression, but I think, it still looks better than using <code>mapOrElseGet</code> (and the first variant doesn't need Java 9.</p>\n"},{"tags":[],"owner":{"account_id":60521,"reputation":34336,"user_id":180719,"accept_rate":88,"display_name":"Olivier Gr&#233;goire"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1490112593,"creation_date":1490111855,"answer_id":42932197,"question_id":34713973,"body_markdown":"If you have any object and not just a `String`, you can temporarily go through a `Stream`:\r\n\r\n    public static &lt;T&gt; OptionalInt toOptionalInt(Optional&lt;T&gt; optional, ToIntFunction&lt;? super T&gt; func) {\r\n      return optional.map(Stream::of).orElseGet(Stream::empty)\r\n        .mapToInt(func)\r\n        .findFirst();\r\n    }\r\n\r\nThis solution has the advantage to be a one-liner, meaning you can copy/paste the content of the method and just change `func` to whatever you want. The disadvantage is going through a Stream to achieve what you want. But if you want a generic one-liner, this is it.\r\n\r\nIf you want a utility method, you probably prefer to use the following:\r\n\r\n    public static &lt;T&gt; OptionalInt toOptionalInt(Optional&lt;T&gt; optional, ToIntFunction&lt;? super T&gt; func) {\r\n      if (optional.isPresent()) {\r\n        return OptionalInt.of(func.applyAsInt(optional.get()));\r\n      } else {\r\n        return OptionalInt.empty();\r\n      }\r\n    }","title":"How to convert an Optional to an OptionalInt?","body":"<p>If you have any object and not just a <code>String</code>, you can temporarily go through a <code>Stream</code>:</p>\n\n<pre><code>public static &lt;T&gt; OptionalInt toOptionalInt(Optional&lt;T&gt; optional, ToIntFunction&lt;? super T&gt; func) {\n  return optional.map(Stream::of).orElseGet(Stream::empty)\n    .mapToInt(func)\n    .findFirst();\n}\n</code></pre>\n\n<p>This solution has the advantage to be a one-liner, meaning you can copy/paste the content of the method and just change <code>func</code> to whatever you want. The disadvantage is going through a Stream to achieve what you want. But if you want a generic one-liner, this is it.</p>\n\n<p>If you want a utility method, you probably prefer to use the following:</p>\n\n<pre><code>public static &lt;T&gt; OptionalInt toOptionalInt(Optional&lt;T&gt; optional, ToIntFunction&lt;? super T&gt; func) {\n  if (optional.isPresent()) {\n    return OptionalInt.of(func.applyAsInt(optional.get()));\n  } else {\n    return OptionalInt.empty();\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1325557,"reputation":379,"user_id":1270447,"display_name":"zman0900"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1522218289,"creation_date":1522218289,"answer_id":49527489,"question_id":34713973,"body_markdown":"Here&#39;s another option that doesn&#39;t need to use a Stream and avoids compiling regex every time:\r\n\r\n    private static final Predicate&lt;String&gt; IS_DIGITS = Pattern.compile(&quot;^\\\\d+$&quot;)\r\n            .asPredicate();\r\n    \r\n    public OptionalInt getInt() {\r\n        return Optional.ofNullable(someString)\r\n                .filter(IS_DIGITS)\r\n                .map(Integer::valueOf)\r\n                .map(OptionalInt::of)\r\n                .orElseGet(OptionalInt::empty);\r\n    }\r\n\r\nNote that you need to anchor the regex because asPredicate() uses find() instead of matches().  \r\n\r\nOr if you&#39;re using Guava, you can eliminate the regex entirely and use their Ints class:\r\n\r\n    public OptionalInt getInt() {\r\n        return Optional.ofNullable(someString)\r\n                .map(Ints::tryParse)\r\n                .map(OptionalInt::of)\r\n                .orElseGet(OptionalInt::empty);\r\n    }","title":"How to convert an Optional to an OptionalInt?","body":"<p>Here's another option that doesn't need to use a Stream and avoids compiling regex every time:</p>\n\n<pre><code>private static final Predicate&lt;String&gt; IS_DIGITS = Pattern.compile(\"^\\\\d+$\")\n        .asPredicate();\n\npublic OptionalInt getInt() {\n    return Optional.ofNullable(someString)\n            .filter(IS_DIGITS)\n            .map(Integer::valueOf)\n            .map(OptionalInt::of)\n            .orElseGet(OptionalInt::empty);\n}\n</code></pre>\n\n<p>Note that you need to anchor the regex because asPredicate() uses find() instead of matches().  </p>\n\n<p>Or if you're using Guava, you can eliminate the regex entirely and use their Ints class:</p>\n\n<pre><code>public OptionalInt getInt() {\n    return Optional.ofNullable(someString)\n            .map(Ints::tryParse)\n            .map(OptionalInt::of)\n            .orElseGet(OptionalInt::empty);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":73589,"reputation":5327,"user_id":211794,"accept_rate":58,"display_name":"Ashok Koyi"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1554827107,"creation_date":1554827107,"answer_id":55597287,"question_id":34713973,"body_markdown":"This is how I convert an `Optional&lt;String&gt;` to `OptionalInt`\r\n\r\n    OptionalInt lastSeenId = Optional.of(&quot;123&quot;).map(Integer::parseInt).map(OptionalInt::of).orElseGet(OptionalInt::empty);","title":"How to convert an Optional to an OptionalInt?","body":"<p>This is how I convert an <code>Optional&lt;String&gt;</code> to <code>OptionalInt</code></p>\n\n<pre><code>OptionalInt lastSeenId = Optional.of(\"123\").map(Integer::parseInt).map(OptionalInt::of).orElseGet(OptionalInt::empty);\n</code></pre>\n"}],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9019,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":34719670,"answer_count":5,"score":15,"last_activity_date":1671271697,"creation_date":1452484480,"question_id":34713973,"body_markdown":"I have an `Optional` that I want to &quot;convert&quot; to an `OptionalInt`, but there doesn&#39;t seem to be a simple way to do this.\r\n\r\nHere&#39;s what I want to do (contrived example):\r\n\r\n    public OptionalInt getInt() {\r\n        return Optional.ofNullable(someString).filter(s -&gt; s.matches(&quot;\\\\d+&quot;)).mapToInt(Integer::parseInt);\r\n    }\r\n\r\nHowever, there&#39;s no `mapToInt()` method for `Optional`.\r\n\r\nThe best I could come up with is:\r\n    \r\n    return Optional.ofNullable(someString)\r\n        .filter(s -&gt; s.matches(&quot;\\\\d+&quot;))\r\n        .map(s -&gt; OptionalInt.of(Integer.parseInt(s)))\r\n        .orElse(OptionalInt.empty());\r\n\r\nbut that seems inelegant.\r\n\r\nAm I missing something from the JDK that can make the conversion more elegant?\r\n ","title":"How to convert an Optional to an OptionalInt?","body":"<p>I have an <code>Optional</code> that I want to \"convert\" to an <code>OptionalInt</code>, but there doesn't seem to be a simple way to do this.</p>\n\n<p>Here's what I want to do (contrived example):</p>\n\n<pre><code>public OptionalInt getInt() {\n    return Optional.ofNullable(someString).filter(s -&gt; s.matches(\"\\\\d+\")).mapToInt(Integer::parseInt);\n}\n</code></pre>\n\n<p>However, there's no <code>mapToInt()</code> method for <code>Optional</code>.</p>\n\n<p>The best I could come up with is:</p>\n\n<pre><code>return Optional.ofNullable(someString)\n    .filter(s -&gt; s.matches(\"\\\\d+\"))\n    .map(s -&gt; OptionalInt.of(Integer.parseInt(s)))\n    .orElse(OptionalInt.empty());\n</code></pre>\n\n<p>but that seems inelegant.</p>\n\n<p>Am I missing something from the JDK that can make the conversion more elegant?</p>\n"},{"tags":["java","math","floating-point","format","double"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1671270839,"post_id":74833126,"comment_id":132066701,"body_markdown":"They say you should use `BigDecimal` for amounts that need to be accurate.","body":"They say you should use <code>BigDecimal</code> for amounts that need to be accurate."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1671273632,"post_id":74833126,"comment_id":132067078,"body_markdown":"From [the doumentation:](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Formatter.html#syntax) *If the precision is not specified then the default value is 6.* This means that `%f` without specification of precision will print 6 decimals after the decimal separator and round as necessary, for example `0.001057`. There is a solution in the answer.","body":"From <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Formatter.html#syntax\" rel=\"nofollow noreferrer\">the doumentation:</a> <i>If the precision is not specified then the default value is 6.</i> This means that <code>%f</code> without specification of precision will print 6 decimals after the decimal separator and round as necessary, for example <code>0.001057</code>. There is a solution in the answer."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1671273928,"post_id":74833126,"comment_id":132067119,"body_markdown":"If you want 0.0010565 but don’t want redundant trailing zeroes, another solution is `new DecimalFormat(&quot;#####0.0#################&quot;).format(chargeAmount)`. This will print at least one decimal and up to 18 decimals if they are non-zero.","body":"If you want 0.0010565 but don’t want redundant trailing zeroes, another solution is <code>new DecimalFormat(&quot;#####0.0#################&quot;).format(chargeAmou&zwnj;&#8203;nt)</code>. This will print at least one decimal and up to 18 decimals if they are non-zero."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1671819465,"post_id":74833126,"comment_id":132184147,"body_markdown":"I seem to understand that the answer was deleted because of [GPT policy](https://stackoverflow.com/help/gpt-policy) (which I support).","body":"I seem to understand that the answer was deleted because of <a href=\"https://stackoverflow.com/help/gpt-policy\">GPT policy</a> (which I support)."},{"owner":{"account_id":2802349,"reputation":146413,"user_id":2410359,"accept_rate":87,"display_name":"chux - Reinstate Monica"},"score":1,"creation_date":1672055635,"post_id":74833126,"comment_id":132213454,"body_markdown":"Try `&quot;%f&quot;` --&gt; `&quot;%.7f&quot;` to see a 7 decimal digit result.","body":"Try <code>&quot;%f&quot;</code> --&gt; <code>&quot;%.7f&quot;</code> to see a 7 decimal digit result."},{"owner":{"account_id":2802349,"reputation":146413,"user_id":2410359,"accept_rate":87,"display_name":"chux - Reinstate Monica"},"score":0,"creation_date":1672055818,"post_id":74833126,"comment_id":132213483,"body_markdown":"I suspect OP is getting 0.001057 because math is done in a wider than `double` and the exact amount is like 0.001056500000000000000048741663....  When rounded to 6 places is 0.001057.","body":"I suspect OP is getting 0.001057 because math is done in a wider than <code>double</code> and the exact amount is like 0.001056500000000000000048741663....  When rounded to 6 places is 0.001057."},{"owner":{"account_id":2802349,"reputation":146413,"user_id":2410359,"accept_rate":87,"display_name":"chux - Reinstate Monica"},"score":0,"creation_date":1672055881,"post_id":74833126,"comment_id":132213500,"body_markdown":"Rather than `double`, use decimal floating point types for money.","body":"Rather than <code>double</code>, use decimal floating point types for money."}],"owner":{"account_id":18127419,"reputation":1,"user_id":13182835,"display_name":"Syed Omer Asfaq"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":184,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671270914,"creation_date":1671270486,"question_id":74833126,"body_markdown":"My value is `0.10565`\r\n\r\nWhen this value get divided by 100 and formatted to string it gets converted to `0.001057`.\r\n\r\nBut my expected value is `\r\n0.0010565` , there should be no rounding off happening at the end.\r\n\r\nIs there any way to do it?\r\n\r\n\r\n```\r\nchargeAmount = Double.parseDouble(chargeInCents)/(double)100;\r\nchargeInDollar = String.format(&quot;%f&quot;, chargeAmount);\r\n```\r\nIt tried using this to convert my double value to string after dividing it by 100 \r\n","title":"String.format(&quot;%f&quot;, value) - Rounding off end digits","body":"<p>My value is <code>0.10565</code></p>\n<p>When this value get divided by 100 and formatted to string it gets converted to <code>0.001057</code>.</p>\n<p>But my expected value is <code> 0.0010565</code> , there should be no rounding off happening at the end.</p>\n<p>Is there any way to do it?</p>\n<pre><code>chargeAmount = Double.parseDouble(chargeInCents)/(double)100;\nchargeInDollar = String.format(&quot;%f&quot;, chargeAmount);\n</code></pre>\n<p>It tried using this to convert my double value to string after dividing it by 100</p>\n"},{"tags":["java","windows","startup"],"comments":[{"owner":{"account_id":297814,"reputation":25314,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"score":1,"creation_date":1548580266,"post_id":5953525,"comment_id":95585426,"body_markdown":"See also [How to create a windows service from java app](https://stackoverflow.com/questions/68113/how-to-create-a-windows-service-from-java-app)","body":"See also <a href=\"https://stackoverflow.com/questions/68113/how-to-create-a-windows-service-from-java-app\">How to create a windows service from java app</a>"}],"answers":[{"tags":[],"owner":{"account_id":29046,"reputation":66704,"user_id":78182,"accept_rate":94,"display_name":"Stefan Kendall"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1305046517,"creation_date":1305046517,"answer_id":5953560,"question_id":5953525,"body_markdown":"The answer to [this question][1] might suit your needs. Setup your java application to run as a windows service and you should be good to go.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/68113/how-to-create-a-windows-service-from-java-app","title":"Run Java application at Windows startup","body":"<p>The answer to <a href=\"https://stackoverflow.com/questions/68113/how-to-create-a-windows-service-from-java-app\">this question</a> might suit your needs. Setup your java application to run as a windows service and you should be good to go.</p>\n"},{"tags":[],"owner":{"account_id":140436,"reputation":1632,"user_id":346744,"accept_rate":88,"display_name":"MikeKusold"},"down_vote_count":5,"up_vote_count":45,"is_accepted":false,"score":40,"last_activity_date":1305046614,"creation_date":1305046614,"answer_id":5953583,"question_id":5953525,"body_markdown":"Create a .bat file and put this inside:\r\n\r\n`javaw -Xmx200m -jar C:\\Path\\to\\jarfile\\TheJar.jar`\r\n\r\nThen put the .bat file into the windows startup folder.\r\n\r\n&gt; One more thing: There&#39;s a difference between using **java** and **javaw**. While **java** is better when you are debugging an application, the application prints text or something like that, **javaw** is better when you don&#39;t need that. Why? Because **java** runs java program using a console that shows all that application prints (println&#39;s, exception stacktraces and so on) while **javaw** doesn&#39;t run on console.","title":"Run Java application at Windows startup","body":"<p>Create a .bat file and put this inside:</p>\n\n<p><code>javaw -Xmx200m -jar C:\\Path\\to\\jarfile\\TheJar.jar</code></p>\n\n<p>Then put the .bat file into the windows startup folder.</p>\n\n<blockquote>\n  <p>One more thing: There's a difference between using <strong>java</strong> and <strong>javaw</strong>. While <strong>java</strong> is better when you are debugging an application, the application prints text or something like that, <strong>javaw</strong> is better when you don't need that. Why? Because <strong>java</strong> runs java program using a console that shows all that application prints (println's, exception stacktraces and so on) while <strong>javaw</strong> doesn't run on console.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1305046740,"creation_date":1305046740,"answer_id":5953610,"question_id":5953525,"body_markdown":"Use &quot;winsw&quot; - http://kenai.com/projects/winsw - which was written for Glassfish v3 but works well with Java programs in general.\r\n\r\nRequire .NET runtime installed.","title":"Run Java application at Windows startup","body":"<p>Use \"winsw\" - <a href=\"http://kenai.com/projects/winsw\" rel=\"nofollow\">http://kenai.com/projects/winsw</a> - which was written for Glassfish v3 but works well with Java programs in general.</p>\n\n<p>Require .NET runtime installed.</p>\n"},{"tags":[],"owner":{"account_id":178454,"reputation":5330,"user_id":410439,"accept_rate":81,"display_name":"Ravi Parekh"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1495621305,"creation_date":1312972487,"answer_id":7009421,"question_id":5953525,"body_markdown":"it&#39;s simple as you have to put shortcut in \r\n\r\n**Windows 7**\r\n`C:\\users\\All Users\\Start Menu\\Programs\\Startup`(Admin)  or `User home directory(%userProfile%)`\r\n\r\n**Windows 10 :**\r\nIn Run   `shell:startup`\r\n\r\nin it&#39;s property -&gt; shortcut -&gt; target - &gt; `java.exe -jar D:\\..\\runJar.jar`\r\n\r\n**NOTE: This will run only after you login**\r\n\r\n\r\n----------\r\n\r\n\r\n**With Admin Right**\r\n\r\n`sc create serviceName binpath= &quot;java.exe -jar D:\\..\\runJar.jar&quot;` Will create windows service\r\n\r\n if you get **timeout** use `cmd /c D:\\JAVA7~1\\jdk1.7.0_51\\bin\\java.exe -jar d:\\jenkins\\jenkins.war` but even with this you&#39;ll get timeout but in background java.exe will be started. Check in task manager\r\n___\r\nIn some restricted environment as I was in corporate environment\r\n\r\n**ERROR:**\r\n\r\n`The service did not respond to the start or control request in a timely fashion`\r\n\r\nIn this case\r\n\r\n`cmd /c D:\\JAVA7~1\\jdk1.7.0_51\\bin\\java.exe -jar d:\\jenkins\\jenkins.war`\r\n\r\nThis will give you an error if you run manually but will run in background.\r\n\r\n**NOTE: This will run at windows logon start-up(before sign-in, Based on service &#39;`Startup Type`&#39;)**\r\n\r\n[Detailed explanation of creating windows service][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/3663331/creating-a-service-with-sc-exe-how-to-pass-in-context-parameters\r\n\r\n\r\n----------\r\n\r\n**Regedit**\r\n\r\n**Note: Edit Advanced User only**\r\n\r\n**To Run for Current User Only**\r\n\r\n    HKEY_CURRENT_USER/SOFTWARE/MICROSOFT/WINDOWS/CURRENT_VERSION/RUN\r\n\r\n**To Run for All Users**\r\n\r\n    hkey_local_machine/SOFTWARE/MICROSOFT/WINDOWS/CURRENT_VERSION/RUN\r\n\r\nCreate a String with Name and Path using above command\r\n","title":"Run Java application at Windows startup","body":"<p>it's simple as you have to put shortcut in </p>\n\n<p><strong>Windows 7</strong>\n<code>C:\\users\\All Users\\Start Menu\\Programs\\Startup</code>(Admin)  or <code>User home directory(%userProfile%)</code></p>\n\n<p><strong>Windows 10 :</strong>\nIn Run   <code>shell:startup</code></p>\n\n<p>in it's property -> shortcut -> target - > <code>java.exe -jar D:\\..\\runJar.jar</code></p>\n\n<p><strong>NOTE: This will run only after you login</strong></p>\n\n<hr>\n\n<p><strong>With Admin Right</strong></p>\n\n<p><code>sc create serviceName binpath= \"java.exe -jar D:\\..\\runJar.jar\"</code> Will create windows service</p>\n\n<p>if you get <strong>timeout</strong> use <code>cmd /c D:\\JAVA7~1\\jdk1.7.0_51\\bin\\java.exe -jar d:\\jenkins\\jenkins.war</code> but even with this you'll get timeout but in background java.exe will be started. Check in task manager</p>\n\n<hr>\n\n<p>In some restricted environment as I was in corporate environment</p>\n\n<p><strong>ERROR:</strong></p>\n\n<p><code>The service did not respond to the start or control request in a timely fashion</code></p>\n\n<p>In this case</p>\n\n<p><code>cmd /c D:\\JAVA7~1\\jdk1.7.0_51\\bin\\java.exe -jar d:\\jenkins\\jenkins.war</code></p>\n\n<p>This will give you an error if you run manually but will run in background.</p>\n\n<p><strong>NOTE: This will run at windows logon start-up(before sign-in, Based on service '<code>Startup Type</code>')</strong></p>\n\n<p><a href=\"https://stackoverflow.com/questions/3663331/creating-a-service-with-sc-exe-how-to-pass-in-context-parameters\">Detailed explanation of creating windows service</a></p>\n\n<hr>\n\n<p><strong>Regedit</strong></p>\n\n<p><strong>Note: Edit Advanced User only</strong></p>\n\n<p><strong>To Run for Current User Only</strong></p>\n\n<pre><code>HKEY_CURRENT_USER/SOFTWARE/MICROSOFT/WINDOWS/CURRENT_VERSION/RUN\n</code></pre>\n\n<p><strong>To Run for All Users</strong></p>\n\n<pre><code>hkey_local_machine/SOFTWARE/MICROSOFT/WINDOWS/CURRENT_VERSION/RUN\n</code></pre>\n\n<p>Create a String with Name and Path using above command</p>\n"},{"tags":[],"owner":{"account_id":4118482,"reputation":557,"user_id":3379482,"accept_rate":59,"display_name":"user3379482"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1580089148,"creation_date":1398868117,"answer_id":23390836,"question_id":5953525,"body_markdown":"1. Open &#39;Run&#39; (Windows-Key+`R`) \r\n2. Write `regedit`\r\n3. Go to `HKey local machine` -&gt; `Software` -&gt; `Microsoft` -&gt; `Windows` -&gt; `Current version` -&gt; `run`\r\n4. Click on it and in the other panel right-click on nothing and choose\r\n`Add` -&gt; `String value`\r\n5. Name it `java`\r\n6. Double-click it and put it&#39;s value as follows:\r\n`javaw -Xmx200m -jar C:\\Path\\to\\jarfile\\TheJar.jar`","title":"Run Java application at Windows startup","body":"<ol>\n<li>Open 'Run' (Windows-Key+<code>R</code>) </li>\n<li>Write <code>regedit</code></li>\n<li>Go to <code>HKey local machine</code> -> <code>Software</code> -> <code>Microsoft</code> -> <code>Windows</code> -> <code>Current version</code> -> <code>run</code></li>\n<li>Click on it and in the other panel right-click on nothing and choose\n<code>Add</code> -> <code>String value</code></li>\n<li>Name it <code>java</code></li>\n<li>Double-click it and put it's value as follows:\n<code>javaw -Xmx200m -jar C:\\Path\\to\\jarfile\\TheJar.jar</code></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":57788,"reputation":46110,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1420824078,"creation_date":1420824078,"answer_id":27865862,"question_id":5953525,"body_markdown":"In order to create service from any executable use ``srvany.exe`` from [Windows\r\nResource Kits 2003][1] (take attention to spaces after ``=``)::\r\n\r\n    cmd&gt; sc create NAME binPath= &quot;c:\\Program Files\\Windows Resource Kits\\Tools\\srvany.exe&quot; ^\r\n       type= own start= auto error= normal DisplayName= &quot;NAME for services.msc&quot;\r\n\r\nThen pass what `srvany.exe` wrapper will do:\r\n\r\n    cmd&gt; reg add &quot;HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\services\\NAME\\Parameters&quot; ^\r\n         /v &quot;Application&quot; ^\r\n         /d &quot;\\&quot;c:\\Program Files\\Java\\jre7\\bin\\java.exe\\&quot; -cp c:\\home\\devel\\service Main&quot;\r\n\r\nAbove you see quoting syntax for spaces. Next start service with:\r\n\r\n    cmd&gt; sc start NAME\r\n\r\nIf you make error recheck your settings with:\r\n\r\n    cmd&gt; reg query &quot;HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\services\\NAME&quot; /s\r\n\r\nand remove service:\r\n\r\n    cmd&gt; sc delete NAME\r\n\r\nand make steps again.\r\n\r\nVisit GUI `services.msc` and check with `procexp.exe` service actually start.\r\n\r\nSee also:  https://stackoverflow.com/questions/3663331/creating-a-service-with-sc-exe-how-to-pass-in-context-parameters\r\n\r\n**NOTE** All involved instruments is **official Microsoft**!!!\r\n\r\n\r\n  [1]: http://www.microsoft.com/en-us/download/confirmation.aspx?id=17657","title":"Run Java application at Windows startup","body":"<p>In order to create service from any executable use <code>srvany.exe</code> from <a href=\"http://www.microsoft.com/en-us/download/confirmation.aspx?id=17657\" rel=\"nofollow noreferrer\">Windows\nResource Kits 2003</a> (take attention to spaces after <code>=</code>)::</p>\n\n<pre><code>cmd&gt; sc create NAME binPath= \"c:\\Program Files\\Windows Resource Kits\\Tools\\srvany.exe\" ^\n   type= own start= auto error= normal DisplayName= \"NAME for services.msc\"\n</code></pre>\n\n<p>Then pass what <code>srvany.exe</code> wrapper will do:</p>\n\n<pre><code>cmd&gt; reg add \"HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\services\\NAME\\Parameters\" ^\n     /v \"Application\" ^\n     /d \"\\\"c:\\Program Files\\Java\\jre7\\bin\\java.exe\\\" -cp c:\\home\\devel\\service Main\"\n</code></pre>\n\n<p>Above you see quoting syntax for spaces. Next start service with:</p>\n\n<pre><code>cmd&gt; sc start NAME\n</code></pre>\n\n<p>If you make error recheck your settings with:</p>\n\n<pre><code>cmd&gt; reg query \"HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\services\\NAME\" /s\n</code></pre>\n\n<p>and remove service:</p>\n\n<pre><code>cmd&gt; sc delete NAME\n</code></pre>\n\n<p>and make steps again.</p>\n\n<p>Visit GUI <code>services.msc</code> and check with <code>procexp.exe</code> service actually start.</p>\n\n<p>See also:  <a href=\"https://stackoverflow.com/questions/3663331/creating-a-service-with-sc-exe-how-to-pass-in-context-parameters\">creating a service with sc.exe; how to pass in context parameters</a></p>\n\n<p><strong>NOTE</strong> All involved instruments is <strong>official Microsoft</strong>!!!</p>\n"},{"tags":[],"owner":{"account_id":116759,"reputation":7831,"user_id":306060,"accept_rate":72,"display_name":"Yanki Twizzy"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1420824700,"creation_date":1420824700,"answer_id":27866026,"question_id":5953525,"body_markdown":"If you are not ready to do the config yourself or if you want the same functionality on multile computers, then you can use [Advanced Installer][1]. You can package jars to be installed on Windows and set params that will run your program on startup\r\n\r\n\r\n  [1]: http://www.advancedinstaller.com/","title":"Run Java application at Windows startup","body":"<p>If you are not ready to do the config yourself or if you want the same functionality on multile computers, then you can use <a href=\"http://www.advancedinstaller.com/\" rel=\"nofollow\">Advanced Installer</a>. You can package jars to be installed on Windows and set params that will run your program on startup</p>\n"},{"tags":[],"owner":{"account_id":5364957,"reputation":821,"user_id":4275217,"display_name":"Mior"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1514959596,"creation_date":1442058521,"answer_id":32538420,"question_id":5953525,"body_markdown":"If you want to do it programmatically from Java you can write directly into Windows registry startup folder.\r\n\r\n[Here][1] is link how to write into Windows registry programmatically.\r\n\r\nwhen you have implemented function to work with registry than what you need is just run this code\r\n\r\n    String value = &quot;\\&quot;javaw -jar &quot; + System.getProperty(&quot;user.dir&quot;) + &quot;\\\\myJar.jar\\&quot;&quot;;\r\n    WinRegistry.writeStringValue(WinRegistry.HKEY_CURRENT_USER, &quot;Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Run&quot;, &quot;myJar autorun key&quot;, value);\r\n\r\nwhere value for key need to be command what runs your application like java -jar myJar.jar\r\n\r\nto remove it from autorun you simply \r\n\r\n    WinRegistry.deleteValue(WinRegistry.HKEY_CURRENT_USER, &quot;Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Run&quot;, &quot;myJar autorun key&quot;);\r\n\r\n  [1]: https://stackoverflow.com/questions/62289/read-write-to-windows-registry-using-java\r\n\r\n**UPDATE**\r\n\r\n    Replace WinRegistry.writeStringValue with WinRegistry.setStringValue recent version of java 1.8.x","title":"Run Java application at Windows startup","body":"<p>If you want to do it programmatically from Java you can write directly into Windows registry startup folder.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/62289/read-write-to-windows-registry-using-java\">Here</a> is link how to write into Windows registry programmatically.</p>\n\n<p>when you have implemented function to work with registry than what you need is just run this code</p>\n\n<pre><code>String value = \"\\\"javaw -jar \" + System.getProperty(\"user.dir\") + \"\\\\myJar.jar\\\"\";\nWinRegistry.writeStringValue(WinRegistry.HKEY_CURRENT_USER, \"Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Run\", \"myJar autorun key\", value);\n</code></pre>\n\n<p>where value for key need to be command what runs your application like java -jar myJar.jar</p>\n\n<p>to remove it from autorun you simply </p>\n\n<pre><code>WinRegistry.deleteValue(WinRegistry.HKEY_CURRENT_USER, \"Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Run\", \"myJar autorun key\");\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<pre><code>Replace WinRegistry.writeStringValue with WinRegistry.setStringValue recent version of java 1.8.x\n</code></pre>\n"}],"owner":{"account_id":749646,"reputation":493,"user_id":744092,"accept_rate":20,"display_name":"shan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104042,"favorite_count":0,"down_vote_count":0,"up_vote_count":45,"answer_count":8,"score":45,"last_activity_date":1671268456,"creation_date":1305046367,"question_id":5953525,"body_markdown":"I have a JAR file containing a Java application. How can I make it start with Windows, without needing user interaction?","title":"Run Java application at Windows startup","body":"<p>I have a JAR file containing a Java application. How can I make it start with Windows, without needing user interaction?</p>\n"},{"tags":["java","maven","java-native-interface"],"comments":[{"owner":{"account_id":1198039,"reputation":10944,"user_id":1169349,"display_name":"Reg"},"score":0,"creation_date":1659008170,"post_id":73152091,"comment_id":129196158,"body_markdown":"I have worked on two projects (different companies) with JNI implementations; we kept the C++ code in separate repo and used the generated DLL in our Java Project.","body":"I have worked on two projects (different companies) with JNI implementations; we kept the C++ code in separate repo and used the generated DLL in our Java Project."},{"owner":{"account_id":3581132,"reputation":1802,"user_id":2989330,"accept_rate":69,"display_name":"Green绿色"},"score":0,"creation_date":1659010634,"post_id":73152091,"comment_id":129197012,"body_markdown":"Did you also kept the JNI interface code in the separate repository? At least that code is highly dependent on the Java code and must change whenever the package of the corresponding classes change.","body":"Did you also kept the JNI interface code in the separate repository? At least that code is highly dependent on the Java code and must change whenever the package of the corresponding classes change."},{"owner":{"account_id":1198039,"reputation":10944,"user_id":1169349,"display_name":"Reg"},"score":0,"creation_date":1659011829,"post_id":73152091,"comment_id":129197532,"body_markdown":"To be honest I can&#39;t remember, but in general - if it was c++ it was kept in the c++ repo and java in the Java repo :)","body":"To be honest I can&#39;t remember, but in general - if it was c++ it was kept in the c++ repo and java in the Java repo :)"},{"owner":{"account_id":3581132,"reputation":1802,"user_id":2989330,"accept_rate":69,"display_name":"Green绿色"},"score":0,"creation_date":1659055227,"post_id":73152091,"comment_id":129210363,"body_markdown":"I see. In our current project, we do exactly the same, but the JNI code is rather hardly coupled to the Java code structure, so I thought, I&#39;d be better to put it into the Java project. However, what&#39;s the rationale of the `java` folder then? isn&#39;t it redundant then?","body":"I see. In our current project, we do exactly the same, but the JNI code is rather hardly coupled to the Java code structure, so I thought, I&#39;d be better to put it into the Java project. However, what&#39;s the rationale of the <code>java</code> folder then? isn&#39;t it redundant then?"},{"owner":{"account_id":1198039,"reputation":10944,"user_id":1169349,"display_name":"Reg"},"score":0,"creation_date":1659076469,"post_id":73152091,"comment_id":129213506,"body_markdown":"I don&#39;t think so, as the other folder would normally be a resource folder. So Java Code and Resources? But I am not 100% sure what the creators had in mind. I have worked with maven for 10 years now and have never questioned it :D","body":"I don&#39;t think so, as the other folder would normally be a resource folder. So Java Code and Resources? But I am not 100% sure what the creators had in mind. I have worked with maven for 10 years now and have never questioned it :D"},{"owner":{"account_id":1198039,"reputation":10944,"user_id":1169349,"display_name":"Reg"},"score":0,"creation_date":1659076674,"post_id":73152091,"comment_id":129213550,"body_markdown":"With no practical experience, I would have create maven 1 project with 2 Modules Then use the maven-nar-plugin to build the c++ module and just the standard for the other. This way, you don&#39;t get two build systems on the same folder structure.","body":"With no practical experience, I would have create maven 1 project with 2 Modules Then use the maven-nar-plugin to build the c++ module and just the standard for the other. This way, you don&#39;t get two build systems on the same folder structure."},{"owner":{"account_id":3581132,"reputation":1802,"user_id":2989330,"accept_rate":69,"display_name":"Green绿色"},"score":1,"creation_date":1659078651,"post_id":73152091,"comment_id":129214097,"body_markdown":"Thank you for you&#39;re suggestions. You&#39;re right, the other folder is `resources`, I overlooked it when I was thinking about this question.","body":"Thank you for you&#39;re suggestions. You&#39;re right, the other folder is <code>resources</code>, I overlooked it when I was thinking about this question."},{"owner":{"account_id":3581132,"reputation":1802,"user_id":2989330,"accept_rate":69,"display_name":"Green绿色"},"score":1,"creation_date":1669279734,"post_id":73152091,"comment_id":131609998,"body_markdown":"Little addition: When creating a C++ project in Android Studio, the default project structure is exactly as I described above. They also have a `cpp/` directory in `src/main` next to `java/` and `resources/`.","body":"Little addition: When creating a C++ project in Android Studio, the default project structure is exactly as I described above. They also have a <code>cpp&#47;</code> directory in <code>src&#47;main</code> next to <code>java&#47;</code> and <code>resources&#47;</code>."}],"answers":[{"tags":[],"owner":{"account_id":3581132,"reputation":1802,"user_id":2989330,"accept_rate":69,"display_name":"Green绿色"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671268392,"creation_date":1671268392,"answer_id":74832972,"question_id":73152091,"body_markdown":"According to the description of the [Maven directory structure](https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html):\r\n\r\n&gt; If there are other contributing sources to the artifact build, they would be under other subdirectories. For example src/main/antlr would contain Antlr grammar definition files.\r\n\r\nTaking into account that JNI code is also something contributing to the artifact build, that the default Android Studio project structure for Android apps with NDK also includes a folder `src/main/cpp`, and that JNI code is naturally hardly coupled with the corresponding Java class, I believe it&#39;s best to include at least the JNI code into the Java project at `src/main/cpp`. Usually, the core C/C++ library code is something generalizable, so it would be kept in a separate project and built separately.","title":"Maven project structure for Java+JNI project","body":"<p>According to the description of the <a href=\"https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html\" rel=\"nofollow noreferrer\">Maven directory structure</a>:</p>\n<blockquote>\n<p>If there are other contributing sources to the artifact build, they would be under other subdirectories. For example src/main/antlr would contain Antlr grammar definition files.</p>\n</blockquote>\n<p>Taking into account that JNI code is also something contributing to the artifact build, that the default Android Studio project structure for Android apps with NDK also includes a folder <code>src/main/cpp</code>, and that JNI code is naturally hardly coupled with the corresponding Java class, I believe it's best to include at least the JNI code into the Java project at <code>src/main/cpp</code>. Usually, the core C/C++ library code is something generalizable, so it would be kept in a separate project and built separately.</p>\n"}],"owner":{"account_id":3581132,"reputation":1802,"user_id":2989330,"accept_rate":69,"display_name":"Green绿色"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":208,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1671268392,"creation_date":1659007536,"question_id":73152091,"body_markdown":"The default Java Maven project structure is usually\r\n\r\n```\r\nsrc/\r\n  main/\r\n    java/\r\n      org/example/Main.java\r\n  test/\r\n    java/\r\n```\r\n\r\nIf I have a project with C++/JNI code, would it be right to extend on this idea and put the C++ code into the folder `src/main/cpp` or would it be usually put somewhere else? If so, what is the rationale behind the `java` folder?","title":"Maven project structure for Java+JNI project","body":"<p>The default Java Maven project structure is usually</p>\n<pre><code>src/\n  main/\n    java/\n      org/example/Main.java\n  test/\n    java/\n</code></pre>\n<p>If I have a project with C++/JNI code, would it be right to extend on this idea and put the C++ code into the folder <code>src/main/cpp</code> or would it be usually put somewhere else? If so, what is the rationale behind the <code>java</code> folder?</p>\n"},{"tags":["java","cloudflare","htmlunit"],"comments":[{"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"score":0,"creation_date":1670571580,"post_id":74732202,"comment_id":131909330,"body_markdown":"at least the cookie isssue should be fixed - https://github.com/HtmlUnit/htmlunit/issues/524","body":"at least the cookie isssue should be fixed - <a href=\"https://github.com/HtmlUnit/htmlunit/issues/524\" rel=\"nofollow noreferrer\">github.com/HtmlUnit/htmlunit/issues/524</a>"},{"owner":{"account_id":16209077,"reputation":389,"user_id":11703579,"display_name":"gbossa"},"score":0,"creation_date":1671046925,"post_id":74732202,"comment_id":132015594,"body_markdown":"Thanks man! Is this updated repo on Maven?","body":"Thanks man! Is this updated repo on Maven?"},{"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"score":0,"creation_date":1671090231,"post_id":74732202,"comment_id":132023751,"body_markdown":"there is an updated snapshot available - you can find some info on how to switch to the snapshot on the bottom of this https://github.com/HtmlUnit/htmlunit page.","body":"there is an updated snapshot available - you can find some info on how to switch to the snapshot on the bottom of this <a href=\"https://github.com/HtmlUnit/htmlunit\" rel=\"nofollow noreferrer\">github.com/HtmlUnit/htmlunit</a> page."},{"owner":{"account_id":16209077,"reputation":389,"user_id":11703579,"display_name":"gbossa"},"score":0,"creation_date":1671109943,"post_id":74732202,"comment_id":132030303,"body_markdown":"Well, that did it. At least for my problem, update the version of htmlunit did the trick. (Had to update apache.commons.lang3 too). Please, post it as an answer so I can accept. Thanks!","body":"Well, that did it. At least for my problem, update the version of htmlunit did the trick. (Had to update apache.commons.lang3 too). Please, post it as an answer so I can accept. Thanks!"},{"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"score":0,"creation_date":1671268151,"post_id":74732202,"comment_id":132066346,"body_markdown":"bgossa - done :-)","body":"bgossa - done :-)"}],"answers":[{"tags":[],"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671268105,"creation_date":1671268105,"answer_id":74832946,"question_id":74732202,"body_markdown":"There was an update/fix regarding the cookie processing in HtmlUnit. The latest 2.68.0-SNAPSHOT or all future releases should fix that.\r\n\r\nSee https://github.com/HtmlUnit/htmlunit/issues/524 for more.\r\n\r\nThis is also related to https://stackoverflow.com/questions/74619619/htmlunit-returning-empty-list-of-domelements/74812329#74812329","title":"Java Htmlunit Cloudflare protection stuck on redirecting to the final page","body":"<p>There was an update/fix regarding the cookie processing in HtmlUnit. The latest 2.68.0-SNAPSHOT or all future releases should fix that.</p>\n<p>See <a href=\"https://github.com/HtmlUnit/htmlunit/issues/524\" rel=\"nofollow noreferrer\">https://github.com/HtmlUnit/htmlunit/issues/524</a> for more.</p>\n<p>This is also related to <a href=\"https://stackoverflow.com/questions/74619619/htmlunit-returning-empty-list-of-domelements/74812329#74812329\">HtmlUnit returning empty list of DomElements</a></p>\n"}],"owner":{"account_id":16209077,"reputation":389,"user_id":11703579,"display_name":"gbossa"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":235,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74832946,"answer_count":1,"score":1,"last_activity_date":1671268105,"creation_date":1670511296,"question_id":74732202,"body_markdown":"So, I am trying to access a website (using `Java Htmlunit - version 2.20 - can&#180;t update it, company policies`) - it is a government website - `https://www2.aneel.gov.br:443/aplicacoes_liferay/tarifa/` - hosted by Cloudflare. \r\n\r\nWhen accessing via normal Browser, everything is normal. When accessing via `htmlunit`, Cloudflare starts the proccess of `Checking if the site connection is secure`. \r\n\r\nI can proceed to the next step, which is `Connection is secure - Proceeding...`\r\nBut it just stucks there. \r\nPlease, how can I bypass it correctly.\r\n\r\nP.S.: There is no way to have my `IP` on a whitelist for this. I must go through this verification and redirection on my own. \r\n\r\nThanks in advance!\r\n\r\nSome code sample: \r\n\r\n    BrowserVersion chrome = new BrowserVersion(\r\n\t\t\t\t&quot;Netscape&quot;, \r\n\t\t\t\t&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36&quot;, \r\n\t\t\t\t&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36&quot;, \r\n\t\t\t\t108);\r\n\t\tchrome.setApplicationCodeName(&quot;Mozilla&quot;);\r\n\t\tchrome.setVendor(&quot;Google Inc.&quot;);\r\n\t\tchrome.setHtmlAcceptHeader(&quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&quot;);\r\n\t\tchrome.setImgAcceptHeader(&quot;image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8&quot;);\r\n\t\tchrome.setCssAcceptHeader(&quot;text/css,*/*;q=0.1&quot;);\r\n\t\tchrome.setScriptAcceptHeader(&quot;*/*&quot;);\r\n\t\tchrome.setBrowserLanguage(&quot;en-US,en;q=0.9,pt;q=0.8,mt;q=0.7&quot;);\r\n\t\tchrome.setPlatform(&quot;Windows&quot;);\r\n\t\tchrome.setUserLanguage(&quot;pt-BR&quot;);\r\n\t\tchrome.setSystemLanguage(&quot;pt-BR&quot;);\r\n\t\t\r\n\t\ttry (WebClient webClient = new WebClient(chrome)) {\r\n\t\t\tString url = &quot;https://www2.aneel.gov.br:443/aplicacoes_liferay/tarifa/&quot;;\r\n\t\t\t\r\n\t\t\t// par&#226;metros do webclient\r\n\t\t\twebClient.getOptions().setCssEnabled(true);\r\n\t\t\twebClient.setJavaScriptTimeout(0);\r\n\t\t\twebClient.getOptions().setThrowExceptionOnScriptError(false);\r\n\t\t\twebClient.getOptions().setUseInsecureSSL(false);\r\n\t\t\twebClient.getOptions().setThrowExceptionOnFailingStatusCode(false);\r\n\t\t\twebClient.getOptions().setTimeout(0);\r\n\t\t\t\r\n\t\t\tCookieManager cookies = new CookieManager();\r\n\t\t\t\r\n\t\t\tcookies.setCookiesEnabled(true);\r\n\t\t\twebClient.setCookieManager(cookies);\r\n\t\t\t\r\n\t\t\t\r\n\t\t\twebClient.getOptions().setJavaScriptEnabled(true);\r\n\t\t\twebClient.getOptions().setRedirectEnabled(true);\r\n\t\t\t\r\n\t\t\twebClient.waitForBackgroundJavaScript(10000);\r\n\t\t\twebClient.waitForBackgroundJavaScriptStartingBefore(10000);\r\n\t\t\t\r\n\t\t\twebClient.getCache().setMaxSize(0);\r\n\t\t\t\r\n\t\t\tHtmlPage page = webClient.getPage(url);\r\n\t\t\twebClient.getRefreshHandler().handleRefresh(page, new URL(url), 10);\r\n\t\t\t\r\n\t\t\tsynchronized(page) {\r\n\t\t        page.wait(10000);\r\n\t\t    }\r\n\t\t\t\r\n\t\t\tURL _url = new URL(url);\r\n\t\t\t\r\n\t\t    for(Cookie c : webClient.getCookies(_url)) {\r\n\t\t        if (c.getName().contains(&quot;cf_chl_2&quot;)) {\r\n        \t\t\t\r\n\t\t        \tCookie cook = new Cookie(c.getDomain(), c.getName(), c.getValue(), c.getPath(), -1, false);\r\n\t\t        \twebClient.getCookieManager().removeCookie(c);\r\n\t\t        \twebClient.getCookieManager().addCookie(cook);\r\n\t\t        }\r\n\t\t    }\r\n\t\t\t\r\n\t\t\tif (page.asXml().contains(&quot;Checking if the site connection is secure&quot;)) {\r\n\t\t\t\tlog.info(page.asXml());\r\n\t\t\t\t\r\n\t\t\t    page = webClient.getPage(url);\r\n\t\t\t    webClient.waitForBackgroundJavaScript(10_000);\r\n\t\t\t}\r\n\r\n(Some parts of this code, I got from this [question/answer][1])\r\n\r\n\r\nSome parts of the log I got so far...\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nAs you can see, `Checking if the site connection is secure` and `Proceeding...` appears. But... It&#180;s just it.... (Error: 1020, Firewall stuff...)...\r\n\r\nP.S.: This manually added cookie is to replace a cookie that was returning an error of negative max age.\r\n\r\n    [com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl] (JS executor for com.gargoylesoftware.htmlunit.WebClient@724c8784) set-cookie http-equiv meta tag: invalid cookie &#39;cf_chl_2=; Max-Age=-99999999;&#39;; reason: &#39;Negative &#39;max-age&#39; attribute: -99999999&#39;.\r\n\r\n\r\nSo please, in the name of the `Gods of Programming Languages`, how can I procceed to the final webpage? \r\n\r\nThanks!!!!\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/32232259/accessing-webpage-with-cloudflare-protection\r\n  [2]: https://i.stack.imgur.com/pHeI3.png","title":"Java Htmlunit Cloudflare protection stuck on redirecting to the final page","body":"<p>So, I am trying to access a website (using <code>Java Htmlunit - version 2.20 - can´t update it, company policies</code>) - it is a government website - <code>https://www2.aneel.gov.br:443/aplicacoes_liferay/tarifa/</code> - hosted by Cloudflare.</p>\n<p>When accessing via normal Browser, everything is normal. When accessing via <code>htmlunit</code>, Cloudflare starts the proccess of <code>Checking if the site connection is secure</code>.</p>\n<p>I can proceed to the next step, which is <code>Connection is secure - Proceeding...</code>\nBut it just stucks there.\nPlease, how can I bypass it correctly.</p>\n<p>P.S.: There is no way to have my <code>IP</code> on a whitelist for this. I must go through this verification and redirection on my own.</p>\n<p>Thanks in advance!</p>\n<p>Some code sample:</p>\n<pre><code>BrowserVersion chrome = new BrowserVersion(\n            &quot;Netscape&quot;, \n            &quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36&quot;, \n            &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36&quot;, \n            108);\n    chrome.setApplicationCodeName(&quot;Mozilla&quot;);\n    chrome.setVendor(&quot;Google Inc.&quot;);\n    chrome.setHtmlAcceptHeader(&quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&quot;);\n    chrome.setImgAcceptHeader(&quot;image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8&quot;);\n    chrome.setCssAcceptHeader(&quot;text/css,*/*;q=0.1&quot;);\n    chrome.setScriptAcceptHeader(&quot;*/*&quot;);\n    chrome.setBrowserLanguage(&quot;en-US,en;q=0.9,pt;q=0.8,mt;q=0.7&quot;);\n    chrome.setPlatform(&quot;Windows&quot;);\n    chrome.setUserLanguage(&quot;pt-BR&quot;);\n    chrome.setSystemLanguage(&quot;pt-BR&quot;);\n    \n    try (WebClient webClient = new WebClient(chrome)) {\n        String url = &quot;https://www2.aneel.gov.br:443/aplicacoes_liferay/tarifa/&quot;;\n        \n        // parâmetros do webclient\n        webClient.getOptions().setCssEnabled(true);\n        webClient.setJavaScriptTimeout(0);\n        webClient.getOptions().setThrowExceptionOnScriptError(false);\n        webClient.getOptions().setUseInsecureSSL(false);\n        webClient.getOptions().setThrowExceptionOnFailingStatusCode(false);\n        webClient.getOptions().setTimeout(0);\n        \n        CookieManager cookies = new CookieManager();\n        \n        cookies.setCookiesEnabled(true);\n        webClient.setCookieManager(cookies);\n        \n        \n        webClient.getOptions().setJavaScriptEnabled(true);\n        webClient.getOptions().setRedirectEnabled(true);\n        \n        webClient.waitForBackgroundJavaScript(10000);\n        webClient.waitForBackgroundJavaScriptStartingBefore(10000);\n        \n        webClient.getCache().setMaxSize(0);\n        \n        HtmlPage page = webClient.getPage(url);\n        webClient.getRefreshHandler().handleRefresh(page, new URL(url), 10);\n        \n        synchronized(page) {\n            page.wait(10000);\n        }\n        \n        URL _url = new URL(url);\n        \n        for(Cookie c : webClient.getCookies(_url)) {\n            if (c.getName().contains(&quot;cf_chl_2&quot;)) {\n                \n                Cookie cook = new Cookie(c.getDomain(), c.getName(), c.getValue(), c.getPath(), -1, false);\n                webClient.getCookieManager().removeCookie(c);\n                webClient.getCookieManager().addCookie(cook);\n            }\n        }\n        \n        if (page.asXml().contains(&quot;Checking if the site connection is secure&quot;)) {\n            log.info(page.asXml());\n            \n            page = webClient.getPage(url);\n            webClient.waitForBackgroundJavaScript(10_000);\n        }\n</code></pre>\n<p>(Some parts of this code, I got from this <a href=\"https://stackoverflow.com/questions/32232259/accessing-webpage-with-cloudflare-protection\">question/answer</a>)</p>\n<p>Some parts of the log I got so far...</p>\n<p><a href=\"https://i.stack.imgur.com/pHeI3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pHeI3.png\" alt=\"enter image description here\" /></a></p>\n<p>As you can see, <code>Checking if the site connection is secure</code> and <code>Proceeding...</code> appears. But... It´s just it.... (Error: 1020, Firewall stuff...)...</p>\n<p>P.S.: This manually added cookie is to replace a cookie that was returning an error of negative max age.</p>\n<pre><code>[com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl] (JS executor for com.gargoylesoftware.htmlunit.WebClient@724c8784) set-cookie http-equiv meta tag: invalid cookie 'cf_chl_2=; Max-Age=-99999999;'; reason: 'Negative 'max-age' attribute: -99999999'.\n</code></pre>\n<p>So please, in the name of the <code>Gods of Programming Languages</code>, how can I procceed to the final webpage?</p>\n<p>Thanks!!!!</p>\n"},{"tags":["java","spring-boot","file-io","operating-system","heap-memory"],"owner":{"account_id":16514934,"reputation":137,"user_id":11932679,"display_name":"Spring boot progammer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671268058,"creation_date":1671262510,"question_id":74832483,"body_markdown":"I am using Spring Boot to read through CSV file and processing the data. \r\nBut I notice, while reading the data and PipedOutputStream to write data into PipedInputStream and later reading the InputStream increases the heap memory usage? \r\nWhy is that happening since we are not storing anything in memory, the maximum heap memory for my system is 1GB and file size is 51MB. \r\nI am using the following code to read the file:\r\n```\r\n//data =&gt; FilePart data is read from API\r\n PipedOutputStream osPipe = new PipedOutputStream();\r\n    PipedInputStream isPipe = new PipedInputStream(osPipe);\r\n    DataBufferUtils.write(data, osPipe)\r\n        .doOnComplete(() -&gt; {\r\n            osPipe.close();\r\n        })\r\n        .subscribe(DataBufferUtils.releaseConsumer());\r\n    BufferedReader reader = new InputStreamReader(isPipe);\r\n    CsvToBean&lt;T&gt; cb = new CsvToBeanBuilder&lt;T&gt;(reader).withType(clazz).withFilter(\r\n        lineString -&gt; Arrays.stream(lineString).map(String::trim)\r\n            .anyMatch(value -&gt; value.length() &gt; 0)).build();\r\n    return cb.parse(); \r\n\r\n```","title":"JVM Heap memory usage increases with increase in writing data using PipedInputStream and PipedOutputStream","body":"<p>I am using Spring Boot to read through CSV file and processing the data.\nBut I notice, while reading the data and PipedOutputStream to write data into PipedInputStream and later reading the InputStream increases the heap memory usage?\nWhy is that happening since we are not storing anything in memory, the maximum heap memory for my system is 1GB and file size is 51MB.\nI am using the following code to read the file:</p>\n<pre><code>//data =&gt; FilePart data is read from API\n PipedOutputStream osPipe = new PipedOutputStream();\n    PipedInputStream isPipe = new PipedInputStream(osPipe);\n    DataBufferUtils.write(data, osPipe)\n        .doOnComplete(() -&gt; {\n            osPipe.close();\n        })\n        .subscribe(DataBufferUtils.releaseConsumer());\n    BufferedReader reader = new InputStreamReader(isPipe);\n    CsvToBean&lt;T&gt; cb = new CsvToBeanBuilder&lt;T&gt;(reader).withType(clazz).withFilter(\n        lineString -&gt; Arrays.stream(lineString).map(String::trim)\n            .anyMatch(value -&gt; value.length() &gt; 0)).build();\n    return cb.parse(); \n\n</code></pre>\n"},{"tags":["java","javax.sound.midi"],"answers":[{"tags":[],"owner":{"account_id":9026259,"reputation":1316,"user_id":6725459,"display_name":"jjazzboss"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671267667,"creation_date":1671267667,"answer_id":74832910,"question_id":74826672,"body_markdown":"To be notified when a Sequencer plays a Note ON/OFF, you need a custom Receiver and connect it to the Sequencer. \r\n\r\n    Receiver myReceiver = new Receiver()\r\n    {\r\n        public void send(MidiMessage message, long timeStamp)\r\n        {\r\n            // If it&#39;s a NOTE_ON/NOTE_OFF then do something, preferably on a different thread if it&#39;s a long task\r\n        }\r\n        ...\r\n    };\r\n\r\n    ...\r\n    sequencer.getTransmitter().setReceiver(myReceiver);","title":"Each time sequencer plays event, do something","body":"<p>To be notified when a Sequencer plays a Note ON/OFF, you need a custom Receiver and connect it to the Sequencer.</p>\n<pre><code>Receiver myReceiver = new Receiver()\n{\n    public void send(MidiMessage message, long timeStamp)\n    {\n        // If it's a NOTE_ON/NOTE_OFF then do something, preferably on a different thread if it's a long task\n    }\n    ...\n};\n\n...\nsequencer.getTransmitter().setReceiver(myReceiver);\n</code></pre>\n"}],"owner":{"account_id":21500466,"reputation":1,"user_id":15844761,"display_name":"fakezoo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671267667,"creation_date":1671205336,"question_id":74826672,"body_markdown":"We are trying to write a low-level guitar Hero clone for a semester project. \r\n\r\nI have created the track, sequence and sequencer for a song. Now I want the sequencer to notify another class every time its processes/plays an event of type NOTE_ON in its sequence. The other class would then set the timing for the user to hit a certain key on their keyboard.\r\n\r\n\r\n\r\nI do not know if what I am trying here is possible. This is my current code, it uses a sequence that has been filled by a track. The track has several MidiEvents, so far the only statuses are NOTE_ON and NOTE_OFF. \r\n\r\n\r\n```\r\npublic void startSequencer() throws MidiUnavailableException, InterruptedException, InvalidMidiDataException {\r\n\r\n    sequencer.open();\r\n    Thread.sleep(2000);\r\n\r\n\r\n    // sequence includes a single track\r\n    sequencer.setSequence(sequence);\r\n\r\n    //Start sequencer, music plays\r\n    sequencer.start();\r\n\r\n    //TODO Sync sequencer with UserInputHandler, via Sequencer.Syncmode?\r\n\r\n    //Check every 100 ms if the sequencer is still running, if not, close it.\r\n    while (sequencer.isRunning()) {\r\n        Thread.sleep(100);\r\n    }\r\n    sequencer.close();\r\n}\r\n```\r\n","title":"Each time sequencer plays event, do something","body":"<p>We are trying to write a low-level guitar Hero clone for a semester project.</p>\n<p>I have created the track, sequence and sequencer for a song. Now I want the sequencer to notify another class every time its processes/plays an event of type NOTE_ON in its sequence. The other class would then set the timing for the user to hit a certain key on their keyboard.</p>\n<p>I do not know if what I am trying here is possible. This is my current code, it uses a sequence that has been filled by a track. The track has several MidiEvents, so far the only statuses are NOTE_ON and NOTE_OFF.</p>\n<pre><code>public void startSequencer() throws MidiUnavailableException, InterruptedException, InvalidMidiDataException {\n\n    sequencer.open();\n    Thread.sleep(2000);\n\n\n    // sequence includes a single track\n    sequencer.setSequence(sequence);\n\n    //Start sequencer, music plays\n    sequencer.start();\n\n    //TODO Sync sequencer with UserInputHandler, via Sequencer.Syncmode?\n\n    //Check every 100 ms if the sequencer is still running, if not, close it.\n    while (sequencer.isRunning()) {\n        Thread.sleep(100);\n    }\n    sequencer.close();\n}\n</code></pre>\n"},{"tags":["java","maven","jenkins"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":3,"creation_date":1496160722,"post_id":44266942,"comment_id":75542361,"body_markdown":"Don&#39;t use MavenJob Type...simply using pipeline jobs etc. there you can decide which JDK version you use ...","body":"Don&#39;t use MavenJob Type...simply using pipeline jobs etc. there you can decide which JDK version you use ..."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1496161337,"post_id":44266942,"comment_id":75542730,"body_markdown":"The interaction is based on that Jenkins will try to be informed about finishing single modules and if there are artifacts being created and some other stuff. This is handled by a EventSpy implementation in Jenkins. That can cause issues like this.","body":"The interaction is based on that Jenkins will try to be informed about finishing single modules and if there are artifacts being created and some other stuff. This is handled by a EventSpy implementation in Jenkins. That can cause issues like this."},{"owner":{"account_id":1169697,"reputation":1416,"user_id":1147141,"accept_rate":42,"display_name":"bichito"},"score":0,"creation_date":1498478049,"post_id":44266942,"comment_id":76498787,"body_markdown":"Is there something about the 1.7 tool chain or just need 1.7 bytecode?","body":"Is there something about the 1.7 tool chain or just need 1.7 bytecode?"},{"owner":{"account_id":1223747,"reputation":1055,"user_id":1189810,"display_name":"JSamir"},"score":0,"creation_date":1498568041,"post_id":44266942,"comment_id":76542154,"body_markdown":"@khmarbaise if you post your comment as an answer I would accept it since that helped me solve the problem by using a pipeline job.","body":"@khmarbaise if you post your comment as an answer I would accept it since that helped me solve the problem by using a pipeline job."}],"answers":[{"tags":[],"owner":{"account_id":3936130,"reputation":723,"user_id":3252477,"display_name":"Kineolyan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1498477409,"creation_date":1498477409,"answer_id":44758972,"question_id":44266942,"body_markdown":"this is apparently a technical limitation of Jenkins plugin [**Maven Integration**](https://plugins.jenkins.io/maven-plugin).\r\n\r\n&gt; Because java serialized classes are exchanged between Jenkins master and Maven Jobs it is required that the JVM used to launch Maven is superior or equal to the version of Java for which Jenkins Master is built for.\r\n\r\nI suspect that you have a Jenkins version too recent, requiring a JDK version &gt;= 8.  \r\nAs the required version was 7, you could either use java 7 or 8 - or even 9. So your build succeeded with Java7, even if your Jenkins was started with Java8.\r\n\r\nYou can either downgrade your Jenkins installation, or move all your builds to Java8.\r\n\r\nCheers","title":"How to use Jenkins 2.63 with jobs which should be built using Java 1.7?","body":"<p>this is apparently a technical limitation of Jenkins plugin <a href=\"https://plugins.jenkins.io/maven-plugin\" rel=\"nofollow noreferrer\"><strong>Maven Integration</strong></a>.</p>\n\n<blockquote>\n  <p>Because java serialized classes are exchanged between Jenkins master and Maven Jobs it is required that the JVM used to launch Maven is superior or equal to the version of Java for which Jenkins Master is built for.</p>\n</blockquote>\n\n<p>I suspect that you have a Jenkins version too recent, requiring a JDK version >= 8.<br>\nAs the required version was 7, you could either use java 7 or 8 - or even 9. So your build succeeded with Java7, even if your Jenkins was started with Java8.</p>\n\n<p>You can either downgrade your Jenkins installation, or move all your builds to Java8.</p>\n\n<p>Cheers</p>\n"},{"tags":[],"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1498575787,"creation_date":1498575787,"answer_id":44783706,"question_id":44266942,"body_markdown":"The interaction is based on that Jenkins will try to be informed about finishing single modules and if there are artifacts being created and some other stuff. This is handled by a EventSpy implementation in Jenkins. That can cause issues like this.","title":"How to use Jenkins 2.63 with jobs which should be built using Java 1.7?","body":"<p>The interaction is based on that Jenkins will try to be informed about finishing single modules and if there are artifacts being created and some other stuff. This is handled by a EventSpy implementation in Jenkins. That can cause issues like this.</p>\n"},{"tags":[],"owner":{"account_id":379152,"reputation":3080,"user_id":732328,"accept_rate":40,"display_name":"Kayvan Tehrani"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1671267593,"creation_date":1512593791,"answer_id":47683327,"question_id":44266942,"body_markdown":"As you might probably know Jenkins &gt;= 2.54 requires Java &gt;= 8 thus Maven jobs must be launched with Java &gt;= 8\r\n\r\nBesides that the Error message is guiding you with:\r\n\r\n&gt; ***Use the Maven JDK Toolchains (plugin) to build your maven project***...\r\n\r\nUsing that plugin would probably help you to run your jenkins job using **Java 8** and also compile your project files using **Java 7**.\r\n\r\nI resolved my problem this way some years ago.\r\n\r\nYou can see more details on [this Answer][1]. \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/47669588/732328","title":"How to use Jenkins 2.63 with jobs which should be built using Java 1.7?","body":"<p>As you might probably know Jenkins &gt;= 2.54 requires Java &gt;= 8 thus Maven jobs must be launched with Java &gt;= 8</p>\n<p>Besides that the Error message is guiding you with:</p>\n<blockquote>\n<p><em><strong>Use the Maven JDK Toolchains (plugin) to build your maven project</strong></em>...</p>\n</blockquote>\n<p>Using that plugin would probably help you to run your jenkins job using <strong>Java 8</strong> and also compile your project files using <strong>Java 7</strong>.</p>\n<p>I resolved my problem this way some years ago.</p>\n<p>You can see more details on <a href=\"https://stackoverflow.com/a/47669588/732328\">this Answer</a>.</p>\n"},{"tags":[],"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1520416490,"creation_date":1520416490,"answer_id":49148879,"question_id":44266942,"body_markdown":"For using **Java 1.7** on *Jenkins &gt;= 2.54* you need to transform the *Maven project* in a *Free-style project*. In the *Free-style project* you can specify the *JDK* version. This is because starting from version *2.54*, *Jenkins* was upgraded to use *Java 8*.\r\n\r\n\r\nFrom Jenkins [release notes][1]:\r\n\r\n&gt; **Using the Maven project type with Java 7**\r\n&gt; \r\n&gt; Users with jobs configured with the &quot;Maven project&quot; type may not be\r\n&gt; able to use Java 7 for their Maven jobs. The correct behavior is not\r\n&gt; guaranteed so proceed at your own risk. The Maven Project uses Jenkins\r\n&gt; Remoting to establish &quot;interceptors&quot; within the Maven executable.\r\n&gt; Because of this, Maven uses Remoting and other Jenkins core classes,\r\n&gt; and this behavior may break an update\r\n\r\n\r\nYou can also see [here][2] how to create a *Free-style project* \r\n\r\n\r\n  [1]: https://jenkins.io/blog/2017/04/10/jenkins-has-upgraded-to-java-8/\r\n  [2]: https://wiki.jenkins.io/display/JENKINS/Building+a+software+project","title":"How to use Jenkins 2.63 with jobs which should be built using Java 1.7?","body":"<p>For using <strong>Java 1.7</strong> on <em>Jenkins >= 2.54</em> you need to transform the <em>Maven project</em> in a <em>Free-style project</em>. In the <em>Free-style project</em> you can specify the <em>JDK</em> version. This is because starting from version <em>2.54</em>, <em>Jenkins</em> was upgraded to use <em>Java 8</em>.</p>\n\n<p>From Jenkins <a href=\"https://jenkins.io/blog/2017/04/10/jenkins-has-upgraded-to-java-8/\" rel=\"nofollow noreferrer\">release notes</a>:</p>\n\n<blockquote>\n  <p><strong>Using the Maven project type with Java 7</strong></p>\n  \n  <p>Users with jobs configured with the \"Maven project\" type may not be\n  able to use Java 7 for their Maven jobs. The correct behavior is not\n  guaranteed so proceed at your own risk. The Maven Project uses Jenkins\n  Remoting to establish \"interceptors\" within the Maven executable.\n  Because of this, Maven uses Remoting and other Jenkins core classes,\n  and this behavior may break an update</p>\n</blockquote>\n\n<p>You can also see <a href=\"https://wiki.jenkins.io/display/JENKINS/Building+a+software+project\" rel=\"nofollow noreferrer\">here</a> how to create a <em>Free-style project</em> </p>\n"}],"owner":{"account_id":1223747,"reputation":1055,"user_id":1189810,"display_name":"JSamir"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2765,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":44783706,"answer_count":4,"score":4,"last_activity_date":1671267593,"creation_date":1496160063,"question_id":44266942,"body_markdown":"we have a Jenkins job which is/was configured to use JDK7. Upon inspecting the logs, i noticed following ERRORs:\r\n\r\n    ERROR: Invalid project setup: jenkins/security/MasterToSlaveCallable : Unsupported major.minor version 52.0\r\n    ERROR: [JENKINS-18403][JENKINS-28294] JDK &#39;JDK 1.7.0_45&#39; not supported to run Maven projects.\r\n    ERROR: Maven projects have to be launched with a Java version greater or equal to the minimum version required by the master.\r\n    ERROR: Use the Maven JDK Toolchains (plugin) to build your maven project with an older JDK.\r\n    ERROR: Retrying with slave Java and setting compile/test properties to point to /usr/java/jdk1.7.0_45/.\r\n\r\n\r\nAfter some googling it seems that there is some interaction between the Job and Jenkins itself. Since Jenkins is started with JDK8 and the Job with JDK7 it seems to produce this ERROR. The build is OK, because Jenkins then proceeds to build with JDK8. But we actually want this built with 1.7.\r\n\r\nSo the question is:\r\nIf we start Jenkins with JDK8, how can i get the Jobs to compile with JDK7 without this error?","title":"How to use Jenkins 2.63 with jobs which should be built using Java 1.7?","body":"<p>we have a Jenkins job which is/was configured to use JDK7. Upon inspecting the logs, i noticed following ERRORs:</p>\n\n<pre><code>ERROR: Invalid project setup: jenkins/security/MasterToSlaveCallable : Unsupported major.minor version 52.0\nERROR: [JENKINS-18403][JENKINS-28294] JDK 'JDK 1.7.0_45' not supported to run Maven projects.\nERROR: Maven projects have to be launched with a Java version greater or equal to the minimum version required by the master.\nERROR: Use the Maven JDK Toolchains (plugin) to build your maven project with an older JDK.\nERROR: Retrying with slave Java and setting compile/test properties to point to /usr/java/jdk1.7.0_45/.\n</code></pre>\n\n<p>After some googling it seems that there is some interaction between the Job and Jenkins itself. Since Jenkins is started with JDK8 and the Job with JDK7 it seems to produce this ERROR. The build is OK, because Jenkins then proceeds to build with JDK8. But we actually want this built with 1.7.</p>\n\n<p>So the question is:\nIf we start Jenkins with JDK8, how can i get the Jobs to compile with JDK7 without this error?</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc"],"comments":[{"owner":{"account_id":2522926,"reputation":30310,"user_id":2192903,"accept_rate":73,"display_name":"Arnaud Denoyelle"},"score":0,"creation_date":1569924613,"post_id":58182553,"comment_id":102744911,"body_markdown":"Did you try to annotate the DTO class as @Validated in the controller method signature ? something like `void foo(@Validated MyDTO dto)`","body":"Did you try to annotate the DTO class as @Validated in the controller method signature ? something like <code>void foo(@Validated MyDTO dto)</code>"},{"owner":{"account_id":8389931,"reputation":503,"user_id":6298969,"display_name":"Rahul"},"score":0,"creation_date":1569925137,"post_id":58182553,"comment_id":102745153,"body_markdown":"@ArnaudDenoyelle This DTO has been used in multiple location more than 25 files, Do I have to make changes in every file? Is there any other solution?","body":"@ArnaudDenoyelle This DTO has been used in multiple location more than 25 files, Do I have to make changes in every file? Is there any other solution?"},{"owner":{"account_id":11478953,"reputation":937,"user_id":8413680,"display_name":"Sujay Mohan"},"score":0,"creation_date":1569930304,"post_id":58182553,"comment_id":102747782,"body_markdown":"Does you app has starter - spring-boot-starter-web which will load hibernate Validator to dependency. Which will validate the bean. Please go through this link - https://stackoverflow.com/questions/48200444/spring-validation-vs-hibernate-validation?rq=1","body":"Does you app has starter - spring-boot-starter-web which will load hibernate Validator to dependency. Which will validate the bean. Please go through this link - <a href=\"https://stackoverflow.com/questions/48200444/spring-validation-vs-hibernate-validation?rq=1\" title=\"spring validation vs hibernate validation\">stackoverflow.com/questions/48200444/&hellip;</a>"},{"owner":{"account_id":4475914,"reputation":14400,"user_id":3641067,"accept_rate":73,"display_name":"bur&#230;quete"},"score":0,"creation_date":1571384055,"post_id":58182553,"comment_id":103230406,"body_markdown":"Check my answer, it should resolve your issue. But if `@NotNull` does not work while `@JsonPattern` works, then it might be the case with the wrong `@NotNull` being used. Otherwise it seems you forgot adding `@Valid` on your controller method.","body":"Check my answer, it should resolve your issue. But if <code>@NotNull</code> does not work while <code>@JsonPattern</code> works, then it might be the case with the wrong <code>@NotNull</code> being used. Otherwise it seems you forgot adding <code>@Valid</code> on your controller method."}],"answers":[{"tags":[],"owner":{"account_id":11025369,"reputation":101,"user_id":8098444,"display_name":"A. Lefaux"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1569924641,"creation_date":1569924641,"answer_id":58182589,"question_id":58182553,"body_markdown":"Have you got the right import ?  \r\nI use ```import javax.validation.constraints.NotNull;```","title":"@NotNull annotation is not working in Spring boot application","body":"<p>Have you got the right import ?<br>\nI use <code>import javax.validation.constraints.NotNull;</code></p>\n"},{"tags":[],"owner":{"account_id":11377012,"reputation":12762,"user_id":8340997,"display_name":"Anish B."},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1617544499,"creation_date":1569924890,"answer_id":58182663,"question_id":58182553,"body_markdown":"Your DTO class is correct. You have to use `@Valid` annotation. \r\n\r\nFor example :\r\n\r\n    @Controller\r\n    public class Controller {\r\n    \r\n        @PostMapping(&quot;/&quot;)\r\n        public String checkPersonInfo(@Valid AbstractDTO abstractDTO, BindingResult bindingResult) {\r\n    \r\n            if (bindingResult.hasErrors()) {\r\n                return &quot;some-page&quot;;\r\n            }\r\n            return &quot;some-other-page&quot;;\r\n        }\r\n    }\r\n\r\n**Refer to this &lt;a href=&quot;https://spring.io/guides/gs/validating-form-input/&quot;&gt;Spring Boot Example On Validating Form Input &lt;/a&gt; for reference.**\r\n\r\nWhy to use `@Valid` annotation ? \r\n\r\n*This allows you to validate the set of constraints applied on the data members of a class.*\r\n\r\n---\r\n\r\n*However, if you have XML based configuration in your project, then you have to add this below in the **applicationContext.xml** given below. (Source : &lt;a href=&quot;https://developer.ucsd.edu/develop/data-layer/jpa/java-validation-api.html&quot;&gt;here&lt;/a&gt;)*\r\n\r\n    &lt;bean\r\n        class=&quot;org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter&quot;&gt;\r\n        &lt;property name=&quot;webBindingInitializer&quot;&gt;\r\n            &lt;bean\r\n                class=&quot;org.springframework.web.bind.support.ConfigurableWebBindingInitializer&quot;&gt;\r\n                &lt;property name=&quot;validator&quot; ref=&quot;validator&quot; /&gt;\r\n            &lt;/bean&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt; \r\n    \r\n        &lt;bean id=&quot;validator&quot;\r\n            class=&quot;org.springframework.validation.beanvalidation.LocalValidatorFactoryBean&quot;&gt;\r\n        &lt;/bean&gt;","title":"@NotNull annotation is not working in Spring boot application","body":"<p>Your DTO class is correct. You have to use <code>@Valid</code> annotation.</p>\n<p>For example :</p>\n<pre><code>@Controller\npublic class Controller {\n\n    @PostMapping(&quot;/&quot;)\n    public String checkPersonInfo(@Valid AbstractDTO abstractDTO, BindingResult bindingResult) {\n\n        if (bindingResult.hasErrors()) {\n            return &quot;some-page&quot;;\n        }\n        return &quot;some-other-page&quot;;\n    }\n}\n</code></pre>\n<p><strong>Refer to this <a href=\"https://spring.io/guides/gs/validating-form-input/\" rel=\"noreferrer\">Spring Boot Example On Validating Form Input </a> for reference.</strong></p>\n<p>Why to use <code>@Valid</code> annotation ?</p>\n<p><em>This allows you to validate the set of constraints applied on the data members of a class.</em></p>\n<hr />\n<p><em>However, if you have XML based configuration in your project, then you have to add this below in the <strong>applicationContext.xml</strong> given below. (Source : <a href=\"https://developer.ucsd.edu/develop/data-layer/jpa/java-validation-api.html\" rel=\"noreferrer\">here</a>)</em></p>\n<pre><code>&lt;bean\n    class=&quot;org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter&quot;&gt;\n    &lt;property name=&quot;webBindingInitializer&quot;&gt;\n        &lt;bean\n            class=&quot;org.springframework.web.bind.support.ConfigurableWebBindingInitializer&quot;&gt;\n            &lt;property name=&quot;validator&quot; ref=&quot;validator&quot; /&gt;\n        &lt;/bean&gt;\n    &lt;/property&gt;\n&lt;/bean&gt; \n\n    &lt;bean id=&quot;validator&quot;\n        class=&quot;org.springframework.validation.beanvalidation.LocalValidatorFactoryBean&quot;&gt;\n    &lt;/bean&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4475914,"reputation":14400,"user_id":3641067,"accept_rate":73,"display_name":"bur&#230;quete"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1569924916,"creation_date":1569924916,"answer_id":58182668,"question_id":58182553,"body_markdown":"You have an endpoint with some request body like;\r\n\r\n    @RestController\r\n    public class TheController {\r\n    \r\n        @PostMapping(path = &quot;/doSomething&quot;, consumes = &quot;application/json&quot;, produces = &quot;application/json&quot;)\r\n        public void post(@Valid @RequestBody AbstractDTO request) {\r\n            //code\r\n        }\r\n    }\r\n\r\nYou need to have `@Valid` annotation for the request object. Only with this you&#39;d have validation enabled for `AbstractDTO` for `/doSomething` endpoint.\r\n\r\nCheck [here](https://www.baeldung.com/spring-boot-bean-validation), for more in depth details","title":"@NotNull annotation is not working in Spring boot application","body":"<p>You have an endpoint with some request body like;</p>\n\n<pre><code>@RestController\npublic class TheController {\n\n    @PostMapping(path = \"/doSomething\", consumes = \"application/json\", produces = \"application/json\")\n    public void post(@Valid @RequestBody AbstractDTO request) {\n        //code\n    }\n}\n</code></pre>\n\n<p>You need to have <code>@Valid</code> annotation for the request object. Only with this you'd have validation enabled for <code>AbstractDTO</code> for <code>/doSomething</code> endpoint.</p>\n\n<p>Check <a href=\"https://www.baeldung.com/spring-boot-bean-validation\" rel=\"noreferrer\">here</a>, for more in depth details</p>\n"},{"tags":[],"owner":{"account_id":11671380,"reputation":41,"user_id":8546331,"display_name":"nguyen"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1671267384,"creation_date":1671266280,"answer_id":74832782,"question_id":58182553,"body_markdown":"**Description**\r\n\r\n1. In my case, I define 1 parent class A has 3 sub class B, C, D such as:\r\n\r\n&gt; public A {   private B bCommand;   private C cCommand;   private D\r\n&gt; dCommand; }\r\n\r\n2. I annotated @NotNull, @NotBlank for some fields in 3 sub class.\r\nIn Controller, I have put @Valid for function like that:\r\n\r\n&gt; @PostMapping() public ResponseEntity create(@RequestBody @Valid A   \r\n&gt; command){ }\r\n\r\n**Solution**\r\n1. I put @Valid for sub class which has field(s) need to check constraint.\r\n2. Example:\r\nClass B, C have some fields which have constraint like not null\r\n\r\n&gt; public A {  @Valid   private B bCommand;  @Valid   private C cCommand;\r\n&gt; private D dCommand; }\r\n\r\n","title":"@NotNull annotation is not working in Spring boot application","body":"<p><strong>Description</strong></p>\n<ol>\n<li>In my case, I define 1 parent class A has 3 sub class B, C, D such as:</li>\n</ol>\n<blockquote>\n<p>public A {   private B bCommand;   private C cCommand;   private D\ndCommand; }</p>\n</blockquote>\n<ol start=\"2\">\n<li>I annotated @NotNull, @NotBlank for some fields in 3 sub class.\nIn Controller, I have put @Valid for function like that:</li>\n</ol>\n<blockquote>\n<p>@PostMapping() public ResponseEntity create(@RequestBody @Valid A<br />\ncommand){ }</p>\n</blockquote>\n<p><strong>Solution</strong></p>\n<ol>\n<li>I put @Valid for sub class which has field(s) need to check constraint.</li>\n<li>Example:\nClass B, C have some fields which have constraint like not null</li>\n</ol>\n<blockquote>\n<p>public A {  @Valid   private B bCommand;  @Valid   private C cCommand;\nprivate D dCommand; }</p>\n</blockquote>\n"}],"owner":{"account_id":8389931,"reputation":503,"user_id":6298969,"display_name":"Rahul"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54557,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"answer_count":4,"score":21,"last_activity_date":1671267384,"creation_date":1569924480,"question_id":58182553,"body_markdown":"Below is my DTO class.\r\n\r\n    public class AbstractDTO extends BaseDTO {\r\n\r\n        private Integer createdBy;\r\n    \r\n        @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = DATE_FORMAT)\r\n        @NotNull(message = &quot;createdDate may not be null&quot;)\r\n        private LocalDateTime createdDate;\r\n\r\n        private Integer lastModifiedBy;\r\n        @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = DATE_FORMAT)\r\n        private LocalDateTime lastModifiedDate;\r\n\r\n        private Boolean isActive;\r\n\r\n        // getter &amp; setters\r\n    }\r\n\r\nHere I am trying to annotate createdDate field as @NotNull but is it not working. It is allowing in request body and after executing the service in postman not getting any error.\r\n\r\nI have tried below options but no luck.\r\n\r\n**1) Tried to add maven dependency.**\r\n    \r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n**2) Tried to annotate DTO class as @Validated**\r\n\r\n**3) Tried to annotate createdDate field @Valid with @NotNull but still not luck.**\r\n\r\nPlease help me out with this issue. ","title":"@NotNull annotation is not working in Spring boot application","body":"<p>Below is my DTO class.</p>\n\n<pre><code>public class AbstractDTO extends BaseDTO {\n\n    private Integer createdBy;\n\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = DATE_FORMAT)\n    @NotNull(message = \"createdDate may not be null\")\n    private LocalDateTime createdDate;\n\n    private Integer lastModifiedBy;\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = DATE_FORMAT)\n    private LocalDateTime lastModifiedDate;\n\n    private Boolean isActive;\n\n    // getter &amp; setters\n}\n</code></pre>\n\n<p>Here I am trying to annotate createdDate field as @NotNull but is it not working. It is allowing in request body and after executing the service in postman not getting any error.</p>\n\n<p>I have tried below options but no luck.</p>\n\n<p><strong>1) Tried to add maven dependency.</strong></p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p><strong>2) Tried to annotate DTO class as @Validated</strong></p>\n\n<p><strong>3) Tried to annotate createdDate field @Valid with @NotNull but still not luck.</strong></p>\n\n<p>Please help me out with this issue. </p>\n"},{"tags":["java","try-with-resources"],"comments":[{"owner":{"account_id":12074363,"reputation":384,"user_id":8828452,"display_name":"Gryphon"},"score":1,"creation_date":1597255310,"post_id":63382197,"comment_id":112076087,"body_markdown":"An exception can be thrown during the ```close``` portion as well. So if the try block throws an exception, try-with-resources will attempt to close the filehandle, and if that _also_ throws an exception, then this would cover the case where both of them throw exceptions.\n\nFrom the same page:\n\n&quot;In the example writeToFileZipFileContents, an exception can be thrown from the try block, and **up to two exceptions can be thrown from the try-with-resources statement when it tries to close the ```ZipFile``` and ```BufferedWriter``` objects**&quot;","body":"An exception can be thrown during the <code>close</code> portion as well. So if the try block throws an exception, try-with-resources will attempt to close the filehandle, and if that <i>also</i> throws an exception, then this would cover the case where both of them throw exceptions.  From the same page:  &quot;In the example writeToFileZipFileContents, an exception can be thrown from the try block, and <b>up to two exceptions can be thrown from the try-with-resources statement when it tries to close the <code>ZipFile</code> and <code>BufferedWriter</code> objects</b>&quot;"}],"answers":[{"tags":[],"owner":{"account_id":123958,"reputation":109285,"user_id":318758,"accept_rate":100,"display_name":"Joni"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1597255396,"creation_date":1597255396,"answer_id":63382343,"question_id":63382197,"body_markdown":"&gt; How can an exception be thrown from both the try-with-resources statement and the try block ? If the exception is thrown from the try-with-resources statement, it means that resource initialization failed.\r\n\r\nThe *try-with-resources statement* not only initializes but also closes the resource, and closing *may* throw an exception.\r\n\r\nThis sentence comes right after a description of a similar situation when using *try-finally*, and compares it with *try-with-resources*.","title":"Exceptions from both try block and try-with-resources","body":"<blockquote>\n<p>How can an exception be thrown from both the try-with-resources statement and the try block ? If the exception is thrown from the try-with-resources statement, it means that resource initialization failed.</p>\n</blockquote>\n<p>The <em>try-with-resources statement</em> not only initializes but also closes the resource, and closing <em>may</em> throw an exception.</p>\n<p>This sentence comes right after a description of a similar situation when using <em>try-finally</em>, and compares it with <em>try-with-resources</em>.</p>\n"},{"tags":[],"owner":{"account_id":1601183,"reputation":44,"user_id":1482174,"display_name":"ice"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671267223,"creation_date":1671267223,"answer_id":74832864,"question_id":63382197,"body_markdown":"oracle documentation sucks. i wouldn&#39;t call try-with-resources block for implicit close methods, but rather for constructors and doc doesn&#39;t say anything about exception in constructors","title":"Exceptions from both try block and try-with-resources","body":"<p>oracle documentation sucks. i wouldn't call try-with-resources block for implicit close methods, but rather for constructors and doc doesn't say anything about exception in constructors</p>\n"}],"owner":{"account_id":9118599,"reputation":457,"user_id":6784881,"display_name":"Talos"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":332,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":63382343,"answer_count":2,"score":1,"last_activity_date":1671267223,"creation_date":1597254843,"question_id":63382197,"body_markdown":"[Documentation](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html) says\r\n&gt; However, in this example, if the methods `readLine` and `close` both throw exceptions, then the method `readFirstLineFromFileWithFinallyBlock` throws the exception thrown from the `finally` block; the exception thrown from the `try` block is suppressed. In contrast, in the example `readFirstLineFromFile`, **if exceptions are thrown from both the `try` block and the `try`-with-resources statement**, then the method `readFirstLineFromFile` throws the exception thrown from the `try` block; the exception thrown from the `try`-with-resources block is suppressed. In Java SE 7 and later, you can retrieve suppressed exceptions; see the section Suppressed Exceptions for more information.\r\n\r\nI don&#39;t understand the bold part\r\n&gt; ... **if exceptions are thrown from both the `try` block and the `try`-with-resources statement** ...\r\n\r\nHow can an exception be thrown from both the `try`-with-resources statement and the `try` block ? If the exception is thrown from the `try`-with-resources statement, it means that resource initialization failed. In this case, `try` block is never executed. Thus the previous statement can&#39;t happen.\r\n\r\nI must have misunderstood this [documentation](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html) and how `try`-with-resources works. Can you provide example where the bold statement actually happens ?\r\n\r\n&lt;hr&gt;\r\nMentioned methods\r\n\r\n```\r\nstatic String readFirstLineFromFile(String path) throws IOException {\r\n    try (BufferedReader br =\r\n                   new BufferedReader(new FileReader(path))) {\r\n        return br.readLine();\r\n    }\r\n}\r\n```\r\n\r\n```\r\nstatic String readFirstLineFromFileWithFinallyBlock(String path)\r\n                                                     throws IOException {\r\n    BufferedReader br = new BufferedReader(new FileReader(path));\r\n    try {\r\n        return br.readLine();\r\n    } finally {\r\n        if (br != null) br.close();\r\n    }\r\n}\r\n```\r\n\r\n","title":"Exceptions from both try block and try-with-resources","body":"<p><a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\">Documentation</a> says</p>\n<blockquote>\n<p>However, in this example, if the methods <code>readLine</code> and <code>close</code> both throw exceptions, then the method <code>readFirstLineFromFileWithFinallyBlock</code> throws the exception thrown from the <code>finally</code> block; the exception thrown from the <code>try</code> block is suppressed. In contrast, in the example <code>readFirstLineFromFile</code>, <strong>if exceptions are thrown from both the <code>try</code> block and the <code>try</code>-with-resources statement</strong>, then the method <code>readFirstLineFromFile</code> throws the exception thrown from the <code>try</code> block; the exception thrown from the <code>try</code>-with-resources block is suppressed. In Java SE 7 and later, you can retrieve suppressed exceptions; see the section Suppressed Exceptions for more information.</p>\n</blockquote>\n<p>I don't understand the bold part</p>\n<blockquote>\n<p>... <strong>if exceptions are thrown from both the <code>try</code> block and the <code>try</code>-with-resources statement</strong> ...</p>\n</blockquote>\n<p>How can an exception be thrown from both the <code>try</code>-with-resources statement and the <code>try</code> block ? If the exception is thrown from the <code>try</code>-with-resources statement, it means that resource initialization failed. In this case, <code>try</code> block is never executed. Thus the previous statement can't happen.</p>\n<p>I must have misunderstood this <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\">documentation</a> and how <code>try</code>-with-resources works. Can you provide example where the bold statement actually happens ?</p>\n<hr>\nMentioned methods\n<pre><code>static String readFirstLineFromFile(String path) throws IOException {\n    try (BufferedReader br =\n                   new BufferedReader(new FileReader(path))) {\n        return br.readLine();\n    }\n}\n</code></pre>\n<pre><code>static String readFirstLineFromFileWithFinallyBlock(String path)\n                                                     throws IOException {\n    BufferedReader br = new BufferedReader(new FileReader(path));\n    try {\n        return br.readLine();\n    } finally {\n        if (br != null) br.close();\n    }\n}\n</code></pre>\n"},{"tags":["java","log4j2"],"answers":[{"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671267049,"creation_date":1671267049,"answer_id":74832850,"question_id":74813074,"body_markdown":"When you call one of the logger methods, Log4j2 creates a [`Message`](https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/Message.html), which usually has a fixed string representation.\r\n\r\nMost methods create [`ParameterizedMessage`](https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/ParameterizedMessage.html)s (cf. [available messages](https://logging.apache.org/log4j/2.x/manual/messages.html)), that use [`StringBuilder#append`](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/StringBuilder.html) to format your parameters. This does not provide any alternative representation for integers.\r\n\r\nIf you want a different format you can:\r\n\r\n1. Use [`Logger#printf`](https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/Logger.html#printf-org.apache.logging.log4j.Level-java.lang.String-java.lang.Object...-) which interprets your format string using [`java.util.Formatter`](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Formatter.html) and creates a [`StringFormattedMessage`](https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/StringFormattedMessage.html):\r\n\r\n   ```lang-java\r\n   log.printf(Level.INFO, &quot;Reading %,d entries (multiplied with one million)&quot;,\r\n           entries * 1_000_000);\r\n   ```\r\n\r\n   As you can deduce from the method signature, it always creates a temporary object array and is not garbage-free.\r\n\r\n1. When you create your logger, you can specify a different [`MessageFactory`](https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/MessageFactory.html). If you use [StringFormatterMessageFactory](https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/StringFormatterMessageFactory.html), **all** your messages will be formatted with `java.util.Formatter`:\r\n\r\n   ```lang-java\r\n   final Logger log = LogManager.getLogger(MyClass.class,\r\n           StringFormatterMessageFactory.INSTANCE);\r\n   log.info(&quot;Reading %,d entries (multiplied with one million)&quot;, entries * 1_000_000);\r\n   ```\r\n\r\n   This solution does **not** create temporary object arrays.\r\n\r\n1. You can also use [`FormattedMessageFactory`](https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/FormattedMessageFactory.html), which dynamically determines if your format string conforms to `java.util.Formatter`, `java.text.MessageFormat` or uses simple `{}` placeholders. This flexibility, of course, comes at a slight performance cost.","title":"Log4J2 Thousands Delimiter","body":"<p>When you call one of the logger methods, Log4j2 creates a <a href=\"https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/Message.html\" rel=\"nofollow noreferrer\"><code>Message</code></a>, which usually has a fixed string representation.</p>\n<p>Most methods create <a href=\"https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/ParameterizedMessage.html\" rel=\"nofollow noreferrer\"><code>ParameterizedMessage</code></a>s (cf. <a href=\"https://logging.apache.org/log4j/2.x/manual/messages.html\" rel=\"nofollow noreferrer\">available messages</a>), that use <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/StringBuilder.html\" rel=\"nofollow noreferrer\"><code>StringBuilder#append</code></a> to format your parameters. This does not provide any alternative representation for integers.</p>\n<p>If you want a different format you can:</p>\n<ol>\n<li><p>Use <a href=\"https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/Logger.html#printf-org.apache.logging.log4j.Level-java.lang.String-java.lang.Object...-\" rel=\"nofollow noreferrer\"><code>Logger#printf</code></a> which interprets your format string using <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Formatter.html\" rel=\"nofollow noreferrer\"><code>java.util.Formatter</code></a> and creates a <a href=\"https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/StringFormattedMessage.html\" rel=\"nofollow noreferrer\"><code>StringFormattedMessage</code></a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>log.printf(Level.INFO, &quot;Reading %,d entries (multiplied with one million)&quot;,\n        entries * 1_000_000);\n</code></pre>\n<p>As you can deduce from the method signature, it always creates a temporary object array and is not garbage-free.</p>\n</li>\n<li><p>When you create your logger, you can specify a different <a href=\"https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/MessageFactory.html\" rel=\"nofollow noreferrer\"><code>MessageFactory</code></a>. If you use <a href=\"https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/StringFormatterMessageFactory.html\" rel=\"nofollow noreferrer\">StringFormatterMessageFactory</a>, <strong>all</strong> your messages will be formatted with <code>java.util.Formatter</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final Logger log = LogManager.getLogger(MyClass.class,\n        StringFormatterMessageFactory.INSTANCE);\nlog.info(&quot;Reading %,d entries (multiplied with one million)&quot;, entries * 1_000_000);\n</code></pre>\n<p>This solution does <strong>not</strong> create temporary object arrays.</p>\n</li>\n<li><p>You can also use <a href=\"https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/FormattedMessageFactory.html\" rel=\"nofollow noreferrer\"><code>FormattedMessageFactory</code></a>, which dynamically determines if your format string conforms to <code>java.util.Formatter</code>, <code>java.text.MessageFormat</code> or uses simple <code>{}</code> placeholders. This flexibility, of course, comes at a slight performance cost.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":16376965,"reputation":13,"user_id":11828840,"display_name":"Adler auf H&#246;henflug"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":74832850,"answer_count":1,"score":-1,"last_activity_date":1671267049,"creation_date":1671114417,"question_id":74813074,"body_markdown":"Anybody an idea how I include the delimiter for the thousand power in big numbers using the `{}` annotation?\r\n```\r\nlog.info(&quot;Reading {} entries (multiplied with one million)&quot;, entries * 1_000_000);\r\n```\r\n\r\nOutput (currently):\r\n```\r\nReading 80000000 entries (multiplied with one million)\r\n```\r\n\r\nOutput (desired):\r\n```\r\nReading 80,000,000 entries (multiplied with one million)\r\n```\r\n\r\nIs there a way to realize this directly in Log4J2 without using an additional formatter like e.g. `DecimalFormat`?","title":"Log4J2 Thousands Delimiter","body":"<p>Anybody an idea how I include the delimiter for the thousand power in big numbers using the <code>{}</code> annotation?</p>\n<pre><code>log.info(&quot;Reading {} entries (multiplied with one million)&quot;, entries * 1_000_000);\n</code></pre>\n<p>Output (currently):</p>\n<pre><code>Reading 80000000 entries (multiplied with one million)\n</code></pre>\n<p>Output (desired):</p>\n<pre><code>Reading 80,000,000 entries (multiplied with one million)\n</code></pre>\n<p>Is there a way to realize this directly in Log4J2 without using an additional formatter like e.g. <code>DecimalFormat</code>?</p>\n"},{"tags":["java","hibernate","orm","quarkus","graalvm"],"answers":[{"tags":[],"owner":{"account_id":385127,"reputation":6284,"user_id":742081,"display_name":"Ladicek"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1573461094,"creation_date":1573461094,"answer_id":58797886,"question_id":58797453,"body_markdown":"Panache is purely optional and you can stick with plain JPA, as documented in https://quarkus.io/guides/hibernate-orm.\r\n\r\nIf you could explain why you think you have to use Panache, I believe that would be interesting for the Quarkus team.","title":"Quarkus without heavy dependencies on Panache?","body":"<p>Panache is purely optional and you can stick with plain JPA, as documented in <a href=\"https://quarkus.io/guides/hibernate-orm\" rel=\"noreferrer\">https://quarkus.io/guides/hibernate-orm</a>.</p>\n\n<p>If you could explain why you think you have to use Panache, I believe that would be interesting for the Quarkus team.</p>\n"},{"tags":[],"owner":{"account_id":3209522,"reputation":33,"user_id":2709781,"display_name":"theoblade"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671266943,"creation_date":1671266943,"answer_id":74832838,"question_id":58797453,"body_markdown":"First of all, I totally agree. I feel it&#39;s going against the idea of spec first.\r\n\r\nBut I have the feeling that the idea is to extend Quarkus reactive capabilities which they already admitted is currently only available for REST resources.\r\n\r\nIf you stick on JPA I guess you won&#39;t have access to Mutuniy features, unlike if you use Panache and Hibernate Reactive.","title":"Quarkus without heavy dependencies on Panache?","body":"<p>First of all, I totally agree. I feel it's going against the idea of spec first.</p>\n<p>But I have the feeling that the idea is to extend Quarkus reactive capabilities which they already admitted is currently only available for REST resources.</p>\n<p>If you stick on JPA I guess you won't have access to Mutuniy features, unlike if you use Panache and Hibernate Reactive.</p>\n"}],"owner":{"account_id":1104623,"reputation":20026,"user_id":1103561,"accept_rate":55,"display_name":"4ntoine"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2721,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":58797886,"answer_count":2,"score":6,"last_activity_date":1671266943,"creation_date":1573458910,"question_id":58797453,"body_markdown":"I like the idea of using JAX-RS in Quarkus as it will make the code not dependent on framework implementation. However when it comes to DB [we&#39;re proposed][1] to use &quot;Panache&quot; and extend the DB entities from `PanacheEntity`. I guess it&#39;s very handy and good for AOT work (what is basically Quarkus is trying to do) and simplifies Quarkus work a lot, but it introduces heavy dependency on particular implementation and we can&#39;t use pure JPA modules because of that.\r\n\r\nThis conflicts with &quot;clean architecture&quot; and make testing of such DB module complicated [if possible at all]. Let&#39;s say i&#39;d like to be able to use the same DB module (using pure JPA annotations only) for both Spring and Quarkus-based app modules. It forces me to duplicate the code or cheat in terms of design purity.\r\n\r\nIs there any possibility to use pure JPA annotations for persistence and probably pay the price with plugins (that modify the code during compilations) or by using of ORM framework(s) that do not do runtime bytecode modification/use reflection? Any examples?\r\n\r\n\r\nPS. Congrats on [1.0][2] release! Good job, Quarkus team.\r\n\r\n\r\n  [1]: https://quarkus.io/guides/hibernate-orm-panache\r\n  [2]: https://quarkus.io/blog/announcing-quarkus-1-0/","title":"Quarkus without heavy dependencies on Panache?","body":"<p>I like the idea of using JAX-RS in Quarkus as it will make the code not dependent on framework implementation. However when it comes to DB <a href=\"https://quarkus.io/guides/hibernate-orm-panache\" rel=\"noreferrer\">we're proposed</a> to use \"Panache\" and extend the DB entities from <code>PanacheEntity</code>. I guess it's very handy and good for AOT work (what is basically Quarkus is trying to do) and simplifies Quarkus work a lot, but it introduces heavy dependency on particular implementation and we can't use pure JPA modules because of that.</p>\n\n<p>This conflicts with \"clean architecture\" and make testing of such DB module complicated [if possible at all]. Let's say i'd like to be able to use the same DB module (using pure JPA annotations only) for both Spring and Quarkus-based app modules. It forces me to duplicate the code or cheat in terms of design purity.</p>\n\n<p>Is there any possibility to use pure JPA annotations for persistence and probably pay the price with plugins (that modify the code during compilations) or by using of ORM framework(s) that do not do runtime bytecode modification/use reflection? Any examples?</p>\n\n<p>PS. Congrats on <a href=\"https://quarkus.io/blog/announcing-quarkus-1-0/\" rel=\"noreferrer\">1.0</a> release! Good job, Quarkus team.</p>\n"},{"tags":["java","logging","logback"],"answers":[{"tags":[],"owner":{"account_id":8669647,"reputation":188,"user_id":6810828,"display_name":"aleshka-batman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671266611,"creation_date":1671266611,"answer_id":74832810,"question_id":74828961,"body_markdown":"There is no direct way to do it.\r\n\r\nThe Appender silently discards event:\r\n\r\n[AsyncAppenderBase.java][1]\r\n```java\r\n    @Override\r\n    protected void append(E eventObject) {\r\n        if (isQueueBelowDiscardingThreshold() &amp;&amp; isDiscardable(eventObject)) {\r\n            return;\r\n        }\r\n        preprocess(eventObject);\r\n        put(eventObject);\r\n    }\r\n```\r\n\r\n\r\n  [1]: https://github.com/qos-ch/logback/blob/master/logback-core/src/main/java/ch/qos/logback/core/AsyncAppenderBase.java#L161\r\n\r\nHowever, you can create your own appender by extending `AsyncAppenderBase`  or `AsyncAppender` and override `append` method with your custom logic.","title":"Logback - how can you tell AsyncAppender&#39;s queue is full and starts dropping events?","body":"<p>There is no direct way to do it.</p>\n<p>The Appender silently discards event:</p>\n<p><a href=\"https://github.com/qos-ch/logback/blob/master/logback-core/src/main/java/ch/qos/logback/core/AsyncAppenderBase.java#L161\" rel=\"nofollow noreferrer\">AsyncAppenderBase.java</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    protected void append(E eventObject) {\n        if (isQueueBelowDiscardingThreshold() &amp;&amp; isDiscardable(eventObject)) {\n            return;\n        }\n        preprocess(eventObject);\n        put(eventObject);\n    }\n</code></pre>\n<p>However, you can create your own appender by extending <code>AsyncAppenderBase</code>  or <code>AsyncAppender</code> and override <code>append</code> method with your custom logic.</p>\n"}],"owner":{"account_id":7262222,"reputation":105,"user_id":5538455,"display_name":"DECEMCLMC"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":185,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74832810,"answer_count":1,"score":0,"last_activity_date":1671266611,"creation_date":1671218899,"question_id":74828961,"body_markdown":"Is there a way to know that logback is discarding logging events because the queue is full? Is it logged anywhere?","title":"Logback - how can you tell AsyncAppender&#39;s queue is full and starts dropping events?","body":"<p>Is there a way to know that logback is discarding logging events because the queue is full? Is it logged anywhere?</p>\n"},{"tags":["java","multithreading","asynchronous","design-patterns","concurrency"],"comments":[{"owner":{"account_id":292208,"reputation":10665,"user_id":2245707,"accept_rate":17,"display_name":"pveentjer"},"score":0,"creation_date":1671259641,"post_id":74832255,"comment_id":132065400,"body_markdown":"I doubt that spawning a thread for every request is a good thing because you have unbound threads in your system and this can lead to all kinds of problems. Probably better to use a threadpool. Using a fixed timeout is also problematic because it can lead to false positives: so a test fails even though the change will appear eventually.  One way to deal with this is to have a single thread in the test class that is shared between all tests and checks for each of the tests if the desired state is set at an interval of e.g. 100ms. And you can give a long timeout for the test e.g. 30s.","body":"I doubt that spawning a thread for every request is a good thing because you have unbound threads in your system and this can lead to all kinds of problems. Probably better to use a threadpool. Using a fixed timeout is also problematic because it can lead to false positives: so a test fails even though the change will appear eventually.  One way to deal with this is to have a single thread in the test class that is shared between all tests and checks for each of the tests if the desired state is set at an interval of e.g. 100ms. And you can give a long timeout for the test e.g. 30s."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1671262136,"post_id":74832255,"comment_id":132065688,"body_markdown":"If I am understanding your description correctly, the real problem here is the design / architecture of your REST service.  For a start, doing the database writes asynchronously sounds wrong, and having a single (?) main thread for business logic is wrong.","body":"If I am understanding your description correctly, the real problem here is the design / architecture of your REST service.  For a start, doing the database writes asynchronously sounds wrong, and having a single (?) main thread for business logic is wrong."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1671262543,"post_id":74832255,"comment_id":132065736,"body_markdown":"But one way to deal with testing would be to use mocks to test the business logic handling and the database separately.","body":"But one way to deal with testing would be to use mocks to test the business logic handling and the database separately."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1671263094,"post_id":74832255,"comment_id":132065803,"body_markdown":"Your title is unclear and somewhat off-track from your question. I suggest you rewrite to summarize your actual question.","body":"Your title is unclear and somewhat off-track from your question. I suggest you rewrite to summarize your actual question."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1671295860,"post_id":74832255,"comment_id":132070866,"body_markdown":"Don&#39;t use `sleep()` to coordinate the activity of threads. If thread T needs the result of some task that thread U performs &quot;aysnchronously,&quot; then you should use some thread-to-thread signalling means (Semaphore, CompletableFuture, BlockingQueue, Exchanger,...) that allows thread T to either (A) wait until the _exact moment_ when thread U signals that the task is complete and the result is ready, or (B) not wait at all if the task was already completed.","body":"Don&#39;t use <code>sleep()</code> to coordinate the activity of threads. If thread T needs the result of some task that thread U performs &quot;aysnchronously,&quot; then you should use some thread-to-thread signalling means (Semaphore, CompletableFuture, BlockingQueue, Exchanger,...) that allows thread T to either (A) wait until the <i>exact moment</i> when thread U signals that the task is complete and the result is ready, or (B) not wait at all if the task was already completed."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1671296284,"post_id":74832255,"comment_id":132070935,"body_markdown":"Don&#39;t test routines that directly call `sleep()`. (This is another good reason for not using `sleep()` at all.) If there&#39;s some reason why a thread absolutely _must_ sleep (e.g., in order to schedule real-time activities), then you can have it call some `o.sleep()` method, where `o` is an object that can be [_mocked_](https://en.wikipedia.org/wiki/Test_double). Then, your tests can verify that the routine calls `o.sleep(n)` when it is supposed to do, but without _actually_ sleeping for `n` milliseconds.","body":"Don&#39;t test routines that directly call <code>sleep()</code>. (This is another good reason for not using <code>sleep()</code> at all.) If there&#39;s some reason why a thread absolutely <i>must</i> sleep (e.g., in order to schedule real-time activities), then you can have it call some <code>o.sleep()</code> method, where <code>o</code> is an object that can be <a href=\"https://en.wikipedia.org/wiki/Test_double\" rel=\"nofollow noreferrer\"><i>mocked</i></a>. Then, your tests can verify that the routine calls <code>o.sleep(n)</code> when it is supposed to do, but without <i>actually</i> sleeping for <code>n</code> milliseconds."}],"answers":[{"tags":[],"owner":{"account_id":16523805,"reputation":56,"user_id":11939169,"display_name":"K3v1n 0X90"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671266361,"creation_date":1671266361,"answer_id":74832791,"question_id":74832255,"body_markdown":"I would suggest to change your api design if possible. One possible solution could be to have your first api call respond with http 202 accepted and return some kind of job ID to the client. With this job ID the client could check the progress via a GET on another endpoint. This would allow you to have polling in your test without hardcoding some sleep values. \r\n\r\nHere is a example that shows the process in a bit more detail. \r\n\r\nhttps://restfulapi.net/http-status-202-accepted/","title":"Alternative to Thread.sleep() for for better performance","body":"<p>I would suggest to change your api design if possible. One possible solution could be to have your first api call respond with http 202 accepted and return some kind of job ID to the client. With this job ID the client could check the progress via a GET on another endpoint. This would allow you to have polling in your test without hardcoding some sleep values.</p>\n<p>Here is a example that shows the process in a bit more detail.</p>\n<p><a href=\"https://restfulapi.net/http-status-202-accepted/\" rel=\"nofollow noreferrer\">https://restfulapi.net/http-status-202-accepted/</a></p>\n"}],"owner":{"account_id":21507820,"reputation":97,"user_id":15850958,"display_name":"mitali"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":392,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671266361,"creation_date":1671259129,"question_id":74832255,"body_markdown":"I have developed a REST service. The service have one Api endpoint: v1/customer. This Api\r\ndoes two things:\r\n1) It executes the business logic in main thread \r\n2) Spawns a child thread to perform the non critical DB writes. The main thread returns response to client immediately, whereas the child thread write to DB asynchronously.\r\n\r\nAs both of the these operations Step 1 and 2 are not synchronous, it is becoming increasingly challenging to test both of these scenario. \r\nLet&#39;s say when I try to test the API. I am testing two things (api response and DB writes)\r\nAs the DB writes happen async fashion. I have to use a Thread.sleep(2000). This process is not scalable and doesn&#39;t yield right result. Soon I might have 1000 test cases to run and the total time to run all these testcases will increase enormously.\r\nWhat design technique shall I use to test the DB writes keeping performance and execution time in mind.","title":"Alternative to Thread.sleep() for for better performance","body":"<p>I have developed a REST service. The service have one Api endpoint: v1/customer. This Api\ndoes two things:</p>\n<ol>\n<li>It executes the business logic in main thread</li>\n<li>Spawns a child thread to perform the non critical DB writes. The main thread returns response to client immediately, whereas the child thread write to DB asynchronously.</li>\n</ol>\n<p>As both of the these operations Step 1 and 2 are not synchronous, it is becoming increasingly challenging to test both of these scenario.\nLet's say when I try to test the API. I am testing two things (api response and DB writes)\nAs the DB writes happen async fashion. I have to use a Thread.sleep(2000). This process is not scalable and doesn't yield right result. Soon I might have 1000 test cases to run and the total time to run all these testcases will increase enormously.\nWhat design technique shall I use to test the DB writes keeping performance and execution time in mind.</p>\n"},{"tags":["java","jexl"],"answers":[{"tags":[],"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1322308536,"creation_date":1322308536,"answer_id":8278235,"question_id":8278218,"body_markdown":"You need to make [commons-logging][1] jar available in classpath at runtime\r\n\r\n\r\n  [1]: http://commons.apache.org/logging/download_logging.cgi","title":"Can&#39;t create JexlEngine object","body":"<p>You need to make <a href=\"http://commons.apache.org/logging/download_logging.cgi\" rel=\"nofollow\">commons-logging</a> jar available in classpath at runtime</p>\n"},{"tags":[],"owner":{"account_id":17335028,"reputation":41,"user_id":12557126,"display_name":"mohammad.sh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671265644,"creation_date":1671265644,"answer_id":74832730,"question_id":8278218,"body_markdown":"I also encountered the same error (Caused by: java.lang.ClassNotFoundException: org.apache.commons.jexl3.MapContext) when I used the following dependency:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.jxls&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jxls&lt;/artifactId&gt;\r\n        &lt;version&gt;2.12.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.jxls&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jxls-poi&lt;/artifactId&gt;\r\n        &lt;version&gt;2.12.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n Just add the following line to your pom:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n        &lt;artifactId&gt;commons-jexl3&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAnd the project will be executed correctly.","title":"Can&#39;t create JexlEngine object","body":"<p>I also encountered the same error (Caused by: java.lang.ClassNotFoundException: org.apache.commons.jexl3.MapContext) when I used the following dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.jxls&lt;/groupId&gt;\n    &lt;artifactId&gt;jxls&lt;/artifactId&gt;\n    &lt;version&gt;2.12.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.jxls&lt;/groupId&gt;\n    &lt;artifactId&gt;jxls-poi&lt;/artifactId&gt;\n    &lt;version&gt;2.12.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Just add the following line to your pom:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-jexl3&lt;/artifactId&gt;\n    &lt;version&gt;3.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And the project will be executed correctly.</p>\n"}],"owner":{"account_id":399082,"reputation":6427,"user_id":764182,"accept_rate":57,"display_name":"Dmitry Belaventsev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1393,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":8278235,"answer_count":2,"score":1,"last_activity_date":1671265644,"creation_date":1322308420,"question_id":8278218,"body_markdown":"I write the following class:\r\n\r\n    import org.apache.commons.jexl2.*;\r\n    \r\n    public class NelderMead {\r\n    \t// контсанты\r\n    \tprivate static int \t\tM = 3;\r\n    \tprivate static double \tE = 0.005;\r\n    \tprivate static double\tA = 1.000;\r\n    \tprivate static double\tB = 0.500;\r\n    \tprivate static double\tY = 2.000;\r\n    \t\r\n    \t// переменные\r\n    \tprivate JexlEngine jexl = new JexlEngine();\r\n    \tprivate Expression func;\r\n    \tprivate String funcString = &quot;&quot;;\r\n    \tprivate MapContext[] iterations;\r\n    \t\r\n    \tpublic NelderMead(){\r\n    \t\tthis.jexl = new JexlEngine();\r\n    \t}\r\n    \t\r\n    \tpublic NelderMead(String funcString){\r\n    \t\tthis.jexl = new JexlEngine();\r\n    \t\tthis.setFunc(funcString);\r\n    \t}\r\n    \t\r\n    \t\r\n    \tpublic void setFunc(String funcString){\r\n    \t\tthis.funcString = funcString;\r\n    \t\tthis.func = this.jexl.createExpression(funcString);\r\n    \t}\r\n    \t\r\n    \tpublic double funcEval(MapContext args){\r\n    \t\treturn (Double) this.func.evaluate(args);\r\n    \t}\r\n    \t\r\n    \tpublic boolean checkCriterian(){\r\n    \t\treturn true;\r\n    \t}\r\n    }\r\n\r\nBut the I create object of this class I have the foolowing error:\r\n\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory\r\n    \tat org.apache.commons.jexl2.JexlEngine$UberspectHolder.&lt;clinit&gt;(JexlEngine.java:121)\r\n    \tat org.apache.commons.jexl2.JexlEngine.getUberspect(JexlEngine.java:205)\r\n    \tat org.apache.commons.jexl2.JexlEngine.&lt;init&gt;(JexlEngine.java:182)\r\n    \tat org.apache.commons.jexl2.JexlEngine.&lt;init&gt;(JexlEngine.java:170)\r\n    \tat NelderMead.&lt;init&gt;(NelderMead.java:22)\r\n    \tat Test.main(Test.java:10)\r\n    Caused by: java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory\r\n    \tat java.net.URLClassLoader$1.run(URLClassLoader.java:202)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.net.URLClassLoader.findClass(URLClassLoader.java:190)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:306)\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:247)\r\n    \t... 6 more\r\non first line of the constructor (when create an object of JexlEngine):\r\n\r\n\tpublic NelderMead(String funcString){\r\n\t\tthis.jexl = new JexlEngine();\r\n\t\tthis.setFunc(funcString);\r\n\t}\r\n\r\n\r\nCould you help me - why this code cause the errors?\r\n\r\nPS\r\nI use .jar file to use this lib.","title":"Can&#39;t create JexlEngine object","body":"<p>I write the following class:</p>\n\n<pre><code>import org.apache.commons.jexl2.*;\n\npublic class NelderMead {\n    // контсанты\n    private static int      M = 3;\n    private static double   E = 0.005;\n    private static double   A = 1.000;\n    private static double   B = 0.500;\n    private static double   Y = 2.000;\n\n    // переменные\n    private JexlEngine jexl = new JexlEngine();\n    private Expression func;\n    private String funcString = \"\";\n    private MapContext[] iterations;\n\n    public NelderMead(){\n        this.jexl = new JexlEngine();\n    }\n\n    public NelderMead(String funcString){\n        this.jexl = new JexlEngine();\n        this.setFunc(funcString);\n    }\n\n\n    public void setFunc(String funcString){\n        this.funcString = funcString;\n        this.func = this.jexl.createExpression(funcString);\n    }\n\n    public double funcEval(MapContext args){\n        return (Double) this.func.evaluate(args);\n    }\n\n    public boolean checkCriterian(){\n        return true;\n    }\n}\n</code></pre>\n\n<p>But the I create object of this class I have the foolowing error:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory\n    at org.apache.commons.jexl2.JexlEngine$UberspectHolder.&lt;clinit&gt;(JexlEngine.java:121)\n    at org.apache.commons.jexl2.JexlEngine.getUberspect(JexlEngine.java:205)\n    at org.apache.commons.jexl2.JexlEngine.&lt;init&gt;(JexlEngine.java:182)\n    at org.apache.commons.jexl2.JexlEngine.&lt;init&gt;(JexlEngine.java:170)\n    at NelderMead.&lt;init&gt;(NelderMead.java:22)\n    at Test.main(Test.java:10)\nCaused by: java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)\n    ... 6 more\n</code></pre>\n\n<p>on first line of the constructor (when create an object of JexlEngine):</p>\n\n<pre><code>public NelderMead(String funcString){\n    this.jexl = new JexlEngine();\n    this.setFunc(funcString);\n}\n</code></pre>\n\n<p>Could you help me - why this code cause the errors?</p>\n\n<p>PS\nI use .jar file to use this lib.</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database","android-recyclerview"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":1,"creation_date":1671279069,"post_id":74832712,"comment_id":132067902,"body_markdown":"What exactly in this code doesn&#39;t work the way you expect?\nTell us what is wrong with shared code. Do you have any errors?","body":"What exactly in this code doesn&#39;t work the way you expect? Tell us what is wrong with shared code. Do you have any errors?"},{"owner":{"account_id":26845407,"reputation":19,"user_id":20431236,"display_name":"prabin chand"},"score":0,"creation_date":1671286910,"post_id":74832712,"comment_id":132069304,"body_markdown":"There is no error in this code. The onle feature i want to add is : when item on recyclerView is deleted is should show some deleted animation and should remove from list. But when users click on &quot;UNDO&quot; button snackbar, deleted item should come back in same position including animation.","body":"There is no error in this code. The onle feature i want to add is : when item on recyclerView is deleted is should show some deleted animation and should remove from list. But when users click on &quot;UNDO&quot; button snackbar, deleted item should come back in same position including animation."}],"owner":{"account_id":26845407,"reputation":19,"user_id":20431236,"display_name":"prabin chand"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671265369,"creation_date":1671265369,"question_id":74832712,"body_markdown":"I want to create undo function using Snackbar in FirebaseRecyclerAdapter when &quot;Delete&quot; option is clicked.\r\nI have achieved my goal to create Undo function using Snackbar but my main aim is to show item deleted from **FirebaseRecyclerAdapter** and when undo is clicked I want that deleted item to be back in **FirebaseRecyclerAdapter**. How can I do that? Please help me !\r\n\r\n&gt;Here&#39;s my code of **FirebaseRecyclerAdapter** class.\r\n\r\n\r\n\r\n    public class MyAdapter extends FirebaseRecyclerAdapter&lt;ExpenseModel, MyAdapter.MyViewHolder&gt; {\r\n        DatabaseReference databaseReference;\r\n        GoogleSignInAccount account;\r\n        Context context;\r\n        int calendarClick,\r\n                beerClick,\r\n                rentClick,\r\n                bikeClick,\r\n                groceryClick,\r\n                foodClick = 0;\r\n    \r\n        String whichCategorySelected;\r\n        boolean isCategorySelected = false;\r\n        String expenseType = &quot;&quot;;\r\n        String updateDate = &quot;&quot;;\r\n        String stopDelete = &quot;&quot;;\r\n    \r\n    \r\n    \r\n        public MyAdapter(@NonNull FirebaseRecyclerOptions&lt;ExpenseModel&gt; options, Context context) {\r\n            super(options);\r\n            this.context = context;\r\n        }\r\n    \r\n        @SuppressLint(&quot;SetTextI18n&quot;)\r\n        @Override\r\n        protected void onBindViewHolder(@NonNull MyViewHolder holder, @SuppressLint(&quot;RecyclerView&quot;) int position, @NonNull ExpenseModel model) {\r\n            account = GoogleSignIn.getLastSignedInAccount(context);\r\n            setDatabaseReference(account);\r\n            holder.expenseItem.setText(model.getDescription());\r\n            holder.expenseAmount.setText(&quot;Rs. &quot; + model.getAmount());\r\n            holder.expenseDate.setText(model.getTime());\r\n            holder.category.setText(model.getExType());\r\n    \r\n            //show update dialog when clicked on recycler view item and\r\n            //delete the selected item from recycler view\r\n            holder.itemView.setOnClickListener(new View.OnClickListener()  {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    int timeSnackBar = 5000;\r\n    \r\n                    PopupMenu popupMenu = new PopupMenu(context, view);\r\n                    popupMenu.getMenu().add(&quot;Edit&quot;);\r\n                    popupMenu.getMenu().add(&quot;Delete&quot;);\r\n                    popupMenu.getMenu().add(&quot;Delete all&quot;);\r\n                    popupMenu.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {\r\n                        @Override\r\n                        public boolean onMenuItemClick(MenuItem menuItem) {\r\n                            if (menuItem.getTitle().equals(&quot;Edit&quot;)) {\r\n                                calendarClick = 0;\r\n                                expenseType = model.getExType();\r\n                                showUpdateDialog(view, model.getDescription(), model.getAmount(), model.getTime(), position);\r\n                            } else if (menuItem.getTitle().equals(&quot;Delete&quot;)) {\r\n    \r\n                                Snackbar snackbar = Snackbar.make(view, &quot;Item is being deleted&quot;, Snackbar.LENGTH_LONG)\r\n                                        .setAction(&quot;UNDO&quot;, new View.OnClickListener() {\r\n                                            @Override\r\n                                            public void onClick(View view) {\r\n                                                stopDelete = &quot;STOP&quot;;\r\n                                            }\r\n                                        }).setDuration(timeSnackBar);\r\n    //                            snackbar.getView().getLayoutParams().width = ViewGroup.LayoutParams.MATCH_PARENT;\r\n                                Snackbar.SnackbarLayout snackbarLayout = (Snackbar.SnackbarLayout) snackbar.getView();\r\n    \r\n                                snackbarLayout.setPadding(0,0,0,0);\r\n                                snackbar.show();\r\n                                new Handler().postDelayed(new Runnable() {\r\n                                    @Override\r\n                                    public void run() {\r\n                                        if (!stopDelete.equals(&quot;STOP&quot;)) {\r\n                                            databaseReference.child(Objects.requireNonNull(getRef(holder.getLayoutPosition()).getKey()))\r\n                                                    .removeValue().addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\r\n                                                        @Override\r\n                                                        public void onComplete(@NonNull Task&lt;Void&gt; task) {\r\n                                                            if (task.isSuccessful()) {\r\n                                                                Toast.makeText(context, &quot;Deleted&quot;, Toast.LENGTH_SHORT).show();\r\n                                                                stopDelete = &quot;&quot;;\r\n                                                            }\r\n                                                        }\r\n                                                    });\r\n                                        }else {\r\n                                            stopDelete = &quot;&quot;;\r\n                                        }\r\n                                    }\r\n                                }, timeSnackBar);\r\n    \r\n    \r\n                            } else {\r\n                                new AlertDialog.Builder(context)\r\n                                        .setTitle(&quot;Alert&quot;)\r\n                                        .setMessage(&quot;Are you sure delete everything ?&quot;)\r\n                                        .setCancelable(false)\r\n                                        .setIcon(R.drawable.warning)\r\n                                        .setPositiveButton(&quot;Continue&quot;, new DialogInterface.OnClickListener() {\r\n                                            @Override\r\n                                            public void onClick(DialogInterface dialogInterface, int i) {\r\n                                                getDatabaseReference(account).removeValue().addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\r\n                                                    @Override\r\n                                                    public void onComplete(@NonNull Task&lt;Void&gt; task) {\r\n                                                        if (task.isSuccessful()) {\r\n                                                            Toast.makeText(view.getContext(), &quot;All expenses deleted&quot;, Toast.LENGTH_SHORT).show();\r\n                                                        }\r\n                                                    }\r\n                                                }).addOnFailureListener(new OnFailureListener() {\r\n                                                    @Override\r\n                                                    public void onFailure(@NonNull Exception e) {\r\n                                                        Toast.makeText(view.getContext(), &quot;Something went wrong. Please check your internet&quot;, Toast.LENGTH_SHORT).show();\r\n                                                    }\r\n                                                });\r\n                                            }\r\n                                        }).setNegativeButton(&quot;Cancel&quot;, null)\r\n                                        .show();\r\n                            }\r\n                            return true;\r\n                        }\r\n                    });\r\n                    popupMenu.show();\r\n                }\r\n            });\r\n        }\r\n    \r\n    \r\n        @NonNull\r\n        @Override\r\n        public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n            View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_view, parent, false);\r\n            return new MyViewHolder(v);\r\n        }\r\n    \r\n        public static class MyViewHolder extends RecyclerView.ViewHolder {\r\n            TextView expenseItem, expenseAmount, expenseDate, category;\r\n    \r\n            public MyViewHolder(@NonNull View itemView) {\r\n                super(itemView);\r\n                expenseItem = itemView.findViewById(R.id.recyclerItemView);\r\n                expenseAmount = itemView.findViewById(R.id.recyclerAmountView);\r\n                expenseDate = itemView.findViewById(R.id.recyclerDateView);\r\n                category = itemView.findViewById(R.id.recyclerCategory);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n","title":"How to create undo using Snackbar in FirebaseRecyclerAdapter?","body":"<p>I want to create undo function using Snackbar in FirebaseRecyclerAdapter when &quot;Delete&quot; option is clicked.\nI have achieved my goal to create Undo function using Snackbar but my main aim is to show item deleted from <strong>FirebaseRecyclerAdapter</strong> and when undo is clicked I want that deleted item to be back in <strong>FirebaseRecyclerAdapter</strong>. How can I do that? Please help me !</p>\n<blockquote>\n<p>Here's my code of <strong>FirebaseRecyclerAdapter</strong> class.</p>\n</blockquote>\n<pre><code>public class MyAdapter extends FirebaseRecyclerAdapter&lt;ExpenseModel, MyAdapter.MyViewHolder&gt; {\n    DatabaseReference databaseReference;\n    GoogleSignInAccount account;\n    Context context;\n    int calendarClick,\n            beerClick,\n            rentClick,\n            bikeClick,\n            groceryClick,\n            foodClick = 0;\n\n    String whichCategorySelected;\n    boolean isCategorySelected = false;\n    String expenseType = &quot;&quot;;\n    String updateDate = &quot;&quot;;\n    String stopDelete = &quot;&quot;;\n\n\n\n    public MyAdapter(@NonNull FirebaseRecyclerOptions&lt;ExpenseModel&gt; options, Context context) {\n        super(options);\n        this.context = context;\n    }\n\n    @SuppressLint(&quot;SetTextI18n&quot;)\n    @Override\n    protected void onBindViewHolder(@NonNull MyViewHolder holder, @SuppressLint(&quot;RecyclerView&quot;) int position, @NonNull ExpenseModel model) {\n        account = GoogleSignIn.getLastSignedInAccount(context);\n        setDatabaseReference(account);\n        holder.expenseItem.setText(model.getDescription());\n        holder.expenseAmount.setText(&quot;Rs. &quot; + model.getAmount());\n        holder.expenseDate.setText(model.getTime());\n        holder.category.setText(model.getExType());\n\n        //show update dialog when clicked on recycler view item and\n        //delete the selected item from recycler view\n        holder.itemView.setOnClickListener(new View.OnClickListener()  {\n            @Override\n            public void onClick(View view) {\n                int timeSnackBar = 5000;\n\n                PopupMenu popupMenu = new PopupMenu(context, view);\n                popupMenu.getMenu().add(&quot;Edit&quot;);\n                popupMenu.getMenu().add(&quot;Delete&quot;);\n                popupMenu.getMenu().add(&quot;Delete all&quot;);\n                popupMenu.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {\n                    @Override\n                    public boolean onMenuItemClick(MenuItem menuItem) {\n                        if (menuItem.getTitle().equals(&quot;Edit&quot;)) {\n                            calendarClick = 0;\n                            expenseType = model.getExType();\n                            showUpdateDialog(view, model.getDescription(), model.getAmount(), model.getTime(), position);\n                        } else if (menuItem.getTitle().equals(&quot;Delete&quot;)) {\n\n                            Snackbar snackbar = Snackbar.make(view, &quot;Item is being deleted&quot;, Snackbar.LENGTH_LONG)\n                                    .setAction(&quot;UNDO&quot;, new View.OnClickListener() {\n                                        @Override\n                                        public void onClick(View view) {\n                                            stopDelete = &quot;STOP&quot;;\n                                        }\n                                    }).setDuration(timeSnackBar);\n//                            snackbar.getView().getLayoutParams().width = ViewGroup.LayoutParams.MATCH_PARENT;\n                            Snackbar.SnackbarLayout snackbarLayout = (Snackbar.SnackbarLayout) snackbar.getView();\n\n                            snackbarLayout.setPadding(0,0,0,0);\n                            snackbar.show();\n                            new Handler().postDelayed(new Runnable() {\n                                @Override\n                                public void run() {\n                                    if (!stopDelete.equals(&quot;STOP&quot;)) {\n                                        databaseReference.child(Objects.requireNonNull(getRef(holder.getLayoutPosition()).getKey()))\n                                                .removeValue().addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n                                                    @Override\n                                                    public void onComplete(@NonNull Task&lt;Void&gt; task) {\n                                                        if (task.isSuccessful()) {\n                                                            Toast.makeText(context, &quot;Deleted&quot;, Toast.LENGTH_SHORT).show();\n                                                            stopDelete = &quot;&quot;;\n                                                        }\n                                                    }\n                                                });\n                                    }else {\n                                        stopDelete = &quot;&quot;;\n                                    }\n                                }\n                            }, timeSnackBar);\n\n\n                        } else {\n                            new AlertDialog.Builder(context)\n                                    .setTitle(&quot;Alert&quot;)\n                                    .setMessage(&quot;Are you sure delete everything ?&quot;)\n                                    .setCancelable(false)\n                                    .setIcon(R.drawable.warning)\n                                    .setPositiveButton(&quot;Continue&quot;, new DialogInterface.OnClickListener() {\n                                        @Override\n                                        public void onClick(DialogInterface dialogInterface, int i) {\n                                            getDatabaseReference(account).removeValue().addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n                                                @Override\n                                                public void onComplete(@NonNull Task&lt;Void&gt; task) {\n                                                    if (task.isSuccessful()) {\n                                                        Toast.makeText(view.getContext(), &quot;All expenses deleted&quot;, Toast.LENGTH_SHORT).show();\n                                                    }\n                                                }\n                                            }).addOnFailureListener(new OnFailureListener() {\n                                                @Override\n                                                public void onFailure(@NonNull Exception e) {\n                                                    Toast.makeText(view.getContext(), &quot;Something went wrong. Please check your internet&quot;, Toast.LENGTH_SHORT).show();\n                                                }\n                                            });\n                                        }\n                                    }).setNegativeButton(&quot;Cancel&quot;, null)\n                                    .show();\n                        }\n                        return true;\n                    }\n                });\n                popupMenu.show();\n            }\n        });\n    }\n\n\n    @NonNull\n    @Override\n    public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_view, parent, false);\n        return new MyViewHolder(v);\n    }\n\n    public static class MyViewHolder extends RecyclerView.ViewHolder {\n        TextView expenseItem, expenseAmount, expenseDate, category;\n\n        public MyViewHolder(@NonNull View itemView) {\n            super(itemView);\n            expenseItem = itemView.findViewById(R.id.recyclerItemView);\n            expenseAmount = itemView.findViewById(R.id.recyclerAmountView);\n            expenseDate = itemView.findViewById(R.id.recyclerDateView);\n            category = itemView.findViewById(R.id.recyclerCategory);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":6815038,"reputation":73,"user_id":5244029,"display_name":"hhafeez"},"score":1,"creation_date":1489068613,"post_id":42697014,"comment_id":72516889,"body_markdown":"its possible look at http://poi.apache.org/slideshow/xslf-cookbook.html#NewPresentation","body":"its possible look at <a href=\"http://poi.apache.org/slideshow/xslf-cookbook.html#NewPresentation\" rel=\"nofollow noreferrer\">poi.apache.org/slideshow/xslf-cookbook.html#NewPresentation</a>"},{"owner":{"account_id":309918,"reputation":544,"user_id":2573071,"accept_rate":70,"display_name":"CrazyProgrammer"},"score":0,"creation_date":1489068872,"post_id":42697014,"comment_id":72517072,"body_markdown":"in the example, it shows to add text in the PPT, that works, but want to add html content, text with html tags. should display as html formatted content","body":"in the example, it shows to add text in the PPT, that works, but want to add html content, text with html tags. should display as html formatted content"},{"owner":{"account_id":6815038,"reputation":73,"user_id":5244029,"display_name":"hhafeez"},"score":0,"creation_date":1489069418,"post_id":42697014,"comment_id":72517470,"body_markdown":"html text is a text so you should be able to write tags as text","body":"html text is a text so you should be able to write tags as text"},{"owner":{"account_id":309918,"reputation":544,"user_id":2573071,"accept_rate":70,"display_name":"CrazyProgrammer"},"score":0,"creation_date":1489069475,"post_id":42697014,"comment_id":72517513,"body_markdown":"That didnt work. That display as tags itself. its not getting formatted.","body":"That didnt work. That display as tags itself. its not getting formatted."},{"owner":{"account_id":6815038,"reputation":73,"user_id":5244029,"display_name":"hhafeez"},"score":0,"creation_date":1489069539,"post_id":42697014,"comment_id":72517547,"body_markdown":"what you mean by formatting. you can always format a text whatever ways you want","body":"what you mean by formatting. you can always format a text whatever ways you want"},{"owner":{"account_id":309918,"reputation":544,"user_id":2573071,"accept_rate":70,"display_name":"CrazyProgrammer"},"score":0,"creation_date":1489069655,"post_id":42697014,"comment_id":72517627,"body_markdown":"I want to set HTML content to display in the ppt, for example &lt;b&gt;bold&lt;/b&gt; should display as **bold** like that","body":"I want to set HTML content to display in the ppt, for example &lt;b&gt;bold&lt;/b&gt; should display as <b>bold</b> like that"},{"owner":{"account_id":6815038,"reputation":73,"user_id":5244029,"display_name":"hhafeez"},"score":0,"creation_date":1489069750,"post_id":42697014,"comment_id":72517697,"body_markdown":"This is not going to happen. That is not formatting. that is rendering of html which will not happen in ppt. The browser understands html tags. ppt is not a browser.","body":"This is not going to happen. That is not formatting. that is rendering of html which will not happen in ppt. The browser understands html tags. ppt is not a browser."},{"owner":{"account_id":6815038,"reputation":73,"user_id":5244029,"display_name":"hhafeez"},"score":0,"creation_date":1489069969,"post_id":42697014,"comment_id":72517851,"body_markdown":"why would you write in ppt if you want to render it as html page?","body":"why would you write in ppt if you want to render it as html page?"},{"owner":{"account_id":2359576,"reputation":3386,"user_id":2066598,"display_name":"kiwiwings"},"score":0,"creation_date":1489074558,"post_id":42697014,"comment_id":72521253,"body_markdown":"I did [something similar for docx](http://stackoverflow.com/questions/17800017/writing-styled-text-to-a-docx-file/17823048#17823048) ... maybe I try to write something like this for H/XSLF too ...","body":"I did <a href=\"http://stackoverflow.com/questions/17800017/writing-styled-text-to-a-docx-file/17823048#17823048\">something similar for docx</a> ... maybe I try to write something like this for H/XSLF too ..."},{"owner":{"account_id":309918,"reputation":544,"user_id":2573071,"accept_rate":70,"display_name":"CrazyProgrammer"},"score":0,"creation_date":1489130603,"post_id":42697014,"comment_id":72545814,"body_markdown":"what you did looks really nice... if you can manage to do the same for pptx it will be great","body":"what you did looks really nice... if you can manage to do the same for pptx it will be great"},{"owner":{"account_id":5094142,"reputation":302,"user_id":4086136,"display_name":"PeteZaria"},"score":0,"creation_date":1564233166,"post_id":42697014,"comment_id":100967593,"body_markdown":"Okay let&#39;s say I want to export a graphic chart or even the content of a pbi report in an iframe from HTML to PowerPoint  . Ideally, in order to get the expected result, the process should be able to first identify the content of the HTML element id, then if it&#39;s NOT limited to text,....being able to take a snapshot of the content then convert it as an image which the PowerPoint conversion tool may be able to recognize. In most Powerpoint cases, graphics are mainly static images... and that&#39;s a lot of coding...","body":"Okay let&#39;s say I want to export a graphic chart or even the content of a pbi report in an iframe from HTML to PowerPoint  . Ideally, in order to get the expected result, the process should be able to first identify the content of the HTML element id, then if it&#39;s NOT limited to text,....being able to take a snapshot of the content then convert it as an image which the PowerPoint conversion tool may be able to recognize. In most Powerpoint cases, graphics are mainly static images... and that&#39;s a lot of coding..."}],"owner":{"account_id":309918,"reputation":544,"user_id":2573071,"accept_rate":70,"display_name":"CrazyProgrammer"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1271,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671263601,"creation_date":1489067084,"question_id":42697014,"body_markdown":"I want to insert few html content programmatically to ppt file generated using apache poi. \r\n\r\nDoes pptx poi framework supports inserting html content to the ppt slides?","title":"Insert HTML content in PPT using apache poi java","body":"<p>I want to insert few html content programmatically to ppt file generated using apache poi. </p>\n\n<p>Does pptx poi framework supports inserting html content to the ppt slides?</p>\n"},{"tags":["java","mysql","tomcat"],"comments":[{"owner":{"account_id":1133647,"reputation":2061,"user_id":1119161,"accept_rate":31,"display_name":"dsp_user"},"score":0,"creation_date":1473935120,"post_id":39508026,"comment_id":66333704,"body_markdown":"Is your application hosted on a Tomcat instance, which serves multiple web applications (not just yours)? There&#39;s a possibility that Tomcat closes your app (to save Resources) when it&#39;s not used by anyone so it takes some time to reload when you next visit it.","body":"Is your application hosted on a Tomcat instance, which serves multiple web applications (not just yours)? There&#39;s a possibility that Tomcat closes your app (to save Resources) when it&#39;s not used by anyone so it takes some time to reload when you next visit it."},{"owner":{"account_id":4352944,"reputation":4918,"user_id":3589625,"accept_rate":68,"display_name":"Ondrej Tokar"},"score":0,"creation_date":1473935595,"post_id":39508026,"comment_id":66333991,"body_markdown":"Hmm yes there is one tomcat server and multiple apps on it. Is there a way to keep it open and ready for every app?","body":"Hmm yes there is one tomcat server and multiple apps on it. Is there a way to keep it open and ready for every app?"},{"owner":{"account_id":1133647,"reputation":2061,"user_id":1119161,"accept_rate":31,"display_name":"dsp_user"},"score":0,"creation_date":1473935750,"post_id":39508026,"comment_id":66334089,"body_markdown":"I don&#39;t know if you can keep it open but you can ask your web hosting provider. Maybe it&#39;s not the issue at all.","body":"I don&#39;t know if you can keep it open but you can ask your web hosting provider. Maybe it&#39;s not the issue at all."},{"owner":{"account_id":4352944,"reputation":4918,"user_id":3589625,"accept_rate":68,"display_name":"Ondrej Tokar"},"score":0,"creation_date":1473937109,"post_id":39508026,"comment_id":66334801,"body_markdown":"I am hosting it myself on AWS. Hmm it&#39;s shame I haven&#39;t got any answer on this or at least a guidance.","body":"I am hosting it myself on AWS. Hmm it&#39;s shame I haven&#39;t got any answer on this or at least a guidance."},{"owner":{"account_id":1133647,"reputation":2061,"user_id":1119161,"accept_rate":31,"display_name":"dsp_user"},"score":0,"creation_date":1473938082,"post_id":39508026,"comment_id":66335387,"body_markdown":"Try to debug it using your browser (press F12 and you see requests etc). This way you will know whether the browser is making some extra server trips when the page is taking long to load etc","body":"Try to debug it using your browser (press F12 and you see requests etc). This way you will know whether the browser is making some extra server trips when the page is taking long to load etc"},{"owner":{"account_id":4352944,"reputation":4918,"user_id":3589625,"accept_rate":68,"display_name":"Ondrej Tokar"},"score":0,"creation_date":1473938739,"post_id":39508026,"comment_id":66335764,"body_markdown":"No it&#39;s not the browser, it&#39;s that one single request that responds longer the first time.","body":"No it&#39;s not the browser, it&#39;s that one single request that responds longer the first time."},{"owner":{"account_id":1133647,"reputation":2061,"user_id":1119161,"accept_rate":31,"display_name":"dsp_user"},"score":0,"creation_date":1473941286,"post_id":39508026,"comment_id":66337200,"body_markdown":"Note  that while the cache-control attribute in the request header is set to no cache (in my browser), the response header cache-control attribute is set to 52 seconds, which basically instructs the browser to revalidate the same request after that period (same as hitting Refresh I think).","body":"Note  that while the cache-control attribute in the request header is set to no cache (in my browser), the response header cache-control attribute is set to 52 seconds, which basically instructs the browser to revalidate the same request after that period (same as hitting Refresh I think)."}],"answers":[{"tags":[],"owner":{"account_id":1426585,"reputation":2315,"user_id":1349927,"accept_rate":62,"display_name":"tak3shi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1473939543,"creation_date":1473939543,"answer_id":39510135,"question_id":39508026,"body_markdown":"The content is 200kB in size. You need to optimize it in the front and backend.\r\n\r\nThe main problem is in your backend. Check why it takes so long.\r\n\r\nIn the frontend you can enable gzip compression. Check the tomcat documentation on how to do it. This will reduce the size for the download. \r\n\r\nThe second time is probably faster for you due to browser caching.\r\nCheck the response code in Firebug, if the response is 304 it is cached. Response 200 means it has been loaded from the server.\r\n","title":"First response is slow Tomcat","body":"<p>The content is 200kB in size. You need to optimize it in the front and backend.</p>\n\n<p>The main problem is in your backend. Check why it takes so long.</p>\n\n<p>In the frontend you can enable gzip compression. Check the tomcat documentation on how to do it. This will reduce the size for the download. </p>\n\n<p>The second time is probably faster for you due to browser caching.\nCheck the response code in Firebug, if the response is 304 it is cached. Response 200 means it has been loaded from the server.</p>\n"},{"tags":[],"owner":{"account_id":23684642,"reputation":16,"user_id":17709766,"display_name":"B&#233;ci Roboz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671263557,"creation_date":1671263110,"answer_id":74832537,"question_id":39508026,"body_markdown":"ORM systems (like [Hibernate][1]) can cause significantly slow startup if you forget to turn off the initial modell-schema sync option in production environment, for example in [Spring][2] -&gt; JPA -&gt; Hibernate -&gt; application-[server].yml-&gt; \r\n\r\n```\r\nspring:\r\n    jpa:\r\n        hibernate:\r\n            ddl-auto: update\r\n```\r\n&lt;strike&gt;update&lt;/strike&gt; none\r\n\r\n[If your model didn&#39;t change, switch &quot;update&quot; to &quot;none&quot; in the production environment for faster startup.][3]\r\n\r\n\r\n  [1]: https://hibernate.org/orm/\r\n  [2]: https://spring.io/projects/spring-boot\r\n  [3]: https://docs.spring.io/spring-boot/docs/1.1.0.M1/reference/html/howto-database-initialization.html","title":"First response is slow Tomcat","body":"<p>ORM systems (like <a href=\"https://hibernate.org/orm/\" rel=\"nofollow noreferrer\">Hibernate</a>) can cause significantly slow startup if you forget to turn off the initial modell-schema sync option in production environment, for example in <a href=\"https://spring.io/projects/spring-boot\" rel=\"nofollow noreferrer\">Spring</a> -&gt; JPA -&gt; Hibernate -&gt; application-[server].yml-&gt;</p>\n<pre><code>spring:\n    jpa:\n        hibernate:\n            ddl-auto: update\n</code></pre>\n<p><strike>update</strike> none</p>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/1.1.0.M1/reference/html/howto-database-initialization.html\" rel=\"nofollow noreferrer\">If your model didn't change, switch &quot;update&quot; to &quot;none&quot; in the production environment for faster startup.</a></p>\n"}],"owner":{"account_id":4352944,"reputation":4918,"user_id":3589625,"accept_rate":68,"display_name":"Ondrej Tokar"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1967,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1671263557,"creation_date":1473932994,"question_id":39508026,"body_markdown":"I made a Java Web Application hosted by Tomcat. It can be found on this [URL][1].\r\n\r\nThe problem that I am experiencing is that whenever I visit the page the first time it takes about 10s while every time after it it takes only 100-500ms. I would say the speed improvement is due to browser caching, but not really, when I refresh cache too (`ctrl`+`shift`+`r`) I get the same quick response.\r\n\r\nThen after some time, about 5 minutes I visit the page again and it&#39;s slow again.\r\n\r\nYou may try some tests yourself on the URL provided by changing the search parameter value to e.g.: `1050`,`1051`,`1052`,`2670`,`4000`,`2300`,`2200`.\r\n\r\nAlso the interesting fact I have spotted is that no matter how big payload (compare 1050 with 2300) the time is almost always the same approx. 9-10s. So what I assume is that something like Java Server has got to get ready and that is what is taking time.\r\n\r\n  [1]: http://52.16.32.189/FIBIA_Autocomplete_v2/getData/?search=4760&amp;getFiberStatus=false&amp;prepopulateCity=true&amp;zip=null\r\n\r\n**EDIT:**\r\n\r\nI was first thinking it could be related to Java/Tomcat having to load some resources and then after some time +-3-5mins again because for some reason it unloaded it. But as I wrote above, even if I change the URL query string (that causes a different SQL query during execution), it again loads long. Can the issue be related to the DB? I am using MySQL.\r\n\r\n**EDIT2:**\r\n\r\nThe reason why it&#39;s faster is most likely the server caching. I am 95% sure and that is because I made couple of experiments such as trying it on 2 computers etc. (no it&#39;s not browser caching). Then I realized that if it&#39;s fast only when it&#39;s cached, what takes so long is the actual `.executeQuery` line of code. It takes 10s even though the exact same request through a client such as `WorkBench` takes only 0.285s. Therefore I am going to try to use a `PreparedStatement` or experiment further.","title":"First response is slow Tomcat","body":"<p>I made a Java Web Application hosted by Tomcat. It can be found on this <a href=\"http://52.16.32.189/FIBIA_Autocomplete_v2/getData/?search=4760&amp;getFiberStatus=false&amp;prepopulateCity=true&amp;zip=null\" rel=\"nofollow\">URL</a>.</p>\n\n<p>The problem that I am experiencing is that whenever I visit the page the first time it takes about 10s while every time after it it takes only 100-500ms. I would say the speed improvement is due to browser caching, but not really, when I refresh cache too (<code>ctrl</code>+<code>shift</code>+<code>r</code>) I get the same quick response.</p>\n\n<p>Then after some time, about 5 minutes I visit the page again and it's slow again.</p>\n\n<p>You may try some tests yourself on the URL provided by changing the search parameter value to e.g.: <code>1050</code>,<code>1051</code>,<code>1052</code>,<code>2670</code>,<code>4000</code>,<code>2300</code>,<code>2200</code>.</p>\n\n<p>Also the interesting fact I have spotted is that no matter how big payload (compare 1050 with 2300) the time is almost always the same approx. 9-10s. So what I assume is that something like Java Server has got to get ready and that is what is taking time.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I was first thinking it could be related to Java/Tomcat having to load some resources and then after some time +-3-5mins again because for some reason it unloaded it. But as I wrote above, even if I change the URL query string (that causes a different SQL query during execution), it again loads long. Can the issue be related to the DB? I am using MySQL.</p>\n\n<p><strong>EDIT2:</strong></p>\n\n<p>The reason why it's faster is most likely the server caching. I am 95% sure and that is because I made couple of experiments such as trying it on 2 computers etc. (no it's not browser caching). Then I realized that if it's fast only when it's cached, what takes so long is the actual <code>.executeQuery</code> line of code. It takes 10s even though the exact same request through a client such as <code>WorkBench</code> takes only 0.285s. Therefore I am going to try to use a <code>PreparedStatement</code> or experiment further.</p>\n"},{"tags":["java","ssl","ssh","identity","keystore"],"comments":[{"owner":{"account_id":11042,"reputation":7158,"user_id":3540161,"accept_rate":56,"display_name":"Rolf"},"score":0,"creation_date":1436800854,"post_id":31385944,"comment_id":50751177,"body_markdown":"I found this related question, but I don&#39;t want to store it as a password string, that feels funny. https://stackoverflow.com/questions/6243446/how-to-store-a-simple-key-string-inside-java-keystore#6243755","body":"I found this related question, but I don&#39;t want to store it as a password string, that feels funny. <a href=\"https://stackoverflow.com/questions/6243446/how-to-store-a-simple-key-string-inside-java-keystore#6243755\" title=\"how to store a simple key string inside java keystore%236243755\">stackoverflow.com/questions/6243446/&hellip;</a>"},{"owner":{"account_id":2325310,"reputation":384,"user_id":2039966,"display_name":"Francois Gergaud"},"score":0,"creation_date":1436801375,"post_id":31385944,"comment_id":50751558,"body_markdown":"I am not really sure here, but I think the java&#39;s keystores (either in PKCS12 or JKS format) are meant to be used for SSL communications. The SSL communication used something more complete than a public-key, called certificate, to authenticate entities. The certificate embed a Distinguish Name  and other stuff to initialize a SSL communication between 2 entities. I think there is a confusion between SSL and SSH, and I am note sure it is possible that information stored in a keystore may be used for an SSH communication.","body":"I am not really sure here, but I think the java&#39;s keystores (either in PKCS12 or JKS format) are meant to be used for SSL communications. The SSL communication used something more complete than a public-key, called certificate, to authenticate entities. The certificate embed a Distinguish Name  and other stuff to initialize a SSL communication between 2 entities. I think there is a confusion between SSL and SSH, and I am note sure it is possible that information stored in a keystore may be used for an SSH communication."},{"owner":{"account_id":916980,"reputation":8820,"user_id":2580516,"display_name":"Warren Dew"},"score":0,"creation_date":1436802093,"post_id":31385944,"comment_id":50752055,"body_markdown":"Are you trying to use an existing private key, or is it okay to generate a new one?","body":"Are you trying to use an existing private key, or is it okay to generate a new one?"}],"answers":[{"tags":[],"owner":{"account_id":40735,"reputation":13496,"user_id":118098,"accept_rate":73,"display_name":"maxwellb"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1436804319,"creation_date":1436804319,"answer_id":31388440,"question_id":31385944,"body_markdown":"Supposing you have a private key that looks like this:\r\n\r\n*id_rsa*\r\n&lt;pre&gt;\r\n-----BEGIN RSA PRIVATE KEY-----\r\nMIICWgIBAAKBgQCh3czej+KeEraesxts3xP6kx+cO/Fu8ROc/k4hSl7fO9jFZ6Lm\r\nOsGlzsRsi8VDg9n/fh6iFng/Umgnfd4J0IiLQihSRYnvyOsqqXbIJ8mBtydqO4s+\r\nCjZLLDRSEMx3dw6GhFOcQ7xYYOeUMNY8QFidPn2LjURfMxG9XWOrCww8rwIBJQKB\r\ngGA+sSpjZCajV9P7yx4jxrCqgX99lnlREpSy4lj7ybUqgOQUG6t84dg1wOaYS8dH\r\nerOXGSIbMr3d+L2JHD0v4ntcKqzJm6Nf1FE27V0hvpzZl3fNax4NI/cIXM78zBx4\r\nlBblr5QMYnTSd5eADIcDy7TZHuScRPkPViQ2x9QPayQ9AkEA67lfOXFEJ8iTYHdu\r\nykvj0Xqcs/peDX5nYXCEJ2XECxgxfKYVbQPazO5ACgp1VsgFMCsd4rDSwahOAgkE\r\nrGfgCwJBAK/KFkSqMCLga8m19uqOftTQ+GhFc0O1lchWQ0A99+b9Rcs0yAe10GCN\r\nSbgrEmMuXEQS1emT6ZHM7KIh2P7kiG0CQQDSPYxH/TzJiWDZf0cjIRdMIT+ncJkS\r\n9DKw2flTkh2NWsRaap1858MleowkoYs/j81Gov76nbUNlhwPpy2uhiivAkByBor8\r\nG11+aA6QrWHkQMD4vuZReSgr62gTPt+DndE74o4i8c3bfNowyllU3asP5rhjgdbc\r\nsvheksMBYhA2ohNNAkAiKQdv08UAG77piJi09OFIEcetTiq/wy9Zeb6fmEuMFzsT\r\n2aR6x0d43OXqAgcKFgFuzqdXgxqhP/n9/eIqXdVA\r\n-----END RSA PRIVATE KEY-----\r\n&lt;/pre&gt;\r\n\r\nDo two things:\r\n\r\n1) Create a certificate to wrap the key and expose the public key as a certificate, so that `keytool` understands it.\r\n\r\n    openssl x509 -signkey id_rsa -req -in example.req\r\n\r\n2) Create a self-signed certificate from your new request.\r\n\r\n    openssl x509 -signkey id_rsa -req -in example.req -out example.cer\r\n\r\nThen, [combine the certificate and private key][1], and import into `keytool`.\r\n\r\n    cat example.cer id_rsa &gt; example.full\r\n    keytool -import -keystore example.jks -file example.full\r\n\r\nThis will get the keys in there. Utilizing the private and public keys and interacting with the SSH/SFTP library of your choice is left as an exercise.\r\n\r\n  [1]: https://stackoverflow.com/questions/991758/how-to-get-an-openssl-pem-file-from-key-and-crt-files/991772#991772","title":"How to add SSH identity file keypair to JKS keystore","body":"<p>Supposing you have a private key that looks like this:</p>\n\n<p><em>id_rsa</em></p>\n\n<pre>\n-----BEGIN RSA PRIVATE KEY-----\nMIICWgIBAAKBgQCh3czej+KeEraesxts3xP6kx+cO/Fu8ROc/k4hSl7fO9jFZ6Lm\nOsGlzsRsi8VDg9n/fh6iFng/Umgnfd4J0IiLQihSRYnvyOsqqXbIJ8mBtydqO4s+\nCjZLLDRSEMx3dw6GhFOcQ7xYYOeUMNY8QFidPn2LjURfMxG9XWOrCww8rwIBJQKB\ngGA+sSpjZCajV9P7yx4jxrCqgX99lnlREpSy4lj7ybUqgOQUG6t84dg1wOaYS8dH\nerOXGSIbMr3d+L2JHD0v4ntcKqzJm6Nf1FE27V0hvpzZl3fNax4NI/cIXM78zBx4\nlBblr5QMYnTSd5eADIcDy7TZHuScRPkPViQ2x9QPayQ9AkEA67lfOXFEJ8iTYHdu\nykvj0Xqcs/peDX5nYXCEJ2XECxgxfKYVbQPazO5ACgp1VsgFMCsd4rDSwahOAgkE\nrGfgCwJBAK/KFkSqMCLga8m19uqOftTQ+GhFc0O1lchWQ0A99+b9Rcs0yAe10GCN\nSbgrEmMuXEQS1emT6ZHM7KIh2P7kiG0CQQDSPYxH/TzJiWDZf0cjIRdMIT+ncJkS\n9DKw2flTkh2NWsRaap1858MleowkoYs/j81Gov76nbUNlhwPpy2uhiivAkByBor8\nG11+aA6QrWHkQMD4vuZReSgr62gTPt+DndE74o4i8c3bfNowyllU3asP5rhjgdbc\nsvheksMBYhA2ohNNAkAiKQdv08UAG77piJi09OFIEcetTiq/wy9Zeb6fmEuMFzsT\n2aR6x0d43OXqAgcKFgFuzqdXgxqhP/n9/eIqXdVA\n-----END RSA PRIVATE KEY-----\n</pre>\n\n<p>Do two things:</p>\n\n<p>1) Create a certificate to wrap the key and expose the public key as a certificate, so that <code>keytool</code> understands it.</p>\n\n<pre><code>openssl x509 -signkey id_rsa -req -in example.req\n</code></pre>\n\n<p>2) Create a self-signed certificate from your new request.</p>\n\n<pre><code>openssl x509 -signkey id_rsa -req -in example.req -out example.cer\n</code></pre>\n\n<p>Then, <a href=\"https://stackoverflow.com/questions/991758/how-to-get-an-openssl-pem-file-from-key-and-crt-files/991772#991772\">combine the certificate and private key</a>, and import into <code>keytool</code>.</p>\n\n<pre><code>cat example.cer id_rsa &gt; example.full\nkeytool -import -keystore example.jks -file example.full\n</code></pre>\n\n<p>This will get the keys in there. Utilizing the private and public keys and interacting with the SSH/SFTP library of your choice is left as an exercise.</p>\n"}],"owner":{"account_id":11042,"reputation":7158,"user_id":3540161,"accept_rate":56,"display_name":"Rolf"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12584,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":1,"score":7,"last_activity_date":1671262888,"creation_date":1436797342,"question_id":31385944,"body_markdown":"One of the tasks of a Java application I am building is to connect to a remote SFTP server. In order to do that I have the certificate of the remote machine and a local identity (`id_rsa` and `id_rsa.pub` in the `.ssh` folder). This is working fine.\r\n\r\nI&#39;d like to put the certificate and the identity in a password protected java keystore for easier and more secure configuration. I have this working for the certificate, but I am having problems storing the SSH identity in a JKS or PKCS12 keystore (either one would work).\r\n\r\nTo isolate the problem I have tried the following steps:\r\n\r\nI use `ssh-keygen -b 2048` to create the two identity files `id_rsa_demo` and `id_rsa_demo.pub` in te local directory. As I understand these are the private and public keys of the identity, so I try to combine those into an `identity.p12` file:\r\n\r\n    openssl pkcs12 -export \\\r\n                   -inkey &quot;id_rsa_demo&quot; \\\r\n                   -in &quot;id_rsa_demo.pub&quot; \\\r\n                   -out &quot;identity.p12&quot; \\\r\n                   -password &quot;pass:topsecret&quot; \\\r\n                   -name &quot;demoalias&quot;\r\n\r\nThis gives me the error `unable to load certificates`. I searched around and it seems that openssl expects a certificate with a complete chain for the `-in` parameter. Since my generated identity does not have that, I tried the `-nocerts` option, like so:\r\n\r\n    openssl pkcs12 -export \\\r\n                   -inkey &quot;id_rsa_demo&quot; \\\r\n                   -in &quot;id_rsa_demo.pub&quot; \\\r\n                   -out &quot;identity.p12&quot; \\\r\n                   -password &quot;pass:topsecret&quot; \\\r\n                   -name &quot;demoalias&quot; \\\r\n                   -nocerts\r\n\r\nI get no errors, but the `-nocerts` option lives up to its promise and does not add my public key to the pkcs12 file:\r\n\r\n    openssl pkcs12 -info -in identity.p12 \r\n    \r\n    Enter Import Password:\r\n    MAC Iteration 2048\r\n    MAC verified OK\r\n    PKCS7 Data\r\n    Shrouded Keybag: pbeWithSHA1And3-KeyTripleDES-CBC, Iteration 2048\r\n    Bag Attributes\r\n        friendlyName: demoalias\r\n    Key Attributes: &lt;No Attributes&gt;\r\n    Enter PEM pass phrase:\r\n    Verifying - Enter PEM pass phrase:\r\n    -----BEGIN ENCRYPTED PRIVATE KEY-----\r\n    MIIFDjBABgkqhkiG9w0BBQ0wMzAbBgkqhkiG9w0BBQwwDgQIAOXpzckBb28CAggA\r\n    MBQGCCqGSIb3DQMHBAjPq9ibr445xQSCBMi5IlOk5F28kQPB5D97afiUb5d3It46\r\n    ...\r\n    ejwYfHTj6bm+dEOUk68zNrWwKqwuJx5AZv3U8sm1cicVmh9W0HpL5tSmMMpDS1ey\r\n    Uos=\r\n    -----END ENCRYPTED PRIVATE KEY-----\r\n\r\nIs there a way to store an SSH identity into a PKCS12 or JKS keystore?","title":"How to add SSH identity file keypair to JKS keystore","body":"<p>One of the tasks of a Java application I am building is to connect to a remote SFTP server. In order to do that I have the certificate of the remote machine and a local identity (<code>id_rsa</code> and <code>id_rsa.pub</code> in the <code>.ssh</code> folder). This is working fine.</p>\n\n<p>I'd like to put the certificate and the identity in a password protected java keystore for easier and more secure configuration. I have this working for the certificate, but I am having problems storing the SSH identity in a JKS or PKCS12 keystore (either one would work).</p>\n\n<p>To isolate the problem I have tried the following steps:</p>\n\n<p>I use <code>ssh-keygen -b 2048</code> to create the two identity files <code>id_rsa_demo</code> and <code>id_rsa_demo.pub</code> in te local directory. As I understand these are the private and public keys of the identity, so I try to combine those into an <code>identity.p12</code> file:</p>\n\n<pre><code>openssl pkcs12 -export \\\n               -inkey \"id_rsa_demo\" \\\n               -in \"id_rsa_demo.pub\" \\\n               -out \"identity.p12\" \\\n               -password \"pass:topsecret\" \\\n               -name \"demoalias\"\n</code></pre>\n\n<p>This gives me the error <code>unable to load certificates</code>. I searched around and it seems that openssl expects a certificate with a complete chain for the <code>-in</code> parameter. Since my generated identity does not have that, I tried the <code>-nocerts</code> option, like so:</p>\n\n<pre><code>openssl pkcs12 -export \\\n               -inkey \"id_rsa_demo\" \\\n               -in \"id_rsa_demo.pub\" \\\n               -out \"identity.p12\" \\\n               -password \"pass:topsecret\" \\\n               -name \"demoalias\" \\\n               -nocerts\n</code></pre>\n\n<p>I get no errors, but the <code>-nocerts</code> option lives up to its promise and does not add my public key to the pkcs12 file:</p>\n\n<pre><code>openssl pkcs12 -info -in identity.p12 \n\nEnter Import Password:\nMAC Iteration 2048\nMAC verified OK\nPKCS7 Data\nShrouded Keybag: pbeWithSHA1And3-KeyTripleDES-CBC, Iteration 2048\nBag Attributes\n    friendlyName: demoalias\nKey Attributes: &lt;No Attributes&gt;\nEnter PEM pass phrase:\nVerifying - Enter PEM pass phrase:\n-----BEGIN ENCRYPTED PRIVATE KEY-----\nMIIFDjBABgkqhkiG9w0BBQ0wMzAbBgkqhkiG9w0BBQwwDgQIAOXpzckBb28CAggA\nMBQGCCqGSIb3DQMHBAjPq9ibr445xQSCBMi5IlOk5F28kQPB5D97afiUb5d3It46\n...\nejwYfHTj6bm+dEOUk68zNrWwKqwuJx5AZv3U8sm1cicVmh9W0HpL5tSmMMpDS1ey\nUos=\n-----END ENCRYPTED PRIVATE KEY-----\n</code></pre>\n\n<p>Is there a way to store an SSH identity into a PKCS12 or JKS keystore?</p>\n"},{"tags":["java","android","android-studio","android-emulator","apk"],"comments":[{"owner":{"account_id":10814854,"reputation":4137,"user_id":7954210,"accept_rate":73,"display_name":"Mouaad Abdelghafour AITALI"},"score":0,"creation_date":1671227174,"post_id":74830018,"comment_id":132061828,"body_markdown":"Where&#39;s the error you got? Please add it to your post","body":"Where&#39;s the error you got? Please add it to your post"},{"owner":{"account_id":10814854,"reputation":4137,"user_id":7954210,"accept_rate":73,"display_name":"Mouaad Abdelghafour AITALI"},"score":0,"creation_date":1671228681,"post_id":74830018,"comment_id":132062138,"body_markdown":"Are sure you added the app-id into your AndroidManifest ?","body":"Are sure you added the app-id into your AndroidManifest ?"},{"owner":{"account_id":23943944,"reputation":17,"user_id":17936566,"display_name":"Swyzax"},"score":0,"creation_date":1671230103,"post_id":74830018,"comment_id":132062382,"body_markdown":"Hello @MouaadAbdelghafourAITALI . Thanks you for helping . I&#39;ve added picture of my manifest","body":"Hello @MouaadAbdelghafourAITALI . Thanks you for helping . I&#39;ve added picture of my manifest"},{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":0,"creation_date":1671234561,"post_id":74830018,"comment_id":132063090,"body_markdown":"Note the `meta-data` tags need to be a direct descendant of the `application` tag as in https://stackoverflow.com/a/57184985/17856705.","body":"Note the <code>meta-data</code> tags need to be a direct descendant of the <code>application</code> tag as in <a href=\"https://stackoverflow.com/a/57184985/17856705\">stackoverflow.com/a/57184985/17856705</a>."}],"answers":[{"tags":[],"owner":{"account_id":26359116,"reputation":585,"user_id":20015640,"display_name":"Urvish Shiroya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671262728,"creation_date":1671262728,"answer_id":74832502,"question_id":74830018,"body_markdown":"This documentation will help you according to your problem.\r\nhttps://developers.google.com/admob/android/quick-start\r\n\r\nYou should add this code to your `manifest.xml` file.\r\n\r\n```xml\r\n&lt;application\r\n        ...&gt;\r\n\r\n        &lt;meta-data\r\n            android:name=&quot;com.google.android.gms.ads.APPLICATION_ID&quot;\r\n            android:value=&quot;ca-app-pub-3940256099942544~3347511713&quot;/&gt;\r\n\r\n&lt;/application&gt;\r\n```","title":"Android studio and emulator","body":"<p>This documentation will help you according to your problem.\n<a href=\"https://developers.google.com/admob/android/quick-start\" rel=\"nofollow noreferrer\">https://developers.google.com/admob/android/quick-start</a></p>\n<p>You should add this code to your <code>manifest.xml</code> file.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;application\n        ...&gt;\n\n        &lt;meta-data\n            android:name=&quot;com.google.android.gms.ads.APPLICATION_ID&quot;\n            android:value=&quot;ca-app-pub-3940256099942544~3347511713&quot;/&gt;\n\n&lt;/application&gt;\n</code></pre>\n"}],"owner":{"account_id":23943944,"reputation":17,"user_id":17936566,"display_name":"Swyzax"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":178,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1671262728,"creation_date":1671226904,"question_id":74830018,"body_markdown":"[![enter image description here][1]][1][![enter image description here][2]][2][![enter image description here][3]][3]Hello i&#39;m trying to add ad to my android studio project but when I start my emulator , the application keeps stopping . I did everything like I have to do it , 5 times I restarted but always an error . Please help me thanks \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wSou2.png\r\n  [2]: https://i.stack.imgur.com/ORbiY.png\r\n  [3]: https://i.stack.imgur.com/RILuC.png","title":"Android studio and emulator","body":"<p><a href=\"https://i.stack.imgur.com/wSou2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wSou2.png\" alt=\"enter image description here\" /></a><a href=\"https://i.stack.imgur.com/ORbiY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ORbiY.png\" alt=\"enter image description here\" /></a><a href=\"https://i.stack.imgur.com/RILuC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RILuC.png\" alt=\"enter image description here\" /></a>Hello i'm trying to add ad to my android studio project but when I start my emulator , the application keeps stopping . I did everything like I have to do it , 5 times I restarted but always an error . Please help me thanks</p>\n"},{"tags":["java","arrays","byte","inputstream"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1671253719,"post_id":74831873,"comment_id":132064833,"body_markdown":"`bytes = resourceAsStream.readAllBytes();` is somewhat important. That byte variable is now being assigned an array of bytes with significant length.","body":"<code>bytes = resourceAsStream.readAllBytes();</code> is somewhat important. That byte variable is now being assigned an array of bytes with significant length."}],"answers":[{"tags":[],"owner":{"account_id":18608321,"reputation":2964,"user_id":13561410,"display_name":"Oskar Grosser"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671260365,"creation_date":1671260365,"answer_id":74832318,"question_id":74831873,"body_markdown":"Your variable `bytes` only references an array initialized to length 0 _at the beginning_.\r\n\r\nBut in your `try`-block, you reassign a _new_ array to `bytes`: The new (and already populated) array _of appropriate length_ is now referenced by `bytes`.\r\n\r\nWith that reassignment, we essentially discard the zero-length array.\r\n\r\n```java\r\nbyte[] bytes = new byte[0];\r\ntry {\r\n  // ...\r\n  bytes = resourceAsStream.readAllBytes();\r\n}\r\n```\r\n\r\n---\r\n\r\nNo copying into the array first referenced by `bytes` is happening! In fact, if `bytes` is never read before its assignment in the `try`-block, then that assignment may even be its first:\r\n```java\r\nbyte[] bytes; // Declaration of variable `bytes`\r\ntry {\r\n  // ...\r\n  bytes = resourceAsStream.readAllBytes(); // First initialization of `bytes`!\r\n}\r\n```","title":"How is the byte[] array with 0 element allocation working with InputStream (readAllBytes)","body":"<p>Your variable <code>bytes</code> only references an array initialized to length 0 <em>at the beginning</em>.</p>\n<p>But in your <code>try</code>-block, you reassign a <em>new</em> array to <code>bytes</code>: The new (and already populated) array <em>of appropriate length</em> is now referenced by <code>bytes</code>.</p>\n<p>With that reassignment, we essentially discard the zero-length array.</p>\n<pre class=\"lang-java prettyprint-override\"><code>byte[] bytes = new byte[0];\ntry {\n  // ...\n  bytes = resourceAsStream.readAllBytes();\n}\n</code></pre>\n<hr />\n<p>No copying into the array first referenced by <code>bytes</code> is happening! In fact, if <code>bytes</code> is never read before its assignment in the <code>try</code>-block, then that assignment may even be its first:</p>\n<pre class=\"lang-java prettyprint-override\"><code>byte[] bytes; // Declaration of variable `bytes`\ntry {\n  // ...\n  bytes = resourceAsStream.readAllBytes(); // First initialization of `bytes`!\n}\n</code></pre>\n"}],"owner":{"account_id":10585944,"reputation":1,"user_id":7798303,"display_name":"priSim"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671260365,"creation_date":1671252645,"question_id":74831873,"body_markdown":"How can a byte array with 0 memory allocation (byte[] arr = new byte[0]) take bytes read from InputStream?\r\n\r\nBelow is my code \r\n```\r\nbyte[] bytes = new byte[0];\r\n\t\ttry {\r\n\t\tInputStream resourceAsStream = ArrayBasics.class.getResourceAsStream(&quot;/test.json&quot;);\r\n\t    bytes = resourceAsStream.readAllBytes();\t\t\r\n\t    System.out.println(Arrays.toString(bytes));\r\n\t\t} catch (Exception noSuchFileException) {\r\n\t\t\t System.out.println(&quot;Some exception&quot;);\r\n\t\t}\r\n```\r\nI would expect the code to fail and throw out of bounds error (as it would do if I try bytes[0] = 100;) But the &quot;bytes&quot; actually show the contents in the console without any error or warnings","title":"How is the byte[] array with 0 element allocation working with InputStream (readAllBytes)","body":"<p>How can a byte array with 0 memory allocation (byte[] arr = new byte[0]) take bytes read from InputStream?</p>\n<p>Below is my code</p>\n<pre><code>byte[] bytes = new byte[0];\n        try {\n        InputStream resourceAsStream = ArrayBasics.class.getResourceAsStream(&quot;/test.json&quot;);\n        bytes = resourceAsStream.readAllBytes();        \n        System.out.println(Arrays.toString(bytes));\n        } catch (Exception noSuchFileException) {\n             System.out.println(&quot;Some exception&quot;);\n        }\n</code></pre>\n<p>I would expect the code to fail and throw out of bounds error (as it would do if I try bytes[0] = 100;) But the &quot;bytes&quot; actually show the contents in the console without any error or warnings</p>\n"},{"tags":["java","android","database","firebase","android-studio"],"answers":[{"tags":[],"owner":{"account_id":17301412,"reputation":189,"user_id":12531078,"display_name":"Justin"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1671260035,"creation_date":1671260035,"answer_id":74832301,"question_id":74832020,"body_markdown":"If I&#39;m right, your `getKey` variable in `updateLaundry()` method is nullable, since your are setting the value of the intent key `getPrimaryKey` to this variable. So whenever you dont pass the value for `getPrimaryKey` via the intent then `getKey` will be set as null and this NPE can occur.\r\n\r\nTherefore, either do a null check for `getkey` before you use it or make sure you are passing the key via the intent from the previous activity.","title":"Error When Updating Data : java.lang.NullPointerException: Can&#39;t pass null for argument &#39;pathString&#39; in child()","body":"<p>If I'm right, your <code>getKey</code> variable in <code>updateLaundry()</code> method is nullable, since your are setting the value of the intent key <code>getPrimaryKey</code> to this variable. So whenever you dont pass the value for <code>getPrimaryKey</code> via the intent then <code>getKey</code> will be set as null and this NPE can occur.</p>\n<p>Therefore, either do a null check for <code>getkey</code> before you use it or make sure you are passing the key via the intent from the previous activity.</p>\n"}],"owner":{"account_id":25348036,"reputation":11,"user_id":19165334,"display_name":"M. Syahri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1671260744,"answer_count":1,"score":-1,"last_activity_date":1671260035,"creation_date":1671255441,"question_id":74832020,"body_markdown":"This is a simple sample of a crud function with Firebase via Android Studio. I found several obstacles in the update process, along with errors that appeared when updating.\r\n\r\n&gt; java.lang.NullPointerException: Can&#39;t pass null for argument &#39;pathString&#39; in child()\r\n\r\nIs there a simple solution to overcome this? Here is the complete code for the update activity.\r\n\r\n        import static android.text.TextUtils.isEmpty;\r\n        import android.annotation.SuppressLint;\r\n        import android.app.DatePickerDialog;\r\n        import android.os.Bundle;\r\n        import android.text.TextUtils;\r\n        import android.view.View;\r\n        import android.widget.Button;\r\n        import android.widget.EditText;\r\n        import android.widget.RadioButton;\r\n        import android.widget.RadioGroup;\r\n        import android.widget.Spinner;\r\n        import android.widget.Toast;\r\n        import androidx.appcompat.app.AppCompatActivity;\r\n        \r\n        //import com.bumptech.glide.Glide;\r\n        import com.google.android.gms.tasks.OnSuccessListener;\r\n        import com.google.firebase.database.DatabaseReference;\r\n        import com.google.firebase.database.FirebaseDatabase;\r\n        \r\n        import java.text.SimpleDateFormat;\r\n        \r\n        public class UpdateLaundry extends AppCompatActivity {\r\n        //deklarasi variable\r\n        private EditText namaBaru, tempatBaru;\r\n        private Spinner jenisBaru;\r\n        private RadioButton ktgBaru, new_Rb1, new_Rb2, new_Rb3;\r\n        private Button update;\r\n        private DatabaseReference database;\r\n        private RadioGroup rgkategoriBaru;\r\n        private String cekNama, cekTempat, cekJenis, cekKategori;\r\n    \r\n        @SuppressLint(&quot;WrongViewCast&quot;)\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_updatelaundry);\r\n    \r\n            namaBaru = findViewById(R.id.new_nama);\r\n            tempatBaru = findViewById(R.id.new_lokasi);\r\n            jenisBaru = findViewById(R.id.newspinner_jenis);\r\n            update = findViewById(R.id.btn_update);\r\n            new_Rb1 = findViewById(R.id.new_rb1);\r\n            new_Rb2 = findViewById(R.id.new_rb2);\r\n            new_Rb3 = findViewById(R.id.new_rb3);\r\n            rgkategoriBaru = findViewById(R.id.new_rg_ktg);\r\n    \r\n            final String getKategori = getIntent().getExtras().getString(&quot;dataKategori&quot;);\r\n    \r\n            if (getKategori.equals(&quot;Cuci&quot;)) {\r\n                new_Rb1.setChecked(true);\r\n            } else if (getKategori.equals(&quot;Setrika&quot;)) {\r\n                new_Rb2.setChecked(true);\r\n            } else if (getKategori.equals(&quot;Cuci dan Setrika&quot;)) {\r\n                new_Rb3.setChecked(true);\r\n            }\r\n    \r\n            database= FirebaseDatabase.getInstance().getReference();\r\n            getData();\r\n    \r\n    \r\n            update.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n    \r\n                    int pilihKtgBaru = rgkategoriBaru.getCheckedRadioButtonId();\r\n                    ktgBaru = findViewById(pilihKtgBaru);\r\n                    cekNama = namaBaru.getText().toString();\r\n                    cekTempat = tempatBaru.getText().toString();\r\n                    cekJenis = jenisBaru.getSelectedItem().toString();\r\n    \r\n    \r\n    //mengubah data databse menggunakan data yang baru di inputkan\r\n                    if (isEmpty(cekNama) || isEmpty(cekTempat)) {\r\n                        Toast.makeText(UpdateLaundry.this, &quot;Data tidak boleh kosong&quot;, Toast.LENGTH_SHORT).show();\r\n                    } else {\r\n                                        /*Processing Update Data\r\n                                        Reload setter recomended to get new data from user*/\r\n    \r\n                        Laundry setLaundry = new Laundry();\r\n                        setLaundry.setNama(namaBaru.getText().toString());\r\n                        setLaundry.setJenis(jenisBaru.getSelectedItem().toString());\r\n                        setLaundry.setTempat(tempatBaru.getText().toString());\r\n                        setLaundry.setKategori(ktgBaru.getText().toString());\r\n                        updateLaundry(setLaundry);\r\n    \r\n                    }\r\n                }\r\n            });\r\n        }\r\n    \r\n        private boolean isEmpty(String s){\r\n            return TextUtils.isEmpty(s);\r\n        }\r\n    \r\n        //mengambil data dari database ke form update\r\n        private void getData() {\r\n    \r\n            final String getNama = getIntent().getExtras().getString(&quot;dataNama&quot;);\r\n            final String getTempat = getIntent().getExtras().getString(&quot;dataTempat&quot;);\r\n            final String getKategori = getIntent().getExtras().getString(&quot;dataKategori&quot;);\r\n            final String getJenis = getIntent().getExtras().getString(&quot;dataJenis&quot;);\r\n    \r\n    \r\n            namaBaru.setText(getNama);\r\n            tempatBaru.setText(getTempat);\r\n    \r\n    \r\n        }\r\n        private void updateLaundry(Laundry ldry) {\r\n    \r\n            String getKey = getIntent().getExtras().getString(&quot;getPrimaryKey&quot;);\r\n            database.child(&quot;Admin&quot;)\r\n                    .child(&quot;Laundry&quot;)\r\n                    .child(getKey)\r\n                    .setValue(ldry)\r\n                    .addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            namaBaru.setText(&quot;&quot;);\r\n                            tempatBaru.setText(&quot;&quot;);\r\n    \r\n                            Toast.makeText(UpdateLaundry.this, &quot;Data Berhasil diubah&quot;, Toast.LENGTH_SHORT).show();\r\n                            finish();\r\n                        }\r\n                    });\r\n        }\r\n\r\n","title":"Error When Updating Data : java.lang.NullPointerException: Can&#39;t pass null for argument &#39;pathString&#39; in child()","body":"<p>This is a simple sample of a crud function with Firebase via Android Studio. I found several obstacles in the update process, along with errors that appeared when updating.</p>\n<blockquote>\n<p>java.lang.NullPointerException: Can't pass null for argument 'pathString' in child()</p>\n</blockquote>\n<p>Is there a simple solution to overcome this? Here is the complete code for the update activity.</p>\n<pre><code>    import static android.text.TextUtils.isEmpty;\n    import android.annotation.SuppressLint;\n    import android.app.DatePickerDialog;\n    import android.os.Bundle;\n    import android.text.TextUtils;\n    import android.view.View;\n    import android.widget.Button;\n    import android.widget.EditText;\n    import android.widget.RadioButton;\n    import android.widget.RadioGroup;\n    import android.widget.Spinner;\n    import android.widget.Toast;\n    import androidx.appcompat.app.AppCompatActivity;\n    \n    //import com.bumptech.glide.Glide;\n    import com.google.android.gms.tasks.OnSuccessListener;\n    import com.google.firebase.database.DatabaseReference;\n    import com.google.firebase.database.FirebaseDatabase;\n    \n    import java.text.SimpleDateFormat;\n    \n    public class UpdateLaundry extends AppCompatActivity {\n    //deklarasi variable\n    private EditText namaBaru, tempatBaru;\n    private Spinner jenisBaru;\n    private RadioButton ktgBaru, new_Rb1, new_Rb2, new_Rb3;\n    private Button update;\n    private DatabaseReference database;\n    private RadioGroup rgkategoriBaru;\n    private String cekNama, cekTempat, cekJenis, cekKategori;\n\n    @SuppressLint(&quot;WrongViewCast&quot;)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_updatelaundry);\n\n        namaBaru = findViewById(R.id.new_nama);\n        tempatBaru = findViewById(R.id.new_lokasi);\n        jenisBaru = findViewById(R.id.newspinner_jenis);\n        update = findViewById(R.id.btn_update);\n        new_Rb1 = findViewById(R.id.new_rb1);\n        new_Rb2 = findViewById(R.id.new_rb2);\n        new_Rb3 = findViewById(R.id.new_rb3);\n        rgkategoriBaru = findViewById(R.id.new_rg_ktg);\n\n        final String getKategori = getIntent().getExtras().getString(&quot;dataKategori&quot;);\n\n        if (getKategori.equals(&quot;Cuci&quot;)) {\n            new_Rb1.setChecked(true);\n        } else if (getKategori.equals(&quot;Setrika&quot;)) {\n            new_Rb2.setChecked(true);\n        } else if (getKategori.equals(&quot;Cuci dan Setrika&quot;)) {\n            new_Rb3.setChecked(true);\n        }\n\n        database= FirebaseDatabase.getInstance().getReference();\n        getData();\n\n\n        update.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n\n                int pilihKtgBaru = rgkategoriBaru.getCheckedRadioButtonId();\n                ktgBaru = findViewById(pilihKtgBaru);\n                cekNama = namaBaru.getText().toString();\n                cekTempat = tempatBaru.getText().toString();\n                cekJenis = jenisBaru.getSelectedItem().toString();\n\n\n//mengubah data databse menggunakan data yang baru di inputkan\n                if (isEmpty(cekNama) || isEmpty(cekTempat)) {\n                    Toast.makeText(UpdateLaundry.this, &quot;Data tidak boleh kosong&quot;, Toast.LENGTH_SHORT).show();\n                } else {\n                                    /*Processing Update Data\n                                    Reload setter recomended to get new data from user*/\n\n                    Laundry setLaundry = new Laundry();\n                    setLaundry.setNama(namaBaru.getText().toString());\n                    setLaundry.setJenis(jenisBaru.getSelectedItem().toString());\n                    setLaundry.setTempat(tempatBaru.getText().toString());\n                    setLaundry.setKategori(ktgBaru.getText().toString());\n                    updateLaundry(setLaundry);\n\n                }\n            }\n        });\n    }\n\n    private boolean isEmpty(String s){\n        return TextUtils.isEmpty(s);\n    }\n\n    //mengambil data dari database ke form update\n    private void getData() {\n\n        final String getNama = getIntent().getExtras().getString(&quot;dataNama&quot;);\n        final String getTempat = getIntent().getExtras().getString(&quot;dataTempat&quot;);\n        final String getKategori = getIntent().getExtras().getString(&quot;dataKategori&quot;);\n        final String getJenis = getIntent().getExtras().getString(&quot;dataJenis&quot;);\n\n\n        namaBaru.setText(getNama);\n        tempatBaru.setText(getTempat);\n\n\n    }\n    private void updateLaundry(Laundry ldry) {\n\n        String getKey = getIntent().getExtras().getString(&quot;getPrimaryKey&quot;);\n        database.child(&quot;Admin&quot;)\n                .child(&quot;Laundry&quot;)\n                .child(getKey)\n                .setValue(ldry)\n                .addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\n                    @Override\n                    public void onSuccess(Void aVoid) {\n                        namaBaru.setText(&quot;&quot;);\n                        tempatBaru.setText(&quot;&quot;);\n\n                        Toast.makeText(UpdateLaundry.this, &quot;Data Berhasil diubah&quot;, Toast.LENGTH_SHORT).show();\n                        finish();\n                    }\n                });\n    }\n</code></pre>\n"},{"tags":["java","generics","overloading"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":3,"creation_date":1671244142,"post_id":74831327,"comment_id":132064066,"body_markdown":"Why not make the methods be declared to use generic types?","body":"Why not make the methods be declared to use generic types?"}],"answers":[{"tags":[],"owner":{"account_id":18608321,"reputation":2964,"user_id":13561410,"display_name":"Oskar Grosser"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671258909,"creation_date":1671258909,"answer_id":74832241,"question_id":74831327,"body_markdown":"At compilation, Java performs [Type Erasure][1]. During that process, your parameters become plain `ArrayList` types. As such, their erasure is the same, hence your error.\r\n\r\nIn my limited experience, solutions to avoid clashes could be to:\r\n1. Use different (e.g. custom) classes, or\r\n2. Change the method names.\r\n\r\n\r\n# 1. Use different classes\r\nYou can define custom classes that extend `HashMap`:\r\n```java\r\npublic class ArrayKeyHashMap&lt;K, V&gt; extends HashMap&lt;ArrayList&lt;K&gt;, V&gt; {\r\n  // Constructors ...\r\n}\r\npublic class StringKeyHashMap&lt;V&gt; extends HashMap&lt;String, V&gt; {\r\n  // Constructors ...\r\n}\r\n\r\npublic class Example {\r\n  public static void printMap(ArrayKeyHashMap&lt;String, ArrayList&lt;String&gt;&gt; thisMap) {\r\n    // ...\r\n  }\r\n  public static void printMap(StringKeyHashMap&lt;ArrayList&lt;String&gt;&gt; thisMap) {\r\n    // ...\r\n  }\r\n}\r\n```\r\n\r\nThis way, your method signatures will differ even after type erasure, since literally different classes are used.\r\n\r\n# 2. Change method names\r\nBy changing the method names you unfortunately do not overload the methods anymore, but you avoid the issue of having clashes after type erasure:\r\n```java\r\npublic class Example {\r\n  public static void printArrayArrayMap(HashMap&lt;ArrayList&lt;String&gt;, ArrayList&lt;String&gt;&gt; thisMap) {\r\n    // ...\r\n  }\r\n  public static void printStringArrayMap(HashMap&lt;String, ArrayList&lt;String&gt;&gt; thisMap) {\r\n    // ...\r\n  }\r\n}\r\n```\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/generics/erasure.html","title":"Is it possible to overload a method that takes the same data structure but different data types?","body":"<p>At compilation, Java performs <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/erasure.html\" rel=\"nofollow noreferrer\">Type Erasure</a>. During that process, your parameters become plain <code>ArrayList</code> types. As such, their erasure is the same, hence your error.</p>\n<p>In my limited experience, solutions to avoid clashes could be to:</p>\n<ol>\n<li>Use different (e.g. custom) classes, or</li>\n<li>Change the method names.</li>\n</ol>\n<h1>1. Use different classes</h1>\n<p>You can define custom classes that extend <code>HashMap</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ArrayKeyHashMap&lt;K, V&gt; extends HashMap&lt;ArrayList&lt;K&gt;, V&gt; {\n  // Constructors ...\n}\npublic class StringKeyHashMap&lt;V&gt; extends HashMap&lt;String, V&gt; {\n  // Constructors ...\n}\n\npublic class Example {\n  public static void printMap(ArrayKeyHashMap&lt;String, ArrayList&lt;String&gt;&gt; thisMap) {\n    // ...\n  }\n  public static void printMap(StringKeyHashMap&lt;ArrayList&lt;String&gt;&gt; thisMap) {\n    // ...\n  }\n}\n</code></pre>\n<p>This way, your method signatures will differ even after type erasure, since literally different classes are used.</p>\n<h1>2. Change method names</h1>\n<p>By changing the method names you unfortunately do not overload the methods anymore, but you avoid the issue of having clashes after type erasure:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Example {\n  public static void printArrayArrayMap(HashMap&lt;ArrayList&lt;String&gt;, ArrayList&lt;String&gt;&gt; thisMap) {\n    // ...\n  }\n  public static void printStringArrayMap(HashMap&lt;String, ArrayList&lt;String&gt;&gt; thisMap) {\n    // ...\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":27277940,"reputation":11,"user_id":20798258,"display_name":"kid"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1671258909,"creation_date":1671242643,"question_id":74831327,"body_markdown":"Is it possible to overload a method that takes a particular data structure with different types? For example first a string array, then an int array?\r\n\r\nI have two hashmaps in my code and I am trying to print out their key, value pairs. The first hashmap takes string arraylists as both its key and value. The second one takes strings as keys and string arraylists as values:\r\n\r\n```\r\npublic static void printMap(HashMap&lt;ArrayList&lt;String&gt;, ArrayList&lt;String&gt;&gt; thisMap){\r\n    int i = 0;\r\n    for(ArrayList&lt;String&gt; key : thisMap.keySet()){\r\n        System.out.println(i + &quot; &quot; + key + &quot; &gt;&gt; &quot; + thisMap.get(key).toString());\r\n        System.out.println(&quot; &quot;);\r\n        i++;\r\n    }\r\n}\r\n\r\npublic static void printMap(HashMap&lt;String, ArrayList&lt;String&gt;&gt; thisMap){\r\n    int i = 0;\r\n    for(String key : thisMap.keySet()){\r\n        System.out.println(i + &quot; &quot; + key + &quot; &gt;&gt; &quot; + thisMap.get(key));\r\n        System.out.println(&quot; &quot;);\r\n        i++;\r\n    }\r\n}\r\n```\r\n\r\nI tried to overload a single method to print both maps but keep getting this error:\r\n\r\n```\r\njava: name clash: printMap(java.util.HashMap&lt;java.util.ArrayList&lt;java.lang.String&gt;,java.util.ArrayList&lt;java.lang.String&gt;&gt;) \r\nand printMap(java.util.HashMap&lt;java.lang.String,java.util.ArrayList&lt;java.lang.String&gt;&gt;) \r\nhave the same erasure.\r\n```\r\n\r\nwhat am I doing wrong?\r\n\r\n","title":"Is it possible to overload a method that takes the same data structure but different data types?","body":"<p>Is it possible to overload a method that takes a particular data structure with different types? For example first a string array, then an int array?</p>\n<p>I have two hashmaps in my code and I am trying to print out their key, value pairs. The first hashmap takes string arraylists as both its key and value. The second one takes strings as keys and string arraylists as values:</p>\n<pre><code>public static void printMap(HashMap&lt;ArrayList&lt;String&gt;, ArrayList&lt;String&gt;&gt; thisMap){\n    int i = 0;\n    for(ArrayList&lt;String&gt; key : thisMap.keySet()){\n        System.out.println(i + &quot; &quot; + key + &quot; &gt;&gt; &quot; + thisMap.get(key).toString());\n        System.out.println(&quot; &quot;);\n        i++;\n    }\n}\n\npublic static void printMap(HashMap&lt;String, ArrayList&lt;String&gt;&gt; thisMap){\n    int i = 0;\n    for(String key : thisMap.keySet()){\n        System.out.println(i + &quot; &quot; + key + &quot; &gt;&gt; &quot; + thisMap.get(key));\n        System.out.println(&quot; &quot;);\n        i++;\n    }\n}\n</code></pre>\n<p>I tried to overload a single method to print both maps but keep getting this error:</p>\n<pre><code>java: name clash: printMap(java.util.HashMap&lt;java.util.ArrayList&lt;java.lang.String&gt;,java.util.ArrayList&lt;java.lang.String&gt;&gt;) \nand printMap(java.util.HashMap&lt;java.lang.String,java.util.ArrayList&lt;java.lang.String&gt;&gt;) \nhave the same erasure.\n</code></pre>\n<p>what am I doing wrong?</p>\n"},{"tags":["java","json","serialization","gson"],"answers":[{"tags":[],"owner":{"account_id":27220217,"reputation":11,"user_id":20749626,"display_name":"h3y"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671255078,"creation_date":1671255078,"answer_id":74832000,"question_id":74831501,"body_markdown":"Your JSON file is not formatted properly to map correctly to your POJO&#39;s.\r\n\r\n```\r\npublic class Chunk {\r\nprivate final String worldName;\r\nprivate final int x;\r\nprivate final int z;\r\n```\r\n\r\nYour ```Chunk``` class has a String and two int values.\r\n\r\nThis is the ```Chunk``` object in your JSON file.\r\n\r\n```\r\n&quot;WorldName:world X:-3 Z:-64&quot;: \r\n```\r\n\r\nGson is looking for your ```Chunk``` POJO, but the entire line is just one String. You need to wrap quotation marks around each set of keys (and values if they are Strings), along with commas as separators. \r\n\r\n\r\n```\r\n&quot;WorldName&quot;:&quot;world&quot;, &quot;X&quot;:-3, &quot;Z&quot;:-64 \r\n```\r\nThese will have to be corrected throughout the rest of the JSON as well. ","title":"Json error when restoring saved objects from file","body":"<p>Your JSON file is not formatted properly to map correctly to your POJO's.</p>\n<pre><code>public class Chunk {\nprivate final String worldName;\nprivate final int x;\nprivate final int z;\n</code></pre>\n<p>Your <code>Chunk</code> class has a String and two int values.</p>\n<p>This is the <code>Chunk</code> object in your JSON file.</p>\n<pre><code>&quot;WorldName:world X:-3 Z:-64&quot;: \n</code></pre>\n<p>Gson is looking for your <code>Chunk</code> POJO, but the entire line is just one String. You need to wrap quotation marks around each set of keys (and values if they are Strings), along with commas as separators.</p>\n<pre><code>&quot;WorldName&quot;:&quot;world&quot;, &quot;X&quot;:-3, &quot;Z&quot;:-64 \n</code></pre>\n<p>These will have to be corrected throughout the rest of the JSON as well.</p>\n"}],"owner":{"account_id":26923532,"reputation":33,"user_id":20497135,"display_name":"HowDoISolveThis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671256936,"creation_date":1671245862,"question_id":74831501,"body_markdown":"I have a LinkedHashMap that contains two objects which both reside inside a normal HashMap. All 3 objects inside these maps have hashCode, equals, and toString methods. The &quot;Chunk&quot; object contains 3 variables a string and 2 integers all are final. The Location object only contains a string and 3 integers which are also final. Lastly, the ChestObject contains an enum and a list of other enums.\r\n\r\n```\r\npublic static Map&lt;Chunk, LinkedHashMap&lt;Location, ChestObject&gt;&gt; CHEST_MAP = new HashMap&lt;&gt;();\r\n\r\npublic class Location {\r\nprivate final String worldName;\r\nprivate final int x;\r\nprivate final int y;\r\nprivate final int z;\r\n\r\npublic class Chunk {\r\nprivate final String worldName;\r\nprivate final int x;\r\nprivate final int z;\r\n\r\npublic class ChestObject {\r\npublic List&lt;Material&gt; filteredMaterials = new ArrayList&lt;&gt;();\r\nprivate ChestType chestType;\r\n```\r\n\r\nSaving the map works perfectly but retrieving the info throws the following error.\r\n\r\n```\r\n[17:17:53 WARN]: com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 2 column 4 [17:17:53 WARN]:        at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:176) [17:17:53 WARN]:        at com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.read(TypeAdapterRuntimeTypeWrapper.java:40) [17:17:53 WARN]:        at com.google.gson.internal.bind.MapTypeAdapterFactory$Adapter.read(MapTypeAdapterFactory.java:186) [17:17:53 WARN]:        at com.google.gson.internal.bind.MapTypeAdapterFactory$Adapter.read(MapTypeAdapterFactory.java:145) [17:17:53 WARN]:        at com.google.gson.Gson.fromJson(Gson.java:803) [17:17:53 WARN]:        at com.google.gson.Gson.fromJson(Gson.java:768) [17:17:53 WARN]:  \r\nCaused by: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 2 column 4 [17:17:53 WARN]:        at com.google.gson.stream.JsonReader.beginObject(JsonReader.java:374) [17:17:53 WARN]:        at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:165) [17:17:53 WARN]:        ... 18 more\r\n```\r\n\r\nThe file it attempts to read is the following...\r\n\r\n```\r\n{\r\n  &quot;WorldName:world X:-3 Z:-64&quot;: {\r\n    &quot;WorldName:world X:-39 Y:63 Z:-1016&quot;: {\r\n      &quot;filteredMaterials&quot;: [\r\n        &quot;ROTTEN_FLESH&quot;\r\n      ],\r\n      &quot;chestType&quot;: &quot;DOUBLE&quot;\r\n    },\r\n    &quot;WorldName:world X:-40 Y:63 Z:-1016&quot;: {\r\n      &quot;filteredMaterials&quot;: [\r\n        &quot;ROTTEN_FLESH&quot;\r\n      ],\r\n      &quot;chestType&quot;: &quot;DOUBLE&quot;\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThe last bit of useful info is my recovery method which at this moment just attempts to print the map instead of assigning it to CHEST_MAP.\r\n\r\n```\r\nprivate void recoverCollectionChests() {\r\n    final File file = new File(getDataFolder(), &quot;chests.json&quot;);\r\n\r\n    if(file.exists() &amp;&amp; file.length() &gt; 2) {\r\n        try {\r\n            final Gson gson = new GsonBuilder().setPrettyPrinting().create();\r\n            final Type type = new TypeToken&lt;Map&lt;Chunk, LinkedHashMap&lt;Location, ChestObject&gt;&gt;&gt;() {}.getType();\r\n            final Map&lt;Chunk, LinkedHashMap&lt;Location, ChestObject&gt;&gt; map = gson.fromJson(new FileReader(file), type);\r\n            System.out.println(&quot;Map: &quot; + map);\r\n        } catch (IllegalStateException | JsonSyntaxException | IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nSo what exactly is the problem here? I do have pretty printing enabled but I have done this many times without ever have any issues so what exactly is it complaining about here? I also confirmed that all objects are of the same / correct type.\r\n\r\n```\r\n private void saveChests() {\r\n        try {\r\n            if(!CHEST_MAP.isEmpty()) {\r\n                final File file = new File(this.getDataFolder(), &quot;chests.json&quot;);\r\n                final Gson gson = new GsonBuilder().setPrettyPrinting().create();\r\n                final Writer writer = new FileWriter(file);\r\n\r\n                gson.toJson(CHEST_MAP, writer);\r\n                writer.flush();\r\n                writer.close();\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n```","title":"Json error when restoring saved objects from file","body":"<p>I have a LinkedHashMap that contains two objects which both reside inside a normal HashMap. All 3 objects inside these maps have hashCode, equals, and toString methods. The &quot;Chunk&quot; object contains 3 variables a string and 2 integers all are final. The Location object only contains a string and 3 integers which are also final. Lastly, the ChestObject contains an enum and a list of other enums.</p>\n<pre><code>public static Map&lt;Chunk, LinkedHashMap&lt;Location, ChestObject&gt;&gt; CHEST_MAP = new HashMap&lt;&gt;();\n\npublic class Location {\nprivate final String worldName;\nprivate final int x;\nprivate final int y;\nprivate final int z;\n\npublic class Chunk {\nprivate final String worldName;\nprivate final int x;\nprivate final int z;\n\npublic class ChestObject {\npublic List&lt;Material&gt; filteredMaterials = new ArrayList&lt;&gt;();\nprivate ChestType chestType;\n</code></pre>\n<p>Saving the map works perfectly but retrieving the info throws the following error.</p>\n<pre><code>[17:17:53 WARN]: com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 2 column 4 [17:17:53 WARN]:        at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:176) [17:17:53 WARN]:        at com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.read(TypeAdapterRuntimeTypeWrapper.java:40) [17:17:53 WARN]:        at com.google.gson.internal.bind.MapTypeAdapterFactory$Adapter.read(MapTypeAdapterFactory.java:186) [17:17:53 WARN]:        at com.google.gson.internal.bind.MapTypeAdapterFactory$Adapter.read(MapTypeAdapterFactory.java:145) [17:17:53 WARN]:        at com.google.gson.Gson.fromJson(Gson.java:803) [17:17:53 WARN]:        at com.google.gson.Gson.fromJson(Gson.java:768) [17:17:53 WARN]:  \nCaused by: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 2 column 4 [17:17:53 WARN]:        at com.google.gson.stream.JsonReader.beginObject(JsonReader.java:374) [17:17:53 WARN]:        at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:165) [17:17:53 WARN]:        ... 18 more\n</code></pre>\n<p>The file it attempts to read is the following...</p>\n<pre><code>{\n  &quot;WorldName:world X:-3 Z:-64&quot;: {\n    &quot;WorldName:world X:-39 Y:63 Z:-1016&quot;: {\n      &quot;filteredMaterials&quot;: [\n        &quot;ROTTEN_FLESH&quot;\n      ],\n      &quot;chestType&quot;: &quot;DOUBLE&quot;\n    },\n    &quot;WorldName:world X:-40 Y:63 Z:-1016&quot;: {\n      &quot;filteredMaterials&quot;: [\n        &quot;ROTTEN_FLESH&quot;\n      ],\n      &quot;chestType&quot;: &quot;DOUBLE&quot;\n    }\n  }\n}\n</code></pre>\n<p>The last bit of useful info is my recovery method which at this moment just attempts to print the map instead of assigning it to CHEST_MAP.</p>\n<pre><code>private void recoverCollectionChests() {\n    final File file = new File(getDataFolder(), &quot;chests.json&quot;);\n\n    if(file.exists() &amp;&amp; file.length() &gt; 2) {\n        try {\n            final Gson gson = new GsonBuilder().setPrettyPrinting().create();\n            final Type type = new TypeToken&lt;Map&lt;Chunk, LinkedHashMap&lt;Location, ChestObject&gt;&gt;&gt;() {}.getType();\n            final Map&lt;Chunk, LinkedHashMap&lt;Location, ChestObject&gt;&gt; map = gson.fromJson(new FileReader(file), type);\n            System.out.println(&quot;Map: &quot; + map);\n        } catch (IllegalStateException | JsonSyntaxException | IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>So what exactly is the problem here? I do have pretty printing enabled but I have done this many times without ever have any issues so what exactly is it complaining about here? I also confirmed that all objects are of the same / correct type.</p>\n<pre><code> private void saveChests() {\n        try {\n            if(!CHEST_MAP.isEmpty()) {\n                final File file = new File(this.getDataFolder(), &quot;chests.json&quot;);\n                final Gson gson = new GsonBuilder().setPrettyPrinting().create();\n                final Writer writer = new FileWriter(file);\n\n                gson.toJson(CHEST_MAP, writer);\n                writer.flush();\n                writer.close();\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n"},{"tags":["java","json","spring","jackson","object-object-mapping"],"answers":[{"tags":[],"owner":{"account_id":429950,"reputation":1793,"user_id":813118,"accept_rate":82,"display_name":"Steve Eastwood"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1320052884,"creation_date":1320052884,"answer_id":7951770,"question_id":7854030,"body_markdown":"I found the solution now based on https://github.com/FasterXML/jackson-module-hibernate\r\n\r\nI extended the object mapper and added the attributes in the inherited constructor.\r\n\r\nThen the new object mapper is registered as a bean.\r\n\r\n\t&lt;!-- https://github.com/FasterXML/jackson-module-hibernate --&gt;\r\n    &lt;bean class=&quot;org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter&quot;&gt;\r\n        &lt;property name=&quot;messageConverters&quot;&gt;\r\n            &lt;array&gt;\r\n                &lt;bean id=&quot;jsonConverter&quot;\r\n                class=&quot;org.springframework.http.converter.json.MappingJacksonHttpMessageConverter&quot;&gt;\r\n                    &lt;property name=&quot;objectMapper&quot;&gt;\r\n                        &lt;bean class=&quot;de.company.backend.spring.PtxObjectMapper&quot;/&gt;\r\n                    &lt;/property&gt;\r\n                &lt;/bean&gt;\r\n            &lt;/array&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;   ","title":"Configuring ObjectMapper in Spring","body":"<p>I found the solution now based on <a href=\"https://github.com/FasterXML/jackson-module-hibernate\" rel=\"noreferrer\">https://github.com/FasterXML/jackson-module-hibernate</a></p>\n\n<p>I extended the object mapper and added the attributes in the inherited constructor.</p>\n\n<p>Then the new object mapper is registered as a bean.</p>\n\n<pre><code>&lt;!-- https://github.com/FasterXML/jackson-module-hibernate --&gt;\n&lt;bean class=\"org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter\"&gt;\n    &lt;property name=\"messageConverters\"&gt;\n        &lt;array&gt;\n            &lt;bean id=\"jsonConverter\"\n            class=\"org.springframework.http.converter.json.MappingJacksonHttpMessageConverter\"&gt;\n                &lt;property name=\"objectMapper\"&gt;\n                    &lt;bean class=\"de.company.backend.spring.PtxObjectMapper\"/&gt;\n                &lt;/property&gt;\n            &lt;/bean&gt;\n        &lt;/array&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;   \n</code></pre>\n"},{"tags":[],"owner":{"account_id":20832,"reputation":6065,"user_id":50131,"accept_rate":100,"display_name":"Andrew Newdigate"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1324568658,"creation_date":1324568658,"answer_id":8606225,"question_id":7854030,"body_markdown":"It may be because I&#39;m using Spring 3.1 (instead of Spring 3.0.5 as your question specified), but Steve Eastwood&#39;s answer didn&#39;t work for me. This solution works for Spring 3.1:\r\n\r\n**In your spring xml context:**\r\n\r\n   \t&lt;mvc:annotation-driven&gt;\r\n        &lt;mvc:message-converters&gt;\r\n            &lt;bean class=&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;/&gt;\r\n            &lt;bean class=&quot;org.springframework.http.converter.ByteArrayHttpMessageConverter&quot;/&gt;\r\n            &lt;bean class=&quot;org.springframework.http.converter.json.MappingJacksonHttpMessageConverter&quot;&gt;\r\n                &lt;property name=&quot;objectMapper&quot; ref=&quot;jacksonObjectMapper&quot; /&gt;\r\n            &lt;/bean&gt;        \r\n        &lt;/mvc:message-converters&gt;\r\n    &lt;/mvc:annotation-driven&gt;\r\n\r\n    &lt;bean id=&quot;jacksonObjectMapper&quot; class=&quot;de.Company.backend.web.CompanyObjectMapper&quot; /&gt;\r\n   \r\n","title":"Configuring ObjectMapper in Spring","body":"<p>It may be because I'm using Spring 3.1 (instead of Spring 3.0.5 as your question specified), but Steve Eastwood's answer didn't work for me. This solution works for Spring 3.1:</p>\n\n<p><strong>In your spring xml context:</strong></p>\n\n<pre><code>&lt;mvc:annotation-driven&gt;\n    &lt;mvc:message-converters&gt;\n        &lt;bean class=\"org.springframework.http.converter.StringHttpMessageConverter\"/&gt;\n        &lt;bean class=\"org.springframework.http.converter.ByteArrayHttpMessageConverter\"/&gt;\n        &lt;bean class=\"org.springframework.http.converter.json.MappingJacksonHttpMessageConverter\"&gt;\n            &lt;property name=\"objectMapper\" ref=\"jacksonObjectMapper\" /&gt;\n        &lt;/bean&gt;        \n    &lt;/mvc:message-converters&gt;\n&lt;/mvc:annotation-driven&gt;\n\n&lt;bean id=\"jacksonObjectMapper\" class=\"de.Company.backend.web.CompanyObjectMapper\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":263936,"reputation":20265,"user_id":549848,"accept_rate":74,"display_name":"Aram Kocharyan"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1348737099,"creation_date":1348737099,"answer_id":12617890,"question_id":7854030,"body_markdown":"I&#39;ve used this with Jackson **2.x** and Spring **3.1.2+**\r\n\r\n**servlet-context.xml:**\r\n\r\nNote that the root element is `&lt;beans:beans&gt;`, so you may need to remove `beans` and add `mvc` to some of these elements depending on your setup.\r\n\r\n    \t&lt;annotation-driven&gt;\r\n    \t\t&lt;message-converters&gt;\r\n    \t\t\t&lt;beans:bean\r\n    \t\t\t\tclass=&quot;org.springframework.http.converter.StringHttpMessageConverter&quot; /&gt;\r\n    \t\t\t&lt;beans:bean\r\n    \t\t\t\tclass=&quot;org.springframework.http.converter.ResourceHttpMessageConverter&quot; /&gt;\r\n    \t\t\t&lt;beans:bean\r\n    \t\t\t\tclass=&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;&gt;\r\n    \t\t\t\t&lt;beans:property name=&quot;objectMapper&quot; ref=&quot;jacksonObjectMapper&quot; /&gt;\r\n    \t\t\t&lt;/beans:bean&gt;\r\n    \t\t&lt;/message-converters&gt;\r\n    \t&lt;/annotation-driven&gt;\r\n    \r\n    \t&lt;beans:bean id=&quot;jacksonObjectMapper&quot;\r\n    \t\tclass=&quot;au.edu.unimelb.atcom.transfer.json.mappers.JSONMapper&quot; /&gt;\r\n\r\n**au.edu.unimelb.atcom.transfer.json.mappers.JSONMapper.java:**\r\n\r\n    public class JSONMapper extends ObjectMapper {\r\n    \r\n    \tpublic JSONMapper() {\r\n    \t\tSimpleModule module = new SimpleModule(&quot;JSONModule&quot;, new Version(2, 0, 0, null, null, null));\r\n    \t\tmodule.addSerializer(Date.class, new DateSerializer());\r\n    \t\tmodule.addDeserializer(Date.class, new DateDeserializer());\r\n    \t\t// Add more here ...\r\n    \t\tregisterModule(module);\r\n    \t}\r\n    \r\n    }\r\n\r\n**DateSerializer.java:**\r\n\r\n    public class DateSerializer extends StdSerializer&lt;Date&gt; {\r\n    \r\n    \tpublic DateSerializer() {\r\n    \t\tsuper(Date.class);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void serialize(Date date, JsonGenerator json,\r\n    \t\t\tSerializerProvider provider) throws IOException,\r\n    \t\t\tJsonGenerationException {\r\n    \t\t// The client side will handle presentation, we just want it accurate\r\n    \t\tDateFormat df = StdDateFormat.getBlueprintISO8601Format();\r\n    \t\tString out = df.format(date);\r\n    \t\tjson.writeString(out);\r\n    \t}\r\n    \r\n    }\r\n\r\n**DateDeserializer.java:**\r\n\r\n    public class DateDeserializer extends StdDeserializer&lt;Date&gt; {\r\n    \r\n    \tpublic DateDeserializer() {\r\n    \t\tsuper(Date.class);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Date deserialize(JsonParser json, DeserializationContext context)\r\n    \t\t\tthrows IOException, JsonProcessingException {\r\n    \t\ttry {\r\n    \t\t\tDateFormat df = StdDateFormat.getBlueprintISO8601Format();\r\n    \t\t\treturn df.parse(json.getText());\r\n    \t\t} catch (ParseException e) {\r\n    \t\t\treturn null;\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"Configuring ObjectMapper in Spring","body":"<p>I've used this with Jackson <strong>2.x</strong> and Spring <strong>3.1.2+</strong></p>\n\n<p><strong>servlet-context.xml:</strong></p>\n\n<p>Note that the root element is <code>&lt;beans:beans&gt;</code>, so you may need to remove <code>beans</code> and add <code>mvc</code> to some of these elements depending on your setup.</p>\n\n<pre><code>    &lt;annotation-driven&gt;\n        &lt;message-converters&gt;\n            &lt;beans:bean\n                class=\"org.springframework.http.converter.StringHttpMessageConverter\" /&gt;\n            &lt;beans:bean\n                class=\"org.springframework.http.converter.ResourceHttpMessageConverter\" /&gt;\n            &lt;beans:bean\n                class=\"org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\"&gt;\n                &lt;beans:property name=\"objectMapper\" ref=\"jacksonObjectMapper\" /&gt;\n            &lt;/beans:bean&gt;\n        &lt;/message-converters&gt;\n    &lt;/annotation-driven&gt;\n\n    &lt;beans:bean id=\"jacksonObjectMapper\"\n        class=\"au.edu.unimelb.atcom.transfer.json.mappers.JSONMapper\" /&gt;\n</code></pre>\n\n<p><strong>au.edu.unimelb.atcom.transfer.json.mappers.JSONMapper.java:</strong></p>\n\n<pre><code>public class JSONMapper extends ObjectMapper {\n\n    public JSONMapper() {\n        SimpleModule module = new SimpleModule(\"JSONModule\", new Version(2, 0, 0, null, null, null));\n        module.addSerializer(Date.class, new DateSerializer());\n        module.addDeserializer(Date.class, new DateDeserializer());\n        // Add more here ...\n        registerModule(module);\n    }\n\n}\n</code></pre>\n\n<p><strong>DateSerializer.java:</strong></p>\n\n<pre><code>public class DateSerializer extends StdSerializer&lt;Date&gt; {\n\n    public DateSerializer() {\n        super(Date.class);\n    }\n\n    @Override\n    public void serialize(Date date, JsonGenerator json,\n            SerializerProvider provider) throws IOException,\n            JsonGenerationException {\n        // The client side will handle presentation, we just want it accurate\n        DateFormat df = StdDateFormat.getBlueprintISO8601Format();\n        String out = df.format(date);\n        json.writeString(out);\n    }\n\n}\n</code></pre>\n\n<p><strong>DateDeserializer.java:</strong></p>\n\n<pre><code>public class DateDeserializer extends StdDeserializer&lt;Date&gt; {\n\n    public DateDeserializer() {\n        super(Date.class);\n    }\n\n    @Override\n    public Date deserialize(JsonParser json, DeserializationContext context)\n            throws IOException, JsonProcessingException {\n        try {\n            DateFormat df = StdDateFormat.getBlueprintISO8601Format();\n            return df.parse(json.getText());\n        } catch (ParseException e) {\n            return null;\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2004750,"reputation":8566,"user_id":1795426,"display_name":"user11153"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1392204279,"creation_date":1392204279,"answer_id":21726601,"question_id":7854030,"body_markdown":"If you want to add custom ObjectMapper for registering custom serializers, try my answer.\r\n\r\nIn my case (Spring 3.2.4 and Jackson 2.3.1), XML configuration for custom serializer:\r\n\r\n&lt;!-- language: lang-xml--&gt;\r\n\r\n\t&lt;mvc:annotation-driven&gt;\r\n\t\t&lt;mvc:message-converters register-defaults=&quot;false&quot;&gt;\r\n\t\t\t&lt;bean class=&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;&gt;\r\n\t\t\t\t&lt;property name=&quot;objectMapper&quot;&gt;\r\n\t\t\t\t\t&lt;bean class=&quot;org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean&quot;&gt;\r\n\t\t\t\t\t\t&lt;property name=&quot;serializers&quot;&gt;\r\n\t\t\t\t\t\t\t&lt;array&gt;\r\n\t\t\t\t\t\t\t\t&lt;bean class=&quot;com.example.business.serializer.json.CustomObjectSerializer&quot;/&gt;\r\n\t\t\t\t\t\t\t&lt;/array&gt;\r\n\t\t\t\t\t\t&lt;/property&gt;\r\n\t\t\t\t\t&lt;/bean&gt;\r\n\t\t\t\t&lt;/property&gt;\r\n\t\t\t&lt;/bean&gt;\r\n\t\t&lt;/mvc:message-converters&gt;\r\n\t&lt;/mvc:annotation-driven&gt;\r\n\r\nwas in unexplained way overwritten back to default by something.\r\n\r\nThis worked for me:\r\n\r\nCustomObject.java\r\n---\r\n&lt;!-- language: lang-java--&gt;\r\n\r\n\t@JsonSerialize(using = CustomObjectSerializer.class)\r\n\tpublic class CustomObject {\r\n\r\n\t\tprivate Long value;\r\n\r\n\t\tpublic Long getValue() {\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\tpublic void setValue(Long value) {\r\n\t\t\tthis.value = value;\r\n\t\t}\r\n\t}\r\n\r\nCustomObjectSerializer.java\r\n---\r\n&lt;!-- language: lang-java--&gt;\r\n\r\n\tpublic class CustomObjectSerializer extends JsonSerializer&lt;CustomObject&gt; {\r\n\r\n\t\t@Override\r\n\t\tpublic void serialize(CustomObject value, JsonGenerator jgen,\r\n\t\t\tSerializerProvider provider) throws IOException,JsonProcessingException {\r\n\t\t\tjgen.writeStartObject();\r\n\t\t\tjgen.writeNumberField(&quot;y&quot;, value.getValue());\r\n\t\t\tjgen.writeEndObject();\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic Class&lt;CustomObject&gt; handledType() {\r\n\t\t\treturn CustomObject.class;\r\n\t\t}\r\n\t}\r\n\r\nNo XML configuration (`&lt;mvc:message-converters&gt;(...)&lt;/mvc:message-converters&gt;`) is needed in my solution.","title":"Configuring ObjectMapper in Spring","body":"<p>If you want to add custom ObjectMapper for registering custom serializers, try my answer.</p>\n\n<p>In my case (Spring 3.2.4 and Jackson 2.3.1), XML configuration for custom serializer:</p>\n\n\n\n<pre><code>&lt;mvc:annotation-driven&gt;\n    &lt;mvc:message-converters register-defaults=\"false\"&gt;\n        &lt;bean class=\"org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\"&gt;\n            &lt;property name=\"objectMapper\"&gt;\n                &lt;bean class=\"org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean\"&gt;\n                    &lt;property name=\"serializers\"&gt;\n                        &lt;array&gt;\n                            &lt;bean class=\"com.example.business.serializer.json.CustomObjectSerializer\"/&gt;\n                        &lt;/array&gt;\n                    &lt;/property&gt;\n                &lt;/bean&gt;\n            &lt;/property&gt;\n        &lt;/bean&gt;\n    &lt;/mvc:message-converters&gt;\n&lt;/mvc:annotation-driven&gt;\n</code></pre>\n\n<p>was in unexplained way overwritten back to default by something.</p>\n\n<p>This worked for me:</p>\n\n<h2>CustomObject.java</h2>\n\n\n\n<pre><code>@JsonSerialize(using = CustomObjectSerializer.class)\npublic class CustomObject {\n\n    private Long value;\n\n    public Long getValue() {\n        return value;\n    }\n\n    public void setValue(Long value) {\n        this.value = value;\n    }\n}\n</code></pre>\n\n<h2>CustomObjectSerializer.java</h2>\n\n\n\n<pre><code>public class CustomObjectSerializer extends JsonSerializer&lt;CustomObject&gt; {\n\n    @Override\n    public void serialize(CustomObject value, JsonGenerator jgen,\n        SerializerProvider provider) throws IOException,JsonProcessingException {\n        jgen.writeStartObject();\n        jgen.writeNumberField(\"y\", value.getValue());\n        jgen.writeEndObject();\n    }\n\n    @Override\n    public Class&lt;CustomObject&gt; handledType() {\n        return CustomObject.class;\n    }\n}\n</code></pre>\n\n<p>No XML configuration (<code>&lt;mvc:message-converters&gt;(...)&lt;/mvc:message-converters&gt;</code>) is needed in my solution.</p>\n"},{"tags":[],"owner":{"account_id":1116458,"reputation":1088,"user_id":1105677,"accept_rate":0,"display_name":"Carlos AG"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1395141870,"creation_date":1395141870,"answer_id":22477901,"question_id":7854030,"body_markdown":"I am using Spring 3.2.4 and Jackson FasterXML 2.1.1.\r\n\r\nI have created a **custom JacksonObjectMapper** that works with explicit annotations for each attribute of the Objects mapped:\r\n\r\n\r\n    package com.test;\r\n    import com.fasterxml.jackson.annotation.JsonAutoDetect;\r\n    import com.fasterxml.jackson.annotation.PropertyAccessor;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import com.fasterxml.jackson.databind.SerializationFeature;\r\n    \r\n    public class MyJaxbJacksonObjectMapper extends ObjectMapper {\r\n    \r\n    public MyJaxbJacksonObjectMapper() {\r\n\r\n        this.setVisibility(PropertyAccessor.FIELD, JsonAutoDetect.Visibility.ANY)\r\n\t\t\t\t.setVisibility(PropertyAccessor.CREATOR, JsonAutoDetect.Visibility.ANY)\r\n\t\t\t\t.setVisibility(PropertyAccessor.SETTER, JsonAutoDetect.Visibility.NONE)\r\n\t\t\t\t.setVisibility(PropertyAccessor.GETTER, JsonAutoDetect.Visibility.NONE)\r\n\t\t\t\t.setVisibility(PropertyAccessor.IS_GETTER, JsonAutoDetect.Visibility.NONE);\r\n\r\n        this.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);\r\n        }\r\n    }\r\n\r\n\r\nThen this is instantiated in the context-configuration (**servlet-context.xml**):\r\n\r\n    &lt;mvc:annotation-driven&gt;\r\n        &lt;mvc:message-converters&gt;\r\n    \r\n            &lt;beans:bean class=&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;&gt;\r\n                &lt;beans:property name=&quot;objectMapper&quot;&gt;\r\n                    &lt;beans:bean class=&quot;com.test.MyJaxbJacksonObjectMapper&quot; /&gt;\r\n                &lt;/beans:property&gt;\r\n            &lt;/beans:bean&gt;\r\n\r\n        &lt;/mvc:message-converters&gt;\r\n    &lt;/mvc:annotation-driven&gt;\r\n\r\n\r\nThis works fine!\r\n","title":"Configuring ObjectMapper in Spring","body":"<p>I am using Spring 3.2.4 and Jackson FasterXML 2.1.1.</p>\n\n<p>I have created a <strong>custom JacksonObjectMapper</strong> that works with explicit annotations for each attribute of the Objects mapped:</p>\n\n<pre><code>package com.test;\nimport com.fasterxml.jackson.annotation.JsonAutoDetect;\nimport com.fasterxml.jackson.annotation.PropertyAccessor;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.SerializationFeature;\n\npublic class MyJaxbJacksonObjectMapper extends ObjectMapper {\n\npublic MyJaxbJacksonObjectMapper() {\n\n    this.setVisibility(PropertyAccessor.FIELD, JsonAutoDetect.Visibility.ANY)\n            .setVisibility(PropertyAccessor.CREATOR, JsonAutoDetect.Visibility.ANY)\n            .setVisibility(PropertyAccessor.SETTER, JsonAutoDetect.Visibility.NONE)\n            .setVisibility(PropertyAccessor.GETTER, JsonAutoDetect.Visibility.NONE)\n            .setVisibility(PropertyAccessor.IS_GETTER, JsonAutoDetect.Visibility.NONE);\n\n    this.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);\n    }\n}\n</code></pre>\n\n<p>Then this is instantiated in the context-configuration (<strong>servlet-context.xml</strong>):</p>\n\n<pre><code>&lt;mvc:annotation-driven&gt;\n    &lt;mvc:message-converters&gt;\n\n        &lt;beans:bean class=\"org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\"&gt;\n            &lt;beans:property name=\"objectMapper\"&gt;\n                &lt;beans:bean class=\"com.test.MyJaxbJacksonObjectMapper\" /&gt;\n            &lt;/beans:property&gt;\n        &lt;/beans:bean&gt;\n\n    &lt;/mvc:message-converters&gt;\n&lt;/mvc:annotation-driven&gt;\n</code></pre>\n\n<p>This works fine!</p>\n"},{"tags":[],"owner":{"account_id":5765593,"reputation":1664,"user_id":4550654,"display_name":"Alex"},"down_vote_count":1,"up_vote_count":161,"is_accepted":true,"score":160,"last_activity_date":1443526763,"creation_date":1443526763,"answer_id":32842962,"question_id":7854030,"body_markdown":"Using Spring Boot (1.2.4) and Jackson (2.4.6) the following annotation based configuration worked for me.\r\n\r\n    @Configuration\r\n    public class JacksonConfiguration {\r\n\r\n        @Bean\r\n        public ObjectMapper objectMapper() {\r\n            ObjectMapper mapper = new ObjectMapper();\r\n            mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\n            mapper.configure(MapperFeature.DEFAULT_VIEW_INCLUSION, true);\r\n\r\n            return mapper;\r\n        }\r\n    }","title":"Configuring ObjectMapper in Spring","body":"<p>Using Spring Boot (1.2.4) and Jackson (2.4.6) the following annotation based configuration worked for me.</p>\n\n<pre><code>@Configuration\npublic class JacksonConfiguration {\n\n    @Bean\n    public ObjectMapper objectMapper() {\n        ObjectMapper mapper = new ObjectMapper();\n        mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n        mapper.configure(MapperFeature.DEFAULT_VIEW_INCLUSION, true);\n\n        return mapper;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7693974,"reputation":141,"user_id":5829185,"display_name":"jecyhw"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1463048588,"creation_date":1463048588,"answer_id":37184105,"question_id":7854030,"body_markdown":"I am using Spring 4.1.6 and Jackson FasterXML 2.1.4.\r\n\r\n        &lt;mvc:annotation-driven&gt;\r\n            &lt;mvc:message-converters&gt;\r\n                &lt;bean class=&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;&gt;\r\n                    &lt;property name=&quot;objectMapper&quot;&gt;\r\n                        &lt;bean class=&quot;com.fasterxml.jackson.databind.ObjectMapper&quot;&gt;\r\n                            &lt;!-- 设置不输出null字段--&gt;\r\n                            &lt;property name=&quot;serializationInclusion&quot; value=&quot;NON_NULL&quot;/&gt;\r\n                        &lt;/bean&gt;\r\n                    &lt;/property&gt;\r\n                &lt;/bean&gt;\r\n            &lt;/mvc:message-converters&gt;\r\n        &lt;/mvc:annotation-driven&gt;\r\n\r\nthis works at my applicationContext.xml configration","title":"Configuring ObjectMapper in Spring","body":"<p>I am using Spring 4.1.6 and Jackson FasterXML 2.1.4.</p>\n\n<pre><code>    &lt;mvc:annotation-driven&gt;\n        &lt;mvc:message-converters&gt;\n            &lt;bean class=\"org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\"&gt;\n                &lt;property name=\"objectMapper\"&gt;\n                    &lt;bean class=\"com.fasterxml.jackson.databind.ObjectMapper\"&gt;\n                        &lt;!-- 设置不输出null字段--&gt;\n                        &lt;property name=\"serializationInclusion\" value=\"NON_NULL\"/&gt;\n                    &lt;/bean&gt;\n                &lt;/property&gt;\n            &lt;/bean&gt;\n        &lt;/mvc:message-converters&gt;\n    &lt;/mvc:annotation-driven&gt;\n</code></pre>\n\n<p>this works at my applicationContext.xml configration</p>\n"},{"tags":[],"owner":{"account_id":57788,"reputation":46110,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1491315997,"creation_date":1489390390,"answer_id":42758436,"question_id":7854030,"body_markdown":"There is `org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean` for a long time. Starting from 1.2 release of Spring Boot there is `org.springframework.http.converter.json.Jackson2ObjectMapperBuilder` for Java Config.\r\n\r\nIn String Boot configuration can be as simple as:\r\n\r\n    spring.jackson.deserialization.&lt;feature_name&gt;=true|false\r\n    spring.jackson.generator.&lt;feature_name&gt;=true|false\r\n    spring.jackson.mapper.&lt;feature_name&gt;=true|false\r\n    spring.jackson.parser.&lt;feature_name&gt;=true|false\r\n    spring.jackson.serialization.&lt;feature_name&gt;=true|false\r\n    spring.jackson.default-property-inclusion=always|non_null|non_absent|non_default|non_empty\r\n\r\nin `classpath:application.properties` or some Java code in `@Configuration` class:\r\n\r\n    @Bean\r\n    public Jackson2ObjectMapperBuilder jacksonBuilder() {\r\n        Jackson2ObjectMapperBuilder builder = new Jackson2ObjectMapperBuilder();\r\n        builder.indentOutput(true).dateFormat(new SimpleDateFormat(&quot;yyyy-MM-dd&quot;));\r\n        return builder;\r\n    }\r\n\r\nSee:\r\n\r\n* Official docs [74.3 Customize the Jackson ObjectMapper](http://docs.spring.io/spring-boot/docs/current/reference/html/howto-spring-mvc.html#howto-customize-the-jackson-objectmapper)\r\n* https://dzone.com/articles/latest-jackson-integration\r\n* https://stackoverflow.com/questions/14343477/how-do-you-globally-set-jackson-to-ignore-unknown-properties-within-spring\r\n* http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperFactoryBean.html\r\n","title":"Configuring ObjectMapper in Spring","body":"<p>There is <code>org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean</code> for a long time. Starting from 1.2 release of Spring Boot there is <code>org.springframework.http.converter.json.Jackson2ObjectMapperBuilder</code> for Java Config.</p>\n\n<p>In String Boot configuration can be as simple as:</p>\n\n<pre><code>spring.jackson.deserialization.&lt;feature_name&gt;=true|false\nspring.jackson.generator.&lt;feature_name&gt;=true|false\nspring.jackson.mapper.&lt;feature_name&gt;=true|false\nspring.jackson.parser.&lt;feature_name&gt;=true|false\nspring.jackson.serialization.&lt;feature_name&gt;=true|false\nspring.jackson.default-property-inclusion=always|non_null|non_absent|non_default|non_empty\n</code></pre>\n\n<p>in <code>classpath:application.properties</code> or some Java code in <code>@Configuration</code> class:</p>\n\n<pre><code>@Bean\npublic Jackson2ObjectMapperBuilder jacksonBuilder() {\n    Jackson2ObjectMapperBuilder builder = new Jackson2ObjectMapperBuilder();\n    builder.indentOutput(true).dateFormat(new SimpleDateFormat(\"yyyy-MM-dd\"));\n    return builder;\n}\n</code></pre>\n\n<p>See:</p>\n\n<ul>\n<li>Official docs <a href=\"http://docs.spring.io/spring-boot/docs/current/reference/html/howto-spring-mvc.html#howto-customize-the-jackson-objectmapper\" rel=\"noreferrer\">74.3 Customize the Jackson ObjectMapper</a></li>\n<li><a href=\"https://dzone.com/articles/latest-jackson-integration\" rel=\"noreferrer\">https://dzone.com/articles/latest-jackson-integration</a></li>\n<li><a href=\"https://stackoverflow.com/questions/14343477/how-do-you-globally-set-jackson-to-ignore-unknown-properties-within-spring\">How do you globally set Jackson to ignore unknown properties within Spring?</a></li>\n<li><a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperFactoryBean.html\" rel=\"noreferrer\">http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperFactoryBean.html</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1677099,"reputation":10905,"user_id":1542363,"accept_rate":92,"display_name":"Sam YC"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1508395270,"creation_date":1508395270,"answer_id":46824039,"question_id":7854030,"body_markdown":"Above Spring 4, there is no need to configure `MappingJacksonHttpMessageConverter` if you only intend to configure `ObjectMapper`.\r\n\r\n(configure `MappingJacksonHttpMessageConverter` will cause you to lose other MessageConverter)\r\n\r\nYou just need to do:\r\n\r\n    public class MyObjectMapper extends ObjectMapper {\r\n    \r\n    \tprivate static final long serialVersionUID = 4219938065516862637L;\r\n    \r\n    \tpublic MyObjectMapper() {\r\n    \t\tsuper();\r\n    \t\tenable(SerializationFeature.INDENT_OUTPUT);\r\n    \t}\t\t\r\n    }\r\n\r\nAnd in your Spring configuration, create this bean:\r\n\r\n    @Bean \r\n    public MyObjectMapper myObjectMapper() {    \t\r\n        return new MyObjectMapper();\r\n    }","title":"Configuring ObjectMapper in Spring","body":"<p>Above Spring 4, there is no need to configure <code>MappingJacksonHttpMessageConverter</code> if you only intend to configure <code>ObjectMapper</code>.</p>\n\n<p>(configure <code>MappingJacksonHttpMessageConverter</code> will cause you to lose other MessageConverter)</p>\n\n<p>You just need to do:</p>\n\n<pre><code>public class MyObjectMapper extends ObjectMapper {\n\n    private static final long serialVersionUID = 4219938065516862637L;\n\n    public MyObjectMapper() {\n        super();\n        enable(SerializationFeature.INDENT_OUTPUT);\n    }       \n}\n</code></pre>\n\n<p>And in your Spring configuration, create this bean:</p>\n\n<pre><code>@Bean \npublic MyObjectMapper myObjectMapper() {        \n    return new MyObjectMapper();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":474122,"reputation":1627,"user_id":883603,"accept_rate":75,"display_name":"Dormouse"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1521654118,"creation_date":1521629837,"answer_id":49404496,"question_id":7854030,"body_markdown":"To configure a message converter in plain spring-web, in this case to enable the Java 8 JSR-310 JavaTimeModule, you first need to implement `WebMvcConfigurer` in your `@Configuration` class and then override the `configureMessageConverters` method:\r\n\r\n    @Override\r\n    public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\r\n        ObjectMapper objectMapper = Jackson2ObjectMapperBuilder.json().modules(new JavaTimeModule(), new Jdk8Module()).build()\r\n                .configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);\r\n        converters.add(new MappingJackson2HttpMessageConverter(objectMapper));\r\n    }\r\nLike this you can register any custom defined `ObjectMapper` in a Java-based Spring configuration.","title":"Configuring ObjectMapper in Spring","body":"<p>To configure a message converter in plain spring-web, in this case to enable the Java 8 JSR-310 JavaTimeModule, you first need to implement <code>WebMvcConfigurer</code> in your <code>@Configuration</code> class and then override the <code>configureMessageConverters</code> method:</p>\n\n<pre><code>@Override\npublic void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\n    ObjectMapper objectMapper = Jackson2ObjectMapperBuilder.json().modules(new JavaTimeModule(), new Jdk8Module()).build()\n            .configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);\n    converters.add(new MappingJackson2HttpMessageConverter(objectMapper));\n}\n</code></pre>\n\n<p>Like this you can register any custom defined <code>ObjectMapper</code> in a Java-based Spring configuration.</p>\n"},{"tags":[],"owner":{"account_id":5954045,"reputation":3379,"user_id":4681265,"display_name":"Adrian"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1640179750,"creation_date":1556824761,"answer_id":55958912,"question_id":7854030,"body_markdown":"**SOLUTION 1**  \r\n\r\nFirst (tested) working solution useful especially when using `@EnableWebMvc`:  \r\n\r\n    @Configuration\r\n    @EnableWebMvc\r\n    public class WebConfig implements WebMvcConfigurer {\r\n    \t@Autowired\r\n    \tprivate ObjectMapper objectMapper;// created elsewhere\r\n    \t@Override\r\n    \tpublic void extendMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\r\n    \t\t// this won&#39;t add a 2nd MappingJackson2HttpMessageConverter \r\n    \t\t// as the SOLUTION 2 is doing but also might seem complicated\r\n    \t\tconverters.stream().filter(c -&gt; c instanceof MappingJackson2HttpMessageConverter).forEach(c -&gt; {\r\n    \t\t\t// check default included objectMapper._registeredModuleTypes,\r\n    \t\t\t// e.g. Jdk8Module, JavaTimeModule when creating the ObjectMapper\r\n    \t\t\t// without Jackson2ObjectMapperBuilder\r\n    \t\t\t((MappingJackson2HttpMessageConverter) c).setObjectMapper(this.objectMapper);\r\n    \t\t});\r\n    \t}\r\n\r\n**SOLUTION 2**  \r\n\r\nOf course the common approach below works too (also working with `@EnableWebMvc`):\r\n\r\n    @Configuration\r\n    @EnableWebMvc\r\n    public class WebConfig implements WebMvcConfigurer {\r\n    \t@Autowired\r\n    \tprivate ObjectMapper objectMapper;// created elsewhere\r\n        @Override\r\n        public void extendMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\r\n        \t// this will add a 2nd MappingJackson2HttpMessageConverter \r\n        \t// (additional to the default one) but will work and you \r\n        \t// won&#39;t lose the default converters as you&#39;ll do when overwriting\r\n         \t// configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)\r\n            // \r\n            // you still have to check default included\r\n            // objectMapper._registeredModuleTypes, e.g.\r\n            // Jdk8Module, JavaTimeModule when creating the ObjectMapper\r\n            // without Jackson2ObjectMapperBuilder\r\n        \tconverters.add(new MappingJackson2HttpMessageConverter(this.objectMapper));\r\n        }\r\n\r\n*Why @EnableWebMvc usage is a problem?*\r\n\r\n`@EnableWebMvc` is using `DelegatingWebMvcConfiguration` which extends `WebMvcConfigurationSupport` which does this:  \r\n\r\n\tif (jackson2Present) {\r\n\t\tJackson2ObjectMapperBuilder builder = Jackson2ObjectMapperBuilder.json();\r\n\t\tif (this.applicationContext != null) {\r\n\t\t\tbuilder.applicationContext(this.applicationContext);\r\n\t\t}\r\n\t\tmessageConverters.add(new MappingJackson2HttpMessageConverter(builder.build()));\r\n\t}\r\nwhich means that there&#39;s no way of injecting your own `ObjectMapper` with the purpose of preparing it to be used for creating the default `MappingJackson2HttpMessageConverter` when using `@EnableWebMvc`.\r\n\r\n","title":"Configuring ObjectMapper in Spring","body":"<p><strong>SOLUTION 1</strong></p>\n<p>First (tested) working solution useful especially when using <code>@EnableWebMvc</code>:</p>\n<pre><code>@Configuration\n@EnableWebMvc\npublic class WebConfig implements WebMvcConfigurer {\n    @Autowired\n    private ObjectMapper objectMapper;// created elsewhere\n    @Override\n    public void extendMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\n        // this won't add a 2nd MappingJackson2HttpMessageConverter \n        // as the SOLUTION 2 is doing but also might seem complicated\n        converters.stream().filter(c -&gt; c instanceof MappingJackson2HttpMessageConverter).forEach(c -&gt; {\n            // check default included objectMapper._registeredModuleTypes,\n            // e.g. Jdk8Module, JavaTimeModule when creating the ObjectMapper\n            // without Jackson2ObjectMapperBuilder\n            ((MappingJackson2HttpMessageConverter) c).setObjectMapper(this.objectMapper);\n        });\n    }\n</code></pre>\n<p><strong>SOLUTION 2</strong></p>\n<p>Of course the common approach below works too (also working with <code>@EnableWebMvc</code>):</p>\n<pre><code>@Configuration\n@EnableWebMvc\npublic class WebConfig implements WebMvcConfigurer {\n    @Autowired\n    private ObjectMapper objectMapper;// created elsewhere\n    @Override\n    public void extendMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\n        // this will add a 2nd MappingJackson2HttpMessageConverter \n        // (additional to the default one) but will work and you \n        // won't lose the default converters as you'll do when overwriting\n        // configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)\n        // \n        // you still have to check default included\n        // objectMapper._registeredModuleTypes, e.g.\n        // Jdk8Module, JavaTimeModule when creating the ObjectMapper\n        // without Jackson2ObjectMapperBuilder\n        converters.add(new MappingJackson2HttpMessageConverter(this.objectMapper));\n    }\n</code></pre>\n<p><em>Why @EnableWebMvc usage is a problem?</em></p>\n<p><code>@EnableWebMvc</code> is using <code>DelegatingWebMvcConfiguration</code> which extends <code>WebMvcConfigurationSupport</code> which does this:</p>\n<pre><code>if (jackson2Present) {\n    Jackson2ObjectMapperBuilder builder = Jackson2ObjectMapperBuilder.json();\n    if (this.applicationContext != null) {\n        builder.applicationContext(this.applicationContext);\n    }\n    messageConverters.add(new MappingJackson2HttpMessageConverter(builder.build()));\n}\n</code></pre>\n<p>which means that there's no way of injecting your own <code>ObjectMapper</code> with the purpose of preparing it to be used for creating the default <code>MappingJackson2HttpMessageConverter</code> when using <code>@EnableWebMvc</code>.</p>\n"},{"tags":[],"owner":{"account_id":1380055,"reputation":17338,"user_id":1313268,"accept_rate":88,"display_name":"CorayThan"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1585305592,"creation_date":1585305592,"answer_id":60884340,"question_id":7854030,"body_markdown":"In Spring Boot `2.2.x` you need to configure it like this:\r\n\r\n    @Bean\r\n    public ObjectMapper objectMapper(Jackson2ObjectMapperBuilder builder) {\r\n        return builder.build()\r\n    }\r\n\r\nKotlin: \r\n\r\n    @Bean\r\n    fun objectMapper(builder: Jackson2ObjectMapperBuilder) = builder.build()","title":"Configuring ObjectMapper in Spring","body":"<p>In Spring Boot <code>2.2.x</code> you need to configure it like this:</p>\n\n<pre><code>@Bean\npublic ObjectMapper objectMapper(Jackson2ObjectMapperBuilder builder) {\n    return builder.build()\n}\n</code></pre>\n\n<p>Kotlin: </p>\n\n<pre><code>@Bean\nfun objectMapper(builder: Jackson2ObjectMapperBuilder) = builder.build()\n</code></pre>\n"}],"owner":{"account_id":429950,"reputation":1793,"user_id":813118,"accept_rate":82,"display_name":"Steve Eastwood"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":340905,"favorite_count":0,"down_vote_count":0,"up_vote_count":114,"accepted_answer_id":32842962,"answer_count":12,"score":114,"last_activity_date":1671255358,"creation_date":1319223562,"question_id":7854030,"body_markdown":"My goal is to configure the `objectMapper` in the way that it only serialises element which are annotated with `@JsonProperty`.\r\n\r\nIn order to do so I followed this [explanation][1] which says how to configurate the objectmapper.\r\n\r\nI included the custom objectmapper as described [here][2].\r\n\r\nHowever, when the class `NumbersOfNewEvents` is serialized it still contains all attributes in the json.\r\n\r\nWhy is this happening, and how can I get the desired result?\r\n\r\nJackson 1.8.0\r\nspring 3.0.5\r\n\r\n**CustomObjectMapper**\r\n\r\n    public class CompanyObjectMapper extends ObjectMapper {\r\n    \tpublic CompanyObjectMapper() {\r\n    \t\tsuper();\r\n    \t\tsetVisibilityChecker(getSerializationConfig()\r\n    \t\t\t\t.getDefaultVisibilityChecker()\r\n    \t\t\t\t.withCreatorVisibility(JsonAutoDetect.Visibility.NONE)\r\n    \t\t\t\t.withFieldVisibility(JsonAutoDetect.Visibility.NONE)\r\n    \t\t\t\t.withGetterVisibility(JsonAutoDetect.Visibility.NONE)\r\n    \t\t\t\t.withIsGetterVisibility(JsonAutoDetect.Visibility.NONE)\r\n    \t\t\t\t.withSetterVisibility(JsonAutoDetect.Visibility.DEFAULT));\r\n    \t}\r\n    }\r\n\r\n\r\n**servlet.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    \txmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\r\n    \txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\r\n    \t\thttp://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd\r\n    \t\thttp://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd&quot;&gt;\r\n    \r\n    \t&lt;context:component-scan base-package=&quot;de.Company.backend.web&quot; /&gt;\r\n     \r\n    \t&lt;mvc:annotation-driven /&gt;\r\n    \t\r\n    \t&lt;bean\r\n    \t\tclass=&quot;org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter&quot;&gt;\r\n    \t\t&lt;property name=&quot;messageConverters&quot;&gt;\r\n    \t\t\t&lt;list&gt;\r\n    \t\t\t\t&lt;bean class=&quot;org.springframework.http.converter.json.MappingJacksonHttpMessageConverter&quot;&gt;\r\n    \t\t\t\t\t&lt;property name=&quot;objectMapper&quot; ref=&quot;jacksonObjectMapper&quot; /&gt;\r\n    \t\t\t\t&lt;/bean&gt;\r\n    \t\t\t&lt;/list&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t&lt;/bean&gt;\r\n    \t\r\n    \t&lt;bean id=&quot;jacksonObjectMapper&quot; class=&quot;de.Company.backend.web.CompanyObjectMapper&quot; /&gt;\r\n    &lt;/beans&gt;\r\n\r\n**NumbersOfNewEvents**\r\n\r\n    public class NumbersOfNewEvents implements StatusAttribute {\r\n    \r\n    \tpublic Integer newAccepts;\r\n    \tpublic Integer openRequests;\r\n    \t\r\n    \tpublic NumbersOfNewEvents() {\r\n    \t\tsuper();\r\n    \t}\r\n    }\r\n\r\n  [1]: http://wiki.fasterxml.com/JacksonFeatureAutoDetect &quot;explanation&quot;\r\n  [2]: https://stackoverflow.com/questions/3591291/spring-jackson-and-customization-e-g-customdeserializer\r\n","title":"Configuring ObjectMapper in Spring","body":"<p>My goal is to configure the <code>objectMapper</code> in the way that it only serialises element which are annotated with <code>@JsonProperty</code>.</p>\n<p>In order to do so I followed this <a href=\"http://wiki.fasterxml.com/JacksonFeatureAutoDetect\" rel=\"noreferrer\" title=\"explanation\">explanation</a> which says how to configurate the objectmapper.</p>\n<p>I included the custom objectmapper as described <a href=\"https://stackoverflow.com/questions/3591291/spring-jackson-and-customization-e-g-customdeserializer\">here</a>.</p>\n<p>However, when the class <code>NumbersOfNewEvents</code> is serialized it still contains all attributes in the json.</p>\n<p>Why is this happening, and how can I get the desired result?</p>\n<p>Jackson 1.8.0\nspring 3.0.5</p>\n<p><strong>CustomObjectMapper</strong></p>\n<pre><code>public class CompanyObjectMapper extends ObjectMapper {\n    public CompanyObjectMapper() {\n        super();\n        setVisibilityChecker(getSerializationConfig()\n                .getDefaultVisibilityChecker()\n                .withCreatorVisibility(JsonAutoDetect.Visibility.NONE)\n                .withFieldVisibility(JsonAutoDetect.Visibility.NONE)\n                .withGetterVisibility(JsonAutoDetect.Visibility.NONE)\n                .withIsGetterVisibility(JsonAutoDetect.Visibility.NONE)\n                .withSetterVisibility(JsonAutoDetect.Visibility.DEFAULT));\n    }\n}\n</code></pre>\n<p><strong>servlet.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n    xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd\n        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd&quot;&gt;\n\n    &lt;context:component-scan base-package=&quot;de.Company.backend.web&quot; /&gt;\n \n    &lt;mvc:annotation-driven /&gt;\n    \n    &lt;bean\n        class=&quot;org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter&quot;&gt;\n        &lt;property name=&quot;messageConverters&quot;&gt;\n            &lt;list&gt;\n                &lt;bean class=&quot;org.springframework.http.converter.json.MappingJacksonHttpMessageConverter&quot;&gt;\n                    &lt;property name=&quot;objectMapper&quot; ref=&quot;jacksonObjectMapper&quot; /&gt;\n                &lt;/bean&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n    \n    &lt;bean id=&quot;jacksonObjectMapper&quot; class=&quot;de.Company.backend.web.CompanyObjectMapper&quot; /&gt;\n&lt;/beans&gt;\n</code></pre>\n<p><strong>NumbersOfNewEvents</strong></p>\n<pre><code>public class NumbersOfNewEvents implements StatusAttribute {\n\n    public Integer newAccepts;\n    public Integer openRequests;\n    \n    public NumbersOfNewEvents() {\n        super();\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","spring-security","spring-webflux"],"comments":[{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1671003248,"post_id":74793387,"comment_id":132000698,"body_markdown":"Access denied is not a 500 and why would you want a 301 MOVED PERMANENTLY?","body":"Access denied is not a 500 and why would you want a 301 MOVED PERMANENTLY?"},{"owner":{"account_id":12652413,"reputation":57,"user_id":9196033,"display_name":"Ant Oleyhoo"},"score":0,"creation_date":1671029401,"post_id":74793387,"comment_id":132009456,"body_markdown":"@Toerktumlare right - access denied should not cause a 500, it should case a 403. Sorry about accidentally saying 301 I got my status code mixed up :)","body":"@Toerktumlare right - access denied should not cause a 500, it should case a 403. Sorry about accidentally saying 301 I got my status code mixed up :)"}],"answers":[{"tags":[],"owner":{"account_id":12652413,"reputation":57,"user_id":9196033,"display_name":"Ant Oleyhoo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671255040,"creation_date":1671255040,"answer_id":74831997,"question_id":74793387,"body_markdown":"This is now a known bug; please check for updates here: https://github.com/spring-projects/spring-security/issues/12374","title":"Spring Reactive Security: adding `SecurityWebFilterChain` causes 500 error for AccessDeniedException","body":"<p>This is now a known bug; please check for updates here: <a href=\"https://github.com/spring-projects/spring-security/issues/12374\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-security/issues/12374</a></p>\n"}],"owner":{"account_id":12652413,"reputation":57,"user_id":9196033,"display_name":"Ant Oleyhoo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":742,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74831997,"answer_count":1,"score":0,"last_activity_date":1671255040,"creation_date":1670989939,"question_id":74793387,"body_markdown":"Note that I am using Spring security 5.7.4.\r\n\r\nI have a `RestController`:\r\n```java\r\n@RestController\r\npublic class StandardController {\r\n    @PreAuthorize(&quot;hasRole(&#39;ADMIN&#39;)&quot;)\r\n    @GetMapping(&quot;/hello&quot;)\r\n    public Mono&lt;Map&lt;String, String&gt;&gt; hello() {\r\n        final Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\r\n        map.put(&quot;hi&quot;, &quot;hi&quot;);\r\n        return Mono.just(map);\r\n    }\r\n\r\n}\r\n```\r\n\r\nand a `Security Config`:\r\n\r\n```java\r\n@Configuration\r\n@EnableWebFluxSecurity\r\n@EnableReactiveMethodSecurity\r\npublic class SecurityConfig {\r\n    @Bean\r\n    public MapReactiveUserDetailsService userDetailsService() {\r\n        User.UserBuilder userBuilder = User.withDefaultPasswordEncoder();\r\n        UserDetails rob = userBuilder.username(&quot;rob&quot;)\r\n                .password(&quot;rob&quot;)\r\n                .roles(&quot;USER&quot;)\r\n                .build();\r\n        UserDetails admin = userBuilder.username(&quot;admin&quot;)\r\n                .password(&quot;admin&quot;)\r\n                .roles(&quot;USER&quot;,&quot;ADMIN&quot;)\r\n                .build();\r\n        return new MapReactiveUserDetailsService(rob, admin);\r\n    }\r\n}\r\n```\r\n\r\nEverything works fine until I try to disable `CSRF` by adding `SecurityWebFilterChain` to my security config. \r\n\r\n```java\r\npublic class SecurityConfig {\r\n    @Bean\r\n    public SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {\r\n       return http\r\n                .httpBasic()\r\n                .and()\r\n                .csrf()\r\n                .disable()\r\n                .build();\r\n    }\r\n\r\n\r\n /// ... user details service\r\n}\r\n```\r\n\r\nNow, when I try to hit any endpoint UNAUTHENTICATED (including ones unaffected by CSRF like the `hello` GET route) I get the following stack trace:\r\n\r\n```\r\n2022-12-13T21:50:04.846-06:00 DEBUG 70978 --- [ctor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1b6ff9fc-2] HTTP GET &quot;/hello&quot;\r\n2022-12-13T21:50:04.851-06:00 DEBUG 70978 --- [     parallel-2] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.\r\n2022-12-13T21:50:04.852-06:00 DEBUG 70978 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern=&#39;/logout&#39;, method=POST}\r\n2022-12-13T21:50:04.852-06:00 DEBUG 70978 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request &#39;GET /hello&#39; doesn&#39;t match &#39;POST /logout&#39;\r\n2022-12-13T21:50:04.852-06:00 DEBUG 70978 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found\r\n2022-12-13T21:50:04.853-06:00 DEBUG 70978 --- [     parallel-2] s.w.r.r.m.a.RequestMappingHandlerMapping : [1b6ff9fc-2] Mapped to com.example.demo.StandardController#hello()\r\n2022-12-13T21:50:04.856-06:00 DEBUG 70978 --- [     parallel-2] o.s.w.r.r.m.a.ResponseBodyResultHandler  : [1b6ff9fc-2] Using &#39;application/json&#39; given [*/*] and supported [application/json, application/*+json, application/x-ndjson, text/event-stream]\r\n2022-12-13T21:50:04.856-06:00 DEBUG 70978 --- [     parallel-2] o.s.w.r.r.m.a.ResponseBodyResultHandler  : [1b6ff9fc-2] 0..1 [java.util.Map&lt;java.lang.String, java.lang.String&gt;]\r\n2022-12-13T21:50:04.856-06:00 DEBUG 70978 --- [     parallel-2] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: &#39;org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@4f4ffd93&#39;\r\n2022-12-13T21:50:04.858-06:00 DEBUG 70978 --- [     parallel-2] a.w.r.e.AbstractErrorWebExceptionHandler : [1b6ff9fc-2] Resolved [AccessDeniedException: Access Denied] for HTTP GET /hello\r\n2022-12-13T21:50:04.859-06:00 ERROR 70978 --- [     parallel-2] a.w.r.e.AbstractErrorWebExceptionHandler : [1b6ff9fc-2]  500 Server Error for HTTP GET &quot;/hello&quot;\r\n\r\norg.springframework.security.access.AccessDeniedException: Access Denied\r\n\tat org.springframework.security.authorization.ReactiveAuthorizationManager.lambda$verify$0(ReactiveAuthorizationManager.java:53) ~[spring-security-core-6.0.0.jar:6.0.0]\r\n\tSuppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \r\nError has been observed at the following site(s):\r\n\t*__checkpoint ⇢ Handler com.example.demo.StandardController#hello() [DispatcherHandler]\r\n\t*__checkpoint ⇢ org.springframework.security.web.server.authentication.logout.LogoutWebFilter [DefaultWebFilterChain]\r\n\t*__checkpoint ⇢ org.springframework.security.web.server.savedrequest.ServerRequestCacheWebFilter [DefaultWebFilterChain]\r\n\t*__checkpoint ⇢ org.springframework.security.web.server.context.SecurityContextServerWebExchangeWebFilter [DefaultWebFilterChain]\r\n\t*__checkpoint ⇢ org.springframework.security.web.server.context.ReactorContextWebFilter [DefaultWebFilterChain]\r\n\t*__checkpoint ⇢ org.springframework.security.web.server.header.HttpHeaderWriterWebFilter [DefaultWebFilterChain]\r\n\t*__checkpoint ⇢ org.springframework.security.config.web.server.ServerHttpSecurity$ServerWebExchangeReactorContextWebFilter [DefaultWebFilterChain]\r\n\t*__checkpoint ⇢ org.springframework.security.web.server.WebFilterChainProxy [DefaultWebFilterChain]\r\n\t*__checkpoint ⇢ HTTP GET &quot;/hello&quot; [ExceptionHandlingWebHandler]\r\nOriginal Stack Trace:\r\n\t\tat org.springframework.security.authorization.ReactiveAuthorizationManager.lambda$verify$0(ReactiveAuthorizationManager.java:53) ~[spring-security-core-6.0.0.jar:6.0.0]\r\n\t\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:44) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:82) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFilterFuseable$FilterFuseableSubscriber.onComplete(FluxFilterFuseable.java:171) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onComplete(FluxMapFuseable.java:350) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.secondComplete(MonoFlatMap.java:246) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:305) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2508) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapInner.onSubscribe(MonoFlatMap.java:291) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2034) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onComplete(FluxDefaultIfEmpty.java:134) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onComplete(FluxMapFuseable.java:152) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.secondComplete(MonoFlatMap.java:250) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapInner.onComplete(MonoFlatMap.java:324) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:155) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1802) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoCacheTime.subscribeOrReturn(MonoCacheTime.java:151) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:57) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFilter$FilterSubscriber.onNext(FluxFilter.java:113) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMap$MapConditionalSubscriber.onNext(FluxMap.java:224) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2508) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMap$MapConditionalSubscriber.request(FluxMap.java:295) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFilter$FilterSubscriber.request(FluxFilter.java:186) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.request(FluxDefaultIfEmpty.java:98) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMap$MapSubscriber.request(FluxMap.java:164) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.request(FluxMapFuseable.java:360) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFilterFuseable$FilterFuseableSubscriber.request(FluxFilterFuseable.java:191) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2304) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2178) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFilterFuseable$FilterFuseableSubscriber.onSubscribe(FluxFilterFuseable.java:87) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onSubscribe(FluxMapFuseable.java:265) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMap$MapSubscriber.onSubscribe(FluxMap.java:92) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$BaseFluxToMonoOperator.onSubscribe(Operators.java:1988) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFilter$FilterSubscriber.onSubscribe(FluxFilter.java:85) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMap$MapConditionalSubscriber.onSubscribe(FluxMap.java:194) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoDeferContextual.subscribe(MonoDeferContextual.java:55) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFromMonoOperator.subscribe(FluxFromMonoOperator.java:83) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxDeferContextual.subscribe(FluxDeferContextual.java:57) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.complete(MonoIgnoreThen.java:292) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onNext(MonoIgnoreThen.java:187) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2508) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onSubscribe(MonoIgnoreThen.java:134) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFlatMap.trySubscribeScalarMap(FluxFlatMap.java:192) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap.subscribeOrReturn(MonoFlatMap.java:53) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:57) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:240) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onComplete(MonoIgnoreThen.java:203) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onComplete(MonoFlatMap.java:189) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators.complete(Operators.java:137) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoZip.subscribe(MonoZip.java:121) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerNext(FluxConcatMapNoPrefetch.java:258) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxConcatMap$ConcatMapInner.onNext(FluxConcatMap.java:863) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2508) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.request(MonoPeekTerminal.java:139) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2268) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:338) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2304) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2178) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoNext$NextSubscriber.onSubscribe(MonoNext.java:70) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onSubscribe(FluxConcatMapNoPrefetch.java:164) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:87) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:82) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFilter$FilterSubscriber.onComplete(FluxFilter.java:166) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onComplete(FluxPeekFuseable.java:940) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:85) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2510) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2304) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2178) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:82) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoNext$NextSubscriber.onComplete(MonoNext.java:102) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFilter$FilterSubscriber.onComplete(FluxFilter.java:166) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFlatMap$FlatMapMain.checkTerminated(FluxFlatMap.java:846) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFlatMap$FlatMapMain.drainLoop(FluxFlatMap.java:608) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFlatMap$FlatMapMain.drain(FluxFlatMap.java:588) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFlatMap$FlatMapMain.onComplete(FluxFlatMap.java:465) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onComplete(FluxPeekFuseable.java:277) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:294) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:230) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.request(FluxPeekFuseable.java:144) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFlatMap$FlatMapMain.onSubscribe(FluxFlatMap.java:371) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onSubscribe(FluxPeekFuseable.java:178) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:87) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2034) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onComplete(FluxDefaultIfEmpty.java:134) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFilter$FilterSubscriber.onComplete(FluxFilter.java:166) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMap$MapConditionalSubscriber.onComplete(FluxMap.java:275) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1803) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoCacheTime$CoordinatorSubscriber.signalCached(MonoCacheTime.java:337) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoCacheTime$CoordinatorSubscriber.onNext(MonoCacheTime.java:354) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:210) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoPublishOn$PublishOnSubscriber.run(MonoPublishOn.java:181) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264) ~[na:na]\r\n\t\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java) ~[na:na]\r\n\t\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) ~[na:na]\r\n\t\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]\r\n\t\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]\r\n\t\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\n2022-12-13T21:50:04.863-06:00 DEBUG 70978 --- [     parallel-2] o.s.http.codec.json.Jackson2JsonEncoder  : [1b6ff9fc-2] Encoding [{timestamp=Tue Dec 13 21:50:04 CST 2022, path=/hello, status=500, error=Internal Server Error, reque (truncated)...]\r\n2022-12-13T21:50:04.870-06:00 DEBUG 70978 --- [ctor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1b6ff9fc-2] Completed 500 INTERNAL_SERVER_ERROR\r\n```\r\n\r\nIf I hit the endpoint authenticated, I get the valid response. Is there some mapper I am missing to map this 500 error to a 403 or similar?","title":"Spring Reactive Security: adding `SecurityWebFilterChain` causes 500 error for AccessDeniedException","body":"<p>Note that I am using Spring security 5.7.4.</p>\n<p>I have a <code>RestController</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class StandardController {\n    @PreAuthorize(&quot;hasRole('ADMIN')&quot;)\n    @GetMapping(&quot;/hello&quot;)\n    public Mono&lt;Map&lt;String, String&gt;&gt; hello() {\n        final Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\n        map.put(&quot;hi&quot;, &quot;hi&quot;);\n        return Mono.just(map);\n    }\n\n}\n</code></pre>\n<p>and a <code>Security Config</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebFluxSecurity\n@EnableReactiveMethodSecurity\npublic class SecurityConfig {\n    @Bean\n    public MapReactiveUserDetailsService userDetailsService() {\n        User.UserBuilder userBuilder = User.withDefaultPasswordEncoder();\n        UserDetails rob = userBuilder.username(&quot;rob&quot;)\n                .password(&quot;rob&quot;)\n                .roles(&quot;USER&quot;)\n                .build();\n        UserDetails admin = userBuilder.username(&quot;admin&quot;)\n                .password(&quot;admin&quot;)\n                .roles(&quot;USER&quot;,&quot;ADMIN&quot;)\n                .build();\n        return new MapReactiveUserDetailsService(rob, admin);\n    }\n}\n</code></pre>\n<p>Everything works fine until I try to disable <code>CSRF</code> by adding <code>SecurityWebFilterChain</code> to my security config.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SecurityConfig {\n    @Bean\n    public SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {\n       return http\n                .httpBasic()\n                .and()\n                .csrf()\n                .disable()\n                .build();\n    }\n\n\n /// ... user details service\n}\n</code></pre>\n<p>Now, when I try to hit any endpoint UNAUTHENTICATED (including ones unaffected by CSRF like the <code>hello</code> GET route) I get the following stack trace:</p>\n<pre><code>2022-12-13T21:50:04.846-06:00 DEBUG 70978 --- [ctor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1b6ff9fc-2] HTTP GET &quot;/hello&quot;\n2022-12-13T21:50:04.851-06:00 DEBUG 70978 --- [     parallel-2] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.\n2022-12-13T21:50:04.852-06:00 DEBUG 70978 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}\n2022-12-13T21:50:04.852-06:00 DEBUG 70978 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /hello' doesn't match 'POST /logout'\n2022-12-13T21:50:04.852-06:00 DEBUG 70978 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found\n2022-12-13T21:50:04.853-06:00 DEBUG 70978 --- [     parallel-2] s.w.r.r.m.a.RequestMappingHandlerMapping : [1b6ff9fc-2] Mapped to com.example.demo.StandardController#hello()\n2022-12-13T21:50:04.856-06:00 DEBUG 70978 --- [     parallel-2] o.s.w.r.r.m.a.ResponseBodyResultHandler  : [1b6ff9fc-2] Using 'application/json' given [*/*] and supported [application/json, application/*+json, application/x-ndjson, text/event-stream]\n2022-12-13T21:50:04.856-06:00 DEBUG 70978 --- [     parallel-2] o.s.w.r.r.m.a.ResponseBodyResultHandler  : [1b6ff9fc-2] 0..1 [java.util.Map&lt;java.lang.String, java.lang.String&gt;]\n2022-12-13T21:50:04.856-06:00 DEBUG 70978 --- [     parallel-2] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@4f4ffd93'\n2022-12-13T21:50:04.858-06:00 DEBUG 70978 --- [     parallel-2] a.w.r.e.AbstractErrorWebExceptionHandler : [1b6ff9fc-2] Resolved [AccessDeniedException: Access Denied] for HTTP GET /hello\n2022-12-13T21:50:04.859-06:00 ERROR 70978 --- [     parallel-2] a.w.r.e.AbstractErrorWebExceptionHandler : [1b6ff9fc-2]  500 Server Error for HTTP GET &quot;/hello&quot;\n\norg.springframework.security.access.AccessDeniedException: Access Denied\n    at org.springframework.security.authorization.ReactiveAuthorizationManager.lambda$verify$0(ReactiveAuthorizationManager.java:53) ~[spring-security-core-6.0.0.jar:6.0.0]\n    Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \nError has been observed at the following site(s):\n    *__checkpoint ⇢ Handler com.example.demo.StandardController#hello() [DispatcherHandler]\n    *__checkpoint ⇢ org.springframework.security.web.server.authentication.logout.LogoutWebFilter [DefaultWebFilterChain]\n    *__checkpoint ⇢ org.springframework.security.web.server.savedrequest.ServerRequestCacheWebFilter [DefaultWebFilterChain]\n    *__checkpoint ⇢ org.springframework.security.web.server.context.SecurityContextServerWebExchangeWebFilter [DefaultWebFilterChain]\n    *__checkpoint ⇢ org.springframework.security.web.server.context.ReactorContextWebFilter [DefaultWebFilterChain]\n    *__checkpoint ⇢ org.springframework.security.web.server.header.HttpHeaderWriterWebFilter [DefaultWebFilterChain]\n    *__checkpoint ⇢ org.springframework.security.config.web.server.ServerHttpSecurity$ServerWebExchangeReactorContextWebFilter [DefaultWebFilterChain]\n    *__checkpoint ⇢ org.springframework.security.web.server.WebFilterChainProxy [DefaultWebFilterChain]\n    *__checkpoint ⇢ HTTP GET &quot;/hello&quot; [ExceptionHandlingWebHandler]\nOriginal Stack Trace:\n        at org.springframework.security.authorization.ReactiveAuthorizationManager.lambda$verify$0(ReactiveAuthorizationManager.java:53) ~[spring-security-core-6.0.0.jar:6.0.0]\n        at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:44) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:82) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFilterFuseable$FilterFuseableSubscriber.onComplete(FluxFilterFuseable.java:171) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onComplete(FluxMapFuseable.java:350) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.secondComplete(MonoFlatMap.java:246) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:305) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2508) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapInner.onSubscribe(MonoFlatMap.java:291) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2034) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onComplete(FluxDefaultIfEmpty.java:134) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onComplete(FluxMapFuseable.java:152) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.secondComplete(MonoFlatMap.java:250) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapInner.onComplete(MonoFlatMap.java:324) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:155) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1802) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoCacheTime.subscribeOrReturn(MonoCacheTime.java:151) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:57) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFilter$FilterSubscriber.onNext(FluxFilter.java:113) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMap$MapConditionalSubscriber.onNext(FluxMap.java:224) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2508) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMap$MapConditionalSubscriber.request(FluxMap.java:295) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFilter$FilterSubscriber.request(FluxFilter.java:186) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.request(FluxDefaultIfEmpty.java:98) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMap$MapSubscriber.request(FluxMap.java:164) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.request(FluxMapFuseable.java:360) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFilterFuseable$FilterFuseableSubscriber.request(FluxFilterFuseable.java:191) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2304) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2178) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFilterFuseable$FilterFuseableSubscriber.onSubscribe(FluxFilterFuseable.java:87) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onSubscribe(FluxMapFuseable.java:265) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMap$MapSubscriber.onSubscribe(FluxMap.java:92) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$BaseFluxToMonoOperator.onSubscribe(Operators.java:1988) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFilter$FilterSubscriber.onSubscribe(FluxFilter.java:85) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMap$MapConditionalSubscriber.onSubscribe(FluxMap.java:194) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoDeferContextual.subscribe(MonoDeferContextual.java:55) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFromMonoOperator.subscribe(FluxFromMonoOperator.java:83) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxDeferContextual.subscribe(FluxDeferContextual.java:57) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.complete(MonoIgnoreThen.java:292) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onNext(MonoIgnoreThen.java:187) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2508) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onSubscribe(MonoIgnoreThen.java:134) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFlatMap.trySubscribeScalarMap(FluxFlatMap.java:192) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap.subscribeOrReturn(MonoFlatMap.java:53) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:57) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:240) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onComplete(MonoIgnoreThen.java:203) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onComplete(MonoFlatMap.java:189) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators.complete(Operators.java:137) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoZip.subscribe(MonoZip.java:121) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerNext(FluxConcatMapNoPrefetch.java:258) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxConcatMap$ConcatMapInner.onNext(FluxConcatMap.java:863) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2508) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.request(MonoPeekTerminal.java:139) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2268) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:338) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2304) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2178) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoNext$NextSubscriber.onSubscribe(MonoNext.java:70) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onSubscribe(FluxConcatMapNoPrefetch.java:164) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:87) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:82) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFilter$FilterSubscriber.onComplete(FluxFilter.java:166) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onComplete(FluxPeekFuseable.java:940) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:85) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2510) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2304) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2178) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:82) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoNext$NextSubscriber.onComplete(MonoNext.java:102) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFilter$FilterSubscriber.onComplete(FluxFilter.java:166) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFlatMap$FlatMapMain.checkTerminated(FluxFlatMap.java:846) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFlatMap$FlatMapMain.drainLoop(FluxFlatMap.java:608) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFlatMap$FlatMapMain.drain(FluxFlatMap.java:588) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFlatMap$FlatMapMain.onComplete(FluxFlatMap.java:465) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onComplete(FluxPeekFuseable.java:277) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:294) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:230) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.request(FluxPeekFuseable.java:144) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFlatMap$FlatMapMain.onSubscribe(FluxFlatMap.java:371) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onSubscribe(FluxPeekFuseable.java:178) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:87) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2034) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onComplete(FluxDefaultIfEmpty.java:134) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFilter$FilterSubscriber.onComplete(FluxFilter.java:166) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMap$MapConditionalSubscriber.onComplete(FluxMap.java:275) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1803) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoCacheTime$CoordinatorSubscriber.signalCached(MonoCacheTime.java:337) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoCacheTime$CoordinatorSubscriber.onNext(MonoCacheTime.java:354) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:210) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoPublishOn$PublishOnSubscriber.run(MonoPublishOn.java:181) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28) ~[reactor-core-3.5.0.jar:3.5.0]\n        at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264) ~[na:na]\n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java) ~[na:na]\n        at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) ~[na:na]\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]\n        at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n\n2022-12-13T21:50:04.863-06:00 DEBUG 70978 --- [     parallel-2] o.s.http.codec.json.Jackson2JsonEncoder  : [1b6ff9fc-2] Encoding [{timestamp=Tue Dec 13 21:50:04 CST 2022, path=/hello, status=500, error=Internal Server Error, reque (truncated)...]\n2022-12-13T21:50:04.870-06:00 DEBUG 70978 --- [ctor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1b6ff9fc-2] Completed 500 INTERNAL_SERVER_ERROR\n</code></pre>\n<p>If I hit the endpoint authenticated, I get the valid response. Is there some mapper I am missing to map this 500 error to a 403 or similar?</p>\n"},{"tags":["java","spring","jdbctemplate"],"answers":[{"tags":[],"owner":{"account_id":266102,"reputation":3853,"user_id":553486,"accept_rate":80,"display_name":"Byron"},"down_vote_count":4,"up_vote_count":20,"is_accepted":false,"score":16,"last_activity_date":1337105518,"creation_date":1337105518,"answer_id":10606477,"question_id":10606229,"body_markdown":"Ok, I figured it out.  I just wrapped it in a try catch and send back null.\r\n\r\n        public String test() {\r\n        \t\tString cert=null;\r\n        \t\tString sql = &quot;select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN \r\n                         where id_str_rt = &#39;999&#39; and ID_NMB_SRZ = &#39;60230009999999&#39;&quot;;\r\n        \t\ttry {\r\n        \t\t\tObject o = (String) jdbc.queryForObject(sql, String.class);\r\n        \t\t\tcert = (String) o;\r\n        \t\t} catch (EmptyResultDataAccessException e) {\r\n        \t\t\te.printStackTrace();\r\n        \t\t}\r\n        \t\treturn cert;\r\n        }","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>Ok, I figured it out.  I just wrapped it in a try catch and send back null.</p>\n\n<pre><code>    public String test() {\n            String cert=null;\n            String sql = \"select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN \n                     where id_str_rt = '999' and ID_NMB_SRZ = '60230009999999'\";\n            try {\n                Object o = (String) jdbc.queryForObject(sql, String.class);\n                cert = (String) o;\n            } catch (EmptyResultDataAccessException e) {\n                e.printStackTrace();\n            }\n            return cert;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1426258,"reputation":4514,"user_id":1349691,"accept_rate":72,"display_name":"Philippe Marschall"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1337146038,"creation_date":1337112446,"answer_id":10608054,"question_id":10606229,"body_markdown":"That&#39;s not a good solution because you&#39;re relying on exceptions for control flow. In your solution it&#39;s normal to get exceptions, it&#39;s normal to have them in the log.\r\n\r\n    public String test() {\r\n        String sql = &quot;select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN where id_str_rt = &#39;999&#39; and ID_NMB_SRZ = &#39;60230009999999&#39;&quot;;\r\n        List&lt;String&gt; certs = jdbc.queryForList(sql, String.class); \r\n        if (certs.isEmpty()) {\r\n            return null;\r\n        } else {\r\n            return certs.get(0);\r\n        }\r\n    }","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>That's not a good solution because you're relying on exceptions for control flow. In your solution it's normal to get exceptions, it's normal to have them in the log.</p>\n\n<pre><code>public String test() {\n    String sql = \"select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN where id_str_rt = '999' and ID_NMB_SRZ = '60230009999999'\";\n    List&lt;String&gt; certs = jdbc.queryForList(sql, String.class); \n    if (certs.isEmpty()) {\n        return null;\n    } else {\n        return certs.get(0);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":33759,"reputation":36049,"user_id":94813,"accept_rate":70,"display_name":"Rakesh Juyal"},"down_vote_count":1,"up_vote_count":216,"is_accepted":true,"score":215,"last_activity_date":1636548672,"creation_date":1337147171,"answer_id":10612703,"question_id":10606229,"body_markdown":"In JdbcTemplate , `queryForInt`, `queryForLong`, `queryForObject` all such methods expects that executed query will return one and only one row. If you get no rows or more than one row that will result in `IncorrectResultSizeDataAccessException` . Now the correct way is not to catch this exception or `EmptyResultDataAccessException`, but make sure the query you are using should return only one row.  If at all it is not possible then use `query` method instead.\r\n\r\n    List&lt;String&gt; strLst = getJdbcTemplate().query(sql, new RowMapper&lt;String&gt;() {\r\n        public String mapRow(ResultSet rs, int rowNum) throws SQLException {\r\n            return rs.getString(1);\r\n        }\r\n    });\r\n\r\n    if (strLst.isEmpty()) {\r\n        return null;\r\n    } else if (strLst.size() == 1) { // list contains exactly 1 element\r\n        return strLst.get(0);\r\n    } else { // list contains more than 1 element\r\n             // either return 1st element or throw an exception\r\n    }\r\n\r\n","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>In JdbcTemplate , <code>queryForInt</code>, <code>queryForLong</code>, <code>queryForObject</code> all such methods expects that executed query will return one and only one row. If you get no rows or more than one row that will result in <code>IncorrectResultSizeDataAccessException</code> . Now the correct way is not to catch this exception or <code>EmptyResultDataAccessException</code>, but make sure the query you are using should return only one row.  If at all it is not possible then use <code>query</code> method instead.</p>\n<pre><code>List&lt;String&gt; strLst = getJdbcTemplate().query(sql, new RowMapper&lt;String&gt;() {\n    public String mapRow(ResultSet rs, int rowNum) throws SQLException {\n        return rs.getString(1);\n    }\n});\n\nif (strLst.isEmpty()) {\n    return null;\n} else if (strLst.size() == 1) { // list contains exactly 1 element\n    return strLst.get(0);\n} else { // list contains more than 1 element\n         // either return 1st element or throw an exception\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1577966,"reputation":602,"user_id":1463974,"accept_rate":50,"display_name":"DS."},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1340030501,"creation_date":1340030077,"answer_id":11085080,"question_id":10606229,"body_markdown":"You could use a group function so that your query always returns a result.\r\nie\r\n\r\n    MIN(ID_NMB_SRZ)","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>You could use a group function so that your query always returns a result.\nie</p>\n\n<pre><code>MIN(ID_NMB_SRZ)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":47296,"reputation":27247,"user_id":140037,"accept_rate":74,"display_name":"Brett Ryan"},"down_vote_count":1,"up_vote_count":59,"is_accepted":false,"score":58,"last_activity_date":1546613065,"creation_date":1367801093,"answer_id":16390624,"question_id":10606229,"body_markdown":"You may also use a [`ResultSetExtractor`][1] instead of a [`RowMapper`][2]. Both are just as easy as one another, the only difference is you call [`ResultSet.next()`][3].\r\n\r\n    public String test() {\r\n        String sql = &quot;select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN &quot;\r\n                     + &quot; where id_str_rt = &#39;999&#39; and ID_NMB_SRZ = &#39;60230009999999&#39;&quot;;\r\n        return jdbc.query(sql, new ResultSetExtractor&lt;String&gt;() {\r\n            @Override\r\n            public String extractData(ResultSet rs) throws SQLException,\r\n                                                           DataAccessException {\r\n                return rs.next() ? rs.getString(&quot;ID_NMB_SRZ&quot;) : null;\r\n            }\r\n        });\r\n    }\r\n\r\nThe [`ResultSetExtractor`][1] has the added benefit that you can handle all cases where there are more than one row or no rows returned.\r\n\r\n**UPDATE**: Several years on and I have a few tricks to share. [`JdbcTemplate`][4] works superbly with java 8 lambdas which the following examples are designed for but you can quite easily use a static class to achieve the same.\r\n\r\nWhile the question is about simple types, these examples serve as a guide for the common case of extracting domain objects.\r\n\r\nFirst off. Let&#39;s suppose that you have an account object with two properties for simplicity `Account(Long id, String name)`. You would likely wish to have a `RowMapper` for this domain object.\r\n\r\n    private static final RowMapper&lt;Account&gt; MAPPER_ACCOUNT =\r\n            (rs, i) -&gt; new Account(rs.getLong(&quot;ID&quot;),\r\n                                   rs.getString(&quot;NAME&quot;));\r\n\r\nYou may now use this mapper directly within a method to map `Account` domain objects from a query (`jt` is a `JdbcTemplate` instance).\r\n\r\n    public List&lt;Account&gt; getAccounts() {\r\n        return jt.query(SELECT_ACCOUNT, MAPPER_ACCOUNT);\r\n    }\r\n\r\nGreat, but now we want our original problem and we use my original solution reusing the [`RowMapper`][5] to perform the mapping for us.\r\n\r\n    public Account getAccount(long id) {\r\n        return jt.query(\r\n                SELECT_ACCOUNT,\r\n                rs -&gt; rs.next() ? MAPPER_ACCOUNT.mapRow(rs, 1) : null,\r\n                id);\r\n    }\r\n\r\nGreat, but this is a pattern you may and will wish to repeat. So you can create a generic factory method to create a new [`ResultSetExtractor`][1] for the task.\r\n\r\n    public static &lt;T&gt; ResultSetExtractor singletonExtractor(\r\n            RowMapper&lt;? extends T&gt; mapper) {\r\n        return rs -&gt; rs.next() ? mapper.mapRow(rs, 1) : null;\r\n    }\r\n\r\nCreating a [`ResultSetExtractor`][1] now becomes trivial.\r\n\r\n    private static final ResultSetExtractor&lt;Account&gt; EXTRACTOR_ACCOUNT =\r\n            singletonExtractor(MAPPER_ACCOUNT);\r\n\r\n    public Account getAccount(long id) {\r\n        return jt.query(SELECT_ACCOUNT, EXTRACTOR_ACCOUNT, id);\r\n    }\r\n\r\nI hope this helps to show that you can now quite easily combine parts in a powerful way to make your domain simpler.\r\n\r\n**UPDATE 2**: Combine with an [Optional&lt;T&gt;][6] for optional values instead of null.\r\n\r\n    public static &lt;T&gt; ResultSetExtractor&lt;Optional&lt;T&gt;&gt; singletonOptionalExtractor(\r\n            RowMapper&lt;? extends T&gt; mapper) {\r\n        return rs -&gt; rs.next() ? Optional.of(mapper.mapRow(rs, 1)) : Optional.empty();\r\n    }\r\n\r\nWhich now when used could have the following:\r\n\r\n    private static final ResultSetExtractor&lt;Optional&lt;Double&gt;&gt; EXTRACTOR_DISCOUNT =\r\n            singletonOptionalExtractor(MAPPER_DISCOUNT);\r\n\r\n    public double getDiscount(long accountId) {\r\n        return jt.query(SELECT_DISCOUNT, EXTRACTOR_DISCOUNT, accountId)\r\n                .orElse(0.0);\r\n    }\r\n\r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/ResultSetExtractor.html\r\n  [2]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/RowMapper.html\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html#next--\r\n  [4]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html\r\n  [5]: http://[%60RowMapper%60][2]\r\n  [6]: https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>You may also use a <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/ResultSetExtractor.html\" rel=\"noreferrer\"><code>ResultSetExtractor</code></a> instead of a <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/RowMapper.html\" rel=\"noreferrer\"><code>RowMapper</code></a>. Both are just as easy as one another, the only difference is you call <a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html#next--\" rel=\"noreferrer\"><code>ResultSet.next()</code></a>.</p>\n\n<pre><code>public String test() {\n    String sql = \"select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN \"\n                 + \" where id_str_rt = '999' and ID_NMB_SRZ = '60230009999999'\";\n    return jdbc.query(sql, new ResultSetExtractor&lt;String&gt;() {\n        @Override\n        public String extractData(ResultSet rs) throws SQLException,\n                                                       DataAccessException {\n            return rs.next() ? rs.getString(\"ID_NMB_SRZ\") : null;\n        }\n    });\n}\n</code></pre>\n\n<p>The <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/ResultSetExtractor.html\" rel=\"noreferrer\"><code>ResultSetExtractor</code></a> has the added benefit that you can handle all cases where there are more than one row or no rows returned.</p>\n\n<p><strong>UPDATE</strong>: Several years on and I have a few tricks to share. <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html\" rel=\"noreferrer\"><code>JdbcTemplate</code></a> works superbly with java 8 lambdas which the following examples are designed for but you can quite easily use a static class to achieve the same.</p>\n\n<p>While the question is about simple types, these examples serve as a guide for the common case of extracting domain objects.</p>\n\n<p>First off. Let's suppose that you have an account object with two properties for simplicity <code>Account(Long id, String name)</code>. You would likely wish to have a <code>RowMapper</code> for this domain object.</p>\n\n<pre><code>private static final RowMapper&lt;Account&gt; MAPPER_ACCOUNT =\n        (rs, i) -&gt; new Account(rs.getLong(\"ID\"),\n                               rs.getString(\"NAME\"));\n</code></pre>\n\n<p>You may now use this mapper directly within a method to map <code>Account</code> domain objects from a query (<code>jt</code> is a <code>JdbcTemplate</code> instance).</p>\n\n<pre><code>public List&lt;Account&gt; getAccounts() {\n    return jt.query(SELECT_ACCOUNT, MAPPER_ACCOUNT);\n}\n</code></pre>\n\n<p>Great, but now we want our original problem and we use my original solution reusing the <a href=\"http://[%60RowMapper%60][2]\" rel=\"noreferrer\"><code>RowMapper</code></a> to perform the mapping for us.</p>\n\n<pre><code>public Account getAccount(long id) {\n    return jt.query(\n            SELECT_ACCOUNT,\n            rs -&gt; rs.next() ? MAPPER_ACCOUNT.mapRow(rs, 1) : null,\n            id);\n}\n</code></pre>\n\n<p>Great, but this is a pattern you may and will wish to repeat. So you can create a generic factory method to create a new <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/ResultSetExtractor.html\" rel=\"noreferrer\"><code>ResultSetExtractor</code></a> for the task.</p>\n\n<pre><code>public static &lt;T&gt; ResultSetExtractor singletonExtractor(\n        RowMapper&lt;? extends T&gt; mapper) {\n    return rs -&gt; rs.next() ? mapper.mapRow(rs, 1) : null;\n}\n</code></pre>\n\n<p>Creating a <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/ResultSetExtractor.html\" rel=\"noreferrer\"><code>ResultSetExtractor</code></a> now becomes trivial.</p>\n\n<pre><code>private static final ResultSetExtractor&lt;Account&gt; EXTRACTOR_ACCOUNT =\n        singletonExtractor(MAPPER_ACCOUNT);\n\npublic Account getAccount(long id) {\n    return jt.query(SELECT_ACCOUNT, EXTRACTOR_ACCOUNT, id);\n}\n</code></pre>\n\n<p>I hope this helps to show that you can now quite easily combine parts in a powerful way to make your domain simpler.</p>\n\n<p><strong>UPDATE 2</strong>: Combine with an <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"noreferrer\">Optional</a> for optional values instead of null.</p>\n\n<pre><code>public static &lt;T&gt; ResultSetExtractor&lt;Optional&lt;T&gt;&gt; singletonOptionalExtractor(\n        RowMapper&lt;? extends T&gt; mapper) {\n    return rs -&gt; rs.next() ? Optional.of(mapper.mapRow(rs, 1)) : Optional.empty();\n}\n</code></pre>\n\n<p>Which now when used could have the following:</p>\n\n<pre><code>private static final ResultSetExtractor&lt;Optional&lt;Double&gt;&gt; EXTRACTOR_DISCOUNT =\n        singletonOptionalExtractor(MAPPER_DISCOUNT);\n\npublic double getDiscount(long accountId) {\n    return jt.query(SELECT_DISCOUNT, EXTRACTOR_DISCOUNT, accountId)\n            .orElse(0.0);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2222173,"reputation":126,"user_id":1961316,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1373620531,"creation_date":1373619246,"answer_id":17611061,"question_id":10606229,"body_markdown":"Actually, You can play with `JdbcTemplate` and customize your own method as you prefer. My suggestion is to make something like this:\r\n\r\n    public String test() {\r\n        String cert = null;\r\n        String sql = &quot;select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN\r\n            where id_str_rt = &#39;999&#39; and ID_NMB_SRZ = &#39;60230009999999&#39;&quot;;\r\n        ArrayList&lt;String&gt; certList = (ArrayList&lt;String&gt;) jdbc.query(\r\n            sql, new RowMapperResultSetExtractor(new UserMapper()));\r\n        cert =  DataAccessUtils.singleResult(certList);\r\n        \r\n        return cert;\r\n    }\r\n\r\nIt works as the original `jdbc.queryForObject`, but without `throw new EmptyResultDataAccessException` when `size == 0`.  ","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>Actually, You can play with <code>JdbcTemplate</code> and customize your own method as you prefer. My suggestion is to make something like this:</p>\n\n<pre><code>public String test() {\n    String cert = null;\n    String sql = \"select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN\n        where id_str_rt = '999' and ID_NMB_SRZ = '60230009999999'\";\n    ArrayList&lt;String&gt; certList = (ArrayList&lt;String&gt;) jdbc.query(\n        sql, new RowMapperResultSetExtractor(new UserMapper()));\n    cert =  DataAccessUtils.singleResult(certList);\n\n    return cert;\n}\n</code></pre>\n\n<p>It works as the original <code>jdbc.queryForObject</code>, but without <code>throw new EmptyResultDataAccessException</code> when <code>size == 0</code>.  </p>\n"},{"tags":[],"owner":{"account_id":2587731,"reputation":1446,"user_id":2243033,"display_name":"Stewart Evans"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1393307176,"creation_date":1393307176,"answer_id":22005648,"question_id":10606229,"body_markdown":"Since returning a null when there is no data is something I want to do often when using queryForObject I have found it useful to extend JdbcTemplate and add a queryForNullableObject method similar to below.\r\n\r\n    public class JdbcTemplateExtended extends JdbcTemplate {\r\n\r\n        public JdbcTemplateExtended(DataSource datasource){\r\n            super(datasource);\r\n        }\r\n\r\n        public &lt;T&gt; T queryForNullableObject(String sql, RowMapper&lt;T&gt; rowMapper) throws DataAccessException {\r\n            List&lt;T&gt; results = query(sql, rowMapper);\r\n\r\n            if (results == null || results.isEmpty()) {\r\n                return null;\r\n            }\r\n            else if (results.size() &gt; 1) {\r\n                throw new IncorrectResultSizeDataAccessException(1, results.size());\r\n            }\r\n            else{\r\n                return results.iterator().next();\r\n            }\r\n        }\r\n\r\n        public &lt;T&gt; T queryForNullableObject(String sql, Class&lt;T&gt; requiredType) throws DataAccessException {\r\n            return queryForObject(sql, getSingleColumnRowMapper(requiredType));\r\n        }\r\n\r\n    }\r\n\r\nYou can now use this in your code the same way you used queryForObject\r\n\r\n    String result = queryForNullableObject(queryString, String.class);\r\n\r\nI would be interested to know if anyone else thinks this is a good idea?","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>Since returning a null when there is no data is something I want to do often when using queryForObject I have found it useful to extend JdbcTemplate and add a queryForNullableObject method similar to below.</p>\n\n<pre><code>public class JdbcTemplateExtended extends JdbcTemplate {\n\n    public JdbcTemplateExtended(DataSource datasource){\n        super(datasource);\n    }\n\n    public &lt;T&gt; T queryForNullableObject(String sql, RowMapper&lt;T&gt; rowMapper) throws DataAccessException {\n        List&lt;T&gt; results = query(sql, rowMapper);\n\n        if (results == null || results.isEmpty()) {\n            return null;\n        }\n        else if (results.size() &gt; 1) {\n            throw new IncorrectResultSizeDataAccessException(1, results.size());\n        }\n        else{\n            return results.iterator().next();\n        }\n    }\n\n    public &lt;T&gt; T queryForNullableObject(String sql, Class&lt;T&gt; requiredType) throws DataAccessException {\n        return queryForObject(sql, getSingleColumnRowMapper(requiredType));\n    }\n\n}\n</code></pre>\n\n<p>You can now use this in your code the same way you used queryForObject</p>\n\n<pre><code>String result = queryForNullableObject(queryString, String.class);\n</code></pre>\n\n<p>I would be interested to know if anyone else thinks this is a good idea?</p>\n"},{"tags":[],"owner":{"account_id":141800,"reputation":609,"user_id":349091,"accept_rate":17,"display_name":"grbonk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1395772082,"creation_date":1395772082,"answer_id":22643285,"question_id":10606229,"body_markdown":"I dealt with this before &amp; had posted in the spring forums.  \r\n\r\nhttp://forum.spring.io/forum/spring-projects/data/123129-frustrated-with-emptyresultdataaccessexception\r\n\r\nThe advice we received was to use a type of SQlQuery.  Here&#39;s an example of what we did when trying to get a value out of a DB that might not be there.\r\n\r\n    @Component\r\n    public class FindID extends MappingSqlQuery&lt;Long&gt; {\r\n     \r\n            @Autowired\r\n            public void setDataSource(DataSource dataSource) {\r\n     \r\n                    String sql = &quot;Select id from address where id = ?&quot;;\r\n     \r\n                    super.setDataSource(dataSource);\r\n     \r\n                    super.declareParameter(new SqlParameter(Types.VARCHAR));\r\n     \r\n                    super.setSql(sql);\r\n     \r\n                    compile();\r\n            }\r\n     \r\n            @Override\r\n            protected Long mapRow(ResultSet rs, int rowNum) throws SQLException {\r\n                    return rs.getLong(1);\r\n            }\r\n\r\n \r\nIn the DAO then we just call...\r\n\r\n    Long id = findID.findObject(id);\r\n\r\nNot clear on performance, but it works and is neat.","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>I dealt with this before &amp; had posted in the spring forums.  </p>\n\n<p><a href=\"http://forum.spring.io/forum/spring-projects/data/123129-frustrated-with-emptyresultdataaccessexception\" rel=\"nofollow\">http://forum.spring.io/forum/spring-projects/data/123129-frustrated-with-emptyresultdataaccessexception</a></p>\n\n<p>The advice we received was to use a type of SQlQuery.  Here's an example of what we did when trying to get a value out of a DB that might not be there.</p>\n\n<pre><code>@Component\npublic class FindID extends MappingSqlQuery&lt;Long&gt; {\n\n        @Autowired\n        public void setDataSource(DataSource dataSource) {\n\n                String sql = \"Select id from address where id = ?\";\n\n                super.setDataSource(dataSource);\n\n                super.declareParameter(new SqlParameter(Types.VARCHAR));\n\n                super.setSql(sql);\n\n                compile();\n        }\n\n        @Override\n        protected Long mapRow(ResultSet rs, int rowNum) throws SQLException {\n                return rs.getLong(1);\n        }\n</code></pre>\n\n<p>In the DAO then we just call...</p>\n\n<pre><code>Long id = findID.findObject(id);\n</code></pre>\n\n<p>Not clear on performance, but it works and is neat.</p>\n"},{"tags":[],"owner":{"account_id":3042335,"reputation":119,"user_id":2579014,"display_name":"Mahesh Jayachandran"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1440966864,"creation_date":1400648500,"answer_id":23774316,"question_id":10606229,"body_markdown":"Since getJdbcTemplate().queryForMap expects minimum size of one but when it returns null it shows EmptyResultDataAccesso fix dis when can use below logic\r\n\r\n    Map&lt;String, String&gt; loginMap =null;\r\n    try{\r\n    \tloginMap = getJdbcTemplate().queryForMap(sql, new Object[] {CustomerLogInInfo.getCustLogInEmail()});\r\n    }\r\n    catch(EmptyResultDataAccessException ex){\r\n    \tSystem.out.println(&quot;Exception.......&quot;);\r\n    \tloginMap =null;\r\n    }\r\n    if(loginMap==null || loginMap.isEmpty()){\r\n    \treturn null;\r\n    }\r\n    else{\r\n    \treturn loginMap;\r\n    }","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>Since getJdbcTemplate().queryForMap expects minimum size of one but when it returns null it shows EmptyResultDataAccesso fix dis when can use below logic</p>\n\n<pre><code>Map&lt;String, String&gt; loginMap =null;\ntry{\n    loginMap = getJdbcTemplate().queryForMap(sql, new Object[] {CustomerLogInInfo.getCustLogInEmail()});\n}\ncatch(EmptyResultDataAccessException ex){\n    System.out.println(\"Exception.......\");\n    loginMap =null;\n}\nif(loginMap==null || loginMap.isEmpty()){\n    return null;\n}\nelse{\n    return loginMap;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":376644,"reputation":895,"user_id":728232,"display_name":"Rich"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1404535390,"creation_date":1404535390,"answer_id":24583049,"question_id":10606229,"body_markdown":"In Postgres, you can make almost any single value query return a value or null by wrapping it:\r\n\r\n    SELECT (SELECT &lt;query&gt;) AS value\r\n\r\nand hence avoid complexity in the caller.\r\n","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>In Postgres, you can make almost any single value query return a value or null by wrapping it:</p>\n\n<pre><code>SELECT (SELECT &lt;query&gt;) AS value\n</code></pre>\n\n<p>and hence avoid complexity in the caller.</p>\n"},{"tags":[],"owner":{"account_id":6060942,"reputation":11,"user_id":4732683,"display_name":"Mohan Kumar Dg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1438924737,"creation_date":1438924737,"answer_id":31870201,"question_id":10606229,"body_markdown":" For Byron, you can try this..\r\n\r\n    public String test(){\r\n                \tString sql = &quot;select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN \r\n                         where id_str_rt = &#39;999&#39; and ID_NMB_SRZ = &#39;60230009999999&#39;&quot;;\r\n                \tList&lt;String&gt; li = jdbcTemplate.queryForList(sql,String.class);\r\n                \treturn li.get(0).toString();\r\n            }\r\n\r\n","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>For Byron, you can try this..</p>\n\n<pre><code>public String test(){\n                String sql = \"select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN \n                     where id_str_rt = '999' and ID_NMB_SRZ = '60230009999999'\";\n                List&lt;String&gt; li = jdbcTemplate.queryForList(sql,String.class);\n                return li.get(0).toString();\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":175796,"reputation":557,"user_id":406065,"accept_rate":40,"display_name":"Dmitry"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1439991914,"creation_date":1439991914,"answer_id":32097340,"question_id":10606229,"body_markdown":"to make \r\n\r\n        jdbcTemplate.queryForList(sql, String.class)\r\n\r\nwork, make sure your jdbcTemplate is of type \r\n    \r\n        org.springframework.jdbc.core.JdbcTemplate","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>to make </p>\n\n<pre><code>    jdbcTemplate.queryForList(sql, String.class)\n</code></pre>\n\n<p>work, make sure your jdbcTemplate is of type </p>\n\n<pre><code>    org.springframework.jdbc.core.JdbcTemplate\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3454239,"reputation":3653,"user_id":2893073,"accept_rate":67,"display_name":"Eddy"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1479303550,"creation_date":1479303550,"answer_id":40633609,"question_id":10606229,"body_markdown":"I just catch this &quot;EmptyResultDataAccessException&quot;&lt;br/&gt;\r\n\r\n    public Myclass findOne(String id){\r\n        try {\r\n            Myclass m = this.jdbcTemplate.queryForObject(\r\n                    &quot;SELECT * FROM tb_t WHERE id = ?&quot;,\r\n                    new Object[]{id},\r\n                    new RowMapper&lt;Myclass&gt;() {\r\n                        public Myclass mapRow(ResultSet rs, int rowNum) throws SQLException {\r\n                            Myclass m = new Myclass();\r\n                            m.setName(rs.getString(&quot;name&quot;));\r\n                            return m;\r\n                        }\r\n                    });\r\n            return m;\r\n        } catch (EmptyResultDataAccessException e) { // result.size() == 0;\r\n            return null;\r\n        }\r\n    }\r\n\r\nthen you can check: \r\n\r\n    if(m == null){\r\n        // insert operation.\r\n    }else{\r\n        // update operation.\r\n    }","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>I just catch this \"EmptyResultDataAccessException\"<br/></p>\n\n<pre><code>public Myclass findOne(String id){\n    try {\n        Myclass m = this.jdbcTemplate.queryForObject(\n                \"SELECT * FROM tb_t WHERE id = ?\",\n                new Object[]{id},\n                new RowMapper&lt;Myclass&gt;() {\n                    public Myclass mapRow(ResultSet rs, int rowNum) throws SQLException {\n                        Myclass m = new Myclass();\n                        m.setName(rs.getString(\"name\"));\n                        return m;\n                    }\n                });\n        return m;\n    } catch (EmptyResultDataAccessException e) { // result.size() == 0;\n        return null;\n    }\n}\n</code></pre>\n\n<p>then you can check: </p>\n\n<pre><code>if(m == null){\n    // insert operation.\n}else{\n    // update operation.\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9959452,"reputation":2037,"user_id":7369238,"display_name":"ABHAY JOHRI"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1510039592,"creation_date":1510039592,"answer_id":47152165,"question_id":10606229,"body_markdown":"We can use query instead of queryForObject,  major difference between query and queryForObject is that query return list of Object(based on Row mapper return type) and that list can be empty if no data is received from database while queryForObject always expect only single object be fetched from db neither null nor multiple rows and in case if result is empty then queryForObject throws EmptyResultDataAccessException, I had written one code using query that will overcome the problem of EmptyResultDataAccessException in case of null result.\r\n\r\n\r\n&gt;     ----------\r\n&gt;     \r\n&gt;     \r\n&gt;     public UserInfo getUserInfo(String username, String password) {\r\n&gt;     \t\tString sql = &quot;SELECT firstname, lastname,address,city FROM users WHERE id=? and pass=?&quot;;\r\n&gt;     \t\tList&lt;UserInfo&gt; userInfoList = jdbcTemplate.query(sql, new Object[] { username, password },\r\n&gt;     \t\t\t\tnew RowMapper&lt;UserInfo&gt;() {\r\n&gt;     \t\t\t\t\tpublic UserInfo mapRow(ResultSet rs, int rowNum) throws SQLException {\r\n&gt;     \t\t\t\t\t\tUserInfo user = new UserInfo();\r\n&gt;     \t\t\t\t\t\tuser.setFirstName(rs.getString(&quot;firstname&quot;));\r\n&gt;     \t\t\t\t\t\tuser.setLastName(rs.getString(&quot;lastname&quot;));\r\n&gt;     \t\t\t\t\t\tuser.setAddress(rs.getString(&quot;address&quot;));\r\n&gt;     \t\t\t\t\t\tuser.setCity(rs.getString(&quot;city&quot;));\r\n&gt;     \r\n&gt;     \t\t\t\t\t\treturn user;\r\n&gt;     \t\t\t\t\t}\r\n&gt;     \t\t\t\t});\r\n&gt;     \r\n&gt;     \t\tif (userInfoList.isEmpty()) {\r\n&gt;     \t\t\treturn null;\r\n&gt;     \t\t} else {\r\n&gt;     \t\t\treturn userInfoList.get(0);\r\n&gt;     \t\t}\r\n&gt;     \t}","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>We can use query instead of queryForObject,  major difference between query and queryForObject is that query return list of Object(based on Row mapper return type) and that list can be empty if no data is received from database while queryForObject always expect only single object be fetched from db neither null nor multiple rows and in case if result is empty then queryForObject throws EmptyResultDataAccessException, I had written one code using query that will overcome the problem of EmptyResultDataAccessException in case of null result.</p>\n\n<blockquote>\n<pre><code>----------\n\n\npublic UserInfo getUserInfo(String username, String password) {\n      String sql = \"SELECT firstname, lastname,address,city FROM users WHERE id=? and pass=?\";\n      List&lt;UserInfo&gt; userInfoList = jdbcTemplate.query(sql, new Object[] { username, password },\n              new RowMapper&lt;UserInfo&gt;() {\n                  public UserInfo mapRow(ResultSet rs, int rowNum) throws SQLException {\n                      UserInfo user = new UserInfo();\n                      user.setFirstName(rs.getString(\"firstname\"));\n                      user.setLastName(rs.getString(\"lastname\"));\n                      user.setAddress(rs.getString(\"address\"));\n                      user.setCity(rs.getString(\"city\"));\n\n                      return user;\n                  }\n              });\n\n      if (userInfoList.isEmpty()) {\n          return null;\n      } else {\n          return userInfoList.get(0);\n      }\n  }\n</code></pre>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":13389989,"reputation":10689,"user_id":9662601,"display_name":"Samuel Philipp"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1566843770,"creation_date":1566843770,"answer_id":57663002,"question_id":10606229,"body_markdown":"Using Java 8 or above you can use an [`Optional`](https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html) and Java Streams.\r\n\r\nSo you can simply use the `JdbcTemplate.queryForList()` method, create a Stream and use [`Stream.findFirst()`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#findFirst--) which will return the first value of the Stream or an empty `Optional`:\r\n\r\n    public Optional&lt;String&gt; test() {\r\n        String sql = &quot;select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN where id_str_rt = &#39;999&#39; and ID_NMB_SRZ = &#39;60230009999999&#39;&quot;;\r\n        return jdbc.queryForList(sql, String.class)\r\n                .stream().findFirst();\r\n    }\r\n\r\nTo improve the performance of the query you can append `LIMIT 1` to your query, so not more than 1 item is transferred from the database.","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>Using Java 8 or above you can use an <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"noreferrer\"><code>Optional</code></a> and Java Streams.</p>\n\n<p>So you can simply use the <code>JdbcTemplate.queryForList()</code> method, create a Stream and use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#findFirst--\" rel=\"noreferrer\"><code>Stream.findFirst()</code></a> which will return the first value of the Stream or an empty <code>Optional</code>:</p>\n\n<pre><code>public Optional&lt;String&gt; test() {\n    String sql = \"select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN where id_str_rt = '999' and ID_NMB_SRZ = '60230009999999'\";\n    return jdbc.queryForList(sql, String.class)\n            .stream().findFirst();\n}\n</code></pre>\n\n<p>To improve the performance of the query you can append <code>LIMIT 1</code> to your query, so not more than 1 item is transferred from the database.</p>\n"},{"tags":[],"owner":{"account_id":171134,"reputation":3434,"user_id":398348,"accept_rate":67,"display_name":"likejudo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579636555,"creation_date":1579630439,"answer_id":59846947,"question_id":10606229,"body_markdown":"IMHO returning a `null` is a bad solution because now you have the problem of sending and interpreting it at the (likely) front end client.\r\nI had the same error and I solved it by simply returning a `List&lt;FooObject&gt;`.\r\nI used `JDBCTemplate.query()`.\r\n\r\nAt the front end (Angular web client), I simply examine the list and if it is empty (of zero length), treat it as no records found.","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>IMHO returning a <code>null</code> is a bad solution because now you have the problem of sending and interpreting it at the (likely) front end client.\nI had the same error and I solved it by simply returning a <code>List&lt;FooObject&gt;</code>.\nI used <code>JDBCTemplate.query()</code>.</p>\n\n<p>At the front end (Angular web client), I simply examine the list and if it is empty (of zero length), treat it as no records found.</p>\n"},{"tags":[],"owner":{"account_id":2054137,"reputation":580,"user_id":1832387,"display_name":"Anton Yuriev"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1600763594,"creation_date":1600763594,"answer_id":64005938,"question_id":10606229,"body_markdown":"You can do this way:\r\n\r\n\r\n    String cert = DataAccessUtils.singleResult(\r\n        jdbcTemplate.queryForList(\r\n            &quot;select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN where ID_STR_RT = :id_str_rt and ID_NMB_SRZ = :id_nmb_srz&quot;,\r\n            new MapSqlParameterSource()\r\n                .addValue(&quot;id_str_rt&quot;, &quot;999&quot;)\r\n                .addValue(&quot;id_nmb_srz&quot;, &quot;60230009999999&quot;),\r\n            String.class\r\n        )\r\n    )\r\n\r\n\r\n**DataAccessUtils.singleResult** + **queryForList**:\r\n- returns null for empty result\r\n- returns single result if exactly 1 row found\r\n- throws exception if more then 1 rows found. Should not happen for primary key / unique index search\r\n\r\n[DataAccessUtils.singleResult][1]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/dao/support/DataAccessUtils.html#singleResult-java.util.Collection-","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>You can do this way:</p>\n<pre><code>String cert = DataAccessUtils.singleResult(\n    jdbcTemplate.queryForList(\n        &quot;select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN where ID_STR_RT = :id_str_rt and ID_NMB_SRZ = :id_nmb_srz&quot;,\n        new MapSqlParameterSource()\n            .addValue(&quot;id_str_rt&quot;, &quot;999&quot;)\n            .addValue(&quot;id_nmb_srz&quot;, &quot;60230009999999&quot;),\n        String.class\n    )\n)\n</code></pre>\n<p><strong>DataAccessUtils.singleResult</strong> + <strong>queryForList</strong>:</p>\n<ul>\n<li>returns null for empty result</li>\n<li>returns single result if exactly 1 row found</li>\n<li>throws exception if more then 1 rows found. Should not happen for primary key / unique index search</li>\n</ul>\n<p><a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/dao/support/DataAccessUtils.html#singleResult-java.util.Collection-\" rel=\"noreferrer\">DataAccessUtils.singleResult</a></p>\n"},{"tags":[],"owner":{"account_id":6010289,"reputation":876,"user_id":4720950,"display_name":"Parameshwar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617292329,"creation_date":1617292329,"answer_id":66907789,"question_id":10606229,"body_markdown":"I got same exception while using \r\n\r\n    if(jdbcTemplate.queryForMap(&quot;select * from table&quot;).size() &gt; 0 ) /* resulted exception */ \r\n\r\nwhen changed to list it resolved\r\n\r\n    if(jdbcTemplate.queryForList(&quot;select * from table&quot;).size() &gt; 0) /* no exception */\r\n\r\n\r\n\r\n  ","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>I got same exception while using</p>\n<pre><code>if(jdbcTemplate.queryForMap(&quot;select * from table&quot;).size() &gt; 0 ) /* resulted exception */ \n</code></pre>\n<p>when changed to list it resolved</p>\n<pre><code>if(jdbcTemplate.queryForList(&quot;select * from table&quot;).size() &gt; 0) /* no exception */\n</code></pre>\n"}],"owner":{"account_id":266102,"reputation":3853,"user_id":553486,"accept_rate":80,"display_name":"Byron"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":324019,"favorite_count":0,"down_vote_count":0,"up_vote_count":129,"accepted_answer_id":10612703,"answer_count":18,"score":129,"last_activity_date":1671254835,"creation_date":1337104557,"question_id":10606229,"body_markdown":"I am using Jdbctemplate to retrieve a single String value from the db.  Here is my method.\r\n\r\n\t\r\n\r\n        public String test() {\r\n        \tString cert=null;\r\n        \tString sql = &quot;select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN \r\n                 where id_str_rt = &#39;999&#39; and ID_NMB_SRZ = &#39;60230009999999&#39;&quot;;\r\n        \tcert = (String) jdbc.queryForObject(sql, String.class); \r\n       \t\treturn cert;\r\n       \t}\r\n\r\nIn my scenario it is complete possible to NOT get a hit on my query so my question is how do I get around the following error message.\r\n\r\n    EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0\r\n\r\nIt would seem to me that I should just get back a null instead of throwing an exception.  How can I fix this?","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>I am using Jdbctemplate to retrieve a single String value from the db.  Here is my method.</p>\n<pre><code>    public String test() {\n        String cert=null;\n        String sql = &quot;select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN \n             where id_str_rt = '999' and ID_NMB_SRZ = '60230009999999'&quot;;\n        cert = (String) jdbc.queryForObject(sql, String.class); \n        return cert;\n    }\n</code></pre>\n<p>In my scenario it is complete possible to NOT get a hit on my query so my question is how do I get around the following error message.</p>\n<pre><code>EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0\n</code></pre>\n<p>It would seem to me that I should just get back a null instead of throwing an exception.  How can I fix this?</p>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":15237737,"reputation":484,"user_id":10994912,"display_name":"George R"},"score":0,"creation_date":1671255675,"post_id":74831744,"comment_id":132065006,"body_markdown":"what happens if use js_ActualFixMessage.get instead of getString?","body":"what happens if use js_ActualFixMessage.get instead of getString?"}],"owner":{"account_id":26233332,"reputation":1,"user_id":19908884,"display_name":"Vipin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671254349,"creation_date":1671250408,"question_id":74831744,"body_markdown":"I have Array of JSON and wanted to print value of tag 20029 as TEST but getting value as [TEST] in array. I just need a string value.\r\n\r\n\r\n&gt; [{&quot;FixJson&quot;:{&quot;11&quot;:&quot;1734&quot;,&quot;12&quot;:&quot;REPOFIXUAT&quot;,&quot;13&quot;:&quot;20140402-11:38:34&quot;,&quot;14&quot;:&quot;TR_VENDOR&quot;,&quot;15&quot;:&quot;8&quot;,&quot;16&quot;:&quot;GBP&quot;,&quot;17&quot;:&quot;Price&quot;,&quot;20029&quot;:&quot;TEST&quot;,&quot;8&quot;:&quot;FIXT.1.1&quot;,&quot;9&quot;:&quot;449&quot;,&quot;10&quot;:&quot;AE&quot;}}]\r\n\r\nCode:\r\n\r\n    public void fixtoJSON() throws SerializeException, JsonProcessingException, ParseException {\r\n    \t    \r\n    \t\tList&lt;HashMap&lt;String,Object&gt;&gt; list = new ArrayList&lt;HashMap&lt;String, Object&gt;&gt;();\r\n    \t\tmap = new HashMap&lt;String, Object&gt;();\r\n    \t\tmap1 = new HashMap&lt;String,Object&gt;();\r\n    \t\t\r\n    \t\tresult = fixmessage.split(&quot;\\\\|&quot;);\r\n    \t\t\r\n        \t// iterate the result and add them to a HashMap \r\n            for (String fixoutcome : result) { \r\n            \t\r\n                String[] fix1 = fixoutcome.split(&quot;=&quot;); \r\n                //System.out.println(&quot; this is fix1 &quot;+fix1);\r\n                \r\n                String key = fix1[0].trim().toString(); \r\n                String value = fix1[1].trim().toString(); \r\n                map.put(key, value);\r\n                \r\n               \r\n            }\r\n    \t        map1.put(&quot;FixJson&quot;, map);\r\n    \t   \t \tlist.add(map1);\r\n            \t \r\n                ObjectMapper mapper = new ObjectMapper();\r\n                jsonstring =  mapper.writeValueAsString(list);\r\n                                      \r\n                js_ActualFixMessage = new JsonPath(jsonstring);\r\n                \r\n                System.out.println(js_ActualFixMessage.getString(&quot;FixJson.20029&quot;));\r\n\r\nExpected Outcome \r\n`TEST`\r\n\r\nBut getting as `[TEST]`\r\n\r\nany help please !\r\n","title":"print json array value as string using java","body":"<p>I have Array of JSON and wanted to print value of tag 20029 as TEST but getting value as [TEST] in array. I just need a string value.</p>\n<blockquote>\n<p>[{&quot;FixJson&quot;:{&quot;11&quot;:&quot;1734&quot;,&quot;12&quot;:&quot;REPOFIXUAT&quot;,&quot;13&quot;:&quot;20140402-11:38:34&quot;,&quot;14&quot;:&quot;TR_VENDOR&quot;,&quot;15&quot;:&quot;8&quot;,&quot;16&quot;:&quot;GBP&quot;,&quot;17&quot;:&quot;Price&quot;,&quot;20029&quot;:&quot;TEST&quot;,&quot;8&quot;:&quot;FIXT.1.1&quot;,&quot;9&quot;:&quot;449&quot;,&quot;10&quot;:&quot;AE&quot;}}]</p>\n</blockquote>\n<p>Code:</p>\n<pre><code>public void fixtoJSON() throws SerializeException, JsonProcessingException, ParseException {\n        \n        List&lt;HashMap&lt;String,Object&gt;&gt; list = new ArrayList&lt;HashMap&lt;String, Object&gt;&gt;();\n        map = new HashMap&lt;String, Object&gt;();\n        map1 = new HashMap&lt;String,Object&gt;();\n        \n        result = fixmessage.split(&quot;\\\\|&quot;);\n        \n        // iterate the result and add them to a HashMap \n        for (String fixoutcome : result) { \n            \n            String[] fix1 = fixoutcome.split(&quot;=&quot;); \n            //System.out.println(&quot; this is fix1 &quot;+fix1);\n            \n            String key = fix1[0].trim().toString(); \n            String value = fix1[1].trim().toString(); \n            map.put(key, value);\n            \n           \n        }\n            map1.put(&quot;FixJson&quot;, map);\n            list.add(map1);\n             \n            ObjectMapper mapper = new ObjectMapper();\n            jsonstring =  mapper.writeValueAsString(list);\n                                  \n            js_ActualFixMessage = new JsonPath(jsonstring);\n            \n            System.out.println(js_ActualFixMessage.getString(&quot;FixJson.20029&quot;));\n</code></pre>\n<p>Expected Outcome\n<code>TEST</code></p>\n<p>But getting as <code>[TEST]</code></p>\n<p>any help please !</p>\n"},{"tags":["java","cdi","maven-dependency"],"comments":[{"owner":{"account_id":5660163,"reputation":12260,"user_id":4478047,"display_name":"Kukeltje"},"score":0,"creation_date":1587374452,"post_id":61316069,"comment_id":108476574,"body_markdown":"Out of curiosity, what did you try in search engines? And the javaee-api should have it, so most likely you have other problems.","body":"Out of curiosity, what did you try in search engines? And the javaee-api should have it, so most likely you have other problems."},{"owner":{"account_id":4904476,"reputation":4812,"user_id":3951576,"accept_rate":50,"display_name":"eastwater"},"score":0,"creation_date":1587422046,"post_id":61316069,"comment_id":108501455,"body_markdown":"&#39;javax.inject:javax.inject:1&#39; is required to resolve @Inject. If it is removed, compiler error.","body":"&#39;javax.inject:javax.inject:1&#39; is required to resolve @Inject. If it is removed, compiler error."}],"answers":[{"tags":[],"owner":{"account_id":6325048,"reputation":3074,"user_id":4911775,"display_name":"CodeScale"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1587363563,"creation_date":1587363563,"answer_id":61316207,"question_id":61316069,"body_markdown":"You can configure CDI in standalone mode by using `Weld` reference implementation.\r\n\r\nExample:\r\n\r\n```java\r\nWeld weld = new Weld();\r\nWeldContainer container = weld.initialize();\r\nFooProcessor fooProcessor = container.instance().select(FooProcessor.class).get();\r\nweld.shutdown();\r\n```\r\nand weld dependency\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.jboss.weld.se&lt;/groupId&gt;\r\n    &lt;artifactId&gt;weld-se-core&lt;/artifactId&gt;\r\n    &lt;version&gt;3.1.4.Final&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nRegarding `@Inject` it coming from \r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;javax.inject&lt;/groupId&gt;\r\n    &lt;artifactId&gt;javax.inject&lt;/artifactId&gt;\r\n    &lt;version&gt;1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nand this coming from `JSR 330: Dependency Injection For Java` that introduces a standard set of annotations that can be used for dependency injection.\r\n\r\n","title":"Java SE CDI maven dependencies?","body":"<p>You can configure CDI in standalone mode by using <code>Weld</code> reference implementation.</p>\n\n<p>Example:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Weld weld = new Weld();\nWeldContainer container = weld.initialize();\nFooProcessor fooProcessor = container.instance().select(FooProcessor.class).get();\nweld.shutdown();\n</code></pre>\n\n<p>and weld dependency</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.jboss.weld.se&lt;/groupId&gt;\n    &lt;artifactId&gt;weld-se-core&lt;/artifactId&gt;\n    &lt;version&gt;3.1.4.Final&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Regarding <code>@Inject</code> it coming from </p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax.inject&lt;/groupId&gt;\n    &lt;artifactId&gt;javax.inject&lt;/artifactId&gt;\n    &lt;version&gt;1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>and this coming from <code>JSR 330: Dependency Injection For Java</code> that introduces a standard set of annotations that can be used for dependency injection.</p>\n"},{"tags":[],"owner":{"account_id":2253730,"reputation":51,"user_id":1985403,"display_name":"KDV"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671252529,"creation_date":1671252223,"answer_id":74831854,"question_id":61316069,"body_markdown":"nowadays the annotation(s) mostly can come from &#39;javax.inject&#39; and &#39;jakarta.inject&#39; packages.\r\n\r\nwhen starting sample within e.g. Weld 5.1.0 it is &#39;jakarta.inject&#39;, bundled into Weld itself\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.jboss.weld.se&lt;/groupId&gt;\r\n    &lt;artifactId&gt;weld-se-shaded&lt;/artifactId&gt;\r\n    &lt;version&gt;5.1.0.Final&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nalso you NEED your class to be annotated with e.g. &#39;@ApplicationScoped&#39; - to be recognized by Weld as Weld-managed bean, and you NEED beans.xml\r\n(can set only &#39;bean-discovery-mode&#39; value and define no beans, btw):\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;beans xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; bean-discovery-mode=&quot;annotated&quot;/&gt;\r\n```\r\n... in /META-INF of your classpath for Weld to init successfully.\r\n\r\nthis is enough to make the sample take off. you can optionally add\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.smallrye&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jandex&lt;/artifactId&gt;\r\n    &lt;version&gt;3.0.5&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n... for your Weld to start up (a little) faster.\r\n\r\np.s. and forget about ```@Inject static Logger log``` with Weld - even if strongly used in SE context, Weld(5.1.0) DOESN&#39;T support it.","title":"Java SE CDI maven dependencies?","body":"<p>nowadays the annotation(s) mostly can come from 'javax.inject' and 'jakarta.inject' packages.</p>\n<p>when starting sample within e.g. Weld 5.1.0 it is 'jakarta.inject', bundled into Weld itself</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.jboss.weld.se&lt;/groupId&gt;\n    &lt;artifactId&gt;weld-se-shaded&lt;/artifactId&gt;\n    &lt;version&gt;5.1.0.Final&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>also you NEED your class to be annotated with e.g. '@ApplicationScoped' - to be recognized by Weld as Weld-managed bean, and you NEED beans.xml\n(can set only 'bean-discovery-mode' value and define no beans, btw):</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; bean-discovery-mode=&quot;annotated&quot;/&gt;\n</code></pre>\n<p>... in /META-INF of your classpath for Weld to init successfully.</p>\n<p>this is enough to make the sample take off. you can optionally add</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.smallrye&lt;/groupId&gt;\n    &lt;artifactId&gt;jandex&lt;/artifactId&gt;\n    &lt;version&gt;3.0.5&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>... for your Weld to start up (a little) faster.</p>\n<p>p.s. and forget about <code>@Inject static Logger log</code> with Weld - even if strongly used in SE context, Weld(5.1.0) DOESN'T support it.</p>\n"}],"owner":{"account_id":4904476,"reputation":4812,"user_id":3951576,"accept_rate":50,"display_name":"eastwater"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":958,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":61316207,"answer_count":2,"score":0,"last_activity_date":1671252529,"creation_date":1587362845,"question_id":61316069,"body_markdown":"Java SE CDI maven dependencies?\r\n\r\n    public class FooProcessor {\r\n    \t\r\n    \tprivate FooService fooService;\r\n    \t\r\n    \t@Inject\r\n    \tpublic FooProcessor(FooService fooService) {\r\n    \t\tthis.fooService = fooService;\r\n    \t}\r\n    }\r\n\r\nWhat are the jar dependencies for CDI for Java SE?\r\n\r\nWhich jar dependency has @Inject? Tried \r\n\r\n\r\n    compile &quot;org.jboss.weld.se:weld-se-core:3.0.2.Final&quot;\r\n    compile &#39;org.apache.deltaspike.cdictrl:deltaspike-cdictrl-api&#39;\r\n    compile group: &#39;javax.enterprise&#39;, name: &#39;cdi-api&#39;, version: &#39;2.0.SP1&#39;\r\n    compile group: &#39;javax&#39;, name: &#39;javaee-api&#39;, version: &#39;7.0&#39;","title":"Java SE CDI maven dependencies?","body":"<p>Java SE CDI maven dependencies?</p>\n\n<pre><code>public class FooProcessor {\n\n    private FooService fooService;\n\n    @Inject\n    public FooProcessor(FooService fooService) {\n        this.fooService = fooService;\n    }\n}\n</code></pre>\n\n<p>What are the jar dependencies for CDI for Java SE?</p>\n\n<p>Which jar dependency has @Inject? Tried </p>\n\n<pre><code>compile \"org.jboss.weld.se:weld-se-core:3.0.2.Final\"\ncompile 'org.apache.deltaspike.cdictrl:deltaspike-cdictrl-api'\ncompile group: 'javax.enterprise', name: 'cdi-api', version: '2.0.SP1'\ncompile group: 'javax', name: 'javaee-api', version: '7.0'\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-webflux","lombok"],"answers":[{"tags":[],"owner":{"account_id":6710900,"reputation":1617,"user_id":5174385,"display_name":"Ankit Rai"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1624133161,"creation_date":1624133161,"answer_id":68050350,"question_id":68049222,"body_markdown":"This is not because of Lombok. Spring injects dependencies when they exist within the application context. Spring will create instances only when they are annotated with Spring stereotypes or are created via `@Bean` annotation or are part of Auto-Configuration. The `Webclient` instance needs to exist within the application context to be injected. \r\n\r\nTo inject `WebClient` you can create the same as below in your configuration class.\r\n\r\n```\r\n@Configuration\r\npublic class Config {\r\n\r\n    @Bean\r\n    public WebClient webClient(){\r\n        return WebClient.builder().build();\r\n    }\r\n}\r\n```\r\n\r\n\r\n","title":"Can Lombok&#39;s @RequiredArgsConstructor initialize a Spring-Webflux WebClient?","body":"<p>This is not because of Lombok. Spring injects dependencies when they exist within the application context. Spring will create instances only when they are annotated with Spring stereotypes or are created via <code>@Bean</code> annotation or are part of Auto-Configuration. The <code>Webclient</code> instance needs to exist within the application context to be injected.</p>\n<p>To inject <code>WebClient</code> you can create the same as below in your configuration class.</p>\n<pre><code>@Configuration\npublic class Config {\n\n    @Bean\n    public WebClient webClient(){\n        return WebClient.builder().build();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":428762,"reputation":1481,"user_id":811293,"accept_rate":30,"display_name":"joseluisbz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671252417,"creation_date":1671252417,"answer_id":74831863,"question_id":68049222,"body_markdown":"for me, previous response wasn&#39;t working, but is base for my response.\r\n\r\n\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.web.reactive.function.client.WebClient;\r\n    \r\n    @Configuration\r\n    public class WebClientConfiguration {\r\n        \r\n        @Bean\r\n        public WebClient webClient(WebClient.Builder webClientBuilder){\r\n            return webClientBuilder.build();\r\n        }\r\n    }","title":"Can Lombok&#39;s @RequiredArgsConstructor initialize a Spring-Webflux WebClient?","body":"<p>for me, previous response wasn't working, but is base for my response.</p>\n<pre><code>import org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.reactive.function.client.WebClient;\n\n@Configuration\npublic class WebClientConfiguration {\n    \n    @Bean\n    public WebClient webClient(WebClient.Builder webClientBuilder){\n        return webClientBuilder.build();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":15424529,"reputation":474,"user_id":11127623,"display_name":"Guilty"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1362,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":68050350,"answer_count":2,"score":0,"last_activity_date":1671252417,"creation_date":1624123397,"question_id":68049222,"body_markdown":"I have a controller class with a `private final WebClient webClient`.\r\nWhile the rest of the private final fields can be initialized with the @RequiredArgsConstructor provided by Lombok. A Spring-Webflux WebClient object seems to only be able to be initialized like this: `this.webClient = WebClientBuilder.build()` and thus the lombok generated constructor doesn&#39;t work.  \r\nIs there a way around this?\r\n\r\nSample code:\r\n```\r\n@RequiredArgsConstructor\r\n@Controller\r\npublic class SomeController {\r\n  private final SomeService someService;\r\n\r\n  private final SomeConfig someConfig;\r\n\r\n  private final SomeOtherConfig someOtherConfig;\r\n\r\n  private final WebClient webClient;\r\n\r\n  // etc.\r\n}\r\n```","title":"Can Lombok&#39;s @RequiredArgsConstructor initialize a Spring-Webflux WebClient?","body":"<p>I have a controller class with a <code>private final WebClient webClient</code>.\nWhile the rest of the private final fields can be initialized with the @RequiredArgsConstructor provided by Lombok. A Spring-Webflux WebClient object seems to only be able to be initialized like this: <code>this.webClient = WebClientBuilder.build()</code> and thus the lombok generated constructor doesn't work.<br />\nIs there a way around this?</p>\n<p>Sample code:</p>\n<pre><code>@RequiredArgsConstructor\n@Controller\npublic class SomeController {\n  private final SomeService someService;\n\n  private final SomeConfig someConfig;\n\n  private final SomeOtherConfig someOtherConfig;\n\n  private final WebClient webClient;\n\n  // etc.\n}\n</code></pre>\n"},{"tags":["java","android","kotlin","p2p","wifi-direct"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1671221401,"post_id":74828523,"comment_id":132060513,"body_markdown":"Being a receiver or sender does not depend on being group owner or not. Both can send an receive. They can communicate. So i do not understand why you would change groupowner or else. Well just my thoughts.","body":"Being a receiver or sender does not depend on being group owner or not. Both can send an receive. They can communicate. So i do not understand why you would change groupowner or else. Well just my thoughts."},{"owner":{"account_id":27275499,"reputation":11,"user_id":20796190,"display_name":"Bebikananda Waikhom"},"score":0,"creation_date":1671250938,"post_id":74828523,"comment_id":132064584,"body_markdown":"I was following this documentation (https://developer.android.com/training/connect-devices-wirelessly/wifi-direct). Here, files are transferred by using Socket.\n\nAfter the device connection, only the group owner&#39;s address is available on both devices, so I make that a receiver so that the sender can create a Socket object and send the files to that address.\n\nI have added a few more codes, please check. And if you know of any other approach I can follow, please let me know.","body":"I was following this documentation (<a href=\"https://developer.android.com/training/connect-devices-wirelessly/wifi-direct\" rel=\"nofollow noreferrer\">developer.android.com/training/connect-devices-wirelessly/&hellip;</a>&zwnj;&#8203;). Here, files are transferred by using Socket.  After the device connection, only the group owner&#39;s address is available on both devices, so I make that a receiver so that the sender can create a Socket object and send the files to that address.  I have added a few more codes, please check. And if you know of any other approach I can follow, please let me know."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1671261867,"post_id":74828523,"comment_id":132065652,"body_markdown":"A server socket can send and receive data. A client socket can send and receive data. Dont say: i make that one a receiver as both socket types can send and receive. You only can say: i make that one the server and that one the client.","body":"A server socket can send and receive data. A client socket can send and receive data. Dont say: i make that one a receiver as both socket types can send and receive. You only can say: i make that one the server and that one the client."},{"owner":{"account_id":27275499,"reputation":11,"user_id":20796190,"display_name":"Bebikananda Waikhom"},"score":1,"creation_date":1671305665,"post_id":74828523,"comment_id":132072751,"body_markdown":"Right. I wasn&#39;t aware of this. I thought one has to be the sender and the other one has to be the receiver. I&#39;m able to fix it now. Thanks for the help &#128522;.","body":"Right. I wasn&#39;t aware of this. I thought one has to be the sender and the other one has to be the receiver. I&#39;m able to fix it now. Thanks for the help 😊."},{"owner":{"account_id":3243794,"reputation":4776,"user_id":2736039,"accept_rate":93,"display_name":"Ultimo_m"},"score":0,"creation_date":1673625698,"post_id":74828523,"comment_id":132548426,"body_markdown":"I dont know what you want to achieve, but even if you solve it, wi-fi direct is not stable across different android devices, I would suggest using Wi-Fi hotspot or Wi-Fi router, keep in mind android devices have a limit on how many devices can connect to their hotspot at same time","body":"I dont know what you want to achieve, but even if you solve it, wi-fi direct is not stable across different android devices, I would suggest using Wi-Fi hotspot or Wi-Fi router, keep in mind android devices have a limit on how many devices can connect to their hotspot at same time"}],"owner":{"account_id":27275499,"reputation":11,"user_id":20796190,"display_name":"Bebikananda Waikhom"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":217,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671250907,"creation_date":1671215689,"question_id":74828523,"body_markdown":"I am developing an Android app to share files using Wi-Fi Direct. The app works, but I am unable to switch between being a sender and a receiver without closing the app. When I try to switch roles, the group owner is not updated and remains the same as the previous transfer. How can I update the group owner and switch roles correctly?\r\n\r\nI do disconnect and reinitialize after every file transfer session. But it doesn&#39;t create a new group.\r\n\r\nHere is my initialization code:\r\n\r\n\r\n```\r\nmanager = getSystemService(Context.WIFI_P2P_SERVICE) as WifiP2pManager?\r\nchannel = manager?.initialize(this, mainLooper, null)?.also {\r\n     receiver = P2pBroadcastReceiver(this)\r\n}\r\n\r\n```\r\n\r\nAnd here is the code for connecting to a peer and switching roles:\r\n\r\n\r\n```\r\nfun connectToPeer(device: WifiP2pDevice, isSender: Boolean) {\r\n    val config = WifiP2pConfig().apply {\r\n        deviceAddress = device.deviceAddress\r\n        groupOwnerIntent = if (isSender) WifiP2pConfig.GROUP_OWNER_INTENT_MIN else WifiP2pConfig.GROUP_OWNER_INTENT_MAX\r\n    }\r\n        \r\n    channel?.also { channel -&gt;\r\n        manager?.connect(channel, config, object : WifiP2pManager.ActionListener {\r\n            override fun onSuccess() {\r\n                context.apply {\r\n                    toast(&quot;${getString(R.string.connecting_to)} ${device.deviceName}&quot;)\r\n                }\r\n            }\r\n\r\n            override fun onFailure(reasonCode: Int) = onP2POperationFailed(reasonCode)\r\n        })\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nAnd here is the code for disconnecting from the group:\r\n\r\n\r\n```\r\nfun disconnect() {\r\n    manager?.apply {\r\n        cancelConnect(channel, null)\r\n        removeGroup(channel, null)\r\n        stopPeerDiscovery(channel, null)\r\n        deletePersistentGroups()\r\n    }\r\n    try {\r\n        if (::serverSocket.isInitialized) serverSocket.close()\r\n        if (::clientSocket.isInitialized) clientSocket.close()\r\n    } catch (e: IOException) {}\r\n}\r\n\r\nprivate fun deletePersistentGroups() {\r\n    try {\r\n        val methods = WifiP2pManager::class.java.methods\r\n        for (method in methods) {\r\n            if (method.name == &quot;deletePersistentGroup&quot;) {\r\n                for (networkId in 0..31) {\r\n                    method.invoke(manager, channel, networkId, null)\r\n                }\r\n            }\r\n        }\r\n    } catch (e: Exception) {}\r\n}\r\n\r\n```\r\n\r\nAny help would be greatly appreciated. Thank you!\r\n\r\nI would like for devices d1 and d2 to have the ability to switch roles without closing the app. Currently, d1 is set up to receive files and d2 is set up to send them. However, if d1 needs to send files without closing the app after d2 has finished sending its files, I would like for them to be able to easily reestablish the connection and initiate the transfer.\r\n\r\n**Edit 2:**\r\n\r\nHow I initiate the file transferring or sending process:\r\n\r\n```\r\nprivate fun onConnectionInfoChanged(info: WifiP2pInfo?) {\r\n    if (isDeviceConnected) {\r\n        if (info!!.isGroupOwner) { // receiver || server || group owner\r\n            startReceiverServer()\r\n        } else { // sender || client\r\n            startSenderClient(info.groupOwnerAddress)\r\n        }\r\n    }\r\n}\r\n\r\nprivate fun startReceiverServer() {\r\n    runOnBg {\r\n        serverSocket = ServerSocket(P2pFileTransferHelper.PORT)\r\n        P2pFileTransferHelper.receiveFiles(serverSocket, context.contentResolver) { fileTransferInfoLiveData.postValue(it) }\r\n    }\r\n}\r\n\r\nprivate fun startSenderClient(serverAddress: InetAddress) {\r\n    runOnBg {\r\n        clientSocket = Socket()\r\n        P2pFileTransferHelper.sendFiles(clientSocket, serverAddress, selectedFilePaths) { fileTransferInfoLiveData.postValue(it) }\r\n    }\r\n}\r\n```","title":"Switching between sender and receiver in Android Wi-Fi Direct app","body":"<p>I am developing an Android app to share files using Wi-Fi Direct. The app works, but I am unable to switch between being a sender and a receiver without closing the app. When I try to switch roles, the group owner is not updated and remains the same as the previous transfer. How can I update the group owner and switch roles correctly?</p>\n<p>I do disconnect and reinitialize after every file transfer session. But it doesn't create a new group.</p>\n<p>Here is my initialization code:</p>\n<pre><code>manager = getSystemService(Context.WIFI_P2P_SERVICE) as WifiP2pManager?\nchannel = manager?.initialize(this, mainLooper, null)?.also {\n     receiver = P2pBroadcastReceiver(this)\n}\n\n</code></pre>\n<p>And here is the code for connecting to a peer and switching roles:</p>\n<pre><code>fun connectToPeer(device: WifiP2pDevice, isSender: Boolean) {\n    val config = WifiP2pConfig().apply {\n        deviceAddress = device.deviceAddress\n        groupOwnerIntent = if (isSender) WifiP2pConfig.GROUP_OWNER_INTENT_MIN else WifiP2pConfig.GROUP_OWNER_INTENT_MAX\n    }\n        \n    channel?.also { channel -&gt;\n        manager?.connect(channel, config, object : WifiP2pManager.ActionListener {\n            override fun onSuccess() {\n                context.apply {\n                    toast(&quot;${getString(R.string.connecting_to)} ${device.deviceName}&quot;)\n                }\n            }\n\n            override fun onFailure(reasonCode: Int) = onP2POperationFailed(reasonCode)\n        })\n    }\n}\n\n</code></pre>\n<p>And here is the code for disconnecting from the group:</p>\n<pre><code>fun disconnect() {\n    manager?.apply {\n        cancelConnect(channel, null)\n        removeGroup(channel, null)\n        stopPeerDiscovery(channel, null)\n        deletePersistentGroups()\n    }\n    try {\n        if (::serverSocket.isInitialized) serverSocket.close()\n        if (::clientSocket.isInitialized) clientSocket.close()\n    } catch (e: IOException) {}\n}\n\nprivate fun deletePersistentGroups() {\n    try {\n        val methods = WifiP2pManager::class.java.methods\n        for (method in methods) {\n            if (method.name == &quot;deletePersistentGroup&quot;) {\n                for (networkId in 0..31) {\n                    method.invoke(manager, channel, networkId, null)\n                }\n            }\n        }\n    } catch (e: Exception) {}\n}\n\n</code></pre>\n<p>Any help would be greatly appreciated. Thank you!</p>\n<p>I would like for devices d1 and d2 to have the ability to switch roles without closing the app. Currently, d1 is set up to receive files and d2 is set up to send them. However, if d1 needs to send files without closing the app after d2 has finished sending its files, I would like for them to be able to easily reestablish the connection and initiate the transfer.</p>\n<p><strong>Edit 2:</strong></p>\n<p>How I initiate the file transferring or sending process:</p>\n<pre><code>private fun onConnectionInfoChanged(info: WifiP2pInfo?) {\n    if (isDeviceConnected) {\n        if (info!!.isGroupOwner) { // receiver || server || group owner\n            startReceiverServer()\n        } else { // sender || client\n            startSenderClient(info.groupOwnerAddress)\n        }\n    }\n}\n\nprivate fun startReceiverServer() {\n    runOnBg {\n        serverSocket = ServerSocket(P2pFileTransferHelper.PORT)\n        P2pFileTransferHelper.receiveFiles(serverSocket, context.contentResolver) { fileTransferInfoLiveData.postValue(it) }\n    }\n}\n\nprivate fun startSenderClient(serverAddress: InetAddress) {\n    runOnBg {\n        clientSocket = Socket()\n        P2pFileTransferHelper.sendFiles(clientSocket, serverAddress, selectedFilePaths) { fileTransferInfoLiveData.postValue(it) }\n    }\n}\n</code></pre>\n"},{"tags":["java","performance","sorting","testing"],"answers":[{"tags":[],"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1590533316,"creation_date":1590533149,"answer_id":62032609,"question_id":62032327,"body_markdown":"Using a loop is brute-force, and challenges like this cannot be done with brute-force.\r\n\r\nWhich means you have to **calculate** the result. Challenges like this are more often a *math* question more than a *programming* question, so put you math hat on.\r\n\r\nSo think about it. In a range of integers, *calculate* how many are divisible by K. If I asked you to do this manually *(using a simple calculator is allowed)*, without using a computer to brute-force it, how would you doing it? E.g. find how many integers between `111` and `999` that are divisible by `13`\r\n\r\n*Hint*\r\n\r\nFind the first number in the range that is divisible by K, and the last number in the range that is divisible by K. For the example above, that would be `117` and `988`.\r\n\r\nNow calculate how many integers are divisible by K from first to last integer, remembering to count both of them. So, how many integers between `117` and `988` are divisible by `13`?\r\n\r\n&gt;! Answer: (988 - 117) / 13 + 1 = 871 / 13 + 1 = 67 + 1 = **68**","title":"Performance issue with CountDiv (Codility) challenge algorithm","body":"<p>Using a loop is brute-force, and challenges like this cannot be done with brute-force.</p>\n\n<p>Which means you have to <strong>calculate</strong> the result. Challenges like this are more often a <em>math</em> question more than a <em>programming</em> question, so put you math hat on.</p>\n\n<p>So think about it. In a range of integers, <em>calculate</em> how many are divisible by K. If I asked you to do this manually <em>(using a simple calculator is allowed)</em>, without using a computer to brute-force it, how would you doing it? E.g. find how many integers between <code>111</code> and <code>999</code> that are divisible by <code>13</code></p>\n\n<p><em>Hint</em></p>\n\n<p>Find the first number in the range that is divisible by K, and the last number in the range that is divisible by K. For the example above, that would be <code>117</code> and <code>988</code>.</p>\n\n<p>Now calculate how many integers are divisible by K from first to last integer, remembering to count both of them. So, how many integers between <code>117</code> and <code>988</code> are divisible by <code>13</code>?</p>\n\n<blockquote class=\"spoiler\">\n  <p> Answer: (988 - 117) / 13 + 1 = 871 / 13 + 1 = 67 + 1 = <strong>68</strong></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1590594246,"creation_date":1590591089,"answer_id":62046069,"question_id":62032327,"body_markdown":"One possibility is to take advantage of integer arithmetic to get rid of some edge cases.  Sometimes `A` and `B` are both, neither, or one or the other is divisible by `k`.  And just subtracting them won&#39;t really help solve the problem. So one solution is to divide each by `k` before subtracting them.\r\n\r\nSay `k = 7, A = 12, and B = 54`.\r\n`54/7 - 12/7 = 7 - 1 = 6  (14,21,28,35,42,49)`\r\n\r\nBut what if `A` was `14`?\r\n\r\n`54/7 - 14/7 = 7 - 2 = 5  (14,21,28,35,42,49)`  The answer is one off. So when `A` is divisible by `k`, `1` needs to be added.\r\n\r\nWhat if `A` and `B` are both divisible by `k`?\r\n\r\n`56/7 - 14/7 = 8 - 2 = 6 = (14,21,28,34,42,49,56)`.  The answer is again, one off, so the special case of `A` being divisible by `k` takes care of it by adding `1`\r\n\r\n```\r\nint result = (B/k - A/k) + ((A%k == 0) ? 1 : 0);\r\n\r\n","title":"Performance issue with CountDiv (Codility) challenge algorithm","body":"<p>One possibility is to take advantage of integer arithmetic to get rid of some edge cases.  Sometimes <code>A</code> and <code>B</code> are both, neither, or one or the other is divisible by <code>k</code>.  And just subtracting them won't really help solve the problem. So one solution is to divide each by <code>k</code> before subtracting them.</p>\n\n<p>Say <code>k = 7, A = 12, and B = 54</code>.\n<code>54/7 - 12/7 = 7 - 1 = 6  (14,21,28,35,42,49)</code></p>\n\n<p>But what if <code>A</code> was <code>14</code>?</p>\n\n<p><code>54/7 - 14/7 = 7 - 2 = 5  (14,21,28,35,42,49)</code>  The answer is one off. So when <code>A</code> is divisible by <code>k</code>, <code>1</code> needs to be added.</p>\n\n<p>What if <code>A</code> and <code>B</code> are both divisible by <code>k</code>?</p>\n\n<p><code>56/7 - 14/7 = 8 - 2 = 6 = (14,21,28,34,42,49,56)</code>.  The answer is again, one off, so the special case of <code>A</code> being divisible by <code>k</code> takes care of it by adding <code>1</code></p>\n\n<pre><code>int result = (B/k - A/k) + ((A%k == 0) ? 1 : 0);\n\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4234641,"reputation":613,"user_id":3466155,"display_name":"Karl Hoaglund"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637598366,"creation_date":1637598027,"answer_id":70069040,"question_id":62032327,"body_markdown":"My C# solution, based on @Andreas&#39; brilliant one.  This eventually got me to 100%.  Most surprising (and perhaps wrong?) is that [0, 0, 11] needs to produce a result of 1, meaning that 0 is considered divisible by 11.  You&#39;ll see I had to comment out an error catcher to allow B to be zero and get me to the &quot;expected&quot; answer.  I was surprised that (0-0)/11 didn&#39;t produce a runtime error, but it didn&#39;t.\r\n\r\n        public int solutionCountDiv4(int A, int B, int K)\r\n        {\r\n            //Errors\r\n            if (K == 0)\r\n                return 0;\r\n\r\n            //if (B == 0)\r\n            //    return 0;\r\n\r\n            if (A &gt; B)\r\n                return 0;\r\n\r\n            var first = 0;\r\n            var last = 0;\r\n\r\n            for (first = A; first &lt;= B; first++)\r\n            {\r\n                if (first % K == 0)\r\n                    break;\r\n            }\r\n            for (last = B; last &gt;= A; last--)\r\n            {\r\n                if (last % K == 0)\r\n                    break;\r\n            }\r\n\r\n            if (first &gt; last)\r\n                return 0;\r\n\r\n            var result = (last - first) / K + 1;\r\n            return result;\r\n        }\r\n\r\n\r\n\r\n  ","title":"Performance issue with CountDiv (Codility) challenge algorithm","body":"<p>My C# solution, based on @Andreas' brilliant one.  This eventually got me to 100%.  Most surprising (and perhaps wrong?) is that [0, 0, 11] needs to produce a result of 1, meaning that 0 is considered divisible by 11.  You'll see I had to comment out an error catcher to allow B to be zero and get me to the &quot;expected&quot; answer.  I was surprised that (0-0)/11 didn't produce a runtime error, but it didn't.</p>\n<pre><code>    public int solutionCountDiv4(int A, int B, int K)\n    {\n        //Errors\n        if (K == 0)\n            return 0;\n\n        //if (B == 0)\n        //    return 0;\n\n        if (A &gt; B)\n            return 0;\n\n        var first = 0;\n        var last = 0;\n\n        for (first = A; first &lt;= B; first++)\n        {\n            if (first % K == 0)\n                break;\n        }\n        for (last = B; last &gt;= A; last--)\n        {\n            if (last % K == 0)\n                break;\n        }\n\n        if (first &gt; last)\n            return 0;\n\n        var result = (last - first) / K + 1;\n        return result;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10528983,"reputation":1,"user_id":7759044,"display_name":"TGA"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671250422,"creation_date":1671250422,"answer_id":74831747,"question_id":62032327,"body_markdown":"Small correction to @[Ersin&#39;s solution][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/72296476/7759044\r\n\r\n    int solution(int A, int B, int K)\r\n    {\r\n      auto result =  B / K - (A - 1) / K;\r\n      if (A == 0 and K &gt; 1)\r\n        result++;\r\n      return result;\r\n    }","title":"Performance issue with CountDiv (Codility) challenge algorithm","body":"<p>Small correction to @<a href=\"https://stackoverflow.com/a/72296476/7759044\">Ersin's solution</a></p>\n<pre><code>int solution(int A, int B, int K)\n{\n  auto result =  B / K - (A - 1) / K;\n  if (A == 0 and K &gt; 1)\n    result++;\n  return result;\n}\n</code></pre>\n"}],"owner":{"account_id":18001860,"reputation":293,"user_id":13499542,"display_name":"Gabriel Pulga"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1068,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":62032609,"answer_count":4,"score":2,"last_activity_date":1671250422,"creation_date":1590531497,"question_id":62032327,"body_markdown":"Needing some help with the algorithm i made to solve this codility challenge :\r\n\r\n*Write a function that, given three integers A, B and K, returns the number of integers within the range [A..B] that are divisible by K. \r\nFor example, for A = 6, B = 11 and K = 2, your function should return 3, because there are three numbers divisible by 2 within the range [6..11], namely 6, 8 and 10.   \r\nA and B are integers within the range [0..2,000,000,000];\r\nK is an integer within the range [1..2,000,000,000];\r\nA ≤ B.*\r\n \r\n\r\n    public class Solution {\r\n            public int solution(int A, int B, int K) {\r\n        \r\n                int counter = 0;\r\n                ArrayList&lt;Integer&gt; listOfNumbersInBetween = new ArrayList&lt;&gt;();\r\n        \r\n                for (int i = A; i &lt;= B; i++) {\r\n                    listOfNumbersInBetween.add(i);\r\n                }\r\n        \r\n                for (int arrayElement : listOfNumbersInBetween) {\r\n                    if (arrayElement % K == 0) {\r\n                        counter++;\r\n                    }\r\n                }\r\n        \r\n                return counter;\r\n        \r\n            }}\r\n\r\nAs you can see, my solution works perfectly but performance wise it&#39;s scoring 0% due to the time complexity O(B-A).\r\n\r\nHow can i improve this code to make it score 100%?","title":"Performance issue with CountDiv (Codility) challenge algorithm","body":"<p>Needing some help with the algorithm i made to solve this codility challenge :</p>\n\n<p><em>Write a function that, given three integers A, B and K, returns the number of integers within the range [A..B] that are divisible by K. \nFor example, for A = 6, B = 11 and K = 2, your function should return 3, because there are three numbers divisible by 2 within the range [6..11], namely 6, 8 and 10.<br>\nA and B are integers within the range [0..2,000,000,000];\nK is an integer within the range [1..2,000,000,000];\nA ≤ B.</em></p>\n\n<pre><code>public class Solution {\n        public int solution(int A, int B, int K) {\n\n            int counter = 0;\n            ArrayList&lt;Integer&gt; listOfNumbersInBetween = new ArrayList&lt;&gt;();\n\n            for (int i = A; i &lt;= B; i++) {\n                listOfNumbersInBetween.add(i);\n            }\n\n            for (int arrayElement : listOfNumbersInBetween) {\n                if (arrayElement % K == 0) {\n                    counter++;\n                }\n            }\n\n            return counter;\n\n        }}\n</code></pre>\n\n<p>As you can see, my solution works perfectly but performance wise it's scoring 0% due to the time complexity O(B-A).</p>\n\n<p>How can i improve this code to make it score 100%?</p>\n"},{"tags":["java","string","algorithm","time-complexity","big-o"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1671232372,"post_id":74830541,"comment_id":132062764,"body_markdown":"Do you mean O(1) when the time taken to preprocess the string is amortized over many `freq` operations?","body":"Do you mean O(1) when the time taken to preprocess the string is amortized over many <code>freq</code> operations?"},{"owner":{"account_id":27277160,"reputation":31,"user_id":20797589,"display_name":"R0bin_0"},"score":0,"creation_date":1671232457,"post_id":74830541,"comment_id":132062774,"body_markdown":"@tgdavies that is correct.","body":"@tgdavies that is correct."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1671233035,"post_id":74830541,"comment_id":132062856,"body_markdown":"Pretend we&#39;re only interested in &#39;c&#39;. Make an array with the count of the times &#39;c&#39; appears *after* this position, i.e. 2,2,1,1,0. Then the string from 1 to 4 contains 2 - 0 &#39;c&#39;s, and the string from 0 to 2 contains 2 - 1 &#39;c&#39;s.","body":"Pretend we&#39;re only interested in &#39;c&#39;. Make an array with the count of the times &#39;c&#39; appears <i>after</i> this position, i.e. 2,2,1,1,0. Then the string from 1 to 4 contains 2 - 0 &#39;c&#39;s, and the string from 0 to 2 contains 2 - 1 &#39;c&#39;s."},{"owner":{"account_id":27277160,"reputation":31,"user_id":20797589,"display_name":"R0bin_0"},"score":0,"creation_date":1671233369,"post_id":74830541,"comment_id":132062905,"body_markdown":"@tgdavies can you elaborate what you mean by &quot;after this position&quot;.","body":"@tgdavies can you elaborate what you mean by &quot;after this position&quot;."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1671236837,"post_id":74830541,"comment_id":132063377,"body_markdown":"for each index in the string, traverse the remainder of the string and count the number of times &#39;c&#39; appears.","body":"for each index in the string, traverse the remainder of the string and count the number of times &#39;c&#39; appears."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1671234740,"creation_date":1671234353,"answer_id":74830806,"question_id":74830541,"body_markdown":"First, convert your input string into a map that maps characters onto a __sorted__ list of indices. For example:\r\n\r\n```\r\nString input = &quot;abcnc&quot;;\r\nvar store = new HashMap&lt;Character, TreeSet&lt;Integer&gt;&gt;();\r\nfor (int i = 0; i &lt; input.length(); i++) {\r\n  store.computeIfAbsent(input.charAt(i), k -&gt; new TreeSet&lt;Integer&gt;()).add(i);\r\n}\r\n\r\nSystem.out.println(store);\r\n```\r\n\r\nThis makes: `{a=[0], b=[1], c=[2, 4], n=[3]}`\r\n\r\nAnd the cost for making this thing can be written off as &#39;preprocessing&#39;, but if it matters, O(nlogn).\r\n\r\nArmed with `store`, you can do the job in `O(log n)` time. For example, if I want to know how many `c`s are in the 3-5 range, I for ask for the TreeSet match c (getting me the `[2, 4]` treeset). Then I can use treeset&#39;s headSet and tailSet methods to figure it out, which are each O(logn) operations.\r\n\r\nThis gives me a total runtime of `O(logn)` which is as near to `O(1)` as makes it irrelevant (in the sense that practical concerns about how modern computer architecture works will dwarf this). If an interviewer does not accept that answer, the are either needlessly pedantic or wildly misguided about how modern computers work, so now we delve into a purely academic exercise to knock it down to an `O(1)`.\r\n\r\n## O(1)\r\n\r\ninstead of mapping the character to a TreeSet&lt;Integer&gt;, we instead map it to an `int[]`. This int array is as large as the entire input (so in this case, the 4 int[] arrays for keys &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, and &#39;n&#39; are all 5 large because the input is 5 large). This int array answers the question: If you asked me for the answer from THIS position to the end of the string, what is the correct answer? So, for c it would be: [2, 2, 2, 1, 1]. Note that the last number (0) is missing as we don&#39;t need it (the amount of Xs from the end of the string to the end of the string is.. of course, 0, always, regardless of what character we are talkkng about). Had the string input been abcnca, then the int arrays are 6 large and for c, would contain [2, 2, 2, 1, 1, 0].\r\n\r\nArmed with this array, the answer can be provided in `O(1)` time: It&#39;s &#39;the answer I would give if you asked me to go from start index to the end-of-string&#39;, minus &#39;the answer I would give if you asked me to go from end index to the end-of-string&#39;. Taking into account, of course, that if the question&#39;s end index matches end-of-string, just look up the answer in the int array (don&#39;t subtract anything).\r\n\r\nThis means the time taken after preprocessing is O(1), but the size of the &#39;preprocessed&#39; data structure is now considerable. For example, if the input string is 1 MB large and contains 5000 different characters, it&#39;s a 20GB table (4 bytes per number, 5000 entries in the map, each entry mapping to an array with a million entries, at 4 bytes a pop, is `5000*1000000*4 = 20GB`).\r\n","title":"Count character occurrences in a substring in O(1) time with preprocessing","body":"<p>First, convert your input string into a map that maps characters onto a <strong>sorted</strong> list of indices. For example:</p>\n<pre><code>String input = &quot;abcnc&quot;;\nvar store = new HashMap&lt;Character, TreeSet&lt;Integer&gt;&gt;();\nfor (int i = 0; i &lt; input.length(); i++) {\n  store.computeIfAbsent(input.charAt(i), k -&gt; new TreeSet&lt;Integer&gt;()).add(i);\n}\n\nSystem.out.println(store);\n</code></pre>\n<p>This makes: <code>{a=[0], b=[1], c=[2, 4], n=[3]}</code></p>\n<p>And the cost for making this thing can be written off as 'preprocessing', but if it matters, O(nlogn).</p>\n<p>Armed with <code>store</code>, you can do the job in <code>O(log n)</code> time. For example, if I want to know how many <code>c</code>s are in the 3-5 range, I for ask for the TreeSet match c (getting me the <code>[2, 4]</code> treeset). Then I can use treeset's headSet and tailSet methods to figure it out, which are each O(logn) operations.</p>\n<p>This gives me a total runtime of <code>O(logn)</code> which is as near to <code>O(1)</code> as makes it irrelevant (in the sense that practical concerns about how modern computer architecture works will dwarf this). If an interviewer does not accept that answer, the are either needlessly pedantic or wildly misguided about how modern computers work, so now we delve into a purely academic exercise to knock it down to an <code>O(1)</code>.</p>\n<h2>O(1)</h2>\n<p>instead of mapping the character to a TreeSet, we instead map it to an <code>int[]</code>. This int array is as large as the entire input (so in this case, the 4 int[] arrays for keys 'a', 'b', 'c', and 'n' are all 5 large because the input is 5 large). This int array answers the question: If you asked me for the answer from THIS position to the end of the string, what is the correct answer? So, for c it would be: [2, 2, 2, 1, 1]. Note that the last number (0) is missing as we don't need it (the amount of Xs from the end of the string to the end of the string is.. of course, 0, always, regardless of what character we are talkkng about). Had the string input been abcnca, then the int arrays are 6 large and for c, would contain [2, 2, 2, 1, 1, 0].</p>\n<p>Armed with this array, the answer can be provided in <code>O(1)</code> time: It's 'the answer I would give if you asked me to go from start index to the end-of-string', minus 'the answer I would give if you asked me to go from end index to the end-of-string'. Taking into account, of course, that if the question's end index matches end-of-string, just look up the answer in the int array (don't subtract anything).</p>\n<p>This means the time taken after preprocessing is O(1), but the size of the 'preprocessed' data structure is now considerable. For example, if the input string is 1 MB large and contains 5000 different characters, it's a 20GB table (4 bytes per number, 5000 entries in the map, each entry mapping to an array with a million entries, at 4 bytes a pop, is <code>5000*1000000*4 = 20GB</code>).</p>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671239533,"creation_date":1671238734,"answer_id":74831092,"question_id":74830541,"body_markdown":"&gt; This question has not been asked before since I am specifically asking O(1) constant time after the time taken to preprocess the string is amortized over many freq operations.\r\n\r\nTo achieve an amortized constant time for this method, you can generate a `HashMap`, associating each character with an array of length equal to the length of the given String, where every array element represents the number of occurrences of a particular character from the beginning of the String up to a particular index.\r\n\r\nThe first call of the `freq()` would populate the `Map` and would run in **O(n)**, subsequent calls would execute in constant time **O(1)**.\r\n\r\nTherefore, so-called [amortized time Complexity](http://www.cs.cornell.edu/courses/cs3110/2011sp/Lectures/lec20-amortized/amortized.htm), which considers the upper bound of the total cost of `N` invocations of the operation, would be **O(1)**.\r\n\r\nThe algorithm of populating the Map resembles the [Counting sort algorithm](https://en.wikipedia.org/wiki/Counting_sort#Pseudocode) (we need to perform the steps, represented by the two firsts `for`-loop in the pseudocode available via the link).\r\n\r\nIn order to populate the Map, every unique character encountered in the string needs to be associated with an array `int[]` having the length of the given string. And during the iteration, an element under the current index in the array that corresponds to the current character should be incremented (*that&#39;s basically the first phase in the Counting sort*).\r\n\r\nThe next step is to iterate over the Values of the Map and calculate the cumulative frequency for each array of frequencies, so that every element would represent the total number of occurrences of a certain character from the very beginning of the String up to a particular index (*this step is identical to the second phase in the Counting sort*).\r\n\r\nThat&#39;s how implementation might look like:\r\n\r\n    public static final Map&lt;Character, int[]&gt; FREQ_BY_CHAR = new HashMap&lt;&gt;();\r\n    \r\n    public static int freq(String s, char c, int start, int end) {\r\n        \r\n        if (FREQ_BY_CHAR.isEmpty()) populate(s);\r\n    \r\n        int[] frequencies = FREQ_BY_CHAR.get(c);\r\n        \r\n        return frequencies[end] - frequencies[start];\r\n    }\r\n    \r\n    public static void populate(String s) {\r\n        countFrequencies(s);\r\n        calculateCumulativeFrequencies();\r\n    }\r\n    \r\n    public static void countFrequencies(String s) {\r\n        for (int i = 0; i &lt; s.length(); i++) {\r\n            char next = s.charAt(i);\r\n            int[] frequencies = FREQ_BY_CHAR.computeIfAbsent(next, k -&gt; new int[s.length()]);\r\n            frequencies[i]++;\r\n        }\r\n    }\r\n    \r\n    public static void calculateCumulativeFrequencies() {\r\n        FREQ_BY_CHAR.values().forEach(freq -&gt; accumulate(freq));\r\n    }\r\n    \r\n    public static void accumulate(int[] freq) {\r\n        for (int i = 1; i &lt; freq.length; i++) freq[i] += freq[i - 1];\r\n    }\r\n\r\n`main()`\r\n\r\n    public static void main(String[] args) {\r\n        String s = &quot;abcnc&quot;;\r\n        char find = &#39;c&#39;;\r\n        int start = 1;\r\n        int end = 4;\r\n    \r\n        System.out.println(freq(s, find, start, end));\r\n    \r\n        FREQ_BY_CHAR.forEach((ch, arr1) -&gt; System.out.println(ch + &quot; -&gt; &quot; + Arrays.toString(arr1))); \r\n    }\r\n\r\n*Output:*\r\n\r\n```\r\n2\r\n// contents of the Map\r\n//    a  b  c  n  c\r\na -&gt; [1, 1, 1, 1, 1]\r\nb -&gt; [0, 1, 1, 1, 1]\r\nc -&gt; [0, 0, 1, 1, 2]\r\nn -&gt; [0, 0, 0, 1, 1] \r\n```","title":"Count character occurrences in a substring in O(1) time with preprocessing","body":"<blockquote>\n<p>This question has not been asked before since I am specifically asking O(1) constant time after the time taken to preprocess the string is amortized over many freq operations.</p>\n</blockquote>\n<p>To achieve an amortized constant time for this method, you can generate a <code>HashMap</code>, associating each character with an array of length equal to the length of the given String, where every array element represents the number of occurrences of a particular character from the beginning of the String up to a particular index.</p>\n<p>The first call of the <code>freq()</code> would populate the <code>Map</code> and would run in <strong>O(n)</strong>, subsequent calls would execute in constant time <strong>O(1)</strong>.</p>\n<p>Therefore, so-called <a href=\"http://www.cs.cornell.edu/courses/cs3110/2011sp/Lectures/lec20-amortized/amortized.htm\" rel=\"nofollow noreferrer\">amortized time Complexity</a>, which considers the upper bound of the total cost of <code>N</code> invocations of the operation, would be <strong>O(1)</strong>.</p>\n<p>The algorithm of populating the Map resembles the <a href=\"https://en.wikipedia.org/wiki/Counting_sort#Pseudocode\" rel=\"nofollow noreferrer\">Counting sort algorithm</a> (we need to perform the steps, represented by the two firsts <code>for</code>-loop in the pseudocode available via the link).</p>\n<p>In order to populate the Map, every unique character encountered in the string needs to be associated with an array <code>int[]</code> having the length of the given string. And during the iteration, an element under the current index in the array that corresponds to the current character should be incremented (<em>that's basically the first phase in the Counting sort</em>).</p>\n<p>The next step is to iterate over the Values of the Map and calculate the cumulative frequency for each array of frequencies, so that every element would represent the total number of occurrences of a certain character from the very beginning of the String up to a particular index (<em>this step is identical to the second phase in the Counting sort</em>).</p>\n<p>That's how implementation might look like:</p>\n<pre><code>public static final Map&lt;Character, int[]&gt; FREQ_BY_CHAR = new HashMap&lt;&gt;();\n\npublic static int freq(String s, char c, int start, int end) {\n    \n    if (FREQ_BY_CHAR.isEmpty()) populate(s);\n\n    int[] frequencies = FREQ_BY_CHAR.get(c);\n    \n    return frequencies[end] - frequencies[start];\n}\n\npublic static void populate(String s) {\n    countFrequencies(s);\n    calculateCumulativeFrequencies();\n}\n\npublic static void countFrequencies(String s) {\n    for (int i = 0; i &lt; s.length(); i++) {\n        char next = s.charAt(i);\n        int[] frequencies = FREQ_BY_CHAR.computeIfAbsent(next, k -&gt; new int[s.length()]);\n        frequencies[i]++;\n    }\n}\n\npublic static void calculateCumulativeFrequencies() {\n    FREQ_BY_CHAR.values().forEach(freq -&gt; accumulate(freq));\n}\n\npublic static void accumulate(int[] freq) {\n    for (int i = 1; i &lt; freq.length; i++) freq[i] += freq[i - 1];\n}\n</code></pre>\n<p><code>main()</code></p>\n<pre><code>public static void main(String[] args) {\n    String s = &quot;abcnc&quot;;\n    char find = 'c';\n    int start = 1;\n    int end = 4;\n\n    System.out.println(freq(s, find, start, end));\n\n    FREQ_BY_CHAR.forEach((ch, arr1) -&gt; System.out.println(ch + &quot; -&gt; &quot; + Arrays.toString(arr1))); \n}\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>2\n// contents of the Map\n//    a  b  c  n  c\na -&gt; [1, 1, 1, 1, 1]\nb -&gt; [0, 1, 1, 1, 1]\nc -&gt; [0, 0, 1, 1, 2]\nn -&gt; [0, 0, 0, 1, 1] \n</code></pre>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1671238907,"creation_date":1671238907,"answer_id":74831101,"question_id":74830541,"body_markdown":"You can do it in O(1) (constant time) using O(N) space and O(N) pre-processing time, *and* without the use of maps or anything else other than basic java, as follows:\r\n\r\nMake a single pass over the string and keep a cumulative count of each letter seen so far:\r\n\r\n    int[][] counts;\r\n\r\n    public void process(String input) {\r\n        counts = new int[input.length()][];\r\n        for (int i = 0; i &lt; input.length(); i++) {\r\n            counts[i] = i == 0 ? new int[26] : Arrays.copyOf(counts[i - 1], 26);\r\n            counts[i][input.charAt(i) - &#39;a&#39;]++;\r\n        }\r\n    }\r\n\r\nThen return the difference between the counts at start and end:\r\n\r\n    public int count( char c, int start, int end) {\r\n        return counts[end][c - &#39;a&#39;] - counts[start][c - &#39;a&#39;];\r\n    }\r\n","title":"Count character occurrences in a substring in O(1) time with preprocessing","body":"<p>You can do it in O(1) (constant time) using O(N) space and O(N) pre-processing time, <em>and</em> without the use of maps or anything else other than basic java, as follows:</p>\n<p>Make a single pass over the string and keep a cumulative count of each letter seen so far:</p>\n<pre><code>int[][] counts;\n\npublic void process(String input) {\n    counts = new int[input.length()][];\n    for (int i = 0; i &lt; input.length(); i++) {\n        counts[i] = i == 0 ? new int[26] : Arrays.copyOf(counts[i - 1], 26);\n        counts[i][input.charAt(i) - 'a']++;\n    }\n}\n</code></pre>\n<p>Then return the difference between the counts at start and end:</p>\n<pre><code>public int count( char c, int start, int end) {\n    return counts[end][c - 'a'] - counts[start][c - 'a'];\n}\n</code></pre>\n"}],"owner":{"account_id":27277160,"reputation":31,"user_id":20797589,"display_name":"R0bin_0"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":375,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":74831101,"answer_count":3,"score":2,"last_activity_date":1671249504,"creation_date":1671231421,"question_id":74830541,"body_markdown":"*This question has not been asked before, since I am specifically asking **O(1)** constant time after the time taken to preprocess the string is amortized over many freq operations.*\r\n\r\nAn interviewer asked me to find the total count of a character appearing in a substring. For example, if you are given a string, the character to find, and the start and end index of the positions you want to search in, I am supposed to find the most optimized way e.g.:\r\n\r\n    String s = &quot;abcnc&quot;;\r\n    char find = &quot;c&quot;\r\n    int start = 1;\r\n    int end = 4;\r\n\r\nthat should return a result of 2 since `&#39;c&#39;` appears twice in the specified substring of `&#39;bcnc&#39;`.\r\n\r\nWhat I did was straightforward, which was\r\n\r\n    int freq(String s, char c, int start, int end) {\r\n    \tint result = 0;\t\r\n    \tfor(int i = start, i &lt; end; i++) {\r\n    \t\tif(s.charAt(i) == c) {\r\n    \t\t\tresult++;\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \treturn result;\r\n    }\r\n\r\nWhich has an **O(N)** time complexity.\r\n\r\nHowever, the interviewer said it can be more optimized by first preprocessing the string, where the `freq()` method can have **O(1)** complexity. I was stumped because I don&#39;t know how it can be more optimized other than **O(N)**. The interviewer told me I should use a map or list or both and to first find the index those characters are positioned and that will give me a more optimized solution.","title":"Count character occurrences in a substring in O(1) time with preprocessing","body":"<p><em>This question has not been asked before, since I am specifically asking <strong>O(1)</strong> constant time after the time taken to preprocess the string is amortized over many freq operations.</em></p>\n<p>An interviewer asked me to find the total count of a character appearing in a substring. For example, if you are given a string, the character to find, and the start and end index of the positions you want to search in, I am supposed to find the most optimized way e.g.:</p>\n<pre><code>String s = &quot;abcnc&quot;;\nchar find = &quot;c&quot;\nint start = 1;\nint end = 4;\n</code></pre>\n<p>that should return a result of 2 since <code>'c'</code> appears twice in the specified substring of <code>'bcnc'</code>.</p>\n<p>What I did was straightforward, which was</p>\n<pre><code>int freq(String s, char c, int start, int end) {\n    int result = 0; \n    for(int i = start, i &lt; end; i++) {\n        if(s.charAt(i) == c) {\n            result++;\n        }\n    }\n    \n    return result;\n}\n</code></pre>\n<p>Which has an <strong>O(N)</strong> time complexity.</p>\n<p>However, the interviewer said it can be more optimized by first preprocessing the string, where the <code>freq()</code> method can have <strong>O(1)</strong> complexity. I was stumped because I don't know how it can be more optimized other than <strong>O(N)</strong>. The interviewer told me I should use a map or list or both and to first find the index those characters are positioned and that will give me a more optimized solution.</p>\n"},{"tags":["java","djl"],"comments":[{"owner":{"account_id":2161850,"reputation":766,"user_id":1915846,"accept_rate":0,"display_name":"cserpell"},"score":0,"creation_date":1666142065,"post_id":72075392,"comment_id":130863851,"body_markdown":"Your code has several different functionalities. I suggest you to reduce your code to the minimum necessary to reproduce the error. For example, the error shows that the training step of a neural network is failing, when calling to the mxnet library that is used behind the scenes. Try to write a short piece of code that has the same error message with known inputs.","body":"Your code has several different functionalities. I suggest you to reduce your code to the minimum necessary to reproduce the error. For example, the error shows that the training step of a neural network is failing, when calling to the mxnet library that is used behind the scenes. Try to write a short piece of code that has the same error message with known inputs."}],"answers":[{"tags":[],"owner":{"account_id":8940317,"reputation":46,"user_id":10764959,"display_name":"Kx13739240386"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671249036,"creation_date":1671249036,"answer_id":74831670,"question_id":72075392,"body_markdown":"This problem is reported from MXNet engine when invoking the forward function call on the `Linear` block. And data type mismatch is found. But the `Linear` block should be rather mature in DJL. There are many test already. \r\n\r\nMaybe you can set break point to check the dataType of the NDArray, right before the JNA is called, for example, somewhere around\r\n`at ai.djl.mxnet.engine.MxNDArrayEx.linear(MxNDArrayEx.java:597)`, to see if they are as expected. On the other hand, you can take a look at `integration/src/main/java/ai/djl/integration/tests/nn/BlockCoreTest.java` to see successful application of Linear block forward call. Use it as a benchmark on the dataType issue.\r\n","title":"How to fix ai.djl.engine.EngineException incompatible attr in node at 1-th input: expected int32, got float32","body":"<p>This problem is reported from MXNet engine when invoking the forward function call on the <code>Linear</code> block. And data type mismatch is found. But the <code>Linear</code> block should be rather mature in DJL. There are many test already.</p>\n<p>Maybe you can set break point to check the dataType of the NDArray, right before the JNA is called, for example, somewhere around\n<code>at ai.djl.mxnet.engine.MxNDArrayEx.linear(MxNDArrayEx.java:597)</code>, to see if they are as expected. On the other hand, you can take a look at <code>integration/src/main/java/ai/djl/integration/tests/nn/BlockCoreTest.java</code> to see successful application of Linear block forward call. Use it as a benchmark on the dataType issue.</p>\n"}],"owner":{"account_id":22918043,"reputation":1,"user_id":17054343,"display_name":"Judica&#235;l Ngandji Ted"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":466,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671249036,"creation_date":1651396130,"question_id":72075392,"body_markdown":"I started to Deep learning with Deep Java Library (DJL) and Spring boot. When I train my dataset I got this error \r\n```\r\nai.djl.engine.EngineException: MXNet engine call failed: MXNetError: Check failed: assign(&amp;dattr, vec.at(i)): Incompatible attr in node  at 1-th input: expected int32, got float32\r\n```\r\nmy full code his her [github][1]\r\nMy implementation of RandomAccessDataset lool like this [code online][2]\r\nthat is my code\r\n\r\n```\r\npackage com.anthill.OptimumBet.basic;\r\n\r\nimport ai.djl.ndarray.NDArray;\r\nimport ai.djl.ndarray.NDList;\r\nimport ai.djl.ndarray.NDManager;\r\nimport ai.djl.training.dataset.RandomAccessDataset;\r\nimport ai.djl.training.dataset.Record;\r\nimport ai.djl.util.Progress;\r\nimport com.anthill.OptimumBet.util.Utils;\r\nimport java.io.IOException;\r\nimport java.io.Reader;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Paths;\r\nimport java.util.List;\r\nimport org.apache.commons.csv.CSVFormat;\r\nimport org.apache.commons.csv.CSVParser;\r\nimport org.apache.commons.csv.CSVRecord;\r\n\r\n/**\r\n *\r\n * @author truth\r\n */\r\npublic class CSVDataset extends RandomAccessDataset {\r\n\r\n    private final List&lt;CSVRecord&gt; csvRecords;\r\n\r\n    private CSVDataset(Builder builder) {\r\n        super(builder);\r\n        this.csvRecords = builder.dataset;\r\n    }\r\n\r\n    @Override\r\n    public Record get(NDManager manager, long index) {\r\n        CSVRecord record = csvRecords.get(Math.toIntExact(index));\r\n        NDArray datum = manager.create(\r\n                encode(record.get(Utils.QUESTION_MALICIOUS_URL)));\r\n        NDArray label = manager.create(\r\n                Float.parseFloat(record.get(Utils.ANSWER_MALICIOUS_URL)));\r\n\r\n        return new Record(new NDList(datum), new NDList(label));\r\n    }\r\n\r\n    @Override\r\n    protected long availableSize() {\r\n        return this.csvRecords.size();\r\n    }\r\n\r\n    private int[] encode(String url) {\r\n        url = url.toLowerCase();\r\n        int[] encoding = new int[26];\r\n        for (char ch : url.toCharArray()) {\r\n            int index = ch - &#39;a&#39;;\r\n            if (index &lt; 26 &amp;&amp; index &gt;= 0) {\r\n                encoding[ch - &#39;a&#39;]++;\r\n            }\r\n        }\r\n        return encoding;\r\n    }\r\n    \r\n    @Override\r\n    public void prepare(Progress prgrs) {}\r\n\r\n    public static Builder builder(String csvFilePath) {\r\n        return new Builder(csvFilePath);\r\n    }\r\n\r\n    public static final class Builder extends BaseBuilder&lt;Builder&gt; {\r\n\r\n        List&lt;CSVRecord&gt; dataset;\r\n        private final String csvFilePath;\r\n        private Usage usage;\r\n\r\n        Builder(String csvFilePath) {\r\n            this.csvFilePath = csvFilePath;\r\n            this.usage = Usage.TRAIN;\r\n        }\r\n\r\n        @Override\r\n        protected Builder self() {\r\n            return this;\r\n        }\r\n\r\n        public Builder optUsage(Usage usage) {\r\n            this.usage = usage;\r\n            return this;\r\n        }\r\n\r\n        public CSVDataset build() throws IOException {\r\n\r\n            try ( Reader reader = Files.newBufferedReader(Paths.get(csvFilePath));\r\n                    CSVParser csvParser = new CSVParser(\r\n                    reader,\r\n                    CSVFormat.DEFAULT.builder()\r\n                        .setHeader(Utils.QUESTION_MALICIOUS_URL, Utils.ANSWER_MALICIOUS_URL)\r\n                        .setSkipHeaderRecord(true)\r\n                        .setIgnoreHeaderCase(true)\r\n                        .setTrim(true)\r\n                        .build())) {\r\n                List&lt;CSVRecord&gt; csvRecords = csvParser.getRecords();\r\n                int index = (int) (csvRecords.size() * 0.8);\r\n                switch (usage) {\r\n                    case TRAIN: {\r\n                        dataset = csvRecords.subList(0, index);\r\n                        break;\r\n                    }\r\n                    case TEST: {\r\n                        dataset = csvRecords.subList(index, csvRecords.size());\r\n                        break;\r\n                    }\r\n                    default:{\r\n                        dataset = csvRecords;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            return new CSVDataset(this);\r\n        }\r\n    }\r\n}\r\n```\r\nand that is my training\r\n\r\n```\r\npublic TrainingResult trainCSVDataset() throws IOException, TranslateException {\r\n\r\n        try ( Model model = Model.newInstance(Utils.MODEL_NAME_MALICIOUS_URL)) {\r\n            model.setBlock(\r\n                    new Mlp(\r\n                            Utils.INPUT_MALICIOUS_URL,\r\n                            Utils.OUTPUT_MALICIOUS_URL,\r\n                            new int[]{128, 64}));\r\n\r\n            //get training and validation dataset\r\n            \r\n            RandomAccessDataset trainingSet = this.getCSVDataSet(\r\n                    Dataset.Usage.TRAIN,\r\n                    Utils.BATCH_SIZE,\r\n                    Utils.LIMIT);\r\n            RandomAccessDataset validateSet = this.getCSVDataSet(\r\n                    Dataset.Usage.TEST,\r\n                    Utils.BATCH_SIZE,\r\n                    Utils.LIMIT);\r\n            \r\n            //set training configuration\r\n            try ( Trainer trainer = model.newTrainer(\r\n                    this.setupTrainingConfig(Utils.MODEL_NAME_MALICIOUS_URL,\r\n                            this.getGpus()))) {\r\n                            \r\n                trainer.setMetrics(new Metrics());\r\n\r\n                trainer.initialize(new Shape(1, Utils.INPUT_MALICIOUS_URL));\r\n                System.out.println(&quot;trainingDataset size :&quot;+ trainingSet.size());\r\n\r\n                EasyTrain.fit(trainer, Utils.EPOCH, trainingSet, validateSet);\r\n\r\n                Path modelDire = Paths.get(Utils.MODEL_DIRE);\r\n                Files.createDirectories(modelDire);\r\n\r\n                model.setProperty(&quot;Epoch&quot;, String.valueOf(Utils.EPOCH));\r\n                model.save(modelDire, Utils.MODEL_NAME_MALICIOUS_URL);\r\n\r\n                return trainer.getTrainingResult();\r\n            }\r\n\r\n        }\r\n    }\r\n    \r\n    private DefaultTrainingConfig setupTrainingConfig(\r\n            String outputDire,\r\n            int maxGpus) {\r\n        \r\n        SaveModelTrainingListener listener = \r\n                new SaveModelTrainingListener(outputDire);\r\n        listener.setSaveModelCallback(\r\n                trainer -&gt; {\r\n                    TrainingResult result = trainer.getTrainingResult();\r\n                    Model model = trainer.getModel();\r\n                    model.setProperty(\r\n                            &quot;Accuracy&quot;,\r\n                            String.format(\r\n                                    &quot;%.5f&quot;,\r\n                                    result.getTrainEvaluation(&quot;Accuracy&quot;)));\r\n                    model.setProperty(\r\n                            &quot;Loss&quot;,\r\n                            String.format(&quot;%.5f&quot;, result.getValidateLoss()));\r\n                });\r\n\r\n        return new DefaultTrainingConfig(Loss.softmaxCrossEntropyLoss())\r\n                .addEvaluator(new Accuracy())\r\n                .optDevices(Engine.getInstance().getDevices(maxGpus))\r\n                .addTrainingListeners(\r\n                        TrainingListener.Defaults.logging(outputDire))\r\n                .addTrainingListeners(listener);\r\n    }\r\n    \r\n    private RandomAccessDataset getDataSet(\r\n            Dataset.Usage usage,\r\n            int batchSize,\r\n            int limit) throws IOException {\r\n        \r\n        Mnist mnist = Mnist.builder()\r\n                .optUsage(usage)\r\n                .setSampling(batchSize, true)\r\n                .optLimit(limit)\r\n                .build();\r\n        mnist.prepare(new ProgressBar());\r\n        return mnist;\r\n    }\r\n    \r\n    private RandomAccessDataset getCSVDataSet(Dataset.Usage usage, int batchSize, int limit) throws IOException, TranslateException {\r\n        \r\n        RandomAccessDataset csvDataset = CSVDataset.builder(Utils.MALICIOUS_URL_DATA_IN_PATH_SYSTEM)\r\n                .optUsage(usage)\r\n                .setSampling(batchSize, true)\r\n                .optLimit(limit)\r\n                .build();\r\n\r\n//        csvDataset.prepare(new ProgressBar());\r\n        return csvDataset;\r\n    }\r\n    \r\n    private int getGpus() {\r\n        return Engine.getInstance().getGpuCount();\r\n    }\r\n```\r\n\r\nplease someone can help me to fix my error?\r\n\r\nthat is the full message error\r\n\r\n```\r\nSun May 01 07:47:06 WAT 2022\r\nThere was an unexpected error (type=Internal Server Error, status=500).\r\nMXNet engine call failed: MXNetError: Check failed: assign(&amp;dattr, vec.at(i)): Incompatible attr in node at 1-th input: expected int32, got float32 Stack trace: File &quot;../src/io/../operator/elemwise_op_common.h&quot;, line 135\r\nai.djl.engine.EngineException: MXNet engine call failed: MXNetError: Check failed: assign(&amp;dattr, vec.at(i)): Incompatible attr in node  at 1-th input: expected int32, got float32\r\nStack trace:\r\n  File &quot;../src/io/../operator/elemwise_op_common.h&quot;, line 135\r\n\r\n\tat ai.djl.mxnet.jna.JnaUtils.checkCall(JnaUtils.java:1930)\r\n\tat ai.djl.mxnet.jna.JnaUtils.imperativeInvoke(JnaUtils.java:519)\r\n\tat ai.djl.mxnet.jna.FunctionInfo.invoke(FunctionInfo.java:72)\r\n\tat ai.djl.mxnet.engine.MxNDManager.invoke(MxNDManager.java:294)\r\n\tat ai.djl.mxnet.engine.MxNDArrayEx.linear(MxNDArrayEx.java:597)\r\n\tat ai.djl.nn.core.Linear.linear(Linear.java:182)\r\n\tat ai.djl.nn.core.Linear.forwardInternal(Linear.java:87)\r\n\tat ai.djl.nn.AbstractBaseBlock.forwardInternal(AbstractBaseBlock.java:125)\r\n\tat ai.djl.nn.AbstractBaseBlock.forward(AbstractBaseBlock.java:90)\r\n\tat ai.djl.nn.SequentialBlock.forwardInternal(SequentialBlock.java:147)\r\n\tat ai.djl.nn.AbstractBaseBlock.forward(AbstractBaseBlock.java:90)\r\n\tat ai.djl.training.Trainer.forward(Trainer.java:173)\r\n\tat ai.djl.training.EasyTrain.trainSplit(EasyTrain.java:120)\r\n\tat ai.djl.training.EasyTrain.trainBatch(EasyTrain.java:108)\r\n\tat ai.djl.training.EasyTrain.fit(EasyTrain.java:57)\r\n\tat com.anthill.OptimumBet.service.TrainModelService.trainCSVDataset(TrainModelService.java:108)\r\n\tat com.anthill.OptimumBet.controller.OptimumBetController.trainCSVDataSet(OptimumBetController.java:48)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:655)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\n```\r\nsorry for my english! I&#39;m still learning.\r\n\r\n\r\n  [1]: https://github.com/ngandji/optimumbed.git\r\n  [2]: https://github.com/deepjavalibrary/djl/blob/master/docs/development/CSVDataset.java","title":"How to fix ai.djl.engine.EngineException incompatible attr in node at 1-th input: expected int32, got float32","body":"<p>I started to Deep learning with Deep Java Library (DJL) and Spring boot. When I train my dataset I got this error</p>\n<pre><code>ai.djl.engine.EngineException: MXNet engine call failed: MXNetError: Check failed: assign(&amp;dattr, vec.at(i)): Incompatible attr in node  at 1-th input: expected int32, got float32\n</code></pre>\n<p>my full code his her <a href=\"https://github.com/ngandji/optimumbed.git\" rel=\"nofollow noreferrer\">github</a>\nMy implementation of RandomAccessDataset lool like this <a href=\"https://github.com/deepjavalibrary/djl/blob/master/docs/development/CSVDataset.java\" rel=\"nofollow noreferrer\">code online</a>\nthat is my code</p>\n<pre><code>package com.anthill.OptimumBet.basic;\n\nimport ai.djl.ndarray.NDArray;\nimport ai.djl.ndarray.NDList;\nimport ai.djl.ndarray.NDManager;\nimport ai.djl.training.dataset.RandomAccessDataset;\nimport ai.djl.training.dataset.Record;\nimport ai.djl.util.Progress;\nimport com.anthill.OptimumBet.util.Utils;\nimport java.io.IOException;\nimport java.io.Reader;\nimport java.nio.file.Files;\nimport java.nio.file.Paths;\nimport java.util.List;\nimport org.apache.commons.csv.CSVFormat;\nimport org.apache.commons.csv.CSVParser;\nimport org.apache.commons.csv.CSVRecord;\n\n/**\n *\n * @author truth\n */\npublic class CSVDataset extends RandomAccessDataset {\n\n    private final List&lt;CSVRecord&gt; csvRecords;\n\n    private CSVDataset(Builder builder) {\n        super(builder);\n        this.csvRecords = builder.dataset;\n    }\n\n    @Override\n    public Record get(NDManager manager, long index) {\n        CSVRecord record = csvRecords.get(Math.toIntExact(index));\n        NDArray datum = manager.create(\n                encode(record.get(Utils.QUESTION_MALICIOUS_URL)));\n        NDArray label = manager.create(\n                Float.parseFloat(record.get(Utils.ANSWER_MALICIOUS_URL)));\n\n        return new Record(new NDList(datum), new NDList(label));\n    }\n\n    @Override\n    protected long availableSize() {\n        return this.csvRecords.size();\n    }\n\n    private int[] encode(String url) {\n        url = url.toLowerCase();\n        int[] encoding = new int[26];\n        for (char ch : url.toCharArray()) {\n            int index = ch - 'a';\n            if (index &lt; 26 &amp;&amp; index &gt;= 0) {\n                encoding[ch - 'a']++;\n            }\n        }\n        return encoding;\n    }\n    \n    @Override\n    public void prepare(Progress prgrs) {}\n\n    public static Builder builder(String csvFilePath) {\n        return new Builder(csvFilePath);\n    }\n\n    public static final class Builder extends BaseBuilder&lt;Builder&gt; {\n\n        List&lt;CSVRecord&gt; dataset;\n        private final String csvFilePath;\n        private Usage usage;\n\n        Builder(String csvFilePath) {\n            this.csvFilePath = csvFilePath;\n            this.usage = Usage.TRAIN;\n        }\n\n        @Override\n        protected Builder self() {\n            return this;\n        }\n\n        public Builder optUsage(Usage usage) {\n            this.usage = usage;\n            return this;\n        }\n\n        public CSVDataset build() throws IOException {\n\n            try ( Reader reader = Files.newBufferedReader(Paths.get(csvFilePath));\n                    CSVParser csvParser = new CSVParser(\n                    reader,\n                    CSVFormat.DEFAULT.builder()\n                        .setHeader(Utils.QUESTION_MALICIOUS_URL, Utils.ANSWER_MALICIOUS_URL)\n                        .setSkipHeaderRecord(true)\n                        .setIgnoreHeaderCase(true)\n                        .setTrim(true)\n                        .build())) {\n                List&lt;CSVRecord&gt; csvRecords = csvParser.getRecords();\n                int index = (int) (csvRecords.size() * 0.8);\n                switch (usage) {\n                    case TRAIN: {\n                        dataset = csvRecords.subList(0, index);\n                        break;\n                    }\n                    case TEST: {\n                        dataset = csvRecords.subList(index, csvRecords.size());\n                        break;\n                    }\n                    default:{\n                        dataset = csvRecords;\n                        break;\n                    }\n                }\n            }\n            return new CSVDataset(this);\n        }\n    }\n}\n</code></pre>\n<p>and that is my training</p>\n<pre><code>public TrainingResult trainCSVDataset() throws IOException, TranslateException {\n\n        try ( Model model = Model.newInstance(Utils.MODEL_NAME_MALICIOUS_URL)) {\n            model.setBlock(\n                    new Mlp(\n                            Utils.INPUT_MALICIOUS_URL,\n                            Utils.OUTPUT_MALICIOUS_URL,\n                            new int[]{128, 64}));\n\n            //get training and validation dataset\n            \n            RandomAccessDataset trainingSet = this.getCSVDataSet(\n                    Dataset.Usage.TRAIN,\n                    Utils.BATCH_SIZE,\n                    Utils.LIMIT);\n            RandomAccessDataset validateSet = this.getCSVDataSet(\n                    Dataset.Usage.TEST,\n                    Utils.BATCH_SIZE,\n                    Utils.LIMIT);\n            \n            //set training configuration\n            try ( Trainer trainer = model.newTrainer(\n                    this.setupTrainingConfig(Utils.MODEL_NAME_MALICIOUS_URL,\n                            this.getGpus()))) {\n                            \n                trainer.setMetrics(new Metrics());\n\n                trainer.initialize(new Shape(1, Utils.INPUT_MALICIOUS_URL));\n                System.out.println(&quot;trainingDataset size :&quot;+ trainingSet.size());\n\n                EasyTrain.fit(trainer, Utils.EPOCH, trainingSet, validateSet);\n\n                Path modelDire = Paths.get(Utils.MODEL_DIRE);\n                Files.createDirectories(modelDire);\n\n                model.setProperty(&quot;Epoch&quot;, String.valueOf(Utils.EPOCH));\n                model.save(modelDire, Utils.MODEL_NAME_MALICIOUS_URL);\n\n                return trainer.getTrainingResult();\n            }\n\n        }\n    }\n    \n    private DefaultTrainingConfig setupTrainingConfig(\n            String outputDire,\n            int maxGpus) {\n        \n        SaveModelTrainingListener listener = \n                new SaveModelTrainingListener(outputDire);\n        listener.setSaveModelCallback(\n                trainer -&gt; {\n                    TrainingResult result = trainer.getTrainingResult();\n                    Model model = trainer.getModel();\n                    model.setProperty(\n                            &quot;Accuracy&quot;,\n                            String.format(\n                                    &quot;%.5f&quot;,\n                                    result.getTrainEvaluation(&quot;Accuracy&quot;)));\n                    model.setProperty(\n                            &quot;Loss&quot;,\n                            String.format(&quot;%.5f&quot;, result.getValidateLoss()));\n                });\n\n        return new DefaultTrainingConfig(Loss.softmaxCrossEntropyLoss())\n                .addEvaluator(new Accuracy())\n                .optDevices(Engine.getInstance().getDevices(maxGpus))\n                .addTrainingListeners(\n                        TrainingListener.Defaults.logging(outputDire))\n                .addTrainingListeners(listener);\n    }\n    \n    private RandomAccessDataset getDataSet(\n            Dataset.Usage usage,\n            int batchSize,\n            int limit) throws IOException {\n        \n        Mnist mnist = Mnist.builder()\n                .optUsage(usage)\n                .setSampling(batchSize, true)\n                .optLimit(limit)\n                .build();\n        mnist.prepare(new ProgressBar());\n        return mnist;\n    }\n    \n    private RandomAccessDataset getCSVDataSet(Dataset.Usage usage, int batchSize, int limit) throws IOException, TranslateException {\n        \n        RandomAccessDataset csvDataset = CSVDataset.builder(Utils.MALICIOUS_URL_DATA_IN_PATH_SYSTEM)\n                .optUsage(usage)\n                .setSampling(batchSize, true)\n                .optLimit(limit)\n                .build();\n\n//        csvDataset.prepare(new ProgressBar());\n        return csvDataset;\n    }\n    \n    private int getGpus() {\n        return Engine.getInstance().getGpuCount();\n    }\n</code></pre>\n<p>please someone can help me to fix my error?</p>\n<p>that is the full message error</p>\n<pre><code>Sun May 01 07:47:06 WAT 2022\nThere was an unexpected error (type=Internal Server Error, status=500).\nMXNet engine call failed: MXNetError: Check failed: assign(&amp;dattr, vec.at(i)): Incompatible attr in node at 1-th input: expected int32, got float32 Stack trace: File &quot;../src/io/../operator/elemwise_op_common.h&quot;, line 135\nai.djl.engine.EngineException: MXNet engine call failed: MXNetError: Check failed: assign(&amp;dattr, vec.at(i)): Incompatible attr in node  at 1-th input: expected int32, got float32\nStack trace:\n  File &quot;../src/io/../operator/elemwise_op_common.h&quot;, line 135\n\n    at ai.djl.mxnet.jna.JnaUtils.checkCall(JnaUtils.java:1930)\n    at ai.djl.mxnet.jna.JnaUtils.imperativeInvoke(JnaUtils.java:519)\n    at ai.djl.mxnet.jna.FunctionInfo.invoke(FunctionInfo.java:72)\n    at ai.djl.mxnet.engine.MxNDManager.invoke(MxNDManager.java:294)\n    at ai.djl.mxnet.engine.MxNDArrayEx.linear(MxNDArrayEx.java:597)\n    at ai.djl.nn.core.Linear.linear(Linear.java:182)\n    at ai.djl.nn.core.Linear.forwardInternal(Linear.java:87)\n    at ai.djl.nn.AbstractBaseBlock.forwardInternal(AbstractBaseBlock.java:125)\n    at ai.djl.nn.AbstractBaseBlock.forward(AbstractBaseBlock.java:90)\n    at ai.djl.nn.SequentialBlock.forwardInternal(SequentialBlock.java:147)\n    at ai.djl.nn.AbstractBaseBlock.forward(AbstractBaseBlock.java:90)\n    at ai.djl.training.Trainer.forward(Trainer.java:173)\n    at ai.djl.training.EasyTrain.trainSplit(EasyTrain.java:120)\n    at ai.djl.training.EasyTrain.trainBatch(EasyTrain.java:108)\n    at ai.djl.training.EasyTrain.fit(EasyTrain.java:57)\n    at com.anthill.OptimumBet.service.TrainModelService.trainCSVDataset(TrainModelService.java:108)\n    at com.anthill.OptimumBet.controller.OptimumBetController.trainCSVDataSet(OptimumBetController.java:48)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:655)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:829)\n</code></pre>\n<p>sorry for my english! I'm still learning.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":27270043,"reputation":21,"user_id":20791491,"display_name":"user20791491"},"score":0,"creation_date":1671178201,"post_id":74821687,"comment_id":132047175,"body_markdown":"I added at the end of try: catch (Exception e) {\n                                 e.printStackTrace();\n                             } But I know this was not the problem.","body":"I added at the end of try: catch (Exception e) {                                  e.printStackTrace();                              } But I know this was not the problem."}],"answers":[{"tags":[],"owner":{"account_id":26359116,"reputation":585,"user_id":20015640,"display_name":"Urvish Shiroya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671181375,"creation_date":1671181375,"answer_id":74822236,"question_id":74821687,"body_markdown":"you can delete an contact via this method.\r\n\r\n```java\r\npublic static boolean deleteContact(Context ctx, String phone) {\r\n    Uri contactUri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, Uri.encode(phone));\r\n    Cursor cur = ctx.getContentResolver().query(contactUri, null, null, null, null);\r\n    try {\r\n        if (cur.moveToFirst()) {\r\n            do {\r\n                if (cur.getString(cur.getColumnIndex(PhoneLookup.NUMBER)).equalsIgnoreCase(phone)) {\r\n                    String lookupKey = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));\r\n                    Uri uri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_LOOKUP_URI, lookupKey);\r\n                    ctx.getContentResolver().delete(uri, null, null);\r\n                    return true;\r\n                }\r\n\r\n            } while (cur.moveToNext());\r\n        }\r\n\r\n    } catch (Exception e) {\r\n        System.out.println(e.getStackTrace());\r\n    } finally {\r\n        cur.close();\r\n    }\r\n    return false;\r\n}\r\n```\r\n\r\nand don&#39;t forgot about manifest permisison\r\n\r\n```xml\r\n&lt;uses-permission android:name=&quot;android.permission.READ_CONTACTS&quot;/&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.WRITE_CONTACTS&quot;/&gt;\r\n```\r\nI hope its work for you.","title":"How to delete specific contact instead of all contacts","body":"<p>you can delete an contact via this method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static boolean deleteContact(Context ctx, String phone) {\n    Uri contactUri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, Uri.encode(phone));\n    Cursor cur = ctx.getContentResolver().query(contactUri, null, null, null, null);\n    try {\n        if (cur.moveToFirst()) {\n            do {\n                if (cur.getString(cur.getColumnIndex(PhoneLookup.NUMBER)).equalsIgnoreCase(phone)) {\n                    String lookupKey = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));\n                    Uri uri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_LOOKUP_URI, lookupKey);\n                    ctx.getContentResolver().delete(uri, null, null);\n                    return true;\n                }\n\n            } while (cur.moveToNext());\n        }\n\n    } catch (Exception e) {\n        System.out.println(e.getStackTrace());\n    } finally {\n        cur.close();\n    }\n    return false;\n}\n</code></pre>\n<p>and don't forgot about manifest permisison</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;uses-permission android:name=&quot;android.permission.READ_CONTACTS&quot;/&gt;\n&lt;uses-permission android:name=&quot;android.permission.WRITE_CONTACTS&quot;/&gt;\n</code></pre>\n<p>I hope its work for you.</p>\n"},{"tags":[],"owner":{"account_id":27270043,"reputation":21,"user_id":20791491,"display_name":"user20791491"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671248470,"creation_date":1671248137,"answer_id":74831618,"question_id":74821687,"body_markdown":"This did it for me! Also creating a ContactHelper class with content to work with.\r\n\r\n    public void onClick(DialogInterface dialog, int which) {\r\n                            String startsWith = &quot;&quot;;\r\n                            Cursor cur = com.example.myan.ContactHelper.getContactCursor(getContentResolver(), startsWith);\r\n                            int getPos = cur.getPosition();\r\n    \r\n                            if (cur.move(getPos)) {\r\n                                ContactHelper.deleteContact(getContentResolver(),\r\n                                        phoneCurrent.getText().toString());\r\n                                phoneCurrent.setText(&quot;&quot;);\r\n    \r\n                                com.example.myan.HomePage.getRefresh = 0;\r\n    \r\n                                Intent backToHomeScreen = new Intent(ContactDetailActivity.this, HomePage.class);\r\n                                startActivity(backToHomeScreen);\r\n                            }\r\n                        }\r\n                    });","title":"How to delete specific contact instead of all contacts","body":"<p>This did it for me! Also creating a ContactHelper class with content to work with.</p>\n<pre><code>public void onClick(DialogInterface dialog, int which) {\n                        String startsWith = &quot;&quot;;\n                        Cursor cur = com.example.myan.ContactHelper.getContactCursor(getContentResolver(), startsWith);\n                        int getPos = cur.getPosition();\n\n                        if (cur.move(getPos)) {\n                            ContactHelper.deleteContact(getContentResolver(),\n                                    phoneCurrent.getText().toString());\n                            phoneCurrent.setText(&quot;&quot;);\n\n                            com.example.myan.HomePage.getRefresh = 0;\n\n                            Intent backToHomeScreen = new Intent(ContactDetailActivity.this, HomePage.class);\n                            startActivity(backToHomeScreen);\n                        }\n                    }\n                });\n</code></pre>\n"}],"owner":{"account_id":27270043,"reputation":21,"user_id":20791491,"display_name":"user20791491"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1671248470,"creation_date":1671178064,"question_id":74821687,"body_markdown":"The code deletes all contacts, but is there a way to edit cr.delete() method to delete the current contact that is selected. I have tried many other methods to try and select the current contact using getPosition, but I am no sure how that works? \r\n\r\n```\r\n btnContactDelete.setOnClickListener(new View.OnClickListener() {\r\n        public void onClick(View v) {\r\n\r\n            AlertDialog.Builder builder = new AlertDialog.Builder(ContactDetailActivity.this);\r\n\r\n            builder.setTitle(&quot;Confirm&quot;);\r\n            builder.setMessage(&quot;Are you sure you want to delete this contact?&quot;);\r\n\r\n            builder.setPositiveButton(&quot;YES&quot;, new DialogInterface.OnClickListener() {\r\n\r\n                @SuppressLint(&quot;Range&quot;)\r\n                @Override\r\n                public void onClick(DialogInterface dialog, int which) {\r\n                    ContentResolver cr = getContentResolver();\r\n                    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);\r\n\r\n                    while (cur.moveToNext()) {\r\n                         try {\r\n                            String lookupKey = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));\r\n                            Uri uri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_LOOKUP_URI, lookupKey);\r\n                            System.out.println(&quot;The uri is &quot; + uri.toString());\r\n                            cr.delete(uri, null, null);\r\n\r\n                            Intent backToHomeScreen = new Intent(ContactDetailActivity.this, HomePage.class);\r\n                            startActivity(backToHomeScreen);\r\n                        }\r\n                    }\r\n                }\r\n\r\n            });\r\n\r\n            builder.setNegativeButton(&quot;NO&quot;, new DialogInterface.OnClickListener() {\r\n\r\n                @Override\r\n                public void onClick(DialogInterface dialog, int which) {\r\n\r\n                    // Do nothing\r\n                    dialog.dismiss();\r\n                }\r\n            });\r\n\r\n            AlertDialog alert = builder.create();\r\n            alert.show();\r\n        }\r\n    });\r\n}\r\n```","title":"How to delete specific contact instead of all contacts","body":"<p>The code deletes all contacts, but is there a way to edit cr.delete() method to delete the current contact that is selected. I have tried many other methods to try and select the current contact using getPosition, but I am no sure how that works?</p>\n<pre><code> btnContactDelete.setOnClickListener(new View.OnClickListener() {\n        public void onClick(View v) {\n\n            AlertDialog.Builder builder = new AlertDialog.Builder(ContactDetailActivity.this);\n\n            builder.setTitle(&quot;Confirm&quot;);\n            builder.setMessage(&quot;Are you sure you want to delete this contact?&quot;);\n\n            builder.setPositiveButton(&quot;YES&quot;, new DialogInterface.OnClickListener() {\n\n                @SuppressLint(&quot;Range&quot;)\n                @Override\n                public void onClick(DialogInterface dialog, int which) {\n                    ContentResolver cr = getContentResolver();\n                    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);\n\n                    while (cur.moveToNext()) {\n                         try {\n                            String lookupKey = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));\n                            Uri uri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_LOOKUP_URI, lookupKey);\n                            System.out.println(&quot;The uri is &quot; + uri.toString());\n                            cr.delete(uri, null, null);\n\n                            Intent backToHomeScreen = new Intent(ContactDetailActivity.this, HomePage.class);\n                            startActivity(backToHomeScreen);\n                        }\n                    }\n                }\n\n            });\n\n            builder.setNegativeButton(&quot;NO&quot;, new DialogInterface.OnClickListener() {\n\n                @Override\n                public void onClick(DialogInterface dialog, int which) {\n\n                    // Do nothing\n                    dialog.dismiss();\n                }\n            });\n\n            AlertDialog alert = builder.create();\n            alert.show();\n        }\n    });\n}\n</code></pre>\n"},{"tags":["java","sql"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1671237222,"post_id":74830902,"comment_id":132063418,"body_markdown":"What do you mean that `=` &quot;doesn&#39;t work&quot;? What happens?","body":"What do you mean that <code>=</code> &quot;doesn&#39;t work&quot;? What happens?"},{"owner":{"account_id":22222288,"reputation":3,"user_id":16459724,"display_name":"Saber"},"score":0,"creation_date":1671380321,"post_id":74830902,"comment_id":132082636,"body_markdown":"The query returns no results.","body":"The query returns no results."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1671399850,"post_id":74830902,"comment_id":132085958,"body_markdown":"You&#39;ll need to show a runnable, minimal example which reproduces the problem.","body":"You&#39;ll need to show a runnable, minimal example which reproduces the problem."}],"owner":{"account_id":22222288,"reputation":3,"user_id":16459724,"display_name":"Saber"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671245932,"creation_date":1671235552,"question_id":74830902,"body_markdown":"```sqlQueryString.append(&quot; and upper(username) like upper(:searchString) &quot;);```\r\n\r\nThis code returns data like exampleusername, exampleusername1, exampleusername12...\r\n\r\nI want it to return data with an exact match to the username that is being searched. \r\n\r\nFor example when I put in bobJacobs (an example username), I want it to return only bobJacobs records, not other records that may contain bobJacobs in them, for example samandbobJacobs24, bobJacobs23, etc.\r\n\r\nI&#39;ve tried: \r\n```sqlQueryString.append(&quot; and upper(username) = upper(:searchString) &quot;);```\r\n\r\nBut it doesn&#39;t work. Any solutions? \r\n","title":"Finding exact match with equal sign with append function in SQL","body":"<p><code>sqlQueryString.append(&quot; and upper(username) like upper(:searchString) &quot;);</code></p>\n<p>This code returns data like exampleusername, exampleusername1, exampleusername12...</p>\n<p>I want it to return data with an exact match to the username that is being searched.</p>\n<p>For example when I put in bobJacobs (an example username), I want it to return only bobJacobs records, not other records that may contain bobJacobs in them, for example samandbobJacobs24, bobJacobs23, etc.</p>\n<p>I've tried:\n<code>sqlQueryString.append(&quot; and upper(username) = upper(:searchString) &quot;);</code></p>\n<p>But it doesn't work. Any solutions?</p>\n"},{"tags":["java","lambda","hashmap"],"comments":[{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1532088848,"post_id":51442292,"comment_id":89854387,"body_markdown":"&quot;fail to work&quot;? What happened? A compile error? An exception?","body":"&quot;fail to work&quot;? What happened? A compile error? An exception?"},{"owner":{"account_id":4325252,"reputation":1480,"user_id":3532271,"accept_rate":65,"display_name":"Efie"},"score":0,"creation_date":1532088983,"post_id":51442292,"comment_id":89854467,"body_markdown":"It compiled just fine but did not actually increment the value of v, which led to the code giving an incorrect answer","body":"It compiled just fine but did not actually increment the value of v, which led to the code giving an incorrect answer"},{"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"score":1,"creation_date":1532089023,"post_id":51442292,"comment_id":89854501,"body_markdown":"Because `v++` returns `v` and then increments it by `1`. `v + 1` immediately returns `v + 1`. there is a chance that `++v` would work just like `v + 1`.","body":"Because <code>v++</code> returns <code>v</code> and then increments it by <code>1</code>. <code>v + 1</code> immediately returns <code>v + 1</code>. there is a chance that <code>++v</code> would work just like <code>v + 1</code>."}],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1532088966,"creation_date":1532088966,"answer_id":51442355,"question_id":51442292,"body_markdown":"The return value of `v++` is the value of `v` *before* it was incremented.\r\n\r\nSince the only thing that matters in this lambda is the return value, that would be equivalent of just using `(k, v) -&gt; v`.\r\n\r\nIf you wanted to use a shorthand `++v` would work, but `v + 1` is clearer.","title":"Behavior of lambda functions in Java 8","body":"<p>The return value of <code>v++</code> is the value of <code>v</code> <em>before</em> it was incremented.</p>\n\n<p>Since the only thing that matters in this lambda is the return value, that would be equivalent of just using <code>(k, v) -&gt; v</code>.</p>\n\n<p>If you wanted to use a shorthand <code>++v</code> would work, but <code>v + 1</code> is clearer.</p>\n"},{"tags":[],"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1532088975,"creation_date":1532088975,"answer_id":51442360,"question_id":51442292,"body_markdown":"`v++` returns the previous value of `v`.\r\n\r\nFor example:\r\n\r\n    int v = 5;\r\n    int newValue = v++;\r\n    // newValue is now equal to 5\r\n\r\nIf your lambda function returns the old value of `v`, that&#39;s probably not what you intended.\r\n\r\nIf you had used `++v` instead of `v++` it might have done what you want, since `++v` increments `v` and returns the _new_ value.\r\n\r\nBut still, `v+1` is clearer. Your lambda function is supposed to _return one higher than v_, not to increment `v`.","title":"Behavior of lambda functions in Java 8","body":"<p><code>v++</code> returns the previous value of <code>v</code>.</p>\n\n<p>For example:</p>\n\n<pre><code>int v = 5;\nint newValue = v++;\n// newValue is now equal to 5\n</code></pre>\n\n<p>If your lambda function returns the old value of <code>v</code>, that's probably not what you intended.</p>\n\n<p>If you had used <code>++v</code> instead of <code>v++</code> it might have done what you want, since <code>++v</code> increments <code>v</code> and returns the <em>new</em> value.</p>\n\n<p>But still, <code>v+1</code> is clearer. Your lambda function is supposed to <em>return one higher than v</em>, not to increment <code>v</code>.</p>\n"}],"owner":{"account_id":4325252,"reputation":1480,"user_id":3532271,"accept_rate":65,"display_name":"Efie"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1532089422,"answer_count":2,"score":0,"last_activity_date":1671245809,"creation_date":1532088791,"question_id":51442292,"body_markdown":"I have been studying leetcode problems and ran into one where I needed to increment the value of an existing key/value pair in a HashMap. I found the consensus was that the best way to do this in Java 8 is the following piece of code:\r\n\r\n    myMap.computeIfPresent(key, (k, v) -&gt; v + 1);\r\n\r\nIn this example, why does `v++` fail to work in place of `v + 1`?\r\n\r\nSecondly, where might I go besides asking the question here to figure this out? I got the code to work but want to understand why my first instinct to put `v++` doesn&#39;t.","title":"Behavior of lambda functions in Java 8","body":"<p>I have been studying leetcode problems and ran into one where I needed to increment the value of an existing key/value pair in a HashMap. I found the consensus was that the best way to do this in Java 8 is the following piece of code:</p>\n\n<pre><code>myMap.computeIfPresent(key, (k, v) -&gt; v + 1);\n</code></pre>\n\n<p>In this example, why does <code>v++</code> fail to work in place of <code>v + 1</code>?</p>\n\n<p>Secondly, where might I go besides asking the question here to figure this out? I got the code to work but want to understand why my first instinct to put <code>v++</code> doesn't.</p>\n"},{"tags":["java","json","jackson","tree-traversal"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1671240642,"post_id":74831172,"comment_id":132063740,"body_markdown":"What are you using?  GSON?  Jackson?","body":"What are you using?  GSON?  Jackson?"},{"owner":{"account_id":17654983,"reputation":115,"user_id":12814777,"display_name":"dataman"},"score":0,"creation_date":1671240897,"post_id":74831172,"comment_id":132063762,"body_markdown":"Using Jackson ObjectMapper here","body":"Using Jackson ObjectMapper here"}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671245728,"creation_date":1671242049,"answer_id":74831283,"question_id":74831172,"body_markdown":"You can implement one of the tree-traversal algorithms, for instance [*Depth first search algorithm*][dfs], and iterate over the tree of Nodes until the target property wasn&#39;t found (or until the tree is fully explored).\r\n\r\nThat how iterative implementation of the Depth first search based on functionality of the Jackson&#39;s `JsonNode` might look like:\r\n\r\n    public static &lt;T&gt; T search(String json, String target, Class&lt;T&gt; tClass) throws JsonProcessingException {\r\n        \r\n        JsonNode node = new ObjectMapper().readTree(json);\r\n    \r\n        T result = null;\r\n        \r\n        Deque&lt;JsonNode&gt; stack = new ArrayDeque&lt;&gt;();\r\n        stack.push(node);\r\n    \r\n        while (!stack.isEmpty()) {\r\n            JsonNode current = stack.pop();\r\n        \r\n            if (current.isContainerNode()) {\r\n            \r\n                for (Iterator&lt;Map.Entry&lt;String, JsonNode&gt;&gt; it = current.fields(); it.hasNext(); ) {\r\n                \r\n                    Map.Entry&lt;String, JsonNode&gt; next = it.next();\r\n    \r\n                    if (next.getKey().equals(target)) {\r\n                        result = tClass.cast(next.getValue());\r\n                    }\r\n                    \r\n                    stack.push(next.getValue());\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\nAnd that&#39;s how Depth first search can implemented recursively. Instead of returning `null` as a default value we can change the return type to `Optional` (it can be done in the previous version as well).\r\n\r\n    public static &lt;T&gt; Optional&lt;T&gt; search(String json, String target, Class&lt;T&gt; tClass) throws JsonProcessingException {\r\n        \r\n        JsonNode node = new ObjectMapper().readTree(json);\r\n        Object result = search(node, target);\r\n        \r\n        return result != null ? Optional.of(tClass.cast(result)) : Optional.empty();\r\n    }\r\n    \r\n    public static Object search(JsonNode node, String target) {\r\n        if (!node.isContainerNode()) return null;\r\n        \r\n        Object result = null;\r\n    \r\n        for (Iterator&lt;Map.Entry&lt;String, JsonNode&gt;&gt; it = node.fields(); it.hasNext() &amp;&amp; result == null; ) {\r\n            Map.Entry&lt;String, JsonNode&gt; next = it.next();\r\n        \r\n            if (next.getKey().equals(target)) {\r\n                return next.getValue();\r\n            }\r\n            result = search(next.getValue(),target);\r\n        }\r\n        return result;\r\n    }\r\n\r\n\r\n   [dfs]: https://en.wikipedia.org/wiki/Depth-first_search","title":"How to deserialize deeply nested JSON without separate classes for each level","body":"<p>You can implement one of the tree-traversal algorithms, for instance <a href=\"https://en.wikipedia.org/wiki/Depth-first_search\" rel=\"nofollow noreferrer\"><em>Depth first search algorithm</em></a>, and iterate over the tree of Nodes until the target property wasn't found (or until the tree is fully explored).</p>\n<p>That how iterative implementation of the Depth first search based on functionality of the Jackson's <code>JsonNode</code> might look like:</p>\n<pre><code>public static &lt;T&gt; T search(String json, String target, Class&lt;T&gt; tClass) throws JsonProcessingException {\n    \n    JsonNode node = new ObjectMapper().readTree(json);\n\n    T result = null;\n    \n    Deque&lt;JsonNode&gt; stack = new ArrayDeque&lt;&gt;();\n    stack.push(node);\n\n    while (!stack.isEmpty()) {\n        JsonNode current = stack.pop();\n    \n        if (current.isContainerNode()) {\n        \n            for (Iterator&lt;Map.Entry&lt;String, JsonNode&gt;&gt; it = current.fields(); it.hasNext(); ) {\n            \n                Map.Entry&lt;String, JsonNode&gt; next = it.next();\n\n                if (next.getKey().equals(target)) {\n                    result = tClass.cast(next.getValue());\n                }\n                \n                stack.push(next.getValue());\n            }\n        }\n    }\n    return result;\n}\n</code></pre>\n<p>And that's how Depth first search can implemented recursively. Instead of returning <code>null</code> as a default value we can change the return type to <code>Optional</code> (it can be done in the previous version as well).</p>\n<pre><code>public static &lt;T&gt; Optional&lt;T&gt; search(String json, String target, Class&lt;T&gt; tClass) throws JsonProcessingException {\n    \n    JsonNode node = new ObjectMapper().readTree(json);\n    Object result = search(node, target);\n    \n    return result != null ? Optional.of(tClass.cast(result)) : Optional.empty();\n}\n\npublic static Object search(JsonNode node, String target) {\n    if (!node.isContainerNode()) return null;\n    \n    Object result = null;\n\n    for (Iterator&lt;Map.Entry&lt;String, JsonNode&gt;&gt; it = node.fields(); it.hasNext() &amp;&amp; result == null; ) {\n        Map.Entry&lt;String, JsonNode&gt; next = it.next();\n    \n        if (next.getKey().equals(target)) {\n            return next.getValue();\n        }\n        result = search(next.getValue(),target);\n    }\n    return result;\n}\n</code></pre>\n"}],"owner":{"account_id":17654983,"reputation":115,"user_id":12814777,"display_name":"dataman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":341,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671245804,"creation_date":1671240287,"question_id":74831172,"body_markdown":"Say in Java I want to deserialize a JSON string such as:\r\n\r\n    { \r\n      &quot;classb&quot;: {\r\n        &quot;c&quot;: &quot;myc&quot;\r\n       }\r\n    }\r\n\r\nSo I can create model classes like so:\r\n\r\n    @Data\r\n    class Classa {\r\n         Classb classb;\r\n    }\r\n    \r\n    @Data\r\n    class Classb {\r\n        String c;\r\n    }\r\n\r\nAnd print the deserialized value like so:\r\n\r\n    System.out.println(new ObjectMapper().readValue(json, Classa.class).getClassb().getC()  );\r\n\r\nSo my question is, when we are only interested in a value that is deeply nested in class objects and we need a getter for that value, do we have to create a separate model class for each object, or is there a way to create a single model class which contains the nested classes like this, and be able to access the inner objects with a getter, like  `getC()`\r\n\r\n\r\n    @Data\r\n    class Classa {\r\n        class Classb {\r\n            String c;\r\n        }\r\n    }","title":"How to deserialize deeply nested JSON without separate classes for each level","body":"<p>Say in Java I want to deserialize a JSON string such as:</p>\n<pre><code>{ \n  &quot;classb&quot;: {\n    &quot;c&quot;: &quot;myc&quot;\n   }\n}\n</code></pre>\n<p>So I can create model classes like so:</p>\n<pre><code>@Data\nclass Classa {\n     Classb classb;\n}\n\n@Data\nclass Classb {\n    String c;\n}\n</code></pre>\n<p>And print the deserialized value like so:</p>\n<pre><code>System.out.println(new ObjectMapper().readValue(json, Classa.class).getClassb().getC()  );\n</code></pre>\n<p>So my question is, when we are only interested in a value that is deeply nested in class objects and we need a getter for that value, do we have to create a separate model class for each object, or is there a way to create a single model class which contains the nested classes like this, and be able to access the inner objects with a getter, like  <code>getC()</code></p>\n<pre><code>@Data\nclass Classa {\n    class Classb {\n        String c;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":7916758,"reputation":2239,"user_id":5978955,"display_name":"JArgente"},"score":1,"creation_date":1609772709,"post_id":65564839,"comment_id":115919575,"body_markdown":"consider to use flyway for example, it has a very good integration with springboot and it runs all the migration scripts that you need before the server starts https://www.baeldung.com/database-migrations-with-flyway","body":"consider to use flyway for example, it has a very good integration with springboot and it runs all the migration scripts that you need before the server starts <a href=\"https://www.baeldung.com/database-migrations-with-flyway\" rel=\"nofollow noreferrer\">baeldung.com/database-migrations-with-flyway</a>"},{"owner":{"account_id":1062313,"reputation":2649,"user_id":1063673,"accept_rate":80,"display_name":"Steffen Harbich"},"score":0,"creation_date":1609834619,"post_id":65564839,"comment_id":115938647,"body_markdown":"Using Neo4j, it would be Liquigraph but I am already happy with my migration part which is working fine except that it is run too late. But thanks for the pointer.","body":"Using Neo4j, it would be Liquigraph but I am already happy with my migration part which is working fine except that it is run too late. But thanks for the pointer."}],"answers":[{"tags":[],"owner":{"account_id":7916758,"reputation":2239,"user_id":5978955,"display_name":"JArgente"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671245782,"creation_date":1609772849,"answer_id":65564969,"question_id":65564839,"body_markdown":"You can use `@PostConstruct` method in the bean that you use to connect to the database (repository) and write there the code you need to run the scripts, this code is going to be executed after the bean is created but before the server is running.\r\n\r\nExample: https://www.baeldung.com/spring-postconstruct-predestroy","title":"Ensure code is executed before webserver exposing HTTP in spring boot","body":"<p>You can use <code>@PostConstruct</code> method in the bean that you use to connect to the database (repository) and write there the code you need to run the scripts, this code is going to be executed after the bean is created but before the server is running.</p>\n<p>Example: <a href=\"https://www.baeldung.com/spring-postconstruct-predestroy\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-postconstruct-predestroy</a></p>\n"},{"tags":[],"owner":{"account_id":1062313,"reputation":2649,"user_id":1063673,"accept_rate":80,"display_name":"Steffen Harbich"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1610461980,"creation_date":1610461980,"answer_id":65685994,"question_id":65564839,"body_markdown":"I used the following approach finally:\r\n\r\n    @Component\r\n    public class MigrationLogic implements SmartInitializingSingleton {\r\n\r\n        @Override\r\n        @Transactional\r\n        public void afterSingletonsInstantiated() {\r\n            // run your logic here, declare dependencies with @Autowired\r\n        }\r\n\r\n    }\r\n\r\nThe `SmartInitializingSingleton` executes before the web server is starting up.","title":"Ensure code is executed before webserver exposing HTTP in spring boot","body":"<p>I used the following approach finally:</p>\n<pre><code>@Component\npublic class MigrationLogic implements SmartInitializingSingleton {\n\n    @Override\n    @Transactional\n    public void afterSingletonsInstantiated() {\n        // run your logic here, declare dependencies with @Autowired\n    }\n\n}\n</code></pre>\n<p>The <code>SmartInitializingSingleton</code> executes before the web server is starting up.</p>\n"}],"owner":{"account_id":1062313,"reputation":2649,"user_id":1063673,"accept_rate":80,"display_name":"Steffen Harbich"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":459,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":65564969,"answer_count":2,"score":2,"last_activity_date":1671245782,"creation_date":1609772353,"question_id":65564839,"body_markdown":"In spring boot web application, is it possible to ensure some code is executed before the embedded webserver (tomcat) is listening for incoming requests?\r\n\r\nI have some data base migration scripts that need to be run before any request from my REST API is responded by the application. How can I do that? For now, my migration script component uses `@EventListener` for `ContextRefreshedEvent` but that is too late. The following line is already logged before: \r\n\r\n&gt; o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8091 (http) with context path &#39;&#39;\r\n","title":"Ensure code is executed before webserver exposing HTTP in spring boot","body":"<p>In spring boot web application, is it possible to ensure some code is executed before the embedded webserver (tomcat) is listening for incoming requests?</p>\n<p>I have some data base migration scripts that need to be run before any request from my REST API is responded by the application. How can I do that? For now, my migration script component uses <code>@EventListener</code> for <code>ContextRefreshedEvent</code> but that is too late. The following line is already logged before:</p>\n<blockquote>\n<p>o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8091 (http) with context path ''</p>\n</blockquote>\n"},{"tags":["java","arrays","arraylist"],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1670741679,"creation_date":1670741679,"answer_id":74758932,"question_id":74758738,"body_markdown":"Refer to [Is Java &quot;pass-by-reference&quot; or &quot;pass-by-value&quot;?](https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value).\r\n\r\nYou are adding the same `ArrayList` to `finalList`. I suggest that you verify this by running your code with the debugger of your IDE. You need to create a copy of `al` and add the copy to `finalList`.\r\n\r\nThere are many ways to make a copy. Refer to [How to clone ArrayList and also clone its contents?](https://stackoverflow.com/questions/715650/how-to-clone-arraylist-and-also-clone-its-contents). In the below code, I use the [&quot;copy&quot; constructor](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ArrayList.html#%3Cinit%3E(java.util.Collection)) of class `java.util.ArrayList`.\r\n```java\r\nimport java.util.ArrayList;\r\n\r\npublic class Test {\r\n    static int[] arr = {2, 4, 6, 8, 10};\r\n    static ArrayList&lt;Integer&gt; al = new ArrayList&lt;&gt;();\r\n    static ArrayList&lt;ArrayList&lt;Integer&gt;&gt; finalList = new ArrayList&lt;&gt;();\r\n\r\n    public static void makePairs() {\r\n        for (int i = 0; i &lt; arr.length - 1; i++) {\r\n            al.clear();\r\n            al.add(arr[i]);\r\n            for (int j = i + 1; j &lt; arr.length; j++) {\r\n                al.add(arr[j]);\r\n//                System.out.print(al);\r\n                finalList.add(new ArrayList&lt;&gt;(al)); // CHANGE HERE\r\n                al.remove(1);\r\n            }\r\n//            System.out.println();\r\n            System.out.println(finalList);\r\n            finalList.clear();\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        makePairs();\r\n    }\r\n}\r\n```\r\nNote that I only changed one line of the code in your question.\r\n\r\nWhen I run the above code, I get the following output:\r\n```none\r\n[[2, 4], [2, 6], [2, 8], [2, 10]]\r\n[[4, 6], [4, 8], [4, 10]]\r\n[[6, 8], [6, 10]]\r\n[[8, 10]]\r\n```\r\n","title":"Can pairs of element in an array converted and displayed in arraylist of arraylist?","body":"<p>Refer to <a href=\"https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value\">Is Java &quot;pass-by-reference&quot; or &quot;pass-by-value&quot;?</a>.</p>\n<p>You are adding the same <code>ArrayList</code> to <code>finalList</code>. I suggest that you verify this by running your code with the debugger of your IDE. You need to create a copy of <code>al</code> and add the copy to <code>finalList</code>.</p>\n<p>There are many ways to make a copy. Refer to <a href=\"https://stackoverflow.com/questions/715650/how-to-clone-arraylist-and-also-clone-its-contents\">How to clone ArrayList and also clone its contents?</a>. In the below code, I use the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ArrayList.html#%3Cinit%3E(java.util.Collection)\" rel=\"nofollow noreferrer\">&quot;copy&quot; constructor</a> of class <code>java.util.ArrayList</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\n\npublic class Test {\n    static int[] arr = {2, 4, 6, 8, 10};\n    static ArrayList&lt;Integer&gt; al = new ArrayList&lt;&gt;();\n    static ArrayList&lt;ArrayList&lt;Integer&gt;&gt; finalList = new ArrayList&lt;&gt;();\n\n    public static void makePairs() {\n        for (int i = 0; i &lt; arr.length - 1; i++) {\n            al.clear();\n            al.add(arr[i]);\n            for (int j = i + 1; j &lt; arr.length; j++) {\n                al.add(arr[j]);\n//                System.out.print(al);\n                finalList.add(new ArrayList&lt;&gt;(al)); // CHANGE HERE\n                al.remove(1);\n            }\n//            System.out.println();\n            System.out.println(finalList);\n            finalList.clear();\n        }\n    }\n\n    public static void main(String[] args) {\n        makePairs();\n    }\n}\n</code></pre>\n<p>Note that I only changed one line of the code in your question.</p>\n<p>When I run the above code, I get the following output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>[[2, 4], [2, 6], [2, 8], [2, 10]]\n[[4, 6], [4, 8], [4, 10]]\n[[6, 8], [6, 10]]\n[[8, 10]]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23463597,"reputation":21,"user_id":17518141,"display_name":"vhg2901"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670742229,"creation_date":1670742229,"answer_id":74758963,"question_id":74758738,"body_markdown":"i think because your &quot;al&quot; array is static, when you add it to &quot;finalList&quot; it still a static variable and still can be modified, so when you remove al(1), it will remove the element from the static &quot;al&quot; in the FinalList. In this case you can try add a clone of &quot;al&quot;.\r\n\r\n    \r\n    finalList.add((ArrayList)al.clone());\r\n    al.clear();","title":"Can pairs of element in an array converted and displayed in arraylist of arraylist?","body":"<p>i think because your &quot;al&quot; array is static, when you add it to &quot;finalList&quot; it still a static variable and still can be modified, so when you remove al(1), it will remove the element from the static &quot;al&quot; in the FinalList. In this case you can try add a clone of &quot;al&quot;.</p>\n<pre><code>finalList.add((ArrayList)al.clone());\nal.clear();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27216231,"reputation":37,"user_id":20746216,"display_name":"JavaBoi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671245758,"creation_date":1670991940,"answer_id":74793567,"question_id":74758738,"body_markdown":"I realized that when I was adding my ArrayList al to the &#39;ArrayList of ArrayList&#39; that I created which I called finalList, it was not passing a new copy of al `ArrayList` but the reference to it.\r\n\r\nI thought that it would pass a new copy as they say **Java is Pass By Value** but I see it&#39;s not the same case with arrays and `ArrayList`, we we pass them as arguments, there references are passed.\r\n\r\nI found my solution by using the copy constructor of the `ArrayList` as suggested by @Abra.\r\n\r\n\r\nHere is the updated source code. \r\n\r\n\r\n```java\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.stream.Collectors;\r\n\r\npublic class Test {\r\n    static int[] arr = {2, 4, 6, 8, 10};\r\n    static ArrayList&lt;Integer&gt; al = new ArrayList&lt;&gt;();\r\n    static ArrayList&lt;ArrayList&gt; finalList = new ArrayList&lt;&gt;();\r\n\r\n    public static void makePairs() {\r\n        for (int i = 0; i &lt; arr.length - 1; i++) {\r\n            al.clear();\r\n            al.add(arr[i]);\r\n\r\n            for (int j = i + 1; j &lt; arr.length; j++) {\r\n                al.add(arr[j]);\r\n\t\t\t\r\n\t\t\t/* \r\n\t\t\tint[] array = al.stream().mapToInt(k -&gt; k).toArray();\r\n\t\t\t\r\n\t\t\tArrayList&lt;Integer&gt; newlist = (ArrayList&lt;Integer&gt;) Arrays.stream(array).boxed().collect(Collectors.toList());\r\n\t\t\t\r\n\t\t\tfinalList.add(newlist);\r\n\t\t\t*/\r\n\r\n                finalList.add(new ArrayList&lt;&gt;(al)); // CHANGE HERE\r\n\r\n                al.remove(1);\r\n            }\r\n\r\n            System.out.println(finalList);\r\n            finalList.clear();\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        makePairs();\r\n    }\r\n}\r\n```","title":"Can pairs of element in an array converted and displayed in arraylist of arraylist?","body":"<p>I realized that when I was adding my ArrayList al to the 'ArrayList of ArrayList' that I created which I called finalList, it was not passing a new copy of al <code>ArrayList</code> but the reference to it.</p>\n<p>I thought that it would pass a new copy as they say <strong>Java is Pass By Value</strong> but I see it's not the same case with arrays and <code>ArrayList</code>, we we pass them as arguments, there references are passed.</p>\n<p>I found my solution by using the copy constructor of the <code>ArrayList</code> as suggested by @Abra.</p>\n<p>Here is the updated source code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.stream.Collectors;\n\npublic class Test {\n    static int[] arr = {2, 4, 6, 8, 10};\n    static ArrayList&lt;Integer&gt; al = new ArrayList&lt;&gt;();\n    static ArrayList&lt;ArrayList&gt; finalList = new ArrayList&lt;&gt;();\n\n    public static void makePairs() {\n        for (int i = 0; i &lt; arr.length - 1; i++) {\n            al.clear();\n            al.add(arr[i]);\n\n            for (int j = i + 1; j &lt; arr.length; j++) {\n                al.add(arr[j]);\n            \n            /* \n            int[] array = al.stream().mapToInt(k -&gt; k).toArray();\n            \n            ArrayList&lt;Integer&gt; newlist = (ArrayList&lt;Integer&gt;) Arrays.stream(array).boxed().collect(Collectors.toList());\n            \n            finalList.add(newlist);\n            */\n\n                finalList.add(new ArrayList&lt;&gt;(al)); // CHANGE HERE\n\n                al.remove(1);\n            }\n\n            System.out.println(finalList);\n            finalList.clear();\n        }\n    }\n\n    public static void main(String[] args) {\n        makePairs();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":27216231,"reputation":37,"user_id":20746216,"display_name":"JavaBoi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74758932,"answer_count":3,"score":0,"last_activity_date":1671245758,"creation_date":1670739043,"question_id":74758738,"body_markdown":"I am trying to make pairs of elements in an array and store them in an `ArrayList` (`al` variable in below code). Then store those `ArrayList` objects in an `ArrayList` of `ArrayList` (variable `finalList` in below code) and then print `finalList`.\r\n\r\nI am able to get my output if I only use `ArrayList` and not `finalList`, but I want to know what is going wrong in my code. Why is it not displaying me the proper output?\r\n```java\r\nimport java.util.ArrayList;\r\n\r\npublic class Test {\r\n    static int[] arr = {2,4,6,8,10};\r\n    static ArrayList&lt;Integer&gt; al = new ArrayList&lt;Integer&gt;();\r\n    static ArrayList&lt;ArrayList&gt; finalList = new ArrayList&lt;ArrayList&gt;();\r\n\r\n    public static void makePairs() {\r\n        for(int i = 0; i &lt; arr.length - 1; i++) {\r\n            al.clear();\r\n            al.add(arr[i]);\r\n            for(int j = i + 1; j &lt; arr.length; j++) {\r\n                al.add(arr[j]);\r\n//                System.out.print(al);\r\n                finalList.add(al);\r\n                al.remove(1);\r\n            }\r\n//            System.out.println();\r\n            System.out.println(finalList);\r\n            finalList.clear();\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        makePairs();\r\n    }\r\n}\r\n```\r\nThis is the output I am getting.\r\n\r\n[enter image description here](https://i.stack.imgur.com/mUK6p.png)\r\n\r\nThe output I am expecting is: \r\n```none\r\n[[2,4], [2,6], [2,8], [2,10]]\r\n[[4,6], [4,8], [4,10]]\r\n[[6,8], [6,10]]\r\n[[8,10]]\r\n```\r\nPlease help me resolve my problem.","title":"Can pairs of element in an array converted and displayed in arraylist of arraylist?","body":"<p>I am trying to make pairs of elements in an array and store them in an <code>ArrayList</code> (<code>al</code> variable in below code). Then store those <code>ArrayList</code> objects in an <code>ArrayList</code> of <code>ArrayList</code> (variable <code>finalList</code> in below code) and then print <code>finalList</code>.</p>\n<p>I am able to get my output if I only use <code>ArrayList</code> and not <code>finalList</code>, but I want to know what is going wrong in my code. Why is it not displaying me the proper output?</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\n\npublic class Test {\n    static int[] arr = {2,4,6,8,10};\n    static ArrayList&lt;Integer&gt; al = new ArrayList&lt;Integer&gt;();\n    static ArrayList&lt;ArrayList&gt; finalList = new ArrayList&lt;ArrayList&gt;();\n\n    public static void makePairs() {\n        for(int i = 0; i &lt; arr.length - 1; i++) {\n            al.clear();\n            al.add(arr[i]);\n            for(int j = i + 1; j &lt; arr.length; j++) {\n                al.add(arr[j]);\n//                System.out.print(al);\n                finalList.add(al);\n                al.remove(1);\n            }\n//            System.out.println();\n            System.out.println(finalList);\n            finalList.clear();\n        }\n    }\n\n    public static void main(String[] args) {\n        makePairs();\n    }\n}\n</code></pre>\n<p>This is the output I am getting.</p>\n<p><a href=\"https://i.stack.imgur.com/mUK6p.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>The output I am expecting is:</p>\n<pre class=\"lang-none prettyprint-override\"><code>[[2,4], [2,6], [2,8], [2,10]]\n[[4,6], [4,8], [4,10]]\n[[6,8], [6,10]]\n[[8,10]]\n</code></pre>\n<p>Please help me resolve my problem.</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1671203054,"post_id":74825559,"comment_id":132055045,"body_markdown":"Going forward, please only use the `android-studio` tag for questions about the Android Studio IDE itself. For questions about Android programming in general, use the `android` tag.","body":"Going forward, please only use the <code>android-studio</code> tag for questions about the Android Studio IDE itself. For questions about Android programming in general, use the <code>android</code> tag."},{"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1671203185,"post_id":74825559,"comment_id":132055093,"body_markdown":"What value does `devicename` have? And did you check what value `mutableData.getValue()` returns?","body":"What value does <code>devicename</code> have? And did you check what value <code>mutableData.getValue()</code> returns?"}],"owner":{"account_id":14131656,"reputation":1,"user_id":20786512,"display_name":"laos"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1671260636,"answer_count":0,"score":0,"last_activity_date":1671245483,"creation_date":1671199593,"question_id":74825559,"body_markdown":"![Structure of firebase database](https://i.stack.imgur.com/aWxIK.png) \r\n\r\nI want to check if a particular device exists in the firebase database before adding it. I have tried using valueevent listener and singlevalue event listener but both were prone to race conditions. \r\n\r\nSo I tried using Firebase transaction, but even that doesn&#39;t work. \r\n\r\nHere is the code:\r\n\r\n```\r\nDevices devices=new Devices(devicename,timein,email,timeout);\r\n\r\n\r\nmyRef.child(&quot;Device-1&quot;).runTransaction(new Transaction.Handler() {\r\n    @Override\r\n    public Transaction.Result doTransaction(MutableData mutableData) {\r\n        if (mutableData.getValue() != devicename) {\r\n            myRef.child(&quot;Device-1&quot;).push().setValue(devices);\r\n            // Data does not exist, add it\r\n\r\n            return Transaction.success(mutableData);\r\n        }\r\n        return Transaction.abort();\r\n    }\r\n\r\n    @Override\r\n    public void onComplete(DatabaseError error, boolean committed, DataSnapshot snapshot) {\r\n        if (error != null) {\r\n            // Handle error\r\n        }\r\n    }\r\n});\r\n```\r\n\r\nI was expecting it to not add the data the second time, as there was always already an entry in the database with the same devicename","title":"Check if data exists in firebase realtime database for adding it","body":"<p><img src=\"https://i.stack.imgur.com/aWxIK.png\" alt=\"Structure of firebase database\" /></p>\n<p>I want to check if a particular device exists in the firebase database before adding it. I have tried using valueevent listener and singlevalue event listener but both were prone to race conditions.</p>\n<p>So I tried using Firebase transaction, but even that doesn't work.</p>\n<p>Here is the code:</p>\n<pre><code>Devices devices=new Devices(devicename,timein,email,timeout);\n\n\nmyRef.child(&quot;Device-1&quot;).runTransaction(new Transaction.Handler() {\n    @Override\n    public Transaction.Result doTransaction(MutableData mutableData) {\n        if (mutableData.getValue() != devicename) {\n            myRef.child(&quot;Device-1&quot;).push().setValue(devices);\n            // Data does not exist, add it\n\n            return Transaction.success(mutableData);\n        }\n        return Transaction.abort();\n    }\n\n    @Override\n    public void onComplete(DatabaseError error, boolean committed, DataSnapshot snapshot) {\n        if (error != null) {\n            // Handle error\n        }\n    }\n});\n</code></pre>\n<p>I was expecting it to not add the data the second time, as there was always already an entry in the database with the same devicename</p>\n"},{"tags":["java","excel","apache-poi"],"comments":[{"owner":{"account_id":964210,"reputation":1018,"user_id":987959,"display_name":"PJ Fanning"},"score":0,"creation_date":1671056999,"post_id":74801814,"comment_id":132018200,"body_markdown":"Have you set German Locale using POI&#39;s LocaleUtil class?","body":"Have you set German Locale using POI&#39;s LocaleUtil class?"},{"owner":{"account_id":7495666,"reputation":300,"user_id":6468436,"display_name":"User1751"},"score":0,"creation_date":1671089959,"post_id":74801814,"comment_id":132023693,"body_markdown":"Unfortunately, it is not a duplicate. I don&#39;t want to convert the date but just get the raw string 30.08.2022.. Since in the future all possible formats can be in the cell","body":"Unfortunately, it is not a duplicate. I don&#39;t want to convert the date but just get the raw string 30.08.2022.. Since in the future all possible formats can be in the cell"},{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":1,"creation_date":1671096541,"post_id":74801814,"comment_id":132025579,"body_markdown":"Generally Excel stores everything in US format, and changes how it is displayed when the file is opened. What makes you think Excel actually stores your date in your specific format in the file itself? If you open the file in Excel in a different locale, how does it look there?","body":"Generally Excel stores everything in US format, and changes how it is displayed when the file is opened. What makes you think Excel actually stores your date in your specific format in the file itself? If you open the file in Excel in a different locale, how does it look there?"}],"answers":[{"tags":[],"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671245032,"creation_date":1671130335,"answer_id":74816244,"question_id":74801814,"body_markdown":"As shown [here][1], the value 44803 is the correct number of days since the Excel epoch. You can use `getDataFormatString()` from the cell&#39;s style to obtain the format string used by Excel to display the value. The output below includes the formatted `Date`, followed by [the raw data : the data format index : and corresponding format string]:\r\n\r\n    Tue Aug 30 00:00:00 EDT 2022 [44803:59:m/d/yyyy]\r\n\r\n```\r\nif (DateUtil.isCellDateFormatted(cell)) {\r\n    System.out.print(cell.getDateCellValue() + getFormat(cell));\r\n}\r\n…\r\nprivate static String getFormat(Cell cell) {\r\n    return &quot; [&quot;\r\n        + (int) cell.getNumericCellValue() + &quot;:&quot;\r\n        + cell.getCellStyle().getDataFormat() + &quot;:&quot;\r\n        + cell.getCellStyle().getDataFormatString() + &quot;]&quot;;\r\n}\r\n```\r\n\r\nConversely, given an instance of `DataFormatter`, you can format the raw date with the specified format, yielding `8/30/2022`:\r\n\r\n```\r\nvar df = new DataFormatter();\r\nSystem.out.println(df.formatRawCellContents(44803, 59, &quot;m/d/yyyy&quot;));\r\n```\r\n\r\n  [1]: https://stackoverflow.com/a/25817622/230513\r\n\r\n\r\n","title":"Get raw date value with Apache POI from a excel cell","body":"<p>As shown <a href=\"https://stackoverflow.com/a/25817622/230513\">here</a>, the value 44803 is the correct number of days since the Excel epoch. You can use <code>getDataFormatString()</code> from the cell's style to obtain the format string used by Excel to display the value. The output below includes the formatted <code>Date</code>, followed by [the raw data : the data format index : and corresponding format string]:</p>\n<pre><code>Tue Aug 30 00:00:00 EDT 2022 [44803:59:m/d/yyyy]\n</code></pre>\n<pre><code>if (DateUtil.isCellDateFormatted(cell)) {\n    System.out.print(cell.getDateCellValue() + getFormat(cell));\n}\n…\nprivate static String getFormat(Cell cell) {\n    return &quot; [&quot;\n        + (int) cell.getNumericCellValue() + &quot;:&quot;\n        + cell.getCellStyle().getDataFormat() + &quot;:&quot;\n        + cell.getCellStyle().getDataFormatString() + &quot;]&quot;;\n}\n</code></pre>\n<p>Conversely, given an instance of <code>DataFormatter</code>, you can format the raw date with the specified format, yielding <code>8/30/2022</code>:</p>\n<pre><code>var df = new DataFormatter();\nSystem.out.println(df.formatRawCellContents(44803, 59, &quot;m/d/yyyy&quot;));\n</code></pre>\n"}],"owner":{"account_id":7495666,"reputation":300,"user_id":6468436,"display_name":"User1751"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":479,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671245032,"creation_date":1671037355,"question_id":74801814,"body_markdown":"I have a excel with a date &quot;30.08.2022&quot;, and this excel field is formatted as date.\r\nBut when I try to get a raw value i only get &quot;44803&quot;.\r\nNo matter what I try I don&#39;t get the raw string. I just want to have the direct string.\r\nI have already tried with  formatter.formatCellValue(cell); but then I get a formatted String value 8/30/22 . But I need the same value like in the cell\r\n\r\n    public class Main {\r\n    public static void main(String[] args) throws IOException {\r\n        \r\n        String excelName = &quot;&lt;path to exce&gt;&quot;;\r\n        String excelSheet = &quot;&lt;sheetname&gt;&quot;;\r\n\r\n        try (XSSFWorkbook workbook = new XSSFWorkbook(excelName)) {\r\n\r\n            DataFormatter formatter = new DataFormatter();\r\n            XSSFSheet sheet = workbook.getSheet(excelSheet);\r\n            XSSFRow row1 = sheet.getRow(0);\r\n\r\n            //Date\r\n            XSSFCell cell1 = row1.getCell(0);\r\n            System.out.println(cell1.getRawValue());//44803\r\n            System.out.println( formatter.formatCellValue(cell1));//8/30/22\r\n\r\n        }\r\n\r\n\r\n    }\r\n    }\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fNCSj.png","title":"Get raw date value with Apache POI from a excel cell","body":"<p>I have a excel with a date &quot;30.08.2022&quot;, and this excel field is formatted as date.\nBut when I try to get a raw value i only get &quot;44803&quot;.\nNo matter what I try I don't get the raw string. I just want to have the direct string.\nI have already tried with  formatter.formatCellValue(cell); but then I get a formatted String value 8/30/22 . But I need the same value like in the cell</p>\n<pre><code>public class Main {\npublic static void main(String[] args) throws IOException {\n    \n    String excelName = &quot;&lt;path to exce&gt;&quot;;\n    String excelSheet = &quot;&lt;sheetname&gt;&quot;;\n\n    try (XSSFWorkbook workbook = new XSSFWorkbook(excelName)) {\n\n        DataFormatter formatter = new DataFormatter();\n        XSSFSheet sheet = workbook.getSheet(excelSheet);\n        XSSFRow row1 = sheet.getRow(0);\n\n        //Date\n        XSSFCell cell1 = row1.getCell(0);\n        System.out.println(cell1.getRawValue());//44803\n        System.out.println( formatter.formatCellValue(cell1));//8/30/22\n\n    }\n\n\n}\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/fNCSj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fNCSj.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","css","javafx"],"comments":[{"owner":{"account_id":15237737,"reputation":484,"user_id":10994912,"display_name":"George R"},"score":0,"creation_date":1671242704,"post_id":74831295,"comment_id":132063930,"body_markdown":"What happens if you remove the font-family in font face or use -fx-font-family like here: https://stackoverflow.com/questions/29865343/loading-custom-font-using-javafx-8-and-css","body":"What happens if you remove the font-family in font face or use -fx-font-family like here: <a href=\"https://stackoverflow.com/questions/29865343/loading-custom-font-using-javafx-8-and-css\" title=\"loading custom font using javafx 8 and css\">stackoverflow.com/questions/29865343/&hellip;</a>"},{"owner":{"account_id":24095004,"reputation":1,"user_id":18067667,"display_name":"K O&#39;Neill"},"score":0,"creation_date":1671248609,"post_id":74831295,"comment_id":132064422,"body_markdown":"Thanks for the suggestion, George R. I tried this, and fiddled around with it but it still doesn&#39;t seem to fix it.","body":"Thanks for the suggestion, George R. I tried this, and fiddled around with it but it still doesn&#39;t seem to fix it."}],"answers":[{"tags":[],"owner":{"account_id":20167003,"reputation":344,"user_id":14790684,"display_name":"Al-Anazi"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1671244201,"creation_date":1671244201,"answer_id":74831421,"question_id":74831295,"body_markdown":"Firstly, if your `src` folder structured something similar to this:\r\n```\r\n├── main\r\n     ├── java\r\n     |     └── ...\r\n     |\r\n     └── resources\r\n             |\r\n             ├── fonts\r\n             |     └── Quentin.otf\r\n             |\r\n             └── stylesheet.css\r\n```\r\n\r\nThen in your stylesheet the font `src` will be:\r\n\r\n```css\r\n@font-face {\r\n    font-family: &#39;Quentin&#39;;\r\n    src: url(&#39;fonts/Quentin.otf&#39;);\r\n}\r\n```\r\n\r\nSecondly, the `TextField` style class is `.text-field` not `.textfield`.\r\n\r\nThirdly, `-fx-font-family: &#39;Quentin&#39;;` and `-fx-background-color: null;` can be in the same CSS block because they have the same class (`.text-field`).\r\n\r\n```css\r\n@font-face {\r\n    font-family: &#39;Quentin&#39;;\r\n    src: url(&#39;fonts/Quentin.otf&#39;);\r\n}\r\n\r\n.text-field {\r\n    -fx-font-family: &#39;Quentin&#39;;\r\n    -fx-background-color: null;\r\n}\r\n\r\n.button {\r\n    -fx-font-family: &#39;Quentin&#39;;\r\n    -fx-text-fill: blue;\r\n}\r\n```\r\n\r\nFinally, you may want to add the stylesheet to a pane `pane.getStylesheets().add(&quot;stylesheet.css&quot;);`\r\n\r\nGood luck.","title":"Null Pointer Exception when loading CSS file in JavaFX","body":"<p>Firstly, if your <code>src</code> folder structured something similar to this:</p>\n<pre><code>├── main\n     ├── java\n     |     └── ...\n     |\n     └── resources\n             |\n             ├── fonts\n             |     └── Quentin.otf\n             |\n             └── stylesheet.css\n</code></pre>\n<p>Then in your stylesheet the font <code>src</code> will be:</p>\n<pre class=\"lang-css prettyprint-override\"><code>@font-face {\n    font-family: 'Quentin';\n    src: url('fonts/Quentin.otf');\n}\n</code></pre>\n<p>Secondly, the <code>TextField</code> style class is <code>.text-field</code> not <code>.textfield</code>.</p>\n<p>Thirdly, <code>-fx-font-family: 'Quentin';</code> and <code>-fx-background-color: null;</code> can be in the same CSS block because they have the same class (<code>.text-field</code>).</p>\n<pre class=\"lang-css prettyprint-override\"><code>@font-face {\n    font-family: 'Quentin';\n    src: url('fonts/Quentin.otf');\n}\n\n.text-field {\n    -fx-font-family: 'Quentin';\n    -fx-background-color: null;\n}\n\n.button {\n    -fx-font-family: 'Quentin';\n    -fx-text-fill: blue;\n}\n</code></pre>\n<p>Finally, you may want to add the stylesheet to a pane <code>pane.getStylesheets().add(&quot;stylesheet.css&quot;);</code></p>\n<p>Good luck.</p>\n"}],"owner":{"account_id":24095004,"reputation":1,"user_id":18067667,"display_name":"K O&#39;Neill"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1671289322,"accepted_answer_id":74831421,"answer_count":1,"score":0,"last_activity_date":1671244201,"creation_date":1671242221,"question_id":74831295,"body_markdown":"This might be a very easy fix, I&#39;m entirely new to JavaFX and CSS and I&#39;m trying to add some CSS to my Scene. \r\nThe build runs, but the CSS obviously isn&#39;t working and I get a Null Pointer Exception in javafx.css.CssParser.\r\n\r\n\r\n\r\n\r\n```\r\n\r\n\r\n@font-face{ \r\n    font-family:&#39;Quentin&#39;;\r\n    src: url(&#39;/ui/font/Quentin.otf&#39;);\r\n}\r\n\r\n\r\n.textfield{\r\n\r\n-fx-font-family: &#39;Quentin&#39;;\r\n\r\n}\r\n\r\n.button{ \r\n    -fx-font-family: &#39;Quentin&#39;;\r\n    -fx-text-fill: blue;\r\n}\r\n\r\n.textfield{\r\n    -fx-background-color: null;\r\n}\r\n```\r\n\r\n\r\nWhen I remove the @font-face block, the rest of the code runs fine and my buttons and text fields work and appear as expected. I&#39;m not sure if the tutorials I&#39;m looking up are following an old Java tutorial which is now updated.\r\n\r\nFor reference, the font &#39;Quentin&#39; appears to be downloaded as Quentin.otf, but appears in the file explorer as Quentin-Regular.otf, as pictured.\r\n[Quentin Font Properties](https://i.stack.imgur.com/NNKzN.png)\r\n[Quentin Font in File Explorer](https://i.stack.imgur.com/M0lSH.png)\r\n\r\nI have tried changing the file names to both instances, but no dice. Any help would be appreciated!\r\n","title":"Null Pointer Exception when loading CSS file in JavaFX","body":"<p>This might be a very easy fix, I'm entirely new to JavaFX and CSS and I'm trying to add some CSS to my Scene.\nThe build runs, but the CSS obviously isn't working and I get a Null Pointer Exception in javafx.css.CssParser.</p>\n<pre><code>\n\n@font-face{ \n    font-family:'Quentin';\n    src: url('/ui/font/Quentin.otf');\n}\n\n\n.textfield{\n\n-fx-font-family: 'Quentin';\n\n}\n\n.button{ \n    -fx-font-family: 'Quentin';\n    -fx-text-fill: blue;\n}\n\n.textfield{\n    -fx-background-color: null;\n}\n</code></pre>\n<p>When I remove the @font-face block, the rest of the code runs fine and my buttons and text fields work and appear as expected. I'm not sure if the tutorials I'm looking up are following an old Java tutorial which is now updated.</p>\n<p>For reference, the font 'Quentin' appears to be downloaded as Quentin.otf, but appears in the file explorer as Quentin-Regular.otf, as pictured.\n<a href=\"https://i.stack.imgur.com/NNKzN.png\" rel=\"nofollow noreferrer\">Quentin Font Properties</a>\n<a href=\"https://i.stack.imgur.com/M0lSH.png\" rel=\"nofollow noreferrer\">Quentin Font in File Explorer</a></p>\n<p>I have tried changing the file names to both instances, but no dice. Any help would be appreciated!</p>\n"},{"tags":["java","spring","spring-boot","java-8","jar"],"answers":[{"tags":[],"owner":{"account_id":12056717,"reputation":38,"user_id":8817258,"display_name":"shun chen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671243910,"creation_date":1671243910,"answer_id":74831400,"question_id":74831219,"body_markdown":"This question seems a temp file question , Uploading a file will generator a temp file. \r\n\r\nI&#39;ve found a issue on Github https://stackoverflow.com/questions/29923682/how-does-one-specify-a-temp-directory-for-file-uploads-in-spring-boot , Maybe help you.","title":"Why Spring App is saving the file when MultipartFile Post Method is called?","body":"<p>This question seems a temp file question , Uploading a file will generator a temp file.</p>\n<p>I've found a issue on Github <a href=\"https://stackoverflow.com/questions/29923682/how-does-one-specify-a-temp-directory-for-file-uploads-in-spring-boot\">How does one specify a temp directory for file uploads in Spring Boot?</a> , Maybe help you.</p>\n"}],"owner":{"account_id":1314578,"reputation":1907,"user_id":1261764,"accept_rate":94,"display_name":"abidinberkay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671243910,"creation_date":1671241105,"question_id":74831219,"body_markdown":"Probably it is a ridiculous question but I wonder the answer. I wrote an endpoint to get a file to save it to aws s3 as:\r\n\r\n    @PostMapping(&quot;/media&quot;)\r\n        @Operation(summary = &quot;Save Media&quot;, security = @SecurityRequirement(name = &quot;BearerJWT&quot;))\r\n        public ResponseEntity&lt;MediaDto&gt; saveMedia(@RequestPart(&quot;file&quot;) MultipartFile file, @RequestPart(&quot;MediaDto&quot;) MediaDto MediaDto) {\r\n            return ResponseEntity.ok(mediaService.saveMedia(MediaDto, file));\r\n        }\r\n\r\nThe code is working good. I just want to add this file to s3 in my service class and it is ok too but whenever I send a file to this endpoint than the project is saving the file into the project folders. \r\n\r\n1-On my local, is it something normal or can I stop this saving and just use it in service method and skip it ? Should I delete the file manually or delete it via code ?\r\n\r\n2-More serious question mark in my mind is that I get build jar file from the project and deploying it to the server and it is running on server from a jar file. What is happening when I send file to this endpoint on server ? Is the server is still saving the file in somewhere on server or just process it and skip it ? ","title":"Why Spring App is saving the file when MultipartFile Post Method is called?","body":"<p>Probably it is a ridiculous question but I wonder the answer. I wrote an endpoint to get a file to save it to aws s3 as:</p>\n<pre><code>@PostMapping(&quot;/media&quot;)\n    @Operation(summary = &quot;Save Media&quot;, security = @SecurityRequirement(name = &quot;BearerJWT&quot;))\n    public ResponseEntity&lt;MediaDto&gt; saveMedia(@RequestPart(&quot;file&quot;) MultipartFile file, @RequestPart(&quot;MediaDto&quot;) MediaDto MediaDto) {\n        return ResponseEntity.ok(mediaService.saveMedia(MediaDto, file));\n    }\n</code></pre>\n<p>The code is working good. I just want to add this file to s3 in my service class and it is ok too but whenever I send a file to this endpoint than the project is saving the file into the project folders.</p>\n<p>1-On my local, is it something normal or can I stop this saving and just use it in service method and skip it ? Should I delete the file manually or delete it via code ?</p>\n<p>2-More serious question mark in my mind is that I get build jar file from the project and deploying it to the server and it is running on server from a jar file. What is happening when I send file to this endpoint on server ? Is the server is still saving the file in somewhere on server or just process it and skip it ?</p>\n"},{"tags":["java","spring","mongodb"],"comments":[{"owner":{"account_id":8276195,"reputation":769,"user_id":6222302,"accept_rate":83,"display_name":"Bala"},"score":0,"creation_date":1671241288,"post_id":74830583,"comment_id":132063800,"body_markdown":"Share some code for your personal project. Wondering why `words` collection is created and populated.","body":"Share some code for your personal project. Wondering why <code>words</code> collection is created and populated."},{"owner":{"account_id":27277201,"reputation":1,"user_id":20797625,"display_name":"Spz"},"score":0,"creation_date":1671243743,"post_id":74830583,"comment_id":132064034,"body_markdown":"I&#39;ve added some(most) of the code.","body":"I&#39;ve added some(most) of the code."},{"owner":{"account_id":8276195,"reputation":769,"user_id":6222302,"accept_rate":83,"display_name":"Bala"},"score":0,"creation_date":1671247822,"post_id":74830583,"comment_id":132064353,"body_markdown":"I don&#39;t see any issues with your code or configuration. Just setting `spring.data.mongodb.uri=mongodb://localhost:27017/doteco` in the `application.properties` file should work. I have multiple projects doing that. Springboot does not use the config from intellij IDEA.","body":"I don&#39;t see any issues with your code or configuration. Just setting <code>spring.data.mongodb.uri=mongodb:&#47;&#47;localhost:27017&#47;doteco</code> in the <code>application.properties</code> file should work. I have multiple projects doing that. Springboot does not use the config from intellij IDEA."},{"owner":{"account_id":27277201,"reputation":1,"user_id":20797625,"display_name":"Spz"},"score":0,"creation_date":1671278661,"post_id":74830583,"comment_id":132067844,"body_markdown":"@Bala Yes, that is what I thought, but for some reason it only connects to the Test database, figured there might be something I&#39;m missing? Not like it&#39;s unworkable, but it&#39;s a bit messy, and weird.","body":"@Bala Yes, that is what I thought, but for some reason it only connects to the Test database, figured there might be something I&#39;m missing? Not like it&#39;s unworkable, but it&#39;s a bit messy, and weird."}],"owner":{"account_id":27277201,"reputation":1,"user_id":20797625,"display_name":"Spz"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671243849,"creation_date":1671231847,"question_id":74830583,"body_markdown":"I figured I&#39;d make this new personal project with MongoDB, after all seems pretty easy. And in fact, it was pretty painless, except it won&#39;t connect to the right Database, and I don&#39;t know why.\r\n\r\n[This what Compass looks like](https://i.stack.imgur.com/9J6uX.png)\r\n\r\n\r\nSo I want it to connect to the &#39;doteco&#39; database. And it just won&#39;t, it keeps going to that &#39;test&#39; database.\r\n\r\nI&#39;ve tried both \r\n\r\n```\r\nspring.data.mongodb.uri=mongodb://localhost:27017\r\nspring.data.mongodb.database=doteco\r\n```\r\nand \r\n```\r\nspring.data.mongodb.uri=mongodb://localhost:27017/doteco\r\n```\r\nBut it refuses, it only connects to Test. The program doesn&#39;t have any manual connecting to it, it&#39;s just the URI on the properties and that&#39;s it. It just creates a the collection `words` under Test and keeps populating it.\r\n\r\n\r\nEdit-\r\n\r\nSome of the code, it&#39;s so simple it&#39;s a case of &#39;I don&#39;t know why this is going wrong.&#39;\r\n\r\nThe Entity/Document\r\n\r\n```java\r\n@Data\r\n@Builder\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Document(&quot;words&quot;)\r\npublic class WordDocument {\r\n\r\n    @Id\r\n    private String id;\r\n    private String word;\r\n    private Integer numberOfLetters;\r\n    private Integer flag;\r\n}\r\n```\r\n\r\nThe Repository\r\n```java\r\n@Repository\r\npublic interface WordRepository extends MongoRepository&lt;WordDocument, String&gt; {\r\n\r\n    @Query(&quot;{word:&#39;?0&#39;}&quot;)\r\n    Optional&lt;WordDocument&gt; findByWord(String word);\r\n}\r\n```\r\n\r\nThe properties is the ones I&#39;ve shown earlier, and just manually creating the object to test.\r\n\r\n```java\r\n@Override\r\n    public void save() {\r\n        WordDocument word = new WordDocument();\r\n        word.setWord(&quot;Word&quot;);\r\n        word.setFlag(1);\r\n        word.setNumberOfLetters(7);\r\n        WordDocument save = wordRepository.insert(word);\r\n        System.out.println(save);\r\n    }\r\n```\r\n\r\nAnd it&#39;s just a regular run, there are no configuration classes, no extra beans, no nothing.\r\n\r\n```java\r\n@SpringBootApplication\r\n@EnableMongoRepositories\r\npublic class DotecoApplication {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(DotecoApplication.class);\r\n    }\r\n}\r\n```\r\n\r\nI want it to save on the doteco database, not on the &#39;test&#39; one. I had a Database Test using the Intellij Ultimate Database feature on, thought might be the case, but persists even when I turn it off, or use the regular Intellij Community. Maybe it just THINKS it belongs there for some reason now?","title":"MongoDB Database on Java","body":"<p>I figured I'd make this new personal project with MongoDB, after all seems pretty easy. And in fact, it was pretty painless, except it won't connect to the right Database, and I don't know why.</p>\n<p><a href=\"https://i.stack.imgur.com/9J6uX.png\" rel=\"nofollow noreferrer\">This what Compass looks like</a></p>\n<p>So I want it to connect to the 'doteco' database. And it just won't, it keeps going to that 'test' database.</p>\n<p>I've tried both</p>\n<pre><code>spring.data.mongodb.uri=mongodb://localhost:27017\nspring.data.mongodb.database=doteco\n</code></pre>\n<p>and</p>\n<pre><code>spring.data.mongodb.uri=mongodb://localhost:27017/doteco\n</code></pre>\n<p>But it refuses, it only connects to Test. The program doesn't have any manual connecting to it, it's just the URI on the properties and that's it. It just creates a the collection <code>words</code> under Test and keeps populating it.</p>\n<p>Edit-</p>\n<p>Some of the code, it's so simple it's a case of 'I don't know why this is going wrong.'</p>\n<p>The Entity/Document</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@Document(&quot;words&quot;)\npublic class WordDocument {\n\n    @Id\n    private String id;\n    private String word;\n    private Integer numberOfLetters;\n    private Integer flag;\n}\n</code></pre>\n<p>The Repository</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic interface WordRepository extends MongoRepository&lt;WordDocument, String&gt; {\n\n    @Query(&quot;{word:'?0'}&quot;)\n    Optional&lt;WordDocument&gt; findByWord(String word);\n}\n</code></pre>\n<p>The properties is the ones I've shown earlier, and just manually creating the object to test.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n    public void save() {\n        WordDocument word = new WordDocument();\n        word.setWord(&quot;Word&quot;);\n        word.setFlag(1);\n        word.setNumberOfLetters(7);\n        WordDocument save = wordRepository.insert(word);\n        System.out.println(save);\n    }\n</code></pre>\n<p>And it's just a regular run, there are no configuration classes, no extra beans, no nothing.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\n@EnableMongoRepositories\npublic class DotecoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DotecoApplication.class);\n    }\n}\n</code></pre>\n<p>I want it to save on the doteco database, not on the 'test' one. I had a Database Test using the Intellij Ultimate Database feature on, thought might be the case, but persists even when I turn it off, or use the regular Intellij Community. Maybe it just THINKS it belongs there for some reason now?</p>\n"},{"tags":["java","apache-kafka","apache-kafka-streams"],"answers":[{"tags":[],"owner":{"account_id":123756,"reputation":4386,"user_id":318414,"accept_rate":95,"display_name":"simonalexander2005"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1605799098,"creation_date":1605799098,"answer_id":64914618,"question_id":64914339,"body_markdown":"There had (apparently) been some changes to the structure of the topic, meaning that Streams needed to be reset. To do this, you can use the application Conduktor, or the reset tool found at http://docs.confluent.io/current/streams/developer-guide.html#application-reset-tool.\r\n","title":"GlobalKTable - StreamsException: Encountered a topic-partition not associated with any global state store","body":"<p>There had (apparently) been some changes to the structure of the topic, meaning that Streams needed to be reset. To do this, you can use the application Conduktor, or the reset tool found at <a href=\"http://docs.confluent.io/current/streams/developer-guide.html#application-reset-tool\" rel=\"nofollow noreferrer\">http://docs.confluent.io/current/streams/developer-guide.html#application-reset-tool</a>.</p>\n"},{"tags":[],"owner":{"account_id":1528195,"reputation":151,"user_id":1426099,"accept_rate":50,"display_name":"Tabber"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1656935697,"creation_date":1656935697,"answer_id":72856295,"question_id":64914339,"body_markdown":"If this helps someone, this happens if you update any schema on consumer side of GlobalKTable and also may be when the schema changes on the Kafka side. So what fixed for me is just deleting my local state-store folder, usually present in your projects root directory. ","title":"GlobalKTable - StreamsException: Encountered a topic-partition not associated with any global state store","body":"<p>If this helps someone, this happens if you update any schema on consumer side of GlobalKTable and also may be when the schema changes on the Kafka side. So what fixed for me is just deleting my local state-store folder, usually present in your projects root directory.</p>\n"},{"tags":[],"owner":{"account_id":210409,"reputation":305,"user_id":462009,"accept_rate":15,"display_name":"vamsi-vegi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671242939,"creation_date":1671242939,"answer_id":74831349,"question_id":64914339,"body_markdown":"\r\nif you are running local instance/ or you have the ability, then \r\n\r\n- stop brokers\r\n- stop zookeeper\r\n- remove the kafka-streams folder under the parent folder as referenced by the env var java.io.tmpdir.\r\n\r\nyou can get the true folder name in the Broker logs, search for &#39;INFO Client environment:java.io.tmpdir&#39;\r\n\r\n","title":"GlobalKTable - StreamsException: Encountered a topic-partition not associated with any global state store","body":"<p>if you are running local instance/ or you have the ability, then</p>\n<ul>\n<li>stop brokers</li>\n<li>stop zookeeper</li>\n<li>remove the kafka-streams folder under the parent folder as referenced by the env var java.io.tmpdir.</li>\n</ul>\n<p>you can get the true folder name in the Broker logs, search for 'INFO Client environment:java.io.tmpdir'</p>\n"}],"owner":{"account_id":123756,"reputation":4386,"user_id":318414,"accept_rate":95,"display_name":"simonalexander2005"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2727,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":64914618,"answer_count":3,"score":2,"last_activity_date":1671242939,"creation_date":1605798191,"question_id":64914339,"body_markdown":"I am trying to use Kafka-streams to create a GlobalKTable from a stream, and getting an exception when I call `streams.start()`:\r\n\r\n&gt; org.apache.kafka.streams.errors.StreamsException: Encountered a topic-partition not associated with any global state store\r\n\r\nMy code is:\r\n\r\n\r\n```java\r\nprivate final KafkaStreams streams;\r\nprivate final StoreQueryParameters&lt;ReadOnlyKeyValueStore&lt;LocalDate, String&gt;&gt; bankHolidayTypesSqp = StoreQueryParameters.fromNameAndType(&quot;bank_holiday_type_store&quot;\r\n\t\t\t,QueryableStoreTypes.&lt;LocalDate, String&gt;keyValueStore());\r\nprivate final ReadOnlyKeyValueStore&lt;LocalDate, String&gt; localBankHolidayTypeStore;\r\n\r\nprivate void instantiateKafka()\r\n{\r\n\t\t// configure Kafka\r\n\t\t\r\n\t\tStreamsBuilder builder = new StreamsBuilder();\r\n       \r\n       // CustomSerializableSerde is just a generic serializer that uses standard java Base64 encoding on any object that implements Serializable - it works in a dummy application I&#39;ve tested, so I don&#39;t think it&#39;s the problem\r\n\t\taddGlobalTableToStreamsBuilder(builder, bankHolidayTypeTopic,&quot;bank_holiday_type_store&quot;, new CustomSerializableSerde&lt;LocalDate&gt;(),Serdes.String());\r\n\t\t\r\n\t\tstreams = createStreams(&quot;localhost:9092&quot;, &quot;C:\\\\Kafka\\\\tmp\\\\kafka-streams-global-tables&quot;,MyClass.class.getName(),builder);\r\n\t\tstreams.start(); // hangs until the global table is built\r\n}\r\n\r\npublic static &lt;Tk extends Serializable,Tv extends Serializable&gt; StreamsBuilder addGlobalTableToStreamsBuilder(StreamsBuilder builder, String topic\r\n\t\t\t, String store, Serde&lt;Tk&gt; keySerializer, Serde&lt;Tv&gt; valueSerializer)\r\n\t{\r\n\t\tbuilder.globalTable(topic, Materialized.&lt;Tk, Tv, KeyValueStore&lt;Bytes, byte[]&gt;&gt;as(store)\r\n\t            .withKeySerde(keySerializer)\r\n\t            .withValueSerde(valueSerializer));\r\n\t\treturn builder;\r\n\t}\r\n\r\npublic static KafkaStreams createStreams(final String bootstrapServers, final String stateDir, String clientID, StreamsBuilder finishedBuilder) \r\n\t {\r\n\t\tfinal Properties streamsConfiguration = new Properties();\r\n\t\t// Give the Streams application a unique name.  The name must be unique in the Kafka cluster against which the application is run.\r\n\t\tstreamsConfiguration.put(StreamsConfig.APPLICATION_ID_CONFIG, &quot;applicationName&quot;);\r\n\t\tstreamsConfiguration.put(StreamsConfig.CLIENT_ID_CONFIG, clientID);\r\n\t\t// Where to find Kafka broker(s).\r\n\t\tstreamsConfiguration.put(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\r\n\t\tstreamsConfiguration.put(StreamsConfig.STATE_DIR_CONFIG, stateDir);\r\n\t\t// Set to earliest so we don&#39;t miss any data that arrived in the topics before the process started\r\n\t\tstreamsConfiguration.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\r\n\t\t\t\t\r\n\t\t return new KafkaStreams(finishedBuilder.build(), streamsConfiguration);\r\n\t }\r\n\t\r\n```\r\n\r\nAnd the producer:\r\n\r\n```java\r\nProducer&lt;LocalDate,String&gt; bankHolidayTypeProducer = MyClass&lt;LocalDate,String&gt;createProducer(&quot;localhost:9092&quot;, BankHolidayData.class.getName()\r\n\t\t\t\t\t, CustomSerializer.class.getName(), StringSerializer.class.getName());\r\n\r\n//...\r\n\r\nHashMap&lt;LocalDate, String&gt; bankHolidaysData = populateBankHolidayMap();\r\n\r\nfor (LocalDate bhDay : bankHolidaysData.keySet())\r\n\t\t\t{\r\n\t\t\t\tbankHolidayTypeProducer.send(new ProducerRecord&lt;&gt;(bankHolidayTypeTopic, bhDay, bankHolidaysData.get(bhDay)));\r\n\t\t\t}\r\n\r\npublic static &lt;Tk extends Serializable, Tv extends Serializable&gt; Producer&lt;Tk,Tv&gt; createProducer(String bootstrapServers\r\n\t\t\t, String clientID, String keySerializerClassName, String valueSerializerClassName) \r\n\t{\r\n        Properties props = new Properties();\r\n        props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\r\n        props.put(ProducerConfig.CLIENT_ID_CONFIG, clientID);\r\n        props.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, keySerializerClassName);\r\n        props.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, valueSerializerClassName);\r\n        return new KafkaProducer&lt;&gt;(props);\r\n    }\r\n```\r\n\r\nMy topic is created automatically by the producer when it first produces, and will always exist by the time the GlobalKTable comes to try and read from it. Is this the problem? Do I need to do something when setting up the topic to tell Kafka that it&#39;s going to be used by a Streams GlobalKTable?","title":"GlobalKTable - StreamsException: Encountered a topic-partition not associated with any global state store","body":"<p>I am trying to use Kafka-streams to create a GlobalKTable from a stream, and getting an exception when I call <code>streams.start()</code>:</p>\n<blockquote>\n<p>org.apache.kafka.streams.errors.StreamsException: Encountered a topic-partition not associated with any global state store</p>\n</blockquote>\n<p>My code is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private final KafkaStreams streams;\nprivate final StoreQueryParameters&lt;ReadOnlyKeyValueStore&lt;LocalDate, String&gt;&gt; bankHolidayTypesSqp = StoreQueryParameters.fromNameAndType(&quot;bank_holiday_type_store&quot;\n            ,QueryableStoreTypes.&lt;LocalDate, String&gt;keyValueStore());\nprivate final ReadOnlyKeyValueStore&lt;LocalDate, String&gt; localBankHolidayTypeStore;\n\nprivate void instantiateKafka()\n{\n        // configure Kafka\n        \n        StreamsBuilder builder = new StreamsBuilder();\n       \n       // CustomSerializableSerde is just a generic serializer that uses standard java Base64 encoding on any object that implements Serializable - it works in a dummy application I've tested, so I don't think it's the problem\n        addGlobalTableToStreamsBuilder(builder, bankHolidayTypeTopic,&quot;bank_holiday_type_store&quot;, new CustomSerializableSerde&lt;LocalDate&gt;(),Serdes.String());\n        \n        streams = createStreams(&quot;localhost:9092&quot;, &quot;C:\\\\Kafka\\\\tmp\\\\kafka-streams-global-tables&quot;,MyClass.class.getName(),builder);\n        streams.start(); // hangs until the global table is built\n}\n\npublic static &lt;Tk extends Serializable,Tv extends Serializable&gt; StreamsBuilder addGlobalTableToStreamsBuilder(StreamsBuilder builder, String topic\n            , String store, Serde&lt;Tk&gt; keySerializer, Serde&lt;Tv&gt; valueSerializer)\n    {\n        builder.globalTable(topic, Materialized.&lt;Tk, Tv, KeyValueStore&lt;Bytes, byte[]&gt;&gt;as(store)\n                .withKeySerde(keySerializer)\n                .withValueSerde(valueSerializer));\n        return builder;\n    }\n\npublic static KafkaStreams createStreams(final String bootstrapServers, final String stateDir, String clientID, StreamsBuilder finishedBuilder) \n     {\n        final Properties streamsConfiguration = new Properties();\n        // Give the Streams application a unique name.  The name must be unique in the Kafka cluster against which the application is run.\n        streamsConfiguration.put(StreamsConfig.APPLICATION_ID_CONFIG, &quot;applicationName&quot;);\n        streamsConfiguration.put(StreamsConfig.CLIENT_ID_CONFIG, clientID);\n        // Where to find Kafka broker(s).\n        streamsConfiguration.put(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\n        streamsConfiguration.put(StreamsConfig.STATE_DIR_CONFIG, stateDir);\n        // Set to earliest so we don't miss any data that arrived in the topics before the process started\n        streamsConfiguration.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\n                \n         return new KafkaStreams(finishedBuilder.build(), streamsConfiguration);\n     }\n    \n</code></pre>\n<p>And the producer:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Producer&lt;LocalDate,String&gt; bankHolidayTypeProducer = MyClass&lt;LocalDate,String&gt;createProducer(&quot;localhost:9092&quot;, BankHolidayData.class.getName()\n                    , CustomSerializer.class.getName(), StringSerializer.class.getName());\n\n//...\n\nHashMap&lt;LocalDate, String&gt; bankHolidaysData = populateBankHolidayMap();\n\nfor (LocalDate bhDay : bankHolidaysData.keySet())\n            {\n                bankHolidayTypeProducer.send(new ProducerRecord&lt;&gt;(bankHolidayTypeTopic, bhDay, bankHolidaysData.get(bhDay)));\n            }\n\npublic static &lt;Tk extends Serializable, Tv extends Serializable&gt; Producer&lt;Tk,Tv&gt; createProducer(String bootstrapServers\n            , String clientID, String keySerializerClassName, String valueSerializerClassName) \n    {\n        Properties props = new Properties();\n        props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\n        props.put(ProducerConfig.CLIENT_ID_CONFIG, clientID);\n        props.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, keySerializerClassName);\n        props.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, valueSerializerClassName);\n        return new KafkaProducer&lt;&gt;(props);\n    }\n</code></pre>\n<p>My topic is created automatically by the producer when it first produces, and will always exist by the time the GlobalKTable comes to try and read from it. Is this the problem? Do I need to do something when setting up the topic to tell Kafka that it's going to be used by a Streams GlobalKTable?</p>\n"},{"tags":["java","jetty","logback","logback-classic","end-of-life"],"answers":[{"tags":[],"owner":{"account_id":406289,"reputation":47511,"user_id":775715,"accept_rate":100,"display_name":"Joakim Erdfelt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671188156,"creation_date":1671187435,"answer_id":74823311,"question_id":74820235,"body_markdown":"First, and most important, Jetty 9.x is now at End of Community Support.\r\n\r\nSee announcement at https://github.com/eclipse/jetty.project/issues/7958\r\n\r\nYou should be using Jetty 10+ now.\r\n\r\nFor Logback, you cannot use Logback 1.3.x on Jetty 9.x\r\n\r\nThat&#39;s because it requires Servlet 4.0.1, which is available on Jetty 10+ (not Jetty 9)\r\n\r\nFor Jetty 9.x you should stick with Logback 1.2.x, but that also means you are stuck with [all of the Hanging / Blocked Thread / Async / 100% CPU bugs](https://github.com/eclipse/jetty.project/issues?q=is%3Aissue+logback) that logback hasn&#39;t fixed in Logback 1.2.x (many were fixed in Logback 1.3.x, and a lot more were fixed in Logback 1.4.x).\r\n\r\nThe breakdown of Logback to Servlet to Jetty\r\n\r\nLogback | Servlet | Namespace | Jetty\r\n---- | ---- | ---- | ----\r\n1.2.x | Servlet 3.1.x | `javax.servlet` | Jetty 9.x\r\n1.3.x | Servlet 4.0.x | `javax.servlet` | Jetty 10.x\r\n1.4.x | Servlet 5.0.x | `jakarta.servlet` | Jetty 11.x\r\n","title":"Logback 1.3.0 and Jetty 9.4.50 having the compatibility issues","body":"<p>First, and most important, Jetty 9.x is now at End of Community Support.</p>\n<p>See announcement at <a href=\"https://github.com/eclipse/jetty.project/issues/7958\" rel=\"nofollow noreferrer\">https://github.com/eclipse/jetty.project/issues/7958</a></p>\n<p>You should be using Jetty 10+ now.</p>\n<p>For Logback, you cannot use Logback 1.3.x on Jetty 9.x</p>\n<p>That's because it requires Servlet 4.0.1, which is available on Jetty 10+ (not Jetty 9)</p>\n<p>For Jetty 9.x you should stick with Logback 1.2.x, but that also means you are stuck with <a href=\"https://github.com/eclipse/jetty.project/issues?q=is%3Aissue+logback\" rel=\"nofollow noreferrer\">all of the Hanging / Blocked Thread / Async / 100% CPU bugs</a> that logback hasn't fixed in Logback 1.2.x (many were fixed in Logback 1.3.x, and a lot more were fixed in Logback 1.4.x).</p>\n<p>The breakdown of Logback to Servlet to Jetty</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Logback</th>\n<th>Servlet</th>\n<th>Namespace</th>\n<th>Jetty</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1.2.x</td>\n<td>Servlet 3.1.x</td>\n<td><code>javax.servlet</code></td>\n<td>Jetty 9.x</td>\n</tr>\n<tr>\n<td>1.3.x</td>\n<td>Servlet 4.0.x</td>\n<td><code>javax.servlet</code></td>\n<td>Jetty 10.x</td>\n</tr>\n<tr>\n<td>1.4.x</td>\n<td>Servlet 5.0.x</td>\n<td><code>jakarta.servlet</code></td>\n<td>Jetty 11.x</td>\n</tr>\n</tbody>\n</table>\n</div>"}],"owner":{"account_id":7562992,"reputation":47,"user_id":5739726,"display_name":"Shubham Goswami"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":365,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74823311,"answer_count":1,"score":0,"last_activity_date":1671242650,"creation_date":1671165317,"question_id":74820235,"body_markdown":"Logaback version 1.3.0 uses Javax-Servlet version 4.0.1.\r\n\r\nIn the same application, I am using Jetty 9.4.50, which uses javax-servlet 3.1.0.\r\n\r\nWhen I load logback.xml locally, my application works successfully.\r\n\r\nIf I start the application through the Jetty server, no logs are generated\r\n\r\n( logback.xml file cannot be loaded by the Jetty server).\r\n\r\nAccording to my understanding, Logback and Jetty have the same Javax-servlet version\r\n\r\nCould you please tell me why my logs are not generated?\r\n\r\n\r\n   \r\n","title":"Logback 1.3.0 and Jetty 9.4.50 having the compatibility issues","body":"<p>Logaback version 1.3.0 uses Javax-Servlet version 4.0.1.</p>\n<p>In the same application, I am using Jetty 9.4.50, which uses javax-servlet 3.1.0.</p>\n<p>When I load logback.xml locally, my application works successfully.</p>\n<p>If I start the application through the Jetty server, no logs are generated</p>\n<p>( logback.xml file cannot be loaded by the Jetty server).</p>\n<p>According to my understanding, Logback and Jetty have the same Javax-servlet version</p>\n<p>Could you please tell me why my logs are not generated?</p>\n"},{"tags":["java","android","google-play-console"],"comments":[{"owner":{"account_id":2869513,"reputation":1444,"user_id":2463160,"accept_rate":14,"display_name":"The Heist"},"score":0,"creation_date":1659675532,"post_id":73241012,"comment_id":129355174,"body_markdown":"if you check the details of the ANR you&#39;re getting, there must be a screen recording video attached, which will be sufficient to understand the error or crash. It might be a crash caused by your app, but not the case all the time.","body":"if you check the details of the ANR you&#39;re getting, there must be a screen recording video attached, which will be sufficient to understand the error or crash. It might be a crash caused by your app, but not the case all the time."},{"owner":{"account_id":19203818,"reputation":483,"user_id":14031171,"display_name":"Mike087"},"score":0,"creation_date":1659853409,"post_id":73241012,"comment_id":129390471,"body_markdown":"@TheHeist I tried in several physical devices and have no errors, so could be the screen reecording video the cause.","body":"@TheHeist I tried in several physical devices and have no errors, so could be the screen reecording video the cause."},{"owner":{"account_id":1410695,"reputation":4554,"user_id":1337352,"accept_rate":38,"display_name":"Babu"},"score":0,"creation_date":1662628794,"post_id":73241012,"comment_id":130051355,"body_markdown":"We have the exact same issue with Android 13 (SDK 33) ... not using any video features in our app at all &#128549;. @Mike087 could you share how did you solve this at the end?","body":"We have the exact same issue with Android 13 (SDK 33) ... not using any video features in our app at all 😥. @Mike087 could you share how did you solve this at the end?"},{"owner":{"display_name":"user16250914"},"score":0,"creation_date":1666086289,"post_id":73241012,"comment_id":130846516,"body_markdown":"Any solution please help","body":"Any solution please help"}],"answers":[{"tags":[],"owner":{"account_id":14858567,"reputation":1,"user_id":10730243,"display_name":"denisk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666289649,"creation_date":1663867018,"answer_id":73818500,"question_id":73241012,"body_markdown":"If you are not using those packages of the ANR it is warning you about, it is likely a bug in the Google Play Console testing platform and/or simulated device. This is especially the case an error only appears on one device. It tests on numerous different emulated devices, so if it&#39;s just happening on one, it&#39;s probably just a one-off glitch that&#39;s unrelated. Good news is you don&#39;t need to pass the pre-launch report in order to release, so you can ignore it!\r\n\r\nIn any case, you should double check the full logcat. Click &#39;show more&#39; then click the -&gt; to the right of the device, then click download full log cat. If it doesn&#39;t seem like your app initiated any calls, it&#39;s probably just a background crash that is unrelated to your app and you can disregard it.","title":"What is causing an error showed in the Google Play Console pre-launch report?","body":"<p>If you are not using those packages of the ANR it is warning you about, it is likely a bug in the Google Play Console testing platform and/or simulated device. This is especially the case an error only appears on one device. It tests on numerous different emulated devices, so if it's just happening on one, it's probably just a one-off glitch that's unrelated. Good news is you don't need to pass the pre-launch report in order to release, so you can ignore it!</p>\n<p>In any case, you should double check the full logcat. Click 'show more' then click the -&gt; to the right of the device, then click download full log cat. If it doesn't seem like your app initiated any calls, it's probably just a background crash that is unrelated to your app and you can disregard it.</p>\n"}],"owner":{"account_id":19203818,"reputation":483,"user_id":14031171,"display_name":"Mike087"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1093,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1671241964,"creation_date":1659639297,"question_id":73241012,"body_markdown":"I launched my app in the alpha channel, and my Google Play Console pre-launch report details page shows an error occurred on Android 12 (SDK 31).\r\nThe stack trace that show me is:\r\n```\r\nANR in com.google.android.apps.safetyhub;PID: 11778;Broadcast of Intent { act=com.google.android.gms.phenotype.UPDATE flg=0x30 pkg=com.google.android.apps.safetyhub cmp=com.google.android.apps.safetyhub/com.google.apps.tiktok.experiments.phenotype.ConfigurationUpdatedReceiver_Receiver (has extras) };\r\n```\r\nI don&#39;t see the name of my package anywhere.\r\n\r\nCan you help me to understand what is causing the error?","title":"What is causing an error showed in the Google Play Console pre-launch report?","body":"<p>I launched my app in the alpha channel, and my Google Play Console pre-launch report details page shows an error occurred on Android 12 (SDK 31).\nThe stack trace that show me is:</p>\n<pre><code>ANR in com.google.android.apps.safetyhub;PID: 11778;Broadcast of Intent { act=com.google.android.gms.phenotype.UPDATE flg=0x30 pkg=com.google.android.apps.safetyhub cmp=com.google.android.apps.safetyhub/com.google.apps.tiktok.experiments.phenotype.ConfigurationUpdatedReceiver_Receiver (has extras) };\n</code></pre>\n<p>I don't see the name of my package anywhere.</p>\n<p>Can you help me to understand what is causing the error?</p>\n"},{"tags":["java","matrix","arraylist"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1671136940,"post_id":74816837,"comment_id":132039891,"body_markdown":"Technically, Java doesn&#39;t have 2D arrays. Java has arrays of arrays. A matrix or can be represented as an array of arrays. But, arrays of arrays don&#39;t have to be rectangular. `int [][] foo = {{1,2,3},{4,5,6,6},{7,8,9}};` is allowed.","body":"Technically, Java doesn&#39;t have 2D arrays. Java has arrays of arrays. A matrix or can be represented as an array of arrays. But, arrays of arrays don&#39;t have to be rectangular. <code>int [][] foo = {{1,2,3},{4,5,6,6},{7,8,9}};</code> is allowed."}],"answers":[{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671136932,"creation_date":1671136932,"answer_id":74817334,"question_id":74816837,"body_markdown":"Assuming your original list elemnts are always different from `0` you could iterate over each column and collect the elemnts of each row and add `0` for any row which size is to short and stop when all elemnts equal `0`. Something like:\r\n\r\n    public static void main(String[] args) {\r\n\r\n        List&lt;List&lt;String&gt;&gt; matrix = List.of( List.of(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;),\r\n                                             List.of(&quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;6&quot;),\r\n                                             List.of(&quot;7&quot;, &quot;8&quot;, &quot;9&quot;));\r\n\r\n        List&lt;List&lt;String&gt;&gt; rotated =\r\n                IntStream.iterate(0, i -&gt; i + 1)\r\n                         .mapToObj(i -&gt; matrix.stream()\r\n                                              .map(sublist -&gt; i &lt; sublist.size() ? sublist.get(i) : &quot;0&quot;)\r\n                                              .toList())\r\n                         .takeWhile(list -&gt; !list.stream().allMatch(e -&gt; &quot;0&quot;.equals(e)))\r\n                         .toList();\r\n        \r\n        rotated.forEach(System.out::println);\r\n    }","title":"Rotate matrix elements for ArrayList&lt;ArrayList&lt;String&gt;&gt; in java","body":"<p>Assuming your original list elemnts are always different from <code>0</code> you could iterate over each column and collect the elemnts of each row and add <code>0</code> for any row which size is to short and stop when all elemnts equal <code>0</code>. Something like:</p>\n<pre><code>public static void main(String[] args) {\n\n    List&lt;List&lt;String&gt;&gt; matrix = List.of( List.of(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;),\n                                         List.of(&quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;6&quot;),\n                                         List.of(&quot;7&quot;, &quot;8&quot;, &quot;9&quot;));\n\n    List&lt;List&lt;String&gt;&gt; rotated =\n            IntStream.iterate(0, i -&gt; i + 1)\n                     .mapToObj(i -&gt; matrix.stream()\n                                          .map(sublist -&gt; i &lt; sublist.size() ? sublist.get(i) : &quot;0&quot;)\n                                          .toList())\n                     .takeWhile(list -&gt; !list.stream().allMatch(e -&gt; &quot;0&quot;.equals(e)))\n                     .toList();\n    \n    rotated.forEach(System.out::println);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671138880,"creation_date":1671138880,"answer_id":74817646,"question_id":74816837,"body_markdown":"```lang-java\r\npublic List&lt;List&lt;String&gt;&gt; rotate(List&lt;List&lt;String&gt;&gt; matrix) {\r\n    int maxRowLength = matrix.stream().map(List::size)\r\n            .max(Comparator.naturalOrder()).orElse(0);\r\n    return IntStream.range(0, maxRowLength)\r\n            .mapToObj(i -&gt; matrix.stream()\r\n                    .map(l -&gt; l.size() &lt;= i ? &quot;0&quot; : l.get(i)).toList())\r\n            .toList();\r\n}\r\n```\r\n\r\n## Explanation\r\n\r\nThis approach starts by getting the length of the longest row in the matrix:\r\n\r\n```lang-java\r\nmatrix.stream().map(List::size).max(Comparator.naturalOrder()).orElse(0)\r\n```\r\n\r\nIt then creates a stream which iterates through all possible list indexes: the ints between 0 and the max row length:\r\n\r\n```lang-java\r\nIntStream.range(0, maxRowLength)\r\n```\r\n\r\nFor each index `i` in that list, it maps the index to a list.  Each element of this list is the `i`th element of the corresponding list in the matrix, or &quot;0&quot; if that list is shorter than `i`:\r\n\r\n```lang-java\r\n.mapToObj(i -&gt; matrix.stream()\r\n        .map(l -&gt; l.size() &lt;= i ? &quot;0&quot; : l.get(i)).toList())\r\n```\r\n\r\nFinally, it converts the stream to a list:\r\n\r\n```lang-java\r\n.toList();\r\n```","title":"Rotate matrix elements for ArrayList&lt;ArrayList&lt;String&gt;&gt; in java","body":"<pre class=\"lang-java prettyprint-override\"><code>public List&lt;List&lt;String&gt;&gt; rotate(List&lt;List&lt;String&gt;&gt; matrix) {\n    int maxRowLength = matrix.stream().map(List::size)\n            .max(Comparator.naturalOrder()).orElse(0);\n    return IntStream.range(0, maxRowLength)\n            .mapToObj(i -&gt; matrix.stream()\n                    .map(l -&gt; l.size() &lt;= i ? &quot;0&quot; : l.get(i)).toList())\n            .toList();\n}\n</code></pre>\n<h2>Explanation</h2>\n<p>This approach starts by getting the length of the longest row in the matrix:</p>\n<pre class=\"lang-java prettyprint-override\"><code>matrix.stream().map(List::size).max(Comparator.naturalOrder()).orElse(0)\n</code></pre>\n<p>It then creates a stream which iterates through all possible list indexes: the ints between 0 and the max row length:</p>\n<pre class=\"lang-java prettyprint-override\"><code>IntStream.range(0, maxRowLength)\n</code></pre>\n<p>For each index <code>i</code> in that list, it maps the index to a list.  Each element of this list is the <code>i</code>th element of the corresponding list in the matrix, or &quot;0&quot; if that list is shorter than <code>i</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>.mapToObj(i -&gt; matrix.stream()\n        .map(l -&gt; l.size() &lt;= i ? &quot;0&quot; : l.get(i)).toList())\n</code></pre>\n<p>Finally, it converts the stream to a list:</p>\n<pre class=\"lang-java prettyprint-override\"><code>.toList();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671241640,"creation_date":1671241640,"answer_id":74831250,"question_id":74816837,"body_markdown":"Here is a &quot;Old Dog&quot; approach: \r\n\r\n    public static List&lt;List&lt;Integer&gt;&gt; rotate (List&lt;List&lt;Integer&gt;&gt; source) {\r\n       // find row with greatest number of columns\r\n       // there will be one row generated for each column\r\n       int max = 0;\r\n       for (int i = 0; i &lt; source.size(); ++i) {\r\n          max = Math.max (source.get(i).size(), max);    \r\n       }\r\n\r\n       List&lt;List&lt;Integer&gt;&gt; dest = new ArrayList&lt;&gt; (max);\r\n          // i indexes column in source, row in dest\r\n         for (int i = 0; i &lt; max; ++i) { \r\n            List&lt;Integer&gt; line = new ArrayList&lt;&gt; (source.size());\r\n             // j indexes row in source, column in dest\r\n            for (int j = 0; j &lt; source.size(); ++j) { \r\n               if (i &gt;= source.get(j).size()) {\r\n                   line.add (j,0);\r\n               } else {\r\n                  line.add (j,source.get(j).get(i));\r\n               }\r\n            }\r\n            dest.add (line);\r\n       }     \r\n       return dest;    \r\n     }\r\n\r\nTest method:\r\n\r\n \r\n\r\n        \r\n    public static void testRotate () {\r\n        Integer [][] arr = {{1,2,3},{4,5,6,10,11},{7,8,9}};\r\n        List&lt;List&lt;Integer&gt;&gt; list = new ArrayList&lt;&gt; ();\r\n        for (int i = 0; i &lt; arr.length; ++i) {\r\n            List&lt;Integer&gt; row = Arrays.asList (arr[i]);\r\n            list.add(row);\r\n        }\r\n        List&lt;List&lt;Integer&gt;&gt; res = rotate (list);\r\n        for (int i = 0; i &lt; res.size(); ++i) {\r\n            System.out.println ();\r\n            for (int j = 0; j &lt; res.get(i).size(); ++j) {\r\n                System.out.print (res.get(i).get(j) + &quot;\\t&quot;);\r\n            }\r\n        }\r\n        System.out.println (&quot;\\n&quot;);\r\n    }\r\n\r\nAn empty row (`{}`) in `arr` will result in a corresponding column in `res` having all zero. ","title":"Rotate matrix elements for ArrayList&lt;ArrayList&lt;String&gt;&gt; in java","body":"<p>Here is a &quot;Old Dog&quot; approach:</p>\n<pre><code>public static List&lt;List&lt;Integer&gt;&gt; rotate (List&lt;List&lt;Integer&gt;&gt; source) {\n   // find row with greatest number of columns\n   // there will be one row generated for each column\n   int max = 0;\n   for (int i = 0; i &lt; source.size(); ++i) {\n      max = Math.max (source.get(i).size(), max);    \n   }\n\n   List&lt;List&lt;Integer&gt;&gt; dest = new ArrayList&lt;&gt; (max);\n      // i indexes column in source, row in dest\n     for (int i = 0; i &lt; max; ++i) { \n        List&lt;Integer&gt; line = new ArrayList&lt;&gt; (source.size());\n         // j indexes row in source, column in dest\n        for (int j = 0; j &lt; source.size(); ++j) { \n           if (i &gt;= source.get(j).size()) {\n               line.add (j,0);\n           } else {\n              line.add (j,source.get(j).get(i));\n           }\n        }\n        dest.add (line);\n   }     \n   return dest;    \n }\n</code></pre>\n<p>Test method:</p>\n<pre><code>public static void testRotate () {\n    Integer [][] arr = {{1,2,3},{4,5,6,10,11},{7,8,9}};\n    List&lt;List&lt;Integer&gt;&gt; list = new ArrayList&lt;&gt; ();\n    for (int i = 0; i &lt; arr.length; ++i) {\n        List&lt;Integer&gt; row = Arrays.asList (arr[i]);\n        list.add(row);\n    }\n    List&lt;List&lt;Integer&gt;&gt; res = rotate (list);\n    for (int i = 0; i &lt; res.size(); ++i) {\n        System.out.println ();\n        for (int j = 0; j &lt; res.get(i).size(); ++j) {\n            System.out.print (res.get(i).get(j) + &quot;\\t&quot;);\n        }\n    }\n    System.out.println (&quot;\\n&quot;);\n}\n</code></pre>\n<p>An empty row (<code>{}</code>) in <code>arr</code> will result in a corresponding column in <code>res</code> having all zero.</p>\n"}],"owner":{"account_id":9686627,"reputation":6334,"user_id":7200133,"display_name":"Gk Mohammad Emon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1671241640,"creation_date":1671133875,"question_id":74816837,"body_markdown":"I already did search a lot and got a lot of solutions for the rotate matrix but all of them are **2D arrays**, for example `arr[][]` but for my case, my matrix is `ArrayList&lt;ArrayList&lt;String&gt;&gt;`. So it is natural that it might not be equal in row and column. For example, my matrix is - \r\n\r\n    1-2-3\r\n    4-5-6-6 //Here column is 4 not 3 like the 1-2-3 or 7-8-9 rows \r\n    7-8-9\r\n    \r\nMy target is to make my `ArrayList&lt;ArrayList&lt;String&gt;&gt;` matrix rotate into a **clockwise** or **anti-clockwise** and make it equal in a row and column size. For example- \r\n\r\n    1-2-3-0         1-4-7\r\n    4-5-6-6   ==&gt;   2-5-8\r\n    7-8-9-0         3-6-9\r\n                    0-6-0\r\n How to optimally achieve this purpose? \r\n\r\n","title":"Rotate matrix elements for ArrayList&lt;ArrayList&lt;String&gt;&gt; in java","body":"<p>I already did search a lot and got a lot of solutions for the rotate matrix but all of them are <strong>2D arrays</strong>, for example <code>arr[][]</code> but for my case, my matrix is <code>ArrayList&lt;ArrayList&lt;String&gt;&gt;</code>. So it is natural that it might not be equal in row and column. For example, my matrix is -</p>\n<pre><code>1-2-3\n4-5-6-6 //Here column is 4 not 3 like the 1-2-3 or 7-8-9 rows \n7-8-9\n</code></pre>\n<p>My target is to make my <code>ArrayList&lt;ArrayList&lt;String&gt;&gt;</code> matrix rotate into a <strong>clockwise</strong> or <strong>anti-clockwise</strong> and make it equal in a row and column size. For example-</p>\n<pre><code>1-2-3-0         1-4-7\n4-5-6-6   ==&gt;   2-5-8\n7-8-9-0         3-6-9\n                0-6-0\n</code></pre>\n<p>How to optimally achieve this purpose?</p>\n"},{"tags":["java","kotlin","annotations","readability"],"comments":[{"owner":{"account_id":58050,"reputation":7570,"user_id":173852,"display_name":"mernst"},"score":1,"creation_date":1671293247,"post_id":74831206,"comment_id":132070406,"body_markdown":"Your suggestion &quot;Perhaps with an annotation preprocessor?&quot; is on point.  The compiler itself doesn&#39;t know anything about the semantics of user-defined (including library-defined) annotations, nor do anything with annotations.  All interpretation of annotations is within annotation processors, so you will need to write a new annotation processor that runs first, or more likely modify the existing annotation processor that interprets `@Body`.","body":"Your suggestion &quot;Perhaps with an annotation preprocessor?&quot; is on point.  The compiler itself doesn&#39;t know anything about the semantics of user-defined (including library-defined) annotations, nor do anything with annotations.  All interpretation of annotations is within annotation processors, so you will need to write a new annotation processor that runs first, or more likely modify the existing annotation processor that interprets <code>@Body</code>."}],"owner":{"account_id":6588799,"reputation":2536,"user_id":5090758,"accept_rate":46,"display_name":"William Rosenbloom"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":172,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671240854,"creation_date":1671240854,"question_id":74831206,"body_markdown":"I am using Retrofit and Kotlin to build an API client. For accessibility, I will provide examples in Java.\r\n\r\nThere are a few methods in this API that require a JSON body with only one parameter. I made an annotation `@SingletonBody(String)` that tells a call adapter to wrap the argument in a `Map&lt;String,Object&gt;`.\r\n\r\nFor example, to rename an account we `PUT` a A simple json body.\r\n\r\n    curl -X PUT https://api.example.com/account/whatever -d &#39;{ &quot;name&quot;: &quot;the new name for the account&quot; }&#39;\r\n\r\nI want to pass a `String name` argument for simplicity rather than a `Map`. I could accomplish this by creating a default method that delegates to another method.\r\n\r\n    public interface AccountApi {\r\n\r\n        // Inconvenient delegate\r\n        @PUT(&quot;/accounts/{accountId}&quot;)\r\n        Call&lt;Void&gt; renameAccount(@Path(&quot;accountId&quot;) String accountId, @Body Map&lt;String,Object&gt; body);\r\n\r\n        // Convenient wrapper\r\n        default Call&lt;Void&gt; renameAccount(String accountId, String name) {\r\n            return renameAccount(accountId, Collections.singletonMap(&quot;name&quot;, name));\r\n        }\r\n    }\r\n\r\nThis felt messy to me. My `@SingletonBody` annotation allows me to declare only one method.\r\n\r\n    public interface AccountApi {\r\n\r\n        @PUT(&quot;/accounts/{accountId}&quot;)\r\n        Call&lt;Void&gt; renameAccount(@Path(&quot;accountId&quot;) String accountId,\r\n                                 @Body @SingletonBody(&quot;name&quot;) String name);\r\n\r\n    }\r\n\r\n# TL;DR\r\n\r\nMy `@SingletonBody` annotation **necessarily** implies Retrofit&#39;s `@Body` annotation. How can I tell the complier to infer `@Body` from `@SingletonBody` such that I don&#39;t need to write both? Perhaps with an [annotation preprocessor][1]?\r\n\r\nMy instinct was to extend Retrofit&#39;s annotation, but the JVM (Kotlin too) [does not allow annotations to have explicit superclasses or superinterfaces][2].\r\n\r\n\r\n  [1]: https://kotlinlang.org/docs/ksp-overview.html\r\n  [2]: https://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.6","title":"How to make one annotation imply another in Java or Kotlin","body":"<p>I am using Retrofit and Kotlin to build an API client. For accessibility, I will provide examples in Java.</p>\n<p>There are a few methods in this API that require a JSON body with only one parameter. I made an annotation <code>@SingletonBody(String)</code> that tells a call adapter to wrap the argument in a <code>Map&lt;String,Object&gt;</code>.</p>\n<p>For example, to rename an account we <code>PUT</code> a A simple json body.</p>\n<pre><code>curl -X PUT https://api.example.com/account/whatever -d '{ &quot;name&quot;: &quot;the new name for the account&quot; }'\n</code></pre>\n<p>I want to pass a <code>String name</code> argument for simplicity rather than a <code>Map</code>. I could accomplish this by creating a default method that delegates to another method.</p>\n<pre><code>public interface AccountApi {\n\n    // Inconvenient delegate\n    @PUT(&quot;/accounts/{accountId}&quot;)\n    Call&lt;Void&gt; renameAccount(@Path(&quot;accountId&quot;) String accountId, @Body Map&lt;String,Object&gt; body);\n\n    // Convenient wrapper\n    default Call&lt;Void&gt; renameAccount(String accountId, String name) {\n        return renameAccount(accountId, Collections.singletonMap(&quot;name&quot;, name));\n    }\n}\n</code></pre>\n<p>This felt messy to me. My <code>@SingletonBody</code> annotation allows me to declare only one method.</p>\n<pre><code>public interface AccountApi {\n\n    @PUT(&quot;/accounts/{accountId}&quot;)\n    Call&lt;Void&gt; renameAccount(@Path(&quot;accountId&quot;) String accountId,\n                             @Body @SingletonBody(&quot;name&quot;) String name);\n\n}\n</code></pre>\n<h1>TL;DR</h1>\n<p>My <code>@SingletonBody</code> annotation <strong>necessarily</strong> implies Retrofit's <code>@Body</code> annotation. How can I tell the complier to infer <code>@Body</code> from <code>@SingletonBody</code> such that I don't need to write both? Perhaps with an <a href=\"https://kotlinlang.org/docs/ksp-overview.html\" rel=\"nofollow noreferrer\">annotation preprocessor</a>?</p>\n<p>My instinct was to extend Retrofit's annotation, but the JVM (Kotlin too) <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.6\" rel=\"nofollow noreferrer\">does not allow annotations to have explicit superclasses or superinterfaces</a>.</p>\n"},{"tags":["java","import","wildcard"],"answers":[{"tags":[],"owner":{"account_id":1737,"reputation":27794,"user_id":2354,"accept_rate":87,"display_name":"Benjamin Pollack"},"down_vote_count":15,"up_vote_count":729,"is_accepted":true,"score":714,"last_activity_date":1671239878,"creation_date":1222660730,"answer_id":147461,"question_id":147454,"body_markdown":"The only problem with it is that it clutters your local namespace.  For example, let&#39;s say that you&#39;re writing a Swing app, and so need `java.awt.Event`, and are also interfacing with the company&#39;s calendaring system, which has `com.mycompany.calendar.Event`. If you import both using the wildcard method, one of these three things happens:\r\n\r\n  1. You have an outright naming conflict between `java.awt.Event` and `com.mycompany.calendar.Event`, and so you can&#39;t even compile.\r\n  2. You actually manage only to import one (only one of your two imports does `.*`), but it&#39;s the wrong one, and you struggle to figure out why your code is claiming the type is wrong.\r\n  3. When you compile your code, there is no `com.mycompany.calendar.Event`, but when they later add one, your previously valid code suddenly stops compiling.\r\n\r\nThe advantage of explicitly listing all imports is that I can tell at a glance which class you meant to use, which simply makes reading the code much easier. If you&#39;re just doing a quick one-off thing, there&#39;s nothing explicitly *wrong*, but future maintainers will thank you for your clarity otherwise.","title":"Why is using a wild card with a Java import statement bad?","body":"<p>The only problem with it is that it clutters your local namespace.  For example, let's say that you're writing a Swing app, and so need <code>java.awt.Event</code>, and are also interfacing with the company's calendaring system, which has <code>com.mycompany.calendar.Event</code>. If you import both using the wildcard method, one of these three things happens:</p>\n<ol>\n<li>You have an outright naming conflict between <code>java.awt.Event</code> and <code>com.mycompany.calendar.Event</code>, and so you can't even compile.</li>\n<li>You actually manage only to import one (only one of your two imports does <code>.*</code>), but it's the wrong one, and you struggle to figure out why your code is claiming the type is wrong.</li>\n<li>When you compile your code, there is no <code>com.mycompany.calendar.Event</code>, but when they later add one, your previously valid code suddenly stops compiling.</li>\n</ol>\n<p>The advantage of explicitly listing all imports is that I can tell at a glance which class you meant to use, which simply makes reading the code much easier. If you're just doing a quick one-off thing, there's nothing explicitly <em>wrong</em>, but future maintainers will thank you for your clarity otherwise.</p>\n"},{"tags":[],"owner":{"account_id":8796,"reputation":445,"user_id":15988,"display_name":"Jeff C"},"down_vote_count":2,"up_vote_count":14,"is_accepted":false,"score":12,"last_activity_date":1222660751,"creation_date":1222660751,"answer_id":147463,"question_id":147454,"body_markdown":"I prefer specific imports, because it allows me to see all the external references used in the file without looking at the whole file.  (Yes, I know it won&#39;t necessarily show fully qualified references.  But I avoid them whenever possible.)\r\n\r\n","title":"Why is using a wild card with a Java import statement bad?","body":"<p>I prefer specific imports, because it allows me to see all the external references used in the file without looking at the whole file.  (Yes, I know it won't necessarily show fully qualified references.  But I avoid them whenever possible.)</p>\n"},{"tags":[],"owner":{"account_id":3512,"reputation":17188,"user_id":5066,"display_name":"hazzen"},"down_vote_count":3,"up_vote_count":31,"is_accepted":false,"score":28,"last_activity_date":1222661104,"creation_date":1222661104,"answer_id":147473,"question_id":147454,"body_markdown":"It clutters your namespace, requiring you to fully specify any classnames that are ambiguous. The most common occurence of this is with:\r\n\r\n    import java.util.*;\r\n    import java.awt.*;\r\n\r\n    ...\r\n    List blah; // Ambiguous, needs to be qualified.\r\n\r\nIt also helps make your dependencies concrete, as all of your dependencies are listed at the top of the file.","title":"Why is using a wild card with a Java import statement bad?","body":"<p>It clutters your namespace, requiring you to fully specify any classnames that are ambiguous. The most common occurence of this is with:</p>\n\n<pre><code>import java.util.*;\nimport java.awt.*;\n\n...\nList blah; // Ambiguous, needs to be qualified.\n</code></pre>\n\n<p>It also helps make your dependencies concrete, as all of your dependencies are listed at the top of the file.</p>\n"},{"tags":[],"owner":{"account_id":1931,"reputation":4223,"user_id":2659,"display_name":"Josh Segall"},"down_vote_count":2,"up_vote_count":29,"is_accepted":false,"score":27,"last_activity_date":1222663344,"creation_date":1222663344,"answer_id":147532,"question_id":147454,"body_markdown":" 1. It helps to identify classname conflicts: two classes in different packages that have the same name.  This can be masked with the * import.\r\n 2. It makes dependencies explicit, so that anyone who has to read your code later knows what you meant to import and what you didn&#39;t mean to import.\r\n 3. It can make some compilation faster because the compiler doesn&#39;t have to search the whole package to identify depdencies, though this is usually not a huge deal with modern compilers.\r\n 4. The inconvenient aspects of explicit imports are minimized with modern IDEs. Most IDEs allow you to collapse the import section so it&#39;s not in the way, automatically populate imports when needed, and automatically identify unused imports to help clean them up.\r\n\r\nMost places I&#39;ve worked that use any significant amount of Java make explicit imports part of the coding standard.  I sometimes still use * for quick prototyping and then expand the import lists (some IDEs will do this for you as well) when productizing the code.","title":"Why is using a wild card with a Java import statement bad?","body":"<ol>\n<li>It helps to identify classname conflicts: two classes in different packages that have the same name.  This can be masked with the * import.</li>\n<li>It makes dependencies explicit, so that anyone who has to read your code later knows what you meant to import and what you didn't mean to import.</li>\n<li>It can make some compilation faster because the compiler doesn't have to search the whole package to identify depdencies, though this is usually not a huge deal with modern compilers.</li>\n<li>The inconvenient aspects of explicit imports are minimized with modern IDEs. Most IDEs allow you to collapse the import section so it's not in the way, automatically populate imports when needed, and automatically identify unused imports to help clean them up.</li>\n</ol>\n\n<p>Most places I've worked that use any significant amount of Java make explicit imports part of the coding standard.  I sometimes still use * for quick prototyping and then expand the import lists (some IDEs will do this for you as well) when productizing the code.</p>\n"},{"tags":[],"owner":{"account_id":2202,"reputation":24331,"user_id":3029,"accept_rate":63,"display_name":"davetron5000"},"down_vote_count":69,"up_vote_count":320,"is_accepted":false,"score":251,"last_activity_date":1614106595,"creation_date":1222703156,"answer_id":149282,"question_id":147454,"body_markdown":"Here&#39;s a vote **for** star imports.  An import statement is intended to import a *package*, not a class.  It is much cleaner to import entire packages; the issues identified here (e.g. `java.sql.Date` vs `java.util.Date`) are easily remedied by other means, not **really** addressed by specific imports and certainly do not justify insanely pedantic imports on all classes.  There is nothing more disconcerting than opening a source file and having to page through 100 import statements.\r\n\r\nDoing specific imports makes refactoring more difficult; if you remove/rename a class, you need to remove **all** of its specific imports.  If you switch an implementation to a different class in the same package, you have to go fix the imports.  While these extra steps can be automated, they are really productivity hits for no real gain.\r\n\r\nIf Eclipse didn&#39;t do specific class imports by default, everyone would still be doing star imports.  I&#39;m sorry, but there&#39;s really no rational justification for doing specific imports. \r\n\r\nHere&#39;s how to deal with class conflicts:\r\n\r\n    import java.sql.*;\r\n    import java.util.*;\r\n    import java.sql.Date;\r\n\r\n","title":"Why is using a wild card with a Java import statement bad?","body":"<p>Here's a vote <strong>for</strong> star imports.  An import statement is intended to import a <em>package</em>, not a class.  It is much cleaner to import entire packages; the issues identified here (e.g. <code>java.sql.Date</code> vs <code>java.util.Date</code>) are easily remedied by other means, not <strong>really</strong> addressed by specific imports and certainly do not justify insanely pedantic imports on all classes.  There is nothing more disconcerting than opening a source file and having to page through 100 import statements.</p>\n<p>Doing specific imports makes refactoring more difficult; if you remove/rename a class, you need to remove <strong>all</strong> of its specific imports.  If you switch an implementation to a different class in the same package, you have to go fix the imports.  While these extra steps can be automated, they are really productivity hits for no real gain.</p>\n<p>If Eclipse didn't do specific class imports by default, everyone would still be doing star imports.  I'm sorry, but there's really no rational justification for doing specific imports.</p>\n<p>Here's how to deal with class conflicts:</p>\n<pre><code>import java.sql.*;\nimport java.util.*;\nimport java.sql.Date;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7257,"reputation":30102,"user_id":12541,"display_name":"Scott Stanchfield"},"down_vote_count":15,"up_vote_count":245,"is_accepted":false,"score":230,"last_activity_date":1621015906,"creation_date":1222717366,"answer_id":150315,"question_id":147454,"body_markdown":"Please see my article [Import on Demand is Evil][1]\r\n\r\n\r\n  [1]: http://www.javadude.com/posts/20040522-import-on-demand-is-evil/\r\n\r\nIn short, the biggest problem is that your code can break when a class is *added* to a package you import. For example:\r\n\r\n    import java.awt.*;\r\n    import java.util.*;\r\n\r\n    // ...\r\n\r\n    List list;\r\n\r\nIn Java 1.1, this was fine; List was found in java.awt and there was no conflict.\r\n\r\nNow suppose you check in your perfectly working code, and a year later someone else brings it out to edit it, and is using Java 1.2.\r\n\r\nJava 1.2 added an interface named List to java.util. BOOM! Conflict. The perfectly working code no longer works.\r\n\r\nThis is an *EVIL* language feature. There is *NO* reason that code should stop compiling just because a type is *added* to a package...\r\n\r\nIn addition, it makes it difficult for a reader to determine which &quot;Foo&quot; you&#39;re using.","title":"Why is using a wild card with a Java import statement bad?","body":"<p>Please see my article <a href=\"http://www.javadude.com/posts/20040522-import-on-demand-is-evil/\" rel=\"noreferrer\">Import on Demand is Evil</a></p>\n<p>In short, the biggest problem is that your code can break when a class is <em>added</em> to a package you import. For example:</p>\n<pre><code>import java.awt.*;\nimport java.util.*;\n\n// ...\n\nList list;\n</code></pre>\n<p>In Java 1.1, this was fine; List was found in java.awt and there was no conflict.</p>\n<p>Now suppose you check in your perfectly working code, and a year later someone else brings it out to edit it, and is using Java 1.2.</p>\n<p>Java 1.2 added an interface named List to java.util. BOOM! Conflict. The perfectly working code no longer works.</p>\n<p>This is an <em>EVIL</em> language feature. There is <em>NO</em> reason that code should stop compiling just because a type is <em>added</em> to a package...</p>\n<p>In addition, it makes it difficult for a reader to determine which &quot;Foo&quot; you're using.</p>\n"},{"tags":[],"owner":{"account_id":4679,"reputation":135,"user_id":7156,"display_name":"Michael Hall"},"down_vote_count":3,"up_vote_count":13,"is_accepted":false,"score":10,"last_activity_date":1223654276,"creation_date":1223654276,"answer_id":192026,"question_id":147454,"body_markdown":"In a previous project I found that changing from *-imports to specific imports reduced compilation time by half (from about 10 minutes to about 5 minutes). The *-import makes the compiler search each of the packages listed for a class matching the one you used. While this time can be small, it adds up for large projects.\r\n\r\nA side affect of the *-import was that developers would copy and paste common import lines rather than think about what they needed.","title":"Why is using a wild card with a Java import statement bad?","body":"<p>In a previous project I found that changing from *-imports to specific imports reduced compilation time by half (from about 10 minutes to about 5 minutes). The *-import makes the compiler search each of the packages listed for a class matching the one you used. While this time can be small, it adds up for large projects.</p>\n\n<p>A side affect of the *-import was that developers would copy and paste common import lines rather than think about what they needed.</p>\n"},{"tags":[],"owner":{"account_id":4001,"reputation":14701,"user_id":5883,"accept_rate":100,"display_name":"hwiechers"},"down_vote_count":18,"up_vote_count":105,"is_accepted":false,"score":87,"last_activity_date":1313044467,"creation_date":1262463439,"answer_id":1992695,"question_id":147454,"body_markdown":"It&#39;s *not* bad to use a wild card with a Java import statement.\r\n\r\nIn [Clean Code][1], Robert C. Martin actually recommends using them to avoid long import lists.\r\n\r\nHere is the recommendation:\r\n\r\n&gt; J1: Avoid Long Import Lists by Using\r\n&gt; Wildcards\r\n&gt; \r\n&gt; If you use two or more classes from a\r\n&gt; package, then import the whole package\r\n&gt; with\r\n&gt; \r\n&gt; import package.*;\r\n&gt; \r\n&gt; \r\n&gt; Long lists of imports are daunting to\r\n&gt; the reader. We don’t want to clutter\r\n&gt; up the tops of our modules with 80\r\n&gt; lines of imports. Rather we want the\r\n&gt; imports to be a concise statement\r\n&gt; about which packages we collaborate\r\n&gt; with.\r\n&gt; \r\n&gt; Specific imports are hard\r\n&gt; dependencies, whereas wildcard imports\r\n&gt; are not. If you specifically import a\r\n&gt; class, then that class must exist. But\r\n&gt; if you import a package with a\r\n&gt; wildcard, no particular classes need\r\n&gt; to exist. The import statement simply\r\n&gt; adds the package to the search path\r\n&gt; when hunting for names. So no true\r\n&gt; dependency is created by such imports,\r\n&gt; and they therefore serve to keep our\r\n&gt; modules less coupled.\r\n&gt; \r\n&gt; There are times when the long list of\r\n&gt; specific imports can be useful. For\r\n&gt; example, if you are dealing with\r\n&gt; legacy code and you want to find out\r\n&gt; what classes you need to build mocks\r\n&gt; and stubs for, you can walk down the\r\n&gt; list of specific imports to find out\r\n&gt; the true qualified names of all those\r\n&gt; classes and then put the appropriate\r\n&gt; stubs in place. However, this use for\r\n&gt; specific imports is very rare.\r\n&gt; Furthermore, most modern IDEs will\r\n&gt; allow you to convert the wildcarded\r\n&gt; imports to a list of specific imports\r\n&gt; with a single command. So even in the\r\n&gt; legacy case it’s better to import\r\n&gt; wildcards.\r\n&gt; \r\n&gt; Wildcard imports can sometimes cause\r\n&gt; name conflicts and ambiguities. Two\r\n&gt; classes with the same name, but in\r\n&gt; different packages, will need to be\r\n&gt; specifically imported, or at least\r\n&gt; specifically qualified when used. This\r\n&gt; can be a nuisance but is rare enough\r\n&gt; that using wildcard imports is still\r\n&gt; generally better than specific\r\n&gt; imports.\r\n\r\n  [1]: http://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882","title":"Why is using a wild card with a Java import statement bad?","body":"<p>It's <em>not</em> bad to use a wild card with a Java import statement.</p>\n\n<p>In <a href=\"https://rads.stackoverflow.com/amzn/click/com/0132350882\" rel=\"noreferrer\" rel=\"nofollow noreferrer\">Clean Code</a>, Robert C. Martin actually recommends using them to avoid long import lists.</p>\n\n<p>Here is the recommendation:</p>\n\n<blockquote>\n  <p>J1: Avoid Long Import Lists by Using\n  Wildcards</p>\n  \n  <p>If you use two or more classes from a\n  package, then import the whole package\n  with</p>\n  \n  <p>import package.*;</p>\n  \n  <p>Long lists of imports are daunting to\n  the reader. We don’t want to clutter\n  up the tops of our modules with 80\n  lines of imports. Rather we want the\n  imports to be a concise statement\n  about which packages we collaborate\n  with.</p>\n  \n  <p>Specific imports are hard\n  dependencies, whereas wildcard imports\n  are not. If you specifically import a\n  class, then that class must exist. But\n  if you import a package with a\n  wildcard, no particular classes need\n  to exist. The import statement simply\n  adds the package to the search path\n  when hunting for names. So no true\n  dependency is created by such imports,\n  and they therefore serve to keep our\n  modules less coupled.</p>\n  \n  <p>There are times when the long list of\n  specific imports can be useful. For\n  example, if you are dealing with\n  legacy code and you want to find out\n  what classes you need to build mocks\n  and stubs for, you can walk down the\n  list of specific imports to find out\n  the true qualified names of all those\n  classes and then put the appropriate\n  stubs in place. However, this use for\n  specific imports is very rare.\n  Furthermore, most modern IDEs will\n  allow you to convert the wildcarded\n  imports to a list of specific imports\n  with a single command. So even in the\n  legacy case it’s better to import\n  wildcards.</p>\n  \n  <p>Wildcard imports can sometimes cause\n  name conflicts and ambiguities. Two\n  classes with the same name, but in\n  different packages, will need to be\n  specifically imported, or at least\n  specifically qualified when used. This\n  can be a nuisance but is rare enough\n  that using wildcard imports is still\n  generally better than specific\n  imports.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":4432679,"reputation":391,"user_id":3609446,"display_name":"Vinish Nain"},"down_vote_count":4,"up_vote_count":40,"is_accepted":false,"score":36,"last_activity_date":1399400485,"creation_date":1399400485,"answer_id":23502113,"question_id":147454,"body_markdown":"**Performance**: No impact on performance as byte code is same.\r\nthough it will lead to some compile overheads.\r\n\r\n**Compilation**: on my personal machine, Compiling a blank class without importing anything takes 100 ms but same class when import java.* takes 170 ms.\r\n\r\n","title":"Why is using a wild card with a Java import statement bad?","body":"<p><strong>Performance</strong>: No impact on performance as byte code is same.\nthough it will lead to some compile overheads.</p>\n\n<p><strong>Compilation</strong>: on my personal machine, Compiling a blank class without importing anything takes 100 ms but same class when import java.* takes 170 ms.</p>\n"},{"tags":[],"owner":{"account_id":4977470,"reputation":1368,"user_id":4003403,"accept_rate":86,"display_name":"Ivan"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1466153663,"creation_date":1466153663,"answer_id":37877171,"question_id":147454,"body_markdown":"In [DDD book][1]\r\n\r\n\r\n  [1]: https://www.amazon.com/Domain-Driven-Design-Tackling-Complexity-Software/dp/0321125215\r\n\r\n\r\n&gt; In whatever development technology the implementation will be based on, look for ways of minimizing the\r\nwork of refactoring MODULES . In Java, there is no escape from importing into individual classes, but you\r\ncan at least import entire packages at a time, reflecting the intention that packages are highly cohesive units\r\nwhile simultaneously reducing the effort of changing package names.\r\n\r\nAnd if it clutters local namespace its not your fault - blame the size of the package.","title":"Why is using a wild card with a Java import statement bad?","body":"<p>In <a href=\"https://rads.stackoverflow.com/amzn/click/com/0321125215\" rel=\"noreferrer\" rel=\"nofollow noreferrer\">DDD book</a></p>\n\n<blockquote>\n  <p>In whatever development technology the implementation will be based on, look for ways of minimizing the\n  work of refactoring MODULES . In Java, there is no escape from importing into individual classes, but you\n  can at least import entire packages at a time, reflecting the intention that packages are highly cohesive units\n  while simultaneously reducing the effort of changing package names.</p>\n</blockquote>\n\n<p>And if it clutters local namespace its not your fault - blame the size of the package.</p>\n"},{"tags":[],"owner":{"account_id":1750637,"reputation":2903,"user_id":1599792,"accept_rate":100,"display_name":"Aftab"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1477594225,"creation_date":1474392455,"answer_id":39600304,"question_id":147454,"body_markdown":"The most important one is that importing `java.awt.*` can make your program incompatible with a future Java version: \r\n\r\nSuppose that you have a class named &quot;ABC&quot;, you&#39;re using JDK 8 and you import `java.util.*`. Now, suppose that Java 9 comes out, and it has a new class in package `java.util` that by coincidence also happens to be called &quot;ABC&quot;. Your program now will not compile on Java 9, because the compiler doesn&#39;t know if with the name &quot;ABC&quot; you mean your own class or the new class in `java.awt`. \r\n\r\nYou won&#39;t have that problem when you import only those classes explicitly from `java.awt` that you actually use. \r\n\r\nResources:\r\n\r\n[Java Imports][1]\r\n\r\n\r\n  [1]: https://coderanch.com/t/488764/java/java/import-java-util-List-faster","title":"Why is using a wild card with a Java import statement bad?","body":"<p>The most important one is that importing <code>java.awt.*</code> can make your program incompatible with a future Java version: </p>\n\n<p>Suppose that you have a class named \"ABC\", you're using JDK 8 and you import <code>java.util.*</code>. Now, suppose that Java 9 comes out, and it has a new class in package <code>java.util</code> that by coincidence also happens to be called \"ABC\". Your program now will not compile on Java 9, because the compiler doesn't know if with the name \"ABC\" you mean your own class or the new class in <code>java.awt</code>. </p>\n\n<p>You won't have that problem when you import only those classes explicitly from <code>java.awt</code> that you actually use. </p>\n\n<p>Resources:</p>\n\n<p><a href=\"https://coderanch.com/t/488764/java/java/import-java-util-List-faster\" rel=\"nofollow\">Java Imports</a></p>\n"},{"tags":[],"owner":{"account_id":3620572,"reputation":29,"user_id":3258967,"display_name":"user109439"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1513815952,"creation_date":1513815952,"answer_id":47916204,"question_id":147454,"body_markdown":"Among all the valid points made on both sides I haven&#39;t found my main reason to avoid the wildcard: I like to be able to read the code and know directly what every class is, or if it&#39;s definition isn&#39;t in the language or the file, where to find it.  If more than one package is imported with * I have to go search every one of them to find a class I don&#39;t recognize.  Readability is supreme, and I agree code should not *require* an IDE for reading it.","title":"Why is using a wild card with a Java import statement bad?","body":"<p>Among all the valid points made on both sides I haven't found my main reason to avoid the wildcard: I like to be able to read the code and know directly what every class is, or if it's definition isn't in the language or the file, where to find it.  If more than one package is imported with * I have to go search every one of them to find a class I don't recognize.  Readability is supreme, and I agree code should not <em>require</em> an IDE for reading it.</p>\n"},{"tags":[],"owner":{"account_id":2327485,"reputation":3184,"user_id":4865117,"accept_rate":14,"display_name":"Leon"},"down_vote_count":6,"up_vote_count":7,"is_accepted":false,"score":1,"last_activity_date":1535589410,"creation_date":1521350991,"answer_id":49344758,"question_id":147454,"body_markdown":"- There is no runtime impact, as compiler automatically replaces the \\* with concrete class names. If you decompile the .class file, you would never see `import ...*`. \r\n\r\n- C# **always** uses \\* (implicitly) as you can only `using` package name. You can never specify the class name at all. Java introduces the feature after c#. (Java is so tricky in many aspects but it&#39;s beyond this topic). \r\n\r\n- In Intellij Idea when you do &quot;organize imports&quot;, it automatically replaces multiple imports of the same package with \\*. This is a mandantory feature as you can not turn it off (though you can increase the threshold).\r\n\r\n- The case listed by the accepted reply is not valid. Without \\* you still got the same issue. You need specify the pakcage name in your code no matter you use \\* or not.","title":"Why is using a wild card with a Java import statement bad?","body":"<ul>\n<li><p>There is no runtime impact, as compiler automatically replaces the * with concrete class names. If you decompile the .class file, you would never see <code>import ...*</code>. </p></li>\n<li><p>C# <strong>always</strong> uses * (implicitly) as you can only <code>using</code> package name. You can never specify the class name at all. Java introduces the feature after c#. (Java is so tricky in many aspects but it's beyond this topic). </p></li>\n<li><p>In Intellij Idea when you do \"organize imports\", it automatically replaces multiple imports of the same package with *. This is a mandantory feature as you can not turn it off (though you can increase the threshold).</p></li>\n<li><p>The case listed by the accepted reply is not valid. Without * you still got the same issue. You need specify the pakcage name in your code no matter you use * or not.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":69714,"reputation":6669,"user_id":202705,"accept_rate":56,"display_name":"magallanes"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1549539879,"creation_date":1549539879,"answer_id":54572625,"question_id":147454,"body_markdown":"For the record:\r\nWhen you add an import, you are also indicating your dependencies.\r\n\r\nYou could see quickly what are the dependencies of files (excluding classes of the same namespace). ","title":"Why is using a wild card with a Java import statement bad?","body":"<p>For the record:\nWhen you add an import, you are also indicating your dependencies.</p>\n\n<p>You could see quickly what are the dependencies of files (excluding classes of the same namespace). </p>\n"},{"tags":[],"owner":{"account_id":7615640,"reputation":622,"user_id":5775158,"accept_rate":37,"display_name":"Testilla"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1595726876,"creation_date":1595726876,"answer_id":63095228,"question_id":147454,"body_markdown":"Importing all the classes in a package is considered a blind approach. A major reason for this is that it clutters the class namespace and could lead to conflicts between classes in different packages with the same name.\r\n\r\nSpecifically populating the necessary classes avoids that problem and clearly shows which versions were wanted. This is good for code maintainability.","title":"Why is using a wild card with a Java import statement bad?","body":"<p>Importing all the classes in a package is considered a blind approach. A major reason for this is that it clutters the class namespace and could lead to conflicts between classes in different packages with the same name.</p>\n<p>Specifically populating the necessary classes avoids that problem and clearly shows which versions were wanted. This is good for code maintainability.</p>\n"},{"tags":[],"owner":{"account_id":5217347,"reputation":881,"user_id":4171861,"accept_rate":75,"display_name":"Leo Orientis"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1601749250,"creation_date":1601749250,"answer_id":64187528,"question_id":147454,"body_markdown":"Forget about cluttered namespaces... And consider the poor soul who has to read and understand your code on GitHub, in vi, Notepad++, or some other non-IDE text editor.\r\n\r\nThat person has to painstakingly look up every token that comes from one of the wildcards against all the classes and references in each wildcarded scope... just to figure out what in the heck is going on.\r\n\r\nIf you&#39;re writing code for the compiler only - and you know what you&#39;re doing - I&#39;m sure there&#39;s no problem with wildcards.\r\n\r\nBut if other people - including future you - want to quickly make sense of a particular code file on one reading, then explicit references help a lot.","title":"Why is using a wild card with a Java import statement bad?","body":"<p>Forget about cluttered namespaces... And consider the poor soul who has to read and understand your code on GitHub, in vi, Notepad++, or some other non-IDE text editor.</p>\n<p>That person has to painstakingly look up every token that comes from one of the wildcards against all the classes and references in each wildcarded scope... just to figure out what in the heck is going on.</p>\n<p>If you're writing code for the compiler only - and you know what you're doing - I'm sure there's no problem with wildcards.</p>\n<p>But if other people - including future you - want to quickly make sense of a particular code file on one reading, then explicit references help a lot.</p>\n"},{"tags":[],"owner":{"account_id":9096271,"reputation":531,"user_id":6770146,"display_name":"Milan Paudyal"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1655573287,"creation_date":1602410139,"answer_id":64302718,"question_id":147454,"body_markdown":"Here are the few things that I found regarding this topic.\r\n- During compilation, the compiler tries to find classes that are used in the code from the `.*` import and the corresponding byte code will be generated by selecting the used classes from `.*` import. So the byte code of using `.*` import or .class names import will be same and the runtime performance will also be the same because of the same byte code.\r\n- In each compilation, the compiler has to scan all the classes of `.*` package to match the classes that are actually used in the code. So, code with `.*` import takes more time during the compilation process as compared to using .class name imports.\r\n- Using `.*` import helps to make code more cleaner\r\n- Using `.*` import can create ambiguity when we use two classes of the same name from two different packages. Eg, Date is available in both packages.\r\n\r\n        import java.util.*;\r\n        import java.sql.*;\r\n        \r\n        public class DateDemo {\r\n            private Date utilDate;\r\n            private Date sqlDate;\r\n        }\r\n","title":"Why is using a wild card with a Java import statement bad?","body":"<p>Here are the few things that I found regarding this topic.</p>\n<ul>\n<li><p>During compilation, the compiler tries to find classes that are used in the code from the <code>.*</code> import and the corresponding byte code will be generated by selecting the used classes from <code>.*</code> import. So the byte code of using <code>.*</code> import or .class names import will be same and the runtime performance will also be the same because of the same byte code.</p>\n</li>\n<li><p>In each compilation, the compiler has to scan all the classes of <code>.*</code> package to match the classes that are actually used in the code. So, code with <code>.*</code> import takes more time during the compilation process as compared to using .class name imports.</p>\n</li>\n<li><p>Using <code>.*</code> import helps to make code more cleaner</p>\n</li>\n<li><p>Using <code>.*</code> import can create ambiguity when we use two classes of the same name from two different packages. Eg, Date is available in both packages.</p>\n<pre><code>  import java.util.*;\n  import java.sql.*;\n\n  public class DateDemo {\n      private Date utilDate;\n      private Date sqlDate;\n  }\n</code></pre>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":7413926,"reputation":5474,"user_id":11374957,"display_name":"Kaan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655576732,"creation_date":1655576732,"answer_id":72671698,"question_id":147454,"body_markdown":"&gt; _Why is using a wild card with a Java import statement bad?_\r\n\r\nIf you&#39;re using an IDE (which you should be doing), and there are more code owners than just you, using wildcard imports is bad because it:\r\n\r\n* conceals information from the rest of the team\r\n* provides only false benefits (things which are better-solved using IDE functionality than with wildcard imports) to you as an individual \r\n\r\nMost of the &quot;use wildcards&quot; proponents have a focus on the individual: I don&#39;t want to maintain the list, I don&#39;t want see the clutter, etc. Here are several of the common examples:\r\n\r\n* **maintenance is harder** –&#160;when you want to introduce a new class into your source code, you have to manually add the import statement\r\n* **refactoring is more difficult** – if code is moved around, then import statements have to be updated\r\n* **reduce clutter, tidy up file contents** –&#160;goal here is something along the lines of &quot;removing distractions&quot;\r\n\r\nThese arguments were more convincing before IDEs did all of that automatically. If you&#39;re using a plain text editor instead of an IDE, then these arguments have some merit. But if you&#39;re using a plain text editor, you are already subjecting yourself to a number of other much more significant inefficiencies, and managing import statements is just one among many things that you should stop doing by hand. IDEs offer automatic management of imports, powerful refactoring tools, and folding (hiding) of any parts of the code you don&#39;t want to see.\r\n\r\nFor the &quot;avoid wildcards&quot; proponents, there are many examples, but I&#39;ll point out only one:\r\n\r\n* **clarity** –&#160;specifically, when someone new enters the codebase. They will arrive with questions, and continue to discover new questions as they explore the code. For this new code contributor, wildcard import statements do not _answer_ any questions, and at worst can produce confusion, misunderstanding, new questions. In contrast, with explicit imports (and using an IDE) the worst case is neutral: no new info provided; at best, it not only reduces ambiguity but it can also provide answers.\r\n\r\nAt the end of the day, it helps the entire team to reduce (albeit in a small way) code complexity, to reduce confusion, to add clarity.\r\n","title":"Why is using a wild card with a Java import statement bad?","body":"<blockquote>\n<p><em>Why is using a wild card with a Java import statement bad?</em></p>\n</blockquote>\n<p>If you're using an IDE (which you should be doing), and there are more code owners than just you, using wildcard imports is bad because it:</p>\n<ul>\n<li>conceals information from the rest of the team</li>\n<li>provides only false benefits (things which are better-solved using IDE functionality than with wildcard imports) to you as an individual</li>\n</ul>\n<p>Most of the &quot;use wildcards&quot; proponents have a focus on the individual: I don't want to maintain the list, I don't want see the clutter, etc. Here are several of the common examples:</p>\n<ul>\n<li><strong>maintenance is harder</strong> – when you want to introduce a new class into your source code, you have to manually add the import statement</li>\n<li><strong>refactoring is more difficult</strong> – if code is moved around, then import statements have to be updated</li>\n<li><strong>reduce clutter, tidy up file contents</strong> – goal here is something along the lines of &quot;removing distractions&quot;</li>\n</ul>\n<p>These arguments were more convincing before IDEs did all of that automatically. If you're using a plain text editor instead of an IDE, then these arguments have some merit. But if you're using a plain text editor, you are already subjecting yourself to a number of other much more significant inefficiencies, and managing import statements is just one among many things that you should stop doing by hand. IDEs offer automatic management of imports, powerful refactoring tools, and folding (hiding) of any parts of the code you don't want to see.</p>\n<p>For the &quot;avoid wildcards&quot; proponents, there are many examples, but I'll point out only one:</p>\n<ul>\n<li><strong>clarity</strong> – specifically, when someone new enters the codebase. They will arrive with questions, and continue to discover new questions as they explore the code. For this new code contributor, wildcard import statements do not <em>answer</em> any questions, and at worst can produce confusion, misunderstanding, new questions. In contrast, with explicit imports (and using an IDE) the worst case is neutral: no new info provided; at best, it not only reduces ambiguity but it can also provide answers.</li>\n</ul>\n<p>At the end of the day, it helps the entire team to reduce (albeit in a small way) code complexity, to reduce confusion, to add clarity.</p>\n"}],"owner":{"account_id":11747,"reputation":7108,"user_id":22807,"display_name":"jnancheta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":255117,"favorite_count":0,"down_vote_count":1,"up_vote_count":583,"accepted_answer_id":147461,"answer_count":18,"score":582,"last_activity_date":1671239878,"creation_date":1222660551,"question_id":147454,"body_markdown":"It is much more convenient and cleaner to use a single statement like\r\n\r\n    import java.awt.*;\r\n\r\nthan to import a bunch of individual classes\r\n\r\n    import java.awt.Panel;\r\n    import java.awt.Graphics;\r\n    import java.awt.Canvas;\r\n    ...\r\n\r\nWhat is wrong with using a wildcard in the `import` statement?","title":"Why is using a wild card with a Java import statement bad?","body":"<p>It is much more convenient and cleaner to use a single statement like</p>\n\n<pre><code>import java.awt.*;\n</code></pre>\n\n<p>than to import a bunch of individual classes</p>\n\n<pre><code>import java.awt.Panel;\nimport java.awt.Graphics;\nimport java.awt.Canvas;\n...\n</code></pre>\n\n<p>What is wrong with using a wildcard in the <code>import</code> statement?</p>\n"},{"tags":["java","multithreading","java.util.concurrent","concurrenthashmap"],"answers":[{"tags":[],"owner":{"account_id":437352,"reputation":19077,"user_id":824987,"accept_rate":56,"display_name":"Amit Deshpande"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1354725385,"creation_date":1354724837,"answer_id":13727804,"question_id":13727746,"body_markdown":"Every segment is separately rehashed so there is no collision.\r\n\r\n`ConcurrentHashMap` is array of specialized hash tables which are called `Segments `\r\n\r\n\r\nFrom the source code\r\n\r\n    final Segment&lt;K,V&gt;[] segments;\r\n\r\n    /**\r\n     * Segments are specialized versions of hash tables.  This\r\n     * subclasses from ReentrantLock opportunistically, just to\r\n     * simplify some locking and avoid separate construction.\r\n     */\r\n\r\nAnd if you check the method which returns Segment\r\n\r\n    final Segment&lt;K,V&gt; segmentFor(int hash) {\r\n        return segments[(hash &gt;&gt;&gt; segmentShift) &amp; segmentMask];\r\n    }\r\n\r\nSo if you call `put` it first determines the `Segment` using `segmentFor` and then call put on that `Segment`\r\n\r\n`put` source code\r\n\r\n    public V put(K key, V value) {\r\n        if (value == null)\r\n            throw new NullPointerException();\r\n        int hash = hash(key.hashCode());\r\n        return segmentFor(hash).put(key, hash, value, false);\r\n    }","title":"How does ConcurrentHashMap handle rehashing?","body":"<p>Every segment is separately rehashed so there is no collision.</p>\n\n<p><code>ConcurrentHashMap</code> is array of specialized hash tables which are called <code>Segments</code></p>\n\n<p>From the source code</p>\n\n<pre><code>final Segment&lt;K,V&gt;[] segments;\n\n/**\n * Segments are specialized versions of hash tables.  This\n * subclasses from ReentrantLock opportunistically, just to\n * simplify some locking and avoid separate construction.\n */\n</code></pre>\n\n<p>And if you check the method which returns Segment</p>\n\n<pre><code>final Segment&lt;K,V&gt; segmentFor(int hash) {\n    return segments[(hash &gt;&gt;&gt; segmentShift) &amp; segmentMask];\n}\n</code></pre>\n\n<p>So if you call <code>put</code> it first determines the <code>Segment</code> using <code>segmentFor</code> and then call put on that <code>Segment</code></p>\n\n<p><code>put</code> source code</p>\n\n<pre><code>public V put(K key, V value) {\n    if (value == null)\n        throw new NullPointerException();\n    int hash = hash(key.hashCode());\n    return segmentFor(hash).put(key, hash, value, false);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":543250,"reputation":18874,"user_id":912319,"accept_rate":62,"display_name":"Kanagavelu Sugumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1426502221,"creation_date":1426502221,"answer_id":29074701,"question_id":13727746,"body_markdown":"In `ConcurrentHashMap` table array is created for per-segment. \r\nAnd array of Segments created based on `concurrencyLevel`.\r\n\r\n\r\n        /**\r\n         * The per-segment table. Elements are accessed via\r\n         * entryAt/setEntryAt providing volatile semantics.\r\n         */\r\n        transient volatile HashEntry&lt;K,V&gt;[] table;\r\n\r\n\r\nSo REHASHING also will be done per segment&#39;s table. So this wont affect the table of another segment.\r\n\r\nThis is something like Array{Segments} of Array{elements} (2D). So very fast :)\r\n","title":"How does ConcurrentHashMap handle rehashing?","body":"<p>In <code>ConcurrentHashMap</code> table array is created for per-segment. \nAnd array of Segments created based on <code>concurrencyLevel</code>.</p>\n\n<pre><code>    /**\n     * The per-segment table. Elements are accessed via\n     * entryAt/setEntryAt providing volatile semantics.\n     */\n    transient volatile HashEntry&lt;K,V&gt;[] table;\n</code></pre>\n\n<p>So REHASHING also will be done per segment's table. So this wont affect the table of another segment.</p>\n\n<p>This is something like Array{Segments} of Array{elements} (2D). So very fast :)</p>\n"}],"owner":{"account_id":1480252,"reputation":8353,"user_id":1389813,"accept_rate":70,"display_name":"peter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5081,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":13727804,"answer_count":2,"score":17,"last_activity_date":1671239533,"creation_date":1354724678,"question_id":13727746,"body_markdown":"I am wondering how does ConcurrentHashMap handle rehashing while another thread is still writing on another segment/partition.\r\n\r\nAs far as I understand, ConcurrentHashMap locks the segment independently, so for example:\r\n\r\nIf Thread1 writes to the segment1 slightly before Thread2 writes to segment2, then what happens if it requires the table to resize and rehash after Thread1 insertion, but Thread2 is in the middle of the writing operation?\r\nDoes it lock the whole map for rehashing? And does it have something like &quot;tell Thread2 to stop and wait until the rehash is done&quot;? Because Thread2 may have a chance to end up writing segment1 after the table resize, correct?  ","title":"How does ConcurrentHashMap handle rehashing?","body":"<p>I am wondering how does ConcurrentHashMap handle rehashing while another thread is still writing on another segment/partition.</p>\n<p>As far as I understand, ConcurrentHashMap locks the segment independently, so for example:</p>\n<p>If Thread1 writes to the segment1 slightly before Thread2 writes to segment2, then what happens if it requires the table to resize and rehash after Thread1 insertion, but Thread2 is in the middle of the writing operation?\nDoes it lock the whole map for rehashing? And does it have something like &quot;tell Thread2 to stop and wait until the rehash is done&quot;? Because Thread2 may have a chance to end up writing segment1 after the table resize, correct?</p>\n"},{"tags":["java","jackson"],"comments":[{"owner":{"account_id":3753539,"reputation":9174,"user_id":3120489,"accept_rate":78,"display_name":"dabadaba"},"score":0,"creation_date":1467737461,"post_id":38208692,"comment_id":63841502,"body_markdown":"I think you should need a custom serializer.","body":"I think you should need a custom serializer."}],"answers":[{"tags":[],"owner":{"account_id":8702736,"reputation":11399,"user_id":6511967,"display_name":"Wilson"},"down_vote_count":0,"up_vote_count":27,"is_accepted":true,"score":27,"last_activity_date":1467771731,"creation_date":1467744685,"answer_id":38210613,"question_id":38208692,"body_markdown":"It is possible to configure `ObjectMapper` to disable a JsonIgnore function. Following are some possible solution you can try with:\r\n\r\n **1.\r\nDisable JsonIgnore function for a particular annotated field.**\r\n\r\n You can create a custom JsonIgnore annotation and a custom `JacksonAnnotationIntrospector` to remove the annotation from mapper context. \r\nFollowing are the ideas:\r\n\r\nAnnotate `@MyJsonIgnore` to the fields that should be ignored while serialization:\r\n\r\n    @JsonAutoDetect(fieldVisibility = JsonAutoDetect.Visibility.ANY)\r\n    public class MyClass {\r\n    \r\n        @MyJsonIgnore\r\n        private SomeType myField;\r\n    \r\n    }\r\n\r\n`@MyJsonIgnore` is a simple custom annotation that wrap `@JsonIgnore`:\r\n\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @JacksonAnnotationsInside\r\n    @JsonIgnore\r\n    public @interface MyJsonIgnore {\r\n    }\r\n\r\nA custom `JacksonAnnotationIntrospector` is implemented to remove  `@MyJsonIgnore` from mapper context:\r\n\r\n    public class DisablingMyJsonIgnoreIntrospector extends JacksonAnnotationIntrospector {\r\n\r\n    @Override\r\n    public boolean isAnnotationBundle(final Annotation ann) {\r\n        if (ann.annotationType().equals(MyJsonIgnore.class)) {\r\n            return false;\r\n        } else {\r\n            return super.isAnnotationBundle(ann);\r\n        }\r\n    }\r\n    \r\nAfter that, you can set the introspector on a `ObjectMapper` during configuration:\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    mapper.setAnnotationIntrospector(new DisablingMyJsonIgnoreIntrospector());\r\n\r\nIt results that the fields annotated with `@MyJsonIgnore` can be marshaled properly.\r\n\r\n**2.\r\nDisable JsonIgnore function for the mapper**\r\n\r\nYour can create a custom `JacksonAnnotationIntrospector` and override `hasIgnoreMarker` method to always return `false`: \r\n\r\n    public static class DisablingJsonIgnoreIntrospector extends JacksonAnnotationIntrospector {\r\n\r\n        @Override\r\n        public boolean hasIgnoreMarker(final AnnotatedMember m) {\r\n            return false;\r\n        }\r\n\r\n    }\r\n\r\n`hasIgnoreMarker` is to check whether there is annotation to ignore json property. Return `false` will disable the JsonIngore function.\r\n\r\n**3.\r\nDisable all annotations and specify what kinds of properties are auto-detected for a given `ObjectMapper`:**\r\n\r\n    final ObjectMapper mapper = new ObjectMapper();\r\n    mapper.disable(MapperFeature.USE_ANNOTATIONS);\r\n    mapper.setVisibility(PropertyAccessor.FIELD, JsonAutoDetect.Visibility.ANY);\r\n\r\nThis simply disable all annotations.\r\n\r\nHope this can help.","title":"Serialize @JsonIgnore-d field","body":"<p>It is possible to configure <code>ObjectMapper</code> to disable a JsonIgnore function. Following are some possible solution you can try with:</p>\n\n<p><strong>1.\nDisable JsonIgnore function for a particular annotated field.</strong></p>\n\n<p>You can create a custom JsonIgnore annotation and a custom <code>JacksonAnnotationIntrospector</code> to remove the annotation from mapper context. \nFollowing are the ideas:</p>\n\n<p>Annotate <code>@MyJsonIgnore</code> to the fields that should be ignored while serialization:</p>\n\n<pre><code>@JsonAutoDetect(fieldVisibility = JsonAutoDetect.Visibility.ANY)\npublic class MyClass {\n\n    @MyJsonIgnore\n    private SomeType myField;\n\n}\n</code></pre>\n\n<p><code>@MyJsonIgnore</code> is a simple custom annotation that wrap <code>@JsonIgnore</code>:</p>\n\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@JacksonAnnotationsInside\n@JsonIgnore\npublic @interface MyJsonIgnore {\n}\n</code></pre>\n\n<p>A custom <code>JacksonAnnotationIntrospector</code> is implemented to remove  <code>@MyJsonIgnore</code> from mapper context:</p>\n\n<pre><code>public class DisablingMyJsonIgnoreIntrospector extends JacksonAnnotationIntrospector {\n\n@Override\npublic boolean isAnnotationBundle(final Annotation ann) {\n    if (ann.annotationType().equals(MyJsonIgnore.class)) {\n        return false;\n    } else {\n        return super.isAnnotationBundle(ann);\n    }\n}\n</code></pre>\n\n<p>After that, you can set the introspector on a <code>ObjectMapper</code> during configuration:</p>\n\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nmapper.setAnnotationIntrospector(new DisablingMyJsonIgnoreIntrospector());\n</code></pre>\n\n<p>It results that the fields annotated with <code>@MyJsonIgnore</code> can be marshaled properly.</p>\n\n<p><strong>2.\nDisable JsonIgnore function for the mapper</strong></p>\n\n<p>Your can create a custom <code>JacksonAnnotationIntrospector</code> and override <code>hasIgnoreMarker</code> method to always return <code>false</code>: </p>\n\n<pre><code>public static class DisablingJsonIgnoreIntrospector extends JacksonAnnotationIntrospector {\n\n    @Override\n    public boolean hasIgnoreMarker(final AnnotatedMember m) {\n        return false;\n    }\n\n}\n</code></pre>\n\n<p><code>hasIgnoreMarker</code> is to check whether there is annotation to ignore json property. Return <code>false</code> will disable the JsonIngore function.</p>\n\n<p><strong>3.\nDisable all annotations and specify what kinds of properties are auto-detected for a given <code>ObjectMapper</code>:</strong></p>\n\n<pre><code>final ObjectMapper mapper = new ObjectMapper();\nmapper.disable(MapperFeature.USE_ANNOTATIONS);\nmapper.setVisibility(PropertyAccessor.FIELD, JsonAutoDetect.Visibility.ANY);\n</code></pre>\n\n<p>This simply disable all annotations.</p>\n\n<p>Hope this can help.</p>\n"},{"tags":[],"owner":{"account_id":17725449,"reputation":51,"user_id":12869305,"display_name":"Alex A"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671238546,"creation_date":1671238546,"answer_id":74831084,"question_id":38208692,"body_markdown":"One more option is to use the [AnnotationIntrospector.nopInstance()][1] if you want to avoid all Jackson&#39;s annotations in your pojo including @JsonIgnore e.g.  \r\n\r\n    JsonMapper.builder().annotationIntrospector(AnnotationIntrospector.nopInstance()).build()...\r\nor\r\n\r\n    new ObjectMapper().setAnnotationIntrospector(AnnotationIntrospector.nopInstance())...\r\n\r\n  [1]: https://fasterxml.github.io/jackson-databind/javadoc/2.6/com/fasterxml/jackson/databind/AnnotationIntrospector.html#nopInstance--","title":"Serialize @JsonIgnore-d field","body":"<p>One more option is to use the <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.6/com/fasterxml/jackson/databind/AnnotationIntrospector.html#nopInstance--\" rel=\"nofollow noreferrer\">AnnotationIntrospector.nopInstance()</a> if you want to avoid all Jackson's annotations in your pojo including @JsonIgnore e.g.</p>\n<pre><code>JsonMapper.builder().annotationIntrospector(AnnotationIntrospector.nopInstance()).build()...\n</code></pre>\n<p>or</p>\n<pre><code>new ObjectMapper().setAnnotationIntrospector(AnnotationIntrospector.nopInstance())...\n</code></pre>\n"}],"owner":{"account_id":5796625,"reputation":4590,"user_id":4800355,"accept_rate":67,"display_name":"Radek Postołowicz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3555,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":38210613,"answer_count":2,"score":14,"last_activity_date":1671238546,"creation_date":1467737349,"question_id":38208692,"body_markdown":"I have class with `@JsonIgnore-d` field:\r\n\r\n    public class MyClass {\r\n        ...\r\n        @JsonIgnore\r\n        private SomeType myfield;\r\n        ...\r\n        // getters &amp; setters\r\n    }\r\n\r\n\r\nIs it possible to configure `ObjectWriter` so that it includes `myfield` during serialization even though being ingored?\r\nRationale: MyClass is serialized in many places and only in single specific one I want to have `myfield`.","title":"Serialize @JsonIgnore-d field","body":"<p>I have class with <code>@JsonIgnore-d</code> field:</p>\n\n<pre><code>public class MyClass {\n    ...\n    @JsonIgnore\n    private SomeType myfield;\n    ...\n    // getters &amp; setters\n}\n</code></pre>\n\n<p>Is it possible to configure <code>ObjectWriter</code> so that it includes <code>myfield</code> during serialization even though being ingored?\nRationale: MyClass is serialized in many places and only in single specific one I want to have <code>myfield</code>.</p>\n"},{"tags":["java","arrays","multidimensional-array","artificial-intelligence","djl"],"answers":[{"tags":[],"owner":{"account_id":18054922,"reputation":281,"user_id":13123639,"display_name":"Frank Liu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671237413,"creation_date":1671237413,"answer_id":74831030,"question_id":74318946,"body_markdown":"The exception you got is because you are using TensorFlow engine.\r\nThe TensorFlow engine doesn&#39;t support modification of NDArray after creation.\r\n\r\nYou can choose PyTorch engine. Your code should just work. You only need to replace your tensorflow dependency with pytorch in your project. If you have multiple engines in your classpath, you can explicitly select PyTorch:\r\n\r\n```\r\nvar manager = NDManager.newBaseManager(Device.cpu(), &quot;PyTorch&quot;);\r\n\r\n```","title":"Deep Java Library - NDArray set method does not allow modification of existing array","body":"<p>The exception you got is because you are using TensorFlow engine.\nThe TensorFlow engine doesn't support modification of NDArray after creation.</p>\n<p>You can choose PyTorch engine. Your code should just work. You only need to replace your tensorflow dependency with pytorch in your project. If you have multiple engines in your classpath, you can explicitly select PyTorch:</p>\n<pre><code>var manager = NDManager.newBaseManager(Device.cpu(), &quot;PyTorch&quot;);\n\n</code></pre>\n"}],"owner":{"account_id":13666182,"reputation":934,"user_id":9860033,"display_name":"waykiki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74831030,"answer_count":1,"score":0,"last_activity_date":1671237413,"creation_date":1667573679,"question_id":74318946,"body_markdown":"I&#39;ve started using the [Deep Java Library](https://djl.ai/) together with its underlying array manipulation package: [ndarray](https://javadoc.io/doc/ai.djl/api/latest/ai/djl/ndarray/package-summary.html).\r\n\r\nThe question is very simple. I want to modify the `i`-th element of an existing NDArray, however I cannot do that. How can I set the `i`-th element to a specific value?\r\n\r\n\r\nThe documentation mentions many `set` [methods](https://javadoc.io/doc/ai.djl/api/0.2.0/ai/djl/ndarray/NDArray.html#set-ai.djl.ndarray.index.NDIndex-ai.djl.ndarray.NDArray-).\r\n\r\n\r\nHere&#39;s a minimum reproducible example of what I&#39;ve tried:\r\n\r\n\r\n```\r\nvar manager = NDManager.newBaseManager();\r\n\r\nvar y = manager.create(new float[] {1, 2, 3, 4, 5});\r\nSystem.out.println(&quot;y before modification: &quot; + y);\r\n\r\ny.set(new float[] {1, 100, 3, 4, 5});\r\nSystem.out.println(&quot;y after setting the entire array: &quot; + y);\r\n\r\n// the following throws: &quot;java.lang.UnsupportedOperationException: Tensor cannot be modified after creation&quot;\r\ny.set(new NDIndex(&quot;1&quot;), 1000f);\r\nSystem.out.println(&quot;y after setting the 1st element to 1000: &quot; + y);\r\n```\r\n\r\nThis the error thrown:\r\n\r\n`java.lang.UnsupportedOperationException: Tensor cannot be modified after creation`\r\n","title":"Deep Java Library - NDArray set method does not allow modification of existing array","body":"<p>I've started using the <a href=\"https://djl.ai/\" rel=\"nofollow noreferrer\">Deep Java Library</a> together with its underlying array manipulation package: <a href=\"https://javadoc.io/doc/ai.djl/api/latest/ai/djl/ndarray/package-summary.html\" rel=\"nofollow noreferrer\">ndarray</a>.</p>\n<p>The question is very simple. I want to modify the <code>i</code>-th element of an existing NDArray, however I cannot do that. How can I set the <code>i</code>-th element to a specific value?</p>\n<p>The documentation mentions many <code>set</code> <a href=\"https://javadoc.io/doc/ai.djl/api/0.2.0/ai/djl/ndarray/NDArray.html#set-ai.djl.ndarray.index.NDIndex-ai.djl.ndarray.NDArray-\" rel=\"nofollow noreferrer\">methods</a>.</p>\n<p>Here's a minimum reproducible example of what I've tried:</p>\n<pre><code>var manager = NDManager.newBaseManager();\n\nvar y = manager.create(new float[] {1, 2, 3, 4, 5});\nSystem.out.println(&quot;y before modification: &quot; + y);\n\ny.set(new float[] {1, 100, 3, 4, 5});\nSystem.out.println(&quot;y after setting the entire array: &quot; + y);\n\n// the following throws: &quot;java.lang.UnsupportedOperationException: Tensor cannot be modified after creation&quot;\ny.set(new NDIndex(&quot;1&quot;), 1000f);\nSystem.out.println(&quot;y after setting the 1st element to 1000: &quot; + y);\n</code></pre>\n<p>This the error thrown:</p>\n<p><code>java.lang.UnsupportedOperationException: Tensor cannot be modified after creation</code></p>\n"},{"tags":["python","java","queryselector"],"owner":{"account_id":22395209,"reputation":1,"user_id":16606574,"display_name":"Niels Tooth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671236345,"creation_date":1671236345,"question_id":74830951,"body_markdown":"I am new in using querySelector and I am stuck with a piece of html including a #document part. As you can see in the [image](https://i.stack.imgur.com/CqXfd.png), I got up to the iframe part by using a long string of querySelectors. Now I would need to proceed into the #document part, but I have no idea how to access it. \r\n\r\nI would need the next part of the code so I can access the next html part:\r\n....querySelector(&#39;iframe&#39;).querySelector(&#39;?#document?&#39;)?.querySelector(...)","title":"Using Queryselector to retrieve data from #document","body":"<p>I am new in using querySelector and I am stuck with a piece of html including a #document part. As you can see in the <a href=\"https://i.stack.imgur.com/CqXfd.png\" rel=\"nofollow noreferrer\">image</a>, I got up to the iframe part by using a long string of querySelectors. Now I would need to proceed into the #document part, but I have no idea how to access it.</p>\n<p>I would need the next part of the code so I can access the next html part:\n....querySelector('iframe').querySelector('?#document?')?.querySelector(...)</p>\n"},{"tags":["java","spring","hibernate","jpa"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1671386327,"post_id":74830057,"comment_id":132083645,"body_markdown":"Save is a Spring base operation and is likely causing you issues as I believe it will query or check first to see if your entity exists, and then call persist on it if it doesn&#39;t. Persist is an &#39;insert&#39; operation, and cascading persist to your existing entities. You want to use entityManager.merge on your entity, so that the merge will cascade to the &#39;detached&#39; references instead.","body":"Save is a Spring base operation and is likely causing you issues as I believe it will query or check first to see if your entity exists, and then call persist on it if it doesn&#39;t. Persist is an &#39;insert&#39; operation, and cascading persist to your existing entities. You want to use entityManager.merge on your entity, so that the merge will cascade to the &#39;detached&#39; references instead."}],"owner":{"account_id":5712147,"reputation":1,"user_id":4513753,"display_name":"Oscar Juarez"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671236085,"creation_date":1671227200,"question_id":74830057,"body_markdown":"I have an Entity with children, with a ManyToMany relationship, and read that it&#39;s better to not set a CascadeType, and I&#39;m working on a way to save &quot;Versions&quot; of that entity, so the user can add or remove children and then save a new version of that.\r\n\r\nWhat I do is create a new object with the same values, and just add a different revision number, but if the user adds more children I get an error: object references an unsaved transient instance - save the transient instance before flushing\r\n\r\n\r\n\r\n\r\nso I tried with every other CascadeType\r\n\r\n```\r\n`@ManyToMany(cascade = {\r\n\t        CascadeType.PERSIST, \r\n\t        CascadeType.MERGE,\r\n\t        CascadeType.DETACH,\r\n\t        CascadeType.REFRESH,\r\n\t    }`\r\n```\r\n\r\nbut with this im getting.\r\n\r\nCaused by: org.hibernate.PersistentObjectException: detached entity passed to persist: com.atms.dao.domain.ExternalToolEntity}\r\n\r\nSo my guess is that with a set of children with both assigned and unassigned Ids JPA does not know what strategy to follow, is there a way to achieve this? or this should be done in two parts, one for copying and one for updating.\r\n\r\n","title":"Is there a way to persist an entity with a set of childrens, if those childres are both persisted, and unpersisted (With ids and without ids)","body":"<p>I have an Entity with children, with a ManyToMany relationship, and read that it's better to not set a CascadeType, and I'm working on a way to save &quot;Versions&quot; of that entity, so the user can add or remove children and then save a new version of that.</p>\n<p>What I do is create a new object with the same values, and just add a different revision number, but if the user adds more children I get an error: object references an unsaved transient instance - save the transient instance before flushing</p>\n<p>so I tried with every other CascadeType</p>\n<pre><code>`@ManyToMany(cascade = {\n            CascadeType.PERSIST, \n            CascadeType.MERGE,\n            CascadeType.DETACH,\n            CascadeType.REFRESH,\n        }`\n</code></pre>\n<p>but with this im getting.</p>\n<p>Caused by: org.hibernate.PersistentObjectException: detached entity passed to persist: com.atms.dao.domain.ExternalToolEntity}</p>\n<p>So my guess is that with a set of children with both assigned and unassigned Ids JPA does not know what strategy to follow, is there a way to achieve this? or this should be done in two parts, one for copying and one for updating.</p>\n"},{"tags":["java","data-structures"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1671210228,"post_id":74827589,"comment_id":132057485,"body_markdown":"Two maps? A canonical representation that can return all associated objects? A map  from aliases to terms (or vice-versa)? What makes the most sense depends on context.","body":"Two maps? A canonical representation that can return all associated objects? A map  from aliases to terms (or vice-versa)? What makes the most sense depends on context."}],"answers":[{"tags":[],"owner":{"account_id":5714353,"reputation":48,"user_id":6038296,"display_name":"Marc Lacharite Laframboise"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1671219780,"creation_date":1671211955,"answer_id":74827910,"question_id":74827589,"body_markdown":"Have you looked at BidiMap from Apache Collections?\r\nhttps://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/BidiMap.html\r\n\r\nWorks like a map but you can retrieve entries with either the key or value.\r\n\r\n            BidiMap&lt;String, String&gt; biDirectionalMap = new DualHashBidiMap&lt;&gt;(\r\n            Map.ofEntries(\r\n                Map.entry(&quot;cat&quot;, &quot;katze&quot;),\r\n                Map.entry(&quot;dog&quot;, &quot;hund&quot;)\r\n            )\r\n        );\r\n        \r\n        String cat = biDirectionalMap.getKey(&quot;katze&quot;);\r\n        String katze = biDirectionalMap.get(&quot;cat&quot;);\r\n\r\n\r\nOr if you need to have access to everything once you retrieve your object, keep your enum but store the values in maps to find them in O(1) (you basically trade space for time)\r\n\r\n    enum Foo\r\n    {\r\n        Cat(&quot;katze&quot;),\r\n        Dog(&quot;hund&quot;);\r\n        \r\n        private final String translation;\r\n        \r\n        private static final Map&lt;String, Foo&gt; valuesByName = Arrays.stream(values())\r\n            .collect(Collectors.toMap(Foo::name, Function.identity()));\r\n\r\n        private static final Map&lt;String, Foo&gt; valuesByTranslation = Arrays.stream(values())\r\n            .collect(Collectors.toMap(Foo::getTranslation, Function.identity()));\r\n                \r\n        public static Foo fromName(String name)\r\n        {\r\n            return valuesByName.get(name);\r\n        }\r\n\r\n        public static Foo fromTranslation(String translation)\r\n        {\r\n            return valuesByTranslation.get(translation);\r\n        }\r\n\r\n        Foo(String translation)\r\n        {\r\n            this.translation = translation;\r\n        }\r\n\r\n        // Getter... etc        \r\n    }","title":"data structure for bidirectional mapping","body":"<p>Have you looked at BidiMap from Apache Collections?\n<a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/BidiMap.html\" rel=\"nofollow noreferrer\">https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/BidiMap.html</a></p>\n<p>Works like a map but you can retrieve entries with either the key or value.</p>\n<pre><code>        BidiMap&lt;String, String&gt; biDirectionalMap = new DualHashBidiMap&lt;&gt;(\n        Map.ofEntries(\n            Map.entry(&quot;cat&quot;, &quot;katze&quot;),\n            Map.entry(&quot;dog&quot;, &quot;hund&quot;)\n        )\n    );\n    \n    String cat = biDirectionalMap.getKey(&quot;katze&quot;);\n    String katze = biDirectionalMap.get(&quot;cat&quot;);\n</code></pre>\n<p>Or if you need to have access to everything once you retrieve your object, keep your enum but store the values in maps to find them in O(1) (you basically trade space for time)</p>\n<pre><code>enum Foo\n{\n    Cat(&quot;katze&quot;),\n    Dog(&quot;hund&quot;);\n    \n    private final String translation;\n    \n    private static final Map&lt;String, Foo&gt; valuesByName = Arrays.stream(values())\n        .collect(Collectors.toMap(Foo::name, Function.identity()));\n\n    private static final Map&lt;String, Foo&gt; valuesByTranslation = Arrays.stream(values())\n        .collect(Collectors.toMap(Foo::getTranslation, Function.identity()));\n            \n    public static Foo fromName(String name)\n    {\n        return valuesByName.get(name);\n    }\n\n    public static Foo fromTranslation(String translation)\n    {\n        return valuesByTranslation.get(translation);\n    }\n\n    Foo(String translation)\n    {\n        this.translation = translation;\n    }\n\n    // Getter... etc        \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671235295,"creation_date":1671212785,"answer_id":74828056,"question_id":74827589,"body_markdown":"&gt; datastructure for bidirectional mapping\r\n\r\nA *Data structure* that would probably fulfill your needs is a [*Bidirectional map*][biderectionalMap]. But there&#39;s **no** standard *implementation* in the JDK.\r\n\r\nSeveral libraries like Guava ([`BiMap`][guavaBiMap]) and Apache Commons ([`BidiMap`][apacheBidiMap]) offers their Bidirectional map implementations.\r\n\r\nInstead of introducing dependency, you can create your own implementation which would encapsulate a pair of `HashMap`s (*as @Dave Newton has suggested in the comments*).\r\n\r\n    public class BiMap&lt;K, V&gt; {\r\n        private Map&lt;K, V&gt; valueByKey = new HashMap&lt;&gt;();\r\n        private Map&lt;V, K&gt; keyByValue = new HashMap&lt;&gt;();\r\n        \r\n        public void put(K key, V value) {\r\n            valueByKey.put(key, value);\r\n            keyByValue.put(value, key);\r\n        }\r\n    \r\n        public V getValue(K key) {\r\n            return valueByKey.get(key);\r\n        }\r\n    \r\n        public K getKey(V value) {\r\n            return keyByValue.get(value);\r\n        }\r\n    \r\n        public void removeByKey(K key) {\r\n            V toRemove = valueByKey.remove(key);\r\n            keyByValue.remove(toRemove);\r\n        }\r\n    \r\n        public void removeByValue(V value) {\r\n            K toRemove = keyByValue.remove(value);\r\n            valueByKey.remove(toRemove);\r\n        }\r\n    \r\n        public void removeIfMatch(K key, V value) { // removes entries only if the given association key/value is correct\r\n            valueByKey.remove(key, value);\r\n            keyByValue.remove(value, key);\r\n        }\r\n    }\r\n\r\nIf you have in mind to associate instances of `enum` through a Binary map then you can make use of the `EnumMap`, which is a special purpose implementation of the `Map` interface which is faster the than the `HashMap` since it&#39;s free from collisions.\r\n\r\nHere&#39;s how it might be implemented:\r\n\r\n    public class BiEnumMap&lt;K extends Enum&lt;K&gt;, V extends Enum&lt;V&gt;&gt; {\r\n        private Map&lt;K, V&gt; valueByKey;\r\n        private Map&lt;V, K&gt; keyByValue;\r\n    \r\n        private BiEnumMap(Map&lt;K, V&gt; valueByKey, Map&lt;V, K&gt; keyByValue) {\r\n            this.valueByKey = valueByKey;\r\n            this.keyByValue = keyByValue;\r\n        }\r\n    \r\n        public static &lt;K extends Enum&lt;K&gt;, V extends Enum&lt;V&gt;&gt; BiEnumMap&lt;K, V&gt;\r\n        getEmpty(Class&lt;K&gt; kClass, Class&lt;V&gt; vClass) {\r\n        \r\n            return new BiEnumMap&lt;&gt;(new EnumMap&lt;&gt;(kClass), new EnumMap&lt;&gt;(vClass));\r\n        }\r\n        \r\n        public static &lt;K extends Enum&lt;K&gt;, V extends Enum&lt;V&gt;&gt; BiEnumMap&lt;K, V&gt;\r\n        associateAll(Class&lt;K&gt; kClass, Class&lt;V&gt; vClass) {\r\n            \r\n            List&lt;K&gt; enumA = new ArrayList&lt;&gt;(EnumSet.allOf(kClass)); // note EnumSet is ordered\r\n            List&lt;V&gt; enumB = new ArrayList&lt;&gt;(EnumSet.allOf(vClass));\r\n            \r\n            if (enumA.size() != enumB.size()) throw new IllegalStateException();\r\n    \r\n            Map&lt;K, V&gt; valueByKey = generateEnumMap(enumA, enumB, kClass, vClass);\r\n            Map&lt;V, K&gt; keyByValue = generateEnumMap(enumB, enumA, vClass, kClass);\r\n            \r\n            return new BiEnumMap&lt;&gt;(valueByKey, keyByValue);\r\n        }\r\n        \r\n        private static &lt;K extends Enum&lt;K&gt;, V extends Enum&lt;V&gt;&gt; Map&lt;K, V&gt;\r\n        generateEnumMap(List&lt;K&gt; enumA, List&lt;V&gt; enumB, Class&lt;K&gt; kClass, Class&lt;V&gt; vClass) {\r\n            \r\n            return enumA.stream()\r\n                .collect(Collectors.toMap(\r\n                    Function.identity(),\r\n                    e -&gt; enumB.get(e.ordinal()),\r\n                    (left, right) -&gt; { throw new AssertionError(&quot;all keys are expected to be unique&quot;); },\r\n                    () -&gt; new EnumMap&lt;&gt;(kClass)\r\n                ));\r\n        }\r\n    \r\n        // add required behavior delegating to these wrapped maps\r\n    }\r\n\r\n*Usage example*\r\n\r\nConsider the following `enum`s:\r\n\r\n    public enum Foo {\r\n        CAT, DOG;\r\n    }\r\n    \r\n    public enum Bar {\r\n        KATZE, HUND;\r\n    }\r\n\r\n`main()`\r\n\r\n    public static void main(String[] args) {\r\n        BiEnumMap&lt;Foo, Bar&gt; map = BiEnumMap.associateAll(Foo.class, Bar.class);\r\n        System.out.println(map.getKey(Bar.KATZE));\r\n        System.out.println(map.getValue(Foo.CAT));\r\n    }\r\n\r\n*Output:*\r\n\r\n```\r\nCAT\r\nKATZE\r\n```\r\n\r\n\r\n\r\n   [biderectionalMap]: https://en.wikipedia.org/wiki/Bidirectional_map\r\n\r\n   [guavaBiMap]: https://guava.dev/releases/31.0-jre/api/docs/com/google/common/collect/BiMap.html\r\n\r\n   [apacheBidiMap]: https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/BidiMap.html","title":"data structure for bidirectional mapping","body":"<blockquote>\n<p>datastructure for bidirectional mapping</p>\n</blockquote>\n<p>A <em>Data structure</em> that would probably fulfill your needs is a <a href=\"https://en.wikipedia.org/wiki/Bidirectional_map\" rel=\"nofollow noreferrer\"><em>Bidirectional map</em></a>. But there's <strong>no</strong> standard <em>implementation</em> in the JDK.</p>\n<p>Several libraries like Guava (<a href=\"https://guava.dev/releases/31.0-jre/api/docs/com/google/common/collect/BiMap.html\" rel=\"nofollow noreferrer\"><code>BiMap</code></a>) and Apache Commons (<a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/BidiMap.html\" rel=\"nofollow noreferrer\"><code>BidiMap</code></a>) offers their Bidirectional map implementations.</p>\n<p>Instead of introducing dependency, you can create your own implementation which would encapsulate a pair of <code>HashMap</code>s (<em>as @Dave Newton has suggested in the comments</em>).</p>\n<pre><code>public class BiMap&lt;K, V&gt; {\n    private Map&lt;K, V&gt; valueByKey = new HashMap&lt;&gt;();\n    private Map&lt;V, K&gt; keyByValue = new HashMap&lt;&gt;();\n    \n    public void put(K key, V value) {\n        valueByKey.put(key, value);\n        keyByValue.put(value, key);\n    }\n\n    public V getValue(K key) {\n        return valueByKey.get(key);\n    }\n\n    public K getKey(V value) {\n        return keyByValue.get(value);\n    }\n\n    public void removeByKey(K key) {\n        V toRemove = valueByKey.remove(key);\n        keyByValue.remove(toRemove);\n    }\n\n    public void removeByValue(V value) {\n        K toRemove = keyByValue.remove(value);\n        valueByKey.remove(toRemove);\n    }\n\n    public void removeIfMatch(K key, V value) { // removes entries only if the given association key/value is correct\n        valueByKey.remove(key, value);\n        keyByValue.remove(value, key);\n    }\n}\n</code></pre>\n<p>If you have in mind to associate instances of <code>enum</code> through a Binary map then you can make use of the <code>EnumMap</code>, which is a special purpose implementation of the <code>Map</code> interface which is faster the than the <code>HashMap</code> since it's free from collisions.</p>\n<p>Here's how it might be implemented:</p>\n<pre><code>public class BiEnumMap&lt;K extends Enum&lt;K&gt;, V extends Enum&lt;V&gt;&gt; {\n    private Map&lt;K, V&gt; valueByKey;\n    private Map&lt;V, K&gt; keyByValue;\n\n    private BiEnumMap(Map&lt;K, V&gt; valueByKey, Map&lt;V, K&gt; keyByValue) {\n        this.valueByKey = valueByKey;\n        this.keyByValue = keyByValue;\n    }\n\n    public static &lt;K extends Enum&lt;K&gt;, V extends Enum&lt;V&gt;&gt; BiEnumMap&lt;K, V&gt;\n    getEmpty(Class&lt;K&gt; kClass, Class&lt;V&gt; vClass) {\n    \n        return new BiEnumMap&lt;&gt;(new EnumMap&lt;&gt;(kClass), new EnumMap&lt;&gt;(vClass));\n    }\n    \n    public static &lt;K extends Enum&lt;K&gt;, V extends Enum&lt;V&gt;&gt; BiEnumMap&lt;K, V&gt;\n    associateAll(Class&lt;K&gt; kClass, Class&lt;V&gt; vClass) {\n        \n        List&lt;K&gt; enumA = new ArrayList&lt;&gt;(EnumSet.allOf(kClass)); // note EnumSet is ordered\n        List&lt;V&gt; enumB = new ArrayList&lt;&gt;(EnumSet.allOf(vClass));\n        \n        if (enumA.size() != enumB.size()) throw new IllegalStateException();\n\n        Map&lt;K, V&gt; valueByKey = generateEnumMap(enumA, enumB, kClass, vClass);\n        Map&lt;V, K&gt; keyByValue = generateEnumMap(enumB, enumA, vClass, kClass);\n        \n        return new BiEnumMap&lt;&gt;(valueByKey, keyByValue);\n    }\n    \n    private static &lt;K extends Enum&lt;K&gt;, V extends Enum&lt;V&gt;&gt; Map&lt;K, V&gt;\n    generateEnumMap(List&lt;K&gt; enumA, List&lt;V&gt; enumB, Class&lt;K&gt; kClass, Class&lt;V&gt; vClass) {\n        \n        return enumA.stream()\n            .collect(Collectors.toMap(\n                Function.identity(),\n                e -&gt; enumB.get(e.ordinal()),\n                (left, right) -&gt; { throw new AssertionError(&quot;all keys are expected to be unique&quot;); },\n                () -&gt; new EnumMap&lt;&gt;(kClass)\n            ));\n    }\n\n    // add required behavior delegating to these wrapped maps\n}\n</code></pre>\n<p><em>Usage example</em></p>\n<p>Consider the following <code>enum</code>s:</p>\n<pre><code>public enum Foo {\n    CAT, DOG;\n}\n\npublic enum Bar {\n    KATZE, HUND;\n}\n</code></pre>\n<p><code>main()</code></p>\n<pre><code>public static void main(String[] args) {\n    BiEnumMap&lt;Foo, Bar&gt; map = BiEnumMap.associateAll(Foo.class, Bar.class);\n    System.out.println(map.getKey(Bar.KATZE));\n    System.out.println(map.getValue(Foo.CAT));\n}\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>CAT\nKATZE\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5627511,"reputation":112,"user_id":4455461,"accept_rate":25,"display_name":"midnight"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671229970,"creation_date":1671229970,"answer_id":74830383,"question_id":74827589,"body_markdown":"we have vars.io \r\n\r\nmaybe I will go like that: \r\n```\r\nprivate static final Map&lt;String, String&gt; RIGHT = HashMap.of(&quot;cat&quot;, &quot;Katze&quot;, &quot;dog&quot;, &quot;Hund&quot;); \r\nprivate static final Map&lt;String, String&gt; LEFT = RIGHT.map((k, v) -&gt; Tuple(v, k)); \r\n```","title":"data structure for bidirectional mapping","body":"<p>we have vars.io</p>\n<p>maybe I will go like that:</p>\n<pre><code>private static final Map&lt;String, String&gt; RIGHT = HashMap.of(&quot;cat&quot;, &quot;Katze&quot;, &quot;dog&quot;, &quot;Hund&quot;); \nprivate static final Map&lt;String, String&gt; LEFT = RIGHT.map((k, v) -&gt; Tuple(v, k)); \n</code></pre>\n"}],"owner":{"account_id":5627511,"reputation":112,"user_id":4455461,"accept_rate":25,"display_name":"midnight"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":400,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1671235295,"creation_date":1671210064,"question_id":74827589,"body_markdown":"What is the best java 9+ datastructure for bidirectional mapping?\r\nI am not asking for databases, caches etc., but some simple java object\r\n\r\n```\r\ncat &lt;-&gt; katze\r\ndog &lt;-&gt; hund\r\n```\r\n\r\nI want to get [cat, katze]\r\nfindByTerm1(&quot;cat&quot;)  and  findByTerm2(&quot;katze&quot;)\r\n\r\nMy first attempt with enum did not work well. \r\n\r\n```\r\npublic enum Foo{\r\nCat(&quot;katze&quot;)\r\n} \r\n```\r\n\r\nbecause I would need to iterate all Enum values to find by &quot;katze&quot;\r\n","title":"data structure for bidirectional mapping","body":"<p>What is the best java 9+ datastructure for bidirectional mapping?\nI am not asking for databases, caches etc., but some simple java object</p>\n<pre><code>cat &lt;-&gt; katze\ndog &lt;-&gt; hund\n</code></pre>\n<p>I want to get [cat, katze]\nfindByTerm1(&quot;cat&quot;)  and  findByTerm2(&quot;katze&quot;)</p>\n<p>My first attempt with enum did not work well.</p>\n<pre><code>public enum Foo{\nCat(&quot;katze&quot;)\n} \n</code></pre>\n<p>because I would need to iterate all Enum values to find by &quot;katze&quot;</p>\n"},{"tags":["java","string","boolean"],"comments":[{"owner":{"account_id":61302,"reputation":7370,"user_id":182768,"accept_rate":92,"display_name":"James Goodwin"},"score":3,"creation_date":1255018189,"post_id":1538755,"comment_id":1395030,"body_markdown":"What is the value of the String?","body":"What is the value of the String?"},{"owner":{"account_id":12404,"reputation":62016,"user_id":24396,"accept_rate":74,"display_name":"Steve Kuo"},"score":3,"creation_date":1255019900,"post_id":1538755,"comment_id":1395191,"body_markdown":"What&#39;s your expectation of how a string should be converted to a boolean?","body":"What&#39;s your expectation of how a string should be converted to a boolean?"},{"owner":{"display_name":"user2818054"},"score":1,"creation_date":1380173480,"post_id":1538755,"comment_id":28108493,"body_markdown":"myvartypeboolean = !!valuetoconvert","body":"myvartypeboolean = !!valuetoconvert"}],"answers":[{"tags":[],"owner":{"account_id":49175,"reputation":23807,"user_id":146347,"accept_rate":100,"display_name":"KLE"},"down_vote_count":1,"up_vote_count":588,"is_accepted":true,"score":587,"last_activity_date":1459919536,"creation_date":1255017756,"answer_id":1538767,"question_id":1538755,"body_markdown":"Try (depending on what result type you want):\r\n\r\n    Boolean boolean1 = Boolean.valueOf(&quot;true&quot;);\r\n    boolean boolean2 = Boolean.parseBoolean(&quot;true&quot;);\r\n \r\n\r\nAdvantage: \r\n\r\n* Boolean: this does not create new instances of Boolean, so performance is better (and less garbage-collection). It reuses the two instances of either `Boolean.TRUE` or `Boolean.FALSE`.\r\n* boolean: no instance is needed, you use the primitive type.\r\n\r\nThe official documentation is in the [Javadoc][1].\r\n\r\n\r\n----------------------------------\r\n\r\nUPDATED: \r\n\r\nAutoboxing could also be used, but it has a performance cost.  \r\nI suggest to use it only when you would have to cast yourself, not when the cast is avoidable.\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Boolean.html","title":"How to convert String object to Boolean Object?","body":"<p>Try (depending on what result type you want):</p>\n\n<pre><code>Boolean boolean1 = Boolean.valueOf(\"true\");\nboolean boolean2 = Boolean.parseBoolean(\"true\");\n</code></pre>\n\n<p>Advantage: </p>\n\n<ul>\n<li>Boolean: this does not create new instances of Boolean, so performance is better (and less garbage-collection). It reuses the two instances of either <code>Boolean.TRUE</code> or <code>Boolean.FALSE</code>.</li>\n<li>boolean: no instance is needed, you use the primitive type.</li>\n</ul>\n\n<p>The official documentation is in the <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Boolean.html\" rel=\"noreferrer\">Javadoc</a>.</p>\n\n<hr>\n\n<p>UPDATED: </p>\n\n<p>Autoboxing could also be used, but it has a performance cost.<br>\nI suggest to use it only when you would have to cast yourself, not when the cast is avoidable.</p>\n"},{"tags":[],"owner":{"account_id":7554,"reputation":1475,"user_id":13167,"accept_rate":40,"display_name":"CJS"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1359101894,"creation_date":1255018541,"answer_id":1538856,"question_id":1538755,"body_markdown":"    Boolean b = Boolean.valueOf(string);\r\n\r\nThe value of `b` is true if the string is not a null and equal to `true` (ignoring case).\r\n","title":"How to convert String object to Boolean Object?","body":"<pre><code>Boolean b = Boolean.valueOf(string);\n</code></pre>\n\n<p>The value of <code>b</code> is true if the string is not a null and equal to <code>true</code> (ignoring case).</p>\n"},{"tags":[],"owner":{"account_id":50411,"reputation":2173,"user_id":150373,"accept_rate":93,"display_name":"zlajo"},"down_vote_count":0,"up_vote_count":105,"is_accepted":false,"score":105,"last_activity_date":1255018650,"creation_date":1255018650,"answer_id":1538876,"question_id":1538755,"body_markdown":"You have to be carefull when using *Boolean.valueOf(string)* or *Boolean.parseBoolean(string)*. The reason for this is that the methods will always return false if the String is not equal to &quot;true&quot; (the case is ignored).\r\n\r\nFor example: \r\n\r\n    Boolean.valueOf(&quot;YES&quot;) -&gt; false\r\n\r\nBecause of that behaviour I would recommend to add some mechanism to ensure that the string which should be translated to a Boolean follows a specified format.\r\n\r\nFor instance:\r\n\r\n    if (string.equalsIgnoreCase(&quot;true&quot;) || string.equalsIgnoreCase(&quot;false&quot;)) {\r\n        Boolean.valueOf(string)\r\n        // do something   \r\n    } else {\r\n        // throw some exception\r\n    }","title":"How to convert String object to Boolean Object?","body":"<p>You have to be carefull when using <em>Boolean.valueOf(string)</em> or <em>Boolean.parseBoolean(string)</em>. The reason for this is that the methods will always return false if the String is not equal to \"true\" (the case is ignored).</p>\n\n<p>For example: </p>\n\n<pre><code>Boolean.valueOf(\"YES\") -&gt; false\n</code></pre>\n\n<p>Because of that behaviour I would recommend to add some mechanism to ensure that the string which should be translated to a Boolean follows a specified format.</p>\n\n<p>For instance:</p>\n\n<pre><code>if (string.equalsIgnoreCase(\"true\") || string.equalsIgnoreCase(\"false\")) {\n    Boolean.valueOf(string)\n    // do something   \n} else {\n    // throw some exception\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8537,"reputation":40691,"user_id":15459,"accept_rate":70,"display_name":"PhiLho"},"down_vote_count":3,"up_vote_count":23,"is_accepted":false,"score":20,"last_activity_date":1255019004,"creation_date":1255019004,"answer_id":1538920,"question_id":1538755,"body_markdown":"Beside the excellent answer of KLE, we can also make something more flexible:\r\n\r\n    boolean b = string.equalsIgnoreCase(&quot;true&quot;) || string.equalsIgnoreCase(&quot;t&quot;) || \r\n            string.equalsIgnoreCase(&quot;yes&quot;) || string.equalsIgnoreCase(&quot;y&quot;) || \r\n            string.equalsIgnoreCase(&quot;sure&quot;) || string.equalsIgnoreCase(&quot;aye&quot;) || \r\n            string.equalsIgnoreCase(&quot;oui&quot;) || string.equalsIgnoreCase(&quot;vrai&quot;);\r\n\r\n(inspired by zlajo&#39;s answer... :-))","title":"How to convert String object to Boolean Object?","body":"<p>Beside the excellent answer of KLE, we can also make something more flexible:</p>\n\n<pre><code>boolean b = string.equalsIgnoreCase(\"true\") || string.equalsIgnoreCase(\"t\") || \n        string.equalsIgnoreCase(\"yes\") || string.equalsIgnoreCase(\"y\") || \n        string.equalsIgnoreCase(\"sure\") || string.equalsIgnoreCase(\"aye\") || \n        string.equalsIgnoreCase(\"oui\") || string.equalsIgnoreCase(\"vrai\");\n</code></pre>\n\n<p>(inspired by zlajo's answer... :-))</p>\n"},{"tags":[],"owner":{"account_id":48455,"reputation":57218,"user_id":143972,"accept_rate":100,"display_name":"Zed"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1255019260,"creation_date":1255019260,"answer_id":1538947,"question_id":1538755,"body_markdown":"    boolean b = string.equalsIgnoreCase(&quot;true&quot;);","title":"How to convert String object to Boolean Object?","body":"<pre><code>boolean b = string.equalsIgnoreCase(\"true\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3374428,"reputation":9,"user_id":2832884,"display_name":"Vesco Pro"},"down_vote_count":6,"up_vote_count":3,"is_accepted":false,"score":-3,"last_activity_date":1436189791,"creation_date":1381276119,"answer_id":19260542,"question_id":1538755,"body_markdown":"Visit &lt;http://msdn.microsoft.com/en-us/library/system.boolean.parse.aspx&gt;\n\nThis will give you an idea of what to do.\n\nThis is what I get from the [Java documentation](https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html#parseBoolean-java.lang.String-):\n\n&gt; Method Detail\n&gt;\n&gt; **`parseBoolean`**\n&gt; \n&gt; `public static boolean parseBoolean(String s)`\n&gt; \n&gt; Parses the string argument as a boolean. The boolean returned represents the value true if the string argument is not `null` and is equal, ignoring case, to the string &quot;`true`&quot;.\n&gt; \n&gt; **Parameters:**\n&gt; \n&gt; `s` - the String containing the boolean representation to be parsed\n&gt;\n&gt; **Returns:** the boolean represented by the string argument\n&gt;\n&gt; **Since:**\n&gt; 1.5","title":"How to convert String object to Boolean Object?","body":"<p>Visit <a href=\"http://msdn.microsoft.com/en-us/library/system.boolean.parse.aspx\" rel=\"nofollow noreferrer\">http://msdn.microsoft.com/en-us/library/system.boolean.parse.aspx</a></p>\n<p>This will give you an idea of what to do.</p>\n<p>This is what I get from the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html#parseBoolean-java.lang.String-\" rel=\"nofollow noreferrer\">Java documentation</a>:</p>\n<blockquote>\n<p>Method Detail</p>\n<p><strong><code>parseBoolean</code></strong></p>\n<p><code>public static boolean parseBoolean(String s)</code></p>\n<p>Parses the string argument as a boolean. The boolean returned represents the value true if the string argument is not <code>null</code> and is equal, ignoring case, to the string &quot;<code>true</code>&quot;.</p>\n<p><strong>Parameters:</strong></p>\n<p><code>s</code> - the String containing the boolean representation to be parsed</p>\n<p><strong>Returns:</strong> the boolean represented by the string argument</p>\n<p><strong>Since:</strong>\n1.5</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":6581138,"reputation":11,"user_id":5085401,"display_name":"Tomislav Boras"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1436188593,"creation_date":1436188593,"answer_id":31246927,"question_id":1538755,"body_markdown":"This is how I did it:\r\n\r\n`&quot;1##true&quot;.contains( string )`\r\n \r\nFor my case is mostly either 1 or true. I use hashes as dividers. ","title":"How to convert String object to Boolean Object?","body":"<p>This is how I did it:</p>\n\n<p><code>\"1##true\".contains( string )</code></p>\n\n<p>For my case is mostly either 1 or true. I use hashes as dividers. </p>\n"},{"tags":[],"owner":{"account_id":4509757,"reputation":1106,"user_id":3666217,"accept_rate":50,"display_name":"Prateek Singh"},"down_vote_count":5,"up_vote_count":2,"is_accepted":false,"score":-3,"last_activity_date":1437386287,"creation_date":1437384208,"answer_id":31512893,"question_id":1538755,"body_markdown":"you can directly set boolean value equivalent to any string by System class\r\nand access it anywhere..\r\n\r\n    System.setProperty(&quot;n&quot;,&quot;false&quot;);\r\n    System.setProperty(&quot;y&quot;,&quot;true&quot;);\r\n\r\n\tSystem.setProperty(&quot;yes&quot;,&quot;true&quot;);     \r\n    System.setProperty(&quot;no&quot;,&quot;false&quot;);\r\n\r\n\tSystem.out.println(Boolean.getBoolean(&quot;n&quot;));   //false\r\n\tSystem.out.println(Boolean.getBoolean(&quot;y&quot;));   //true   \r\n     System.out.println(Boolean.getBoolean(&quot;no&quot;));  //false\r\n\tSystem.out.println(Boolean.getBoolean(&quot;yes&quot;));  //true\r\n","title":"How to convert String object to Boolean Object?","body":"<p>you can directly set boolean value equivalent to any string by System class\nand access it anywhere..</p>\n\n<pre><code>System.setProperty(\"n\",\"false\");\nSystem.setProperty(\"y\",\"true\");\n\nSystem.setProperty(\"yes\",\"true\");     \nSystem.setProperty(\"no\",\"false\");\n\nSystem.out.println(Boolean.getBoolean(\"n\"));   //false\nSystem.out.println(Boolean.getBoolean(\"y\"));   //true   \n System.out.println(Boolean.getBoolean(\"no\"));  //false\nSystem.out.println(Boolean.getBoolean(\"yes\"));  //true\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user5162630"},"down_vote_count":5,"up_vote_count":4,"is_accepted":false,"score":-1,"last_activity_date":1438038901,"creation_date":1438038901,"answer_id":31664891,"question_id":1538755,"body_markdown":"To get the boolean value of a String, try this:\r\n\r\n    public boolean toBoolean(String s) {\r\n        try {\r\n            return Boolean.parseBoolean(s); // Successfully converted String to boolean\r\n        } catch(Exception e) {\r\n            return null; // There was some error, so return null.\r\n        }\r\n    }\r\nIf there is an error, it will return null.\r\nExample:\r\n\r\n    toBoolean(&quot;true&quot;); // Returns true\r\n    toBoolean(&quot;tr.u;e&quot;); // Returns null","title":"How to convert String object to Boolean Object?","body":"<p>To get the boolean value of a String, try this:</p>\n\n<pre><code>public boolean toBoolean(String s) {\n    try {\n        return Boolean.parseBoolean(s); // Successfully converted String to boolean\n    } catch(Exception e) {\n        return null; // There was some error, so return null.\n    }\n}\n</code></pre>\n\n<p>If there is an error, it will return null.\nExample:</p>\n\n<pre><code>toBoolean(\"true\"); // Returns true\ntoBoolean(\"tr.u;e\"); // Returns null\n</code></pre>\n"},{"tags":[],"owner":{"account_id":183762,"reputation":17679,"user_id":419348,"accept_rate":93,"display_name":"AechoLiu"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1449714813,"creation_date":1449714813,"answer_id":34192746,"question_id":1538755,"body_markdown":"    public static boolean stringToBool(String s) {\r\n            s = s.toLowerCase();\r\n            Set&lt;String&gt; trueSet = new HashSet&lt;String&gt;(Arrays.asList(&quot;1&quot;, &quot;true&quot;, &quot;yes&quot;));\r\n            Set&lt;String&gt; falseSet = new HashSet&lt;String&gt;(Arrays.asList(&quot;0&quot;, &quot;false&quot;, &quot;no&quot;));\r\n    \r\n            if (trueSet.contains(s))\r\n                return true;\r\n            if (falseSet.contains(s))\r\n                return false;\r\n    \r\n            throw new IllegalArgumentException(s + &quot; is not a boolean.&quot;);\r\n        }\r\n\r\nMy way to convert string to boolean.","title":"How to convert String object to Boolean Object?","body":"<pre><code>public static boolean stringToBool(String s) {\n        s = s.toLowerCase();\n        Set&lt;String&gt; trueSet = new HashSet&lt;String&gt;(Arrays.asList(\"1\", \"true\", \"yes\"));\n        Set&lt;String&gt; falseSet = new HashSet&lt;String&gt;(Arrays.asList(\"0\", \"false\", \"no\"));\n\n        if (trueSet.contains(s))\n            return true;\n        if (falseSet.contains(s))\n            return false;\n\n        throw new IllegalArgumentException(s + \" is not a boolean.\");\n    }\n</code></pre>\n\n<p>My way to convert string to boolean.</p>\n"},{"tags":[],"owner":{"account_id":2782893,"reputation":823,"user_id":2395041,"display_name":"Dhana"},"down_vote_count":2,"up_vote_count":9,"is_accepted":false,"score":7,"last_activity_date":1604015242,"creation_date":1454627469,"answer_id":35213470,"question_id":1538755,"body_markdown":"Use the [Apache Commons library `BooleanUtils` class](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/BooleanUtils.html#toBoolean-java.lang.String-):\r\n\r\n    String[] values= new String[]{&quot;y&quot;,&quot;Y&quot;,&quot;n&quot;,&quot;N&quot;,&quot;Yes&quot;,&quot;YES&quot;,&quot;yes&quot;,&quot;no&quot;,&quot;No&quot;,&quot;NO&quot;,&quot;true&quot;,&quot;false&quot;,&quot;True&quot;,&quot;False&quot;,&quot;TRUE&quot;,&quot;FALSE&quot;,null};\r\n    for(String booleanStr : values){\r\n        System.out.println(&quot;Str =&quot;+ booleanStr +&quot;: boolean =&quot; +BooleanUtils.toBoolean(booleanStr));\r\n    }\r\n\r\n\r\n**Result:**\r\n\r\n    Str =N: boolean =false\r\n    Str =Yes: boolean =true\r\n    Str =YES: boolean =true\r\n    Str =yes: boolean =true\r\n    Str =no: boolean =false\r\n    Str =No: boolean =false\r\n    Str =NO: boolean =false\r\n    Str =true: boolean =true\r\n    Str =false: boolean =false\r\n    Str =True: boolean =true\r\n    Str =False: boolean =false\r\n    Str =TRUE: boolean =true\r\n    Str =FALSE: boolean =false\r\n    Str =null: boolean =false","title":"How to convert String object to Boolean Object?","body":"<p>Use the <a href=\"https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/BooleanUtils.html#toBoolean-java.lang.String-\" rel=\"nofollow noreferrer\">Apache Commons library <code>BooleanUtils</code> class</a>:</p>\n<pre><code>String[] values= new String[]{&quot;y&quot;,&quot;Y&quot;,&quot;n&quot;,&quot;N&quot;,&quot;Yes&quot;,&quot;YES&quot;,&quot;yes&quot;,&quot;no&quot;,&quot;No&quot;,&quot;NO&quot;,&quot;true&quot;,&quot;false&quot;,&quot;True&quot;,&quot;False&quot;,&quot;TRUE&quot;,&quot;FALSE&quot;,null};\nfor(String booleanStr : values){\n    System.out.println(&quot;Str =&quot;+ booleanStr +&quot;: boolean =&quot; +BooleanUtils.toBoolean(booleanStr));\n}\n</code></pre>\n<p><strong>Result:</strong></p>\n<pre><code>Str =N: boolean =false\nStr =Yes: boolean =true\nStr =YES: boolean =true\nStr =yes: boolean =true\nStr =no: boolean =false\nStr =No: boolean =false\nStr =NO: boolean =false\nStr =true: boolean =true\nStr =false: boolean =false\nStr =True: boolean =true\nStr =False: boolean =false\nStr =TRUE: boolean =true\nStr =FALSE: boolean =false\nStr =null: boolean =false\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1477177,"reputation":765,"user_id":1387306,"accept_rate":75,"display_name":"Chrstpsln"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1467538004,"creation_date":1467538004,"answer_id":38168563,"question_id":1538755,"body_markdown":"Why not use a regular expression ?\r\n\r\n    public static boolean toBoolean( String target )\r\n    {\r\n        if( target == null ) return false;\r\n        return target.matches( &quot;(?i:^(1|true|yes|oui|vrai|y)$)&quot; );\r\n    }\r\n","title":"How to convert String object to Boolean Object?","body":"<p>Why not use a regular expression ?</p>\n\n<pre><code>public static boolean toBoolean( String target )\n{\n    if( target == null ) return false;\n    return target.matches( \"(?i:^(1|true|yes|oui|vrai|y)$)\" );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2673457,"reputation":956,"user_id":2310331,"accept_rate":67,"display_name":"david30xie"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1516716088,"creation_date":1516716088,"answer_id":48403577,"question_id":1538755,"body_markdown":"Well, as now in Jan, 2018, the best way for this is to use apache&#39;s `BooleanUtils.toBoolean`.\r\n\r\nThis will convert any boolean like string to boolean, e.g. Y, yes, true, N, no, false, etc.\r\n\r\nReally handy!","title":"How to convert String object to Boolean Object?","body":"<p>Well, as now in Jan, 2018, the best way for this is to use apache's <code>BooleanUtils.toBoolean</code>.</p>\n\n<p>This will convert any boolean like string to boolean, e.g. Y, yes, true, N, no, false, etc.</p>\n\n<p>Really handy!</p>\n"},{"tags":[],"owner":{"account_id":368939,"reputation":22613,"user_id":716027,"accept_rate":56,"display_name":"fedor.belov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1566074816,"creation_date":1566074816,"answer_id":57539828,"question_id":1538755,"body_markdown":"We created [soyuz-to](https://github.com/thedocs-io/soyuz-to) library to simplify this problem (convert X to Y). It&#39;s just a set of SO answers for similar questions. This might be strange to use the library for such a simple problem, but it really helps in a lot of similar cases.\r\n\r\n```\r\nimport io.thedocs.soyuz.to;\r\n\r\nBoolean aBoolean = to.Boolean(&quot;true&quot;);\r\n```\r\n\r\nPlease check it - it&#39;s very simple and has a lot of other useful features","title":"How to convert String object to Boolean Object?","body":"<p>We created <a href=\"https://github.com/thedocs-io/soyuz-to\" rel=\"nofollow noreferrer\">soyuz-to</a> library to simplify this problem (convert X to Y). It's just a set of SO answers for similar questions. This might be strange to use the library for such a simple problem, but it really helps in a lot of similar cases.</p>\n\n<pre><code>import io.thedocs.soyuz.to;\n\nBoolean aBoolean = to.Boolean(\"true\");\n</code></pre>\n\n<p>Please check it - it's very simple and has a lot of other useful features</p>\n"},{"tags":[],"owner":{"account_id":15220095,"reputation":113,"user_id":10982231,"display_name":"Abdul Hadee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652354709,"creation_date":1652339082,"answer_id":72211350,"question_id":1538755,"body_markdown":"    boolean status=false;\r\n    if (variable.equalsIgnoreCase(&quot;true&quot;)) {\r\n       status=true;  \r\n       }\r\n\r\nThis is supported only if the string is &#39;true&#39; (not case-sensitive). Later you can play with the status variable. ","title":"How to convert String object to Boolean Object?","body":"<pre><code>boolean status=false;\nif (variable.equalsIgnoreCase(&quot;true&quot;)) {\n   status=true;  \n   }\n</code></pre>\n<p>This is supported only if the string is 'true' (not case-sensitive). Later you can play with the status variable.</p>\n"},{"tags":[],"owner":{"account_id":6141290,"reputation":21,"user_id":4788639,"display_name":"Daniel Gospodinow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671234470,"creation_date":1671234470,"answer_id":74830813,"question_id":1538755,"body_markdown":"If you&#39;re aiming to just compare this string variable to a &quot;false&quot; or &quot;true&quot; string without hardcoding those two values, as was my case exactly, and you don&#39;t want to use `Boolean.valueOf()` since *it will return true for anything it sees as &quot;true&quot; and will return false for everything else*, as [Brandon pointed out][1], you can do the following.\r\n\r\n    if (someStringVariable.equals(Boolean.TRUE.toString())) {\r\n    ...\r\n    }\r\n\r\nor similarly,\r\n\r\n    if (someStringVariable.equals(Boolean.FALSE.toString())) {\r\n    ...\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/questions/1538755/how-to-convert-string-object-to-boolean-object#comment5207898_1538767","title":"How to convert String object to Boolean Object?","body":"<p>If you're aiming to just compare this string variable to a &quot;false&quot; or &quot;true&quot; string without hardcoding those two values, as was my case exactly, and you don't want to use <code>Boolean.valueOf()</code> since <em>it will return true for anything it sees as &quot;true&quot; and will return false for everything else</em>, as <a href=\"https://stackoverflow.com/questions/1538755/how-to-convert-string-object-to-boolean-object#comment5207898_1538767\">Brandon pointed out</a>, you can do the following.</p>\n<pre><code>if (someStringVariable.equals(Boolean.TRUE.toString())) {\n...\n}\n</code></pre>\n<p>or similarly,</p>\n<pre><code>if (someStringVariable.equals(Boolean.FALSE.toString())) {\n...\n}\n</code></pre>\n"}],"owner":{"account_id":34133,"reputation":38945,"user_id":96180,"accept_rate":58,"display_name":"Suresh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":660506,"favorite_count":0,"down_vote_count":2,"up_vote_count":369,"accepted_answer_id":1538767,"answer_count":16,"score":367,"last_activity_date":1671234470,"creation_date":1255017657,"question_id":1538755,"body_markdown":"How to convert `String` object to `Boolean` object?","title":"How to convert String object to Boolean Object?","body":"<p>How to convert <code>String</code> object to <code>Boolean</code> object?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1083854,"reputation":13775,"user_id":1080064,"accept_rate":43,"display_name":"tkausl"},"score":5,"creation_date":1671171091,"post_id":74820762,"comment_id":132045770,"body_markdown":"`I created a variable just for the sake of getting rid of this` You don&#39;t need to create a variable. You can just read without storing the result.","body":"<code>I created a variable just for the sake of getting rid of this</code> You don&#39;t need to create a variable. You can just read without storing the result."}],"owner":{"account_id":25589575,"reputation":21,"user_id":19366635,"display_name":"Thay"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1671235656,"answer_count":0,"score":1,"last_activity_date":1671234449,"creation_date":1671170951,"question_id":74820762,"body_markdown":"So, the code works just fine but I want to know if there&#39;s a way to read a string from terminal without reading the &quot;enter&quot;, I first read a int, totalWords, let&#39;s say 2, then I want to read 2 Strings, so I put it in a Loop, but the first String to be read is always &quot;&quot;. In C I usually would just use getchar().\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class WayTooManyWords {\r\n    public static void main(String[] args){\r\n        Scanner readVar = new Scanner(System.in);\r\n        String[] words;\r\n        String trash;\r\n        int totalWords = readVar.nextInt();   \r\n        trash = readVar.nextLine();     \r\n        words = new String[totalWords];\r\n        for (int i = 0; i &lt; totalWords; i++) {\r\n            words[i] = readVar.nextLine();\r\n        }\r\n        \r\n        for (int i = 0; i &lt; totalWords; i++) {\r\n            if(words[i].length() &gt; 10){\r\n            System.out.print(words[i].charAt(0));\r\n            System.out.print(words[i].length() - 2);\r\n            System.out.print(words[i].charAt(words[i].length()-1));\r\n            System.out.println();\r\n            }\r\n            else{\r\n                System.out.println(words[i]);\r\n            }\r\n        }\r\n        //readVar.close();\r\n    }\r\n}\r\n```\r\n\r\nI created a variable just for the sake of getting rid of this but I&#39;m not sure if that&#39;s good, it worked though. I tried resetting readVar as well but that didn&#39;t work.","title":"Is there something like getchar() in java?","body":"<p>So, the code works just fine but I want to know if there's a way to read a string from terminal without reading the &quot;enter&quot;, I first read a int, totalWords, let's say 2, then I want to read 2 Strings, so I put it in a Loop, but the first String to be read is always &quot;&quot;. In C I usually would just use getchar().</p>\n<pre><code>import java.util.Scanner;\n\npublic class WayTooManyWords {\n    public static void main(String[] args){\n        Scanner readVar = new Scanner(System.in);\n        String[] words;\n        String trash;\n        int totalWords = readVar.nextInt();   \n        trash = readVar.nextLine();     \n        words = new String[totalWords];\n        for (int i = 0; i &lt; totalWords; i++) {\n            words[i] = readVar.nextLine();\n        }\n        \n        for (int i = 0; i &lt; totalWords; i++) {\n            if(words[i].length() &gt; 10){\n            System.out.print(words[i].charAt(0));\n            System.out.print(words[i].length() - 2);\n            System.out.print(words[i].charAt(words[i].length()-1));\n            System.out.println();\n            }\n            else{\n                System.out.println(words[i]);\n            }\n        }\n        //readVar.close();\n    }\n}\n</code></pre>\n<p>I created a variable just for the sake of getting rid of this but I'm not sure if that's good, it worked though. I tried resetting readVar as well but that didn't work.</p>\n"},{"tags":["java","guice"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1518145478,"post_id":48698033,"comment_id":84394975,"body_markdown":"Where&#39;s your arraylist? What are you trying to inject it into?","body":"Where&#39;s your arraylist? What are you trying to inject it into?"}],"answers":[{"tags":[],"owner":{"account_id":321052,"reputation":232,"user_id":639646,"display_name":"NOLFXceptMe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1518154705,"creation_date":1518154705,"answer_id":48699360,"question_id":48698033,"body_markdown":"Use `.toInstance()`\r\n\r\n    myList.addBinding().toInstance(&quot;Test1&quot;);\r\n    myList.addBinding().toInstance(&quot;Test2&quot;);`","title":"Injecting list of strings in Guice","body":"<p>Use <code>.toInstance()</code></p>\n\n<pre><code>myList.addBinding().toInstance(\"Test1\");\nmyList.addBinding().toInstance(\"Test2\");`\n</code></pre>\n"},{"tags":[],"owner":{"account_id":387508,"reputation":433,"user_id":745894,"display_name":"Jeff Vincent"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671233733,"creation_date":1671233310,"answer_id":74830724,"question_id":48698033,"body_markdown":"I realize this is an older post, but I&#39;ve been unsuccessful at finding a solution until today.  I&#39;ve wanted to inject a list of comma-delimited strings defined in a property file in a generic way without having to explicitly create @Named providers for every property that needed to be represented as a list of Strings.\r\n\r\nToday I found this post (https://stackoverflow.com/questions/69393266/injecting-a-list-of-strings-from-a-properties-file-using-guice).  The relevant part for me was this line in my configure method:\r\n\r\n     @Override \r\n     protected void configure() {\r\n        ...\r\n\r\n        binder().convertToTypes(Matchers.only(new TypeLiteral&lt;List&lt;String&gt;&gt;() {\r\n        }), (String value, TypeLiteral&lt;?&gt; toType) -&gt; Arrays.asList(value.split(&quot;,&quot;)));\r\n\r\n        ...\r\n     }\r\nI didn&#39;t use DefaultListDelimiterHandler as the original solution did, but instead just did a standard string split converted to a List&lt;String&gt;.  Now from a property file, I can have something like:\r\n\r\n    testList=one,two,three\r\nAnd I can inject it using:\r\n\r\n    @Inject\r\n    @Named(&quot;testList&quot;)\r\n    List&lt;String&gt; testList;\r\n\r\n","title":"Injecting list of strings in Guice","body":"<p>I realize this is an older post, but I've been unsuccessful at finding a solution until today.  I've wanted to inject a list of comma-delimited strings defined in a property file in a generic way without having to explicitly create @Named providers for every property that needed to be represented as a list of Strings.</p>\n<p>Today I found this post (<a href=\"https://stackoverflow.com/questions/69393266/injecting-a-list-of-strings-from-a-properties-file-using-guice\">Injecting a List of Strings From a Properties File Using Guice</a>).  The relevant part for me was this line in my configure method:</p>\n<pre><code> @Override \n protected void configure() {\n    ...\n\n    binder().convertToTypes(Matchers.only(new TypeLiteral&lt;List&lt;String&gt;&gt;() {\n    }), (String value, TypeLiteral&lt;?&gt; toType) -&gt; Arrays.asList(value.split(&quot;,&quot;)));\n\n    ...\n }\n</code></pre>\n<p>I didn't use DefaultListDelimiterHandler as the original solution did, but instead just did a standard string split converted to a List.  Now from a property file, I can have something like:</p>\n<pre><code>testList=one,two,three\n</code></pre>\n<p>And I can inject it using:</p>\n<pre><code>@Inject\n@Named(&quot;testList&quot;)\nList&lt;String&gt; testList;\n</code></pre>\n"}],"owner":{"account_id":2043101,"reputation":4295,"user_id":1823822,"accept_rate":29,"display_name":"Joy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":678,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":48699360,"answer_count":2,"score":0,"last_activity_date":1671233733,"creation_date":1518144684,"question_id":48698033,"body_markdown":"I am trying to inject one arraylist of Strings in Guice. For that I am trying to construct list as following in module, which I can inject later into any class:\r\n\r\n\r\n    Multibinder&lt;String&gt; myList =\r\n                Multibinder.newSetBinder(binder(), String.class);\r\n        \r\n        \r\n    myList.addBinding().to(&quot;Test1&quot;);\r\n    myList.addBinding().to(&quot;Test2&quot;);\r\n\r\nIn the above line I am getting following error:\r\n  \r\n    The method to(Class&lt;? extends String&gt;) in the type LinkedBindingBuilder&lt;String&gt; is not applicable for the arguments (String)\r\n\r\nIn this context, I have found this: https://stackoverflow.com/questions/30802384/guice-inject-an-arraylist-of-strings, but I think given solution does not fit my use case.\r\n","title":"Injecting list of strings in Guice","body":"<p>I am trying to inject one arraylist of Strings in Guice. For that I am trying to construct list as following in module, which I can inject later into any class:</p>\n\n<pre><code>Multibinder&lt;String&gt; myList =\n            Multibinder.newSetBinder(binder(), String.class);\n\n\nmyList.addBinding().to(\"Test1\");\nmyList.addBinding().to(\"Test2\");\n</code></pre>\n\n<p>In the above line I am getting following error:</p>\n\n<pre><code>The method to(Class&lt;? extends String&gt;) in the type LinkedBindingBuilder&lt;String&gt; is not applicable for the arguments (String)\n</code></pre>\n\n<p>In this context, I have found this: <a href=\"https://stackoverflow.com/questions/30802384/guice-inject-an-arraylist-of-strings\">Guice : Inject an ArrayList of Strings</a>, but I think given solution does not fit my use case.</p>\n"},{"tags":["java","postgresql","increment","auto-increment"],"comments":[{"owner":{"display_name":"user330315"},"score":0,"creation_date":1671200179,"post_id":74825660,"comment_id":132053980,"body_markdown":"https://blog.sql-workbench.eu/post/gapless-sequence/","body":"<a href=\"https://blog.sql-workbench.eu/post/gapless-sequence/\" rel=\"nofollow noreferrer\">blog.sql-workbench.eu/post/gapless-sequence</a>"},{"owner":{"account_id":8633322,"reputation":218343,"user_id":6464308,"display_name":"Laurenz Albe"},"score":0,"creation_date":1671200959,"post_id":74825660,"comment_id":132054278,"body_markdown":"You always have to serialize operations if you want a gap-less sequence.","body":"You always have to serialize operations if you want a gap-less sequence."}],"answers":[{"tags":[],"owner":{"account_id":10335627,"reputation":13845,"user_id":7623856,"display_name":"Belayer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671233022,"creation_date":1671233022,"answer_id":74830701,"question_id":74825660,"body_markdown":"You can have either scalability or a gap-less sequence **but not both**. However, you can get the appearance of both. Go ahead and generate orderNumber allowing gaps come as they may. Then create a view on your table that generates a new order number from the relative values. \r\n\r\n    create view  tickets_vw as \r\n       select id \r\n            , case_id\r\n            , row_number() over(partition by case_id order by order_number) order_number \r\n         from tickets;  \r\n\r\nSee [demo here][1]. I interpreted *range of one caseId* as meaning you wanted the sequence to restart for each Case_id. In addition to showing gap-less relative value the view implements restart as well. \r\n\r\nAlternative: As long as the id is always increasing (as demo would) you could use ID in the row_number() function and eliminate the oredeNumber from the table. I however tend to use a generated primary key for nothing but PK and referencing FK.     \r\n\r\n\r\n  [1]: https://dbfiddle.uk/WDGWYDca","title":"Conditional segmented auto increment in Postgres","body":"<p>You can have either scalability or a gap-less sequence <strong>but not both</strong>. However, you can get the appearance of both. Go ahead and generate orderNumber allowing gaps come as they may. Then create a view on your table that generates a new order number from the relative values.</p>\n<pre><code>create view  tickets_vw as \n   select id \n        , case_id\n        , row_number() over(partition by case_id order by order_number) order_number \n     from tickets;  \n</code></pre>\n<p>See <a href=\"https://dbfiddle.uk/WDGWYDca\" rel=\"nofollow noreferrer\">demo here</a>. I interpreted <em>range of one caseId</em> as meaning you wanted the sequence to restart for each Case_id. In addition to showing gap-less relative value the view implements restart as well.</p>\n<p>Alternative: As long as the id is always increasing (as demo would) you could use ID in the row_number() function and eliminate the oredeNumber from the table. I however tend to use a generated primary key for nothing but PK and referencing FK.</p>\n"}],"owner":{"account_id":12732750,"reputation":519,"user_id":9248765,"display_name":"Ludov Dmitrii"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":169,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671233022,"creation_date":1671200101,"question_id":74825660,"body_markdown":"```\r\nclass Ticket{\r\n\r\n    int id;\r\n    int caseId;\r\n    int orderNumber;\r\n\r\n}\r\n```\r\n Lets imagine I can&#39;t change data structure.\r\n The order is always have to be without jumps (1,2,4 not good) in range of one caseId, every\r\n caseId will have to start from 1.\r\n Currently, records is being written in synchronized method, this is not scalable solution\r\n and there is a performance is actual issue here.\r\n\r\n How can I use by Postgres DB to just throw\r\n the Ticket entities to it being certain that order number is always properly incremented on the db layer?\r\n","title":"Conditional segmented auto increment in Postgres","body":"<pre><code>class Ticket{\n\n    int id;\n    int caseId;\n    int orderNumber;\n\n}\n</code></pre>\n<p>Lets imagine I can't change data structure.\nThe order is always have to be without jumps (1,2,4 not good) in range of one caseId, every\ncaseId will have to start from 1.\nCurrently, records is being written in synchronized method, this is not scalable solution\nand there is a performance is actual issue here.</p>\n<p>How can I use by Postgres DB to just throw\nthe Ticket entities to it being certain that order number is always properly incremented on the db layer?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":5,"creation_date":1375380414,"post_id":18001371,"comment_id":26322638,"body_markdown":"Not in the standard JDK classes. But a collection should never be null. I&#39;d fix that instead.","body":"Not in the standard JDK classes. But a collection should never be null. I&#39;d fix that instead."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":2,"creation_date":1375380849,"post_id":18001371,"comment_id":26322898,"body_markdown":"Instead of using a `null` value you can use `Collections.emptyList()`","body":"Instead of using a <code>null</code> value you can use <code>Collections.emptyList()</code>"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1375380979,"post_id":18001371,"comment_id":26322985,"body_markdown":"@PeterLawrey: that should really be a proper answer. Avoiding corner cases like that makes code so much nicer to read.","body":"@PeterLawrey: that should really be a proper answer. Avoiding corner cases like that makes code so much nicer to read."}],"answers":[{"tags":[],"owner":{"account_id":1435980,"reputation":127999,"user_id":1357341,"accept_rate":100,"display_name":"arshajii"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1375380730,"creation_date":1375380413,"answer_id":18001402,"question_id":18001371,"body_markdown":"What about\r\n\r\n    int size = (list == null) ? 0 : list.size();\r\n\r\nI&#39;m not sure why you would want a utility for this, since the above seems simple enough.","title":"Utility to check null and return size as 0 if empty for a collection/list in java","body":"<p>What about</p>\n\n<pre><code>int size = (list == null) ? 0 : list.size();\n</code></pre>\n\n<p>I'm not sure why you would want a utility for this, since the above seems simple enough.</p>\n"},{"tags":[],"owner":{"account_id":25591,"reputation":61024,"user_id":65868,"accept_rate":68,"display_name":"TofuBeer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1375380859,"creation_date":1375380859,"answer_id":18001536,"question_id":18001371,"body_markdown":"Roll your own, put it in a method, preferably in a class.  Something like:\r\n\r\n\r\n    public class CollectionUtils\r\n    {\r\n        private CollectionUtils()\r\n        {\r\n        }\r\n    \r\n        public static getSize(final List&lt;?&gt; list)\r\n        {\r\n            // I try to make all my variables final, and I have a dislike of the ternary (?:)    \r\n            // operator...\r\n            final int size;\r\n    \r\n            if(list == null)\r\n            {\r\n                size = 0;\r\n            }\r\n            else\r\n            {\r\n                size = list.size();\r\n            }\r\n    \r\n            return (size);\r\n         }\r\n     }\r\n\r\nBy putting it in a method if you find a better way to do it later you can update the code only in one place.  If the language were to change in some way in the future as well, say some odd thing like `?list.size()` that returns 0 if it is null or the size if it is not null then you could simply delete the method and update all of the places that call it to be the new way of calling the method.","title":"Utility to check null and return size as 0 if empty for a collection/list in java","body":"<p>Roll your own, put it in a method, preferably in a class.  Something like:</p>\n\n<pre><code>public class CollectionUtils\n{\n    private CollectionUtils()\n    {\n    }\n\n    public static getSize(final List&lt;?&gt; list)\n    {\n        // I try to make all my variables final, and I have a dislike of the ternary (?:)    \n        // operator...\n        final int size;\n\n        if(list == null)\n        {\n            size = 0;\n        }\n        else\n        {\n            size = list.size();\n        }\n\n        return (size);\n     }\n }\n</code></pre>\n\n<p>By putting it in a method if you find a better way to do it later you can update the code only in one place.  If the language were to change in some way in the future as well, say some odd thing like <code>?list.size()</code> that returns 0 if it is null or the size if it is not null then you could simply delete the method and update all of the places that call it to be the new way of calling the method.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1375381117,"creation_date":1375381117,"answer_id":18001605,"question_id":18001371,"body_markdown":"Instead of using a null value you can use Collections.emptyList()\r\n\r\nThat way you have just\r\n\r\n    private List&lt;String&gt; list = Collections.&lt;String&gt;emptyList();\r\n\r\n    int size = list.size(); // list is never null, but could be an empty list.","title":"Utility to check null and return size as 0 if empty for a collection/list in java","body":"<p>Instead of using a null value you can use Collections.emptyList()</p>\n\n<p>That way you have just</p>\n\n<pre><code>private List&lt;String&gt; list = Collections.&lt;String&gt;emptyList();\n\nint size = list.size(); // list is never null, but could be an empty list.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":86926,"reputation":2892,"user_id":241379,"display_name":"Kenston Choi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1540812727,"creation_date":1540812727,"answer_id":53044637,"question_id":18001371,"body_markdown":"[org.apache.commons.collections4.CollectionUtils#size(Object object)][1] returns the following:\r\n\r\n&gt; the size of the specified collection or 0 if the object was null\r\n\r\nIt handles the following:\r\n\r\n&gt; - Collection - the collection size\r\n- Map - the map size\r\n- Array - the array size\r\n- Iterator - the number of elements remaining in the iterator\r\n- Enumeration - the number of elements remaining in the enumeration\r\n\r\nPersonally, I hope the parameter type is at least `Collection` instead of `Object` for added compile-time safety. As it can throw the ff. exception:\r\n\r\n&gt; IllegalArgumentException - thrown if object is not recognized\r\n\r\n  [1]: https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/CollectionUtils.html#size-java.lang.Object-","title":"Utility to check null and return size as 0 if empty for a collection/list in java","body":"<p><a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/CollectionUtils.html#size-java.lang.Object-\" rel=\"nofollow noreferrer\">org.apache.commons.collections4.CollectionUtils#size(Object object)</a> returns the following:</p>\n\n<blockquote>\n  <p>the size of the specified collection or 0 if the object was null</p>\n</blockquote>\n\n<p>It handles the following:</p>\n\n<blockquote>\n  <ul>\n  <li>Collection - the collection size</li>\n  <li>Map - the map size</li>\n  <li>Array - the array size</li>\n  <li>Iterator - the number of elements remaining in the iterator</li>\n  <li>Enumeration - the number of elements remaining in the enumeration</li>\n  </ul>\n</blockquote>\n\n<p>Personally, I hope the parameter type is at least <code>Collection</code> instead of <code>Object</code> for added compile-time safety. As it can throw the ff. exception:</p>\n\n<blockquote>\n  <p>IllegalArgumentException - thrown if object is not recognized</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":14062486,"reputation":11,"user_id":10158151,"display_name":"Sam Fu"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1600142710,"creation_date":1599638358,"answer_id":63807213,"question_id":18001371,"body_markdown":"with the help of Goole `guava`, you case use `CollectionUtils.size()` function \r\n\r\n```\r\nimport org.apache.commons.collections.CollectionUtils;\r\n\r\n\r\n// Test case:\r\n\r\n// 0\r\nint size = CollectionUtils.size(null);\r\n//2\r\nint size2 = CollectionUtils.size(Lists.newArrayList(2,3));\r\n ```","title":"Utility to check null and return size as 0 if empty for a collection/list in java","body":"<p>with the help of Goole <code>guava</code>, you case use <code>CollectionUtils.size()</code> function</p>\n<pre><code>import org.apache.commons.collections.CollectionUtils;\n\n\n// Test case:\n\n// 0\nint size = CollectionUtils.size(null);\n//2\nint size2 = CollectionUtils.size(Lists.newArrayList(2,3));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":135551,"reputation":10091,"user_id":338479,"accept_rate":80,"display_name":"Edward Falk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671232773,"creation_date":1671232773,"answer_id":74830676,"question_id":18001371,"body_markdown":"While the accepted answer is arguably the best answer, I find typing it all the time to be tedious. I wound up writing these two tiny utilities:\r\n\r\n    static int csize(Collection&lt;?&gt; c) { return c != null ? c.size() : 0; }\r\n    static int csize(Map&lt;?&gt; m) { return m != null ? m.size() : 0; }\r\n\r\nand now I use e.g.:\r\n\r\n    int size = csize(list);","title":"Utility to check null and return size as 0 if empty for a collection/list in java","body":"<p>While the accepted answer is arguably the best answer, I find typing it all the time to be tedious. I wound up writing these two tiny utilities:</p>\n<pre><code>static int csize(Collection&lt;?&gt; c) { return c != null ? c.size() : 0; }\nstatic int csize(Map&lt;?&gt; m) { return m != null ? m.size() : 0; }\n</code></pre>\n<p>and now I use e.g.:</p>\n<pre><code>int size = csize(list);\n</code></pre>\n"}],"owner":{"account_id":1723893,"reputation":1525,"user_id":2323036,"accept_rate":69,"display_name":"user2323036"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10427,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":18001402,"answer_count":6,"score":4,"last_activity_date":1671232773,"creation_date":1375380276,"question_id":18001371,"body_markdown":"I have list which can be null sometimes, the return type should be int  ex: \r\n\r\n    int size = 0; \r\n    if(list != null) {\r\n        size = list.size;\r\n    } \r\n\r\nCould you please let me know whether any utility is available?\r\n\r\nThanks.","title":"Utility to check null and return size as 0 if empty for a collection/list in java","body":"<p>I have list which can be null sometimes, the return type should be int  ex: </p>\n\n<pre><code>int size = 0; \nif(list != null) {\n    size = list.size;\n} \n</code></pre>\n\n<p>Could you please let me know whether any utility is available?</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","mqtt","gateway"],"owner":{"account_id":27277200,"reputation":1,"user_id":20797624,"display_name":"Elias Beck"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671232747,"creation_date":1671232602,"question_id":74830657,"body_markdown":"Trying to build mqtt-sn-gateway from https://github.com/simon622/mqtt-sn. Instructions: \r\n\r\n```\r\nmvn -f mqtt-sn-codec clean install\r\nmvn -f mqtt-sn-core clean install\r\nmvn -f mqtt-sn-gateway clean package\r\nmvn -f mqtt-sn-client clean install\r\n```\r\n\r\nBuild completes, but only loopback jar, e.g. mqtt-sn-gateway-loopback-0.1.15-alpha.jar. Want to build full functional gateway for MQTT-SN aggregation forwarding to MQTT broker. Tried a few of the prior releases, built gateway jar is loopback only. \r\n\r\n","title":"can&#39;t build non-loopback version of mqtt-sn-gateway","body":"<p>Trying to build mqtt-sn-gateway from <a href=\"https://github.com/simon622/mqtt-sn\" rel=\"nofollow noreferrer\">https://github.com/simon622/mqtt-sn</a>. Instructions:</p>\n<pre><code>mvn -f mqtt-sn-codec clean install\nmvn -f mqtt-sn-core clean install\nmvn -f mqtt-sn-gateway clean package\nmvn -f mqtt-sn-client clean install\n</code></pre>\n<p>Build completes, but only loopback jar, e.g. mqtt-sn-gateway-loopback-0.1.15-alpha.jar. Want to build full functional gateway for MQTT-SN aggregation forwarding to MQTT broker. Tried a few of the prior releases, built gateway jar is loopback only.</p>\n"},{"tags":["java","elasticsearch"],"comments":[{"owner":{"account_id":5028364,"reputation":31224,"user_id":4039431,"accept_rate":94,"display_name":"Amit"},"score":0,"creation_date":1671181515,"post_id":74822161,"comment_id":132048024,"body_markdown":"it says clearly, build-tools-internal&#39;. Java 17 is required to build Elasticsearch but current Java is version 11, hope you are checking your java version in the same folder","body":"it says clearly, build-tools-internal&#39;. Java 17 is required to build Elasticsearch but current Java is version 11, hope you are checking your java version in the same folder"},{"owner":{"account_id":12817794,"reputation":400,"user_id":9273860,"display_name":"The Mir"},"score":0,"creation_date":1671181723,"post_id":74822161,"comment_id":132048081,"body_markdown":"In which folder? I cloned the package then ran the CMD. As I mentioned, current java version on my machine is 19 and I also installed 17.","body":"In which folder? I cloned the package then ran the CMD. As I mentioned, current java version on my machine is 19 and I also installed 17."},{"owner":{"account_id":5028364,"reputation":31224,"user_id":4039431,"accept_rate":94,"display_name":"Amit"},"score":0,"creation_date":1671182543,"post_id":74822161,"comment_id":132048315,"body_markdown":"you need see java 17 in Elasticsearch folder","body":"you need see java 17 in Elasticsearch folder"},{"owner":{"account_id":12817794,"reputation":400,"user_id":9273860,"display_name":"The Mir"},"score":0,"creation_date":1671183275,"post_id":74822161,"comment_id":132048555,"body_markdown":"@Amit you sure?!!! I think It&#39;s not related to the Elasticsearch folder. I read the code:if (JavaVersion.current() &lt; JavaVersion.toVersion(minCompilerJava)) {\n  throw new GradleException(&quot;Java ${minCompilerJava} is required to build Elasticsearch but current Java is version ${JavaVersion.current()}.&quot;)\n}","body":"@Amit you sure?!!! I think It&#39;s not related to the Elasticsearch folder. I read the code:if (JavaVersion.current() &lt; JavaVersion.toVersion(minCompilerJava)) {   throw new GradleException(&quot;Java ${minCompilerJava} is required to build Elasticsearch but current Java is version ${JavaVersion.current()}.&quot;) }"},{"owner":{"account_id":8158152,"reputation":807,"user_id":6143004,"display_name":"Piyush  Chauhan"},"score":0,"creation_date":1671261092,"post_id":74822161,"comment_id":132065569,"body_markdown":"You can try to use the docker it automatically handles the dependencies and also memory management.","body":"You can try to use the docker it automatically handles the dependencies and also memory management."}],"answers":[{"tags":[],"owner":{"account_id":7723774,"reputation":16,"user_id":20797647,"display_name":"Bill Nash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671232234,"creation_date":1671232234,"answer_id":74830618,"question_id":74822161,"body_markdown":"You have another version of Java installed, that Elastic is locating when it starts, as indicated by the error message you&#39;re getting about version 11. This happens commonly when you&#39;ve been upgrading Java over time and have older versions still lurking about.","title":"Elasticsearch | Java version problem during installing Elasticsearch","body":"<p>You have another version of Java installed, that Elastic is locating when it starts, as indicated by the error message you're getting about version 11. This happens commonly when you've been upgrading Java over time and have older versions still lurking about.</p>\n"}],"owner":{"account_id":12817794,"reputation":400,"user_id":9273860,"display_name":"The Mir"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":202,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74830618,"answer_count":1,"score":0,"last_activity_date":1671232234,"creation_date":1671181000,"question_id":74822161,"body_markdown":"My machine runs Manjaro.\r\n\r\nI cloned **https://aur.archlinux.org/elasticsearch.git**\r\nthen ran: `makepkg -si`\r\n\r\nmy current Java version is: 19 according to: `java --version`:\r\n\r\n&gt; openjdk 19.0.1 2022-10-18 OpenJDK Runtime Environment (build\r\n&gt; 19.0.1+10) OpenJDK 64-Bit Server VM (build 19.0.1+10, mixed mode)\r\n\r\nWhile running makepkg -si I get the following error though: \r\n\r\n&gt; What went wrong: A problem occurred evaluating project &#39;:build-tools-internal&#39;.\r\n&gt; Java 17 is required to build Elasticsearch but current Java is version 11.\r\n\r\nI also installed java 17 by: \r\n\r\n    sudo pacman -S jre17-openjdk-headless jre17-openjdk jdk17-openjdk openjdk17-doc openjdk17-src\r\n\r\n\r\nStill getting the same error. Any idea?","title":"Elasticsearch | Java version problem during installing Elasticsearch","body":"<p>My machine runs Manjaro.</p>\n<p>I cloned <strong><a href=\"https://aur.archlinux.org/elasticsearch.git\" rel=\"nofollow noreferrer\">https://aur.archlinux.org/elasticsearch.git</a></strong>\nthen ran: <code>makepkg -si</code></p>\n<p>my current Java version is: 19 according to: <code>java --version</code>:</p>\n<blockquote>\n<p>openjdk 19.0.1 2022-10-18 OpenJDK Runtime Environment (build\n19.0.1+10) OpenJDK 64-Bit Server VM (build 19.0.1+10, mixed mode)</p>\n</blockquote>\n<p>While running makepkg -si I get the following error though:</p>\n<blockquote>\n<p>What went wrong: A problem occurred evaluating project ':build-tools-internal'.\nJava 17 is required to build Elasticsearch but current Java is version 11.</p>\n</blockquote>\n<p>I also installed java 17 by:</p>\n<pre><code>sudo pacman -S jre17-openjdk-headless jre17-openjdk jdk17-openjdk openjdk17-doc openjdk17-src\n</code></pre>\n<p>Still getting the same error. Any idea?</p>\n"},{"tags":["java","android","sharedpreferences"],"answers":[{"tags":[],"owner":{"account_id":5071927,"reputation":11287,"user_id":4070469,"accept_rate":79,"display_name":"Mauker"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1671232221,"creation_date":1439814902,"answer_id":32050571,"question_id":32050420,"body_markdown":"Thing is, on your `onCreate()` method you&#39;re **always** resetting the shared preferences here:\r\n\r\n    SharedPreferences pref = getSharedPreferences(&quot;SavedGame&quot;, MODE_PRIVATE); \r\n    SharedPreferences.Editor editor = pref.edit();      \r\n    editor.putInt(&quot;Lifes&quot;, 6);\r\n    editor.putInt(&quot;Hints&quot;, 6);          \r\n    editor.putInt(&quot;Level&quot;, 1);  \r\n    editor.commit();\r\n\r\nJust check if this file exists already before that line with an `if` statement. That should do the trick.\r\n\r\nSomething like:\r\n\r\n    if (pref.contains(&quot;Level&quot;)) {\r\n        // Do not reset\r\n    }\r\n    else {\r\n        // Create the prefs\r\n        SharedPreferences.Editor editor = pref.edit();      \r\n        editor.putInt(&quot;Lifes&quot;, 6);\r\n        editor.putInt(&quot;Hints&quot;, 6);          \r\n        editor.putInt(&quot;Level&quot;, 1);  \r\n        editor.commit();\r\n    }\r\n\r\nYou don&#39;t have to check for that exact field, it&#39;s just an example. Adjust it for your needs and game logic.\r\n\r\nTake a look at the `Activity` lifecycle to understand why this is happening.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n(diagram [source](http://web.archive.org/web/20140218132043/http://developer.android.com/training/basics/activity-lifecycle/starting.html))\r\n\r\nEverytime you open your app, the `onCreate()` method is called, so your prefs get reset before you read them.\r\n\r\nMore on the lifecycle [here][2].\r\n\r\n\r\n\r\n**EDIT:** The following snippet shows one way to solve your problem.\r\n\r\n    public static final String PREF_LIFES = &quot;Lifes&quot;;\r\n    public static final String PREF_HINTS = &quot;Hints&quot;;\r\n    public static final String PREF_LEVEL = &quot;Level&quot;;\r\n    public static final String PREF_IS_SET = &quot;isSet&quot;;\r\n    \r\n    \r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        this.requestWindowFeature(Window.FEATURE_NO_TITLE);\r\n        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,\r\n        WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n        setContentView(R.layout.menu);\r\n    \r\n        SharedPreferences pref = getSharedPreferences(&quot;SavedGame&quot;, MODE_PRIVATE); \r\n    \r\n        // Check wether the pref is set or not.\r\n        if (pref.getBoolean(PREF_IS_SET.false)) {\r\n            // The prefs is set. Do some game logic here. Like checking for lifes.\r\n            if (pref.getInt(PREF_LIFES,0) == 0) {\r\n                // Player is &quot;dead&quot;, reset it.\r\n                resetPrefs(pref); \r\n            }\r\n            else {\r\n                // Player is alive, do whatever you want, or do nothing at all.\r\n            }\r\n        }\r\n        else {\r\n            // if it&#39;s not set, just create it.\r\n            resetPrefs(pref);\r\n        }\r\n    \r\n        // ...   \r\n    }\r\n    \r\n    private void resetPrefs(SharedPreferences pref) {\r\n        SharedPreferences.Editor editor = pref.edit();      \r\n        editor.putInt(PREF_LIFES, 6);\r\n        editor.putInt(PREF_HINTS, 6);          \r\n        editor.putInt(PREF_LEVEL, 1);\r\n        editor.putBoolean(PREF_IS_SET,true);\r\n        editor.commit();\r\n    }\r\n\r\n**EDIT 2:** You can put this logic on your `onResume()` method as well, as long as you remove it from the `onCreate()`, otherwise you&#39;ll be checking those conditions twice ;)\r\n\r\n  [1]: http://i.stack.imgur.com/PCU1p.png\r\n  [2]: http://developer.android.com/training/basics/activity-lifecycle/index.html","title":"SharedPreferences not Save if the application is re-open","body":"<p>Thing is, on your <code>onCreate()</code> method you're <strong>always</strong> resetting the shared preferences here:</p>\n<pre><code>SharedPreferences pref = getSharedPreferences(&quot;SavedGame&quot;, MODE_PRIVATE); \nSharedPreferences.Editor editor = pref.edit();      \neditor.putInt(&quot;Lifes&quot;, 6);\neditor.putInt(&quot;Hints&quot;, 6);          \neditor.putInt(&quot;Level&quot;, 1);  \neditor.commit();\n</code></pre>\n<p>Just check if this file exists already before that line with an <code>if</code> statement. That should do the trick.</p>\n<p>Something like:</p>\n<pre><code>if (pref.contains(&quot;Level&quot;)) {\n    // Do not reset\n}\nelse {\n    // Create the prefs\n    SharedPreferences.Editor editor = pref.edit();      \n    editor.putInt(&quot;Lifes&quot;, 6);\n    editor.putInt(&quot;Hints&quot;, 6);          \n    editor.putInt(&quot;Level&quot;, 1);  \n    editor.commit();\n}\n</code></pre>\n<p>You don't have to check for that exact field, it's just an example. Adjust it for your needs and game logic.</p>\n<p>Take a look at the <code>Activity</code> lifecycle to understand why this is happening.</p>\n<p><a href=\"https://i.stack.imgur.com/PCU1p.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PCU1p.png\" alt=\"enter image description here\" /></a></p>\n<p>(diagram <a href=\"http://web.archive.org/web/20140218132043/http://developer.android.com/training/basics/activity-lifecycle/starting.html\" rel=\"nofollow noreferrer\">source</a>)</p>\n<p>Everytime you open your app, the <code>onCreate()</code> method is called, so your prefs get reset before you read them.</p>\n<p>More on the lifecycle <a href=\"http://developer.android.com/training/basics/activity-lifecycle/index.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p><strong>EDIT:</strong> The following snippet shows one way to solve your problem.</p>\n<pre><code>public static final String PREF_LIFES = &quot;Lifes&quot;;\npublic static final String PREF_HINTS = &quot;Hints&quot;;\npublic static final String PREF_LEVEL = &quot;Level&quot;;\npublic static final String PREF_IS_SET = &quot;isSet&quot;;\n\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    this.requestWindowFeature(Window.FEATURE_NO_TITLE);\n    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,\n    WindowManager.LayoutParams.FLAG_FULLSCREEN);\n    setContentView(R.layout.menu);\n\n    SharedPreferences pref = getSharedPreferences(&quot;SavedGame&quot;, MODE_PRIVATE); \n\n    // Check wether the pref is set or not.\n    if (pref.getBoolean(PREF_IS_SET.false)) {\n        // The prefs is set. Do some game logic here. Like checking for lifes.\n        if (pref.getInt(PREF_LIFES,0) == 0) {\n            // Player is &quot;dead&quot;, reset it.\n            resetPrefs(pref); \n        }\n        else {\n            // Player is alive, do whatever you want, or do nothing at all.\n        }\n    }\n    else {\n        // if it's not set, just create it.\n        resetPrefs(pref);\n    }\n\n    // ...   \n}\n\nprivate void resetPrefs(SharedPreferences pref) {\n    SharedPreferences.Editor editor = pref.edit();      \n    editor.putInt(PREF_LIFES, 6);\n    editor.putInt(PREF_HINTS, 6);          \n    editor.putInt(PREF_LEVEL, 1);\n    editor.putBoolean(PREF_IS_SET,true);\n    editor.commit();\n}\n</code></pre>\n<p><strong>EDIT 2:</strong> You can put this logic on your <code>onResume()</code> method as well, as long as you remove it from the <code>onCreate()</code>, otherwise you'll be checking those conditions twice ;)</p>\n"},{"tags":[],"owner":{"account_id":2305114,"reputation":8699,"user_id":2024527,"accept_rate":80,"display_name":"SANAT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1439814908,"creation_date":1439814908,"answer_id":32050574,"question_id":32050420,"body_markdown":"This happens because when you start your app your menu.class reset or commit the shared preferences data by your code in menu.class file onCreate() like this : \r\n\r\n    SharedPreferences pref = getSharedPreferences(&quot;SavedGame&quot;, MODE_PRIVATE); \r\n    SharedPreferences.Editor editor = pref.edit();      \r\n    editor.putInt(&quot;Lifes&quot;, 6);\r\n    editor.putInt(&quot;Hints&quot;, 6);          \r\n    editor.putInt(&quot;Level&quot;, 1);  \r\n    editor.commit();\r\n\r\nYou need to check first if shared preferences already available with your shared preferences name, if no then initialise shared preferences code like this :\r\n\r\n    if() // Check your shared preferences already not available then initialise it\r\n    {\r\n         SharedPreferences pref = getSharedPreferences(&quot;SavedGame&quot;, MODE_PRIVATE); \r\n         SharedPreferences.Editor editor = pref.edit();      \r\n         editor.putInt(&quot;Lifes&quot;, 6);\r\n         editor.putInt(&quot;Hints&quot;, 6);          \r\n         editor.putInt(&quot;Level&quot;, 1);  \r\n         editor.commit();\r\n    }","title":"SharedPreferences not Save if the application is re-open","body":"<p>This happens because when you start your app your menu.class reset or commit the shared preferences data by your code in menu.class file onCreate() like this : </p>\n\n<pre><code>SharedPreferences pref = getSharedPreferences(\"SavedGame\", MODE_PRIVATE); \nSharedPreferences.Editor editor = pref.edit();      \neditor.putInt(\"Lifes\", 6);\neditor.putInt(\"Hints\", 6);          \neditor.putInt(\"Level\", 1);  \neditor.commit();\n</code></pre>\n\n<p>You need to check first if shared preferences already available with your shared preferences name, if no then initialise shared preferences code like this :</p>\n\n<pre><code>if() // Check your shared preferences already not available then initialise it\n{\n     SharedPreferences pref = getSharedPreferences(\"SavedGame\", MODE_PRIVATE); \n     SharedPreferences.Editor editor = pref.edit();      \n     editor.putInt(\"Lifes\", 6);\n     editor.putInt(\"Hints\", 6);          \n     editor.putInt(\"Level\", 1);  \n     editor.commit();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5215474,"reputation":1894,"user_id":4170584,"display_name":"sonic"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1439814908,"creation_date":1439814908,"answer_id":32050575,"question_id":32050420,"body_markdown":"You have the following lines in your `onCreate` method :\r\n\r\n    SharedPreferences pref = getSharedPreferences(&quot;SavedGame&quot;, MODE_PRIVATE); \r\n    SharedPreferences.Editor editor = pref.edit();      \r\n    editor.putInt(&quot;Lifes&quot;, 6);\r\n    editor.putInt(&quot;Hints&quot;, 6);          \r\n    editor.putInt(&quot;Level&quot;, 1);  \r\n    editor.commit();\r\n\r\nThe `onCreate` method is run every time needed by the actvity lifecycle. Especially when openning the app. So everytime your activity is created you set the preference level to one. This is the reason of your issue.","title":"SharedPreferences not Save if the application is re-open","body":"<p>You have the following lines in your <code>onCreate</code> method :</p>\n\n<pre><code>SharedPreferences pref = getSharedPreferences(\"SavedGame\", MODE_PRIVATE); \nSharedPreferences.Editor editor = pref.edit();      \neditor.putInt(\"Lifes\", 6);\neditor.putInt(\"Hints\", 6);          \neditor.putInt(\"Level\", 1);  \neditor.commit();\n</code></pre>\n\n<p>The <code>onCreate</code> method is run every time needed by the actvity lifecycle. Especially when openning the app. So everytime your activity is created you set the preference level to one. This is the reason of your issue.</p>\n"},{"tags":[],"owner":{"account_id":236188,"reputation":15922,"user_id":503508,"accept_rate":81,"display_name":"Knossos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1439814928,"creation_date":1439814928,"answer_id":32050581,"question_id":32050420,"body_markdown":"Everytime you create your Activity, you are reseting your saved `Preferences`:\r\n\r\n    SharedPreferences pref = getSharedPreferences(&quot;SavedGame&quot;, MODE_PRIVATE); \r\n    SharedPreferences.Editor editor = pref.edit();      \r\n    editor.putInt(&quot;Lifes&quot;, 6);\r\n    editor.putInt(&quot;Hints&quot;, 6);          \r\n    editor.putInt(&quot;Level&quot;, 1);  \r\n    editor.commit();\r\n\r\nYou should only save your `Preferences` when they are changed.","title":"SharedPreferences not Save if the application is re-open","body":"<p>Everytime you create your Activity, you are reseting your saved <code>Preferences</code>:</p>\n\n<pre><code>SharedPreferences pref = getSharedPreferences(\"SavedGame\", MODE_PRIVATE); \nSharedPreferences.Editor editor = pref.edit();      \neditor.putInt(\"Lifes\", 6);\neditor.putInt(\"Hints\", 6);          \neditor.putInt(\"Level\", 1);  \neditor.commit();\n</code></pre>\n\n<p>You should only save your <code>Preferences</code> when they are changed.</p>\n"},{"tags":[],"owner":{"account_id":4533024,"reputation":1112,"user_id":3682953,"display_name":"Vishwa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1439815161,"creation_date":1439815161,"answer_id":32050656,"question_id":32050420,"body_markdown":"i think you didn&#39;t check the existence values of shared Preferences in Menu.class.You just simply assign a default value without proper checking whether the sharedpreferences holds data or not.\r\nIn onCreate\r\n\r\ntry this one on OnCreate of Menu.class\r\n    \r\n    SharedPreferences.Editor editor = pref.edit();   \r\n    //check it with your default value.I used default value as 0   \r\n    int lifes=pref.getInt(&quot;Lifes&quot;, 0);\r\n    if(lifes==0)\r\n    editor.putInt(&quot;Lifes&quot;, 6);\r\n    //check it with your default value.I used default value as 0 \r\n     int hints=pref.getInt(&quot;Hints&quot;, 0);\r\n     if(hints==0\r\n     editor.putInt(&quot;Hints&quot;, 6);          \r\n     //check it with your default value.I used default value as 0\r\n      int level=pref.getInt(&quot;Level&quot;, 0);\r\n      if(level==0)\r\n      editor.putInt(&quot;Level&quot;, 1);  \r\n      editor.commit();","title":"SharedPreferences not Save if the application is re-open","body":"<p>i think you didn't check the existence values of shared Preferences in Menu.class.You just simply assign a default value without proper checking whether the sharedpreferences holds data or not.\nIn onCreate</p>\n\n<p>try this one on OnCreate of Menu.class</p>\n\n<pre><code>SharedPreferences.Editor editor = pref.edit();   \n//check it with your default value.I used default value as 0   \nint lifes=pref.getInt(\"Lifes\", 0);\nif(lifes==0)\neditor.putInt(\"Lifes\", 6);\n//check it with your default value.I used default value as 0 \n int hints=pref.getInt(\"Hints\", 0);\n if(hints==0\n editor.putInt(\"Hints\", 6);          \n //check it with your default value.I used default value as 0\n  int level=pref.getInt(\"Level\", 0);\n  if(level==0)\n  editor.putInt(\"Level\", 1);  \n  editor.commit();\n</code></pre>\n"}],"owner":{"account_id":6776456,"reputation":169,"user_id":5218083,"accept_rate":71,"display_name":"RichFounders"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1100,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":32050571,"answer_count":5,"score":3,"last_activity_date":1671232221,"creation_date":1439814444,"question_id":32050420,"body_markdown":"My sharedpreferences does not save if i re-open my game the data that i saved before with SharedPreferences are not load, setting on my current activity is back to normal again or default\r\n\r\nthis is the image of my button in `menu.class`\r\n\r\n[![enter image description here][1]][1]\r\n\r\nthis is the following code of my `menu.class`\r\n\r\n\r\n\t@Override\r\n\t    protected void onCreate(Bundle savedInstanceState) {\r\n\t\tsuper.onCreate(savedInstanceState);\r\n        this.requestWindowFeature(Window.FEATURE_NO_TITLE);\r\n        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,\r\n        WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n\t\tsetContentView(R.layout.menu);\r\n\t\tSharedPreferences pref = getSharedPreferences(&quot;SavedGame&quot;, MODE_PRIVATE); \r\n\t\tSharedPreferences.Editor editor = pref.edit();\t\t\r\n\t\teditor.putInt(&quot;Lifes&quot;, 6);\r\n\t\teditor.putInt(&quot;Hints&quot;, 6);        \t\r\n\t\teditor.putInt(&quot;Level&quot;, 1);\t\r\n\t\teditor.commit();\r\n\t\t\r\n\t\t f1=(Button)findViewById(R.id.f1);\r\n\t\t   \r\n\t\t f2=(Button)findViewById(R.id.f2);\r\n\t\t f2lock=(ImageView)findViewById(R.id.f2lock);\r\n\t\t   \r\n\t\t\t\t\t\t\t  \t\t\r\n\t   f1.setOnClickListener(new View.OnClickListener() {\r\n\t            @Override\r\n\t            public void onClick(View v){\r\n\t                // TODO Auto-generated method stub\r\n\t            \tIntent i =new Intent(menu.this, levelone.class);\r\n\t                startActivity(i);             \r\n\t            }             \r\n\t        }); \r\n\t\t  \r\n\t    f2.setOnClickListener(new View.OnClickListener() {\r\n\r\n\t   \t     @Override\r\n\t   \t     public void onClick(View v){\r\n\t  \t\t   // TODO Auto-generated method stub\r\n\t              Intent i =new Intent(menu.this, leveltwo.class);\r\n\t              startActivity(i);  \t  \t \r\n\t            }   \t   \t  \r\n\t      });\r\n\t    \r\n\t    f3=(Button)findViewById(R.id.f3);\r\n\t\tf3lock=(ImageView)findViewById(R.id.f3lock);\r\n\t    \r\n\t}\r\n\tpublic void onResume() {\r\n    super.onResume();\r\n    \r\n\t   SharedPreferences pref = getSharedPreferences(&quot;SavedGame&quot;, MODE_PRIVATE); \r\n\t   levelunlocked = pref.getInt(&quot;Level&quot;, 0); \r\n\r\n\t   if(levelunlocked == 2)\r\n\t\t\t\r\n\t\t{\r\n\t\t\tf2.setVisibility(View.VISIBLE);\r\n\t\t\tf2lock.setVisibility(View.GONE);\r\n\t\t}\r\n\t    if(levelunlocked == 3)\r\n\t\t\t\r\n\t\t{\r\n\t\t\tf3.setVisibility(View.VISIBLE);\r\n\t\t\tf3lock.setVisibility(View.GONE);\r\n\t\t}\t\r\n\t\r\n\t\t   SharedPreferences.Editor editor = pref.edit();\r\n\t\t   editor.putInt(&quot;Level&quot;, levelunlocked);\r\n\t\t   editor.commit();\r\n\t}\r\n\t@Override\r\n\tpublic boolean onCreateOptionsMenu(Menu menu) {\r\n\t\t// Inflate the menu; this adds items to the action bar if it is present.\r\n\t\tgetMenuInflater().inflate(R.menu.splashscreen, menu);\r\n\t\treturn true;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic boolean onOptionsItemSelected(MenuItem item) {\r\n\t\t// Handle action bar item clicks here. The action bar will\r\n\t\t// automatically handle clicks on the Home/Up button, so long\r\n\t\t// as you specify a parent activity in AndroidManifest.xml.\r\n\t\tint id = item.getItemId();\r\n\t\tif (id == R.id.action_settings) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn super.onOptionsItemSelected(item);\r\n\t}\r\n    }\r\n\r\nand i had this code in `levelone.class` to get the default value from `menu.class`\r\n\r\n    int gamelifes, gamehints, gamelevel, index=0; \r\n    \r\n    \r\n    SharedPreferences pref = getSharedPreferences(&quot;SavedGame&quot;, MODE_PRIVATE);\r\n    gamelifes = pref.getInt(&quot;Lifes&quot;, 0);\r\n    gamehints = pref.getInt(&quot;Hints&quot;, 0);\r\n    gamelevel = pref.getInt(&quot;Level&quot;, 0);\r\n    \r\n    //the value from sharedpreferences is use to be a text by use code below\r\n    \r\n    lifes1 =(TextView)findViewById(R.id.lifestext1);\r\n    lifes1.setTextColor(Color.RED);\r\n    lifes1.setText(String.valueOf(gamelifes));   \r\n    \r\n    hints1 =(TextView)findViewById(R.id.hintstext1);\r\n    hints1.setTextColor(Color.GRAY);\r\n    hints1.setText(String.valueOf(gamehints));\r\n\r\n \r\n\r\nand to save the sharedpreferences with new data\r\n\r\n    String answer=edittextanswer1.getText().toString();              \r\n                if(answer.equalsIgnoreCase(answer1[index]))\r\n                {\r\n                    gamelevel++;                \r\n                    image.setVisibility(View.GONE); \r\n                    finishbutton.setVisibility(View.VISIBLE);  \r\n                    SharedPreferences pref = getSharedPreferences(&quot;SavedGame&quot;, MODE_PRIVATE); \r\n                    SharedPreferences.Editor editor = pref.edit();      \r\n                    editor.putInt(&quot;Lifes&quot;, gamelifes);\r\n                    editor.putInt(&quot;Hints&quot;, gamehints);          \r\n                    editor.putInt(&quot;Level&quot;, gamelevel);  \r\n                    editor.commit();\r\n                else\r\n                {    \r\n                tryagain1.setVisibility(View.VISIBLE);\r\n                gamelifes--;\r\n                lifes1.setText(String.valueOf(gamelifes));\r\n                }\r\n\r\nthen if finish button is clicked it will be like this\r\n\r\n    finishbutton.setOnClickListener(new View.OnClickListener() {\r\n\r\n          public void onClick(View v){\r\n              finish();\r\n          }\r\n       }); \r\n\r\nso `levelone.class` are finish and back to `menu.class`\r\n\r\n[![enter image description here][2]][2]\r\n\r\nand SharedPreferences code its worked properly, every button in `my menu.class` work with the code and be visible!\r\n\r\nbut if i exit the application, its back to normal again\r\n\r\n[![enter image description here][3]][3]\r\n\r\nanyone have a solution to fix my problem here?\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/vnMVr.png\r\n  [2]: http://i.stack.imgur.com/gJSMJ.png\r\n  [3]: http://i.stack.imgur.com/dXhbk.png","title":"SharedPreferences not Save if the application is re-open","body":"<p>My sharedpreferences does not save if i re-open my game the data that i saved before with SharedPreferences are not load, setting on my current activity is back to normal again or default</p>\n\n<p>this is the image of my button in <code>menu.class</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/vnMVr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vnMVr.png\" alt=\"enter image description here\"></a></p>\n\n<p>this is the following code of my <code>menu.class</code></p>\n\n<pre><code>@Override\n    protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    this.requestWindowFeature(Window.FEATURE_NO_TITLE);\n    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,\n    WindowManager.LayoutParams.FLAG_FULLSCREEN);\n    setContentView(R.layout.menu);\n    SharedPreferences pref = getSharedPreferences(\"SavedGame\", MODE_PRIVATE); \n    SharedPreferences.Editor editor = pref.edit();      \n    editor.putInt(\"Lifes\", 6);\n    editor.putInt(\"Hints\", 6);          \n    editor.putInt(\"Level\", 1);  \n    editor.commit();\n\n     f1=(Button)findViewById(R.id.f1);\n\n     f2=(Button)findViewById(R.id.f2);\n     f2lock=(ImageView)findViewById(R.id.f2lock);\n\n\n   f1.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v){\n                // TODO Auto-generated method stub\n                Intent i =new Intent(menu.this, levelone.class);\n                startActivity(i);             \n            }             \n        }); \n\n    f2.setOnClickListener(new View.OnClickListener() {\n\n         @Override\n         public void onClick(View v){\n           // TODO Auto-generated method stub\n              Intent i =new Intent(menu.this, leveltwo.class);\n              startActivity(i);          \n            }             \n      });\n\n    f3=(Button)findViewById(R.id.f3);\n    f3lock=(ImageView)findViewById(R.id.f3lock);\n\n}\npublic void onResume() {\nsuper.onResume();\n\n   SharedPreferences pref = getSharedPreferences(\"SavedGame\", MODE_PRIVATE); \n   levelunlocked = pref.getInt(\"Level\", 0); \n\n   if(levelunlocked == 2)\n\n    {\n        f2.setVisibility(View.VISIBLE);\n        f2lock.setVisibility(View.GONE);\n    }\n    if(levelunlocked == 3)\n\n    {\n        f3.setVisibility(View.VISIBLE);\n        f3lock.setVisibility(View.GONE);\n    }   \n\n       SharedPreferences.Editor editor = pref.edit();\n       editor.putInt(\"Level\", levelunlocked);\n       editor.commit();\n}\n@Override\npublic boolean onCreateOptionsMenu(Menu menu) {\n    // Inflate the menu; this adds items to the action bar if it is present.\n    getMenuInflater().inflate(R.menu.splashscreen, menu);\n    return true;\n}\n\n@Override\npublic boolean onOptionsItemSelected(MenuItem item) {\n    // Handle action bar item clicks here. The action bar will\n    // automatically handle clicks on the Home/Up button, so long\n    // as you specify a parent activity in AndroidManifest.xml.\n    int id = item.getItemId();\n    if (id == R.id.action_settings) {\n        return true;\n    }\n    return super.onOptionsItemSelected(item);\n}\n}\n</code></pre>\n\n<p>and i had this code in <code>levelone.class</code> to get the default value from <code>menu.class</code></p>\n\n<pre><code>int gamelifes, gamehints, gamelevel, index=0; \n\n\nSharedPreferences pref = getSharedPreferences(\"SavedGame\", MODE_PRIVATE);\ngamelifes = pref.getInt(\"Lifes\", 0);\ngamehints = pref.getInt(\"Hints\", 0);\ngamelevel = pref.getInt(\"Level\", 0);\n\n//the value from sharedpreferences is use to be a text by use code below\n\nlifes1 =(TextView)findViewById(R.id.lifestext1);\nlifes1.setTextColor(Color.RED);\nlifes1.setText(String.valueOf(gamelifes));   \n\nhints1 =(TextView)findViewById(R.id.hintstext1);\nhints1.setTextColor(Color.GRAY);\nhints1.setText(String.valueOf(gamehints));\n</code></pre>\n\n<p>and to save the sharedpreferences with new data</p>\n\n<pre><code>String answer=edittextanswer1.getText().toString();              \n            if(answer.equalsIgnoreCase(answer1[index]))\n            {\n                gamelevel++;                \n                image.setVisibility(View.GONE); \n                finishbutton.setVisibility(View.VISIBLE);  \n                SharedPreferences pref = getSharedPreferences(\"SavedGame\", MODE_PRIVATE); \n                SharedPreferences.Editor editor = pref.edit();      \n                editor.putInt(\"Lifes\", gamelifes);\n                editor.putInt(\"Hints\", gamehints);          \n                editor.putInt(\"Level\", gamelevel);  \n                editor.commit();\n            else\n            {    \n            tryagain1.setVisibility(View.VISIBLE);\n            gamelifes--;\n            lifes1.setText(String.valueOf(gamelifes));\n            }\n</code></pre>\n\n<p>then if finish button is clicked it will be like this</p>\n\n<pre><code>finishbutton.setOnClickListener(new View.OnClickListener() {\n\n      public void onClick(View v){\n          finish();\n      }\n   }); \n</code></pre>\n\n<p>so <code>levelone.class</code> are finish and back to <code>menu.class</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/gJSMJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gJSMJ.png\" alt=\"enter image description here\"></a></p>\n\n<p>and SharedPreferences code its worked properly, every button in <code>my menu.class</code> work with the code and be visible!</p>\n\n<p>but if i exit the application, its back to normal again</p>\n\n<p><a href=\"https://i.stack.imgur.com/dXhbk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dXhbk.png\" alt=\"enter image description here\"></a></p>\n\n<p>anyone have a solution to fix my problem here?</p>\n"},{"tags":["java","android","media"],"comments":[{"owner":{"account_id":2574985,"reputation":3376,"user_id":2232889,"accept_rate":80,"display_name":"Mario Velasco"},"score":0,"creation_date":1441791040,"post_id":8498259,"comment_id":52812503,"body_markdown":"Take a look to this answer with an intent that merges both requests (Camera &amp; Gallery) in a unique Intent: http://stackoverflow.com/a/32475805/2232889","body":"Take a look to this answer with an intent that merges both requests (Camera &amp; Gallery) in a unique Intent: <a href=\"http://stackoverflow.com/a/32475805/2232889\">stackoverflow.com/a/32475805/2232889</a>"},{"owner":{"account_id":5392262,"reputation":4671,"user_id":4294399,"display_name":"General Grievance"},"score":0,"creation_date":1661893175,"post_id":8498259,"comment_id":129879365,"body_markdown":"Does this answer your question? [How to pick an image from gallery (SD Card) for my app?](https://stackoverflow.com/questions/2507898/how-to-pick-an-image-from-gallery-sd-card-for-my-app)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2507898/how-to-pick-an-image-from-gallery-sd-card-for-my-app\">How to pick an image from gallery (SD Card) for my app?</a>"}],"answers":[{"tags":[],"owner":{"account_id":464408,"reputation":26765,"user_id":867895,"accept_rate":75,"display_name":"coder_For_Life22"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1671232096,"creation_date":1323823480,"answer_id":8498269,"question_id":8498259,"body_markdown":"Try this as an intent \r\n\r\n    Intent i = new Intent(Intent.ACTION_PICK,\r\n               android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);\r\n    startActivityForResult(i, ACTIVITY_SELECT_IMAGE);\r\n\r\nHere is how you retreive the returned image.\r\n\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent) { \r\n    super.onActivityResult(requestCode, resultCode, imageReturnedIntent); \r\n\r\n    switch(requestCode) { \r\n    case REQ_CODE_PICK_IMAGE:\r\n        if(resultCode == RESULT_OK){  \r\n            Uri selectedImage = imageReturnedIntent.getData();\r\n            String[] filePathColumn = {MediaStore.Images.Media.DATA};\r\n\r\n            Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);\r\n            cursor.moveToFirst();\r\n\r\n            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);\r\n            String filePath = cursor.getString(columnIndex);\r\n            cursor.close();\r\n\r\n\r\n            Bitmap yourSelectedImage = BitmapFactory.decodeFile(filePath);\r\n        }\r\n    }\r\n    }\r\n\r\n(code from https://stackoverflow.com/a/2508138)\r\n\r\n","title":"Choose an image from camera or gallery","body":"<p>Try this as an intent</p>\n<pre><code>Intent i = new Intent(Intent.ACTION_PICK,\n           android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);\nstartActivityForResult(i, ACTIVITY_SELECT_IMAGE);\n</code></pre>\n<p>Here is how you retreive the returned image.</p>\n<pre><code>protected void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent) { \nsuper.onActivityResult(requestCode, resultCode, imageReturnedIntent); \n\nswitch(requestCode) { \ncase REQ_CODE_PICK_IMAGE:\n    if(resultCode == RESULT_OK){  \n        Uri selectedImage = imageReturnedIntent.getData();\n        String[] filePathColumn = {MediaStore.Images.Media.DATA};\n\n        Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);\n        cursor.moveToFirst();\n\n        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);\n        String filePath = cursor.getString(columnIndex);\n        cursor.close();\n\n\n        Bitmap yourSelectedImage = BitmapFactory.decodeFile(filePath);\n    }\n}\n}\n</code></pre>\n<p>(code from <a href=\"https://stackoverflow.com/a/2508138\">https://stackoverflow.com/a/2508138</a>)</p>\n"}],"owner":{"account_id":455586,"reputation":32079,"user_id":853836,"accept_rate":84,"display_name":"Addev"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9683,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":8498269,"answer_count":1,"score":0,"last_activity_date":1671232096,"creation_date":1323823365,"question_id":8498259,"body_markdown":"How can I offer the user the option of choosing an  image from the camera or gallery and retrieve the Resource id associated?","title":"Choose an image from camera or gallery","body":"<p>How can I offer the user the option of choosing an  image from the camera or gallery and retrieve the Resource id associated?</p>\n"},{"tags":["java","security","tomcat","ssl"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1489769818,"post_id":42857957,"comment_id":72832471,"body_markdown":"When the handshake (plaintext) fails usually you can simply use Wireshark on the host or a computer connected to mirroring port to find out what is going wrong. Set the filter to only record the traffic of the IP of the problematic REST client. Afterwards show the recorded handshake to someone that knows a bit on SSL/TLS or educate yourself...","body":"When the handshake (plaintext) fails usually you can simply use Wireshark on the host or a computer connected to mirroring port to find out what is going wrong. Set the filter to only record the traffic of the IP of the problematic REST client. Afterwards show the recorded handshake to someone that knows a bit on SSL/TLS or educate yourself..."},{"owner":{"account_id":1423833,"reputation":1379,"user_id":1347872,"accept_rate":41,"display_name":"Manu"},"score":0,"creation_date":1489842922,"post_id":42857957,"comment_id":72853936,"body_markdown":"@Robert , i think you got my question wrong. I am aware of using wireshark and analyzing the SSL debug logs to identify the issue from a debugging perceptive. But my requirement is different. I am looking for a way , how i can log the ssl handshake failure. Not from a debugging perceptive, but from a logging and auditing perceptive to be aware of the number of unsuccessful SSL handshakes that were tried to the application,","body":"@Robert , i think you got my question wrong. I am aware of using wireshark and analyzing the SSL debug logs to identify the issue from a debugging perceptive. But my requirement is different. I am looking for a way , how i can log the ssl handshake failure. Not from a debugging perceptive, but from a logging and auditing perceptive to be aware of the number of unsuccessful SSL handshakes that were tried to the application,"},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1489843606,"post_id":42857957,"comment_id":72854157,"body_markdown":"So your main target is to gather statistical data on the TLD connections - how many fail, and how many work (and may be what TLS version and cipher suite client and server agreed on). This is what you want to achieve, right?","body":"So your main target is to gather statistical data on the TLD connections - how many fail, and how many work (and may be what TLS version and cipher suite client and server agreed on). This is what you want to achieve, right?"},{"owner":{"account_id":1423833,"reputation":1379,"user_id":1347872,"accept_rate":41,"display_name":"Manu"},"score":0,"creation_date":1489958491,"post_id":42857957,"comment_id":72886034,"body_markdown":"Yes @Robert. I am mainly looking for logging only SSL handshake failures.","body":"Yes @Robert. I am mainly looking for logging only SSL handshake failures."},{"owner":{"account_id":148887,"reputation":4330,"user_id":1700467,"display_name":"skadya"},"score":0,"creation_date":1505422454,"post_id":42857957,"comment_id":79419964,"body_markdown":"it appears that tomcat does not provide any way to customized or add listener to log the handshake errors. However you may try to set logging level of logger &quot;org.apache.tomcat.util.net.NioEndpoint&quot; to &quot;DEBUG&quot; and make sure it has appender which log the events at DEBUG level. In log you should someting &quot;Error during SSL handshake&quot;.  see [link](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.tomcat/tomcat-coyote/8.0.24/org/apache/tomcat/util/net/NioEndpoint.java/#1517)","body":"it appears that tomcat does not provide any way to customized or add listener to log the handshake errors. However you may try to set logging level of logger &quot;org.apache.tomcat.util.net.NioEndpoint&quot; to &quot;DEBUG&quot; and make sure it has appender which log the events at DEBUG level. In log you should someting &quot;Error during SSL handshake&quot;.  see <a href=\"http://grepcode.com/file/repo1.maven.org/maven2/org.apache.tomcat/tomcat-coyote/8.0.24/org/apache/tomcat/util/net/NioEndpoint.java/#1517\" rel=\"nofollow noreferrer\">link</a>"}],"answers":[{"tags":[],"owner":{"account_id":3635878,"reputation":2746,"user_id":3031010,"accept_rate":57,"display_name":"egorlitvinenko"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1505564387,"creation_date":1505480722,"answer_id":46240319,"question_id":42857957,"body_markdown":"Unfortunately, it is not possible likely. And it is not related to Tomcat.\r\nLogging of SSL it is not part of standard logging in your application.\r\nYou could try reduce output with following option:\r\n\r\n    -Djava.net.debug=handshake\r\n\r\nSome others:\r\n\r\n* record - Print a trace of each SSL record (at the SSL protocol level).\r\n* handshake - Print each handshake message as it is received\r\n* keygen - Print key generation data for the secret key exchange.\r\n* session - Print SSL session activity.\r\n* defaultctx - Print the default SSL initialization information.\r\n* sslctx - Print information about the SSL context.\r\n* sessioncache - Print information about the SSL session cache.\r\n* keymanager - Print information about calls to the key manager.\r\n* trustmanager - Print information about calls to the trust manager.\r\n* data - For handshake tracing, print out a hex dump of each message.\r\n* verbose - For handshake tracing, print out verbose information.\r\n* plaintext - For record tracing, print out a hex dump of the record.\r\n\r\nSee [docs][1].\r\n\r\nIf you really need this and performance is critical for your application, you could instrument [SSLSocket][2] (in docs you could read about handshake process) with [ASM][3]/[Btrace][4] /etc and check the state of handshake inside it. But in that case you wouldn&#39;t have debug information - only true/false.\r\n\r\nSee also [Tomcat docs][5] with all available settings. There you can read that there is [JSSEImplementation][6] class, which is used in Tomcat. And it is wrapper for JSSE.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html#Debug\r\n  [2]: http://docs.oracle.com/javase/6/docs/api/javax/net/ssl/SSLSocket.html\r\n  [3]: http://asm.ow2.org\r\n  [4]: https://github.com/btraceio/btrace\r\n  [5]: https://tomcat.apache.org/tomcat-8.0-doc/config/http.html#SSL_Support\r\n  [6]: https://tomcat.apache.org/tomcat-8.0-doc/api/org/apache/tomcat/util/net/jsse/JSSEImplementation.html","title":"Enable Logging SSL handshake failure(Audit purpose logs) only on Tomcat 8+ with Java","body":"<p>Unfortunately, it is not possible likely. And it is not related to Tomcat.\nLogging of SSL it is not part of standard logging in your application.\nYou could try reduce output with following option:</p>\n\n<pre><code>-Djava.net.debug=handshake\n</code></pre>\n\n<p>Some others:</p>\n\n<ul>\n<li>record - Print a trace of each SSL record (at the SSL protocol level).</li>\n<li>handshake - Print each handshake message as it is received</li>\n<li>keygen - Print key generation data for the secret key exchange.</li>\n<li>session - Print SSL session activity.</li>\n<li>defaultctx - Print the default SSL initialization information.</li>\n<li>sslctx - Print information about the SSL context.</li>\n<li>sessioncache - Print information about the SSL session cache.</li>\n<li>keymanager - Print information about calls to the key manager.</li>\n<li>trustmanager - Print information about calls to the trust manager.</li>\n<li>data - For handshake tracing, print out a hex dump of each message.</li>\n<li>verbose - For handshake tracing, print out verbose information.</li>\n<li>plaintext - For record tracing, print out a hex dump of the record.</li>\n</ul>\n\n<p>See <a href=\"http://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html#Debug\" rel=\"noreferrer\">docs</a>.</p>\n\n<p>If you really need this and performance is critical for your application, you could instrument <a href=\"http://docs.oracle.com/javase/6/docs/api/javax/net/ssl/SSLSocket.html\" rel=\"noreferrer\">SSLSocket</a> (in docs you could read about handshake process) with <a href=\"http://asm.ow2.org\" rel=\"noreferrer\">ASM</a>/<a href=\"https://github.com/btraceio/btrace\" rel=\"noreferrer\">Btrace</a> /etc and check the state of handshake inside it. But in that case you wouldn't have debug information - only true/false.</p>\n\n<p>See also <a href=\"https://tomcat.apache.org/tomcat-8.0-doc/config/http.html#SSL_Support\" rel=\"noreferrer\">Tomcat docs</a> with all available settings. There you can read that there is <a href=\"https://tomcat.apache.org/tomcat-8.0-doc/api/org/apache/tomcat/util/net/jsse/JSSEImplementation.html\" rel=\"noreferrer\">JSSEImplementation</a> class, which is used in Tomcat. And it is wrapper for JSSE.</p>\n"},{"tags":[],"owner":{"account_id":14216491,"reputation":29,"user_id":10270241,"display_name":"Dhaumik"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1535123779,"creation_date":1535123339,"answer_id":52007295,"question_id":42857957,"body_markdown":"I had same issue many times and i cracked it as following way. i had my project setup in intelliJ.\r\n\r\n1. set Debug level of the VM option  : -Djavax.net.debug=all (Edit Configurations-&gt;VM Options) save and apply.\r\n2. Run project(App) in debug mode and check the calls between server and client. you will find there will be additional CertificateRequest call from the server to client in console as below for instance.\r\n\r\n*** CertificateRequest\r\nCert Types: RSA, DSS, ECDSA\r\nSupported Signature Algorithms: SHA512withRSA, Unknown (hash:0x6, signature:0x2), SHA512withECDSA, SHA384withRSA, Unknown (hash:0x5, signature:0x2), SHA384withECDSA, SHA256withRSA, Unknown (hash:0x4, signature:0x2), SHA256withECDSA, SHA224withRSA, Unknown (hash:0x3, signature:0x2), SHA224withECDSA, SHA1withRSA, SHA1withDSA, SHA1withECDSA\r\nCert Authorities:\r\n\r\nCN=Symantec Public Class 3, O=Symantec Corporation, C=US\r\n\r\nCN=Symantec Class 3 Manage, OU=Symantec Trusted Network, O=Symantec, C=US\r\n\r\n[read] MD5 and SHA1 hashes:  len = 302 \r\n\r\n3. If you can see certificate request with &quot;CN&quot; as above that means you are missing these certs in cacert keystore. \r\n\r\nSolution : add missing certs (for our example two certs CN=Symantec Public Class 3 and CN=Symantec Class 3 Manage).\r\n\r\nwe have to understand the calls between server and client by the SSL Protocol, please check the following link to get more information how server and client communicate.\r\n\r\nhttps://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html#InstallProbs\r\n\r\n\r\nI will give youtube video demo if someone have issue.\r\n\r\nI hope this solution will help someone.\r\n\r\nThank You.","title":"Enable Logging SSL handshake failure(Audit purpose logs) only on Tomcat 8+ with Java","body":"<p>I had same issue many times and i cracked it as following way. i had my project setup in intelliJ.</p>\n\n<ol>\n<li>set Debug level of the VM option  : -Djavax.net.debug=all (Edit Configurations->VM Options) save and apply.</li>\n<li>Run project(App) in debug mode and check the calls between server and client. you will find there will be additional CertificateRequest call from the server to client in console as below for instance.</li>\n</ol>\n\n<p>*** CertificateRequest\nCert Types: RSA, DSS, ECDSA\nSupported Signature Algorithms: SHA512withRSA, Unknown (hash:0x6, signature:0x2), SHA512withECDSA, SHA384withRSA, Unknown (hash:0x5, signature:0x2), SHA384withECDSA, SHA256withRSA, Unknown (hash:0x4, signature:0x2), SHA256withECDSA, SHA224withRSA, Unknown (hash:0x3, signature:0x2), SHA224withECDSA, SHA1withRSA, SHA1withDSA, SHA1withECDSA\nCert Authorities:</p>\n\n<p>CN=Symantec Public Class 3, O=Symantec Corporation, C=US</p>\n\n<p>CN=Symantec Class 3 Manage, OU=Symantec Trusted Network, O=Symantec, C=US</p>\n\n<p>[read] MD5 and SHA1 hashes:  len = 302 </p>\n\n<ol start=\"3\">\n<li>If you can see certificate request with \"CN\" as above that means you are missing these certs in cacert keystore. </li>\n</ol>\n\n<p>Solution : add missing certs (for our example two certs CN=Symantec Public Class 3 and CN=Symantec Class 3 Manage).</p>\n\n<p>we have to understand the calls between server and client by the SSL Protocol, please check the following link to get more information how server and client communicate.</p>\n\n<p><a href=\"https://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html#InstallProbs\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html#InstallProbs</a></p>\n\n<p>I will give youtube video demo if someone have issue.</p>\n\n<p>I hope this solution will help someone.</p>\n\n<p>Thank You.</p>\n"},{"tags":[],"owner":{"account_id":11431245,"reputation":11,"user_id":16368113,"display_name":"Keith Boone"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671231872,"creation_date":1671231872,"answer_id":74830586,"question_id":42857957,"body_markdown":"I [wrote this up][1] years ago, something similar should work in more recent versions of Tomcat.\r\n\r\nSadly, that was in Tomcat 5 or 6.  I have the same problem today in Tomcat 9.  As soon as I figure it out, I&#39;ll let you know what the resolution is.  Basically, you want to capture and report the IOException on a handshake failure.  That needs to be done in the socket factory.\r\n\r\n\r\n  [1]: https://wiki.ihe.net/index.php/ATNA_FAQ#How_do_I_Log_a_message_when_someone_fails_to_connect_to_Tomcat.3F","title":"Enable Logging SSL handshake failure(Audit purpose logs) only on Tomcat 8+ with Java","body":"<p>I <a href=\"https://wiki.ihe.net/index.php/ATNA_FAQ#How_do_I_Log_a_message_when_someone_fails_to_connect_to_Tomcat.3F\" rel=\"nofollow noreferrer\">wrote this up</a> years ago, something similar should work in more recent versions of Tomcat.</p>\n<p>Sadly, that was in Tomcat 5 or 6.  I have the same problem today in Tomcat 9.  As soon as I figure it out, I'll let you know what the resolution is.  Basically, you want to capture and report the IOException on a handshake failure.  That needs to be done in the socket factory.</p>\n"}],"owner":{"account_id":1423833,"reputation":1379,"user_id":1347872,"accept_rate":41,"display_name":"Manu"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37270,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"answer_count":3,"score":18,"last_activity_date":1671231872,"creation_date":1489754737,"question_id":42857957,"body_markdown":"I need to log if a SSL handshake fails while a REST client tries to connect to my application. The application is build using Spring Boot and Java 8 and deployed on Tomcat 8. \r\n\r\nIn the scenario of SSL handshake failing, since the TLS connection is broken, the logging requirement might have to be done in the Tomcat layer or Java, since Tomcat is using underlying JVM for SSL certificate validation in my case.\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;Connector port=&quot;8443&quot; protocol=&quot;org.apache.coyote.http11.Http11NioProtocol&quot; SSLEnabled=&quot;true&quot; scheme=&quot;https&quot; secure=&quot;true&quot; keystoreFile=&quot;keyStore-1.jks&quot; keystorePass=&quot;password&quot; keystoreType=&quot;jks&quot; truststoreFile=&quot;TrustStore.jks&quot; truststorePass=&quot;passwrd&quot; truststoreType=&quot;jks&quot; clientAuth=&quot;want&quot; sslProtocol=&quot;TLSv1.2&quot; /&gt;\r\n\r\nI am aware of enabling the debug level logging. \r\n\r\n&gt; -Djavax.net.debug=ssl\r\n\r\nBut this logs a lot of information and will slow down the process. And log the success SSL valdiations also. Is there a way to enable the failure cases alone with minimum logs either at Java or Tomcat level. \r\n\r\nI am NOT looking this from a debugging perspective, as the SSL debug logs are very good for that. \r\nThis requirement is more from a logging and auditing purpose and enabling the debug logs is not a feasible option.A mechanism that logs only the errors happening SSL and not all the hex/cert data.\r\n","title":"Enable Logging SSL handshake failure(Audit purpose logs) only on Tomcat 8+ with Java","body":"<p>I need to log if a SSL handshake fails while a REST client tries to connect to my application. The application is build using Spring Boot and Java 8 and deployed on Tomcat 8. </p>\n\n<p>In the scenario of SSL handshake failing, since the TLS connection is broken, the logging requirement might have to be done in the Tomcat layer or Java, since Tomcat is using underlying JVM for SSL certificate validation in my case.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Connector port=\"8443\" protocol=\"org.apache.coyote.http11.Http11NioProtocol\" SSLEnabled=\"true\" scheme=\"https\" secure=\"true\" keystoreFile=\"keyStore-1.jks\" keystorePass=\"password\" keystoreType=\"jks\" truststoreFile=\"TrustStore.jks\" truststorePass=\"passwrd\" truststoreType=\"jks\" clientAuth=\"want\" sslProtocol=\"TLSv1.2\" /&gt;\n</code></pre>\n\n<p>I am aware of enabling the debug level logging. </p>\n\n<blockquote>\n  <p>-Djavax.net.debug=ssl</p>\n</blockquote>\n\n<p>But this logs a lot of information and will slow down the process. And log the success SSL valdiations also. Is there a way to enable the failure cases alone with minimum logs either at Java or Tomcat level. </p>\n\n<p>I am NOT looking this from a debugging perspective, as the SSL debug logs are very good for that. \nThis requirement is more from a logging and auditing purpose and enabling the debug logs is not a feasible option.A mechanism that logs only the errors happening SSL and not all the hex/cert data.</p>\n"},{"tags":["java","arrays","if-statement","casting"],"comments":[{"owner":{"display_name":"user20716279"},"score":0,"creation_date":1671230365,"post_id":74830400,"comment_id":132062430,"body_markdown":"is X1 and x2 atterbuite has same data type of atterbuite x3 and x4  or what it&#39;s their data type? another way can not the record constructor has overloded version that accept cat and another one that accept dog and so on and in the constructor you do the instailizations of record atterbuite","body":"is X1 and x2 atterbuite has same data type of atterbuite x3 and x4  or what it&#39;s their data type? another way can not the record constructor has overloded version that accept cat and another one that accept dog and so on and in the constructor you do the instailizations of record atterbuite"},{"owner":{"account_id":26159406,"reputation":25,"user_id":19846208,"display_name":"Andre Silva"},"score":0,"creation_date":1671230926,"post_id":74830400,"comment_id":132062541,"body_markdown":"updated the answer. Data types are completely different","body":"updated the answer. Data types are completely different"},{"owner":{"display_name":"user20716279"},"score":0,"creation_date":1671231176,"post_id":74830400,"comment_id":132062580,"body_markdown":"then you can check the link by John or the answer below or if it possible to overload the record constructor as mentioned earlier also check those design pattern https://java-design-patterns.com/ using java","body":"then you can check the link by John or the answer below or if it possible to overload the record constructor as mentioned earlier also check those design pattern <a href=\"https://java-design-patterns.com/\" rel=\"nofollow noreferrer\">java-design-patterns.com</a> using java"}],"answers":[{"tags":[],"owner":{"account_id":134022,"reputation":717183,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1671230518,"creation_date":1671230518,"answer_id":74830444,"question_id":74830400,"body_markdown":"One approach is to let each `Animal` map itself to `Record`:\r\n\r\n    abstract class Animal {\r\n        public abstract Record makeRecord();\r\n        ... // other methods\r\n    }\r\n    class Cat extends Animal {\r\n        public Record makeRecord() {\r\n            ... // map the Cat to Record\r\n        }\r\n    }\r\n    class Dog extends Animal {\r\n        public Record makeRecord() {\r\n            ... // map the Dog to Record\r\n        }\r\n    }\r\n\r\nThis lets you avoid the cast, because each class knows how to handle its own attributes.","title":"Avoid else-if statement with cast","body":"<p>One approach is to let each <code>Animal</code> map itself to <code>Record</code>:</p>\n<pre><code>abstract class Animal {\n    public abstract Record makeRecord();\n    ... // other methods\n}\nclass Cat extends Animal {\n    public Record makeRecord() {\n        ... // map the Cat to Record\n    }\n}\nclass Dog extends Animal {\n    public Record makeRecord() {\n        ... // map the Dog to Record\n    }\n}\n</code></pre>\n<p>This lets you avoid the cast, because each class knows how to handle its own attributes.</p>\n"}],"owner":{"account_id":26159406,"reputation":25,"user_id":19846208,"display_name":"Andre Silva"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1671230571,"answer_count":1,"score":0,"last_activity_date":1671231033,"creation_date":1671230168,"question_id":74830400,"body_markdown":"I have several java classes `Cat`, `Dog`, `Lion`, etc that extend class abstract class `Animal`. And these classes have different attributes. For example \r\n\r\nCat has attributes X1, X2. Dog has attributes X3, X4 etc. Data types X1, X2, X3 and X4 are completely different\r\n\r\nNow I have an array of Animals (`animals`) and I want to iterate through this array and map every animal (dog, cat, etc) to a `Record` class.\r\n\r\n\r\nCurrently I am doing it this way\r\n\r\n\r\n     for (Animal animal : animals){  \r\n      Record record = new Record();  \r\n        if (animal instance of Dog){ \r\n          record.setAttribute1 ((Dog)animal.getX1()); \r\n          record.setAttribute2 ((Dog)animal.getX2())\r\n        }\r\n        if (animal instance of Cat){  \r\n          record.setAttribute3 ((Dog)animal.getX3());   \r\n          record.setAttribute4 ((Dog)animal.getX4())\r\n        }    \r\n    \r\n        etc  \r\n     }\r\n\r\nthis is design ill because of the long if-else chain and the dynamic cast\r\n\r\nIs there a way to avoid these 2 problems. Appreciate your help\r\n\r\n","title":"Avoid else-if statement with cast","body":"<p>I have several java classes <code>Cat</code>, <code>Dog</code>, <code>Lion</code>, etc that extend class abstract class <code>Animal</code>. And these classes have different attributes. For example</p>\n<p>Cat has attributes X1, X2. Dog has attributes X3, X4 etc. Data types X1, X2, X3 and X4 are completely different</p>\n<p>Now I have an array of Animals (<code>animals</code>) and I want to iterate through this array and map every animal (dog, cat, etc) to a <code>Record</code> class.</p>\n<p>Currently I am doing it this way</p>\n<pre><code> for (Animal animal : animals){  \n  Record record = new Record();  \n    if (animal instance of Dog){ \n      record.setAttribute1 ((Dog)animal.getX1()); \n      record.setAttribute2 ((Dog)animal.getX2())\n    }\n    if (animal instance of Cat){  \n      record.setAttribute3 ((Dog)animal.getX3());   \n      record.setAttribute4 ((Dog)animal.getX4())\n    }    \n\n    etc  \n }\n</code></pre>\n<p>this is design ill because of the long if-else chain and the dynamic cast</p>\n<p>Is there a way to avoid these 2 problems. Appreciate your help</p>\n"},{"tags":["java","selenium","rest"],"comments":[{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1648232581,"post_id":71621355,"comment_id":126580937,"body_markdown":"You might check here: https://www.selenium.dev/documentation/webdriver/bidirectional/bidi_api/#network-interception","body":"You might check here: <a href=\"https://www.selenium.dev/documentation/webdriver/bidirectional/bidi_api/#network-interception\" rel=\"nofollow noreferrer\">selenium.dev/documentation/webdriver/bidirectional/bidi_api/&zwnj;&#8203;&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":25468706,"reputation":11,"user_id":19267305,"display_name":"Colum Wilde"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671230946,"creation_date":1671230882,"answer_id":74830492,"question_id":71621355,"body_markdown":"Looks like this has been added in Selenium 4\r\n\r\n```\r\nNetworkInterceptor interceptor = new NetworkInterceptor(\r\n      driver,\r\n      Route.matching(req -&gt; req.getUri().contains(&quot;myRequestUrl&quot;))\r\n        .to(() -&gt; req -&gt; new HttpResponse()\r\n          .setStatus(200)\r\n          .addHeader(&quot;Content-Type&quot;, MediaType.HTML_UTF_8.toString())\r\n          .setContent(utf8String(&quot;Hello, World!&quot;))));\r\n\r\ndriver.get(&quot;https://www.mywebsite.com&quot;);\r\n\r\nString source = driver.getPageSource();\r\n\r\nassertThat(source).contains(&quot;Hello, World!&quot;);\r\n```\r\n\r\nSee [Network Interception](https://www.selenium.dev/documentation/webdriver/bidirectional/bidi_api/#network-interception)","title":"Is there any way to intercept GET api response via selenium webdriver or rest api and make the response body null to check the error handling on UI?","body":"<p>Looks like this has been added in Selenium 4</p>\n<pre><code>NetworkInterceptor interceptor = new NetworkInterceptor(\n      driver,\n      Route.matching(req -&gt; req.getUri().contains(&quot;myRequestUrl&quot;))\n        .to(() -&gt; req -&gt; new HttpResponse()\n          .setStatus(200)\n          .addHeader(&quot;Content-Type&quot;, MediaType.HTML_UTF_8.toString())\n          .setContent(utf8String(&quot;Hello, World!&quot;))));\n\ndriver.get(&quot;https://www.mywebsite.com&quot;);\n\nString source = driver.getPageSource();\n\nassertThat(source).contains(&quot;Hello, World!&quot;);\n</code></pre>\n<p>See <a href=\"https://www.selenium.dev/documentation/webdriver/bidirectional/bidi_api/#network-interception\" rel=\"nofollow noreferrer\">Network Interception</a></p>\n"}],"owner":{"account_id":24688976,"reputation":1,"user_id":18581758,"display_name":"Kushal Shinde"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2167,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671230946,"creation_date":1648231585,"question_id":71621355,"body_markdown":"Is there any way to intercept GET API response via selenium web driver or rest API and make the response body null to check the error handling on UI?","title":"Is there any way to intercept GET api response via selenium webdriver or rest api and make the response body null to check the error handling on UI?","body":"<p>Is there any way to intercept GET API response via selenium web driver or rest API and make the response body null to check the error handling on UI?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1470443087,"post_id":38799379,"comment_id":64968883,"body_markdown":"All of those values are OR&#39;d together, then passed to `setSystemUiVisibility` as a single integer.","body":"All of those values are OR&#39;d together, then passed to <code>setSystemUiVisibility</code> as a single integer."}],"answers":[{"tags":[],"owner":{"account_id":7350428,"reputation":1298,"user_id":5960850,"display_name":"Matthew Woo"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1671230759,"creation_date":1470444430,"answer_id":38799514,"question_id":38799379,"body_markdown":"`setSystemUiVisibility` is actually receiving 1 integer. What you&#39;re seeing here are **bit flags**. All those `View` constants you see are combined using bitwise or.\r\n\r\nThe idea is that a flag represents a toggle: on or off, 1 or 0. A typical way of representing that is with a `boolean` which has values `true` and `false`. But a `boolean` takes up 4 bytes (for simplicity), which is 32 bits. Well, this `boolean` could actually be used to represent 32 different flags then, with 32 places for 1 or 0! Same with an integer (of size 4 bytes). So lets use an integer to hold a bunch of flags, and set all of them to 0 initially.\r\n\r\nWe can then use the bitwise or operator (`|`, note 1 bar, not 2) to specify which bit flag to set to &quot;true&quot; like so:\r\n\r\n    00000000 | 00100000 = 00100000\r\n    00100000 | 00000001 = 00100001\r\n\r\nThe second number is showing which flag we want to set as true. Now your variables have the values (from [documentation][1]):\r\n\r\n    View.SYSTEM_UI_FLAG_LAYOUT_STABLE          = 0x0100 = 0000 0001 0000 0000\r\n    View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION = 0x0200 = 0000 0010 0000 0000\r\n    View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN      = 0x0400 = 0000 0100 0000 0000\r\n    View.SYSTEM_UI_FLAG_HIDE_NAVIGATION        = 0x0002 = 0000 0000 0000 0010\r\n    View.SYSTEM_UI_FLAG_FULLSCREEN             = 0x0004 = 0000 0000 0000 0100\r\n    View.SYSTEM_UI_FLAG_IMMERSIVE              = 0x0800 = 0000 1000 0000 0000\r\n\r\nWhen you combine them all together with bitwise or, you get `0000 1111 0000 0110` = `0x0F06` = 3846.\r\n\r\nNote: I&#39;m not representing 32 bits for simplicity and readability&#39;s sake. All the binary numbers I wrote should have leading 0&#39;s, in case that was confusing.\r\n\r\n  [1]: https://developer.android.com/reference/android/view/View.html#SYSTEM_UI_FLAG_FULLSCREEN","title":"How is this line of code is evaluated in Java (Android)?","body":"<p><code>setSystemUiVisibility</code> is actually receiving 1 integer. What you're seeing here are <strong>bit flags</strong>. All those <code>View</code> constants you see are combined using bitwise or.</p>\n<p>The idea is that a flag represents a toggle: on or off, 1 or 0. A typical way of representing that is with a <code>boolean</code> which has values <code>true</code> and <code>false</code>. But a <code>boolean</code> takes up 4 bytes (for simplicity), which is 32 bits. Well, this <code>boolean</code> could actually be used to represent 32 different flags then, with 32 places for 1 or 0! Same with an integer (of size 4 bytes). So lets use an integer to hold a bunch of flags, and set all of them to 0 initially.</p>\n<p>We can then use the bitwise or operator (<code>|</code>, note 1 bar, not 2) to specify which bit flag to set to &quot;true&quot; like so:</p>\n<pre><code>00000000 | 00100000 = 00100000\n00100000 | 00000001 = 00100001\n</code></pre>\n<p>The second number is showing which flag we want to set as true. Now your variables have the values (from <a href=\"https://developer.android.com/reference/android/view/View.html#SYSTEM_UI_FLAG_FULLSCREEN\" rel=\"nofollow noreferrer\">documentation</a>):</p>\n<pre><code>View.SYSTEM_UI_FLAG_LAYOUT_STABLE          = 0x0100 = 0000 0001 0000 0000\nView.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION = 0x0200 = 0000 0010 0000 0000\nView.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN      = 0x0400 = 0000 0100 0000 0000\nView.SYSTEM_UI_FLAG_HIDE_NAVIGATION        = 0x0002 = 0000 0000 0000 0010\nView.SYSTEM_UI_FLAG_FULLSCREEN             = 0x0004 = 0000 0000 0000 0100\nView.SYSTEM_UI_FLAG_IMMERSIVE              = 0x0800 = 0000 1000 0000 0000\n</code></pre>\n<p>When you combine them all together with bitwise or, you get <code>0000 1111 0000 0110</code> = <code>0x0F06</code> = 3846.</p>\n<p>Note: I'm not representing 32 bits for simplicity and readability's sake. All the binary numbers I wrote should have leading 0's, in case that was confusing.</p>\n"}],"owner":{"account_id":4694486,"reputation":1307,"user_id":3799695,"accept_rate":56,"display_name":"Sandoval0992"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":716,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":38799514,"answer_count":1,"score":2,"last_activity_date":1671230759,"creation_date":1470442890,"question_id":38799379,"body_markdown":"I&#39;m working on the android developer tutorial &quot;[Using Immersive Full-Screen Mode][1]&quot;\r\n\r\nEverything was ok until I found this code snippet. \r\n\r\n    private void hideSystemUI() {\r\n        // Set the IMMERSIVE flag.\r\n        // Set the content to appear under the system bars so that the content\r\n        // doesn&#39;t resize when the system bars hide and show.\r\n        mDecorView.setSystemUiVisibility(\r\n                View.SYSTEM_UI_FLAG_LAYOUT_STABLE\r\n                | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION\r\n                | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN\r\n                | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION // hide nav bar\r\n                | View.SYSTEM_UI_FLAG_FULLSCREEN // hide status bar\r\n                | View.SYSTEM_UI_FLAG_IMMERSIVE);\r\n    }\r\n\r\nI&#39;m a little bit confused with the `setSystemUiVisibility(int)` method because I don&#39;t know how this condition is evaluated. \r\n\r\nWhy is this method receiving several integer values?\r\n\r\nMaybe it is a very basic concept about java language but I had never used or seen it before.\r\n\r\n\r\n  [1]: https://developer.android.com/training/system-ui/immersive.html#nonsticky","title":"How is this line of code is evaluated in Java (Android)?","body":"<p>I'm working on the android developer tutorial \"<a href=\"https://developer.android.com/training/system-ui/immersive.html#nonsticky\" rel=\"nofollow\">Using Immersive Full-Screen Mode</a>\"</p>\n\n<p>Everything was ok until I found this code snippet. </p>\n\n<pre><code>private void hideSystemUI() {\n    // Set the IMMERSIVE flag.\n    // Set the content to appear under the system bars so that the content\n    // doesn't resize when the system bars hide and show.\n    mDecorView.setSystemUiVisibility(\n            View.SYSTEM_UI_FLAG_LAYOUT_STABLE\n            | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION\n            | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN\n            | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION // hide nav bar\n            | View.SYSTEM_UI_FLAG_FULLSCREEN // hide status bar\n            | View.SYSTEM_UI_FLAG_IMMERSIVE);\n}\n</code></pre>\n\n<p>I'm a little bit confused with the <code>setSystemUiVisibility(int)</code> method because I don't know how this condition is evaluated. </p>\n\n<p>Why is this method receiving several integer values?</p>\n\n<p>Maybe it is a very basic concept about java language but I had never used or seen it before.</p>\n"},{"tags":["java","linux"],"comments":[{"owner":{"display_name":"user1907906"},"score":0,"creation_date":1430386387,"post_id":29964042,"comment_id":48048297,"body_markdown":"How did you install Java? Where? Try `which java`.","body":"How did you install Java? Where? Try <code>which java</code>."},{"owner":{"account_id":4364878,"reputation":5041,"user_id":3560981,"accept_rate":63,"display_name":"Nidhoegger"},"score":1,"creation_date":1430386422,"post_id":29964042,"comment_id":48048319,"body_markdown":"Which distribution do you use and how did you install java? via packaging manager or manually?","body":"Which distribution do you use and how did you install java? via packaging manager or manually?"},{"owner":{"account_id":116285,"reputation":8397,"user_id":304974,"accept_rate":79,"display_name":"Programmer"},"score":0,"creation_date":1430386473,"post_id":29964042,"comment_id":48048351,"body_markdown":"# which java\n/usr/bin/java\n\nI am not sure how the old one was deployed","body":"# which java /usr/bin/java  I am not sure how the old one was deployed"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1430386549,"post_id":29964042,"comment_id":48048395,"body_markdown":"How to install software is not a programming question.  Please read the Help Centre documentation on what to ask *before* you ask questions.","body":"How to install software is not a programming question.  Please read the Help Centre documentation on what to ask <i>before</i> you ask questions."}],"answers":[{"tags":[],"owner":{"display_name":"user1907906"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1430386473,"creation_date":1430386473,"answer_id":29964091,"question_id":29964042,"body_markdown":"Just unpack the new Java version, for example into `/opt`. Then do\r\n\r\n    export JAVA_HOME=/opt/jdk1.8.0_45 \r\n    export PATH=$JAVA_HOME/bin:$PATH\r\n\r\nPut these `export`s into the startup files for your shell and you should be set. It is not necessary to uninstall the Java 7 installation.","title":"How to remove old version of Java and install new version","body":"<p>Just unpack the new Java version, for example into <code>/opt</code>. Then do</p>\n\n<pre><code>export JAVA_HOME=/opt/jdk1.8.0_45 \nexport PATH=$JAVA_HOME/bin:$PATH\n</code></pre>\n\n<p>Put these <code>export</code>s into the startup files for your shell and you should be set. It is not necessary to uninstall the Java 7 installation.</p>\n"},{"tags":[],"owner":{"account_id":5684380,"reputation":306,"user_id":4494405,"display_name":"Ksheetij Saini"},"down_vote_count":0,"up_vote_count":27,"is_accepted":true,"score":27,"last_activity_date":1430387722,"creation_date":1430387722,"answer_id":29964538,"question_id":29964042,"body_markdown":"1. To remove OpenJDK (the one you&#39;ve already installed)\r\n\r\n     `sudo apt-get purge openjdk-\\* `\r\n2. Make a new directory for your new JDK\r\n\r\n    `sudo mkdir -p /usr/local/java `\r\n\r\n3. Copy the file to the directory (you should be in that file path)\r\n\r\n    ` sudo cp -r jdk-8u45-linux-x64.tar.gz /usr/local/java/`\r\n\r\n4. Extract the file \r\n\r\n     `sudo tar xvzf jdk-8u45-linux-x64.tar.gz`\r\n\r\n5. You should add this to your PATH now. To do that:\r\n\r\n   a. Open /etc/profile : `sudo gedit /etc/profile`\r\n\r\n  b. Scroll down (the end) and add the path where your jdk was installed\r\n\r\n   ` JAVA_HOME=/usr/local/java/jdk1.8.0_45\r\nPATH=$PATH:$HOME/bin:$JAVA_HOME/bin\r\nexport JAVA_HOME\r\nexport PATH`\r\n\r\n Save and exit\r\n\r\n6.  Inform your Linux system where your Oracle Java JDK/JRE is located.\r\n\r\n a. Notify the system that Oracle Java JRE is available for use\r\n\r\n `sudo update-alternatives --install &quot;/usr/bin/java&quot; &quot;java&quot; &quot;/usr/local/java/jdk1.8.0_45/bin/java&quot; 1 `\r\n\r\n b. Notify the system that Oracle Java JDK is available for use\r\n\r\n `sudo update-alternatives --install &quot;/usr/bin/javac&quot; &quot;javac&quot; &quot;/usr/local/java/jdk1.8.0_45/bin/javac&quot; 1 `\r\n\r\n c. Notify the system that Oracle Java Web start is available for use\r\n\r\n `sudo update-alternatives --install &quot;/usr/bin/javaws&quot; &quot;javaws&quot; &quot;/usr/local/java/jdk1.8.0_20/bin/javaws&quot; 1 `\r\n\r\n7.  Inform your Linux system that Oracle Java JDK/JRE must be the default Java.\r\n\r\n a. Set the java runtime environment for the system\r\n\r\n `sudo update-alternatives --set java /usr/local/java/jdk1.8.0_45/bin/java`\r\n\r\n b. Set the javac compiler for the system\r\n\r\n `sudo update-alternatives --set javac /usr/local/java/jdk1.8.0_45/bin/javac`\r\n\r\n c. Set Java Web start for the system\r\n\r\n `sudo update-alternatives --set javaws /usr/local/java/jdk1.8.0_20/bin/javaws `\r\n\r\n8. Reload your system wide PATH\r\n\r\n `source /etc/profile`\r\n\r\n9. Check the new version and you&#39;re done!\r\n\r\n     `java -version `","title":"How to remove old version of Java and install new version","body":"<ol>\n<li><p>To remove OpenJDK (the one you've already installed)</p>\n\n<p><code>sudo apt-get purge openjdk-\\*</code></p></li>\n<li><p>Make a new directory for your new JDK</p>\n\n<p><code>sudo mkdir -p /usr/local/java</code></p></li>\n<li><p>Copy the file to the directory (you should be in that file path)</p>\n\n<p><code>sudo cp -r jdk-8u45-linux-x64.tar.gz /usr/local/java/</code></p></li>\n<li><p>Extract the file </p>\n\n<p><code>sudo tar xvzf jdk-8u45-linux-x64.tar.gz</code></p></li>\n<li><p>You should add this to your PATH now. To do that:</p>\n\n<p>a. Open /etc/profile : <code>sudo gedit /etc/profile</code></p>\n\n<p>b. Scroll down (the end) and add the path where your jdk was installed</p>\n\n<p><code>JAVA_HOME=/usr/local/java/jdk1.8.0_45\nPATH=$PATH:$HOME/bin:$JAVA_HOME/bin\nexport JAVA_HOME\nexport PATH</code></p>\n\n<p>Save and exit</p></li>\n<li><p>Inform your Linux system where your Oracle Java JDK/JRE is located.</p>\n\n<p>a. Notify the system that Oracle Java JRE is available for use</p>\n\n<p><code>sudo update-alternatives --install \"/usr/bin/java\" \"java\" \"/usr/local/java/jdk1.8.0_45/bin/java\" 1</code></p>\n\n<p>b. Notify the system that Oracle Java JDK is available for use</p>\n\n<p><code>sudo update-alternatives --install \"/usr/bin/javac\" \"javac\" \"/usr/local/java/jdk1.8.0_45/bin/javac\" 1</code></p>\n\n<p>c. Notify the system that Oracle Java Web start is available for use</p>\n\n<p><code>sudo update-alternatives --install \"/usr/bin/javaws\" \"javaws\" \"/usr/local/java/jdk1.8.0_20/bin/javaws\" 1</code></p></li>\n<li><p>Inform your Linux system that Oracle Java JDK/JRE must be the default Java.</p>\n\n<p>a. Set the java runtime environment for the system</p>\n\n<p><code>sudo update-alternatives --set java /usr/local/java/jdk1.8.0_45/bin/java</code></p>\n\n<p>b. Set the javac compiler for the system</p>\n\n<p><code>sudo update-alternatives --set javac /usr/local/java/jdk1.8.0_45/bin/javac</code></p>\n\n<p>c. Set Java Web start for the system</p>\n\n<p><code>sudo update-alternatives --set javaws /usr/local/java/jdk1.8.0_20/bin/javaws</code></p></li>\n<li><p>Reload your system wide PATH</p>\n\n<p><code>source /etc/profile</code></p></li>\n<li><p>Check the new version and you're done!</p>\n\n<p><code>java -version</code></p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1160047,"reputation":1188,"user_id":1139754,"display_name":"ChaitanyaBhatt"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1504817982,"creation_date":1504817982,"answer_id":46105002,"question_id":29964042,"body_markdown":"On Centos/Redhat\r\n\r\nFirst do : ```rpm -qa|grep jdk```\r\nAnd then : ```rpm -e &lt;the version which you dont want&gt;```","title":"How to remove old version of Java and install new version","body":"<p>On Centos/Redhat</p>\n\n<p>First do : <code>rpm -qa|grep jdk</code>\nAnd then : <code>rpm -e &lt;the version which you dont want&gt;</code></p>\n"},{"tags":[],"owner":{"account_id":5129806,"reputation":151,"user_id":4110424,"display_name":"Rishikesh Fanse"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1580826755,"creation_date":1580826755,"answer_id":60059599,"question_id":29964042,"body_markdown":"I had java 7 installed on my ubuntu machine and wanted java 8. For that i followed the following steps\r\n\r\n 1. purge the older with `sudo apt-get purge openjdk-\\*`\r\n 2. Add repository `sudo add-apt-repository ppa:openjdk-r/ppa`\r\n 3. Update the packages `sudo apt-get update`\r\n 4. Install java 8 with `sudo apt-get install openjdk-8-jdk`\r\n 5. To check list of java versions installed do`sudo update-java-alternatives --list`\r\n 6. Select default java for **java** `sudo update-alternatives --config java`\r\n 7. Select default java for **javac** `sudo update-alternatives --config javac`\r\n 8. check with `java -version` and `javac -version` to check if update version is installed\r\n\r\nI referred following link [Install OpenJDK8 on Unbuntu Trusty][1]\r\n\r\nHope this helps!\r\n\r\n\r\n  [1]: https://www.geofis.org/en/install/install-on-linux/install-openjdk-8-on-ubuntu-trusty/","title":"How to remove old version of Java and install new version","body":"<p>I had java 7 installed on my ubuntu machine and wanted java 8. For that i followed the following steps</p>\n\n<ol>\n<li>purge the older with <code>sudo apt-get purge openjdk-\\*</code></li>\n<li>Add repository <code>sudo add-apt-repository ppa:openjdk-r/ppa</code></li>\n<li>Update the packages <code>sudo apt-get update</code></li>\n<li>Install java 8 with <code>sudo apt-get install openjdk-8-jdk</code></li>\n<li>To check list of java versions installed do<code>sudo update-java-alternatives --list</code></li>\n<li>Select default java for <strong>java</strong> <code>sudo update-alternatives --config java</code></li>\n<li>Select default java for <strong>javac</strong> <code>sudo update-alternatives --config javac</code></li>\n<li>check with <code>java -version</code> and <code>javac -version</code> to check if update version is installed</li>\n</ol>\n\n<p>I referred following link <a href=\"https://www.geofis.org/en/install/install-on-linux/install-openjdk-8-on-ubuntu-trusty/\" rel=\"nofollow noreferrer\">Install OpenJDK8 on Unbuntu Trusty</a></p>\n\n<p>Hope this helps!</p>\n"},{"tags":[],"owner":{"account_id":4666504,"reputation":13,"user_id":5427219,"display_name":"marcel uitnederland"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671229518,"creation_date":1670917889,"answer_id":74781540,"question_id":29964042,"body_markdown":"I went to [this article][1], the final option did it for me:\r\n\r\n&gt;A final option for you to consider is `yum remove libpcap`, see how many packages it wants to remove (`yum` won&#39;t actually remove anything until you hit the Y button and press enter), since you may be able to remove these packages and use yum, if it turns out you couldn&#39;t after all, you can roll back with `yum history undo` command (I don&#39;t remember in what version of yum this was implemented in yum, so check first if this sub command is available to you). Also, make sure that you got your repositories pointing to the repos which has these files available.\r\n\r\nAfter that I could remove my old jdk with:\r\n\r\n```\r\nsudo rpm -e java-1.8.0-openjdk-1.8.0.352.b08-2.el7_9\r\n```\r\n\r\n  [1]: https://unix.stackexchange.com/questions/139539/make-rpm-satisfy-dependency-requirements-of-other-installed-packages","title":"How to remove old version of Java and install new version","body":"<p>I went to <a href=\"https://unix.stackexchange.com/questions/139539/make-rpm-satisfy-dependency-requirements-of-other-installed-packages\">this article</a>, the final option did it for me:</p>\n<blockquote>\n<p>A final option for you to consider is <code>yum remove libpcap</code>, see how many packages it wants to remove (<code>yum</code> won't actually remove anything until you hit the Y button and press enter), since you may be able to remove these packages and use yum, if it turns out you couldn't after all, you can roll back with <code>yum history undo</code> command (I don't remember in what version of yum this was implemented in yum, so check first if this sub command is available to you). Also, make sure that you got your repositories pointing to the repos which has these files available.</p>\n</blockquote>\n<p>After that I could remove my old jdk with:</p>\n<pre><code>sudo rpm -e java-1.8.0-openjdk-1.8.0.352.b08-2.el7_9\n</code></pre>\n"}],"owner":{"account_id":116285,"reputation":8397,"user_id":304974,"accept_rate":79,"display_name":"Programmer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73574,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":29964538,"answer_count":5,"score":19,"last_activity_date":1671229518,"creation_date":1430386338,"question_id":29964042,"body_markdown":"I have a Linux box on which Java 1.7 is installed:\r\n\r\n    #java -version\r\n    java version &quot;1.7.0_09-icedtea&quot;\r\n    OpenJDK Runtime Environment (rhel-2.3.4.1.el6_3-x86_64)\r\n    OpenJDK 64-Bit Server VM (build 23.2-b09, mixed mode)\r\n\r\nBut for some new tool I need to install the [jdk-8u45-linux-x64.tar.gz][1]\r\n\r\nSo how can I remove old one and install the new one?\r\n\r\n\r\n  [1]: http://download.oracle.com/otn-pub/java/jdk/8u45-b14/jdk-8u45-linux-x64.tar.gz","title":"How to remove old version of Java and install new version","body":"<p>I have a Linux box on which Java 1.7 is installed:</p>\n\n<pre><code>#java -version\njava version \"1.7.0_09-icedtea\"\nOpenJDK Runtime Environment (rhel-2.3.4.1.el6_3-x86_64)\nOpenJDK 64-Bit Server VM (build 23.2-b09, mixed mode)\n</code></pre>\n\n<p>But for some new tool I need to install the <a href=\"http://download.oracle.com/otn-pub/java/jdk/8u45-b14/jdk-8u45-linux-x64.tar.gz\">jdk-8u45-linux-x64.tar.gz</a></p>\n\n<p>So how can I remove old one and install the new one?</p>\n"},{"tags":["java","bean-io","typehandler"],"answers":[{"tags":[],"owner":{"account_id":2300510,"reputation":2416,"user_id":2020886,"display_name":"nicoschl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671229477,"creation_date":1671229477,"answer_id":74830331,"question_id":32008975,"body_markdown":"You can do the following:\r\n\r\nCreate an instance of your `AmountHandler` for every variation you require in the same place where you define your `StreamBuilder`, for example:\r\n\r\n    AmountHandler amountHandler10_2 = new AmountHandler(10, 2);\r\n    AmountHandler amountHandler3_1 = new AmountHandler(3, 1);\r\n\r\nYou then register each instance with the `StreamBuilder`:\r\n\r\n    final StreamBuilder builder = new StreamBuilder(&quot;builder_name&quot;)\r\n      .format(&quot;xml&quot;)\r\n      .addTypeHandler(&quot;amountHandler10_2&quot;, amountHandler10_2)\r\n      .addTypeHandler(&quot;amountHandler3_1&quot;, amountHandler3_1)\r\n      .addRecord(CustomField.class);\r\n\r\n\r\nThen you reference the appropriate type handler on each `@Field`, using the name you have given the instance when registering it with the `StreamBuilder` and using the `handlerName` property instead of `handlerClass`:\r\n\r\n    @Field(ordinal = 2, length = 8, padding = &#39;0&#39;, align = Align.RIGHT, handlerName = &quot;amountHandler10_2&quot;)\r\n    private BigDecimal firstAmount;\r\n    @Field(ordinal = 3, length = 8, padding = &#39;0&#39;, align = Align.RIGHT, handlerName = &quot;amountHandler3_1&quot;)\r\n    private BigDecimal secondAmount;\r\n\r\nPS: I see this was asked several years ago, somehow it showed up on my RSS feed as a question today. So, I thought, let me answer it in any case, should someone else come across this question.\r\n\r\nA similar question and answer: [BeanIO: Format number with fixed length for integer and decimal places without separator][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/70117545/2020886","title":"BeanIO - Set Properties for @Field to get new instance of ConfigurableTypeHandler","body":"<p>You can do the following:</p>\n<p>Create an instance of your <code>AmountHandler</code> for every variation you require in the same place where you define your <code>StreamBuilder</code>, for example:</p>\n<pre><code>AmountHandler amountHandler10_2 = new AmountHandler(10, 2);\nAmountHandler amountHandler3_1 = new AmountHandler(3, 1);\n</code></pre>\n<p>You then register each instance with the <code>StreamBuilder</code>:</p>\n<pre><code>final StreamBuilder builder = new StreamBuilder(&quot;builder_name&quot;)\n  .format(&quot;xml&quot;)\n  .addTypeHandler(&quot;amountHandler10_2&quot;, amountHandler10_2)\n  .addTypeHandler(&quot;amountHandler3_1&quot;, amountHandler3_1)\n  .addRecord(CustomField.class);\n</code></pre>\n<p>Then you reference the appropriate type handler on each <code>@Field</code>, using the name you have given the instance when registering it with the <code>StreamBuilder</code> and using the <code>handlerName</code> property instead of <code>handlerClass</code>:</p>\n<pre><code>@Field(ordinal = 2, length = 8, padding = '0', align = Align.RIGHT, handlerName = &quot;amountHandler10_2&quot;)\nprivate BigDecimal firstAmount;\n@Field(ordinal = 3, length = 8, padding = '0', align = Align.RIGHT, handlerName = &quot;amountHandler3_1&quot;)\nprivate BigDecimal secondAmount;\n</code></pre>\n<p>PS: I see this was asked several years ago, somehow it showed up on my RSS feed as a question today. So, I thought, let me answer it in any case, should someone else come across this question.</p>\n<p>A similar question and answer: <a href=\"https://stackoverflow.com/a/70117545/2020886\">BeanIO: Format number with fixed length for integer and decimal places without separator</a></p>\n"}],"owner":{"account_id":5832971,"reputation":11,"user_id":4596920,"display_name":"Maraider"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1591,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1671229477,"creation_date":1439551701,"question_id":32008975,"body_markdown":"I am using BeanIO to write a fixed format file, which should contain some custom fields. These fields should use the same basic handler class, but they have slightly different parameters. \r\n\r\nI have created a custom `@Record` that stores the data. Example:\r\n\r\n    @Record(minOccurs = 0, maxOccurs = -1)\r\n    @Fields({\r\n        @Field(name = &quot;recordType&quot;, ordinal = 1, length = 2, rid = true, literal = &quot;00&quot;)})         \r\n    public class CustomField{\r\n        @Field(ordinal = 2, length = 8, padding = &#39;0&#39;, align = Align.RIGHT, handlerclass = AmountHandler.class)\r\n        private BigDecimal firstAmount;\r\n\r\n        @Field(ordinal = 3, length = 8, padding = &#39;0&#39;, align = Align.RIGHT, handlerclass = AmountHandler.class)\r\n        private BigDecimal secondAmount;\r\n    }\r\n\r\nI now want to customize the handlerclass based on the field that is going to use it. So I created this class:\r\n\r\n    public class AmountHandler implements ConfigurableTypeHandler{\r\n        private int fraction, length;\r\n\r\n        public AmountHandler (int length, int fraction){\r\n            this.length = length;\r\n            this.fraction = fraction;\r\n        }\r\n\r\n        @Override\r\n        public TypeHandler newInstance(Properties properties) throws IllegalArgumentException {\r\n            length = Integer.parseInt(properties.getProperty(&quot;length&quot;));\r\n            fraction = Integer.parseInt(properties.getProperty(&quot;fraction&quot;));\r\n            return new CustomHandler(length, fraction);;\r\n        }\r\n        //parse and format are not yet implemented. \r\n        @Override\r\n        public Object parse(String text) throws TypeConversionException { return null;}\r\n\r\n        @Override\r\n        public String format(Object value) { return null; }\r\n\r\n        @Override\r\n        public Class&lt;?&gt; getType() { return BigDecimal.class; }\r\n    }\r\n  \r\nHowever, I can&#39;t seem to find any way to set the properties for each field.\r\nHow can I do this? Is there a way to define properties on a `@Field` type? Is there a better way to define a handler class for Objects with custom parameters?","title":"BeanIO - Set Properties for @Field to get new instance of ConfigurableTypeHandler","body":"<p>I am using BeanIO to write a fixed format file, which should contain some custom fields. These fields should use the same basic handler class, but they have slightly different parameters. </p>\n\n<p>I have created a custom <code>@Record</code> that stores the data. Example:</p>\n\n<pre><code>@Record(minOccurs = 0, maxOccurs = -1)\n@Fields({\n    @Field(name = \"recordType\", ordinal = 1, length = 2, rid = true, literal = \"00\")})         \npublic class CustomField{\n    @Field(ordinal = 2, length = 8, padding = '0', align = Align.RIGHT, handlerclass = AmountHandler.class)\n    private BigDecimal firstAmount;\n\n    @Field(ordinal = 3, length = 8, padding = '0', align = Align.RIGHT, handlerclass = AmountHandler.class)\n    private BigDecimal secondAmount;\n}\n</code></pre>\n\n<p>I now want to customize the handlerclass based on the field that is going to use it. So I created this class:</p>\n\n<pre><code>public class AmountHandler implements ConfigurableTypeHandler{\n    private int fraction, length;\n\n    public AmountHandler (int length, int fraction){\n        this.length = length;\n        this.fraction = fraction;\n    }\n\n    @Override\n    public TypeHandler newInstance(Properties properties) throws IllegalArgumentException {\n        length = Integer.parseInt(properties.getProperty(\"length\"));\n        fraction = Integer.parseInt(properties.getProperty(\"fraction\"));\n        return new CustomHandler(length, fraction);;\n    }\n    //parse and format are not yet implemented. \n    @Override\n    public Object parse(String text) throws TypeConversionException { return null;}\n\n    @Override\n    public String format(Object value) { return null; }\n\n    @Override\n    public Class&lt;?&gt; getType() { return BigDecimal.class; }\n}\n</code></pre>\n\n<p>However, I can't seem to find any way to set the properties for each field.\nHow can I do this? Is there a way to define properties on a <code>@Field</code> type? Is there a better way to define a handler class for Objects with custom parameters?</p>\n"},{"tags":["java","spring","jackson","openapi-generator"],"answers":[{"tags":[],"owner":{"account_id":9235242,"reputation":1488,"user_id":6860078,"display_name":"tbatch"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671229476,"creation_date":1671229476,"answer_id":74830330,"question_id":74814730,"body_markdown":"As of right now, the java client generator (and its libraries) doesn&#39;t [currently support polymorphism](https://github.com/OpenAPITools/openapi-generator/blob/master/docs/generators/java.md#schema-support-feature), but the `Spring` [generator does](https://github.com/OpenAPITools/openapi-generator/blob/master/docs/generators/spring.md).\r\n\r\n|**Spring**|**Java**|\r\n|:---:|:---:|\r\n| [![Spring schema support structure][1]][1] | [![enter image description here][2]][2]\r\n\r\nThere are several options to work around this:\r\n1.  You can force the webclient to implement the interface generated by the Spring generator by using the `x-implements` vendor extension.  However, this would require you to use two copies of the same schema, one with and one without the vendor extension.  \r\n2.  you can disable the model generation for your webclient and have it use all of the models generated by the spring generator.  \r\n\r\nHere&#39;s an example of your schema with the x-implements extension.  I took the liberty of cleaning it up a bit as well (I hate those inner classes).\r\n```yml\r\ncomponents:\r\n  schemas:\r\n    Section:\r\n      type: object\r\n      properties:\r\n        items:\r\n          type: array\r\n          items:\r\n            $ref: &quot;#/components/schemas/SectionItem&quot;\r\n    SectionItem:\r\n      oneOf:\r\n        - $ref: &#39;#/components/schemas/SectionItemInput&#39;\r\n        - $ref: &#39;#/components/schemas/SectionItemOutput&#39;\r\n      discriminator:\r\n        propertyName: type\r\n    SectionItemBase:\r\n      required:\r\n        - type\r\n      type: object\r\n      properties:\r\n        type:\r\n          type: string\r\n        name:\r\n          type: string\r\n      discriminator:\r\n        propertyName: type\r\n    SectionItemInput:\r\n      type: object\r\n      allOf:\r\n        - $ref: &#39;#/components/schemas/SectionItemBase&#39;\r\n        - type: object\r\n          title: SectionItemInputDetails\r\n          properties:\r\n            input:\r\n              type: string\r\n      x-implements:\r\n        - &#39;generated.model.spring.SectionItem&#39;\r\n    SectionItemOutput:\r\n      type: object\r\n      allOf:\r\n        - $ref: &#39;#/components/schemas/SectionItemBase&#39;\r\n        - type: object\r\n          title: SectionItemOutputDetails\r\n          properties:\r\n            output:\r\n              type: string\r\n      x-implements:\r\n        - &#39;generated.model.spring.SectionItem&#39;\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/o5X0L.png\r\n  [2]: https://i.stack.imgur.com/AQ1Kh.png","title":"OpenAPI Generator - Java Client generating different model than Spring Server","body":"<p>As of right now, the java client generator (and its libraries) doesn't <a href=\"https://github.com/OpenAPITools/openapi-generator/blob/master/docs/generators/java.md#schema-support-feature\" rel=\"nofollow noreferrer\">currently support polymorphism</a>, but the <code>Spring</code> <a href=\"https://github.com/OpenAPITools/openapi-generator/blob/master/docs/generators/spring.md\" rel=\"nofollow noreferrer\">generator does</a>.</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: center;\"><strong>Spring</strong></th>\n<th style=\"text-align: center;\"><strong>Java</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\"><a href=\"https://i.stack.imgur.com/o5X0L.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/o5X0L.png\" alt=\"Spring schema support structure\" /></a></td>\n<td style=\"text-align: center;\"><a href=\"https://i.stack.imgur.com/AQ1Kh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AQ1Kh.png\" alt=\"enter image description here\" /></a></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>There are several options to work around this:</p>\n<ol>\n<li>You can force the webclient to implement the interface generated by the Spring generator by using the <code>x-implements</code> vendor extension.  However, this would require you to use two copies of the same schema, one with and one without the vendor extension.</li>\n<li>you can disable the model generation for your webclient and have it use all of the models generated by the spring generator.</li>\n</ol>\n<p>Here's an example of your schema with the x-implements extension.  I took the liberty of cleaning it up a bit as well (I hate those inner classes).</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>components:\n  schemas:\n    Section:\n      type: object\n      properties:\n        items:\n          type: array\n          items:\n            $ref: &quot;#/components/schemas/SectionItem&quot;\n    SectionItem:\n      oneOf:\n        - $ref: '#/components/schemas/SectionItemInput'\n        - $ref: '#/components/schemas/SectionItemOutput'\n      discriminator:\n        propertyName: type\n    SectionItemBase:\n      required:\n        - type\n      type: object\n      properties:\n        type:\n          type: string\n        name:\n          type: string\n      discriminator:\n        propertyName: type\n    SectionItemInput:\n      type: object\n      allOf:\n        - $ref: '#/components/schemas/SectionItemBase'\n        - type: object\n          title: SectionItemInputDetails\n          properties:\n            input:\n              type: string\n      x-implements:\n        - 'generated.model.spring.SectionItem'\n    SectionItemOutput:\n      type: object\n      allOf:\n        - $ref: '#/components/schemas/SectionItemBase'\n        - type: object\n          title: SectionItemOutputDetails\n          properties:\n            output:\n              type: string\n      x-implements:\n        - 'generated.model.spring.SectionItem'\n</code></pre>\n"}],"owner":{"account_id":25731249,"reputation":41,"user_id":19486800,"display_name":"bernd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1160,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671229476,"creation_date":1671121883,"question_id":74814730,"body_markdown":"I&#39;m trying to create the server and a client from the same api spec (v3.0.2) by using the openapi-generator-maven-plugin (v6.2.1).\r\n\r\nFor the server i&#39;m using\r\n\r\n```\r\n&lt;generatorName&gt;spring&lt;/generatorName&gt;\r\n&lt;library&gt;spring-boot&lt;/library&gt;\r\n```\r\nand for the client\r\n\r\n```\r\n&lt;generatorName&gt;java&lt;/generatorName&gt;\r\n&lt;library&gt;webclient&lt;/library&gt;\r\n```\r\nIn the api spec I&#39;m having an object with a list of items.\r\nThe items can be one of two types.\r\n\r\n```\r\n   Section:\r\n      type: object\r\n      properties:\r\n        items:\r\n          type: array\r\n          items:\r\n            oneOf:\r\n            - $ref: &#39;#/components/schemas/SectionItemInput&#39;\r\n            - $ref: &#39;#/components/schemas/SectionItemOutput&#39;\r\n```\r\nFor the two types I added a base class with a discriminator property set to &#39;type&#39;\r\n\r\n```\r\n    SectionItemBase:\r\n      required:\r\n      - type\r\n      type: object\r\n      properties:\r\n        type:\r\n          type: string\r\n        name:\r\n          type: string\r\n      discriminator:\r\n        propertyName: type\r\n```\r\nFinally the two types look like this\r\n\r\n```\r\n    SectionItemInput:\r\n      type: object\r\n      allOf:\r\n      - $ref: &#39;#/components/schemas/SectionItemBase&#39;\r\n      - type: object\r\n        properties:\r\n          input:\r\n            type: string\r\n\r\n    SectionItemOutput:\r\n      type: object\r\n      allOf:\r\n      - $ref: &#39;#/components/schemas/SectionItemBase&#39;\r\n      - type: object\r\n        properties:\r\n          output:\r\n            type: string\r\n```\r\nAfter building the server, I get these models\r\n\r\nSection.java\r\n```\r\npublic class Section {\r\n  @JsonProperty(&quot;items&quot;)\r\n  @Valid\r\n  private List&lt;SectionItemsInner&gt; items = null;\r\n  ...\r\n```\r\nSectionItemsInner.java\r\n\r\n```\r\n@JsonIgnoreProperties(\r\n  value = &quot;type&quot;, // ignore manually set type, it will be automatically generated by Jackson during serialization\r\n  allowSetters = true // allows the type to be set during deserialization\r\n)\r\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = &quot;type&quot;, visible = true)\r\n@JsonSubTypes({\r\n  @JsonSubTypes.Type(value = SectionItemInput.class, name = &quot;SectionItemInput&quot;),\r\n  @JsonSubTypes.Type(value = SectionItemOutput.class, name = &quot;SectionItemOutput&quot;)\r\n})\r\n\r\npublic interface SectionItemsInner {\r\n    public String getType();\r\n}\r\n```\r\nSectionItemBase.java\r\n\r\n```\r\n@JsonIgnoreProperties(\r\n  value = &quot;type&quot;, // ignore manually set type, it will be automatically generated by Jackson during serialization\r\n  allowSetters = true // allows the type to be set during deserialization\r\n)\r\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = &quot;type&quot;, visible = true)\r\n@JsonSubTypes({\r\n  @JsonSubTypes.Type(value = SectionItemInput.class, name = &quot;SectionItemInput&quot;),\r\n  @JsonSubTypes.Type(value = SectionItemOutput.class, name = &quot;SectionItemOutput&quot;)\r\n})\r\n\r\npublic class SectionItemBase { ...\r\n```\r\nSectionItemInput.java\r\n```\r\npublic class SectionItemInput extends SectionItemBase implements SectionItemsInner { ...\r\n```\r\nSectionItemOutput.java\r\n```\r\npublic class SectionItemOutput extends SectionItemBase implements SectionItemsInner { ...\r\n```\r\nThis seems fine.\r\n\r\nBut when I build the client I get\r\n\r\nSection.java\r\n\r\n```\r\npublic class Section {\r\n  public static final String JSON_PROPERTY_ITEMS = &quot;items&quot;;\r\n  private List&lt;SectionItemsInner&gt; items = null;\r\n  ...\r\n```\r\nUp until here, it also seems fine. But starting with the SectionItemsInner it differs.\r\n\r\nSectionItemsInner.java\r\n\r\n```\r\n@JsonTypeName(&quot;Section_items_inner&quot;)\r\n@JsonIgnoreProperties(\r\n  value = &quot;type&quot;, // ignore manually set type, it will be automatically generated by Jackson during serialization\r\n  allowSetters = true // allows the type to be set during deserialization\r\n)\r\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = &quot;type&quot;, visible = true)\r\n@JsonSubTypes({\r\n  @JsonSubTypes.Type(value = SectionItemInput.class, name = &quot;SectionItemInput&quot;),\r\n  @JsonSubTypes.Type(value = SectionItemOutput.class, name = &quot;SectionItemOutput&quot;),\r\n})\r\n\r\npublic class SectionItemsInner { ...\r\n```\r\nThe generator creates a class instead of an interface like with the server generator.\r\nAlso it has all the properties of the type whichever comes last in the spec for the Section schema.\r\n\r\nSectionItemBase.java\r\n\r\n```\r\n@JsonIgnoreProperties(\r\n  value = &quot;type&quot;, // ignore manually set type, it will be automatically generated by Jackson during serialization\r\n  allowSetters = true // allows the type to be set during deserialization\r\n)\r\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = &quot;type&quot;, visible = true)\r\n@JsonSubTypes({\r\n  @JsonSubTypes.Type(value = SectionItemInput.class, name = &quot;SectionItemInput&quot;),\r\n  @JsonSubTypes.Type(value = SectionItemOutput.class, name = &quot;SectionItemOutput&quot;),\r\n})\r\n\r\npublic class SectionItemBase { ...\r\n```\r\nSectionItemBase has just the base properties, but there is no relationship between the SectionItemsInner and the SectionItemBase.\r\n\r\nSectionItemInput.java\r\n\r\n```\r\n@JsonIgnoreProperties(\r\n  value = &quot;type&quot;, // ignore manually set type, it will be automatically generated by Jackson during serialization\r\n  allowSetters = true // allows the type to be set during deserialization\r\n)\r\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = &quot;type&quot;, visible = true)\r\n\r\npublic class SectionItemInput extends SectionItemBase { ...\r\n```\r\nSectionItemInput extends SectionItemBase but also has no relation to SectionItemsInner.\r\n\r\nAfter creating the server I wrote a body for a sample request\r\n\r\n```\r\n{\r\n  &quot;items&quot;: [\r\n    {\r\n      &quot;type&quot;: &quot;SectionItemOutput&quot;,\r\n      &quot;name&quot;: &quot;output&quot;,\r\n      &quot;output&quot;: &quot;TestOutput&quot;\r\n    },\r\n    {\r\n      &quot;type&quot;: &quot;SectionItemInput&quot;,\r\n      &quot;name&quot;: &quot;input&quot;,\r\n      &quot;output&quot;: &quot;TestInput&quot;\r\n    }\r\n  ]\r\n}\r\n```\r\nWhen I post this to the server, it gets parsed correctly and I can do something with it.\r\nBut when I try to parse this on the client\r\n\r\n```\r\nInputStream json = ...\r\nObjectMapper mapper = new ObjectMapper();\r\nSection s = mapper.readValue(json, Section .class);\r\n```\r\nI get an error\r\n```\r\ncom.fasterxml.jackson.databind.exc.InvalidTypeIdException: Could not resolve type id &#39;SectionItemOutput&#39;\r\nas a subtype of `org.openapitools.client.model.SectionItemsInner`:\r\nClass `org.openapitools.client.model.SectionItemOutput` not subtype of\r\n`org.openapitools.client.model.SectionItemsInner`\r\n   at [Source: (BufferedInputStream); line: 4, column: 16] (through reference chain:\r\n      org.openapitools.client.model.Section[&quot;items&quot;]-&gt;java.util.ArrayList[0])\r\n```\r\n\r\nI&#39;m very sorry for this long post, but it seems that I&#39;m stucked.\r\nI tried a few different other libraries (okhttp-gson, resttemplate, webclient) but none of them generates code which is compatible.\r\n\r\nThanks for any help or hint, bernd","title":"OpenAPI Generator - Java Client generating different model than Spring Server","body":"<p>I'm trying to create the server and a client from the same api spec (v3.0.2) by using the openapi-generator-maven-plugin (v6.2.1).</p>\n<p>For the server i'm using</p>\n<pre><code>&lt;generatorName&gt;spring&lt;/generatorName&gt;\n&lt;library&gt;spring-boot&lt;/library&gt;\n</code></pre>\n<p>and for the client</p>\n<pre><code>&lt;generatorName&gt;java&lt;/generatorName&gt;\n&lt;library&gt;webclient&lt;/library&gt;\n</code></pre>\n<p>In the api spec I'm having an object with a list of items.\nThe items can be one of two types.</p>\n<pre><code>   Section:\n      type: object\n      properties:\n        items:\n          type: array\n          items:\n            oneOf:\n            - $ref: '#/components/schemas/SectionItemInput'\n            - $ref: '#/components/schemas/SectionItemOutput'\n</code></pre>\n<p>For the two types I added a base class with a discriminator property set to 'type'</p>\n<pre><code>    SectionItemBase:\n      required:\n      - type\n      type: object\n      properties:\n        type:\n          type: string\n        name:\n          type: string\n      discriminator:\n        propertyName: type\n</code></pre>\n<p>Finally the two types look like this</p>\n<pre><code>    SectionItemInput:\n      type: object\n      allOf:\n      - $ref: '#/components/schemas/SectionItemBase'\n      - type: object\n        properties:\n          input:\n            type: string\n\n    SectionItemOutput:\n      type: object\n      allOf:\n      - $ref: '#/components/schemas/SectionItemBase'\n      - type: object\n        properties:\n          output:\n            type: string\n</code></pre>\n<p>After building the server, I get these models</p>\n<p>Section.java</p>\n<pre><code>public class Section {\n  @JsonProperty(&quot;items&quot;)\n  @Valid\n  private List&lt;SectionItemsInner&gt; items = null;\n  ...\n</code></pre>\n<p>SectionItemsInner.java</p>\n<pre><code>@JsonIgnoreProperties(\n  value = &quot;type&quot;, // ignore manually set type, it will be automatically generated by Jackson during serialization\n  allowSetters = true // allows the type to be set during deserialization\n)\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = &quot;type&quot;, visible = true)\n@JsonSubTypes({\n  @JsonSubTypes.Type(value = SectionItemInput.class, name = &quot;SectionItemInput&quot;),\n  @JsonSubTypes.Type(value = SectionItemOutput.class, name = &quot;SectionItemOutput&quot;)\n})\n\npublic interface SectionItemsInner {\n    public String getType();\n}\n</code></pre>\n<p>SectionItemBase.java</p>\n<pre><code>@JsonIgnoreProperties(\n  value = &quot;type&quot;, // ignore manually set type, it will be automatically generated by Jackson during serialization\n  allowSetters = true // allows the type to be set during deserialization\n)\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = &quot;type&quot;, visible = true)\n@JsonSubTypes({\n  @JsonSubTypes.Type(value = SectionItemInput.class, name = &quot;SectionItemInput&quot;),\n  @JsonSubTypes.Type(value = SectionItemOutput.class, name = &quot;SectionItemOutput&quot;)\n})\n\npublic class SectionItemBase { ...\n</code></pre>\n<p>SectionItemInput.java</p>\n<pre><code>public class SectionItemInput extends SectionItemBase implements SectionItemsInner { ...\n</code></pre>\n<p>SectionItemOutput.java</p>\n<pre><code>public class SectionItemOutput extends SectionItemBase implements SectionItemsInner { ...\n</code></pre>\n<p>This seems fine.</p>\n<p>But when I build the client I get</p>\n<p>Section.java</p>\n<pre><code>public class Section {\n  public static final String JSON_PROPERTY_ITEMS = &quot;items&quot;;\n  private List&lt;SectionItemsInner&gt; items = null;\n  ...\n</code></pre>\n<p>Up until here, it also seems fine. But starting with the SectionItemsInner it differs.</p>\n<p>SectionItemsInner.java</p>\n<pre><code>@JsonTypeName(&quot;Section_items_inner&quot;)\n@JsonIgnoreProperties(\n  value = &quot;type&quot;, // ignore manually set type, it will be automatically generated by Jackson during serialization\n  allowSetters = true // allows the type to be set during deserialization\n)\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = &quot;type&quot;, visible = true)\n@JsonSubTypes({\n  @JsonSubTypes.Type(value = SectionItemInput.class, name = &quot;SectionItemInput&quot;),\n  @JsonSubTypes.Type(value = SectionItemOutput.class, name = &quot;SectionItemOutput&quot;),\n})\n\npublic class SectionItemsInner { ...\n</code></pre>\n<p>The generator creates a class instead of an interface like with the server generator.\nAlso it has all the properties of the type whichever comes last in the spec for the Section schema.</p>\n<p>SectionItemBase.java</p>\n<pre><code>@JsonIgnoreProperties(\n  value = &quot;type&quot;, // ignore manually set type, it will be automatically generated by Jackson during serialization\n  allowSetters = true // allows the type to be set during deserialization\n)\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = &quot;type&quot;, visible = true)\n@JsonSubTypes({\n  @JsonSubTypes.Type(value = SectionItemInput.class, name = &quot;SectionItemInput&quot;),\n  @JsonSubTypes.Type(value = SectionItemOutput.class, name = &quot;SectionItemOutput&quot;),\n})\n\npublic class SectionItemBase { ...\n</code></pre>\n<p>SectionItemBase has just the base properties, but there is no relationship between the SectionItemsInner and the SectionItemBase.</p>\n<p>SectionItemInput.java</p>\n<pre><code>@JsonIgnoreProperties(\n  value = &quot;type&quot;, // ignore manually set type, it will be automatically generated by Jackson during serialization\n  allowSetters = true // allows the type to be set during deserialization\n)\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = &quot;type&quot;, visible = true)\n\npublic class SectionItemInput extends SectionItemBase { ...\n</code></pre>\n<p>SectionItemInput extends SectionItemBase but also has no relation to SectionItemsInner.</p>\n<p>After creating the server I wrote a body for a sample request</p>\n<pre><code>{\n  &quot;items&quot;: [\n    {\n      &quot;type&quot;: &quot;SectionItemOutput&quot;,\n      &quot;name&quot;: &quot;output&quot;,\n      &quot;output&quot;: &quot;TestOutput&quot;\n    },\n    {\n      &quot;type&quot;: &quot;SectionItemInput&quot;,\n      &quot;name&quot;: &quot;input&quot;,\n      &quot;output&quot;: &quot;TestInput&quot;\n    }\n  ]\n}\n</code></pre>\n<p>When I post this to the server, it gets parsed correctly and I can do something with it.\nBut when I try to parse this on the client</p>\n<pre><code>InputStream json = ...\nObjectMapper mapper = new ObjectMapper();\nSection s = mapper.readValue(json, Section .class);\n</code></pre>\n<p>I get an error</p>\n<pre><code>com.fasterxml.jackson.databind.exc.InvalidTypeIdException: Could not resolve type id 'SectionItemOutput'\nas a subtype of `org.openapitools.client.model.SectionItemsInner`:\nClass `org.openapitools.client.model.SectionItemOutput` not subtype of\n`org.openapitools.client.model.SectionItemsInner`\n   at [Source: (BufferedInputStream); line: 4, column: 16] (through reference chain:\n      org.openapitools.client.model.Section[&quot;items&quot;]-&gt;java.util.ArrayList[0])\n</code></pre>\n<p>I'm very sorry for this long post, but it seems that I'm stucked.\nI tried a few different other libraries (okhttp-gson, resttemplate, webclient) but none of them generates code which is compatible.</p>\n<p>Thanks for any help or hint, bernd</p>\n"},{"tags":["java","redis","redis-cluster","lettuce"],"comments":[{"owner":{"account_id":7772347,"reputation":53,"user_id":5881435,"accept_rate":100,"display_name":"Rani Selvaraj"},"score":0,"creation_date":1672735703,"post_id":74488980,"comment_id":132336453,"body_markdown":"hi, have you fixed this?","body":"hi, have you fixed this?"},{"owner":{"account_id":17396826,"reputation":11,"user_id":12606426,"display_name":"Mandeep jain"},"score":0,"creation_date":1673434792,"post_id":74488980,"comment_id":132496848,"body_markdown":"yes, there was an issue in the library. ref :(https://github.com/lettuce-io/lettuce-core/issues/2252)","body":"yes, there was an issue in the library. ref :(<a href=\"https://github.com/lettuce-io/lettuce-core/issues/2252\" rel=\"nofollow noreferrer\">github.com/lettuce-io/lettuce-core/issues/2252</a>)"}],"answers":[{"tags":[],"owner":{"account_id":6523097,"reputation":780,"user_id":5046680,"display_name":"Joey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671229413,"creation_date":1671229413,"answer_id":74830315,"question_id":74488980,"body_markdown":"I had this same problem. I solved it by deleting and restarting my Kubernetes pods. It&#39;s possible that just a restart of Spring Boot would have also worked.","title":"Cannot determine a partition for slot","body":"<p>I had this same problem. I solved it by deleting and restarting my Kubernetes pods. It's possible that just a restart of Spring Boot would have also worked.</p>\n"}],"owner":{"account_id":17396826,"reputation":11,"user_id":12606426,"display_name":"Mandeep jain"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2145,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1671229413,"creation_date":1668770868,"question_id":74488980,"body_markdown":"During certain redis operations, I am facing PartitionSelectorException.\r\n\r\n`Caused by: io.lettuce.core.cluster.PartitionSelectorException: Cannot determine a partition for slot 12004. \tat io.lettuce.core.cluster.PooledClusterConnectionProvider.getWriteConnection(PooledClusterConnectionProvider.java:164) \tat io.lettuce.core.cluster.PooledClusterConnectionProvider.getConnectionAsync(PooledClusterConnectionProvider.java:149) \tat io.lettuce.core.cluster.ClusterDistributionChannelWriter.doWrite(ClusterDistributionChannelWriter.java:170) \tat io.lettuce.core.cluster.ClusterDistributionChannelWriter.write(ClusterDistributionChannelWriter.java:103) \tat io.lettuce.core.RedisChannelHandler.dispatch(RedisChannelHandler.java:218) \tat io.lettuce.core.cluster.StatefulRedisClusterConnectionImpl.dispatch(StatefulRedisClusterConnectionImpl.java:216) \tat io.lettuce.core.AbstractRedisAsyncCommands.dispatch(AbstractRedisAsyncCommands.java:676) \tat io.lettuce.core.AbstractRedisAsyncCommands.get(AbstractRedisAsyncCommands.java:960) \tat sun.reflect.GeneratedMethodAccessor425.invoke(Unknown Source) \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) \tat java.lang.reflect.Method.invoke(Method.java:498) \tat io.lettuce.core.cluster.ClusterFutureSyncInvocationHandler.handleInvocation(ClusterFutureSyncInvocationHandler.java:122) \tat io.lettuce.core.internal.AbstractInvocationHandler.invoke(AbstractInvocationHandler.java:80) \tat com.sun.proxy.$Proxy254.get(Unknown Source) \tat org.springframework.data.redis.connection.lettuce.LettuceStringCommands.get(LettuceStringCommands.java:68)`\r\n\r\nCode Configuration\r\n\r\n`ClusterTopologyRefreshOptions topologyRefreshOptions = ClusterTopologyRefreshOptions.builder()`\r\n`.enablePeriodicRefresh(Duration.ofSeconds(30))`\r\n`.enableAllAdaptiveRefreshTriggers()`\r\n`.build();`\r\n\r\n`ClientOptions options = ClusterClientOptions.builder()`\r\n`.disconnectedBehavior(ClientOptions.DisconnectedBehavior.REJECT_COMMANDS)`\r\n`.autoReconnect(true)`\r\n`.topologyRefreshOptions(topologyRefreshOptions)`\r\n`.build();`\r\n\r\n`GenericObjectPoolConfig genericObjectPoolConfig = new GenericObjectPoolConfig();`\r\n`genericObjectPoolConfig.setMinIdle(8);`\r\n`genericObjectPoolConfig.setMaxIdle(16);`\r\n`genericObjectPoolConfig.setMaxTotal(16);`\r\n`LettucePoolingClientConfiguration.builder()`\r\n`.poolConfig(genericObjectPoolConfig)`\r\n`.clientOptions(options)`\r\n`.clientResources(clientResources)`\r\n`.build();`\r\n\r\n#### \r\n\r\nEnvironment\r\n\r\nLettuce version(s): \\[6.1.5.RELEASE\\]\r\n\r\nRedis version: \\[5.0.6\\]\r\n\r\nShards: 6\r\n\r\nNumber of nodes: 12\r\n\r\nAnalysis\r\n\r\nRedis cluster is healthy, all the metrics are as expected.\r\n\r\nSo, could you give me some suggestions. Thank you!","title":"Cannot determine a partition for slot","body":"<p>During certain redis operations, I am facing PartitionSelectorException.</p>\n<p><code>Caused by: io.lettuce.core.cluster.PartitionSelectorException: Cannot determine a partition for slot 12004.    at io.lettuce.core.cluster.PooledClusterConnectionProvider.getWriteConnection(PooledClusterConnectionProvider.java:164)     at io.lettuce.core.cluster.PooledClusterConnectionProvider.getConnectionAsync(PooledClusterConnectionProvider.java:149)     at io.lettuce.core.cluster.ClusterDistributionChannelWriter.doWrite(ClusterDistributionChannelWriter.java:170)  at io.lettuce.core.cluster.ClusterDistributionChannelWriter.write(ClusterDistributionChannelWriter.java:103)    at io.lettuce.core.RedisChannelHandler.dispatch(RedisChannelHandler.java:218)   at io.lettuce.core.cluster.StatefulRedisClusterConnectionImpl.dispatch(StatefulRedisClusterConnectionImpl.java:216)     at io.lettuce.core.AbstractRedisAsyncCommands.dispatch(AbstractRedisAsyncCommands.java:676)     at io.lettuce.core.AbstractRedisAsyncCommands.get(AbstractRedisAsyncCommands.java:960)  at sun.reflect.GeneratedMethodAccessor425.invoke(Unknown Source)    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)    at java.lang.reflect.Method.invoke(Method.java:498)     at io.lettuce.core.cluster.ClusterFutureSyncInvocationHandler.handleInvocation(ClusterFutureSyncInvocationHandler.java:122)     at io.lettuce.core.internal.AbstractInvocationHandler.invoke(AbstractInvocationHandler.java:80)     at com.sun.proxy.$Proxy254.get(Unknown Source)  at org.springframework.data.redis.connection.lettuce.LettuceStringCommands.get(LettuceStringCommands.java:68)</code></p>\n<p>Code Configuration</p>\n<p><code>ClusterTopologyRefreshOptions topologyRefreshOptions = ClusterTopologyRefreshOptions.builder()</code>\n<code>.enablePeriodicRefresh(Duration.ofSeconds(30))</code>\n<code>.enableAllAdaptiveRefreshTriggers()</code>\n<code>.build();</code></p>\n<p><code>ClientOptions options = ClusterClientOptions.builder()</code>\n<code>.disconnectedBehavior(ClientOptions.DisconnectedBehavior.REJECT_COMMANDS)</code>\n<code>.autoReconnect(true)</code>\n<code>.topologyRefreshOptions(topologyRefreshOptions)</code>\n<code>.build();</code></p>\n<p><code>GenericObjectPoolConfig genericObjectPoolConfig = new GenericObjectPoolConfig();</code>\n<code>genericObjectPoolConfig.setMinIdle(8);</code>\n<code>genericObjectPoolConfig.setMaxIdle(16);</code>\n<code>genericObjectPoolConfig.setMaxTotal(16);</code>\n<code>LettucePoolingClientConfiguration.builder()</code>\n<code>.poolConfig(genericObjectPoolConfig)</code>\n<code>.clientOptions(options)</code>\n<code>.clientResources(clientResources)</code>\n<code>.build();</code></p>\n<h4></h4>\n<p>Environment</p>\n<p>Lettuce version(s): [6.1.5.RELEASE]</p>\n<p>Redis version: [5.0.6]</p>\n<p>Shards: 6</p>\n<p>Number of nodes: 12</p>\n<p>Analysis</p>\n<p>Redis cluster is healthy, all the metrics are as expected.</p>\n<p>So, could you give me some suggestions. Thank you!</p>\n"},{"tags":["java","spring","spring-boot","validation","cucumber"],"answers":[{"tags":[],"owner":{"account_id":4895787,"reputation":10833,"user_id":3945473,"display_name":"M.P. Korstanje"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671229355,"creation_date":1671229355,"answer_id":74830308,"question_id":74829535,"body_markdown":"The `@Valid` annotation [signals the caller of `addContact` that the object should be valid][1]. By directly calling `addContact` you are bypassing that. You may want to consider using `MockMvc` to call your controller instead.\r\n\r\n\r\nI would suggest using Spring boot to setup your application context instead. [Spring Boot has a rich set of features that let you test many aspects of your application easily][2].\r\n\r\n  [1]: https://stackoverflow.com/a/19426570/3945473\r\n  [2]: https://docs.spring.io/spring-boot/docs/2.7.6/reference/html/features.html#features.testing","title":"how to test @valid within cucumber scenario","body":"<p>The <code>@Valid</code> annotation <a href=\"https://stackoverflow.com/a/19426570/3945473\">signals the caller of <code>addContact</code> that the object should be valid</a>. By directly calling <code>addContact</code> you are bypassing that. You may want to consider using <code>MockMvc</code> to call your controller instead.</p>\n<p>I would suggest using Spring boot to setup your application context instead. <a href=\"https://docs.spring.io/spring-boot/docs/2.7.6/reference/html/features.html#features.testing\" rel=\"nofollow noreferrer\">Spring Boot has a rich set of features that let you test many aspects of your application easily</a>.</p>\n"}],"owner":{"account_id":4397755,"reputation":790,"user_id":3584279,"accept_rate":100,"display_name":"RVA"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671229355,"creation_date":1671222997,"question_id":74829535,"body_markdown":"Given the following classes :\r\n\r\n```\r\nclass Contact{\r\n   @Getter\r\n   @Setter\r\n   @Email\r\n   private String mail;\r\n}\r\n@RestController\r\nclass ContactController{\r\n   @PostMapping(path = &quot;/contacts&quot;)\r\n    public ResponseEntity&lt;Contact&gt; addContact(\r\n            @Valid @RequestBody Contact contact) {\r\n     ....\r\n    }\r\n}\r\n```\r\nHow can I test in a gherkin scenario ? \r\n\r\nI&#39;ve tried the following :\r\n```  \r\n  Scenario Outline: validation failed use-case\r\n    Given I am authenticated as &quot;&lt;userFirstName&gt;&quot;\r\n    When I register a new contact &quot;&lt;contactJsonLocation&gt;&quot;\r\n    Then it should throw an ConstraintViolationException of contact\r\n    Examples:\r\n      | userFirstName | contactJsonLocation                  | \r\n      | Simon         | contactWithMailNotWellFormatted.json |\r\n```\r\nSteps code : \r\n```    \r\npublic CreateContactSteps(ContactController contactController) {\r\n  When(&quot;^I register a new contact \\&quot;([^\\&quot;]*)\\&quot;$&quot;,\r\n    (String contactJsonLocation) -&gt; {\r\n      try {\r\n        Contact contact;\r\n        String jsonContact = Files.readString(Paths.get(new ClassPathResource(&quot;files/&quot; + contactJsonLocation).getURI()));   \r\n        contact = objectMapper.readValue(jsonContact, Contact.class);\r\n        String id = UUID.randomUUID().toString();\r\n        contact.setId(id);\r\n        createContactAttempt.setId(id);\r\n        createContactAttempt.setMail(contact.getMail());\r\n        contactController.addContact(contact);\r\n      } catch (IOException e) {\r\n        throw new RuntimeException(e);\r\n      } catch (ConstraintViolationException e) {                                \r\n        createContactAttempt.lastException = e;\r\n       }\r\n  });\r\n  \r\n  Then(&quot;^it should throw an ConstraintViolationException of contact$&quot;,\r\n    () -&gt; {\r\n       Assertions.assertTrue(createContactAttempt.lastException instanceof ConstraintViolationException);\r\n        createContactAttempt.lastException = null;\r\n    });\r\n\r\n```\r\n\r\nWhen I&#39;m testing to create a new contact after starting my spring boot app all is going well on the validation part, meaning I&#39;m receiving the expected 400 error.\r\nBut when I&#39;m calling the ContactController from my test context, it fails to valid and the contact is created. \r\nI&#39;m guessing it has something to do with spring doing some magic behind the scene, but what ?\r\nRight now I&#39;m initiating myself the cucumber application context like this (and I might be doing something wrong, I&#39;m open to suggestion / good criticism) : \r\n```\r\n@RunWith(Cucumber.class)\r\n@CucumberOptions(plugin = {&quot;pretty&quot;, &quot;html:FeaturesReport.html&quot;},\r\n        features = {&quot;src/test/resources/features&quot;})\r\npublic class AllAcceptanceTest {\r\n}\r\n\r\n@CucumberContextConfiguration\r\n@ContextConfiguration(classes = {BeanConfiguration.class})\r\npublic class ContextConfigurationTesting implements En {\r\n}\r\n\r\n@Configuration\r\n@RequiredArgsConstructor\r\npublic class ControllerConfiguration {\r\n    @Bean\r\n    public ContactController contactController() {\r\n        return new ContactController(\r\n                ... //every other bean the controller need \r\n        );\r\n    }\r\n    ...\r\n}\r\n\r\n```","title":"how to test @valid within cucumber scenario","body":"<p>Given the following classes :</p>\n<pre><code>class Contact{\n   @Getter\n   @Setter\n   @Email\n   private String mail;\n}\n@RestController\nclass ContactController{\n   @PostMapping(path = &quot;/contacts&quot;)\n    public ResponseEntity&lt;Contact&gt; addContact(\n            @Valid @RequestBody Contact contact) {\n     ....\n    }\n}\n</code></pre>\n<p>How can I test in a gherkin scenario ?</p>\n<p>I've tried the following :</p>\n<pre><code>  Scenario Outline: validation failed use-case\n    Given I am authenticated as &quot;&lt;userFirstName&gt;&quot;\n    When I register a new contact &quot;&lt;contactJsonLocation&gt;&quot;\n    Then it should throw an ConstraintViolationException of contact\n    Examples:\n      | userFirstName | contactJsonLocation                  | \n      | Simon         | contactWithMailNotWellFormatted.json |\n</code></pre>\n<p>Steps code :</p>\n<pre><code>public CreateContactSteps(ContactController contactController) {\n  When(&quot;^I register a new contact \\&quot;([^\\&quot;]*)\\&quot;$&quot;,\n    (String contactJsonLocation) -&gt; {\n      try {\n        Contact contact;\n        String jsonContact = Files.readString(Paths.get(new ClassPathResource(&quot;files/&quot; + contactJsonLocation).getURI()));   \n        contact = objectMapper.readValue(jsonContact, Contact.class);\n        String id = UUID.randomUUID().toString();\n        contact.setId(id);\n        createContactAttempt.setId(id);\n        createContactAttempt.setMail(contact.getMail());\n        contactController.addContact(contact);\n      } catch (IOException e) {\n        throw new RuntimeException(e);\n      } catch (ConstraintViolationException e) {                                \n        createContactAttempt.lastException = e;\n       }\n  });\n  \n  Then(&quot;^it should throw an ConstraintViolationException of contact$&quot;,\n    () -&gt; {\n       Assertions.assertTrue(createContactAttempt.lastException instanceof ConstraintViolationException);\n        createContactAttempt.lastException = null;\n    });\n\n</code></pre>\n<p>When I'm testing to create a new contact after starting my spring boot app all is going well on the validation part, meaning I'm receiving the expected 400 error.\nBut when I'm calling the ContactController from my test context, it fails to valid and the contact is created.\nI'm guessing it has something to do with spring doing some magic behind the scene, but what ?\nRight now I'm initiating myself the cucumber application context like this (and I might be doing something wrong, I'm open to suggestion / good criticism) :</p>\n<pre><code>@RunWith(Cucumber.class)\n@CucumberOptions(plugin = {&quot;pretty&quot;, &quot;html:FeaturesReport.html&quot;},\n        features = {&quot;src/test/resources/features&quot;})\npublic class AllAcceptanceTest {\n}\n\n@CucumberContextConfiguration\n@ContextConfiguration(classes = {BeanConfiguration.class})\npublic class ContextConfigurationTesting implements En {\n}\n\n@Configuration\n@RequiredArgsConstructor\npublic class ControllerConfiguration {\n    @Bean\n    public ContactController contactController() {\n        return new ContactController(\n                ... //every other bean the controller need \n        );\n    }\n    ...\n}\n\n</code></pre>\n"},{"tags":["java","macos","gradle","java-8","ssl-certificate"],"comments":[{"owner":{"account_id":6390592,"reputation":16008,"user_id":4956907,"display_name":"Michał Krzywański"},"score":0,"creation_date":1584448810,"post_id":60720241,"comment_id":107434648,"body_markdown":"Just to confirm, are you sure that `JAVA_HOME` environment variable correctly points to `/Library/Java/JavaVirtualMachines/jdk1.8.0_241.jdk`?","body":"Just to confirm, are you sure that <code>JAVA_HOME</code> environment variable correctly points to <code>&#47;Library&#47;Java&#47;JavaVirtualMachines&#47;jdk1.8.0_241.jdk</code>?"},{"owner":{"account_id":5310584,"reputation":1464,"user_id":4237080,"accept_rate":75,"display_name":"brienna"},"score":0,"creation_date":1584448854,"post_id":60720241,"comment_id":107434672,"body_markdown":"It points to `/Library/Java/JavaVirtualMachines/jdk1.8.0_241.jdk/Contents/Home` @michalk","body":"It points to <code>&#47;Library&#47;Java&#47;JavaVirtualMachines&#47;jdk1.8.0_241.jdk&#47;Contents&#47;&zwnj;&#8203;Home</code> @michalk"},{"owner":{"account_id":5310584,"reputation":1464,"user_id":4237080,"accept_rate":75,"display_name":"brienna"},"score":0,"creation_date":1584450366,"post_id":60720241,"comment_id":107435445,"body_markdown":"I set this with `echo export &quot;JAVA_HOME=\\$(/usr/libexec/java_home)&quot; &gt;&gt; ~/.bash_profile`.","body":"I set this with <code>echo export &quot;JAVA_HOME=\\$(&#47;usr&#47;libexec&#47;java_home)&quot; &gt;&gt; ~&#47;.bash_profile</code>."}],"answers":[{"tags":[],"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1584648132,"creation_date":1584641073,"answer_id":60762775,"question_id":60720241,"body_markdown":"That [SSL certificate][1] is not self-signed to begin with, therefore it does not require manual adding. Try re-installing Java or set an alternate install location as `$JAVA_HOME`, with a default `cacerts` file. Something seems to be broken, as it should not reject the certificate for [`repo1.maven.org`](https://repo1.maven.org/maven2). `ls -la $JAVA_HOME/jre/lib/security/cacerts` says `cacerts` should have about 114757 bytes. If you&#39;re behind a firewall, you might need to [configure a proxy][3] for Gradle.\r\n\r\nThis should attempt an SSL session (not through Java):\r\n\r\n    $ openssl s_client -connect repo1.maven.org:443\r\n\r\n ---\r\n\r\nThis project also uses a rather [outdated version][2] of Gradle, eg:\r\n\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-5.6.4-all.zip\r\n\r\n  [1]: https://www.ssllabs.com/ssltest/analyze.html?d=repo1.maven.org\r\n  [2]: https://github.com/lenskit/lenskit-hello/blob/master/gradle/wrapper/gradle-wrapper.properties#L6\r\n  [3]: https://docs.gradle.org/current/userguide/build_environment.html#sec:accessing_the_web_via_a_proxy","title":"Gradle build fails due to sun.security.validator.ValidatorException despite installing certificates","body":"<p>That <a href=\"https://www.ssllabs.com/ssltest/analyze.html?d=repo1.maven.org\" rel=\"noreferrer\">SSL certificate</a> is not self-signed to begin with, therefore it does not require manual adding. Try re-installing Java or set an alternate install location as <code>$JAVA_HOME</code>, with a default <code>cacerts</code> file. Something seems to be broken, as it should not reject the certificate for <a href=\"https://repo1.maven.org/maven2\" rel=\"noreferrer\"><code>repo1.maven.org</code></a>. <code>ls -la $JAVA_HOME/jre/lib/security/cacerts</code> says <code>cacerts</code> should have about 114757 bytes. If you're behind a firewall, you might need to <a href=\"https://docs.gradle.org/current/userguide/build_environment.html#sec:accessing_the_web_via_a_proxy\" rel=\"noreferrer\">configure a proxy</a> for Gradle.</p>\n\n<p>This should attempt an SSL session (not through Java):</p>\n\n<pre><code>$ openssl s_client -connect repo1.maven.org:443\n</code></pre>\n\n<hr>\n\n<p>This project also uses a rather <a href=\"https://github.com/lenskit/lenskit-hello/blob/master/gradle/wrapper/gradle-wrapper.properties#L6\" rel=\"noreferrer\">outdated version</a> of Gradle, eg:</p>\n\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-5.6.4-all.zip\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3569155,"reputation":3306,"user_id":2979955,"display_name":"Chris Sprague"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671229223,"creation_date":1671229223,"answer_id":74830293,"question_id":60720241,"body_markdown":"Setting my project Gradle JDK version to that used by JAVA_HOME solved it\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/x3ouy.png\r\n  [2]: https://i.stack.imgur.com/HOdH1.png\r\n  [3]: https://i.stack.imgur.com/YedJG.png","title":"Gradle build fails due to sun.security.validator.ValidatorException despite installing certificates","body":"<p>Setting my project Gradle JDK version to that used by JAVA_HOME solved it</p>\n<p><a href=\"https://i.stack.imgur.com/x3ouy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/x3ouy.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/HOdH1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HOdH1.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/YedJG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YedJG.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":5310584,"reputation":1464,"user_id":4237080,"accept_rate":75,"display_name":"brienna"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28954,"favorite_count":0,"down_vote_count":1,"up_vote_count":10,"answer_count":2,"score":9,"last_activity_date":1671229223,"creation_date":1584440176,"question_id":60720241,"body_markdown":"I&#39;m trying to run [lenskit-hello][1] according to their instructions. When I run `./gradlew build`, I receive the error\r\n\r\n```\r\n(base) Briennas-MBP:lenskit-hello-master briennakh$ ./gradlew build\r\n:compileJava\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nCould not resolve all dependencies for configuration &#39;:compileClasspath&#39;.\r\n&gt; Could not resolve org.lenskit:lenskit-all:3.0-M3.\r\n  Required by:\r\n      :lenskit-hello-master 4.50.57 AM:unspecified\r\n   &gt; Could not resolve org.lenskit:lenskit-all:3.0-M3.\r\n      &gt; Could not get resource &#39;https://repo1.maven.org/maven2/org/lenskit/lenskit-all/3.0-M3/lenskit-all-3.0-M3.pom&#39;.\r\n         &gt; Could not GET &#39;https://repo1.maven.org/maven2/org/lenskit/lenskit-all/3.0-M3/lenskit-all-3.0-M3.pom&#39;.\r\n            &gt; sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n   &gt; Could not resolve org.lenskit:lenskit-all:3.0-M3.\r\n      &gt; Could not get resource &#39;https://jcenter.bintray.com/org/lenskit/lenskit-all/3.0-M3/lenskit-all-3.0-M3.pom&#39;.\r\n         &gt; Could not GET &#39;https://jcenter.bintray.com/org/lenskit/lenskit-all/3.0-M3/lenskit-all-3.0-M3.pom&#39;.\r\n            &gt; sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n\r\n* Try:\r\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\r\n\r\nBUILD FAILED\r\n\r\nTotal time: 4.009 secs\r\n```\r\n\r\nI am using Java 1.8.0_241 (and only that one is installed) on MacOS Mojave 10.14.6. I&#39;ve installed the most recent security updates, then restarted my computer. I have attempted this on my regular wifi and on my phone&#39;s hotspot. \r\n\r\nI followed instructions in the accepted answer [here][2], downloading the security certificates from both `https://repo1.maven.org/maven2/org/lenskit/lenskit-all/3.0-M2/lenskit-all-3.0-M2.pom` and `https://oss.sonatype.org/content/repositories/snapshots/org/lenskit/lenskit-all/3.0-M2/lenskit-all-3.0-M2.pom` and adding them to the keystore via the following command (only showing one of two):\r\n\r\n```\r\nkeytool -import -alias maven -file /Users/briennakh/Downloads/maven.cer -keystore \r\n/Library/Java/JavaVirtualMachines/jdk1.8.0_241.jdk/Contents/Home/jre/lib/security/cacerts\r\n```\r\n\r\nThen if I check \r\n\r\n```\r\nkeytool -list -keystore /Library/Java/JavaVirtualMachines/jdk1.8.0_241.jdk/Contents/Home/jre/lib/security/cacerts | grep maven\r\n```\r\n\r\nit shows that my certificate has been added, `maven, Mar 17, 2020, trustedCertEntry`, yet I&#39;m still getting the same error when running `./gradlew build`?\r\n\r\nI also checked `openssl x509 -in /Users/briennakh/Downloads/maven.pem -text` to make sure that the certificate looks all right.\r\n\r\n\r\n\r\n\r\n  \r\n\r\n\r\n  [1]: https://github.com/lenskit/lenskit-hello\r\n  [2]: https://stackoverflow.com/questions/9619030/resolving-javax-net-ssl-sslhandshakeexception-sun-security-validator-validatore","title":"Gradle build fails due to sun.security.validator.ValidatorException despite installing certificates","body":"<p>I'm trying to run <a href=\"https://github.com/lenskit/lenskit-hello\" rel=\"noreferrer\">lenskit-hello</a> according to their instructions. When I run <code>./gradlew build</code>, I receive the error</p>\n\n<pre><code>(base) Briennas-MBP:lenskit-hello-master briennakh$ ./gradlew build\n:compileJava\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nCould not resolve all dependencies for configuration ':compileClasspath'.\n&gt; Could not resolve org.lenskit:lenskit-all:3.0-M3.\n  Required by:\n      :lenskit-hello-master 4.50.57 AM:unspecified\n   &gt; Could not resolve org.lenskit:lenskit-all:3.0-M3.\n      &gt; Could not get resource 'https://repo1.maven.org/maven2/org/lenskit/lenskit-all/3.0-M3/lenskit-all-3.0-M3.pom'.\n         &gt; Could not GET 'https://repo1.maven.org/maven2/org/lenskit/lenskit-all/3.0-M3/lenskit-all-3.0-M3.pom'.\n            &gt; sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n   &gt; Could not resolve org.lenskit:lenskit-all:3.0-M3.\n      &gt; Could not get resource 'https://jcenter.bintray.com/org/lenskit/lenskit-all/3.0-M3/lenskit-all-3.0-M3.pom'.\n         &gt; Could not GET 'https://jcenter.bintray.com/org/lenskit/lenskit-all/3.0-M3/lenskit-all-3.0-M3.pom'.\n            &gt; sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\nBUILD FAILED\n\nTotal time: 4.009 secs\n</code></pre>\n\n<p>I am using Java 1.8.0_241 (and only that one is installed) on MacOS Mojave 10.14.6. I've installed the most recent security updates, then restarted my computer. I have attempted this on my regular wifi and on my phone's hotspot. </p>\n\n<p>I followed instructions in the accepted answer <a href=\"https://stackoverflow.com/questions/9619030/resolving-javax-net-ssl-sslhandshakeexception-sun-security-validator-validatore\">here</a>, downloading the security certificates from both <code>https://repo1.maven.org/maven2/org/lenskit/lenskit-all/3.0-M2/lenskit-all-3.0-M2.pom</code> and <code>https://oss.sonatype.org/content/repositories/snapshots/org/lenskit/lenskit-all/3.0-M2/lenskit-all-3.0-M2.pom</code> and adding them to the keystore via the following command (only showing one of two):</p>\n\n<pre><code>keytool -import -alias maven -file /Users/briennakh/Downloads/maven.cer -keystore \n/Library/Java/JavaVirtualMachines/jdk1.8.0_241.jdk/Contents/Home/jre/lib/security/cacerts\n</code></pre>\n\n<p>Then if I check </p>\n\n<pre><code>keytool -list -keystore /Library/Java/JavaVirtualMachines/jdk1.8.0_241.jdk/Contents/Home/jre/lib/security/cacerts | grep maven\n</code></pre>\n\n<p>it shows that my certificate has been added, <code>maven, Mar 17, 2020, trustedCertEntry</code>, yet I'm still getting the same error when running <code>./gradlew build</code>?</p>\n\n<p>I also checked <code>openssl x509 -in /Users/briennakh/Downloads/maven.pem -text</code> to make sure that the certificate looks all right.</p>\n"},{"tags":["java","spring","mysql-workbench","telegram-bot"],"answers":[{"tags":[],"owner":{"account_id":24011484,"reputation":16,"user_id":17995021,"display_name":"Aleh Khvasko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671228505,"creation_date":1671227479,"answer_id":74830087,"question_id":74783559,"body_markdown":"I&#39;m working on a similar project and had exactly the same issue. Spent plenty of time until figured out that it comes from pom.xml file. I just deleted all versions from the dependencies and reloaded it, seems to me that the problem is that some of the libraries were not loaded properly or the versions were incompatible. Let me know if it works for you.\r\n\r\n\r\n\r\nHere is my example:\r\n\r\n     &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.telegram&lt;/groupId&gt;\r\n            &lt;artifactId&gt;telegrambots&lt;/artifactId&gt;\r\n            &lt;version&gt;${telegram.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;appassembler-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;1.1.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;assembleDirectory&gt;target&lt;/assembleDirectory&gt;\r\n                    &lt;programs&gt;\r\n                        &lt;program&gt;\r\n                            &lt;mainClass&gt;com.telegarambot.customertgbot.CustomerTgBotApplication&lt;/mainClass&gt;\r\n                            &lt;name&gt;workerBot&lt;/name&gt;\r\n                        &lt;/program&gt;\r\n                    &lt;/programs&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;assemble&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n","title":"I have problems with bean while creating telegram bot using Spring","body":"<p>I'm working on a similar project and had exactly the same issue. Spent plenty of time until figured out that it comes from pom.xml file. I just deleted all versions from the dependencies and reloaded it, seems to me that the problem is that some of the libraries were not loaded properly or the versions were incompatible. Let me know if it works for you.</p>\n<p>Here is my example:</p>\n<pre><code> &lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.telegram&lt;/groupId&gt;\n        &lt;artifactId&gt;telegrambots&lt;/artifactId&gt;\n        &lt;version&gt;${telegram.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;appassembler-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.1.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;assembleDirectory&gt;target&lt;/assembleDirectory&gt;\n                &lt;programs&gt;\n                    &lt;program&gt;\n                        &lt;mainClass&gt;com.telegarambot.customertgbot.CustomerTgBotApplication&lt;/mainClass&gt;\n                        &lt;name&gt;workerBot&lt;/name&gt;\n                    &lt;/program&gt;\n                &lt;/programs&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;assemble&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n"}],"owner":{"account_id":27238691,"reputation":3,"user_id":20765212,"display_name":"Асем Маратбек"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":795,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74830087,"answer_count":1,"score":0,"last_activity_date":1671228505,"creation_date":1670928242,"question_id":74783559,"body_markdown":"My bot is about recipes. I have user entity with fields id, userName, firstName, lastName, and registeredAt; user repository that extends from CrudRepository; bot config, which contains fields botName, token and ownerId; bot initializer and service telegram bot. \r\n\r\n**BotInitializer**\r\n\r\n```\r\n@Slf4j\r\n@Component\r\npublic class BotInitializer {\r\n    @Autowired\r\n    TelegramBot tgBot;\r\n\r\n    @EventListener({ContextRefreshedEvent.class})\r\n    public void init() throws TelegramApiException {\r\n        TelegramBotsApi telegramBotsApi = new TelegramBotsApi(DefaultBotSession.class);\r\n        try{\r\n            telegramBotsApi.registerBot(tgBot);\r\n        } catch (TelegramApiException e) {\r\n            log.error(&quot;Error occurred: &quot; + e.getMessage());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**service TelegramBot**\r\n```\r\n@Slf4j\r\n@Component\r\npublic class TelegramBot extends TelegramLongPollingBot {\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n    final BotConfig botConfig;\r\n    static final String HELP_TEXT = &quot;This bot is created to help find recipes for cooking delicious foods.&quot;;\r\n\r\n    public TelegramBot(BotConfig botConfig, UserRepository userRepository) {\r\n        this.botConfig = botConfig;\r\n        List&lt;BotCommand&gt; commandList = new ArrayList&lt;&gt;();\r\n        commandList.add(new BotCommand(&quot;/start&quot;, &quot;start communicating with bot&quot;));\r\n        commandList.add(new BotCommand(&quot;/help&quot;, &quot;help info&quot;));\r\n        commandList.add(new BotCommand(&quot;/category&quot;, &quot;category of recipes&quot;));\r\n        commandList.add(new BotCommand(&quot;/find&quot;, &quot;search recipe by name&quot;));\r\n        commandList.add(new BotCommand(&quot;/random&quot;, &quot;random recipe&quot;));\r\n        try {\r\n            this.execute(new SetMyCommands(commandList, new BotCommandScopeDefault(), null));\r\n        } catch (TelegramApiException e) {\r\n            log.error(&quot;Error setting bots command list: &quot; + e.getMessage());\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public String getBotUsername() {\r\n        return botConfig.getBotName();\r\n    }\r\n\r\n    @Override\r\n    public String getBotToken() {\r\n        return botConfig.getToken();\r\n    }\r\n\r\n    @Override\r\n    public void onUpdateReceived(Update update) {\r\n        if(update.hasMessage() &amp;&amp; update.getMessage().hasText()) {\r\n            String messageText = update.getMessage().getText();\r\n            long chatId = update.getMessage().getChatId();\r\n\r\n            switch (messageText) {\r\n                case &quot;/start&quot;:\r\n                    registerNewUser(update.getMessage());\r\n                    handleStartCommand(chatId, update.getMessage().getChat().getFirstName());\r\n                    break;\r\n                case &quot;/help&quot; :\r\n                    sendMessage(chatId, HELP_TEXT);\r\n                    break;\r\n                default:\r\n                    sendMessage(chatId, &quot;Command was not recognized&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n    private void registerNewUser(Message message) {\r\n        if(userRepository.findById(message.getChatId()).isEmpty()) {\r\n            var chatId = message.getChatId();\r\n            var chat = message.getChat();\r\n\r\n            User user = new User();\r\n\r\n            user.setChatId(chatId);\r\n            user.setUserName(chat.getUserName());\r\n            user.setFirstName(chat.getFirstName());\r\n            user.setLastName(chat.getLastName());\r\n            user.setRegisteredAt(new Timestamp(System.currentTimeMillis()));\r\n\r\n            userRepository.save(user);\r\n            log.info(&quot;User &quot; + user.getUserName() + &quot; is saved&quot;);\r\n        }\r\n    }\r\n\r\n    public void handleStartCommand(long chatId, String userName) {\r\n        String answer = &quot;Hi, &quot; + userName + &quot; nice to meet you!&quot;;\r\n        log.info(&quot;Replied to user &quot; + userName + &quot; after getting start command.&quot;);\r\n        sendMessage(chatId, answer);\r\n    }\r\n\r\n    private void sendMessage(long chatId, String textToSend) {\r\n        SendMessage message = new SendMessage();\r\n        message.setChatId(String.valueOf(chatId));\r\n        message.setText(textToSend);\r\n        try {\r\n            execute(message);\r\n        } catch (TelegramApiException e) {\r\n            log.error(&quot;Error occurred: &quot; + e.getMessage());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**application.properties**\r\n```\r\nbot.name=goldenRecipes\r\nbot.token=Token\r\nbot.owner=OwnerId\r\n\r\nspring.jpa.hibernate.ddl-auto=update\r\nspring.datasource.url=jdbc:mysql://localhost:3307/golden-recipes-bot\r\nspring.datasource.username=dbusername\r\nspring.datasource.password=dbpass\r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\nspring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect\r\nspring.jpa.show-sql=true\r\n```\r\n\r\nI am trying to connect my bot with mysql database, but i got some errors related to beans and entityManagerFactory.\r\n\r\n\r\n```\r\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;botInitializer&#39;: Unsatisfied dependency expressed through field &#39;tgBot&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;telegramBot&#39; defined in file [D:\\goldenRecipesBot\\target\\classes\\io\\project\\goldenRecipesBot\\service\\TelegramBot.class]: Unsatisfied dependency expressed through constructor parameter 1; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;userRepository&#39; defined in io.project.goldenRecipesBot.repository.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot create inner bean &#39;(inner bean)#6bd16207&#39; of type [org.springframework.orm.jpa.SharedEntityManagerCreator] while setting bean property &#39;entityManager&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;(inner bean)#6bd16207&#39;: Cannot resolve reference to bean &#39;entityManagerFactory&#39; while setting constructor argument; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;entityManagerFactory&#39; available\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:659)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:639)\r\n\tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)\r\n\tat io.project.goldenRecipesBot.GoldenRecipesBotApplication.main(GoldenRecipesBotApplication.java:12)\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;telegramBot&#39; defined in file [D:\\goldenRecipesBot\\target\\classes\\io\\project\\goldenRecipesBot\\service\\TelegramBot.class]: Unsatisfied dependency expressed through constructor parameter 1; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;userRepository&#39; defined in io.project.goldenRecipesBot.repository.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot create inner bean &#39;(inner bean)#6bd16207&#39; of type [org.springframework.orm.jpa.SharedEntityManagerCreator] while setting bean property &#39;entityManager&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;(inner bean)#6bd16207&#39;: Cannot resolve reference to bean &#39;entityManagerFactory&#39; while setting constructor argument; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;entityManagerFactory&#39; available\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:656)\r\n\t... 19 more\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;userRepository&#39; defined in io.project.goldenRecipesBot.repository.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot create inner bean &#39;(inner bean)#6bd16207&#39; of type [org.springframework.orm.jpa.SharedEntityManagerCreator] while setting bean property &#39;entityManager&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;(inner bean)#6bd16207&#39;: Cannot resolve reference to bean &#39;entityManagerFactory&#39; while setting constructor argument; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;entityManagerFactory&#39; available\r\n\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:389)\r\n\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:134)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1707)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1452)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\r\n\t... 32 more\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;(inner bean)#6bd16207&#39;: Cannot resolve reference to bean &#39;entityManagerFactory&#39; while setting constructor argument; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;entityManagerFactory&#39; available\r\n\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:342)\r\n\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:113)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:693)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:510)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:374)\r\n\t... 46 more\r\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;entityManagerFactory&#39; available\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:874)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1344)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:309)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:330)\r\n\t... 54 more\r\n\r\n```\r\n","title":"I have problems with bean while creating telegram bot using Spring","body":"<p>My bot is about recipes. I have user entity with fields id, userName, firstName, lastName, and registeredAt; user repository that extends from CrudRepository; bot config, which contains fields botName, token and ownerId; bot initializer and service telegram bot.</p>\n<p><strong>BotInitializer</strong></p>\n<pre><code>@Slf4j\n@Component\npublic class BotInitializer {\n    @Autowired\n    TelegramBot tgBot;\n\n    @EventListener({ContextRefreshedEvent.class})\n    public void init() throws TelegramApiException {\n        TelegramBotsApi telegramBotsApi = new TelegramBotsApi(DefaultBotSession.class);\n        try{\n            telegramBotsApi.registerBot(tgBot);\n        } catch (TelegramApiException e) {\n            log.error(&quot;Error occurred: &quot; + e.getMessage());\n        }\n    }\n}\n</code></pre>\n<p><strong>service TelegramBot</strong></p>\n<pre><code>@Slf4j\n@Component\npublic class TelegramBot extends TelegramLongPollingBot {\n    @Autowired\n    private UserRepository userRepository;\n    final BotConfig botConfig;\n    static final String HELP_TEXT = &quot;This bot is created to help find recipes for cooking delicious foods.&quot;;\n\n    public TelegramBot(BotConfig botConfig, UserRepository userRepository) {\n        this.botConfig = botConfig;\n        List&lt;BotCommand&gt; commandList = new ArrayList&lt;&gt;();\n        commandList.add(new BotCommand(&quot;/start&quot;, &quot;start communicating with bot&quot;));\n        commandList.add(new BotCommand(&quot;/help&quot;, &quot;help info&quot;));\n        commandList.add(new BotCommand(&quot;/category&quot;, &quot;category of recipes&quot;));\n        commandList.add(new BotCommand(&quot;/find&quot;, &quot;search recipe by name&quot;));\n        commandList.add(new BotCommand(&quot;/random&quot;, &quot;random recipe&quot;));\n        try {\n            this.execute(new SetMyCommands(commandList, new BotCommandScopeDefault(), null));\n        } catch (TelegramApiException e) {\n            log.error(&quot;Error setting bots command list: &quot; + e.getMessage());\n        }\n    }\n\n    @Override\n    public String getBotUsername() {\n        return botConfig.getBotName();\n    }\n\n    @Override\n    public String getBotToken() {\n        return botConfig.getToken();\n    }\n\n    @Override\n    public void onUpdateReceived(Update update) {\n        if(update.hasMessage() &amp;&amp; update.getMessage().hasText()) {\n            String messageText = update.getMessage().getText();\n            long chatId = update.getMessage().getChatId();\n\n            switch (messageText) {\n                case &quot;/start&quot;:\n                    registerNewUser(update.getMessage());\n                    handleStartCommand(chatId, update.getMessage().getChat().getFirstName());\n                    break;\n                case &quot;/help&quot; :\n                    sendMessage(chatId, HELP_TEXT);\n                    break;\n                default:\n                    sendMessage(chatId, &quot;Command was not recognized&quot;);\n            }\n        }\n    }\n\n    private void registerNewUser(Message message) {\n        if(userRepository.findById(message.getChatId()).isEmpty()) {\n            var chatId = message.getChatId();\n            var chat = message.getChat();\n\n            User user = new User();\n\n            user.setChatId(chatId);\n            user.setUserName(chat.getUserName());\n            user.setFirstName(chat.getFirstName());\n            user.setLastName(chat.getLastName());\n            user.setRegisteredAt(new Timestamp(System.currentTimeMillis()));\n\n            userRepository.save(user);\n            log.info(&quot;User &quot; + user.getUserName() + &quot; is saved&quot;);\n        }\n    }\n\n    public void handleStartCommand(long chatId, String userName) {\n        String answer = &quot;Hi, &quot; + userName + &quot; nice to meet you!&quot;;\n        log.info(&quot;Replied to user &quot; + userName + &quot; after getting start command.&quot;);\n        sendMessage(chatId, answer);\n    }\n\n    private void sendMessage(long chatId, String textToSend) {\n        SendMessage message = new SendMessage();\n        message.setChatId(String.valueOf(chatId));\n        message.setText(textToSend);\n        try {\n            execute(message);\n        } catch (TelegramApiException e) {\n            log.error(&quot;Error occurred: &quot; + e.getMessage());\n        }\n    }\n}\n</code></pre>\n<p><strong>application.properties</strong></p>\n<pre><code>bot.name=goldenRecipes\nbot.token=Token\nbot.owner=OwnerId\n\nspring.jpa.hibernate.ddl-auto=update\nspring.datasource.url=jdbc:mysql://localhost:3307/golden-recipes-bot\nspring.datasource.username=dbusername\nspring.datasource.password=dbpass\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect\nspring.jpa.show-sql=true\n</code></pre>\n<p>I am trying to connect my bot with mysql database, but i got some errors related to beans and entityManagerFactory.</p>\n<pre><code>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'botInitializer': Unsatisfied dependency expressed through field 'tgBot'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'telegramBot' defined in file [D:\\goldenRecipesBot\\target\\classes\\io\\project\\goldenRecipesBot\\service\\TelegramBot.class]: Unsatisfied dependency expressed through constructor parameter 1; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepository' defined in io.project.goldenRecipesBot.repository.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot create inner bean '(inner bean)#6bd16207' of type [org.springframework.orm.jpa.SharedEntityManagerCreator] while setting bean property 'entityManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#6bd16207': Cannot resolve reference to bean 'entityManagerFactory' while setting constructor argument; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'entityManagerFactory' available\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:659)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:639)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)\n    at io.project.goldenRecipesBot.GoldenRecipesBotApplication.main(GoldenRecipesBotApplication.java:12)\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'telegramBot' defined in file [D:\\goldenRecipesBot\\target\\classes\\io\\project\\goldenRecipesBot\\service\\TelegramBot.class]: Unsatisfied dependency expressed through constructor parameter 1; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepository' defined in io.project.goldenRecipesBot.repository.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot create inner bean '(inner bean)#6bd16207' of type [org.springframework.orm.jpa.SharedEntityManagerCreator] while setting bean property 'entityManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#6bd16207': Cannot resolve reference to bean 'entityManagerFactory' while setting constructor argument; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'entityManagerFactory' available\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)\n    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:656)\n    ... 19 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepository' defined in io.project.goldenRecipesBot.repository.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot create inner bean '(inner bean)#6bd16207' of type [org.springframework.orm.jpa.SharedEntityManagerCreator] while setting bean property 'entityManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#6bd16207': Cannot resolve reference to bean 'entityManagerFactory' while setting constructor argument; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'entityManagerFactory' available\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:389)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:134)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1707)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1452)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\n    ... 32 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#6bd16207': Cannot resolve reference to bean 'entityManagerFactory' while setting constructor argument; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'entityManagerFactory' available\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:342)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:113)\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:693)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:510)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:374)\n    ... 46 more\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'entityManagerFactory' available\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:874)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1344)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:309)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:330)\n    ... 54 more\n\n</code></pre>\n"},{"tags":["java","selenium","selenide","retry-logic"],"answers":[{"tags":[],"owner":{"account_id":6341970,"reputation":1,"user_id":4923601,"display_name":"Serhii Danyliuk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671227659,"creation_date":1671018108,"answer_id":74797748,"question_id":72366422,"body_markdown":"Try to add maven surefire plugin to your pom.xml if you don&#39;t have it\r\n\r\n```xml\r\n&lt;dependencies&gt;\r\n...\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;${maven-surefire-plugin.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n...\r\n&lt;build&gt;\r\n    &lt;plugins&gt;\r\n        &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;${maven-surefire-plugin.version}&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n                &lt;argLine&gt;\r\n                    -javaagent:&quot;${settings.localRepository}/org/aspectj/aspectjweaver/${aspectj.version}/aspectjweaver-${aspectj.version}.jar&quot;\r\n                &lt;/argLine&gt;\r\n            &lt;/configuration&gt;\r\n        &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n&lt;/build&gt;\r\n```\r\n","title":"TestNG doesn&#39;t re-run all failed methods after ElementClickInterceptedException","body":"<p>Try to add maven surefire plugin to your pom.xml if you don't have it</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n...\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n        &lt;version&gt;${maven-surefire-plugin.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n...\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${maven-surefire-plugin.version}&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;argLine&gt;\n                    -javaagent:&quot;${settings.localRepository}/org/aspectj/aspectjweaver/${aspectj.version}/aspectjweaver-${aspectj.version}.jar&quot;\n                &lt;/argLine&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n"}],"owner":{"account_id":1591364,"reputation":125,"user_id":1474622,"accept_rate":75,"display_name":"braveleg"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1671227659,"creation_date":1653409943,"question_id":72366422,"body_markdown":"I have an automation framework TestNG + Selenide which runs jobs on Jenkins and provides Allure reports.\r\nI&#39;ve added a test class with some simple tests. One test occasionally fails when trying to click an element, but rerunning fixes the problem, so naturally I wanted to introduce retries for this test. \r\n\r\nHere comes the problem - failed tests are not retried. I&#39;ve tried IRetryAnalyzer/RetryAnalyzerCount added via annotation transformer or adding retryAnalyzer to @Test annotation, but no success.\r\n\r\nMy current configuration:\r\n```\r\npublic class RetryAnalyzer extends RetryAnalyzerCount {\r\n\r\n    private static final int MAX_RETRY_ATTEMPTS = 3;\r\n\r\n    public RetryAnalyzer() {\r\n        setCount(MAX_RETRY_ATTEMPTS);\r\n    }\r\n\r\n    @Override\r\n    public boolean retryMethod(ITestResult iTestResult) {\r\n        return true;\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class AnnotationTransformer implements IAnnotationTransformer {\r\n\r\n    private final Logger logger = LoggerFactory.getLogger(AnnotationTransformer.class);\r\n\r\n    @Override\r\n    public void transform(ITestAnnotation annotation, Class testClass, Constructor testConstructor, Method testMethod) {\r\n        annotation.setRetryAnalyzer(RetryAnalyzer.class);\r\n        logger.debug(&quot;SET RETRY ANALYZER FOR TEST {}&quot;, testMethod.getName());\r\n    }\r\n}\r\n```\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE suite SYSTEM &quot;http://testng.org/testng-1.0.dtd&quot;&gt;\r\n\r\n&lt;suite name=&quot;E2 widget tests&quot; thread-count=&quot;6&quot; parallel=&quot;classes&quot; data-provider-thread-count=&quot;3&quot;&gt;\r\n    &lt;listeners&gt;\r\n        &lt;listener class-name=&quot;framework.AnnotationTransformer&quot;/&gt;\r\n    &lt;/listeners&gt;\r\n    &lt;test name=&quot;E2 widgets - chrome&quot;&gt;\r\n        &lt;parameter name=&quot;browser&quot; value=&quot;chrome&quot;/&gt;\r\n        &lt;parameter name=&quot;width&quot; value=&quot;1366&quot;/&gt;\r\n        &lt;parameter name=&quot;height&quot; value=&quot;786&quot;/&gt;\r\n        &lt;packages&gt;\r\n            &lt;package name=&quot;tests.other.e2widgets&quot; /&gt;\r\n        &lt;/packages&gt;\r\n    &lt;/test&gt;\r\n\r\n&lt;/suite&gt;\r\n```\r\nMy test + dataprovider it&#39;s using\r\n```\r\n    @DataProvider(name = &quot;countries-with-odds-widget-enabled&quot;, parallel = true)\r\n    public Object[][] countriesWithOddsWidgetEnabled() {\r\n        List&lt;String&gt; oddsWidgetCountries = sevWidgetSteps.getOddsWidgetCountries(configUrl);\r\n        List&lt;Object[]&gt; parameters = oddsWidgetCountries.stream().map(country -&gt; new Object[]{country}).collect(Collectors.toList());\r\n        return parameters.toArray(new Object[1][parameters.size()]);\r\n    }\r\n\r\n    @Test(description = &quot;Check odds widget for all countries&quot;,\r\n            dataProvider = &quot;countries-with-odds-widget-enabled&quot;\r\n    )\r\n    public void checkOddsWidgetsForEnabledCountries(String country) {\r\n        ...some code...\r\n\r\n        // here test fails because of ElementClickInterceptedException\r\n        $(By.id(&quot;3__match-calendar-link&quot;)).click();\r\n\r\n        proxy.stop();\r\n        softly.assertAll();\r\n    }\r\n```\r\nError I see in the allure report:\r\n```\r\nInvalid element state [[id*=&#39;match-calendar-link&#39;][3]]: element click intercepted: Element &lt;a id=&quot;3__match-calendar-link&quot; class=&quot;zh Eh&quot;&gt;...&lt;/a&gt; is not clickable at point (690, 296). Other element would receive the click: &lt;div class=&quot;Mg&quot;&gt;&lt;/div&gt;\r\nScreenshot: file:/Users/jenkins/workspace/UI-SANDBOX/build/reports/tests/1653409276041.25.png\r\nPage source: file:/Users/jenkins/workspace/UI-SANDBOX/build/reports/tests/1653409276041.25.html\r\nTimeout: 10 s.\r\nCaused by: ElementClickInterceptedException: element click intercepted: Element &lt;a id=&quot;3__match-calendar-link&quot; class=&quot;zh Eh&quot;&gt;...&lt;/a&gt; is not clickable at point (690, 296). Other element would receive the click: &lt;div class=&quot;Mg&quot;&gt;&lt;/div&gt;\r\n```\r\n\r\nI expect the test to be retried if that click method fails, but in allure report I can see no retries, though if method doesn&#39;t fail at this point but later due to assertion - it will be retried. Hope somebody can help me to figure this out, thanks in advance","title":"TestNG doesn&#39;t re-run all failed methods after ElementClickInterceptedException","body":"<p>I have an automation framework TestNG + Selenide which runs jobs on Jenkins and provides Allure reports.\nI've added a test class with some simple tests. One test occasionally fails when trying to click an element, but rerunning fixes the problem, so naturally I wanted to introduce retries for this test.</p>\n<p>Here comes the problem - failed tests are not retried. I've tried IRetryAnalyzer/RetryAnalyzerCount added via annotation transformer or adding retryAnalyzer to @Test annotation, but no success.</p>\n<p>My current configuration:</p>\n<pre><code>public class RetryAnalyzer extends RetryAnalyzerCount {\n\n    private static final int MAX_RETRY_ATTEMPTS = 3;\n\n    public RetryAnalyzer() {\n        setCount(MAX_RETRY_ATTEMPTS);\n    }\n\n    @Override\n    public boolean retryMethod(ITestResult iTestResult) {\n        return true;\n    }\n}\n</code></pre>\n<pre><code>public class AnnotationTransformer implements IAnnotationTransformer {\n\n    private final Logger logger = LoggerFactory.getLogger(AnnotationTransformer.class);\n\n    @Override\n    public void transform(ITestAnnotation annotation, Class testClass, Constructor testConstructor, Method testMethod) {\n        annotation.setRetryAnalyzer(RetryAnalyzer.class);\n        logger.debug(&quot;SET RETRY ANALYZER FOR TEST {}&quot;, testMethod.getName());\n    }\n}\n</code></pre>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE suite SYSTEM &quot;http://testng.org/testng-1.0.dtd&quot;&gt;\n\n&lt;suite name=&quot;E2 widget tests&quot; thread-count=&quot;6&quot; parallel=&quot;classes&quot; data-provider-thread-count=&quot;3&quot;&gt;\n    &lt;listeners&gt;\n        &lt;listener class-name=&quot;framework.AnnotationTransformer&quot;/&gt;\n    &lt;/listeners&gt;\n    &lt;test name=&quot;E2 widgets - chrome&quot;&gt;\n        &lt;parameter name=&quot;browser&quot; value=&quot;chrome&quot;/&gt;\n        &lt;parameter name=&quot;width&quot; value=&quot;1366&quot;/&gt;\n        &lt;parameter name=&quot;height&quot; value=&quot;786&quot;/&gt;\n        &lt;packages&gt;\n            &lt;package name=&quot;tests.other.e2widgets&quot; /&gt;\n        &lt;/packages&gt;\n    &lt;/test&gt;\n\n&lt;/suite&gt;\n</code></pre>\n<p>My test + dataprovider it's using</p>\n<pre><code>    @DataProvider(name = &quot;countries-with-odds-widget-enabled&quot;, parallel = true)\n    public Object[][] countriesWithOddsWidgetEnabled() {\n        List&lt;String&gt; oddsWidgetCountries = sevWidgetSteps.getOddsWidgetCountries(configUrl);\n        List&lt;Object[]&gt; parameters = oddsWidgetCountries.stream().map(country -&gt; new Object[]{country}).collect(Collectors.toList());\n        return parameters.toArray(new Object[1][parameters.size()]);\n    }\n\n    @Test(description = &quot;Check odds widget for all countries&quot;,\n            dataProvider = &quot;countries-with-odds-widget-enabled&quot;\n    )\n    public void checkOddsWidgetsForEnabledCountries(String country) {\n        ...some code...\n\n        // here test fails because of ElementClickInterceptedException\n        $(By.id(&quot;3__match-calendar-link&quot;)).click();\n\n        proxy.stop();\n        softly.assertAll();\n    }\n</code></pre>\n<p>Error I see in the allure report:</p>\n<pre><code>Invalid element state [[id*='match-calendar-link'][3]]: element click intercepted: Element &lt;a id=&quot;3__match-calendar-link&quot; class=&quot;zh Eh&quot;&gt;...&lt;/a&gt; is not clickable at point (690, 296). Other element would receive the click: &lt;div class=&quot;Mg&quot;&gt;&lt;/div&gt;\nScreenshot: file:/Users/jenkins/workspace/UI-SANDBOX/build/reports/tests/1653409276041.25.png\nPage source: file:/Users/jenkins/workspace/UI-SANDBOX/build/reports/tests/1653409276041.25.html\nTimeout: 10 s.\nCaused by: ElementClickInterceptedException: element click intercepted: Element &lt;a id=&quot;3__match-calendar-link&quot; class=&quot;zh Eh&quot;&gt;...&lt;/a&gt; is not clickable at point (690, 296). Other element would receive the click: &lt;div class=&quot;Mg&quot;&gt;&lt;/div&gt;\n</code></pre>\n<p>I expect the test to be retried if that click method fails, but in allure report I can see no retries, though if method doesn't fail at this point but later due to assertion - it will be retried. Hope somebody can help me to figure this out, thanks in advance</p>\n"},{"tags":["java","visual-studio-code","encoding"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1671209137,"post_id":74827384,"comment_id":132057108,"body_markdown":"Please show your code - it&#39;s hard to help you find a problem in the code without seeing it. I suspect it&#39;s either a) the way you read it, perhaps using a default encoding; b) the way you display it, which may depend on the console support in the IDE. To determine whether b) is a problem, you should output the UTF-16 code point for each character, e.g. by using `charAt` to access each character, convert to `int` and display that.","body":"Please show your code - it&#39;s hard to help you find a problem in the code without seeing it. I suspect it&#39;s either a) the way you read it, perhaps using a default encoding; b) the way you display it, which may depend on the console support in the IDE. To determine whether b) is a problem, you should output the UTF-16 code point for each character, e.g. by using <code>charAt</code> to access each character, convert to <code>int</code> and display that."},{"owner":{"account_id":16468913,"reputation":23,"user_id":11898446,"display_name":"magistry"},"score":0,"creation_date":1671210651,"post_id":74827384,"comment_id":132057589,"body_markdown":"I added my full code. As I said, the problem is exclusive to VSCode, and if I get rid of the replaceAll, the Umlaute get transferred normally. Can you specify where/how exactly you want me to output each character?","body":"I added my full code. As I said, the problem is exclusive to VSCode, and if I get rid of the replaceAll, the Umlaute get transferred normally. Can you specify where/how exactly you want me to output each character?"},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1671211486,"post_id":74827384,"comment_id":132057800,"body_markdown":"Firstly, I&#39;d encourage you to specify the file encoding when you construct FileReader. Next, you may need to configure VSCode to specify the encoding of your *Java* code. (Or you could use `\\uxxxx` escaping for each of the non-ASCII characters in the `replaceAll` call.)\n\nTo work out exactly where the problem is, I&#39;d encourage you to create a [mcve] - it&#39;s likely to be about 10 lines of code instead of over 120. No need to read anything from disk (unless that&#39;s where the problem is) - hard-code the input text. I&#39;d *start* with just a hard-coded string that you print to the console.","body":"Firstly, I&#39;d encourage you to specify the file encoding when you construct FileReader. Next, you may need to configure VSCode to specify the encoding of your <i>Java</i> code. (Or you could use <code>\\uxxxx</code> escaping for each of the non-ASCII characters in the <code>replaceAll</code> call.)  To work out exactly where the problem is, I&#39;d encourage you to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> - it&#39;s likely to be about 10 lines of code instead of over 120. No need to read anything from disk (unless that&#39;s where the problem is) - hard-code the input text. I&#39;d <i>start</i> with just a hard-coded string that you print to the console."},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1671211531,"post_id":74827384,"comment_id":132057814,"body_markdown":"As for &quot;how you output each character&quot; - just use a `for` loop to go through each index in the string, e.g. `for (int i =0; i &lt; text.length(); i++) { System.out.println((int) text.charAt(i)); }`","body":"As for &quot;how you output each character&quot; - just use a <code>for</code> loop to go through each index in the string, e.g. <code>for (int i =0; i &lt; text.length(); i++) { System.out.println((int) text.charAt(i)); }</code>"},{"owner":{"account_id":16468913,"reputation":23,"user_id":11898446,"display_name":"magistry"},"score":0,"creation_date":1671214234,"post_id":74827384,"comment_id":132058578,"body_markdown":"hey man, i added the minimal reproducable example. The characters get messed up when I print them to the console after reading, and the replaceAll regex doesnt pick them up, which should mean that they are messed up not only in the console output, but also internally. Can you specify how exactly I should construct the FileReader with the encoding? My .txt is in UTF-8 with BOM, my java files are in normal UTF-8","body":"hey man, i added the minimal reproducable example. The characters get messed up when I print them to the console after reading, and the replaceAll regex doesnt pick them up, which should mean that they are messed up not only in the console output, but also internally. Can you specify how exactly I should construct the FileReader with the encoding? My .txt is in UTF-8 with BOM, my java files are in normal UTF-8"},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1671219456,"post_id":74827384,"comment_id":132059971,"body_markdown":"You can pass a `Charset` to the `FileReader` constructor. But I *suspect* the problem is actually with the encoding for the source code. That was why I was suggested hard-coding the text using a string literal with `\\uxxxx` escaping instead of reading from a file - to *really* make it minimal","body":"You can pass a <code>Charset</code> to the <code>FileReader</code> constructor. But I <i>suspect</i> the problem is actually with the encoding for the source code. That was why I was suggested hard-coding the text using a string literal with <code>\\uxxxx</code> escaping instead of reading from a file - to <i>really</i> make it minimal"},{"owner":{"account_id":16468913,"reputation":23,"user_id":11898446,"display_name":"magistry"},"score":0,"creation_date":1671221948,"post_id":74827384,"comment_id":132060646,"body_markdown":"Hey man, I think you solved it. I just changed all Files into UTF-8 and then passed the UTF-8 Charset into the FileReader. Now it reads the files correctly and modifies the string correctly. Before, the Reading would only work in ISO 8859-1 or W 1252 and the String modifications would only work in UTF-8, but now that I&#39;m doing the reading in UTF-8 as well, there are no more problems. And it also works in my main project, I also used the Charset for the FileWriter. Thank you so so much man :) Should Me or You write the solution as an answer so other people can reference it?","body":"Hey man, I think you solved it. I just changed all Files into UTF-8 and then passed the UTF-8 Charset into the FileReader. Now it reads the files correctly and modifies the string correctly. Before, the Reading would only work in ISO 8859-1 or W 1252 and the String modifications would only work in UTF-8, but now that I&#39;m doing the reading in UTF-8 as well, there are no more problems. And it also works in my main project, I also used the Charset for the FileWriter. Thank you so so much man :) Should Me or You write the solution as an answer so other people can reference it?"},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1671225960,"post_id":74827384,"comment_id":132061567,"body_markdown":"Well that doesn&#39;t make much sense in terms of the replacements, to be honest - there are so many places that could have been problematic that it&#39;s hard for me to know what was actually wrong. I suggest you write it up, after possibly editing your question to clarify it.","body":"Well that doesn&#39;t make much sense in terms of the replacements, to be honest - there are so many places that could have been problematic that it&#39;s hard for me to know what was actually wrong. I suggest you write it up, after possibly editing your question to clarify it."}],"answers":[{"tags":[],"owner":{"account_id":16468913,"reputation":23,"user_id":11898446,"display_name":"magistry"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671226427,"creation_date":1671226427,"answer_id":74829965,"question_id":74827384,"body_markdown":"I solved it by explicitly turning all java files and all .txt files into UTF-8 encoding (in the bottom bar in VSCode), setting UTF-8 as the standard encoding in the VSCode settings and modifying both the FileReader and FileWriter to work with the UTF-8 encoding like this:\r\n\r\n    FileReader fileReader = new FileReader(file, Charset.forName(&quot;UTF-8&quot;));\r\n    FileWriter fileWriter = new FileWriter(file, Charset.forName(&quot;UTF-8&quot;));\r\n","title":"Vscode doesn&#39;t recognize Umlaute (&#228;&#246;&#252;) when reading and writing files with Java","body":"<p>I solved it by explicitly turning all java files and all .txt files into UTF-8 encoding (in the bottom bar in VSCode), setting UTF-8 as the standard encoding in the VSCode settings and modifying both the FileReader and FileWriter to work with the UTF-8 encoding like this:</p>\n<pre><code>FileReader fileReader = new FileReader(file, Charset.forName(&quot;UTF-8&quot;));\nFileWriter fileWriter = new FileWriter(file, Charset.forName(&quot;UTF-8&quot;));\n</code></pre>\n"}],"owner":{"account_id":16468913,"reputation":23,"user_id":11898446,"display_name":"magistry"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":352,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1671226427,"creation_date":1671208967,"question_id":74827384,"body_markdown":"I have a Java project which reads from a .txt file and counts the frequency of every word and saves every word along with its frequency in a .stat file. The way I do this is by reading the file with a BufferedReader, using replaceAll to replace all special characters with spaces and then iterating through the words and finally writing into a .stat with a PrintWriter.\r\n\r\nThis program works fine if I run it in Eclipse.\r\n\r\nHowever, if I run it in VSCode, the Umlaute (&#228;&#246;&#252;) get recognized as Special characters and are removed from the words.\r\n\r\n\r\nIf I don&#39;t use a replaceAll and leave all the special characters in the text, they will get recognized and displayed normally in the .stat.\r\n\r\n\r\nIf I use `replaceAll(&quot;[^\\\\p{IsAlphabetic}+]&quot;)`, the Umlaute will get replaced by all kinds of weird Unicode characters (for Example Ăbermut instead of &#220;bermut).\r\n\r\n\r\nIf I use `replaceAll(&quot;[^a-zA-Z&#228;&#246;&#252;&#196;&#214;&#220;&#223;]&quot;)`, the Umlaute will just get replaced by spaces. The same happens if I mention the Umlaute via their Unicode.\r\n\r\nThis has to be a problem with the encoding in VSCode or perhaps Powershell, as it works fine in other IDEs.\r\n\r\nI already checked if Eclipse and VSCode use the same Jdk version, which they did. It&#39;s 17.0.5 and the only one installed on my machine.\r\n\r\nI also tried out all the different encoding settings in VSCode and I recreated the project from scratch after changing the settings, to no avail.\r\n\r\nHere&#39;s the code of the minimal reproducable problem:\r\n\r\n    import java.io.*;\r\n    \r\n    public class App {\r\n        static String s;\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            Reader reader = new Reader();\r\n            reader.readFile();\r\n        }\r\n    \r\n    }\r\n    \r\n    public class Reader {\r\n    \r\n        public void readFile() {\r\n            String s = null;\r\n            File file = new File(&quot;./src/textfile.txt&quot;);\r\n    \r\n            try (FileReader fileReader = new FileReader(file);\r\n                    BufferedReader bufferedReader = new BufferedReader(fileReader);) {\r\n                s = bufferedReader.readLine();\r\n    \r\n            } catch (FileNotFoundException ex) {\r\n                // TODO: handle exception\r\n    \r\n            } catch (IOException ex) {\r\n                System.out.println(&quot;IOException&quot;);\r\n            }\r\n    \r\n            System.out.println(s);\r\n            System.out.println(s.replaceAll(&quot;[a-zA-Z&#228;&#246;&#252;&#196;&#214;&#220;&#223;]&quot;, &quot; &quot;));\r\n        }\r\n    }\r\n\r\nMy textfile.txt contains the line &quot;abcABC&#228;&#246;&#252;&#196;&#214;&#220;&#223;&quot;.\r\nThe above program outputs \r\n\r\n    &#239;&#187;&#191;abcABC&#195;&#164;&#195;&#182;&#195;&#188;&#195;?&#195;?&#195;?&#195;?\r\n    &#239;&#187;&#191;      &#195;&#164;&#195;&#182;&#195;&#188;&#195;?&#195;?&#195;?&#195;?\r\n\r\nWhich shows that the problem is presumably in the Reader, as the glibberish Unicode symbols don&#39;t get picked up by the replaceAll.","title":"Vscode doesn&#39;t recognize Umlaute (&#228;&#246;&#252;) when reading and writing files with Java","body":"<p>I have a Java project which reads from a .txt file and counts the frequency of every word and saves every word along with its frequency in a .stat file. The way I do this is by reading the file with a BufferedReader, using replaceAll to replace all special characters with spaces and then iterating through the words and finally writing into a .stat with a PrintWriter.</p>\n<p>This program works fine if I run it in Eclipse.</p>\n<p>However, if I run it in VSCode, the Umlaute (äöü) get recognized as Special characters and are removed from the words.</p>\n<p>If I don't use a replaceAll and leave all the special characters in the text, they will get recognized and displayed normally in the .stat.</p>\n<p>If I use <code>replaceAll(&quot;[^\\\\p{IsAlphabetic}+]&quot;)</code>, the Umlaute will get replaced by all kinds of weird Unicode characters (for Example Ăbermut instead of Übermut).</p>\n<p>If I use <code>replaceAll(&quot;[^a-zA-ZäöüÄÖÜß]&quot;)</code>, the Umlaute will just get replaced by spaces. The same happens if I mention the Umlaute via their Unicode.</p>\n<p>This has to be a problem with the encoding in VSCode or perhaps Powershell, as it works fine in other IDEs.</p>\n<p>I already checked if Eclipse and VSCode use the same Jdk version, which they did. It's 17.0.5 and the only one installed on my machine.</p>\n<p>I also tried out all the different encoding settings in VSCode and I recreated the project from scratch after changing the settings, to no avail.</p>\n<p>Here's the code of the minimal reproducable problem:</p>\n<pre><code>import java.io.*;\n\npublic class App {\n    static String s;\n\n    public static void main(String[] args) {\n\n        Reader reader = new Reader();\n        reader.readFile();\n    }\n\n}\n\npublic class Reader {\n\n    public void readFile() {\n        String s = null;\n        File file = new File(&quot;./src/textfile.txt&quot;);\n\n        try (FileReader fileReader = new FileReader(file);\n                BufferedReader bufferedReader = new BufferedReader(fileReader);) {\n            s = bufferedReader.readLine();\n\n        } catch (FileNotFoundException ex) {\n            // TODO: handle exception\n\n        } catch (IOException ex) {\n            System.out.println(&quot;IOException&quot;);\n        }\n\n        System.out.println(s);\n        System.out.println(s.replaceAll(&quot;[a-zA-ZäöüÄÖÜß]&quot;, &quot; &quot;));\n    }\n}\n</code></pre>\n<p>My textfile.txt contains the line &quot;abcABCäöüÄÖÜß&quot;.\nThe above program outputs</p>\n<pre><code>ï»¿abcABCÃ¤Ã¶Ã¼Ã?Ã?Ã?Ã?\nï»¿      Ã¤Ã¶Ã¼Ã?Ã?Ã?Ã?\n</code></pre>\n<p>Which shows that the problem is presumably in the Reader, as the glibberish Unicode symbols don't get picked up by the replaceAll.</p>\n"},{"tags":["java","loops","switch-statement","do-while","do-loops"],"comments":[{"owner":{"account_id":4728704,"reputation":17022,"user_id":3824919,"display_name":"Tom"},"score":0,"creation_date":1671223575,"post_id":74829559,"comment_id":132061046,"body_markdown":"How come you&#39;ve heard about switch/case, but not about methods?","body":"How come you&#39;ve heard about switch/case, but not about methods?"}],"answers":[{"tags":[],"owner":{"account_id":27262881,"reputation":83,"user_id":20785457,"display_name":"Vense"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671226331,"creation_date":1671226331,"answer_id":74829956,"question_id":74829559,"body_markdown":"I am having difficulties in reading the code but I believe you are using multiple nested switch statements to create a game.\r\n\r\nThis approach can work, but it can also make your code difficult to read and maintain, especially if you have many different options and branches (i.e. switch in another switch and on and on.)\r\n\r\nI can suggest in order to improve your code, use **functions** to organize your code into **logical blocks**.\r\n\r\nFor example, you could define a function for each action that the player can take, and call that function from the appropriate case in the switch statement. This would make it easier to see the different options available to the player and to modify the behavior of the game. Read more about [Functions][1].\r\n\r\n```\r\nswitch (choice) {\r\n        case 1: \r\n          // Player wants to join the rebellion\r\n          handleJoinRebellion(reader, name);\r\n          break;\r\n        case 2:\r\n          // Player does not want to join the rebellion\r\n          handleDeclineRebellion();\r\n          break;\r\n      }\r\n\r\n```\r\n```\r\nvoid handleJoinRebellion(String reader, String name) {\r\n   // Something here\r\n}\r\nvoid handleDeclineRebellion(input) {\r\n   // Something here\r\n}\r\n```\r\n\r\n\r\nYou could also consider using an Object-Oriented (OOP) approach, where an object with its own behavior represents each action. This would allow you to encapsulate the behavior of each action in a separate class, which can make your code more modular and easier to understand (Just like what I said, I am having difficulties in reading it).\r\n\r\nCorrect me if I am wrong. I hope this helps!\r\n\r\n\r\n  [1]: https://www.programiz.com/java-programming/methods","title":"i just did switch-case in a switch-case... in a switch-case. There maybe be a better way to do it right?","body":"<p>I am having difficulties in reading the code but I believe you are using multiple nested switch statements to create a game.</p>\n<p>This approach can work, but it can also make your code difficult to read and maintain, especially if you have many different options and branches (i.e. switch in another switch and on and on.)</p>\n<p>I can suggest in order to improve your code, use <strong>functions</strong> to organize your code into <strong>logical blocks</strong>.</p>\n<p>For example, you could define a function for each action that the player can take, and call that function from the appropriate case in the switch statement. This would make it easier to see the different options available to the player and to modify the behavior of the game. Read more about <a href=\"https://www.programiz.com/java-programming/methods\" rel=\"nofollow noreferrer\">Functions</a>.</p>\n<pre><code>switch (choice) {\n        case 1: \n          // Player wants to join the rebellion\n          handleJoinRebellion(reader, name);\n          break;\n        case 2:\n          // Player does not want to join the rebellion\n          handleDeclineRebellion();\n          break;\n      }\n\n</code></pre>\n<pre><code>void handleJoinRebellion(String reader, String name) {\n   // Something here\n}\nvoid handleDeclineRebellion(input) {\n   // Something here\n}\n</code></pre>\n<p>You could also consider using an Object-Oriented (OOP) approach, where an object with its own behavior represents each action. This would allow you to encapsulate the behavior of each action in a separate class, which can make your code more modular and easier to understand (Just like what I said, I am having difficulties in reading it).</p>\n<p>Correct me if I am wrong. I hope this helps!</p>\n"}],"owner":{"account_id":27276318,"reputation":13,"user_id":20796874,"display_name":"Ramm 4"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1671335311,"accepted_answer_id":74829956,"answer_count":1,"score":0,"last_activity_date":1671226331,"creation_date":1671223235,"question_id":74829559,"body_markdown":"```\r\nimport&#160;java.io.*;\r\nimport&#160;java.util.Scanner;\r\n\r\npublic&#160;class&#160;MyGame&#160;{\r\n&#160;&#160;public&#160;static&#160;void&#160;main(String&#160;argv[])&#160;throws&#160;IOException&#160;{\r\n&#160;&#160;&#160;&#160;\r\n&#160;&#160;&#160;&#160;String&#160;prompt;\r\n&#160;&#160;&#160;&#160;\r\n&#160;&#160;&#160;&#160;Scanner&#160;scanner&#160;=&#160;new&#160;Scanner(System.&#160;in);&#160;\r\n&#160;&#160;&#160;&#160;\r\n//TITLE ASCII text art \r\n\r\n\r\n&#160;&#160;&#160;&#160;do&#160;{\r\n&#160;&#160;&#160;&#160;&#160;&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;BufferedReader&#160;reader&#160;=&#160;new&#160;BufferedReader(new&#160;InputStreamReader(System.in));\r\n&#160;&#160;&#160;&#160;&#160;&#160;System.out.print(&quot;What&#160;is&#160;your&#160;name?:&#160;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;String&#160;name&#160;=&#160;reader.readLine();\r\n&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;Hello,&#160;comrade&#160;&quot;&#160;+&#160;name&#160;+&#160;&quot;.&#160;Do&#160;you&#160;want&#160;to&#160;be&#160;a&#160;rebel?&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;int&#160;i&#160;;\r\n&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;[1]&#160;Yes,&#160;i&#160;want&#160;to&#160;fight&#160;for&#160;Freedom!&#160;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;[2]&#160;No,&#160;i&#160;want&#160;to&#160;live&#160;oppressed.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;i&#160;=&#160;Integer.parseInt(reader.readLine());\r\n&#160;&#160;&#160;&#160;&#160;&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;switch&#160;(i)&#160;{\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;case&#160;&#160;1:&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;///&#160;00:13&#160;///&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;go&#160;to&#160;a&#160;abandoned&#160;industrial&#160;building.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;go&#160;inside,&#160;because&#160;you&#160;think&#160;there&#160;is&#160;the&#160;man&#160;you&#160;need&#160;to&#160;contact.&quot;);\r\n&#160;// ASCII text art\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;A&#160;man&#160;comes&#160;to&#160;you.&#160;He&#160;is&#160;young,&#160;dressed&#160;in&#160;an&#160;uniform.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;???:&#160;Here&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;He&#160;passes&#160;you&#160;an&#160;military&#160;uniform.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;Grogor:&#160;My&#160;name&#160;is&#160;Grigor.&#160;You&#160;should&#160;be&#160;&quot;+name+&quot;?&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;int&#160;n&#160;;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;[1]&#160;Yes&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;[2]&#160;No&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;n&#160;=&#160;Integer.parseInt(reader.readLine());\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;switch&#160;(n)&#160;{\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;case&#160;&#160;1:&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;Grigor:&#160;So&#160;you&#160;are&#160;the&#160;right&#160;one!&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;Grigor:&#160;You&#160;have&#160;your&#160;first&#160;mission.&#160;You&#160;need&#160;to&#160;get&#160;documents&#160;for&#160;me.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;Grigor:&#160;The&#160;documents&#160;are&#160;in&#160;the&#160;mayor&#39;s&#160;bureau.&#160;You&#160;need&#160;to&#160;infiltrate&#160;there&#160;in&#160;the&#160;night.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;Grigor:&#160;We&#160;think&#160;that&#160;there&#160;are&#160;in&#160;Room&#160;B102.&#160;The&#160;documents&#160;are&#160;about&#160;the&#160;payments&#160;of&#160;the&#160;city&#160;for&#160;12.1989&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;Grigor:&#160;I&#160;wish&#160;you&#160;luck!&#160;Don&#39;t&#160;forget...&#160;GOLDEN&#160;RING&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;are&#160;ready&#160;to&#160;do&#160;the&#160;job.&#160;It&#160;will&#160;be&#160;dangerous.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;///&#160;23:46&#160;///&#160;on&#160;the&#160;next&#160;day.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;stand&#160;in&#160;front&#160;of&#160;the&#160;political&#160;bureau&#160;of&#160;city.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n// ASCII text art\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;break&#160;in&#160;the&#160;building.&#160;Sweat&#160;runs&#160;down&#160;your&#160;back.&#160;It&#39;s&#160;cold&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;go&#160;to&#160;room&#160;B102...&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;It&#39;s&#160;locked&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;What&#160;do&#160;you&#160;do&#160;now?&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;int&#160;lock&#160;;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;[1]&#160;Try&#160;to&#160;break&#160;in&#160;with&#160;force.&#160;You&#160;kick&#160;the&#160;door.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;[2]&#160;Look&#160;around&#160;for&#160;a&#160;key.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;lock&#160;=&#160;Integer.parseInt(reader.readLine());\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;switch&#160;(lock)&#160;{\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;case&#160;&#160;1:&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;kick&#160;the&#160;door.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;The&#160;sound&#160;echoes&#160;in&#160;the&#160;corridors.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;enter&#160;Room&#160;B102.&#160;You&#160;see&#160;a&#160;window&#160;in&#160;front&#160;of&#160;you.&#160;Outside&#160;you&#160;see&#160;a&#160;block&#160;of&#160;flats&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;On&#160;one&#160;of&#160;the&#160;balkons&#160;is&#160;a&#160;man&#160;smoking.&#160;Does&#160;he&#160;heared&#160;you?&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;search&#160;for&#160;the&#160;documents&#160;in&#160;the&#160;desk.&#160;Not&#160;long&#160;after&#160;you&#160;hear&#160;steps&#160;in&#160;the&#160;corridor.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;panic&#160;and&#160;try&#160;to&#160;open&#160;the&#160;window&#160;and&#160;jump&#160;outside.&#160;Someone&#160;is&#160;coming!&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;Police&#160;Officer:&#160;STAY&#160;RIGHT&#160;THERE!&#160;YOU&#160;ARE&#160;ARRESTED,&#160;BASTER!&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;They&#160;send&#160;you&#160;to&#160;a&#160;prison&#160;camp.&#160;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;are&#160;hungry.&#160;You&#160;need&#160;to&#160;work.&#160;You&#160;feel&#160;sick.&quot;);\r\n// ASCII text art\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;case&#160;&#160;2:&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;look&#160;around.&#160;You&#160;see&#160;down&#160;the&#160;dark&#160;corridor&#160;the&#160;staff&#160;room.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;The&#160;door&#160;is&#160;open.&#160;You&#160;enter&#160;the&#160;room.&#160;There&#160;are&#160;keys&#160;hanging&#160;on&#160;the&#160;wall.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;One&#160;of&#160;them&#160;has&#160;B102&#160;writen&#160;on.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;unlock&#160;Room&#160;B102&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;enter&#160;and&#160;see&#160;a&#160;desk&#160;on&#160;the&#160;right,&#160;windows&#160;in&#160;front,&#160;on&#160;the&#160;wall&#160;is&#160;picture&#160;of&#160;the&#160;prime&#160;minister.&#160;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;On&#160;the&#160;desk&#160;are&#160;scraps&#160;of&#160;paper&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;Next&#160;to&#160;it&#160;a&#160;cabinet&#160;with&#160;folders.&#160;You&#160;search&#160;for&#160;the&#160;documents.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;need&#160;to&#160;choose,&#160;which&#160;folder&#160;you&#160;need?&#160;Titles:&#160;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;int&#160;doc&#160;;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;[1]&#160;Budget&#160;-&#160;City&#160;GOBROVSKA&#160;XXII.1989&quot;);&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;//RIGHT&#160;ONES\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;[2]&#160;Deposits&#160;and&#160;Withdrawals&#160;-&#160;City&#160;GOBROVSKA&#160;XXI.1989&quot;);&#160;&#160;&#160;&#160;//FALSE&#160;DOCS\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;[3]&#160;Budget&#160;-&#160;Cityhall&#160;Project&#160;Nr.&#160;423984&quot;);&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;//FALSE&#160;DOCS\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc&#160;=&#160;Integer.parseInt(reader.readLine());\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;switch&#160;(doc)&#160;{\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;case&#160;&#160;1:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;//RICHTIGE\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;doc&#160;1&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;get&#160;the&#160;document&#160;and&#160;run&#160;away.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;walt&#160;to&#160;your&#160;home&#160;as&#160;fast&#160;as&#160;possible.&#160;You&#160;feel&#160;your&#160;breath&#160;in&#160;the&#160;throat&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;enter&#160;the&#160;elevator&#160;of&#160;your&#160;block&#160;of&#160;flats.&#160;You&#160;throw&#160;the&#160;folder&#160;on&#160;the&#160;floor.&#160;You&#160;go&#160;to&#160;sleep&#160;with&#160;your&#160;clothes&#160;on.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&#160;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&#160;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&#160;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;///&#160;09:26&#160;///&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;Knocking&#160;on&#160;the&#160;door.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;Who&#160;can&#160;it&#160;be?&#160;DID&#160;THEY&#160;CATCH&#160;YOU?&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;You:&#160;Who&#160;is&#160;there?&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(name&#160;+&#160;&quot;&#160;It&#39;s&#160;me.&#160;You&#160;remember...&#160;GOLDEN&#160;RING&quot;&#160;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;open&#160;the&#160;door.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n// ASCII text art\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;Grigor:&#160;It&#39;s&#160;me&#160;&quot;+&#160;name&#160;+&quot;.&#160;Do&#160;you&#160;have&#160;the&#160;documents?&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;pass&#160;Grigor&#160;the&#160;documents.&quot;);&#160;&#160;&#160;&#160;//&#160;RIGHT&#160;DOCS\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;Grigor:&#160;...&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;Grigor:&#160;That&#160;are&#160;the&#160;right&#160;one.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;Grigor&#160;pulls&#160;out&#160;a&#160;lighter.&#160;He&#160;sets&#160;the&#160;Folder&#160;in&#160;flames&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;Grigor:&#160;We&#160;don&#39;t&#160;need&#160;evidence,&#160;don&#39;t&#160;we?&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;I&#160;will&#160;be&#160;honest&#160;with&#160;you...&#160;we&#160;actually&#160;didn&#39;t&#160;need&#160;these&#160;documents.&#160;Let&#39;s&#160;say&#160;it&#160;was&#160;a&#160;test&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;Ah&#160;don&#39;t&#160;look&#160;at&#160;me&#160;like&#160;that.&#160;We&#160;just&#160;need&#160;to&#160;know&#160;if&#160;you&#160;are&#160;spy&#160;or&#160;not.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;You&#160;need&#160;that&#160;one.&#160;Wait&#160;for&#160;next&#160;instructions...&#160;And&#160;get&#160;this...&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;int&#160;gun&#160;;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;[1]&#160;You&#160;strech&#160;your&#160;hand...&quot;);&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;//RIGHT&#160;DOCS\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;[2]&#160;You&#160;look&#160;at&#160;him...&quot;);&#160;&#160;&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;gun&#160;=&#160;Integer.parseInt(reader.readLine());\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;Grigor&#160;passes&#160;you&#160;a&#160;handgun&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;He&#160;laughs&#160;at&#160;you,&#160;while&#160;pushing&#160;the&#160;button&#160;of&#160;the&#160;elevator.&#160;He&#160;has&#160;one&#160;teeth&#160;missing.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;I&#160;needed&#160;to&#160;kill&#160;you&#160;with&#160;that&#160;one...&#160;hahaha&#160;welcome&#160;in&#160;small&#160;one.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;He&#160;lefts.&#160;You&#160;look&#160;at&#160;the&#160;gun&#160;in&#160;your&#160;hand&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;case&#160;&#160;2:&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;get&#160;the&#160;document&#160;and&#160;run&#160;away.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;walt&#160;to&#160;your&#160;home&#160;as&#160;fast&#160;as&#160;possible.&#160;You&#160;feel&#160;your&#160;breath&#160;in&#160;the&#160;throat&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;enter&#160;the&#160;elevator&#160;of&#160;your&#160;block&#160;of&#160;flats.&#160;You&#160;throw&#160;the&#160;folder&#160;on&#160;the&#160;floor.&#160;You&#160;go&#160;to&#160;sleep&#160;with&#160;your&#160;clothes&#160;on.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&#160;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&#160;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&#160;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;///&#160;09:26&#160;///&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;Knocking&#160;on&#160;the&#160;door.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;Who&#160;can&#160;it&#160;be?&#160;DID&#160;THEY&#160;CATCH&#160;YOU?&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;You:&#160;Who&#160;is&#160;there?&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(name&#160;+&#160;&quot;&#160;It&#39;s&#160;me.&#160;You&#160;remember...&#160;GOLDEN&#160;RING&quot;&#160;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;open&#160;the&#160;door.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n// ASCII text art\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;Grigor:&#160;It&#39;s&#160;me&#160;&quot;+&#160;name&#160;+&quot;.&#160;Do&#160;you&#160;have&#160;the&#160;documents?&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;pass&#160;Grigor&#160;the&#160;documents.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;Grigor:&#160;Deposits&#160;and&#160;Withdrawals&#160;-&#160;City&#160;GOBROVSKA&#160;...&#160;The&#160;Date&#160;is&#160;XXI.1989.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;Grigor:&#160;WE&#160;NEEDED&#160;THE&#160;ONE&#160;FOR&#160;12.1989,&#160;NOT&#160;FOR&#160;11.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;Grigor:&#160;ARE&#160;YOU&#160;A&#160;SPY&#160;YOU&#160;BASTERED!?&#160;DO&#160;YOU&#160;WANT&#160;TO&#160;SABOTAGE&#160;US?&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;int&#160;grigor&#160;;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;[1]&#160;&gt;&gt;&#160;NO.&#160;IT&#160;WAS&#160;A&#160;FAILURE!...&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;[2]&#160;&gt;&gt;&#160;Stay&#160;in&#160;silence&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;grigor&#160;=&#160;Integer.parseInt(reader.readLine());\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;switch&#160;(grigor)&#160;{\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;case&#160;&#160;1:&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;GRIGOR&#160;PULLS&#160;OUT&#160;A&#160;GUN&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// ASCII text art\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;default:&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;GRIGOR&#160;PULLS&#160;OUT&#160;A&#160;GUN&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;// ASCII text art\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}&#160;//&#160;end&#160;of&#160;switch\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;case&#160;&#160;3:&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;get&#160;the&#160;document&#160;and&#160;run&#160;away.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;walt&#160;to&#160;your&#160;home&#160;as&#160;fast&#160;as&#160;possible.&#160;You&#160;feel&#160;your&#160;breath&#160;in&#160;the&#160;throat&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;enter&#160;the&#160;elevator&#160;of&#160;your&#160;block&#160;of&#160;flats.&#160;You&#160;throw&#160;the&#160;folder&#160;on&#160;the&#160;floor.&#160;You&#160;go&#160;to&#160;sleep&#160;with&#160;your&#160;clothes&#160;on.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&#160;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&#160;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&#160;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;///&#160;09:26&#160;///&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;Knocking&#160;on&#160;the&#160;door.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;Who&#160;can&#160;it&#160;be?&#160;DID&#160;THEY&#160;CATCH&#160;YOU?&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;You:&#160;Who&#160;is&#160;there?&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(name&#160;+&#160;&quot;&#160;It&#39;s&#160;me.&#160;You&#160;remember...&#160;GOLDEN&#160;RING&quot;&#160;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;open&#160;the&#160;door.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n// ASCII text art\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;Grigor:&#160;It&#39;s&#160;me&#160;&quot;+&#160;name&#160;+&quot;.&#160;Do&#160;you&#160;have&#160;the&#160;documents?&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;pass&#160;Grigor&#160;the&#160;documents.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;Grigor:&#160;WE&#160;NEEDED&#160;THE&#160;BUDGET&#160;OF&#160;THE&#160;CITY&#160;NOT&#160;FOR&#160;ONE&#160;PROJECT&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;Grigor:&#160;ARE&#160;YOU&#160;A&#160;SPY&#160;YOU&#160;BASTERED!?&#160;DO&#160;YOU&#160;WANT&#160;TO&#160;SABOTAGE&#160;US?&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;int&#160;grigorr&#160;;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;[1]&#160;&gt;&gt;&#160;NO.&#160;IT&#160;WAS&#160;A&#160;FAILURE!...&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;[2]&#160;&gt;&gt;&#160;Stay&#160;in&#160;silence&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;grigorr&#160;=&#160;Integer.parseInt(reader.readLine());\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;switch&#160;(grigorr)&#160;{\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;case&#160;&#160;1:&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;GRIGOR&#160;PULLS&#160;OUT&#160;A&#160;GUN&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/ASCII text art\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;default:&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;GRIGOR&#160;PULLS&#160;OUT&#160;A&#160;GUN&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;// ASCII text art\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}&#160;//&#160;end&#160;of&#160;switch\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;default:&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;didn&#39;t&#160;deside&#160;right.&#160;Only&#160;[1,2&#160;or&#160;3]&#160;is&#160;possible.&#160;You&#160;leave...&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;failed&#160;the&#160;mission.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;live&#160;your&#160;live.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;One&#160;day&#160;the&#160;secret&#160;police&#160;comes&#160;to&#160;your&#160;house.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;They&#160;send&#160;you&#160;to&#160;a&#160;prison&#160;camp.&#160;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;found&#160;out&#160;that&#160;your&#160;neighbor&#160;called&#160;on&#160;you.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;are&#160;hungry.&#160;You&#160;need&#160;to&#160;work.&#160;You&#160;feel&#160;sick.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;//ASCII text art\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}&#160;//&#160;end&#160;of&#160;switch\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;default:&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;didn&#39;t&#160;deside&#160;right.&#160;Only&#160;[1&#160;or&#160;2]&#160;is&#160;possible.&#160;You&#160;leave&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;failed&#160;the&#160;mission.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;live&#160;your&#160;live.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;One&#160;day&#160;the&#160;secret&#160;police&#160;comes&#160;to&#160;your&#160;house.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;They&#160;send&#160;you&#160;to&#160;a&#160;prison&#160;camp.&#160;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;found&#160;out&#160;that&#160;your&#160;neighbor&#160;called&#160;on&#160;you.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;are&#160;hungry.&#160;You&#160;need&#160;to&#160;work.&#160;You&#160;feel&#160;sick.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// ASCII text art\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}&#160;//&#160;end&#160;of&#160;switch\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;default:&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;Grigor:&#160;You&#160;are&#160;not&#160;the&#160;one&#160;we&#160;need.&#160;What&#160;are&#160;you&#160;doing&#160;here&#160;than?&#160;Go&#160;away.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;are&#160;send&#160;outside.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;live&#160;your&#160;live&#160;like&#160;always.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;One&#160;day&#160;the&#160;secret&#160;police&#160;comes&#160;to&#160;your&#160;house.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;They&#160;send&#160;you&#160;to&#160;a&#160;prison&#160;camp.&#160;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;found&#160;out&#160;that&#160;your&#160;neighbor&#160;called&#160;on&#160;you.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;are&#160;hungry.&#160;You&#160;need&#160;to&#160;work.&#160;You&#160;feel&#160;sick.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// ASCII text art\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}&#160;//&#160;end&#160;of&#160;switch\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;case&#160;&#160;2:&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;live&#160;your&#160;live.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;One&#160;day&#160;the&#160;secret&#160;police&#160;comes&#160;to&#160;your&#160;house.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;They&#160;send&#160;you&#160;to&#160;a&#160;prison&#160;camp.&#160;&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;found&#160;out&#160;that&#160;your&#160;neighbor&#160;called&#160;on&#160;you.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;&gt;&gt;&#160;You&#160;are&#160;hungry.&#160;You&#160;need&#160;to&#160;work.&#160;You&#160;feel&#160;sick.&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// ASCII text art\r\n\r\n\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;default:&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(&quot;ERROR.&#160;Only&#160;1&#160;or&#160;2&#160;are&#160;possible!&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;}&#160;//&#160;end&#160;of&#160;switch\r\n&#160;&#160;&#160;&#160;&#160;&#160;\r\n&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(name&#160;+&#160;&quot;&#160;,&#160;Do&#160;you&#160;want&#160;to&#160;play&#160;one&#160;more&#160;time?&#160;If&#160;Yes&#160;tipp&#160;[1]&#160;and&#160;ENTER,&#160;if&#160;not&#160;[0]&quot;);\r\n&#160;&#160;&#160;&#160;&#160;&#160;prompt&#160;=&#160;scanner.next().toUpperCase();;&#160;&#160;&#160;&#160;\r\n&#160;&#160;&#160;&#160;}while(prompt.equals(&quot;1&quot;));&#160;\r\n&#160;&#160;}\r\n}\r\n```\r\n\r\nThe thing is, I&#39;m not sure how to do it right... it will be also awsome, if after a false answer you could just loop to the question youve answered wrong and not loop to the beginning. First i thought hmmm i could make some more do-while loops, but won&#39;t be overkill?\r\n\r\nI am total nood and the whole code is a mess.`your text`","title":"i just did switch-case in a switch-case... in a switch-case. There maybe be a better way to do it right?","body":"<pre><code>import java.io.*;\nimport java.util.Scanner;\n\npublic class MyGame {\n  public static void main(String argv[]) throws IOException {\n    \n    String prompt;\n    \n    Scanner scanner = new Scanner(System. in); \n    \n//TITLE ASCII text art \n\n\n    do {\n      \n      BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));\n      System.out.print(&quot;What is your name?: &quot;);\n      String name = reader.readLine();\n      System.out.println(&quot;&quot;);\n      System.out.println(&quot;Hello, comrade &quot; + name + &quot;. Do you want to be a rebel?&quot;);\n      System.out.println(&quot;&quot;);\n      \n      int i ;\n      System.out.println(&quot;[1] Yes, i want to fight for Freedom! &quot;);\n      System.out.println(&quot;[2] No, i want to live oppressed.&quot;);\n      i = Integer.parseInt(reader.readLine());\n      \n      switch (i) {\n        case  1: \n              System.out.println(&quot;&quot;);\n          System.out.println(&quot;/// 00:13 ///&quot;);\n          System.out.println(&quot;&gt;&gt; You go to a abandoned industrial building.&quot;);\n          System.out.println(&quot;&gt;&gt; You go inside, because you think there is the man you need to contact.&quot;);\n // ASCII text art\n          System.out.println(&quot;&quot;);\n          System.out.println(&quot;&gt;&gt; A man comes to you. He is young, dressed in an uniform.&quot;);\n          System.out.println(&quot;???: Here&quot;);\n          System.out.println(&quot;&gt;&gt; He passes you an military uniform.&quot;);\n          System.out.println(&quot;Grogor: My name is Grigor. You should be &quot;+name+&quot;?&quot;);\n          \n          int n ;\n          System.out.println(&quot;[1] Yes&quot;);\n          System.out.println(&quot;[2] No&quot;);\n          n = Integer.parseInt(reader.readLine());\n          \n          switch (n) {\n            case  1: \n                  System.out.println(&quot;Grigor: So you are the right one!&quot;);\n                  System.out.println(&quot;Grigor: You have your first mission. You need to get documents for me.&quot;);\n              System.out.println(&quot;Grigor: The documents are in the mayor's bureau. You need to infiltrate there in the night.&quot;);\n              System.out.println(&quot;Grigor: We think that there are in Room B102. The documents are about the payments of the city for 12.1989&quot;);\n              System.out.println(&quot;Grigor: I wish you luck! Don't forget... GOLDEN RING&quot;);\n              System.out.println(&quot;&quot;);\n              System.out.println(&quot;&gt;&gt; You are ready to do the job. It will be dangerous.&quot;);\n              System.out.println(&quot;/// 23:46 /// on the next day.&quot;);\n              System.out.println(&quot;&gt;&gt; You stand in front of the political bureau of city.&quot;);\n              System.out.println(&quot;&quot;);\n// ASCII text art\n              System.out.println(&quot;&gt;&gt; You break in the building. Sweat runs down your back. It's cold&quot;);\n              System.out.println(&quot;&gt;&gt; You go to room B102...&quot;);\n              System.out.println(&quot;&gt;&gt; It's locked&quot;);\n              System.out.println(&quot;&gt;&gt; What do you do now?&quot;);\n              System.out.println(&quot;&quot;);\n          int lock ;\n          System.out.println(&quot;[1] Try to break in with force. You kick the door.&quot;);\n          System.out.println(&quot;[2] Look around for a key.&quot;);\n          System.out.println(&quot;&quot;);\n          lock = Integer.parseInt(reader.readLine());\n              \n              switch (lock) {\n                case  1: \n                  System.out.println(&quot;&gt;&gt; You kick the door.&quot;);\n                  System.out.println(&quot;&gt;&gt; The sound echoes in the corridors.&quot;);\n                  System.out.println(&quot;&gt;&gt; You enter Room B102. You see a window in front of you. Outside you see a block of flats&quot;);\n                  System.out.println(&quot;&gt;&gt; On one of the balkons is a man smoking. Does he heared you?&quot;);\n                  System.out.println(&quot;&gt;&gt; You search for the documents in the desk. Not long after you hear steps in the corridor.&quot;);\n                  System.out.println(&quot;&gt;&gt; You panic and try to open the window and jump outside. Someone is coming!&quot;);\n                  System.out.println(&quot;Police Officer: STAY RIGHT THERE! YOU ARE ARRESTED, BASTER!&quot;);\n                  System.out.println(&quot;&quot;);\n                  System.out.println(&quot;&quot;);\n                  \n                  System.out.println(&quot;&gt;&gt; They send you to a prison camp. &quot;);\n               \n               System.out.println(&quot;&gt;&gt; You are hungry. You need to work. You feel sick.&quot;);\n// ASCII text art\n        System.out.println(&quot;&quot;);\n                  break;\n                case  2: \n                  System.out.println(&quot;&quot;);\n                  System.out.println(&quot;&gt;&gt; You look around. You see down the dark corridor the staff room.&quot;);\n                  System.out.println(&quot;&gt;&gt; The door is open. You enter the room. There are keys hanging on the wall.&quot;);\n                  System.out.println(&quot;&gt;&gt; One of them has B102 writen on.&quot;);\n                  System.out.println(&quot;&gt;&gt; You unlock Room B102&quot;);\n                  System.out.println(&quot;&gt;&gt; You enter and see a desk on the right, windows in front, on the wall is picture of the prime minister. &quot;);\n                  System.out.println(&quot;&gt;&gt; On the desk are scraps of paper&quot;);\n                  System.out.println(&quot;&gt;&gt; Next to it a cabinet with folders. You search for the documents.&quot;);\n                  System.out.println(&quot;&gt;&gt; You need to choose, which folder you need? Titles: &quot;);\n                  System.out.println(&quot;&quot;);\n                  int doc ;\n          System.out.println(&quot;[1] Budget - City GOBROVSKA XXII.1989&quot;);                     //RIGHT ONES\n          System.out.println(&quot;[2] Deposits and Withdrawals - City GOBROVSKA XXI.1989&quot;);    //FALSE DOCS\n          System.out.println(&quot;[3] Budget - Cityhall Project Nr. 423984&quot;);                  //FALSE DOCS\n          System.out.println(&quot;&quot;);\n          doc = Integer.parseInt(reader.readLine());\n                  switch (doc) {\n                    case  1:                               //RICHTIGE\n                          System.out.println(&quot;doc 1&quot;);\n                      System.out.println(&quot;&gt;&gt; You get the document and run away.&quot;);\n                      System.out.println(&quot;&gt;&gt; You walt to your home as fast as possible. You feel your breath in the throat&quot;);\n                          System.out.println(&quot;&gt;&gt; You enter the elevator of your block of flats. You throw the folder on the floor. You go to sleep with your clothes on.&quot;);\n                          System.out.println(&quot; &quot;);\n                      System.out.println(&quot; &quot;);\n                      System.out.println(&quot; &quot;);\n                      System.out.println(&quot;/// 09:26 ///&quot;);\n                      System.out.println(&quot;&gt;&gt; Knocking on the door.&quot;);\n                      System.out.println(&quot;&gt;&gt; Who can it be? DID THEY CATCH YOU?&quot;);\n                      System.out.println(&quot;You: Who is there?&quot;);\n                      System.out.println(name + &quot; It's me. You remember... GOLDEN RING&quot; );\n                      System.out.println(&quot;&quot;);\n                      System.out.println(&quot;&gt;&gt; You open the door.&quot;);\n                      System.out.println(&quot;&quot;);\n// ASCII text art\n                      System.out.println(&quot;&quot;);\n                      System.out.println(&quot;Grigor: It's me &quot;+ name +&quot;. Do you have the documents?&quot;);\n                      System.out.println(&quot;&gt;&gt; You pass Grigor the documents.&quot;);    // RIGHT DOCS\n                      System.out.println(&quot;Grigor: ...&quot;);\n                      System.out.println(&quot;Grigor: That are the right one.&quot;);\n                      System.out.println(&quot;&quot;);\n                      System.out.println(&quot;&gt;&gt; Grigor pulls out a lighter. He sets the Folder in flames&quot;);\n                      System.out.println(&quot;Grigor: We don't need evidence, don't we?&quot;);\n                      System.out.println(&quot;I will be honest with you... we actually didn't need these documents. Let's say it was a test&quot;);\n                      System.out.println(&quot;Ah don't look at me like that. We just need to know if you are spy or not.&quot;);\n                      System.out.println(&quot;You need that one. Wait for next instructions... And get this...&quot;);\n                      int gun ;\n          System.out.println(&quot;[1] You strech your hand...&quot;);                     //RIGHT DOCS\n          System.out.println(&quot;[2] You look at him...&quot;);   \n          System.out.println(&quot;&quot;);\n          gun = Integer.parseInt(reader.readLine());\n                      System.out.println(&quot;&gt;&gt; Grigor passes you a handgun&quot;);\n                      System.out.println(&quot;&gt;&gt; He laughs at you, while pushing the button of the elevator. He has one teeth missing.&quot;);\n                      System.out.println(&quot;I needed to kill you with that one... hahaha welcome in small one.&quot;);\n                      System.out.println(&quot;&gt;&gt; He lefts. You look at the gun in your hand&quot;);\n                      \n                      System.out.println(&quot;&quot;);                                                                      \n                    \n                    \n                      break;\n                    case  2: \n                          System.out.println(&quot;&gt;&gt; You get the document and run away.&quot;);\n                      System.out.println(&quot;&gt;&gt; You walt to your home as fast as possible. You feel your breath in the throat&quot;);\n                          System.out.println(&quot;&gt;&gt; You enter the elevator of your block of flats. You throw the folder on the floor. You go to sleep with your clothes on.&quot;);\n                          System.out.println(&quot; &quot;);\n                      System.out.println(&quot; &quot;);\n                      System.out.println(&quot; &quot;);\n                      System.out.println(&quot;/// 09:26 ///&quot;);\n                      System.out.println(&quot;&gt;&gt; Knocking on the door.&quot;);\n                      System.out.println(&quot;&gt;&gt; Who can it be? DID THEY CATCH YOU?&quot;);\n                      System.out.println(&quot;You: Who is there?&quot;);\n                      System.out.println(name + &quot; It's me. You remember... GOLDEN RING&quot; );\n                      System.out.println(&quot;&quot;);\n                      System.out.println(&quot;&gt;&gt; You open the door.&quot;);\n                      System.out.println(&quot;&quot;);\n                      System.out.println(&quot;&quot;);\n// ASCII text art\n                      System.out.println(&quot;&quot;);\n                      System.out.println(&quot;Grigor: It's me &quot;+ name +&quot;. Do you have the documents?&quot;);\n                      System.out.println(&quot;&gt;&gt; You pass Grigor the documents.&quot;);\n                      System.out.println(&quot;Grigor: Deposits and Withdrawals - City GOBROVSKA ... The Date is XXI.1989.&quot;);\n                      System.out.println(&quot;Grigor: WE NEEDED THE ONE FOR 12.1989, NOT FOR 11.&quot;);\n                      System.out.println(&quot;Grigor: ARE YOU A SPY YOU BASTERED!? DO YOU WANT TO SABOTAGE US?&quot;);\n                      System.out.println(&quot;&quot;);\n                      int grigor ;\n          System.out.println(&quot;[1] &gt;&gt; NO. IT WAS A FAILURE!...&quot;);\n          System.out.println(&quot;[2] &gt;&gt; Stay in silence&quot;);\n          System.out.println(&quot;&quot;);\n          grigor = Integer.parseInt(reader.readLine());\n        switch (grigor) {\n          case  1: \n                  System.out.println(&quot;&quot;);\n                      System.out.println(&quot;&gt;&gt; GRIGOR PULLS OUT A GUN&quot;);\n        // ASCII text art\n            break;\n          default: \n                  System.out.println(&quot;&quot;);\n                      System.out.println(&quot;&gt;&gt; GRIGOR PULLS OUT A GUN&quot;);\n       // ASCII text art\n        System.out.println(&quot;&quot;);\n        } // end of switch\n                      \n                      break;\n                    case  3: \n                        System.out.println(&quot;&gt;&gt; You get the document and run away.&quot;);\n                      System.out.println(&quot;&gt;&gt; You walt to your home as fast as possible. You feel your breath in the throat&quot;);\n                          System.out.println(&quot;&gt;&gt; You enter the elevator of your block of flats. You throw the folder on the floor. You go to sleep with your clothes on.&quot;);\n                          System.out.println(&quot; &quot;);\n                      System.out.println(&quot; &quot;);\n                      System.out.println(&quot; &quot;);\n                      System.out.println(&quot;/// 09:26 ///&quot;);\n                      System.out.println(&quot;&gt;&gt; Knocking on the door.&quot;);\n                      System.out.println(&quot;&gt;&gt; Who can it be? DID THEY CATCH YOU?&quot;);\n                      System.out.println(&quot;You: Who is there?&quot;);\n                      System.out.println(name + &quot; It's me. You remember... GOLDEN RING&quot; );\n                      System.out.println(&quot;&quot;);\n                      System.out.println(&quot;&gt;&gt; You open the door.&quot;);\n                      System.out.println(&quot;&quot;);\n                      System.out.println(&quot;&quot;);\n// ASCII text art\n                      System.out.println(&quot;&quot;);\n                      System.out.println(&quot;Grigor: It's me &quot;+ name +&quot;. Do you have the documents?&quot;);\n                      System.out.println(&quot;&gt;&gt; You pass Grigor the documents.&quot;);\n                      System.out.println(&quot;Grigor: WE NEEDED THE BUDGET OF THE CITY NOT FOR ONE PROJECT&quot;);\n                      System.out.println(&quot;Grigor: ARE YOU A SPY YOU BASTERED!? DO YOU WANT TO SABOTAGE US?&quot;);\n                      System.out.println(&quot;&quot;);\n          int grigorr ;\n          System.out.println(&quot;[1] &gt;&gt; NO. IT WAS A FAILURE!...&quot;);\n          System.out.println(&quot;[2] &gt;&gt; Stay in silence&quot;);\n          System.out.println(&quot;&quot;);\n          grigorr = Integer.parseInt(reader.readLine());\n        switch (grigorr) {\n          case  1: \n                  System.out.println(&quot;&quot;);\n                      System.out.println(&quot;&gt;&gt; GRIGOR PULLS OUT A GUN&quot;);\n        /ASCII text art\n            break;\n          default: \n                  System.out.println(&quot;&quot;);\n                      System.out.println(&quot;&gt;&gt; GRIGOR PULLS OUT A GUN&quot;);\n       // ASCII text art\n        System.out.println(&quot;&quot;);\n        } // end of switch\n                      break;\n                    default: \n              System.out.println(&quot;&gt;&gt; You didn't deside right. Only [1,2 or 3] is possible. You leave...&quot;);\n                  System.out.println(&quot;&gt;&gt; You failed the mission.&quot;);\n                  System.out.println(&quot;&quot;);\n               System.out.println(&quot;&gt;&gt; You live your live.&quot;);\n               System.out.println(&quot;&gt;&gt; One day the secret police comes to your house.&quot;);\n               System.out.println(&quot;&gt;&gt; They send you to a prison camp. &quot;);\n               System.out.println(&quot;&gt;&gt; You found out that your neighbor called on you.&quot;);\n               System.out.println(&quot;&gt;&gt; You are hungry. You need to work. You feel sick.&quot;);\n        //ASCII text art\n                  } // end of switch\n                  break;\n                default: \n                  System.out.println(&quot;&gt;&gt; You didn't deside right. Only [1 or 2] is possible. You leave&quot;);\n                  System.out.println(&quot;&gt;&gt; You failed the mission.&quot;);\n                  System.out.println(&quot;&quot;);\n               System.out.println(&quot;&gt;&gt; You live your live.&quot;);\n               System.out.println(&quot;&gt;&gt; One day the secret police comes to your house.&quot;);\n               System.out.println(&quot;&gt;&gt; They send you to a prison camp. &quot;);\n               System.out.println(&quot;&gt;&gt; You found out that your neighbor called on you.&quot;);\n               System.out.println(&quot;&gt;&gt; You are hungry. You need to work. You feel sick.&quot;);\n        // ASCII text art\n        System.out.println(&quot;&quot;);\n                  \n              } // end of switch\n           \n              break;\n            \n            default: \n                  System.out.println(&quot;Grigor: You are not the one we need. What are you doing here than? Go away.&quot;);\n                  System.out.println(&quot;&gt;&gt; You are send outside.&quot;);\n                  System.out.println(&quot;&quot;);\n               System.out.println(&quot;&gt;&gt; You live your live like always.&quot;);\n               System.out.println(&quot;&gt;&gt; One day the secret police comes to your house.&quot;);\n               System.out.println(&quot;&gt;&gt; They send you to a prison camp. &quot;);\n               System.out.println(&quot;&gt;&gt; You found out that your neighbor called on you.&quot;);\n               System.out.println(&quot;&gt;&gt; You are hungry. You need to work. You feel sick.&quot;);\n        // ASCII text art\n        System.out.println(&quot;&quot;);\n\n          } // end of switch\n          \n        \n        \n          break;\n        case  2: \n               System.out.println(&quot;&quot;);\n               System.out.println(&quot;&gt;&gt; You live your live.&quot;);\n               System.out.println(&quot;&gt;&gt; One day the secret police comes to your house.&quot;);\n               System.out.println(&quot;&gt;&gt; They send you to a prison camp. &quot;);\n               System.out.println(&quot;&gt;&gt; You found out that your neighbor called on you.&quot;);\n               System.out.println(&quot;&gt;&gt; You are hungry. You need to work. You feel sick.&quot;);\n        // ASCII text art\n\n\n          break;\n        default: \n               System.out.println(&quot;ERROR. Only 1 or 2 are possible!&quot;);\n      } // end of switch\n      \n      System.out.println(name + &quot; , Do you want to play one more time? If Yes tipp [1] and ENTER, if not [0]&quot;);\n      prompt = scanner.next().toUpperCase();;    \n    }while(prompt.equals(&quot;1&quot;)); \n  }\n}\n</code></pre>\n<p>The thing is, I'm not sure how to do it right... it will be also awsome, if after a false answer you could just loop to the question youve answered wrong and not loop to the beginning. First i thought hmmm i could make some more do-while loops, but won't be overkill?</p>\n<p>I am total nood and the whole code is a mess.<code>your text</code></p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":7547772,"reputation":8583,"user_id":5730279,"display_name":"hc_dev"},"score":2,"creation_date":1671005419,"post_id":74795022,"comment_id":132001201,"body_markdown":"Can you explain, what is not working with your code? And what is your question exactly?","body":"Can you explain, what is not working with your code? And what is your question exactly?"},{"owner":{"account_id":262968,"reputation":767110,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"score":0,"creation_date":1671172041,"post_id":74795022,"comment_id":132045915,"body_markdown":"Why is your map inserting same key twice i.e. `Amit` ?","body":"Why is your map inserting same key twice i.e. <code>Amit</code> ?"}],"answers":[{"tags":[],"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1671004645,"creation_date":1671004645,"answer_id":74795108,"question_id":74795022,"body_markdown":"I would collect the map into a TreeMap sorted by the keys in reverse order using `groupingBy`. Then get the 2nd element from it using *skip* as,\r\n\r\n    TreeMap&lt;Integer, List&lt;String&gt;&gt; treeMap = map.entrySet()\r\n                .stream()\r\n                .collect(Collectors.groupingBy(Map.Entry::getValue,\r\n                        () -&gt; new TreeMap&lt;&gt;(Comparator.&lt;Integer&gt;reverseOrder()),\r\n                        Collectors.mapping(Map.Entry::getKey, Collectors.toList())));\r\n\r\n    Map.Entry&lt;Integer, List&lt;String&gt;&gt; result = treeMap.entrySet()\r\n                .stream()\r\n                .skip(1)\r\n                .findFirst()\r\n                .get();\r\n    System.out.println(result);\r\n\r\nOutputs,\r\n\r\n    7=[Rajesh, Chetan]\r\n\r\nNote, we are assuming a second-max will always be present as we call `get` on an `Optional`.","title":"How to get all entries with second highest value of a Hashmap?","body":"<p>I would collect the map into a TreeMap sorted by the keys in reverse order using <code>groupingBy</code>. Then get the 2nd element from it using <em>skip</em> as,</p>\n<pre><code>TreeMap&lt;Integer, List&lt;String&gt;&gt; treeMap = map.entrySet()\n            .stream()\n            .collect(Collectors.groupingBy(Map.Entry::getValue,\n                    () -&gt; new TreeMap&lt;&gt;(Comparator.&lt;Integer&gt;reverseOrder()),\n                    Collectors.mapping(Map.Entry::getKey, Collectors.toList())));\n\nMap.Entry&lt;Integer, List&lt;String&gt;&gt; result = treeMap.entrySet()\n            .stream()\n            .skip(1)\n            .findFirst()\n            .get();\nSystem.out.println(result);\n</code></pre>\n<p>Outputs,</p>\n<pre><code>7=[Rajesh, Chetan]\n</code></pre>\n<p>Note, we are assuming a second-max will always be present as we call <code>get</code> on an <code>Optional</code>.</p>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671006511,"creation_date":1671006511,"answer_id":74795415,"question_id":74795022,"body_markdown":"**Be simple!** The key word is a **second max**. It means you should use `PriorityQueue`:\r\n\r\n```java \r\nQueue&lt;Map.Entry&lt;String, Integer&gt;&gt; maxQueue = new PriorityQueue&lt;&gt;((one, two) -&gt;\r\n                              Integer.compare(two.getValue(), one.getValue()));\r\nmaxQueue.addAll(map.entrySet());\r\n\r\nMap.Entry&lt;String, Integer&gt; firstMax = maxQueue.remove();\r\nMap.Entry&lt;String, Integer&gt; secondMax = maxQueue.remove();\r\n```","title":"How to get all entries with second highest value of a Hashmap?","body":"<p><strong>Be simple!</strong> The key word is a <strong>second max</strong>. It means you should use <code>PriorityQueue</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Queue&lt;Map.Entry&lt;String, Integer&gt;&gt; maxQueue = new PriorityQueue&lt;&gt;((one, two) -&gt;\n                              Integer.compare(two.getValue(), one.getValue()));\nmaxQueue.addAll(map.entrySet());\n\nMap.Entry&lt;String, Integer&gt; firstMax = maxQueue.remove();\nMap.Entry&lt;String, Integer&gt; secondMax = maxQueue.remove();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1671013032,"creation_date":1671013032,"answer_id":74796666,"question_id":74795022,"body_markdown":"&gt; If multiple values are present then also I want both key and value.\r\n\r\nYour code works only for a single value. In order to get the multiple values, group the entries on their values and then apply your code on the `Stream` derived from the resulting `Map`.\r\n\r\n**Demo**:\r\n\r\n    import java.util.Collections;\r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import java.util.Map.Entry;\r\n    import java.util.stream.Collectors;\r\n    \r\n    class Main {\r\n    \r\n        public static void main(String args[]) {\r\n            HashMap&lt;String, Integer&gt; map = new HashMap&lt;String, Integer&gt;();\r\n            map.put(&quot;Pankaj&quot;, 1);\r\n            map.put(&quot;Amit&quot;, 2);\r\n            map.put(&quot;Rahul&quot;, 5);\r\n            map.put(&quot;Chetan&quot;, 7);\r\n            map.put(&quot;Vinod&quot;, 6);\r\n            map.put(&quot;Amit&quot;, 8);\r\n            map.put(&quot;Rajesh&quot;, 7);\r\n    \r\n            List&lt;Entry&lt;String, Integer&gt;&gt; result = map.entrySet()\r\n                    .stream()\r\n                    .collect(Collectors.groupingBy(e -&gt; e.getValue()))\r\n                    .entrySet()\r\n                    .stream()\r\n                    .sorted(Collections.reverseOrder(Map.Entry.comparingByKey()))\r\n                    .skip(1)\r\n                    .findFirst()\r\n                    .get()\r\n                    .getValue();\r\n    \r\n            System.out.println(result);\r\n        }\r\n    }\r\n**Output**:\r\n\r\n    [Rajesh=7, Chetan=7]","title":"How to get all entries with second highest value of a Hashmap?","body":"<blockquote>\n<p>If multiple values are present then also I want both key and value.</p>\n</blockquote>\n<p>Your code works only for a single value. In order to get the multiple values, group the entries on their values and then apply your code on the <code>Stream</code> derived from the resulting <code>Map</code>.</p>\n<p><strong>Demo</strong>:</p>\n<pre><code>import java.util.Collections;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Map.Entry;\nimport java.util.stream.Collectors;\n\nclass Main {\n\n    public static void main(String args[]) {\n        HashMap&lt;String, Integer&gt; map = new HashMap&lt;String, Integer&gt;();\n        map.put(&quot;Pankaj&quot;, 1);\n        map.put(&quot;Amit&quot;, 2);\n        map.put(&quot;Rahul&quot;, 5);\n        map.put(&quot;Chetan&quot;, 7);\n        map.put(&quot;Vinod&quot;, 6);\n        map.put(&quot;Amit&quot;, 8);\n        map.put(&quot;Rajesh&quot;, 7);\n\n        List&lt;Entry&lt;String, Integer&gt;&gt; result = map.entrySet()\n                .stream()\n                .collect(Collectors.groupingBy(e -&gt; e.getValue()))\n                .entrySet()\n                .stream()\n                .sorted(Collections.reverseOrder(Map.Entry.comparingByKey()))\n                .skip(1)\n                .findFirst()\n                .get()\n                .getValue();\n\n        System.out.println(result);\n    }\n}\n</code></pre>\n<p><strong>Output</strong>:</p>\n<pre><code>[Rajesh=7, Chetan=7]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":262968,"reputation":767110,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671226230,"creation_date":1671226230,"answer_id":74829946,"question_id":74795022,"body_markdown":"Here is an efficient way to get all second highest elements without any sorting:\r\n\r\n[*Online Demo*][1]\r\n\r\n```sh\r\nstatic Map&lt;String, Integer&gt; map = Map.of(&quot;Pankaj&quot;,1, &quot;Amita&quot;,2,\r\n    &quot;Rahul&quot;,5, &quot;Chetan&quot;,7, &quot;Vinod&quot;,6, &quot;Amit&quot;,8, &quot;Rajesh&quot;,7, &quot;Foo&quot;,8);\r\nstatic Integer max2 = Integer.MIN_VALUE;\r\nstatic List&lt;String&gt; values = new ArrayList&lt;&gt;();\r\n\r\npublic static void main(String[] args) {\r\n    // find max value first\r\n\tInteger max = map.values()\r\n\t\t\t.stream()\r\n\t\t\t.mapToInt(v -&gt; v)\r\n\t\t\t.max().orElseThrow(NoSuchElementException::new);\r\n\r\n    // if it is not max then set max2\r\n\tmap.entrySet().forEach(el -&gt; {\r\n\t\tif (el.getValue() != max &amp;&amp; el.getValue() &gt;= max2) {\r\n\t\t\tif (el.getValue() != max2) {\r\n\t\t\t\tvalues.clear();\r\n\t\t\t\tmax2 = el.getValue();\r\n\t\t\t}\r\n\t\t\tvalues.add(el.getKey());\r\n\t\t}\r\n\t});\r\n\r\n\tSystem.out.println(max2 + &quot;=&quot; + values);\r\n}\r\n```\r\n\r\n**Output:**\r\n\r\n    7=[Rajesh, Chetan]\r\n\r\n  [1]: https://ideone.com/4cSPqI","title":"How to get all entries with second highest value of a Hashmap?","body":"<p>Here is an efficient way to get all second highest elements without any sorting:</p>\n<p><a href=\"https://ideone.com/4cSPqI\" rel=\"nofollow noreferrer\"><em>Online Demo</em></a></p>\n<pre class=\"lang-bash prettyprint-override\"><code>static Map&lt;String, Integer&gt; map = Map.of(&quot;Pankaj&quot;,1, &quot;Amita&quot;,2,\n    &quot;Rahul&quot;,5, &quot;Chetan&quot;,7, &quot;Vinod&quot;,6, &quot;Amit&quot;,8, &quot;Rajesh&quot;,7, &quot;Foo&quot;,8);\nstatic Integer max2 = Integer.MIN_VALUE;\nstatic List&lt;String&gt; values = new ArrayList&lt;&gt;();\n\npublic static void main(String[] args) {\n    // find max value first\n    Integer max = map.values()\n            .stream()\n            .mapToInt(v -&gt; v)\n            .max().orElseThrow(NoSuchElementException::new);\n\n    // if it is not max then set max2\n    map.entrySet().forEach(el -&gt; {\n        if (el.getValue() != max &amp;&amp; el.getValue() &gt;= max2) {\n            if (el.getValue() != max2) {\n                values.clear();\n                max2 = el.getValue();\n            }\n            values.add(el.getKey());\n        }\n    });\n\n    System.out.println(max2 + &quot;=&quot; + values);\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>7=[Rajesh, Chetan]\n</code></pre>\n"}],"owner":{"account_id":2601352,"reputation":21,"user_id":4711383,"display_name":"user4711383"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":410,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":4,"score":0,"last_activity_date":1671226230,"creation_date":1671004161,"question_id":74795022,"body_markdown":"I want to get the second max number or value of a Map by using Java Streams.\r\n\r\n**If multiple values are present then also I want both key and value.**\r\n\r\n```\r\nHashMap&lt;String, Integer&gt; map = new HashMap&lt;String,Integer&gt;();\t\t\r\n\tmap.put(&quot;Pankaj&quot;,1);\r\n\tmap.put(&quot;Amit&quot;,2);\r\n\tmap.put(&quot;Rahul&quot;,5);\r\n\tmap.put(&quot;Chetan&quot;,7);\r\n\tmap.put(&quot;Vinod&quot;,6);\r\n\tmap.put(&quot;Amit&quot;,8);\r\n\tmap.put(&quot;Rajesh&quot;, 7);\r\n\t\t\r\nEntry&lt;String, Integer&gt; m = map.entrySet().stream()\r\n    .sorted(Collections.reverseOrder(Map.Entry.comparingByValue()))\r\n\t.skip(1)\r\n\t.findFirst()\r\n\t.get();\r\n```\r\n","title":"How to get all entries with second highest value of a Hashmap?","body":"<p>I want to get the second max number or value of a Map by using Java Streams.</p>\n<p><strong>If multiple values are present then also I want both key and value.</strong></p>\n<pre><code>HashMap&lt;String, Integer&gt; map = new HashMap&lt;String,Integer&gt;();       \n    map.put(&quot;Pankaj&quot;,1);\n    map.put(&quot;Amit&quot;,2);\n    map.put(&quot;Rahul&quot;,5);\n    map.put(&quot;Chetan&quot;,7);\n    map.put(&quot;Vinod&quot;,6);\n    map.put(&quot;Amit&quot;,8);\n    map.put(&quot;Rajesh&quot;, 7);\n        \nEntry&lt;String, Integer&gt; m = map.entrySet().stream()\n    .sorted(Collections.reverseOrder(Map.Entry.comparingByValue()))\n    .skip(1)\n    .findFirst()\n    .get();\n</code></pre>\n"},{"tags":["java","spring","criteria","hibernate-criteria","criteria-api"],"comments":[{"owner":{"account_id":1522148,"reputation":597,"user_id":1421518,"accept_rate":100,"display_name":"amstegraf"},"score":0,"creation_date":1604391142,"post_id":64657744,"comment_id":114326190,"body_markdown":"Your join should be inverted, because your root is User. So you are actually looking for user in User object. eg Join&lt;Item, User&gt;. I&#39;ve also added a full example in my answer","body":"Your join should be inverted, because your root is User. So you are actually looking for user in User object. eg Join&lt;Item, User&gt;. I&#39;ve also added a full example in my answer"}],"answers":[{"tags":[],"owner":{"account_id":1522148,"reputation":597,"user_id":1421518,"accept_rate":100,"display_name":"amstegraf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604391082,"creation_date":1604390579,"answer_id":64658873,"question_id":64657744,"body_markdown":"You would need to have something like\r\n\r\n    Join&lt;Item, User&gt; userJoin = root.join(Item_.user, JoinType.LEFT);\r\n\r\nand afterwards you can use `userJoin.get(...)` with your `criteriaBuilder`\r\n\r\nFull example with Specifications:\r\n\r\n    public static Specification&lt;Item&gt; methodName() {\r\n       return new Specification&lt;Item&gt;() {\r\n          @Override\r\n          public Predicate toPredicate(Root&lt;Item&gt; root, CriteriaQuery criteriaQuery, CriteriaBuilder criteriaBuilder) {\r\n             Join&lt;Item, User&gt; userJoin = root.join(Item_.user, JoinType.LEFT);\r\n\r\n             return criteriaBuilder.isTrue(\r\n                criteriaBuilder.and(\r\n                   criteriaBuilder.equal(userJoin.get(User_.id), 1),\r\n                   criteriaBuilder.equal(root.get(Item_.name), userJoin.get(User_.name))\r\n                )\r\n             );\r\n          }\r\n       }\r\n    }\r\n\r\n","title":"How to make left join criteria api in spring with ManyToOne?","body":"<p>You would need to have something like</p>\n<pre><code>Join&lt;Item, User&gt; userJoin = root.join(Item_.user, JoinType.LEFT);\n</code></pre>\n<p>and afterwards you can use <code>userJoin.get(...)</code> with your <code>criteriaBuilder</code></p>\n<p>Full example with Specifications:</p>\n<pre><code>public static Specification&lt;Item&gt; methodName() {\n   return new Specification&lt;Item&gt;() {\n      @Override\n      public Predicate toPredicate(Root&lt;Item&gt; root, CriteriaQuery criteriaQuery, CriteriaBuilder criteriaBuilder) {\n         Join&lt;Item, User&gt; userJoin = root.join(Item_.user, JoinType.LEFT);\n\n         return criteriaBuilder.isTrue(\n            criteriaBuilder.and(\n               criteriaBuilder.equal(userJoin.get(User_.id), 1),\n               criteriaBuilder.equal(root.get(Item_.name), userJoin.get(User_.name))\n            )\n         );\n      }\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18883412,"reputation":41,"user_id":13775363,"display_name":"Anton Galishnikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604391536,"creation_date":1604391536,"answer_id":64659056,"question_id":64657744,"body_markdown":"Try joining on a column that is part of your root.\r\nEither \r\n\r\n    Root&lt;User&gt; userRoot = ...\r\n    userRoot.join(&quot;items&quot;, JoinType.RIGHT);\r\n\r\nor\r\n\r\n    Root&lt;Item&gt; itemRoot = ...\r\n    itemRoot.join(&quot;user&quot;, JoinType.LEFT);","title":"How to make left join criteria api in spring with ManyToOne?","body":"<p>Try joining on a column that is part of your root.\nEither</p>\n<pre><code>Root&lt;User&gt; userRoot = ...\nuserRoot.join(&quot;items&quot;, JoinType.RIGHT);\n</code></pre>\n<p>or</p>\n<pre><code>Root&lt;Item&gt; itemRoot = ...\nitemRoot.join(&quot;user&quot;, JoinType.LEFT);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":37795,"reputation":1575,"user_id":108153,"accept_rate":25,"display_name":"codeDr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671226143,"creation_date":1671226143,"answer_id":74829938,"question_id":64657744,"body_markdown":"The following worked for me and produce working sql for finding User entries with matching values on User and Items.\r\n\r\n    CriteriaQuery&lt;User&gt; cq = cb.createQuery(User.class);\r\n\r\n    Root&lt;User&gt; root = cq.from(User.class);\r\n    Root&lt;Item&gt; item = cq.from(Item.class);\r\n    \r\n    cq.distinct(true);\r\n\r\n    Join&lt;Item, User&gt; itemJoin = item.join(Item_.user);\r\n    itemJoin.on( cb.equal( root.get(User_.id), itemJoin.get(User_.id) );\r\n\r\n    predicates.add( &lt;root predicate&gt; );\r\n    predicates.add( &lt;item predicate&gt; );\r\n    \r\n    [ ... ]\r\n","title":"How to make left join criteria api in spring with ManyToOne?","body":"<p>The following worked for me and produce working sql for finding User entries with matching values on User and Items.</p>\n<pre><code>CriteriaQuery&lt;User&gt; cq = cb.createQuery(User.class);\n\nRoot&lt;User&gt; root = cq.from(User.class);\nRoot&lt;Item&gt; item = cq.from(Item.class);\n\ncq.distinct(true);\n\nJoin&lt;Item, User&gt; itemJoin = item.join(Item_.user);\nitemJoin.on( cb.equal( root.get(User_.id), itemJoin.get(User_.id) );\n\npredicates.add( &lt;root predicate&gt; );\npredicates.add( &lt;item predicate&gt; );\n\n[ ... ]\n</code></pre>\n"}],"owner":{"account_id":14339953,"reputation":295,"user_id":10358410,"display_name":"Семен Немытов"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1725,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1671226143,"creation_date":1604384802,"question_id":64657744,"body_markdown":"I have two simple classes with many to one relationship \r\n\r\n```\r\npublic class User {\r\n\r\n  Long id; \r\n  String name;\r\n  ...\r\n  (getters, setters, methods)\r\n\r\n}\r\n\r\npublic class Item {\r\n\r\n  Long id; \r\n  String name;\r\n\r\n  @ManyToOne(cascade = PERSIST, fetch = LAZY, optional = false)\r\n  User user;\r\n  ...\r\n  (getters, setters, methods)\r\n\r\n}\r\n\r\n```\r\nI want to make a left join. I have tried : \r\n```\r\nSubquery&lt;Long&gt; subquery = query.subquery(Long.class)\r\nRoot&lt;User&gt; root = subquery.from(User .class);\r\nJoin&lt;User, Item&gt; join = root.join(&quot;user&quot;, JoinType.LEFT); \r\n```\r\nbut it trow exception that there is no &quot;user&quot; in User, and I understand why. \r\nHow to make this right? ","title":"How to make left join criteria api in spring with ManyToOne?","body":"<p>I have two simple classes with many to one relationship</p>\n<pre><code>public class User {\n\n  Long id; \n  String name;\n  ...\n  (getters, setters, methods)\n\n}\n\npublic class Item {\n\n  Long id; \n  String name;\n\n  @ManyToOne(cascade = PERSIST, fetch = LAZY, optional = false)\n  User user;\n  ...\n  (getters, setters, methods)\n\n}\n\n</code></pre>\n<p>I want to make a left join. I have tried :</p>\n<pre><code>Subquery&lt;Long&gt; subquery = query.subquery(Long.class)\nRoot&lt;User&gt; root = subquery.from(User .class);\nJoin&lt;User, Item&gt; join = root.join(&quot;user&quot;, JoinType.LEFT); \n</code></pre>\n<p>but it trow exception that there is no &quot;user&quot; in User, and I understand why.\nHow to make this right?</p>\n"},{"tags":["java","android","firebase","mobile-development"],"answers":[{"tags":[],"owner":{"account_id":23174992,"reputation":1,"user_id":17273649,"display_name":"peaky"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671225411,"creation_date":1671225411,"answer_id":74829840,"question_id":74829428,"body_markdown":"Solved it by setting different requestCode everytime I set an alarm.\r\n\r\n    private void startAlarm(Calendar cal) {\r\n        AlarmManager alarmManager = (AlarmManager) getActivity().getSystemService(Context.ALARM_SERVICE);\r\n        Intent intent = new Intent(getActivity(), AlertReceiver.class);\r\n        final int id = (int) System.currentTimeMillis();\r\n        PendingIntent pendingIntent = PendingIntent.getBroadcast(getActivity(), id, intent, PendingIntent.FLAG_MUTABLE);\r\n\r\n        alarmManager.setExact(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pendingIntent);\r\n    }","title":"Do I still need database in setting multiple alarms or reminders?","body":"<p>Solved it by setting different requestCode everytime I set an alarm.</p>\n<pre><code>private void startAlarm(Calendar cal) {\n    AlarmManager alarmManager = (AlarmManager) getActivity().getSystemService(Context.ALARM_SERVICE);\n    Intent intent = new Intent(getActivity(), AlertReceiver.class);\n    final int id = (int) System.currentTimeMillis();\n    PendingIntent pendingIntent = PendingIntent.getBroadcast(getActivity(), id, intent, PendingIntent.FLAG_MUTABLE);\n\n    alarmManager.setExact(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pendingIntent);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1198166,"reputation":1484,"user_id":1169441,"display_name":"Varsha Kulkarni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671225969,"creation_date":1671225969,"answer_id":74829917,"question_id":74829428,"body_markdown":"Yes, you need to **persist** the state of alarms set by your app and display the same to the user. Once set we cannot retrieve the alarms set by the system at the app level. All we can do is dump them using adb shell using:\r\n\r\n```\r\nadb shell dumpsys alarm &gt; alarms_dump.txt\r\n```","title":"Do I still need database in setting multiple alarms or reminders?","body":"<p>Yes, you need to <strong>persist</strong> the state of alarms set by your app and display the same to the user. Once set we cannot retrieve the alarms set by the system at the app level. All we can do is dump them using adb shell using:</p>\n<pre><code>adb shell dumpsys alarm &gt; alarms_dump.txt\n</code></pre>\n"}],"owner":{"account_id":23174992,"reputation":1,"user_id":17273649,"display_name":"peaky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1671225969,"creation_date":1671222253,"question_id":74829428,"body_markdown":"So I&#39;m developing this Android application which has many features, and one of them is the workout reminder. We used firebase database in setting up login authentication, and the user&#39;s information. \r\n\r\nNow for the last feature, I made a workout reminder which consists of ***Task Name*** and ***Time*** which also has a notification and. It only sets one alarm and I assume that if I applied and displayed it in a ***Recycler View***, it will set multiple alarms. Unfortunately, it doesn&#39;t. When the reminder is displayed in the Recycler View, and when I restart the application, the reminder is gone. \r\n\r\n**I just want to humbly ask if I need to store it in a database and then retrieve it?**\r\n\r\nThank you in advance!\r\n\r\nHere is my code below:\r\n\r\n    public class AlertReceiver extends BroadcastReceiver {\r\n    \r\n    @Override\r\n    public void onReceive(Context context, Intent intent) {\r\n        NotificationHelper notificationHelper = new NotificationHelper(context);\r\n        NotificationCompat.Builder nb = notificationHelper.getChannel1Notification(reminderAddFragment.getTitle(), reminderAddFragment.getMessage());\r\n        notificationHelper.getManager().notify(1, nb.build());\r\n    }\r\n}\r\n\r\n     private void startAlarm(Calendar cal) {\r\n        AlarmManager alarmManager = (AlarmManager) getActivity().getSystemService(Context.ALARM_SERVICE);\r\n        Intent intent = new Intent(getActivity(), AlertReceiver.class);\r\n        PendingIntent pendingIntent = PendingIntent.getBroadcast(getActivity(), 1, intent, 0);\r\n\r\n        alarmManager.setExact(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pendingIntent);\r\n    }","title":"Do I still need database in setting multiple alarms or reminders?","body":"<p>So I'm developing this Android application which has many features, and one of them is the workout reminder. We used firebase database in setting up login authentication, and the user's information.</p>\n<p>Now for the last feature, I made a workout reminder which consists of <em><strong>Task Name</strong></em> and <em><strong>Time</strong></em> which also has a notification and. It only sets one alarm and I assume that if I applied and displayed it in a <em><strong>Recycler View</strong></em>, it will set multiple alarms. Unfortunately, it doesn't. When the reminder is displayed in the Recycler View, and when I restart the application, the reminder is gone.</p>\n<p><strong>I just want to humbly ask if I need to store it in a database and then retrieve it?</strong></p>\n<p>Thank you in advance!</p>\n<p>Here is my code below:</p>\n<pre><code>public class AlertReceiver extends BroadcastReceiver {\n\n@Override\npublic void onReceive(Context context, Intent intent) {\n    NotificationHelper notificationHelper = new NotificationHelper(context);\n    NotificationCompat.Builder nb = notificationHelper.getChannel1Notification(reminderAddFragment.getTitle(), reminderAddFragment.getMessage());\n    notificationHelper.getManager().notify(1, nb.build());\n}\n</code></pre>\n<p>}</p>\n<pre><code> private void startAlarm(Calendar cal) {\n    AlarmManager alarmManager = (AlarmManager) getActivity().getSystemService(Context.ALARM_SERVICE);\n    Intent intent = new Intent(getActivity(), AlertReceiver.class);\n    PendingIntent pendingIntent = PendingIntent.getBroadcast(getActivity(), 1, intent, 0);\n\n    alarmManager.setExact(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pendingIntent);\n}\n</code></pre>\n"},{"tags":["java","service","eclipse-plugin","osgi"],"comments":[{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1669289461,"post_id":74559031,"comment_id":131613492,"body_markdown":"I&#39;m not an expert in this area. Several things in Eclipse use `open(true)`. Looking at the source it seems to come down to skipping the call to `org.eclipse.osgi.internal.serviceregistry.ServiceRegistry.isAssignableTo`","body":"I&#39;m not an expert in this area. Several things in Eclipse use <code>open(true)</code>. Looking at the source it seems to come down to skipping the call to <code>org.eclipse.osgi.internal.serviceregistry.ServiceRegistry.is&zwnj;&#8203;AssignableTo</code>"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":1,"creation_date":1669290930,"post_id":74559031,"comment_id":131613975,"body_markdown":"I guess, without knowing it, it&#39;s only possible when specifying the service class as `String`, using `new ServiceTracker(BundleContext, String, ServiceTrackerCustomizer)` instead of `new ServiceTracker(BundleContext, Class, ServiceTrackerCustomizer)`.","body":"I guess, without knowing it, it&#39;s only possible when specifying the service class as <code>String</code>, using <code>new ServiceTracker(BundleContext, String, ServiceTrackerCustomizer)</code> instead of <code>new ServiceTracker(BundleContext, Class, ServiceTrackerCustomizer)</code>."}],"answers":[{"tags":[],"owner":{"account_id":201851,"reputation":9354,"user_id":448551,"display_name":"BJ Hargrave"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671225966,"creation_date":1669468222,"answer_id":74582449,"question_id":74559031,"body_markdown":"There can be different providers of the package of a service interface. For example, org.foo.service version=1.0 and org.foo.service version 1.2. There can also be two providers of the service registered, one using the version 1.0 package and another using the version 1.2 package for the service interface. As a user of the service, a bundle importing the org.foo.service package can only be wired to one of the providers of the package. This means it can only be type-compatible with one of the services.\r\n\r\n`open()` and `open(false)` is the normal way to use ServiceTracker as you only track services which use the same package for the service interface as your bundle. That is, you can safely cast the service object to the service interface type to which your bundle has access.\r\n\r\n`open(true)` is a special case where the bundle does not have a need to cast the service objects to a service interface type. This use case is rare and generally should not be used.","title":"What is the scenario of OSGi ServiceTracker.open(true) / ServiceTracker.AllTracked","body":"<p>There can be different providers of the package of a service interface. For example, org.foo.service version=1.0 and org.foo.service version 1.2. There can also be two providers of the service registered, one using the version 1.0 package and another using the version 1.2 package for the service interface. As a user of the service, a bundle importing the org.foo.service package can only be wired to one of the providers of the package. This means it can only be type-compatible with one of the services.</p>\n<p><code>open()</code> and <code>open(false)</code> is the normal way to use ServiceTracker as you only track services which use the same package for the service interface as your bundle. That is, you can safely cast the service object to the service interface type to which your bundle has access.</p>\n<p><code>open(true)</code> is a special case where the bundle does not have a need to cast the service objects to a service interface type. This use case is rare and generally should not be used.</p>\n"}],"owner":{"account_id":2583747,"reputation":3916,"user_id":2239897,"accept_rate":76,"display_name":"Stefan Winkler"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74582449,"answer_count":1,"score":0,"last_activity_date":1671225966,"creation_date":1669284892,"question_id":74559031,"body_markdown":"In `org.osgi.util.tracker.ServiceTracker` there is a method `open(boolean)`.\r\n\r\nThe documentation says that you can give `true` in which case the tracker _&quot;will track __all__ matching services regardless of class loader accessibility&quot;_.\r\n\r\nI don&#39;t really understand this part. As far as I understand, the common use case for services is that \r\n* a bundle `SI` (for Service Interface) contains a service interface, \r\n* a bundle `SP` (for Service Provider) contains a service component / implementation class (e.g., as a Declarative Service / `@Component`), and \r\n* a bundle `SU` (for Service User) wants to use the service, so it basically uses `var st = new ServiceTracker(bundleContext, IService.class, null); st.open();` to track and use the service (if, for some reason, it cannot use DS...).\r\n\r\nSo both `SU` and `SP` depend on `SI`, but `SU` does not depend on `SP`. (as far as I understand, that&#39;s one of the key points that the `SU` does not need to know about the `SP`...)\r\n\r\nSo, how can it happen that `open(true)` would track a service that is not &quot;class loader accessible&quot;? What does &quot;class loader accessibility&quot; mean in such a scenario? Because, since `SU` does not depend on `SP`, but the above scenario still works, the service implementation does not need to be known to `SP`, obviously.\r\n\r\nCould someone outline an example how this could happen?\r\n\r\nAnd, while I am asking, what would even be a use case for `open(true)`? If there is a scenario where I cannot access the service implementation, what&#39;s the point of tracking such a service  anyways?\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"What is the scenario of OSGi ServiceTracker.open(true) / ServiceTracker.AllTracked","body":"<p>In <code>org.osgi.util.tracker.ServiceTracker</code> there is a method <code>open(boolean)</code>.</p>\n<p>The documentation says that you can give <code>true</code> in which case the tracker <em>&quot;will track <strong>all</strong> matching services regardless of class loader accessibility&quot;</em>.</p>\n<p>I don't really understand this part. As far as I understand, the common use case for services is that</p>\n<ul>\n<li>a bundle <code>SI</code> (for Service Interface) contains a service interface,</li>\n<li>a bundle <code>SP</code> (for Service Provider) contains a service component / implementation class (e.g., as a Declarative Service / <code>@Component</code>), and</li>\n<li>a bundle <code>SU</code> (for Service User) wants to use the service, so it basically uses <code>var st = new ServiceTracker(bundleContext, IService.class, null); st.open();</code> to track and use the service (if, for some reason, it cannot use DS...).</li>\n</ul>\n<p>So both <code>SU</code> and <code>SP</code> depend on <code>SI</code>, but <code>SU</code> does not depend on <code>SP</code>. (as far as I understand, that's one of the key points that the <code>SU</code> does not need to know about the <code>SP</code>...)</p>\n<p>So, how can it happen that <code>open(true)</code> would track a service that is not &quot;class loader accessible&quot;? What does &quot;class loader accessibility&quot; mean in such a scenario? Because, since <code>SU</code> does not depend on <code>SP</code>, but the above scenario still works, the service implementation does not need to be known to <code>SP</code>, obviously.</p>\n<p>Could someone outline an example how this could happen?</p>\n<p>And, while I am asking, what would even be a use case for <code>open(true)</code>? If there is a scenario where I cannot access the service implementation, what's the point of tracking such a service  anyways?</p>\n"},{"tags":["java","intellij-idea","maven-plugin"],"comments":[{"owner":{"account_id":3629749,"reputation":24734,"user_id":3026283,"accept_rate":90,"display_name":"H&#233;ctor"},"score":0,"creation_date":1449160036,"post_id":34070599,"comment_id":55895477,"body_markdown":"Can you show your pom.xml file? It seems that you are not declaring dependencies.","body":"Can you show your pom.xml file? It seems that you are not declaring dependencies."},{"owner":{"account_id":6228752,"reputation":3346,"user_id":4846215,"accept_rate":66,"display_name":"D. M&#252;ller"},"score":0,"creation_date":1449160259,"post_id":34070599,"comment_id":55895665,"body_markdown":"I set the dependencies via the UI, see the screenshots above. I add a screenshot of my pom.xml...","body":"I set the dependencies via the UI, see the screenshots above. I add a screenshot of my pom.xml..."},{"owner":{"account_id":3629749,"reputation":24734,"user_id":3026283,"accept_rate":90,"display_name":"H&#233;ctor"},"score":2,"creation_date":1449160410,"post_id":34070599,"comment_id":55895793,"body_markdown":"Actually dependencies are not being included in your project. Note that `&lt;dependencies/&gt;` block is missing in your pom. You have to included them manually.","body":"Actually dependencies are not being included in your project. Note that <code>&lt;dependencies&#47;&gt;</code> block is missing in your pom. You have to included them manually."},{"owner":{"account_id":1220503,"reputation":1157,"user_id":1187237,"display_name":"kg_sYy"},"score":1,"creation_date":1449160981,"post_id":34070599,"comment_id":55896172,"body_markdown":"I have to agree with @bigdestroyer here, you need to put your dependencies in the pom. Otherwise Maven will not know anything about them and they will not be included.","body":"I have to agree with @bigdestroyer here, you need to put your dependencies in the pom. Otherwise Maven will not know anything about them and they will not be included."}],"answers":[{"tags":[],"owner":{"account_id":3629749,"reputation":24734,"user_id":3026283,"accept_rate":90,"display_name":"H&#233;ctor"},"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1449158893,"creation_date":1449158893,"answer_id":34070769,"question_id":34070599,"body_markdown":"You need to use Maven Assembly Plugin to include dependencies:\r\n\r\n    &lt;build&gt;\r\n      &lt;plugins&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n          &lt;configuration&gt;\r\n            &lt;archive&gt;\r\n              &lt;manifest&gt;\r\n                &lt;mainClass&gt;your.package.MainClass&lt;/mainClass&gt;\r\n              &lt;/manifest&gt;\r\n            &lt;/archive&gt;\r\n            &lt;descriptorRefs&gt;\r\n              &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n            &lt;/descriptorRefs&gt;\r\n          &lt;/configuration&gt;\r\n        &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\nand then: `mvn clean compile assembly:single`","title":"Intellij Maven: Create jar with all library dependencies","body":"<p>You need to use Maven Assembly Plugin to include dependencies:</p>\n\n<pre><code>&lt;build&gt;\n  &lt;plugins&gt;\n    &lt;plugin&gt;\n      &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n      &lt;configuration&gt;\n        &lt;archive&gt;\n          &lt;manifest&gt;\n            &lt;mainClass&gt;your.package.MainClass&lt;/mainClass&gt;\n          &lt;/manifest&gt;\n        &lt;/archive&gt;\n        &lt;descriptorRefs&gt;\n          &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n        &lt;/descriptorRefs&gt;\n      &lt;/configuration&gt;\n    &lt;/plugin&gt;\n  &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>and then: <code>mvn clean compile assembly:single</code></p>\n"},{"tags":[],"owner":{"account_id":90084,"reputation":1225,"user_id":248131,"accept_rate":80,"display_name":"emanciperingsivraren"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1449159975,"creation_date":1449159975,"answer_id":34071184,"question_id":34070599,"body_markdown":"I recommend that you use the plugin [`shade`][1]. It is better than `Assembly` because it is possible to [relocate classes][2] if a conflict occur.\r\n\r\nA typical setup can look like this: (copied from the [official documentation][3])\r\n\r\n    &lt;project&gt;\r\n      ...\r\n      &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;2.4.2&lt;/version&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;phase&gt;package&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;shade&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n                &lt;configuration&gt;\r\n                  &lt;artifactSet&gt;\r\n                    &lt;excludes&gt;\r\n                      &lt;exclude&gt;classworlds:classworlds&lt;/exclude&gt;\r\n                      &lt;exclude&gt;junit:junit&lt;/exclude&gt;\r\n                      &lt;exclude&gt;jmock:*&lt;/exclude&gt;\r\n                      &lt;exclude&gt;*:xml-apis&lt;/exclude&gt;\r\n                      &lt;exclude&gt;org.apache.maven:lib:tests&lt;/exclude&gt;\r\n                      &lt;exclude&gt;log4j:log4j:jar:&lt;/exclude&gt;\r\n                    &lt;/excludes&gt;\r\n                  &lt;/artifactSet&gt;\r\n                &lt;/configuration&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n      ...\r\n    &lt;/project&gt;\r\n\r\nIf size is important you can try to use the `&lt;minimizeJar&gt;true&lt;/minimizeJar&gt;` to reduce size.\r\n\r\n  [1]: http://maven.apache.org/plugins/maven-shade-plugin/\r\n  [2]: http://maven.apache.org/plugins/maven-shade-plugin/examples/class-relocation.html\r\n  [3]: https://maven.apache.org/plugins/maven-shade-plugin/examples/includes-excludes.html","title":"Intellij Maven: Create jar with all library dependencies","body":"<p>I recommend that you use the plugin <a href=\"http://maven.apache.org/plugins/maven-shade-plugin/\" rel=\"nofollow\"><code>shade</code></a>. It is better than <code>Assembly</code> because it is possible to <a href=\"http://maven.apache.org/plugins/maven-shade-plugin/examples/class-relocation.html\" rel=\"nofollow\">relocate classes</a> if a conflict occur.</p>\n\n<p>A typical setup can look like this: (copied from the <a href=\"https://maven.apache.org/plugins/maven-shade-plugin/examples/includes-excludes.html\" rel=\"nofollow\">official documentation</a>)</p>\n\n<pre><code>&lt;project&gt;\n  ...\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.4.2&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;shade&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n              &lt;artifactSet&gt;\n                &lt;excludes&gt;\n                  &lt;exclude&gt;classworlds:classworlds&lt;/exclude&gt;\n                  &lt;exclude&gt;junit:junit&lt;/exclude&gt;\n                  &lt;exclude&gt;jmock:*&lt;/exclude&gt;\n                  &lt;exclude&gt;*:xml-apis&lt;/exclude&gt;\n                  &lt;exclude&gt;org.apache.maven:lib:tests&lt;/exclude&gt;\n                  &lt;exclude&gt;log4j:log4j:jar:&lt;/exclude&gt;\n                &lt;/excludes&gt;\n              &lt;/artifactSet&gt;\n            &lt;/configuration&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n  ...\n&lt;/project&gt;\n</code></pre>\n\n<p>If size is important you can try to use the <code>&lt;minimizeJar&gt;true&lt;/minimizeJar&gt;</code> to reduce size.</p>\n"},{"tags":[],"owner":{"account_id":4317025,"reputation":61,"user_id":3526555,"display_name":"amitgh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614772863,"creation_date":1614716534,"answer_id":66446578,"question_id":34070599,"body_markdown":"After adding the maven assembly plugin as suggested by Hector, he mentioned to run `mvn clean compile assembly:single`. I couldn&#39;t figure out where to run this command in Intellij. \r\n\r\nThis is what I ended up doing and successfully creating my `xxx-SNAPSHOT-jar-with-dependencies.jar` file.\r\n\r\n*View -&gt; Tool Windows -&gt; Maven -&gt; \\&lt;Your Package\\&gt; -&gt; Lifecycle -&gt; right click compile -&gt; Modify Run Configuration -&gt; update Command line with &#39;compile assembly:single -f pom.xml&#39; -&gt; OK*.\r\n\r\nThis created a new run configuration in the Maven tool window. There, double click on the recently created *[compile]*.\r\n\r\nYou&#39;ll see the jars getting created under the target directory. Attaching a screenshot of my IntelliJ for reference.\r\n![IntelliJ screenshot][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/i9UPz.png","title":"Intellij Maven: Create jar with all library dependencies","body":"<p>After adding the maven assembly plugin as suggested by Hector, he mentioned to run <code>mvn clean compile assembly:single</code>. I couldn't figure out where to run this command in Intellij.</p>\n<p>This is what I ended up doing and successfully creating my <code>xxx-SNAPSHOT-jar-with-dependencies.jar</code> file.</p>\n<p><em>View -&gt; Tool Windows -&gt; Maven -&gt; &lt;Your Package&gt; -&gt; Lifecycle -&gt; right click compile -&gt; Modify Run Configuration -&gt; update Command line with 'compile assembly:single -f pom.xml' -&gt; OK</em>.</p>\n<p>This created a new run configuration in the Maven tool window. There, double click on the recently created <em>[compile]</em>.</p>\n<p>You'll see the jars getting created under the target directory. Attaching a screenshot of my IntelliJ for reference.\n<img src=\"https://i.stack.imgur.com/i9UPz.png\" alt=\"IntelliJ screenshot\" /></p>\n"},{"tags":[],"owner":{"account_id":26681786,"reputation":1,"user_id":20291626,"display_name":"John kerich"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671225441,"creation_date":1671225441,"answer_id":74829844,"question_id":34070599,"body_markdown":"For the maven-assembly-plugin compile problem, if you add `&lt;executions&gt;` block the SNAPSHOT-jar-with-dependencies.jar will be created automatically, so you don&#39;t need to modify the maven compile command.  see https://medium.com/@randilfernando/when-to-use-maven-jar-maven-assembly-or-maven-shade-ffc3f76ba7a6#:~:text=maven%2Dassembly%2Dplugin%20%3A%20This,Java%20class%20name%20conflict%20issue.\r\n\r\n\r\n        &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n            &lt;configuration&gt;\r\n                &lt;archive&gt;\r\n                    &lt;manifest&gt;\r\n                        &lt;mainClass&gt;com.xxx.Main&lt;/mainClass&gt;\r\n                    &lt;/manifest&gt;\r\n                &lt;/archive&gt;\r\n                &lt;descriptorRefs&gt;\r\n                    &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n                &lt;/descriptorRefs&gt;\r\n            &lt;/configuration&gt;\r\n            &lt;executions&gt;\r\n                &lt;execution&gt;\r\n                    &lt;id&gt;make-assembly&lt;/id&gt;\r\n                    &lt;!-- bind to the packaging phase --&gt;\r\n                    &lt;phase&gt;package&lt;/phase&gt;\r\n                    &lt;goals&gt;\r\n                        &lt;goal&gt;single&lt;/goal&gt;\r\n                    &lt;/goals&gt;\r\n                &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n        &lt;/plugin&gt;","title":"Intellij Maven: Create jar with all library dependencies","body":"<p>For the maven-assembly-plugin compile problem, if you add <code>&lt;executions&gt;</code> block the SNAPSHOT-jar-with-dependencies.jar will be created automatically, so you don't need to modify the maven compile command.  see <a href=\"https://medium.com/@randilfernando/when-to-use-maven-jar-maven-assembly-or-maven-shade-ffc3f76ba7a6#:%7E:text=maven%2Dassembly%2Dplugin%20%3A%20This,Java%20class%20name%20conflict%20issue\" rel=\"nofollow noreferrer\">https://medium.com/@randilfernando/when-to-use-maven-jar-maven-assembly-or-maven-shade-ffc3f76ba7a6#:~:text=maven%2Dassembly%2Dplugin%20%3A%20This,Java%20class%20name%20conflict%20issue</a>.</p>\n<pre><code>    &lt;plugin&gt;\n        &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n            &lt;archive&gt;\n                &lt;manifest&gt;\n                    &lt;mainClass&gt;com.xxx.Main&lt;/mainClass&gt;\n                &lt;/manifest&gt;\n            &lt;/archive&gt;\n            &lt;descriptorRefs&gt;\n                &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n            &lt;/descriptorRefs&gt;\n        &lt;/configuration&gt;\n        &lt;executions&gt;\n            &lt;execution&gt;\n                &lt;id&gt;make-assembly&lt;/id&gt;\n                &lt;!-- bind to the packaging phase --&gt;\n                &lt;phase&gt;package&lt;/phase&gt;\n                &lt;goals&gt;\n                    &lt;goal&gt;single&lt;/goal&gt;\n                &lt;/goals&gt;\n            &lt;/execution&gt;\n        &lt;/executions&gt;\n    &lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":6228752,"reputation":3346,"user_id":4846215,"accept_rate":66,"display_name":"D. M&#252;ller"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21190,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":34070769,"answer_count":4,"score":11,"last_activity_date":1671225441,"creation_date":1449158483,"question_id":34070599,"body_markdown":"Working with IntelliJ Idea, I want to implement the following:\r\n\r\nI want to export an application to a jar, which contains all needed libraries. E.g. I need the AWS Java SDK libraries for S3 access, but if I upload the jar to the server and run the jar I get an NoClassDefFoundError, see below:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/amazonaws/auth/AWSCredentials\r\n        at java.lang.Class.getDeclaredMethods0(Native Method)\r\n        at java.lang.Class.privateGetDeclaredMethods(Class.java:2625)\r\n        at java.lang.Class.getMethod0(Class.java:2866)\r\n        at java.lang.Class.getMethod(Class.java:1676)\r\n        at sun.launcher.LauncherHelper.getMainMethod(LauncherHelper.java:494)\r\n        at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:486)\r\n    Caused by: java.lang.ClassNotFoundException: com.amazonaws.auth.AWSCredentials\r\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)\r\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)\r\n        at java.security.AccessController.doPrivileged(Native Method)\r\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:425)\r\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:358)\r\n        ... 6 more\r\n\r\nComparison: I created the same project in Eclipse and get no error! The jar file sizes are very different (Eclipse: ~35 MB vs. IntelliJ Idea: ~5,5 MB)! \r\n\r\nI included the libraries via Maven and downloaded them also into the &quot;lib&quot; folder of my project:\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nAs parameter in the run configurations I set &quot;package&quot;, see screenshot below:\r\n[![enter image description here][3]][3]\r\n\r\n**SOLUTION:**\r\n\r\nThanks for all your hints, I got it to work now! The trick was that I did&#39;t add the dependencies to the pom.xml file (because I thought that this would be done automatically after setting them in the Project Structure, but it didn&#39;t)!!! See also my other question: https://stackoverflow.com/questions/34088277/intellij-idea-maven-plugin-manage-dependencies and https://www.jetbrains.com/idea/help/maven.html! Add the dependencies by \r\n\r\n 1. Open pom.xml\r\n 2. Menu &quot;Code&quot; &gt; &quot;Generate&quot; &gt; &quot;Dependency&quot; (or shortcut ALT + INSERT)\r\n\r\n  [1]: http://i.stack.imgur.com/sfJ4o.png\r\n  [2]: http://i.stack.imgur.com/pFvao.png\r\n  [3]: http://i.stack.imgur.com/6mbaE.png","title":"Intellij Maven: Create jar with all library dependencies","body":"<p>Working with IntelliJ Idea, I want to implement the following:</p>\n\n<p>I want to export an application to a jar, which contains all needed libraries. E.g. I need the AWS Java SDK libraries for S3 access, but if I upload the jar to the server and run the jar I get an NoClassDefFoundError, see below:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.NoClassDefFoundError: com/amazonaws/auth/AWSCredentials\n    at java.lang.Class.getDeclaredMethods0(Native Method)\n    at java.lang.Class.privateGetDeclaredMethods(Class.java:2625)\n    at java.lang.Class.getMethod0(Class.java:2866)\n    at java.lang.Class.getMethod(Class.java:1676)\n    at sun.launcher.LauncherHelper.getMainMethod(LauncherHelper.java:494)\n    at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:486)\nCaused by: java.lang.ClassNotFoundException: com.amazonaws.auth.AWSCredentials\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:425)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:358)\n    ... 6 more\n</code></pre>\n\n<p>Comparison: I created the same project in Eclipse and get no error! The jar file sizes are very different (Eclipse: ~35 MB vs. IntelliJ Idea: ~5,5 MB)! </p>\n\n<p>I included the libraries via Maven and downloaded them also into the \"lib\" folder of my project:\n<a href=\"https://i.stack.imgur.com/sfJ4o.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/sfJ4o.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/pFvao.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/pFvao.png\" alt=\"enter image description here\"></a></p>\n\n<p>As parameter in the run configurations I set \"package\", see screenshot below:\n<a href=\"https://i.stack.imgur.com/6mbaE.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/6mbaE.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>SOLUTION:</strong></p>\n\n<p>Thanks for all your hints, I got it to work now! The trick was that I did't add the dependencies to the pom.xml file (because I thought that this would be done automatically after setting them in the Project Structure, but it didn't)!!! See also my other question: <a href=\"https://stackoverflow.com/questions/34088277/intellij-idea-maven-plugin-manage-dependencies\">Intellij IDEA Maven Plugin - Manage Dependencies</a> and <a href=\"https://www.jetbrains.com/idea/help/maven.html\" rel=\"noreferrer\">https://www.jetbrains.com/idea/help/maven.html</a>! Add the dependencies by </p>\n\n<ol>\n<li>Open pom.xml</li>\n<li>Menu \"Code\" > \"Generate\" > \"Dependency\" (or shortcut ALT + INSERT)</li>\n</ol>\n"},{"tags":["java","class","extends","implements"],"comments":[{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1671225978,"post_id":74829745,"comment_id":132061569,"body_markdown":"@IłyaBursov &#39;s comment is a good one. The answer is, it depends on the requirements of the program. But let me tell you, in the real world, this is big big problem that comes up a LOT. You start off with one set of requirements, and then half way through (or when you&#39;re doing version 2) the requirements change, and commonly create massive ETL headaches (https://learn.microsoft.com/en-us/azure/architecture/data-guide/relational-data/etl) - The point is to try to get your requirements as nailed down as possible before you start coding, and then to create agile code","body":"@IłyaBursov &#39;s comment is a good one. The answer is, it depends on the requirements of the program. But let me tell you, in the real world, this is big big problem that comes up a LOT. You start off with one set of requirements, and then half way through (or when you&#39;re doing version 2) the requirements change, and commonly create massive ETL headaches (<a href=\"https://learn.microsoft.com/en-us/azure/architecture/data-guide/relational-data/etl\" rel=\"nofollow noreferrer\">learn.microsoft.com/en-us/azure/architecture/data-guide/&hellip;</a>) - The point is to try to get your requirements as nailed down as possible before you start coding, and then to create agile code"}],"answers":[{"tags":[],"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671225201,"creation_date":1671225201,"answer_id":74829816,"question_id":74829745,"body_markdown":"A common mistake that newcomers to object-oriented programming make is to try to fit every property of complex objects into one inheritance hierarchy. Inheritance is the most tightly coupled form of making a class X depend on a class Y. If X extends Y, then *every* change to Y must necessarily affect X, and all of X&#39;s methods must be careful not to violate Y&#39;s invariants (see Liskov substitution principle, for instance).\r\n\r\nInstead of shoving everything into one hierarchy, think about how your objects may have *properties* that can be modelled more neatly. You&#39;re right to be hesitant to use a bunch of Booleans, but that&#39;s not what I&#39;m suggesting. The flying/non-flying problem is orthogonal to the hostile/passive problem, so they need different solutions.\r\n\r\nFor the former, you might consider giving every creature type a `Movement` field. Perhaps something like\r\n\r\n    interface MovementAbility {\r\n      ...\r\n    }\r\n\r\n    class FlyingAbility implements MovementAbility {\r\n      ...\r\n    }\r\n\r\n    class WalkingAbility implements MovementAbility {\r\n      ...\r\n    }\r\n\r\nThen every creature gets one of these\r\n\r\n    class Creature {\r\n      private MovementAbility movementAbility;\r\n      ...\r\n    }\r\n\r\nor multiple, if there are creatures who can walk *and* fly and who need to be able to decide which one to do.\r\n\r\n    class Creature {\r\n      private List&lt;MovementAbility&gt; movementAbilities;\r\n      ...\r\n    }\r\n\r\nThen you can do the same thing for hostility. Something like\r\n\r\n    interface Disposition {\r\n      ...\r\n    }\r\n\r\n    class HostileDisposition extends Disposition {\r\n      ...\r\n    }\r\n\r\n    class PassiveDisposition extends Disposition {\r\n      ...\r\n    }\r\n\r\nThen your `Creature` could look like\r\n\r\n    public class Creature {\r\n      private MovementAbility movementAbility;\r\n      private Disposition disposition;\r\n    }\r\n\r\nand the creature can call methods on the `Disposition` object to determine how to behave in the presence of a player, then on the `MovementAbility` object to determine how to get from A to B.\r\n\r\nExactly *what* methods go in each of those classes is dependent on your needs for your particular project, but the key thing to aim for is not doing `instanceof` checks. It&#39;s really easy to write code in `Creature` that sits there and says `if (movementAbility instanceof FlyingAbility) { ... }`, but that&#39;s no better than just using a Boolean in the first place. Instead, when you need to do something that depends on *how* a creature moves, make it an abstract part of `MovementAbility` and call that function virtually.","title":"How to have a java class extend multiple attributes?","body":"<p>A common mistake that newcomers to object-oriented programming make is to try to fit every property of complex objects into one inheritance hierarchy. Inheritance is the most tightly coupled form of making a class X depend on a class Y. If X extends Y, then <em>every</em> change to Y must necessarily affect X, and all of X's methods must be careful not to violate Y's invariants (see Liskov substitution principle, for instance).</p>\n<p>Instead of shoving everything into one hierarchy, think about how your objects may have <em>properties</em> that can be modelled more neatly. You're right to be hesitant to use a bunch of Booleans, but that's not what I'm suggesting. The flying/non-flying problem is orthogonal to the hostile/passive problem, so they need different solutions.</p>\n<p>For the former, you might consider giving every creature type a <code>Movement</code> field. Perhaps something like</p>\n<pre><code>interface MovementAbility {\n  ...\n}\n\nclass FlyingAbility implements MovementAbility {\n  ...\n}\n\nclass WalkingAbility implements MovementAbility {\n  ...\n}\n</code></pre>\n<p>Then every creature gets one of these</p>\n<pre><code>class Creature {\n  private MovementAbility movementAbility;\n  ...\n}\n</code></pre>\n<p>or multiple, if there are creatures who can walk <em>and</em> fly and who need to be able to decide which one to do.</p>\n<pre><code>class Creature {\n  private List&lt;MovementAbility&gt; movementAbilities;\n  ...\n}\n</code></pre>\n<p>Then you can do the same thing for hostility. Something like</p>\n<pre><code>interface Disposition {\n  ...\n}\n\nclass HostileDisposition extends Disposition {\n  ...\n}\n\nclass PassiveDisposition extends Disposition {\n  ...\n}\n</code></pre>\n<p>Then your <code>Creature</code> could look like</p>\n<pre><code>public class Creature {\n  private MovementAbility movementAbility;\n  private Disposition disposition;\n}\n</code></pre>\n<p>and the creature can call methods on the <code>Disposition</code> object to determine how to behave in the presence of a player, then on the <code>MovementAbility</code> object to determine how to get from A to B.</p>\n<p>Exactly <em>what</em> methods go in each of those classes is dependent on your needs for your particular project, but the key thing to aim for is not doing <code>instanceof</code> checks. It's really easy to write code in <code>Creature</code> that sits there and says <code>if (movementAbility instanceof FlyingAbility) { ... }</code>, but that's no better than just using a Boolean in the first place. Instead, when you need to do something that depends on <em>how</em> a creature moves, make it an abstract part of <code>MovementAbility</code> and call that function virtually.</p>\n"}],"owner":{"account_id":9824740,"reputation":1,"user_id":7278121,"display_name":"Ender Hunter"},"comment_count":1,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":149,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1671225397,"answer_count":1,"score":-3,"last_activity_date":1671225201,"creation_date":1671224687,"question_id":74829745,"body_markdown":"So let&#39;s say you have a Creature class. Now say you have a Hostile class that extends it, and a Passive class that extends it, for hostile and passive creatures respectively. If some creatures can fly and some can&#39;t it would make sense also for there to be a &quot;Flying&quot; class that extends Creature and also maybe a &quot;Nonflying&quot; class or something. But any class you make extending either Hostile or Passive couldn&#39;t also extend Flying or Nonflying. What&#39;s the solution for this? I want certain behaviors to only happen for some Creatures marked as flying, and some only to occur if the creature is non-flying, but I don&#39;t want to use a boolean as that would require checking every tick whether the creature is flying or not, and seems like an illegant solution. Any ideas?\r\n\r\nSo far I haven&#39;t known what to try, as implementing this through booleans seems clunky and inefficent.","title":"How to have a java class extend multiple attributes?","body":"<p>So let's say you have a Creature class. Now say you have a Hostile class that extends it, and a Passive class that extends it, for hostile and passive creatures respectively. If some creatures can fly and some can't it would make sense also for there to be a &quot;Flying&quot; class that extends Creature and also maybe a &quot;Nonflying&quot; class or something. But any class you make extending either Hostile or Passive couldn't also extend Flying or Nonflying. What's the solution for this? I want certain behaviors to only happen for some Creatures marked as flying, and some only to occur if the creature is non-flying, but I don't want to use a boolean as that would require checking every tick whether the creature is flying or not, and seems like an illegant solution. Any ideas?</p>\n<p>So far I haven't known what to try, as implementing this through booleans seems clunky and inefficent.</p>\n"},{"tags":["java","office365","jakarta-mail"],"owner":{"account_id":27227069,"reputation":1,"user_id":20755407,"display_name":"Daniel W"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671224591,"creation_date":1670838370,"question_id":74769233,"body_markdown":"I have this code that intended to save the email as draft, but it keeps sending the message anyway.\r\n\r\n\r\n```\r\n        final String username = &quot;xxx&quot;;\r\n        final String password = &quot;xxx&quot;;\r\n\r\n        Properties props = new Properties();\r\n        props.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\r\n        props.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\r\n        props.put(&quot;mail.smtp.host&quot;, &quot;outlook.office365.com&quot;);\r\n        props.put(&quot;mail.smtp.port&quot;, &quot;587&quot;);\r\n\r\n        Session session = Session.getInstance(props,\r\n                new javax.mail.Authenticator() {\r\n                    protected PasswordAuthentication getPasswordAuthentication() {\r\n                        return new PasswordAuthentication(username, password);\r\n                    }\r\n                });\r\n\r\n        try {\r\n\r\n            Message message = new MimeMessage(session);\r\n            message.setFrom(new InternetAddress(&quot;xxx&quot;));\r\n            message.setRecipients(Message.RecipientType.TO,\r\n                    InternetAddress.parse(&quot;xxx&quot;));\r\n            message.setSubject(&quot;Test&quot;);\r\n            message.setText(&quot;HI&quot;);\r\n\r\n            message.setFlag(Flags.Flag.DRAFT, true);\r\n            message.saveChanges();\r\n            Transport.send(message);\r\n\r\n        } catch (MessagingException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n```\r\n\r\ni tried removing the `Transport.send(message);` but then it just do nothing. What i wanted is that the email just saved in the Drafts folder on my outlook.","title":"How do i save the email I created using java mail API as a draft?","body":"<p>I have this code that intended to save the email as draft, but it keeps sending the message anyway.</p>\n<pre><code>        final String username = &quot;xxx&quot;;\n        final String password = &quot;xxx&quot;;\n\n        Properties props = new Properties();\n        props.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\n        props.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\n        props.put(&quot;mail.smtp.host&quot;, &quot;outlook.office365.com&quot;);\n        props.put(&quot;mail.smtp.port&quot;, &quot;587&quot;);\n\n        Session session = Session.getInstance(props,\n                new javax.mail.Authenticator() {\n                    protected PasswordAuthentication getPasswordAuthentication() {\n                        return new PasswordAuthentication(username, password);\n                    }\n                });\n\n        try {\n\n            Message message = new MimeMessage(session);\n            message.setFrom(new InternetAddress(&quot;xxx&quot;));\n            message.setRecipients(Message.RecipientType.TO,\n                    InternetAddress.parse(&quot;xxx&quot;));\n            message.setSubject(&quot;Test&quot;);\n            message.setText(&quot;HI&quot;);\n\n            message.setFlag(Flags.Flag.DRAFT, true);\n            message.saveChanges();\n            Transport.send(message);\n\n        } catch (MessagingException e) {\n            throw new RuntimeException(e);\n        }\n</code></pre>\n<p>i tried removing the <code>Transport.send(message);</code> but then it just do nothing. What i wanted is that the email just saved in the Drafts folder on my outlook.</p>\n"},{"tags":["java","xml","xml-parsing"],"comments":[{"owner":{"account_id":10753071,"reputation":2784,"user_id":7911776,"display_name":"Nicol&#225;s Alarc&#243;n Rapela"},"score":0,"creation_date":1617716101,"post_id":66969538,"comment_id":118377652,"body_markdown":"Are you generating that XML? (with Java)","body":"Are you generating that XML? (with Java)"},{"owner":{"account_id":12827279,"reputation":37,"user_id":9279806,"display_name":"NIkhil Rohilla"},"score":0,"creation_date":1617716124,"post_id":66969538,"comment_id":118377669,"body_markdown":"Yes, I have generated that XML.","body":"Yes, I have generated that XML."},{"owner":{"account_id":10753071,"reputation":2784,"user_id":7911776,"display_name":"Nicol&#225;s Alarc&#243;n Rapela"},"score":0,"creation_date":1617716282,"post_id":66969538,"comment_id":118377756,"body_markdown":"The basis of what you happen is that a carriage return is being added ... Investigate with this starting point and if you do not find anything, edit the post with the part that generates the XML.","body":"The basis of what you happen is that a carriage return is being added ... Investigate with this starting point and if you do not find anything, edit the post with the part that generates the XML."},{"owner":{"account_id":12827279,"reputation":37,"user_id":9279806,"display_name":"NIkhil Rohilla"},"score":0,"creation_date":1617716391,"post_id":66969538,"comment_id":118377825,"body_markdown":"How does a carriage return get added when i didnt add ?","body":"How does a carriage return get added when i didnt add ?"},{"owner":{"account_id":10753071,"reputation":2784,"user_id":7911776,"display_name":"Nicol&#225;s Alarc&#243;n Rapela"},"score":0,"creation_date":1617716807,"post_id":66969538,"comment_id":118378051,"body_markdown":"Better group the part that generates the XML :)","body":"Better group the part that generates the XML :)"},{"owner":{"account_id":9573561,"reputation":326,"user_id":7110488,"display_name":"Code Maverick"},"score":0,"creation_date":1617717197,"post_id":66969538,"comment_id":118378251,"body_markdown":"It looks like there is an issue with `LSSerializer`. See [this](https://stackoverflow.com/questions/28347767/prevent-wrapping-of-lines-when-pretty-printing-xml-string).","body":"It looks like there is an issue with <code>LSSerializer</code>. See <a href=\"https://stackoverflow.com/questions/28347767/prevent-wrapping-of-lines-when-pretty-printing-xml-string\">this</a>."},{"owner":{"account_id":12827279,"reputation":37,"user_id":9279806,"display_name":"NIkhil Rohilla"},"score":0,"creation_date":1617718685,"post_id":66969538,"comment_id":118379030,"body_markdown":"I checked out the link you shared but it seems the answer is outdated as the Class OutputFormat being used by them is deprecated.\nAlso I have noticed some discrepancies in the way the file is being generated when i execute the application from eclipse vs executing the application jar using java command.","body":"I checked out the link you shared but it seems the answer is outdated as the Class OutputFormat being used by them is deprecated. Also I have noticed some discrepancies in the way the file is being generated when i execute the application from eclipse vs executing the application jar using java command."},{"owner":{"account_id":10753071,"reputation":2784,"user_id":7911776,"display_name":"Nicol&#225;s Alarc&#243;n Rapela"},"score":0,"creation_date":1617725501,"post_id":66969538,"comment_id":118382644,"body_markdown":"How do you ingest data in &#39;document&#39;? I have made a small way trying to reproduce the error (inserting my own data) and in my case it works with that data\nComment that you see an xml in one way generated with Eclipse and another from a jar, does it have the same Java in both places?","body":"How do you ingest data in &#39;document&#39;? I have made a small way trying to reproduce the error (inserting my own data) and in my case it works with that data Comment that you see an xml in one way generated with Eclipse and another from a jar, does it have the same Java in both places?"},{"owner":{"account_id":12827279,"reputation":37,"user_id":9279806,"display_name":"NIkhil Rohilla"},"score":0,"creation_date":1617771008,"post_id":66969538,"comment_id":118395489,"body_markdown":"Yes, its the same java code in both places. the one with eclipse generates the XML with indented tags and the one with jar has indentation only for some tags and not for others. I was able to fix the carriage return inside the xml tag using the second answer available in the link but the formatting is still different in both places.","body":"Yes, its the same java code in both places. the one with eclipse generates the XML with indented tags and the one with jar has indentation only for some tags and not for others. I was able to fix the carriage return inside the xml tag using the second answer available in the link but the formatting is still different in both places."},{"owner":{"account_id":12827279,"reputation":37,"user_id":9279806,"display_name":"NIkhil Rohilla"},"score":0,"creation_date":1617772322,"post_id":66969538,"comment_id":118395751,"body_markdown":"The data is inserted in the document using createElementNS, createTextNode, appendChild methods","body":"The data is inserted in the document using createElementNS, createTextNode, appendChild methods"},{"owner":{"account_id":10753071,"reputation":2784,"user_id":7911776,"display_name":"Nicol&#225;s Alarc&#243;n Rapela"},"score":0,"creation_date":1617784567,"post_id":66969538,"comment_id":118400071,"body_markdown":"@NIkhilRohilla I see that if you have found a solution to this issue, you should answer how to solve it and open a new question referring to it and explaining your new problem in maximum detail.","body":"@NIkhilRohilla I see that if you have found a solution to this issue, you should answer how to solve it and open a new question referring to it and explaining your new problem in maximum detail."}],"owner":{"account_id":12827279,"reputation":37,"user_id":9279806,"display_name":"NIkhil Rohilla"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":199,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671224473,"creation_date":1617715436,"question_id":66969538,"body_markdown":"I have an XML document like this:\r\n\r\n    &lt;document&gt;\r\n      &lt;root&gt;\r\n        &lt;field1&gt;\r\n          &lt;a \r\n          Type=&quot;anyType&quot;&gt;\r\n            &lt;b&gt;Text&lt;/b&gt;\r\n          &lt;/a&gt;\r\n        &lt;field1&gt;\r\n      &lt;/root&gt;\r\n    &lt;/document&gt;\r\n\r\nI want to remove the whitespace in the XML attribute `Type` and the XML field `a`\r\n\r\nThe output should be like:\r\n\r\n    &lt;document&gt;\r\n      &lt;root&gt;\r\n        &lt;field1&gt;\r\n          &lt;a Type=&quot;anyType&quot;&gt;\r\n            &lt;b&gt;Text&lt;/b&gt;\r\n          &lt;/a&gt;\r\n        &lt;field1&gt;\r\n      &lt;/root&gt;\r\n    &lt;/document&gt;\r\n\r\nHow to do this in Java?\r\n\r\nThe code to generate the XML File is below:\r\n\r\n    DOMSource domSource = new DOMSource(document);\r\n    StringWriter writer = new StringWriter();\r\n    StreamResult result = new StreamResult(writer);\r\n    TransformerFactory tf = TransformerFactory.newInstance();\r\n    Transformer transformer = tf.newTransformer();\r\n    transformer.transform(domSource, result);\r\n    \r\n    String fileData = format(writer.toString());\r\n    \r\n    // remove CR(carriage return)\r\n    fileData = fileData.replaceAll(&quot;&amp;#[a-zA-Z0-9]{2};&quot;, &quot;&quot;);\r\n    saveDocumentIntoFile(fileData, fileName);\r\n\r\nmethod format()\r\n\r\n    public String format(String xml) {\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\tfinal InputSource src = new InputSource(new StringReader(xml));\r\n    \t\t\tfinal Node document = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(src).getDocumentElement();\r\n    \t\t\tfinal Boolean keepDeclaration = Boolean.valueOf(xml.startsWith(&quot;&lt;?xml&quot;));\r\n    \t\t\t\r\n    \t\t\tfinal DOMImplementationRegistry registry = DOMImplementationRegistry.newInstance();\r\n    \t\t\tfinal DOMImplementationLS impl = (DOMImplementationLS) registry.getDOMImplementation(&quot;LS&quot;);\r\n    \t\t\tfinal LSSerializer writer = impl.createLSSerializer();\r\n    \t\t\t\r\n    \t\t\t// Set this to true if the output needs to be beautified.\r\n    \t\t\twriter.getDomConfig().setParameter(&quot;format-pretty-print&quot;, Boolean.TRUE);\r\n    \t\t\t// Set this to true if the declaration is needed to be outputted.\r\n    \t\t\twriter.getDomConfig().setParameter(&quot;xml-declaration&quot;, keepDeclaration);\r\n    \t\t\t\r\n    \t\t\treturn writer.writeToString(document);\r\n    \t\t} catch (Exception e) {\r\n    \t\t\tthrow new RuntimeException(e);\r\n    \t\t}\r\n    \t}\r\n\r\nmethod saveDocumentIntoFile()\r\n\r\n    protected void saveDocumentIntoFile(String fileData, String fileName) throws IOException {\r\n    \t\tFileWriter batchFile = new FileWriter(fileName);\r\n    \t\t\r\n    \t\tbatchFile.write(fileData);\r\n    \t\tbatchFile.close();\r\n    \t}\r\n\r\n","title":"How to remove whitespaces in XML attributes","body":"<p>I have an XML document like this:</p>\n<pre><code>&lt;document&gt;\n  &lt;root&gt;\n    &lt;field1&gt;\n      &lt;a \n      Type=&quot;anyType&quot;&gt;\n        &lt;b&gt;Text&lt;/b&gt;\n      &lt;/a&gt;\n    &lt;field1&gt;\n  &lt;/root&gt;\n&lt;/document&gt;\n</code></pre>\n<p>I want to remove the whitespace in the XML attribute <code>Type</code> and the XML field <code>a</code></p>\n<p>The output should be like:</p>\n<pre><code>&lt;document&gt;\n  &lt;root&gt;\n    &lt;field1&gt;\n      &lt;a Type=&quot;anyType&quot;&gt;\n        &lt;b&gt;Text&lt;/b&gt;\n      &lt;/a&gt;\n    &lt;field1&gt;\n  &lt;/root&gt;\n&lt;/document&gt;\n</code></pre>\n<p>How to do this in Java?</p>\n<p>The code to generate the XML File is below:</p>\n<pre><code>DOMSource domSource = new DOMSource(document);\nStringWriter writer = new StringWriter();\nStreamResult result = new StreamResult(writer);\nTransformerFactory tf = TransformerFactory.newInstance();\nTransformer transformer = tf.newTransformer();\ntransformer.transform(domSource, result);\n\nString fileData = format(writer.toString());\n\n// remove CR(carriage return)\nfileData = fileData.replaceAll(&quot;&amp;#[a-zA-Z0-9]{2};&quot;, &quot;&quot;);\nsaveDocumentIntoFile(fileData, fileName);\n</code></pre>\n<p>method format()</p>\n<pre><code>public String format(String xml) {\n        \n        try {\n            final InputSource src = new InputSource(new StringReader(xml));\n            final Node document = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(src).getDocumentElement();\n            final Boolean keepDeclaration = Boolean.valueOf(xml.startsWith(&quot;&lt;?xml&quot;));\n            \n            final DOMImplementationRegistry registry = DOMImplementationRegistry.newInstance();\n            final DOMImplementationLS impl = (DOMImplementationLS) registry.getDOMImplementation(&quot;LS&quot;);\n            final LSSerializer writer = impl.createLSSerializer();\n            \n            // Set this to true if the output needs to be beautified.\n            writer.getDomConfig().setParameter(&quot;format-pretty-print&quot;, Boolean.TRUE);\n            // Set this to true if the declaration is needed to be outputted.\n            writer.getDomConfig().setParameter(&quot;xml-declaration&quot;, keepDeclaration);\n            \n            return writer.writeToString(document);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n<p>method saveDocumentIntoFile()</p>\n<pre><code>protected void saveDocumentIntoFile(String fileData, String fileName) throws IOException {\n        FileWriter batchFile = new FileWriter(fileName);\n        \n        batchFile.write(fileData);\n        batchFile.close();\n    }\n</code></pre>\n"},{"tags":["java","time","java-time","datetime-parsing","localdatetime"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1671200517,"post_id":74825518,"comment_id":132054122,"body_markdown":"are you sure `pm` is the correct spelling for your default `Locale`? (I had no problem with posted code - using `Locale.UK`)","body":"are you sure <code>pm</code> is the correct spelling for your default <code>Locale</code>? (I had no problem with posted code - using <code>Locale.UK</code>)"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1671201177,"post_id":74825518,"comment_id":132054363,"body_markdown":"Is it common to use lower-case AM/PM in UK? That&#39;s interesting, I have to check it out soon…","body":"Is it common to use lower-case AM/PM in UK? That&#39;s interesting, I have to check it out soon…"}],"answers":[{"tags":[],"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1671201462,"creation_date":1671200659,"answer_id":74825761,"question_id":74825518,"body_markdown":"**tl;dr**  \r\nIndex 17 is *AM/PM of day*  \r\n**Problems:** \r\n- it&#39;s lower case in the `String`\r\n- its format and language depend on the `Locale` of the JVM if you don&#39;t apply one explicitly\r\n\r\nIf you can change the input `String`, you should make the `pm` (or `am`) upper case, otherwise use a `DateTimeFormatter` that parses case insensitive(ly). You can use a `DateTimeFormatterBuilder` for that.\r\n\r\nIn any case add a `Locale` since `AM/PM` is not everywhere exactly one of those two abbreviations (on my German JVM it would be `nachm.`, abbreviating `nachmittags`, which means something like `at noon`).\r\n\r\nHere&#39;s an example:\r\n\r\n```Java\r\npublic static void main(String[] args) {\r\n\t// define the pattern (your original one should do)\r\n\tString pattern = &quot;M/d/yyyy, h:mm a&quot;;\r\n    // build a formatter that handles the lower-case AM/PM of day\r\n    DateTimeFormatter formatter = new DateTimeFormatterBuilder()\r\n\t\t\t\t\t\t\t\t    \t\t.parseCaseInsensitive()\r\n    \t\t\t\t\t\t\t\t\t\t.appendPattern(pattern)\r\n    \t\t\t\t\t\t\t\t\t\t.toFormatter(Locale.ENGLISH);\r\n    // example input / datetime\r\n    String dateString = &quot;12/16/2022, 1:33 pm&quot;;\r\n    // parse with the formatter\r\n\tLocalDateTime resultB = LocalDateTime.parse(dateString, formatter);\r\n\t// print the result\r\n\tSystem.out.println(resultB);\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n```none\r\n2022-12-16T13:33\r\n```\r\n\r\n**Small hint** (because I just made that mistake myself):  \r\nthe call to `.parseCaseInsensitive()` must come before appending the (relevant part of) the pattern. Otherwise the formatter would only know to parse case insensitively afterwards, which then fails with the same `DateTimeParseException`.\r\n\r\n---\r\n\r\n**Update:**  \r\nObviously, UK&#39;s standard is lower case, so you can use `DateTimeFormatter.ofPattern(pattern, Locale.UK)`, too. There may be more such `Locale`s, but a fix one is less flexible than a formatter that parses case insensitively (IMHO).","title":"Cannot parse &#39;12/16/2022, 1:33 pm&#39; using &#39;M/d/yyyy, h:mm a&#39; format pattern into a LocalDateTime object","body":"<p><strong>tl;dr</strong><br />\nIndex 17 is <em>AM/PM of day</em><br />\n<strong>Problems:</strong></p>\n<ul>\n<li>it's lower case in the <code>String</code></li>\n<li>its format and language depend on the <code>Locale</code> of the JVM if you don't apply one explicitly</li>\n</ul>\n<p>If you can change the input <code>String</code>, you should make the <code>pm</code> (or <code>am</code>) upper case, otherwise use a <code>DateTimeFormatter</code> that parses case insensitive(ly). You can use a <code>DateTimeFormatterBuilder</code> for that.</p>\n<p>In any case add a <code>Locale</code> since <code>AM/PM</code> is not everywhere exactly one of those two abbreviations (on my German JVM it would be <code>nachm.</code>, abbreviating <code>nachmittags</code>, which means something like <code>at noon</code>).</p>\n<p>Here's an example:</p>\n<pre><code>public static void main(String[] args) {\n    // define the pattern (your original one should do)\n    String pattern = &quot;M/d/yyyy, h:mm a&quot;;\n    // build a formatter that handles the lower-case AM/PM of day\n    DateTimeFormatter formatter = new DateTimeFormatterBuilder()\n                                            .parseCaseInsensitive()\n                                            .appendPattern(pattern)\n                                            .toFormatter(Locale.ENGLISH);\n    // example input / datetime\n    String dateString = &quot;12/16/2022, 1:33 pm&quot;;\n    // parse with the formatter\n    LocalDateTime resultB = LocalDateTime.parse(dateString, formatter);\n    // print the result\n    System.out.println(resultB);\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>2022-12-16T13:33\n</code></pre>\n<p><strong>Small hint</strong> (because I just made that mistake myself):<br />\nthe call to <code>.parseCaseInsensitive()</code> must come before appending the (relevant part of) the pattern. Otherwise the formatter would only know to parse case insensitively afterwards, which then fails with the same <code>DateTimeParseException</code>.</p>\n<hr />\n<p><strong>Update:</strong><br />\nObviously, UK's standard is lower case, so you can use <code>DateTimeFormatter.ofPattern(pattern, Locale.UK)</code>, too. There may be more such <code>Locale</code>s, but a fix one is less flexible than a formatter that parses case insensitively (IMHO).</p>\n"}],"owner":{"account_id":292835,"reputation":6407,"user_id":595833,"accept_rate":94,"display_name":"bobbyrne01"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":136,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":74825761,"answer_count":1,"score":-2,"last_activity_date":1671224419,"creation_date":1671199420,"question_id":74825518,"body_markdown":"The value `12/16/2022, 1:33 pm` looks to match to expected format pattern `M/d/yyyy, h:mm a`, what is incorrect `at index 17`?\r\n\r\nJava unit test:\r\n\r\n```\r\n@Test\r\npublic void testLocalDateTime_shortDateTimePattern() {\r\n    String pattern = &quot;M/d/yyyy, h:mm a&quot;;\r\n    System.out.println(pattern);\r\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(pattern);\r\n\r\n    String dateString = &quot;12/16/2022, 1:33 pm&quot;;\r\n    System.out.println(dateString);\r\n\r\n    LocalDateTime result = LocalDateTime.parse(dateString, formatter);\r\n    System.out.println(result);\r\n}\r\n```\r\n\r\nConsole output:\r\n\r\n```\r\nM/d/yyyy, h:mm a\r\n12/16/2022, 1:33 pm\r\n\r\nText &#39;12/16/2022, 1:33 pm&#39; could not be parsed at index 17\r\njava.time.format.DateTimeParseException: Text &#39;12/16/2022, 1:33 pm&#39; could not be parsed at index 17\r\n\tat java.base/java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:2046)\r\n\tat java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1948)\r\n\tat java.base/java.time.LocalDateTime.parse(LocalDateTime.java:492)\r\n```","title":"Cannot parse &#39;12/16/2022, 1:33 pm&#39; using &#39;M/d/yyyy, h:mm a&#39; format pattern into a LocalDateTime object","body":"<p>The value <code>12/16/2022, 1:33 pm</code> looks to match to expected format pattern <code>M/d/yyyy, h:mm a</code>, what is incorrect <code>at index 17</code>?</p>\n<p>Java unit test:</p>\n<pre><code>@Test\npublic void testLocalDateTime_shortDateTimePattern() {\n    String pattern = &quot;M/d/yyyy, h:mm a&quot;;\n    System.out.println(pattern);\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(pattern);\n\n    String dateString = &quot;12/16/2022, 1:33 pm&quot;;\n    System.out.println(dateString);\n\n    LocalDateTime result = LocalDateTime.parse(dateString, formatter);\n    System.out.println(result);\n}\n</code></pre>\n<p>Console output:</p>\n<pre><code>M/d/yyyy, h:mm a\n12/16/2022, 1:33 pm\n\nText '12/16/2022, 1:33 pm' could not be parsed at index 17\njava.time.format.DateTimeParseException: Text '12/16/2022, 1:33 pm' could not be parsed at index 17\n    at java.base/java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:2046)\n    at java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1948)\n    at java.base/java.time.LocalDateTime.parse(LocalDateTime.java:492)\n</code></pre>\n"},{"tags":["java","jdo","datanucleus"],"comments":[{"owner":{"account_id":26568,"reputation":15517,"user_id":69258,"display_name":"DataNucleus"},"score":0,"creation_date":1334127999,"post_id":10096772,"comment_id":12940057,"body_markdown":"what &quot;executable jar&quot; ? made up of what ?","body":"what &quot;executable jar&quot; ? made up of what ?"},{"owner":{"account_id":988842,"reputation":389,"user_id":1006649,"accept_rate":50,"display_name":"Paul"},"score":1,"creation_date":1334135356,"post_id":10096772,"comment_id":12942445,"body_markdown":"Whole project with maven dependencies deployed as executable jar file.","body":"Whole project with maven dependencies deployed as executable jar file."},{"owner":{"account_id":26568,"reputation":15517,"user_id":69258,"display_name":"DataNucleus"},"score":0,"creation_date":1334141741,"post_id":10096772,"comment_id":12944718,"body_markdown":"you mean you unjarred the DN jars and put everything in a single jar?","body":"you mean you unjarred the DN jars and put everything in a single jar?"},{"owner":{"account_id":988842,"reputation":389,"user_id":1006649,"accept_rate":50,"display_name":"Paul"},"score":1,"creation_date":1334145178,"post_id":10096772,"comment_id":12945958,"body_markdown":"I have bundled everything into big jar, all dependency jars into executable jar. With a maven-repo style structure inside the jar for dependencies. \n\nWhat is the correct way to bundle everything, so I can have working jar, with all dependencies working properly?","body":"I have bundled everything into big jar, all dependency jars into executable jar. With a maven-repo style structure inside the jar for dependencies.   What is the correct way to bundle everything, so I can have working jar, with all dependencies working properly?"},{"owner":{"account_id":26568,"reputation":15517,"user_id":69258,"display_name":"DataNucleus"},"score":0,"creation_date":1334146902,"post_id":10096772,"comment_id":12946583,"body_markdown":"DN jars need to have their OSGi info in the right places (plugin.xml and META-INF/MANIFEST.MF). Are they?","body":"DN jars need to have their OSGi info in the right places (plugin.xml and META-INF/MANIFEST.MF). Are they?"},{"owner":{"account_id":988842,"reputation":389,"user_id":1006649,"accept_rate":50,"display_name":"Paul"},"score":1,"creation_date":1334148133,"post_id":10096772,"comment_id":12947109,"body_markdown":"No, I do not have that in my MANIFEST file. I am not creating a plugin, just a standalone java app, so I didn&#39;t take a look at that section of documentation. I am not really sure what to put there then, bundle information too, or just define imports?","body":"No, I do not have that in my MANIFEST file. I am not creating a plugin, just a standalone java app, so I didn&#39;t take a look at that section of documentation. I am not really sure what to put there then, bundle information too, or just define imports?"}],"answers":[{"tags":[],"owner":{"account_id":26568,"reputation":15517,"user_id":69258,"display_name":"DataNucleus"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1334149115,"creation_date":1334149115,"answer_id":10106373,"question_id":10096772,"body_markdown":"DataNucleus jars are all OSGi-enabled and use a plugin mechanism to identify capabilities, so contain *plugin.xml* and *META-INF/MANIFEST.MF* files. These need to be in the same locations as they are in the original DN jars (from the root of the jar). If you unpack and then rejar them up you will need to merge any plugin.xml and META-INF/MANIFEST.MF from the DN jars ... ALL of the information there not just some of it. ","title":"Datanucleus, JDO and executable jar - how to do it?","body":"<p>DataNucleus jars are all OSGi-enabled and use a plugin mechanism to identify capabilities, so contain <em>plugin.xml</em> and <em>META-INF/MANIFEST.MF</em> files. These need to be in the same locations as they are in the original DN jars (from the root of the jar). If you unpack and then rejar them up you will need to merge any plugin.xml and META-INF/MANIFEST.MF from the DN jars ... ALL of the information there not just some of it. </p>\n"},{"tags":[],"owner":{"account_id":537281,"reputation":400,"user_id":905862,"accept_rate":60,"display_name":"Krzysztof Zielinski"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1334304136,"creation_date":1334304136,"answer_id":10137234,"question_id":10096772,"body_markdown":"Adding to DataNucleus answer.&lt;br&gt;\r\nTo acheave what you need you should use **maven-dependency-plugin**&lt;br&gt;\r\nand add following to your pom.xml&lt;br&gt;\r\n\r\n    &lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.4&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;copy-dependencies&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;copy-dependencies&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;outputDirectory&gt;${project.build.directory}/jars&lt;/outputDirectory&gt;\r\n\t\t\t\t\t\t\t&lt;overWriteReleases&gt;false&lt;/overWriteReleases&gt;\r\n\t\t\t\t\t\t\t&lt;overWriteSnapshots&gt;false&lt;/overWriteSnapshots&gt;\r\n\t\t\t\t\t\t\t&lt;overWriteIfNewer&gt;true&lt;/overWriteIfNewer&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\nThen the dependencies will be in *target/jars* dir.&lt;br&gt;\r\n&lt;br&gt;\r\nTo execute your app you use command:&lt;br&gt;\r\n&lt;br&gt;\r\nWindows:&lt;br&gt;\r\n*java  -cp &quot;yourFile.jar;jars/\\*&quot; package.className*&lt;br&gt;\r\n&lt;br&gt;\r\nLinux:&lt;br&gt;\r\n*java  -cp &quot;yourFile.jar:jars/\\*&quot; package.className*&lt;br&gt;\r\n&lt;br&gt;\r\nNOTE: do not use jars/*.jar, this will not work&lt;br&gt;","title":"Datanucleus, JDO and executable jar - how to do it?","body":"<p>Adding to DataNucleus answer.<br>\nTo acheave what you need you should use <strong>maven-dependency-plugin</strong><br>\nand add following to your pom.xml<br></p>\n\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.4&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;copy-dependencies&lt;/id&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;outputDirectory&gt;${project.build.directory}/jars&lt;/outputDirectory&gt;\n                        &lt;overWriteReleases&gt;false&lt;/overWriteReleases&gt;\n                        &lt;overWriteSnapshots&gt;false&lt;/overWriteSnapshots&gt;\n                        &lt;overWriteIfNewer&gt;true&lt;/overWriteIfNewer&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>Then the dependencies will be in <em>target/jars</em> dir.<br>\n<br>\nTo execute your app you use command:<br>\n<br>\nWindows:<br>\n<em>java  -cp \"yourFile.jar;jars/*\" package.className</em><br>\n<br>\nLinux:<br>\n<em>java  -cp \"yourFile.jar:jars/*\" package.className</em><br>\n<br>\nNOTE: do not use jars/*.jar, this will not work<br></p>\n"},{"tags":[],"owner":{"account_id":253102,"reputation":2477,"user_id":531578,"accept_rate":100,"display_name":"Oscar Korz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1416446180,"creation_date":1416446180,"answer_id":27030103,"question_id":10096772,"body_markdown":"In order to use DataNucleus 4.x in an Apache Storm topology which requires a single jar, I had to do two hacks in order to keep their PluginRegistry stuff working. The issue is that the DataNucleus core tries to load modules as OSGi bundles, even when it is not running in an OSGi container. This works fine as long as the jars are not merged (and I would prefer not to merge my dependencies, but this is not an option for me).\r\n\r\nFirst, I merged all the plugin.xml files into the datanucleus-core plugin.xml. The trick is that extension-point ids are relative to their parent plugin&#39;s id. So if any of the modules your are using define new extension-points, e.g. datanucleus-rdbms, you have to rewrite the ids so they are relative to their new parent plugin.\r\n\r\nSecond, I added the following entries to our jar&#39;s MANIFEST.MF:\r\n\r\n    Premain-Class: org.datanucleus.enhancer.DataNucleusClassFileTransformer\r\n    Bundle-SymbolicName: org.datanucleus;singleton:=true\r\n\r\nThis solution is not ideal as our application is essentially pretending to be the DataNucleus core OSGi bundle. However, this was what I ended up with after a few days off smashing my head on my desk.\r\n\r\nIt might be possible to provide a different PluginRegistry implementation, but I have not looked into this.","title":"Datanucleus, JDO and executable jar - how to do it?","body":"<p>In order to use DataNucleus 4.x in an Apache Storm topology which requires a single jar, I had to do two hacks in order to keep their PluginRegistry stuff working. The issue is that the DataNucleus core tries to load modules as OSGi bundles, even when it is not running in an OSGi container. This works fine as long as the jars are not merged (and I would prefer not to merge my dependencies, but this is not an option for me).</p>\n\n<p>First, I merged all the plugin.xml files into the datanucleus-core plugin.xml. The trick is that extension-point ids are relative to their parent plugin's id. So if any of the modules your are using define new extension-points, e.g. datanucleus-rdbms, you have to rewrite the ids so they are relative to their new parent plugin.</p>\n\n<p>Second, I added the following entries to our jar's MANIFEST.MF:</p>\n\n<pre><code>Premain-Class: org.datanucleus.enhancer.DataNucleusClassFileTransformer\nBundle-SymbolicName: org.datanucleus;singleton:=true\n</code></pre>\n\n<p>This solution is not ideal as our application is essentially pretending to be the DataNucleus core OSGi bundle. However, this was what I ended up with after a few days off smashing my head on my desk.</p>\n\n<p>It might be possible to provide a different PluginRegistry implementation, but I have not looked into this.</p>\n"},{"tags":[],"owner":{"account_id":7246979,"reputation":340,"user_id":5528570,"accept_rate":0,"display_name":"Lisa Clark"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593375147,"creation_date":1593375147,"answer_id":62627735,"question_id":10096772,"body_markdown":"For anyone else struggling to merge the datanucleus plugin.xml files, I used the following code to help.  Pipe the contents from the 3 separate datanucleus plugin.xml files using this command and this will tell you where there are extensions which explicitly need merging:\r\n\r\n`cat plugin_core.xml plugin_rdbms.xml plugin_api.xml | grep -h &quot;extension point&quot; | tr -d &quot;[:blank:]&quot;| sort | uniq -d`\r\n\r\nMore details are in a [separate post][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/62414127/apache-spark-project-with-single-executable-jar-with-datanucleus/62627698#62627698","title":"Datanucleus, JDO and executable jar - how to do it?","body":"<p>For anyone else struggling to merge the datanucleus plugin.xml files, I used the following code to help.  Pipe the contents from the 3 separate datanucleus plugin.xml files using this command and this will tell you where there are extensions which explicitly need merging:</p>\n<p><code>cat plugin_core.xml plugin_rdbms.xml plugin_api.xml | grep -h &quot;extension point&quot; | tr -d &quot;[:blank:]&quot;| sort | uniq -d</code></p>\n<p>More details are in a <a href=\"https://stackoverflow.com/questions/62414127/apache-spark-project-with-single-executable-jar-with-datanucleus/62627698#62627698\">separate post</a>.</p>\n"},{"tags":[],"owner":{"account_id":1714422,"reputation":5361,"user_id":1571826,"accept_rate":67,"display_name":"Def_Os"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671223763,"creation_date":1671223763,"answer_id":74829628,"question_id":10096772,"body_markdown":"Building on top of the existing answers (especially https://stackoverflow.com/a/27030103/1571826), overrode my `plugin.xml` once manually with the IDs for the RDBMS plugin. I followed this answer for that: https://stackoverflow.com/a/37511856/1571826\r\n\r\nAfter storing that new `plugin.xml` as a resource, I configured my `maven-shade-plugin` as follows:\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.2.4&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;shade&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;shadedArtifactAttached&gt;true&lt;/shadedArtifactAttached&gt;\r\n                    &lt;finalName&gt;${project.artifactId}-shaded&lt;/finalName&gt;\r\n                    &lt;filters&gt;\r\n                        &lt;filter&gt;\r\n                            &lt;artifact&gt;*:*&lt;/artifact&gt;\r\n                            &lt;excludes&gt;\r\n                                &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\r\n                                &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\r\n                                &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\r\n                                &lt;exclude&gt;META-INF/DEPENDENCIES&lt;/exclude&gt;\r\n                                &lt;exclude&gt;META-INF/license/*&lt;/exclude&gt;\r\n                                &lt;exclude&gt;META-INF/LICENSE&lt;/exclude&gt;\r\n                                &lt;exclude&gt;META-INF/NOTICE&lt;/exclude&gt;\r\n                            &lt;/excludes&gt;\r\n                        &lt;/filter&gt;\r\n                    &lt;/filters&gt;\r\n                    &lt;transformers&gt;\r\n                        &lt;!--\r\n                        Metastore dependencies require below highly specific merging solutions:\r\n                        - https://github.com/apache/iceberg/issues/5946#issuecomment-1278674526\r\n                        - https://stackoverflow.com/a/10106373/1571826\r\n                        - https://stackoverflow.com/a/37511856/1571826\r\n                        --&gt;\r\n                        &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ServicesResourceTransformer&quot;/&gt;\r\n                        &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.DontIncludeResourceTransformer&quot;&gt;\r\n                            &lt;resource&gt;META-INF/MANIFEST&lt;/resource&gt;\r\n                        &lt;/transformer&gt;\r\n                        &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n                            &lt;manifestEntries&gt;\r\n                                &lt;Main-Class&gt;${mainClass}&lt;/Main-Class&gt;\r\n                                &lt;Premain-Class&gt;org.datanucleus.enhancer.DataNucleusClassFileTransformer&lt;/Premain-Class&gt;\r\n                                &lt;Bundle-SymbolicName&gt;org.datanucleus;singleton:=true&lt;/Bundle-SymbolicName&gt;\r\n                            &lt;/manifestEntries&gt;\r\n                        &lt;/transformer&gt;\r\n                        &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.DontIncludeResourceTransformer&quot;&gt;\r\n                            &lt;resource&gt;plugin.xml&lt;/resource&gt;\r\n                        &lt;/transformer&gt;\r\n                        &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.IncludeResourceTransformer&quot;&gt;\r\n                            &lt;resource&gt;plugin.xml&lt;/resource&gt;\r\n                            &lt;file&gt;src/main/resources/plugin.xml&lt;/file&gt;\r\n                        &lt;/transformer&gt;\r\n                        &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\r\n                            &lt;resource&gt;reference.conf&lt;/resource&gt;\r\n                        &lt;/transformer&gt;\r\n                    &lt;/transformers&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n","title":"Datanucleus, JDO and executable jar - how to do it?","body":"<p>Building on top of the existing answers (especially <a href=\"https://stackoverflow.com/a/27030103/1571826\">https://stackoverflow.com/a/27030103/1571826</a>), overrode my <code>plugin.xml</code> once manually with the IDs for the RDBMS plugin. I followed this answer for that: <a href=\"https://stackoverflow.com/a/37511856/1571826\">https://stackoverflow.com/a/37511856/1571826</a></p>\n<p>After storing that new <code>plugin.xml</code> as a resource, I configured my <code>maven-shade-plugin</code> as follows:</p>\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.2.4&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;shade&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n            &lt;configuration&gt;\n                &lt;shadedArtifactAttached&gt;true&lt;/shadedArtifactAttached&gt;\n                &lt;finalName&gt;${project.artifactId}-shaded&lt;/finalName&gt;\n                &lt;filters&gt;\n                    &lt;filter&gt;\n                        &lt;artifact&gt;*:*&lt;/artifact&gt;\n                        &lt;excludes&gt;\n                            &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\n                            &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\n                            &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n                            &lt;exclude&gt;META-INF/DEPENDENCIES&lt;/exclude&gt;\n                            &lt;exclude&gt;META-INF/license/*&lt;/exclude&gt;\n                            &lt;exclude&gt;META-INF/LICENSE&lt;/exclude&gt;\n                            &lt;exclude&gt;META-INF/NOTICE&lt;/exclude&gt;\n                        &lt;/excludes&gt;\n                    &lt;/filter&gt;\n                &lt;/filters&gt;\n                &lt;transformers&gt;\n                    &lt;!--\n                    Metastore dependencies require below highly specific merging solutions:\n                    - https://github.com/apache/iceberg/issues/5946#issuecomment-1278674526\n                    - https://stackoverflow.com/a/10106373/1571826\n                    - https://stackoverflow.com/a/37511856/1571826\n                    --&gt;\n                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ServicesResourceTransformer&quot;/&gt;\n                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.DontIncludeResourceTransformer&quot;&gt;\n                        &lt;resource&gt;META-INF/MANIFEST&lt;/resource&gt;\n                    &lt;/transformer&gt;\n                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n                        &lt;manifestEntries&gt;\n                            &lt;Main-Class&gt;${mainClass}&lt;/Main-Class&gt;\n                            &lt;Premain-Class&gt;org.datanucleus.enhancer.DataNucleusClassFileTransformer&lt;/Premain-Class&gt;\n                            &lt;Bundle-SymbolicName&gt;org.datanucleus;singleton:=true&lt;/Bundle-SymbolicName&gt;\n                        &lt;/manifestEntries&gt;\n                    &lt;/transformer&gt;\n                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.DontIncludeResourceTransformer&quot;&gt;\n                        &lt;resource&gt;plugin.xml&lt;/resource&gt;\n                    &lt;/transformer&gt;\n                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.IncludeResourceTransformer&quot;&gt;\n                        &lt;resource&gt;plugin.xml&lt;/resource&gt;\n                        &lt;file&gt;src/main/resources/plugin.xml&lt;/file&gt;\n                    &lt;/transformer&gt;\n                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\n                        &lt;resource&gt;reference.conf&lt;/resource&gt;\n                    &lt;/transformer&gt;\n                &lt;/transformers&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n"}],"owner":{"account_id":988842,"reputation":389,"user_id":1006649,"accept_rate":50,"display_name":"Paul"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7973,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":10137234,"answer_count":5,"score":6,"last_activity_date":1671223763,"creation_date":1334093633,"question_id":10096772,"body_markdown":"I am developing a desktop app with Datanucleus and JDO for embedded H2 database. It all works fine when I run it from Eclipse, but it stops working when I try to make executable jar out of it. I get a following error:\r\n\r\n**org.datanucleus.exceptions.NucleusUserException: Persistence process has been specified to use a ClassLoaderResolver of name &quot;jdo&quot; yet this has not been found by the DataNucleus plugin mechanism. Please check your CLASSPATH and plugin specification.**\r\n\r\nOf course it shows that I have not configured something properly - what am I missing? If I was missing something big, it wouldn&#39;t work at all, so I am assuming it&#39;s a flawed executable jar. I have seen that error in other apps, like JPOX, where it was fixed, but without any solution given.\r\n\r\nWhole error stacktrace:\r\n\r\n    Exception in thread &quot;main&quot; javax.jdo.JDOFatalInternalException: Unexpected exception caught.\r\n            at javax.jdo.JDOHelper.invokeGetPersistenceManagerFactoryOnImplementation(JDOHelper.java:1193)\r\n            at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:808)\r\n            at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:701)\r\n            at db.PersistenceManagerFilter.init(PersistenceManagerFilter.java:44)\r\n            at Main.main(Main.java:26)\r\n    NestedThrowablesStackTrace:\r\n    java.lang.reflect.InvocationTargetException\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n            at java.lang.reflect.Method.invoke(Unknown Source)\r\n            at javax.jdo.JDOHelper$16.run(JDOHelper.java:1965)\r\n            at java.security.AccessController.doPrivileged(Native Method)\r\n            at javax.jdo.JDOHelper.invoke(JDOHelper.java:1960)\r\n            at javax.jdo.JDOHelper.invokeGetPersistenceManagerFactoryOnImplementation(JDOHelper.java:1166)\r\n            at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:808)\r\n            at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:701)\r\n            at db.PersistenceManagerFilter.init(PersistenceManagerFilter.java:44)\r\n            at Main.main(Main.java:26)\r\n    Caused by: org.datanucleus.exceptions.NucleusUserException: Persistence process has been specified to use a ClassLoaderResolver of name &quot;jdo&quot; yet this has not been found by the DataNucleus plugin mechanism. Please check your CLASSPATH and plugin specification.\r\n            at org.datanucleus.NucleusContext.&lt;init&gt;(NucleusContext.java:233)\r\n            at org.datanucleus.NucleusContext.&lt;init&gt;(NucleusContext.java:196)\r\n            at org.datanucleus.NucleusContext.&lt;init&gt;(NucleusContext.java:174)\r\n            at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.&lt;init&gt;(JDOPersistenceManagerFactory.java:364)\r\n            at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.createPersistenceManagerFactory(JDOPersistenceManagerFactory.java:294)\r\n            at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.getPersistenceManagerFactory(JDOPersistenceManagerFactory.java:195)\r\n            ... 12 more\r\n\r\n\r\nThe line it points to is PersistenceManagerFilter init method:\r\n\r\n    pmf = JDOHelper.getPersistenceManagerFactory(getProperties());\r\n\r\nProperties file looks like that:\r\n\r\n        javax.jdo.PersistenceManagerFactoryClass=org.datanucleus.api.jdo.JDOPersistenceManagerFactory\r\n    datanucleus.ConnectionDriverName=org.h2.Driver\r\n    datanucleus.ConnectionURL=jdbc:h2:datanucleus\r\n    datanucleus.ConnectionUserName=sa\r\n    datanucleus.ConnectionPassword=\r\n\r\nI have all dependencies from maven, with a goal to deploy with dependencies. Dependencies are as stated on datanucleus page http://www.datanucleus.org/products/datanucleus/jdo/maven.html\r\n\r\nAny ideas?","title":"Datanucleus, JDO and executable jar - how to do it?","body":"<p>I am developing a desktop app with Datanucleus and JDO for embedded H2 database. It all works fine when I run it from Eclipse, but it stops working when I try to make executable jar out of it. I get a following error:</p>\n\n<p><strong>org.datanucleus.exceptions.NucleusUserException: Persistence process has been specified to use a ClassLoaderResolver of name \"jdo\" yet this has not been found by the DataNucleus plugin mechanism. Please check your CLASSPATH and plugin specification.</strong></p>\n\n<p>Of course it shows that I have not configured something properly - what am I missing? If I was missing something big, it wouldn't work at all, so I am assuming it's a flawed executable jar. I have seen that error in other apps, like JPOX, where it was fixed, but without any solution given.</p>\n\n<p>Whole error stacktrace:</p>\n\n<pre><code>Exception in thread \"main\" javax.jdo.JDOFatalInternalException: Unexpected exception caught.\n        at javax.jdo.JDOHelper.invokeGetPersistenceManagerFactoryOnImplementation(JDOHelper.java:1193)\n        at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:808)\n        at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:701)\n        at db.PersistenceManagerFilter.init(PersistenceManagerFilter.java:44)\n        at Main.main(Main.java:26)\nNestedThrowablesStackTrace:\njava.lang.reflect.InvocationTargetException\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.lang.reflect.Method.invoke(Unknown Source)\n        at javax.jdo.JDOHelper$16.run(JDOHelper.java:1965)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at javax.jdo.JDOHelper.invoke(JDOHelper.java:1960)\n        at javax.jdo.JDOHelper.invokeGetPersistenceManagerFactoryOnImplementation(JDOHelper.java:1166)\n        at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:808)\n        at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:701)\n        at db.PersistenceManagerFilter.init(PersistenceManagerFilter.java:44)\n        at Main.main(Main.java:26)\nCaused by: org.datanucleus.exceptions.NucleusUserException: Persistence process has been specified to use a ClassLoaderResolver of name \"jdo\" yet this has not been found by the DataNucleus plugin mechanism. Please check your CLASSPATH and plugin specification.\n        at org.datanucleus.NucleusContext.&lt;init&gt;(NucleusContext.java:233)\n        at org.datanucleus.NucleusContext.&lt;init&gt;(NucleusContext.java:196)\n        at org.datanucleus.NucleusContext.&lt;init&gt;(NucleusContext.java:174)\n        at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.&lt;init&gt;(JDOPersistenceManagerFactory.java:364)\n        at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.createPersistenceManagerFactory(JDOPersistenceManagerFactory.java:294)\n        at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.getPersistenceManagerFactory(JDOPersistenceManagerFactory.java:195)\n        ... 12 more\n</code></pre>\n\n<p>The line it points to is PersistenceManagerFilter init method:</p>\n\n<pre><code>pmf = JDOHelper.getPersistenceManagerFactory(getProperties());\n</code></pre>\n\n<p>Properties file looks like that:</p>\n\n<pre><code>    javax.jdo.PersistenceManagerFactoryClass=org.datanucleus.api.jdo.JDOPersistenceManagerFactory\ndatanucleus.ConnectionDriverName=org.h2.Driver\ndatanucleus.ConnectionURL=jdbc:h2:datanucleus\ndatanucleus.ConnectionUserName=sa\ndatanucleus.ConnectionPassword=\n</code></pre>\n\n<p>I have all dependencies from maven, with a goal to deploy with dependencies. Dependencies are as stated on datanucleus page <a href=\"http://www.datanucleus.org/products/datanucleus/jdo/maven.html\" rel=\"noreferrer\">http://www.datanucleus.org/products/datanucleus/jdo/maven.html</a></p>\n\n<p>Any ideas?</p>\n"},{"tags":["java","sql","hibernate","parameters","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1542264842,"creation_date":1542264842,"answer_id":53313915,"question_id":53311646,"body_markdown":"The SQL statement specified by `@SQLInsert` gets the fields of your entity bound as parameters. \r\n\r\nYou have at least 4 attributes in your `VipCode` entity directly, and I suspect even more from the `BaseModel` class it inherits from. But your SQL statment expects only two parameters. \r\n\r\nTo fix the problem remove the superfluous attributes from the entity, add parameters for them to the query or mark them as `@Transient`.","title":"JPA using @SQLInsert throws Parameter index out of range","body":"<p>The SQL statement specified by <code>@SQLInsert</code> gets the fields of your entity bound as parameters. </p>\n\n<p>You have at least 4 attributes in your <code>VipCode</code> entity directly, and I suspect even more from the <code>BaseModel</code> class it inherits from. But your SQL statment expects only two parameters. </p>\n\n<p>To fix the problem remove the superfluous attributes from the entity, add parameters for them to the query or mark them as <code>@Transient</code>.</p>\n"}],"owner":{"account_id":13053686,"reputation":21,"user_id":9433203,"display_name":"林永福"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1217,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1671223360,"creation_date":1542249625,"question_id":53311646,"body_markdown":"    @Data\r\n    @MappedSuperclass\r\n    public class BaseModel implements Serializable {\r\n     private static final Long serialVersionUID = -1442801573244745790L;\r\n\r\n     @Id\r\n     @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n     private Long id;\r\n\r\n     @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)\r\n     @Convert(converter = LocalDateTimeConverter.class)\r\n     private LocalDateTime createAt = LocalDateTime.now();\r\n\r\n     @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)\r\n     @Convert(converter = LocalDateTimeConverter.class)\r\n     private LocalDateTime updateAt = LocalDateTime.now();\r\n    }\r\n\r\n\r\n    @Data\r\n    @Entity\r\n    @Table(name = &quot;tb_vip_code&quot;)\r\n    @SQLInsert(sql = &quot;insert ignore into tb_vip_code (code, duration) values (?, ?)&quot;)\r\n    public class VipCode extends BaseModel {\r\n    private static final Long serialVersionUID = -4697221755301869573L;\r\n\r\n    private String code;\r\n    private Integer duration;\r\n    private Integer status = 0;\r\n    private Long userId;\r\n\r\n    public VipCode() {}\r\n    }\r\n\r\n    @Test\r\n    public void addOne() throws Exception {\r\n        VipCode vipCode = new VipCode();\r\n        vipCode.setCode(&quot;123456&quot;);\r\n        vipCode.setDuration(1);\r\n        service.addOne(vipCode);\r\n    }\r\n\r\n    create table tb_vip_code\r\n    (\r\n\tid bigint auto_increment\r\n\t\tprimary key,\r\n\tcode varchar(20) not null,\r\n\tstatus int default &#39;0&#39; not null,\r\n\tuser_id bigint null,\r\n\tduration int not null,\r\n\tcreate_at datetime default CURRENT_TIMESTAMP not null,\r\n\tupdate_at timestamp default CURRENT_TIMESTAMP not null,\r\n\tconstraint tb_vip_code_code_uindex unique (code)\r\n    );\r\n\r\nAll code as above, I am trying to use a custom sql to save object, but it throws an exception: \r\n\r\n&gt; Caused by: java.sql.SQLException: Parameter index out of range (3 &gt; number of parameters, which is 2).\r\n\r\nI only have two parameters; why does it say it needed three?","title":"JPA using @SQLInsert throws Parameter index out of range","body":"<pre><code>@Data\n@MappedSuperclass\npublic class BaseModel implements Serializable {\n private static final Long serialVersionUID = -1442801573244745790L;\n\n @Id\n @GeneratedValue(strategy = GenerationType.IDENTITY)\n private Long id;\n\n @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)\n @Convert(converter = LocalDateTimeConverter.class)\n private LocalDateTime createAt = LocalDateTime.now();\n\n @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)\n @Convert(converter = LocalDateTimeConverter.class)\n private LocalDateTime updateAt = LocalDateTime.now();\n}\n\n\n@Data\n@Entity\n@Table(name = &quot;tb_vip_code&quot;)\n@SQLInsert(sql = &quot;insert ignore into tb_vip_code (code, duration) values (?, ?)&quot;)\npublic class VipCode extends BaseModel {\nprivate static final Long serialVersionUID = -4697221755301869573L;\n\nprivate String code;\nprivate Integer duration;\nprivate Integer status = 0;\nprivate Long userId;\n\npublic VipCode() {}\n}\n\n@Test\npublic void addOne() throws Exception {\n    VipCode vipCode = new VipCode();\n    vipCode.setCode(&quot;123456&quot;);\n    vipCode.setDuration(1);\n    service.addOne(vipCode);\n}\n\ncreate table tb_vip_code\n(\nid bigint auto_increment\n    primary key,\ncode varchar(20) not null,\nstatus int default '0' not null,\nuser_id bigint null,\nduration int not null,\ncreate_at datetime default CURRENT_TIMESTAMP not null,\nupdate_at timestamp default CURRENT_TIMESTAMP not null,\nconstraint tb_vip_code_code_uindex unique (code)\n);\n</code></pre>\n<p>All code as above, I am trying to use a custom sql to save object, but it throws an exception:</p>\n<blockquote>\n<p>Caused by: java.sql.SQLException: Parameter index out of range (3 &gt; number of parameters, which is 2).</p>\n</blockquote>\n<p>I only have two parameters; why does it say it needed three?</p>\n"},{"tags":["java","syntax","operators","increment"],"answers":[{"tags":[],"owner":{"account_id":27818,"reputation":39950,"user_id":73772,"accept_rate":80,"display_name":"Emil H"},"down_vote_count":1,"up_vote_count":339,"is_accepted":true,"score":338,"last_activity_date":1247000997,"creation_date":1247000997,"answer_id":1094894,"question_id":1094872,"body_markdown":"++x is called preincrement while x++ is called postincrement. \r\n\r\n    int x = 5, y = 5;\r\n\r\n    System.out.println(++x); // outputs 6\r\n    System.out.println(x); // outputs 6\r\n\r\n    System.out.println(y++); // outputs 5\r\n    System.out.println(y); // outputs 6\r\n\r\n","title":"Is there a difference between x++ and ++x in java?","body":"<p>++x is called preincrement while x++ is called postincrement. </p>\n\n<pre><code>int x = 5, y = 5;\n\nSystem.out.println(++x); // outputs 6\nSystem.out.println(x); // outputs 6\n\nSystem.out.println(y++); // outputs 5\nSystem.out.println(y); // outputs 6\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22607,"reputation":52813,"user_id":55925,"accept_rate":82,"display_name":"Johannes Weiss"},"down_vote_count":3,"up_vote_count":14,"is_accepted":false,"score":11,"last_activity_date":1247001013,"creation_date":1247001013,"answer_id":1094898,"question_id":1094872,"body_markdown":"Yes,\r\n\r\n    int x=5;\r\n    System.out.println(++x);\r\n\r\nwill print ``6`` and\r\n\r\n    int x=5;\r\n    System.out.println(x++);\r\n\r\nwill print ``5``.\r\n\r\n","title":"Is there a difference between x++ and ++x in java?","body":"<p>Yes,</p>\n\n<pre><code>int x=5;\nSystem.out.println(++x);\n</code></pre>\n\n<p>will print <code>6</code> and</p>\n\n<pre><code>int x=5;\nSystem.out.println(x++);\n</code></pre>\n\n<p>will print <code>5</code>.</p>\n"},{"tags":[],"owner":{"account_id":43142,"reputation":5707,"user_id":125946,"accept_rate":87,"display_name":"Victor"},"down_vote_count":0,"up_vote_count":76,"is_accepted":false,"score":76,"last_activity_date":1247001027,"creation_date":1247001027,"answer_id":1094901,"question_id":1094872,"body_markdown":"yes\r\n\r\n++x increments the value of x and then returns x&lt;br/&gt;\r\nx++ returns the value of x and then increments\r\n\r\nexample:\r\n\r\n    x=0;\r\n    a=++x;\r\n    b=x++;\r\n\r\nafter the code is run both a and b will be 1 but x will be 2.","title":"Is there a difference between x++ and ++x in java?","body":"<p>yes</p>\n\n<p>++x increments the value of x and then returns x<br/>\nx++ returns the value of x and then increments</p>\n\n<p>example:</p>\n\n<pre><code>x=0;\na=++x;\nb=x++;\n</code></pre>\n\n<p>after the code is run both a and b will be 1 but x will be 2.</p>\n"},{"tags":[],"owner":{"account_id":37107,"reputation":3528,"user_id":105993,"accept_rate":67,"display_name":"nojevive"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1247001063,"creation_date":1247001063,"answer_id":1094904,"question_id":1094872,"body_markdown":"Yes, using ++X, X+1 will be used in the expression. Using X++, X will be used in the expression and X will only be increased after the expression has been evaluated.\r\n\r\nSo if X = 9, using ++X, the value 10 will be used, else, the value 9.","title":"Is there a difference between x++ and ++x in java?","body":"<p>Yes, using ++X, X+1 will be used in the expression. Using X++, X will be used in the expression and X will only be increased after the expression has been evaluated.</p>\n\n<p>So if X = 9, using ++X, the value 10 will be used, else, the value 9.</p>\n"},{"tags":[],"owner":{"account_id":21226,"reputation":22405,"user_id":51428,"accept_rate":82,"display_name":"flq"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1247001078,"creation_date":1247001078,"answer_id":1094905,"question_id":1094872,"body_markdown":"If it&#39;s like many other languages you may want to have a simple try:\r\n\r\n    i = 0;\r\n    if (0 == i++) // if true, increment happened after equality check\r\n    if (2 == ++i) // if true, increment happened before equality check\r\n\r\nIf the above doesn&#39;t happen like that, they may be equivalent","title":"Is there a difference between x++ and ++x in java?","body":"<p>If it's like many other languages you may want to have a simple try:</p>\n\n<pre><code>i = 0;\nif (0 == i++) // if true, increment happened after equality check\nif (2 == ++i) // if true, increment happened before equality check\n</code></pre>\n\n<p>If the above doesn't happen like that, they may be equivalent</p>\n"},{"tags":[],"owner":{"account_id":30171,"reputation":40012,"user_id":82118,"accept_rate":72,"display_name":"Carl Manaster"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1247001161,"creation_date":1247001161,"answer_id":1094914,"question_id":1094872,"body_markdown":"Yes.\r\n\r\n\r\n    public class IncrementTest extends TestCase {\r\n    \t\r\n    \tpublic void testPreIncrement() throws Exception {\r\n    \t\tint i = 0;\r\n    \t\tint j = i++;\r\n    \t\tassertEquals(0, j);\r\n    \t\tassertEquals(1, i);\r\n    \t}\r\n    \t\r\n    \tpublic void testPostIncrement() throws Exception {\r\n    \t\tint i = 0;\r\n    \t\tint j = ++i;\r\n    \t\tassertEquals(1, j);\r\n    \t\tassertEquals(1, i);\r\n    \t}\r\n    }\r\n\r\n","title":"Is there a difference between x++ and ++x in java?","body":"<p>Yes.</p>\n\n<pre><code>public class IncrementTest extends TestCase {\n\n    public void testPreIncrement() throws Exception {\n        int i = 0;\n        int j = i++;\n        assertEquals(0, j);\n        assertEquals(1, i);\n    }\n\n    public void testPostIncrement() throws Exception {\n        int i = 0;\n        int j = ++i;\n        assertEquals(1, j);\n        assertEquals(1, i);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":42036,"reputation":14781,"user_id":122321,"display_name":"Lars Haugseth"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1247001164,"creation_date":1247001164,"answer_id":1094915,"question_id":1094872,"body_markdown":"Yes, the value returned is the value after and before the incrementation, respectively.\r\n\r\n    class Foo {\r\n        public static void main(String args[]) {\r\n    \t    int x = 1;\r\n    \t    int a = x++;\r\n    \t    System.out.println(&quot;a is now &quot; + a);\r\n    \t    x = 1;\r\n    \t    a = ++x;\r\n    \t    System.out.println(&quot;a is now &quot; + a);\r\n        }\r\n    }\r\n\r\n    $ java Foo\r\n    a is now 1\r\n    a is now 2\r\n\r\n","title":"Is there a difference between x++ and ++x in java?","body":"<p>Yes, the value returned is the value after and before the incrementation, respectively.</p>\n\n<pre><code>class Foo {\n    public static void main(String args[]) {\n        int x = 1;\n        int a = x++;\n        System.out.println(\"a is now \" + a);\n        x = 1;\n        a = ++x;\n        System.out.println(\"a is now \" + a);\n    }\n}\n\n$ java Foo\na is now 1\na is now 2\n</code></pre>\n"},{"tags":[],"owner":{"account_id":38490,"reputation":8552,"user_id":110478,"accept_rate":63,"display_name":"Pablojim"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1671223045,"creation_date":1247001181,"answer_id":1094916,"question_id":1094872,"body_markdown":"These are known as postfix and prefix operators. Both will add 1 to the variable but there is a difference in the result of the statement.\r\n\r\n    int x = 0;\r\n    int y = 0;\r\n    y = ++x;            // result: x=1, y=1\r\n\r\n    int x = 0;\r\n    int y = 0;\r\n    y = x++;            // result: x=1, y=0\r\n","title":"Is there a difference between x++ and ++x in java?","body":"<p>These are known as postfix and prefix operators. Both will add 1 to the variable but there is a difference in the result of the statement.</p>\n<pre><code>int x = 0;\nint y = 0;\ny = ++x;            // result: x=1, y=1\n\nint x = 0;\nint y = 0;\ny = x++;            // result: x=1, y=0\n</code></pre>\n"},{"tags":[],"owner":{"account_id":179989,"reputation":5011,"user_id":413020,"accept_rate":67,"display_name":"Alberto"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1345822964,"creation_date":1345818346,"answer_id":12111301,"question_id":1094872,"body_markdown":"I landed here from one of its recent [dup][1]&#39;s, and though this question is more than answered, I couldn&#39;t help decompiling the code and adding &quot;yet another answer&quot; :-)\r\n\r\nTo be accurate (and probably, a bit pedantic),\r\n\r\n    int y = 2;\r\n    y = y++;\r\n\r\nis compiled into:\r\n\r\n    int y = 2;\r\n    int tmp = y;\r\n    y = y+1;\r\n    y = tmp;\r\n\r\nIf you `javac` this `Y.java` class:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class Y {\r\n        public static void main(String []args) {\r\n            int y = 2;\r\n            y = y++;\r\n        }\r\n    }\r\n\r\nand `javap -c Y`, you get the following jvm code (I have allowed me to comment the main method with the help of the [Java Virtual Machine Specification][2]):\r\n\r\n    public class Y extends java.lang.Object{\r\n    public Y();\r\n      Code:\r\n       0:   aload_0\r\n       1:   invokespecial  #1; //Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V\r\n       4:   return\r\n    \r\n    public static void main(java.lang.String[]);\r\n      Code:\r\n       0:   iconst_2 // Push int constant `2` onto the operand stack. \r\n\r\n       1:   istore_1 // Pop the value on top of the operand stack (`2`) and set the\r\n                     // value of the local variable at index `1` (`y`) to this value.\r\n\r\n       2:   iload_1  // Push the value (`2`) of the local variable at index `1` (`y`)\r\n                     // onto the operand stack\r\n\r\n       3:   iinc  1, 1 // Sign-extend the constant value `1` to an int, and increment\r\n                       // by this amount the local variable at index `1` (`y`)\r\n\r\n       6:   istore_1 // Pop the value on top of the operand stack (`2`) and set the\r\n                     // value of the local variable at index `1` (`y`) to this value.\r\n       7:   return\r\n    \r\n    }\r\n\r\nThus, we finally have:\r\n\r\n    0,1: y=2\r\n    2: tmp=y\r\n    3: y=y+1\r\n    6: y=tmp\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/12033676/if-y-1-and-y-y-why-when-i-print-y-is-the-value-1 &quot;Recent duplicated question&quot;\r\n  [2]: http://docs.oracle.com/javase/specs/ &quot;Java Virtual Machine Specification&quot;","title":"Is there a difference between x++ and ++x in java?","body":"<p>I landed here from one of its recent <a href=\"https://stackoverflow.com/questions/12033676/if-y-1-and-y-y-why-when-i-print-y-is-the-value-1\" title=\"Recent duplicated question\">dup</a>'s, and though this question is more than answered, I couldn't help decompiling the code and adding \"yet another answer\" :-)</p>\n\n<p>To be accurate (and probably, a bit pedantic),</p>\n\n<pre><code>int y = 2;\ny = y++;\n</code></pre>\n\n<p>is compiled into:</p>\n\n<pre><code>int y = 2;\nint tmp = y;\ny = y+1;\ny = tmp;\n</code></pre>\n\n<p>If you <code>javac</code> this <code>Y.java</code> class:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class Y {\n    public static void main(String []args) {\n        int y = 2;\n        y = y++;\n    }\n}\n</code></pre>\n\n<p>and <code>javap -c Y</code>, you get the following jvm code (I have allowed me to comment the main method with the help of the <a href=\"http://docs.oracle.com/javase/specs/\" rel=\"nofollow noreferrer\" title=\"Java Virtual Machine Specification\">Java Virtual Machine Specification</a>):</p>\n\n<pre><code>public class Y extends java.lang.Object{\npublic Y();\n  Code:\n   0:   aload_0\n   1:   invokespecial  #1; //Method java/lang/Object.\"&lt;init&gt;\":()V\n   4:   return\n\npublic static void main(java.lang.String[]);\n  Code:\n   0:   iconst_2 // Push int constant `2` onto the operand stack. \n\n   1:   istore_1 // Pop the value on top of the operand stack (`2`) and set the\n                 // value of the local variable at index `1` (`y`) to this value.\n\n   2:   iload_1  // Push the value (`2`) of the local variable at index `1` (`y`)\n                 // onto the operand stack\n\n   3:   iinc  1, 1 // Sign-extend the constant value `1` to an int, and increment\n                   // by this amount the local variable at index `1` (`y`)\n\n   6:   istore_1 // Pop the value on top of the operand stack (`2`) and set the\n                 // value of the local variable at index `1` (`y`) to this value.\n   7:   return\n\n}\n</code></pre>\n\n<p>Thus, we finally have:</p>\n\n<pre><code>0,1: y=2\n2: tmp=y\n3: y=y+1\n6: y=tmp\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2663127,"reputation":21,"user_id":2302327,"display_name":"kasaquan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1392643807,"creation_date":1392643390,"answer_id":21830252,"question_id":1094872,"body_markdown":"OK, I landed here because I recently came across the same issue when checking the classic stack implementation. Just a reminder that this is used in the array based implementation of Stack, which is a bit faster than the linked-list one.\r\n\r\nCode below, check the push and pop func.\r\n\r\n    public class FixedCapacityStackOfStrings\r\n    {\r\n      private String[] s;\r\n      private int N=0;\r\n    \r\n      public FixedCapacityStackOfStrings(int capacity)\r\n      { s = new String[capacity];}\r\n    \r\n      public boolean isEmpty()\r\n      { return N == 0;}\r\n    \r\n      public void push(String item)\r\n      { s[N++] = item; }\r\n    \r\n      public String pop()\r\n      { \r\n        String item = s[--N];\r\n        s[N] = null;\r\n        return item;\r\n      }\r\n    }\r\n\r\n   ","title":"Is there a difference between x++ and ++x in java?","body":"<p>OK, I landed here because I recently came across the same issue when checking the classic stack implementation. Just a reminder that this is used in the array based implementation of Stack, which is a bit faster than the linked-list one.</p>\n\n<p>Code below, check the push and pop func.</p>\n\n<pre><code>public class FixedCapacityStackOfStrings\n{\n  private String[] s;\n  private int N=0;\n\n  public FixedCapacityStackOfStrings(int capacity)\n  { s = new String[capacity];}\n\n  public boolean isEmpty()\n  { return N == 0;}\n\n  public void push(String item)\n  { s[N++] = item; }\n\n  public String pop()\n  { \n    String item = s[--N];\n    s[N] = null;\n    return item;\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4394923,"reputation":550,"user_id":3582295,"display_name":"Rohit Goyal"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1403096676,"creation_date":1403096676,"answer_id":24286373,"question_id":1094872,"body_markdown":"Yes, there is a difference, incase of x++(postincrement), value of x will be used in the expression and x will be incremented by 1 after the expression has been evaluated, on the other hand ++x(preincrement), x+1 will be used in the expression. \r\nTake an example:\r\n\r\n    public static void main(String args[])\r\n    {\r\n    \tint i , j , k = 0;\r\n    \tj = k++; // Value of j is 0\r\n    \ti = ++j; // Value of i becomes 1\r\n    \tk = i++; // Value of k is 1\r\n    \tSystem.out.println(k);\t\r\n    }\r\n\r\n","title":"Is there a difference between x++ and ++x in java?","body":"<p>Yes, there is a difference, incase of x++(postincrement), value of x will be used in the expression and x will be incremented by 1 after the expression has been evaluated, on the other hand ++x(preincrement), x+1 will be used in the expression. \nTake an example:</p>\n\n<pre><code>public static void main(String args[])\n{\n    int i , j , k = 0;\n    j = k++; // Value of j is 0\n    i = ++j; // Value of i becomes 1\n    k = i++; // Value of k is 1\n    System.out.println(k);  \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6111236,"reputation":305,"user_id":4767497,"display_name":"Saif"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1429620132,"creation_date":1429618044,"answer_id":29771789,"question_id":1094872,"body_markdown":"The Question is already answered, but allow me to add from my side too. \r\n\r\nFirst of all **++** means increment by one and **--** means decrement by one.\r\n\r\nNow **x++** means Increment **x** after this line and **++x** means Increment **x** before this line.\r\n\r\n\r\nCheck this Example\r\n\r\n    class Example {\r\n    public static void main (String args[]) {\r\n          int x=17,a,b;\r\n          a=x++;\r\n          b=++x;\r\n          System.out.println(“x=” + x +“a=” +a);\r\n          System.out.println(“x=” + x + “b=” +b);\r\n          a = x--;\r\n          b = --x;\r\n          System.out.println(“x=” + x + “a=” +a);\r\n          System.out.println(“x=” + x + “b=” +b);\r\n          }\r\n    }\r\n\r\nIt will give the following output:\r\n\r\n    x=19 a=17\r\n    x=19 b=19\r\n    x=18 a=19\r\n    x=17 b=17","title":"Is there a difference between x++ and ++x in java?","body":"<p>The Question is already answered, but allow me to add from my side too. </p>\n\n<p>First of all <strong>++</strong> means increment by one and <strong>--</strong> means decrement by one.</p>\n\n<p>Now <strong>x++</strong> means Increment <strong>x</strong> after this line and <strong>++x</strong> means Increment <strong>x</strong> before this line.</p>\n\n<p>Check this Example</p>\n\n<pre><code>class Example {\npublic static void main (String args[]) {\n      int x=17,a,b;\n      a=x++;\n      b=++x;\n      System.out.println(“x=” + x +“a=” +a);\n      System.out.println(“x=” + x + “b=” +b);\n      a = x--;\n      b = --x;\n      System.out.println(“x=” + x + “a=” +a);\n      System.out.println(“x=” + x + “b=” +b);\n      }\n}\n</code></pre>\n\n<p>It will give the following output:</p>\n\n<pre><code>x=19 a=17\nx=19 b=19\nx=18 a=19\nx=17 b=17\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5830136,"reputation":457,"user_id":4594967,"accept_rate":57,"display_name":"takra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1431969713,"creation_date":1431969713,"answer_id":30309316,"question_id":1094872,"body_markdown":"With i++, it&#39;s called postincrement, and the value is used in whatever context then incremented; ++i is preincrement increments the value first and then uses it in context. \r\n\r\nIf you&#39;re not using it in any context, it doesn&#39;t matter what you use, but postincrement is used by convention. ","title":"Is there a difference between x++ and ++x in java?","body":"<p>With i++, it's called postincrement, and the value is used in whatever context then incremented; ++i is preincrement increments the value first and then uses it in context. </p>\n\n<p>If you're not using it in any context, it doesn't matter what you use, but postincrement is used by convention. </p>\n"},{"tags":[],"owner":{"account_id":8570859,"reputation":91,"user_id":6421825,"display_name":"Cornell"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1465006987,"creation_date":1465006987,"answer_id":37625734,"question_id":1094872,"body_markdown":"When considering what the computer actually does...\r\n\r\n++x: load x from memory, increment, use, store back to memory.\r\n\r\nx++: load x from memory, use, increment, store back to memory.\r\n\r\nConsider:\r\n    a = 0\r\n    x = f(a++)\r\n    y = f(++a)\r\n\r\nwhere function f(p) returns p + 1\r\n\r\nx will be 1 (or 2)\r\n\r\ny will be 2 (or 1)\r\n\r\nAnd therein lies the problem.  Did the author of the compiler pass the parameter after retrieval, after use, or after storage.\r\n\r\nGenerally, just use x = x + 1.  It&#39;s way simpler.\r\n","title":"Is there a difference between x++ and ++x in java?","body":"<p>When considering what the computer actually does...</p>\n\n<p>++x: load x from memory, increment, use, store back to memory.</p>\n\n<p>x++: load x from memory, use, increment, store back to memory.</p>\n\n<p>Consider:\n    a = 0\n    x = f(a++)\n    y = f(++a)</p>\n\n<p>where function f(p) returns p + 1</p>\n\n<p>x will be 1 (or 2)</p>\n\n<p>y will be 2 (or 1)</p>\n\n<p>And therein lies the problem.  Did the author of the compiler pass the parameter after retrieval, after use, or after storage.</p>\n\n<p>Generally, just use x = x + 1.  It's way simpler.</p>\n"},{"tags":[],"owner":{"account_id":1592127,"reputation":18171,"user_id":1475228,"accept_rate":84,"display_name":"Pritam Banerjee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1499046368,"creation_date":1499046368,"answer_id":44876732,"question_id":1094872,"body_markdown":"There is a huge difference. \r\n\r\nAs most of the answers have already pointed out the theory, I would like to point out an easy example:\r\n\r\n    int x = 1;\r\n    //would print 1 as first statement will x = x and then x will increase\r\n    int x = x++;\r\n    System.out.println(x);\r\n    \r\nNow let&#39;s see `++x`:\r\n    \r\n    int x = 1;\r\n    //would print 2 as first statement will increment x and then x will be stored\r\n    int x = ++x;\r\n    System.out.println(x);\r\n\r\n \r\n","title":"Is there a difference between x++ and ++x in java?","body":"<p>There is a huge difference. </p>\n\n<p>As most of the answers have already pointed out the theory, I would like to point out an easy example:</p>\n\n<pre><code>int x = 1;\n//would print 1 as first statement will x = x and then x will increase\nint x = x++;\nSystem.out.println(x);\n</code></pre>\n\n<p>Now let's see <code>++x</code>:</p>\n\n<pre><code>int x = 1;\n//would print 2 as first statement will increment x and then x will be stored\nint x = ++x;\nSystem.out.println(x);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11814784,"reputation":939,"user_id":8645290,"display_name":"Jeremy Levett"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1507584574,"creation_date":1506987809,"answer_id":46535200,"question_id":1094872,"body_markdown":"In Java **there is a difference** between **x++ and ++x**\r\n\r\n**++x is a prefix form:**\r\nIt increments the variables expression then uses the new value in the expression.\r\n\r\nFor example if used in code:\r\n\r\n    int x = 3;\r\n\r\n    int y = ++x;\r\n    //Using ++x in the above is a two step operation.\r\n    //The first operation is to increment x, so x = 1 + 3 = 4\r\n    //The second operation is y = x so y = 4\r\n   \r\n    System.out.println(y); //It will print out &#39;4&#39;\r\n    System.out.println(x); //It will print out &#39;4&#39;\r\n\r\n\r\n**x++ is a postfix form:**\r\nThe variables value is first used in the expression and then it is incremented after the operation.\r\n\r\nFor example if used in code:\r\n\r\n    int x = 3;\r\n\r\n    int y = x++;\r\n    //Using x++ in the above is a two step operation.\r\n    //The first operation is y = x so y = 3\r\n    //The second operation is to increment x, so x = 1 + 3 = 4\r\n\r\n    System.out.println(y); //It will print out &#39;3&#39;\r\n    System.out.println(x); //It will print out &#39;4&#39; \r\n\r\nHope this is clear. Running and playing with the above code should help your understanding.","title":"Is there a difference between x++ and ++x in java?","body":"<p>In Java <strong>there is a difference</strong> between <strong>x++ and ++x</strong></p>\n\n<p><strong>++x is a prefix form:</strong>\nIt increments the variables expression then uses the new value in the expression.</p>\n\n<p>For example if used in code:</p>\n\n<pre><code>int x = 3;\n\nint y = ++x;\n//Using ++x in the above is a two step operation.\n//The first operation is to increment x, so x = 1 + 3 = 4\n//The second operation is y = x so y = 4\n\nSystem.out.println(y); //It will print out '4'\nSystem.out.println(x); //It will print out '4'\n</code></pre>\n\n<p><strong>x++ is a postfix form:</strong>\nThe variables value is first used in the expression and then it is incremented after the operation.</p>\n\n<p>For example if used in code:</p>\n\n<pre><code>int x = 3;\n\nint y = x++;\n//Using x++ in the above is a two step operation.\n//The first operation is y = x so y = 3\n//The second operation is to increment x, so x = 1 + 3 = 4\n\nSystem.out.println(y); //It will print out '3'\nSystem.out.println(x); //It will print out '4' \n</code></pre>\n\n<p>Hope this is clear. Running and playing with the above code should help your understanding.</p>\n"},{"tags":[],"owner":{"account_id":24161630,"reputation":11,"user_id":18125074,"display_name":"brudermoren"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644193289,"creation_date":1644193289,"answer_id":71012284,"question_id":1094872,"body_markdown":"    public static void main(String[] args) {    \r\n\r\n    int a = 1;    \r\n    int b = a++; // this means b = whatever value a has but, I want to    \r\n    increment a by 1    \r\n\t\t\r\n    System.out.println(&quot;a is --&gt; &quot; + a);    //2    \r\n    System.out.println(&quot;b is --&gt; &quot; + b);    //1    \t\r\n    a = 1;    \r\n    b = ++a;  // this means b = a+1    \r\n\t\t\r\n    System.out.println(&quot;now a is still  --&gt; &quot; + a);    //2    \r\n    System.out.println(&quot;but b is --&gt; &quot; + b);           //2    \r\n\r\n    }    ","title":"Is there a difference between x++ and ++x in java?","body":"<pre><code>public static void main(String[] args) {    \n\nint a = 1;    \nint b = a++; // this means b = whatever value a has but, I want to    \nincrement a by 1    \n    \nSystem.out.println(&quot;a is --&gt; &quot; + a);    //2    \nSystem.out.println(&quot;b is --&gt; &quot; + b);    //1     \na = 1;    \nb = ++a;  // this means b = a+1    \n    \nSystem.out.println(&quot;now a is still  --&gt; &quot; + a);    //2    \nSystem.out.println(&quot;but b is --&gt; &quot; + b);           //2    \n\n}    \n</code></pre>\n"},{"tags":[],"owner":{"account_id":4066349,"reputation":116,"user_id":3673682,"display_name":"zguell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658574431,"creation_date":1658574431,"answer_id":73090200,"question_id":1094872,"body_markdown":"Try to look at it this way:\r\nfrom left to right do what you encounter first. If you see the x first, then that value is going to be used in evaluating the currently processing expression, if you see the increment (++) first, then add one to the current value of the variable and continue with the evaluation of the expression. Simple","title":"Is there a difference between x++ and ++x in java?","body":"<p>Try to look at it this way:\nfrom left to right do what you encounter first. If you see the x first, then that value is going to be used in evaluating the currently processing expression, if you see the increment (++) first, then add one to the current value of the variable and continue with the evaluation of the expression. Simple</p>\n"}],"owner":{"account_id":39205,"reputation":2779,"user_id":112957,"accept_rate":50,"display_name":"erickreutz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":309231,"favorite_count":0,"down_vote_count":2,"up_vote_count":142,"accepted_answer_id":1094894,"answer_count":18,"score":140,"last_activity_date":1671223045,"creation_date":1247000827,"question_id":1094872,"body_markdown":"Is there a difference between ++x and x++ in java?","title":"Is there a difference between x++ and ++x in java?","body":"<p>Is there a difference between ++x and x++ in java?</p>\n"},{"tags":["java","spring","grails","groovy","spring-session"],"owner":{"account_id":19807385,"reputation":126,"user_id":14507039,"display_name":"joe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671222794,"creation_date":1671222794,"question_id":74829509,"body_markdown":"Trying to integrate Spring Session into a grails app.  Successfully have gotten the sessions to persist on the back end and now I am looking at trying to manually expire sessions.\r\n\r\nThe problem is when I expire a session manually as shown below.  I am not logged out of the application.  Further more, when I interrogate the session object, it thinks that it is not expired.\r\n\r\nAm I doing something wrong?\r\n\r\n```\r\n// Gets my user\r\ndef user = ctx.springSecurityService.getPrincipal()\r\n\r\n// Gets my current session\r\nSpringSessionBackedSessionInformation session = ctx.sessionRegistry.getAllSessions(user, false)[0] \r\n\r\n// Expires my session (Can see change in database)\r\nsession.expireNow() \r\n\r\n// returns false.  When I look at the code for the method it is only checking if the session has \r\n// expired due to a timeout\r\nsession.session.isExpired()\r\n```\r\n\r\nI tried looking through the docs on Spring Session for Expiry and didn&#39;t see anything for JDBC specifically.  Thought I&#39;d post it to see if anyone out there is well versed in Spring Session.","title":"Spring Session JDBC not respecting Expired Attribute","body":"<p>Trying to integrate Spring Session into a grails app.  Successfully have gotten the sessions to persist on the back end and now I am looking at trying to manually expire sessions.</p>\n<p>The problem is when I expire a session manually as shown below.  I am not logged out of the application.  Further more, when I interrogate the session object, it thinks that it is not expired.</p>\n<p>Am I doing something wrong?</p>\n<pre><code>// Gets my user\ndef user = ctx.springSecurityService.getPrincipal()\n\n// Gets my current session\nSpringSessionBackedSessionInformation session = ctx.sessionRegistry.getAllSessions(user, false)[0] \n\n// Expires my session (Can see change in database)\nsession.expireNow() \n\n// returns false.  When I look at the code for the method it is only checking if the session has \n// expired due to a timeout\nsession.session.isExpired()\n</code></pre>\n<p>I tried looking through the docs on Spring Session for Expiry and didn't see anything for JDBC specifically.  Thought I'd post it to see if anyone out there is well versed in Spring Session.</p>\n"},{"tags":["java","amazon-web-services","spring-boot","terraform","amazon-ecs"],"comments":[{"owner":{"account_id":11380463,"reputation":14217,"user_id":8343484,"display_name":"Marko E"},"score":1,"creation_date":1671218223,"post_id":74828710,"comment_id":132059603,"body_markdown":"You can probably use `entryPoint` and/or `command` but I guess some details are lacking in your question.","body":"You can probably use <code>entryPoint</code> and/or <code>command</code> but I guess some details are lacking in your question."},{"owner":{"account_id":7501,"reputation":187942,"user_id":13070,"accept_rate":90,"display_name":"Mark B"},"score":0,"creation_date":1671222858,"post_id":74828710,"comment_id":132060870,"body_markdown":"According to the documentation here: https://docs.spring.io/spring-boot/docs/1.5.6.RELEASE/reference/html/boot-features-external-config.html what you have should work just fine.  You can also try using `SPRING_PROFILES_ACTIVE` as the environment variable name, instead of `spring.profiles.active` as mentioned in the documentation I linked.","body":"According to the documentation here: <a href=\"https://docs.spring.io/spring-boot/docs/1.5.6.RELEASE/reference/html/boot-features-external-config.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/1.5.6.RELEASE/reference/html&zwnj;&#8203;/&hellip;</a> what you have should work just fine.  You can also try using <code>SPRING_PROFILES_ACTIVE</code> as the environment variable name, instead of <code>spring.profiles.active</code> as mentioned in the documentation I linked."},{"owner":{"account_id":7501,"reputation":187942,"user_id":13070,"accept_rate":90,"display_name":"Mark B"},"score":0,"creation_date":1671225065,"post_id":74828710,"comment_id":132061393,"body_markdown":"Please note that if you are also setting VM arguments, using `-Dspring.profiles.active=&quot;test&quot;` via the `CMD` or `ENDPOINT` settings, then that is going to override the environment variable you are trying to set. Your question asks about setting VM arguments, but the code you show is setting environment variables.","body":"Please note that if you are also setting VM arguments, using <code>-Dspring.profiles.active=&quot;test&quot;</code> via the <code>CMD</code> or <code>ENDPOINT</code> settings, then that is going to override the environment variable you are trying to set. Your question asks about setting VM arguments, but the code you show is setting environment variables."},{"owner":{"account_id":23358723,"reputation":17,"user_id":17431300,"display_name":"Carry Flag"},"score":0,"creation_date":1671454085,"post_id":74828710,"comment_id":132095677,"body_markdown":"Setting CMD or ENDPOINT is just a testing. I tried using those two that you mentioned (spring.profiles.active and SPRING_PROFILES_ACTIVE). Both did not work :(","body":"Setting CMD or ENDPOINT is just a testing. I tried using those two that you mentioned (spring.profiles.active and SPRING_PROFILES_ACTIVE). Both did not work :("}],"owner":{"account_id":23358723,"reputation":17,"user_id":17431300,"display_name":"Carry Flag"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":440,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671222731,"creation_date":1671217081,"question_id":74828710,"body_markdown":"I have this application that depends on two types of profiles, when I pass a VM arguments as &quot;-Dspring.profiles.active=&quot;test&quot;&quot;, it loads some specific beans, and when I load the application with &quot;-Dspring.profiles.active=&quot;test2&quot;, it loads the application with other beans. I&#39;m loading a docker with this application&#39;s image inside an ECS using terraform. Here&#39;s the container definition:\r\n\r\n```\r\n  {\r\n    &quot;essential&quot;: true,\r\n    &quot;image&quot;: &quot;docker-image&quot;,\r\n    &quot;name&quot;: &quot;app&quot;,\r\n    &quot;environment&quot;: [\r\n      {\r\n        &quot;name&quot;: &quot;spring.profiles.active&quot;,\r\n        &quot;value&quot;: &quot;test1&quot;\r\n      },\r\n     ]&quot;\r\n}\r\n```\r\nI&#39;ve tried passing the spring profile inside the environent value, but without any success. Is there something I can do? Thanks!\r\n","title":"How to add VM arguments to ECS container definition in Terraform?","body":"<p>I have this application that depends on two types of profiles, when I pass a VM arguments as &quot;-Dspring.profiles.active=&quot;test&quot;&quot;, it loads some specific beans, and when I load the application with &quot;-Dspring.profiles.active=&quot;test2&quot;, it loads the application with other beans. I'm loading a docker with this application's image inside an ECS using terraform. Here's the container definition:</p>\n<pre><code>  {\n    &quot;essential&quot;: true,\n    &quot;image&quot;: &quot;docker-image&quot;,\n    &quot;name&quot;: &quot;app&quot;,\n    &quot;environment&quot;: [\n      {\n        &quot;name&quot;: &quot;spring.profiles.active&quot;,\n        &quot;value&quot;: &quot;test1&quot;\n      },\n     ]&quot;\n}\n</code></pre>\n<p>I've tried passing the spring profile inside the environent value, but without any success. Is there something I can do? Thanks!</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9191,"page":801,"page_size":100}
