{"items":[{"tags":["java","android","rest","google-oauth"],"answers":[{"tags":[],"owner":{"account_id":22021382,"reputation":44,"user_id":16290160,"display_name":"Ahmed Mostafa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665686285,"creation_date":1665686285,"answer_id":74060352,"question_id":74060167,"body_markdown":"hi Patrick i think you are missing https://developers.google.com/identity/sign-in/web/sign-in#specify_your_apps_client_id Client ID try to follow the  documentation ","title":"Google Photo - Download using REST API","body":"<p>hi Patrick i think you are missing <a href=\"https://developers.google.com/identity/sign-in/web/sign-in#specify_your_apps_client_id\" rel=\"nofollow noreferrer\">https://developers.google.com/identity/sign-in/web/sign-in#specify_your_apps_client_id</a> Client ID try to follow the  documentation</p>\n"}],"owner":{"account_id":26604588,"reputation":1,"user_id":20225685,"display_name":"Patrick Walter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665686285,"creation_date":1665685195,"question_id":74060167,"body_markdown":"Trying to just make the REST request using the web browser.\r\nUsing: https://photoslibrary.googleapis.com/v1/mediaItems:search?\r\n\r\nTried key=clientID\r\nTried access=clientID\r\netc...\r\n\r\nGet ERROR text with: &quot;Request is missing required authentication credential.&quot;\r\n\r\nWith my client ID fails. What&#39;s the syntax for this?\r\n\r\nTHANKS!!!","title":"Google Photo - Download using REST API","body":"<p>Trying to just make the REST request using the web browser.\nUsing: <a href=\"https://photoslibrary.googleapis.com/v1/mediaItems:search\" rel=\"nofollow noreferrer\">https://photoslibrary.googleapis.com/v1/mediaItems:search</a>?</p>\n<p>Tried key=clientID\nTried access=clientID\netc...</p>\n<p>Get ERROR text with: &quot;Request is missing required authentication credential.&quot;</p>\n<p>With my client ID fails. What's the syntax for this?</p>\n<p>THANKS!!!</p>\n"},{"tags":["java","android","android-contentprovider","android-videoview"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1665688100,"post_id":74060341,"comment_id":130763670,"body_markdown":"It should be a content scheme uri. Such an uri starts with content://. Yours starts with https:// protocol. It means that the error you get in your Android app (not in Android Studio) that the video player will not download the file. You have to download it first. Or take another player.","body":"It should be a content scheme uri. Such an uri starts with content://. Yours starts with https:// protocol. It means that the error you get in your Android app (not in Android Studio) that the video player will not download the file. You have to download it first. Or take another player."},{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1665689012,"post_id":74060341,"comment_id":130763913,"body_markdown":"@blackapps: `VideoView`, like `MediaPlayer`, works with `https` URLs. It is not limited to `content` `Uri` values.","body":"@blackapps: <code>VideoView</code>, like <code>MediaPlayer</code>, works with <code>https</code> URLs. It is not limited to <code>content</code> <code>Uri</code> values."},{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1665689061,"post_id":74060341,"comment_id":130763922,"body_markdown":"@Rakesh: Have you requested the `INTERNET` permission in your manifest?","body":"@Rakesh: Have you requested the <code>INTERNET</code> permission in your manifest?"},{"owner":{"account_id":20848695,"reputation":11,"user_id":15313703,"display_name":"Rakesh"},"score":0,"creation_date":1665764136,"post_id":74060341,"comment_id":130781890,"body_markdown":"Thanks for commenting, I have already provided INTERNET permission in Manifiest file.","body":"Thanks for commenting, I have already provided INTERNET permission in Manifiest file."}],"owner":{"account_id":20848695,"reputation":11,"user_id":15313703,"display_name":"Rakesh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665686219,"creation_date":1665686219,"question_id":74060341,"body_markdown":"I am learning android. I am recording short videos and uploading to aws server. After uploading I am getting the preSigned Url of video that is looking like follow:\r\n\r\n    https://bluetape-rakesh.s3.amazonaws.com/2/32042416717093rangeela.mp4-540x960_rang.mp4?AWSAccessKeyId=AK4VVEOWZPUIIRZ2&amp;Expires=1665775032&amp;Signature=gKwCXgY48%2BdY3ba9lVCe%2BhI%3D\r\n\r\nTo play the video in videoView in android , I am using following code in android .\r\n\r\n    Uri videoURI = Uri.parse(Video_url);\r\n    videoView.setVideoURI(videoURI);\r\n\r\nBut I am getting an error in android studio of:\r\n\r\n        java.io.FileNotFoundException: No content provider: https://bluetape-rakesh.s3.amazonaws.com/2/32042416717093rangeela.mp4-540x960_rang.mp4?AWSAccessKeyId=AKIARV4VVEOWZPUIIRZ2&amp;Expires=1665775032&amp;Signature=gKwCXgY48%2BdY3ba9kDA6lVCe%2BhI%3D\r\n\r\nWhat is wrong with me? Please help. How to solve this issue? Thanks in advance.","title":"No content provider for remote video in android?","body":"<p>I am learning android. I am recording short videos and uploading to aws server. After uploading I am getting the preSigned Url of video that is looking like follow:</p>\n<pre><code>https://bluetape-rakesh.s3.amazonaws.com/2/32042416717093rangeela.mp4-540x960_rang.mp4?AWSAccessKeyId=AK4VVEOWZPUIIRZ2&amp;Expires=1665775032&amp;Signature=gKwCXgY48%2BdY3ba9lVCe%2BhI%3D\n</code></pre>\n<p>To play the video in videoView in android , I am using following code in android .</p>\n<pre><code>Uri videoURI = Uri.parse(Video_url);\nvideoView.setVideoURI(videoURI);\n</code></pre>\n<p>But I am getting an error in android studio of:</p>\n<pre><code>    java.io.FileNotFoundException: No content provider: https://bluetape-rakesh.s3.amazonaws.com/2/32042416717093rangeela.mp4-540x960_rang.mp4?AWSAccessKeyId=AKIARV4VVEOWZPUIIRZ2&amp;Expires=1665775032&amp;Signature=gKwCXgY48%2BdY3ba9kDA6lVCe%2BhI%3D\n</code></pre>\n<p>What is wrong with me? Please help. How to solve this issue? Thanks in advance.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665685454,"post_id":74060163,"comment_id":130762989,"body_markdown":"afaicr you need a custom ```TableCellRenderer``` - i.e. you can&#39;t just drop in an ```ImageIcon``` and have it create a renderer automatically. And better to load your files/images as resources:\n[Netbeans](https://technojeeves.com/index.php/aliasjava1/78-loading-files-as-resources-in-java-with-netbeans)\n[Eclipse](https://technojeeves.com/index.php/aliasjava1/80-loading-files-as-resources-in-java-with-eclipse)","body":"afaicr you need a custom <code>TableCellRenderer</code> - i.e. you can&#39;t just drop in an <code>ImageIcon</code> and have it create a renderer automatically. And better to load your files/images as resources: <a href=\"https://technojeeves.com/index.php/aliasjava1/78-loading-files-as-resources-in-java-with-netbeans\" rel=\"nofollow noreferrer\">Netbeans</a> <a href=\"https://technojeeves.com/index.php/aliasjava1/80-loading-files-as-resources-in-java-with-eclipse\" rel=\"nofollow noreferrer\">Eclipse</a>"}],"owner":{"account_id":25824442,"reputation":23,"user_id":19562903,"display_name":"RidzInside"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1665685173,"creation_date":1665685173,"question_id":74060163,"body_markdown":"I need to have JTable\r\n&lt;Flag Image, Country, Capital, Population&gt;\r\nBut instead of flag image I got String\r\n\r\nsrc/zad1/data/flags/Flag_of_Australia.png Australia\tCanberra\t25130.0\r\n\r\nsrc/zad1/data/flags/Flag_of_Canada.png Canada Ottawa\t    37067.0\r\n\r\n    public class CountryTable {\r\n    String myFilePath;\r\n    public Object[][] rowData = new Object[10][];\r\n    public String[] columnNames = {&quot;Flag&quot;, &quot;Country&quot;, &quot;Capital&quot;, &quot;Population&quot;};\r\n\r\n    public CountryTable(String countriesFileName) {\r\n        readFile();\r\n        myFilePath = countriesFileName;\r\n    }\r\n\r\n    public JTable create() {\r\n        return new JTable(rowData, columnNames);\r\n    }\r\n\r\n    public void readFile() {\r\n        try {\r\n            File myObj = new File(&quot;src/zad1/data/countries.txt&quot;);\r\n            Scanner myReader = new Scanner(myObj);\r\n            int counter = -1;\r\n            while (myReader.hasNextLine()) {\r\n                String data = myReader.nextLine();\r\n                if (counter &gt; -1) {\r\n                    Object[] temp_str = data.split(&quot; &quot;);\r\n                    rowData[counter] = new Object[]\r\n                            {new ImageIcon(&quot;src/zad1/data/flags/Flag_of_Australia.png&quot;),\r\n                            temp_str[0], temp_str[1], Double.valueOf((String) temp_str[2])};\r\n                }\r\n                counter++;\r\n            }\r\n            myReader.close();\r\n        } catch (FileNotFoundException e) {\r\n            System.out.println(&quot;An error occurred.&quot;);\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n","title":"Got file path instead of ImageIcon JAVA","body":"<p>I need to have JTable\n&lt;Flag Image, Country, Capital, Population&gt;\nBut instead of flag image I got String</p>\n<p>src/zad1/data/flags/Flag_of_Australia.png Australia Canberra    25130.0</p>\n<p>src/zad1/data/flags/Flag_of_Canada.png Canada Ottawa        37067.0</p>\n<pre><code>public class CountryTable {\nString myFilePath;\npublic Object[][] rowData = new Object[10][];\npublic String[] columnNames = {&quot;Flag&quot;, &quot;Country&quot;, &quot;Capital&quot;, &quot;Population&quot;};\n\npublic CountryTable(String countriesFileName) {\n    readFile();\n    myFilePath = countriesFileName;\n}\n\npublic JTable create() {\n    return new JTable(rowData, columnNames);\n}\n\npublic void readFile() {\n    try {\n        File myObj = new File(&quot;src/zad1/data/countries.txt&quot;);\n        Scanner myReader = new Scanner(myObj);\n        int counter = -1;\n        while (myReader.hasNextLine()) {\n            String data = myReader.nextLine();\n            if (counter &gt; -1) {\n                Object[] temp_str = data.split(&quot; &quot;);\n                rowData[counter] = new Object[]\n                        {new ImageIcon(&quot;src/zad1/data/flags/Flag_of_Australia.png&quot;),\n                        temp_str[0], temp_str[1], Double.valueOf((String) temp_str[2])};\n            }\n            counter++;\n        }\n        myReader.close();\n    } catch (FileNotFoundException e) {\n        System.out.println(&quot;An error occurred.&quot;);\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","scala","switch-statement","gatling"],"answers":[{"tags":[],"owner":{"account_id":4945120,"reputation":143,"user_id":3980746,"display_name":"Philippe K"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1665684858,"creation_date":1665684858,"answer_id":74060107,"question_id":74059322,"body_markdown":"You need to create WithWeight array.\r\n```\r\n                    .randomSwitch().on(\r\n                            new Choice.WithWeight(50.0, exec(nextRequest)),\r\n                            new Choice.WithWeight(50.0, exec(anotherRequest))\r\n                    )\r\n```","title":"How to perform random switch in Gatling Java","body":"<p>You need to create WithWeight array.</p>\n<pre><code>                    .randomSwitch().on(\n                            new Choice.WithWeight(50.0, exec(nextRequest)),\n                            new Choice.WithWeight(50.0, exec(anotherRequest))\n                    )\n</code></pre>\n"}],"owner":{"account_id":21237877,"reputation":79,"user_id":15621824,"display_name":"Alexb1999"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":760,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74060107,"answer_count":1,"score":1,"last_activity_date":1665684858,"creation_date":1665680109,"question_id":74059322,"body_markdown":"Is it possible to perform a random switch to disperse load among requests, similarly to how it is done in Scala? I could not find any resources on how to do this in Java.\r\n\r\nExample code:\r\n\r\n```\r\n    public static final ChainBuilder teacherCreateAssignmentsSetup = group(&quot;teacherCreatesAssignmentsSetup&quot;).on(\r\n            exec(sessionSetSessionVariable)\r\n                    .exec(session -&gt; session.set(&quot;teacherRefId&quot;, getUniqueIdFromTokenSub(session)))\r\n                    .exec(createEdCtsAssignment)\r\n                    .exec(session -&gt; {\r\n                        log.info(&quot;assignment is :&quot; + session.getString(&quot;studentsAssignment&quot;));\r\n\r\n                        return session;\r\n                    })\r\n                    .randomSwitch(\r\n                            50.0 -&gt; exec(nextRequest),\r\n                            50.0 -&gt; exec(anotherRequest)\r\n                    )\r\n    );\r\n```","title":"How to perform random switch in Gatling Java","body":"<p>Is it possible to perform a random switch to disperse load among requests, similarly to how it is done in Scala? I could not find any resources on how to do this in Java.</p>\n<p>Example code:</p>\n<pre><code>    public static final ChainBuilder teacherCreateAssignmentsSetup = group(&quot;teacherCreatesAssignmentsSetup&quot;).on(\n            exec(sessionSetSessionVariable)\n                    .exec(session -&gt; session.set(&quot;teacherRefId&quot;, getUniqueIdFromTokenSub(session)))\n                    .exec(createEdCtsAssignment)\n                    .exec(session -&gt; {\n                        log.info(&quot;assignment is :&quot; + session.getString(&quot;studentsAssignment&quot;));\n\n                        return session;\n                    })\n                    .randomSwitch(\n                            50.0 -&gt; exec(nextRequest),\n                            50.0 -&gt; exec(anotherRequest)\n                    )\n    );\n</code></pre>\n"},{"tags":["java","junit","mocking","mockito"],"comments":[{"owner":{"account_id":2354874,"reputation":2955,"user_id":2062938,"display_name":"dnswlt"},"score":2,"creation_date":1518816318,"post_id":48835005,"comment_id":84674784,"body_markdown":"You cannot mock objects that are created by your object under test with `new`, since you have no control over those objects. You would have to make the `B` a field of class `A` and then inject it during your test. This is one of the reasons why people like dependency injection :)","body":"You cannot mock objects that are created by your object under test with <code>new</code>, since you have no control over those objects. You would have to make the <code>B</code> a field of class <code>A</code> and then inject it during your test. This is one of the reasons why people like dependency injection :)"},{"owner":{"account_id":2389551,"reputation":40481,"user_id":2089675,"accept_rate":80,"display_name":"smac89"},"score":0,"creation_date":1518816640,"post_id":48835005,"comment_id":84674945,"body_markdown":"One suggestion, you have a comment in your code that reads `// do something`. I will if this is a method call that takes B, to mock this method, or even better, use an ArugmentCaptor to capture the `B` passed to the method. This all hinges on what `// do something` actually does","body":"One suggestion, you have a comment in your code that reads <code>&#47;&#47; do something</code>. I will if this is a method call that takes B, to mock this method, or even better, use an ArugmentCaptor to capture the <code>B</code> passed to the method. This all hinges on what <code>&#47;&#47; do something</code> actually does"}],"answers":[{"tags":[],"owner":{"account_id":4837085,"reputation":1935,"user_id":3903366,"accept_rate":55,"display_name":"Bikas Katwal"},"comment_count":0,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1518816941,"creation_date":1518816941,"answer_id":48835196,"question_id":48835005,"body_markdown":"Because you are not injecting/using the mock object inside class A. In class A you are creating a new B object. So, mock object is never used. To fix this change your Class A implementation to below:\r\n\r\nB as member of class:\r\n\r\n    class A{\r\n      B b;\r\n    \r\n      public String getAName(String id){\r\n    \r\n        // do something\r\n        return b.getBName(id);\r\n      }\r\n    }\r\n\r\nthen in your test method inject the mock object to the B member inside class A. See below: \r\n\r\n    public void testA()(){\r\n        B mockB = mock(B.class);\r\n        Mockito.doReturn(&quot;Bar&quot;).when(mockB).getBName(id);\r\n        A a = new A();\r\n        a.b = mockB; //add this line to use mock in A\r\n        String testStr = a.getAName(id); //this still calls &quot;b.getBName(id)&quot; in class implementation\r\n        System.out.println(testStr);\r\n    \r\n    }\r\n\r\n ","title":"Mockito: Mock a method call inside another method","body":"<p>Because you are not injecting/using the mock object inside class A. In class A you are creating a new B object. So, mock object is never used. To fix this change your Class A implementation to below:</p>\n\n<p>B as member of class:</p>\n\n<pre><code>class A{\n  B b;\n\n  public String getAName(String id){\n\n    // do something\n    return b.getBName(id);\n  }\n}\n</code></pre>\n\n<p>then in your test method inject the mock object to the B member inside class A. See below: </p>\n\n<pre><code>public void testA()(){\n    B mockB = mock(B.class);\n    Mockito.doReturn(\"Bar\").when(mockB).getBName(id);\n    A a = new A();\n    a.b = mockB; //add this line to use mock in A\n    String testStr = a.getAName(id); //this still calls \"b.getBName(id)\" in class implementation\n    System.out.println(testStr);\n\n}\n</code></pre>\n"}],"owner":{"account_id":4377262,"reputation":1051,"user_id":3609252,"accept_rate":42,"display_name":"Mahyar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22708,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1665684098,"creation_date":1518815980,"question_id":48835005,"body_markdown":"So I&#39;m trying to mock a method call inside another method, here&#39;s the pseudo code\r\n\r\n    class A{\r\n\r\n\t    public String getAName(String id){\r\n\t\t    B b = new B();\r\n\t\t    // do something\r\n\t\t    return b.getBName(id);\r\n\t    }\r\n    }\r\n\r\n    testgetName{\r\n\r\n\t    public void testA(){\r\n\t\t\r\n\t\t    B mockB = mock(B.class);\t\t\r\n\t\t    Mockito.doReturn(&quot;Bar&quot;).when(mockB).getBName(id);\r\n\t\t\r\n\t\t    A a = new A();\r\n\t\t    a.getAName(id); //this still calls &quot;b.getBName(id)&quot; in class implementation\r\n\t    }\r\n\t\r\n    }\r\n\r\nThe problem here is `a.getAName` still calls  `b.getBName(id)` - not sure why?\r\n\r\n\r\nAny suggestions on how should I mock `b.getBName(id)` properly\r\n\r\nThanks","title":"Mockito: Mock a method call inside another method","body":"<p>So I'm trying to mock a method call inside another method, here's the pseudo code</p>\n\n<pre><code>class A{\n\n    public String getAName(String id){\n        B b = new B();\n        // do something\n        return b.getBName(id);\n    }\n}\n\ntestgetName{\n\n    public void testA(){\n\n        B mockB = mock(B.class);        \n        Mockito.doReturn(\"Bar\").when(mockB).getBName(id);\n\n        A a = new A();\n        a.getAName(id); //this still calls \"b.getBName(id)\" in class implementation\n    }\n\n}\n</code></pre>\n\n<p>The problem here is <code>a.getAName</code> still calls  <code>b.getBName(id)</code> - not sure why?</p>\n\n<p>Any suggestions on how should I mock <code>b.getBName(id)</code> properly</p>\n\n<p>Thanks</p>\n"},{"tags":["java","maven","cxf","java-11"],"comments":[{"owner":{"account_id":5417693,"reputation":1799,"user_id":4312388,"accept_rate":79,"display_name":"Yayotr&#243;n"},"score":1,"creation_date":1627888212,"post_id":68617476,"comment_id":121266457,"body_markdown":"Have you tried using &lt;exclude&gt;javaxb-api&lt;/exclude&gt; from camel-cxf dependency?","body":"Have you tried using &lt;exclude&gt;javaxb-api&lt;/exclude&gt; from camel-cxf dependency?"},{"owner":{"account_id":6383695,"reputation":5206,"user_id":4952262,"accept_rate":71,"display_name":"Michu93"},"score":0,"creation_date":1627891993,"post_id":68617476,"comment_id":121267675,"body_markdown":"You mean exclude &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;? I haven&#39;t, let me try.\n\n\n@Edit unfortunatelly, it didn&#39;t help - I excluded `&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;                  &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;` from `camel-cxf` but still see the same error ;/","body":"You mean exclude &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;&lt;artifactId&gt;jaxb-api&lt;/artif&zwnj;&#8203;actId&gt;? I haven&#39;t, let me try.   @Edit unfortunatelly, it didn&#39;t help - I excluded <code>&lt;groupId&gt;javax.xml.bind&lt;&#47;groupId&gt;                  &lt;artifactId&gt;jaxb-api&lt;&#47;artifactId&gt;</code> from <code>camel-cxf</code> but still see the same error ;/"}],"answers":[{"tags":[],"owner":{"account_id":6878158,"reputation":1996,"user_id":5285894,"accept_rate":62,"display_name":"Arar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665684046,"creation_date":1665684046,"answer_id":74059977,"question_id":68617476,"body_markdown":"Adding these dependencies fixed the issue for me:\r\n\r\n    implementation group: &#39;com.sun.xml.ws&#39;, name: &#39;jaxws-ri&#39;, version: &#39;4.0.0&#39;, ext: &#39;pom&#39;\r\n        implementation group: &#39;com.sun.xml.bind&#39;, name: &#39;jaxb-core&#39;, version: &#39;4.0.1&#39;\r\n        implementation group: &#39;javax.xml.bind&#39;, name: &#39;jaxb-api&#39;, version: &#39;2.4.0-b180830.0359&#39;\r\n        implementation group: &#39;com.sun.xml.bind&#39;, name: &#39;jaxb-impl&#39;, version: &#39;4.0.1&#39;\r\n        implementation group: &#39;org.glassfish.main.javaee-api&#39;, name: &#39;javax.jws&#39;, version: &#39;3.1.2.2&#39;","title":"Java 11: java.lang.NoClassDefFoundError: javax/jws/WebService","body":"<p>Adding these dependencies fixed the issue for me:</p>\n<pre><code>implementation group: 'com.sun.xml.ws', name: 'jaxws-ri', version: '4.0.0', ext: 'pom'\n    implementation group: 'com.sun.xml.bind', name: 'jaxb-core', version: '4.0.1'\n    implementation group: 'javax.xml.bind', name: 'jaxb-api', version: '2.4.0-b180830.0359'\n    implementation group: 'com.sun.xml.bind', name: 'jaxb-impl', version: '4.0.1'\n    implementation group: 'org.glassfish.main.javaee-api', name: 'javax.jws', version: '3.1.2.2'\n</code></pre>\n"}],"owner":{"account_id":6383695,"reputation":5206,"user_id":4952262,"accept_rate":71,"display_name":"Michu93"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1242,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1665684046,"creation_date":1627887188,"question_id":68617476,"body_markdown":"First of all, I found [similar question][1] but there are not so many information - pom.xml is missing, so the root cause could be different.\r\n\r\nIn pom.xml I have:\r\n\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\r\n                &lt;artifactId&gt;camel-core&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\r\n                &lt;artifactId&gt;camel-cxf&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\r\n                &lt;artifactId&gt;camel-metrics&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.sun.activation&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javax.activation&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.activation&lt;/groupId&gt;\r\n                &lt;artifactId&gt;activation&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n                &lt;version&gt;2.3.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n                &lt;version&gt;2.3.4&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jaxws-rt&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.xml.ws&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jaxws-api&lt;/artifactId&gt;\r\n                &lt;version&gt;2.3.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.jws&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javax.jws-api&lt;/artifactId&gt;\r\n                &lt;version&gt;1.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n\r\nVersions which are missing here are defined in parent pom.\r\n\r\nError which I get is:\r\n\r\n    TOMCAT 2021-08-01 19:03:37,603 [main] ERROR org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/provisioning/webservice/lbx]- Exception sending context initialized event to listener instance of class [org.springframework.web.context.ContextLoaderListener]\r\n    java.lang.NoClassDefFoundError: javax/jws/WebService\r\n    \tat org.apache.camel.component.cxf.CxfEndpointUtils.hasWebServiceAnnotation(CxfEndpointUtils.java:84) ~[camel-cxf-3.0.1.jar:3.0.1]\r\n    Caused by: java.lang.ClassNotFoundException: javax.jws.WebService\r\n\r\nI also tried with `&lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;` and \r\n\r\n    &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n\r\n and \r\n\r\n    &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\r\n\r\nbut without success.\r\n\r\n  [1]: https://stackoverflow.com/questions/53727322/migration-from-jdk-8-to-jdk-11-cxf-generated-sources-unknown-imports\r\n","title":"Java 11: java.lang.NoClassDefFoundError: javax/jws/WebService","body":"<p>First of all, I found <a href=\"https://stackoverflow.com/questions/53727322/migration-from-jdk-8-to-jdk-11-cxf-generated-sources-unknown-imports\">similar question</a> but there are not so many information - pom.xml is missing, so the root cause could be different.</p>\n<p>In pom.xml I have:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-cxf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-metrics&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.activation&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.activation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.activation&lt;/groupId&gt;\n            &lt;artifactId&gt;activation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n            &lt;version&gt;2.3.4&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxws-rt&lt;/artifactId&gt;\n            &lt;version&gt;3.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.ws&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxws-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.jws&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.jws-api&lt;/artifactId&gt;\n            &lt;version&gt;1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>Versions which are missing here are defined in parent pom.</p>\n<p>Error which I get is:</p>\n<pre><code>TOMCAT 2021-08-01 19:03:37,603 [main] ERROR org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/provisioning/webservice/lbx]- Exception sending context initialized event to listener instance of class [org.springframework.web.context.ContextLoaderListener]\njava.lang.NoClassDefFoundError: javax/jws/WebService\n    at org.apache.camel.component.cxf.CxfEndpointUtils.hasWebServiceAnnotation(CxfEndpointUtils.java:84) ~[camel-cxf-3.0.1.jar:3.0.1]\nCaused by: java.lang.ClassNotFoundException: javax.jws.WebService\n</code></pre>\n<p>I also tried with <code>&lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;</code> and</p>\n<pre><code>&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n</code></pre>\n<p>and</p>\n<pre><code>&lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n&lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\n</code></pre>\n<p>but without success.</p>\n"},{"tags":["java","option-type"],"comments":[{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":0,"creation_date":1665524347,"post_id":74034246,"comment_id":130720166,"body_markdown":"You can essentially do that by having optionals of tuples and then map from them to other tuples or entire lists of previous objects.","body":"You can essentially do that by having optionals of tuples and then map from them to other tuples or entire lists of previous objects."},{"owner":{"account_id":366370,"reputation":2002,"user_id":711855,"display_name":"juanmf"},"score":0,"creation_date":1665525499,"post_id":74034246,"comment_id":130720417,"body_markdown":"@zapl I thought of parameterBags but don’t feel it improves readability","body":"@zapl I thought of parameterBags but don’t feel it improves readability"},{"owner":{"account_id":173621,"reputation":10596,"user_id":402428,"display_name":"michid"},"score":2,"creation_date":1665648800,"post_id":74034246,"comment_id":130750514,"body_markdown":"You just discovered the Monad: use `flatMap` as one answer already suggests.","body":"You just discovered the Monad: use <code>flatMap</code> as one answer already suggests."}],"answers":[{"tags":[],"owner":{"account_id":3206885,"reputation":44070,"user_id":2707792,"accept_rate":100,"display_name":"Andrey Tyukin"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1665683857,"creation_date":1665526661,"answer_id":74034638,"question_id":74034246,"body_markdown":"It&#39;s just the `flatMap` method. It can be used for sequencing multiple operations that return `Optional`s, and it allows you to bind intermediate results to variables. In your case, it would be something like\r\n\r\n```java\r\nOptional.ofNullable(nullableA)\r\n  .flatMap(a -&gt; calculateB(a)\r\n    .flatMap(b -&gt; calculateC(a, b)\r\n      .flatMap(c -&gt; calculateD(a, c)\r\n        .flatMap(d -&gt; calculateE(a, d)))))\r\n  .orElse(null)\r\n```\r\nNote that not only `a`, but indeed _all_ intermediate results become available in the later calculation steps. In an extreme case, it could look somewhat like this:\r\n```java\r\nOptional.ofNullable(nullableA)\r\n  .flatMap(a -&gt; calculateB(a)\r\n    .flatMap(b -&gt; calculateC(a, b)\r\n      .flatMap(c -&gt; calculateD(a, b, c)\r\n        .flatMap(d -&gt; calculateE(a, b, c, d)))))\r\n  .orElse(null)\r\n```\r\ni.e. every step could depend on the intermediate results from all previous steps.\r\n\r\nAfaik, as of 2022, there is no special syntax for it in Java. The standard solution for avoiding the increasing indentation ([popularized in Haskell][2]) is some kind of `do`/[`for-yield`-syntax][3], e.g. in Scala, that could be written vertically, and would resemble usual imperative syntax:\r\n\r\n```scala\r\nfor\r\n  a &lt;- ofNullable(aNullable)\r\n  b &lt;- calculateB(a)\r\n  c &lt;- calculateC(a, b)\r\n  d &lt;- calculateD(a, c)\r\n  e &lt;- calculateE(a, d)\r\nyield e\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/8559537/where-does-the-flatmap-that-s-idiomatic-expression-in-scala-come-from\r\n  [2]: https://en.wikibooks.org/wiki/Haskell/do_notation\r\n  [3]: https://docs.scala-lang.org/scala3/book/fp-functional-error-handling.html#using-a-for-expression","title":"Java 8 Optional extension to carry parameters as map evolves","body":"<p>It's just the <code>flatMap</code> method. It can be used for sequencing multiple operations that return <code>Optional</code>s, and it allows you to bind intermediate results to variables. In your case, it would be something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>Optional.ofNullable(nullableA)\n  .flatMap(a -&gt; calculateB(a)\n    .flatMap(b -&gt; calculateC(a, b)\n      .flatMap(c -&gt; calculateD(a, c)\n        .flatMap(d -&gt; calculateE(a, d)))))\n  .orElse(null)\n</code></pre>\n<p>Note that not only <code>a</code>, but indeed <em>all</em> intermediate results become available in the later calculation steps. In an extreme case, it could look somewhat like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Optional.ofNullable(nullableA)\n  .flatMap(a -&gt; calculateB(a)\n    .flatMap(b -&gt; calculateC(a, b)\n      .flatMap(c -&gt; calculateD(a, b, c)\n        .flatMap(d -&gt; calculateE(a, b, c, d)))))\n  .orElse(null)\n</code></pre>\n<p>i.e. every step could depend on the intermediate results from all previous steps.</p>\n<p>Afaik, as of 2022, there is no special syntax for it in Java. The standard solution for avoiding the increasing indentation (<a href=\"https://en.wikibooks.org/wiki/Haskell/do_notation\" rel=\"nofollow noreferrer\">popularized in Haskell</a>) is some kind of <code>do</code>/<a href=\"https://docs.scala-lang.org/scala3/book/fp-functional-error-handling.html#using-a-for-expression\" rel=\"nofollow noreferrer\"><code>for-yield</code>-syntax</a>, e.g. in Scala, that could be written vertically, and would resemble usual imperative syntax:</p>\n<pre class=\"lang-scala prettyprint-override\"><code>for\n  a &lt;- ofNullable(aNullable)\n  b &lt;- calculateB(a)\n  c &lt;- calculateC(a, b)\n  d &lt;- calculateD(a, c)\n  e &lt;- calculateE(a, d)\nyield e\n</code></pre>\n"}],"owner":{"account_id":366370,"reputation":2002,"user_id":711855,"display_name":"juanmf"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":247,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1665683857,"creation_date":1665523263,"question_id":74034246,"body_markdown":"Been presented several situations where it&#39;d have been cool to have Optional keeping references to previously mapped objects. \r\n\r\n```java\r\n    // Normally the following is a good candidate for Optional fluent API (imagine also all the null checks that could be necessary)\r\n\r\n    A a = new A();\r\n    B b = calculateB(a);\r\n    C c = calculateC(b)\r\n    D d = calculateD(c)\r\n    E e = calculateE(d)\r\n\r\n    // As \r\n    E e = Optional.ofNullable(a)\r\n            .map(this::calculateB)\r\n    ...\r\n    \r\n    // But the following can&#39;t be expressed with Optional API\r\n        A a = new A();\r\n    B b = calculateB(a);\r\n    C c = calculateC(a, b)\r\n    D d = calculateD(a, c)\r\n    E e = calculateE(a, d)\r\n\r\n    // Something like the following sounds tempting\r\n    PowerOptional.ofNullable(a)\r\n            .mapAndKeep(this::calculateB) // mapAndKeep would carry the input as well to next call.\r\n            .map((a, b) -&gt; calculateC(a, b))\r\n            .map((a, c) -&gt; calculateD(a, c))\r\n            .map((a, d) -&gt; calculateE(a, d))\r\n            .orElse(null);\r\n    \r\n```\r\nThis could improve readability of rather cumbersome methods. \r\nIs there a library that addresses this?\r\nIdeas (also on naming)?\r\n","title":"Java 8 Optional extension to carry parameters as map evolves","body":"<p>Been presented several situations where it'd have been cool to have Optional keeping references to previously mapped objects.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    // Normally the following is a good candidate for Optional fluent API (imagine also all the null checks that could be necessary)\n\n    A a = new A();\n    B b = calculateB(a);\n    C c = calculateC(b)\n    D d = calculateD(c)\n    E e = calculateE(d)\n\n    // As \n    E e = Optional.ofNullable(a)\n            .map(this::calculateB)\n    ...\n    \n    // But the following can't be expressed with Optional API\n        A a = new A();\n    B b = calculateB(a);\n    C c = calculateC(a, b)\n    D d = calculateD(a, c)\n    E e = calculateE(a, d)\n\n    // Something like the following sounds tempting\n    PowerOptional.ofNullable(a)\n            .mapAndKeep(this::calculateB) // mapAndKeep would carry the input as well to next call.\n            .map((a, b) -&gt; calculateC(a, b))\n            .map((a, c) -&gt; calculateD(a, c))\n            .map((a, d) -&gt; calculateE(a, d))\n            .orElse(null);\n    \n</code></pre>\n<p>This could improve readability of rather cumbersome methods.\nIs there a library that addresses this?\nIdeas (also on naming)?</p>\n"},{"tags":["java","date","leap-year"],"comments":[{"owner":{"account_id":7745,"reputation":189765,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"score":0,"creation_date":1239657390,"post_id":745443,"comment_id":556928,"body_markdown":"The over/under on the number of answers suggesting Joda Time is 3.5. I&#39;ll take the over.","body":"The over/under on the number of answers suggesting Joda Time is 3.5. I&#39;ll take the over."},{"owner":{"account_id":12041,"reputation":21834,"user_id":23512,"accept_rate":56,"display_name":"Tanktalus"},"score":4,"creation_date":1239657410,"post_id":745443,"comment_id":556929,"body_markdown":"sleep(-86400); Date.getDate() ?  :-)","body":"sleep(-86400); Date.getDate() ?  :-)"},{"owner":{"account_id":1762,"reputation":31842,"user_id":2405,"accept_rate":100,"display_name":"William Brendel"},"score":0,"creation_date":1239657574,"post_id":745443,"comment_id":556941,"body_markdown":"@mmyers: I had looked at Joda Time, but I thought surely Java&#39;s library could handle this simple task on its own. Maybe not...","body":"@mmyers: I had looked at Joda Time, but I thought surely Java&#39;s library could handle this simple task on its own. Maybe not..."},{"owner":{"account_id":7745,"reputation":189765,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"score":0,"creation_date":1239657708,"post_id":745443,"comment_id":556953,"body_markdown":"@William Brendel: Usually, that doesn&#39;t make a difference. Looks like I&#39;m losing my bet this time though.","body":"@William Brendel: Usually, that doesn&#39;t make a difference. Looks like I&#39;m losing my bet this time though."}],"answers":[{"comments":[{"owner":{"account_id":27533,"reputation":3767,"user_id":72788,"display_name":"LoKi"},"score":1,"creation_date":1383835370,"post_id":745451,"comment_id":29501002,"body_markdown":"Btw, `Calendar.getInstance()` would probably be a bit more generic way to achieve the instance of Calendar.","body":"Btw, <code>Calendar.getInstance()</code> would probably be a bit more generic way to achieve the instance of Calendar."}],"tags":[],"owner":{"account_id":8977,"reputation":18862,"user_id":16404,"accept_rate":95,"display_name":"Mike Pone"},"comment_count":1,"down_vote_count":0,"up_vote_count":47,"is_accepted":true,"score":47,"last_activity_date":1383872502,"creation_date":1239657485,"answer_id":745451,"question_id":745443,"body_markdown":"Use the Calendar interface.\r\n\r\n    Calendar cal = Calendar.getInstance();\r\n    cal.setTime(myDate);\r\n    cal.add(Calendar.DAY_OF_YEAR,-1);\r\n    Date oneDayBefore= cal.getTime();\r\n\r\nDoing &quot;addition&quot; in this way guarantees you get a valid date.  This is valid for 1st of the year as well, e.g. if `myDate` is January 1st, 2012, `oneDayBefore` will be December 31st, 2011.","title":"How to determine the date one day prior to a given date in Java?","body":"<p>Use the Calendar interface.</p>\n\n<pre><code>Calendar cal = Calendar.getInstance();\ncal.setTime(myDate);\ncal.add(Calendar.DAY_OF_YEAR,-1);\nDate oneDayBefore= cal.getTime();\n</code></pre>\n\n<p>Doing \"addition\" in this way guarantees you get a valid date.  This is valid for 1st of the year as well, e.g. if <code>myDate</code> is January 1st, 2012, <code>oneDayBefore</code> will be December 31st, 2011.</p>\n"},{"tags":[],"owner":{"account_id":32380,"reputation":134957,"user_id":89806,"accept_rate":58,"display_name":"moinudin"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1239657689,"creation_date":1239657689,"answer_id":745465,"question_id":745443,"body_markdown":"The java.util.Calendar class allows us to add or subtract any number of day/weeks/months/whatever from a date. Just use the add() method:\r\n\r\nhttp://java.sun.com/j2se/1.5.0/docs/api/java/util/Calendar.html\r\n\r\nExample:\r\n\r\n    Calendar date = new GregorianCalendar(2009, 3, 1);\r\n    date.add(Calendar.DATE, -1);","title":"How to determine the date one day prior to a given date in Java?","body":"<p>The java.util.Calendar class allows us to add or subtract any number of day/weeks/months/whatever from a date. Just use the add() method:</p>\n\n<p><a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/Calendar.html\" rel=\"nofollow noreferrer\">http://java.sun.com/j2se/1.5.0/docs/api/java/util/Calendar.html</a></p>\n\n<p>Example:</p>\n\n<pre><code>Calendar date = new GregorianCalendar(2009, 3, 1);\ndate.add(Calendar.DATE, -1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":32516,"reputation":11064,"user_id":90313,"display_name":"MahdeTo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1239658310,"creation_date":1239657712,"answer_id":745467,"question_id":745443,"body_markdown":"    import java.util.Calendar;\r\n    import java.util.GregorianCalendar;\r\n    import static java.util.Calendar.*;\r\n    \r\n    \r\n    public class TestDayBefore {\r\n    \t\r\n    \tpublic static void main(String... args) {\r\n    \t\tCalendar calendar = GregorianCalendar.getInstance();\r\n    \t\tcalendar.set(YEAR, 2009);\r\n    \t\tcalendar.set(MONTH, MARCH);\r\n    \t\tcalendar.set(DAY_OF_MONTH, 1);\r\n    \t\tSystem.out.println(calendar.getTime()); //prints Sun Mar 01 23:20:20 EET 2009\r\n    \t\tcalendar.add(DAY_OF_MONTH, -1);\r\n    \t\tSystem.out.println(calendar.getTime()); //prints Sat Feb 28 23:21:01 EET 2009\r\n    \t\t\r\n    \t}\r\n    }\r\n\r\n","title":"How to determine the date one day prior to a given date in Java?","body":"<pre><code>import java.util.Calendar;\nimport java.util.GregorianCalendar;\nimport static java.util.Calendar.*;\n\n\npublic class TestDayBefore {\n\n    public static void main(String... args) {\n        Calendar calendar = GregorianCalendar.getInstance();\n        calendar.set(YEAR, 2009);\n        calendar.set(MONTH, MARCH);\n        calendar.set(DAY_OF_MONTH, 1);\n        System.out.println(calendar.getTime()); //prints Sun Mar 01 23:20:20 EET 2009\n        calendar.add(DAY_OF_MONTH, -1);\n        System.out.println(calendar.getTime()); //prints Sat Feb 28 23:21:01 EET 2009\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5866,"reputation":6843,"user_id":9641,"accept_rate":25,"display_name":"Vladimir"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1239658221,"creation_date":1239658221,"answer_id":745487,"question_id":745443,"body_markdown":"You can also use [Joda-Time][1], a very good Java library to manipulate dates:\r\n\r\n    DateTime result = dt.minusDays(1);\r\n\r\n  [1]: http://joda-time.sourceforge.net","title":"How to determine the date one day prior to a given date in Java?","body":"<p>You can also use <a href=\"http://joda-time.sourceforge.net\" rel=\"noreferrer\">Joda-Time</a>, a very good Java library to manipulate dates:</p>\n\n<pre><code>DateTime result = dt.minusDays(1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":52561,"reputation":1633,"user_id":157080,"accept_rate":71,"display_name":"John"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1297562664,"creation_date":1297562664,"answer_id":4981975,"question_id":745443,"body_markdown":"With the [date4j][1] library : \r\n\r\n    DateTime yesterday = today.minusDays(1);\r\n\r\n\r\n  [1]: http://www.date4j.net","title":"How to determine the date one day prior to a given date in Java?","body":"<p>With the <a href=\"http://www.date4j.net\" rel=\"nofollow\">date4j</a> library : </p>\n\n<pre><code>DateTime yesterday = today.minusDays(1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5975090,"reputation":11,"user_id":4696242,"display_name":"Vimalraj"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1426904855,"creation_date":1426904406,"answer_id":29178541,"question_id":745443,"body_markdown":"This would help.\r\n        \r\n    getPreviousDateForGivenDate(&quot;2015-01-19&quot;, 10);\r\n    getPreviousDateForGivenDate(&quot;2015-01-19&quot;, -10);\r\n    \r\n    public static String getPreviousDateForGivenDate(String givenDate, int datesPriorOrAfter) {\r\n    \tString saleDate = getPreviousDate(datesPriorOrAfter);\r\n    \t\r\n    \ttry {\r\n    \t\tDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\r\n    \t\tString[] arr = givenDate.split(&quot;-&quot;, 3);\r\n            Calendar cal = new GregorianCalendar(Integer.parseInt(arr[0]), Integer.parseInt(arr[1])-1, Integer.parseInt(arr[2]));\r\n            cal.add(Calendar.DAY_OF_YEAR, datesPriorOrAfter);    \r\n            saleDate = dateFormat.format(cal.getTime());\r\n\t\t\r\n    \t} catch (Exception e) {\r\n\t\t\tSystem.out.println(&quot;Error at getPreviousDateForGivenDate():&quot;+e.getMessage());\r\n\t\t}\r\n    \t\r\n        return saleDate;\r\n\t}","title":"How to determine the date one day prior to a given date in Java?","body":"<p>This would help.</p>\n\n<pre><code>getPreviousDateForGivenDate(\"2015-01-19\", 10);\ngetPreviousDateForGivenDate(\"2015-01-19\", -10);\n\npublic static String getPreviousDateForGivenDate(String givenDate, int datesPriorOrAfter) {\n    String saleDate = getPreviousDate(datesPriorOrAfter);\n\n    try {\n        DateFormat dateFormat = new SimpleDateFormat(\"yyyy-MM-dd\");\n        String[] arr = givenDate.split(\"-\", 3);\n        Calendar cal = new GregorianCalendar(Integer.parseInt(arr[0]), Integer.parseInt(arr[1])-1, Integer.parseInt(arr[2]));\n        cal.add(Calendar.DAY_OF_YEAR, datesPriorOrAfter);    \n        saleDate = dateFormat.format(cal.getTime());\n\n    } catch (Exception e) {\n        System.out.println(\"Error at getPreviousDateForGivenDate():\"+e.getMessage());\n    }\n\n    return saleDate;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":34527,"reputation":156,"user_id":97648,"display_name":"Vincnetas"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1524821587,"creation_date":1524821587,"answer_id":50059437,"question_id":745443,"body_markdown":"With java.time.Instant\r\n\r\n    Date.from(Instant.now().minus(Duration.ofDays(1)))","title":"How to determine the date one day prior to a given date in Java?","body":"<p>With java.time.Instant</p>\n\n<pre><code>Date.from(Instant.now().minus(Duration.ofDays(1)))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665683542,"creation_date":1665681092,"answer_id":74059479,"question_id":745443,"body_markdown":"# ***java.time***\r\n\r\nThe java.time API introduced with Java-8 (March 2014) supplants the error-prone and outdated `java.util` and their formatting API, `SimpleDateFormat`. It is recommended to stop using the legacy date-time API and switch to the [modern date-time API](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html).\r\n\r\nHow to parse a date string using java.time API?\r\n---\r\n\r\nUse [`LocalDate#parse(CharSequence text, DateTimeFormatter formatter)`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html#parse-java.lang.CharSequence-java.time.format.DateTimeFormatter-) to parse a date string which is not in [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) format. However, a date string already in ISO 8601 format (`yyyy-MM-dd`), can be parsed using [`LocalDate parse(CharSequence text)`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html#parse-java.lang.CharSequence-).\r\n\r\n**Demo**:\r\n\r\n    import java.time.LocalDate;\r\n    import java.time.format.DateTimeFormatter;\r\n    import java.util.Locale;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;M/d/u&quot;, Locale.ENGLISH);\r\n            String strDateTime = &quot;3/1/2009&quot;;\r\n            LocalDate date = LocalDate.parse(strDateTime, formatter);\r\n            System.out.println(date);\r\n    \r\n            strDateTime = &quot;2009-03-01&quot;;\r\n            date = LocalDate.parse(strDateTime);\r\n            System.out.println(date);\r\n        }\r\n    }\r\n\r\n**Output**:\r\n\r\n    2009-03-01\r\n    2009-03-01\r\n\r\nHow to get the previous date using java.time API?\r\n---\r\n\r\nThe simplest option is to use [`LocalDate#minusDays`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html#minusDays-long-). You can use one of the overloaded `LocalDate#minus` functions as well but they are there mainly to subtract for other time units e.g. hour, minute etc.\r\n\r\n**Demo**:\r\n\r\n    import java.time.LocalDate;\r\n    import java.time.Period;\r\n    import java.time.temporal.ChronoUnit;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            LocalDate today = LocalDate.now();\r\n            System.out.println(today);\r\n            LocalDate previousDay = today.minusDays(1);\r\n            System.out.println(previousDay);\r\n    \r\n            // Alternatively\r\n            previousDay = today.minus(Period.ofDays(1));\r\n            System.out.println(previousDay);\r\n    \r\n            // Alternatively\r\n            previousDay = today.minus(1, ChronoUnit.DAYS);\r\n            System.out.println(previousDay);\r\n        }\r\n    }\r\n\r\n**Output**:\r\n\r\n    2022-10-13\r\n    2022-10-12\r\n    2022-10-12\r\n    2022-10-12\r\n\r\n**Putting together**:\r\n\r\n    LocalDate previousDay = LocalDate.parse(\r\n    \t\t\t\t\t\t\t&quot;3/1/2009&quot;, \r\n    \t\t\t\t\t\t\tDateTimeFormatter.ofPattern(&quot;M/d/u&quot;, Locale.ENGLISH)\r\n    \t\t\t\t\t\t).minusDays(1); // 2009-02-28\r\n\r\n\r\nJust in case\r\n--\r\n\r\nJust in case, you want the result to be formatted in the same format as the date string, use [`DateTimeFormatter#format`](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#format-java.time.temporal.TemporalAccessor-) e.g.\r\n\r\n    DateTimeFormatter formatter= DateTimeFormatter.ofPattern(&quot;M/d/u&quot;, Locale.ENGLISH);\r\n    System.out.println(previousDay.format(formatter)); // 2/28/2009\r\n    \r\n    // Alternatively\r\n    System.out.println(formatter.format(previousDay)); // 2/28/2009\r\n\r\nLearn more about the the [modern date-time API](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html) from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.\r\n\r\n**Some useful links**:\r\n\r\n 1. [Never use Date-Time formatting/parsing API without a Locale](https://stackoverflow.com/a/65544056/10819573)\r\n 2. I [prefer u to y](https://stackoverflow.com/a/65928023/10819573) with `DateTimeFormatter`.","title":"How to determine the date one day prior to a given date in Java?","body":"<h1><em><strong>java.time</strong></em></h1>\n<p>The java.time API introduced with Java-8 (March 2014) supplants the error-prone and outdated <code>java.util</code> and their formatting API, <code>SimpleDateFormat</code>. It is recommended to stop using the legacy date-time API and switch to the <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html\" rel=\"nofollow noreferrer\">modern date-time API</a>.</p>\n<h2>How to parse a date string using java.time API?</h2>\n<p>Use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html#parse-java.lang.CharSequence-java.time.format.DateTimeFormatter-\" rel=\"nofollow noreferrer\"><code>LocalDate#parse(CharSequence text, DateTimeFormatter formatter)</code></a> to parse a date string which is not in <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> format. However, a date string already in ISO 8601 format (<code>yyyy-MM-dd</code>), can be parsed using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html#parse-java.lang.CharSequence-\" rel=\"nofollow noreferrer\"><code>LocalDate parse(CharSequence text)</code></a>.</p>\n<p><strong>Demo</strong>:</p>\n<pre><code>import java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\nimport java.util.Locale;\n\npublic class Main {\n    public static void main(String[] args) {\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;M/d/u&quot;, Locale.ENGLISH);\n        String strDateTime = &quot;3/1/2009&quot;;\n        LocalDate date = LocalDate.parse(strDateTime, formatter);\n        System.out.println(date);\n\n        strDateTime = &quot;2009-03-01&quot;;\n        date = LocalDate.parse(strDateTime);\n        System.out.println(date);\n    }\n}\n</code></pre>\n<p><strong>Output</strong>:</p>\n<pre><code>2009-03-01\n2009-03-01\n</code></pre>\n<h2>How to get the previous date using java.time API?</h2>\n<p>The simplest option is to use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html#minusDays-long-\" rel=\"nofollow noreferrer\"><code>LocalDate#minusDays</code></a>. You can use one of the overloaded <code>LocalDate#minus</code> functions as well but they are there mainly to subtract for other time units e.g. hour, minute etc.</p>\n<p><strong>Demo</strong>:</p>\n<pre><code>import java.time.LocalDate;\nimport java.time.Period;\nimport java.time.temporal.ChronoUnit;\n\npublic class Main {\n    public static void main(String[] args) {\n        LocalDate today = LocalDate.now();\n        System.out.println(today);\n        LocalDate previousDay = today.minusDays(1);\n        System.out.println(previousDay);\n\n        // Alternatively\n        previousDay = today.minus(Period.ofDays(1));\n        System.out.println(previousDay);\n\n        // Alternatively\n        previousDay = today.minus(1, ChronoUnit.DAYS);\n        System.out.println(previousDay);\n    }\n}\n</code></pre>\n<p><strong>Output</strong>:</p>\n<pre><code>2022-10-13\n2022-10-12\n2022-10-12\n2022-10-12\n</code></pre>\n<p><strong>Putting together</strong>:</p>\n<pre><code>LocalDate previousDay = LocalDate.parse(\n                            &quot;3/1/2009&quot;, \n                            DateTimeFormatter.ofPattern(&quot;M/d/u&quot;, Locale.ENGLISH)\n                        ).minusDays(1); // 2009-02-28\n</code></pre>\n<h2>Just in case</h2>\n<p>Just in case, you want the result to be formatted in the same format as the date string, use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#format-java.time.temporal.TemporalAccessor-\" rel=\"nofollow noreferrer\"><code>DateTimeFormatter#format</code></a> e.g.</p>\n<pre><code>DateTimeFormatter formatter= DateTimeFormatter.ofPattern(&quot;M/d/u&quot;, Locale.ENGLISH);\nSystem.out.println(previousDay.format(formatter)); // 2/28/2009\n\n// Alternatively\nSystem.out.println(formatter.format(previousDay)); // 2/28/2009\n</code></pre>\n<p>Learn more about the the <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html\" rel=\"nofollow noreferrer\">modern date-time API</a> from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n<p><strong>Some useful links</strong>:</p>\n<ol>\n<li><a href=\"https://stackoverflow.com/a/65544056/10819573\">Never use Date-Time formatting/parsing API without a Locale</a></li>\n<li>I <a href=\"https://stackoverflow.com/a/65928023/10819573\">prefer u to y</a> with <code>DateTimeFormatter</code>.</li>\n</ol>\n"}],"owner":{"account_id":1762,"reputation":31842,"user_id":2405,"accept_rate":100,"display_name":"William Brendel"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27511,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":745451,"answer_count":8,"score":15,"last_activity_date":1665683542,"creation_date":1239657278,"question_id":745443,"body_markdown":"I am assuming Java has some built-in way to do this.\r\n\r\n**Given a date, how can I determine the date one day prior to that date?**\r\n\r\nFor example, suppose I am given 3/1/2009. The previous date is 2/28/2009. If I had been given 3/1/2008, the previous date would have been 2/29/2008.","title":"How to determine the date one day prior to a given date in Java?","body":"<p>I am assuming Java has some built-in way to do this.</p>\n\n<p><strong>Given a date, how can I determine the date one day prior to that date?</strong></p>\n\n<p>For example, suppose I am given 3/1/2009. The previous date is 2/28/2009. If I had been given 3/1/2008, the previous date would have been 2/29/2008.</p>\n"},{"tags":["javascript","java","json"],"answers":[{"comments":[{"owner":{"account_id":16209737,"reputation":57,"user_id":11704078,"display_name":"Ankit Srivastava"},"score":0,"creation_date":1665683139,"post_id":74059522,"comment_id":130762266,"body_markdown":"Thanks alot Travis. I also tried using funcs and recursion ( added the code to the original question ). It led me to distinct list of JPATH but only the max(index) JPATH for the arrays. I was thinking to use the output and further manipulate the array using max(index). But this code gives what i exactly needed. Let me test more.","body":"Thanks alot Travis. I also tried using funcs and recursion ( added the code to the original question ). It led me to distinct list of JPATH but only the max(index) JPATH for the arrays. I was thinking to use the output and further manipulate the array using max(index). But this code gives what i exactly needed. Let me test more."}],"tags":[],"owner":{"account_id":25600761,"reputation":36,"user_id":19377707,"display_name":"Travis"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1665681338,"creation_date":1665681338,"answer_id":74059522,"question_id":74057724,"body_markdown":"I think the entry point of your recursion is likely where you are stumbling.  If you&#39;ll move all of your processing into the recursive block, then you can process from a top-down approach in your object.  This also allows you to peel off layers of the object for processing as you navigate through the split path (INPUT array).\r\n\r\nThere are a few other changes in the following to be a little more efficient, and I changed a few variable names to help me keep things straight as I was debugging.\r\n\r\n````\r\nvar INPUT = [ &quot;ADDR.ADDR_L1&quot;, &quot;NAME.FIRST_NAME&quot;, &quot;CONTACT.TYPE&quot;, &quot;LEVEL1OBJ.LEVEL2OBJ&quot;, &quot;LEVEL1OBJ.LEVEL2ARR.LEVEL3OBJ&quot;];\r\nvar main_obj = {\r\n  ID: &quot;1&quot;,\r\n  NAME: { FIRST_NAME: &quot;ABC&quot;, LAST_NAME: &quot;XYZ&quot; },\r\n  ADDR: [\r\n    { TYPE: &quot;HOME&quot;, ADDR_L1: &quot;SDGSG&quot;, CITY: &quot;AFAFA&quot; },\r\n    { TYPE: &quot;OFFC&quot;, ADDR_L1: &quot;AFASF&quot;, CITY: &quot;SDGSDG&quot; }\r\n  ],\r\n  CONTACT: [{ TYPE: &quot;A&quot; }, { TYPE: &quot;B&quot; }, { TYPE: &quot;C&quot; }],\r\n  LEVEL1OBJ: {\r\n    LEVEL2ARR: [{ LEVEL3OBJ: &quot;A&quot; }, { LEVEL3OBJ: &quot;B&quot; }],\r\n    LEVEL2OBJ: &quot;GFDB&quot;\r\n  }\r\n};\r\n\r\nvar json_final = [];\r\nfor (var keyInput of INPUT) {\r\n  processKeys(keyInput, main_obj, keyInput);\r\n}\r\nconsole.log(JSON.stringify(json_final));\r\n\r\nfunction processKeys (keyInp, obj, rootKeyInp) {\r\n  if (keyInp.includes(&#39;.&#39;)) {\r\n    var tokens = keyInp.split(&#39;.&#39;);\r\n    if (1 &lt; tokens.length) {\r\n      console.log(tokens[0] + &#39; :: &#39; + rootKeyInp);\r\n      var keyInp0 = tokens.shift();\r\n      if (obj[keyInp0] != null) {\r\n        processKeys(tokens.join(&#39;.&#39;), obj[keyInp0], rootKeyInp);\r\n      }\r\n    }\r\n  } else {\r\n    var json_arr_tmp = [];\r\n    if (Object.prototype.toString.call(obj) === &quot;[object Array]&quot;) {\r\n      for (var i = 0; i &lt; obj.length; i++) {\r\n        let rootKeyInpSuffix = rootKeyInp.slice(-(keyInp.length + 1));\r\n        json_arr_tmp.push(rootKeyInp.substr(0, rootKeyInp.lastIndexOf(rootKeyInpSuffix)) + &#39;.&#39; + i + rootKeyInpSuffix);\r\n      }\r\n    } else {\r\n      json_arr_tmp.push(rootKeyInp);\r\n    }\r\n    json_final.push(json_arr_tmp);\r\n  }\r\n}\r\n````","title":"Deriving Full JPath with Array Index","body":"<p>I think the entry point of your recursion is likely where you are stumbling.  If you'll move all of your processing into the recursive block, then you can process from a top-down approach in your object.  This also allows you to peel off layers of the object for processing as you navigate through the split path (INPUT array).</p>\n<p>There are a few other changes in the following to be a little more efficient, and I changed a few variable names to help me keep things straight as I was debugging.</p>\n<pre><code>var INPUT = [ &quot;ADDR.ADDR_L1&quot;, &quot;NAME.FIRST_NAME&quot;, &quot;CONTACT.TYPE&quot;, &quot;LEVEL1OBJ.LEVEL2OBJ&quot;, &quot;LEVEL1OBJ.LEVEL2ARR.LEVEL3OBJ&quot;];\nvar main_obj = {\n  ID: &quot;1&quot;,\n  NAME: { FIRST_NAME: &quot;ABC&quot;, LAST_NAME: &quot;XYZ&quot; },\n  ADDR: [\n    { TYPE: &quot;HOME&quot;, ADDR_L1: &quot;SDGSG&quot;, CITY: &quot;AFAFA&quot; },\n    { TYPE: &quot;OFFC&quot;, ADDR_L1: &quot;AFASF&quot;, CITY: &quot;SDGSDG&quot; }\n  ],\n  CONTACT: [{ TYPE: &quot;A&quot; }, { TYPE: &quot;B&quot; }, { TYPE: &quot;C&quot; }],\n  LEVEL1OBJ: {\n    LEVEL2ARR: [{ LEVEL3OBJ: &quot;A&quot; }, { LEVEL3OBJ: &quot;B&quot; }],\n    LEVEL2OBJ: &quot;GFDB&quot;\n  }\n};\n\nvar json_final = [];\nfor (var keyInput of INPUT) {\n  processKeys(keyInput, main_obj, keyInput);\n}\nconsole.log(JSON.stringify(json_final));\n\nfunction processKeys (keyInp, obj, rootKeyInp) {\n  if (keyInp.includes('.')) {\n    var tokens = keyInp.split('.');\n    if (1 &lt; tokens.length) {\n      console.log(tokens[0] + ' :: ' + rootKeyInp);\n      var keyInp0 = tokens.shift();\n      if (obj[keyInp0] != null) {\n        processKeys(tokens.join('.'), obj[keyInp0], rootKeyInp);\n      }\n    }\n  } else {\n    var json_arr_tmp = [];\n    if (Object.prototype.toString.call(obj) === &quot;[object Array]&quot;) {\n      for (var i = 0; i &lt; obj.length; i++) {\n        let rootKeyInpSuffix = rootKeyInp.slice(-(keyInp.length + 1));\n        json_arr_tmp.push(rootKeyInp.substr(0, rootKeyInp.lastIndexOf(rootKeyInpSuffix)) + '.' + i + rootKeyInpSuffix);\n      }\n    } else {\n      json_arr_tmp.push(rootKeyInp);\n    }\n    json_final.push(json_arr_tmp);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":16209737,"reputation":57,"user_id":11704078,"display_name":"Ankit Srivastava"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74059522,"answer_count":1,"score":0,"last_activity_date":1665683014,"creation_date":1665672262,"question_id":74057724,"body_markdown":"Trying to derive Full JPATH if Object is an Array.\r\n\r\nRunning below code,\r\n```\r\nvar INPUT = [&#39;ADDR.ADDR_L1&#39;,&#39;NAME.FIRST_NAME&#39;,&#39;CONTACT.TYPE&#39;,&#39;LEVEL1OBJ.LEVEL2OBJ&#39;,&#39;LEVEL1OBJ.LEVEL2ARR.LEVEL3OBJ&#39;];\r\n\r\nvar obj = {\r\n                  &quot;ID&quot;:&quot;1&quot;,\r\n                  &quot;NAME&quot;:{&quot;FIRST_NAME&quot;:&quot;ABC&quot;,&quot;LAST_NAME&quot;:&quot;XYZ&quot;},\r\n                  &quot;ADDR&quot;:\r\n                        [{&quot;TYPE&quot;:&quot;HOME&quot;,\r\n                          &quot;ADDR_L1&quot;:&quot;SDGSG&quot;,\r\n                          &quot;CITY&quot;:&quot;AFAFA&quot;},\r\n                         {&quot;TYPE&quot;:&quot;OFFC&quot;,\r\n                          &quot;ADDR_L1&quot;:&quot;AFASF&quot;,\r\n                          &quot;CITY&quot;:&quot;SDGSDG&quot;}],\r\n                  &quot;CONTACT&quot;:\r\n                        [{&quot;TYPE&quot;:&quot;A&quot;},{&quot;TYPE&quot;:&quot;B&quot;},{&quot;TYPE&quot;:&quot;C&quot;}],\r\n                  &quot;LEVEL1OBJ&quot;:{&quot;LEVEL2ARR&quot;:[\r\n                                            {&quot;LEVEL3OBJ&quot;:&quot;A&quot;},\r\n                                            {&quot;LEVEL3OBJ&quot;:&quot;B&quot;}],\r\n                                &quot;LEVEL2OBJ&quot;:&quot;GFDB&quot;\r\n                  }\r\n                  };\r\n\r\nvar jpath1=[];\r\nvar jpath_final=[];\r\nfor ( var i=0;i&lt;INPUT.length;i++)\r\n  { // Loop over the list of JPATH coming in as INPUT\r\n    jpath1=[];\r\n    console.log(&quot;I&quot;+i);\r\n    var jpath = INPUT[i].split(&#39;.&#39;); //Splitting keys in an array\r\n    console.log(jpath);\r\n      for ( var j=0;j&lt;jpath.length;j++)\r\n        { //loop over all keys in input\r\n          console.log(&quot;J&quot;+j);\r\n          var subjpath=jpath[j];\r\n          console.log(jpath.length);\r\n          console.log(subjpath);\r\n              for ( var key of Object.keys(obj) ) //getting all keys on obj\r\n                {  \r\n                  console.log(&quot;KEY&quot;);\r\n                  console.log(key);\r\n  \r\n                  if ( Object.prototype.toString.call(obj[key]) === &#39;[object Array]&#39; &amp;&amp; subjpath == key ) //if object is an array\r\n                    {\r\n                        console.log(&quot;yes&quot;);\r\n                        console.log(obj[key].length);\r\n                        for ( var k=0;k&lt;obj[key].length;k++)\r\n                            { //looping over all array index\r\n                                console.log(&quot;k&quot;+k);\r\n                                jpath1.push(subjpath+&#39;.&#39;+k); //appending array index to original jpath\r\n                                console.log(jpath1);\r\n                            }\r\n                    }\r\n                  else if ( key == subjpath )\r\n                   {\r\n                     jpath1.push(subjpath);\r\n                     subjpath=&quot;&quot;;\r\n                   }\r\n                }\r\n          \r\n          }\r\n//appending other objects after array object\r\n          jpath1.forEach((element, index) =&gt; {\r\n  jpath1[index] = element + &#39;.&#39; + subjpath;\r\n    });\r\nconsole.log(jpath1);      \r\n          jpath_final.push(jpath1);\r\n          \r\n          console.log(jpath_final);\r\n}\r\n```\r\n\r\nCurrent Output:\r\n```\r\n[\r\n  [ &#39;ADDR.0.ADDR_L1&#39;, &#39;ADDR.1.ADDR_L1&#39; ],\r\n  [ &#39;NAME.FIRST_NAME&#39; ],\r\n  [ &#39;CONTACT.0.TYPE&#39;, &#39;CONTACT.1.TYPE&#39;, &#39;CONTACT.2.TYPE&#39; ],\r\n  [ &#39;LEVEL1OBJ.LEVEL2OBJ&#39; ],\r\n  [ &#39;LEVEL1OBJ.LEVEL3OBJ&#39; ] --Incorrect\r\n]\r\n```\r\n\r\nThe process is working for scenario where Array Object is first level. But not working for 2nd Level onwards array object. I know i need to perform it recursively but corrupting the result if I take out Object.keys loop as function.\r\n\r\nExpected Output\r\n```\r\n[\r\n  [ &#39;ADDR.0.ADDR_L1&#39;, &#39;ADDR.1.ADDR_L1&#39; ],\r\n  [ &#39;NAME.FIRST_NAME&#39; ],\r\n  [ &#39;CONTACT.0.TYPE&#39;, &#39;CONTACT.1.TYPE&#39;, &#39;CONTACT.2.TYPE&#39; ],\r\n  [ &#39;LEVEL1OBJ.LEVEL2OBJ&#39; ],\r\n  [ &#39;LEVEL1OBJ.LEVEL2ARR.0.LEVEL3OBJ&#39; ,&#39;LEVEL1OBJ.LEVEL2ARR.1.LEVEL3OBJ&#39; ]\r\n]\r\n```\r\n\r\n\r\nMeanwhile I tried something more which gives close to what i needed,\r\n\r\n```\r\nvar INPUT = [&#39;ADDR.ADDR_L1&#39;,&#39;NAME.FIRST_NAME&#39;,&#39;CONTACT.TYPE&#39;,&#39;LEVEL1OBJ.LEVEL2OBJ&#39;,&#39;LEVEL1OBJ.LEVEL2ARR.LEVEL3OBJ&#39;];\r\n\r\nvar obj = {\r\n                  &quot;ID&quot;:&quot;1&quot;,\r\n                  &quot;NAME&quot;:{&quot;FIRST_NAME&quot;:&quot;ABC&quot;,&quot;LAST_NAME&quot;:&quot;XYZ&quot;},\r\n                  &quot;ADDR&quot;:\r\n                        [{&quot;TYPE&quot;:&quot;HOME&quot;,\r\n                          &quot;ADDR_L1&quot;:&quot;SDGSG&quot;,\r\n                          &quot;CITY&quot;:&quot;AFAFA&quot;},\r\n                         {&quot;TYPE&quot;:&quot;OFFC&quot;,\r\n                          &quot;ADDR_L1&quot;:&quot;AFASF&quot;,\r\n                          &quot;CITY&quot;:&quot;SDGSDG&quot;}],\r\n                  &quot;CONTACT&quot;:\r\n                        [{&quot;TYPE&quot;:&quot;A&quot;},{&quot;TYPE&quot;:&quot;B&quot;},{&quot;TYPE&quot;:&quot;C&quot;}],\r\n                  &quot;LEVEL1OBJ&quot;:{&quot;LEVEL2ARR&quot;:[\r\n                                            {&quot;LEVEL3OBJ&quot;:&quot;A&quot;},\r\n                                            {&quot;LEVEL3OBJ&quot;:&quot;B&quot;}],\r\n                                &quot;LEVEL2OBJ&quot;:&quot;GFDB&quot;\r\n                  }\r\n                  };\r\nvar jpath_final=[];\r\n\r\nfunction append_index(jp,index)\r\n{\r\n  if ( jpath_final[i] == null )\r\n  {\r\n  jpath_final[i] = jp+&#39;.&#39;+index; \r\n  }\r\n  else\r\n  {\r\n    jpath_final[i] += &#39;.&#39;+jp+&#39;.&#39;+index;\r\n  }\r\n  return;\r\n\r\n}\r\n\r\nfunction append_jpath(jp)\r\n{\r\n  if ( jpath_final[i] == null )\r\n  {\r\n  jpath_final[i] = jp; \r\n  }\r\n  else\r\n  {\r\n    jpath_final[i] += &#39;.&#39;+jp;\r\n  }\r\n  return;\r\n}\r\n\r\n\r\nfunction chk_func ( obj,jpath )\r\n{\r\n\r\n\t for ( var key of Object.keys(obj)  )\r\n\t\t{\r\n\t\t  console.log(&quot;Print Key:&quot;+key);\t\r\n\t\t  console.log(&quot;JPATH &quot;+jpath);\r\n\t\t  console.log(&quot;J &quot; + j);\r\n\t\t  if ( j == jpath.length-1 )\r\n\t\t  {\r\n\t\t     console.log(&quot;Enter 1st if&quot;);\r\n\t\t     append_jpath(jpath[j]);\r\n\t\t     j++;\r\n\t\t     console.log(&quot;JPATH &quot;+ jpath_final[i]);\r\n\t\t     return;\r\n\t\t  }\r\n\t\t  else\r\n\t\t  {\r\n\t\t\tif ( typeof obj[key] == &#39;object&#39; &amp;&amp; key == jpath[j] &amp;&amp; Object.prototype.toString.call(obj[key]) != &quot;[object Array]&quot;)\r\n\t\t\t\t{\r\n\t\t\t\t  console.log(&quot;Enter 2nd if&quot;);\r\n\t\t\t\t\tconsole.log( jpath[j] + &quot; is Object&quot;);\r\n\t\t\t\t\tappend_jpath(jpath[j]);\r\n\t\t\t\t\tconsole.log( &quot;JPATH &quot;+jpath_final[i]);\r\n\t\t\t\t\tj++;\r\n\t\t\t\t\tconsole.log(&quot;Now Object &quot;+ key+&quot; &quot;+jpath[j] );\r\n\t\t\t\t\tchk_func(obj[key],jpath);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t else if ( Object.prototype.toString.call(obj[key]) === &quot;[object Array]&quot; &amp;&amp; key == jpath[j] )\r\n\t\t\t\t{\r\n\t\t\t\t  console.log(&quot;Enter 3rd if&quot;);\r\n\t\t\t\t  console.log(&quot;jpath &quot;+jpath);\r\n\t\t\t\t  console.log(&quot;key &quot;+key);\r\n\t\t\t\t\tconsole.log(jpath[j] + &quot; is Array&quot;);\r\n\t\t\t\t\tappend_index(jpath[j],obj[key].length);\r\n\t\t\t\t\tconsole.log(&quot;JPATH &quot;+jpath_final[i]);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t  continue;\r\n\t\t\t\t}\r\n    \r\n\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn;\r\n}\r\n\r\nfor ( var i=0;i&lt;INPUT.length;i++)\r\n  {\r\n    console.log(&quot;i:&quot;+i);\r\n    var jpath = INPUT[i].split(&#39;.&#39;);\r\n    console.log(jpath);\r\n      for ( var j=0;j&lt;jpath.length;j++)\r\n        {\r\n\t\t  console.log(&quot;j:&quot;+j);\t\t\r\n\t\t  console.log(jpath[j]);\r\n\t\t  \r\n\t\t  if ( j &lt; jpath.length-1 &amp;&amp; jpath[j] != undefined )\r\n\t\t  {\r\n\t\t\tchk_func(obj,jpath);\t\r\n\t\t  }\r\n\t\t  else\r\n\t\t  {\r\n\t\t    append_jpath(jpath[j]);\r\n\t\t    console.log(&quot;JPATH &quot;+ jpath_final[i]);\r\n\t\t  }\r\n        }\r\n  }\r\n\r\nconsole.log(&quot;final &quot;+jpath_final);\r\n```","title":"Deriving Full JPath with Array Index","body":"<p>Trying to derive Full JPATH if Object is an Array.</p>\n<p>Running below code,</p>\n<pre><code>var INPUT = ['ADDR.ADDR_L1','NAME.FIRST_NAME','CONTACT.TYPE','LEVEL1OBJ.LEVEL2OBJ','LEVEL1OBJ.LEVEL2ARR.LEVEL3OBJ'];\n\nvar obj = {\n                  &quot;ID&quot;:&quot;1&quot;,\n                  &quot;NAME&quot;:{&quot;FIRST_NAME&quot;:&quot;ABC&quot;,&quot;LAST_NAME&quot;:&quot;XYZ&quot;},\n                  &quot;ADDR&quot;:\n                        [{&quot;TYPE&quot;:&quot;HOME&quot;,\n                          &quot;ADDR_L1&quot;:&quot;SDGSG&quot;,\n                          &quot;CITY&quot;:&quot;AFAFA&quot;},\n                         {&quot;TYPE&quot;:&quot;OFFC&quot;,\n                          &quot;ADDR_L1&quot;:&quot;AFASF&quot;,\n                          &quot;CITY&quot;:&quot;SDGSDG&quot;}],\n                  &quot;CONTACT&quot;:\n                        [{&quot;TYPE&quot;:&quot;A&quot;},{&quot;TYPE&quot;:&quot;B&quot;},{&quot;TYPE&quot;:&quot;C&quot;}],\n                  &quot;LEVEL1OBJ&quot;:{&quot;LEVEL2ARR&quot;:[\n                                            {&quot;LEVEL3OBJ&quot;:&quot;A&quot;},\n                                            {&quot;LEVEL3OBJ&quot;:&quot;B&quot;}],\n                                &quot;LEVEL2OBJ&quot;:&quot;GFDB&quot;\n                  }\n                  };\n\nvar jpath1=[];\nvar jpath_final=[];\nfor ( var i=0;i&lt;INPUT.length;i++)\n  { // Loop over the list of JPATH coming in as INPUT\n    jpath1=[];\n    console.log(&quot;I&quot;+i);\n    var jpath = INPUT[i].split('.'); //Splitting keys in an array\n    console.log(jpath);\n      for ( var j=0;j&lt;jpath.length;j++)\n        { //loop over all keys in input\n          console.log(&quot;J&quot;+j);\n          var subjpath=jpath[j];\n          console.log(jpath.length);\n          console.log(subjpath);\n              for ( var key of Object.keys(obj) ) //getting all keys on obj\n                {  \n                  console.log(&quot;KEY&quot;);\n                  console.log(key);\n  \n                  if ( Object.prototype.toString.call(obj[key]) === '[object Array]' &amp;&amp; subjpath == key ) //if object is an array\n                    {\n                        console.log(&quot;yes&quot;);\n                        console.log(obj[key].length);\n                        for ( var k=0;k&lt;obj[key].length;k++)\n                            { //looping over all array index\n                                console.log(&quot;k&quot;+k);\n                                jpath1.push(subjpath+'.'+k); //appending array index to original jpath\n                                console.log(jpath1);\n                            }\n                    }\n                  else if ( key == subjpath )\n                   {\n                     jpath1.push(subjpath);\n                     subjpath=&quot;&quot;;\n                   }\n                }\n          \n          }\n//appending other objects after array object\n          jpath1.forEach((element, index) =&gt; {\n  jpath1[index] = element + '.' + subjpath;\n    });\nconsole.log(jpath1);      \n          jpath_final.push(jpath1);\n          \n          console.log(jpath_final);\n}\n</code></pre>\n<p>Current Output:</p>\n<pre><code>[\n  [ 'ADDR.0.ADDR_L1', 'ADDR.1.ADDR_L1' ],\n  [ 'NAME.FIRST_NAME' ],\n  [ 'CONTACT.0.TYPE', 'CONTACT.1.TYPE', 'CONTACT.2.TYPE' ],\n  [ 'LEVEL1OBJ.LEVEL2OBJ' ],\n  [ 'LEVEL1OBJ.LEVEL3OBJ' ] --Incorrect\n]\n</code></pre>\n<p>The process is working for scenario where Array Object is first level. But not working for 2nd Level onwards array object. I know i need to perform it recursively but corrupting the result if I take out Object.keys loop as function.</p>\n<p>Expected Output</p>\n<pre><code>[\n  [ 'ADDR.0.ADDR_L1', 'ADDR.1.ADDR_L1' ],\n  [ 'NAME.FIRST_NAME' ],\n  [ 'CONTACT.0.TYPE', 'CONTACT.1.TYPE', 'CONTACT.2.TYPE' ],\n  [ 'LEVEL1OBJ.LEVEL2OBJ' ],\n  [ 'LEVEL1OBJ.LEVEL2ARR.0.LEVEL3OBJ' ,'LEVEL1OBJ.LEVEL2ARR.1.LEVEL3OBJ' ]\n]\n</code></pre>\n<p>Meanwhile I tried something more which gives close to what i needed,</p>\n<pre><code>var INPUT = ['ADDR.ADDR_L1','NAME.FIRST_NAME','CONTACT.TYPE','LEVEL1OBJ.LEVEL2OBJ','LEVEL1OBJ.LEVEL2ARR.LEVEL3OBJ'];\n\nvar obj = {\n                  &quot;ID&quot;:&quot;1&quot;,\n                  &quot;NAME&quot;:{&quot;FIRST_NAME&quot;:&quot;ABC&quot;,&quot;LAST_NAME&quot;:&quot;XYZ&quot;},\n                  &quot;ADDR&quot;:\n                        [{&quot;TYPE&quot;:&quot;HOME&quot;,\n                          &quot;ADDR_L1&quot;:&quot;SDGSG&quot;,\n                          &quot;CITY&quot;:&quot;AFAFA&quot;},\n                         {&quot;TYPE&quot;:&quot;OFFC&quot;,\n                          &quot;ADDR_L1&quot;:&quot;AFASF&quot;,\n                          &quot;CITY&quot;:&quot;SDGSDG&quot;}],\n                  &quot;CONTACT&quot;:\n                        [{&quot;TYPE&quot;:&quot;A&quot;},{&quot;TYPE&quot;:&quot;B&quot;},{&quot;TYPE&quot;:&quot;C&quot;}],\n                  &quot;LEVEL1OBJ&quot;:{&quot;LEVEL2ARR&quot;:[\n                                            {&quot;LEVEL3OBJ&quot;:&quot;A&quot;},\n                                            {&quot;LEVEL3OBJ&quot;:&quot;B&quot;}],\n                                &quot;LEVEL2OBJ&quot;:&quot;GFDB&quot;\n                  }\n                  };\nvar jpath_final=[];\n\nfunction append_index(jp,index)\n{\n  if ( jpath_final[i] == null )\n  {\n  jpath_final[i] = jp+'.'+index; \n  }\n  else\n  {\n    jpath_final[i] += '.'+jp+'.'+index;\n  }\n  return;\n\n}\n\nfunction append_jpath(jp)\n{\n  if ( jpath_final[i] == null )\n  {\n  jpath_final[i] = jp; \n  }\n  else\n  {\n    jpath_final[i] += '.'+jp;\n  }\n  return;\n}\n\n\nfunction chk_func ( obj,jpath )\n{\n\n     for ( var key of Object.keys(obj)  )\n        {\n          console.log(&quot;Print Key:&quot;+key);    \n          console.log(&quot;JPATH &quot;+jpath);\n          console.log(&quot;J &quot; + j);\n          if ( j == jpath.length-1 )\n          {\n             console.log(&quot;Enter 1st if&quot;);\n             append_jpath(jpath[j]);\n             j++;\n             console.log(&quot;JPATH &quot;+ jpath_final[i]);\n             return;\n          }\n          else\n          {\n            if ( typeof obj[key] == 'object' &amp;&amp; key == jpath[j] &amp;&amp; Object.prototype.toString.call(obj[key]) != &quot;[object Array]&quot;)\n                {\n                  console.log(&quot;Enter 2nd if&quot;);\n                    console.log( jpath[j] + &quot; is Object&quot;);\n                    append_jpath(jpath[j]);\n                    console.log( &quot;JPATH &quot;+jpath_final[i]);\n                    j++;\n                    console.log(&quot;Now Object &quot;+ key+&quot; &quot;+jpath[j] );\n                    chk_func(obj[key],jpath);\n                    break;\n                }\n             else if ( Object.prototype.toString.call(obj[key]) === &quot;[object Array]&quot; &amp;&amp; key == jpath[j] )\n                {\n                  console.log(&quot;Enter 3rd if&quot;);\n                  console.log(&quot;jpath &quot;+jpath);\n                  console.log(&quot;key &quot;+key);\n                    console.log(jpath[j] + &quot; is Array&quot;);\n                    append_index(jpath[j],obj[key].length);\n                    console.log(&quot;JPATH &quot;+jpath_final[i]);\n                    return;\n                }\n                else\n                {\n                  continue;\n                }\n    \n        }\n        }\n        \n        return;\n}\n\nfor ( var i=0;i&lt;INPUT.length;i++)\n  {\n    console.log(&quot;i:&quot;+i);\n    var jpath = INPUT[i].split('.');\n    console.log(jpath);\n      for ( var j=0;j&lt;jpath.length;j++)\n        {\n          console.log(&quot;j:&quot;+j);      \n          console.log(jpath[j]);\n          \n          if ( j &lt; jpath.length-1 &amp;&amp; jpath[j] != undefined )\n          {\n            chk_func(obj,jpath);    \n          }\n          else\n          {\n            append_jpath(jpath[j]);\n            console.log(&quot;JPATH &quot;+ jpath_final[i]);\n          }\n        }\n  }\n\nconsole.log(&quot;final &quot;+jpath_final);\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-annotations"],"answers":[{"comments":[{"owner":{"account_id":6482088,"reputation":3182,"user_id":5018771,"accept_rate":88,"display_name":"AdrienW"},"score":0,"creation_date":1665679480,"post_id":74059146,"comment_id":130761174,"body_markdown":"Sadly this is not what I am looking for. I know the tutorial you mention, my goal is to &quot;hide&quot; the _prefix_ and _name_ attributes from the annotation user.","body":"Sadly this is not what I am looking for. I know the tutorial you mention, my goal is to &quot;hide&quot; the <i>prefix</i> and <i>name</i> attributes from the annotation user."}],"tags":[],"owner":{"account_id":25435554,"reputation":135,"user_id":19239331,"display_name":"Gun Slinger"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1665679052,"creation_date":1665679052,"answer_id":74059146,"question_id":74059072,"body_markdown":"```\r\n@Bean(name = &quot;emailNotification&quot;)\r\n@ConditionalOnProperty(prefix = &quot;notification&quot;, name = &quot;service&quot;)\r\npublic NotificationSender notificationSender() {\r\n    return new EmailNotification();\r\n}\r\n```\r\nfor reference\r\nhttps://www.baeldung.com/spring-conditionalonproperty","title":"How to create custom @ConditionalOnProperty for simpler usage?","body":"<pre><code>@Bean(name = &quot;emailNotification&quot;)\n@ConditionalOnProperty(prefix = &quot;notification&quot;, name = &quot;service&quot;)\npublic NotificationSender notificationSender() {\n    return new EmailNotification();\n}\n</code></pre>\n<p>for reference\n<a href=\"https://www.baeldung.com/spring-conditionalonproperty\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-conditionalonproperty</a></p>\n"},{"comments":[{"owner":{"account_id":6482088,"reputation":3182,"user_id":5018771,"accept_rate":88,"display_name":"AdrienW"},"score":0,"creation_date":1665684247,"post_id":74059683,"comment_id":130762614,"body_markdown":"This perfectly does the trick, thanks a lot. One more question if I may ask: is it possible to &quot;transform&quot; the value, say having the custom annotation using an Enum for `value` (e.g. `MyServiceImplementation.IMPL_A`) and translating that to a String (e.g. `a`) for property checking?\nEDIT: [This question](https://stackoverflow.com/q/39492767/5018771) seems to near the topic but I don&#39;t understand it.","body":"This perfectly does the trick, thanks a lot. One more question if I may ask: is it possible to &quot;transform&quot; the value, say having the custom annotation using an Enum for <code>value</code> (e.g. <code>MyServiceImplementation.IMPL_A</code>) and translating that to a String (e.g. <code>a</code>) for property checking? EDIT: <a href=\"https://stackoverflow.com/q/39492767/5018771\">This question</a> seems to near the topic but I don&#39;t understand it."},{"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1665753638,"post_id":74059683,"comment_id":130777963,"body_markdown":"I suspect not. Have you tried?","body":"I suspect not. Have you tried?"},{"owner":{"account_id":6482088,"reputation":3182,"user_id":5018771,"accept_rate":88,"display_name":"AdrienW"},"score":0,"creation_date":1665754705,"post_id":74059683,"comment_id":130778390,"body_markdown":"I can only achieve this by parsing the properties and annotations &quot;per hand&quot;, implementing the `Condition` interface, using `context.getEnvironment().getProperty(&quot;myservice.implversion&quot;)` and `metadata.getAnnotations().stream().filter(a -&gt; OnMyServiceVersion.class.equals(a.getType())).findFirst().orElseThrow().getEnum(&quot;value&quot;, MyServiceImplementation.class)`. I can then match the property value and the enum value to decide on the result of the `matches` method but I doubt this is as robust as the `@ConditionalOnProperty` implementation.","body":"I can only achieve this by parsing the properties and annotations &quot;per hand&quot;, implementing the <code>Condition</code> interface, using <code>context.getEnvironment().getProperty(&quot;myservice.implversion&quot;&zwnj;&#8203;)</code> and <code>metadata.getAnnotations().stream().filter(a -&gt; OnMyServiceVersion.class.equals(a.getType())).findFirst().or&zwnj;&#8203;ElseThrow().getEnum(&zwnj;&#8203;&quot;value&quot;, MyServiceImplementation.class)</code>. I can then match the property value and the enum value to decide on the result of the <code>matches</code> method but I doubt this is as robust as the <code>@ConditionalOnProperty</code> implementation."}],"tags":[],"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1665682238,"creation_date":1665682238,"answer_id":74059683,"question_id":74059072,"body_markdown":"You can annotate your `@OnMyServiceVersion` annotation with `@ConditionalOnProperty` and alias the `value` of your annotation to the `havingValue` attribute of `@ConditionalOnProperty`:\r\n\r\n```\r\n@Documented\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target({ ElementType.TYPE, ElementType.METHOD })\r\n@ConditionalOnProperty(prefix = &quot;myservice&quot;, name = &quot;implversion&quot;)\r\npublic @interface OnMyServiceVersion {\r\n\r\n    @AliasFor(annotation = ConditionalOnProperty.class, attribute = &quot;havingValue&quot;)\r\n    String value() default &quot;&quot;;\r\n\r\n}\r\n```\r\n\r\nHere&#39;s a complete example that shows this in action:\r\n\r\n```\r\npackage com.example.demo;\r\n\r\nimport java.lang.annotation.Documented;\r\nimport java.lang.annotation.ElementType;\r\nimport java.lang.annotation.Retention;\r\nimport java.lang.annotation.RetentionPolicy;\r\nimport java.lang.annotation.Target;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;\r\nimport org.springframework.core.annotation.AliasFor;\r\nimport org.springframework.stereotype.Service;\r\n\r\n@SpringBootApplication\r\npublic class CustomPropertyConditionApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(CustomPropertyConditionApplication.class, &quot;--myservice.implversion=b&quot;);\r\n\t}\r\n\t\r\n\t@Service\r\n\t@OnMyServiceVersion(&quot;a&quot;)\r\n\tstatic class ServiceA {\r\n\t\t\r\n\t\tServiceA() {\r\n\t\t\tSystem.out.println(&quot;Service A&quot;);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t@Service\r\n\t@OnMyServiceVersion(&quot;b&quot;)\r\n\tstatic class ServiceB {\r\n\t\t\r\n\t\tServiceB() {\r\n\t\t\tSystem.out.println(&quot;Service B&quot;);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t@Documented\r\n\t@Retention(RetentionPolicy.RUNTIME)\r\n\t@Target({ ElementType.TYPE, ElementType.METHOD })\r\n\t@ConditionalOnProperty(prefix = &quot;myservice&quot;, name = &quot;implversion&quot;)\r\n\tstatic @interface OnMyServiceVersion {\r\n\t\t\r\n\t\t@AliasFor(annotation = ConditionalOnProperty.class, attribute = &quot;havingValue&quot;)\r\n\t\tString value() default &quot;&quot;;\r\n\t\t\r\n\t}\r\n\r\n}\r\n```\r\n\r\nThis will output `Service B` when run. If you change the arguments in the main method to `--myservice.implversion=a` it will output `Service A`. If you remove the argument, it won&#39;t output either.","title":"How to create custom @ConditionalOnProperty for simpler usage?","body":"<p>You can annotate your <code>@OnMyServiceVersion</code> annotation with <code>@ConditionalOnProperty</code> and alias the <code>value</code> of your annotation to the <code>havingValue</code> attribute of <code>@ConditionalOnProperty</code>:</p>\n<pre><code>@Documented\n@Retention(RetentionPolicy.RUNTIME)\n@Target({ ElementType.TYPE, ElementType.METHOD })\n@ConditionalOnProperty(prefix = &quot;myservice&quot;, name = &quot;implversion&quot;)\npublic @interface OnMyServiceVersion {\n\n    @AliasFor(annotation = ConditionalOnProperty.class, attribute = &quot;havingValue&quot;)\n    String value() default &quot;&quot;;\n\n}\n</code></pre>\n<p>Here's a complete example that shows this in action:</p>\n<pre><code>package com.example.demo;\n\nimport java.lang.annotation.Documented;\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;\nimport org.springframework.core.annotation.AliasFor;\nimport org.springframework.stereotype.Service;\n\n@SpringBootApplication\npublic class CustomPropertyConditionApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(CustomPropertyConditionApplication.class, &quot;--myservice.implversion=b&quot;);\n    }\n    \n    @Service\n    @OnMyServiceVersion(&quot;a&quot;)\n    static class ServiceA {\n        \n        ServiceA() {\n            System.out.println(&quot;Service A&quot;);\n        }\n        \n    }\n    \n    @Service\n    @OnMyServiceVersion(&quot;b&quot;)\n    static class ServiceB {\n        \n        ServiceB() {\n            System.out.println(&quot;Service B&quot;);\n        }\n        \n    }\n    \n    @Documented\n    @Retention(RetentionPolicy.RUNTIME)\n    @Target({ ElementType.TYPE, ElementType.METHOD })\n    @ConditionalOnProperty(prefix = &quot;myservice&quot;, name = &quot;implversion&quot;)\n    static @interface OnMyServiceVersion {\n        \n        @AliasFor(annotation = ConditionalOnProperty.class, attribute = &quot;havingValue&quot;)\n        String value() default &quot;&quot;;\n        \n    }\n\n}\n</code></pre>\n<p>This will output <code>Service B</code> when run. If you change the arguments in the main method to <code>--myservice.implversion=a</code> it will output <code>Service A</code>. If you remove the argument, it won't output either.</p>\n"}],"owner":{"account_id":6482088,"reputation":3182,"user_id":5018771,"accept_rate":88,"display_name":"AdrienW"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":721,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":74059683,"answer_count":2,"score":4,"last_activity_date":1665682238,"creation_date":1665678628,"question_id":74059072,"body_markdown":"In a Spring-Boot project, I use `@ConditionalOnProperty` to choose whether some Beans get loaded or not. It looks like the following:\r\n\r\n```java\r\n@ConditionalOnProperty(\r\n    prefix = &quot;myservice&quot;,\r\n    name = &quot;implversion&quot;,\r\n    havingValue = &quot;a&quot;\r\n)\r\n@Service\r\npublic class MyServiceImplA implements MyService {\r\n   // ...\r\n}\r\n```\r\n\r\nThis allows me to choose with specific profiles which Bean should be loaded, for example different implementations of an interface, depending on the value of `myservice.implversion` being `a` or `b` or whatever other value.\r\n\r\nI&#39;d like to achieve the same effect with a user-friendlier annotation like such:\r\n\r\n```java\r\n@OnMyServiceVersion(value = &quot;a&quot;)\r\n@Service\r\npublic class MyServiceImplA implements MyService {\r\n   // ...\r\n}\r\n```\r\n\r\nHow can one do this?\r\n\r\n----\r\n\r\nI&#39;ve tried annotating my custom annotation with `@Conditional` and implementing the `Condition` interface but I don&#39;t understand how to check properties that way. The Spring-Boot `OnPropertyCondition extends SpringBootCondition` is not `public` so I cannot start from there, and extending annotations isn&#39;t allowed, so I&#39;m kind of stuck.\r\n\r\nI&#39;ve also tried the following with no success:\r\n\r\n```java\r\n// INVALID CODE, DO NOT USE\r\n@Target({ElementType.TYPE, ElementType.METHOD})\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@ConditionalOnProperty(\r\n    prefix = &quot;myservice&quot;,\r\n    name = &quot;implversion&quot;,\r\n    havingValue = OnMyServiceVersion.value()\r\n)\r\npublic @interface OnMyServiceVersion {\r\n    String value();\r\n}\r\n```","title":"How to create custom @ConditionalOnProperty for simpler usage?","body":"<p>In a Spring-Boot project, I use <code>@ConditionalOnProperty</code> to choose whether some Beans get loaded or not. It looks like the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ConditionalOnProperty(\n    prefix = &quot;myservice&quot;,\n    name = &quot;implversion&quot;,\n    havingValue = &quot;a&quot;\n)\n@Service\npublic class MyServiceImplA implements MyService {\n   // ...\n}\n</code></pre>\n<p>This allows me to choose with specific profiles which Bean should be loaded, for example different implementations of an interface, depending on the value of <code>myservice.implversion</code> being <code>a</code> or <code>b</code> or whatever other value.</p>\n<p>I'd like to achieve the same effect with a user-friendlier annotation like such:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@OnMyServiceVersion(value = &quot;a&quot;)\n@Service\npublic class MyServiceImplA implements MyService {\n   // ...\n}\n</code></pre>\n<p>How can one do this?</p>\n<hr />\n<p>I've tried annotating my custom annotation with <code>@Conditional</code> and implementing the <code>Condition</code> interface but I don't understand how to check properties that way. The Spring-Boot <code>OnPropertyCondition extends SpringBootCondition</code> is not <code>public</code> so I cannot start from there, and extending annotations isn't allowed, so I'm kind of stuck.</p>\n<p>I've also tried the following with no success:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// INVALID CODE, DO NOT USE\n@Target({ElementType.TYPE, ElementType.METHOD})\n@Retention(RetentionPolicy.RUNTIME)\n@ConditionalOnProperty(\n    prefix = &quot;myservice&quot;,\n    name = &quot;implversion&quot;,\n    havingValue = OnMyServiceVersion.value()\n)\npublic @interface OnMyServiceVersion {\n    String value();\n}\n</code></pre>\n"},{"tags":["java","linux","localhost"],"comments":[{"owner":{"account_id":12321033,"reputation":8782,"user_id":8990329,"accept_rate":70,"display_name":"Some Name"},"score":0,"creation_date":1550685355,"post_id":54792244,"comment_id":96363091,"body_markdown":"Check netstat of the running process. If the port is open chech strace output with (e.g.) telnet/curl to get the error description. If this does not help check what error returns `accept` syscall  (if any) on thr server side.","body":"Check netstat of the running process. If the port is open chech strace output with (e.g.) telnet/curl to get the error description. If this does not help check what error returns <code>accept</code> syscall  (if any) on thr server side."}],"answers":[{"comments":[{"owner":{"account_id":15233757,"reputation":45,"user_id":10992123,"display_name":"ZeSampaio"},"score":0,"creation_date":1550684483,"post_id":54792281,"comment_id":96362676,"body_markdown":"Just tried it, returned rules updated but still got the same error message","body":"Just tried it, returned rules updated but still got the same error message"},{"owner":{"account_id":14060884,"reputation":61,"user_id":10156984,"display_name":"Damian Willmer"},"score":0,"creation_date":1550684917,"post_id":54792281,"comment_id":96362876,"body_markdown":"It might be worth finding out if something is already using/blocking port 8082. alternatively you could make it listen on a different port?","body":"It might be worth finding out if something is already using/blocking port 8082. alternatively you could make it listen on a different port?"},{"owner":{"account_id":15233757,"reputation":45,"user_id":10992123,"display_name":"ZeSampaio"},"score":0,"creation_date":1550691048,"post_id":54792281,"comment_id":96365814,"body_markdown":"That&#39;s the thing Damian, It refuses access in almost all of the ports, the only ones that present different outcomes are 8080 and 8081 which still doesn&#39;t connect, but return a different error.","body":"That&#39;s the thing Damian, It refuses access in almost all of the ports, the only ones that present different outcomes are 8080 and 8081 which still doesn&#39;t connect, but return a different error."},{"owner":{"account_id":14060884,"reputation":61,"user_id":10156984,"display_name":"Damian Willmer"},"score":0,"creation_date":1550761439,"post_id":54792281,"comment_id":96396926,"body_markdown":"And the other ports that you have tried using you have allowed through the firewall? Port 8080 and 8082 are fairly common ports and may be used by something else?","body":"And the other ports that you have tried using you have allowed through the firewall? Port 8080 and 8082 are fairly common ports and may be used by something else?"}],"tags":[],"owner":{"account_id":14060884,"reputation":61,"user_id":10156984,"display_name":"Damian Willmer"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1550684276,"creation_date":1550684276,"answer_id":54792281,"question_id":54792244,"body_markdown":"As your using Ubuntu it might be your firewall not allowing connections to that port.\r\n\r\nOpen a terminal and type\r\n\r\n    sudo ufw allow 8082\r\n\r\nHopefully that helps","title":"Connection Refused, how to solve?","body":"<p>As your using Ubuntu it might be your firewall not allowing connections to that port.</p>\n\n<p>Open a terminal and type</p>\n\n<pre><code>sudo ufw allow 8082\n</code></pre>\n\n<p>Hopefully that helps</p>\n"},{"tags":[],"owner":{"account_id":15233757,"reputation":45,"user_id":10992123,"display_name":"ZeSampaio"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1550855603,"creation_date":1550855603,"answer_id":54832053,"question_id":54792244,"body_markdown":"Somehow after shytting everything down and restarting the machine, everything came back to normal, so... Don&#39;t know what happened, but it&#39;s all right now... It might&#39;ve been used by something else. Thanks anyways for the help!","title":"Connection Refused, how to solve?","body":"<p>Somehow after shytting everything down and restarting the machine, everything came back to normal, so... Don't know what happened, but it's all right now... It might've been used by something else. Thanks anyways for the help!</p>\n"}],"owner":{"account_id":15233757,"reputation":45,"user_id":10992123,"display_name":"ZeSampaio"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":286,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1665681951,"creation_date":1550684127,"question_id":54792244,"body_markdown":"I&#39;ve been working on a service with java tutorial, and was listening to it through localhost:8082. It was working just fine, but since I&#39;ve turned off the computer it returns the error connection refused when I try to listen to it, and the only ports that present different responses are 8080 and 8081, which get the same error when I try to listen to the service through them.\r\n\r\nHere&#39;s the code:\r\n\r\n    package io.vertx.book.message;\r\n\r\n    import io.vertx.core.json.JsonObject;\r\n    import io.vertx.rxjava.core.AbstractVerticle;\r\n    import io.vertx.rxjava.core.eventbus.Message;\r\n    import rx.Single;\r\n\r\n    public class HelloConsumerMicroservice extends AbstractVerticle {\r\n\r\n        @Override\r\n        public void start() {\r\n            vertx.createHttpServer()\r\n                .requestHandler(\r\n                    req -&gt; {\r\n                        Single&lt;JsonObject&gt; obs1 = vertx.eventBus()\r\n                            .&lt;JsonObject&gt;rxSend(&quot;hello&quot;, &quot;Luke&quot;)\r\n                            .map(Message::body);\r\n                        Single&lt;JsonObject&gt; obs2 = vertx.eventBus()\r\n                            .&lt;JsonObject&gt;rxSend(&quot;hello&quot;, &quot;Leia&quot;)\r\n                            .map(Message::body);\r\n\r\n                        Single\r\n                            .zip(obs1, obs2, (luke, leia) -&gt;\r\n                                new JsonObject()\r\n                                    .put(&quot;Luke&quot;, luke.getString(&quot;message&quot;)\r\n                                        + &quot; from &quot; + luke.getString(&quot;served-by&quot;))\r\n                                    .put(&quot;Leia&quot;, leia.getString(&quot;message&quot;)\r\n                                        + &quot; from &quot; + leia.getString(&quot;served-by&quot;))\r\n                            )\r\n                            .subscribe(\r\n                                x -&gt; req.response().end(x.encodePrettily()),\r\n                                t -&gt; req.response().setStatusCode(500).end(t.getMessage())\r\n                            );\r\n                    })\r\n                .listen(8082);\r\n        }\r\n\r\n    }\r\n\r\nThat&#39;s the response I&#39;ve got:  \r\n[![error returned][1]][1]\r\n\r\nI don&#39;t know why it stopped working, but I&#39;ve already browsed through a lot of answers and already tried cleaning my cache, but no improvements. Could anyone help?\r\n\r\nI&#39;m using Linux 18.04, Chrome/Firefox (both get connection refused).\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Dw05d.png","title":"Connection Refused, how to solve?","body":"<p>I've been working on a service with java tutorial, and was listening to it through localhost:8082. It was working just fine, but since I've turned off the computer it returns the error connection refused when I try to listen to it, and the only ports that present different responses are 8080 and 8081, which get the same error when I try to listen to the service through them.</p>\n<p>Here's the code:</p>\n<pre><code>package io.vertx.book.message;\n\nimport io.vertx.core.json.JsonObject;\nimport io.vertx.rxjava.core.AbstractVerticle;\nimport io.vertx.rxjava.core.eventbus.Message;\nimport rx.Single;\n\npublic class HelloConsumerMicroservice extends AbstractVerticle {\n\n    @Override\n    public void start() {\n        vertx.createHttpServer()\n            .requestHandler(\n                req -&gt; {\n                    Single&lt;JsonObject&gt; obs1 = vertx.eventBus()\n                        .&lt;JsonObject&gt;rxSend(&quot;hello&quot;, &quot;Luke&quot;)\n                        .map(Message::body);\n                    Single&lt;JsonObject&gt; obs2 = vertx.eventBus()\n                        .&lt;JsonObject&gt;rxSend(&quot;hello&quot;, &quot;Leia&quot;)\n                        .map(Message::body);\n\n                    Single\n                        .zip(obs1, obs2, (luke, leia) -&gt;\n                            new JsonObject()\n                                .put(&quot;Luke&quot;, luke.getString(&quot;message&quot;)\n                                    + &quot; from &quot; + luke.getString(&quot;served-by&quot;))\n                                .put(&quot;Leia&quot;, leia.getString(&quot;message&quot;)\n                                    + &quot; from &quot; + leia.getString(&quot;served-by&quot;))\n                        )\n                        .subscribe(\n                            x -&gt; req.response().end(x.encodePrettily()),\n                            t -&gt; req.response().setStatusCode(500).end(t.getMessage())\n                        );\n                })\n            .listen(8082);\n    }\n\n}\n</code></pre>\n<p>That's the response I've got:<br />\n<a href=\"https://i.stack.imgur.com/Dw05d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Dw05d.png\" alt=\"error returned\" /></a></p>\n<p>I don't know why it stopped working, but I've already browsed through a lot of answers and already tried cleaning my cache, but no improvements. Could anyone help?</p>\n<p>I'm using Linux 18.04, Chrome/Firefox (both get connection refused).</p>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":1338923,"reputation":1513,"user_id":1281029,"accept_rate":65,"display_name":"user1281029"},"score":0,"creation_date":1335361312,"post_id":10315886,"comment_id":13280540,"body_markdown":"Hi I tried that now the exception changed to java.lang.IllegalAccessException","body":"Hi I tried that now the exception changed to java.lang.IllegalAccessException"},{"owner":{"account_id":347037,"reputation":79658,"user_id":680925,"display_name":"Perception"},"score":0,"creation_date":1335380986,"post_id":10315886,"comment_id":13289240,"body_markdown":"Looks like you might have gotten around your problem already, but in any case see edits for how to get around the illegal access exception.","body":"Looks like you might have gotten around your problem already, but in any case see edits for how to get around the illegal access exception."}],"tags":[],"owner":{"account_id":347037,"reputation":79658,"user_id":680925,"display_name":"Perception"},"comment_count":2,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1335380957,"creation_date":1335357841,"answer_id":10315886,"question_id":10315614,"body_markdown":"From the [Javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getField(java.lang.String)) for `Class.getField(...)`:\r\n\r\n&gt; Returns a Field object that reflects the specified public member field\r\n&gt; of the class or interface represented by this Class object. The name\r\n&gt; parameter is a String specifying the simple name of the desired field.\r\n&gt; The field to be reflected is determined by the algorithm that follows.\r\n&gt; Let C be the class represented by this object:\r\n&gt; \r\n&gt; If C declares a public field with the name specified, that is the\r\n&gt; field to be reflected. If no field was found in step 1 above, this\r\n&gt; algorithm is applied recursively to each direct superinterface of C.\r\n&gt; The direct superinterfaces are searched in the order they were\r\n&gt; declared. If no field was found in steps 1 and 2 above, and C has a\r\n&gt; superclass S, then this algorithm is invoked recursively upon S. If C\r\n&gt; has no superclass, then a NoSuchFieldException is thrown. See The Java\r\n&gt; Language Specification, sections 8.2 and 8.3.\r\n\r\nIf the field you are trying to retrieve via:\r\n\r\n    studyplanCategory.getClass().getField(filterProperty)\r\n\r\nis private, then you will get a `NoSuchFieldException`. For private fields, try this instead:\r\n\r\n    studyplanCategory.getClass().getDeclaredField(filterProperty)\r\n\r\nAnd to get around potential illegal access exceptions when setting values via a field this way:\r\n\r\n    Field field = studyplanCategory.getClass().getDeclaredField(filterProperty);\r\n    field.setAccessible(true);\r\n    field.get(studyplanCategory);\r\n\r\n","title":"NoSuchFieldException on getClass().getField()","body":"<p>From the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getField(java.lang.String)\" rel=\"noreferrer\">Javadoc</a> for <code>Class.getField(...)</code>:</p>\n\n<blockquote>\n  <p>Returns a Field object that reflects the specified public member field\n  of the class or interface represented by this Class object. The name\n  parameter is a String specifying the simple name of the desired field.\n  The field to be reflected is determined by the algorithm that follows.\n  Let C be the class represented by this object:</p>\n  \n  <p>If C declares a public field with the name specified, that is the\n  field to be reflected. If no field was found in step 1 above, this\n  algorithm is applied recursively to each direct superinterface of C.\n  The direct superinterfaces are searched in the order they were\n  declared. If no field was found in steps 1 and 2 above, and C has a\n  superclass S, then this algorithm is invoked recursively upon S. If C\n  has no superclass, then a NoSuchFieldException is thrown. See The Java\n  Language Specification, sections 8.2 and 8.3.</p>\n</blockquote>\n\n<p>If the field you are trying to retrieve via:</p>\n\n<pre><code>studyplanCategory.getClass().getField(filterProperty)\n</code></pre>\n\n<p>is private, then you will get a <code>NoSuchFieldException</code>. For private fields, try this instead:</p>\n\n<pre><code>studyplanCategory.getClass().getDeclaredField(filterProperty)\n</code></pre>\n\n<p>And to get around potential illegal access exceptions when setting values via a field this way:</p>\n\n<pre><code>Field field = studyplanCategory.getClass().getDeclaredField(filterProperty);\nfield.setAccessible(true);\nfield.get(studyplanCategory);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1338923,"reputation":1513,"user_id":1281029,"accept_rate":65,"display_name":"user1281029"},"score":0,"creation_date":1335362676,"post_id":10315914,"comment_id":13281203,"body_markdown":"Hi But I got the exception even when trying protected.The Exception occured atjava.lang.IllegalAccessException: Class com.buddhiedge.server.model.StudyPlanLazyDataModel can not access a member of class com.buddhiedge.server.entity.StudyplanCategory with modifiers &quot;protected&quot;","body":"Hi But I got the exception even when trying protected.The Exception occured atjava.lang.IllegalAccessException: Class com.buddhiedge.server.model.StudyPlanLazyDataModel can not access a member of class com.buddhiedge.server.entity.StudyplanCategory with modifiers &quot;protected&quot;"},{"owner":{"account_id":1338923,"reputation":1513,"user_id":1281029,"accept_rate":65,"display_name":"user1281029"},"score":0,"creation_date":1335364494,"post_id":10315914,"comment_id":13282083,"body_markdown":"Hi Its working public access specifier, though it is against the priciples that we should keep member fields of DATABASE TABLE(in this case) as private.","body":"Hi Its working public access specifier, though it is against the priciples that we should keep member fields of DATABASE TABLE(in this case) as private."},{"owner":{"account_id":1402992,"reputation":33402,"user_id":1331415,"accept_rate":57,"display_name":"Simon Dorociak"},"score":0,"creation_date":1335386583,"post_id":10315914,"comment_id":13291399,"body_markdown":"Man i had same problem but when a changed attributes to protected so IllegalAccessEception message wasn&#39;t more shown. So try change it to public. it should work. Perception already wrote solution like field.setAccessible(true); But later, try to do it in your backing bean class, in @PostConstruct you will create new LazyDataModel class and there u create statement for your database already with filter and statement will return to you filtered data, it&#39;s &quot;lazy loading&quot;.","body":"Man i had same problem but when a changed attributes to protected so IllegalAccessEception message wasn&#39;t more shown. So try change it to public. it should work. Perception already wrote solution like field.setAccessible(true); But later, try to do it in your backing bean class, in @PostConstruct you will create new LazyDataModel class and there u create statement for your database already with filter and statement will return to you filtered data, it&#39;s &quot;lazy loading&quot;."}],"tags":[],"owner":{"account_id":1402992,"reputation":33402,"user_id":1331415,"accept_rate":57,"display_name":"Simon Dorociak"},"comment_count":3,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1335357939,"creation_date":1335357939,"answer_id":10315914,"question_id":10315614,"body_markdown":"App fires up this exception because its doesn&#39;t see attribudes your want to give back.\r\nMethod getField() return non-private attribudes so if your attribudes are private, method doesn&#39;t see them. You can check http://docs.oracle.com/javase/tutorial/reflect/member/fieldTrouble.html\r\n\r\nSo you can do that your attribudes will change on protected or public and then should work it right. But this way (its same like example on primefaces) simulate real database.\r\n\r\n    public List&lt;Car&gt; load(int first, int pageSize, String sortField, SortOrder sortOrder, Map&lt;String,String&gt; filters) {  \r\n            List&lt;Car&gt; data = new ArrayList&lt;Car&gt;();  \r\n      \r\n            //filter  \r\n            for(Car car : datasource) {  \r\n                boolean match = true;  \r\n      \r\n                for(Iterator&lt;String&gt; it = filters.keySet().iterator(); it.hasNext();) {  \r\n                    try {  \r\n                        String filterProperty = it.next();  \r\n                        String filterValue = filters.get(filterProperty);  \r\n                        String fieldValue = String.valueOf(car.getClass().getField(filterProperty).get(car));  \r\n      \r\n    ...\r\n\r\nSo this list simulate real database only for example. If you want to use it. so you shoud do it on backing bean class and there do it. You open connection already with some filter or don&#39;t and then return data from database.\r\n\r\n//EDIT: Man wrote that you should use getDeclaredField() but i did try this and it didn&#39;t work well, and throws up IlegalAccessException. When a pretype attribudes to protected, it works fine. I don&#39;t know why.","title":"NoSuchFieldException on getClass().getField()","body":"<p>App fires up this exception because its doesn't see attribudes your want to give back.\nMethod getField() return non-private attribudes so if your attribudes are private, method doesn't see them. You can check <a href=\"http://docs.oracle.com/javase/tutorial/reflect/member/fieldTrouble.html\">http://docs.oracle.com/javase/tutorial/reflect/member/fieldTrouble.html</a></p>\n\n<p>So you can do that your attribudes will change on protected or public and then should work it right. But this way (its same like example on primefaces) simulate real database.</p>\n\n<pre><code>public List&lt;Car&gt; load(int first, int pageSize, String sortField, SortOrder sortOrder, Map&lt;String,String&gt; filters) {  \n        List&lt;Car&gt; data = new ArrayList&lt;Car&gt;();  \n\n        //filter  \n        for(Car car : datasource) {  \n            boolean match = true;  \n\n            for(Iterator&lt;String&gt; it = filters.keySet().iterator(); it.hasNext();) {  \n                try {  \n                    String filterProperty = it.next();  \n                    String filterValue = filters.get(filterProperty);  \n                    String fieldValue = String.valueOf(car.getClass().getField(filterProperty).get(car));  \n\n...\n</code></pre>\n\n<p>So this list simulate real database only for example. If you want to use it. so you shoud do it on backing bean class and there do it. You open connection already with some filter or don't and then return data from database.</p>\n\n<p>//EDIT: Man wrote that you should use getDeclaredField() but i did try this and it didn't work well, and throws up IlegalAccessException. When a pretype attribudes to protected, it works fine. I don't know why.</p>\n"},{"tags":[],"owner":{"account_id":4435143,"reputation":99,"user_id":3611179,"display_name":"Murali Krishna Valluri"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1399450663,"creation_date":1399449363,"answer_id":23511989,"question_id":10315614,"body_markdown":"Best solutions for `getClass().getField()` problem are:\r\n\r\nUse **getDeclaredField**() instead of **getField**()\r\n\r\n1) \r\n\r\n    String propertyName = &quot;test&quot;;&lt;br/&gt;\r\n    Class.forName(this.getClass().getName()).getDeclaredField(propertyName);\r\n\r\n2) \r\n\r\n    String propertyName = &quot;name&quot;;&lt;br/&gt;\r\n    Replace **&quot;HelloWorld&quot;** with your class name&lt;br/&gt;\r\n    HelloWorld.class.getDeclaredField(propertyName)\r\n\r\n \r\n\r\n","title":"NoSuchFieldException on getClass().getField()","body":"<p>Best solutions for <code>getClass().getField()</code> problem are:</p>\n\n<p>Use <strong>getDeclaredField</strong>() instead of <strong>getField</strong>()</p>\n\n<p>1) </p>\n\n<pre><code>String propertyName = \"test\";&lt;br/&gt;\nClass.forName(this.getClass().getName()).getDeclaredField(propertyName);\n</code></pre>\n\n<p>2) </p>\n\n<pre><code>String propertyName = \"name\";&lt;br/&gt;\nReplace **\"HelloWorld\"** with your class name&lt;br/&gt;\nHelloWorld.class.getDeclaredField(propertyName)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2380414,"reputation":5075,"user_id":2082559,"accept_rate":40,"display_name":"Muhamed Riyas M"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1489926871,"creation_date":1489926871,"answer_id":42886633,"question_id":10315614,"body_markdown":"I had faced the same problem. My issue was my variables are not **public** . Make sure your class variables are **public**\r\n\r\n      private Object getVariableValue(Object clazz, String variableName) {\r\n        try {\r\n            Field field = clazz.getClass().getField(variableName);\r\n            return field.get(clazz);\r\n        } catch (NoSuchFieldException e) {\r\n            return &quot;&quot;;\r\n        } catch (IllegalAccessException e) {\r\n            return &quot;&quot;;\r\n        }\r\n\r\n    }","title":"NoSuchFieldException on getClass().getField()","body":"<p>I had faced the same problem. My issue was my variables are not <strong>public</strong> . Make sure your class variables are <strong>public</strong></p>\n\n<pre><code>  private Object getVariableValue(Object clazz, String variableName) {\n    try {\n        Field field = clazz.getClass().getField(variableName);\n        return field.get(clazz);\n    } catch (NoSuchFieldException e) {\n        return \"\";\n    } catch (IllegalAccessException e) {\n        return \"\";\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17804992,"reputation":307,"user_id":12930883,"display_name":"RED-ONE"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665681569,"creation_date":1665681569,"answer_id":74059566,"question_id":10315614,"body_markdown":"I agree that we should Use getDeclaredField() instead of getField()\r\n\r\n     private Field getOwnProperty(Object clazz, String propertyName) {\r\n        try {\r\n            return clazz.getClass().getDeclaredField(propertyName);\r\n        } catch (NoSuchFieldException e) {\r\n            log.warn( &quot;Object has no property :  &quot; + propertyName );\r\n            return null;\r\n        }\r\n    }","title":"NoSuchFieldException on getClass().getField()","body":"<p>I agree that we should Use getDeclaredField() instead of getField()</p>\n<pre><code> private Field getOwnProperty(Object clazz, String propertyName) {\n    try {\n        return clazz.getClass().getDeclaredField(propertyName);\n    } catch (NoSuchFieldException e) {\n        log.warn( &quot;Object has no property :  &quot; + propertyName );\n        return null;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1338923,"reputation":1513,"user_id":1281029,"accept_rate":65,"display_name":"user1281029"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22285,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":10315914,"answer_count":5,"score":6,"last_activity_date":1665681569,"creation_date":1335356895,"question_id":10315614,"body_markdown":"    java.lang.NoSuchFieldException: id\r\nThe below line is creating the exception.\r\n\t\t                    \r\n    String fieldValue =String.valueOf(studyplanCategory.getClass().getField(filterProperty).get(studyplanCategory)); \r\n\r\nstudyplanCategory is a valid object and has got actual values. Beacuse of this exception the load method and the search function in the LazyLoading DataTable of my JSF webapp is not working.\r\n","title":"NoSuchFieldException on getClass().getField()","body":"<pre><code>java.lang.NoSuchFieldException: id\n</code></pre>\n\n<p>The below line is creating the exception.</p>\n\n<pre><code>String fieldValue =String.valueOf(studyplanCategory.getClass().getField(filterProperty).get(studyplanCategory)); \n</code></pre>\n\n<p>studyplanCategory is a valid object and has got actual values. Beacuse of this exception the load method and the search function in the LazyLoading DataTable of my JSF webapp is not working.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":4572248,"reputation":1077,"user_id":3711660,"display_name":"Toumash"},"score":0,"creation_date":1435692802,"post_id":31146611,"comment_id":50304179,"body_markdown":"Basically - you cannot set the picture of not showin activity. Why it is not showing? You are opening next Activity miliseconds after start of the download process. You **must** change the architecture/workflow","body":"Basically - you cannot set the picture of not showin activity. Why it is not showing? You are opening next Activity miliseconds after start of the download process. You <b>must</b> change the architecture/workflow"},{"owner":{"account_id":6552999,"reputation":133,"user_id":5066703,"display_name":"Krim"},"score":0,"creation_date":1435693165,"post_id":31146611,"comment_id":50304386,"body_markdown":"Does it means that i have to remove splash?","body":"Does it means that i have to remove splash?"},{"owner":{"account_id":4572248,"reputation":1077,"user_id":3711660,"display_name":"Toumash"},"score":0,"creation_date":1435693273,"post_id":31146611,"comment_id":50304440,"body_markdown":"How the splash is working? Is it just diplaying for a couple of seconds and then calls `finish()` so this activity gets back on the screen? If so just move 2 last lines from onCreate to onPostExecute","body":"How the splash is working? Is it just diplaying for a couple of seconds and then calls <code>finish()</code> so this activity gets back on the screen? If so just move 2 last lines from onCreate to onPostExecute"},{"owner":{"account_id":6552999,"reputation":133,"user_id":5066703,"display_name":"Krim"},"score":0,"creation_date":1435696463,"post_id":31146611,"comment_id":50306274,"body_markdown":"06-30 13:32:09.311  18581-18581/com.downloader.newlevel.krim.newleveldownloader E/OpenGLRenderer﹕ SFEffectCache:clear(), mSize = 0\n06-30 13:32:12.024  18581-20444/com.downloader.newlevel.krim.newleveldownloader E/Error﹕ https://photos-4.dropbox.com/t/2/AAAxrzwz2B32dmtjRTNlT1vhQfVd5JuglMkbVV_m8BRkLg/12/145533347/png/32x32/1/_/1/2/Hourglass%20Addon%20by%20Redstone.png/CKPTskUgASACIAMgBCAFIAYgBygBKAI/Jpa4t4f3nMDieOULhjrmus_8mVpqVO37XxrQYkzMoSo?size=800x600&amp;size_mode=2","body":"06-30 13:32:09.311  18581-18581/com.downloader.newlevel.krim.newleveldownloader E/OpenGLRenderer﹕ SFEffectCache:clear(), mSize = 0 06-30 13:32:12.024  18581-20444/com.downloader.newlevel.krim.newleveldownloader E/Error﹕ <a href=\"https://photos-4.dropbox.com/t/2/AAAxrzwz2B32dmtjRTNlT1vhQfVd5JuglMkbVV_m8BRkLg/12/145533347/png/32x32/1/_/1/2/Hourglass%20Addon%20by%20Redstone.png/CKPTskUgASACIAMgBCAFIAYgBygBKAI/Jpa4t4f3nMDieOULhjrmus_8mVpqVO37XxrQYkzMoSo?size=800x600&amp;size_mode=2\" rel=\"nofollow noreferrer\">photos-4.dropbox.com/t/2/&hellip;</a>"},{"owner":{"account_id":6552999,"reputation":133,"user_id":5066703,"display_name":"Krim"},"score":0,"creation_date":1435696527,"post_id":31146611,"comment_id":50306317,"body_markdown":"My splash works with handler and it does not related to splash because i have removed it and still did not worked","body":"My splash works with handler and it does not related to splash because i have removed it and still did not worked"},{"owner":{"account_id":4572248,"reputation":1077,"user_id":3711660,"display_name":"Toumash"},"score":0,"creation_date":1435696702,"post_id":31146611,"comment_id":50306409,"body_markdown":"DId you removed the call to the splash or handler?","body":"DId you removed the call to the splash or handler?"},{"owner":{"account_id":6552999,"reputation":133,"user_id":5066703,"display_name":"Krim"},"score":0,"creation_date":1435701767,"post_id":31146611,"comment_id":50308773,"body_markdown":"Yeah I removed last 2 lines from onCreate()","body":"Yeah I removed last 2 lines from onCreate()"}],"answers":[{"tags":[],"owner":{"account_id":6552999,"reputation":133,"user_id":5066703,"display_name":"Krim"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1444888619,"creation_date":1444875838,"answer_id":33138782,"question_id":31146611,"body_markdown":"&quot;ViewRootImpl #2 Surface is not valid.&quot; in logcat means something went wrong in layout. I fixed mine by writing whole layout again...to make sure everything is okay :)\r\nSplash screen had nothing to do with this error","title":"Android Displaying image - Surface is not valid","body":"<p>\"ViewRootImpl #2 Surface is not valid.\" in logcat means something went wrong in layout. I fixed mine by writing whole layout again...to make sure everything is okay :)\nSplash screen had nothing to do with this error</p>\n"},{"tags":[],"owner":{"account_id":5346073,"reputation":1082,"user_id":4261600,"accept_rate":100,"display_name":"6rchid"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1558463889,"creation_date":1558463889,"answer_id":56244514,"question_id":31146611,"body_markdown":"I&#39;m not entirely convinced your ImageView belongs to the layout in which you set the content view to.\r\n\r\nDouble check if that layout is correct, because this error occurs when you execute `findViewById` without inflating the parent layout view first with `setContentView` or with `LayoutInflator`. ","title":"Android Displaying image - Surface is not valid","body":"<p>I'm not entirely convinced your ImageView belongs to the layout in which you set the content view to.</p>\n\n<p>Double check if that layout is correct, because this error occurs when you execute <code>findViewById</code> without inflating the parent layout view first with <code>setContentView</code> or with <code>LayoutInflator</code>. </p>\n"},{"tags":[],"owner":{"account_id":25477220,"reputation":1,"user_id":19274241,"display_name":"Harshita Aggarwal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654415629,"creation_date":1654415629,"answer_id":72505672,"question_id":31146611,"body_markdown":"Me too faced the same issue, later I saw that I had made a .xml in res/values during renaming my cardView ids bcoz of which I was facing error, after i deleted that file, my app ran smoothly.  ","title":"Android Displaying image - Surface is not valid","body":"<p>Me too faced the same issue, later I saw that I had made a .xml in res/values during renaming my cardView ids bcoz of which I was facing error, after i deleted that file, my app ran smoothly.</p>\n"}],"owner":{"account_id":6552999,"reputation":133,"user_id":5066703,"display_name":"Krim"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17292,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":33138782,"answer_count":3,"score":4,"last_activity_date":1665681389,"creation_date":1435691878,"question_id":31146611,"body_markdown":"    06-30 11:59:40.153  27202-27202/com.downloader.newlevel.krim.newleveldownloader E/ViewSystem﹕ ViewRootImpl #2 Surface is not valid.\r\n    06-30 11:59:41.114  27202-27216/com.downloader.newlevel.krim.newleveldownloader E/Error﹕ https://photos-4.dropbox.com/t/2/AAAxrzwz2B32dmtjRTNlT1vhQfVd5JuglMkbVV_m8BRkLg/12/145533347/png/32x32/1/_/1/2/Hourglass%20Addon%20by%20Redstone.png/CKPTskUgASACIAMgBCAFIAYgBygBKAI/Jpa4t4f3nMDieOULhjrmus_8mVpqVO37XxrQYkzMoSo?size=800x600&amp;size_mode=2\r\n    06-30 12:00:57.429  27202-27202/com.downloader.newlevel.krim.newleveldownloader E/ViewSystem﹕ ViewRootImpl #2 Surface is not valid.\r\n    06-30 12:00:58.219  27202-27755/com.downloader.newlevel.krim.newleveldownloader E/Error﹕ https://photos-4.dropbox.com/t/2/AAAxrzwz2B32dmtjRTNlT1vhQfVd5JuglMkbVV_m8BRkLg/12/145533347/png/32x32/1/_/1/2/Hourglass%20Addon%20by%20Redstone.png/CKPTskUgASACIAMgBCAFIAYgBygBKAI/Jpa4t4f3nMDieOULhjrmus_8mVpqVO37XxrQYkzMoSo?size=800x600&amp;size_mode=2\r\n\r\nThis was found in my logcat, I am currently working on loading image from url.\r\n\r\nActivity\r\n---------------\r\n\r\n            package com.downloader.newlevel.krim.newleveldownloader;\r\n\r\n            import android.content.Intent;\r\n            import android.graphics.Bitmap;\r\n            import android.graphics.BitmapFactory;\r\n            import android.os.AsyncTask;\r\n            import android.os.Bundle;\r\n            import android.support.v7.app.ActionBarActivity;\r\n            import android.util.Log;\r\n            import android.view.Menu;\r\n            import android.view.MenuItem;\r\n            import android.widget.ImageView;\r\n\r\n            import java.io.InputStream;\r\n\r\n\r\n            public class activity00 extends ActionBarActivity {\r\n\r\n                @Override\r\n                protected void onCreate(Bundle savedInstanceState) {\r\n                    super.onCreate(savedInstanceState);\r\n                    setContentView(R.layout.activity00);\r\n                    String url000 = &quot;https://photos-4.dropbox.com/t/2/AAAxrzwz2B32dmtjRTNlT1vhQfVd5JuglMkbVV_m8BRkLg/12/145533347/png/32x32/1/_/1/2/Hourglass%20Addon%20by%20Redstone.png/CKPTskUgASACIAMgBCAFIAYgBygBKAI/Jpa4t4f3nMDieOULhjrmus_8mVpqVO37XxrQYkzMoSo?size=800x600&amp;size_mode=2&quot;;\r\n                    new DownloadImageTask((ImageView) findViewById(R.id.image_main00)).execute(url000);\r\n        Intent splash = new Intent(this, splash_activity.class);\r\n        startActivity(splash);\r\n    }\r\n\r\n    @Override\r\n    public boolean onCreateOptionsMenu(Menu menu) {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        getMenuInflater().inflate(R.menu.settings, menu);\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean onOptionsItemSelected(MenuItem item) {\r\n        // Handle action bar item clicks here. The action bar will\r\n        // automatically handle clicks on the Home/Up button, so long\r\n        // as you specify a parent activity in AndroidManifest.xml.\r\n        int id = item.getItemId();\r\n\r\n        //noinspection SimplifiableIfStatement\r\n        if (id == R.id.action_search) {\r\n            return true;\r\n        }\r\n\r\n        return super.onOptionsItemSelected(item);\r\n    }\r\n    }\r\n\r\nAsyncTask downloading image\r\n----------\r\n\r\n\r\n    class DownloadImageTask extends AsyncTask&lt;String, Void, Bitmap&gt; {\r\n        ImageView bmImage;\r\n\r\n        public DownloadImageTask(ImageView bmImage) {\r\n            this.bmImage = bmImage;\r\n        }\r\n\r\n        protected Bitmap doInBackground(String... urls) {\r\n            String urldisplay = urls[0];\r\n            Bitmap mIcon11 = null;\r\n            try {\r\n                InputStream in = new java.net.URL(urldisplay).openStream();\r\n                mIcon11 = BitmapFactory.decodeStream(in);\r\n            } catch (Exception e) {\r\n                Log.e(&quot;Error&quot;, e.getMessage());\r\n                e.printStackTrace();\r\n            }\r\n            return mIcon11;\r\n        }\r\n\r\n        protected void onPostExecute(Bitmap result) {\r\n            bmImage.setImageBitmap(result);\r\n        }\r\n     }\r\n\r\n\r\nLayout\r\n--------------\r\n\r\n\r\n    &lt;ScrollView\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:id=&quot;@+id/scrollView&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        xmlns:cardview=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        tools:context=&quot;.activity00&quot;\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n\r\n        &lt;RelativeLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginTop=&quot;10dp&quot;\r\n            android:layout_marginLeft=&quot;10dp&quot;\r\n            android:layout_marginRight=&quot;10dp&quot;\r\n            android:orientation=&quot;horizontal&quot;&gt;\r\n\r\n            &lt;TableLayout\r\n                android:id=&quot;@+id/tableLayout_main00&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:stretchColumns=&quot;*&quot;&gt;\r\n                &lt;TableRow&gt;\r\n                    &lt;Button\r\n                        android:text=&quot;Script&quot;\r\n                        android:textAllCaps=&quot;false&quot;\r\n                        android:background=&quot;#ffffff&quot;/&gt;\r\n                    &lt;Button\r\n                        android:text=&quot;Add-on&quot;\r\n                        android:textAllCaps=&quot;false&quot;\r\n                        android:background=&quot;#fffffa6a&quot;/&gt;\r\n                &lt;/TableRow&gt; &lt;TableRow&gt;\r\n                &lt;Button\r\n                    android:text=&quot;Map&quot;\r\n                    android:textAllCaps=&quot;false&quot;\r\n                    android:background=&quot;#ff6ec0ff&quot;/&gt;\r\n                &lt;Button\r\n                    android:text=&quot;Skin&quot;\r\n                    android:textAllCaps=&quot;false&quot;\r\n                    android:background=&quot;#ffff6d66&quot;/&gt;\r\n            &lt;/TableRow&gt; &lt;TableRow&gt;\r\n                &lt;Button\r\n                    android:text=&quot;Texture Pack&quot;\r\n                    android:textAllCaps=&quot;false&quot;/&gt;\r\n                &lt;Button\r\n                    android:text=&quot;Coming Soon&quot;\r\n                    android:textAllCaps=&quot;false&quot;/&gt;\r\n            &lt;/TableRow&gt;\r\n            &lt;/TableLayout&gt;\r\n\r\n            &lt;TextView\r\n                android:id=&quot;@+id/text_main00&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;New&quot;\r\n                android:textSize=&quot;20sp&quot;\r\n                android:layout_below=&quot;@+id/tableLayout_main00&quot;\r\n                android:clickable=&quot;true&quot;\r\n                android:gravity=&quot;right&quot;\r\n                android:layout_marginTop=&quot;20dp&quot;/&gt;\r\n\r\n            &lt;android.support.v7.widget.CardView\r\n                android:id=&quot;@+id/cardview_main00&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                cardview:cardCornerRadius=&quot;4dp&quot;\r\n                android:layout_below=&quot;@+id/text_main00&quot;\r\n                android:clickable=&quot;true&quot;\r\n                android:layout_marginTop=&quot;5dp&quot;&gt;\r\n\r\n                &lt;ImageView\r\n                    android:id=&quot;@+id/image_main00&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:scaleType=&quot;fitStart&quot;/&gt;\r\n\r\n                &lt;TextView\r\n                    android:id=&quot;@+id/text_main_cardview00&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:text=&quot;Hourglass Addon by Redstone&quot;\r\n                    android:layout_gravity=&quot;bottom&quot;/&gt;\r\n\r\n            &lt;/android.support.v7.widget.CardView&gt;\r\n\r\n            &lt;TextView\r\n                android:id=&quot;@+id/text_main01&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;Popular&quot;\r\n                android:textSize=&quot;20sp&quot;\r\n                android:layout_below=&quot;@+id/cardview_main00&quot;\r\n                android:clickable=&quot;true&quot;\r\n                android:gravity=&quot;right&quot;\r\n                android:layout_marginTop=&quot;10dp&quot;/&gt;\r\n\r\n            &lt;android.support.v7.widget.CardView\r\n                android:layout_below=&quot;@+id/text_main01&quot;\r\n                android:id=&quot;@+id/cardview_main01&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                cardview:cardCornerRadius=&quot;4dp&quot;\r\n                android:clickable=&quot;true&quot;\r\n                android:layout_marginTop=&quot;5dp&quot;&gt;\r\n\r\n                &lt;ImageView\r\n                    android:id=&quot;@+id/image_main01&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:scaleType=&quot;fitStart&quot;/&gt;\r\n\r\n                &lt;TextView\r\n                    android:id=&quot;@+id/text_main_cardview01&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:text=&quot;Armor Display by Chan&quot;\r\n                    android:layout_gravity=&quot;bottom&quot;/&gt;\r\n\r\n            &lt;/android.support.v7.widget.CardView&gt;\r\n\r\n            &lt;TextView\r\n                android:id=&quot;@+id/text_main02&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;Coming Soon&quot;\r\n                android:textSize=&quot;20sp&quot;\r\n                android:layout_below=&quot;@+id/cardview_main01&quot;\r\n                android:clickable=&quot;true&quot;\r\n                android:gravity=&quot;right&quot;\r\n                android:layout_marginTop=&quot;10dp&quot;/&gt;\r\n\r\n            &lt;android.support.v7.widget.CardView\r\n                android:layout_below=&quot;@+id/text_main02&quot;\r\n                android:id=&quot;@+id/cardview_main02&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                cardview:cardCornerRadius=&quot;4dp&quot;\r\n                android:clickable=&quot;true&quot;\r\n                android:layout_marginTop=&quot;5dp&quot;&gt;\r\n\r\n                &lt;ImageView\r\n                    android:id=&quot;@+id/image_main02&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:scaleType=&quot;fitStart&quot;/&gt;\r\n\r\n                &lt;TextView\r\n                    android:id=&quot;@+id/text_main_cardview02&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:text=&quot;PortalPX by TM&quot;\r\n                    android:layout_above=&quot;@+id/text_main_cardview22&quot;/&gt;\r\n\r\n                &lt;TextView\r\n                    android:id=&quot;@+id/text_main_cardview22&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:text=&quot;Limited Edition: Cabon Version&quot;\r\n                    android:layout_gravity=&quot;bottom&quot;/&gt;\r\n\r\n\r\n            &lt;/android.support.v7.widget.CardView&gt;\r\n\r\n\r\n        &lt;/RelativeLayout&gt;\r\n\r\n    &lt;/ScrollView&gt;\r\nI don&#39;t know why this logcat appeared. Can anyone explain and solve it please?","title":"Android Displaying image - Surface is not valid","body":"<pre><code>06-30 11:59:40.153  27202-27202/com.downloader.newlevel.krim.newleveldownloader E/ViewSystem﹕ ViewRootImpl #2 Surface is not valid.\n06-30 11:59:41.114  27202-27216/com.downloader.newlevel.krim.newleveldownloader E/Error﹕ https://photos-4.dropbox.com/t/2/AAAxrzwz2B32dmtjRTNlT1vhQfVd5JuglMkbVV_m8BRkLg/12/145533347/png/32x32/1/_/1/2/Hourglass%20Addon%20by%20Redstone.png/CKPTskUgASACIAMgBCAFIAYgBygBKAI/Jpa4t4f3nMDieOULhjrmus_8mVpqVO37XxrQYkzMoSo?size=800x600&amp;size_mode=2\n06-30 12:00:57.429  27202-27202/com.downloader.newlevel.krim.newleveldownloader E/ViewSystem﹕ ViewRootImpl #2 Surface is not valid.\n06-30 12:00:58.219  27202-27755/com.downloader.newlevel.krim.newleveldownloader E/Error﹕ https://photos-4.dropbox.com/t/2/AAAxrzwz2B32dmtjRTNlT1vhQfVd5JuglMkbVV_m8BRkLg/12/145533347/png/32x32/1/_/1/2/Hourglass%20Addon%20by%20Redstone.png/CKPTskUgASACIAMgBCAFIAYgBygBKAI/Jpa4t4f3nMDieOULhjrmus_8mVpqVO37XxrQYkzMoSo?size=800x600&amp;size_mode=2\n</code></pre>\n\n<p>This was found in my logcat, I am currently working on loading image from url.</p>\n\n<h2>Activity</h2>\n\n<pre><code>        package com.downloader.newlevel.krim.newleveldownloader;\n\n        import android.content.Intent;\n        import android.graphics.Bitmap;\n        import android.graphics.BitmapFactory;\n        import android.os.AsyncTask;\n        import android.os.Bundle;\n        import android.support.v7.app.ActionBarActivity;\n        import android.util.Log;\n        import android.view.Menu;\n        import android.view.MenuItem;\n        import android.widget.ImageView;\n\n        import java.io.InputStream;\n\n\n        public class activity00 extends ActionBarActivity {\n\n            @Override\n            protected void onCreate(Bundle savedInstanceState) {\n                super.onCreate(savedInstanceState);\n                setContentView(R.layout.activity00);\n                String url000 = \"https://photos-4.dropbox.com/t/2/AAAxrzwz2B32dmtjRTNlT1vhQfVd5JuglMkbVV_m8BRkLg/12/145533347/png/32x32/1/_/1/2/Hourglass%20Addon%20by%20Redstone.png/CKPTskUgASACIAMgBCAFIAYgBygBKAI/Jpa4t4f3nMDieOULhjrmus_8mVpqVO37XxrQYkzMoSo?size=800x600&amp;size_mode=2\";\n                new DownloadImageTask((ImageView) findViewById(R.id.image_main00)).execute(url000);\n    Intent splash = new Intent(this, splash_activity.class);\n    startActivity(splash);\n}\n\n@Override\npublic boolean onCreateOptionsMenu(Menu menu) {\n    // Inflate the menu; this adds items to the action bar if it is present.\n    getMenuInflater().inflate(R.menu.settings, menu);\n    return true;\n}\n\n@Override\npublic boolean onOptionsItemSelected(MenuItem item) {\n    // Handle action bar item clicks here. The action bar will\n    // automatically handle clicks on the Home/Up button, so long\n    // as you specify a parent activity in AndroidManifest.xml.\n    int id = item.getItemId();\n\n    //noinspection SimplifiableIfStatement\n    if (id == R.id.action_search) {\n        return true;\n    }\n\n    return super.onOptionsItemSelected(item);\n}\n}\n</code></pre>\n\n<h2>AsyncTask downloading image</h2>\n\n<pre><code>class DownloadImageTask extends AsyncTask&lt;String, Void, Bitmap&gt; {\n    ImageView bmImage;\n\n    public DownloadImageTask(ImageView bmImage) {\n        this.bmImage = bmImage;\n    }\n\n    protected Bitmap doInBackground(String... urls) {\n        String urldisplay = urls[0];\n        Bitmap mIcon11 = null;\n        try {\n            InputStream in = new java.net.URL(urldisplay).openStream();\n            mIcon11 = BitmapFactory.decodeStream(in);\n        } catch (Exception e) {\n            Log.e(\"Error\", e.getMessage());\n            e.printStackTrace();\n        }\n        return mIcon11;\n    }\n\n    protected void onPostExecute(Bitmap result) {\n        bmImage.setImageBitmap(result);\n    }\n }\n</code></pre>\n\n<h2>Layout</h2>\n\n<pre><code>&lt;ScrollView\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:id=\"@+id/scrollView\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    xmlns:cardview=\"http://schemas.android.com/apk/res-auto\"\n    tools:context=\".activity00\"\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n\n    &lt;RelativeLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"10dp\"\n        android:layout_marginLeft=\"10dp\"\n        android:layout_marginRight=\"10dp\"\n        android:orientation=\"horizontal\"&gt;\n\n        &lt;TableLayout\n            android:id=\"@+id/tableLayout_main00\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:stretchColumns=\"*\"&gt;\n            &lt;TableRow&gt;\n                &lt;Button\n                    android:text=\"Script\"\n                    android:textAllCaps=\"false\"\n                    android:background=\"#ffffff\"/&gt;\n                &lt;Button\n                    android:text=\"Add-on\"\n                    android:textAllCaps=\"false\"\n                    android:background=\"#fffffa6a\"/&gt;\n            &lt;/TableRow&gt; &lt;TableRow&gt;\n            &lt;Button\n                android:text=\"Map\"\n                android:textAllCaps=\"false\"\n                android:background=\"#ff6ec0ff\"/&gt;\n            &lt;Button\n                android:text=\"Skin\"\n                android:textAllCaps=\"false\"\n                android:background=\"#ffff6d66\"/&gt;\n        &lt;/TableRow&gt; &lt;TableRow&gt;\n            &lt;Button\n                android:text=\"Texture Pack\"\n                android:textAllCaps=\"false\"/&gt;\n            &lt;Button\n                android:text=\"Coming Soon\"\n                android:textAllCaps=\"false\"/&gt;\n        &lt;/TableRow&gt;\n        &lt;/TableLayout&gt;\n\n        &lt;TextView\n            android:id=\"@+id/text_main00\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"New\"\n            android:textSize=\"20sp\"\n            android:layout_below=\"@+id/tableLayout_main00\"\n            android:clickable=\"true\"\n            android:gravity=\"right\"\n            android:layout_marginTop=\"20dp\"/&gt;\n\n        &lt;android.support.v7.widget.CardView\n            android:id=\"@+id/cardview_main00\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            cardview:cardCornerRadius=\"4dp\"\n            android:layout_below=\"@+id/text_main00\"\n            android:clickable=\"true\"\n            android:layout_marginTop=\"5dp\"&gt;\n\n            &lt;ImageView\n                android:id=\"@+id/image_main00\"\n                android:layout_height=\"wrap_content\"\n                android:layout_width=\"match_parent\"\n                android:scaleType=\"fitStart\"/&gt;\n\n            &lt;TextView\n                android:id=\"@+id/text_main_cardview00\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Hourglass Addon by Redstone\"\n                android:layout_gravity=\"bottom\"/&gt;\n\n        &lt;/android.support.v7.widget.CardView&gt;\n\n        &lt;TextView\n            android:id=\"@+id/text_main01\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"Popular\"\n            android:textSize=\"20sp\"\n            android:layout_below=\"@+id/cardview_main00\"\n            android:clickable=\"true\"\n            android:gravity=\"right\"\n            android:layout_marginTop=\"10dp\"/&gt;\n\n        &lt;android.support.v7.widget.CardView\n            android:layout_below=\"@+id/text_main01\"\n            android:id=\"@+id/cardview_main01\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            cardview:cardCornerRadius=\"4dp\"\n            android:clickable=\"true\"\n            android:layout_marginTop=\"5dp\"&gt;\n\n            &lt;ImageView\n                android:id=\"@+id/image_main01\"\n                android:layout_height=\"wrap_content\"\n                android:layout_width=\"match_parent\"\n                android:scaleType=\"fitStart\"/&gt;\n\n            &lt;TextView\n                android:id=\"@+id/text_main_cardview01\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Armor Display by Chan\"\n                android:layout_gravity=\"bottom\"/&gt;\n\n        &lt;/android.support.v7.widget.CardView&gt;\n\n        &lt;TextView\n            android:id=\"@+id/text_main02\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"Coming Soon\"\n            android:textSize=\"20sp\"\n            android:layout_below=\"@+id/cardview_main01\"\n            android:clickable=\"true\"\n            android:gravity=\"right\"\n            android:layout_marginTop=\"10dp\"/&gt;\n\n        &lt;android.support.v7.widget.CardView\n            android:layout_below=\"@+id/text_main02\"\n            android:id=\"@+id/cardview_main02\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            cardview:cardCornerRadius=\"4dp\"\n            android:clickable=\"true\"\n            android:layout_marginTop=\"5dp\"&gt;\n\n            &lt;ImageView\n                android:id=\"@+id/image_main02\"\n                android:layout_height=\"wrap_content\"\n                android:layout_width=\"match_parent\"\n                android:scaleType=\"fitStart\"/&gt;\n\n            &lt;TextView\n                android:id=\"@+id/text_main_cardview02\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"PortalPX by TM\"\n                android:layout_above=\"@+id/text_main_cardview22\"/&gt;\n\n            &lt;TextView\n                android:id=\"@+id/text_main_cardview22\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Limited Edition: Cabon Version\"\n                android:layout_gravity=\"bottom\"/&gt;\n\n\n        &lt;/android.support.v7.widget.CardView&gt;\n\n\n    &lt;/RelativeLayout&gt;\n\n&lt;/ScrollView&gt;\n</code></pre>\n\n<p>I don't know why this logcat appeared. Can anyone explain and solve it please?</p>\n"},{"tags":["java","unit-testing","optaplanner"],"answers":[{"comments":[{"owner":{"account_id":428647,"reputation":1358,"user_id":811108,"accept_rate":56,"display_name":"Justin Phillips"},"score":1,"creation_date":1665661663,"post_id":74054742,"comment_id":130754647,"body_markdown":"It is a bit difficult to describe my use case and examples in such a small comments box, so is there somewhere I can write this up and send you my reasons? Anyway, regardless of whether I am doing the right thing or not (my constraint works perfectly), how can I test this?","body":"It is a bit difficult to describe my use case and examples in such a small comments box, so is there somewhere I can write this up and send you my reasons? Anyway, regardless of whether I am doing the right thing or not (my constraint works perfectly), how can I test this?"},{"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;š Petrovick&#253;"},"score":2,"creation_date":1665680309,"post_id":74054742,"comment_id":130761413,"body_markdown":"I have slightly modified the answer. For sharing more complex pieces of code or text, you can use chat if you like: https://chat.stackoverflow.com/; or Github Gist; or Pastebin. Options are plenty.","body":"I have slightly modified the answer. For sharing more complex pieces of code or text, you can use chat if you like: <a href=\"https://chat.stackoverflow.com/\">chat.stackoverflow.com</a>; or Github Gist; or Pastebin. Options are plenty."},{"owner":{"account_id":428647,"reputation":1358,"user_id":811108,"accept_rate":56,"display_name":"Justin Phillips"},"score":0,"creation_date":1665996987,"post_id":74054742,"comment_id":130821900,"body_markdown":"Unfortunately using the example above does not work. If I positively impact the score and test for a reward, I get the following error message:\n\n`Broken expectation.\n        Constraint: com.myconstraints.../My Constraint\n   Expected reward: 4 (class java.lang.Integer)\n     Actual impact: 4 (class java.lang.Integer)\n\n  Explanation of score (0hard/0medium/4soft):\n    Constraint match totals:\n        4soft: constraint (My Constraint) has 1 matches:\n            4soft: justifications ([2])`","body":"Unfortunately using the example above does not work. If I positively impact the score and test for a reward, I get the following error message:  <code>Broken expectation.         Constraint: com.myconstraints...&#47;My Constraint    Expected reward: 4 (class java.lang.Integer)      Actual impact: 4 (class java.lang.Integer)    Explanation of score (0hard&#47;0medium&#47;4soft):     Constraint match totals:         4soft: constraint (My Constraint) has 1 matches:             4soft: justifications ([2])</code>"},{"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;š Petrovick&#253;"},"score":1,"creation_date":1666000027,"post_id":74054742,"comment_id":130822947,"body_markdown":"I&#39;d consider that a bug.","body":"I&#39;d consider that a bug."},{"owner":{"account_id":428647,"reputation":1358,"user_id":811108,"accept_rate":56,"display_name":"Justin Phillips"},"score":0,"creation_date":1666000070,"post_id":74054742,"comment_id":130822957,"body_markdown":"In fact using this approach I am able to test: https://docs.optaplanner.org/latest/optaplanner-docs/html_single/index.html#constraintStreamsTestingAllConstraints","body":"In fact using this approach I am able to test: <a href=\"https://docs.optaplanner.org/latest/optaplanner-docs/html_single/index.html#constraintStreamsTestingAllConstraints\" rel=\"nofollow noreferrer\">docs.optaplanner.org/latest/optaplanner-docs/html_single/&hellip;</a>"},{"owner":{"account_id":428647,"reputation":1358,"user_id":811108,"accept_rate":56,"display_name":"Justin Phillips"},"score":0,"creation_date":1666000089,"post_id":74054742,"comment_id":130822962,"body_markdown":"Where should I raise the bug?","body":"Where should I raise the bug?"},{"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;š Petrovick&#253;"},"score":0,"creation_date":1666000140,"post_id":74054742,"comment_id":130822982,"body_markdown":"https://issues.redhat.com/projects/PLANNER, thank you.","body":"<a href=\"https://issues.redhat.com/projects/PLANNER\" rel=\"nofollow noreferrer\">issues.redhat.com/projects/PLANNER</a>, thank you."}],"tags":[],"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;š Petrovick&#253;"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665680322,"creation_date":1665659134,"answer_id":74054742,"question_id":74053615,"body_markdown":"That is by design. Regardless of whether your constraint does penalize, reward or impact, the end result still is either a penalty or a reward. Therefore in your tests, you are expected to specify the expected outcome. For example, if you expect a negative impact, you are, in fact, expecting a penalty:\r\n\r\n    constraintVerifier.verifyThat(myConstraint).given(obj1, obj2).penalizesBy(1);\r\n\r\nAs a side note: we are really curious what constraints in the real world actually require the use of `impact()` instead of `penalize()` or `reward()`. We were not able to think of any realistic constraint that would be positive and negative at the same time.","title":"Testing constraints that use impact() instead of reward() or penalize()","body":"<p>That is by design. Regardless of whether your constraint does penalize, reward or impact, the end result still is either a penalty or a reward. Therefore in your tests, you are expected to specify the expected outcome. For example, if you expect a negative impact, you are, in fact, expecting a penalty:</p>\n<pre><code>constraintVerifier.verifyThat(myConstraint).given(obj1, obj2).penalizesBy(1);\n</code></pre>\n<p>As a side note: we are really curious what constraints in the real world actually require the use of <code>impact()</code> instead of <code>penalize()</code> or <code>reward()</code>. We were not able to think of any realistic constraint that would be positive and negative at the same time.</p>\n"}],"owner":{"account_id":428647,"reputation":1358,"user_id":811108,"accept_rate":56,"display_name":"Justin Phillips"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665680322,"creation_date":1665654055,"question_id":74053615,"body_markdown":"I have a constraint that uses `impactConfigurable`, but the `SingleConstraintAssertion` interface only supports testing if a constraint rewards or penalises. For example, I cannot do the following:\r\n\r\n```\r\nconstraintVerifier.verifyThat(myConstraint).given(obj1, obj2).impactsBy(1);\r\n```\r\nor\r\n```\r\nconstraintVerifier.verifyThat(myConstraint).given(obj1, obj2).impactsBy(-1);\r\n```\r\n\r\nIs there a way around this?\r\n\r\nI am using OptaPlanner version 8.25.0.Final.\r\n","title":"Testing constraints that use impact() instead of reward() or penalize()","body":"<p>I have a constraint that uses <code>impactConfigurable</code>, but the <code>SingleConstraintAssertion</code> interface only supports testing if a constraint rewards or penalises. For example, I cannot do the following:</p>\n<pre><code>constraintVerifier.verifyThat(myConstraint).given(obj1, obj2).impactsBy(1);\n</code></pre>\n<p>or</p>\n<pre><code>constraintVerifier.verifyThat(myConstraint).given(obj1, obj2).impactsBy(-1);\n</code></pre>\n<p>Is there a way around this?</p>\n<p>I am using OptaPlanner version 8.25.0.Final.</p>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":1,"creation_date":1665492760,"post_id":74028225,"comment_id":130709138,"body_markdown":"asc is default. It doesn&#39;t matter if it&#39;s there or not and you cannot remove it\nJPA does not support &lt;&gt; in order by. If you want to use this you have to use SQL","body":"asc is default. It doesn&#39;t matter if it&#39;s there or not and you cannot remove it JPA does not support &lt;&gt; in order by. If you want to use this you have to use SQL"},{"owner":{"account_id":1525586,"reputation":151,"user_id":1424124,"display_name":"Mark"},"score":0,"creation_date":1665499279,"post_id":74028225,"comment_id":130712120,"body_markdown":"You cannot use a conditional in an order by statement, eg `rmgtnav_collection_type&lt;&gt;&#39;PROFILE&#39;` is simply not valid. What are you trying to do?","body":"You cannot use a conditional in an order by statement, eg <code>rmgtnav_collection_type&lt;&gt;&#39;PROFILE&#39;</code> is simply not valid. What are you trying to do?"}],"answers":[{"comments":[{"owner":{"account_id":14437674,"reputation":711,"user_id":10429263,"display_name":"d00d"},"score":0,"creation_date":1665513391,"post_id":74030511,"comment_id":130717033,"body_markdown":"That would work but I&#39;m lookin for a solution in combination with CriteriaBuilder.","body":"That would work but I&#39;m lookin for a solution in combination with CriteriaBuilder."}],"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665501873,"creation_date":1665501873,"answer_id":74030511,"question_id":74028225,"body_markdown":"Use conventional SQL. Change:\r\n\r\n    rmgtnav_collection_type&lt;&gt;&#39;PROFILE&#39;\r\n\r\nto:\r\n\r\n    case when rmgtnav_collection_type = &#39;PROFILE&#39; then 0 else 1 end\r\n\r\nSwap `0` and `1` (or add `DESC`) if you want the reverse order.","title":"&lt;&gt; in &quot;order by&quot; clause causes createQuery to fail","body":"<p>Use conventional SQL. Change:</p>\n<pre><code>rmgtnav_collection_type&lt;&gt;'PROFILE'\n</code></pre>\n<p>to:</p>\n<pre><code>case when rmgtnav_collection_type = 'PROFILE' then 0 else 1 end\n</code></pre>\n<p>Swap <code>0</code> and <code>1</code> (or add <code>DESC</code>) if you want the reverse order.</p>\n"},{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665680318,"creation_date":1665680318,"answer_id":74059360,"question_id":74028225,"body_markdown":"You will have to use a case expression for this purpose:\r\n\r\n    orderStatements.add(\r\n        cb.asc(\r\n            cb.selectCase()\r\n                .when(\r\n                    cb.notEqual(root.get(&quot;rmgtnav_collection_type&quot;), &quot;PROFILE&quot;),\r\n                    cb.literal(0)\r\n                )\r\n                .otherwise(cb.literal(1))\r\n        )\r\n    );\r\n","title":"&lt;&gt; in &quot;order by&quot; clause causes createQuery to fail","body":"<p>You will have to use a case expression for this purpose:</p>\n<pre><code>orderStatements.add(\n    cb.asc(\n        cb.selectCase()\n            .when(\n                cb.notEqual(root.get(&quot;rmgtnav_collection_type&quot;), &quot;PROFILE&quot;),\n                cb.literal(0)\n            )\n            .otherwise(cb.literal(1))\n    )\n);\n</code></pre>\n"}],"owner":{"account_id":14437674,"reputation":711,"user_id":10429263,"display_name":"d00d"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1665680318,"creation_date":1665491572,"question_id":74028225,"body_markdown":"I&#39;m on Hibernate 5.6 and want to attach this SQL order string to criteriaBuilder: \r\n\r\n    order by rmgtnav_path, rmgtnav_collection_type&lt;&gt;&#39;PROFILE&#39;, rmgtnav_denotation asc\r\n\r\nHere&#39;s the code:\r\n\r\n    List&lt;Order&gt; orderStatements = new ArrayList();\r\n    \r\n    orderStatements.add(cb.asc(root.get(&quot;rmgtnav_path&quot;)));\r\n    orderStatements.add(cb.asc(cb.notEqual(root.get(&quot;rmgtnav_collection_type&quot;), &quot;PROFILE&quot;)));\r\n    orderStatements.add(cb.asc(root.get(&quot;rmgtnav_denotation&quot;)));\r\n    \r\n    \r\n    criteriQuery.orderBy(orderStatements); \r\n    \r\n    Query query = session.createQuery(cq);\r\n\r\nWhen I call the `session.createQuery(cq)` i get the following error: \r\n\r\n&gt; org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected AST\r\n&gt; node: &lt;&gt; near line 1, column 596 [select generatedAlias0 from\r\n&gt; com.myapp.core.rmgt.rate.business.object.RmgtBVOImpl\r\n&gt; as generatedAlias0 where ( generatedAlias0.collectionType&lt;&gt;:param0 )\r\n&gt; and ( ( generatedAlias0.collectionSubType&lt;&gt;:param1 ) or (\r\n&gt; generatedAlias0.collectionSubType is null ) ) and ( (\r\n&gt; lower(generatedAlias0.profileStatus) like :param2 ) and ( (\r\n&gt; generatedAlias0.type=:param3 ) or ( generatedAlias0.type=:param4 ) ) )\r\n&gt; and ( generatedAlias0.enabled=:param5 ) and ( (\r\n&gt; generatedAlias0.owner=:param6 ) or ( generatedAlias0.owner=:param7 ) )\r\n&gt; order by generatedAlias0.path asc,\r\n&gt; generatedAlias0.collectionType&lt;&gt;:param8 asc,\r\n&gt; generatedAlias0.denotation asc]\r\n\r\nThe generated order by clause looks no different than the native SQL statement but I get this error message. Any idea how to translate this &lt;&gt; comparison in Order By to an expression? Looks like Hibernate is just not able to process these kinds of Expressions in orderBy segments. \r\n\r\nIn case of the WHY: I can only speculate here. The clause &lt;&gt; &#39;PROFILE&#39; resolves to true (1) or false (0). False for values equal to &#39;PROFILE&#39;. And since 0 is smaller than 1, the listing starts with &#39;PROFILE&#39; and is followed by the rest. \r\n\r\nThe statement itself is valid sql: \r\n\r\n    SELECT rmgtnav_path, rmgtnav_denotation, rmgtnav_collection_type\r\n    FROM public.rmgt_t_navigation\r\n    order by rmgtnav_path , rmgtnav_collection_type, rmgtnav_denotation asc\r\n\r\n[![!\\[enter image description here][1]][1]\r\n\r\nWhereas:\r\n\r\n    SELECT rmgtnav_path, rmgtnav_denotation, rmgtnav_collection_type\r\n    FROM public.rmgt_t_navigation\r\n    order by rmgtnav_path , rmgtnav_collection_type &lt;&gt; &#39;PROFILE&#39;, rmgtnav_denotation asc\r\n\r\n[![!\\[!\\[enter image description here][2]][2]\r\n\r\n\r\n\r\n\r\nAnd as a second question, is there any way of removing the asc tags from the generated code when I don&#39;t need them, like in the original sql?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/y35wF.png\r\n  [2]: https://i.stack.imgur.com/KDRAk.png","title":"&lt;&gt; in &quot;order by&quot; clause causes createQuery to fail","body":"<p>I'm on Hibernate 5.6 and want to attach this SQL order string to criteriaBuilder:</p>\n<pre><code>order by rmgtnav_path, rmgtnav_collection_type&lt;&gt;'PROFILE', rmgtnav_denotation asc\n</code></pre>\n<p>Here's the code:</p>\n<pre><code>List&lt;Order&gt; orderStatements = new ArrayList();\n\norderStatements.add(cb.asc(root.get(&quot;rmgtnav_path&quot;)));\norderStatements.add(cb.asc(cb.notEqual(root.get(&quot;rmgtnav_collection_type&quot;), &quot;PROFILE&quot;)));\norderStatements.add(cb.asc(root.get(&quot;rmgtnav_denotation&quot;)));\n\n\ncriteriQuery.orderBy(orderStatements); \n\nQuery query = session.createQuery(cq);\n</code></pre>\n<p>When I call the <code>session.createQuery(cq)</code> i get the following error:</p>\n<blockquote>\n<p>org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected AST\nnode: &lt;&gt; near line 1, column 596 [select generatedAlias0 from\ncom.myapp.core.rmgt.rate.business.object.RmgtBVOImpl\nas generatedAlias0 where ( generatedAlias0.collectionType&lt;&gt;:param0 )\nand ( ( generatedAlias0.collectionSubType&lt;&gt;:param1 ) or (\ngeneratedAlias0.collectionSubType is null ) ) and ( (\nlower(generatedAlias0.profileStatus) like :param2 ) and ( (\ngeneratedAlias0.type=:param3 ) or ( generatedAlias0.type=:param4 ) ) )\nand ( generatedAlias0.enabled=:param5 ) and ( (\ngeneratedAlias0.owner=:param6 ) or ( generatedAlias0.owner=:param7 ) )\norder by generatedAlias0.path asc,\ngeneratedAlias0.collectionType&lt;&gt;:param8 asc,\ngeneratedAlias0.denotation asc]</p>\n</blockquote>\n<p>The generated order by clause looks no different than the native SQL statement but I get this error message. Any idea how to translate this &lt;&gt; comparison in Order By to an expression? Looks like Hibernate is just not able to process these kinds of Expressions in orderBy segments.</p>\n<p>In case of the WHY: I can only speculate here. The clause &lt;&gt; 'PROFILE' resolves to true (1) or false (0). False for values equal to 'PROFILE'. And since 0 is smaller than 1, the listing starts with 'PROFILE' and is followed by the rest.</p>\n<p>The statement itself is valid sql:</p>\n<pre><code>SELECT rmgtnav_path, rmgtnav_denotation, rmgtnav_collection_type\nFROM public.rmgt_t_navigation\norder by rmgtnav_path , rmgtnav_collection_type, rmgtnav_denotation asc\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/y35wF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/y35wF.png\" alt=\"![enter image description here\" /></a></p>\n<p>Whereas:</p>\n<pre><code>SELECT rmgtnav_path, rmgtnav_denotation, rmgtnav_collection_type\nFROM public.rmgt_t_navigation\norder by rmgtnav_path , rmgtnav_collection_type &lt;&gt; 'PROFILE', rmgtnav_denotation asc\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/KDRAk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KDRAk.png\" alt=\"![![enter image description here\" /></a></p>\n<p>And as a second question, is there any way of removing the asc tags from the generated code when I don't need them, like in the original sql?</p>\n"},{"tags":["java","android","crashlytics","android-videoview","android-touch-event"],"comments":[{"owner":{"account_id":4192472,"reputation":1728,"user_id":3434763,"display_name":"TheLibrarian"},"score":0,"creation_date":1666190976,"post_id":74059341,"comment_id":130878048,"body_markdown":"It looks like a NPE in the code of the Android system - Vivo&#39;s bug.","body":"It looks like a NPE in the code of the Android system - Vivo&#39;s bug."},{"owner":{"account_id":26855967,"reputation":2351,"user_id":20440272,"display_name":"Sohaib Ahmed"},"score":0,"creation_date":1676275817,"post_id":74059341,"comment_id":133097210,"body_markdown":"I&#39;m facing this too","body":"I&#39;m facing this too"}],"owner":{"account_id":8775876,"reputation":204,"user_id":6561178,"display_name":"Ab Morphious"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":169,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1665680225,"creation_date":1665680225,"question_id":74059341,"body_markdown":"Firebase Crashlytics is reporting the following log specifically on Vivo devices, Android 12 OS. Any help would be appreciated, thank you. \r\n\r\n    Fatal Exception: java.lang.NullPointerException: Attempt to invoke virtual method &#39;java.lang.String java.lang.Object.toString()&#39; on a null object reference\r\n           at com.android.internal.policy.DecorView.dispatchTouchEvent(DecorView.java:626)\r\n           at android.view.View.dispatchPointerEvent(View.java:14961)\r\n           at android.view.ViewRootImpl$ViewPostImeInputStage.processPointerEvent(ViewRootImpl.java:6799)\r\n           at android.view.ViewRootImpl$ViewPostImeInputStage.onProcess(ViewRootImpl.java:6565)\r\n           at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:6022)\r\n           at android.view.ViewRootImpl$InputStage.onDeliverToNext(ViewRootImpl.java:6089)\r\n           at android.view.ViewRootImpl$InputStage.forward(ViewRootImpl.java:6050)\r\n           at android.view.ViewRootImpl$AsyncInputStage.forward(ViewRootImpl.java:6223)\r\n           at android.view.ViewRootImpl$InputStage.apply(ViewRootImpl.java:6058)\r\n           at android.view.ViewRootImpl$AsyncInputStage.apply(ViewRootImpl.java:6280)\r\n           at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:6026)\r\n           at android.view.ViewRootImpl$InputStage.onDeliverToNext(ViewRootImpl.java:6089)\r\n           at android.view.ViewRootImpl$InputStage.forward(ViewRootImpl.java:6050)\r\n           at android.view.ViewRootImpl$InputStage.apply(ViewRootImpl.java:6058)\r\n           at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:6026)\r\n           at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:9119)\r\n           at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:9070)\r\n           at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:9016)\r\n           at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:9254)\r\n           at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:276)\r\n           at android.os.MessageQueue.nativePollOnce(MessageQueue.java)\r\n           at android.os.MessageQueue.next(MessageQueue.java:339)\r\n           at android.os.Looper.loopOnce(Looper.java:186)\r\n           at android.os.Looper.loop(Looper.java:334)\r\n           at android.app.ActivityThread.main(ActivityThread.java:8348)\r\n           at java.lang.reflect.Method.invoke(Method.java)\r\n           at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:582)\r\n           at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1065)","title":"dispatchTouchEvent() is crashing on Vivo device, Android 12 with &#39;java.lang.String java.lang.Object.toString()&#39;","body":"<p>Firebase Crashlytics is reporting the following log specifically on Vivo devices, Android 12 OS. Any help would be appreciated, thank you.</p>\n<pre><code>Fatal Exception: java.lang.NullPointerException: Attempt to invoke virtual method 'java.lang.String java.lang.Object.toString()' on a null object reference\n       at com.android.internal.policy.DecorView.dispatchTouchEvent(DecorView.java:626)\n       at android.view.View.dispatchPointerEvent(View.java:14961)\n       at android.view.ViewRootImpl$ViewPostImeInputStage.processPointerEvent(ViewRootImpl.java:6799)\n       at android.view.ViewRootImpl$ViewPostImeInputStage.onProcess(ViewRootImpl.java:6565)\n       at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:6022)\n       at android.view.ViewRootImpl$InputStage.onDeliverToNext(ViewRootImpl.java:6089)\n       at android.view.ViewRootImpl$InputStage.forward(ViewRootImpl.java:6050)\n       at android.view.ViewRootImpl$AsyncInputStage.forward(ViewRootImpl.java:6223)\n       at android.view.ViewRootImpl$InputStage.apply(ViewRootImpl.java:6058)\n       at android.view.ViewRootImpl$AsyncInputStage.apply(ViewRootImpl.java:6280)\n       at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:6026)\n       at android.view.ViewRootImpl$InputStage.onDeliverToNext(ViewRootImpl.java:6089)\n       at android.view.ViewRootImpl$InputStage.forward(ViewRootImpl.java:6050)\n       at android.view.ViewRootImpl$InputStage.apply(ViewRootImpl.java:6058)\n       at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:6026)\n       at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:9119)\n       at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:9070)\n       at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:9016)\n       at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:9254)\n       at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:276)\n       at android.os.MessageQueue.nativePollOnce(MessageQueue.java)\n       at android.os.MessageQueue.next(MessageQueue.java:339)\n       at android.os.Looper.loopOnce(Looper.java:186)\n       at android.os.Looper.loop(Looper.java:334)\n       at android.app.ActivityThread.main(ActivityThread.java:8348)\n       at java.lang.reflect.Method.invoke(Method.java)\n       at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:582)\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1065)\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":2,"creation_date":1665602013,"post_id":74046940,"comment_id":130741864,"body_markdown":"Yes, creating an object needs more time than not creating an object, obviously. Why do you ask? What is the actual question you want to ask or what is the problem you have?","body":"Yes, creating an object needs more time than not creating an object, obviously. Why do you ask? What is the actual question you want to ask or what is the problem you have?"},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1665602038,"post_id":74046940,"comment_id":130741876,"body_markdown":"I&#39;d offer up a third option: you&#39;d have a field `A myDB = new A();`, and then `#caller` can do `myDB.myMethod();`. The number of instances made is relatively trivial compared to the IO expense of the DB operations. Overall though, I&#39;d question what state is really being shared between instances of `A` such that they would even need separation. Be wary of some of the design pitfalls as well with baking in all of your DB operations into a static utility class","body":"I&#39;d offer up a third option: you&#39;d have a field <code>A myDB = new A();</code>, and then <code>#caller</code> can do <code>myDB.myMethod();</code>. The number of instances made is relatively trivial compared to the IO expense of the DB operations. Overall though, I&#39;d question what state is really being shared between instances of <code>A</code> such that they would even need separation. Be wary of some of the design pitfalls as well with baking in all of your DB operations into a static utility class"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1665606876,"creation_date":1665604155,"answer_id":74047304,"question_id":74046940,"body_markdown":"How often?\r\n\r\nUnless you answer &#39;5 __billion__ times, every second&#39;, the answer is simple:\r\n\r\nNo, object creation has absolutely no effect whatsoever on performance.\r\n\r\nYou write code that is clean. Which is defined as: Easy to read, hard to misunderstand, easy to test, easy to modify in the face of changing requirements.\r\n\r\nThat is how you get to fast code. The system tends to spend 99% of the resources on 1% of the code. Therefore, optimizing that 1% is the only thing that matters. However, it&#39;s hard to pre-guess what the 1% will be (hence, you never ever mess with performance optimizations unless you _first_ run a profiler so you know what matters). Generally optimizing that 1% requires changing how it works, which in turn requires changes to code that &#39;surrounds&#39; your 1% (the code that calls it, and the code that is called by it / processes with it returns). This is easy if you write clean code, and hard if you micro-optimize for pointless reasons.\r\n\r\nHence, clean code __is objectively faster__.\r\n\r\nIf you think making an instance is better here (And it certainly is!), then do that.","title":"Static method vs non static method performance in Java with object creation","body":"<p>How often?</p>\n<p>Unless you answer '5 <strong>billion</strong> times, every second', the answer is simple:</p>\n<p>No, object creation has absolutely no effect whatsoever on performance.</p>\n<p>You write code that is clean. Which is defined as: Easy to read, hard to misunderstand, easy to test, easy to modify in the face of changing requirements.</p>\n<p>That is how you get to fast code. The system tends to spend 99% of the resources on 1% of the code. Therefore, optimizing that 1% is the only thing that matters. However, it's hard to pre-guess what the 1% will be (hence, you never ever mess with performance optimizations unless you <em>first</em> run a profiler so you know what matters). Generally optimizing that 1% requires changing how it works, which in turn requires changes to code that 'surrounds' your 1% (the code that calls it, and the code that is called by it / processes with it returns). This is easy if you write clean code, and hard if you micro-optimize for pointless reasons.</p>\n<p>Hence, clean code <strong>is objectively faster</strong>.</p>\n<p>If you think making an instance is better here (And it certainly is!), then do that.</p>\n"}],"owner":{"account_id":2435943,"reputation":1275,"user_id":2125853,"accept_rate":77,"display_name":"user2125853"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":324,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74047304,"answer_count":1,"score":0,"last_activity_date":1665679644,"creation_date":1665601819,"question_id":74046940,"body_markdown":"I am not too familiar with Java.  I have the following question. I have seen similar posts on SO on this.  What I am asking may be a bit different. \r\n\r\nIf I have the following situation\r\n\r\n    public class A {\r\n        public static void myMethod () {\r\n            // Does a whole lot of things including calls to DB\r\n        }\r\n    }\r\n    \r\n    vs\r\n    \r\n    public class A {\r\n        public void myMethod () {\r\n            // Does a whole lot of things including calls to DB\r\n        }\r\n    }\r\n    \r\n    // In some other class\r\n    public void caller () {\r\n       A.myMethod (); vs new A().myMethod();\r\n    }\r\n      \r\n\r\nReason I am looking at the non-static method is to ensure data is not shared between instances. \r\n\r\nIf the caller () method is being called often, would there be a performance cost because of the instantiation/class loading followed by the call to non-static method?","title":"Static method vs non static method performance in Java with object creation","body":"<p>I am not too familiar with Java.  I have the following question. I have seen similar posts on SO on this.  What I am asking may be a bit different.</p>\n<p>If I have the following situation</p>\n<pre><code>public class A {\n    public static void myMethod () {\n        // Does a whole lot of things including calls to DB\n    }\n}\n\nvs\n\npublic class A {\n    public void myMethod () {\n        // Does a whole lot of things including calls to DB\n    }\n}\n\n// In some other class\npublic void caller () {\n   A.myMethod (); vs new A().myMethod();\n}\n  \n</code></pre>\n<p>Reason I am looking at the non-static method is to ensure data is not shared between instances.</p>\n<p>If the caller () method is being called often, would there be a performance cost because of the instantiation/class loading followed by the call to non-static method?</p>\n"},{"tags":["java","spring","spring-boot","properties-file"],"answers":[{"tags":[],"owner":{"account_id":7768515,"reputation":1636,"user_id":7972621,"display_name":"Ankit Sharma"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665679382,"creation_date":1665679382,"answer_id":74059199,"question_id":74058966,"body_markdown":"I&#39;ll say you should use Zookeeper or Spring Cloud config for this.\r\n\r\nFor a native spring solution you can refer to this answer: https://stackoverflow.com/questions/46407230/load-spring-boot-app-properties-from-database\r\n\r\nHowever, using Spring cloud will make this easier.","title":"How to read spring property files at run time based on runtime Flag","body":"<p>I'll say you should use Zookeeper or Spring Cloud config for this.</p>\n<p>For a native spring solution you can refer to this answer: <a href=\"https://stackoverflow.com/questions/46407230/load-spring-boot-app-properties-from-database\">Load spring boot app properties from database</a></p>\n<p>However, using Spring cloud will make this easier.</p>\n"}],"owner":{"account_id":8567613,"reputation":19,"user_id":6419640,"display_name":"Mahaboob Basha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":347,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665679382,"creation_date":1665678043,"question_id":74058966,"body_markdown":"I have a single server for Multiple countries lets say [c1,c2,c3 countries have p1,p2,p3 property files], i want to load all of them at once and want fetched/read its values based on country flag(This country flag will be derived based on login user configuration).","title":"How to read spring property files at run time based on runtime Flag","body":"<p>I have a single server for Multiple countries lets say [c1,c2,c3 countries have p1,p2,p3 property files], i want to load all of them at once and want fetched/read its values based on country flag(This country flag will be derived based on login user configuration).</p>\n"},{"tags":["java","exception","rmi"],"answers":[{"comments":[{"owner":{"account_id":5682642,"reputation":1547,"user_id":4493225,"accept_rate":82,"display_name":"Lin"},"score":0,"creation_date":1665679504,"post_id":74055580,"comment_id":130761186,"body_markdown":"Thanks for sharing your experience! Please see my update to the question. I believe I got confused by the fact that I am not quite sure who should handle the RemoteException in the remote interface. Based on my experiment, I believe the RMI server should be robust enough for my purpose. For larger projects, the ways you pointed out can definitely help too!","body":"Thanks for sharing your experience! Please see my update to the question. I believe I got confused by the fact that I am not quite sure who should handle the RemoteException in the remote interface. Based on my experiment, I believe the RMI server should be robust enough for my purpose. For larger projects, the ways you pointed out can definitely help too!"},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1665682579,"post_id":74055580,"comment_id":130762109,"body_markdown":"RMI servers can extremely useful / reliable. The JVM JIT/Hotspot optimisation of a long running server means that even with the small cost of client-server round-trip they would outperform a short lived client performing same cpu intensive task in-process (such as image or pdf transformations).","body":"RMI servers can extremely useful / reliable. The JVM JIT/Hotspot optimisation of a long running server means that even with the small cost of client-server round-trip they would outperform a short lived client performing same cpu intensive task in-process (such as image or pdf transformations)."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1680516065,"post_id":74055580,"comment_id":133905930,"body_markdown":"@Lin `RemoteException` indicates an error within RMI itself, either in the communications or the server-side interface to the remote object. These can always occur. It doesn&#39;t have anything to do with the robustness or otherwise of your server object.","body":"@Lin <code>RemoteException</code> indicates an error within RMI itself, either in the communications or the server-side interface to the remote object. These can always occur. It doesn&#39;t have anything to do with the robustness or otherwise of your server object."}],"tags":[],"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1665664114,"creation_date":1665663144,"answer_id":74055580,"question_id":74048113,"body_markdown":"Your RMI server only throws that exception at initialisation / start-up in `UnicastRemoteObject.exportObject` or `Naming.rebind`. The chances are that any error here isn&#39;t recoverable simply by running a loop to perform the same action again. There is some other problem to investigate.\r\n\r\nIf you server gets past the `exportObject`/`rebind` you see the &quot;Server is up&quot; message, the execution passes through the catch block and `main(String[] args)` ends normally. Even the thread handling `[main]` probably ends here. \r\n\r\nBut, the JVM process does not exit as there are non-daemon threads running. Any exceptions in the server are not passed back to the `catch(RemoteException e)` block shown in your main because `main()` has ended already. \r\n\r\nIn live systems I&#39;ve observed several measures used by developers to counter issues found with RMI servers:\r\n\r\n- server startup scripts use limited loop to retry startup if it dies (this is more effective if it dies after long period not if fails instantly)\r\n- periodic round trip rmi client to server calls with trivial operation to prove RMI server health\r\n- run multiple instances of rmi servers with deliberate shutdown restart cycles at different time to ensure 100% operation\r\n- process monitors on rmi servers =&gt; trigger alerts for manual intervention\r\n\r\nMost importantly you need effective logging so you can diagnose why it died afterwards.","title":"java rmi - how to handle RemoteException","body":"<p>Your RMI server only throws that exception at initialisation / start-up in <code>UnicastRemoteObject.exportObject</code> or <code>Naming.rebind</code>. The chances are that any error here isn't recoverable simply by running a loop to perform the same action again. There is some other problem to investigate.</p>\n<p>If you server gets past the <code>exportObject</code>/<code>rebind</code> you see the &quot;Server is up&quot; message, the execution passes through the catch block and <code>main(String[] args)</code> ends normally. Even the thread handling <code>[main]</code> probably ends here.</p>\n<p>But, the JVM process does not exit as there are non-daemon threads running. Any exceptions in the server are not passed back to the <code>catch(RemoteException e)</code> block shown in your main because <code>main()</code> has ended already.</p>\n<p>In live systems I've observed several measures used by developers to counter issues found with RMI servers:</p>\n<ul>\n<li>server startup scripts use limited loop to retry startup if it dies (this is more effective if it dies after long period not if fails instantly)</li>\n<li>periodic round trip rmi client to server calls with trivial operation to prove RMI server health</li>\n<li>run multiple instances of rmi servers with deliberate shutdown restart cycles at different time to ensure 100% operation</li>\n<li>process monitors on rmi servers =&gt; trigger alerts for manual intervention</li>\n</ul>\n<p>Most importantly you need effective logging so you can diagnose why it died afterwards.</p>\n"}],"owner":{"account_id":5682642,"reputation":1547,"user_id":4493225,"accept_rate":82,"display_name":"Lin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":721,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74055580,"answer_count":1,"score":1,"last_activity_date":1665679142,"creation_date":1665609671,"question_id":74048113,"body_markdown":"I have checked some of the Java RMI examples. But none of them demonstrate how to recover from a potential server failure, or a RemoteException, which might be thrown from the remote interface we define. And I couldn&#39;t find any relevant information either. \r\n\r\nFor instance, \r\n\r\n```\r\npublic static void main(String[] args)\r\n{\r\n\ttry\r\n\t{\r\n\t\tServer server = new Server();\r\n\t\tHello stub = (Hello) UnicastRemoteObject.exportObject(server, 0);\r\n\t\tNaming.rebind(&quot;rmi://localhost/Hello&quot;, stub);\r\n\t\tSystem.out.println(&quot;Server is up.&quot;);\r\n\t}\r\n\tcatch (RemoteException e)\r\n\t{\r\n\t\t// TODO Auto-generated catch block\r\n\t\te.printStackTrace();\r\n\t}\r\n\tcatch (MalformedURLException e)\r\n\t{\r\n\t\t// TODO Auto-generated catch block\r\n\t\te.printStackTrace();\r\n\t}\r\n}\r\n```\r\n\r\nAfter the exception is caught, the server just exits. Is here the intent for the server to die when such exceptions are thrown? Can we recover from such failures, like restarting the server? But how? \r\n\r\nThank you,\r\n\r\n-----------Updates----------\r\n\r\nTo clarify, initially, I thought the RemoteException specified in the remote interface might be caught here. But after some experiments, I find they will actually show up on the client side and should be handled by the client.","title":"java rmi - how to handle RemoteException","body":"<p>I have checked some of the Java RMI examples. But none of them demonstrate how to recover from a potential server failure, or a RemoteException, which might be thrown from the remote interface we define. And I couldn't find any relevant information either.</p>\n<p>For instance,</p>\n<pre><code>public static void main(String[] args)\n{\n    try\n    {\n        Server server = new Server();\n        Hello stub = (Hello) UnicastRemoteObject.exportObject(server, 0);\n        Naming.rebind(&quot;rmi://localhost/Hello&quot;, stub);\n        System.out.println(&quot;Server is up.&quot;);\n    }\n    catch (RemoteException e)\n    {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n    catch (MalformedURLException e)\n    {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>After the exception is caught, the server just exits. Is here the intent for the server to die when such exceptions are thrown? Can we recover from such failures, like restarting the server? But how?</p>\n<p>Thank you,</p>\n<p>-----------Updates----------</p>\n<p>To clarify, initially, I thought the RemoteException specified in the remote interface might be caught here. But after some experiments, I find they will actually show up on the client side and should be handled by the client.</p>\n"},{"tags":["java","console","passwords","command-line-interface","masking"],"comments":[{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1665679739,"post_id":74059007,"comment_id":130761258,"body_markdown":"Possibly related: [Trying to read from the console in Java](https://stackoverflow.com/q/26470972).","body":"Possibly related: <a href=\"https://stackoverflow.com/q/26470972\">Trying to read from the console in Java</a>."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1665679964,"post_id":74059007,"comment_id":130761316,"body_markdown":"Anyway if you are creating console application my guess is that you will be *running* it through console where `System.console()` will not return `null` but valid Console object. In case of IDE you can&#39;t do much, unless you know how to run your code via `java.exe` instead of `javaw.exe` (which I don&#39;t so can&#39;t help you with this).","body":"Anyway if you are creating console application my guess is that you will be <i>running</i> it through console where <code>System.console()</code> will not return <code>null</code> but valid Console object. In case of IDE you can&#39;t do much, unless you know how to run your code via <code>java.exe</code> instead of <code>javaw.exe</code> (which I don&#39;t so can&#39;t help you with this)."}],"owner":{"account_id":14135054,"reputation":3,"user_id":15330835,"display_name":"Ava-123"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1665678559,"answer_count":0,"score":0,"last_activity_date":1665679107,"creation_date":1665678276,"question_id":74059007,"body_markdown":"I&#39;m trying to build a command line application where a user will be asked for their name and password but I want to mask the password using &#39;*&#39;. I looked into many posts and saw many of them using System.console() to use the readpassword() functionality, however, in the IDE environment, System.console() returns null and thus my program crashes. How can I overcome this? I want to be able to read the password without displaying what the user is actually typing in.\r\n\r\nEdit: The other posts that I&#39;ve read [Link][1] addressed this issue but the solution seems unclear to me.\r\n\r\nAny form of help will be appreciated. Thank you.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/39554114/system-console-returns-null-if-executed-from-gradle-run","title":"System.console() returns null when running in Intellij using gradle","body":"<p>I'm trying to build a command line application where a user will be asked for their name and password but I want to mask the password using '*'. I looked into many posts and saw many of them using System.console() to use the readpassword() functionality, however, in the IDE environment, System.console() returns null and thus my program crashes. How can I overcome this? I want to be able to read the password without displaying what the user is actually typing in.</p>\n<p>Edit: The other posts that I've read <a href=\"https://stackoverflow.com/questions/39554114/system-console-returns-null-if-executed-from-gradle-run\">Link</a> addressed this issue but the solution seems unclear to me.</p>\n<p>Any form of help will be appreciated. Thank you.</p>\n"},{"tags":["java","postgresql","jdbc","plpgsql"],"comments":[{"owner":{"account_id":1852014,"reputation":24139,"user_id":1678362,"display_name":"Aaron"},"score":0,"creation_date":1476712759,"post_id":40088295,"comment_id":67449255,"body_markdown":"Did you mean [PL/pgSQL](https://www.postgresql.org/docs/9.2/static/plpgsql.html) ?","body":"Did you mean <a href=\"https://www.postgresql.org/docs/9.2/static/plpgsql.html\" rel=\"nofollow noreferrer\">PL/pgSQL</a> ?"},{"owner":{"account_id":3267339,"reputation":8505,"user_id":2751573,"accept_rate":52,"display_name":"Andrew"},"score":0,"creation_date":1476712815,"post_id":40088295,"comment_id":67449291,"body_markdown":"PSQL is basically a shell or a terminal for Postgres, with lots of proprietary syntax.  I&#39;d assume you could basically pull up a command shell from within your java program, but you&#39;d be better off writing actual SQL and running that thru JDBC.","body":"PSQL is basically a shell or a terminal for Postgres, with lots of proprietary syntax.  I&#39;d assume you could basically pull up a command shell from within your java program, but you&#39;d be better off writing actual SQL and running that thru JDBC."},{"owner":{"account_id":2454649,"reputation":34077,"user_id":2140160,"accept_rate":42,"display_name":"Mr Jedi"},"score":0,"creation_date":1476714194,"post_id":40088295,"comment_id":67450319,"body_markdown":"@Aaron yes, I mean PL/pgSQL","body":"@Aaron yes, I mean PL/pgSQL"},{"owner":{"account_id":2454649,"reputation":34077,"user_id":2140160,"accept_rate":42,"display_name":"Mr Jedi"},"score":0,"creation_date":1476714548,"post_id":40088295,"comment_id":67450568,"body_markdown":"@a_horse_with_no_name I want create function on new db, not run one","body":"@a_horse_with_no_name I want create function on new db, not run one"},{"owner":{"account_id":2454649,"reputation":34077,"user_id":2140160,"accept_rate":42,"display_name":"Mr Jedi"},"score":0,"creation_date":1476714827,"post_id":40088295,"comment_id":67450767,"body_markdown":"@a_horse_with_no_name how exacly? Running by statement.execute throws exception when script is in PL/pgSQL","body":"@a_horse_with_no_name how exacly? Running by statement.execute throws exception when script is in PL/pgSQL"}],"answers":[{"tags":[],"owner":{"account_id":7926575,"reputation":16936,"user_id":5985853,"display_name":"Alexey Soshin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1476714689,"creation_date":1476714689,"answer_id":40089110,"question_id":40088295,"body_markdown":"You should refer to PostgreSQL JDBC documentation for that:\r\nhttps://www.postgresql.org/docs/7.4/static/jdbc-callproc.html\r\n\r\nIn case your pgSQL returns a value call it like that:  \r\n\r\n    ResultSet rs = stmt.executeQuery(&quot;SELECT * FROM your_func()&quot;);\r\n\r\n","title":"Run PL/pgSQL script using java","body":"<p>You should refer to PostgreSQL JDBC documentation for that:\n<a href=\"https://www.postgresql.org/docs/7.4/static/jdbc-callproc.html\" rel=\"nofollow\">https://www.postgresql.org/docs/7.4/static/jdbc-callproc.html</a></p>\n\n<p>In case your pgSQL returns a value call it like that:  </p>\n\n<pre><code>ResultSet rs = stmt.executeQuery(\"SELECT * FROM your_func()\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8897,"reputation":11219,"user_id":16206,"accept_rate":78,"display_name":"borjab"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1476715406,"creation_date":1476714756,"answer_id":40089136,"question_id":40088295,"body_markdown":"PL/pgSQL is a special case of calling a stored procedure (or function or package). \r\n\r\nYou must use [CallableStatement][1] adding de corresponding parameters. See [this][2] example.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/sql/CallableStatement.html\r\n  [2]: https://stackoverflow.com/a/33061599/16206","title":"Run PL/pgSQL script using java","body":"<p>PL/pgSQL is a special case of calling a stored procedure (or function or package). </p>\n\n<p>You must use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/sql/CallableStatement.html\" rel=\"nofollow noreferrer\">CallableStatement</a> adding de corresponding parameters. See <a href=\"https://stackoverflow.com/a/33061599/16206\">this</a> example.</p>\n"},{"tags":[],"owner":{"display_name":"user330315"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1476715166,"creation_date":1476715166,"answer_id":40089285,"question_id":40088295,"body_markdown":"This works for me:\r\n\r\n    Connection con = DriverManager.getConnection(&quot;jdbc:postgresql://localhost/postgres&quot;, &quot;...&quot;, &quot;******&quot;);\r\n    \r\n    Statement stmt = con.createStatement();\r\n    \r\n    String create =\r\n      &quot;create function the_answer() \\n&quot; +\r\n      &quot;returns integer as $$\\n&quot; +\r\n      &quot;begin \\n&quot; +\r\n      &quot;   return 42;\\n&quot; +\r\n      &quot;end;\\n&quot; +\r\n      &quot;$$\\n&quot; +\r\n      &quot;language plpgsql;&quot;;\r\n    \r\n    // create the function\r\n    stmt.execute(create);\r\n    \r\n    // use the function\r\n    ResultSet rs = stmt.executeQuery(&quot;select the_answer()&quot;);\r\n    rs.next();\r\n    System.out.println(&quot;The answer is: &quot; + rs.getInt(1));\r\n\r\n","title":"Run PL/pgSQL script using java","body":"<p>This works for me:</p>\n\n<pre><code>Connection con = DriverManager.getConnection(\"jdbc:postgresql://localhost/postgres\", \"...\", \"******\");\n\nStatement stmt = con.createStatement();\n\nString create =\n  \"create function the_answer() \\n\" +\n  \"returns integer as $$\\n\" +\n  \"begin \\n\" +\n  \"   return 42;\\n\" +\n  \"end;\\n\" +\n  \"$$\\n\" +\n  \"language plpgsql;\";\n\n// create the function\nstmt.execute(create);\n\n// use the function\nResultSet rs = stmt.executeQuery(\"select the_answer()\");\nrs.next();\nSystem.out.println(\"The answer is: \" + rs.getInt(1));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19597297,"reputation":21,"user_id":14343015,"display_name":"Stephen Maina"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1602945480,"creation_date":1601824039,"answer_id":64196261,"question_id":40088295,"body_markdown":"I ran into this same issue, but I got to solve it in a slightly different way which I wish to share here for anyone else.\r\n\r\nI found using the JDBC approach rather clumsy. I wanted to use an approach as close to using pgqsl from the terminal as possible. \r\n\r\n**Requirement 1**: As a prerequisite to using this approach, you should be able to run pgsql command for the terminal already.\r\n\r\n**Requirement 2**: The file .pgpass in a user&#39;s home directory or the file referenced by PGPASSFILE can contain passwords to be used if the connection requires a password (and no password has been specified otherwise). This file should contain lines of the following format:\r\n\r\n```hostname:port:database:username:password```\r\n\r\nSo create a file **.pgpass** in your home directory (or wherever else you may feel like actually since you&#39;ll need to reference this location later anyway)\r\n\r\n**Requirement 3**: .pgpass requires restricted access, otherwise you will get this error - ```.pgpass&quot; has group or world access; permissions should be u=rw (0600) or less```. To fix this, just chmod the file to at least 600 ```chmod 600 ~/.pgpass```\r\n\r\n**Requirement 4**: Add this piece of java code to execute your sql script. Substitute \\&lt;username&gt;, \\&lt;hostname&gt; and \\&lt;database&gt; with the values you used in the **.pgpass** file\r\n```\r\nSystem.setProperty(&quot;PGPASSFILE&quot;, &quot;~/.pgpass&quot;);\r\nProcess process = Runtime.getRuntime().exec(&quot;psql -U &lt;username&gt; -h &lt;hostname&gt; -d &lt;database&gt; -f src/main/resources/schema.sql&quot;);\r\n        try (BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()))) {\r\n            String line;\r\n            while ((line = reader.readLine()) != null) {\r\n                System.out.println(line);\r\n            }\r\n        }\r\n        int ret = process.waitFor();\r\n        System.out.printf(&quot;Program exited with code: %d%n&quot;, ret);\r\n```\r\nAnd that should do it for you!","title":"Run PL/pgSQL script using java","body":"<p>I ran into this same issue, but I got to solve it in a slightly different way which I wish to share here for anyone else.</p>\n<p>I found using the JDBC approach rather clumsy. I wanted to use an approach as close to using pgqsl from the terminal as possible.</p>\n<p><strong>Requirement 1</strong>: As a prerequisite to using this approach, you should be able to run pgsql command for the terminal already.</p>\n<p><strong>Requirement 2</strong>: The file .pgpass in a user's home directory or the file referenced by PGPASSFILE can contain passwords to be used if the connection requires a password (and no password has been specified otherwise). This file should contain lines of the following format:</p>\n<p><code>hostname:port:database:username:password</code></p>\n<p>So create a file <strong>.pgpass</strong> in your home directory (or wherever else you may feel like actually since you'll need to reference this location later anyway)</p>\n<p><strong>Requirement 3</strong>: .pgpass requires restricted access, otherwise you will get this error - <code>.pgpass&quot; has group or world access; permissions should be u=rw (0600) or less</code>. To fix this, just chmod the file to at least 600 <code>chmod 600 ~/.pgpass</code></p>\n<p><strong>Requirement 4</strong>: Add this piece of java code to execute your sql script. Substitute &lt;username&gt;, &lt;hostname&gt; and &lt;database&gt; with the values you used in the <strong>.pgpass</strong> file</p>\n<pre><code>System.setProperty(&quot;PGPASSFILE&quot;, &quot;~/.pgpass&quot;);\nProcess process = Runtime.getRuntime().exec(&quot;psql -U &lt;username&gt; -h &lt;hostname&gt; -d &lt;database&gt; -f src/main/resources/schema.sql&quot;);\n        try (BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()))) {\n            String line;\n            while ((line = reader.readLine()) != null) {\n                System.out.println(line);\n            }\n        }\n        int ret = process.waitFor();\n        System.out.printf(&quot;Program exited with code: %d%n&quot;, ret);\n</code></pre>\n<p>And that should do it for you!</p>\n"},{"comments":[{"owner":{"account_id":13918997,"reputation":701,"user_id":10049966,"display_name":"Korfu"},"score":1,"creation_date":1666038936,"post_id":74059022,"comment_id":130836611,"body_markdown":"Please ensure that your answer will still make sense even if the links got removed or outdated.","body":"Please ensure that your answer will still make sense even if the links got removed or outdated."}],"tags":[],"owner":{"account_id":6905882,"reputation":1,"user_id":5303783,"display_name":"Carlos"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665678352,"creation_date":1665678352,"answer_id":74059022,"question_id":40088295,"body_markdown":"Here is the explain about buid, install and use PL/JAVA for PostgreSql:\r\n\r\nhttps://tada.github.io/pljava/ \r\n\r\nAnd here is an example &#39;hello world&#39; about it:\r\n\r\nhttps://tada.github.io/pljava/use/hello.html","title":"Run PL/pgSQL script using java","body":"<p>Here is the explain about buid, install and use PL/JAVA for PostgreSql:</p>\n<p><a href=\"https://tada.github.io/pljava/\" rel=\"nofollow noreferrer\">https://tada.github.io/pljava/</a></p>\n<p>And here is an example 'hello world' about it:</p>\n<p><a href=\"https://tada.github.io/pljava/use/hello.html\" rel=\"nofollow noreferrer\">https://tada.github.io/pljava/use/hello.html</a></p>\n"}],"owner":{"account_id":2454649,"reputation":34077,"user_id":2140160,"accept_rate":42,"display_name":"Mr Jedi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5089,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":40089285,"answer_count":5,"score":0,"last_activity_date":1665678352,"creation_date":1476712457,"question_id":40088295,"body_markdown":"It is possible to run PL/pgSQL script using java? I&#39;m creating postgres db from java code and need creating some functions on this db.\r\n\r\nI know I can run any sql script using DriverManager like that:\r\n\r\n    Connection connection = DriverManager.getConnection(\r\n                  connectionToDbUrl,\r\n                  getDbUser(),\r\n                  getDbPassword());\r\n    Statement statement = connection.createStatement()\r\n    statement.execute(&quot;select * from table);\r\n\r\nbut it will not execute PL/pgSQL script. Any ideas?\r\n\r\nEDIT: I mean PL/pgSQL\r\n\r\nEDIT 2: I found bug thanks @a_horse_with_no_name solution.\r\nI read script from file using BufferedReader and join all lines. Adding &quot; \\n&quot; on end of each line solves problem. \r\n\r\n    try (BufferedReader br = new BufferedReader(new FileReader(resource.getFile())))\r\n        {\r\n        statement.execute(br.lines().collect(Collectors.joining(&quot; \\n&quot;)));\r\n        }","title":"Run PL/pgSQL script using java","body":"<p>It is possible to run PL/pgSQL script using java? I'm creating postgres db from java code and need creating some functions on this db.</p>\n\n<p>I know I can run any sql script using DriverManager like that:</p>\n\n<pre><code>Connection connection = DriverManager.getConnection(\n              connectionToDbUrl,\n              getDbUser(),\n              getDbPassword());\nStatement statement = connection.createStatement()\nstatement.execute(\"select * from table);\n</code></pre>\n\n<p>but it will not execute PL/pgSQL script. Any ideas?</p>\n\n<p>EDIT: I mean PL/pgSQL</p>\n\n<p>EDIT 2: I found bug thanks @a_horse_with_no_name solution.\nI read script from file using BufferedReader and join all lines. Adding \" \\n\" on end of each line solves problem. </p>\n\n<pre><code>try (BufferedReader br = new BufferedReader(new FileReader(resource.getFile())))\n    {\n    statement.execute(br.lines().collect(Collectors.joining(\" \\n\")));\n    }\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1665671702,"post_id":74057235,"comment_id":130758281,"body_markdown":"Wouldn&#39;t it be simpler to use class [LocalTime](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalTime.html)?","body":"Wouldn&#39;t it be simpler to use class <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalTime.html\" rel=\"nofollow noreferrer\">LocalTime</a>?"},{"owner":{"account_id":26538003,"reputation":1,"user_id":20169202,"display_name":"JOHN"},"score":0,"creation_date":1665672429,"post_id":74057235,"comment_id":130758580,"body_markdown":"I am not sure to be honest I am new to coding and so I am kind of just putting it together in a way I understand","body":"I am not sure to be honest I am new to coding and so I am kind of just putting it together in a way I understand"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1665672598,"post_id":74057235,"comment_id":130758648,"body_markdown":"Maybe try Oracle&#39;s [Java tutorials](https://docs.oracle.com/javase/tutorial/index.html).","body":"Maybe try Oracle&#39;s <a href=\"https://docs.oracle.com/javase/tutorial/index.html\" rel=\"nofollow noreferrer\">Java tutorials</a>."}],"answers":[{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665674106,"creation_date":1665674106,"answer_id":74058151,"question_id":74057235,"body_markdown":"To simplify the implementation, it&#39;s beter to save `totalMinutes` internaly, but not the separate `hours` and `minutes`.\r\n\r\n```java\r\npublic final class DigitalClock {\r\n\r\n    private static final int MINUTES_PER_HOUR = (int)TimeUnit.HOURS.toMinutes(1);\r\n    private static final int MINUTES_PER_DAY = (int)TimeUnit.DAYS.toMinutes(1);\r\n\r\n    private int totalMinutes;\r\n\r\n    public DigitalClock(int hour, int minutes) {\r\n        setHour(hour);\r\n        setMinutes(minutes);\r\n    }\r\n\r\n    public int getHour() {\r\n        return totalMinutes / MINUTES_PER_HOUR;\r\n    }\r\n\r\n    public int getMinutes() {\r\n        return totalMinutes % MINUTES_PER_HOUR;\r\n    }\r\n\r\n    public void setHour(int hour) {\r\n        if (hour &lt; 0 || hour &gt; 23)\r\n            throw new IllegalArgumentException(&quot;&#39;hour&#39; should be within [0;23]&quot;);\r\n\r\n        totalMinutes = (int)TimeUnit.HOURS.toMinutes(hour) + getMinutes();\r\n    }\r\n\r\n    public void setMinutes(int minutes) {\r\n        if (minutes &lt; 0 || minutes &gt; 59)\r\n            throw new IllegalArgumentException(&quot;&#39;minutes&#39; should be within [0;59]&quot;);\r\n\r\n        totalMinutes = (int)TimeUnit.HOURS.toMinutes(getHour()) + minutes;\r\n    }\r\n\r\n    public void incrementHoursBy(int hour) {\r\n        totalMinutes = withinDay((int)TimeUnit.HOURS.toMinutes(hour) + totalMinutes);\r\n    }\r\n\r\n    public void incrementMinutesBy(int minutes) {\r\n        totalMinutes = withinDay(totalMinutes + minutes);\r\n    }\r\n\r\n    private static int withinDay(int totalMinutes) {\r\n        totalMinutes %= MINUTES_PER_DAY;\r\n\r\n        if (totalMinutes &lt; 0)\r\n            totalMinutes = MINUTES_PER_DAY + totalMinutes;\r\n\r\n        return totalMinutes;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return String.format(&quot;%02d:%02d&quot;, getHour(), getMinutes());\r\n    }\r\n\r\n}\r\n```","title":"Having trouble developing incrementMinutesBy method","body":"<p>To simplify the implementation, it's beter to save <code>totalMinutes</code> internaly, but not the separate <code>hours</code> and <code>minutes</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public final class DigitalClock {\n\n    private static final int MINUTES_PER_HOUR = (int)TimeUnit.HOURS.toMinutes(1);\n    private static final int MINUTES_PER_DAY = (int)TimeUnit.DAYS.toMinutes(1);\n\n    private int totalMinutes;\n\n    public DigitalClock(int hour, int minutes) {\n        setHour(hour);\n        setMinutes(minutes);\n    }\n\n    public int getHour() {\n        return totalMinutes / MINUTES_PER_HOUR;\n    }\n\n    public int getMinutes() {\n        return totalMinutes % MINUTES_PER_HOUR;\n    }\n\n    public void setHour(int hour) {\n        if (hour &lt; 0 || hour &gt; 23)\n            throw new IllegalArgumentException(&quot;'hour' should be within [0;23]&quot;);\n\n        totalMinutes = (int)TimeUnit.HOURS.toMinutes(hour) + getMinutes();\n    }\n\n    public void setMinutes(int minutes) {\n        if (minutes &lt; 0 || minutes &gt; 59)\n            throw new IllegalArgumentException(&quot;'minutes' should be within [0;59]&quot;);\n\n        totalMinutes = (int)TimeUnit.HOURS.toMinutes(getHour()) + minutes;\n    }\n\n    public void incrementHoursBy(int hour) {\n        totalMinutes = withinDay((int)TimeUnit.HOURS.toMinutes(hour) + totalMinutes);\n    }\n\n    public void incrementMinutesBy(int minutes) {\n        totalMinutes = withinDay(totalMinutes + minutes);\n    }\n\n    private static int withinDay(int totalMinutes) {\n        totalMinutes %= MINUTES_PER_DAY;\n\n        if (totalMinutes &lt; 0)\n            totalMinutes = MINUTES_PER_DAY + totalMinutes;\n\n        return totalMinutes;\n    }\n\n    @Override\n    public String toString() {\n        return String.format(&quot;%02d:%02d&quot;, getHour(), getMinutes());\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665677471,"creation_date":1665676619,"answer_id":74058668,"question_id":74057235,"body_markdown":"I believe that your calculations can also be achieved by subtraction. Consider the following example.\r\n\r\nIf `currentHour` is 23 and you add two hours, then the result should be 1 (one).\r\n```none\r\n23 + 2 = 25\r\n25 % 24 = 1\r\n25 - 24 = 1\r\n```\r\nSimilarly for `currentMinutes`. However, for `currentMinutes` you also need to increment `currentHour` if the result of the increment (to `currentMinutes`) is greater than `MINUTES_MAX`. And when you increment `currentHour` you also need to check whether the incremented `currentHour` value is greater than `HOUR_MAX`. In other words, if `currentHour` is 23 and `currentMinutes` is 55 and you `incrementMinutesBy(10)`, then:\r\n```none\r\n55 + 10 = 65\r\n65 - 60 = 5\r\n```\r\nTherefore `currentMinutes` is set to 5 and `currentHour` needs to be incremented. Therefore:\r\n```none\r\n23 + 1 = 24\r\n24 - 24 = 0\r\n```\r\nSo `currentHour` needs to be set to 0 (zero).\r\n\r\nAlso, as explained in the book [Java by Comparison](https://java.by-comparison.com/), methods need to *fail fast* so the first thing you should do in both method `incrementHoursBy` and method `incrementMInutesBy` is to check the value of the method argument &amp;ndash; and not the result of the calculation. After all, you wrote in the code comments that the pre-condition is that the method argument not be negative &amp;ndash; even though I think it would be logical to be able to set the digital clock backwards. I mean that&#39;s what you do when daylight saving ends and the clocks get turned back one hour. But then again, with your [digital] clock, you could achieve the same result by invoking `incrementHoursBy(HOUR_MAX)`\r\n\r\nConsider the following code:\r\n```java\r\npublic class DigitalClock {\r\n    private int currentHour;\r\n    private int currentMinutes;\r\n\r\n    public int getHour() {\r\n        return currentHour;\r\n    }\r\n\r\n    public void setHour(int currentHour) {\r\n        this.currentHour = currentHour;\r\n    }\r\n\r\n    public int getMinutes() {\r\n        return currentMinutes;\r\n    }\r\n\r\n    public void setMinutes(int currentMinutes) {\r\n        this.currentMinutes = currentMinutes;\r\n    }\r\n\r\n    public static final int HOUR_MAX = 23; // Refactored hourly max\r\n    public static final int HOUR_MIN = 0; // Refactored hourly min\r\n    public static final int MINUTES_MAX = 59; // Refactored minute max\r\n    public static final int MINUTES_MIN = 0; // Refactored minute min\r\n    public static final int TOTAL_NUMBERS_HOURS = 24;\r\n    public static final int TOTAL_NUMBERS_MINUTES = 60;\r\n\r\n    /**\r\n     * Creates a new digital clock with the time set at the given hours and minutes.\r\n     * \r\n     * @precondition 0 &lt;= hour &lt;= 23 AND 0 &lt;= minutes &lt;= 59\r\n     * @postcondition getHour()==hour AND getMinutes()==minutes\r\n     * \r\n     * @param hour    the hour to set for the time\r\n     * @param minutes the minutes to set for the time\r\n     */\r\n    public DigitalClock(int hour, int minutes) {\r\n        // enforcing hourly preconditions using appropriate ranges\r\n        if (hour &gt;= HOUR_MIN &amp;&amp; hour &lt;= HOUR_MAX) {\r\n            currentHour = hour;\r\n        }\r\n        else {\r\n            currentHour = 0;\r\n            // throw an exception on invalid hour&#39;s input\r\n            throw new IllegalArgumentException(&quot;Invalid input for Hours&quot;);\r\n        }\r\n        // enforcing minute preconditions using appropriate ranges\r\n        if (minutes &gt;= MINUTES_MIN &amp;&amp; minutes &lt;= MINUTES_MAX) {\r\n            currentMinutes = minutes;\r\n        }\r\n        else {\r\n            currentMinutes = 0;\r\n            // throw an exception on invalid minute&#39;s input\r\n            throw new IllegalArgumentException(&quot;Invalid input for Minutes&quot;);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Advances the entire clock by the given number of hours. If the hours advances\r\n     * past 23 they wrap around.\r\n     * \r\n     * @precondition hours &gt;= 0\r\n     * @postcondition the clock has moved forward by the appropriate number of hours\r\n     * \r\n     * @param hours the number of hours to add\r\n     */\r\n    public void incrementHoursBy(int hour) {\r\n        // if statement which prevents negative hours from being inputted\r\n        if (hour &lt; HOUR_MIN  ||  hour &gt; HOUR_MAX) {\r\n            throw new IllegalArgumentException(&quot;Invalid input. Between 0 &amp; 23&quot;);\r\n        }\r\n        int h = currentHour + hour;\r\n        // if statement enforcing precondition\r\n        if (h &gt; HOUR_MAX) {\r\n            h -= TOTAL_NUMBERS_HOURS;\r\n        }\r\n        // increasing this.hours by the parameter\r\n        setHour(h);\r\n    }\r\n\r\n    public void incrementMinutesBy(int minutes) {\r\n        if (minutes &lt; MINUTES_MIN  ||  minutes &gt; MINUTES_MAX) {\r\n            throw new IllegalArgumentException(&quot;Invalid input. Between 0 &amp; 59&quot;);\r\n        }\r\n        int m = getMinutes() + minutes;\r\n        if (m &gt; MINUTES_MAX) {\r\n            incrementHoursBy(1);\r\n            m -= TOTAL_NUMBERS_MINUTES;\r\n            setMinutes(m);\r\n        }\r\n    }\r\n\r\n    public static void main(String args[]) {\r\n        DigitalClock obj = new DigitalClock(22, 55);\r\n        obj.incrementHoursBy(1);\r\n        obj.incrementMinutesBy(10);\r\n        DigitalClockFormatter(obj);\r\n    }\r\n\r\n    public static void DigitalClockFormatter(DigitalClock dc) {\r\n        System.out.printf(&quot;%02d:%02d&quot;, dc.getHour(), dc.getMinutes());\r\n    }\r\n}\r\n```\r\nRunning above code displays:\r\n```none\r\n00:05\r\n```\r\nAlternatively, you could use the [date-time API](https://docs.oracle.com/javase/tutorial/datetime/index.html).\r\n```java\r\nimport java.time.LocalTime;\r\n\r\npublic class DigiClok {\r\n    private LocalTime clock;\r\n\r\n    public DigiClok(int hour, int minute) {\r\n        clock = LocalTime.of(hour, minute); // throws java.time.DateTimeException if invalid arguments\r\n    }\r\n\r\n    public int getHour() {\r\n        return clock.getHour();\r\n    }\r\n\r\n    public void setHour(int currentHour) {\r\n        // class &#39;java.time.LocalTime&#39; is immutable.\r\n        int minute = clock.getMinute();\r\n        clock = LocalTime.of(currentHour, minute);\r\n    }\r\n\r\n    public int getMinutes() {\r\n        return clock.getMinute();\r\n    }\r\n\r\n    public void setMinutes(int currentMinutes) {\r\n        int hour = clock.getHour();\r\n        clock = LocalTime.of(hour, currentMinutes);\r\n    }\r\n\r\n    public boolean equals(Object obj) {\r\n        boolean equal = this == obj;\r\n        if (!equal) {\r\n            if (obj instanceof DigiClok) {\r\n                DigiClok other = (DigiClok) obj;\r\n                equal = clock.equals(other.clock);\r\n            }\r\n        }\r\n        return equal;\r\n    }\r\n\r\n    public int hashCode() {\r\n        return clock.hashCode();\r\n    }\r\n\r\n    public String toString() {\r\n        return clock.toString();\r\n    }\r\n\r\n    public void incrementHoursBy(int hour) {\r\n        clock = clock.plusHours(hour); // also handles negative &#39;hour&#39;\r\n    }\r\n\r\n    public void incrementMinutesBy(int minutes) {\r\n        clock = clock.plusMinutes(minutes); // also handles negative &#39;minute&#39;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        DigiClok obj = new DigiClok(22, 55);\r\n        obj.incrementHoursBy(1);\r\n        obj.incrementMinutesBy(10);\r\n        System.out.println(obj);\r\n    }\r\n}\r\n```","title":"Having trouble developing incrementMinutesBy method","body":"<p>I believe that your calculations can also be achieved by subtraction. Consider the following example.</p>\n<p>If <code>currentHour</code> is 23 and you add two hours, then the result should be 1 (one).</p>\n<pre class=\"lang-none prettyprint-override\"><code>23 + 2 = 25\n25 % 24 = 1\n25 - 24 = 1\n</code></pre>\n<p>Similarly for <code>currentMinutes</code>. However, for <code>currentMinutes</code> you also need to increment <code>currentHour</code> if the result of the increment (to <code>currentMinutes</code>) is greater than <code>MINUTES_MAX</code>. And when you increment <code>currentHour</code> you also need to check whether the incremented <code>currentHour</code> value is greater than <code>HOUR_MAX</code>. In other words, if <code>currentHour</code> is 23 and <code>currentMinutes</code> is 55 and you <code>incrementMinutesBy(10)</code>, then:</p>\n<pre class=\"lang-none prettyprint-override\"><code>55 + 10 = 65\n65 - 60 = 5\n</code></pre>\n<p>Therefore <code>currentMinutes</code> is set to 5 and <code>currentHour</code> needs to be incremented. Therefore:</p>\n<pre class=\"lang-none prettyprint-override\"><code>23 + 1 = 24\n24 - 24 = 0\n</code></pre>\n<p>So <code>currentHour</code> needs to be set to 0 (zero).</p>\n<p>Also, as explained in the book <a href=\"https://java.by-comparison.com/\" rel=\"nofollow noreferrer\">Java by Comparison</a>, methods need to <em>fail fast</em> so the first thing you should do in both method <code>incrementHoursBy</code> and method <code>incrementMInutesBy</code> is to check the value of the method argument – and not the result of the calculation. After all, you wrote in the code comments that the pre-condition is that the method argument not be negative – even though I think it would be logical to be able to set the digital clock backwards. I mean that's what you do when daylight saving ends and the clocks get turned back one hour. But then again, with your [digital] clock, you could achieve the same result by invoking <code>incrementHoursBy(HOUR_MAX)</code></p>\n<p>Consider the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DigitalClock {\n    private int currentHour;\n    private int currentMinutes;\n\n    public int getHour() {\n        return currentHour;\n    }\n\n    public void setHour(int currentHour) {\n        this.currentHour = currentHour;\n    }\n\n    public int getMinutes() {\n        return currentMinutes;\n    }\n\n    public void setMinutes(int currentMinutes) {\n        this.currentMinutes = currentMinutes;\n    }\n\n    public static final int HOUR_MAX = 23; // Refactored hourly max\n    public static final int HOUR_MIN = 0; // Refactored hourly min\n    public static final int MINUTES_MAX = 59; // Refactored minute max\n    public static final int MINUTES_MIN = 0; // Refactored minute min\n    public static final int TOTAL_NUMBERS_HOURS = 24;\n    public static final int TOTAL_NUMBERS_MINUTES = 60;\n\n    /**\n     * Creates a new digital clock with the time set at the given hours and minutes.\n     * \n     * @precondition 0 &lt;= hour &lt;= 23 AND 0 &lt;= minutes &lt;= 59\n     * @postcondition getHour()==hour AND getMinutes()==minutes\n     * \n     * @param hour    the hour to set for the time\n     * @param minutes the minutes to set for the time\n     */\n    public DigitalClock(int hour, int minutes) {\n        // enforcing hourly preconditions using appropriate ranges\n        if (hour &gt;= HOUR_MIN &amp;&amp; hour &lt;= HOUR_MAX) {\n            currentHour = hour;\n        }\n        else {\n            currentHour = 0;\n            // throw an exception on invalid hour's input\n            throw new IllegalArgumentException(&quot;Invalid input for Hours&quot;);\n        }\n        // enforcing minute preconditions using appropriate ranges\n        if (minutes &gt;= MINUTES_MIN &amp;&amp; minutes &lt;= MINUTES_MAX) {\n            currentMinutes = minutes;\n        }\n        else {\n            currentMinutes = 0;\n            // throw an exception on invalid minute's input\n            throw new IllegalArgumentException(&quot;Invalid input for Minutes&quot;);\n        }\n    }\n\n    /**\n     * Advances the entire clock by the given number of hours. If the hours advances\n     * past 23 they wrap around.\n     * \n     * @precondition hours &gt;= 0\n     * @postcondition the clock has moved forward by the appropriate number of hours\n     * \n     * @param hours the number of hours to add\n     */\n    public void incrementHoursBy(int hour) {\n        // if statement which prevents negative hours from being inputted\n        if (hour &lt; HOUR_MIN  ||  hour &gt; HOUR_MAX) {\n            throw new IllegalArgumentException(&quot;Invalid input. Between 0 &amp; 23&quot;);\n        }\n        int h = currentHour + hour;\n        // if statement enforcing precondition\n        if (h &gt; HOUR_MAX) {\n            h -= TOTAL_NUMBERS_HOURS;\n        }\n        // increasing this.hours by the parameter\n        setHour(h);\n    }\n\n    public void incrementMinutesBy(int minutes) {\n        if (minutes &lt; MINUTES_MIN  ||  minutes &gt; MINUTES_MAX) {\n            throw new IllegalArgumentException(&quot;Invalid input. Between 0 &amp; 59&quot;);\n        }\n        int m = getMinutes() + minutes;\n        if (m &gt; MINUTES_MAX) {\n            incrementHoursBy(1);\n            m -= TOTAL_NUMBERS_MINUTES;\n            setMinutes(m);\n        }\n    }\n\n    public static void main(String args[]) {\n        DigitalClock obj = new DigitalClock(22, 55);\n        obj.incrementHoursBy(1);\n        obj.incrementMinutesBy(10);\n        DigitalClockFormatter(obj);\n    }\n\n    public static void DigitalClockFormatter(DigitalClock dc) {\n        System.out.printf(&quot;%02d:%02d&quot;, dc.getHour(), dc.getMinutes());\n    }\n}\n</code></pre>\n<p>Running above code displays:</p>\n<pre class=\"lang-none prettyprint-override\"><code>00:05\n</code></pre>\n<p>Alternatively, you could use the <a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">date-time API</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.time.LocalTime;\n\npublic class DigiClok {\n    private LocalTime clock;\n\n    public DigiClok(int hour, int minute) {\n        clock = LocalTime.of(hour, minute); // throws java.time.DateTimeException if invalid arguments\n    }\n\n    public int getHour() {\n        return clock.getHour();\n    }\n\n    public void setHour(int currentHour) {\n        // class 'java.time.LocalTime' is immutable.\n        int minute = clock.getMinute();\n        clock = LocalTime.of(currentHour, minute);\n    }\n\n    public int getMinutes() {\n        return clock.getMinute();\n    }\n\n    public void setMinutes(int currentMinutes) {\n        int hour = clock.getHour();\n        clock = LocalTime.of(hour, currentMinutes);\n    }\n\n    public boolean equals(Object obj) {\n        boolean equal = this == obj;\n        if (!equal) {\n            if (obj instanceof DigiClok) {\n                DigiClok other = (DigiClok) obj;\n                equal = clock.equals(other.clock);\n            }\n        }\n        return equal;\n    }\n\n    public int hashCode() {\n        return clock.hashCode();\n    }\n\n    public String toString() {\n        return clock.toString();\n    }\n\n    public void incrementHoursBy(int hour) {\n        clock = clock.plusHours(hour); // also handles negative 'hour'\n    }\n\n    public void incrementMinutesBy(int minutes) {\n        clock = clock.plusMinutes(minutes); // also handles negative 'minute'\n    }\n\n    public static void main(String[] args) {\n        DigiClok obj = new DigiClok(22, 55);\n        obj.incrementHoursBy(1);\n        obj.incrementMinutesBy(10);\n        System.out.println(obj);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":26538003,"reputation":1,"user_id":20169202,"display_name":"JOHN"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1665677471,"creation_date":1665670327,"question_id":74057235,"body_markdown":"I am trying to create a digital clock an am currently trying to fix my `incrementMinutesBy` method.&#160;\r\n\r\nI need this method to increase both the minutes and if necessary the hours. I need the final `this.minutes` to be the sum of the previous `this.minutes` and the parameter, modulo the number of minutes in an hour.\r\n\r\nI also need the final `this.hours` to be the sum of the previous `this.minutes` and the parameter, divided by the number of minutes in an hour. My method so far begins on line 94.\r\n\r\n```java\r\npublic class DigitalClock\r\n{\r\n    private int currentHour;\r\n    private int currentMinutes;\r\n\r\n    public int getHour()\r\n    {\r\n        return currentHour;\r\n    }\r\n\r\n    public void setHour(int currentHour)\r\n    {\r\n        this.currentHour = currentHour;\r\n    }\r\n\r\n    public int getMinutes()\r\n    {\r\n        return currentMinutes;\r\n    }\r\n\r\n    public void setMinutes(int currentMinutes)\r\n    {\r\n        this.currentMinutes = currentMinutes;\r\n    }\r\n\r\n    public static final int HOUR_MAX = 23; // Refactored hourly max\r\n    public static final int HOUR_MIN = 0; // Refactored hourly min\r\n    public static final int MINUTES_MAX = 59; // Refactored minute max\r\n    public static final int MINUTES_MIN = 0; // Refactored minute min\r\n    public static final int TOTAL_NUMBERS_HOURS = 24;\r\n    public static final int TOTAL_NUMBERS_MINUTES = 60;\r\n\r\n    /**\r\n     * Creates a new digital clock with the time set at the given\r\n     * hours and minutes.\r\n     * \r\n     * @precondition 0 &lt;= hour &lt;= 23 AND 0 &lt;= minutes &lt;= 59\r\n     * @postcondition getHour()==hour AND getMinutes()==minutes\r\n     * \r\n     * @param hour the hour to set for the time\r\n     * @param minutes the minutes to set for the time\r\n     */\r\n    public DigitalClock (int hour, int minutes) // 2-parameter constructor (parameters: int hour and int minutes)\r\n    {\r\n        // enforcing hourly preconditions using appropriate ranges\r\n        if (hour &gt;= HOUR_MIN &amp;&amp; hour &lt;= HOUR_MAX){\r\n            currentHour = hour;\r\n        }\r\n        else {\r\n            currentHour = 0;\r\n            //throw an exception on invalid hour&#39;s input\r\n            throw new IllegalArgumentException(&quot;Invalid input for Hours&quot;);\r\n        }\r\n        // enforcing minute preconditions using appropriate ranges\r\n        if (minutes &gt;= MINUTES_MIN &amp;&amp; minutes &lt;= MINUTES_MAX) {\r\n            currentMinutes = minutes;\r\n        }\r\n        else {\r\n            currentMinutes = 0;\r\n            //throw an exception on invalid minute&#39;s input\r\n            throw new IllegalArgumentException(&quot;Invalid input for Minutes&quot;);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Advances the entire clock by the given number of hours.\r\n     * If the hours advances past 23 they wrap around.\r\n     * \r\n     * @precondition hours &gt;= 0\r\n     * @postcondition  the clock has moved forward\r\n     *  by the appropriate number of hours\r\n     * \r\n     * @param hours the number of hours to add\r\n     */\r\n    public void incrementHoursBy(int hour)\r\n    {\r\n        int h = getHour()+hour; {\r\n        // if statement enforcing precondition\r\n        if(h&gt;HOUR_MAX)\r\n            h%=TOTAL_NUMBERS_HOURS;\r\n        // increasing this.hours by the parameter \r\n        setHour(h);}\r\n        // if statement which prevents negative hours from being inputted\r\n        if (h&lt;HOUR_MIN) {\r\n            throw new IllegalArgumentException(&quot;Invalid input. No negative hours&quot;);\r\n        }\r\n    }\r\n    \r\n    public void incrementMinutesBy(int minutes) {\r\n        int m = getMinutes()+minutes;\r\n        m++;\r\n        if (m &gt; MINUTES_MAX) {\r\n            m%=TOTAL_NUMBERS_MINUTES;\r\n            setMinutes(m);\r\n        }\r\n        if (m&lt;MINUTES_MIN) {\r\n            throw new IllegalArgumentException(&quot;Invalid input. No negative minutes&quot;);\r\n        }\r\n        else\r\n        {\r\n            System.out.println(&quot;Minutes are: &quot;+m);\r\n        }\r\n    }\r\n\r\n    public static void main(String args[])\r\n    {\r\n        DigitalClock obj=new DigitalClock(12, 15);\r\n        obj.incrementHoursBy(HOUR_MAX);\r\n        obj.incrementMinutesBy(MINUTES_MAX);\r\n        DigitalClockFormatter();\r\n    }\r\n\r\n    public static void DigitalClockFormatter() {\r\n        // method for class DigitalClockFormatter\r\n\r\n    }\r\n}\r\n```\r\n","title":"Having trouble developing incrementMinutesBy method","body":"<p>I am trying to create a digital clock an am currently trying to fix my <code>incrementMinutesBy</code> method. </p>\n<p>I need this method to increase both the minutes and if necessary the hours. I need the final <code>this.minutes</code> to be the sum of the previous <code>this.minutes</code> and the parameter, modulo the number of minutes in an hour.</p>\n<p>I also need the final <code>this.hours</code> to be the sum of the previous <code>this.minutes</code> and the parameter, divided by the number of minutes in an hour. My method so far begins on line 94.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DigitalClock\n{\n    private int currentHour;\n    private int currentMinutes;\n\n    public int getHour()\n    {\n        return currentHour;\n    }\n\n    public void setHour(int currentHour)\n    {\n        this.currentHour = currentHour;\n    }\n\n    public int getMinutes()\n    {\n        return currentMinutes;\n    }\n\n    public void setMinutes(int currentMinutes)\n    {\n        this.currentMinutes = currentMinutes;\n    }\n\n    public static final int HOUR_MAX = 23; // Refactored hourly max\n    public static final int HOUR_MIN = 0; // Refactored hourly min\n    public static final int MINUTES_MAX = 59; // Refactored minute max\n    public static final int MINUTES_MIN = 0; // Refactored minute min\n    public static final int TOTAL_NUMBERS_HOURS = 24;\n    public static final int TOTAL_NUMBERS_MINUTES = 60;\n\n    /**\n     * Creates a new digital clock with the time set at the given\n     * hours and minutes.\n     * \n     * @precondition 0 &lt;= hour &lt;= 23 AND 0 &lt;= minutes &lt;= 59\n     * @postcondition getHour()==hour AND getMinutes()==minutes\n     * \n     * @param hour the hour to set for the time\n     * @param minutes the minutes to set for the time\n     */\n    public DigitalClock (int hour, int minutes) // 2-parameter constructor (parameters: int hour and int minutes)\n    {\n        // enforcing hourly preconditions using appropriate ranges\n        if (hour &gt;= HOUR_MIN &amp;&amp; hour &lt;= HOUR_MAX){\n            currentHour = hour;\n        }\n        else {\n            currentHour = 0;\n            //throw an exception on invalid hour's input\n            throw new IllegalArgumentException(&quot;Invalid input for Hours&quot;);\n        }\n        // enforcing minute preconditions using appropriate ranges\n        if (minutes &gt;= MINUTES_MIN &amp;&amp; minutes &lt;= MINUTES_MAX) {\n            currentMinutes = minutes;\n        }\n        else {\n            currentMinutes = 0;\n            //throw an exception on invalid minute's input\n            throw new IllegalArgumentException(&quot;Invalid input for Minutes&quot;);\n        }\n    }\n\n    /**\n     * Advances the entire clock by the given number of hours.\n     * If the hours advances past 23 they wrap around.\n     * \n     * @precondition hours &gt;= 0\n     * @postcondition  the clock has moved forward\n     *  by the appropriate number of hours\n     * \n     * @param hours the number of hours to add\n     */\n    public void incrementHoursBy(int hour)\n    {\n        int h = getHour()+hour; {\n        // if statement enforcing precondition\n        if(h&gt;HOUR_MAX)\n            h%=TOTAL_NUMBERS_HOURS;\n        // increasing this.hours by the parameter \n        setHour(h);}\n        // if statement which prevents negative hours from being inputted\n        if (h&lt;HOUR_MIN) {\n            throw new IllegalArgumentException(&quot;Invalid input. No negative hours&quot;);\n        }\n    }\n    \n    public void incrementMinutesBy(int minutes) {\n        int m = getMinutes()+minutes;\n        m++;\n        if (m &gt; MINUTES_MAX) {\n            m%=TOTAL_NUMBERS_MINUTES;\n            setMinutes(m);\n        }\n        if (m&lt;MINUTES_MIN) {\n            throw new IllegalArgumentException(&quot;Invalid input. No negative minutes&quot;);\n        }\n        else\n        {\n            System.out.println(&quot;Minutes are: &quot;+m);\n        }\n    }\n\n    public static void main(String args[])\n    {\n        DigitalClock obj=new DigitalClock(12, 15);\n        obj.incrementHoursBy(HOUR_MAX);\n        obj.incrementMinutesBy(MINUTES_MAX);\n        DigitalClockFormatter();\n    }\n\n    public static void DigitalClockFormatter() {\n        // method for class DigitalClockFormatter\n\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security","jwt"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1665227159,"post_id":73996273,"comment_id":130653392,"body_markdown":"Who (do you think) calls/invokes `configure(Global)` methods?","body":"Who (do you think) calls/invokes <code>configure(Global)</code> methods?"}],"answers":[{"tags":[],"owner":{"account_id":16721431,"reputation":96,"user_id":12914089,"display_name":"Sudarshan"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1665225701,"creation_date":1665225701,"answer_id":73996322,"question_id":73996273,"body_markdown":"Move the csrf.disable() and other configurations from the **protected void configure(HttpSecurity http)** method to the **SecurityFilterChain filterChain(HttpSecurity http)** method.\r\n\r\n**Explainaiton:**\r\n\r\nThe problem here is your SecurityConfig class. Since, your class is not extending the the WebSecurityConfigurerAdapter, **protected void configure(HttpSecurity http)** will not have any effect on your applicaiton. All the configuation are applied from the @Bean of **SecurityFilterChain filterChain(HttpSecurity http)** method. ","title":"Login Endpoint returns 403 forbidding in post man but browser authentication works (Spring boot)","body":"<p>Move the csrf.disable() and other configurations from the <strong>protected void configure(HttpSecurity http)</strong> method to the <strong>SecurityFilterChain filterChain(HttpSecurity http)</strong> method.</p>\n<p><strong>Explainaiton:</strong></p>\n<p>The problem here is your SecurityConfig class. Since, your class is not extending the the WebSecurityConfigurerAdapter, <strong>protected void configure(HttpSecurity http)</strong> will not have any effect on your applicaiton. All the configuation are applied from the @Bean of <strong>SecurityFilterChain filterChain(HttpSecurity http)</strong> method.</p>\n"},{"tags":[],"owner":{"account_id":26562582,"reputation":71,"user_id":20190174,"display_name":"Sumit Dhyani"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665677226,"creation_date":1665225907,"answer_id":73996352,"question_id":73996273,"body_markdown":"Change the below method from:\r\n\r\n```\r\nprotected void configure(HttpSecurity http) throws Exception {\r\n  http\r\n    .cors()\r\n    .and()\r\n    .csrf()\r\n    .disable()\r\n    .sessionManagement()\r\n    .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n    .and()\r\n    .authorizeRequests()\r\n    .antMatchers(HttpMethod.POST, &quot;/login&quot;)\r\n    .permitAll()\r\n    .anyRequest()\r\n    .authenticated();\r\n}\r\n```\r\n\r\nTo:\r\n \r\n```\r\nprotected void configure(HttpSecurity http) throws Exception{\r\n  http\r\n    .cors()\r\n    .and()\r\n    .csrf()\r\n    .disable()\r\n    .sessionManagement()\r\n    .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n    .and()\r\n    .authorizeRequests()\r\n    .httpBasic()\r\n    .and()\r\n    .antMatchers(HttpMethod.POST, &quot;/login&quot;)\r\n    .permitAll()\r\n    .anyRequest()\r\n    .authenticated();\r\n}\r\n```\r\n\r\nYou have to add `httpBasic()` to this method\r\n\r\nAlso you send the username and password from authorization tab in postman directly by selecting basic auth option. And try accessing any protected link.\r\n\r\n\r\n[This will show how to select basic auth]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/b0fZO.png","title":"Login Endpoint returns 403 forbidding in post man but browser authentication works (Spring boot)","body":"<p>Change the below method from:</p>\n<pre><code>protected void configure(HttpSecurity http) throws Exception {\n  http\n    .cors()\n    .and()\n    .csrf()\n    .disable()\n    .sessionManagement()\n    .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n    .and()\n    .authorizeRequests()\n    .antMatchers(HttpMethod.POST, &quot;/login&quot;)\n    .permitAll()\n    .anyRequest()\n    .authenticated();\n}\n</code></pre>\n<p>To:</p>\n<pre><code>protected void configure(HttpSecurity http) throws Exception{\n  http\n    .cors()\n    .and()\n    .csrf()\n    .disable()\n    .sessionManagement()\n    .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n    .and()\n    .authorizeRequests()\n    .httpBasic()\n    .and()\n    .antMatchers(HttpMethod.POST, &quot;/login&quot;)\n    .permitAll()\n    .anyRequest()\n    .authenticated();\n}\n</code></pre>\n<p>You have to add <code>httpBasic()</code> to this method</p>\n<p>Also you send the username and password from authorization tab in postman directly by selecting basic auth option. And try accessing any protected link.</p>\n<p>[This will show how to select basic auth]</p>\n"},{"tags":[],"owner":{"account_id":26552394,"reputation":306,"user_id":20181494,"display_name":"Janil101"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665225997,"creation_date":1665225997,"answer_id":73996360,"question_id":73996273,"body_markdown":"replace this code with configure (HttpSecurity).\r\n\r\n```\r\nprotected void configure(HttpSecurity http) throws Exception{\r\n        http.cors().and().csrf().disable().sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and().authorizeRequests().antMatchers(HttpMethod.POST, &quot;/login&quot;).permitAll().and().httpBasic();\r\n\r\n    }\r\n```","title":"Login Endpoint returns 403 forbidding in post man but browser authentication works (Spring boot)","body":"<p>replace this code with configure (HttpSecurity).</p>\n<pre><code>protected void configure(HttpSecurity http) throws Exception{\n        http.cors().and().csrf().disable().sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and().authorizeRequests().antMatchers(HttpMethod.POST, &quot;/login&quot;).permitAll().and().httpBasic();\n\n    }\n</code></pre>\n"}],"owner":{"account_id":17965259,"reputation":123,"user_id":13055269,"display_name":"caged_raven_wings"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":490,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73996322,"answer_count":3,"score":1,"last_activity_date":1665677226,"creation_date":1665225126,"question_id":73996273,"body_markdown":"I am trying to secure/authorize my endpoints with JWT. The token is to be generated after successful login. The problem is anytime I call the login endpoint http://localhost:8080/login and pass in the credentials, it returns a 403 response.\r\nHere is my spring security configuration\r\n\r\n``` \r\n@Configuration\r\npublic class SecurityConfig {\r\n    \r\n    @Autowired\r\n    private UserDetailsServiceImpl userDetailsService;\r\n\r\n   \r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http.authorizeHttpRequests((authz) -&gt; authz.anyRequest().authenticated()).httpBasic(withDefaults());\r\n        return http.build();\r\n    }\r\n\r\n\r\n    @Autowired\r\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception\r\n    {\r\n        auth.userDetailsService(userDetailsService).passwordEncoder(new BCryptPasswordEncoder());\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationManager getAuthenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception {\r\n        return authenticationConfiguration.getAuthenticationManager();\r\n    }\r\n\r\n\r\n    protected void configure(HttpSecurity http) throws Exception{\r\n        http.cors().and().csrf().disable().sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and().authorizeRequests().antMatchers(HttpMethod.POST, &quot;/login&quot;).permitAll().anyRequest().authenticated();\r\n\r\n    }\r\n   \r\n\r\n}\r\n```\r\nHere is my LoginController\r\n``` \r\n@RestController\r\npublic class LoginController {\r\n\r\n    @Autowired\r\n    private JwtService jwtService;\r\n\r\n    @Autowired\r\n    AuthenticationManager authenticationManager;\r\n\r\n    @RequestMapping(value=&quot;/login&quot;, method=RequestMethod.POST)\r\n    \r\n    public ResponseEntity&lt;?&gt; getToken(@RequestBody AccountCredentials credentials) {\r\n        // Generate token and send it in the response \r\n        //Authorization\r\n        // header\r\n        UsernamePasswordAuthenticationToken creds = new UsernamePasswordAuthenticationToken(credentials.getUsername(), credentials.getPassword());\r\n        Authentication auth = authenticationManager.authenticate(creds);\r\n        String jwts = jwtService.getToken(auth.getName());\r\n\r\n        return  ResponseEntity.ok().header(HttpHeaders.AUTHORIZATION, &quot;Bearer &quot; + jwts).\r\n        header(HttpHeaders.ACCESS_CONTROL_EXPOSE_HEADERS, &quot;Authorization&quot;).build();\r\n\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\nHere is my UserServiceImplementation\r\n```\r\n@Service\r\npublic class UserDetailsServiceImpl implements UserDetailsService {\r\n\r\n    @Autowired\r\n    private UserRepository repository;\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        Optional&lt;User&gt; user =\r\n        repository.findByUsername(username);\r\n        UserBuilder builder = null;\r\n        if (user.isPresent()) {\r\n            User currentUser = user.get();\r\n            builder =\r\n            org.springframework.security.core.userdetails.\r\n            User.withUsername(username);\r\n            builder.password(currentUser.getPassword());\r\n            builder.roles(currentUser.getRole());\r\n        } else {\r\n            throw new UsernameNotFoundException(&quot;User not found.&quot;);\r\n        }\r\n        return builder.build();\r\n    }\r\n\r\n}\r\n\r\n```\r\nIf I visit http://localhost:8080/api in the browser and authenticate, it works.\r\n\r\nThis is my postman request \r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n\r\nI enabled debug, Here are the logs when the endpoint gets called.\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/g8ODL.png\r\n  [2]: https://i.stack.imgur.com/fEL6l.png\r\n\r\n\r\nI don&#39;t know what I am doing wrong, Kindly Help.","title":"Login Endpoint returns 403 forbidding in post man but browser authentication works (Spring boot)","body":"<p>I am trying to secure/authorize my endpoints with JWT. The token is to be generated after successful login. The problem is anytime I call the login endpoint http://localhost:8080/login and pass in the credentials, it returns a 403 response.\nHere is my spring security configuration</p>\n<pre><code>@Configuration\npublic class SecurityConfig {\n    \n    @Autowired\n    private UserDetailsServiceImpl userDetailsService;\n\n   \n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.authorizeHttpRequests((authz) -&gt; authz.anyRequest().authenticated()).httpBasic(withDefaults());\n        return http.build();\n    }\n\n\n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception\n    {\n        auth.userDetailsService(userDetailsService).passwordEncoder(new BCryptPasswordEncoder());\n    }\n\n    @Bean\n    public AuthenticationManager getAuthenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n    }\n\n\n    protected void configure(HttpSecurity http) throws Exception{\n        http.cors().and().csrf().disable().sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and().authorizeRequests().antMatchers(HttpMethod.POST, &quot;/login&quot;).permitAll().anyRequest().authenticated();\n\n    }\n   \n\n}\n</code></pre>\n<p>Here is my LoginController</p>\n<pre><code>@RestController\npublic class LoginController {\n\n    @Autowired\n    private JwtService jwtService;\n\n    @Autowired\n    AuthenticationManager authenticationManager;\n\n    @RequestMapping(value=&quot;/login&quot;, method=RequestMethod.POST)\n    \n    public ResponseEntity&lt;?&gt; getToken(@RequestBody AccountCredentials credentials) {\n        // Generate token and send it in the response \n        //Authorization\n        // header\n        UsernamePasswordAuthenticationToken creds = new UsernamePasswordAuthenticationToken(credentials.getUsername(), credentials.getPassword());\n        Authentication auth = authenticationManager.authenticate(creds);\n        String jwts = jwtService.getToken(auth.getName());\n\n        return  ResponseEntity.ok().header(HttpHeaders.AUTHORIZATION, &quot;Bearer &quot; + jwts).\n        header(HttpHeaders.ACCESS_CONTROL_EXPOSE_HEADERS, &quot;Authorization&quot;).build();\n\n    }\n}\n\n\n</code></pre>\n<p>Here is my UserServiceImplementation</p>\n<pre><code>@Service\npublic class UserDetailsServiceImpl implements UserDetailsService {\n\n    @Autowired\n    private UserRepository repository;\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        Optional&lt;User&gt; user =\n        repository.findByUsername(username);\n        UserBuilder builder = null;\n        if (user.isPresent()) {\n            User currentUser = user.get();\n            builder =\n            org.springframework.security.core.userdetails.\n            User.withUsername(username);\n            builder.password(currentUser.getPassword());\n            builder.roles(currentUser.getRole());\n        } else {\n            throw new UsernameNotFoundException(&quot;User not found.&quot;);\n        }\n        return builder.build();\n    }\n\n}\n\n</code></pre>\n<p>If I visit http://localhost:8080/api in the browser and authenticate, it works.</p>\n<p>This is my postman request\n<a href=\"https://i.stack.imgur.com/g8ODL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/g8ODL.png\" alt=\"enter image description here\" /></a></p>\n<p>I enabled debug, Here are the logs when the endpoint gets called.\n<a href=\"https://i.stack.imgur.com/fEL6l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fEL6l.png\" alt=\"enter image description here\" /></a></p>\n<p>I don't know what I am doing wrong, Kindly Help.</p>\n"},{"tags":["java","oracle"],"comments":[{"owner":{"account_id":4394619,"reputation":486,"user_id":3582089,"accept_rate":95,"display_name":"moore1emu"},"score":0,"creation_date":1684942042,"post_id":72562846,"comment_id":134592032,"body_markdown":"Did you ever get this figured out? I am getting the same error and cant seem to get passed it","body":"Did you ever get this figured out? I am getting the same error and cant seem to get passed it"},{"owner":{"account_id":19987192,"reputation":11,"user_id":14649099,"display_name":"oinererhuf"},"score":1,"creation_date":1685099591,"post_id":72562846,"comment_id":134617657,"body_markdown":"I used JDK 8u202 version to install the ODI","body":"I used JDK 8u202 version to install the ODI"}],"owner":{"account_id":19987192,"reputation":11,"user_id":14649099,"display_name":"oinererhuf"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":597,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665677184,"creation_date":1654787942,"question_id":72562846,"body_markdown":"I&#39;m trying to install the Oracle Fusion MiddleWare ODI 12.2.1.4.0 and getting the below error running the jar file. I&#39;m not able to figure out how to resolve this error.\r\n```\r\nC:\\Users\\test\\Downloads\\V983389-01&gt;java -jar fmw_12.2.1.4.0_odi.jar\r\nLauncher log file is C:\\Users\\test\\AppData\\Local\\Temp\\OraInstall2022-06-09_10-50-42AM\\launcher2022-06-09_10-50-42AM.log.\r\nExtracting the installer . . . . . . . . . . . . . . . . . . . . . . . . Done\r\nChecking if CPU speed is above 300 MHz.   Actual 2592    Passed\r\nChecking monitor: must be configured to display at least 256 colors.   Actual 4294967296    Passed\r\nChecking swap space: must be greater than 512 MB    Passed\r\nChecking if this platform requires a 64-bit JVM.   Actual 64    Passed (64-bit not required)\r\nChecking temp space: must be greater than 300 MB.   Actual 267890 MB    Passed\r\nPreparing to launch the Oracle Universal Installer from C:\\Users\\test\\AppData\\Local\\Temp\\OraInstall2022-06-09_10-50-42AM\r\nLog: C:\\Users\\test\\AppData\\Local\\Temp\\OraInstall2022-06-09_10-50-42AM\\install2022-06-09_10-50-42AM.log\r\nJun 09, 2022 10:51:07 AM com.sun.xml.bind.v2.runtime.reflect.opt.Injector &lt;clinit&gt;\r\nSEVERE: null\r\njava.security.PrivilegedActionException: java.lang.NoSuchMethodException: sun.misc.Unsafe.defineClass(java.lang.String,[B,int,int,java.lang.ClassLoader,java.security.ProtectionDomain)\r\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:573)\r\n        at com.sun.xml.bind.v2.runtime.reflect.opt.Injector.&lt;clinit&gt;(Injector.java:197)\r\n        ... \r\n        at javax.xml.bind.ContextFinder.find(ContextFinder.java:345)\r\n        at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:482)\r\n        at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:445)\r\n        at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:356)\r\n        at oracle.as.install.engine.config.xml.EngineConfigParser.getEngineConfig(EngineConfigParser.java:65)\r\n        ... \r\n        ... 30 more\r\n\r\njava.lang.NullPointerException: Cannot invoke &quot;java.lang.reflect.Method.invoke(Object, Object[])&quot; because &quot;com.sun.xml.bind.v2.runtime.reflect.opt.Injector.defineClass&quot; is null\r\n        at com.sun.xml.bind.v2.runtime.reflect.opt.Injector.inject(Injector.java:311)\r\n        ... \r\n        at oracle.sysman.oio.oioc.OiocOneClickInstaller.main(OiocOneClickInstaller.java:717)\r\nUnable to copy the logs to the permanent location: The permanent log directory is unknown (null)..\r\n\r\nThe log(s) can be found here: C:\\Users\\test\\AppData\\Local\\Temp\\OraInstall2022-06-09_10-50-42AM.\r\nC:\\Users\\test\\Downloads\\V983389-01&gt;java -version\r\njava version &quot;18.0.1.1&quot; 2022-04-22\r\nJava(TM) SE Runtime Environment (build 18.0.1.1+2-6)\r\nJava HotSpot(TM) 64-Bit Server VM (build 18.0.1.1+2-6, mixed mode, sharing)\r\n```","title":"Installing ODI gives &quot;com.sun.xml.bind.v2.runtime.reflect.opt.Injector.defineClass&quot;","body":"<p>I'm trying to install the Oracle Fusion MiddleWare ODI 12.2.1.4.0 and getting the below error running the jar file. I'm not able to figure out how to resolve this error.</p>\n<pre><code>C:\\Users\\test\\Downloads\\V983389-01&gt;java -jar fmw_12.2.1.4.0_odi.jar\nLauncher log file is C:\\Users\\test\\AppData\\Local\\Temp\\OraInstall2022-06-09_10-50-42AM\\launcher2022-06-09_10-50-42AM.log.\nExtracting the installer . . . . . . . . . . . . . . . . . . . . . . . . Done\nChecking if CPU speed is above 300 MHz.   Actual 2592    Passed\nChecking monitor: must be configured to display at least 256 colors.   Actual 4294967296    Passed\nChecking swap space: must be greater than 512 MB    Passed\nChecking if this platform requires a 64-bit JVM.   Actual 64    Passed (64-bit not required)\nChecking temp space: must be greater than 300 MB.   Actual 267890 MB    Passed\nPreparing to launch the Oracle Universal Installer from C:\\Users\\test\\AppData\\Local\\Temp\\OraInstall2022-06-09_10-50-42AM\nLog: C:\\Users\\test\\AppData\\Local\\Temp\\OraInstall2022-06-09_10-50-42AM\\install2022-06-09_10-50-42AM.log\nJun 09, 2022 10:51:07 AM com.sun.xml.bind.v2.runtime.reflect.opt.Injector &lt;clinit&gt;\nSEVERE: null\njava.security.PrivilegedActionException: java.lang.NoSuchMethodException: sun.misc.Unsafe.defineClass(java.lang.String,[B,int,int,java.lang.ClassLoader,java.security.ProtectionDomain)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:573)\n        at com.sun.xml.bind.v2.runtime.reflect.opt.Injector.&lt;clinit&gt;(Injector.java:197)\n        ... \n        at javax.xml.bind.ContextFinder.find(ContextFinder.java:345)\n        at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:482)\n        at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:445)\n        at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:356)\n        at oracle.as.install.engine.config.xml.EngineConfigParser.getEngineConfig(EngineConfigParser.java:65)\n        ... \n        ... 30 more\n\njava.lang.NullPointerException: Cannot invoke &quot;java.lang.reflect.Method.invoke(Object, Object[])&quot; because &quot;com.sun.xml.bind.v2.runtime.reflect.opt.Injector.defineClass&quot; is null\n        at com.sun.xml.bind.v2.runtime.reflect.opt.Injector.inject(Injector.java:311)\n        ... \n        at oracle.sysman.oio.oioc.OiocOneClickInstaller.main(OiocOneClickInstaller.java:717)\nUnable to copy the logs to the permanent location: The permanent log directory is unknown (null)..\n\nThe log(s) can be found here: C:\\Users\\test\\AppData\\Local\\Temp\\OraInstall2022-06-09_10-50-42AM.\nC:\\Users\\test\\Downloads\\V983389-01&gt;java -version\njava version &quot;18.0.1.1&quot; 2022-04-22\nJava(TM) SE Runtime Environment (build 18.0.1.1+2-6)\nJava HotSpot(TM) 64-Bit Server VM (build 18.0.1.1+2-6, mixed mode, sharing)\n</code></pre>\n"},{"tags":["java","slf4j","java.util.logging","jul-to-slf4j"],"answers":[{"tags":[],"owner":{"account_id":2826194,"reputation":10795,"user_id":2428802,"display_name":"jmehrens"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665675933,"creation_date":1665675933,"answer_id":74058542,"question_id":74047307,"body_markdown":"If you are not running the code in a servlet container like Tomcat you can simply add the `-Djava.util.logging.manager=org.apache.logging.log4j.jul.LogManager` to the launch command.\r\n\r\nOtherwise should be able to use a [logging.properties][1] file with contents:\r\n\r\n    handlers=org.slf4j.bridge.SLF4JBridgeHandler\r\n    org.apache.logging.log4j.jul.Log4jBridgeHandler.propagateLevels = true\r\n\r\nThen launch the application with [`-Djava.util.logging.config.file=logging.properties`][2].  You&#39;ll have to adjust the path to the logging.properties\r\n\r\n\r\n  [1]: https://logging.apache.org/log4j/2.x/log4j-jul/index.html\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/util/logging/LogManager.html","title":"How to configure jul-to-slf4j without programatically","body":"<p>If you are not running the code in a servlet container like Tomcat you can simply add the <code>-Djava.util.logging.manager=org.apache.logging.log4j.jul.LogManager</code> to the launch command.</p>\n<p>Otherwise should be able to use a <a href=\"https://logging.apache.org/log4j/2.x/log4j-jul/index.html\" rel=\"nofollow noreferrer\">logging.properties</a> file with contents:</p>\n<pre><code>handlers=org.slf4j.bridge.SLF4JBridgeHandler\norg.apache.logging.log4j.jul.Log4jBridgeHandler.propagateLevels = true\n</code></pre>\n<p>Then launch the application with <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/logging/LogManager.html\" rel=\"nofollow noreferrer\"><code>-Djava.util.logging.config.file=logging.properties</code></a>.  You'll have to adjust the path to the logging.properties</p>\n"}],"owner":{"account_id":3350983,"reputation":123,"user_id":2815060,"display_name":"akr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":311,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1665676442,"creation_date":1665604160,"question_id":74047307,"body_markdown":"I&#39;m using slf4j and log4j2 combination as logging framework in my application. To redirect logs of java.util.logging into slf4j, I&#39;m using jul-to-slf4j. I also have to execute :\r\n\t\r\n\r\n    static {\r\n    \t\tLogManager.getLogManager().reset();\r\n    \t\tSLF4JBridgeHandler.install();\r\n    \t}\r\n\r\n the above to register the handler to make this work and it is working fine. But I would like to avoid this static block if it possible to do the same handler register by using log4j2.xml file configuration. I spent much time to find the xml configuration but could not found it.\r\n","title":"How to configure jul-to-slf4j without programatically","body":"<p>I'm using slf4j and log4j2 combination as logging framework in my application. To redirect logs of java.util.logging into slf4j, I'm using jul-to-slf4j. I also have to execute :</p>\n<pre><code>static {\n        LogManager.getLogManager().reset();\n        SLF4JBridgeHandler.install();\n    }\n</code></pre>\n<p>the above to register the handler to make this work and it is working fine. But I would like to avoid this static block if it possible to do the same handler register by using log4j2.xml file configuration. I spent much time to find the xml configuration but could not found it.</p>\n"},{"tags":["java","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":2,"creation_date":1665665773,"post_id":74055921,"comment_id":130756062,"body_markdown":"Instead of describing what your database looks like, please edit your question and add a screenshot of it. Please also indicate the exact query you want to perform.","body":"Instead of describing what your database looks like, please edit your question and add a screenshot of it. Please also indicate the exact query you want to perform."},{"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":1,"creation_date":1665668011,"post_id":74055921,"comment_id":130756945,"body_markdown":"You&#39;re going to want to [use a query](https://firebase.google.com/docs/database/web/lists-of-data#sorting_and_filtering_data) to order/filter the data, but as Alex said: it&#39;s hard to say more without seeing the data that you&#39;re querying and the way you current filter it.","body":"You&#39;re going to want to <a href=\"https://firebase.google.com/docs/database/web/lists-of-data#sorting_and_filtering_data\" rel=\"nofollow noreferrer\">use a query</a> to order/filter the data, but as Alex said: it&#39;s hard to say more without seeing the data that you&#39;re querying and the way you current filter it."},{"owner":{"display_name":"user19697344"},"score":0,"creation_date":1665676348,"post_id":74055921,"comment_id":130760164,"body_markdown":"please check i updated question and screenshot service is down unfortunately.","body":"please check i updated question and screenshot service is down unfortunately."}],"owner":{"display_name":"user19697344"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665676299,"creation_date":1665664667,"question_id":74055921,"body_markdown":"I created a social media app. Suppose I have one array list which contains all the uids of users I follow on my app, stored in child of (following), I also created a child of (posts) which has all posts, posted by all users. The problem is I don&#39;t want to use snapshot.getChildern() to retrieve posts which equals following because it downloads whole data under &#39;posts&#39; child. Is there any way I can retrieve only those posts which matches with &#39;following&#39; array list?(for Posts Database looks like this)--&gt;\r\n   Clicks  /  UID  {`title : &quot;sky&quot;` `imageurl : &quot;https....&quot; ` `publisher : &quot;UID&quot;` `timestamp : &quot;1666456456..&quot;`}\r\n\r\nand second one --&gt; follow / UID / following / other user&#39;s uid : true\r\n\r\nfunctions I use :\r\n\r\n      private void checkFollowing(){\r\n        followingList = new ArrayList&lt;&gt;();\r\n        DatabaseReference reference = Util.getDatabase().getReference(&quot;follow&quot;)\r\n                .child(Objects.requireNonNull(FirebaseAuth.getInstance().getCurrentUser()).getUid())\r\n                .child(&quot;following&quot;);\r\n\r\n\r\n        reference.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                followingList.clear();\r\n                for (DataSnapshot dataSnapshot : snapshot.getChildren()){\r\n                    followingList.add(dataSnapshot.getKey());\r\n                }\r\n\r\n                readClicksPosts();\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void readClicksPosts() {\r\n        DatabaseReference reference = Util.getDatabase().getReference(&quot;Clicks&quot;);\r\n        reference.orderByChild(&quot;timestamp&quot;).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                clicks_models_List.clear();\r\n                for (DataSnapshot datasnapshot : snapshot.getChildren()) {\r\n                    Clicks_Model clicks_model = datasnapshot.getValue(Clicks_Model.class);\r\n                    for (String id : followingList) {\r\n                        assert clicks_model != null;\r\n                        if (clicks_model.getPublisher().equals(id)) {\r\n                            clicks_models_List.add(clicks_model);\r\n                        }\r\n                    }\r\n                }\r\n                Collections.reverse(clicks_models_List);\r\n                clicksAdapter.notifyDataSetChanged();\r\n                progressBar.setVisibility(View.GONE);\r\n                DatabaseReference.goOffline();\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\nI just want to show posts from people I follow, what should I do if I don&#39;t to use .getChildren() method. Please keep in mind the posts are going to update frequently.\r\n","title":"How to retrieve a specific group of children from firebase realtime database","body":"<p>I created a social media app. Suppose I have one array list which contains all the uids of users I follow on my app, stored in child of (following), I also created a child of (posts) which has all posts, posted by all users. The problem is I don't want to use snapshot.getChildern() to retrieve posts which equals following because it downloads whole data under 'posts' child. Is there any way I can retrieve only those posts which matches with 'following' array list?(for Posts Database looks like this)--&gt;\nClicks  /  UID  {<code>title : &quot;sky&quot;</code> <code>imageurl : &quot;https....&quot; </code> <code>publisher : &quot;UID&quot;</code> <code>timestamp : &quot;1666456456..&quot;</code>}</p>\n<p>and second one --&gt; follow / UID / following / other user's uid : true</p>\n<p>functions I use :</p>\n<pre><code>  private void checkFollowing(){\n    followingList = new ArrayList&lt;&gt;();\n    DatabaseReference reference = Util.getDatabase().getReference(&quot;follow&quot;)\n            .child(Objects.requireNonNull(FirebaseAuth.getInstance().getCurrentUser()).getUid())\n            .child(&quot;following&quot;);\n\n\n    reference.addValueEventListener(new ValueEventListener() {\n        @Override\n        public void onDataChange(@NonNull DataSnapshot snapshot) {\n            followingList.clear();\n            for (DataSnapshot dataSnapshot : snapshot.getChildren()){\n                followingList.add(dataSnapshot.getKey());\n            }\n\n            readClicksPosts();\n        }\n\n        @Override\n        public void onCancelled(@NonNull DatabaseError error) {\n\n        }\n    });\n}\n\nprivate void readClicksPosts() {\n    DatabaseReference reference = Util.getDatabase().getReference(&quot;Clicks&quot;);\n    reference.orderByChild(&quot;timestamp&quot;).addValueEventListener(new ValueEventListener() {\n        @Override\n        public void onDataChange(@NonNull DataSnapshot snapshot) {\n            clicks_models_List.clear();\n            for (DataSnapshot datasnapshot : snapshot.getChildren()) {\n                Clicks_Model clicks_model = datasnapshot.getValue(Clicks_Model.class);\n                for (String id : followingList) {\n                    assert clicks_model != null;\n                    if (clicks_model.getPublisher().equals(id)) {\n                        clicks_models_List.add(clicks_model);\n                    }\n                }\n            }\n            Collections.reverse(clicks_models_List);\n            clicksAdapter.notifyDataSetChanged();\n            progressBar.setVisibility(View.GONE);\n            DatabaseReference.goOffline();\n        }\n\n        @Override\n        public void onCancelled(@NonNull DatabaseError error) {\n\n        }\n    });\n}\n</code></pre>\n<p>I just want to show posts from people I follow, what should I do if I don't to use .getChildren() method. Please keep in mind the posts are going to update frequently.</p>\n"},{"tags":["java","java-8","memory-leaks"],"comments":[{"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"score":0,"creation_date":1665608367,"post_id":74047666,"comment_id":130743535,"body_markdown":"Is numbers you see in `visualvm` consistent with numbers shown in `top`?","body":"Is numbers you see in <code>visualvm</code> consistent with numbers shown in <code>top</code>?"},{"owner":{"account_id":482697,"reputation":6106,"user_id":897272,"accept_rate":90,"display_name":"dsollen"},"score":0,"creation_date":1665669669,"post_id":74047666,"comment_id":130757528,"body_markdown":"@talex no, top is reporting vastly more memory used then top is, as in like 20 gigs more, more then can be explained by the usual overhead","body":"@talex no, top is reporting vastly more memory used then top is, as in like 20 gigs more, more then can be explained by the usual overhead"}],"owner":{"account_id":482697,"reputation":6106,"user_id":897272,"accept_rate":90,"display_name":"dsollen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665675983,"creation_date":1665606279,"question_id":74047666,"body_markdown":"Our code&#39;s memory usage is going up constantly, according to top, but when I look into visualvm it shows heap and metaspace are not growing and are GC correctly, so top and visualvm disagree on memory usage, and by a number way too large to be caused by mere overhead.\r\n\r\nWe are loading a number of &#39;tiles&#39; into memory, it&#39;s no doubt something to do with failing to close resources used to either read or store them that&#39;s our root issue.  The problem is that It looks like were handling them correctly, I&#39;m not seeing a failure to close or clean up and there is enough complexity in the code I&#39;m not sure which moving piece to focus on.\r\n\r\nI&#39;ve run findbugs (yes findbugs, because my company expects me to move mountains to be able to download spotbugs to their infrastructure, why should we use up to date code when programming?).  It found plenty of bugs, but none of them were OS_OPEN_STREAM.  So findbugs apparently believes were closing things correctly.  Though considering how old it is I&#39;m not sure it knows how to parse newer java 8 syntax we use regularly so perhaps I shouldn&#39;t trust that to mean much.  Still working on getting proper spotbugs internally.\r\n\r\nWhat other tools might I be able to use to get a better idea of which classes are failing to clean up?\r\n\r\nedit:\r\n\r\nafter some experimentation I can see the memory leak is in shared memory and according to pmap is looks like it&#39;s caused by a huge number of 300K nfs allocations.  Not sure if that tells me anything I didn&#39;t already know though.\r\n\r\n","title":"How to track down memory leak not showing in visualvm","body":"<p>Our code's memory usage is going up constantly, according to top, but when I look into visualvm it shows heap and metaspace are not growing and are GC correctly, so top and visualvm disagree on memory usage, and by a number way too large to be caused by mere overhead.</p>\n<p>We are loading a number of 'tiles' into memory, it's no doubt something to do with failing to close resources used to either read or store them that's our root issue.  The problem is that It looks like were handling them correctly, I'm not seeing a failure to close or clean up and there is enough complexity in the code I'm not sure which moving piece to focus on.</p>\n<p>I've run findbugs (yes findbugs, because my company expects me to move mountains to be able to download spotbugs to their infrastructure, why should we use up to date code when programming?).  It found plenty of bugs, but none of them were OS_OPEN_STREAM.  So findbugs apparently believes were closing things correctly.  Though considering how old it is I'm not sure it knows how to parse newer java 8 syntax we use regularly so perhaps I shouldn't trust that to mean much.  Still working on getting proper spotbugs internally.</p>\n<p>What other tools might I be able to use to get a better idea of which classes are failing to clean up?</p>\n<p>edit:</p>\n<p>after some experimentation I can see the memory leak is in shared memory and according to pmap is looks like it's caused by a huge number of 300K nfs allocations.  Not sure if that tells me anything I didn't already know though.</p>\n"},{"tags":["java","spring","spring-boot","rate-limiting","bucket4j"],"owner":{"account_id":15062605,"reputation":967,"user_id":10870817,"display_name":"SoT"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":725,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1665675217,"creation_date":1665651055,"question_id":74052973,"body_markdown":"I have 2 requirements need to be fullfilled:\r\n\r\n 1. Apply rate limiting for an @GetMapping API based on user: only 15 requests per minute per user. Quite simple! I create a concurrent `hashmap&lt;username, bucket&gt;` to group buckets by user. Any request comes, I will get username, then get the corresponding bucket, then apply rate limiting.\r\n 2. Apply rate limiting for an @GetMapping API based on user and a @RequestParam &quot;transaction-id&quot;: If same user call this API with different transaction-id, limit up to 5 requests per hour per user. If same user call this API with same transaction-id, then (1) will be applied. For example: \r\n    ```\r\n    invokeAPI(&quot;ey12==&quot;, &quot;t1&quot;) OK,\r\n    invokeAPI(&quot;ey12==&quot;, &quot;t2&quot;) OK,\r\n    invokeAPI(&quot;ey12==&quot;, &quot;t1&quot;) OK,\r\n    invokeAPI(&quot;ey12==&quot;, &quot;t1&quot;) OK,\r\n    invokeAPI(&quot;ey12==&quot;, &quot;t3&quot;) OK,\r\n    invokeAPI(&quot;ey12==&quot;, &quot;t1&quot;) OK,\r\n    invokeAPI(&quot;ey12==&quot;, &quot;t4&quot;) OK,\r\n    invokeAPI(&quot;ey12==&quot;, &quot;t5&quot;) OK,\r\n    invokeAPI(&quot;ey12==&quot;, &quot;t6&quot;) Blocked\r\n    ```\r\nRequirement 1 is done. Please suggest me a solution for requirement number 2. Is Bucket4j suitable for this case? I event don&#39;t know where to start at.","title":"Bucket4j rate limiting based on user with complicated condition","body":"<p>I have 2 requirements need to be fullfilled:</p>\n<ol>\n<li>Apply rate limiting for an @GetMapping API based on user: only 15 requests per minute per user. Quite simple! I create a concurrent <code>hashmap&lt;username, bucket&gt;</code> to group buckets by user. Any request comes, I will get username, then get the corresponding bucket, then apply rate limiting.</li>\n<li>Apply rate limiting for an @GetMapping API based on user and a @RequestParam &quot;transaction-id&quot;: If same user call this API with different transaction-id, limit up to 5 requests per hour per user. If same user call this API with same transaction-id, then (1) will be applied. For example:\n<pre><code>invokeAPI(&quot;ey12==&quot;, &quot;t1&quot;) OK,\ninvokeAPI(&quot;ey12==&quot;, &quot;t2&quot;) OK,\ninvokeAPI(&quot;ey12==&quot;, &quot;t1&quot;) OK,\ninvokeAPI(&quot;ey12==&quot;, &quot;t1&quot;) OK,\ninvokeAPI(&quot;ey12==&quot;, &quot;t3&quot;) OK,\ninvokeAPI(&quot;ey12==&quot;, &quot;t1&quot;) OK,\ninvokeAPI(&quot;ey12==&quot;, &quot;t4&quot;) OK,\ninvokeAPI(&quot;ey12==&quot;, &quot;t5&quot;) OK,\ninvokeAPI(&quot;ey12==&quot;, &quot;t6&quot;) Blocked\n</code></pre>\n</li>\n</ol>\n<p>Requirement 1 is done. Please suggest me a solution for requirement number 2. Is Bucket4j suitable for this case? I event don't know where to start at.</p>\n"},{"tags":["java","spring-boot","gradle","tomcat","badass-runtime-plugin"],"answers":[{"comments":[{"owner":{"account_id":26110397,"reputation":31,"user_id":19804428,"display_name":"Grant Sanders"},"score":0,"creation_date":1665674794,"post_id":74036609,"comment_id":130759567,"body_markdown":"Ended up finding a solution last night. For some reason, after packaging the application, running the server on port 8080 would cause it to fail. changing it to port 9000 in application.properties fixed the issue entirely.","body":"Ended up finding a solution last night. For some reason, after packaging the application, running the server on port 8080 would cause it to fail. changing it to port 9000 in application.properties fixed the issue entirely."}],"tags":[],"owner":{"account_id":26552141,"reputation":61,"user_id":20181285,"display_name":"Sk Nur Hasan"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665550123,"creation_date":1665550123,"answer_id":74036609,"question_id":74032554,"body_markdown":"have you added this dependency to your pom file : \r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;","title":"Tomcat servlet unable to start, but only after packaging application with Beryx plugin","body":"<p>have you added this dependency to your pom file :</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26110397,"reputation":31,"user_id":19804428,"display_name":"Grant Sanders"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665674968,"creation_date":1665674968,"answer_id":74058334,"question_id":74032554,"body_markdown":"Found a solution- using port 8080 was my issue, not quite sure why as the error I was receiving seems to be different than others facing crashes with the same configuration - but changing the port worked for me.","title":"Tomcat servlet unable to start, but only after packaging application with Beryx plugin","body":"<p>Found a solution- using port 8080 was my issue, not quite sure why as the error I was receiving seems to be different than others facing crashes with the same configuration - but changing the port worked for me.</p>\n"}],"owner":{"account_id":26110397,"reputation":31,"user_id":19804428,"display_name":"Grant Sanders"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":270,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74058334,"answer_count":2,"score":1,"last_activity_date":1665674968,"creation_date":1665512751,"question_id":74032554,"body_markdown":"Finished developing my application a week or so ago, but I&#39;m having some problems getting it packaged. It runs perfectly fine when I compile it normally, or run it through Gradle, but whenever I package it up, half of it breaks. \r\n\r\nAt the moment, I&#39;m using the [Badass Runtime Plugin][1] to get it packaged as a macOS application, but for some reason, whenever I launch the .app that it created, I get this monstrous error about the tomcat server failing to start.\r\n\r\n```\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::                (v2.7.3)\r\n\r\n2022-10-11 14:19:46.306  INFO 10373 --- [           main] com.fx.qbo.QboApplication                : Starting QboApplication using Java 18.0.2 on Grants-MacBook-Pro.local with PID 10373 (/Users/grantsanders/Desktop/project_rebuild/qbo/build/jpackage/qbo.app/Contents/app/qbo-1.0-plain.jar started by grantsanders in /Users/grantsanders)\r\n2022-10-11 14:19:46.307  INFO 10373 --- [           main] com.fx.qbo.QboApplication                : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2022-10-11 14:19:47.835  INFO 10373 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n2022-10-11 14:19:47.854  INFO 10373 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2022-10-11 14:19:47.854  INFO 10373 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.65]\r\n2022-10-11 14:19:47.930 ERROR 10373 --- [           main] org.apache.catalina.core.ContainerBase   : A child container failed during start\r\n\r\njava.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Error starting the loader\r\n\tat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122) ~[na:na]\r\n\tat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191) ~[na:na]\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\r\n\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145) ~[na:na]\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.startup.Tomcat.start(Tomcat.java:486) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:123) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.&lt;init&gt;(TomcatWebServer.java:104) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:479) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:211) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:184) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:577) ~[spring-context-5.3.22.jar:5.3.22]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat com.fx.qbo.QboApplication.main(QboApplication.java:13) ~[qbo-1.0-plain.jar:na]\r\nCaused by: org.apache.catalina.LifecycleException: Error starting the loader\r\n\tat org.apache.catalina.loader.WebappLoader.startInternal(WebappLoader.java:433) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5086) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\r\n\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145) ~[na:na]\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\t... 29 common frames omitted\r\nCaused by: java.lang.NoClassDefFoundError: java/lang/instrument/IllegalClassFormatException\r\n\tat java.base/java.lang.Class.forName0(Native Method) ~[na:na]\r\n\tat java.base/java.lang.Class.forName(Class.java:383) ~[na:na]\r\n\tat java.base/java.lang.Class.forName(Class.java:376) ~[na:na]\r\n\tat org.apache.catalina.loader.WebappLoader.createClassLoader(WebappLoader.java:539) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.loader.WebappLoader.startInternal(WebappLoader.java:409) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\t... 38 common frames omitted\r\nCaused by: java.lang.ClassNotFoundException: java.lang.instrument.IllegalClassFormatException\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na]\r\n\t... 43 common frames omitted\r\n\r\n2022-10-11 14:19:47.932 ERROR 10373 --- [           main] org.apache.catalina.core.ContainerBase   : A child container failed during start\r\n\r\njava.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: A child container failed during start\r\n\tat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122) ~[na:na]\r\n\tat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191) ~[na:na]\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.startup.Tomcat.start(Tomcat.java:486) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:123) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.&lt;init&gt;(TomcatWebServer.java:104) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:479) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:211) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:184) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:577) ~[spring-context-5.3.22.jar:5.3.22]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat com.fx.qbo.QboApplication.main(QboApplication.java:13) ~[qbo-1.0-plain.jar:na]\r\nCaused by: org.apache.catalina.LifecycleException: A child container failed during start\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:938) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\r\n\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145) ~[na:na]\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\t... 21 common frames omitted\r\nCaused by: java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Error starting the loader\r\n\tat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122) ~[na:na]\r\n\tat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191) ~[na:na]\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\t... 29 common frames omitted\r\nCaused by: org.apache.catalina.LifecycleException: Error starting the loader\r\n\tat org.apache.catalina.loader.WebappLoader.startInternal(WebappLoader.java:433) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5086) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\r\n\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145) ~[na:na]\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\t... 29 common frames omitted\r\nCaused by: java.lang.NoClassDefFoundError: java/lang/instrument/IllegalClassFormatException\r\n\tat java.base/java.lang.Class.forName0(Native Method) ~[na:na]\r\n\tat java.base/java.lang.Class.forName(Class.java:383) ~[na:na]\r\n\tat java.base/java.lang.Class.forName(Class.java:376) ~[na:na]\r\n\tat org.apache.catalina.loader.WebappLoader.createClassLoader(WebappLoader.java:539) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.loader.WebappLoader.startInternal(WebappLoader.java:409) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\t... 38 common frames omitted\r\nCaused by: java.lang.ClassNotFoundException: java.lang.instrument.IllegalClassFormatException\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na]\r\n\t... 43 common frames omitted\r\n\r\n2022-10-11 14:19:47.933  INFO 10373 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\n2022-10-11 14:19:47.936  WARN 10373 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\r\n2022-10-11 14:19:47.950  INFO 10373 --- [           main] ConditionEvaluationReportLoggingListener : \r\n\r\nError starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n2022-10-11 14:19:47.975 ERROR 10373 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n\r\norg.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:165) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:577) ~[spring-context-5.3.22.jar:5.3.22]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat com.fx.qbo.QboApplication.main(QboApplication.java:13) ~[qbo-1.0-plain.jar:na]\r\nCaused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\r\n\tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:142) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.&lt;init&gt;(TomcatWebServer.java:104) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:479) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:211) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:184) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\t... 8 common frames omitted\r\nCaused by: org.apache.catalina.LifecycleException: A child container failed during start\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:938) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.startup.Tomcat.start(Tomcat.java:486) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:123) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\t... 13 common frames omitted\r\nCaused by: java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: A child container failed during start\r\n\tat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122) ~[na:na]\r\n\tat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191) ~[na:na]\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\t... 21 common frames omitted\r\nCaused by: org.apache.catalina.LifecycleException: A child container failed during start\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:938) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\r\n\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145) ~[na:na]\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\t... 21 common frames omitted\r\nCaused by: java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Error starting the loader\r\n\tat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122) ~[na:na]\r\n\tat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191) ~[na:na]\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\t... 29 common frames omitted\r\nCaused by: org.apache.catalina.LifecycleException: Error starting the loader\r\n\tat org.apache.catalina.loader.WebappLoader.startInternal(WebappLoader.java:433) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5086) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\r\n\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145) ~[na:na]\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\t... 29 common frames omitted\r\nCaused by: java.lang.NoClassDefFoundError: java/lang/instrument/IllegalClassFormatException\r\n\tat java.base/java.lang.Class.forName0(Native Method) ~[na:na]\r\n\tat java.base/java.lang.Class.forName(Class.java:383) ~[na:na]\r\n\tat java.base/java.lang.Class.forName(Class.java:376) ~[na:na]\r\n\tat org.apache.catalina.loader.WebappLoader.createClassLoader(WebappLoader.java:539) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.loader.WebappLoader.startInternal(WebappLoader.java:409) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\t... 38 common frames omitted\r\nCaused by: java.lang.ClassNotFoundException: java.lang.instrument.IllegalClassFormatException\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na]\r\n\t... 43 common frames omitted\r\n```\r\n\r\nNew to Spring/Gradle/Jpackage - if there is other helpful information I could provide, please let me know!\r\n\r\n\r\n\r\n  [1]: https://badass-runtime-plugin.beryx.org/releases/latest/#introduction","title":"Tomcat servlet unable to start, but only after packaging application with Beryx plugin","body":"<p>Finished developing my application a week or so ago, but I'm having some problems getting it packaged. It runs perfectly fine when I compile it normally, or run it through Gradle, but whenever I package it up, half of it breaks.</p>\n<p>At the moment, I'm using the <a href=\"https://badass-runtime-plugin.beryx.org/releases/latest/#introduction\" rel=\"nofollow noreferrer\">Badass Runtime Plugin</a> to get it packaged as a macOS application, but for some reason, whenever I launch the .app that it created, I get this monstrous error about the tomcat server failing to start.</p>\n<pre><code>  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v2.7.3)\n\n2022-10-11 14:19:46.306  INFO 10373 --- [           main] com.fx.qbo.QboApplication                : Starting QboApplication using Java 18.0.2 on Grants-MacBook-Pro.local with PID 10373 (/Users/grantsanders/Desktop/project_rebuild/qbo/build/jpackage/qbo.app/Contents/app/qbo-1.0-plain.jar started by grantsanders in /Users/grantsanders)\n2022-10-11 14:19:46.307  INFO 10373 --- [           main] com.fx.qbo.QboApplication                : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2022-10-11 14:19:47.835  INFO 10373 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2022-10-11 14:19:47.854  INFO 10373 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2022-10-11 14:19:47.854  INFO 10373 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.65]\n2022-10-11 14:19:47.930 ERROR 10373 --- [           main] org.apache.catalina.core.ContainerBase   : A child container failed during start\n\njava.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Error starting the loader\n    at java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122) ~[na:na]\n    at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191) ~[na:na]\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145) ~[na:na]\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:432) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.startup.Tomcat.start(Tomcat.java:486) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:123) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.&lt;init&gt;(TomcatWebServer.java:104) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:479) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:211) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:184) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:577) ~[spring-context-5.3.22.jar:5.3.22]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.3.jar:2.7.3]\n    at com.fx.qbo.QboApplication.main(QboApplication.java:13) ~[qbo-1.0-plain.jar:na]\nCaused by: org.apache.catalina.LifecycleException: Error starting the loader\n    at org.apache.catalina.loader.WebappLoader.startInternal(WebappLoader.java:433) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5086) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145) ~[na:na]\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    ... 29 common frames omitted\nCaused by: java.lang.NoClassDefFoundError: java/lang/instrument/IllegalClassFormatException\n    at java.base/java.lang.Class.forName0(Native Method) ~[na:na]\n    at java.base/java.lang.Class.forName(Class.java:383) ~[na:na]\n    at java.base/java.lang.Class.forName(Class.java:376) ~[na:na]\n    at org.apache.catalina.loader.WebappLoader.createClassLoader(WebappLoader.java:539) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.loader.WebappLoader.startInternal(WebappLoader.java:409) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    ... 38 common frames omitted\nCaused by: java.lang.ClassNotFoundException: java.lang.instrument.IllegalClassFormatException\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na]\n    ... 43 common frames omitted\n\n2022-10-11 14:19:47.932 ERROR 10373 --- [           main] org.apache.catalina.core.ContainerBase   : A child container failed during start\n\njava.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: A child container failed during start\n    at java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122) ~[na:na]\n    at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191) ~[na:na]\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:432) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.startup.Tomcat.start(Tomcat.java:486) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:123) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.&lt;init&gt;(TomcatWebServer.java:104) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:479) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:211) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:184) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:577) ~[spring-context-5.3.22.jar:5.3.22]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.3.jar:2.7.3]\n    at com.fx.qbo.QboApplication.main(QboApplication.java:13) ~[qbo-1.0-plain.jar:na]\nCaused by: org.apache.catalina.LifecycleException: A child container failed during start\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:938) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145) ~[na:na]\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    ... 21 common frames omitted\nCaused by: java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Error starting the loader\n    at java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122) ~[na:na]\n    at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191) ~[na:na]\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    ... 29 common frames omitted\nCaused by: org.apache.catalina.LifecycleException: Error starting the loader\n    at org.apache.catalina.loader.WebappLoader.startInternal(WebappLoader.java:433) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5086) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145) ~[na:na]\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    ... 29 common frames omitted\nCaused by: java.lang.NoClassDefFoundError: java/lang/instrument/IllegalClassFormatException\n    at java.base/java.lang.Class.forName0(Native Method) ~[na:na]\n    at java.base/java.lang.Class.forName(Class.java:383) ~[na:na]\n    at java.base/java.lang.Class.forName(Class.java:376) ~[na:na]\n    at org.apache.catalina.loader.WebappLoader.createClassLoader(WebappLoader.java:539) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.loader.WebappLoader.startInternal(WebappLoader.java:409) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    ... 38 common frames omitted\nCaused by: java.lang.ClassNotFoundException: java.lang.instrument.IllegalClassFormatException\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na]\n    ... 43 common frames omitted\n\n2022-10-11 14:19:47.933  INFO 10373 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2022-10-11 14:19:47.936  WARN 10373 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\n2022-10-11 14:19:47.950  INFO 10373 --- [           main] ConditionEvaluationReportLoggingListener : \n\nError starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2022-10-11 14:19:47.975 ERROR 10373 --- [           main] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:165) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:577) ~[spring-context-5.3.22.jar:5.3.22]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.3.jar:2.7.3]\n    at com.fx.qbo.QboApplication.main(QboApplication.java:13) ~[qbo-1.0-plain.jar:na]\nCaused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:142) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.&lt;init&gt;(TomcatWebServer.java:104) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:479) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:211) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:184) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162) ~[spring-boot-2.7.3.jar:2.7.3]\n    ... 8 common frames omitted\nCaused by: org.apache.catalina.LifecycleException: A child container failed during start\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:938) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:432) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.startup.Tomcat.start(Tomcat.java:486) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:123) ~[spring-boot-2.7.3.jar:2.7.3]\n    ... 13 common frames omitted\nCaused by: java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: A child container failed during start\n    at java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122) ~[na:na]\n    at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191) ~[na:na]\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    ... 21 common frames omitted\nCaused by: org.apache.catalina.LifecycleException: A child container failed during start\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:938) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145) ~[na:na]\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    ... 21 common frames omitted\nCaused by: java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Error starting the loader\n    at java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122) ~[na:na]\n    at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191) ~[na:na]\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    ... 29 common frames omitted\nCaused by: org.apache.catalina.LifecycleException: Error starting the loader\n    at org.apache.catalina.loader.WebappLoader.startInternal(WebappLoader.java:433) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5086) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145) ~[na:na]\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    ... 29 common frames omitted\nCaused by: java.lang.NoClassDefFoundError: java/lang/instrument/IllegalClassFormatException\n    at java.base/java.lang.Class.forName0(Native Method) ~[na:na]\n    at java.base/java.lang.Class.forName(Class.java:383) ~[na:na]\n    at java.base/java.lang.Class.forName(Class.java:376) ~[na:na]\n    at org.apache.catalina.loader.WebappLoader.createClassLoader(WebappLoader.java:539) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.loader.WebappLoader.startInternal(WebappLoader.java:409) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    ... 38 common frames omitted\nCaused by: java.lang.ClassNotFoundException: java.lang.instrument.IllegalClassFormatException\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na]\n    ... 43 common frames omitted\n</code></pre>\n<p>New to Spring/Gradle/Jpackage - if there is other helpful information I could provide, please let me know!</p>\n"},{"tags":["java","maven","kotlin","dagger-2"],"answers":[{"comments":[{"owner":{"account_id":1576898,"reputation":2081,"user_id":1463100,"accept_rate":100,"display_name":"Markus Kreusch"},"score":1,"creation_date":1504727234,"post_id":42387238,"comment_id":79128356,"body_markdown":"fyi KT-14478 has been fixed and thus kapt is now supported in maven","body":"fyi KT-14478 has been fixed and thus kapt is now supported in maven"}],"tags":[],"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1487755484,"creation_date":1487755018,"answer_id":42387238,"question_id":34119958,"body_markdown":"javac can scan both source files (java) and classes in search for annotations:\r\nhttp://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html#processing\r\n\r\nThis means that you can make this work if you don&#39;t have any Dagger-generated classes referenced in Kotlin code (which means Dagger module implementations)\r\n\r\n 1. invoke kotlin compiler (no Dagger generated types in Kotlin code)\r\n 2. invoke annotation processor (processes annotations in both java files and kotlin-compiled files)\r\n 3. invoke java compiler - has access to both Dagger generated types and Kotlin types\r\n\r\nYou can write your services in both java and kotlin, but the module must be created by a java class\r\n  \r\nHere is the corresponding pom.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n        &lt;groupId&gt;com.test&lt;/groupId&gt;\r\n        &lt;artifactId&gt;testkotlindagger&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n        &lt;properties&gt;\r\n            &lt;kotlin.version&gt;1.0.6&lt;/kotlin.version&gt;\r\n            &lt;dagger2.version&gt;2.7&lt;/dagger2.version&gt;\r\n        &lt;/properties&gt;\r\n\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\r\n                &lt;artifactId&gt;kotlin-stdlib&lt;/artifactId&gt;\r\n                &lt;version&gt;${kotlin.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\r\n                &lt;artifactId&gt;kotlin-test&lt;/artifactId&gt;\r\n                &lt;version&gt;${kotlin.version}&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- Dagger 2 --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.google.dagger&lt;/groupId&gt;\r\n                &lt;artifactId&gt;dagger&lt;/artifactId&gt;\r\n                &lt;version&gt;${dagger2.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.google.dagger&lt;/groupId&gt;\r\n                &lt;artifactId&gt;dagger-compiler&lt;/artifactId&gt;\r\n                &lt;version&gt;${dagger2.version}&lt;/version&gt;\r\n                &lt;optional&gt;true&lt;/optional&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n\r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\r\n                    &lt;version&gt;${kotlin.version}&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;compile&lt;/id&gt;\r\n                            &lt;phase&gt;compile&lt;/phase&gt;\r\n                            &lt;goals&gt; &lt;goal&gt;compile&lt;/goal&gt; &lt;/goals&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;sourceDirs&gt;\r\n                                    &lt;source&gt;src/main/java&lt;/source&gt;\r\n                                    &lt;source&gt;src/main/kotlin&lt;/source&gt;\r\n\r\n                                &lt;/sourceDirs&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;test-compile&lt;/id&gt;\r\n                            &lt;phase&gt;test-compile&lt;/phase&gt;\r\n                            &lt;goals&gt; &lt;goal&gt;test-compile&lt;/goal&gt; &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.bsc.maven&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-processor-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.2.4&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;process&lt;/id&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;process&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;phase&gt;compile&lt;/phase&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;outputDirectory&gt;target/generated-sources/annotations&lt;/outputDirectory&gt;\r\n\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.5.1&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;!-- Replacing default-compile as it is treated specially by maven --&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;default-compile&lt;/id&gt;\r\n                            &lt;phase&gt;none&lt;/phase&gt;\r\n                        &lt;/execution&gt;\r\n                        &lt;!-- Replacing default-testCompile as it is treated specially by maven --&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;default-testCompile&lt;/id&gt;\r\n                            &lt;phase&gt;none&lt;/phase&gt;\r\n                        &lt;/execution&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;java-compile&lt;/id&gt;\r\n                            &lt;phase&gt;compile&lt;/phase&gt;\r\n                            &lt;goals&gt; &lt;goal&gt;compile&lt;/goal&gt; &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;java-test-compile&lt;/id&gt;\r\n                            &lt;phase&gt;test-compile&lt;/phase&gt;\r\n                            &lt;goals&gt; &lt;goal&gt;testCompile&lt;/goal&gt; &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n\r\n    &lt;/project&gt;\r\n\r\nOn the other hand, if you include Dagger-generated types in your kotlin code, you must have these available before kotlin code is compiled, which means you need Kotlin-aware annotation processor (KAPT)\r\n\r\nIn this scenario the problem boils down to the question:\r\nhttps://stackoverflow.com/questions/39531333/is-kapt-supported-in-maven\r\n\r\nSadly, the answer is no, but there is a bug filed to support it:\r\nhttps://youtrack.jetbrains.com/issue/KT-14478\r\n","title":"Maven configuration for using Dagger 2 in a mixed Java/Kotlin project","body":"<p>javac can scan both source files (java) and classes in search for annotations:\n<a href=\"http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html#processing\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html#processing</a></p>\n\n<p>This means that you can make this work if you don't have any Dagger-generated classes referenced in Kotlin code (which means Dagger module implementations)</p>\n\n<ol>\n<li>invoke kotlin compiler (no Dagger generated types in Kotlin code)</li>\n<li>invoke annotation processor (processes annotations in both java files and kotlin-compiled files)</li>\n<li>invoke java compiler - has access to both Dagger generated types and Kotlin types</li>\n</ol>\n\n<p>You can write your services in both java and kotlin, but the module must be created by a java class</p>\n\n<p>Here is the corresponding pom.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.test&lt;/groupId&gt;\n    &lt;artifactId&gt;testkotlindagger&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;kotlin.version&gt;1.0.6&lt;/kotlin.version&gt;\n        &lt;dagger2.version&gt;2.7&lt;/dagger2.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-stdlib&lt;/artifactId&gt;\n            &lt;version&gt;${kotlin.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-test&lt;/artifactId&gt;\n            &lt;version&gt;${kotlin.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Dagger 2 --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.dagger&lt;/groupId&gt;\n            &lt;artifactId&gt;dagger&lt;/artifactId&gt;\n            &lt;version&gt;${dagger2.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.dagger&lt;/groupId&gt;\n            &lt;artifactId&gt;dagger-compiler&lt;/artifactId&gt;\n            &lt;version&gt;${dagger2.version}&lt;/version&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n\n            &lt;plugin&gt;\n                &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\n                &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n                &lt;version&gt;${kotlin.version}&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;compile&lt;/id&gt;\n                        &lt;phase&gt;compile&lt;/phase&gt;\n                        &lt;goals&gt; &lt;goal&gt;compile&lt;/goal&gt; &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;sourceDirs&gt;\n                                &lt;source&gt;src/main/java&lt;/source&gt;\n                                &lt;source&gt;src/main/kotlin&lt;/source&gt;\n\n                            &lt;/sourceDirs&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;test-compile&lt;/id&gt;\n                        &lt;phase&gt;test-compile&lt;/phase&gt;\n                        &lt;goals&gt; &lt;goal&gt;test-compile&lt;/goal&gt; &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.bsc.maven&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-processor-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.2.4&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;process&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;process&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;phase&gt;compile&lt;/phase&gt;\n                        &lt;configuration&gt;\n                            &lt;outputDirectory&gt;target/generated-sources/annotations&lt;/outputDirectory&gt;\n\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.5.1&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;!-- Replacing default-compile as it is treated specially by maven --&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;default-compile&lt;/id&gt;\n                        &lt;phase&gt;none&lt;/phase&gt;\n                    &lt;/execution&gt;\n                    &lt;!-- Replacing default-testCompile as it is treated specially by maven --&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;default-testCompile&lt;/id&gt;\n                        &lt;phase&gt;none&lt;/phase&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;java-compile&lt;/id&gt;\n                        &lt;phase&gt;compile&lt;/phase&gt;\n                        &lt;goals&gt; &lt;goal&gt;compile&lt;/goal&gt; &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;java-test-compile&lt;/id&gt;\n                        &lt;phase&gt;test-compile&lt;/phase&gt;\n                        &lt;goals&gt; &lt;goal&gt;testCompile&lt;/goal&gt; &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>On the other hand, if you include Dagger-generated types in your kotlin code, you must have these available before kotlin code is compiled, which means you need Kotlin-aware annotation processor (KAPT)</p>\n\n<p>In this scenario the problem boils down to the question:\n<a href=\"https://stackoverflow.com/questions/39531333/is-kapt-supported-in-maven\">Is kapt supported in maven?</a></p>\n\n<p>Sadly, the answer is no, but there is a bug filed to support it:\n<a href=\"https://youtrack.jetbrains.com/issue/KT-14478\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/KT-14478</a></p>\n"},{"tags":[],"owner":{"account_id":75473,"reputation":1020,"user_id":216479,"accept_rate":50,"display_name":"Sergey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665674900,"creation_date":1665569860,"answer_id":74040187,"question_id":34119958,"body_markdown":"\r\nSince kapt is now supported in maven, you can write your services in both Java and Kotlin, and the module can be created by either a Java class or a Kotlin class. You can configure pom.xml build file like this:\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\r\n            &lt;artifactId&gt;kotlin-stdlib&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.20&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.dagger&lt;/groupId&gt;\r\n            &lt;artifactId&gt;dagger&lt;/artifactId&gt;\r\n            &lt;version&gt;2.22&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    \r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\r\n                &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${kotlin.version}&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;kapt&lt;/id&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;kapt&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;sourceDirs&gt;\r\n                                &lt;sourceDir&gt;src/main/kotlin&lt;/sourceDir&gt;\r\n                                &lt;sourceDir&gt;src/main/java&lt;/sourceDir&gt;\r\n                            &lt;/sourceDirs&gt;\r\n                            &lt;annotationProcessorPaths&gt;\r\n                                &lt;!-- Specify your annotation processors here. --&gt;\r\n                                &lt;annotationProcessorPath&gt;\r\n                                    &lt;groupId&gt;com.google.dagger&lt;/groupId&gt;\r\n                                    &lt;artifactId&gt;dagger-compiler&lt;/artifactId&gt;\r\n                                    &lt;version&gt;2.22&lt;/version&gt;\r\n                                &lt;/annotationProcessorPath&gt;\r\n                            &lt;/annotationProcessorPaths&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;compile&lt;/id&gt;\r\n                        &lt;phase&gt;compile&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;compile&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;sourceDirs&gt;\r\n                                &lt;sourceDir&gt;src/main/kotlin&lt;/sourceDir&gt;\r\n                                &lt;sourceDir&gt;src/main/java&lt;/sourceDir&gt;\r\n                            &lt;/sourceDirs&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;test-compile&lt;/id&gt;\r\n                        &lt;phase&gt;test-compile&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;test-compile&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;sourceDirs&gt;\r\n                                &lt;sourceDir&gt;src/test/kotlin&lt;/sourceDir&gt;\r\n                                &lt;sourceDir&gt;src/test/java&lt;/sourceDir&gt;\r\n                            &lt;/sourceDirs&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;11&lt;/source&gt;\r\n                    &lt;target&gt;11&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;default-compile&lt;/id&gt;\r\n                        &lt;phase&gt;none&lt;/phase&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;default-testCompile&lt;/id&gt;\r\n                        &lt;phase&gt;none&lt;/phase&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;java-compile&lt;/id&gt;\r\n                        &lt;phase&gt;compile&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;compile&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;java-test-compile&lt;/id&gt;\r\n                        &lt;phase&gt;test-compile&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;testCompile&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\nThese are the links usefull to read when you want to create maven project with java, kotlin and dagger:\r\n\r\n - [https://www.baeldung.com/kotlin/maven-java-project][1]\r\n - [https://kotlinlang.org/docs/kapt.html#using-in-maven][2]\r\n - [https://github.com/google/dagger#installation][3]\r\n\r\n  [1]: https://www.baeldung.com/kotlin/maven-java-project\r\n  [2]: https://kotlinlang.org/docs/kapt.html#using-in-maven\r\n  [3]: https://github.com/google/dagger#installation\r\n\r\nPlease note that kapt is still not supported for IntelliJ IDEA&#39;s own build system. Because of this, you will not be able to compile and run the application in the Intellij IDE by clicking on the Play button next to the Main method. To run the application, first build the project using the maven toolbox. After that, you can run the application in the Intellij IDE by clicking on the Play button next to the Main method. Alternatively you can create a run configuration to run the jar file. After that, you can run this configuration, or run it in debug mode by clicking on the run or debug button next to the run configuration combobox.","title":"Maven configuration for using Dagger 2 in a mixed Java/Kotlin project","body":"<p>Since kapt is now supported in maven, you can write your services in both Java and Kotlin, and the module can be created by either a Java class or a Kotlin class. You can configure pom.xml build file like this:</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n        &lt;artifactId&gt;kotlin-stdlib&lt;/artifactId&gt;\n        &lt;version&gt;1.7.20&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.dagger&lt;/groupId&gt;\n        &lt;artifactId&gt;dagger&lt;/artifactId&gt;\n        &lt;version&gt;2.22&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${kotlin.version}&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;kapt&lt;/id&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;kapt&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;sourceDirs&gt;\n                            &lt;sourceDir&gt;src/main/kotlin&lt;/sourceDir&gt;\n                            &lt;sourceDir&gt;src/main/java&lt;/sourceDir&gt;\n                        &lt;/sourceDirs&gt;\n                        &lt;annotationProcessorPaths&gt;\n                            &lt;!-- Specify your annotation processors here. --&gt;\n                            &lt;annotationProcessorPath&gt;\n                                &lt;groupId&gt;com.google.dagger&lt;/groupId&gt;\n                                &lt;artifactId&gt;dagger-compiler&lt;/artifactId&gt;\n                                &lt;version&gt;2.22&lt;/version&gt;\n                            &lt;/annotationProcessorPath&gt;\n                        &lt;/annotationProcessorPaths&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;compile&lt;/id&gt;\n                    &lt;phase&gt;compile&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;compile&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;sourceDirs&gt;\n                            &lt;sourceDir&gt;src/main/kotlin&lt;/sourceDir&gt;\n                            &lt;sourceDir&gt;src/main/java&lt;/sourceDir&gt;\n                        &lt;/sourceDirs&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;test-compile&lt;/id&gt;\n                    &lt;phase&gt;test-compile&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;test-compile&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;sourceDirs&gt;\n                            &lt;sourceDir&gt;src/test/kotlin&lt;/sourceDir&gt;\n                            &lt;sourceDir&gt;src/test/java&lt;/sourceDir&gt;\n                        &lt;/sourceDirs&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.8.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;11&lt;/source&gt;\n                &lt;target&gt;11&lt;/target&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;default-compile&lt;/id&gt;\n                    &lt;phase&gt;none&lt;/phase&gt;\n                &lt;/execution&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;default-testCompile&lt;/id&gt;\n                    &lt;phase&gt;none&lt;/phase&gt;\n                &lt;/execution&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;java-compile&lt;/id&gt;\n                    &lt;phase&gt;compile&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;compile&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;java-test-compile&lt;/id&gt;\n                    &lt;phase&gt;test-compile&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;testCompile&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>These are the links usefull to read when you want to create maven project with java, kotlin and dagger:</p>\n<ul>\n<li><a href=\"https://www.baeldung.com/kotlin/maven-java-project\" rel=\"nofollow noreferrer\">https://www.baeldung.com/kotlin/maven-java-project</a></li>\n<li><a href=\"https://kotlinlang.org/docs/kapt.html#using-in-maven\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/kapt.html#using-in-maven</a></li>\n<li><a href=\"https://github.com/google/dagger#installation\" rel=\"nofollow noreferrer\">https://github.com/google/dagger#installation</a></li>\n</ul>\n<p>Please note that kapt is still not supported for IntelliJ IDEA's own build system. Because of this, you will not be able to compile and run the application in the Intellij IDE by clicking on the Play button next to the Main method. To run the application, first build the project using the maven toolbox. After that, you can run the application in the Intellij IDE by clicking on the Play button next to the Main method. Alternatively you can create a run configuration to run the jar file. After that, you can run this configuration, or run it in debug mode by clicking on the run or debug button next to the run configuration combobox.</p>\n"}],"owner":{"account_id":411202,"reputation":41997,"user_id":783510,"accept_rate":91,"display_name":"Philipp Cla&#223;en"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1715,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":2,"score":8,"last_activity_date":1665674900,"creation_date":1449420209,"question_id":34119958,"body_markdown":"What is the recommended Maven setup for using [Dagger 2][1] in a mixed Java/Kotlin project?\r\n\r\nI found a sample project which uses Gradle: https://github.com/damianpetla/kotlin-dagger-example\r\nSomething similar with Maven would be very helpful.\r\n\r\n---\r\n\r\n**UPDATE: What have I tried?**\r\n\r\nI used the Kotlin configuration from [kotlinlang.org/docs/reference/using-maven.html][2]\r\nand the Dagger configuration from [google.github.io/dagger][3].\r\nI also used the [build-helper-maven-plugin][4] plugin to integrate the annotation processing in IDEA.\r\n\r\nMy main problem was that I run into compilation cycles. My configuration mixed the compilation of Kotlin and calling the annotation processor, which generates Dagger2 classes. I unsystematically tried to separate both phases but lacked the deeper Maven understanding to get it working.\r\n\r\n\r\n  [1]: https://github.com/google/dagger\r\n  [2]: http://kotlinlang.org/docs/reference/using-maven.html\r\n  [3]: http://google.github.io/dagger\r\n  [4]: http://www.mojohaus.org/build-helper-maven-plugin/","title":"Maven configuration for using Dagger 2 in a mixed Java/Kotlin project","body":"<p>What is the recommended Maven setup for using <a href=\"https://github.com/google/dagger\" rel=\"noreferrer\">Dagger 2</a> in a mixed Java/Kotlin project?</p>\n\n<p>I found a sample project which uses Gradle: <a href=\"https://github.com/damianpetla/kotlin-dagger-example\" rel=\"noreferrer\">https://github.com/damianpetla/kotlin-dagger-example</a>\nSomething similar with Maven would be very helpful.</p>\n\n<hr>\n\n<p><strong>UPDATE: What have I tried?</strong></p>\n\n<p>I used the Kotlin configuration from <a href=\"http://kotlinlang.org/docs/reference/using-maven.html\" rel=\"noreferrer\">kotlinlang.org/docs/reference/using-maven.html</a>\nand the Dagger configuration from <a href=\"http://google.github.io/dagger\" rel=\"noreferrer\">google.github.io/dagger</a>.\nI also used the <a href=\"http://www.mojohaus.org/build-helper-maven-plugin/\" rel=\"noreferrer\">build-helper-maven-plugin</a> plugin to integrate the annotation processing in IDEA.</p>\n\n<p>My main problem was that I run into compilation cycles. My configuration mixed the compilation of Kotlin and calling the annotation processor, which generates Dagger2 classes. I unsystematically tried to separate both phases but lacked the deeper Maven understanding to get it working.</p>\n"},{"tags":["java","apache-kafka","apache-kafka-streams","spring-cloud-stream"],"answers":[{"tags":[],"owner":{"account_id":2365019,"reputation":5194,"user_id":2070861,"accept_rate":100,"display_name":"sobychacko"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665670118,"creation_date":1665670118,"answer_id":74057188,"question_id":74052789,"body_markdown":"I think this is related to this issue: https://github.com/spring-cloud/spring-cloud-stream/issues/2523\r\n\r\nCould you try it against the latest `3.2.x` snapshot of the binder? (`3.2.6-SNAPSHOT`). We will do a release soon for this.\r\n\r\nYou just need to update the binder dependency - `spring-cloud-stream-binder-kafka-streams` (to `3.2.6-SNAPSHOT`). ","title":"Kafka Streams Binding: Store (prod-id-count-store) not available to Streams instance","body":"<p>I think this is related to this issue: <a href=\"https://github.com/spring-cloud/spring-cloud-stream/issues/2523\" rel=\"nofollow noreferrer\">https://github.com/spring-cloud/spring-cloud-stream/issues/2523</a></p>\n<p>Could you try it against the latest <code>3.2.x</code> snapshot of the binder? (<code>3.2.6-SNAPSHOT</code>). We will do a release soon for this.</p>\n<p>You just need to update the binder dependency - <code>spring-cloud-stream-binder-kafka-streams</code> (to <code>3.2.6-SNAPSHOT</code>).</p>\n"},{"tags":[],"owner":{"account_id":24209301,"reputation":491,"user_id":18166042,"display_name":"onobc"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1665674711,"creation_date":1665674711,"answer_id":74058277,"question_id":74052789,"body_markdown":"The fix is in the `main` branch, but not `3.2.x` yet. However, you should be able to [workaround](https://github.com/spring-cloud/spring-cloud-stream/issues/2523#issuecomment-1272442395) the issue by setting:\r\n```\r\nspring.cloud.stream.kafka.streams.binder.configuration.application.server=&lt;server&gt;:&lt;port&gt;\r\n```","title":"Kafka Streams Binding: Store (prod-id-count-store) not available to Streams instance","body":"<p>The fix is in the <code>main</code> branch, but not <code>3.2.x</code> yet. However, you should be able to <a href=\"https://github.com/spring-cloud/spring-cloud-stream/issues/2523#issuecomment-1272442395\" rel=\"nofollow noreferrer\">workaround</a> the issue by setting:</p>\n<pre><code>spring.cloud.stream.kafka.streams.binder.configuration.application.server=&lt;server&gt;:&lt;port&gt;\n</code></pre>\n"}],"owner":{"account_id":8999856,"reputation":2172,"user_id":6708868,"display_name":"MBec"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":396,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74058277,"answer_count":2,"score":0,"last_activity_date":1665674711,"creation_date":1665650259,"question_id":74052789,"body_markdown":"I&#39;m trying to run interactive queries on Kafka Streams using Spring Cloud Stream Kafka Binder. I stuck on retrieving key value store from ```InteractiveQueryService```.  I&#39;m keep getting always the same error on my code and even on code from examples:\r\n\r\nhttps://github.com/spring-cloud/spring-cloud-stream-samples/tree/main/kafka-streams-samples/kafka-streams-interactive-query-basic\r\n\r\n```\r\njava.lang.IllegalStateException: Error retrieving state store: prod-id-count-store\r\n\tat org.springframework.cloud.stream.binder.kafka.streams.InteractiveQueryService.lambda$getQueryableStore$0(InteractiveQueryService.java:115) ~[spring-cloud-stream-binder-kafka-streams-3.2.5.jar:3.2.5]\r\n\tat org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:329) ~[spring-retry-1.3.1.jar:na]\r\n\tat org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:209) ~[spring-retry-1.3.1.jar:na]\r\n\tat org.springframework.cloud.stream.binder.kafka.streams.InteractiveQueryService.getQueryableStore(InteractiveQueryService.java:88) ~[spring-cloud-stream-binder-kafka-streams-3.2.5.jar:3.2.5]\r\n\tat com.nowatel.teacher.service.KafkaStreamsInteractiveQueryApplication$InteractiveProductCountApplication.printProductCounts(KafkaStreamsInteractiveQueryApplication.java:71) ~[main/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84) ~[spring-context-5.3.23.jar:5.3.23]\r\n\tat org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54) ~[spring-context-5.3.23.jar:5.3.23]\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539) ~[na:na]\r\n\tat java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305) ~[na:na]\r\n\tat java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java) ~[na:na]\r\n\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) ~[na:na]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\nCaused by: org.apache.kafka.streams.errors.UnknownStateStoreException: Store (prod-id-count-store) not available to Streams instance\r\n\tat org.springframework.cloud.stream.binder.kafka.streams.InteractiveQueryService.getStateStoreFromKafkaStreams(InteractiveQueryService.java:126) ~[spring-cloud-stream-binder-kafka-streams-3.2.5.jar:3.2.5]\r\n\tat org.springframework.cloud.stream.binder.kafka.streams.InteractiveQueryService.lambda$getQueryableStore$0(InteractiveQueryService.java:109) ~[spring-cloud-stream-binder-kafka-streams-3.2.5.jar:3.2.5]\r\n\t... 17 common frames omitted\r\n```\r\n\r\nCode is from example class:\r\n\r\nhttps://github.com/spring-cloud/spring-cloud-stream-samples/blob/main/kafka-streams-samples/kafka-streams-interactive-query-basic/src/main/java/kafka/streams/product/tracker/KafkaStreamsInteractiveQueryApplication.java\r\n\r\nMy ```application.properties``` file: \r\n```\r\nspring.cloud.stream.kafka.streams.binder.configuration.commit.interval.ms=1000\r\nspring.cloud.stream.bindings.process-out-0.destination=product-counts\r\nspring.cloud.stream.bindings.process-in-0.destination=products\r\nspring.application.name=kafka-streams-iq-basic-sample\r\n```\r\n\r\nThe only difference is Spring Boot version, Spring Cloud version and Java 17. \r\n\r\nMy ```build.gradle``` file:\r\n```\r\nplugins {\r\n    id &#39;org.springframework.boot&#39; version &quot;2.7.4&quot;\r\n    id &#39;io.spring.dependency-management&#39; version &quot;1.0.14.RELEASE&quot;\r\n    id &#39;java&#39;\r\n}\r\n\r\ngroup = &#39;com.example&#39;\r\nversion = &#39;0.0.1-SNAPSHOT&#39;\r\nsourceCompatibility = javaVersion\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-webflux&#39;\r\n    implementation &#39;org.apache.kafka:kafka-streams&#39;\r\n    implementation &#39;org.springframework.cloud:spring-cloud-stream&#39;\r\n    implementation &#39;org.springframework.cloud:spring-cloud-stream-binder-kafka&#39;\r\n    implementation &#39;org.springframework.cloud:spring-cloud-stream-binder-kafka-streams&#39;\r\n    implementation &#39;org.springframework.kafka:spring-kafka&#39;\r\n\r\n    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n    testImplementation &#39;org.springframework.kafka:spring-kafka-test&#39;\r\n    testImplementation &#39;io.projectreactor:reactor-test&#39;\r\n}\r\n\r\ndependencyManagement {\r\n    imports {\r\n        mavenBom &quot;org.springframework.cloud:spring-cloud-dependencies:2021.0.4&quot;\r\n    }\r\n}\r\n\r\ntasks.named(&#39;test&#39;) {\r\n    useJUnitPlatform()\r\n}\r\n```\r\n **Kafka version: kafka_2.13-3.2.3**\r\n\r\nCan you please tell what I&#39;m doing wrong, because I&#39;ve wasted 2 days and have no ideas.","title":"Kafka Streams Binding: Store (prod-id-count-store) not available to Streams instance","body":"<p>I'm trying to run interactive queries on Kafka Streams using Spring Cloud Stream Kafka Binder. I stuck on retrieving key value store from <code>InteractiveQueryService</code>.  I'm keep getting always the same error on my code and even on code from examples:</p>\n<p><a href=\"https://github.com/spring-cloud/spring-cloud-stream-samples/tree/main/kafka-streams-samples/kafka-streams-interactive-query-basic\" rel=\"nofollow noreferrer\">https://github.com/spring-cloud/spring-cloud-stream-samples/tree/main/kafka-streams-samples/kafka-streams-interactive-query-basic</a></p>\n<pre><code>java.lang.IllegalStateException: Error retrieving state store: prod-id-count-store\n    at org.springframework.cloud.stream.binder.kafka.streams.InteractiveQueryService.lambda$getQueryableStore$0(InteractiveQueryService.java:115) ~[spring-cloud-stream-binder-kafka-streams-3.2.5.jar:3.2.5]\n    at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:329) ~[spring-retry-1.3.1.jar:na]\n    at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:209) ~[spring-retry-1.3.1.jar:na]\n    at org.springframework.cloud.stream.binder.kafka.streams.InteractiveQueryService.getQueryableStore(InteractiveQueryService.java:88) ~[spring-cloud-stream-binder-kafka-streams-3.2.5.jar:3.2.5]\n    at com.nowatel.teacher.service.KafkaStreamsInteractiveQueryApplication$InteractiveProductCountApplication.printProductCounts(KafkaStreamsInteractiveQueryApplication.java:71) ~[main/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84) ~[spring-context-5.3.23.jar:5.3.23]\n    at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54) ~[spring-context-5.3.23.jar:5.3.23]\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539) ~[na:na]\n    at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305) ~[na:na]\n    at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java) ~[na:na]\n    at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\nCaused by: org.apache.kafka.streams.errors.UnknownStateStoreException: Store (prod-id-count-store) not available to Streams instance\n    at org.springframework.cloud.stream.binder.kafka.streams.InteractiveQueryService.getStateStoreFromKafkaStreams(InteractiveQueryService.java:126) ~[spring-cloud-stream-binder-kafka-streams-3.2.5.jar:3.2.5]\n    at org.springframework.cloud.stream.binder.kafka.streams.InteractiveQueryService.lambda$getQueryableStore$0(InteractiveQueryService.java:109) ~[spring-cloud-stream-binder-kafka-streams-3.2.5.jar:3.2.5]\n    ... 17 common frames omitted\n</code></pre>\n<p>Code is from example class:</p>\n<p><a href=\"https://github.com/spring-cloud/spring-cloud-stream-samples/blob/main/kafka-streams-samples/kafka-streams-interactive-query-basic/src/main/java/kafka/streams/product/tracker/KafkaStreamsInteractiveQueryApplication.java\" rel=\"nofollow noreferrer\">https://github.com/spring-cloud/spring-cloud-stream-samples/blob/main/kafka-streams-samples/kafka-streams-interactive-query-basic/src/main/java/kafka/streams/product/tracker/KafkaStreamsInteractiveQueryApplication.java</a></p>\n<p>My <code>application.properties</code> file:</p>\n<pre><code>spring.cloud.stream.kafka.streams.binder.configuration.commit.interval.ms=1000\nspring.cloud.stream.bindings.process-out-0.destination=product-counts\nspring.cloud.stream.bindings.process-in-0.destination=products\nspring.application.name=kafka-streams-iq-basic-sample\n</code></pre>\n<p>The only difference is Spring Boot version, Spring Cloud version and Java 17.</p>\n<p>My <code>build.gradle</code> file:</p>\n<pre><code>plugins {\n    id 'org.springframework.boot' version &quot;2.7.4&quot;\n    id 'io.spring.dependency-management' version &quot;1.0.14.RELEASE&quot;\n    id 'java'\n}\n\ngroup = 'com.example'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = javaVersion\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-webflux'\n    implementation 'org.apache.kafka:kafka-streams'\n    implementation 'org.springframework.cloud:spring-cloud-stream'\n    implementation 'org.springframework.cloud:spring-cloud-stream-binder-kafka'\n    implementation 'org.springframework.cloud:spring-cloud-stream-binder-kafka-streams'\n    implementation 'org.springframework.kafka:spring-kafka'\n\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    testImplementation 'org.springframework.kafka:spring-kafka-test'\n    testImplementation 'io.projectreactor:reactor-test'\n}\n\ndependencyManagement {\n    imports {\n        mavenBom &quot;org.springframework.cloud:spring-cloud-dependencies:2021.0.4&quot;\n    }\n}\n\ntasks.named('test') {\n    useJUnitPlatform()\n}\n</code></pre>\n<p><strong>Kafka version: kafka_2.13-3.2.3</strong></p>\n<p>Can you please tell what I'm doing wrong, because I've wasted 2 days and have no ideas.</p>\n"},{"tags":["java","hibernate","jpa","vaadin"],"comments":[{"owner":{"account_id":3837378,"reputation":35488,"user_id":3181392,"display_name":"cfrick"},"score":1,"creation_date":1665498915,"post_id":74028901,"comment_id":130711975,"body_markdown":"How is this related to Vaadin? Does it work if you remove Vaadin?","body":"How is this related to Vaadin? Does it work if you remove Vaadin?"},{"owner":{"account_id":26590702,"reputation":3,"user_id":20213979,"display_name":"louis"},"score":0,"creation_date":1665499910,"post_id":74028901,"comment_id":130712403,"body_markdown":"Im using it in Vaadin so yeah even if its working outside of vaadin it doesnt solve my problem","body":"Im using it in Vaadin so yeah even if its working outside of vaadin it doesnt solve my problem"},{"owner":{"account_id":3837378,"reputation":35488,"user_id":3181392,"display_name":"cfrick"},"score":2,"creation_date":1665501159,"post_id":74028901,"comment_id":130712796,"body_markdown":"So _does_ it work without vaadin and vaadin is the sole culprit? I find that hard to believe and i think, this is mistagged. The error suggest a error with the used SQL, which more likely suggest a mis-configuration in H2, Hibernate, or the migrations within.","body":"So <i>does</i> it work without vaadin and vaadin is the sole culprit? I find that hard to believe and i think, this is mistagged. The error suggest a error with the used SQL, which more likely suggest a mis-configuration in H2, Hibernate, or the migrations within."},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":1,"creation_date":1665502311,"post_id":74028901,"comment_id":130713206,"body_markdown":"Can you please post the whole stacktrace. There must be a SQL exception indicating what&#39;s wrong","body":"Can you please post the whole stacktrace. There must be a SQL exception indicating what&#39;s wrong"},{"owner":{"account_id":26590702,"reputation":3,"user_id":20213979,"display_name":"louis"},"score":0,"creation_date":1665589272,"post_id":74028901,"comment_id":130737689,"body_markdown":"I dont know its the only issue. The other Databases over H2, Spring and Vaadin are working perfectly fine.","body":"I dont know its the only issue. The other Databases over H2, Spring and Vaadin are working perfectly fine."},{"owner":{"account_id":26590702,"reputation":3,"user_id":20213979,"display_name":"louis"},"score":0,"creation_date":1665589280,"post_id":74028901,"comment_id":130737693,"body_markdown":"The full stacktrace: [link](https://hastebin.com/ohejabogil.properties)\nCant post it here because its too long for the comment section","body":"The full stacktrace: <a href=\"https://hastebin.com/ohejabogil.properties\" rel=\"nofollow noreferrer\">link</a> Cant post it here because its too long for the comment section"},{"owner":{"account_id":12280349,"reputation":10212,"user_id":8962195,"display_name":"Tatu Lund"},"score":0,"creation_date":1665673049,"post_id":74028901,"comment_id":130758819,"body_markdown":"You are probably having field in your entity which has name which is reserved keyword in the database you use, or you have slightly wrong database driver / dialect setup in your project. In case of first one use  `@Column` to define the actual column name in your entity.","body":"You are probably having field in your entity which has name which is reserved keyword in the database you use, or you have slightly wrong database driver / dialect setup in your project. In case of first one use  <code>@Column</code> to define the actual column name in your entity."}],"answers":[{"tags":[],"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1665674310,"creation_date":1665674310,"answer_id":74058188,"question_id":74028901,"body_markdown":"MONTH and YEAR are reserved keywords in H2 and the SQL standard.\r\n\r\nYou have to rename the attributes or only the column with `@Column` annotation.\r\n\r\nPlease find the full list here:\r\nhttp://www.h2database.com/html/advanced.html","title":"Database not creating","body":"<p>MONTH and YEAR are reserved keywords in H2 and the SQL standard.</p>\n<p>You have to rename the attributes or only the column with <code>@Column</code> annotation.</p>\n<p>Please find the full list here:\n<a href=\"http://www.h2database.com/html/advanced.html\" rel=\"nofollow noreferrer\">http://www.h2database.com/html/advanced.html</a></p>\n"}],"owner":{"account_id":26590702,"reputation":3,"user_id":20213979,"display_name":"louis"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74058188,"answer_count":1,"score":0,"last_activity_date":1665674310,"creation_date":1665494773,"question_id":74028901,"body_markdown":"I just started to use vaadin. I&#39;m currently using the H2 database, but when I want to create the database &quot;Upload&quot; I get an error:\r\n\r\n```\r\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL &quot;create table upload (id varchar(255) not null, file_name varchar(255) not null, import_date bigint not null, month varchar(255) not null, year varchar(255) not null, primary key (id))&quot; via JDBC Statement\r\n\tat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlString(SchemaCreatorImpl.java:458) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlStrings(SchemaCreatorImpl.java:442) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:325) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:169) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:138) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:124) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:168) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:85) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:335) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:471) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1498) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n```\r\n\r\nI created like in the tutorial the Repository and the Service Class dedicated to the Upload Table.","title":"Database not creating","body":"<p>I just started to use vaadin. I'm currently using the H2 database, but when I want to create the database &quot;Upload&quot; I get an error:</p>\n<pre><code>org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL &quot;create table upload (id varchar(255) not null, file_name varchar(255) not null, import_date bigint not null, month varchar(255) not null, year varchar(255) not null, primary key (id))&quot; via JDBC Statement\n    at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlString(SchemaCreatorImpl.java:458) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlStrings(SchemaCreatorImpl.java:442) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:325) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:169) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:138) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:124) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:168) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:85) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:335) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:471) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1498) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n</code></pre>\n<p>I created like in the tutorial the Repository and the Service Class dedicated to the Upload Table.</p>\n"},{"tags":["java","opencv","aruco"],"answers":[{"comments":[{"owner":{"account_id":210918,"reputation":632,"user_id":462794,"accept_rate":82,"display_name":"Bussiere"},"score":0,"creation_date":1665599589,"post_id":74043821,"comment_id":130741162,"body_markdown":"nope it&#39;s not working :","body":"nope it&#39;s not working :"},{"owner":{"account_id":24783875,"reputation":6014,"user_id":18667225,"display_name":"Markus"},"score":0,"creation_date":1665674080,"post_id":74043821,"comment_id":130759236,"body_markdown":"@Bussiere: That is really odd. If I run your &quot;minimal code&quot; on the edited image I get the expected result (see update). What might be the difference between your and my environment? What is your output if you do the same in your environment?","body":"@Bussiere: That is really odd. If I run your &quot;minimal code&quot; on the edited image I get the expected result (see update). What might be the difference between your and my environment? What is your output if you do the same in your environment?"},{"owner":{"account_id":210918,"reputation":632,"user_id":462794,"accept_rate":82,"display_name":"Bussiere"},"score":0,"creation_date":1665674468,"post_id":74043821,"comment_id":130759417,"body_markdown":"you&#39;re right i&#39;ve modified my code to test other things and with this code and your explanation and pictures it works fine.   Thanks a lot :)","body":"you&#39;re right i&#39;ve modified my code to test other things and with this code and your explanation and pictures it works fine.   Thanks a lot :)"},{"owner":{"account_id":210918,"reputation":632,"user_id":462794,"accept_rate":82,"display_name":"Bussiere"},"score":1,"creation_date":1665918458,"post_id":74043821,"comment_id":130807158,"body_markdown":"sorry for the late bounty award i was persuaded that i already gave it to you","body":"sorry for the late bounty award i was persuaded that i already gave it to you"}],"tags":[],"owner":{"account_id":24783875,"reputation":6014,"user_id":18667225,"display_name":"Markus"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1665674200,"creation_date":1665585859,"answer_id":74043821,"question_id":74013320,"body_markdown":"ArUco markers shouldn&#39;t be placed directly at the edge of the image. And the markers need a complete and wide black border.\r\n \r\n - If you add some white space around the whole image then the first two markers are detected (id 0 and 1).\r\n - If you add some black color to the broken frame of the second row of markers then all markers are detected (id 0, 1, 2 and 3).\r\n\r\nPlease check this modified input image:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**Update**\r\n\r\nWhen I run your code above with this image I get the following ouput:\r\n```\r\ncurrent path is: &lt;my working dir&gt;\r\nWelcome to OpenCV 4.6.0\r\nOpenCV Mat: [2;\r\n 3;\r\n 1;\r\n 0]\r\nOpenCV size idds  1x4\r\nOpenCV Mat Corner: 4\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/WGjmE.jpg","title":"Aruco , Charuco detection with java and opencv","body":"<p>ArUco markers shouldn't be placed directly at the edge of the image. And the markers need a complete and wide black border.</p>\n<ul>\n<li>If you add some white space around the whole image then the first two markers are detected (id 0 and 1).</li>\n<li>If you add some black color to the broken frame of the second row of markers then all markers are detected (id 0, 1, 2 and 3).</li>\n</ul>\n<p>Please check this modified input image:</p>\n<p><a href=\"https://i.stack.imgur.com/WGjmE.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WGjmE.jpg\" alt=\"enter image description here\" /></a></p>\n<p><strong>Update</strong></p>\n<p>When I run your code above with this image I get the following ouput:</p>\n<pre><code>current path is: &lt;my working dir&gt;\nWelcome to OpenCV 4.6.0\nOpenCV Mat: [2;\n 3;\n 1;\n 0]\nOpenCV size idds  1x4\nOpenCV Mat Corner: 4\n</code></pre>\n"}],"owner":{"account_id":210918,"reputation":632,"user_id":462794,"accept_rate":82,"display_name":"Bussiere"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":645,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74043821,"answer_count":1,"score":0,"last_activity_date":1665674200,"creation_date":1665396972,"question_id":74013320,"body_markdown":"here is my minimal code :\r\n\r\n\r\n    package charucotest;\r\n    \r\n    \r\n    \r\n    \r\n    import org.opencv.core.Core;\r\n    import org.opencv.core.Mat;\r\n    import org.opencv.core.CvType;\r\n    import org.opencv.core.Scalar;\r\n    \r\n    import org.opencv.core.*;\r\n    import org.opencv.highgui.HighGui;\r\n    import org.opencv.imgcodecs.Imgcodecs;\r\n    import org.opencv.imgproc.Imgproc;\r\n    import org.opencv.objdetect.QRCodeDetector;\r\n    \r\n    \r\n    import java.awt.image.BufferedImage;\r\n    import java.io.ByteArrayInputStream;\r\n    import java.io.InputStream;\r\n    import javax.imageio.ImageIO;\r\n    import javax.swing.ImageIcon;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.SwingUtilities;\r\n    import org.opencv.core.MatOfByte;\r\n    import org.opencv.core.Size;\r\n    \r\n    \r\n    \r\n    import org.opencv.videoio.VideoCapture;\r\n    import java.util.concurrent.*;\r\n    \r\n    import org.opencv.aruco.Aruco;\r\n    import org.opencv.aruco.ArucoDetector;\r\n    import org.opencv.aruco.DetectorParameters;\r\n    import org.opencv.aruco.Dictionary;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class App {\r\n    \r\n    \r\n        public static JFrame frame;\r\n    \r\n        public static String currentpath;\r\n    \r\n    \r\n        public static void main(String[] args) {\r\n            currentpath = System.getProperty(&quot;user.dir&quot;);\r\n            System.out.println(&quot;current path is:&quot; + currentpath);\r\n            System.load(currentpath+&quot;/lib/libopencv_java460.so&quot;);\r\n            Dictionary dictionary= Aruco.getPredefinedDictionary(Aruco.DICT_4X4_50);\r\n            DetectorParameters parameters= DetectorParameters.create();\r\n            //parameters.set_cornerRefinementMethod(Aruco.CORNER_REFINE_NONE);\r\n            //parameters.set_cornerRefinementMethod();\r\n            ArucoDetector detector= new ArucoDetector(dictionary,parameters);\r\n        \r\n            System.out.println(&quot;Welcome to OpenCV &quot; + Core.VERSION);\r\n            List&lt;Mat&gt; corners = new ArrayList&lt;Mat&gt;();\r\n            //List&lt;Mat&gt; rejectedImgPoints = new ArrayList&lt;Mat&gt;();\r\n            Mat ids = new Mat();\r\n            // [12,12]\r\n            Mat img2 = Imgcodecs.imread(currentpath+&quot;/assets/card.jpg&quot;);\r\n            detector.detectMarkers(img2, corners, ids);\r\n            System.out.println(&quot;OpenCV Mat: &quot; + ids.dump());\r\n            System.out.println(&quot;OpenCV size idds  &quot; + ids.size());\r\n            System.out.println(&quot;OpenCV Mat Corner: &quot; + String.valueOf(corners.size()));\r\n    \r\n    \r\n        } \r\n    \r\n    }\r\n\r\nThe opencv lib is loaded, if i had two lines i can decode qrcode so it&#39;s working.\r\n\r\nBut when i try to read my asset card :\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nIt found nothing,\r\n\r\ni&#39;ve verfied the aruco codes seems te be good the 4x4 50 : https://chev.me/arucogen/\r\n\r\nSo i have no idea why it didn&#39;t found the arcuo code.\r\n\r\nthe test project is here :\r\n\r\nhttps://github.com/bussiere/charucotest/blob/master/app/src/main/java/charucotest/App.java\r\nedit :\r\nEvent with this board :\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nOr by changing the detection dictionary to 6x6 and with this board (the qrcode detection work fine)\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UzrAA.jpg\r\n  [2]: https://i.stack.imgur.com/0v9Zg.jpg\r\n  [3]: https://i.stack.imgur.com/5DqKv.png","title":"Aruco , Charuco detection with java and opencv","body":"<p>here is my minimal code :</p>\n<pre><code>package charucotest;\n\n\n\n\nimport org.opencv.core.Core;\nimport org.opencv.core.Mat;\nimport org.opencv.core.CvType;\nimport org.opencv.core.Scalar;\n\nimport org.opencv.core.*;\nimport org.opencv.highgui.HighGui;\nimport org.opencv.imgcodecs.Imgcodecs;\nimport org.opencv.imgproc.Imgproc;\nimport org.opencv.objdetect.QRCodeDetector;\n\n\nimport java.awt.image.BufferedImage;\nimport java.io.ByteArrayInputStream;\nimport java.io.InputStream;\nimport javax.imageio.ImageIO;\nimport javax.swing.ImageIcon;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.SwingUtilities;\nimport org.opencv.core.MatOfByte;\nimport org.opencv.core.Size;\n\n\n\nimport org.opencv.videoio.VideoCapture;\nimport java.util.concurrent.*;\n\nimport org.opencv.aruco.Aruco;\nimport org.opencv.aruco.ArucoDetector;\nimport org.opencv.aruco.DetectorParameters;\nimport org.opencv.aruco.Dictionary;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class App {\n\n\n    public static JFrame frame;\n\n    public static String currentpath;\n\n\n    public static void main(String[] args) {\n        currentpath = System.getProperty(&quot;user.dir&quot;);\n        System.out.println(&quot;current path is:&quot; + currentpath);\n        System.load(currentpath+&quot;/lib/libopencv_java460.so&quot;);\n        Dictionary dictionary= Aruco.getPredefinedDictionary(Aruco.DICT_4X4_50);\n        DetectorParameters parameters= DetectorParameters.create();\n        //parameters.set_cornerRefinementMethod(Aruco.CORNER_REFINE_NONE);\n        //parameters.set_cornerRefinementMethod();\n        ArucoDetector detector= new ArucoDetector(dictionary,parameters);\n    \n        System.out.println(&quot;Welcome to OpenCV &quot; + Core.VERSION);\n        List&lt;Mat&gt; corners = new ArrayList&lt;Mat&gt;();\n        //List&lt;Mat&gt; rejectedImgPoints = new ArrayList&lt;Mat&gt;();\n        Mat ids = new Mat();\n        // [12,12]\n        Mat img2 = Imgcodecs.imread(currentpath+&quot;/assets/card.jpg&quot;);\n        detector.detectMarkers(img2, corners, ids);\n        System.out.println(&quot;OpenCV Mat: &quot; + ids.dump());\n        System.out.println(&quot;OpenCV size idds  &quot; + ids.size());\n        System.out.println(&quot;OpenCV Mat Corner: &quot; + String.valueOf(corners.size()));\n\n\n    } \n\n}\n</code></pre>\n<p>The opencv lib is loaded, if i had two lines i can decode qrcode so it's working.</p>\n<p>But when i try to read my asset card :</p>\n<p><a href=\"https://i.stack.imgur.com/UzrAA.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UzrAA.jpg\" alt=\"enter image description here\" /></a></p>\n<p>It found nothing,</p>\n<p>i've verfied the aruco codes seems te be good the 4x4 50 : <a href=\"https://chev.me/arucogen/\" rel=\"nofollow noreferrer\">https://chev.me/arucogen/</a></p>\n<p>So i have no idea why it didn't found the arcuo code.</p>\n<p>the test project is here :</p>\n<p><a href=\"https://github.com/bussiere/charucotest/blob/master/app/src/main/java/charucotest/App.java\" rel=\"nofollow noreferrer\">https://github.com/bussiere/charucotest/blob/master/app/src/main/java/charucotest/App.java</a>\nedit :\nEvent with this board :</p>\n<p><a href=\"https://i.stack.imgur.com/0v9Zg.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0v9Zg.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Or by changing the detection dictionary to 6x6 and with this board (the qrcode detection work fine)</p>\n<p><a href=\"https://i.stack.imgur.com/5DqKv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5DqKv.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","multithreading","concurrency"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1665660130,"post_id":74053838,"comment_id":130754121,"body_markdown":"Why the `final Lock lock = this.lock;` lines?","body":"Why the <code>final Lock lock = this.lock;</code> lines?"},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1665663204,"post_id":74053838,"comment_id":130755166,"body_markdown":"IMO, your `equals(...)` method would be more efficient if it simply locked the lock and compared the original two arrays. In your version, it locks and unlocks twice, it creates and destroys two new arrays, it copies two arrays, and it still hast to compare two arrays.","body":"IMO, your <code>equals(...)</code> method would be more efficient if it simply locked the lock and compared the original two arrays. In your version, it locks and unlocks twice, it creates and destroys two new arrays, it copies two arrays, and it still hast to compare two arrays."},{"owner":{"account_id":26594824,"reputation":13,"user_id":20217370,"display_name":"dallin_sh"},"score":0,"creation_date":1665672182,"post_id":74053838,"comment_id":130758472,"body_markdown":"@SolomonSlow I was thinking about it and my thoughts were like instead of holding a lock for the entire duration of equals() I hold the lock only during the call to toArray() and it&#39;s less disruptive for other threads accessing the queue. But I have two calls toArray() method so maybe yes it&#39;s less efficient","body":"@SolomonSlow I was thinking about it and my thoughts were like instead of holding a lock for the entire duration of equals() I hold the lock only during the call to toArray() and it&#39;s less disruptive for other threads accessing the queue. But I have two calls toArray() method so maybe yes it&#39;s less efficient"},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":1,"creation_date":1665674379,"post_id":74053838,"comment_id":130759375,"body_markdown":"See my late answer, below, that talks about whether or not your equals method really is as thread-safe as you might suppose.","body":"See my late answer, below, that talks about whether or not your equals method really is as thread-safe as you might suppose."}],"answers":[{"tags":[],"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665655659,"creation_date":1665655659,"answer_id":74053961,"question_id":74053838,"body_markdown":"Yes, your implementation is thread safe.","title":"Concurrent-safe queue in Java","body":"<p>Yes, your implementation is thread safe.</p>\n"},{"comments":[{"owner":{"account_id":26594824,"reputation":13,"user_id":20217370,"display_name":"dallin_sh"},"score":0,"creation_date":1665689107,"post_id":74058148,"comment_id":130763934,"body_markdown":"Yes, this equals() method is one of my doubts. Thanks for advice, I&#39;ll take a look at this more closely in this way","body":"Yes, this equals() method is one of my doubts. Thanks for advice, I&#39;ll take a look at this more closely in this way"},{"owner":{"account_id":26594824,"reputation":13,"user_id":20217370,"display_name":"dallin_sh"},"score":0,"creation_date":1665689477,"post_id":74058148,"comment_id":130764031,"body_markdown":"And also one point - actually if my queue is thread-safe I have to guarantee that it will be safe to use queue.equals() - but I can&#39;t guarantee what will happen later after check","body":"And also one point - actually if my queue is thread-safe I have to guarantee that it will be safe to use queue.equals() - but I can&#39;t guarantee what will happen later after check"},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1665694248,"post_id":74058148,"comment_id":130765244,"body_markdown":"@dallin_sh, The `equals()` method that you wrote is &quot;thread-safe&quot; in the sense that it won&#39;t crash your program, and it won&#39;t hurt the queue if one thread calls it while other threads are concurrently using the queues; but just because all of the objects in some program are thread-safe, that does not automatically make the whole program thread-safe. The API of your `equals()` method makes it impossible for the _client code that calls it_ to be thread-safe. The API of my `doIfEqual(...)` on the other hand, _can_ be used in a thread-safe way.","body":"@dallin_sh, The <code>equals()</code> method that you wrote is &quot;thread-safe&quot; in the sense that it won&#39;t crash your program, and it won&#39;t hurt the queue if one thread calls it while other threads are concurrently using the queues; but just because all of the objects in some program are thread-safe, that does not automatically make the whole program thread-safe. The API of your <code>equals()</code> method makes it impossible for the <i>client code that calls it</i> to be thread-safe. The API of my <code>doIfEqual(...)</code> on the other hand, <i>can</i> be used in a thread-safe way."},{"owner":{"account_id":26594824,"reputation":13,"user_id":20217370,"display_name":"dallin_sh"},"score":0,"creation_date":1665696532,"post_id":74058148,"comment_id":130765746,"body_markdown":"Yes, i see it..and i noticed even ConcurrentHashMap from java.util package has such annotation to its equals() method - &#39;Compares the specified object with this map for equality. Returns true if the given object is a map with the same mappings as this map. This operation may return misleading results if either map is concurrently modified during execution of this method.&#39;","body":"Yes, i see it..and i noticed even ConcurrentHashMap from java.util package has such annotation to its equals() method - &#39;Compares the specified object with this map for equality. Returns true if the given object is a map with the same mappings as this map. This operation may return misleading results if either map is concurrently modified during execution of this method.&#39;"}],"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1665674095,"creation_date":1665674095,"answer_id":74058148,"question_id":74053838,"body_markdown":"You might want to ask, what does it mean for the `equals` method to be thread safe? Consider this:\r\n\r\n``` lang-java\r\nSafeQueue&lt;T&gt; qa = ...;\r\nSafeQueue&lt;T&gt; qb = ...;\r\n...\r\nif (qa.equals(qb)) {\r\n    handleEqualsCase();\r\n}\r\n```\r\n\r\nIf you had any reason to worry about the thread-safety of the `equals()` method, that could only be because other threads potentially could modify either queue when `equals()` is called.\r\n\r\nBut, by the time `handleEqualsCase()` is called, those other threads still could be running, and now, neither `qa` nor `qb` is locked. There is no guarantee that the two queues _still_ will be equal when `handleEqualsCase()` is called. But, if they&#39;re not equal, that must be a Bad Thing, right? Otherwise, why would you have bothered to test for equality in the first place?\r\n\r\nHere&#39;s one way around that problem. Instead of writing a traditional `equals()` method, write something like this instead:\r\n\r\n``` lang-java\r\nprivate static\r\nboolean unsynchronizedEqualityTest(SafeQueue&lt;T&gt; qa, SafeQueue&lt;T&gt; qb) {\r\n    ...\r\n}\r\n\r\npublic static\r\nvoid doIfEqual(SafeQueue&lt;T&gt; qa, SafeQueue&lt;T&gt; qb, Runnable handler) {\r\n    qa.lock.lock();\r\n    qb.lock.lock();\r\n    try {\r\n        if (unsynchronizedEqualityTest(qa, qb)) {\r\n            handler.run();\r\n        }\r\n    } finally {\r\n        qb.lock.unlock();\r\n        qa.lock.unlock();\r\n    }\r\n}\r\n```\r\nNow, when the client-supplied `handler` is invoked, it&#39;s guaranteed that the two queues still will be equal because they&#39;re both still locked.\r\n\r\n---------------\r\n\r\nBut BEWARE! There&#39;s potential for a deadlock if one thread calls `doIfEqual(qa,qb,...)` and another thread calls `doIfEqual(qb,qa,...)`. I&#39;ll leave it to you to figure out how to prevent that deadlock from happening.","title":"Concurrent-safe queue in Java","body":"<p>You might want to ask, what does it mean for the <code>equals</code> method to be thread safe? Consider this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>SafeQueue&lt;T&gt; qa = ...;\nSafeQueue&lt;T&gt; qb = ...;\n...\nif (qa.equals(qb)) {\n    handleEqualsCase();\n}\n</code></pre>\n<p>If you had any reason to worry about the thread-safety of the <code>equals()</code> method, that could only be because other threads potentially could modify either queue when <code>equals()</code> is called.</p>\n<p>But, by the time <code>handleEqualsCase()</code> is called, those other threads still could be running, and now, neither <code>qa</code> nor <code>qb</code> is locked. There is no guarantee that the two queues <em>still</em> will be equal when <code>handleEqualsCase()</code> is called. But, if they're not equal, that must be a Bad Thing, right? Otherwise, why would you have bothered to test for equality in the first place?</p>\n<p>Here's one way around that problem. Instead of writing a traditional <code>equals()</code> method, write something like this instead:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static\nboolean unsynchronizedEqualityTest(SafeQueue&lt;T&gt; qa, SafeQueue&lt;T&gt; qb) {\n    ...\n}\n\npublic static\nvoid doIfEqual(SafeQueue&lt;T&gt; qa, SafeQueue&lt;T&gt; qb, Runnable handler) {\n    qa.lock.lock();\n    qb.lock.lock();\n    try {\n        if (unsynchronizedEqualityTest(qa, qb)) {\n            handler.run();\n        }\n    } finally {\n        qb.lock.unlock();\n        qa.lock.unlock();\n    }\n}\n</code></pre>\n<p>Now, when the client-supplied <code>handler</code> is invoked, it's guaranteed that the two queues still will be equal because they're both still locked.</p>\n<hr />\n<p>But BEWARE! There's potential for a deadlock if one thread calls <code>doIfEqual(qa,qb,...)</code> and another thread calls <code>doIfEqual(qb,qa,...)</code>. I'll leave it to you to figure out how to prevent that deadlock from happening.</p>\n"}],"owner":{"account_id":26594824,"reputation":13,"user_id":20217370,"display_name":"dallin_sh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74058148,"answer_count":2,"score":0,"last_activity_date":1665674095,"creation_date":1665655124,"question_id":74053838,"body_markdown":"I&#39;m trying to create thread safe queue with unique elements. I see no vulnerabilities but not sure still is this realisation thread safe or not? get(), add(), toArray() methods do everything under lock, toString() and equals() use toArray() in order to get main array copy and work independently with copy without locks.\r\n```\r\npublic class SafeQueue&lt;T&gt; {\r\n        private final Object[] queue;\r\n        private final HashSet&lt;T&gt; content;\r\n        private final Lock lock;\r\n        private int size;\r\n        \r\n        public SafeQueue() {\r\n            queue = new Object[100];\r\n            content = new HashSet&lt;&gt;(100);\r\n            lock = new ReentrantLock();\r\n        }\r\n\r\n        public boolean add(T el) {\r\n            Objects.requireNonNull(el);\r\n            final Lock lock = this.lock;\r\n            lock.lock();\r\n            try {\r\n               //some logic\r\n            } finally {\r\n                lock.unlock();\r\n            }\r\n            return true;\r\n        }\r\n\r\n        public T get() {\r\n            final Lock lock = this.lock;\r\n            lock.lock();\r\n            try {\r\n                T el = (T) queue[0];\r\n                if (el != null) {\r\n                    //some shift logic\r\n                    content.remove(el);\r\n                }\r\n                return el;\r\n            } finally {\r\n                lock.unlock();\r\n            }\r\n        }\r\n\r\n        public Object[] toArray() {\r\n            final Lock lock = this.lock;\r\n            lock.lock();\r\n            try {\r\n                return Arrays.copyOf(this.queue, size);\r\n            } finally {\r\n                lock.unlock();\r\n            }\r\n        }\r\n\r\n        @Override\r\n        public boolean equals(Object o) {\r\n            Object[] eqQueue = ((SafeQueue&lt;?&gt;) o).toArray();\r\n            Object[] curQueue = toArray();\r\n\r\n            //some comparison logic with eqQueue and curQueue\r\n            return equal;\r\n        }\r\n\r\n        @Override\r\n        public String toString() {\r\n            Object[] curQueue = toArray();\r\n            StringBuilder sb = new StringBuilder();\r\n            sb.append(&#39;[&#39;);\r\n            //some logic with curQueue\r\n            return sb.toString();\r\n        }\r\n    }","title":"Concurrent-safe queue in Java","body":"<p>I'm trying to create thread safe queue with unique elements. I see no vulnerabilities but not sure still is this realisation thread safe or not? get(), add(), toArray() methods do everything under lock, toString() and equals() use toArray() in order to get main array copy and work independently with copy without locks.</p>\n<pre><code>public class SafeQueue&lt;T&gt; {\n        private final Object[] queue;\n        private final HashSet&lt;T&gt; content;\n        private final Lock lock;\n        private int size;\n        \n        public SafeQueue() {\n            queue = new Object[100];\n            content = new HashSet&lt;&gt;(100);\n            lock = new ReentrantLock();\n        }\n\n        public boolean add(T el) {\n            Objects.requireNonNull(el);\n            final Lock lock = this.lock;\n            lock.lock();\n            try {\n               //some logic\n            } finally {\n                lock.unlock();\n            }\n            return true;\n        }\n\n        public T get() {\n            final Lock lock = this.lock;\n            lock.lock();\n            try {\n                T el = (T) queue[0];\n                if (el != null) {\n                    //some shift logic\n                    content.remove(el);\n                }\n                return el;\n            } finally {\n                lock.unlock();\n            }\n        }\n\n        public Object[] toArray() {\n            final Lock lock = this.lock;\n            lock.lock();\n            try {\n                return Arrays.copyOf(this.queue, size);\n            } finally {\n                lock.unlock();\n            }\n        }\n\n        @Override\n        public boolean equals(Object o) {\n            Object[] eqQueue = ((SafeQueue&lt;?&gt;) o).toArray();\n            Object[] curQueue = toArray();\n\n            //some comparison logic with eqQueue and curQueue\n            return equal;\n        }\n\n        @Override\n        public String toString() {\n            Object[] curQueue = toArray();\n            StringBuilder sb = new StringBuilder();\n            sb.append('[');\n            //some logic with curQueue\n            return sb.toString();\n        }\n    }\n</code></pre>\n"},{"tags":["java","azure-functions"],"answers":[{"tags":[],"owner":{"account_id":66459,"reputation":1784,"user_id":194933,"accept_rate":86,"display_name":"Eric McNeill"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665674065,"creation_date":1665674065,"answer_id":74058144,"question_id":73966745,"body_markdown":"I spoke with an Azure product manager, who confirmed that Java is lagging C# in Functions, and that the Cosmos input/output bindings aren&#39;t yet supported. Performance is lagging, too, e.g. HTTP triggers are all blocking. For now a static singleton instance of the Cosmos client is the recommended approach.\r\n\r\nI&#39;m going to stick with Java for my app b/c this is a simple application and we use Java for everything else, and I expect Functions Java support will eventually catch up. However if I didn&#39;t have all of those other considerations and this was a stand-alone project I&#39;d probably go with C# at this point in time.","title":"Azure Functions in Java - using value from Service Bus trigger in Cosmos DB input binding","body":"<p>I spoke with an Azure product manager, who confirmed that Java is lagging C# in Functions, and that the Cosmos input/output bindings aren't yet supported. Performance is lagging, too, e.g. HTTP triggers are all blocking. For now a static singleton instance of the Cosmos client is the recommended approach.</p>\n<p>I'm going to stick with Java for my app b/c this is a simple application and we use Java for everything else, and I expect Functions Java support will eventually catch up. However if I didn't have all of those other considerations and this was a stand-alone project I'd probably go with C# at this point in time.</p>\n"}],"owner":{"account_id":66459,"reputation":1784,"user_id":194933,"accept_rate":86,"display_name":"Eric McNeill"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":209,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74058144,"answer_count":1,"score":0,"last_activity_date":1665674065,"creation_date":1665007390,"question_id":73966745,"body_markdown":"I have an Azure Function (in Java) that receives msgs via Service Bus, and I&#39;d like to get a handle on a Cosmos DB record based on one of the properties in the incoming message, for example I receive a json message like so:\r\n{ &quot;id&quot;: &quot;foo&quot; }, and I want the Cosmos Input binding to give me the corresponding DB record.\r\n\r\nThere are plenty of examples on how to do this with an http trigger, but I can&#39;t figure out how to use a Service Bus trigger. I&#39;ve tried variants like this:\r\n```\r\n    @FunctionName(&quot;ServiceBusListener&quot;)\r\n    public void serviceBusListener(\r\n        @ServiceBusTopicTrigger(\r\n            name = &quot;message&quot;,\r\n            topicName = &quot;mytopic&quot;, \r\n            subscriptionName = &quot;mysubscription&quot;, \r\n            connection = &quot;AzureWebJobsServiceBus&quot;) String message,\r\n        @CosmosDBInput(name = &quot;name&quot;,\r\n              databaseName = &quot;MyDatabase&quot;,\r\n              collectionName = &quot;MyCollection&quot;,\r\n              connectionStringSetting = &quot;CosmosDbConnectionString&quot;,\r\n              id = &quot;{message.id}&quot;) String item,\r\n\r\n        final ExecutionContext context) {\r\n            // do something with item\r\n        }\r\n```\r\nIs there a way to do this?\r\n\r\n[Edit] Forgot to mention that [C# supports doing this][1]. My guess is Azure just doesn&#39;t support it with Java, as there are similar things supported in C# but not Java, like getting a handle on a DocumentClient or CosmosClient via an input binding.\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/azure/azure-functions/functions-bindings-cosmosdb-v2-input?tabs=in-process%2Cfunctionsv2&amp;pivots=programming-language-csharp#queue-trigger-look-up-id-from-json-c","title":"Azure Functions in Java - using value from Service Bus trigger in Cosmos DB input binding","body":"<p>I have an Azure Function (in Java) that receives msgs via Service Bus, and I'd like to get a handle on a Cosmos DB record based on one of the properties in the incoming message, for example I receive a json message like so:\n{ &quot;id&quot;: &quot;foo&quot; }, and I want the Cosmos Input binding to give me the corresponding DB record.</p>\n<p>There are plenty of examples on how to do this with an http trigger, but I can't figure out how to use a Service Bus trigger. I've tried variants like this:</p>\n<pre><code>    @FunctionName(&quot;ServiceBusListener&quot;)\n    public void serviceBusListener(\n        @ServiceBusTopicTrigger(\n            name = &quot;message&quot;,\n            topicName = &quot;mytopic&quot;, \n            subscriptionName = &quot;mysubscription&quot;, \n            connection = &quot;AzureWebJobsServiceBus&quot;) String message,\n        @CosmosDBInput(name = &quot;name&quot;,\n              databaseName = &quot;MyDatabase&quot;,\n              collectionName = &quot;MyCollection&quot;,\n              connectionStringSetting = &quot;CosmosDbConnectionString&quot;,\n              id = &quot;{message.id}&quot;) String item,\n\n        final ExecutionContext context) {\n            // do something with item\n        }\n</code></pre>\n<p>Is there a way to do this?</p>\n<p>[Edit] Forgot to mention that <a href=\"https://learn.microsoft.com/en-us/azure/azure-functions/functions-bindings-cosmosdb-v2-input?tabs=in-process%2Cfunctionsv2&amp;pivots=programming-language-csharp#queue-trigger-look-up-id-from-json-c\" rel=\"nofollow noreferrer\">C# supports doing this</a>. My guess is Azure just doesn't support it with Java, as there are similar things supported in C# but not Java, like getting a handle on a DocumentClient or CosmosClient via an input binding.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":14982647,"reputation":46,"user_id":11378735,"display_name":"JRF"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665673001,"creation_date":1665673001,"answer_id":74057908,"question_id":74057841,"body_markdown":"You&#39;re missing an import for class `User` so java cannot find it during compilation.\r\n\r\n```\r\n    import java.sql.Connection;\r\n    import java.sql.DriverManager;\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.SQLException;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    // Missing import for class User\r\n```\r\nThat&#39;s why you get:\r\n```\r\n  Caused by: java.lang.RuntimeException: Uncompilable code - cannot find symbol\r\n  symbol:   class User\r\n  location: class insertmulti.InsertMulti\r\n```\r\n\r\n","title":"cannot find symbol &quot;public void insertUsers(List &lt; User &gt; list) {&quot; Java19","body":"<p>You're missing an import for class <code>User</code> so java cannot find it during compilation.</p>\n<pre><code>    import java.sql.Connection;\n    import java.sql.DriverManager;\n    import java.sql.PreparedStatement;\n    import java.sql.SQLException;\n    import java.util.Arrays;\n    import java.util.List;\n    // Missing import for class User\n</code></pre>\n<p>That's why you get:</p>\n<pre><code>  Caused by: java.lang.RuntimeException: Uncompilable code - cannot find symbol\n  symbol:   class User\n  location: class insertmulti.InsertMulti\n</code></pre>\n"}],"owner":{"account_id":26612559,"reputation":1,"user_id":20232536,"display_name":"ACM1982"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1665673572,"answer_count":1,"score":0,"last_activity_date":1665673566,"creation_date":1665672736,"question_id":74057841,"body_markdown":"Please could you tell me why I get an error?\r\n\r\n    debug:\r\n    Exception in thread &quot;main&quot; java.lang.ExceptionInInitializerError\r\n    Caused by: java.lang.RuntimeException: Uncompilable code - cannot find symbol\r\n      symbol:   class User\r\n      location: class insertmulti.InsertMulti\r\n    \tat insertmulti.InsertMulti.&lt;clinit&gt;(InsertMulti.java:1)\r\n    C:\\Users\\alex\\AppData\\Local\\NetBeans\\Cache\\15\\executor-snippets\\debug.xml:150: The following error occurred while executing this line:\r\n    C:\\Users\\alex\\AppData\\Local\\NetBeans\\Cache\\15\\executor-snippets\\debug.xml:129: The following error occurred while executing this line:\r\n    C:\\Users\\alex\\AppData\\Local\\NetBeans\\Cache\\15\\executor-snippets\\debug.xml:77: Java returned: 1\r\n    BUILD FAILED (total time: 19 seconds)\r\n\r\nThe lists are something complicated for me but as far as I can see it is declared, initialized and has the libraries, this is the code.\r\n\r\n    /*\r\n     * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license\r\n     * Click nbfs://nbhost/SystemFileSystem/Templates/Classes/Main.java to edit this template\r\n     */\r\n    package insertmulti;\r\n    \r\n    /**\r\n     *\r\n     * @author pruebas\r\n     */\r\n    import java.sql.Connection;\r\n    import java.sql.DriverManager;\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.SQLException;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    \r\n    public class InsertMulti {\r\n    \r\n        private final String url = &quot;jdbc:postgresql://localhost/mydb&quot;;\r\n        private final String user = &quot;myusr&quot;;\r\n        private final String password = &quot;password&quot;;\r\n    \r\n        private static final String INSERT_USERS_SQL = &quot;INSERT INTO users&quot; +\r\n            &quot;  (id, name, email, country, password) VALUES &quot; +\r\n            &quot; (?, ?, ?, ?, ?);&quot;;\r\n    \r\n        /**\r\n         * insert multiple users\r\n         */\r\n        public void insertUsers(List &lt; User &gt; list) {\r\n            try (\r\n                Connection conn = DriverManager.getConnection(url, user, password); PreparedStatement statement = conn.prepareStatement(INSERT_USERS_SQL);) {\r\n                int count = 0;\r\n    \r\n                for (User user: list) {\r\n                    statement.setInt(1, user.getId());\r\n                    statement.setString(2, user.getName());\r\n                    statement.setString(3, user.getEmail());\r\n                    statement.setString(4, user.getCountry());\r\n                    statement.setString(5, user.getPassword());\r\n    \r\n                    statement.addBatch();\r\n                    count++;\r\n                    // execute every 100 rows or less\r\n                    if (count % 100 == 0 || count == list.size()) {\r\n                        statement.executeBatch();\r\n                    }\r\n                }\r\n            } catch (SQLException ex) {\r\n                System.out.println(ex.getMessage());\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            InsertMulti example = new InsertMulti();\r\n            example.insertUsers(Arrays.asList(new User(2, &quot;Ramesh&quot;, &quot;ramesh@gmail.com&quot;, &quot;India&quot;, &quot;password123&quot;),\r\n                new User(3, &quot;John&quot;, &quot;john@gmail.com&quot;, &quot;US&quot;, &quot;password123&quot;)));\r\n        }\r\n        \r\n    }\r\n\r\nThe example is from this [page][1]:\r\n\r\nI am using Windows 10 64-bits, Java 19, PostgreSQL 14, Apache NetBeans 15.\r\n\r\n\r\n\r\n\r\n  [1]: https://www.javaguides.net/2020/02/java-jdbc-postgresql-insert-example.html","title":"cannot find symbol &quot;public void insertUsers(List &lt; User &gt; list) {&quot; Java19","body":"<p>Please could you tell me why I get an error?</p>\n<pre><code>debug:\nException in thread &quot;main&quot; java.lang.ExceptionInInitializerError\nCaused by: java.lang.RuntimeException: Uncompilable code - cannot find symbol\n  symbol:   class User\n  location: class insertmulti.InsertMulti\n    at insertmulti.InsertMulti.&lt;clinit&gt;(InsertMulti.java:1)\nC:\\Users\\alex\\AppData\\Local\\NetBeans\\Cache\\15\\executor-snippets\\debug.xml:150: The following error occurred while executing this line:\nC:\\Users\\alex\\AppData\\Local\\NetBeans\\Cache\\15\\executor-snippets\\debug.xml:129: The following error occurred while executing this line:\nC:\\Users\\alex\\AppData\\Local\\NetBeans\\Cache\\15\\executor-snippets\\debug.xml:77: Java returned: 1\nBUILD FAILED (total time: 19 seconds)\n</code></pre>\n<p>The lists are something complicated for me but as far as I can see it is declared, initialized and has the libraries, this is the code.</p>\n<pre><code>/*\n * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license\n * Click nbfs://nbhost/SystemFileSystem/Templates/Classes/Main.java to edit this template\n */\npackage insertmulti;\n\n/**\n *\n * @author pruebas\n */\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.PreparedStatement;\nimport java.sql.SQLException;\nimport java.util.Arrays;\nimport java.util.List;\n\npublic class InsertMulti {\n\n    private final String url = &quot;jdbc:postgresql://localhost/mydb&quot;;\n    private final String user = &quot;myusr&quot;;\n    private final String password = &quot;password&quot;;\n\n    private static final String INSERT_USERS_SQL = &quot;INSERT INTO users&quot; +\n        &quot;  (id, name, email, country, password) VALUES &quot; +\n        &quot; (?, ?, ?, ?, ?);&quot;;\n\n    /**\n     * insert multiple users\n     */\n    public void insertUsers(List &lt; User &gt; list) {\n        try (\n            Connection conn = DriverManager.getConnection(url, user, password); PreparedStatement statement = conn.prepareStatement(INSERT_USERS_SQL);) {\n            int count = 0;\n\n            for (User user: list) {\n                statement.setInt(1, user.getId());\n                statement.setString(2, user.getName());\n                statement.setString(3, user.getEmail());\n                statement.setString(4, user.getCountry());\n                statement.setString(5, user.getPassword());\n\n                statement.addBatch();\n                count++;\n                // execute every 100 rows or less\n                if (count % 100 == 0 || count == list.size()) {\n                    statement.executeBatch();\n                }\n            }\n        } catch (SQLException ex) {\n            System.out.println(ex.getMessage());\n        }\n    }\n\n    public static void main(String[] args) {\n        InsertMulti example = new InsertMulti();\n        example.insertUsers(Arrays.asList(new User(2, &quot;Ramesh&quot;, &quot;ramesh@gmail.com&quot;, &quot;India&quot;, &quot;password123&quot;),\n            new User(3, &quot;John&quot;, &quot;john@gmail.com&quot;, &quot;US&quot;, &quot;password123&quot;)));\n    }\n    \n}\n</code></pre>\n<p>The example is from this <a href=\"https://www.javaguides.net/2020/02/java-jdbc-postgresql-insert-example.html\" rel=\"nofollow noreferrer\">page</a>:</p>\n<p>I am using Windows 10 64-bits, Java 19, PostgreSQL 14, Apache NetBeans 15.</p>\n"},{"tags":["java","ldap","ssl-certificate","trust"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1599817079,"post_id":63827473,"comment_id":112898063,"body_markdown":"If your company wants SSL presumably they want it to be secure, and what you&#39;re asking for would destroy that. If the LDAP server has a CA-signed certificate you don&#39;t have a problem to solve, and if you do have a problem to solve the CA-signed certificate is the solution.","body":"If your company wants SSL presumably they want it to be secure, and what you&#39;re asking for would destroy that. If the LDAP server has a CA-signed certificate you don&#39;t have a problem to solve, and if you do have a problem to solve the CA-signed certificate is the solution."},{"owner":{"account_id":5424161,"reputation":415,"user_id":4316983,"display_name":"Diego"},"score":0,"creation_date":1643741927,"post_id":63827473,"comment_id":125419152,"body_markdown":"It is a duplicated question.\nPlease see: https://stackoverflow.com/questions/60571012/sslsocketfactory-in-java-ldap-network-connection","body":"It is a duplicated question. Please see: <a href=\"https://stackoverflow.com/questions/60571012/sslsocketfactory-in-java-ldap-network-connection\" title=\"sslsocketfactory in java ldap network connection\">stackoverflow.com/questions/60571012/&hellip;</a>"},{"owner":{"account_id":4420950,"reputation":383,"user_id":3600935,"accept_rate":90,"display_name":"MrSalesi"},"score":0,"creation_date":1681552058,"post_id":63827473,"comment_id":134077180,"body_markdown":"This cuase another javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure\n\tat sun.security.ssl.Alerts.getSSLException(Alerts.java:192)\n\ncan any one solve it ?","body":"This cuase another javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure \tat sun.security.ssl.Alerts.getSSLException(Alerts.java:192)  can any one solve it ?"}],"answers":[{"tags":[],"owner":{"account_id":31959,"reputation":10608,"user_id":88122,"accept_rate":0,"display_name":"jwilleke"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1599810831,"creation_date":1599810831,"answer_id":63842955,"question_id":63827473,"body_markdown":"You can create a custom X509TrustManager or SSLSocketFactory.\r\n\r\nFound examples of both at https://stackoverflow.com/a/4615497/88122","title":"is there a way to connect with ldaps and ignore certificates in java?","body":"<p>You can create a custom X509TrustManager or SSLSocketFactory.</p>\n<p>Found examples of both at <a href=\"https://stackoverflow.com/a/4615497/88122\">https://stackoverflow.com/a/4615497/88122</a></p>\n"},{"tags":[],"owner":{"account_id":6865350,"reputation":1548,"user_id":5580181,"accept_rate":58,"display_name":"Daniele Licitra"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665673193,"creation_date":1599923070,"answer_id":63861719,"question_id":63827473,"body_markdown":"I don&#39;t know your environment, but can you add the CA certificate that has released the LDAP certificate to your system&#39;s trusted CAs?\r\n\r\nIn this way, you enhance the app security, otherwise is almost useless to use LDAPs.\r\n\r\nI suppose that the Domain Controller has a *CA server* installed and the LDAP&#39;s certificate is released by it. Download this certificate and add it to you environment.\r\n\r\nIf the app is installed on domain&#39;s computers, you can share the CA certificate throw a group policy rule. You can see [the Microsoft documentation][1]. Each certificate in a domain must be released by a trusted CA.\r\n\r\n\r\nIf you can&#39;t accept this certificate use the option 2 from this [answer][2].\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/windows-server/identity/ad-fs/deployment/distribute-certificates-to-client-computers-by-using-group-policy\r\n  [2]: https://stackoverflow.com/a/2893932","title":"is there a way to connect with ldaps and ignore certificates in java?","body":"<p>I don't know your environment, but can you add the CA certificate that has released the LDAP certificate to your system's trusted CAs?</p>\n<p>In this way, you enhance the app security, otherwise is almost useless to use LDAPs.</p>\n<p>I suppose that the Domain Controller has a <em>CA server</em> installed and the LDAP's certificate is released by it. Download this certificate and add it to you environment.</p>\n<p>If the app is installed on domain's computers, you can share the CA certificate throw a group policy rule. You can see <a href=\"https://learn.microsoft.com/en-us/windows-server/identity/ad-fs/deployment/distribute-certificates-to-client-computers-by-using-group-policy\" rel=\"nofollow noreferrer\">the Microsoft documentation</a>. Each certificate in a domain must be released by a trusted CA.</p>\n<p>If you can't accept this certificate use the option 2 from this <a href=\"https://stackoverflow.com/a/2893932\">answer</a>.</p>\n"},{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1599983055,"post_id":63867842,"comment_id":112940076,"body_markdown":"Well you only need to import the topmost certificate in the chain, not the whole chain.","body":"Well you only need to import the topmost certificate in the chain, not the whole chain."},{"owner":{"account_id":31959,"reputation":10608,"user_id":88122,"accept_rate":0,"display_name":"jwilleke"},"score":2,"creation_date":1659691295,"post_id":63867842,"comment_id":129359431,"body_markdown":"Funny thing that this is the most accepted answer when the poster wanted to &quot;ignore certificates in java?&quot; which this does not do.","body":"Funny thing that this is the most accepted answer when the poster wanted to &quot;ignore certificates in java?&quot; which this does not do."}],"tags":[],"owner":{"account_id":19501241,"reputation":49,"user_id":14267275,"display_name":"Carlos Bernabel Espinoza"},"comment_count":2,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1599978531,"creation_date":1599978531,"answer_id":63867842,"question_id":63827473,"body_markdown":"\r\nYou must import the &quot;LDAP-CA certificate&quot; into your Java virtual machine.&lt;br&gt;\r\nTo do this, you can run:&lt;br&gt;\r\n&lt;b&gt;keytool -import -trustcacerts -keystore $JAVA_HOME/jre/lib/security/cacerts -storepass changeit -alias ldap-CA -import -file ldap-ca-crt.pem&lt;/b&gt;\r\n\r\nIf your certificate is good. All your clients (web browsers or mobile SO) will have no problem using your application.\r\n\r\nDon&#39;t forget to import your intermediate certificates or chained certificates.(these certificates usually come together with LDAP-CA certificate)\r\n&lt;/pre&gt;\r\n","title":"is there a way to connect with ldaps and ignore certificates in java?","body":"<p>You must import the &quot;LDAP-CA certificate&quot; into your Java virtual machine.<br>\nTo do this, you can run:<br>\n<b>keytool -import -trustcacerts -keystore $JAVA_HOME/jre/lib/security/cacerts -storepass changeit -alias ldap-CA -import -file ldap-ca-crt.pem</b></p>\n<p>If your certificate is good. All your clients (web browsers or mobile SO) will have no problem using your application.</p>\n<p>Don't forget to import your intermediate certificates or chained certificates.(these certificates usually come together with LDAP-CA certificate)\n</p>\n"},{"tags":[],"owner":{"account_id":16545779,"reputation":11,"user_id":11955320,"display_name":"Rosario Di Stabile"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600083110,"creation_date":1600083110,"answer_id":63883421,"question_id":63827473,"body_markdown":"thanks all for your response. I decided to create X509TrustManager and SSLSocketFactory, and so allow all certificates. I solved my issue in this way","title":"is there a way to connect with ldaps and ignore certificates in java?","body":"<p>thanks all for your response. I decided to create X509TrustManager and SSLSocketFactory, and so allow all certificates. I solved my issue in this way</p>\n"}],"owner":{"account_id":16545779,"reputation":11,"user_id":11955320,"display_name":"Rosario Di Stabile"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7420,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":4,"score":0,"last_activity_date":1665673193,"creation_date":1599732756,"question_id":63827473,"body_markdown":"I have an application java on tomcat with ldap and I can authenticate without problem. Now, my company would to insert ssl layer on ldap, so I need to use ldaps. Any suggestion to ignore certificate and trust certificate from ldaps server? \r\n\r\nThis is my code that works for ldap\r\n\r\n\r\n\t\r\n\t\r\n\tfinal String ldapAdServer = &quot;ldap://my_ldap_url:3268&quot;;\r\n\tfinal String ldapSearchBase = &quot;Ldap_search_base&quot;;\r\n\t\r\n\t//need a default user to be able to do query on AD\r\n\tfinal String ldapUsername = &quot;username_path_AD&quot;;\r\n\tfinal String ldapPassword = &quot;password_path_AD&quot;;\r\n\t\r\n\t\r\n\tHashtable&lt;String, Object&gt; env = new Hashtable&lt;String, Object&gt;();\r\n\tenv.put(Context.SECURITY_AUTHENTICATION, &quot;simple&quot;);\r\n\tif(ldapUsername != null) {\r\n\t\tenv.put(Context.SECURITY_PRINCIPAL, ldapUsername);\r\n\t}\r\n\tif(ldapPassword != null) {\r\n\t\tenv.put(Context.SECURITY_CREDENTIALS, ldapPassword);\r\n\t}\r\n\tenv.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\r\n\tenv.put(Context.PROVIDER_URL, ldapAdServer);\r\n\r\n\t//ensures that objectSID attribute values\r\n\t//will be returned as a byte[] instead of a String\r\n\tenv.put(&quot;java.naming.ldap.attributes.binary&quot;, &quot;objectSID&quot;);\r\n\t\r\n\tLdapContext ctx = new InitialLdapContext(env,null);\r\n\t\r\n\treturn ctx;\r\n\r\n\r\nnow, I tried to create this class to trust all certificates :\r\n\r\n\r\n    \r\n    \r\n    import java.security.KeyManagementException;\r\n    import java.security.NoSuchAlgorithmException;\r\n    import java.security.cert.CertificateException;\r\n    import java.security.cert.X509Certificate;\r\n    import javax.net.ssl.HostnameVerifier;\r\n    import javax.net.ssl.HttpsURLConnection;\r\n    import javax.net.ssl.SSLContext;\r\n    import javax.net.ssl.SSLSession;\r\n    import javax.net.ssl.TrustManager;\r\n    import javax.net.ssl.X509TrustManager;\r\n    \r\n    \r\n    public class SSLFix {\r\n     \r\n     public static void execute(){\r\n      TrustManager[] trustAllCerts = new TrustManager[] {\r\n            new X509TrustManager() {\r\n              public java.security.cert.X509Certificate[] getAcceptedIssuers() {\r\n               return null;\r\n              }\r\n              @Override\r\n              public void checkClientTrusted(X509Certificate[] arg0, String arg1)\r\n               throws CertificateException {}\r\n     \r\n              @Override\r\n              public void checkServerTrusted(X509Certificate[] arg0, String arg1)\r\n                throws CertificateException {}\r\n    \r\n              }\r\n         };\r\n    \r\n      SSLContext sc=null;\r\n      try {\r\n       sc = SSLContext.getInstance(&quot;SSL&quot;);\r\n      } catch (NoSuchAlgorithmException e) {\r\n       e.printStackTrace();\r\n      }\r\n      try {\r\n       sc.init(null, trustAllCerts, new java.security.SecureRandom());\r\n      } catch (KeyManagementException e) {\r\n       e.printStackTrace();\r\n      }\r\n      HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\r\n    \r\n      // Create all-trusting host name verifier\r\n      HostnameVerifier validHosts = new HostnameVerifier() {\r\n      @Override\r\n      public boolean verify(String arg0, SSLSession arg1) {\r\n       return true;\r\n      }\r\n      };\r\n      // All hosts will be valid\r\n      HttpsURLConnection.setDefaultHostnameVerifier(validHosts);\r\n     }\r\n    \r\n    }\r\n\r\n\r\nand so I decided to change my previous ldap code with this:\r\n\r\n    public LdapContext getLDAPContext() throws NamingException\r\n    {\r\n    \tSSLFix.execute();\r\n    \t\r\n    \t\r\n    \tfinal String ldapAdServer = &quot;ldaps://my_ldap_url:3269&quot;;\r\n    \tfinal String ldapSearchBase = &quot;ldap_search_base&quot;;\r\n    \t\r\n\t//need a default user to be able to do query on AD\r\n    \tfinal String ldapUsername = &quot;username_path_AD&quot;;\r\n    \tfinal String ldapPassword = &quot;password_path_AD&quot;;\r\n    \t\r\n    \t\r\n    \tHashtable&lt;String, Object&gt; env = new Hashtable&lt;String, Object&gt;();\r\n    \tenv.put(Context.SECURITY_AUTHENTICATION, &quot;simple&quot;);\r\n    \tif(ldapUsername != null) {\r\n    \t\tenv.put(Context.SECURITY_PRINCIPAL, ldapUsername);\r\n    \t}\r\n    \tif(ldapPassword != null) {\r\n    \t\tenv.put(Context.SECURITY_CREDENTIALS, ldapPassword);\r\n    \t}\r\n    \tenv.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\r\n    \tenv.put(Context.PROVIDER_URL, ldapAdServer);\r\n    \r\n    \t//ensures that objectSID attribute values\r\n    \t//will be returned as a byte[] instead of a String\r\n    \tenv.put(&quot;java.naming.ldap.attributes.binary&quot;, &quot;objectSID&quot;);\r\n    \t\r\n    \tLdapContext ctx = new InitialLdapContext(env,null);\r\n    \t\r\n    \treturn ctx;\r\n    }\r\n\r\nbut when I execute the control for ldaps, I obtain this error:\r\n\r\njavax.naming.CommunicationException: simple bind failed:  [Root exception is javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target]","title":"is there a way to connect with ldaps and ignore certificates in java?","body":"<p>I have an application java on tomcat with ldap and I can authenticate without problem. Now, my company would to insert ssl layer on ldap, so I need to use ldaps. Any suggestion to ignore certificate and trust certificate from ldaps server?</p>\n<p>This is my code that works for ldap</p>\n<pre><code>final String ldapAdServer = &quot;ldap://my_ldap_url:3268&quot;;\nfinal String ldapSearchBase = &quot;Ldap_search_base&quot;;\n\n//need a default user to be able to do query on AD\nfinal String ldapUsername = &quot;username_path_AD&quot;;\nfinal String ldapPassword = &quot;password_path_AD&quot;;\n\n\nHashtable&lt;String, Object&gt; env = new Hashtable&lt;String, Object&gt;();\nenv.put(Context.SECURITY_AUTHENTICATION, &quot;simple&quot;);\nif(ldapUsername != null) {\n    env.put(Context.SECURITY_PRINCIPAL, ldapUsername);\n}\nif(ldapPassword != null) {\n    env.put(Context.SECURITY_CREDENTIALS, ldapPassword);\n}\nenv.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\nenv.put(Context.PROVIDER_URL, ldapAdServer);\n\n//ensures that objectSID attribute values\n//will be returned as a byte[] instead of a String\nenv.put(&quot;java.naming.ldap.attributes.binary&quot;, &quot;objectSID&quot;);\n\nLdapContext ctx = new InitialLdapContext(env,null);\n\nreturn ctx;\n</code></pre>\n<p>now, I tried to create this class to trust all certificates :</p>\n<pre><code>import java.security.KeyManagementException;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.cert.CertificateException;\nimport java.security.cert.X509Certificate;\nimport javax.net.ssl.HostnameVerifier;\nimport javax.net.ssl.HttpsURLConnection;\nimport javax.net.ssl.SSLContext;\nimport javax.net.ssl.SSLSession;\nimport javax.net.ssl.TrustManager;\nimport javax.net.ssl.X509TrustManager;\n\n\npublic class SSLFix {\n \n public static void execute(){\n  TrustManager[] trustAllCerts = new TrustManager[] {\n        new X509TrustManager() {\n          public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n           return null;\n          }\n          @Override\n          public void checkClientTrusted(X509Certificate[] arg0, String arg1)\n           throws CertificateException {}\n \n          @Override\n          public void checkServerTrusted(X509Certificate[] arg0, String arg1)\n            throws CertificateException {}\n\n          }\n     };\n\n  SSLContext sc=null;\n  try {\n   sc = SSLContext.getInstance(&quot;SSL&quot;);\n  } catch (NoSuchAlgorithmException e) {\n   e.printStackTrace();\n  }\n  try {\n   sc.init(null, trustAllCerts, new java.security.SecureRandom());\n  } catch (KeyManagementException e) {\n   e.printStackTrace();\n  }\n  HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\n\n  // Create all-trusting host name verifier\n  HostnameVerifier validHosts = new HostnameVerifier() {\n  @Override\n  public boolean verify(String arg0, SSLSession arg1) {\n   return true;\n  }\n  };\n  // All hosts will be valid\n  HttpsURLConnection.setDefaultHostnameVerifier(validHosts);\n }\n\n}\n</code></pre>\n<p>and so I decided to change my previous ldap code with this:</p>\n<pre><code>public LdapContext getLDAPContext() throws NamingException\n{\n    SSLFix.execute();\n    \n    \n    final String ldapAdServer = &quot;ldaps://my_ldap_url:3269&quot;;\n    final String ldapSearchBase = &quot;ldap_search_base&quot;;\n    \n//need a default user to be able to do query on AD\n    final String ldapUsername = &quot;username_path_AD&quot;;\n    final String ldapPassword = &quot;password_path_AD&quot;;\n    \n    \n    Hashtable&lt;String, Object&gt; env = new Hashtable&lt;String, Object&gt;();\n    env.put(Context.SECURITY_AUTHENTICATION, &quot;simple&quot;);\n    if(ldapUsername != null) {\n        env.put(Context.SECURITY_PRINCIPAL, ldapUsername);\n    }\n    if(ldapPassword != null) {\n        env.put(Context.SECURITY_CREDENTIALS, ldapPassword);\n    }\n    env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\n    env.put(Context.PROVIDER_URL, ldapAdServer);\n\n    //ensures that objectSID attribute values\n    //will be returned as a byte[] instead of a String\n    env.put(&quot;java.naming.ldap.attributes.binary&quot;, &quot;objectSID&quot;);\n    \n    LdapContext ctx = new InitialLdapContext(env,null);\n    \n    return ctx;\n}\n</code></pre>\n<p>but when I execute the control for ldaps, I obtain this error:</p>\n<p>javax.naming.CommunicationException: simple bind failed:  [Root exception is javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target]</p>\n"},{"tags":["java","selenium-webdriver","apache-poi","testng","testng-dataprovider"],"answers":[{"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":0,"creation_date":1665690108,"post_id":74057915,"comment_id":130764213,"body_markdown":"You should probably check that both the Row and Cell are defined and not null - [Sheet.getRow](https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/Sheet.html#getRow-int-) returns null if there&#39;s no row in the file","body":"You should probably check that both the Row and Cell are defined and not null - <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/Sheet.html#getRow-int-\" rel=\"nofollow noreferrer\">Sheet.getRow</a> returns null if there&#39;s no row in the file"}],"tags":[],"owner":{"account_id":26315879,"reputation":36,"user_id":19978672,"display_name":"GabrielFethi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665673017,"creation_date":1665673017,"answer_id":74057915,"question_id":74042414,"body_markdown":"Your for loop starts at i=1, which is correct since we don&#39;t want to include the headers; but ends at 4 since it is &lt; 5. And when i=5 it gets out of the for loop and you never get the data for row 5.\r\n\r\nFollowing should fix your problem:\r\n\r\n```\r\nfor (int i = 1; i &lt;= rows; i++) {\r\n\r\n        for (int j = 0; j &lt; cells; j++) {\r\n          String value = wSheet.getRow(i).getCell(j).getStringCellValue();\r\n          System.out.println(value);\r\n          data[i - 1][j] = value;\r\n        }\r\n      }\r\n\r\n```\r\n\r\nAlso, as a side tip. Sometimes I had similar issue because of the mere fact that I had entered and deleted some info in excel. Deleting the row fully has fixed my problem. Seems like if you only delete the content of the cell doesn&#39;t help.\r\n","title":"null values assigning while reading the data from excel","body":"<p>Your for loop starts at i=1, which is correct since we don't want to include the headers; but ends at 4 since it is &lt; 5. And when i=5 it gets out of the for loop and you never get the data for row 5.</p>\n<p>Following should fix your problem:</p>\n<pre><code>for (int i = 1; i &lt;= rows; i++) {\n\n        for (int j = 0; j &lt; cells; j++) {\n          String value = wSheet.getRow(i).getCell(j).getStringCellValue();\n          System.out.println(value);\n          data[i - 1][j] = value;\n        }\n      }\n\n</code></pre>\n<p>Also, as a side tip. Sometimes I had similar issue because of the mere fact that I had entered and deleted some info in excel. Deleting the row fully has fixed my problem. Seems like if you only delete the content of the cell doesn't help.</p>\n"}],"owner":{"account_id":26600661,"reputation":1,"user_id":20222350,"display_name":"Manoj Gumma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665673017,"creation_date":1665580301,"question_id":74042414,"body_markdown":"1)in excel sheet we give 4rows (with header5) am able to execute but 4th row is taking as null\r\n\r\n2)if am giving only 1 row (with header2) am getting error as testOnboardProvider (null, null, null, null, null, null), java.lang.IllegalArgumentException: Keys to send should be a not null CharSequence\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    public class OnboardProvider extends ProjectSpecificMethods {\r\n      @Test(dataProvider = &quot;sendData&quot;)\r\n      public void testOnboardProvider(String ProviderName, String Email, String contactperson, String phno, String address, String pincode) throws InterruptedException {\r\n    \r\n        new LoginPage()\r\n          .enterUsername(&quot;manojgumma221@gmail.com&quot;)\r\n          .enterPassword(&quot;9491233055&quot;)\r\n          .clickLogin()\r\n          .clickUserManagement()\r\n          .clickProviderUser()\r\n          .clickOnAddNewProvider()\r\n          .enterName(ProviderName)\r\n          .enterEmail(Email)\r\n          .enterContactPerson(contactperson)\r\n          .enterContactNumber(phno)\r\n          .enterAddress(address)\r\n          .selectCountry()\r\n          .selectState()\r\n          .SelectCity()\r\n          .enterZipCode(pincode)\r\n          .clickOnboard()\r\n          .verifyProverName();\r\n    \r\n        Thread.sleep(5000);\r\n    \r\n      }\r\n    \r\n      public class ReadExcel {\r\n    \r\n        public String[][] readExcel() throws IOException {\r\n          XSSFWorkbook wBWorkbook = new XSSFWorkbook(&quot;./Data/auto.xlsx&quot;);\r\n          XSSFSheet wSheet = wBWorkbook.getSheet(&quot;Sheet1&quot;);\r\n          int rows = wSheet.getLastRowNum();\r\n          System.out.println(&quot;No of rows&quot; + rows + &quot;are:&quot;);\r\n          int cells = wSheet.getRow(rows).getLastCellNum();\r\n          System.out.println(cells);\r\n          String[][] data = new String[rows][cells];\r\n          for (int i = 1; i &lt; rows; i++) {\r\n    \r\n            for (int j = 0; j &lt; cells; j++) {\r\n              String value = wSheet.getRow(i).getCell(j).getStringCellValue();\r\n              System.out.println(value);\r\n              data[i - 1][j] = value;\r\n            }\r\n          }\r\n          wBWorkbook.close();\r\n          return data;\r\n    \r\n        }\r\n    \r\n      }\r\n\r\n\r\n","title":"null values assigning while reading the data from excel","body":"<p>1)in excel sheet we give 4rows (with header5) am able to execute but 4th row is taking as null</p>\n<p>2)if am giving only 1 row (with header2) am getting error as testOnboardProvider (null, null, null, null, null, null), java.lang.IllegalArgumentException: Keys to send should be a not null CharSequence</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class OnboardProvider extends ProjectSpecificMethods {\n  @Test(dataProvider = &quot;sendData&quot;)\n  public void testOnboardProvider(String ProviderName, String Email, String contactperson, String phno, String address, String pincode) throws InterruptedException {\n\n    new LoginPage()\n      .enterUsername(&quot;manojgumma221@gmail.com&quot;)\n      .enterPassword(&quot;9491233055&quot;)\n      .clickLogin()\n      .clickUserManagement()\n      .clickProviderUser()\n      .clickOnAddNewProvider()\n      .enterName(ProviderName)\n      .enterEmail(Email)\n      .enterContactPerson(contactperson)\n      .enterContactNumber(phno)\n      .enterAddress(address)\n      .selectCountry()\n      .selectState()\n      .SelectCity()\n      .enterZipCode(pincode)\n      .clickOnboard()\n      .verifyProverName();\n\n    Thread.sleep(5000);\n\n  }\n\n  public class ReadExcel {\n\n    public String[][] readExcel() throws IOException {\n      XSSFWorkbook wBWorkbook = new XSSFWorkbook(&quot;./Data/auto.xlsx&quot;);\n      XSSFSheet wSheet = wBWorkbook.getSheet(&quot;Sheet1&quot;);\n      int rows = wSheet.getLastRowNum();\n      System.out.println(&quot;No of rows&quot; + rows + &quot;are:&quot;);\n      int cells = wSheet.getRow(rows).getLastCellNum();\n      System.out.println(cells);\n      String[][] data = new String[rows][cells];\n      for (int i = 1; i &lt; rows; i++) {\n\n        for (int j = 0; j &lt; cells; j++) {\n          String value = wSheet.getRow(i).getCell(j).getStringCellValue();\n          System.out.println(value);\n          data[i - 1][j] = value;\n        }\n      }\n      wBWorkbook.close();\n      return data;\n\n    }\n\n  }\n</code></pre>\n"},{"tags":["java","elasticsearch","elasticsearch-5","elasticsearch-painless"],"comments":[{"owner":{"account_id":4726205,"reputation":12248,"user_id":4420967,"display_name":"James Z"},"score":0,"creation_date":1665673046,"post_id":74053637,"comment_id":130758817,"body_markdown":"Please avoid using words like *lakh* that are not globally understood","body":"Please avoid using words like <i>lakh</i> that are not globally understood"},{"owner":{"account_id":16289004,"reputation":11,"user_id":11762946,"display_name":"JavaAnswer"},"score":0,"creation_date":1665989346,"post_id":74053637,"comment_id":130819511,"body_markdown":"sure , can you please help me with any solution","body":"sure , can you please help me with any solution"}],"owner":{"account_id":16289004,"reputation":11,"user_id":11762946,"display_name":"JavaAnswer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":327,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665673011,"creation_date":1665654138,"question_id":74053637,"body_markdown":"I have over 25 million documents in Elasticsearch (version - 7.6.2),  those are having duplicates among them. So I have written  a script in painless to delete one instance of duplicated document. I have tried running the script on test index (having approx 50k records) for that it works fine,  but when tested on the main index which is having 25 millions of documents data it usually only process 300k documents and then it stops.\r\n\r\nScript/query is running in background using wait for completion also timeout has been mentioned as in days . Also there is cron running which is cleaning/freeing up RAM every 5 minutes and the server space which is FREE is approx 120 GB (which I thought of to be sufficient as the script is not writing anything it is deleting the records).\r\n\r\nQuery looks like \r\n\r\n    POST testing_index/_update_by_query?wait_for_completion=false &amp;&amp; timeout=4d\r\n    {\r\n       &quot;script&quot;: {\r\n        &quot;source&quot;: &quot;&quot;&quot;      \r\n          String replace(String word) {\r\n          \r\n            def prefixUrl = &#39;file://abc.directory.intra/homes/test&#39;;\r\n            \r\n            if(word.contains(&#39;xyz&#39;)) {\r\n              prefixUrl = &#39;file://xyz.directory.intra/homes/test&#39;;\r\n            }\r\n            \r\n            String[] pieces = word.splitOnToken(prefixUrl);\r\n            int lastElIndex = pieces.length - 2;\r\n            pieces[lastElIndex] = &#39;&#39;;\r\n            def list = Arrays.asList(pieces);\r\n            return String.join(&#39;&#39;,list);\r\n          }\r\n     \r\n         \r\n          def path = replace(ctx._source.d_path);\r\n          def matchResult = &#39;no&#39;;\r\n          \r\n          for(int i=0;i&lt;params.pathArray.length;i++) {\r\n            \r\n            if(params.pathArray[i] == path &amp;&amp; path!=&quot;&quot;) {\r\n              \r\n              matchResult = &#39;yes&#39;;\r\n              params.pathArray.remove(i);\r\n            }\r\n          }\r\n          \r\n          if(matchResult == &#39;yes&#39;) {\r\n            ctx.op = &#39;delete&#39;;\r\n            \r\n          } else {\r\n            ctx.op = &#39;noop&#39;;\r\n            params.pathArray.add(path);\r\n          }\r\n          \r\n        &quot;&quot;&quot;,\r\n        &quot;lang&quot;: &quot;painless&quot;,\r\n        &quot;params&quot;: {\r\n          &quot;pathArray&quot;: []\r\n        }\r\n      }\r\n    }\r\n      \r\n    {\r\n      &quot;completed&quot;: true, --why getting true in between\r\n      &quot;task&quot;: {\r\n        &quot;node&quot;: &quot;Jsecb8kBSdKLC47Q28O6Pg&quot;,\r\n        &quot;id&quot;: 5968304,\r\n        &quot;type&quot;: &quot;transport&quot;,\r\n        &quot;action&quot;: &quot;indices:data/write/update/byquery&quot;,\r\n        &quot;status&quot;: {\r\n          &quot;total&quot;: 24002005,\r\n          &quot;updated&quot;: 0,\r\n          &quot;created&quot;: 0,\r\n          &quot;deleted&quot;: 333567,\r\n          &quot;batches&quot;: 137,\r\n          &quot;version_conflicts&quot;: 0,\r\n          &quot;noops&quot;: 0,\r\n          &quot;retries&quot;: {\r\n            &quot;bulk&quot;: 0,\r\n            &quot;search&quot;: 0\r\n          },\r\n        \r\n        }\r\n        \r\n    \r\nAfter processing almost 300k documents it turns out in &quot;true&quot; (same behavior has been seen 2,3 times of testing) and then not able to get why it is not able to process whole documents. When with small number of records it worked well\r\n    ","title":"ElasticSearch painless :- _update_by_query fails to update all documents in ElasticSearch, getting true in between","body":"<p>I have over 25 million documents in Elasticsearch (version - 7.6.2),  those are having duplicates among them. So I have written  a script in painless to delete one instance of duplicated document. I have tried running the script on test index (having approx 50k records) for that it works fine,  but when tested on the main index which is having 25 millions of documents data it usually only process 300k documents and then it stops.</p>\n<p>Script/query is running in background using wait for completion also timeout has been mentioned as in days . Also there is cron running which is cleaning/freeing up RAM every 5 minutes and the server space which is FREE is approx 120 GB (which I thought of to be sufficient as the script is not writing anything it is deleting the records).</p>\n<p>Query looks like</p>\n<pre><code>POST testing_index/_update_by_query?wait_for_completion=false &amp;&amp; timeout=4d\n{\n   &quot;script&quot;: {\n    &quot;source&quot;: &quot;&quot;&quot;      \n      String replace(String word) {\n      \n        def prefixUrl = 'file://abc.directory.intra/homes/test';\n        \n        if(word.contains('xyz')) {\n          prefixUrl = 'file://xyz.directory.intra/homes/test';\n        }\n        \n        String[] pieces = word.splitOnToken(prefixUrl);\n        int lastElIndex = pieces.length - 2;\n        pieces[lastElIndex] = '';\n        def list = Arrays.asList(pieces);\n        return String.join('',list);\n      }\n \n     \n      def path = replace(ctx._source.d_path);\n      def matchResult = 'no';\n      \n      for(int i=0;i&lt;params.pathArray.length;i++) {\n        \n        if(params.pathArray[i] == path &amp;&amp; path!=&quot;&quot;) {\n          \n          matchResult = 'yes';\n          params.pathArray.remove(i);\n        }\n      }\n      \n      if(matchResult == 'yes') {\n        ctx.op = 'delete';\n        \n      } else {\n        ctx.op = 'noop';\n        params.pathArray.add(path);\n      }\n      \n    &quot;&quot;&quot;,\n    &quot;lang&quot;: &quot;painless&quot;,\n    &quot;params&quot;: {\n      &quot;pathArray&quot;: []\n    }\n  }\n}\n  \n{\n  &quot;completed&quot;: true, --why getting true in between\n  &quot;task&quot;: {\n    &quot;node&quot;: &quot;Jsecb8kBSdKLC47Q28O6Pg&quot;,\n    &quot;id&quot;: 5968304,\n    &quot;type&quot;: &quot;transport&quot;,\n    &quot;action&quot;: &quot;indices:data/write/update/byquery&quot;,\n    &quot;status&quot;: {\n      &quot;total&quot;: 24002005,\n      &quot;updated&quot;: 0,\n      &quot;created&quot;: 0,\n      &quot;deleted&quot;: 333567,\n      &quot;batches&quot;: 137,\n      &quot;version_conflicts&quot;: 0,\n      &quot;noops&quot;: 0,\n      &quot;retries&quot;: {\n        &quot;bulk&quot;: 0,\n        &quot;search&quot;: 0\n      },\n    \n    }\n    \n</code></pre>\n<p>After processing almost 300k documents it turns out in &quot;true&quot; (same behavior has been seen 2,3 times of testing) and then not able to get why it is not able to process whole documents. When with small number of records it worked well</p>\n"},{"tags":["java","spring","spring-mvc","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":5573460,"reputation":2100,"user_id":4417818,"accept_rate":64,"display_name":"Nilesh"},"score":0,"creation_date":1516783446,"post_id":48417610,"comment_id":83825820,"body_markdown":"Thanks, Yannnic. I understood why my code wont work. Could you explain a way to inject prefixed properties automatically? This way I can externalize properties without requiring hard coding property names(`setProperty()`).","body":"Thanks, Yannnic. I understood why my code wont work. Could you explain a way to inject prefixed properties automatically? This way I can externalize properties without requiring hard coding property names(<code>setProperty()</code>)."},{"owner":{"account_id":3039084,"reputation":6351,"user_id":2576531,"accept_rate":88,"display_name":"Yannic B&#252;rgmann"},"score":0,"creation_date":1516784124,"post_id":48417610,"comment_id":83826234,"body_markdown":"The `@Value` annotation does what you want I think. This way you can inject properties to your bean. Have a look at this guide: http://www.baeldung.com/spring-value-annotation","body":"The <code>@Value</code> annotation does what you want I think. This way you can inject properties to your bean. Have a look at this guide: <a href=\"http://www.baeldung.com/spring-value-annotation\" rel=\"nofollow noreferrer\">baeldung.com/spring-value-annotation</a>"},{"owner":{"account_id":5573460,"reputation":2100,"user_id":4417818,"accept_rate":64,"display_name":"Nilesh"},"score":0,"creation_date":1516785864,"post_id":48417610,"comment_id":83827357,"body_markdown":"Yes, it does inject properties directly into fields. The KafkaProducer class is from third-party API and I want to pass properties to it as is(provided by application.properties) but prefixed with &quot;kafka&quot;, so that any new property can be added without adding new field to `MyKafkaProducerProperties`. Hence I am trying to find an answer to How to inject prefixed properties into java.util.Properties? `PropertySource`?","body":"Yes, it does inject properties directly into fields. The KafkaProducer class is from third-party API and I want to pass properties to it as is(provided by application.properties) but prefixed with &quot;kafka&quot;, so that any new property can be added without adding new field to <code>MyKafkaProducerProperties</code>. Hence I am trying to find an answer to How to inject prefixed properties into java.util.Properties? <code>PropertySource</code>?"},{"owner":{"account_id":3039084,"reputation":6351,"user_id":2576531,"accept_rate":88,"display_name":"Yannic B&#252;rgmann"},"score":0,"creation_date":1516786281,"post_id":48417610,"comment_id":83827659,"body_markdown":"Hm maybe you could use a HashMap as field in your configuration properties. I will update my answer. give me a sec","body":"Hm maybe you could use a HashMap as field in your configuration properties. I will update my answer. give me a sec"}],"tags":[],"owner":{"account_id":3039084,"reputation":6351,"user_id":2576531,"accept_rate":88,"display_name":"Yannic B&#252;rgmann"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1516786905,"creation_date":1516781481,"answer_id":48417610,"question_id":48417204,"body_markdown":"That does not work, since this property injection is based on getters and setters on the object that should hold the `@ConfigurationProperties`\r\nDefine a class holding the properties you want like this:\r\n\r\n    @ConfigurationProperties(prefix = &quot;kafka.producer&quot;)\r\n    public class MyKafkaProducerProperties {\r\n\r\n      private int foo;\r\n      \r\n      private string bar;\r\n\r\n      // Getters and Setter for foo and bar\r\n\r\n    }\r\n\r\nThen use it in your configuration like this\r\n\r\n    @Configuration\r\n    @EnableConfigurationProperties(MyKafkaProducerProperties.class)\r\n    public class FactoryBeanAppConfig {\r\n\r\n      @Bean\r\n      public Producer&lt;String, String&gt; producer(MyKafkaProducerProperties kafkaProperties) throws Exception {\r\n        Properties properties = new Properties();\r\n        properties.setProperty(&quot;Foo&quot;, kafkaProperties.getFoo());\r\n        properties.setProperty(&quot;Bar&quot;, kafkaProperties.getBar());\r\n        Producer&lt;String, String&gt; producer = new KafkaProducer&lt;String, String&gt;(properties);\r\n        return producer;\r\n      }\r\n    }\r\n\r\n**UPDATE**\r\n\r\nSince you commented that you don&#39;t want to have each property represented as java code you could use a `HashMap` as the one and only property in your `@ConfigurationProperties`\r\n\r\n    @ConfigurationProperties(prefix = &quot;kafka&quot;)\r\n    public class MyKafkaProducerProperties {\r\n\r\n      private Map&lt;String, String&gt; producer= new HashMap&lt;String, String&gt;();\r\n\r\n      public Map&lt;String, String&gt; getProducer() {\r\n        return this.producer;\r\n      }\r\n    }\r\n\r\nIn your `application.properties` you can specify the properties like this:\r\n\r\n    kafka.producer.foo=hello\r\n    kafka.producer.bar=world\r\n\r\nAnd in your configuration you can use it like this:\r\n\r\n    @Configuration\r\n    @EnableConfigurationProperties(MyKafkaProducerProperties.class)\r\n    public class FactoryBeanAppConfig {\r\n\r\n      @Bean\r\n      public Producer&lt;String, String&gt; producer(MyKafkaProducerProperties kafkaProperties) throws Exception {\r\n\r\n        Properties properties = new Properties();\r\n\r\n        for ( String key : kafkaProperties.getProducer().keySet() ) {\r\n         properties.setProperty(key, kafkaProperties.getProducer().get(key));\r\n        }\r\n\r\n        Producer&lt;String, String&gt; producer = new KafkaProducer&lt;String, String&gt;(properties);\r\n        return producer;\r\n      }\r\n    }","title":"How to inject prefixed properties into java.util.Properties?","body":"<p>That does not work, since this property injection is based on getters and setters on the object that should hold the <code>@ConfigurationProperties</code>\nDefine a class holding the properties you want like this:</p>\n\n<pre><code>@ConfigurationProperties(prefix = \"kafka.producer\")\npublic class MyKafkaProducerProperties {\n\n  private int foo;\n\n  private string bar;\n\n  // Getters and Setter for foo and bar\n\n}\n</code></pre>\n\n<p>Then use it in your configuration like this</p>\n\n<pre><code>@Configuration\n@EnableConfigurationProperties(MyKafkaProducerProperties.class)\npublic class FactoryBeanAppConfig {\n\n  @Bean\n  public Producer&lt;String, String&gt; producer(MyKafkaProducerProperties kafkaProperties) throws Exception {\n    Properties properties = new Properties();\n    properties.setProperty(\"Foo\", kafkaProperties.getFoo());\n    properties.setProperty(\"Bar\", kafkaProperties.getBar());\n    Producer&lt;String, String&gt; producer = new KafkaProducer&lt;String, String&gt;(properties);\n    return producer;\n  }\n}\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Since you commented that you don't want to have each property represented as java code you could use a <code>HashMap</code> as the one and only property in your <code>@ConfigurationProperties</code></p>\n\n<pre><code>@ConfigurationProperties(prefix = \"kafka\")\npublic class MyKafkaProducerProperties {\n\n  private Map&lt;String, String&gt; producer= new HashMap&lt;String, String&gt;();\n\n  public Map&lt;String, String&gt; getProducer() {\n    return this.producer;\n  }\n}\n</code></pre>\n\n<p>In your <code>application.properties</code> you can specify the properties like this:</p>\n\n<pre><code>kafka.producer.foo=hello\nkafka.producer.bar=world\n</code></pre>\n\n<p>And in your configuration you can use it like this:</p>\n\n<pre><code>@Configuration\n@EnableConfigurationProperties(MyKafkaProducerProperties.class)\npublic class FactoryBeanAppConfig {\n\n  @Bean\n  public Producer&lt;String, String&gt; producer(MyKafkaProducerProperties kafkaProperties) throws Exception {\n\n    Properties properties = new Properties();\n\n    for ( String key : kafkaProperties.getProducer().keySet() ) {\n     properties.setProperty(key, kafkaProperties.getProducer().get(key));\n    }\n\n    Producer&lt;String, String&gt; producer = new KafkaProducer&lt;String, String&gt;(properties);\n    return producer;\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":234378,"reputation":8776,"user_id":500478,"accept_rate":75,"display_name":"Bastien Jansen"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1601281216,"creation_date":1601281216,"answer_id":64098425,"question_id":48417204,"body_markdown":"You can define a new bean that is annotated with `@ConfigurationProperties`, like this:\r\n\r\n```java\r\n@Bean\r\n@ConfigurationProperties(prefix = &quot;kafka&quot;)\r\npublic Properties kafkaProperties() {\r\n    return new Properties();\r\n}\r\n\r\n@Bean\r\npublic Producer&lt;String, String&gt; producer() throws Exception {\r\n    return new KafkaProducer&lt;String, String&gt;(kafkaProperties());\r\n}\r\n```\r\n\r\n(taken from https://stackoverflow.com/a/50810923/500478)","title":"How to inject prefixed properties into java.util.Properties?","body":"<p>You can define a new bean that is annotated with <code>@ConfigurationProperties</code>, like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\n@ConfigurationProperties(prefix = &quot;kafka&quot;)\npublic Properties kafkaProperties() {\n    return new Properties();\n}\n\n@Bean\npublic Producer&lt;String, String&gt; producer() throws Exception {\n    return new KafkaProducer&lt;String, String&gt;(kafkaProperties());\n}\n</code></pre>\n<p>(taken from <a href=\"https://stackoverflow.com/a/50810923/500478\">https://stackoverflow.com/a/50810923/500478</a>)</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1666008151,"post_id":74057685,"comment_id":130825832,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/74057685/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":16817356,"reputation":1,"user_id":12158823,"display_name":"jkar"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665672070,"creation_date":1665672070,"answer_id":74057685,"question_id":48417204,"body_markdown":"@Autowired Environment environment;\r\nprivate Properties getProperties() { return  new Properties() { @Override public String getProperty(String name) { return environment.getProperty(name); } }; }","title":"How to inject prefixed properties into java.util.Properties?","body":"<p>@Autowired Environment environment;\nprivate Properties getProperties() { return  new Properties() { @Override public String getProperty(String name) { return environment.getProperty(name); } }; }</p>\n"}],"owner":{"account_id":5573460,"reputation":2100,"user_id":4417818,"accept_rate":64,"display_name":"Nilesh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1893,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":48417610,"answer_count":3,"score":0,"last_activity_date":1665672070,"creation_date":1516779746,"question_id":48417204,"body_markdown":"Spring boot provides an elegant way to inject the properties prefixed with a particular key into Configuration class using ` @ConfigurationProperties(prefix = &quot;foo&quot;)`. That is shown [here][1] and [here][2]. Question is, how to inject prefixed properties into `java.util.Properties` instance as shown below?\r\n\r\n    @Configuration\r\n    @EnableConfigurationProperties\r\n    public class FactoryBeanAppConfig {\r\n    \r\n    \t@Bean\r\n    \t@ConfigurationProperties(prefix = &quot;kafka&quot;)\r\n    \tpublic Producer&lt;String, String&gt; producer(Properties properties) throws Exception {\r\n    \t\tProducer&lt;String, String&gt; producer = new KafkaProducer&lt;String, String&gt;(properties);\r\n    \t\treturn producer;\r\n    \t}\r\n    \t\r\n    }\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-typesafe-configuration-properties\r\n  [2]: http://www.java2novice.com/spring-boot/configurationproperties-example/","title":"How to inject prefixed properties into java.util.Properties?","body":"<p>Spring boot provides an elegant way to inject the properties prefixed with a particular key into Configuration class using <code>@ConfigurationProperties(prefix = \"foo\")</code>. That is shown <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-typesafe-configuration-properties\" rel=\"nofollow noreferrer\">here</a> and <a href=\"http://www.java2novice.com/spring-boot/configurationproperties-example/\" rel=\"nofollow noreferrer\">here</a>. Question is, how to inject prefixed properties into <code>java.util.Properties</code> instance as shown below?</p>\n\n<pre><code>@Configuration\n@EnableConfigurationProperties\npublic class FactoryBeanAppConfig {\n\n    @Bean\n    @ConfigurationProperties(prefix = \"kafka\")\n    public Producer&lt;String, String&gt; producer(Properties properties) throws Exception {\n        Producer&lt;String, String&gt; producer = new KafkaProducer&lt;String, String&gt;(properties);\n        return producer;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","android","sockets"],"comments":[{"owner":{"account_id":6457339,"reputation":1080,"user_id":5002284,"display_name":"dly"},"score":1,"creation_date":1439190544,"post_id":31912939,"comment_id":51740170,"body_markdown":"if you want it to keep listening forever you could use a loop. `while (true) { ds.receive(dp); // more stuff  } `","body":"if you want it to keep listening forever you could use a loop. <code>while (true) { ds.receive(dp); &#47;&#47; more stuff  } </code>"},{"owner":{"account_id":6531534,"reputation":31,"user_id":5052534,"display_name":"Dinesh Anton Raja"},"score":0,"creation_date":1439190651,"post_id":31912939,"comment_id":51740214,"body_markdown":"Ok, thank you.. shall I use thread furthermore for this?","body":"Ok, thank you.. shall I use thread furthermore for this?"},{"owner":{"account_id":6457339,"reputation":1080,"user_id":5002284,"display_name":"dly"},"score":0,"creation_date":1439190902,"post_id":31912939,"comment_id":51740325,"body_markdown":"That depends on your program, but shouldn&#39;t hurt to keep the extra thread","body":"That depends on your program, but shouldn&#39;t hurt to keep the extra thread"},{"owner":{"account_id":6531534,"reputation":31,"user_id":5052534,"display_name":"Dinesh Anton Raja"},"score":0,"creation_date":1439288202,"post_id":31912939,"comment_id":51788223,"body_markdown":"@dly i am not getting the output....if i use while(true).. i have attached my code to below link  http://pdaraja.weebly.com/uploads/1/8/2/3/18237947/udpserver.txt","body":"@dly i am not getting the output....if i use while(true).. i have attached my code to below link  <a href=\"http://pdaraja.weebly.com/uploads/1/8/2/3/18237947/udpserver.txt\" rel=\"nofollow noreferrer\">pdaraja.weebly.com/uploads/1/8/2/3/18237947/udpserver.txt</a>"},{"owner":{"account_id":6457339,"reputation":1080,"user_id":5002284,"display_name":"dly"},"score":0,"creation_date":1439292621,"post_id":31912939,"comment_id":51791119,"body_markdown":"posted mine as answer now","body":"posted mine as answer now"},{"owner":{"account_id":6531534,"reputation":31,"user_id":5052534,"display_name":"Dinesh Anton Raja"},"score":0,"creation_date":1439298305,"post_id":31912939,"comment_id":51795099,"body_markdown":"whether i need to use message Handler to read the continuos data.","body":"whether i need to use message Handler to read the continuos data."},{"owner":{"account_id":6457339,"reputation":1080,"user_id":5002284,"display_name":"dly"},"score":0,"creation_date":1439299757,"post_id":31912939,"comment_id":51796206,"body_markdown":"Replace my `LogHandler.parse()` with your `lText = ..`, `Log.i()`and `data.setText()`. Edited answer.","body":"Replace my <code>LogHandler.parse()</code> with your <code>lText = ..</code>, <code>Log.i()</code>and <code>data.setText()</code>. Edited answer."},{"owner":{"account_id":6531534,"reputation":31,"user_id":5052534,"display_name":"Dinesh Anton Raja"},"score":0,"creation_date":1439352893,"post_id":31912939,"comment_id":51820614,"body_markdown":"@dly where i need to close the socket in the program?","body":"@dly where i need to close the socket in the program?"},{"owner":{"account_id":6531534,"reputation":31,"user_id":5052534,"display_name":"Dinesh Anton Raja"},"score":0,"creation_date":1439358609,"post_id":31912939,"comment_id":51822419,"body_markdown":"@dly i have attched code in the following link..nothing was happening please check out  http://pdaraja.weebly.com/uploads/1/8/2/3/18237947/new_tried.txt","body":"@dly i have attched code in the following link..nothing was happening please check out  <a href=\"http://pdaraja.weebly.com/uploads/1/8/2/3/18237947/new_tried.txt\" rel=\"nofollow noreferrer\">pdaraja.weebly.com/uploads/1/8/2/3/18237947/new_tried.txt</a>"},{"owner":{"account_id":6457339,"reputation":1080,"user_id":5002284,"display_name":"dly"},"score":0,"creation_date":1439400935,"post_id":31912939,"comment_id":51850687,"body_markdown":"try `System.out.println(lText)` at the end of the loop if there&#39;s any output","body":"try <code>System.out.println(lText)</code> at the end of the loop if there&#39;s any output"},{"owner":{"account_id":6531534,"reputation":31,"user_id":5052534,"display_name":"Dinesh Anton Raja"},"score":0,"creation_date":1439549258,"post_id":31912939,"comment_id":51918863,"body_markdown":"@dly i am not receiving continuously at udp receiver. hw is it possible if i am adding system.out.println(lText).","body":"@dly i am not receiving continuously at udp receiver. hw is it possible if i am adding system.out.println(lText)."},{"owner":{"account_id":6457339,"reputation":1080,"user_id":5002284,"display_name":"dly"},"score":0,"creation_date":1439550028,"post_id":31912939,"comment_id":51919286,"body_markdown":"Just to check what is actually coming in. There might be other issues, but can&#39;t tell with those limited information.","body":"Just to check what is actually coming in. There might be other issues, but can&#39;t tell with those limited information."}],"answers":[{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1439197500,"post_id":31913545,"comment_id":51744012,"body_markdown":"You&#39;re ignoring the length in the datagram.","body":"You&#39;re ignoring the length in the datagram."},{"owner":{"account_id":1693055,"reputation":1073,"user_id":1555068,"display_name":"jobcrazy"},"score":0,"creation_date":1439198203,"post_id":31913545,"comment_id":51744438,"body_markdown":"@EJP Yes, more details about buffer size or even timeout issue should be considered, but this answer only give a work sample to fix the continuous read issue.","body":"@EJP Yes, more details about buffer size or even timeout issue should be considered, but this answer only give a work sample to fix the continuous read issue."},{"owner":{"account_id":6531534,"reputation":31,"user_id":5052534,"display_name":"Dinesh Anton Raja"},"score":0,"creation_date":1439228914,"post_id":31913545,"comment_id":51764313,"body_markdown":"please acknowledge me for continuos packet reception..if once socket is closed, then it will not be re-assigned.after closing of socket only i can see the incoming data..","body":"please acknowledge me for continuos packet reception..if once socket is closed, then it will not be re-assigned.after closing of socket only i can see the incoming data.."},{"owner":{"account_id":1693055,"reputation":1073,"user_id":1555068,"display_name":"jobcrazy"},"score":0,"creation_date":1439254432,"post_id":31913545,"comment_id":51774613,"body_markdown":"@DineshAntonRaja you mean you want to recreate the socket and continue to receive packet when exception throws?","body":"@DineshAntonRaja you mean you want to recreate the socket and continue to receive packet when exception throws?"},{"owner":{"account_id":6531534,"reputation":31,"user_id":5052534,"display_name":"Dinesh Anton Raja"},"score":0,"creation_date":1439268045,"post_id":31913545,"comment_id":51778033,"body_markdown":"@jobcrazy i need to read the packet whenever it comes. But now only one time the packet has received. i think no exception throws...i have attached the code in the following website. (www.pdaraja.weebly.com)....    i have tired the while loop(true). my intention is the program should always ready to receive the packet. please acknowledge me","body":"@jobcrazy i need to read the packet whenever it comes. But now only one time the packet has received. i think no exception throws...i have attached the code in the following website. (www.pdaraja.weebly.com)....    i have tired the while loop(true). my intention is the program should always ready to receive the packet. please acknowledge me"},{"owner":{"account_id":1693055,"reputation":1073,"user_id":1555068,"display_name":"jobcrazy"},"score":0,"creation_date":1439271112,"post_id":31913545,"comment_id":51778984,"body_markdown":"You should not close it until exception throws, just remove ds.close();","body":"You should not close it until exception throws, just remove ds.close();"},{"owner":{"account_id":6531534,"reputation":31,"user_id":5052534,"display_name":"Dinesh Anton Raja"},"score":0,"creation_date":1439273079,"post_id":31913545,"comment_id":51779659,"body_markdown":"can you please send me the code. because if i remove ds.close() it will not show the output in textview. then i am using while(true), so how can i code. please acknowledge me..","body":"can you please send me the code. because if i remove ds.close() it will not show the output in textview. then i am using while(true), so how can i code. please acknowledge me.."},{"owner":{"account_id":6531534,"reputation":31,"user_id":5052534,"display_name":"Dinesh Anton Raja"},"score":0,"creation_date":1439284293,"post_id":31913545,"comment_id":51785837,"body_markdown":"@jobcrazy can you please send me the code. because if i remove ds.close() it will not show the output in textview. then i am using while(true), so how can i code. please acknowledge me.","body":"@jobcrazy can you please send me the code. because if i remove ds.close() it will not show the output in textview. then i am using while(true), so how can i code. please acknowledge me."},{"owner":{"account_id":1693055,"reputation":1073,"user_id":1555068,"display_name":"jobcrazy"},"score":0,"creation_date":1439286307,"post_id":31913545,"comment_id":51787062,"body_markdown":"@DineshAntonRaja check your code carefully plz, use !ds.isClosed() not ds.isClosed() in your while loop","body":"@DineshAntonRaja check your code carefully plz, use !ds.isClosed() not ds.isClosed() in your while loop"}],"tags":[],"owner":{"account_id":1693055,"reputation":1073,"user_id":1555068,"display_name":"jobcrazy"},"comment_count":9,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1439191270,"creation_date":1439190691,"answer_id":31913545,"question_id":31912939,"body_markdown":"You can setup a loop to read data from the udp socket.\r\n\r\n    try {\r\n        ds = new DatagramSocket(UDP_SERVER_PORT);\r\n        //disable timeout for testing\r\n        //ds.setSoTimeout(100000);\r\n        while (!ds.isClosed()) {\r\n            ds.receive(dp);\r\n            lText += new String(dp.getData());\r\n            Log.i(&quot;UDP packet received&quot;, new String(dp.getData());\r\n            runOnUiThread(new Runnable() {\r\n                public void run() {\r\n                    data.setText(lText);\r\n                }\r\n            });\r\n        }\r\n    } catch (SocketException e) {\r\n        e.printStackTrace();\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n    } finally {\r\n        if (ds != null) {\r\n            ds.close();\r\n        }\r\n    }\r\n**UPDATE**: since the packet data is received in non-UI thread. Direct access to data.setText(lText) in worker thread is invalid. ","title":"how to Receive UDP packets, when it comes from server? for android java","body":"<p>You can setup a loop to read data from the udp socket.</p>\n\n<pre><code>try {\n    ds = new DatagramSocket(UDP_SERVER_PORT);\n    //disable timeout for testing\n    //ds.setSoTimeout(100000);\n    while (!ds.isClosed()) {\n        ds.receive(dp);\n        lText += new String(dp.getData());\n        Log.i(\"UDP packet received\", new String(dp.getData());\n        runOnUiThread(new Runnable() {\n            public void run() {\n                data.setText(lText);\n            }\n        });\n    }\n} catch (SocketException e) {\n    e.printStackTrace();\n} catch (IOException e) {\n    e.printStackTrace();\n} finally {\n    if (ds != null) {\n        ds.close();\n    }\n}\n</code></pre>\n\n<p><strong>UPDATE</strong>: since the packet data is received in non-UI thread. Direct access to data.setText(lText) in worker thread is invalid. </p>\n"},{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1439197520,"post_id":31914153,"comment_id":51744023,"body_markdown":"You&#39;re ignoring the length in the datagram.","body":"You&#39;re ignoring the length in the datagram."},{"owner":{"account_id":6531534,"reputation":31,"user_id":5052534,"display_name":"Dinesh Anton Raja"},"score":0,"creation_date":1439228631,"post_id":31914153,"comment_id":51764151,"body_markdown":"the above solutions are not sufficient..only one time the packet has received..but i need the solution that, whenever the packet comes, it has to receive the packet","body":"the above solutions are not sufficient..only one time the packet has received..but i need the solution that, whenever the packet comes, it has to receive the packet"},{"owner":{"account_id":6531534,"reputation":31,"user_id":5052534,"display_name":"Dinesh Anton Raja"},"score":0,"creation_date":1439270254,"post_id":31914153,"comment_id":51778684,"body_markdown":"http://pdaraja.weebly.com/uploads/1/8/2/3/18237947/udpserver.txt                        this is the code i have used..","body":"<a href=\"http://pdaraja.weebly.com/uploads/1/8/2/3/18237947/udpserver.txt\" rel=\"nofollow noreferrer\">pdaraja.weebly.com/uploads/1/8/2/3/18237947/udpserver.txt</a>                        this is the code i have used.."}],"tags":[],"owner":{"account_id":4695869,"reputation":1012,"user_id":4435947,"accept_rate":73,"display_name":"Vid"},"comment_count":3,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1439192712,"creation_date":1439192712,"answer_id":31914153,"question_id":31912939,"body_markdown":"    try {\r\n          DatagramSocket clientsocket=new DatagramSocket(9876);\r\n          byte[] receivedata = new byte[1024];\r\n          while(true)\r\n          {\r\n            DatagramPacket recv_packet = new DatagramPacket(receivedata, receivedata.length);\r\n            Log.d(&quot;UDP&quot;, &quot;S: Receiving...&quot;);\r\n            clientsocket.receive(recv_packet);\r\n            String rec_str = new String(recv_packet.getData());\r\n            tv.setText(rec_str);\r\n            Log.d(&quot; Received String &quot;,rec_str);\r\n            InetAddress ipaddress = recv_packet.getAddress();\r\n            int port = recv_packet.getPort();\r\n            Log.d(&quot;IPAddress : &quot;,ipaddress.toString());\r\n            Log.d(&quot; Port : &quot;,Integer.toString(port));\r\n          }\r\n        } catch (Exception e) {\r\n          Log.e(&quot;UDP&quot;, &quot;S: Error&quot;, e);\r\n        }","title":"how to Receive UDP packets, when it comes from server? for android java","body":"<pre><code>try {\n      DatagramSocket clientsocket=new DatagramSocket(9876);\n      byte[] receivedata = new byte[1024];\n      while(true)\n      {\n        DatagramPacket recv_packet = new DatagramPacket(receivedata, receivedata.length);\n        Log.d(\"UDP\", \"S: Receiving...\");\n        clientsocket.receive(recv_packet);\n        String rec_str = new String(recv_packet.getData());\n        tv.setText(rec_str);\n        Log.d(\" Received String \",rec_str);\n        InetAddress ipaddress = recv_packet.getAddress();\n        int port = recv_packet.getPort();\n        Log.d(\"IPAddress : \",ipaddress.toString());\n        Log.d(\" Port : \",Integer.toString(port));\n      }\n    } catch (Exception e) {\n      Log.e(\"UDP\", \"S: Error\", e);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6457339,"reputation":1080,"user_id":5002284,"display_name":"dly"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1439299905,"creation_date":1439292441,"answer_id":31940523,"question_id":31912939,"body_markdown":"This is a working snippet I am using to receive and parse UDP packets. \r\n\t\t\r\n\r\n      try {\r\n        \tint port = 11000;\r\n        \r\n        \tDatagramSocket dsocket = new DatagramSocket(port);\r\n        \tbyte[] buffer = new byte[2048];\r\n        \tDatagramPacket packet = new DatagramPacket(buffer, buffer.length);\r\n        \r\n        \twhile (true) {\r\n        \t\t\t\t\r\n        \t\tdsocket.receive(packet);\r\n                lText = new String(buffer, 0, packet.getLength());\r\n                Log.i(&quot;UDP packet received&quot;, lText);\r\n                data.setText(lText);\r\n        \r\n        \t\tpacket.setLength(buffer.length);\r\n        \t}\r\n        } catch (Exception e) {\r\n        \tSystem.err.println(e);\r\n        \te.printStackTrace();\r\n        }\r\n\t","title":"how to Receive UDP packets, when it comes from server? for android java","body":"<p>This is a working snippet I am using to receive and parse UDP packets. </p>\n\n<pre><code>  try {\n        int port = 11000;\n\n        DatagramSocket dsocket = new DatagramSocket(port);\n        byte[] buffer = new byte[2048];\n        DatagramPacket packet = new DatagramPacket(buffer, buffer.length);\n\n        while (true) {\n\n            dsocket.receive(packet);\n            lText = new String(buffer, 0, packet.getLength());\n            Log.i(\"UDP packet received\", lText);\n            data.setText(lText);\n\n            packet.setLength(buffer.length);\n        }\n    } catch (Exception e) {\n        System.err.println(e);\n        e.printStackTrace();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26612491,"reputation":1,"user_id":20232474,"display_name":"Ahmet Turan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665671904,"creation_date":1665671904,"answer_id":74057646,"question_id":31912939,"body_markdown":"Send data and get Answer example:\r\n\r\n            new Thread(()-&gt;{\r\n\r\n                String message = &quot;Hello Madam Coco&quot;;\r\n                byte[] msgbyte = message.getBytes(StandardCharsets.UTF_8);\r\n                int port = 12345;\r\n                String ip = &quot;123,123,123,123&quot;;\r\n\r\n                try {\r\n                    byte[] receviebyte = new byte[1024];\r\n                    DatagramSocket socket = new DatagramSocket();\r\n                    InetAddress address = InetAddress.getByName(ip);\r\n                    DatagramPacket sendPack = new DatagramPacket(msgbyte, msgbyte.length, address, port);\r\n                    socket.send(sendPack);\r\n                    DatagramPacket receviePack = new DatagramPacket(receviebyte, receviebyte.length);\r\n                    while (true) {\r\n\r\n                        socket.receive(receviePack);\r\n                        String receivestr = new String(receviebyte, receviePack.getOffset(), receviePack.getLength());\r\n                        System.out.println(&quot;GETTEXT &quot; + receivestr);\r\n\r\n                    }\r\n\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }).start();","title":"how to Receive UDP packets, when it comes from server? for android java","body":"<p>Send data and get Answer example:</p>\n<pre><code>        new Thread(()-&gt;{\n\n            String message = &quot;Hello Madam Coco&quot;;\n            byte[] msgbyte = message.getBytes(StandardCharsets.UTF_8);\n            int port = 12345;\n            String ip = &quot;123,123,123,123&quot;;\n\n            try {\n                byte[] receviebyte = new byte[1024];\n                DatagramSocket socket = new DatagramSocket();\n                InetAddress address = InetAddress.getByName(ip);\n                DatagramPacket sendPack = new DatagramPacket(msgbyte, msgbyte.length, address, port);\n                socket.send(sendPack);\n                DatagramPacket receviePack = new DatagramPacket(receviebyte, receviebyte.length);\n                while (true) {\n\n                    socket.receive(receviePack);\n                    String receivestr = new String(receviebyte, receviePack.getOffset(), receviePack.getLength());\n                    System.out.println(&quot;GETTEXT &quot; + receivestr);\n\n                }\n\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }).start();\n</code></pre>\n"}],"owner":{"account_id":6531534,"reputation":31,"user_id":5052534,"display_name":"Dinesh Anton Raja"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14326,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":4,"score":3,"last_activity_date":1665671904,"creation_date":1439188304,"question_id":31912939,"body_markdown":"I have used a thread for UDP receive packet. When I am sending a packet to that particular IP, where the UDP receive program runs. The application will be stopped unfortunately. Then if I remove the thread called `new Thread(new Runnable())` and `public void run` the application will run good, but only one data has received. My intention is to receive data at the receiver end continuously, when data comes. please acknowledge me.\r\n   \r\n **udpserver.java:**\r\n\r\n    import java.io.IOException;\r\n    import java.net.DatagramPacket;\r\n    import java.net.DatagramSocket;\r\n    import java.net.SocketException;\r\n    \r\n    import android.app.Activity;\r\n    import android.os.Bundle;\r\n    import android.util.Log;\r\n    import android.widget.TextView;\r\n    \r\n    \r\n    public class UdpServer extends Activity {\r\n    /** Called when the activity is first created. */\r\n    private TextView data;\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.main);\r\n        data = (TextView) findViewById(R.id.textView);\r\n    \r\n            runUdpServer();\r\n    \r\n    }\r\n    private static final int UDP_SERVER_PORT = 11111;\r\n    private static final int MAX_UDP_DATAGRAM_LEN = 1500;\r\n    private void runUdpServer() {\r\n        new Thread(new Runnable() {\r\n            public void run() {\r\n                String lText;\r\n                byte[] lMsg = new byte[MAX_UDP_DATAGRAM_LEN];\r\n                DatagramPacket dp = new DatagramPacket(lMsg, lMsg.length);\r\n                DatagramSocket ds=null;\r\n                try {\r\n                     ds = new DatagramSocket(UDP_SERVER_PORT);\r\n                    //disable timeout for testing\r\n                    //ds.setSoTimeout(100000);\r\n                    ds.receive(dp);\r\n                    lText = new String(dp.getData());\r\n                    Log.i(&quot;UDP packet received&quot;, lText);\r\n                    data.setText(lText);\r\n                } catch (SocketException e) {\r\n                    e.printStackTrace();\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n                finally {\r\n                    if (ds != null) {\r\n                        ds.close();\r\n                    }\r\n                }\r\n            }\r\n        }).start();\r\n    }","title":"how to Receive UDP packets, when it comes from server? for android java","body":"<p>I have used a thread for UDP receive packet. When I am sending a packet to that particular IP, where the UDP receive program runs. The application will be stopped unfortunately. Then if I remove the thread called <code>new Thread(new Runnable())</code> and <code>public void run</code> the application will run good, but only one data has received. My intention is to receive data at the receiver end continuously, when data comes. please acknowledge me.</p>\n\n<p><strong>udpserver.java:</strong></p>\n\n<pre><code>import java.io.IOException;\nimport java.net.DatagramPacket;\nimport java.net.DatagramSocket;\nimport java.net.SocketException;\n\nimport android.app.Activity;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.widget.TextView;\n\n\npublic class UdpServer extends Activity {\n/** Called when the activity is first created. */\nprivate TextView data;\n@Override\npublic void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.main);\n    data = (TextView) findViewById(R.id.textView);\n\n        runUdpServer();\n\n}\nprivate static final int UDP_SERVER_PORT = 11111;\nprivate static final int MAX_UDP_DATAGRAM_LEN = 1500;\nprivate void runUdpServer() {\n    new Thread(new Runnable() {\n        public void run() {\n            String lText;\n            byte[] lMsg = new byte[MAX_UDP_DATAGRAM_LEN];\n            DatagramPacket dp = new DatagramPacket(lMsg, lMsg.length);\n            DatagramSocket ds=null;\n            try {\n                 ds = new DatagramSocket(UDP_SERVER_PORT);\n                //disable timeout for testing\n                //ds.setSoTimeout(100000);\n                ds.receive(dp);\n                lText = new String(dp.getData());\n                Log.i(\"UDP packet received\", lText);\n                data.setText(lText);\n            } catch (SocketException e) {\n                e.printStackTrace();\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n            finally {\n                if (ds != null) {\n                    ds.close();\n                }\n            }\n        }\n    }).start();\n}\n</code></pre>\n"},{"tags":["java","generics","interface","fluent"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1665670540,"post_id":74057081,"comment_id":130757854,"body_markdown":"[This answer](https://stackoverflow.com/a/44323160/5133585) should explain exactly in what sense is it &quot;unchecked&quot;. For more examples, see [this](https://stackoverflow.com/q/2693180/5133585).","body":"<a href=\"https://stackoverflow.com/a/44323160/5133585\">This answer</a> should explain exactly in what sense is it &quot;unchecked&quot;. For more examples, see <a href=\"https://stackoverflow.com/q/2693180/5133585\">this</a>."}],"answers":[{"comments":[{"owner":{"account_id":18514,"reputation":7704,"user_id":42473,"accept_rate":52,"display_name":"Mark Booth"},"score":0,"creation_date":1665680468,"post_id":74057483,"comment_id":130761457,"body_markdown":"So as long as we document the `withBounds` method suggesting people use `var foo = B().withBounds(false)` in practice this is unlikely to ever happen?","body":"So as long as we document the <code>withBounds</code> method suggesting people use <code>var foo = B().withBounds(false)</code> in practice this is unlikely to ever happen?"}],"tags":[],"owner":{"account_id":2163224,"reputation":6602,"user_id":1916917,"accept_rate":60,"display_name":"Holloway"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665671271,"creation_date":1665671271,"answer_id":74057483,"question_id":74057081,"body_markdown":"The problem is that setting the generic return type means that the caller gets to decide the return type not the implementing class. For instance the below example compiles but fails at runtime with a ClassCastException.\r\n\r\n    public class Demo {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tA foo = new B().withBounds(false);\r\n    \t}\r\n    }\r\n    \r\n    interface Bounds {\r\n    \tvoid setBounds(boolean bounds);\r\n    \tdefault &lt;T extends Bounds&gt; T withBounds(boolean bounds) {\r\n    \t\tthis.setBounds(bounds);\r\n    \t\treturn (T) this;\r\n    \t}\r\n    }\r\n    \r\n    class A implements Bounds {\r\n    \tpublic void setBounds(boolean bounds) {}\r\n    }\r\n    \r\n    class B implements Bounds {\r\n    \tpublic void setBounds(boolean bounds) {}\r\n    }","title":"Adding a generic default method to a Java Interface warns of Unchecked cast","body":"<p>The problem is that setting the generic return type means that the caller gets to decide the return type not the implementing class. For instance the below example compiles but fails at runtime with a ClassCastException.</p>\n<pre><code>public class Demo {\n    public static void main(String[] args) {\n        A foo = new B().withBounds(false);\n    }\n}\n\ninterface Bounds {\n    void setBounds(boolean bounds);\n    default &lt;T extends Bounds&gt; T withBounds(boolean bounds) {\n        this.setBounds(bounds);\n        return (T) this;\n    }\n}\n\nclass A implements Bounds {\n    public void setBounds(boolean bounds) {}\n}\n\nclass B implements Bounds {\n    public void setBounds(boolean bounds) {}\n}\n</code></pre>\n"}],"owner":{"account_id":18514,"reputation":7704,"user_id":42473,"accept_rate":52,"display_name":"Mark Booth"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665671271,"creation_date":1665669767,"question_id":74057081,"body_markdown":"I&#39;ve added a generic method to an interface, so that every class which implements that interface has a fluent method to set a parameter on that class, but I&#39;m getting &quot;Unchecked cast&quot; warning on the return statement, so I&#39;m suppressing it.\r\n\r\nSince I&#39;m uncomfortable with just suppressing the warning, and casts have always felt like code smells since I came to java from C#, where they most definitely are, I wonder under what circumstances that warning might apply. Alternatively, I wonder if there is a more type safe way of implementing what I want.\r\n\r\nWanting to be able to use\r\n\r\n    var model = new MyModel().withBoundsToFit(true);\r\n\r\nrather than\r\n\r\n    var model = new MyModel();\r\n    model.setBoundsToFit(true);\r\n\r\nI created this method in IBoundsToFit:\r\n\r\n\t//@SuppressWarnings(&quot;unchecked&quot;)\r\n\tdefault &lt;T extends IBoundsToFit&gt; T withBoundsToFit(boolean boundsToFit) {\r\n\t\tsetBoundsToFit(boundsToFit);\r\n\t\treturn (T) this; // Type safety: Unchecked cast from IboundsToFit to T\r\n\t}\r\n\r\nWhat I don&#39;t understand is how, when I&#39;m already constraining `T` to classes which extend `IBoundsToFit`, in what situation it could be unsafe to do this cast.","title":"Adding a generic default method to a Java Interface warns of Unchecked cast","body":"<p>I've added a generic method to an interface, so that every class which implements that interface has a fluent method to set a parameter on that class, but I'm getting &quot;Unchecked cast&quot; warning on the return statement, so I'm suppressing it.</p>\n<p>Since I'm uncomfortable with just suppressing the warning, and casts have always felt like code smells since I came to java from C#, where they most definitely are, I wonder under what circumstances that warning might apply. Alternatively, I wonder if there is a more type safe way of implementing what I want.</p>\n<p>Wanting to be able to use</p>\n<pre><code>var model = new MyModel().withBoundsToFit(true);\n</code></pre>\n<p>rather than</p>\n<pre><code>var model = new MyModel();\nmodel.setBoundsToFit(true);\n</code></pre>\n<p>I created this method in IBoundsToFit:</p>\n<pre><code>//@SuppressWarnings(&quot;unchecked&quot;)\ndefault &lt;T extends IBoundsToFit&gt; T withBoundsToFit(boolean boundsToFit) {\n    setBoundsToFit(boundsToFit);\n    return (T) this; // Type safety: Unchecked cast from IboundsToFit to T\n}\n</code></pre>\n<p>What I don't understand is how, when I'm already constraining <code>T</code> to classes which extend <code>IBoundsToFit</code>, in what situation it could be unsafe to do this cast.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":26611491,"reputation":11,"user_id":20231625,"display_name":"JustLutz"},"score":0,"creation_date":1665667442,"post_id":74056218,"comment_id":130756742,"body_markdown":"the output in the Queue is always the same word","body":"the output in the Queue is always the same word"}],"answers":[{"comments":[{"owner":{"account_id":26611491,"reputation":11,"user_id":20231625,"display_name":"JustLutz"},"score":0,"creation_date":1665671287,"post_id":74057262,"comment_id":130758132,"body_markdown":"Hi, it could be a good idea, but the text we have is about 1000 Characters long so I don&#180;t know if I can do it this way. Is it possible to convert the text String into a file?","body":"Hi, it could be a good idea, but the text we have is about 1000 Characters long so I don&#180;t know if I can do it this way. Is it possible to convert the text String into a file?"},{"owner":{"account_id":26611491,"reputation":11,"user_id":20231625,"display_name":"JustLutz"},"score":0,"creation_date":1665671875,"post_id":74057262,"comment_id":130758355,"body_markdown":"I looked it up and the text file has 25741 words in the file","body":"I looked it up and the text file has 25741 words in the file"},{"owner":{"account_id":2679531,"reputation":2832,"user_id":2315162,"accept_rate":81,"display_name":"sinclair"},"score":0,"creation_date":1665996620,"post_id":74057262,"comment_id":130821779,"body_markdown":"Read your file into String as it is explained in the linked question.","body":"Read your file into String as it is explained in the linked question."}],"tags":[],"owner":{"account_id":2679531,"reputation":2832,"user_id":2315162,"accept_rate":81,"display_name":"sinclair"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665670881,"creation_date":1665670421,"answer_id":74057262,"question_id":74056218,"body_markdown":"Not sure if this fits your task, but you can code this much easier using regex:\r\n\r\n    public static void main(String args[]) {\r\n        \r\n      String text = &quot;foo bar Tacos are the best things in the world bar&quot;;\r\n      String foo=&quot;Tacos _ _ best things _ _ world&quot;;\r\n      \r\n      String words[] = foo.split(&quot; &quot;);\r\n\r\n      String regex = &quot;&quot;;\r\n      for ( String w : words ){\r\n          if ( w.equals(&quot;_&quot;)){\r\n              regex += &quot;(\\\\w*)+ &quot;;\r\n          }else{\r\n              regex += &quot;(&quot; + w + &quot;)+ &quot;;\r\n          }\r\n      }\r\n      //  regex =&gt;  (Tacos)+ (\\w*)+ (\\w*)+ (best)+ (things)+ (\\w*)+ (\\w*)+ (world)+ \r\n\r\n      Pattern pattern = Pattern.compile(regex, Pattern.MULTILINE);\r\n      Matcher matcher = pattern.matcher(text);\r\n        \r\n      while (matcher.find()) {\r\n           System.out.println(&quot;Full sentence: &quot; + matcher.group(0));\r\n           //  Full sentence:  Tacos are the best things in the world\r\n      }      \r\n    }\r\n\r\nBesides, going through the textfile line by line will not work if the sentence you search for is split over several lines. \r\nTake a look at:  [Search for multiline String in a text file][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/56511964/search-for-multiline-string-in-a-text-file","title":"How to find missing words in a text file","body":"<p>Not sure if this fits your task, but you can code this much easier using regex:</p>\n<pre><code>public static void main(String args[]) {\n    \n  String text = &quot;foo bar Tacos are the best things in the world bar&quot;;\n  String foo=&quot;Tacos _ _ best things _ _ world&quot;;\n  \n  String words[] = foo.split(&quot; &quot;);\n\n  String regex = &quot;&quot;;\n  for ( String w : words ){\n      if ( w.equals(&quot;_&quot;)){\n          regex += &quot;(\\\\w*)+ &quot;;\n      }else{\n          regex += &quot;(&quot; + w + &quot;)+ &quot;;\n      }\n  }\n  //  regex =&gt;  (Tacos)+ (\\w*)+ (\\w*)+ (best)+ (things)+ (\\w*)+ (\\w*)+ (world)+ \n\n  Pattern pattern = Pattern.compile(regex, Pattern.MULTILINE);\n  Matcher matcher = pattern.matcher(text);\n    \n  while (matcher.find()) {\n       System.out.println(&quot;Full sentence: &quot; + matcher.group(0));\n       //  Full sentence:  Tacos are the best things in the world\n  }      \n}\n</code></pre>\n<p>Besides, going through the textfile line by line will not work if the sentence you search for is split over several lines.\nTake a look at:  <a href=\"https://stackoverflow.com/questions/56511964/search-for-multiline-string-in-a-text-file\">Search for multiline String in a text file</a></p>\n"},{"comments":[{"owner":{"account_id":26611491,"reputation":11,"user_id":20231625,"display_name":"JustLutz"},"score":0,"creation_date":1665672843,"post_id":74057477,"comment_id":130758747,"body_markdown":"This isn&#180;t homework task. I want to learn something new and found this task online. I tried it but can&#180;t complete it so I posted it here","body":"This isn&#180;t homework task. I want to learn something new and found this task online. I tried it but can&#180;t complete it so I posted it here"}],"tags":[],"owner":{"account_id":540420,"reputation":6131,"user_id":908621,"accept_rate":61,"display_name":"fishinear"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665671246,"creation_date":1665671246,"answer_id":74057477,"question_id":74056218,"body_markdown":"I would turn the short text into a regular expression pattern, and parse the large text with that regular expression.\r\nBut, I am assuming this is a homework assignment (make sure you add that tag to the question) and you have not been taught regular expressions yet.\r\n\r\nSo, I&#39;ll just give some tips on improving your current approach.\r\nAt first glance, the direct cause that it fails, is likely because you have used `if` instead of `else if` in the main body of the loop. That means that all the `if`s are evaluated in sequence for each word.\r\n\r\nYou don&#39;t test on `_` anywhere, so you will not find the missing words.\r\n\r\nBut the repeated `if`s with identical bodies are also a sign that you have an approach that is too rigid. I am sure that nothing in the assignment says that the short sentence must have 8 words, and your approach will fail any other sentence. Make sure that you have an approach that works more flexibly. Something like the following:\r\n\r\nKeep an index into the pattern that keeps track of which word you are matching.\r\nFor each word in the input, compare it with the currently indexed word. If it matches, increase the index. If the indexed word is a `_` it always matches, remember the word it matches to and increase the index. If the indexed word does not match, reset the index to 0, and skip to the next line in the input.\r\nIf the index reaches the length of the pattern, output the remembered words and finish.\r\n\r\nAnother tip that will help you in the future: make sure all variable names, and all comments are in English. Only use a local language for texts that are presented to the user.\r\n\r\n\r\n ","title":"How to find missing words in a text file","body":"<p>I would turn the short text into a regular expression pattern, and parse the large text with that regular expression.\nBut, I am assuming this is a homework assignment (make sure you add that tag to the question) and you have not been taught regular expressions yet.</p>\n<p>So, I'll just give some tips on improving your current approach.\nAt first glance, the direct cause that it fails, is likely because you have used <code>if</code> instead of <code>else if</code> in the main body of the loop. That means that all the <code>if</code>s are evaluated in sequence for each word.</p>\n<p>You don't test on <code>_</code> anywhere, so you will not find the missing words.</p>\n<p>But the repeated <code>if</code>s with identical bodies are also a sign that you have an approach that is too rigid. I am sure that nothing in the assignment says that the short sentence must have 8 words, and your approach will fail any other sentence. Make sure that you have an approach that works more flexibly. Something like the following:</p>\n<p>Keep an index into the pattern that keeps track of which word you are matching.\nFor each word in the input, compare it with the currently indexed word. If it matches, increase the index. If the indexed word is a <code>_</code> it always matches, remember the word it matches to and increase the index. If the indexed word does not match, reset the index to 0, and skip to the next line in the input.\nIf the index reaches the length of the pattern, output the remembered words and finish.</p>\n<p>Another tip that will help you in the future: make sure all variable names, and all comments are in English. Only use a local language for texts that are presented to the user.</p>\n"}],"owner":{"account_id":26611491,"reputation":11,"user_id":20231625,"display_name":"JustLutz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":267,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1665671246,"creation_date":1665666040,"question_id":74056218,"body_markdown":"I have two text files one with a long text and another with a short text (about 5-7 words) and I need to find the missing words from the file with the short text. The file with the short text looks like this : Tacos _ _ best things _ _ world\r\n\r\nI readed the short file into a queue and the other file in a bufferedReader. Now I am going through the text and if the first word of the queue euquals the word in the text, I remove it from the queue and add it to another Queue. Then I will look, what the next word is and add if it equals a word in the queue. If yes, I want to add it to the queue and if not I want to look how far the next word in the queue is away from the current word. If it matches with te input from the queue I want to add the sentence to the output queue and print it out\r\n\r\nMy code currently looks like this:\r\n\r\n```java\r\npackage Nr1;\r\n\r\nimport java.awt.*;\r\nimport java.io.*;\r\nimport java.util.LinkedList;\r\nimport java.util.Queue;\r\n\r\npublic class main1 {\r\n\r\n\r\n\r\n    public static void main(String args[]) throws IOException {\r\n        \r\n        Queue&lt;String&gt; eingabe = new LinkedList&lt;String&gt;();\r\n        Queue&lt;String&gt; ausgabe = new LinkedList&lt;String&gt;();\r\n\r\n        //F&#252;r die Eingabe des Dateinamens in der Konsole\r\n        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));\r\n        System.out.print(&quot;Geben sie den Dateinamen ein:&quot;);\r\n        String dateiname = br.readLine();\r\n\r\n        //Datei wird eingelesen\r\n        File file = new File(&quot;./assets/Aufgabe1/&quot; + dateiname + &quot;.txt&quot;);\r\n        BufferedReader reader = new BufferedReader(new FileReader(file));\r\n\r\n        //String mit dem Inhalt der gest&#246;rten Datei\r\n        String line = reader.readLine();\r\n\r\n        //String wird in einzelne W&#246;rter aufgeteilt und in die Queue eingef&#252;gt\r\n        String[] words = line.split(&quot; &quot;);\r\n        for (int i = 0; i &lt; words.length; i++) {\r\n            eingabe.add(words[i]);\r\n        }\r\n\r\n        //Datei wird geschlossen\r\n        reader.close();\r\n\r\n        System.out.println(eingabe);\r\n\r\n        //TODO in dem Text nach den W&#246;rtern suchen und die W&#246;rter in die Queue einf&#252;gen\r\n\r\n        File tacoText = new File(&quot;TacoText.txt&quot;);\r\n        String[] woerter = null;\r\n        BufferedReader bufferedReader = new BufferedReader(new FileReader(tacoText));\r\n        String s;\r\n        int nextWord = 0;\r\n        String input = eingabe.peek();\r\n        int count = 0;\r\n\r\n        while((s = bufferedReader.readLine())!=null &amp;&amp; !eingabe.isEmpty()) {\r\n            words = s.split(&quot; &quot;);\r\n\r\n            for (String word : words) {\r\n                String input2 = eingabe.peek();\r\n                if (word.equals(input)) {\r\n                    ausgabe.add(input);\r\n                    eingabe.remove();\r\n                    nextWord++;\r\n                    input2 = eingabe.peek();\r\n                    System.out.println(input2);\r\n                    System.out.println(word);\r\n                    System.out.println(eingabe.peek());\r\n                }\r\n                if(nextWord == 1) {\r\n                    ausgabe.add(word);\r\n                    eingabe.remove();\r\n                    nextWord++;\r\n                    input2 = eingabe.peek();\r\n                    System.out.println(input2);\r\n                    System.out.println(word);\r\n                    System.out.println(eingabe.peek());\r\n                }\r\n                if(nextWord == 2 &amp;&amp; word.equals(input2)) {\r\n                    ausgabe.add(word);\r\n                    eingabe.remove();\r\n                    nextWord++;\r\n                    input2 = eingabe.peek();\r\n                    System.out.println(input2);\r\n                    System.out.println(word);\r\n                    System.out.println(eingabe.peek());\r\n                }\r\n                if(nextWord == 3 &amp;&amp; word.equals(input2)) {\r\n                    ausgabe.add(word);\r\n                    eingabe.remove();\r\n                    nextWord++;\r\n                    input2 = eingabe.peek();\r\n                    System.out.println(input2);\r\n                    System.out.println(word);\r\n                    System.out.println(eingabe.peek());\r\n                }\r\n                if(nextWord == 4 &amp;&amp; word.equals(input2)) {\r\n                    ausgabe.add(word);\r\n                    eingabe.remove();\r\n                    nextWord++;\r\n                    input2 = eingabe.peek();\r\n                    System.out.println(input2);\r\n                    System.out.println(word);\r\n                    System.out.println(eingabe.peek());\r\n                }\r\n                if(nextWord == 5 &amp;&amp; word.equals(input2)) {\r\n                    ausgabe.add(word);\r\n                    eingabe.remove();\r\n                    nextWord++;\r\n                    input2 = eingabe.peek();\r\n                    System.out.println(input2);\r\n                    System.out.println(word);\r\n                    System.out.println(eingabe.peek());\r\n                }\r\n                if(nextWord == 6 &amp;&amp; word.equals(input2)) {\r\n                    ausgabe.add(word);\r\n                    eingabe.remove();\r\n                    nextWord++;\r\n                    input2 = eingabe.peek();\r\n                    System.out.println(input2);\r\n                    System.out.println(word);\r\n                    System.out.println(eingabe.peek());\r\n                }\r\n                if(nextWord == 7 &amp;&amp; word.equals(input2)) {\r\n                    ausgabe.add(word);\r\n                    if(!eingabe.isEmpty()) {\r\n                        eingabe.remove();\r\n                    }\r\n                    nextWord++;\r\n                }\r\n            }\r\n        }\r\n        System.out.println(ausgabe);\r\n    }\r\n}```","title":"How to find missing words in a text file","body":"<p>I have two text files one with a long text and another with a short text (about 5-7 words) and I need to find the missing words from the file with the short text. The file with the short text looks like this : Tacos _ _ best things _ _ world</p>\n<p>I readed the short file into a queue and the other file in a bufferedReader. Now I am going through the text and if the first word of the queue euquals the word in the text, I remove it from the queue and add it to another Queue. Then I will look, what the next word is and add if it equals a word in the queue. If yes, I want to add it to the queue and if not I want to look how far the next word in the queue is away from the current word. If it matches with te input from the queue I want to add the sentence to the output queue and print it out</p>\n<p>My code currently looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package Nr1;\n\nimport java.awt.*;\nimport java.io.*;\nimport java.util.LinkedList;\nimport java.util.Queue;\n\npublic class main1 {\n\n\n\n    public static void main(String args[]) throws IOException {\n        \n        Queue&lt;String&gt; eingabe = new LinkedList&lt;String&gt;();\n        Queue&lt;String&gt; ausgabe = new LinkedList&lt;String&gt;();\n\n        //Für die Eingabe des Dateinamens in der Konsole\n        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));\n        System.out.print(&quot;Geben sie den Dateinamen ein:&quot;);\n        String dateiname = br.readLine();\n\n        //Datei wird eingelesen\n        File file = new File(&quot;./assets/Aufgabe1/&quot; + dateiname + &quot;.txt&quot;);\n        BufferedReader reader = new BufferedReader(new FileReader(file));\n\n        //String mit dem Inhalt der gestörten Datei\n        String line = reader.readLine();\n\n        //String wird in einzelne Wörter aufgeteilt und in die Queue eingefügt\n        String[] words = line.split(&quot; &quot;);\n        for (int i = 0; i &lt; words.length; i++) {\n            eingabe.add(words[i]);\n        }\n\n        //Datei wird geschlossen\n        reader.close();\n\n        System.out.println(eingabe);\n\n        //TODO in dem Text nach den Wörtern suchen und die Wörter in die Queue einfügen\n\n        File tacoText = new File(&quot;TacoText.txt&quot;);\n        String[] woerter = null;\n        BufferedReader bufferedReader = new BufferedReader(new FileReader(tacoText));\n        String s;\n        int nextWord = 0;\n        String input = eingabe.peek();\n        int count = 0;\n\n        while((s = bufferedReader.readLine())!=null &amp;&amp; !eingabe.isEmpty()) {\n            words = s.split(&quot; &quot;);\n\n            for (String word : words) {\n                String input2 = eingabe.peek();\n                if (word.equals(input)) {\n                    ausgabe.add(input);\n                    eingabe.remove();\n                    nextWord++;\n                    input2 = eingabe.peek();\n                    System.out.println(input2);\n                    System.out.println(word);\n                    System.out.println(eingabe.peek());\n                }\n                if(nextWord == 1) {\n                    ausgabe.add(word);\n                    eingabe.remove();\n                    nextWord++;\n                    input2 = eingabe.peek();\n                    System.out.println(input2);\n                    System.out.println(word);\n                    System.out.println(eingabe.peek());\n                }\n                if(nextWord == 2 &amp;&amp; word.equals(input2)) {\n                    ausgabe.add(word);\n                    eingabe.remove();\n                    nextWord++;\n                    input2 = eingabe.peek();\n                    System.out.println(input2);\n                    System.out.println(word);\n                    System.out.println(eingabe.peek());\n                }\n                if(nextWord == 3 &amp;&amp; word.equals(input2)) {\n                    ausgabe.add(word);\n                    eingabe.remove();\n                    nextWord++;\n                    input2 = eingabe.peek();\n                    System.out.println(input2);\n                    System.out.println(word);\n                    System.out.println(eingabe.peek());\n                }\n                if(nextWord == 4 &amp;&amp; word.equals(input2)) {\n                    ausgabe.add(word);\n                    eingabe.remove();\n                    nextWord++;\n                    input2 = eingabe.peek();\n                    System.out.println(input2);\n                    System.out.println(word);\n                    System.out.println(eingabe.peek());\n                }\n                if(nextWord == 5 &amp;&amp; word.equals(input2)) {\n                    ausgabe.add(word);\n                    eingabe.remove();\n                    nextWord++;\n                    input2 = eingabe.peek();\n                    System.out.println(input2);\n                    System.out.println(word);\n                    System.out.println(eingabe.peek());\n                }\n                if(nextWord == 6 &amp;&amp; word.equals(input2)) {\n                    ausgabe.add(word);\n                    eingabe.remove();\n                    nextWord++;\n                    input2 = eingabe.peek();\n                    System.out.println(input2);\n                    System.out.println(word);\n                    System.out.println(eingabe.peek());\n                }\n                if(nextWord == 7 &amp;&amp; word.equals(input2)) {\n                    ausgabe.add(word);\n                    if(!eingabe.isEmpty()) {\n                        eingabe.remove();\n                    }\n                    nextWord++;\n                }\n            }\n        }\n        System.out.println(ausgabe);\n    }\n}```\n</code></pre>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1665670921,"post_id":74057239,"comment_id":130757994,"body_markdown":"Your program ends before the sleep is complete, you need to join threads or get the results of the completable futures (or join them). The `CompletableFuture.allOf(cf1, cf2)` on its own does nothing, did you maybe intend to use `CompletableFuture.allOf(cf1, cf2).join()`?.","body":"Your program ends before the sleep is complete, you need to join threads or get the results of the completable futures (or join them). The <code>CompletableFuture.allOf(cf1, cf2)</code> on its own does nothing, did you maybe intend to use <code>CompletableFuture.allOf(cf1, cf2).join()</code>?."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1665671199,"post_id":74057239,"comment_id":130758098,"body_markdown":"[documentation](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/concurrent/CompletableFuture.html#allOf(java.util.concurrent.CompletableFuture...)) of `allOf()`: &quot;*Among the applications of this method is to await completion of a set of independent CompletableFutures before continuing a program, as in: `CompletableFuture.allOf(c1, c2, c3).join();`.*&quot;","body":"<a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/concurrent/CompletableFuture.html#allOf(java.util.concurrent.CompletableFuture...)\" rel=\"nofollow noreferrer\">documentation</a> of <code>allOf()</code>: &quot;<i>Among the applications of this method is to await completion of a set of independent CompletableFutures before continuing a program, as in: <code>CompletableFuture.allOf(c1, c2, c3).join();</code>.</i>&quot;"}],"answers":[{"tags":[],"owner":{"account_id":14982647,"reputation":46,"user_id":11378735,"display_name":"JRF"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1665670968,"creation_date":1665670912,"answer_id":74057397,"question_id":74057239,"body_markdown":"Simply because your main thread continues the execution while the other threads are sleeping.\r\n\r\nIf you want to wait for these threads to complete before continuing the execution, you can for example join them before the end of the method:\r\n\r\n```\r\n    // rest of the program\r\n    cf1.join();\r\n    cf2.join();\r\n    System.out.println(&quot;program ready to terminate&quot;);\r\n```\r\nThis will print:\r\n```\r\n    thread B got lock: obj2\r\n    thread A got lock: obj1\r\n    thread B ready to get the rest lock\r\n    thread A ready to get the rest lock\r\n```\r\n\r\nThis will produce the deadlock and the program will never terminate.","title":"Why the deadlock doesn&#39;t work with Thread.Sleep()","body":"<p>Simply because your main thread continues the execution while the other threads are sleeping.</p>\n<p>If you want to wait for these threads to complete before continuing the execution, you can for example join them before the end of the method:</p>\n<pre><code>    // rest of the program\n    cf1.join();\n    cf2.join();\n    System.out.println(&quot;program ready to terminate&quot;);\n</code></pre>\n<p>This will print:</p>\n<pre><code>    thread B got lock: obj2\n    thread A got lock: obj1\n    thread B ready to get the rest lock\n    thread A ready to get the rest lock\n</code></pre>\n<p>This will produce the deadlock and the program will never terminate.</p>\n"}],"owner":{"account_id":22518226,"reputation":33,"user_id":19556200,"display_name":"Up Pu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74057397,"answer_count":1,"score":0,"last_activity_date":1665671054,"creation_date":1665670340,"question_id":74057239,"body_markdown":"The code use Java 8:\r\n```\r\npublic class MustDeadLock {\r\n    private static final Object obj1 = new Object();\r\n    private static final Object obj2 = new Object();\r\n\r\n    public static void main(String[] args) {\r\n        mockDeadLock();\r\n    }\r\n\r\n    public static void mockDeadLock() {\r\n\r\n        CompletableFuture cf1 = CompletableFuture.runAsync(() -&gt; {\r\n            synchronized (obj1) {\r\n                System.out.println(&quot;thread A got lock: obj1&quot;);\r\n                try {\r\n                    Thread.sleep(1000);\r\n                } catch (InterruptedException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n                System.out.println(&quot;thread A ready to get the rest lock&quot;);\r\n                synchronized (obj2) {\r\n                    System.out.println(&quot;thread A got all locks&quot;);\r\n                }\r\n            }\r\n        });\r\n\r\n        CompletableFuture cf2 = CompletableFuture.runAsync(() -&gt; {\r\n            synchronized (obj2) {\r\n                System.out.println(&quot;thread B got lock: obj2&quot;);\r\n                try {\r\n                    Thread.sleep(1000);\r\n                } catch (InterruptedException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n                System.out.println(&quot;thread B ready to get the rest lock&quot;);\r\n                synchronized (obj1) {\r\n                    System.out.println(&quot;thread B got all locks&quot;);\r\n                }\r\n            }\r\n        });\r\n\r\n        CompletableFuture.allOf(cf1, cf2);\r\n\r\n        System.out.println(&quot;program ready to terminate&quot;);\r\n    }\r\n}\r\n```\r\nI&#39;m wondering why \r\n\r\n```\r\nSystem.out.println(&quot;thread A ready to get the rest lock&quot;);\r\n```\r\n\r\nand\r\n\r\n```\r\nSystem.out.println(&quot;thread B ready to get the rest lock&quot;);)\r\n```\r\n\r\ndon&#39;t get executed.\r\n\r\nWhy does it just print:\r\n```none\r\nthread B got lock: obj2\r\nthread A got lock: obj1\r\nprogram ready to terminate\r\n```\r\nand then terminate the program rather than blocking?","title":"Why the deadlock doesn&#39;t work with Thread.Sleep()","body":"<p>The code use Java 8:</p>\n<pre><code>public class MustDeadLock {\n    private static final Object obj1 = new Object();\n    private static final Object obj2 = new Object();\n\n    public static void main(String[] args) {\n        mockDeadLock();\n    }\n\n    public static void mockDeadLock() {\n\n        CompletableFuture cf1 = CompletableFuture.runAsync(() -&gt; {\n            synchronized (obj1) {\n                System.out.println(&quot;thread A got lock: obj1&quot;);\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    throw new RuntimeException(e);\n                }\n                System.out.println(&quot;thread A ready to get the rest lock&quot;);\n                synchronized (obj2) {\n                    System.out.println(&quot;thread A got all locks&quot;);\n                }\n            }\n        });\n\n        CompletableFuture cf2 = CompletableFuture.runAsync(() -&gt; {\n            synchronized (obj2) {\n                System.out.println(&quot;thread B got lock: obj2&quot;);\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    throw new RuntimeException(e);\n                }\n                System.out.println(&quot;thread B ready to get the rest lock&quot;);\n                synchronized (obj1) {\n                    System.out.println(&quot;thread B got all locks&quot;);\n                }\n            }\n        });\n\n        CompletableFuture.allOf(cf1, cf2);\n\n        System.out.println(&quot;program ready to terminate&quot;);\n    }\n}\n</code></pre>\n<p>I'm wondering why</p>\n<pre><code>System.out.println(&quot;thread A ready to get the rest lock&quot;);\n</code></pre>\n<p>and</p>\n<pre><code>System.out.println(&quot;thread B ready to get the rest lock&quot;);)\n</code></pre>\n<p>don't get executed.</p>\n<p>Why does it just print:</p>\n<pre class=\"lang-none prettyprint-override\"><code>thread B got lock: obj2\nthread A got lock: obj1\nprogram ready to terminate\n</code></pre>\n<p>and then terminate the program rather than blocking?</p>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":14938582,"reputation":7,"user_id":10785950,"display_name":"Master Irfan"},"score":0,"creation_date":1665670758,"post_id":74057281,"comment_id":130757929,"body_markdown":"i get this `/usr/lib/jvm/jdk1.8.0_333`","body":"i get this <code>&#47;usr&#47;lib&#47;jvm&#47;jdk1.8.0_333</code>"},{"owner":{"account_id":4418781,"reputation":2298,"user_id":3599496,"accept_rate":55,"display_name":"Joshua Bakker"},"score":0,"creation_date":1665670918,"post_id":74057281,"comment_id":130757993,"body_markdown":"You have to change JAVA_HOME then. The value points to your old installation and it isn&#39;t found. I didn&#39;t see your image correctly, my bad. You&#39;d have to modify `JAVA_HOME` since it&#39;s pointing to your old Java installation","body":"You have to change JAVA_HOME then. The value points to your old installation and it isn&#39;t found. I didn&#39;t see your image correctly, my bad. You&#39;d have to modify <code>JAVA_HOME</code> since it&#39;s pointing to your old Java installation"}],"tags":[],"owner":{"account_id":4418781,"reputation":2298,"user_id":3599496,"accept_rate":55,"display_name":"Joshua Bakker"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665671053,"creation_date":1665670475,"answer_id":74057281,"question_id":74057139,"body_markdown":"Newer Java versions don&#39;t define `JAVA_HOME` anymore. You removed Java 8 but the environment variable wasn&#39;t removed. Neo4j tries to find something in the folder defined in `JAVA_HOME` which points to your old Java installation. Since you removed that folder, you get an error saying it can&#39;t find the folder.\r\n\r\nYou&#39;d need to change `JAVA_HOME` so it points to your new Java installation since Java doesn&#39;t do that automatically.","title":"JAVA_HOME is not defined correctly. We cannot execute","body":"<p>Newer Java versions don't define <code>JAVA_HOME</code> anymore. You removed Java 8 but the environment variable wasn't removed. Neo4j tries to find something in the folder defined in <code>JAVA_HOME</code> which points to your old Java installation. Since you removed that folder, you get an error saying it can't find the folder.</p>\n<p>You'd need to change <code>JAVA_HOME</code> so it points to your new Java installation since Java doesn't do that automatically.</p>\n"}],"owner":{"account_id":14938582,"reputation":7,"user_id":10785950,"display_name":"Master Irfan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74057281,"answer_count":1,"score":0,"last_activity_date":1665671053,"creation_date":1665669935,"question_id":74057139,"body_markdown":"I have removed all old Java 8 files/folders and reinstalled Java 11 in my machine. However when trying to run neo4j, it shows JAVA_HOME is not defined correctly. Here are my [folders/files][1] of jvm \r\n\r\nI have tried following some questions to edit the etc/profile file, but still no success in getting it to work.\r\n\r\n  [1]: https://i.stack.imgur.com/CHoRE.jpg","title":"JAVA_HOME is not defined correctly. We cannot execute","body":"<p>I have removed all old Java 8 files/folders and reinstalled Java 11 in my machine. However when trying to run neo4j, it shows JAVA_HOME is not defined correctly. Here are my <a href=\"https://i.stack.imgur.com/CHoRE.jpg\" rel=\"nofollow noreferrer\">folders/files</a> of jvm</p>\n<p>I have tried following some questions to edit the etc/profile file, but still no success in getting it to work.</p>\n"},{"tags":["java","cmd","jar","non-ascii-characters"],"answers":[{"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1665667639,"post_id":74056128,"comment_id":130756808,"body_markdown":"I believe you meant [Charset.defaultCharset()](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/nio/charset/Charset.html#defaultCharset()), not defaultEncoding().","body":"I believe you meant <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/nio/charset/Charset.html#defaultCharset()\" rel=\"nofollow noreferrer\">Charset.defaultCharset()</a>, not defaultEncoding()."},{"owner":{"account_id":26610720,"reputation":1,"user_id":20230955,"display_name":"Numix"},"score":0,"creation_date":1665670564,"post_id":74056128,"comment_id":130757859,"body_markdown":"Thanks for the intresting answer, i added the code but with the Charset.defaultCharset() and not the defaultEncoding() because it wasn&#39;t avaible, but now i have strange character in the IDE console x)","body":"Thanks for the intresting answer, i added the code but with the Charset.defaultCharset() and not the defaultEncoding() because it wasn&#39;t avaible, but now i have strange character in the IDE console x)"},{"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1665670882,"post_id":74056128,"comment_id":130757978,"body_markdown":"Yes, I did, @VGR. Well spotted. I shall edit the answer.","body":"Yes, I did, @VGR. Well spotted. I shall edit the answer."},{"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1665670967,"post_id":74056128,"comment_id":130758011,"body_markdown":"@Numix IDEs have their own little mini-console thing going on. It sounds like your IDE is broken: It uses UTF_8 (possibly because, and that was really silly of them, they are trying to work around this problem), but doesn&#39;t fix the &quot;native.encoding&quot; property. There is nothing you can do about this, other than file bug reports, and write work-around code, for example by having a command line flag or -D option that forces a different charset, and then edit your IDE &#39;run the app inside the IDE&#39; definition set that flag with UTF_8.","body":"@Numix IDEs have their own little mini-console thing going on. It sounds like your IDE is broken: It uses UTF_8 (possibly because, and that was really silly of them, they are trying to work around this problem), but doesn&#39;t fix the &quot;native.encoding&quot; property. There is nothing you can do about this, other than file bug reports, and write work-around code, for example by having a command line flag or -D option that forces a different charset, and then edit your IDE &#39;run the app inside the IDE&#39; definition set that flag with UTF_8."},{"owner":{"account_id":26610720,"reputation":1,"user_id":20230955,"display_name":"Numix"},"score":0,"creation_date":1665675817,"post_id":74056128,"comment_id":130759959,"body_markdown":"I see, but i don&#39;t know why the program still doesn&#39;t work, same problem in cmd (space) :(","body":"I see, but i don&#39;t know why the program still doesn&#39;t work, same problem in cmd (space) :("},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665676682,"post_id":74056128,"comment_id":130760288,"body_markdown":"```byte[] a = &quot;a&#233;&#233;&#233;a&quot;.getBytes();\njava.util.stream.IntStream.range(0, a.length).map(i -&gt; a[i]).forEach(i -&gt; System.out.printf(&quot;%02X &quot;, 0xFF &amp; i));```  prints what?","body":"<code>byte[] a = &quot;a&#233;&#233;&#233;a&quot;.getBytes(); java.util.stream.IntStream.range(0, a.length).map(i -&gt; a[i]).forEach(i -&gt; System.out.printf(&quot;%02X &quot;, 0xFF &amp; i));</code>  prints what?"},{"owner":{"account_id":26610720,"reputation":1,"user_id":20230955,"display_name":"Numix"},"score":0,"creation_date":1665732093,"post_id":74056128,"comment_id":130771255,"body_markdown":"On IDE : 61 C3 A9 C3 A9 C3 A9 61\nOn CMD : 61 E9 E9 E9 61","body":"On IDE : 61 C3 A9 C3 A9 C3 A9 61 On CMD : 61 E9 E9 E9 61"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665734752,"post_id":74056128,"comment_id":130771958,"body_markdown":"Do you know what that tells you?","body":"Do you know what that tells you?"},{"owner":{"account_id":26610720,"reputation":1,"user_id":20230955,"display_name":"Numix"},"score":0,"creation_date":1665736097,"post_id":74056128,"comment_id":130772321,"body_markdown":"Unicode character and UTF8 ones, but don&#39;t really understand what&#39;s going on and how to fix it lol","body":"Unicode character and UTF8 ones, but don&#39;t really understand what&#39;s going on and how to fix it lol"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665738287,"post_id":74056128,"comment_id":130773041,"body_markdown":"No - it tells you that your system (via cmd.exe) is *not* Unicode, but your IDE has been fixed up to be so. Yes, we kind of already knew that but it&#39;s good to get these things clear. Now, let me check - the  problem is that your IDE is *still* outputting blanks where you&#39;re entering accented Es?","body":"No - it tells you that your system (via cmd.exe) is <i>not</i> Unicode, but your IDE has been fixed up to be so. Yes, we kind of already knew that but it&#39;s good to get these things clear. Now, let me check - the  problem is that your IDE is <i>still</i> outputting blanks where you&#39;re entering accented Es?"},{"owner":{"account_id":26610720,"reputation":1,"user_id":20230955,"display_name":"Numix"},"score":0,"creation_date":1665738506,"post_id":74056128,"comment_id":130773112,"body_markdown":"No, all is good in my IDE, but not in my cmd with the built jar. And my cmd understands letters with accents (like i show with the python script in my post)","body":"No, all is good in my IDE, but not in my cmd with the built jar. And my cmd understands letters with accents (like i show with the python script in my post)"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665739279,"post_id":74056128,"comment_id":130773346,"body_markdown":"So you can type in an E acute *directly* into cmd.exe? Oh and can you say what `java -version` prints in cmd?","body":"So you can type in an E acute <i>directly</i> into cmd.exe? Oh and can you say what <code>java -version</code> prints in cmd?"},{"owner":{"account_id":26610720,"reputation":1,"user_id":20230955,"display_name":"Numix"},"score":0,"creation_date":1665739518,"post_id":74056128,"comment_id":130773423,"body_markdown":"java version &quot;17.0.2&quot; 2022-01-18 LTS","body":"java version &quot;17.0.2&quot; 2022-01-18 LTS"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665739878,"post_id":74056128,"comment_id":130773542,"body_markdown":"Ok but of course since you don&#39;t run real code in an IDE, you should have altered your code to that given in the answer . Did you do that? Oh and you didn&#39;t answer the question about typing","body":"Ok but of course since you don&#39;t run real code in an IDE, you should have altered your code to that given in the answer . Did you do that? Oh and you didn&#39;t answer the question about typing"},{"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1665782626,"post_id":74056128,"comment_id":130787011,"body_markdown":"@Numix when compiling, `javac -encoding UTF-8`.","body":"@Numix when compiling, <code>javac -encoding UTF-8</code>."}],"tags":[],"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":15,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665671012,"creation_date":1665665621,"answer_id":74056128,"question_id":74055930,"body_markdown":"Using JDK17+ I assume?\r\n\r\n&gt; `Scanner sc = new Scanner(System.in, StandardCharsets.UTF_8);`\r\n\r\nRight idea, wrong direction. Java defaults to UTF_8 for everything since JDK17 or so, and your OS is _not_ UTF_8. You want your OS-native encoding.\r\n\r\nJava is oriented towards platform independent, reliable (as in, runs the same way on all platforms) code. In contrast to e.g. python which is much more oriented towards command line scripty stuff (so, unlock OS-specific takes and systems, which in tradeoff means it&#39;s less reliable, in the sense that python code runs differently on different platforms).\r\n\r\nCharset default behaviour is part of that. There are advantages and disadvantages to defaulting everything to UTF-8, and there are advantages and disadvantages to defaulting to OS-native default.\r\n\r\nSee [this CSR](https://bugs.openjdk.org/browse/JDK-8266075) for more info.\r\n\r\nYou want this somewhat convoluted mess:\r\n\r\n```java\r\nCharset nativeCharset = Charset.forName(System.getProperty(&quot;native.encoding&quot;, Charset.defaultCharset().name()));\r\n\r\nScanner sc = new Scanner(System.in, nativeCharset);\r\n```\r\n\r\nRemind me to ask the java team to make this less shit. `Charset.nativeEncoding()` would be nice.\r\n\r\n----\r\n\r\nSo why _does_ it work inside your IDE? Simple, because that IDE&#39;s mini-console window thing _is_ configured in UTF-8 even if your OS is not.","title":"Letters with accents input problem on the jar (with cmd / powershell) but not on the IDE","body":"<p>Using JDK17+ I assume?</p>\n<blockquote>\n<p><code>Scanner sc = new Scanner(System.in, StandardCharsets.UTF_8);</code></p>\n</blockquote>\n<p>Right idea, wrong direction. Java defaults to UTF_8 for everything since JDK17 or so, and your OS is <em>not</em> UTF_8. You want your OS-native encoding.</p>\n<p>Java is oriented towards platform independent, reliable (as in, runs the same way on all platforms) code. In contrast to e.g. python which is much more oriented towards command line scripty stuff (so, unlock OS-specific takes and systems, which in tradeoff means it's less reliable, in the sense that python code runs differently on different platforms).</p>\n<p>Charset default behaviour is part of that. There are advantages and disadvantages to defaulting everything to UTF-8, and there are advantages and disadvantages to defaulting to OS-native default.</p>\n<p>See <a href=\"https://bugs.openjdk.org/browse/JDK-8266075\" rel=\"nofollow noreferrer\">this CSR</a> for more info.</p>\n<p>You want this somewhat convoluted mess:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Charset nativeCharset = Charset.forName(System.getProperty(&quot;native.encoding&quot;, Charset.defaultCharset().name()));\n\nScanner sc = new Scanner(System.in, nativeCharset);\n</code></pre>\n<p>Remind me to ask the java team to make this less shit. <code>Charset.nativeEncoding()</code> would be nice.</p>\n<hr />\n<p>So why <em>does</em> it work inside your IDE? Simple, because that IDE's mini-console window thing <em>is</em> configured in UTF-8 even if your OS is not.</p>\n"}],"owner":{"account_id":26610720,"reputation":1,"user_id":20230955,"display_name":"Numix"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665671012,"creation_date":1665664708,"question_id":74055930,"body_markdown":"I was working on one of my projects and I realise that when I built it, the program&#39;s behaviour was not the same in cmd/powershell than in the IDE console.\r\n\r\nThe problem is about the letters with accents. For example :\r\n```java\r\npublic static void main(String[] args){\r\n        Scanner sc = new Scanner(System.in);\r\n        String test = sc.nextLine();\r\n        System.out.println(test);\r\n    }\r\n```\r\n\r\nThis code in the IDE do this : \r\nmy input : a&#233;&#233;&#233;a\r\nIDE output (the print) : a&#233;&#233;&#233;a\r\n\r\nBUT, when I build the jar, execute it and type exactly the same input I got this output \r\n: a___a  (because starkoverflow doesn&#39;t allow several spaces that follow each other I wrote &quot;_&quot; but it is space, so in reality &#233;&#233; is two space characters).\r\n\r\nSo as you can see, it replace the &quot;&#233;&quot; by space.\r\nTherefore I tried a lot of character like &amp;&quot;&#39;()-&#232;_&#231;&#224;&#234; and only the letters with accents don&#39;t work (&#233;&#232;&#224;&#234;). I remind you that everything works well in the IDE console.\r\n\r\nTrying to solve this problem I tested thing like that : \r\n```java\r\nScanner sc = new Scanner(System.in, StandardCharsets.UTF_8);\r\n```\r\nBut still doesn&#39;t work on the built jar...\r\n\r\nConsequently, I decided to do the same thing in Python to find out if the problem was with my OS or cmd/powershell.\r\n\r\n```python\r\nprint(&#39;input: &#39;)\r\nx = input()\r\nprint(&#39;-&gt; &#39; + x)\r\n```\r\nIt turns out that this code works perfectly, when I input : a&#233;&#233;&#233;a, I got a&#233;&#233;&#233;a in the cmd.\r\n\r\nCan someone have an explanation for this ?? I am lost and I don&#39;t know how to do to fix this...","title":"Letters with accents input problem on the jar (with cmd / powershell) but not on the IDE","body":"<p>I was working on one of my projects and I realise that when I built it, the program's behaviour was not the same in cmd/powershell than in the IDE console.</p>\n<p>The problem is about the letters with accents. For example :</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args){\n        Scanner sc = new Scanner(System.in);\n        String test = sc.nextLine();\n        System.out.println(test);\n    }\n</code></pre>\n<p>This code in the IDE do this :\nmy input : aéééa\nIDE output (the print) : aéééa</p>\n<p>BUT, when I build the jar, execute it and type exactly the same input I got this output\n: a___a  (because starkoverflow doesn't allow several spaces that follow each other I wrote &quot;_&quot; but it is space, so in reality éé is two space characters).</p>\n<p>So as you can see, it replace the &quot;é&quot; by space.\nTherefore I tried a lot of character like &amp;&quot;'()-è_çàê and only the letters with accents don't work (éèàê). I remind you that everything works well in the IDE console.</p>\n<p>Trying to solve this problem I tested thing like that :</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner sc = new Scanner(System.in, StandardCharsets.UTF_8);\n</code></pre>\n<p>But still doesn't work on the built jar...</p>\n<p>Consequently, I decided to do the same thing in Python to find out if the problem was with my OS or cmd/powershell.</p>\n<pre class=\"lang-py prettyprint-override\"><code>print('input: ')\nx = input()\nprint('-&gt; ' + x)\n</code></pre>\n<p>It turns out that this code works perfectly, when I input : aéééa, I got aéééa in the cmd.</p>\n<p>Can someone have an explanation for this ?? I am lost and I don't know how to do to fix this...</p>\n"},{"tags":["java","salesforce"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1665671320,"post_id":74057317,"comment_id":130758146,"body_markdown":"Java array indices are zero-based. A valid array index has a value from zero to **n - 1**, where **n** is the number of elements in the array. An empty array, i.e., one with no elements, cannot be indexed.","body":"Java array indices are zero-based. A valid array index has a value from zero to <b>n - 1</b>, where <b>n</b> is the number of elements in the array. An empty array, i.e., one with no elements, cannot be indexed."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1665671629,"post_id":74057317,"comment_id":130758253,"body_markdown":"`credential.username.split(&quot;(?&lt;=com\\\\.)\\\\.*&quot;)` returned an array of one element. To index that element, use [0] for the index. Debugging suggestion: Just before the line with the call to `split`, add this line: `System.out.println (&quot;Split result: &quot; + Arrays.toString (credential.username.split(&quot;(?&lt;=com\\\\.)\\\\.*&quot;));`","body":"<code>credential.username.split(&quot;(?&lt;=com\\\\.)\\\\.*&quot;)</code> returned an array of one element. To index that element, use [0] for the index. Debugging suggestion: Just before the line with the call to <code>split</code>, add this line: <code>System.out.println (&quot;Split result: &quot; + Arrays.toString (credential.username.split(&quot;(?&lt;=com\\\\.)\\\\.*&quot;));</code>"}],"owner":{"account_id":26141055,"reputation":11,"user_id":20045242,"display_name":"victors"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1665670824,"answer_count":0,"score":0,"last_activity_date":1665670616,"creation_date":1665670616,"question_id":74057317,"body_markdown":"Trying to understand how Array out of bounds errors work. I&#39;m running into the following error \r\n&quot;Caused by: java.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds for length 1\r\nat Utilities.CredentialParser.getEnvironmentCredentials(CredentialParser.java:26)&quot;\r\n\r\nthis is the credential parser method \r\n\r\n    public Credential getEnvironmentCredentials(SalesforceEnvironment salesforceEnvironment){\r\n\r\n        List&lt;Credential&gt; credentials = readCredentialsJson(&quot;Salesforce&quot;);\r\n\r\n        Credential testedCredential = null;\r\n\r\n        for(Credential credential : credentials){\r\n            String credentialEnvironment = credential.username.split(&quot;(?&lt;=com\\\\.)\\\\.*&quot;)[1];\r\n            if(credentialEnvironment.equalsIgnoreCase(salesforceEnvironment.toString())){\r\n                testedCredential = credential;\r\n                break;\r\n            }\r\n        }\r\n        return Objects.requireNonNull(testedCredential);\r\n    }","title":"question on ArrayOutOfBoundsException error","body":"<p>Trying to understand how Array out of bounds errors work. I'm running into the following error\n&quot;Caused by: java.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds for length 1\nat Utilities.CredentialParser.getEnvironmentCredentials(CredentialParser.java:26)&quot;</p>\n<p>this is the credential parser method</p>\n<pre><code>public Credential getEnvironmentCredentials(SalesforceEnvironment salesforceEnvironment){\n\n    List&lt;Credential&gt; credentials = readCredentialsJson(&quot;Salesforce&quot;);\n\n    Credential testedCredential = null;\n\n    for(Credential credential : credentials){\n        String credentialEnvironment = credential.username.split(&quot;(?&lt;=com\\\\.)\\\\.*&quot;)[1];\n        if(credentialEnvironment.equalsIgnoreCase(salesforceEnvironment.toString())){\n            testedCredential = credential;\n            break;\n        }\n    }\n    return Objects.requireNonNull(testedCredential);\n}\n</code></pre>\n"},{"tags":["java","kotlin","url","jackson","uuid"],"comments":[{"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"score":0,"creation_date":1665743840,"post_id":74057263,"comment_id":130774745,"body_markdown":"Welcome to Stack Overflow. Never used , but there is [UUIDDeserializer](http://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/deser/std/UUIDDeserializer.html) , have you tried to use it ?","body":"Welcome to Stack Overflow. Never used , but there is <a href=\"http://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/deser/std/UUIDDeserializer.html\" rel=\"nofollow noreferrer\">UUIDDeserializer</a> , have you tried to use it ?"},{"owner":{"account_id":10485831,"reputation":1,"user_id":7729413,"display_name":"Salvador Bascunan"},"score":0,"creation_date":1665777966,"post_id":74057263,"comment_id":130785921,"body_markdown":"Thank you @dariosicily. We will look into this possibility further. Thanks for the suggestion.","body":"Thank you @dariosicily. We will look into this possibility further. Thanks for the suggestion."}],"owner":{"account_id":10485831,"reputation":1,"user_id":7729413,"display_name":"Salvador Bascunan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665670423,"creation_date":1665670423,"question_id":74057263,"body_markdown":"Not able to use UUID in the url path on request. In my company we are creating a new REST API and have encountered an issue with how to represent our UUID PK&#39;s in the url path. \r\n\r\nWe are using Kotlin with Jackson as the serializer. Running a test with the UUID in the url path gives the exception:\r\n\r\n```powershell\r\nText: &quot;{&quot;message&quot;:&quot;com.fasterxml.jackson.core.JsonParseException: \r\nInvalid numeric value: Leading zeroes not allowed\\n at [Source:\r\n(ByteArrayInputStream); line: 1, column: 2]&quot;\r\n```\r\n\r\nWe have tried configuring Jackson to allow leading zeros for number with:\r\n\r\n```kotlin\r\nfun objectMapper(): ObjectMapper = ObjectMapper()\r\n        .enable(JsonReadFeature.ALLOW_LEADING_ZEROS_FOR_NUMBERS.mappedFeature())\r\n        .registerModule(KotlinModule())\r\n```\r\n\r\nThis resolves the jsonparseexception mentioned above, but introduces a new one when re-running the test:\r\n\r\n```powershell\r\nText: &quot;{&quot;message&quot;:&quot;com.fasterxml.jackson.core.JsonParseException: \r\nUnexpected character (&#39;-&#39; (code 45)): Expected space separating root-level \r\nvalues\\n at [Source: (ByteArrayInputStream); line: 1, column: 10]&quot;\r\n```\r\n\r\nOur workaround as of this moment is to wrap the UUID in quotations, i.e:\r\n\r\n```bash\r\nendpoint/&quot;uuid&quot;\r\n```\r\n\r\nQuestions:\r\n\r\n- Is our current solution with quotations considered best practice?\r\n- And if that is the case, is there a configuration that can handle this?","title":"Best practice on UUID in url path request - JsonParseException Jackson","body":"<p>Not able to use UUID in the url path on request. In my company we are creating a new REST API and have encountered an issue with how to represent our UUID PK's in the url path.</p>\n<p>We are using Kotlin with Jackson as the serializer. Running a test with the UUID in the url path gives the exception:</p>\n<pre><code>Text: &quot;{&quot;message&quot;:&quot;com.fasterxml.jackson.core.JsonParseException: \nInvalid numeric value: Leading zeroes not allowed\\n at [Source:\n(ByteArrayInputStream); line: 1, column: 2]&quot;\n</code></pre>\n<p>We have tried configuring Jackson to allow leading zeros for number with:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun objectMapper(): ObjectMapper = ObjectMapper()\n        .enable(JsonReadFeature.ALLOW_LEADING_ZEROS_FOR_NUMBERS.mappedFeature())\n        .registerModule(KotlinModule())\n</code></pre>\n<p>This resolves the jsonparseexception mentioned above, but introduces a new one when re-running the test:</p>\n<pre><code>Text: &quot;{&quot;message&quot;:&quot;com.fasterxml.jackson.core.JsonParseException: \nUnexpected character ('-' (code 45)): Expected space separating root-level \nvalues\\n at [Source: (ByteArrayInputStream); line: 1, column: 10]&quot;\n</code></pre>\n<p>Our workaround as of this moment is to wrap the UUID in quotations, i.e:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>endpoint/&quot;uuid&quot;\n</code></pre>\n<p>Questions:</p>\n<ul>\n<li>Is our current solution with quotations considered best practice?</li>\n<li>And if that is the case, is there a configuration that can handle this?</li>\n</ul>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":1,"creation_date":1665228172,"post_id":73996503,"comment_id":130653537,"body_markdown":"Your code relies on some REST framework to perform serialization and parsing to map your Customer class to the bytes actually transmitted over the wire. So if that framework behaves wrongly, consider to help it using a custom serializer/deserializer. How that looks in detail depends on your framework. The only other chance I see is to make the double field transient and introduce a string field that you prepopulate with the desired value.","body":"Your code relies on some REST framework to perform serialization and parsing to map your Customer class to the bytes actually transmitted over the wire. So if that framework behaves wrongly, consider to help it using a custom serializer/deserializer. How that looks in detail depends on your framework. The only other chance I see is to make the double field transient and introduce a string field that you prepopulate with the desired value."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1665228423,"post_id":73996503,"comment_id":130653567,"body_markdown":"1. Hi &amp; Welcome to [so]! 2. I would not &quot;expose db model via web&quot;, if i don&#39;t had to/just for the quick start...https://stackoverflow.com/q/30549489/592355","body":"1. Hi &amp; Welcome to <a href=\"https://stackoverflow.com\">Stack Overflow</a>! 2. I would not &quot;expose db model via web&quot;, if i don&#39;t had to/just for the quick start...<a href=\"https://stackoverflow.com/q/30549489/592355\">stackoverflow.com/q/30549489/592355</a>"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1665228569,"post_id":73996503,"comment_id":130653583,"body_markdown":"(2.) So better to return a `CustomerDto` (on which you can perform transformation(rounding)..a.s.o.)","body":"(2.) So better to return a <code>CustomerDto</code> (on which you can perform transformation(rounding)..a.s.o.)"},{"owner":{"account_id":2509955,"reputation":321,"user_id":2182677,"display_name":"sandeep kale"},"score":0,"creation_date":1665669736,"post_id":73996503,"comment_id":130757547,"body_markdown":"@xerx593, Yes agree with your design improvement. Having VO and DTO separate is the safe and correct way.","body":"@xerx593, Yes agree with your design improvement. Having VO and DTO separate is the safe and correct way."}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665229375,"creation_date":1665228996,"answer_id":73996668,"question_id":73996503,"body_markdown":"You obtain a *half up* ceiling of a `double` value, you can use standard utility method [`Math.ceil()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Math.html):\r\n\r\n```\r\nMath.ceil(balanceAmount * 2) / 2\r\n```\r\n*Example:*\r\n```\r\nSystem.out.println(Math.ceil(120.1 * 2) / 2);\r\nSystem.out.println(Math.ceil(120.9 * 2) / 2);\r\nSystem.out.println(Math.ceil(120 * 2) / 2);\r\n```\r\n*Output:*\r\n```\r\n120.5\r\n121.0\r\n120.0\r\n```\r\n**Note:** because you can lose precision while performing calculations with `doable` it highly advisable to [`BigDecimal`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/math/BigDecimal.html) to represent prices, taxes, etc. in your domain entities.","title":"Formatting a double property of POJO in Java REST response","body":"<p>You obtain a <em>half up</em> ceiling of a <code>double</code> value, you can use standard utility method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Math.html\" rel=\"nofollow noreferrer\"><code>Math.ceil()</code></a>:</p>\n<pre><code>Math.ceil(balanceAmount * 2) / 2\n</code></pre>\n<p><em>Example:</em></p>\n<pre><code>System.out.println(Math.ceil(120.1 * 2) / 2);\nSystem.out.println(Math.ceil(120.9 * 2) / 2);\nSystem.out.println(Math.ceil(120 * 2) / 2);\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>120.5\n121.0\n120.0\n</code></pre>\n<p><strong>Note:</strong> because you can lose precision while performing calculations with <code>doable</code> it highly advisable to <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\"><code>BigDecimal</code></a> to represent prices, taxes, etc. in your domain entities.</p>\n"},{"tags":[],"owner":{"account_id":2509955,"reputation":321,"user_id":2182677,"display_name":"sandeep kale"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665670296,"creation_date":1665670296,"answer_id":74057225,"question_id":73996503,"body_markdown":"Ideally, a value object and data transfer object should not be the same and it may result in the exposure of database structure as suggested by @xerx593.\r\nHowever, my service is already deployed and it&#39;s accessed by our services only and not by a public service/application. So, I am not authorized to create a separate DTO for this.\r\n\r\nI used a simple JsonDeserializer to solve this issue.\r\n\r\nI modified my POJO as:\r\n    import com.fasterxml.jackson.databind.annotation.JsonSerialize;\r\n\r\n    class Customer {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE)\r\n        @Column(name = &quot;oid&quot;, nullable = false, updatable = false)\r\n        private Long oid;\r\n\r\n        @Column(name = &quot;balanceAmount&quot;, length = 100)\r\n        @JsonSerialize(using = DecimalJsonSerializer.class) //***New Line***\r\n        private Double balanceAmount;\r\n    }\r\n\r\nAnd my **deserializer** class is:\r\n\r\n    public class DecimalJsonSerializer extends JsonSerializer&lt;Double&gt; {\r\n    @Override\r\n        public void serialize(Double value, JsonGenerator jgen, SerializerProvider provider)\r\n                throws IOException {\r\n            jgen.writeNumber(String.format(&quot;%.2f&quot;, value));\r\n        }\r\n    }\r\n\r\nI hope this will help someone who wants to display a number, date or other data types in a customized format.\r\n\r\n","title":"Formatting a double property of POJO in Java REST response","body":"<p>Ideally, a value object and data transfer object should not be the same and it may result in the exposure of database structure as suggested by @xerx593.\nHowever, my service is already deployed and it's accessed by our services only and not by a public service/application. So, I am not authorized to create a separate DTO for this.</p>\n<p>I used a simple JsonDeserializer to solve this issue.</p>\n<p>I modified my POJO as:\nimport com.fasterxml.jackson.databind.annotation.JsonSerialize;</p>\n<pre><code>class Customer {\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\n    @Column(name = &quot;oid&quot;, nullable = false, updatable = false)\n    private Long oid;\n\n    @Column(name = &quot;balanceAmount&quot;, length = 100)\n    @JsonSerialize(using = DecimalJsonSerializer.class) //***New Line***\n    private Double balanceAmount;\n}\n</code></pre>\n<p>And my <strong>deserializer</strong> class is:</p>\n<pre><code>public class DecimalJsonSerializer extends JsonSerializer&lt;Double&gt; {\n@Override\n    public void serialize(Double value, JsonGenerator jgen, SerializerProvider provider)\n            throws IOException {\n        jgen.writeNumber(String.format(&quot;%.2f&quot;, value));\n    }\n}\n</code></pre>\n<p>I hope this will help someone who wants to display a number, date or other data types in a customized format.</p>\n"}],"owner":{"account_id":2509955,"reputation":321,"user_id":2182677,"display_name":"sandeep kale"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":416,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1665670296,"creation_date":1665227460,"question_id":73996503,"body_markdown":"I am writing a rest API. This has to return my object on GET method.\r\n\r\nNow, when I request postman, I can get the balanceAmount:120.5.\r\nHowever, my requirement is to return the REST response with the field balanceAmount:121.00.\r\nKind of number formatting and rounding up to the next 50.\r\n\r\n*Sample input-output:*\r\n```\r\n120.1 =&gt; 120.50         \r\n120.9 =&gt; 121.00\r\n120   =&gt; 120.00\r\n```\r\n\r\nI have to use the amount as double and I cannot make it as a string.\r\nThe database table has the column type as Numeric(10,2).\r\nI am using spring boot 2.6.x and Java 11.\r\n\r\nPlease suggest an easier way to format such fields.\r\n\r\n\r\nMy POJO is similar to:\r\n\r\n    class Customer {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE)\r\n        @Column(name = &quot;oid&quot;, nullable = false, updatable = false)\r\n        private Long oid;\r\n        @Column(name = &quot;balanceAmount&quot;, length = 100)\r\n        private Double balanceAmount;\r\n    }\r\n\r\nController:\r\n      \r\n    @RestController\r\n    @RequestMapping(&quot;/customer&quot;)\r\n    class CustomerService {    \r\n        @GetMapping(&quot;/oid/{oid}&quot;)   \r\n        public Customer getCustomer(@PathVariable(&quot;oid&quot;) String oid) { \r\n            if (log.isDebugEnabled()) {\r\n                log.debug(&quot;oid{} &quot;, oid);\r\n            }\r\n            return new Customer(oid, 120.5);\r\n        }\r\n    }\r\n","title":"Formatting a double property of POJO in Java REST response","body":"<p>I am writing a rest API. This has to return my object on GET method.</p>\n<p>Now, when I request postman, I can get the balanceAmount:120.5.\nHowever, my requirement is to return the REST response with the field balanceAmount:121.00.\nKind of number formatting and rounding up to the next 50.</p>\n<p><em>Sample input-output:</em></p>\n<pre><code>120.1 =&gt; 120.50         \n120.9 =&gt; 121.00\n120   =&gt; 120.00\n</code></pre>\n<p>I have to use the amount as double and I cannot make it as a string.\nThe database table has the column type as Numeric(10,2).\nI am using spring boot 2.6.x and Java 11.</p>\n<p>Please suggest an easier way to format such fields.</p>\n<p>My POJO is similar to:</p>\n<pre><code>class Customer {\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\n    @Column(name = &quot;oid&quot;, nullable = false, updatable = false)\n    private Long oid;\n    @Column(name = &quot;balanceAmount&quot;, length = 100)\n    private Double balanceAmount;\n}\n</code></pre>\n<p>Controller:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/customer&quot;)\nclass CustomerService {    \n    @GetMapping(&quot;/oid/{oid}&quot;)   \n    public Customer getCustomer(@PathVariable(&quot;oid&quot;) String oid) { \n        if (log.isDebugEnabled()) {\n            log.debug(&quot;oid{} &quot;, oid);\n        }\n        return new Customer(oid, 120.5);\n    }\n}\n</code></pre>\n"},{"tags":["java","android","android-recyclerview","countdowntimer"],"comments":[{"owner":{"account_id":16445373,"reputation":613,"user_id":11880323,"display_name":"cmak"},"score":0,"creation_date":1665317254,"post_id":74004565,"comment_id":130667240,"body_markdown":"First, make sure to override `getItemId(...)`, `getItemCount(...)` and `getItemType(...)` properly","body":"First, make sure to override <code>getItemId(...)</code>, <code>getItemCount(...)</code> and <code>getItemType(...)</code> properly"},{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":0,"creation_date":1665320102,"post_id":74004565,"comment_id":130667745,"body_markdown":"Is `updateTimeRemaining` called from anywhere else besides what is shown in the post?","body":"Is <code>updateTimeRemaining</code> called from anywhere else besides what is shown in the post?"},{"owner":{"account_id":24505325,"reputation":1,"user_id":18420435,"display_name":"ryan kun"},"score":0,"creation_date":1665401651,"post_id":74004565,"comment_id":130684244,"body_markdown":"@Gardener No it&#39;s only called in myviewholder.","body":"@Gardener No it&#39;s only called in myviewholder."},{"owner":{"account_id":24505325,"reputation":1,"user_id":18420435,"display_name":"ryan kun"},"score":0,"creation_date":1665401999,"post_id":74004565,"comment_id":130684357,"body_markdown":"@cmak yes overrided properly .","body":"@cmak yes overrided properly ."},{"owner":{"account_id":8373673,"reputation":61868,"user_id":6287910,"display_name":"Cheticamp"},"score":0,"creation_date":1665407532,"post_id":74004565,"comment_id":130686327,"body_markdown":"Check how many timers you have going at once. You may have more running than you think. I don&#39;t see where a timer is cancelled if its view holder is recycled.","body":"Check how many timers you have going at once. You may have more running than you think. I don&#39;t see where a timer is cancelled if its view holder is recycled."},{"owner":{"account_id":24505325,"reputation":1,"user_id":18420435,"display_name":"ryan kun"},"score":0,"creation_date":1665409878,"post_id":74004565,"comment_id":130687176,"body_markdown":"@Cheticamp i think that can be problem how can i cancle it.","body":"@Cheticamp i think that can be problem how can i cancle it."},{"owner":{"account_id":24505325,"reputation":1,"user_id":18420435,"display_name":"ryan kun"},"score":0,"creation_date":1665411903,"post_id":74004565,"comment_id":130687970,"body_markdown":"@Cheticamp you are right it&#39;s creating multiple timer and not canceling it. How about just create single timer and use it to change textview. is it possible?","body":"@Cheticamp you are right it&#39;s creating multiple timer and not canceling it. How about just create single timer and use it to change textview. is it possible?"},{"owner":{"account_id":8373673,"reputation":61868,"user_id":6287910,"display_name":"Cheticamp"},"score":0,"creation_date":1665429607,"post_id":74004565,"comment_id":130693946,"body_markdown":"You will need to explain a little more about what you are trying to do. Is there just one time that needs to be displayed? When does the timer start/restart?","body":"You will need to explain a little more about what you are trying to do. Is there just one time that needs to be displayed? When does the timer start/restart?"},{"owner":{"account_id":16445373,"reputation":613,"user_id":11880323,"display_name":"cmak"},"score":0,"creation_date":1665446543,"post_id":74004565,"comment_id":130697701,"body_markdown":"@ryankun please, show how you do it","body":"@ryankun please, show how you do it"},{"owner":{"account_id":24505325,"reputation":1,"user_id":18420435,"display_name":"ryan kun"},"score":0,"creation_date":1665475725,"post_id":74004565,"comment_id":130702983,"body_markdown":"@Cheticamp No , it&#39;s multiple time in recyclerview but i am trying to do like this https://stackoverflow.com/a/66405963/18420435 single countdowntimer.","body":"@Cheticamp No , it&#39;s multiple time in recyclerview but i am trying to do like this <a href=\"https://stackoverflow.com/a/66405963/18420435\">stackoverflow.com/a/66405963/18420435</a> single countdowntimer."},{"owner":{"account_id":24505325,"reputation":1,"user_id":18420435,"display_name":"ryan kun"},"score":0,"creation_date":1665476049,"post_id":74004565,"comment_id":130703083,"body_markdown":"@cmak I already updated full recyclerview adapter in question.","body":"@cmak I already updated full recyclerview adapter in question."},{"owner":{"account_id":8373673,"reputation":61868,"user_id":6287910,"display_name":"Cheticamp"},"score":0,"creation_date":1665494431,"post_id":74004565,"comment_id":130709905,"body_markdown":"So, display the same timer for each item shown in the _RecyclerView. In short, let&#39;s say you have 10 items showing. You want to show the same value for the timer in each of the 10 items. Is that correct?","body":"So, display the same timer for each item shown in the _RecyclerView. In short, let&#39;s say you have 10 items showing. You want to show the same value for the timer in each of the 10 items. Is that correct?"},{"owner":{"account_id":24505325,"reputation":1,"user_id":18420435,"display_name":"ryan kun"},"score":0,"creation_date":1665498874,"post_id":74004565,"comment_id":130711957,"body_markdown":"@Cheticamp NO not same value diffrent values but single countdowntimer with in ontick notifyItemchange this only method is left which i have not tried. I am adding image in question.","body":"@Cheticamp NO not same value diffrent values but single countdowntimer with in ontick notifyItemchange this only method is left which i have not tried. I am adding image in question."}],"answers":[{"comments":[{"owner":{"account_id":24505325,"reputation":1,"user_id":18420435,"display_name":"ryan kun"},"score":1,"creation_date":1665504572,"post_id":74030356,"comment_id":130714084,"body_markdown":"ok thank you very much i will try , but do you think it is going to lag. I mean my main problem is lag which i think becuase of creating mulitple timer at same time. maybe other things can be a problem. Beacause runnable mehtod also make lags.","body":"ok thank you very much i will try , but do you think it is going to lag. I mean my main problem is lag which i think becuase of creating mulitple timer at same time. maybe other things can be a problem. Beacause runnable mehtod also make lags."},{"owner":{"account_id":24505325,"reputation":1,"user_id":18420435,"display_name":"ryan kun"},"score":0,"creation_date":1665579299,"post_id":74030356,"comment_id":130733399,"body_markdown":"yah i am right, multiple timer is not a problem it&#39;s also lag in single timer.","body":"yah i am right, multiple timer is not a problem it&#39;s also lag in single timer."},{"owner":{"account_id":8373673,"reputation":61868,"user_id":6287910,"display_name":"Cheticamp"},"score":0,"creation_date":1665581785,"post_id":74030356,"comment_id":130734539,"body_markdown":"Try the partial layout code I posted. If that doesn&#39;t help, you may need to inhibit timer updates during scroll.","body":"Try the partial layout code I posted. If that doesn&#39;t help, you may need to inhibit timer updates during scroll."},{"owner":{"account_id":8373673,"reputation":61868,"user_id":6287910,"display_name":"Cheticamp"},"score":0,"creation_date":1665588132,"post_id":74030356,"comment_id":130737246,"body_markdown":"If you aren&#39;t already, you may want to [measure performance](https://developer.android.com/topic/performance/measuring-performance) of your app to isolate the issue.","body":"If you aren&#39;t already, you may want to <a href=\"https://developer.android.com/topic/performance/measuring-performance\" rel=\"nofollow noreferrer\">measure performance</a> of your app to isolate the issue."},{"owner":{"account_id":24505325,"reputation":1,"user_id":18420435,"display_name":"ryan kun"},"score":0,"creation_date":1665588514,"post_id":74030356,"comment_id":130737392,"body_markdown":"minor lag when scroll slowly , no lag on fast scroll. single timer improved performance.i already measured it attaching screenshot","body":"minor lag when scroll slowly , no lag on fast scroll. single timer improved performance.i already measured it attaching screenshot"},{"owner":{"account_id":24505325,"reputation":1,"user_id":18420435,"display_name":"ryan kun"},"score":0,"creation_date":1665602159,"post_id":74030356,"comment_id":130741913,"body_markdown":"image attached in qusetion","body":"image attached in qusetion"},{"owner":{"account_id":24505325,"reputation":1,"user_id":18420435,"display_name":"ryan kun"},"score":0,"creation_date":1665604175,"post_id":74030356,"comment_id":130742463,"body_markdown":"sorry bro its not textview which causing lag its actually single timer sorry for misleading you. i will try partial layout code and inform you. &quot;I/Choreographer: Skipped 1 frames!  The application may be doing too much work on its main thread.&quot; this log came in every second.","body":"sorry bro its not textview which causing lag its actually single timer sorry for misleading you. i will try partial layout code and inform you. &quot;I/Choreographer: Skipped 1 frames!  The application may be doing too much work on its main thread.&quot; this log came in every second."},{"owner":{"account_id":24505325,"reputation":1,"user_id":18420435,"display_name":"ryan kun"},"score":0,"creation_date":1665605959,"post_id":74030356,"comment_id":130742969,"body_markdown":"ok i tried your code same thing skipping frames every second.","body":"ok i tried your code same thing skipping frames every second."},{"owner":{"account_id":24505325,"reputation":1,"user_id":18420435,"display_name":"ryan kun"},"score":0,"creation_date":1665607657,"post_id":74030356,"comment_id":130743381,"body_markdown":"I think because of notifyitemrange change or notifyitemchange.","body":"I think because of notifyitemrange change or notifyitemchange."},{"owner":{"account_id":8373673,"reputation":61868,"user_id":6287910,"display_name":"Cheticamp"},"score":0,"creation_date":1665621795,"post_id":74030356,"comment_id":130745669,"body_markdown":"Those calls are causing the data to change (new times) and, probably, causing a new layout of all visible view holders and a few that are not visible according to the rules of _RecyclerView_.","body":"Those calls are causing the data to change (new times) and, probably, causing a new layout of all visible view holders and a few that are not visible according to the rules of <i>RecyclerView</i>."},{"owner":{"account_id":24505325,"reputation":1,"user_id":18420435,"display_name":"ryan kun"},"score":0,"creation_date":1665652341,"post_id":74030356,"comment_id":130751668,"body_markdown":"so, what should i do if i remove notifyitemchange line it works fine.","body":"so, what should i do if i remove notifyitemchange line it works fine."},{"owner":{"account_id":8373673,"reputation":61868,"user_id":6287910,"display_name":"Cheticamp"},"score":0,"creation_date":1665666576,"post_id":74030356,"comment_id":130756397,"body_markdown":"I took a closer look at your code and you are updating the time for all event in your backing array. You only need to change those events that are displayed. Take another look at my answer code on how to do that.  That is one area for improvement. You took out `notifyItemChanged()` - I am wondering if displayed times still update when you are not scrolling?","body":"I took a closer look at your code and you are updating the time for all event in your backing array. You only need to change those events that are displayed. Take another look at my answer code on how to do that.  That is one area for improvement. You took out <code>notifyItemChanged()</code> - I am wondering if displayed times still update when you are not scrolling?"},{"owner":{"account_id":24505325,"reputation":1,"user_id":18420435,"display_name":"ryan kun"},"score":0,"creation_date":1665730429,"post_id":74030356,"comment_id":130770852,"body_markdown":"No, its not updating displayed time i just testing timer is the reason for frame skipping. No timer is not notifyitemchange is the reason.","body":"No, its not updating displayed time i just testing timer is the reason for frame skipping. No timer is not notifyitemchange is the reason."}],"tags":[],"owner":{"account_id":8373673,"reputation":61868,"user_id":6287910,"display_name":"Cheticamp"},"comment_count":13,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665587609,"creation_date":1665501167,"answer_id":74030356,"question_id":74004565,"body_markdown":"So, it looks like you want to update a set of text views to display the time remaining until a number of events start. All the event start times will differ. You could set up a separate timer for each event, but you can also set up a timer that goes off every second to make the text view updates.\r\n\r\nTake a look at [this question/answer](https://stackoverflow.com/questions/4597690/how-to-set-timer-in-android) for ways to set up a timer.\r\n\r\nOnce you have the timer going, you will be able to grab the current time and calculate the time remaining until each event. You will want to save the start time associated with each event in a backing array for the _RecyclerView_ but you could also store the start time in the view holder for each displayed event. Either way, you will need access to the event start time in the view holder binding code. \r\n\r\nNow you will have the current time (from the timer code) and the event start time (from the backing array or just stored in the view holder), so you can compute how much time remains until the start of each event. This code can be in the adapter.\r\n\r\nNow the question comes down to how to actually perform the update to the text views that are displayed that hold the time remaining? This code can be also be in the adapter. To find which events are currently displayed, use [LinearLayoutManager#findFirstVisibleItemPosition()](https://developer.android.com/reference/androidx/recyclerview/widget/LinearLayoutManager#findFirstVisibleItemPosition()) and for the last visible position use [LinearLayoutManager#findLastVisibleItemPosition()](https://developer.android.com/reference/androidx/recyclerview/widget/LinearLayoutManager#findLastVisibleItemPosition()). These methods will give you the position range of the displayed _RecyclerVIew_ items. You can make changes to what is displayed with [RecyclerView.Adapter#notifyItemChanged(int)](https://developer.android.com/reference/androidx/recyclerview/widget/RecyclerView.Adapter#notifyItemChanged(int)) which will cause the view holder to be rebound. Since you will just be updating a single fields once an item is displayed, you may want to use [RecyclerView.Adapter#onBindViewHolder(VH,int,java.util.List%3Cjava.lang.Object%3E))](https://developer.android.com/reference/androidx/recyclerview/widget/RecyclerView.Adapter#onBindViewHolder(VH,int,java.util.List%3Cjava.lang.Object%3E)) for a partial rebind.\r\n\r\nSo, in short, you will capture the start time for each event. Once you have items displayed, you will start a timer that will go off periodically. On each tick, your code will identify all shown items and call `notifyItemChanged()` to make the changes. The view binder code will calculate the time left until the start of each event and update the appropriate text view.\r\n\r\n\r\n**Update:**\r\n\r\nEven with a single timer, you may see lagging scrolling because of the overhead of rebinding all the view holders with new data.\r\n\r\nHere is a sample _RecyclerView_ adapter that addresses that issue. The main features are that it \r\n\r\n1. Uses a runnable and a handler to do the timing of the updates. \r\n2. Does a partial binding on time updates instead of a complete rebind of the entire view holder. See `mTimerRunnable` and `public void onBindViewHolder(@NonNull RecyclerView.ViewHolder holder, int position, @NonNull List&lt;Object&gt; payloads)`.\r\n\r\nThis may be sufficient to stop the lag in the scrolling. If not, there is a switch `mUpdateTime` that can be set to `false` to inhibit timer updates while scrolling. You would use a [RecyclerView.OnScrollListener](https://developer.android.com/reference/androidx/recyclerview/widget/RecyclerView.OnScrollListener) to control this setting. In this callback, you might just inhibit updates while scrolling or inhibit updates when scrolling past a certain speed which you would have to calculate.\r\n\r\n\tclass RecyclerViewAdapter extends RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt; {\r\n\t    private RecyclerView mRecyclerView;\r\n\t    private final List&lt;Long&gt; mItems;\r\n\t    public boolean mUpdateTime;\r\n\r\n\t    Handler mTimerHandler = new Handler();\r\n\t    Runnable mTimerRunnable = new Runnable() {\r\n\t        @Override\r\n\t        public void run() {\r\n\t            if (mUpdateTime) {\r\n\t                if (mRecyclerView == null) {\r\n\t                    return;\r\n\t                }\r\n\t                LinearLayoutManager lm = (LinearLayoutManager) mRecyclerView.getLayoutManager();\r\n\t                if (lm == null) {\r\n\t                    return;\r\n\t                }\r\n\r\n\t                int firstPosition = lm.findFirstVisibleItemPosition();\r\n\t                int lastPosition = lm.findLastVisibleItemPosition();\r\n\t                Log.d(&quot;Applog&quot;, String.format(&quot;Range= %d - %d&quot;, firstPosition, lastPosition));\r\n\t                notifyItemRangeChanged(firstPosition, lastPosition - firstPosition + 1, System.currentTimeMillis());\r\n\t            }\r\n\t            mTimerHandler.postDelayed(this, 1000);\r\n\t        }\r\n\t    };\r\n\r\n\t    RecyclerViewAdapter(List&lt;Long&gt; items) {\r\n\t        mItems = items;\r\n\t        mUpdateTime = true;\r\n\t        // Start the timer.\r\n\t        mTimerHandler.post(mTimerRunnable);\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public @NonNull\r\n\t    RecyclerView.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n\t        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.row_message, parent, false);\r\n\t        return new ItemViewHolder(view);\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public void onBindViewHolder(@NonNull RecyclerView.ViewHolder holder, int position) {\r\n\t        ItemViewHolder vh = (ItemViewHolder) holder;\r\n\t        String itemText = getTimeLeft(System.currentTimeMillis(), mItems.get(position));\r\n\r\n\t        vh.mEventName.setText(&quot;Event#&quot; + position);\r\n\t        vh.mTimeToEvent.setText(itemText);\r\n\t        int bgColor = (position % 2 == 0) ? android.R.color.holo_blue_light : android.R.color.holo_green_light;\r\n\t        holder.itemView.setBackgroundColor(holder.itemView.getContext().getResources().getColor(bgColor));\r\n\t    }\r\n\r\n\t    // List&lt;Object&gt; has the current time as its zeroth element.\r\n\t    @Override\r\n\t    public void onBindViewHolder(@NonNull RecyclerView.ViewHolder holder, int position, @NonNull List&lt;Object&gt; payloads) {\r\n\t        if (payloads.size() == 0) {\r\n\t            Log.d(&quot;Applog&quot;, &quot;Full bind &quot; + position);\r\n\t            super.onBindViewHolder(holder, position, payloads);\r\n\t        } else {\r\n\t            Log.d(&quot;Applog&quot;, &quot;Partial bind &quot; + position);\r\n\t            ItemViewHolder vh = (ItemViewHolder) holder;\r\n\t            String itemText = getTimeLeft((Long) payloads.get(0), mItems.get(position));\r\n\t            vh.mTimeToEvent.setText(itemText);\r\n\t        }\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public int getItemCount() {\r\n\t        return (mItems == null) ? 0 : mItems.size();\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public int getItemViewType(int position) {\r\n\t        return TYPE_ITEM;\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public void onAttachedToRecyclerView(@NonNull RecyclerView recyclerView) {\r\n\t        super.onAttachedToRecyclerView(recyclerView);\r\n\t        mRecyclerView = recyclerView;\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public void onDetachedFromRecyclerView(@NonNull RecyclerView recyclerView) {\r\n\t        super.onDetachedFromRecyclerView(recyclerView);\r\n\t        mRecyclerView = null;\r\n\t    }\r\n\r\n\t    private String getTimeLeft(Long now, Long eventTime) {\r\n\t        long millisLeft = eventTime - now;\r\n\t        if (millisLeft &lt; 0) {\r\n\t            return &quot;00:00:00&quot;;\r\n\t        }\r\n\t        return String.format(&quot;%02d:%02d:%02d&quot;, TimeUnit.MILLISECONDS.toHours(millisLeft), TimeUnit.MILLISECONDS.toMinutes(millisLeft) - TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(millisLeft)),\r\n\t                TimeUnit.MILLISECONDS.toSeconds(millisLeft) - TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millisLeft)));\r\n\t    }\r\n\r\n\t    static class ItemViewHolder extends RecyclerView.ViewHolder {\r\n\t        private final TextView mEventName;\r\n\t        private final TextView mTimeToEvent;\r\n\r\n\t        ItemViewHolder(View item) {\r\n\t            super(item);\r\n\t            mEventName = item.findViewById(R.id.eventName);\r\n\t            mTimeToEvent = item.findViewById(R.id.timeRemaining);\r\n\t        }\r\n\t    }\r\n\r\n\t    private final static int TYPE_ITEM = 1;\r\n\t}\r\n\r\nI think your solution is here somewhere.","title":"multiple countdown timer in recyclerview lagging on scroll","body":"<p>So, it looks like you want to update a set of text views to display the time remaining until a number of events start. All the event start times will differ. You could set up a separate timer for each event, but you can also set up a timer that goes off every second to make the text view updates.</p>\n<p>Take a look at <a href=\"https://stackoverflow.com/questions/4597690/how-to-set-timer-in-android\">this question/answer</a> for ways to set up a timer.</p>\n<p>Once you have the timer going, you will be able to grab the current time and calculate the time remaining until each event. You will want to save the start time associated with each event in a backing array for the <em>RecyclerView</em> but you could also store the start time in the view holder for each displayed event. Either way, you will need access to the event start time in the view holder binding code.</p>\n<p>Now you will have the current time (from the timer code) and the event start time (from the backing array or just stored in the view holder), so you can compute how much time remains until the start of each event. This code can be in the adapter.</p>\n<p>Now the question comes down to how to actually perform the update to the text views that are displayed that hold the time remaining? This code can be also be in the adapter. To find which events are currently displayed, use <a href=\"https://developer.android.com/reference/androidx/recyclerview/widget/LinearLayoutManager#findFirstVisibleItemPosition()\" rel=\"nofollow noreferrer\">LinearLayoutManager#findFirstVisibleItemPosition()</a> and for the last visible position use <a href=\"https://developer.android.com/reference/androidx/recyclerview/widget/LinearLayoutManager#findLastVisibleItemPosition()\" rel=\"nofollow noreferrer\">LinearLayoutManager#findLastVisibleItemPosition()</a>. These methods will give you the position range of the displayed <em>RecyclerVIew</em> items. You can make changes to what is displayed with <a href=\"https://developer.android.com/reference/androidx/recyclerview/widget/RecyclerView.Adapter#notifyItemChanged(int)\" rel=\"nofollow noreferrer\">RecyclerView.Adapter#notifyItemChanged(int)</a> which will cause the view holder to be rebound. Since you will just be updating a single fields once an item is displayed, you may want to use <a href=\"https://developer.android.com/reference/androidx/recyclerview/widget/RecyclerView.Adapter#onBindViewHolder(VH,int,java.util.List%3Cjava.lang.Object%3E)\" rel=\"nofollow noreferrer\">RecyclerView.Adapter#onBindViewHolder(VH,int,java.util.List%3Cjava.lang.Object%3E))</a> for a partial rebind.</p>\n<p>So, in short, you will capture the start time for each event. Once you have items displayed, you will start a timer that will go off periodically. On each tick, your code will identify all shown items and call <code>notifyItemChanged()</code> to make the changes. The view binder code will calculate the time left until the start of each event and update the appropriate text view.</p>\n<p><strong>Update:</strong></p>\n<p>Even with a single timer, you may see lagging scrolling because of the overhead of rebinding all the view holders with new data.</p>\n<p>Here is a sample <em>RecyclerView</em> adapter that addresses that issue. The main features are that it</p>\n<ol>\n<li>Uses a runnable and a handler to do the timing of the updates.</li>\n<li>Does a partial binding on time updates instead of a complete rebind of the entire view holder. See <code>mTimerRunnable</code> and <code>public void onBindViewHolder(@NonNull RecyclerView.ViewHolder holder, int position, @NonNull List&lt;Object&gt; payloads)</code>.</li>\n</ol>\n<p>This may be sufficient to stop the lag in the scrolling. If not, there is a switch <code>mUpdateTime</code> that can be set to <code>false</code> to inhibit timer updates while scrolling. You would use a <a href=\"https://developer.android.com/reference/androidx/recyclerview/widget/RecyclerView.OnScrollListener\" rel=\"nofollow noreferrer\">RecyclerView.OnScrollListener</a> to control this setting. In this callback, you might just inhibit updates while scrolling or inhibit updates when scrolling past a certain speed which you would have to calculate.</p>\n<pre><code>class RecyclerViewAdapter extends RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt; {\n    private RecyclerView mRecyclerView;\n    private final List&lt;Long&gt; mItems;\n    public boolean mUpdateTime;\n\n    Handler mTimerHandler = new Handler();\n    Runnable mTimerRunnable = new Runnable() {\n        @Override\n        public void run() {\n            if (mUpdateTime) {\n                if (mRecyclerView == null) {\n                    return;\n                }\n                LinearLayoutManager lm = (LinearLayoutManager) mRecyclerView.getLayoutManager();\n                if (lm == null) {\n                    return;\n                }\n\n                int firstPosition = lm.findFirstVisibleItemPosition();\n                int lastPosition = lm.findLastVisibleItemPosition();\n                Log.d(&quot;Applog&quot;, String.format(&quot;Range= %d - %d&quot;, firstPosition, lastPosition));\n                notifyItemRangeChanged(firstPosition, lastPosition - firstPosition + 1, System.currentTimeMillis());\n            }\n            mTimerHandler.postDelayed(this, 1000);\n        }\n    };\n\n    RecyclerViewAdapter(List&lt;Long&gt; items) {\n        mItems = items;\n        mUpdateTime = true;\n        // Start the timer.\n        mTimerHandler.post(mTimerRunnable);\n    }\n\n    @Override\n    public @NonNull\n    RecyclerView.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.row_message, parent, false);\n        return new ItemViewHolder(view);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull RecyclerView.ViewHolder holder, int position) {\n        ItemViewHolder vh = (ItemViewHolder) holder;\n        String itemText = getTimeLeft(System.currentTimeMillis(), mItems.get(position));\n\n        vh.mEventName.setText(&quot;Event#&quot; + position);\n        vh.mTimeToEvent.setText(itemText);\n        int bgColor = (position % 2 == 0) ? android.R.color.holo_blue_light : android.R.color.holo_green_light;\n        holder.itemView.setBackgroundColor(holder.itemView.getContext().getResources().getColor(bgColor));\n    }\n\n    // List&lt;Object&gt; has the current time as its zeroth element.\n    @Override\n    public void onBindViewHolder(@NonNull RecyclerView.ViewHolder holder, int position, @NonNull List&lt;Object&gt; payloads) {\n        if (payloads.size() == 0) {\n            Log.d(&quot;Applog&quot;, &quot;Full bind &quot; + position);\n            super.onBindViewHolder(holder, position, payloads);\n        } else {\n            Log.d(&quot;Applog&quot;, &quot;Partial bind &quot; + position);\n            ItemViewHolder vh = (ItemViewHolder) holder;\n            String itemText = getTimeLeft((Long) payloads.get(0), mItems.get(position));\n            vh.mTimeToEvent.setText(itemText);\n        }\n    }\n\n    @Override\n    public int getItemCount() {\n        return (mItems == null) ? 0 : mItems.size();\n    }\n\n    @Override\n    public int getItemViewType(int position) {\n        return TYPE_ITEM;\n    }\n\n    @Override\n    public void onAttachedToRecyclerView(@NonNull RecyclerView recyclerView) {\n        super.onAttachedToRecyclerView(recyclerView);\n        mRecyclerView = recyclerView;\n    }\n\n    @Override\n    public void onDetachedFromRecyclerView(@NonNull RecyclerView recyclerView) {\n        super.onDetachedFromRecyclerView(recyclerView);\n        mRecyclerView = null;\n    }\n\n    private String getTimeLeft(Long now, Long eventTime) {\n        long millisLeft = eventTime - now;\n        if (millisLeft &lt; 0) {\n            return &quot;00:00:00&quot;;\n        }\n        return String.format(&quot;%02d:%02d:%02d&quot;, TimeUnit.MILLISECONDS.toHours(millisLeft), TimeUnit.MILLISECONDS.toMinutes(millisLeft) - TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(millisLeft)),\n                TimeUnit.MILLISECONDS.toSeconds(millisLeft) - TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millisLeft)));\n    }\n\n    static class ItemViewHolder extends RecyclerView.ViewHolder {\n        private final TextView mEventName;\n        private final TextView mTimeToEvent;\n\n        ItemViewHolder(View item) {\n            super(item);\n            mEventName = item.findViewById(R.id.eventName);\n            mTimeToEvent = item.findViewById(R.id.timeRemaining);\n        }\n    }\n\n    private final static int TYPE_ITEM = 1;\n}\n</code></pre>\n<p>I think your solution is here somewhere.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1666019985,"post_id":74057150,"comment_id":130830418,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/74057150/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":24505325,"reputation":1,"user_id":18420435,"display_name":"ryan kun"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1665669976,"creation_date":1665669976,"answer_id":74057150,"question_id":74004565,"body_markdown":"i took out notifyitemchange().\r\n\r\n    public class AdapterFixturesList extends RecyclerView.Adapter&lt;AdapterFixturesList.MyViewHolder&gt; {\r\n        private List&lt;BeanHomeFixtures&gt; mListenerList;\r\n        Context mContext;\r\n        CountDownTimer timer;\r\n        List&lt;MyViewHolder&gt; lstHolders;\r\n\r\n    public AdapterFixturesList(final List&lt;BeanHomeFixtures&gt; mListenerList, Context context) {\r\n            mContext = context;\r\n            this.mListenerList = mListenerList;\r\n            lstHolders = new ArrayList&lt;&gt;();\r\n\r\n            long maxTime = 0;\r\n            for (BeanHomeFixtures item : mListenerList) {\r\n                if (!item.getTime().equalsIgnoreCase(&quot;&quot;)) {\r\n                    maxTime = Long.parseLong(item.getTime());\r\n                }\r\n            }\r\n            long FlashCount = Long.parseLong(String.valueOf(maxTime));\r\n            long millisUntilFinished = FlashCount * 1000;\r\n\r\n            timer = new CountDownTimer(millisUntilFinished, 1000) {\r\n                    @Override\r\n                    public void onTick(long millisUntilFinished) {\r\n                        synchronized (lstHolders){\r\n                            for (MyViewHolder holder : lstHolders) {\r\n\r\n                                long Days = TimeUnit.HOURS.toDays(TimeUnit.MILLISECONDS.toHours(millisUntilFinished));\r\n                                long Hours = TimeUnit.MILLISECONDS.toHours(millisUntilFinished) - TimeUnit.DAYS.toHours(TimeUnit.MILLISECONDS.toDays(millisUntilFinished));\r\n                                long Minutes = TimeUnit.MILLISECONDS.toMinutes(millisUntilFinished) - TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(millisUntilFinished));\r\n                                long Seconds = TimeUnit.MILLISECONDS.toSeconds(millisUntilFinished) - TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millisUntilFinished));\r\n\r\n                                String format = &quot;%1$02d&quot;;\r\n                                holder.tv_TimeRemained.setText(String.format(format, Days) + &quot;:&quot; + String.format(format, Hours) + &quot;:&quot; + String.format(format, Minutes) + &quot;:&quot; + String.format(format, Seconds));\r\n                            }\r\n                        }\r\n                    }\r\n                    @Override\r\n                    public void onFinish() {\r\n                    }\r\n                }.start();\r\n\r\n            }\r\n        @Override\r\n        public void onBindViewHolder(final MyViewHolder holder, final int position) { \r\n            synchronized (lstHolders) {\r\n                lstHolders.add(holder);\r\n            }\r\n        }\r\n    }\r\n\r\ni know it shows same time in every item but for just testing purpose. it still lag on sroll. it&#39;s not frame skipping on every second like i have told on updated question.\r\n\r\n","title":"multiple countdown timer in recyclerview lagging on scroll","body":"<p>i took out notifyitemchange().</p>\n<pre><code>public class AdapterFixturesList extends RecyclerView.Adapter&lt;AdapterFixturesList.MyViewHolder&gt; {\n    private List&lt;BeanHomeFixtures&gt; mListenerList;\n    Context mContext;\n    CountDownTimer timer;\n    List&lt;MyViewHolder&gt; lstHolders;\n\npublic AdapterFixturesList(final List&lt;BeanHomeFixtures&gt; mListenerList, Context context) {\n        mContext = context;\n        this.mListenerList = mListenerList;\n        lstHolders = new ArrayList&lt;&gt;();\n\n        long maxTime = 0;\n        for (BeanHomeFixtures item : mListenerList) {\n            if (!item.getTime().equalsIgnoreCase(&quot;&quot;)) {\n                maxTime = Long.parseLong(item.getTime());\n            }\n        }\n        long FlashCount = Long.parseLong(String.valueOf(maxTime));\n        long millisUntilFinished = FlashCount * 1000;\n\n        timer = new CountDownTimer(millisUntilFinished, 1000) {\n                @Override\n                public void onTick(long millisUntilFinished) {\n                    synchronized (lstHolders){\n                        for (MyViewHolder holder : lstHolders) {\n\n                            long Days = TimeUnit.HOURS.toDays(TimeUnit.MILLISECONDS.toHours(millisUntilFinished));\n                            long Hours = TimeUnit.MILLISECONDS.toHours(millisUntilFinished) - TimeUnit.DAYS.toHours(TimeUnit.MILLISECONDS.toDays(millisUntilFinished));\n                            long Minutes = TimeUnit.MILLISECONDS.toMinutes(millisUntilFinished) - TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(millisUntilFinished));\n                            long Seconds = TimeUnit.MILLISECONDS.toSeconds(millisUntilFinished) - TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millisUntilFinished));\n\n                            String format = &quot;%1$02d&quot;;\n                            holder.tv_TimeRemained.setText(String.format(format, Days) + &quot;:&quot; + String.format(format, Hours) + &quot;:&quot; + String.format(format, Minutes) + &quot;:&quot; + String.format(format, Seconds));\n                        }\n                    }\n                }\n                @Override\n                public void onFinish() {\n                }\n            }.start();\n\n        }\n    @Override\n    public void onBindViewHolder(final MyViewHolder holder, final int position) { \n        synchronized (lstHolders) {\n            lstHolders.add(holder);\n        }\n    }\n}\n</code></pre>\n<p>i know it shows same time in every item but for just testing purpose. it still lag on sroll. it's not frame skipping on every second like i have told on updated question.</p>\n"}],"owner":{"account_id":24505325,"reputation":1,"user_id":18420435,"display_name":"ryan kun"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":363,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1665669976,"creation_date":1665316774,"question_id":74004565,"body_markdown":"app lags when scroll the recyclerview tried on physical device one plus 9 pro same thing happen minor lags when scroll. If i remove countdown it work smooth. below is my recyclerview adapter.I also used custom countdown timer and [runnable class][1] same thing. in first try i have created countdowntimer in onbindviewholder but according to [this][2] answer onbindview create countdown timer every time when scoll so i moved in viewholder.\r\n\r\n    public class AdapterFixturesList extends RecyclerView.Adapter&lt;AdapterFixturesList.MyViewHolder&gt; {\r\n        private List&lt;BeanHomeFixtures&gt; mListenerList;\r\n        Context mContext;\r\n\r\n        public AdapterFixturesList(List&lt;BeanHomeFixtures&gt; mListenerList, Context context) {\r\n            mContext = context;\r\n            this.mListenerList = mListenerList;\r\n        }\r\n\r\n    public class MyViewHolder extends RecyclerView.ViewHolder {\r\n            TextViewtv_TimeRemained;\r\n            BeanHomeFixtures mModel;\r\n            CountDownTimer countDownTimer;\r\n\r\n    public MyViewHolder(View view) {\r\n                super(view);\r\n                tv_TimeRemained = view.findViewById(R.id.tv_TimeRemained);\r\n            }\r\n       }\r\n\r\n    @Override\r\n        public int getItemCount() {\r\n            return mListenerList.size();\r\n        }\r\n    @Override\r\n        public MyViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\r\n            View itemView = LayoutInflater.from(parent.getContext())\r\n                    .inflate(R.layout.adapter_fixtures_list, parent, false);\r\n\r\n            return new MyViewHolder(itemView);\r\n        }     \r\n\r\n    @Override\r\n        public void onBindViewHolder(final MyViewHolder holder, final int position) {\r\n            final int time = mListenerList.get(position).getTime();\r\n            holder.tv_TimeRemained.setText(time + &quot;&quot;);\r\n\r\n\r\n                if (holder.countDownTimer != null) {\r\n                    holder.countDownTimer.cancel();\r\n                }\r\n\r\n                try {\r\n\r\n                    int FlashCount = time;\r\n                    long millisUntilFinished = FlashCount * 1000;\r\n\r\n                    holder.countDownTimer = new CountDownTimer(millisUntilFinished, 1000) {\r\n\r\n                        public void onTick(long millisUntilFinished) {\r\n\r\n                            long Days = TimeUnit.HOURS.toDays(TimeUnit.MILLISECONDS.toHours(millisUntilFinished));\r\n                            long Hours = TimeUnit.MILLISECONDS.toHours(millisUntilFinished) - TimeUnit.DAYS.toHours(TimeUnit.MILLISECONDS.toDays(millisUntilFinished));\r\n                            long Minutes = TimeUnit.MILLISECONDS.toMinutes(millisUntilFinished) - TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(millisUntilFinished));\r\n                            long Seconds = TimeUnit.MILLISECONDS.toSeconds(millisUntilFinished) - TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millisUntilFinished));\r\n\r\n                            String format = &quot;%1$02d&quot;;\r\n                            holder.tv_TimeRemained.setText(String.format(format, Days) + &quot;:&quot; + String.format(format, Hours) + &quot;:&quot; + String.format(format, Minutes) + &quot;:&quot; + String.format(format, Seconds));\r\n                        }\r\n\r\n                        public void onFinish() {\r\n                            callMyMatchRecord(false);\r\n                            holder.tv_TimeRemained.setText(&quot;Entry Over!&quot;);\r\n                        }\r\n\r\n                    }.start();\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\nI tried [Runnable][3] method also but same result.I appreciate for help.\r\n\r\n[image][4]\r\n[profiler image][5]\r\n\r\n**UPDATED**\r\n\r\nafter trying all methods best result give me this.right now this method skipping frames every second  i dont know is this right or not please check.\r\n\r\n    public class AdapterFixturesList extends RecyclerView.Adapter&lt;AdapterFixturesList.MyViewHolder&gt; {\r\n        private List&lt;BeanHomeFixtures&gt; mListenerList;\r\n        Context mContext;\r\n        CountDownTimer timer;\r\n\r\n        public AdapterFixturesList(final List&lt;BeanHomeFixtures&gt; mListenerList, Context context) {\r\n            mContext = context;\r\n            this.mListenerList = mListenerList;\r\n\r\n            long maxTime = 0;\r\n            for (BeanHomeFixtures item : mListenerList) {\r\n                if (!item.getTime().equalsIgnoreCase(&quot;&quot;)) {\r\n                    maxTime = Long.parseLong(item.getTime());\r\n                }\r\n            }\r\n\r\n            timer = new CountDownTimer(maxTime, 1000) {\r\n                    @Override\r\n                    public void onTick(long millisUntilFinished) {\r\n                        for (int i = 0, dataLength = mListenerList.size(); i &lt; dataLength; i++) {\r\n                            BeanHomeFixtures item = mListenerList.get(i);\r\n                            if (!item.getTime().equalsIgnoreCase(&quot;&quot;)) {\r\n                                item.setTime(String.valueOf(Long.parseLong(item.getTime())-1));\r\n                            }\r\n                            notifyItemChanged(i , &quot;time&quot;);\r\n                        }\r\n                    }\r\n                    @Override\r\n                    public void onFinish() {\r\n                    }\r\n                }.start();\r\n\r\n            }\r\n\r\n\r\n        public class MyViewHolder extends RecyclerView.ViewHolder {\r\n            TextView tv_TimeRemained;\r\n\r\n            public MyViewHolder(View view) {\r\n                super(view);\r\n\r\n                tv_TimeRemained = view.findViewById(R.id.tv_TimeRemained);\r\n               \r\n            }\r\n\r\n        }\r\n\r\n        @Override\r\n        public int getItemCount() {\r\n            return mListenerList.size();\r\n        }\r\n\r\n        @Override\r\n        public MyViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\r\n            final View itemView = LayoutInflater.from(parent.getContext())\r\n                    .inflate(R.layout.adapter_fixtures_list, parent, false);\r\n\r\n            return new MyViewHolder(itemView);\r\n        }\r\n\r\n        @Override\r\n        public void onBindViewHolder(final MyViewHolder holder, final int position) {\r\n\r\n            \r\n            final String time = mListenerList.get(position).getTime();\r\n\r\n                if(Long.parseLong(time) &gt; 0){\r\n                    long FlashCount = Long.parseLong(time);\r\n                    long millisUntilFinished = FlashCount * 1000;\r\n                    long Days = TimeUnit.HOURS.toDays(TimeUnit.MILLISECONDS.toHours(millisUntilFinished));\r\n                    long Hours = TimeUnit.MILLISECONDS.toHours(millisUntilFinished) - TimeUnit.DAYS.toHours(TimeUnit.MILLISECONDS.toDays(millisUntilFinished));\r\n                    long Minutes = TimeUnit.MILLISECONDS.toMinutes(millisUntilFinished) - TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(millisUntilFinished));\r\n                    long Seconds = TimeUnit.MILLISECONDS.toSeconds(millisUntilFinished) - TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millisUntilFinished));\r\n\r\n                    String format = &quot;%1$02d&quot;;\r\n                   holder.tv_TimeRemained.setText(String.format(format, Days) + &quot;:&quot; + String.format(format, Hours) + &quot;:&quot; + String.format(format, Minutes) + &quot;:&quot; + String.format(format, Seconds));\r\n                }\r\n                else{\r\n                    holder.tv_TimeRemained.setText(&quot;Entry Over!&quot;);\r\n                }\r\n            }\r\n\r\n    }\r\n\r\ni know time is not going to change but if i remove notifyitemchange its work fine that means now timer not causing the lag. if i use handler and runnable it skipping 5 to 7 frame per second depend on data even in partial layout method. so i don&#39;t know what is the problem. \r\n\r\n\r\n  [1]: https://github.com/Manikkumar1988/TimerInRecyclerView\r\n  [2]: https://stackoverflow.com/a/66404921/18420435\r\n  [3]: https://stackoverflow.com/a/53543180/18420435\r\n  [4]: https://i.stack.imgur.com/LxIA1.jpg\r\n  [5]: https://i.stack.imgur.com/5SeBu.png","title":"multiple countdown timer in recyclerview lagging on scroll","body":"<p>app lags when scroll the recyclerview tried on physical device one plus 9 pro same thing happen minor lags when scroll. If i remove countdown it work smooth. below is my recyclerview adapter.I also used custom countdown timer and <a href=\"https://github.com/Manikkumar1988/TimerInRecyclerView\" rel=\"nofollow noreferrer\">runnable class</a> same thing. in first try i have created countdowntimer in onbindviewholder but according to <a href=\"https://stackoverflow.com/a/66404921/18420435\">this</a> answer onbindview create countdown timer every time when scoll so i moved in viewholder.</p>\n<pre><code>public class AdapterFixturesList extends RecyclerView.Adapter&lt;AdapterFixturesList.MyViewHolder&gt; {\n    private List&lt;BeanHomeFixtures&gt; mListenerList;\n    Context mContext;\n\n    public AdapterFixturesList(List&lt;BeanHomeFixtures&gt; mListenerList, Context context) {\n        mContext = context;\n        this.mListenerList = mListenerList;\n    }\n\npublic class MyViewHolder extends RecyclerView.ViewHolder {\n        TextViewtv_TimeRemained;\n        BeanHomeFixtures mModel;\n        CountDownTimer countDownTimer;\n\npublic MyViewHolder(View view) {\n            super(view);\n            tv_TimeRemained = view.findViewById(R.id.tv_TimeRemained);\n        }\n   }\n\n@Override\n    public int getItemCount() {\n        return mListenerList.size();\n    }\n@Override\n    public MyViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        View itemView = LayoutInflater.from(parent.getContext())\n                .inflate(R.layout.adapter_fixtures_list, parent, false);\n\n        return new MyViewHolder(itemView);\n    }     \n\n@Override\n    public void onBindViewHolder(final MyViewHolder holder, final int position) {\n        final int time = mListenerList.get(position).getTime();\n        holder.tv_TimeRemained.setText(time + &quot;&quot;);\n\n\n            if (holder.countDownTimer != null) {\n                holder.countDownTimer.cancel();\n            }\n\n            try {\n\n                int FlashCount = time;\n                long millisUntilFinished = FlashCount * 1000;\n\n                holder.countDownTimer = new CountDownTimer(millisUntilFinished, 1000) {\n\n                    public void onTick(long millisUntilFinished) {\n\n                        long Days = TimeUnit.HOURS.toDays(TimeUnit.MILLISECONDS.toHours(millisUntilFinished));\n                        long Hours = TimeUnit.MILLISECONDS.toHours(millisUntilFinished) - TimeUnit.DAYS.toHours(TimeUnit.MILLISECONDS.toDays(millisUntilFinished));\n                        long Minutes = TimeUnit.MILLISECONDS.toMinutes(millisUntilFinished) - TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(millisUntilFinished));\n                        long Seconds = TimeUnit.MILLISECONDS.toSeconds(millisUntilFinished) - TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millisUntilFinished));\n\n                        String format = &quot;%1$02d&quot;;\n                        holder.tv_TimeRemained.setText(String.format(format, Days) + &quot;:&quot; + String.format(format, Hours) + &quot;:&quot; + String.format(format, Minutes) + &quot;:&quot; + String.format(format, Seconds));\n                    }\n\n                    public void onFinish() {\n                        callMyMatchRecord(false);\n                        holder.tv_TimeRemained.setText(&quot;Entry Over!&quot;);\n                    }\n\n                }.start();\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n\n        }\n\n    }\n</code></pre>\n<p>I tried <a href=\"https://stackoverflow.com/a/53543180/18420435\">Runnable</a> method also but same result.I appreciate for help.</p>\n<p><a href=\"https://i.stack.imgur.com/LxIA1.jpg\" rel=\"nofollow noreferrer\">image</a>\n<a href=\"https://i.stack.imgur.com/5SeBu.png\" rel=\"nofollow noreferrer\">profiler image</a></p>\n<p><strong>UPDATED</strong></p>\n<p>after trying all methods best result give me this.right now this method skipping frames every second  i dont know is this right or not please check.</p>\n<pre><code>public class AdapterFixturesList extends RecyclerView.Adapter&lt;AdapterFixturesList.MyViewHolder&gt; {\n    private List&lt;BeanHomeFixtures&gt; mListenerList;\n    Context mContext;\n    CountDownTimer timer;\n\n    public AdapterFixturesList(final List&lt;BeanHomeFixtures&gt; mListenerList, Context context) {\n        mContext = context;\n        this.mListenerList = mListenerList;\n\n        long maxTime = 0;\n        for (BeanHomeFixtures item : mListenerList) {\n            if (!item.getTime().equalsIgnoreCase(&quot;&quot;)) {\n                maxTime = Long.parseLong(item.getTime());\n            }\n        }\n\n        timer = new CountDownTimer(maxTime, 1000) {\n                @Override\n                public void onTick(long millisUntilFinished) {\n                    for (int i = 0, dataLength = mListenerList.size(); i &lt; dataLength; i++) {\n                        BeanHomeFixtures item = mListenerList.get(i);\n                        if (!item.getTime().equalsIgnoreCase(&quot;&quot;)) {\n                            item.setTime(String.valueOf(Long.parseLong(item.getTime())-1));\n                        }\n                        notifyItemChanged(i , &quot;time&quot;);\n                    }\n                }\n                @Override\n                public void onFinish() {\n                }\n            }.start();\n\n        }\n\n\n    public class MyViewHolder extends RecyclerView.ViewHolder {\n        TextView tv_TimeRemained;\n\n        public MyViewHolder(View view) {\n            super(view);\n\n            tv_TimeRemained = view.findViewById(R.id.tv_TimeRemained);\n           \n        }\n\n    }\n\n    @Override\n    public int getItemCount() {\n        return mListenerList.size();\n    }\n\n    @Override\n    public MyViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        final View itemView = LayoutInflater.from(parent.getContext())\n                .inflate(R.layout.adapter_fixtures_list, parent, false);\n\n        return new MyViewHolder(itemView);\n    }\n\n    @Override\n    public void onBindViewHolder(final MyViewHolder holder, final int position) {\n\n        \n        final String time = mListenerList.get(position).getTime();\n\n            if(Long.parseLong(time) &gt; 0){\n                long FlashCount = Long.parseLong(time);\n                long millisUntilFinished = FlashCount * 1000;\n                long Days = TimeUnit.HOURS.toDays(TimeUnit.MILLISECONDS.toHours(millisUntilFinished));\n                long Hours = TimeUnit.MILLISECONDS.toHours(millisUntilFinished) - TimeUnit.DAYS.toHours(TimeUnit.MILLISECONDS.toDays(millisUntilFinished));\n                long Minutes = TimeUnit.MILLISECONDS.toMinutes(millisUntilFinished) - TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(millisUntilFinished));\n                long Seconds = TimeUnit.MILLISECONDS.toSeconds(millisUntilFinished) - TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millisUntilFinished));\n\n                String format = &quot;%1$02d&quot;;\n               holder.tv_TimeRemained.setText(String.format(format, Days) + &quot;:&quot; + String.format(format, Hours) + &quot;:&quot; + String.format(format, Minutes) + &quot;:&quot; + String.format(format, Seconds));\n            }\n            else{\n                holder.tv_TimeRemained.setText(&quot;Entry Over!&quot;);\n            }\n        }\n\n}\n</code></pre>\n<p>i know time is not going to change but if i remove notifyitemchange its work fine that means now timer not causing the lag. if i use handler and runnable it skipping 5 to 7 frame per second depend on data even in partial layout method. so i don't know what is the problem.</p>\n"},{"tags":["java","jpa","one-to-many","cascade","many-to-one"],"answers":[{"comments":[{"owner":{"account_id":3261342,"reputation":1970,"user_id":2746879,"accept_rate":77,"display_name":"Sarz"},"score":4,"creation_date":1417755345,"post_id":13027330,"comment_id":43079787,"body_markdown":"New in JPA, this information is usefull but what about Detach here?","body":"New in JPA, this information is usefull but what about Detach here?"},{"owner":{"account_id":2091357,"reputation":115,"user_id":1861122,"display_name":"Dorian Mejer"},"score":1,"creation_date":1465072891,"post_id":13027330,"comment_id":62751443,"body_markdown":"In CascadeType.DETACH, when detaching an entity, em also detach the entities held by parent entity.","body":"In CascadeType.DETACH, when detaching an entity, em also detach the entities held by parent entity."}],"tags":[],"owner":{"account_id":1558198,"reputation":3820,"user_id":1448704,"accept_rate":72,"display_name":"seba.wagner"},"comment_count":2,"down_vote_count":0,"up_vote_count":61,"is_accepted":false,"score":61,"last_activity_date":1590763582,"creation_date":1350984447,"answer_id":13027330,"question_id":13027214,"body_markdown":"[See here][1] for an example from the OpenJPA docs. `CascadeType.ALL` means it will do all actions.\n\nQuote:\n\n&gt;  CascadeType.PERSIST: When persisting an entity, also persist the entities held in its fields. We suggest a liberal application of this cascade rule, because if the EntityManager finds a field that references a new entity during the flush, and the field does not use CascadeType.PERSIST, it is an error.\n&gt;\n&gt;  CascadeType.REMOVE: When deleting an entity, it also deletes the entities held in this field.\n&gt;\n&gt;    CascadeType.REFRESH: When refreshing an entity, also refresh the entities held in this field.\n&gt;\n&gt;    CascadeType.MERGE: When merging entity state, also merge the entities held in this field.\n\nSebastian\n\n[1]:http://openjpa.apache.org/builds/2.4.0/apache-openjpa/docs/jpa_overview_meta_field.html#jpa_overview_meta_cascade","title":"What is the meaning of the CascadeType.ALL for a @ManyToOne JPA association","body":"<p><a href=\"http://openjpa.apache.org/builds/2.4.0/apache-openjpa/docs/jpa_overview_meta_field.html#jpa_overview_meta_cascade\" rel=\"noreferrer\">See here</a> for an example from the OpenJPA docs. <code>CascadeType.ALL</code> means it will do all actions.</p>\n<p>Quote:</p>\n<blockquote>\n<p>CascadeType.PERSIST: When persisting an entity, also persist the entities held in its fields. We suggest a liberal application of this cascade rule, because if the EntityManager finds a field that references a new entity during the flush, and the field does not use CascadeType.PERSIST, it is an error.</p>\n<p>CascadeType.REMOVE: When deleting an entity, it also deletes the entities held in this field.</p>\n<p>CascadeType.REFRESH: When refreshing an entity, also refresh the entities held in this field.</p>\n<p>CascadeType.MERGE: When merging entity state, also merge the entities held in this field.</p>\n</blockquote>\n<p>Sebastian</p>\n"},{"tags":[],"owner":{"account_id":368269,"reputation":93629,"user_id":714969,"accept_rate":86,"display_name":"Kevin Bowersox"},"comment_count":0,"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1444458965,"creation_date":1350984779,"answer_id":13027429,"question_id":13027214,"body_markdown":"[From the EJB3.0 Specification][1]:\n\n&gt; Use of the cascade annotation element may be used to propagate the\n&gt; effect of an operation to associated entities. The cascade\n&gt; functionality is most typically used in parent-child relationships.\n&gt;\n&gt; If X is a managed entity, the remove operation causes it to become\n&gt; removed. The remove operation is cascaded to entities referenced by X,\n&gt; if the relationships from X to these other entities is annotated with\n&gt; the cascade=REMOVE or cascade=ALL annotation element value.\n\nSo in a nutshell, entity relationships defined with `CascadeType.All` will ensure that all persistence events such as persist, refresh, merge and remove that occur on the parent, will be passed to the child. Defining other `CascadeType` options provides the developer with a more granular level of control over how the entity association handles persistence.\n\nFor example if I had an object Book that contained a List of pages and I add a page object within this list.  If the `@OneToMany` annotation defining the association between Book and Page is marked as `CascadeType.All`, persisting the Book would result in the Page also being persisted to the database.\n\n[1]:\nhttp://download.oracle.com/otn-pub/jcp/ejb-3_0-fr-eval-oth-JSpec/ejb-3_0-fr-spec-persistence.pdf","title":"What is the meaning of the CascadeType.ALL for a @ManyToOne JPA association","body":"<p><a href=\"http://download.oracle.com/otn-pub/jcp/ejb-3_0-fr-eval-oth-JSpec/ejb-3_0-fr-spec-persistence.pdf\" rel=\"noreferrer\">From the EJB3.0 Specification</a>:</p>\n<blockquote>\n<p>Use of the cascade annotation element may be used to propagate the\neffect of an operation to associated entities. The cascade\nfunctionality is most typically used in parent-child relationships.</p>\n<p>If X is a managed entity, the remove operation causes it to become\nremoved. The remove operation is cascaded to entities referenced by X,\nif the relationships from X to these other entities is annotated with\nthe cascade=REMOVE or cascade=ALL annotation element value.</p>\n</blockquote>\n<p>So in a nutshell, entity relationships defined with <code>CascadeType.All</code> will ensure that all persistence events such as persist, refresh, merge and remove that occur on the parent, will be passed to the child. Defining other <code>CascadeType</code> options provides the developer with a more granular level of control over how the entity association handles persistence.</p>\n<p>For example if I had an object Book that contained a List of pages and I add a page object within this list.  If the <code>@OneToMany</code> annotation defining the association between Book and Page is marked as <code>CascadeType.All</code>, persisting the Book would result in the Page also being persisted to the database.</p>\n"},{"comments":[{"owner":{"account_id":117315,"reputation":3877,"user_id":307295,"display_name":"mvmn"},"score":13,"creation_date":1490958894,"post_id":13027444,"comment_id":73355494,"body_markdown":"It could be good to have CascadeType.ALL on @OneToMany side though.","body":"It could be good to have CascadeType.ALL on @OneToMany side though."}],"tags":[],"owner":{"account_id":75292,"reputation":60810,"user_id":216021,"accept_rate":82,"display_name":"kostja"},"comment_count":1,"down_vote_count":0,"up_vote_count":477,"is_accepted":true,"score":477,"last_activity_date":1367432705,"creation_date":1350984824,"answer_id":13027444,"question_id":13027214,"body_markdown":"The meaning of `CascadeType.ALL` is that the persistence will propagate (cascade) all `EntityManager` operations (`PERSIST, REMOVE, REFRESH, MERGE, DETACH`) to the relating entities.\r\n\r\nIt seems in your case to be a bad idea, as removing an `Address` would lead to removing the related `User`. As a user can have multiple addresses, the other addresses would become orphans. However the inverse case (annotating the `User`) would make sense - if an address belongs to a single user only, it is safe to propagate the removal of all addresses belonging to a user if this user is deleted. \r\n\r\nBTW: you may want to add a `mappedBy=&quot;addressOwner&quot;` attribute to your `User` to signal to the persistence provider that the join column should be in the ADDRESS table.\r\n","title":"What is the meaning of the CascadeType.ALL for a @ManyToOne JPA association","body":"<p>The meaning of <code>CascadeType.ALL</code> is that the persistence will propagate (cascade) all <code>EntityManager</code> operations (<code>PERSIST, REMOVE, REFRESH, MERGE, DETACH</code>) to the relating entities.</p>\n\n<p>It seems in your case to be a bad idea, as removing an <code>Address</code> would lead to removing the related <code>User</code>. As a user can have multiple addresses, the other addresses would become orphans. However the inverse case (annotating the <code>User</code>) would make sense - if an address belongs to a single user only, it is safe to propagate the removal of all addresses belonging to a user if this user is deleted. </p>\n\n<p>BTW: you may want to add a <code>mappedBy=\"addressOwner\"</code> attribute to your <code>User</code> to signal to the persistence provider that the join column should be in the ADDRESS table.</p>\n"},{"tags":[],"owner":{"account_id":3408319,"reputation":10093,"user_id":2858871,"accept_rate":79,"display_name":"Emilien Brigand"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1444453761,"creation_date":1438851317,"answer_id":31851146,"question_id":13027214,"body_markdown":"In JPA 2.0 if you want to delete an address if you removed it from a User entity you can add `orphanRemoval=true` (instead of `CascadeType.REMOVE`) to your `@OneToMany`.\r\n\r\n\r\nMore explanation between `orphanRemoval=true` and `CascadeType.REMOVE` is [here][1].\r\n\r\n\r\n  [1]: http://www.objectdb.com/java/jpa/persistence/delete#Orphan_Removal","title":"What is the meaning of the CascadeType.ALL for a @ManyToOne JPA association","body":"<p>In JPA 2.0 if you want to delete an address if you removed it from a User entity you can add <code>orphanRemoval=true</code> (instead of <code>CascadeType.REMOVE</code>) to your <code>@OneToMany</code>.</p>\n\n<p>More explanation between <code>orphanRemoval=true</code> and <code>CascadeType.REMOVE</code> is <a href=\"http://www.objectdb.com/java/jpa/persistence/delete#Orphan_Removal\" rel=\"noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"comment_count":0,"down_vote_count":1,"up_vote_count":129,"is_accepted":false,"score":128,"last_activity_date":1665669771,"creation_date":1502367255,"answer_id":45613450,"question_id":13027214,"body_markdown":"You shouldn&#39;t use `CascadeType.ALL` on `@ManyToOne` since entity state transitions should propagate from parent entities to child ones, not the other way around.\r\n\r\nThe `@ManyToOne` is on the child side of the association as it maps the underlying Foreign Key column.\r\n\r\nTherefore, you should move the `CascadeType.ALL` from the `@ManyToOne` association to the `@OneToMany` side, which should also use the `mappedBy` attribute since it&#39;s the most efficient one-to-many table relationship mapping.","title":"What is the meaning of the CascadeType.ALL for a @ManyToOne JPA association","body":"<p>You shouldn't use <code>CascadeType.ALL</code> on <code>@ManyToOne</code> since entity state transitions should propagate from parent entities to child ones, not the other way around.</p>\n<p>The <code>@ManyToOne</code> is on the child side of the association as it maps the underlying Foreign Key column.</p>\n<p>Therefore, you should move the <code>CascadeType.ALL</code> from the <code>@ManyToOne</code> association to the <code>@OneToMany</code> side, which should also use the <code>mappedBy</code> attribute since it's the most efficient one-to-many table relationship mapping.</p>\n"},{"tags":[],"owner":{"account_id":14868083,"reputation":196,"user_id":10736451,"display_name":"szachMati"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1578475629,"creation_date":1547922724,"answer_id":54270152,"question_id":13027214,"body_markdown":"If you just want to delete the address assigned to the user and not to affect on User entity class you should try something like that:\r\n\r\n   \r\n\r\n    @Entity\r\n    public class User {\r\n       @OneToMany(mappedBy = &quot;addressOwner&quot;, cascade = CascadeType.ALL)\r\n       protected Set&lt;Address&gt; userAddresses = new HashSet&lt;&gt;();\r\n    }\r\n\r\n    @Entity \r\n    public class Addresses {\r\n       @ManyToOne(cascade = CascadeType.REFRESH) @JoinColumn(name = &quot;user_id&quot;)\r\n       protected User addressOwner;\r\n    }\r\nThis way you dont need to worry about using fetch in annotations. But remember when deleting the User you will also delete connected address to user object.\r\n\r\n\r\n\r\n\r\n \r\n","title":"What is the meaning of the CascadeType.ALL for a @ManyToOne JPA association","body":"<p>If you just want to delete the address assigned to the user and not to affect on User entity class you should try something like that:</p>\n\n<pre><code>@Entity\npublic class User {\n   @OneToMany(mappedBy = \"addressOwner\", cascade = CascadeType.ALL)\n   protected Set&lt;Address&gt; userAddresses = new HashSet&lt;&gt;();\n}\n\n@Entity \npublic class Addresses {\n   @ManyToOne(cascade = CascadeType.REFRESH) @JoinColumn(name = \"user_id\")\n   protected User addressOwner;\n}\n</code></pre>\n\n<p>This way you dont need to worry about using fetch in annotations. But remember when deleting the User you will also delete connected address to user object.</p>\n"}],"owner":{"account_id":476430,"reputation":11691,"user_id":887343,"accept_rate":77,"display_name":"forhas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":483037,"favorite_count":0,"down_vote_count":1,"up_vote_count":307,"accepted_answer_id":13027444,"answer_count":6,"score":306,"last_activity_date":1665669771,"creation_date":1350984088,"question_id":13027214,"body_markdown":"I think I misunderstood the meaning of cascading in the context of a `@ManyToOne` relationship.\r\n\r\nThe case:\r\n\r\n    public class User {\r\n    \r\n       @OneToMany(fetch = FetchType.EAGER)\r\n       protected Set&lt;Address&gt; userAddresses;\r\n    \r\n    }\r\n    \r\n    public class Address {\r\n    \r\n       @ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n       protected User addressOwner;\r\n    \r\n    }\r\n\r\nWhat is the meaning of the `cascade = CascadeType.ALL`? For example, if I delete a certain address from the database, how does the fact that I added the `cascade = CascadeType.ALL` affect my data (the `User`, I guess)?","title":"What is the meaning of the CascadeType.ALL for a @ManyToOne JPA association","body":"<p>I think I misunderstood the meaning of cascading in the context of a <code>@ManyToOne</code> relationship.</p>\n\n<p>The case:</p>\n\n<pre><code>public class User {\n\n   @OneToMany(fetch = FetchType.EAGER)\n   protected Set&lt;Address&gt; userAddresses;\n\n}\n\npublic class Address {\n\n   @ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n   protected User addressOwner;\n\n}\n</code></pre>\n\n<p>What is the meaning of the <code>cascade = CascadeType.ALL</code>? For example, if I delete a certain address from the database, how does the fact that I added the <code>cascade = CascadeType.ALL</code> affect my data (the <code>User</code>, I guess)?</p>\n"},{"tags":["java","xml","maven"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1475733772,"post_id":39886439,"comment_id":67063434,"body_markdown":"Don&#39;t use images better past text into the post...","body":"Don&#39;t use images better past text into the post..."},{"owner":{"display_name":"user6811693"},"score":0,"creation_date":1475733833,"post_id":39886439,"comment_id":67063463,"body_markdown":"Sorry for the inconvenience.I won&#39;t use it from next time.","body":"Sorry for the inconvenience.I won&#39;t use it from next time."}],"answers":[{"tags":[],"owner":{"display_name":"user6811693"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1475734091,"creation_date":1475733789,"answer_id":39888619,"question_id":39886439,"body_markdown":"It was solved by adding the dependency in the pom.xml file.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.jolira&lt;/groupId&gt;\r\n        &lt;artifactId&gt;onejar-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;1.4.4&lt;/version&gt;\r\n    &lt;/dependency&gt;​\r\n","title":"Failure to find org.dstovall:onejar-maven-plugin-jar","body":"<p>It was solved by adding the dependency in the pom.xml file.</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.jolira&lt;/groupId&gt;\n    &lt;artifactId&gt;onejar-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;1.4.4&lt;/version&gt;\n&lt;/dependency&gt;​\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1444169,"reputation":1261,"user_id":1363310,"display_name":"Asraful"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665669319,"creation_date":1665669319,"answer_id":74056983,"question_id":39886439,"body_markdown":"Including configuration :\r\n\r\n        &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;com.jolira&lt;/groupId&gt;\r\n                &lt;artifactId&gt;onejar-maven-plugin&lt;/artifactId&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;mainClass&gt;MainClassName&lt;/mainClass&gt;\r\n                            &lt;attachToBuild&gt;true&lt;/attachToBuild&gt;\r\n                            &lt;filename&gt;\r\n                                ${project.build.finalName}.${project.packaging}\r\n                            &lt;/filename&gt;\r\n                        &lt;/configuration&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;one-jar&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\nIt works like charm.\r\n","title":"Failure to find org.dstovall:onejar-maven-plugin-jar","body":"<p>Including configuration :</p>\n<pre><code>    &lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;com.jolira&lt;/groupId&gt;\n            &lt;artifactId&gt;onejar-maven-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;configuration&gt;\n                        &lt;mainClass&gt;MainClassName&lt;/mainClass&gt;\n                        &lt;attachToBuild&gt;true&lt;/attachToBuild&gt;\n                        &lt;filename&gt;\n                            ${project.build.finalName}.${project.packaging}\n                        &lt;/filename&gt;\n                    &lt;/configuration&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;one-jar&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>It works like charm.</p>\n"}],"owner":{"display_name":"user6811693"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2427,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1665669319,"creation_date":1475719853,"question_id":39886439,"body_markdown":"I am new to Maven and while importing an existing Maven project from the pom.xml I find that the  following error occurs.\r\n\r\n**Failure to find org.dstovall:onejar-maven-plugin-jar:1.4.4**.Should I remove any Dependency to fix this? \r\n\r\n  [error snapshot][1]\r\nAny help is appreciated.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/S1wCF.png","title":"Failure to find org.dstovall:onejar-maven-plugin-jar","body":"<p>I am new to Maven and while importing an existing Maven project from the pom.xml I find that the  following error occurs.</p>\n\n<p><strong>Failure to find org.dstovall:onejar-maven-plugin-jar:1.4.4</strong>.Should I remove any Dependency to fix this? </p>\n\n<p><a href=\"https://i.stack.imgur.com/S1wCF.png\" rel=\"nofollow\">error snapshot</a>\nAny help is appreciated.</p>\n"},{"tags":["java","database","arraylist","jdbc","hashmap"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665571012,"post_id":74040256,"comment_id":130730296,"body_markdown":"Probably easier to do something like ```select foo from bar group by foo having count(foo) &gt; 1```","body":"Probably easier to do something like <code>select foo from bar group by foo having count(foo) &gt; 1</code>"},{"owner":{"account_id":21832130,"reputation":19,"user_id":16126951,"display_name":"pooja b"},"score":0,"creation_date":1665585050,"post_id":74040256,"comment_id":130735953,"body_markdown":"I am using H2DB database in that this query is returning only a blank EarthriseAccount column....can you please suggest how to write this query which will give output for H2DB","body":"I am using H2DB database in that this query is returning only a blank EarthriseAccount column....can you please suggest how to write this query which will give output for H2DB"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665588200,"post_id":74040256,"comment_id":130737276,"body_markdown":"I don&#39;t know it. Won&#39;t it do sql?","body":"I don&#39;t know it. Won&#39;t it do sql?"},{"owner":{"account_id":21832130,"reputation":19,"user_id":16126951,"display_name":"pooja b"},"score":0,"creation_date":1665657165,"post_id":74040256,"comment_id":130753225,"body_markdown":"No my tables are in h2db...thanks for replying","body":"No my tables are in h2db...thanks for replying"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665657693,"post_id":74040256,"comment_id":130753399,"body_markdown":"[Welcome to H2, the Java **SQL** database](http://h2database.com/html/main.html) (My emphasis)","body":"<a href=\"http://h2database.com/html/main.html\" rel=\"nofollow noreferrer\">Welcome to H2, the Java <b>SQL</b> database</a> (My emphasis)"}],"owner":{"account_id":21832130,"reputation":19,"user_id":16126951,"display_name":"pooja b"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665669308,"creation_date":1665570144,"question_id":74040256,"body_markdown":"I have H2 database. I want to retrieve values of a column into an ArrayList. Then I want to find the duplicate values in a column\r\nand after finding the duplicate columns, I want to set the result column values as duplicate or unique.\r\n\r\nI have retrieved the table from SQL Server in JDBC resultset\r\n`````\r\nwhile(resultset.next()){\r\n\r\nArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n\r\nlist.add(resultset.getString(1));\r\n\r\nSet&lt;String&gt; s =new HashSet&lt;String&gt;();\r\nfor(String name: list){\r\n  if(s.add(name)==false){\r\n    System.out.println(name + &quot;is duplicate&quot;)\r\n    St.setString(2 ,&quot;Duplicate&quot;)\r\n   }\r\n}\r\n````````\r\n\r\nHere 1 is the column which has IDs, and column 2 has to be set to &quot;Unique&quot; or &quot;duplicate&quot;, depending on if count(id)&gt;1.\r\n\r\nThe problem with ArrayList is it&#39;s storing value in list after every time while loop runs, and that&#39;s why it is giving &quot;duplicate&quot; output for every id. Can anyone please guide me what I am doing wrong?\r\n\r\nOr do I have to use something else in place of ArrayList? For example, is Hashmap be a better option?","title":"how to find duplicates from a column of a table using arraylist or hashmap","body":"<p>I have H2 database. I want to retrieve values of a column into an ArrayList. Then I want to find the duplicate values in a column\nand after finding the duplicate columns, I want to set the result column values as duplicate or unique.</p>\n<p>I have retrieved the table from SQL Server in JDBC resultset</p>\n<pre><code>while(resultset.next()){\n\nArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\n\nlist.add(resultset.getString(1));\n\nSet&lt;String&gt; s =new HashSet&lt;String&gt;();\nfor(String name: list){\n  if(s.add(name)==false){\n    System.out.println(name + &quot;is duplicate&quot;)\n    St.setString(2 ,&quot;Duplicate&quot;)\n   }\n}\n</code></pre>\n<p>Here 1 is the column which has IDs, and column 2 has to be set to &quot;Unique&quot; or &quot;duplicate&quot;, depending on if count(id)&gt;1.</p>\n<p>The problem with ArrayList is it's storing value in list after every time while loop runs, and that's why it is giving &quot;duplicate&quot; output for every id. Can anyone please guide me what I am doing wrong?</p>\n<p>Or do I have to use something else in place of ArrayList? For example, is Hashmap be a better option?</p>\n"},{"tags":["java","jpa","orm","quarkus","quarkus-panache"],"comments":[{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":1,"creation_date":1665651684,"post_id":74052772,"comment_id":130751449,"body_markdown":"Replace `Subscription.tenantKey` with a `Tenant` object and problem should gone. You are using an ORM, so use it&#39;s capabilities.","body":"Replace <code>Subscription.tenantKey</code> with a <code>Tenant</code> object and problem should gone. You are using an ORM, so use it&#39;s capabilities."},{"owner":{"account_id":5701253,"reputation":4320,"user_id":4506140,"accept_rate":73,"display_name":"Jude Niroshan"},"score":0,"creation_date":1665653083,"post_id":74052772,"comment_id":130751910,"body_markdown":"In that case, it will become a **bi-directional** relationship. I only want one-way relationship with these 2 entities.","body":"In that case, it will become a <b>bi-directional</b> relationship. I only want one-way relationship with these 2 entities."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1665674484,"post_id":74052772,"comment_id":130759422,"body_markdown":"Then remove the Subscription.tenantKey property outright. Your issue is you have JPA trying to set the tenantKey foriegn key column through the Tenant.subscription relationships, but you also have a Subscription.tenantKey property you are likely leaving set to null. Use one or the other. Alternative to removing it, you can make it read only by mapping it as updatable=false, insertable=false, but it&#39;ll likely be out of synch with the values when it changes.","body":"Then remove the Subscription.tenantKey property outright. Your issue is you have JPA trying to set the tenantKey foriegn key column through the Tenant.subscription relationships, but you also have a Subscription.tenantKey property you are likely leaving set to null. Use one or the other. Alternative to removing it, you can make it read only by mapping it as updatable=false, insertable=false, but it&#39;ll likely be out of synch with the values when it changes."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1665674658,"post_id":74052772,"comment_id":130759494,"body_markdown":"PS what exactly do you wish tenantKey in your join column to reference? JPA mandates that relationships involve foreign keys that point to IDs. The setup you have means there is a Subscription.&quot;TENANTKEY&quot; foreign key that points to the Tenant.&quot;ID&quot; column - but you also seem to have a Tenant.tenantKey property (and db column). Did you mean to try to link the two up somehow, or is tenantKey a natural ID you might be using instead of the ID property?","body":"PS what exactly do you wish tenantKey in your join column to reference? JPA mandates that relationships involve foreign keys that point to IDs. The setup you have means there is a Subscription.&quot;TENANTKEY&quot; foreign key that points to the Tenant.&quot;ID&quot; column - but you also seem to have a Tenant.tenantKey property (and db column). Did you mean to try to link the two up somehow, or is tenantKey a natural ID you might be using instead of the ID property?"}],"owner":{"account_id":5701253,"reputation":4320,"user_id":4506140,"accept_rate":73,"display_name":"Jude Niroshan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":666,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665669247,"creation_date":1665650174,"question_id":74052772,"body_markdown":"I want to implement a simple uni-directional one-to-many association. I have tried the below setup. But when I fetch the `Tenant` entity, I always see `null` for the `subscriptions` field.\r\n\r\n\r\n\r\n    @Getter\r\n    @Setter\r\n    @Entity\r\n    @ToString\r\n    public class Tenant {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private long id;\r\n        private String tenantKey;\r\n\r\n        @OneToMany(fetch = FetchType.EAGER)\r\n        @JoinColumn(name=&quot;tenantKey&quot;)\r\n        private Set&lt;Subscription&gt; subscriptions;\r\n    \r\n        public Set&lt;Subscription&gt; getSubscriptions() {\r\n            return subscriptions;\r\n        }\r\n    \r\n        public void setSubscriptions(Set&lt;Subscription&gt; subscriptions) {\r\n            this.subscriptions = subscriptions;\r\n        }\r\n    }\r\n\r\nand below is the Subscription entity\r\n\r\n    @Entity\r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    public class Subscription {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private long id;\r\n        private String tenantKey;\r\n        private String serviceName;\r\n    }\r\n\r\nBelow is my repository class which I fetch the `Tenant` object\r\n\r\n    @ApplicationScoped\r\n    public class TenantRepository implements PanacheRepository&lt;Tenant&gt; {\r\n    \r\n        public Uni&lt;Tenant&gt; findByTenantKey(String tenantKey) {\r\n            return find(&quot;tenantKey= ?1&quot;, tenantKey).firstResult();\r\n        }\r\n    }\r\n\r\n","title":"Quarkus panache unidirectional OneToMany relationship","body":"<p>I want to implement a simple uni-directional one-to-many association. I have tried the below setup. But when I fetch the <code>Tenant</code> entity, I always see <code>null</code> for the <code>subscriptions</code> field.</p>\n<pre><code>@Getter\n@Setter\n@Entity\n@ToString\npublic class Tenant {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n    private String tenantKey;\n\n    @OneToMany(fetch = FetchType.EAGER)\n    @JoinColumn(name=&quot;tenantKey&quot;)\n    private Set&lt;Subscription&gt; subscriptions;\n\n    public Set&lt;Subscription&gt; getSubscriptions() {\n        return subscriptions;\n    }\n\n    public void setSubscriptions(Set&lt;Subscription&gt; subscriptions) {\n        this.subscriptions = subscriptions;\n    }\n}\n</code></pre>\n<p>and below is the Subscription entity</p>\n<pre><code>@Entity\n@Getter\n@Setter\n@ToString\npublic class Subscription {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n    private String tenantKey;\n    private String serviceName;\n}\n</code></pre>\n<p>Below is my repository class which I fetch the <code>Tenant</code> object</p>\n<pre><code>@ApplicationScoped\npublic class TenantRepository implements PanacheRepository&lt;Tenant&gt; {\n\n    public Uni&lt;Tenant&gt; findByTenantKey(String tenantKey) {\n        return find(&quot;tenantKey= ?1&quot;, tenantKey).firstResult();\n    }\n}\n</code></pre>\n"},{"tags":["java","security","servlets","passwords","http-headers"],"comments":[{"owner":{"account_id":281678,"reputation":5500,"user_id":578116,"accept_rate":68,"display_name":"smk"},"score":0,"creation_date":1361503267,"post_id":15016250,"comment_id":21097978,"body_markdown":"Isnt everything 1s and 0s.. How is a string more of a security threat than a byte[] ?","body":"Isnt everything 1s and 0s.. How is a string more of a security threat than a byte[] ?"},{"owner":{"account_id":218120,"reputation":52212,"user_id":474283,"display_name":"Cameron Skinner"},"score":3,"creation_date":1361503544,"post_id":15016250,"comment_id":21098037,"body_markdown":"@smk: Because `String`s can be interned, which means they stick around in memory long after you&#39;ve finished using them.","body":"@smk: Because <code>String</code>s can be interned, which means they stick around in memory long after you&#39;ve finished using them."},{"owner":{"account_id":75277,"reputation":33915,"user_id":215974,"display_name":"cheeken"},"score":7,"creation_date":1361503551,"post_id":15016250,"comment_id":21098038,"body_markdown":"@smk Strings are immutable.  Once you have one, it&#39;s going to hang around in memory until it&#39;s garbage-collected (long after you&#39;re done with it).  With a `byte[]`, once you&#39;re done with it, you can overwrite the contents to prevent the data from being read.","body":"@smk Strings are immutable.  Once you have one, it&#39;s going to hang around in memory until it&#39;s garbage-collected (long after you&#39;re done with it).  With a <code>byte[]</code>, once you&#39;re done with it, you can overwrite the contents to prevent the data from being read."},{"owner":{"account_id":444729,"reputation":27341,"user_id":836738,"display_name":"Tim Pote"},"score":1,"creation_date":1361503694,"post_id":15016250,"comment_id":21098073,"body_markdown":"@CameronSkinner It has nothing to do with interning (although that does exacerbate the problem).  Even a String in heap space that has yet to be garbage collected is still available in its immutable entirety in memory.","body":"@CameronSkinner It has nothing to do with interning (although that does exacerbate the problem).  Even a String in heap space that has yet to be garbage collected is still available in its immutable entirety in memory."},{"owner":{"account_id":281678,"reputation":5500,"user_id":578116,"accept_rate":68,"display_name":"smk"},"score":0,"creation_date":1361504278,"post_id":15016250,"comment_id":21098204,"body_markdown":"Thanks guys. This is why i love SO.","body":"Thanks guys. This is why i love SO."},{"owner":{"account_id":141815,"reputation":33481,"user_id":349112,"display_name":"tc."},"score":0,"creation_date":1361506761,"post_id":15016250,"comment_id":21098833,"body_markdown":"Of course, a good optimizer can potentially notice that the array will never be read from again and get rid of the zeroing. The garbage collector can also move the memory backing an array around. `ByteBuffer.allocateDirect()` should be reasonably safe...","body":"Of course, a good optimizer can potentially notice that the array will never be read from again and get rid of the zeroing. The garbage collector can also move the memory backing an array around. <code>ByteBuffer.allocateDirect()</code> should be reasonably safe..."},{"owner":{"account_id":76511,"reputation":44893,"user_id":218978,"accept_rate":100,"display_name":"irreputable"},"score":1,"creation_date":1361506812,"post_id":15016250,"comment_id":21098848,"body_markdown":"Maybe this concern has some validity on a client machine, but none on a server machine, where a lot more critical secrets are easily accessible.","body":"Maybe this concern has some validity on a client machine, but none on a server machine, where a lot more critical secrets are easily accessible."},{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":1,"creation_date":1430507193,"post_id":15016250,"comment_id":48106047,"body_markdown":"See   http://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords","body":"See   <a href=\"http://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords\" title=\"why is char preferred over string for passwords\">stackoverflow.com/questions/8881291/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":2399959,"reputation":3504,"user_id":2097858,"display_name":"Daniel S."},"score":0,"creation_date":1361505930,"post_id":15016494,"comment_id":21098580,"body_markdown":"As far as #1 goes, does Java define what possible consequences there might occur there?  Let&#39;s say there already exists an equal string in memory somewhere, for example as a key in a hashtable.  Is Java implementation allowed to map both strings to the same &quot;text backing store&quot; in this case (sorry I don&#39;t know the precise Java terminology here)?  If that is so, by explicitly clearing out the strings coming in with HTTP packets I could in fact be opening a vicious DOS security hole in my application.","body":"As far as #1 goes, does Java define what possible consequences there might occur there?  Let&#39;s say there already exists an equal string in memory somewhere, for example as a key in a hashtable.  Is Java implementation allowed to map both strings to the same &quot;text backing store&quot; in this case (sorry I don&#39;t know the precise Java terminology here)?  If that is so, by explicitly clearing out the strings coming in with HTTP packets I could in fact be opening a vicious DOS security hole in my application."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1361515702,"post_id":15016494,"comment_id":21101385,"body_markdown":"It could do that.  But in practice, it will only do that if something calls `String.intern()` on BOTH of the strings.  The other possibility is that the password string shares backing with a larger string; e.g. the string representing the header line.  I would not expect either of these scenarios to be a problem.","body":"It could do that.  But in practice, it will only do that if something calls <code>String.intern()</code> on BOTH of the strings.  The other possibility is that the password string shares backing with a larger string; e.g. the string representing the header line.  I would not expect either of these scenarios to be a problem."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1499313116,"post_id":15016494,"comment_id":76855144,"body_markdown":"Actually, there is another scenario.  That is older JVMs where the implementation of `String` would share the `char[]` backing array between different strings in some situations.  The implementation of String was rewritten in Java 1.7.0_u6 to fix this.  (It was a source of memory leaks!)","body":"Actually, there is another scenario.  That is older JVMs where the implementation of <code>String</code> would share the <code>char[]</code> backing array between different strings in some situations.  The implementation of String was rewritten in Java 1.7.0_u6 to fix this.  (It was a source of memory leaks!)"}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":3,"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1665669228,"creation_date":1361504912,"answer_id":15016494,"question_id":15016250,"body_markdown":"The simple answer is that you can&#39;t get the parameter in any other form than a String.   At least, not using the standard servlet APIs.  But there are a couple of possible &quot;get outs&quot;.\r\n\r\n  1. If you are prepared to get really ugly, you can in fact break the abstraction of the String object, and reach in and overwrite the characters.  (Strings are in fact mutable if you are prepared to break the rules.  This is one of the few situations where this might be justified.)\r\n\r\n  1. There might be a nonstandard API extension in your web container&#39;s implementation of (say) `HttpServletRequest` for doing this.  If not, you may be able to get hold of the source code and add one.  (Assuming you are using an open-source web container.)\r\n\r\n---------------------------\r\n\r\nHaving said that, IMO the &quot;no strings&quot; approach to Java security is misguided, or at least over-rated in terms of what it achieves.  \r\n\r\nThe &quot;no strings&quot; approach guards against the possibility that something can trawl through the address space of your application, locate things that look like strings, and sniff out possible passwords.  In theory, this could be done by:\r\n  \r\n  - a hacked (or vulnerable) Java application that breaks the JVM&#39;s execution model and looks at the raw memory,\r\n  - attaching a Java debugger and trawling through the reachable objects,\r\n  - using &quot;/dev/mem&quot; or similar to read process memory from the outside, \r\n  - accessing the remains of a program&#39;s swap image on the hard drive, or\r\n  - somehow causing it to core dump and reading the dump.\r\n\r\nHowever, all but the first of these requires that the bad guy has already broken security on the system.  And if the bad guy has done that there are other (probably simpler) ways to steal passwords from your program ... which the &quot;no strings&quot; approach won&#39;t prevent.  \r\n\r\nAnd if you are worried about a hack that exploits a Java security flaw to read raw memory, that flaw could probably used in other ways; e.g. to inject code to alter the way that the passwords are handled by the code.\r\n\r\nSo in summary, &quot;no strings&quot; is protecting against either really difficult hacks, or against cases where your security *is already* blown.  IMO&lt;sup&gt;1&lt;/sup&gt;, it is not worth the effort ... unless you are *required* to implement military grade security.\r\n\r\n------------------\r\n\r\n&lt;sup&gt;1 - See https://stackoverflow.com/questions/8881291 for other viewpoints.&lt;/sup&gt;\r\n\r\n","title":"In Java, how do I extract a password from a HttpServletRequest header without generating a String object?","body":"<p>The simple answer is that you can't get the parameter in any other form than a String.   At least, not using the standard servlet APIs.  But there are a couple of possible &quot;get outs&quot;.</p>\n<ol>\n<li><p>If you are prepared to get really ugly, you can in fact break the abstraction of the String object, and reach in and overwrite the characters.  (Strings are in fact mutable if you are prepared to break the rules.  This is one of the few situations where this might be justified.)</p>\n</li>\n<li><p>There might be a nonstandard API extension in your web container's implementation of (say) <code>HttpServletRequest</code> for doing this.  If not, you may be able to get hold of the source code and add one.  (Assuming you are using an open-source web container.)</p>\n</li>\n</ol>\n<hr />\n<p>Having said that, IMO the &quot;no strings&quot; approach to Java security is misguided, or at least over-rated in terms of what it achieves.</p>\n<p>The &quot;no strings&quot; approach guards against the possibility that something can trawl through the address space of your application, locate things that look like strings, and sniff out possible passwords.  In theory, this could be done by:</p>\n<ul>\n<li>a hacked (or vulnerable) Java application that breaks the JVM's execution model and looks at the raw memory,</li>\n<li>attaching a Java debugger and trawling through the reachable objects,</li>\n<li>using &quot;/dev/mem&quot; or similar to read process memory from the outside,</li>\n<li>accessing the remains of a program's swap image on the hard drive, or</li>\n<li>somehow causing it to core dump and reading the dump.</li>\n</ul>\n<p>However, all but the first of these requires that the bad guy has already broken security on the system.  And if the bad guy has done that there are other (probably simpler) ways to steal passwords from your program ... which the &quot;no strings&quot; approach won't prevent.</p>\n<p>And if you are worried about a hack that exploits a Java security flaw to read raw memory, that flaw could probably used in other ways; e.g. to inject code to alter the way that the passwords are handled by the code.</p>\n<p>So in summary, &quot;no strings&quot; is protecting against either really difficult hacks, or against cases where your security <em>is already</em> blown.  IMO<sup>1</sup>, it is not worth the effort ... unless you are <em>required</em> to implement military grade security.</p>\n<hr />\n<p><sup>1 - See <a href=\"https://stackoverflow.com/questions/8881291\">Why is char[] preferred over String for passwords?</a> for other viewpoints.</sup></p>\n"}],"owner":{"account_id":2399959,"reputation":3504,"user_id":2097858,"display_name":"Daniel S."},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1587,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":15016494,"answer_count":1,"score":16,"last_activity_date":1665669228,"creation_date":1361503139,"question_id":15016250,"body_markdown":"A common Java security guideline for handling sensitive data (== passwords) recommends never using a String object to store the data, and instead using an array of bytes or chars.  I am trying to apply this guideline in a HttpServlet handler.  In particular, I am using a basic-authentication-like approach where the credentials are passed in in a header (this is a GET request, so no body).\r\n\r\nThe issue I&#39;m running into is that it seems impossible to get to the header data without generating a String object, which violates the guideline from the get-go.  I&#39;ve searched for a solution pretty thoroughly, and didn&#39;t find any relevant discussion.  Does anybody have any insight into this issue?\r\n\r\nNOTE: this takes place over HTTPS, so there is no connection security problem here.","title":"In Java, how do I extract a password from a HttpServletRequest header without generating a String object?","body":"<p>A common Java security guideline for handling sensitive data (== passwords) recommends never using a String object to store the data, and instead using an array of bytes or chars.  I am trying to apply this guideline in a HttpServlet handler.  In particular, I am using a basic-authentication-like approach where the credentials are passed in in a header (this is a GET request, so no body).</p>\n\n<p>The issue I'm running into is that it seems impossible to get to the header data without generating a String object, which violates the guideline from the get-go.  I've searched for a solution pretty thoroughly, and didn't find any relevant discussion.  Does anybody have any insight into this issue?</p>\n\n<p>NOTE: this takes place over HTTPS, so there is no connection security problem here.</p>\n"},{"tags":["java","spring","spring-boot","hibernate","spring-data-jpa"],"answers":[{"comments":[{"owner":{"account_id":18606859,"reputation":183,"user_id":13560278,"display_name":"maciejd"},"score":0,"creation_date":1665648051,"post_id":74051690,"comment_id":130750267,"body_markdown":"Unfortunately, doesn&#39;t work","body":"Unfortunately, doesn&#39;t work"}],"tags":[],"owner":{"account_id":26562047,"reputation":61,"user_id":20189731,"display_name":"mildgrey"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665644803,"creation_date":1665644755,"answer_id":74051690,"question_id":74051625,"body_markdown":"    @OneToMany\r\n    @JoinColumn(name = &quot;orderId&quot;, referencedColumnName = &quot;productId&quot;)// try orderId\r\n    private List&lt;Product&gt; productList = new ArrayList&lt;&gt;();","title":"Unable to find column with logical name - hibernate exception when using @OneToMany and @JoinColumn","body":"<pre><code>@OneToMany\n@JoinColumn(name = &quot;orderId&quot;, referencedColumnName = &quot;productId&quot;)// try orderId\nprivate List&lt;Product&gt; productList = new ArrayList&lt;&gt;();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":18606859,"reputation":183,"user_id":13560278,"display_name":"maciejd"},"score":0,"creation_date":1665647421,"post_id":74051801,"comment_id":130750067,"body_markdown":"Unfortunately, this is not a solution - in this case Hibernate requires a column with foreign key in products table (and I need it in orders, therefore I use @JoinColumn in Orders entity) ```SchemaManagementException: Schema-validation: missing column [order_orderId] in table [products] ```","body":"Unfortunately, this is not a solution - in this case Hibernate requires a column with foreign key in products table (and I need it in orders, therefore I use @JoinColumn in Orders entity) <code>SchemaManagementException: Schema-validation: missing column [order_orderId] in table [products] </code>"}],"tags":[],"owner":{"account_id":26557785,"reputation":159,"user_id":20186121,"display_name":"Abhishek Kumar Jena"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665645300,"creation_date":1665645300,"answer_id":74051801,"question_id":74051625,"body_markdown":"Once you try this \r\nhope this will work out\r\n\r\nchange to this in **Order.java**\r\n\r\n    @OneToMany(cascade = CascadeType.ALL, mappedBy= &quot;order&quot;)\r\n    private List&lt;Product&gt; productList = new ArrayList&lt;&gt;();\r\n\r\nadd this in **Product.java**\r\n\r\n    @ManyToOne\r\n    @JsonIgnore\r\n    private Order order;\r\n\r\nlet me know","title":"Unable to find column with logical name - hibernate exception when using @OneToMany and @JoinColumn","body":"<p>Once you try this\nhope this will work out</p>\n<p>change to this in <strong>Order.java</strong></p>\n<pre><code>@OneToMany(cascade = CascadeType.ALL, mappedBy= &quot;order&quot;)\nprivate List&lt;Product&gt; productList = new ArrayList&lt;&gt;();\n</code></pre>\n<p>add this in <strong>Product.java</strong></p>\n<pre><code>@ManyToOne\n@JsonIgnore\nprivate Order order;\n</code></pre>\n<p>let me know</p>\n"},{"tags":[],"owner":{"account_id":25495448,"reputation":1,"user_id":19289580,"display_name":"NandaniK"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665659329,"creation_date":1665659329,"answer_id":74054783,"question_id":74051625,"body_markdown":"You should try this too.\r\n \r\n    @OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;order&quot;)\r\n    private List&lt;Product&gt; productList = new ArrayList&lt;&gt;();\r\n\r\n\r\nalong with this in Product.java\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;productId&quot;,\r\n            foreignKey = @ForeignKey(\r\n                    name = &quot;product_id_fk&quot;))\r\n    private Order order;","title":"Unable to find column with logical name - hibernate exception when using @OneToMany and @JoinColumn","body":"<p>You should try this too.</p>\n<pre><code>@OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;order&quot;)\nprivate List&lt;Product&gt; productList = new ArrayList&lt;&gt;();\n</code></pre>\n<p>along with this in Product.java</p>\n<pre><code>@ManyToOne\n@JoinColumn(name = &quot;productId&quot;,\n        foreignKey = @ForeignKey(\n                name = &quot;product_id_fk&quot;))\nprivate Order order;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6484184,"reputation":2035,"user_id":5020294,"display_name":"Andriy Slobodyanyk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665669224,"creation_date":1665669224,"answer_id":74056968,"question_id":74051625,"body_markdown":"First, let&#39;s clarify what 1 is and what many are at your schema. As Order has a reference to Product that means many Orders might be related to the same Product, mightn&#39;t they? A bidirectional relationship is usually preferred but you need the unidirectional one, it should be something like\r\n\r\n    public class Order {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long orderId;\r\n\r\n        @Column\r\n        private String clientName;\r\n    }\r\n\r\nand\r\n\r\n    public class Product {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long productId;\r\n\r\n        @Column\r\n        private String name;\r\n\r\n        @OneToMany\r\n        @JoinColumn(name = &quot;productIdFK&quot;, referencedColumnName = &quot;productId&quot;)\r\n        private List&lt;Order&gt; orderList = new ArrayList&lt;&gt;();\r\n}","title":"Unable to find column with logical name - hibernate exception when using @OneToMany and @JoinColumn","body":"<p>First, let's clarify what 1 is and what many are at your schema. As Order has a reference to Product that means many Orders might be related to the same Product, mightn't they? A bidirectional relationship is usually preferred but you need the unidirectional one, it should be something like</p>\n<pre><code>public class Order {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long orderId;\n\n    @Column\n    private String clientName;\n}\n</code></pre>\n<p>and</p>\n<pre><code>public class Product {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long productId;\n\n    @Column\n    private String name;\n\n    @OneToMany\n    @JoinColumn(name = &quot;productIdFK&quot;, referencedColumnName = &quot;productId&quot;)\n    private List&lt;Order&gt; orderList = new ArrayList&lt;&gt;();\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":18606859,"reputation":183,"user_id":13560278,"display_name":"maciejd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1665669224,"creation_date":1665644298,"question_id":74051625,"body_markdown":"I have got two entities in my application Orders and Products (one-to-many association). I am aiming to set up a unidirectional OneToMany relationship in Order entity (I&#39;m aware that it is not the best solution, however this is a business requirement). The database schema is generated by Liquibase and validated by Hibernate. Entities have been simplified for the sake of clarity. Database is Postgres.\r\n\r\nAlthough the schema is created correctly, Hibernate throws an exception:\r\n\r\n```\r\nCaused by: org.hibernate.cfg.RecoverableException: Unable to find column with logical name: productId in org.hibernate.mapping.Table(orders) and its related supertables and secondary tables\r\n\tat org.hibernate.cfg.Ejb3JoinColumn.checkReferencedColumnsType(Ejb3JoinColumn.java:844) ~[hibernate-core-5.6.11.Final.jar:5.6.11.Final]\r\n\tat org.hibernate.cfg.BinderHelper.createSyntheticPropertyReference(BinderHelper.java:126) ~[hibernate-core-5.6.11.Final.jar:5.6.11.Final]\r\n\tat org.hibernate.cfg.annotations.CollectionBinder.bindCollectionSecondPass(CollectionBinder.java:1740) ~[hibernate-core-5.6.11.Final.jar:5.6.11.Final]\r\n\t... 37 common frames omitted\r\nCaused by: org.hibernate.MappingException: Unable to find column with logical name: productId in org.hibernate.mapping.Table(orders) and its related supertables and secondary tables\r\n\tat org.hibernate.cfg.Ejb3JoinColumn.checkReferencedColumnsType(Ejb3JoinColumn.java:839) ~[hibernate-core-5.6.11.Final.jar:5.6.11.Final]\r\n\t... 39 common frames omitted\r\n```\r\n\r\nTo prove that the schema is generated appropriately, I replaced *@OneToMany* annotation with *@ManyToOne* and **it works fine**! All of the sudden, Hibernate is able to find the column. After that I began assuming that there is some kind of bug in Hibernate...\r\n\r\nDoes anyone have an idea, how to solve this issue?\r\n\r\nMy code looks as follows:\r\n\r\n**Order.java**\r\n```\r\n@Entity\r\n@Table(name = &quot;orders&quot;)\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\npublic class Order {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long orderId;\r\n\r\n    @Column\r\n    private String clientName;\r\n\r\n    @OneToMany\r\n    @JoinColumn(name = &quot;productIdFK&quot;, referencedColumnName = &quot;productId&quot;)\r\n    private List&lt;Product&gt; productList = new ArrayList&lt;&gt;();\r\n\r\n}\r\n```\r\n\r\n**Product.java**\r\n```\r\n@Entity\r\n@Table(name = &quot;products&quot;)\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\npublic class Product {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long productId;\r\n\r\n    @Column\r\n    private String name;\r\n}\r\n```\r\n\r\n**Liquibase script**\r\n```\r\n{\r\n  &quot;databaseChangeLog&quot;: [\r\n    {\r\n      &quot;changeSet&quot;: {\r\n        &quot;id&quot;: &quot;Create PRODUCT table&quot;,\r\n        &quot;author&quot;: &quot;me&quot;,\r\n        &quot;changes&quot;: [\r\n          {\r\n            &quot;createTable&quot;: {\r\n              &quot;tableName&quot;: &quot;products&quot;,\r\n              &quot;columns&quot;: [\r\n                {\r\n                  &quot;column&quot;: {\r\n                    &quot;name&quot;: &quot;productId&quot;,\r\n                    &quot;type&quot;: &quot;bigint&quot;,\r\n                    &quot;constraints&quot;: {\r\n                      &quot;nullable&quot;: false,\r\n                      &quot;unique&quot;: true,\r\n                      &quot;primaryKey&quot;: true\r\n                    }\r\n                  }\r\n                },\r\n                {\r\n                  &quot;column&quot;: {\r\n                    &quot;name&quot;: &quot;name&quot;,\r\n                    &quot;type&quot;: &quot;varchar(250)&quot;,\r\n                    &quot;constraints&quot;: {\r\n                      &quot;nullable&quot;: true,\r\n                      &quot;unique&quot;: false\r\n                    }\r\n                  }\r\n                }\r\n              ]\r\n            }\r\n          },\r\n          {\r\n            &quot;createTable&quot;: {\r\n              &quot;tableName&quot;: &quot;orders&quot;,\r\n              &quot;columns&quot;: [\r\n                {\r\n                  &quot;column&quot;: {\r\n                    &quot;name&quot;: &quot;orderId&quot;,\r\n                    &quot;type&quot;: &quot;bigint&quot;,\r\n                    &quot;constraints&quot;: {\r\n                      &quot;nullable&quot;: false,\r\n                      &quot;unique&quot;: true,\r\n                      &quot;primaryKey&quot;: true\r\n                    }\r\n                  }\r\n                },\r\n                {\r\n                  &quot;column&quot;: {\r\n                    &quot;name&quot;: &quot;clientName&quot;,\r\n                    &quot;type&quot;: &quot;varchar(250)&quot;,\r\n                    &quot;constraints&quot;: {\r\n                      &quot;nullable&quot;: true,\r\n                      &quot;unique&quot;: false\r\n                    }\r\n                  }\r\n                },\r\n                {\r\n                  &quot;column&quot;: {\r\n                    &quot;name&quot;: &quot;productIdFK&quot;,\r\n                    &quot;type&quot;: &quot;bigint&quot;,\r\n                    &quot;constraints&quot;: {\r\n                      &quot;nullable&quot;: true,\r\n                      &quot;unique&quot;: false\r\n                    }\r\n                  }\r\n                }\r\n              ]\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n**Snippet from liquibase script generating relationships**\r\n```\r\n{\r\n            &quot;addForeignKeyConstraint&quot;: {\r\n              &quot;constraintName&quot;: &quot;fk_product_order&quot;,\r\n              &quot;baseColumnNames&quot;: &quot;productIdFK&quot;,\r\n              &quot;baseTableName&quot;: &quot;orders&quot;,\r\n              &quot;referencedColumnNames&quot;: &quot;productId&quot;,\r\n              &quot;referencedTableName&quot;: &quot;products&quot;\r\n            }\r\n          }\r\n```","title":"Unable to find column with logical name - hibernate exception when using @OneToMany and @JoinColumn","body":"<p>I have got two entities in my application Orders and Products (one-to-many association). I am aiming to set up a unidirectional OneToMany relationship in Order entity (I'm aware that it is not the best solution, however this is a business requirement). The database schema is generated by Liquibase and validated by Hibernate. Entities have been simplified for the sake of clarity. Database is Postgres.</p>\n<p>Although the schema is created correctly, Hibernate throws an exception:</p>\n<pre><code>Caused by: org.hibernate.cfg.RecoverableException: Unable to find column with logical name: productId in org.hibernate.mapping.Table(orders) and its related supertables and secondary tables\n    at org.hibernate.cfg.Ejb3JoinColumn.checkReferencedColumnsType(Ejb3JoinColumn.java:844) ~[hibernate-core-5.6.11.Final.jar:5.6.11.Final]\n    at org.hibernate.cfg.BinderHelper.createSyntheticPropertyReference(BinderHelper.java:126) ~[hibernate-core-5.6.11.Final.jar:5.6.11.Final]\n    at org.hibernate.cfg.annotations.CollectionBinder.bindCollectionSecondPass(CollectionBinder.java:1740) ~[hibernate-core-5.6.11.Final.jar:5.6.11.Final]\n    ... 37 common frames omitted\nCaused by: org.hibernate.MappingException: Unable to find column with logical name: productId in org.hibernate.mapping.Table(orders) and its related supertables and secondary tables\n    at org.hibernate.cfg.Ejb3JoinColumn.checkReferencedColumnsType(Ejb3JoinColumn.java:839) ~[hibernate-core-5.6.11.Final.jar:5.6.11.Final]\n    ... 39 common frames omitted\n</code></pre>\n<p>To prove that the schema is generated appropriately, I replaced <em>@OneToMany</em> annotation with <em>@ManyToOne</em> and <strong>it works fine</strong>! All of the sudden, Hibernate is able to find the column. After that I began assuming that there is some kind of bug in Hibernate...</p>\n<p>Does anyone have an idea, how to solve this issue?</p>\n<p>My code looks as follows:</p>\n<p><strong>Order.java</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;orders&quot;)\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class Order {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long orderId;\n\n    @Column\n    private String clientName;\n\n    @OneToMany\n    @JoinColumn(name = &quot;productIdFK&quot;, referencedColumnName = &quot;productId&quot;)\n    private List&lt;Product&gt; productList = new ArrayList&lt;&gt;();\n\n}\n</code></pre>\n<p><strong>Product.java</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;products&quot;)\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class Product {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long productId;\n\n    @Column\n    private String name;\n}\n</code></pre>\n<p><strong>Liquibase script</strong></p>\n<pre><code>{\n  &quot;databaseChangeLog&quot;: [\n    {\n      &quot;changeSet&quot;: {\n        &quot;id&quot;: &quot;Create PRODUCT table&quot;,\n        &quot;author&quot;: &quot;me&quot;,\n        &quot;changes&quot;: [\n          {\n            &quot;createTable&quot;: {\n              &quot;tableName&quot;: &quot;products&quot;,\n              &quot;columns&quot;: [\n                {\n                  &quot;column&quot;: {\n                    &quot;name&quot;: &quot;productId&quot;,\n                    &quot;type&quot;: &quot;bigint&quot;,\n                    &quot;constraints&quot;: {\n                      &quot;nullable&quot;: false,\n                      &quot;unique&quot;: true,\n                      &quot;primaryKey&quot;: true\n                    }\n                  }\n                },\n                {\n                  &quot;column&quot;: {\n                    &quot;name&quot;: &quot;name&quot;,\n                    &quot;type&quot;: &quot;varchar(250)&quot;,\n                    &quot;constraints&quot;: {\n                      &quot;nullable&quot;: true,\n                      &quot;unique&quot;: false\n                    }\n                  }\n                }\n              ]\n            }\n          },\n          {\n            &quot;createTable&quot;: {\n              &quot;tableName&quot;: &quot;orders&quot;,\n              &quot;columns&quot;: [\n                {\n                  &quot;column&quot;: {\n                    &quot;name&quot;: &quot;orderId&quot;,\n                    &quot;type&quot;: &quot;bigint&quot;,\n                    &quot;constraints&quot;: {\n                      &quot;nullable&quot;: false,\n                      &quot;unique&quot;: true,\n                      &quot;primaryKey&quot;: true\n                    }\n                  }\n                },\n                {\n                  &quot;column&quot;: {\n                    &quot;name&quot;: &quot;clientName&quot;,\n                    &quot;type&quot;: &quot;varchar(250)&quot;,\n                    &quot;constraints&quot;: {\n                      &quot;nullable&quot;: true,\n                      &quot;unique&quot;: false\n                    }\n                  }\n                },\n                {\n                  &quot;column&quot;: {\n                    &quot;name&quot;: &quot;productIdFK&quot;,\n                    &quot;type&quot;: &quot;bigint&quot;,\n                    &quot;constraints&quot;: {\n                      &quot;nullable&quot;: true,\n                      &quot;unique&quot;: false\n                    }\n                  }\n                }\n              ]\n            }\n          }\n        ]\n      }\n    }\n  ]\n}\n</code></pre>\n<p><strong>Snippet from liquibase script generating relationships</strong></p>\n<pre><code>{\n            &quot;addForeignKeyConstraint&quot;: {\n              &quot;constraintName&quot;: &quot;fk_product_order&quot;,\n              &quot;baseColumnNames&quot;: &quot;productIdFK&quot;,\n              &quot;baseTableName&quot;: &quot;orders&quot;,\n              &quot;referencedColumnNames&quot;: &quot;productId&quot;,\n              &quot;referencedTableName&quot;: &quot;products&quot;\n            }\n          }\n</code></pre>\n"},{"tags":["java","c#","unit-testing"],"comments":[{"owner":{"account_id":16750514,"reputation":856,"user_id":12107765,"display_name":"Klamsi"},"score":1,"creation_date":1665668334,"post_id":74056722,"comment_id":130757056,"body_markdown":"puh, much stuff. One thing you always have to ask yourself if your test gets complicated: Is my function doing too much?","body":"puh, much stuff. One thing you always have to ask yourself if your test gets complicated: Is my function doing too much?"},{"owner":{"display_name":"user13314823"},"score":0,"creation_date":1665668792,"post_id":74056722,"comment_id":130757228,"body_markdown":"@Klamsi while this is absolutely true, I have scenarios where, even though my function is doing little, it has more than one unexpected error scenarios, where it should throw an exception. So I would still need to test each scenario to verify if the function behaves as it should. So I think the question remains.","body":"@Klamsi while this is absolutely true, I have scenarios where, even though my function is doing little, it has more than one unexpected error scenarios, where it should throw an exception. So I would still need to test each scenario to verify if the function behaves as it should. So I think the question remains."},{"owner":{"account_id":16750514,"reputation":856,"user_id":12107765,"display_name":"Klamsi"},"score":1,"creation_date":1665668872,"post_id":74056722,"comment_id":130757257,"body_markdown":"Ah ok. I use special exception classes if I want to be sure it&#39;s the right exception that is thrown.","body":"Ah ok. I use special exception classes if I want to be sure it&#39;s the right exception that is thrown."},{"owner":{"display_name":"user13314823"},"score":0,"creation_date":1665669413,"post_id":74056722,"comment_id":130757452,"body_markdown":"@Klamsi cool. So like the &quot;HiImFooAndTheApiThatICalledFailed_Exception&quot; approach? Or you would try to make it more generic so it can be used by other classes too? If you have no problem with making it very specific, where would you put the class? In a folder that centralizes the exceptions of the layer/context, or together with the class that throws it?","body":"@Klamsi cool. So like the &quot;HiImFooAndTheApiThatICalledFailed_Exception&quot; approach? Or you would try to make it more generic so it can be used by other classes too? If you have no problem with making it very specific, where would you put the class? In a folder that centralizes the exceptions of the layer/context, or together with the class that throws it?"},{"owner":{"account_id":16750514,"reputation":856,"user_id":12107765,"display_name":"Klamsi"},"score":1,"creation_date":1665669964,"post_id":74056722,"comment_id":130757617,"body_markdown":"Yes like that. But I would not overdo that concept. Do you relly care about the exeption class in all cases? If you for example say: wrong paremeters =&gt; exception; right parameters =&gt; OK and your module behaves like that it works as expected.","body":"Yes like that. But I would not overdo that concept. Do you relly care about the exeption class in all cases? If you for example say: wrong paremeters =&gt; exception; right parameters =&gt; OK and your module behaves like that it works as expected."},{"owner":{"display_name":"user13314823"},"score":0,"creation_date":1665670628,"post_id":74056722,"comment_id":130757883,"body_markdown":"This sounds very reasonable. Thank you @Klamsi","body":"This sounds very reasonable. Thank you @Klamsi"}],"answers":[{"comments":[{"owner":{"display_name":"user13314823"},"score":0,"creation_date":1665670740,"post_id":74056962,"comment_id":130757922,"body_markdown":"&quot;You can mock other dependency and check that no methods were called&quot; this definitely solves my problem. Thank you very much. I didn&#39;t think of that.","body":"&quot;You can mock other dependency and check that no methods were called&quot; this definitely solves my problem. Thank you very much. I didn&#39;t think of that."}],"tags":[],"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665669209,"creation_date":1665669209,"answer_id":74056962,"question_id":74056722,"body_markdown":"You can mock other dependency and check that no methods where called. So if you get exception you will be sure it is from your code.\r\n\r\nIf you code can throw exception in several different scenarios you test them all separately.\r\n\r\nYou don&#39;t need to worry about which piece of your code thrown exception, only that correct exception was thrown.\r\n\r\nAs long as you have test for all scenarios you can be reasonably sure you code is fine. Just treat it as black box. If all inputs give you expected outputs it doesn&#39;t matter how it happens.","title":"While unit testing if an exception is being thrown, how can I know if the exception was thrown due to the error that I setted up?","body":"<p>You can mock other dependency and check that no methods where called. So if you get exception you will be sure it is from your code.</p>\n<p>If you code can throw exception in several different scenarios you test them all separately.</p>\n<p>You don't need to worry about which piece of your code thrown exception, only that correct exception was thrown.</p>\n<p>As long as you have test for all scenarios you can be reasonably sure you code is fine. Just treat it as black box. If all inputs give you expected outputs it doesn't matter how it happens.</p>\n"}],"owner":{"display_name":"user13314823"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74056962,"answer_count":1,"score":0,"last_activity_date":1665669209,"creation_date":1665668199,"question_id":74056722,"body_markdown":"**TL;DR version**: \r\n\r\nHow should I known if my method is throwing an exception because of the error scenario that I configured and not because of another error? Also, should I always configure everything in order to test if an exception is being thrown, or only configuring what is used to the point where the exception is thrown is enough?\r\n\r\n**Long version:**\r\n\r\nI have a class, MyClass, which has a method called foo. The method foo calls an API that returns an object indicating if the operation succeded. If the object returned by the API indicates an error, the foo method should throw an unchecked exception.\r\n\r\nIn order to test if foo is throwing the exception, I&#39;m mocking the API, so that it always indicates a fail. The foo method is working as expected, throwing an exception.\r\n\r\nIt is true, however, that other things can make foo throw exceptions. For instance, if the API succeds but other dependency of fool fails, fool will and should throw an excpetion.\r\n\r\nBecause of that, in order to test if foo is throwing an exception as results of a fail in the API, I need to mock every other dependency that foo has. Because of that, the unit test that tests if foo throws an exception when the API fails gets too big. This is also true for every other test involving exceptions.\r\n\r\nThe worst part is that, at the end of the day, I&#39;m always questioning, is it throwing an exception because the API failed, or because there&#39;s another error happening?\r\n\r\nThe solution I can think is creating exception for every possible case of failure, like &quot;HiImFooAndTheApiThatICalledFailed_Exception&quot;. I&#39;m not sure if this is a reaonable approach though. Other solution is testing the exception&#39;s message, but I think this is bad because I would be limiting message to be static.\r\n","title":"While unit testing if an exception is being thrown, how can I know if the exception was thrown due to the error that I setted up?","body":"<p><strong>TL;DR version</strong>:</p>\n<p>How should I known if my method is throwing an exception because of the error scenario that I configured and not because of another error? Also, should I always configure everything in order to test if an exception is being thrown, or only configuring what is used to the point where the exception is thrown is enough?</p>\n<p><strong>Long version:</strong></p>\n<p>I have a class, MyClass, which has a method called foo. The method foo calls an API that returns an object indicating if the operation succeded. If the object returned by the API indicates an error, the foo method should throw an unchecked exception.</p>\n<p>In order to test if foo is throwing the exception, I'm mocking the API, so that it always indicates a fail. The foo method is working as expected, throwing an exception.</p>\n<p>It is true, however, that other things can make foo throw exceptions. For instance, if the API succeds but other dependency of fool fails, fool will and should throw an excpetion.</p>\n<p>Because of that, in order to test if foo is throwing an exception as results of a fail in the API, I need to mock every other dependency that foo has. Because of that, the unit test that tests if foo throws an exception when the API fails gets too big. This is also true for every other test involving exceptions.</p>\n<p>The worst part is that, at the end of the day, I'm always questioning, is it throwing an exception because the API failed, or because there's another error happening?</p>\n<p>The solution I can think is creating exception for every possible case of failure, like &quot;HiImFooAndTheApiThatICalledFailed_Exception&quot;. I'm not sure if this is a reaonable approach though. Other solution is testing the exception's message, but I think this is bad because I would be limiting message to be static.</p>\n"},{"tags":["java","spring","apache-kafka"],"comments":[{"owner":{"account_id":11116821,"reputation":11,"user_id":9020288,"display_name":"Antronset"},"score":0,"creation_date":1665673288,"post_id":74056653,"comment_id":130758920,"body_markdown":"Possible solution: set content-type: application/x-java-object, change Message&lt;HashMap&lt;String, Object&gt;&gt; to Message&lt;byte[]&gt;, all additional info add into header.","body":"Possible solution: set content-type: application/x-java-object, change Message&lt;HashMap&lt;String, Object&gt;&gt; to Message&lt;byte[]&gt;, all additional info add into header."}],"owner":{"account_id":11116821,"reputation":11,"user_id":9020288,"display_name":"Antronset"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":462,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1665668963,"creation_date":1665667923,"question_id":74056653,"body_markdown":"Now I am using org.springframework.messaging.Message to send a message and I need to add some text info and a byte array there.\r\n\r\n    @Bean public Function&lt;Message&lt;HashMap&lt;String, Object&gt;&gt;, Message&lt;HashMap&lt;String, Object&gt;&gt;&gt; handleCreateImageRequest() {\r\n    return comments -&gt; {\r\n        final byte[] byteImage = ...\r\n        final HashMap&lt;String, Object&gt; result = new HashMap&lt;&gt;();\r\n        result.put(&quot;file&quot;, byteImage);\r\n        result.put(&quot;youtubeUrl&quot;, extractedComments.get(&quot;youtubeUrl&quot;));\r\n        return MessageBuilder.withPayload(result).build();\r\n    };}\r\n        \r\nWith current configuration I receive error on the consumer side:\r\n\r\nCaused by: org.springframework.messaging.converter.MessageConversionException: Cannot parse payload ; nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot construct instance of java.util.Objects (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value (&#39;iVBORw0KGgoAAAANSUhEUgAABLAAAASwCAYAAADrIbPPAACAAE..........\r\n\r\n    spring:\r\n      cloud:\r\n        function:\r\n          definition: handleCreateImageRequest\r\n        stream:\r\n          bindings:\r\n            handleCreateImageRequest-in-0:\r\n              destination: createImageQueue\r\n              content-type: application/json\r\n            handleCreateImageRequest-out-0:\r\n              destination: readyImageQueue\r\n              content-type: application/json\r\n          kafka:\r\n            binder:\r\n              zkNodes: kafka\r\n              brokers: kafka\r\n\r\nWhat is the best way to pass byte array with kafka? Is it possible that way? ","title":"Sending byte array in spring cloud Message with spring cloud stream, kafka binder","body":"<p>Now I am using org.springframework.messaging.Message to send a message and I need to add some text info and a byte array there.</p>\n<pre><code>@Bean public Function&lt;Message&lt;HashMap&lt;String, Object&gt;&gt;, Message&lt;HashMap&lt;String, Object&gt;&gt;&gt; handleCreateImageRequest() {\nreturn comments -&gt; {\n    final byte[] byteImage = ...\n    final HashMap&lt;String, Object&gt; result = new HashMap&lt;&gt;();\n    result.put(&quot;file&quot;, byteImage);\n    result.put(&quot;youtubeUrl&quot;, extractedComments.get(&quot;youtubeUrl&quot;));\n    return MessageBuilder.withPayload(result).build();\n};}\n    \n</code></pre>\n<p>With current configuration I receive error on the consumer side:</p>\n<p>Caused by: org.springframework.messaging.converter.MessageConversionException: Cannot parse payload ; nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot construct instance of java.util.Objects (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('iVBORw0KGgoAAAANSUhEUgAABLAAAASwCAYAAADrIbPPAACAAE..........</p>\n<pre><code>spring:\n  cloud:\n    function:\n      definition: handleCreateImageRequest\n    stream:\n      bindings:\n        handleCreateImageRequest-in-0:\n          destination: createImageQueue\n          content-type: application/json\n        handleCreateImageRequest-out-0:\n          destination: readyImageQueue\n          content-type: application/json\n      kafka:\n        binder:\n          zkNodes: kafka\n          brokers: kafka\n</code></pre>\n<p>What is the best way to pass byte array with kafka? Is it possible that way?</p>\n"},{"tags":["java","algorithm","data-structures"],"comments":[{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":0,"creation_date":1660019073,"post_id":73286470,"comment_id":129427292,"body_markdown":"Instead of using a heap as your only data structure, use another as well that has the same objects, for example a hashmap.","body":"Instead of using a heap as your only data structure, use another as well that has the same objects, for example a hashmap."},{"owner":{"account_id":6734029,"reputation":31,"user_id":5189406,"display_name":"Samrat K S"},"score":0,"creation_date":1660019374,"post_id":73286470,"comment_id":129427343,"body_markdown":"Problem with hashmap is finding top n elements, we have to sort and find which is O(nlogn)","body":"Problem with hashmap is finding top n elements, we have to sort and find which is O(nlogn)"},{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":1,"creation_date":1660019416,"post_id":73286470,"comment_id":129427347,"body_markdown":"Use the hashmap to look up the product and to update the count.  Use the heap to retrieve the top product.","body":"Use the hashmap to look up the product and to update the count.  Use the heap to retrieve the top product."},{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":0,"creation_date":1660019438,"post_id":73286470,"comment_id":129427353,"body_markdown":"Put your products in both data structures, as I wrote.","body":"Put your products in both data structures, as I wrote."}],"answers":[{"tags":[],"owner":{"account_id":449564,"reputation":78084,"user_id":844416,"display_name":"MBo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660024272,"creation_date":1660024272,"answer_id":73287078,"question_id":73286470,"body_markdown":"There is rather simple data structure based on binary heap - indexed (indirect) binary heap. You have some **objects in an array**, their **indices** are in heap, this heap is ordered by some object property/complex key. So you can easily update object keys, keeping heap in order. **Seeking is not needed**.\r\n\r\nThis structure is described, for example, in the book **Algorithms** of Robert Sedgewick and Kevin Wayne.   \r\nVery simple end concise implementation [is available online][1]\r\n\r\nNote that retrieving of top `n` products takes `nlogN` time. If you have to know top n at every step, consider also approach with **two** heaps - like hour glass - lower one is max-heap, upper one is min-heap. When upper heap top (really bottom) becomes smaller than top of lower heap, exchange these items. \r\n\r\n(Alike aproach is sometimes used in algorithms of online median determination, so you may also look at corresponding questions)\r\n\r\n\r\n  [1]: https://algs4.cs.princeton.edu/code/edu/princeton/cs/algs4/IndexMaxPQ.java.html","title":"How to find top n products based on number of items sold","body":"<p>There is rather simple data structure based on binary heap - indexed (indirect) binary heap. You have some <strong>objects in an array</strong>, their <strong>indices</strong> are in heap, this heap is ordered by some object property/complex key. So you can easily update object keys, keeping heap in order. <strong>Seeking is not needed</strong>.</p>\n<p>This structure is described, for example, in the book <strong>Algorithms</strong> of Robert Sedgewick and Kevin Wayne.<br />\nVery simple end concise implementation <a href=\"https://algs4.cs.princeton.edu/code/edu/princeton/cs/algs4/IndexMaxPQ.java.html\" rel=\"nofollow noreferrer\">is available online</a></p>\n<p>Note that retrieving of top <code>n</code> products takes <code>nlogN</code> time. If you have to know top n at every step, consider also approach with <strong>two</strong> heaps - like hour glass - lower one is max-heap, upper one is min-heap. When upper heap top (really bottom) becomes smaller than top of lower heap, exchange these items.</p>\n<p>(Alike aproach is sometimes used in algorithms of online median determination, so you may also look at corresponding questions)</p>\n"}],"owner":{"account_id":6734029,"reputation":31,"user_id":5189406,"display_name":"Samrat K S"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"closed_date":1665839336,"answer_count":1,"score":2,"last_activity_date":1665668799,"creation_date":1660018457,"question_id":73286470,"body_markdown":"How to find the top n products based on number items sold.\r\nWe can use max heap to keep track of number of times product was sold and find the top n from the heap. But the problem is let&#39;s say we have to find in real time when a product is brought we have to update the count and then heapify. Finding the product in heap is again O(N), deleting the product and adding back the product with updated count is O(LogN)\r\nIs there any better solution?","title":"How to find top n products based on number of items sold","body":"<p>How to find the top n products based on number items sold.\nWe can use max heap to keep track of number of times product was sold and find the top n from the heap. But the problem is let's say we have to find in real time when a product is brought we have to update the count and then heapify. Finding the product in heap is again O(N), deleting the product and adding back the product with updated count is O(LogN)\nIs there any better solution?</p>\n"},{"tags":["java","spring","hibernate","jpa","spring-test"],"answers":[{"comments":[{"owner":{"account_id":21508935,"reputation":11,"user_id":15851933,"display_name":"Dmitri Zamysloff"},"score":0,"creation_date":1666610702,"post_id":74056840,"comment_id":130970389,"body_markdown":"Yes sure. All the same, just entity classes and repository interface are in src/test/java - so they are available only in test. So in test sources I have one entity, one repository for the entity, in properties I am setting embedded h2 and also point to the entity and repository with all possible matters like component scan, entity scan enable repositories. Embedded database starts, but context sees no repositories after scan :(","body":"Yes sure. All the same, just entity classes and repository interface are in src/test/java - so they are available only in test. So in test sources I have one entity, one repository for the entity, in properties I am setting embedded h2 and also point to the entity and repository with all possible matters like component scan, entity scan enable repositories. Embedded database starts, but context sees no repositories after scan :("},{"owner":{"account_id":21508935,"reputation":11,"user_id":15851933,"display_name":"Dmitri Zamysloff"},"score":0,"creation_date":1666611000,"post_id":74056840,"comment_id":130970497,"body_markdown":"`Starting TestClient using Java 17.0.4.1 on T000becfae with PID 94351 (started by \n\nThe following 1 profile is active: &quot;test&quot;\n\nBootstrapping Spring Data JPA repositories in DEFAULT mode.\n\nFinished Spring Data repository scanning in 3 ms. Found 0 JPA repository interfaces.\n`","body":"<code>Starting TestClient using Java 17.0.4.1 on T000becfae with PID 94351 (started by   The following 1 profile is active: &quot;test&quot;  Bootstrapping Spring Data JPA repositories in DEFAULT mode.  Finished Spring Data repository scanning in 3 ms. Found 0 JPA repository interfaces. </code>"},{"owner":{"account_id":26557785,"reputation":159,"user_id":20186121,"display_name":"Abhishek Kumar Jena"},"score":0,"creation_date":1666611844,"post_id":74056840,"comment_id":130970761,"body_markdown":"@DmitriZamysloff can I see your code, please","body":"@DmitriZamysloff can I see your code, please"}],"tags":[],"owner":{"account_id":26557785,"reputation":159,"user_id":20186121,"display_name":"Abhishek Kumar Jena"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665668670,"creation_date":1665668670,"answer_id":74056840,"question_id":74056182,"body_markdown":"have you mentioned the annotations in their respective places?\r\n\r\nlike this\r\n\r\n**entity class**\r\n\r\n    @Entity\r\n    @Table(name = &quot;demoEntity&quot;)\r\n    public class  DemoEntity{\r\n    \r\n    @Id\r\n\t@GeneratedValue(strategy = GenerationType.AUTO)\r\n\tprivate int id;\r\n\r\n    //attributes\r\n    \r\n    //methods / getters &amp; setters\r\n    \r\n    }\r\n\r\nthen repository\r\n\r\n    @Repository\r\n    public interface DemoEntityRepository extends JpaRepository&lt;DemoEntity, Intiger&gt;{\r\n    \t\r\n    \t\r\n    }\r\n\r\nhopefully, then it should work else you can ping me any time, I&#39;m always here.\r\n\r\nand please provide some sample code or error pages for better understanding.\r\n","title":"Defining JPA repositories in test","body":"<p>have you mentioned the annotations in their respective places?</p>\n<p>like this</p>\n<p><strong>entity class</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;demoEntity&quot;)\npublic class  DemoEntity{\n\n@Id\n@GeneratedValue(strategy = GenerationType.AUTO)\nprivate int id;\n\n//attributes\n\n//methods / getters &amp; setters\n\n}\n</code></pre>\n<p>then repository</p>\n<pre><code>@Repository\npublic interface DemoEntityRepository extends JpaRepository&lt;DemoEntity, Intiger&gt;{\n    \n    \n}\n</code></pre>\n<p>hopefully, then it should work else you can ping me any time, I'm always here.</p>\n<p>and please provide some sample code or error pages for better understanding.</p>\n"}],"owner":{"account_id":21508935,"reputation":11,"user_id":15851933,"display_name":"Dmitri Zamysloff"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665668670,"creation_date":1665665854,"question_id":74056182,"body_markdown":"I created some library with aspect which works with JPA repositories. What I am trying to achieve is to create tests for that particular aspect. There are neither repositories nor entities in source code of the library. So in test I need to test this aspect inside of spring context with test entities and repositories. So in test sources I defined DataJpaTest with properties to enable in-memory h2 and jpa ddl create, an entity class and repository interface which derives from CrudRepository. By starting of test I see JPA saying after scanning that 0 repositories found.\r\n\r\nI have tried to add repository class into context configuration annotation, then in enable JPA repositories, used also entity scan. Nothing works and I understand that what can be is that probably either repositories and entities scan generally disabled in test classes or there is some kind of other trick which I do not know yet. Does enybody tackled already such a problem?","title":"Defining JPA repositories in test","body":"<p>I created some library with aspect which works with JPA repositories. What I am trying to achieve is to create tests for that particular aspect. There are neither repositories nor entities in source code of the library. So in test I need to test this aspect inside of spring context with test entities and repositories. So in test sources I defined DataJpaTest with properties to enable in-memory h2 and jpa ddl create, an entity class and repository interface which derives from CrudRepository. By starting of test I see JPA saying after scanning that 0 repositories found.</p>\n<p>I have tried to add repository class into context configuration annotation, then in enable JPA repositories, used also entity scan. Nothing works and I understand that what can be is that probably either repositories and entities scan generally disabled in test classes or there is some kind of other trick which I do not know yet. Does enybody tackled already such a problem?</p>\n"},{"tags":["java","jms","activemq-artemis"],"answers":[{"tags":[],"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665668503,"creation_date":1665668503,"answer_id":74056798,"question_id":74055875,"body_markdown":"Queues are essentially immutable. This is so that configuration changes don&#39;t unintentionally negatively impact the messages in the queue (e.g. changing a queue to durable = false and then restarting the broker only to find that all the durable messages in the queue have been dropped). The recommended way to &quot;change&quot; configuration would be to create a new queue with the configuration you want, move messages (if any) to that queue as necessary, &amp; delete the old queue.\r\n\r\nIf you create a durable queue or address via the web console that data is persisted to the broker&#39;s &quot;bindings&quot; journal. It isn&#39;t written back to `broker.xml` which is why you can&#39;t find it using `grep`.","title":"How to edit ActiveMQ Artemis Attributes","body":"<p>Queues are essentially immutable. This is so that configuration changes don't unintentionally negatively impact the messages in the queue (e.g. changing a queue to durable = false and then restarting the broker only to find that all the durable messages in the queue have been dropped). The recommended way to &quot;change&quot; configuration would be to create a new queue with the configuration you want, move messages (if any) to that queue as necessary, &amp; delete the old queue.</p>\n<p>If you create a durable queue or address via the web console that data is persisted to the broker's &quot;bindings&quot; journal. It isn't written back to <code>broker.xml</code> which is why you can't find it using <code>grep</code>.</p>\n"}],"owner":{"account_id":13011419,"reputation":271,"user_id":9404300,"display_name":"William Pham"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":361,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74056798,"answer_count":1,"score":1,"last_activity_date":1665668614,"creation_date":1665664517,"question_id":74055875,"body_markdown":"I&#39;m new to ActiveMQ Artemis and unsure how to modify/edit/set any configurations (attributes) after creation of the address, or queues, or anything in there. On the web console, when I click on say an address or a queue, on the attribute tab, I can view tons of information like: Routing Type, Address, Role, Durable, etc... But when I click on a field, I can only view it, but there&#39;s no option to edit it.\r\n\r\nI tried to shoot in the dark by creating a queue named &quot;TestTopic&quot; within the web console. Went to the broker folder and searched for that string using the following command:\r\n```\r\ngrep -R &quot;TestTopic&quot; .\r\n```\r\nBut no luck!\r\n\r\nI then tried researching on the [java API doc][1] itself, but they only have getter methods. And jolokia API only gives read-only data.\r\n\r\nI thought that it might be because of my role which gives me read-only permission but that would be odd as the original user should have admin rights, and when I inspected it, it seems to be correct to me with a &quot;set*&quot; access method.\r\n\r\nIn artemis-roles.properties file:\r\n```\r\namq = admin\r\n```\r\n\r\nIn broker.xml file:\r\n```xml\r\n&lt;security-settings&gt;\r\n   &lt;security-setting match=&quot;#&quot;&gt;\r\n      &lt;permission type=&quot;createNonDurableQueue&quot; roles=&quot;amq&quot;/&gt;\r\n      &lt;permission type=&quot;deleteNonDurableQueue&quot; roles=&quot;amq&quot;/&gt;\r\n      &lt;permission type=&quot;createDurableQueue&quot; roles=&quot;amq&quot;/&gt;\r\n      &lt;permission type=&quot;deleteDurableQueue&quot; roles=&quot;amq&quot;/&gt;\r\n      &lt;permission type=&quot;createAddress&quot; roles=&quot;amq&quot;/&gt;\r\n      &lt;permission type=&quot;deleteAddress&quot; roles=&quot;amq&quot;/&gt;\r\n      &lt;permission type=&quot;consume&quot; roles=&quot;amq&quot;/&gt;\r\n      &lt;permission type=&quot;browse&quot; roles=&quot;amq&quot;/&gt;\r\n      &lt;permission type=&quot;send&quot; roles=&quot;amq&quot;/&gt;\r\n      &lt;!-- we need this otherwise ./artemis data imp wouldn&#39;t work --&gt;\r\n      &lt;permission type=&quot;manage&quot; roles=&quot;amq&quot;/&gt;\r\n   &lt;/security-setting&gt;\r\n&lt;/security-settings&gt;\r\n```\r\n\r\nIn management.xml file:\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n&lt;management-context xmlns=&quot;http://activemq.apache.org/schema&quot;&gt;\r\n   &lt;authorisation&gt;\r\n      &lt;allowlist&gt;\r\n         &lt;entry domain=&quot;hawtio&quot;/&gt;\r\n      &lt;/allowlist&gt;\r\n      &lt;default-access&gt;\r\n         &lt;access method=&quot;list*&quot; roles=&quot;amq&quot;/&gt;\r\n         &lt;access method=&quot;get*&quot; roles=&quot;amq&quot;/&gt;\r\n         &lt;access method=&quot;is*&quot; roles=&quot;amq&quot;/&gt;\r\n         &lt;access method=&quot;set*&quot; roles=&quot;amq&quot;/&gt;\r\n         &lt;access method=&quot;*&quot; roles=&quot;amq&quot;/&gt;\r\n      &lt;/default-access&gt;\r\n      &lt;role-access&gt;\r\n         &lt;match domain=&quot;org.apache.activemq.artemis&quot;&gt;\r\n            &lt;access method=&quot;list*&quot; roles=&quot;amq&quot;/&gt;\r\n            &lt;access method=&quot;get*&quot; roles=&quot;amq&quot;/&gt;\r\n            &lt;access method=&quot;is*&quot; roles=&quot;amq&quot;/&gt;\r\n            &lt;access method=&quot;set*&quot; roles=&quot;amq&quot;/&gt;\r\n            &lt;!-- Note count and browse are need to access the browse tab in the console--&gt;\r\n            &lt;access method=&quot;browse*&quot; roles=&quot;amq&quot;/&gt;\r\n            &lt;access method=&quot;count*&quot; roles=&quot;amq&quot;/&gt;\r\n            &lt;access method=&quot;*&quot; roles=&quot;amq&quot;/&gt;\r\n         &lt;/match&gt;\r\n      &lt;/role-access&gt;\r\n   &lt;/authorisation&gt;\r\n&lt;/management-context&gt;\r\n```\r\n\r\nI&#39;m running out of options on where to look for. If you guys can point me in the correct direction, it would be much appreciated :)\r\n\r\n  [1]: https://javadoc.io/doc/org.apache.activemq/artemis-core-client/latest/org/apache/activemq/artemis/api/core/management/package-summary.html","title":"How to edit ActiveMQ Artemis Attributes","body":"<p>I'm new to ActiveMQ Artemis and unsure how to modify/edit/set any configurations (attributes) after creation of the address, or queues, or anything in there. On the web console, when I click on say an address or a queue, on the attribute tab, I can view tons of information like: Routing Type, Address, Role, Durable, etc... But when I click on a field, I can only view it, but there's no option to edit it.</p>\n<p>I tried to shoot in the dark by creating a queue named &quot;TestTopic&quot; within the web console. Went to the broker folder and searched for that string using the following command:</p>\n<pre><code>grep -R &quot;TestTopic&quot; .\n</code></pre>\n<p>But no luck!</p>\n<p>I then tried researching on the <a href=\"https://javadoc.io/doc/org.apache.activemq/artemis-core-client/latest/org/apache/activemq/artemis/api/core/management/package-summary.html\" rel=\"nofollow noreferrer\">java API doc</a> itself, but they only have getter methods. And jolokia API only gives read-only data.</p>\n<p>I thought that it might be because of my role which gives me read-only permission but that would be odd as the original user should have admin rights, and when I inspected it, it seems to be correct to me with a &quot;set*&quot; access method.</p>\n<p>In artemis-roles.properties file:</p>\n<pre><code>amq = admin\n</code></pre>\n<p>In broker.xml file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;security-settings&gt;\n   &lt;security-setting match=&quot;#&quot;&gt;\n      &lt;permission type=&quot;createNonDurableQueue&quot; roles=&quot;amq&quot;/&gt;\n      &lt;permission type=&quot;deleteNonDurableQueue&quot; roles=&quot;amq&quot;/&gt;\n      &lt;permission type=&quot;createDurableQueue&quot; roles=&quot;amq&quot;/&gt;\n      &lt;permission type=&quot;deleteDurableQueue&quot; roles=&quot;amq&quot;/&gt;\n      &lt;permission type=&quot;createAddress&quot; roles=&quot;amq&quot;/&gt;\n      &lt;permission type=&quot;deleteAddress&quot; roles=&quot;amq&quot;/&gt;\n      &lt;permission type=&quot;consume&quot; roles=&quot;amq&quot;/&gt;\n      &lt;permission type=&quot;browse&quot; roles=&quot;amq&quot;/&gt;\n      &lt;permission type=&quot;send&quot; roles=&quot;amq&quot;/&gt;\n      &lt;!-- we need this otherwise ./artemis data imp wouldn't work --&gt;\n      &lt;permission type=&quot;manage&quot; roles=&quot;amq&quot;/&gt;\n   &lt;/security-setting&gt;\n&lt;/security-settings&gt;\n</code></pre>\n<p>In management.xml file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\n&lt;management-context xmlns=&quot;http://activemq.apache.org/schema&quot;&gt;\n   &lt;authorisation&gt;\n      &lt;allowlist&gt;\n         &lt;entry domain=&quot;hawtio&quot;/&gt;\n      &lt;/allowlist&gt;\n      &lt;default-access&gt;\n         &lt;access method=&quot;list*&quot; roles=&quot;amq&quot;/&gt;\n         &lt;access method=&quot;get*&quot; roles=&quot;amq&quot;/&gt;\n         &lt;access method=&quot;is*&quot; roles=&quot;amq&quot;/&gt;\n         &lt;access method=&quot;set*&quot; roles=&quot;amq&quot;/&gt;\n         &lt;access method=&quot;*&quot; roles=&quot;amq&quot;/&gt;\n      &lt;/default-access&gt;\n      &lt;role-access&gt;\n         &lt;match domain=&quot;org.apache.activemq.artemis&quot;&gt;\n            &lt;access method=&quot;list*&quot; roles=&quot;amq&quot;/&gt;\n            &lt;access method=&quot;get*&quot; roles=&quot;amq&quot;/&gt;\n            &lt;access method=&quot;is*&quot; roles=&quot;amq&quot;/&gt;\n            &lt;access method=&quot;set*&quot; roles=&quot;amq&quot;/&gt;\n            &lt;!-- Note count and browse are need to access the browse tab in the console--&gt;\n            &lt;access method=&quot;browse*&quot; roles=&quot;amq&quot;/&gt;\n            &lt;access method=&quot;count*&quot; roles=&quot;amq&quot;/&gt;\n            &lt;access method=&quot;*&quot; roles=&quot;amq&quot;/&gt;\n         &lt;/match&gt;\n      &lt;/role-access&gt;\n   &lt;/authorisation&gt;\n&lt;/management-context&gt;\n</code></pre>\n<p>I'm running out of options on where to look for. If you guys can point me in the correct direction, it would be much appreciated :)</p>\n"},{"tags":["java","algorithm"],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1662849091,"creation_date":1662849091,"answer_id":73675598,"question_id":73675548,"body_markdown":"The text of the code challenge says:\r\n\r\n&gt; The **first line** contains a single integer, &#119899;, the number of students.\r\n&gt;\r\n&gt; Each line &#119894; of the &#119899; **subsequent** lines contains a single integer, *grades*[&#119894;].\r\n\r\nBut then if you look at the code template you get to work with, you&#39;ll see it takes care of reading the input and creating the data structure for it. It then calls your function with that data structure as argument. Obviously this does not include the information that was in the first line, just a `List` (which has a size) or whatever array type you get in the different languages you can use to solve these challenges.","title":"Do hackerrank challenge(s) treat first element specially?","body":"<p>The text of the code challenge says:</p>\n<blockquote>\n<p>The <strong>first line</strong> contains a single integer, 𝑛, the number of students.</p>\n<p>Each line 𝑖 of the 𝑛 <strong>subsequent</strong> lines contains a single integer, <em>grades</em>[𝑖].</p>\n</blockquote>\n<p>But then if you look at the code template you get to work with, you'll see it takes care of reading the input and creating the data structure for it. It then calls your function with that data structure as argument. Obviously this does not include the information that was in the first line, just a <code>List</code> (which has a size) or whatever array type you get in the different languages you can use to solve these challenges.</p>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662849426,"creation_date":1662849426,"answer_id":73675624,"question_id":73675548,"body_markdown":"The &quot;lines of data&quot;, which includes the length, are **not** passed to `gradingStudents()`. Only the data elements (ie not the length) are passed.\r\n\r\nIf you scroll down in that problem, you&#39;ll see that the `main()` method reads all lines of data from stdin and builds the list of 4 elements *then* passes that list to the `gradingStudents()` that you must implement.","title":"Do hackerrank challenge(s) treat first element specially?","body":"<p>The &quot;lines of data&quot;, which includes the length, are <strong>not</strong> passed to <code>gradingStudents()</code>. Only the data elements (ie not the length) are passed.</p>\n<p>If you scroll down in that problem, you'll see that the <code>main()</code> method reads all lines of data from stdin and builds the list of 4 elements <em>then</em> passes that list to the <code>gradingStudents()</code> that you must implement.</p>\n"}],"owner":{"account_id":11020509,"reputation":354,"user_id":8094926,"display_name":"chocalaca"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73675598,"answer_count":2,"score":0,"last_activity_date":1665668591,"creation_date":1662848553,"question_id":73675548,"body_markdown":"I&#39;m doing [this][1] hackerrank problem and am confused. The first element in the parameter array is an int representing number of grades, the rest are the grades themselves. In hackerrank, itself, I have this code (yes it could likely be better), and it passes:\r\n\r\n    public static List&lt;Integer&gt; gradingStudents(List&lt;Integer&gt; grades) {\r\n            List&lt;Integer&gt; result = new ArrayList&lt;&gt;();\r\n    \r\n            for (int i=0;i&lt;grades.size();i++) {\r\n                int grade = grades.get(i);\r\n                if (grade &gt;= 38) {\r\n                    int nextMultipleOfFive=0;\r\n                    for (int j=grade;j&lt;grade+6;j++) {\r\n                        if (j%5==0) {\r\n                            nextMultipleOfFive = j;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (nextMultipleOfFive-grade &lt; 3) {\r\n                        result.add(nextMultipleOfFive);\r\n                    } else {\r\n                        result.add(grade);\r\n                    }\r\n                } else {\r\n                    result.add(grade);\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n[![enter image description here][2]][2]\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://www.hackerrank.com/challenges/grading/problem?isFullScreen=true\r\n  [2]: https://i.stack.imgur.com/Llu0z.png\r\n  [3]: https://i.stack.imgur.com/Kpu7g.png\r\n\r\n\r\nFine. But if I run that **same code** locally, I add main method \r\n\r\n    public static void main(String[] args) {\r\n        List&lt;Integer&gt; grades = Arrays.asList(4,73,67,38,33);\r\n        System.out.println(gradingStudents(grades));\r\n    }\r\n\r\n...and get `[4, 75, 67, 40, 33]`. Wrong answer.\r\n\r\nOn the other hand, if I edit the for loop to start at 1: `for (int i=1;i&lt;grades.size();i++) {`, locally I get `[75, 67, 40, 33]`. Correct answer.\r\n\r\nIt seems like I should start at 1 since the first list element is not a grade. \r\n\r\nFor instances where hackerrank is used as a code test for an interview, this is unnerving. Am I looking at this wrong? Doesn&#39;t looping from 1 make more sense? Why does looping from zero work, and looping from 1 not work? ","title":"Do hackerrank challenge(s) treat first element specially?","body":"<p>I'm doing <a href=\"https://www.hackerrank.com/challenges/grading/problem?isFullScreen=true\" rel=\"nofollow noreferrer\">this</a> hackerrank problem and am confused. The first element in the parameter array is an int representing number of grades, the rest are the grades themselves. In hackerrank, itself, I have this code (yes it could likely be better), and it passes:</p>\n<pre><code>public static List&lt;Integer&gt; gradingStudents(List&lt;Integer&gt; grades) {\n        List&lt;Integer&gt; result = new ArrayList&lt;&gt;();\n\n        for (int i=0;i&lt;grades.size();i++) {\n            int grade = grades.get(i);\n            if (grade &gt;= 38) {\n                int nextMultipleOfFive=0;\n                for (int j=grade;j&lt;grade+6;j++) {\n                    if (j%5==0) {\n                        nextMultipleOfFive = j;\n                        break;\n                    }\n                }\n                if (nextMultipleOfFive-grade &lt; 3) {\n                    result.add(nextMultipleOfFive);\n                } else {\n                    result.add(grade);\n                }\n            } else {\n                result.add(grade);\n            }\n        }\n        return result;\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/Llu0z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Llu0z.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/Kpu7g.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Kpu7g.png\" alt=\"enter image description here\" /></a></p>\n<p>Fine. But if I run that <strong>same code</strong> locally, I add main method</p>\n<pre><code>public static void main(String[] args) {\n    List&lt;Integer&gt; grades = Arrays.asList(4,73,67,38,33);\n    System.out.println(gradingStudents(grades));\n}\n</code></pre>\n<p>...and get <code>[4, 75, 67, 40, 33]</code>. Wrong answer.</p>\n<p>On the other hand, if I edit the for loop to start at 1: <code>for (int i=1;i&lt;grades.size();i++) {</code>, locally I get <code>[75, 67, 40, 33]</code>. Correct answer.</p>\n<p>It seems like I should start at 1 since the first list element is not a grade.</p>\n<p>For instances where hackerrank is used as a code test for an interview, this is unnerving. Am I looking at this wrong? Doesn't looping from 1 make more sense? Why does looping from zero work, and looping from 1 not work?</p>\n"},{"tags":["java","android"],"answers":[{"comments":[{"owner":{"display_name":"user20229203"},"score":0,"creation_date":1665650680,"post_id":74052606,"comment_id":130751081,"body_markdown":"Tried it, still not working.","body":"Tried it, still not working."},{"owner":{"account_id":10531491,"reputation":330,"user_id":7760687,"display_name":"Mayur"},"score":0,"creation_date":1665661913,"post_id":74052606,"comment_id":130754729,"body_markdown":"@Labji thanks for the comment, now check the above code I update the answer","body":"@Labji thanks for the comment, now check the above code I update the answer"}],"tags":[],"owner":{"account_id":10531491,"reputation":330,"user_id":7760687,"display_name":"Mayur"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665668589,"creation_date":1665649398,"answer_id":74052606,"question_id":74052395,"body_markdown":"**Try This**\r\n\r\n     TextView charge_month = findViewById(R.id.charge_per_month);\r\n        String exp_amount = &quot;₹ 5600&quot;;\r\n        String act_amount = &quot;₹ 6708&quot;;\r\n        String complete_string = exp_amount + &quot;  &quot; + act_amount;\r\n        Spannable str = new SpannableString(complete_string);\r\n        str.setSpan(new StrikethroughSpan(), 0, 6, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\r\n        str.setSpan(new ForegroundColorSpan(Color.WHITE),0, 6, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\r\n        str.setSpan(new ForegroundColorSpan(Color.RED),6, str.length(),Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\r\n        charge_month.setText(str);\r\n\r\nclick this link to check out look like - https://i.stack.imgur.com/CBCwf.jpg","title":"Spannable text shows only for a second, when button is clicked. Why?","body":"<p><strong>Try This</strong></p>\n<pre><code> TextView charge_month = findViewById(R.id.charge_per_month);\n    String exp_amount = &quot;₹ 5600&quot;;\n    String act_amount = &quot;₹ 6708&quot;;\n    String complete_string = exp_amount + &quot;  &quot; + act_amount;\n    Spannable str = new SpannableString(complete_string);\n    str.setSpan(new StrikethroughSpan(), 0, 6, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\n    str.setSpan(new ForegroundColorSpan(Color.WHITE),0, 6, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\n    str.setSpan(new ForegroundColorSpan(Color.RED),6, str.length(),Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\n    charge_month.setText(str);\n</code></pre>\n<p>click this link to check out look like - <a href=\"https://i.stack.imgur.com/CBCwf.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/CBCwf.jpg</a></p>\n"},{"tags":[],"owner":{"account_id":23733633,"reputation":742,"user_id":17752564,"display_name":"ninhnau19"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665651711,"creation_date":1665651711,"answer_id":74053121,"question_id":74052395,"body_markdown":"change this from:\r\n```\r\nstr.setSpan(new ForegroundColorSpan(Color.RED),exp_amount.indexOf(exp_amount.charAt(0)),act_amount.length(),Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\r\n```\r\n\r\nto\r\n```\r\nstr.setSpan(new ForegroundColorSpan(Color.RED),exp_amount.length() + 1,complete_string.length(),Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\r\n```","title":"Spannable text shows only for a second, when button is clicked. Why?","body":"<p>change this from:</p>\n<pre><code>str.setSpan(new ForegroundColorSpan(Color.RED),exp_amount.indexOf(exp_amount.charAt(0)),act_amount.length(),Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\n</code></pre>\n<p>to</p>\n<pre><code>str.setSpan(new ForegroundColorSpan(Color.RED),exp_amount.length() + 1,complete_string.length(),Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\n</code></pre>\n"}],"owner":{"display_name":"user20229203"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1665668589,"creation_date":1665648460,"question_id":74052395,"body_markdown":"I want to set a `spannable` string in my text view when a button is clicked, where the first word has white foreground color and striked out and the second word has red foreground color. This is my code:\r\n\r\n**My textview:**\r\n\r\n    &lt;TextView\r\n       android:id=&quot;@+id/charge_per_month&quot;\r\n       android:layout_width=&quot;match_parent&quot;\r\n       android:layout_height=&quot;wrap_content&quot;\r\n       android:layout_marginStart=&quot;16pt&quot;&gt;\r\n    &lt;/TextView&gt;\r\n\r\n**My java code:**\r\n\r\n    TextView charge_month = findViewById(R.id.charge_per_month);\r\n\r\n    String exp_amount = &quot;₹ 5600&quot;; //should be white in color and striked out\r\n\r\n    String act_amount = &quot;₹ 6708&quot;; //should be red in color\r\n\r\n    String complete_string = exp_amount + &quot;  &quot;+act_amount;\r\n\r\n    submit.setOnClickListener(new View.OnClickListener() {\r\n \r\n        @Override\r\n\r\n        public void onClick(View view) {\r\n\r\n            Spannable str = new SpannableString (complete_string);\r\n\r\n            str.setSpan(new StrikethroughSpan(), 0, exp_amount.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\r\n\r\n            str.setSpan(new ForegroundColorSpan(Color.WHITE),0, exp_amount.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\r\n\r\n            str.setSpan(new ForegroundColorSpan(Color.RED),exp_amount.length() + 1,complete_string.length(),Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\r\n\r\n            charge_month.setText(str);\r\n         \r\n            }\r\n    }\r\n\r\nThe spannable string just shows for a split second, when the button is clicked. How do I fix this?","title":"Spannable text shows only for a second, when button is clicked. Why?","body":"<p>I want to set a <code>spannable</code> string in my text view when a button is clicked, where the first word has white foreground color and striked out and the second word has red foreground color. This is my code:</p>\n<p><strong>My textview:</strong></p>\n<pre><code>&lt;TextView\n   android:id=&quot;@+id/charge_per_month&quot;\n   android:layout_width=&quot;match_parent&quot;\n   android:layout_height=&quot;wrap_content&quot;\n   android:layout_marginStart=&quot;16pt&quot;&gt;\n&lt;/TextView&gt;\n</code></pre>\n<p><strong>My java code:</strong></p>\n<pre><code>TextView charge_month = findViewById(R.id.charge_per_month);\n\nString exp_amount = &quot;₹ 5600&quot;; //should be white in color and striked out\n\nString act_amount = &quot;₹ 6708&quot;; //should be red in color\n\nString complete_string = exp_amount + &quot;  &quot;+act_amount;\n\nsubmit.setOnClickListener(new View.OnClickListener() {\n\n    @Override\n\n    public void onClick(View view) {\n\n        Spannable str = new SpannableString (complete_string);\n\n        str.setSpan(new StrikethroughSpan(), 0, exp_amount.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\n\n        str.setSpan(new ForegroundColorSpan(Color.WHITE),0, exp_amount.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\n\n        str.setSpan(new ForegroundColorSpan(Color.RED),exp_amount.length() + 1,complete_string.length(),Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\n\n        charge_month.setText(str);\n     \n        }\n}\n</code></pre>\n<p>The spannable string just shows for a split second, when the button is clicked. How do I fix this?</p>\n"},{"tags":["java","jbutton","imageicon"],"comments":[{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1665658962,"post_id":74042542,"comment_id":130753761,"body_markdown":"Are you running your application on Windows with monitor scaling &gt; 100%?","body":"Are you running your application on Windows with monitor scaling &gt; 100%?"},{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1665666838,"post_id":74042542,"comment_id":130756506,"body_markdown":"No, it&#39;s the same size","body":"No, it&#39;s the same size"},{"owner":{"account_id":13553491,"reputation":1,"user_id":9777692,"display_name":"Brabudu"},"score":0,"creation_date":1665768839,"post_id":74042542,"comment_id":130783257,"body_markdown":"@GilbertLeBlanc yes, that was the problem, a 125% scaling. I&#39;ve resolved with VM parameter -Dsun.java2d.uiScale=1","body":"@GilbertLeBlanc yes, that was the problem, a 125% scaling. I&#39;ve resolved with VM parameter -Dsun.java2d.uiScale=1"}],"answers":[{"tags":[],"owner":{"account_id":13553491,"reputation":1,"user_id":9777692,"display_name":"Brabudu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665668315,"creation_date":1665586845,"answer_id":74044042,"question_id":74042542,"body_markdown":"Resolved! \r\nThe problem was due to the 125% magnification set in Windows.\r\nIt now works well with VM parameter -Dsun.java2d.uiScale=1","title":"Distorted image with ImageIcon in JButton or JLabel","body":"<p>Resolved!\nThe problem was due to the 125% magnification set in Windows.\nIt now works well with VM parameter -Dsun.java2d.uiScale=1</p>\n"}],"owner":{"account_id":13553491,"reputation":1,"user_id":9777692,"display_name":"Brabudu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665668315,"creation_date":1665580772,"question_id":74042542,"body_markdown":"I&#39;m making a panel with some buttons and images.\r\nFor i.e. \r\n```\r\nurl = ImageIO.read(Electroneddas.class.getResourceAsStream(&quot;/Img/disk_out.png&quot;));\r\nImageIcon t=new ImageIcon(url);\r\n\t\t\t\t\t\t\r\nJButton bl=new JButton(t);\r\n```\r\nbut the image in the button is resized and not shown at 1: 1 scale\r\n[screenshot compared to actual image][1]\r\n\r\nThanks\r\n\r\n  [1]: https://i.stack.imgur.com/rwON7.png\r\n\r\nEDIT\r\n\r\nComplete Test code\r\n\r\n```\r\nimport java.awt.Insets;\r\nimport java.awt.image.BufferedImage;\r\nimport java.io.IOException;\r\n\r\nimport javax.imageio.ImageIO;\r\nimport javax.swing.ImageIcon;\r\nimport javax.swing.JButton;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JPanel;\r\n\r\npublic class Test extends JFrame {\r\n\t\r\n\tpublic Test() {\r\n\t\tJPanel p=new JPanel();\r\n\t\tBufferedImage url;\r\n\t\ttry {\r\n\t\t\turl = ImageIO.read(Test.class.getResourceAsStream(&quot;circle.png&quot;));\r\n\t\t\tJButton bs=new JButton(new ImageIcon(url));\r\n\t\t\t\r\n\t\t\tp.add(bs);\r\n\t\t\t\r\n\t\t} catch (IOException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\r\n\t\tadd(p);\r\n\t\t\r\n\t\tpack();\r\n\t\tsetVisible(true);\r\n\t\t\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tTest t=new Test();\r\n\t}\r\n\r\n}\r\n```\r\nResult:\r\n[Frame][1]\r\n\r\nOriginal image:\r\n[Circle][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/FziKS.png\r\n  [2]: https://i.stack.imgur.com/WDyuF.png","title":"Distorted image with ImageIcon in JButton or JLabel","body":"<p>I'm making a panel with some buttons and images.\nFor i.e.</p>\n<pre><code>url = ImageIO.read(Electroneddas.class.getResourceAsStream(&quot;/Img/disk_out.png&quot;));\nImageIcon t=new ImageIcon(url);\n                        \nJButton bl=new JButton(t);\n</code></pre>\n<p>but the image in the button is resized and not shown at 1: 1 scale\n<a href=\"https://i.stack.imgur.com/rwON7.png\" rel=\"nofollow noreferrer\">screenshot compared to actual image</a></p>\n<p>Thanks</p>\n<p>EDIT</p>\n<p>Complete Test code</p>\n<pre><code>import java.awt.Insets;\nimport java.awt.image.BufferedImage;\nimport java.io.IOException;\n\nimport javax.imageio.ImageIO;\nimport javax.swing.ImageIcon;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\n\npublic class Test extends JFrame {\n    \n    public Test() {\n        JPanel p=new JPanel();\n        BufferedImage url;\n        try {\n            url = ImageIO.read(Test.class.getResourceAsStream(&quot;circle.png&quot;));\n            JButton bs=new JButton(new ImageIcon(url));\n            \n            p.add(bs);\n            \n        } catch (IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n    \n        add(p);\n        \n        pack();\n        setVisible(true);\n        \n    }\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        Test t=new Test();\n    }\n\n}\n</code></pre>\n<p>Result:\n<a href=\"https://i.stack.imgur.com/rwON7.png\" rel=\"nofollow noreferrer\">Frame</a></p>\n<p>Original image:\n<a href=\"https://i.stack.imgur.com/WDyuF.png\" rel=\"nofollow noreferrer\">Circle</a></p>\n"},{"tags":["java","spring","rest","web-services"],"comments":[{"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"score":3,"creation_date":1628089976,"post_id":68653734,"comment_id":121329607,"body_markdown":"It has nothing to do with the @PathVariable. This says that you already have a process running on the same port. My guess is that you try running a new one and the old one is still running","body":"It has nothing to do with the @PathVariable. This says that you already have a process running on the same port. My guess is that you try running a new one and the old one is still running"},{"owner":{"account_id":2075909,"reputation":2169,"user_id":1849261,"accept_rate":78,"display_name":"4EACH"},"score":0,"creation_date":1628090708,"post_id":68653734,"comment_id":121329939,"body_markdown":"What is the operation system? depends your OS, you need to understand which app holds this port, if it a different app from your app you can change the 8080 in springboot application.properties [server.port=XXXX]. In case your springboot app already holds it you should kill the process from IDE or command line.","body":"What is the operation system? depends your OS, you need to understand which app holds this port, if it a different app from your app you can change the 8080 in springboot application.properties [server.port=XXXX]. In case your springboot app already holds it you should kill the process from IDE or command line."},{"owner":{"account_id":2075909,"reputation":2169,"user_id":1849261,"accept_rate":78,"display_name":"4EACH"},"score":0,"creation_date":1628091174,"post_id":68653734,"comment_id":121330158,"body_markdown":"Possible duplicate https://stackoverflow.com/questions/34253779/tomcat-server-error-port-8080-already-in-use","body":"Possible duplicate <a href=\"https://stackoverflow.com/questions/34253779/tomcat-server-error-port-8080-already-in-use\" title=\"tomcat server error port 8080 already in use\">stackoverflow.com/questions/34253779/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":14115707,"reputation":550,"user_id":10197536,"display_name":"Michael Scott"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1628090270,"creation_date":1628090270,"answer_id":68653848,"question_id":68653734,"body_markdown":"On mac, try this\r\n```\r\nsudo lsof -i :8080\r\n\r\n# get the process id from here and run\r\n\r\nkill -9 &lt;process_id&gt;","title":"Port 8080 is already in use","body":"<p>On mac, try this</p>\n<pre><code>sudo lsof -i :8080\n\n# get the process id from here and run\n\nkill -9 &lt;process_id&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17025432,"reputation":29,"user_id":12316832,"display_name":"Ivana"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1628093113,"creation_date":1628090991,"answer_id":68654035,"question_id":68653734,"body_markdown":"I solved it, on Windows\r\n```\r\nnetstat ano | findstr 8080 \r\n\r\ntaskkill /F /PID &lt;number of task&gt;\r\n\r\n","title":"Port 8080 is already in use","body":"<p>I solved it, on Windows</p>\n<pre><code>netstat ano | findstr 8080 \n\ntaskkill /F /PID &lt;number of task&gt;\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22239052,"reputation":92,"user_id":16587205,"display_name":"Dev"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1628163549,"creation_date":1628094731,"answer_id":68654972,"question_id":68653734,"body_markdown":"First your issue is not with **Path variable**, Port **8080** is been used by some **other application** \r\n\r\nCommand for Linux,\r\n\r\n```\r\nsudo netstat -nlap | grep 8080\r\nsudo kill &lt;process id&gt;\r\n```\r\n\r\nCommand for Windows \r\n\r\n```\r\nnetstat -ano | findstr :8080\r\ntaskkill /PID &lt;process id&gt; /F\r\n```\r\n\r\nIf any application uses the port 8080, it will return the process id.\r\n","title":"Port 8080 is already in use","body":"<p>First your issue is not with <strong>Path variable</strong>, Port <strong>8080</strong> is been used by some <strong>other application</strong></p>\n<p>Command for Linux,</p>\n<pre><code>sudo netstat -nlap | grep 8080\nsudo kill &lt;process id&gt;\n</code></pre>\n<p>Command for Windows</p>\n<pre><code>netstat -ano | findstr :8080\ntaskkill /PID &lt;process id&gt; /F\n</code></pre>\n<p>If any application uses the port 8080, it will return the process id.</p>\n"},{"tags":[],"owner":{"account_id":26611564,"reputation":1,"user_id":20231686,"display_name":"Rajan Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665667841,"creation_date":1665667841,"answer_id":74056627,"question_id":68653734,"body_markdown":"To get rid from Port was already in use just put server.port=0 in yml or properties file ,it will auto generate port number for application.","title":"Port 8080 is already in use","body":"<p>To get rid from Port was already in use just put server.port=0 in yml or properties file ,it will auto generate port number for application.</p>\n"}],"owner":{"account_id":17025432,"reputation":29,"user_id":12316832,"display_name":"Ivana"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6167,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":68654035,"answer_count":4,"score":-1,"last_activity_date":1665667841,"creation_date":1628089814,"question_id":68653734,"body_markdown":"The method works properly without path variable but then when I write path variable and run app it says port 8080 is already in use  \r\n```\t\r\n@GetMapping(path=&quot;/{userId}&quot;)\r\npublic String getUser(@PathVariable String userId) {\r\n\treturn &quot;Get User Info with id &quot;+userId;\r\n}","title":"Port 8080 is already in use","body":"<p>The method works properly without path variable but then when I write path variable and run app it says port 8080 is already in use</p>\n<pre><code>@GetMapping(path=&quot;/{userId}&quot;)\npublic String getUser(@PathVariable String userId) {\n    return &quot;Get User Info with id &quot;+userId;\n}\n</code></pre>\n"},{"tags":["java","string","list","groovy"],"comments":[{"owner":{"display_name":"user626607"},"score":0,"creation_date":1362009945,"post_id":15125003,"comment_id":21287545,"body_markdown":"It is already a list in groovy?","body":"It is already a list in groovy?"},{"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"score":0,"creation_date":1362010185,"post_id":15125003,"comment_id":21287616,"body_markdown":"This is a `List` do you want to convert it to a `String`?","body":"This is a <code>List</code> do you want to convert it to a <code>String</code>?"},{"owner":{"account_id":2362613,"reputation":308,"user_id":2068981,"display_name":"user2068981"},"score":0,"creation_date":1362010539,"post_id":15125003,"comment_id":21287742,"body_markdown":"But when I do \n\nids.each{println it}\n\nI have this result :\n[&lt;/br&gt;\n1&lt;/br&gt;\n0&lt;/br&gt;\n,&lt;/br&gt;\n&lt;/br&gt;\n1&lt;/br&gt;\n]&lt;/br&gt;","body":"But when I do   ids.each{println it}  I have this result : [&lt;/br&gt; 1&lt;/br&gt; 0&lt;/br&gt; ,&lt;/br&gt; &lt;/br&gt; 1&lt;/br&gt; ]&lt;/br&gt;"}],"answers":[{"comments":[{"owner":{"account_id":1427657,"reputation":925,"user_id":1350772,"accept_rate":67,"display_name":"Sergio Martinez"},"score":0,"creation_date":1362010637,"post_id":15125100,"comment_id":21287769,"body_markdown":"I think you want to make a string &quot;10,1,9&quot; into a list [10,1,9]","body":"I think you want to make a string &quot;10,1,9&quot; into a list [10,1,9]"},{"owner":{"account_id":2362613,"reputation":308,"user_id":2068981,"display_name":"user2068981"},"score":0,"creation_date":1362012273,"post_id":15125100,"comment_id":21288249,"body_markdown":"def id = ids.substring(1,ids.length()-1)\ndef l= id.split(&#39;,&#39;).collect{it as int}","body":"def id = ids.substring(1,ids.length()-1) def l= id.split(&#39;,&#39;).collect{it as int}"},{"owner":{"account_id":2362613,"reputation":308,"user_id":2068981,"display_name":"user2068981"},"score":1,"creation_date":1362012522,"post_id":15125100,"comment_id":21288322,"body_markdown":"I find this solution but I don&#39;t think is the best :\n\ndef id = ids.substring(1,ids.length()-1) def l= id.split(&#39;,&#39;).collect{it as int}","body":"I find this solution but I don&#39;t think is the best :  def id = ids.substring(1,ids.length()-1) def l= id.split(&#39;,&#39;).collect{it as int}"},{"owner":{"account_id":267730,"reputation":685,"user_id":556078,"accept_rate":71,"display_name":"Max Cascone"},"score":0,"creation_date":1605040091,"post_id":15125100,"comment_id":114529979,"body_markdown":"this works great for me, specifically in Jenkins, and using String instead of Int: `files = &quot;&#39;f1&#39;,&#39;f2&#39;&quot;\n\nlist = files.split(&#39;,&#39;).collect{it as String}\n\n&gt; list==[&#39;f1&#39;, &#39;f2&#39;]\n\n&gt; list[1]==&#39;f2&#39;\n`","body":"this works great for me, specifically in Jenkins, and using String instead of Int: <code>files = &quot;&#39;f1&#39;,&#39;f2&#39;&quot;  list = files.split(&#39;,&#39;).collect{it as String}  &gt; list==[&#39;f1&#39;, &#39;f2&#39;]  &gt; list[1]==&#39;f2&#39; </code>"},{"owner":{"account_id":267730,"reputation":685,"user_id":556078,"accept_rate":71,"display_name":"Max Cascone"},"score":0,"creation_date":1605040686,"post_id":15125100,"comment_id":114530203,"body_markdown":"updating mine after the edit window closed: `list = versionFile.split(&#39;,&#39;).collect()` works fine for strings.","body":"updating mine after the edit window closed: <code>list = versionFile.split(&#39;,&#39;).collect()</code> works fine for strings."}],"tags":[],"owner":{"account_id":1427657,"reputation":925,"user_id":1350772,"accept_rate":67,"display_name":"Sergio Martinez"},"comment_count":5,"down_vote_count":3,"up_vote_count":33,"is_accepted":false,"score":30,"last_activity_date":1362798306,"creation_date":1362010243,"answer_id":15125100,"question_id":15125003,"body_markdown":"    def l = ids.split(&#39;,&#39;).collect{it as int}\r\n","title":"Convert String variable to a List [Groovy]","body":"<pre><code>def l = ids.split(',').collect{it as int}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1249256,"reputation":10253,"user_id":1242842,"accept_rate":70,"display_name":"Alexander Suraphel"},"score":2,"creation_date":1487832265,"post_id":15144918,"comment_id":71963924,"body_markdown":"http://www.jameswiseman.com/blog/2011/01/18/jslint-messages-eval-is-evil/","body":"<a href=\"http://www.jameswiseman.com/blog/2011/01/18/jslint-messages-eval-is-evil/\" rel=\"nofollow noreferrer\">jameswiseman.com/blog/2011/01/18/jslint-messages-eval-is-evi&zwnj;&#8203;l</a>"},{"owner":{"account_id":1223835,"reputation":75888,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":2,"creation_date":1535346283,"post_id":15144918,"comment_id":91015797,"body_markdown":"@AlexanderSuraphel Wrong language.","body":"@AlexanderSuraphel Wrong language."},{"owner":{"account_id":1249256,"reputation":10253,"user_id":1242842,"accept_rate":70,"display_name":"Alexander Suraphel"},"score":0,"creation_date":1535727277,"post_id":15144918,"comment_id":91187020,"body_markdown":"@chrylis Meaning?","body":"@chrylis Meaning?"},{"owner":{"account_id":426184,"reputation":1091,"user_id":807248,"display_name":"Michael A."},"score":0,"creation_date":1547372764,"post_id":15144918,"comment_id":95164570,"body_markdown":"@AlexanderSuraphel \nI will answer for him: your article is related to JavaScript (JSLint specifically). But question itself was about Groovy.","body":"@AlexanderSuraphel  I will answer for him: your article is related to JavaScript (JSLint specifically). But question itself was about Groovy."},{"owner":{"account_id":1249256,"reputation":10253,"user_id":1242842,"accept_rate":70,"display_name":"Alexander Suraphel"},"score":1,"creation_date":1547454391,"post_id":15144918,"comment_id":95184206,"body_markdown":"@MichaelA. Have you read the linked articles? The problem is not specific to JavaScript&#39;s Eval. It&#39;s the idea of passing a string to a method that is willing to execute anything. I felt that OP needs to know the risks as well.","body":"@MichaelA. Have you read the linked articles? The problem is not specific to JavaScript&#39;s Eval. It&#39;s the idea of passing a string to a method that is willing to execute anything. I felt that OP needs to know the risks as well."},{"owner":{"account_id":1249256,"reputation":10253,"user_id":1242842,"accept_rate":70,"display_name":"Alexander Suraphel"},"score":0,"creation_date":1547454581,"post_id":15144918,"comment_id":95184280,"body_markdown":"I think a better link is https://stackoverflow.com/questions/86513/why-is-using-the-javascript-eval-function-a-bad-idea. The ideas discussed apply to any language, not just JavaScript.","body":"I think a better link is <a href=\"https://stackoverflow.com/questions/86513/why-is-using-the-javascript-eval-function-a-bad-idea\" title=\"why is using the javascript eval function a bad idea\">stackoverflow.com/questions/86513/&hellip;</a>. The ideas discussed apply to any language, not just JavaScript."},{"owner":{"account_id":6818878,"reputation":1013,"user_id":5246617,"accept_rate":64,"display_name":"Pavol Travnik"},"score":4,"creation_date":1582904040,"post_id":15144918,"comment_id":106948727,"body_markdown":"I would not consider using Eval as a safe option though.","body":"I would not consider using Eval as a safe option though."}],"tags":[],"owner":{"account_id":1089367,"reputation":3761,"user_id":1084364,"display_name":"Rick Mangi"},"comment_count":7,"down_vote_count":2,"up_vote_count":37,"is_accepted":true,"score":35,"last_activity_date":1362082812,"creation_date":1362082812,"answer_id":15144918,"question_id":15125003,"body_markdown":"\r\n\r\n    def l = Eval.me(ids)\r\n\r\nTakes the string of groovy code (in this case &quot;[10,1,9]&quot;) and evaluates it as groovy. This will give you a list of 3 ints.\r\n","title":"Convert String variable to a List [Groovy]","body":"<pre><code>def l = Eval.me(ids)\n</code></pre>\n\n<p>Takes the string of groovy code (in this case \"[10,1,9]\") and evaluates it as groovy. This will give you a list of 3 ints.</p>\n"},{"comments":[{"owner":{"account_id":6818878,"reputation":1013,"user_id":5246617,"accept_rate":64,"display_name":"Pavol Travnik"},"score":2,"creation_date":1582904420,"post_id":29675035,"comment_id":106948927,"body_markdown":"This should definitely be accepted as right answer.","body":"This should definitely be accepted as right answer."},{"owner":{"account_id":10421055,"reputation":14983,"user_id":7683711,"accept_rate":73,"display_name":"herm"},"score":1,"creation_date":1637593308,"post_id":29675035,"comment_id":123860915,"body_markdown":"For me with strings this only works when I have : &#39;[&quot;string1&quot;, &quot;string2&quot;]&#39; and not with &quot;[&#39;string1&#39;, &#39;string2&#39;]&quot; running the code from jenkins.","body":"For me with strings this only works when I have : &#39;[&quot;string1&quot;, &quot;string2&quot;]&#39; and not with &quot;[&#39;string1&#39;, &#39;string2&#39;]&quot; running the code from jenkins."},{"owner":{"account_id":1249256,"reputation":10253,"user_id":1242842,"accept_rate":70,"display_name":"Alexander Suraphel"},"score":1,"creation_date":1637655618,"post_id":29675035,"comment_id":123877769,"body_markdown":"@herm tested it myself and you&#39;re right. i&#39;ve updated the answer","body":"@herm tested it myself and you&#39;re right. i&#39;ve updated the answer"}],"tags":[],"owner":{"account_id":1249256,"reputation":10253,"user_id":1242842,"accept_rate":70,"display_name":"Alexander Suraphel"},"comment_count":3,"down_vote_count":2,"up_vote_count":32,"is_accepted":false,"score":30,"last_activity_date":1665667650,"creation_date":1429188073,"answer_id":29675035,"question_id":15125003,"body_markdown":"**Use the built-in [JsonSlurper][1]!**\r\n\r\n[Using `Eval` could be **risky** as it executes any code][2] and the string manipulation solution will fail once the data type is changed so it is not adaptable. So it&#39;s best to use [JsonSlurper][3].\r\n\r\n    import groovy.json.JsonSlurper\r\n    \r\n    //List of ints \r\n    def ids = &quot;[10, 1, 9]&quot;\r\n    def idList = new JsonSlurper().parseText(ids)\r\n    \r\n    assert 10 == idList[0]\r\n    \r\n    //List of strings \r\n    def ids = &#39;[&quot;10&quot;, &quot;1&quot;, &quot;9&quot;]&#39;\r\n    idList = new JsonSlurper().parseText(ids)\r\n    \r\n    assert &#39;10&#39; == idList[0]\r\n\r\n\r\n  [1]: http://docs.groovy-lang.org/latest/html/gapi/groovy/json/JsonSlurper.html\r\n  [2]: https://nedbatchelder.com/blog/201206/eval_really_is_dangerous.html\r\n  [3]: http://groovy.codehaus.org/gapi/groovy/json/JsonSlurper.html","title":"Convert String variable to a List [Groovy]","body":"<p><strong>Use the built-in <a href=\"http://docs.groovy-lang.org/latest/html/gapi/groovy/json/JsonSlurper.html\" rel=\"nofollow noreferrer\">JsonSlurper</a>!</strong></p>\n<p><a href=\"https://nedbatchelder.com/blog/201206/eval_really_is_dangerous.html\" rel=\"nofollow noreferrer\">Using <code>Eval</code> could be <strong>risky</strong> as it executes any code</a> and the string manipulation solution will fail once the data type is changed so it is not adaptable. So it's best to use <a href=\"http://groovy.codehaus.org/gapi/groovy/json/JsonSlurper.html\" rel=\"nofollow noreferrer\">JsonSlurper</a>.</p>\n<pre><code>import groovy.json.JsonSlurper\n\n//List of ints \ndef ids = &quot;[10, 1, 9]&quot;\ndef idList = new JsonSlurper().parseText(ids)\n\nassert 10 == idList[0]\n\n//List of strings \ndef ids = '[&quot;10&quot;, &quot;1&quot;, &quot;9&quot;]'\nidList = new JsonSlurper().parseText(ids)\n\nassert '10' == idList[0]\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4298052,"reputation":12197,"user_id":3512538,"accept_rate":83,"display_name":"CIsForCookies"},"score":0,"creation_date":1568895174,"post_id":55310743,"comment_id":102425607,"body_markdown":"`Eval.me` didn&#39;t work for me as well (Jenkins groovy script). However, your solution gave a wrong result. My str is &quot;[&#39;/a/b/c/d@2/e/f/g/h/i/j/k/l.py::m[n-10-3-9-0/8-17-12]&#39;,]&quot; (actually I have more entries in the string, but this is the general idea). The tokenize returns only the inner list, i.e. &quot;[n-10-3-9-0/8-17-12]&#39;&quot;","body":"<code>Eval.me</code> didn&#39;t work for me as well (Jenkins groovy script). However, your solution gave a wrong result. My str is &quot;[&#39;/a/b/c/d@2/e/f/g/h/i/j/k/l.py::m[n-10-3-9-0/8-17-12]&#39;,]&quot; (actually I have more entries in the string, but this is the general idea). The tokenize returns only the inner list, i.e. &quot;[n-10-3-9-0/8-17-12]&#39;&quot;"},{"owner":{"account_id":90642,"reputation":417,"user_id":249417,"accept_rate":87,"display_name":"Vladimir"},"score":1,"creation_date":1571665459,"post_id":55310743,"comment_id":103305899,"body_markdown":"The higher scoring answers didn&#39;t work for me. This one did.","body":"The higher scoring answers didn&#39;t work for me. This one did."},{"owner":{"account_id":13030185,"reputation":801,"user_id":9416772,"display_name":"Raunak Kapoor"},"score":0,"creation_date":1661459822,"post_id":55310743,"comment_id":129784532,"body_markdown":"Could you explain what exactly tokenize(&#39;,[]&#39;) doing here?","body":"Could you explain what exactly tokenize(&#39;,[]&#39;) doing here?"},{"owner":{"account_id":13847597,"reputation":1092,"user_id":9996381,"display_name":"Nick"},"score":0,"creation_date":1681246859,"post_id":55310743,"comment_id":134025208,"body_markdown":"Without the brackets, you get [[a, b, c]] as a result. Not sure I understand how adding the brackets removes the additional outer list.","body":"Without the brackets, you get [[a, b, c]] as a result. Not sure I understand how adding the brackets removes the additional outer list."}],"tags":[],"owner":{"account_id":9597337,"reputation":665,"user_id":7126065,"accept_rate":0,"display_name":"TangHongWan"},"comment_count":4,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1553316986,"creation_date":1553316986,"answer_id":55310743,"question_id":15125003,"body_markdown":"This does work for me. And `Eval.me` will not work in Jenkins groovy script. I have tried.\r\n\r\n    assert &quot;[a,b,c]&quot;.tokenize(&#39;,[]&#39;) == [a,b,c]","title":"Convert String variable to a List [Groovy]","body":"<p>This does work for me. And <code>Eval.me</code> will not work in Jenkins groovy script. I have tried.</p>\n\n<pre><code>assert \"[a,b,c]\".tokenize(',[]') == [a,b,c]\n</code></pre>\n"}],"owner":{"account_id":2362613,"reputation":308,"user_id":2068981,"display_name":"user2068981"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":100350,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"accepted_answer_id":15144918,"answer_count":4,"score":29,"last_activity_date":1665667650,"creation_date":1362009665,"question_id":15125003,"body_markdown":"How can I convert this `String` variable to a `List` ?\r\n\r\n    def ids = &quot;[10, 1, 9]&quot;\r\n\r\nI tried with: as `List` and `toList();`","title":"Convert String variable to a List [Groovy]","body":"<p>How can I convert this <code>String</code> variable to a <code>List</code> ?</p>\n\n<pre><code>def ids = \"[10, 1, 9]\"\n</code></pre>\n\n<p>I tried with: as <code>List</code> and <code>toList();</code></p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":10531491,"reputation":330,"user_id":7760687,"display_name":"Mayur"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1665667501,"creation_date":1665639562,"answer_id":74050910,"question_id":74050573,"body_markdown":"**Try This**\r\n\r\n    private int selectedItem = -1;\r\n    \r\n        public void onBindViewHolder(@NonNull RecyclerView.ViewHolder viewHolder, int position) {\r\n            ViewHolder holder = (ViewHolder) viewHolder;\r\n            ChannelMainBean bean = mList.get(position);\r\n            holder.tvContent.setText(bean.getChannelName());\r\n    \t\t\r\n    \t\tholder.tvContent.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    selectedItem = position;\r\n    \t\t\t\tnotifyDataSetChanged();\r\n                }\r\n            });\r\n            if (selectedItem == position){\r\n                holder.tvContent.setBackground(ResUtils.getDrawable(R.drawable.choose_network_border_blue));\r\n            }\r\n            else{\r\n                holder.tvContent.setBackground(ResUtils.getDrawable(R.drawable.choose_network_background_default));\r\n            }\r\n        }\r\n        }\r\n\r\n`selectedItem` is integer variable set global and than set click listener on `TextView` and inside click method set click position in to `selectedItem` and than `notifyDataSetChanged()` for update background for text view","title":"How to highlight selected items in the Adapter in Android(Java)","body":"<p><strong>Try This</strong></p>\n<pre><code>private int selectedItem = -1;\n\n    public void onBindViewHolder(@NonNull RecyclerView.ViewHolder viewHolder, int position) {\n        ViewHolder holder = (ViewHolder) viewHolder;\n        ChannelMainBean bean = mList.get(position);\n        holder.tvContent.setText(bean.getChannelName());\n        \n        holder.tvContent.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                selectedItem = position;\n                notifyDataSetChanged();\n            }\n        });\n        if (selectedItem == position){\n            holder.tvContent.setBackground(ResUtils.getDrawable(R.drawable.choose_network_border_blue));\n        }\n        else{\n            holder.tvContent.setBackground(ResUtils.getDrawable(R.drawable.choose_network_background_default));\n        }\n    }\n    }\n</code></pre>\n<p><code>selectedItem</code> is integer variable set global and than set click listener on <code>TextView</code> and inside click method set click position in to <code>selectedItem</code> and than <code>notifyDataSetChanged()</code> for update background for text view</p>\n"}],"owner":{"account_id":26213782,"reputation":73,"user_id":19892188,"display_name":"Dinuka Shehan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74050910,"answer_count":1,"score":0,"last_activity_date":1665667501,"creation_date":1665636118,"question_id":74050573,"body_markdown":"couldn&#39;t highlight the selected item in the adapter recyclerview.\r\n\r\n```@Override\r\npublic void onBindViewHolder(@NonNull RecyclerView.ViewHolder viewHolder, int position) {\r\n    ViewHolder holder = (ViewHolder) viewHolder;\r\n    ChannelMainBean bean = mList.get(position);\r\n    holder.tvContent.setText(bean.getChannelName());\r\n    if (holder.selectedItem == position){\r\n        holder.tvContent.setBackground(ResUtils.getDrawable(R.drawable.choose_network_border_blue));\r\n    }\r\n    else{\r\n        holder.tvContent.setBackground(ResUtils.getDrawable(R.drawable.choose_network_background_default));\r\n    }\r\n}\r\n```","title":"How to highlight selected items in the Adapter in Android(Java)","body":"<p>couldn't highlight the selected item in the adapter recyclerview.</p>\n<pre><code>public void onBindViewHolder(@NonNull RecyclerView.ViewHolder viewHolder, int position) {\n    ViewHolder holder = (ViewHolder) viewHolder;\n    ChannelMainBean bean = mList.get(position);\n    holder.tvContent.setText(bean.getChannelName());\n    if (holder.selectedItem == position){\n        holder.tvContent.setBackground(ResUtils.getDrawable(R.drawable.choose_network_border_blue));\n    }\n    else{\n        holder.tvContent.setBackground(ResUtils.getDrawable(R.drawable.choose_network_background_default));\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","unit-testing","junit","mockito"],"comments":[{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1650580718,"post_id":71961575,"comment_id":127158956,"body_markdown":"Mock the CustomerRepo.  I&#39;d suggest Mockito.","body":"Mock the CustomerRepo.  I&#39;d suggest Mockito."}],"answers":[{"tags":[],"owner":{"account_id":12455565,"reputation":5317,"user_id":9068895,"display_name":"Alex"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1650585680,"creation_date":1650585680,"answer_id":71962052,"question_id":71961575,"body_markdown":"In `Mockito` `ArgumentMatcher` is a functional interface and you could use `argThat` matcher.\r\n\r\n```\r\n@Mock\r\nprivate CustomerRepo customerRepo;\r\n\r\n@Test\r\nvoid updateCustomerThrowsException() {\r\n\tdoThrow(RuntimeException.class)\r\n\t\t\t.when(customerRepo).save(argThat(customer -&gt; customer.getId() == 5));\r\n\r\n\tvar customer = new Customer();\r\n\tcustomer.setId(5);\r\n\r\n\tassertThrows(RuntimeException.class, () -&gt; updateCustomer(customer));\r\n}\r\n```","title":"How to throw an exception based on some condition in Junit 5?","body":"<p>In <code>Mockito</code> <code>ArgumentMatcher</code> is a functional interface and you could use <code>argThat</code> matcher.</p>\n<pre><code>@Mock\nprivate CustomerRepo customerRepo;\n\n@Test\nvoid updateCustomerThrowsException() {\n    doThrow(RuntimeException.class)\n            .when(customerRepo).save(argThat(customer -&gt; customer.getId() == 5));\n\n    var customer = new Customer();\n    customer.setId(5);\n\n    assertThrows(RuntimeException.class, () -&gt; updateCustomer(customer));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26611564,"reputation":1,"user_id":20231686,"display_name":"Rajan Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665667406,"creation_date":1665666393,"answer_id":74056293,"question_id":71961575,"body_markdown":"With Junit 5 you can use - assertThrows() to throw exception based on condition.\r\n\r\nExample :- \r\n\r\n    @Test\r\n    public void testFooThrowsIndexOutOfBoundsException() {\r\n        Throwable exception = assertThrows(IndexOutOfBoundsException.class, () -&gt; foo.doStuff());\r\n        assertEquals(&quot;expected messages&quot;, exception.getMessage());\r\n    }","title":"How to throw an exception based on some condition in Junit 5?","body":"<p>With Junit 5 you can use - assertThrows() to throw exception based on condition.</p>\n<p>Example :-</p>\n<pre><code>@Test\npublic void testFooThrowsIndexOutOfBoundsException() {\n    Throwable exception = assertThrows(IndexOutOfBoundsException.class, () -&gt; foo.doStuff());\n    assertEquals(&quot;expected messages&quot;, exception.getMessage());\n}\n</code></pre>\n"}],"owner":{"account_id":7938311,"reputation":537,"user_id":6164682,"display_name":"sub"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1630,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71962052,"answer_count":2,"score":0,"last_activity_date":1665667406,"creation_date":1650580541,"question_id":71961575,"body_markdown":"I have a spring boot application with Junit 5 and Mockito. \r\n\r\nI have the below code. \r\n\r\n\r\n     @Autowired\r\n        CustomerRepo customerRepo;\r\n    \r\n        public UpdatedCustomer updateCustomer(Customer customer) {\r\n            UpdatedCustomer updCustomer = new UpdatedCustomer();\r\n            updCustomer.setId(customer.getId());\r\n            //some more setters\r\n    \r\n            //Here I need to throw exceptions for the customer whose id is 5 only. Can I do this in mockito or any other framework?\r\n            customerRepo.save(updCustomer);\r\n            return updCustomer;\r\n        }\r\n\r\nI need to throw an exception for the customer whose ID is 5 in the above code and for other customers actual implementation of save should be invoked. Is it possible in SpyBean or any other way?\r\n\r\nKindly suggest.","title":"How to throw an exception based on some condition in Junit 5?","body":"<p>I have a spring boot application with Junit 5 and Mockito.</p>\n<p>I have the below code.</p>\n<pre><code> @Autowired\n    CustomerRepo customerRepo;\n\n    public UpdatedCustomer updateCustomer(Customer customer) {\n        UpdatedCustomer updCustomer = new UpdatedCustomer();\n        updCustomer.setId(customer.getId());\n        //some more setters\n\n        //Here I need to throw exceptions for the customer whose id is 5 only. Can I do this in mockito or any other framework?\n        customerRepo.save(updCustomer);\n        return updCustomer;\n    }\n</code></pre>\n<p>I need to throw an exception for the customer whose ID is 5 in the above code and for other customers actual implementation of save should be invoked. Is it possible in SpyBean or any other way?</p>\n<p>Kindly suggest.</p>\n"},{"tags":["java","windows","ldap","ipv6","openldap"],"answers":[{"tags":[],"owner":{"account_id":2256321,"reputation":3472,"user_id":1987437,"accept_rate":100,"display_name":"Liam Kelly"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665667139,"creation_date":1665667139,"answer_id":74056455,"question_id":74039248,"body_markdown":"I am not a `Java` expert but the `permission denied` is an odd error for a networking problem. \r\n\r\nDigging into the problem it looks like this mainly happens when you set a socket  to IPv4 and give it an IPv6 address or vice versa. If possible I would repeat your test using the IPv6 address instead of the domain name for `YVONTEXXXXX1F3.XXXXXX.net` (you&#39;ll need to disable the SSL hostname check). This will ensure you are passing an IPv6 address to the connect. If the error persists then I would look into the socket properties. You may be able to do this at compile time with:\r\n\r\n`-Djava.net.preferIPv4Stack=false -Djava.net.preferIPv6Addresses=true`\r\n\r\n**References**\r\n* https://stackoverflow.com/a/12902187/1987437\r\n* https://blog.miyuru.lk/enabling-ipv6-on-maven-java/#:~:text=For%20Java%20Applications%20you%20can,property%20in%20the%20app%20itself.","title":"(91) Connect Error java.net.SocketException: Permission denied: connect&#39; LDAP IPV6","body":"<p>I am not a <code>Java</code> expert but the <code>permission denied</code> is an odd error for a networking problem.</p>\n<p>Digging into the problem it looks like this mainly happens when you set a socket  to IPv4 and give it an IPv6 address or vice versa. If possible I would repeat your test using the IPv6 address instead of the domain name for <code>YVONTEXXXXX1F3.XXXXXX.net</code> (you'll need to disable the SSL hostname check). This will ensure you are passing an IPv6 address to the connect. If the error persists then I would look into the socket properties. You may be able to do this at compile time with:</p>\n<p><code>-Djava.net.preferIPv4Stack=false -Djava.net.preferIPv6Addresses=true</code></p>\n<p><strong>References</strong></p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/12902187/1987437\">https://stackoverflow.com/a/12902187/1987437</a></li>\n<li><a href=\"https://blog.miyuru.lk/enabling-ipv6-on-maven-java/#:%7E:text=For%20Java%20Applications%20you%20can,property%20in%20the%20app%20itself\" rel=\"nofollow noreferrer\">https://blog.miyuru.lk/enabling-ipv6-on-maven-java/#:~:text=For%20Java%20Applications%20you%20can,property%20in%20the%20app%20itself</a>.</li>\n</ul>\n"}],"owner":{"account_id":26579111,"reputation":21,"user_id":20204033,"display_name":"Yugandhar Reddy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":870,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665667139,"creation_date":1665565606,"question_id":74039248,"body_markdown":"we are testing our appliction to work only on IPV6 \r\nwhen trying to connect to LDAP in windows 10 java 17 env and after disabling IPV4 from network level settings was facing below issue \r\n\r\n    SEVERE: LDAPException: Unable to connect to server YVONTEXXXXX1F3.XXXXXX.net:6,366 (91) Connect Error\r\n    java.net.SocketException: Permission denied: connect&#39;\r\n    \r\n    Caused by: java.net.SocketException: Permission denied: connect\r\n            at java.base/sun.nio.ch.Net.connect0(Native Method)\r\n            at java.base/sun.nio.ch.Net.connect(Net.java:579)\r\n            at java.base/sun.nio.ch.Net.connect(Net.java:568)\r\n            at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:588)\r\n            at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\r\n            at java.base/java.net.Socket.connect(Socket.java:633)\r\n            at java.base/sun.security.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:299)\r\n            at java.base/sun.security.ssl.SSLSocketImpl.&lt;init&gt;(SSLSocketImpl.java:158)\r\n            at java.base/sun.security.ssl.SSLSocketFactoryImpl.createSocket(SSLSocketFactoryImpl.java:88)\r\n            at com.novell.ldap.LDAPJSSESecureSocketFactory.createSocket(LDAPJSSESecureSocketFactory.java:96)\r\n            at com.novell.ldap.Connection.connect(Connection.java:455)\r\n            ... 42 more\r\n\r\nwhat can be the issue\r\n\r\n - does LDAP support IPV6 ?\r\n - do we need to remove any firewall settings\r\n\r\nconnection is working fine when IPV4 is enabled","title":"(91) Connect Error java.net.SocketException: Permission denied: connect&#39; LDAP IPV6","body":"<p>we are testing our appliction to work only on IPV6\nwhen trying to connect to LDAP in windows 10 java 17 env and after disabling IPV4 from network level settings was facing below issue</p>\n<pre><code>SEVERE: LDAPException: Unable to connect to server YVONTEXXXXX1F3.XXXXXX.net:6,366 (91) Connect Error\njava.net.SocketException: Permission denied: connect'\n\nCaused by: java.net.SocketException: Permission denied: connect\n        at java.base/sun.nio.ch.Net.connect0(Native Method)\n        at java.base/sun.nio.ch.Net.connect(Net.java:579)\n        at java.base/sun.nio.ch.Net.connect(Net.java:568)\n        at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:588)\n        at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\n        at java.base/java.net.Socket.connect(Socket.java:633)\n        at java.base/sun.security.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:299)\n        at java.base/sun.security.ssl.SSLSocketImpl.&lt;init&gt;(SSLSocketImpl.java:158)\n        at java.base/sun.security.ssl.SSLSocketFactoryImpl.createSocket(SSLSocketFactoryImpl.java:88)\n        at com.novell.ldap.LDAPJSSESecureSocketFactory.createSocket(LDAPJSSESecureSocketFactory.java:96)\n        at com.novell.ldap.Connection.connect(Connection.java:455)\n        ... 42 more\n</code></pre>\n<p>what can be the issue</p>\n<ul>\n<li>does LDAP support IPV6 ?</li>\n<li>do we need to remove any firewall settings</li>\n</ul>\n<p>connection is working fine when IPV4 is enabled</p>\n"},{"tags":["java","selenium","xpath","webdriver","webdriverwait"],"comments":[{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":0,"creation_date":1665656105,"post_id":74053830,"comment_id":130752859,"body_markdown":"Where is the link element and what is the tag and the text? Totally unclear. Can you share a link to that page or at least the XML of it with more explanations what is your goal?","body":"Where is the link element and what is the tag and the text? Totally unclear. Can you share a link to that page or at least the XML of it with more explanations what is your goal?"},{"owner":{"account_id":7693984,"reputation":6097,"user_id":5829191,"accept_rate":63,"display_name":"rozerro"},"score":0,"creation_date":1665657412,"post_id":74053830,"comment_id":130753302,"body_markdown":"@Prophet quite clear as for me. I found a link by xpath - the code line for that is in topic. Then I know there should be a `span` tag inside that link (tag `a`). That span tag has a `class=&quot;extra-light&quot;` and it wraps a given text (for example `stackoverflow`). So I just try to detect if the link contains that span tag. Clear?","body":"@Prophet quite clear as for me. I found a link by xpath - the code line for that is in topic. Then I know there should be a <code>span</code> tag inside that link (tag <code>a</code>). That span tag has a <code>class=&quot;extra-light&quot;</code> and it wraps a given text (for example <code>stackoverflow</code>). So I just try to detect if the link contains that span tag. Clear?"},{"owner":{"account_id":25717722,"reputation":10119,"user_id":19475185,"display_name":"Barry the Platipus"},"score":0,"creation_date":1665659059,"post_id":74053830,"comment_id":130753796,"body_markdown":"Still not clear: are you looking **only** for `a` tags containing those spans, or are you also looking for `a` tags not containing that span?","body":"Still not clear: are you looking <b>only</b> for <code>a</code> tags containing those spans, or are you also looking for <code>a</code> tags not containing that span?"},{"owner":{"account_id":7693984,"reputation":6097,"user_id":5829191,"accept_rate":63,"display_name":"rozerro"},"score":0,"creation_date":1665659193,"post_id":74053830,"comment_id":130753850,"body_markdown":"@BarrythePlatipus I&#39;m looking only for `a` tags with attribute `so-extra=&quot;x12fog&quot;` containing span with `class=&quot;extra-light&quot;` which contains a given text.","body":"@BarrythePlatipus I&#39;m looking only for <code>a</code> tags with attribute <code>so-extra=&quot;x12fog&quot;</code> containing span with <code>class=&quot;extra-light&quot;</code> which contains a given text."},{"owner":{"account_id":25717722,"reputation":10119,"user_id":19475185,"display_name":"Barry the Platipus"},"score":0,"creation_date":1665659379,"post_id":74053830,"comment_id":130753907,"body_markdown":"So then locate those `span` tags, and their `a` ancestors (with that attribute). Easy, no drama.","body":"So then locate those <code>span</code> tags, and their <code>a</code> ancestors (with that attribute). Easy, no drama."}],"answers":[{"tags":[],"owner":{"account_id":15083819,"reputation":33038,"user_id":10885684,"display_name":"KunduK"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665658076,"creation_date":1665658076,"answer_id":74054509,"question_id":74053830,"body_markdown":"Try either of the `xpath`.\r\n\r\n    //a[.//span[@class=&#39;extra-light&#39;]]\r\n\r\nOr\r\n\r\n    //a[.//span[@class=&#39;extra-light&#39; and text()=&#39;stackoverflow&#39;]]\r\n\r\nOr\r\n\r\n    //a[.//span[@class=&#39;extra-light&#39; and contains(.,&#39;stackoverflow&#39;)]]\r\n\r\n\r\n----------\r\nCode should be\r\n\r\n\r\n    ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[.//span[@class=&#39;extra-light&#39; and text()=&#39;stackoverflow&#39;]]&quot;))\r\n\r\nOr\r\n\r\n    ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[.//span[@class=&#39;extra-light&#39; and contains(.,&#39;stackoverflow&#39;)]]&quot;))\r\n\r\nor\r\n\r\n    ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[.//span[@class=&#39;extra-light&#39;]]&quot;))","title":"How to check if located link contains a tag with a given text?","body":"<p>Try either of the <code>xpath</code>.</p>\n<pre><code>//a[.//span[@class='extra-light']]\n</code></pre>\n<p>Or</p>\n<pre><code>//a[.//span[@class='extra-light' and text()='stackoverflow']]\n</code></pre>\n<p>Or</p>\n<pre><code>//a[.//span[@class='extra-light' and contains(.,'stackoverflow')]]\n</code></pre>\n<hr />\n<p>Code should be</p>\n<pre><code>ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[.//span[@class='extra-light' and text()='stackoverflow']]&quot;))\n</code></pre>\n<p>Or</p>\n<pre><code>ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[.//span[@class='extra-light' and contains(.,'stackoverflow')]]&quot;))\n</code></pre>\n<p>or</p>\n<pre><code>ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[.//span[@class='extra-light']]&quot;))\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7693984,"reputation":6097,"user_id":5829191,"accept_rate":63,"display_name":"rozerro"},"score":0,"creation_date":1665665977,"post_id":74055497,"comment_id":130756159,"body_markdown":"What is a `.` in `contains(.,&#39;stackoverflow&#39;)`? And does the declaration structure like this `//a[@so-extra=&#39;x12fog&#39;]//span[@class=&#39;extra-light&#39;` defines outer `a` and inner `span`?","body":"What is a <code>.</code> in <code>contains(.,&#39;stackoverflow&#39;)</code>? And does the declaration structure like this <code>&#47;&#47;a[@so-extra=&#39;x12fog&#39;]&#47;&#47;span[@class=&#39;extra-light&#39;</code> defines outer <code>a</code> and inner <code>span</code>?"},{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":0,"creation_date":1665666294,"post_id":74055497,"comment_id":130756274,"body_markdown":"the dot `.` here means `any` i.e. we are looking for any attribute (id, class, text, style...) to contain &quot;stackoverflow&quot;  value","body":"the dot <code>.</code> here means <code>any</code> i.e. we are looking for any attribute (id, class, text, style...) to contain &quot;stackoverflow&quot;  value"},{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":0,"creation_date":1665666339,"post_id":74055497,"comment_id":130756287,"body_markdown":"yes, `a` is parent node and `span` is child node inside the parent","body":"yes, <code>a</code> is parent node and <code>span</code> is child node inside the parent"},{"owner":{"account_id":7693984,"reputation":6097,"user_id":5829191,"accept_rate":63,"display_name":"rozerro"},"score":0,"creation_date":1665666595,"post_id":74055497,"comment_id":130756407,"body_markdown":"&quot;i.e. we are looking for any attribute (id, class, text, style...) to contain &quot;stackoverflow&quot; value&quot; - does it reflect the structure `&lt;span class=&quot;extra-light&quot;&gt;stackoverflow&lt;/span&gt;`? i.e. the value `stackoverflow` doesn&#39;t relate to any attribute.","body":"&quot;i.e. we are looking for any attribute (id, class, text, style...) to contain &quot;stackoverflow&quot; value&quot; - does it reflect the structure <code>&lt;span class=&quot;extra-light&quot;&gt;stackoverflow&lt;&#47;span&gt;</code>? i.e. the value <code>stackoverflow</code> doesn&#39;t relate to any attribute."},{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":0,"creation_date":1665666750,"post_id":74055497,"comment_id":130756460,"body_markdown":"It does. It&#39;s the `text` attribute value.","body":"It does. It&#39;s the <code>text</code> attribute value."},{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":0,"creation_date":1665666855,"post_id":74055497,"comment_id":130756513,"body_markdown":"You may use the following syntax as well `contains(text(),&#39;stackoverflow&#39;)` instead the `contains(.,&#39;stackoverflow&#39;)` and this will limit searching in text attributes only","body":"You may use the following syntax as well <code>contains(text(),&#39;stackoverflow&#39;)</code> instead the <code>contains(.,&#39;stackoverflow&#39;)</code> and this will limit searching in text attributes only"}],"tags":[],"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1665662741,"creation_date":1665662741,"answer_id":74055497,"question_id":74053830,"body_markdown":"You can use `findElements` method with XPath locator defining the desired element as following:\r\n```java\r\nif(driver.findElements(By.xpath(&quot;//a[@so-extra=&#39;x12fog&#39;]//span[@class=&#39;extra-light&#39; and contains(.,&#39;stackoverflow&#39;)]&quot;)).size()&gt;0){\r\n    System.out.println(&quot;Element found&quot;);\r\n}\r\n```\r\n`findElements` method return a list of found matching elements. So, if there is such element the list will be non-empty (size&gt;0), otherwise the returned list will be empty.","title":"How to check if located link contains a tag with a given text?","body":"<p>You can use <code>findElements</code> method with XPath locator defining the desired element as following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if(driver.findElements(By.xpath(&quot;//a[@so-extra='x12fog']//span[@class='extra-light' and contains(.,'stackoverflow')]&quot;)).size()&gt;0){\n    System.out.println(&quot;Element found&quot;);\n}\n</code></pre>\n<p><code>findElements</code> method return a list of found matching elements. So, if there is such element the list will be non-empty (size&gt;0), otherwise the returned list will be empty.</p>\n"}],"owner":{"account_id":7693984,"reputation":6097,"user_id":5829191,"accept_rate":63,"display_name":"rozerro"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74055497,"answer_count":2,"score":0,"last_activity_date":1665666968,"creation_date":1665655065,"question_id":74053830,"body_markdown":"I need to check if located link contains `&lt;span class=&quot;extra-light&quot;&gt;` with a given text. \r\nThe way I locate the link:\r\n\r\n    ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[@so-extra=\\&quot;x12fog\\&quot;]&quot;))\r\n\r\nHow to make it?\r\n","title":"How to check if located link contains a tag with a given text?","body":"<p>I need to check if located link contains <code>&lt;span class=&quot;extra-light&quot;&gt;</code> with a given text.\nThe way I locate the link:</p>\n<pre><code>ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[@so-extra=\\&quot;x12fog\\&quot;]&quot;))\n</code></pre>\n<p>How to make it?</p>\n"},{"tags":["java","xml","web","servlets","server"],"comments":[{"owner":{"account_id":1782099,"reputation":843,"user_id":1624551,"display_name":"Pao"},"score":0,"creation_date":1663678940,"post_id":73786254,"comment_id":130292558,"body_markdown":"It is not clear to me what you are trying to do. You imported the project in Eclipse and how are you trying to start it? Regarding the question for jar files: Usually you do not have to copy jar files manually. The pom,xml might be helpful.","body":"It is not clear to me what you are trying to do. You imported the project in Eclipse and how are you trying to start it? Regarding the question for jar files: Usually you do not have to copy jar files manually. The pom,xml might be helpful."},{"owner":{"account_id":22873416,"reputation":23,"user_id":17016103,"display_name":"utente1234567890"},"score":0,"creation_date":1663680940,"post_id":73786254,"comment_id":130293407,"body_markdown":"I run it from the server. First I remove the project from the server, then I clean the server, re-add the project to the server, then go to the project and run it with the server. I added the pom.xml file","body":"I run it from the server. First I remove the project from the server, then I clean the server, re-add the project to the server, then go to the project and run it with the server. I added the pom.xml file"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1663681075,"post_id":73786254,"comment_id":130293465,"body_markdown":"YO need to build the war file and deploy that to the server. However you are using Spring Boot why deploy to the server at all. That being said your dependencies are quite a mess, mixing jars from different versions of a framework, using incompatible versions... Plugins as dependencies","body":"YO need to build the war file and deploy that to the server. However you are using Spring Boot why deploy to the server at all. That being said your dependencies are quite a mess, mixing jars from different versions of a framework, using incompatible versions... Plugins as dependencies"},{"owner":{"account_id":1782099,"reputation":843,"user_id":1624551,"display_name":"Pao"},"score":0,"creation_date":1663681338,"post_id":73786254,"comment_id":130293588,"body_markdown":"As M. Deinum said you don&#39;t need a dedicated server, Spring Boot comes with an embedded server. To run it, see this question for example: https://stackoverflow.com/questions/23677808/how-to-run-spring-boot-web-application-in-eclipse-itself","body":"As M. Deinum said you don&#39;t need a dedicated server, Spring Boot comes with an embedded server. To run it, see this question for example: <a href=\"https://stackoverflow.com/questions/23677808/how-to-run-spring-boot-web-application-in-eclipse-itself\" title=\"how to run spring boot web application in eclipse itself\">stackoverflow.com/questions/23677808/&hellip;</a>"},{"owner":{"account_id":22873416,"reputation":23,"user_id":17016103,"display_name":"utente1234567890"},"score":0,"creation_date":1663681449,"post_id":73786254,"comment_id":130293647,"body_markdown":"my professor told me to use eclipse, so i was forced to abandon spring, using embedded server, it gave me other errors, i posted the question and someone told me these errors depended on the server referencing a project version not updated and therefore I had to redeploy it. On another page in the forum, I read that it is always better to have the external server and not the internal one, so I put it external. I have 290 jar files in my maven dependencies and I don&#39;t know which ones to keep and which to delete.","body":"my professor told me to use eclipse, so i was forced to abandon spring, using embedded server, it gave me other errors, i posted the question and someone told me these errors depended on the server referencing a project version not updated and therefore I had to redeploy it. On another page in the forum, I read that it is always better to have the external server and not the internal one, so I put it external. I have 290 jar files in my maven dependencies and I don&#39;t know which ones to keep and which to delete."}],"owner":{"account_id":22873416,"reputation":23,"user_id":17016103,"display_name":"utente1234567890"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":253,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1665666966,"creation_date":1663674721,"question_id":73786254,"body_markdown":"I have a dynamic web project imported from Spring into Eclipse. I updated the server, it was embedded before, I updated the dependencies in the pom regarding the server, I read the other solutions regarding the various entries in the stacktrace, but nothing worked, I deleted .m2, the web.xml file I edited several times, some tutorials suggest creating a separate class for each jsp page, but this would no longer work for me a page that contains multiple forms and therefore refers to multiple methods in the class. However, I commented on the other servlets in the web.xml file because in the meantime I want you to load at least the first one that contains the references to all the others. I have been stuck on this error for several days. Can someone help me? thanks to who helps me.\r\n\r\nThe jar files contained in the Maven, do I have to copy them all in the WEB-INF \\ lib folder?\r\n\r\ndo I need to add the pom.xml file here in the question?\r\n\r\nSTACKTRACE:\r\n\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Server version name:   Apache Tomcat/10.0.23\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Server built:          Jul 14 2022 08:16:11 UTC\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Server version number: 10.0.23.0\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: OS Name:               Windows 8\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: OS Version:            6.2\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Architecture:          amd64\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Java Home:             C:\\Program Files\\Java\\jdk-18.0.2.1\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: JVM Version:           18.0.2.1+1-1\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: JVM Vendor:            Oracle Corporation\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: CATALINA_BASE:         \r\n    C:\\Users\\segreteria\\Desktop\\WORKSPACE3\\.metadata\\.plugins\\org.eclipse.wst.\r\n    server.core\\tmp0\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: CATALINA_HOME:         C:\\Program Files\\Apache2\\apache-tomcat-10.0.23-windows- \r\n    x64\\apache-tomcat-10.0.23\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Command line argument: - \r\n    Dcatalina.base=C:\\Users\\segreteria\\Desktop\\WORKSPACE3\\.metadata\\.plugins\r\n    \\org.eclipse.wst.server.core\\tmp0\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Command line argument: -Dcatalina.home=C:\\Program Files\\Apache2\\apache-tomcat- \r\n    10.0.23-windows-x64\\apache-tomcat-10.0.23\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Command line argument: - \r\n    Dwtp.deploy=C:\\Users\\segreteria\\Desktop\\WORKSPACE3\\.metadata\\.plugins\r\n    \\org.eclipse.wst.server.core\\tmp0\\wtpwebapps\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Command line argument: --add-opens=java.base/java.lang=ALL-UNNAMED\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Command line argument: --add-opens=java.base/java.io=ALL-UNNAMED\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Command line argument: --add-opens=java.base/java.util=ALL-UNNAMED\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Command line argument: --add-opens=java.base/java.util.concurrent=ALL-UNNAMED\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Command line argument: --add-opens=java.rmi/sun.rmi.transport=ALL-UNNAMED\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Command line argument: -Dfile.encoding=UTF-8\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Command line argument: -XX:+ShowCodeDetailsInExceptionMessages\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.core.AprLifecycleListener lifecycleEvent\r\n    INFO: Loaded Apache Tomcat Native library [1.2.35] using APR version [1.7.0].\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.core.AprLifecycleListener lifecycleEvent\r\n    INFO: APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random \r\n    [true], UDS [true].\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.core.AprLifecycleListener initializeSSL\r\n    INFO: OpenSSL successfully initialized [OpenSSL 1.1.1q  5 Jul 2022]\r\n    set 20, 2022 1:29:32 PM org.apache.coyote.AbstractProtocol init\r\n    INFO: Initializing ProtocolHandler [&quot;http-nio-8080&quot;]\r\n    set 20, 2022 1:29:32 PM org.apache.catalina.startup.Catalina load\r\n    INFO: Server initialization in [2187] milliseconds\r\n    set 20, 2022 1:29:33 PM org.apache.catalina.core.StandardService startInternal\r\n    INFO: Starting service [Catalina]\r\n    set 20, 2022 1:29:33 PM org.apache.catalina.core.StandardEngine startInternal\r\n    INFO: Starting Servlet engine: [Apache Tomcat/10.0.23]\r\n    set 20, 2022 1:29:34 PM org.apache.catalina.core.ContainerBase startInternal\r\n    SEVERE: A child container failed during start\r\n    java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: \r\n    Failed to start component [org.apache.catalina.webresources.StandardRoot@74bada02]\r\n\tat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\r\n\tat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926)\r\n\tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:886)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat \r\n    org.apache.tomcat.util.threads.InlineExecutorService.execute(\r\n    InlineExecutorService.java:75)\r\n\tat \r\n    java.base/java.util.concurrent.AbstractExecutorService.submit(\r\n    AbstractExecutorService.java:145)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n\tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:795)\r\n\tat \r\n    java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(\r\n    DirectMethodHandleAccessor.java:104)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:577)\r\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\r\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\r\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component \r\n    [org.apache.catalina.webresources.StandardRoot@74bada02]\r\n\tat \r\n    org.apache.catalina.util.LifecycleBase.handleSubClassException(\r\n    LifecycleBase.java:440)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\r\n\tat org.apache.catalina.core.StandardContext.resourcesStart(StandardContext.java:4834)\r\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4972)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat \r\n    org.apache.tomcat.util.threads.InlineExecutorService.execute(\r\n    InlineExecutorService.java:75)\r\n\tat java.base/java.util.concurrent.AbstractExecutorService.submit(\r\n    AbstractExecutorService.java:145)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n\t... 19 more\r\n    Caused by: java.lang.IllegalArgumentException: The main resource set specified \r\n    [C:\\Users\\segreteria\\Desktop\\WORKSPACE3\\.metadata\\.plugins\\\r\n    org.eclipse.wst.server.core\\tmp0\\wtpwebapps\\Parlamento] is not valid\r\n\tat \r\n    org.apache.catalina.webresources.StandardRoot.createMainResourceSet\r\n    (StandardRoot.java:762)\r\n\tat org.apache.catalina.webresources.StandardRoot.startInternal(StandardRoot.java:719)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t... 28 more\r\n\r\n    set 20, 2022 1:29:34 PM org.apache.catalina.core.ContainerBase startInternal\r\n    SEVERE: A child container failed during start\r\n    java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: A \r\n    child container failed during start\r\n\tat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\r\n\tat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926)\r\n\tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:795)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(\r\n    DirectMethodHandleAccessor.java:104)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:577)\r\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\r\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\r\n    Caused by: org.apache.catalina.LifecycleException: A child container failed during \r\n    start\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:938)\r\n\tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:886)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(\r\n    InlineExecutorService.java:75)\r\n\tat \r\n    java.base/java.util.concurrent.AbstractExecutorService.submit(\r\n    AbstractExecutorService.java:145)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n\t... 11 more\r\n    Caused by: java.util.concurrent.ExecutionException: \r\n    org.apache.catalina.LifecycleException: Failed to start component \r\n    [org.apache.catalina.webresources.StandardRoot@74bada02]\r\n\tat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\r\n\tat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926)\r\n\t... 19 more\r\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component \r\n    [org.apache.catalina.webresources.StandardRoot@74bada02]\r\n\tat \r\n    org.apache.catalina.util.LifecycleBase.handleSubClassException(\r\n    LifecycleBase.java:440)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\r\n\tat org.apache.catalina.core.StandardContext.resourcesStart(StandardContext.java:4834)\r\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4972)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(\r\n    InlineExecutorService.java:75)\r\n\tat java.base/java.util.concurrent.AbstractExecutorService.submit(\r\n    AbstractExecutorService.java:145)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n\t... 19 more\r\n    Caused by: java.lang.IllegalArgumentException: The main resource set specified \r\n    [C:\\Users\\segreteria\\Desktop\\WORKSPACE3\\.metadata\\.plugins\\\r\n    org.eclipse.wst.server.core\\tmp0\\wtpwebapps\\Parlamento] is not valid\r\n\tat \r\n    org.apache.catalina.webresources.StandardRoot.createMainResourceSet(\r\n    StandardRoot.java:762)\r\n\tat org.apache.catalina.webresources.StandardRoot.startInternal(StandardRoot.java:719)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t... 28 more\r\n\r\n    set 20, 2022 1:29:34 PM org.apache.catalina.startup.Catalina start\r\n    SEVERE: The required Server component failed to start so Tomcat is unable to start.\r\n    org.apache.catalina.LifecycleException: A child container failed during start\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:938)\r\n\tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:795)\r\n\tat \r\n    java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(\r\n    DirectMethodHandleAccessor.java:104)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:577)\r\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\r\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\r\n    Caused by: java.util.concurrent.ExecutionException:  \r\n    org.apache.catalina.LifecycleException: A child container failed during start\r\n\tat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\r\n\tat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926)\r\n\t... 11 more\r\n    Caused by: org.apache.catalina.LifecycleException: A child container failed during \r\n    start\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:938)\r\n\tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:886)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(\r\n    InlineExecutorService.java:75)\r\n\tat \r\n    java.base/java.util.concurrent.AbstractExecutorService.submit(\r\n    AbstractExecutorService.java:145)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n\t... 11 more\r\n    Caused by: java.util.concurrent.ExecutionException: \r\n    org.apache.catalina.LifecycleException: Failed to start component \r\n    [org.apache.catalina.webresources.StandardRoot@74bada02]\r\n\tat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\r\n\tat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926)\r\n\t... 19 more\r\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component \r\n    [org.apache.catalina.webresources.StandardRoot@74bada02]\r\n\tat \r\n    org.apache.catalina.util.LifecycleBase.handleSubClassException\r\n    (LifecycleBase.java:440)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\r\n\tat org.apache.catalina.core.StandardContext.resourcesStart(StandardContext.java:4834)\r\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4972)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(\r\n    InlineExecutorService.java:75)\r\n\tat java.base/java.util.concurrent.AbstractExecutorService.submit(\r\n    AbstractExecutorService.java:145)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n\t... 19 more\r\n    Caused by: java.lang.IllegalArgumentException: The main resource set specified \r\n    [C:\\Users\\segreteria\\Desktop\\WORKSPACE3\\.metadata\\.plugins\\\r\n    org.eclipse.wst.server.core\\tmp0\\wtpwebapps\\Parlamento] is not valid\r\n\tat org.apache.catalina.webresources.StandardRoot.createMainResourceSet(\r\n    StandardRoot.java:762)\r\n\tat org.apache.catalina.webresources.StandardRoot.startInternal(StandardRoot.java:719)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t... 28 more\r\n\r\n    set 20, 2022 1:29:34 PM org.apache.coyote.AbstractProtocol pause\r\n    INFO: Pausing ProtocolHandler [&quot;http-nio-8080&quot;]\r\n    set 20, 2022 1:29:34 PM org.apache.catalina.core.StandardService stopInternal\r\n    INFO: Stopping service [Catalina]\r\n    set 20, 2022 1:29:34 PM org.apache.coyote.AbstractProtocol destroy\r\n    INFO: Destroying ProtocolHandler [&quot;http-nio-8080&quot;]\r\n\r\nweb.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;web-app xmlns=&quot;https://jakarta.ee/xml/ns/jakartaee&quot;\r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    xsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/jakartaee\r\n                      https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd&quot;\r\n    version=&quot;5.0&quot;&gt;\r\n    &lt;!--  \r\n    &lt;display-name&gt;Parlamento2&lt;/display-name&gt; --&gt;\r\n  \r\n\r\n\r\n    &lt;display-name&gt;Parlamento&lt;/display-name&gt;\r\n    &lt;!--\r\n    &lt;welcome-file-list&gt;\r\n    \r\n    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\r\n    &lt;/welcome-file-list&gt;\r\n    --&gt;\r\n    &lt;!-- \r\n    &lt;welcome-file-list&gt;\r\n                &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\r\n               &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \r\n    class&gt;   \r\n        &lt;/welcome-file-list&gt;\r\n         --&gt;\r\n           \r\n         &lt;servlet&gt; \r\n     &lt;servlet-name&gt;index&lt;/servlet-name&gt; \r\n     &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet-class&gt; \r\n     &lt;/servlet&gt;\r\n        \r\n        &lt;servlet-mapping&gt;\r\n             &lt;servlet-name&gt;index&lt;/servlet-name&gt;\r\n             &lt;url-pattern&gt;/&lt;/url-pattern&gt;\r\n        &lt;/servlet-mapping&gt;\r\n        \r\n       \r\n        \r\n        \r\n          \r\n         \r\n         &lt;servlet&gt;\r\n                &lt;servlet-name&gt;parlamentari&lt;/servlet-name&gt;\r\n                &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \r\n     class&gt; \r\n        &lt;/servlet&gt;\r\n        \r\n         &lt;servlet-mapping&gt;\r\n         &lt;servlet-name&gt;parlamentari&lt;/servlet-name&gt;\r\n         &lt;url-pattern&gt;/parlamentari&lt;/url-pattern&gt;\r\n         &lt;/servlet-mapping&gt;\r\n        \r\n        &lt;!-- \r\n        \r\n        \r\n         &lt;servlet&gt;\r\n                &lt;servlet-name&gt;lista_periodi_cariche.jsp&lt;/servlet-name&gt;\r\n                &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \r\n     class&gt;\r\n        &lt;/servlet&gt;\r\n        \r\n        &lt;servlet-mapping&gt;\r\n             &lt;servlet-name&gt;lista_periodi_cariche.jsp&lt;/servlet-name&gt;\r\n             &lt;url-pattern&gt;/lista_periodi_cariche&lt;/url-pattern&gt;\r\n        &lt;/servlet-mapping&gt;\r\n        \r\n        \r\n        \r\n        \r\n        &lt;servlet&gt;\r\n                &lt;servlet-name&gt;showParlamentare.jsp&lt;/servlet-name&gt;\r\n                &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \r\n     class&gt;\r\n        &lt;/servlet&gt;\r\n        \r\n        &lt;servlet-mapping&gt;\r\n             &lt;servlet-name&gt;showParlamentare.jsp&lt;/servlet-name&gt;\r\n             &lt;url-pattern&gt;/showParlamentare&lt;/url-pattern&gt;\r\n        &lt;/servlet-mapping&gt;\r\n        \r\n        \r\n        \r\n        \r\n        &lt;servlet&gt;\r\n                &lt;servlet-name&gt;parlamentareDeleted.jsp&lt;/servlet-name&gt;\r\n                &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \r\n     class&gt;\r\n        &lt;/servlet&gt;\r\n        &lt;servlet-mapping&gt;\r\n             &lt;servlet-name&gt;parlamentareDeleted.jsp&lt;/servlet-name&gt;\r\n             &lt;url-pattern&gt;/parlamentareDeleted&lt;/url-pattern&gt;\r\n        &lt;/servlet-mapping&gt;\r\n        \r\n        \r\n        \r\n        \r\n        &lt;servlet&gt;\r\n                &lt;servlet-name&gt;lista_parlamentari.jsp&lt;/servlet-name&gt;\r\n                &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \r\n     class&gt;\r\n        &lt;/servlet&gt;\r\n        \r\n        &lt;servlet-mapping&gt;\r\n             &lt;servlet-name&gt;lista_parlamentari.jsp&lt;/servlet-name&gt;\r\n             &lt;url-pattern&gt;/lista_parlamentari&lt;/url-pattern&gt;\r\n        &lt;/servlet-mapping&gt;\r\n        \r\n        \r\n        \r\n        &lt;servlet&gt;\r\n                &lt;servlet-name&gt;showParlamentare2.jsp&lt;/servlet-name&gt;\r\n                &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \r\n     class&gt;\r\n        &lt;/servlet&gt;\r\n        \r\n        &lt;servlet-mapping&gt;\r\n             &lt;servlet-name&gt;showParlamentare2.jsp&lt;/servlet-name&gt;\r\n             &lt;url-pattern&gt;/updateParlamentare&lt;/url-pattern&gt;\r\n        &lt;/servlet-mapping&gt;\r\n        \r\n        &lt;servlet&gt;\r\n                &lt;servlet-name&gt;showParlamentare3.jsp&lt;/servlet-name&gt;\r\n                &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \r\n      class&gt;\r\n        &lt;/servlet&gt;\r\n        \r\n        &lt;servlet-mapping&gt;\r\n             &lt;servlet-name&gt;showParlamentare3.jsp&lt;/servlet-name&gt;\r\n             &lt;url-pattern&gt;/getParlamentare&lt;/url-pattern&gt;\r\n        &lt;/servlet-mapping&gt;\r\n         --&gt;\r\n        \r\n     &lt;!--  \r\n        &lt;context-param&gt;\r\n                &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n                &lt;param-value&gt;/WEB-INF/applicationContext.xml&lt;/param-value&gt;\r\n        &lt;/context-param&gt;\r\n        --&gt;\r\n        &lt;/web-app&gt;\r\n\r\npom.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; \r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 \r\n    https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.5.4&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.giuggiola&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;Parlamento&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;bootjpa&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;18&lt;/java.version&gt;\r\n\t\t\r\n\t\t\r\n    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n\r\n\t&lt;/properties&gt;\r\n\t\r\n\t&lt;dependencies&gt;\r\n\t\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\r\n    &lt;version&gt;6.0.0&lt;/version&gt;\r\n    &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\t&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    &lt;version&gt;2.7.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\t\t\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;\r\n    &lt;version&gt;5.3.22&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\t\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;com.zaxxer&lt;/groupId&gt;\r\n    &lt;artifactId&gt;HikariCP&lt;/artifactId&gt;\r\n    &lt;!--    &lt;version&gt;\r\n      5.0.1\r\n    &lt;/version&gt; --&gt;\r\n    &lt;/dependency&gt;\r\n\t\r\n\t\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-data-elasticsearch&lt;/artifactId&gt;\r\n    &lt;!--    &lt;scope&gt;runtime&lt;/scope&gt; --&gt;\r\n         &lt;version&gt;2.6.3&lt;/version&gt; &lt;!--$NO-MVN-MAN-VER$--&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\t&lt;dependency&gt;\r\n    &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n    &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n    &lt;version&gt;19.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\t\r\n\t\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n         &lt;version&gt;2.6.2&lt;/version&gt; &lt;!--$NO-MVN-MAN-VER$--&gt;\r\n   \r\n    &lt;/dependency&gt;\r\n\t\r\n\t  \r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n    &lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\r\n    &lt;artifactId&gt;hibernate-types-55&lt;/artifactId&gt;\r\n    &lt;version&gt;2.14.0&lt;/version&gt;\r\n    &lt;/dependency&gt; \r\n\t\t\r\n\t\t\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n    &lt;artifactId&gt;tomcat-jasper&lt;/artifactId&gt;\r\n    &lt;version&gt;10.0.23&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n\t&lt;version&gt;4.3.9.Final&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n    &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\r\n    &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\t\t\r\n\t\t\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n      &lt;version&gt;1.18.22&lt;/version&gt; &lt;!--$NO-MVN-MAN-VER$--&gt;\r\n    &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n \r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    &lt;artifactId&gt;lombok-maven&lt;/artifactId&gt;\r\n    &lt;version&gt;1.18.20.0&lt;/version&gt;\r\n    &lt;type&gt;pom&lt;/type&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    &lt;!--  &lt;version&gt;2.6.4&lt;/version&gt;  --&gt;\r\n    &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    &lt;version&gt;2.6.4&lt;/version&gt;\r\n    &lt;type&gt;pom&lt;/type&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\r\n    &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\r\n    &lt;version&gt;2.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n    &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n    &lt;version&gt;5.9.0&lt;/version&gt;\r\n    &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\r\n    &lt;artifactId&gt;common-tomcat-maven-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;2.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n    &lt;artifactId&gt;tomcat-embed-core&lt;/artifactId&gt;\r\n    &lt;version&gt;10.0.23&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n\t&lt;/dependencies&gt;\t\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t\r\n\t\t&lt;/plugins&gt;\r\n\t\t\r\n    &lt;resources&gt;\r\n        &lt;resource&gt;\r\n            &lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n            &lt;filtering&gt;true&lt;/filtering&gt;\r\n        &lt;/resource&gt;\r\n    &lt;/resources&gt;\r\n   \r\n\r\n\t&lt;/build&gt;\r\n\r\n   &lt;/project&gt;\r\n\r\nI was trying to start it with the server, but now that I have decided to keep the embedded version, I start it as a java application.\r\n","title":"Caused by: java.lang.IllegalArgumentException: The main resource set specified [C:\\Users\\segreteria\\Desktop...] is not valid","body":"<p>I have a dynamic web project imported from Spring into Eclipse. I updated the server, it was embedded before, I updated the dependencies in the pom regarding the server, I read the other solutions regarding the various entries in the stacktrace, but nothing worked, I deleted .m2, the web.xml file I edited several times, some tutorials suggest creating a separate class for each jsp page, but this would no longer work for me a page that contains multiple forms and therefore refers to multiple methods in the class. However, I commented on the other servlets in the web.xml file because in the meantime I want you to load at least the first one that contains the references to all the others. I have been stuck on this error for several days. Can someone help me? thanks to who helps me.</p>\n<p>The jar files contained in the Maven, do I have to copy them all in the WEB-INF \\ lib folder?</p>\n<p>do I need to add the pom.xml file here in the question?</p>\n<p>STACKTRACE:</p>\n<pre><code>set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Server version name:   Apache Tomcat/10.0.23\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Server built:          Jul 14 2022 08:16:11 UTC\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Server version number: 10.0.23.0\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: OS Name:               Windows 8\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: OS Version:            6.2\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Architecture:          amd64\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Java Home:             C:\\Program Files\\Java\\jdk-18.0.2.1\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: JVM Version:           18.0.2.1+1-1\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: JVM Vendor:            Oracle Corporation\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: CATALINA_BASE:         \nC:\\Users\\segreteria\\Desktop\\WORKSPACE3\\.metadata\\.plugins\\org.eclipse.wst.\nserver.core\\tmp0\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: CATALINA_HOME:         C:\\Program Files\\Apache2\\apache-tomcat-10.0.23-windows- \nx64\\apache-tomcat-10.0.23\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Command line argument: - \nDcatalina.base=C:\\Users\\segreteria\\Desktop\\WORKSPACE3\\.metadata\\.plugins\n\\org.eclipse.wst.server.core\\tmp0\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Command line argument: -Dcatalina.home=C:\\Program Files\\Apache2\\apache-tomcat- \n10.0.23-windows-x64\\apache-tomcat-10.0.23\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Command line argument: - \nDwtp.deploy=C:\\Users\\segreteria\\Desktop\\WORKSPACE3\\.metadata\\.plugins\n\\org.eclipse.wst.server.core\\tmp0\\wtpwebapps\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Command line argument: --add-opens=java.base/java.lang=ALL-UNNAMED\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Command line argument: --add-opens=java.base/java.io=ALL-UNNAMED\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Command line argument: --add-opens=java.base/java.util=ALL-UNNAMED\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Command line argument: --add-opens=java.base/java.util.concurrent=ALL-UNNAMED\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Command line argument: --add-opens=java.rmi/sun.rmi.transport=ALL-UNNAMED\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Command line argument: -Dfile.encoding=UTF-8\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Command line argument: -XX:+ShowCodeDetailsInExceptionMessages\nset 20, 2022 1:29:31 PM org.apache.catalina.core.AprLifecycleListener lifecycleEvent\nINFO: Loaded Apache Tomcat Native library [1.2.35] using APR version [1.7.0].\nset 20, 2022 1:29:31 PM org.apache.catalina.core.AprLifecycleListener lifecycleEvent\nINFO: APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random \n[true], UDS [true].\nset 20, 2022 1:29:31 PM org.apache.catalina.core.AprLifecycleListener initializeSSL\nINFO: OpenSSL successfully initialized [OpenSSL 1.1.1q  5 Jul 2022]\nset 20, 2022 1:29:32 PM org.apache.coyote.AbstractProtocol init\nINFO: Initializing ProtocolHandler [&quot;http-nio-8080&quot;]\nset 20, 2022 1:29:32 PM org.apache.catalina.startup.Catalina load\nINFO: Server initialization in [2187] milliseconds\nset 20, 2022 1:29:33 PM org.apache.catalina.core.StandardService startInternal\nINFO: Starting service [Catalina]\nset 20, 2022 1:29:33 PM org.apache.catalina.core.StandardEngine startInternal\nINFO: Starting Servlet engine: [Apache Tomcat/10.0.23]\nset 20, 2022 1:29:34 PM org.apache.catalina.core.ContainerBase startInternal\nSEVERE: A child container failed during start\njava.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: \nFailed to start component [org.apache.catalina.webresources.StandardRoot@74bada02]\nat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\nat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926)\nat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:886)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\nat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\nat \norg.apache.tomcat.util.threads.InlineExecutorService.execute(\nInlineExecutorService.java:75)\nat \njava.base/java.util.concurrent.AbstractExecutorService.submit(\nAbstractExecutorService.java:145)\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\nat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.startup.Catalina.start(Catalina.java:795)\nat \njava.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(\nDirectMethodHandleAccessor.java:104)\nat java.base/java.lang.reflect.Method.invoke(Method.java:577)\nat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\nat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\nCaused by: org.apache.catalina.LifecycleException: Failed to start component \n[org.apache.catalina.webresources.StandardRoot@74bada02]\nat \norg.apache.catalina.util.LifecycleBase.handleSubClassException(\nLifecycleBase.java:440)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\nat org.apache.catalina.core.StandardContext.resourcesStart(StandardContext.java:4834)\nat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4972)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\nat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\nat \norg.apache.tomcat.util.threads.InlineExecutorService.execute(\nInlineExecutorService.java:75)\nat java.base/java.util.concurrent.AbstractExecutorService.submit(\nAbstractExecutorService.java:145)\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n... 19 more\nCaused by: java.lang.IllegalArgumentException: The main resource set specified \n[C:\\Users\\segreteria\\Desktop\\WORKSPACE3\\.metadata\\.plugins\\\norg.eclipse.wst.server.core\\tmp0\\wtpwebapps\\Parlamento] is not valid\nat \norg.apache.catalina.webresources.StandardRoot.createMainResourceSet\n(StandardRoot.java:762)\nat org.apache.catalina.webresources.StandardRoot.startInternal(StandardRoot.java:719)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n... 28 more\n\nset 20, 2022 1:29:34 PM org.apache.catalina.core.ContainerBase startInternal\nSEVERE: A child container failed during start\njava.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: A \nchild container failed during start\nat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\nat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926)\nat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.startup.Catalina.start(Catalina.java:795)\nat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(\nDirectMethodHandleAccessor.java:104)\nat java.base/java.lang.reflect.Method.invoke(Method.java:577)\nat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\nat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\nCaused by: org.apache.catalina.LifecycleException: A child container failed during \nstart\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:938)\nat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:886)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\nat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\nat org.apache.tomcat.util.threads.InlineExecutorService.execute(\nInlineExecutorService.java:75)\nat \njava.base/java.util.concurrent.AbstractExecutorService.submit(\nAbstractExecutorService.java:145)\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n... 11 more\nCaused by: java.util.concurrent.ExecutionException: \norg.apache.catalina.LifecycleException: Failed to start component \n[org.apache.catalina.webresources.StandardRoot@74bada02]\nat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\nat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926)\n... 19 more\nCaused by: org.apache.catalina.LifecycleException: Failed to start component \n[org.apache.catalina.webresources.StandardRoot@74bada02]\nat \norg.apache.catalina.util.LifecycleBase.handleSubClassException(\nLifecycleBase.java:440)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\nat org.apache.catalina.core.StandardContext.resourcesStart(StandardContext.java:4834)\nat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4972)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\nat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\nat org.apache.tomcat.util.threads.InlineExecutorService.execute(\nInlineExecutorService.java:75)\nat java.base/java.util.concurrent.AbstractExecutorService.submit(\nAbstractExecutorService.java:145)\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n... 19 more\nCaused by: java.lang.IllegalArgumentException: The main resource set specified \n[C:\\Users\\segreteria\\Desktop\\WORKSPACE3\\.metadata\\.plugins\\\norg.eclipse.wst.server.core\\tmp0\\wtpwebapps\\Parlamento] is not valid\nat \norg.apache.catalina.webresources.StandardRoot.createMainResourceSet(\nStandardRoot.java:762)\nat org.apache.catalina.webresources.StandardRoot.startInternal(StandardRoot.java:719)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n... 28 more\n\nset 20, 2022 1:29:34 PM org.apache.catalina.startup.Catalina start\nSEVERE: The required Server component failed to start so Tomcat is unable to start.\norg.apache.catalina.LifecycleException: A child container failed during start\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:938)\nat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.startup.Catalina.start(Catalina.java:795)\nat \njava.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(\nDirectMethodHandleAccessor.java:104)\nat java.base/java.lang.reflect.Method.invoke(Method.java:577)\nat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\nat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\nCaused by: java.util.concurrent.ExecutionException:  \norg.apache.catalina.LifecycleException: A child container failed during start\nat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\nat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926)\n... 11 more\nCaused by: org.apache.catalina.LifecycleException: A child container failed during \nstart\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:938)\nat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:886)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\nat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\nat org.apache.tomcat.util.threads.InlineExecutorService.execute(\nInlineExecutorService.java:75)\nat \njava.base/java.util.concurrent.AbstractExecutorService.submit(\nAbstractExecutorService.java:145)\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n... 11 more\nCaused by: java.util.concurrent.ExecutionException: \norg.apache.catalina.LifecycleException: Failed to start component \n[org.apache.catalina.webresources.StandardRoot@74bada02]\nat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\nat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926)\n... 19 more\nCaused by: org.apache.catalina.LifecycleException: Failed to start component \n[org.apache.catalina.webresources.StandardRoot@74bada02]\nat \norg.apache.catalina.util.LifecycleBase.handleSubClassException\n(LifecycleBase.java:440)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\nat org.apache.catalina.core.StandardContext.resourcesStart(StandardContext.java:4834)\nat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4972)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\nat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\nat org.apache.tomcat.util.threads.InlineExecutorService.execute(\nInlineExecutorService.java:75)\nat java.base/java.util.concurrent.AbstractExecutorService.submit(\nAbstractExecutorService.java:145)\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n... 19 more\nCaused by: java.lang.IllegalArgumentException: The main resource set specified \n[C:\\Users\\segreteria\\Desktop\\WORKSPACE3\\.metadata\\.plugins\\\norg.eclipse.wst.server.core\\tmp0\\wtpwebapps\\Parlamento] is not valid\nat org.apache.catalina.webresources.StandardRoot.createMainResourceSet(\nStandardRoot.java:762)\nat org.apache.catalina.webresources.StandardRoot.startInternal(StandardRoot.java:719)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n... 28 more\n\nset 20, 2022 1:29:34 PM org.apache.coyote.AbstractProtocol pause\nINFO: Pausing ProtocolHandler [&quot;http-nio-8080&quot;]\nset 20, 2022 1:29:34 PM org.apache.catalina.core.StandardService stopInternal\nINFO: Stopping service [Catalina]\nset 20, 2022 1:29:34 PM org.apache.coyote.AbstractProtocol destroy\nINFO: Destroying ProtocolHandler [&quot;http-nio-8080&quot;]\n</code></pre>\n<p>web.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;web-app xmlns=&quot;https://jakarta.ee/xml/ns/jakartaee&quot;\nxmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\nxsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/jakartaee\n                  https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd&quot;\nversion=&quot;5.0&quot;&gt;\n&lt;!--  \n&lt;display-name&gt;Parlamento2&lt;/display-name&gt; --&gt;\n\n\n\n&lt;display-name&gt;Parlamento&lt;/display-name&gt;\n&lt;!--\n&lt;welcome-file-list&gt;\n\n&lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\n&lt;/welcome-file-list&gt;\n--&gt;\n&lt;!-- \n&lt;welcome-file-list&gt;\n            &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\n           &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \nclass&gt;   \n    &lt;/welcome-file-list&gt;\n     --&gt;\n       \n     &lt;servlet&gt; \n &lt;servlet-name&gt;index&lt;/servlet-name&gt; \n &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet-class&gt; \n &lt;/servlet&gt;\n    \n    &lt;servlet-mapping&gt;\n         &lt;servlet-name&gt;index&lt;/servlet-name&gt;\n         &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    \n   \n    \n    \n      \n     \n     &lt;servlet&gt;\n            &lt;servlet-name&gt;parlamentari&lt;/servlet-name&gt;\n            &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \n class&gt; \n    &lt;/servlet&gt;\n    \n     &lt;servlet-mapping&gt;\n     &lt;servlet-name&gt;parlamentari&lt;/servlet-name&gt;\n     &lt;url-pattern&gt;/parlamentari&lt;/url-pattern&gt;\n     &lt;/servlet-mapping&gt;\n    \n    &lt;!-- \n    \n    \n     &lt;servlet&gt;\n            &lt;servlet-name&gt;lista_periodi_cariche.jsp&lt;/servlet-name&gt;\n            &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \n class&gt;\n    &lt;/servlet&gt;\n    \n    &lt;servlet-mapping&gt;\n         &lt;servlet-name&gt;lista_periodi_cariche.jsp&lt;/servlet-name&gt;\n         &lt;url-pattern&gt;/lista_periodi_cariche&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    \n    \n    \n    \n    &lt;servlet&gt;\n            &lt;servlet-name&gt;showParlamentare.jsp&lt;/servlet-name&gt;\n            &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \n class&gt;\n    &lt;/servlet&gt;\n    \n    &lt;servlet-mapping&gt;\n         &lt;servlet-name&gt;showParlamentare.jsp&lt;/servlet-name&gt;\n         &lt;url-pattern&gt;/showParlamentare&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    \n    \n    \n    \n    &lt;servlet&gt;\n            &lt;servlet-name&gt;parlamentareDeleted.jsp&lt;/servlet-name&gt;\n            &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \n class&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n         &lt;servlet-name&gt;parlamentareDeleted.jsp&lt;/servlet-name&gt;\n         &lt;url-pattern&gt;/parlamentareDeleted&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    \n    \n    \n    \n    &lt;servlet&gt;\n            &lt;servlet-name&gt;lista_parlamentari.jsp&lt;/servlet-name&gt;\n            &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \n class&gt;\n    &lt;/servlet&gt;\n    \n    &lt;servlet-mapping&gt;\n         &lt;servlet-name&gt;lista_parlamentari.jsp&lt;/servlet-name&gt;\n         &lt;url-pattern&gt;/lista_parlamentari&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    \n    \n    \n    &lt;servlet&gt;\n            &lt;servlet-name&gt;showParlamentare2.jsp&lt;/servlet-name&gt;\n            &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \n class&gt;\n    &lt;/servlet&gt;\n    \n    &lt;servlet-mapping&gt;\n         &lt;servlet-name&gt;showParlamentare2.jsp&lt;/servlet-name&gt;\n         &lt;url-pattern&gt;/updateParlamentare&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    \n    &lt;servlet&gt;\n            &lt;servlet-name&gt;showParlamentare3.jsp&lt;/servlet-name&gt;\n            &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \n  class&gt;\n    &lt;/servlet&gt;\n    \n    &lt;servlet-mapping&gt;\n         &lt;servlet-name&gt;showParlamentare3.jsp&lt;/servlet-name&gt;\n         &lt;url-pattern&gt;/getParlamentare&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n     --&gt;\n    \n &lt;!--  \n    &lt;context-param&gt;\n            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n            &lt;param-value&gt;/WEB-INF/applicationContext.xml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n    --&gt;\n    &lt;/web-app&gt;\n</code></pre>\n<p>pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; \nxmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\nxsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 \nhttps://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.5.4&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n&lt;groupId&gt;com.giuggiola&lt;/groupId&gt;\n&lt;artifactId&gt;Parlamento&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;name&gt;bootjpa&lt;/name&gt;\n&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n&lt;properties&gt;\n    &lt;java.version&gt;18&lt;/java.version&gt;\n    \n    \n&lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n\n&lt;dependency&gt;\n&lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\n&lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\n&lt;version&gt;6.0.0&lt;/version&gt;\n&lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n&lt;version&gt;2.7.3&lt;/version&gt;\n&lt;/dependency&gt;\n\n    \n&lt;dependency&gt;\n&lt;groupId&gt;org.springframework&lt;/groupId&gt;\n&lt;artifactId&gt;spring-expression&lt;/artifactId&gt;\n&lt;version&gt;5.3.22&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n&lt;groupId&gt;com.zaxxer&lt;/groupId&gt;\n&lt;artifactId&gt;HikariCP&lt;/artifactId&gt;\n&lt;!--    &lt;version&gt;\n  5.0.1\n&lt;/version&gt; --&gt;\n&lt;/dependency&gt;\n\n\n&lt;dependency&gt;\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;artifactId&gt;spring-boot-starter-data-elasticsearch&lt;/artifactId&gt;\n&lt;!--    &lt;scope&gt;runtime&lt;/scope&gt; --&gt;\n     &lt;version&gt;2.6.3&lt;/version&gt; &lt;!--$NO-MVN-MAN-VER$--&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n&lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n&lt;artifactId&gt;guava&lt;/artifactId&gt;\n&lt;version&gt;19.0&lt;/version&gt;\n&lt;/dependency&gt;\n\n\n\n\n&lt;dependency&gt;\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n     &lt;version&gt;2.6.2&lt;/version&gt; &lt;!--$NO-MVN-MAN-VER$--&gt;\n\n&lt;/dependency&gt;\n\n  \n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    \n    &lt;dependency&gt;\n&lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\n&lt;artifactId&gt;hibernate-types-55&lt;/artifactId&gt;\n&lt;version&gt;2.14.0&lt;/version&gt;\n&lt;/dependency&gt; \n    \n    \n&lt;dependency&gt;\n&lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n&lt;artifactId&gt;tomcat-jasper&lt;/artifactId&gt;\n&lt;version&gt;10.0.23&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n&lt;version&gt;4.3.9.Final&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n&lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n&lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\n&lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n&lt;artifactId&gt;jstl&lt;/artifactId&gt;\n&lt;/dependency&gt;\n    \n    \n&lt;dependency&gt;\n&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n&lt;artifactId&gt;lombok&lt;/artifactId&gt;\n  &lt;version&gt;1.18.22&lt;/version&gt; &lt;!--$NO-MVN-MAN-VER$--&gt;\n&lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n&lt;artifactId&gt;lombok-maven&lt;/artifactId&gt;\n&lt;version&gt;1.18.20.0&lt;/version&gt;\n&lt;type&gt;pom&lt;/type&gt;\n&lt;/dependency&gt;\n\n\n&lt;dependency&gt;\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n&lt;!--  &lt;version&gt;2.6.4&lt;/version&gt;  --&gt;\n&lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n&lt;version&gt;2.6.4&lt;/version&gt;\n&lt;type&gt;pom&lt;/type&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n&lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n&lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\n&lt;version&gt;2.2&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n&lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n&lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n&lt;version&gt;5.9.0&lt;/version&gt;\n&lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n\n\n&lt;dependency&gt;\n&lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\n&lt;artifactId&gt;common-tomcat-maven-plugin&lt;/artifactId&gt;\n&lt;version&gt;2.2&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n&lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n&lt;artifactId&gt;tomcat-embed-core&lt;/artifactId&gt;\n&lt;version&gt;10.0.23&lt;/version&gt;\n&lt;/dependency&gt;\n\n\n&lt;/dependencies&gt; \n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n        \n    &lt;/plugins&gt;\n    \n&lt;resources&gt;\n    &lt;resource&gt;\n        &lt;directory&gt;src/main/resources&lt;/directory&gt;\n        &lt;filtering&gt;true&lt;/filtering&gt;\n    &lt;/resource&gt;\n&lt;/resources&gt;\n\n\n&lt;/build&gt;\n</code></pre>\n   \n<p>I was trying to start it with the server, but now that I have decided to keep the embedded version, I start it as a java application.</p>\n"},{"tags":["java","hadoop","hdfs"],"answers":[{"comments":[{"owner":{"account_id":22147028,"reputation":13,"user_id":16396104,"display_name":"Ariel"},"score":0,"creation_date":1665793660,"post_id":74056376,"comment_id":130788595,"body_markdown":"Hi! Thanks for answering, but I wanted to ask, how do I find the source code? My lecturer had skimmed over some of this information and I&#39;m still too puzzled to follow, if it&#39;s alright for me to ask.","body":"Hi! Thanks for answering, but I wanted to ask, how do I find the source code? My lecturer had skimmed over some of this information and I&#39;m still too puzzled to follow, if it&#39;s alright for me to ask."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1665849887,"post_id":74056376,"comment_id":130797351,"body_markdown":"Source code is on Github, but you could also look at the Javadoc, such as the append method https://hadoop.apache.org/docs/current/api/org/apache/hadoop/fs/FileSystem.html#append-org.apache.hadoop.fs.Path-","body":"Source code is on Github, but you could also look at the Javadoc, such as the append method <a href=\"https://hadoop.apache.org/docs/current/api/org/apache/hadoop/fs/FileSystem.html#append-org.apache.hadoop.fs.Path-\" rel=\"nofollow noreferrer\">hadoop.apache.org/docs/current/api/org/apache/hadoop/fs/&hellip;</a>"}],"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665666752,"creation_date":1665666752,"answer_id":74056376,"question_id":74052437,"body_markdown":"`Filesystem.get(config_1)` will return a Filesystem object. From that, you need to specify String locations in the Path constructor, and create two of them. For example, you&#39;re already getting `args[0]`, so get another one for `args[1]`. \r\n\r\nYour files need to exist on HDFS already, such as by `hadoop fs -put` commands. \r\n\r\nAlternatively, just use `hadoop fs -getmerge` command, which is written in Java itself, and you could look at the source code, if you wanted\r\n\r\n","title":"Merging two files by making a HDFS application that merges them into one file located in HDFS","body":"<p><code>Filesystem.get(config_1)</code> will return a Filesystem object. From that, you need to specify String locations in the Path constructor, and create two of them. For example, you're already getting <code>args[0]</code>, so get another one for <code>args[1]</code>.</p>\n<p>Your files need to exist on HDFS already, such as by <code>hadoop fs -put</code> commands.</p>\n<p>Alternatively, just use <code>hadoop fs -getmerge</code> command, which is written in Java itself, and you could look at the source code, if you wanted</p>\n"}],"owner":{"account_id":22147028,"reputation":13,"user_id":16396104,"display_name":"Ariel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74056376,"answer_count":1,"score":0,"last_activity_date":1665666803,"creation_date":1665648626,"question_id":74052437,"body_markdown":"how the two different files may be indicated in the application, and then how to merge them \r\n\r\n```\r\nimport java.net.URI;\r\n\r\nimport org.apache.hadoop.conf.Configuration;\r\nimport org.apache.hadoop.fs.FileSystem;\r\nimport org.apache.hadoop.fs.Path;\r\nimport org.apache.hadoop.fs.FSDataInputStream;\r\nimport org.apache.hadoop.fs.FSDataOutputStream;\r\nimport org.apache.hadoop.io.IOUtils;\r\n\r\npublic class Task1\r\n{\r\n\tpublic static void main(String[] args) throws Exception\r\n\t{\r\n\t\tString file_1 = args[0];\r\n        Configuration config_1 = new Configuration();\r\n        FileSystem into_fs = ???\r\n        Path into_path = new Path(file_1)\r\n```\r\n\r\nWhere is the file made, or how do I continue from here?","title":"Merging two files by making a HDFS application that merges them into one file located in HDFS","body":"<p>how the two different files may be indicated in the application, and then how to merge them</p>\n<pre><code>import java.net.URI;\n\nimport org.apache.hadoop.conf.Configuration;\nimport org.apache.hadoop.fs.FileSystem;\nimport org.apache.hadoop.fs.Path;\nimport org.apache.hadoop.fs.FSDataInputStream;\nimport org.apache.hadoop.fs.FSDataOutputStream;\nimport org.apache.hadoop.io.IOUtils;\n\npublic class Task1\n{\n    public static void main(String[] args) throws Exception\n    {\n        String file_1 = args[0];\n        Configuration config_1 = new Configuration();\n        FileSystem into_fs = ???\n        Path into_path = new Path(file_1)\n</code></pre>\n<p>Where is the file made, or how do I continue from here?</p>\n"},{"tags":["java","hadoop","mapreduce","bigdata"],"answers":[{"comments":[{"owner":{"account_id":3864704,"reputation":353,"user_id":3201506,"accept_rate":100,"display_name":"Araf"},"score":0,"creation_date":1656696200,"post_id":67092250,"comment_id":128643250,"body_markdown":"Beware that since you&#39;re using a `TreeMap` you can only store words with a unique wordcount. If another word with the same wordcount appears, the prev word will get overwritten. To tackle this I&#39;ve written a custom `TreeMap&lt;K, List&lt;V&gt;&gt;` class. See https://gist.github.com/arafsheikh/21270b137c80524f1f3d29651099f748","body":"Beware that since you&#39;re using a <code>TreeMap</code> you can only store words with a unique wordcount. If another word with the same wordcount appears, the prev word will get overwritten. To tackle this I&#39;ve written a custom <code>TreeMap&lt;K, List&lt;V&gt;&gt;</code> class. See <a href=\"https://gist.github.com/arafsheikh/21270b137c80524f1f3d29651099f748\" rel=\"nofollow noreferrer\">gist.github.com/arafsheikh/21270b137c80524f1f3d29651099f748</a>"}],"tags":[],"owner":{"account_id":7418913,"reputation":1387,"user_id":5644037,"accept_rate":62,"display_name":"Coursal"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1618404991,"creation_date":1618404991,"answer_id":67092250,"question_id":67085393,"body_markdown":"You are indeed right, you do need two MapReduce jobs chained together. More specifically, you need:\r\n\r\n* one job to compute the wordcount for every word stored inside the input documents,\r\n\r\n* and one job to be able to &quot;sort&quot; all those words and wordcounts in order to pick and output the top `N` of them.\r\n\r\nThe first job is fairly similar to what you have come up with already, so I&#39;m going to focus on the second job, to make things a bit clearer about how TopN works in the MapReduce paradigm.\r\n\r\nThinking of the TopN MR job as a standalone thing, we know that this particular job will receive a bunch of key-value pairs where every word from the last step is going to be the key and its wordcount is going to be the value. Since mappers and reducers are isolated instances of the `map` and `reduce` functions running in parallel, we need to find a way to first find the TopN words locally (i.e. for every mapper), and then group all of those local TopN results to find the &quot;global&quot; TopN words for all the data given to the application by the input.\r\n\r\nSo, the `TopNMapper` will first have to create a `TreeMap` (a Java key-value data structure that internally sorts its elements by key) in the `setup` function (so before mapper instances will be created), which every mapper will initialize an object of it and put every word and its wordcount as elements. For this type of computation (TopN), we will put the wordcount as key and the word as value to have a ascending order sorted list of the words. Since we only need to find out the top `N` of the words here, it is safe to say that we only want the top `N` words for every mapper, so we can remove all of the other elements below and have a `TreeMap` of `N` elements, which will be given to the reducers in the end of the mappers&#39; execution (i.e. through the `cleanup` function). The mappers will write key-value pairs where the words are going to be keys and their wordcounts are going to be values, like that:\r\n\r\n`&lt;word, wordcount&gt;`\r\n\r\nNow for the `TopNReducer`, we need to do the same exact thing using a `TreeMap` data structure again to populate it with all of the local TopN elements, remove the elements that are not the top `N` of them, and write the words and their wordcounts as output. To be more &quot;clean&quot; with the approach, we can &quot;reverse&quot; words and wordcounts in the key-value pair structure so we can have the wordcounts as key and the words as value. This results into an (ascending order) sorted amount of key-value pairs that are going to be stored in disk after this job is done like this:\r\n\r\n`wordcount, word&gt;`\r\n\r\nThe program that can do such a thing in 2 MR jobs looks like the following (where we set `N` as a global `Configuration` value inside the `main` function with the `conf.set(&quot;N&quot;, &quot;10&quot;);` command, and access it in the `setup` functions of the `TopNMapper` and `TopNReducer` classes), with all of the classes being put in one class `TopNWordCount` for simplicity:\r\n\r\n    import org.apache.hadoop.conf.Configuration;\r\n    import org.apache.hadoop.fs.FileSystem;\r\n    import org.apache.hadoop.fs.Path;\r\n    import org.apache.hadoop.io.IntWritable;\r\n    import org.apache.hadoop.io.Text;\r\n    import org.apache.hadoop.mapreduce.Job;\r\n    import org.apache.hadoop.mapreduce.Mapper;\r\n    import org.apache.hadoop.mapreduce.Reducer;\r\n    import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;\r\n    import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;\r\n    import org.apache.hadoop.util.GenericOptionsParser;\r\n\r\n    import java.io.IOException;\r\n    import java.util.Map;\r\n    import java.util.TreeMap;\r\n\r\n\r\n    public class TopNWordCount\r\n    {\r\n        /* input:  &lt;document, contents&gt;\r\n         * output: &lt;word, 1&gt;\r\n         */\r\n        public static class WordCountMapper extends Mapper&lt;Object, Text, Text, IntWritable&gt;\r\n        {\r\n            private final static IntWritable one = new IntWritable(1);\r\n\r\n            public void map(Object key, Text value, Context context) throws IOException, InterruptedException\r\n            {\r\n                // clean up the document text and split the words into an array\r\n                String[] words = value.toString()\r\n                                    .replaceAll(&quot;\\\\d+&quot;, &quot;&quot;)           // get rid of numbers...\r\n                                    .replaceAll(&quot;[^a-zA-Z ]&quot;, &quot; &quot;)    // get rid of punctuation...\r\n                                    .toLowerCase()                                      // turn every letter to lowercase...\r\n                                    .trim()                                             // trim the spaces\r\n                                    .replaceAll(&quot;\\\\s+&quot;, &quot; &quot;)\r\n                                    .split(&quot; &quot;);\r\n\r\n                // write every word as key with `1` as value that indicates that the word is\r\n                // found at least 1 time inside the input text\r\n                for(String word : words)\r\n                    context.write(new Text(word), one);\r\n            }\r\n        }\r\n        \r\n        /* input: &lt;word, 1&gt;\r\n         * output: &lt;word, wordcount&gt;\r\n         */\r\n        public static class WordCountReducer extends Reducer&lt;Text, IntWritable, Text, IntWritable&gt;\r\n        {\r\n            private IntWritable wordcount = new IntWritable();\r\n\r\n            public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException\r\n            {\r\n                int word_cnt = 0;\r\n\r\n                for(IntWritable value : values)\r\n                    word_cnt += value.get();\r\n\r\n                wordcount.set(word_cnt);\r\n\r\n                context.write(key, wordcount);\r\n            }\r\n        }\r\n\r\n\r\n\r\n        /* input:  &lt;word, wordcount&gt;\r\n         * output: &lt;NULL, (word, wordcount)&gt; (with the local topN words)\r\n         */\r\n        public static class TopNMapper extends Mapper&lt;Object, Text, Text, IntWritable&gt;\r\n        {\r\n            private int n;  // the N of TopN\r\n            private TreeMap&lt;Integer, String&gt; word_list; // local list with words sorted by their frequency\r\n\r\n            public void setup(Context context)\r\n            {\r\n                n = Integer.parseInt(context.getConfiguration().get(&quot;N&quot;));  // get N\r\n                word_list = new TreeMap&lt;Integer, String&gt;();\r\n            }\r\n\r\n            public void map(Object key, Text value, Context context)\r\n            {\r\n                String[] line = value.toString().split(&quot;\\t&quot;);   // split the word and the wordcount\r\n\r\n                // put the wordcount as key and the word as value in the word list\r\n                // so the words can be sorted by their wordcounts\r\n                word_list.put(Integer.valueOf(line[1]), line[0]);\r\n\r\n                // if the local word list is populated with more than N elements\r\n                // remove the first (aka remove the word with the smallest wordcount)\r\n                if (word_list.size() &gt; n)\r\n                    word_list.remove(word_list.firstKey());\r\n            }\r\n\r\n            public void cleanup(Context context) throws IOException, InterruptedException\r\n            {\r\n                // write the topN local words before continuing to TopNReducer\r\n                // with each word as key and its wordcount as value\r\n                for (Map.Entry&lt;Integer, String&gt; entry : word_list.entrySet())\r\n                {\r\n                    context.write(new Text(entry.getValue()), new IntWritable(entry.getKey()));\r\n                }\r\n            }\r\n        }\r\n\r\n        /* input:  &lt;word, wordcount&gt; (with the local topN words)\r\n         * output: &lt;wordcount, word&gt; (with the global topN words)\r\n         */\r\n        public static class TopNReducer extends Reducer&lt;Text, IntWritable, IntWritable, Text&gt;\r\n        {\r\n            private int n;  // the N of TopN\r\n            private TreeMap&lt;Integer, String&gt; word_list; //  list with words globally sorted by their frequency\r\n\r\n            public void setup(Context context)\r\n            {\r\n                n = Integer.parseInt(context.getConfiguration().get(&quot;N&quot;));  // get N\r\n                word_list = new TreeMap&lt;Integer, String&gt;();\r\n            }\r\n\r\n            public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context)\r\n            {\r\n                int wordcount = 0;\r\n\r\n                // get the one and only value (aka the wordcount) for each word\r\n                for(IntWritable value : values)\r\n                    wordcount = value.get();\r\n\r\n                // put the wordcount as key and the word as value in the word list\r\n                // so the words can be sorted by their wordcounts\r\n                word_list.put(wordcount, key.toString());\r\n\r\n                // if the global word list is populated with more than N elements\r\n                // remove the first (aka remove the word with the smallest wordcount)\r\n                if (word_list.size() &gt; n)\r\n                    word_list.remove(word_list.firstKey());\r\n            }\r\n\r\n            public void cleanup(Context context) throws IOException, InterruptedException\r\n            {\r\n                // write the topN global words with each word as key and its wordcount as value\r\n                // so the output will be sorted by the wordcount\r\n                for (Map.Entry&lt;Integer, String&gt; entry : word_list.entrySet())\r\n                {\r\n                    context.write(new IntWritable(entry.getKey()), new Text(entry.getValue()));\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        public static void main(String[] args) throws Exception\r\n        {\r\n            Configuration conf = new Configuration();\r\n            String[] pathArgs = new GenericOptionsParser(conf, args).getRemainingArgs();\r\n\r\n            conf.set(&quot;N&quot;, &quot;10&quot;); // set the N as a &quot;public&quot; value in the current Configuration\r\n\r\n            if (pathArgs.length &lt; 2)\r\n            {\r\n              System.err.println(&quot;MR Project Usage: TopNWordCount &lt;input-path&gt; [...] &lt;output-path&gt;&quot;);\r\n              System.exit(2);\r\n            }\r\n\r\n            Path wordcount_dir = new Path(&quot;wordcount&quot;);\r\n            Path output_dir = new Path(pathArgs[pathArgs.length - 1]);\r\n\r\n            // if the in-between and output directories exists, delete them\r\n            FileSystem fs = FileSystem.get(conf);\r\n            if(fs.exists(wordcount_dir))\r\n                fs.delete(wordcount_dir, true);\r\n            if(fs.exists(output_dir))\r\n                fs.delete(output_dir, true);\r\n\r\n            Job wc_job = Job.getInstance(conf, &quot;WordCount&quot;);\r\n            wc_job.setJarByClass(TopNWordCount.class);\r\n            wc_job.setMapperClass(WordCountMapper.class);\r\n            wc_job.setReducerClass(WordCountReducer.class);\r\n            wc_job.setMapOutputKeyClass(Text.class);\r\n            wc_job.setMapOutputValueClass(IntWritable.class);\r\n            wc_job.setOutputKeyClass(Text.class);\r\n            wc_job.setOutputValueClass(IntWritable.class);\r\n            for (int i = 0; i &lt; pathArgs.length - 1; ++i)\r\n            {\r\n              FileInputFormat.addInputPath(wc_job, new Path(pathArgs[i]));\r\n            }\r\n            FileOutputFormat.setOutputPath(wc_job, wordcount_dir);\r\n            wc_job.waitForCompletion(true);\r\n            \r\n            Job topn_job = Job.getInstance(conf, &quot;TopN&quot;);\r\n            topn_job.setJarByClass(TopNWordCount.class);\r\n            topn_job.setMapperClass(TopNMapper.class);\r\n            topn_job.setReducerClass(TopNReducer.class);\r\n            topn_job.setMapOutputKeyClass(Text.class);\r\n            topn_job.setMapOutputValueClass(IntWritable.class);\r\n            topn_job.setOutputKeyClass(IntWritable.class);\r\n            topn_job.setOutputValueClass(Text.class);\r\n            FileInputFormat.addInputPath(topn_job, wordcount_dir);\r\n            FileOutputFormat.setOutputPath(topn_job, output_dir);\r\n            topn_job.waitForCompletion(true);\r\n        }\r\n    }\r\n\r\n\r\nThe output of this program (using [this](https://github.com/Coursal/Hadoop-Examples/tree/main/MaxTF/metamorphosis) directory with text files as input) is the following:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nNotice that the top 10 of the words here are [stopwords](https://en.wikipedia.org/wiki/Stop_word) (like `the`, `to`, etc.), as we should expect. If you want to filter out those stopwords, you can of course use [TF-IDF](http://tfidf.com/) and implement it in Hadoop with a lot of ways like [this](https://github.com/carolio7/tfIdf_calculationWithHadoop_java/) one for example.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bSuwZ.png","title":"Map Reduce for Top N Items","body":"<p>You are indeed right, you do need two MapReduce jobs chained together. More specifically, you need:</p>\n<ul>\n<li><p>one job to compute the wordcount for every word stored inside the input documents,</p>\n</li>\n<li><p>and one job to be able to &quot;sort&quot; all those words and wordcounts in order to pick and output the top <code>N</code> of them.</p>\n</li>\n</ul>\n<p>The first job is fairly similar to what you have come up with already, so I'm going to focus on the second job, to make things a bit clearer about how TopN works in the MapReduce paradigm.</p>\n<p>Thinking of the TopN MR job as a standalone thing, we know that this particular job will receive a bunch of key-value pairs where every word from the last step is going to be the key and its wordcount is going to be the value. Since mappers and reducers are isolated instances of the <code>map</code> and <code>reduce</code> functions running in parallel, we need to find a way to first find the TopN words locally (i.e. for every mapper), and then group all of those local TopN results to find the &quot;global&quot; TopN words for all the data given to the application by the input.</p>\n<p>So, the <code>TopNMapper</code> will first have to create a <code>TreeMap</code> (a Java key-value data structure that internally sorts its elements by key) in the <code>setup</code> function (so before mapper instances will be created), which every mapper will initialize an object of it and put every word and its wordcount as elements. For this type of computation (TopN), we will put the wordcount as key and the word as value to have a ascending order sorted list of the words. Since we only need to find out the top <code>N</code> of the words here, it is safe to say that we only want the top <code>N</code> words for every mapper, so we can remove all of the other elements below and have a <code>TreeMap</code> of <code>N</code> elements, which will be given to the reducers in the end of the mappers' execution (i.e. through the <code>cleanup</code> function). The mappers will write key-value pairs where the words are going to be keys and their wordcounts are going to be values, like that:</p>\n<p><code>&lt;word, wordcount&gt;</code></p>\n<p>Now for the <code>TopNReducer</code>, we need to do the same exact thing using a <code>TreeMap</code> data structure again to populate it with all of the local TopN elements, remove the elements that are not the top <code>N</code> of them, and write the words and their wordcounts as output. To be more &quot;clean&quot; with the approach, we can &quot;reverse&quot; words and wordcounts in the key-value pair structure so we can have the wordcounts as key and the words as value. This results into an (ascending order) sorted amount of key-value pairs that are going to be stored in disk after this job is done like this:</p>\n<p><code>wordcount, word&gt;</code></p>\n<p>The program that can do such a thing in 2 MR jobs looks like the following (where we set <code>N</code> as a global <code>Configuration</code> value inside the <code>main</code> function with the <code>conf.set(&quot;N&quot;, &quot;10&quot;);</code> command, and access it in the <code>setup</code> functions of the <code>TopNMapper</code> and <code>TopNReducer</code> classes), with all of the classes being put in one class <code>TopNWordCount</code> for simplicity:</p>\n<pre><code>import org.apache.hadoop.conf.Configuration;\nimport org.apache.hadoop.fs.FileSystem;\nimport org.apache.hadoop.fs.Path;\nimport org.apache.hadoop.io.IntWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Job;\nimport org.apache.hadoop.mapreduce.Mapper;\nimport org.apache.hadoop.mapreduce.Reducer;\nimport org.apache.hadoop.mapreduce.lib.input.FileInputFormat;\nimport org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;\nimport org.apache.hadoop.util.GenericOptionsParser;\n\nimport java.io.IOException;\nimport java.util.Map;\nimport java.util.TreeMap;\n\n\npublic class TopNWordCount\n{\n    /* input:  &lt;document, contents&gt;\n     * output: &lt;word, 1&gt;\n     */\n    public static class WordCountMapper extends Mapper&lt;Object, Text, Text, IntWritable&gt;\n    {\n        private final static IntWritable one = new IntWritable(1);\n\n        public void map(Object key, Text value, Context context) throws IOException, InterruptedException\n        {\n            // clean up the document text and split the words into an array\n            String[] words = value.toString()\n                                .replaceAll(&quot;\\\\d+&quot;, &quot;&quot;)           // get rid of numbers...\n                                .replaceAll(&quot;[^a-zA-Z ]&quot;, &quot; &quot;)    // get rid of punctuation...\n                                .toLowerCase()                                      // turn every letter to lowercase...\n                                .trim()                                             // trim the spaces\n                                .replaceAll(&quot;\\\\s+&quot;, &quot; &quot;)\n                                .split(&quot; &quot;);\n\n            // write every word as key with `1` as value that indicates that the word is\n            // found at least 1 time inside the input text\n            for(String word : words)\n                context.write(new Text(word), one);\n        }\n    }\n    \n    /* input: &lt;word, 1&gt;\n     * output: &lt;word, wordcount&gt;\n     */\n    public static class WordCountReducer extends Reducer&lt;Text, IntWritable, Text, IntWritable&gt;\n    {\n        private IntWritable wordcount = new IntWritable();\n\n        public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException\n        {\n            int word_cnt = 0;\n\n            for(IntWritable value : values)\n                word_cnt += value.get();\n\n            wordcount.set(word_cnt);\n\n            context.write(key, wordcount);\n        }\n    }\n\n\n\n    /* input:  &lt;word, wordcount&gt;\n     * output: &lt;NULL, (word, wordcount)&gt; (with the local topN words)\n     */\n    public static class TopNMapper extends Mapper&lt;Object, Text, Text, IntWritable&gt;\n    {\n        private int n;  // the N of TopN\n        private TreeMap&lt;Integer, String&gt; word_list; // local list with words sorted by their frequency\n\n        public void setup(Context context)\n        {\n            n = Integer.parseInt(context.getConfiguration().get(&quot;N&quot;));  // get N\n            word_list = new TreeMap&lt;Integer, String&gt;();\n        }\n\n        public void map(Object key, Text value, Context context)\n        {\n            String[] line = value.toString().split(&quot;\\t&quot;);   // split the word and the wordcount\n\n            // put the wordcount as key and the word as value in the word list\n            // so the words can be sorted by their wordcounts\n            word_list.put(Integer.valueOf(line[1]), line[0]);\n\n            // if the local word list is populated with more than N elements\n            // remove the first (aka remove the word with the smallest wordcount)\n            if (word_list.size() &gt; n)\n                word_list.remove(word_list.firstKey());\n        }\n\n        public void cleanup(Context context) throws IOException, InterruptedException\n        {\n            // write the topN local words before continuing to TopNReducer\n            // with each word as key and its wordcount as value\n            for (Map.Entry&lt;Integer, String&gt; entry : word_list.entrySet())\n            {\n                context.write(new Text(entry.getValue()), new IntWritable(entry.getKey()));\n            }\n        }\n    }\n\n    /* input:  &lt;word, wordcount&gt; (with the local topN words)\n     * output: &lt;wordcount, word&gt; (with the global topN words)\n     */\n    public static class TopNReducer extends Reducer&lt;Text, IntWritable, IntWritable, Text&gt;\n    {\n        private int n;  // the N of TopN\n        private TreeMap&lt;Integer, String&gt; word_list; //  list with words globally sorted by their frequency\n\n        public void setup(Context context)\n        {\n            n = Integer.parseInt(context.getConfiguration().get(&quot;N&quot;));  // get N\n            word_list = new TreeMap&lt;Integer, String&gt;();\n        }\n\n        public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context)\n        {\n            int wordcount = 0;\n\n            // get the one and only value (aka the wordcount) for each word\n            for(IntWritable value : values)\n                wordcount = value.get();\n\n            // put the wordcount as key and the word as value in the word list\n            // so the words can be sorted by their wordcounts\n            word_list.put(wordcount, key.toString());\n\n            // if the global word list is populated with more than N elements\n            // remove the first (aka remove the word with the smallest wordcount)\n            if (word_list.size() &gt; n)\n                word_list.remove(word_list.firstKey());\n        }\n\n        public void cleanup(Context context) throws IOException, InterruptedException\n        {\n            // write the topN global words with each word as key and its wordcount as value\n            // so the output will be sorted by the wordcount\n            for (Map.Entry&lt;Integer, String&gt; entry : word_list.entrySet())\n            {\n                context.write(new IntWritable(entry.getKey()), new Text(entry.getValue()));\n            }\n        }\n    }\n\n\n    public static void main(String[] args) throws Exception\n    {\n        Configuration conf = new Configuration();\n        String[] pathArgs = new GenericOptionsParser(conf, args).getRemainingArgs();\n\n        conf.set(&quot;N&quot;, &quot;10&quot;); // set the N as a &quot;public&quot; value in the current Configuration\n\n        if (pathArgs.length &lt; 2)\n        {\n          System.err.println(&quot;MR Project Usage: TopNWordCount &lt;input-path&gt; [...] &lt;output-path&gt;&quot;);\n          System.exit(2);\n        }\n\n        Path wordcount_dir = new Path(&quot;wordcount&quot;);\n        Path output_dir = new Path(pathArgs[pathArgs.length - 1]);\n\n        // if the in-between and output directories exists, delete them\n        FileSystem fs = FileSystem.get(conf);\n        if(fs.exists(wordcount_dir))\n            fs.delete(wordcount_dir, true);\n        if(fs.exists(output_dir))\n            fs.delete(output_dir, true);\n\n        Job wc_job = Job.getInstance(conf, &quot;WordCount&quot;);\n        wc_job.setJarByClass(TopNWordCount.class);\n        wc_job.setMapperClass(WordCountMapper.class);\n        wc_job.setReducerClass(WordCountReducer.class);\n        wc_job.setMapOutputKeyClass(Text.class);\n        wc_job.setMapOutputValueClass(IntWritable.class);\n        wc_job.setOutputKeyClass(Text.class);\n        wc_job.setOutputValueClass(IntWritable.class);\n        for (int i = 0; i &lt; pathArgs.length - 1; ++i)\n        {\n          FileInputFormat.addInputPath(wc_job, new Path(pathArgs[i]));\n        }\n        FileOutputFormat.setOutputPath(wc_job, wordcount_dir);\n        wc_job.waitForCompletion(true);\n        \n        Job topn_job = Job.getInstance(conf, &quot;TopN&quot;);\n        topn_job.setJarByClass(TopNWordCount.class);\n        topn_job.setMapperClass(TopNMapper.class);\n        topn_job.setReducerClass(TopNReducer.class);\n        topn_job.setMapOutputKeyClass(Text.class);\n        topn_job.setMapOutputValueClass(IntWritable.class);\n        topn_job.setOutputKeyClass(IntWritable.class);\n        topn_job.setOutputValueClass(Text.class);\n        FileInputFormat.addInputPath(topn_job, wordcount_dir);\n        FileOutputFormat.setOutputPath(topn_job, output_dir);\n        topn_job.waitForCompletion(true);\n    }\n}\n</code></pre>\n<p>The output of this program (using <a href=\"https://github.com/Coursal/Hadoop-Examples/tree/main/MaxTF/metamorphosis\" rel=\"nofollow noreferrer\">this</a> directory with text files as input) is the following:</p>\n<p><a href=\"https://i.stack.imgur.com/bSuwZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bSuwZ.png\" alt=\"enter image description here\" /></a></p>\n<p>Notice that the top 10 of the words here are <a href=\"https://en.wikipedia.org/wiki/Stop_word\" rel=\"nofollow noreferrer\">stopwords</a> (like <code>the</code>, <code>to</code>, etc.), as we should expect. If you want to filter out those stopwords, you can of course use <a href=\"http://tfidf.com/\" rel=\"nofollow noreferrer\">TF-IDF</a> and implement it in Hadoop with a lot of ways like <a href=\"https://github.com/carolio7/tfIdf_calculationWithHadoop_java/\" rel=\"nofollow noreferrer\">this</a> one for example.</p>\n"},{"tags":[],"owner":{"account_id":15864689,"reputation":55,"user_id":11446994,"display_name":"Nguyễn Huy Ho&#224;ng"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665666460,"creation_date":1665666460,"answer_id":74056313,"question_id":67085393,"body_markdown":"The answer of Coursal is not good enough. The problem occurs when the same wordcount appears. \r\n\r\nConsider the following list of wordcount:\r\n```\r\nred    4\r\ngreen  4\r\nblue   3\r\npurple 3\r\nblack  2\r\nbrown  1\r\nyellow 1\r\npink   1\r\nwhite  1\r\n```\r\n\r\nExpected result when choose N = 6:\r\n```\r\nred    4\r\ngreen  4\r\nblue   3\r\npurple 3\r\nblack  2\r\nbrown  1\r\n```\r\n\r\nBut the java program of Coursal will output the following result:\r\n```\r\ngreen  4\r\npurple 3\r\nblack  2\r\nbrown  1\r\n```\r\n\r\nBelow is the corrected program\r\n\r\n```java\r\nimport org.apache.hadoop.conf.Configuration;\r\nimport org.apache.hadoop.fs.FileSystem;\r\nimport org.apache.hadoop.fs.Path;\r\nimport org.apache.hadoop.io.IntWritable;\r\nimport org.apache.hadoop.io.Text;\r\nimport org.apache.hadoop.mapreduce.Job;\r\nimport org.apache.hadoop.mapreduce.Mapper;\r\nimport org.apache.hadoop.mapreduce.Reducer;\r\nimport org.apache.hadoop.mapreduce.lib.input.FileInputFormat;\r\nimport org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;\r\nimport org.apache.hadoop.util.GenericOptionsParser;\r\n\r\nimport java.io.IOException;\r\nimport java.util.Map;\r\nimport java.util.Random;\r\nimport java.util.TreeMap;\r\nimport java.util.StringTokenizer;\r\n\r\npublic class TopNWordCount\r\n{\r\n    /* input:  &lt;document, contents&gt;\r\n     * output: &lt;word, 1&gt;\r\n     */\r\n    public static class WordCountMapper extends Mapper&lt;Object, Text, Text, IntWritable&gt;\r\n    {\r\n        private final static IntWritable one = new IntWritable(1);\r\n        private Text word = new Text();\r\n\r\n        public void map(Object key, Text value, Context context) throws IOException, InterruptedException\r\n        {\r\n            StringTokenizer itr = new StringTokenizer(value.toString());\r\n\r\n            while (itr.hasMoreTokens()) {\r\n                word.set(itr.nextToken());\r\n                context.write(word, one);\r\n            }\r\n        }\r\n    }\r\n    \r\n    /* input: &lt;word, 1&gt;\r\n     * output: &lt;word, wordcount&gt;\r\n     */\r\n    public static class WordCountReducer extends Reducer&lt;Text, IntWritable, Text, IntWritable&gt;\r\n    {\r\n        private IntWritable wordcount = new IntWritable();\r\n\r\n        public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException\r\n        {\r\n            int word_cnt = 0;\r\n\r\n            for(IntWritable value : values)\r\n                word_cnt += value.get();\r\n\r\n            wordcount.set(word_cnt);\r\n\r\n            context.write(key, wordcount);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    /* input:  &lt;word, wordcount&gt;\r\n     * output: &lt;NULL, (word, wordcount)&gt; (with the local topN words)\r\n     */\r\n    public static class TopNMapper extends Mapper&lt;Object, Text, Text, IntWritable&gt;\r\n    {\r\n        private int n;  // the N of TopN\r\n        private TreeMap&lt;Float, String&gt; word_list; // local list with words sorted by their frequency\r\n        private Random random;\r\n\r\n        public void setup(Context context)\r\n        {\r\n            n = Integer.parseInt(context.getConfiguration().get(&quot;N&quot;));  // get N\r\n            word_list = new TreeMap&lt;Float, String&gt;();\r\n            random = new Random(0);\r\n        }\r\n\r\n        public void map(Object key, Text value, Context context)\r\n        {\r\n            String[] line = value.toString().split(&quot;\\t&quot;);   // split the word and the wordcount\r\n\r\n            // put the wordcount as key and the word as value in the word list\r\n            // so the words can be sorted by their wordcounts\r\n            word_list.put(Integer.valueOf(line[1]) + random.nextFloat(), line[0]);\r\n\r\n            // if the local word list is populated with more than N elements\r\n            // remove the first (aka remove the word with the smallest wordcount)\r\n            if (word_list.size() &gt; n)\r\n                word_list.remove(word_list.firstKey());\r\n        }\r\n\r\n        public void cleanup(Context context) throws IOException, InterruptedException\r\n        {\r\n            // write the topN local words before continuing to TopNReducer\r\n            // with each word as key and its wordcount as value\r\n            for (Map.Entry&lt;Float, String&gt; entry : word_list.entrySet())\r\n            {\r\n                String word = entry.getValue();\r\n                Integer wordcount = (int) Math.floor(entry.getKey());\r\n                context.write(new Text(word), new IntWritable(wordcount));\r\n            }\r\n        }\r\n    }\r\n\r\n    /* input:  &lt;word, wordcount&gt; (with the local topN words)\r\n     * output: &lt;wordcount, word&gt; (with the global topN words)\r\n     */\r\n    public static class TopNReducer extends Reducer&lt;Text, IntWritable, IntWritable, Text&gt;\r\n    {\r\n        private int n;  // the N of TopN\r\n        private TreeMap&lt;Float, String&gt; word_list; //  list with words globally sorted by their frequency\r\n        private Random random;\r\n\r\n        public void setup(Context context)\r\n        {\r\n            n = Integer.parseInt(context.getConfiguration().get(&quot;N&quot;));  // get N\r\n            word_list = new TreeMap&lt;Float, String&gt;();\r\n            random = new Random(0);\r\n        }\r\n\r\n        public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context)\r\n        {\r\n            int wordcount = 0;\r\n\r\n            // get the one and only value (aka the wordcount) for each word\r\n            for(IntWritable value : values)\r\n                wordcount = value.get();\r\n\r\n            // put the wordcount as key and the word as value in the word list\r\n            // so the words can be sorted by their wordcounts\r\n            word_list.put(wordcount + random.nextFloat(), key.toString());\r\n\r\n            // if the global word list is populated with more than N elements\r\n            // remove the first (aka remove the word with the smallest wordcount)\r\n            if (word_list.size() &gt; n)\r\n                word_list.remove(word_list.firstKey());\r\n        }\r\n\r\n        public void cleanup(Context context) throws IOException, InterruptedException\r\n        {\r\n            // write the topN global words with each word as key and its wordcount as value\r\n            // so the output will be sorted by the wordcount\r\n            for (Map.Entry&lt;Float, String&gt; entry : word_list.entrySet())\r\n            {\r\n                String word = entry.getValue();\r\n                Integer wordcount = (int) Math.floor(entry.getKey());\r\n                context.write(new IntWritable(wordcount), new Text(word));\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    public static void main(String[] args) throws Exception\r\n    {\r\n        Configuration conf = new Configuration();\r\n        String[] pathArgs = new GenericOptionsParser(conf, args).getRemainingArgs();\r\n\r\n        conf.set(&quot;N&quot;, &quot;10&quot;); // set the N as a &quot;public&quot; value in the current Configuration\r\n\r\n        if (pathArgs.length &lt; 2)\r\n        {\r\n          System.err.println(&quot;MR Project Usage: TopNWordCount &lt;input-path&gt; [...] &lt;output-path&gt;&quot;);\r\n          System.exit(2);\r\n        }\r\n\r\n        Path wordcount_dir = new Path(&quot;wordcount&quot;);\r\n        Path output_dir = new Path(pathArgs[pathArgs.length - 1]);\r\n\r\n        // if the in-between and output directories exists, delete them\r\n        FileSystem fs = FileSystem.get(conf);\r\n        if(fs.exists(wordcount_dir))\r\n            fs.delete(wordcount_dir, true);\r\n        if(fs.exists(output_dir))\r\n            fs.delete(output_dir, true);\r\n\r\n        Job wc_job = Job.getInstance(conf, &quot;WordCount&quot;);\r\n        wc_job.setJarByClass(TopNWordCount.class);\r\n        wc_job.setMapperClass(WordCountMapper.class);\r\n        wc_job.setReducerClass(WordCountReducer.class);\r\n        wc_job.setMapOutputKeyClass(Text.class);\r\n        wc_job.setMapOutputValueClass(IntWritable.class);\r\n        wc_job.setOutputKeyClass(Text.class);\r\n        wc_job.setOutputValueClass(IntWritable.class);\r\n        for (int i = 0; i &lt; pathArgs.length - 1; ++i)\r\n        {\r\n          FileInputFormat.addInputPath(wc_job, new Path(pathArgs[i]));\r\n        }\r\n        FileOutputFormat.setOutputPath(wc_job, wordcount_dir);\r\n        wc_job.waitForCompletion(true);\r\n        \r\n        Job topn_job = Job.getInstance(conf, &quot;TopN&quot;);\r\n        topn_job.setJarByClass(TopNWordCount.class);\r\n        topn_job.setMapperClass(TopNMapper.class);\r\n        topn_job.setReducerClass(TopNReducer.class);\r\n        topn_job.setMapOutputKeyClass(Text.class);\r\n        topn_job.setMapOutputValueClass(IntWritable.class);\r\n        topn_job.setOutputKeyClass(IntWritable.class);\r\n        topn_job.setOutputValueClass(Text.class);\r\n        FileInputFormat.addInputPath(topn_job, wordcount_dir);\r\n        FileOutputFormat.setOutputPath(topn_job, output_dir);\r\n        topn_job.waitForCompletion(true);\r\n    }\r\n}\r\n```\r\n\r\nI add a random float number (0-1) to every key before add it to the tree. And compute the floor of key when get it from the tree. Thanks to that, the keys won&#39;t be duplicated.","title":"Map Reduce for Top N Items","body":"<p>The answer of Coursal is not good enough. The problem occurs when the same wordcount appears.</p>\n<p>Consider the following list of wordcount:</p>\n<pre><code>red    4\ngreen  4\nblue   3\npurple 3\nblack  2\nbrown  1\nyellow 1\npink   1\nwhite  1\n</code></pre>\n<p>Expected result when choose N = 6:</p>\n<pre><code>red    4\ngreen  4\nblue   3\npurple 3\nblack  2\nbrown  1\n</code></pre>\n<p>But the java program of Coursal will output the following result:</p>\n<pre><code>green  4\npurple 3\nblack  2\nbrown  1\n</code></pre>\n<p>Below is the corrected program</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.apache.hadoop.conf.Configuration;\nimport org.apache.hadoop.fs.FileSystem;\nimport org.apache.hadoop.fs.Path;\nimport org.apache.hadoop.io.IntWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Job;\nimport org.apache.hadoop.mapreduce.Mapper;\nimport org.apache.hadoop.mapreduce.Reducer;\nimport org.apache.hadoop.mapreduce.lib.input.FileInputFormat;\nimport org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;\nimport org.apache.hadoop.util.GenericOptionsParser;\n\nimport java.io.IOException;\nimport java.util.Map;\nimport java.util.Random;\nimport java.util.TreeMap;\nimport java.util.StringTokenizer;\n\npublic class TopNWordCount\n{\n    /* input:  &lt;document, contents&gt;\n     * output: &lt;word, 1&gt;\n     */\n    public static class WordCountMapper extends Mapper&lt;Object, Text, Text, IntWritable&gt;\n    {\n        private final static IntWritable one = new IntWritable(1);\n        private Text word = new Text();\n\n        public void map(Object key, Text value, Context context) throws IOException, InterruptedException\n        {\n            StringTokenizer itr = new StringTokenizer(value.toString());\n\n            while (itr.hasMoreTokens()) {\n                word.set(itr.nextToken());\n                context.write(word, one);\n            }\n        }\n    }\n    \n    /* input: &lt;word, 1&gt;\n     * output: &lt;word, wordcount&gt;\n     */\n    public static class WordCountReducer extends Reducer&lt;Text, IntWritable, Text, IntWritable&gt;\n    {\n        private IntWritable wordcount = new IntWritable();\n\n        public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException\n        {\n            int word_cnt = 0;\n\n            for(IntWritable value : values)\n                word_cnt += value.get();\n\n            wordcount.set(word_cnt);\n\n            context.write(key, wordcount);\n        }\n    }\n\n\n\n    /* input:  &lt;word, wordcount&gt;\n     * output: &lt;NULL, (word, wordcount)&gt; (with the local topN words)\n     */\n    public static class TopNMapper extends Mapper&lt;Object, Text, Text, IntWritable&gt;\n    {\n        private int n;  // the N of TopN\n        private TreeMap&lt;Float, String&gt; word_list; // local list with words sorted by their frequency\n        private Random random;\n\n        public void setup(Context context)\n        {\n            n = Integer.parseInt(context.getConfiguration().get(&quot;N&quot;));  // get N\n            word_list = new TreeMap&lt;Float, String&gt;();\n            random = new Random(0);\n        }\n\n        public void map(Object key, Text value, Context context)\n        {\n            String[] line = value.toString().split(&quot;\\t&quot;);   // split the word and the wordcount\n\n            // put the wordcount as key and the word as value in the word list\n            // so the words can be sorted by their wordcounts\n            word_list.put(Integer.valueOf(line[1]) + random.nextFloat(), line[0]);\n\n            // if the local word list is populated with more than N elements\n            // remove the first (aka remove the word with the smallest wordcount)\n            if (word_list.size() &gt; n)\n                word_list.remove(word_list.firstKey());\n        }\n\n        public void cleanup(Context context) throws IOException, InterruptedException\n        {\n            // write the topN local words before continuing to TopNReducer\n            // with each word as key and its wordcount as value\n            for (Map.Entry&lt;Float, String&gt; entry : word_list.entrySet())\n            {\n                String word = entry.getValue();\n                Integer wordcount = (int) Math.floor(entry.getKey());\n                context.write(new Text(word), new IntWritable(wordcount));\n            }\n        }\n    }\n\n    /* input:  &lt;word, wordcount&gt; (with the local topN words)\n     * output: &lt;wordcount, word&gt; (with the global topN words)\n     */\n    public static class TopNReducer extends Reducer&lt;Text, IntWritable, IntWritable, Text&gt;\n    {\n        private int n;  // the N of TopN\n        private TreeMap&lt;Float, String&gt; word_list; //  list with words globally sorted by their frequency\n        private Random random;\n\n        public void setup(Context context)\n        {\n            n = Integer.parseInt(context.getConfiguration().get(&quot;N&quot;));  // get N\n            word_list = new TreeMap&lt;Float, String&gt;();\n            random = new Random(0);\n        }\n\n        public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context)\n        {\n            int wordcount = 0;\n\n            // get the one and only value (aka the wordcount) for each word\n            for(IntWritable value : values)\n                wordcount = value.get();\n\n            // put the wordcount as key and the word as value in the word list\n            // so the words can be sorted by their wordcounts\n            word_list.put(wordcount + random.nextFloat(), key.toString());\n\n            // if the global word list is populated with more than N elements\n            // remove the first (aka remove the word with the smallest wordcount)\n            if (word_list.size() &gt; n)\n                word_list.remove(word_list.firstKey());\n        }\n\n        public void cleanup(Context context) throws IOException, InterruptedException\n        {\n            // write the topN global words with each word as key and its wordcount as value\n            // so the output will be sorted by the wordcount\n            for (Map.Entry&lt;Float, String&gt; entry : word_list.entrySet())\n            {\n                String word = entry.getValue();\n                Integer wordcount = (int) Math.floor(entry.getKey());\n                context.write(new IntWritable(wordcount), new Text(word));\n            }\n        }\n    }\n\n\n    public static void main(String[] args) throws Exception\n    {\n        Configuration conf = new Configuration();\n        String[] pathArgs = new GenericOptionsParser(conf, args).getRemainingArgs();\n\n        conf.set(&quot;N&quot;, &quot;10&quot;); // set the N as a &quot;public&quot; value in the current Configuration\n\n        if (pathArgs.length &lt; 2)\n        {\n          System.err.println(&quot;MR Project Usage: TopNWordCount &lt;input-path&gt; [...] &lt;output-path&gt;&quot;);\n          System.exit(2);\n        }\n\n        Path wordcount_dir = new Path(&quot;wordcount&quot;);\n        Path output_dir = new Path(pathArgs[pathArgs.length - 1]);\n\n        // if the in-between and output directories exists, delete them\n        FileSystem fs = FileSystem.get(conf);\n        if(fs.exists(wordcount_dir))\n            fs.delete(wordcount_dir, true);\n        if(fs.exists(output_dir))\n            fs.delete(output_dir, true);\n\n        Job wc_job = Job.getInstance(conf, &quot;WordCount&quot;);\n        wc_job.setJarByClass(TopNWordCount.class);\n        wc_job.setMapperClass(WordCountMapper.class);\n        wc_job.setReducerClass(WordCountReducer.class);\n        wc_job.setMapOutputKeyClass(Text.class);\n        wc_job.setMapOutputValueClass(IntWritable.class);\n        wc_job.setOutputKeyClass(Text.class);\n        wc_job.setOutputValueClass(IntWritable.class);\n        for (int i = 0; i &lt; pathArgs.length - 1; ++i)\n        {\n          FileInputFormat.addInputPath(wc_job, new Path(pathArgs[i]));\n        }\n        FileOutputFormat.setOutputPath(wc_job, wordcount_dir);\n        wc_job.waitForCompletion(true);\n        \n        Job topn_job = Job.getInstance(conf, &quot;TopN&quot;);\n        topn_job.setJarByClass(TopNWordCount.class);\n        topn_job.setMapperClass(TopNMapper.class);\n        topn_job.setReducerClass(TopNReducer.class);\n        topn_job.setMapOutputKeyClass(Text.class);\n        topn_job.setMapOutputValueClass(IntWritable.class);\n        topn_job.setOutputKeyClass(IntWritable.class);\n        topn_job.setOutputValueClass(Text.class);\n        FileInputFormat.addInputPath(topn_job, wordcount_dir);\n        FileOutputFormat.setOutputPath(topn_job, output_dir);\n        topn_job.waitForCompletion(true);\n    }\n}\n</code></pre>\n<p>I add a random float number (0-1) to every key before add it to the tree. And compute the floor of key when get it from the tree. Thanks to that, the keys won't be duplicated.</p>\n"}],"owner":{"account_id":14868264,"reputation":27,"user_id":10736568,"display_name":"Widget"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2460,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":67092250,"answer_count":2,"score":1,"last_activity_date":1665666460,"creation_date":1618373279,"question_id":67085393,"body_markdown":"I am working on a Hadoop Project in Java and having some difficulties. I understand the goal of what I am supposed to be doing but truly do not understand exactly how to implement it. I am attempting to extract the top N results from a map reduce job, such as the top 5 highest frequency values.\r\n\r\nI understand that this will generally require two map reduces, one for the reduce and one to sort the values. However, like I said, I am fairly lost on how to actually implement this.\r\n\r\nThe code I am using is a fairly standard map reduce code with some filtering for special values.\r\n\r\n    public class MapWordCount extends Mapper &lt;LongWritable, Text, Text, IntWritable&gt;\r\n    {\r\n    \t  private Text wordToken = new Text();\r\n    \t  public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException\r\n    \t  {\r\n    \t\t  StringTokenizer tokens = new StringTokenizer(value.toString(), &quot;[_|$#0123456789&lt;&gt;\\\\^=\\\\[\\\\]\\\\*/\\\\\\\\,;,.\\\\-:()?!\\&quot;&#39;]&quot;); //Dividing String into tokens\r\n    \t    while (tokens.hasMoreTokens())\r\n    \t    {\r\n    \t      wordToken.set(tokens.nextToken());\r\n    \t      context.write(wordToken, new IntWritable(1));\r\n    \t    }\r\n    \t  }\r\n    \t}\r\n\r\nReducer\r\n\r\n    public class ReduceWordCount extends Reducer &lt;Text, IntWritable, Text, IntWritable&gt;\r\n    {\r\n    \t  private IntWritable count = new IntWritable();\r\n    \t  public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException\r\n    \t  {\r\n    \t    int valueSum = 0;\r\n    \t    for (IntWritable val : values)\r\n    \t    {\r\n    \t      valueSum += val.get();\r\n    \t    }\r\n    \t    count.set(valueSum);\r\n    \t    context.write(key, count);\r\n    \t  }\r\n    \t}\r\n\r\nDriver\r\n\r\n    public class WordCount {\r\n    \t  public static void main(String[] args) throws Exception\r\n    \t  {\r\n    \t    Configuration conf = new Configuration();\r\n    \t    String[] pathArgs = new GenericOptionsParser(conf, args).getRemainingArgs();\r\n    \t    if (pathArgs.length &lt; 2)\r\n    \t    {\r\n    \t      System.err.println(&quot;MR Project Usage: wordcount &lt;input-path&gt; [...] &lt;output-path&gt;&quot;);\r\n    \t      System.exit(2);\r\n    \t    }\r\n    \t    Job wcJob = Job.getInstance(conf, &quot;MapReduce WordCount&quot;);\r\n    \t    wcJob.setJarByClass(WordCount.class);\r\n    \t    wcJob.setMapperClass(MapWordCount.class);\r\n    \t    wcJob.setCombinerClass(ReduceWordCount.class);\r\n    \t    wcJob.setReducerClass(ReduceWordCount.class);\r\n    \t    wcJob.setOutputKeyClass(Text.class);\r\n    \t    wcJob.setOutputValueClass(IntWritable.class);\r\n    \t    for (int i = 0; i &lt; pathArgs.length - 1; ++i)\r\n    \t    {\r\n    \t      FileInputFormat.addInputPath(wcJob, new Path(pathArgs[i]));\r\n    \t    }\r\n    \t    FileOutputFormat.setOutputPath(wcJob, new Path(pathArgs[pathArgs.length - 1]));\r\n    \t    System.exit(wcJob.waitForCompletion(true) ? 0 : 1);\r\n    \t  }\r\n    \t}\r\n\r\nIf anybody could assist me with this I would appreciate it. As I said, I know I need two map reduces, but am not quite sure how to start with this. I attempted a couple of other solutions I found on StackOverflow but didn&#39;t have much luck for my case. Thanks so much!","title":"Map Reduce for Top N Items","body":"<p>I am working on a Hadoop Project in Java and having some difficulties. I understand the goal of what I am supposed to be doing but truly do not understand exactly how to implement it. I am attempting to extract the top N results from a map reduce job, such as the top 5 highest frequency values.</p>\n<p>I understand that this will generally require two map reduces, one for the reduce and one to sort the values. However, like I said, I am fairly lost on how to actually implement this.</p>\n<p>The code I am using is a fairly standard map reduce code with some filtering for special values.</p>\n<pre><code>public class MapWordCount extends Mapper &lt;LongWritable, Text, Text, IntWritable&gt;\n{\n      private Text wordToken = new Text();\n      public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException\n      {\n          StringTokenizer tokens = new StringTokenizer(value.toString(), &quot;[_|$#0123456789&lt;&gt;\\\\^=\\\\[\\\\]\\\\*/\\\\\\\\,;,.\\\\-:()?!\\&quot;']&quot;); //Dividing String into tokens\n        while (tokens.hasMoreTokens())\n        {\n          wordToken.set(tokens.nextToken());\n          context.write(wordToken, new IntWritable(1));\n        }\n      }\n    }\n</code></pre>\n<p>Reducer</p>\n<pre><code>public class ReduceWordCount extends Reducer &lt;Text, IntWritable, Text, IntWritable&gt;\n{\n      private IntWritable count = new IntWritable();\n      public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException\n      {\n        int valueSum = 0;\n        for (IntWritable val : values)\n        {\n          valueSum += val.get();\n        }\n        count.set(valueSum);\n        context.write(key, count);\n      }\n    }\n</code></pre>\n<p>Driver</p>\n<pre><code>public class WordCount {\n      public static void main(String[] args) throws Exception\n      {\n        Configuration conf = new Configuration();\n        String[] pathArgs = new GenericOptionsParser(conf, args).getRemainingArgs();\n        if (pathArgs.length &lt; 2)\n        {\n          System.err.println(&quot;MR Project Usage: wordcount &lt;input-path&gt; [...] &lt;output-path&gt;&quot;);\n          System.exit(2);\n        }\n        Job wcJob = Job.getInstance(conf, &quot;MapReduce WordCount&quot;);\n        wcJob.setJarByClass(WordCount.class);\n        wcJob.setMapperClass(MapWordCount.class);\n        wcJob.setCombinerClass(ReduceWordCount.class);\n        wcJob.setReducerClass(ReduceWordCount.class);\n        wcJob.setOutputKeyClass(Text.class);\n        wcJob.setOutputValueClass(IntWritable.class);\n        for (int i = 0; i &lt; pathArgs.length - 1; ++i)\n        {\n          FileInputFormat.addInputPath(wcJob, new Path(pathArgs[i]));\n        }\n        FileOutputFormat.setOutputPath(wcJob, new Path(pathArgs[pathArgs.length - 1]));\n        System.exit(wcJob.waitForCompletion(true) ? 0 : 1);\n      }\n    }\n</code></pre>\n<p>If anybody could assist me with this I would appreciate it. As I said, I know I need two map reduces, but am not quite sure how to start with this. I attempted a couple of other solutions I found on StackOverflow but didn't have much luck for my case. Thanks so much!</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1665665468,"post_id":74056055,"comment_id":130755931,"body_markdown":"Why would you say it is a bad idea?","body":"Why would you say it is a bad idea?"},{"owner":{"account_id":16673497,"reputation":2011,"user_id":12050506,"display_name":"possum"},"score":1,"creation_date":1665665515,"post_id":74056055,"comment_id":130755948,"body_markdown":"Please reformulate your post in terms of a definitively answerable question.  Asking for &quot;a better way&quot; leads to opinion-based answers which will be downvoted or removed.","body":"Please reformulate your post in terms of a definitively answerable question.  Asking for &quot;a better way&quot; leads to opinion-based answers which will be downvoted or removed."},{"owner":{"account_id":3992180,"reputation":1524,"user_id":3290745,"display_name":"Tristate"},"score":0,"creation_date":1665665830,"post_id":74056055,"comment_id":130756094,"body_markdown":"reformulated my question","body":"reformulated my question"}],"answers":[{"comments":[{"owner":{"account_id":22491103,"reputation":5310,"user_id":16688813,"display_name":"Tom"},"score":0,"creation_date":1665666418,"post_id":74056231,"comment_id":130756331,"body_markdown":"`.map(e -&gt; e.setPredicted(false))` wouldn&#39;t work ?","body":"<code>.map(e -&gt; e.setPredicted(false))</code> wouldn&#39;t work ?"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1665666812,"post_id":74056231,"comment_id":130756492,"body_markdown":"@Tom no, because `map` is defined as `map(Function&lt;E, R&gt;)` and must return the new elements of the stream. `setPredicated` is presumably void. Even it weren&#39;t, you wouldn&#39;t be streaming your original DTO elements anymore.","body":"@Tom no, because <code>map</code> is defined as <code>map(Function&lt;E, R&gt;)</code> and must return the new elements of the stream. <code>setPredicated</code> is presumably void. Even it weren&#39;t, you wouldn&#39;t be streaming your original DTO elements anymore."}],"tags":[],"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1665666098,"creation_date":1665666098,"answer_id":74056231,"question_id":74056055,"body_markdown":"One option is to separately loop and set your properties after collecting:\r\n\r\n```\r\nList&lt;MyDto&gt; myDtoList = service.getDtos()\r\n .filter(...)\r\n .sorted(...)\r\n .collect(Collectors.toList());\r\nmyDtoList.forEach(e -&gt; e.setPredicted(false));\r\n```\r\n\r\nor stay in functional land and `map` to new objects:\r\n\r\n```\r\nList&lt;MyDto&gt; myDtoList = service.getDtos()\r\n .filter(...)\r\n .sorted(...)\r\n .map(e -&gt; {\r\n    final MyDto dto = new MyDto();\r\n    dto.set...(e.get...());\r\n    dto.set...(e.get...());\r\n    dto.setPredicted(false);\r\n    return dto;\r\n })\r\n .collect(Collectors.toList());\r\n```\r\n\r\nIntroducing a copy-constructor/factory or static copy-method can make your life and your code simpler.","title":"Best way to make a mid-stream forEach","body":"<p>One option is to separately loop and set your properties after collecting:</p>\n<pre><code>List&lt;MyDto&gt; myDtoList = service.getDtos()\n .filter(...)\n .sorted(...)\n .collect(Collectors.toList());\nmyDtoList.forEach(e -&gt; e.setPredicted(false));\n</code></pre>\n<p>or stay in functional land and <code>map</code> to new objects:</p>\n<pre><code>List&lt;MyDto&gt; myDtoList = service.getDtos()\n .filter(...)\n .sorted(...)\n .map(e -&gt; {\n    final MyDto dto = new MyDto();\n    dto.set...(e.get...());\n    dto.set...(e.get...());\n    dto.setPredicted(false);\n    return dto;\n })\n .collect(Collectors.toList());\n</code></pre>\n<p>Introducing a copy-constructor/factory or static copy-method can make your life and your code simpler.</p>\n"}],"owner":{"account_id":3992180,"reputation":1524,"user_id":3290745,"display_name":"Tristate"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74056231,"answer_count":1,"score":0,"last_activity_date":1665666098,"creation_date":1665665290,"question_id":74056055,"body_markdown":"I have a class\r\n\r\n    class MyDto{\r\n    \r\n    ...\r\n    boolean isPredicted;\r\n    ...\r\n    \r\n    }\r\n\r\nAnd a List of it\r\n\r\n    List&lt;MyDto&gt; myDtoList = ....\r\n\r\nI need to filter, sort and set isPredicted to false for each element. Actually my code is.\r\n\r\n    List&lt;MyDto&gt; myDtoList = service.getDtos()\r\n     .filter(...)\r\n     .sorted(...)\r\n     .collect(Collectors.toList());\r\n\r\nMy Idea was to place a &quot;for each element set isPredicted to false&quot;, between sorted and collect.\r\n\r\n    List&lt;MyDto&gt; myDtoList = service.getDtos()\r\n     .filter(...)\r\n     .sorted(...)\r\n     .peek(e-&gt;e.setPredicted(false))\r\n     .collect(Collectors.toList());\r\n\r\nBut after I read some resources on the internet, I think to use peek here is bad Idea. As it was build for Debug operations.\r\n\r\nHow I can avoid peek() here?\r\n","title":"Best way to make a mid-stream forEach","body":"<p>I have a class</p>\n<pre><code>class MyDto{\n\n...\nboolean isPredicted;\n...\n\n}\n</code></pre>\n<p>And a List of it</p>\n<pre><code>List&lt;MyDto&gt; myDtoList = ....\n</code></pre>\n<p>I need to filter, sort and set isPredicted to false for each element. Actually my code is.</p>\n<pre><code>List&lt;MyDto&gt; myDtoList = service.getDtos()\n .filter(...)\n .sorted(...)\n .collect(Collectors.toList());\n</code></pre>\n<p>My Idea was to place a &quot;for each element set isPredicted to false&quot;, between sorted and collect.</p>\n<pre><code>List&lt;MyDto&gt; myDtoList = service.getDtos()\n .filter(...)\n .sorted(...)\n .peek(e-&gt;e.setPredicted(false))\n .collect(Collectors.toList());\n</code></pre>\n<p>But after I read some resources on the internet, I think to use peek here is bad Idea. As it was build for Debug operations.</p>\n<p>How I can avoid peek() here?</p>\n"},{"tags":["java","spring","elasticsearch","spring-data-elasticsearch"],"answers":[{"comments":[{"owner":{"account_id":26579158,"reputation":7,"user_id":20204076,"display_name":"Java2Avaj"},"score":0,"creation_date":1665670588,"post_id":74056159,"comment_id":130757863,"body_markdown":"is there a limit to number of list values when using this?","body":"is there a limit to number of list values when using this?"},{"owner":{"account_id":26562666,"reputation":119,"user_id":20190240,"display_name":"Jalena"},"score":0,"creation_date":1665680465,"post_id":74056159,"comment_id":130761456,"body_markdown":"No, I don&#39;t think do","body":"No, I don&#39;t think do"}],"tags":[],"owner":{"account_id":26562666,"reputation":119,"user_id":20190240,"display_name":"Jalena"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665665796,"creation_date":1665665796,"answer_id":74056159,"question_id":74055174,"body_markdown":"You can use the terms query to match a field with multiple values by passing an array or set of String.\r\n\r\n     QueryBuilder queryBuilder = QueryBuilders.boolQuery()\r\n                .should(QueryBuilders.termsQuery(&quot;mainId&quot;,mainId));\r\n\r\nDo note the &#39;s&#39; in `termsQuery`.","title":"How to query list of values from a specific field in Elastic Search?","body":"<p>You can use the terms query to match a field with multiple values by passing an array or set of String.</p>\n<pre><code> QueryBuilder queryBuilder = QueryBuilders.boolQuery()\n            .should(QueryBuilders.termsQuery(&quot;mainId&quot;,mainId));\n</code></pre>\n<p>Do note the 's' in <code>termsQuery</code>.</p>\n"}],"owner":{"account_id":26579158,"reputation":7,"user_id":20204076,"display_name":"Java2Avaj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1055,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665665796,"creation_date":1665661331,"question_id":74055174,"body_markdown":"I have a following POJO:\r\n\r\n    @Data\r\n    @Document(indexName = &quot;person&quot;)\r\n    public class Person {\r\n    \r\n      @Id\r\n      @JsonIgnore\r\n      private String id;\r\n    \r\n       private String mainId;\r\n    \r\n      private String name;\r\n    }\r\n\r\nHow can I search from mainId field given a list of values (Example: [&quot;1234&quot;, &quot;567&quot;, &quot;8910&quot;]?\r\n\r\nSo far I am using this to code. but it gave me an exception when I tried to pass a list of too many values:\r\n\r\n     BoolQueryBuilder queryBuilder = QueryBuilders.boolQuery();\r\n        for (String mainId : mainIds) {\r\n          queryBuilder.should(QueryBuilders.matchQuery(&quot;mainId&quot;, mainId ));\r\n        }\r\n        NativeSearchQuery searchQuery = new NativeSearchQueryBuilder()\r\n            .withQuery(queryBuilder).build();\r\n    \r\n        SearchHits&lt;T&gt; searchHits = this.operations.search(searchQuery, this.entityClass,\r\n            this.operations.getIndexCoordinatesFor(this.entityClass));","title":"How to query list of values from a specific field in Elastic Search?","body":"<p>I have a following POJO:</p>\n<pre><code>@Data\n@Document(indexName = &quot;person&quot;)\npublic class Person {\n\n  @Id\n  @JsonIgnore\n  private String id;\n\n   private String mainId;\n\n  private String name;\n}\n</code></pre>\n<p>How can I search from mainId field given a list of values (Example: [&quot;1234&quot;, &quot;567&quot;, &quot;8910&quot;]?</p>\n<p>So far I am using this to code. but it gave me an exception when I tried to pass a list of too many values:</p>\n<pre><code> BoolQueryBuilder queryBuilder = QueryBuilders.boolQuery();\n    for (String mainId : mainIds) {\n      queryBuilder.should(QueryBuilders.matchQuery(&quot;mainId&quot;, mainId ));\n    }\n    NativeSearchQuery searchQuery = new NativeSearchQueryBuilder()\n        .withQuery(queryBuilder).build();\n\n    SearchHits&lt;T&gt; searchHits = this.operations.search(searchQuery, this.entityClass,\n        this.operations.getIndexCoordinatesFor(this.entityClass));\n</code></pre>\n"},{"tags":["java","dictionary"],"comments":[{"owner":{"account_id":6712727,"reputation":640,"user_id":5175581,"display_name":"Ewan Brown"},"score":0,"creation_date":1650044172,"post_id":71887053,"comment_id":127030996,"body_markdown":"It isn&#39;t very clear what you are asking for. Could you elaborate on what you want the output to be/what isn&#39;t working? Side note : Avoid using raw types in Java","body":"It isn&#39;t very clear what you are asking for. Could you elaborate on what you want the output to be/what isn&#39;t working? Side note : Avoid using raw types in Java"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1650120162,"post_id":71887053,"comment_id":127043721,"body_markdown":"Not related to your problem, but you shouldn&#39;t use `Hashtable`: in most cases, using `HashMap` is preferred, and instead of `Dictionary`, you should use the interface `Map`.","body":"Not related to your problem, but you shouldn&#39;t use <code>Hashtable</code>: in most cases, using <code>HashMap</code> is preferred, and instead of <code>Dictionary</code>, you should use the interface <code>Map</code>."}],"answers":[{"tags":[],"owner":{"account_id":6712727,"reputation":640,"user_id":5175581,"display_name":"Ewan Brown"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1650044498,"creation_date":1650044498,"answer_id":71887211,"question_id":71887053,"body_markdown":"I tried to rewrite your code in a way that made more sense to me.\r\n\r\nI&#39;ve added the use of proper types as well, using raw types in java is dangerous. The last line of my code does what I believe you want. Note the difference between using Integers as keys and Strings as keys.\r\n\r\n```\r\n\r\n    public static void main(String[] args) {\r\n        Dictionary&lt;Integer, Dictionary&gt; parent_dic = new Hashtable();\r\n        Dictionary&lt;String, String&gt; child1 = new Hashtable();\r\n        Dictionary&lt;String, String&gt; child2 = new Hashtable();\r\n\r\n        child1.put(&quot;1&quot;, &quot;one&quot;);\r\n        child1.put(&quot;2&quot;, &quot;two&quot;);\r\n        System.out.println(&quot;Child1&quot; + child1);\r\n\r\n        child2.put(&quot;3&quot;, &quot;three&quot;);\r\n        child2.put(&quot;4&quot;, &quot;four&quot;);\r\n        System.out.println(&quot;Child2&quot; + child2);\r\n\r\n        parent_dic.put(1, child1);\r\n        parent_dic.put(2, child2);\r\n\r\n        System.out.println(&quot;Parent&quot; + parent_dic);\r\n        System.out.println(&quot;test : &quot; + parent_dic.get(1));\r\n        System.out.println(&quot;two : &quot; + parent_dic.get(1).get(&quot;2&quot;));\r\n    }\r\n```","title":"How to retrieve data from nested dictionary in java","body":"<p>I tried to rewrite your code in a way that made more sense to me.</p>\n<p>I've added the use of proper types as well, using raw types in java is dangerous. The last line of my code does what I believe you want. Note the difference between using Integers as keys and Strings as keys.</p>\n<pre><code>\n    public static void main(String[] args) {\n        Dictionary&lt;Integer, Dictionary&gt; parent_dic = new Hashtable();\n        Dictionary&lt;String, String&gt; child1 = new Hashtable();\n        Dictionary&lt;String, String&gt; child2 = new Hashtable();\n\n        child1.put(&quot;1&quot;, &quot;one&quot;);\n        child1.put(&quot;2&quot;, &quot;two&quot;);\n        System.out.println(&quot;Child1&quot; + child1);\n\n        child2.put(&quot;3&quot;, &quot;three&quot;);\n        child2.put(&quot;4&quot;, &quot;four&quot;);\n        System.out.println(&quot;Child2&quot; + child2);\n\n        parent_dic.put(1, child1);\n        parent_dic.put(2, child2);\n\n        System.out.println(&quot;Parent&quot; + parent_dic);\n        System.out.println(&quot;test : &quot; + parent_dic.get(1));\n        System.out.println(&quot;two : &quot; + parent_dic.get(1).get(&quot;2&quot;));\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24881285,"reputation":36,"user_id":18754437,"display_name":"Liam G"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650046580,"creation_date":1650046580,"answer_id":71887510,"question_id":71887053,"body_markdown":"You need to add generic types to your variable declarations (e.g. `Dictionary&lt;Integer, Dictionary&gt; parent_dic = new HashTable&lt;Integer, Dictionary&gt;();`)\r\n\r\nWithout them the compiler tries to add them in, not always successfully. The key and value pairs for your `parent_dic`, `child1`, and `child2` have defaulted to `Object`. You can add anything to them, even a `Random` object or an `ArrayList`. If you try to access the output of your last line by adding `.get(&quot;1&quot;)` it won&#39;t compile, because you are trying to use `get(&quot;1&quot;)` on an `Object`.\r\n\r\nIf you add the types, like `Dictionary&lt;Integer, Dictionary&gt;` you can access the data in the child dictionaries.","title":"How to retrieve data from nested dictionary in java","body":"<p>You need to add generic types to your variable declarations (e.g. <code>Dictionary&lt;Integer, Dictionary&gt; parent_dic = new HashTable&lt;Integer, Dictionary&gt;();</code>)</p>\n<p>Without them the compiler tries to add them in, not always successfully. The key and value pairs for your <code>parent_dic</code>, <code>child1</code>, and <code>child2</code> have defaulted to <code>Object</code>. You can add anything to them, even a <code>Random</code> object or an <code>ArrayList</code>. If you try to access the output of your last line by adding <code>.get(&quot;1&quot;)</code> it won't compile, because you are trying to use <code>get(&quot;1&quot;)</code> on an <code>Object</code>.</p>\n<p>If you add the types, like <code>Dictionary&lt;Integer, Dictionary&gt;</code> you can access the data in the child dictionaries.</p>\n"}],"owner":{"account_id":10455431,"reputation":35,"user_id":7707732,"display_name":"Sarayu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":309,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71887211,"answer_count":2,"score":0,"last_activity_date":1665665570,"creation_date":1650043492,"question_id":71887053,"body_markdown":"I have two dictionaries added into parent dictionary. How to retrieve data from a value (which is a dictionary)\r\n\r\n    import java.util.*;\r\n\r\n    class HelloWorld {\r\n      public static void main(String[] args) {\r\n        int count =2;\r\n        \r\n        Dictionary parent_dic = new Hashtable();\r\n        Dictionary child1 = new Hashtable();\r\n        Dictionary child2 = new Hashtable();\r\n        Dictionary child = new Hashtable();\r\n        \r\n        child1.put(&quot;1&quot;, &quot;one&quot;);\r\n        child1.put(&quot;2&quot;, &quot;two&quot;);\r\n        System.out.println(&quot;Child1&quot; + child1);\r\n        \r\n        child2.put(&quot;3&quot;, &quot;three&quot;);\r\n        child2.put(&quot;4&quot;, &quot;four&quot;);\r\n        System.out.println(&quot;Child2&quot; + child2);\r\n        \r\n       for(int each_c = 1; each_c &lt;= count; each_c++) {\r\n           if(each_c==1) {\r\n               child = child1;\r\n           } else {\r\n               child = child2;\r\n           }\r\n           parent_dic.put(each_c,child);\r\n       }\r\n       \r\n        \r\n        System.out.println(&quot;Parent&quot; + parent_dic);\r\n        System.out.println(&quot;test ::: &quot; + parent_dic.get(1));\r\n        \r\n    }\r\n}\r\n\r\nHow to get value from resultant value (which is dictionary)?\r\n\r\nOutput:\r\n\r\n    Child1{2=two, 1=one}\r\n    Child2{4=four, 3=three}\r\n    Parent{2={4=four, 3=three}, 1={2=two, 1=one}}\r\n    test ::: {2=two, 1=one}\r\n\r\n\r\nHow to get value &quot;two&quot; from above test dictionary.","title":"How to retrieve data from nested dictionary in java","body":"<p>I have two dictionaries added into parent dictionary. How to retrieve data from a value (which is a dictionary)</p>\n<pre><code>import java.util.*;\n\nclass HelloWorld {\n  public static void main(String[] args) {\n    int count =2;\n    \n    Dictionary parent_dic = new Hashtable();\n    Dictionary child1 = new Hashtable();\n    Dictionary child2 = new Hashtable();\n    Dictionary child = new Hashtable();\n    \n    child1.put(&quot;1&quot;, &quot;one&quot;);\n    child1.put(&quot;2&quot;, &quot;two&quot;);\n    System.out.println(&quot;Child1&quot; + child1);\n    \n    child2.put(&quot;3&quot;, &quot;three&quot;);\n    child2.put(&quot;4&quot;, &quot;four&quot;);\n    System.out.println(&quot;Child2&quot; + child2);\n    \n   for(int each_c = 1; each_c &lt;= count; each_c++) {\n       if(each_c==1) {\n           child = child1;\n       } else {\n           child = child2;\n       }\n       parent_dic.put(each_c,child);\n   }\n   \n    \n    System.out.println(&quot;Parent&quot; + parent_dic);\n    System.out.println(&quot;test ::: &quot; + parent_dic.get(1));\n    \n}\n</code></pre>\n<p>}</p>\n<p>How to get value from resultant value (which is dictionary)?</p>\n<p>Output:</p>\n<pre><code>Child1{2=two, 1=one}\nChild2{4=four, 3=three}\nParent{2={4=four, 3=three}, 1={2=two, 1=one}}\ntest ::: {2=two, 1=one}\n</code></pre>\n<p>How to get value &quot;two&quot; from above test dictionary.</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665626767,"creation_date":1665626767,"answer_id":74049760,"question_id":74049345,"body_markdown":"Images can be stored in a variety of places depending on how you code things.  In you&#39;re adapter you&#39;re assuming that you get paths.  That would work if you save them to the filesystem.  That will not work with image resources, as resources are internal to your app, not part of the filesystem.  \r\n\r\nYour code is trying to list all the files in the directory `Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES)`  Which will only work with images stored in the global pictures directory, not images embedded in your app (and isn&#39;t the best way to do that either).\r\n","title":"Android Studio: Where do my images need to be saved for this program to be able to show them in the RecyclerView?","body":"<p>Images can be stored in a variety of places depending on how you code things.  In you're adapter you're assuming that you get paths.  That would work if you save them to the filesystem.  That will not work with image resources, as resources are internal to your app, not part of the filesystem.</p>\n<p>Your code is trying to list all the files in the directory <code>Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES)</code>  Which will only work with images stored in the global pictures directory, not images embedded in your app (and isn't the best way to do that either).</p>\n"}],"owner":{"account_id":26606017,"reputation":1,"user_id":20226834,"display_name":"Rodrigo Nogueira"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665665091,"creation_date":1665622020,"question_id":74049345,"body_markdown":"I am not sure where the images need to be saved for them to appear in the RecyclerView. Should they be in the drawable folder in resources? If so, isn&#39;t the code to input the image files missing? \r\n\r\nI believe they should be saved on the device emulator, but I do not know where to save the image files. Please give me a directory if so.\r\n\r\nThank you!\r\n\r\nBelow are 4 Java classes, MainActivity.java, Item.java, MyRecyclerViewAdapter.java, and DisplayImage.java\r\n\r\nMain Activity\r\n```\r\npackage com.example.gridlayout;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.Manifest;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.os.Bundle;\r\nimport android.os.Environment;\r\nimport android.util.DisplayMetrics;\r\nimport android.view.View;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\n\r\nimport java.io.File;\r\nimport java.util.ArrayList;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    String PIC_PATH =\r\n            Environment.getExternalStoragePublicDirectory(\r\n                    Environment.DIRECTORY_PICTURES).toString();\r\n    private ArrayList&lt;Item&gt; images = new ArrayList&lt;Item&gt;();\r\n    private RecyclerView gallery;\r\n    int columns = 3;\r\n    int PERMISSION_CODE = 1;\r\n\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        gallery = (RecyclerView) findViewById(R.id.gallery);\r\n        gallery.setLayoutManager(new GridLayoutManager(this, columns));\r\n        if (ContextCompat.checkSelfPermission(this,\r\n                Manifest.permission.READ_EXTERNAL_STORAGE)\r\n                != PackageManager.PERMISSION_GRANTED) {\r\n            // Request permission if permission is not granted\r\n            ActivityCompat.requestPermissions(this,\r\n                    new String[]{Manifest.permission.READ_EXTERNAL_STORAGE},\r\n                    PERMISSION_CODE);\r\n        } else {\r\n            updatePictures();\r\n            MyRecyclerViewAdapter myAdapter = new MyRecyclerViewAdapter(R.layout.layout_row, images);\r\n\r\n            gallery.setAdapter(myAdapter);\r\n        }\r\n    }\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, String permissions[], int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n\r\n        if (requestCode == PERMISSION_CODE) {\r\n            if (grantResults.length &gt; 0\r\n                    &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                updatePictures();\r\n                MyRecyclerViewAdapter myAdapter = new\r\n                        MyRecyclerViewAdapter(R.layout.layout_row, images);\r\n                gallery.setAdapter(myAdapter);\r\n            }\r\n        }\r\n    }\r\n    public void updatePictures() {\r\n        try {\r\n            File f = new File(PIC_PATH);\r\n            File[] files = f.listFiles();\r\n            for (int i = 0; i &lt; files.length; i++) {\r\n                if (files[i].getName().endsWith(&quot;.jpg&quot;)) {\r\n                    images.add(new Item(files[i].getAbsolutePath()));\r\n                }\r\n            }\r\n        }\r\n        catch (Exception e) {\r\n        }\r\n    }\r\n\r\n} \r\n```\r\nStart of Item\r\n```\r\npackage com.example.gridlayout;\r\n\r\npublic class Item {\r\n    private String imagePath;\r\n\r\n    public Item(String imagePath) {\r\n        this.imagePath = imagePath;\r\n    }\r\n\r\n    public String getImagePath() {\r\n        return imagePath;\r\n    }\r\n} \r\n```\r\n\r\n\r\nMyRecyclerViewAdapter\r\n```\r\npackage com.example.gridlayout;\r\n\r\nimport android.content.Intent;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.BitmapFactory;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageView;\r\n\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport java.util.ArrayList;\r\n\r\nclass MyRecyclerViewAdapter extends RecyclerView.Adapter&lt;MyRecyclerViewAdapter.ViewHolder&gt; {\r\n\r\n    private int listItemLayout;\r\n    private ArrayList&lt;Item&gt; itemList;\r\n    private String [] imagePaths;\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        if (itemList == null)\r\n            return 0;\r\n        else\r\n            return itemList.size();\r\n    }\r\n\r\n    // Constructor of the class\r\n    public MyRecyclerViewAdapter(int layoutId, ArrayList&lt;Item&gt; itemList) {\r\n        listItemLayout = layoutId;\r\n        this.itemList = itemList;\r\n        imagePaths = new String[itemList.size()];\r\n        for (int i = 0; i &lt; imagePaths.length; i++)\r\n            imagePaths[i] = itemList.get(i).getImagePath();\r\n    }\r\n\r\n    // specify the row layout file and click for each row\r\n    @Override\r\n    public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(parent.getContext())\r\n                .inflate(listItemLayout, parent, false);\r\n        ViewHolder myViewHolder = new ViewHolder(view);\r\n        return myViewHolder;\r\n    }\r\n\r\n\r\n    // load data in each row element\r\n    @Override\r\n    public void onBindViewHolder(final ViewHolder holder, final int listPosition) {\r\n        Bitmap bm = BitmapFactory.decodeFile(itemList.get(listPosition).getImagePath());\r\n        holder.image.setImageBitmap(bm);\r\n        holder.image.setTag(itemList.get(listPosition).getImagePath());\r\n    }\r\n\r\n    // inner class to initialize the views of rows\r\n    class ViewHolder extends RecyclerView.ViewHolder\r\n            implements View.OnClickListener {\r\n\r\n        public ImageView image;\r\n\r\n\r\n        public ViewHolder(View itemView) {\r\n            super(itemView);\r\n            itemView.setOnClickListener(this);\r\n            image = (ImageView) itemView.findViewById(R.id.imageView);\r\n            image.setScaleType(ImageView.ScaleType.CENTER_CROP);\r\n\r\n        }\r\n        @Override\r\n        public void onClick(View view) {\r\n            Intent in = new Intent(view.getContext(), DisplayImage.class);\r\n            in.putExtra(&quot;selectedIndex&quot;, getLayoutPosition());\r\n            in.putExtra(&quot;imagePathArray&quot;, imagePaths);\r\n            view.getContext().startActivity(in);\r\n        }\r\n    }\r\n} \r\n```\r\n\r\nDisplay Image\r\n```\r\npackage com.example.gridlayout;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.BitmapFactory;\r\nimport android.os.Bundle;\r\nimport android.util.DisplayMetrics;\r\nimport android.view.MotionEvent;\r\nimport android.view.View;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\n\r\npublic class DisplayImage extends AppCompatActivity {\r\n\r\n    private double x1=0, x2=0;\r\n    private int selectedIndex = -1;\r\n    String[] imagePathArray = null;\r\n\r\n    @SuppressLint(&quot;ClickableViewAccessibility&quot;)\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_display_image);\r\n        ImageView fullPicture = (ImageView) findViewById(R.id.fullPicture);\r\n\r\n        Bundle extras = getIntent().getExtras();\r\n        if (extras != null) {\r\n            selectedIndex = extras.getInt(&quot;selectedIndex&quot;);\r\n            imagePathArray = extras.getStringArray(&quot;imagePathArray&quot;);\r\n        }\r\n\r\n        if (imagePathArray != null &amp;&amp; selectedIndex &gt;= 0\r\n                &amp;&amp; selectedIndex &lt; imagePathArray.length) {\r\n\r\n            Bitmap bm = BitmapFactory.decodeFile(imagePathArray[selectedIndex]);\r\n            fullPicture.setImageBitmap(bm);\r\n        }\r\n\r\n        fullPicture.setOnTouchListener(new View.OnTouchListener() {\r\n            public boolean onTouch(View v, MotionEvent event) {\r\n                double distanceThreshold = 100;\r\n\r\n                if (event.getAction() == MotionEvent.ACTION_DOWN) {\r\n                    x1 = event.getX();\r\n                }\r\n                if (event.getAction() == MotionEvent.ACTION_UP) {\r\n                    x2 = event.getX();\r\n                    if ((x1 - x2) &gt; distanceThreshold) {    // if right to left sweep event\r\n                        selectedIndex++;\r\n                        if (selectedIndex &gt; imagePathArray.length - 1)\r\n                            selectedIndex = imagePathArray.length - 1;\r\n                    }\r\n                    if ((x2 - x1) &gt; distanceThreshold) {    //left to right sweep event\r\n                        selectedIndex--;\r\n                        if (selectedIndex &lt; 0) selectedIndex = 0;\r\n                    }\r\n                    Bitmap bm = BitmapFactory.decodeFile(imagePathArray[selectedIndex]);\r\n                    fullPicture.setImageBitmap(bm);\r\n                }\r\n                return true;\r\n            }\r\n        });\r\n    }\r\n} \r\n```","title":"Android Studio: Where do my images need to be saved for this program to be able to show them in the RecyclerView?","body":"<p>I am not sure where the images need to be saved for them to appear in the RecyclerView. Should they be in the drawable folder in resources? If so, isn't the code to input the image files missing?</p>\n<p>I believe they should be saved on the device emulator, but I do not know where to save the image files. Please give me a directory if so.</p>\n<p>Thank you!</p>\n<p>Below are 4 Java classes, MainActivity.java, Item.java, MyRecyclerViewAdapter.java, and DisplayImage.java</p>\n<p>Main Activity</p>\n<pre><code>package com.example.gridlayout;\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.app.ActivityCompat;\nimport androidx.core.content.ContextCompat;\nimport androidx.recyclerview.widget.GridLayoutManager;\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport android.Manifest;\nimport android.content.Intent;\nimport android.content.pm.PackageManager;\nimport android.os.Bundle;\nimport android.os.Environment;\nimport android.util.DisplayMetrics;\nimport android.view.View;\nimport android.widget.ImageView;\nimport android.widget.LinearLayout;\n\nimport java.io.File;\nimport java.util.ArrayList;\n\npublic class MainActivity extends AppCompatActivity {\n    String PIC_PATH =\n            Environment.getExternalStoragePublicDirectory(\n                    Environment.DIRECTORY_PICTURES).toString();\n    private ArrayList&lt;Item&gt; images = new ArrayList&lt;Item&gt;();\n    private RecyclerView gallery;\n    int columns = 3;\n    int PERMISSION_CODE = 1;\n\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        gallery = (RecyclerView) findViewById(R.id.gallery);\n        gallery.setLayoutManager(new GridLayoutManager(this, columns));\n        if (ContextCompat.checkSelfPermission(this,\n                Manifest.permission.READ_EXTERNAL_STORAGE)\n                != PackageManager.PERMISSION_GRANTED) {\n            // Request permission if permission is not granted\n            ActivityCompat.requestPermissions(this,\n                    new String[]{Manifest.permission.READ_EXTERNAL_STORAGE},\n                    PERMISSION_CODE);\n        } else {\n            updatePictures();\n            MyRecyclerViewAdapter myAdapter = new MyRecyclerViewAdapter(R.layout.layout_row, images);\n\n            gallery.setAdapter(myAdapter);\n        }\n    }\n    @Override\n    public void onRequestPermissionsResult(int requestCode, String permissions[], int[] grantResults) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n\n        if (requestCode == PERMISSION_CODE) {\n            if (grantResults.length &gt; 0\n                    &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                updatePictures();\n                MyRecyclerViewAdapter myAdapter = new\n                        MyRecyclerViewAdapter(R.layout.layout_row, images);\n                gallery.setAdapter(myAdapter);\n            }\n        }\n    }\n    public void updatePictures() {\n        try {\n            File f = new File(PIC_PATH);\n            File[] files = f.listFiles();\n            for (int i = 0; i &lt; files.length; i++) {\n                if (files[i].getName().endsWith(&quot;.jpg&quot;)) {\n                    images.add(new Item(files[i].getAbsolutePath()));\n                }\n            }\n        }\n        catch (Exception e) {\n        }\n    }\n\n} \n</code></pre>\n<p>Start of Item</p>\n<pre><code>package com.example.gridlayout;\n\npublic class Item {\n    private String imagePath;\n\n    public Item(String imagePath) {\n        this.imagePath = imagePath;\n    }\n\n    public String getImagePath() {\n        return imagePath;\n    }\n} \n</code></pre>\n<p>MyRecyclerViewAdapter</p>\n<pre><code>package com.example.gridlayout;\n\nimport android.content.Intent;\nimport android.graphics.Bitmap;\nimport android.graphics.BitmapFactory;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.ImageView;\n\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport java.util.ArrayList;\n\nclass MyRecyclerViewAdapter extends RecyclerView.Adapter&lt;MyRecyclerViewAdapter.ViewHolder&gt; {\n\n    private int listItemLayout;\n    private ArrayList&lt;Item&gt; itemList;\n    private String [] imagePaths;\n\n    @Override\n    public int getItemCount() {\n        if (itemList == null)\n            return 0;\n        else\n            return itemList.size();\n    }\n\n    // Constructor of the class\n    public MyRecyclerViewAdapter(int layoutId, ArrayList&lt;Item&gt; itemList) {\n        listItemLayout = layoutId;\n        this.itemList = itemList;\n        imagePaths = new String[itemList.size()];\n        for (int i = 0; i &lt; imagePaths.length; i++)\n            imagePaths[i] = itemList.get(i).getImagePath();\n    }\n\n    // specify the row layout file and click for each row\n    @Override\n    public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        View view = LayoutInflater.from(parent.getContext())\n                .inflate(listItemLayout, parent, false);\n        ViewHolder myViewHolder = new ViewHolder(view);\n        return myViewHolder;\n    }\n\n\n    // load data in each row element\n    @Override\n    public void onBindViewHolder(final ViewHolder holder, final int listPosition) {\n        Bitmap bm = BitmapFactory.decodeFile(itemList.get(listPosition).getImagePath());\n        holder.image.setImageBitmap(bm);\n        holder.image.setTag(itemList.get(listPosition).getImagePath());\n    }\n\n    // inner class to initialize the views of rows\n    class ViewHolder extends RecyclerView.ViewHolder\n            implements View.OnClickListener {\n\n        public ImageView image;\n\n\n        public ViewHolder(View itemView) {\n            super(itemView);\n            itemView.setOnClickListener(this);\n            image = (ImageView) itemView.findViewById(R.id.imageView);\n            image.setScaleType(ImageView.ScaleType.CENTER_CROP);\n\n        }\n        @Override\n        public void onClick(View view) {\n            Intent in = new Intent(view.getContext(), DisplayImage.class);\n            in.putExtra(&quot;selectedIndex&quot;, getLayoutPosition());\n            in.putExtra(&quot;imagePathArray&quot;, imagePaths);\n            view.getContext().startActivity(in);\n        }\n    }\n} \n</code></pre>\n<p>Display Image</p>\n<pre><code>package com.example.gridlayout;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.annotation.SuppressLint;\nimport android.graphics.Bitmap;\nimport android.graphics.BitmapFactory;\nimport android.os.Bundle;\nimport android.util.DisplayMetrics;\nimport android.view.MotionEvent;\nimport android.view.View;\nimport android.widget.ImageView;\nimport android.widget.LinearLayout;\n\npublic class DisplayImage extends AppCompatActivity {\n\n    private double x1=0, x2=0;\n    private int selectedIndex = -1;\n    String[] imagePathArray = null;\n\n    @SuppressLint(&quot;ClickableViewAccessibility&quot;)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_display_image);\n        ImageView fullPicture = (ImageView) findViewById(R.id.fullPicture);\n\n        Bundle extras = getIntent().getExtras();\n        if (extras != null) {\n            selectedIndex = extras.getInt(&quot;selectedIndex&quot;);\n            imagePathArray = extras.getStringArray(&quot;imagePathArray&quot;);\n        }\n\n        if (imagePathArray != null &amp;&amp; selectedIndex &gt;= 0\n                &amp;&amp; selectedIndex &lt; imagePathArray.length) {\n\n            Bitmap bm = BitmapFactory.decodeFile(imagePathArray[selectedIndex]);\n            fullPicture.setImageBitmap(bm);\n        }\n\n        fullPicture.setOnTouchListener(new View.OnTouchListener() {\n            public boolean onTouch(View v, MotionEvent event) {\n                double distanceThreshold = 100;\n\n                if (event.getAction() == MotionEvent.ACTION_DOWN) {\n                    x1 = event.getX();\n                }\n                if (event.getAction() == MotionEvent.ACTION_UP) {\n                    x2 = event.getX();\n                    if ((x1 - x2) &gt; distanceThreshold) {    // if right to left sweep event\n                        selectedIndex++;\n                        if (selectedIndex &gt; imagePathArray.length - 1)\n                            selectedIndex = imagePathArray.length - 1;\n                    }\n                    if ((x2 - x1) &gt; distanceThreshold) {    //left to right sweep event\n                        selectedIndex--;\n                        if (selectedIndex &lt; 0) selectedIndex = 0;\n                    }\n                    Bitmap bm = BitmapFactory.decodeFile(imagePathArray[selectedIndex]);\n                    fullPicture.setImageBitmap(bm);\n                }\n                return true;\n            }\n        });\n    }\n} \n</code></pre>\n"},{"tags":["java","android","uri","documentfile"],"comments":[{"owner":{"account_id":17597757,"reputation":1107,"user_id":12768366,"display_name":"Md Hanif"},"score":1,"creation_date":1601203785,"post_id":64087565,"comment_id":113327721,"body_markdown":"Yes this is due to the newly introduced Scope Storage in android Q. You can add this line in your manifest `android:requestLegacyExternalStorage=&quot;true&quot;` and it should work. but remember this is temporary solution and you need to eventually work with scope storage as this newly added line will be ignored after android sdk version 30","body":"Yes this is due to the newly introduced Scope Storage in android Q. You can add this line in your manifest <code>android:requestLegacyExternalStorage=&quot;true&quot;</code> and it should work. but remember this is temporary solution and you need to eventually work with scope storage as this newly added line will be ignored after android sdk version 30"},{"owner":{"account_id":12365223,"reputation":1526,"user_id":9017620,"accept_rate":55,"display_name":"Vince VD"},"score":0,"creation_date":1601203957,"post_id":64087565,"comment_id":113327756,"body_markdown":"@AppDev. Yeah i already know about that flag but isn&#39;t there a way to do this without using this temporary solution?","body":"@AppDev. Yeah i already know about that flag but isn&#39;t there a way to do this without using this temporary solution?"},{"owner":{"account_id":12365223,"reputation":1526,"user_id":9017620,"accept_rate":55,"display_name":"Vince VD"},"score":0,"creation_date":1601204187,"post_id":64087565,"comment_id":113327805,"body_markdown":"@AppDev. Im also confused by why it works for some files and some return this error.","body":"@AppDev. Im also confused by why it works for some files and some return this error."},{"owner":{"account_id":17597757,"reputation":1107,"user_id":12768366,"display_name":"Md Hanif"},"score":0,"creation_date":1601204506,"post_id":64087565,"comment_id":113327877,"body_markdown":"Even I found this permission error for camera and my gallery URI&#39;s and I also faced this issues only on some of the times like for some devices I was getting proper image data in `onActivity result`  while in some other devices i was getting this Security Exception. Although I got something to workaround with my issue but here&#39;s a different case. Not sure about &quot;Why it works for some files&quot;.","body":"Even I found this permission error for camera and my gallery URI&#39;s and I also faced this issues only on some of the times like for some devices I was getting proper image data in <code>onActivity result</code>  while in some other devices i was getting this Security Exception. Although I got something to workaround with my issue but here&#39;s a different case. Not sure about &quot;Why it works for some files&quot;."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1601204722,"post_id":64087565,"comment_id":113327937,"body_markdown":"`getDocumentUri(Uri mediaUri)` Please start your post with the exact value of mediaUri. And tell how your app obtained it. Also tell if it is from a file which your app created. Put all in your post. Start your post with it.","body":"<code>getDocumentUri(Uri mediaUri)</code> Please start your post with the exact value of mediaUri. And tell how your app obtained it. Also tell if it is from a file which your app created. Put all in your post. Start your post with it."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1601204921,"post_id":64087565,"comment_id":113327985,"body_markdown":"Also tell, if you have a media store uri, why you would first convert it to a document uri.","body":"Also tell, if you have a media store uri, why you would first convert it to a document uri."},{"owner":{"account_id":12365223,"reputation":1526,"user_id":9017620,"accept_rate":55,"display_name":"Vince VD"},"score":0,"creation_date":1601214179,"post_id":64087565,"comment_id":113330341,"body_markdown":"@blackapps I added the value for mediaUri in my post, &quot;why you would first convert it to a document uri?&quot;, so i can delete the file with DocumentFile from the storage.","body":"@blackapps I added the value for mediaUri in my post, &quot;why you would first convert it to a document uri?&quot;, so i can delete the file with DocumentFile from the storage."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1601225371,"post_id":64087565,"comment_id":113333748,"body_markdown":"Why dont you just delete using the media store if it is a media store uri? I asked that before.","body":"Why dont you just delete using the media store if it is a media store uri? I asked that before."},{"owner":{"account_id":12365223,"reputation":1526,"user_id":9017620,"accept_rate":55,"display_name":"Vince VD"},"score":0,"creation_date":1601310349,"post_id":64087565,"comment_id":113361279,"body_markdown":"@blackapps do you mean with ContentResolver? That doesn&#39;t work, it deletes the entry in the MediaStore and not the file itself.","body":"@blackapps do you mean with ContentResolver? That doesn&#39;t work, it deletes the entry in the MediaStore and not the file itself."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1601316412,"post_id":64087565,"comment_id":113363796,"body_markdown":"In Android Q the file is also deleted. Below Q you have to do it yourself yet.","body":"In Android Q the file is also deleted. Below Q you have to do it yourself yet."},{"owner":{"account_id":12365223,"reputation":1526,"user_id":9017620,"accept_rate":55,"display_name":"Vince VD"},"score":0,"creation_date":1602526739,"post_id":64087565,"comment_id":113743034,"body_markdown":"@blackapps Can you post an example then? Because i&#39;m pretty sure thats not true `getContentResolver().delete(mediaUri, null, null);` doesn&#39;t delete the physical file. It only deletes the database entry and will reappear after rebooting device.","body":"@blackapps Can you post an example then? Because i&#39;m pretty sure thats not true <code>getContentResolver().delete(mediaUri, null, null);</code> doesn&#39;t delete the physical file. It only deletes the database entry and will reappear after rebooting device."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1602576642,"post_id":64087565,"comment_id":113756648,"body_markdown":"You did not tell which uri you tried to delete and i asked you before.","body":"You did not tell which uri you tried to delete and i asked you before."},{"owner":{"account_id":12365223,"reputation":1526,"user_id":9017620,"accept_rate":55,"display_name":"Vince VD"},"score":0,"creation_date":1602792921,"post_id":64087565,"comment_id":113840254,"body_markdown":"@blackapps I already told you what it was, look at the 7th comment. The Uri i&#39;m trying to delete is a content Uri obtained with `ContentUris.withAppendedId();`","body":"@blackapps I already told you what it was, look at the 7th comment. The Uri i&#39;m trying to delete is a content Uri obtained with <code>ContentUris.withAppendedId();</code>"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1602793513,"post_id":64087565,"comment_id":113840478,"body_markdown":"If SAF has never given you permission for that file or its directory you cannot do much. Further you did not ppst reproducable code.","body":"If SAF has never given you permission for that file or its directory you cannot do much. Further you did not ppst reproducable code."}],"answers":[{"tags":[],"owner":{"account_id":14338249,"reputation":3125,"user_id":10357086,"display_name":"Dev4Life"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665664998,"creation_date":1665664998,"answer_id":74055992,"question_id":64087565,"body_markdown":"Try this method. You need to take the persistable uri permission using SAF of the parent folder, then pass the uri &amp; name of the file to delete. (I have a model class to handle both.)\r\n\r\n    public void deleteAPI29(ArrayList&lt;Media&gt; mediaList) {\r\n            Uri persistedUri = getContentResolver().getPersistedUriPermissions().get(0).getUri();\r\n            DocumentFile documentFile = DocumentFile.fromTreeUri(this, persistedUri);\r\n            for (int i = 0; i &lt; mediaList.size(); i++) {\r\n                File file = new File(mediaList.get(i).getPath());\r\n                DocumentFile nextDocument = documentFile.findFile(file.getName());\r\n                try {\r\n                    DocumentsContract.deleteDocument(getContentResolver(), nextDocument.getUri());\r\n                } catch (FileNotFoundException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }","title":"How to delete files with DocumentFile in Android Q?","body":"<p>Try this method. You need to take the persistable uri permission using SAF of the parent folder, then pass the uri &amp; name of the file to delete. (I have a model class to handle both.)</p>\n<pre><code>public void deleteAPI29(ArrayList&lt;Media&gt; mediaList) {\n        Uri persistedUri = getContentResolver().getPersistedUriPermissions().get(0).getUri();\n        DocumentFile documentFile = DocumentFile.fromTreeUri(this, persistedUri);\n        for (int i = 0; i &lt; mediaList.size(); i++) {\n            File file = new File(mediaList.get(i).getPath());\n            DocumentFile nextDocument = documentFile.findFile(file.getName());\n            try {\n                DocumentsContract.deleteDocument(getContentResolver(), nextDocument.getUri());\n            } catch (FileNotFoundException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":12365223,"reputation":1526,"user_id":9017620,"accept_rate":55,"display_name":"Vince VD"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":776,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1665664998,"creation_date":1601203559,"question_id":64087565,"body_markdown":"**Method for deleting file with document uri**\r\n\r\n    private void getDocumentUri(Uri mediaUri){\r\n            try {\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O &amp;&amp; getActivity() != null) {\r\n                    Uri documentUri = MediaStore.getDocumentUri(getActivity(), mediaUri);\r\n                    if (documentUri != null) {\r\n                        Log.d(TAG,&quot;getDocumentUri: &quot;+documentUri);\r\n                        DocumentFile documentFile = DocumentFile.fromSingleUri(getActivity(), documentUri);\r\n                        if (documentFile != null) {\r\n                            Log.d(TAG, &quot;getDocumentUri documentFile not null: &quot; + documentFile);\r\n                            if (documentFile.delete()) {\r\n                                Log.i(TAG, &quot;getDocumentUri Delete successful&quot;);\r\n                            } else {\r\n                                Log.i(TAG, &quot;getDocumentUri Delete unsuccessful&quot;);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }catch(Exception e){\r\n                Log.e(TAG,&quot;getDocumentUri error: &quot; + e);\r\n            }\r\n    }\r\n\r\n**Logcat error**\r\n\r\n    SecurityException: The app is not given any access to the document under path /storage/emulated/0/test/song.mp3 with permissions granted in [UriPermission {uri=content://com.android.externalstorage.documents/tree/primary%3AMusic, modeFlags=3, persistedTime=1601203263354}]\r\n\r\n\r\nWeird thing is that for some files this works and for some it gives this error and all audio files are in the same place on the internal storage.\r\n\r\n\r\n**EDIT**\r\n\r\n**mediaUri&#39;s** value is obtained with `ContentUris.withAppendedId(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,cursor.getLong(cursor.getColumnIndexOrThrow(MediaStore.Audio.Media._ID)));`\r\n\r\nAlso the files i&#39;m trying to delete are not created by my app\r\n\r\n\r\n","title":"How to delete files with DocumentFile in Android Q?","body":"<p><strong>Method for deleting file with document uri</strong></p>\n<pre><code>private void getDocumentUri(Uri mediaUri){\n        try {\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O &amp;&amp; getActivity() != null) {\n                Uri documentUri = MediaStore.getDocumentUri(getActivity(), mediaUri);\n                if (documentUri != null) {\n                    Log.d(TAG,&quot;getDocumentUri: &quot;+documentUri);\n                    DocumentFile documentFile = DocumentFile.fromSingleUri(getActivity(), documentUri);\n                    if (documentFile != null) {\n                        Log.d(TAG, &quot;getDocumentUri documentFile not null: &quot; + documentFile);\n                        if (documentFile.delete()) {\n                            Log.i(TAG, &quot;getDocumentUri Delete successful&quot;);\n                        } else {\n                            Log.i(TAG, &quot;getDocumentUri Delete unsuccessful&quot;);\n                        }\n                    }\n                }\n            }\n        }catch(Exception e){\n            Log.e(TAG,&quot;getDocumentUri error: &quot; + e);\n        }\n}\n</code></pre>\n<p><strong>Logcat error</strong></p>\n<pre><code>SecurityException: The app is not given any access to the document under path /storage/emulated/0/test/song.mp3 with permissions granted in [UriPermission {uri=content://com.android.externalstorage.documents/tree/primary%3AMusic, modeFlags=3, persistedTime=1601203263354}]\n</code></pre>\n<p>Weird thing is that for some files this works and for some it gives this error and all audio files are in the same place on the internal storage.</p>\n<p><strong>EDIT</strong></p>\n<p><strong>mediaUri's</strong> value is obtained with <code>ContentUris.withAppendedId(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,cursor.getLong(cursor.getColumnIndexOrThrow(MediaStore.Audio.Media._ID)));</code></p>\n<p>Also the files i'm trying to delete are not created by my app</p>\n"},{"tags":["java","spring","spring-boot","httpclient","resttemplate"],"answers":[{"tags":[],"owner":{"account_id":2469660,"reputation":154,"user_id":2151879,"display_name":"Liran"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665664907,"creation_date":1665664907,"answer_id":74055975,"question_id":70931260,"body_markdown":"ResourceAccessException is commonly wrapping IOException coming from Spring RestTemplate, where HttpClient is not from Spring.\r\n\r\nThis is only one of the cases to be possibly retried, in addition to cases like HTTP 503 Service Unavailable status response.\r\n\r\nSolution based on RestTemplate/HttpClient while combining all cases can be tricky.\r\n\r\nTo add retry for ResourceAccessException, related topic may help:  \r\n[Solution based on Spring RetryTemplate](https://stackoverflow.com/questions/66639819/how-to-retry-restapi-connection-if-it-fails-for-first-time-in-resttemplate/73973394#73973394) \r\n","title":"Retry in RestTemplate not working against ResourceAccessException","body":"<p>ResourceAccessException is commonly wrapping IOException coming from Spring RestTemplate, where HttpClient is not from Spring.</p>\n<p>This is only one of the cases to be possibly retried, in addition to cases like HTTP 503 Service Unavailable status response.</p>\n<p>Solution based on RestTemplate/HttpClient while combining all cases can be tricky.</p>\n<p>To add retry for ResourceAccessException, related topic may help:<br />\n<a href=\"https://stackoverflow.com/questions/66639819/how-to-retry-restapi-connection-if-it-fails-for-first-time-in-resttemplate/73973394#73973394\">Solution based on Spring RetryTemplate</a></p>\n"}],"owner":{"account_id":2274545,"reputation":135,"user_id":2001165,"accept_rate":0,"display_name":"user2001165"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":727,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1665664907,"creation_date":1643654846,"question_id":70931260,"body_markdown":"My retry handler not working against ResourceAccessException. This only works against IOException and its sub-type. I even tried adding interceptor but no luck. Any idea how to add retry for ResourceAccessException???\r\n\r\n    @Bean\r\n    public ClientHttpRequestFactory clientFactory() {\r\n        HttpClient httpClient = HttpClients.custom()            \r\n            .setRetryHandler((exception, executionCount, context) -&gt; {\r\n                if (executionCount &gt; 3) {\r\n                    log.warn(&quot;Maximum retries {} reached&quot;, 3);\r\n                    return false;\r\n                }\r\n                if (&lt;some condition for retry&gt;) {\r\n                    log.warn(&quot;Retry {}&quot;, executionCount);\r\n                    return true;\r\n                }\r\n                return false;\r\n            })\r\n            .build();\r\n    \r\n        return new HttpComponentsClientHttpRequestFactory(httpClient);\r\n    }\r\n    @Bean\r\n    public RestTemplate customRestTemplate(@Qualifier(&quot;clientFactory&quot;) ClientHttpRequestFactory clientFactory){ \r\n        return new RestTemplate(clientFactory);\r\n    }\r\n\r\n","title":"Retry in RestTemplate not working against ResourceAccessException","body":"<p>My retry handler not working against ResourceAccessException. This only works against IOException and its sub-type. I even tried adding interceptor but no luck. Any idea how to add retry for ResourceAccessException???</p>\n<pre><code>@Bean\npublic ClientHttpRequestFactory clientFactory() {\n    HttpClient httpClient = HttpClients.custom()            \n        .setRetryHandler((exception, executionCount, context) -&gt; {\n            if (executionCount &gt; 3) {\n                log.warn(&quot;Maximum retries {} reached&quot;, 3);\n                return false;\n            }\n            if (&lt;some condition for retry&gt;) {\n                log.warn(&quot;Retry {}&quot;, executionCount);\n                return true;\n            }\n            return false;\n        })\n        .build();\n\n    return new HttpComponentsClientHttpRequestFactory(httpClient);\n}\n@Bean\npublic RestTemplate customRestTemplate(@Qualifier(&quot;clientFactory&quot;) ClientHttpRequestFactory clientFactory){ \n    return new RestTemplate(clientFactory);\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","jpa","spring-data-jpa"],"answers":[{"comments":[{"owner":{"account_id":24566710,"reputation":47,"user_id":18473757,"display_name":"Tokoro-San"},"score":0,"creation_date":1665664647,"post_id":74055300,"comment_id":130755624,"body_markdown":"Thank you very much for your answer. I tested it by adding the mappedBy but I get an other error and I think it&#39;s about serialization : : Cannot call sendError() after the response has been committed","body":"Thank you very much for your answer. I tested it by adding the mappedBy but I get an other error and I think it&#39;s about serialization : : Cannot call sendError() after the response has been committed"},{"owner":{"account_id":24566710,"reputation":47,"user_id":18473757,"display_name":"Tokoro-San"},"score":0,"creation_date":1665665003,"post_id":74055300,"comment_id":130755753,"body_markdown":"I corrected it with putting the JsonIgnore i was looking for it. Thank you very much for your help you&#39;re a life savior !","body":"I corrected it with putting the JsonIgnore i was looking for it. Thank you very much for your help you&#39;re a life savior !"}],"tags":[],"owner":{"account_id":25822,"reputation":78757,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1665661937,"creation_date":1665661937,"answer_id":74055300,"question_id":74054952,"body_markdown":"You have two separate relationships between `ActivityCategory` and `Activity` they are completely unrelated.\r\n\r\nIf you want on to be the inverse of the other you have to add a `mappedBy` attribute to the `@ManyToOne` or `@OneToMany` annotation. \r\n\r\nNote that the side without the `mappedBy` attribute defines what will be persisted to the database while the other side will mirror that information after it got reloaded from the database, which won&#39;t happen within a single transaction due to the 1st level cache.\r\n\r\nFor more details read up on first level cache and on bidirectional relationship.","title":"SPRING BOOT - @OneToMany and my Set&lt;&gt; is empty","body":"<p>You have two separate relationships between <code>ActivityCategory</code> and <code>Activity</code> they are completely unrelated.</p>\n<p>If you want on to be the inverse of the other you have to add a <code>mappedBy</code> attribute to the <code>@ManyToOne</code> or <code>@OneToMany</code> annotation.</p>\n<p>Note that the side without the <code>mappedBy</code> attribute defines what will be persisted to the database while the other side will mirror that information after it got reloaded from the database, which won't happen within a single transaction due to the 1st level cache.</p>\n<p>For more details read up on first level cache and on bidirectional relationship.</p>\n"},{"comments":[{"owner":{"account_id":24566710,"reputation":47,"user_id":18473757,"display_name":"Tokoro-San"},"score":0,"creation_date":1665664710,"post_id":74055861,"comment_id":130755646,"body_markdown":"Thank you very much for your answer. I tested it but I get an error when doing a GET on categories : : Cannot call sendError() after the response has been committed. Do I need to remove the ManyToOne on the Activity.java ?","body":"Thank you very much for your answer. I tested it but I get an error when doing a GET on categories : : Cannot call sendError() after the response has been committed. Do I need to remove the ManyToOne on the Activity.java ?"},{"owner":{"account_id":24566710,"reputation":47,"user_id":18473757,"display_name":"Tokoro-San"},"score":0,"creation_date":1665665115,"post_id":74055861,"comment_id":130755799,"body_markdown":"I just added a JsonIgnore. Thank you very much for your answer I&#39;ll put the question as solved. Thank you very much you and @jens-schauder","body":"I just added a JsonIgnore. Thank you very much for your answer I&#39;ll put the question as solved. Thank you very much you and @jens-schauder"},{"owner":{"account_id":25822,"reputation":78757,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"score":0,"creation_date":1665665761,"post_id":74055861,"comment_id":130756056,"body_markdown":"@Tokoro-San glad we could help. Please consider up voting helpful answers","body":"@Tokoro-San glad we could help. Please consider up voting helpful answers"},{"owner":{"account_id":3592539,"reputation":2396,"user_id":2998222,"display_name":"Issam El-atif"},"score":0,"creation_date":1665669084,"post_id":74055861,"comment_id":130757338,"body_markdown":"@Tokoro-San glad to help. Welcome to the stackoverflow community","body":"@Tokoro-San glad to help. Welcome to the stackoverflow community"}],"tags":[],"owner":{"account_id":3592539,"reputation":2396,"user_id":2998222,"display_name":"Issam El-atif"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665664397,"creation_date":1665664397,"answer_id":74055861,"question_id":74054952,"body_markdown":"To add to [Jens Schauder][1] answer (very good explanatory answer by the way).\r\n\r\n`@OneToMany` should know how to map `ActivityCategory` and `Activity`. This can be done like this :\r\n\r\n    @OneToMany(mappedBy = &quot;activityCategory&quot;, targetEntity = Activity.class,\r\n    cascade = CascadeType.ALL,\r\n    fetch = FetchType.EAGER)\r\n    private Set&lt;Activity&gt; activities;\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/66686/jens-schauder","title":"SPRING BOOT - @OneToMany and my Set&lt;&gt; is empty","body":"<p>To add to <a href=\"https://stackoverflow.com/users/66686/jens-schauder\">Jens Schauder</a> answer (very good explanatory answer by the way).</p>\n<p><code>@OneToMany</code> should know how to map <code>ActivityCategory</code> and <code>Activity</code>. This can be done like this :</p>\n<pre><code>@OneToMany(mappedBy = &quot;activityCategory&quot;, targetEntity = Activity.class,\ncascade = CascadeType.ALL,\nfetch = FetchType.EAGER)\nprivate Set&lt;Activity&gt; activities;\n</code></pre>\n"}],"owner":{"account_id":24566710,"reputation":47,"user_id":18473757,"display_name":"Tokoro-San"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":629,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74055300,"answer_count":2,"score":0,"last_activity_date":1665664519,"creation_date":1665660261,"question_id":74054952,"body_markdown":"I ask this question because my OneToMany don&#39;t add the objects into my set. I would like to know if I made an error or if it&#39;s something that I&#39;ve missed in the configurations. Here is my code :\r\n\r\napplication.properties :\r\n```java\r\nspring.mail.host=smtp.gmail.com\r\nspring.mail.port=587\r\nspring.mail.username=${SMTP_SPREE_USERNAME}\r\nspring.mail.password=${SMTP_SPREE_PASSWORD}\r\nspring.mail.properties.mail.smtp.auth=true\r\nspring.mail.properties.mail.smtp.starttls.enable=true\r\n\r\nserver.servlet.context-path=/api\r\nspring.datasource.url=jdbc:mysql://${MYSQL_HOST:localhost}:3306/Workshop\r\nspring.datasource.username=${SPREE_DB_USERNAME}\r\nspring.datasource.password=${SPREE_DB_PASSWORD}\r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL8Dialect\r\nspring.jpa.show-sql=true\r\nspring.jpa.hibernate.ddl-auto=update\r\n\r\njwt.secret=${SPREE_JWT_SECRET}\r\n```\r\n\r\nActivityCategory.java : \r\n```java\r\npackage com.spreeapi.spree.models;\r\n\r\nimport lombok.Getter;\r\nimport lombok.Setter;\r\n\r\nimport javax.persistence.*;\r\nimport java.util.Set;\r\n\r\n@Entity\r\n@Getter\r\n@Setter\r\n@Table(name=&quot;activity_category&quot;)\r\npublic class ActivityCategory {\r\n\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;title&quot;)\r\n    private String title;\r\n\r\n    @OneToMany(targetEntity = Activity.class,\r\n    cascade = CascadeType.ALL,\r\n    fetch = FetchType.EAGER)\r\n    private Set&lt;Activity&gt; activities;\r\n}\r\n```\r\n\r\nActivity.java : \r\n\r\n```java\r\npackage com.spreeapi.spree.models;\r\n\r\nimport lombok.Getter;\r\nimport lombok.Setter;\r\n\r\nimport javax.persistence.*;\r\n\r\n@Entity\r\n@Table(name = &quot;activity&quot;)\r\n@Getter\r\n@Setter\r\npublic class Activity {\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;title&quot;)\r\n    private String title;\r\n\r\n    @Column(name = &quot;description&quot;)\r\n    private String description;\r\n\r\n    @Column(name = &quot;min_persons&quot;)\r\n    private String minimalPersons;\r\n\r\n    @Column(name = &quot;max_persons&quot;)\r\n    private String maximumPersons;\r\n\r\n    @Column(name = &quot;is_remote&quot;)\r\n    private boolean isRemote;\r\n\r\n    @Column(name = &quot;working_hours&quot;)\r\n    private boolean workingHours;\r\n\r\n    @Column(name = &quot;minimal_duration&quot;)\r\n    private String minimalDuration;\r\n\r\n    @ManyToOne(targetEntity = ActivityCategory.class)\r\n    @JoinColumn(name = &quot;activity_category_id&quot;)\r\n    private ActivityCategory activityCategory;\r\n}\r\n```\r\n\r\nActivityCategoryRepository.java :\r\n\r\n```java\r\n\r\npackage com.spreeapi.spree.repository;\r\n\r\nimport com.spreeapi.spree.models.ActivityCategory;\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\n@Repository\r\npublic interface ActivityCategoryRepository extends JpaRepository&lt;ActivityCategory, Integer&gt; {\r\n}\r\n```\r\n\r\nActivityRepository.java : \r\n```java\r\npackage com.spreeapi.spree.repository;\r\n\r\nimport com.spreeapi.spree.models.Activity;\r\nimport org.springframework.data.domain.Page;\r\nimport org.springframework.data.domain.Pageable;\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\n@Repository\r\npublic interface ActivityRepository extends JpaRepository&lt;Activity, Long&gt; {\r\n    public Page&lt;Activity&gt; findByActivityCategoryId(int id, Pageable pageable);\r\n}\r\n```\r\n\r\nTest.java :\r\n```java\r\n\r\npackage com.spreeapi.spree.controllers;\r\n\r\nimport com.spreeapi.spree.models.Activity;\r\nimport com.spreeapi.spree.models.ActivityCategory;\r\nimport com.spreeapi.spree.repository.ActivityCategoryRepository;\r\nimport com.spreeapi.spree.repository.ActivityRepository;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport java.util.List;\r\n\r\n@RestController\r\npublic class Test {\r\n\r\n    @Autowired\r\n    private ActivityRepository activityRepository;\r\n\r\n    @Autowired\r\n    private ActivityCategoryRepository activityCategoryRepository;\r\n\r\n    @GetMapping(&quot;/rest/demand/categories&quot;)\r\n    public List&lt;ActivityCategory&gt; test3(){\r\n        return activityCategoryRepository.findAll();\r\n    }\r\n\r\n    @GetMapping(&quot;/rest/demand/activities&quot;)\r\n    public List&lt;Activity&gt; test(){\r\n        return activityRepository.findAll();\r\n    }\r\n}\r\n\r\n```\r\n\r\npom.xml :\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.4&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;com.spree-api&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spree&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;spree&lt;/name&gt;\r\n    &lt;description&gt;spree&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;version&gt;1.18.24&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n              &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n              &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n              &lt;scope&gt;test&lt;/scope&gt;\r\n          &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\r\n            &lt;version&gt;0.9.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;excludes&gt;\r\n                        &lt;exclude&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                        &lt;/exclude&gt;\r\n                    &lt;/excludes&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nAnd the result when I did a GET to the /categories : \r\n\r\n```json\r\n[\r\n    {\r\n        &quot;id&quot;: 1,\r\n        &quot;title&quot;: &quot;Escape game&quot;,\r\n        &quot;activities&quot;: []\r\n    },\r\n    {\r\n        &quot;id&quot;: 2,\r\n        &quot;title&quot;: &quot;Jeux de soci&#233;t&#233;&quot;,\r\n        &quot;activities&quot;: []\r\n    },\r\n    {\r\n        &quot;id&quot;: 3,\r\n        &quot;title&quot;: &quot;Sports&quot;,\r\n        &quot;activities&quot;: []\r\n    },\r\n    {\r\n        &quot;id&quot;: 4,\r\n        &quot;title&quot;: &quot;Voyage&quot;,\r\n        &quot;activities&quot;: []\r\n    },\r\n    {\r\n        &quot;id&quot;: 5,\r\n        &quot;title&quot;: &quot;Laser-game&quot;,\r\n        &quot;activities&quot;: []\r\n    },\r\n    {\r\n        &quot;id&quot;: 6,\r\n        &quot;title&quot;: &quot;Activit&#233; culturelle&quot;,\r\n        &quot;activities&quot;: []\r\n    },\r\n    {\r\n        &quot;id&quot;: 7,\r\n        &quot;title&quot;: &quot;After Work&quot;,\r\n        &quot;activities&quot;: []\r\n    },\r\n    {\r\n        &quot;id&quot;: 8,\r\n        &quot;title&quot;: &quot;Jeux de cartes&quot;,\r\n        &quot;activities&quot;: []\r\n    },\r\n    {\r\n        &quot;id&quot;: 9,\r\n        &quot;title&quot;: &quot;Jeux Vid&#233;o&quot;,\r\n        &quot;activities&quot;: []\r\n    },\r\n    {\r\n        &quot;id&quot;: 10,\r\n        &quot;title&quot;: &quot;Jeux de R&#244;le sur Table&quot;,\r\n        &quot;activities&quot;: []\r\n    },\r\n    {\r\n        &quot;id&quot;: 11,\r\n        &quot;title&quot;: &quot;Karaok&#233;&quot;,\r\n        &quot;activities&quot;: []\r\n    }\r\n]\r\n```\r\n\r\nAs you can see the activities attribute of the ActivityCategory return empty but if I do it by getting the list of all activities of the DB here is the result by accessing the /activities :\r\n\r\n```json\r\n[\r\n    {\r\n        &quot;id&quot;: 1,\r\n        &quot;title&quot;: &quot;Escape Game&quot;,\r\n        &quot;description&quot;: &quot;L&#39;Escape Game est un jeu dont le but est &#224; tenter de s’&#233;chapper d’une pi&#232;ce en un temps limit&#233;. En groupe de 2 &#224; 6 participants, les joueurs doivent chercher des indices diss&#233;min&#233;s dans une ou plusieurs pi&#232;ces, puis les combiner pour avancer dans la salle.&quot;,\r\n        &quot;minimalPersons&quot;: &quot;2&quot;,\r\n        &quot;maximumPersons&quot;: &quot;50&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;Quelques heures&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 1,\r\n            &quot;title&quot;: &quot;Escape game&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: false\r\n    },\r\n    {\r\n        &quot;id&quot;: 2,\r\n        &quot;title&quot;: &quot;7 wonders&quot;,\r\n        &quot;description&quot;: &quot;7 Wonders est un jeu de cartes ayant pour th&#232;me le d&#233;veloppement de civilisations autour de chacune des sept Merveilles du monde en utilisant un syst&#232;me de draft.&quot;,\r\n        &quot;minimalPersons&quot;: &quot;2&quot;,\r\n        &quot;maximumPersons&quot;: &quot;7&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;Quelques heures&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 2,\r\n            &quot;title&quot;: &quot;Jeux de soci&#233;t&#233;&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: true\r\n    },\r\n    {\r\n        &quot;id&quot;: 3,\r\n        &quot;title&quot;: &quot;Catan&quot;,\r\n        &quot;description&quot;: &quot;Catan est un classique du jeux de soci&#233;t&#233;, un jeu de plateau strat&#233;gique mais convivial avec un principe d&#39;&#233;change de ressource.&quot;,\r\n        &quot;minimalPersons&quot;: &quot;2&quot;,\r\n        &quot;maximumPersons&quot;: &quot;7&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;Quelques heures&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 2,\r\n            &quot;title&quot;: &quot;Jeux de soci&#233;t&#233;&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: true\r\n    },\r\n    {\r\n        &quot;id&quot;: 4,\r\n        &quot;title&quot;: &quot;Risk&quot;,\r\n        &quot;description&quot;: &quot;Risk est un jeux de soci&#233;t&#233; inspir&#233; du jeux de guerre, en plus simplifier, o&#249; votre but est de conqu&#233;rique le monde.&quot;,\r\n        &quot;minimalPersons&quot;: &quot;2&quot;,\r\n        &quot;maximumPersons&quot;: &quot;6&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;1/2 journ&#233;e&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 2,\r\n            &quot;title&quot;: &quot;Jeux de soci&#233;t&#233;&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: true\r\n    },\r\n    {\r\n        &quot;id&quot;: 5,\r\n        &quot;title&quot;: &quot;Les demeures de l&#39;&#233;pouvante&quot;,\r\n        &quot;description&quot;: &quot;Les Demeures de l’&#201;pouvante est un jeu de plateau coop&#233;ratif d’horreur et d’enqu&#234;te. Les joueurs y incarnent des investigateurs qui s’aventurent dans les salles sombres des demeures hant&#233;es d’Arkham&quot;,\r\n        &quot;minimalPersons&quot;: &quot;2&quot;,\r\n        &quot;maximumPersons&quot;: &quot;5&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;1/2 journ&#233;e&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 2,\r\n            &quot;title&quot;: &quot;Jeux de soci&#233;t&#233;&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: true\r\n    },\r\n    {\r\n        &quot;id&quot;: 6,\r\n        &quot;title&quot;: &quot;Foot&quot;,\r\n        &quot;description&quot;: &quot;Le football est un sport collectif qui se joue avec un ballon sph&#233;rique, o&#249; il faut faire p&#233;n&#233;trer un ballon rond dans les buts adverses sans utiliser les mains&quot;,\r\n        &quot;minimalPersons&quot;: &quot;5&quot;,\r\n        &quot;maximumPersons&quot;: &quot;100&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;1/2 journ&#233;e&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 3,\r\n            &quot;title&quot;: &quot;Sports&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: false\r\n    },\r\n    {\r\n        &quot;id&quot;: 7,\r\n        &quot;title&quot;: &quot;Tennis de table&quot;,\r\n        &quot;description&quot;: &quot;Le tennis de table, appel&#233; aussi ping-pong, est un sport de raquette opposant deux ou quatre joueurs autour d&#39;une table&quot;,\r\n        &quot;minimalPersons&quot;: &quot;2&quot;,\r\n        &quot;maximumPersons&quot;: &quot;100&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;1/2 journ&#233;e&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 3,\r\n            &quot;title&quot;: &quot;Sports&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: false\r\n    },\r\n    {\r\n        &quot;id&quot;: 8,\r\n        &quot;title&quot;: &quot;Bowling&quot;,\r\n        &quot;description&quot;: &quot;Le bowling est un jeu qui consiste &#224; renverser des quilles &#224; l&#39;aide d&#39;une boule.&quot;,\r\n        &quot;minimalPersons&quot;: &quot;2&quot;,\r\n        &quot;maximumPersons&quot;: &quot;10&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;Quelques heures&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 3,\r\n            &quot;title&quot;: &quot;Sports&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: false\r\n    },\r\n    {\r\n        &quot;id&quot;: 9,\r\n        &quot;title&quot;: &quot;Voyage&quot;,\r\n        &quot;description&quot;: &quot;Un voyage en &#233;quipe est un bon moyen de souder ses &#233;quipes.&quot;,\r\n        &quot;minimalPersons&quot;: &quot;5&quot;,\r\n        &quot;maximumPersons&quot;: &quot;100&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;1 journ&#233;e&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 4,\r\n            &quot;title&quot;: &quot;Voyage&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: false\r\n    },\r\n    {\r\n        &quot;id&quot;: 10,\r\n        &quot;title&quot;: &quot;Laser-game&quot;,\r\n        &quot;description&quot;: &quot;Un jeu laser aussi connu sous le terme anglophone Laser tag est une activit&#233; physique o&#249; les participants, rev&#234;tus habituellement d&#39;une veste &#224; capteurs, se tirent dessus avec des &#171; pistolets laser &#187;&quot;,\r\n        &quot;minimalPersons&quot;: &quot;2&quot;,\r\n        &quot;maximumPersons&quot;: &quot;10&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;1/2 journ&#233;e&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 5,\r\n            &quot;title&quot;: &quot;Laser-game&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: false\r\n    },\r\n    {\r\n        &quot;id&quot;: 11,\r\n        &quot;title&quot;: &quot;Mus&#233;e&quot;,\r\n        &quot;description&quot;: &quot;le mus&#233;e est un lieu d&#39;exp&#233;riences m&#233;morables et &#233;mouvantes quand les sens sont interpell&#233;s pour attirer, susciter la curiosit&#233;, amuser, &#233;merveiller, faire comprendre.&quot;,\r\n        &quot;minimalPersons&quot;: &quot;2&quot;,\r\n        &quot;maximumPersons&quot;: &quot;100&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;1/2 journ&#233;e&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 6,\r\n            &quot;title&quot;: &quot;Activit&#233; culturelle&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: false\r\n    },\r\n    {\r\n        &quot;id&quot;: 12,\r\n        &quot;title&quot;: &quot;After Work&quot;,\r\n        &quot;description&quot;: &quot;Cet instant entre coll&#232;gues permet de resserrer les liens, de souder les &#233;quipes, de cr&#233;er une sorte d&#39;&#233;mulation. C&#39;est aussi un moment o&#249; l&#39;on dresse un bilan, o&#249; l&#39;on cherche &#224; d&#233;compresser ensemble dans un lieu en soir&#233;e neutre et agr&#233;able, loin de l&#39;ambiance du travail.&quot;,\r\n        &quot;minimalPersons&quot;: &quot;2&quot;,\r\n        &quot;maximumPersons&quot;: &quot;20&quot;,\r\n        &quot;workingHours&quot;: false,\r\n        &quot;minimalDuration&quot;: &quot;Quelques heures&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 7,\r\n            &quot;title&quot;: &quot;After Work&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: false\r\n    },\r\n    {\r\n        &quot;id&quot;: 13,\r\n        &quot;title&quot;: &quot;Poker&quot;,\r\n        &quot;description&quot;: &quot;Le poker est une famille de jeux de cartes comprenant de nombreuses formules et variantes. Il se pratique &#224; plusieurs joueurs avec un jeu g&#233;n&#233;ralement de cinquante-deux cartes et des jetons repr&#233;sentant les sommes mis&#233;es. Les s&#233;quences de jeu alternent distribution de cartes et tours d&#39;ench&#232;res.&quot;,\r\n        &quot;minimalPersons&quot;: &quot;5&quot;,\r\n        &quot;maximumPersons&quot;: &quot;50&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;1/2 journ&#233;es&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 8,\r\n            &quot;title&quot;: &quot;Jeux de cartes&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: false\r\n    },\r\n    {\r\n        &quot;id&quot;: 14,\r\n        &quot;title&quot;: &quot;Arcade&quot;,\r\n        &quot;description&quot;: &quot;Une salle d’arcade est un &#233;tablissement de loisirs regroupant des appareils tels que des jeux d’arcade, des flippers, des baby-foots, des tables d&#39;air hockey, des machines attrape-jouet ainsi que des billards.&quot;,\r\n        &quot;minimalPersons&quot;: &quot;10&quot;,\r\n        &quot;maximumPersons&quot;: &quot;50&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;1/2 journ&#233;e&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 9,\r\n            &quot;title&quot;: &quot;Jeux Vid&#233;o&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: true\r\n    },\r\n    {\r\n        &quot;id&quot;: 15,\r\n        &quot;title&quot;: &quot;Honey Heist&quot;,\r\n        &quot;description&quot;: &quot;Y en a deux : OURS et CRIMINEL. Les deux commencent &#224; 3. OURS sert &#224; courir, escalader, p&#233;ter des trucs, ignorer les dommages, effrayer les gens et autres trucs d’ours. CRIMINEL sert pour tous les autres trucs, ce que les ours ne font pas en g&#233;n&#233;ral.&quot;,\r\n        &quot;minimalPersons&quot;: &quot;3&quot;,\r\n        &quot;maximumPersons&quot;: &quot;6&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;1/2 journ&#233;e&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 10,\r\n            &quot;title&quot;: &quot;Jeux de R&#244;le sur Table&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: true\r\n    },\r\n    {\r\n        &quot;id&quot;: 16,\r\n        &quot;title&quot;: &quot;Karaok&#233;&quot;,\r\n        &quot;description&quot;: &quot;Prends le micro et chante&quot;,\r\n        &quot;minimalPersons&quot;: &quot;2&quot;,\r\n        &quot;maximumPersons&quot;: &quot;110&quot;,\r\n        &quot;workingHours&quot;: false,\r\n        &quot;minimalDuration&quot;: &quot;1/2 journ&#233;e&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 11,\r\n            &quot;title&quot;: &quot;Karaok&#233;&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: false\r\n    }\r\n]\r\n```\r\n\r\n \r\nPlease let me know if something is missing or an error has been made.","title":"SPRING BOOT - @OneToMany and my Set&lt;&gt; is empty","body":"<p>I ask this question because my OneToMany don't add the objects into my set. I would like to know if I made an error or if it's something that I've missed in the configurations. Here is my code :</p>\n<p>application.properties :</p>\n<pre class=\"lang-java prettyprint-override\"><code>spring.mail.host=smtp.gmail.com\nspring.mail.port=587\nspring.mail.username=${SMTP_SPREE_USERNAME}\nspring.mail.password=${SMTP_SPREE_PASSWORD}\nspring.mail.properties.mail.smtp.auth=true\nspring.mail.properties.mail.smtp.starttls.enable=true\n\nserver.servlet.context-path=/api\nspring.datasource.url=jdbc:mysql://${MYSQL_HOST:localhost}:3306/Workshop\nspring.datasource.username=${SPREE_DB_USERNAME}\nspring.datasource.password=${SPREE_DB_PASSWORD}\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL8Dialect\nspring.jpa.show-sql=true\nspring.jpa.hibernate.ddl-auto=update\n\njwt.secret=${SPREE_JWT_SECRET}\n</code></pre>\n<p>ActivityCategory.java :</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.spreeapi.spree.models;\n\nimport lombok.Getter;\nimport lombok.Setter;\n\nimport javax.persistence.*;\nimport java.util.Set;\n\n@Entity\n@Getter\n@Setter\n@Table(name=&quot;activity_category&quot;)\npublic class ActivityCategory {\n\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(name = &quot;title&quot;)\n    private String title;\n\n    @OneToMany(targetEntity = Activity.class,\n    cascade = CascadeType.ALL,\n    fetch = FetchType.EAGER)\n    private Set&lt;Activity&gt; activities;\n}\n</code></pre>\n<p>Activity.java :</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.spreeapi.spree.models;\n\nimport lombok.Getter;\nimport lombok.Setter;\n\nimport javax.persistence.*;\n\n@Entity\n@Table(name = &quot;activity&quot;)\n@Getter\n@Setter\npublic class Activity {\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n\n    @Column(name = &quot;title&quot;)\n    private String title;\n\n    @Column(name = &quot;description&quot;)\n    private String description;\n\n    @Column(name = &quot;min_persons&quot;)\n    private String minimalPersons;\n\n    @Column(name = &quot;max_persons&quot;)\n    private String maximumPersons;\n\n    @Column(name = &quot;is_remote&quot;)\n    private boolean isRemote;\n\n    @Column(name = &quot;working_hours&quot;)\n    private boolean workingHours;\n\n    @Column(name = &quot;minimal_duration&quot;)\n    private String minimalDuration;\n\n    @ManyToOne(targetEntity = ActivityCategory.class)\n    @JoinColumn(name = &quot;activity_category_id&quot;)\n    private ActivityCategory activityCategory;\n}\n</code></pre>\n<p>ActivityCategoryRepository.java :</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npackage com.spreeapi.spree.repository;\n\nimport com.spreeapi.spree.models.ActivityCategory;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface ActivityCategoryRepository extends JpaRepository&lt;ActivityCategory, Integer&gt; {\n}\n</code></pre>\n<p>ActivityRepository.java :</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.spreeapi.spree.repository;\n\nimport com.spreeapi.spree.models.Activity;\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface ActivityRepository extends JpaRepository&lt;Activity, Long&gt; {\n    public Page&lt;Activity&gt; findByActivityCategoryId(int id, Pageable pageable);\n}\n</code></pre>\n<p>Test.java :</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npackage com.spreeapi.spree.controllers;\n\nimport com.spreeapi.spree.models.Activity;\nimport com.spreeapi.spree.models.ActivityCategory;\nimport com.spreeapi.spree.repository.ActivityCategoryRepository;\nimport com.spreeapi.spree.repository.ActivityRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport java.util.List;\n\n@RestController\npublic class Test {\n\n    @Autowired\n    private ActivityRepository activityRepository;\n\n    @Autowired\n    private ActivityCategoryRepository activityCategoryRepository;\n\n    @GetMapping(&quot;/rest/demand/categories&quot;)\n    public List&lt;ActivityCategory&gt; test3(){\n        return activityCategoryRepository.findAll();\n    }\n\n    @GetMapping(&quot;/rest/demand/activities&quot;)\n    public List&lt;Activity&gt; test(){\n        return activityRepository.findAll();\n    }\n}\n\n</code></pre>\n<p>pom.xml :</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.4&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.spree-api&lt;/groupId&gt;\n    &lt;artifactId&gt;spree&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;spree&lt;/name&gt;\n    &lt;description&gt;spree&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.18.24&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n              &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n              &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n              &lt;scope&gt;test&lt;/scope&gt;\n          &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\n            &lt;version&gt;0.9.1&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>And the result when I did a GET to the /categories :</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n    {\n        &quot;id&quot;: 1,\n        &quot;title&quot;: &quot;Escape game&quot;,\n        &quot;activities&quot;: []\n    },\n    {\n        &quot;id&quot;: 2,\n        &quot;title&quot;: &quot;Jeux de société&quot;,\n        &quot;activities&quot;: []\n    },\n    {\n        &quot;id&quot;: 3,\n        &quot;title&quot;: &quot;Sports&quot;,\n        &quot;activities&quot;: []\n    },\n    {\n        &quot;id&quot;: 4,\n        &quot;title&quot;: &quot;Voyage&quot;,\n        &quot;activities&quot;: []\n    },\n    {\n        &quot;id&quot;: 5,\n        &quot;title&quot;: &quot;Laser-game&quot;,\n        &quot;activities&quot;: []\n    },\n    {\n        &quot;id&quot;: 6,\n        &quot;title&quot;: &quot;Activité culturelle&quot;,\n        &quot;activities&quot;: []\n    },\n    {\n        &quot;id&quot;: 7,\n        &quot;title&quot;: &quot;After Work&quot;,\n        &quot;activities&quot;: []\n    },\n    {\n        &quot;id&quot;: 8,\n        &quot;title&quot;: &quot;Jeux de cartes&quot;,\n        &quot;activities&quot;: []\n    },\n    {\n        &quot;id&quot;: 9,\n        &quot;title&quot;: &quot;Jeux Vidéo&quot;,\n        &quot;activities&quot;: []\n    },\n    {\n        &quot;id&quot;: 10,\n        &quot;title&quot;: &quot;Jeux de Rôle sur Table&quot;,\n        &quot;activities&quot;: []\n    },\n    {\n        &quot;id&quot;: 11,\n        &quot;title&quot;: &quot;Karaoké&quot;,\n        &quot;activities&quot;: []\n    }\n]\n</code></pre>\n<p>As you can see the activities attribute of the ActivityCategory return empty but if I do it by getting the list of all activities of the DB here is the result by accessing the /activities :</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n    {\n        &quot;id&quot;: 1,\n        &quot;title&quot;: &quot;Escape Game&quot;,\n        &quot;description&quot;: &quot;L'Escape Game est un jeu dont le but est à tenter de s’échapper d’une pièce en un temps limité. En groupe de 2 à 6 participants, les joueurs doivent chercher des indices disséminés dans une ou plusieurs pièces, puis les combiner pour avancer dans la salle.&quot;,\n        &quot;minimalPersons&quot;: &quot;2&quot;,\n        &quot;maximumPersons&quot;: &quot;50&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;Quelques heures&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 1,\n            &quot;title&quot;: &quot;Escape game&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: false\n    },\n    {\n        &quot;id&quot;: 2,\n        &quot;title&quot;: &quot;7 wonders&quot;,\n        &quot;description&quot;: &quot;7 Wonders est un jeu de cartes ayant pour thème le développement de civilisations autour de chacune des sept Merveilles du monde en utilisant un système de draft.&quot;,\n        &quot;minimalPersons&quot;: &quot;2&quot;,\n        &quot;maximumPersons&quot;: &quot;7&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;Quelques heures&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 2,\n            &quot;title&quot;: &quot;Jeux de société&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: true\n    },\n    {\n        &quot;id&quot;: 3,\n        &quot;title&quot;: &quot;Catan&quot;,\n        &quot;description&quot;: &quot;Catan est un classique du jeux de société, un jeu de plateau stratégique mais convivial avec un principe d'échange de ressource.&quot;,\n        &quot;minimalPersons&quot;: &quot;2&quot;,\n        &quot;maximumPersons&quot;: &quot;7&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;Quelques heures&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 2,\n            &quot;title&quot;: &quot;Jeux de société&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: true\n    },\n    {\n        &quot;id&quot;: 4,\n        &quot;title&quot;: &quot;Risk&quot;,\n        &quot;description&quot;: &quot;Risk est un jeux de société inspiré du jeux de guerre, en plus simplifier, où votre but est de conquérique le monde.&quot;,\n        &quot;minimalPersons&quot;: &quot;2&quot;,\n        &quot;maximumPersons&quot;: &quot;6&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;1/2 journée&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 2,\n            &quot;title&quot;: &quot;Jeux de société&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: true\n    },\n    {\n        &quot;id&quot;: 5,\n        &quot;title&quot;: &quot;Les demeures de l'épouvante&quot;,\n        &quot;description&quot;: &quot;Les Demeures de l’Épouvante est un jeu de plateau coopératif d’horreur et d’enquête. Les joueurs y incarnent des investigateurs qui s’aventurent dans les salles sombres des demeures hantées d’Arkham&quot;,\n        &quot;minimalPersons&quot;: &quot;2&quot;,\n        &quot;maximumPersons&quot;: &quot;5&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;1/2 journée&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 2,\n            &quot;title&quot;: &quot;Jeux de société&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: true\n    },\n    {\n        &quot;id&quot;: 6,\n        &quot;title&quot;: &quot;Foot&quot;,\n        &quot;description&quot;: &quot;Le football est un sport collectif qui se joue avec un ballon sphérique, où il faut faire pénétrer un ballon rond dans les buts adverses sans utiliser les mains&quot;,\n        &quot;minimalPersons&quot;: &quot;5&quot;,\n        &quot;maximumPersons&quot;: &quot;100&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;1/2 journée&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 3,\n            &quot;title&quot;: &quot;Sports&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: false\n    },\n    {\n        &quot;id&quot;: 7,\n        &quot;title&quot;: &quot;Tennis de table&quot;,\n        &quot;description&quot;: &quot;Le tennis de table, appelé aussi ping-pong, est un sport de raquette opposant deux ou quatre joueurs autour d'une table&quot;,\n        &quot;minimalPersons&quot;: &quot;2&quot;,\n        &quot;maximumPersons&quot;: &quot;100&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;1/2 journée&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 3,\n            &quot;title&quot;: &quot;Sports&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: false\n    },\n    {\n        &quot;id&quot;: 8,\n        &quot;title&quot;: &quot;Bowling&quot;,\n        &quot;description&quot;: &quot;Le bowling est un jeu qui consiste à renverser des quilles à l'aide d'une boule.&quot;,\n        &quot;minimalPersons&quot;: &quot;2&quot;,\n        &quot;maximumPersons&quot;: &quot;10&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;Quelques heures&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 3,\n            &quot;title&quot;: &quot;Sports&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: false\n    },\n    {\n        &quot;id&quot;: 9,\n        &quot;title&quot;: &quot;Voyage&quot;,\n        &quot;description&quot;: &quot;Un voyage en équipe est un bon moyen de souder ses équipes.&quot;,\n        &quot;minimalPersons&quot;: &quot;5&quot;,\n        &quot;maximumPersons&quot;: &quot;100&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;1 journée&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 4,\n            &quot;title&quot;: &quot;Voyage&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: false\n    },\n    {\n        &quot;id&quot;: 10,\n        &quot;title&quot;: &quot;Laser-game&quot;,\n        &quot;description&quot;: &quot;Un jeu laser aussi connu sous le terme anglophone Laser tag est une activité physique où les participants, revêtus habituellement d'une veste à capteurs, se tirent dessus avec des « pistolets laser »&quot;,\n        &quot;minimalPersons&quot;: &quot;2&quot;,\n        &quot;maximumPersons&quot;: &quot;10&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;1/2 journée&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 5,\n            &quot;title&quot;: &quot;Laser-game&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: false\n    },\n    {\n        &quot;id&quot;: 11,\n        &quot;title&quot;: &quot;Musée&quot;,\n        &quot;description&quot;: &quot;le musée est un lieu d'expériences mémorables et émouvantes quand les sens sont interpellés pour attirer, susciter la curiosité, amuser, émerveiller, faire comprendre.&quot;,\n        &quot;minimalPersons&quot;: &quot;2&quot;,\n        &quot;maximumPersons&quot;: &quot;100&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;1/2 journée&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 6,\n            &quot;title&quot;: &quot;Activité culturelle&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: false\n    },\n    {\n        &quot;id&quot;: 12,\n        &quot;title&quot;: &quot;After Work&quot;,\n        &quot;description&quot;: &quot;Cet instant entre collègues permet de resserrer les liens, de souder les équipes, de créer une sorte d'émulation. C'est aussi un moment où l'on dresse un bilan, où l'on cherche à décompresser ensemble dans un lieu en soirée neutre et agréable, loin de l'ambiance du travail.&quot;,\n        &quot;minimalPersons&quot;: &quot;2&quot;,\n        &quot;maximumPersons&quot;: &quot;20&quot;,\n        &quot;workingHours&quot;: false,\n        &quot;minimalDuration&quot;: &quot;Quelques heures&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 7,\n            &quot;title&quot;: &quot;After Work&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: false\n    },\n    {\n        &quot;id&quot;: 13,\n        &quot;title&quot;: &quot;Poker&quot;,\n        &quot;description&quot;: &quot;Le poker est une famille de jeux de cartes comprenant de nombreuses formules et variantes. Il se pratique à plusieurs joueurs avec un jeu généralement de cinquante-deux cartes et des jetons représentant les sommes misées. Les séquences de jeu alternent distribution de cartes et tours d'enchères.&quot;,\n        &quot;minimalPersons&quot;: &quot;5&quot;,\n        &quot;maximumPersons&quot;: &quot;50&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;1/2 journées&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 8,\n            &quot;title&quot;: &quot;Jeux de cartes&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: false\n    },\n    {\n        &quot;id&quot;: 14,\n        &quot;title&quot;: &quot;Arcade&quot;,\n        &quot;description&quot;: &quot;Une salle d’arcade est un établissement de loisirs regroupant des appareils tels que des jeux d’arcade, des flippers, des baby-foots, des tables d'air hockey, des machines attrape-jouet ainsi que des billards.&quot;,\n        &quot;minimalPersons&quot;: &quot;10&quot;,\n        &quot;maximumPersons&quot;: &quot;50&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;1/2 journée&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 9,\n            &quot;title&quot;: &quot;Jeux Vidéo&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: true\n    },\n    {\n        &quot;id&quot;: 15,\n        &quot;title&quot;: &quot;Honey Heist&quot;,\n        &quot;description&quot;: &quot;Y en a deux : OURS et CRIMINEL. Les deux commencent à 3. OURS sert à courir, escalader, péter des trucs, ignorer les dommages, effrayer les gens et autres trucs d’ours. CRIMINEL sert pour tous les autres trucs, ce que les ours ne font pas en général.&quot;,\n        &quot;minimalPersons&quot;: &quot;3&quot;,\n        &quot;maximumPersons&quot;: &quot;6&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;1/2 journée&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 10,\n            &quot;title&quot;: &quot;Jeux de Rôle sur Table&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: true\n    },\n    {\n        &quot;id&quot;: 16,\n        &quot;title&quot;: &quot;Karaoké&quot;,\n        &quot;description&quot;: &quot;Prends le micro et chante&quot;,\n        &quot;minimalPersons&quot;: &quot;2&quot;,\n        &quot;maximumPersons&quot;: &quot;110&quot;,\n        &quot;workingHours&quot;: false,\n        &quot;minimalDuration&quot;: &quot;1/2 journée&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 11,\n            &quot;title&quot;: &quot;Karaoké&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: false\n    }\n]\n</code></pre>\n<p>Please let me know if something is missing or an error has been made.</p>\n"},{"tags":["java","resttemplate","spring-webflux","project-reactor","spring-websocket"],"answers":[{"comments":[{"owner":{"account_id":3675939,"reputation":1113,"user_id":3062048,"accept_rate":60,"display_name":"vortex.alex"},"score":0,"creation_date":1574174244,"post_id":58933790,"comment_id":104131641,"body_markdown":"I managed to use `ConnectableFlux` / `share` so now the single Flux source is guaranteed, but the problem is that `sendNotification` is called by the same thread that executes the websocket stuff. What I want to achieve is a separation of execution contexts for subscribers. Is it possible? I feel I have to add `subscribeOn` somewhere but I&#39;m not sure...","body":"I managed to use <code>ConnectableFlux</code> / <code>share</code> so now the single Flux source is guaranteed, but the problem is that <code>sendNotification</code> is called by the same thread that executes the websocket stuff. What I want to achieve is a separation of execution contexts for subscribers. Is it possible? I feel I have to add <code>subscribeOn</code> somewhere but I&#39;m not sure..."},{"owner":{"account_id":3675939,"reputation":1113,"user_id":3062048,"accept_rate":60,"display_name":"vortex.alex"},"score":0,"creation_date":1574174430,"post_id":58933790,"comment_id":104131746,"body_markdown":"I&#39;ve edited the body of my question to better clarify this.","body":"I&#39;ve edited the body of my question to better clarify this."},{"owner":{"account_id":2427398,"reputation":4736,"user_id":2119041,"accept_rate":100,"display_name":"NikolaB"},"score":0,"creation_date":1574239048,"post_id":58933790,"comment_id":104156345,"body_markdown":"@vortex.alex Yes it&#39;s possible, but not with `subscribeOn` or `publishOn` because WebClient and reactive WebSockets each have their own non-blocking threads and your `subscribeOn` or `publishOn` would be overridden by their internal execution definition. Added more code to my answer.","body":"@vortex.alex Yes it&#39;s possible, but not with <code>subscribeOn</code> or <code>publishOn</code> because WebClient and reactive WebSockets each have their own non-blocking threads and your <code>subscribeOn</code> or <code>publishOn</code> would be overridden by their internal execution definition. Added more code to my answer."},{"owner":{"account_id":3675939,"reputation":1113,"user_id":3062048,"accept_rate":60,"display_name":"vortex.alex"},"score":0,"creation_date":1574250034,"post_id":58933790,"comment_id":104162796,"body_markdown":"I tried but either I don&#39;t get any response from the `WebClient` or I end up to put a `block` after `exchange` or `retrieve` but it doesn&#39;t work &#39;cause I have the following error: `block()/blockFirst()/blockLast() are blocking, which is not supported in thread parallel-2`.  Should I explicitly put a subscription on the `WebClient` to fire the request (e.g. using `block`)? Or maybe the `Mono` returned by `exchange` has to be returned back by the `sendNotification` method, but then what to do there? Is there something that has to do with  `zip` method you mentioned?","body":"I tried but either I don&#39;t get any response from the <code>WebClient</code> or I end up to put a <code>block</code> after <code>exchange</code> or <code>retrieve</code> but it doesn&#39;t work &#39;cause I have the following error: <code>block()&#47;blockFirst()&#47;blockLast() are blocking, which is not supported in thread parallel-2</code>.  Should I explicitly put a subscription on the <code>WebClient</code> to fire the request (e.g. using <code>block</code>)? Or maybe the <code>Mono</code> returned by <code>exchange</code> has to be returned back by the <code>sendNotification</code> method, but then what to do there? Is there something that has to do with  <code>zip</code> method you mentioned?"},{"owner":{"account_id":2427398,"reputation":4736,"user_id":2119041,"accept_rate":100,"display_name":"NikolaB"},"score":1,"creation_date":1574250514,"post_id":58933790,"comment_id":104163074,"body_markdown":"Absolutely you have to call `subscribe` to initiate reactive execution so `notifier.sendNotification(event).subscribe()` will initiate execution. You don&#39;t have to call `subscribe` on reactive method/operator chains returned in `Controller`s because Spring implicitly calls it, but for all other executions you need to explicitly call it. The `zipWith` operator could be used for independent reactive executions when you need results of multiple independent reactive method executions downstream for further manipulations.","body":"Absolutely you have to call <code>subscribe</code> to initiate reactive execution so <code>notifier.sendNotification(event).subscribe()</code> will initiate execution. You don&#39;t have to call <code>subscribe</code> on reactive method/operator chains returned in <code>Controller</code>s because Spring implicitly calls it, but for all other executions you need to explicitly call it. The <code>zipWith</code> operator could be used for independent reactive executions when you need results of multiple independent reactive method executions downstream for further manipulations."},{"owner":{"account_id":3675939,"reputation":1113,"user_id":3062048,"accept_rate":60,"display_name":"vortex.alex"},"score":0,"creation_date":1574691077,"post_id":58933790,"comment_id":104310766,"body_markdown":"Ok now it works! with the `subscribe` I&#39;m able to fire the http request and i finally see the non-blocking behavior that I wanted. However, I noticed a slightly different behavior on execution contexts, as opposed to what you said, \nfor example reactive websockets inherit and are run on the thread pool set upstream by the `Flux.interval` I used in `MySource` class\n(which is `parallel` scheduler, see [here](https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Flux.html#interval-java.time.Duration-)). Thank you","body":"Ok now it works! with the <code>subscribe</code> I&#39;m able to fire the http request and i finally see the non-blocking behavior that I wanted. However, I noticed a slightly different behavior on execution contexts, as opposed to what you said,  for example reactive websockets inherit and are run on the thread pool set upstream by the <code>Flux.interval</code> I used in <code>MySource</code> class (which is <code>parallel</code> scheduler, see <a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Flux.html#interval-java.time.Duration-\" rel=\"nofollow noreferrer\">here</a>). Thank you"}],"tags":[],"owner":{"account_id":2427398,"reputation":4736,"user_id":2119041,"accept_rate":100,"display_name":"NikolaB"},"comment_count":6,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1574238512,"creation_date":1574165337,"answer_id":58933790,"question_id":58932752,"body_markdown":"There are couple of issues here, first `RestTemplate` is synchronous/blocking HTTP client so you should use `WebClient` which is reactive, also to create `ConnectableFlux` (`Flux` which can have multiple subscribers) you need to share it before `map` operator and create new `Flux`-es which are created from connected one.\r\n\r\nExample:\r\n\r\n    Flux&lt;MyEvent&gt; connectedFlux = mySource.events().share();\r\n    Flux.from(connectedFlux).subscribe(event -&gt; notifier.sendNotification(event));\r\n    return webSocketSession.send(Flux.from(connectedFlux).map(this::toJson).map(webSocketSession::textMessage));\r\n\r\nAlso `sendNotification` method should return `Mono&lt;Void&gt;` since reactive methods should always return `Mono` or `Flux`types.\r\n\r\nTo initiate independent executions you could `Zip` those two `Mono`s.\r\n\r\n**Edit**\r\n\r\nFirst of all as mentioned above use `WebClient` for outgoing HTTP calls which is reactive HTTP client and rework the `Notifier` class:\r\n\r\n    public class Notifier {\r\n    \r\n       public Mono&lt;Void&gt; sendNotification (MyEvent event) {\r\n          log.info(&quot;notifier sendNotification &quot; + event.getValue());\r\n          return Mono.just(event)\r\n                     .filter(e -&gt; /* your condition */)\r\n                     .flatMap(e -&gt; WebClient.builder().baseUrl(&quot;XXX&quot;)...)\r\n                     .then();\r\n       }\r\n    \r\n    }\r\n\r\nNow take a look if execution context is different.\r\n\r\n","title":"How to have multiple subscribers to Flux that run on different execution contexts / threads","body":"<p>There are couple of issues here, first <code>RestTemplate</code> is synchronous/blocking HTTP client so you should use <code>WebClient</code> which is reactive, also to create <code>ConnectableFlux</code> (<code>Flux</code> which can have multiple subscribers) you need to share it before <code>map</code> operator and create new <code>Flux</code>-es which are created from connected one.</p>\n\n<p>Example:</p>\n\n<pre><code>Flux&lt;MyEvent&gt; connectedFlux = mySource.events().share();\nFlux.from(connectedFlux).subscribe(event -&gt; notifier.sendNotification(event));\nreturn webSocketSession.send(Flux.from(connectedFlux).map(this::toJson).map(webSocketSession::textMessage));\n</code></pre>\n\n<p>Also <code>sendNotification</code> method should return <code>Mono&lt;Void&gt;</code> since reactive methods should always return <code>Mono</code> or <code>Flux</code>types.</p>\n\n<p>To initiate independent executions you could <code>Zip</code> those two <code>Mono</code>s.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>First of all as mentioned above use <code>WebClient</code> for outgoing HTTP calls which is reactive HTTP client and rework the <code>Notifier</code> class:</p>\n\n<pre><code>public class Notifier {\n\n   public Mono&lt;Void&gt; sendNotification (MyEvent event) {\n      log.info(\"notifier sendNotification \" + event.getValue());\n      return Mono.just(event)\n                 .filter(e -&gt; /* your condition */)\n                 .flatMap(e -&gt; WebClient.builder().baseUrl(\"XXX\")...)\n                 .then();\n   }\n\n}\n</code></pre>\n\n<p>Now take a look if execution context is different.</p>\n"},{"tags":[],"owner":{"account_id":15459711,"reputation":1631,"user_id":11152683,"display_name":"Lubo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665664472,"creation_date":1665664472,"answer_id":74055870,"question_id":58932752,"body_markdown":"Note also that you are using &quot;cold&quot; flux to simulate events (Flux.interval(...)). In reality, there will be some Sink I think. Try to play with this code:\r\n\r\n\r\n    @Controller\r\n    @Slf4j\r\n    public class ReactiveController {\r\n        record SomeDTO(String name, String address) {\r\n        }\r\n    \r\n        private final Sinks.Many&lt;SomeDTO&gt; eventSink = Sinks.many().replay().latest();\r\n    \r\n        @RequestMapping(path = &quot;/sse&quot;, produces = MediaType.TEXT_EVENT_STREAM_VALUE)\r\n        public Flux&lt;ServerSentEvent&lt;SomeDTO&gt;&gt; sse() {\r\n            final AtomicLong counter = new AtomicLong(0);\r\n            return eventSink.asFlux()\r\n                    .map(e -&gt; ServerSentEvent.builder(e)\r\n                            .id(counter.incrementAndGet() + &quot;&quot;)\r\n                            //.event(e.getClass().getName())\r\n                            .build());\r\n        }\r\n    \r\n        // note, when you want this to work in production, ensure, that http request is not being cached on its way, using POST method for example.\r\n        @ResponseStatus(HttpStatus.OK)\r\n        @ResponseBody\r\n        @GetMapping(path = &quot;/sendSomething&quot;, produces = MediaType.TEXT_PLAIN_VALUE)\r\n        public String sendSomething() {\r\n            this.eventSink.emitNext(\r\n                    new SomeDTO(&quot;name&quot;, &quot;address&quot;),\r\n                    (signalType, emitResult) -&gt; {\r\n                        log.warn(&quot;Some event is being not send to all subscribers. It will vanish...&quot;);\r\n                        // returning false, to not retry emitting given data again.\r\n                        return false;\r\n                    }\r\n            );\r\n            return &quot;Have a look at /sse endpoint (using \\&quot;curl http://localhost/sse\\&quot; for example), to see events in realtime.&quot;;\r\n        }\r\n    }\r\n\r\n","title":"How to have multiple subscribers to Flux that run on different execution contexts / threads","body":"<p>Note also that you are using &quot;cold&quot; flux to simulate events (Flux.interval(...)). In reality, there will be some Sink I think. Try to play with this code:</p>\n<pre><code>@Controller\n@Slf4j\npublic class ReactiveController {\n    record SomeDTO(String name, String address) {\n    }\n\n    private final Sinks.Many&lt;SomeDTO&gt; eventSink = Sinks.many().replay().latest();\n\n    @RequestMapping(path = &quot;/sse&quot;, produces = MediaType.TEXT_EVENT_STREAM_VALUE)\n    public Flux&lt;ServerSentEvent&lt;SomeDTO&gt;&gt; sse() {\n        final AtomicLong counter = new AtomicLong(0);\n        return eventSink.asFlux()\n                .map(e -&gt; ServerSentEvent.builder(e)\n                        .id(counter.incrementAndGet() + &quot;&quot;)\n                        //.event(e.getClass().getName())\n                        .build());\n    }\n\n    // note, when you want this to work in production, ensure, that http request is not being cached on its way, using POST method for example.\n    @ResponseStatus(HttpStatus.OK)\n    @ResponseBody\n    @GetMapping(path = &quot;/sendSomething&quot;, produces = MediaType.TEXT_PLAIN_VALUE)\n    public String sendSomething() {\n        this.eventSink.emitNext(\n                new SomeDTO(&quot;name&quot;, &quot;address&quot;),\n                (signalType, emitResult) -&gt; {\n                    log.warn(&quot;Some event is being not send to all subscribers. It will vanish...&quot;);\n                    // returning false, to not retry emitting given data again.\n                    return false;\n                }\n        );\n        return &quot;Have a look at /sse endpoint (using \\&quot;curl http://localhost/sse\\&quot; for example), to see events in realtime.&quot;;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3675939,"reputation":1113,"user_id":3062048,"accept_rate":60,"display_name":"vortex.alex"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11357,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":58933790,"answer_count":2,"score":5,"last_activity_date":1665664472,"creation_date":1574162021,"question_id":58932752,"body_markdown":"I&#39;m developing a Spring Boot WebFlux application for IoT real time data visualization.\r\n\r\nI have a `Flux` which simulates data coming from a device, and I want that upon websocket connection established every single event:\r\n\r\n - must be sent over the websocket for real time visualization (using reactive `WebSocketHandler`)\r\n - must be checked against a given condition so to send a notification via HTTP REST call (`RestTemplate`)\r\n\r\n\r\nFrom my logs it seems the two subscribers (the websocket handler and the notifier) gets two different flows with completely different values (below the logs). \r\n\r\nI also tried a variant chaining the `share` method after the `map` in the `MySource` class, in this case it looks like though I have just one Flux, there is only ONE thread so everything is blocking (I can see the REST call blocks the sending over the websocket).\r\n\r\n\r\nWhat happens here? How can I make the two subscribers to be run in different execution contexts (different threads), so completely independent from each other? \r\n\r\n\r\nBelow relevant code snippets and logs.\r\n\r\nThank you all in advance!\r\n\r\n**UPDATE:** for the sake of clarity I have to specify that `MyEvent`s have RANDOM-generated values, so I solved one issue thanks to @NikolaB&#39;s answer by using the `ConnectableFlux` / `share` which guarantees to have the same `Flux`, but I still want to have separate execution contexts for the two subscribers.\r\n\r\n\r\n```\r\npublic class MyWebSocketHandler implements WebSocketHandler {\r\n\r\n   @Autowired\r\n   public MySource mySource;\r\n\r\n   @Autowired\r\n   public Notifier notifier;\r\n\r\n   public Mono&lt;Void&gt; handle(WebSocketSession webSocketSession) {\r\n            Flux&lt;MyEvent&gt; events = mySource.events();\r\n            events.subscribe(event -&gt; notifier.sendNotification(event));\r\n            return webSocketSession.send(events.map(this::toJson).map(webSocketSession::textMessage));\r\n   }\r\n\r\n   private String toJson(MyEvent event) {\r\n       log.info(&quot;websocket toJson &quot; + event.getValue());\r\n       ...\r\n   }\r\n}\r\n```\r\n\r\n```\r\npublic class MySource {\r\n   public Flux&lt;MyEvent&gt; events() {\r\n      return Flux.interval(...).map(i -&gt; new MyEvent(*Random Generate Value*);\r\n   }\r\n}\r\n```\r\n\r\n```\r\npublic class Notifier {\r\n\r\n   public void sendNotification (MyEvent event) {\r\n      log.info(&quot;notifier sendNotification &quot; + event.getValue());\r\n      if (condition met)\r\n         restTemplate.exchange(...)\r\n   }\r\n}\r\n```\r\n\r\n```\r\n2019-11-19 11:58:55.375 INFO [     parallel-3] i.a.m.websocket.MyWebSocketHandler  : websocket toJson 4.09\r\n2019-11-19 11:58:55.375 INFO [     parallel-1] i.a.m.notifier.Notifier : notifier sendNotification 4.86\r\n2019-11-19 11:58:57.366 INFO [     parallel-1] i.a.m.notifier.Notifier : notifier sendNotification 4.24\r\n2019-11-19 11:58:57.374 INFO [     parallel-3] i.a.m.websocket.MyWebSocketHandler  : websocket toJson 4.11\r\n2019-11-19 11:58:59.365 INFO [     parallel-1] i.a.m.notifier.Notifier : notifier sendNotification 4.61\r\n2019-11-19 11:58:59.374 INFO [     parallel-3] i.a.m.websocket.MyWebSocketHandler  : websocket toJson 4.03\r\n2019-11-19 11:59:01.365 INFO [     parallel-1] i.a.m.notifier.Notifier : notifier sendNotification 4.88\r\n2019-11-19 11:59:01.375 INFO [     parallel-3] i.a.m.websocket.MyWebSocketHandler  : websocket toJson 4.29\r\n2019-11-19 11:59:03.364 INFO [     parallel-1] i.a.m.notifier.Notifier : notifier sendNotification 4.37\r\n```\r\n","title":"How to have multiple subscribers to Flux that run on different execution contexts / threads","body":"<p>I'm developing a Spring Boot WebFlux application for IoT real time data visualization.</p>\n\n<p>I have a <code>Flux</code> which simulates data coming from a device, and I want that upon websocket connection established every single event:</p>\n\n<ul>\n<li>must be sent over the websocket for real time visualization (using reactive <code>WebSocketHandler</code>)</li>\n<li>must be checked against a given condition so to send a notification via HTTP REST call (<code>RestTemplate</code>)</li>\n</ul>\n\n<p>From my logs it seems the two subscribers (the websocket handler and the notifier) gets two different flows with completely different values (below the logs). </p>\n\n<p>I also tried a variant chaining the <code>share</code> method after the <code>map</code> in the <code>MySource</code> class, in this case it looks like though I have just one Flux, there is only ONE thread so everything is blocking (I can see the REST call blocks the sending over the websocket).</p>\n\n<p>What happens here? How can I make the two subscribers to be run in different execution contexts (different threads), so completely independent from each other? </p>\n\n<p>Below relevant code snippets and logs.</p>\n\n<p>Thank you all in advance!</p>\n\n<p><strong>UPDATE:</strong> for the sake of clarity I have to specify that <code>MyEvent</code>s have RANDOM-generated values, so I solved one issue thanks to @NikolaB's answer by using the <code>ConnectableFlux</code> / <code>share</code> which guarantees to have the same <code>Flux</code>, but I still want to have separate execution contexts for the two subscribers.</p>\n\n<pre><code>public class MyWebSocketHandler implements WebSocketHandler {\n\n   @Autowired\n   public MySource mySource;\n\n   @Autowired\n   public Notifier notifier;\n\n   public Mono&lt;Void&gt; handle(WebSocketSession webSocketSession) {\n            Flux&lt;MyEvent&gt; events = mySource.events();\n            events.subscribe(event -&gt; notifier.sendNotification(event));\n            return webSocketSession.send(events.map(this::toJson).map(webSocketSession::textMessage));\n   }\n\n   private String toJson(MyEvent event) {\n       log.info(\"websocket toJson \" + event.getValue());\n       ...\n   }\n}\n</code></pre>\n\n<pre><code>public class MySource {\n   public Flux&lt;MyEvent&gt; events() {\n      return Flux.interval(...).map(i -&gt; new MyEvent(*Random Generate Value*);\n   }\n}\n</code></pre>\n\n<pre><code>public class Notifier {\n\n   public void sendNotification (MyEvent event) {\n      log.info(\"notifier sendNotification \" + event.getValue());\n      if (condition met)\n         restTemplate.exchange(...)\n   }\n}\n</code></pre>\n\n<pre><code>2019-11-19 11:58:55.375 INFO [     parallel-3] i.a.m.websocket.MyWebSocketHandler  : websocket toJson 4.09\n2019-11-19 11:58:55.375 INFO [     parallel-1] i.a.m.notifier.Notifier : notifier sendNotification 4.86\n2019-11-19 11:58:57.366 INFO [     parallel-1] i.a.m.notifier.Notifier : notifier sendNotification 4.24\n2019-11-19 11:58:57.374 INFO [     parallel-3] i.a.m.websocket.MyWebSocketHandler  : websocket toJson 4.11\n2019-11-19 11:58:59.365 INFO [     parallel-1] i.a.m.notifier.Notifier : notifier sendNotification 4.61\n2019-11-19 11:58:59.374 INFO [     parallel-3] i.a.m.websocket.MyWebSocketHandler  : websocket toJson 4.03\n2019-11-19 11:59:01.365 INFO [     parallel-1] i.a.m.notifier.Notifier : notifier sendNotification 4.88\n2019-11-19 11:59:01.375 INFO [     parallel-3] i.a.m.websocket.MyWebSocketHandler  : websocket toJson 4.29\n2019-11-19 11:59:03.364 INFO [     parallel-1] i.a.m.notifier.Notifier : notifier sendNotification 4.37\n</code></pre>\n"},{"tags":["java","loops","while-loop"],"comments":[{"owner":{"account_id":19254723,"reputation":2061,"user_id":14071914,"display_name":"JustAnotherDeveloper"},"score":0,"creation_date":1665143645,"post_id":73986687,"comment_id":130636441,"body_markdown":"`} else { break; }`?","body":"<code>} else { break; }</code>?"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1665143721,"post_id":73986687,"comment_id":130636476,"body_markdown":"_what would the best way to exit the loop?_ Do you not know about the [break](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html) statement?","body":"<i>what would the best way to exit the loop?</i> Do you not know about the <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html\" rel=\"nofollow noreferrer\">break</a> statement?"},{"owner":{"account_id":2679531,"reputation":2832,"user_id":2315162,"accept_rate":81,"display_name":"sinclair"},"score":0,"creation_date":1665563927,"post_id":73986687,"comment_id":130727684,"body_markdown":"Does this answer your question? [How do I exit a while loop in Java?](https://stackoverflow.com/questions/7951690/how-do-i-exit-a-while-loop-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/7951690/how-do-i-exit-a-while-loop-in-java\">How do I exit a while loop in Java?</a>"}],"answers":[{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665221287,"creation_date":1665143876,"answer_id":73986841,"question_id":73986687,"body_markdown":"You can read initial input before loop and put the inverted conditions with logical `OR` in the loops condition\r\n```\r\n//read initial input\r\nwhile(!condition1() || !condition2() || !condition3()) {\r\n  //inform input is not valid\r\n  //read next input\r\n}\r\n```\r\nThe loop will continue for as long as at least one condition is not met - evaluated to `false`. When all conditions have been met - all of them were `true`, the loop ends.","title":"While loop strategy with multiple conditionals inside","body":"<p>You can read initial input before loop and put the inverted conditions with logical <code>OR</code> in the loops condition</p>\n<pre><code>//read initial input\nwhile(!condition1() || !condition2() || !condition3()) {\n  //inform input is not valid\n  //read next input\n}\n</code></pre>\n<p>The loop will continue for as long as at least one condition is not met - evaluated to <code>false</code>. When all conditions have been met - all of them were <code>true</code>, the loop ends.</p>\n"},{"tags":[],"owner":{"account_id":7091735,"reputation":2510,"user_id":5426703,"display_name":"Spyros K"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1665664139,"creation_date":1665144094,"answer_id":73986886,"question_id":73986687,"body_markdown":"The input capture use case you describe seems suitable for a `do-while` loop.\r\n- The input is repeatedly re-captured inside the `do-while`\r\n- All the conditions can be encapsulated inside a function that takes as argument the captured input\r\n- A single if-else statement can be used that makes sure that the loop either repeats with a `continue` if conditions are not met or ends with a `break`.\r\n```java\r\ndo {\r\n    final String input;    //Code that gets input\r\n    //shouldRepeat should include all conditions\r\n    if (shouldRepeat(input)) {\r\n        print(&quot;This doesnt meet the condition. Try again!&quot;);\r\n        continue;\r\n    } else {\r\n        print(&quot;Success&quot;);\r\n        break;\r\n    }\r\n} while(true);\r\n\r\n\r\n//Function signature\r\nprivate boolean shouldRepeat(final String input){\r\n    //conditions\r\n    //Condition1 OR Condition2 OR Condition3\r\n}\r\n```\r\n","title":"While loop strategy with multiple conditionals inside","body":"<p>The input capture use case you describe seems suitable for a <code>do-while</code> loop.</p>\n<ul>\n<li>The input is repeatedly re-captured inside the <code>do-while</code></li>\n<li>All the conditions can be encapsulated inside a function that takes as argument the captured input</li>\n<li>A single if-else statement can be used that makes sure that the loop either repeats with a <code>continue</code> if conditions are not met or ends with a <code>break</code>.</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>do {\n    final String input;    //Code that gets input\n    //shouldRepeat should include all conditions\n    if (shouldRepeat(input)) {\n        print(&quot;This doesnt meet the condition. Try again!&quot;);\n        continue;\n    } else {\n        print(&quot;Success&quot;);\n        break;\n    }\n} while(true);\n\n\n//Function signature\nprivate boolean shouldRepeat(final String input){\n    //conditions\n    //Condition1 OR Condition2 OR Condition3\n}\n</code></pre>\n"}],"owner":{"account_id":12391188,"reputation":37,"user_id":9033161,"display_name":"Greddy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1665664139,"creation_date":1665143133,"question_id":73986687,"body_markdown":"I am looking for advice on how to write a `while` loop with a multiple conditionals. The main idea is that we have conditions which are checked and if they don&#39;t meet the requirements, they are repeated. \r\nFor example, we need to enter some input (Numeric String with two numbers). Input has to be numeric, has to be no less than 3 and has to have the same numbers. If whichever condition is not met, it informs the user and ask for the input again. If input matches all the requirements, the loop stops. What is the best scenario for that? \r\nMy idea was something like that:\r\n\r\n```java\r\nwhile (true) {\r\n    if (!(someMethod)) {\r\n        print(&quot;This doesnt meet the condition. Try again!&quot;);\r\n        continue;\r\n    }\r\n}\r\n```\r\n`continue` does the job of repeating the condition &quot;anew&quot;, but I am not sure about what would be the best way to exit the loop?\r\n","title":"While loop strategy with multiple conditionals inside","body":"<p>I am looking for advice on how to write a <code>while</code> loop with a multiple conditionals. The main idea is that we have conditions which are checked and if they don't meet the requirements, they are repeated.\nFor example, we need to enter some input (Numeric String with two numbers). Input has to be numeric, has to be no less than 3 and has to have the same numbers. If whichever condition is not met, it informs the user and ask for the input again. If input matches all the requirements, the loop stops. What is the best scenario for that?\nMy idea was something like that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>while (true) {\n    if (!(someMethod)) {\n        print(&quot;This doesnt meet the condition. Try again!&quot;);\n        continue;\n    }\n}\n</code></pre>\n<p><code>continue</code> does the job of repeating the condition &quot;anew&quot;, but I am not sure about what would be the best way to exit the loop?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":4140837,"reputation":1308,"user_id":3396216,"accept_rate":88,"display_name":"Shakir Ahamed"},"score":0,"creation_date":1395586343,"post_id":22592401,"comment_id":34395370,"body_markdown":"It&#39;s means Web camera","body":"It&#39;s means Web camera"},{"owner":{"account_id":147727,"reputation":12641,"user_id":359035,"accept_rate":92,"display_name":"BillRobertson42"},"score":0,"creation_date":1395593472,"post_id":22592401,"comment_id":34398120,"body_markdown":"Hi, maybe it would help if you made your question a little bit more specific. For example, &quot;After getting an image with Java Media&#39;s FrameGrabbingControl, how do I stop the camera?&quot;","body":"Hi, maybe it would help if you made your question a little bit more specific. For example, &quot;After getting an image with Java Media&#39;s FrameGrabbingControl, how do I stop the camera?&quot;"},{"owner":{"account_id":147727,"reputation":12641,"user_id":359035,"accept_rate":92,"display_name":"BillRobertson42"},"score":0,"creation_date":1395593934,"post_id":22592401,"comment_id":34398300,"body_markdown":"It looks like your `broadcast` object should implement the [Controller interface](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/media/jmf/2.1.1/apidocs/index.html) and you can call the [close](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/media/jmf/2.1.1/apidocs/index.html) method on that.","body":"It looks like your <code>broadcast</code> object should implement the <a href=\"http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/media/jmf/2.1.1/apidocs/index.html\" rel=\"nofollow noreferrer\">Controller interface</a> and you can call the <a href=\"http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/media/jmf/2.1.1/apidocs/index.html\" rel=\"nofollow noreferrer\">close</a> method on that."}],"owner":{"account_id":4140837,"reputation":1308,"user_id":3396216,"accept_rate":88,"display_name":"Shakir Ahamed"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":347,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665663846,"creation_date":1395586059,"question_id":22592401,"body_markdown":"I want to capture an image using an available webcam. I have successfully accessed the webcam but I couldn&#39;t stop the webcam process. I want to stop the webcam process using a stop button. How can I accomplish this? This my code:\r\n\r\n    public Component componen() throws IOException , NoPlayerException, CannotRealizeException\r\n            {\r\n                \r\n                Component comp_video;\r\n                MediaLocator loo = new MediaLocator(&quot;vfw://0&quot;);\r\n                try {\r\n                    broadcast = Manager.createRealizedPlayer(loo);\r\n                } catch (IOException ex) {\r\n                    Logger.getLogger(CapturImage.class.getName()).log(Level.SEVERE, null, ex);\r\n                } catch (NoPlayerException ex) {\r\n                    Logger.getLogger(CapturImage.class.getName()).log(Level.SEVERE, null, ex);\r\n                } catch (CannotRealizeException ex) {\r\n                    Logger.getLogger(CapturImage.class.getName()).log(Level.SEVERE, null, ex);\r\n                }\r\n                broadcast.start();\r\n                \r\n                if((comp_video = broadcast.getVisualComponent()) != null)\r\n                {\r\n                    comp_video.setSize(321,228);\r\n                    return comp_video;\r\n                    \r\n                }\r\n                else\r\n                {\r\n                         return null;\r\n                }\r\n    \r\n        }\r\n\r\n    public void capture_image()\r\n    {\r\n        FrameGrabbingControl grab = (FrameGrabbingControl)    broadcast.getControl(&quot;javax.media.control.FrameGrabbingControl&quot;);\r\n         javax.media.Buffer buff = grab.grabFrame();\r\n         \r\n         BufferToImage buffer =new BufferToImage((VideoFormat) buff.getFormat());\r\n         img = buffer.createImage(buff);\r\n         \r\n        }\r\n\r\n    public void set_iamge_label(final JLabel lb)\r\n    {\r\n        Thread web = new Thread(){\r\n            \r\n        public void run(){\r\n       \r\n            \r\n        capture_image();\r\n        Rectangle rect = lb.getBounds();\r\n        Image img1 = img.getScaledInstance(rect.width,rect.height,Image.SCALE_DEFAULT);\r\n        lb.setIcon(new javax.swing.ImageIcon(img1));  \r\n        }\r\n        };\r\n        \r\n        web.start();\r\n    }\r\n    \r\n      ","title":"Stop process of webcam in java netbeans","body":"<p>I want to capture an image using an available webcam. I have successfully accessed the webcam but I couldn't stop the webcam process. I want to stop the webcam process using a stop button. How can I accomplish this? This my code:</p>\n\n<pre><code>public Component componen() throws IOException , NoPlayerException, CannotRealizeException\n        {\n\n            Component comp_video;\n            MediaLocator loo = new MediaLocator(\"vfw://0\");\n            try {\n                broadcast = Manager.createRealizedPlayer(loo);\n            } catch (IOException ex) {\n                Logger.getLogger(CapturImage.class.getName()).log(Level.SEVERE, null, ex);\n            } catch (NoPlayerException ex) {\n                Logger.getLogger(CapturImage.class.getName()).log(Level.SEVERE, null, ex);\n            } catch (CannotRealizeException ex) {\n                Logger.getLogger(CapturImage.class.getName()).log(Level.SEVERE, null, ex);\n            }\n            broadcast.start();\n\n            if((comp_video = broadcast.getVisualComponent()) != null)\n            {\n                comp_video.setSize(321,228);\n                return comp_video;\n\n            }\n            else\n            {\n                     return null;\n            }\n\n    }\n\npublic void capture_image()\n{\n    FrameGrabbingControl grab = (FrameGrabbingControl)    broadcast.getControl(\"javax.media.control.FrameGrabbingControl\");\n     javax.media.Buffer buff = grab.grabFrame();\n\n     BufferToImage buffer =new BufferToImage((VideoFormat) buff.getFormat());\n     img = buffer.createImage(buff);\n\n    }\n\npublic void set_iamge_label(final JLabel lb)\n{\n    Thread web = new Thread(){\n\n    public void run(){\n\n\n    capture_image();\n    Rectangle rect = lb.getBounds();\n    Image img1 = img.getScaledInstance(rect.width,rect.height,Image.SCALE_DEFAULT);\n    lb.setIcon(new javax.swing.ImageIcon(img1));  \n    }\n    };\n\n    web.start();\n}\n</code></pre>\n"},{"tags":["java","spring","validation","json-view"],"comments":[{"owner":{"account_id":4989848,"reputation":1603,"user_id":4012408,"display_name":"Rafael Guillen"},"score":0,"creation_date":1665584993,"post_id":74043530,"comment_id":130735921,"body_markdown":"Check this out: https://stackoverflow.com/questions/9257673/conditional-validations-in-spring","body":"Check this out: <a href=\"https://stackoverflow.com/questions/9257673/conditional-validations-in-spring\" title=\"conditional validations in spring\">stackoverflow.com/questions/9257673/&hellip;</a>"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1665585018,"post_id":74043530,"comment_id":130735932,"body_markdown":"I think &quot;validation groups&quot; offers the same functionality (for validation) as &quot;json views&quot; (for json;)","body":"I think &quot;validation groups&quot; offers the same functionality (for validation) as &quot;json views&quot; (for json;)"},{"owner":{"account_id":6872186,"reputation":402,"user_id":5282089,"display_name":"Jedupont"},"score":1,"creation_date":1665585247,"post_id":74043530,"comment_id":130736041,"body_markdown":"@xerx593 Yes, but I can&#39;t use my views as groups: `groups = { View.Admin.class, View.Tech.class }`","body":"@xerx593 Yes, but I can&#39;t use my views as groups: <code>groups = { View.Admin.class, View.Tech.class }</code>"},{"owner":{"account_id":6872186,"reputation":402,"user_id":5282089,"display_name":"Jedupont"},"score":0,"creation_date":1665585440,"post_id":74043530,"comment_id":130736125,"body_markdown":"@RafaelGuillen I looked at it but I have to pass the group in @Validated but now I want it to be dynamic depending on my user&#39;s role, that&#39;s my problem. I also looked at using `@GroupSequenceProvider`, but I can&#39;t @Autowired my user in the custom provider :/","body":"@RafaelGuillen I looked at it but I have to pass the group in @Validated but now I want it to be dynamic depending on my user&#39;s role, that&#39;s my problem. I also looked at using <code>@GroupSequenceProvider</code>, but I can&#39;t @Autowired my user in the custom provider :/"}],"answers":[{"comments":[{"owner":{"account_id":6872186,"reputation":402,"user_id":5282089,"display_name":"Jedupont"},"score":0,"creation_date":1665588193,"post_id":74044171,"comment_id":130737274,"body_markdown":"Thanks for your answer, but could you add a little more context please? I&#39;m not sure I understand how to use it with the`@JsonView` that already takes into account my roles","body":"Thanks for your answer, but could you add a little more context please? I&#39;m not sure I understand how to use it with the<code>@JsonView</code> that already takes into account my roles"},{"owner":{"account_id":26562047,"reputation":61,"user_id":20189731,"display_name":"mildgrey"},"score":0,"creation_date":1665588634,"post_id":74044171,"comment_id":130737440,"body_markdown":"when we create multiple related table with bidirectional relationship, in that case when we fetch column data and we want from parent table, we use  @jsonIgnore for getting data through parent table","body":"when we create multiple related table with bidirectional relationship, in that case when we fetch column data and we want from parent table, we use  @jsonIgnore for getting data through parent table"},{"owner":{"account_id":26562047,"reputation":61,"user_id":20189731,"display_name":"mildgrey"},"score":0,"creation_date":1665588698,"post_id":74044171,"comment_id":130737459,"body_markdown":"I think in this situation we also ignore the column by using @JsonIgnore annotation","body":"I think in this situation we also ignore the column by using @JsonIgnore annotation"},{"owner":{"account_id":26562047,"reputation":61,"user_id":20189731,"display_name":"mildgrey"},"score":0,"creation_date":1665588934,"post_id":74044171,"comment_id":130737563,"body_markdown":"I hope it will help you in resolving your problem","body":"I hope it will help you in resolving your problem"}],"tags":[],"owner":{"account_id":26562047,"reputation":61,"user_id":20189731,"display_name":"mildgrey"},"comment_count":4,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1665587414,"creation_date":1665587366,"answer_id":74044171,"question_id":74043530,"body_markdown":"use @JsonIgnore may help you to achieve,because it will ignore the column and validation annotation as well","title":"Disable validation annotation when filtering with Jackson @JsonView","body":"<p>use @JsonIgnore may help you to achieve,because it will ignore the column and validation annotation as well</p>\n"}],"owner":{"account_id":6872186,"reputation":402,"user_id":5282089,"display_name":"Jedupont"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":374,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1665663706,"creation_date":1665584703,"question_id":74043530,"body_markdown":"I have the same form that displays more or less fields depending on the user&#39;s role. So I use [@JsonView][1] to hide/ignore the fields that are not related to the current user&#39;s role. But the validation is still enabled and the `@NotNull` rule is triggered.\r\n\r\n```\r\n@JsonView({View.Admin.class, View.Tech.class})\r\n@NotNull\r\nprivate String name;\r\n```\r\n\r\nI would like to find a way to enable or disable some validation annotations for example when the user&#39;s role is not administrator.\r\n\r\nIs it possible to use these view (`View.Admin.class` / `View.Tech.class`) as a group for validation please?\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-security-role-filter-json#how-to-integrate","title":"Disable validation annotation when filtering with Jackson @JsonView","body":"<p>I have the same form that displays more or less fields depending on the user's role. So I use <a href=\"https://www.baeldung.com/spring-security-role-filter-json#how-to-integrate\" rel=\"nofollow noreferrer\">@JsonView</a> to hide/ignore the fields that are not related to the current user's role. But the validation is still enabled and the <code>@NotNull</code> rule is triggered.</p>\n<pre><code>@JsonView({View.Admin.class, View.Tech.class})\n@NotNull\nprivate String name;\n</code></pre>\n<p>I would like to find a way to enable or disable some validation annotations for example when the user's role is not administrator.</p>\n<p>Is it possible to use these view (<code>View.Admin.class</code> / <code>View.Tech.class</code>) as a group for validation please?</p>\n"},{"tags":["java","spring","enums","spring-el"],"comments":[{"owner":{"account_id":26552394,"reputation":306,"user_id":20181494,"display_name":"Janil101"},"score":0,"creation_date":1665661403,"post_id":74054826,"comment_id":130754551,"body_markdown":"how the getCode get it&#39;s value?","body":"how the getCode get it&#39;s value?"},{"owner":{"account_id":26562666,"reputation":119,"user_id":20190240,"display_name":"Jalena"},"score":0,"creation_date":1665663521,"post_id":74054826,"comment_id":130755281,"body_markdown":"You have to just change `exp` to `#{#targetType.getCode()}`","body":"You have to just change <code>exp</code> to <code>#{#targetType.getCode()}</code>"}],"answers":[{"comments":[{"owner":{"account_id":24772763,"reputation":1,"user_id":18656443,"display_name":"etherealss"},"score":0,"creation_date":1665753579,"post_id":74055400,"comment_id":130777935,"body_markdown":"Cool! You are right! In fact, I had spend more than one hour to sovle this bug yesterday, but I dont know what cause it. Thank you for help!","body":"Cool! You are right! In fact, I had spend more than one hour to sovle this bug yesterday, but I dont know what cause it. Thank you for help!"}],"tags":[],"owner":{"account_id":16076957,"reputation":575,"user_id":11603961,"display_name":"Mario Klisanic"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665663352,"creation_date":1665662370,"answer_id":74055400,"question_id":74054826,"body_markdown":"    String exp = &quot;#targetType.getCode()&quot;;\r\n    SpelExpressionParser parser = new SpelExpressionParser();\r\n    Expression expression = parser.parseExpression(exp);\r\n    EvaluationContext context = new StandardEvaluationContext();\r\n    context.setVariable(&quot;targetType&quot;, FavorTargetType.ARTICLE);\r\n    String value = expression.getValue(context, String.class);\r\n    System.out.println(value);  // &lt;--- prints out 1\r\n\r\nIs there a specific reason you were passing `new TemplateParserContext()` to the `parseExpression()` method? Because when you do pass that argument it means you want to parse template and that is not what you are doing in this case.\r\n\r\n&gt; Supports parsing templates as well as standard expression strings.\r\n\r\n^ Taken from [docs][1] we can clearly see that this method can be used when parsing both templates and expression strings, you were using the right function with wrong parameters.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/expression/ExpressionParser.html","title":"Something wrong when i used SpelExpressionParser to parse a expression with enum","body":"<pre><code>String exp = &quot;#targetType.getCode()&quot;;\nSpelExpressionParser parser = new SpelExpressionParser();\nExpression expression = parser.parseExpression(exp);\nEvaluationContext context = new StandardEvaluationContext();\ncontext.setVariable(&quot;targetType&quot;, FavorTargetType.ARTICLE);\nString value = expression.getValue(context, String.class);\nSystem.out.println(value);  // &lt;--- prints out 1\n</code></pre>\n<p>Is there a specific reason you were passing <code>new TemplateParserContext()</code> to the <code>parseExpression()</code> method? Because when you do pass that argument it means you want to parse template and that is not what you are doing in this case.</p>\n<blockquote>\n<p>Supports parsing templates as well as standard expression strings.</p>\n</blockquote>\n<p>^ Taken from <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/expression/ExpressionParser.html\" rel=\"nofollow noreferrer\">docs</a> we can clearly see that this method can be used when parsing both templates and expression strings, you were using the right function with wrong parameters.</p>\n"},{"tags":[],"owner":{"account_id":26552394,"reputation":306,"user_id":20181494,"display_name":"Janil101"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665663110,"creation_date":1665663110,"answer_id":74055574,"question_id":74054826,"body_markdown":"try this it is working\r\n```\r\npackage com.example.test;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonValue;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Getter;\r\nimport org.springframework.expression.EvaluationContext;\r\nimport org.springframework.expression.Expression;\r\nimport org.springframework.expression.common.TemplateParserContext;\r\nimport org.springframework.expression.spel.standard.SpelExpressionParser;\r\nimport org.springframework.expression.spel.support.StandardEvaluationContext;\r\n\r\npublic class SpELTest {\r\n    public static void main(String[] args) {\r\n        EvaluationContext context = new StandardEvaluationContext();\r\n        context.setVariable(&quot;targetType&quot;, FavorTargetType.ARTICLE);\r\n        String exp = &quot;#targetType.getCode()&quot;;\r\n        SpelExpressionParser parser = new SpelExpressionParser();\r\n        Expression expression = parser.parseExpression(exp);\r\n        // SpelEvaluationException: EL1007E: Property or field &#39;targetType&#39; cannot be found on null\r\n        String value = expression.getValue(context,String.class);\r\n        System.out.println(value);\r\n    }\r\n    @Getter\r\n    @AllArgsConstructor\r\n    public enum FavorTargetType implements BaseEnum {\r\n        ARTICLE(1, &quot;article&quot;),\r\n        POSTS(2, &quot;posts&quot;),\r\n        COMMENT(3, &quot;comment&quot;)\r\n        ;\r\n        private final int code;\r\n        private final String name;\r\n    }\r\n    public interface BaseEnum {\r\n        @JsonValue\r\n        int getCode();\r\n        String getName();\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n```","title":"Something wrong when i used SpelExpressionParser to parse a expression with enum","body":"<p>try this it is working</p>\n<pre><code>package com.example.test;\n\nimport com.fasterxml.jackson.annotation.JsonValue;\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport org.springframework.expression.EvaluationContext;\nimport org.springframework.expression.Expression;\nimport org.springframework.expression.common.TemplateParserContext;\nimport org.springframework.expression.spel.standard.SpelExpressionParser;\nimport org.springframework.expression.spel.support.StandardEvaluationContext;\n\npublic class SpELTest {\n    public static void main(String[] args) {\n        EvaluationContext context = new StandardEvaluationContext();\n        context.setVariable(&quot;targetType&quot;, FavorTargetType.ARTICLE);\n        String exp = &quot;#targetType.getCode()&quot;;\n        SpelExpressionParser parser = new SpelExpressionParser();\n        Expression expression = parser.parseExpression(exp);\n        // SpelEvaluationException: EL1007E: Property or field 'targetType' cannot be found on null\n        String value = expression.getValue(context,String.class);\n        System.out.println(value);\n    }\n    @Getter\n    @AllArgsConstructor\n    public enum FavorTargetType implements BaseEnum {\n        ARTICLE(1, &quot;article&quot;),\n        POSTS(2, &quot;posts&quot;),\n        COMMENT(3, &quot;comment&quot;)\n        ;\n        private final int code;\n        private final String name;\n    }\n    public interface BaseEnum {\n        @JsonValue\n        int getCode();\n        String getName();\n    }\n\n}\n\n\n\n\n\n</code></pre>\n"}],"owner":{"account_id":24772763,"reputation":1,"user_id":18656443,"display_name":"etherealss"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":374,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1665663352,"creation_date":1665659520,"question_id":74054826,"body_markdown":"Code show as below:\r\n```java\r\npublic class SpELTest {\r\n    public static void main(String[] args) {\r\n        EvaluationContext context = new StandardEvaluationContext();\r\n        context.setVariable(&quot;targetType&quot;, FavorTargetType.ARTICLE);\r\n        String exp = &quot;#{targetType.getCode()}&quot;;\r\n        SpelExpressionParser parser = new SpelExpressionParser();\r\n        Expression expression = parser.parseExpression(exp, new TemplateParserContext());\r\n        // SpelEvaluationException: EL1007E: Property or field &#39;targetType&#39; cannot be found on null\r\n        String value = expression.getValue(context, String.class);\r\n        System.out.println(value);\r\n    }\r\n}\r\n\r\n@Getter\r\n@AllArgsConstructor\r\npublic enum FavorTargetType implements BaseEnum {\r\n    ARTICLE(1, &quot;article&quot;),\r\n    POSTS(2, &quot;posts&quot;),\r\n    COMMENT(3, &quot;comment&quot;)\r\n    ;\r\n    private final int code;\r\n    private final String name;\r\n}\r\npublic interface BaseEnum {\r\n    @JsonValue\r\n    int getCode();\r\n    String getName();\r\n}\r\n```\r\nWhen I run the code I will get a SpelEvaluationException: EL1007E: Property or field &#39;targetType&#39; cannot be found on null. But as you can see, targetType is not null. So where am I going wrong? Please help me! Thanks!","title":"Something wrong when i used SpelExpressionParser to parse a expression with enum","body":"<p>Code show as below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SpELTest {\n    public static void main(String[] args) {\n        EvaluationContext context = new StandardEvaluationContext();\n        context.setVariable(&quot;targetType&quot;, FavorTargetType.ARTICLE);\n        String exp = &quot;#{targetType.getCode()}&quot;;\n        SpelExpressionParser parser = new SpelExpressionParser();\n        Expression expression = parser.parseExpression(exp, new TemplateParserContext());\n        // SpelEvaluationException: EL1007E: Property or field 'targetType' cannot be found on null\n        String value = expression.getValue(context, String.class);\n        System.out.println(value);\n    }\n}\n\n@Getter\n@AllArgsConstructor\npublic enum FavorTargetType implements BaseEnum {\n    ARTICLE(1, &quot;article&quot;),\n    POSTS(2, &quot;posts&quot;),\n    COMMENT(3, &quot;comment&quot;)\n    ;\n    private final int code;\n    private final String name;\n}\npublic interface BaseEnum {\n    @JsonValue\n    int getCode();\n    String getName();\n}\n</code></pre>\n<p>When I run the code I will get a SpelEvaluationException: EL1007E: Property or field 'targetType' cannot be found on null. But as you can see, targetType is not null. So where am I going wrong? Please help me! Thanks!</p>\n"},{"tags":["java","nullpointerexception","nodes"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":5,"creation_date":1665475977,"post_id":74024956,"comment_id":130703057,"body_markdown":"If something throws a `NullPointerException`, don&#39;t ignore it: fix it.","body":"If something throws a <code>NullPointerException</code>, don&#39;t ignore it: fix it."},{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1665476548,"post_id":74024956,"comment_id":130703272,"body_markdown":"The code with all the null checks is verbose, but it&#39;s not inefficient.","body":"The code with all the null checks is verbose, but it&#39;s not inefficient."}],"answers":[{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1665476070,"creation_date":1665476070,"answer_id":74024999,"question_id":74024956,"body_markdown":"&gt; How should i go about this?\r\n\r\nDon&#39;t. Just don&#39;t. Ignoring (or attempting to ignore) exceptions is not a good practice.\r\n\r\n&gt; This seems like inefficient code.\r\n\r\nIt&#39;s not. Checking if something is null is _vastly_ more efficient than creating a `NullPointerException`.\r\n\r\nConsider that creating an exception requires the JVM to walk all the way back up the stack to create the stack trace; compare that to a single bytecode instruction to check if a thing is null.","title":"How to ignore statements throwing NullPointerException in java?","body":"<blockquote>\n<p>How should i go about this?</p>\n</blockquote>\n<p>Don't. Just don't. Ignoring (or attempting to ignore) exceptions is not a good practice.</p>\n<blockquote>\n<p>This seems like inefficient code.</p>\n</blockquote>\n<p>It's not. Checking if something is null is <em>vastly</em> more efficient than creating a <code>NullPointerException</code>.</p>\n<p>Consider that creating an exception requires the JVM to walk all the way back up the stack to create the stack trace; compare that to a single bytecode instruction to check if a thing is null.</p>\n"},{"tags":[],"owner":{"account_id":1948681,"reputation":522,"user_id":1753273,"accept_rate":86,"display_name":"agaonsindhe"},"comment_count":0,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1665663280,"creation_date":1665476135,"answer_id":74025009,"question_id":74024956,"body_markdown":"NullPointerExceptions must be fixed. \r\nUse Optional from Java 8 to effectively handle such situations.","title":"How to ignore statements throwing NullPointerException in java?","body":"<p>NullPointerExceptions must be fixed.\nUse Optional from Java 8 to effectively handle such situations.</p>\n"}],"owner":{"account_id":14110570,"reputation":1,"user_id":10193534,"display_name":"Ashish verma"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":2,"score":-3,"last_activity_date":1665663280,"creation_date":1665475891,"question_id":74024956,"body_markdown":"I have a linked list like structure of Node objects.\r\n\r\n```\r\nclass Node {\r\n    int key;\r\n    Node prev;   //previous Node\r\n    Node next;   //next Node\r\n}\r\n```\r\n\r\nNow, to delete a node N of this chain, there are four cases, N.prev being null, N.next being null, both of them being null or neither of them. It leads to four checks in code.\r\n\r\n```\r\nvoid delete(Node N) {\r\n    Node Prev = N.prev;\r\n    Node Next = N.next;\r\n\r\n    //Case: N is the only node in list\r\n    if (Prev == null &amp;&amp; Next == null) {\r\n        TreeHead = null;          //Treehead is the first Node of list\r\n    }\r\n    //Case: N is the starting node\r\n    else if (Prev == null) {\r\n        Next.prev = null;\r\n        TreeHead = n;\r\n    }\r\n    //Case: N is the last node\r\n    else if (Next == null) {\r\n        Prev.next = null;\r\n    }\r\n    //Case: N is neither first nor last\r\n    else {\r\n        Prev.next = Next;\r\n        Next.prev = Prev;\r\n    }\r\n}\r\n```\r\nThis seems like inefficient code. I can write it like this(see below), but it will throw NullPointerException when an property of null object is accessed. I want to just ignore the statement if the object is null and move onto next line. How should i go about this?\r\n```\r\nstatic void delete(Node N) {\r\n    Node Prev = N.prev;\r\n    Node Next = N.next;\r\n\r\n    if(Next == null &amp;&amp; Prev == null) {TreeHead = null;return;}\r\n    Prev.next = Next;\r\n    Next.prev = Prev;\r\n    //if Next becomes the starting node\r\n    if(Next.prev == null) TreeHead = Next;\r\n}\r\n```","title":"How to ignore statements throwing NullPointerException in java?","body":"<p>I have a linked list like structure of Node objects.</p>\n<pre><code>class Node {\n    int key;\n    Node prev;   //previous Node\n    Node next;   //next Node\n}\n</code></pre>\n<p>Now, to delete a node N of this chain, there are four cases, N.prev being null, N.next being null, both of them being null or neither of them. It leads to four checks in code.</p>\n<pre><code>void delete(Node N) {\n    Node Prev = N.prev;\n    Node Next = N.next;\n\n    //Case: N is the only node in list\n    if (Prev == null &amp;&amp; Next == null) {\n        TreeHead = null;          //Treehead is the first Node of list\n    }\n    //Case: N is the starting node\n    else if (Prev == null) {\n        Next.prev = null;\n        TreeHead = n;\n    }\n    //Case: N is the last node\n    else if (Next == null) {\n        Prev.next = null;\n    }\n    //Case: N is neither first nor last\n    else {\n        Prev.next = Next;\n        Next.prev = Prev;\n    }\n}\n</code></pre>\n<p>This seems like inefficient code. I can write it like this(see below), but it will throw NullPointerException when an property of null object is accessed. I want to just ignore the statement if the object is null and move onto next line. How should i go about this?</p>\n<pre><code>static void delete(Node N) {\n    Node Prev = N.prev;\n    Node Next = N.next;\n\n    if(Next == null &amp;&amp; Prev == null) {TreeHead = null;return;}\n    Prev.next = Next;\n    Next.prev = Prev;\n    //if Next becomes the starting node\n    if(Next.prev == null) TreeHead = Next;\n}\n</code></pre>\n"},{"tags":["java","yaml","snakeyaml"],"comments":[{"owner":{"account_id":20146581,"reputation":3244,"user_id":14774959,"display_name":"ClaudiaR"},"score":0,"creation_date":1665737451,"post_id":74055464,"comment_id":130772790,"body_markdown":"Please show your current attempt and the exception that you get","body":"Please show your current attempt and the exception that you get"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1665737456,"post_id":74055464,"comment_id":130772793,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":141151,"reputation":36461,"user_id":347964,"accept_rate":79,"display_name":"flyx"},"score":0,"creation_date":1665833180,"post_id":74055464,"comment_id":130793883,"body_markdown":"In particular, you need to show what you have implemented to process those `!include` tags.","body":"In particular, you need to show what you have implemented to process those <code>!include</code> tags."}],"owner":{"account_id":23791468,"reputation":11,"user_id":17802855,"display_name":"Harish Algat"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665662621,"creation_date":1665662621,"question_id":74055464,"body_markdown":"I am trying to parse below yaml file content to java object but getting excepion.\r\n\r\n\r\nthis is yaml file content \r\n\r\nbeforeSuiteActions:\r\n  - !include \\commonSteps\\getConfig.yaml\r\n  - !include \\commonSteps\\adminLogin.yaml\r\n  - !include \\commonSteps\\login.yaml\r\n  - !include \\commonSteps\\getDeviceDomain.yaml\r\n  - !include \\commonSteps\\getLinearChannels.yaml\r\n  - !include \\commonSteps\\getAssetList.yaml\r\n\r\n\r\ncan anyone suggest why it is giving exception","title":"SnakeYaml parsing Yaml files to java Objects","body":"<p>I am trying to parse below yaml file content to java object but getting excepion.</p>\n<p>this is yaml file content</p>\n<p>beforeSuiteActions:</p>\n<ul>\n<li>!include \\commonSteps\\getConfig.yaml</li>\n<li>!include \\commonSteps\\adminLogin.yaml</li>\n<li>!include \\commonSteps\\login.yaml</li>\n<li>!include \\commonSteps\\getDeviceDomain.yaml</li>\n<li>!include \\commonSteps\\getLinearChannels.yaml</li>\n<li>!include \\commonSteps\\getAssetList.yaml</li>\n</ul>\n<p>can anyone suggest why it is giving exception</p>\n"},{"tags":["java","android","location","currency"],"comments":[{"owner":{"account_id":8130642,"reputation":108,"user_id":6124047,"display_name":"ntepp jean marc"},"score":0,"creation_date":1663060590,"post_id":73700018,"comment_id":130144562,"body_markdown":"You can use Java [java.util.Currency](https://docs.oracle.com/javase/7/docs/api/java/util/Currency.html) class `Currency.getInstance(Locale.US).getCurrencyCode()`","body":"You can use Java <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Currency.html\" rel=\"nofollow noreferrer\">java.util.Currency</a> class <code>Currency.getInstance(Locale.US).getCurrencyCode()</code>"}],"answers":[{"tags":[],"owner":{"account_id":18702501,"reputation":23,"user_id":13634409,"display_name":"Hatem Darwish"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665662586,"creation_date":1663060227,"answer_id":73700355,"question_id":73700018,"body_markdown":"You can use ([Locale][1] And [Currency][2]) classes to find currency code.\r\n\r\nLike:\r\n\r\n    final TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);\r\n    final String simCountry = tm.getSimCountryIso();\r\n    if (simCountry != null &amp;&amp; simCountry.length() == 2) { \r\n        String country_code = simCountry.toLowerCase(Locale.US);\r\n        Currency.getInstance(new Locale(&quot;&quot;, country_code)).getCurrencyCode()\r\n    }\r\n\r\n\r\n    //  Currency.getInstance(new Locale(&quot;&quot;, &quot;us&quot;)).getCurrencyCode() -- This Return USD\r\n    //  Currency.getInstance(new Locale(&quot;&quot;, &quot;in&quot;)).getCurrencyCode() -- This Retrun INR\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/Locale.html\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/util/Currency.html","title":"How to get currency according to country code in Android?","body":"<p>You can use (<a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Locale.html\" rel=\"nofollow noreferrer\">Locale</a> And <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Currency.html\" rel=\"nofollow noreferrer\">Currency</a>) classes to find currency code.</p>\n<p>Like:</p>\n<pre><code>final TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);\nfinal String simCountry = tm.getSimCountryIso();\nif (simCountry != null &amp;&amp; simCountry.length() == 2) { \n    String country_code = simCountry.toLowerCase(Locale.US);\n    Currency.getInstance(new Locale(&quot;&quot;, country_code)).getCurrencyCode()\n}\n\n\n//  Currency.getInstance(new Locale(&quot;&quot;, &quot;us&quot;)).getCurrencyCode() -- This Return USD\n//  Currency.getInstance(new Locale(&quot;&quot;, &quot;in&quot;)).getCurrencyCode() -- This Retrun INR\n</code></pre>\n"}],"owner":{"account_id":14058986,"reputation":47,"user_id":10155542,"display_name":"Mukesh Roy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":470,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1665662586,"creation_date":1663058737,"question_id":73700018,"body_markdown":"In below code I can get country code (2 alpha). Is it possible to get currency according to the country code? If yes please tell me how? I don&#39;t want to add any runtime permission for this app.\r\n\r\n    final TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);\r\n    final String simCountry = tm.getSimCountryIso();\r\n    if (simCountry != null &amp;&amp; simCountry.length() == 2) { // SIM country code is available\r\n        String country_code = simCountry.toLowerCase(Locale.US);\r\n        //return result - &quot;in&quot;. (for India)\r\n        //here I want to get the currency according to the country code\r\n    }","title":"How to get currency according to country code in Android?","body":"<p>In below code I can get country code (2 alpha). Is it possible to get currency according to the country code? If yes please tell me how? I don't want to add any runtime permission for this app.</p>\n<pre><code>final TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);\nfinal String simCountry = tm.getSimCountryIso();\nif (simCountry != null &amp;&amp; simCountry.length() == 2) { // SIM country code is available\n    String country_code = simCountry.toLowerCase(Locale.US);\n    //return result - &quot;in&quot;. (for India)\n    //here I want to get the currency according to the country code\n}\n</code></pre>\n"},{"tags":["java","spring","multithreading","concurrency"],"comments":[{"owner":{"account_id":26301533,"reputation":1119,"user_id":19966820,"display_name":"YJR"},"score":1,"creation_date":1665650566,"post_id":74052686,"comment_id":130751050,"body_markdown":"I can not understand what you want to do and why do you not using repo.save?","body":"I can not understand what you want to do and why do you not using repo.save?"},{"owner":{"account_id":5193931,"reputation":419,"user_id":4155906,"accept_rate":31,"display_name":"Thejas"},"score":0,"creation_date":1665650739,"post_id":74052686,"comment_id":130751106,"body_markdown":"@VJR the executor service is called twice right so I want 2 records to be inserted. Now one record is inserted, for the second one I get duplicate key exception","body":"@VJR the executor service is called twice right so I want 2 records to be inserted. Now one record is inserted, for the second one I get duplicate key exception"},{"owner":{"account_id":5193931,"reputation":419,"user_id":4155906,"accept_rate":31,"display_name":"Thejas"},"score":0,"creation_date":1665655024,"post_id":74052686,"comment_id":130752490,"body_markdown":"@VJR The question is about concurrent insertion and not about jpa save method!. I have updated my question removing  the custom insert for the sake of simplicity","body":"@VJR The question is about concurrent insertion and not about jpa save method!. I have updated my question removing  the custom insert for the sake of simplicity"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1665656606,"post_id":74052686,"comment_id":130753013,"body_markdown":"Please read https://vladmihalcea.com/jpa-entity-version-property-hibernate/ (esp. the (NOT) &quot;Changing the entity version&quot; part;)","body":"Please read <a href=\"https://vladmihalcea.com/jpa-entity-version-property-hibernate/\" rel=\"nofollow noreferrer\">vladmihalcea.com/jpa-entity-version-property-hibernate</a> (esp. the (NOT) &quot;Changing the entity version&quot; part;)"}],"answers":[{"tags":[],"owner":{"account_id":26564177,"reputation":36,"user_id":20191548,"display_name":"AbhishekVinayak"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665658543,"creation_date":1665658543,"answer_id":74054605,"question_id":74052686,"body_markdown":"@Version annotation is making the version header values lockup and generating the same values. Here is the use case of [@Version][1] annotation. Try making it a serial generated value.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javaee/5/api/javax/persistence/Version.html#:~:text=Annotation%20Type%20Version&amp;text=This%20annotation%20specifies%20the%20version,and%20for%20optimistic%20concurrency%20control.","title":"Insert Concurrently in jpa","body":"<p>@Version annotation is making the version header values lockup and generating the same values. Here is the use case of <a href=\"https://docs.oracle.com/javaee/5/api/javax/persistence/Version.html#:%7E:text=Annotation%20Type%20Version&amp;text=This%20annotation%20specifies%20the%20version,and%20for%20optimistic%20concurrency%20control.\" rel=\"nofollow noreferrer\">@Version</a> annotation. Try making it a serial generated value.</p>\n"}],"owner":{"account_id":5193931,"reputation":419,"user_id":4155906,"accept_rate":31,"display_name":"Thejas"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":303,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1665662583,"creation_date":1665649796,"question_id":74052686,"body_markdown":"I am working on a project where we have to insert record into a table concurrently.\r\n\r\nexample if 2 instances are inserting the data into a table then the execution should be concurrent. I want both the records to be inserted into the database.\r\n\r\nBelow is the entity class\r\n\r\n    @Entity\r\n    public class Department {\r\n      @Id\r\n      @GeneratedValue\r\n      private Integer id;\r\n      @Version\r\n      private long version;\r\n      private Integer address\r\n      private String name;\r\n       \r\n    }\r\n\r\n Below is the Executor service\r\n\r\n  \r\n\r\n \r\n\r\n    public class EmployeeUpdateWithoutForceIncrement {\r\n    \r\n    \r\n      public static void main(String[] args) throws Exception {\r\n          ExecutorService es = Executors.newFixedThreadPool(2);\r\n         \r\n              \r\n              es.execute(() -&gt; {\r\n                  saveEmployee();\r\n              });\r\n              es.execute(() -&gt; {\r\n                 saveEmployee();\r\n              });\r\n              es.shutdown();\r\n              es.awaitTermination(10, TimeUnit.SECONDS);\r\n          } \r\n    }\r\nI have not added the static main class here in order to keep it short\r\n\r\n   \r\n\r\n  \r\n\r\n   \r\n\r\n    saveEmployee(){\r\n            List&lt;Employee&gt; elist=rpo.findAll();\r\n            Employee e=elist.get(el.size()-1);\r\n            e.setAddress(e.getAddress()+1);\r\n            repo.save(e);\r\n            }\r\n**Excepted Output**\r\n  \r\n\r\n        id  name  Address\r\n        1   test    1\r\n        2   test2   2\r\n        3   test2   3\r\n\r\n**Actual Output**\r\n  \r\n    id  name  Address\r\n    1   test    1\r\n    2   test2   2\r\n    3   test2   2\r\n\r\n\r\n How can I make this work. I want both the record to be inserted with incremental address.\r\nAddress should be max value of previous record stored in the db\r\n","title":"Insert Concurrently in jpa","body":"<p>I am working on a project where we have to insert record into a table concurrently.</p>\n<p>example if 2 instances are inserting the data into a table then the execution should be concurrent. I want both the records to be inserted into the database.</p>\n<p>Below is the entity class</p>\n<pre><code>@Entity\npublic class Department {\n  @Id\n  @GeneratedValue\n  private Integer id;\n  @Version\n  private long version;\n  private Integer address\n  private String name;\n   \n}\n</code></pre>\n<p>Below is the Executor service</p>\n<pre><code>public class EmployeeUpdateWithoutForceIncrement {\n\n\n  public static void main(String[] args) throws Exception {\n      ExecutorService es = Executors.newFixedThreadPool(2);\n     \n          \n          es.execute(() -&gt; {\n              saveEmployee();\n          });\n          es.execute(() -&gt; {\n             saveEmployee();\n          });\n          es.shutdown();\n          es.awaitTermination(10, TimeUnit.SECONDS);\n      } \n}\n</code></pre>\n<p>I have not added the static main class here in order to keep it short</p>\n<pre><code>saveEmployee(){\n        List&lt;Employee&gt; elist=rpo.findAll();\n        Employee e=elist.get(el.size()-1);\n        e.setAddress(e.getAddress()+1);\n        repo.save(e);\n        }\n</code></pre>\n<p><strong>Excepted Output</strong></p>\n<pre><code>    id  name  Address\n    1   test    1\n    2   test2   2\n    3   test2   3\n</code></pre>\n<p><strong>Actual Output</strong></p>\n<pre><code>id  name  Address\n1   test    1\n2   test2   2\n3   test2   2\n</code></pre>\n<p>How can I make this work. I want both the record to be inserted with incremental address.\nAddress should be max value of previous record stored in the db</p>\n"},{"tags":["java","android","android-studio","permissions","google-play-console"],"answers":[{"tags":[],"owner":{"account_id":18702501,"reputation":23,"user_id":13634409,"display_name":"Hatem Darwish"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665662543,"creation_date":1665662220,"answer_id":74055364,"question_id":74054692,"body_markdown":"We cannot determine what if you collect user data from manifest file, but depend on your manifest.\r\n\r\nandroid.permission.ACCESS_NETWORK_STATE is needed for accessing ConnectivityManager (mainly for monitoring network connections in general), while android.permission.ACCESS_WIFI_STATE grants access to WifiManager (for managing all aspects of Wi-Fi connectivity in particular).\r\n\r\nIn the latest release of Google Play, Google removed the need to ask permission for internet as &quot;most apps need it anyways nowadays&quot;. However, for users who have older versions, it is still recommended to leave the code below in your manifest.\r\n\r\nIf the app doesn&#39;t contain any ads:\r\nYou can simply remove/ignore it by adding tools:node=&quot;remove&quot; in the AndroidManifest.xml file.\r\n\r\n    &lt;uses-permission android:name=&quot;com.google.android.gms.permission.AD_ID&quot; tools:node=&quot;remove&quot;/&gt;\r\n\r\nEven if another third-party library asks for this specific permission, the build will be forced not to merge it in your final Manifest file. You can get more info from this [SO answer][1].\r\n\r\nAlso you can read about all permission from this [link][2].\r\n\r\nFinally, don&#39;t worry depend on your manifest they can&#39;t be determine if you collect user data or not.\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/39353173/android-find-out-which-third-party-library-is-requesting-a-permission/39353246#39353246\r\n  [2]: https://developer.android.com/reference/android/Manifest.permission","title":"What permissions are considered collection of users&#39; data?","body":"<p>We cannot determine what if you collect user data from manifest file, but depend on your manifest.</p>\n<p>android.permission.ACCESS_NETWORK_STATE is needed for accessing ConnectivityManager (mainly for monitoring network connections in general), while android.permission.ACCESS_WIFI_STATE grants access to WifiManager (for managing all aspects of Wi-Fi connectivity in particular).</p>\n<p>In the latest release of Google Play, Google removed the need to ask permission for internet as &quot;most apps need it anyways nowadays&quot;. However, for users who have older versions, it is still recommended to leave the code below in your manifest.</p>\n<p>If the app doesn't contain any ads:\nYou can simply remove/ignore it by adding tools:node=&quot;remove&quot; in the AndroidManifest.xml file.</p>\n<pre><code>&lt;uses-permission android:name=&quot;com.google.android.gms.permission.AD_ID&quot; tools:node=&quot;remove&quot;/&gt;\n</code></pre>\n<p>Even if another third-party library asks for this specific permission, the build will be forced not to merge it in your final Manifest file. You can get more info from this <a href=\"https://stackoverflow.com/questions/39353173/android-find-out-which-third-party-library-is-requesting-a-permission/39353246#39353246\">SO answer</a>.</p>\n<p>Also you can read about all permission from this <a href=\"https://developer.android.com/reference/android/Manifest.permission\" rel=\"nofollow noreferrer\">link</a>.</p>\n<p>Finally, don't worry depend on your manifest they can't be determine if you collect user data or not.</p>\n"}],"owner":{"account_id":26581201,"reputation":17,"user_id":20205826,"display_name":"AlecW123"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1665662543,"creation_date":1665658954,"question_id":74054692,"body_markdown":"I have recently rolled out a simple app and it is currently still in review. When I filled out the questions I remember that I was asked whether my app collects data or not and I stated no. I am wondering if I chose the right option since I am not so sure now.\r\n\r\nThese are my permissions in my manifest file:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;com.google.android.gms.permission.AD_ID&quot;/&gt;\r\n\r\nI also am not sure if this log code is considered collection of data which is part of my app.\r\n\r\n    Log.d(&quot;TAG&quot;, &quot;The interstitial ad wasn&#39;t ready yet.&quot;);\r\n\r\nand \r\n\r\n    Log.d(LOG_TAG, &quot;onStart&quot;);\r\n\r\nThese log code segments are the same ones available on the ad guide pages for android developers, I&#39;ve integrated, app open ads, interstitial and banner ads. Also all the permissions are purely to allow the user to be able to see the ads so I&#39;m not sure if this is considered collecting data. My application can work without any internet connection.\r\n\r\nI have also made my app available to users from the ages of 6 and above as I believe that it is simple enough to use. Do I need to add in any special code that asks for permission because of this or does my app have to be made specifically for a certain age group if its below the ages of 13? I read through the policies but I don&#39;t consider that I&#39;m collecting data or have violated any policies, or showing any type of inappropriate ads as I have disabled all these types of potential ads in my admob account for this specific ad. I&#39;m not sure if I&#39;ve done everything right or not, can someone tell me how this should be handled as I have not added any targeting code in my app. Its just the basic ad code that I have added to my app.","title":"What permissions are considered collection of users&#39; data?","body":"<p>I have recently rolled out a simple app and it is currently still in review. When I filled out the questions I remember that I was asked whether my app collects data or not and I stated no. I am wondering if I chose the right option since I am not so sure now.</p>\n<p>These are my permissions in my manifest file:</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n&lt;uses-permission android:name=&quot;com.google.android.gms.permission.AD_ID&quot;/&gt;\n</code></pre>\n<p>I also am not sure if this log code is considered collection of data which is part of my app.</p>\n<pre><code>Log.d(&quot;TAG&quot;, &quot;The interstitial ad wasn't ready yet.&quot;);\n</code></pre>\n<p>and</p>\n<pre><code>Log.d(LOG_TAG, &quot;onStart&quot;);\n</code></pre>\n<p>These log code segments are the same ones available on the ad guide pages for android developers, I've integrated, app open ads, interstitial and banner ads. Also all the permissions are purely to allow the user to be able to see the ads so I'm not sure if this is considered collecting data. My application can work without any internet connection.</p>\n<p>I have also made my app available to users from the ages of 6 and above as I believe that it is simple enough to use. Do I need to add in any special code that asks for permission because of this or does my app have to be made specifically for a certain age group if its below the ages of 13? I read through the policies but I don't consider that I'm collecting data or have violated any policies, or showing any type of inappropriate ads as I have disabled all these types of potential ads in my admob account for this specific ad. I'm not sure if I've done everything right or not, can someone tell me how this should be handled as I have not added any targeting code in my app. Its just the basic ad code that I have added to my app.</p>\n"},{"tags":["java","spring-boot","docker","gradle","apple-m1"],"comments":[{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1652734015,"post_id":72264754,"comment_id":127673319,"body_markdown":"You should re-run this with --stacktrace and --debug so that you can get more insight into this.","body":"You should re-run this with --stacktrace and --debug so that you can get more insight into this."}],"answers":[{"tags":[],"owner":{"account_id":17590903,"reputation":26,"user_id":12762794,"display_name":"Gerard Molina"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1665662300,"creation_date":1665586867,"answer_id":74044048,"question_id":72264754,"body_markdown":"I had the same problem, and I had to do the following to make it work:\r\n\r\n1. Upgrading my [docker desktop][1] version seems to have fixed it.\r\n2. Using amd64 architecture (`amd64/gradle:7.5.0-jdk18-alpine`) for the docker image\r\n\r\n\r\nI hope it helps.\r\n\r\n\r\n  [1]: https://docs.docker.com/desktop/mac/apple-silicon/","title":"M1 Mac A problem occurred starting process &#39;Gradle build daemon&#39;","body":"<p>I had the same problem, and I had to do the following to make it work:</p>\n<ol>\n<li>Upgrading my <a href=\"https://docs.docker.com/desktop/mac/apple-silicon/\" rel=\"nofollow noreferrer\">docker desktop</a> version seems to have fixed it.</li>\n<li>Using amd64 architecture (<code>amd64/gradle:7.5.0-jdk18-alpine</code>) for the docker image</li>\n</ol>\n<p>I hope it helps.</p>\n"}],"owner":{"account_id":15366056,"reputation":47,"user_id":11286307,"display_name":"Shrek.Spongebob"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2365,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74044048,"answer_count":1,"score":0,"last_activity_date":1665662300,"creation_date":1652730095,"question_id":72264754,"body_markdown":"I cloned [this repo](https://github.com/dantheman213/java-spring-gradle-docker-mvc-rest-starter-app) and attempted to run it on my M1 Mac by running the command `docker-compose up --build -d` in the terminal, and this was the output:\r\n\r\n```\r\nBuilding myapp\r\n[+] Building 144.5s (13/14)                                                     \r\n =&gt; [internal] load build definition from Dockerfile                       0.0s\r\n =&gt; =&gt; transferring dockerfile: 536B                                       0.0s\r\n =&gt; [internal] load .dockerignore                                          0.0s\r\n =&gt; =&gt; transferring context: 2B                                            0.0s\r\n =&gt; [internal] load metadata for docker.io/library/openjdk:13              1.0s\r\n =&gt; [auth] library/openjdk:pull token for registry-1.docker.io             0.0s\r\n =&gt; [internal] load build context                                          0.1s\r\n =&gt; =&gt; transferring context: 82.08kB                                       0.0s\r\n =&gt; [build 1/7] FROM docker.io/library/openjdk:13@sha256:08ab736e5b08665c  0.0s\r\n =&gt; CACHED [deploy 2/3] RUN mkdir -p /opt/app                              0.0s\r\n =&gt; CACHED [build 2/7] RUN mkdir -p /workspace                             0.0s\r\n =&gt; CACHED [build 3/7] WORKDIR /workspace                                  0.0s\r\n =&gt; [build 4/7] COPY . .                                                   0.0s\r\n =&gt; [build 5/7] RUN yum install -y wget unzip                             89.6s\r\n =&gt; [build 6/7] RUN wget -O /tmp/gradle.zip https://services.gradle.org/  49.4s\r\n =&gt; ERROR [build 7/7] RUN /opt/gradle/bin/gradle build                     4.4s \r\n------                                                                          \r\n &gt; [build 7/7] RUN /opt/gradle/bin/gradle build:                                \r\n#13 3.142                                                                       \r\n#13 3.142 Welcome to Gradle 6.1!                                                \r\n#13 3.142                                                                       \r\n#13 3.143 Here are the highlights of this release:                              \r\n#13 3.143  - Dependency cache is relocatable\r\n#13 3.144  - Configurable compilation order between Groovy, Java &amp; Scala\r\n#13 3.144  - New sample projects in Gradle&#39;s documentation\r\n#13 3.144 \r\n#13 3.145 For more details see https://docs.gradle.org/6.1/release-notes.html\r\n#13 3.145 \r\n#13 4.047 Starting a Gradle Daemon (subsequent builds will be faster)\r\n#13 4.342 \r\n#13 4.343 FAILURE: Build failed with an exception.\r\n#13 4.344 \r\n#13 4.344 * What went wrong:\r\n#13 4.345 A problem occurred starting process &#39;Gradle build daemon&#39;\r\n#13 4.345 \r\n#13 4.345 * Try:\r\n#13 4.346 Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n#13 4.348 \r\n#13 4.348 * Get more help at https://help.gradle.org\r\n------\r\nexecutor failed running [/bin/sh -c /opt/gradle/bin/gradle build]: exit code: 1\r\nERROR: Service &#39;myapp&#39; failed to build : Build failed\r\n```\r\nI added `platform: linux/amd64` to the docker-compose files, and made sure all the dependencies are installed, but I have no idea how to solve this problem. I tried terminating all Daemon processes, and this did not solve the problem either.","title":"M1 Mac A problem occurred starting process &#39;Gradle build daemon&#39;","body":"<p>I cloned <a href=\"https://github.com/dantheman213/java-spring-gradle-docker-mvc-rest-starter-app\" rel=\"nofollow noreferrer\">this repo</a> and attempted to run it on my M1 Mac by running the command <code>docker-compose up --build -d</code> in the terminal, and this was the output:</p>\n<pre><code>Building myapp\n[+] Building 144.5s (13/14)                                                     \n =&gt; [internal] load build definition from Dockerfile                       0.0s\n =&gt; =&gt; transferring dockerfile: 536B                                       0.0s\n =&gt; [internal] load .dockerignore                                          0.0s\n =&gt; =&gt; transferring context: 2B                                            0.0s\n =&gt; [internal] load metadata for docker.io/library/openjdk:13              1.0s\n =&gt; [auth] library/openjdk:pull token for registry-1.docker.io             0.0s\n =&gt; [internal] load build context                                          0.1s\n =&gt; =&gt; transferring context: 82.08kB                                       0.0s\n =&gt; [build 1/7] FROM docker.io/library/openjdk:13@sha256:08ab736e5b08665c  0.0s\n =&gt; CACHED [deploy 2/3] RUN mkdir -p /opt/app                              0.0s\n =&gt; CACHED [build 2/7] RUN mkdir -p /workspace                             0.0s\n =&gt; CACHED [build 3/7] WORKDIR /workspace                                  0.0s\n =&gt; [build 4/7] COPY . .                                                   0.0s\n =&gt; [build 5/7] RUN yum install -y wget unzip                             89.6s\n =&gt; [build 6/7] RUN wget -O /tmp/gradle.zip https://services.gradle.org/  49.4s\n =&gt; ERROR [build 7/7] RUN /opt/gradle/bin/gradle build                     4.4s \n------                                                                          \n &gt; [build 7/7] RUN /opt/gradle/bin/gradle build:                                \n#13 3.142                                                                       \n#13 3.142 Welcome to Gradle 6.1!                                                \n#13 3.142                                                                       \n#13 3.143 Here are the highlights of this release:                              \n#13 3.143  - Dependency cache is relocatable\n#13 3.144  - Configurable compilation order between Groovy, Java &amp; Scala\n#13 3.144  - New sample projects in Gradle's documentation\n#13 3.144 \n#13 3.145 For more details see https://docs.gradle.org/6.1/release-notes.html\n#13 3.145 \n#13 4.047 Starting a Gradle Daemon (subsequent builds will be faster)\n#13 4.342 \n#13 4.343 FAILURE: Build failed with an exception.\n#13 4.344 \n#13 4.344 * What went wrong:\n#13 4.345 A problem occurred starting process 'Gradle build daemon'\n#13 4.345 \n#13 4.345 * Try:\n#13 4.346 Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n#13 4.348 \n#13 4.348 * Get more help at https://help.gradle.org\n------\nexecutor failed running [/bin/sh -c /opt/gradle/bin/gradle build]: exit code: 1\nERROR: Service 'myapp' failed to build : Build failed\n</code></pre>\n<p>I added <code>platform: linux/amd64</code> to the docker-compose files, and made sure all the dependencies are installed, but I have no idea how to solve this problem. I tried terminating all Daemon processes, and this did not solve the problem either.</p>\n"},{"tags":["java","partial","composite-primary-key","google-cloud-spanner","mutation"],"answers":[{"comments":[{"owner":{"account_id":3891270,"reputation":355,"user_id":3221397,"display_name":"Dakshin Rajavel"},"score":0,"creation_date":1675900944,"post_id":74055368,"comment_id":133029951,"body_markdown":"Now, how do you delete the mutation? Using com.google.cloud.spanner.DatabaseClient?","body":"Now, how do you delete the mutation? Using com.google.cloud.spanner.DatabaseClient?"},{"owner":{"account_id":10326713,"reputation":3074,"user_id":7617957,"display_name":"Knut Olav L&#248;ite"},"score":0,"creation_date":1675924801,"post_id":74055368,"comment_id":133033235,"body_markdown":"Yes, use the `com.google.cloud.spanner.DatabaseClient#write(Iterable&lt;Mutation&gt;)` method. See here for an example: https://cloud.google.com/spanner/docs/samples/spanner-insert-data#code-sample","body":"Yes, use the <code>com.google.cloud.spanner.DatabaseClient#write(Iterable&lt;Mutat&zwnj;&#8203;ion&gt;)</code> method. See here for an example: <a href=\"https://cloud.google.com/spanner/docs/samples/spanner-insert-data#code-sample\" rel=\"nofollow noreferrer\">cloud.google.com/spanner/docs/samples/&hellip;</a>"}],"tags":[],"owner":{"account_id":10326713,"reputation":3074,"user_id":7617957,"display_name":"Knut Olav L&#248;ite"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1665662223,"creation_date":1665662223,"answer_id":74055368,"question_id":74054457,"body_markdown":"You can use `KeySet.prefixRange(..)` for this:\r\n\r\n```java\r\nMutation.delete(&quot;my-table&quot;, KeySet.prefixRange(Key.of(key1Value, key2Value)));\r\n```","title":"Google Spanner - Java Mutation - Delete rows with subset of composite key values","body":"<p>You can use <code>KeySet.prefixRange(..)</code> for this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Mutation.delete(&quot;my-table&quot;, KeySet.prefixRange(Key.of(key1Value, key2Value)));\n</code></pre>\n"}],"owner":{"account_id":8458977,"reputation":13,"user_id":6345348,"display_name":"Rajagopal M"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":375,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74055368,"answer_count":1,"score":0,"last_activity_date":1665662223,"creation_date":1665657806,"question_id":74054457,"body_markdown":"I have a requirement where I need to delete rows based on the subset of composite keys via mutation.\r\n\r\nI have a table \r\n\r\n    CREATE TABLE FOO\r\n    (KEY1 INT64, KEY2 INT64, KEY3 INT64, VALUE STRING(100))\r\n    PRIMARY KEY (KEY1, KEY2, KEY3)\r\n\r\n\r\nHowever I need a mutation that should delete all rows matching KEY1 and KEY2 ignoring KEY3 value. I am trying to achieve with Mutation and I get this error\r\n\r\nMy Code:\r\n\r\n    Mutation.delete(&quot;FOO&quot;,\r\n                KeySet.newBuilder().\r\n                        addKey(Key.of(key1Value,\r\n                                key2Value))\r\n                        .build())\r\n\r\nError:\r\n&gt; com.google.cloud.spanner.SpannerException: FAILED_PRECONDITION:\r\n&gt; io.grpc.StatusRuntimeException: FAILED_PRECONDITION: Wrong number of\r\n&gt; key parts for FOO. Expected: 3. Got: [&quot;943598&quot;,&quot;213122&quot;]\r\n\r\n\r\nI have links for all composite keys but not a subset of them: https://stackoverflow.com/questions/45001488/deleting-row-using-composite-key","title":"Google Spanner - Java Mutation - Delete rows with subset of composite key values","body":"<p>I have a requirement where I need to delete rows based on the subset of composite keys via mutation.</p>\n<p>I have a table</p>\n<pre><code>CREATE TABLE FOO\n(KEY1 INT64, KEY2 INT64, KEY3 INT64, VALUE STRING(100))\nPRIMARY KEY (KEY1, KEY2, KEY3)\n</code></pre>\n<p>However I need a mutation that should delete all rows matching KEY1 and KEY2 ignoring KEY3 value. I am trying to achieve with Mutation and I get this error</p>\n<p>My Code:</p>\n<pre><code>Mutation.delete(&quot;FOO&quot;,\n            KeySet.newBuilder().\n                    addKey(Key.of(key1Value,\n                            key2Value))\n                    .build())\n</code></pre>\n<p>Error:</p>\n<blockquote>\n<p>com.google.cloud.spanner.SpannerException: FAILED_PRECONDITION:\nio.grpc.StatusRuntimeException: FAILED_PRECONDITION: Wrong number of\nkey parts for FOO. Expected: 3. Got: [&quot;943598&quot;,&quot;213122&quot;]</p>\n</blockquote>\n<p>I have links for all composite keys but not a subset of them: <a href=\"https://stackoverflow.com/questions/45001488/deleting-row-using-composite-key\">Deleting row using composite key</a></p>\n"},{"tags":["java","selenium","selenium-webdriver","webdriverwait"],"answers":[{"tags":[],"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1665661930,"creation_date":1665661930,"answer_id":74055296,"question_id":74055134,"body_markdown":"You should **never** mix implicit waits with explicit waits.  \r\nThat means if you defined non-default value for `implicitlyWait` you should not use `WebDriverWait` in that driver session.  \r\nSee the [official recommendations][1] saying `Warning: Do not mix implicit and explicit waits. Doing so can cause unpredictable wait times. For example, setting an implicit wait of 10 seconds and an explicit wait of 15 seconds could cause a timeout to occur after 20 seconds`.  \r\nNormally we always use `WebDriverWait` explicit waits only leaving `implicitlyWait` set to it default value `0`.  \r\nYou can see more explanations [here][2] and in more similar discussions.\r\n\r\n\r\n  [1]: https://www.selenium.dev/documentation/webdriver/waits/#:~:text=Warning%3A%20Do%20not%20mix%20implicit,to%20occur%20after%2020%20seconds.\r\n  [2]: https://stackoverflow.com/questions/29474296/clarification-of-the-cause-of-mixing-implicit-and-explicit-waits-in-selenium-doc","title":"How to declare WebDriver timeouts and how to manage their priority?","body":"<p>You should <strong>never</strong> mix implicit waits with explicit waits.<br />\nThat means if you defined non-default value for <code>implicitlyWait</code> you should not use <code>WebDriverWait</code> in that driver session.<br />\nSee the <a href=\"https://www.selenium.dev/documentation/webdriver/waits/#:%7E:text=Warning%3A%20Do%20not%20mix%20implicit,to%20occur%20after%2020%20seconds.\" rel=\"nofollow noreferrer\">official recommendations</a> saying <code>Warning: Do not mix implicit and explicit waits. Doing so can cause unpredictable wait times. For example, setting an implicit wait of 10 seconds and an explicit wait of 15 seconds could cause a timeout to occur after 20 seconds</code>.<br />\nNormally we always use <code>WebDriverWait</code> explicit waits only leaving <code>implicitlyWait</code> set to it default value <code>0</code>.<br />\nYou can see more explanations <a href=\"https://stackoverflow.com/questions/29474296/clarification-of-the-cause-of-mixing-implicit-and-explicit-waits-in-selenium-doc\">here</a> and in more similar discussions.</p>\n"}],"owner":{"account_id":7693984,"reputation":6097,"user_id":5829191,"accept_rate":63,"display_name":"rozerro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":239,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74055296,"answer_count":1,"score":0,"last_activity_date":1665662194,"creation_date":1665661116,"question_id":74055134,"body_markdown":"For the webdriver I set up at some early point of code\r\n\r\n    driver.manage().timeouts().pageLoadTimeout(30, TimeUnit.SECONDS);\r\n    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\r\n    driver.manage().timeouts().setScriptTimeout(30, TimeUnit.SECONDS);\r\n\r\nthen later I declare something like that\r\n\r\n    WebDriverWait wait = new WebDriverWait(driver, 5);\r\n    wait.until(bla bla\r\n\r\nor\r\n\r\n    new WebDriverWait(driver, 5).until(bla bla\r\n\r\nand it seems it doesn&#39;t have effect I expect because it waits longer then 5 sec\r\n\r\nWhat are the rulles for those timeouts?","title":"How to declare WebDriver timeouts and how to manage their priority?","body":"<p>For the webdriver I set up at some early point of code</p>\n<pre><code>driver.manage().timeouts().pageLoadTimeout(30, TimeUnit.SECONDS);\ndriver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\ndriver.manage().timeouts().setScriptTimeout(30, TimeUnit.SECONDS);\n</code></pre>\n<p>then later I declare something like that</p>\n<pre><code>WebDriverWait wait = new WebDriverWait(driver, 5);\nwait.until(bla bla\n</code></pre>\n<p>or</p>\n<pre><code>new WebDriverWait(driver, 5).until(bla bla\n</code></pre>\n<p>and it seems it doesn't have effect I expect because it waits longer then 5 sec</p>\n<p>What are the rulles for those timeouts?</p>\n"},{"tags":["java","docker","jvm","heap-memory"],"answers":[{"comments":[{"owner":{"account_id":23936357,"reputation":3,"user_id":17930051,"display_name":"xue wen"},"score":0,"creation_date":1642142617,"post_id":70706247,"comment_id":124997390,"body_markdown":"As you said , I added ```-XX:+PrintFlagsFinal``` to command line options and restart container, now I found  uintx MaxHeapSize                              := 2577399808                          {product}  in the logs, thank you!","body":"As you said , I added <code>-XX:+PrintFlagsFinal</code> to command line options and restart container, now I found  uintx MaxHeapSize                              := 2577399808                          {product}  in the logs, thank you!"}],"tags":[],"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1642137042,"creation_date":1642137042,"answer_id":70706247,"question_id":70706125,"body_markdown":"These are not comparing the same thing.\r\n\r\nWhen running `jmap` or `jstack`, these attach to the existing process with PID 9, as listed in the first `jps` command.\r\n\r\nWhen running `java -XX:+PrintFlagsFinal -version`, this creates a new JVM process, and prints the information for that new process. Note that the original PID 9 process has a number of additional flags that can affect the calculated heap size.\r\n\r\nFor a more accurate comparison, you could add the `-XX:+PrintFlagsFinal` flags to the main command run when the container starts. I would expect this to match the values returned by `jinfo` and `jmap`.","title":"why the MaxHeapSize values are different between java -XX:+PrintFlagsFinal and jinfo -flag MaxHeapSize","body":"<p>These are not comparing the same thing.</p>\n<p>When running <code>jmap</code> or <code>jstack</code>, these attach to the existing process with PID 9, as listed in the first <code>jps</code> command.</p>\n<p>When running <code>java -XX:+PrintFlagsFinal -version</code>, this creates a new JVM process, and prints the information for that new process. Note that the original PID 9 process has a number of additional flags that can affect the calculated heap size.</p>\n<p>For a more accurate comparison, you could add the <code>-XX:+PrintFlagsFinal</code> flags to the main command run when the container starts. I would expect this to match the values returned by <code>jinfo</code> and <code>jmap</code>.</p>\n"}],"owner":{"account_id":23936357,"reputation":3,"user_id":17930051,"display_name":"xue wen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":475,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70706247,"answer_count":1,"score":0,"last_activity_date":1665662132,"creation_date":1642135694,"question_id":70706125,"body_markdown":"I&#39;m running my java application on apline linux system in docker container, and I wanna find out the value of MaxHeapSize, so I use several command : java -XX:+PrintFlagsFinal, jinfo -flag MaxHeapSize , jmap -heap, but the output made me feel confused. The output of \r\njinfo -flag MaxHeapSize , jmap -heap are consistent. However, The output of java -XX:+PrintFlagsFinal is different.so why did this happen?\r\n\r\nThe default container memory Limit setting is 4096MiB.\r\n\r\n[enter image description here][1]\r\n\r\n\r\nThe output of java commonds is shown below.(I marked some important parts in the picture)\r\n```\r\nbash-5.0# jps -v\r\n9 jar -Dfile.encoding=utf-8 -XX:+UseG1GC -XX:+UseStringDeduplication -XX:-OmitStackTraceInFastThrow -XX:MaxRAMPercentage=60.0 -XX:InitialRAMPercentage=20.0 -XX:+PrintTenuringDistribution -XX:+PrintGCDetails -XX:+PrintCommandLineFlags -XX:+PrintHeapAtGC -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps -Xloggc:log/gc-%t.log -Duser.timezone=Asia/Shanghai -Delastic.apm.service_name=SUPER-STUDENTS -Delastic.apm.environment=k8s-prod-th-zhidao-manhattan -Delastic.apm.server_urls= -Delastic.apm.trace_methods= -Delastic.apm.trace_methods_duration_threshold=100ms -Delastic.apm.application_packages=outfox -Delastic.apm.capture_body=all -Delastic.apm.ignore_message_queues=* -Delastic.apm.profiling_inferred_spans_enabled=true -Delastic.apm.profiling_inferred_spans_sampling_interval=10ms -Delastic.apm.profiling_inferred_spans_min_duration=50ms -Dskywalking.agent.service_name=super-students -Dskywalking.agent.instance_name=super-students-75f964dbbd-5gfnv -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=1234\r\n64155 Jps -Dapplication.home=/opt/java/openjdk -Xms8m\r\nbash-5.0# java -XX:+PrintFlagsFinal -version | grep -Ei &quot;maxheapsize|maxram&quot;\r\n    uintx DefaultMaxRAMFraction                     = 4                                   {product}\r\n    uintx MaxHeapSize                              := 1073741824                          {product}\r\n uint64_t MaxRAM                                    = 137438953472                        {pd product}\r\n    uintx MaxRAMFraction                            = 4                                   {product}\r\n   double MaxRAMPercentage                          = 25.000000                           {product}\r\nopenjdk version &quot;1.8.0_282&quot;\r\nOpenJDK Runtime Environment (AdoptOpenJDK)(build 1.8.0_282-b08)\r\nOpenJDK 64-Bit Server VM (AdoptOpenJDK)(build 25.282-b08, mixed mode)\r\nbash-5.0# jinfo -flag MaxHeapSize 9\r\n-XX:MaxHeapSize=2577399808\r\nbash-5.0# jmap -heap 9\r\nAttaching to process ID 9, please wait...\r\nDebugger attached successfully.\r\nServer compiler detected.\r\nJVM version is 25.282-b08\r\n\r\nusing thread-local object allocation.\r\nGarbage-First (G1) GC with 1 thread(s)\r\n\r\nHeap Configuration:\r\n   MinHeapFreeRatio         = 40\r\n   MaxHeapFreeRatio         = 70\r\n   MaxHeapSize              = 2577399808 (2458.0MB)\r\n   NewSize                  = 1363144 (1.2999954223632812MB)\r\n   MaxNewSize               = 1545601024 (1474.0MB)\r\n   OldSize                  = 5452592 (5.1999969482421875MB)\r\n   NewRatio                 = 2\r\n   SurvivorRatio            = 8\r\n   MetaspaceSize            = 21807104 (20.796875MB)\r\n   CompressedClassSpaceSize = 1073741824 (1024.0MB)\r\n   MaxMetaspaceSize         = 17592186044415 MB\r\n   G1HeapRegionSize         = 1048576 (1.0MB)\r\n\r\nHeap Usage:\r\nG1 Heap:\r\n   regions  = 2458\r\n   capacity = 2577399808 (2458.0MB)\r\n   used     = 320120112 (305.2903289794922MB)\r\n   free     = 2257279696 (2152.709671020508MB)\r\n   12.420273758319455% used\r\nG1 Young Generation:\r\nEden Space:\r\n   regions  = 53\r\n   capacity = 654311424 (624.0MB)\r\n   used     = 55574528 (53.0MB)\r\n   free     = 598736896 (571.0MB)\r\n   8.493589743589743% used\r\nSurvivor Space:\r\n   regions  = 10\r\n   capacity = 10485760 (10.0MB)\r\n   used     = 10485760 (10.0MB)\r\n   free     = 0 (0.0MB)\r\n   100.0% used\r\nG1 Old Generation:\r\n   regions  = 247\r\n   capacity = 389021696 (371.0MB)\r\n   used     = 254059824 (242.2903289794922MB)\r\n   free     = 134961872 (128.7096710205078MB)\r\n   65.30736630174992% used\r\n\r\n63962 interned Strings occupying 6772928 bytes.\r\n```\r\n\r\n[enter image description here][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dZqRJ.png\r\n  [2]: https://i.stack.imgur.com/p0Nlm.png","title":"why the MaxHeapSize values are different between java -XX:+PrintFlagsFinal and jinfo -flag MaxHeapSize","body":"<p>I'm running my java application on apline linux system in docker container, and I wanna find out the value of MaxHeapSize, so I use several command : java -XX:+PrintFlagsFinal, jinfo -flag MaxHeapSize , jmap -heap, but the output made me feel confused. The output of\njinfo -flag MaxHeapSize , jmap -heap are consistent. However, The output of java -XX:+PrintFlagsFinal is different.so why did this happen?</p>\n<p>The default container memory Limit setting is 4096MiB.</p>\n<p><a href=\"https://i.stack.imgur.com/dZqRJ.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>The output of java commonds is shown below.(I marked some important parts in the picture)</p>\n<pre><code>bash-5.0# jps -v\n9 jar -Dfile.encoding=utf-8 -XX:+UseG1GC -XX:+UseStringDeduplication -XX:-OmitStackTraceInFastThrow -XX:MaxRAMPercentage=60.0 -XX:InitialRAMPercentage=20.0 -XX:+PrintTenuringDistribution -XX:+PrintGCDetails -XX:+PrintCommandLineFlags -XX:+PrintHeapAtGC -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps -Xloggc:log/gc-%t.log -Duser.timezone=Asia/Shanghai -Delastic.apm.service_name=SUPER-STUDENTS -Delastic.apm.environment=k8s-prod-th-zhidao-manhattan -Delastic.apm.server_urls= -Delastic.apm.trace_methods= -Delastic.apm.trace_methods_duration_threshold=100ms -Delastic.apm.application_packages=outfox -Delastic.apm.capture_body=all -Delastic.apm.ignore_message_queues=* -Delastic.apm.profiling_inferred_spans_enabled=true -Delastic.apm.profiling_inferred_spans_sampling_interval=10ms -Delastic.apm.profiling_inferred_spans_min_duration=50ms -Dskywalking.agent.service_name=super-students -Dskywalking.agent.instance_name=super-students-75f964dbbd-5gfnv -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=1234\n64155 Jps -Dapplication.home=/opt/java/openjdk -Xms8m\nbash-5.0# java -XX:+PrintFlagsFinal -version | grep -Ei &quot;maxheapsize|maxram&quot;\n    uintx DefaultMaxRAMFraction                     = 4                                   {product}\n    uintx MaxHeapSize                              := 1073741824                          {product}\n uint64_t MaxRAM                                    = 137438953472                        {pd product}\n    uintx MaxRAMFraction                            = 4                                   {product}\n   double MaxRAMPercentage                          = 25.000000                           {product}\nopenjdk version &quot;1.8.0_282&quot;\nOpenJDK Runtime Environment (AdoptOpenJDK)(build 1.8.0_282-b08)\nOpenJDK 64-Bit Server VM (AdoptOpenJDK)(build 25.282-b08, mixed mode)\nbash-5.0# jinfo -flag MaxHeapSize 9\n-XX:MaxHeapSize=2577399808\nbash-5.0# jmap -heap 9\nAttaching to process ID 9, please wait...\nDebugger attached successfully.\nServer compiler detected.\nJVM version is 25.282-b08\n\nusing thread-local object allocation.\nGarbage-First (G1) GC with 1 thread(s)\n\nHeap Configuration:\n   MinHeapFreeRatio         = 40\n   MaxHeapFreeRatio         = 70\n   MaxHeapSize              = 2577399808 (2458.0MB)\n   NewSize                  = 1363144 (1.2999954223632812MB)\n   MaxNewSize               = 1545601024 (1474.0MB)\n   OldSize                  = 5452592 (5.1999969482421875MB)\n   NewRatio                 = 2\n   SurvivorRatio            = 8\n   MetaspaceSize            = 21807104 (20.796875MB)\n   CompressedClassSpaceSize = 1073741824 (1024.0MB)\n   MaxMetaspaceSize         = 17592186044415 MB\n   G1HeapRegionSize         = 1048576 (1.0MB)\n\nHeap Usage:\nG1 Heap:\n   regions  = 2458\n   capacity = 2577399808 (2458.0MB)\n   used     = 320120112 (305.2903289794922MB)\n   free     = 2257279696 (2152.709671020508MB)\n   12.420273758319455% used\nG1 Young Generation:\nEden Space:\n   regions  = 53\n   capacity = 654311424 (624.0MB)\n   used     = 55574528 (53.0MB)\n   free     = 598736896 (571.0MB)\n   8.493589743589743% used\nSurvivor Space:\n   regions  = 10\n   capacity = 10485760 (10.0MB)\n   used     = 10485760 (10.0MB)\n   free     = 0 (0.0MB)\n   100.0% used\nG1 Old Generation:\n   regions  = 247\n   capacity = 389021696 (371.0MB)\n   used     = 254059824 (242.2903289794922MB)\n   free     = 134961872 (128.7096710205078MB)\n   65.30736630174992% used\n\n63962 interned Strings occupying 6772928 bytes.\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/p0Nlm.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","spring","spring-boot","security","spring-security"],"answers":[{"tags":[],"owner":{"account_id":1873870,"reputation":985,"user_id":1695525,"display_name":"Bruce Ritchie"},"comment_count":0,"down_vote_count":0,"up_vote_count":47,"is_accepted":false,"score":47,"last_activity_date":1556570400,"creation_date":1556570400,"answer_id":55910540,"question_id":53640372,"body_markdown":"For anyone hitting this issue for me the solution was to remove the duplicate @EnableGlobalMethodSecurity annotation I had configured on a WebSecurityConfigurer I had setup.\r\n","title":"Get error stating that &quot;methodSecurityInterceptor&quot; is already defined when extend GlobalMethodSecurityConfiguration in SPring Boot 2.1.1","body":"<p>For anyone hitting this issue for me the solution was to remove the duplicate @EnableGlobalMethodSecurity annotation I had configured on a WebSecurityConfigurer I had setup.</p>\n"},{"tags":[],"owner":{"account_id":23665731,"reputation":11,"user_id":17693205,"display_name":"Gabriel"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649424434,"creation_date":1649424434,"answer_id":71797883,"question_id":53640372,"body_markdown":"I solved by merging both configuration classes\r\n\r\n    \r\n    @EnableWebSecurity\r\n    public class SecurityConfig {\r\n    \r\n    \t@Configuration\r\n    \t@RequiredArgsConstructor\r\n    \t@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\r\n    \tpublic static class GlobalMethodSecurityConfig extends GlobalMethodSecurityConfiguration {\r\n    \t\t\r\n            private final ApplicationContext applicationContext;\r\n    \r\n    \t\t@Override\r\n    \t\tprotected MethodSecurityExpressionHandler createExpressionHandler() {\r\n    \t\t\tvar expressionHandler = new CustomMethodSecurityExpressionHandler();\r\n    \t\t\texpressionHandler.setApplicationContext(applicationContext);\r\n    \r\n    \t\t\treturn expressionHandler;\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@Configuration\r\n    \tpublic static class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \t\t@Override\r\n    \t\tprotected void configure(HttpSecurity http) throws Exception {\r\n    \t\t\t//http config\r\n    \t\t}\r\n    \r\n    \t}\r\n    }\r\n\r\n\r\nAs suggested [here][1] in Spring docs\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/servlet/configuration/java.html#_multiple_httpsecurity","title":"Get error stating that &quot;methodSecurityInterceptor&quot; is already defined when extend GlobalMethodSecurityConfiguration in SPring Boot 2.1.1","body":"<p>I solved by merging both configuration classes</p>\n<pre><code>@EnableWebSecurity\npublic class SecurityConfig {\n\n    @Configuration\n    @RequiredArgsConstructor\n    @EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\n    public static class GlobalMethodSecurityConfig extends GlobalMethodSecurityConfiguration {\n        \n        private final ApplicationContext applicationContext;\n\n        @Override\n        protected MethodSecurityExpressionHandler createExpressionHandler() {\n            var expressionHandler = new CustomMethodSecurityExpressionHandler();\n            expressionHandler.setApplicationContext(applicationContext);\n\n            return expressionHandler;\n        }\n    }\n\n    @Configuration\n    public static class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n        @Override\n        protected void configure(HttpSecurity http) throws Exception {\n            //http config\n        }\n\n    }\n}\n</code></pre>\n<p>As suggested <a href=\"https://docs.spring.io/spring-security/reference/servlet/configuration/java.html#_multiple_httpsecurity\" rel=\"nofollow noreferrer\">here</a> in Spring docs</p>\n"},{"tags":[],"owner":{"account_id":23828425,"reputation":755,"user_id":17835092,"display_name":"Samuel Olufemi"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1665662036,"creation_date":1665662036,"answer_id":74055318,"question_id":53640372,"body_markdown":"The solution below worked for me.\r\n\r\nSet this key and values in your application.yml or application.properties \r\n\r\napplication.yml\r\nspring:  \r\n  main:\r\n    allow-bean-definition-overriding: true\r\n\r\napplication.properties\r\n\r\nspring.main.allow-bean-definition-overriding=true","title":"Get error stating that &quot;methodSecurityInterceptor&quot; is already defined when extend GlobalMethodSecurityConfiguration in SPring Boot 2.1.1","body":"<p>The solution below worked for me.</p>\n<p>Set this key and values in your application.yml or application.properties</p>\n<p>application.yml\nspring:<br />\nmain:\nallow-bean-definition-overriding: true</p>\n<p>application.properties</p>\n<p>spring.main.allow-bean-definition-overriding=true</p>\n"}],"owner":{"account_id":457598,"reputation":24938,"user_id":857025,"accept_rate":55,"display_name":"Don Rhummy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6898,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":3,"score":13,"last_activity_date":1665662036,"creation_date":1544042350,"question_id":53640372,"body_markdown":"I&#39;m overriding the `GlobalMethodSecurityConfiguration` class but only one method: `protected MethodSecurityExpressionHandler createExpressionHandler()`.\r\n\r\nWhen I try to run the app, I get:\r\n\r\n&gt; Description:\r\n&gt;\r\n&gt; The bean &#39;methodSecurityInterceptor&#39;, defined in class path resource [org/springframework/security/config/annotation/method/configuration/GlobalMethodSecurityConfiguration.class], could not be registered. A bean with that name has already been defined in class path resource [com/testing/config/MyMethodSecurityConfig.class] and overriding is disabled.\r\n&gt;\r\n&gt; Action:\r\n&gt;\r\n&gt; Consider renaming one of the beans or enabling overriding by setting spring.main.allow-bean-definition-overriding=true\r\n\r\n**CONFIG CLASS**\r\n\r\nWhy is it doing this when I am not overriding that base method? How can i override the `MethodSecurityExpressionHandler` without getting this error?\r\n\r\n    import com.testing.AadMethodSecurityExpressionHandler;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.security.access.expression.method.MethodSecurityExpressionHandler;\r\n    import org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\r\n    import org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration;\r\n    \r\n    @Configuration\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\r\n    public class MyMethodSecurityConfig extends GlobalMethodSecurityConfiguration\r\n    {\r\n        @Override\r\n        protected MethodSecurityExpressionHandler createExpressionHandler()\r\n        {\r\n            return new MyMethodSecurityExpressionHandler();\r\n        }\r\n    }\r\n\r\n**Expression Handler**\r\n\r\n    import org.aopalliance.intercept.MethodInvocation;\r\n    import org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler;\r\n    import org.springframework.security.access.expression.method.MethodSecurityExpressionOperations;\r\n    import org.springframework.security.core.Authentication;\r\n    \r\n    public class MyMethodSecurityExpressionHandler extends DefaultMethodSecurityExpressionHandler\r\n    {\r\n        @Override\r\n        protected MethodSecurityExpressionOperations createSecurityExpressionRoot(Authentication authentication, MethodInvocation invocation)\r\n        {\r\n            MyMethodSecurityExpressionRoot root = new MyMethodSecurityExpressionRoot( authentication );\r\n            root.setPermissionEvaluator( getPermissionEvaluator() );\r\n            root.setTrustResolver( getTrustResolver() );\r\n            root.setRoleHierarchy( getRoleHierarchy() );\r\n    \r\n            return root;\r\n        }\r\n    }\r\n\r\n**Expression Root**\r\n\r\n    import org.springframework.security.access.expression.SecurityExpressionRoot;\r\n    import org.springframework.security.access.expression.method.MethodSecurityExpressionOperations;\r\n    import org.springframework.security.core.Authentication;\r\n    \r\n    public class MyMethodSecurityExpressionRoot extends SecurityExpressionRoot implements MethodSecurityExpressionOperations\r\n    {\r\n        private Object filterObject;\r\n        private Object returnObject;\r\n        private Object target;\r\n    \r\n        public MyMethodSecurityExpressionRoot(Authentication a)\r\n        {\r\n            super( a );\r\n        }\r\n    \r\n        @Override\r\n        public void setDefaultRolePrefix(String defaultRolePrefix)\r\n        {\r\n            //Simple test to see if this works\r\n            super.setDefaultRolePrefix( &quot;&quot; );\r\n        }\r\n    \r\n        public void setFilterObject(Object filterObject)\r\n        {\r\n            this.filterObject = filterObject;\r\n        }\r\n    \r\n        public Object getFilterObject()\r\n        {\r\n            return filterObject;\r\n        }\r\n    \r\n        public void setReturnObject(Object returnObject)\r\n        {\r\n            this.returnObject = returnObject;\r\n        }\r\n    \r\n        public Object getReturnObject()\r\n        {\r\n            return returnObject;\r\n        }\r\n    \r\n        void setThis(Object target)\r\n        {\r\n            this.target = target;\r\n        }\r\n    \r\n        public Object getThis()\r\n        {\r\n            return target;\r\n        }\r\n    }\r\n","title":"Get error stating that &quot;methodSecurityInterceptor&quot; is already defined when extend GlobalMethodSecurityConfiguration in SPring Boot 2.1.1","body":"<p>I'm overriding the <code>GlobalMethodSecurityConfiguration</code> class but only one method: <code>protected MethodSecurityExpressionHandler createExpressionHandler()</code>.</p>\n\n<p>When I try to run the app, I get:</p>\n\n<blockquote>\n  <p>Description:</p>\n  \n  <p>The bean 'methodSecurityInterceptor', defined in class path resource [org/springframework/security/config/annotation/method/configuration/GlobalMethodSecurityConfiguration.class], could not be registered. A bean with that name has already been defined in class path resource [com/testing/config/MyMethodSecurityConfig.class] and overriding is disabled.</p>\n  \n  <p>Action:</p>\n  \n  <p>Consider renaming one of the beans or enabling overriding by setting spring.main.allow-bean-definition-overriding=true</p>\n</blockquote>\n\n<p><strong>CONFIG CLASS</strong></p>\n\n<p>Why is it doing this when I am not overriding that base method? How can i override the <code>MethodSecurityExpressionHandler</code> without getting this error?</p>\n\n<pre><code>import com.testing.AadMethodSecurityExpressionHandler;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.access.expression.method.MethodSecurityExpressionHandler;\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\nimport org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration;\n\n@Configuration\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\npublic class MyMethodSecurityConfig extends GlobalMethodSecurityConfiguration\n{\n    @Override\n    protected MethodSecurityExpressionHandler createExpressionHandler()\n    {\n        return new MyMethodSecurityExpressionHandler();\n    }\n}\n</code></pre>\n\n<p><strong>Expression Handler</strong></p>\n\n<pre><code>import org.aopalliance.intercept.MethodInvocation;\nimport org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler;\nimport org.springframework.security.access.expression.method.MethodSecurityExpressionOperations;\nimport org.springframework.security.core.Authentication;\n\npublic class MyMethodSecurityExpressionHandler extends DefaultMethodSecurityExpressionHandler\n{\n    @Override\n    protected MethodSecurityExpressionOperations createSecurityExpressionRoot(Authentication authentication, MethodInvocation invocation)\n    {\n        MyMethodSecurityExpressionRoot root = new MyMethodSecurityExpressionRoot( authentication );\n        root.setPermissionEvaluator( getPermissionEvaluator() );\n        root.setTrustResolver( getTrustResolver() );\n        root.setRoleHierarchy( getRoleHierarchy() );\n\n        return root;\n    }\n}\n</code></pre>\n\n<p><strong>Expression Root</strong></p>\n\n<pre><code>import org.springframework.security.access.expression.SecurityExpressionRoot;\nimport org.springframework.security.access.expression.method.MethodSecurityExpressionOperations;\nimport org.springframework.security.core.Authentication;\n\npublic class MyMethodSecurityExpressionRoot extends SecurityExpressionRoot implements MethodSecurityExpressionOperations\n{\n    private Object filterObject;\n    private Object returnObject;\n    private Object target;\n\n    public MyMethodSecurityExpressionRoot(Authentication a)\n    {\n        super( a );\n    }\n\n    @Override\n    public void setDefaultRolePrefix(String defaultRolePrefix)\n    {\n        //Simple test to see if this works\n        super.setDefaultRolePrefix( \"\" );\n    }\n\n    public void setFilterObject(Object filterObject)\n    {\n        this.filterObject = filterObject;\n    }\n\n    public Object getFilterObject()\n    {\n        return filterObject;\n    }\n\n    public void setReturnObject(Object returnObject)\n    {\n        this.returnObject = returnObject;\n    }\n\n    public Object getReturnObject()\n    {\n        return returnObject;\n    }\n\n    void setThis(Object target)\n    {\n        this.target = target;\n    }\n\n    public Object getThis()\n    {\n        return target;\n    }\n}\n</code></pre>\n"},{"tags":["java","selenium"],"comments":[{"owner":{"account_id":15083819,"reputation":33038,"user_id":10885684,"display_name":"KunduK"},"score":0,"creation_date":1665144564,"post_id":73986872,"comment_id":130636786,"body_markdown":"Its worth to give a try with latest versions of chrome driver and browser. If you have the same issue then definitely it is the locator issue as you mentioned html markup changes.","body":"Its worth to give a try with latest versions of chrome driver and browser. If you have the same issue then definitely it is the locator issue as you mentioned html markup changes."},{"owner":{"account_id":2428368,"reputation":1,"user_id":3757260,"accept_rate":75,"display_name":"Frank H."},"score":0,"creation_date":1665144831,"post_id":73986872,"comment_id":130636901,"body_markdown":"Tried with chromedriver 105.","body":"Tried with chromedriver 105."},{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1665182104,"post_id":73986872,"comment_id":130647728,"body_markdown":"Do you set this anywhere?:  driver.manage().timeouts().setScriptTimeout  It sounds like it&#39;s set to something and you do have something in &quot;ExtendedWebDriver&quot; which is calling async script(s).   Maybe include the code for ExtendedWebDriver.  In general it&#39;s a very bad idea to check for readystate as you can&#39;t know when exactly it will run.","body":"Do you set this anywhere?:  driver.manage().timeouts().setScriptTimeout  It sounds like it&#39;s set to something and you do have something in &quot;ExtendedWebDriver&quot; which is calling async script(s).   Maybe include the code for ExtendedWebDriver.  In general it&#39;s a very bad idea to check for readystate as you can&#39;t know when exactly it will run."},{"owner":{"account_id":2428368,"reputation":1,"user_id":3757260,"accept_rate":75,"display_name":"Frank H."},"score":0,"creation_date":1665571296,"post_id":73986872,"comment_id":130730412,"body_markdown":"Thanks for the tip. I&#39;ve included some code from the ExtendedWebDriver class. It seems that the findElement(s) methods are overridden with a call to the isPageReady() method. Could it be that this &quot;crashes&quot; with an existing internal pageReady() method, or some other place?","body":"Thanks for the tip. I&#39;ve included some code from the ExtendedWebDriver class. It seems that the findElement(s) methods are overridden with a call to the isPageReady() method. Could it be that this &quot;crashes&quot; with an existing internal pageReady() method, or some other place?"},{"owner":{"account_id":26308422,"reputation":126,"user_id":19972444,"display_name":"Neos"},"score":0,"creation_date":1665740806,"post_id":73986872,"comment_id":130773879,"body_markdown":"Hello , apparently with the changes on html/markup there are some resource in the getAngularScript() method should be modified as well . I am not assuming anything here , just try to spot the differences . you can verify if the ChromeDriver is compatible with your chrome version so no updates happened to your browser  because it could be a reason for selenium failure","body":"Hello , apparently with the changes on html/markup there are some resource in the getAngularScript() method should be modified as well . I am not assuming anything here , just try to spot the differences . you can verify if the ChromeDriver is compatible with your chrome version so no updates happened to your browser  because it could be a reason for selenium failure"},{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":1,"creation_date":1666036833,"post_id":73986872,"comment_id":130835960,"body_markdown":"I would get rid of those &quot;isPageReady();&quot; calls...  if you want to keep them, you might set a specific ScriptTimeout to see if it helps.  (&quot;driver.manage().timeouts().setScriptTimeout...&quot;)  Instead of checking readystate, you can use Selenium&#39;s WebDriverWait along with an expectedCondition... (i.e. &quot;Explicit Wait&quot;).  Handle stale element exceptions if needed.   (Selenium has added some useful expected conditions to deal with stale element exceptions, too.)","body":"I would get rid of those &quot;isPageReady();&quot; calls...  if you want to keep them, you might set a specific ScriptTimeout to see if it helps.  (&quot;driver.manage().timeouts().setScriptTimeout...&quot;)  Instead of checking readystate, you can use Selenium&#39;s WebDriverWait along with an expectedCondition... (i.e. &quot;Explicit Wait&quot;).  Handle stale element exceptions if needed.   (Selenium has added some useful expected conditions to deal with stale element exceptions, too.)"},{"owner":{"display_name":"user9347168"},"score":0,"creation_date":1666099514,"post_id":73986872,"comment_id":130851265,"body_markdown":"I&#39;ll try that. I know Selenium has added some useful things in version 4 - upgrading is in the pipeline :-)","body":"I&#39;ll try that. I know Selenium has added some useful things in version 4 - upgrading is in the pipeline :-)"},{"owner":{"account_id":3043770,"reputation":318,"user_id":9699127,"display_name":"Bits Please"},"score":0,"creation_date":1666228682,"post_id":73986872,"comment_id":130888521,"body_markdown":"Have you tried this : https://stackoverflow.com/questions/63798832/error-org-openqa-selenium-scripttimeoutexception-script-timeout","body":"Have you tried this : <a href=\"https://stackoverflow.com/questions/63798832/error-org-openqa-selenium-scripttimeoutexception-script-timeout\" title=\"error org openqa selenium scripttimeoutexception script timeout\">stackoverflow.com/questions/63798832/&hellip;</a>"}],"owner":{"account_id":2428368,"reputation":1,"user_id":3757260,"accept_rate":75,"display_name":"Frank H."},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":369,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665661960,"creation_date":1665144014,"question_id":73986872,"body_markdown":"I might be stupid, but I really don&#39;t get this at all. It&#39;s an Angular application, with a page on which the Selenium tests have been running fine up until now. Then a frontend developer did some markup changes (not quite sure what, but I wouldn&#39;t think it mattered as long as it&#39;s just html/markup and the page is working fine), and now nothing works.\r\n\r\nAnd I mean nothing; Every Selenium operation, be it .elementVisible(), .click() or absolutely whatever, fails with a script timeout. No more details as far as I can see - it just times out. While the page is open, and every element is visible and interactable manually.\r\n\r\nThis is the script timeout error:\r\n\r\n    org.openqa.selenium.ScriptTimeoutException: script timeout\r\n    (Session info: chrome=101.0.4951.64)\r\n    Build info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;\r\n    System info: host: &#39;frank-ulyana-xfce&#39;, ip: &#39;127.0.1.1&#39;, os.name: &#39;Linux&#39;, os.arch: &#39;amd64&#39;, \r\n    os.version: &#39;5.4.0-110-generic&#39;, java.version: &#39;11.0.15&#39;\r\n    Driver info: org.openqa.selenium.chrome.ChromeDriver\r\n    Capabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 101.0.4951.64,     chrome: {chromedriverVersion: 101.0.4951.41 (93c720db8323..., userDataDir:     /tmp/.com.google.Chrome.RjyGbe}, goog:chromeOptions: {debuggerAddress: localhost:42731},     javascriptEnabled: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform:     LINUX, platformName: LINUX, proxy: Proxy(), setWindowRect: true, strictFileInteractability: false,     timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and     notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true,     webauthn:virtualAuthenticators: true}\r\n    Session ID: 6d9e43e080e1877deda638b34d533500\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\r\n\tat org.openqa.selenium.remote.http.W3CHttpResponseCodec.createException(W3CHttpResponseCodec.java:187)\r\n\tat org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:122)\r\n\tat org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:49)\r\n\tat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:158)\r\n\tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:83)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.executeAsyncScript(RemoteWebDriver.java:506)\r\n\tat no.husbanken.e2e.rammeverk.selenium.driver.ExtendedWebDriver.isPageReady(ExtendedWebDriver.java:38)\r\n\tat no.husbanken.e2e.rammeverk.selenium.driver.ExtendedWebDriver.findElement(ExtendedWebDriver.java:56)\r\n\tat e2e.sak.vedtak.VedtakPage2.velgInnstilling(VedtakPage2.java:24)\r\n\tat e2e.sak.vedtak.VedtakSteps.jegInnstillerTilAvslag(VedtakSteps.java:87)\r\n\r\n\r\nAny ideas? Short of making the frontend developer revert the changes to a working version, I don&#39;t know where to look.\r\n\r\nUPDATE:\r\n\r\nFrom the ExtendeWebDriver class in the framework (own project used by the test project):\r\n\r\n    @Override\r\n    public WebElement findElement(By by) {\r\n        isPageReady();\r\n        return this.webDriver.findElement(by);\r\n    }\r\n\r\n    @Override\r\n    public List&lt;WebElement&gt; findElements(final By by) {\r\n        isPageReady();\r\n        return this.webDriver.findElements(by);\r\n    }\r\n    \r\n    ....\r\n    \r\n    public void isPageReady() {\r\n        if (teknologi == STARTLAN_ESOKNAD){\r\n            waitUntilAngularReady();\r\n        } else {\r\n            Object response = jsExecutor.executeAsyncScript(venteScript);\r\n            if (response != null) {\r\n                poll(1000);\r\n                response = jsExecutor.executeAsyncScript(venteScript);\r\n                if (response != null) {\r\n                    throw new IllegalStateException(format(&quot;Responsen fra isPageReady() skal alltid v&#230;re null, men var: %s&quot;, response));\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nThe JavaScript executed:\r\n\r\n    private static String getAngularScript() {\r\n        return &quot;function getNg1Hooks(t,e){function n(t){try{if(!e&amp;&amp;angular.getTestability){var n=angular.getTestability(t);if&quot; +\r\n                &quot;(n)return{$$testability:n}}else{var i=angular.element(t).injector();if(i)return{$injector:i}}}catch(t)&quot; +\r\n                &quot;{}}function i(t){for(var e=document.querySelectorAll(t),i=0;i&lt;e.length;i++){var r=n(e[i]);if(r)return r}}if(t)&quot; +\r\n                &quot;return i(t);if(window.__TESTABILITY__NG1_APP_ROOT_INJECTOR__){var r=window&quot; +\r\n                &quot;.__TESTABILITY__NG1_APP_ROOT_INJECTOR__,a=null;try{a=r.get(\\&quot;$$testability\\&quot;)}catch(t){}return{$injector:r,&quot; +\r\n                &quot;$$testability:a}}return n(document.body)||i(\\&quot;[ng-app]\\&quot;)||i(\\&quot;[ng\\\\\\\\:app]\\&quot;)||i(\\&quot;[ng-controller]\\&quot;)||i&quot; +\r\n                &quot;(\\&quot;[ng\\\\\\\\:controller]\\&quot;)}waitForAngular=function(t,e){try{var n=e;if(!window.angular&amp;&amp;!window&quot; +\r\n                &quot;.getAngularTestability)throw new Error(\\&quot;both angularJS testability and angular testability are undefined.  &quot; +\r\n                &quot;This could be either because this is a non-angular page or because your test involves client-side navigation, &quot; +\r\n                &quot;which can interfere with Protractor&#39;s bootstrapping.  See http://git.io/v4gXM for details\\&quot;);!function(e){if&quot; +\r\n                &quot;(window.angular){var n=getNg1Hooks(t);if(n)if(n.$$testability)n.$$testability.whenStable(e);else{if(!n&quot; +\r\n                &quot;.$injector)throw t?new Error(\\&quot;root element (\\&quot;+t+\\&quot;) has no injector. this may mean it is not inside ng-app&quot; +\r\n                &quot;.\\&quot;):new Error(&#39;Could not automatically find injector on page: \\&quot;&#39;+window.location.toString()+&#39;\\&quot;.  Consider &quot; +\r\n                &quot;using config.rootEl&#39;);n.$injector.get(\\&quot;$browser\\&quot;).notifyWhenNoOutstandingRequests(e)}else e()}else e()}&quot; +\r\n                &quot;(function(){if(window.getAngularTestability){if(t){var e=null,i=document.querySelector(t);try{e=window&quot; +\r\n                &quot;.getAngularTestability(i)}catch(t){}if(e)return void e.whenStable(n)}var r=window.getAllAngularTestabilities()&quot; +\r\n                &quot;,a=r.length;if(0===a)return void n();var o=function(){0==--a&amp;&amp;n()};r.forEach(function(t){t.whenStable(o)})&quot; +\r\n                &quot;}else n()})}catch(t){e(t.message)}},waitForAngular(\\&quot;body\\&quot;,arguments[arguments.length-1]);&quot;;\r\n    }","title":"Selenium and Java - script timeout on accessing every element on a page","body":"<p>I might be stupid, but I really don't get this at all. It's an Angular application, with a page on which the Selenium tests have been running fine up until now. Then a frontend developer did some markup changes (not quite sure what, but I wouldn't think it mattered as long as it's just html/markup and the page is working fine), and now nothing works.</p>\n<p>And I mean nothing; Every Selenium operation, be it .elementVisible(), .click() or absolutely whatever, fails with a script timeout. No more details as far as I can see - it just times out. While the page is open, and every element is visible and interactable manually.</p>\n<p>This is the script timeout error:</p>\n<pre><code>org.openqa.selenium.ScriptTimeoutException: script timeout\n(Session info: chrome=101.0.4951.64)\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03'\nSystem info: host: 'frank-ulyana-xfce', ip: '127.0.1.1', os.name: 'Linux', os.arch: 'amd64', \nos.version: '5.4.0-110-generic', java.version: '11.0.15'\nDriver info: org.openqa.selenium.chrome.ChromeDriver\nCapabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 101.0.4951.64,     chrome: {chromedriverVersion: 101.0.4951.41 (93c720db8323..., userDataDir:     /tmp/.com.google.Chrome.RjyGbe}, goog:chromeOptions: {debuggerAddress: localhost:42731},     javascriptEnabled: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform:     LINUX, platformName: LINUX, proxy: Proxy(), setWindowRect: true, strictFileInteractability: false,     timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and     notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true,     webauthn:virtualAuthenticators: true}\nSession ID: 6d9e43e080e1877deda638b34d533500\nat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\nat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\nat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\nat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\nat org.openqa.selenium.remote.http.W3CHttpResponseCodec.createException(W3CHttpResponseCodec.java:187)\nat org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:122)\nat org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:49)\nat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:158)\nat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:83)\nat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\nat org.openqa.selenium.remote.RemoteWebDriver.executeAsyncScript(RemoteWebDriver.java:506)\nat no.husbanken.e2e.rammeverk.selenium.driver.ExtendedWebDriver.isPageReady(ExtendedWebDriver.java:38)\nat no.husbanken.e2e.rammeverk.selenium.driver.ExtendedWebDriver.findElement(ExtendedWebDriver.java:56)\nat e2e.sak.vedtak.VedtakPage2.velgInnstilling(VedtakPage2.java:24)\nat e2e.sak.vedtak.VedtakSteps.jegInnstillerTilAvslag(VedtakSteps.java:87)\n</code></pre>\n<p>Any ideas? Short of making the frontend developer revert the changes to a working version, I don't know where to look.</p>\n<p>UPDATE:</p>\n<p>From the ExtendeWebDriver class in the framework (own project used by the test project):</p>\n<pre><code>@Override\npublic WebElement findElement(By by) {\n    isPageReady();\n    return this.webDriver.findElement(by);\n}\n\n@Override\npublic List&lt;WebElement&gt; findElements(final By by) {\n    isPageReady();\n    return this.webDriver.findElements(by);\n}\n\n....\n\npublic void isPageReady() {\n    if (teknologi == STARTLAN_ESOKNAD){\n        waitUntilAngularReady();\n    } else {\n        Object response = jsExecutor.executeAsyncScript(venteScript);\n        if (response != null) {\n            poll(1000);\n            response = jsExecutor.executeAsyncScript(venteScript);\n            if (response != null) {\n                throw new IllegalStateException(format(&quot;Responsen fra isPageReady() skal alltid være null, men var: %s&quot;, response));\n            }\n        }\n    }\n}\n</code></pre>\n<p>The JavaScript executed:</p>\n<pre><code>private static String getAngularScript() {\n    return &quot;function getNg1Hooks(t,e){function n(t){try{if(!e&amp;&amp;angular.getTestability){var n=angular.getTestability(t);if&quot; +\n            &quot;(n)return{$$testability:n}}else{var i=angular.element(t).injector();if(i)return{$injector:i}}}catch(t)&quot; +\n            &quot;{}}function i(t){for(var e=document.querySelectorAll(t),i=0;i&lt;e.length;i++){var r=n(e[i]);if(r)return r}}if(t)&quot; +\n            &quot;return i(t);if(window.__TESTABILITY__NG1_APP_ROOT_INJECTOR__){var r=window&quot; +\n            &quot;.__TESTABILITY__NG1_APP_ROOT_INJECTOR__,a=null;try{a=r.get(\\&quot;$$testability\\&quot;)}catch(t){}return{$injector:r,&quot; +\n            &quot;$$testability:a}}return n(document.body)||i(\\&quot;[ng-app]\\&quot;)||i(\\&quot;[ng\\\\\\\\:app]\\&quot;)||i(\\&quot;[ng-controller]\\&quot;)||i&quot; +\n            &quot;(\\&quot;[ng\\\\\\\\:controller]\\&quot;)}waitForAngular=function(t,e){try{var n=e;if(!window.angular&amp;&amp;!window&quot; +\n            &quot;.getAngularTestability)throw new Error(\\&quot;both angularJS testability and angular testability are undefined.  &quot; +\n            &quot;This could be either because this is a non-angular page or because your test involves client-side navigation, &quot; +\n            &quot;which can interfere with Protractor's bootstrapping.  See http://git.io/v4gXM for details\\&quot;);!function(e){if&quot; +\n            &quot;(window.angular){var n=getNg1Hooks(t);if(n)if(n.$$testability)n.$$testability.whenStable(e);else{if(!n&quot; +\n            &quot;.$injector)throw t?new Error(\\&quot;root element (\\&quot;+t+\\&quot;) has no injector. this may mean it is not inside ng-app&quot; +\n            &quot;.\\&quot;):new Error('Could not automatically find injector on page: \\&quot;'+window.location.toString()+'\\&quot;.  Consider &quot; +\n            &quot;using config.rootEl');n.$injector.get(\\&quot;$browser\\&quot;).notifyWhenNoOutstandingRequests(e)}else e()}else e()}&quot; +\n            &quot;(function(){if(window.getAngularTestability){if(t){var e=null,i=document.querySelector(t);try{e=window&quot; +\n            &quot;.getAngularTestability(i)}catch(t){}if(e)return void e.whenStable(n)}var r=window.getAllAngularTestabilities()&quot; +\n            &quot;,a=r.length;if(0===a)return void n();var o=function(){0==--a&amp;&amp;n()};r.forEach(function(t){t.whenStable(o)})&quot; +\n            &quot;}else n()})}catch(t){e(t.message)}},waitForAngular(\\&quot;body\\&quot;,arguments[arguments.length-1]);&quot;;\n}\n</code></pre>\n"},{"tags":["java","multithreading","wait","notify"],"answers":[{"comments":[{"owner":{"account_id":5728149,"reputation":279,"user_id":4524562,"accept_rate":54,"display_name":"Mike"},"score":0,"creation_date":1442336460,"post_id":32591551,"comment_id":53036971,"body_markdown":"Thank you very much! I understand now the logic.","body":"Thank you very much! I understand now the logic."},{"owner":{"account_id":5728149,"reputation":279,"user_id":4524562,"accept_rate":54,"display_name":"Mike"},"score":0,"creation_date":1442336758,"post_id":32591551,"comment_id":53037133,"body_markdown":"I&#39;ve changed some code and now it&#39;s working as I expected `Main main = new Main();\n\t\tmain.new SecondThread().start();\n\t\tmain.new FirstThread().start();`","body":"I&#39;ve changed some code and now it&#39;s working as I expected <code>Main main = new Main(); \t\tmain.new SecondThread().start(); \t\tmain.new FirstThread().start();</code>"}],"tags":[],"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1442335986,"creation_date":1442335986,"answer_id":32591551,"question_id":32591479,"body_markdown":"The threads are started sequentially, and in theory thread 1 would execute before thread 2, although it&#39;s **not guaranteed** (pretty sure it&#39;ll be consistent in this simple case though, as there are no real or simulated aleatory delays). \r\n\r\nThis is why when thread 2 is started slightly before, it has a chance to wait on a lock that gets notified (by thread 1) subsequently, instead of waiting forever for a lock that&#39;s already been notified once (hence, no printing). \r\n\r\nOn the `static` lock `Object`: you&#39;re binding your `[First/Second]Thread` nested classes to **instances** of `Main`, so the lock has to be common to both if you want them to synchronize on the same lock. \r\n\r\nIf it was an instance object, your threads would access and synchronize on a different lock, as your `new Main()...` idiom would get two instances of `Main` and subsequently two instances of `lock`. ","title":"Java Thread wait and notify methods","body":"<p>The threads are started sequentially, and in theory thread 1 would execute before thread 2, although it's <strong>not guaranteed</strong> (pretty sure it'll be consistent in this simple case though, as there are no real or simulated aleatory delays). </p>\n\n<p>This is why when thread 2 is started slightly before, it has a chance to wait on a lock that gets notified (by thread 1) subsequently, instead of waiting forever for a lock that's already been notified once (hence, no printing). </p>\n\n<p>On the <code>static</code> lock <code>Object</code>: you're binding your <code>[First/Second]Thread</code> nested classes to <strong>instances</strong> of <code>Main</code>, so the lock has to be common to both if you want them to synchronize on the same lock. </p>\n\n<p>If it was an instance object, your threads would access and synchronize on a different lock, as your <code>new Main()...</code> idiom would get two instances of <code>Main</code> and subsequently two instances of <code>lock</code>. </p>\n"},{"comments":[{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1442348067,"post_id":32591568,"comment_id":53043259,"body_markdown":"`sleep()` never fixes concurrency bugs.  It only makes them much less likely to happen.  If you&#39;re writing code for a demo or for educational purposes, then no worries!  But it&#39;s a different story if you&#39;re writing production code.  In production &quot;much less likely to happen&quot; means less likely to happen _in testing_.  And we assume therefore that it eventually will happen at the customer site.","body":"<code>sleep()</code> never fixes concurrency bugs.  It only makes them much less likely to happen.  If you&#39;re writing code for a demo or for educational purposes, then no worries!  But it&#39;s a different story if you&#39;re writing production code.  In production &quot;much less likely to happen&quot; means less likely to happen <i>in testing</i>.  And we assume therefore that it eventually will happen at the customer site."},{"owner":{"account_id":1005212,"reputation":28568,"user_id":1019167,"accept_rate":92,"display_name":"AlexWien"},"score":0,"creation_date":1442411783,"post_id":32591568,"comment_id":53072146,"body_markdown":"@jameslarge The sleep() was meant for unit tests, or for demonstration to see the parallelism, not for productive code. We don&#39;t want to sleep for fun, I will edit that","body":"@jameslarge The sleep() was meant for unit tests, or for demonstration to see the parallelism, not for productive code. We don&#39;t want to sleep for fun, I will edit that"}],"tags":[],"owner":{"account_id":1005212,"reputation":28568,"user_id":1019167,"accept_rate":92,"display_name":"AlexWien"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1442411753,"creation_date":1442336031,"answer_id":32591568,"question_id":32591479,"body_markdown":"&gt; &quot;Is that happening because the computer is so fast and the threads run\r\n&gt; sequentially? Theoretically the second start() method can be called\r\n&gt; first in my opinion is it?. &quot;\r\n\r\nYes, you can introduce a sleep() with random time, for better (unit-) test, or demonstration purpose. (Of course, the final running code should not have that sleep)\r\n\r\n    \r\n\r\n&gt; And the last question I have, is why the lock Object must be static\r\n\r\nPrincipally, it does not matter whether the lock is static or not, but you have to have the possibility to access it, and it must be the same lock object. (Not one object instance for each class). In your case it must be static, otherwise it would be two different objects instances.","title":"Java Thread wait and notify methods","body":"<blockquote>\n  <p>\"Is that happening because the computer is so fast and the threads run\n  sequentially? Theoretically the second start() method can be called\n  first in my opinion is it?. \"</p>\n</blockquote>\n\n<p>Yes, you can introduce a sleep() with random time, for better (unit-) test, or demonstration purpose. (Of course, the final running code should not have that sleep)</p>\n\n<blockquote>\n  <p>And the last question I have, is why the lock Object must be static</p>\n</blockquote>\n\n<p>Principally, it does not matter whether the lock is static or not, but you have to have the possibility to access it, and it must be the same lock object. (Not one object instance for each class). In your case it must be static, otherwise it would be two different objects instances.</p>\n"},{"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665661692,"creation_date":1442348866,"answer_id":32595029,"question_id":32591479,"body_markdown":"This is wrong because it doesn&#39;t change any shared state that the other thread can test:\r\n\r\n    synchronized (lock) {\r\n        lock.notify();\r\n        System.out.println(&quot;I&#39;ve entered in FirstThread&quot;);\r\n    }\r\n\r\nAnd this is wrong because it does not test anything:\r\n\r\n    synchronized (lock) {\r\n        lock.wait();\r\n        System.out.println(&quot;I&#39;m in the second thread&quot;);\r\n    }\r\n\r\nThe problem is, `lock.notify()` does not do _anything at all_ if there is no thread sleeping in `lock.wait()`.   In your program, it is possible for the `FirstThread` to call notify() before the `SecondThread` calls wait().  The wait() call will never return in that case because the notify() call will do nothing in that case.\r\n\r\nThere&#39;s a reason why they make you enter a mutex (i.e., a `synchronized` block) before you can call wait() or notify().  It&#39;s because you are supposed to use the mutex to protect the shared shared state for which the waiter is waiting.\r\n\r\n&quot;shared state&quot; can be as simple as a single boolean:\r\n\r\n     boolean firstThreadRan = false;\r\n\r\nThe notifier (a.k.a., &quot;producer&quot;) does this:\r\n\r\n     synchronized(lock) {\r\n         firstThreadRan = true;\r\n         lock.notify();\r\n         ...\r\n     }\r\n\r\nThe waiter (a.k.a., &quot;consumer&quot;) does this:\r\n\r\n    synchronized(lock) {\r\n        while (! firstThreadRan) {\r\n            lock.wait();\r\n        }\r\n        ...\r\n    }\r\n\r\nThe while loop is not strictly necessary in this case, but it becomes very important when more than one consumer is competing for the same event.  It&#39;s good practice to always use a loop.\r\n\r\nSee https://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html for a tutorial that explains `wait()` and `notify()` in more detail.","title":"Java Thread wait and notify methods","body":"<p>This is wrong because it doesn't change any shared state that the other thread can test:</p>\n<pre><code>synchronized (lock) {\n    lock.notify();\n    System.out.println(&quot;I've entered in FirstThread&quot;);\n}\n</code></pre>\n<p>And this is wrong because it does not test anything:</p>\n<pre><code>synchronized (lock) {\n    lock.wait();\n    System.out.println(&quot;I'm in the second thread&quot;);\n}\n</code></pre>\n<p>The problem is, <code>lock.notify()</code> does not do <em>anything at all</em> if there is no thread sleeping in <code>lock.wait()</code>.   In your program, it is possible for the <code>FirstThread</code> to call notify() before the <code>SecondThread</code> calls wait().  The wait() call will never return in that case because the notify() call will do nothing in that case.</p>\n<p>There's a reason why they make you enter a mutex (i.e., a <code>synchronized</code> block) before you can call wait() or notify().  It's because you are supposed to use the mutex to protect the shared shared state for which the waiter is waiting.</p>\n<p>&quot;shared state&quot; can be as simple as a single boolean:</p>\n<pre><code> boolean firstThreadRan = false;\n</code></pre>\n<p>The notifier (a.k.a., &quot;producer&quot;) does this:</p>\n<pre><code> synchronized(lock) {\n     firstThreadRan = true;\n     lock.notify();\n     ...\n }\n</code></pre>\n<p>The waiter (a.k.a., &quot;consumer&quot;) does this:</p>\n<pre><code>synchronized(lock) {\n    while (! firstThreadRan) {\n        lock.wait();\n    }\n    ...\n}\n</code></pre>\n<p>The while loop is not strictly necessary in this case, but it becomes very important when more than one consumer is competing for the same event.  It's good practice to always use a loop.</p>\n<p>See <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html</a> for a tutorial that explains <code>wait()</code> and <code>notify()</code> in more detail.</p>\n"}],"owner":{"account_id":5728149,"reputation":279,"user_id":4524562,"accept_rate":54,"display_name":"Mike"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":189,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":32591551,"answer_count":3,"score":4,"last_activity_date":1665661692,"creation_date":1442335765,"question_id":32591479,"body_markdown":"I&#39;m learning for OCJP and now I&#39;m at &quot;Thread&quot; chapter, I have some questions about wait and notify methods. I think I understand what&#39;s happening here but I just want to make sure that I&#39;m on the right way.I wrote this code as an example:\r\n\r\n    package threads;\r\n    \r\n    public class Main {\r\n    \r\n    \tstatic Object lock = new Object();\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tnew Main().new FirstThread().start();\r\n    \t\tnew Main().new SecondThread().start();\r\n    \t}\r\n    \r\n    \tclass FirstThread extends Thread {\r\n    \t\tpublic void run() {\r\n    \t\t\tsynchronized (lock) {\r\n    \t\t\t\tlock.notify();\r\n    \t\t\t\tSystem.out.println(&quot;I&#39;ve entered in FirstThread&quot;);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \tclass SecondThread extends Thread {\r\n    \t\tpublic void run() {\r\n    \t\t\tsynchronized (lock) {\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\tlock.wait();\r\n    \t\t\t\t\tSystem.out.println(&quot;I&#39;m in the second thread&quot;);\r\n    \t\t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\t\te.printStackTrace();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nIn this example the console output is `I&#39;ve entered in FirstThread`, because the first thread starts, the notify() method is called, then the second thread starts, the wait() method is called and the String &quot;I&#39;m in the second thread&quot; is not printed.\r\n\r\nThe next scenario is that I reverse the positions of `new Main().new FirstThread().start();` and `new Main().new SecondThread().start();` the output is\r\n\r\n    I&#39;ve entered in FirstThread\r\n    I&#39;m in the second thread\r\n\r\nbecause the second thread starts, the wait() method is called, then the first thread starts, the method notify() is called, the console prints `I&#39;ve entered in FirstThread`, the wait is released and `I&#39;m in the second thread` is printed in the console.\r\n\r\nIs that happening because the computer is so fast and the threads run sequentially? Theoretically the second start() method can be called first in my opinion is it?. \r\n\r\nAnd the last question I have, is why the lock Object must be static, because if I remove the static modifier the output is always `I&#39;ve entered in FirstThread`?\r\n\r\nI know that static fields are loaded in JVM when the class is loaded, but I can&#39;t understand the logic of lock Object.","title":"Java Thread wait and notify methods","body":"<p>I'm learning for OCJP and now I'm at \"Thread\" chapter, I have some questions about wait and notify methods. I think I understand what's happening here but I just want to make sure that I'm on the right way.I wrote this code as an example:</p>\n\n<pre><code>package threads;\n\npublic class Main {\n\n    static Object lock = new Object();\n\n    public static void main(String[] args) {\n        new Main().new FirstThread().start();\n        new Main().new SecondThread().start();\n    }\n\n    class FirstThread extends Thread {\n        public void run() {\n            synchronized (lock) {\n                lock.notify();\n                System.out.println(\"I've entered in FirstThread\");\n            }\n        }\n    }\n    class SecondThread extends Thread {\n        public void run() {\n            synchronized (lock) {\n                try {\n                    lock.wait();\n                    System.out.println(\"I'm in the second thread\");\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>In this example the console output is <code>I've entered in FirstThread</code>, because the first thread starts, the notify() method is called, then the second thread starts, the wait() method is called and the String \"I'm in the second thread\" is not printed.</p>\n\n<p>The next scenario is that I reverse the positions of <code>new Main().new FirstThread().start();</code> and <code>new Main().new SecondThread().start();</code> the output is</p>\n\n<pre><code>I've entered in FirstThread\nI'm in the second thread\n</code></pre>\n\n<p>because the second thread starts, the wait() method is called, then the first thread starts, the method notify() is called, the console prints <code>I've entered in FirstThread</code>, the wait is released and <code>I'm in the second thread</code> is printed in the console.</p>\n\n<p>Is that happening because the computer is so fast and the threads run sequentially? Theoretically the second start() method can be called first in my opinion is it?. </p>\n\n<p>And the last question I have, is why the lock Object must be static, because if I remove the static modifier the output is always <code>I've entered in FirstThread</code>?</p>\n\n<p>I know that static fields are loaded in JVM when the class is loaded, but I can't understand the logic of lock Object.</p>\n"},{"tags":["java","kubernetes","ffmpeg","jvm","keda"],"comments":[{"owner":{"account_id":3408395,"reputation":11432,"user_id":2858934,"display_name":"Thomas"},"score":0,"creation_date":1665409623,"post_id":74014853,"comment_id":130687088,"body_markdown":"Can you show the output of `kubectl get pod &lt;name&gt; -o yaml` of a failed attempt?","body":"Can you show the output of <code>kubectl get pod &lt;name&gt; -o yaml</code> of a failed attempt?"},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1665410020,"post_id":74014853,"comment_id":130687234,"body_markdown":"ProcessBuilder can freeze indefinitely if not set up correctly. Where is code for `Execution.executeAndWait`?","body":"ProcessBuilder can freeze indefinitely if not set up correctly. Where is code for <code>Execution.executeAndWait</code>?"}],"answers":[{"tags":[],"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665661237,"creation_date":1665477271,"answer_id":74025236,"question_id":74014853,"body_markdown":"Some suggestions for checking that the sub-process handling is correct:\r\n\r\nCarefully check the logs to see if `ffmpeg` is waiting on input (eg overwrite file confirmation etc). You could eliminate that possibility by closing STDIN explicitly (also see `-y` flag to force overwrite, or `-nostdin` to remove use of stdin altogether):\r\n\r\n    proc.getOutputStream().close();\r\n\r\nYour command looks like a shell command as it contains pipe so isn&#39;t valid for direct launch from Java, drop the pipe and following parts, or change command to launch inside a shell which would handle the pipe correctly:\r\n\r\n    /usr/local/bin/ffmpeg -i ... | stdout: xxx.log | stderr: yyy.log\r\n    =&gt; \r\n    /usr/local/bin/ffmpeg -i ...\r\n    or\r\n    {&quot;bash&quot;,&quot;-c&quot;,&quot;/usr/local/bin/ffmpeg -i ... | stdout: xxx.log | stderr: yyy.log&quot;}\r\n\r\nThe STDOUT/ERR streams should be dealt with before calling `proc.waitFor()`, not afterwards and not after `destroy()`. You may be better off ensuring that these streams end inside `exec()`:\r\n\r\n    // execute data read/write in separate threads\r\n    Future&lt;?&gt; so = outExecutor.submit(outConsumer);\r\n    Future&lt;?&gt; se = errorExecutor.submit(errConsumer);\r\n\r\n    // Await STDOUT/ERR termination:\r\n    try {\r\n        so.get();\r\n        se.get();\r\n    } catch (InterruptedException |ExecutionException e) {\r\n        throw new RuntimeException(&quot;failed&quot;, e);\r\n    }\r\n","title":"What could make the JVM fail catastrophically (or hang indefinitely) when executing ffmpeg?","body":"<p>Some suggestions for checking that the sub-process handling is correct:</p>\n<p>Carefully check the logs to see if <code>ffmpeg</code> is waiting on input (eg overwrite file confirmation etc). You could eliminate that possibility by closing STDIN explicitly (also see <code>-y</code> flag to force overwrite, or <code>-nostdin</code> to remove use of stdin altogether):</p>\n<pre><code>proc.getOutputStream().close();\n</code></pre>\n<p>Your command looks like a shell command as it contains pipe so isn't valid for direct launch from Java, drop the pipe and following parts, or change command to launch inside a shell which would handle the pipe correctly:</p>\n<pre><code>/usr/local/bin/ffmpeg -i ... | stdout: xxx.log | stderr: yyy.log\n=&gt; \n/usr/local/bin/ffmpeg -i ...\nor\n{&quot;bash&quot;,&quot;-c&quot;,&quot;/usr/local/bin/ffmpeg -i ... | stdout: xxx.log | stderr: yyy.log&quot;}\n</code></pre>\n<p>The STDOUT/ERR streams should be dealt with before calling <code>proc.waitFor()</code>, not afterwards and not after <code>destroy()</code>. You may be better off ensuring that these streams end inside <code>exec()</code>:</p>\n<pre><code>// execute data read/write in separate threads\nFuture&lt;?&gt; so = outExecutor.submit(outConsumer);\nFuture&lt;?&gt; se = errorExecutor.submit(errConsumer);\n\n// Await STDOUT/ERR termination:\ntry {\n    so.get();\n    se.get();\n} catch (InterruptedException |ExecutionException e) {\n    throw new RuntimeException(&quot;failed&quot;, e);\n}\n</code></pre>\n"}],"owner":{"account_id":2105842,"reputation":3516,"user_id":1872194,"accept_rate":55,"display_name":"Brendan Hill"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665661237,"creation_date":1665404388,"question_id":74014853,"body_markdown":"I am trying to debug a Java microservice hosted in Kubernetes, in pods which are created dynamically by KEDA feeding off an SQS queue. Pods have dedicated resources of up to 3GB RAM, which to our knowledge is sufficient (although this assumption might need to be revisited).\r\n\r\nThe service at one point calls ffmpeg, and sometimes randomly this appears to cause catastrophic failure of the process. (Sometimes it succeed on the next attempt of exactly the same job.)\r\n\r\nIt is so catastrophic that no logs are generated, no exceptions thrown, and even the finally {} block is not even triggered.\r\n\r\nThis appears to occur in the remote k8 environment only and I have failed to replicate it locally.\r\n\r\nWhat general reasons are there for a Java, executing another program with Execution.executeAndWait(), to fail so catastrophically? \r\n\r\nHow could I continue investigating the cause?\r\n\r\n```\r\n    public void executeFfmpeg(String[] cmd) {\r\n\r\n        log.info(&quot;1&quot;);  // &lt;-- this IS logged!\r\n        int retval = 0;\r\n        try {\r\n            retval = Execution.executeAndWait(cmd, stdout, stderr);\r\n            if ( retval != 0 ) {\r\n                log.error(&quot;FFMPEG broke. stderr: {}&quot;, errorFile);   // &lt;-- this log never occurs\r\n                throw new TranscodingFailedException(&quot;ffmpeg command failed: &quot; + String.valueOf(retval) + &quot; - &quot; + String.join(&quot; &quot;, cmd)); // &lt;-- never thrown\r\n            }\r\n        } catch (InterruptedException e) {\r\n            log.error(&quot;InterruptedException caught in the middle of the execution of ffmpeg. this will now proceed to crash...&quot;, e); // &lt;-- this log never occurs\r\n            throw e;\r\n        } finally {\r\n            log.info(&quot;2&quot;); // &lt;-- THIS IS NOT CALLED!!! even in the finally block!?\r\n            stdout.close();\r\n            stderr.close();\r\n        }\r\n    }\r\n\r\n\r\n/// Execution class:\r\n\r\n    public static int executeAndWait(String[] cmd, Writer stdout, Writer stderr) throws IOException, InterruptedException {\r\n        Process proc = null;\r\n        ExecutorService outExecutor = Executors.newSingleThreadExecutor();\r\n        ExecutorService errExecutor = Executors.newSingleThreadExecutor();\r\n\r\n        try {\r\n            proc = exec(cmd, stdout, stderr, outExecutor, errExecutor);\r\n            // block until sub-process exits\r\n            return proc.waitFor();\r\n        } finally {\r\n            shutdownProcess(proc);\r\n            shutdownAndAwaitTermination(outExecutor);\r\n            shutdownAndAwaitTermination(errExecutor);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    private static void shutdownProcess(Process proc) {\r\n        try {\r\n            if (proc != null) {\r\n                proc.destroy();\r\n            }\r\n        } catch (Exception e) {\r\n            log.error(e.getMessage(), e);\r\n        }\r\n    }\r\n\r\n    private static void shutdownAndAwaitTermination(ExecutorService pool) {\r\n        try {\r\n            pool.shutdown(); // Disable new tasks from being submitted\r\n            try {\r\n                // Wait a while for existing tasks to terminate\r\n                if (!pool.awaitTermination(800, TimeUnit.MILLISECONDS)) {\r\n                    pool.shutdownNow(); // Cancel currently executing tasks\r\n                }\r\n            } catch (InterruptedException ie) {\r\n                // (Re-)Cancel if current thread also interrupted\r\n                pool.shutdownNow();\r\n            }\r\n        } catch (Exception e) {\r\n            log.error(e.getMessage(), e);\r\n        }\r\n    }\r\n\r\n    private static Process exec(String[] cmd, Writer stdout, Writer stderr, ExecutorService outExecutor, ExecutorService errorExecutor) throws IOException {\r\n        // execute input command in a sub-process\r\n        Process proc = Runtime.getRuntime().exec(cmd);\r\n\r\n        StreamConsumer outConsumer = new StreamConsumer(proc.getInputStream(), stdout);\r\n        StreamConsumer errConsumer = new StreamConsumer(proc.getErrorStream(), stderr);\r\n\r\n        // execute data read/write in separate threads\r\n        outExecutor.submit(outConsumer);\r\n        errorExecutor.submit(errConsumer);\r\n\r\n        return proc;\r\n\r\n    }\r\n```\r\n\r\nAn example of the ffmpeg command is:\r\n\r\n```\r\n/usr/local/bin/ffmpeg -i /tmp/transcode-a5ff7706-488a-4e24-9ef8-9657d1254a26626348807122071896/str_CAM_Z2VH_con_H0Zqr2flbT.webm -filter_complex [0:v]setpts=0.8363824*PTS,scale=w=1280:h=720:force_original_aspect_ratio=1,pad=1280:720:(ow-iw)/2:(oh-ih)/2[v0];[0:a]aresample=async=1000[0sync] -map [v0] -map [0sync] -vsync vfr -r 25 -c:v libx264 -c:a mp3 /tmp/transcode-a5ff7706-488a-4e24-9ef8-9657d1254a26626348807122071896/intermediate-str_CAM_Z2VH_con_H0Zqr2flbT.webm.mkv | stdout: /tmp/intermediate-stdout-12310474463787935763.log | stderr: /tmp/intermediate-stderr-12166558954928907997.log\r\n```\r\n","title":"What could make the JVM fail catastrophically (or hang indefinitely) when executing ffmpeg?","body":"<p>I am trying to debug a Java microservice hosted in Kubernetes, in pods which are created dynamically by KEDA feeding off an SQS queue. Pods have dedicated resources of up to 3GB RAM, which to our knowledge is sufficient (although this assumption might need to be revisited).</p>\n<p>The service at one point calls ffmpeg, and sometimes randomly this appears to cause catastrophic failure of the process. (Sometimes it succeed on the next attempt of exactly the same job.)</p>\n<p>It is so catastrophic that no logs are generated, no exceptions thrown, and even the finally {} block is not even triggered.</p>\n<p>This appears to occur in the remote k8 environment only and I have failed to replicate it locally.</p>\n<p>What general reasons are there for a Java, executing another program with Execution.executeAndWait(), to fail so catastrophically?</p>\n<p>How could I continue investigating the cause?</p>\n<pre><code>    public void executeFfmpeg(String[] cmd) {\n\n        log.info(&quot;1&quot;);  // &lt;-- this IS logged!\n        int retval = 0;\n        try {\n            retval = Execution.executeAndWait(cmd, stdout, stderr);\n            if ( retval != 0 ) {\n                log.error(&quot;FFMPEG broke. stderr: {}&quot;, errorFile);   // &lt;-- this log never occurs\n                throw new TranscodingFailedException(&quot;ffmpeg command failed: &quot; + String.valueOf(retval) + &quot; - &quot; + String.join(&quot; &quot;, cmd)); // &lt;-- never thrown\n            }\n        } catch (InterruptedException e) {\n            log.error(&quot;InterruptedException caught in the middle of the execution of ffmpeg. this will now proceed to crash...&quot;, e); // &lt;-- this log never occurs\n            throw e;\n        } finally {\n            log.info(&quot;2&quot;); // &lt;-- THIS IS NOT CALLED!!! even in the finally block!?\n            stdout.close();\n            stderr.close();\n        }\n    }\n\n\n/// Execution class:\n\n    public static int executeAndWait(String[] cmd, Writer stdout, Writer stderr) throws IOException, InterruptedException {\n        Process proc = null;\n        ExecutorService outExecutor = Executors.newSingleThreadExecutor();\n        ExecutorService errExecutor = Executors.newSingleThreadExecutor();\n\n        try {\n            proc = exec(cmd, stdout, stderr, outExecutor, errExecutor);\n            // block until sub-process exits\n            return proc.waitFor();\n        } finally {\n            shutdownProcess(proc);\n            shutdownAndAwaitTermination(outExecutor);\n            shutdownAndAwaitTermination(errExecutor);\n        }\n    }\n\n\n\n    private static void shutdownProcess(Process proc) {\n        try {\n            if (proc != null) {\n                proc.destroy();\n            }\n        } catch (Exception e) {\n            log.error(e.getMessage(), e);\n        }\n    }\n\n    private static void shutdownAndAwaitTermination(ExecutorService pool) {\n        try {\n            pool.shutdown(); // Disable new tasks from being submitted\n            try {\n                // Wait a while for existing tasks to terminate\n                if (!pool.awaitTermination(800, TimeUnit.MILLISECONDS)) {\n                    pool.shutdownNow(); // Cancel currently executing tasks\n                }\n            } catch (InterruptedException ie) {\n                // (Re-)Cancel if current thread also interrupted\n                pool.shutdownNow();\n            }\n        } catch (Exception e) {\n            log.error(e.getMessage(), e);\n        }\n    }\n\n    private static Process exec(String[] cmd, Writer stdout, Writer stderr, ExecutorService outExecutor, ExecutorService errorExecutor) throws IOException {\n        // execute input command in a sub-process\n        Process proc = Runtime.getRuntime().exec(cmd);\n\n        StreamConsumer outConsumer = new StreamConsumer(proc.getInputStream(), stdout);\n        StreamConsumer errConsumer = new StreamConsumer(proc.getErrorStream(), stderr);\n\n        // execute data read/write in separate threads\n        outExecutor.submit(outConsumer);\n        errorExecutor.submit(errConsumer);\n\n        return proc;\n\n    }\n</code></pre>\n<p>An example of the ffmpeg command is:</p>\n<pre><code>/usr/local/bin/ffmpeg -i /tmp/transcode-a5ff7706-488a-4e24-9ef8-9657d1254a26626348807122071896/str_CAM_Z2VH_con_H0Zqr2flbT.webm -filter_complex [0:v]setpts=0.8363824*PTS,scale=w=1280:h=720:force_original_aspect_ratio=1,pad=1280:720:(ow-iw)/2:(oh-ih)/2[v0];[0:a]aresample=async=1000[0sync] -map [v0] -map [0sync] -vsync vfr -r 25 -c:v libx264 -c:a mp3 /tmp/transcode-a5ff7706-488a-4e24-9ef8-9657d1254a26626348807122071896/intermediate-str_CAM_Z2VH_con_H0Zqr2flbT.webm.mkv | stdout: /tmp/intermediate-stdout-12310474463787935763.log | stderr: /tmp/intermediate-stderr-12166558954928907997.log\n</code></pre>\n"},{"tags":["java","groovy","dynamic","assert","execute"],"comments":[{"owner":{"account_id":7979619,"reputation":347,"user_id":6021482,"accept_rate":77,"display_name":"Azeem112"},"score":0,"creation_date":1665660821,"post_id":74025357,"comment_id":130754336,"body_markdown":"I have tried but it gives an error that matching constructor isn&#39;t found.","body":"I have tried but it gives an error that matching constructor isn&#39;t found."},{"owner":{"account_id":5050148,"reputation":662,"user_id":4054975,"display_name":"Onno Rouast"},"score":0,"creation_date":1665670400,"post_id":74025357,"comment_id":130757794,"body_markdown":"that probably means means you got the wrong class name","body":"that probably means means you got the wrong class name"},{"owner":{"account_id":7979619,"reputation":347,"user_id":6021482,"accept_rate":77,"display_name":"Azeem112"},"score":0,"creation_date":1665673552,"post_id":74025357,"comment_id":130759031,"body_markdown":"Thanks, I&#39;ve managed to do it using def object = Eval.me(&quot;Code&quot;) ;","body":"Thanks, I&#39;ve managed to do it using def object = Eval.me(&quot;Code&quot;) ;"}],"owner":{"account_id":7979619,"reputation":347,"user_id":6021482,"accept_rate":77,"display_name":"Azeem112"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1665673560,"answer_count":0,"score":0,"last_activity_date":1665661039,"creation_date":1665477916,"question_id":74025357,"body_markdown":"I have around 250 classes with almost the same functions. The selection of classes is based on the parameter.\r\n\r\nThe name of the class is customObject(n) where n is 1-250.\r\n\r\nInstead of adding 250 if else conditions based on the parameter I want to dynamically create the instance of the class based on the given parameter. \r\n\r\nI have created a string field for the class names and I&#39;ve tried the below. \r\n\r\n    String ClassName = &quot;FullPath&quot; + className + n + &quot;object.create()&quot;;\r\n    \r\n    assert &quot;className&quot;;\r\n    def object = ClassName.execte();\r\n\r\nassert is working fine but I can&#39;t return the object from assert as I need to do further operations with this dynamic object. \r\n\r\n    def test = assert &quot;className&quot;;\r\n    assert &quot;def test = &quot; + className;\r\n    return test;\r\n\r\nthe above lines aren&#39;t working and execute method is throwing an error that the file is not found. \r\n\r\nI have also tried `groovy -e &quot;script&quot;` but it&#39;s not working as excepted as well.\r\n\r\nHow can I create a dynamic object to optimize my code instead of creating 250 if conditions? \r\n\r\nThe only piece of code that I want to change is \r\n\r\n    Long ObjectRk = 1000; //ObjectRk is the function parameter\r\n    def Object = CustomObject110.object.fetchIfExist(ObjectRk);\r\n\r\nhere at 110, I want to write the class of my choice and the remaining piece of code is general.","title":"Java groovy creating dynamic class object","body":"<p>I have around 250 classes with almost the same functions. The selection of classes is based on the parameter.</p>\n<p>The name of the class is customObject(n) where n is 1-250.</p>\n<p>Instead of adding 250 if else conditions based on the parameter I want to dynamically create the instance of the class based on the given parameter.</p>\n<p>I have created a string field for the class names and I've tried the below.</p>\n<pre><code>String ClassName = &quot;FullPath&quot; + className + n + &quot;object.create()&quot;;\n\nassert &quot;className&quot;;\ndef object = ClassName.execte();\n</code></pre>\n<p>assert is working fine but I can't return the object from assert as I need to do further operations with this dynamic object.</p>\n<pre><code>def test = assert &quot;className&quot;;\nassert &quot;def test = &quot; + className;\nreturn test;\n</code></pre>\n<p>the above lines aren't working and execute method is throwing an error that the file is not found.</p>\n<p>I have also tried <code>groovy -e &quot;script&quot;</code> but it's not working as excepted as well.</p>\n<p>How can I create a dynamic object to optimize my code instead of creating 250 if conditions?</p>\n<p>The only piece of code that I want to change is</p>\n<pre><code>Long ObjectRk = 1000; //ObjectRk is the function parameter\ndef Object = CustomObject110.object.fetchIfExist(ObjectRk);\n</code></pre>\n<p>here at 110, I want to write the class of my choice and the remaining piece of code is general.</p>\n"},{"tags":["java","spring-boot","rx-java","project-reactor"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1632198593,"post_id":69262929,"comment_id":122421425,"body_markdown":"Can you show the constructor(s) for the `Code` class?  InjectMocks is a bit fussy about whether to choose a constructor, or try to inject the fields directly.  If it can&#39;t find a suitable constructor, it might go for field injection, and fall over because of the `final`.","body":"Can you show the constructor(s) for the <code>Code</code> class?  InjectMocks is a bit fussy about whether to choose a constructor, or try to inject the fields directly.  If it can&#39;t find a suitable constructor, it might go for field injection, and fall over because of the <code>final</code>."},{"owner":{"account_id":3965515,"reputation":2640,"user_id":3271600,"accept_rate":27,"display_name":"GvSharma"},"score":0,"creation_date":1632199133,"post_id":69262929,"comment_id":122421510,"body_markdown":"have you seen this.. https://stackoverflow.com/questions/56883605/how-to-test-function-inside-rxjava-flatmap","body":"have you seen this.. <a href=\"https://stackoverflow.com/questions/56883605/how-to-test-function-inside-rxjava-flatmap\" title=\"how to test function inside rxjava flatmap\">stackoverflow.com/questions/56883605/&hellip;</a>"},{"owner":{"account_id":732315,"reputation":4996,"user_id":681444,"display_name":"racraman"},"score":0,"creation_date":1632199427,"post_id":69262929,"comment_id":122421562,"body_markdown":"Can you confirm which line is throwing the Exception?   On some tests, it’s failing on the `when` before it ever involves the code under test - in which case the solution is to simply use `doReturn(Mono.just(new ResolvedObject())).when(objectResolver).resolve(any())`.   Note the different syntax here, that the `when` contains only the object, not the call to `resolve`.","body":"Can you confirm which line is throwing the Exception?   On some tests, it’s failing on the <code>when</code> before it ever involves the code under test - in which case the solution is to simply use <code>doReturn(Mono.just(new ResolvedObject())).when(objectResolver).resolve(any())</code>.   Note the different syntax here, that the <code>when</code> contains only the object, not the call to <code>resolve</code>."},{"owner":{"account_id":13286748,"reputation":303,"user_id":9592585,"display_name":"Shubhankar Agrawal"},"score":0,"creation_date":1632204579,"post_id":69262929,"comment_id":122422651,"body_markdown":"@DawoodibnKareem, I&#39;m using Lombok&#39;s RequiredArgsConstructor","body":"@DawoodibnKareem, I&#39;m using Lombok&#39;s RequiredArgsConstructor"},{"owner":{"account_id":13286748,"reputation":303,"user_id":9592585,"display_name":"Shubhankar Agrawal"},"score":0,"creation_date":1632204634,"post_id":69262929,"comment_id":122422662,"body_markdown":"@GvSharma, yes I tried that too, unfortunately didn&#39;t work.","body":"@GvSharma, yes I tried that too, unfortunately didn&#39;t work."},{"owner":{"account_id":13286748,"reputation":303,"user_id":9592585,"display_name":"Shubhankar Agrawal"},"score":0,"creation_date":1632204671,"post_id":69262929,"comment_id":122422676,"body_markdown":"@racraman, I&#39;m not getting an exception, but an unnecessary stubbing from Mockito and no coverage on the code inside the flatmap.","body":"@racraman, I&#39;m not getting an exception, but an unnecessary stubbing from Mockito and no coverage on the code inside the flatmap."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1632253048,"post_id":69262929,"comment_id":122441287,"body_markdown":"My advice would be to try it without the Lombok annotation.  Mockito uses its own reflection, and I don&#39;t know whether it will find the methods generated by Lombok.","body":"My advice would be to try it without the Lombok annotation.  Mockito uses its own reflection, and I don&#39;t know whether it will find the methods generated by Lombok."}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1666000601,"post_id":74055091,"comment_id":130823117,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/74055091/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":26576601,"reputation":21,"user_id":20201851,"display_name":"Aankit Singh"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665660917,"creation_date":1665660917,"answer_id":74055091,"question_id":69262929,"body_markdown":"You need to subscribe the mono to release the item.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    @Test\r\n    void testToTest() {\r\n        when(objectResolver.resolve(any()).thenReturn(Mono.just(new ResolvedObject()));\r\n        StepVerifier.create(code.toTest(new Object()))\r\n            .expectNext(&quot;resultString&quot;)\r\n            .verifyComplete();\r\n            \r\n            Mono&lt;String&gt; returnedMono = code.toTest(new Object());\r\n            returnedMono.subscribe();\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Mockito Unable to mock code within FlatMap RxJava","body":"<p>You need to subscribe the mono to release the item.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>@Test\nvoid testToTest() {\n    when(objectResolver.resolve(any()).thenReturn(Mono.just(new ResolvedObject()));\n    StepVerifier.create(code.toTest(new Object()))\n        .expectNext(\"resultString\")\n        .verifyComplete();\n        \n        Mono&lt;String&gt; returnedMono = code.toTest(new Object());\n        returnedMono.subscribe();\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":13286748,"reputation":303,"user_id":9592585,"display_name":"Shubhankar Agrawal"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":791,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1665660917,"creation_date":1632193742,"question_id":69262929,"body_markdown":"I have a code block with a flatMap which I&#39;m trying to test, but it seems Mockito does not go inside the flatMap. \r\n\r\nHere is my actual code class Code.java\r\n```\r\n\r\nprivate final ObjectResolver objectResolver;\r\n\r\npublic Mono&lt;String&gt; function toTest(Object obj) {\r\n    return Mono.just(obj)\r\n        .flatMap(obj -&gt; objectResolver.resolve(obj.getField())\r\n             .map(resolved -&gt; StringUtils.join(resolved.getField(), obj.getAnotherField())))\r\n}\r\n```\r\n\r\nAnd here is how I&#39;m trying to test it out:\r\n```\r\n@InjectMocks\r\nprivate Code code\r\n\r\n@Mock\r\nprivate ObjectResolver objectResolver\r\n\r\n@Test\r\nvoid testToTest() {\r\n    when(objectResolver.resolve(any()).thenReturn(Mono.just(new ResolvedObject()));\r\n    StepVerifier.create(code.toTest(new Object()))\r\n        .expectNext(&quot;resultString&quot;)\r\n        .verifyComplete();\r\n}\r\n```\r\nMockito doesn&#39;t seem to go within the flatMap when I try to debug. Any ideas?","title":"Mockito Unable to mock code within FlatMap RxJava","body":"<p>I have a code block with a flatMap which I'm trying to test, but it seems Mockito does not go inside the flatMap.</p>\n<p>Here is my actual code class Code.java</p>\n<pre><code>\nprivate final ObjectResolver objectResolver;\n\npublic Mono&lt;String&gt; function toTest(Object obj) {\n    return Mono.just(obj)\n        .flatMap(obj -&gt; objectResolver.resolve(obj.getField())\n             .map(resolved -&gt; StringUtils.join(resolved.getField(), obj.getAnotherField())))\n}\n</code></pre>\n<p>And here is how I'm trying to test it out:</p>\n<pre><code>@InjectMocks\nprivate Code code\n\n@Mock\nprivate ObjectResolver objectResolver\n\n@Test\nvoid testToTest() {\n    when(objectResolver.resolve(any()).thenReturn(Mono.just(new ResolvedObject()));\n    StepVerifier.create(code.toTest(new Object()))\n        .expectNext(&quot;resultString&quot;)\n        .verifyComplete();\n}\n</code></pre>\n<p>Mockito doesn't seem to go within the flatMap when I try to debug. Any ideas?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9258,"page":965,"page_size":100}
