{"items":[{"tags":["java","android","android-studio","mp3"],"comments":[{"owner":{"account_id":24764408,"reputation":306,"user_id":18648400,"display_name":"Mirco0"},"score":0,"creation_date":1659452705,"post_id":73207981,"comment_id":129295688,"body_markdown":"What about downloading the files in the first startup of the app, and keeping the files for when offline? It will require internet access, but it will be needed just the first time a user opens the app","body":"What about downloading the files in the first startup of the app, and keeping the files for when offline? It will require internet access, but it will be needed just the first time a user opens the app"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659451809,"creation_date":1659451809,"answer_id":73209590,"question_id":73207981,"body_markdown":"&gt; What can I do?\r\n\r\nYou have a tricky problem.  \r\n\r\n  - You could compress the mp3 files, but that will reduce the quality of the audio.\r\n\r\n  - If you have the time and skills, you could transcribe the music as Midi (synthesizer) files and include a Midi player in your application.  But the music will *sound* like synthesized music, and it would be a lot of work to do the transcribing.\r\n\r\n","title":"Android App Playing Music Without Internet","body":"<blockquote>\n<p>What can I do?</p>\n</blockquote>\n<p>You have a tricky problem.</p>\n<ul>\n<li><p>You could compress the mp3 files, but that will reduce the quality of the audio.</p>\n</li>\n<li><p>If you have the time and skills, you could transcribe the music as Midi (synthesizer) files and include a Midi player in your application.  But the music will <em>sound</em> like synthesized music, and it would be a lot of work to do the transcribing.</p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":149787,"reputation":160277,"user_id":362536,"accept_rate":88,"display_name":"Brad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659587838,"creation_date":1659587838,"answer_id":73230437,"question_id":73207981,"body_markdown":"For starters, use a codec that is more efficient than MP3.  You could encode your audio with Opus or AAC and reduce your bitrate a bit while retaining decent quality.\r\n\r\nYou&#39;ll still have a large amount of data usage though.  You claim that you *need* all 600 MB of this.  Is that really true?  If you need it, you need it.  There&#39;s nothing else to it.  But, you might consider non-technical solutions.  For instance, streaming a variety of music online, but reducing the available music for the few times the user is offline.","title":"Android App Playing Music Without Internet","body":"<p>For starters, use a codec that is more efficient than MP3.  You could encode your audio with Opus or AAC and reduce your bitrate a bit while retaining decent quality.</p>\n<p>You'll still have a large amount of data usage though.  You claim that you <em>need</em> all 600 MB of this.  Is that really true?  If you need it, you need it.  There's nothing else to it.  But, you might consider non-technical solutions.  For instance, streaming a variety of music online, but reducing the available music for the few times the user is offline.</p>\n"}],"owner":{"account_id":22857057,"reputation":25,"user_id":17001752,"display_name":"nataliaali"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73230437,"answer_count":2,"score":0,"last_activity_date":1659587838,"creation_date":1659445110,"question_id":73207981,"body_markdown":"I&#39;m developing a meditation app. Suppose I include the mp3 files in the raw file, and the application&#39;s size increases to around 600 MB. If I get the music files from a URL, the application will require Internet access. I&#39;d like to reduce the size of my application, but I also need music files. What can I do? I am a new developer.","title":"Android App Playing Music Without Internet","body":"<p>I'm developing a meditation app. Suppose I include the mp3 files in the raw file, and the application's size increases to around 600 MB. If I get the music files from a URL, the application will require Internet access. I'd like to reduce the size of my application, but I also need music files. What can I do? I am a new developer.</p>\n"},{"tags":["java","spring","spring-boot","annotations"],"comments":[{"owner":{"account_id":2799515,"reputation":815,"user_id":6647878,"display_name":"Nidhi257"},"score":0,"creation_date":1659582975,"post_id":73229947,"comment_id":129330420,"body_markdown":"can you give us an example. above error occur i guess when the line where you are using this @Inject annotation is not valid.","body":"can you give us an example. above error occur i guess when the line where you are using this @Inject annotation is not valid."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1659591049,"post_id":73229947,"comment_id":129331629,"body_markdown":"What is the reason for wanting to use `@Inject` over `@Autowired`? To use `@Inject` you need an additional dependency for `javax.inject`.","body":"What is the reason for wanting to use <code>@Inject</code> over <code>@Autowired</code>? To use <code>@Inject</code> you need an additional dependency for <code>javax.inject</code>."},{"owner":{"account_id":18440419,"reputation":11,"user_id":13433179,"display_name":"Anita"},"score":0,"creation_date":1659591757,"post_id":73229947,"comment_id":129331782,"body_markdown":"Thank you so much everyone. Adding additional dependency of javax.inject worked. Actually we wanted to read request body in exception handler. Hence was trying to use inject.","body":"Thank you so much everyone. Adding additional dependency of javax.inject worked. Actually we wanted to read request body in exception handler. Hence was trying to use inject."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1659594023,"post_id":73229947,"comment_id":129332316,"body_markdown":"Why would you need `@Inject` for that? Just use an `@RequestBody String body` if you want the raw data, no need for an `@Inject`. Seems like over engineering.","body":"Why would you need <code>@Inject</code> for that? Just use an <code>@RequestBody String body</code> if you want the raw data, no need for an <code>@Inject</code>. Seems like over engineering."}],"owner":{"account_id":18440419,"reputation":11,"user_id":13433179,"display_name":"Anita"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659587600,"creation_date":1659582569,"question_id":73229947,"body_markdown":"I am new to Java so this might be a silly question.\r\n\r\nI am trying to use @Inject in a class (We are using spring boot and for jars we are using gradle file.)\r\n\r\nWhen I am trying to use @Inject, it throws an error saying **Inject cannot be resolved to a type.** \r\n\r\nDo I need to add anything in my gradle file in order to use @Inject?\r\n\r\nPlease help! ","title":"How to use @Inject in spring boot while using gradle?","body":"<p>I am new to Java so this might be a silly question.</p>\n<p>I am trying to use @Inject in a class (We are using spring boot and for jars we are using gradle file.)</p>\n<p>When I am trying to use @Inject, it throws an error saying <strong>Inject cannot be resolved to a type.</strong></p>\n<p>Do I need to add anything in my gradle file in order to use @Inject?</p>\n<p>Please help!</p>\n"},{"tags":["java","bazel","bazel-java"],"answers":[{"tags":[],"owner":{"account_id":8432092,"reputation":4323,"user_id":6327445,"display_name":"ahumesky"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659587042,"creation_date":1659587042,"answer_id":73230369,"question_id":73229908,"body_markdown":"This is because `java_binary` is a &quot;binary&quot; rule, i.e., it outputs an executable, or another way, it&#39;s typically a &quot;terminal&quot; or &quot;root&quot; rule. So it doesn&#39;t pass along the info to add its deps to the final classpath, because it doesn&#39;t typically expect to be in the dependencies[1] of other targets (even `java_test`).\r\n\r\nYou could refactor the BUILD file so that `MyCommand.java` is in a `java_library`, and the `java_test` and the `java_binary` targets depend on that:\r\n\r\n```\r\njava_binary(\r\n    name = &quot;MyCommandMain&quot;,\r\n    runtime_deps = [&quot;:MyCommand&quot;],\r\n    main_class = &quot;com.example.one.MyCommand&quot;,\r\n)\r\n\r\njava_library(\r\n    name = &quot;MyCommand&quot;,\r\n    srcs = [\r\n        &quot;MyCommand.java&quot;,\r\n    ],\r\n    visibility = [&quot;//visibility:public&quot;],\r\n    deps = [\r\n        &quot;//src/main/java/com/example/two&quot;,\r\n    ],\r\n)\r\n```\r\n---\r\n\r\n1: But you do sometimes see things like this:\r\n\r\n```\r\n# or other kinds of binary rules (cc_binary, py_binary, etc)\r\njava_binary(\r\n  name = &quot;my_java_bin&quot;,\r\n  ...,\r\n)\r\n\r\nsh_binary(\r\n  name = &quot;my_shell_script&quot;,\r\n  srcs = [&quot;script.sh&quot;],\r\n  data = [&quot;:my_java_bin&quot;],\r\n)\r\n```\r\n\r\nand `script.sh` runs `my_java_bin` as part of whatever it&#39;s accomplishing. The difference here is that `my_shell_script` is using the whole binary, rather than programming against code within it.","title":"Why doesn&#39;t java_binary propagate runtime dependencies to java_test","body":"<p>This is because <code>java_binary</code> is a &quot;binary&quot; rule, i.e., it outputs an executable, or another way, it's typically a &quot;terminal&quot; or &quot;root&quot; rule. So it doesn't pass along the info to add its deps to the final classpath, because it doesn't typically expect to be in the dependencies[1] of other targets (even <code>java_test</code>).</p>\n<p>You could refactor the BUILD file so that <code>MyCommand.java</code> is in a <code>java_library</code>, and the <code>java_test</code> and the <code>java_binary</code> targets depend on that:</p>\n<pre><code>java_binary(\n    name = &quot;MyCommandMain&quot;,\n    runtime_deps = [&quot;:MyCommand&quot;],\n    main_class = &quot;com.example.one.MyCommand&quot;,\n)\n\njava_library(\n    name = &quot;MyCommand&quot;,\n    srcs = [\n        &quot;MyCommand.java&quot;,\n    ],\n    visibility = [&quot;//visibility:public&quot;],\n    deps = [\n        &quot;//src/main/java/com/example/two&quot;,\n    ],\n)\n</code></pre>\n<hr />\n<p>1: But you do sometimes see things like this:</p>\n<pre><code># or other kinds of binary rules (cc_binary, py_binary, etc)\njava_binary(\n  name = &quot;my_java_bin&quot;,\n  ...,\n)\n\nsh_binary(\n  name = &quot;my_shell_script&quot;,\n  srcs = [&quot;script.sh&quot;],\n  data = [&quot;:my_java_bin&quot;],\n)\n</code></pre>\n<p>and <code>script.sh</code> runs <code>my_java_bin</code> as part of whatever it's accomplishing. The difference here is that <code>my_shell_script</code> is using the whole binary, rather than programming against code within it.</p>\n"}],"owner":{"account_id":48379,"reputation":3600,"user_id":143733,"accept_rate":71,"display_name":"Setheron"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":268,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73230369,"answer_count":1,"score":0,"last_activity_date":1659587042,"creation_date":1659582092,"question_id":73229908,"body_markdown":"I wrote a small application and used _java_binary_ as follows:\r\n```\r\njava_binary(\r\n    name = &quot;MyCommand&quot;,\r\n    srcs = [\r\n        &quot;MyCommand.java&quot;,\r\n    ],\r\n    visibility = [&quot;//visibility:public&quot;],\r\n    deps = [\r\n        &quot;//src/main/java/com/example/two&quot;,\r\n    ],\r\n)\r\n```\r\n\r\nIt depends on a `java_library` target //src/main/java/com/example/two\r\n\r\nI then wrote a `java_test` as follows:\r\n```\r\njava_test(\r\n    name = &quot;TestMyCommand&quot;,\r\n    size = &quot;small&quot;,\r\n    srcs = [\r\n        &quot;TestMyCommand.java&quot;,\r\n    ],\r\n    deps = [\r\n        &quot;:MyCommand&quot;,\r\n    ],\r\n)\r\n```\r\n\r\nThe test is pretty simple and just does `new MyCommand()`.\r\n\r\nThis unfortunately fails quickly with a `ClassDefNotFoundException` with a class file found in `//src/main/java/com/example/two`. Setting a breakpoint it looks like that library is not included in the ClassPath.\r\n\r\n**HOWEVER**, if I change my `java_test` to depend on a `java_library` **THEN** the transitive dependency of `//src/main/java/com/example/two` is included.\r\n\r\nI could not find anything in the documentation explaining why?","title":"Why doesn&#39;t java_binary propagate runtime dependencies to java_test","body":"<p>I wrote a small application and used <em>java_binary</em> as follows:</p>\n<pre><code>java_binary(\n    name = &quot;MyCommand&quot;,\n    srcs = [\n        &quot;MyCommand.java&quot;,\n    ],\n    visibility = [&quot;//visibility:public&quot;],\n    deps = [\n        &quot;//src/main/java/com/example/two&quot;,\n    ],\n)\n</code></pre>\n<p>It depends on a <code>java_library</code> target //src/main/java/com/example/two</p>\n<p>I then wrote a <code>java_test</code> as follows:</p>\n<pre><code>java_test(\n    name = &quot;TestMyCommand&quot;,\n    size = &quot;small&quot;,\n    srcs = [\n        &quot;TestMyCommand.java&quot;,\n    ],\n    deps = [\n        &quot;:MyCommand&quot;,\n    ],\n)\n</code></pre>\n<p>The test is pretty simple and just does <code>new MyCommand()</code>.</p>\n<p>This unfortunately fails quickly with a <code>ClassDefNotFoundException</code> with a class file found in <code>//src/main/java/com/example/two</code>. Setting a breakpoint it looks like that library is not included in the ClassPath.</p>\n<p><strong>HOWEVER</strong>, if I change my <code>java_test</code> to depend on a <code>java_library</code> <strong>THEN</strong> the transitive dependency of <code>//src/main/java/com/example/two</code> is included.</p>\n<p>I could not find anything in the documentation explaining why?</p>\n"},{"tags":["java","jdbc","synchronization"],"comments":[{"owner":{"account_id":2124262,"reputation":2634,"user_id":1886855,"display_name":"Marco Forberg"},"score":1,"creation_date":1370595857,"post_id":16980142,"comment_id":24527850,"body_markdown":"can you please show how you tried synchonized in your code?","body":"can you please show how you tried synchonized in your code?"},{"owner":{"account_id":2124262,"reputation":2634,"user_id":1886855,"display_name":"Marco Forberg"},"score":1,"creation_date":1370597192,"post_id":16980142,"comment_id":24528495,"body_markdown":"your `lock` is `null`. Though i&#39;m not too familiar with synchronized blocks i think it should be an instance and not `null`","body":"your <code>lock</code> is <code>null</code>. Though i&#39;m not too familiar with synchronized blocks i think it should be an instance and not <code>null</code>"},{"owner":{"account_id":1335764,"reputation":972,"user_id":1278562,"accept_rate":100,"display_name":"yves.beutler"},"score":0,"creation_date":1370597542,"post_id":16980142,"comment_id":24528671,"body_markdown":"That&#39;s my mistake, just a copy&amp;paste error.","body":"That&#39;s my mistake, just a copy&amp;paste error."}],"answers":[{"tags":[],"owner":{"account_id":882029,"reputation":6941,"user_id":272451,"accept_rate":100,"display_name":"Thihara"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1370596251,"creation_date":1370596251,"answer_id":16980378,"question_id":16980142,"body_markdown":"I don&#39;t know how you synchronized the method. But unless the class that contains the method is a singleton it won&#39;t work.\r\n\r\nWell either that&#39;s a singleton or the object you are using for locking the method have to be for this to work.\r\n\r\nIf you simply synchronized the method multiple instances of the class will thwart your intention.\r\n\r\nBut it seems to me that there&#39;s something wrong with your architecture. Are you using some kind of a connection manager?","title":"synchronize of multiple method accesses","body":"<p>I don't know how you synchronized the method. But unless the class that contains the method is a singleton it won't work.</p>\n\n<p>Well either that's a singleton or the object you are using for locking the method have to be for this to work.</p>\n\n<p>If you simply synchronized the method multiple instances of the class will thwart your intention.</p>\n\n<p>But it seems to me that there's something wrong with your architecture. Are you using some kind of a connection manager?</p>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1370596393,"creation_date":1370596393,"answer_id":16980418,"question_id":16980142,"body_markdown":"If you&#39;re using DBCP then simply configure `maxActive` attribute which is 100 by defulat. The threads that are trying to get a Connection above the limit will be blocked.","title":"synchronize of multiple method accesses","body":"<p>If you're using DBCP then simply configure <code>maxActive</code> attribute which is 100 by defulat. The threads that are trying to get a Connection above the limit will be blocked.</p>\n"},{"tags":[],"owner":{"account_id":2740762,"reputation":3924,"user_id":2362356,"display_name":"nakosspy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1370599939,"creation_date":1370599939,"answer_id":16981617,"question_id":16980142,"body_markdown":"Your code is ok if the `lock` object is the same for all requests being processed.\r\n\r\nHow can you figure it out? If you create a new `connect` class  for each request you are processing, then each instance of this class has a different `lock`, and the synchronized block can be executed concurrently by the different instances. \r\n\r\nIf you have only one instance of the `connect` class, then you have only one instance of `lock` and you are sure that no two threads can execute concurrently the synchronized block. \r\n\r\nHowever even if you have only one instance of the `connect` class, it is easy to break the synchronization if a refactoring the code creates more than one instances of this class. If you want to be sure that this code locks for all threads, then you have to declare the lock object as static:\r\n\r\n    static final Object LOCK = new Object();\r\n\r\nNow you are certain that there is only one `LOCK` in the JVM.\r\n\r\nYou also have to keep in mind that if your application runs in a cluster, then java synchronization will not work because you have more than one JVMs running the same application. Have a look at [this question][1] for more details on the subject.\r\n\r\nBTW, try to follow the class naming conventions. Class names should start with a capital, so rename your class to `Connect`.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1228833/sharing-a-java-synchronized-block-across-a-cluster-or-using-a-global-lock","title":"synchronize of multiple method accesses","body":"<p>Your code is ok if the <code>lock</code> object is the same for all requests being processed.</p>\n\n<p>How can you figure it out? If you create a new <code>connect</code> class  for each request you are processing, then each instance of this class has a different <code>lock</code>, and the synchronized block can be executed concurrently by the different instances. </p>\n\n<p>If you have only one instance of the <code>connect</code> class, then you have only one instance of <code>lock</code> and you are sure that no two threads can execute concurrently the synchronized block. </p>\n\n<p>However even if you have only one instance of the <code>connect</code> class, it is easy to break the synchronization if a refactoring the code creates more than one instances of this class. If you want to be sure that this code locks for all threads, then you have to declare the lock object as static:</p>\n\n<pre><code>static final Object LOCK = new Object();\n</code></pre>\n\n<p>Now you are certain that there is only one <code>LOCK</code> in the JVM.</p>\n\n<p>You also have to keep in mind that if your application runs in a cluster, then java synchronization will not work because you have more than one JVMs running the same application. Have a look at <a href=\"https://stackoverflow.com/questions/1228833/sharing-a-java-synchronized-block-across-a-cluster-or-using-a-global-lock\">this question</a> for more details on the subject.</p>\n\n<p>BTW, try to follow the class naming conventions. Class names should start with a capital, so rename your class to <code>Connect</code>.</p>\n"},{"tags":[],"owner":{"account_id":2788077,"reputation":382,"user_id":2398946,"display_name":"nebula"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1372132144,"creation_date":1372131482,"answer_id":17288759,"question_id":16980142,"body_markdown":"why don&#39;t you just use singleton and synchronized the Connection, or synchronized on the methods\r\n\r\n    public class MyConnection {\r\n        \r\n        private Connection mConn;\r\n        \r\n        public static synchronized Connection getConnection() {\r\n        if(mConn == null){\r\n         mConn = createNewConnection();//your create method\r\n        }\r\n        return mConn;\r\n        }\r\n        \r\n    }","title":"synchronize of multiple method accesses","body":"<p>why don't you just use singleton and synchronized the Connection, or synchronized on the methods</p>\n\n<pre><code>public class MyConnection {\n\n    private Connection mConn;\n\n    public static synchronized Connection getConnection() {\n    if(mConn == null){\n     mConn = createNewConnection();//your create method\n    }\n    return mConn;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1335764,"reputation":972,"user_id":1278562,"accept_rate":100,"display_name":"yves.beutler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1372226221,"creation_date":1372226221,"answer_id":17312526,"question_id":16980142,"body_markdown":"There was a wrong query statement in another part of my code. If this query was executed, it did something like `SELECT * FROM TABLE` and this knocked my mysql server out. Now I&#39;ve fixed it and don&#39;t have to limitate the db access. Thanks for your help guys!","title":"synchronize of multiple method accesses","body":"<p>There was a wrong query statement in another part of my code. If this query was executed, it did something like <code>SELECT * FROM TABLE</code> and this knocked my mysql server out. Now I've fixed it and don't have to limitate the db access. Thanks for your help guys!</p>\n"}],"owner":{"account_id":1335764,"reputation":972,"user_id":1278562,"accept_rate":100,"display_name":"yves.beutler"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2332,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":17312526,"answer_count":5,"score":1,"last_activity_date":1659586105,"creation_date":1370595610,"question_id":16980142,"body_markdown":"I need to synchronize a mysql query, so just one user can access the specified part at the same time. I tried `synchronized(){}`, but this doesn&#39;t work. The users can access the method simultaneously. It&#39;s a jsp webapplication using tomcat6. I need this, because the webserver crashes when too many user run the query at the same time.\r\n\r\n    String sql = &quot;SELECT * FROM products;&quot;\r\n    ResultSet rs;\r\n    \r\n    //This block should be synchronized\r\n    Statement s = con.createStatement();\r\n    rs = s.excecuteQuery(sql);\r\n    \r\n    while (rs.next()) {\r\n    // do some stuff..\r\n    }\r\n\r\nThanks for any help.\r\n\r\n\r\n\r\n\r\nEdit: how I tried to synchronize\r\n\r\n    public class connect {\r\n\t\r\n\tpublic static String URL = &quot;url&quot;;\r\n\tpublic static String USER = &quot;root&quot;;\r\n\tpublic static String PASSWORD = &quot;password&quot;;\r\n\tprivate Object lock = new Object();\r\n\t\r\n\tpublic void getData() {\r\n\t\t\r\n\t\tConnection con;\r\n\t\t\r\n\t\ttry {\r\n\t\t\tcon = DriverManager.getConnection(URL, USER, PASSWORD);\r\n\t\t\tString sql = &quot;SELECT * FROM products;&quot;;\r\n\t\t\tResultSet rs;\r\n\t\t\t    \r\n\t\t\t//This block should be synchronized\r\n\t\t\tsynchronized(lock) {\r\n\t\t\t\tStatement s = con.createStatement();\r\n\t\t\t\trs = s.executeQuery(sql);\r\n\t\t\t    \r\n\t\t\t    while (rs.next()) {\r\n\t\t\t    // do some stuff..\r\n\t\t\t    }\r\n\t\t\t}\r\n\t\t} catch (SQLException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n    }\r\n\r\nI think the object `lock` should be stored on the server. But what&#39;s the right way to do this? ","title":"synchronize of multiple method accesses","body":"<p>I need to synchronize a mysql query, so just one user can access the specified part at the same time. I tried <code>synchronized(){}</code>, but this doesn't work. The users can access the method simultaneously. It's a jsp webapplication using tomcat6. I need this, because the webserver crashes when too many user run the query at the same time.</p>\n\n<pre><code>String sql = \"SELECT * FROM products;\"\nResultSet rs;\n\n//This block should be synchronized\nStatement s = con.createStatement();\nrs = s.excecuteQuery(sql);\n\nwhile (rs.next()) {\n// do some stuff..\n}\n</code></pre>\n\n<p>Thanks for any help.</p>\n\n<p>Edit: how I tried to synchronize</p>\n\n<pre><code>public class connect {\n\npublic static String URL = \"url\";\npublic static String USER = \"root\";\npublic static String PASSWORD = \"password\";\nprivate Object lock = new Object();\n\npublic void getData() {\n\n    Connection con;\n\n    try {\n        con = DriverManager.getConnection(URL, USER, PASSWORD);\n        String sql = \"SELECT * FROM products;\";\n        ResultSet rs;\n\n        //This block should be synchronized\n        synchronized(lock) {\n            Statement s = con.createStatement();\n            rs = s.executeQuery(sql);\n\n            while (rs.next()) {\n            // do some stuff..\n            }\n        }\n    } catch (SQLException e) {\n        e.printStackTrace();\n    }\n}\n}\n</code></pre>\n\n<p>I think the object <code>lock</code> should be stored on the server. But what's the right way to do this? </p>\n"},{"tags":["java","log4j"],"answers":[{"tags":[],"owner":{"account_id":367304,"reputation":2388,"user_id":713414,"accept_rate":83,"display_name":"Jayy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1316098983,"creation_date":1316098983,"answer_id":7433049,"question_id":7432740,"body_markdown":"Please see the &lt;&lt;root&gt;root&gt; xml config. You are allowing the log to be directed on all three different files.&lt;br/&gt; \r\n\r\n 1. CONSOLE (system.out)\r\n 2. FILE(in this case server.log) and\r\n 3. MYTESTAPPENDER(mytest.log)\r\n\r\nTo your requirement you need to define like this.\r\n\r\n    &lt;root&gt;\r\n    &lt;priority value=&quot;info&quot;/&gt;       \r\n    &lt;!--&lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;--&gt;       \r\n    &lt;!--&lt;appender-ref ref=&quot;FILE&quot;/&gt;--&gt;       \r\n    &lt;appender-ref ref=&quot;MYTESTAPPENDER&quot;/&gt;    \r\n    &lt;/root&gt; ","title":"log4j log only messages from specific class in file","body":"<p>Please see the &lt;root> xml config. You are allowing the log to be directed on all three different files.<br/> </p>\n\n<ol>\n<li>CONSOLE (system.out)</li>\n<li>FILE(in this case server.log) and</li>\n<li>MYTESTAPPENDER(mytest.log)</li>\n</ol>\n\n<p>To your requirement you need to define like this.</p>\n\n<pre><code>&lt;root&gt;\n&lt;priority value=\"info\"/&gt;       \n&lt;!--&lt;appender-ref ref=\"CONSOLE\"/&gt;--&gt;       \n&lt;!--&lt;appender-ref ref=\"FILE\"/&gt;--&gt;       \n&lt;appender-ref ref=\"MYTESTAPPENDER\"/&gt;    \n&lt;/root&gt; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":81424,"reputation":2020,"user_id":229609,"accept_rate":38,"display_name":"Mohd Farid"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1316099025,"creation_date":1316099025,"answer_id":7433060,"question_id":7432740,"body_markdown":"EDIT:\r\nIt seems you have updated the question since I last posted... So my following suggestion has already been taken care of by you.\r\n\r\n\r\nThe testsplitlogger must contain the appender reference as well.\r\n\r\n    &lt;logger name=&quot;testsplitlogger&quot; additivity=&quot;false&quot;&gt;\r\n       &lt;level value=&quot;info&quot; /&gt;\r\n       &lt;appender-ref ref=&quot;MYTESTAPPENDER&quot; /&gt;\r\n    &lt;/logger&gt;\r\n\r\nHere is a good link you can refer to [http://wiki.apache.org/logging-log4j/Log4jXmlFormat][1]\r\n\r\n\r\n  [1]: http://wiki.apache.org/logging-log4j/Log4jXmlFormat","title":"log4j log only messages from specific class in file","body":"<p>EDIT:\nIt seems you have updated the question since I last posted... So my following suggestion has already been taken care of by you.</p>\n\n<p>The testsplitlogger must contain the appender reference as well.</p>\n\n<pre><code>&lt;logger name=\"testsplitlogger\" additivity=\"false\"&gt;\n   &lt;level value=\"info\" /&gt;\n   &lt;appender-ref ref=\"MYTESTAPPENDER\" /&gt;\n&lt;/logger&gt;\n</code></pre>\n\n<p>Here is a good link you can refer to <a href=\"http://wiki.apache.org/logging-log4j/Log4jXmlFormat\" rel=\"nofollow\">http://wiki.apache.org/logging-log4j/Log4jXmlFormat</a></p>\n"},{"tags":[],"owner":{"account_id":1235468,"reputation":31121,"user_id":1199132,"accept_rate":83,"display_name":"Aritz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1372246338,"creation_date":1372246338,"answer_id":17318853,"question_id":7432740,"body_markdown":"You need to create a [Category][1] for that:\r\n\r\n    &lt;category name=&quot;my.company.package&quot; additivity=&quot;false&quot;&gt;\r\n    \t&lt;priority value=&quot;info&quot; /&gt;\r\n    \t&lt;appender-ref ref=&quot;MYTESTAPPENDER&quot; /&gt;\r\n    &lt;/category&gt;\r\n\r\n\r\n  [1]: http://veerasundar.com/blog/2009/08/log4j-tutorial-how-to-send-log-messages-to-different-log-files/","title":"log4j log only messages from specific class in file","body":"<p>You need to create a <a href=\"http://veerasundar.com/blog/2009/08/log4j-tutorial-how-to-send-log-messages-to-different-log-files/\" rel=\"nofollow\">Category</a> for that:</p>\n\n<pre><code>&lt;category name=\"my.company.package\" additivity=\"false\"&gt;\n    &lt;priority value=\"info\" /&gt;\n    &lt;appender-ref ref=\"MYTESTAPPENDER\" /&gt;\n&lt;/category&gt;\n</code></pre>\n"}],"owner":{"account_id":364824,"reputation":824,"user_id":709416,"accept_rate":50,"display_name":"Karthik "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11047,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1659585750,"creation_date":1316097739,"question_id":7432740,"body_markdown":"In a external file I would like to log the output of my com.foo.test class to a specific file but whats happening is its appending the console log as well as file log. Below is my xml configuration,\r\n\r\n    &lt;appender name=&quot;FILE&quot; class=&quot;org.jboss.logging.appender.DailyRollingFileAppender&quot;&gt;\r\n          &lt;errorHandler class=&quot;org.jboss.logging.util.OnlyOnceErrorHandler&quot;/&gt;\r\n          &lt;param name=&quot;File&quot; value=&quot;${jboss.server.log.dir}/server.log&quot;/&gt;\r\n          &lt;param name=&quot;Append&quot; value=&quot;false&quot;/&gt;\r\n    &lt;param name=&quot;DatePattern&quot; value=&quot;&#39;.&#39;yyyy-MM-dd&quot;/&gt;\r\n     &lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;\r\n    &lt;/layout&gt;\r\n    &lt;/appender&gt;\r\n    \r\n    &lt;appender name=&quot;CONSOLE&quot; class=&quot;org.apache.log4j.ConsoleAppender&quot;&gt;\r\n          &lt;errorHandler class=&quot;org.jboss.logging.util.OnlyOnceErrorHandler&quot;/&gt;\r\n          &lt;param name=&quot;Target&quot; value=&quot;System.out&quot;/&gt;\r\n          &lt;param name=&quot;Threshold&quot; value=&quot;INFO&quot;/&gt;\r\n    \r\n          &lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;\r\n            &lt;param name=&quot;ConversionPattern&quot; value=&quot;%d{ABSOLUTE} %-5p [%c{1}] %m%n&quot;/&gt;\r\n          &lt;/layout&gt;\r\n       &lt;/appender&gt;\r\n    &lt;appender name=&quot;MYTESTAPPENDER&quot; class=&quot;org.jboss.logging.appender.RollingFileAppender&quot;&gt;\r\n            &lt;errorHandler class=&quot;org.jboss.logging.util.OnlyOnceErrorHandler&quot;/&gt;\r\n            &lt;param name=&quot;File&quot; value=&quot;${jboss.server.home.dir}/log/mytest.log&quot;/&gt;\r\n            &lt;param name=&quot;Append&quot; value=&quot;false&quot;/&gt;\r\n            &lt;param name=&quot;MaxFileSize&quot; value=&quot;3MB&quot;/&gt;\r\n            &lt;param name=&quot;MaxBackupIndex&quot; value=&quot;3&quot;/&gt;\r\n            &lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;\r\n                &lt;param name=&quot;ConversionPattern&quot; value=&quot;%d %-5p [%c] %m%n&quot;/&gt;\r\n            &lt;/layout&gt;\r\n        &lt;/appender&gt;\r\n     &lt;logger name=&quot;testsplitlogger&quot; additivity=&quot;false&quot;&gt;\r\n    &lt;level value=&quot;info&quot;/&gt;\r\n     &lt;appender-ref ref=&quot;MYTESTAPPENDER&quot;/&gt;\r\n     &lt;/logger&gt;\r\n     &lt;root&gt;\r\n          &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;\r\n          &lt;appender-ref ref=&quot;FILE&quot;/&gt;\r\n          &lt;appender-ref ref=&quot;MYTESTAPPENDER&quot;/&gt;\r\n       &lt;/root&gt;\r\n\r\nAnd My Java code is,\r\n\r\n    private static final Logger logger = Logger.getLogger(&quot;testsplitlogger&quot;);\r\n\r\n**Update:**\r\nThe problem is its logging all the console output and other appenders output to mytest.log file instead I want to append only the info messages from my testsplitlogger for specific class and other logs from console and file should be written to server.log.\r\n\r\nAm I doing anything wrong?","title":"log4j log only messages from specific class in file","body":"<p>In a external file I would like to log the output of my com.foo.test class to a specific file but whats happening is its appending the console log as well as file log. Below is my xml configuration,</p>\n\n<pre><code>&lt;appender name=\"FILE\" class=\"org.jboss.logging.appender.DailyRollingFileAppender\"&gt;\n      &lt;errorHandler class=\"org.jboss.logging.util.OnlyOnceErrorHandler\"/&gt;\n      &lt;param name=\"File\" value=\"${jboss.server.log.dir}/server.log\"/&gt;\n      &lt;param name=\"Append\" value=\"false\"/&gt;\n&lt;param name=\"DatePattern\" value=\"'.'yyyy-MM-dd\"/&gt;\n &lt;layout class=\"org.apache.log4j.PatternLayout\"&gt;\n&lt;/layout&gt;\n&lt;/appender&gt;\n\n&lt;appender name=\"CONSOLE\" class=\"org.apache.log4j.ConsoleAppender\"&gt;\n      &lt;errorHandler class=\"org.jboss.logging.util.OnlyOnceErrorHandler\"/&gt;\n      &lt;param name=\"Target\" value=\"System.out\"/&gt;\n      &lt;param name=\"Threshold\" value=\"INFO\"/&gt;\n\n      &lt;layout class=\"org.apache.log4j.PatternLayout\"&gt;\n        &lt;param name=\"ConversionPattern\" value=\"%d{ABSOLUTE} %-5p [%c{1}] %m%n\"/&gt;\n      &lt;/layout&gt;\n   &lt;/appender&gt;\n&lt;appender name=\"MYTESTAPPENDER\" class=\"org.jboss.logging.appender.RollingFileAppender\"&gt;\n        &lt;errorHandler class=\"org.jboss.logging.util.OnlyOnceErrorHandler\"/&gt;\n        &lt;param name=\"File\" value=\"${jboss.server.home.dir}/log/mytest.log\"/&gt;\n        &lt;param name=\"Append\" value=\"false\"/&gt;\n        &lt;param name=\"MaxFileSize\" value=\"3MB\"/&gt;\n        &lt;param name=\"MaxBackupIndex\" value=\"3\"/&gt;\n        &lt;layout class=\"org.apache.log4j.PatternLayout\"&gt;\n            &lt;param name=\"ConversionPattern\" value=\"%d %-5p [%c] %m%n\"/&gt;\n        &lt;/layout&gt;\n    &lt;/appender&gt;\n &lt;logger name=\"testsplitlogger\" additivity=\"false\"&gt;\n&lt;level value=\"info\"/&gt;\n &lt;appender-ref ref=\"MYTESTAPPENDER\"/&gt;\n &lt;/logger&gt;\n &lt;root&gt;\n      &lt;appender-ref ref=\"CONSOLE\"/&gt;\n      &lt;appender-ref ref=\"FILE\"/&gt;\n      &lt;appender-ref ref=\"MYTESTAPPENDER\"/&gt;\n   &lt;/root&gt;\n</code></pre>\n\n<p>And My Java code is,</p>\n\n<pre><code>private static final Logger logger = Logger.getLogger(\"testsplitlogger\");\n</code></pre>\n\n<p><strong>Update:</strong>\nThe problem is its logging all the console output and other appenders output to mytest.log file instead I want to append only the info messages from my testsplitlogger for specific class and other logs from console and file should be written to server.log.</p>\n\n<p>Am I doing anything wrong?</p>\n"},{"tags":["java","linked-list"],"comments":[{"owner":{"account_id":199463,"reputation":1458,"user_id":444810,"accept_rate":100,"display_name":"therin"},"score":1,"creation_date":1299607907,"post_id":5236486,"comment_id":5893645,"body_markdown":"Why do you need to pass in Node header to append something to the end of the list?","body":"Why do you need to pass in Node header to append something to the end of the list?"},{"owner":{"account_id":240726,"reputation":2094,"user_id":511125,"accept_rate":100,"display_name":"Deepak"},"score":0,"creation_date":1299607958,"post_id":5236486,"comment_id":5893654,"body_markdown":"write your own implementation for `addLast(Node header, Object x) that adds x at the end of the list` google for adding element at end of singly linkedlist in java","body":"write your own implementation for <code>addLast(Node header, Object x) that adds x at the end of the list</code> google for adding element at end of singly linkedlist in java"},{"owner":{"account_id":56319,"reputation":32862,"user_id":168703,"accept_rate":89,"display_name":"JonH"},"score":1,"creation_date":1299608176,"post_id":5236486,"comment_id":5893712,"body_markdown":"@therin - probably ask his professor that.","body":"@therin - probably ask his professor that."},{"owner":{"account_id":326759,"reputation":181,"user_id":648709,"accept_rate":75,"display_name":"John"},"score":0,"creation_date":1299608215,"post_id":5236486,"comment_id":5893722,"body_markdown":"@therin, this is the exact question, idk.","body":"@therin, this is the exact question, idk."},{"owner":{"account_id":199463,"reputation":1458,"user_id":444810,"accept_rate":100,"display_name":"therin"},"score":0,"creation_date":1299608524,"post_id":5236486,"comment_id":5893800,"body_markdown":"Try just adding the method to the Node class as a static method, and looping to the end of the Node header, then adding a new node to the end of that list.","body":"Try just adding the method to the Node class as a static method, and looping to the end of the Node header, then adding a new node to the end of that list."}],"answers":[{"tags":[],"owner":{"account_id":212025,"reputation":564,"user_id":464589,"accept_rate":70,"display_name":"Ahmed Elmorsy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1299608015,"creation_date":1299608015,"answer_id":5236531,"question_id":5236486,"body_markdown":"loop to the last element of the linked list which have next pointer to null then modify the next pointer to point to a new node which has the data=object and next pointer = null","title":"Adding items to end of linked list","body":"<p>loop to the last element of the linked list which have next pointer to null then modify the next pointer to point to a new node which has the data=object and next pointer = null</p>\n"},{"tags":[],"owner":{"account_id":327744,"reputation":575,"user_id":650299,"accept_rate":100,"display_name":"Benjamin S"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1299608087,"creation_date":1299608087,"answer_id":5236544,"question_id":5236486,"body_markdown":"You want to navigate through the entire linked list using a loop and checking the &quot;next&quot; value for each node. The last node will be the one whose next value is null. Simply make this node&#39;s next value a new node which you create with the input data.\r\n\r\n    node temp = first; // starts with the first node.\r\n    \r\n        while (temp.next != null)\r\n        {\r\n           temp = temp.next;\r\n        }\r\n    \r\n    temp.next = new Node(header, x);\r\n\r\nThat&#39;s the basic idea. This is of course, pseudo code, but it should be simple enough to implement.\r\n","title":"Adding items to end of linked list","body":"<p>You want to navigate through the entire linked list using a loop and checking the \"next\" value for each node. The last node will be the one whose next value is null. Simply make this node's next value a new node which you create with the input data.</p>\n\n<pre><code>node temp = first; // starts with the first node.\n\n    while (temp.next != null)\n    {\n       temp = temp.next;\n    }\n\ntemp.next = new Node(header, x);\n</code></pre>\n\n<p>That's the basic idea. This is of course, pseudo code, but it should be simple enough to implement.</p>\n"},{"tags":[],"owner":{"account_id":34561,"reputation":8464,"user_id":97745,"accept_rate":86,"display_name":"crowne"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1299608202,"creation_date":1299608202,"answer_id":5236559,"question_id":5236486,"body_markdown":"Here&#39;s a hint, you have a graph of nodes in the linked list, and you always keep a reference to head which is the first node in the linkedList.  \r\nnext points to the next node in the linkedlist, so when next is null you are at the end of the list.","title":"Adding items to end of linked list","body":"<p>Here's a hint, you have a graph of nodes in the linked list, and you always keep a reference to head which is the first node in the linkedList.<br>\nnext points to the next node in the linkedlist, so when next is null you are at the end of the list.</p>\n"},{"tags":[],"owner":{"account_id":199463,"reputation":1458,"user_id":444810,"accept_rate":100,"display_name":"therin"},"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1299608967,"creation_date":1299608967,"answer_id":5236710,"question_id":5236486,"body_markdown":"    class Node {\r\n        Object data;\r\n        Node next;\r\n        Node(Object d,Node n) {\r\n            data = d ;\r\n            next = n ;\r\n           }\r\n\r\n       public static Node addLast(Node header, Object x) {\r\n           // save the reference to the header so we can return it.\r\n           Node ret = header;\r\n\r\n           // check base case, header is null.\r\n           if (header == null) {\r\n               return new Node(x, null);\r\n           }\r\n\r\n           // loop until we find the end of the list\r\n           while ((header.next != null)) {\r\n               header = header.next;\r\n           }\r\n\r\n           // set the new node to the Object x, next will be null.\r\n           header.next = new Node(x, null);\r\n           return ret;\r\n       }\r\n    }","title":"Adding items to end of linked list","body":"<pre><code>class Node {\n    Object data;\n    Node next;\n    Node(Object d,Node n) {\n        data = d ;\n        next = n ;\n       }\n\n   public static Node addLast(Node header, Object x) {\n       // save the reference to the header so we can return it.\n       Node ret = header;\n\n       // check base case, header is null.\n       if (header == null) {\n           return new Node(x, null);\n       }\n\n       // loop until we find the end of the list\n       while ((header.next != null)) {\n           header = header.next;\n       }\n\n       // set the new node to the Object x, next will be null.\n       header.next = new Node(x, null);\n       return ret;\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":200676,"reputation":508,"user_id":922569,"accept_rate":91,"display_name":"Literati Insolitus"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1322548226,"creation_date":1322548226,"answer_id":8306803,"question_id":5236486,"body_markdown":"Here is a partial solution to your linked list class, I have left the rest of the implementation to you, and also left the good suggestion to add a tail node as part of the linked list to you as well.\r\n\r\n\r\nThe node file :\r\n\r\n    public class Node \r\n    {\r\n        private Object data; \r\n        private Node next; \r\n\r\n        public Node(Object d) \r\n        { \r\n            data = d ;\r\n            next = null;\r\n        }\r\n\r\n        public Object GetItem()\r\n        {\r\n            return data;\r\n        }\r\n\r\n        public Node GetNext()\r\n        {\r\n            return next;\r\n        }\r\n\r\n        public void SetNext(Node toAppend)\r\n        {\r\n            next = toAppend;\r\n        }\r\n    }\r\n\r\n\r\nAnd here is a Linked List file :\r\n\r\n    public class LL\r\n    {\r\n        private Node head;\r\n\r\n        public LL()\r\n        {\r\n            head = null;\r\n        }\r\n\r\n        public void AddToEnd(String x)\r\n        {\r\n            Node current = head;\r\n\r\n            // as you mentioned, this is the base case\r\n            if(current == null) {\r\n                head = new Node(x);\r\n                head.SetNext(null);\r\n            }\r\n\r\n            // you should understand this part thoroughly :\r\n            // this is the code that traverses the list.\r\n            // the germane thing to see is that when the \r\n            // link to the next node is null, we are at the \r\n            // end of the list.\r\n            else {\r\n                while(current.GetNext() != null)\r\n                    current = current.GetNext();\r\n\r\n                // add new node at the end\r\n\t        Node toAppend = new Node(x);\r\n                current.SetNext(toAppend);\r\n            }\r\n        }\r\n    }\r\n","title":"Adding items to end of linked list","body":"<p>Here is a partial solution to your linked list class, I have left the rest of the implementation to you, and also left the good suggestion to add a tail node as part of the linked list to you as well.</p>\n\n<p>The node file :</p>\n\n<pre><code>public class Node \n{\n    private Object data; \n    private Node next; \n\n    public Node(Object d) \n    { \n        data = d ;\n        next = null;\n    }\n\n    public Object GetItem()\n    {\n        return data;\n    }\n\n    public Node GetNext()\n    {\n        return next;\n    }\n\n    public void SetNext(Node toAppend)\n    {\n        next = toAppend;\n    }\n}\n</code></pre>\n\n<p>And here is a Linked List file :</p>\n\n<pre><code>public class LL\n{\n    private Node head;\n\n    public LL()\n    {\n        head = null;\n    }\n\n    public void AddToEnd(String x)\n    {\n        Node current = head;\n\n        // as you mentioned, this is the base case\n        if(current == null) {\n            head = new Node(x);\n            head.SetNext(null);\n        }\n\n        // you should understand this part thoroughly :\n        // this is the code that traverses the list.\n        // the germane thing to see is that when the \n        // link to the next node is null, we are at the \n        // end of the list.\n        else {\n            while(current.GetNext() != null)\n                current = current.GetNext();\n\n            // add new node at the end\n        Node toAppend = new Node(x);\n            current.SetNext(toAppend);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10034985,"reputation":61,"user_id":7420004,"display_name":"user7420004"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1501643450,"creation_date":1495691200,"answer_id":44173160,"question_id":5236486,"body_markdown":"The above programs might give you NullPointerException. This is an easier way to add an element to the end of linkedList.\r\n\r\n\r\n    public class LinkedList {\r\n    \tNode head;\r\n    \t\r\n    \tpublic static class Node{\r\n    \t\tint data;\r\n    \t\tNode next;\r\n    \t\t\r\n    \t\tNode(int item){\r\n    \t\t\tdata = item;\r\n    \t\t\tnext = null;\r\n    \t\t}\r\n    \t}\r\n    \tpublic static void main(String args[]){\r\n    \t\tLinkedList ll = new LinkedList();\r\n    \t\tll.head = new Node(1);\r\n    \t\tNode second = new Node(2);\r\n    \t\tNode third = new Node(3);\r\n    \t\tNode fourth = new Node(4);\r\n    \t\t\r\n    \t\tll.head.next = second;\r\n    \t\tsecond.next = third;\r\n    \t\tthird.next = fourth;\r\n    \t\tfourth.next = null;\r\n    \t\t\r\n    \t\tll.printList();\r\n    \t\tSystem.out.println(&quot;Add element 100 to the last&quot;);\r\n    \t\tll.addLast(100);\r\n    \t\tll.printList();\r\n    \t}\r\n    \tpublic void printList(){\r\n    \t\tNode t = head;\r\n    \t\twhile(n != null){\r\n    \t\t\tSystem.out.println(t.data);\r\n    \t\t\tt = t.next;\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \tpublic void addLast(int item){\r\n    \t\tNode new_item = new Node(item);\r\n    \t\tif(head == null){\r\n    \t\t\thead = new_item;\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \t\tnew_item.next = null;\r\n    \t\t\r\n    \t\tNode last = head;\r\n    \t\tNode temp = null;\r\n    \t\twhile(last != null){\r\n    \t\t\tif(last != null)\r\n    \t\t\t\ttemp = last;\r\n    \t\t\tlast = last.next;\r\n    \t\t}\t\r\n    \t\t\r\n    \t\ttemp.next = new_item;\t\r\n    \t\treturn;\r\n    \t}\r\n    }\r\n\r\n","title":"Adding items to end of linked list","body":"<p>The above programs might give you NullPointerException. This is an easier way to add an element to the end of linkedList.</p>\n\n<pre><code>public class LinkedList {\n    Node head;\n\n    public static class Node{\n        int data;\n        Node next;\n\n        Node(int item){\n            data = item;\n            next = null;\n        }\n    }\n    public static void main(String args[]){\n        LinkedList ll = new LinkedList();\n        ll.head = new Node(1);\n        Node second = new Node(2);\n        Node third = new Node(3);\n        Node fourth = new Node(4);\n\n        ll.head.next = second;\n        second.next = third;\n        third.next = fourth;\n        fourth.next = null;\n\n        ll.printList();\n        System.out.println(\"Add element 100 to the last\");\n        ll.addLast(100);\n        ll.printList();\n    }\n    public void printList(){\n        Node t = head;\n        while(n != null){\n            System.out.println(t.data);\n            t = t.next;\n        }\n\n    }\n\n    public void addLast(int item){\n        Node new_item = new Node(item);\n        if(head == null){\n            head = new_item;\n            return;\n        }\n        new_item.next = null;\n\n        Node last = head;\n        Node temp = null;\n        while(last != null){\n            if(last != null)\n                temp = last;\n            last = last.next;\n        }   \n\n        temp.next = new_item;   \n        return;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2776309,"reputation":30,"user_id":2389834,"display_name":"Abhishek Panda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1499423298,"creation_date":1499423298,"answer_id":44968521,"question_id":5236486,"body_markdown":"The addLast() needs some optimisation as the while loop inside addLast() has O(n) complexity. Below is my implementation of LinkedList. Run the code with ll.addLastx(i) once and run it with ll.addLast(i) again , you can see their is a lot of difference in processing time of addLastx() with addLast().  \r\n\r\nNode.java\r\n\r\n    package in.datastructure.java.LinkedList;\r\n\r\n    /**\r\n    * Created by abhishek.panda on 07/07/17.\r\n    */\r\n    public final class Node {\r\n        int data;\r\n        Node next;\r\n\r\n        Node (int data){\r\n           this.data = data;\r\n        }\r\n        public String toString(){\r\n          return this.data+&quot;--&quot;+ this.next;\r\n        }\r\n    }\r\n\r\nLinkedList.java\r\n\r\n    package in.datastructure.java.LinkedList;\r\n    import java.util.ArrayList;\r\n    import java.util.Date;\r\n    \r\n    public class LinkedList {\r\n    \r\n        Node head;\r\n        Node lastx;\r\n        /**\r\n         * @description To append node at end looping all nodes from head\r\n         * @param data\r\n         */\r\n        public void addLast(int data){\r\n    \r\n            if(head == null){\r\n                head = new Node(data);\r\n                return;\r\n            }\r\n            Node last = head;\r\n            while(last.next != null) {\r\n                last = last.next;\r\n            }\r\n            last.next = new Node(data);\r\n        }\r\n    \r\n    \r\n        /**\r\n         * @description This keep track on last node and append to it\r\n         * @param data\r\n         */\r\n        public void addLastx(int data){\r\n    \r\n            if(head == null){\r\n                head = new Node(data);\r\n                lastx = head;\r\n                return;\r\n            }\r\n            if(lastx.next == null){\r\n                lastx.next = new Node(data);\r\n                lastx = lastx.next;\r\n            }\r\n    \r\n        }\r\n    \r\n        public String toString(){\r\n            ArrayList&lt;Integer&gt; arrayList = new ArrayList&lt;Integer&gt;(10);\r\n            Node current = head;\r\n            while(current.next != null) {\r\n                arrayList.add(current.data);\r\n                current = current.next;\r\n            }\r\n            if(current.next == null) {\r\n                arrayList.add(current.data);\r\n            }\r\n            return arrayList.toString();\r\n        }\r\n    \r\n    \r\n        public static void main(String[] args) {\r\n            LinkedList ll = new LinkedList();\r\n            /**\r\n             * @description Checking the code optimization of append code\r\n             */\r\n            Date startTime = new Date();\r\n            for (int i = 0 ; i &lt; 100000 ; i++){\r\n                ll.addLastx(i);\r\n            }\r\n            Date endTime = new Date();\r\n            System.out.println(&quot;To total processing time : &quot; + (endTime.getTime()-startTime.getTime()));\r\n            System.out.println(ll.toString());\r\n        }\r\n    \r\n    }\r\n\r\n    \r\n","title":"Adding items to end of linked list","body":"<p>The addLast() needs some optimisation as the while loop inside addLast() has O(n) complexity. Below is my implementation of LinkedList. Run the code with ll.addLastx(i) once and run it with ll.addLast(i) again , you can see their is a lot of difference in processing time of addLastx() with addLast().  </p>\n\n<p>Node.java</p>\n\n<pre><code>package in.datastructure.java.LinkedList;\n\n/**\n* Created by abhishek.panda on 07/07/17.\n*/\npublic final class Node {\n    int data;\n    Node next;\n\n    Node (int data){\n       this.data = data;\n    }\n    public String toString(){\n      return this.data+\"--\"+ this.next;\n    }\n}\n</code></pre>\n\n<p>LinkedList.java</p>\n\n<pre><code>package in.datastructure.java.LinkedList;\nimport java.util.ArrayList;\nimport java.util.Date;\n\npublic class LinkedList {\n\n    Node head;\n    Node lastx;\n    /**\n     * @description To append node at end looping all nodes from head\n     * @param data\n     */\n    public void addLast(int data){\n\n        if(head == null){\n            head = new Node(data);\n            return;\n        }\n        Node last = head;\n        while(last.next != null) {\n            last = last.next;\n        }\n        last.next = new Node(data);\n    }\n\n\n    /**\n     * @description This keep track on last node and append to it\n     * @param data\n     */\n    public void addLastx(int data){\n\n        if(head == null){\n            head = new Node(data);\n            lastx = head;\n            return;\n        }\n        if(lastx.next == null){\n            lastx.next = new Node(data);\n            lastx = lastx.next;\n        }\n\n    }\n\n    public String toString(){\n        ArrayList&lt;Integer&gt; arrayList = new ArrayList&lt;Integer&gt;(10);\n        Node current = head;\n        while(current.next != null) {\n            arrayList.add(current.data);\n            current = current.next;\n        }\n        if(current.next == null) {\n            arrayList.add(current.data);\n        }\n        return arrayList.toString();\n    }\n\n\n    public static void main(String[] args) {\n        LinkedList ll = new LinkedList();\n        /**\n         * @description Checking the code optimization of append code\n         */\n        Date startTime = new Date();\n        for (int i = 0 ; i &lt; 100000 ; i++){\n            ll.addLastx(i);\n        }\n        Date endTime = new Date();\n        System.out.println(\"To total processing time : \" + (endTime.getTime()-startTime.getTime()));\n        System.out.println(ll.toString());\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3668894,"reputation":1010,"user_id":3056525,"display_name":"TomDane"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1659584962,"creation_date":1533074437,"answer_id":51622716,"question_id":5236486,"body_markdown":"If you keep track of the tail node, you don&#39;t need to loop through every element in the list.\r\n\r\nJust update the tail to point to the new node:\r\n\r\n    AddValueToListEnd(value) {\r\n        var node = new Node(value);\r\n\r\n        if(!this.head) { //if the list is empty, set head and tail to this first node\r\n            this.head = node;\r\n            this.tail = node;\r\n        } else {\r\n            this.tail.next = node; //point old tail to new node\r\n        }\r\n            \r\n        this.tail = node; //now set the new node as the new tail\r\n    }\r\n\r\n In plain English: \r\n\r\n- Create a new node with the given value\r\n- If the list is empty, point head and tail to the new node\r\n- If the list is not empty, set the old tail.next to be the new node\r\n- In either case, update the tail pointer to be the new node","title":"Adding items to end of linked list","body":"<p>If you keep track of the tail node, you don't need to loop through every element in the list.</p>\n<p>Just update the tail to point to the new node:</p>\n<pre><code>AddValueToListEnd(value) {\n    var node = new Node(value);\n\n    if(!this.head) { //if the list is empty, set head and tail to this first node\n        this.head = node;\n        this.tail = node;\n    } else {\n        this.tail.next = node; //point old tail to new node\n    }\n        \n    this.tail = node; //now set the new node as the new tail\n}\n</code></pre>\n<p>In plain English:</p>\n<ul>\n<li>Create a new node with the given value</li>\n<li>If the list is empty, point head and tail to the new node</li>\n<li>If the list is not empty, set the old tail.next to be the new node</li>\n<li>In either case, update the tail pointer to be the new node</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":15781647,"reputation":1729,"user_id":11387839,"display_name":"Ashutosh Mishra"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1578096732,"creation_date":1578096732,"answer_id":59586798,"question_id":5236486,"body_markdown":"    public static Node insertNodeAtTail(Node head,Object data) {\r\n                   Node node = new Node(data);\r\n                     node.next = null;\r\n                    if (head == null){\r\n                        return node;\r\n                    }\r\n                    else{\r\n                        Node temp = head;\r\n                        while(temp.next != null){\r\n                            temp = temp.next;\r\n                        }\r\n                        temp.next = node; \r\n                        return head;\r\n                    }        \r\n        }","title":"Adding items to end of linked list","body":"<pre><code>public static Node insertNodeAtTail(Node head,Object data) {\n               Node node = new Node(data);\n                 node.next = null;\n                if (head == null){\n                    return node;\n                }\n                else{\n                    Node temp = head;\n                    while(temp.next != null){\n                        temp = temp.next;\n                    }\n                    temp.next = node; \n                    return head;\n                }        \n    }\n</code></pre>\n"}],"owner":{"account_id":326759,"reputation":181,"user_id":648709,"accept_rate":75,"display_name":"John"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":157876,"favorite_count":0,"down_vote_count":1,"up_vote_count":10,"accepted_answer_id":5236710,"answer_count":9,"score":9,"last_activity_date":1659584962,"creation_date":1299607765,"question_id":5236486,"body_markdown":"I&#39;m studying for an exam, and this is a problem from an old test:\r\n\r\nWe have a singly linked list with a list head with the following declaration:\r\n\r\n    class Node {\r\n        Object data;\r\n        Node next;\r\n        Node(Object d,Node n) {\r\n            data = d;\r\n            next = n;\r\n        }\r\n    }\r\n\r\nWrite a method `void addLast(Node header, Object x)` that adds `x` at the end of the list. \r\n\r\nI know that if I actually had something like:\r\n\r\n    LinkedList someList = new LinkedList();\r\n\r\nI could just add items to the end by doing:\r\n\r\n    list.addLast(x);\r\n\r\nBut how can I do it here?","title":"Adding items to end of linked list","body":"<p>I'm studying for an exam, and this is a problem from an old test:</p>\n\n<p>We have a singly linked list with a list head with the following declaration:</p>\n\n<pre><code>class Node {\n    Object data;\n    Node next;\n    Node(Object d,Node n) {\n        data = d;\n        next = n;\n    }\n}\n</code></pre>\n\n<p>Write a method <code>void addLast(Node header, Object x)</code> that adds <code>x</code> at the end of the list. </p>\n\n<p>I know that if I actually had something like:</p>\n\n<pre><code>LinkedList someList = new LinkedList();\n</code></pre>\n\n<p>I could just add items to the end by doing:</p>\n\n<pre><code>list.addLast(x);\n</code></pre>\n\n<p>But how can I do it here?</p>\n"},{"tags":["java","file","filereader"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1659547047,"post_id":73225127,"comment_id":129322078,"body_markdown":"As I understand it, every six lines in file `Equipment.txt` defines a piece of equipment. Are you asking how to create an instance of a relevant subclass of `Equipment` after reading the lines in the file that define it? By the way, I would argue that `equipmentName` should be in class `Equipment` rather than repeated in both class `Drill` and class `Saw`.","body":"As I understand it, every six lines in file <code>Equipment.txt</code> defines a piece of equipment. Are you asking how to create an instance of a relevant subclass of <code>Equipment</code> after reading the lines in the file that define it? By the way, I would argue that <code>equipmentName</code> should be in class <code>Equipment</code> rather than repeated in both class <code>Drill</code> and class <code>Saw</code>."},{"owner":{"account_id":25291319,"reputation":21,"user_id":19117343,"display_name":"Jonathan S."},"score":0,"creation_date":1659550833,"post_id":73225127,"comment_id":129323435,"body_markdown":"I&#39;m not fully understanding how to define the question to be honest. As in my task description, it says :&quot;Create a class that is responsible for being able to read equipment information from a file. When reading from file it should create objects that represent the saws and drills. The class must include a public method\nwhich can return the objects read from file. You have to find out for yourself which classes you have to make in order to be able to\nrepresent the saws and drills. It is expected that you use inheritance.&quot;I would assume the inheritance is by creating subclasses from equipment","body":"I&#39;m not fully understanding how to define the question to be honest. As in my task description, it says :&quot;Create a class that is responsible for being able to read equipment information from a file. When reading from file it should create objects that represent the saws and drills. The class must include a public method which can return the objects read from file. You have to find out for yourself which classes you have to make in order to be able to represent the saws and drills. It is expected that you use inheritance.&quot;I would assume the inheritance is by creating subclasses from equipment"}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1659584287,"creation_date":1659578970,"answer_id":73229634,"question_id":73225127,"body_markdown":"First the code.  \r\n(Explanations after.)\r\n```java\r\npublic abstract class Equipment {\r\n    private Integer id;\r\n    private String locker;\r\n    private Integer year;\r\n    private String equipmentName;\r\n\r\n    public Equipment(Integer id, String locker, Integer year, String name) {\r\n        this.id = id;\r\n        this.locker = locker;\r\n        this.year = year;\r\n        equipmentName = name;\r\n    }\r\n\r\n    public String toString() {\r\n        return String.format(&quot;%s %s %s %s&quot;, equipmentName, id, locker, year);\r\n    }\r\n}\r\n```\r\n------------------\r\n```java\r\npublic class Drill extends Equipment {\r\n    private Boolean batteryPowered;\r\n    private Boolean needsNewBit;\r\n\r\n    public Drill(String equipmentName, Integer id, String locker, Integer year,  Boolean batteryPowered, Boolean needsNewBit) {\r\n        super(id, locker, year, equipmentName);\r\n        this.batteryPowered = batteryPowered;\r\n        this.needsNewBit = needsNewBit;\r\n    }\r\n\r\n    public String toString() {\r\n        return String.format(&quot;%s %s %s&quot;, super.toString(), batteryPowered, needsNewBit);\r\n    }\r\n}\r\n```\r\n--------------------\r\n```java\r\npublic class Saw extends Equipment {\r\n    private String sawType;\r\n    private Boolean needsGrinding;\r\n\r\n    public Saw(String equipmentName, Integer id, String locker, Integer year, String sawType, Boolean needsGrinding) {\r\n        super(id, locker, year, equipmentName);\r\n        this.sawType = sawType;\r\n        this.needsGrinding = needsGrinding;\r\n    }\r\n\r\n    public String toString() {\r\n        return String.format(&quot;%s %s %s&quot;, super.toString(), sawType, needsGrinding);\r\n    }\r\n}\r\n```\r\n--------------------\r\n```java\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Scanner;\r\n\r\npublic class Program {\r\n    private static final String  DRILL = &quot;Drill&quot;;\r\n    private static final String  SAW = &quot;Saw&quot;;\r\n\r\n    public List&lt;Equipment&gt; readFromFile() throws IOException {\r\n        File equipment = new File(&quot;equipment.txt&quot;);\r\n        List&lt;Equipment&gt; equipmentList = new ArrayList&lt;&gt;();\r\n        List&lt;String&gt; fields = new ArrayList&lt;&gt;();\r\n        String line;\r\n        String type = null;\r\n        Equipment equip = null;\r\n        try (Scanner reader = new Scanner(equipment)) {\r\n            while (reader.hasNextLine()) {\r\n                line = reader.nextLine();\r\n                if (isTypeLine(line)) {\r\n                    if (type != null) {\r\n                        switch (type) {\r\n                            case DRILL:\r\n                                equip = createDrill(fields);\r\n                                break;\r\n                            case SAW:\r\n                                equip = createSaw(fields);\r\n                                break;\r\n                            default:\r\n                                equip = null;\r\n                        }\r\n                        if (equip != null) {\r\n                            equipmentList.add(equip);\r\n                        }\r\n                    }\r\n                    fields.clear();\r\n                    type = line;\r\n                }\r\n                else {\r\n                    fields.add(line);\r\n                }\r\n            }\r\n            if (type != null) {\r\n                switch (type) {\r\n                    case DRILL:\r\n                        equip = createDrill(fields);\r\n                        break;\r\n                    case SAW:\r\n                        equip = createSaw(fields);\r\n                        break;\r\n                    default:\r\n                        equip = null;\r\n                }\r\n                if (equip != null) {\r\n                    equipmentList.add(equip);\r\n                }\r\n            }\r\n            return equipmentList;\r\n        }\r\n    }\r\n\r\n    private Drill createDrill(List&lt;String&gt; fields) {\r\n        Integer id = Integer.valueOf(fields.get(0));\r\n        String locker = fields.get(1);\r\n        Integer year = Integer.valueOf(fields.get(2));\r\n        Boolean batteryPowered = Boolean.valueOf(fields.get(3));\r\n        Boolean needsNewBit = Boolean.valueOf(fields.get(4));\r\n        Drill drill = new Drill(DRILL, id, locker, year, batteryPowered, needsNewBit);\r\n        return drill;\r\n    }\r\n\r\n    private Saw createSaw(List&lt;String&gt; fields) {\r\n        Integer id = Integer.valueOf(fields.get(0));\r\n        String locker = fields.get(1);\r\n        Integer year = Integer.valueOf(fields.get(2));\r\n        String sawType = fields.get(3);\r\n        Boolean needsGrinding = Boolean.valueOf(fields.get(4));\r\n        Saw saw = new Saw(SAW, id, locker, year, sawType, needsGrinding);\r\n        return saw;\r\n    }\r\n\r\n    private boolean isTypeLine(String line) {\r\n        return DRILL.equals(line)  ||  SAW.equals(line);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        Program prog = new Program();\r\n        try {\r\n            List&lt;Equipment&gt; list = prog.readFromFile();\r\n            list.forEach(System.out::println);\r\n        }\r\n        catch (IOException xIo) {\r\n            xIo.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n- I moved member `equipmentName` from the subclasses, i.e. `Drill` and `Saw`, to the superclass `Equipment` since one of the purposes of a base class is to contain members that are common to all subclasses. Hence better to have one `equipmentName` member in the superclass rather than have a separate member in each of the subclasses.\r\n- I added method `toString` to each of the classes `Equipment`, `Drill` and `Saw` only for debugging purposes.\r\n- In the text file, a group of lines, where the first line is either *Drill* or *Saw* defines a piece of equipment. Hence in the code (of method `readFromFile`, in class `Program`), whenever a line contains *Drill* or *Saw*, I save that in local variable `type`. I also know that we are starting a new definition. That means that either it is the first definition or that I have read all the lines that define the equipment. In the case of the latter, i.e. I have just read all the lines defining the equipment, I create an instance according to the value of `type`. I initialize `type` to null. This lets me know whether I am reading the first definition in the file.\r\n- After creating the appropriate instance, i.e. `Drill` or `Saw`, I add it to the [list][1].\r\n- I use [try-with-resources][2] in method `readFromFile` to ensure that the file, *equipment.txt*, is closed.\r\n- Also in method `readFromFile`, when the `while` loop terminates, there may be values in `fields` which I have not yet converted to an instance of either `Drill` or `Saw`. Hence the `if` statement that comes after the `while` loop.\r\n- The following line (from method `main` in class `Program`) is known as a [method reference][3]. It just saves me some typing and it is only to display the value returned by method `readFromFile` to check that I got the expected result.\r\n```java\r\nlist.forEach(System.out::println);\r\n```\r\n\r\nThe contents of file `equipment.txt`\r\n```none\r\nSaw\r\n12\r\nLocker 1\r\n2012\r\nHand\r\ntrue\r\nSaw\r\n15\r\nLocker 2\r\n2012\r\nHack\r\ntrue\r\nSaw\r\n14\r\nLocker 2\r\n2014\r\nJapanese\r\ntrue\r\nSaw\r\n1\r\nLocker 3\r\n2014\r\nCoping\r\nfalse\r\nSaw\r\n2\r\nLocker 3\r\n2014\r\nCoping\r\ntrue\r\nSaw\r\n12\r\nLocker 1\r\n2016\r\nJapanese\r\nfalse\r\nSaw\r\n3\r\nLocker 1\r\n2016\r\nHack\r\ntrue\r\nSaw\r\n5\r\nLocker 4\r\n2016\r\nHand\r\ntrue\r\nSaw\r\n6\r\nLocker 4\r\n2019\r\nHand\r\ntrue\r\nDrill\r\n16\r\nLocker 5\r\n2019\r\nfalse\r\ntrue\r\nDrill\r\n17\r\nLocker 5\r\n2019\r\nfalse\r\ntrue\r\nDrill\r\n18\r\nLocker 5\r\n2001\r\ntrue\r\nfalse\r\nSaw\r\n20\r\nLocker 6\r\n2001\r\nHack\r\nfalse\r\nSaw\r\n21\r\nLocker 6\r\n2001\r\nHack\r\ntrue\r\nSaw\r\n31\r\nLocker 7\r\n2021\r\nJapanese\r\nfalse\r\nSaw\r\n32\r\nLocker 7\r\n2021\r\nJapanese\r\nfalse\r\nSaw\r\n33\r\nLocker 7\r\n2021\r\nJapanese\r\ntrue\r\nSaw\r\n34\r\nLocker 7\r\n2018\r\nCoping\r\nfalse\r\n```\r\nOutput from running `Program`\r\n```none\r\nSaw 12 Locker 1 2012 Hand true\r\nSaw 15 Locker 2 2012 Hack true\r\nSaw 14 Locker 2 2014 Japanese true\r\nSaw 1 Locker 3 2014 Coping false\r\nSaw 2 Locker 3 2014 Coping true\r\nSaw 12 Locker 1 2016 Japanese false\r\nSaw 3 Locker 1 2016 Hack true\r\nSaw 5 Locker 4 2016 Hand true\r\nSaw 6 Locker 4 2019 Hand true\r\nDrill 16 Locker 5 2019 false true\r\nDrill 17 Locker 5 2019 false true\r\nDrill 18 Locker 5 2001 true false\r\nSaw 20 Locker 6 2001 Hack false\r\nSaw 21 Locker 6 2001 Hack true\r\nSaw 31 Locker 7 2021 Japanese false\r\nSaw 32 Locker 7 2021 Japanese false\r\nSaw 33 Locker 7 2021 Japanese true\r\nSaw 34 Locker 7 2018 Coping false\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html\r\n  [2]: https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\r\n  [3]: https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html","title":"How to create a method which returns objects read from txt.file?","body":"<p>First the code.<br />\n(Explanations after.)</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class Equipment {\n    private Integer id;\n    private String locker;\n    private Integer year;\n    private String equipmentName;\n\n    public Equipment(Integer id, String locker, Integer year, String name) {\n        this.id = id;\n        this.locker = locker;\n        this.year = year;\n        equipmentName = name;\n    }\n\n    public String toString() {\n        return String.format(&quot;%s %s %s %s&quot;, equipmentName, id, locker, year);\n    }\n}\n</code></pre>\n<hr />\n<pre class=\"lang-java prettyprint-override\"><code>public class Drill extends Equipment {\n    private Boolean batteryPowered;\n    private Boolean needsNewBit;\n\n    public Drill(String equipmentName, Integer id, String locker, Integer year,  Boolean batteryPowered, Boolean needsNewBit) {\n        super(id, locker, year, equipmentName);\n        this.batteryPowered = batteryPowered;\n        this.needsNewBit = needsNewBit;\n    }\n\n    public String toString() {\n        return String.format(&quot;%s %s %s&quot;, super.toString(), batteryPowered, needsNewBit);\n    }\n}\n</code></pre>\n<hr />\n<pre class=\"lang-java prettyprint-override\"><code>public class Saw extends Equipment {\n    private String sawType;\n    private Boolean needsGrinding;\n\n    public Saw(String equipmentName, Integer id, String locker, Integer year, String sawType, Boolean needsGrinding) {\n        super(id, locker, year, equipmentName);\n        this.sawType = sawType;\n        this.needsGrinding = needsGrinding;\n    }\n\n    public String toString() {\n        return String.format(&quot;%s %s %s&quot;, super.toString(), sawType, needsGrinding);\n    }\n}\n</code></pre>\n<hr />\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.File;\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Scanner;\n\npublic class Program {\n    private static final String  DRILL = &quot;Drill&quot;;\n    private static final String  SAW = &quot;Saw&quot;;\n\n    public List&lt;Equipment&gt; readFromFile() throws IOException {\n        File equipment = new File(&quot;equipment.txt&quot;);\n        List&lt;Equipment&gt; equipmentList = new ArrayList&lt;&gt;();\n        List&lt;String&gt; fields = new ArrayList&lt;&gt;();\n        String line;\n        String type = null;\n        Equipment equip = null;\n        try (Scanner reader = new Scanner(equipment)) {\n            while (reader.hasNextLine()) {\n                line = reader.nextLine();\n                if (isTypeLine(line)) {\n                    if (type != null) {\n                        switch (type) {\n                            case DRILL:\n                                equip = createDrill(fields);\n                                break;\n                            case SAW:\n                                equip = createSaw(fields);\n                                break;\n                            default:\n                                equip = null;\n                        }\n                        if (equip != null) {\n                            equipmentList.add(equip);\n                        }\n                    }\n                    fields.clear();\n                    type = line;\n                }\n                else {\n                    fields.add(line);\n                }\n            }\n            if (type != null) {\n                switch (type) {\n                    case DRILL:\n                        equip = createDrill(fields);\n                        break;\n                    case SAW:\n                        equip = createSaw(fields);\n                        break;\n                    default:\n                        equip = null;\n                }\n                if (equip != null) {\n                    equipmentList.add(equip);\n                }\n            }\n            return equipmentList;\n        }\n    }\n\n    private Drill createDrill(List&lt;String&gt; fields) {\n        Integer id = Integer.valueOf(fields.get(0));\n        String locker = fields.get(1);\n        Integer year = Integer.valueOf(fields.get(2));\n        Boolean batteryPowered = Boolean.valueOf(fields.get(3));\n        Boolean needsNewBit = Boolean.valueOf(fields.get(4));\n        Drill drill = new Drill(DRILL, id, locker, year, batteryPowered, needsNewBit);\n        return drill;\n    }\n\n    private Saw createSaw(List&lt;String&gt; fields) {\n        Integer id = Integer.valueOf(fields.get(0));\n        String locker = fields.get(1);\n        Integer year = Integer.valueOf(fields.get(2));\n        String sawType = fields.get(3);\n        Boolean needsGrinding = Boolean.valueOf(fields.get(4));\n        Saw saw = new Saw(SAW, id, locker, year, sawType, needsGrinding);\n        return saw;\n    }\n\n    private boolean isTypeLine(String line) {\n        return DRILL.equals(line)  ||  SAW.equals(line);\n    }\n\n    public static void main(String[] args) {\n        Program prog = new Program();\n        try {\n            List&lt;Equipment&gt; list = prog.readFromFile();\n            list.forEach(System.out::println);\n        }\n        catch (IOException xIo) {\n            xIo.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<ul>\n<li>I moved member <code>equipmentName</code> from the subclasses, i.e. <code>Drill</code> and <code>Saw</code>, to the superclass <code>Equipment</code> since one of the purposes of a base class is to contain members that are common to all subclasses. Hence better to have one <code>equipmentName</code> member in the superclass rather than have a separate member in each of the subclasses.</li>\n<li>I added method <code>toString</code> to each of the classes <code>Equipment</code>, <code>Drill</code> and <code>Saw</code> only for debugging purposes.</li>\n<li>In the text file, a group of lines, where the first line is either <em>Drill</em> or <em>Saw</em> defines a piece of equipment. Hence in the code (of method <code>readFromFile</code>, in class <code>Program</code>), whenever a line contains <em>Drill</em> or <em>Saw</em>, I save that in local variable <code>type</code>. I also know that we are starting a new definition. That means that either it is the first definition or that I have read all the lines that define the equipment. In the case of the latter, i.e. I have just read all the lines defining the equipment, I create an instance according to the value of <code>type</code>. I initialize <code>type</code> to null. This lets me know whether I am reading the first definition in the file.</li>\n<li>After creating the appropriate instance, i.e. <code>Drill</code> or <code>Saw</code>, I add it to the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html\" rel=\"nofollow noreferrer\">list</a>.</li>\n<li>I use <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\">try-with-resources</a> in method <code>readFromFile</code> to ensure that the file, <em>equipment.txt</em>, is closed.</li>\n<li>Also in method <code>readFromFile</code>, when the <code>while</code> loop terminates, there may be values in <code>fields</code> which I have not yet converted to an instance of either <code>Drill</code> or <code>Saw</code>. Hence the <code>if</code> statement that comes after the <code>while</code> loop.</li>\n<li>The following line (from method <code>main</code> in class <code>Program</code>) is known as a <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\" rel=\"nofollow noreferrer\">method reference</a>. It just saves me some typing and it is only to display the value returned by method <code>readFromFile</code> to check that I got the expected result.</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>list.forEach(System.out::println);\n</code></pre>\n<p>The contents of file <code>equipment.txt</code></p>\n<pre class=\"lang-none prettyprint-override\"><code>Saw\n12\nLocker 1\n2012\nHand\ntrue\nSaw\n15\nLocker 2\n2012\nHack\ntrue\nSaw\n14\nLocker 2\n2014\nJapanese\ntrue\nSaw\n1\nLocker 3\n2014\nCoping\nfalse\nSaw\n2\nLocker 3\n2014\nCoping\ntrue\nSaw\n12\nLocker 1\n2016\nJapanese\nfalse\nSaw\n3\nLocker 1\n2016\nHack\ntrue\nSaw\n5\nLocker 4\n2016\nHand\ntrue\nSaw\n6\nLocker 4\n2019\nHand\ntrue\nDrill\n16\nLocker 5\n2019\nfalse\ntrue\nDrill\n17\nLocker 5\n2019\nfalse\ntrue\nDrill\n18\nLocker 5\n2001\ntrue\nfalse\nSaw\n20\nLocker 6\n2001\nHack\nfalse\nSaw\n21\nLocker 6\n2001\nHack\ntrue\nSaw\n31\nLocker 7\n2021\nJapanese\nfalse\nSaw\n32\nLocker 7\n2021\nJapanese\nfalse\nSaw\n33\nLocker 7\n2021\nJapanese\ntrue\nSaw\n34\nLocker 7\n2018\nCoping\nfalse\n</code></pre>\n<p>Output from running <code>Program</code></p>\n<pre class=\"lang-none prettyprint-override\"><code>Saw 12 Locker 1 2012 Hand true\nSaw 15 Locker 2 2012 Hack true\nSaw 14 Locker 2 2014 Japanese true\nSaw 1 Locker 3 2014 Coping false\nSaw 2 Locker 3 2014 Coping true\nSaw 12 Locker 1 2016 Japanese false\nSaw 3 Locker 1 2016 Hack true\nSaw 5 Locker 4 2016 Hand true\nSaw 6 Locker 4 2019 Hand true\nDrill 16 Locker 5 2019 false true\nDrill 17 Locker 5 2019 false true\nDrill 18 Locker 5 2001 true false\nSaw 20 Locker 6 2001 Hack false\nSaw 21 Locker 6 2001 Hack true\nSaw 31 Locker 7 2021 Japanese false\nSaw 32 Locker 7 2021 Japanese false\nSaw 33 Locker 7 2021 Japanese true\nSaw 34 Locker 7 2018 Coping false\n</code></pre>\n"}],"owner":{"account_id":25291319,"reputation":21,"user_id":19117343,"display_name":"Jonathan S."},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":232,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1659584287,"creation_date":1659546014,"question_id":73225127,"body_markdown":"This is my attempt to read the file. If anyone has any comments about how to perform this in a better way, I am all ears. \r\n```\r\npublic class Program {\r\n    public void readFromFile() throws FileNotFoundException {\r\n        File equipment = new File(&quot;equipment.txt&quot;);\r\n        Scanner reader = new Scanner(equipment);\r\n        while (reader.hasNextLine()){\r\n\r\n        }\r\n    }\r\n}\r\n```\r\nThis is my first Equipment class. The equipment from the txt file have some common properties. I only use this as an abstract class since that&#39;s what I think I have to do according to my task (test-Exam). If I am wrong, please let me know :)\r\n\r\n```\r\npublic abstract class Equipment {\r\n    private Integer id;\r\n    private String locker;\r\n    private Integer year;\r\n\r\n    public Equipment(Integer id, String locker, Integer year) {\r\n        this.id = id;\r\n        this.locker = locker;\r\n        this.year = year;\r\n    }\r\n```\r\nChild equipment class drill. The drill only occurs three times within the txt file and I struggle to figure out how to read the content from the txt file when the drill and saw have some different properties. \r\n\r\n```\r\npublic class Drill extends Equipment{\r\n    private String equipmentName;\r\n    private Boolean batteryPowered;\r\n    private Boolean needsNewBit;\r\n\r\n    public Drill(String equipmentName, Integer id, String locker, Integer year,  Boolean batteryPowered, Boolean needsNewBit) {\r\n        super(id, locker, year);\r\n        this.equipmentName = equipmentName;\r\n        this.batteryPowered = batteryPowered;\r\n        this.needsNewBit = needsNewBit;\r\n    }\r\n```\r\n\r\n\r\nChild equipment class saw\r\n\r\n```\r\npublic class Saw extends Equipment{\r\n    private String equipmentName;\r\n    private String sawType;\r\n    private Boolean needsGrinding;\r\n\r\n    public Saw(String equipmentName, Integer id, String locker, Integer year, String sawType, Boolean needsGrinding) {\r\n        super(id, locker, year);\r\n        this.equipmentName = equipmentName;\r\n        this.sawType = sawType;\r\n        this.needsGrinding = needsGrinding;\r\n    }\r\n```\r\n\r\nEquipment.txt file format. I have separated the objects so it&#39;s easier to read. The txt file is originally without spaces in between the objects. \r\n```\r\nSaw\r\n12\r\nLocker 1\r\n2012\r\nHand\r\ntrue\r\n\r\nSaw\r\n15\r\nLocker 2\r\n2012\r\nHack\r\ntrue\r\n\r\nSaw\r\n14\r\nLocker 2\r\n2014\r\nJapanese\r\ntrue\r\n\r\nSaw\r\n1\r\nLocker 3\r\n2014\r\nCoping\r\nfalse\r\n\r\nSaw\r\n2\r\nLocker 3\r\n2014\r\nCoping\r\ntrue\r\n\r\nSaw\r\n12\r\nLocker 1\r\n2016\r\nJapanese\r\nfalse\r\n\r\nSaw\r\n3\r\nLocker 1\r\n2016\r\nHack\r\ntrue\r\n\r\nSaw\r\n5\r\nLocker 4\r\n2016\r\nHand\r\ntrue\r\n\r\nSaw\r\n6\r\nLocker 4\r\n2019\r\nHand\r\ntrue\r\n\r\nDrill\r\n16\r\nLocker 5\r\n2019\r\nfalse\r\ntrue\r\n\r\nDrill\r\n17\r\nLocker 5\r\n2019\r\nfalse\r\ntrue\r\n\r\nDrill\r\n18\r\nLocker 5\r\n2001\r\ntrue\r\nfalse\r\n\r\nSaw\r\n20\r\nLocker 6\r\n2001\r\nHack\r\nfalse\r\n\r\nSaw\r\n21\r\nLocker 6\r\n2001\r\nHack\r\ntrue\r\n\r\nSaw\r\n31\r\nLocker 7\r\n2021\r\nJapanese\r\nfalse\r\n\r\nSaw\r\n32\r\nLocker 7\r\n2021\r\nJapanese\r\nfalse\r\n\r\nSaw\r\n33\r\nLocker 7\r\n2021\r\nJapanese\r\ntrue\r\n\r\nSaw\r\n34\r\nLocker 7\r\n2018\r\nCoping\r\nfalse\r\n```","title":"How to create a method which returns objects read from txt.file?","body":"<p>This is my attempt to read the file. If anyone has any comments about how to perform this in a better way, I am all ears.</p>\n<pre><code>public class Program {\n    public void readFromFile() throws FileNotFoundException {\n        File equipment = new File(&quot;equipment.txt&quot;);\n        Scanner reader = new Scanner(equipment);\n        while (reader.hasNextLine()){\n\n        }\n    }\n}\n</code></pre>\n<p>This is my first Equipment class. The equipment from the txt file have some common properties. I only use this as an abstract class since that's what I think I have to do according to my task (test-Exam). If I am wrong, please let me know :)</p>\n<pre><code>public abstract class Equipment {\n    private Integer id;\n    private String locker;\n    private Integer year;\n\n    public Equipment(Integer id, String locker, Integer year) {\n        this.id = id;\n        this.locker = locker;\n        this.year = year;\n    }\n</code></pre>\n<p>Child equipment class drill. The drill only occurs three times within the txt file and I struggle to figure out how to read the content from the txt file when the drill and saw have some different properties.</p>\n<pre><code>public class Drill extends Equipment{\n    private String equipmentName;\n    private Boolean batteryPowered;\n    private Boolean needsNewBit;\n\n    public Drill(String equipmentName, Integer id, String locker, Integer year,  Boolean batteryPowered, Boolean needsNewBit) {\n        super(id, locker, year);\n        this.equipmentName = equipmentName;\n        this.batteryPowered = batteryPowered;\n        this.needsNewBit = needsNewBit;\n    }\n</code></pre>\n<p>Child equipment class saw</p>\n<pre><code>public class Saw extends Equipment{\n    private String equipmentName;\n    private String sawType;\n    private Boolean needsGrinding;\n\n    public Saw(String equipmentName, Integer id, String locker, Integer year, String sawType, Boolean needsGrinding) {\n        super(id, locker, year);\n        this.equipmentName = equipmentName;\n        this.sawType = sawType;\n        this.needsGrinding = needsGrinding;\n    }\n</code></pre>\n<p>Equipment.txt file format. I have separated the objects so it's easier to read. The txt file is originally without spaces in between the objects.</p>\n<pre><code>Saw\n12\nLocker 1\n2012\nHand\ntrue\n\nSaw\n15\nLocker 2\n2012\nHack\ntrue\n\nSaw\n14\nLocker 2\n2014\nJapanese\ntrue\n\nSaw\n1\nLocker 3\n2014\nCoping\nfalse\n\nSaw\n2\nLocker 3\n2014\nCoping\ntrue\n\nSaw\n12\nLocker 1\n2016\nJapanese\nfalse\n\nSaw\n3\nLocker 1\n2016\nHack\ntrue\n\nSaw\n5\nLocker 4\n2016\nHand\ntrue\n\nSaw\n6\nLocker 4\n2019\nHand\ntrue\n\nDrill\n16\nLocker 5\n2019\nfalse\ntrue\n\nDrill\n17\nLocker 5\n2019\nfalse\ntrue\n\nDrill\n18\nLocker 5\n2001\ntrue\nfalse\n\nSaw\n20\nLocker 6\n2001\nHack\nfalse\n\nSaw\n21\nLocker 6\n2001\nHack\ntrue\n\nSaw\n31\nLocker 7\n2021\nJapanese\nfalse\n\nSaw\n32\nLocker 7\n2021\nJapanese\nfalse\n\nSaw\n33\nLocker 7\n2021\nJapanese\ntrue\n\nSaw\n34\nLocker 7\n2018\nCoping\nfalse\n</code></pre>\n"},{"tags":["java","spring","spring-boot","kotlin","oauth"],"answers":[{"tags":[],"owner":{"account_id":23866645,"reputation":91,"user_id":17868883,"display_name":"Jimmy Iu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659584270,"creation_date":1659584270,"answer_id":73230101,"question_id":73207561,"body_markdown":"Usually after you are authorized by the authorization server, as a result you get an access token.\r\nThe resource server verifies against the access token to determine your client has the right to retrieve the requested resources.\r\n\r\n\r\n----------\r\n\r\n\r\nWith this background, one possible case is that:\r\n\r\nYour client doesn&#39;t store the access token. So that everytime it hits the resource server, the resource server redirects the client to the authorization server to get the access token.\r\n\r\nA solution of this is your client can store the access token. For the subsequent requests to the resources server, the access token has to be provided in an expected way. (like Aurthorization request header)\r\n\r\nYou may also find storing a refresh token is useful. Since there is no much background about your client app, cannot give a concrete recommendation for you.\r\n\r\n\r\nIf this is the case, you can log your outgoing request from the client to the resources server, you will see the access token missing in your request.","title":"Spring Boot OAuth2 - Remember given Authorization","body":"<p>Usually after you are authorized by the authorization server, as a result you get an access token.\nThe resource server verifies against the access token to determine your client has the right to retrieve the requested resources.</p>\n<hr />\n<p>With this background, one possible case is that:</p>\n<p>Your client doesn't store the access token. So that everytime it hits the resource server, the resource server redirects the client to the authorization server to get the access token.</p>\n<p>A solution of this is your client can store the access token. For the subsequent requests to the resources server, the access token has to be provided in an expected way. (like Aurthorization request header)</p>\n<p>You may also find storing a refresh token is useful. Since there is no much background about your client app, cannot give a concrete recommendation for you.</p>\n<p>If this is the case, you can log your outgoing request from the client to the resources server, you will see the access token missing in your request.</p>\n"}],"owner":{"account_id":17780927,"reputation":7,"user_id":12912144,"display_name":"Dome"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1659584270,"creation_date":1659443308,"question_id":73207561,"body_markdown":"i&#39;m currently working on a OAuth2 Authorization Server using Spring Boot and the Spring Security OAuth2 Autoconfigure library.\r\n\r\nEverything works so far except the fact that I need to authorize the client every time to access my protected resources. Is there any way to suppress the prompt or remember that i&#39;ve already authorized the client? \r\nAdding `&amp;prompt=none` to the request params of my URL didn&#39;t work as expected.\r\n\r\nI already tried to add a custom AuthorizationRequestResolver and adding `prompt=none` to every request, but that didn&#39;t work also.\r\n\r\nThank you in advance.","title":"Spring Boot OAuth2 - Remember given Authorization","body":"<p>i'm currently working on a OAuth2 Authorization Server using Spring Boot and the Spring Security OAuth2 Autoconfigure library.</p>\n<p>Everything works so far except the fact that I need to authorize the client every time to access my protected resources. Is there any way to suppress the prompt or remember that i've already authorized the client?\nAdding <code>&amp;prompt=none</code> to the request params of my URL didn't work as expected.</p>\n<p>I already tried to add a custom AuthorizationRequestResolver and adding <code>prompt=none</code> to every request, but that didn't work also.</p>\n<p>Thank you in advance.</p>\n"},{"tags":["java","jvm","garbage-collection","java-native-interface"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1659590597,"post_id":73230041,"comment_id":129331539,"body_markdown":"The short answer is that it doesn&#39;t handle it.  If your native code tries to access array elements without holding the GC lock then it is broken, and you risk causing a JVM crash.  Does the JVM try to prevent your native code doing this?  Nope!  Could it prevent it?  Nope!","body":"The short answer is that it doesn&#39;t handle it.  If your native code tries to access array elements without holding the GC lock then it is broken, and you risk causing a JVM crash.  Does the JVM try to prevent your native code doing this?  Nope!  Could it prevent it?  Nope!"},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1659597004,"post_id":73230041,"comment_id":129333161,"body_markdown":"I think you misunderstand what GetArrayElements is allowed to do: in the best case it *pins* that array to memory, ensuring that it is not moved until the pointer is released, or it makes a copy and then the JVM is free to move the backing array around. Of course it must then copy everything back when you call Release.","body":"I think you misunderstand what GetArrayElements is allowed to do: in the best case it <i>pins</i> that array to memory, ensuring that it is not moved until the pointer is released, or it makes a copy and then the JVM is free to move the backing array around. Of course it must then copy everything back when you call Release."}],"owner":{"account_id":5438438,"reputation":11,"user_id":4327152,"display_name":"Yang Song"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1659586857,"answer_count":0,"score":0,"last_activity_date":1659583711,"creation_date":1659583711,"question_id":73230041,"body_markdown":"Jni has methods Get&lt;PrimitiveType&gt;ArrayElements and GetPrimitiveArrayCritical.\r\n\r\nI know the *critical methods add gc lock to prevent gc when jni code is executing in critical sections, but if jni code is executing non-critical methods and gc happens, the array elements may be moved by gc. In this situation, native code may hold a wrong address. I don&#39;t know how jvm handle this, or if i misunderstand something.","title":"how jni non critical method handle garbage collection","body":"<p>Jni has methods GetArrayElements and GetPrimitiveArrayCritical.</p>\n<p>I know the *critical methods add gc lock to prevent gc when jni code is executing in critical sections, but if jni code is executing non-critical methods and gc happens, the array elements may be moved by gc. In this situation, native code may hold a wrong address. I don't know how jvm handle this, or if i misunderstand something.</p>\n"},{"tags":["java","jacoco"],"owner":{"account_id":6849605,"reputation":172,"user_id":5564605,"display_name":"Ekanshdeep Gupta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1659583673,"creation_date":1659581786,"question_id":73229883,"body_markdown":"I am trying to use JaCoCo to measure the code coverage of a `model` class, after running a method which generates random tests which call methods of the `model` class. Essentially, the structure looks like this:\r\n\r\n```main -&gt; testRunner -&gt; model```\r\n\r\nIn main, I want to instrument the `model` class and generate code coverage information using JaCoCo. I can instrument the model in main or testRunner as follows:\r\n\r\n```\r\nfinal String targetName = model.class.getName();\r\nfinal IRuntime runtime = new LoggerRuntime();\r\n\r\nfinal Instrumenter instr = new Instrumenter(runtime);\r\nJaCoCoHelper jaCoCoHelper = new JaCoCoHelper();\r\nInputStream original = getTargetClass(targetName);\r\n\r\nbyte[] instrumented = null;\r\ninstrumented = instr.instrument(original, targetName);\r\noriginal.close();\r\n\r\nfinal RuntimeData data = new RuntimeData();\r\nruntime.startup(data);\r\n\r\nfinal JaCoCoHelper.MemoryClassLoader memoryClassLoader = new JaCoCoHelper.MemoryClassLoader();\r\nmemoryClassLoader.addDefinition(targetName, instrumented);\r\ntargetClass = memoryClassLoader.loadClass(targetName);\r\n```\r\n\r\nBut the issue is that after instrumenting the model class, I get a different copy of the class, `targetClass`. It is my understanding that for the JaCoCo code coverage to work, I need to instantiate an object of this `targetClass` and make all calls from there. However, the problem with that is since this class is not present at compile time, Java doesn&#39;t know about its methods, fields etc and can&#39;t type check the rest of the code, so I will have to resort Java reflection and typecasting everything appropriately. How can I instrument the class and also have Java type check the rest of the code?\r\n\r\nIs there some way to instrument the `testRunner` from `main` and have JaCoCo recursively instrument all classes used from testRunner, or perhaps instrument the `model` class and have that replace the `model` class in `testRunner`, in a way that at compile time I can still call the `model` class so that Java knows how to type check it?","title":"JaCoCo instrumentation at runtime without reflection","body":"<p>I am trying to use JaCoCo to measure the code coverage of a <code>model</code> class, after running a method which generates random tests which call methods of the <code>model</code> class. Essentially, the structure looks like this:</p>\n<p><code>main -&gt; testRunner -&gt; model</code></p>\n<p>In main, I want to instrument the <code>model</code> class and generate code coverage information using JaCoCo. I can instrument the model in main or testRunner as follows:</p>\n<pre><code>final String targetName = model.class.getName();\nfinal IRuntime runtime = new LoggerRuntime();\n\nfinal Instrumenter instr = new Instrumenter(runtime);\nJaCoCoHelper jaCoCoHelper = new JaCoCoHelper();\nInputStream original = getTargetClass(targetName);\n\nbyte[] instrumented = null;\ninstrumented = instr.instrument(original, targetName);\noriginal.close();\n\nfinal RuntimeData data = new RuntimeData();\nruntime.startup(data);\n\nfinal JaCoCoHelper.MemoryClassLoader memoryClassLoader = new JaCoCoHelper.MemoryClassLoader();\nmemoryClassLoader.addDefinition(targetName, instrumented);\ntargetClass = memoryClassLoader.loadClass(targetName);\n</code></pre>\n<p>But the issue is that after instrumenting the model class, I get a different copy of the class, <code>targetClass</code>. It is my understanding that for the JaCoCo code coverage to work, I need to instantiate an object of this <code>targetClass</code> and make all calls from there. However, the problem with that is since this class is not present at compile time, Java doesn't know about its methods, fields etc and can't type check the rest of the code, so I will have to resort Java reflection and typecasting everything appropriately. How can I instrument the class and also have Java type check the rest of the code?</p>\n<p>Is there some way to instrument the <code>testRunner</code> from <code>main</code> and have JaCoCo recursively instrument all classes used from testRunner, or perhaps instrument the <code>model</code> class and have that replace the <code>model</code> class in <code>testRunner</code>, in a way that at compile time I can still call the <code>model</code> class so that Java knows how to type check it?</p>\n"},{"tags":["java","android","android-alertdialog","material-components","android-textinputedittext"],"comments":[{"owner":{"account_id":4921760,"reputation":855,"user_id":3964160,"accept_rate":67,"display_name":"PeerNet"},"score":0,"creation_date":1659570456,"post_id":73228348,"comment_id":129328513,"body_markdown":"did you try to set password transformation as transformation method?","body":"did you try to set password transformation as transformation method?"},{"owner":{"account_id":9069534,"reputation":548,"user_id":6753279,"accept_rate":63,"display_name":"Ritu"},"score":0,"creation_date":1659576198,"post_id":73228348,"comment_id":129329443,"body_markdown":"@PeerNet i tried but still will can try again","body":"@PeerNet i tried but still will can try again"}],"answers":[{"tags":[],"owner":{"account_id":16537587,"reputation":486,"user_id":11949116,"display_name":"Abdo21"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659571224,"creation_date":1659571224,"answer_id":73229014,"question_id":73228348,"body_markdown":"Try moving addView(passWord) up by two lines, like this :\r\n\r\n    passwordParent.addView(passWord);\r\n    passwordParent.setEndIconMode(TextInputLayout.END_ICON_PASSWORD_TOGGLE);\r\n    passwordParent.setEndIconDrawable(R.drawable.show_password_selector);\r\n\r\n","title":"TextInputLayout InputType.TYPE_TEXT_VARIATION_PASSWORD showing password by default","body":"<p>Try moving addView(passWord) up by two lines, like this :</p>\n<pre><code>passwordParent.addView(passWord);\npasswordParent.setEndIconMode(TextInputLayout.END_ICON_PASSWORD_TOGGLE);\npasswordParent.setEndIconDrawable(R.drawable.show_password_selector);\n</code></pre>\n"}],"owner":{"account_id":9069534,"reputation":548,"user_id":6753279,"accept_rate":63,"display_name":"Ritu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659583631,"creation_date":1659564786,"question_id":73228348,"body_markdown":"I created alert dialog with `TextInputLayout` programmatically in fragment. I need to hide password by default, `TextInputLayout` has toggle button and it is working as expected hide/show on click. I tried to keep password hidden by default by settingsingleline to true and other hack i got from other SO answers but i still not able to get desired result. Any idea why i am not getting desired result?\r\n\r\n    TextInputLayout passwordParent = new TextInputLayout(getActivity());\r\n    \t\tpasswordParent = new TextInputLayout(getActivity());\r\n    \r\n            TextInputEditText passWord= new TextInputEditText(getActivity());\r\n            passWord.setInputType(InputType.TYPE_TEXT_VARIATION_PASSWORD);\r\n            passWord.setBackgroundResource(R.drawable.background);\r\n            passWord.setBackgroundColor(getResources().getColor(R.color.white));\r\n    \r\n            passwordParent.setEndIconMode(TextInputLayout.END_ICON_PASSWORD_TOGGLE);\r\n            passwordParent.setEndIconDrawable(R.drawable.show_password_selector);\r\n            passwordParent.addView(passWord);\r\n\r\n\r\nBackground XML Selector\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n    &lt;item android:drawable=&quot;@drawable/ic_remove_red_eye_black_24dp&quot; android:state_checked=&quot;true&quot;/&gt; // Visible Eye Icon \r\n    &lt;item android:drawable=&quot;@drawable/ic_visibility_off_black_24dp&quot;/&gt; // Hide Eye Icon\r\n    &lt;/selector&gt;\r\n\r\n[![enter image description here][1]][1]\r\n \r\n**Edit:** It&#39;s working by adding ` InputType.TYPE_CLASS_TEXT` into input type like this `passWord.setInputType(InputType.TYPE_TEXT_VARIATION_PASSWORD | InputType.TYPE_CLASS_TEXT);` but the icon still stay the same, its still showing wrong eye icon. \r\n\r\n  [1]: https://i.stack.imgur.com/j7MoQ.jpg\r\n\r\n","title":"TextInputLayout InputType.TYPE_TEXT_VARIATION_PASSWORD showing password by default","body":"<p>I created alert dialog with <code>TextInputLayout</code> programmatically in fragment. I need to hide password by default, <code>TextInputLayout</code> has toggle button and it is working as expected hide/show on click. I tried to keep password hidden by default by settingsingleline to true and other hack i got from other SO answers but i still not able to get desired result. Any idea why i am not getting desired result?</p>\n<pre><code>TextInputLayout passwordParent = new TextInputLayout(getActivity());\n        passwordParent = new TextInputLayout(getActivity());\n\n        TextInputEditText passWord= new TextInputEditText(getActivity());\n        passWord.setInputType(InputType.TYPE_TEXT_VARIATION_PASSWORD);\n        passWord.setBackgroundResource(R.drawable.background);\n        passWord.setBackgroundColor(getResources().getColor(R.color.white));\n\n        passwordParent.setEndIconMode(TextInputLayout.END_ICON_PASSWORD_TOGGLE);\n        passwordParent.setEndIconDrawable(R.drawable.show_password_selector);\n        passwordParent.addView(passWord);\n</code></pre>\n<p>Background XML Selector</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n&lt;item android:drawable=&quot;@drawable/ic_remove_red_eye_black_24dp&quot; android:state_checked=&quot;true&quot;/&gt; // Visible Eye Icon \n&lt;item android:drawable=&quot;@drawable/ic_visibility_off_black_24dp&quot;/&gt; // Hide Eye Icon\n&lt;/selector&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/j7MoQ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j7MoQ.jpg\" alt=\"enter image description here\" /></a></p>\n<p><strong>Edit:</strong> It's working by adding <code> InputType.TYPE_CLASS_TEXT</code> into input type like this <code>passWord.setInputType(InputType.TYPE_TEXT_VARIATION_PASSWORD | InputType.TYPE_CLASS_TEXT);</code> but the icon still stay the same, its still showing wrong eye icon.</p>\n"},{"tags":["java","eclipse","string","object","import"],"comments":[{"owner":{"account_id":324071,"reputation":18476,"user_id":644450,"accept_rate":100,"display_name":"oers"},"score":0,"creation_date":1343999729,"post_id":11796464,"comment_id":15672871,"body_markdown":"Have you tried switching it off and on again?","body":"Have you tried switching it off and on again?"},{"owner":{"account_id":297410,"reputation":10125,"user_id":602928,"accept_rate":86,"display_name":"Michael Laffargue"},"score":1,"creation_date":1343999760,"post_id":11796464,"comment_id":15672891,"body_markdown":"Verify that your project build path contain the JRE/JDK","body":"Verify that your project build path contain the JRE/JDK"}],"answers":[{"tags":[],"owner":{"account_id":1682487,"reputation":186,"user_id":1546435,"display_name":"melopsitaco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1343999772,"creation_date":1343999772,"answer_id":11796502,"question_id":11796464,"body_markdown":"Check your classpath. It must point to your JDK.","title":"My copy of Eclipse doesn&#39;t know what an object or a String is","body":"<p>Check your classpath. It must point to your JDK.</p>\n"},{"tags":[],"owner":{"account_id":265483,"reputation":5939,"user_id":552469,"accept_rate":83,"display_name":"Andrea Colleoni"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1343999819,"creation_date":1343999819,"answer_id":11796514,"question_id":11796464,"body_markdown":"Verify if you have a Runtime Enviroment in your build path.\r\n\r\nObject and String are at least in a JRE and the JRE must be referenced in the build path.\r\n\r\nIf you create a new java project you&#39;ll find there by default, but it&#39;s there.\r\n\r\nThe project build path can be broken by moving the JRE or JDK, changing the JAVA_HOME environment variable or by misconfiguration of custom System libraries that refer to specific JREs.","title":"My copy of Eclipse doesn&#39;t know what an object or a String is","body":"<p>Verify if you have a Runtime Enviroment in your build path.</p>\n\n<p>Object and String are at least in a JRE and the JRE must be referenced in the build path.</p>\n\n<p>If you create a new java project you'll find there by default, but it's there.</p>\n\n<p>The project build path can be broken by moving the JRE or JDK, changing the JAVA_HOME environment variable or by misconfiguration of custom System libraries that refer to specific JREs.</p>\n"},{"tags":[],"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1344002968,"creation_date":1344002968,"answer_id":11797394,"question_id":11796464,"body_markdown":"Your workspace is broken, notably the JRE you try to use.\r\n\r\nFix the JRE used in Eclipse and the compiler settings, and then rebuild the project.","title":"My copy of Eclipse doesn&#39;t know what an object or a String is","body":"<p>Your workspace is broken, notably the JRE you try to use.</p>\n\n<p>Fix the JRE used in Eclipse and the compiler settings, and then rebuild the project.</p>\n"},{"tags":[],"owner":{"account_id":3452675,"reputation":661,"user_id":2891948,"accept_rate":24,"display_name":"viveksinghggits"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1504265837,"creation_date":1449769014,"answer_id":34208306,"question_id":11796464,"body_markdown":"I got the very same error but after some digging I got to know about http://dev-answers.blogspot.de/2009/06/eclipse-build-errors-javalangobject.html\r\n\r\nThey are just saying to remove the JRE library and add Default System JRE Library.","title":"My copy of Eclipse doesn&#39;t know what an object or a String is","body":"<p>I got the very same error but after some digging I got to know about <a href=\"http://dev-answers.blogspot.de/2009/06/eclipse-build-errors-javalangobject.html\" rel=\"nofollow noreferrer\">http://dev-answers.blogspot.de/2009/06/eclipse-build-errors-javalangobject.html</a></p>\n\n<p>They are just saying to remove the JRE library and add Default System JRE Library.</p>\n"},{"tags":[],"owner":{"account_id":18253181,"reputation":450,"user_id":13287734,"display_name":"UNREAL"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659583109,"creation_date":1659583109,"answer_id":73229992,"question_id":11796464,"body_markdown":"goto quickfix-&gt;project-setup-&gt;manually-&gt; set your jde to default, This solved my problem\r\n","title":"My copy of Eclipse doesn&#39;t know what an object or a String is","body":"<p>goto quickfix-&gt;project-setup-&gt;manually-&gt; set your jde to default, This solved my problem</p>\n"}],"owner":{"account_id":1717402,"reputation":41,"user_id":1574175,"display_name":"Annie"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12594,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":11796514,"answer_count":5,"score":3,"last_activity_date":1659583109,"creation_date":1343999670,"question_id":11796464,"body_markdown":"I have a copy of Eclipse Indigo on my mac. It was working fine until I imported a project I had made on a different computer. Now I get errors like &quot;The type java.lang.Object cannot be resolved.&quot; and &quot;String cannot be resolved to a type&quot;. \r\n\r\nAlso, the computer I built it on had Java 7, while my slightly broken mac has Java 6, and won&#39;t update. I&#39;m not sure, but I suspect this may be an issue.\r\n\r\nWhat happened, and how do I fix it?\r\n\r\n**UPDATE**\r\n\r\nI put what I think is the right JRE in the build path, but now when I run it, I get these errors:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: Game : Unsupported major.minor version 51.0\r\n\tat java.lang.ClassLoader.defineClass1(Native Method)\r\n\tat java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)\r\n\tat java.lang.ClassLoader.defineClass(ClassLoader.java:615)\r\n\tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)\r\n\tat java.net.URLClassLoader.defineClass(URLClassLoader.java:283)\r\n\tat java.net.URLClassLoader.access$000(URLClassLoader.java:58)\r\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:197)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:190)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:306)\r\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:247)","title":"My copy of Eclipse doesn&#39;t know what an object or a String is","body":"<p>I have a copy of Eclipse Indigo on my mac. It was working fine until I imported a project I had made on a different computer. Now I get errors like \"The type java.lang.Object cannot be resolved.\" and \"String cannot be resolved to a type\". </p>\n\n<p>Also, the computer I built it on had Java 7, while my slightly broken mac has Java 6, and won't update. I'm not sure, but I suspect this may be an issue.</p>\n\n<p>What happened, and how do I fix it?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I put what I think is the right JRE in the build path, but now when I run it, I get these errors:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.UnsupportedClassVersionError: Game : Unsupported major.minor version 51.0\nat java.lang.ClassLoader.defineClass1(Native Method)\nat java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)\nat java.lang.ClassLoader.defineClass(ClassLoader.java:615)\nat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)\nat java.net.URLClassLoader.defineClass(URLClassLoader.java:283)\nat java.net.URLClassLoader.access$000(URLClassLoader.java:58)\nat java.net.URLClassLoader$1.run(URLClassLoader.java:197)\nat java.security.AccessController.doPrivileged(Native Method)\nat java.net.URLClassLoader.findClass(URLClassLoader.java:190)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:306)\nat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:247)\n</code></pre>\n"},{"tags":["java","java-8","annotations"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1659588771,"post_id":73229991,"comment_id":129331210,"body_markdown":"Why don&#39;t you want to add an additional field? I don&#39;t think it will break anything (?) - it&#39;s like the most natural thing to do in this situation!","body":"Why don&#39;t you want to add an additional field? I don&#39;t think it will break anything (?) - it&#39;s like the most natural thing to do in this situation!"},{"owner":{"account_id":25972773,"reputation":1,"user_id":19687668,"display_name":"user19687668"},"score":0,"creation_date":1659596166,"post_id":73229991,"comment_id":129332924,"body_markdown":"Quite agree with you. since jdk provided this new feature, i&#39;m just curious why I could not get the annotation value in runtime.?I could easily get the exact annotation value from parameter, return value, even from fields throgh java reflection api. Why can&#39;t I do this with throwing clause? The java development team have any consideration about this?I searched JDK relection api from JDK 8 to the newest 18, can&#39;t found any description about this.","body":"Quite agree with you. since jdk provided this new feature, i&#39;m just curious why I could not get the annotation value in runtime.?I could easily get the exact annotation value from parameter, return value, even from fields throgh java reflection api. Why can&#39;t I do this with throwing clause? The java development team have any consideration about this?I searched JDK relection api from JDK 8 to the newest 18, can&#39;t found any description about this."},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1659596523,"post_id":73229991,"comment_id":129333022,"body_markdown":"The reflection API doesn&#39;t give you any way to access the *bodies* of methods. The annotation is in the class file though, so you can always read that with ASM or whatever bytecode reader.","body":"The reflection API doesn&#39;t give you any way to access the <i>bodies</i> of methods. The annotation is in the class file though, so you can always read that with ASM or whatever bytecode reader."},{"owner":{"account_id":25972773,"reputation":1,"user_id":19687668,"display_name":"user19687668"},"score":0,"creation_date":1659598028,"post_id":73229991,"comment_id":129333503,"body_markdown":"Get that. I think that&#39;s the same reason I can&#39;t access the annotation value from local variable too. ASM is definitely another solution. tks a lot.","body":"Get that. I think that&#39;s the same reason I can&#39;t access the annotation value from local variable too. ASM is definitely another solution. tks a lot."}],"owner":{"account_id":25972773,"reputation":1,"user_id":19687668,"display_name":"user19687668"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659583091,"creation_date":1659583091,"question_id":73229991,"body_markdown":"I defined a business exception(extend runtime exception) which can be thrown by multiple situation to provide details infomation.\r\n\r\n```java\r\n/**\r\n * business exception\r\n */\r\npublic class BusinessException extends RuntimeException {\r\n    private String code;\r\n    private String msg;\r\n\r\n    public BusinessException(String code) {\r\n        super(code);\r\n        this.code = code;\r\n        this.msg = &quot;&quot;;\r\n    }\r\n\r\n    public BusinessException(String code, String errorMessage) {\r\n        super(code + &quot; &quot; + errorMessage);\r\n        this.code = code;\r\n        this.msg = errorMessage;\r\n    }\r\n}\r\n\r\n```\r\n\r\nhere is a example\r\n\r\n```java\r\n//if a excepted error occured\r\nthrows new BusinessException(code);\r\n```\r\n\r\nAs time passed, I found this class only define two field, and I want to provide more infomation within exceptions, and do not want to change the original exception class(simple add a another field named &#39;more&#39; is another solution, but I don&#39;t want to do this).\r\n\r\nI found JDK 8 has declared ElementType.TYPE_USE which providing more possibility in handle java annotations.so I&#39;m trying to take advantage of this new feature.\r\n\r\n\r\nI wrote code like this.\r\n\r\n```java\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target(ElementType.TYPE_USE)\r\npublic @interface Details {\r\n    String more() default &quot;&quot;;\r\n\r\n}\r\n```\r\n\r\n```java\r\n//if a excepted error occured, provide more infomation with annotations\r\nthrow @Details(more=&quot;detail msgs&quot;) new BusinessException(code);\r\n```\r\n\r\nI try to find a way to get annotion value from thrown clause in reflection api, but found this impossible. I am trapped with this. anyone can help me?best thankful.\r\n\r\n","title":"how can i get the annotation value declared from throw clause in JDK 8?","body":"<p>I defined a business exception(extend runtime exception) which can be thrown by multiple situation to provide details infomation.</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * business exception\n */\npublic class BusinessException extends RuntimeException {\n    private String code;\n    private String msg;\n\n    public BusinessException(String code) {\n        super(code);\n        this.code = code;\n        this.msg = &quot;&quot;;\n    }\n\n    public BusinessException(String code, String errorMessage) {\n        super(code + &quot; &quot; + errorMessage);\n        this.code = code;\n        this.msg = errorMessage;\n    }\n}\n\n</code></pre>\n<p>here is a example</p>\n<pre class=\"lang-java prettyprint-override\"><code>//if a excepted error occured\nthrows new BusinessException(code);\n</code></pre>\n<p>As time passed, I found this class only define two field, and I want to provide more infomation within exceptions, and do not want to change the original exception class(simple add a another field named 'more' is another solution, but I don't want to do this).</p>\n<p>I found JDK 8 has declared ElementType.TYPE_USE which providing more possibility in handle java annotations.so I'm trying to take advantage of this new feature.</p>\n<p>I wrote code like this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.TYPE_USE)\npublic @interface Details {\n    String more() default &quot;&quot;;\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>//if a excepted error occured, provide more infomation with annotations\nthrow @Details(more=&quot;detail msgs&quot;) new BusinessException(code);\n</code></pre>\n<p>I try to find a way to get annotion value from thrown clause in reflection api, but found this impossible. I am trapped with this. anyone can help me?best thankful.</p>\n"},{"tags":["java","image","resources"],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659027031,"creation_date":1659027031,"answer_id":73156489,"question_id":73156291,"body_markdown":"`new File` is literal. It means __file__. Physically, on disk. Also, `.` means &#39;current working dir&#39;, which is whatever the dir is where the user starts your java process, i.e. who knows - you cannot rely on it being anything specific, thus, this code is doomed. It can&#39;t ever work. (Or rather, it only works if the user is following instructions to the letter and users don&#39;t work like that).\r\n\r\nGiven that java apps are distributed as jars, you want images to be entries in those jars. They aren&#39;t files, thus `new File` means you&#39;ve lost.\r\n\r\nThe right move is to use `MyClass.class.getResource(&quot;/pics/Screenshot.png&quot;)`.\r\n\r\nThis gets you a URL which you can pass to e.g. ImageIcon and the like. I have no idea what PicLabel is, but it&#39;ll probably take a URL. If it does not, there&#39;s:\r\n\r\n```\r\ntry (InputStream in = MyClass.class.getResource(&quot;/pics/Screenshot.png&quot;) {\r\n  // use &#39;in&#39; here\r\n}\r\n```\r\n\r\n- if it doesn&#39;t take a URL, it takes an InputStream. And if that&#39;s not possible either, it&#39;s a silly API; stop using it, find a non-broken library instead.\r\n\r\nThis will look in the same place as where `YourClass.class` lives. Even if it is in a jar. Even if the current working dir isn&#39;t what you thought it was. Stick `/pics/Screenshot.png` inside the jar and the above line will &#39;find&#39; it.\r\n","title":"Java: how to add image references properly from a non-src folder","body":"<p><code>new File</code> is literal. It means <strong>file</strong>. Physically, on disk. Also, <code>.</code> means 'current working dir', which is whatever the dir is where the user starts your java process, i.e. who knows - you cannot rely on it being anything specific, thus, this code is doomed. It can't ever work. (Or rather, it only works if the user is following instructions to the letter and users don't work like that).</p>\n<p>Given that java apps are distributed as jars, you want images to be entries in those jars. They aren't files, thus <code>new File</code> means you've lost.</p>\n<p>The right move is to use <code>MyClass.class.getResource(&quot;/pics/Screenshot.png&quot;)</code>.</p>\n<p>This gets you a URL which you can pass to e.g. ImageIcon and the like. I have no idea what PicLabel is, but it'll probably take a URL. If it does not, there's:</p>\n<pre><code>try (InputStream in = MyClass.class.getResource(&quot;/pics/Screenshot.png&quot;) {\n  // use 'in' here\n}\n</code></pre>\n<ul>\n<li>if it doesn't take a URL, it takes an InputStream. And if that's not possible either, it's a silly API; stop using it, find a non-broken library instead.</li>\n</ul>\n<p>This will look in the same place as where <code>YourClass.class</code> lives. Even if it is in a jar. Even if the current working dir isn't what you thought it was. Stick <code>/pics/Screenshot.png</code> inside the jar and the above line will 'find' it.</p>\n"},{"tags":[],"owner":{"account_id":25916637,"reputation":1,"user_id":19639941,"display_name":"cp."},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1659034144,"creation_date":1659034144,"answer_id":73157832,"question_id":73156291,"body_markdown":"Ok thank you, I did some tests following your example (PicLabel is just my own helper class giving me back a formatted JLabel with a pic and a frame in it):\r\n\r\nwhen I create a folder &quot;picccs&quot; under src, I can access a resource pic there (b.png). But the question still is - is it also possible to have it in the pics folder (see screenshot above) beside src, where a.png is in? (there I get null as URL):\r\n\r\n    try {\r\n        URL in_b = Gui.class.getResource(&quot;/picccs/b.png&quot;);  \r\n        URL in_a = Gui.class.getResource(&quot;/pics/a.png&quot;);  \r\n    } catch (Exception e) {\r\n        //TODO: handle exception\r\n    }","title":"Java: how to add image references properly from a non-src folder","body":"<p>Ok thank you, I did some tests following your example (PicLabel is just my own helper class giving me back a formatted JLabel with a pic and a frame in it):</p>\n<p>when I create a folder &quot;picccs&quot; under src, I can access a resource pic there (b.png). But the question still is - is it also possible to have it in the pics folder (see screenshot above) beside src, where a.png is in? (there I get null as URL):</p>\n<pre><code>try {\n    URL in_b = Gui.class.getResource(&quot;/picccs/b.png&quot;);  \n    URL in_a = Gui.class.getResource(&quot;/pics/a.png&quot;);  \n} catch (Exception e) {\n    //TODO: handle exception\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20544579,"reputation":59,"user_id":16201706,"display_name":"Robert McKay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659582428,"creation_date":1659038348,"answer_id":73158559,"question_id":73156291,"body_markdown":"I like to put the .png files in the resources folder and then load them with `getResource` as already mentioned. The project structure should use the standard Maven/Gradle configuration:\r\n\r\n    -- root/\r\n      -- app/\r\n        -- src/\r\n          -- main/\r\n            -- java/\r\n              -- my.package.name/ (java files go here)\r\n            -- resources/\r\n              -- image/ (image files go here)\r\n\r\nwhen the project builds, the contents of the `resources` directory will get added to the classpath and become available for loading.\r\n\r\nPersonally, I like to create a java class that implements the `singleton` pattern so I can reference the images multiple times but they only get loaded once (expensive operation). Lets assume I have three images, image_one.png, image_two.png, image_three.png, in the `resources/image` folder that I plan to use with `JLabel` objects. Then my class might look like this:\r\n\r\n    public class ImageLib {\r\n\r\n        // single reference to ImageLib\r\n        private ImageLib INSTANCE;\r\n    \r\n        // member for each image I want to use\r\n        private ImageIcon imageOne;\r\n        private ImageIcon imageTwo;\r\n        private ImageIcon imageThree;\r\n    \r\n        // private constructor for singleton pattern\r\n        private ImageLib() {\r\n            imageOne = loadImageIcon(&quot;image/image_one.png&quot;\r\n            imageTwo = loadImageIcon(&quot;image/image_two.png&quot;\r\n            imageThree = loadImageIcon(&quot;image/image_three.png&quot;\r\n        }\r\n\r\n        // static method to get the single instance\r\n        public static ImageLib getInstance() {\r\n            if (Objects.isNull(INSTANCE) {\r\n                INSTANCE = new ImageLib();\r\n            }\r\n            return INSTANCE;\r\n        }\r\n\r\n        public ImageIcon getImageOne() {\r\n            return imageOne;\r\n        }\r\n    \r\n        public ImageIcon getImageTwo() {\r\n            return imageTwo;\r\n        }\r\n    \r\n        public ImageIcon getImageThree() {\r\n            return imageThree;\r\n        }\r\n    \r\n        // helper method to load .png into ImageIcon\r\n        private ImageIcon loadImageIcon(String path) throws RuntimeException {\r\n            try {\r\n                URL url = getClass().getClassLoader().getResource(path);\r\n                return new ImageIcon(url);\r\n            } catch (NullPointerException e) {\r\n                throw new RuntimeException(String.format(&quot;Failed to load image: %s&quot;, path));\r\n            }\r\n        {\r\n    }\r\n\r\nNow we can get the .png as an `ImageIcon` from the `ImageLib` class multiple times, but it will only load once. For example, we can create multiple `JLabel` objects and set the icon:\r\n\r\n    ImageLib images = ImageLib.getInstance();\r\n    \r\n    JLabel labelOne = new JLabel(&quot;some message&quot;);\r\n    labelOne.setIcon(images.getImageOne());\r\n    \r\n    JLabel labelTwo = new JLabel(&quot;some message&quot;);\r\n    labelTwo.setIcon(images.getImageOne());","title":"Java: how to add image references properly from a non-src folder","body":"<p>I like to put the .png files in the resources folder and then load them with <code>getResource</code> as already mentioned. The project structure should use the standard Maven/Gradle configuration:</p>\n<pre><code>-- root/\n  -- app/\n    -- src/\n      -- main/\n        -- java/\n          -- my.package.name/ (java files go here)\n        -- resources/\n          -- image/ (image files go here)\n</code></pre>\n<p>when the project builds, the contents of the <code>resources</code> directory will get added to the classpath and become available for loading.</p>\n<p>Personally, I like to create a java class that implements the <code>singleton</code> pattern so I can reference the images multiple times but they only get loaded once (expensive operation). Lets assume I have three images, image_one.png, image_two.png, image_three.png, in the <code>resources/image</code> folder that I plan to use with <code>JLabel</code> objects. Then my class might look like this:</p>\n<pre><code>public class ImageLib {\n\n    // single reference to ImageLib\n    private ImageLib INSTANCE;\n\n    // member for each image I want to use\n    private ImageIcon imageOne;\n    private ImageIcon imageTwo;\n    private ImageIcon imageThree;\n\n    // private constructor for singleton pattern\n    private ImageLib() {\n        imageOne = loadImageIcon(&quot;image/image_one.png&quot;\n        imageTwo = loadImageIcon(&quot;image/image_two.png&quot;\n        imageThree = loadImageIcon(&quot;image/image_three.png&quot;\n    }\n\n    // static method to get the single instance\n    public static ImageLib getInstance() {\n        if (Objects.isNull(INSTANCE) {\n            INSTANCE = new ImageLib();\n        }\n        return INSTANCE;\n    }\n\n    public ImageIcon getImageOne() {\n        return imageOne;\n    }\n\n    public ImageIcon getImageTwo() {\n        return imageTwo;\n    }\n\n    public ImageIcon getImageThree() {\n        return imageThree;\n    }\n\n    // helper method to load .png into ImageIcon\n    private ImageIcon loadImageIcon(String path) throws RuntimeException {\n        try {\n            URL url = getClass().getClassLoader().getResource(path);\n            return new ImageIcon(url);\n        } catch (NullPointerException e) {\n            throw new RuntimeException(String.format(&quot;Failed to load image: %s&quot;, path));\n        }\n    {\n}\n</code></pre>\n<p>Now we can get the .png as an <code>ImageIcon</code> from the <code>ImageLib</code> class multiple times, but it will only load once. For example, we can create multiple <code>JLabel</code> objects and set the icon:</p>\n<pre><code>ImageLib images = ImageLib.getInstance();\n\nJLabel labelOne = new JLabel(&quot;some message&quot;);\nlabelOne.setIcon(images.getImageOne());\n\nJLabel labelTwo = new JLabel(&quot;some message&quot;);\nlabelTwo.setIcon(images.getImageOne());\n</code></pre>\n"}],"owner":{"account_id":25916637,"reputation":1,"user_id":19639941,"display_name":"cp."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":300,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73156489,"answer_count":3,"score":0,"last_activity_date":1659582428,"creation_date":1659026227,"question_id":73156291,"body_markdown":"it&#39;s again about VSCode and Java (I start learning it). I have a little test program that loads images and works fine when started in the VSCode IDE. I have also seen here that I must somehow load the pics from a &quot;classpath&quot; - so I added a classpath for the &quot;pics&quot; folder shown in the screenshot. \r\n\r\nI see that the pics are loaded into the jar, but they are not found at runtime (maybe because of the sub-folder or because they are not in src - but I want to have them in a separate folder of course). See the source code also in the screenshot - how should I do better to have the jar working, but also can test the code in the IDE? At the moment i do like this:\r\n\r\n    PicLabel pl1 = new PicLabel(new File(\r\n                    &quot;./pics/Screenshot from 2022-07-20 15-40-16.png&quot;));\r\n\r\n[my folder setup][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Izthp.png\r\n","title":"Java: how to add image references properly from a non-src folder","body":"<p>it's again about VSCode and Java (I start learning it). I have a little test program that loads images and works fine when started in the VSCode IDE. I have also seen here that I must somehow load the pics from a &quot;classpath&quot; - so I added a classpath for the &quot;pics&quot; folder shown in the screenshot.</p>\n<p>I see that the pics are loaded into the jar, but they are not found at runtime (maybe because of the sub-folder or because they are not in src - but I want to have them in a separate folder of course). See the source code also in the screenshot - how should I do better to have the jar working, but also can test the code in the IDE? At the moment i do like this:</p>\n<pre><code>PicLabel pl1 = new PicLabel(new File(\n                &quot;./pics/Screenshot from 2022-07-20 15-40-16.png&quot;));\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/Izthp.png\" rel=\"nofollow noreferrer\">my folder setup</a></p>\n"},{"tags":["java","ssl","sslengine"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1528849979,"post_id":50826957,"comment_id":88659699,"body_markdown":"You&#39;re taking too much for granted here. NEED_UNWRAP means you should do an `unwrap()`. If *that* causes BUFFER_UNDERFLOW, do a read. Similarly for NEED_WRAP `wrap()`, and BUFFER_OVERFLOW and `write().","body":"You&#39;re taking too much for granted here. NEED_UNWRAP means you should do an <code>unwrap()</code>. If <i>that</i> causes BUFFER_UNDERFLOW, do a read. Similarly for NEED_WRAP <code>wrap()</code>, and BUFFER_OVERFLOW and `write()."},{"owner":{"account_id":3307515,"reputation":3376,"user_id":2781862,"accept_rate":80,"display_name":"Emil Borconi"},"score":0,"creation_date":1528889487,"post_id":50826957,"comment_id":88675948,"body_markdown":"@EJP - Thanks but this confuses me even more. After my wrap, the states gets into need_unwarp. I don&#39;t get to overflow state at all, if I don&#39;t do a write, how will the other party ever get the data? Also for unwrap, do of unwrap for nothing? I will certainly try but I&#39;m not sure I follow the logic. Also reading NEED_UNWRAP documentation, clearly says that you need to read data from your input.","body":"@EJP - Thanks but this confuses me even more. After my wrap, the states gets into need_unwarp. I don&#39;t get to overflow state at all, if I don&#39;t do a write, how will the other party ever get the data? Also for unwrap, do of unwrap for nothing? I will certainly try but I&#39;m not sure I follow the logic. Also reading NEED_UNWRAP documentation, clearly says that you need to read data from your input."},{"owner":{"account_id":3307515,"reputation":3376,"user_id":2781862,"accept_rate":80,"display_name":"Emil Borconi"},"score":0,"creation_date":1528897675,"post_id":50826957,"comment_id":88681504,"body_markdown":"@EJP  - Doing unwrap without data results in TLS parse error and I never get to the overflow situation either. Also looking at Oracle docs, they also say that we should do read in unwarp and write in wrap ( https://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html#OperationStatus )","body":"@EJP  - Doing unwrap without data results in TLS parse error and I never get to the overflow situation either. Also looking at Oracle docs, they also say that we should do read in unwarp and write in wrap ( <a href=\"https://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html#OperationStatus\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/6/docs/technotes/guides/security/jsse&zwnj;&#8203;/&hellip;</a> )"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1528935713,"post_id":50826957,"comment_id":88699280,"body_markdown":"Doing `unwrap()` without data results in BUFFER_UNDERFLOW, whereupon you do the read, as I said, and then of course repeat the unwrap. But if you&#39;re using a buggy `SSLEngine` all bets are off.","body":"Doing <code>unwrap()</code> without data results in BUFFER_UNDERFLOW, whereupon you do the read, as I said, and then of course repeat the unwrap. But if you&#39;re using a buggy <code>SSLEngine</code> all bets are off."}],"answers":[{"tags":[],"owner":{"account_id":3307515,"reputation":3376,"user_id":2781862,"accept_rate":80,"display_name":"Emil Borconi"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1528930482,"creation_date":1528930482,"answer_id":50847411,"question_id":50826957,"body_markdown":"After 2 days of chasing my own tale, I have finally found the problem as described here: https://github.com/netty/netty/issues/5975 \r\n\r\n\r\n&gt; I found that our stream-based wrapper around SSLEngine doesn&#39;t read\r\n&gt; all incoming data from the SSLEngine when there is no new incoming\r\n&gt; data from the network, so the application gets stuck waiting for\r\n&gt; incoming data. After some debugging I found out that with netty&#39;s\r\n&gt; openssl SSLEngine unwrap seems to produce plain text data in smaller\r\n&gt; chunks (probably single TLS frames) and keeps buffering the rest of\r\n&gt; the data internally. The src buffer is fully consumed but calling\r\n&gt; unwrap again with an empty src buffer will still produce more data.\r\n&gt; This differs from what the JDK SSLEngine does in two points:\r\n&gt; \r\n&gt; * the JDK SSLEngine consumes and produces as much data as possible in one go while the openssl one produces less output in one call\r\n&gt; * the JDK SSLEngine doesn&#39;t buffer encrypted data internally between calls to unwrap but &quot;puts them back&quot; into the src buffer\r\n\r\nSo even my code was &quot;correct&quot; I needed to do multiple loops so now my unwrap codes looks something like this:\r\n\r\n    peerNetData.put(buffer,6,readdata-6);\r\n                    Log.d(TAG,&quot;before data flipped...&quot;);\r\n                    peerNetData.flip();\r\n                    Log.d(TAG,&quot;data flipped...&quot;);\r\n                    try {\r\n                        do {\r\n                        result = engine.unwrap(peerNetData, peerAppData);\r\n                        Log.d(TAG,&quot;data unwrapped...&quot;);\r\n                        Log.d(TAG,&quot;Handskes is: &quot; + result.getHandshakeStatus().toString() +&quot; Current Status: &quot; +result.getStatus() + &quot; Bytes consumed: &quot; + result.bytesConsumed() + &quot; bytes produce: &quot; + result.bytesProduced());\r\n                        } while (peerNetData.hasRemaining() || result.bytesProduced()&gt;0);\r\n                        peerNetData.compact();\r\n    \r\n    \r\n                        Log.d(TAG,&quot;data compacted...&quot;);\r\n                        handshakeStatus = result.getHandshakeStatus();\r\n                        Log.d(TAG,&quot;Handshake status: &quot; + handshakeStatus);\r\n                        .....................................................","title":"SSLEngine Handshake stuck at second loop","body":"<p>After 2 days of chasing my own tale, I have finally found the problem as described here: <a href=\"https://github.com/netty/netty/issues/5975\" rel=\"nofollow noreferrer\">https://github.com/netty/netty/issues/5975</a> </p>\n\n<blockquote>\n  <p>I found that our stream-based wrapper around SSLEngine doesn't read\n  all incoming data from the SSLEngine when there is no new incoming\n  data from the network, so the application gets stuck waiting for\n  incoming data. After some debugging I found out that with netty's\n  openssl SSLEngine unwrap seems to produce plain text data in smaller\n  chunks (probably single TLS frames) and keeps buffering the rest of\n  the data internally. The src buffer is fully consumed but calling\n  unwrap again with an empty src buffer will still produce more data.\n  This differs from what the JDK SSLEngine does in two points:</p>\n  \n  <ul>\n  <li>the JDK SSLEngine consumes and produces as much data as possible in one go while the openssl one produces less output in one call</li>\n  <li>the JDK SSLEngine doesn't buffer encrypted data internally between calls to unwrap but \"puts them back\" into the src buffer</li>\n  </ul>\n</blockquote>\n\n<p>So even my code was \"correct\" I needed to do multiple loops so now my unwrap codes looks something like this:</p>\n\n<pre><code>peerNetData.put(buffer,6,readdata-6);\n                Log.d(TAG,\"before data flipped...\");\n                peerNetData.flip();\n                Log.d(TAG,\"data flipped...\");\n                try {\n                    do {\n                    result = engine.unwrap(peerNetData, peerAppData);\n                    Log.d(TAG,\"data unwrapped...\");\n                    Log.d(TAG,\"Handskes is: \" + result.getHandshakeStatus().toString() +\" Current Status: \" +result.getStatus() + \" Bytes consumed: \" + result.bytesConsumed() + \" bytes produce: \" + result.bytesProduced());\n                    } while (peerNetData.hasRemaining() || result.bytesProduced()&gt;0);\n                    peerNetData.compact();\n\n\n                    Log.d(TAG,\"data compacted...\");\n                    handshakeStatus = result.getHandshakeStatus();\n                    Log.d(TAG,\"Handshake status: \" + handshakeStatus);\n                    .....................................................\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4344705,"reputation":324,"user_id":3547021,"display_name":"dclaudiud"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647557009,"creation_date":1647557009,"answer_id":71519896,"question_id":50826957,"body_markdown":"This helped me\r\n\r\n     do {\r\n                            result = engine.unwrap(peerNetData, peerAppData);\r\n                            System.out.println(&quot;data unwrapped...&quot;);\r\n                            System.out.println(&quot;Handskes is: &quot; + result.getHandshakeStatus().toString() +&quot; Current Status: &quot; +result.getStatus() + &quot; Bytes consumed: &quot; + result.bytesConsumed() + &quot; bytes produce: &quot; + result.bytesProduced());\r\n\r\n                            if(result.getHandshakeStatus() == SSLEngineResult.HandshakeStatus.NEED_TASK){\r\n                                Runnable task;\r\n                                while ((task = engine.getDelegatedTask()) != null) {\r\n                                    task.run();\r\n                                }\r\n                                handshakeStatus = engine.getHandshakeStatus();\r\n                            }\r\n                        } while (result.bytesProduced()&gt;0 || peerNetData.hasRemaining());\r\n\r\nOutput:\r\n\r\n```\r\ndata unwrapped...\r\nHandskes is: NEED_TASK Current Status: OK Bytes consumed: 267 bytes produce: 0\r\ndata unwrapped...\r\nHandskes is: NEED_UNWRAP Current Status: OK Bytes consumed: 6 bytes produce: 0\r\ndata unwrapped...\r\nHandskes is: NEED_WRAP Current Status: OK Bytes consumed: 45 bytes produce: 0\r\nOK\r\n```\r\n\r\nI guess it needed to do some processiing between the unwraps ","title":"SSLEngine Handshake stuck at second loop","body":"<p>This helped me</p>\n<pre><code> do {\n                        result = engine.unwrap(peerNetData, peerAppData);\n                        System.out.println(&quot;data unwrapped...&quot;);\n                        System.out.println(&quot;Handskes is: &quot; + result.getHandshakeStatus().toString() +&quot; Current Status: &quot; +result.getStatus() + &quot; Bytes consumed: &quot; + result.bytesConsumed() + &quot; bytes produce: &quot; + result.bytesProduced());\n\n                        if(result.getHandshakeStatus() == SSLEngineResult.HandshakeStatus.NEED_TASK){\n                            Runnable task;\n                            while ((task = engine.getDelegatedTask()) != null) {\n                                task.run();\n                            }\n                            handshakeStatus = engine.getHandshakeStatus();\n                        }\n                    } while (result.bytesProduced()&gt;0 || peerNetData.hasRemaining());\n</code></pre>\n<p>Output:</p>\n<pre><code>data unwrapped...\nHandskes is: NEED_TASK Current Status: OK Bytes consumed: 267 bytes produce: 0\ndata unwrapped...\nHandskes is: NEED_UNWRAP Current Status: OK Bytes consumed: 6 bytes produce: 0\ndata unwrapped...\nHandskes is: NEED_WRAP Current Status: OK Bytes consumed: 45 bytes produce: 0\nOK\n</code></pre>\n<p>I guess it needed to do some processiing between the unwraps</p>\n"}],"owner":{"account_id":3307515,"reputation":3376,"user_id":2781862,"accept_rate":80,"display_name":"Emil Borconi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2089,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":50847411,"answer_count":2,"score":2,"last_activity_date":1659582211,"creation_date":1528844261,"question_id":50826957,"body_markdown":"I&#39;m trying to implement an SSL Handshake using SSLEngine, I need to do it both ways as a sever and as a client as well, however I&#39;m stuck and I cannot figure it out why. \r\n\r\nThe handshake starts correctly, the Hello&#39;s are exchanged, the keys are exchanged, but then I&#39;m getting into a NEED_UNWRAP state. \r\n\r\nHere is the handshake code I&#39;m using:\r\n\r\n        protected boolean doHandshake(InputStream inputStream, OutputStream outputStream, SSLEngine engine, Socket socket) throws IOException {\r\n\r\n        Log.d(TAG,&quot;About to do handshake...&quot;);\r\n        Log.d(TAG,engine.getHandshakeStatus().toString());\r\n        int dataSize;\r\n        SSLEngineResult result;\r\n        Log.d(TAG,&quot;Line 1&quot;);\r\n        HandshakeStatus handshakeStatus;\r\n        Log.d(TAG,&quot;Line 2&quot;);\r\n        // NioSslPeer&#39;s fields myAppData and peerAppData are supposed to be large enough to hold all message data the peer\r\n        // will send and expects to receive from the other peer respectively. Since the messages to be exchanged will usually be less\r\n        // than 16KB long the capacity of these fields should also be smaller. Here we initialize these two local buffers\r\n        // to be used for the handshake, while keeping client&#39;s buffers at the same size.\r\n\r\n        if (socket!=null)\r\n        {\r\n            inputStream=socket.getInputStream();\r\n            outputStream=socket.getOutputStream();\r\n        }\r\n        Log.d(TAG,&quot;Line 3&quot;);\r\n        int appBufferSize = engine.getSession().getApplicationBufferSize();\r\n        Log.d(TAG,&quot;Line 4&quot;);\r\n        ByteBuffer myAppData = ByteBuffer.allocate(appBufferSize);\r\n        Log.d(TAG,&quot;Line 5&quot;);\r\n        ByteBuffer peerAppData = ByteBuffer.allocate(appBufferSize);\r\n        Log.d(TAG,&quot;Line 6&quot;);\r\n        try {\r\n            myNetData.clear();\r\n            peerNetData.clear();\r\n        }\r\n        catch (Exception e){Log.e(TAG,e.getMessage());}\r\n        Log.d(TAG,&quot;Line 7&quot;);\r\n\r\n        Log.d(TAG,&quot;Line 8&quot;);\r\n        handshakeStatus = engine.getHandshakeStatus();\r\n        Log.d(TAG,&quot;Line 9&quot;);\r\n        Log.d(TAG,&quot;Before the while: &quot; + (handshakeStatus != SSLEngineResult.HandshakeStatus.FINISHED &amp;&amp; handshakeStatus != SSLEngineResult.HandshakeStatus.NOT_HANDSHAKING));\r\n\r\n        byte[] buffer=new byte[16384];\r\n        while (handshakeStatus != SSLEngineResult.HandshakeStatus.FINISHED &amp;&amp; handshakeStatus != SSLEngineResult.HandshakeStatus.NOT_HANDSHAKING) {\r\n            Log.d(TAG,handshakeStatus.toString());\r\n            switch (handshakeStatus) {\r\n            case NEED_UNWRAP:\r\n                Log.d(TAG,&quot;Got here...&quot;);\r\n                buffer=new byte[16384];\r\n                peerAppData.clear();\r\n                int readdata=inputStream.read(buffer);\r\n                Log.d(TAG,&quot;Read data amount: &quot; + readdata);\r\n                if ( readdata &lt; 0) {\r\n                    Log.d(TAG,&quot;No data....&quot;);\r\n                    if (engine.isInboundDone() &amp;&amp; engine.isOutboundDone()) {\r\n                        return false;\r\n                    }\r\n                    try {\r\n                        engine.closeInbound();\r\n                    } catch (SSLException e) {\r\n                        Log.e(TAG,&quot;This engine was forced to close inbound, without having received the proper SSL/TLS close notification message from the peer, due to end of stream.&quot;);\r\n                    }\r\n                    engine.closeOutbound();\r\n                    // After closeOutbound the engine will be set to WRAP state, in order to try to send a close message to the client.\r\n                    handshakeStatus = engine.getHandshakeStatus();\r\n                    break;\r\n                }\r\n               HackerService.bytesToHex(buffer);\r\n\r\n                peerNetData.put(buffer,6,readdata-6);\r\n                Log.d(TAG,&quot;before data flipped...&quot;);\r\n                peerNetData.flip();\r\n                Log.d(TAG,&quot;data flipped...&quot;);\r\n                try {\r\n                    result = engine.unwrap(peerNetData, peerAppData);\r\n                    Log.d(TAG,&quot;data unwrapped...&quot;);\r\n                    peerNetData.compact();\r\n\r\n                    Log.d(TAG,&quot;data compacted...&quot;);\r\n                    handshakeStatus = result.getHandshakeStatus();\r\n                    Log.d(TAG,&quot;Handshake status: &quot; + handshakeStatus);\r\n                } catch (SSLException sslException) {\r\n                    Log.e(TAG,&quot;A problem was encountered while processing the data that caused the SSLEngine to abort. Will try to properly close connection...&quot; + sslException.getMessage());\r\n                    engine.closeOutbound();\r\n                    handshakeStatus = engine.getHandshakeStatus();\r\n                    break;\r\n                }\r\n                switch (result.getStatus()) {\r\n                case OK:\r\n                    break;\r\n                case BUFFER_OVERFLOW:\r\n                    // Will occur when peerAppData&#39;s capacity is smaller than the data derived from peerNetData&#39;s unwrap.\r\n                    peerAppData = enlargeApplicationBuffer(engine, peerAppData);\r\n                    break;\r\n                case BUFFER_UNDERFLOW:\r\n                    // Will occur either when no data was read from the peer or when the peerNetData buffer was too small to hold all peer&#39;s data.\r\n                    peerNetData = handleBufferUnderflow(engine, peerNetData);\r\n                    break;\r\n                case CLOSED:\r\n                    if (engine.isOutboundDone()) {\r\n                        return false;\r\n                    } else {\r\n                        engine.closeOutbound();\r\n                        handshakeStatus = engine.getHandshakeStatus();\r\n                        break;\r\n                    }\r\n                default:\r\n                    throw new IllegalStateException(&quot;Invalid SSL status: &quot; + result.getStatus());\r\n                }\r\n                break;\r\n            case NEED_WRAP:\r\n                myNetData.clear();\r\n                Log.d(TAG,&quot;Enetering need wrap&quot;);\r\n                try {\r\n                    result = engine.wrap(myAppData, myNetData);\r\n                    Log.d(TAG,&quot;Got a result&quot; + myAppData.toString());\r\n                    handshakeStatus = result.getHandshakeStatus();\r\n                    Log.d(TAG,&quot;Handskes is: &quot; + handshakeStatus.toString());\r\n\r\n                } catch (SSLException sslException) {\r\n                    Log.e(TAG,&quot;A problem was encountered while processing the data that caused the SSLEngine to abort. Will try to properly close connection...&quot;);\r\n                    engine.closeOutbound();\r\n                    handshakeStatus = engine.getHandshakeStatus();\r\n                    break;\r\n                }\r\n                switch (result.getStatus()) {\r\n                case OK :\r\n                    Log.d(TAG,&quot;Case WRAP, OK&quot;);\r\n                    myNetData.flip();\r\n\r\n                 //  while (myNetData.hasRemaining()) {\r\n                        byte[] arr = new byte[myNetData.remaining()+6];\r\n                        myNetData.get(arr,6,myNetData.remaining());\r\n                        arr[0]=0;\r\n                        arr[1]=3;\r\n                        arr[2]=(byte) ((arr.length-4)/256);\r\n                        arr[3]=(byte) ((arr.length-4)%256);\r\n                        arr[4]=buffer[4];\r\n                        arr[5]=buffer[5];\r\n                        HackerService.bytesToHex(arr);\r\n                        outputStream.write(arr);\r\n                   // }\r\n                    break;\r\n                case BUFFER_OVERFLOW:\r\n                    Log.d(TAG,&quot;Case WRAP,OverFlow&quot;);\r\n                    // Will occur if there is not enough space in myNetData buffer to write all the data that would be generated by the method wrap.\r\n                    // Since myNetData is set to session&#39;s packet size we should not get to this point because SSLEngine is supposed\r\n                    // to produce messages smaller or equal to that, but a general handling would be the following:\r\n                    myNetData = enlargePacketBuffer(engine, myNetData);\r\n                    break;\r\n                case BUFFER_UNDERFLOW:\r\n                    throw new SSLException(&quot;Buffer underflow occured after a wrap. I don&#39;t think we should ever get here.&quot;);\r\n                case CLOSED:\r\n                    try {\r\n                        Log.d(TAG,&quot;Before WRAP FLIP&quot;);\r\n                        myNetData.flip();\r\n                        Log.d(TAG,&quot;After WRAP FLIP&quot;);\r\n                        while (myNetData.hasRemaining()) {\r\n                            Log.d(TAG,myNetData.toString());\r\n                             arr = new byte[myNetData.remaining()];\r\n                            myNetData.get(arr);\r\n                            outputStream.write(arr);\r\n                        }\r\n                        // At this point the handshake status will probably be NEED_UNWRAP so we make sure that peerNetData is clear to read.\r\n                        peerNetData.clear();\r\n                    } catch (Exception e) {\r\n                        Log.e(TAG,&quot;Failed to send server&#39;s CLOSE message due to socket channel&#39;s failure.&quot;);\r\n                        handshakeStatus = engine.getHandshakeStatus();\r\n                    }\r\n                    break;\r\n                default:\r\n                    throw new IllegalStateException(&quot;Invalid SSL status: &quot; + result.getStatus());\r\n                }\r\n                break;\r\n            case NEED_TASK:\r\n                Log.d(TAG,&quot;Need task&quot;);\r\n                Runnable task;\r\n                while ((task = engine.getDelegatedTask()) != null) {\r\n                    executor.execute(task);\r\n                }\r\n                handshakeStatus = engine.getHandshakeStatus();\r\n                break;\r\n            case FINISHED:\r\n                break;\r\n            case NOT_HANDSHAKING:\r\n                break;\r\n            default:\r\n                throw new IllegalStateException(&quot;Invalid SSL status: &quot; + handshakeStatus);\r\n            }\r\n        }\r\n        Log.d(TAG,&quot;Handshake completed&quot;);\r\n        return true;\r\n\r\n    }\r\n\r\nThis is my SSLEngine creating class:\r\n\r\n    public static SSLEngine Builder(Context context) throws KeyStoreException, CertificateException, NoSuchAlgorithmException, IOException, UnrecoverableKeyException, KeyManagementException {\r\n            InputStream openRawResource = context.getResources().openRawResource(context.getResources().getIdentifier(&quot;mykey&quot;, &quot;raw&quot;, context.getPackageName()));\r\n            KeyStore instance = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n            instance.load(openRawResource, &quot;passcode&quot;.toCharArray());\r\n            KeyManagerFactory instance2 = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\r\n            instance2.init(instance, &quot;passcode&quot;.toCharArray());\r\n            SSLContext instance3 = SSLContext.getInstance(&quot;TLSv1.2&quot;);\r\n            instance3.init(instance2.getKeyManagers(), new TrustManager[]{new TrustmanagerHelper()}, new SecureRandom());\r\n            SSLEngine createSSLEngine = instance3.createSSLEngine();\r\n            createSSLEngine.setNeedClientAuth(true);\r\n            return createSSLEngine;\r\n    \r\n        }\r\n\r\nWhen I&#39;m attempting a handshake as a client. As you can see from the logs, I start in NEED_WRAP, send data to server, states gets to NEED_UNWRAP (which is correct) server responds, I parse the answer without any error, but instead of advancing to NEED_WRAP I get stuck in NEED_UNWRAP...\r\n\r\n    About to do handshake...\r\n    NEED_WRAP\r\n    Line 1\r\n    Line 2\r\n    Line 4\r\n    Line 5\r\n    Line 6\r\n    Line 7\r\n    Line 8\r\n    Line 9\r\n    Before the while: true\r\n    NEED_WRAP\r\n    Enetering need wrap\r\n    Got a resultjava.nio.HeapByteBuffer[pos=0 lim=16384 cap=16384]\r\n    Handskes is: NEED_UNWRAP\r\n    Case WRAP, OK\r\n    ByteTohex: 00030088000316030100810100007D03030E62BFCFF988.......\r\n    NEED_UNWRAP\r\n    Got here...\r\n    Read data amount: 2296   (THIS MATCHES THE NUMBER OF BYTES SENT BY THE SERVER!!!!)\r\n    ByteTohex: 000308F40003160303005B0200005703035B203DA285349B7C88A76CA6AA3.....\r\n    before data flipped...\r\n    data flipped...\r\n    data unwrapped...\r\n    data compacted...\r\n    Handshake status: NEED_UNWRAP\r\n    NEED_UNWRAP\r\n    Got here...\r\n\r\n\r\n\r\nIf I try to do the handshake as a server, logs looks like this. As you can see from the logs, the first read is fine, I respond to the client, I get the second bit of data from the client, and instead of having a NEED_WRAP and being able to carry on with the handshake I&#39;m hit with a NEED_UNWRAP message, but of course there is no more data to be read from the client....\r\n\r\n        About to do handshake...\r\n        NEED_UNWRAP\r\n        Line 1\r\n        Line 2\r\n        Line 3\r\n        Line 4\r\n        Line 5\r\n        Line 6\r\n        Line 7\r\n        Line 8\r\n        Line 9\r\n        Before the while: true\r\n        NEED_UNWRAP\r\n        Got here...\r\n    06-12 23:42:14.017 7523-7620/uk.co.borconi,emil.myapp D/MyApp: Read data amount: 297\r\n    06-12 23:42:14.020 7523-7620/uk.co.borconi,emil.myapp D/MyApp: ByteTohex: 00030125000316....\r\n        before data flipped...\r\n        data flipped...\r\n    06-12 23:42:14.029 7523-7620/uk.co.borconi,emil.myapp D/MyApp: data unwrapped...\r\n        data compacted...\r\n        Handshake status: NEED_WRAP\r\n        NEED_WRAP\r\n        Enetering need wrap\r\n        Got a resultjava.nio.HeapByteBuffer[pos=0 lim=16384 cap=16384]\r\n        Handskes is: NEED_UNWRAP\r\n        Case WRAP, OK\r\n    06-12 23:42:14.030 7523-7620/uk.co.borconi,emil.myapp D/MyApp: ByteTohex: 00030881000316.....\r\n        NEED_UNWRAP\r\n        Got here...\r\n    06-12 23:42:14.038 7523-7620/uk.co.borconi,emil.myapp D/MyApp: Read data amount: 132\r\n    06-12 23:42:14.039 7523-7620/uk.co.borconi,emil.myapp D/MyApp: ByteTohex: 00030080000316....\r\n        before data flipped...\r\n        data flipped...\r\n    06-12 23:42:14.040 7523-7620/uk.co.borconi,emil.myapp D/MyApp: data unwrapped...\r\n        data compacted...\r\n        Handshake status: NEED_UNWRAP\r\n        NEED_UNWRAP\r\n        Got here...\r\n\r\n\r\nI did had a look at some similar questions on StackOverflow before posting, but they were mainly about order being wrong, which I think I got right in this case... I&#39;m pretty sure I&#39;m missing the obvious, but I just cannot seem to figure it out...\r\n\r\n","title":"SSLEngine Handshake stuck at second loop","body":"<p>I'm trying to implement an SSL Handshake using SSLEngine, I need to do it both ways as a sever and as a client as well, however I'm stuck and I cannot figure it out why. </p>\n\n<p>The handshake starts correctly, the Hello's are exchanged, the keys are exchanged, but then I'm getting into a NEED_UNWRAP state. </p>\n\n<p>Here is the handshake code I'm using:</p>\n\n<pre><code>    protected boolean doHandshake(InputStream inputStream, OutputStream outputStream, SSLEngine engine, Socket socket) throws IOException {\n\n    Log.d(TAG,\"About to do handshake...\");\n    Log.d(TAG,engine.getHandshakeStatus().toString());\n    int dataSize;\n    SSLEngineResult result;\n    Log.d(TAG,\"Line 1\");\n    HandshakeStatus handshakeStatus;\n    Log.d(TAG,\"Line 2\");\n    // NioSslPeer's fields myAppData and peerAppData are supposed to be large enough to hold all message data the peer\n    // will send and expects to receive from the other peer respectively. Since the messages to be exchanged will usually be less\n    // than 16KB long the capacity of these fields should also be smaller. Here we initialize these two local buffers\n    // to be used for the handshake, while keeping client's buffers at the same size.\n\n    if (socket!=null)\n    {\n        inputStream=socket.getInputStream();\n        outputStream=socket.getOutputStream();\n    }\n    Log.d(TAG,\"Line 3\");\n    int appBufferSize = engine.getSession().getApplicationBufferSize();\n    Log.d(TAG,\"Line 4\");\n    ByteBuffer myAppData = ByteBuffer.allocate(appBufferSize);\n    Log.d(TAG,\"Line 5\");\n    ByteBuffer peerAppData = ByteBuffer.allocate(appBufferSize);\n    Log.d(TAG,\"Line 6\");\n    try {\n        myNetData.clear();\n        peerNetData.clear();\n    }\n    catch (Exception e){Log.e(TAG,e.getMessage());}\n    Log.d(TAG,\"Line 7\");\n\n    Log.d(TAG,\"Line 8\");\n    handshakeStatus = engine.getHandshakeStatus();\n    Log.d(TAG,\"Line 9\");\n    Log.d(TAG,\"Before the while: \" + (handshakeStatus != SSLEngineResult.HandshakeStatus.FINISHED &amp;&amp; handshakeStatus != SSLEngineResult.HandshakeStatus.NOT_HANDSHAKING));\n\n    byte[] buffer=new byte[16384];\n    while (handshakeStatus != SSLEngineResult.HandshakeStatus.FINISHED &amp;&amp; handshakeStatus != SSLEngineResult.HandshakeStatus.NOT_HANDSHAKING) {\n        Log.d(TAG,handshakeStatus.toString());\n        switch (handshakeStatus) {\n        case NEED_UNWRAP:\n            Log.d(TAG,\"Got here...\");\n            buffer=new byte[16384];\n            peerAppData.clear();\n            int readdata=inputStream.read(buffer);\n            Log.d(TAG,\"Read data amount: \" + readdata);\n            if ( readdata &lt; 0) {\n                Log.d(TAG,\"No data....\");\n                if (engine.isInboundDone() &amp;&amp; engine.isOutboundDone()) {\n                    return false;\n                }\n                try {\n                    engine.closeInbound();\n                } catch (SSLException e) {\n                    Log.e(TAG,\"This engine was forced to close inbound, without having received the proper SSL/TLS close notification message from the peer, due to end of stream.\");\n                }\n                engine.closeOutbound();\n                // After closeOutbound the engine will be set to WRAP state, in order to try to send a close message to the client.\n                handshakeStatus = engine.getHandshakeStatus();\n                break;\n            }\n           HackerService.bytesToHex(buffer);\n\n            peerNetData.put(buffer,6,readdata-6);\n            Log.d(TAG,\"before data flipped...\");\n            peerNetData.flip();\n            Log.d(TAG,\"data flipped...\");\n            try {\n                result = engine.unwrap(peerNetData, peerAppData);\n                Log.d(TAG,\"data unwrapped...\");\n                peerNetData.compact();\n\n                Log.d(TAG,\"data compacted...\");\n                handshakeStatus = result.getHandshakeStatus();\n                Log.d(TAG,\"Handshake status: \" + handshakeStatus);\n            } catch (SSLException sslException) {\n                Log.e(TAG,\"A problem was encountered while processing the data that caused the SSLEngine to abort. Will try to properly close connection...\" + sslException.getMessage());\n                engine.closeOutbound();\n                handshakeStatus = engine.getHandshakeStatus();\n                break;\n            }\n            switch (result.getStatus()) {\n            case OK:\n                break;\n            case BUFFER_OVERFLOW:\n                // Will occur when peerAppData's capacity is smaller than the data derived from peerNetData's unwrap.\n                peerAppData = enlargeApplicationBuffer(engine, peerAppData);\n                break;\n            case BUFFER_UNDERFLOW:\n                // Will occur either when no data was read from the peer or when the peerNetData buffer was too small to hold all peer's data.\n                peerNetData = handleBufferUnderflow(engine, peerNetData);\n                break;\n            case CLOSED:\n                if (engine.isOutboundDone()) {\n                    return false;\n                } else {\n                    engine.closeOutbound();\n                    handshakeStatus = engine.getHandshakeStatus();\n                    break;\n                }\n            default:\n                throw new IllegalStateException(\"Invalid SSL status: \" + result.getStatus());\n            }\n            break;\n        case NEED_WRAP:\n            myNetData.clear();\n            Log.d(TAG,\"Enetering need wrap\");\n            try {\n                result = engine.wrap(myAppData, myNetData);\n                Log.d(TAG,\"Got a result\" + myAppData.toString());\n                handshakeStatus = result.getHandshakeStatus();\n                Log.d(TAG,\"Handskes is: \" + handshakeStatus.toString());\n\n            } catch (SSLException sslException) {\n                Log.e(TAG,\"A problem was encountered while processing the data that caused the SSLEngine to abort. Will try to properly close connection...\");\n                engine.closeOutbound();\n                handshakeStatus = engine.getHandshakeStatus();\n                break;\n            }\n            switch (result.getStatus()) {\n            case OK :\n                Log.d(TAG,\"Case WRAP, OK\");\n                myNetData.flip();\n\n             //  while (myNetData.hasRemaining()) {\n                    byte[] arr = new byte[myNetData.remaining()+6];\n                    myNetData.get(arr,6,myNetData.remaining());\n                    arr[0]=0;\n                    arr[1]=3;\n                    arr[2]=(byte) ((arr.length-4)/256);\n                    arr[3]=(byte) ((arr.length-4)%256);\n                    arr[4]=buffer[4];\n                    arr[5]=buffer[5];\n                    HackerService.bytesToHex(arr);\n                    outputStream.write(arr);\n               // }\n                break;\n            case BUFFER_OVERFLOW:\n                Log.d(TAG,\"Case WRAP,OverFlow\");\n                // Will occur if there is not enough space in myNetData buffer to write all the data that would be generated by the method wrap.\n                // Since myNetData is set to session's packet size we should not get to this point because SSLEngine is supposed\n                // to produce messages smaller or equal to that, but a general handling would be the following:\n                myNetData = enlargePacketBuffer(engine, myNetData);\n                break;\n            case BUFFER_UNDERFLOW:\n                throw new SSLException(\"Buffer underflow occured after a wrap. I don't think we should ever get here.\");\n            case CLOSED:\n                try {\n                    Log.d(TAG,\"Before WRAP FLIP\");\n                    myNetData.flip();\n                    Log.d(TAG,\"After WRAP FLIP\");\n                    while (myNetData.hasRemaining()) {\n                        Log.d(TAG,myNetData.toString());\n                         arr = new byte[myNetData.remaining()];\n                        myNetData.get(arr);\n                        outputStream.write(arr);\n                    }\n                    // At this point the handshake status will probably be NEED_UNWRAP so we make sure that peerNetData is clear to read.\n                    peerNetData.clear();\n                } catch (Exception e) {\n                    Log.e(TAG,\"Failed to send server's CLOSE message due to socket channel's failure.\");\n                    handshakeStatus = engine.getHandshakeStatus();\n                }\n                break;\n            default:\n                throw new IllegalStateException(\"Invalid SSL status: \" + result.getStatus());\n            }\n            break;\n        case NEED_TASK:\n            Log.d(TAG,\"Need task\");\n            Runnable task;\n            while ((task = engine.getDelegatedTask()) != null) {\n                executor.execute(task);\n            }\n            handshakeStatus = engine.getHandshakeStatus();\n            break;\n        case FINISHED:\n            break;\n        case NOT_HANDSHAKING:\n            break;\n        default:\n            throw new IllegalStateException(\"Invalid SSL status: \" + handshakeStatus);\n        }\n    }\n    Log.d(TAG,\"Handshake completed\");\n    return true;\n\n}\n</code></pre>\n\n<p>This is my SSLEngine creating class:</p>\n\n<pre><code>public static SSLEngine Builder(Context context) throws KeyStoreException, CertificateException, NoSuchAlgorithmException, IOException, UnrecoverableKeyException, KeyManagementException {\n        InputStream openRawResource = context.getResources().openRawResource(context.getResources().getIdentifier(\"mykey\", \"raw\", context.getPackageName()));\n        KeyStore instance = KeyStore.getInstance(\"PKCS12\");\n        instance.load(openRawResource, \"passcode\".toCharArray());\n        KeyManagerFactory instance2 = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\n        instance2.init(instance, \"passcode\".toCharArray());\n        SSLContext instance3 = SSLContext.getInstance(\"TLSv1.2\");\n        instance3.init(instance2.getKeyManagers(), new TrustManager[]{new TrustmanagerHelper()}, new SecureRandom());\n        SSLEngine createSSLEngine = instance3.createSSLEngine();\n        createSSLEngine.setNeedClientAuth(true);\n        return createSSLEngine;\n\n    }\n</code></pre>\n\n<p>When I'm attempting a handshake as a client. As you can see from the logs, I start in NEED_WRAP, send data to server, states gets to NEED_UNWRAP (which is correct) server responds, I parse the answer without any error, but instead of advancing to NEED_WRAP I get stuck in NEED_UNWRAP...</p>\n\n<pre><code>About to do handshake...\nNEED_WRAP\nLine 1\nLine 2\nLine 4\nLine 5\nLine 6\nLine 7\nLine 8\nLine 9\nBefore the while: true\nNEED_WRAP\nEnetering need wrap\nGot a resultjava.nio.HeapByteBuffer[pos=0 lim=16384 cap=16384]\nHandskes is: NEED_UNWRAP\nCase WRAP, OK\nByteTohex: 00030088000316030100810100007D03030E62BFCFF988.......\nNEED_UNWRAP\nGot here...\nRead data amount: 2296   (THIS MATCHES THE NUMBER OF BYTES SENT BY THE SERVER!!!!)\nByteTohex: 000308F40003160303005B0200005703035B203DA285349B7C88A76CA6AA3.....\nbefore data flipped...\ndata flipped...\ndata unwrapped...\ndata compacted...\nHandshake status: NEED_UNWRAP\nNEED_UNWRAP\nGot here...\n</code></pre>\n\n<p>If I try to do the handshake as a server, logs looks like this. As you can see from the logs, the first read is fine, I respond to the client, I get the second bit of data from the client, and instead of having a NEED_WRAP and being able to carry on with the handshake I'm hit with a NEED_UNWRAP message, but of course there is no more data to be read from the client....</p>\n\n<pre><code>    About to do handshake...\n    NEED_UNWRAP\n    Line 1\n    Line 2\n    Line 3\n    Line 4\n    Line 5\n    Line 6\n    Line 7\n    Line 8\n    Line 9\n    Before the while: true\n    NEED_UNWRAP\n    Got here...\n06-12 23:42:14.017 7523-7620/uk.co.borconi,emil.myapp D/MyApp: Read data amount: 297\n06-12 23:42:14.020 7523-7620/uk.co.borconi,emil.myapp D/MyApp: ByteTohex: 00030125000316....\n    before data flipped...\n    data flipped...\n06-12 23:42:14.029 7523-7620/uk.co.borconi,emil.myapp D/MyApp: data unwrapped...\n    data compacted...\n    Handshake status: NEED_WRAP\n    NEED_WRAP\n    Enetering need wrap\n    Got a resultjava.nio.HeapByteBuffer[pos=0 lim=16384 cap=16384]\n    Handskes is: NEED_UNWRAP\n    Case WRAP, OK\n06-12 23:42:14.030 7523-7620/uk.co.borconi,emil.myapp D/MyApp: ByteTohex: 00030881000316.....\n    NEED_UNWRAP\n    Got here...\n06-12 23:42:14.038 7523-7620/uk.co.borconi,emil.myapp D/MyApp: Read data amount: 132\n06-12 23:42:14.039 7523-7620/uk.co.borconi,emil.myapp D/MyApp: ByteTohex: 00030080000316....\n    before data flipped...\n    data flipped...\n06-12 23:42:14.040 7523-7620/uk.co.borconi,emil.myapp D/MyApp: data unwrapped...\n    data compacted...\n    Handshake status: NEED_UNWRAP\n    NEED_UNWRAP\n    Got here...\n</code></pre>\n\n<p>I did had a look at some similar questions on StackOverflow before posting, but they were mainly about order being wrong, which I think I got right in this case... I'm pretty sure I'm missing the obvious, but I just cannot seem to figure it out...</p>\n"},{"tags":["java","spring","spring-boot","config"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1659518872,"post_id":73219040,"comment_id":129311927,"body_markdown":"Why do you ask [the same question](https://stackoverflow.com/questions/73205906/logs-name-is-not-coming-properly-got-undefined-word-in-logs-name-of-spring) again as a different user!","body":"Why do you ask <a href=\"https://stackoverflow.com/questions/73205906/logs-name-is-not-coming-properly-got-undefined-word-in-logs-name-of-spring\">the same question</a> again as a different user!"},{"owner":{"account_id":2872559,"reputation":79,"user_id":2465532,"display_name":"ss-ss-v1"},"score":0,"creation_date":1659519154,"post_id":73219040,"comment_id":129312036,"body_markdown":"My Teammate is there, we two are working on same project. so may be he has not seen my question on SO, will ask him to not ask again. he was also eagerly looking for the solutions. thanks.","body":"My Teammate is there, we two are working on same project. so may be he has not seen my question on SO, will ask him to not ask again. he was also eagerly looking for the solutions. thanks."},{"owner":{"account_id":11610226,"reputation":428,"user_id":8504654,"display_name":"Rosso"},"score":1,"creation_date":1659520331,"post_id":73219040,"comment_id":129312477,"body_markdown":"Since your LOG_DIR is a relative path IntelliJ would write the _logs_ directroy into the working directory of your runconfiguration. By default this is either your IntelliJ project root directory or the module directory. Also, the filename seems to tell you the problem `param_dtlogname_IS_UNDEFINED`. When you specify the filename in the config you use the `${param_dtlogname}`, which seems to be undefined.","body":"Since your LOG_DIR is a relative path IntelliJ would write the <i>logs</i> directroy into the working directory of your runconfiguration. By default this is either your IntelliJ project root directory or the module directory. Also, the filename seems to tell you the problem <code>param_dtlogname_IS_UNDEFINED</code>. When you specify the filename in the config you use the <code>${param_dtlogname}</code>, which seems to be undefined."}],"owner":{"account_id":2872559,"reputation":79,"user_id":2465532,"display_name":"ss-ss-v1"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1659581776,"creation_date":1659517522,"question_id":73219040,"body_markdown":"In Spring Boot App with Gradle. \r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nBelow is my **application yml** file\r\n\r\n```\r\nserver:\r\n  tomcat:\r\n    connectionTimeout: 300000\r\nmanagement:\r\n  endpoint:\r\n    mappings:\r\n      enabled: true\r\nspring:\r\n  liquibase:\r\n    change-log: classpath:/db/changelog/db.changelog-master.xml\r\n  datasource:\r\n    driver-class-name: oracle.jdbc.driver.OracleDriver\r\n    hikari:\r\n      minimum-idle: 5\r\n      maximumPoolSize: 20\r\n      idleTimeout: 30000\r\n      maxLifetime: 2000000\r\n      connectionTimeout: 30000\r\n      poolName: data-pool\r\n  jpa:\r\n    hibernate:\r\n      use-new-id-generator-mappings: false\r\n      ddl-auto: none\r\n    database-platform: org.hibernate.dialect.Oracle12cDialect\r\n   \r\n```\r\n\r\nBelow is my **logback-spring.xml** file \r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE configuration&gt;\r\n&lt;configuration&gt;\r\n\r\n    &lt;springProperty scope=&quot;context&quot; name=&quot;app_name&quot; source=&quot;spring.application.name&quot;/&gt;\r\n    &lt;springProperty scope=&quot;context&quot; name=&quot;environment&quot; source=&quot;param_env&quot; defaultValue=&quot;default_env&quot;/&gt;\r\n    &lt;springProperty scope=&quot;context&quot; name=&quot;tenant&quot; source=&quot;param_tenant&quot; defaultValue=&quot;default_tenant&quot;/&gt;\r\n\r\n    &lt;property name=&quot;GENERIC_PATTERN&quot;\r\n              value=&quot;[%date{ISO8601}] [%p] [%t] [%c{2}] %4L | %m%n&quot;/&gt;\r\n    &lt;property name=&quot;CONSOLE_LOG_PATTERN&quot; value=&quot;$GENERIC_PATTERN&quot;/&gt;\r\n    &lt;property name=&quot;CHARSET&quot; value=&quot;UTF-8&quot;/&gt;\r\n\r\n    &lt;property name=&quot;LOG_DIR&quot;\r\n              value=&quot;logs/${envname:-${environment}}/${param_dtlogname:-${app_name}}&quot;/&gt;\r\n\r\n        &lt;appender name=&quot;API_FILE_APPENDER&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\r\n\r\n            &lt;file&gt;${LOG_DIR}/api-${param_dtlogname}-${HOSTNAME}.log&lt;/file&gt;\r\n            &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;\r\n                &lt;!-- daily rollover --&gt;\r\n                &lt;fileNamePattern&gt;\r\n                    ${LOG_DIR}/api-${param_dtlogname}-${HOSTNAME}.%d{yyyy-MM-dd}.%i.log\r\n                &lt;/fileNamePattern&gt;\r\n            &lt;/rollingPolicy&gt;\r\n        &lt;/appender&gt; \r\n        &lt;appender name=&quot;APPLICATION_FILE_APPENDER&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\r\n\r\n            &lt;file&gt;${LOG_DIR}/startup-${param_dtlogname}-${HOSTNAME}.log&lt;/file&gt;\r\n    \r\n        &lt;/appender&gt;\r\n    &lt;/springProfile&gt;\r\n&lt;/configuration&gt;\r\n```\r\n \r\nbelow is my **bootstrap.yml file**\r\n\r\n```\r\nspring:\r\n  application:\r\n    name: doctors-data\r\n\r\n```\r\n\r\n**I am facing 2 issues :**\r\n\r\n**1.** 1st Issue is when I see the logs that I got from my team mate, Logs has lot of **IS_UNDEFINED** word in it like below.  why am I getting **IS_UNDEFINED** word ?\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n**2.** 2nd Issue is I am not sure in intellij or my system where does these logs are getting generated ?, not able to find the location in my system.\r\n\r\nI believe the issue can be in ```name=&quot;app_name&quot; source=&quot;spring.application.name&quot;``` so may be I can try with ```${spring.application.name}``` but **major issue is I am not** able to see default location where logs are getting generated. once I see where do logs reside then I can try with ```${spring.application.name}``` currently I am not even able to verify the hit and trial approach.\r\n\r\nCan someone please guide me on above mentioned issues ?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/elmCD.png\r\n  [2]: https://i.stack.imgur.com/82IUw.png\r\n  [3]: https://i.stack.imgur.com/2KDw9.png","title":"Spring Logs are NOT named properly in Spring Boot App","body":"<p>In Spring Boot App with Gradle.</p>\n<p><a href=\"https://i.stack.imgur.com/82IUw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/82IUw.png\" alt=\"enter image description here\" /></a></p>\n<p>Below is my <strong>application yml</strong> file</p>\n<pre><code>server:\n  tomcat:\n    connectionTimeout: 300000\nmanagement:\n  endpoint:\n    mappings:\n      enabled: true\nspring:\n  liquibase:\n    change-log: classpath:/db/changelog/db.changelog-master.xml\n  datasource:\n    driver-class-name: oracle.jdbc.driver.OracleDriver\n    hikari:\n      minimum-idle: 5\n      maximumPoolSize: 20\n      idleTimeout: 30000\n      maxLifetime: 2000000\n      connectionTimeout: 30000\n      poolName: data-pool\n  jpa:\n    hibernate:\n      use-new-id-generator-mappings: false\n      ddl-auto: none\n    database-platform: org.hibernate.dialect.Oracle12cDialect\n   \n</code></pre>\n<p>Below is my <strong>logback-spring.xml</strong> file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE configuration&gt;\n&lt;configuration&gt;\n\n    &lt;springProperty scope=&quot;context&quot; name=&quot;app_name&quot; source=&quot;spring.application.name&quot;/&gt;\n    &lt;springProperty scope=&quot;context&quot; name=&quot;environment&quot; source=&quot;param_env&quot; defaultValue=&quot;default_env&quot;/&gt;\n    &lt;springProperty scope=&quot;context&quot; name=&quot;tenant&quot; source=&quot;param_tenant&quot; defaultValue=&quot;default_tenant&quot;/&gt;\n\n    &lt;property name=&quot;GENERIC_PATTERN&quot;\n              value=&quot;[%date{ISO8601}] [%p] [%t] [%c{2}] %4L | %m%n&quot;/&gt;\n    &lt;property name=&quot;CONSOLE_LOG_PATTERN&quot; value=&quot;$GENERIC_PATTERN&quot;/&gt;\n    &lt;property name=&quot;CHARSET&quot; value=&quot;UTF-8&quot;/&gt;\n\n    &lt;property name=&quot;LOG_DIR&quot;\n              value=&quot;logs/${envname:-${environment}}/${param_dtlogname:-${app_name}}&quot;/&gt;\n\n        &lt;appender name=&quot;API_FILE_APPENDER&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\n\n            &lt;file&gt;${LOG_DIR}/api-${param_dtlogname}-${HOSTNAME}.log&lt;/file&gt;\n            &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;\n                &lt;!-- daily rollover --&gt;\n                &lt;fileNamePattern&gt;\n                    ${LOG_DIR}/api-${param_dtlogname}-${HOSTNAME}.%d{yyyy-MM-dd}.%i.log\n                &lt;/fileNamePattern&gt;\n            &lt;/rollingPolicy&gt;\n        &lt;/appender&gt; \n        &lt;appender name=&quot;APPLICATION_FILE_APPENDER&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\n\n            &lt;file&gt;${LOG_DIR}/startup-${param_dtlogname}-${HOSTNAME}.log&lt;/file&gt;\n    \n        &lt;/appender&gt;\n    &lt;/springProfile&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>below is my <strong>bootstrap.yml file</strong></p>\n<pre><code>spring:\n  application:\n    name: doctors-data\n\n</code></pre>\n<p><strong>I am facing 2 issues :</strong></p>\n<p><strong>1.</strong> 1st Issue is when I see the logs that I got from my team mate, Logs has lot of <strong>IS_UNDEFINED</strong> word in it like below.  why am I getting <strong>IS_UNDEFINED</strong> word ?</p>\n<p><a href=\"https://i.stack.imgur.com/2KDw9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2KDw9.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>2.</strong> 2nd Issue is I am not sure in intellij or my system where does these logs are getting generated ?, not able to find the location in my system.</p>\n<p>I believe the issue can be in <code>name=&quot;app_name&quot; source=&quot;spring.application.name&quot;</code> so may be I can try with <code>${spring.application.name}</code> but <strong>major issue is I am not</strong> able to see default location where logs are getting generated. once I see where do logs reside then I can try with <code>${spring.application.name}</code> currently I am not even able to verify the hit and trial approach.</p>\n<p>Can someone please guide me on above mentioned issues ?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":20586715,"reputation":49,"user_id":15111423,"display_name":"Sanjith"},"score":0,"creation_date":1659983266,"post_id":73229849,"comment_id":129420380,"body_markdown":"Did this Answer your question ? https://stackoverflow.com/questions/41673185/disable-edittext-context-menu","body":"Did this Answer your question ? <a href=\"https://stackoverflow.com/questions/41673185/disable-edittext-context-menu\" title=\"disable edittext context menu\">stackoverflow.com/questions/41673185/&hellip;</a>"},{"owner":{"account_id":13547561,"reputation":3338,"user_id":9773423,"display_name":"Taki"},"score":0,"creation_date":1660028872,"post_id":73229849,"comment_id":129429343,"body_markdown":"@Sanjith In my case the copy does not start from edittext , i have no edit text , i have webview and let&#39;s for example i have google opened in webview , when the user highlights a text in the entire page , he copies it and that&#39;s where the android default menu shows up , exactly like what i&#39;m showing above , no edittext","body":"@Sanjith In my case the copy does not start from edittext , i have no edit text , i have webview and let&#39;s for example i have google opened in webview , when the user highlights a text in the entire page , he copies it and that&#39;s where the android default menu shows up , exactly like what i&#39;m showing above , no edittext"}],"owner":{"account_id":13547561,"reputation":3338,"user_id":9773423,"display_name":"Taki"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659581414,"creation_date":1659581414,"question_id":73229849,"body_markdown":"I&#39;m building a WebView App where i&#39;m adding my custom menu with copy , paste and other options , now upon clicking , it shows both my custom menu as well as the default menu which shows when we highlight a word .. i would like to know if there is a way to programmatically disable that default menu in my current app , Thank you in advance for any help .\r\n\r\n  * This is an example of what i mean by default menu ( i want to disable this menu )\r\n  [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/INJRL.png","title":"Disable copy-paste-sellet all menu when selecting a text","body":"<p>I'm building a WebView App where i'm adding my custom menu with copy , paste and other options , now upon clicking , it shows both my custom menu as well as the default menu which shows when we highlight a word .. i would like to know if there is a way to programmatically disable that default menu in my current app , Thank you in advance for any help .</p>\n<ul>\n<li>This is an example of what i mean by default menu ( i want to disable this menu )\n<a href=\"https://i.stack.imgur.com/INJRL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/INJRL.png\" alt=\"enter image description here\" /></a></li>\n</ul>\n"},{"tags":["postgresql","triggers","java","orm"],"comments":[{"owner":{"account_id":8633322,"reputation":218393,"user_id":6464308,"display_name":"Laurenz Albe"},"score":1,"creation_date":1657684281,"post_id":73229819,"comment_id":129330195,"body_markdown":"If you run an insert and an update for the same row, the trigger is going to be called twice. No way around that.","body":"If you run an insert and an update for the same row, the trigger is going to be called twice. No way around that."}],"answers":[{"tags":[],"owner":{"account_id":2474795,"reputation":734,"user_id":2155645,"accept_rate":20,"display_name":"FourtyTwo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1658213327,"creation_date":1658213327,"answer_id":73229820,"question_id":73229819,"body_markdown":"I ended up having to add this line:\r\n\r\n`&lt;property name=&quot;eclipselink.persistence-context.flush-mode&quot; value=&quot;COMMIT&quot; /&gt;`\r\n\r\nto the `persistence.xml` file as documented in [persistence-context.flush-mode][1] and [this answer][2].\r\n\r\n\r\n  [1]: https://docs.oracle.com/middleware/1212/toplink/TLJPA/p_persistence_context_flushmode.htm#TLJPA1005\r\n  [2]: https://stackoverflow.com/a/40956753/2155645","title":"Is there a way to prevent Postgres triggers from triggering before Java/EclipseLink transaction commits","body":"<p>I ended up having to add this line:</p>\n<p><code>&lt;property name=&quot;eclipselink.persistence-context.flush-mode&quot; value=&quot;COMMIT&quot; /&gt;</code></p>\n<p>to the <code>persistence.xml</code> file as documented in <a href=\"https://docs.oracle.com/middleware/1212/toplink/TLJPA/p_persistence_context_flushmode.htm#TLJPA1005\" rel=\"nofollow noreferrer\">persistence-context.flush-mode</a> and <a href=\"https://stackoverflow.com/a/40956753/2155645\">this answer</a>.</p>\n"}],"owner":{"account_id":2474795,"reputation":734,"user_id":2155645,"accept_rate":20,"display_name":"FourtyTwo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73229820,"answer_count":1,"score":0,"last_activity_date":1659581133,"creation_date":1657612000,"question_id":73229819,"body_markdown":"I have a Java application that connects to a **Postgres DB** using EclipseLink.\r\n\r\nMy problem is that database triggers are triggered before the *Java/EclipseLink* transaction is completed causing the data to be incorrect.\r\n\r\n**Example**:\r\n\r\n&gt;There is a trigger to update a `order_logs` table every time there is an `insert` or `update` on the `orders` table.\r\n\r\n**Problem**: \r\n&gt;When a `setter()` method is called on an `OrderEntity` instance, the database logs indicate that the trigger is run for every two `setter()` method calls within the same transaction. This results in the `order_logs` table having multiple rows for only one update.\r\n\r\nMy question is that is there a way to force/ensure that the trigger is triggered only at the end of a transaction. I had a look at [this page][1] but deferring looks like it&#39;s just for foreign keys. My methods are wrapped with the `@Transactional` annotation.\r\n\r\nThe trigger was created using:\r\n\r\n    create trigger my_insert_update_trigger after\r\n      insert or update\r\n          on\r\n            public.my_table for each row execute procedure my_insert_update_trigger_function();\r\n\r\n  [1]: https://www.postgresql.org/docs/current/sql-createtrigger.html","title":"Is there a way to prevent Postgres triggers from triggering before Java/EclipseLink transaction commits","body":"<p>I have a Java application that connects to a <strong>Postgres DB</strong> using EclipseLink.</p>\n<p>My problem is that database triggers are triggered before the <em>Java/EclipseLink</em> transaction is completed causing the data to be incorrect.</p>\n<p><strong>Example</strong>:</p>\n<blockquote>\n<p>There is a trigger to update a <code>order_logs</code> table every time there is an <code>insert</code> or <code>update</code> on the <code>orders</code> table.</p>\n</blockquote>\n<p><strong>Problem</strong>:</p>\n<blockquote>\n<p>When a <code>setter()</code> method is called on an <code>OrderEntity</code> instance, the database logs indicate that the trigger is run for every two <code>setter()</code> method calls within the same transaction. This results in the <code>order_logs</code> table having multiple rows for only one update.</p>\n</blockquote>\n<p>My question is that is there a way to force/ensure that the trigger is triggered only at the end of a transaction. I had a look at <a href=\"https://www.postgresql.org/docs/current/sql-createtrigger.html\" rel=\"nofollow noreferrer\">this page</a> but deferring looks like it's just for foreign keys. My methods are wrapped with the <code>@Transactional</code> annotation.</p>\n<p>The trigger was created using:</p>\n<pre><code>create trigger my_insert_update_trigger after\n  insert or update\n      on\n        public.my_table for each row execute procedure my_insert_update_trigger_function();\n</code></pre>\n"},{"tags":["java","encryption","salt"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1659580555,"post_id":73229717,"comment_id":129330115,"body_markdown":"You need to supply an IV. Either put it into the file, unencrypted, or, simpler and better, use a fixed one that is `static` in your code.","body":"You need to supply an IV. Either put it into the file, unencrypted, or, simpler and better, use a fixed one that is <code>static</code> in your code."},{"owner":{"account_id":21237808,"reputation":35,"user_id":15621763,"display_name":"SmokedPorcupine "},"score":0,"creation_date":1659580656,"post_id":73229717,"comment_id":129330126,"body_markdown":"Thanks for that. Sorry I am new to this would I need to do it for both encryption and decryption because currently I didn&#39;t have to generate one for encryption?","body":"Thanks for that. Sorry I am new to this would I need to do it for both encryption and decryption because currently I didn&#39;t have to generate one for encryption?"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1659589551,"post_id":73229717,"comment_id":129331342,"body_markdown":"You have to use the same one for both.","body":"You have to use the same one for both."},{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1659596982,"post_id":73229717,"comment_id":129333154,"body_markdown":"You can pass the IV as third parameter in `PBEParameterSpec` using `IvParameterSpec`. As long as the salt and thus the key are random, the IV may be static and not cause reuse of key/IV pairs (but you can also take a *random* IV and prepend it to the ciphertext like the salt, so that it is available on decryption).","body":"You can pass the IV as third parameter in <code>PBEParameterSpec</code> using <code>IvParameterSpec</code>. As long as the salt and thus the key are random, the IV may be static and not cause reuse of key/IV pairs (but you can also take a <i>random</i> IV and prepend it to the ciphertext like the salt, so that it is available on decryption)."}],"owner":{"account_id":21237808,"reputation":35,"user_id":15621763,"display_name":"SmokedPorcupine "},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":560,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659580291,"creation_date":1659579866,"question_id":73229717,"body_markdown":"I am trying to write a program that will encrypt a file based on a password the user enters when calling the program. The salt of the password should be included in the file. I believe the program is encrypting the file properly but when I go to decrypt the file the program throws\r\n```\r\njava.security.InvalidAlgorithmParameterException: Missing parameter type: IV expected.\r\n```\r\nI am not sure as to why this would be the case as I am not generating an IV as such. To call the program it is enc &quot;password&quot; fileToEncrypt.txt destinationFile.enc. \r\n\r\n```\r\nimport javax.crypto.*;\r\nimport javax.crypto.spec.IvParameterSpec;\r\nimport javax.crypto.spec.PBEKeySpec;\r\nimport javax.crypto.spec.PBEParameterSpec;\r\nimport javax.crypto.spec.SecretKeySpec;\r\nimport java.io.FileInputStream;\r\nimport java.io.FileNotFoundException;\r\nimport java.io.FileOutputStream;\r\nimport java.io.IOException;\r\nimport java.security.*;\r\nimport java.security.spec.InvalidKeySpecException;\r\nimport java.util.HexFormat;\r\nimport java.util.logging.Logger;\r\n\r\npublic class FileEncryptor {\r\n    private static final Logger LOG = Logger.getLogger(FileEncryptor.class.getSimpleName());\r\n\r\n    private static final String ALGORITHM = &quot;AES&quot;;\r\n    private static final String CIPHER = &quot;AES/CBC/PkCS5PADDING&quot;;\r\n\r\n    public static void main(String[] args) {\r\n\r\n        if (args.length == 4) {\r\n            if (args[0].equals(&quot;enc&quot;) || args[0].equals(&quot;dec&quot;)) {\r\n                try {\r\n                    if (args[0].equals(&quot;enc&quot;)) {\r\n                        SecureRandom sr = new SecureRandom();\r\n                        PBEKeySpec pbeKeySpec;\r\n                        PBEParameterSpec pbeParamSpec;\r\n                        SecretKeyFactory keyFac;\r\n\r\n                        byte[] salt = new byte[16];\r\n                        sr.nextBytes(salt);\r\n                        int count = 1000;\r\n                        pbeParamSpec = new PBEParameterSpec(salt, count);\r\n\r\n                        char[] password = args[1].toCharArray();\r\n                        pbeKeySpec = new PBEKeySpec(password);\r\n                        keyFac = SecretKeyFactory.getInstance(&quot;PBEWithHmacSHA256AndAES_256&quot;);\r\n                        SecretKey pbeKey = keyFac.generateSecret(pbeKeySpec);\r\n                        Cipher pbeCipher = Cipher.getInstance(&quot;PBEWithHmacSHA256AndAES_256&quot;);\r\n                        pbeCipher.init(Cipher.ENCRYPT_MODE, pbeKey, pbeParamSpec);\r\n                        if (encrypt(pbeCipher, args[2], args[3],salt)) {\r\n                            LOG.info(&quot;Encryption finished, saved at &quot; + args[3]);\r\n                        }\r\n                    } else {\r\n                        PBEKeySpec pbeKeySpec;\r\n                        SecretKeyFactory keyFac;\r\n\r\n                        char[] password = args[1].toCharArray();\r\n                        pbeKeySpec = new PBEKeySpec(password);\r\n                        keyFac = SecretKeyFactory.getInstance(&quot;PBEWithHmacSHA256AndAES_256&quot;);\r\n                        SecretKey pbeKey = keyFac.generateSecret(pbeKeySpec);\r\n\r\n                        Cipher pbeCipher = Cipher.getInstance(&quot;PBEWithHmacSHA256AndAES_256&quot;);\r\n\r\n                        if (decrypt(pbeCipher, pbeKey, args[2], args[3])) {\r\n                            LOG.info(&quot;Decryption complete, open &quot; + args[3]);\r\n                        }\r\n                    }\r\n                } catch (Exception e) {\r\n                    exceptionHandle(e);\r\n                }\r\n            } else {\r\n                errorHandle(&quot;Please call encrypt or decrypt&quot;);\r\n            }\r\n        } else {\r\n            errorHandle(&quot;Please call program with 4 arguments&quot;);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Method to encrypt a file with the Key and IV generated by the program and write the results to a\r\n     * new file.\r\n     *\r\n     * @param cipher cipher generated by the program early\r\n     * @param input  name of the file to be encrypted\r\n     * @param output name of the new file after encryption\r\n     * @return boolean if encryption was successful or not.\r\n     */\r\n    public static boolean encrypt(Cipher cipher, String input, String output,byte[] salt) {\r\n\r\n        LOG.info(&quot;File to be Encrypted: &quot; + input);\r\n        try (FileInputStream in = new FileInputStream(input);\r\n             FileOutputStream out = new FileOutputStream(output);\r\n             CipherOutputStream encryptedOutputStream = new CipherOutputStream(out, cipher)) {\r\n            out.write(salt);\r\n            byte[] buffer = new byte[1024];\r\n            int nread;\r\n            while ((nread = in.read(buffer)) &gt; 0) {\r\n                encryptedOutputStream.write(buffer, 0, nread);\r\n            }\r\n            encryptedOutputStream.flush();\r\n\r\n        } catch (IOException e) {\r\n            exceptionHandle(e);\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Method to decrypt a file with the Key inputted by the user and IV stored in the file. Then write the results to a\r\n     * new file.\r\n     *\r\n     * @param cipher cipher generated by the program early based on key and IV provided.\r\n     * @param input  name of the file to be decrypted\r\n     * @param output name of the new file after decryption\r\n     * @return boolean if decryption was successful or not\r\n     */\r\n    public static boolean decrypt(Cipher cipher,SecretKey pbeKey, String input, String output) {\r\n\r\n        int count = 1000;\r\n        try (FileInputStream in = new FileInputStream(input);\r\n             CipherInputStream cipherInputStream = new CipherInputStream(in, cipher);\r\n             FileOutputStream out = new FileOutputStream(output)) {\r\n            byte[] salt = new byte[16];\r\n            in.read(salt);\r\n\r\n            byte[] buffer = new byte[1024];\r\n\r\n            cipher.init(Cipher.DECRYPT_MODE, pbeKey,new PBEParameterSpec(salt, count));\r\n            int nread;\r\n            while ((nread = cipherInputStream.read(buffer)) &gt; 0) {\r\n                out.write(buffer, 0, nread);\r\n            }\r\n            out.flush();\r\n        } catch (IOException | InvalidAlgorithmParameterException | InvalidKeyException ex) {\r\n            ex.printStackTrace();\r\n            exceptionHandle(ex);\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Methods prints a message to the console to let the user know what mistakes they made when running the program.\r\n     *\r\n     * @param message to be printed to the console.\r\n     */\r\n\r\n    public static void errorHandle(String message) {\r\n        System.out.println(message);\r\n    }\r\n\r\n    /**\r\n     * Program prints a message to the user to let them know what went wrong in the program based on what exception\r\n     * was thrown early in the program and give them clear understanding of what went wrong.\r\n     *\r\n     * @param e Exception caught be the program\r\n     */\r\n    public static void exceptionHandle(Exception e) {\r\n        if(e.getClass() == BadPaddingException.class){\r\n            System.out.println(&quot;hello&quot;);\r\n            LOG.info(&quot;Please input correct key. &quot; + e.getMessage());\r\n        }\r\n\r\n        if (e.getClass() == FileNotFoundException.class) {\r\n            LOG.info(&quot;Please call enc or dec with an existing file. &quot; + e.getMessage());\r\n        }\r\n        if (e.getClass() == InvalidKeyException.class) {\r\n            LOG.info(&quot;Please put correct Algorithm. &quot; + e.getMessage());\r\n        }\r\n        if (e.getClass() == NoSuchAlgorithmException.class) {\r\n            LOG.info(&quot;Please put correct Cipher &quot; + e.getMessage());\r\n        }\r\n        if (e.getClass() == InvalidAlgorithmParameterException.class) {\r\n            LOG.info(&quot;Please put correct IV length. &quot; + e.getMessage());\r\n        }\r\n        if (e.getClass() == IllegalArgumentException.class) {\r\n            LOG.info(&quot;Please check length Key and IV.  &quot; + e.getMessage());\r\n        }\r\n\r\n        if (e.getClass() == NoSuchPaddingException.class) {\r\n            LOG.info(&quot;Please check Padding. &quot; + e.getMessage());\r\n        }\r\n    }\r\n\r\n    public static String bytesToHex(byte[] bytes) {\r\n        StringBuilder sb = new StringBuilder();\r\n        for (byte b : bytes) {\r\n            sb.append(String.format(&quot;%02X &quot;, b));\r\n        }\r\n        return sb.toString();\r\n    }\r\n}\r\n```\r\n","title":"Java Password based Encryption decrypt throwing errors","body":"<p>I am trying to write a program that will encrypt a file based on a password the user enters when calling the program. The salt of the password should be included in the file. I believe the program is encrypting the file properly but when I go to decrypt the file the program throws</p>\n<pre><code>java.security.InvalidAlgorithmParameterException: Missing parameter type: IV expected.\n</code></pre>\n<p>I am not sure as to why this would be the case as I am not generating an IV as such. To call the program it is enc &quot;password&quot; fileToEncrypt.txt destinationFile.enc.</p>\n<pre><code>import javax.crypto.*;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.PBEKeySpec;\nimport javax.crypto.spec.PBEParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.security.*;\nimport java.security.spec.InvalidKeySpecException;\nimport java.util.HexFormat;\nimport java.util.logging.Logger;\n\npublic class FileEncryptor {\n    private static final Logger LOG = Logger.getLogger(FileEncryptor.class.getSimpleName());\n\n    private static final String ALGORITHM = &quot;AES&quot;;\n    private static final String CIPHER = &quot;AES/CBC/PkCS5PADDING&quot;;\n\n    public static void main(String[] args) {\n\n        if (args.length == 4) {\n            if (args[0].equals(&quot;enc&quot;) || args[0].equals(&quot;dec&quot;)) {\n                try {\n                    if (args[0].equals(&quot;enc&quot;)) {\n                        SecureRandom sr = new SecureRandom();\n                        PBEKeySpec pbeKeySpec;\n                        PBEParameterSpec pbeParamSpec;\n                        SecretKeyFactory keyFac;\n\n                        byte[] salt = new byte[16];\n                        sr.nextBytes(salt);\n                        int count = 1000;\n                        pbeParamSpec = new PBEParameterSpec(salt, count);\n\n                        char[] password = args[1].toCharArray();\n                        pbeKeySpec = new PBEKeySpec(password);\n                        keyFac = SecretKeyFactory.getInstance(&quot;PBEWithHmacSHA256AndAES_256&quot;);\n                        SecretKey pbeKey = keyFac.generateSecret(pbeKeySpec);\n                        Cipher pbeCipher = Cipher.getInstance(&quot;PBEWithHmacSHA256AndAES_256&quot;);\n                        pbeCipher.init(Cipher.ENCRYPT_MODE, pbeKey, pbeParamSpec);\n                        if (encrypt(pbeCipher, args[2], args[3],salt)) {\n                            LOG.info(&quot;Encryption finished, saved at &quot; + args[3]);\n                        }\n                    } else {\n                        PBEKeySpec pbeKeySpec;\n                        SecretKeyFactory keyFac;\n\n                        char[] password = args[1].toCharArray();\n                        pbeKeySpec = new PBEKeySpec(password);\n                        keyFac = SecretKeyFactory.getInstance(&quot;PBEWithHmacSHA256AndAES_256&quot;);\n                        SecretKey pbeKey = keyFac.generateSecret(pbeKeySpec);\n\n                        Cipher pbeCipher = Cipher.getInstance(&quot;PBEWithHmacSHA256AndAES_256&quot;);\n\n                        if (decrypt(pbeCipher, pbeKey, args[2], args[3])) {\n                            LOG.info(&quot;Decryption complete, open &quot; + args[3]);\n                        }\n                    }\n                } catch (Exception e) {\n                    exceptionHandle(e);\n                }\n            } else {\n                errorHandle(&quot;Please call encrypt or decrypt&quot;);\n            }\n        } else {\n            errorHandle(&quot;Please call program with 4 arguments&quot;);\n        }\n    }\n\n    /**\n     * Method to encrypt a file with the Key and IV generated by the program and write the results to a\n     * new file.\n     *\n     * @param cipher cipher generated by the program early\n     * @param input  name of the file to be encrypted\n     * @param output name of the new file after encryption\n     * @return boolean if encryption was successful or not.\n     */\n    public static boolean encrypt(Cipher cipher, String input, String output,byte[] salt) {\n\n        LOG.info(&quot;File to be Encrypted: &quot; + input);\n        try (FileInputStream in = new FileInputStream(input);\n             FileOutputStream out = new FileOutputStream(output);\n             CipherOutputStream encryptedOutputStream = new CipherOutputStream(out, cipher)) {\n            out.write(salt);\n            byte[] buffer = new byte[1024];\n            int nread;\n            while ((nread = in.read(buffer)) &gt; 0) {\n                encryptedOutputStream.write(buffer, 0, nread);\n            }\n            encryptedOutputStream.flush();\n\n        } catch (IOException e) {\n            exceptionHandle(e);\n        }\n        return true;\n    }\n\n    /**\n     * Method to decrypt a file with the Key inputted by the user and IV stored in the file. Then write the results to a\n     * new file.\n     *\n     * @param cipher cipher generated by the program early based on key and IV provided.\n     * @param input  name of the file to be decrypted\n     * @param output name of the new file after decryption\n     * @return boolean if decryption was successful or not\n     */\n    public static boolean decrypt(Cipher cipher,SecretKey pbeKey, String input, String output) {\n\n        int count = 1000;\n        try (FileInputStream in = new FileInputStream(input);\n             CipherInputStream cipherInputStream = new CipherInputStream(in, cipher);\n             FileOutputStream out = new FileOutputStream(output)) {\n            byte[] salt = new byte[16];\n            in.read(salt);\n\n            byte[] buffer = new byte[1024];\n\n            cipher.init(Cipher.DECRYPT_MODE, pbeKey,new PBEParameterSpec(salt, count));\n            int nread;\n            while ((nread = cipherInputStream.read(buffer)) &gt; 0) {\n                out.write(buffer, 0, nread);\n            }\n            out.flush();\n        } catch (IOException | InvalidAlgorithmParameterException | InvalidKeyException ex) {\n            ex.printStackTrace();\n            exceptionHandle(ex);\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * Methods prints a message to the console to let the user know what mistakes they made when running the program.\n     *\n     * @param message to be printed to the console.\n     */\n\n    public static void errorHandle(String message) {\n        System.out.println(message);\n    }\n\n    /**\n     * Program prints a message to the user to let them know what went wrong in the program based on what exception\n     * was thrown early in the program and give them clear understanding of what went wrong.\n     *\n     * @param e Exception caught be the program\n     */\n    public static void exceptionHandle(Exception e) {\n        if(e.getClass() == BadPaddingException.class){\n            System.out.println(&quot;hello&quot;);\n            LOG.info(&quot;Please input correct key. &quot; + e.getMessage());\n        }\n\n        if (e.getClass() == FileNotFoundException.class) {\n            LOG.info(&quot;Please call enc or dec with an existing file. &quot; + e.getMessage());\n        }\n        if (e.getClass() == InvalidKeyException.class) {\n            LOG.info(&quot;Please put correct Algorithm. &quot; + e.getMessage());\n        }\n        if (e.getClass() == NoSuchAlgorithmException.class) {\n            LOG.info(&quot;Please put correct Cipher &quot; + e.getMessage());\n        }\n        if (e.getClass() == InvalidAlgorithmParameterException.class) {\n            LOG.info(&quot;Please put correct IV length. &quot; + e.getMessage());\n        }\n        if (e.getClass() == IllegalArgumentException.class) {\n            LOG.info(&quot;Please check length Key and IV.  &quot; + e.getMessage());\n        }\n\n        if (e.getClass() == NoSuchPaddingException.class) {\n            LOG.info(&quot;Please check Padding. &quot; + e.getMessage());\n        }\n    }\n\n    public static String bytesToHex(byte[] bytes) {\n        StringBuilder sb = new StringBuilder();\n        for (byte b : bytes) {\n            sb.append(String.format(&quot;%02X &quot;, b));\n        }\n        return sb.toString();\n    }\n}\n</code></pre>\n"},{"tags":["java","jackson","jackson-databind"],"owner":{"account_id":11298801,"reputation":113,"user_id":8285456,"display_name":"Mrpebbles"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":153,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1659579984,"creation_date":1659578918,"question_id":73229631,"body_markdown":"I am using Feign to hit external APIs, and then to process the externally generated JSON (aka, the response data cannot be modified in any way), and I am trying to bundle these together into an extensible super type. At this point, I am not even sure if what I am trying to do is possible with Jackson / Feign. If it would be much easier to abandon (or heavily restructure) the polymorphism, I think I am also ready to give up on it and just create a bunch of sub classes.\r\n\r\nHere are my two main questions, with more context below. \r\n1. Should I just separate the easily deduced types from the complex types, and have a little more duplicated boiler plate?\r\n2. How can I create a custom deserializer for the list object I linked? Ideally I would like to have some way to populate the more boiler plate fields less manually -- as an example, it would be great if I could call default deserializers inside it, which would rely more on the standard annotations in other objects.\r\n\r\nIdeally, I would like one class, like this:\r\n```java\r\npublic final class BillApiResponse {\r\n\r\n    @Valid\r\n    @JsonProperty(&quot;response_status&quot;)\r\n    private boolean responseStatus;\r\n\r\n    @Valid\r\n    @JsonProperty(&quot;response_message&quot;)\r\n    private String responseMessage;\r\n\r\n    @JsonProperty(&quot;response_data&quot;)\r\n    private BillApiResponseData responseData;\r\n\r\n    //getters and setters, etc.\r\n\r\n}\r\n```\r\n and then I would to have Jackson automatically map the simpler objects in whatever way is easiest (LoginResponse, LoginError), while I would try to implement a custom handler for the more complex objects (UpdateObject, ListOfObjects).\r\n\r\nSo, something like this:\r\n```java\r\n@JsonTypeInfo(use = Id.DEDUCTION)\r\n@JsonSubTypes({\r\n    @Type(value = BillLoginSuccess.class),\r\n    @Type(value = BillErrorResponse.class),\r\n    //@Type(value = BillResponseObject[].class) &lt;--- This breaks things when added\r\n })\r\n// @JsonTypeResolver(value = BillResponseTypeResolver.class) &lt;--- Open to using one of \r\n// these if I can figure out how\r\n// @JsonDeserialize(using = BillResponseDeserializer.class) &lt;--- Also open to using a \r\n// custom deserializer, but I would like to keep it only for certain parts\r\npublic interface BillApiResponseData {}\r\n```\r\n\r\n\r\nHere is a link to the API specification I am trying to hit:\r\n\r\n[Get a List of Objects](https://developer.bill.com/hc/en-us/articles/210136993-List)\r\n\r\n - This returns an untyped array of untyped objects. Jackson does not seem to like that the array is untyped, and stops parsing everything there. Once inside, we would have to grab the type from a property.\r\n```json\r\n{\r\n  &quot;response_status&quot; : 0,\r\n  &quot;response_message&quot; : &quot;Success&quot;,\r\n  &quot;response_data&quot; : [{\r\n    &quot;entity&quot; : &quot;SentPay&quot;,\r\n    &quot;id&quot; : &quot;stp01AUXGYKCBGFMaqlc&quot;\r\n    // More fields\r\n  } // More values]\r\n}\r\n```\r\n\r\n[Login](https://developer.bill.com/hc/en-us/articles/208197226-Login)\r\n\r\n- This returns a totally new object. Generally not having issues handling this one (until I add support for the above list, and then all of the parsing breaks down as Jackson throws errors).\r\n\r\n[Update Object](https://developer.bill.com/hc/en-us/articles/208182666-Customer)\r\n\r\n- This returns an untyped object. Once again, we would have to go inside and look at the property.\r\n\r\nI have tried a number of things, but generally I was not successful (hence I am here!).\r\n\r\nThese include:\r\n1. Trying to hook into the lifecycle and take over if I detect an array object. I believe this fails because Jackson throws an error when it sees the array does not have a type associated with it.\r\n~~~java\r\n    SimpleModule customDeserializerModule = new SimpleModule()\r\n            .setDeserializerModifier(new BeanDeserializerModifier() {\r\n                @Override\r\n                public JsonDeserializer&lt;?&gt; modifyDeserializer(\r\n                        DeserializationConfig config,\r\n                        BeanDescription beanDesc,\r\n                        JsonDeserializer&lt;?&gt; defaultDeserializer) {\r\n                    if (beanDesc.getBeanClass().isArray()) {\r\n                        return new BillResponseDeserializer(defaultDeserializer);\r\n                    } else {\r\n                        return defaultDeserializer;\r\n                    }\r\n                }\r\n            });\r\n~~~\r\n\r\n2. Custom Deserializers. The issue I have is that it seems to want to route ALL of my deserialization calls into the custom one, and I don&#39;t want to have to handle the simpler items, which can be deduced.\r\n3. TypeIdResolvers / TypeResolvers. Frankly these are confusing me a little bit, and I cannot find a good example online to try out.\r\n","title":"How to Parse untyped, nested JSON with Polymorphism?","body":"<p>I am using Feign to hit external APIs, and then to process the externally generated JSON (aka, the response data cannot be modified in any way), and I am trying to bundle these together into an extensible super type. At this point, I am not even sure if what I am trying to do is possible with Jackson / Feign. If it would be much easier to abandon (or heavily restructure) the polymorphism, I think I am also ready to give up on it and just create a bunch of sub classes.</p>\n<p>Here are my two main questions, with more context below.</p>\n<ol>\n<li>Should I just separate the easily deduced types from the complex types, and have a little more duplicated boiler plate?</li>\n<li>How can I create a custom deserializer for the list object I linked? Ideally I would like to have some way to populate the more boiler plate fields less manually -- as an example, it would be great if I could call default deserializers inside it, which would rely more on the standard annotations in other objects.</li>\n</ol>\n<p>Ideally, I would like one class, like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public final class BillApiResponse {\n\n    @Valid\n    @JsonProperty(&quot;response_status&quot;)\n    private boolean responseStatus;\n\n    @Valid\n    @JsonProperty(&quot;response_message&quot;)\n    private String responseMessage;\n\n    @JsonProperty(&quot;response_data&quot;)\n    private BillApiResponseData responseData;\n\n    //getters and setters, etc.\n\n}\n</code></pre>\n<p>and then I would to have Jackson automatically map the simpler objects in whatever way is easiest (LoginResponse, LoginError), while I would try to implement a custom handler for the more complex objects (UpdateObject, ListOfObjects).</p>\n<p>So, something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonTypeInfo(use = Id.DEDUCTION)\n@JsonSubTypes({\n    @Type(value = BillLoginSuccess.class),\n    @Type(value = BillErrorResponse.class),\n    //@Type(value = BillResponseObject[].class) &lt;--- This breaks things when added\n })\n// @JsonTypeResolver(value = BillResponseTypeResolver.class) &lt;--- Open to using one of \n// these if I can figure out how\n// @JsonDeserialize(using = BillResponseDeserializer.class) &lt;--- Also open to using a \n// custom deserializer, but I would like to keep it only for certain parts\npublic interface BillApiResponseData {}\n</code></pre>\n<p>Here is a link to the API specification I am trying to hit:</p>\n<p><a href=\"https://developer.bill.com/hc/en-us/articles/210136993-List\" rel=\"nofollow noreferrer\">Get a List of Objects</a></p>\n<ul>\n<li>This returns an untyped array of untyped objects. Jackson does not seem to like that the array is untyped, and stops parsing everything there. Once inside, we would have to grab the type from a property.</li>\n</ul>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;response_status&quot; : 0,\n  &quot;response_message&quot; : &quot;Success&quot;,\n  &quot;response_data&quot; : [{\n    &quot;entity&quot; : &quot;SentPay&quot;,\n    &quot;id&quot; : &quot;stp01AUXGYKCBGFMaqlc&quot;\n    // More fields\n  } // More values]\n}\n</code></pre>\n<p><a href=\"https://developer.bill.com/hc/en-us/articles/208197226-Login\" rel=\"nofollow noreferrer\">Login</a></p>\n<ul>\n<li>This returns a totally new object. Generally not having issues handling this one (until I add support for the above list, and then all of the parsing breaks down as Jackson throws errors).</li>\n</ul>\n<p><a href=\"https://developer.bill.com/hc/en-us/articles/208182666-Customer\" rel=\"nofollow noreferrer\">Update Object</a></p>\n<ul>\n<li>This returns an untyped object. Once again, we would have to go inside and look at the property.</li>\n</ul>\n<p>I have tried a number of things, but generally I was not successful (hence I am here!).</p>\n<p>These include:</p>\n<ol>\n<li>Trying to hook into the lifecycle and take over if I detect an array object. I believe this fails because Jackson throws an error when it sees the array does not have a type associated with it.</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    SimpleModule customDeserializerModule = new SimpleModule()\n            .setDeserializerModifier(new BeanDeserializerModifier() {\n                @Override\n                public JsonDeserializer&lt;?&gt; modifyDeserializer(\n                        DeserializationConfig config,\n                        BeanDescription beanDesc,\n                        JsonDeserializer&lt;?&gt; defaultDeserializer) {\n                    if (beanDesc.getBeanClass().isArray()) {\n                        return new BillResponseDeserializer(defaultDeserializer);\n                    } else {\n                        return defaultDeserializer;\n                    }\n                }\n            });\n</code></pre>\n<ol start=\"2\">\n<li>Custom Deserializers. The issue I have is that it seems to want to route ALL of my deserialization calls into the custom one, and I don't want to have to handle the simpler items, which can be deduced.</li>\n<li>TypeIdResolvers / TypeResolvers. Frankly these are confusing me a little bit, and I cannot find a good example online to try out.</li>\n</ol>\n"},{"tags":["java","json","serialization","jackson"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1659580068,"post_id":73229693,"comment_id":129330034,"body_markdown":"static variables are not serialized?","body":"static variables are not serialized?"}],"owner":{"account_id":444523,"reputation":929,"user_id":836376,"accept_rate":77,"display_name":"KevinBui"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":195,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1659579618,"creation_date":1659579618,"question_id":73229693,"body_markdown":"I am looking for a solution that have Jackson use toString method whenever it can not serialize an object type.\r\n\r\nLet me explain more detail.\r\n\r\nI have a class:\r\n```\r\n@AllArgsConstructor\r\npublic class TestJackson {\r\n    public String RequestId;\r\n    public AntiSerialize foo;\r\n    @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)\r\n    public LocalDateTime dateRequest;\r\n    public Map&lt;String, Object&gt; headers;\r\n\r\n    private static class AntiSerialize {\r\n        @Override\r\n        public String toString() {\r\n            return &quot;AntiSerialize &quot; + ZonedDateTime.now().toEpochSecond();\r\n        }\r\n    }\r\n\r\n    public static TestJackson createSample() {\r\n        return new TestJackson(\r\n            &quot;123&quot;,\r\n            new TestJackson.AntiSerialize(),\r\n            LocalDateTime.now(),\r\n            Map.of(&quot;content&quot;, 999,\r\n                &quot;b3&quot;, new TestJackson.AntiSerialize(),\r\n                &quot;b4&quot;, Arrays.asList(\r\n                    new TestJackson.AntiSerialize(),\r\n                    new TestJackson.AntiSerialize()\r\n                )\r\n            )\r\n        );\r\n\r\n    }\r\n}\r\n```\r\n\r\nThis is to test serialize object\r\n```\r\nvar OM = new ObjectMapper()\r\n           .configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);\r\ntry {\r\n    //var f = TestJackson.createSample().foo;\r\n    //out.println(((Object)f).toString());\r\n    var json = OM.writerWithDefaultPrettyPrinter()\r\n              .writeValueAsString(TestJackson.createSample());\r\n    out.println(json);\r\n} catch (Exception e) {\r\n    e.printStackTrace(out);\r\n}\r\n```\r\nIt prints\r\n```\r\n{\r\n  &quot;RequestId&quot; : &quot;123&quot;,\r\n  &quot;foo&quot; : { },\r\n  &quot;dateRequest&quot; : &quot;2022-08-04 09:04:14&quot;,\r\n  &quot;headers&quot; : {\r\n    &quot;b3&quot; : { },\r\n    &quot;b4&quot; : [ { }, { } ],\r\n    &quot;content&quot; : 999\r\n  }\r\n}\r\n```\r\n\r\nBut I expect:\r\n```\r\n{\r\n  &quot;RequestId&quot; : &quot;123&quot;,\r\n  &quot;foo&quot; : &quot;AntiSerialize 1659578741&quot;,\r\n  &quot;dateRequest&quot; : &quot;2022-08-04 09:04:14&quot;,\r\n  &quot;headers&quot; : {\r\n    &quot;b3&quot; : &quot;AntiSerialize 1659578752&quot;,\r\n    &quot;b4&quot; : [ &quot;AntiSerialize 1659578763&quot;, &quot;AntiSerialize 1659578774&quot; ],\r\n    &quot;content&quot; : 999\r\n  }\r\n}\r\n```\r\n\r\nAssume `TestJackson` is third party class and can&#39;t modify.\r\n`AntiSerialize` is also a private nested class.","title":"How have Jackson use toString method if object have no public accessors?","body":"<p>I am looking for a solution that have Jackson use toString method whenever it can not serialize an object type.</p>\n<p>Let me explain more detail.</p>\n<p>I have a class:</p>\n<pre><code>@AllArgsConstructor\npublic class TestJackson {\n    public String RequestId;\n    public AntiSerialize foo;\n    @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)\n    public LocalDateTime dateRequest;\n    public Map&lt;String, Object&gt; headers;\n\n    private static class AntiSerialize {\n        @Override\n        public String toString() {\n            return &quot;AntiSerialize &quot; + ZonedDateTime.now().toEpochSecond();\n        }\n    }\n\n    public static TestJackson createSample() {\n        return new TestJackson(\n            &quot;123&quot;,\n            new TestJackson.AntiSerialize(),\n            LocalDateTime.now(),\n            Map.of(&quot;content&quot;, 999,\n                &quot;b3&quot;, new TestJackson.AntiSerialize(),\n                &quot;b4&quot;, Arrays.asList(\n                    new TestJackson.AntiSerialize(),\n                    new TestJackson.AntiSerialize()\n                )\n            )\n        );\n\n    }\n}\n</code></pre>\n<p>This is to test serialize object</p>\n<pre><code>var OM = new ObjectMapper()\n           .configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);\ntry {\n    //var f = TestJackson.createSample().foo;\n    //out.println(((Object)f).toString());\n    var json = OM.writerWithDefaultPrettyPrinter()\n              .writeValueAsString(TestJackson.createSample());\n    out.println(json);\n} catch (Exception e) {\n    e.printStackTrace(out);\n}\n</code></pre>\n<p>It prints</p>\n<pre><code>{\n  &quot;RequestId&quot; : &quot;123&quot;,\n  &quot;foo&quot; : { },\n  &quot;dateRequest&quot; : &quot;2022-08-04 09:04:14&quot;,\n  &quot;headers&quot; : {\n    &quot;b3&quot; : { },\n    &quot;b4&quot; : [ { }, { } ],\n    &quot;content&quot; : 999\n  }\n}\n</code></pre>\n<p>But I expect:</p>\n<pre><code>{\n  &quot;RequestId&quot; : &quot;123&quot;,\n  &quot;foo&quot; : &quot;AntiSerialize 1659578741&quot;,\n  &quot;dateRequest&quot; : &quot;2022-08-04 09:04:14&quot;,\n  &quot;headers&quot; : {\n    &quot;b3&quot; : &quot;AntiSerialize 1659578752&quot;,\n    &quot;b4&quot; : [ &quot;AntiSerialize 1659578763&quot;, &quot;AntiSerialize 1659578774&quot; ],\n    &quot;content&quot; : 999\n  }\n}\n</code></pre>\n<p>Assume <code>TestJackson</code> is third party class and can't modify.\n<code>AntiSerialize</code> is also a private nested class.</p>\n"},{"tags":["java","email"],"answers":[{"tags":[],"owner":{"account_id":4436789,"reputation":2614,"user_id":3612433,"accept_rate":60,"display_name":"Jonas K&#246;ritz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1459775536,"creation_date":1459775536,"answer_id":36403674,"question_id":36403581,"body_markdown":"An E-Mail might not contain multiple `Message-Id` headers but other E-Mail header fields might appear multiple times. The getHeader function is returning an array to take these into account.\r\n\r\nFor example the `Recieved` header can be set multiple times to provide a full trace of servers that handled the E-Mail.","title":"Can an email contain multiple Message Ids?","body":"<p>An E-Mail might not contain multiple <code>Message-Id</code> headers but other E-Mail header fields might appear multiple times. The getHeader function is returning an array to take these into account.</p>\n\n<p>For example the <code>Recieved</code> header can be set multiple times to provide a full trace of servers that handled the E-Mail.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1659579369,"creation_date":1459776084,"answer_id":36403878,"question_id":36403581,"body_markdown":"The current specification for internet email message format is [RFC 5322][1].  That specifies that an email message can have zero or one &quot;message-id&quot; headers, and that one is recommended.  (See page 20 in the linked version)\r\n\r\nSo any email that has more than one &quot;message-id&quot; header is non-conformant.\r\n\r\nHowever, if you are implementing a mail reader or processor, it is advisable to allow for the possibility of a non-conformant email message.  At the very least, your processor should cope with such an email so that it doesn&#39;t crash or behave in a destructive fashion.  (That kind of fragility could allow someone to attack your mail processor, and maybe the system that it runs on.)\r\n\r\n\r\n  [1]: https://www.rfc-editor.org/rfc/rfc5322","title":"Can an email contain multiple Message Ids?","body":"<p>The current specification for internet email message format is <a href=\"https://www.rfc-editor.org/rfc/rfc5322\" rel=\"nofollow noreferrer\">RFC 5322</a>.  That specifies that an email message can have zero or one &quot;message-id&quot; headers, and that one is recommended.  (See page 20 in the linked version)</p>\n<p>So any email that has more than one &quot;message-id&quot; header is non-conformant.</p>\n<p>However, if you are implementing a mail reader or processor, it is advisable to allow for the possibility of a non-conformant email message.  At the very least, your processor should cope with such an email so that it doesn't crash or behave in a destructive fashion.  (That kind of fragility could allow someone to attack your mail processor, and maybe the system that it runs on.)</p>\n"}],"owner":{"account_id":2714938,"reputation":6041,"user_id":2342529,"accept_rate":98,"display_name":"Alexandru Severin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":536,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":36403878,"answer_count":2,"score":1,"last_activity_date":1659579369,"creation_date":1459775246,"question_id":36403581,"body_markdown":"I am implementing a mail client in java and I am retrieving the MessageId using the command: `String[] msgIds = msg.getHeader(&quot;Message-Id&quot;);`\r\n\r\nSince `getHeader()` returns an Array. I was wondering if there is any scenario where an email might contain multiple Ids. \r\n\r\nI tried testing it by sending/replying/forwarding an email back and forth but it only contained one id every time.","title":"Can an email contain multiple Message Ids?","body":"<p>I am implementing a mail client in java and I am retrieving the MessageId using the command: <code>String[] msgIds = msg.getHeader(\"Message-Id\");</code></p>\n\n<p>Since <code>getHeader()</code> returns an Array. I was wondering if there is any scenario where an email might contain multiple Ids. </p>\n\n<p>I tried testing it by sending/replying/forwarding an email back and forth but it only contained one id every time.</p>\n"},{"tags":["java","spring","javabeans"],"owner":{"account_id":18980338,"reputation":21,"user_id":13851847,"display_name":"John Smith"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":234,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1659579085,"creation_date":1659579085,"question_id":73229647,"body_markdown":"After studying Spring, I learned about Bean Factory, a spring IoC container, and Application Context, which inherited it. One of the differences between the two was that Bean Factory uses Lazy Initialization, while Application Context uses Eager Initialization. But what are the benefits of Eager Initialization over Lazy Initialization?","title":"Bean Factory Lazy Initialization vs ApplicationContext Eager Initialization","body":"<p>After studying Spring, I learned about Bean Factory, a spring IoC container, and Application Context, which inherited it. One of the differences between the two was that Bean Factory uses Lazy Initialization, while Application Context uses Eager Initialization. But what are the benefits of Eager Initialization over Lazy Initialization?</p>\n"},{"tags":["java","byte-buddy"],"comments":[{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":0,"creation_date":1659535480,"post_id":73222219,"comment_id":129317976,"body_markdown":"use reflection perhaps?","body":"use reflection perhaps?"},{"owner":{"account_id":2700000,"reputation":1629,"user_id":2330913,"display_name":"Bing Ren"},"score":0,"creation_date":1659561453,"post_id":73222219,"comment_id":129326733,"body_markdown":"tried, only get &quot;arg0&quot;, not the real parameter name","body":"tried, only get &quot;arg0&quot;, not the real parameter name"}],"answers":[{"tags":[],"owner":{"account_id":208217,"reputation":1488,"user_id":458561,"display_name":"boneill"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1659571455,"creation_date":1659571455,"answer_id":73229031,"question_id":73222219,"body_markdown":"You need to pass the `-parameters` argument to the java compiler. The `-g:vars` argument provides information regarding all local variables, but the attribute which defines this is never accessible using the reflection API. When using `-parameters`, a special attribute is used which is explicitly designed for being accessed by the reflection API.","title":"How to get a Java method&#39;s parameter&#39;s actual name from a MethodDescription with Byte Buddy?","body":"<p>You need to pass the <code>-parameters</code> argument to the java compiler. The <code>-g:vars</code> argument provides information regarding all local variables, but the attribute which defines this is never accessible using the reflection API. When using <code>-parameters</code>, a special attribute is used which is explicitly designed for being accessed by the reflection API.</p>\n"}],"owner":{"account_id":2700000,"reputation":1629,"user_id":2330913,"display_name":"Bing Ren"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":343,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":73229031,"answer_count":1,"score":4,"last_activity_date":1659577707,"creation_date":1659531754,"question_id":73222219,"body_markdown":"Inspired by this article http://mydailyjava.blogspot.com/2022/02/using-byte-buddy-for-proxy-creation.html, I managed to intercept a method invocation, check all the method parameter&#39;s values, and return a mock response.\r\n\r\nHowever, I cannot get the parameters&#39; actual names (as in source code). I can only get names such as &quot;arg0&quot;.\r\n\r\nThe best effort I made is, in a method matcher, I have access to the method&#39;s MethodDescription, and I can get the parameter&#39;s ParameterDescription. \r\n\r\n    @Override\r\n    public DynamicType.Builder&lt;?&gt; apply(DynamicType.Builder&lt;?&gt; builder, TypeDescription typeDescription, ClassFileLocator classFileLocator) {\r\n        logger.info(&quot;OiiPlugin processing &quot;+typeDescription);\r\n        return builder\r\n                .method(new ElementMatcher&lt;MethodDescription&gt;() {\r\n                    @Override\r\n                    public boolean matches(MethodDescription target) {\r\n                        boolean isTarget = target.getDeclaredAnnotations().isAnnotationPresent(MockMe.class);\r\n                        if (isTarget) {\r\n                            ParameterDescription p = target.getParameters().get(0);\r\n                            logger.info(\r\n                                    &quot;Parameter 0 NAME:&quot;+p.getActualName()+&quot;:&quot;+p.getName()+&quot;:&quot;+p.getInternalName());\r\n                        };\r\n                        return isTarget;\r\n                    }\r\n                })\r\n                .intercept(MethodDelegation.to(\r\n                        OiiInterceptor.class\r\n                ));\r\n    }\r\n\r\nHowever, its getActualName() returns empty string.\r\n\r\n    [INFO] OiiPlugin processing class com.example.research.oii.client.ExampleClient\r\n    [INFO] Parameter 0 NAME::arg0:arg0\r\n\r\n\r\nI did add javac -g:vars parameter through maven plugin config, to instruct javac put parameter names into the .class files.\r\n\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.8.0&lt;/version&gt;\r\n          &lt;configuration&gt;\r\n            &lt;compilerArgs&gt;\r\n              &lt;arg&gt;-g:vars&lt;/arg&gt;\r\n            &lt;/compilerArgs&gt;\r\n          &lt;/configuration&gt;\r\n        &lt;/plugin&gt;\r\n\r\nWhat else can I do? \r\n\r\nThanks!\r\n\r\n\r\n----------\r\n\r\nPost Note:\r\n\r\nThanks @boneill for the answer. After using -parameters with compiler:\r\n\r\n1. The TypeDescription API is able to get the actual name\r\n2. The Java reflection API can also get the actual name, with a catch - the parameter names can only be obtained from the Method annotated with @Origin, not from the Method annotated with @SuperMethod\r\n\r\n```\r\n    @RuntimeType\r\n    public static Object intercept(\r\n            @This Object self,\r\n            @Origin Method method, \r\n            @AllArguments Object[] args,\r\n            @SuperMethod Method superMethod \r\n    ) throws Throwable {\r\n        // need to get parameter name from @Origin method, not @SuperMethod\r\n        Parameter[] parameters = method.getParameters(); \r\n        Object[] mockInterceptionParameters = new Object[parameters.length*2];\r\n        for (int i=0; i&lt;parameters.length; i++) {\r\n            Parameter p = parameters[i];\r\n            mockInterceptionParameters[i*2] = p.getName();\r\n            mockInterceptionParameters[i*2+1] = args[i];\r\n        }\r\n        .... ....\r\n    }\r\n```","title":"How to get a Java method&#39;s parameter&#39;s actual name from a MethodDescription with Byte Buddy?","body":"<p>Inspired by this article <a href=\"http://mydailyjava.blogspot.com/2022/02/using-byte-buddy-for-proxy-creation.html\" rel=\"nofollow noreferrer\">http://mydailyjava.blogspot.com/2022/02/using-byte-buddy-for-proxy-creation.html</a>, I managed to intercept a method invocation, check all the method parameter's values, and return a mock response.</p>\n<p>However, I cannot get the parameters' actual names (as in source code). I can only get names such as &quot;arg0&quot;.</p>\n<p>The best effort I made is, in a method matcher, I have access to the method's MethodDescription, and I can get the parameter's ParameterDescription.</p>\n<pre><code>@Override\npublic DynamicType.Builder&lt;?&gt; apply(DynamicType.Builder&lt;?&gt; builder, TypeDescription typeDescription, ClassFileLocator classFileLocator) {\n    logger.info(&quot;OiiPlugin processing &quot;+typeDescription);\n    return builder\n            .method(new ElementMatcher&lt;MethodDescription&gt;() {\n                @Override\n                public boolean matches(MethodDescription target) {\n                    boolean isTarget = target.getDeclaredAnnotations().isAnnotationPresent(MockMe.class);\n                    if (isTarget) {\n                        ParameterDescription p = target.getParameters().get(0);\n                        logger.info(\n                                &quot;Parameter 0 NAME:&quot;+p.getActualName()+&quot;:&quot;+p.getName()+&quot;:&quot;+p.getInternalName());\n                    };\n                    return isTarget;\n                }\n            })\n            .intercept(MethodDelegation.to(\n                    OiiInterceptor.class\n            ));\n}\n</code></pre>\n<p>However, its getActualName() returns empty string.</p>\n<pre><code>[INFO] OiiPlugin processing class com.example.research.oii.client.ExampleClient\n[INFO] Parameter 0 NAME::arg0:arg0\n</code></pre>\n<p>I did add javac -g:vars parameter through maven plugin config, to instruct javac put parameter names into the .class files.</p>\n<pre><code>    &lt;plugin&gt;\n      &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n      &lt;version&gt;3.8.0&lt;/version&gt;\n      &lt;configuration&gt;\n        &lt;compilerArgs&gt;\n          &lt;arg&gt;-g:vars&lt;/arg&gt;\n        &lt;/compilerArgs&gt;\n      &lt;/configuration&gt;\n    &lt;/plugin&gt;\n</code></pre>\n<p>What else can I do?</p>\n<p>Thanks!</p>\n<hr />\n<p>Post Note:</p>\n<p>Thanks @boneill for the answer. After using -parameters with compiler:</p>\n<ol>\n<li>The TypeDescription API is able to get the actual name</li>\n<li>The Java reflection API can also get the actual name, with a catch - the parameter names can only be obtained from the Method annotated with @Origin, not from the Method annotated with @SuperMethod</li>\n</ol>\n<pre><code>    @RuntimeType\n    public static Object intercept(\n            @This Object self,\n            @Origin Method method, \n            @AllArguments Object[] args,\n            @SuperMethod Method superMethod \n    ) throws Throwable {\n        // need to get parameter name from @Origin method, not @SuperMethod\n        Parameter[] parameters = method.getParameters(); \n        Object[] mockInterceptionParameters = new Object[parameters.length*2];\n        for (int i=0; i&lt;parameters.length; i++) {\n            Parameter p = parameters[i];\n            mockInterceptionParameters[i*2] = p.getName();\n            mockInterceptionParameters[i*2+1] = args[i];\n        }\n        .... ....\n    }\n</code></pre>\n"},{"tags":["java","reflections"],"owner":{"account_id":476363,"reputation":16869,"user_id":887235,"accept_rate":80,"display_name":"Vicky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1659577138,"creation_date":1659406736,"question_id":73201338,"body_markdown":"I have some existing code which uses `Reflections` like this:\r\n\r\n        ClassLoader myClassLoader = MyClassUtils.getMyClassLoader();\r\n        // above call returns a URLClassLoader\r\n        Reflections reflections = new Reflections(myClassLoader);\r\n\r\nThis code was working fine up until version `0.9.12`\r\n\r\nHowever, its breaking in versions `0.10.1` and `0.10.2`.\r\n\r\nOn checking the sources, I found that in `ConfigurationBuilder` class of `0.9.12`, there was this logic in `build` method of `ConfigurationBuilder`:\r\n\r\n    else if (param instanceof ClassLoader) { /* already taken care */ }\r\n\r\nHowever, this has been removed in the future versions. Because of this, if the params are instance of `ClassLoader` it throws `ReflectionsException`.\r\n\r\nCan anyone please guide if the way we use this has changed ?\r\n\r\nThanks!","title":"Reflections 0.10.1 and 0.10.2 broken for ClassLoaders?","body":"<p>I have some existing code which uses <code>Reflections</code> like this:</p>\n<pre><code>    ClassLoader myClassLoader = MyClassUtils.getMyClassLoader();\n    // above call returns a URLClassLoader\n    Reflections reflections = new Reflections(myClassLoader);\n</code></pre>\n<p>This code was working fine up until version <code>0.9.12</code></p>\n<p>However, its breaking in versions <code>0.10.1</code> and <code>0.10.2</code>.</p>\n<p>On checking the sources, I found that in <code>ConfigurationBuilder</code> class of <code>0.9.12</code>, there was this logic in <code>build</code> method of <code>ConfigurationBuilder</code>:</p>\n<pre><code>else if (param instanceof ClassLoader) { /* already taken care */ }\n</code></pre>\n<p>However, this has been removed in the future versions. Because of this, if the params are instance of <code>ClassLoader</code> it throws <code>ReflectionsException</code>.</p>\n<p>Can anyone please guide if the way we use this has changed ?</p>\n<p>Thanks!</p>\n"},{"tags":["java","regex"],"answers":[{"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1659575429,"creation_date":1659554865,"answer_id":73226804,"question_id":73226604,"body_markdown":"According to requirements\r\n\r\n1. the substring &quot;fizz&quot;\r\n2. followed by any integer 0+\r\n3. followed by an equals sign (&quot;=&quot;)\r\n4. followed by another string of any kind, a.k.a. the &quot;fizz value&quot;\r\n5. terminated by the first whitespace (included tabs, newlines, etc.)\r\n\r\nregex which fulfill it can look like\r\n\r\n1. `fizz`\r\n2. `\\d+`\r\n3. `=`  \r\n4. -5. `\\S+` - one or more of any NON-whitespace characters.\r\n\r\nwhich gives us `&quot;fizz\\\\d+=\\\\S+&quot;`. \r\n\r\nBut since you want to only modify some part of that match, and *reuse* other we can wrap those parts in groups like `&quot;(fizz\\\\d+=)(\\\\S+)&quot;`. This way our replacement will need to \r\n- assign back what was found in `&quot;(fizz\\\\d+=)` \r\n- modify what was found in `&quot;(\\\\S+)&quot;`\r\n  - this modification is simply assigning X repeated `n` times where `n` is length of what is found in group `&quot;(\\\\S+)&quot;`.\r\n\r\nIn other words your code can look like\r\n\r\n```\r\nclass Masker {\r\n\r\n    private static Pattern p = Pattern.compile(&quot;(fizz\\\\d+=)(\\\\S+)&quot;);\r\n\r\n    public static String mask(String input) {\r\n        return p.matcher(input)\r\n                .replaceAll(match -&gt; match.group(1)+&quot;X&quot;.repeat(match.group(2).length()));\r\n    }\r\n\r\n\r\n    //DEMO\r\n    public static void main(String[] args) throws Exception {\r\n        String input = &quot;Some initial text fizz0=fj49jc49fj59 then some more fizz101023=jjj&quot;;\r\n        String masked = Masker.mask(input);\r\n        System.out.println(input);\r\n        System.out.println(masked);\r\n    }\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n```\r\nSome initial text fizz0=fj49jc49fj59 then some more fizz101023=jjj\r\nSome initial text fizz0=XXXXXXXXXXXX then some more fizz101023=XXX\r\n```\r\n\r\n\r\n----\r\n### Version 2 - with [named-groups][1] so more readable/easier to maintain\r\n\r\n```\r\nclass Masker {\r\n    \r\n    private static Pattern p = Pattern.compile(&quot;(?&lt;token&gt;fizz\\\\d+=)(?&lt;value&gt;\\\\S+)&quot;);\r\n    public static String mask(String input) {\r\n\r\n        StringBuilder sb = new StringBuilder();\r\n        Matcher m = p.matcher(input);\r\n\r\n        while(m.find()){\r\n            String token = m.group(&quot;token&quot;);\r\n            String value = m.group(&quot;value&quot;);\r\n            String maskedValue = &quot;X&quot;.repeat(value.length());\r\n            m.appendReplacement(sb, token+maskedValue);\r\n        }\r\n        m.appendTail(sb);\r\n\r\n        return sb.toString();\r\n    }\r\n\r\n\r\n    //DEMO\r\n    public static void main(String[] args) throws Exception {\r\n        String input = &quot;Some initial text fizz0=fj49jc49fj59 then some more fizz101023=jjj&quot;;\r\n        String masked = Masker.mask(input);\r\n        System.out.println(input);\r\n        System.out.println(masked);\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://www.regular-expressions.info/named.html","title":"Replacing all regex matches with masking characters in Java","body":"<p>According to requirements</p>\n<ol>\n<li>the substring &quot;fizz&quot;</li>\n<li>followed by any integer 0+</li>\n<li>followed by an equals sign (&quot;=&quot;)</li>\n<li>followed by another string of any kind, a.k.a. the &quot;fizz value&quot;</li>\n<li>terminated by the first whitespace (included tabs, newlines, etc.)</li>\n</ol>\n<p>regex which fulfill it can look like</p>\n<ol>\n<li><code>fizz</code></li>\n<li><code>\\d+</code></li>\n<li><code>=</code></li>\n<li>-5. <code>\\S+</code> - one or more of any NON-whitespace characters.</li>\n</ol>\n<p>which gives us <code>&quot;fizz\\\\d+=\\\\S+&quot;</code>.</p>\n<p>But since you want to only modify some part of that match, and <em>reuse</em> other we can wrap those parts in groups like <code>&quot;(fizz\\\\d+=)(\\\\S+)&quot;</code>. This way our replacement will need to</p>\n<ul>\n<li>assign back what was found in <code>&quot;(fizz\\\\d+=)</code></li>\n<li>modify what was found in <code>&quot;(\\\\S+)&quot;</code>\n<ul>\n<li>this modification is simply assigning X repeated <code>n</code> times where <code>n</code> is length of what is found in group <code>&quot;(\\\\S+)&quot;</code>.</li>\n</ul>\n</li>\n</ul>\n<p>In other words your code can look like</p>\n<pre><code>class Masker {\n\n    private static Pattern p = Pattern.compile(&quot;(fizz\\\\d+=)(\\\\S+)&quot;);\n\n    public static String mask(String input) {\n        return p.matcher(input)\n                .replaceAll(match -&gt; match.group(1)+&quot;X&quot;.repeat(match.group(2).length()));\n    }\n\n\n    //DEMO\n    public static void main(String[] args) throws Exception {\n        String input = &quot;Some initial text fizz0=fj49jc49fj59 then some more fizz101023=jjj&quot;;\n        String masked = Masker.mask(input);\n        System.out.println(input);\n        System.out.println(masked);\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>Some initial text fizz0=fj49jc49fj59 then some more fizz101023=jjj\nSome initial text fizz0=XXXXXXXXXXXX then some more fizz101023=XXX\n</code></pre>\n<hr />\n<h3>Version 2 - with <a href=\"https://www.regular-expressions.info/named.html\" rel=\"nofollow noreferrer\">named-groups</a> so more readable/easier to maintain</h3>\n<pre><code>class Masker {\n    \n    private static Pattern p = Pattern.compile(&quot;(?&lt;token&gt;fizz\\\\d+=)(?&lt;value&gt;\\\\S+)&quot;);\n    public static String mask(String input) {\n\n        StringBuilder sb = new StringBuilder();\n        Matcher m = p.matcher(input);\n\n        while(m.find()){\n            String token = m.group(&quot;token&quot;);\n            String value = m.group(&quot;value&quot;);\n            String maskedValue = &quot;X&quot;.repeat(value.length());\n            m.appendReplacement(sb, token+maskedValue);\n        }\n        m.appendTail(sb);\n\n        return sb.toString();\n    }\n\n\n    //DEMO\n    public static void main(String[] args) throws Exception {\n        String input = &quot;Some initial text fizz0=fj49jc49fj59 then some more fizz101023=jjj&quot;;\n        String masked = Masker.mask(input);\n        System.out.println(input);\n        System.out.println(masked);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":6802882,"reputation":195,"user_id":5235665,"display_name":"hotmeatballsoup"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":429,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73226804,"answer_count":1,"score":1,"last_activity_date":1659575429,"creation_date":1659553777,"question_id":73226604,"body_markdown":"Java 11 here. I have a huge `String` that will contain 0+ instances of the following &quot;**fizz token**&quot;:\r\n\r\n- the substring &quot;_fizz_&quot;\r\n- followed by any integer 0+\r\n- followed by an equals sign (&quot;=&quot;)\r\n- followed by another string of any kind, a.k.a. the &quot;_fizz value_&quot;\r\n- terminated by the first whitespace (included tabs, newlines, etc.)\r\n\r\nSo some examples of a valid fizz token:\r\n\r\n1. fizz0=fj49jc49fj59\r\n2. fizz39=f44kk5k59\r\n3. fizz101023=jjj\r\n\r\nSome examples of invalid fizz tokens:\r\n\r\n- `fizz=9d94dj49j4` &lt;-- missing an integer after &quot;fizz&quot; and before &quot;=&quot;\r\n- `fizz2=` &lt;-- missing a fizz value after &quot;=&quot;\r\n\r\nI am trying to write a Java method that will:\r\n\r\n- Find all instances of matching fizz tokens inside my huge input `String`\r\n- Obtain each fizz token&#39;s value\r\n- Replace each character of the token value with an upper-case X (&quot;X&quot;)\r\n\r\nSo for example:\r\n```\r\n| Fizz Token         | Token Value  | Final Result       |\r\n|--------------------|--------------|--------------------|\r\n| fizz0=fj49jc49fj59 | fj49jc49fj59 | fizz0=XXXXXXXXXXXX |\r\n| fizz39=f44kk5k59   | f44kk5k59    | fizz39=XXXXXXXXX   |\r\n| fizz101023=jjj     | jjj          | fizz101023=XXX     |\r\n```\r\n\r\nI need the method to do this replacement with the token values for **all fizz tokens** found in the input sting, hence:\r\n```\r\nString input = &quot;Some initial text fizz0=fj49jc49fj59 then some more fizz101023=jjj&quot;;\r\nString masked = mask(input);\r\n\r\n// Outputs: Some initial text fizz0=XXXXXXXXXXXX then some more fizz101023=XXX\r\nSystem.out.println(masked);\r\n```\r\n\r\nMy best attempt thus far is a massive WIP:\r\n```\r\npublic class Masker {\r\n    private Pattern fizzTokenPattern = Pattern.compile(&quot;fizz{d*}=*&quot;);\r\n    public String mask(String input) {\r\n        Matcher matcher = fizzTokenPattern.matcher(input);\r\n        int numMatches = matcher.groupCount();\r\n        for (int i = 0; i &lt; numMatches; i++) {\r\n            // how to get the token value from the group?\r\n            String tokenValue = matcher.group(i); // ex: fj49jc49fj59\r\n            // how to replace each character with an X?\r\n            // ex: fj49jc49fj59 ==&gt; XXXXXXXXXXXX\r\n            String masked = tokenValue.replaceAll(&quot;*&quot;, &quot;X&quot;);\r\n            // how to grab the original (matched) token and replace it with the new\r\n            // &#39;masked&#39; string?\r\n            String entireTokenWithValue = input.substring(matcher.group(i));\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI feel like I&#39;m in the ballpark but missing some core concepts. Anybody have any ideas?","title":"Replacing all regex matches with masking characters in Java","body":"<p>Java 11 here. I have a huge <code>String</code> that will contain 0+ instances of the following &quot;<strong>fizz token</strong>&quot;:</p>\n<ul>\n<li>the substring &quot;<em>fizz</em>&quot;</li>\n<li>followed by any integer 0+</li>\n<li>followed by an equals sign (&quot;=&quot;)</li>\n<li>followed by another string of any kind, a.k.a. the &quot;<em>fizz value</em>&quot;</li>\n<li>terminated by the first whitespace (included tabs, newlines, etc.)</li>\n</ul>\n<p>So some examples of a valid fizz token:</p>\n<ol>\n<li>fizz0=fj49jc49fj59</li>\n<li>fizz39=f44kk5k59</li>\n<li>fizz101023=jjj</li>\n</ol>\n<p>Some examples of invalid fizz tokens:</p>\n<ul>\n<li><code>fizz=9d94dj49j4</code> &lt;-- missing an integer after &quot;fizz&quot; and before &quot;=&quot;</li>\n<li><code>fizz2=</code> &lt;-- missing a fizz value after &quot;=&quot;</li>\n</ul>\n<p>I am trying to write a Java method that will:</p>\n<ul>\n<li>Find all instances of matching fizz tokens inside my huge input <code>String</code></li>\n<li>Obtain each fizz token's value</li>\n<li>Replace each character of the token value with an upper-case X (&quot;X&quot;)</li>\n</ul>\n<p>So for example:</p>\n<pre><code>| Fizz Token         | Token Value  | Final Result       |\n|--------------------|--------------|--------------------|\n| fizz0=fj49jc49fj59 | fj49jc49fj59 | fizz0=XXXXXXXXXXXX |\n| fizz39=f44kk5k59   | f44kk5k59    | fizz39=XXXXXXXXX   |\n| fizz101023=jjj     | jjj          | fizz101023=XXX     |\n</code></pre>\n<p>I need the method to do this replacement with the token values for <strong>all fizz tokens</strong> found in the input sting, hence:</p>\n<pre><code>String input = &quot;Some initial text fizz0=fj49jc49fj59 then some more fizz101023=jjj&quot;;\nString masked = mask(input);\n\n// Outputs: Some initial text fizz0=XXXXXXXXXXXX then some more fizz101023=XXX\nSystem.out.println(masked);\n</code></pre>\n<p>My best attempt thus far is a massive WIP:</p>\n<pre><code>public class Masker {\n    private Pattern fizzTokenPattern = Pattern.compile(&quot;fizz{d*}=*&quot;);\n    public String mask(String input) {\n        Matcher matcher = fizzTokenPattern.matcher(input);\n        int numMatches = matcher.groupCount();\n        for (int i = 0; i &lt; numMatches; i++) {\n            // how to get the token value from the group?\n            String tokenValue = matcher.group(i); // ex: fj49jc49fj59\n            // how to replace each character with an X?\n            // ex: fj49jc49fj59 ==&gt; XXXXXXXXXXXX\n            String masked = tokenValue.replaceAll(&quot;*&quot;, &quot;X&quot;);\n            // how to grab the original (matched) token and replace it with the new\n            // 'masked' string?\n            String entireTokenWithValue = input.substring(matcher.group(i));\n        }\n    }\n}\n</code></pre>\n<p>I feel like I'm in the ballpark but missing some core concepts. Anybody have any ideas?</p>\n"},{"tags":["java","amazon-web-services","amazon-s3"],"answers":[{"tags":[],"owner":{"account_id":13879775,"reputation":5228,"user_id":10020419,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1659574514,"creation_date":1568300044,"answer_id":57909405,"question_id":55071159,"body_markdown":"I was able to overcome this by setting the [`ClientConfig`](https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/ClientConfiguration.html#withTcpKeepAlive-boolean-) to keep the connection alive\r\n\r\n    AmazonS3ClientBuilder\r\n       .standard()\r\n       .withCredentials(new DefaultAWSCredentialsProviderChain())\r\n       .withClientConfiguration(new ClientConfiguration().withTcpKeepAlive(true)) //Note withTcpKeepAlive method is on ClientConfiguration\r\n       .build();","title":"Java.net.SocketException: Connection reset when reading file from S3","body":"<p>I was able to overcome this by setting the <a href=\"https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/ClientConfiguration.html#withTcpKeepAlive-boolean-\" rel=\"nofollow noreferrer\"><code>ClientConfig</code></a> to keep the connection alive</p>\n<pre><code>AmazonS3ClientBuilder\n   .standard()\n   .withCredentials(new DefaultAWSCredentialsProviderChain())\n   .withClientConfiguration(new ClientConfiguration().withTcpKeepAlive(true)) //Note withTcpKeepAlive method is on ClientConfiguration\n   .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12031957,"reputation":1,"user_id":8801914,"display_name":"jackk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1595586324,"creation_date":1595584954,"answer_id":63071348,"question_id":55071159,"body_markdown":"I ran into same issue with aws sdk **1.X**.\r\n\r\nStrange thing here is, it&#39;s working fine in local machine and Connection reset while application runs on server.\r\n\r\nTried with `withTcpKeepAlive(true)`, but result was same ie,\r\n\r\n&gt; Java.net.SocketException: Connection reset \r\n\r\nA workaround\r\n--\r\nI tried `withRange(startPosition,endPosition)` until I read all data and it  worked. \r\n\r\n","title":"Java.net.SocketException: Connection reset when reading file from S3","body":"<p>I ran into same issue with aws sdk <strong>1.X</strong>.</p>\n<p>Strange thing here is, it's working fine in local machine and Connection reset while application runs on server.</p>\n<p>Tried with <code>withTcpKeepAlive(true)</code>, but result was same ie,</p>\n<blockquote>\n<p>Java.net.SocketException: Connection reset</p>\n</blockquote>\n<h2>A workaround</h2>\n<p>I tried <code>withRange(startPosition,endPosition)</code> until I read all data and it  worked.</p>\n"},{"tags":[],"owner":{"account_id":1852774,"reputation":79,"user_id":1678954,"display_name":"Aswani"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1603816611,"creation_date":1603816611,"answer_id":64558945,"question_id":55071159,"body_markdown":"After i upgrade s3 proxy to 1.6.0 and aws-java-sdk-s3 to 1.1.285 connection reset issue is fixed.","title":"Java.net.SocketException: Connection reset when reading file from S3","body":"<p>After i upgrade s3 proxy to 1.6.0 and aws-java-sdk-s3 to 1.1.285 connection reset issue is fixed.</p>\n"}],"owner":{"account_id":2296102,"reputation":215,"user_id":2017502,"accept_rate":27,"display_name":"user2017502"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9073,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":3,"score":6,"last_activity_date":1659574514,"creation_date":1552080014,"question_id":55071159,"body_markdown":"I&#39;m trying to read some files from S3 and do some processing on each file. I can get through some files, but I keep getting **Java.net.SocketException: Connection reset** at the same line in a particular file during processing. The file in question should be ok though because I can process it locally using the same class and method (conversionUtils.convert()).\r\n\r\nService class:\r\n\r\n    public class FileService {\r\n    \r\n      @Inject\r\n      private S3Utils s3utils;\r\n\r\n      private ConversionUtils conversionUtils = new ConversionUtils();\r\n\r\n      public void processFile() {\r\n        List&lt;S3ObjectSummary&gt; files = s3utils.getAllFiles();\r\n        List&lt;S3Object&gt; unprocessedFiles = s3utils.getUnprocessedFiles(files);\r\n  \r\n        for(S3Object file: unprocessedFiles) {\r\n          InputStream content = file.getObjectContent();\r\n          List&lt;Record&gt; records = conversionUtils.convert(content); //Exception thrown here\r\n        }\r\n      }\r\n    }\r\n\r\nS3Utils class: \r\n\r\n    @Component\r\n    public class S3utils {\r\n      @Inject AmazonS3 amazonS3;\r\n\r\n      public List&lt;S3ObjectSummary&gt; getAllFiles() {\r\n        ListObjectsV2Request request = new ListObjectsV2Request().withBucketName(&#39;something&#39;).withPrefix(&#39;some_prefix&#39;);\r\n        ListObjectsV2Result result = amazonS3.listObjectsV2(request);;\r\n\r\n        return result.getObjectSummaries();\r\n      }\r\n\r\n      public List&lt;S3Object&gt; getUnprocessedFiles(List&lt;S3ObjectSummary&gt; files) {\r\n        //do some filtering here\r\n\r\n        List&lt;S3Object&gt; unprocessedFiles = new ArrayList&lt;&gt;();\r\n        for (S3ObjectSummary summary : filteredSummaries) {\r\n          S3Object s3Object = amazonS3.getObject(new GetObjectRequest(summary.getBucketName(), summary.getKey()));\r\n          unprocessedFiles.add(S3Object);\r\n        }\r\n        return unprocessedFiles;\r\n      }\r\n    }\r\n\r\nConfig class:\r\n\r\n    @Configuration\r\n    public class Config {\r\n      @Bean\r\n      public AmazonS3 amazonS3() {\r\n        return AmazonS3ClientBuilder.standard().withCredentials(new DefaultAWSCredentialsProviderChain()).build();\r\n      }\r\n    }\r\n\r\nI&#39;ve read some other threads with similar errors where the issue was that the AmazonS3 client was being garbage collected, and therefore closing the stream, but I&#39;m wondering if that&#39;s the case here. Any ideas on what the issue is? Thanks.","title":"Java.net.SocketException: Connection reset when reading file from S3","body":"<p>I'm trying to read some files from S3 and do some processing on each file. I can get through some files, but I keep getting <strong>Java.net.SocketException: Connection reset</strong> at the same line in a particular file during processing. The file in question should be ok though because I can process it locally using the same class and method (conversionUtils.convert()).</p>\n\n<p>Service class:</p>\n\n<pre><code>public class FileService {\n\n  @Inject\n  private S3Utils s3utils;\n\n  private ConversionUtils conversionUtils = new ConversionUtils();\n\n  public void processFile() {\n    List&lt;S3ObjectSummary&gt; files = s3utils.getAllFiles();\n    List&lt;S3Object&gt; unprocessedFiles = s3utils.getUnprocessedFiles(files);\n\n    for(S3Object file: unprocessedFiles) {\n      InputStream content = file.getObjectContent();\n      List&lt;Record&gt; records = conversionUtils.convert(content); //Exception thrown here\n    }\n  }\n}\n</code></pre>\n\n<p>S3Utils class: </p>\n\n<pre><code>@Component\npublic class S3utils {\n  @Inject AmazonS3 amazonS3;\n\n  public List&lt;S3ObjectSummary&gt; getAllFiles() {\n    ListObjectsV2Request request = new ListObjectsV2Request().withBucketName('something').withPrefix('some_prefix');\n    ListObjectsV2Result result = amazonS3.listObjectsV2(request);;\n\n    return result.getObjectSummaries();\n  }\n\n  public List&lt;S3Object&gt; getUnprocessedFiles(List&lt;S3ObjectSummary&gt; files) {\n    //do some filtering here\n\n    List&lt;S3Object&gt; unprocessedFiles = new ArrayList&lt;&gt;();\n    for (S3ObjectSummary summary : filteredSummaries) {\n      S3Object s3Object = amazonS3.getObject(new GetObjectRequest(summary.getBucketName(), summary.getKey()));\n      unprocessedFiles.add(S3Object);\n    }\n    return unprocessedFiles;\n  }\n}\n</code></pre>\n\n<p>Config class:</p>\n\n<pre><code>@Configuration\npublic class Config {\n  @Bean\n  public AmazonS3 amazonS3() {\n    return AmazonS3ClientBuilder.standard().withCredentials(new DefaultAWSCredentialsProviderChain()).build();\n  }\n}\n</code></pre>\n\n<p>I've read some other threads with similar errors where the issue was that the AmazonS3 client was being garbage collected, and therefore closing the stream, but I'm wondering if that's the case here. Any ideas on what the issue is? Thanks.</p>\n"},{"tags":["java","spring-boot","amazon-s3"],"comments":[{"owner":{"account_id":1185016,"reputation":3876,"user_id":1159167,"accept_rate":75,"display_name":"Ricardo"},"score":0,"creation_date":1659652613,"post_id":69324831,"comment_id":129351748,"body_markdown":"when setting up the `ClientConfiguration`, consider using `withXYZ()` methods instead of `setXYZ`, since they return the updated object so that additional method calls may be chained together. e.g. `new ClientConfiguration().withSocketTimeout(0).withTcpKeepAlive(true)`","body":"when setting up the <code>ClientConfiguration</code>, consider using <code>withXYZ()</code> methods instead of <code>setXYZ</code>, since they return the updated object so that additional method calls may be chained together. e.g. <code>new ClientConfiguration().withSocketTimeout(0).withTcpKeepAlive(&zwnj;&#8203;true)</code>"}],"answers":[{"tags":[],"owner":{"account_id":15258408,"reputation":972,"user_id":11009351,"display_name":"Kemal Kaplan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659573677,"creation_date":1632581275,"answer_id":69327220,"question_id":69324831,"body_markdown":"Although you set the `socketTimeout` in your code, according to the [documentation][1] there are several other timeouts which possibly related with this condition. You may try to set **`withRequestTimeout`** or **`withClientExecutionTimeout`**\r\n\r\nBut, you may also try to use a `BlockingQueue` to make your reads and writes in parallel. Check the following test for a very simple use case:\r\n\r\n```LANG-JAVA\r\n    @Test\r\n    public void t11() throws InterruptedException {\r\n\r\n        final BlockingQueue&lt;String&gt; taskQueue = new LinkedBlockingQueue&lt;&gt;();\r\n        final AtomicBoolean isFinished = new AtomicBoolean(false);\r\n\r\n        Thread t1 = new Thread(()-&gt;{\r\n            for (int i=1; i&lt;1000;i++){\r\n                taskQueue.add(&quot;Item &quot; + i);\r\n                try {\r\n                    Thread.sleep(10);\r\n                } catch (InterruptedException e) {\r\n                    //handle interrupt\r\n                }\r\n            }\r\n            isFinished.set(true);\r\n        });\r\n\r\n        long tick = System.currentTimeMillis();\r\n        Thread t2 = new Thread(()-&gt;{\r\n            while(!isFinished.get() || taskQueue.size()&gt;0) {\r\n                try {\r\n                    System.out.println(&quot;After &quot; + ( System.currentTimeMillis()-tick) + &quot; ms. - &quot; + taskQueue.take());\r\n                    Thread.sleep((long)(Math.random()*20));\r\n                } catch (InterruptedException e) {\r\n                    //handle interrupt\r\n                }\r\n\r\n            }\r\n        });\r\n\r\n        t1.start();\r\n        t2.start();\r\n        t1.join();\r\n        t2.join();\r\n        System.out.println(&quot;Done...&quot;);\r\n    }\r\n```\r\n\r\nBut there is one catch here; If you have a limited memory on your server, you may want to use an `ArrayBlockingQueue` instead of `LinkedBlockingQueue` to prevent possible memory problems...\r\n\r\n  [1]: https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/ClientConfiguration.html","title":"Socket exception when downloading large csv file from Amazon S3","body":"<p>Although you set the <code>socketTimeout</code> in your code, according to the <a href=\"https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/ClientConfiguration.html\" rel=\"nofollow noreferrer\">documentation</a> there are several other timeouts which possibly related with this condition. You may try to set <strong><code>withRequestTimeout</code></strong> or <strong><code>withClientExecutionTimeout</code></strong></p>\n<p>But, you may also try to use a <code>BlockingQueue</code> to make your reads and writes in parallel. Check the following test for a very simple use case:</p>\n<pre><code>    @Test\n    public void t11() throws InterruptedException {\n\n        final BlockingQueue&lt;String&gt; taskQueue = new LinkedBlockingQueue&lt;&gt;();\n        final AtomicBoolean isFinished = new AtomicBoolean(false);\n\n        Thread t1 = new Thread(()-&gt;{\n            for (int i=1; i&lt;1000;i++){\n                taskQueue.add(&quot;Item &quot; + i);\n                try {\n                    Thread.sleep(10);\n                } catch (InterruptedException e) {\n                    //handle interrupt\n                }\n            }\n            isFinished.set(true);\n        });\n\n        long tick = System.currentTimeMillis();\n        Thread t2 = new Thread(()-&gt;{\n            while(!isFinished.get() || taskQueue.size()&gt;0) {\n                try {\n                    System.out.println(&quot;After &quot; + ( System.currentTimeMillis()-tick) + &quot; ms. - &quot; + taskQueue.take());\n                    Thread.sleep((long)(Math.random()*20));\n                } catch (InterruptedException e) {\n                    //handle interrupt\n                }\n\n            }\n        });\n\n        t1.start();\n        t2.start();\n        t1.join();\n        t2.join();\n        System.out.println(&quot;Done...&quot;);\n    }\n</code></pre>\n<p>But there is one catch here; If you have a limited memory on your server, you may want to use an <code>ArrayBlockingQueue</code> instead of <code>LinkedBlockingQueue</code> to prevent possible memory problems...</p>\n"}],"owner":{"account_id":22855432,"reputation":21,"user_id":17000367,"display_name":"nax"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1063,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1659573677,"creation_date":1632562056,"question_id":69324831,"body_markdown":"I have a program which reads large (~600MB) csv file Amazon S3 line by line. When i start the app it runs fine for around 40-45 min and after that I am getting Socket exception.Tried multiple approach but result is pretty much same. I created a poc app to replicate the scenario and it is as below.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class readS3File {\r\n\r\n\r\n\r\n        public static void main(String[] args) throws IOException {\r\n            Regions clientRegion = Regions.US_WEST_2;\r\n            String bucketName = &quot;/test-bucket&quot;;\r\n            //final AmazonS3 s3Client;\r\n            String key = &quot;Unsaved/test.csv&quot;;\r\n            String accessKey = &quot;accessKey&quot;;\r\n            String secretKey = &quot;secretKey&quot;;\r\n            AWSCredentials credentials = new BasicAWSCredentials(accessKey, secretKey);\r\n            S3Object fullObject = null, objectPortion = null, headerOverrideObject = null;\r\n            try {\r\n\r\n                ClientConfiguration config = new ClientConfiguration();\r\n                config.setSocketTimeout(0);\r\n                config.withTcpKeepAlive(true);\r\n                AmazonS3 s3Client = AmazonS3ClientBuilder.standard()\r\n                        .withRegion(clientRegion)\r\n                        .withCredentials(new AWSStaticCredentialsProvider(credentials)).withClientConfiguration(config)\r\n                        .build();\r\n\r\n                ResponseHeaderOverrides headerOverrides = new ResponseHeaderOverrides()\r\n                        .withCacheControl(&quot;No-cache&quot;);\r\n                GetObjectRequest getObjectRequestHeaderOverride = new GetObjectRequest(bucketName, key)\r\n                        .withResponseHeaders(headerOverrides);\r\n                headerOverrideObject = s3Client.getObject(getObjectRequestHeaderOverride);\r\n                displayTextInputStream(headerOverrideObject.getObjectContent());\r\n\r\n\r\n            } catch (AmazonServiceException e) {\r\n                // The call was transmitted successfully, but Amazon S3 couldn&#39;t process\r\n                // it, so it returned an error response.\r\n                e.printStackTrace();\r\n            } catch (SdkClientException e) {\r\n                // Amazon S3 couldn&#39;t be contacted for a response, or the client\r\n                // couldn&#39;t parse the response from Amazon S3.\r\n                e.printStackTrace();\r\n            }\r\n            finally {\r\n                // To ensure that the network connection doesn&#39;t remain open, close any open input streams.\r\n                if (fullObject != null) {\r\n                    fullObject.close();\r\n                }\r\n                if (objectPortion != null) {\r\n                    objectPortion.close();\r\n                }\r\n                if (headerOverrideObject != null) {\r\n                    headerOverrideObject.close();\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n        private static void displayTextInputStream(InputStream input) throws IOException {\r\n            // Read the text input stream one line at a time and display each line.\r\n            BufferedReader reader = new BufferedReader(new InputStreamReader(input));\r\n\r\n            try {\r\n                String line = null;\r\n                long startTime = System.nanoTime();\r\n                int count=0;\r\n                while ((line = reader.readLine()) != null) {\r\n                    count=count+1;\r\n                    long stopTime = System.nanoTime();\r\n                    long elapsedTime = stopTime - startTime;\r\n                    double elapsedTimeInSecond = (double) elapsedTime / 1_000_000_000;\r\n                    System.out.println(line);\r\n                    System.out.println(&quot;Processing running for : &quot; + elapsedTimeInSecond + &quot;seconds , at line number ===== &quot; + count);\r\n                    // This sleep is to consider the time taken by backend job to handle the content read.\r\n                    Thread.sleep(5000);\r\n                }\r\n            } catch (IOException | InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n    Exception message is as below\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    javax.net.ssl.SSLException: Connection reset\r\n    \tat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:127)\r\n    \tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:327)\r\n    \tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:270)\r\n    \tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:265)\r\n    \tat java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:144)\r\n    \tat java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1199)\r\n    \tat java.base/sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1166)\r\n    \tat java.base/sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:832)\r\n    \tat org.apache.http.impl.conn.LoggingInputStream.read(LoggingInputStream.java:84)\r\n    \tat org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137)\r\n    \tat org.apache.http.impl.io.SessionInputBufferImpl.read(SessionInputBufferImpl.java:197)\r\n    \tat org.apache.http.impl.io.ContentLengthInputStream.read(ContentLengthInputStream.java:176)\r\n    \tat org.apache.http.conn.EofSensorInputStream.read(EofSensorInputStream.java:135)\r\n    \tat com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\r\n    \tat com.amazonaws.event.ProgressInputStream.read(ProgressInputStream.java:180)\r\n    \tat com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\r\n    \tat com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\r\n    \tat com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\r\n    \tat com.amazonaws.event.ProgressInputStream.read(ProgressInputStream.java:180)\r\n    \tat com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\r\n    \tat com.amazonaws.util.LengthCheckInputStream.read(LengthCheckInputStream.java:107)\r\n    \tat com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\r\n    \tat com.amazonaws.services.s3.internal.S3AbortableInputStream.read(S3AbortableInputStream.java:125)\r\n    \tat com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\r\n    \tat java.base/sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:284)\r\n    \tat java.base/sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:326)\r\n    \tat java.base/sun.nio.cs.StreamDecoder.read(StreamDecoder.java:178)\r\n    \tat java.base/java.io.InputStreamReader.read(InputStreamReader.java:185)\r\n    \tat java.base/java.io.BufferedReader.fill(BufferedReader.java:161)\r\n    \tat java.base/java.io.BufferedReader.readLine(BufferedReader.java:326)\r\n    \tat java.base/java.io.BufferedReader.readLine(BufferedReader.java:392)\r\n    \tat readS3File.displayTextInputStream(readS3File.java:92)\r\n    \tat readS3File.main(readS3File.java:57)\r\n    \tSuppressed: java.net.SocketException: Broken pipe (Write failed)\r\n    \t\tat java.base/java.net.SocketOutputStream.socketWrite0(Native Method)\r\n    \t\tat java.base/java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:110)\r\n    \t\tat java.base/java.net.SocketOutputStream.write(SocketOutputStream.java:150)\r\n    \t\tat java.base/sun.security.ssl.SSLSocketOutputRecord.encodeAlert(SSLSocketOutputRecord.java:81)\r\n    \t\tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:358)\r\n    \t\t... 31 more\r\n    Caused by: java.net.SocketException: Connection reset\r\n    \tat java.base/java.net.SocketInputStream.read(SocketInputStream.java:186)\r\n    \tat java.base/java.net.SocketInputStream.read(SocketInputStream.java:140)\r\n    \tat java.base/sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:467)\r\n    \tat java.base/sun.security.ssl.SSLSocketInputRecord.readFully(SSLSocketInputRecord.java:450)\r\n    \tat java.base/sun.security.ssl.SSLSocketInputRecord.decodeInputRecord(SSLSocketInputRecord.java:243)\r\n    \tat java.base/sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:181)\r\n    \tat java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:110)\r\n    \t... 28 more\r\n\r\n    Process finished with exit code 0\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nWhat is the best solution to overcome this issue?\r\n","title":"Socket exception when downloading large csv file from Amazon S3","body":"<p>I have a program which reads large (~600MB) csv file Amazon S3 line by line. When i start the app it runs fine for around 40-45 min and after that I am getting Socket exception.Tried multiple approach but result is pretty much same. I created a poc app to replicate the scenario and it is as below.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class readS3File {\n\n\n\n    public static void main(String[] args) throws IOException {\n        Regions clientRegion = Regions.US_WEST_2;\n        String bucketName = &quot;/test-bucket&quot;;\n        //final AmazonS3 s3Client;\n        String key = &quot;Unsaved/test.csv&quot;;\n        String accessKey = &quot;accessKey&quot;;\n        String secretKey = &quot;secretKey&quot;;\n        AWSCredentials credentials = new BasicAWSCredentials(accessKey, secretKey);\n        S3Object fullObject = null, objectPortion = null, headerOverrideObject = null;\n        try {\n\n            ClientConfiguration config = new ClientConfiguration();\n            config.setSocketTimeout(0);\n            config.withTcpKeepAlive(true);\n            AmazonS3 s3Client = AmazonS3ClientBuilder.standard()\n                    .withRegion(clientRegion)\n                    .withCredentials(new AWSStaticCredentialsProvider(credentials)).withClientConfiguration(config)\n                    .build();\n\n            ResponseHeaderOverrides headerOverrides = new ResponseHeaderOverrides()\n                    .withCacheControl(&quot;No-cache&quot;);\n            GetObjectRequest getObjectRequestHeaderOverride = new GetObjectRequest(bucketName, key)\n                    .withResponseHeaders(headerOverrides);\n            headerOverrideObject = s3Client.getObject(getObjectRequestHeaderOverride);\n            displayTextInputStream(headerOverrideObject.getObjectContent());\n\n\n        } catch (AmazonServiceException e) {\n            // The call was transmitted successfully, but Amazon S3 couldn't process\n            // it, so it returned an error response.\n            e.printStackTrace();\n        } catch (SdkClientException e) {\n            // Amazon S3 couldn't be contacted for a response, or the client\n            // couldn't parse the response from Amazon S3.\n            e.printStackTrace();\n        }\n        finally {\n            // To ensure that the network connection doesn't remain open, close any open input streams.\n            if (fullObject != null) {\n                fullObject.close();\n            }\n            if (objectPortion != null) {\n                objectPortion.close();\n            }\n            if (headerOverrideObject != null) {\n                headerOverrideObject.close();\n            }\n        }\n\n\n    }\n    private static void displayTextInputStream(InputStream input) throws IOException {\n        // Read the text input stream one line at a time and display each line.\n        BufferedReader reader = new BufferedReader(new InputStreamReader(input));\n\n        try {\n            String line = null;\n            long startTime = System.nanoTime();\n            int count=0;\n            while ((line = reader.readLine()) != null) {\n                count=count+1;\n                long stopTime = System.nanoTime();\n                long elapsedTime = stopTime - startTime;\n                double elapsedTimeInSecond = (double) elapsedTime / 1_000_000_000;\n                System.out.println(line);\n                System.out.println(&quot;Processing running for : &quot; + elapsedTimeInSecond + &quot;seconds , at line number ===== &quot; + count);\n                // This sleep is to consider the time taken by backend job to handle the content read.\n                Thread.sleep(5000);\n            }\n        } catch (IOException | InterruptedException e) {\n            e.printStackTrace();\n        }\n\n\n    }\n\n}\n\n\n\n\n\nException message is as below\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>javax.net.ssl.SSLException: Connection reset\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:127)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:327)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:270)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:265)\n    at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:144)\n    at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1199)\n    at java.base/sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1166)\n    at java.base/sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:832)\n    at org.apache.http.impl.conn.LoggingInputStream.read(LoggingInputStream.java:84)\n    at org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137)\n    at org.apache.http.impl.io.SessionInputBufferImpl.read(SessionInputBufferImpl.java:197)\n    at org.apache.http.impl.io.ContentLengthInputStream.read(ContentLengthInputStream.java:176)\n    at org.apache.http.conn.EofSensorInputStream.read(EofSensorInputStream.java:135)\n    at com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\n    at com.amazonaws.event.ProgressInputStream.read(ProgressInputStream.java:180)\n    at com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\n    at com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\n    at com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\n    at com.amazonaws.event.ProgressInputStream.read(ProgressInputStream.java:180)\n    at com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\n    at com.amazonaws.util.LengthCheckInputStream.read(LengthCheckInputStream.java:107)\n    at com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\n    at com.amazonaws.services.s3.internal.S3AbortableInputStream.read(S3AbortableInputStream.java:125)\n    at com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\n    at java.base/sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:284)\n    at java.base/sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:326)\n    at java.base/sun.nio.cs.StreamDecoder.read(StreamDecoder.java:178)\n    at java.base/java.io.InputStreamReader.read(InputStreamReader.java:185)\n    at java.base/java.io.BufferedReader.fill(BufferedReader.java:161)\n    at java.base/java.io.BufferedReader.readLine(BufferedReader.java:326)\n    at java.base/java.io.BufferedReader.readLine(BufferedReader.java:392)\n    at readS3File.displayTextInputStream(readS3File.java:92)\n    at readS3File.main(readS3File.java:57)\n    Suppressed: java.net.SocketException: Broken pipe (Write failed)\n        at java.base/java.net.SocketOutputStream.socketWrite0(Native Method)\n        at java.base/java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:110)\n        at java.base/java.net.SocketOutputStream.write(SocketOutputStream.java:150)\n        at java.base/sun.security.ssl.SSLSocketOutputRecord.encodeAlert(SSLSocketOutputRecord.java:81)\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:358)\n        ... 31 more\nCaused by: java.net.SocketException: Connection reset\n    at java.base/java.net.SocketInputStream.read(SocketInputStream.java:186)\n    at java.base/java.net.SocketInputStream.read(SocketInputStream.java:140)\n    at java.base/sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:467)\n    at java.base/sun.security.ssl.SSLSocketInputRecord.readFully(SSLSocketInputRecord.java:450)\n    at java.base/sun.security.ssl.SSLSocketInputRecord.decodeInputRecord(SSLSocketInputRecord.java:243)\n    at java.base/sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:181)\n    at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:110)\n    ... 28 more\n\nProcess finished with exit code 0\n</code></pre>\n<p>What is the best solution to overcome this issue?</p>\n"},{"tags":["java","hash"],"comments":[{"owner":{"account_id":26377,"reputation":352187,"user_id":68587,"accept_rate":95,"display_name":"John Kugelman"},"score":1,"creation_date":1659481561,"post_id":73214627,"comment_id":129304267,"body_markdown":"What are you using the hashes for? Are you after cryptographic security, or well-distributed hashes to avoid degenerate data structure performance, or what?","body":"What are you using the hashes for? Are you after cryptographic security, or well-distributed hashes to avoid degenerate data structure performance, or what?"},{"owner":{"account_id":3147269,"reputation":10469,"user_id":3075340,"accept_rate":70,"display_name":"Micro"},"score":0,"creation_date":1659481908,"post_id":73214627,"comment_id":129304317,"body_markdown":"@JohnKugelman I am seeking well-distributed hashes to avoid degenerate data structure performance. Security is not an issue.","body":"@JohnKugelman I am seeking well-distributed hashes to avoid degenerate data structure performance. Security is not an issue."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1659482662,"post_id":73214627,"comment_id":129304418,"body_markdown":"If you&#39;re using something like `HashMap`, then sequential hashes will be fine.  Most hash-based structures should be fine with sequential hashes, in fact.  Why so picky?","body":"If you&#39;re using something like <code>HashMap</code>, then sequential hashes will be fine.  Most hash-based structures should be fine with sequential hashes, in fact.  Why so picky?"},{"owner":{"account_id":3147269,"reputation":10469,"user_id":3075340,"accept_rate":70,"display_name":"Micro"},"score":0,"creation_date":1659482982,"post_id":73214627,"comment_id":129304453,"body_markdown":"@LouisWasserman I need a string so I can pass it to a de-duplicated system. I am not using a HashMap. Yes this is picky.","body":"@LouisWasserman I need a string so I can pass it to a de-duplicated system. I am not using a HashMap. Yes this is picky."}],"answers":[{"tags":[],"owner":{"account_id":7413926,"reputation":5474,"user_id":11374957,"display_name":"Kaan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1659573321,"creation_date":1659493526,"answer_id":73215672,"question_id":73214627,"body_markdown":"### Goals\r\n\r\nYou&#39;re looking for a way to:\r\n* take a timestamp generated by Date and create a String hash of it that is randomly distributed\r\n* the &quot;random&quot; nature isn&#39;t for cryptographic usage, or anything requiring true randomness\r\n* instead, you&#39;re looking for a way to take two nearly identical numbers  1659481151525 and 1659481151526, a difference of only 1  and produce values for each which are no longer sequential\r\n* the calculation needs to be &quot;fast&quot;\r\n\r\n### A possible solution\r\n\r\nDisclaimer: all hashing has a non-zero risk of collisions. I suspect that many/most DIY hasing approaches have a higher risk of collisions.\r\nYou didn&#39;t discuss collisions in your question though, so I gather it isn&#39;t a priority.\r\nI&#39;ll share this as an option to pursue (perhaps it&#39;s a starting point for something else like it), but I want to make it clear that while _I_ didn&#39;t consider collisions, it doesn&#39;t necessarily follow that it&#39;s ok for _you_ to also not consider collisions. Please consider collisions!\r\n\r\nYou gave the following example values as things to hash:\r\n```\r\n1659481151522\r\n1659481151523\r\n1659481151524\r\n1659481151525\r\n1659481151526\r\n```\r\n\r\nHere is a method which:\r\n* takes the numeric long input, makes a copy to &quot;temp&quot;\r\n* enters a loop that:\r\n\t* mods the last digit of &quot;temp&quot;, always adding 1 (in case it&#39;s &quot;0&quot;) multiplies it with the running total &quot;result&quot;\r\n\t* shifts bits in &quot;temp&quot; a little bit\r\n\t* repeats this process as long as &quot;temp&quot; is greater than 0\r\n\r\n```\r\nprivate static void modify(long original) {\r\n    long result = 1L;\r\n    long temp = original;\r\n    do {\r\n        result *= temp % 10 + 1;\r\n\t\ttemp = temp &gt;&gt; 1;\r\n    } while (temp &gt; 0);\r\n    System.out.println(&quot;original: &quot; + original + &quot; result: &quot; + result);\r\n}\r\n```\r\n\r\nHere&#39;s are those same five numbers, and the output from running the code:\r\n```\r\nmodify(1659481151522L);\r\nmodify(1659481151523L);\r\nmodify(1659481151524L);\r\nmodify(1659481151525L);\r\nmodify(1659481151526L);\r\n\r\noriginal: 1659481151522 result: -6525288372763164672\r\noriginal: 1659481151523 result: -8700384497017552896\r\noriginal: 1659481151524 result: 4267046283603279872\r\noriginal: 1659481151525 result: -2258242089159884800\r\noriginal: 1659481151526 result: -5562459257994215424\r\n```\r\nThe &quot;result&quot; values are quite different from each other, even though the inputs were sequential.\r\n\r\nI didn&#39;t benchmark anything, but the operations involved  bit shift, mod, addition, multiplication  are not complex.\r\n\r\n------\r\n\r\n### UPDATE: MD5 example\r\n\r\nBased on a comment below from *Micro*, here&#39;s an example showing how to calculate an MD5 hash for each long input value using [java.security.MessageDigest](https://docs.oracle.com/javase/8/docs/api/java/security/MessageDigest.html).\r\n\r\n```\r\nMessageDigest md = MessageDigest.getInstance(&quot;MD5&quot;);\r\nmd.update(String.valueOf(original).getBytes());\r\nString md5 = new BigInteger(1, md.digest()).toString(16);\r\n```\r\nRunning the program again (also, editing the output to print MD5, too) would look like this:\r\n```\r\noriginal: 1659481151522 md5: a19327a6224dc0174cd323cc8e33cd11 result: -6525288372763164672\r\noriginal: 1659481151523 md5: cfccb29f47f5f638c649e28f67a8f779 result: -8700384497017552896\r\noriginal: 1659481151524 md5: b326c9ffaf7e0be85a729647d2242566 result: 4267046283603279872\r\noriginal: 1659481151525 md5: bd0e15d7ee3056d7482cc379b69464fb result: -2258242089159884800\r\noriginal: 1659481151526 md5: c28abd0668da70e8187eb6bbf0388c7c result: -5562459257994215424\r\n```\r\n\r\n--------\r\n\r\n### Variation of original: Print hex value\r\n\r\nIf your goal is to include some letters in the mix  not just decimal values  you could take the &quot;original&quot; long value and simply format it differently. Here&#39;s an example doing that, also taking absolute value (avoid negative values). You might prefer one over the other, good to have options between a 16-char hexed long (ex: &quot;5a8e7b33db890000&quot;) and a 32-char MD5 hash (ex: &quot;a19327a6224dc0174cd323cc8e33cd11&quot;).\r\n```\r\nSystem.out.println(&quot;original: &quot; + original +\r\n        &quot; original (hex): &quot; + BigInteger.valueOf(Math.abs(result)).toString(16));\r\n\r\noriginal: 1659481151522 original (hex): 5a8e7b33db890000\r\noriginal: 1659481151523 original (hex): 78bdf99a7a0c0000\r\noriginal: 1659481151524 original (hex): 3b3797fcb6530000\r\noriginal: 1659481151525 original (hex): 1f56e33725360000\r\noriginal: 1659481151526 original (hex): 4d31d33956540000\r\n```","title":"Hash a timestamp with random distribution","body":"<h3>Goals</h3>\n<p>You're looking for a way to:</p>\n<ul>\n<li>take a timestamp generated by Date and create a String hash of it that is randomly distributed</li>\n<li>the &quot;random&quot; nature isn't for cryptographic usage, or anything requiring true randomness</li>\n<li>instead, you're looking for a way to take two nearly identical numbers  1659481151525 and 1659481151526, a difference of only 1  and produce values for each which are no longer sequential</li>\n<li>the calculation needs to be &quot;fast&quot;</li>\n</ul>\n<h3>A possible solution</h3>\n<p>Disclaimer: all hashing has a non-zero risk of collisions. I suspect that many/most DIY hasing approaches have a higher risk of collisions.\nYou didn't discuss collisions in your question though, so I gather it isn't a priority.\nI'll share this as an option to pursue (perhaps it's a starting point for something else like it), but I want to make it clear that while <em>I</em> didn't consider collisions, it doesn't necessarily follow that it's ok for <em>you</em> to also not consider collisions. Please consider collisions!</p>\n<p>You gave the following example values as things to hash:</p>\n<pre><code>1659481151522\n1659481151523\n1659481151524\n1659481151525\n1659481151526\n</code></pre>\n<p>Here is a method which:</p>\n<ul>\n<li>takes the numeric long input, makes a copy to &quot;temp&quot;</li>\n<li>enters a loop that:\n<ul>\n<li>mods the last digit of &quot;temp&quot;, always adding 1 (in case it's &quot;0&quot;) multiplies it with the running total &quot;result&quot;</li>\n<li>shifts bits in &quot;temp&quot; a little bit</li>\n<li>repeats this process as long as &quot;temp&quot; is greater than 0</li>\n</ul>\n</li>\n</ul>\n<pre><code>private static void modify(long original) {\n    long result = 1L;\n    long temp = original;\n    do {\n        result *= temp % 10 + 1;\n        temp = temp &gt;&gt; 1;\n    } while (temp &gt; 0);\n    System.out.println(&quot;original: &quot; + original + &quot; result: &quot; + result);\n}\n</code></pre>\n<p>Here's are those same five numbers, and the output from running the code:</p>\n<pre><code>modify(1659481151522L);\nmodify(1659481151523L);\nmodify(1659481151524L);\nmodify(1659481151525L);\nmodify(1659481151526L);\n\noriginal: 1659481151522 result: -6525288372763164672\noriginal: 1659481151523 result: -8700384497017552896\noriginal: 1659481151524 result: 4267046283603279872\noriginal: 1659481151525 result: -2258242089159884800\noriginal: 1659481151526 result: -5562459257994215424\n</code></pre>\n<p>The &quot;result&quot; values are quite different from each other, even though the inputs were sequential.</p>\n<p>I didn't benchmark anything, but the operations involved  bit shift, mod, addition, multiplication  are not complex.</p>\n<hr />\n<h3>UPDATE: MD5 example</h3>\n<p>Based on a comment below from <em>Micro</em>, here's an example showing how to calculate an MD5 hash for each long input value using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/security/MessageDigest.html\" rel=\"nofollow noreferrer\">java.security.MessageDigest</a>.</p>\n<pre><code>MessageDigest md = MessageDigest.getInstance(&quot;MD5&quot;);\nmd.update(String.valueOf(original).getBytes());\nString md5 = new BigInteger(1, md.digest()).toString(16);\n</code></pre>\n<p>Running the program again (also, editing the output to print MD5, too) would look like this:</p>\n<pre><code>original: 1659481151522 md5: a19327a6224dc0174cd323cc8e33cd11 result: -6525288372763164672\noriginal: 1659481151523 md5: cfccb29f47f5f638c649e28f67a8f779 result: -8700384497017552896\noriginal: 1659481151524 md5: b326c9ffaf7e0be85a729647d2242566 result: 4267046283603279872\noriginal: 1659481151525 md5: bd0e15d7ee3056d7482cc379b69464fb result: -2258242089159884800\noriginal: 1659481151526 md5: c28abd0668da70e8187eb6bbf0388c7c result: -5562459257994215424\n</code></pre>\n<hr />\n<h3>Variation of original: Print hex value</h3>\n<p>If your goal is to include some letters in the mix  not just decimal values  you could take the &quot;original&quot; long value and simply format it differently. Here's an example doing that, also taking absolute value (avoid negative values). You might prefer one over the other, good to have options between a 16-char hexed long (ex: &quot;5a8e7b33db890000&quot;) and a 32-char MD5 hash (ex: &quot;a19327a6224dc0174cd323cc8e33cd11&quot;).</p>\n<pre><code>System.out.println(&quot;original: &quot; + original +\n        &quot; original (hex): &quot; + BigInteger.valueOf(Math.abs(result)).toString(16));\n\noriginal: 1659481151522 original (hex): 5a8e7b33db890000\noriginal: 1659481151523 original (hex): 78bdf99a7a0c0000\noriginal: 1659481151524 original (hex): 3b3797fcb6530000\noriginal: 1659481151525 original (hex): 1f56e33725360000\noriginal: 1659481151526 original (hex): 4d31d33956540000\n</code></pre>\n"}],"owner":{"account_id":3147269,"reputation":10469,"user_id":3075340,"accept_rate":70,"display_name":"Micro"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":596,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73215672,"answer_count":1,"score":1,"last_activity_date":1659573321,"creation_date":1659481219,"question_id":73214627,"body_markdown":"How can I take a timestamp generated by Date and create a String hash of it that is randomly distributed?\r\n\r\n    Date date = new Date().getTime();\r\n\r\nSo if I had timestamps that were sequential in order like this, they would have random string hashes (they can be any length but the shorter the better):\r\n\r\n\r\n    1659481151522\r\n    1659481151523\r\n    1659481151524\r\n    1659481151525\r\n    1659481151526\r\n\r\nI want to make it clear I do not want the resulting hashes to be sequential. I tried doing this, but the hashes were sequential:\r\n\r\n    String.valueOf(timestamp).hashCode() // Not what I want.\r\n\r\nThe hash needs to be able to be calculated as fast as possible, so a longer hash that calculates faster is preferable to a short hash that takes longer to create.","title":"Hash a timestamp with random distribution","body":"<p>How can I take a timestamp generated by Date and create a String hash of it that is randomly distributed?</p>\n<pre><code>Date date = new Date().getTime();\n</code></pre>\n<p>So if I had timestamps that were sequential in order like this, they would have random string hashes (they can be any length but the shorter the better):</p>\n<pre><code>1659481151522\n1659481151523\n1659481151524\n1659481151525\n1659481151526\n</code></pre>\n<p>I want to make it clear I do not want the resulting hashes to be sequential. I tried doing this, but the hashes were sequential:</p>\n<pre><code>String.valueOf(timestamp).hashCode() // Not what I want.\n</code></pre>\n<p>The hash needs to be able to be calculated as fast as possible, so a longer hash that calculates faster is preferable to a short hash that takes longer to create.</p>\n"},{"tags":["python","java","amazon-web-services","http","aws-application-load-balancer"],"answers":[{"tags":[],"owner":{"account_id":3706965,"reputation":56,"user_id":3085205,"display_name":"Hugo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659572440,"creation_date":1659572440,"answer_id":73229115,"question_id":73229000,"body_markdown":"What is the ALB health check status to your java application? (to / 8081) \r\n\r\nIs the target group in `InService` status? There are some [reasons](https://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-troubleshooting.html#target-not-inservice) the it&#39;s not `Inservice`\r\n\r\na bit confused - are your ALB listening to tcp/8080 and the health check is on tcp/8081?\r\n\r\nThe [400 error](https://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-troubleshooting.html#http-400-issues) looks like that is related to the backend code. not the health check.\r\n\r\nWhat if you send the request to the backend without the ALB? Coudl you get a valid response from your python code?","title":"HTTP Errors with AWS ALB","body":"<p>What is the ALB health check status to your java application? (to / 8081)</p>\n<p>Is the target group in <code>InService</code> status? There are some <a href=\"https://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-troubleshooting.html#target-not-inservice\" rel=\"nofollow noreferrer\">reasons</a> the it's not <code>Inservice</code></p>\n<p>a bit confused - are your ALB listening to tcp/8080 and the health check is on tcp/8081?</p>\n<p>The <a href=\"https://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-troubleshooting.html#http-400-issues\" rel=\"nofollow noreferrer\">400 error</a> looks like that is related to the backend code. not the health check.</p>\n<p>What if you send the request to the backend without the ALB? Coudl you get a valid response from your python code?</p>\n"}],"owner":{"account_id":25476111,"reputation":45,"user_id":19273327,"display_name":"carsona"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":316,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659572440,"creation_date":1659571119,"question_id":73229000,"body_markdown":"I am having basic HTTP related issues when sending a python post request to my AWS ALB which routes traffic to a Java WebSocket.\r\nIn terms of my client I am trying to send an HTTP post by sending the following python string to my ALB:\r\n\r\n\r\n    headers = &quot;&quot;&quot;\\\r\n        POST / HTTP/1.1\\r\r\n        Content-Type: {content_type}\\r\r\n        Content-Length: {content_length}\\r\r\n        Host: {host}\\r\r\n        Connection: close\\r\r\n        \\r\\n&quot;&quot;&quot;\r\n\r\n        post_dict = {&quot;totalPartitionCount&quot;: 3}\r\n        body = bytes(json.dumps(post_dict),encoding=&quot;utf-8&quot;)\r\n        header_bytes = headers.format(\r\n            content_type=&quot;text/plain&quot;,\r\n            content_length=len(body),\r\n            host=str(albAddr) + &quot;:&quot; + str(8080)\r\n        ).encode(&#39;utf-8&#39;)\r\n\r\n        payload = header_bytes + body\r\n\r\n        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\r\n        s.connect((albAddr, 8080))\r\n\r\n        s.sendall(payload)\r\n       ...\r\n\r\nBut in running this I am returned a 400 Bad format Error. \r\nSimilarly, my health checks to my AWS ALB are failing from the java server when sending an http response:\r\n\r\n            ServerSocket s = new ServerSocket(8081);\r\n            while(true) {\r\n                Socket sock = s.accept();\r\n                System.out.println(&quot;Sending Status OK...&quot;);\r\n                String httpResponse = &quot;HTTP/1.1 200 OK\\r\\n&quot;;\r\n\r\n\r\n                byte[] out = httpResponse.getBytes(StandardCharsets.UTF_8);\r\n\r\n                try {\r\n                    sock.getOutputStream().write(out);\r\n                } catch (IOException e) {\r\n                    System.out.println(&quot;Error in Writing Health Check Response&quot;);\r\n                }\r\n                System.out.println(&quot;OK status sent.&quot;);\r\n                sock.close();\r\n\r\n            }\r\n\r\n[![AWS Health Check settings][1]][1]\r\n\r\n\r\nAm I making simple mistakes regarding HTTP? I have looked at multiple different sources on how http requests are being formatted in python and java and have tried to use those but haven&#39;t found any luck. Thanks.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/77IXp.png","title":"HTTP Errors with AWS ALB","body":"<p>I am having basic HTTP related issues when sending a python post request to my AWS ALB which routes traffic to a Java WebSocket.\nIn terms of my client I am trying to send an HTTP post by sending the following python string to my ALB:</p>\n<pre><code>headers = &quot;&quot;&quot;\\\n    POST / HTTP/1.1\\r\n    Content-Type: {content_type}\\r\n    Content-Length: {content_length}\\r\n    Host: {host}\\r\n    Connection: close\\r\n    \\r\\n&quot;&quot;&quot;\n\n    post_dict = {&quot;totalPartitionCount&quot;: 3}\n    body = bytes(json.dumps(post_dict),encoding=&quot;utf-8&quot;)\n    header_bytes = headers.format(\n        content_type=&quot;text/plain&quot;,\n        content_length=len(body),\n        host=str(albAddr) + &quot;:&quot; + str(8080)\n    ).encode('utf-8')\n\n    payload = header_bytes + body\n\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    s.connect((albAddr, 8080))\n\n    s.sendall(payload)\n   ...\n</code></pre>\n<p>But in running this I am returned a 400 Bad format Error.\nSimilarly, my health checks to my AWS ALB are failing from the java server when sending an http response:</p>\n<pre><code>        ServerSocket s = new ServerSocket(8081);\n        while(true) {\n            Socket sock = s.accept();\n            System.out.println(&quot;Sending Status OK...&quot;);\n            String httpResponse = &quot;HTTP/1.1 200 OK\\r\\n&quot;;\n\n\n            byte[] out = httpResponse.getBytes(StandardCharsets.UTF_8);\n\n            try {\n                sock.getOutputStream().write(out);\n            } catch (IOException e) {\n                System.out.println(&quot;Error in Writing Health Check Response&quot;);\n            }\n            System.out.println(&quot;OK status sent.&quot;);\n            sock.close();\n\n        }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/77IXp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/77IXp.png\" alt=\"AWS Health Check settings\" /></a></p>\n<p>Am I making simple mistakes regarding HTTP? I have looked at multiple different sources on how http requests are being formatted in python and java and have tried to use those but haven't found any luck. Thanks.</p>\n"},{"tags":["java","java.util.logging"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":2,"creation_date":1659551123,"post_id":73223813,"comment_id":129323554,"body_markdown":"You might want to install a JUL to SLF4J bridge, see https://stackoverflow.com/questions/9117030/jul-to-slf4j-bridge","body":"You might want to install a JUL to SLF4J bridge, see <a href=\"https://stackoverflow.com/questions/9117030/jul-to-slf4j-bridge\">stackoverflow.com/questions/9117030/jul-to-slf4j-bridge</a>"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1659551319,"post_id":73223813,"comment_id":129323616,"body_markdown":"JUL does use a properties file, but I agree, adding the bridge would be better. Although, then the source code would still need changed to actually use slf4j classes, I believe","body":"JUL does use a properties file, but I agree, adding the bridge would be better. Although, then the source code would still need changed to actually use slf4j classes, I believe"},{"owner":{"account_id":1668843,"reputation":2514,"user_id":1535706,"accept_rate":67,"display_name":"rslemos"},"score":0,"creation_date":1659553309,"post_id":73223813,"comment_id":129324249,"body_markdown":"I don&#39;t have the source code, so any recommendation to change it is a non-starter. If I had this possibility I would change everything to `System.out.println`.","body":"I don&#39;t have the source code, so any recommendation to change it is a non-starter. If I had this possibility I would change everything to <code>System.out.println</code>."},{"owner":{"account_id":1668843,"reputation":2514,"user_id":1535706,"accept_rate":67,"display_name":"rslemos"},"score":0,"creation_date":1659553365,"post_id":73223813,"comment_id":129324259,"body_markdown":"I can&#39;t believe the easiest way is to add yet another library to the classpath (and perhaps configure it). But... well... I&#39;ll git it a try.","body":"I can&#39;t believe the easiest way is to add yet another library to the classpath (and perhaps configure it). But... well... I&#39;ll git it a try."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1659570834,"post_id":73223813,"comment_id":129328575,"body_markdown":"You should write your own configuration file and tell the `LogManager` to use it.","body":"You should write your own configuration file and tell the <code>LogManager</code> to use it."}],"answers":[{"tags":[],"owner":{"account_id":2826194,"reputation":10795,"user_id":2428802,"display_name":"jmehrens"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1659572135,"creation_date":1659558241,"answer_id":73227419,"question_id":73223813,"body_markdown":"&gt; All I want to do is to run this application with all available log messages spitting to stdout\r\n\r\n**Don&#39;t do this in production but it is the fast, easy, hacky way:**\r\n\r\nEdit the logging.properties file located in `java/conf`.  E.G. /usr/lib/jvm/default-java/conf/logging.properties\r\n\r\nThat file is setup to attach a ConsoleHandler to the root logger which is what you want to do this.  You just need to adjust the levels to see the output.  This is a global change so be aware.\r\n\r\nEdit that file and:\r\n\r\n - Change `.level= INFO` -&gt; `.level=ALL`\r\n - Change `java.util.logging.ConsoleHandler.level = INFO` to `java.util.logging.ConsoleHandler.level = ALL`\r\n - Save the changes and restart your app.\r\n\r\n\r\n**The recommended way:**\r\n\r\nMost JVMs are not in your control (production/dev server) so you can instead copy that file to a location you own and use the `java.util.logging.config.file` system property.\r\n\r\n E.G. `-Djava.util.logging.config.file=/home/myuser/myapp/logging.properties`\r\n\r\nThat way you are free to make changes that are local to your program and not global to the machine.","title":"What is the simplest way to configure `java.util.logging`","body":"<blockquote>\n<p>All I want to do is to run this application with all available log messages spitting to stdout</p>\n</blockquote>\n<p><strong>Don't do this in production but it is the fast, easy, hacky way:</strong></p>\n<p>Edit the logging.properties file located in <code>java/conf</code>.  E.G. /usr/lib/jvm/default-java/conf/logging.properties</p>\n<p>That file is setup to attach a ConsoleHandler to the root logger which is what you want to do this.  You just need to adjust the levels to see the output.  This is a global change so be aware.</p>\n<p>Edit that file and:</p>\n<ul>\n<li>Change <code>.level= INFO</code> -&gt; <code>.level=ALL</code></li>\n<li>Change <code>java.util.logging.ConsoleHandler.level = INFO</code> to <code>java.util.logging.ConsoleHandler.level = ALL</code></li>\n<li>Save the changes and restart your app.</li>\n</ul>\n<p><strong>The recommended way:</strong></p>\n<p>Most JVMs are not in your control (production/dev server) so you can instead copy that file to a location you own and use the <code>java.util.logging.config.file</code> system property.</p>\n<p>E.G. <code>-Djava.util.logging.config.file=/home/myuser/myapp/logging.properties</code></p>\n<p>That way you are free to make changes that are local to your program and not global to the machine.</p>\n"}],"owner":{"account_id":1668843,"reputation":2514,"user_id":1535706,"accept_rate":67,"display_name":"rslemos"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2097,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":73227419,"answer_count":1,"score":4,"last_activity_date":1659572135,"creation_date":1659539952,"question_id":73223813,"body_markdown":"I have a 3rd-party developed big complex application full of `java.util.logging.Logger#finer()` calls.\r\n\r\nNormally I use log4j and sl4j for logging, and I don&#39;t know very much of java.util.logging, even less about all the configuration details and possibilities.\r\n\r\nEvery single google about &quot;java.util.logging&quot; points to a full explanation about streams handlers, formatters, levels. Everyone assumes I really care about all this stuff (it is a reasonable assumption actually). But I couldn&#39;t care less.\r\n\r\nI&#39;m not really interested in separating logs per file, or file rotation, zipping, email, remote log etc. I&#39;m also not concerned about log level and message formatting thrills.\r\n\r\nAll I want to do is to run this application with all available log messages spitting to stdout.\r\n\r\nIs there an easy simple direct way to do this?\r\n\r\nSomething like jvmargs `-Djava.util.logging.level=FINEST -Djava.util.logging.to=stdout`.\r\nOr maybe some simple file dropped into some location in the classpath?\r\n","title":"What is the simplest way to configure `java.util.logging`","body":"<p>I have a 3rd-party developed big complex application full of <code>java.util.logging.Logger#finer()</code> calls.</p>\n<p>Normally I use log4j and sl4j for logging, and I don't know very much of java.util.logging, even less about all the configuration details and possibilities.</p>\n<p>Every single google about &quot;java.util.logging&quot; points to a full explanation about streams handlers, formatters, levels. Everyone assumes I really care about all this stuff (it is a reasonable assumption actually). But I couldn't care less.</p>\n<p>I'm not really interested in separating logs per file, or file rotation, zipping, email, remote log etc. I'm also not concerned about log level and message formatting thrills.</p>\n<p>All I want to do is to run this application with all available log messages spitting to stdout.</p>\n<p>Is there an easy simple direct way to do this?</p>\n<p>Something like jvmargs <code>-Djava.util.logging.level=FINEST -Djava.util.logging.to=stdout</code>.\nOr maybe some simple file dropped into some location in the classpath?</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1659590386,"post_id":73228711,"comment_id":129331501,"body_markdown":"This has nothing to do with Spring but with Jackson. So no there is no way to tell Spring which to use as it isn&#39;t Spring related (the fact that you use Spring doesn&#39;t make everything a Spring problem!). You can tell Jackson to ignore null values (which by default are exposed) by adding `@JsonInclude(Include.NON_NULL)` on the class, or bij configuring this on the `ObjectMapper` in use.","body":"This has nothing to do with Spring but with Jackson. So no there is no way to tell Spring which to use as it isn&#39;t Spring related (the fact that you use Spring doesn&#39;t make everything a Spring problem!). You can tell Jackson to ignore null values (which by default are exposed) by adding <code>@JsonInclude(Include.NON_NULL)</code> on the class, or bij configuring this on the <code>ObjectMapper</code> in use."},{"owner":{"account_id":4343394,"reputation":17,"user_id":4775407,"display_name":"Simon"},"score":0,"creation_date":1660755390,"post_id":73228711,"comment_id":129609584,"body_markdown":"@M.Deinum lol I&#39;m not trying to attack or disparage Spring here, but noted. Thanks for letting me know. The ignore null function won&#39;t work tho. Sometimes the things that do need to be included will actually have null values.","body":"@M.Deinum lol I&#39;m not trying to attack or disparage Spring here, but noted. Thanks for letting me know. The ignore null function won&#39;t work tho. Sometimes the things that do need to be included will actually have null values."}],"answers":[{"tags":[],"owner":{"account_id":12142871,"reputation":97,"user_id":8866086,"display_name":"sjy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659571712,"creation_date":1659571712,"answer_id":73229058,"question_id":73228711,"body_markdown":"try using  @jsonIgnore  example\r\n\r\n    public class ProfileStandardSection { \r\n     @JsonIgnore  \r\n    private final ProfileStandardRow totalRow;\r\n    // rest of the property same\r\n    }","title":"Spring @GetMapping without using every getter in the bean?","body":"<p>try using  @jsonIgnore  example</p>\n<pre><code>public class ProfileStandardSection { \n @JsonIgnore  \nprivate final ProfileStandardRow totalRow;\n// rest of the property same\n}\n</code></pre>\n"}],"owner":{"account_id":4343394,"reputation":17,"user_id":4775407,"display_name":"Simon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659571712,"creation_date":1659568005,"question_id":73228711,"body_markdown":"I have a bean, `ProfileStandardSection`, with overloaded constructors. I have a getter for each object in the bean, but not all constructors use every object. When I use the bean in my controller, the objects that aren&#39;t intended to be used still show up in the JSON object.\r\n\r\nCan I have it... not do that?\r\n\r\nMy bean:\r\n\r\n    public class ProfileStandardSection {\r\n    \r\n        private List&lt;ProfileStandardRow&gt; summandRows;\r\n        private List&lt;ProfileStandardRow&gt; topFive;\r\n        private final ProfileStandardRow totalRow;\r\n        private ProfileStandardRow pctOfSuperTotal;\r\n    \r\n        public ProfileStandardSection(List&lt;ProfileStandardRow&gt; summandRows, ProfileStandardRow totalRow, ProfileStandardRow pctOfSuperTotal) {\r\n            this.summandRows = summandRows;\r\n            this.totalRow = totalRow;\r\n            this.pctOfSuperTotal = pctOfSuperTotal;\r\n        }\r\n    \r\n        public ProfileStandardSection(List&lt;ProfileStandardRow&gt; topFive, ProfileStandardRow totalRow) {\r\n            this.topFive = topFive;\r\n            this.totalRow = totalRow;\r\n        }\r\n    \r\n        public List&lt;ProfileStandardRow&gt; getSummandRows() {\r\n            return summandRows;\r\n        }\r\n        \r\n        public List&lt;ProfileStandardRow&gt; getTopFive() {\r\n            return topFive;\r\n        }\r\n    \r\n        public ProfileStandardRow getTotalRow() {\r\n            return totalRow;\r\n        }\r\n    \r\n        public ProfileStandardRow getPctOfSuperTotal() {\r\n            return pctOfSuperTotal;\r\n        }\r\n    }\r\n\r\nMy controller calling the bean:\r\n\r\n    @CrossOrigin(origins = {&quot;${api-setting.cors-allowed-origin}&quot;})\r\n    @RestController\r\n    public class ProfileController {\r\n        @Autowired\r\n        private ProfileRepository profileRepository;\r\n        \r\n        @GetMapping(&quot;/liabilities/{company}/{year}&quot;)\r\n        public ProfileStandardSection getLiabilitiesSection(@PathVariable int company, @PathVariable int year) {\r\n            Optional&lt;ProfileStandardRow&gt; totalRow = profileRepository.findById(\r\n                    new RowId(company, year, RowInfo.TOTAL_LIABILITIES.getRowkey()));\r\n    \r\n            List&lt;ProfileStandardRow&gt; topFive = profileRepository.findAllById(Arrays.asList(\r\n                    new RowId(company, year, RowInfo.FIRST_HIGHEST_LIABILITY.getRowkey()),\r\n                    new RowId(company, year, RowInfo.SECOND_HIGHEST_LIABILITY.getRowkey()),\r\n                    new RowId(company, year, RowInfo.THIRD_HIGHEST_LIABILITY.getRowkey()),\r\n                    new RowId(company, year, RowInfo.FOURTH_HIGHEST_LIABILITY.getRowkey()),\r\n                    new RowId(company, year, RowInfo.FIFTH_HIGHEST_LIABILITY.getRowkey())));\r\n    \r\n            return new ProfileStandardSection(topFive, totalRow.get());\r\n        }\r\n    }\r\n\r\nThe JSON object I get back:\r\n\r\n    {\r\n    &quot;summandRows&quot;: null,\r\n    &quot;topFive&quot;: [...stuff I want...],\r\n    &quot;totalRow&quot;: {...stuff I want...},\r\n    &quot;pctOfSuperTotal&quot;: null\r\n    }\r\n\r\nIs there a way to configure this so that it doesn&#39;t include the `summandRows` and `pctOfSuperTotal` objects in the JSON?\r\n\r\nI know it&#39;s including them because there are getters for them in the bean which are just getting used cuz Spring things, and IntelliJ doesn&#39;t even realize it. So it&#39;s marking them as unused. So is there a way to tell Spring which getters to use?","title":"Spring @GetMapping without using every getter in the bean?","body":"<p>I have a bean, <code>ProfileStandardSection</code>, with overloaded constructors. I have a getter for each object in the bean, but not all constructors use every object. When I use the bean in my controller, the objects that aren't intended to be used still show up in the JSON object.</p>\n<p>Can I have it... not do that?</p>\n<p>My bean:</p>\n<pre><code>public class ProfileStandardSection {\n\n    private List&lt;ProfileStandardRow&gt; summandRows;\n    private List&lt;ProfileStandardRow&gt; topFive;\n    private final ProfileStandardRow totalRow;\n    private ProfileStandardRow pctOfSuperTotal;\n\n    public ProfileStandardSection(List&lt;ProfileStandardRow&gt; summandRows, ProfileStandardRow totalRow, ProfileStandardRow pctOfSuperTotal) {\n        this.summandRows = summandRows;\n        this.totalRow = totalRow;\n        this.pctOfSuperTotal = pctOfSuperTotal;\n    }\n\n    public ProfileStandardSection(List&lt;ProfileStandardRow&gt; topFive, ProfileStandardRow totalRow) {\n        this.topFive = topFive;\n        this.totalRow = totalRow;\n    }\n\n    public List&lt;ProfileStandardRow&gt; getSummandRows() {\n        return summandRows;\n    }\n    \n    public List&lt;ProfileStandardRow&gt; getTopFive() {\n        return topFive;\n    }\n\n    public ProfileStandardRow getTotalRow() {\n        return totalRow;\n    }\n\n    public ProfileStandardRow getPctOfSuperTotal() {\n        return pctOfSuperTotal;\n    }\n}\n</code></pre>\n<p>My controller calling the bean:</p>\n<pre><code>@CrossOrigin(origins = {&quot;${api-setting.cors-allowed-origin}&quot;})\n@RestController\npublic class ProfileController {\n    @Autowired\n    private ProfileRepository profileRepository;\n    \n    @GetMapping(&quot;/liabilities/{company}/{year}&quot;)\n    public ProfileStandardSection getLiabilitiesSection(@PathVariable int company, @PathVariable int year) {\n        Optional&lt;ProfileStandardRow&gt; totalRow = profileRepository.findById(\n                new RowId(company, year, RowInfo.TOTAL_LIABILITIES.getRowkey()));\n\n        List&lt;ProfileStandardRow&gt; topFive = profileRepository.findAllById(Arrays.asList(\n                new RowId(company, year, RowInfo.FIRST_HIGHEST_LIABILITY.getRowkey()),\n                new RowId(company, year, RowInfo.SECOND_HIGHEST_LIABILITY.getRowkey()),\n                new RowId(company, year, RowInfo.THIRD_HIGHEST_LIABILITY.getRowkey()),\n                new RowId(company, year, RowInfo.FOURTH_HIGHEST_LIABILITY.getRowkey()),\n                new RowId(company, year, RowInfo.FIFTH_HIGHEST_LIABILITY.getRowkey())));\n\n        return new ProfileStandardSection(topFive, totalRow.get());\n    }\n}\n</code></pre>\n<p>The JSON object I get back:</p>\n<pre><code>{\n&quot;summandRows&quot;: null,\n&quot;topFive&quot;: [...stuff I want...],\n&quot;totalRow&quot;: {...stuff I want...},\n&quot;pctOfSuperTotal&quot;: null\n}\n</code></pre>\n<p>Is there a way to configure this so that it doesn't include the <code>summandRows</code> and <code>pctOfSuperTotal</code> objects in the JSON?</p>\n<p>I know it's including them because there are getters for them in the bean which are just getting used cuz Spring things, and IntelliJ doesn't even realize it. So it's marking them as unused. So is there a way to tell Spring which getters to use?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1659571637,"post_id":73229034,"comment_id":129328713,"body_markdown":"Maybe because [ImageIO.read returns NULL, with no errors](https://stackoverflow.com/questions/9943962/imageio-read-returns-null-with-no-errors)","body":"Maybe because <a href=\"https://stackoverflow.com/questions/9943962/imageio-read-returns-null-with-no-errors\">ImageIO.read returns NULL, with no errors</a>"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1659571830,"post_id":73229034,"comment_id":129328739,"body_markdown":"Because it&#39;s named `.jpg` doesn&#39;t mean it&#39;s a valid jpg or a format of jpg that `ImageIO` can read, you might need to check the file with a image editor and possibly convert it","body":"Because it&#39;s named <code>.jpg</code> doesn&#39;t mean it&#39;s a valid jpg or a format of jpg that <code>ImageIO</code> can read, you might need to check the file with a image editor and possibly convert it"}],"owner":{"account_id":24680855,"reputation":1,"user_id":18574619,"display_name":"Kyotiq"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":439,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1659609747,"answer_count":0,"score":0,"last_activity_date":1659571485,"creation_date":1659571485,"question_id":73229034,"body_markdown":"I was trying to get RGB values for every pixel of an image.  Like any other insanely inexperienced coder, I went to the internet.  I found a snippet of code that I could understand.  After copying, pasting, and tweaking the code, the code wouldn&#39;t work.  Can someone please help. I have an error.\r\nHere is the code:\r\n```\r\nimport java.io.File;\r\nimport java.io.FileWriter;\r\nimport java.awt.Color;\r\nimport java.awt.image.BufferedImage;\r\nimport javax.imageio.ImageIO;\r\npublic class Art {\r\n   public static void main(String args[])throws Exception {\r\n      FileWriter writer = new FileWriter(&quot;pixel_values.txt&quot;);\r\n      //Reading the image\r\n      File file = new File(&quot;Mountain.jpg&quot;);\r\n      BufferedImage img = ImageIO.read(file);\r\n      for (int y = 0; y &lt; img.getHeight(); y++) {\r\n         for (int x = 0; x &lt; img.getWidth(); x++) {\r\n            //Retrieving contents of a pixel\r\n            int pixel = img.getRGB(x,y);\r\n            //Creating a Color object from pixel value\r\n            Color color = new Color(pixel, true);\r\n            //Retrieving the R G B values\r\n            int red = color.getRed();\r\n            int green = color.getGreen();\r\n            int blue = color.getBlue();\r\n            writer.append(red+&quot;:&quot;);\r\n            writer.append(green+&quot;:&quot;);\r\n            writer.append(blue+&quot;&quot;);\r\n            writer.append(&quot;\\n&quot;);\r\n            writer.flush();\r\n         }\r\n      }\r\n      writer.close();\r\n      System.out.println(&quot;RGB values at each pixel are stored in the specified file&quot;);\r\n   }\r\n}\r\n```\r\nAfter this, I get, &quot;Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;java.awt.image.BufferedImage.getHeight()&quot; because &quot;img&quot; is null\r\n\tat Art.main(Art.java:12)&quot;  \r\nWhy is the img null?  Can someone please help me fix this?","title":"Why can&#39;t the image height be found? (Cannot invoke &quot;java.awt.image.BufferedImage.getHeight()&quot; because &quot;img&quot; is null)","body":"<p>I was trying to get RGB values for every pixel of an image.  Like any other insanely inexperienced coder, I went to the internet.  I found a snippet of code that I could understand.  After copying, pasting, and tweaking the code, the code wouldn't work.  Can someone please help. I have an error.\nHere is the code:</p>\n<pre><code>import java.io.File;\nimport java.io.FileWriter;\nimport java.awt.Color;\nimport java.awt.image.BufferedImage;\nimport javax.imageio.ImageIO;\npublic class Art {\n   public static void main(String args[])throws Exception {\n      FileWriter writer = new FileWriter(&quot;pixel_values.txt&quot;);\n      //Reading the image\n      File file = new File(&quot;Mountain.jpg&quot;);\n      BufferedImage img = ImageIO.read(file);\n      for (int y = 0; y &lt; img.getHeight(); y++) {\n         for (int x = 0; x &lt; img.getWidth(); x++) {\n            //Retrieving contents of a pixel\n            int pixel = img.getRGB(x,y);\n            //Creating a Color object from pixel value\n            Color color = new Color(pixel, true);\n            //Retrieving the R G B values\n            int red = color.getRed();\n            int green = color.getGreen();\n            int blue = color.getBlue();\n            writer.append(red+&quot;:&quot;);\n            writer.append(green+&quot;:&quot;);\n            writer.append(blue+&quot;&quot;);\n            writer.append(&quot;\\n&quot;);\n            writer.flush();\n         }\n      }\n      writer.close();\n      System.out.println(&quot;RGB values at each pixel are stored in the specified file&quot;);\n   }\n}\n</code></pre>\n<p>After this, I get, &quot;Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;java.awt.image.BufferedImage.getHeight()&quot; because &quot;img&quot; is null\nat Art.main(Art.java:12)&quot;<br />\nWhy is the img null?  Can someone please help me fix this?</p>\n"},{"tags":["java","swing","jbutton","actionlistener","jtextfield"],"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1659293419,"post_id":73185919,"comment_id":129255152,"body_markdown":"I&#39;m afraid I got distracted. Is your real question how to update some JTextField when a JButton is pressed?","body":"I&#39;m afraid I got distracted. Is your real question how to update some JTextField when a JButton is pressed?"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1659314279,"post_id":73185919,"comment_id":129258497,"body_markdown":"Please see edits to my answer. If you have any questions about it, please comment on the answer.","body":"Please see edits to my answer. If you have any questions about it, please comment on the answer."}],"answers":[{"tags":[],"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659314257,"creation_date":1659294085,"answer_id":73186160,"question_id":73185919,"body_markdown":"One way to do this could be to:\r\n* Put the JTextFields in an `ArrayList&lt;JTextField&gt;` so that you can get them later as you will likely need access to them during the game\r\n* Give the class a field, `private JTextField selectedField = null;`, set initially to `null`. This will point to the last JTextField that has been clicked (the last one to gain *focus*)\r\n* Give the JTextFields FocusListeners when created. If any field gains focus, set the selectedField to refer to it\r\n* Or as per Rob Camick, use a TextAction as the button&#39;s ActionListener, which will track the last text component that holds the focus.\r\n* In your number JButton&#39;s ActionListener, check that selectedField is not null\r\n* If not null, then set the button&#39;s actionCommand (its text) to be the selectedField&#39;s text.\r\n\r\nAlso, if you need more help, consider creating and posting a valid [MRE](https://stackoverflow.com/help/minimal-reproducible-example). Your current code does not compile for us.\r\n\r\nProof of concept (and example of a [MRE](https://stackoverflow.com/help/minimal-reproducible-example)):\r\n\r\n[![enter image description here][1]][1]\r\n\r\n```\r\nimport java.awt.Color;\r\nimport java.awt.Font;\r\nimport java.awt.GridLayout;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.FocusAdapter;\r\nimport java.awt.event.FocusEvent;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport javax.swing.*;\r\n\r\npublic class Solver2 extends JPanel {\r\n    private static final float FONT_SIZE = 24f;\r\n    private int gridEdgeSize = 9;\r\n    private List&lt;JTextField&gt; fieldList = new ArrayList&lt;&gt;();\r\n    private JTextField selectedField = null;\r\n\r\n    public Solver2() {\r\n        JPanel gridPanel = new JPanel(new GridLayout(gridEdgeSize, gridEdgeSize, 2, 2));\r\n        gridPanel.setBorder(BorderFactory.createLineBorder(Color.BLACK, 2));\r\n        gridPanel.setBackground(Color.BLACK);\r\n\r\n        for (int i = 0; i &lt; gridEdgeSize; i++) {\r\n            for (int j = 0; j &lt; gridEdgeSize; j++) {\r\n                JTextField textField = new JTextField(2);\r\n                textField.setHorizontalAlignment(SwingConstants.CENTER);\r\n                textField.setFont(textField.getFont().deriveFont(Font.BOLD, FONT_SIZE));\r\n                textField.setBorder(null);\r\n                textField.addFocusListener(new TextFieldFocusListener());\r\n                gridPanel.add(textField);\r\n                fieldList.add(textField);\r\n            }\r\n        }\r\n\r\n        JPanel numberPanel = new JPanel(new GridLayout(0, 3));\r\n        for (int i = 1; i &lt; 10; i++) {\r\n            String text = String.valueOf(i);\r\n            JButton button = new JButton(text);\r\n            button.setFont(button.getFont().deriveFont(Font.BOLD, FONT_SIZE));\r\n            button.addActionListener(e -&gt; buttonListener(e));\r\n            numberPanel.add(button);\r\n        }\r\n\r\n        setLayout(new GridLayout(1, 2));\r\n        add(gridPanel);\r\n        add(numberPanel);\r\n\r\n    }\r\n    \r\n    private void buttonListener(ActionEvent e) {\r\n        String text = e.getActionCommand();\r\n        if (selectedField != null) {\r\n            selectedField.setText(text);\r\n        }\r\n    }\r\n\r\n    private class TextFieldFocusListener extends FocusAdapter {\r\n        @Override\r\n        public void focusGained(FocusEvent e) {\r\n            selectedField = (JTextField) e.getComponent();\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        SwingUtilities.invokeLater(() -&gt; {\r\n            Solver2 mainPanel = new Solver2();\r\n\r\n            JFrame frame = new JFrame(&quot;GUI&quot;);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            frame.add(mainPanel);\r\n            frame.pack();\r\n            frame.setLocationRelativeTo(null);\r\n            frame.setVisible(true);\r\n        });\r\n    }\r\n\r\n}\r\n```\r\n\r\n__________________________________________\r\nSide Note\r\n===\r\nIf you want to restrict the JTextField from allowing keyboard or copy/paste entry, then one way could be to use a DocumentFilter added to each JTextField&#39;s Document. \r\n\r\nYou could give the class a private boolean field, say,\r\n\r\n```\r\npublic class Solver2 extends JPanel {\r\n    // .....\r\n    private boolean blockTextInput = true;\r\n```\r\n\r\nand a private nested class that extends DocumentFilter. This class will prevent the document from allowing String inserts, removals or replacements as long as blockTextInput is true:\r\n\r\n```\r\nprivate class MyDocFilter extends DocumentFilter {\r\n\t@Override\r\n\tpublic void insertString(FilterBypass fb, int offset, String string, AttributeSet attr)\r\n\t\t\tthrows BadLocationException {\r\n\t\tif (blockTextInput) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsuper.insertString(fb, offset, string, attr);\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void remove(FilterBypass fb, int offset, int length) throws BadLocationException {\r\n\t\tif (blockTextInput) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsuper.remove(fb, offset, length);\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void replace(FilterBypass fb, int offset, int length, String text, AttributeSet attrs)\r\n\t\t\tthrows BadLocationException {\r\n\t\tif (blockTextInput) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsuper.replace(fb, offset, length, text, attrs);\r\n\t}\r\n}\r\n```\r\n\r\nthen in the JTextField creation loop, set the filter:\r\n\r\n```\r\nfor (int i = 0; i &lt; gridEdgeSize; i++) {\r\n\tfor (int j = 0; j &lt; gridEdgeSize; j++) {\r\n\t\tJTextField textField = new JTextField(2);\r\n\t\ttextField.setHorizontalAlignment(SwingConstants.CENTER);\r\n\t\ttextField.setFont(textField.getFont().deriveFont(Font.BOLD, FONT_SIZE));\r\n\t\ttextField.setBorder(null);\r\n\t\ttextField.addFocusListener(new TextFieldFocusListener());\r\n\t\t\r\n\t\t// ***** here ****\r\n\t\t((PlainDocument) textField.getDocument()).setDocumentFilter(new MyDocFilter());  \r\n\t\t\r\n\t\tgridPanel.add(textField);\r\n\t\tfieldList.add(textField);\r\n\t}\r\n}\r\n```\r\n\r\nThen change the number JButton&#39;s ActionListeners to change blockTextInput before and after setting the JTextField&#39;s text:\r\n\r\n```\r\nprivate void buttonListener(ActionEvent e) {\r\n\tString text = e.getActionCommand();\r\n\tif (selectedField != null) {\r\n\t\tblockTextInput = false;\r\n\t\tselectedField.setText(text);\r\n\t\tblockTextInput = true;\r\n\t}\r\n}\r\n```\r\nDone\t\r\n\r\n_______________________________________________________\r\n\r\nThe latest iteration of the program that uses a single FocusListener and a DocumentFilter and that incorporates Rob Camick&#39;s suggestion to use TextAction for the button&#39;s ActionListener:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n```\r\nimport java.awt.Color;\r\nimport java.awt.Font;\r\nimport java.awt.GridLayout;\r\nimport java.awt.event.ActionEvent;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport javax.swing.*;\r\nimport javax.swing.text.AttributeSet;\r\nimport javax.swing.text.BadLocationException;\r\nimport javax.swing.text.DocumentFilter;\r\nimport javax.swing.text.JTextComponent;\r\nimport javax.swing.text.PlainDocument;\r\nimport javax.swing.text.TextAction;\r\n\r\n@SuppressWarnings(&quot;serial&quot;)\r\npublic class Solver3 extends JPanel {\r\n    private static final float FONT_SIZE = 24f;\r\n    private int gridEdgeSize = 9;\r\n    private List&lt;JTextField&gt; fieldList = new ArrayList&lt;&gt;();\r\n    private boolean blockTextInput = true;\r\n    private MyTextAction myTextAction = new MyTextAction(&quot;&quot;);\r\n    private JPanel outerGridPanel = new JPanel(new GridLayout(3, 3, 3, 3));\r\n    private JPanel[][] innerGridPanels = new JPanel[3][3];\r\n\r\n    public Solver3() {\r\n        outerGridPanel.setBackground(Color.BLACK);\r\n        outerGridPanel.setBorder(BorderFactory.createLineBorder(Color.BLACK, 4));\r\n        for (int i = 0; i &lt; 3; i++) {\r\n            for (int j = 0; j &lt; 3; j++) {\r\n                innerGridPanels[i][j] = new JPanel(new GridLayout(3, 3, 1, 1));\r\n                innerGridPanels[i][j].setBackground(Color.BLACK);\r\n                outerGridPanel.add(innerGridPanels[i][j]);\r\n            }\r\n        }\r\n\r\n        for (int i = 0; i &lt; gridEdgeSize; i++) {\r\n            for (int j = 0; j &lt; gridEdgeSize; j++) {\r\n                JTextField textField = new JTextField(2);\r\n                textField.setHorizontalAlignment(SwingConstants.CENTER);\r\n                textField.setFont(textField.getFont().deriveFont(Font.BOLD, FONT_SIZE));\r\n                textField.setBorder(null);\r\n                ((PlainDocument) textField.getDocument()).setDocumentFilter(new MyDocFilter());\r\n                innerGridPanels[i / 3][j / 3].add(textField);\r\n                fieldList.add(textField);\r\n            }\r\n        }\r\n\r\n        JPanel numberPanel = new JPanel(new GridLayout(0, 3));\r\n        for (int i = 1; i &lt; 10; i++) {\r\n            String text = String.valueOf(i);\r\n            JButton button = new JButton(text);\r\n            button.setFont(button.getFont().deriveFont(Font.BOLD, 2 * FONT_SIZE));\r\n            button.addActionListener(myTextAction);\r\n            numberPanel.add(button);\r\n        }\r\n\r\n        setLayout(new GridLayout(1, 2));\r\n        add(outerGridPanel);\r\n        add(numberPanel);\r\n    }\r\n\r\n    private class MyTextAction extends TextAction {\r\n\r\n        public MyTextAction(String name) {\r\n            super(name);\r\n        }\r\n\r\n        @Override\r\n        public void actionPerformed(ActionEvent e) {\r\n            String text = e.getActionCommand();\r\n            JTextComponent selectedComponent = getFocusedComponent();\r\n            \r\n            if (selectedComponent != null) {\r\n                blockTextInput = false;\r\n                selectedComponent.setText(text);\r\n                blockTextInput = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    private class MyDocFilter extends DocumentFilter {\r\n        @Override\r\n        public void insertString(FilterBypass fb, int offset, String string, AttributeSet attr)\r\n                throws BadLocationException {\r\n            if (blockTextInput) {\r\n                return;\r\n            }\r\n            super.insertString(fb, offset, string, attr);\r\n        }\r\n\r\n        @Override\r\n        public void remove(FilterBypass fb, int offset, int length) throws BadLocationException {\r\n            if (blockTextInput) {\r\n                return;\r\n            }\r\n            super.remove(fb, offset, length);\r\n        }\r\n\r\n        @Override\r\n        public void replace(FilterBypass fb, int offset, int length, String text, AttributeSet attrs)\r\n                throws BadLocationException {\r\n            if (blockTextInput) {\r\n                return;\r\n            }\r\n            super.replace(fb, offset, length, text, attrs);\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        SwingUtilities.invokeLater(() -&gt; {\r\n            Solver3 mainPanel = new Solver3();\r\n\r\n            JFrame frame = new JFrame(&quot;GUI&quot;);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            frame.add(mainPanel);\r\n            frame.pack();\r\n            frame.setLocationRelativeTo(null);\r\n            frame.setVisible(true);\r\n        });\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JnDEJ.gif\r\n  [2]: https://i.stack.imgur.com/8mOft.gif","title":"Inputting data to JTextField by pressing JButton","body":"<p>One way to do this could be to:</p>\n<ul>\n<li>Put the JTextFields in an <code>ArrayList&lt;JTextField&gt;</code> so that you can get them later as you will likely need access to them during the game</li>\n<li>Give the class a field, <code>private JTextField selectedField = null;</code>, set initially to <code>null</code>. This will point to the last JTextField that has been clicked (the last one to gain <em>focus</em>)</li>\n<li>Give the JTextFields FocusListeners when created. If any field gains focus, set the selectedField to refer to it</li>\n<li>Or as per Rob Camick, use a TextAction as the button's ActionListener, which will track the last text component that holds the focus.</li>\n<li>In your number JButton's ActionListener, check that selectedField is not null</li>\n<li>If not null, then set the button's actionCommand (its text) to be the selectedField's text.</li>\n</ul>\n<p>Also, if you need more help, consider creating and posting a valid <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MRE</a>. Your current code does not compile for us.</p>\n<p>Proof of concept (and example of a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MRE</a>):</p>\n<p><a href=\"https://i.stack.imgur.com/JnDEJ.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JnDEJ.gif\" alt=\"enter image description here\" /></a></p>\n<pre><code>import java.awt.Color;\nimport java.awt.Font;\nimport java.awt.GridLayout;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.FocusAdapter;\nimport java.awt.event.FocusEvent;\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.swing.*;\n\npublic class Solver2 extends JPanel {\n    private static final float FONT_SIZE = 24f;\n    private int gridEdgeSize = 9;\n    private List&lt;JTextField&gt; fieldList = new ArrayList&lt;&gt;();\n    private JTextField selectedField = null;\n\n    public Solver2() {\n        JPanel gridPanel = new JPanel(new GridLayout(gridEdgeSize, gridEdgeSize, 2, 2));\n        gridPanel.setBorder(BorderFactory.createLineBorder(Color.BLACK, 2));\n        gridPanel.setBackground(Color.BLACK);\n\n        for (int i = 0; i &lt; gridEdgeSize; i++) {\n            for (int j = 0; j &lt; gridEdgeSize; j++) {\n                JTextField textField = new JTextField(2);\n                textField.setHorizontalAlignment(SwingConstants.CENTER);\n                textField.setFont(textField.getFont().deriveFont(Font.BOLD, FONT_SIZE));\n                textField.setBorder(null);\n                textField.addFocusListener(new TextFieldFocusListener());\n                gridPanel.add(textField);\n                fieldList.add(textField);\n            }\n        }\n\n        JPanel numberPanel = new JPanel(new GridLayout(0, 3));\n        for (int i = 1; i &lt; 10; i++) {\n            String text = String.valueOf(i);\n            JButton button = new JButton(text);\n            button.setFont(button.getFont().deriveFont(Font.BOLD, FONT_SIZE));\n            button.addActionListener(e -&gt; buttonListener(e));\n            numberPanel.add(button);\n        }\n\n        setLayout(new GridLayout(1, 2));\n        add(gridPanel);\n        add(numberPanel);\n\n    }\n    \n    private void buttonListener(ActionEvent e) {\n        String text = e.getActionCommand();\n        if (selectedField != null) {\n            selectedField.setText(text);\n        }\n    }\n\n    private class TextFieldFocusListener extends FocusAdapter {\n        @Override\n        public void focusGained(FocusEvent e) {\n            selectedField = (JTextField) e.getComponent();\n        }\n    }\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(() -&gt; {\n            Solver2 mainPanel = new Solver2();\n\n            JFrame frame = new JFrame(&quot;GUI&quot;);\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            frame.add(mainPanel);\n            frame.pack();\n            frame.setLocationRelativeTo(null);\n            frame.setVisible(true);\n        });\n    }\n\n}\n</code></pre>\n<hr />\n<h1>Side Note</h1>\n<p>If you want to restrict the JTextField from allowing keyboard or copy/paste entry, then one way could be to use a DocumentFilter added to each JTextField's Document.</p>\n<p>You could give the class a private boolean field, say,</p>\n<pre><code>public class Solver2 extends JPanel {\n    // .....\n    private boolean blockTextInput = true;\n</code></pre>\n<p>and a private nested class that extends DocumentFilter. This class will prevent the document from allowing String inserts, removals or replacements as long as blockTextInput is true:</p>\n<pre><code>private class MyDocFilter extends DocumentFilter {\n    @Override\n    public void insertString(FilterBypass fb, int offset, String string, AttributeSet attr)\n            throws BadLocationException {\n        if (blockTextInput) {\n            return;\n        }\n        super.insertString(fb, offset, string, attr);\n    }\n    \n    @Override\n    public void remove(FilterBypass fb, int offset, int length) throws BadLocationException {\n        if (blockTextInput) {\n            return;\n        }\n        super.remove(fb, offset, length);\n    }\n    \n    @Override\n    public void replace(FilterBypass fb, int offset, int length, String text, AttributeSet attrs)\n            throws BadLocationException {\n        if (blockTextInput) {\n            return;\n        }\n        super.replace(fb, offset, length, text, attrs);\n    }\n}\n</code></pre>\n<p>then in the JTextField creation loop, set the filter:</p>\n<pre><code>for (int i = 0; i &lt; gridEdgeSize; i++) {\n    for (int j = 0; j &lt; gridEdgeSize; j++) {\n        JTextField textField = new JTextField(2);\n        textField.setHorizontalAlignment(SwingConstants.CENTER);\n        textField.setFont(textField.getFont().deriveFont(Font.BOLD, FONT_SIZE));\n        textField.setBorder(null);\n        textField.addFocusListener(new TextFieldFocusListener());\n        \n        // ***** here ****\n        ((PlainDocument) textField.getDocument()).setDocumentFilter(new MyDocFilter());  \n        \n        gridPanel.add(textField);\n        fieldList.add(textField);\n    }\n}\n</code></pre>\n<p>Then change the number JButton's ActionListeners to change blockTextInput before and after setting the JTextField's text:</p>\n<pre><code>private void buttonListener(ActionEvent e) {\n    String text = e.getActionCommand();\n    if (selectedField != null) {\n        blockTextInput = false;\n        selectedField.setText(text);\n        blockTextInput = true;\n    }\n}\n</code></pre>\n<p>Done</p>\n<hr />\n<p>The latest iteration of the program that uses a single FocusListener and a DocumentFilter and that incorporates Rob Camick's suggestion to use TextAction for the button's ActionListener:</p>\n<p><a href=\"https://i.stack.imgur.com/8mOft.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8mOft.gif\" alt=\"enter image description here\" /></a></p>\n<pre><code>import java.awt.Color;\nimport java.awt.Font;\nimport java.awt.GridLayout;\nimport java.awt.event.ActionEvent;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport javax.swing.*;\nimport javax.swing.text.AttributeSet;\nimport javax.swing.text.BadLocationException;\nimport javax.swing.text.DocumentFilter;\nimport javax.swing.text.JTextComponent;\nimport javax.swing.text.PlainDocument;\nimport javax.swing.text.TextAction;\n\n@SuppressWarnings(&quot;serial&quot;)\npublic class Solver3 extends JPanel {\n    private static final float FONT_SIZE = 24f;\n    private int gridEdgeSize = 9;\n    private List&lt;JTextField&gt; fieldList = new ArrayList&lt;&gt;();\n    private boolean blockTextInput = true;\n    private MyTextAction myTextAction = new MyTextAction(&quot;&quot;);\n    private JPanel outerGridPanel = new JPanel(new GridLayout(3, 3, 3, 3));\n    private JPanel[][] innerGridPanels = new JPanel[3][3];\n\n    public Solver3() {\n        outerGridPanel.setBackground(Color.BLACK);\n        outerGridPanel.setBorder(BorderFactory.createLineBorder(Color.BLACK, 4));\n        for (int i = 0; i &lt; 3; i++) {\n            for (int j = 0; j &lt; 3; j++) {\n                innerGridPanels[i][j] = new JPanel(new GridLayout(3, 3, 1, 1));\n                innerGridPanels[i][j].setBackground(Color.BLACK);\n                outerGridPanel.add(innerGridPanels[i][j]);\n            }\n        }\n\n        for (int i = 0; i &lt; gridEdgeSize; i++) {\n            for (int j = 0; j &lt; gridEdgeSize; j++) {\n                JTextField textField = new JTextField(2);\n                textField.setHorizontalAlignment(SwingConstants.CENTER);\n                textField.setFont(textField.getFont().deriveFont(Font.BOLD, FONT_SIZE));\n                textField.setBorder(null);\n                ((PlainDocument) textField.getDocument()).setDocumentFilter(new MyDocFilter());\n                innerGridPanels[i / 3][j / 3].add(textField);\n                fieldList.add(textField);\n            }\n        }\n\n        JPanel numberPanel = new JPanel(new GridLayout(0, 3));\n        for (int i = 1; i &lt; 10; i++) {\n            String text = String.valueOf(i);\n            JButton button = new JButton(text);\n            button.setFont(button.getFont().deriveFont(Font.BOLD, 2 * FONT_SIZE));\n            button.addActionListener(myTextAction);\n            numberPanel.add(button);\n        }\n\n        setLayout(new GridLayout(1, 2));\n        add(outerGridPanel);\n        add(numberPanel);\n    }\n\n    private class MyTextAction extends TextAction {\n\n        public MyTextAction(String name) {\n            super(name);\n        }\n\n        @Override\n        public void actionPerformed(ActionEvent e) {\n            String text = e.getActionCommand();\n            JTextComponent selectedComponent = getFocusedComponent();\n            \n            if (selectedComponent != null) {\n                blockTextInput = false;\n                selectedComponent.setText(text);\n                blockTextInput = true;\n            }\n        }\n    }\n\n    private class MyDocFilter extends DocumentFilter {\n        @Override\n        public void insertString(FilterBypass fb, int offset, String string, AttributeSet attr)\n                throws BadLocationException {\n            if (blockTextInput) {\n                return;\n            }\n            super.insertString(fb, offset, string, attr);\n        }\n\n        @Override\n        public void remove(FilterBypass fb, int offset, int length) throws BadLocationException {\n            if (blockTextInput) {\n                return;\n            }\n            super.remove(fb, offset, length);\n        }\n\n        @Override\n        public void replace(FilterBypass fb, int offset, int length, String text, AttributeSet attrs)\n                throws BadLocationException {\n            if (blockTextInput) {\n                return;\n            }\n            super.replace(fb, offset, length, text, attrs);\n        }\n    }\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(() -&gt; {\n            Solver3 mainPanel = new Solver3();\n\n            JFrame frame = new JFrame(&quot;GUI&quot;);\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            frame.add(mainPanel);\n            frame.pack();\n            frame.setLocationRelativeTo(null);\n            frame.setVisible(true);\n        });\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":25377023,"reputation":1,"user_id":19190010,"display_name":"roy_meir"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659570143,"creation_date":1659291921,"question_id":73185919,"body_markdown":"I wrote a program that creates a sudoku board according to the difficulty level chosen by the user. There&#39;s a basic GUI using JFrame and JPanel.  \r\nThe board itself is built using a 2D array of JTextFields to allow for editing by the user and I made a table of JButtons representing digits 1-9.   \r\nI&#39;m trying to make it so when I press a digit button while my cursor is on the relevant text field, it&#39;ll input that number to the field. \r\nI think there&#39;s a problem with how I defined the buttons but would love a hand. \r\n\r\n        /*Java Program to solve Sudoku problem using Backtracking*/\r\n    import javax.swing.*;\r\n    import javax.swing.border.Border;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    \r\n    import java.awt.*;\r\n    \r\n    \r\n    public class Solver extends Board {\r\n    \r\n        Solver(int N, int K) {\r\n            super(N, K);\r\n        }\r\n    \r\n        private static void createWindow() {\r\n            JFrame frame = new JFrame(&quot;Sudoku&quot;);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            createUI(frame);\r\n            frame.setSize(250, 80);\r\n            frame.setLocationRelativeTo(null);\r\n            frame.setVisible(true);\r\n        }\r\n    \r\n        private static void createUI(final JFrame frame) {\r\n            JPanel panel = new JPanel();\r\n            LayoutManager layout = new FlowLayout();\r\n            panel.setLayout(layout);\r\n    \r\n            JButton button = new JButton(&quot;Play&quot;);\r\n            button.addActionListener(new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(ActionEvent e) {\r\n                    String result = (String) JOptionPane.showInputDialog(\r\n                        frame,\r\n                        &quot;Difficulty Glossary:\\n\\n Hard - 50/81 blank spaces\\n Medium - 35/81 blank spaces\\n Easy - 20/81 blank spaces\\n\\nChoose your desired difficulty:\\n\\tHard: 1\\n\\tMedium: 2\\n\\tEasy: 3\\nIf your input doesn&#39;t match one of these digits, the board generated will be on easy mode.&quot;,\r\n                        &quot;Difficulty Glossary&quot;,\r\n                        JOptionPane.PLAIN_MESSAGE,\r\n                        null,\r\n                        null,\r\n                        &quot;3&quot;\r\n                    );\r\n                    optionBoard();\r\n                    play(Integer.parseInt(result));\r\n                }\r\n            });\r\n    \r\n            panel.add(button);\r\n            frame.getContentPane().add(panel, BorderLayout.CENTER);\r\n        }\r\n        public static void optionBoard(){\r\n    \r\n        }\r\n    \r\n        public static void play(int level) {\r\n            int N = 9, K = 0;\r\n            switch (level) {\r\n                case 1:\r\n                    K = 50;\r\n                    break;\r\n                case 2:\r\n                    K = 35;\r\n                    break;\r\n    \r\n                default:\r\n                    K = 20;\r\n                    break;\r\n            }\r\n            Solver sudoku = new Solver(N, K);\r\n            sudoku.fillValues();\r\n            createBoard(sudoku.puzzle);\r\n        }\r\n    \r\n        public static void createBoard(int[][] puzzle) {\r\n            final Border fieldBorder = BorderFactory.createLineBorder(Color.BLACK);\r\n    \r\n            final JPanel grid = new JPanel(new GridLayout(9, 9));\r\n            for (int i = 0; i &lt; 9; i++) {\r\n                for (int j = 0; j &lt; 9; j++) {\r\n                    final JTextField field = new JTextField(2);\r\n                    if (puzzle[i][j] != 0) {\r\n                        field.setText(puzzle[i][j] + &quot;&quot;);\r\n                    } else {\r\n                        field.setText(&quot;&quot;);\r\n                    }\r\n                    field.setHorizontalAlignment(JTextField.CENTER); //Center text horizontally in the text field.\r\n                    field.setBorder(fieldBorder); //Add the colored border.\r\n                    grid.add(field);\r\n                }\r\n            }\r\n    \r\n            final JPanel digits = new JPanel(new GridLayout(3, 3));\r\n            int num=1;\r\n            for (int i = 1; i &lt; 4; i++) {\r\n                for (int j = 1; j &lt; 4; j++) {\r\n                    final JButton digit = new JButton(num+&quot;&quot;);\r\n                    num++;\r\n                    \r\n                    digits.add(digit);\r\n                }\r\n            }\r\n    \r\n            final JPanel centeredGrid = new JPanel(new GridBagLayout());\r\n            centeredGrid.add(digits);\r\n            centeredGrid.add(grid);\r\n        \r\n            final JFrame frame = new JFrame(&quot;Sudoku Board&quot;);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            frame.getContentPane().add(centeredGrid);\r\n            frame.setSize(400,400);\r\n            frame.setVisible(true);\r\n    \r\n            JButton button = new JButton(&quot;Check&quot;);\r\n            button.addActionListener(new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(ActionEvent e) {\r\n                    \r\n                }\r\n            });\r\n    \r\n           // centeredGrid.add(button);\r\n        }\r\n    \r\n    \r\n        // Driver code\r\n        public static void main(String[] args) {\r\n            createWindow();\r\n        }\r\n    }\r\n\r\nI&#39;ve only provided the relevant GUI class since the mathematical logic part of building the board is solid and works fine. That&#39;s what the Board class is. ","title":"Inputting data to JTextField by pressing JButton","body":"<p>I wrote a program that creates a sudoku board according to the difficulty level chosen by the user. There's a basic GUI using JFrame and JPanel.<br />\nThe board itself is built using a 2D array of JTextFields to allow for editing by the user and I made a table of JButtons representing digits 1-9.<br />\nI'm trying to make it so when I press a digit button while my cursor is on the relevant text field, it'll input that number to the field.\nI think there's a problem with how I defined the buttons but would love a hand.</p>\n<pre><code>    /*Java Program to solve Sudoku problem using Backtracking*/\nimport javax.swing.*;\nimport javax.swing.border.Border;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\n\nimport java.awt.*;\n\n\npublic class Solver extends Board {\n\n    Solver(int N, int K) {\n        super(N, K);\n    }\n\n    private static void createWindow() {\n        JFrame frame = new JFrame(&quot;Sudoku&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        createUI(frame);\n        frame.setSize(250, 80);\n        frame.setLocationRelativeTo(null);\n        frame.setVisible(true);\n    }\n\n    private static void createUI(final JFrame frame) {\n        JPanel panel = new JPanel();\n        LayoutManager layout = new FlowLayout();\n        panel.setLayout(layout);\n\n        JButton button = new JButton(&quot;Play&quot;);\n        button.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                String result = (String) JOptionPane.showInputDialog(\n                    frame,\n                    &quot;Difficulty Glossary:\\n\\n Hard - 50/81 blank spaces\\n Medium - 35/81 blank spaces\\n Easy - 20/81 blank spaces\\n\\nChoose your desired difficulty:\\n\\tHard: 1\\n\\tMedium: 2\\n\\tEasy: 3\\nIf your input doesn't match one of these digits, the board generated will be on easy mode.&quot;,\n                    &quot;Difficulty Glossary&quot;,\n                    JOptionPane.PLAIN_MESSAGE,\n                    null,\n                    null,\n                    &quot;3&quot;\n                );\n                optionBoard();\n                play(Integer.parseInt(result));\n            }\n        });\n\n        panel.add(button);\n        frame.getContentPane().add(panel, BorderLayout.CENTER);\n    }\n    public static void optionBoard(){\n\n    }\n\n    public static void play(int level) {\n        int N = 9, K = 0;\n        switch (level) {\n            case 1:\n                K = 50;\n                break;\n            case 2:\n                K = 35;\n                break;\n\n            default:\n                K = 20;\n                break;\n        }\n        Solver sudoku = new Solver(N, K);\n        sudoku.fillValues();\n        createBoard(sudoku.puzzle);\n    }\n\n    public static void createBoard(int[][] puzzle) {\n        final Border fieldBorder = BorderFactory.createLineBorder(Color.BLACK);\n\n        final JPanel grid = new JPanel(new GridLayout(9, 9));\n        for (int i = 0; i &lt; 9; i++) {\n            for (int j = 0; j &lt; 9; j++) {\n                final JTextField field = new JTextField(2);\n                if (puzzle[i][j] != 0) {\n                    field.setText(puzzle[i][j] + &quot;&quot;);\n                } else {\n                    field.setText(&quot;&quot;);\n                }\n                field.setHorizontalAlignment(JTextField.CENTER); //Center text horizontally in the text field.\n                field.setBorder(fieldBorder); //Add the colored border.\n                grid.add(field);\n            }\n        }\n\n        final JPanel digits = new JPanel(new GridLayout(3, 3));\n        int num=1;\n        for (int i = 1; i &lt; 4; i++) {\n            for (int j = 1; j &lt; 4; j++) {\n                final JButton digit = new JButton(num+&quot;&quot;);\n                num++;\n                \n                digits.add(digit);\n            }\n        }\n\n        final JPanel centeredGrid = new JPanel(new GridBagLayout());\n        centeredGrid.add(digits);\n        centeredGrid.add(grid);\n    \n        final JFrame frame = new JFrame(&quot;Sudoku Board&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.getContentPane().add(centeredGrid);\n        frame.setSize(400,400);\n        frame.setVisible(true);\n\n        JButton button = new JButton(&quot;Check&quot;);\n        button.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                \n            }\n        });\n\n       // centeredGrid.add(button);\n    }\n\n\n    // Driver code\n    public static void main(String[] args) {\n        createWindow();\n    }\n}\n</code></pre>\n<p>I've only provided the relevant GUI class since the mathematical logic part of building the board is solid and works fine. That's what the Board class is.</p>\n"},{"tags":["java","list"],"comments":[{"owner":{"account_id":7356800,"reputation":6070,"user_id":5601284,"accept_rate":100,"display_name":"byxor"},"score":0,"creation_date":1659568553,"post_id":73228457,"comment_id":129328182,"body_markdown":"It seems strange to me to use the same ID to represent multiple chores. How can you identify which chore you&#39;re looking at if not by its id? Perhaps you need a unique ID and a separate property like `groupId`","body":"It seems strange to me to use the same ID to represent multiple chores. How can you identify which chore you&#39;re looking at if not by its id? Perhaps you need a unique ID and a separate property like <code>groupId</code>"},{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1659583834,"post_id":73228457,"comment_id":129330519,"body_markdown":"The reason this is so hard, is that Chore doesn&#39;t match your model. Let&#39;s say you have in your list `{Chore(&quot;1&quot;, &quot;vacuum&quot;, &quot;7-6-22&quot;), Chore(&quot;1&quot;, &quot;vacuum&quot;, &quot;7-15-22&quot;), Chore(&quot;1&quot;, &quot;vacuum&quot;, &quot;7-24-22&quot;)}`. You want a Map with 1 entry in it, whose value is `3`, but what should the key be? Which one of these 3 chores? In stream API, if order is important, you mostly already lost the game. More generally, saying &#39;elegant&#39; while working with stringly typed stuff is impossible - this code is ugly, I don&#39;t think it&#39;s worthwhile looking for &#39;elegance&#39; in the stream API when there&#39;s low hanging fruit.","body":"The reason this is so hard, is that Chore doesn&#39;t match your model. Let&#39;s say you have in your list <code>{Chore(&quot;1&quot;, &quot;vacuum&quot;, &quot;7-6-22&quot;), Chore(&quot;1&quot;, &quot;vacuum&quot;, &quot;7-15-22&quot;), Chore(&quot;1&quot;, &quot;vacuum&quot;, &quot;7-24-22&quot;)}</code>. You want a Map with 1 entry in it, whose value is <code>3</code>, but what should the key be? Which one of these 3 chores? In stream API, if order is important, you mostly already lost the game. More generally, saying &#39;elegant&#39; while working with stringly typed stuff is impossible - this code is ugly, I don&#39;t think it&#39;s worthwhile looking for &#39;elegance&#39; in the stream API when there&#39;s low hanging fruit."},{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1659583872,"post_id":73228457,"comment_id":129330523,"body_markdown":"This is why producing a `Map&lt;String, Long&gt;` with as result of this example `[&quot;1&quot;, &quot;3&quot;]` IS easy - now we&#39;re no longer debating which of the many chores you want to use as key.","body":"This is why producing a <code>Map&lt;String, Long&gt;</code> with as result of this example <code>[&quot;1&quot;, &quot;3&quot;]</code> IS easy - now we&#39;re no longer debating which of the many chores you want to use as key."}],"answers":[{"tags":[],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1659569050,"creation_date":1659567037,"answer_id":73228619,"question_id":73228457,"body_markdown":"Because `Chore` is being used as a key in a `Map`, it should implement an identity-based `equals()` (and `hashCode()`). This satisfies the requirements for partitioning with `groupBy()` as well, so you can can use `Function.identity()` as the key extractor.\r\n\r\n```java\r\nMap&lt;Chore, Long&gt; choreCounts = chores.stream()\r\n    .collect(Collectors.groupingBy(Function.identity(), Collectors.counting()));\r\n```\r\n\r\n---\r\nIn response the the follow-up question,\r\n\r\n&gt; There are other properties on the Chores and I need to count them based on the Id. Will the partitioning still work in this case?\r\n\r\nYes, it would still work *if* `equals()` is identity-based. However, it seems like your model might be deficient.\r\n\r\nThe property added as an example of additional `Chore` properties appears to be a date, and I&#39;m guessing the idea here is that each `Chore` records completion of a chore on a certain date. Additional information might include who did the chore or how long it took.\r\n\r\nIf that guess is correct, I would suggest creating separate classes to represent the chore itself and performance of the chore:\r\n\r\n```java\r\nclass Chore {\r\n\r\n    private final long id;\r\n    private final String name;\r\n\r\n    Chore(long id, String name) {\r\n       if (id &lt; 1) throw new IllegalArgumentException(&quot;id &lt; 1: &quot; + id);\r\n       this.id = id;\r\n       this.name = Objects.requireNonNull(name);\r\n    }\r\n\r\n    @Override\r\n    public final int hashCode() {\r\n       return Long.hashCode(id);\r\n    }\r\n\r\n    @Override\r\n    public final boolean equals(Object obj) {\r\n        return obj == this || obj instanceof Chore that &amp;&amp; that.id == this.id;\r\n    }\r\n\r\n}\r\n\r\nclass ChoreRecord {\r\n  \r\n    private final Chore chore;\r\n    private final LocalDate datePerformed;\r\n\r\n    ...\r\n\r\n    Chore getChore() {\r\n      return chore;\r\n    }\r\n\r\n    ...\r\n\r\n}\r\n```\r\n\r\nThe idea here is that you really only need one instance of the vacuuming task, one of the dusting task, etc. But many `ChoreRecord` instances can point to the same instance of the vacuuming `Chore`, etc.\r\n\r\nThen, you&#39;d generate a `Map&lt;Chore, Long&gt;` from a `List&lt;ChoreRecord&gt;`, grouping by the `Chore` from each `ChoreRecord`:\r\n\r\n```java\r\nMap&lt;Chore, Long&gt; choreCounts = choreRecords.stream()\r\n    .collect(Collectors.groupingBy(ChoreRecord::getChore, Collectors.counting()));\r\n```","title":"How to use Java8 in an elegant way to return a map of &lt;Object, Long&gt; from a List&lt;Object&gt; counting occurrence?","body":"<p>Because <code>Chore</code> is being used as a key in a <code>Map</code>, it should implement an identity-based <code>equals()</code> (and <code>hashCode()</code>). This satisfies the requirements for partitioning with <code>groupBy()</code> as well, so you can can use <code>Function.identity()</code> as the key extractor.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;Chore, Long&gt; choreCounts = chores.stream()\n    .collect(Collectors.groupingBy(Function.identity(), Collectors.counting()));\n</code></pre>\n<hr />\n<p>In response the the follow-up question,</p>\n<blockquote>\n<p>There are other properties on the Chores and I need to count them based on the Id. Will the partitioning still work in this case?</p>\n</blockquote>\n<p>Yes, it would still work <em>if</em> <code>equals()</code> is identity-based. However, it seems like your model might be deficient.</p>\n<p>The property added as an example of additional <code>Chore</code> properties appears to be a date, and I'm guessing the idea here is that each <code>Chore</code> records completion of a chore on a certain date. Additional information might include who did the chore or how long it took.</p>\n<p>If that guess is correct, I would suggest creating separate classes to represent the chore itself and performance of the chore:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Chore {\n\n    private final long id;\n    private final String name;\n\n    Chore(long id, String name) {\n       if (id &lt; 1) throw new IllegalArgumentException(&quot;id &lt; 1: &quot; + id);\n       this.id = id;\n       this.name = Objects.requireNonNull(name);\n    }\n\n    @Override\n    public final int hashCode() {\n       return Long.hashCode(id);\n    }\n\n    @Override\n    public final boolean equals(Object obj) {\n        return obj == this || obj instanceof Chore that &amp;&amp; that.id == this.id;\n    }\n\n}\n\nclass ChoreRecord {\n  \n    private final Chore chore;\n    private final LocalDate datePerformed;\n\n    ...\n\n    Chore getChore() {\n      return chore;\n    }\n\n    ...\n\n}\n</code></pre>\n<p>The idea here is that you really only need one instance of the vacuuming task, one of the dusting task, etc. But many <code>ChoreRecord</code> instances can point to the same instance of the vacuuming <code>Chore</code>, etc.</p>\n<p>Then, you'd generate a <code>Map&lt;Chore, Long&gt;</code> from a <code>List&lt;ChoreRecord&gt;</code>, grouping by the <code>Chore</code> from each <code>ChoreRecord</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;Chore, Long&gt; choreCounts = choreRecords.stream()\n    .collect(Collectors.groupingBy(ChoreRecord::getChore, Collectors.counting()));\n</code></pre>\n"}],"owner":{"account_id":9183802,"reputation":1,"user_id":6826800,"display_name":"mistakesweremade"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659569050,"creation_date":1659565650,"question_id":73228457,"body_markdown":"I know the title is a mouthful, so I will try to explain with an example.\r\n\r\nI have a List&lt;Chore&gt;. Chores have an id field which work as an identifier, but the list will contain many chores, some of which will have the same ID&#39;s. My goal is to return a Map&lt;Chore, Long&gt; where the long will count up the # of occurrences for the chore. For example:\r\n\r\n```\r\nList&lt;Chore&gt; choreList = new ArrayList&lt;Chore&gt;();\r\nchoreList.add(new Chore(&quot;1&quot;, &quot;vacuum&quot;, &quot;7-6-22&quot;);  //Numbers 1,2,3 are the ID&#39;s for each chore\r\nchoreList.add(new Chore(&quot;2&quot;, &quot;dusting&quot;, &quot;7-1-22&quot;);\r\nchoreList.add(new Chore(&quot;3&quot;, &quot;mowing&quot;, &quot;7-15-22&quot;);\r\nchoreList.add(new Chore(&quot;1&quot;, &quot;vacuum&quot;, &quot;7-14-22&quot;);\r\nchoreList.add(new Chore(&quot;1&quot;, &quot;vacuum&quot;, &quot;7-18-22&quot;);\r\nchoreList.add(new Chore(&quot;2&quot;, &quot;dusting&quot;, &quot;7-24-22&quot;);\r\n```\r\n\r\nUsing this list and the Java8 stream function, I would like to return a Map&lt;Chore, Long&gt; that has the chore object, and the occurrences. So in case of Chore with the ID of &quot;1&quot;, the long would be 3. For the chore with the ID of &quot;2&quot;, the long would be 2... and so on.\r\n\r\nI tried to find an elegant solution for this, but it looks like everyone can get something like the following:\r\n\r\n        Map&lt;String, Long&gt; choresById = chores.stream().collect(Collectors.groupingBy(Chore::getId, Collectors.counting()));\r\n\r\nHow can I come up with the Map&lt;Chore, Long&gt; instead of Map&lt;String, Long&gt; (in which case the String is the ID?)","title":"How to use Java8 in an elegant way to return a map of &lt;Object, Long&gt; from a List&lt;Object&gt; counting occurrence?","body":"<p>I know the title is a mouthful, so I will try to explain with an example.</p>\n<p>I have a List. Chores have an id field which work as an identifier, but the list will contain many chores, some of which will have the same ID's. My goal is to return a Map&lt;Chore, Long&gt; where the long will count up the # of occurrences for the chore. For example:</p>\n<pre><code>List&lt;Chore&gt; choreList = new ArrayList&lt;Chore&gt;();\nchoreList.add(new Chore(&quot;1&quot;, &quot;vacuum&quot;, &quot;7-6-22&quot;);  //Numbers 1,2,3 are the ID's for each chore\nchoreList.add(new Chore(&quot;2&quot;, &quot;dusting&quot;, &quot;7-1-22&quot;);\nchoreList.add(new Chore(&quot;3&quot;, &quot;mowing&quot;, &quot;7-15-22&quot;);\nchoreList.add(new Chore(&quot;1&quot;, &quot;vacuum&quot;, &quot;7-14-22&quot;);\nchoreList.add(new Chore(&quot;1&quot;, &quot;vacuum&quot;, &quot;7-18-22&quot;);\nchoreList.add(new Chore(&quot;2&quot;, &quot;dusting&quot;, &quot;7-24-22&quot;);\n</code></pre>\n<p>Using this list and the Java8 stream function, I would like to return a Map&lt;Chore, Long&gt; that has the chore object, and the occurrences. So in case of Chore with the ID of &quot;1&quot;, the long would be 3. For the chore with the ID of &quot;2&quot;, the long would be 2... and so on.</p>\n<p>I tried to find an elegant solution for this, but it looks like everyone can get something like the following:</p>\n<pre><code>    Map&lt;String, Long&gt; choresById = chores.stream().collect(Collectors.groupingBy(Chore::getId, Collectors.counting()));\n</code></pre>\n<p>How can I come up with the Map&lt;Chore, Long&gt; instead of Map&lt;String, Long&gt; (in which case the String is the ID?)</p>\n"},{"tags":["java","spring-boot","spring-cloud"],"comments":[{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1659566476,"post_id":73228395,"comment_id":129327840,"body_markdown":"Because the url is not changed by default to `http://localhost:8600/userservice-api/api/v1/users/signup` is forwarding to `http://localhost:9000/userservice-api/api/v1/users/signup`. Use a filter to alter the url like `StripPrefix`, `SetPath` or `RewritePath`.","body":"Because the url is not changed by default to <code>http:&#47;&#47;localhost:8600&#47;userservice-api&#47;api&#47;v1&#47;users&#47;signup</code> is forwarding to <code>http:&#47;&#47;localhost:9000&#47;userservice-api&#47;api&#47;v1&#47;users&#47;signup</code>. Use a filter to alter the url like <code>StripPrefix</code>, <code>SetPath</code> or <code>RewritePath</code>."},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1659651171,"post_id":73228395,"comment_id":129351446,"body_markdown":"@spencergibb I cannot fix the issue. Can you help me?","body":"@spencergibb I cannot fix the issue. Can you help me?"}],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":940,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659567990,"creation_date":1659565123,"question_id":73228395,"body_markdown":"I have a problem about accessing any **url** through **Api gateway** in my **Spring Boot Microservices** example.\r\n\r\nI can access any **url** through defined like **http://localhost:9000/api/v1/users/signup** (user service use port 9000)\r\n\r\nWhen I try to access it like (**http://localhost:8600/userservice-api/api/v1/users/signup**) through api gateway, I get **404 Not Found** error message.\r\n\r\nHow can I fix the issue?\r\n\r\nHere is my **api gateway properties** shown below.\r\n\r\n    eureka.client.serviceUrl.defaultZone=http://localhost:8761/eureka\r\n    spring.application.name=api-gateway\r\n    \r\n    server.port=8600\r\n    \r\n    ## User Service Route\r\n    spring.cloud.gateway.routes[0].id=user-service\r\n    spring.cloud.gateway.routes[0].uri=lb://user-service\r\n    spring.cloud.gateway.routes[0].predicates[0]=Path=/userservice-api/**\r\n    \r\n    ## Advertisement Service Route\r\n    spring.cloud.gateway.routes[1].id=advertisement-service\r\n    spring.cloud.gateway.routes[1].uri=lb://advertisement-service\r\n    spring.cloud.gateway.routes[1].predicates[0]=Path=/advertisementservice-api/** \r\n    \r\n    ## Management Service Route\r\n    spring.cloud.gateway.routes[2].id=management-service\r\n    spring.cloud.gateway.routes[2].uri=lb://management-service\r\n    spring.cloud.gateway.routes[2].predicates[0]=Path=/managementservice-api/** \r\n    \r\n    ## Report Service Route\r\n    spring.cloud.gateway.routes[3].id=report-service\r\n    spring.cloud.gateway.routes[3].uri=lb://report-service\r\n    spring.cloud.gateway.routes[3].predicates[0]=Path=/reportservice-api/** \r\n\r\nHere is my project link : [Link][1]\r\n\r\n  [1]: https://github.com/Rapter1990/SpringBootMicroservices\r\n\r\nEdited 1st\r\n\r\n    ## User Service Route\r\n    spring.cloud.gateway.routes[0].id=user-service\r\n    spring.cloud.gateway.routes[0].uri=lb://user-service\r\n    spring.cloud.gateway.routes[0].predicates[0]=Path=/userservice-api/**\r\n    spring.cloud.gateway.routes[0].filters[0]=RewritePath=/userservice-api/(?&lt;path&gt;.*), /$\\{path}\r\n\r\nI tested it but it didn&#39;t work.","title":"Spring Cloud Api Gateway Cannot access to url of a service through api gateway","body":"<p>I have a problem about accessing any <strong>url</strong> through <strong>Api gateway</strong> in my <strong>Spring Boot Microservices</strong> example.</p>\n<p>I can access any <strong>url</strong> through defined like <strong>http://localhost:9000/api/v1/users/signup</strong> (user service use port 9000)</p>\n<p>When I try to access it like (<strong>http://localhost:8600/userservice-api/api/v1/users/signup</strong>) through api gateway, I get <strong>404 Not Found</strong> error message.</p>\n<p>How can I fix the issue?</p>\n<p>Here is my <strong>api gateway properties</strong> shown below.</p>\n<pre><code>eureka.client.serviceUrl.defaultZone=http://localhost:8761/eureka\nspring.application.name=api-gateway\n\nserver.port=8600\n\n## User Service Route\nspring.cloud.gateway.routes[0].id=user-service\nspring.cloud.gateway.routes[0].uri=lb://user-service\nspring.cloud.gateway.routes[0].predicates[0]=Path=/userservice-api/**\n\n## Advertisement Service Route\nspring.cloud.gateway.routes[1].id=advertisement-service\nspring.cloud.gateway.routes[1].uri=lb://advertisement-service\nspring.cloud.gateway.routes[1].predicates[0]=Path=/advertisementservice-api/** \n\n## Management Service Route\nspring.cloud.gateway.routes[2].id=management-service\nspring.cloud.gateway.routes[2].uri=lb://management-service\nspring.cloud.gateway.routes[2].predicates[0]=Path=/managementservice-api/** \n\n## Report Service Route\nspring.cloud.gateway.routes[3].id=report-service\nspring.cloud.gateway.routes[3].uri=lb://report-service\nspring.cloud.gateway.routes[3].predicates[0]=Path=/reportservice-api/** \n</code></pre>\n<p>Here is my project link : <a href=\"https://github.com/Rapter1990/SpringBootMicroservices\" rel=\"nofollow noreferrer\">Link</a></p>\n<p>Edited 1st</p>\n<pre><code>## User Service Route\nspring.cloud.gateway.routes[0].id=user-service\nspring.cloud.gateway.routes[0].uri=lb://user-service\nspring.cloud.gateway.routes[0].predicates[0]=Path=/userservice-api/**\nspring.cloud.gateway.routes[0].filters[0]=RewritePath=/userservice-api/(?&lt;path&gt;.*), /$\\{path}\n</code></pre>\n<p>I tested it but it didn't work.</p>\n"},{"tags":["java","jdbc","slf4j","logback","jdbc-postgres"],"answers":[{"tags":[],"owner":{"account_id":190269,"reputation":18134,"user_id":430128,"accept_rate":78,"display_name":"Raman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1631896764,"creation_date":1399988417,"answer_id":23632878,"question_id":20028036,"body_markdown":"**UPDATE**: See the [answer][1] by @Gregory Kislin **for driver version 42.0.0 and above**. This answer is still valid for older versions of the driver.\r\n\r\nYou can set a `PrintWriter` as the PostgresQL driver logging destination. For example, if you were using one of the driver data sources, you would use [this method][2].\r\n\r\nNow, all you need is an extension of `PrintWriter` that sends everything it receives to your logging system. Here is an [example][3] from Apache Jackrabbit.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/43242672/430128\r\n  [2]: http://jdbc.postgresql.org/documentation/publicapi/org/postgresql/ds/common/BaseDataSource.html#setLogWriter%28java.io.PrintWriter%29\r\n  [3]: https://svn.apache.org/repos/asf/jackrabbit/branches/1.6/jackrabbit-jcr-tests/src/main/java/org/apache/jackrabbit/test/LogPrintWriter.java","title":"How do I log postgres driver messages with slf4j?","body":"<p><strong>UPDATE</strong>: See the <a href=\"https://stackoverflow.com/a/43242672/430128\">answer</a> by @Gregory Kislin <strong>for driver version 42.0.0 and above</strong>. This answer is still valid for older versions of the driver.</p>\n<p>You can set a <code>PrintWriter</code> as the PostgresQL driver logging destination. For example, if you were using one of the driver data sources, you would use <a href=\"http://jdbc.postgresql.org/documentation/publicapi/org/postgresql/ds/common/BaseDataSource.html#setLogWriter%28java.io.PrintWriter%29\" rel=\"nofollow noreferrer\">this method</a>.</p>\n<p>Now, all you need is an extension of <code>PrintWriter</code> that sends everything it receives to your logging system. Here is an <a href=\"https://svn.apache.org/repos/asf/jackrabbit/branches/1.6/jackrabbit-jcr-tests/src/main/java/org/apache/jackrabbit/test/LogPrintWriter.java\" rel=\"nofollow noreferrer\">example</a> from Apache Jackrabbit.</p>\n"},{"tags":[],"owner":{"account_id":2076676,"reputation":12739,"user_id":1849837,"accept_rate":88,"display_name":"Bartosz Bilicki"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1435251599,"creation_date":1435251599,"answer_id":31056431,"question_id":20028036,"body_markdown":"When providing connection string, please specify `&amp;loglevel=&lt;0,1,2&gt;`\r\nDefault is 0 (no logging from org.postgresql.core.Logger).\r\nLevel 2 is really verbose- you will may dozens lines for every SQL statements -details of driver protocoll, like\r\n\r\n    18:55:06.754 (1)  FE=&gt; Bind(stmt=null,portal=null)\r\n    18:55:06.754 (1)  FE=&gt; Describe(portal=null)\r\n    18:55:06.754 (1)  FE=&gt; Execute(portal=null,limit=0)\r\n    18:55:06.754 (1)  FE=&gt; Sync\r\n    18:55:06.946 (1)  &lt;=BE ParseComplete [null]\r\n    18:55:06.946 (1)  &lt;=BE BindComplete [null]\r\n    18:55:06.946 (1)  &lt;=BE CommandStatus(BEGIN)\r\n    18:55:06.946 (1)  &lt;=BE ParseComplete [null]\r\n    18:55:06.946 (1)  &lt;=BE BindComplete [null]\r\n    18:55:06.946 (1)  &lt;=BE NoData\r\n    18:55:06.946 (1)  &lt;=BE CommandStatus(INSERT 0 1)\r\n    18:55:06.946 (1)  &lt;=BE ReadyForQuery(T)\r\n    18:55:06.947 (1) simple execute, handler=org.postgresql.jdbc2.AbstractJdbc2Connection$TransactionCommandHandler@703fa45, maxRows=0, fetchSize=0, flags=22\r\n    18:55:06.947 (1)  FE=&gt; Bind(stmt=S_1,portal=null)\r\n    18:55:06.947 (1)  FE=&gt; Execute(portal=null,limit=1)\r\n    18:55:06.947 (1)  FE=&gt; Sync\r\n    18:55:07.140 (1)  &lt;=BE BindComplete [null]\r\n    18:55:07.140 (1)  &lt;=BE CommandStatus(COMMIT)\r\n    18:55:07.140 (1)  &lt;=BE ReadyForQuery(I)","title":"How do I log postgres driver messages with slf4j?","body":"<p>When providing connection string, please specify <code>&amp;loglevel=&lt;0,1,2&gt;</code>\nDefault is 0 (no logging from org.postgresql.core.Logger).\nLevel 2 is really verbose- you will may dozens lines for every SQL statements -details of driver protocoll, like</p>\n\n<pre><code>18:55:06.754 (1)  FE=&gt; Bind(stmt=null,portal=null)\n18:55:06.754 (1)  FE=&gt; Describe(portal=null)\n18:55:06.754 (1)  FE=&gt; Execute(portal=null,limit=0)\n18:55:06.754 (1)  FE=&gt; Sync\n18:55:06.946 (1)  &lt;=BE ParseComplete [null]\n18:55:06.946 (1)  &lt;=BE BindComplete [null]\n18:55:06.946 (1)  &lt;=BE CommandStatus(BEGIN)\n18:55:06.946 (1)  &lt;=BE ParseComplete [null]\n18:55:06.946 (1)  &lt;=BE BindComplete [null]\n18:55:06.946 (1)  &lt;=BE NoData\n18:55:06.946 (1)  &lt;=BE CommandStatus(INSERT 0 1)\n18:55:06.946 (1)  &lt;=BE ReadyForQuery(T)\n18:55:06.947 (1) simple execute, handler=org.postgresql.jdbc2.AbstractJdbc2Connection$TransactionCommandHandler@703fa45, maxRows=0, fetchSize=0, flags=22\n18:55:06.947 (1)  FE=&gt; Bind(stmt=S_1,portal=null)\n18:55:06.947 (1)  FE=&gt; Execute(portal=null,limit=1)\n18:55:06.947 (1)  FE=&gt; Sync\n18:55:07.140 (1)  &lt;=BE BindComplete [null]\n18:55:07.140 (1)  &lt;=BE CommandStatus(COMMIT)\n18:55:07.140 (1)  &lt;=BE ReadyForQuery(I)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":263115,"reputation":16950,"user_id":548473,"display_name":"Grigory Kislin"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1659567842,"creation_date":1491431247,"answer_id":43242672,"question_id":20028036,"body_markdown":"[New Postgres driver 42.0.0](https://github.com/pgjdbc/pgjdbc) use java.util.logging, see [changelog](https://jdbc.postgresql.org/documentation/changelog.html#version_42.0.0)\r\n\r\nTo get logs:\r\n\r\n 1. Add [jul-to-slf4j bridge](https://www.slf4j.org/legacy.html#jul-to-slf4j):\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jul-to-slf4j&lt;/artifactId&gt;\r\n            &lt;version&gt;${slf4j.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n 2. Add in logback.xml (logback-test.xml)\r\n\r\n        &lt;logger name=&quot;org.postgresql&quot; level=&quot;trace&quot;/&gt;\r\n\r\n 3. Add in code\r\n\r\n        static {\r\n            SLF4JBridgeHandler.install();\r\n        }","title":"How do I log postgres driver messages with slf4j?","body":"<p><a href=\"https://github.com/pgjdbc/pgjdbc\" rel=\"nofollow noreferrer\">New Postgres driver 42.0.0</a> use java.util.logging, see <a href=\"https://jdbc.postgresql.org/documentation/changelog.html#version_42.0.0\" rel=\"nofollow noreferrer\">changelog</a></p>\n<p>To get logs:</p>\n<ol>\n<li><p>Add <a href=\"https://www.slf4j.org/legacy.html#jul-to-slf4j\" rel=\"nofollow noreferrer\">jul-to-slf4j bridge</a>:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;jul-to-slf4j&lt;/artifactId&gt;\n    &lt;version&gt;${slf4j.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n</li>\n<li><p>Add in logback.xml (logback-test.xml)</p>\n<pre><code>&lt;logger name=&quot;org.postgresql&quot; level=&quot;trace&quot;/&gt;\n</code></pre>\n</li>\n<li><p>Add in code</p>\n<pre><code>static {\n    SLF4JBridgeHandler.install();\n}\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":164552,"reputation":1138,"user_id":387380,"accept_rate":71,"display_name":"Kerb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8037,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":23632878,"answer_count":3,"score":8,"last_activity_date":1659567842,"creation_date":1384670975,"question_id":20028036,"body_markdown":"I&#39;m using postgres db in my webapp. \r\n\r\nI added following dependencies in my `pom.xml`:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jul-to-slf4j&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n            &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0.13&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nIn IntelliJ Idea console log I see the following piece of text (darkred color, which means it was stdout-ed):\r\n\r\n    Nov 17, 2013 12:32:40 PM org.apache.naming.NamingContext lookup\r\n    WARNING: Unexpected exception resolving reference\r\n    org.postgresql.util.PSQLException: :  &quot;traffic&quot;     ( )\r\n    \tat org.postgresql.core.v3.ConnectionFactoryImpl.doAuthentication(ConnectionFactoryImpl.java:291)\r\n    \tat org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:108)\r\n    \tat org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:66)\r\n    \tat org.postgresql.jdbc2.AbstractJdbc2Connection.&lt;init&gt;(AbstractJdbc2Connection.java:125)\r\n    \tat org.postgresql.jdbc3.AbstractJdbc3Connection.&lt;init&gt;(AbstractJdbc3Connection.java:30)\r\n    \tat org.postgresql.jdbc3g.AbstractJdbc3gConnection.&lt;init&gt;(AbstractJdbc3gConnection.java:22)\r\n    \tat org.postgresql.jdbc4.AbstractJdbc4Connection.&lt;init&gt;(AbstractJdbc4Connection.java:30)\r\n    \tat org.postgresql.jdbc4.Jdbc4Connection.&lt;init&gt;(Jdbc4Connection.java:24)\r\n    \tat org.postgresql.Driver.makeConnection(Driver.java:393)\r\n    \tat org.postgresql.Driver.connect(Driver.java:267)\r\n    \tat org.apache.tomcat.jdbc.pool.PooledConnection.connectUsingDriver(PooledConnection.java:267)\r\n\r\n    \t[...skipped...]\r\n\r\n     javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1420)\r\n    \tat javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:848)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:606)\r\n    \tat sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:322)\r\n    \tat sun.rmi.transport.Transport$1.run(Transport.java:177)\r\n    \tat sun.rmi.transport.Transport$1.run(Transport.java:174)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat sun.rmi.transport.Transport.serviceCall(Transport.java:173)\r\n    \tat sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:556)\r\n    \tat sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:811)\r\n    \tat sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:670)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n    \tat java.lang.Thread.run(Thread.java:724)\r\n    \r\n    Nov 17, 2013 12:32:40 PM org.apache.catalina.core.NamingContextListener addResource\r\n    WARNING: Failed to register in JMX: javax.naming.NamingException: :  &quot;traffic&quot;     ( )\r\n\r\nThe question is how to force that messages from postgres to be logged with slf4j?\r\n\r\n\r\n**logging.properties**\r\n\r\nhandlers = org.slf4j.bridge.SLF4JBridgeHandler\r\n\r\n**logback.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;configuration&gt;\r\n        &lt;property name=&quot;destination&quot; value=&quot;${catalina.base:-./temp}/logs/billing&quot; /&gt;\r\n    \r\n        &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n            &lt;encoder class=&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;&gt;\r\n                &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;\r\n            &lt;/encoder&gt;\r\n        &lt;/appender&gt;\r\n    \r\n        &lt;appender name=&quot;ROLLING&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\r\n            &lt;file&gt;${destination}.log&lt;/file&gt;\r\n            &lt;encoder class=&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;&gt;\r\n                &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;\r\n            &lt;/encoder&gt;\r\n            &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;\r\n                &lt;fileNamePattern&gt;${destination}-%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;\r\n                &lt;maxHistory&gt;30&lt;/maxHistory&gt;\r\n            &lt;/rollingPolicy&gt;\r\n            &lt;timeBasedFileNamingAndTriggeringPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;&gt;\r\n                &lt;maxFileSize&gt;100MB&lt;/maxFileSize&gt;\r\n            &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;\r\n        &lt;/appender&gt;\r\n    \r\n        &lt;logger name=&quot;net.kerba&quot; level=&quot;TRACE&quot;/&gt;\r\n    \r\n        &lt;logger name=&quot;org&quot; level=&quot;INFO&quot; /&gt;\r\n    \r\n        &lt;root level=&quot;debug&quot;&gt;\r\n            &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\r\n            &lt;appender-ref ref=&quot;ROLLING&quot; /&gt;\r\n        &lt;/root&gt;\r\n    &lt;/configuration&gt;\r\n\r\n\r\nFull console output when starting project:\r\n\r\n\r\n    D:\\opt\\apache-tomcat-7.0.25\\bin\\catalina.bat run\r\n    [2013-11-17 12:32:31,305] Artifact billing-filter:war exploded: Server is not connected. Deploy is not available.\r\n    Using CATALINA_BASE:   &quot;D:\\home\\kerb\\.IntelliJIdea12\\system\\tomcat\\Unnamed_billing-filter&quot;\r\n    Using CATALINA_HOME:   &quot;D:\\opt\\apache-tomcat-7.0.25&quot;\r\n    Using CATALINA_TMPDIR: &quot;D:\\opt\\apache-tomcat-7.0.25\\temp&quot;\r\n    Using JRE_HOME:        &quot;C:\\Program Files\\Java\\jdk1.7.0_40&quot;\r\n    Using CLASSPATH:       &quot;D:\\opt\\apache-tomcat-7.0.25\\bin\\bootstrap.jar;D:\\opt\\apache-tomcat-7.0.25\\bin\\tomcat-juli.jar&quot;\r\n    Connected to the target VM, address: &#39;127.0.0.1:52288&#39;, transport: &#39;socket&#39;\r\n    Nov 17, 2013 12:32:32 PM org.apache.catalina.core.AprLifecycleListener init\r\n    INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\\Program Files\\Java\\jdk1.7.0_40\\bin;C:\\Windows\\Sun\\Java\\bin;C:\\Windows\\system32;C:\\Windows;C:\\Program Files (x86)\\JetBrains\\IntelliJ IDEA 12.1\\bin\\..\\.\\bin;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files (x86)\\pgmodeler\\lib;C:\\Program Files (x86)\\GammaTech\\TumarCSP\\lib;C:\\Program Files (x86)\\GammaTech\\TumarCSP\\lib64;C:\\Program Files\\MySQL\\MySQL Server 5.1\\bin;C:\\Program Files\\erl5.10.2\\bin;C:\\Program Files\\SlikSvn\\bin;C:\\Program Files\\OpenVPN\\bin;C:\\Program Files\\TortoiseHg\\;D:\\opt\\maven3\\bin;D:\\opt\\instantclient_11_2;D:\\opt\\wget\\bin;D:\\opt\\conemu;C:\\Program Files\\Far Manager;C:\\Program Files\\PostgreSQL\\9.2\\bin;C:\\Program Files (x86)\\cwRsync\\bin;C:\\Program Files\\WinRAR;C:\\Program Files\\7-Zip;c:\\program files\\java\\jdk1.7.0_40\\jre\\bin;.\r\n    Nov 17, 2013 12:32:32 PM org.apache.coyote.AbstractProtocol init\r\n    INFO: Initializing ProtocolHandler [&quot;http-bio-8080&quot;]\r\n    Nov 17, 2013 12:32:32 PM org.apache.coyote.AbstractProtocol init\r\n    INFO: Initializing ProtocolHandler [&quot;ajp-bio-8009&quot;]\r\n    Nov 17, 2013 12:32:32 PM org.apache.catalina.startup.Catalina load\r\n    INFO: Initialization processed in 900 ms\r\n    Nov 17, 2013 12:32:32 PM org.apache.catalina.core.StandardService startInternal\r\n    INFO: Starting service Catalina\r\n    Nov 17, 2013 12:32:32 PM org.apache.catalina.core.StandardEngine startInternal\r\n    INFO: Starting Servlet Engine: Apache Tomcat/7.0.25\r\n    Nov 17, 2013 12:32:32 PM org.apache.coyote.AbstractProtocol start\r\n    INFO: Starting ProtocolHandler [&quot;http-bio-8080&quot;]\r\n    Nov 17, 2013 12:32:32 PM org.apache.coyote.AbstractProtocol start\r\n    INFO: Starting ProtocolHandler [&quot;ajp-bio-8009&quot;]\r\n    Nov 17, 2013 12:32:32 PM org.apache.catalina.startup.Catalina start\r\n    INFO: Server startup in 49 ms\r\n    Connected to server\r\n    [2013-11-17 12:32:32,966] Artifact billing-filter:war exploded: Artifact is being deployed, please wait...\r\n    12:32:38,593 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]\r\n    12:32:38,594 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]\r\n    12:32:38,594 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [file:/D:/projects/billing-filter/target/check2/WEB-INF/classes/logback.xml]\r\n    12:32:38,612 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - debug attribute not set\r\n    12:32:38,617 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]\r\n    12:32:38,618 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUT]\r\n    12:32:38,662 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]\r\n    12:32:38,662 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [ROLLING]\r\n    12:32:38,685 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - No compression will be used\r\n    12:32:38,686 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - Will use the pattern D:/home/kerb/.IntelliJIdea12/system/tomcat/Unnamed_billing-filter/logs/billing-%d{yyyy-MM-dd}.%i.log for the active file\r\n    12:32:38,688 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - The date pattern is &#39;yyyy-MM-dd&#39; from file name pattern &#39;D:/home/kerb/.IntelliJIdea12/system/tomcat/Unnamed_billing-filter/logs/billing-%d{yyyy-MM-dd}.%i.log&#39;.\r\n    12:32:38,688 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Roll-over at midnight.\r\n    12:32:38,688 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Setting initial period to Sun Nov 17 12:25:59 ALMT 2013\r\n    12:32:38,689 |-ERROR in ch.qos.logback.core.joran.spi.Interpreter@20:107 - no applicable action for [timeBasedFileNamingAndTriggeringPolicy], current ElementPath  is [[configuration][appender][timeBasedFileNamingAndTriggeringPolicy]]\r\n    12:32:38,689 |-ERROR in ch.qos.logback.core.joran.spi.Interpreter@21:26 - no applicable action for [maxFileSize], current ElementPath  is [[configuration][appender][timeBasedFileNamingAndTriggeringPolicy][maxFileSize]]\r\n    12:32:38,690 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[ROLLING] - Active log file name: D:\\home\\kerb\\.IntelliJIdea12\\system\\tomcat\\Unnamed_billing-filter/logs/billing.log\r\n    12:32:38,690 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[ROLLING] - File property is set to [D:\\home\\kerb\\.IntelliJIdea12\\system\\tomcat\\Unnamed_billing-filter/logs/billing.log]\r\n    12:32:38,691 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [net.kerba] to TRACE\r\n    12:32:38,691 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [org] to INFO\r\n    12:32:38,691 |-INFO in ch.qos.logback.classic.joran.action.RootLoggerAction - Setting level of ROOT logger to DEBUG\r\n    12:32:38,691 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[ROOT]\r\n    12:32:38,692 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [ROLLING] to Logger[ROOT]\r\n    12:32:38,692 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - End of configuration.\r\n    12:32:38,692 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@2f163915 - Registering current configuration as safe fallback point\r\n    \r\n    12:32:38.697 [RMI TCP Connection(3)-127.0.0.1] WARN  o.a.tomcat.jdbc.pool.ConnectionPool - maxIdle is smaller than minIdle, setting maxIdle to: 10\r\n    Nov 17, 2013 12:32:40 PM org.apache.naming.NamingContext lookup\r\n    WARNING: Unexpected exception resolving reference\r\n    org.postgresql.util.PSQLException: :  &quot;traffic&quot;     ( )\r\n    \tat org.postgresql.core.v3.ConnectionFactoryImpl.doAuthentication(ConnectionFactoryImpl.java:291)\r\n    \tat org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:108)\r\n\r\n    [... skipped ...]\r\n\r\n    Nov 17, 2013 12:32:40 PM org.apache.catalina.core.NamingContextListener addResource\r\n    WARNING: Failed to register in JMX: javax.naming.NamingException: :  &quot;traffic&quot;     ( )\r\n    12:32:40.211 [RMI TCP Connection(3)-127.0.0.1] INFO  o.a.c.c.C.[Catalina].[localhost].[/] - No Spring WebApplicationInitializer types detected on classpath\r\n    12:32:40.330 [RMI TCP Connection(3)-127.0.0.1] INFO  o.a.c.c.C.[Catalina].[localhost].[/] - Initializing Spring FrameworkServlet &#39;dispatcher&#39;\r\n    12:32:40.330 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.web.servlet.DispatcherServlet - FrameworkServlet &#39;dispatcher&#39;: initialization started\r\n    12:32:40.343 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.c.s.XmlWebApplicationContext - Refreshing WebApplicationContext for namespace &#39;dispatcher-servlet&#39;: startup date [Sun Nov 17 12:32:40 ALMT 2013]; root of context hierarchy\r\n    12:32:40.361 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.b.f.xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/dispatcher-servlet.xml]\r\n    12:32:40.631 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.b.f.s.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@36db4683: defining beans [searchController,informationProviderRegistry,sessionDataHolder,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,viewResolver,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; root of factory hierarchy\r\n    12:32:40.765 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/by-name] onto handler &#39;searchController&#39;\r\n    12:32:40.766 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/by-name.*] onto handler &#39;searchController&#39;\r\n    12:32:40.766 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/by-name/] onto handler &#39;searchController&#39;\r\n    12:32:40.766 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/by-host] onto handler &#39;searchController&#39;\r\n    12:32:40.766 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/by-host.*] onto handler &#39;searchController&#39;\r\n    12:32:40.767 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/by-host/] onto handler &#39;searchController&#39;\r\n    12:32:40.767 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/hostname-traffic-details/{uuid}] onto handler &#39;searchController&#39;\r\n    12:32:40.767 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/hostname-traffic-details/{uuid}.*] onto handler &#39;searchController&#39;\r\n    12:32:40.767 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/hostname-traffic-details/{uuid}/] onto handler &#39;searchController&#39;\r\n    12:32:40.768 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/download/{uuid}] onto handler &#39;searchController&#39;\r\n    12:32:40.768 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/download/{uuid}.*] onto handler &#39;searchController&#39;\r\n    12:32:40.768 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/download/{uuid}/] onto handler &#39;searchController&#39;\r\n    12:32:40.769 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search] onto handler &#39;searchController&#39;\r\n    12:32:40.769 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search.*] onto handler &#39;searchController&#39;\r\n    12:32:40.769 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/] onto handler &#39;searchController&#39;\r\n    12:32:40.769 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/.*] onto handler &#39;searchController&#39;\r\n    12:32:40.770 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/city/{city}] onto handler &#39;searchController&#39;\r\n    12:32:40.770 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/city/{city}.*] onto handler &#39;searchController&#39;\r\n    12:32:40.770 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/city/{city}/] onto handler &#39;searchController&#39;\r\n    12:32:40.771 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/by-ip] onto handler &#39;searchController&#39;\r\n    12:32:40.771 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/by-ip.*] onto handler &#39;searchController&#39;\r\n    12:32:40.771 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/by-ip/] onto handler &#39;searchController&#39;\r\n    12:32:40.771 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/ip-traffic-details/{uuid}] onto handler &#39;searchController&#39;\r\n    12:32:40.772 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/ip-traffic-details/{uuid}.*] onto handler &#39;searchController&#39;\r\n    12:32:40.772 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/ip-traffic-details/{uuid}/] onto handler &#39;searchController&#39;\r\n    12:32:40.772 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/as-excel/{uuid}] onto handler &#39;searchController&#39;\r\n    12:32:40.772 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/as-excel/{uuid}.*] onto handler &#39;searchController&#39;\r\n    12:32:40.773 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/as-excel/{uuid}/] onto handler &#39;searchController&#39;\r\n    12:32:41.058 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.web.servlet.DispatcherServlet - FrameworkServlet &#39;dispatcher&#39;: initialization completed in 728 ms\r\n    [2013-11-17 12:32:41,096] Artifact billing-filter:war exploded: Artifact is deployed successfully\r\n    12:32:42.416 [http-bio-8080-exec-1] INFO  o.a.j.compiler.TldLocationsCache - At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.","title":"How do I log postgres driver messages with slf4j?","body":"<p>I'm using postgres db in my webapp. </p>\n\n<p>I added following dependencies in my <code>pom.xml</code>:</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n        &lt;version&gt;1.7.5&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;jul-to-slf4j&lt;/artifactId&gt;\n        &lt;version&gt;1.7.5&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n        &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n        &lt;version&gt;1.0.13&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>In IntelliJ Idea console log I see the following piece of text (darkred color, which means it was stdout-ed):</p>\n\n<pre><code>Nov 17, 2013 12:32:40 PM org.apache.naming.NamingContext lookup\nWARNING: Unexpected exception resolving reference\norg.postgresql.util.PSQLException: :  \"traffic\"     ( )\n    at org.postgresql.core.v3.ConnectionFactoryImpl.doAuthentication(ConnectionFactoryImpl.java:291)\n    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:108)\n    at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:66)\n    at org.postgresql.jdbc2.AbstractJdbc2Connection.&lt;init&gt;(AbstractJdbc2Connection.java:125)\n    at org.postgresql.jdbc3.AbstractJdbc3Connection.&lt;init&gt;(AbstractJdbc3Connection.java:30)\n    at org.postgresql.jdbc3g.AbstractJdbc3gConnection.&lt;init&gt;(AbstractJdbc3gConnection.java:22)\n    at org.postgresql.jdbc4.AbstractJdbc4Connection.&lt;init&gt;(AbstractJdbc4Connection.java:30)\n    at org.postgresql.jdbc4.Jdbc4Connection.&lt;init&gt;(Jdbc4Connection.java:24)\n    at org.postgresql.Driver.makeConnection(Driver.java:393)\n    at org.postgresql.Driver.connect(Driver.java:267)\n    at org.apache.tomcat.jdbc.pool.PooledConnection.connectUsingDriver(PooledConnection.java:267)\n\n    [...skipped...]\n\n javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1420)\n    at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:848)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:606)\n    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:322)\n    at sun.rmi.transport.Transport$1.run(Transport.java:177)\n    at sun.rmi.transport.Transport$1.run(Transport.java:174)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.rmi.transport.Transport.serviceCall(Transport.java:173)\n    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:556)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:811)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:670)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:724)\n\nNov 17, 2013 12:32:40 PM org.apache.catalina.core.NamingContextListener addResource\nWARNING: Failed to register in JMX: javax.naming.NamingException: :  \"traffic\"     ( )\n</code></pre>\n\n<p>The question is how to force that messages from postgres to be logged with slf4j?</p>\n\n<p><strong>logging.properties</strong></p>\n\n<p>handlers = org.slf4j.bridge.SLF4JBridgeHandler</p>\n\n<p><strong>logback.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;configuration&gt;\n    &lt;property name=\"destination\" value=\"${catalina.base:-./temp}/logs/billing\" /&gt;\n\n    &lt;appender name=\"STDOUT\" class=\"ch.qos.logback.core.ConsoleAppender\"&gt;\n        &lt;encoder class=\"ch.qos.logback.classic.encoder.PatternLayoutEncoder\"&gt;\n            &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n    &lt;appender name=\"ROLLING\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\"&gt;\n        &lt;file&gt;${destination}.log&lt;/file&gt;\n        &lt;encoder class=\"ch.qos.logback.classic.encoder.PatternLayoutEncoder\"&gt;\n            &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;\n        &lt;/encoder&gt;\n        &lt;rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\"&gt;\n            &lt;fileNamePattern&gt;${destination}-%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;\n            &lt;maxHistory&gt;30&lt;/maxHistory&gt;\n        &lt;/rollingPolicy&gt;\n        &lt;timeBasedFileNamingAndTriggeringPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP\"&gt;\n            &lt;maxFileSize&gt;100MB&lt;/maxFileSize&gt;\n        &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;\n    &lt;/appender&gt;\n\n    &lt;logger name=\"net.kerba\" level=\"TRACE\"/&gt;\n\n    &lt;logger name=\"org\" level=\"INFO\" /&gt;\n\n    &lt;root level=\"debug\"&gt;\n        &lt;appender-ref ref=\"STDOUT\" /&gt;\n        &lt;appender-ref ref=\"ROLLING\" /&gt;\n    &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Full console output when starting project:</p>\n\n<pre><code>D:\\opt\\apache-tomcat-7.0.25\\bin\\catalina.bat run\n[2013-11-17 12:32:31,305] Artifact billing-filter:war exploded: Server is not connected. Deploy is not available.\nUsing CATALINA_BASE:   \"D:\\home\\kerb\\.IntelliJIdea12\\system\\tomcat\\Unnamed_billing-filter\"\nUsing CATALINA_HOME:   \"D:\\opt\\apache-tomcat-7.0.25\"\nUsing CATALINA_TMPDIR: \"D:\\opt\\apache-tomcat-7.0.25\\temp\"\nUsing JRE_HOME:        \"C:\\Program Files\\Java\\jdk1.7.0_40\"\nUsing CLASSPATH:       \"D:\\opt\\apache-tomcat-7.0.25\\bin\\bootstrap.jar;D:\\opt\\apache-tomcat-7.0.25\\bin\\tomcat-juli.jar\"\nConnected to the target VM, address: '127.0.0.1:52288', transport: 'socket'\nNov 17, 2013 12:32:32 PM org.apache.catalina.core.AprLifecycleListener init\nINFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\\Program Files\\Java\\jdk1.7.0_40\\bin;C:\\Windows\\Sun\\Java\\bin;C:\\Windows\\system32;C:\\Windows;C:\\Program Files (x86)\\JetBrains\\IntelliJ IDEA 12.1\\bin\\..\\.\\bin;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files (x86)\\pgmodeler\\lib;C:\\Program Files (x86)\\GammaTech\\TumarCSP\\lib;C:\\Program Files (x86)\\GammaTech\\TumarCSP\\lib64;C:\\Program Files\\MySQL\\MySQL Server 5.1\\bin;C:\\Program Files\\erl5.10.2\\bin;C:\\Program Files\\SlikSvn\\bin;C:\\Program Files\\OpenVPN\\bin;C:\\Program Files\\TortoiseHg\\;D:\\opt\\maven3\\bin;D:\\opt\\instantclient_11_2;D:\\opt\\wget\\bin;D:\\opt\\conemu;C:\\Program Files\\Far Manager;C:\\Program Files\\PostgreSQL\\9.2\\bin;C:\\Program Files (x86)\\cwRsync\\bin;C:\\Program Files\\WinRAR;C:\\Program Files\\7-Zip;c:\\program files\\java\\jdk1.7.0_40\\jre\\bin;.\nNov 17, 2013 12:32:32 PM org.apache.coyote.AbstractProtocol init\nINFO: Initializing ProtocolHandler [\"http-bio-8080\"]\nNov 17, 2013 12:32:32 PM org.apache.coyote.AbstractProtocol init\nINFO: Initializing ProtocolHandler [\"ajp-bio-8009\"]\nNov 17, 2013 12:32:32 PM org.apache.catalina.startup.Catalina load\nINFO: Initialization processed in 900 ms\nNov 17, 2013 12:32:32 PM org.apache.catalina.core.StandardService startInternal\nINFO: Starting service Catalina\nNov 17, 2013 12:32:32 PM org.apache.catalina.core.StandardEngine startInternal\nINFO: Starting Servlet Engine: Apache Tomcat/7.0.25\nNov 17, 2013 12:32:32 PM org.apache.coyote.AbstractProtocol start\nINFO: Starting ProtocolHandler [\"http-bio-8080\"]\nNov 17, 2013 12:32:32 PM org.apache.coyote.AbstractProtocol start\nINFO: Starting ProtocolHandler [\"ajp-bio-8009\"]\nNov 17, 2013 12:32:32 PM org.apache.catalina.startup.Catalina start\nINFO: Server startup in 49 ms\nConnected to server\n[2013-11-17 12:32:32,966] Artifact billing-filter:war exploded: Artifact is being deployed, please wait...\n12:32:38,593 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]\n12:32:38,594 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]\n12:32:38,594 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [file:/D:/projects/billing-filter/target/check2/WEB-INF/classes/logback.xml]\n12:32:38,612 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - debug attribute not set\n12:32:38,617 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]\n12:32:38,618 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUT]\n12:32:38,662 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]\n12:32:38,662 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [ROLLING]\n12:32:38,685 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - No compression will be used\n12:32:38,686 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - Will use the pattern D:/home/kerb/.IntelliJIdea12/system/tomcat/Unnamed_billing-filter/logs/billing-%d{yyyy-MM-dd}.%i.log for the active file\n12:32:38,688 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - The date pattern is 'yyyy-MM-dd' from file name pattern 'D:/home/kerb/.IntelliJIdea12/system/tomcat/Unnamed_billing-filter/logs/billing-%d{yyyy-MM-dd}.%i.log'.\n12:32:38,688 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Roll-over at midnight.\n12:32:38,688 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Setting initial period to Sun Nov 17 12:25:59 ALMT 2013\n12:32:38,689 |-ERROR in ch.qos.logback.core.joran.spi.Interpreter@20:107 - no applicable action for [timeBasedFileNamingAndTriggeringPolicy], current ElementPath  is [[configuration][appender][timeBasedFileNamingAndTriggeringPolicy]]\n12:32:38,689 |-ERROR in ch.qos.logback.core.joran.spi.Interpreter@21:26 - no applicable action for [maxFileSize], current ElementPath  is [[configuration][appender][timeBasedFileNamingAndTriggeringPolicy][maxFileSize]]\n12:32:38,690 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[ROLLING] - Active log file name: D:\\home\\kerb\\.IntelliJIdea12\\system\\tomcat\\Unnamed_billing-filter/logs/billing.log\n12:32:38,690 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[ROLLING] - File property is set to [D:\\home\\kerb\\.IntelliJIdea12\\system\\tomcat\\Unnamed_billing-filter/logs/billing.log]\n12:32:38,691 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [net.kerba] to TRACE\n12:32:38,691 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [org] to INFO\n12:32:38,691 |-INFO in ch.qos.logback.classic.joran.action.RootLoggerAction - Setting level of ROOT logger to DEBUG\n12:32:38,691 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[ROOT]\n12:32:38,692 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [ROLLING] to Logger[ROOT]\n12:32:38,692 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - End of configuration.\n12:32:38,692 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@2f163915 - Registering current configuration as safe fallback point\n\n12:32:38.697 [RMI TCP Connection(3)-127.0.0.1] WARN  o.a.tomcat.jdbc.pool.ConnectionPool - maxIdle is smaller than minIdle, setting maxIdle to: 10\nNov 17, 2013 12:32:40 PM org.apache.naming.NamingContext lookup\nWARNING: Unexpected exception resolving reference\norg.postgresql.util.PSQLException: :  \"traffic\"     ( )\n    at org.postgresql.core.v3.ConnectionFactoryImpl.doAuthentication(ConnectionFactoryImpl.java:291)\n    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:108)\n\n[... skipped ...]\n\nNov 17, 2013 12:32:40 PM org.apache.catalina.core.NamingContextListener addResource\nWARNING: Failed to register in JMX: javax.naming.NamingException: :  \"traffic\"     ( )\n12:32:40.211 [RMI TCP Connection(3)-127.0.0.1] INFO  o.a.c.c.C.[Catalina].[localhost].[/] - No Spring WebApplicationInitializer types detected on classpath\n12:32:40.330 [RMI TCP Connection(3)-127.0.0.1] INFO  o.a.c.c.C.[Catalina].[localhost].[/] - Initializing Spring FrameworkServlet 'dispatcher'\n12:32:40.330 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.web.servlet.DispatcherServlet - FrameworkServlet 'dispatcher': initialization started\n12:32:40.343 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.c.s.XmlWebApplicationContext - Refreshing WebApplicationContext for namespace 'dispatcher-servlet': startup date [Sun Nov 17 12:32:40 ALMT 2013]; root of context hierarchy\n12:32:40.361 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.b.f.xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/dispatcher-servlet.xml]\n12:32:40.631 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.b.f.s.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@36db4683: defining beans [searchController,informationProviderRegistry,sessionDataHolder,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,viewResolver,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; root of factory hierarchy\n12:32:40.765 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/by-name] onto handler 'searchController'\n12:32:40.766 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/by-name.*] onto handler 'searchController'\n12:32:40.766 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/by-name/] onto handler 'searchController'\n12:32:40.766 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/by-host] onto handler 'searchController'\n12:32:40.766 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/by-host.*] onto handler 'searchController'\n12:32:40.767 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/by-host/] onto handler 'searchController'\n12:32:40.767 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/hostname-traffic-details/{uuid}] onto handler 'searchController'\n12:32:40.767 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/hostname-traffic-details/{uuid}.*] onto handler 'searchController'\n12:32:40.767 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/hostname-traffic-details/{uuid}/] onto handler 'searchController'\n12:32:40.768 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/download/{uuid}] onto handler 'searchController'\n12:32:40.768 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/download/{uuid}.*] onto handler 'searchController'\n12:32:40.768 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/download/{uuid}/] onto handler 'searchController'\n12:32:40.769 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search] onto handler 'searchController'\n12:32:40.769 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search.*] onto handler 'searchController'\n12:32:40.769 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/] onto handler 'searchController'\n12:32:40.769 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/.*] onto handler 'searchController'\n12:32:40.770 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/city/{city}] onto handler 'searchController'\n12:32:40.770 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/city/{city}.*] onto handler 'searchController'\n12:32:40.770 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/city/{city}/] onto handler 'searchController'\n12:32:40.771 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/by-ip] onto handler 'searchController'\n12:32:40.771 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/by-ip.*] onto handler 'searchController'\n12:32:40.771 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/by-ip/] onto handler 'searchController'\n12:32:40.771 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/ip-traffic-details/{uuid}] onto handler 'searchController'\n12:32:40.772 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/ip-traffic-details/{uuid}.*] onto handler 'searchController'\n12:32:40.772 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/ip-traffic-details/{uuid}/] onto handler 'searchController'\n12:32:40.772 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/as-excel/{uuid}] onto handler 'searchController'\n12:32:40.772 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/as-excel/{uuid}.*] onto handler 'searchController'\n12:32:40.773 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.a.DefaultAnnotationHandlerMapping - Mapped URL path [/search/as-excel/{uuid}/] onto handler 'searchController'\n12:32:41.058 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.web.servlet.DispatcherServlet - FrameworkServlet 'dispatcher': initialization completed in 728 ms\n[2013-11-17 12:32:41,096] Artifact billing-filter:war exploded: Artifact is deployed successfully\n12:32:42.416 [http-bio-8080-exec-1] INFO  o.a.j.compiler.TldLocationsCache - At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1657756722,"post_id":72973689,"comment_id":128889074,"body_markdown":"See https://stackoverflow.com/questions/11364761/how-do-i-compile-a-java-with-support-for-older-versions-of-java","body":"See <a href=\"https://stackoverflow.com/questions/11364761/how-do-i-compile-a-java-with-support-for-older-versions-of-java\" title=\"how do i compile a java with support for older versions of java\">stackoverflow.com/questions/11364761/&hellip;</a>"},{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":1,"creation_date":1657756746,"post_id":72973689,"comment_id":128889078,"body_markdown":"In my recent experience, Java8 is a good &quot;least common denominator&quot;.  FYI, larger corporations tend to be the slowest to upgrade.  But even the most &quot;conservative&quot; organizations are up to Java8 by this time...  ALSO:  you can *COMPILE* with any version.  You just need to use `javac -target ...` to generate class files that are compatible with an earlier JVM runtime.","body":"In my recent experience, Java8 is a good &quot;least common denominator&quot;.  FYI, larger corporations tend to be the slowest to upgrade.  But even the most &quot;conservative&quot; organizations are up to Java8 by this time...  ALSO:  you can <i>COMPILE</i> with any version.  You just need to use <code>javac -target ...</code> to generate class files that are compatible with an earlier JVM runtime."},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1657757016,"post_id":72973689,"comment_id":128889119,"body_markdown":"If possible, look at &quot;embedding&quot; the JRE for your releases (this will bloat your builds), then you can wrap native launchers and installers to provide additional support.  This eliminates the need for the user to go through the &quot;install java&quot; process and eliminates issues with auto updates","body":"If possible, look at &quot;embedding&quot; the JRE for your releases (this will bloat your builds), then you can wrap native launchers and installers to provide additional support.  This eliminates the need for the user to go through the &quot;install java&quot; process and eliminates issues with auto updates"},{"owner":{"account_id":6885505,"reputation":913,"user_id":5407757,"accept_rate":62,"display_name":"Daniel R. Collins"},"score":0,"creation_date":1658776707,"post_id":72973689,"comment_id":129131280,"body_markdown":"@tgdavies: Thanks a bunch for that link. Ultimately, that was the info I needed.","body":"@tgdavies: Thanks a bunch for that link. Ultimately, that was the info I needed."}],"answers":[{"tags":[],"owner":{"account_id":9686576,"reputation":526,"user_id":7186177,"display_name":"Tod Harter"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1657757275,"creation_date":1657757275,"answer_id":72973903,"question_id":72973689,"body_markdown":"Well, you have a few options...\r\n\r\nFirst of all you can TARGET the version 8 runtime, but you can compile code from later revisions of the language. This may or may not work in all cases, as Java 9 and up do some things rather differently! Still, fairly vanilla Java that isn&#39;t doing weird ClassLoader stuff is LIKELY to work, and you can certainly avoid problematic constructs.\r\n\r\nSecondly, you can simply stick to Java 8! It is ANCIENT but it is a virtually immortal LTS, due to the reason above that things in Java 9 are different. However, you will miss out on new things.\r\n\r\nYou COULD go whole hog and move on from Java 17 to GraalVM, which can be had in versions compatible with Java11, Java17, etc. It has the ability to compile code down to a completely stand-alone binary, using native-image, and again unless you do some fairly esoteric stuff, your code will work. The end result will be similar to using something like C++. You can even build shareable libraries. \r\n\r\nI guess your other option is to just make sure people are not using Java8. Ideally they&#39;re using Java11, but I guess now java17 is the newest LTS, though few people seem to install it.","title":"What JDK should I compile with to support most desktop users?","body":"<p>Well, you have a few options...</p>\n<p>First of all you can TARGET the version 8 runtime, but you can compile code from later revisions of the language. This may or may not work in all cases, as Java 9 and up do some things rather differently! Still, fairly vanilla Java that isn't doing weird ClassLoader stuff is LIKELY to work, and you can certainly avoid problematic constructs.</p>\n<p>Secondly, you can simply stick to Java 8! It is ANCIENT but it is a virtually immortal LTS, due to the reason above that things in Java 9 are different. However, you will miss out on new things.</p>\n<p>You COULD go whole hog and move on from Java 17 to GraalVM, which can be had in versions compatible with Java11, Java17, etc. It has the ability to compile code down to a completely stand-alone binary, using native-image, and again unless you do some fairly esoteric stuff, your code will work. The end result will be similar to using something like C++. You can even build shareable libraries.</p>\n<p>I guess your other option is to just make sure people are not using Java8. Ideally they're using Java11, but I guess now java17 is the newest LTS, though few people seem to install it.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1659567286,"creation_date":1657758022,"answer_id":72973968,"question_id":72973689,"body_markdown":"Your user most likely ran into the issue that Java classes compiled with a newer class file version number do not run on older JVMs.  If that is the *only* issue it can be addressed by recompiling ...\r\n\r\nBut there is a deeper issue.  Older Java class libraries don&#39;t support all of the APIs provided by newer versions of Java.  Also there have been some important architectural changes starting in Java 9 (e.g. addition of modules, removal of applets and closing off access to JDK internal classes) that &quot;break&quot; applications that run on older Java versions\r\n\r\nWhat this means is that if you develop and test your code on Java 17 (say) there is a significant chance that it won&#39;t work on (say) Java 8 ... even if you compiled it for Java 8.  And vice versa, because some APIs have been removed, or made inaccessible or ... work differently.\r\n\r\nSo my advice would be:\r\n\r\n1.  Decide on a specific range of Java versions you will support for your application; e.g. Java 8 LTS&lt;sup&gt;1&lt;/sup&gt; through Java 17 LTS.\r\n\r\n2.  Develop targeting the oldest Java version and its APIs.  \r\n\r\n3.  Build and test on the Java oldest version.\r\n\r\n4.  Also test on (at least) all of the other LTS Java versions ... within the range you are supporting.\r\n\r\nThis will mean that you are limited to using the APIs and Java language features of your oldest supported version.  This could hold you back, so you have to choose between that and supporting users with old (out of date) versions of Java.\r\n\r\nThe issue of users trying to install / use old versions of Java can be addressed in three ways:\r\n\r\n  - Provide clear installation instructions to the user that say what kind / version(s) of Java they need to install, and where to get them from.  (And how to set or configure `JAVA_HOME` if your application relies on that.) \r\n\r\n    Of course, some users won&#39;t read the instructions properly, but that is their lookout ...\r\n\r\n  - Use `jlink` to turn your application into a custom JVM, and distribute your code that way.\r\n\r\n  - Use `jpackage` to create platform specific binaries.\r\n\r\nIf you take the `jlink` or `jpackage` routes, the onus will be on you to push out new distributables whenever there are Java security patches that are relevant to your application.  Your users won&#39;t be able to &quot;just install the latest Java patches&quot; anymore.\r\n\r\nNote that `jlink` is available for Java 9 onwards, and `jpackage` from Java 16 onwards.\r\n\r\n----------------------\r\n\r\n&gt; What JDK should I compile with to support **most** desktop users?\r\n\r\nI don&#39;t think there is a good answer to that.  We can&#39;t tell you what proportion of &quot;desktop&quot; users have each version of Java installed.  (Or what they are *permitted* to install; e.g. by corporate policy.)  But you can&#39;t support old Java versions indefinitely.\r\n\r\nI did find this though:\r\n\r\n- [Java 8 still dominates, but Java 17 wave is coming  survey](https://www.infoworld.com/article/3652408/java-8-still-dominates-but-java-17-wave-is-coming-survey.html) - dated March 2022.\r\n\r\n---------------------\r\n\r\n&lt;sup&gt;1 - Java 7 and earlier are all well beyond &quot;end of life&quot;.  You are not helping anyone by trying to support them.&lt;/sup&gt;\r\n","title":"What JDK should I compile with to support most desktop users?","body":"<p>Your user most likely ran into the issue that Java classes compiled with a newer class file version number do not run on older JVMs.  If that is the <em>only</em> issue it can be addressed by recompiling ...</p>\n<p>But there is a deeper issue.  Older Java class libraries don't support all of the APIs provided by newer versions of Java.  Also there have been some important architectural changes starting in Java 9 (e.g. addition of modules, removal of applets and closing off access to JDK internal classes) that &quot;break&quot; applications that run on older Java versions</p>\n<p>What this means is that if you develop and test your code on Java 17 (say) there is a significant chance that it won't work on (say) Java 8 ... even if you compiled it for Java 8.  And vice versa, because some APIs have been removed, or made inaccessible or ... work differently.</p>\n<p>So my advice would be:</p>\n<ol>\n<li><p>Decide on a specific range of Java versions you will support for your application; e.g. Java 8 LTS<sup>1</sup> through Java 17 LTS.</p>\n</li>\n<li><p>Develop targeting the oldest Java version and its APIs.</p>\n</li>\n<li><p>Build and test on the Java oldest version.</p>\n</li>\n<li><p>Also test on (at least) all of the other LTS Java versions ... within the range you are supporting.</p>\n</li>\n</ol>\n<p>This will mean that you are limited to using the APIs and Java language features of your oldest supported version.  This could hold you back, so you have to choose between that and supporting users with old (out of date) versions of Java.</p>\n<p>The issue of users trying to install / use old versions of Java can be addressed in three ways:</p>\n<ul>\n<li><p>Provide clear installation instructions to the user that say what kind / version(s) of Java they need to install, and where to get them from.  (And how to set or configure <code>JAVA_HOME</code> if your application relies on that.)</p>\n<p>Of course, some users won't read the instructions properly, but that is their lookout ...</p>\n</li>\n<li><p>Use <code>jlink</code> to turn your application into a custom JVM, and distribute your code that way.</p>\n</li>\n<li><p>Use <code>jpackage</code> to create platform specific binaries.</p>\n</li>\n</ul>\n<p>If you take the <code>jlink</code> or <code>jpackage</code> routes, the onus will be on you to push out new distributables whenever there are Java security patches that are relevant to your application.  Your users won't be able to &quot;just install the latest Java patches&quot; anymore.</p>\n<p>Note that <code>jlink</code> is available for Java 9 onwards, and <code>jpackage</code> from Java 16 onwards.</p>\n<hr />\n<blockquote>\n<p>What JDK should I compile with to support <strong>most</strong> desktop users?</p>\n</blockquote>\n<p>I don't think there is a good answer to that.  We can't tell you what proportion of &quot;desktop&quot; users have each version of Java installed.  (Or what they are <em>permitted</em> to install; e.g. by corporate policy.)  But you can't support old Java versions indefinitely.</p>\n<p>I did find this though:</p>\n<ul>\n<li><a href=\"https://www.infoworld.com/article/3652408/java-8-still-dominates-but-java-17-wave-is-coming-survey.html\" rel=\"nofollow noreferrer\">Java 8 still dominates, but Java 17 wave is coming  survey</a> - dated March 2022.</li>\n</ul>\n<hr />\n<p><sup>1 - Java 7 and earlier are all well beyond &quot;end of life&quot;.  You are not helping anyone by trying to support them.</sup></p>\n"},{"tags":[],"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1657760992,"creation_date":1657759153,"answer_id":72974046,"question_id":72973689,"body_markdown":"It looks like you are using Java 17. Developers of apps targeting Java version after 8 are expected to supply the runtime for running the application. This means there is no more &#39;downloading and installing Java&#39; separately on the user side. This is also why the download page you refer to only offers Java 8.\r\n\r\nIn practice, this means that you should use `jlink` to create a runtime image (i.e. the thing that you would previously download and install) that can run your application.\r\n\r\n`jpackage` can also be used to create application images and installers (it calls `jlink` under the hood). Both of those are tools that come with the JDK.\r\n\r\nFor your purposes I recommend using `jpackage` with something like this:\r\n\r\n    jpackage `\r\n      --win-console `\r\n      --main-jar app.jar `\r\n      --main-class Main `\r\n      --name myapp `\r\n      --type app-image `\r\n      --input input\r\n\r\nIn this command, `input` is a folder that has the main `app.jar` in it (Note: the input folder should _not_ be the current directory, since that will lead to infinite recursion).\r\n\r\n`--win-console` is also needed for console applications on Windows, since otherwise no console is created when running the app.\r\n\r\nThis command will create a `myapp` folder that you can zip/tar up and distribute.\r\n\r\nThis `myapp` folder has a `myapp.exe` launcher that can be used to run the application.\r\n\r\nAlso, note that this will create a runtime image with a default set of modules. If your jar is modular (i.e. it has a `module-info` file), I suggest using `--module` instead of `--main-jar`/`--main-class`, since that will use the module descriptor to determine the set of modules in the runtime image. (See `jpackage --help`)\r\n\r\n---\r\n\r\nNote that on Windows you will also need to install the wix toolkit. It can be installed easily through e.g. [scoop](https://scoop.sh/):\r\n\r\n    scoop install wixtoolset","title":"What JDK should I compile with to support most desktop users?","body":"<p>It looks like you are using Java 17. Developers of apps targeting Java version after 8 are expected to supply the runtime for running the application. This means there is no more 'downloading and installing Java' separately on the user side. This is also why the download page you refer to only offers Java 8.</p>\n<p>In practice, this means that you should use <code>jlink</code> to create a runtime image (i.e. the thing that you would previously download and install) that can run your application.</p>\n<p><code>jpackage</code> can also be used to create application images and installers (it calls <code>jlink</code> under the hood). Both of those are tools that come with the JDK.</p>\n<p>For your purposes I recommend using <code>jpackage</code> with something like this:</p>\n<pre><code>jpackage `\n  --win-console `\n  --main-jar app.jar `\n  --main-class Main `\n  --name myapp `\n  --type app-image `\n  --input input\n</code></pre>\n<p>In this command, <code>input</code> is a folder that has the main <code>app.jar</code> in it (Note: the input folder should <em>not</em> be the current directory, since that will lead to infinite recursion).</p>\n<p><code>--win-console</code> is also needed for console applications on Windows, since otherwise no console is created when running the app.</p>\n<p>This command will create a <code>myapp</code> folder that you can zip/tar up and distribute.</p>\n<p>This <code>myapp</code> folder has a <code>myapp.exe</code> launcher that can be used to run the application.</p>\n<p>Also, note that this will create a runtime image with a default set of modules. If your jar is modular (i.e. it has a <code>module-info</code> file), I suggest using <code>--module</code> instead of <code>--main-jar</code>/<code>--main-class</code>, since that will use the module descriptor to determine the set of modules in the runtime image. (See <code>jpackage --help</code>)</p>\n<hr />\n<p>Note that on Windows you will also need to install the wix toolkit. It can be installed easily through e.g. <a href=\"https://scoop.sh/\" rel=\"nofollow noreferrer\">scoop</a>:</p>\n<pre><code>scoop install wixtoolset\n</code></pre>\n"}],"owner":{"account_id":6885505,"reputation":913,"user_id":5407757,"accept_rate":62,"display_name":"Daniel R. Collins"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1657812261,"accepted_answer_id":72973968,"answer_count":3,"score":1,"last_activity_date":1659567286,"creation_date":1657755102,"question_id":72973689,"body_markdown":"I write a few small, free, desktop command-line applications in Java. I package those as JAR files in releases on GitHub. About a year ago in light of Oracle licensing changes, I switched from the Oracle JDK to Open JDK. Developing on Windows, this is what I currently have installed:\r\n\r\n    C:\\Users\\admin&gt;java -version \r\n    openjdk version &quot;17.0.1&quot; 2021-10-19 \r\n    OpenJDK Runtime Environment (build 17.0.1+12-39) \r\n    OpenJDK 64-Bit Server VM (build 17.0.1+12-39, mixed mode, sharing)\r\n\r\nNow, about a week ago I was visiting a friend (also a software developer) and a reason came up where we wanted to run my application on his Windows box. He didn&#39;t have Java installed. So, watching over his shoulder, he went to the java.com [&quot;Download Java for Windows&quot;][1] page (currently listing Java Version 8 Update 341), downloaded, and installed it.\r\n\r\nThen when he went to run my application, it failed to run, giving back an error along the lines of (paraphrasing from memory), &quot;This version of the JRE does not support a later version of Java&quot;. This surprised both of us; he didn&#39;t know there was a later version of Java, and I didn&#39;t know compiling with the current OpenJDK would make a non-supported binary. \r\n\r\nWhat&#39;s the best practice to fix this release problem?\r\n\r\n  [1]: https://www.java.com/download/ie_manual.jsp","title":"What JDK should I compile with to support most desktop users?","body":"<p>I write a few small, free, desktop command-line applications in Java. I package those as JAR files in releases on GitHub. About a year ago in light of Oracle licensing changes, I switched from the Oracle JDK to Open JDK. Developing on Windows, this is what I currently have installed:</p>\n<pre><code>C:\\Users\\admin&gt;java -version \nopenjdk version &quot;17.0.1&quot; 2021-10-19 \nOpenJDK Runtime Environment (build 17.0.1+12-39) \nOpenJDK 64-Bit Server VM (build 17.0.1+12-39, mixed mode, sharing)\n</code></pre>\n<p>Now, about a week ago I was visiting a friend (also a software developer) and a reason came up where we wanted to run my application on his Windows box. He didn't have Java installed. So, watching over his shoulder, he went to the java.com <a href=\"https://www.java.com/download/ie_manual.jsp\" rel=\"nofollow noreferrer\">&quot;Download Java for Windows&quot;</a> page (currently listing Java Version 8 Update 341), downloaded, and installed it.</p>\n<p>Then when he went to run my application, it failed to run, giving back an error along the lines of (paraphrasing from memory), &quot;This version of the JRE does not support a later version of Java&quot;. This surprised both of us; he didn't know there was a later version of Java, and I didn't know compiling with the current OpenJDK would make a non-supported binary.</p>\n<p>What's the best practice to fix this release problem?</p>\n"},{"tags":["java","swing","traversal","jcomponent"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1659550001,"post_id":73218025,"comment_id":129323149,"body_markdown":"*My goal was to be able to traverse with tab some of the components in a panel, not all of them* - maybe use `setFocusable(false)` on those components.","body":"<i>My goal was to be able to traverse with tab some of the components in a panel, not all of them</i> - maybe use <code>setFocusable(false)</code> on those components."}],"answers":[{"tags":[],"owner":{"account_id":21775114,"reputation":11,"user_id":16077663,"display_name":"joanmart"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659559106,"creation_date":1659559106,"answer_id":73227556,"question_id":73218025,"body_markdown":"I solved my problem by including a series of checks into the getComponentAfter(...) and getComponentBefore(...) methods. I am including my code below. \r\n\r\nBasically, to determine whether to move to a lower cycle, it asks whether the next component is a Focus Cycle Root. \r\nWhen concluding a cycle, to determine whether to move to an upper cycle, it asks whether the parent of the container is a Focus Traversal Policy Provider.\r\n\r\nI got the general idea for this solution by looking at how these methods where implemented by the default traversal policies of my JFrame.\r\n\r\n\r\n&#39;&#39;&#39;\r\n\r\n    public Component getComponentAfter(Container aContainer, Component aComponent) {\r\n    \t\tComponent comp;\r\n    \t\tdo{\r\n    \t\t\tfocus++;\r\n    \t\t\tif(focus == comps.size()) {\r\n    \t\t\t\tfocus = 0;\r\n    \t\t\t\tancestor = aContainer;\r\n    \t\t\t\tdo ancestor = ancestor.getParent();\r\n    \t\t\t\twhile(ancestor!=null &amp;&amp; !ancestor.isFocusTraversalPolicyProvider());\r\n    \t\t\t\tif(ancestor != null &amp;&amp; ancestor.isFocusTraversalPolicyProvider())\r\n    \t\t\t\t\treturn (ancestor\r\n    \t\t\t\t\t\t\t.getFocusTraversalPolicy()\r\n    \t\t\t\t\t\t\t.getComponentAfter(ancestor, aContainer));\r\n    \t\t\t}\r\n    \t\t\tcomp = comps.get(focus);\r\n    \t\t} while(!comp.isEnabled() || !comp.isShowing() || !comp.isVisible());\r\n    \t\tif(comp instanceof Container &amp;&amp; ((Container)comp).isFocusCycleRoot()) {\r\n    \t\t\treturn ((Container)comp)\r\n    \t\t\t\t\t.getFocusTraversalPolicy()\r\n    \t\t\t\t\t.getDefaultComponent((Container) comp);\r\n    \t\t}\r\n    \t\treturn comp;\r\n    \t}\r\n\r\n&#39;&#39;&#39; ","title":"Java Focus Traversal Policy","body":"<p>I solved my problem by including a series of checks into the getComponentAfter(...) and getComponentBefore(...) methods. I am including my code below.</p>\n<p>Basically, to determine whether to move to a lower cycle, it asks whether the next component is a Focus Cycle Root.\nWhen concluding a cycle, to determine whether to move to an upper cycle, it asks whether the parent of the container is a Focus Traversal Policy Provider.</p>\n<p>I got the general idea for this solution by looking at how these methods where implemented by the default traversal policies of my JFrame.</p>\n<p>'''</p>\n<pre><code>public Component getComponentAfter(Container aContainer, Component aComponent) {\n        Component comp;\n        do{\n            focus++;\n            if(focus == comps.size()) {\n                focus = 0;\n                ancestor = aContainer;\n                do ancestor = ancestor.getParent();\n                while(ancestor!=null &amp;&amp; !ancestor.isFocusTraversalPolicyProvider());\n                if(ancestor != null &amp;&amp; ancestor.isFocusTraversalPolicyProvider())\n                    return (ancestor\n                            .getFocusTraversalPolicy()\n                            .getComponentAfter(ancestor, aContainer));\n            }\n            comp = comps.get(focus);\n        } while(!comp.isEnabled() || !comp.isShowing() || !comp.isVisible());\n        if(comp instanceof Container &amp;&amp; ((Container)comp).isFocusCycleRoot()) {\n            return ((Container)comp)\n                    .getFocusTraversalPolicy()\n                    .getDefaultComponent((Container) comp);\n        }\n        return comp;\n    }\n</code></pre>\n<p>'''</p>\n"}],"owner":{"account_id":21775114,"reputation":11,"user_id":16077663,"display_name":"joanmart"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":248,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73227556,"answer_count":1,"score":0,"last_activity_date":1659567112,"creation_date":1659512687,"question_id":73218025,"body_markdown":"I need help implementing my own traversal policy.\r\nMy goal was to be able to traverse with tab some of the components in a panel, not all of them.\r\nI was able to research the FocusTraversalPolicy class and figure out a little how this works. The code below shows how far I got. But I seem to have hit a wall. \r\n\r\nThis code will allow me to traverse from one component to another, but there are in my Container smaller jpanels with jtextfields in them. For some reason, I am not able to traverse to these using tab, even though I added the jpanels into my policy.\r\n\r\nI am aware that I can just access the textfields inside these jpanels and add them to my policy. However, since these smaller jpanels are sort of dynamic and can add extra components inside of them, **I am looking more for something that will allow me to pass from the Parent container traversal cycle to the smaller one.**\r\n\r\nI could be wrong, but I believe I should add something to the getComponentAfter(...) and the getComponentBefore(...) methods. As you can see, I commented out some of the things I was trying. I would appreciate any help you can give me. I attached a picture of my panel so you can see what I mean. \r\n\r\n![enter image description here][1]\r\n\r\n\r\n```\r\npublic class TabFocusAdapter extends FocusTraversalPolicy implements FocusListener, MouseListener {\r\n\t\r\n\tprivate ArrayList&lt;Component&gt; comps = new ArrayList&lt;Component&gt;();\r\n\tprivate int focus, def;\r\n\tprivate boolean mouse_focus = false;\r\n\t\r\n\t\r\n\tpublic TabFocusAdapter(int f) {\r\n\t\tfocus = def = f;\r\n\t}\r\n\t\r\n\t\r\n\t@Override\r\n\t/***Returns the component after the current one \r\n\t * if current one is the last in the cycle, it will return the first\r\n\t * it will skip all disabled components */\r\n\tpublic Component getComponentAfter(Container aContainer, Component aComponent) {\r\n\t\t//if(((Container) aComponent).getFocusTraversalPolicy()!=null)\r\n\t\t//if(aComponent) \r\n\t\t\t//return ((Container)aComponent).getFocusTraversalPolicy().getFirstComponent((Container) aComponent);\r\n\t\tfocus++;\r\n\t\tif(focus == comps.size()) focus = 0;\r\n\t\tComponent comp = comps.get(focus);\r\n\t\twhile(!comp.isEnabled() || !comp.isShowing() || !comp.isVisible()) {\r\n\t\t\tfocus++;\r\n\t\t\tif(focus == comps.size()) focus = 0;\r\n\t\t\tcomp = comps.get(focus);\r\n\t\t}\r\n\t\treturn comps.get(focus);\r\n\t}\r\n\r\n\t@Override\r\n\t/**Returns the component before the current one \r\n\t * if current one is the first in the cycle, it will return the last\r\n\t * it will skip all disabled components */\r\n\tpublic Component getComponentBefore(Container aContainer, Component aComponent) {\r\n\t\tfocus--;\r\n\t\tif(focus == -1) focus = comps.size()-1;\r\n\t\tComponent comp = comps.get(focus);\r\n\t\twhile(!comp.isEnabled() || !comp.isShowing() || !comp.isVisible()) {\r\n\t\t\tfocus--;\r\n\t\t\tif(focus == -1) focus = comps.size()-1;\r\n\t\t\tcomp = comps.get(focus);\r\n\t\t}\r\n\t\treturn comps.get(focus);\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic Component getFirstComponent(Container aContainer) {\r\n\t\treturn comps.get(0);\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic Component getLastComponent(Container aContainer) {\r\n\t\treturn comps.get(comps.size() - 1);\r\n\t}\r\n\t\r\n\t@Override\r\n\t/**Returns the starting component */\r\n\tpublic Component getDefaultComponent(Container aContainer) {\r\n\t\treturn comps.get(def);\r\n\t}\r\n\t\r\n\tpublic void addComp(Component comp) {\r\n\t\tcomps.add(comp);\r\n\t\tcomp.addMouseListener(this);\r\n\t\tcomp.addFocusListener(this);\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void focusGained(FocusEvent e) {\r\n\t\tComponent comp = e.getComponent();\r\n\t\tif(!mouse_focus &amp;&amp; comp instanceof JTextComponent) \r\n\t\t\t((JTextComponent)comp).selectAll();\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void mousePressed(MouseEvent e) {\r\n\t\tmouse_focus = true;\r\n\t\tfocus = comps.indexOf(e.getComponent());\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void mouseReleased(MouseEvent e) {\r\n\t\tmouse_focus = false;\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t@Override\r\n\tpublic void mouseClicked(MouseEvent e) {}\r\n\r\n\t@Override\r\n\tpublic void focusLost(FocusEvent e) {}\r\n\r\n\t@Override\r\n\tpublic void mouseEntered(MouseEvent e) {}\r\n\r\n\t@Override\r\n\tpublic void mouseExited(MouseEvent e) {}\r\n}\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/KHSNc.jpg","title":"Java Focus Traversal Policy","body":"<p>I need help implementing my own traversal policy.\nMy goal was to be able to traverse with tab some of the components in a panel, not all of them.\nI was able to research the FocusTraversalPolicy class and figure out a little how this works. The code below shows how far I got. But I seem to have hit a wall.</p>\n<p>This code will allow me to traverse from one component to another, but there are in my Container smaller jpanels with jtextfields in them. For some reason, I am not able to traverse to these using tab, even though I added the jpanels into my policy.</p>\n<p>I am aware that I can just access the textfields inside these jpanels and add them to my policy. However, since these smaller jpanels are sort of dynamic and can add extra components inside of them, <strong>I am looking more for something that will allow me to pass from the Parent container traversal cycle to the smaller one.</strong></p>\n<p>I could be wrong, but I believe I should add something to the getComponentAfter(...) and the getComponentBefore(...) methods. As you can see, I commented out some of the things I was trying. I would appreciate any help you can give me. I attached a picture of my panel so you can see what I mean.</p>\n<p><img src=\"https://i.stack.imgur.com/KHSNc.jpg\" alt=\"enter image description here\" /></p>\n<pre><code>public class TabFocusAdapter extends FocusTraversalPolicy implements FocusListener, MouseListener {\n    \n    private ArrayList&lt;Component&gt; comps = new ArrayList&lt;Component&gt;();\n    private int focus, def;\n    private boolean mouse_focus = false;\n    \n    \n    public TabFocusAdapter(int f) {\n        focus = def = f;\n    }\n    \n    \n    @Override\n    /***Returns the component after the current one \n     * if current one is the last in the cycle, it will return the first\n     * it will skip all disabled components */\n    public Component getComponentAfter(Container aContainer, Component aComponent) {\n        //if(((Container) aComponent).getFocusTraversalPolicy()!=null)\n        //if(aComponent) \n            //return ((Container)aComponent).getFocusTraversalPolicy().getFirstComponent((Container) aComponent);\n        focus++;\n        if(focus == comps.size()) focus = 0;\n        Component comp = comps.get(focus);\n        while(!comp.isEnabled() || !comp.isShowing() || !comp.isVisible()) {\n            focus++;\n            if(focus == comps.size()) focus = 0;\n            comp = comps.get(focus);\n        }\n        return comps.get(focus);\n    }\n\n    @Override\n    /**Returns the component before the current one \n     * if current one is the first in the cycle, it will return the last\n     * it will skip all disabled components */\n    public Component getComponentBefore(Container aContainer, Component aComponent) {\n        focus--;\n        if(focus == -1) focus = comps.size()-1;\n        Component comp = comps.get(focus);\n        while(!comp.isEnabled() || !comp.isShowing() || !comp.isVisible()) {\n            focus--;\n            if(focus == -1) focus = comps.size()-1;\n            comp = comps.get(focus);\n        }\n        return comps.get(focus);\n    }\n    \n    @Override\n    public Component getFirstComponent(Container aContainer) {\n        return comps.get(0);\n    }\n    \n    @Override\n    public Component getLastComponent(Container aContainer) {\n        return comps.get(comps.size() - 1);\n    }\n    \n    @Override\n    /**Returns the starting component */\n    public Component getDefaultComponent(Container aContainer) {\n        return comps.get(def);\n    }\n    \n    public void addComp(Component comp) {\n        comps.add(comp);\n        comp.addMouseListener(this);\n        comp.addFocusListener(this);\n    }\n    \n    @Override\n    public void focusGained(FocusEvent e) {\n        Component comp = e.getComponent();\n        if(!mouse_focus &amp;&amp; comp instanceof JTextComponent) \n            ((JTextComponent)comp).selectAll();\n    }\n    \n    @Override\n    public void mousePressed(MouseEvent e) {\n        mouse_focus = true;\n        focus = comps.indexOf(e.getComponent());\n    }\n    \n    @Override\n    public void mouseReleased(MouseEvent e) {\n        mouse_focus = false;\n    }\n    \n    \n    \n    @Override\n    public void mouseClicked(MouseEvent e) {}\n\n    @Override\n    public void focusLost(FocusEvent e) {}\n\n    @Override\n    public void mouseEntered(MouseEvent e) {}\n\n    @Override\n    public void mouseExited(MouseEvent e) {}\n}\n</code></pre>\n"},{"tags":["java","authentication","oauth","jwt","docusignapi"],"comments":[{"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"score":0,"creation_date":1659438201,"post_id":73206131,"comment_id":129289865,"body_markdown":"First, `Throwable::printStackTrace()` does not handle an exception. Second, `pemObject` is `null` either because `pem.readPemObject()` returns `null` or because any of the calls in the `try` block issued an exception that you do not show here.","body":"First, <code>Throwable::printStackTrace()</code> does not handle an exception. Second, <code>pemObject</code> is <code>null</code> either because <code>pem.readPemObject()</code> returns <code>null</code> or because any of the calls in the <code>try</code> block issued an exception that you do not show here."},{"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"score":0,"creation_date":1659438261,"post_id":73206131,"comment_id":129289884,"body_markdown":"Never catch an exception you cannot handle!!","body":"Never catch an exception you cannot handle!!"},{"owner":{"account_id":3941825,"reputation":12902,"user_id":3255871,"display_name":"Inbar Gazit"},"score":0,"creation_date":1659479198,"post_id":73206131,"comment_id":129303825,"body_markdown":"Try to go to https://developers.docusign.com/docs/esign-rest-api/quickstart/ and select Java and see if that works. This will set everything correctly for you","body":"Try to go to <a href=\"https://developers.docusign.com/docs/esign-rest-api/quickstart/\" rel=\"nofollow noreferrer\">developers.docusign.com/docs/esign-rest-api/quickstart</a> and select Java and see if that works. This will set everything correctly for you"},{"owner":{"account_id":7557680,"reputation":2844,"user_id":5736633,"accept_rate":71,"display_name":"vatbub"},"score":0,"creation_date":1659636132,"post_id":73206131,"comment_id":129347520,"body_markdown":"Does this answer your question? [What is a NullPointerException, and how do I fix it?](https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it\">What is a NullPointerException, and how do I fix it?</a>"}],"answers":[{"tags":[],"owner":{"account_id":25664310,"reputation":21,"user_id":19429594,"display_name":"Docusign Dev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659566785,"creation_date":1659562761,"answer_id":73228083,"question_id":73206131,"body_markdown":"I wanted to share some code from Docusign&#39;s Java SDK: https://github.com/docusign/docusign-esign-java-client/blob/master/src/main/java/com/docusign/esign/client/auth/JWTUtils.java#L180. We can just look at lines 180-190. Breaking those lines down, this would be the code for getting the bytes[] from a given filePath:\r\n\r\n    File pemFile = new File(filepath);\r\n    Reader reader = new FileReader(pemFile);\r\n    PemReader reader = new PemReader(reader);\r\n    PemObject pemObject = reader.readPemObject();\r\n    byte[] bytes = pemObject.getContent();\r\n\r\nYour code includes StringReader which we do not use. I&#39;m not 100% sure if you are able to, but if your main goal is to just get the bytes, may I suggest a code block like:\r\n\r\n    File inFile = new File(filePath);\r\n    Reader reader = new FileReader(inFile);\r\n    PemReader pem = new PemReader(reader);\r\n    PemObject pemObject = pem.readPemObject();\r\n    byte[] bytes = pemObject.getContent();\r\n\r\nI&#39;d also recommend adding validation of the file/file path like on lines 183-186.\r\n\r\nPlease let me know if you have further issues.","title":"Cannot invoke &quot;org.bouncycastle.util.io.pem.PemObject.getContent()&quot; because &quot;pemObject&quot; is null","body":"<p>I wanted to share some code from Docusign's Java SDK: <a href=\"https://github.com/docusign/docusign-esign-java-client/blob/master/src/main/java/com/docusign/esign/client/auth/JWTUtils.java#L180\" rel=\"nofollow noreferrer\">https://github.com/docusign/docusign-esign-java-client/blob/master/src/main/java/com/docusign/esign/client/auth/JWTUtils.java#L180</a>. We can just look at lines 180-190. Breaking those lines down, this would be the code for getting the bytes[] from a given filePath:</p>\n<pre><code>File pemFile = new File(filepath);\nReader reader = new FileReader(pemFile);\nPemReader reader = new PemReader(reader);\nPemObject pemObject = reader.readPemObject();\nbyte[] bytes = pemObject.getContent();\n</code></pre>\n<p>Your code includes StringReader which we do not use. I'm not 100% sure if you are able to, but if your main goal is to just get the bytes, may I suggest a code block like:</p>\n<pre><code>File inFile = new File(filePath);\nReader reader = new FileReader(inFile);\nPemReader pem = new PemReader(reader);\nPemObject pemObject = pem.readPemObject();\nbyte[] bytes = pemObject.getContent();\n</code></pre>\n<p>I'd also recommend adding validation of the file/file path like on lines 183-186.</p>\n<p>Please let me know if you have further issues.</p>\n"}],"owner":{"account_id":25956161,"reputation":11,"user_id":19673480,"display_name":"Monish Kumar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1598,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1659566785,"creation_date":1659436802,"question_id":73206131,"body_markdown":"Iam trying to get access token using JWT Grant authentication for the embedded signing (docusign e-signature) implemetation.    \r\nProvided RSA key pairs (Private&amp;public) keys in .pem file and passing private key in byte[] as to request JWTUserToken. pem object is returning null content.Is this a jar version mismatch?\r\nif any kindly suggest.\r\n\r\n\r\nCode:\r\n\r\n    public void populateApiClientConfigurations() throws IOException, IllegalArgumentException, ApiException {\r\n\t\t\r\n\t\tApiClient apiClient = new ApiClient(&quot;https://demo.docusign.net&quot;); \r\n\t\t String integratorKey = &quot;0789a33f-ac9b-4298-b699-18608f8be4f3&quot;;\r\n\t\t String UserId = &quot;b945b788-6266-4ac0-b7b6-1aae495186a8&quot;;\r\n\t\tList&lt;String&gt; scopes = new ArrayList&lt;&gt;();\r\n\t\tscopes.add(OAuth.Scope_SIGNATURE);\r\n\t\tString privateKeyFilePath=&quot;D:\\\\Demodocs\\\\privatekey.pem&quot;;\r\n\t\tbyte[] privateKey = loadKeyFile(privateKeyFilePath);\r\n\t\tLong time = 3600L;\r\n\t\tOAuthToken oauthToken = apiClient.requestJWTUserToken(integratorKey,UserId,scopes,privateKey,time);\r\n\t\tSystem.out.println((oauthToken.getAccessToken()));\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic static byte[] loadKeyFile(String filePath) {\r\n\r\n\t    File inFile = new File(filePath);\r\n\t    long fileLen = inFile.length();\r\n\t    Reader reader = null;\r\n\t    PemObject pemObject = null;\r\n\t    try {\r\n\t        reader = new FileReader(inFile);\r\n\r\n\t        char[] content = new char[(int) fileLen];\r\n\t        reader.read(content);\r\n\t        String str = new String(content);\r\n\t        StringReader stringreader = new StringReader(str);\r\n\t        PemReader pem = new PemReader(stringreader);\r\n\t        pemObject = pem.readPemObject();\r\n\t      \r\n\t    } catch (Exception e) {\r\n\t        e.printStackTrace();\r\n\t    }\r\n\t    return pemObject.getContent();\r\n\t}\r\n\r\nError:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;org.bouncycastle.util.io.pem.PemObject.getContent()&quot; because &quot;pemObject&quot; is null\r\n\tat Demo.CommonService.loadKeyFile(CommonService.java:165)\r\n\tat Demo.CommonService.populateApiClientConfigurations(CommonService.java:129)\r\n\tat Demo.CommonService.main(CommonService.java:56)\r\n\r\n","title":"Cannot invoke &quot;org.bouncycastle.util.io.pem.PemObject.getContent()&quot; because &quot;pemObject&quot; is null","body":"<p>Iam trying to get access token using JWT Grant authentication for the embedded signing (docusign e-signature) implemetation.<br />\nProvided RSA key pairs (Private&amp;public) keys in .pem file and passing private key in byte[] as to request JWTUserToken. pem object is returning null content.Is this a jar version mismatch?\nif any kindly suggest.</p>\n<p>Code:</p>\n<pre><code>public void populateApiClientConfigurations() throws IOException, IllegalArgumentException, ApiException {\n    \n    ApiClient apiClient = new ApiClient(&quot;https://demo.docusign.net&quot;); \n     String integratorKey = &quot;0789a33f-ac9b-4298-b699-18608f8be4f3&quot;;\n     String UserId = &quot;b945b788-6266-4ac0-b7b6-1aae495186a8&quot;;\n    List&lt;String&gt; scopes = new ArrayList&lt;&gt;();\n    scopes.add(OAuth.Scope_SIGNATURE);\n    String privateKeyFilePath=&quot;D:\\\\Demodocs\\\\privatekey.pem&quot;;\n    byte[] privateKey = loadKeyFile(privateKeyFilePath);\n    Long time = 3600L;\n    OAuthToken oauthToken = apiClient.requestJWTUserToken(integratorKey,UserId,scopes,privateKey,time);\n    System.out.println((oauthToken.getAccessToken()));\n    \n}\n\npublic static byte[] loadKeyFile(String filePath) {\n\n    File inFile = new File(filePath);\n    long fileLen = inFile.length();\n    Reader reader = null;\n    PemObject pemObject = null;\n    try {\n        reader = new FileReader(inFile);\n\n        char[] content = new char[(int) fileLen];\n        reader.read(content);\n        String str = new String(content);\n        StringReader stringreader = new StringReader(str);\n        PemReader pem = new PemReader(stringreader);\n        pemObject = pem.readPemObject();\n      \n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n    return pemObject.getContent();\n}\n</code></pre>\n<p>Error:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;org.bouncycastle.util.io.pem.PemObject.getContent()&quot; because &quot;pemObject&quot; is null\nat Demo.CommonService.loadKeyFile(CommonService.java:165)\nat Demo.CommonService.populateApiClientConfigurations(CommonService.java:129)\nat Demo.CommonService.main(CommonService.java:56)\n</code></pre>\n"},{"tags":["java","swing","netbeans","jcombobox"],"comments":[{"owner":{"account_id":25962369,"reputation":11,"user_id":19678788,"display_name":"ledor"},"score":0,"creation_date":1659502084,"post_id":73214957,"comment_id":129307129,"body_markdown":"yes I do understand the problem. However I can&#39;t find a solution other than manually removing every line that&#39;s added from the dropdown to then add the new ones in. I was just seeing if anyone had an idea that didn&#39;t involve me writing a couple hundred more lines of code for every selection that I add.\n\nThank you though Arsh Coder","body":"yes I do understand the problem. However I can&#39;t find a solution other than manually removing every line that&#39;s added from the dropdown to then add the new ones in. I was just seeing if anyone had an idea that didn&#39;t involve me writing a couple hundred more lines of code for every selection that I add.  Thank you though Arsh Coder"},{"owner":{"account_id":22880973,"reputation":698,"user_id":17022570,"display_name":"Arsh Coder"},"score":0,"creation_date":1659506683,"post_id":73214957,"comment_id":129307895,"body_markdown":"use something like :- `if ((Dropdown2.getSelectedItem()!=null) &amp;&amp; Dropdown2.getSelectedItem().equals(&quot;Mobile&quot;)){     //do your work here                   }`","body":"use something like :- <code>if ((Dropdown2.getSelectedItem()!=null) &amp;&amp; Dropdown2.getSelectedItem().equals(&quot;Mobile&quot;)){     &#47;&#47;do your work here                   }</code>"},{"owner":{"account_id":1564273,"reputation":1454,"user_id":1453413,"display_name":"HoRn"},"score":2,"creation_date":1659515002,"post_id":73214957,"comment_id":129310484,"body_markdown":"Please make sure to follow [ask] on posting","body":"Please make sure to follow <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> on posting"},{"owner":{"account_id":25962369,"reputation":11,"user_id":19678788,"display_name":"ledor"},"score":0,"creation_date":1659529344,"post_id":73214957,"comment_id":129315815,"body_markdown":"@ArshCoder I tried your idea. In the Apache IDE netbeans software I&#39;m using to help assist in my coding. It throws a couple more errors doing that and renders the whole application unusable.\n\n```Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.RuntimeException: Uncompilable code - &lt;identifier&gt; expected```\n\nis the error I get","body":"@ArshCoder I tried your idea. In the Apache IDE netbeans software I&#39;m using to help assist in my coding. It throws a couple more errors doing that and renders the whole application unusable.  <code>Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.RuntimeException: Uncompilable code - &lt;identifier&gt; expected</code>  is the error I get"},{"owner":{"account_id":25962369,"reputation":11,"user_id":19678788,"display_name":"ledor"},"score":0,"creation_date":1659535434,"post_id":73214957,"comment_id":129317967,"body_markdown":"I realized if there was a way to delete all but 0. Kind of like ```Dropdown2.removeItemAt(1);``` it would work as well. But with the nature of how the program will run. I wont know how many items need to be deleted at this point in production.","body":"I realized if there was a way to delete all but 0. Kind of like <code>Dropdown2.removeItemAt(1);</code> it would work as well. But with the nature of how the program will run. I wont know how many items need to be deleted at this point in production."},{"owner":{"account_id":25962369,"reputation":11,"user_id":19678788,"display_name":"ledor"},"score":0,"creation_date":1659573810,"post_id":73214957,"comment_id":129329039,"body_markdown":"@kleopatra I will try to. Sorry. However I&#39;m fairly new to this level of java so I&#39;m not familiar with Java naming conventions","body":"@kleopatra I will try to. Sorry. However I&#39;m fairly new to this level of java so I&#39;m not familiar with Java naming conventions"}],"answers":[{"tags":[],"owner":{"account_id":25962369,"reputation":11,"user_id":19678788,"display_name":"ledor"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1659562453,"creation_date":1659562453,"answer_id":73228047,"question_id":73214957,"body_markdown":"Instead of doing .removeAllItems()\r\nI created a while loop to remove the items I wanted gone.","title":"how can I work around the jComboBox dependant dropdown Null error without writing hundreds of lines per choice?","body":"<p>Instead of doing .removeAllItems()\nI created a while loop to remove the items I wanted gone.</p>\n"}],"owner":{"account_id":25962369,"reputation":11,"user_id":19678788,"display_name":"ledor"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":218,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1659566606,"creation_date":1659484952,"question_id":73214957,"body_markdown":"The issue I&#39;m getting is every time it does .removeAllItems() I get an error that makes the dropdowns not work. The error is \r\n```Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NullPointerException: Cannot invoke &quot;Object.equals(Object)&quot; because the return value of &quot;javax.swing.JComboBox.getSelectedItem()&quot; is null```\r\n\r\n\r\nI&#39;ve been working on trying to make a code where I have 3 drop down menus that change based off the first 2.\r\n\r\nSo it&#39;s alot like \r\n```\r\nCountry dropdown (United States, Canada, Mexico)\r\n\r\nif (Country.getSelectedItem().equals(&quot;United States&quot;))\r\n{\r\n  Label1.setText(&quot;States&quot;);\r\n  Dropdown1.removeAllItems();\r\n  Dropdown1.addItem(&quot; &quot;);\r\n  Dropdown1.addItem(&quot;Alabama&quot;);\r\n  Dropdown1.addItem(&quot;Wisconsin&quot;);\r\n  Dropdown1.addItem(&quot;Maine&quot;);\r\n}\r\n\r\nif (Dropdown1.selectedItem().equals(&quot;Alabama&quot;)\r\n  {\r\n\r\n  if (Label2.getText().equals(&quot;Towns&quot;)\r\n    {\r\n    }\r\n  else\r\n    {\r\n    Label2.setLabel(&quot;Towns&quot;);\r\n    Dropdown2.removeAllItems();\r\n    Dropdown2.addItem(&quot; &quot;);\r\n    Dropdown2.addItem(&quot;Mobile&quot;);\r\n    }\r\n  }\r\nelse\r\n  {\r\n  }\r\n\r\nif (Dropdown2.getSelectedItem().equals(&quot;Mobile&quot;)\r\n  {\r\n    if (Dropdown1.getSelectedItem().equals(&quot;Alabama&quot;)\r\n    {\r\n      Info1.setText(&quot;Name&quot;);\r\n      Info1_sub.setText(&quot;Mobile&quot;);\r\n      Info2.setText(&quot;Size&quot;);\r\n      Info2_sub.setText(&quot;City&quot;);\r\n      Info3.setText(&quot;Area code&quot;);\r\n      Info3_sub.setText(&quot;251&quot;);\r\n      Info4.setText(&quot;Personal Contacts&quot;);\r\n      Info4_sub.setText(&quot;124&quot;);\r\n    }\r\n    else \r\n    {\r\n    }\r\n  }\r\nelse\r\n  {\r\n  }\r\n```\r\n\r\n\r\nEdit:\r\n\r\nSOLVED!!!!\r\nI was playing with more codes and figured out if I added in a while loop it&#39;ll do exactly what I want.\r\n\r\nthe code for others will be as follows.\r\n\r\nCombobox1 items = 1, 2, 3, 4\r\nCombobox2 items = Test 1, Test 2, Test3 \r\n\r\n``` if (Combobox1.getSelectedItem().equals(&quot;1&quot;))\r\n{\r\n  while (Combobox2.getItemCount() &gt; 1)\r\n  {\r\n    Combobox2.removeItemAt(1);\r\n  }\r\n  Combobox2.addItem(&quot;Real1&quot;);\r\n  Combobox2.addItem(&quot;Real2&quot;);\r\n}\r\n\r\nThank you everyone who tried to help and so much for the ideas!","title":"how can I work around the jComboBox dependant dropdown Null error without writing hundreds of lines per choice?","body":"<p>The issue I'm getting is every time it does .removeAllItems() I get an error that makes the dropdowns not work. The error is\n<code>Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NullPointerException: Cannot invoke &quot;Object.equals(Object)&quot; because the return value of &quot;javax.swing.JComboBox.getSelectedItem()&quot; is null</code></p>\n<p>I've been working on trying to make a code where I have 3 drop down menus that change based off the first 2.</p>\n<p>So it's alot like</p>\n<pre><code>Country dropdown (United States, Canada, Mexico)\n\nif (Country.getSelectedItem().equals(&quot;United States&quot;))\n{\n  Label1.setText(&quot;States&quot;);\n  Dropdown1.removeAllItems();\n  Dropdown1.addItem(&quot; &quot;);\n  Dropdown1.addItem(&quot;Alabama&quot;);\n  Dropdown1.addItem(&quot;Wisconsin&quot;);\n  Dropdown1.addItem(&quot;Maine&quot;);\n}\n\nif (Dropdown1.selectedItem().equals(&quot;Alabama&quot;)\n  {\n\n  if (Label2.getText().equals(&quot;Towns&quot;)\n    {\n    }\n  else\n    {\n    Label2.setLabel(&quot;Towns&quot;);\n    Dropdown2.removeAllItems();\n    Dropdown2.addItem(&quot; &quot;);\n    Dropdown2.addItem(&quot;Mobile&quot;);\n    }\n  }\nelse\n  {\n  }\n\nif (Dropdown2.getSelectedItem().equals(&quot;Mobile&quot;)\n  {\n    if (Dropdown1.getSelectedItem().equals(&quot;Alabama&quot;)\n    {\n      Info1.setText(&quot;Name&quot;);\n      Info1_sub.setText(&quot;Mobile&quot;);\n      Info2.setText(&quot;Size&quot;);\n      Info2_sub.setText(&quot;City&quot;);\n      Info3.setText(&quot;Area code&quot;);\n      Info3_sub.setText(&quot;251&quot;);\n      Info4.setText(&quot;Personal Contacts&quot;);\n      Info4_sub.setText(&quot;124&quot;);\n    }\n    else \n    {\n    }\n  }\nelse\n  {\n  }\n</code></pre>\n<p>Edit:</p>\n<p>SOLVED!!!!\nI was playing with more codes and figured out if I added in a while loop it'll do exactly what I want.</p>\n<p>the code for others will be as follows.</p>\n<p>Combobox1 items = 1, 2, 3, 4\nCombobox2 items = Test 1, Test 2, Test3</p>\n<pre><code>{\n  while (Combobox2.getItemCount() &gt; 1)\n  {\n    Combobox2.removeItemAt(1);\n  }\n  Combobox2.addItem(&quot;Real1&quot;);\n  Combobox2.addItem(&quot;Real2&quot;);\n}\n\nThank you everyone who tried to help and so much for the ideas!\n</code></pre>\n"},{"tags":["java","android-espresso","release"],"comments":[{"owner":{"account_id":5813983,"reputation":3022,"user_id":4584212,"accept_rate":40,"display_name":"Oliver Metz"},"score":0,"creation_date":1659408953,"post_id":73092146,"comment_id":129282114,"body_markdown":"Do you have multiple modules in your project? Maybe one of them is missing it as a release dependency?","body":"Do you have multiple modules in your project? Maybe one of them is missing it as a release dependency?"},{"owner":{"account_id":6932995,"reputation":129,"user_id":5321926,"display_name":"MKE"},"score":0,"creation_date":1659565089,"post_id":73092146,"comment_id":129327603,"body_markdown":"Thanks, Oliver, for your feedback.  Yes, I have one main test entrypoint module with several sub-class modules that do the real work of the test.  I don&#39;t set up release vs. debug dependencies - they both use the same set.   With your question in mind, I gutted the main test entrypoint module to do a minimal amount of work by itself so the other modules aren&#39;t involved and it still has the same result.  What else would help to facilitate this conversation?","body":"Thanks, Oliver, for your feedback.  Yes, I have one main test entrypoint module with several sub-class modules that do the real work of the test.  I don&#39;t set up release vs. debug dependencies - they both use the same set.   With your question in mind, I gutted the main test entrypoint module to do a minimal amount of work by itself so the other modules aren&#39;t involved and it still has the same result.  What else would help to facilitate this conversation?"}],"owner":{"account_id":6932995,"reputation":129,"user_id":5321926,"display_name":"MKE"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":374,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659566082,"creation_date":1658591663,"question_id":73092146,"body_markdown":"I&#39;ve been able to implement the IdlingResource in my espresso tests, but it fails to run on a release build.  Runs just fine on debug build or without IdlingResource, but I really need IdlingResource to manage the timing issues in espresso tests.  I&#39;d much rather submit release builds to Firebase Test Lab as I&#39;ve done in the past, but seem to have run into a wall with this.  \r\n\r\nThe log shows the faiure as:\r\nCaused by: java.lang.ClassNotFoundException: Didn&#39;t find class &quot;androidx.test.espresso.IdlingResource&quot;\r\n\r\nAnyone know how to remedy this problem?\r\n\r\nMy dependencies are:\r\n\r\n    dependencies {\r\n        implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n        implementation platform(&#39;com.google.firebase:firebase-bom:30.2.0&#39;)\r\n        implementation &#39;com.google.firebase:firebase-analytics&#39; //:21.0.0&#39;\r\n        implementation &#39;androidx.appcompat:appcompat:1.4.2&#39;\r\n        implementation &#39;androidx.lifecycle:lifecycle-viewmodel:2.5.0&#39;\r\n        implementation &#39;androidx.versionedparcelable:versionedparcelable:1.1.1&#39;\r\n        implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n        implementation &#39;androidx.multidex:multidex:2.0.1&#39;\r\n        implementation &#39;com.google.android.material:material:1.6.1&#39;\r\n        implementation &#39;androidx.navigation:navigation-fragment:2.5.0&#39;\r\n        implementation &#39;androidx.navigation:navigation-ui:2.5.0&#39;\r\n        implementation &#39;androidx.test.espresso:espresso-idling-resource:3.4.0&#39;\r\n        implementation &#39;androidx.annotation:annotation:1.4.0&#39;\r\n    \r\n        androidTestImplementation &#39;androidx.test.espresso:espresso-contrib:3.4.0&#39;\r\n        androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.4.0&#39;\r\n        androidTestImplementation &#39;androidx.test:runner:1.4.0&#39;\r\n        androidTestImplementation &#39;androidx.test:rules:1.4.0&#39;\r\n        androidTestImplementation &#39;androidx.test.ext:junit:1.1.3&#39;\r\n        androidTestImplementation &#39;androidx.test:core:1.4.0&#39;\r\n        androidTestImplementation &#39;org.hamcrest:hamcrest-integration:1.3&#39;\r\n        androidTestImplementation &#39;com.google.firebase:testlab-instr-lib:0.2&#39;\r\n    \r\n        coreLibraryDesugaring &#39;com.android.tools:desugar_jdk_libs:1.2.0&#39;\r\n        testImplementation &#39;junit:junit:4.13.2&#39;\r\n    }\r\n\r\nThe error displayed in the run log is: \r\n\r\n    java.lang.RuntimeException: Failed to instantiate test runner class androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner\r\n    \r\n    at androidx.test.ext.junit.runners.AndroidJUnit4.throwInitializationError(AndroidJUnit4.java:129)\r\n    at androidx.test.ext.junit.runners.AndroidJUnit4.loadRunner(AndroidJUnit4.java:121)\r\n    at androidx.test.ext.junit.runners.AndroidJUnit4.loadRunner(AndroidJUnit4.java:82)\r\n    at androidx.test.ext.junit.runners.AndroidJUnit4.&lt;init&gt;(AndroidJUnit4.java:56)\r\n    ... 15 trimmed\r\n    Caused by: java.lang.reflect.InvocationTargetException\r\n    at java.lang.reflect.Constructor.newInstance(Native Method)\r\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:288)\r\n    at androidx.test.ext.junit.runners.AndroidJUnit4.loadRunner(AndroidJUnit4.java:112)\r\n    ... 18 more\r\n    Caused by: java.lang.NoClassDefFoundError: androidx.test.espresso.IdlingResource\r\n    at libcore.reflect.InternalNames.getClass(InternalNames.java:55)\r\n    at java.lang.Class.getDexCacheType(Class.java:479)\r\n    at java.lang.reflect.ArtMethod.getDexCacheType(ArtMethod.java:229)\r\n    at java.lang.reflect.ArtMethod.getReturnType(ArtMethod.java:178)\r\n    at java.lang.reflect.Method.getReturnType(Method.java:184)\r\n    at java.lang.Class.getDeclaredMethods(Class.java:771)\r\n    at org.junit.internal.MethodSorter.getDeclaredMethods(MethodSorter.java:54)\r\n    at org.junit.runners.model.TestClass.scanAnnotatedMembers(TestClass.java:65)\r\n    at org.junit.runners.model.TestClass.&lt;init&gt;(TestClass.java:57)\r\n    at org.junit.runners.ParentRunner.createTestClass(ParentRunner.java:88)\r\n    at org.junit.runners.ParentRunner.&lt;init&gt;(ParentRunner.java:83)\r\n    at org.junit.runners.BlockJUnit4ClassRunner.&lt;init&gt;(BlockJUnit4ClassRunner.java:65)\r\n    at androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner.&lt;init&gt;(AndroidJUnit4ClassRunner.java:43)\r\n    at androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner.&lt;init&gt;(AndroidJUnit4ClassRunner.java:48)\r\n    ... 21 more\r\n    Caused by: java.lang.ClassNotFoundException: Didn&#39;t find class &quot;androidx.test.espresso.IdlingResource&quot; on path: DexPathList[[zip file &quot;/system/framework/android.test.runner.jar&quot;, zip file &quot;/data/app/com.myco.myapp.test-2/base.apk&quot;, zip file &quot;/data/app/com.myco.myapp-2/base.apk&quot;],nativeLibraryDirectories=[/vendor/lib, /system/lib]]\r\n    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:56)\r\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)\r\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:469)\r\n    at libcore.reflect.InternalNames.getClass(InternalNames.java:53)\r\n    ... 34 more\r\n    Suppressed: java.lang.ClassNotFoundException: androidx.test.espresso.IdlingResource\r\n    at java.lang.Class.classForName(Native Method)\r\n    at java.lang.BootClassLoader.findClass(ClassLoader.java:781)\r\n    at java.lang.BootClassLoader.loadClass(ClassLoader.java:841)\r\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:504)\r\n    ... 36 more\r\n    Caused by: java.lang.NoClassDefFoundError: Class not found using the boot class loader; no stack available\r\n\r\nAfter limiting the androidTest to just a single module and limited functionality, here&#39;s the source and the result that&#39;s still failing:\r\n\r\n    package myco.myapp\r\n    \r\n    import android.Manifest;\r\n    import android.app.Activity;\r\n    import android.content.Context;\r\n    import android.content.ContextWrapper;\r\n    import android.view.View;\r\n    import android.view.ViewGroup;\r\n    import android.view.ViewParent;\r\n    \r\n    import org.hamcrest.Description;\r\n    import org.hamcrest.Matcher;\r\n    import org.hamcrest.TypeSafeMatcher;\r\n    import org.junit.After;\r\n    import org.junit.Before;\r\n    import org.junit.Rule;\r\n    import org.junit.Test;\r\n    import org.junit.rules.RuleChain;\r\n    import org.junit.rules.TestRule;\r\n    import org.junit.runner.RunWith;\r\n    \r\n    import androidx.test.core.app.ActivityScenario;\r\n    import androidx.test.espresso.UiController;\r\n    import androidx.test.espresso.ViewAction;\r\n    import androidx.test.espresso.ViewInteraction;\r\n    import androidx.test.espresso.matcher.ViewMatchers;\r\n    import androidx.test.filters.MediumTest;\r\n    import androidx.test.rule.GrantPermissionRule;\r\n    //import androidx.test.runner.AndroidJUnit4;\r\n    import androidx.test.ext.junit.runners.AndroidJUnit4;\r\n    \r\n    import static androidx.test.espresso.Espresso.onView;\r\n    import static androidx.test.espresso.action.ViewActions.click;\r\n    import static androidx.test.espresso.matcher.ViewMatchers.isDisplayed;\r\n    import static androidx.test.espresso.matcher.ViewMatchers.isRoot;\r\n    import static androidx.test.espresso.matcher.ViewMatchers.withClassName;\r\n    import static androidx.test.espresso.matcher.ViewMatchers.withId;\r\n    import static org.hamcrest.Matchers.allOf;\r\n    import static org.hamcrest.Matchers.is;\r\n    \r\n    import androidx.test.ext.junit.rules.ActivityScenarioRule;\r\n    import androidx.test.espresso.IdlingRegistry;\r\n    import androidx.test.espresso.IdlingResource;\r\n    \r\n    \r\n    @MediumTest\r\n    @RunWith(AndroidJUnit4.class)\r\n    //@RunWith(AndroidJUnit4ClassRunner.class)\r\n    public class FullTest\r\n    {\r\n        protected IdlingResource mIdlingResource;\r\n    \r\n    \r\n        //    @Rule public\r\n        private final GrantPermissionRule mGrantPermissionRule = GrantPermissionRule.grant(\r\n                Manifest.permission.READ_EXTERNAL_STORAGE,\r\n                Manifest.permission.WRITE_EXTERNAL_STORAGE\r\n        );\r\n    \r\n        @Before\r\n        public void registerIdlingResource() {\r\n            ActivityScenario activityScenario = ActivityScenario.launch(MainActivity.class);\r\n            activityScenario.onActivity(new ActivityScenario.ActivityAction&lt;MainActivity&gt;() {\r\n                @Override\r\n                public void perform(MainActivity activity) {\r\n                    mIdlingResource = activity.getIdlingResource();\r\n                    // To prove that the test fails, omit this call:\r\n                    IdlingRegistry.getInstance().register(mIdlingResource);\r\n                }\r\n            });\r\n        }\r\n    \r\n        @After\r\n        public void unregisterIdlingResource() {\r\n            new ScreenshotWatcher().quickCapture(&quot;EndFullTest&quot;);\r\n            if (mIdlingResource != null) {\r\n                IdlingRegistry.getInstance().unregister(mIdlingResource);\r\n            }\r\n        }\r\n    \r\n        @Test\r\n        public void fullTest()\r\n        {\r\n            ViewInteraction relativeLayout = onView(\r\n                    allOf(withId(R.id.menuButton),\r\n                            childAtPosition(\r\n                                    childAtPosition(\r\n                                            withClassName(is(&quot;com.android.internal.widget.ActionBarView&quot;)),\r\n                                            1),\r\n                                    1),\r\n                            isDisplayed()));\r\n            relativeLayout.perform(click());\r\n    \r\n            onView(isRoot()).perform(waitFor(1000));\r\n    \r\n            ViewInteraction relativeLayout2 = onView(\r\n                    allOf(withId(R.id.menuButton),\r\n                            childAtPosition(\r\n                                    childAtPosition(\r\n                                            withClassName(is(&quot;com.android.internal.widget.ActionBarView&quot;)),\r\n                                            1),\r\n                                    0),\r\n                            isDisplayed()));\r\n            relativeLayout2.perform(click());\r\n        }\r\n    \r\n        public static Activity getActivity(Context context)\r\n        {\r\n            while (context instanceof ContextWrapper)\r\n            {\r\n                if (context instanceof Activity)\r\n                {\r\n                    return (Activity) context;\r\n                }\r\n                context = ((ContextWrapper) context).getBaseContext();\r\n            }\r\n            return null;\r\n        }\r\n    \r\n        // only included to debug release build issue with IdlingResource\r\n        private static Matcher&lt;View&gt; childAtPosition(\r\n                final Matcher&lt;View&gt; parentMatcher, final int position)\r\n        {\r\n    \r\n            return new TypeSafeMatcher&lt;View&gt;()\r\n            {\r\n                @Override\r\n                public void describeTo(Description description)\r\n                {\r\n                    description.appendText(&quot;Child at position &quot; + position + &quot; in parent &quot;);\r\n                    parentMatcher.describeTo(description);\r\n                }\r\n    \r\n                @Override\r\n                public boolean matchesSafely(View view)\r\n                {\r\n                    ViewParent parent = view.getParent();\r\n                    return parent instanceof ViewGroup &amp;&amp; parentMatcher.matches(parent)\r\n                            &amp;&amp; view.equals(((ViewGroup) parent).getChildAt(position));\r\n                }\r\n            };\r\n        }\r\n    \r\n        private static ViewAction waitFor(long delay) {\r\n            return new ViewAction() {\r\n                @Override public Matcher&lt;View&gt; getConstraints() {\r\n                    return ViewMatchers.isRoot();\r\n                }\r\n    \r\n                @Override public String getDescription() {\r\n                    return &quot;wait for &quot; + delay + &quot;milliseconds&quot;;\r\n                }\r\n    \r\n                @Override public void perform(UiController uiController, View view) {\r\n                    uiController.loopMainThreadForAtLeast(delay);\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\nAnd the resulting log:\r\n\r\n    java.lang.RuntimeException: Failed to instantiate test runner class androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner\r\n    \r\n    \r\n    \tat androidx.test.ext.junit.runners.AndroidJUnit4.throwInitializationError(AndroidJUnit4.java:129)\r\n    \tat androidx.test.ext.junit.runners.AndroidJUnit4.loadRunner(AndroidJUnit4.java:121)\r\n    \tat androidx.test.ext.junit.runners.AndroidJUnit4.loadRunner(AndroidJUnit4.java:82)\r\n    \tat androidx.test.ext.junit.runners.AndroidJUnit4.&lt;init&gt;(AndroidJUnit4.java:56)\r\n    \t... 15 trimmed\r\n    Caused by: java.lang.reflect.InvocationTargetException\r\n    \tat java.lang.reflect.Constructor.newInstance0(Native Method)\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:343)\r\n    \tat androidx.test.ext.junit.runners.AndroidJUnit4.loadRunner(AndroidJUnit4.java:112)\r\n    \t... 18 more\r\n    Caused by: java.lang.NoClassDefFoundError: Failed resolution of: Landroidx/test/espresso/IdlingResource;\r\n    \tat java.lang.Class.getDeclaredFields(Native Method)\r\n    \tat org.junit.runners.model.TestClass.getSortedDeclaredFields(TestClass.java:77)\r\n    \tat org.junit.runners.model.TestClass.scanAnnotatedMembers(TestClass.java:70)\r\n    \tat org.junit.runners.model.TestClass.&lt;init&gt;(TestClass.java:57)\r\n    \tat org.junit.runners.ParentRunner.createTestClass(ParentRunner.java:88)\r\n    \tat org.junit.runners.ParentRunner.&lt;init&gt;(ParentRunner.java:83)\r\n    \tat org.junit.runners.BlockJUnit4ClassRunner.&lt;init&gt;(BlockJUnit4ClassRunner.java:65)\r\n    \tat androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner.&lt;init&gt;(AndroidJUnit4ClassRunner.java:43)\r\n    \tat androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner.&lt;init&gt;(AndroidJUnit4ClassRunner.java:48)\r\n    \t... 21 more\r\n    Caused by: java.lang.ClassNotFoundException: Didn&#39;t find class &quot;androidx.test.espresso.IdlingResource&quot; on path: DexPathList[[zip file &quot;/system/framework/android.test.runner.jar&quot;, zip file &quot;/system/framework/android.test.mock.jar&quot;, zip file &quot;/data/app/com.myco.myapp.test-MVOZuSB1ACpe3NJPPu-DeQ==/base.apk&quot;, zip file &quot;/data/app/com.myco.myapp-ecz6-CiigbD0vfPUbcjPpA==/base.apk&quot;],nativeLibraryDirectories=[/data/app/com.myco.myapp.test-MVOZuSB1ACpe3NJPPu-DeQ==/lib/arm, /data/app/com.myco.myapp-ecz6-CiigbD0vfPUbcjPpA==/lib/arm, /system/lib, /system/product/lib, /system/vendor/lib]]\r\n    \tat dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:134)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:379)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:312)\r\n    \t... 30 more\r\n\r\n\r\n","title":"NoClassDefFoundError for androidx.test.espresso.IdlingResource in release build only","body":"<p>I've been able to implement the IdlingResource in my espresso tests, but it fails to run on a release build.  Runs just fine on debug build or without IdlingResource, but I really need IdlingResource to manage the timing issues in espresso tests.  I'd much rather submit release builds to Firebase Test Lab as I've done in the past, but seem to have run into a wall with this.</p>\n<p>The log shows the faiure as:\nCaused by: java.lang.ClassNotFoundException: Didn't find class &quot;androidx.test.espresso.IdlingResource&quot;</p>\n<p>Anyone know how to remedy this problem?</p>\n<p>My dependencies are:</p>\n<pre><code>dependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation platform('com.google.firebase:firebase-bom:30.2.0')\n    implementation 'com.google.firebase:firebase-analytics' //:21.0.0'\n    implementation 'androidx.appcompat:appcompat:1.4.2'\n    implementation 'androidx.lifecycle:lifecycle-viewmodel:2.5.0'\n    implementation 'androidx.versionedparcelable:versionedparcelable:1.1.1'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    implementation 'androidx.multidex:multidex:2.0.1'\n    implementation 'com.google.android.material:material:1.6.1'\n    implementation 'androidx.navigation:navigation-fragment:2.5.0'\n    implementation 'androidx.navigation:navigation-ui:2.5.0'\n    implementation 'androidx.test.espresso:espresso-idling-resource:3.4.0'\n    implementation 'androidx.annotation:annotation:1.4.0'\n\n    androidTestImplementation 'androidx.test.espresso:espresso-contrib:3.4.0'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'\n    androidTestImplementation 'androidx.test:runner:1.4.0'\n    androidTestImplementation 'androidx.test:rules:1.4.0'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.3'\n    androidTestImplementation 'androidx.test:core:1.4.0'\n    androidTestImplementation 'org.hamcrest:hamcrest-integration:1.3'\n    androidTestImplementation 'com.google.firebase:testlab-instr-lib:0.2'\n\n    coreLibraryDesugaring 'com.android.tools:desugar_jdk_libs:1.2.0'\n    testImplementation 'junit:junit:4.13.2'\n}\n</code></pre>\n<p>The error displayed in the run log is:</p>\n<pre><code>java.lang.RuntimeException: Failed to instantiate test runner class androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner\n\nat androidx.test.ext.junit.runners.AndroidJUnit4.throwInitializationError(AndroidJUnit4.java:129)\nat androidx.test.ext.junit.runners.AndroidJUnit4.loadRunner(AndroidJUnit4.java:121)\nat androidx.test.ext.junit.runners.AndroidJUnit4.loadRunner(AndroidJUnit4.java:82)\nat androidx.test.ext.junit.runners.AndroidJUnit4.&lt;init&gt;(AndroidJUnit4.java:56)\n... 15 trimmed\nCaused by: java.lang.reflect.InvocationTargetException\nat java.lang.reflect.Constructor.newInstance(Native Method)\nat java.lang.reflect.Constructor.newInstance(Constructor.java:288)\nat androidx.test.ext.junit.runners.AndroidJUnit4.loadRunner(AndroidJUnit4.java:112)\n... 18 more\nCaused by: java.lang.NoClassDefFoundError: androidx.test.espresso.IdlingResource\nat libcore.reflect.InternalNames.getClass(InternalNames.java:55)\nat java.lang.Class.getDexCacheType(Class.java:479)\nat java.lang.reflect.ArtMethod.getDexCacheType(ArtMethod.java:229)\nat java.lang.reflect.ArtMethod.getReturnType(ArtMethod.java:178)\nat java.lang.reflect.Method.getReturnType(Method.java:184)\nat java.lang.Class.getDeclaredMethods(Class.java:771)\nat org.junit.internal.MethodSorter.getDeclaredMethods(MethodSorter.java:54)\nat org.junit.runners.model.TestClass.scanAnnotatedMembers(TestClass.java:65)\nat org.junit.runners.model.TestClass.&lt;init&gt;(TestClass.java:57)\nat org.junit.runners.ParentRunner.createTestClass(ParentRunner.java:88)\nat org.junit.runners.ParentRunner.&lt;init&gt;(ParentRunner.java:83)\nat org.junit.runners.BlockJUnit4ClassRunner.&lt;init&gt;(BlockJUnit4ClassRunner.java:65)\nat androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner.&lt;init&gt;(AndroidJUnit4ClassRunner.java:43)\nat androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner.&lt;init&gt;(AndroidJUnit4ClassRunner.java:48)\n... 21 more\nCaused by: java.lang.ClassNotFoundException: Didn't find class &quot;androidx.test.espresso.IdlingResource&quot; on path: DexPathList[[zip file &quot;/system/framework/android.test.runner.jar&quot;, zip file &quot;/data/app/com.myco.myapp.test-2/base.apk&quot;, zip file &quot;/data/app/com.myco.myapp-2/base.apk&quot;],nativeLibraryDirectories=[/vendor/lib, /system/lib]]\nat dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:56)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:511)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:469)\nat libcore.reflect.InternalNames.getClass(InternalNames.java:53)\n... 34 more\nSuppressed: java.lang.ClassNotFoundException: androidx.test.espresso.IdlingResource\nat java.lang.Class.classForName(Native Method)\nat java.lang.BootClassLoader.findClass(ClassLoader.java:781)\nat java.lang.BootClassLoader.loadClass(ClassLoader.java:841)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:504)\n... 36 more\nCaused by: java.lang.NoClassDefFoundError: Class not found using the boot class loader; no stack available\n</code></pre>\n<p>After limiting the androidTest to just a single module and limited functionality, here's the source and the result that's still failing:</p>\n<pre><code>package myco.myapp\n\nimport android.Manifest;\nimport android.app.Activity;\nimport android.content.Context;\nimport android.content.ContextWrapper;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.view.ViewParent;\n\nimport org.hamcrest.Description;\nimport org.hamcrest.Matcher;\nimport org.hamcrest.TypeSafeMatcher;\nimport org.junit.After;\nimport org.junit.Before;\nimport org.junit.Rule;\nimport org.junit.Test;\nimport org.junit.rules.RuleChain;\nimport org.junit.rules.TestRule;\nimport org.junit.runner.RunWith;\n\nimport androidx.test.core.app.ActivityScenario;\nimport androidx.test.espresso.UiController;\nimport androidx.test.espresso.ViewAction;\nimport androidx.test.espresso.ViewInteraction;\nimport androidx.test.espresso.matcher.ViewMatchers;\nimport androidx.test.filters.MediumTest;\nimport androidx.test.rule.GrantPermissionRule;\n//import androidx.test.runner.AndroidJUnit4;\nimport androidx.test.ext.junit.runners.AndroidJUnit4;\n\nimport static androidx.test.espresso.Espresso.onView;\nimport static androidx.test.espresso.action.ViewActions.click;\nimport static androidx.test.espresso.matcher.ViewMatchers.isDisplayed;\nimport static androidx.test.espresso.matcher.ViewMatchers.isRoot;\nimport static androidx.test.espresso.matcher.ViewMatchers.withClassName;\nimport static androidx.test.espresso.matcher.ViewMatchers.withId;\nimport static org.hamcrest.Matchers.allOf;\nimport static org.hamcrest.Matchers.is;\n\nimport androidx.test.ext.junit.rules.ActivityScenarioRule;\nimport androidx.test.espresso.IdlingRegistry;\nimport androidx.test.espresso.IdlingResource;\n\n\n@MediumTest\n@RunWith(AndroidJUnit4.class)\n//@RunWith(AndroidJUnit4ClassRunner.class)\npublic class FullTest\n{\n    protected IdlingResource mIdlingResource;\n\n\n    //    @Rule public\n    private final GrantPermissionRule mGrantPermissionRule = GrantPermissionRule.grant(\n            Manifest.permission.READ_EXTERNAL_STORAGE,\n            Manifest.permission.WRITE_EXTERNAL_STORAGE\n    );\n\n    @Before\n    public void registerIdlingResource() {\n        ActivityScenario activityScenario = ActivityScenario.launch(MainActivity.class);\n        activityScenario.onActivity(new ActivityScenario.ActivityAction&lt;MainActivity&gt;() {\n            @Override\n            public void perform(MainActivity activity) {\n                mIdlingResource = activity.getIdlingResource();\n                // To prove that the test fails, omit this call:\n                IdlingRegistry.getInstance().register(mIdlingResource);\n            }\n        });\n    }\n\n    @After\n    public void unregisterIdlingResource() {\n        new ScreenshotWatcher().quickCapture(&quot;EndFullTest&quot;);\n        if (mIdlingResource != null) {\n            IdlingRegistry.getInstance().unregister(mIdlingResource);\n        }\n    }\n\n    @Test\n    public void fullTest()\n    {\n        ViewInteraction relativeLayout = onView(\n                allOf(withId(R.id.menuButton),\n                        childAtPosition(\n                                childAtPosition(\n                                        withClassName(is(&quot;com.android.internal.widget.ActionBarView&quot;)),\n                                        1),\n                                1),\n                        isDisplayed()));\n        relativeLayout.perform(click());\n\n        onView(isRoot()).perform(waitFor(1000));\n\n        ViewInteraction relativeLayout2 = onView(\n                allOf(withId(R.id.menuButton),\n                        childAtPosition(\n                                childAtPosition(\n                                        withClassName(is(&quot;com.android.internal.widget.ActionBarView&quot;)),\n                                        1),\n                                0),\n                        isDisplayed()));\n        relativeLayout2.perform(click());\n    }\n\n    public static Activity getActivity(Context context)\n    {\n        while (context instanceof ContextWrapper)\n        {\n            if (context instanceof Activity)\n            {\n                return (Activity) context;\n            }\n            context = ((ContextWrapper) context).getBaseContext();\n        }\n        return null;\n    }\n\n    // only included to debug release build issue with IdlingResource\n    private static Matcher&lt;View&gt; childAtPosition(\n            final Matcher&lt;View&gt; parentMatcher, final int position)\n    {\n\n        return new TypeSafeMatcher&lt;View&gt;()\n        {\n            @Override\n            public void describeTo(Description description)\n            {\n                description.appendText(&quot;Child at position &quot; + position + &quot; in parent &quot;);\n                parentMatcher.describeTo(description);\n            }\n\n            @Override\n            public boolean matchesSafely(View view)\n            {\n                ViewParent parent = view.getParent();\n                return parent instanceof ViewGroup &amp;&amp; parentMatcher.matches(parent)\n                        &amp;&amp; view.equals(((ViewGroup) parent).getChildAt(position));\n            }\n        };\n    }\n\n    private static ViewAction waitFor(long delay) {\n        return new ViewAction() {\n            @Override public Matcher&lt;View&gt; getConstraints() {\n                return ViewMatchers.isRoot();\n            }\n\n            @Override public String getDescription() {\n                return &quot;wait for &quot; + delay + &quot;milliseconds&quot;;\n            }\n\n            @Override public void perform(UiController uiController, View view) {\n                uiController.loopMainThreadForAtLeast(delay);\n            }\n        };\n    }\n}\n</code></pre>\n<p>And the resulting log:</p>\n<pre><code>java.lang.RuntimeException: Failed to instantiate test runner class androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner\n\n\n    at androidx.test.ext.junit.runners.AndroidJUnit4.throwInitializationError(AndroidJUnit4.java:129)\n    at androidx.test.ext.junit.runners.AndroidJUnit4.loadRunner(AndroidJUnit4.java:121)\n    at androidx.test.ext.junit.runners.AndroidJUnit4.loadRunner(AndroidJUnit4.java:82)\n    at androidx.test.ext.junit.runners.AndroidJUnit4.&lt;init&gt;(AndroidJUnit4.java:56)\n    ... 15 trimmed\nCaused by: java.lang.reflect.InvocationTargetException\n    at java.lang.reflect.Constructor.newInstance0(Native Method)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:343)\n    at androidx.test.ext.junit.runners.AndroidJUnit4.loadRunner(AndroidJUnit4.java:112)\n    ... 18 more\nCaused by: java.lang.NoClassDefFoundError: Failed resolution of: Landroidx/test/espresso/IdlingResource;\n    at java.lang.Class.getDeclaredFields(Native Method)\n    at org.junit.runners.model.TestClass.getSortedDeclaredFields(TestClass.java:77)\n    at org.junit.runners.model.TestClass.scanAnnotatedMembers(TestClass.java:70)\n    at org.junit.runners.model.TestClass.&lt;init&gt;(TestClass.java:57)\n    at org.junit.runners.ParentRunner.createTestClass(ParentRunner.java:88)\n    at org.junit.runners.ParentRunner.&lt;init&gt;(ParentRunner.java:83)\n    at org.junit.runners.BlockJUnit4ClassRunner.&lt;init&gt;(BlockJUnit4ClassRunner.java:65)\n    at androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner.&lt;init&gt;(AndroidJUnit4ClassRunner.java:43)\n    at androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner.&lt;init&gt;(AndroidJUnit4ClassRunner.java:48)\n    ... 21 more\nCaused by: java.lang.ClassNotFoundException: Didn't find class &quot;androidx.test.espresso.IdlingResource&quot; on path: DexPathList[[zip file &quot;/system/framework/android.test.runner.jar&quot;, zip file &quot;/system/framework/android.test.mock.jar&quot;, zip file &quot;/data/app/com.myco.myapp.test-MVOZuSB1ACpe3NJPPu-DeQ==/base.apk&quot;, zip file &quot;/data/app/com.myco.myapp-ecz6-CiigbD0vfPUbcjPpA==/base.apk&quot;],nativeLibraryDirectories=[/data/app/com.myco.myapp.test-MVOZuSB1ACpe3NJPPu-DeQ==/lib/arm, /data/app/com.myco.myapp-ecz6-CiigbD0vfPUbcjPpA==/lib/arm, /system/lib, /system/product/lib, /system/vendor/lib]]\n    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:134)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:379)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\n    ... 30 more\n</code></pre>\n"},{"tags":["java","nullpointerexception","null"],"comments":[{"owner":{"display_name":"user1743310"},"score":1,"creation_date":1376560077,"post_id":2950319,"comment_id":26760675,"body_markdown":"It&#39;s also &#39;important&#39; or at least very useful as a &#39;best-practise&#39; starting(or very early) line for for any Compare or Equals or similar method that is designed to only succeed on non-null objects of the same type, and guards you against the &#39;silly cases&#39; in a single line. less code = less bugs.","body":"It&#39;s also &#39;important&#39; or at least very useful as a &#39;best-practise&#39; starting(or very early) line for for any Compare or Equals or similar method that is designed to only succeed on non-null objects of the same type, and guards you against the &#39;silly cases&#39; in a single line. less code = less bugs."},{"owner":{"account_id":1499063,"reputation":15234,"user_id":1404311,"accept_rate":93,"display_name":"Scott Mermelstein"},"score":20,"creation_date":1377617473,"post_id":2950319,"comment_id":27146137,"body_markdown":"To weigh in on the &quot;is this useful?&quot; debate - I&#39;ve never written my own Java code (so don&#39;t easily know where the specs are, and compiling a test would be very non-trivial), but I&#39;m currently manually converting Java to JavaScript.  My code was failing on a null reference, and googling this let me see the accepted answer, which confirmed that it was expected behavior and that I was missing an implicit null check.  Very useful, in my case.","body":"To weigh in on the &quot;is this useful?&quot; debate - I&#39;ve never written my own Java code (so don&#39;t easily know where the specs are, and compiling a test would be very non-trivial), but I&#39;m currently manually converting Java to JavaScript.  My code was failing on a null reference, and googling this let me see the accepted answer, which confirmed that it was expected behavior and that I was missing an implicit null check.  Very useful, in my case."},{"owner":{"account_id":234754,"reputation":5730,"user_id":501113,"accept_rate":90,"display_name":"chaotic3quilibrium"},"score":0,"creation_date":1675968087,"post_id":2950319,"comment_id":133047074,"body_markdown":"I have leveraged the fact that `instanceof` checks for `null` to implement a very tight Java `equals()` implementation that reads way cleaner than those I see auto-generated by Eclipse and IntelliJ: https://stackoverflow.com/a/75402885/501113","body":"I have leveraged the fact that <code>instanceof</code> checks for <code>null</code> to implement a very tight Java <code>equals()</code> implementation that reads way cleaner than those I see auto-generated by Eclipse and IntelliJ: <a href=\"https://stackoverflow.com/a/75402885/501113\">stackoverflow.com/a/75402885/501113</a>"}],"answers":[{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":58,"up_vote_count":377,"is_accepted":false,"score":319,"last_activity_date":1520441793,"creation_date":1275400425,"answer_id":2950322,"question_id":2950319,"body_markdown":"Using a null reference as the first operand to `instanceof` returns `false`.","title":"Is null check needed before calling instanceof?","body":"<p>Using a null reference as the first operand to <code>instanceof</code> returns <code>false</code>.</p>\n"},{"tags":[],"owner":{"account_id":130400,"reputation":52061,"user_id":329637,"accept_rate":75,"display_name":"RoflcoptrException"},"down_vote_count":1,"up_vote_count":29,"is_accepted":false,"score":28,"last_activity_date":1479725350,"creation_date":1275400437,"answer_id":2950324,"question_id":2950319,"body_markdown":"No, it&#39;s not. `instanceof` would return `false` if its first operand is `null`.","title":"Is null check needed before calling instanceof?","body":"<p>No, it's not. <code>instanceof</code> would return <code>false</code> if its first operand is <code>null</code>.</p>\n"},{"tags":[],"owner":{"account_id":69443,"reputation":85343,"user_id":202009,"accept_rate":79,"display_name":"Andy Thomas"},"down_vote_count":0,"up_vote_count":2175,"is_accepted":true,"score":2175,"last_activity_date":1633551913,"creation_date":1275401148,"answer_id":2950415,"question_id":2950319,"body_markdown":"No, a null check is not needed before using instanceof. \r\n\r\nThe expression `x instanceof SomeClass` is `false` if `x` is `null`.\r\n\r\nThe Java 11 Language Specification expresses this concisely in [section 15.20.2, &quot;Type comparison operator instanceof&quot;][1]. ([Java 17 expresses this less concisely][2], after the introduction of instanceof patternmatching.)\r\n\r\n&gt; &quot;At run time, the result of the\r\n&gt; `instanceof` operator is `true` if the\r\n&gt; value of the *RelationalExpression* **is\r\n&gt; not `null`** and the reference could be\r\n&gt; cast to the *ReferenceType*\r\n&gt; without raising a `ClassCastException`.\r\n&gt; Otherwise the result is `false`.&quot;\r\n\r\nSo if the operand is null, the result is false.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se11/html/jls-15.html#jls-15.20.2\r\n  [2]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.20.2","title":"Is null check needed before calling instanceof?","body":"<p>No, a null check is not needed before using instanceof.</p>\n<p>The expression <code>x instanceof SomeClass</code> is <code>false</code> if <code>x</code> is <code>null</code>.</p>\n<p>The Java 11 Language Specification expresses this concisely in <a href=\"https://docs.oracle.com/javase/specs/jls/se11/html/jls-15.html#jls-15.20.2\" rel=\"noreferrer\">section 15.20.2, &quot;Type comparison operator instanceof&quot;</a>. (<a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.20.2\" rel=\"noreferrer\">Java 17 expresses this less concisely</a>, after the introduction of instanceof patternmatching.)</p>\n<blockquote>\n<p>&quot;At run time, the result of the\n<code>instanceof</code> operator is <code>true</code> if the\nvalue of the <em>RelationalExpression</em> <strong>is\nnot <code>null</code></strong> and the reference could be\ncast to the <em>ReferenceType</em>\nwithout raising a <code>ClassCastException</code>.\nOtherwise the result is <code>false</code>.&quot;</p>\n</blockquote>\n<p>So if the operand is null, the result is false.</p>\n"},{"tags":[],"owner":{"account_id":130873,"reputation":20683,"user_id":330457,"accept_rate":82,"display_name":"Jin Kwon"},"down_vote_count":0,"up_vote_count":85,"is_accepted":false,"score":85,"last_activity_date":1474514822,"creation_date":1375098933,"answer_id":17923355,"question_id":2950319,"body_markdown":"Very good question indeed. I just tried for myself.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    public class IsInstanceOfTest {\r\n    \r\n        public static void main(final String[] args) {\r\n    \r\n            String s;\r\n\r\n            s = &quot;&quot;;\r\n    \r\n            System.out.println((s instanceof String));\r\n            System.out.println(String.class.isInstance(s));\r\n    \r\n            s = null;\r\n    \r\n            System.out.println((s instanceof String));\r\n            System.out.println(String.class.isInstance(s));\r\n        }\r\n    }\r\n\r\nPrints\r\n\r\n    true\r\n    true\r\n    false\r\n    false\r\n\r\n\r\n**[JLS / 15.20.2. Type Comparison Operator instanceof](http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.20.2)**\r\n\r\n&gt; At run time, the result of the `instanceof` operator is `true` if the value of the *RelationalExpression* is not `null` and the reference could be cast to the *ReferenceType* without raising a `ClassCastException`. Otherwise the result is `false`.\r\n\r\n**[API / Class#isInstance(Object)](http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#isInstance-java.lang.Object-)**\r\n\r\n&gt; If this `Class` object represents an interface, this method returns `true` if the class or any superclass of the specified `Object` argument implements this interface; it returns `false` otherwise. If this `Class` object represents a primitive type, this method returns `false`.\r\n\r\n","title":"Is null check needed before calling instanceof?","body":"<p>Very good question indeed. I just tried for myself.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class IsInstanceOfTest {\n\n    public static void main(final String[] args) {\n\n        String s;\n\n        s = \"\";\n\n        System.out.println((s instanceof String));\n        System.out.println(String.class.isInstance(s));\n\n        s = null;\n\n        System.out.println((s instanceof String));\n        System.out.println(String.class.isInstance(s));\n    }\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>true\ntrue\nfalse\nfalse\n</code></pre>\n\n<p><strong><a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.20.2\" rel=\"noreferrer\">JLS / 15.20.2. Type Comparison Operator instanceof</a></strong></p>\n\n<blockquote>\n  <p>At run time, the result of the <code>instanceof</code> operator is <code>true</code> if the value of the <em>RelationalExpression</em> is not <code>null</code> and the reference could be cast to the <em>ReferenceType</em> without raising a <code>ClassCastException</code>. Otherwise the result is <code>false</code>.</p>\n</blockquote>\n\n<p><strong><a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#isInstance-java.lang.Object-\" rel=\"noreferrer\">API / Class#isInstance(Object)</a></strong></p>\n\n<blockquote>\n  <p>If this <code>Class</code> object represents an interface, this method returns <code>true</code> if the class or any superclass of the specified <code>Object</code> argument implements this interface; it returns <code>false</code> otherwise. If this <code>Class</code> object represents a primitive type, this method returns <code>false</code>.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":3390327,"reputation":2668,"user_id":2845282,"accept_rate":68,"display_name":"Nikhil Kumar"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1479721547,"creation_date":1427875744,"answer_id":29385822,"question_id":2950319,"body_markdown":"The `instanceof` operator does not need explicit `null` checks, as it does not throw a `NullPointerException` if the operand is `null`.\r\n\r\nAt run time, the result of the `instanceof` operator is true if the value of the relational expression is not `null` and the reference could be cast to the reference type without raising a class cast exception.\r\n\r\nIf the operand is `null`, the `instanceof` operator returns `false` and hence, explicit null checks are not required.\r\n\r\nConsider the below example,\r\n\r\n\t\r\n\r\n    public static void main(String[] args) {\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;\t&#160;if(lista != null &amp;&amp; lista&#160;instanceof ArrayList) {&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;//Violation\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\tSystem.out.println(&quot;In if block&quot;);\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;\t&#160;}\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;\t&#160;else {\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\t\tSystem.out.println(&quot;In else block&quot;);\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }\r\n    }\r\n\r\nThe correct usage of `instanceof` is as shown below,\r\n\r\n\t\r\n\r\n    public static void main(String[] args) {\r\n    &#160;&#160;&#160;&#160;&#160;&#160;\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;\t&#160;if(lista&#160;instanceof ArrayList){&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;//Correct way\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\t\t&#160;&#160;System.out.println(&quot;In if block&quot;);\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;\t&#160;}\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\telse&#160;{\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\t\t&#160;System.out.println(&quot;In else block&quot;);\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;\t&#160;}  \r\n    }\r\n","title":"Is null check needed before calling instanceof?","body":"<p>The <code>instanceof</code> operator does not need explicit <code>null</code> checks, as it does not throw a <code>NullPointerException</code> if the operand is <code>null</code>.</p>\n\n<p>At run time, the result of the <code>instanceof</code> operator is true if the value of the relational expression is not <code>null</code> and the reference could be cast to the reference type without raising a class cast exception.</p>\n\n<p>If the operand is <code>null</code>, the <code>instanceof</code> operator returns <code>false</code> and hence, explicit null checks are not required.</p>\n\n<p>Consider the below example,</p>\n\n<pre><code>public static void main(String[] args) {\n if(lista != null &amp;&amp; listainstanceof ArrayList) {//Violation\n    System.out.println(\"In if block\");\n }\n else {\n     System.out.println(\"In else block\");\n }\n}\n</code></pre>\n\n<p>The correct usage of <code>instanceof</code> is as shown below,</p>\n\n<pre><code>public static void main(String[] args) {\n\n if(listainstanceof ArrayList){//Correct way\n      System.out.println(\"In if block\");\n }\n    else{\n     System.out.println(\"In else block\");\n }  \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3809473,"reputation":4914,"user_id":3160869,"accept_rate":83,"display_name":"Attila Tanyi"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1537513815,"creation_date":1521720694,"answer_id":49428401,"question_id":2950319,"body_markdown":"Just as a **tidbit**:\r\n\r\nEven `(`**`((A)null)`**` instanceof A)` will return `false`.\r\n\r\n---\r\n\r\n(If typecasting `null` seems surprising, sometimes you have to do it, for example in situations like this:\r\n\r\n    public class Test\r\n    {\r\n      public static void test(A a)\r\n      {\r\n        System.out.println(&quot;a instanceof A: &quot; + (a instanceof A));\r\n      }\r\n      \r\n      public static void test(B b) {\r\n        // Overloaded version. Would cause reference ambiguity (compile error)\r\n        // if Test.test(null) was called without casting.\r\n        // So you need to call Test.test((A)null) or Test.test((B)null).\r\n      }\r\n    }\r\n\r\nSo `Test.test((A)null)` will print `a instanceof A: false`.)\r\n\r\n---\r\n\r\nP.S.: If you are hiring, please don&#39;t use this as a job interview question. :D","title":"Is null check needed before calling instanceof?","body":"<p>Just as a <strong>tidbit</strong>:</p>\n\n<p>Even <code>(</code><strong><code>((A)null)</code></strong><code>instanceof A)</code> will return <code>false</code>.</p>\n\n<hr>\n\n<p>(If typecasting <code>null</code> seems surprising, sometimes you have to do it, for example in situations like this:</p>\n\n<pre><code>public class Test\n{\n  public static void test(A a)\n  {\n    System.out.println(\"a instanceof A: \" + (a instanceof A));\n  }\n\n  public static void test(B b) {\n    // Overloaded version. Would cause reference ambiguity (compile error)\n    // if Test.test(null) was called without casting.\n    // So you need to call Test.test((A)null) or Test.test((B)null).\n  }\n}\n</code></pre>\n\n<p>So <code>Test.test((A)null)</code> will print <code>a instanceof A: false</code>.)</p>\n\n<hr>\n\n<p>P.S.: If you are hiring, please don't use this as a job interview question. :D</p>\n"},{"tags":[],"owner":{"account_id":1693760,"reputation":9824,"user_id":1555615,"accept_rate":62,"display_name":"Marinos An"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1617811830,"creation_date":1617811067,"answer_id":66989752,"question_id":2950319,"body_markdown":"- null check is not needed **before instanceof**\r\n- null check is not needed **after instanceof that validates to true**\r\n\r\nThe following are null-safe:\r\n\r\n```java\r\nif(couldbenull instanceof Comparable comp){\r\n   return comp.compareTo(somethingElse);\r\n}\r\n```\r\n\r\n```java\r\n//java &lt; 14\r\nif(couldbenull instanceof Comparable){\r\n   return ((Comparable)couldbenull).compareTo(somethingElse);\r\n}\r\n```","title":"Is null check needed before calling instanceof?","body":"<ul>\n<li>null check is not needed <strong>before instanceof</strong></li>\n<li>null check is not needed <strong>after instanceof that validates to true</strong></li>\n</ul>\n<p>The following are null-safe:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if(couldbenull instanceof Comparable comp){\n   return comp.compareTo(somethingElse);\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>//java &lt; 14\nif(couldbenull instanceof Comparable){\n   return ((Comparable)couldbenull).compareTo(somethingElse);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22066749,"reputation":3758,"user_id":16328516,"display_name":"TriS"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1643186508,"creation_date":1643186508,"answer_id":70860618,"question_id":2950319,"body_markdown":"No, a `null` check is not needed before calling `instanceof`. It always returns false if its value is `null`.\r\n\r\nAs per [Java Language Specification][1] for comparison using `instanceof`.\r\n\r\n&gt; At run time, the result of the instanceof operator is true if the\r\n&gt; value of the RelationalExpression is not null and the reference could\r\n&gt; be cast to the ReferenceType without raising a ClassCastException.\r\n&gt; Otherwise the result is false\r\n\r\nHence we can infer that java has something called `null` type also, and this null type is checked in `instanceof` operator which obviously returns false because it is expecting a specific type.\r\n\r\nThere are two kinds of types in the Java programming language: primitive types and reference types.\r\nAs per [Java Specification][2] on types and value\r\n\r\n&gt; There is also a special null type, the type of the expression null,\r\n&gt; which has no name. Because the null type has no name, it is impossible\r\n&gt; to declare a variable of the null type or to cast to the null type.\r\n&gt; The null reference is the only possible value of an expression of null\r\n&gt; type. The null reference can always undergo a widening reference\r\n&gt; conversion to any reference type.\r\n\r\nFrom Java 14 onwards and esp. in LTS Java 17 we have an enhanced `instanceof`. We have pattern matching feature which performs casts after type comparisons.\r\n\r\nExample\r\n\r\n    public static void main(String[] args) {\r\n        Object testObject = &quot;I am a string&quot;;\r\n        List&lt;Object&gt; testList = null;\r\n        if (testList instanceof List) {\r\n            System.out.println(&quot;instance of list&quot;);\r\n        } else {\r\n            System.out.println(&quot;null type&quot;);\r\n        }\r\n        //Enhanced instanceof with type conversion - tested with JDK 17\r\n        if (testObject instanceof String str) {\r\n            System.out.println(str.toUpperCase());\r\n        }\r\n    }\r\nOutput\r\n\r\n    null type\r\n    I AM A STRING\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.20.2\r\n  [2]: https://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.1\r\n\r\n","title":"Is null check needed before calling instanceof?","body":"<p>No, a <code>null</code> check is not needed before calling <code>instanceof</code>. It always returns false if its value is <code>null</code>.</p>\n<p>As per <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.20.2\" rel=\"noreferrer\">Java Language Specification</a> for comparison using <code>instanceof</code>.</p>\n<blockquote>\n<p>At run time, the result of the instanceof operator is true if the\nvalue of the RelationalExpression is not null and the reference could\nbe cast to the ReferenceType without raising a ClassCastException.\nOtherwise the result is false</p>\n</blockquote>\n<p>Hence we can infer that java has something called <code>null</code> type also, and this null type is checked in <code>instanceof</code> operator which obviously returns false because it is expecting a specific type.</p>\n<p>There are two kinds of types in the Java programming language: primitive types and reference types.\nAs per <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.1\" rel=\"noreferrer\">Java Specification</a> on types and value</p>\n<blockquote>\n<p>There is also a special null type, the type of the expression null,\nwhich has no name. Because the null type has no name, it is impossible\nto declare a variable of the null type or to cast to the null type.\nThe null reference is the only possible value of an expression of null\ntype. The null reference can always undergo a widening reference\nconversion to any reference type.</p>\n</blockquote>\n<p>From Java 14 onwards and esp. in LTS Java 17 we have an enhanced <code>instanceof</code>. We have pattern matching feature which performs casts after type comparisons.</p>\n<p>Example</p>\n<pre><code>public static void main(String[] args) {\n    Object testObject = &quot;I am a string&quot;;\n    List&lt;Object&gt; testList = null;\n    if (testList instanceof List) {\n        System.out.println(&quot;instance of list&quot;);\n    } else {\n        System.out.println(&quot;null type&quot;);\n    }\n    //Enhanced instanceof with type conversion - tested with JDK 17\n    if (testObject instanceof String str) {\n        System.out.println(str.toUpperCase());\n    }\n}\n</code></pre>\n<p>Output</p>\n<pre><code>null type\nI AM A STRING\n</code></pre>\n"}],"owner":{"account_id":2975,"reputation":19834,"user_id":4220,"accept_rate":100,"display_name":"Johan L&#252;bcke"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":341583,"favorite_count":0,"down_vote_count":36,"up_vote_count":1640,"accepted_answer_id":2950415,"answer_count":8,"score":1604,"last_activity_date":1659566050,"creation_date":1275400395,"question_id":2950319,"body_markdown":"Will `null instanceof SomeClass` return `false` or throw a `NullPointerException`?","title":"Is null check needed before calling instanceof?","body":"<p>Will <code>null instanceof SomeClass</code> return <code>false</code> or throw a <code>NullPointerException</code>?</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":1,"creation_date":1659569353,"post_id":73227992,"comment_id":129328334,"body_markdown":"Does this answer your question? [What is a NullPointerException, and how do I fix it?](https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it\">What is a NullPointerException, and how do I fix it?</a>"}],"answers":[{"tags":[],"owner":{"account_id":25228009,"reputation":171,"user_id":19545008,"display_name":"PasWei"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1659563677,"creation_date":1659563677,"answer_id":73228219,"question_id":73227992,"body_markdown":"You need to get the SMS button in the InventoryScreen onCreate method the same way you did with the other buttons in MainActivity.\r\n\r\nThis means doing a \r\n\r\n    buttonSMS = (Button) findViewById(R.id.buttonSMS);\r\n**before** setting up an onClickListener.","title":"Android Studio Emulator Crashing On Button Click","body":"<p>You need to get the SMS button in the InventoryScreen onCreate method the same way you did with the other buttons in MainActivity.</p>\n<p>This means doing a</p>\n<pre><code>buttonSMS = (Button) findViewById(R.id.buttonSMS);\n</code></pre>\n<p><strong>before</strong> setting up an onClickListener.</p>\n"}],"owner":{"account_id":23548178,"reputation":25,"user_id":17591292,"display_name":"Britteny"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":360,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":73228219,"answer_count":1,"score":-1,"last_activity_date":1659563677,"creation_date":1659562025,"question_id":73227992,"body_markdown":"I am very new to Android Studio and am trying to create a log in screen which then opens an  inventory screen. The problem I am having is when I click Submit to the username and password, the app completely crashes. Right now, I am just working out how to organize the layout portion of things, but need to figure out how to get this transition to work. Any help would be great!\r\n\r\nThis is the main activity code:\r\n```\r\npackage com.example.cs360projectone;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    EditText username, password;\r\n    Button buttonLogIn, buttonRegister;;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        username = (EditText) findViewById(R.id.username);\r\n        password = (EditText) findViewById(R.id.newPassword);\r\n        buttonLogIn = (Button) findViewById(R.id.buttonLogIn);\r\n        buttonRegister = (Button) findViewById(R.id.buttonRegister);\r\n\r\n        buttonLogIn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                if(username.getText().toString().trim().length() &lt;1 || password.getText().toString().trim().length() &lt;1){\r\n                    username.setError(&quot;You must enter a valid username and password&quot;);\r\n                }\r\n                else {\r\n                    openInventory();\r\n                }\r\n            }\r\n        });\r\n\r\n        buttonRegister.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view1) {\r\n\r\n                openRegisterScreen();\r\n            }\r\n        });\r\n    }\r\n    public void openRegisterScreen() {\r\n        Intent intent = new Intent(this, RegisterScreen.class);\r\n        startActivity(intent);\r\n    }\r\n    public void openInventory() {\r\n        Intent intent = new Intent(this, InventoryScreen.class);\r\n        startActivity(intent);\r\n    }\r\n}\r\n```\r\nThis is the inventory screen code:\r\n```\r\npackage com.example.cs360projectone;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\n\r\npublic class InventoryScreen extends AppCompatActivity {\r\n    Button buttonSMS, buttonSignOut;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_inventory_screen);\r\n\r\n        buttonSMS.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view1) {\r\n\r\n                openSMSPermission();\r\n            }\r\n        });\r\n    }\r\n    public void openSMSPermission() {\r\n        Intent intent = new Intent(this, SMSPermissionScreen.class);\r\n        startActivity(intent);\r\n    }\r\n}\r\n```\r\n\r\nThis is the error from logcat when the button is pressed:\r\n```\r\n2022-08-03 16:54:09.037 8043-8043/com.example.cs360projectone E/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: com.example.cs360projectone, PID: 8043\r\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.cs360projectone/com.example.cs360projectone.InventoryScreen}: java.lang.NullPointerException: Attempt to invoke virtual method &#39;void android.widget.Button.setOnClickListener(android.view.View$OnClickListener)&#39; on a null object reference\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2913)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3048)\r\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:78)\r\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)\r\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1808)\r\n        at android.os.Handler.dispatchMessage(Handler.java:106)\r\n        at android.os.Looper.loop(Looper.java:193)\r\n        at android.app.ActivityThread.main(ActivityThread.java:6669)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\r\n     Caused by: java.lang.NullPointerException: Attempt to invoke virtual method &#39;void android.widget.Button.setOnClickListener(android.view.View$OnClickListener)&#39; on a null object reference\r\n        at com.example.cs360projectone.InventoryScreen.onCreate(InventoryScreen.java:18)\r\n        at android.app.Activity.performCreate(Activity.java:7136)\r\n        at android.app.Activity.performCreate(Activity.java:7127)\r\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1271)\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2893)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3048)&#160;\r\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:78)&#160;\r\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)&#160;\r\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)&#160;\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1808)&#160;\r\n        at android.os.Handler.dispatchMessage(Handler.java:106)&#160;\r\n        at android.os.Looper.loop(Looper.java:193)&#160;\r\n        at android.app.ActivityThread.main(ActivityThread.java:6669)&#160;\r\n        at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)&#160;\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)&#160;\r\n2022-08-03 16:54:09.062 8043-8043/com.example.cs360projectone I/Process: Sending signal. PID: 8043 SIG: 9\r\n\r\n```","title":"Android Studio Emulator Crashing On Button Click","body":"<p>I am very new to Android Studio and am trying to create a log in screen which then opens an  inventory screen. The problem I am having is when I click Submit to the username and password, the app completely crashes. Right now, I am just working out how to organize the layout portion of things, but need to figure out how to get this transition to work. Any help would be great!</p>\n<p>This is the main activity code:</p>\n<pre><code>package com.example.cs360projectone;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.EditText;\n\npublic class MainActivity extends AppCompatActivity {\n    EditText username, password;\n    Button buttonLogIn, buttonRegister;;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        username = (EditText) findViewById(R.id.username);\n        password = (EditText) findViewById(R.id.newPassword);\n        buttonLogIn = (Button) findViewById(R.id.buttonLogIn);\n        buttonRegister = (Button) findViewById(R.id.buttonRegister);\n\n        buttonLogIn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                if(username.getText().toString().trim().length() &lt;1 || password.getText().toString().trim().length() &lt;1){\n                    username.setError(&quot;You must enter a valid username and password&quot;);\n                }\n                else {\n                    openInventory();\n                }\n            }\n        });\n\n        buttonRegister.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view1) {\n\n                openRegisterScreen();\n            }\n        });\n    }\n    public void openRegisterScreen() {\n        Intent intent = new Intent(this, RegisterScreen.class);\n        startActivity(intent);\n    }\n    public void openInventory() {\n        Intent intent = new Intent(this, InventoryScreen.class);\n        startActivity(intent);\n    }\n}\n</code></pre>\n<p>This is the inventory screen code:</p>\n<pre><code>package com.example.cs360projectone;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\n\npublic class InventoryScreen extends AppCompatActivity {\n    Button buttonSMS, buttonSignOut;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_inventory_screen);\n\n        buttonSMS.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view1) {\n\n                openSMSPermission();\n            }\n        });\n    }\n    public void openSMSPermission() {\n        Intent intent = new Intent(this, SMSPermissionScreen.class);\n        startActivity(intent);\n    }\n}\n</code></pre>\n<p>This is the error from logcat when the button is pressed:</p>\n<pre><code>2022-08-03 16:54:09.037 8043-8043/com.example.cs360projectone E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.cs360projectone, PID: 8043\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.cs360projectone/com.example.cs360projectone.InventoryScreen}: java.lang.NullPointerException: Attempt to invoke virtual method 'void android.widget.Button.setOnClickListener(android.view.View$OnClickListener)' on a null object reference\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2913)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3048)\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:78)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1808)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loop(Looper.java:193)\n        at android.app.ActivityThread.main(ActivityThread.java:6669)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\n     Caused by: java.lang.NullPointerException: Attempt to invoke virtual method 'void android.widget.Button.setOnClickListener(android.view.View$OnClickListener)' on a null object reference\n        at com.example.cs360projectone.InventoryScreen.onCreate(InventoryScreen.java:18)\n        at android.app.Activity.performCreate(Activity.java:7136)\n        at android.app.Activity.performCreate(Activity.java:7127)\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1271)\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2893)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3048)\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:78)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1808)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loop(Looper.java:193)\n        at android.app.ActivityThread.main(ActivityThread.java:6669)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\n2022-08-03 16:54:09.062 8043-8043/com.example.cs360projectone I/Process: Sending signal. PID: 8043 SIG: 9\n\n</code></pre>\n"},{"tags":["java","spring-boot","image","file","delete-file"],"answers":[{"tags":[],"owner":{"account_id":20621322,"reputation":119,"user_id":15138287,"display_name":"S3D"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659563600,"creation_date":1659563600,"answer_id":73228209,"question_id":73218252,"body_markdown":"The problem was on other function :\\ \r\n\r\nI was open the files after save it without **CLOSE the connection** after it ! \r\n\r\n\r\n\r\nThis one what was messing on the read files \r\n\r\n    inputStream.close();\r\n\r\n","title":"the action can&#39;t be completed because the file is open in openjdk platform binary spring boot","body":"<p>The problem was on other function :\\</p>\n<p>I was open the files after save it without <strong>CLOSE the connection</strong> after it !</p>\n<p>This one what was messing on the read files</p>\n<pre><code>inputStream.close();\n</code></pre>\n"}],"owner":{"account_id":20621322,"reputation":119,"user_id":15138287,"display_name":"S3D"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":612,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73228209,"answer_count":1,"score":-1,"last_activity_date":1659563600,"creation_date":1659513836,"question_id":73218252,"body_markdown":"Hey I&#39;m trying to delete a image (file) but I can&#39;t :(\r\n\r\nThat how I upload the image:\r\n\r\n \r\n\r\n     try {\r\n                List&lt;String&gt; imagesPaths = new ArrayList&lt;&gt;();\r\n                for (String image : imagesBytes)\r\n                {\r\n                    String base64Image = image.split(&quot;,&quot;)[1];\r\n                    byte[] imageByte = javax.xml.bind.DatatypeConverter.parseBase64Binary(base64Image);\r\n                    String folder = &quot;C:/images/&quot; + LoggedInUser.UserId();\r\n                    File newDirectory = new File(folder);\r\n                    if (!newDirectory.exists())\r\n                    {\r\n                        newDirectory.mkdirs();\r\n                    }\r\n                    long timeMilli = new Date().getTime();\r\n                    String imageType = image.substring(&quot;data:image/&quot;.length(), image.indexOf(&quot;;base64&quot;));\r\n                    String path = timeMilli + &quot;.&quot; + imageType;\r\n                    Files.write(Paths.get(folder, path), imageByte);\r\n                    String newPath = LoggedInUser.UserId() + &quot;/&quot; + path;\r\n                    imagesPaths.add(newPath);\r\n                }\r\n                logger.debug(&quot;uploadImages() in ImageService Ended by  &quot; + LoggedInUser.UserName());\r\n                return new ResponseEntity&lt;&gt;(imagesPaths, HttpStatus.OK);\r\n            } catch (Exception e) {\r\n                throw new ApiRequestException(e.getMessage());\r\n            }\r\n\r\n \r\nAnd this how I delete it :\r\n\r\n        List&lt;ImageJpa&gt; images = imageRepository.findByStatus(Image.UNUSED.status);\r\n        System.out.println(images.size() + &quot;: Images are not used&quot;);\r\n        images.forEach(image -&gt; {\r\n            String imagePath = &quot;C:/images/&quot; + image.getPath();\r\n            System.out.println(imagePath);\r\n            File imagePathFile = new File(imagePath);\r\n                if (imagePathFile.exists())\r\n                {\r\n                    boolean isDeleted = imagePathFile.delete();\r\n                    if (isDeleted)\r\n                    {\r\n                        imageRepository.deleteById(image.getId());\r\n                        System.out.println(&quot;Deleted the file: &quot; + imagePathFile.getName());\r\n\r\n                    } else {System.out.println(&quot;Failed to delete the file. :&quot; + imagePathFile.getName());}\r\n                }else {\r\n                    System.out.println(&quot;Already Deleted&quot;);\r\n                }\r\n        });\r\n\r\n\r\nAlways I got (Failed to delete the file ...)\r\n * Note : The image will deleted if I ReRender the the project again or close and open the IDE.","title":"the action can&#39;t be completed because the file is open in openjdk platform binary spring boot","body":"<p>Hey I'm trying to delete a image (file) but I can't :(</p>\n<p>That how I upload the image:</p>\n<pre><code> try {\n            List&lt;String&gt; imagesPaths = new ArrayList&lt;&gt;();\n            for (String image : imagesBytes)\n            {\n                String base64Image = image.split(&quot;,&quot;)[1];\n                byte[] imageByte = javax.xml.bind.DatatypeConverter.parseBase64Binary(base64Image);\n                String folder = &quot;C:/images/&quot; + LoggedInUser.UserId();\n                File newDirectory = new File(folder);\n                if (!newDirectory.exists())\n                {\n                    newDirectory.mkdirs();\n                }\n                long timeMilli = new Date().getTime();\n                String imageType = image.substring(&quot;data:image/&quot;.length(), image.indexOf(&quot;;base64&quot;));\n                String path = timeMilli + &quot;.&quot; + imageType;\n                Files.write(Paths.get(folder, path), imageByte);\n                String newPath = LoggedInUser.UserId() + &quot;/&quot; + path;\n                imagesPaths.add(newPath);\n            }\n            logger.debug(&quot;uploadImages() in ImageService Ended by  &quot; + LoggedInUser.UserName());\n            return new ResponseEntity&lt;&gt;(imagesPaths, HttpStatus.OK);\n        } catch (Exception e) {\n            throw new ApiRequestException(e.getMessage());\n        }\n</code></pre>\n<p>And this how I delete it :</p>\n<pre><code>    List&lt;ImageJpa&gt; images = imageRepository.findByStatus(Image.UNUSED.status);\n    System.out.println(images.size() + &quot;: Images are not used&quot;);\n    images.forEach(image -&gt; {\n        String imagePath = &quot;C:/images/&quot; + image.getPath();\n        System.out.println(imagePath);\n        File imagePathFile = new File(imagePath);\n            if (imagePathFile.exists())\n            {\n                boolean isDeleted = imagePathFile.delete();\n                if (isDeleted)\n                {\n                    imageRepository.deleteById(image.getId());\n                    System.out.println(&quot;Deleted the file: &quot; + imagePathFile.getName());\n\n                } else {System.out.println(&quot;Failed to delete the file. :&quot; + imagePathFile.getName());}\n            }else {\n                System.out.println(&quot;Already Deleted&quot;);\n            }\n    });\n</code></pre>\n<p>Always I got (Failed to delete the file ...)</p>\n<ul>\n<li>Note : The image will deleted if I ReRender the the project again or close and open the IDE.</li>\n</ul>\n"},{"tags":["java","scala","apache-spark","jvm","dataset"],"answers":[{"tags":[],"owner":{"account_id":25439409,"reputation":25,"user_id":19242618,"display_name":"xard4sTR"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659561338,"creation_date":1659561338,"answer_id":73227888,"question_id":73221747,"body_markdown":"After trying some options and looking for neat solutions- I think this is kinda ok: \r\n\r\n          private def getDuplicates(mergedProducts: List[MergedProduct]): List[List[String]] = {\r\n    val duplicates = mergedProducts.groupBy(_.products.sortBy(_.product.productId)).filter(_._2.size &gt; 1).values.toList\r\n    duplicates.map(duplicates =&gt; duplicates.map(_.id))\r\n      }","title":"Scala - Ids lists of objects with duplicated values from spark dataset","body":"<p>After trying some options and looking for neat solutions- I think this is kinda ok:</p>\n<pre><code>      private def getDuplicates(mergedProducts: List[MergedProduct]): List[List[String]] = {\nval duplicates = mergedProducts.groupBy(_.products.sortBy(_.product.productId)).filter(_._2.size &gt; 1).values.toList\nduplicates.map(duplicates =&gt; duplicates.map(_.id))\n  }\n</code></pre>\n"}],"owner":{"account_id":25439409,"reputation":25,"user_id":19242618,"display_name":"xard4sTR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":175,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73227888,"answer_count":1,"score":0,"last_activity_date":1659563289,"creation_date":1659529704,"question_id":73221747,"body_markdown":"I need to create an IDs lists for all objects that have identical (same value and quantity) parameters. I am looking for a solution that will be more efficient than two nested loops and an if.   \r\nObject structure in the dataset:  \r\n\r\n    case class MergedProduct(id: String,\r\n                       products: List[Product])\r\n    \r\n    case class Product(productUrl: String, productId: String)\r\n\r\nExample of data in dataset:\r\n\r\n ```   [\r\n[  {\r\n    &quot;id&quot;: &quot;ID1&quot;,\r\n    &quot;products&quot;: [\r\n      {\r\n        &quot;product&quot;: {\r\n          &quot;productUrl&quot;: &quot;SOMEURL&quot;,\r\n          &quot;productId&quot;: &quot;1&quot;\r\n        }\r\n      },\r\n      {\r\n        &quot;product&quot;: {\r\n          &quot;productUrl&quot;: &quot;SOMEOTHERURL&quot;,\r\n          &quot;productId&quot;: &quot;1&quot;\r\n        }\r\n      }\r\n    ],\r\n  },\r\n  {\r\n    &quot;id&quot;: &quot;ID2&quot;,\r\n    &quot;products&quot;: [\r\n      {\r\n        &quot;product&quot;: {\r\n          &quot;productUrl&quot;: &quot;SOMEURL&quot;,\r\n          &quot;productId&quot;: &quot;1&quot;\r\n        }\r\n      },\r\n      {\r\n        &quot;product&quot;: {\r\n          &quot;productUrl&quot;: &quot;SOMEOTHERURL&quot;,\r\n          &quot;productId&quot;: &quot;1&quot;\r\n        }\r\n      }\r\n    ],\r\n  },\r\n  {\r\n    &quot;id&quot;: &quot;ID3&quot;,\r\n    &quot;products&quot;: [\r\n      {\r\n        &quot;product&quot;: {\r\n          &quot;productUrl&quot;: &quot;DIFFERENTURL&quot;,\r\n          &quot;productId&quot;: &quot;1&quot;\r\n        }\r\n      },\r\n      {\r\n        &quot;product&quot;: {\r\n          &quot;productUrl&quot;: &quot;SOMEOTHERURL&quot;,\r\n          &quot;productId&quot;: &quot;1&quot;\r\n        }\r\n      }\r\n    ],\r\n  },\r\n  {\r\n    &quot;id&quot;: &quot;ID4&quot;,\r\n    &quot;products&quot;: [\r\n      {\r\n        &quot;product&quot;: {\r\n          &quot;productUrl&quot;: &quot;SOMEOTHERURL&quot;,\r\n          &quot;productId&quot;: &quot;1&quot;\r\n        }\r\n      },\r\n      {\r\n        &quot;product&quot;: {\r\n          &quot;productUrl&quot;: &quot;DIFFERENTURL&quot;,\r\n          &quot;productId&quot;: &quot;1&quot;\r\n        }\r\n      }\r\n    ],\r\n  },\r\n  {\r\n    &quot;id&quot;: &quot;ID5&quot;,\r\n    &quot;products&quot;: [\r\n      {\r\n        &quot;product&quot;: {\r\n          &quot;productUrl&quot;: &quot;NOTDUPLICATEDURL&quot;,\r\n          &quot;productId&quot;: &quot;1&quot;\r\n        }\r\n      },\r\n      {\r\n        &quot;product&quot;: {\r\n          &quot;productUrl&quot;: &quot;DIFFERENTURL&quot;,\r\n          &quot;productId&quot;: &quot;1&quot;\r\n        }\r\n      }\r\n    ],\r\n  }\r\n]\r\n```\r\nIn this example, we have 4 objects that are duplicated, so I would like to get their ID in the corresponding lists. \r\n\r\nExample output is List[List[String]]: \r\n``` List(List(&quot;ID1&quot;, &quot;ID2&quot;), List(&quot;ID3&quot;,&quot;ID4&quot;)) ``` \r\nI am looking for something efficient and readable - the dataset we are talking about has nearly 700 million objects.  \r\nAs I can remove the listed duplicates from the dataset (it does not affect the database) because the goal is one - logging them exists, so I was thinking about the solution of taking MergedProduct one by one, searching for other MergedProduct with identical Products, getting their ID, logging in they exist and then remove the mentioned MergedProduct ID from the dataset and move on to the next one until I check the whole dataset but in this case I would have to collect it first as a list of MergedProducts and then do all operations - seems like going around \r\n","title":"Scala - Ids lists of objects with duplicated values from spark dataset","body":"<p>I need to create an IDs lists for all objects that have identical (same value and quantity) parameters. I am looking for a solution that will be more efficient than two nested loops and an if.<br />\nObject structure in the dataset:</p>\n<pre><code>case class MergedProduct(id: String,\n                   products: List[Product])\n\ncase class Product(productUrl: String, productId: String)\n</code></pre>\n<p>Example of data in dataset:</p>\n<pre><code>[  {\n   &quot;id&quot;: &quot;ID1&quot;,\n   &quot;products&quot;: [\n     {\n       &quot;product&quot;: {\n         &quot;productUrl&quot;: &quot;SOMEURL&quot;,\n         &quot;productId&quot;: &quot;1&quot;\n       }\n     },\n     {\n       &quot;product&quot;: {\n         &quot;productUrl&quot;: &quot;SOMEOTHERURL&quot;,\n         &quot;productId&quot;: &quot;1&quot;\n       }\n     }\n   ],\n },\n {\n   &quot;id&quot;: &quot;ID2&quot;,\n   &quot;products&quot;: [\n     {\n       &quot;product&quot;: {\n         &quot;productUrl&quot;: &quot;SOMEURL&quot;,\n         &quot;productId&quot;: &quot;1&quot;\n       }\n     },\n     {\n       &quot;product&quot;: {\n         &quot;productUrl&quot;: &quot;SOMEOTHERURL&quot;,\n         &quot;productId&quot;: &quot;1&quot;\n       }\n     }\n   ],\n },\n {\n   &quot;id&quot;: &quot;ID3&quot;,\n   &quot;products&quot;: [\n     {\n       &quot;product&quot;: {\n         &quot;productUrl&quot;: &quot;DIFFERENTURL&quot;,\n         &quot;productId&quot;: &quot;1&quot;\n       }\n     },\n     {\n       &quot;product&quot;: {\n         &quot;productUrl&quot;: &quot;SOMEOTHERURL&quot;,\n         &quot;productId&quot;: &quot;1&quot;\n       }\n     }\n   ],\n },\n {\n   &quot;id&quot;: &quot;ID4&quot;,\n   &quot;products&quot;: [\n     {\n       &quot;product&quot;: {\n         &quot;productUrl&quot;: &quot;SOMEOTHERURL&quot;,\n         &quot;productId&quot;: &quot;1&quot;\n       }\n     },\n     {\n       &quot;product&quot;: {\n         &quot;productUrl&quot;: &quot;DIFFERENTURL&quot;,\n         &quot;productId&quot;: &quot;1&quot;\n       }\n     }\n   ],\n },\n {\n   &quot;id&quot;: &quot;ID5&quot;,\n   &quot;products&quot;: [\n     {\n       &quot;product&quot;: {\n         &quot;productUrl&quot;: &quot;NOTDUPLICATEDURL&quot;,\n         &quot;productId&quot;: &quot;1&quot;\n       }\n     },\n     {\n       &quot;product&quot;: {\n         &quot;productUrl&quot;: &quot;DIFFERENTURL&quot;,\n         &quot;productId&quot;: &quot;1&quot;\n       }\n     }\n   ],\n }\n]\n</code></pre>\n<p>In this example, we have 4 objects that are duplicated, so I would like to get their ID in the corresponding lists.</p>\n<p>Example output is List[List[String]]:\n<code>List(List(&quot;ID1&quot;, &quot;ID2&quot;), List(&quot;ID3&quot;,&quot;ID4&quot;))</code>\nI am looking for something efficient and readable - the dataset we are talking about has nearly 700 million objects.<br />\nAs I can remove the listed duplicates from the dataset (it does not affect the database) because the goal is one - logging them exists, so I was thinking about the solution of taking MergedProduct one by one, searching for other MergedProduct with identical Products, getting their ID, logging in they exist and then remove the mentioned MergedProduct ID from the dataset and move on to the next one until I check the whole dataset but in this case I would have to collect it first as a list of MergedProducts and then do all operations - seems like going around</p>\n"},{"tags":["java","android","arraylist","filenotfoundexception"],"comments":[{"owner":{"account_id":5998820,"reputation":12666,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1659532843,"post_id":73222416,"comment_id":129317249,"body_markdown":"Needs more information on the exception details, you&#39;ve not indicated where issue is nor the format of the uris.","body":"Needs more information on the exception details, you&#39;ve not indicated where issue is nor the format of the uris."},{"owner":{"account_id":5998820,"reputation":12666,"user_id":4712734,"display_name":"DuncG"},"score":1,"creation_date":1659535709,"post_id":73222416,"comment_id":129318074,"body_markdown":"Still no information on FileNotFoundException. Printing names of files and testing `file.exists()` usually tells you enough about the problem.","body":"Still no information on FileNotFoundException. Printing names of files and testing <code>file.exists()</code> usually tells you enough about the problem."},{"owner":{"account_id":391134,"reputation":382,"user_id":751630,"accept_rate":88,"display_name":"afazolo"},"score":0,"creation_date":1659535992,"post_id":73222416,"comment_id":129318203,"body_markdown":"I have this line in logcat: java.io.FileNotFoundException: /0/1/content:/media/external/images/media/38/ORIGINAL/NONE/848352313 (No such file or directory)","body":"I have this line in logcat: java.io.FileNotFoundException: /0/1/content:/media/external/images/media/38/ORIGINAL/NONE/8&zwnj;&#8203;48352313 (No such file or directory)"},{"owner":{"account_id":391134,"reputation":382,"user_id":751630,"accept_rate":88,"display_name":"afazolo"},"score":0,"creation_date":1659562412,"post_id":73222416,"comment_id":129326978,"body_markdown":"@DuncG the condition if (files.get(i).exists()) return false.","body":"@DuncG the condition if (files.get(i).exists()) return false."}],"owner":{"account_id":391134,"reputation":382,"user_id":751630,"accept_rate":88,"display_name":"afazolo"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":172,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1659562825,"creation_date":1659532513,"question_id":73222416,"body_markdown":"I&#39;m trying to get multiple Files received from an ArrayList, but I&#39;m getting a FileNotFoundException (No such file or directory) error. I get the Uris and convert them to files. Then I pass the files in an ArrayList to another method. So far so good, but apparently the files are not being added to the entity.\r\n\r\nGetting the Uris from a multiple images picker:\r\n\r\n    private final ArrayList&lt;Uri&gt; uri = new ArrayList&lt;&gt;();\r\n    ...\r\n\r\n    Intent intent = new Intent(Intent.ACTION_PICK);\r\n    intent.setType(&quot;image/*&quot;);\r\n    intent.putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true);\r\n    startActivityForResult(Intent.createChooser(intent, &quot;Pictures: &quot;), 1001);\r\n\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (requestCode == 1001) {\r\n            uri.clear();\r\n            if (resultCode == RESULT_OK) {\r\n                if (data.getClipData() != null) {\r\n                    int count = data.getClipData().getItemCount();\r\n                    for (int i = 0; i &lt; count; i++) {\r\n                        uri.add(data.getClipData().getItemAt(i).getUri());\r\n                    }\r\n                    adapter.notifyDataSetChanged();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    ...\r\n\r\n    @Override\r\n    public void onClick(View v) {\r\n        if (v.getId() == R.id.btnSend) {\r\n            syncDataToServer(uri);\r\n        }\r\n    }\r\n\r\n    public DataResponse syncDataToServer(ArrayList&lt;Uri&gt; uris) {\r\n        try {\r\n            ArrayList&lt;File&gt; fs = new ArrayList&lt;&gt;();\r\n            for (int i = 0; i &lt; uris.size(); i++) {\r\n                if (uris != null)\r\n                fs.add(new File(uris.get(i).getPath()));\r\n            }\r\n\r\n            DataResponse data = uploadFiles(&quot;https://endpoint&quot;, params, fs);\r\n\r\n            assert data != null;\r\n            return data;\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        return null;\r\n    }\r\n\r\nThe following method receives the data but generates the error when trying to generate the HttpResponse.\r\n\r\n    public static DataResponse uploadFiles(String url, ArrayList&lt;NameValuePair&gt; params, ArrayList&lt;File&gt; files) {\r\n\t\ttry {\r\n\t\t\tHttpClient httpclient = new DefaultHttpClient();\r\n\t\t\tHttpPost httppost = new HttpPost(url);\r\n\t\t\tMultipartEntity reqEntity = new \r\n            MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);\r\n\t\t\tFileBody fileBody = null;\r\n\t\t\tfor (int i = 0; i &lt; files.size(); i++) {\r\n\t\t\t\tif(files.get(i) != null)\r\n\t\t\t\t\tfileBody = new FileBody(files.get(i));\r\n\r\n\t\t\t\tif(fileBody != null)\r\n\t\t\t\t\treqEntity.addPart(&quot;uploaded_file&quot; + i, fileBody);\r\n\t\t\t}\r\n\r\n            if(params != null) {\r\n\t\t\t\tfor(NameValuePair pair : params) {\r\n\t\t\t\t\tStringBody stringB = new StringBody(pair.getValue(), ContentType.TEXT_PLAIN);\r\n\t\t\t\t\treqEntity.addPart(pair.getName(), stringB);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\thttppost.setEntity(reqEntity);\r\n\t\t\tHttpResponse response = httpclient.execute(httppost);\r\n\t\t\tHttpEntity getResponseEntity = response.getEntity();\r\n\t\t\tInputStream source = getResponseEntity.getContent();\r\n\r\n\r\n\t\t\tJsonFactory f = new JsonFactory();\r\n\t\t\tf.enable(JsonParser.Feature.ALLOW_UNQUOTED_CONTROL_CHARS);\r\n\r\n\t\t\tObjectMapper mapper = new ObjectMapper(f);\r\n\t\t\tmapper.disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES);\r\n\t\t\tDataResponse data;\r\n\t\t\ttry  {\r\n\t\t\t\tdata = mapper.readValue(source, DataResponse.class);\r\n\t\t\t\treturn data;\r\n\t\t\t} catch (IOException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\nStack Trace:\r\n\r\n    2022-08-03 09:45:03.815 18170-18553/com.chillihaze.deskeep E/AndroidRuntime: FATAL EXCEPTION: AsyncTask #5\r\n    Process: com.chillihaze.deskeep, PID: 18170\r\n    java.lang.RuntimeException: An error occurred while executing doInBackground()\r\n        at android.os.AsyncTask$3.done(AsyncTask.java:353)\r\n        at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:383)\r\n        at java.util.concurrent.FutureTask.setException(FutureTask.java:252)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:271)\r\n        at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:245)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)\r\n        at java.lang.Thread.run(Thread.java:764)\r\n     Caused by: java.lang.AssertionError\r\n        at com.chillihaze.events.Teste.syncDataToServer(Teste.java:257)\r\n        at com.chillihaze.events.Teste.access$000(Teste.java:46)\r\n        at com.chillihaze.events.Teste$1.onAsyncTaskDoInBackground(Teste.java:241)\r\n        at com.libraries.asynctask.MGAsyncTask.doInBackground(MGAsyncTask.java:44)\r\n        at com.libraries.asynctask.MGAsyncTask.doInBackground(MGAsyncTask.java:10)","title":"FileNotFoundException (No such file or directory) error when trying to get multiple Files in an ArrayList","body":"<p>I'm trying to get multiple Files received from an ArrayList, but I'm getting a FileNotFoundException (No such file or directory) error. I get the Uris and convert them to files. Then I pass the files in an ArrayList to another method. So far so good, but apparently the files are not being added to the entity.</p>\n<p>Getting the Uris from a multiple images picker:</p>\n<pre><code>private final ArrayList&lt;Uri&gt; uri = new ArrayList&lt;&gt;();\n...\n\nIntent intent = new Intent(Intent.ACTION_PICK);\nintent.setType(&quot;image/*&quot;);\nintent.putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true);\nstartActivityForResult(Intent.createChooser(intent, &quot;Pictures: &quot;), 1001);\n\nprotected void onActivityResult(int requestCode, int resultCode, Intent data) {\n    super.onActivityResult(requestCode, resultCode, data);\n    if (requestCode == 1001) {\n        uri.clear();\n        if (resultCode == RESULT_OK) {\n            if (data.getClipData() != null) {\n                int count = data.getClipData().getItemCount();\n                for (int i = 0; i &lt; count; i++) {\n                    uri.add(data.getClipData().getItemAt(i).getUri());\n                }\n                adapter.notifyDataSetChanged();\n            }\n        }\n    }\n}\n\n...\n\n@Override\npublic void onClick(View v) {\n    if (v.getId() == R.id.btnSend) {\n        syncDataToServer(uri);\n    }\n}\n\npublic DataResponse syncDataToServer(ArrayList&lt;Uri&gt; uris) {\n    try {\n        ArrayList&lt;File&gt; fs = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; uris.size(); i++) {\n            if (uris != null)\n            fs.add(new File(uris.get(i).getPath()));\n        }\n\n        DataResponse data = uploadFiles(&quot;https://endpoint&quot;, params, fs);\n\n        assert data != null;\n        return data;\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n    return null;\n}\n</code></pre>\n<p>The following method receives the data but generates the error when trying to generate the HttpResponse.</p>\n<pre><code>public static DataResponse uploadFiles(String url, ArrayList&lt;NameValuePair&gt; params, ArrayList&lt;File&gt; files) {\n    try {\n        HttpClient httpclient = new DefaultHttpClient();\n        HttpPost httppost = new HttpPost(url);\n        MultipartEntity reqEntity = new \n        MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);\n        FileBody fileBody = null;\n        for (int i = 0; i &lt; files.size(); i++) {\n            if(files.get(i) != null)\n                fileBody = new FileBody(files.get(i));\n\n            if(fileBody != null)\n                reqEntity.addPart(&quot;uploaded_file&quot; + i, fileBody);\n        }\n\n        if(params != null) {\n            for(NameValuePair pair : params) {\n                StringBody stringB = new StringBody(pair.getValue(), ContentType.TEXT_PLAIN);\n                reqEntity.addPart(pair.getName(), stringB);\n            }\n        }\n\n        httppost.setEntity(reqEntity);\n        HttpResponse response = httpclient.execute(httppost);\n        HttpEntity getResponseEntity = response.getEntity();\n        InputStream source = getResponseEntity.getContent();\n\n\n        JsonFactory f = new JsonFactory();\n        f.enable(JsonParser.Feature.ALLOW_UNQUOTED_CONTROL_CHARS);\n\n        ObjectMapper mapper = new ObjectMapper(f);\n        mapper.disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES);\n        DataResponse data;\n        try  {\n            data = mapper.readValue(source, DataResponse.class);\n            return data;\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        \n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n    return null;\n}\n</code></pre>\n<p>Stack Trace:</p>\n<pre><code>2022-08-03 09:45:03.815 18170-18553/com.chillihaze.deskeep E/AndroidRuntime: FATAL EXCEPTION: AsyncTask #5\nProcess: com.chillihaze.deskeep, PID: 18170\njava.lang.RuntimeException: An error occurred while executing doInBackground()\n    at android.os.AsyncTask$3.done(AsyncTask.java:353)\n    at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:383)\n    at java.util.concurrent.FutureTask.setException(FutureTask.java:252)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:271)\n    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:245)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)\n    at java.lang.Thread.run(Thread.java:764)\n Caused by: java.lang.AssertionError\n    at com.chillihaze.events.Teste.syncDataToServer(Teste.java:257)\n    at com.chillihaze.events.Teste.access$000(Teste.java:46)\n    at com.chillihaze.events.Teste$1.onAsyncTaskDoInBackground(Teste.java:241)\n    at com.libraries.asynctask.MGAsyncTask.doInBackground(MGAsyncTask.java:44)\n    at com.libraries.asynctask.MGAsyncTask.doInBackground(MGAsyncTask.java:10)\n</code></pre>\n"},{"tags":["java"],"owner":{"account_id":1754145,"reputation":43960,"user_id":1602555,"display_name":"Karol Dowbecki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1659561738,"answer_count":0,"score":1,"last_activity_date":1659559893,"creation_date":1659559893,"question_id":73227681,"body_markdown":"Looking at `HashMap.getNode(Object key)` method in OpenJDK we see a local variables `tab` initialized by assigning the `transient Node&lt;K,V&gt;[] table;` field to it:\r\n\r\n```\r\nfinal Node&lt;K,V&gt; getNode(Object key) {\r\n    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; int n, hash; K k;\r\n    if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp;\r\n        (first = tab[(n - 1) &amp; (hash = hash(key))]) != null) {\r\n             ...\r\n```\r\n\r\nWhat&#39;s the benefit of assigning `table` field into `tab` local variable? \r\n\r\nWhy later in the code it&#39;s `first = tab[...]` instead of `first = table[...]`?\r\n\r\n ","title":"What&#39;s the point of local variable in the HashMap.getNode(Object key) method","body":"<p>Looking at <code>HashMap.getNode(Object key)</code> method in OpenJDK we see a local variables <code>tab</code> initialized by assigning the <code>transient Node&lt;K,V&gt;[] table;</code> field to it:</p>\n<pre><code>final Node&lt;K,V&gt; getNode(Object key) {\n    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; int n, hash; K k;\n    if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp;\n        (first = tab[(n - 1) &amp; (hash = hash(key))]) != null) {\n             ...\n</code></pre>\n<p>What's the benefit of assigning <code>table</code> field into <code>tab</code> local variable?</p>\n<p>Why later in the code it's <code>first = tab[...]</code> instead of <code>first = table[...]</code>?</p>\n"},{"tags":["java","android","gradle"],"answers":[{"tags":[],"owner":{"account_id":10808339,"reputation":1271,"user_id":7949704,"display_name":"Alejandro Gonzalez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659559668,"creation_date":1659559329,"answer_id":73227587,"question_id":73227540,"body_markdown":"I found one solution, in case the problem was the next\r\n\r\n    https\\://test.com/artifactory/android-devel/org/gradle/6.8/gradle-6.8-bin.zip\r\n\r\nI removed the \\ in the url\r\n\r\n  https://test.com/artifactory/android-devel/org/gradle/6.8/gradle-6.8-bin.zip\r\n","title":"Could not install Gradle distribution from &#39;https://test.com/artifactory/android-devel/org/gradle/6.8/gradle-6.8-bin.zip&#39;","body":"<p>I found one solution, in case the problem was the next</p>\n<pre><code>https\\://test.com/artifactory/android-devel/org/gradle/6.8/gradle-6.8-bin.zip\n</code></pre>\n<p>I removed the \\ in the url</p>\n<p><a href=\"https://test.com/artifactory/android-devel/org/gradle/6.8/gradle-6.8-bin.zip\" rel=\"nofollow noreferrer\">https://test.com/artifactory/android-devel/org/gradle/6.8/gradle-6.8-bin.zip</a></p>\n"}],"owner":{"account_id":10808339,"reputation":1271,"user_id":7949704,"display_name":"Alejandro Gonzalez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1659559668,"creation_date":1659558998,"question_id":73227540,"body_markdown":"I have one project in android studio, but when i try to compile it, it is showing the next error and not permits to build an apk\r\n\r\n&gt; Could not install Gradle distribution from\r\n&gt; &#39;https://test.com/artifactory/android-devel/org/gradle/6.8/gradle-6.8-bin.zip&#39;.\r\n\r\nThe gradle configuration is \r\n\r\n    #Thu Feb 27 14:57:19 COT 2020\r\n    distributionBase=GRADLE_USER_HOME\r\n    distributionPath=wrapper/dists\r\n    zipStoreBase=GRADLE_USER_HOME\r\n    zipStorePath=wrapper/\r\n    distributionUrl=https\\://test.com/artifactory/android-devel/org/gradle/6.8/gradle-6.8-bin.zip\r\n\r\nThe url exists  because i try to load the next https://test.com/artifactory/android-devel/org/gradle/6.8/gradle-6.8-bin.zip, it downloads the zip.\r\n","title":"Could not install Gradle distribution from &#39;https://test.com/artifactory/android-devel/org/gradle/6.8/gradle-6.8-bin.zip&#39;","body":"<p>I have one project in android studio, but when i try to compile it, it is showing the next error and not permits to build an apk</p>\n<blockquote>\n<p>Could not install Gradle distribution from\n'https://test.com/artifactory/android-devel/org/gradle/6.8/gradle-6.8-bin.zip'.</p>\n</blockquote>\n<p>The gradle configuration is</p>\n<pre><code>#Thu Feb 27 14:57:19 COT 2020\ndistributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/\ndistributionUrl=https\\://test.com/artifactory/android-devel/org/gradle/6.8/gradle-6.8-bin.zip\n</code></pre>\n<p>The url exists  because i try to load the next <a href=\"https://test.com/artifactory/android-devel/org/gradle/6.8/gradle-6.8-bin.zip\" rel=\"nofollow noreferrer\">https://test.com/artifactory/android-devel/org/gradle/6.8/gradle-6.8-bin.zip</a>, it downloads the zip.</p>\n"},{"tags":["java","mysql","database","spring-boot"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1659524305,"post_id":73220465,"comment_id":129314024,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."},{"owner":{"account_id":6078702,"reputation":1668,"user_id":4745154,"accept_rate":36,"display_name":"Kumaresh Babu N S"},"score":0,"creation_date":1659528116,"post_id":73220465,"comment_id":129315389,"body_markdown":"If you&#39;re using AWS RDS service, there are two endpoints -writer for master and reader for read-replica. You can use both the endpoints in the application and redirect all the read calls to read-replica but the write call made in the master will not immediately appear in the read-replica it is not synchornous.","body":"If you&#39;re using AWS RDS service, there are two endpoints -writer for master and reader for read-replica. You can use both the endpoints in the application and redirect all the read calls to read-replica but the write call made in the master will not immediately appear in the read-replica it is not synchornous."},{"owner":{"account_id":25966563,"reputation":1,"user_id":19682442,"display_name":"MayankKK"},"score":0,"creation_date":1659611054,"post_id":73220465,"comment_id":129338077,"body_markdown":"Thankyou ! But my question is how will Java know where reads or writes are being performed ? Will I need to add some annotations above methods that involve read/write from DB ?","body":"Thankyou ! But my question is how will Java know where reads or writes are being performed ? Will I need to add some annotations above methods that involve read/write from DB ?"}],"owner":{"account_id":25966563,"reputation":1,"user_id":19682442,"display_name":"MayankKK"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659559603,"creation_date":1659523808,"question_id":73220465,"body_markdown":"I have created 2 replicas of my master DB and now I need all the read queries to go to the replicas and the write queries to the master DB. \r\n\r\nI need to know whether there is any way to do this at the infrastructure level? Or really any way that does not involve identifying every read operation manually because in a large codebase that would be very unfeasible.","title":"How to seperate your read and write queries in Spring Boot","body":"<p>I have created 2 replicas of my master DB and now I need all the read queries to go to the replicas and the write queries to the master DB.</p>\n<p>I need to know whether there is any way to do this at the infrastructure level? Or really any way that does not involve identifying every read operation manually because in a large codebase that would be very unfeasible.</p>\n"},{"tags":["java","logging","jmx","jolokia"],"answers":[{"tags":[],"owner":{"account_id":1463408,"reputation":4327,"user_id":4660481,"accept_rate":50,"display_name":"GaspardP"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1471303988,"creation_date":1471202239,"answer_id":38945744,"question_id":38838526,"body_markdown":"You have to keep in mind that even if your mbean is a singleton in your servlet, your servlet could be running on multiple endpoints - that&#39;s why the namespace alone is not sufficient to identify your mbean instance.\r\n\r\nIf you want to get all instances of `foo.bar.Log4j`, you can use the `read` endpoint like this:\r\n\r\n    http://yourserver/jolokia/read/foo.bar.Log4j:*\r\n\r\nIn general, you can get a list of all your available mbeans like this:\r\n\r\n    http://yourserver/jolokia/list\r\n\r\nYou should end up with a large json document that contains everything you might want to fetch. You will see things like\r\n\r\n    &quot;foo.bar.Log4j&quot;: {\r\n      &quot;name=foo,type=MyLogger&quot;: {\r\n        &quot;desc&quot;: ...\r\n        &quot;attr&quot;: {\r\n            ...\r\n    }}}\r\n\r\nYou can now get the attributes using something like this:\r\n\r\n    http://yourserver/jolokia/read/foo.bar.Log4j:type=name=foo,type=MyLogger\r\n\r\nIn addition to `type` and `name`, you may see other fields as well, for example `context` or `id`. This a:b key is the Java [ObjectName][1] for your mbean.\r\n\r\n\r\n[1]: https://docs.oracle.com/javase/7/docs/api/javax/management/ObjectName.html","title":"How to use jolokia to retrieve mbean for a class","body":"<p>You have to keep in mind that even if your mbean is a singleton in your servlet, your servlet could be running on multiple endpoints - that's why the namespace alone is not sufficient to identify your mbean instance.</p>\n\n<p>If you want to get all instances of <code>foo.bar.Log4j</code>, you can use the <code>read</code> endpoint like this:</p>\n\n<pre><code>http://yourserver/jolokia/read/foo.bar.Log4j:*\n</code></pre>\n\n<p>In general, you can get a list of all your available mbeans like this:</p>\n\n<pre><code>http://yourserver/jolokia/list\n</code></pre>\n\n<p>You should end up with a large json document that contains everything you might want to fetch. You will see things like</p>\n\n<pre><code>\"foo.bar.Log4j\": {\n  \"name=foo,type=MyLogger\": {\n    \"desc\": ...\n    \"attr\": {\n        ...\n}}}\n</code></pre>\n\n<p>You can now get the attributes using something like this:</p>\n\n<pre><code>http://yourserver/jolokia/read/foo.bar.Log4j:type=name=foo,type=MyLogger\n</code></pre>\n\n<p>In addition to <code>type</code> and <code>name</code>, you may see other fields as well, for example <code>context</code> or <code>id</code>. This a:b key is the Java <a href=\"https://docs.oracle.com/javase/7/docs/api/javax/management/ObjectName.html\" rel=\"noreferrer\">ObjectName</a> for your mbean.</p>\n"}],"owner":{"account_id":1333235,"reputation":1719,"user_id":1276601,"accept_rate":65,"display_name":"neoeahit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6995,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":38945744,"answer_count":1,"score":5,"last_activity_date":1659559597,"creation_date":1470690389,"question_id":38838526,"body_markdown":"I have a mbean for a class say foo.bar.Log4j\r\nand I want to use jolokia to list all loggers?\r\n\r\nI have tried reading on https://jolokia.org/reference/pdf/jolokia-reference.pdf but that tells me how to get values of predefined java.memory etc \r\n\r\nPlease suggest on how to get jolokia to retrieve loggers for a user-defined class","title":"How to use jolokia to retrieve mbean for a class","body":"<p>I have a mbean for a class say foo.bar.Log4j\nand I want to use jolokia to list all loggers?</p>\n\n<p>I have tried reading on <a href=\"https://jolokia.org/reference/pdf/jolokia-reference.pdf\" rel=\"nofollow\">https://jolokia.org/reference/pdf/jolokia-reference.pdf</a> but that tells me how to get values of predefined java.memory etc </p>\n\n<p>Please suggest on how to get jolokia to retrieve loggers for a user-defined class</p>\n"},{"tags":["java","cookies","okhttp"],"comments":[{"owner":{"account_id":4927379,"reputation":5217,"user_id":3968276,"display_name":"Petter Hesselberg"},"score":7,"creation_date":1495550298,"post_id":34881775,"comment_id":75294179,"body_markdown":"Some legacy stuff landed in my lap and I looked for how to do this with OkHttp 2. Your question is my answer. :-)","body":"Some legacy stuff landed in my lap and I looked for how to do this with OkHttp 2. Your question is my answer. :-)"}],"answers":[{"tags":[],"owner":{"account_id":7293130,"reputation":595,"user_id":5558896,"display_name":"gncabrera"},"down_vote_count":3,"up_vote_count":31,"is_accepted":false,"score":28,"last_activity_date":1453229960,"creation_date":1453229960,"answer_id":34884863,"question_id":34881775,"body_markdown":"Here you have a simple approach to create your own CookieJar. It can be extended as you wish. What I did is to implement a CookieJar and build the OkHttpClient using the OkHttpClient.Builder with this this CookieJar.\r\n\r\n    public class MyCookieJar implements CookieJar {\r\n    \r\n        private List&lt;Cookie&gt; cookies;\r\n    \r\n        @Override\r\n        public void saveFromResponse(HttpUrl url, List&lt;Cookie&gt; cookies) {\r\n            this.cookies =  cookies;\r\n        }\r\n    \r\n        @Override\r\n        public List&lt;Cookie&gt; loadForRequest(HttpUrl url) {\r\n            if (cookies != null)\r\n                return cookies;\r\n            return new ArrayList&lt;Cookie&gt;();\r\n    \r\n        } \r\n    }\r\nHere is how you can create the OkHttpClient\r\n\r\n    OkHttpClient.Builder builder = new OkHttpClient.Builder();\r\n    builder.cookieJar(new MyCookieJar());\r\n    OkHttpClient client = builder.build();","title":"Automatic cookie handling with OkHttp 3","body":"<p>Here you have a simple approach to create your own CookieJar. It can be extended as you wish. What I did is to implement a CookieJar and build the OkHttpClient using the OkHttpClient.Builder with this this CookieJar.</p>\n\n<pre><code>public class MyCookieJar implements CookieJar {\n\n    private List&lt;Cookie&gt; cookies;\n\n    @Override\n    public void saveFromResponse(HttpUrl url, List&lt;Cookie&gt; cookies) {\n        this.cookies =  cookies;\n    }\n\n    @Override\n    public List&lt;Cookie&gt; loadForRequest(HttpUrl url) {\n        if (cookies != null)\n            return cookies;\n        return new ArrayList&lt;Cookie&gt;();\n\n    } \n}\n</code></pre>\n\n<p>Here is how you can create the OkHttpClient</p>\n\n<pre><code>OkHttpClient.Builder builder = new OkHttpClient.Builder();\nbuilder.cookieJar(new MyCookieJar());\nOkHttpClient client = builder.build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7421200,"reputation":575,"user_id":5645468,"display_name":"1f7"},"down_vote_count":4,"up_vote_count":40,"is_accepted":true,"score":36,"last_activity_date":1453237802,"creation_date":1453237290,"answer_id":34886860,"question_id":34881775,"body_markdown":"right now I&#39;m playing with it. \r\ntry [PersistentCookieStore][1], add gradle dependencies for *JavaNetCookieJar*:\r\n\r\n    \r\n\r\n `compile &quot;com.squareup.okhttp3:okhttp-urlconnection:3.0.0-RC1&quot;`\r\n\r\nand init\r\n\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n        // init cookie manager\r\n        CookieHandler cookieHandler = new CookieManager(\r\n                new PersistentCookieStore(ctx), CookiePolicy.ACCEPT_ALL);\r\n        // init okhttp 3 logger\r\n        HttpLoggingInterceptor logging = new HttpLoggingInterceptor();\r\n        logging.setLevel(HttpLoggingInterceptor.Level.BODY);\r\n        // init OkHttpClient\r\n        OkHttpClient httpClient = new OkHttpClient.Builder()\r\n                .cookieJar(new JavaNetCookieJar(cookieHandler))\r\n                .addInterceptor(logging)\r\n                .build();\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n`\r\n\r\n\r\n  [1]: https://gist.github.com/franmontiel/ed12a2295566b7076161","title":"Automatic cookie handling with OkHttp 3","body":"<p>right now I'm playing with it. \ntry <a href=\"https://gist.github.com/franmontiel/ed12a2295566b7076161\">PersistentCookieStore</a>, add gradle dependencies for <em>JavaNetCookieJar</em>:</p>\n\n<p><code>compile \"com.squareup.okhttp3:okhttp-urlconnection:3.0.0-RC1\"</code></p>\n\n<p>and init</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>    // init cookie manager\n    CookieHandler cookieHandler = new CookieManager(\n            new PersistentCookieStore(ctx), CookiePolicy.ACCEPT_ALL);\n    // init okhttp 3 logger\n    HttpLoggingInterceptor logging = new HttpLoggingInterceptor();\n    logging.setLevel(HttpLoggingInterceptor.Level.BODY);\n    // init OkHttpClient\n    OkHttpClient httpClient = new OkHttpClient.Builder()\n            .cookieJar(new JavaNetCookieJar(cookieHandler))\n            .addInterceptor(logging)\n            .build();\n</code></pre>\n\n\n\n<p>`</p>\n"},{"tags":[],"owner":{"account_id":954898,"reputation":1870,"user_id":980387,"display_name":"franmontiel"},"down_vote_count":1,"up_vote_count":69,"is_accepted":false,"score":68,"last_activity_date":1455213754,"creation_date":1455212819,"answer_id":35346473,"question_id":34881775,"body_markdown":"If you want to use the new OkHttp 3 CookieJar and get rid of the `okhttp-urlconnection` dependency you can use this [PersistentCookieJar](https://github.com/franmontiel/PersistentCookieJar).\r\n\r\nYou only need to create an instance of `PersistentCookieJar` and then just pass it to the `OkHttp` builder:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    CookieJar cookieJar =\r\n                        new PersistentCookieJar(new SetCookieCache(), new SharedPrefsCookiePersistor(context));\r\n        \r\n    OkHttpClient okHttpClient = new OkHttpClient.Builder()\r\n                        .cookieJar(cookieJar)\r\n                        .build();\r\n\r\n&lt;!-- end snippet --&gt;\r\n","title":"Automatic cookie handling with OkHttp 3","body":"<p>If you want to use the new OkHttp 3 CookieJar and get rid of the <code>okhttp-urlconnection</code> dependency you can use this <a href=\"https://github.com/franmontiel/PersistentCookieJar\" rel=\"noreferrer\">PersistentCookieJar</a>.</p>\n\n<p>You only need to create an instance of <code>PersistentCookieJar</code> and then just pass it to the <code>OkHttp</code> builder:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>CookieJar cookieJar =\n                    new PersistentCookieJar(new SetCookieCache(), new SharedPrefsCookiePersistor(context));\n\nOkHttpClient okHttpClient = new OkHttpClient.Builder()\n                    .cookieJar(cookieJar)\n                    .build();\n</code></pre>\n\n\n"},{"tags":[],"owner":{"account_id":33704,"reputation":8964,"user_id":94557,"accept_rate":86,"display_name":"Matt Wolfe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1461364413,"creation_date":1461364413,"answer_id":36804308,"question_id":34881775,"body_markdown":"I used @gncabrera&#39;s solution but also created a helper class to help with initialization and also to make it easy to share a CookieJar across the application.\r\n\r\n    public class OkHttpClientCreator {\r\n    \r\n        private static CookieJar mCookieJar;\r\n    \r\n        public static OkHttpClient.Builder getNewHttpClientBuilder(boolean isDebug, boolean useCookies) {\r\n            if (mCookieJar == null &amp;&amp; useCookies) {\r\n                mCookieJar = new BasicCookieJar();\r\n            }\r\n            OkHttpClient.Builder builder = new OkHttpClient.Builder();\r\n            if (useCookies) {\r\n                builder.cookieJar(mCookieJar);\r\n            }\r\n            if (isDebug) {\r\n                builder.addInterceptor(new LoggingInterceptor());\r\n            }\r\n            return builder;\r\n        }\r\n    \r\n        public static OkHttpClient getNewHttpClient(boolean isDebug, boolean useCookies) {\r\n           return getNewHttpClientBuilder(isDebug, useCookies).build();\r\n        }\r\n        \r\n    }\r\n\r\n\r\nThe logging interceptor is used in debug mode to print out request information and the cookie jar instance is shared. across callers so that if requests need to use a common cookie handler they can. These cookies won&#39;t persist across app launches but that&#39;s not a requirement for my application since we use token based sessions and the only need for cookies is the short time between logging in and generating the token.\r\n\r\n\r\nNote:\r\nBasicCookieJar is just the same implementation as gncabrera&#39;s MyCookieJar","title":"Automatic cookie handling with OkHttp 3","body":"<p>I used @gncabrera's solution but also created a helper class to help with initialization and also to make it easy to share a CookieJar across the application.</p>\n\n<pre><code>public class OkHttpClientCreator {\n\n    private static CookieJar mCookieJar;\n\n    public static OkHttpClient.Builder getNewHttpClientBuilder(boolean isDebug, boolean useCookies) {\n        if (mCookieJar == null &amp;&amp; useCookies) {\n            mCookieJar = new BasicCookieJar();\n        }\n        OkHttpClient.Builder builder = new OkHttpClient.Builder();\n        if (useCookies) {\n            builder.cookieJar(mCookieJar);\n        }\n        if (isDebug) {\n            builder.addInterceptor(new LoggingInterceptor());\n        }\n        return builder;\n    }\n\n    public static OkHttpClient getNewHttpClient(boolean isDebug, boolean useCookies) {\n       return getNewHttpClientBuilder(isDebug, useCookies).build();\n    }\n\n}\n</code></pre>\n\n<p>The logging interceptor is used in debug mode to print out request information and the cookie jar instance is shared. across callers so that if requests need to use a common cookie handler they can. These cookies won't persist across app launches but that's not a requirement for my application since we use token based sessions and the only need for cookies is the short time between logging in and generating the token.</p>\n\n<p>Note:\nBasicCookieJar is just the same implementation as gncabrera's MyCookieJar</p>\n"},{"tags":[],"owner":{"account_id":5437583,"reputation":409,"user_id":4326584,"display_name":"xyman"},"down_vote_count":2,"up_vote_count":19,"is_accepted":false,"score":17,"last_activity_date":1495015919,"creation_date":1464336521,"answer_id":37478166,"question_id":34881775,"body_markdown":"Here is working CookieJar implementation for OkHttp3. If you have multiple instances of OkHttp3 (usually you should have only one instance and use it as singletone) you should set the same instance of cookiejar to all of the http clients so they can share cookies !!! This implementation is not persisting cookies(they will all be discard on application restart) but it should be easy to implement SharedPreferences persistence instead of in-memory list of cookies(cookieStore).\r\n\r\n        CookieJar cookieJar = new CookieJar() {\r\n            private final HashMap&lt;String, List&lt;Cookie&gt;&gt; cookieStore = new HashMap&lt;&gt;();\r\n\r\n            @Override\r\n            public void saveFromResponse(HttpUrl url, List&lt;Cookie&gt; cookies) {\r\n                cookieStore.put(url.host(), cookies);\r\n            }\r\n\r\n            @Override\r\n            public List&lt;Cookie&gt; loadForRequest(HttpUrl url) {\r\n                List&lt;Cookie&gt; cookies = cookieStore.get(url.host());\r\n                return cookies != null ? cookies : new ArrayList&lt;Cookie&gt;();\r\n            }\r\n        };\r\n        OkHttpClient httpClient = new OkHttpClient.Builder()\r\n                .cookieJar(cookieJar)\r\n                .build();","title":"Automatic cookie handling with OkHttp 3","body":"<p>Here is working CookieJar implementation for OkHttp3. If you have multiple instances of OkHttp3 (usually you should have only one instance and use it as singletone) you should set the same instance of cookiejar to all of the http clients so they can share cookies !!! This implementation is not persisting cookies(they will all be discard on application restart) but it should be easy to implement SharedPreferences persistence instead of in-memory list of cookies(cookieStore).</p>\n\n<pre><code>    CookieJar cookieJar = new CookieJar() {\n        private final HashMap&lt;String, List&lt;Cookie&gt;&gt; cookieStore = new HashMap&lt;&gt;();\n\n        @Override\n        public void saveFromResponse(HttpUrl url, List&lt;Cookie&gt; cookies) {\n            cookieStore.put(url.host(), cookies);\n        }\n\n        @Override\n        public List&lt;Cookie&gt; loadForRequest(HttpUrl url) {\n            List&lt;Cookie&gt; cookies = cookieStore.get(url.host());\n            return cookies != null ? cookies : new ArrayList&lt;Cookie&gt;();\n        }\n    };\n    OkHttpClient httpClient = new OkHttpClient.Builder()\n            .cookieJar(cookieJar)\n            .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6868918,"reputation":1283,"user_id":5280144,"display_name":"iman kazemayni"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1500753217,"creation_date":1485938681,"answer_id":41975331,"question_id":34881775,"body_markdown":"i used [franmontiel PeristentCookieJar][1] library for okhttp3 and retrofit.2. the benefit of this approach is : not need manipulate your okhttp request. Just set cookies or session when creating retrofit\r\n   \r\n\r\n#### 1. first add this to your build.gradle(projectname) ####\r\n\r\n\r\n     allprojects {\r\n         repositories {\r\n             jcenter()\r\n             maven { url &quot;https://jitpack.io&quot; }\r\n         }\r\n     }\r\n\r\n#### 2. add this to your build.gradle ####\r\n\r\n\r\n        compile &#39;com.github.franmontiel:PersistentCookieJar:v1.0.1&#39;\r\n\r\n#### 3. build retrofit like this ####\r\n\r\n\r\n    public static Retrofit getClient(Context context) {\r\n\r\n                ClearableCookieJar cookieJar = new PersistentCookieJar(new SetCookieCache(), new SharedPrefsCookiePersistor(context));\r\n                OkHttpClient okHttpClient = new OkHttpClient.Builder()\r\n                        .cookieJar(cookieJar)\r\n                        .build();\r\n                if (retrofit==null) {\r\n                    retrofit = new Retrofit.Builder()\r\n                            .baseUrl(BASE_URL)\r\n                            .addConverterFactory(GsonConverterFactory.create())\r\n                            .client(okHttpClient)\r\n                            .build();\r\n                }\r\n                return retrofit;\r\n            }\r\n\r\n  [1]: https://github.com/franmontiel/PersistentCookieJar","title":"Automatic cookie handling with OkHttp 3","body":"<p>i used <a href=\"https://github.com/franmontiel/PersistentCookieJar\" rel=\"nofollow noreferrer\">franmontiel PeristentCookieJar</a> library for okhttp3 and retrofit.2. the benefit of this approach is : not need manipulate your okhttp request. Just set cookies or session when creating retrofit</p>\n\n1. first add this to your build.gradle(projectname)\n\n<pre><code> allprojects {\n     repositories {\n         jcenter()\n         maven { url \"https://jitpack.io\" }\n     }\n }\n</code></pre>\n\n2. add this to your build.gradle\n\n<pre><code>    compile 'com.github.franmontiel:PersistentCookieJar:v1.0.1'\n</code></pre>\n\n3. build retrofit like this\n\n<pre><code>public static Retrofit getClient(Context context) {\n\n            ClearableCookieJar cookieJar = new PersistentCookieJar(new SetCookieCache(), new SharedPrefsCookiePersistor(context));\n            OkHttpClient okHttpClient = new OkHttpClient.Builder()\n                    .cookieJar(cookieJar)\n                    .build();\n            if (retrofit==null) {\n                retrofit = new Retrofit.Builder()\n                        .baseUrl(BASE_URL)\n                        .addConverterFactory(GsonConverterFactory.create())\n                        .client(okHttpClient)\n                        .build();\n            }\n            return retrofit;\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6597541,"reputation":778,"user_id":5096800,"display_name":"riversun"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1490435722,"creation_date":1490435722,"answer_id":43014955,"question_id":34881775,"body_markdown":"I can show you a library for letting OkHttp3 handle cookies automatically. It can be used easily.\r\n\r\nJust Keep cookies on memory, to do persistence yourself if you need.\r\nRun on Android and Pure Java environment.\r\n\r\n\t\tString url = &quot;https://example.com/webapi&quot;;\r\n\r\n\t\tOkHttp3CookieHelper cookieHelper = new OkHttp3CookieHelper();\r\n\t\t\r\n\t\tOkHttpClient client = new OkHttpClient.Builder()\r\n\t\t\t\t.cookieJar(cookieHelper.cookieJar())\r\n\t\t\t\t.build();\r\n\r\n\t\tRequest request = new Request.Builder()\r\n\t\t\t\t.url(url)\r\n\t\t\t\t.build();\r\n\r\n**Gradle**\r\n\r\n    compile &#39;org.riversun:okhttp3-cookie-helper:1.0.0&#39;\r\n\r\n**Maven**\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.riversun&lt;/groupId&gt;\r\n    &lt;artifactId&gt;okhttp3-cookie-helper&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0.0&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"Automatic cookie handling with OkHttp 3","body":"<p>I can show you a library for letting OkHttp3 handle cookies automatically. It can be used easily.</p>\n\n<p>Just Keep cookies on memory, to do persistence yourself if you need.\nRun on Android and Pure Java environment.</p>\n\n<pre><code>    String url = \"https://example.com/webapi\";\n\n    OkHttp3CookieHelper cookieHelper = new OkHttp3CookieHelper();\n\n    OkHttpClient client = new OkHttpClient.Builder()\n            .cookieJar(cookieHelper.cookieJar())\n            .build();\n\n    Request request = new Request.Builder()\n            .url(url)\n            .build();\n</code></pre>\n\n<p><strong>Gradle</strong></p>\n\n<pre><code>compile 'org.riversun:okhttp3-cookie-helper:1.0.0'\n</code></pre>\n\n<p><strong>Maven</strong></p>\n\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;org.riversun&lt;/groupId&gt;\n&lt;artifactId&gt;okhttp3-cookie-helper&lt;/artifactId&gt;\n&lt;version&gt;1.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4340645,"reputation":2657,"user_id":3543940,"accept_rate":12,"display_name":"Shubham"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1509255289,"creation_date":1509255289,"answer_id":46997153,"question_id":34881775,"body_markdown":"Adding  `compile &quot;com.squareup.okhttp3:okhttp-urlconnection:3.8.1&quot;`  to your build.gradle.\r\n\r\nAnd then adding  \r\n\r\n\r\n     CookieManager cookieManager = new CookieManager();\r\n     cookieManager.setCookiePolicy(CookiePolicy.ACCEPT_ALL);\r\n\r\n     OkHttpClient defaultHttpClient = new OkHttpClient.Builder()\r\n                                     .cookieJar(new JavaNetCookieJar(cookieManager))\r\n                                     .build()\r\n\r\n\r\nhelped me without adding any third-party dependency except the one from OkHttp.","title":"Automatic cookie handling with OkHttp 3","body":"<p>Adding  <code>compile \"com.squareup.okhttp3:okhttp-urlconnection:3.8.1\"</code>  to your build.gradle.</p>\n\n<p>And then adding  </p>\n\n<pre><code> CookieManager cookieManager = new CookieManager();\n cookieManager.setCookiePolicy(CookiePolicy.ACCEPT_ALL);\n\n OkHttpClient defaultHttpClient = new OkHttpClient.Builder()\n                                 .cookieJar(new JavaNetCookieJar(cookieManager))\n                                 .build()\n</code></pre>\n\n<p>helped me without adding any third-party dependency except the one from OkHttp.</p>\n"},{"tags":[],"owner":{"account_id":1240942,"reputation":12883,"user_id":1203565,"accept_rate":56,"display_name":"Vihaan Verma"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1512597339,"creation_date":1512597339,"answer_id":47684088,"question_id":34881775,"body_markdown":"minimal solution that persists cookie after first run\r\n\r\n    public class SharedPrefCookieJar implements CookieJar {\r\n    \r\n        Map&lt;String, Cookie&gt; cookieMap = new HashMap();\r\n        private Context mContext;\r\n        private SharedPrefsManager mSharedPrefsManager;\r\n    \r\n        @Inject\r\n        public SharedPrefCookieJar(Context context, SharedPrefsManager sharedPrefsManager) {\r\n            mContext = context;\r\n            mSharedPrefsManager = sharedPrefsManager;\r\n            cookieMap = sharedPrefsManager.getCookieMap(context);\r\n            if (cookieMap == null) {\r\n                cookieMap = new HashMap&lt;&gt;();\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void saveFromResponse(HttpUrl url, List&lt;Cookie&gt; cookies) {\r\n    \r\n            for (Cookie cookie : cookies) {\r\n                cookieMap.put(cookie.name(), cookie);\r\n            }\r\n            mSharedPrefsManager.setCookieMap(mContext, cookieMap);\r\n        }\r\n    \r\n        @Override\r\n        public List&lt;Cookie&gt; loadForRequest(HttpUrl url) {\r\n            List&lt;Cookie&gt; validCookies = new ArrayList&lt;&gt;();\r\n            for (Map.Entry&lt;String, Cookie&gt; entry : cookieMap.entrySet()) {\r\n                Cookie cookie = entry.getValue();\r\n                if (cookie.expiresAt() &lt; System.currentTimeMillis()) {\r\n    \r\n                } else {\r\n                    validCookies.add(cookie);\r\n                }\r\n            }\r\n            return validCookies;\r\n        }\r\n    \r\n    }\r\n\r\nwith dagger\r\n\r\n    @Module\r\n    public class ApiModule {\r\n    \r\n    \r\n        @Provides\r\n        @Singleton\r\n        InstagramService provideInstagramService(OkHttpClient client)\r\n        {\r\n            Retrofit retrofit = new Retrofit.Builder()\r\n                    .baseUrl(InstagramService.BASE_URL)\r\n                    .client(client)\r\n                    .addConverterFactory(GsonConverterFactory.create())\r\n                    .addCallAdapterFactory(RxJava2CallAdapterFactory.create())\r\n                    .build();\r\n            InstagramService instagramService = retrofit.create(InstagramService.class);\r\n            return instagramService;\r\n        }\r\n    \r\n    \r\n        @Provides\r\n        @Singleton\r\n        OkHttpClient provideOkHttpClient(SharedPrefCookieJar sharedPrefCookieJar){\r\n            OkHttpClient client;\r\n            OkHttpClient.Builder builder = new OkHttpClient.Builder();\r\n            if(BuildConfig.DEBUG)\r\n            {\r\n                HttpLoggingInterceptor httpLoggingInterceptor = new HttpLoggingInterceptor();\r\n                httpLoggingInterceptor.setLevel(HttpLoggingInterceptor.Level.BODY);\r\n                builder\r\n                    .addInterceptor(httpLoggingInterceptor)\r\n                    .addInterceptor(new InstagramHeaderInterceptor())\r\n                    .addNetworkInterceptor(new LoggingInterceptor());\r\n    \r\n            }\r\n            client = builder.cookieJar(sharedPrefCookieJar).build();\r\n            return client;\r\n        }\r\n    }","title":"Automatic cookie handling with OkHttp 3","body":"<p>minimal solution that persists cookie after first run</p>\n\n<pre><code>public class SharedPrefCookieJar implements CookieJar {\n\n    Map&lt;String, Cookie&gt; cookieMap = new HashMap();\n    private Context mContext;\n    private SharedPrefsManager mSharedPrefsManager;\n\n    @Inject\n    public SharedPrefCookieJar(Context context, SharedPrefsManager sharedPrefsManager) {\n        mContext = context;\n        mSharedPrefsManager = sharedPrefsManager;\n        cookieMap = sharedPrefsManager.getCookieMap(context);\n        if (cookieMap == null) {\n            cookieMap = new HashMap&lt;&gt;();\n        }\n    }\n\n    @Override\n    public void saveFromResponse(HttpUrl url, List&lt;Cookie&gt; cookies) {\n\n        for (Cookie cookie : cookies) {\n            cookieMap.put(cookie.name(), cookie);\n        }\n        mSharedPrefsManager.setCookieMap(mContext, cookieMap);\n    }\n\n    @Override\n    public List&lt;Cookie&gt; loadForRequest(HttpUrl url) {\n        List&lt;Cookie&gt; validCookies = new ArrayList&lt;&gt;();\n        for (Map.Entry&lt;String, Cookie&gt; entry : cookieMap.entrySet()) {\n            Cookie cookie = entry.getValue();\n            if (cookie.expiresAt() &lt; System.currentTimeMillis()) {\n\n            } else {\n                validCookies.add(cookie);\n            }\n        }\n        return validCookies;\n    }\n\n}\n</code></pre>\n\n<p>with dagger</p>\n\n<pre><code>@Module\npublic class ApiModule {\n\n\n    @Provides\n    @Singleton\n    InstagramService provideInstagramService(OkHttpClient client)\n    {\n        Retrofit retrofit = new Retrofit.Builder()\n                .baseUrl(InstagramService.BASE_URL)\n                .client(client)\n                .addConverterFactory(GsonConverterFactory.create())\n                .addCallAdapterFactory(RxJava2CallAdapterFactory.create())\n                .build();\n        InstagramService instagramService = retrofit.create(InstagramService.class);\n        return instagramService;\n    }\n\n\n    @Provides\n    @Singleton\n    OkHttpClient provideOkHttpClient(SharedPrefCookieJar sharedPrefCookieJar){\n        OkHttpClient client;\n        OkHttpClient.Builder builder = new OkHttpClient.Builder();\n        if(BuildConfig.DEBUG)\n        {\n            HttpLoggingInterceptor httpLoggingInterceptor = new HttpLoggingInterceptor();\n            httpLoggingInterceptor.setLevel(HttpLoggingInterceptor.Level.BODY);\n            builder\n                .addInterceptor(httpLoggingInterceptor)\n                .addInterceptor(new InstagramHeaderInterceptor())\n                .addNetworkInterceptor(new LoggingInterceptor());\n\n        }\n        client = builder.cookieJar(sharedPrefCookieJar).build();\n        return client;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10960827,"reputation":41,"user_id":8054191,"display_name":"Marcos Souza"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1584714274,"creation_date":1584714274,"answer_id":60776040,"question_id":34881775,"body_markdown":"You can try it in **Kotlin**:\r\n\r\n    val cookieJar = JavaNetCookieJar(CookieManager())\r\n    val url = &quot;https://www.google.com/&quot;\r\n\r\n    val requestBuilder = Request\r\n            .Builder()\r\n            .url(url)\r\n            .get()\r\n\r\n    val request = requestBuilder\r\n            .build()\r\n\r\n    val response = OkHttpClient.Builder()\r\n            .cookieJar(cookieJar)\r\n            .build()\r\n            .newCall(request)\r\n            .execute()\r\n\r\n**Gradle**\r\n\r\n    dependencies {\r\n        implementation(&quot;com.squareup.okhttp3:okhttp:4.2.2&quot;)\r\n        implementation(&quot;com.squareup.okhttp3:okhttp-urlconnection:4.2.2&quot;)\r\n    }","title":"Automatic cookie handling with OkHttp 3","body":"<p>You can try it in <strong>Kotlin</strong>:</p>\n\n<pre><code>val cookieJar = JavaNetCookieJar(CookieManager())\nval url = \"https://www.google.com/\"\n\nval requestBuilder = Request\n        .Builder()\n        .url(url)\n        .get()\n\nval request = requestBuilder\n        .build()\n\nval response = OkHttpClient.Builder()\n        .cookieJar(cookieJar)\n        .build()\n        .newCall(request)\n        .execute()\n</code></pre>\n\n<p><strong>Gradle</strong></p>\n\n<pre><code>dependencies {\n    implementation(\"com.squareup.okhttp3:okhttp:4.2.2\")\n    implementation(\"com.squareup.okhttp3:okhttp-urlconnection:4.2.2\")\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11502406,"reputation":614,"user_id":8429796,"display_name":"Sayan Manna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589656389,"creation_date":1589656389,"answer_id":61842245,"question_id":34881775,"body_markdown":"**Add implementation &quot;com.squareup.okhttp3:okhttp-urlconnection:3.8.1&quot; into your build.gradle.**\r\n\r\n    var interceptor = HttpLoggingInterceptor().setLevel(HttpLoggingInterceptor.Level.BODY)\r\n    var cookieHandler: CookieHandler = CookieManager()\r\n    \r\n    private var retrofit: Retrofit? = null\r\n    retrofit = Retrofit.Builder()\r\n                            .baseUrl(BASE_URL)\r\n                            .client(client)\r\n                            .addCallAdapterFactory(RxJavaCallAdapterFactory.create())\r\n                            .build()\r\n    \r\n    private val client : OkHttpClient\r\n                private get() {\r\n                    val builder = OkHttpClient.Builder()\r\n                    builder.addNetworkInterceptor(interceptor)\r\n                    builder.cookieJar(JavaNetCookieJar(cookieHandler))\r\n                    builder.connectTimeout(15, TimeUnit.SECONDS)\r\n                    builder.readTimeout(20, TimeUnit.SECONDS)\r\n                    builder.writeTimeout(20, TimeUnit.SECONDS)\r\n                    builder.retryOnConnectionFailure(true)\r\n                    return builder.build()\r\n                }","title":"Automatic cookie handling with OkHttp 3","body":"<p><strong>Add implementation \"com.squareup.okhttp3:okhttp-urlconnection:3.8.1\" into your build.gradle.</strong></p>\n\n<pre><code>var interceptor = HttpLoggingInterceptor().setLevel(HttpLoggingInterceptor.Level.BODY)\nvar cookieHandler: CookieHandler = CookieManager()\n\nprivate var retrofit: Retrofit? = null\nretrofit = Retrofit.Builder()\n                        .baseUrl(BASE_URL)\n                        .client(client)\n                        .addCallAdapterFactory(RxJavaCallAdapterFactory.create())\n                        .build()\n\nprivate val client : OkHttpClient\n            private get() {\n                val builder = OkHttpClient.Builder()\n                builder.addNetworkInterceptor(interceptor)\n                builder.cookieJar(JavaNetCookieJar(cookieHandler))\n                builder.connectTimeout(15, TimeUnit.SECONDS)\n                builder.readTimeout(20, TimeUnit.SECONDS)\n                builder.writeTimeout(20, TimeUnit.SECONDS)\n                builder.retryOnConnectionFailure(true)\n                return builder.build()\n            }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4730901,"reputation":709,"user_id":3826579,"accept_rate":56,"display_name":"Peterstev Uremgba"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630968984,"creation_date":1630968984,"answer_id":69080918,"question_id":34881775,"body_markdown":"if you use Kotlin with dagger or hilt and you inject your Okhttp, you can add \r\n\r\n```implementation &#39;com.squareup.okhttp3:okhttp-urlconnection:4.9.0&#39;```\r\n\r\nI feel the version should be the same as your okhttpclient version.\r\n\r\n```\r\n@Provides\r\n@Singleton\r\nfun providesOkHTTPClient(application: Application): OkHttpClient {\r\n    val cookieManager = CookieManager()\r\n    cookieManager.setCookiePolicy(CookiePolicy.ACCEPT_ALL)\r\n    \r\n    return OkHttpClient.Builder()\r\n        .cookieJar(JavaNetCookieJar(cookieManager))\r\n        .addInterceptor(\r\n            ChuckInterceptor(application)\r\n                .showNotification(true)\r\n                .retainDataFor(ChuckInterceptor.Period.ONE_DAY)\r\n        ).addInterceptor(\r\n            HttpLoggingInterceptor().setLevel(\r\n                if (BuildConfig.DEBUG) HttpLoggingInterceptor.Level.BODY\r\n                else HttpLoggingInterceptor.Level.NONE\r\n            )\r\n        ).build()\r\n}\r\n```\r\n\r\nremember to add the dependency on the same module (data) where you are providing okhttpClient","title":"Automatic cookie handling with OkHttp 3","body":"<p>if you use Kotlin with dagger or hilt and you inject your Okhttp, you can add</p>\n<p><code>implementation 'com.squareup.okhttp3:okhttp-urlconnection:4.9.0'</code></p>\n<p>I feel the version should be the same as your okhttpclient version.</p>\n<pre><code>@Provides\n@Singleton\nfun providesOkHTTPClient(application: Application): OkHttpClient {\n    val cookieManager = CookieManager()\n    cookieManager.setCookiePolicy(CookiePolicy.ACCEPT_ALL)\n    \n    return OkHttpClient.Builder()\n        .cookieJar(JavaNetCookieJar(cookieManager))\n        .addInterceptor(\n            ChuckInterceptor(application)\n                .showNotification(true)\n                .retainDataFor(ChuckInterceptor.Period.ONE_DAY)\n        ).addInterceptor(\n            HttpLoggingInterceptor().setLevel(\n                if (BuildConfig.DEBUG) HttpLoggingInterceptor.Level.BODY\n                else HttpLoggingInterceptor.Level.NONE\n            )\n        ).build()\n}\n</code></pre>\n<p>remember to add the dependency on the same module (data) where you are providing okhttpClient</p>\n"}],"owner":{"account_id":3161882,"reputation":801,"user_id":2672763,"accept_rate":45,"display_name":"user2672763"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82830,"favorite_count":0,"down_vote_count":0,"up_vote_count":57,"accepted_answer_id":34886860,"answer_count":12,"score":57,"last_activity_date":1659558854,"creation_date":1453220385,"question_id":34881775,"body_markdown":"I am using okhttp 3.0.1. \r\n\r\nEvery where I am getting example for cookie handling that is with okhttp2 \r\n\r\n    OkHttpClient client = new OkHttpClient();\r\n    CookieManager cookieManager = new CookieManager();\r\n    cookieManager.setCookiePolicy(CookiePolicy.ACCEPT_ALL);\r\n    client.setCookieHandler(cookieManager);\r\n\r\nCan please some one guide me how to use in version 3. setCookieHandler method is not present in the version 3.","title":"Automatic cookie handling with OkHttp 3","body":"<p>I am using okhttp 3.0.1. </p>\n\n<p>Every where I am getting example for cookie handling that is with okhttp2 </p>\n\n<pre><code>OkHttpClient client = new OkHttpClient();\nCookieManager cookieManager = new CookieManager();\ncookieManager.setCookiePolicy(CookiePolicy.ACCEPT_ALL);\nclient.setCookieHandler(cookieManager);\n</code></pre>\n\n<p>Can please some one guide me how to use in version 3. setCookieHandler method is not present in the version 3.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1369262717,"post_id":16702779,"comment_id":24042632,"body_markdown":"What does `getTemperatureInCelcius` return? It feels like you should be able to provide a short but complete example of this which *just* does formatting, without any of the rest of the code around fetching the temperature etc.","body":"What does <code>getTemperatureInCelcius</code> return? It feels like you should be able to provide a short but complete example of this which <i>just</i> does formatting, without any of the rest of the code around fetching the temperature etc."},{"owner":{"account_id":2477436,"reputation":1968,"user_id":2157772,"accept_rate":100,"display_name":"gparyani"},"score":0,"creation_date":1369263537,"post_id":16702779,"comment_id":24042880,"body_markdown":"In my opinion, don&#39;t use `DecimalFormat`; instead use `String.format()`.","body":"In my opinion, don&#39;t use <code>DecimalFormat</code>; instead use <code>String.format()</code>."},{"owner":{"account_id":81268,"reputation":4716,"user_id":229266,"accept_rate":84,"display_name":"achie"},"score":0,"creation_date":1369273720,"post_id":16702779,"comment_id":24045362,"body_markdown":"Thank you guys for trying to help. the issue was with the ordering of my brackets as mentioned in the accepted answer below.","body":"Thank you guys for trying to help. the issue was with the ordering of my brackets as mentioned in the accepted answer below."}],"answers":[{"tags":[],"owner":{"account_id":976936,"reputation":5609,"user_id":997787,"display_name":"HexAndBugs"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1369263679,"creation_date":1369263196,"answer_id":16702886,"question_id":16702779,"body_markdown":"You need to call\r\n\r\n    mBBTValue.setText(df.format(getTemperatureInCelcius(temperature)) + &quot; &#176;C&quot;);\r\n\r\ninstead of\r\n\r\n    mBBTValue.setText(df.format(getTemperatureInCelcius(temperature) + &quot; &#176;C&quot;));\r\n\r\nNote the different positions of the closing brackets. Your current version appends the `&quot; &#176;C&quot;` before it formats it rather than formatting the number and then appending the `&quot; &#176;C&quot;`.","title":"Formatting a double to String using DecimalFormat is throwing IllegalArgumentException","body":"<p>You need to call</p>\n\n<pre><code>mBBTValue.setText(df.format(getTemperatureInCelcius(temperature)) + \" C\");\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>mBBTValue.setText(df.format(getTemperatureInCelcius(temperature) + \" C\"));\n</code></pre>\n\n<p>Note the different positions of the closing brackets. Your current version appends the <code>\" C\"</code> before it formats it rather than formatting the number and then appending the <code>\" C\"</code>.</p>\n"},{"tags":[],"owner":{"account_id":421105,"reputation":1782,"user_id":799153,"accept_rate":25,"display_name":"Pawan Yadav"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1659558841,"creation_date":1369264850,"answer_id":16703143,"question_id":16702779,"body_markdown":"     // DecimalFormat df = new DecimalFormat(&quot;#.##&quot;, symbols); causing problem\r\n\r\nSee http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html\r\n\r\n&gt; To obtain a NumberFormat for a specific locale, including the default\r\n&gt; locale, call one of NumberFormat&#39;s factory methods, such as\r\n&gt; getInstance(). In general, do not call the DecimalFormat constructors\r\n&gt; directly, since the NumberFormat factory methods may return subclasses\r\n&gt; other than DecimalFormat. If you need to customize the format object,\r\n&gt; do something like this:\r\n&gt; \r\n&gt;     NumberFormat f = NumberFormat.getInstance(loc);  if (f instanceof\r\n&gt;     DecimalFormat) {\r\n&gt;     ((DecimalFormat) f).setDecimalSeparatorAlwaysShown(true);  }   \r\n&gt; A DecimalFormat comprises a pattern and a set of symbols. The pattern\r\n&gt;     may be set directly using applyPattern(), or indirectly using the API\r\n&gt;     methods","title":"Formatting a double to String using DecimalFormat is throwing IllegalArgumentException","body":"<pre><code> // DecimalFormat df = new DecimalFormat(&quot;#.##&quot;, symbols); causing problem\n</code></pre>\n<p>See <a href=\"http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html</a></p>\n<blockquote>\n<p>To obtain a NumberFormat for a specific locale, including the default\nlocale, call one of NumberFormat's factory methods, such as\ngetInstance(). In general, do not call the DecimalFormat constructors\ndirectly, since the NumberFormat factory methods may return subclasses\nother than DecimalFormat. If you need to customize the format object,\ndo something like this:</p>\n<pre><code>NumberFormat f = NumberFormat.getInstance(loc);  if (f instanceof\nDecimalFormat) {\n((DecimalFormat) f).setDecimalSeparatorAlwaysShown(true);  }   \n</code></pre>\n<p>A DecimalFormat comprises a pattern and a set of symbols. The pattern\nmay be set directly using applyPattern(), or indirectly using the API\nmethods</p>\n</blockquote>\n"}],"owner":{"account_id":81268,"reputation":4716,"user_id":229266,"accept_rate":84,"display_name":"achie"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3145,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":16702886,"answer_count":2,"score":2,"last_activity_date":1659558841,"creation_date":1369262516,"question_id":16702779,"body_markdown":"I have an Android application in the market which uses this snippet of code to convert a string to double. The string has validations to check if it is a real decimal value. This is running fine in most cases but throwing an exception occasionally. I am pretty sure this is localization issue and this is being caused on devices not using the US English.\r\n\r\n[In most of the cases I know that value=0.]\r\n\r\nHere is my code. The code in if else block throws the exception.\r\n\r\n    DecimalFormatSymbols symbols = new DecimalFormatSymbols(new Locale(&quot;en&quot;, &quot;en&quot;));\r\n    symbols.setDecimalSeparator(&#39;.&#39;);\r\n    DecimalFormat df = new DecimalFormat(&quot;#.##&quot;, symbols);\r\n    double temperature = Double.valueOf(numberString);\r\n    if (tempUnits.equals(&quot;f&quot;)) {\r\n        mBBTValue.setText(df.format(temperature) + &quot; &#176;F&quot;);\r\n    } else {\r\n        mBBTValue.setText(df.format(getTemperatureInCelcius(temperature) + &quot; &#176;C&quot;));\r\n    }\r\n\r\nThis code is throwing the following exception in some countries.\r\n\r\n    java.lang.IllegalArgumentException\r\n    at java.text.NumberFormat.format(NumberFormat.java:304)\r\n    at java.text.DecimalFormat.format(DecimalFormat.java:702)\r\n    at java.text.Format.format(Format.java:93)\r\n    at com.mysa.DetailsActivity$InitTask.onPostExecute(DayDataDetailsActivity.java:543)\r\n    at com.mysa.DetailsActivity$InitTask.onPostExecute(DayDataDetailsActivity.java:1)\r\n    at android.os.AsyncTask.finish(AsyncTask.java:631)\r\n    at android.os.AsyncTask.access$600(AsyncTask.java:177)\r\n    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)\r\n    at android.os.Handler.dispatchMessage(Handler.java:99)\r\n    at android.os.Looper.loop(Looper.java:213)\r\n    at android.app.ActivityThread.main(ActivityThread.java:4787)\r\n    at java.lang.reflect.Method.invokeNative(Native Method)\r\n    at java.lang.reflect.Method.invoke(Method.java:511)\r\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:809)\r\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:576)\r\n    at dalvik.system.NativeStart.main(Native Method)\r\n\r\nCan someone please explain what I am doing wrong in this code.","title":"Formatting a double to String using DecimalFormat is throwing IllegalArgumentException","body":"<p>I have an Android application in the market which uses this snippet of code to convert a string to double. The string has validations to check if it is a real decimal value. This is running fine in most cases but throwing an exception occasionally. I am pretty sure this is localization issue and this is being caused on devices not using the US English.</p>\n\n<p>[In most of the cases I know that value=0.]</p>\n\n<p>Here is my code. The code in if else block throws the exception.</p>\n\n<pre><code>DecimalFormatSymbols symbols = new DecimalFormatSymbols(new Locale(\"en\", \"en\"));\nsymbols.setDecimalSeparator('.');\nDecimalFormat df = new DecimalFormat(\"#.##\", symbols);\ndouble temperature = Double.valueOf(numberString);\nif (tempUnits.equals(\"f\")) {\n    mBBTValue.setText(df.format(temperature) + \" F\");\n} else {\n    mBBTValue.setText(df.format(getTemperatureInCelcius(temperature) + \" C\"));\n}\n</code></pre>\n\n<p>This code is throwing the following exception in some countries.</p>\n\n<pre><code>java.lang.IllegalArgumentException\nat java.text.NumberFormat.format(NumberFormat.java:304)\nat java.text.DecimalFormat.format(DecimalFormat.java:702)\nat java.text.Format.format(Format.java:93)\nat com.mysa.DetailsActivity$InitTask.onPostExecute(DayDataDetailsActivity.java:543)\nat com.mysa.DetailsActivity$InitTask.onPostExecute(DayDataDetailsActivity.java:1)\nat android.os.AsyncTask.finish(AsyncTask.java:631)\nat android.os.AsyncTask.access$600(AsyncTask.java:177)\nat android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)\nat android.os.Handler.dispatchMessage(Handler.java:99)\nat android.os.Looper.loop(Looper.java:213)\nat android.app.ActivityThread.main(ActivityThread.java:4787)\nat java.lang.reflect.Method.invokeNative(Native Method)\nat java.lang.reflect.Method.invoke(Method.java:511)\nat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:809)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:576)\nat dalvik.system.NativeStart.main(Native Method)\n</code></pre>\n\n<p>Can someone please explain what I am doing wrong in this code.</p>\n"},{"tags":["java","android","module"],"comments":[{"owner":{"account_id":3821169,"reputation":763,"user_id":3169238,"display_name":"Sergei Kozelko"},"score":0,"creation_date":1659628985,"post_id":73227432,"comment_id":129345309,"body_markdown":"[This answer](https://stackoverflow.com/a/16639227/3169238) should solve your question","body":"<a href=\"https://stackoverflow.com/a/16639227/3169238\">This answer</a> should solve your question"},{"owner":{"display_name":"user19662073"},"score":0,"creation_date":1659649443,"post_id":73227432,"comment_id":129351065,"body_markdown":"@SergeiKozelko I said create not add.","body":"@SergeiKozelko I said create not add."}],"owner":{"display_name":"user19662073"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659558655,"creation_date":1659558321,"question_id":73227432,"body_markdown":"Iam using [AndroidIde][1] to create my applications I need to create a library but there is no way to create a module, how can I create a module manually.\r\n\r\n\r\n  [1]: https://androidide.com/","title":"Android - Create a module(library) manually","body":"<p>Iam using <a href=\"https://androidide.com/\" rel=\"nofollow noreferrer\">AndroidIde</a> to create my applications I need to create a library but there is no way to create a module, how can I create a module manually.</p>\n"},{"tags":["java","spring","list","spring-boot","lombok"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1659551551,"post_id":73226177,"comment_id":129323695,"body_markdown":"Sure, if you implement a shared interface.","body":"Sure, if you implement a shared interface."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":2,"creation_date":1659552405,"post_id":73226177,"comment_id":129323955,"body_markdown":"What Louis meant is something like `interface CanCountRows{ Long countOfRows(); }` Now both of your classes should `... implements CanCountRows {...}`. This way your generic method can be declared as `private &lt;T extends CanCountRows&gt; Long fooDooCounts(List&lt;T&gt; list){ ... }` and it can accept List&lt;FooCounts&gt; and List&lt;DooCounts&gt;.","body":"What Louis meant is something like <code>interface CanCountRows{ Long countOfRows(); }</code> Now both of your classes should <code>... implements CanCountRows {...}</code>. This way your generic method can be declared as <code>private &lt;T extends CanCountRows&gt; Long fooDooCounts(List&lt;T&gt; list){ ... }</code> and it can accept List&lt;FooCounts&gt; and List&lt;DooCounts&gt;."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659558175,"creation_date":1659558175,"answer_id":73227399,"question_id":73226177,"body_markdown":"Java is strictly namespaced. The _name_ of a method/field are relevant only insofar as that they exist in the context of a type (hence, in java you can&#39;t define fields or methods outside of a type - because names do not mean anything outside of them), and the name of a type is only meaningful in light of the package it is in.\r\n\r\nIn other words, the actual name of string&#39;s toLowerCase method is `java.lang.String::toLowerCase`.\r\n\r\nThere is no way in java to say &#39;I want to call the toLowerCase method on this object, whatever the type of the object is, regardless of where the method comes from. Long as it is called toLowerCase, call it&#39;. It just doesn&#39;t exist. You can see this in action in class files, where any invocation is necessarily always bound up with a fully qualified name (it would look like `java/lang/String toLowerCase()Ljava/lang/String;` in classfile-ese, but it&#39;s the same principle, just in classfile form).\r\n\r\nThere&#39;s a good reason for this.\r\n\r\nImagine these two types:\r\n\r\n```\r\ninterface Gun {\r\n  void shoot(Person p);\r\n}\r\n\r\ninterface Camera {\r\n  void shoot(Person p);\r\n}\r\n```\r\n\r\nhopefully this illustrates the subtle but serious dangers of allowing you to write, in a programming language &#39;just call `shoot(p)` on this object, whatever it might be, if it has a shoot method, go for it&#39;.\r\n\r\nHence, &#39;can you write code in java that fetches a field of a given name, regardless of what type the objects are, as long as it has a field of some name, just get the data out of it&#39; - the answer is a very very simple: No, you can&#39;t, and you don&#39;t want to - that is not how java is designed to work, and going against the &#39;grain&#39; of how a language wants to be used results in all sorts of maintenance headaches.\r\n\r\nFortunately, it also gives you the strategy to fix the problem: Ensure that the &#39;fetch operation&#39; __is__ the same fully qualified name. How do we do that? By introducing a type that unifies the definition of what `countOfRows` means, and then have your various classes implement it:\r\n\r\n```\r\ninterface RowCounter {\r\n  long countRows();\r\n}\r\n```\r\n\r\nNow we have a uniform definition. You can stick docs on this if you want. Then it is simply a matter of implementing it in your types:\r\n\r\n```\r\nclass FooCount implements RowCounter {\r\n  @Override public long countRows() {\r\n    return countOfRows;\r\n  }\r\n}\r\n```\r\n\r\nBecause now the `countRows` method in your `FooCount` class is in fact just a more specific implementation of `RowCounter::countRows`, the fully qualified name of that method is `com.pkg.RowCounter::countRows`. Thus, you can now invoke it:\r\n\r\n```\r\nlong sum(List&lt;? extends RowCounter&gt; rowCounters) {\r\n  long totalCount = 0;\r\n  for (var r : rowCounters) totalCount += rowCounters.countRows();\r\n  return totalCount;\r\n}\r\n```\r\n\r\nand you can pass a list of FooCounter objects, or a list of BarCounter, or a list of RowCounter, etc.\r\n\r\n","title":"Two lists of different custom types to be passed in the same method as an argument","body":"<p>Java is strictly namespaced. The <em>name</em> of a method/field are relevant only insofar as that they exist in the context of a type (hence, in java you can't define fields or methods outside of a type - because names do not mean anything outside of them), and the name of a type is only meaningful in light of the package it is in.</p>\n<p>In other words, the actual name of string's toLowerCase method is <code>java.lang.String::toLowerCase</code>.</p>\n<p>There is no way in java to say 'I want to call the toLowerCase method on this object, whatever the type of the object is, regardless of where the method comes from. Long as it is called toLowerCase, call it'. It just doesn't exist. You can see this in action in class files, where any invocation is necessarily always bound up with a fully qualified name (it would look like <code>java/lang/String toLowerCase()Ljava/lang/String;</code> in classfile-ese, but it's the same principle, just in classfile form).</p>\n<p>There's a good reason for this.</p>\n<p>Imagine these two types:</p>\n<pre><code>interface Gun {\n  void shoot(Person p);\n}\n\ninterface Camera {\n  void shoot(Person p);\n}\n</code></pre>\n<p>hopefully this illustrates the subtle but serious dangers of allowing you to write, in a programming language 'just call <code>shoot(p)</code> on this object, whatever it might be, if it has a shoot method, go for it'.</p>\n<p>Hence, 'can you write code in java that fetches a field of a given name, regardless of what type the objects are, as long as it has a field of some name, just get the data out of it' - the answer is a very very simple: No, you can't, and you don't want to - that is not how java is designed to work, and going against the 'grain' of how a language wants to be used results in all sorts of maintenance headaches.</p>\n<p>Fortunately, it also gives you the strategy to fix the problem: Ensure that the 'fetch operation' <strong>is</strong> the same fully qualified name. How do we do that? By introducing a type that unifies the definition of what <code>countOfRows</code> means, and then have your various classes implement it:</p>\n<pre><code>interface RowCounter {\n  long countRows();\n}\n</code></pre>\n<p>Now we have a uniform definition. You can stick docs on this if you want. Then it is simply a matter of implementing it in your types:</p>\n<pre><code>class FooCount implements RowCounter {\n  @Override public long countRows() {\n    return countOfRows;\n  }\n}\n</code></pre>\n<p>Because now the <code>countRows</code> method in your <code>FooCount</code> class is in fact just a more specific implementation of <code>RowCounter::countRows</code>, the fully qualified name of that method is <code>com.pkg.RowCounter::countRows</code>. Thus, you can now invoke it:</p>\n<pre><code>long sum(List&lt;? extends RowCounter&gt; rowCounters) {\n  long totalCount = 0;\n  for (var r : rowCounters) totalCount += rowCounters.countRows();\n  return totalCount;\n}\n</code></pre>\n<p>and you can pass a list of FooCounter objects, or a list of BarCounter, or a list of RowCounter, etc.</p>\n"}],"owner":{"account_id":13611919,"reputation":3,"user_id":9819132,"display_name":"Yoki saga"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":219,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73227399,"answer_count":1,"score":0,"last_activity_date":1659558175,"creation_date":1659551379,"question_id":73226177,"body_markdown":"I have two Classes like this:\r\n\r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class FooCounts {\r\n        private Long countOfRows;\r\n    }\r\n\r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class DooCounts {\r\n        private Long countOfRows;\r\n    }\r\n\r\nI created two Lists of the above types and did the following:\r\n\r\n    List&lt;FooCounts&gt; fooCounts = ...; //initialisation doesn&#39;t matter\r\n    List&lt;DooCounts&gt; dooCounts = ...;\r\n    Long countOfRows = 0L;\r\n    \r\n    if(!fooCounts.isEmpty){\r\n        countOfRows = fooCounts.map(FooCounts::getCountOfRows).sum().longValue();\r\n    }\r\n\r\n    if(!dooCounts.isEmpty){\r\n        countOfRows = dooCounts.map(DooCounts::getCountOfRows).sum().longValue();\r\n    }\r\n\r\nIs it possible to make these two &#39;if&#39; blocks as one &#39;if&#39; block by creating a method out of it? I mean something like this:\r\n\r\n    private Long fooDooCounts(List&lt;T&gt; fooDooCounts) {\r\n    if(!fooDooCounts.isEmpty){\r\n        countOfRows = fooDooCounts.map(fooDooCounts::getCountOfRows).sum().longValue();\r\n    }\r\n\r\n ","title":"Two lists of different custom types to be passed in the same method as an argument","body":"<p>I have two Classes like this:</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class FooCounts {\n    private Long countOfRows;\n}\n\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class DooCounts {\n    private Long countOfRows;\n}\n</code></pre>\n<p>I created two Lists of the above types and did the following:</p>\n<pre><code>List&lt;FooCounts&gt; fooCounts = ...; //initialisation doesn't matter\nList&lt;DooCounts&gt; dooCounts = ...;\nLong countOfRows = 0L;\n\nif(!fooCounts.isEmpty){\n    countOfRows = fooCounts.map(FooCounts::getCountOfRows).sum().longValue();\n}\n\nif(!dooCounts.isEmpty){\n    countOfRows = dooCounts.map(DooCounts::getCountOfRows).sum().longValue();\n}\n</code></pre>\n<p>Is it possible to make these two 'if' blocks as one 'if' block by creating a method out of it? I mean something like this:</p>\n<pre><code>private Long fooDooCounts(List&lt;T&gt; fooDooCounts) {\nif(!fooDooCounts.isEmpty){\n    countOfRows = fooDooCounts.map(fooDooCounts::getCountOfRows).sum().longValue();\n}\n</code></pre>\n"},{"tags":["java","gatling","maven-gatling-plugin"],"comments":[{"owner":{"account_id":434266,"reputation":15464,"user_id":820127,"display_name":"rossum"},"score":0,"creation_date":1659554651,"post_id":73225967,"comment_id":129324632,"body_markdown":"You could catch the error and in the error processing code check all feeders to see which one(s) is/are empty. Alternatively, perhaps try running for 5,000 sessions, save where you have got to, close the feeders and restart from the saved position.","body":"You could catch the error and in the error processing code check all feeders to see which one(s) is/are empty. Alternatively, perhaps try running for 5,000 sessions, save where you have got to, close the feeders and restart from the saved position."},{"owner":{"account_id":145509,"reputation":986,"user_id":355364,"accept_rate":67,"display_name":"lpacheco"},"score":0,"creation_date":1659555020,"post_id":73225967,"comment_id":129324764,"body_markdown":"All my feeders are very short, 10-15 lines, and I use `circular()` or `random()` for both of them. I have a custom feeder which generates a random value for each session. I don&#39;t see how any of them could be empty if they run for thousands of sessions before failing.","body":"All my feeders are very short, 10-15 lines, and I use <code>circular()</code> or <code>random()</code> for both of them. I have a custom feeder which generates a random value for each session. I don&#39;t see how any of them could be empty if they run for thousands of sessions before failing."},{"owner":{"account_id":434266,"reputation":15464,"user_id":820127,"display_name":"rossum"},"score":0,"creation_date":1659558493,"post_id":73225967,"comment_id":129325884,"body_markdown":"You don&#39;t see it, but it is better to check. A lot of errors in computer programs are down to something the programmer didn&#39;t see. Been there; done that, too many times! :(","body":"You don&#39;t see it, but it is better to check. A lot of errors in computer programs are down to something the programmer didn&#39;t see. Been there; done that, too many times! :("},{"owner":{"account_id":145509,"reputation":986,"user_id":355364,"accept_rate":67,"display_name":"lpacheco"},"score":0,"creation_date":1659619701,"post_id":73225967,"comment_id":129341489,"body_markdown":"I made another test, commenting the suspect feeder and hardcoding a value for the request that uses it. The simulation still fails with &quot;Feeder empty&quot; and stops failing if I comment just this request. So it doesn&#39;t seem to be a feeder issue, even if the message says so, but the request is a very simple GET to a parameterless URL.","body":"I made another test, commenting the suspect feeder and hardcoding a value for the request that uses it. The simulation still fails with &quot;Feeder empty&quot; and stops failing if I comment just this request. So it doesn&#39;t seem to be a feeder issue, even if the message says so, but the request is a very simple GET to a parameterless URL."}],"answers":[{"tags":[],"owner":{"account_id":6852429,"reputation":6319,"user_id":5269205,"display_name":"St&#233;phane LANDELLE"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659557767,"creation_date":1659557767,"answer_id":73227326,"question_id":73225967,"body_markdown":"You&#39;re not mentioning the version of Gatling you&#39;re using, which might mean you haven&#39;t considered your version might be outdated and a fix might be already available.\r\nThe latest version is 3.8.3. Your issue looks similar to https://github.com/gatling/gatling/issues/4240.\r\n\r\nPlease first upgrade to 3.8.3.\r\nIf you still experience an issue, then please report with a proper [reproducer][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/help/minimal-reproducible-example","title":"My CSV feeder crashes after a few thousand sessions and crashes my Gatling simulation","body":"<p>You're not mentioning the version of Gatling you're using, which might mean you haven't considered your version might be outdated and a fix might be already available.\nThe latest version is 3.8.3. Your issue looks similar to <a href=\"https://github.com/gatling/gatling/issues/4240\" rel=\"nofollow noreferrer\">https://github.com/gatling/gatling/issues/4240</a>.</p>\n<p>Please first upgrade to 3.8.3.\nIf you still experience an issue, then please report with a proper <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">reproducer</a>.</p>\n"}],"owner":{"account_id":145509,"reputation":986,"user_id":355364,"accept_rate":67,"display_name":"lpacheco"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659557767,"creation_date":1659550248,"question_id":73225967,"body_markdown":"I have a Gatling CSV feeder reading in circular mode from a 10 lines file and my simulation crashes after a little more than 6,000 sessions with the message:\r\n\r\n```\r\n[ERROR] i.g.a.Gatling$ - Run crashed\r\njava.lang.IllegalStateException: Feeder crashed: j.l.NullPointerException: Cannot invoke &quot;scala.collection.mutable.Map.toMap(scala.$less$colon$less)&quot; because the return value of &quot;scala.collection.convert.AsScalaExtensions$MapHasAsScala.asScala()&quot; is null\r\n```\r\n\r\nSince this was the last feeder added to the simulation I tried commenting it out and the simulation runs to the end. I then tried leave only the part that uses the feeder and comment everything else and it also worked. Putting it all together made the error return.\r\n\r\nI&#39;m a bit lost on how to debug this. Can you help me?\r\n\r\nI&#39;m running the simulation using `maven-gatling-plugin`.\r\n\r\nUpdate: I&#39;ve tried using a static values instead of retrieving them from a feeder but I still get crashes with &quot;Feeder is now empty&quot;. How can I find *which* feeder is empty?","title":"My CSV feeder crashes after a few thousand sessions and crashes my Gatling simulation","body":"<p>I have a Gatling CSV feeder reading in circular mode from a 10 lines file and my simulation crashes after a little more than 6,000 sessions with the message:</p>\n<pre><code>[ERROR] i.g.a.Gatling$ - Run crashed\njava.lang.IllegalStateException: Feeder crashed: j.l.NullPointerException: Cannot invoke &quot;scala.collection.mutable.Map.toMap(scala.$less$colon$less)&quot; because the return value of &quot;scala.collection.convert.AsScalaExtensions$MapHasAsScala.asScala()&quot; is null\n</code></pre>\n<p>Since this was the last feeder added to the simulation I tried commenting it out and the simulation runs to the end. I then tried leave only the part that uses the feeder and comment everything else and it also worked. Putting it all together made the error return.</p>\n<p>I'm a bit lost on how to debug this. Can you help me?</p>\n<p>I'm running the simulation using <code>maven-gatling-plugin</code>.</p>\n<p>Update: I've tried using a static values instead of retrieving them from a feeder but I still get crashes with &quot;Feeder is now empty&quot;. How can I find <em>which</em> feeder is empty?</p>\n"},{"tags":["java","hash","hashmap","hashcode"],"comments":[{"owner":{"account_id":2180302,"reputation":3139,"user_id":1929959,"accept_rate":0,"display_name":"Mihai8"},"score":0,"creation_date":1359930189,"post_id":14677993,"comment_id":20519681,"body_markdown":"A simple solution is to mapping one key in other hashmap.","body":"A simple solution is to mapping one key in other hashmap."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1550062494,"post_id":14677993,"comment_id":96131170,"body_markdown":"Please dont answer the question in the question. Your edit is interesting, so feel free to post it as an answer.","body":"Please dont answer the question in the question. Your edit is interesting, so feel free to post it as an answer."},{"owner":{"account_id":171134,"reputation":3434,"user_id":398348,"accept_rate":67,"display_name":"likejudo"},"score":0,"creation_date":1594924039,"post_id":14677993,"comment_id":111305031,"body_markdown":"@Crocode wow! the maths behind the answer in the Edit is scintillating. Just wondering whether it works in general for any two integers i and j.","body":"@Crocode wow! the maths behind the answer in the Edit is scintillating. Just wondering whether it works in general for any two integers i and j."},{"owner":{"account_id":171134,"reputation":3434,"user_id":398348,"accept_rate":67,"display_name":"likejudo"},"score":0,"creation_date":1594924699,"post_id":14677993,"comment_id":111305324,"body_markdown":"@Crocode will i and j cycle over if they are multiples of N?","body":"@Crocode will i and j cycle over if they are multiples of N?"},{"owner":{"account_id":59417,"reputation":7474,"user_id":177784,"accept_rate":100,"display_name":"Ashwin Prabhu"},"score":0,"creation_date":1667386379,"post_id":14677993,"comment_id":131153377,"body_markdown":"As simple as:\nmap.put(Map.entry(i, j), a[i][j])","body":"As simple as: map.put(Map.entry(i, j), a[i][j])"}],"answers":[{"tags":[],"owner":{"account_id":17619,"reputation":15368,"user_id":39622,"accept_rate":78,"display_name":"Cyrille Ka"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1359930250,"creation_date":1359930250,"answer_id":14678029,"question_id":14677993,"body_markdown":"Two possibilities. Either use a combined key:\r\n\r\n    class MyKey {\r\n        int firstIndex;\r\n        int secondIndex;\r\n        // important: override hashCode() and equals()\r\n    }\r\n\r\nOr a Map of Map:\r\n \r\n    Map&lt;Integer, Map&lt;Integer, Integer&gt;&gt; myMap;\r\n\r\n\r\n    ","title":"How to create a HashMap with two keys (Key-Pair, Value)?","body":"<p>Two possibilities. Either use a combined key:</p>\n\n<pre><code>class MyKey {\n    int firstIndex;\n    int secondIndex;\n    // important: override hashCode() and equals()\n}\n</code></pre>\n\n<p>Or a Map of Map:</p>\n\n<pre><code>Map&lt;Integer, Map&lt;Integer, Integer&gt;&gt; myMap;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":50030,"reputation":61435,"user_id":149138,"accept_rate":56,"display_name":"BeeOnRope"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1359930685,"creation_date":1359930280,"answer_id":14678035,"question_id":14677993,"body_markdown":"Create a value class that will represent your compound key, such as:\r\n\r\n    class Index2D {\r\n      int first, second;\r\n    \r\n      // overrides equals and hashCode properly here\r\n    }\r\n\r\ntaking care to override `equals()` and `hashCode()` correctly.  If that seems like a lot of work, you might consider some ready made generic containers, such as `Pair` provided by apache commons among others.\r\n\r\nThere are also many [similar questions](https://stackoverflow.com/q/6768963/149138) here, with other ideas, such as using Guava&#39;s [Table](http://docs.guava-libraries.googlecode.com/git-history/v14.0/javadoc/com/google/common/collect/Table.html), although allows the keys to have different types, which might be overkill (in memory use and complexity) in your case since I understand your keys are both integers. ","title":"How to create a HashMap with two keys (Key-Pair, Value)?","body":"<p>Create a value class that will represent your compound key, such as:</p>\n\n<pre><code>class Index2D {\n  int first, second;\n\n  // overrides equals and hashCode properly here\n}\n</code></pre>\n\n<p>taking care to override <code>equals()</code> and <code>hashCode()</code> correctly.  If that seems like a lot of work, you might consider some ready made generic containers, such as <code>Pair</code> provided by apache commons among others.</p>\n\n<p>There are also many <a href=\"https://stackoverflow.com/q/6768963/149138\">similar questions</a> here, with other ideas, such as using Guava's <a href=\"http://docs.guava-libraries.googlecode.com/git-history/v14.0/javadoc/com/google/common/collect/Table.html\" rel=\"nofollow noreferrer\">Table</a>, although allows the keys to have different types, which might be overkill (in memory use and complexity) in your case since I understand your keys are both integers. </p>\n"},{"tags":[],"owner":{"account_id":2168743,"reputation":10044,"user_id":1921273,"display_name":"MrSmith42"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1359930310,"creation_date":1359930310,"answer_id":14678039,"question_id":14677993,"body_markdown":"Use a `Pair` as keys for the `HashMap`. JDK has no Pair, but you can either use a 3rd party libraray such as http://commons.apache.org/lang or write a Pair taype of your own.\r\n","title":"How to create a HashMap with two keys (Key-Pair, Value)?","body":"<p>Use a <code>Pair</code> as keys for the <code>HashMap</code>. JDK has no Pair, but you can either use a 3rd party libraray such as <a href=\"http://commons.apache.org/lang\" rel=\"noreferrer\">http://commons.apache.org/lang</a> or write a Pair taype of your own.</p>\n"},{"tags":[],"owner":{"account_id":299251,"reputation":335905,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"down_vote_count":0,"up_vote_count":216,"is_accepted":true,"score":216,"last_activity_date":1531309059,"creation_date":1359930335,"answer_id":14678042,"question_id":14677993,"body_markdown":"There are several options:\r\n\r\n# 2 dimensions\r\n\r\n## Map of maps\r\n\r\n    Map&lt;Integer, Map&lt;Integer, V&gt;&gt; map = //...\r\n    //...\r\n\r\n    map.get(2).get(5);\r\n\r\n## Wrapper key object\r\n\r\n   \tpublic class Key {\r\n\r\n\t\tprivate final int x;\r\n\t\tprivate final int y;\r\n\t\t\r\n\t\tpublic Key(int x, int y) {\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\t}\r\n\t\t\r\n\t\t@Override\r\n\t\tpublic boolean equals(Object o) {\r\n\t\t\tif (this == o) return true;\r\n\t\t\tif (!(o instanceof Key)) return false;\r\n\t\t\tKey key = (Key) o;\r\n\t\t\treturn x == key.x &amp;&amp; y == key.y;\r\n\t\t}\r\n\t\r\n\t\t@Override\r\n\t\tpublic int hashCode() {\r\n\t\t\tint result = x;\r\n\t\t\tresult = 31 * result + y;\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t}\r\n\r\nImplementing `equals()` and `hashCode()` is crucial here. Then you simply use:\r\n\r\n    Map&lt;Key, V&gt; map = //...\r\n\r\nand:\r\n\r\n    map.get(new Key(2, 5));\r\n\r\n\r\n## [`Table`](https://github.com/google/guava/wiki/NewCollectionTypesExplained#table) from Guava\r\n\r\n    Table&lt;Integer, Integer, V&gt; table = HashBasedTable.create();\r\n    //...\r\n\r\n    table.get(2, 5);\r\n\r\n`Table` uses *map of maps* underneath.\r\n\r\n# N dimensions\r\n\r\nNotice that special `Key` class is the only approach that scales to n-dimensions. You might also consider:\r\n\r\n    Map&lt;List&lt;Integer&gt;, V&gt; map = //...\r\n\r\nbut that&#39;s terrible from performance perspective, as well as readability and correctness (no easy way to enforce list size).\r\n\r\nMaybe take a look at Scala where you have tuples and `case` classes (replacing whole `Key` class with one-liner).\r\n","title":"How to create a HashMap with two keys (Key-Pair, Value)?","body":"<p>There are several options:</p>\n\n<h1>2 dimensions</h1>\n\n<h2>Map of maps</h2>\n\n<pre><code>Map&lt;Integer, Map&lt;Integer, V&gt;&gt; map = //...\n//...\n\nmap.get(2).get(5);\n</code></pre>\n\n<h2>Wrapper key object</h2>\n\n<pre><code>public class Key {\n\n    private final int x;\n    private final int y;\n\n    public Key(int x, int y) {\n        this.x = x;\n        this.y = y;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (!(o instanceof Key)) return false;\n        Key key = (Key) o;\n        return x == key.x &amp;&amp; y == key.y;\n    }\n\n    @Override\n    public int hashCode() {\n        int result = x;\n        result = 31 * result + y;\n        return result;\n    }\n\n}\n</code></pre>\n\n<p>Implementing <code>equals()</code> and <code>hashCode()</code> is crucial here. Then you simply use:</p>\n\n<pre><code>Map&lt;Key, V&gt; map = //...\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>map.get(new Key(2, 5));\n</code></pre>\n\n<h2><a href=\"https://github.com/google/guava/wiki/NewCollectionTypesExplained#table\" rel=\"noreferrer\"><code>Table</code></a> from Guava</h2>\n\n<pre><code>Table&lt;Integer, Integer, V&gt; table = HashBasedTable.create();\n//...\n\ntable.get(2, 5);\n</code></pre>\n\n<p><code>Table</code> uses <em>map of maps</em> underneath.</p>\n\n<h1>N dimensions</h1>\n\n<p>Notice that special <code>Key</code> class is the only approach that scales to n-dimensions. You might also consider:</p>\n\n<pre><code>Map&lt;List&lt;Integer&gt;, V&gt; map = //...\n</code></pre>\n\n<p>but that's terrible from performance perspective, as well as readability and correctness (no easy way to enforce list size).</p>\n\n<p>Maybe take a look at Scala where you have tuples and <code>case</code> classes (replacing whole <code>Key</code> class with one-liner).</p>\n"},{"tags":[],"owner":{"account_id":180792,"reputation":9123,"user_id":414345,"accept_rate":86,"display_name":"Brad"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1360130327,"creation_date":1359930336,"answer_id":14678043,"question_id":14677993,"body_markdown":"You can&#39;t have an hash map with multiple keys, but you can have an object that takes multiple parameters as the key. \r\n\r\nCreate an object called Index that takes an x and y value. \r\n\r\n    public class Index {\r\n        \r\n        private int x;\r\n        private int y;\r\n        \r\n        public Index(int x, int y) {\r\n            this.x = x;\r\n            this.y = y;\r\n        }\r\n\r\n        @Override\r\n        public int hashCode() {\r\n            return this.x ^ this.y;\r\n        }\r\n\r\n        @Override\r\n        public boolean equals(Object obj) {\r\n            if (this == obj)\r\n                return true;\r\n            if (obj == null)\r\n                return false;\r\n            if (getClass() != obj.getClass())\r\n                return false;\r\n            Index other = (Index) obj;\r\n            if (x != other.x)\r\n                return false;\r\n            if (y != other.y)\r\n                return false;\r\n            return true;\r\n        }\r\n    }\r\n\r\nThen have your `HashMap&lt;Index, Value&gt;` to get your result. :)","title":"How to create a HashMap with two keys (Key-Pair, Value)?","body":"<p>You can't have an hash map with multiple keys, but you can have an object that takes multiple parameters as the key. </p>\n\n<p>Create an object called Index that takes an x and y value. </p>\n\n<pre><code>public class Index {\n\n    private int x;\n    private int y;\n\n    public Index(int x, int y) {\n        this.x = x;\n        this.y = y;\n    }\n\n    @Override\n    public int hashCode() {\n        return this.x ^ this.y;\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        if (this == obj)\n            return true;\n        if (obj == null)\n            return false;\n        if (getClass() != obj.getClass())\n            return false;\n        Index other = (Index) obj;\n        if (x != other.x)\n            return false;\n        if (y != other.y)\n            return false;\n        return true;\n    }\n}\n</code></pre>\n\n<p>Then have your <code>HashMap&lt;Index, Value&gt;</code> to get your result. :)</p>\n"},{"tags":[],"owner":{"account_id":1706172,"reputation":5977,"user_id":1565171,"display_name":"arutaku"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1403604208,"creation_date":1359930594,"answer_id":14678090,"question_id":14677993,"body_markdown":"If they are two integers you can try a quick and dirty trick: `Map&lt;String, ?&gt;` using the key as `i+&quot;#&quot;+j`.\r\n\r\nIf the key `i+&quot;#&quot;+j` is the same as `j+&quot;#&quot;+i` try `min(i,j)+&quot;#&quot;+max(i,j)`.","title":"How to create a HashMap with two keys (Key-Pair, Value)?","body":"<p>If they are two integers you can try a quick and dirty trick: <code>Map&lt;String, ?&gt;</code> using the key as <code>i+\"#\"+j</code>.</p>\n\n<p>If the key <code>i+\"#\"+j</code> is the same as <code>j+\"#\"+i</code> try <code>min(i,j)+\"#\"+max(i,j)</code>.</p>\n"},{"tags":[],"owner":{"account_id":5316347,"reputation":331,"user_id":4241121,"display_name":"chrixle"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1659557163,"creation_date":1416258149,"answer_id":26981910,"question_id":14677993,"body_markdown":"When you create your own key pair object, you should face a few thing.\r\n\r\nFirst, you should be aware of implementing `hashCode()` and `equals()`. You will need to do this.\r\n\r\nSecond, when implementing `hashCode()`, make sure you understand how it works. The given user example\r\n\r\n    public int hashCode() {\r\n        return this.x ^ this.y;\r\n    }\r\n\r\nis actually one of the worst implementations you can do. The reason is simple: you have a lot of equal hashes! And the `hashCode()` should return int values that tend to be rare, unique at it&#39;s best. Use something like this:\r\n\r\n    public int hashCode() {\r\n      return (X &lt;&lt; 16) + Y;\r\n    }\r\n\r\nThis is fast and returns unique hashes for keys between -2^16 and 2^16-1 (-65536 to 65535). This fits in almost any case. Very rarely you are out of this bounds.\r\n\r\nThird, when implementing `equals()` also know what it is used for and be aware of how you create your keys, since they are objects. Often you do unnecessary if statements cause you will always have the same result.\r\n\r\nIf you create keys like this: `map.put(new Key(x,y),V);` you will never compare the references of your keys. Cause everytime you want to acces the map, you will do something like `map.get(new Key(x,y));`. Therefore your `equals()` does not need a statement like `if (this == obj)`. It will **never** occur.\r\n\r\nInstead of `if (getClass() != obj.getClass())` in your `equals()` better use `if (!(obj instanceof this))`. It will be valid even for subclasses.\r\n\r\nSo the only thing you need to compare is actually X and Y. So the best `equals()` implementation in this case would be:\r\n\r\n    public boolean equals (final Object O) {\r\n      if (!(O instanceof Key)) return false;\r\n      if (((Key) O).X != X) return false;\r\n      if (((Key) O).Y != Y) return false;\r\n      return true;\r\n    }\r\n\r\nSo in the end your key class is like this:\r\n\r\n    public class Key {\r\n    \r\n      public final int X;\r\n      public final int Y;\r\n    \r\n      public Key(final int X, final int Y) {\r\n        this.X = X;\r\n        this.Y = Y;\r\n      }\r\n    \r\n      public boolean equals (final Object O) {\r\n        if (!(O instanceof Key)) return false;\r\n        if (((Key) O).X != X) return false;\r\n        if (((Key) O).Y != Y) return false;\r\n        return true;\r\n      }\r\n    \r\n      public int hashCode() {\r\n        return (X &lt;&lt; 16) + Y;\r\n      }\r\n        \r\n    }\r\n\r\nYou can give your dimension indices `X` and `Y` a public access level, due to the fact they are final and do not contain sensitive information. I&#39;m not a 100% sure whether `private` access level works correctly in **any** case when casting the `Object` to a `Key`.\r\n\r\nIf you wonder about the finals, I declare anything as final which value is set on instancing and never changes - and therefore is an object constant.","title":"How to create a HashMap with two keys (Key-Pair, Value)?","body":"<p>When you create your own key pair object, you should face a few thing.</p>\n<p>First, you should be aware of implementing <code>hashCode()</code> and <code>equals()</code>. You will need to do this.</p>\n<p>Second, when implementing <code>hashCode()</code>, make sure you understand how it works. The given user example</p>\n<pre><code>public int hashCode() {\n    return this.x ^ this.y;\n}\n</code></pre>\n<p>is actually one of the worst implementations you can do. The reason is simple: you have a lot of equal hashes! And the <code>hashCode()</code> should return int values that tend to be rare, unique at it's best. Use something like this:</p>\n<pre><code>public int hashCode() {\n  return (X &lt;&lt; 16) + Y;\n}\n</code></pre>\n<p>This is fast and returns unique hashes for keys between -2^16 and 2^16-1 (-65536 to 65535). This fits in almost any case. Very rarely you are out of this bounds.</p>\n<p>Third, when implementing <code>equals()</code> also know what it is used for and be aware of how you create your keys, since they are objects. Often you do unnecessary if statements cause you will always have the same result.</p>\n<p>If you create keys like this: <code>map.put(new Key(x,y),V);</code> you will never compare the references of your keys. Cause everytime you want to acces the map, you will do something like <code>map.get(new Key(x,y));</code>. Therefore your <code>equals()</code> does not need a statement like <code>if (this == obj)</code>. It will <strong>never</strong> occur.</p>\n<p>Instead of <code>if (getClass() != obj.getClass())</code> in your <code>equals()</code> better use <code>if (!(obj instanceof this))</code>. It will be valid even for subclasses.</p>\n<p>So the only thing you need to compare is actually X and Y. So the best <code>equals()</code> implementation in this case would be:</p>\n<pre><code>public boolean equals (final Object O) {\n  if (!(O instanceof Key)) return false;\n  if (((Key) O).X != X) return false;\n  if (((Key) O).Y != Y) return false;\n  return true;\n}\n</code></pre>\n<p>So in the end your key class is like this:</p>\n<pre><code>public class Key {\n\n  public final int X;\n  public final int Y;\n\n  public Key(final int X, final int Y) {\n    this.X = X;\n    this.Y = Y;\n  }\n\n  public boolean equals (final Object O) {\n    if (!(O instanceof Key)) return false;\n    if (((Key) O).X != X) return false;\n    if (((Key) O).Y != Y) return false;\n    return true;\n  }\n\n  public int hashCode() {\n    return (X &lt;&lt; 16) + Y;\n  }\n    \n}\n</code></pre>\n<p>You can give your dimension indices <code>X</code> and <code>Y</code> a public access level, due to the fact they are final and do not contain sensitive information. I'm not a 100% sure whether <code>private</code> access level works correctly in <strong>any</strong> case when casting the <code>Object</code> to a <code>Key</code>.</p>\n<p>If you wonder about the finals, I declare anything as final which value is set on instancing and never changes - and therefore is an object constant.</p>\n"},{"tags":[],"owner":{"account_id":201558,"reputation":20189,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1559800167,"creation_date":1416904421,"answer_id":27121923,"question_id":14677993,"body_markdown":"Implemented in common-collections [MultiKeyMap](https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/map/MultiKeyMap.html)","title":"How to create a HashMap with two keys (Key-Pair, Value)?","body":"<p>Implemented in common-collections <a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/map/MultiKeyMap.html\" rel=\"nofollow noreferrer\">MultiKeyMap</a></p>\n"},{"tags":[],"owner":{"account_id":3954273,"reputation":89,"user_id":3263402,"display_name":"Andy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1494437365,"creation_date":1424807933,"answer_id":28705126,"question_id":14677993,"body_markdown":"You could create your key object something like this:\r\n\r\npublic class MapKey {\r\n\r\n    public  Object key1;\r\n    public Object key2;\r\n\r\n    public Object getKey1() {\r\n        return key1;\r\n    }\r\n\r\n    public void setKey1(Object key1) {\r\n        this.key1 = key1;\r\n    }\r\n\r\n    public Object getKey2() {\r\n        return key2;\r\n    }\r\n\r\n    public void setKey2(Object key2) {\r\n        this.key2 = key2;\r\n    }\r\n\r\n    public boolean equals(Object keyObject){\r\n\r\n        if(keyObject==null)\r\n            return false;\r\n\r\n        if (keyObject.getClass()!= MapKey.class)\r\n            return false;\r\n\r\n        MapKey key = (MapKey)keyObject;\r\n\r\n        if(key.key1!=null &amp;&amp; this.key1==null)\r\n            return false;\r\n\r\n        if(key.key2 !=null &amp;&amp; this.key2==null)\r\n            return false;\r\n\r\n        if(this.key1==null &amp;&amp; key.key1 !=null)\r\n            return false;\r\n\r\n        if(this.key2==null &amp;&amp; key.key2 !=null)\r\n            return false;\r\n\r\n        if(this.key1==null &amp;&amp; key.key1==null &amp;&amp; this.key2 !=null &amp;&amp; key.key2 !=null)\r\n            return this.key2.equals(key.key2);\r\n\r\n        if(this.key2==null &amp;&amp; key.key2==null &amp;&amp; this.key1 !=null &amp;&amp; key.key1 !=null)\r\n            return this.key1.equals(key.key1);\r\n\r\n        return (this.key1.equals(key.key1) &amp;&amp; this.key2.equals(key2));\r\n    }\r\n\r\n    public int hashCode(){\r\n        int key1HashCode=key1.hashCode();\r\n        int key2HashCode=key2.hashCode();\r\n        return key1HashCode &gt;&gt; 3 + key2HashCode &lt;&lt; 5;\r\n    }\r\n}\r\n\r\nThe advantage of this is: It will always make sure you are covering all the scenario&#39;s of Equals as well.\r\n\r\n**NOTE**: Your key1 and key2 should be immutable. Only then will you be able to construct a stable key Object.\r\n","title":"How to create a HashMap with two keys (Key-Pair, Value)?","body":"<p>You could create your key object something like this:</p>\n\n<p>public class MapKey {</p>\n\n<pre><code>public  Object key1;\npublic Object key2;\n\npublic Object getKey1() {\n    return key1;\n}\n\npublic void setKey1(Object key1) {\n    this.key1 = key1;\n}\n\npublic Object getKey2() {\n    return key2;\n}\n\npublic void setKey2(Object key2) {\n    this.key2 = key2;\n}\n\npublic boolean equals(Object keyObject){\n\n    if(keyObject==null)\n        return false;\n\n    if (keyObject.getClass()!= MapKey.class)\n        return false;\n\n    MapKey key = (MapKey)keyObject;\n\n    if(key.key1!=null &amp;&amp; this.key1==null)\n        return false;\n\n    if(key.key2 !=null &amp;&amp; this.key2==null)\n        return false;\n\n    if(this.key1==null &amp;&amp; key.key1 !=null)\n        return false;\n\n    if(this.key2==null &amp;&amp; key.key2 !=null)\n        return false;\n\n    if(this.key1==null &amp;&amp; key.key1==null &amp;&amp; this.key2 !=null &amp;&amp; key.key2 !=null)\n        return this.key2.equals(key.key2);\n\n    if(this.key2==null &amp;&amp; key.key2==null &amp;&amp; this.key1 !=null &amp;&amp; key.key1 !=null)\n        return this.key1.equals(key.key1);\n\n    return (this.key1.equals(key.key1) &amp;&amp; this.key2.equals(key2));\n}\n\npublic int hashCode(){\n    int key1HashCode=key1.hashCode();\n    int key2HashCode=key2.hashCode();\n    return key1HashCode &gt;&gt; 3 + key2HashCode &lt;&lt; 5;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>The advantage of this is: It will always make sure you are covering all the scenario's of Equals as well.</p>\n\n<p><strong>NOTE</strong>: Your key1 and key2 should be immutable. Only then will you be able to construct a stable key Object.</p>\n"},{"tags":[],"owner":{"account_id":2659061,"reputation":1852,"user_id":2299149,"accept_rate":100,"display_name":"slisnychyi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1481720164,"creation_date":1481720164,"answer_id":41143230,"question_id":14677993,"body_markdown":"You can also use **guava Table** implementation for this.\r\n\r\nTable represents a special map where two keys can be specified in combined fashion to refer to a single value. It is similar to creating a map of maps.\r\n\r\n    //create a table\r\n      Table&lt;String, String, String&gt; employeeTable = HashBasedTable.create();\r\n\r\n      //initialize the table with employee details\r\n      employeeTable.put(&quot;IBM&quot;, &quot;101&quot;,&quot;Mahesh&quot;);\r\n      employeeTable.put(&quot;IBM&quot;, &quot;102&quot;,&quot;Ramesh&quot;);\r\n      employeeTable.put(&quot;IBM&quot;, &quot;103&quot;,&quot;Suresh&quot;);\r\n\r\n      employeeTable.put(&quot;Microsoft&quot;, &quot;111&quot;,&quot;Sohan&quot;);\r\n      employeeTable.put(&quot;Microsoft&quot;, &quot;112&quot;,&quot;Mohan&quot;);\r\n      employeeTable.put(&quot;Microsoft&quot;, &quot;113&quot;,&quot;Rohan&quot;);\r\n\r\n      employeeTable.put(&quot;TCS&quot;, &quot;121&quot;,&quot;Ram&quot;);\r\n      employeeTable.put(&quot;TCS&quot;, &quot;122&quot;,&quot;Shyam&quot;);\r\n      employeeTable.put(&quot;TCS&quot;, &quot;123&quot;,&quot;Sunil&quot;);\r\n\r\n      //get Map corresponding to IBM\r\n      Map&lt;String,String&gt; ibmEmployees =  employeeTable.row(&quot;IBM&quot;);","title":"How to create a HashMap with two keys (Key-Pair, Value)?","body":"<p>You can also use <strong>guava Table</strong> implementation for this.</p>\n\n<p>Table represents a special map where two keys can be specified in combined fashion to refer to a single value. It is similar to creating a map of maps.</p>\n\n<pre><code>//create a table\n  Table&lt;String, String, String&gt; employeeTable = HashBasedTable.create();\n\n  //initialize the table with employee details\n  employeeTable.put(\"IBM\", \"101\",\"Mahesh\");\n  employeeTable.put(\"IBM\", \"102\",\"Ramesh\");\n  employeeTable.put(\"IBM\", \"103\",\"Suresh\");\n\n  employeeTable.put(\"Microsoft\", \"111\",\"Sohan\");\n  employeeTable.put(\"Microsoft\", \"112\",\"Mohan\");\n  employeeTable.put(\"Microsoft\", \"113\",\"Rohan\");\n\n  employeeTable.put(\"TCS\", \"121\",\"Ram\");\n  employeeTable.put(\"TCS\", \"122\",\"Shyam\");\n  employeeTable.put(\"TCS\", \"123\",\"Sunil\");\n\n  //get Map corresponding to IBM\n  Map&lt;String,String&gt; ibmEmployees =  employeeTable.row(\"IBM\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10976907,"reputation":11,"user_id":8065321,"display_name":"Vikas Pal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1495719229,"creation_date":1495719229,"answer_id":44181931,"question_id":14677993,"body_markdown":"we can create a class to pass more than one key or value and the object of this class can be used as a parameter in map.\r\n\r\n    import java.io.BufferedReader; \r\n    import java.io.FileReader;\r\n    import java.io.IOException;\r\n    import java.util.*;\r\n   \r\n     public class key1 {\r\n\t\tString b;\r\n\t\tString a;\r\n\t\tkey1(String a,String b)\r\n\t\t{\r\n\t\t\tthis.a=a;\r\n\t\t\tthis.b=b;\r\n\t\t}\r\n      }\r\n\r\n    public class read2 {\r\n\r\n\tprivate static final String FILENAME = &quot;E:/studies/JAVA/ReadFile_Project/nn.txt&quot;;\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tBufferedReader br = null;\r\n\t\tFileReader fr = null;\r\n\t\tMap&lt;key1,String&gt; map=new HashMap&lt;key1,String&gt;();\r\n\t\ttry {\r\n\r\n\t\t\tfr = new FileReader(FILENAME);\r\n\t\t\tbr = new BufferedReader(fr);\r\n\r\n\t\t\tString sCurrentLine;\r\n\r\n\t\t\tbr = new BufferedReader(new FileReader(FILENAME));\r\n\r\n\t\t\twhile ((sCurrentLine = br.readLine()) != null) {\r\n\t\t\t\tString[] s1 = sCurrentLine.split(&quot;,&quot;);\r\n\t\t\t\tkey1 k1 = new key1(s1[0],s1[2]);\r\n\t\t\t\tmap.put(k1,s1[2]);\r\n\t\t\t}\r\n\t\t\tfor(Map.Entry&lt;key1,String&gt; m:map.entrySet()){  \r\n\t\t\t\tkey1 key = m.getKey();\r\n\t\t\t\tString s3 = m.getValue();\r\n\t\t\t\t   System.out.println(key.a+&quot;,&quot;+key.b+&quot; : &quot;+s3);  \r\n\t\t\t\t  }  \r\n      //\t\t\t}\t\r\n\t    \t} catch (IOException e) {\r\n\r\n\t\t\te.printStackTrace();\r\n\r\n\t\t} finally {\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tif (br != null)\r\n\t\t\t\t\tbr.close();\r\n\r\n\t\t\t\tif (fr != null)\r\n\t\t\t\t\tfr.close();\r\n\r\n\t\t\t} catch (IOException ex) {\r\n\r\n\t\t\t\tex.printStackTrace();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n    \t}\r\n\r\n     }","title":"How to create a HashMap with two keys (Key-Pair, Value)?","body":"<p>we can create a class to pass more than one key or value and the object of this class can be used as a parameter in map.</p>\n\n<pre><code>import java.io.BufferedReader; \nimport java.io.FileReader;\nimport java.io.IOException;\nimport java.util.*;\n\n public class key1 {\n    String b;\n    String a;\n    key1(String a,String b)\n    {\n        this.a=a;\n        this.b=b;\n    }\n  }\n\npublic class read2 {\n\nprivate static final String FILENAME = \"E:/studies/JAVA/ReadFile_Project/nn.txt\";\n\npublic static void main(String[] args) {\n\n    BufferedReader br = null;\n    FileReader fr = null;\n    Map&lt;key1,String&gt; map=new HashMap&lt;key1,String&gt;();\n    try {\n\n        fr = new FileReader(FILENAME);\n        br = new BufferedReader(fr);\n\n        String sCurrentLine;\n\n        br = new BufferedReader(new FileReader(FILENAME));\n\n        while ((sCurrentLine = br.readLine()) != null) {\n            String[] s1 = sCurrentLine.split(\",\");\n            key1 k1 = new key1(s1[0],s1[2]);\n            map.put(k1,s1[2]);\n        }\n        for(Map.Entry&lt;key1,String&gt; m:map.entrySet()){  \n            key1 key = m.getKey();\n            String s3 = m.getValue();\n               System.out.println(key.a+\",\"+key.b+\" : \"+s3);  \n              }  \n  //            }   \n        } catch (IOException e) {\n\n        e.printStackTrace();\n\n    } finally {\n\n        try {\n\n            if (br != null)\n                br.close();\n\n            if (fr != null)\n                fr.close();\n\n        } catch (IOException ex) {\n\n            ex.printStackTrace();\n\n        }\n\n    }\n\n    }\n\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15510216,"reputation":36,"user_id":11189151,"display_name":"VISHAL SINGH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1566293451,"creation_date":1566293451,"answer_id":57570632,"question_id":14677993,"body_markdown":"You can download it from the below link:\r\nhttps://github.com/VVS279/DoubleKeyHashMap/blob/master/src/com/virtualMark/doubleKeyHashMap/DoubleKeyHashMap.java\r\n\r\nhttps://github.com/VVS279/DoubleKeyHashMap\r\n\r\nYou can use double key: value hashmap,\r\n```\r\n   DoubleKeyHashMap&lt;Integer, Integer, String&gt; doubleKeyHashMap1 = new \r\n   DoubleKeyHashMap&lt;Integer, Integer, String&gt;();\r\n\r\n   DoubleKeyHashMap&lt;String, String, String&gt; doubleKeyHashMap2 = new \r\n   DoubleKeyHashMap&lt;String, String, String&gt;();\r\n```","title":"How to create a HashMap with two keys (Key-Pair, Value)?","body":"<p>You can download it from the below link:\n<a href=\"https://github.com/VVS279/DoubleKeyHashMap/blob/master/src/com/virtualMark/doubleKeyHashMap/DoubleKeyHashMap.java\" rel=\"nofollow noreferrer\">https://github.com/VVS279/DoubleKeyHashMap/blob/master/src/com/virtualMark/doubleKeyHashMap/DoubleKeyHashMap.java</a></p>\n\n<p><a href=\"https://github.com/VVS279/DoubleKeyHashMap\" rel=\"nofollow noreferrer\">https://github.com/VVS279/DoubleKeyHashMap</a></p>\n\n<p>You can use double key: value hashmap,</p>\n\n<pre><code>   DoubleKeyHashMap&lt;Integer, Integer, String&gt; doubleKeyHashMap1 = new \n   DoubleKeyHashMap&lt;Integer, Integer, String&gt;();\n\n   DoubleKeyHashMap&lt;String, String, String&gt; doubleKeyHashMap2 = new \n   DoubleKeyHashMap&lt;String, String, String&gt;();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1200563,"reputation":313,"user_id":1171313,"accept_rate":85,"display_name":"Rajat"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1654047165,"creation_date":1627876220,"answer_id":68616154,"question_id":14677993,"body_markdown":"Java 7+ contains a new [`Map.Entry&lt;K,V&gt;`][1] class that you can use as key for your map (or entry for your set). Java 9+ also contains a `Map.entry(K k, V v)` method to easily create new `Map.Entry` objects.\r\n\r\nUsage:\r\n\r\n    Map&lt;Map.Entry&lt;Integer,Integer&gt;, Integer&gt; map = new HashMap&lt;&gt;();\r\n    map.put(Map.entry(1, 2), 0);\r\n\r\nThere is also [`Pair&lt;K, V&gt;`](https://docs.oracle.com/javase/9/docs/api/javafx/util/Pair.html) in javafx.util\r\n\r\n    Map&lt;Pair&lt;Integer,Integer&gt;, Integer&gt; map = new HashMap&lt;&gt;();\r\n    map.put(new Pair(1, 2), 0);\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/Map.Entry.html","title":"How to create a HashMap with two keys (Key-Pair, Value)?","body":"<p>Java 7+ contains a new <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Map.Entry.html\" rel=\"nofollow noreferrer\"><code>Map.Entry&lt;K,V&gt;</code></a> class that you can use as key for your map (or entry for your set). Java 9+ also contains a <code>Map.entry(K k, V v)</code> method to easily create new <code>Map.Entry</code> objects.</p>\n<p>Usage:</p>\n<pre><code>Map&lt;Map.Entry&lt;Integer,Integer&gt;, Integer&gt; map = new HashMap&lt;&gt;();\nmap.put(Map.entry(1, 2), 0);\n</code></pre>\n<p>There is also <a href=\"https://docs.oracle.com/javase/9/docs/api/javafx/util/Pair.html\" rel=\"nofollow noreferrer\"><code>Pair&lt;K, V&gt;</code></a> in javafx.util</p>\n<pre><code>Map&lt;Pair&lt;Integer,Integer&gt;, Integer&gt; map = new HashMap&lt;&gt;();\nmap.put(new Pair(1, 2), 0);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13258666,"reputation":326,"user_id":9573943,"display_name":"Inanc Cakil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640116789,"creation_date":1640116789,"answer_id":70440980,"question_id":14677993,"body_markdown":"Using org.apache.commons.lang3.tuple.Pair is very easy;\r\n\r\n       Map&lt;String, Pair&lt;String, Integer&gt;&gt; map= new HashMap&lt;&gt;(); \r\n       map.put(&quot;key&quot;, Pair.of(&quot;a&quot;, 1)); \r\n       int value = map.get(&quot;key&quot;).getRight();\r\n       \r\n","title":"How to create a HashMap with two keys (Key-Pair, Value)?","body":"<p>Using org.apache.commons.lang3.tuple.Pair is very easy;</p>\n<pre><code>   Map&lt;String, Pair&lt;String, Integer&gt;&gt; map= new HashMap&lt;&gt;(); \n   map.put(&quot;key&quot;, Pair.of(&quot;a&quot;, 1)); \n   int value = map.get(&quot;key&quot;).getRight();\n   \n</code></pre>\n"}],"owner":{"account_id":1823790,"reputation":3076,"user_id":1657180,"accept_rate":78,"display_name":"Crocode"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":231910,"favorite_count":0,"down_vote_count":0,"up_vote_count":138,"accepted_answer_id":14678042,"answer_count":14,"score":138,"last_activity_date":1659557163,"creation_date":1359930057,"question_id":14677993,"body_markdown":"I have a 2D array of Integers. I want them to be put into a HashMap. But I want to access the elements from the HashMap based on Array Index. Something like:\r\n\r\nFor A[2][5], `map.get(2,5)` which returns a value associated with that key. But how do I create a hashMap with a pair of keys? Or in general, multiple keys: `Map&lt;((key1, key2,..,keyN), Value)` in a way that I can access the element with using get(key1,key2,...keyN).\r\n \r\n\r\n**EDIT :  3 years after posting the question, I want to add a bit more to it**\r\n\r\nI came across another way for `NxN matrix`. \r\n\r\nArray indices, `i` and `j` can be represented as a single `key` the following way:\r\n\r\n    int key = i * N + j;\r\n    //map.put(key, a[i][j]); // queue.add(key); \r\n\r\nAnd the indices can be retrevied from the `key` in this way:\r\n\r\n    int i = key / N;\r\n    int j = key % N;\r\n\r\n\r\n\r\n","title":"How to create a HashMap with two keys (Key-Pair, Value)?","body":"<p>I have a 2D array of Integers. I want them to be put into a HashMap. But I want to access the elements from the HashMap based on Array Index. Something like:</p>\n\n<p>For A[2][5], <code>map.get(2,5)</code> which returns a value associated with that key. But how do I create a hashMap with a pair of keys? Or in general, multiple keys: <code>Map&lt;((key1, key2,..,keyN), Value)</code> in a way that I can access the element with using get(key1,key2,...keyN).</p>\n\n<p><strong>EDIT :  3 years after posting the question, I want to add a bit more to it</strong></p>\n\n<p>I came across another way for <code>NxN matrix</code>. </p>\n\n<p>Array indices, <code>i</code> and <code>j</code> can be represented as a single <code>key</code> the following way:</p>\n\n<pre><code>int key = i * N + j;\n//map.put(key, a[i][j]); // queue.add(key); \n</code></pre>\n\n<p>And the indices can be retrevied from the <code>key</code> in this way:</p>\n\n<pre><code>int i = key / N;\nint j = key % N;\n</code></pre>\n"},{"tags":["java","android","android-fragments","navigation-drawer","android-menu"],"answers":[{"tags":[],"owner":{"account_id":10041863,"reputation":1,"user_id":7424433,"display_name":"Manpreet Singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659520597,"creation_date":1659520597,"answer_id":73219703,"question_id":73219461,"body_markdown":"Can set manually -\r\n\r\n    `drawerToggle.setToolbarNavigationClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    mDrawer.openDrawer(GravityCompat.START);\r\n                }\r\n         });`\r\n\r\nor can try this \r\n`mDrawerToggle.syncState();`\r\n\r\n","title":"Different action menu items for each fragment with same navigation drawer in Android","body":"<p>Can set manually -</p>\n<pre><code>`drawerToggle.setToolbarNavigationClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                mDrawer.openDrawer(GravityCompat.START);\n            }\n     });`\n</code></pre>\n<p>or can try this\n<code>mDrawerToggle.syncState();</code></p>\n"},{"tags":[],"owner":{"account_id":10012930,"reputation":181,"user_id":7405227,"display_name":"BigBoiVladica"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659556752,"creation_date":1659556752,"answer_id":73227144,"question_id":73219461,"body_markdown":" - MainActivity changes:\r\n\r\nAll you have to do is change ***onOptionsItemSelected*** in MainActivity from\r\n\r\n        @Override\r\n        public boolean onOptionsItemSelected(MenuItem item) {\r\n            return true;\r\n        }\r\n\r\nand change it to\r\n\r\n    @Override\r\n        public boolean onOptionsItemSelected(MenuItem item) {\r\n           return super.onOptionsItemSelected(item);  //important\r\n        }\r\n\r\n\r\nAs far as the ***onCreateOptionsMenu*** method in MainActivity, you can leave it empty with just \r\n\r\n    return true\r\n\r\n - Fragment changes\r\n\r\n\r\nFor fragment (each fragment can have separate action menu items) you need to implement 3 methods \r\n\r\n - ***onCreateView***\r\n - ***onCreateOptionsMenu***\r\n - ***onOptionsItemSelected***\r\n\r\nExample:\r\n\r\n    @Override\r\n        public View onCreateView(LayoutInflater inflater, ViewGroup parent, Bundle savedInstanceState) {\r\n            View v = inflater.inflate(R.layout.fragment_payment_type_data_stats, parent, false);\r\n            setHasOptionsMenu(true);  //important\r\n            return v;\r\n        }\r\n    \r\n        @Override\r\n        public void onCreateOptionsMenu(@NonNull Menu menu, MenuInflater inflater) {\r\n            menu.clear();\r\n            //each frag can have different menu\r\n            inflater.inflate(R.menu.menu_payment_type_stats, menu);\r\n            super.onCreateOptionsMenu(menu, inflater);\r\n        }\r\n    \r\n        @SuppressLint(&quot;NonConstantResourceId&quot;)\r\n        @Override\r\n        public boolean onOptionsItemSelected(@NonNull MenuItem item) {\r\n    \r\n            switch (item.getItemId()) {\r\n                case R.id.action_today:\r\n                    getDataForToday();\r\n                    break;\r\n                case R.id.action_yesterday:\r\n                    getDataForPeriod(calendarDates.yesterdayDate(), calendarDates.yesterdayDate());\r\n                    break;\r\n                case R.id.action_past_seven:\r\n                    getDataForPeriod(calendarDates.pastSeventhDate(), calendarDates.todayDate());\r\n                    break;\r\n                case R.id.action_past_thirty:\r\n                    getDataForPeriod(calendarDates.pastThirtiethDate(), calendarDates.todayDate());\r\n                    break;\r\n                case R.id.action_custom_date:\r\n                    openDatePickerDialog(sdf);\r\n                    break;\r\n            }\r\n            return false;\r\n        }","title":"Different action menu items for each fragment with same navigation drawer in Android","body":"<ul>\n<li>MainActivity changes:</li>\n</ul>\n<p>All you have to do is change <em><strong>onOptionsItemSelected</strong></em> in MainActivity from</p>\n<pre><code>    @Override\n    public boolean onOptionsItemSelected(MenuItem item) {\n        return true;\n    }\n</code></pre>\n<p>and change it to</p>\n<pre><code>@Override\n    public boolean onOptionsItemSelected(MenuItem item) {\n       return super.onOptionsItemSelected(item);  //important\n    }\n</code></pre>\n<p>As far as the <em><strong>onCreateOptionsMenu</strong></em> method in MainActivity, you can leave it empty with just</p>\n<pre><code>return true\n</code></pre>\n<ul>\n<li>Fragment changes</li>\n</ul>\n<p>For fragment (each fragment can have separate action menu items) you need to implement 3 methods</p>\n<ul>\n<li><em><strong>onCreateView</strong></em></li>\n<li><em><strong>onCreateOptionsMenu</strong></em></li>\n<li><em><strong>onOptionsItemSelected</strong></em></li>\n</ul>\n<p>Example:</p>\n<pre><code>@Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup parent, Bundle savedInstanceState) {\n        View v = inflater.inflate(R.layout.fragment_payment_type_data_stats, parent, false);\n        setHasOptionsMenu(true);  //important\n        return v;\n    }\n\n    @Override\n    public void onCreateOptionsMenu(@NonNull Menu menu, MenuInflater inflater) {\n        menu.clear();\n        //each frag can have different menu\n        inflater.inflate(R.menu.menu_payment_type_stats, menu);\n        super.onCreateOptionsMenu(menu, inflater);\n    }\n\n    @SuppressLint(&quot;NonConstantResourceId&quot;)\n    @Override\n    public boolean onOptionsItemSelected(@NonNull MenuItem item) {\n\n        switch (item.getItemId()) {\n            case R.id.action_today:\n                getDataForToday();\n                break;\n            case R.id.action_yesterday:\n                getDataForPeriod(calendarDates.yesterdayDate(), calendarDates.yesterdayDate());\n                break;\n            case R.id.action_past_seven:\n                getDataForPeriod(calendarDates.pastSeventhDate(), calendarDates.todayDate());\n                break;\n            case R.id.action_past_thirty:\n                getDataForPeriod(calendarDates.pastThirtiethDate(), calendarDates.todayDate());\n                break;\n            case R.id.action_custom_date:\n                openDatePickerDialog(sdf);\n                break;\n        }\n        return false;\n    }\n</code></pre>\n"}],"owner":{"account_id":10012930,"reputation":181,"user_id":7405227,"display_name":"BigBoiVladica"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":328,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73227144,"answer_count":2,"score":1,"last_activity_date":1659556752,"creation_date":1659519473,"question_id":73219461,"body_markdown":"I have a Main activity that hosts a navigation drawer and multiple fragments. Each fragment has its own set of menu items.\r\n\r\nNow the problem starts when I add the **onOptionsItemSelected** method, the navigation Drawer won&#39;t open. And when I don&#39;t add the **onOptionsItemSelected** method, navigation Drawer opens but then menu items are not working.\r\n\r\n\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup parent, Bundle savedInstanceState) {\r\n        View v = inflater.inflate(R.layout.fragment_payment_type_data_stats, parent, false);\r\n        setHasOptionsMenu(true);\r\n        return v;\r\n    }\r\n\r\n    @Override\r\n    public void onCreateOptionsMenu(@NonNull Menu menu, MenuInflater inflater) {\r\n        menu.clear();\r\n        inflater.inflate(R.menu.menu_payment_type_stats, menu);\r\n        Objects.requireNonNull(((MainActivity) Objects.requireNonNull(getActivity())).getSupportActionBar()).setTitle(&quot;title&quot;);\r\n        super.onCreateOptionsMenu(menu, inflater);\r\n    }\r\n\r\n    @SuppressLint(&quot;NonConstantResourceId&quot;)\r\n    @Override\r\n    public boolean onOptionsItemSelected(MenuItem item) {\r\n        switch (item.getItemId()) {\r\n            case R.id.action_today:\r\n                getDataForToday();\r\n                break;\r\n            case R.id.action_past_seven:\r\n                getDataForPeriod(calendarDates.pastSeventhDate(), calendarDates.todayDate());\r\n                break;\r\n            case R.id.action_custom_date:\r\n                openDatePickerDialog(sdf);\r\n                break;\r\n        }\r\n        return true;\r\n    }\r\n\r\nIf you have any suggestions for fixing this problem, please share.\r\n","title":"Different action menu items for each fragment with same navigation drawer in Android","body":"<p>I have a Main activity that hosts a navigation drawer and multiple fragments. Each fragment has its own set of menu items.</p>\n<p>Now the problem starts when I add the <strong>onOptionsItemSelected</strong> method, the navigation Drawer won't open. And when I don't add the <strong>onOptionsItemSelected</strong> method, navigation Drawer opens but then menu items are not working.</p>\n<pre><code>@Override\npublic View onCreateView(LayoutInflater inflater, ViewGroup parent, Bundle savedInstanceState) {\n    View v = inflater.inflate(R.layout.fragment_payment_type_data_stats, parent, false);\n    setHasOptionsMenu(true);\n    return v;\n}\n\n@Override\npublic void onCreateOptionsMenu(@NonNull Menu menu, MenuInflater inflater) {\n    menu.clear();\n    inflater.inflate(R.menu.menu_payment_type_stats, menu);\n    Objects.requireNonNull(((MainActivity) Objects.requireNonNull(getActivity())).getSupportActionBar()).setTitle(&quot;title&quot;);\n    super.onCreateOptionsMenu(menu, inflater);\n}\n\n@SuppressLint(&quot;NonConstantResourceId&quot;)\n@Override\npublic boolean onOptionsItemSelected(MenuItem item) {\n    switch (item.getItemId()) {\n        case R.id.action_today:\n            getDataForToday();\n            break;\n        case R.id.action_past_seven:\n            getDataForPeriod(calendarDates.pastSeventhDate(), calendarDates.todayDate());\n            break;\n        case R.id.action_custom_date:\n            openDatePickerDialog(sdf);\n            break;\n    }\n    return true;\n}\n</code></pre>\n<p>If you have any suggestions for fixing this problem, please share.</p>\n"},{"tags":["java","mysql","sql","jpa"],"comments":[{"owner":{"account_id":25937120,"reputation":2268,"user_id":19657183,"display_name":"Mihe"},"score":0,"creation_date":1659557894,"post_id":73226357,"comment_id":129325662,"body_markdown":"Do you try to build a query with a dynamic number of parameters?","body":"Do you try to build a query with a dynamic number of parameters?"},{"owner":{"account_id":24349700,"reputation":35,"user_id":18285700,"display_name":"spinnning"},"score":0,"creation_date":1659558582,"post_id":73226357,"comment_id":129325919,"body_markdown":"Yeah, because for example if an end date is given I need a `where year(date) &lt; :enddate` otherwise i dont need this where.","body":"Yeah, because for example if an end date is given I need a <code>where year(date) &lt; :enddate</code> otherwise i dont need this where."},{"owner":{"account_id":25937120,"reputation":2268,"user_id":19657183,"display_name":"Mihe"},"score":0,"creation_date":1659563987,"post_id":73226357,"comment_id":129327353,"body_markdown":"Then, follow the answer from Phillip Schneider. The &quot;WHERE&quot; is needed just once, the predicates are usually combined with an `AND`.","body":"Then, follow the answer from Phillip Schneider. The &quot;WHERE&quot; is needed just once, the predicates are usually combined with an <code>AND</code>."}],"answers":[{"tags":[],"owner":{"account_id":1629132,"reputation":350,"user_id":1504041,"display_name":"Philipp Schneider"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659553853,"creation_date":1659553853,"answer_id":73226624,"question_id":73226357,"body_markdown":"That&#39;s not possible because of possible SQL-Injection.\r\n\r\nUse a if statement instead:\r\n\r\nif (Parameter is set) add where to SQL Statement and Parameter.","title":"Add where clause to setParameter JPA","body":"<p>That's not possible because of possible SQL-Injection.</p>\n<p>Use a if statement instead:</p>\n<p>if (Parameter is set) add where to SQL Statement and Parameter.</p>\n"}],"owner":{"account_id":24349700,"reputation":35,"user_id":18285700,"display_name":"spinnning"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659556534,"creation_date":1659552392,"question_id":73226357,"body_markdown":"At the moment I only know that you can do this in JPA \r\n```sql\r\nSELECT art_bezeichnung FROM table WHERE art_nr = :parameter\r\n```\r\n```java\r\n.setParameter(&quot;parameter&quot;, &quot;H03&quot;)\r\n```\r\nBut can you also add a whole where clause via a parameter\r\n```sql\r\nSELECT art_bezeichnung FROM table :parameter\r\n```\r\n```java\r\n.setParameter(&quot;parameter&quot;, &quot;WHERE art_nr = H03&quot;)\r\n```\r\nI searched the Internet for it, but couldn&#180;t find a clear answer.","title":"Add where clause to setParameter JPA","body":"<p>At the moment I only know that you can do this in JPA</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT art_bezeichnung FROM table WHERE art_nr = :parameter\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>.setParameter(&quot;parameter&quot;, &quot;H03&quot;)\n</code></pre>\n<p>But can you also add a whole where clause via a parameter</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT art_bezeichnung FROM table :parameter\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>.setParameter(&quot;parameter&quot;, &quot;WHERE art_nr = H03&quot;)\n</code></pre>\n<p>I searched the Internet for it, but couldnt find a clear answer.</p>\n"},{"tags":["java","spring","security","spring-mvc","spring-boot"],"comments":[{"owner":{"account_id":1612785,"reputation":2294,"user_id":1491283,"accept_rate":46,"display_name":"ArunM"},"score":0,"creation_date":1434353771,"post_id":30835674,"comment_id":49723351,"body_markdown":"The problem is definitley with your java config ... Please post the complete security configuration","body":"The problem is definitley with your java config ... Please post the complete security configuration"},{"owner":{"account_id":1205912,"reputation":1236,"user_id":1175583,"accept_rate":43,"display_name":"Altair7852"},"score":0,"creation_date":1434412891,"post_id":30835674,"comment_id":49756887,"body_markdown":"@ArunM: I hope it is the case and I am missing something. I updated with all the Java Configuration classes I have.","body":"@ArunM: I hope it is the case and I am missing something. I updated with all the Java Configuration classes I have."},{"owner":{"account_id":1612785,"reputation":2294,"user_id":1491283,"accept_rate":46,"display_name":"ArunM"},"score":0,"creation_date":1434521421,"post_id":30835674,"comment_id":49807587,"body_markdown":"This is really a mystery. I simply cant replicate your problem. I am using pretty much the same configuration.","body":"This is really a mystery. I simply cant replicate your problem. I am using pretty much the same configuration."},{"owner":{"account_id":1612785,"reputation":2294,"user_id":1491283,"accept_rate":46,"display_name":"ArunM"},"score":3,"creation_date":1434521541,"post_id":30835674,"comment_id":49807650,"body_markdown":"https://github.com/ntarunmenon/Hello-World/tree/master/springsecuritythymeleaf . .My code is here","body":"<a href=\"https://github.com/ntarunmenon/Hello-World/tree/master/springsecuritythymeleaf\" rel=\"nofollow noreferrer\">github.com/ntarunmenon/Hello-World/tree/master/&hellip;</a> . .My code is here"},{"owner":{"account_id":1205912,"reputation":1236,"user_id":1175583,"accept_rate":43,"display_name":"Altair7852"},"score":8,"creation_date":1434769732,"post_id":30835674,"comment_id":49933629,"body_markdown":"@ArunM: your project gave me an idea: I do not need to call auth.userDetailsService(userDetailsService); in SecurityConfiguration.configure(), which will prevent creation of internal DaoAuthenticationProvider! My UserIpAuthenticationProvider  can get instance of UserDetailsService via injection.","body":"@ArunM: your project gave me an idea: I do not need to call auth.userDetailsService(userDetailsService); in SecurityConfiguration.configure(), which will prevent creation of internal DaoAuthenticationProvider! My UserIpAuthenticationProvider  can get instance of UserDetailsService via injection."}],"answers":[{"tags":[],"owner":{"account_id":461547,"reputation":3094,"user_id":863311,"accept_rate":62,"display_name":"Simon"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1573140946,"creation_date":1573140946,"answer_id":58752116,"question_id":30835674,"body_markdown":"Defining your own DaoAuthenticationProvider\r\n\r\n    @Bean\r\n    public DaoAuthenticationProvider daoAuthenticationProvider() {\r\n        return new UserIpAuthenticationProvider();\r\n    }\r\n\r\nshould replace the Spring Boot default instance (not that the bean type is DaoAuthenticationProvider and **not** UserIpAuthenticationProvider)","title":"Spring Security, Boot: replace default DaoAuthenticationProvider","body":"<p>Defining your own DaoAuthenticationProvider</p>\n\n<pre><code>@Bean\npublic DaoAuthenticationProvider daoAuthenticationProvider() {\n    return new UserIpAuthenticationProvider();\n}\n</code></pre>\n\n<p>should replace the Spring Boot default instance (not that the bean type is DaoAuthenticationProvider and <strong>not</strong> UserIpAuthenticationProvider)</p>\n"},{"tags":[],"owner":{"account_id":173186,"reputation":4270,"user_id":401712,"display_name":"Dario Seidl"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1615482815,"creation_date":1615482815,"answer_id":66587303,"question_id":30835674,"body_markdown":"The comments on the question contained the answer:\r\n\r\n&gt; @ArunM: your project gave me an idea: I do not need to call auth.userDetailsService(userDetailsService); in SecurityConfiguration.configure(), which will prevent creation of internal DaoAuthenticationProvider! My UserIpAuthenticationProvider can get instance of UserDetailsService via injection. \r\n\r\nThe `AuthenticationManagerBuilder.userDetailsService` method does not only set the default `UserDetailsService` but also applies a `DaoAuthenticationConfigurer` which registers the `DaoAuthenticationProvider`.\r\n\r\nIf you want a customized `DaoAuthenticationProvider`, pass the `UserDetailsService` to the provider in the constructor or inject it. And to prevent the default `DaoAuthenticationProvider` from being registered, don&#39;t call `AuthenticationManagerBuilder.userDetailsService`.\r\n\r\nThis is also mentioned in this [Spring Security issue](https://github.com/spring-projects/spring-security/issues/4149).","title":"Spring Security, Boot: replace default DaoAuthenticationProvider","body":"<p>The comments on the question contained the answer:</p>\n<blockquote>\n<p>@ArunM: your project gave me an idea: I do not need to call auth.userDetailsService(userDetailsService); in SecurityConfiguration.configure(), which will prevent creation of internal DaoAuthenticationProvider! My UserIpAuthenticationProvider can get instance of UserDetailsService via injection.</p>\n</blockquote>\n<p>The <code>AuthenticationManagerBuilder.userDetailsService</code> method does not only set the default <code>UserDetailsService</code> but also applies a <code>DaoAuthenticationConfigurer</code> which registers the <code>DaoAuthenticationProvider</code>.</p>\n<p>If you want a customized <code>DaoAuthenticationProvider</code>, pass the <code>UserDetailsService</code> to the provider in the constructor or inject it. And to prevent the default <code>DaoAuthenticationProvider</code> from being registered, don't call <code>AuthenticationManagerBuilder.userDetailsService</code>.</p>\n<p>This is also mentioned in this <a href=\"https://github.com/spring-projects/spring-security/issues/4149\" rel=\"nofollow noreferrer\">Spring Security issue</a>.</p>\n"}],"owner":{"account_id":1205912,"reputation":1236,"user_id":1175583,"accept_rate":43,"display_name":"Altair7852"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7440,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":2,"score":11,"last_activity_date":1659556416,"creation_date":1434325175,"question_id":30835674,"body_markdown":"I am trying to add user ip verification during login process. If ip address of the user is not in the database the application should reject the authentication. \r\n\r\n**The problem:** Given the setup below it turns out that auth.authenticationProvider() is not replacing the default DaoAuthenticationProvider, but adds UserIpAuthenticationProvider as a first AuthenticationProvider in the list. \r\n\r\nIn the case when username/password combination is incorrect the framework ends up calling UserDetailsService.loadUserByUsername() twice, once from UserIpAuthenticationProvider, another time from internal DaoAuthenticationProvider which throws the final BadCredentialsException(). \r\n\r\n**The question:** is there any setting that can be set in Spring Boot so that Spring Security does not add it&#39;s own internal instance DaoAuthenticationProvider, but only use my UserIpAuthenticationProvider, which already has all the necessary functionality (perhaps by somehow replacing AuthenticationManagerBuilder to be able to override userDetailsService() method?).\r\n\r\n    public &lt;T extends UserDetailsService&gt; DaoAuthenticationConfigurer&lt;AuthenticationManagerBuilder,T&gt; userDetailsService(\r\n            T userDetailsService) throws Exception {\r\n        this.defaultUserDetailsService = userDetailsService;\r\n        return apply(new DaoAuthenticationConfigurer&lt;AuthenticationManagerBuilder,T&gt;(userDetailsService));\r\n    }\r\n\r\n**Configuration:** In my understanding, UserDetailsService is supposed to provide all the necessary details about the user so that AuthenticationProvider can make a decision whether the authentication was successful or not.\r\n\r\nSince all the necessary information is loaded from the database, it seems natural to extend DaoAuthenticationProvider and add an additional verification in overriden additionalAuthenticationChecks() method (white-listed IP list is in the database, so they are loaded as part of the user object in IpAwareUser).\r\n\r\n\r\n    @Named\r\n    @Component\r\n    class UserIpAuthenticationProvider  extends DaoAuthenticationProvider {\r\n        @Inject\r\n        public UserIpAuthenticationProvider(UserDetailsService userDetailsService)\r\n        {\r\n            ...\r\n        }\r\n    \r\n        @SuppressWarnings(&quot;deprecation&quot;)\r\n        protected void additionalAuthenticationChecks(UserDetails userDetails,\r\n                                                      UsernamePasswordAuthenticationToken authentication) throws AuthenticationException {\r\n            super.additionalAuthenticationChecks(userDetails, authentication);\r\n    \r\n            WebAuthenticationDetails details = (WebAuthenticationDetails) authentication.getDetails();\r\n            IpAwareUser ipAwareUser = (IpAwareUser) userDetails;\r\n            if (!ipAwareUser.isAllowedIp(details.getRemoteAddress()))\r\n            {\r\n                throw new DisabledException(&quot;Login restricted from ip: &quot; + details.getRemoteAddress());\r\n            }\r\n        }\r\n    }\r\n\r\nThis is injected into SecurityConfiguration:\r\n\r\n \r\n\r\n       \r\n    @Configuration\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true)\r\n    @EnableWebSecurity\r\n    public class SecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http.addFilter(authenticationFilter);\r\n    \r\n            http.authorizeRequests()\r\n                    .antMatchers(&quot;/&quot;, &quot;/javascript/**&quot;, &quot;/css/**&quot;).permitAll()\r\n                    .antMatchers(&quot;...&quot;).access(&quot;...&quot;)\r\n                    .anyRequest().authenticated()\r\n                    .and().formLogin().loginPage(&quot;/&quot;).permitAll()\r\n                    .and().logout().invalidateHttpSession(true).deleteCookies(&quot;JSESSIONID&quot;).permitAll()\r\n                    .and().csrf().disable()\r\n            ;\r\n        }\r\n    \r\n        @Inject\r\n        private UserDetailsService userDetailsService;\r\n    \r\n        @Inject\r\n        private UserIpAuthenticationProvider userIpAuthenticationProvider;\r\n    \r\n    \r\n        @Inject\r\n        private JsonUsernamePasswordAuthenticationFilter authenticationFilter;\r\n    \r\n        @Bean\r\n        public JsonUsernamePasswordAuthenticationFilter authenticationFilter() {\r\n            return new JsonUsernamePasswordAuthenticationFilter();\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n            auth.authenticationProvider(userIpAuthenticationProvider);\r\n            auth.userDetailsService(userDetailsService);\r\n        }\r\n    \r\n        @Bean\r\n        @Override\r\n        public AuthenticationManager authenticationManagerBean() throws Exception {\r\n            return super.authenticationManagerBean();\r\n        }\r\n    \r\n        @Bean\r\n        public AuthenticationSuccessHandler authenticationSuccessHandler() throws Exception {\r\n            return new JsonAuthenticationSuccessHandler();\r\n        }\r\n    \r\n        @Bean\r\n        public AuthenticationFailureHandler authenticationFailureHandler() throws Exception {\r\n            return new JsonAuthenticationFailureHandler();\r\n        }\r\n    }\r\n\r\nand application configuration:\r\n    \r\n    @Configuration\r\n    @EnableAutoConfiguration\r\n    @ComponentScan(basePackageClasses = {SecurityConfiguration.class, DataController.class, DaoService.class})\r\n    public class Application extends SpringBootServletInitializer {\r\n    \r\n        @Override\r\n        protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\r\n            return application;\r\n        }\r\n    }\r\n\r\n\r\n\r\nAny guidance on this will be much appreciated.","title":"Spring Security, Boot: replace default DaoAuthenticationProvider","body":"<p>I am trying to add user ip verification during login process. If ip address of the user is not in the database the application should reject the authentication. </p>\n\n<p><strong>The problem:</strong> Given the setup below it turns out that auth.authenticationProvider() is not replacing the default DaoAuthenticationProvider, but adds UserIpAuthenticationProvider as a first AuthenticationProvider in the list. </p>\n\n<p>In the case when username/password combination is incorrect the framework ends up calling UserDetailsService.loadUserByUsername() twice, once from UserIpAuthenticationProvider, another time from internal DaoAuthenticationProvider which throws the final BadCredentialsException(). </p>\n\n<p><strong>The question:</strong> is there any setting that can be set in Spring Boot so that Spring Security does not add it's own internal instance DaoAuthenticationProvider, but only use my UserIpAuthenticationProvider, which already has all the necessary functionality (perhaps by somehow replacing AuthenticationManagerBuilder to be able to override userDetailsService() method?).</p>\n\n<pre><code>public &lt;T extends UserDetailsService&gt; DaoAuthenticationConfigurer&lt;AuthenticationManagerBuilder,T&gt; userDetailsService(\n        T userDetailsService) throws Exception {\n    this.defaultUserDetailsService = userDetailsService;\n    return apply(new DaoAuthenticationConfigurer&lt;AuthenticationManagerBuilder,T&gt;(userDetailsService));\n}\n</code></pre>\n\n<p><strong>Configuration:</strong> In my understanding, UserDetailsService is supposed to provide all the necessary details about the user so that AuthenticationProvider can make a decision whether the authentication was successful or not.</p>\n\n<p>Since all the necessary information is loaded from the database, it seems natural to extend DaoAuthenticationProvider and add an additional verification in overriden additionalAuthenticationChecks() method (white-listed IP list is in the database, so they are loaded as part of the user object in IpAwareUser).</p>\n\n<pre><code>@Named\n@Component\nclass UserIpAuthenticationProvider  extends DaoAuthenticationProvider {\n    @Inject\n    public UserIpAuthenticationProvider(UserDetailsService userDetailsService)\n    {\n        ...\n    }\n\n    @SuppressWarnings(\"deprecation\")\n    protected void additionalAuthenticationChecks(UserDetails userDetails,\n                                                  UsernamePasswordAuthenticationToken authentication) throws AuthenticationException {\n        super.additionalAuthenticationChecks(userDetails, authentication);\n\n        WebAuthenticationDetails details = (WebAuthenticationDetails) authentication.getDetails();\n        IpAwareUser ipAwareUser = (IpAwareUser) userDetails;\n        if (!ipAwareUser.isAllowedIp(details.getRemoteAddress()))\n        {\n            throw new DisabledException(\"Login restricted from ip: \" + details.getRemoteAddress());\n        }\n    }\n}\n</code></pre>\n\n<p>This is injected into SecurityConfiguration:</p>\n\n<pre><code>@Configuration\n@EnableGlobalMethodSecurity(prePostEnabled = true)\n@EnableWebSecurity\npublic class SecurityConfiguration extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.addFilter(authenticationFilter);\n\n        http.authorizeRequests()\n                .antMatchers(\"/\", \"/javascript/**\", \"/css/**\").permitAll()\n                .antMatchers(\"...\").access(\"...\")\n                .anyRequest().authenticated()\n                .and().formLogin().loginPage(\"/\").permitAll()\n                .and().logout().invalidateHttpSession(true).deleteCookies(\"JSESSIONID\").permitAll()\n                .and().csrf().disable()\n        ;\n    }\n\n    @Inject\n    private UserDetailsService userDetailsService;\n\n    @Inject\n    private UserIpAuthenticationProvider userIpAuthenticationProvider;\n\n\n    @Inject\n    private JsonUsernamePasswordAuthenticationFilter authenticationFilter;\n\n    @Bean\n    public JsonUsernamePasswordAuthenticationFilter authenticationFilter() {\n        return new JsonUsernamePasswordAuthenticationFilter();\n    }\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.authenticationProvider(userIpAuthenticationProvider);\n        auth.userDetailsService(userDetailsService);\n    }\n\n    @Bean\n    @Override\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        return super.authenticationManagerBean();\n    }\n\n    @Bean\n    public AuthenticationSuccessHandler authenticationSuccessHandler() throws Exception {\n        return new JsonAuthenticationSuccessHandler();\n    }\n\n    @Bean\n    public AuthenticationFailureHandler authenticationFailureHandler() throws Exception {\n        return new JsonAuthenticationFailureHandler();\n    }\n}\n</code></pre>\n\n<p>and application configuration:</p>\n\n<pre><code>@Configuration\n@EnableAutoConfiguration\n@ComponentScan(basePackageClasses = {SecurityConfiguration.class, DataController.class, DaoService.class})\npublic class Application extends SpringBootServletInitializer {\n\n    @Override\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n        return application;\n    }\n}\n</code></pre>\n\n<p>Any guidance on this will be much appreciated.</p>\n"},{"tags":["java","eval","drools"],"comments":[{"owner":{"account_id":183966,"reputation":14606,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":0,"creation_date":1659124624,"post_id":73162312,"comment_id":129227032,"body_markdown":"Don&#39;t use `eval`. It&#39;s bad practice. Also you&#39;ve neglected to include what version of Drools we&#39;re talking about here.","body":"Don&#39;t use <code>eval</code>. It&#39;s bad practice. Also you&#39;ve neglected to include what version of Drools we&#39;re talking about here."}],"answers":[{"tags":[],"owner":{"account_id":183966,"reputation":14606,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659555653,"creation_date":1659555653,"answer_id":73226964,"question_id":73162312,"body_markdown":"Avoid using `eval`.\r\n\r\nAssign the function call&#39;s result to a Double and do the comparison there. Something like...\r\n\r\n```\r\nDouble( this &gt; 0.0 ) from func().orElse(1.0)\r\n```\r\n\r\nDrools support for Java built-ins and newer functionality (Java 8+) has been hit-or-miss in DRL in my experience, especially with older Drools. If this all doesn&#39;t work, your best bet might be to write a method that will wrap the `func().orElse(...)` and resolve to a simple Double and use that instead.","title":"Is there a way to use Optional.orElse in eval?","body":"<p>Avoid using <code>eval</code>.</p>\n<p>Assign the function call's result to a Double and do the comparison there. Something like...</p>\n<pre><code>Double( this &gt; 0.0 ) from func().orElse(1.0)\n</code></pre>\n<p>Drools support for Java built-ins and newer functionality (Java 8+) has been hit-or-miss in DRL in my experience, especially with older Drools. If this all doesn't work, your best bet might be to write a method that will wrap the <code>func().orElse(...)</code> and resolve to a simple Double and use that instead.</p>\n"}],"owner":{"account_id":10831978,"reputation":23,"user_id":7966040,"display_name":"katrinawyh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1659555653,"creation_date":1659075263,"question_id":73162312,"body_markdown":"I have a function that returns `Optional` that I want to use in drools eval, e.g.\r\n```\r\nrule &quot;some rule&quot;\r\n  when\r\n    eval(func().orElse(1.0) &gt; 0.0)\r\n  then\r\n    ....\r\nend\r\n```\r\nwhere `func()` has return type being `Optional&lt;Double&gt;`. The above is giving me compile error because of `orElse`. Is there any workaround? Thanks!\r\n","title":"Is there a way to use Optional.orElse in eval?","body":"<p>I have a function that returns <code>Optional</code> that I want to use in drools eval, e.g.</p>\n<pre><code>rule &quot;some rule&quot;\n  when\n    eval(func().orElse(1.0) &gt; 0.0)\n  then\n    ....\nend\n</code></pre>\n<p>where <code>func()</code> has return type being <code>Optional&lt;Double&gt;</code>. The above is giving me compile error because of <code>orElse</code>. Is there any workaround? Thanks!</p>\n"},{"tags":["java","algorithm","collision-detection"],"answers":[{"tags":[],"owner":{"account_id":1573494,"reputation":14865,"user_id":1460628,"accept_rate":60,"display_name":"Miljen Mikic"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1435138886,"creation_date":1435137663,"answer_id":31022629,"question_id":31022269,"body_markdown":"You have to check both the intersection along the x-axis and along the y-axis. If any of them is missing, there is no collision between rectangles.\r\n\r\nCode for 1-D:\r\n\r\n    boolean overlaps(double point1, double length1, double point2, double length2)\r\n    {\r\n        double highestStartPoint = Math.max(point1, point2);\r\n        double lowestEndPoint = Math.min(point1 + length1, point2 + length2);\r\n\r\n        return highestStartPoint &lt; lowestEndPoint;\r\n    }\r\n\r\nYou have to call it for both x and y:\r\n\r\n    boolean collision(double x1, double x2, double y1, double y2, double width1, double width2, double height1, double height2)\r\n    {\r\n        return overlaps(x1, width1, x2, width2) &amp;&amp; overlaps (y1, height1, y2, height2);\r\n    }\r\n\r\n","title":"Collision detection between two rectangles in java","body":"<p>You have to check both the intersection along the x-axis and along the y-axis. If any of them is missing, there is no collision between rectangles.</p>\n\n<p>Code for 1-D:</p>\n\n<pre><code>boolean overlaps(double point1, double length1, double point2, double length2)\n{\n    double highestStartPoint = Math.max(point1, point2);\n    double lowestEndPoint = Math.min(point1 + length1, point2 + length2);\n\n    return highestStartPoint &lt; lowestEndPoint;\n}\n</code></pre>\n\n<p>You have to call it for both x and y:</p>\n\n<pre><code>boolean collision(double x1, double x2, double y1, double y2, double width1, double width2, double height1, double height2)\n{\n    return overlaps(x1, width1, x2, width2) &amp;&amp; overlaps (y1, height1, y2, height2);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2887305,"reputation":8065,"user_id":2495795,"accept_rate":87,"display_name":"BufBills"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1435172496,"creation_date":1435172496,"answer_id":31034842,"question_id":31022269,"body_markdown":"1. Calculate 4 points of first rectangle. Note them as pointA, pointB, pointC, pointD.\r\n2. calculate 4 points of second rectangle. Note them as pointE, F, G H.\r\n\r\n3. Iterate point E,F,G,H\r\n   (1) if any of these is within area that A,B,C,D enclosed. return collision.\r\n   (2) otherwise no collision.\r\n\r\nFor 3.(1) algorithm.  you need something like this.\r\n\r\nXe &gt;= Xa &amp;&amp; Xc &lt;= Xb. &amp;&amp; Yc &gt;= Yc &amp;&amp; Ye &lt;=Yc","title":"Collision detection between two rectangles in java","body":"<ol>\n<li>Calculate 4 points of first rectangle. Note them as pointA, pointB, pointC, pointD.</li>\n<li><p>calculate 4 points of second rectangle. Note them as pointE, F, G H.</p></li>\n<li><p>Iterate point E,F,G,H\n(1) if any of these is within area that A,B,C,D enclosed. return collision.\n(2) otherwise no collision.</p></li>\n</ol>\n\n<p>For 3.(1) algorithm.  you need something like this.</p>\n\n<p>Xe >= Xa &amp;&amp; Xc &lt;= Xb. &amp;&amp; Yc >= Yc &amp;&amp; Ye &lt;=Yc</p>\n"},{"tags":[],"owner":{"account_id":3554912,"reputation":3026,"user_id":2968894,"accept_rate":87,"display_name":"Pruthvi Raj"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1435173090,"creation_date":1435173090,"answer_id":31035006,"question_id":31022269,"body_markdown":"In java , to detect if two when two rectangles collide, you can use `intersects()` method \r\n\r\nSample Code:\r\n\r\n    Rectangle r1 = new Rectangle(x1,y1,x2,y2);\r\n    Rectangle r2 = new Rectangle(x1,y1,x2,y2);\r\n    if(r1.intersects(r2))\r\n    {\r\n    \t//what to happen when collision occurs goes here\r\n    }","title":"Collision detection between two rectangles in java","body":"<p>In java , to detect if two when two rectangles collide, you can use <code>intersects()</code> method </p>\n\n<p>Sample Code:</p>\n\n<pre><code>Rectangle r1 = new Rectangle(x1,y1,x2,y2);\nRectangle r2 = new Rectangle(x1,y1,x2,y2);\nif(r1.intersects(r2))\n{\n    //what to happen when collision occurs goes here\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2887305,"reputation":8065,"user_id":2495795,"accept_rate":87,"display_name":"BufBills"},"down_vote_count":1,"up_vote_count":26,"is_accepted":true,"score":25,"last_activity_date":1435174128,"creation_date":1435174128,"answer_id":31035335,"question_id":31022269,"body_markdown":"    if (RectA.X1 &lt; RectB.X2 &amp;&amp; RectA.X2 &gt; RectB.X1 &amp;&amp;\r\n        RectA.Y1 &lt; RectB.Y2 &amp;&amp; RectA.Y2 &gt; RectB.Y1) \r\n\r\nSay you have Rect A, and Rect B. Proof is by contradiction. Any one of four conditions guarantees that no overlap can exist:\r\n\r\n    Cond1. If A&#39;s left edge is to the right of the B&#39;s right edge, - then A is Totally to right Of B\r\n    Cond2. If A&#39;s right edge is to the left of the B&#39;s left edge, - then A is Totally to left Of B\r\n    Cond3. If A&#39;s top edge is below B&#39;s bottom edge, - then A is Totally below B\r\n    Cond4. If A&#39;s bottom edge is above B&#39;s top edge, - then A is Totally above B\r\n    So condition for Non-Overlap is\r\n\r\n    Cond1 Or Cond2 Or Cond3 Or Cond4\r\n\r\nTherefore, a sufficient condition for Overlap is the opposite (De Morgan)\r\n\r\nNot Cond1 And Not Cond2 And Not Cond3 And Not Cond4\r\nThis is equivalent to:\r\n\r\n    A&#39;s Left Edge to left of B&#39;s right edge, and\r\n    A&#39;s right edge to right of B&#39;s left edge, and\r\n    A&#39;s top above B&#39;s bottom, and\r\n    A&#39;s bottom below B&#39;s Top\r\n\r\nNote 1: It is fairly obvious this same principle can be extended to any number of dimensions.\r\nNote 2: It should also be fairly obvious to count overlaps of just one pixel, change the &lt; and/or the &gt; on that boundary to a &lt;= or a &gt;=.\r\n\r\n\r\n\r\nIf you are having a hard time visualizing why it works, I made an example page at **silentmatt.com/intersection.html** where you can drag rectangles around and see the comparisons.","title":"Collision detection between two rectangles in java","body":"<pre><code>if (RectA.X1 &lt; RectB.X2 &amp;&amp; RectA.X2 &gt; RectB.X1 &amp;&amp;\n    RectA.Y1 &lt; RectB.Y2 &amp;&amp; RectA.Y2 &gt; RectB.Y1) \n</code></pre>\n\n<p>Say you have Rect A, and Rect B. Proof is by contradiction. Any one of four conditions guarantees that no overlap can exist:</p>\n\n<pre><code>Cond1. If A's left edge is to the right of the B's right edge, - then A is Totally to right Of B\nCond2. If A's right edge is to the left of the B's left edge, - then A is Totally to left Of B\nCond3. If A's top edge is below B's bottom edge, - then A is Totally below B\nCond4. If A's bottom edge is above B's top edge, - then A is Totally above B\nSo condition for Non-Overlap is\n\nCond1 Or Cond2 Or Cond3 Or Cond4\n</code></pre>\n\n<p>Therefore, a sufficient condition for Overlap is the opposite (De Morgan)</p>\n\n<p>Not Cond1 And Not Cond2 And Not Cond3 And Not Cond4\nThis is equivalent to:</p>\n\n<pre><code>A's Left Edge to left of B's right edge, and\nA's right edge to right of B's left edge, and\nA's top above B's bottom, and\nA's bottom below B's Top\n</code></pre>\n\n<p>Note 1: It is fairly obvious this same principle can be extended to any number of dimensions.\nNote 2: It should also be fairly obvious to count overlaps of just one pixel, change the &lt; and/or the > on that boundary to a &lt;= or a >=.</p>\n\n<p>If you are having a hard time visualizing why it works, I made an example page at <strong>silentmatt.com/intersection.html</strong> where you can drag rectangles around and see the comparisons.</p>\n"},{"tags":[],"owner":{"account_id":6715440,"reputation":851,"user_id":5177407,"accept_rate":0,"display_name":"Denis Petrov"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1519821254,"creation_date":1519820455,"answer_id":49029463,"question_id":31022269,"body_markdown":"    bool isIntersect(\r\n      int Ax, int Ay, int Aw, int Ah,\r\n      int Bx, int By, int Bw, int Bh)\r\n    {\r\n      return\r\n        Bx + Bw &gt; Ax &amp;&amp;\r\n        By + Bh &gt; Ay &amp;&amp;\r\n        Ax + Aw &gt; Bx &amp;&amp;\r\n        Ay + Ah &gt; By;\r\n    }","title":"Collision detection between two rectangles in java","body":"<pre><code>bool isIntersect(\n  int Ax, int Ay, int Aw, int Ah,\n  int Bx, int By, int Bw, int Bh)\n{\n  return\n    Bx + Bw &gt; Ax &amp;&amp;\n    By + Bh &gt; Ay &amp;&amp;\n    Ax + Aw &gt; Bx &amp;&amp;\n    Ay + Ah &gt; By;\n}\n</code></pre>\n"}],"owner":{"account_id":4873422,"reputation":1181,"user_id":3929213,"accept_rate":64,"display_name":"mikelplhts"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28774,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":31035335,"answer_count":5,"score":10,"last_activity_date":1659555586,"creation_date":1435136734,"question_id":31022269,"body_markdown":"I have two rectangles, the red rectangle (can move) and the blue rectangle.\r\nBoth have: x, y, width, height.\r\n\r\nHow can I say in a programming language such as Java when there is a collision between the blue and the red rectangle?\r\n\r\n![Example of collision][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/03qIb.png","title":"Collision detection between two rectangles in java","body":"<p>I have two rectangles, the red rectangle (can move) and the blue rectangle.\nBoth have: x, y, width, height.</p>\n\n<p>How can I say in a programming language such as Java when there is a collision between the blue and the red rectangle?</p>\n\n<p><img src=\"https://i.stack.imgur.com/03qIb.png\" alt=\"Example of collision\"></p>\n"},{"tags":["java","algorithm","sorting","quicksort"],"comments":[{"owner":{"account_id":4127333,"reputation":34381,"user_id":3386109,"display_name":"user3386109"},"score":0,"creation_date":1659473030,"post_id":73213105,"comment_id":129302276,"body_markdown":"You may be interested in the [Dutch national flag problem](https://en.wikipedia.org/wiki/Dutch_national_flag_problem), which describes a partitioning algorithm where all elements equal to the pivot end up together between the left and right partitions.","body":"You may be interested in the <a href=\"https://en.wikipedia.org/wiki/Dutch_national_flag_problem\" rel=\"nofollow noreferrer\">Dutch national flag problem</a>, which describes a partitioning algorithm where all elements equal to the pivot end up together between the left and right partitions."},{"owner":{"account_id":6506530,"reputation":1934,"user_id":5035236,"accept_rate":58,"display_name":"hawarden_"},"score":0,"creation_date":1659551502,"post_id":73213105,"comment_id":129323675,"body_markdown":"@user3386109 ok but I want first to solve it properly using 2-way quicksort","body":"@user3386109 ok but I want first to solve it properly using 2-way quicksort"}],"answers":[{"tags":[],"owner":{"account_id":286249,"reputation":43941,"user_id":585411,"accept_rate":60,"display_name":"btilly"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659555252,"creation_date":1659473553,"answer_id":73213671,"question_id":73213105,"body_markdown":"You just have to leave the partition at the right place.  So don&#39;t include it in your partitioning, then swap it in to your known correct place at the end.\r\n\r\n    private static int partition(int[] arr, int lo, int hi) {\r\n        int p = arr[lo];\r\n        int i = lo;\r\n        int j = hi + 1;\r\n\r\n        while (true) {\r\n            while (arr[--j] &gt; p) ;\r\n            while (i &lt; j &amp;&amp; arr[++i] &lt; p) ;\r\n            if (i &gt;= j) {\r\n                // arr[j] &lt;= p, and arr[lo] is still p.\r\n                swap(arr, lo, j);\r\n                return j;\r\n            }\r\n            swap(arr, i, j);\r\n        }\r\n    }\r\n\r\nNote that your second version had an extra comparison in every iteration of the loop.  That should matter more than the relative costs of `&lt;` vs `&lt;=`.  (Which I doubt are significantly different.)","title":"How can I make this quick sort partition balanced and not include pivot the next loop?","body":"<p>You just have to leave the partition at the right place.  So don't include it in your partitioning, then swap it in to your known correct place at the end.</p>\n<pre><code>private static int partition(int[] arr, int lo, int hi) {\n    int p = arr[lo];\n    int i = lo;\n    int j = hi + 1;\n\n    while (true) {\n        while (arr[--j] &gt; p) ;\n        while (i &lt; j &amp;&amp; arr[++i] &lt; p) ;\n        if (i &gt;= j) {\n            // arr[j] &lt;= p, and arr[lo] is still p.\n            swap(arr, lo, j);\n            return j;\n        }\n        swap(arr, i, j);\n    }\n}\n</code></pre>\n<p>Note that your second version had an extra comparison in every iteration of the loop.  That should matter more than the relative costs of <code>&lt;</code> vs <code>&lt;=</code>.  (Which I doubt are significantly different.)</p>\n"}],"owner":{"account_id":6506530,"reputation":1934,"user_id":5035236,"accept_rate":58,"display_name":"hawarden_"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1659555252,"creation_date":1659470267,"question_id":73213105,"body_markdown":"I implemented the quick sort partition method using two ways :\r\n\r\nThe first is the classic Hoare partition scheme. It&#39;s efficient (two partitions are balanced, as we always use `&lt;` or `&gt;` instead of `&lt;=`) but it does not return the pivot directly :\r\n\r\n    private static int partition(int[] arr, int lo, int hi) {\r\n        int p = arr[lo];\r\n        int i = lo - 1;\r\n        int j = hi + 1;\r\n        while (true) {\r\n            while (arr[--j] &gt; p) ;\r\n            while (arr[++i] &lt; p) ;\r\n            if (i &gt;= j) {\r\n                return j;\r\n            }\r\n            swap(arr, i, j);\r\n        }\r\n    }\r\n\r\nThe second one is an easier to understand version as it returns directly the pivot, and the pivot does not come into two partitions. But I cannot figure it out how to remove the `&lt;=` in this line `while (i &lt; j &amp;&amp; arr[i] &lt;= p) {` :\r\n\r\n    private static int partition(int[] arr, int lo, int hi) {\r\n        int p = arr[lo];\r\n        int i = lo;\r\n        int j = hi;\r\n        while (true) {\r\n            while (i &lt; j &amp;&amp; arr[j] &gt; p) {\r\n                j--;\r\n            }\r\n            while (i &lt; j &amp;&amp; arr[i] &lt;= p) {\r\n                i++;\r\n            }\r\n            if (i &gt;= j) {\r\n                break;\r\n            } else {\r\n                swap(arr, i, j);\r\n            }\r\n        }\r\n        swap(arr, lo, i);\r\n        return i;\r\n    }\r\n\r\nSo is it possible to have a two-way partition method that is at the same time efficient (without any equal sign) AND the pivot will not be included into partitions the next loop ?","title":"How can I make this quick sort partition balanced and not include pivot the next loop?","body":"<p>I implemented the quick sort partition method using two ways :</p>\n<p>The first is the classic Hoare partition scheme. It's efficient (two partitions are balanced, as we always use <code>&lt;</code> or <code>&gt;</code> instead of <code>&lt;=</code>) but it does not return the pivot directly :</p>\n<pre><code>private static int partition(int[] arr, int lo, int hi) {\n    int p = arr[lo];\n    int i = lo - 1;\n    int j = hi + 1;\n    while (true) {\n        while (arr[--j] &gt; p) ;\n        while (arr[++i] &lt; p) ;\n        if (i &gt;= j) {\n            return j;\n        }\n        swap(arr, i, j);\n    }\n}\n</code></pre>\n<p>The second one is an easier to understand version as it returns directly the pivot, and the pivot does not come into two partitions. But I cannot figure it out how to remove the <code>&lt;=</code> in this line <code>while (i &lt; j &amp;&amp; arr[i] &lt;= p) {</code> :</p>\n<pre><code>private static int partition(int[] arr, int lo, int hi) {\n    int p = arr[lo];\n    int i = lo;\n    int j = hi;\n    while (true) {\n        while (i &lt; j &amp;&amp; arr[j] &gt; p) {\n            j--;\n        }\n        while (i &lt; j &amp;&amp; arr[i] &lt;= p) {\n            i++;\n        }\n        if (i &gt;= j) {\n            break;\n        } else {\n            swap(arr, i, j);\n        }\n    }\n    swap(arr, lo, i);\n    return i;\n}\n</code></pre>\n<p>So is it possible to have a two-way partition method that is at the same time efficient (without any equal sign) AND the pivot will not be included into partitions the next loop ?</p>\n"},{"tags":["java","apache-flink","flink-streaming"],"answers":[{"tags":[],"owner":{"account_id":2274094,"reputation":40354,"user_id":2000823,"display_name":"David Anderson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1659554868,"creation_date":1659554868,"answer_id":73226805,"question_id":73226245,"body_markdown":"You can do this with\r\n\r\n```java\r\nenv.disableOperatorChaining();\r\n```\r\n\r\nHowever, you should expect this to degrade performance, perhaps significantly. See https://stackoverflow.com/q/62933685/2000823 for more about this.\r\n","title":"How to have one operator per vertex in Apache Flink?","body":"<p>You can do this with</p>\n<pre class=\"lang-java prettyprint-override\"><code>env.disableOperatorChaining();\n</code></pre>\n<p>However, you should expect this to degrade performance, perhaps significantly. See <a href=\"https://stackoverflow.com/q/62933685/2000823\">Flink disableOperatorChaining Performance impact</a> for more about this.</p>\n"}],"owner":{"account_id":12495977,"reputation":99,"user_id":9095975,"display_name":"Gledi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":195,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73226805,"answer_count":1,"score":1,"last_activity_date":1659554868,"creation_date":1659551759,"question_id":73226245,"body_markdown":"I have a streaming job that I am running in Apache Flink.\r\n\r\nIt consists of the following operators:\r\n\r\n 1. Source Function (generates data)\r\n 2. Filter Function (filters out some data)\r\n 3. GroupBy and aggregate (groups data based on a key and then runs an aggregation function over them)\r\n 4. Another filter function\r\n 5. File Sink (saves output to file)\r\n\r\nHowever, when I sumbit the job I get the following graph.\r\n[![Query Graph - Flink UI][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/tYKy1.png\r\n\r\nAs you can see for example the 3rd and 4th steps are merged together.\r\nMy question is, since I want to measure the throughput and latency of each step, is there a way to split each operator on its own vertex? In this example: Have a node for the groupBy-Aggregation and another one for the filter function (endsWith). \r\n\r\nThanks in advance! :)","title":"How to have one operator per vertex in Apache Flink?","body":"<p>I have a streaming job that I am running in Apache Flink.</p>\n<p>It consists of the following operators:</p>\n<ol>\n<li>Source Function (generates data)</li>\n<li>Filter Function (filters out some data)</li>\n<li>GroupBy and aggregate (groups data based on a key and then runs an aggregation function over them)</li>\n<li>Another filter function</li>\n<li>File Sink (saves output to file)</li>\n</ol>\n<p>However, when I sumbit the job I get the following graph.\n<a href=\"https://i.stack.imgur.com/tYKy1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tYKy1.png\" alt=\"Query Graph - Flink UI\" /></a></p>\n<p>As you can see for example the 3rd and 4th steps are merged together.\nMy question is, since I want to measure the throughput and latency of each step, is there a way to split each operator on its own vertex? In this example: Have a node for the groupBy-Aggregation and another one for the filter function (endsWith).</p>\n<p>Thanks in advance! :)</p>\n"},{"tags":["java","date","localdate","temporal"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1659552664,"post_id":73226160,"comment_id":129324035,"body_markdown":"Edit your question and show the entire stack trace of the exception.  Then tell us which line the exception occurred at.","body":"Edit your question and show the entire stack trace of the exception.  Then tell us which line the exception occurred at."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1659555839,"post_id":73226160,"comment_id":129325008,"body_markdown":"While the question is clear enough since the code presented cannot work correctly, I also cannot see how it could throw the exact exception you are mentioning. Probably you played around with versions of your code and ended up presenting one version of the code and the exception from a different version. A clear [mre] with the exact exception observed from the code presented would still be nice.","body":"While the question is clear enough since the code presented cannot work correctly, I also cannot see how it could throw the exact exception you are mentioning. Probably you played around with versions of your code and ended up presenting one version of the code and the exception from a different version. A clear <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with the exact exception observed from the code presented would still be nice."}],"answers":[{"tags":[],"owner":{"account_id":3517130,"reputation":5214,"user_id":2940265,"accept_rate":91,"display_name":"Menuka Ishan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659552576,"creation_date":1659552576,"answer_id":73226388,"question_id":73226160,"body_markdown":"I think the best thing you can do is to see if you can get `LocalDate` for the code \r\n`Date lastServiced = service.getDateOfService();` which means returning `LocalDate` from method `service.getDateOfService();`\r\n\r\nSometimes it is probably not in your control.\r\nTherefore you can try the next best solution, which is to convert Util.Date to a LocalDate.\r\nYou can use the below code for that.\r\n\r\n    LocalDate lastServiceLocalDate = lastServiced.toInstant()\r\n                    .atZone(ZoneId.systemDefault())\r\n                    .toLocalDate();\r\n\r\nNow you have both `LocalDate` so you can use the below code to get days between\r\n\r\n    long daysBetween = DAYS.between(lastServiceLocalDate, today);\r\n\r\n\r\n","title":"ClassCastException: java.util.Date cannot be cast to java.time.temporal.Temporal","body":"<p>I think the best thing you can do is to see if you can get <code>LocalDate</code> for the code\n<code>Date lastServiced = service.getDateOfService();</code> which means returning <code>LocalDate</code> from method <code>service.getDateOfService();</code></p>\n<p>Sometimes it is probably not in your control.\nTherefore you can try the next best solution, which is to convert Util.Date to a LocalDate.\nYou can use the below code for that.</p>\n<pre><code>LocalDate lastServiceLocalDate = lastServiced.toInstant()\n                .atZone(ZoneId.systemDefault())\n                .toLocalDate();\n</code></pre>\n<p>Now you have both <code>LocalDate</code> so you can use the below code to get days between</p>\n<pre><code>long daysBetween = DAYS.between(lastServiceLocalDate, today);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10824992,"reputation":21,"user_id":7961149,"display_name":"Rony Emrul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659554523,"creation_date":1659553606,"answer_id":73226578,"question_id":73226160,"body_markdown":"The `Duration.between()` takes two `Temporal` objects and returns days between as a `long`. Unfortunately, `Date` is not a `Temporal` type object. \r\n\r\nTherefore, you need to convert `Date` into `LocalDate`. I think following code will work.\r\n\r\n```\r\nServiceJpaController serController = new ServiceJpaController(emf);\r\n    List&lt;Service&gt; serviceList = serController.findServiceEntities();\r\n    LocalDate today = LocalDate.now();\r\n    System.out.println(&quot;Today date: &quot;+ today); \r\n    for(Service service:serviceList){\r\n        Date lastServiced = service.getDateOfService();\r\n        System.out.println(&quot;Serviced date: &quot;+ lastServiced);\r\n        long daysBetween = \r\n                Duration.between(       \r\n                    lastServiced\r\n                        .toInstant()\r\n                        .atZone(ZoneId.systemDefault())\r\n                        .toLocalDate(), \r\n                    today\r\n                )\r\n                .toDays();\r\n        if(daysBetween &gt;= 90){\r\n            jTxtAreaServiceDate.append(service.toString());\r\n        }}\r\n```","title":"ClassCastException: java.util.Date cannot be cast to java.time.temporal.Temporal","body":"<p>The <code>Duration.between()</code> takes two <code>Temporal</code> objects and returns days between as a <code>long</code>. Unfortunately, <code>Date</code> is not a <code>Temporal</code> type object.</p>\n<p>Therefore, you need to convert <code>Date</code> into <code>LocalDate</code>. I think following code will work.</p>\n<pre><code>ServiceJpaController serController = new ServiceJpaController(emf);\n    List&lt;Service&gt; serviceList = serController.findServiceEntities();\n    LocalDate today = LocalDate.now();\n    System.out.println(&quot;Today date: &quot;+ today); \n    for(Service service:serviceList){\n        Date lastServiced = service.getDateOfService();\n        System.out.println(&quot;Serviced date: &quot;+ lastServiced);\n        long daysBetween = \n                Duration.between(       \n                    lastServiced\n                        .toInstant()\n                        .atZone(ZoneId.systemDefault())\n                        .toLocalDate(), \n                    today\n                )\n                .toDays();\n        if(daysBetween &gt;= 90){\n            jTxtAreaServiceDate.append(service.toString());\n        }}\n</code></pre>\n"}],"owner":{"account_id":12439751,"reputation":31,"user_id":9058554,"display_name":"Dan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1943,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":73226388,"answer_count":2,"score":0,"last_activity_date":1659554523,"creation_date":1659551298,"question_id":73226160,"body_markdown":"I am trying to work out the number of days between two dates. I am getting an error when I run the code: Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.ClassCastException: java.util.Date cannot be cast to java.time.temporal.Temporal\r\n\r\nHere is my code:\r\n\r\n    ServiceJpaController serController = new ServiceJpaController(emf);\r\n        List&lt;Service&gt; serviceList = serController.findServiceEntities();\r\n        LocalDate today = LocalDate.now();\r\n        System.out.println(&quot;Today date: &quot;+ today); \r\n        for(Service service:serviceList){\r\n            Date lastServiced = service.getDateOfService();\r\n            System.out.println(&quot;Serviced date: &quot;+ lastServiced); \r\n            long daysBetween = Duration.between(lastServiced.toInstant(), today).toDays();\r\n            if(daysBetween &gt;= 90){\r\n                jTxtAreaServiceDate.append(service.toString());\r\n            }}\r\n\r\nThe print statements were added just to check if the variables contained the dates, which they do.\r\nThe output window showed:\r\n\r\n    Today date: 2022-08-03\r\n    \r\n    Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.ClassCastException: java.util.Date cannot be cast to java.time.temporal.Temporal\r\n    \r\n    Serviced date: Sun May 08 00:00:00 BST 2022\r\n\r\nI&#39;ve had a look for a solution but so far have been unable to find anything. If anyone could explain what the error means and how I could go about solving my problem I would be most grateful.\r\n\r\n","title":"ClassCastException: java.util.Date cannot be cast to java.time.temporal.Temporal","body":"<p>I am trying to work out the number of days between two dates. I am getting an error when I run the code: Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.ClassCastException: java.util.Date cannot be cast to java.time.temporal.Temporal</p>\n<p>Here is my code:</p>\n<pre><code>ServiceJpaController serController = new ServiceJpaController(emf);\n    List&lt;Service&gt; serviceList = serController.findServiceEntities();\n    LocalDate today = LocalDate.now();\n    System.out.println(&quot;Today date: &quot;+ today); \n    for(Service service:serviceList){\n        Date lastServiced = service.getDateOfService();\n        System.out.println(&quot;Serviced date: &quot;+ lastServiced); \n        long daysBetween = Duration.between(lastServiced.toInstant(), today).toDays();\n        if(daysBetween &gt;= 90){\n            jTxtAreaServiceDate.append(service.toString());\n        }}\n</code></pre>\n<p>The print statements were added just to check if the variables contained the dates, which they do.\nThe output window showed:</p>\n<pre><code>Today date: 2022-08-03\n\nException in thread &quot;AWT-EventQueue-0&quot; java.lang.ClassCastException: java.util.Date cannot be cast to java.time.temporal.Temporal\n\nServiced date: Sun May 08 00:00:00 BST 2022\n</code></pre>\n<p>I've had a look for a solution but so far have been unable to find anything. If anyone could explain what the error means and how I could go about solving my problem I would be most grateful.</p>\n"},{"tags":["java","spring","spring-boot","spring-async"],"answers":[{"tags":[],"owner":{"account_id":3713839,"reputation":2046,"user_id":3090506,"display_name":"Moritz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659554134,"creation_date":1659554134,"answer_id":73226669,"question_id":73222608,"body_markdown":"`executorService.schedule` returns a `ScheduledFuture` which provides a `cancel` method to cancel its execution. `cancel` takes a single boolean parameter `mayInterruptIfRunning` which, when set to `false`, will only cancel the execution if the task has not started yet. See also [the docs][1].\r\n\r\nUsing this you could do something like this:\r\n```\r\nprivate ScheduledExecutorService executorService = Executors.newSingleThreadScheduledExecutor();\r\n\r\nprivate ScheduledFuture&lt;?&gt; future;\r\n\r\npublic void sendDelayed(String info) {\r\n    // When there is a task that has not been started yet, stop it:\r\n    if (future != null) {\r\n        boolean cancelled = future.cancel(false);\r\n        if (cancelled) {\r\n            logger.debug(&quot;Task has been cancelled before execution&quot;);\r\n        } else {\r\n            logger.debug(&quot;Task is already running or has been completed&quot;);\r\n        }\r\n    }\r\n\r\n    // Old task has been cancelled or already started - schedule a new task\r\n    future = executorService.schedule(Classname::someTask, 60, TimeUnit.SECONDS);\r\n}\r\n```\r\n\r\nYou may have to take care of avoiding race conditions regarding concurrent access to the `future` field though.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Future.html#cancel(boolean)","title":"How to delay a scheduled task with Spring?","body":"<p><code>executorService.schedule</code> returns a <code>ScheduledFuture</code> which provides a <code>cancel</code> method to cancel its execution. <code>cancel</code> takes a single boolean parameter <code>mayInterruptIfRunning</code> which, when set to <code>false</code>, will only cancel the execution if the task has not started yet. See also <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Future.html#cancel(boolean)\" rel=\"nofollow noreferrer\">the docs</a>.</p>\n<p>Using this you could do something like this:</p>\n<pre><code>private ScheduledExecutorService executorService = Executors.newSingleThreadScheduledExecutor();\n\nprivate ScheduledFuture&lt;?&gt; future;\n\npublic void sendDelayed(String info) {\n    // When there is a task that has not been started yet, stop it:\n    if (future != null) {\n        boolean cancelled = future.cancel(false);\n        if (cancelled) {\n            logger.debug(&quot;Task has been cancelled before execution&quot;);\n        } else {\n            logger.debug(&quot;Task is already running or has been completed&quot;);\n        }\n    }\n\n    // Old task has been cancelled or already started - schedule a new task\n    future = executorService.schedule(Classname::someTask, 60, TimeUnit.SECONDS);\n}\n</code></pre>\n<p>You may have to take care of avoiding race conditions regarding concurrent access to the <code>future</code> field though.</p>\n"}],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":938,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73226669,"answer_count":1,"score":1,"last_activity_date":1659554134,"creation_date":1659533375,"question_id":73222608,"body_markdown":"I&#39;d like to create a method that delays the execution on method invocation by 60s.\r\n\r\nProblem: if the method is called within that 60s, I want it to be delayed again by 60s from last point of invocation. If then not called within 60s, the execution may continue.\r\n\r\nI started as follows, but of course this is only a one-time delay:\r\n\r\n    public void sendDelayed(String info) {\r\n       //TODO create a task is delayed by +60s for each method invocation \r\n       ScheduledExecutorService executorService = Executors.newSingleThreadScheduledExecutor();\r\n       executorService.schedule(Classname::someTask, 60, TimeUnit.SECONDS);\r\n    }\r\n\r\nHow could I further delay the execution on each invocation?","title":"How to delay a scheduled task with Spring?","body":"<p>I'd like to create a method that delays the execution on method invocation by 60s.</p>\n<p>Problem: if the method is called within that 60s, I want it to be delayed again by 60s from last point of invocation. If then not called within 60s, the execution may continue.</p>\n<p>I started as follows, but of course this is only a one-time delay:</p>\n<pre><code>public void sendDelayed(String info) {\n   //TODO create a task is delayed by +60s for each method invocation \n   ScheduledExecutorService executorService = Executors.newSingleThreadScheduledExecutor();\n   executorService.schedule(Classname::someTask, 60, TimeUnit.SECONDS);\n}\n</code></pre>\n<p>How could I further delay the execution on each invocation?</p>\n"},{"tags":["java","amazon-web-services","architecture","rmi","aws-auto-scaling"],"answers":[{"tags":[],"owner":{"account_id":2851782,"reputation":9016,"user_id":2448829,"display_name":"Rob Conklin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659554095,"creation_date":1659554095,"answer_id":73226662,"question_id":73202775,"body_markdown":"Get rid of your response thread altogether.  Have the client poll the cache for the full response statelessly so that you don&#39;t need state maintained in the middleware (tomcat).  Stick your responses in ElastiCache or Redis from the backend, and when they show up the client will find them.  \r\n\r\nIf you want to avoid the poll all the way from the client, you can do long-waits in the middleware, but still, make them stateless and have them poll the cache on a timer, but really you are just making another choke-point, you are better off fully stateless.","title":"Handling Java RMI in AWS ASG","body":"<p>Get rid of your response thread altogether.  Have the client poll the cache for the full response statelessly so that you don't need state maintained in the middleware (tomcat).  Stick your responses in ElastiCache or Redis from the backend, and when they show up the client will find them.</p>\n<p>If you want to avoid the poll all the way from the client, you can do long-waits in the middleware, but still, make them stateless and have them poll the cache on a timer, but really you are just making another choke-point, you are better off fully stateless.</p>\n"}],"owner":{"account_id":3251392,"reputation":2738,"user_id":2741526,"accept_rate":0,"display_name":"Dheerendra Kulkarni"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1659554095,"creation_date":1659421005,"question_id":73202775,"body_markdown":"We have 2 services front end api service and a backend service. In order to get high tps we are using async calls. \r\n\r\n 1. End user http call lands on one of the tomcat servers in frontend\r\n 2. The frontend calls backend in Async with the context of the server ip and puts the request thread to sleep\r\n 3. Once backend finishes the job it makes a callback to frontend using rmi with the server ip it got in context\r\n4. In the callback the original http thread is invoked.\r\n5. The invoked http request thread consumes the prepared data from cache and completes the response.\r\n\r\nThis was fine till we were in physical DC as we used to not scale or de-scale. With AWS ASG the server ip might not exist by the time backend service tries to make a callback. Due to this the request at the user end needs to get retried.\r\n\r\nWe want to get out of RMI here and still remain async.\r\nWould like to get any solutions for this","title":"Handling Java RMI in AWS ASG","body":"<p>We have 2 services front end api service and a backend service. In order to get high tps we are using async calls.</p>\n<ol>\n<li>End user http call lands on one of the tomcat servers in frontend</li>\n<li>The frontend calls backend in Async with the context of the server ip and puts the request thread to sleep</li>\n<li>Once backend finishes the job it makes a callback to frontend using rmi with the server ip it got in context</li>\n<li>In the callback the original http thread is invoked.</li>\n<li>The invoked http request thread consumes the prepared data from cache and completes the response.</li>\n</ol>\n<p>This was fine till we were in physical DC as we used to not scale or de-scale. With AWS ASG the server ip might not exist by the time backend service tries to make a callback. Due to this the request at the user end needs to get retried.</p>\n<p>We want to get out of RMI here and still remain async.\nWould like to get any solutions for this</p>\n"},{"tags":["java","intellij-idea","code-coverage","jacoco"],"answers":[{"tags":[],"owner":{"account_id":1353454,"reputation":4045,"user_id":1292323,"accept_rate":91,"display_name":"kgui"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1492633056,"creation_date":1492633056,"answer_id":43505318,"question_id":43500774,"body_markdown":"Have you looked at this document\r\n: https://www.jetbrains.com/help/idea/2017.1/code-coverage.html\r\n\r\nThey describe how to do such a task.","title":"JaCoCo with IntelliJ","body":"<p>Have you looked at this document\n: <a href=\"https://www.jetbrains.com/help/idea/2017.1/code-coverage.html\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/idea/2017.1/code-coverage.html</a></p>\n\n<p>They describe how to do such a task.</p>\n"},{"tags":[],"owner":{"account_id":104440,"reputation":5525,"user_id":279236,"display_name":"jwenting"},"down_vote_count":2,"up_vote_count":19,"is_accepted":false,"score":17,"last_activity_date":1501744707,"creation_date":1501744707,"answer_id":45477394,"question_id":43500774,"body_markdown":"You don&#39;t need to do anything, if you have a recent version of IntelliJ.\r\nJust select to use JaCoCo as the coverage tool in the run configuration for your test suite or project and it will use its built-in JaCoCo version.","title":"JaCoCo with IntelliJ","body":"<p>You don't need to do anything, if you have a recent version of IntelliJ.\nJust select to use JaCoCo as the coverage tool in the run configuration for your test suite or project and it will use its built-in JaCoCo version.</p>\n"},{"tags":[],"owner":{"account_id":8986718,"reputation":2467,"user_id":6700081,"accept_rate":73,"display_name":"firstpostcommenter"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1582438933,"creation_date":1562851156,"answer_id":56990191,"question_id":43500774,"body_markdown":"Intellij shows code coverage in the IDE. There is no need to install any extra plugins\r\n\r\n\r\nwhen you right click on a Test.java file to run the unit test then there will be 3 options\r\n\r\n    Run &quot;Test&quot;\r\n    Debug &quot;Test&quot;\r\n    Run &quot;Test&quot; with **coverage**\r\n\r\nSecondly, if you also want the branch coverage details then,\r\n\r\nafter running the test(as mentioned above) once, then then go to `edit configuration -&gt; at left side under Junit select the respective Test.java file -&gt; select Code Coverage tab in the main window -&gt; select Tracing radio button and tick the Track per test coverage checkbox`","title":"JaCoCo with IntelliJ","body":"<p>Intellij shows code coverage in the IDE. There is no need to install any extra plugins</p>\n\n<p>when you right click on a Test.java file to run the unit test then there will be 3 options</p>\n\n<pre><code>Run \"Test\"\nDebug \"Test\"\nRun \"Test\" with **coverage**\n</code></pre>\n\n<p>Secondly, if you also want the branch coverage details then,</p>\n\n<p>after running the test(as mentioned above) once, then then go to <code>edit configuration -&gt; at left side under Junit select the respective Test.java file -&gt; select Code Coverage tab in the main window -&gt; select Tracing radio button and tick the Track per test coverage checkbox</code></p>\n"},{"tags":[],"owner":{"account_id":2368273,"reputation":516,"user_id":2073526,"display_name":"Stevers"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1584834914,"creation_date":1584834914,"answer_id":60794555,"question_id":43500774,"body_markdown":"1. You have to open your Run Configuration\r\n\r\n     1A. (top right by default) `Tests in &lt;project package&gt;`\r\n\r\n     1B. If you can&#39;t find it, you can go to the `Run` menu at the top, then click the `Run &gt; ...` option.  This will show you your configurations.\r\n\r\n2. click `Edit Configurations`. Find your `Tests in &lt;project package&gt;` configuration.\r\n\r\n3. Find Second tab from the left is `Code Coverage`. Choose Coverage Runner: `Jacoco`.\r\n\r\n4. `Apply`. `OK`. \r\n\r\n5. Run tests again :).\r\n\r\n","title":"JaCoCo with IntelliJ","body":"<ol>\n<li><p>You have to open your Run Configuration</p>\n\n<p>1A. (top right by default) <code>Tests in &lt;project package&gt;</code></p>\n\n<p>1B. If you can't find it, you can go to the <code>Run</code> menu at the top, then click the <code>Run &gt; ...</code> option.  This will show you your configurations.</p></li>\n<li><p>click <code>Edit Configurations</code>. Find your <code>Tests in &lt;project package&gt;</code> configuration.</p></li>\n<li><p>Find Second tab from the left is <code>Code Coverage</code>. Choose Coverage Runner: <code>Jacoco</code>.</p></li>\n<li><p><code>Apply</code>. <code>OK</code>. </p></li>\n<li><p>Run tests again :).</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4385157,"reputation":849,"user_id":3575560,"display_name":"solimant"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1588319147,"creation_date":1588319147,"answer_id":61538644,"question_id":43500774,"body_markdown":"To elaborate on [jwenting][0]&#39;s answer, go to **Run** &gt; **Edit Configurations...**, and on the **Code Coverage** tab of your _Run Configuration_, select **JaCoCo** from the **Choose coverage runner** dropdown.\r\n\r\n[![Run Configuration Screenshot][1]][1]\r\n\r\n[0]: https://stackoverflow.com/users/279236/jwenting\r\n[1]: https://i.stack.imgur.com/a83jH.png","title":"JaCoCo with IntelliJ","body":"<p>To elaborate on <a href=\"https://stackoverflow.com/users/279236/jwenting\">jwenting</a>'s answer, go to <strong>Run</strong> > <strong>Edit Configurations...</strong>, and on the <strong>Code Coverage</strong> tab of your <em>Run Configuration</em>, select <strong>JaCoCo</strong> from the <strong>Choose coverage runner</strong> dropdown.</p>\n\n<p><a href=\"https://i.stack.imgur.com/a83jH.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/a83jH.png\" alt=\"Run Configuration Screenshot\"></a></p>\n"},{"tags":[],"owner":{"account_id":10160189,"reputation":301,"user_id":9761598,"display_name":"Ron HD"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1637181865,"creation_date":1637181865,"answer_id":70011303,"question_id":43500774,"body_markdown":"With IntelliJ 2021.2.1 (and possibly prior to that), Jetbrains switched the default to a bundled code coverage runner they provide. But it does not provide branch coverage, as JaCoCo does. JaCoCo is not listed in Plugins, but it was available as an alternative for me (perhaps because it&#39;s in the Maven POM).\r\n\r\nThe solution above using Run -&gt; Edit Configurations will change a single run configuration (e.g. for a single JUnit test class). To change it for all new ones, after going to Run -&gt; Edit Configurations, click **Edit Configuration Templates** on the lower left, and change the coverage runner there.","title":"JaCoCo with IntelliJ","body":"<p>With IntelliJ 2021.2.1 (and possibly prior to that), Jetbrains switched the default to a bundled code coverage runner they provide. But it does not provide branch coverage, as JaCoCo does. JaCoCo is not listed in Plugins, but it was available as an alternative for me (perhaps because it's in the Maven POM).</p>\n<p>The solution above using Run -&gt; Edit Configurations will change a single run configuration (e.g. for a single JUnit test class). To change it for all new ones, after going to Run -&gt; Edit Configurations, click <strong>Edit Configuration Templates</strong> on the lower left, and change the coverage runner there.</p>\n"},{"tags":[],"owner":{"account_id":19358745,"reputation":386,"user_id":14898689,"display_name":"henry sneed"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1659553954,"creation_date":1650297426,"answer_id":71914106,"question_id":43500774,"body_markdown":"Thank you to all of the preceding answers. The following may be helpful for anyone using later versions of Intellij:\r\n\r\n## Community 2022.1 &amp; Community 2022.2\r\n\r\n**Run**  **Edit Configurations**  **Modify Options**  **Specify alternate coverage runner**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/B2PHR.png\r\n  [2]: https://i.stack.imgur.com/OZUri.png\r\n  [3]: https://i.stack.imgur.com/Idus1.png\r\n\r\nand finally **Apply**  **OK**","title":"JaCoCo with IntelliJ","body":"<p>Thank you to all of the preceding answers. The following may be helpful for anyone using later versions of Intellij:</p>\n<h2>Community 2022.1 &amp; Community 2022.2</h2>\n<p><strong>Run</strong>  <strong>Edit Configurations</strong>  <strong>Modify Options</strong>  <strong>Specify alternate coverage runner</strong></p>\n<p><a href=\"https://i.stack.imgur.com/B2PHR.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/B2PHR.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/OZUri.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/OZUri.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/Idus1.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Idus1.png\" alt=\"enter image description here\" /></a></p>\n<p>and finally <strong>Apply</strong>  <strong>OK</strong></p>\n"},{"tags":[],"owner":{"account_id":18188316,"reputation":11,"user_id":13234587,"display_name":"David Mu&#241;oz Santos"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1652270334,"creation_date":1652270334,"answer_id":72200681,"question_id":43500774,"body_markdown":"To apply JaCoCo to all future coverage runs, you can modify the Junit template and next coverage runs use this coverage.\r\n\r\n1. Go to `Run/Debug Configurations`\r\n2. Click `Edit Configuration templates...`\r\n3. In `Build and run`, click `Modify Options` and select `Code Coverage/Specific alternative coverage runner`\r\n4. A new `Code Coverage` appear. Select `JaCoCo`\r\n5. Click `OK` or `Apply` button","title":"JaCoCo with IntelliJ","body":"<p>To apply JaCoCo to all future coverage runs, you can modify the Junit template and next coverage runs use this coverage.</p>\n<ol>\n<li>Go to <code>Run/Debug Configurations</code></li>\n<li>Click <code>Edit Configuration templates...</code></li>\n<li>In <code>Build and run</code>, click <code>Modify Options</code> and select <code>Code Coverage/Specific alternative coverage runner</code></li>\n<li>A new <code>Code Coverage</code> appear. Select <code>JaCoCo</code></li>\n<li>Click <code>OK</code> or <code>Apply</code> button</li>\n</ol>\n"}],"owner":{"account_id":1816320,"reputation":427,"user_id":1651332,"accept_rate":50,"display_name":"Ixbitz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64031,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"answer_count":8,"score":27,"last_activity_date":1659553954,"creation_date":1492617829,"question_id":43500774,"body_markdown":"So this question might not be really specific, but i&#39;m asking it anyway.\r\n\r\nI&#39;m trying to use JaCoCo with IntelliJ to gather coverage reports on unit tests. However, i don&#39;t have any experience whatsoever to set this up. \r\n\r\nIn Netbeans you just have to install the JaCoCo plugin and select to test with coverage. How does this work in IntelliJ?\r\n\r\nI have googeled for quite a while without success. If someone has a good tutorial to set this up, i&#39;d really appreciate it!\r\n","title":"JaCoCo with IntelliJ","body":"<p>So this question might not be really specific, but i'm asking it anyway.</p>\n\n<p>I'm trying to use JaCoCo with IntelliJ to gather coverage reports on unit tests. However, i don't have any experience whatsoever to set this up. </p>\n\n<p>In Netbeans you just have to install the JaCoCo plugin and select to test with coverage. How does this work in IntelliJ?</p>\n\n<p>I have googeled for quite a while without success. If someone has a good tutorial to set this up, i'd really appreciate it!</p>\n"},{"tags":["java","spring-boot","jms","amazon-sqs","spring-jms"],"comments":[{"owner":{"account_id":17019087,"reputation":736,"user_id":12312156,"display_name":"Faramarz Afzali"},"score":0,"creation_date":1659516386,"post_id":73218491,"comment_id":129311013,"body_markdown":"Maybe https://stackoverflow.com/questions/72222616/high-cpu-usage-from-the-spring-defaultmessagelistenercontainer-thread\nor https://stackoverflow.com/questions/63604061/spring-message-listener-connection-refresh\nhelp you","body":"Maybe <a href=\"https://stackoverflow.com/questions/72222616/high-cpu-usage-from-the-spring-defaultmessagelistenercontainer-thread\" title=\"high cpu usage from the spring defaultmessagelistenercontainer thread\">stackoverflow.com/questions/72222616/&hellip;</a> or <a href=\"https://stackoverflow.com/questions/63604061/spring-message-listener-connection-refresh\" title=\"spring message listener connection refresh\">stackoverflow.com/questions/63604061/&hellip;</a> help you"},{"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1659552870,"post_id":73218491,"comment_id":129324102,"body_markdown":"Why *wouldn&#39;t* the CPU spike when messages are being dispatched and consumed quickly? That work isn&#39;t free.","body":"Why <i>wouldn&#39;t</i> the CPU spike when messages are being dispatched and consumed quickly? That work isn&#39;t free."},{"owner":{"account_id":25965197,"reputation":1,"user_id":19681222,"display_name":"Mickael Barbin"},"score":0,"creation_date":1659597773,"post_id":73218491,"comment_id":129333425,"body_markdown":"@JustinBertram doesn&#39;t seems logical to me, I have the same number of concurrent listener in both case. The queue is unstacked fastly because the listener use less time to compute each message when our business process is KO","body":"@JustinBertram doesn&#39;t seems logical to me, I have the same number of concurrent listener in both case. The queue is unstacked fastly because the listener use less time to compute each message when our business process is KO"},{"owner":{"account_id":25965197,"reputation":1,"user_id":19681222,"display_name":"Mickael Barbin"},"score":0,"creation_date":1659598139,"post_id":73218491,"comment_id":129333546,"body_markdown":"@FaramarzAfzali thanks for the links, I already tried to update some of the given properties  with no luck so far.\nI will retest it later on just to be sure","body":"@FaramarzAfzali thanks for the links, I already tried to update some of the given properties  with no luck so far. I will retest it later on just to be sure"},{"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1659628579,"post_id":73218491,"comment_id":129345154,"body_markdown":"It seems plausible to me that the SQS client and any pre-delivery message processing tasks used by your Spring `@JmsListener` are taking up additional CPU time as the consumption rate increases. As noted previously, that work isn&#39;t free. You should gather thread-dumps from your application when the CPU spikes to see what the application is actually doing during that time.","body":"It seems plausible to me that the SQS client and any pre-delivery message processing tasks used by your Spring <code>@JmsListener</code> are taking up additional CPU time as the consumption rate increases. As noted previously, that work isn&#39;t free. You should gather thread-dumps from your application when the CPU spikes to see what the application is actually doing during that time."},{"owner":{"account_id":25965197,"reputation":1,"user_id":19681222,"display_name":"Mickael Barbin"},"score":0,"creation_date":1660034567,"post_id":73218491,"comment_id":129431264,"body_markdown":"@JustinBertram yes it&#39;s seems to be exactly that. \nWe solved it by adding a rateLimiter into the JMSListener in order to limit the consumption rate when our service B goes down.","body":"@JustinBertram yes it&#39;s seems to be exactly that.  We solved it by adding a rateLimiter into the JMSListener in order to limit the consumption rate when our service B goes down."}],"owner":{"account_id":25965197,"reputation":1,"user_id":19681222,"display_name":"Mickael Barbin"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1247,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659553373,"creation_date":1659514969,"question_id":73218491,"body_markdown":"We have the following use case:\r\n\r\n- System process feeds an SQS queue with a large number of message (about 140 000)\r\n- Java Spring Boot micro-service `A` handles messages from SQS queue\r\n- Micro-service `A` calls micro-service `B` on each message and then does business processes\r\n\r\nWhen everything works fine each message is processed in about 1000ms, but when micro-service `B` is down the message is processed in about 10ms because we have no other processes to do. When that happens micro-service `A` unstack the queue very quickly, but the CPU usage of the EC2 instance spike to 100%.\r\n\r\nTo test it we have run our process, shutdown the micro-service `B` during about 30min and then restart micro-service `B`. We took screenshots of CPU usage, response time, and throughput during this test.\r\n\r\nWe have set up the concurrent number of message processed to 4 in the `DefaultJmsListenerContainerFactory` and use the Spring Boot `@JmsListener` annotation to handle SQS messages.\r\n\r\nMessages are mapped through a jackson message converter.\r\n\r\nI attached below some images helping understand our issue and the use case.\r\n\r\n - A NewRelic screenshot showing elapsed time and throughput of the listener:\r\n[![][1]][1]\r\n - an AWS screenshot of the CPU usage on the EC2 instance:\r\n[![][2]][2]\r\n - an SQS screenshot of the number of message in the queue (to show it&#39;s unstacking quickly):\r\n[![][3]][3]\r\n - a diagram to explain the test and use case:\r\n[![][4]][4]\r\n\r\nAny idea why the CPU spike to 100% when message are handled very quickly? \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RSSfN.png\r\n  [2]: https://i.stack.imgur.com/E8sFd.png\r\n  [3]: https://i.stack.imgur.com/Of2tv.png\r\n  [4]: https://i.stack.imgur.com/Ky00x.png","title":"Spring Boot listener high CPU consumption on high throughput","body":"<p>We have the following use case:</p>\n<ul>\n<li>System process feeds an SQS queue with a large number of message (about 140 000)</li>\n<li>Java Spring Boot micro-service <code>A</code> handles messages from SQS queue</li>\n<li>Micro-service <code>A</code> calls micro-service <code>B</code> on each message and then does business processes</li>\n</ul>\n<p>When everything works fine each message is processed in about 1000ms, but when micro-service <code>B</code> is down the message is processed in about 10ms because we have no other processes to do. When that happens micro-service <code>A</code> unstack the queue very quickly, but the CPU usage of the EC2 instance spike to 100%.</p>\n<p>To test it we have run our process, shutdown the micro-service <code>B</code> during about 30min and then restart micro-service <code>B</code>. We took screenshots of CPU usage, response time, and throughput during this test.</p>\n<p>We have set up the concurrent number of message processed to 4 in the <code>DefaultJmsListenerContainerFactory</code> and use the Spring Boot <code>@JmsListener</code> annotation to handle SQS messages.</p>\n<p>Messages are mapped through a jackson message converter.</p>\n<p>I attached below some images helping understand our issue and the use case.</p>\n<ul>\n<li>A NewRelic screenshot showing elapsed time and throughput of the listener:\n<a href=\"https://i.stack.imgur.com/RSSfN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RSSfN.png\" alt=\"\" /></a></li>\n<li>an AWS screenshot of the CPU usage on the EC2 instance:\n<a href=\"https://i.stack.imgur.com/E8sFd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/E8sFd.png\" alt=\"\" /></a></li>\n<li>an SQS screenshot of the number of message in the queue (to show it's unstacking quickly):\n<a href=\"https://i.stack.imgur.com/Of2tv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Of2tv.png\" alt=\"\" /></a></li>\n<li>a diagram to explain the test and use case:\n<a href=\"https://i.stack.imgur.com/Ky00x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ky00x.png\" alt=\"\" /></a></li>\n</ul>\n<p>Any idea why the CPU spike to 100% when message are handled very quickly?</p>\n"},{"tags":["java","spring","configuration","spring-cloud"],"comments":[{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1659477339,"post_id":73214153,"comment_id":129303376,"body_markdown":"spring.config.import and bootstrap are mutually exclusive. Pick one or the other","body":"spring.config.import and bootstrap are mutually exclusive. Pick one or the other"},{"owner":{"account_id":24010991,"reputation":1,"user_id":17994585,"display_name":"DaveySC"},"score":0,"creation_date":1659479269,"post_id":73214153,"comment_id":129303835,"body_markdown":"@spencergibb I&#39;ve used this configuration: spring.cloud.config.uri: http://configserver:8071 instead spring.config.import but it still doesn&#39;t work","body":"@spencergibb I&#39;ve used this configuration: spring.cloud.config.uri: <a href=\"http://configserver:8071\" rel=\"nofollow noreferrer\">configserver:8071</a> instead spring.config.import but it still doesn&#39;t work"}],"owner":{"account_id":24010991,"reputation":1,"user_id":17994585,"display_name":"DaveySC"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":793,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659552987,"creation_date":1659477024,"question_id":73214153,"body_markdown":"I&#39;m creating a configuration server using spring cloud and when I&#39;m trying to get my configuration info from git using `http://localhost:8071/licensing-service/dev` it works perfectly.\r\n\r\nBut when I specify the active profile `dev` in my configuration-client application \r\nit sends request on `http://localhost:8071/licensing-service/default` where as it should be sending request on `http://localhost:8071/licensing-service/dev`.\r\n\r\nHere is the debug info from configuration-client:\r\n\r\n    2022-08-03 01:44:11.999  INFO 11828 --- [           main] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8071\r\n        2022-08-03 01:44:12.000 DEBUG 11828 --- [           main] o.s.web.client.RestTemplate              : HTTP GET http://localhost:8071/licensing-service/default\r\n        2022-08-03 01:44:12.003 DEBUG 11828 --- [           main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]\r\n        2022-08-03 01:44:12.677 DEBUG 11828 --- [           main] o.s.web.client.RestTemplate              : Response 200 OK\r\n        2022-08-03 01:44:12.678 DEBUG 11828 --- [           main] o.s.web.client.RestTemplate              : Reading to [org.springframework.cloud.config.environment.Environment]\r\n        2022-08-03 01:44:12.679  INFO 11828 --- [           main] c.c.c.ConfigServicePropertySourceLocator : Located environment: name=licensing-service, profiles=[default], label=null, version=a846a28be97b432d11b0ec2a9476fa3c933ac5fc, state=null\r\n        2022-08-03 01:44:12.680  INFO 11828 --- [           main] b.c.PropertySourceBootstrapConfiguration : Located property source: [BootstrapPropertySource {name=&#39;bootstrapProperties-configClient&#39;}, BootstrapPropertySource {name=&#39;bootstrapProperties-https://github.com/DaveySC/config.git/file:C:\\Users\\hrisa\\AppData\\Local\\Temp\\config-repo-12695370095836324476\\licensing-service.yaml&#39;}]\r\n        2022-08-03 01:44:12.687  INFO 11828 --- [           main] c.e.l.LicensingServiceApplication        : The following 1 profile is active: &quot;dev&quot;\r\n        2022-08-03 01:44:12.687 DEBUG 11828 --- [           main] o.s.boot.SpringApplication               : Loading source class com.example.licensingsevice.LicensingServiceApplication,class org.springframework.cloud.bootstrap.BootstrapApplicationListener$BootstrapMarkerConfiguration\r\n        2022-08-03 01:44:12.708  INFO 11828 --- [           main] o.s.c.c.c.ConfigServerConfigDataLoader   : Fetching config from server at : http://localhost:8071\r\n        2022-08-03 01:44:12.708  INFO 11828 --- [           main] o.s.c.c.c.ConfigServerConfigDataLoader   : Located environment: name=licensing-service, profiles=[dev], label=null, version=a846a28be97b432d11b0ec2a9476fa3c933ac5fc, state=null\r\n        2022-08-03 01:44:12.709 DEBUG 11828 --- [           main] ConfigServletWebServerApplicationContext : Refreshing org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@50d3bf39\r\n        2022-08-03 01:44:13.482  INFO 11828 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n        2022-08-03 01:44:13.495 DEBUG 11828 --- [           main] o.s.b.a.AutoConfigurationPackages        : @EnableAutoConfiguration was declared on a class in the package &#39;com.example.licensingsevice&#39;. Automatic @Repository and @Entity scanning is enabled.\r\n        2022-08-03 01:44:13.538  INFO 11828 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 46 ms. Found 1 JPA repository interfaces.\r\n        2022-08-03 01:44:13.750  INFO 11828 --- [           main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=ed5de582-c803-356a-a378-fc5af6eb571e\r\n        2022-08-03 01:44:14.113 DEBUG 11828 --- [           main] .s.b.w.e.t.TomcatServletWebServerFactory : Code archive: C:\\Users\\hrisa\\.m2\\repository\\org\\springframework\\boot\\spring-boot\\2.7.2\\spring-boot-2.7.2.jar\r\n        2022-08-03 01:44:14.113 DEBUG 11828 --- [           main] .s.b.w.e.t.TomcatServletWebServerFactory : Code archive: C:\\Users\\hrisa\\.m2\\repository\\org\\springframework\\boot\\spring-boot\\2.7.2\\spring-boot-2.7.2.jar\r\n        2022-08-03 01:44:14.113 DEBUG 11828 --- [           main] .s.b.w.e.t.TomcatServletWebServerFactory : None of the document roots [src/main/webapp, public, static] point to a directory and will be ignored.\r\n        2022-08-03 01:44:14.133  INFO 11828 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n        2022-08-03 01:44:14.141  INFO 11828 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n        2022-08-03 01:44:14.142  INFO 11828 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.65]\r\n        2022-08-03 01:44:14.295  INFO 11828 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n        2022-08-03 01:44:14.295 DEBUG 11828 --- [           main] w.s.c.ServletWebServerApplicationContext : Published root WebApplicationContext as ServletContext attribute with name [org.springframework.web.context.WebApplicationContext.ROOT]\r\n        2022-08-03 01:44:14.295  INFO 11828 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1586 ms\r\n        2022-08-03 01:44:14.390 ERROR 11828 --- [           main] o.s.b.web.embedded.tomcat.TomcatStarter  : Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name &#39;webMvcMetricsFilter&#39; defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/web/servlet/WebMvcMetricsAutoConfiguration.class]: Unsatisfied dependency expressed through method &#39;webMvcMetricsFilter&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;simpleMeterRegistry&#39; defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/export/simple/SimpleMetricsExportAutoConfiguration.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;dataSourcePoolMetadataMeterBinder&#39; defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/jdbc/DataSourcePoolMetricsAutoConfiguration$DataSourcePoolMetadataMetricsConfiguration.class]: Unsatisfied dependency expressed through method &#39;dataSourcePoolMetadataMeterBinder&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\r\n        2022-08-03 01:44:14.410  INFO 11828 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\n        2022-08-03 01:44:14.419  WARN 11828 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\r\n        2022-08-03 01:44:14.443 DEBUG 11828 --- [           main] ConditionEvaluationReportLoggingListener : \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nHere is the main class of this server, pom and bootstrap.yml\r\n\r\n    package com.example.configurationserver;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.cloud.config.server.EnableConfigServer;\r\n    import org.springframework.cloud.context.config.annotation.RefreshScope;\r\n    \r\n    \r\n        @SpringBootApplication\r\n        @EnableConfigServer\r\n        @RefreshScope\r\n        public class ConfigurationServerApplication {\r\n        \r\n        \tpublic static void main(String[] args) {\r\n        \t\tSpringApplication.run(ConfigurationServerApplication.class, args);\r\n        \t}\r\n        \r\n        }\r\n\r\n pom.xml\r\n\r\n       &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.7.2&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;configuration-server&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;configuration-server&lt;/name&gt;\r\n    \t&lt;description&gt;configuration-server&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n    \t\t&lt;spring-cloud.version&gt;2021.0.3&lt;/spring-cloud.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-cloud-config-server&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;de.codecentric&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-admin-starter-client&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.7.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \t&lt;dependencyManagement&gt;\r\n    \t\t&lt;dependencies&gt;\r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n    \t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n    \t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \t\t&lt;/dependencies&gt;\r\n    \t&lt;/dependencyManagement&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\nbootstrap.yml\r\n\r\n    spring:\r\n      application:\r\n        name: configuration-server\r\n      profiles:\r\n        active: git\r\n      cloud:\r\n        config:\r\n          server:\r\n            git:\r\n              default-label: main\r\n              uri: https://github.com/DaveySC/config.git\r\n      boot:\r\n        admin:\r\n          client:\r\n            url: http://localhost:8080\r\n    \r\n    server:\r\n      port: 8071\r\n    \r\n    management:\r\n      endpoints:\r\n        web:\r\n          exposure:\r\n            include: &quot;*&quot;\r\nHere are the client files: &lt;br&gt;\r\npom.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;parent&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.2&lt;/version&gt;\r\n            &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n        &lt;/parent&gt;\r\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n        &lt;artifactId&gt;licensing-service&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n        &lt;name&gt;licensing-service&lt;/name&gt;\r\n        &lt;description&gt;licensing-sevice&lt;/description&gt;\r\n        &lt;properties&gt;\r\n            &lt;java.version&gt;17&lt;/java.version&gt;\r\n            &lt;spring-cloud.version&gt;2021.0.3&lt;/spring-cloud.version&gt;\r\n        &lt;/properties&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-hateoas&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n                &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n                &lt;optional&gt;true&lt;/optional&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n        &lt;dependencyManagement&gt;\r\n            &lt;dependencies&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n                    &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n                    &lt;type&gt;pom&lt;/type&gt;\r\n                    &lt;scope&gt;import&lt;/scope&gt;\r\n                &lt;/dependency&gt;\r\n            &lt;/dependencies&gt;\r\n        &lt;/dependencyManagement&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\nbootstrap.yml\r\n\r\n    spring:\r\n      application:\r\n        name: licensing-service\r\n      config:\r\n        import: optional:configserver:http://localhost:8071\r\n      profiles:\r\n        active: dev\r\n    debug: true\r\n\r\nAnd here is the exception i get:\r\n\r\n    description:\r\n    \r\n    Failed to configure a DataSource: &#39;url&#39; attribute is not specified and no embedded datasource could be configured.\r\n    \r\n    Reason: Failed to determine a suitable driver class\r\n    \r\n    \r\n    Action:\r\n    \r\n    Consider the following:\r\n    \tIf you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\r\n    \tIf you have database settings to be loaded from a particular profile you may need to activate it (the profiles dev are currently active).\r\n\r\n\r\nWhat should i do to make my app send request on the url that depends on the active profile client app?","title":"The spring configuration client ignores active profile when sending request to configuration service","body":"<p>I'm creating a configuration server using spring cloud and when I'm trying to get my configuration info from git using <code>http://localhost:8071/licensing-service/dev</code> it works perfectly.</p>\n<p>But when I specify the active profile <code>dev</code> in my configuration-client application\nit sends request on <code>http://localhost:8071/licensing-service/default</code> where as it should be sending request on <code>http://localhost:8071/licensing-service/dev</code>.</p>\n<p>Here is the debug info from configuration-client:</p>\n<pre><code>2022-08-03 01:44:11.999  INFO 11828 --- [           main] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8071\n    2022-08-03 01:44:12.000 DEBUG 11828 --- [           main] o.s.web.client.RestTemplate              : HTTP GET http://localhost:8071/licensing-service/default\n    2022-08-03 01:44:12.003 DEBUG 11828 --- [           main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]\n    2022-08-03 01:44:12.677 DEBUG 11828 --- [           main] o.s.web.client.RestTemplate              : Response 200 OK\n    2022-08-03 01:44:12.678 DEBUG 11828 --- [           main] o.s.web.client.RestTemplate              : Reading to [org.springframework.cloud.config.environment.Environment]\n    2022-08-03 01:44:12.679  INFO 11828 --- [           main] c.c.c.ConfigServicePropertySourceLocator : Located environment: name=licensing-service, profiles=[default], label=null, version=a846a28be97b432d11b0ec2a9476fa3c933ac5fc, state=null\n    2022-08-03 01:44:12.680  INFO 11828 --- [           main] b.c.PropertySourceBootstrapConfiguration : Located property source: [BootstrapPropertySource {name='bootstrapProperties-configClient'}, BootstrapPropertySource {name='bootstrapProperties-https://github.com/DaveySC/config.git/file:C:\\Users\\hrisa\\AppData\\Local\\Temp\\config-repo-12695370095836324476\\licensing-service.yaml'}]\n    2022-08-03 01:44:12.687  INFO 11828 --- [           main] c.e.l.LicensingServiceApplication        : The following 1 profile is active: &quot;dev&quot;\n    2022-08-03 01:44:12.687 DEBUG 11828 --- [           main] o.s.boot.SpringApplication               : Loading source class com.example.licensingsevice.LicensingServiceApplication,class org.springframework.cloud.bootstrap.BootstrapApplicationListener$BootstrapMarkerConfiguration\n    2022-08-03 01:44:12.708  INFO 11828 --- [           main] o.s.c.c.c.ConfigServerConfigDataLoader   : Fetching config from server at : http://localhost:8071\n    2022-08-03 01:44:12.708  INFO 11828 --- [           main] o.s.c.c.c.ConfigServerConfigDataLoader   : Located environment: name=licensing-service, profiles=[dev], label=null, version=a846a28be97b432d11b0ec2a9476fa3c933ac5fc, state=null\n    2022-08-03 01:44:12.709 DEBUG 11828 --- [           main] ConfigServletWebServerApplicationContext : Refreshing org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@50d3bf39\n    2022-08-03 01:44:13.482  INFO 11828 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n    2022-08-03 01:44:13.495 DEBUG 11828 --- [           main] o.s.b.a.AutoConfigurationPackages        : @EnableAutoConfiguration was declared on a class in the package 'com.example.licensingsevice'. Automatic @Repository and @Entity scanning is enabled.\n    2022-08-03 01:44:13.538  INFO 11828 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 46 ms. Found 1 JPA repository interfaces.\n    2022-08-03 01:44:13.750  INFO 11828 --- [           main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=ed5de582-c803-356a-a378-fc5af6eb571e\n    2022-08-03 01:44:14.113 DEBUG 11828 --- [           main] .s.b.w.e.t.TomcatServletWebServerFactory : Code archive: C:\\Users\\hrisa\\.m2\\repository\\org\\springframework\\boot\\spring-boot\\2.7.2\\spring-boot-2.7.2.jar\n    2022-08-03 01:44:14.113 DEBUG 11828 --- [           main] .s.b.w.e.t.TomcatServletWebServerFactory : Code archive: C:\\Users\\hrisa\\.m2\\repository\\org\\springframework\\boot\\spring-boot\\2.7.2\\spring-boot-2.7.2.jar\n    2022-08-03 01:44:14.113 DEBUG 11828 --- [           main] .s.b.w.e.t.TomcatServletWebServerFactory : None of the document roots [src/main/webapp, public, static] point to a directory and will be ignored.\n    2022-08-03 01:44:14.133  INFO 11828 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n    2022-08-03 01:44:14.141  INFO 11828 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n    2022-08-03 01:44:14.142  INFO 11828 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.65]\n    2022-08-03 01:44:14.295  INFO 11828 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n    2022-08-03 01:44:14.295 DEBUG 11828 --- [           main] w.s.c.ServletWebServerApplicationContext : Published root WebApplicationContext as ServletContext attribute with name [org.springframework.web.context.WebApplicationContext.ROOT]\n    2022-08-03 01:44:14.295  INFO 11828 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1586 ms\n    2022-08-03 01:44:14.390 ERROR 11828 --- [           main] o.s.b.web.embedded.tomcat.TomcatStarter  : Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name 'webMvcMetricsFilter' defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/web/servlet/WebMvcMetricsAutoConfiguration.class]: Unsatisfied dependency expressed through method 'webMvcMetricsFilter' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'simpleMeterRegistry' defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/export/simple/SimpleMetricsExportAutoConfiguration.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataSourcePoolMetadataMeterBinder' defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/jdbc/DataSourcePoolMetricsAutoConfiguration$DataSourcePoolMetadataMetricsConfiguration.class]: Unsatisfied dependency expressed through method 'dataSourcePoolMetadataMeterBinder' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\n    2022-08-03 01:44:14.410  INFO 11828 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n    2022-08-03 01:44:14.419  WARN 11828 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\n    2022-08-03 01:44:14.443 DEBUG 11828 --- [           main] ConditionEvaluationReportLoggingListener : \n</code></pre>\n<p>Here is the main class of this server, pom and bootstrap.yml</p>\n<pre><code>package com.example.configurationserver;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.cloud.config.server.EnableConfigServer;\nimport org.springframework.cloud.context.config.annotation.RefreshScope;\n\n\n    @SpringBootApplication\n    @EnableConfigServer\n    @RefreshScope\n    public class ConfigurationServerApplication {\n    \n        public static void main(String[] args) {\n            SpringApplication.run(ConfigurationServerApplication.class, args);\n        }\n    \n    }\n</code></pre>\n<p>pom.xml</p>\n<pre><code>   &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;configuration-server&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;configuration-server&lt;/name&gt;\n    &lt;description&gt;configuration-server&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;spring-cloud.version&gt;2021.0.3&lt;/spring-cloud.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-config-server&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;de.codecentric&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-admin-starter-client&lt;/artifactId&gt;\n            &lt;version&gt;2.7.1&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>bootstrap.yml</p>\n<pre><code>spring:\n  application:\n    name: configuration-server\n  profiles:\n    active: git\n  cloud:\n    config:\n      server:\n        git:\n          default-label: main\n          uri: https://github.com/DaveySC/config.git\n  boot:\n    admin:\n      client:\n        url: http://localhost:8080\n\nserver:\n  port: 8071\n\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        include: &quot;*&quot;\n</code></pre>\n<p>Here are the client files: <br>\npom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;licensing-service&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;licensing-service&lt;/name&gt;\n    &lt;description&gt;licensing-sevice&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;spring-cloud.version&gt;2021.0.3&lt;/spring-cloud.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-hateoas&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>bootstrap.yml</p>\n<pre><code>spring:\n  application:\n    name: licensing-service\n  config:\n    import: optional:configserver:http://localhost:8071\n  profiles:\n    active: dev\ndebug: true\n</code></pre>\n<p>And here is the exception i get:</p>\n<pre><code>description:\n\nFailed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.\n\nReason: Failed to determine a suitable driver class\n\n\nAction:\n\nConsider the following:\n    If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\n    If you have database settings to be loaded from a particular profile you may need to activate it (the profiles dev are currently active).\n</code></pre>\n<p>What should i do to make my app send request on the url that depends on the active profile client app?</p>\n"},{"tags":["java","multithreading","audio","udp","voip"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1659358807,"post_id":73192524,"comment_id":129268858,"body_markdown":"Declare `l` as a double instead of a long.  `l / audioData.length` is integer math, because both sides are exact values (as opposed to floating-point values).  Although you are assigning the result of that operation to a double, the operation itself truncates its result before the assignment is made.","body":"Declare <code>l</code> as a double instead of a long.  <code>l &#47; audioData.length</code> is integer math, because both sides are exact values (as opposed to floating-point values).  Although you are assigning the result of that operation to a double, the operation itself truncates its result before the assignment is made."},{"owner":{"account_id":404649,"reputation":57172,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"score":0,"creation_date":1659370514,"post_id":73192524,"comment_id":129273412,"body_markdown":"VGR&#39;s suggestion is valid, but if it does not solve your problem, try this: `if(voiceLevel &gt;= this.voiceActivationLevel) this.sender.sendData(this.sample); else this.sender.sendData(EMPTY);` Of course I am not suggesting that you transmit empty packets, but if it does solve the problem, then you know where to look for a fix.","body":"VGR&#39;s suggestion is valid, but if it does not solve your problem, try this: <code>if(voiceLevel &gt;= this.voiceActivationLevel) this.sender.sendData(this.sample); else this.sender.sendData(EMPTY);</code> Of course I am not suggesting that you transmit empty packets, but if it does solve the problem, then you know where to look for a fix."},{"owner":{"account_id":404649,"reputation":57172,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"score":0,"creation_date":1659370651,"post_id":73192524,"comment_id":129273458,"body_markdown":"Also, your volume level checking function looks very expensive. Have you tried invoking the function but then sending the data regardless of the outcome of the function? If the problem persists, then you know that it is the poor performance of that function which is causing the problem.","body":"Also, your volume level checking function looks very expensive. Have you tried invoking the function but then sending the data regardless of the outcome of the function? If the problem persists, then you know that it is the poor performance of that function which is causing the problem."},{"owner":{"account_id":7405785,"reputation":2672,"user_id":5634769,"display_name":"gpasch"},"score":0,"creation_date":1659418233,"post_id":73192524,"comment_id":129283487,"body_markdown":"You have multithreading here - as you correctly indicated - so anything can  garble  your data. You don&#39;t have a single actor and without the data locked it&#39;s up for grabs! If you want to store your data  at your own storage and then send it be my guest. And plus TargetLine does not guarantee anything READ the Docs.","body":"You have multithreading here - as you correctly indicated - so anything can  garble  your data. You don&#39;t have a single actor and without the data locked it&#39;s up for grabs! If you want to store your data  at your own storage and then send it be my guest. And plus TargetLine does not guarantee anything READ the Docs."},{"owner":{"account_id":25859279,"reputation":9,"user_id":19591985,"display_name":"Boltus"},"score":0,"creation_date":1659459004,"post_id":73192524,"comment_id":129298045,"body_markdown":"Thank you all for the advice so far.\nUnfortunately, VGR and Nakis&#39; approaches did not solve the problem\nAccording to gpasch, I checked the docs for java sound api more.\nAnd here seems the problem: https://docs.oracle.com/javase/10/troubleshoot/java-sound.htm#JSTGD490\n\nI thin overrun and underrun conditions are involved in this. As soon as the speakers Dataline is not receiving anymore data, some kind of over- or underrun happens, corrupting the data as described in the article. So I need to find a solution for that.","body":"Thank you all for the advice so far. Unfortunately, VGR and Nakis&#39; approaches did not solve the problem According to gpasch, I checked the docs for java sound api more. And here seems the problem: <a href=\"https://docs.oracle.com/javase/10/troubleshoot/java-sound.htm#JSTGD490\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/10/troubleshoot/java-sound.htm#JSTGD4&zwnj;&#8203;90</a>  I thin overrun and underrun conditions are involved in this. As soon as the speakers Dataline is not receiving anymore data, some kind of over- or underrun happens, corrupting the data as described in the article. So I need to find a solution for that."}],"answers":[{"tags":[],"owner":{"account_id":424804,"reputation":7765,"user_id":805007,"accept_rate":83,"display_name":"Phil Freihofner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659552578,"creation_date":1659477455,"answer_id":73214217,"question_id":73192524,"body_markdown":"I would consider buffering the volume-checking. For example, I wrote a line that takes input from a live microphone&#39;s `TargetDataLine`, converts to PCM and passes the data on to an input track of an audio mixing tool. The key to getting this to work in my situation was providing an intermediate, concurrent-safe FIFO queue. I used a `ConcurrentLinkedQueue&lt;Float[]&gt;` with the float[] arrays holding signed, normalized float &quot;packets&quot; of PCM.\r\n\r\nA more experienced coder than myself used to continuously harp on the following general principle in working with audio: avoid locks. I haven&#39;t read through the code you provided thoroughly enough to know if this is arising in your case, but seeing the keyword `synchronized` in the `playSound` method reminds me of his advice.\r\n\r\nThe only blocking when working with audio, I think, should be that which is built into the blocking queues employed by `TargetDataLine` or `SourceDataLine` read and write methods. I blindly pass on this advice and encourage you to inspect your code for blocking and find alternatives in any situation in your code where a block might occur.","title":"Java Sound transmission over UDP - Sound errors when implementing input level checking method","body":"<p>I would consider buffering the volume-checking. For example, I wrote a line that takes input from a live microphone's <code>TargetDataLine</code>, converts to PCM and passes the data on to an input track of an audio mixing tool. The key to getting this to work in my situation was providing an intermediate, concurrent-safe FIFO queue. I used a <code>ConcurrentLinkedQueue&lt;Float[]&gt;</code> with the float[] arrays holding signed, normalized float &quot;packets&quot; of PCM.</p>\n<p>A more experienced coder than myself used to continuously harp on the following general principle in working with audio: avoid locks. I haven't read through the code you provided thoroughly enough to know if this is arising in your case, but seeing the keyword <code>synchronized</code> in the <code>playSound</code> method reminds me of his advice.</p>\n<p>The only blocking when working with audio, I think, should be that which is built into the blocking queues employed by <code>TargetDataLine</code> or <code>SourceDataLine</code> read and write methods. I blindly pass on this advice and encourage you to inspect your code for blocking and find alternatives in any situation in your code where a block might occur.</p>\n"}],"owner":{"account_id":25859279,"reputation":9,"user_id":19591985,"display_name":"Boltus"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1659552578,"creation_date":1659350501,"question_id":73192524,"body_markdown":"i&#39;m writing a program for simple voice transmission via udp. This works fine, until I implement a method to check the average volume level of a sample-to-be-sent.\r\n\r\nHere I have included the Audio class and the Receiver class and cut out some unimportant stuff.\r\n\r\n```\r\npublic class Audio extends Thread\r\n{\r\n    private AudioFormat defaultAudioFormat = null;\r\n    private TargetDataLine inputLine = null;\r\n    private byte[] sample = new byte[1024];\r\n    private SourceDataLine speakers = null;\r\n    private int voiceActivationLevel = 35;\r\n    private SourceDataLine speakers = null;\r\n    private boolean running = true;\r\n    private VOIPSocket sender = null;\r\n    \r\n    public Audio(int voiceActivationLevel, VOIPSocket socket) throws LineUnavailableException\r\n    {\r\n        this.voiceActivationLevel = voiceActivationLevel;\r\n        this.defaultAudioFormat = new AudioFormat(8000f, 16, 1, true, true);\r\n        \r\n        DataLine.Info info = new DataLine.Info(TargetDataLine.class, this.defaultAudioFormat);\r\n        this.inputLine = (TargetDataLine) AudioSystem.getLine(info);\r\n        this.inputLine.open(defaultAudioFormat);\r\n        this.sender = socket;\r\n        \r\n        DataLine.Info dataLineInfo = new DataLine.Info(SourceDataLine.class, this.defaultAudioFormat);\r\n        this.speakers = (SourceDataLine) AudioSystem.getLine(dataLineInfo);\r\n        this.speakers.open();\r\n        this.speakers.start();\r\n    }\r\n    \r\n    public void run()\r\n    {\r\n    \tDataLine.Info = new DataLine.Info(TargetDataLine.class, this.defaultAudioFormat);\r\n    \tthis.inputLine.start();\r\n    \twhile(running)\r\n    \t{\r\n    \t\tif(AudioSystem.isLineSupported(info))\r\n    \t\t{\r\n    \t\t\tint data = inputLine.read(this.sample, 0, sample.length);\r\n    \t\t\tint voiceLevel = calculateVolumeLevel(this.sample);\r\n    \t\t\tif(voiceLevel &gt;= this.voiceActivationLevel)\r\n    \t\t\t    this.sender.sendData(this.sample); //\r\n    \t\t}\r\n    \t}\r\n    }\r\n    \r\n    public int calculateVolumeLevel(byte[] audioData)\r\n    {\r\n        long l = 0;\r\n        for(int i = 0; i &lt; audioData.length; i++)\r\n            l = l + audioData [i];\r\n        double avg = l / audioData.length;\r\n        double sum = 0d;\r\n        \r\n        for(int j = 0; j &lt; audioData.length; j++)\r\n            sum += Math.pow(audioData[j] - avg, 2d);\r\n        \r\n        double averageMeanSquare = sum / audioData.length;\r\n        return (int)(Math.pow(averageMeanSquare, 0.5d) + 0.5);\r\n    }\r\n    \r\n    public void playSound(byte[] data)\r\n    {\r\n        synchronized(this.speakers)\r\n            this.speakers.write(data, 0, data.length);\r\n    }\r\n}\r\n```\r\n\r\nNote that calculateVolumeLevel does NOT modify voiceData, just returns an average volume level as integer.\r\n\r\n```\r\npublic class Receiver extends Thread\r\n{\r\n    private VOIPSocket socket = null; //Just a simple class with some helper functions for the socket, not important for this\r\n    private byte[] buffer = new byte[4096];\r\n    private boolean isRunning = true;\r\n    private Audio audio = null;\r\n    \r\n    public Receiver(VOIPSocket socket, Audio audio) throws SocketException\r\n    {\r\n        this.socket = socket;\r\n        this.audio = audio;\r\n    }\r\n    \r\n    public void run()\r\n    {\r\n        DatagramPacket packet = new DatagramPacket(this.buffer, this.buffer.length);\r\n        while(isRunning)\r\n        {\r\n            if(!socket.getSocket.isClosed())\r\n            {\r\n                socket.getSocket.receive(packet);\r\n                byte data = packet.getData();\r\n                this.audio.playSound(data);\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAs soon as I include the check for the volume level, the sound is stuttering, repeating over and over and other mistakes, until I flush or drain the speakers-dataline.\r\n\r\nThe data transmission via UDP is working correctly and needs no further investigation in my opinion.\r\n\r\nMy read is, that as soon as I implement check for the voice volume, the byte-data somehow is corrupted or important parts of sample[] are not transmitted. This somehow puts errors on the speakers-dataline.\r\n\r\nI don&#39;t know how to solve this. Any ideas?\r\n\r\nedit:\r\n\r\nAccording to https://docs.oracle.com/javase/10/troubleshoot/java-sound.htm#JSTGD490, some over- or underrun condition comes in I guess.\r\nIf I dont have the volume check enabled, a continuous data stream is provided for the speakers-dataline. If it is enabled, this stream of course is interrupted most of the time, leading to corrupted data in either the input dataline or the speakers-dataline (or both).\r\nThis can be solved by flushing and closing the datalines, then opening them again. This unfortunately is not a suitable solution, as flushing can sometimes take up to 1 second, where no data can be played, which is not acceptable, as I would need to flush very often (like every time, there is silence).\r\n\r\nAny ideas on this?","title":"Java Sound transmission over UDP - Sound errors when implementing input level checking method","body":"<p>i'm writing a program for simple voice transmission via udp. This works fine, until I implement a method to check the average volume level of a sample-to-be-sent.</p>\n<p>Here I have included the Audio class and the Receiver class and cut out some unimportant stuff.</p>\n<pre><code>public class Audio extends Thread\n{\n    private AudioFormat defaultAudioFormat = null;\n    private TargetDataLine inputLine = null;\n    private byte[] sample = new byte[1024];\n    private SourceDataLine speakers = null;\n    private int voiceActivationLevel = 35;\n    private SourceDataLine speakers = null;\n    private boolean running = true;\n    private VOIPSocket sender = null;\n    \n    public Audio(int voiceActivationLevel, VOIPSocket socket) throws LineUnavailableException\n    {\n        this.voiceActivationLevel = voiceActivationLevel;\n        this.defaultAudioFormat = new AudioFormat(8000f, 16, 1, true, true);\n        \n        DataLine.Info info = new DataLine.Info(TargetDataLine.class, this.defaultAudioFormat);\n        this.inputLine = (TargetDataLine) AudioSystem.getLine(info);\n        this.inputLine.open(defaultAudioFormat);\n        this.sender = socket;\n        \n        DataLine.Info dataLineInfo = new DataLine.Info(SourceDataLine.class, this.defaultAudioFormat);\n        this.speakers = (SourceDataLine) AudioSystem.getLine(dataLineInfo);\n        this.speakers.open();\n        this.speakers.start();\n    }\n    \n    public void run()\n    {\n        DataLine.Info = new DataLine.Info(TargetDataLine.class, this.defaultAudioFormat);\n        this.inputLine.start();\n        while(running)\n        {\n            if(AudioSystem.isLineSupported(info))\n            {\n                int data = inputLine.read(this.sample, 0, sample.length);\n                int voiceLevel = calculateVolumeLevel(this.sample);\n                if(voiceLevel &gt;= this.voiceActivationLevel)\n                    this.sender.sendData(this.sample); //\n            }\n        }\n    }\n    \n    public int calculateVolumeLevel(byte[] audioData)\n    {\n        long l = 0;\n        for(int i = 0; i &lt; audioData.length; i++)\n            l = l + audioData [i];\n        double avg = l / audioData.length;\n        double sum = 0d;\n        \n        for(int j = 0; j &lt; audioData.length; j++)\n            sum += Math.pow(audioData[j] - avg, 2d);\n        \n        double averageMeanSquare = sum / audioData.length;\n        return (int)(Math.pow(averageMeanSquare, 0.5d) + 0.5);\n    }\n    \n    public void playSound(byte[] data)\n    {\n        synchronized(this.speakers)\n            this.speakers.write(data, 0, data.length);\n    }\n}\n</code></pre>\n<p>Note that calculateVolumeLevel does NOT modify voiceData, just returns an average volume level as integer.</p>\n<pre><code>public class Receiver extends Thread\n{\n    private VOIPSocket socket = null; //Just a simple class with some helper functions for the socket, not important for this\n    private byte[] buffer = new byte[4096];\n    private boolean isRunning = true;\n    private Audio audio = null;\n    \n    public Receiver(VOIPSocket socket, Audio audio) throws SocketException\n    {\n        this.socket = socket;\n        this.audio = audio;\n    }\n    \n    public void run()\n    {\n        DatagramPacket packet = new DatagramPacket(this.buffer, this.buffer.length);\n        while(isRunning)\n        {\n            if(!socket.getSocket.isClosed())\n            {\n                socket.getSocket.receive(packet);\n                byte data = packet.getData();\n                this.audio.playSound(data);\n            }\n        }\n    }\n}\n</code></pre>\n<p>As soon as I include the check for the volume level, the sound is stuttering, repeating over and over and other mistakes, until I flush or drain the speakers-dataline.</p>\n<p>The data transmission via UDP is working correctly and needs no further investigation in my opinion.</p>\n<p>My read is, that as soon as I implement check for the voice volume, the byte-data somehow is corrupted or important parts of sample[] are not transmitted. This somehow puts errors on the speakers-dataline.</p>\n<p>I don't know how to solve this. Any ideas?</p>\n<p>edit:</p>\n<p>According to <a href=\"https://docs.oracle.com/javase/10/troubleshoot/java-sound.htm#JSTGD490\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/10/troubleshoot/java-sound.htm#JSTGD490</a>, some over- or underrun condition comes in I guess.\nIf I dont have the volume check enabled, a continuous data stream is provided for the speakers-dataline. If it is enabled, this stream of course is interrupted most of the time, leading to corrupted data in either the input dataline or the speakers-dataline (or both).\nThis can be solved by flushing and closing the datalines, then opening them again. This unfortunately is not a suitable solution, as flushing can sometimes take up to 1 second, where no data can be played, which is not acceptable, as I would need to flush very often (like every time, there is silence).</p>\n<p>Any ideas on this?</p>\n"},{"tags":["java","maven","slf4j","webcam-capture"],"comments":[{"owner":{"account_id":3517130,"reputation":5214,"user_id":2940265,"accept_rate":91,"display_name":"Menuka Ishan"},"score":0,"creation_date":1659551357,"post_id":73226092,"comment_id":129323627,"body_markdown":"why are you using alpha version instead of a stable version like 1.7.36? It would be helpful to others if you post error log, pom file and logback configurations","body":"why are you using alpha version instead of a stable version like 1.7.36? It would be helpful to others if you post error log, pom file and logback configurations"},{"owner":{"account_id":14222191,"reputation":314,"user_id":10274083,"display_name":"fallingriptide"},"score":0,"creation_date":1659552418,"post_id":73226092,"comment_id":129323959,"body_markdown":"Thanks, I added more info as well as used the stable version. Now have a different error message","body":"Thanks, I added more info as well as used the stable version. Now have a different error message"}],"answers":[{"tags":[],"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659552009,"creation_date":1659552009,"answer_id":73226292,"question_id":73226092,"body_markdown":"Slf4j-simple is in scope test meaning it is available to test classes only. \r\n\r\nRemove that line and it should work as you expect. ","title":"WebcamException error when using webcam-capture","body":"<p>Slf4j-simple is in scope test meaning it is available to test classes only.</p>\n<p>Remove that line and it should work as you expect.</p>\n"}],"owner":{"account_id":14222191,"reputation":314,"user_id":10274083,"display_name":"fallingriptide"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":206,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1659552387,"creation_date":1659550931,"question_id":73226092,"body_markdown":"I am trying to use the webcam-capture Java library, but I keep getting an WebcamException error.\r\n\r\nThis is what I have in my pom.xml:\r\n\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.github.sarxos&lt;/groupId&gt;\r\n            &lt;artifactId&gt;webcam-capture&lt;/artifactId&gt;\r\n            &lt;version&gt;0.3.12&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.36&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.36&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nThe sample code I am running\r\n\r\n```\r\n        Webcam webcam = Webcam.getDefault();\r\n        webcam.open();\r\n        ImageIO.write(webcam.getImage(), &quot;PNG&quot;, new File(&quot;file_path&quot;));\r\n```\r\nThe error message:\r\n\r\n```\r\n[main] INFO com.github.sarxos.webcam.Webcam - WebcamDefaultDriver capture driver will be used\r\nException in thread &quot;main&quot; com.github.sarxos.webcam.WebcamException: java.util.concurrent.ExecutionException: com.github.sarxos.webcam.WebcamException: Cannot execute task\r\n\tat com.github.sarxos.webcam.WebcamDiscoveryService.getWebcams(WebcamDiscoveryService.java:124)\r\n\tat com.github.sarxos.webcam.Webcam.getWebcams(Webcam.java:893)\r\n\tat com.github.sarxos.webcam.Webcam.getDefault(Webcam.java:956)\r\n\tat com.github.sarxos.webcam.Webcam.getDefault(Webcam.java:933)\r\n\tat com.github.sarxos.webcam.Webcam.getDefault(Webcam.java:911)\r\n\tat com.datacollection.Main.main(Main.java:47)\r\nCaused by: java.util.concurrent.ExecutionException: com.github.sarxos.webcam.WebcamException: Cannot execute task\r\n\tat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\r\n\tat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\r\n\tat com.github.sarxos.webcam.WebcamDiscoveryService.getWebcams(WebcamDiscoveryService.java:116)\r\n\t... 5 more\r\nCaused by: com.github.sarxos.webcam.WebcamException: Cannot execute task\r\n\tat com.github.sarxos.webcam.WebcamProcessor$AtomicProcessor.process(WebcamProcessor.java:72)\r\n\tat com.github.sarxos.webcam.WebcamProcessor.process(WebcamProcessor.java:140)\r\n\tat com.github.sarxos.webcam.WebcamTask.process(WebcamTask.java:46)\r\n\tat com.github.sarxos.webcam.ds.buildin.WebcamDefaultDriver$GetDevicesTask.getDevices(WebcamDefaultDriver.java:79)\r\n\tat com.github.sarxos.webcam.ds.buildin.WebcamDefaultDriver.getDevices(WebcamDefaultDriver.java:124)\r\n\tat com.github.sarxos.webcam.WebcamDiscoveryService$WebcamsDiscovery.call(WebcamDiscoveryService.java:36)\r\n\tat com.github.sarxos.webcam.WebcamDiscoveryService$WebcamsDiscovery.call(WebcamDiscoveryService.java:26)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\nCaused by: java.lang.UnsatisfiedLinkError: com.github.sarxos.webcam.ds.buildin.natives.OpenIMAJGrabber.getVideoDevices()Lorg/bridj/Pointer;\r\n\tat com.github.sarxos.webcam.ds.buildin.natives.OpenIMAJGrabber.getVideoDevices(Native Method)\r\n\tat com.github.sarxos.webcam.ds.buildin.WebcamDefaultDriver$GetDevicesTask.handle(WebcamDefaultDriver.java:93)\r\n\tat com.github.sarxos.webcam.WebcamProcessor$AtomicProcessor.run(WebcamProcessor.java:81)\r\n\t... 3 more\r\n\r\nProcess finished with exit code 1\r\n\r\n```\r\nAny help would be appreciated!","title":"WebcamException error when using webcam-capture","body":"<p>I am trying to use the webcam-capture Java library, but I keep getting an WebcamException error.</p>\n<p>This is what I have in my pom.xml:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;com.github.sarxos&lt;/groupId&gt;\n            &lt;artifactId&gt;webcam-capture&lt;/artifactId&gt;\n            &lt;version&gt;0.3.12&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;1.7.36&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\n            &lt;version&gt;1.7.36&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>The sample code I am running</p>\n<pre><code>        Webcam webcam = Webcam.getDefault();\n        webcam.open();\n        ImageIO.write(webcam.getImage(), &quot;PNG&quot;, new File(&quot;file_path&quot;));\n</code></pre>\n<p>The error message:</p>\n<pre><code>[main] INFO com.github.sarxos.webcam.Webcam - WebcamDefaultDriver capture driver will be used\nException in thread &quot;main&quot; com.github.sarxos.webcam.WebcamException: java.util.concurrent.ExecutionException: com.github.sarxos.webcam.WebcamException: Cannot execute task\n    at com.github.sarxos.webcam.WebcamDiscoveryService.getWebcams(WebcamDiscoveryService.java:124)\n    at com.github.sarxos.webcam.Webcam.getWebcams(Webcam.java:893)\n    at com.github.sarxos.webcam.Webcam.getDefault(Webcam.java:956)\n    at com.github.sarxos.webcam.Webcam.getDefault(Webcam.java:933)\n    at com.github.sarxos.webcam.Webcam.getDefault(Webcam.java:911)\n    at com.datacollection.Main.main(Main.java:47)\nCaused by: java.util.concurrent.ExecutionException: com.github.sarxos.webcam.WebcamException: Cannot execute task\n    at java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\n    at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\n    at com.github.sarxos.webcam.WebcamDiscoveryService.getWebcams(WebcamDiscoveryService.java:116)\n    ... 5 more\nCaused by: com.github.sarxos.webcam.WebcamException: Cannot execute task\n    at com.github.sarxos.webcam.WebcamProcessor$AtomicProcessor.process(WebcamProcessor.java:72)\n    at com.github.sarxos.webcam.WebcamProcessor.process(WebcamProcessor.java:140)\n    at com.github.sarxos.webcam.WebcamTask.process(WebcamTask.java:46)\n    at com.github.sarxos.webcam.ds.buildin.WebcamDefaultDriver$GetDevicesTask.getDevices(WebcamDefaultDriver.java:79)\n    at com.github.sarxos.webcam.ds.buildin.WebcamDefaultDriver.getDevices(WebcamDefaultDriver.java:124)\n    at com.github.sarxos.webcam.WebcamDiscoveryService$WebcamsDiscovery.call(WebcamDiscoveryService.java:36)\n    at com.github.sarxos.webcam.WebcamDiscoveryService$WebcamsDiscovery.call(WebcamDiscoveryService.java:26)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n    at java.base/java.lang.Thread.run(Thread.java:834)\nCaused by: java.lang.UnsatisfiedLinkError: com.github.sarxos.webcam.ds.buildin.natives.OpenIMAJGrabber.getVideoDevices()Lorg/bridj/Pointer;\n    at com.github.sarxos.webcam.ds.buildin.natives.OpenIMAJGrabber.getVideoDevices(Native Method)\n    at com.github.sarxos.webcam.ds.buildin.WebcamDefaultDriver$GetDevicesTask.handle(WebcamDefaultDriver.java:93)\n    at com.github.sarxos.webcam.WebcamProcessor$AtomicProcessor.run(WebcamProcessor.java:81)\n    ... 3 more\n\nProcess finished with exit code 1\n\n</code></pre>\n<p>Any help would be appreciated!</p>\n"},{"tags":["java","spring","spring-mvc","web-applications"],"comments":[{"owner":{"account_id":8186304,"reputation":707,"user_id":6162023,"display_name":"Sofo Gial"},"score":1,"creation_date":1546429908,"post_id":54005723,"comment_id":94848269,"body_markdown":"What do you mean by &quot;when I go to the following URL&quot;? Do you visit the aforementioned URL on the browser? Do you submit a form, where the action points to this URL? Do you attempt to hit the endpoint through Postman/CURL?","body":"What do you mean by &quot;when I go to the following URL&quot;? Do you visit the aforementioned URL on the browser? Do you submit a form, where the action points to this URL? Do you attempt to hit the endpoint through Postman/CURL?"},{"owner":{"account_id":14022240,"reputation":194,"user_id":10128199,"display_name":"Mob_Abominator"},"score":0,"creation_date":1546430018,"post_id":54005723,"comment_id":94848321,"body_markdown":"that&#39;s the url which gets triggered when the form is submitted","body":"that&#39;s the url which gets triggered when the form is submitted"},{"owner":{"account_id":8186304,"reputation":707,"user_id":6162023,"display_name":"Sofo Gial"},"score":0,"creation_date":1546431555,"post_id":54005723,"comment_id":94848947,"body_markdown":"Can you manually invoke the code you want by using Postman or curl? You can use the debugger to check if the code is invoked.","body":"Can you manually invoke the code you want by using Postman or curl? You can use the debugger to check if the code is invoked."},{"owner":{"account_id":14022240,"reputation":194,"user_id":10128199,"display_name":"Mob_Abominator"},"score":0,"creation_date":1546431638,"post_id":54005723,"comment_id":94848986,"body_markdown":"How to do that ? can you explain in more brief ?","body":"How to do that ? can you explain in more brief ?"}],"answers":[{"tags":[],"owner":{"account_id":3878082,"reputation":756,"user_id":3211463,"accept_rate":50,"display_name":"Lakshya Garg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1546435335,"creation_date":1546435335,"answer_id":54007156,"question_id":54005723,"body_markdown":"The issue is with the annotation ```@Controller``` inside your code. change it to ```@RestController``` and it should start working.\r\nHere is the Sample code which I have created and it works well :\r\n\r\n    package com.sample;\r\n\r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.web.bind.annotation.*;\r\n\r\n    @RestController\r\n    public class Sample {\r\n    @RequestMapping(value=&quot;/registration&quot;,method = RequestMethod.GET)\r\n    public String addRegistrationPage() {\r\n        return &quot;registrationpage&quot;;\r\n    }\r\n    @RequestMapping(value=&quot;/uregistration&quot;,method = RequestMethod.POST)\r\n    public String addURegistrationPage(@RequestBody String u) {\r\n\r\n        boolean b = true;\r\n        if (b)\r\n            return &quot;success&quot;;\r\n        else\r\n            return &quot;registra&quot;;\r\n    }\r\n\r\n    }\r\n","title":"How to fix &quot;org.springframework.web.HttpRequestMethodNotSupportedException : Request method &#39;POST&#39; not supported ?&quot;","body":"<p>The issue is with the annotation <code>@Controller</code> inside your code. change it to <code>@RestController</code> and it should start working.\nHere is the Sample code which I have created and it works well :</p>\n\n<pre><code>package com.sample;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.*;\n\n@RestController\npublic class Sample {\n@RequestMapping(value=\"/registration\",method = RequestMethod.GET)\npublic String addRegistrationPage() {\n    return \"registrationpage\";\n}\n@RequestMapping(value=\"/uregistration\",method = RequestMethod.POST)\npublic String addURegistrationPage(@RequestBody String u) {\n\n    boolean b = true;\n    if (b)\n        return \"success\";\n    else\n        return \"registra\";\n}\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4295560,"reputation":2627,"user_id":3510725,"display_name":"Minar Mahmud"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1546445291,"creation_date":1546445291,"answer_id":54009532,"question_id":54005723,"body_markdown":"As your `GET` handler mapping is `/registration`, change your `POST` handler mapping to same value:\r\n\r\n    @RequestMapping(value = &quot;/registration&quot;, method = RequestMethod.POST)\r\n\r\n","title":"How to fix &quot;org.springframework.web.HttpRequestMethodNotSupportedException : Request method &#39;POST&#39; not supported ?&quot;","body":"<p>As your <code>GET</code> handler mapping is <code>/registration</code>, change your <code>POST</code> handler mapping to same value:</p>\n\n<pre><code>@RequestMapping(value = \"/registration\", method = RequestMethod.POST)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7525035,"reputation":2156,"user_id":5715546,"accept_rate":75,"display_name":"eyoeldefare"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1555131996,"creation_date":1555131996,"answer_id":55662218,"question_id":54005723,"body_markdown":"I solved mine by simply adding csrf configurations as mentioned in spring documentation when making an ajax request to the server. Remember that csrf is enabled by default in spring and you have to either disable it (bad) or enable it. \r\nLink is here \r\n\r\n&gt; https://docs.spring.io/spring-security/site/docs/5.0.x/reference/html/csrf.html\r\n\r\nSo I added `\r\n&lt;meta name=&quot;_csrf&quot; th:content=&quot;${_csrf.token}&quot; /&gt;\r\n&lt;meta name=&quot;_csrf_header&quot; th:content=&quot;${_csrf.headerName}&quot; /&gt;`\r\n\r\n    &lt;script type=&quot;application/x-javascript&quot;&gt;\r\n       (function () {\r\n           var token = $(&quot;meta[name=&#39;_csrf&#39;]&quot;).attr(&quot;content&quot;);\r\n           var header = $(&quot;meta[name=&#39;_csrf_header&#39;]&quot;).attr(&quot;content&quot;);\r\n           $(document).ajaxSend(function(e, xhr, options) {\r\n              xhr.setRequestHeader(header, token);\r\n           });\r\n       });\r\n    &lt;/script&gt;\r\n\r\nto my html head and inside the form I am submitting, I included this little hidden input and mine worked for me. Hope it helps ya.\r\n\r\n    &lt;input type=&quot;hidden&quot; th:name=&quot;${_csrf.parameterName}&quot;\r\n\t\t\t\t\t\t\tth:value=&quot;${_csrf.token}&quot; /&gt;\r\n\r\n","title":"How to fix &quot;org.springframework.web.HttpRequestMethodNotSupportedException : Request method &#39;POST&#39; not supported ?&quot;","body":"<p>I solved mine by simply adding csrf configurations as mentioned in spring documentation when making an ajax request to the server. Remember that csrf is enabled by default in spring and you have to either disable it (bad) or enable it. \nLink is here </p>\n\n<blockquote>\n  <p><a href=\"https://docs.spring.io/spring-security/site/docs/5.0.x/reference/html/csrf.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/site/docs/5.0.x/reference/html/csrf.html</a></p>\n</blockquote>\n\n<p>So I added <code>\n&lt;meta name=\"_csrf\" th:content=\"${_csrf.token}\" /&gt;\n&lt;meta name=\"_csrf_header\" th:content=\"${_csrf.headerName}\" /&gt;</code></p>\n\n<pre><code>&lt;script type=\"application/x-javascript\"&gt;\n   (function () {\n       var token = $(\"meta[name='_csrf']\").attr(\"content\");\n       var header = $(\"meta[name='_csrf_header']\").attr(\"content\");\n       $(document).ajaxSend(function(e, xhr, options) {\n          xhr.setRequestHeader(header, token);\n       });\n   });\n&lt;/script&gt;\n</code></pre>\n\n<p>to my html head and inside the form I am submitting, I included this little hidden input and mine worked for me. Hope it helps ya.</p>\n\n<pre><code>&lt;input type=\"hidden\" th:name=\"${_csrf.parameterName}\"\n                        th:value=\"${_csrf.token}\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12321002,"reputation":1,"user_id":8990312,"display_name":"Daniel Guinter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656506029,"creation_date":1656119928,"answer_id":72750686,"question_id":54005723,"body_markdown":"Searching for the same error you got here, I had the same error and in my case I was making a mistake I didn&#39;t put the `@PostMapping` annotation in my method.\r\n\r\n        @PostMapping\r\n\t\tpublic ResponseEntity&lt;CategoryDTO&gt; insert (@RequestBody CategoryDTO dto){\r\n\t\t\tdto = service.insert(dto);\r\n\t\t\tURI uri = ServletUriComponentsBuilder.fromCurrentRequest().path(&quot;/{id}&quot;).buildAndExpand(dto.getId()).toUri();\r\n\t\t\treturn ResponseEntity.created(uri).body(dto);\r\n\t\t}","title":"How to fix &quot;org.springframework.web.HttpRequestMethodNotSupportedException : Request method &#39;POST&#39; not supported ?&quot;","body":"<p>Searching for the same error you got here, I had the same error and in my case I was making a mistake I didn't put the <code>@PostMapping</code> annotation in my method.</p>\n<pre><code>    @PostMapping\n    public ResponseEntity&lt;CategoryDTO&gt; insert (@RequestBody CategoryDTO dto){\n        dto = service.insert(dto);\n        URI uri = ServletUriComponentsBuilder.fromCurrentRequest().path(&quot;/{id}&quot;).buildAndExpand(dto.getId()).toUri();\n        return ResponseEntity.created(uri).body(dto);\n    }\n</code></pre>\n"}],"owner":{"account_id":14022240,"reputation":194,"user_id":10128199,"display_name":"Mob_Abominator"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16130,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1659551924,"creation_date":1546429374,"question_id":54005723,"body_markdown":"So I&#39;m getting an warning as\r\n\r\n     WARN  [org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver] (default task-2) Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method &#39;POST&#39; not supported] \r\nwhen I go to the following URL `http://localhost:8080/ProjectFE/uregistration`\r\n and the website shows  \r\n\r\n&gt; HTTP 405 Method not allowed \r\n\r\nhere is my controller code:\r\n\r\n    package controller;\r\n    \r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.web.bind.annotation.ModelAttribute;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RequestMethod;\r\n    \r\n    import model.daoimpl.UserinfoDaoImpl;\r\n    import model.dao.IUserinfoDAO;\r\n    import model.entity.Userinfo;\r\n    \r\n    @Controller\r\n    public class RegistrationController {\r\n    \t@RequestMapping(value=&quot;/registration&quot;,method = RequestMethod.GET)\r\n    \tpublic String addRegistrationPage() {\r\n    \t\treturn &quot;registrationpage&quot;;\r\n    \t}\r\n    \t@RequestMapping(value=&quot;/uregistration&quot;,method = RequestMethod.POST)\r\n    \tpublic String addURegistrationPage(@ModelAttribute(&quot;User&quot;)Userinfo u) {\r\n    \t\tIUserinfoDAO iu = new UserinfoDaoImpl();\r\n    \t\tboolean b = iu.insertInfo(u);\r\n    \t\tif(b)\r\n    \t\t\treturn &quot;success&quot;;\r\n    \t\telse\r\n    \t\t    return &quot;registrationpage&quot;;\r\n    \t}\r\n    \r\n    }\r\n\r\nSo what should I do ? Also if any other code is required please comment I&#39;ll edit the post,\r\nThankyou.\r\n\r\n\r\n","title":"How to fix &quot;org.springframework.web.HttpRequestMethodNotSupportedException : Request method &#39;POST&#39; not supported ?&quot;","body":"<p>So I'm getting an warning as</p>\n\n<pre><code> WARN  [org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver] (default task-2) Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'POST' not supported] \n</code></pre>\n\n<p>when I go to the following URL <code>http://localhost:8080/ProjectFE/uregistration</code>\n and the website shows  </p>\n\n<blockquote>\n  <p>HTTP 405 Method not allowed </p>\n</blockquote>\n\n<p>here is my controller code:</p>\n\n<pre><code>package controller;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.ModelAttribute;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\n\nimport model.daoimpl.UserinfoDaoImpl;\nimport model.dao.IUserinfoDAO;\nimport model.entity.Userinfo;\n\n@Controller\npublic class RegistrationController {\n    @RequestMapping(value=\"/registration\",method = RequestMethod.GET)\n    public String addRegistrationPage() {\n        return \"registrationpage\";\n    }\n    @RequestMapping(value=\"/uregistration\",method = RequestMethod.POST)\n    public String addURegistrationPage(@ModelAttribute(\"User\")Userinfo u) {\n        IUserinfoDAO iu = new UserinfoDaoImpl();\n        boolean b = iu.insertInfo(u);\n        if(b)\n            return \"success\";\n        else\n            return \"registrationpage\";\n    }\n\n}\n</code></pre>\n\n<p>So what should I do ? Also if any other code is required please comment I'll edit the post,\nThankyou.</p>\n"},{"tags":["java","stack-overflow","sandbox"],"comments":[{"owner":{"account_id":1076053,"reputation":85188,"user_id":1281433,"accept_rate":43,"display_name":"Joshua Taylor"},"score":0,"creation_date":1659559973,"post_id":51143741,"comment_id":129326327,"body_markdown":"I know this was a long time ago, but I&#39;m looking at exactly the same tutorial. Do you happen to know which versions of the JVM you were seeing this behavior in? I&#39;m seeing the StackOverflowError in a couple versions of Java8, as well as in Java11.","body":"I know this was a long time ago, but I&#39;m looking at exactly the same tutorial. Do you happen to know which versions of the JVM you were seeing this behavior in? I&#39;m seeing the StackOverflowError in a couple versions of Java8, as well as in Java11."},{"owner":{"account_id":5603010,"reputation":984,"user_id":4438634,"accept_rate":39,"display_name":"Ziad Halabi"},"score":0,"creation_date":1659603154,"post_id":51143741,"comment_id":129335239,"body_markdown":"@JoshuaTaylor I am sorry this was a long time ago and can&#39;t recall the java version used at the time. I should&#39;ve mentioned it in the issue. Good luck!","body":"@JoshuaTaylor I am sorry this was a long time ago and can&#39;t recall the java version used at the time. I should&#39;ve mentioned it in the issue. Good luck!"}],"owner":{"account_id":5603010,"reputation":984,"user_id":4438634,"accept_rate":39,"display_name":"Ziad Halabi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1659551740,"creation_date":1530565635,"question_id":51143741,"body_markdown":"I am following this [tutorial, Sandboxing plugins in Java][1] on how to achieve sandboxing when plugins are used.\r\n\r\nThis is my main class where I load the class from the Jar file and run the interface function:\r\n\r\n    import java.io.File;\r\n    import java.net.URL;\r\n    import java.security.Policy;\r\n    \r\n    public class Main {\r\n    \r\n        public static void main(String[] args){\r\n    \r\n            Policy.setPolicy(new SandboxSecurityPolicy());\r\n            System.setSecurityManager(new SecurityManager());\r\n    \r\n    \r\n            try {\r\n                File file = new File(&quot;JarDummy.jar&quot;);\r\n                URL urlJar = file.toURI().toURL();\r\n    \r\n                ClassLoader pluginLoader = new PluginClassLoader(urlJar);\r\n    \r\n                Class&lt;?&gt; pluginClass = pluginLoader.loadClass(&quot;ZEngine&quot;);\r\n                IEngine plugin = (IEngine) pluginClass.newInstance();\r\n    \r\n                plugin.build(&quot;file.txt&quot;);\r\n    \r\n            }catch (Exception e){\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n    \r\n    }\r\n\r\nThis is my interface:\r\n\r\n\r\n    public interface IEngine {\r\n    \r\n        void build(String filename);\r\n    }\r\n\r\n\r\nThis is my plugin class loader:\r\n\r\n    import java.net.URL;\r\n    import java.net.URLClassLoader;\r\n\r\n    public class PluginClassLoader extends URLClassLoader {\r\n        public PluginClassLoader(URL jarFileUrl) {\r\n            super(new URL[] {jarFileUrl});\r\n        }\r\n    }\r\n\r\n\r\nAnd this is my policy where different permissions are given if the class is loaded from the plugin:\r\n\r\n    import sun.plugin.security.PluginClassLoader;\r\n    import java.security.AllPermission;\r\n    import java.security.PermissionCollection;\r\n    import java.security.Permissions;\r\n    import java.security.Policy;\r\n    import java.security.ProtectionDomain;\r\n    \r\n    public class SandboxSecurityPolicy extends Policy {\r\n    \r\n        @Override\r\n        public PermissionCollection getPermissions(ProtectionDomain domain) {\r\n            if (isPlugin(domain)) {\r\n                return pluginPermissions();\r\n            }\r\n            else {\r\n                return applicationPermissions();\r\n            }\r\n        }\r\n    \r\n        private boolean isPlugin(ProtectionDomain domain) {\r\n            return domain.getClassLoader() instanceof PluginClassLoader;\r\n        }\r\n    \r\n        private PermissionCollection pluginPermissions() {\r\n            Permissions permissions = new Permissions(); // No permissions\r\n            return permissions;\r\n        }\r\n    \r\n        private PermissionCollection applicationPermissions() {\r\n            Permissions permissions = new Permissions();\r\n            permissions.add(new AllPermission());\r\n            return permissions;\r\n        }\r\n    }\r\n\r\n\r\n\r\nWhen I run the main class and code executes the `plugin.build()`, I am getting a stackoverflow exception with the following trace:\r\n\r\n    *** java.lang.instrument ASSERTION FAILED ***: &quot;!errorOutstanding&quot; with message transform method call failed at JPLISAgent.c line: 844\r\n    *** java.lang.instrument ASSERTION FAILED ***: &quot;!errorOutstanding&quot; with message transform method call failed at JPLISAgent.c line: 844\r\n    *** java.lang.instrument ASSERTION FAILED ***: &quot;!errorOutstanding&quot; with message transform method call failed at JPLISAgent.c line: 844\r\n    Exception in thread &quot;main&quot; java.lang.StackOverflowError\r\n    \tat sun.nio.cs.UTF_8.updatePositions(UTF_8.java:77)\r\n    \tat sun.nio.cs.UTF_8.access$200(UTF_8.java:57)\r\n    \tat sun.nio.cs.UTF_8$Encoder.encodeArrayLoop(UTF_8.java:636)\r\n    \tat sun.nio.cs.UTF_8$Encoder.encodeLoop(UTF_8.java:691)\r\n    \tat java.nio.charset.CharsetEncoder.encode(CharsetEncoder.java:579)\r\n    \tat sun.nio.cs.StreamEncoder.implWrite(StreamEncoder.java:271)\r\n    \tat sun.nio.cs.StreamEncoder.write(StreamEncoder.java:125)\r\n    \tat java.io.OutputStreamWriter.write(OutputStreamWriter.java:207)\r\n    \tat java.io.BufferedWriter.flushBuffer(BufferedWriter.java:129)\r\n    \tat java.io.PrintStream.write(PrintStream.java:526)\r\n    \tat java.io.PrintStream.print(PrintStream.java:669)\r\n    \tat java.io.PrintStream.println(PrintStream.java:806)\r\n    \tat SandboxSecurityPolicy.getPermissions(SandboxSecurityPolicy.java:12)\r\n    \tat java.security.Policy.implies(Policy.java:721)\r\n    \tat java.security.ProtectionDomain.implies(ProtectionDomain.java:285)\r\n    \tat java.security.AccessControlContext.checkPermission(AccessControlContext.java:450)\r\n    \tat java.security.AccessController.checkPermission(AccessController.java:884)\r\n    \tat java.lang.SecurityManager.checkPermission(SecurityManager.java:549)\r\n    \tat java.lang.SecurityManager.checkPackageAccess(SecurityManager.java:1564)\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:318)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n    \tat SandboxSecurityPolicy.isPlugin(SandboxSecurityPolicy.java:23)\r\n    \tat SandboxSecurityPolicy.getPermissions(SandboxSecurityPolicy.java:13)\r\n\r\nI am not sure why that `instanceOf` is creating a recursion leading to this overflow. I appreciate your help. Thanks!\r\n\r\nUPDATE: I ran the same code on a different machine, it worked fine. It seems like a JDK bug.\r\n\r\n  [1]: https://blog.jayway.com/2014/06/13/sandboxing-plugins-in-java/","title":"Java Sandboxing Security Policy","body":"<p>I am following this <a href=\"https://blog.jayway.com/2014/06/13/sandboxing-plugins-in-java/\" rel=\"nofollow noreferrer\">tutorial, Sandboxing plugins in Java</a> on how to achieve sandboxing when plugins are used.</p>\n<p>This is my main class where I load the class from the Jar file and run the interface function:</p>\n<pre><code>import java.io.File;\nimport java.net.URL;\nimport java.security.Policy;\n\npublic class Main {\n\n    public static void main(String[] args){\n\n        Policy.setPolicy(new SandboxSecurityPolicy());\n        System.setSecurityManager(new SecurityManager());\n\n\n        try {\n            File file = new File(&quot;JarDummy.jar&quot;);\n            URL urlJar = file.toURI().toURL();\n\n            ClassLoader pluginLoader = new PluginClassLoader(urlJar);\n\n            Class&lt;?&gt; pluginClass = pluginLoader.loadClass(&quot;ZEngine&quot;);\n            IEngine plugin = (IEngine) pluginClass.newInstance();\n\n            plugin.build(&quot;file.txt&quot;);\n\n        }catch (Exception e){\n            e.printStackTrace();\n        }\n    }\n\n\n}\n</code></pre>\n<p>This is my interface:</p>\n<pre><code>public interface IEngine {\n\n    void build(String filename);\n}\n</code></pre>\n<p>This is my plugin class loader:</p>\n<pre><code>import java.net.URL;\nimport java.net.URLClassLoader;\n\npublic class PluginClassLoader extends URLClassLoader {\n    public PluginClassLoader(URL jarFileUrl) {\n        super(new URL[] {jarFileUrl});\n    }\n}\n</code></pre>\n<p>And this is my policy where different permissions are given if the class is loaded from the plugin:</p>\n<pre><code>import sun.plugin.security.PluginClassLoader;\nimport java.security.AllPermission;\nimport java.security.PermissionCollection;\nimport java.security.Permissions;\nimport java.security.Policy;\nimport java.security.ProtectionDomain;\n\npublic class SandboxSecurityPolicy extends Policy {\n\n    @Override\n    public PermissionCollection getPermissions(ProtectionDomain domain) {\n        if (isPlugin(domain)) {\n            return pluginPermissions();\n        }\n        else {\n            return applicationPermissions();\n        }\n    }\n\n    private boolean isPlugin(ProtectionDomain domain) {\n        return domain.getClassLoader() instanceof PluginClassLoader;\n    }\n\n    private PermissionCollection pluginPermissions() {\n        Permissions permissions = new Permissions(); // No permissions\n        return permissions;\n    }\n\n    private PermissionCollection applicationPermissions() {\n        Permissions permissions = new Permissions();\n        permissions.add(new AllPermission());\n        return permissions;\n    }\n}\n</code></pre>\n<p>When I run the main class and code executes the <code>plugin.build()</code>, I am getting a stackoverflow exception with the following trace:</p>\n<pre><code>*** java.lang.instrument ASSERTION FAILED ***: &quot;!errorOutstanding&quot; with message transform method call failed at JPLISAgent.c line: 844\n*** java.lang.instrument ASSERTION FAILED ***: &quot;!errorOutstanding&quot; with message transform method call failed at JPLISAgent.c line: 844\n*** java.lang.instrument ASSERTION FAILED ***: &quot;!errorOutstanding&quot; with message transform method call failed at JPLISAgent.c line: 844\nException in thread &quot;main&quot; java.lang.StackOverflowError\n    at sun.nio.cs.UTF_8.updatePositions(UTF_8.java:77)\n    at sun.nio.cs.UTF_8.access$200(UTF_8.java:57)\n    at sun.nio.cs.UTF_8$Encoder.encodeArrayLoop(UTF_8.java:636)\n    at sun.nio.cs.UTF_8$Encoder.encodeLoop(UTF_8.java:691)\n    at java.nio.charset.CharsetEncoder.encode(CharsetEncoder.java:579)\n    at sun.nio.cs.StreamEncoder.implWrite(StreamEncoder.java:271)\n    at sun.nio.cs.StreamEncoder.write(StreamEncoder.java:125)\n    at java.io.OutputStreamWriter.write(OutputStreamWriter.java:207)\n    at java.io.BufferedWriter.flushBuffer(BufferedWriter.java:129)\n    at java.io.PrintStream.write(PrintStream.java:526)\n    at java.io.PrintStream.print(PrintStream.java:669)\n    at java.io.PrintStream.println(PrintStream.java:806)\n    at SandboxSecurityPolicy.getPermissions(SandboxSecurityPolicy.java:12)\n    at java.security.Policy.implies(Policy.java:721)\n    at java.security.ProtectionDomain.implies(ProtectionDomain.java:285)\n    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:450)\n    at java.security.AccessController.checkPermission(AccessController.java:884)\n    at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)\n    at java.lang.SecurityManager.checkPackageAccess(SecurityManager.java:1564)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:318)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    at SandboxSecurityPolicy.isPlugin(SandboxSecurityPolicy.java:23)\n    at SandboxSecurityPolicy.getPermissions(SandboxSecurityPolicy.java:13)\n</code></pre>\n<p>I am not sure why that <code>instanceOf</code> is creating a recursion leading to this overflow. I appreciate your help. Thanks!</p>\n<p>UPDATE: I ran the same code on a different machine, it worked fine. It seems like a JDK bug.</p>\n"},{"tags":["java","list","arraylist","shuffle"],"comments":[{"owner":{"account_id":1894536,"reputation":54819,"user_id":1711796,"accept_rate":100,"display_name":"Bernhard Barker"},"score":0,"creation_date":1366027184,"post_id":16014579,"comment_id":22840630,"body_markdown":"The [Knuth shuffle](http://en.wikipedia.org/wiki/Knuth_shuffle#The_modern_algorithm) is pretty easy to implement.","body":"The <a href=\"http://en.wikipedia.org/wiki/Knuth_shuffle#The_modern_algorithm\" rel=\"nofollow noreferrer\">Knuth shuffle</a> is pretty easy to implement."},{"owner":{"account_id":183316,"reputation":2501,"user_id":418609,"accept_rate":86,"display_name":"adrianp"},"score":2,"creation_date":1366027540,"post_id":16014579,"comment_id":22840850,"body_markdown":"@Dukeling being pedantic probably, but it&#39;s actually called the *Fisher-Yates* algorithm.","body":"@Dukeling being pedantic probably, but it&#39;s actually called the <i>Fisher-Yates</i> algorithm."},{"owner":{"account_id":1894536,"reputation":54819,"user_id":1711796,"accept_rate":100,"display_name":"Bernhard Barker"},"score":0,"creation_date":1366027641,"post_id":16014579,"comment_id":22840919,"body_markdown":"@adrianp Being pedantic, it&#39;s [&quot;**also** known as the Knuth shuffle&quot;](http://en.wikipedia.org/wiki/Knuth_shuffle). Knuth is easier to remember (for me anyway).","body":"@adrianp Being pedantic, it&#39;s <a href=\"http://en.wikipedia.org/wiki/Knuth_shuffle\" rel=\"nofollow noreferrer\">&quot;<b>also</b> known as the Knuth shuffle&quot;</a>. Knuth is easier to remember (for me anyway)."},{"owner":{"account_id":83010,"reputation":27402,"user_id":233014,"display_name":"Christoffer Hammarstr&#246;m"},"score":1,"creation_date":1366029477,"post_id":16014579,"comment_id":22841966,"body_markdown":"Why would you shuffle without build in classes? Homework?","body":"Why would you shuffle without build in classes? Homework?"},{"owner":{"account_id":2635716,"reputation":51,"user_id":2280464,"accept_rate":12,"display_name":"GreatBambino"},"score":0,"creation_date":1366030437,"post_id":16014579,"comment_id":22842604,"body_markdown":"homework instructions say not to use built-in List classes","body":"homework instructions say not to use built-in List classes"}],"answers":[{"tags":[],"owner":{"account_id":2411926,"reputation":2788,"user_id":2106815,"accept_rate":69,"display_name":"Jabir"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1366027572,"creation_date":1366027572,"answer_id":16014748,"question_id":16014579,"body_markdown":"You can use following code. \r\n\r\n&gt;      public static void shuffleList(List&lt;Integer&gt; a) {\r\n&gt;         int n = a.size();\r\n&gt;         Random random = new Random();\r\n&gt;         random.nextInt();\r\n&gt;         for (int i = 0; i &lt; n; i++) {\r\n&gt;           int change = i + random.nextInt(n - i);\r\n&gt;           swap(a, i, change);\r\n&gt;         }\r\n&gt;       }\r\n&gt;     \r\n&gt;       private static void swap(List&lt;Integer&gt; a, int i, int change) {\r\n&gt;         int helper = a.get(i);\r\n&gt;         a.set(i, a.get(change));\r\n&gt;         a.set(change, helper);\r\n&gt;       }\r\n\r\n\r\nPlease note this has been copied from following link \r\n\r\nhttp://www.vogella.com/articles/JavaAlgorithmsShuffle/article.html\r\n\r\nHope it helps ","title":"How to shuffle an ArrayList without collections","body":"<p>You can use following code. </p>\n\n<blockquote>\n<pre><code> public static void shuffleList(List&lt;Integer&gt; a) {\n    int n = a.size();\n    Random random = new Random();\n    random.nextInt();\n    for (int i = 0; i &lt; n; i++) {\n      int change = i + random.nextInt(n - i);\n      swap(a, i, change);\n    }\n  }\n\n  private static void swap(List&lt;Integer&gt; a, int i, int change) {\n    int helper = a.get(i);\n    a.set(i, a.get(change));\n    a.set(change, helper);\n  }\n</code></pre>\n</blockquote>\n\n<p>Please note this has been copied from following link </p>\n\n<p><a href=\"http://www.vogella.com/articles/JavaAlgorithmsShuffle/article.html\" rel=\"noreferrer\">http://www.vogella.com/articles/JavaAlgorithmsShuffle/article.html</a></p>\n\n<p>Hope it helps </p>\n"},{"tags":[],"owner":{"account_id":1167301,"reputation":1833,"user_id":1145281,"display_name":"Alepac"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1366034479,"creation_date":1366034479,"answer_id":16017183,"question_id":16014579,"body_markdown":"If you can shuffle your class (probably because is not a list: then you can populate a list, shuffle that list and finnally add the suffled data inside your class:\r\n\r\n\t    final List&lt;Integer&gt; tempList = new ArrayList&lt;Integer&gt;();\r\n\t\t\t\t\r\n\r\n\t    //fills ArrayList with tokens\r\n\t    for(int i = 1; i &lt;= numTokens; i++) {\r\n\t        tempList.add(i);\t        \r\n\t        \r\n\t    }\r\n\t    \r\n\t    Collections.shuffle(tempList);\r\n\t    \r\n\t    for(Integer i: tempList) {\r\n\t    \tal.add(i);\r\n\t    }","title":"How to shuffle an ArrayList without collections","body":"<p>If you can shuffle your class (probably because is not a list: then you can populate a list, shuffle that list and finnally add the suffled data inside your class:</p>\n\n<pre><code>    final List&lt;Integer&gt; tempList = new ArrayList&lt;Integer&gt;();\n\n\n    //fills ArrayList with tokens\n    for(int i = 1; i &lt;= numTokens; i++) {\n        tempList.add(i);            \n\n    }\n\n    Collections.shuffle(tempList);\n\n    for(Integer i: tempList) {\n        al.add(i);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2641346,"reputation":130,"user_id":2284907,"accept_rate":75,"display_name":"wsalame"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1474058089,"creation_date":1452800183,"answer_id":34798179,"question_id":16014579,"body_markdown":"Based on @Jabir answer\r\n\r\nFor swapping any type of object (not just Integer)\r\n\r\n    public static &lt;T&gt; void shuffleList(List&lt;T&gt; a) {\r\n        int n = a.size();\r\n        for (int i = 0; i &lt; n; i++) {\r\n          int change = i + Random.nextInt(n - i);\r\n          swap(a, i, change);\r\n        }\r\n      }\r\n    \r\n      private static &lt;T&gt; void swap(List&lt;T&gt; a, int i, int change) {\r\n        T helper = a.get(i);\r\n        a.set(i, a.get(change));\r\n        a.set(change, helper);\r\n      }","title":"How to shuffle an ArrayList without collections","body":"<p>Based on @Jabir answer</p>\n\n<p>For swapping any type of object (not just Integer)</p>\n\n<pre><code>public static &lt;T&gt; void shuffleList(List&lt;T&gt; a) {\n    int n = a.size();\n    for (int i = 0; i &lt; n; i++) {\n      int change = i + Random.nextInt(n - i);\n      swap(a, i, change);\n    }\n  }\n\n  private static &lt;T&gt; void swap(List&lt;T&gt; a, int i, int change) {\n    T helper = a.get(i);\n    a.set(i, a.get(change));\n    a.set(change, helper);\n  }\n</code></pre>\n"}],"owner":{"account_id":2635716,"reputation":51,"user_id":2280464,"accept_rate":12,"display_name":"GreatBambino"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7703,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":3,"score":1,"last_activity_date":1659551667,"creation_date":1366027051,"question_id":16014579,"body_markdown":"I have an Array List of &quot;tokens.&quot;, each which contains an integer. I need to rearrange them randomly without using built-in collection classes. Any suggestions?\r\n\r\n    TopSpinArray&lt;Integer&gt; list = new TopSpinArray&lt;Integer&gt;(numTokens, spinSize);\r\n        \r\n    for(int i = 1; i &lt;= numTokens; i++)\r\n        list.add(i);","title":"How to shuffle an ArrayList without collections","body":"<p>I have an Array List of &quot;tokens.&quot;, each which contains an integer. I need to rearrange them randomly without using built-in collection classes. Any suggestions?</p>\n<pre><code>TopSpinArray&lt;Integer&gt; list = new TopSpinArray&lt;Integer&gt;(numTokens, spinSize);\n    \nfor(int i = 1; i &lt;= numTokens; i++)\n    list.add(i);\n</code></pre>\n"},{"tags":["java","okhttp","basic-authentication"],"answers":[{"tags":[],"owner":{"account_id":284924,"reputation":431,"user_id":583309,"accept_rate":24,"display_name":"Hussain Ashruf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659551278,"creation_date":1659551278,"answer_id":73226155,"question_id":73125453,"body_markdown":" Resolved as it does not need the line to add header for Content-Type MULTIPART_FORM_DATA:\r\n\r\n     .addHeader(&quot;Content-Type&quot;, ContentType.MULTIPART_FORM_DATA.toString())","title":"CloseableHttpClient with BasicAuth creds returning 400 error. With same BasicAuth creds OkHttp3 client works well","body":"<p>Resolved as it does not need the line to add header for Content-Type MULTIPART_FORM_DATA:</p>\n<pre><code> .addHeader(&quot;Content-Type&quot;, ContentType.MULTIPART_FORM_DATA.toString())\n</code></pre>\n"}],"owner":{"account_id":284924,"reputation":431,"user_id":583309,"accept_rate":24,"display_name":"Hussain Ashruf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1659551278,"creation_date":1658846572,"question_id":73125453,"body_markdown":"I have the sample code snippet. It is returning 400 error. With same BasicAuth creds using OkHttp3 client works well. What is missing here? \r\n\r\n    ```\r\n        String BASIC_AUTHORIZAION = &quot;Basic *********&quot;; // masked\r\n        \r\n        String reportRequest = &quot;{***}&quot;; //json string\r\n   \r\n        CloseableHttpClient client = HttpClientBuilder.create().build();\r\n\r\n        FormBodyPart bodyPart = FormBodyPartBuilder\r\n            .create()\r\n            .setName(&quot;ReportRequest&quot;)\r\n            .setBody(new StringBody(reportRequest, ContentType.APPLICATION_JSON))\r\n            .build();\r\n\r\n        HttpEntity requestEntity = MultipartEntityBuilder\r\n            .create()\r\n            .addPart(bodyPart)\r\n            .addTextBody(&quot;type&quot;, ContentType.APPLICATION_JSON.toString())\r\n            .build();\r\n\r\n        HttpUriRequest httpPost = RequestBuilder\r\n            .post(MPG_MESSAGE_STATUS_REPORT_URL)\r\n            .addHeader(&quot;Content-Type&quot;, ContentType.MULTIPART_FORM_DATA.toString())\r\n            .addHeader(&quot;Authorization&quot;, BASIC_AUTHORIZAION)\r\n            .setEntity(requestEntity)\r\n            .build();\r\n\r\n        HttpResponse response = client.execute(httpPost);\r\n```","title":"CloseableHttpClient with BasicAuth creds returning 400 error. With same BasicAuth creds OkHttp3 client works well","body":"<p>I have the sample code snippet. It is returning 400 error. With same BasicAuth creds using OkHttp3 client works well. What is missing here?</p>\n<pre><code>```\n    String BASIC_AUTHORIZAION = &quot;Basic *********&quot;; // masked\n    \n    String reportRequest = &quot;{***}&quot;; //json string\n\n    CloseableHttpClient client = HttpClientBuilder.create().build();\n\n    FormBodyPart bodyPart = FormBodyPartBuilder\n        .create()\n        .setName(&quot;ReportRequest&quot;)\n        .setBody(new StringBody(reportRequest, ContentType.APPLICATION_JSON))\n        .build();\n\n    HttpEntity requestEntity = MultipartEntityBuilder\n        .create()\n        .addPart(bodyPart)\n        .addTextBody(&quot;type&quot;, ContentType.APPLICATION_JSON.toString())\n        .build();\n\n    HttpUriRequest httpPost = RequestBuilder\n        .post(MPG_MESSAGE_STATUS_REPORT_URL)\n        .addHeader(&quot;Content-Type&quot;, ContentType.MULTIPART_FORM_DATA.toString())\n        .addHeader(&quot;Authorization&quot;, BASIC_AUTHORIZAION)\n        .setEntity(requestEntity)\n        .build();\n\n    HttpResponse response = client.execute(httpPost);\n</code></pre>\n<pre><code></code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1659543009,"post_id":73224428,"comment_id":129320684,"body_markdown":"Poor title. Rewrite to summarize your specific technical issue.","body":"Poor title. Rewrite to summarize your specific technical issue."},{"owner":{"account_id":21417788,"reputation":187,"user_id":15776754,"display_name":"spring00"},"score":1,"creation_date":1659545782,"post_id":73224428,"comment_id":129321629,"body_markdown":"I think somewhere you need to decrement the numBurg  otherwise the while loop will go infinite(as long as &gt;0).\nSupposing x as your current burger check if is equal to numBurg and make\ntime ++;\nq.add(x --);\nnumBurg -- ;","body":"I think somewhere you need to decrement the numBurg  otherwise the while loop will go infinite(as long as &gt;0). Supposing x as your current burger check if is equal to numBurg and make time ++; q.add(x --); numBurg -- ;"},{"owner":{"account_id":22906161,"reputation":1,"user_id":17044209,"display_name":"Ajmer Thethy"},"score":0,"creation_date":1659546183,"post_id":73224428,"comment_id":129321766,"body_markdown":"@spring00  Ok. But i am still to believe that while the position we are calculating for is placed at the tail of the queue, i still have to compute the time for the next person in the head and on and on until person p goes to zero? How would I do that?","body":"@spring00  Ok. But i am still to believe that while the position we are calculating for is placed at the tail of the queue, i still have to compute the time for the next person in the head and on and on until person p goes to zero? How would I do that?"},{"owner":{"account_id":3535938,"reputation":4695,"user_id":2954288,"accept_rate":48,"display_name":"Harald"},"score":0,"creation_date":1659549203,"post_id":73224428,"comment_id":129322867,"body_markdown":"It would be great if you could put a bit more love and effort into the formatting of your question. There is superfluous space in the code. Not all code is inside the code formatting. As mentioned, improve the title.","body":"It would be great if you could put a bit more love and effort into the formatting of your question. There is superfluous space in the code. Not all code is inside the code formatting. As mentioned, improve the title."}],"answers":[{"tags":[],"owner":{"account_id":13755852,"reputation":1,"user_id":9926825,"display_name":"Chaitanya Arepalli"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659548312,"creation_date":1659548217,"answer_id":73225569,"question_id":73224428,"body_markdown":"You need not use queue for this, and also in your solution it seems that you are not reducing numBurg(which makes the queue run infinitely) and also you need to keep track of index of numBurg. Then I guess it would work. Below is my solution\r\n\r\n    int time = 0;\r\n    int p_value = burgers[p];\r\n    for(int i=0;i&lt;burgers.length;i++){\r\n      if(burgers[p] &gt; p_value) time+=p_value;\r\n      else time+=burgers[p];\r\n      if(i == p) p_value-=1;\r\n    }\r\n    return time;\r\n\r\nExplanation: you need to reduce burgers[p] value from all the elements in array until you reach p but after that you can stop so the prior elements will have only p-1 reduced in them as we can stop after we reach p. and also if someone needs less burgers they will only participate until they reach 0. This would be O(n) with no extra space solution.\r\n\r\n\r\n ","title":"Using Queue Data Structure to solve problem","body":"<p>You need not use queue for this, and also in your solution it seems that you are not reducing numBurg(which makes the queue run infinitely) and also you need to keep track of index of numBurg. Then I guess it would work. Below is my solution</p>\n<pre><code>int time = 0;\nint p_value = burgers[p];\nfor(int i=0;i&lt;burgers.length;i++){\n  if(burgers[p] &gt; p_value) time+=p_value;\n  else time+=burgers[p];\n  if(i == p) p_value-=1;\n}\nreturn time;\n</code></pre>\n<p>Explanation: you need to reduce burgers[p] value from all the elements in array until you reach p but after that you can stop so the prior elements will have only p-1 reduced in them as we can stop after we reach p. and also if someone needs less burgers they will only participate until they reach 0. This would be O(n) with no extra space solution.</p>\n"},{"tags":[],"owner":{"account_id":21417788,"reputation":187,"user_id":15776754,"display_name":"spring00"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1659549379,"creation_date":1659549379,"answer_id":73225802,"question_id":73224428,"body_markdown":"      public int calcTimeReqToBuyBurgers(int[] burgers, int p)\r\n       {\r\n     Queue&lt;Integer&gt; q = new LinkedList&lt;Integer&gt;();\r\n\r\n       for (int burger : burgers){\r\n          q.add(burger);}\r\n       int time = 0;\r\n       int i = 0;\r\n\r\n    int numBurg = burgers[p];\r\n    while(numBurg &gt; 0) {\r\n        int curr = q.remove();\r\n        if(curr == 1){time  ++;}\r\n        if(curr &gt; 1){\r\n            q.add(curr);\r\n            time ++;\r\n        }\r\n        if(curr == numBurg){\r\n            q.add(curr -- );\r\n            numBurg --;\r\n            time ++;\r\n        }\r\n\r\n     }\r\n\r\n     return time;\r\n     } \r\n\r\n    public static void main(String[] args) {\r\n    A4Q2  ex = new A4Q2 ();\r\n    int [] burgers= new int [] {3,2,4,1};\r\n    int time=ex.calcTimeReqToBuyBurgers(burgers,1);\r\n    System.out.println(&quot;time &quot;+time);\r\n    \r\n\r\n    }\r\n\r\n ","title":"Using Queue Data Structure to solve problem","body":"<pre><code>  public int calcTimeReqToBuyBurgers(int[] burgers, int p)\n   {\n Queue&lt;Integer&gt; q = new LinkedList&lt;Integer&gt;();\n\n   for (int burger : burgers){\n      q.add(burger);}\n   int time = 0;\n   int i = 0;\n\nint numBurg = burgers[p];\nwhile(numBurg &gt; 0) {\n    int curr = q.remove();\n    if(curr == 1){time  ++;}\n    if(curr &gt; 1){\n        q.add(curr);\n        time ++;\n    }\n    if(curr == numBurg){\n        q.add(curr -- );\n        numBurg --;\n        time ++;\n    }\n\n }\n\n return time;\n } \n\npublic static void main(String[] args) {\nA4Q2  ex = new A4Q2 ();\nint [] burgers= new int [] {3,2,4,1};\nint time=ex.calcTimeReqToBuyBurgers(burgers,1);\nSystem.out.println(&quot;time &quot;+time);\n\n\n}\n</code></pre>\n"}],"owner":{"account_id":22906161,"reputation":1,"user_id":17044209,"display_name":"Ajmer Thethy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":155,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1659551257,"creation_date":1659542705,"question_id":73224428,"body_markdown":"My code involves me to calculate the amount of time required for a person in a certain position in a queue to buy burgers with the index of the burgers array showing an integer of the amount of burgers a person ordered. Each time a person at the head buys a burger they are taken to the tail and have one burger removed and 1 time value added. I have to find the amount of time it takes for the person at what position I inputted to find the time to buy all of their burgers. \r\n\r\nHere is my code:\r\n\r\n    import java.util.Queue;\r\n    \r\n    public class A4Q2 {\r\n        \r\n    \r\n        public int calcTimeReqToBuyBurgers(int[] burgers, int p)\r\n        {\r\n            Queue&lt;Integer&gt; q = new LinkedList&lt;Integer&gt;();\r\n    \r\n            q.addAll(burgers);\r\n    \r\n            int time = 0;\r\n            int i = 0;\r\n    \r\n            numBurg = burgers[p];\r\n    \r\n            while(numBurg &gt; 0) {\r\n                int x = q.remove();\r\n                x--;\r\n                if(x != 0) {\r\n                    q.add(x);\r\n                }\r\n                time +=1;\r\n    \r\n                \r\n    \r\n            }\r\n    \r\n            \r\n          \r\n            return time;\r\n        } \r\n    \r\n        public static void main(String[] args) {\r\n            A4Q2 ex = new A4Q2();\r\n            \r\n    \r\n        }\r\n    }\r\n\r\nI do not know where to go from here or if I am even doing this right. I know my question might look a little messy but I am still new to this website. Can someone help me?","title":"Using Queue Data Structure to solve problem","body":"<p>My code involves me to calculate the amount of time required for a person in a certain position in a queue to buy burgers with the index of the burgers array showing an integer of the amount of burgers a person ordered. Each time a person at the head buys a burger they are taken to the tail and have one burger removed and 1 time value added. I have to find the amount of time it takes for the person at what position I inputted to find the time to buy all of their burgers.</p>\n<p>Here is my code:</p>\n<pre><code>import java.util.Queue;\n\npublic class A4Q2 {\n    \n\n    public int calcTimeReqToBuyBurgers(int[] burgers, int p)\n    {\n        Queue&lt;Integer&gt; q = new LinkedList&lt;Integer&gt;();\n\n        q.addAll(burgers);\n\n        int time = 0;\n        int i = 0;\n\n        numBurg = burgers[p];\n\n        while(numBurg &gt; 0) {\n            int x = q.remove();\n            x--;\n            if(x != 0) {\n                q.add(x);\n            }\n            time +=1;\n\n            \n\n        }\n\n        \n      \n        return time;\n    } \n\n    public static void main(String[] args) {\n        A4Q2 ex = new A4Q2();\n        \n\n    }\n}\n</code></pre>\n<p>I do not know where to go from here or if I am even doing this right. I know my question might look a little messy but I am still new to this website. Can someone help me?</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":3,"creation_date":1659548864,"post_id":73225445,"comment_id":129322752,"body_markdown":"Please share your **attempt** to address the problem and specify the issues you&#39;ve encountered.","body":"Please share your <b>attempt</b> to address the problem and specify the issues you&#39;ve encountered."}],"answers":[{"tags":[],"owner":{"account_id":14155962,"reputation":578,"user_id":10226695,"display_name":"Shavk with a Hoon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659547912,"creation_date":1659547912,"answer_id":73225520,"question_id":73225445,"body_markdown":"DISCLAIMER: This isn&#39;t the efficient way with streams or something fancy that you could do in just a couple lines, but it is a simple easy-to-follow way. Why not just do something simple like this? Iterate over the list length and sum that column via the index:\r\n``` \r\nList&lt;List&lt;BigDecimal&gt;&gt; matrix = &lt;&lt;your matrix here&gt;&gt;\r\nList&lt;BigDecimal&gt; columnSum= new List&lt;BigDecimal&gt;;\r\n// For each column\r\nfor(int i = 0; i &lt; matrix.get(0).size()-1; i++){\r\n      int sum = 0;\r\n      for(List&lt;BigDecimal&gt; row : matrix){\r\n            sum += row.get(i);\r\n      }\r\n      columnSum.add(BigDecimal(sum));\r\n}\r\n```\r\n","title":"Vertical sum using java stream api","body":"<p>DISCLAIMER: This isn't the efficient way with streams or something fancy that you could do in just a couple lines, but it is a simple easy-to-follow way. Why not just do something simple like this? Iterate over the list length and sum that column via the index:</p>\n<pre><code>List&lt;List&lt;BigDecimal&gt;&gt; matrix = &lt;&lt;your matrix here&gt;&gt;\nList&lt;BigDecimal&gt; columnSum= new List&lt;BigDecimal&gt;;\n// For each column\nfor(int i = 0; i &lt; matrix.get(0).size()-1; i++){\n      int sum = 0;\n      for(List&lt;BigDecimal&gt; row : matrix){\n            sum += row.get(i);\n      }\n      columnSum.add(BigDecimal(sum));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16254852,"reputation":81,"user_id":11737731,"display_name":"Darshak Kachchhi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1659551004,"creation_date":1659551004,"answer_id":73226107,"question_id":73225445,"body_markdown":"One way to transform the 2D list is to map to an object and by collecting that list we can find the transpose of the 2D list as below:\r\n\r\n    List&lt;List&lt;BigDecimal&gt;&gt; result = IntStream.range(0, list.get(0).size())\r\n    \t\t\t\t\t\t.mapToObj(i -&gt; list.stream().map(l -&gt; l.get(i)).collect(Collectors.toList()))\r\n    \t\t\t\t\t\t.collect(Collectors.toList());\r\n\r\nAnd Without transposing, you can directly find the sum of the list using reduce function below:\r\n\r\n    List&lt;BigDecimal&gt; result = IntStream.range(0, list.get(0).size())\r\n    \t\t\t\t\t\t.mapToObj(i -&gt; list.stream().map(l -&gt; l.get(i)).reduce(BigDecimal.ZERO, BigDecimal::add))\r\n    \t\t\t\t\t\t.collect(Collectors.toList());","title":"Vertical sum using java stream api","body":"<p>One way to transform the 2D list is to map to an object and by collecting that list we can find the transpose of the 2D list as below:</p>\n<pre><code>List&lt;List&lt;BigDecimal&gt;&gt; result = IntStream.range(0, list.get(0).size())\n                        .mapToObj(i -&gt; list.stream().map(l -&gt; l.get(i)).collect(Collectors.toList()))\n                        .collect(Collectors.toList());\n</code></pre>\n<p>And Without transposing, you can directly find the sum of the list using reduce function below:</p>\n<pre><code>List&lt;BigDecimal&gt; result = IntStream.range(0, list.get(0).size())\n                        .mapToObj(i -&gt; list.stream().map(l -&gt; l.get(i)).reduce(BigDecimal.ZERO, BigDecimal::add))\n                        .collect(Collectors.toList());\n</code></pre>\n"}],"owner":{"account_id":10999814,"reputation":597,"user_id":8498513,"display_name":"donquih0te"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"answer_count":2,"score":-3,"last_activity_date":1659551004,"creation_date":1659547493,"question_id":73225445,"body_markdown":"Imagine that I have a matrix of integer elements `List&lt;List&lt;BigDecimal&gt;&gt;`:\r\n\r\n```\r\n-------------\r\n| 1 | 2 | 3 |\r\n-------------\r\n| 2 | 3 | 4 |\r\n-------------\r\n| 3 | 4 | 5 |\r\n-------------\r\n| 4 | 5 | 6 |\r\n-------------\r\n```\r\n\r\nI want to vertically sum the elements of a matrix and get a `List&lt;BigDecimal&gt;` &lt;br&gt;\r\n`[10, 14, 18]`\r\n\r\nI suppose first I have to transpose the matrix and then it&#39;s easy to get the sum of the elements. But how to perfectly transpose a matrix using stream api??","title":"Vertical sum using java stream api","body":"<p>Imagine that I have a matrix of integer elements <code>List&lt;List&lt;BigDecimal&gt;&gt;</code>:</p>\n<pre><code>-------------\n| 1 | 2 | 3 |\n-------------\n| 2 | 3 | 4 |\n-------------\n| 3 | 4 | 5 |\n-------------\n| 4 | 5 | 6 |\n-------------\n</code></pre>\n<p>I want to vertically sum the elements of a matrix and get a <code>List&lt;BigDecimal&gt;</code> <br>\n<code>[10, 14, 18]</code></p>\n<p>I suppose first I have to transpose the matrix and then it's easy to get the sum of the elements. But how to perfectly transpose a matrix using stream api??</p>\n"},{"tags":["java","footer","openpdf"],"answers":[{"tags":[],"owner":{"account_id":21337285,"reputation":72,"user_id":15708327,"display_name":"WARUTS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1653694543,"creation_date":1653240885,"answer_id":72339902,"question_id":61938500,"body_markdown":"You need to know the page size and calculate from there.\r\n\r\nYou can use\r\n~~~\r\nshowTextAligned(ELEMENT.ALIGN_BOTTOM)\r\n~~~","title":"OpenPDF: Table not located in footer","body":"<p>You need to know the page size and calculate from there.</p>\n<p>You can use</p>\n<pre><code>showTextAligned(ELEMENT.ALIGN_BOTTOM)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2464328,"reputation":219,"user_id":2147769,"accept_rate":80,"display_name":"Kasper Helsted"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659550704,"creation_date":1659550704,"answer_id":73226046,"question_id":61938500,"body_markdown":"This was a bug with OpenPDF, which should have been fixed now.\r\nhttps://github.com/LibrePDF/OpenPDF/issues/373","title":"OpenPDF: Table not located in footer","body":"<p>This was a bug with OpenPDF, which should have been fixed now.\n<a href=\"https://github.com/LibrePDF/OpenPDF/issues/373\" rel=\"nofollow noreferrer\">https://github.com/LibrePDF/OpenPDF/issues/373</a></p>\n"}],"owner":{"account_id":2464328,"reputation":219,"user_id":2147769,"accept_rate":80,"display_name":"Kasper Helsted"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":738,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":73226046,"answer_count":2,"score":3,"last_activity_date":1659550704,"creation_date":1590076408,"question_id":61938500,"body_markdown":"When I add a table to the footer of the page, the footer resizes to the right size, however, the table does not stay within this footer, however it locates itself at the top of the page.\r\n\r\nI have created a test scenario to illustrate what I mean.\r\n\r\n```\r\npublic class TestClass {\r\n    public static void main(String[] args) {\r\n        try {\r\n            Document document = new Document(PageSize.A4);\r\n\r\n            PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream(&quot;fail.pdf&quot;));\r\n\r\n            PdfPTable table = new PdfPTable(2);\r\n            table.setWidthPercentage(100);\r\n            table.addCell(new PdfPCell(new Paragraph(&quot;CONTENT&quot;)));\r\n            table.addCell(new PdfPCell(new Paragraph(&quot;CONTENT&quot;)));\r\n\r\n            Paragraph footerParagraph = new Paragraph();\r\n            footerParagraph.add(table);\r\n            HeaderFooter footer = new HeaderFooter(footerParagraph, false);\r\n            footer.setAlignment(Element.ALIGN_CENTER);\r\n\r\n            document.setFooter(footer);\r\n\r\n            document.open();\r\n\r\n            document.add(new Paragraph(&quot;Hello World&quot;));\r\n            document.close();\r\n        } catch (Exception ex) {\r\n            System.out.println(ex);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nIn this example the the footer has the correct size for the table:\r\n[![Empty footer where the table should be ][1]][1]\r\n\r\n\r\nHowever as mentioned the table is not located at the bottom, but at the top:\r\n[![The table is located at the top of the page, on top of the other content][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Wd1zE.png\r\n  [2]: https://i.stack.imgur.com/3NDLM.png","title":"OpenPDF: Table not located in footer","body":"<p>When I add a table to the footer of the page, the footer resizes to the right size, however, the table does not stay within this footer, however it locates itself at the top of the page.</p>\n\n<p>I have created a test scenario to illustrate what I mean.</p>\n\n<pre><code>public class TestClass {\n    public static void main(String[] args) {\n        try {\n            Document document = new Document(PageSize.A4);\n\n            PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream(\"fail.pdf\"));\n\n            PdfPTable table = new PdfPTable(2);\n            table.setWidthPercentage(100);\n            table.addCell(new PdfPCell(new Paragraph(\"CONTENT\")));\n            table.addCell(new PdfPCell(new Paragraph(\"CONTENT\")));\n\n            Paragraph footerParagraph = new Paragraph();\n            footerParagraph.add(table);\n            HeaderFooter footer = new HeaderFooter(footerParagraph, false);\n            footer.setAlignment(Element.ALIGN_CENTER);\n\n            document.setFooter(footer);\n\n            document.open();\n\n            document.add(new Paragraph(\"Hello World\"));\n            document.close();\n        } catch (Exception ex) {\n            System.out.println(ex);\n        }\n    }\n}\n</code></pre>\n\n<p>In this example the the footer has the correct size for the table:\n<a href=\"https://i.stack.imgur.com/Wd1zE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wd1zE.png\" alt=\"Empty footer where the table should be \"></a></p>\n\n<p>However as mentioned the table is not located at the bottom, but at the top:\n<a href=\"https://i.stack.imgur.com/3NDLM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3NDLM.png\" alt=\"The table is located at the top of the page, on top of the other content\"></a></p>\n"},{"tags":["java","google-cloud-platform","mqtt","iot","paho"],"comments":[{"owner":{"account_id":14155962,"reputation":578,"user_id":10226695,"display_name":"Shavk with a Hoon"},"score":0,"creation_date":1659558350,"post_id":73226044,"comment_id":129325828,"body_markdown":"Add some code so that we can see what you are doing.","body":"Add some code so that we can see what you are doing."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1659558362,"post_id":73226044,"comment_id":129325834,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":1490668,"reputation":3679,"user_id":1397821,"accept_rate":50,"display_name":"M. Usman Khan"},"score":0,"creation_date":1665887011,"post_id":73226044,"comment_id":130803122,"body_markdown":"I think u need to send QoS 0, so that it doesnt try again and you&#39;ll get the error on timeout","body":"I think u need to send QoS 0, so that it doesnt try again and you&#39;ll get the error on timeout"}],"owner":{"account_id":5316681,"reputation":1,"user_id":10242910,"display_name":"Jacob"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659550702,"creation_date":1659550702,"question_id":73226044,"body_markdown":"I am sending an attach message to Google Cloud IoT Core with QoS 1 (as required by Google docs). However, I am finding that if the device has not been bound to the gateway, then the program times out until the client disconnects from the broker. \r\n\r\nThe eclipse paho client.publish method is blocking, so the program will never continue and the attach logic is done when the program starts.\r\n\r\nI have tried using future/executor service to set a timeout on the client.publish method but paho throws an interrupted exception and re-sends the message. How can I set a timeout on this method in the correct way (so I can receive the error and the program can continue)?\r\n\r\nThanks.","title":"Interrupt Eclipse Paho MQTT publish method (Google Cloud) safely?","body":"<p>I am sending an attach message to Google Cloud IoT Core with QoS 1 (as required by Google docs). However, I am finding that if the device has not been bound to the gateway, then the program times out until the client disconnects from the broker.</p>\n<p>The eclipse paho client.publish method is blocking, so the program will never continue and the attach logic is done when the program starts.</p>\n<p>I have tried using future/executor service to set a timeout on the client.publish method but paho throws an interrupted exception and re-sends the message. How can I set a timeout on this method in the correct way (so I can receive the error and the program can continue)?</p>\n<p>Thanks.</p>\n"},{"tags":["java","linked-list","stack"],"comments":[{"owner":{"account_id":142651,"reputation":6584,"user_id":350491,"accept_rate":78,"display_name":"Ankit"},"score":2,"creation_date":1366303915,"post_id":16088811,"comment_id":22969143,"body_markdown":"you can always traverse a list up to its tail. though it would be least efficient not to keep the reference to last node.","body":"you can always traverse a list up to its tail. though it would be least efficient not to keep the reference to last node."},{"owner":{"account_id":2582078,"reputation":326,"user_id":2238534,"display_name":"Guillermo Ren&#233; Ram&#237;rez"},"score":0,"creation_date":1366304049,"post_id":16088811,"comment_id":22969217,"body_markdown":"That&#39;s called a queue. And yeah, just traverse the list every time.","body":"That&#39;s called a queue. And yeah, just traverse the list every time."},{"owner":{"account_id":1015001,"reputation":7764,"user_id":1026764,"accept_rate":72,"display_name":"noMAD"},"score":0,"creation_date":1366304123,"post_id":16088811,"comment_id":22969259,"body_markdown":"I think you are confused about what the head is and what the tail is","body":"I think you are confused about what the head is and what the tail is"}],"answers":[{"tags":[],"owner":{"account_id":378962,"reputation":15657,"user_id":732016,"accept_rate":83,"display_name":"wchargin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1366304182,"creation_date":1366304182,"answer_id":16088940,"question_id":16088811,"body_markdown":"You *could* do this but it would be pretty inefficient because you have to go through the entire list every time you want to do something. There really isn&#39;t any reason why you would want to keep a reference to the head while all the operations are performed at the tail.\r\n\r\nBut here&#39;s how I would do it anyway:\r\n\r\n    class Entry&lt;E&gt; {\r\n        E object;\r\n        Entry&lt;E&gt; next;\r\n        public Entry(E obj) {\r\n            object = obj;\r\n        }\r\n    }\r\n    \r\n    class StackList&lt;E&gt; {\r\n        Entry&lt;E&gt; head;\r\n        public void push(E element) {\r\n            if (head == null) {\r\n                // first\r\n                head = new Entry&lt;E&gt;(element);\r\n                return;\r\n            }\r\n            Entry&lt;E&gt; node = head;\r\n            while (node != null &amp;&amp; node.next != null) {\r\n                node = node.next;\r\n            }\r\n            // node is now the tail\r\n            Entry&lt;E&gt; newEntry = new Entry&lt;E&gt;(element);\r\n            node.next = newEntry;\r\n        }\r\n        public E pop() {\r\n            if (head == null) {\r\n                // empty\r\n                return null;\r\n            }\r\n            Entry&lt;E&gt; node = head, previousNode = null;\r\n            while (node.next != null) {\r\n                previousNode = node;\r\n                node = node.next;\r\n            }\r\n            // node is now the tail\r\n            // previousNode is the next-to-last\r\n            if (previousNode != null) {\r\n                previousNode.next = null;\r\n            } else {\r\n                // there was only one thing\r\n                head = null;\r\n            }\r\n            return node.object;\r\n        }\r\n    }","title":"Stack operations using Linked LIst in Java","body":"<p>You <em>could</em> do this but it would be pretty inefficient because you have to go through the entire list every time you want to do something. There really isn't any reason why you would want to keep a reference to the head while all the operations are performed at the tail.</p>\n\n<p>But here's how I would do it anyway:</p>\n\n<pre><code>class Entry&lt;E&gt; {\n    E object;\n    Entry&lt;E&gt; next;\n    public Entry(E obj) {\n        object = obj;\n    }\n}\n\nclass StackList&lt;E&gt; {\n    Entry&lt;E&gt; head;\n    public void push(E element) {\n        if (head == null) {\n            // first\n            head = new Entry&lt;E&gt;(element);\n            return;\n        }\n        Entry&lt;E&gt; node = head;\n        while (node != null &amp;&amp; node.next != null) {\n            node = node.next;\n        }\n        // node is now the tail\n        Entry&lt;E&gt; newEntry = new Entry&lt;E&gt;(element);\n        node.next = newEntry;\n    }\n    public E pop() {\n        if (head == null) {\n            // empty\n            return null;\n        }\n        Entry&lt;E&gt; node = head, previousNode = null;\n        while (node.next != null) {\n            previousNode = node;\n            node = node.next;\n        }\n        // node is now the tail\n        // previousNode is the next-to-last\n        if (previousNode != null) {\n            previousNode.next = null;\n        } else {\n            // there was only one thing\n            head = null;\n        }\n        return node.object;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2635716,"reputation":51,"user_id":2280464,"accept_rate":12,"display_name":"GreatBambino"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":509,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1659550681,"creation_date":1366303784,"question_id":16088811,"body_markdown":"I need to write a class that implements a stack using a linked list.  The twist is that it should perform the push and pop operations from the tail of the list instead of the head, without maintaining a reference to the lists tail node.\r\n\r\nHow can I achieve this without keeping a reference to the tail node?","title":"Stack operations using Linked LIst in Java","body":"<p>I need to write a class that implements a stack using a linked list.  The twist is that it should perform the push and pop operations from the tail of the list instead of the head, without maintaining a reference to the lists tail node.</p>\n<p>How can I achieve this without keeping a reference to the tail node?</p>\n"},{"tags":["java","bazel","bazel-rules","bazel-java"],"answers":[{"tags":[],"owner":{"account_id":2421862,"reputation":1343,"user_id":5157998,"accept_rate":59,"display_name":"rishi007bansod"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659550616,"creation_date":1659550616,"answer_id":73226029,"question_id":73224671,"body_markdown":"Setting bazel toolchain and updating `.bazelrc` file with below contents solved my issue ----&gt;\r\n\r\n```\r\n$ cat ~/.bazelrc\r\nstartup --server_javabase=/build/toolchain/lin64/jdk-1.8.0_201\r\n\r\nstartup --host_jvm_args=-Xms2G\r\nstartup --host_jvm_args=-Xmx2G\r\n\r\nbuild --remote_http_cache=http://127.0.0.1:9090\r\nbuild --remote_upload_local_results=true\r\nbuild --remote_timeout=15\r\n``` ","title":"Java Bazel Build Error : java/toolchains/bootclasspath_classes/DumpPlatformClassPath.class [for host] failed: not all outputs were created or valid","body":"<p>Setting bazel toolchain and updating <code>.bazelrc</code> file with below contents solved my issue ----&gt;</p>\n<pre><code>$ cat ~/.bazelrc\nstartup --server_javabase=/build/toolchain/lin64/jdk-1.8.0_201\n\nstartup --host_jvm_args=-Xms2G\nstartup --host_jvm_args=-Xmx2G\n\nbuild --remote_http_cache=http://127.0.0.1:9090\nbuild --remote_upload_local_results=true\nbuild --remote_timeout=15\n</code></pre>\n"}],"owner":{"account_id":2421862,"reputation":1343,"user_id":5157998,"accept_rate":59,"display_name":"rishi007bansod"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":222,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73226029,"answer_count":1,"score":0,"last_activity_date":1659550616,"creation_date":1659543805,"question_id":73224671,"body_markdown":"Getting following error while building java bazel project --&gt;\r\n```\r\n$ bazel build :all\r\nINFO: Invocation ID: f3087fe5-67a5-4b0f-a3a8-a61b3bbfa869\r\nWARNING: /home/ess/.cache/bazel/_bazel_ess/4fc692f493f73198611cffef8bfaa09d/external/cayman_zlib/BUILD.bazel:77:11: in linkstatic attribute of cc_library rule @cayman_zlib//:zlib: setting &#39;linkstatic=1&#39; is recommended if there are no object files\r\nINFO: Analyzed 23 targets (0 packages loaded, 0 targets configured).\r\nINFO: Found 23 targets...\r\nERROR: /home/ess/.cache/bazel/_bazel_ess/4fc692f493f73198611cffef8bfaa09d/external/prj_build/java/toolchains/BUILD:13:14: output &#39;external/prj_build/java/toolchains/bootclasspath_classes/DumpPlatformClassPath.class&#39; was not created\r\nERROR: /home/ess/.cache/bazel/_bazel_ess/4fc692f493f73198611cffef8bfaa09d/external/prj_build/java/toolchains/BUILD:13:14: Action external/prj_build/java/toolchains/bootclasspath_classes/DumpPlatformClassPath.class [for host] failed: not all outputs were created or valid\r\nINFO: Elapsed time: 0.794s, Critical Path: 0.43s\r\nINFO: 3 processes: 1 remote cache hit, 2 internal.\r\nFAILED: Build did NOT complete successfully\r\n\r\n```\r\nhow can I resolve this bazel build issue?\r\nBazel version I am using is `4.0.0`","title":"Java Bazel Build Error : java/toolchains/bootclasspath_classes/DumpPlatformClassPath.class [for host] failed: not all outputs were created or valid","body":"<p>Getting following error while building java bazel project --&gt;</p>\n<pre><code>$ bazel build :all\nINFO: Invocation ID: f3087fe5-67a5-4b0f-a3a8-a61b3bbfa869\nWARNING: /home/ess/.cache/bazel/_bazel_ess/4fc692f493f73198611cffef8bfaa09d/external/cayman_zlib/BUILD.bazel:77:11: in linkstatic attribute of cc_library rule @cayman_zlib//:zlib: setting 'linkstatic=1' is recommended if there are no object files\nINFO: Analyzed 23 targets (0 packages loaded, 0 targets configured).\nINFO: Found 23 targets...\nERROR: /home/ess/.cache/bazel/_bazel_ess/4fc692f493f73198611cffef8bfaa09d/external/prj_build/java/toolchains/BUILD:13:14: output 'external/prj_build/java/toolchains/bootclasspath_classes/DumpPlatformClassPath.class' was not created\nERROR: /home/ess/.cache/bazel/_bazel_ess/4fc692f493f73198611cffef8bfaa09d/external/prj_build/java/toolchains/BUILD:13:14: Action external/prj_build/java/toolchains/bootclasspath_classes/DumpPlatformClassPath.class [for host] failed: not all outputs were created or valid\nINFO: Elapsed time: 0.794s, Critical Path: 0.43s\nINFO: 3 processes: 1 remote cache hit, 2 internal.\nFAILED: Build did NOT complete successfully\n\n</code></pre>\n<p>how can I resolve this bazel build issue?\nBazel version I am using is <code>4.0.0</code></p>\n"},{"tags":["java","sqlite"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":2,"creation_date":1659302600,"post_id":73186935,"comment_id":129256840,"body_markdown":"[The Oracle tutorial page on Prepared Statements](https://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html) might have some useful information for you.","body":"<a href=\"https://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html\" rel=\"nofollow noreferrer\">The Oracle tutorial page on Prepared Statements</a> might have some useful information for you."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":2,"creation_date":1659302860,"post_id":73186935,"comment_id":129256888,"body_markdown":"Just an observation: where you have `&quot;VALUES (title, ...`, I assume that should be `&quot;VALUES (&#39;title&#39;, ...` and so on. The values needs to be in single quotes if you are hard-coding them all in the SQL statement. (Also, [edit] your question to show the full error message.)","body":"Just an observation: where you have <code>&quot;VALUES (title, ...</code>, I assume that should be <code>&quot;VALUES (&#39;title&#39;, ...</code> and so on. The values needs to be in single quotes if you are hard-coding them all in the SQL statement. (Also, <a href=\"https://stackoverflow.com/posts/73186935/edit\">edit</a> your question to show the full error message.)"},{"owner":{"account_id":11706021,"reputation":45,"user_id":8569575,"display_name":"Itzik"},"score":0,"creation_date":1659305250,"post_id":73186935,"comment_id":129257285,"body_markdown":"@andrewJames. Thank you. \nI edited the question and I realised that the &quot;if&quot; statement is not responding. I did that by asking System.out.println. and got no reply. Can you see what is wrong with my if statement (registrationForm) please?","body":"@andrewJames. Thank you.  I edited the question and I realised that the &quot;if&quot; statement is not responding. I did that by asking System.out.println. and got no reply. Can you see what is wrong with my if statement (registrationForm) please?"},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1659306986,"post_id":73186935,"comment_id":129257513,"body_markdown":"The code in your question still shows an invalid SQL statement (as per my previous comment) - one that should throw a `SQLException` with an error message. I don&#39;t know why you are not apparently seeing any error message for that.","body":"The code in your question still shows an invalid SQL statement (as per my previous comment) - one that should throw a <code>SQLException</code> with an error message. I don&#39;t know why you are not apparently seeing any error message for that."},{"owner":{"account_id":11706021,"reputation":45,"user_id":8569575,"display_name":"Itzik"},"score":0,"creation_date":1659308290,"post_id":73186935,"comment_id":129257671,"body_markdown":"I am using Eclipse as the IDE and I fixed the if statement for system print. I also intentionally misspelled one of the columns in the Model class and got a message that they cannot find the column. When I fixed t, I have gotten no messages but at the end of the day, it just doesn&#39;t record anything @andrewJames","body":"I am using Eclipse as the IDE and I fixed the if statement for system print. I also intentionally misspelled one of the columns in the Model class and got a message that they cannot find the column. When I fixed t, I have gotten no messages but at the end of the day, it just doesn&#39;t record anything @andrewJames"},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1659308513,"post_id":73186935,"comment_id":129257708,"body_markdown":"OK, but show us the code you are actually running. What do you mean by &quot;it doesn&#39;t record anything&quot;? Are you saying the INSERT does not insert any data into the table? If so, how do you know that?","body":"OK, but show us the code you are actually running. What do you mean by &quot;it doesn&#39;t record anything&quot;? Are you saying the INSERT does not insert any data into the table? If so, how do you know that?"}],"answers":[{"tags":[],"owner":{"account_id":11706021,"reputation":45,"user_id":8569575,"display_name":"Itzik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659549863,"creation_date":1659549863,"answer_id":73225892,"question_id":73186935,"body_markdown":"I redone the if Statement below. I first needed to initialise `prepareStatment` which I named `pst`. Please see code below\r\n\r\n    public void actionPerformed(java.awt.event.ActionEvent e1) {\r\n\t\tif (e1.getSource() == regButton) {\r\n\t\t\tregInput.dispose();  \r\n\t\t\tConnection con = Model.connect();\r\n\t\t\t\r\n\t\t\tString query = &quot;insert into registrationAtm values(?,?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)&quot;;\r\n\t\t\t\r\n\r\n\t\t\ttry {\r\n\t\t\t\tpst = con.prepareStatement(query);\r\n\t\t\t\tpst.setString(2,((String) title.getSelectedItem().toString()));\r\n\t\t\t\tpst.setString(3, firstNameT.getText());\r\n\t\t\t\tpst.setString(4, lastNameT.getText());\r\n\t\t\t\tpst.setString(5, addT.getText());\r\n\t\t\t\tpst.setString(6, cityT.getText());\r\n\t\t\t\tpst.setString(7, postcodeT.getText());\r\n\t\t\t\tpst.setInt(8, Integer.parseInt((String) dates.getSelectedItem().toString()));\r\n\t\t\t\tpst.setString(9, (String) months.getSelectedItem());\r\n\t\t\t\tpst.setInt(10, Integer.parseInt((String) years.getSelectedItem().toString()));\r\n\t\t\t\tpst.setString(11, emailT.getText());\r\n\t\t\t\tpst.setString(12, passwordT.getText());\r\n\t\t\t\t\r\n\t\t\t\tpst.execute();\r\n\t\t\t\t\r\n\t\t\t\tString query2 = &quot;insert into detailsAtm values (?,?)&quot;; \r\n\t\t\t\tpst2 = con.prepareStatement(query2);\r\n\t\t\t\tpst2.setString(2, companyText.getText());\r\n\t\t\t\tpst2.setString(3, communityText.getText());\r\n\t\t\t\tpst2.execute();\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t\tSystem.out.println(e.getMessage());\r\n\t\t\t}\r\n\t\t} else if (e1.getSource() == cancelButton) {\r\n\t\t\tSystem.out.print(&quot;Cancel&quot;);\r\n\r\n\t\t}\r\n\t}","title":"Sqlite connected but information not transmitted","body":"<p>I redone the if Statement below. I first needed to initialise <code>prepareStatment</code> which I named <code>pst</code>. Please see code below</p>\n<pre><code>public void actionPerformed(java.awt.event.ActionEvent e1) {\n    if (e1.getSource() == regButton) {\n        regInput.dispose();  \n        Connection con = Model.connect();\n        \n        String query = &quot;insert into registrationAtm values(?,?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)&quot;;\n        \n\n        try {\n            pst = con.prepareStatement(query);\n            pst.setString(2,((String) title.getSelectedItem().toString()));\n            pst.setString(3, firstNameT.getText());\n            pst.setString(4, lastNameT.getText());\n            pst.setString(5, addT.getText());\n            pst.setString(6, cityT.getText());\n            pst.setString(7, postcodeT.getText());\n            pst.setInt(8, Integer.parseInt((String) dates.getSelectedItem().toString()));\n            pst.setString(9, (String) months.getSelectedItem());\n            pst.setInt(10, Integer.parseInt((String) years.getSelectedItem().toString()));\n            pst.setString(11, emailT.getText());\n            pst.setString(12, passwordT.getText());\n            \n            pst.execute();\n            \n            String query2 = &quot;insert into detailsAtm values (?,?)&quot;; \n            pst2 = con.prepareStatement(query2);\n            pst2.setString(2, companyText.getText());\n            pst2.setString(3, communityText.getText());\n            pst2.execute();\n            \n            \n        } catch (Exception e) {\n            System.out.println(e.getMessage());\n        }\n    } else if (e1.getSource() == cancelButton) {\n        System.out.print(&quot;Cancel&quot;);\n\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11706021,"reputation":45,"user_id":8569575,"display_name":"Itzik"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1659549863,"creation_date":1659302049,"question_id":73186935,"body_markdown":"I am a student and please try to help me and not brush me off. I hope that my code is understandable, I am trying to follow best practice. \r\n\r\n&quot;Edit&quot; I changed what @Andrew suggested regarding the missing &#39;. There are no error messages. The information is just not submitting \r\n\r\nI am creating a registration form in java and connected it to my SQLITE database. (Got the message connection made). I have a couple of classes (files in java) and I will list below the &quot;RegistrationForm class&quot; that is creating the form and in which I added the &#39;getSelected&#39; and named the String to match the SQL. \r\nIn the &quot;Model class&quot; I added the SQLITE connection and the columns field with the values. \r\n\r\n    `public class Model {\r\n    \tString []pesonalInfo;\r\n    \tpublic static void connect() {\r\n    \tConnection conn = null;\r\n    \t\r\n    \t\ttry {\r\n    \t\t\t\r\n    \t\t\tString url = &quot;jdbc:sqlite:C:\\\\Users\\\\myfek\\\\OneDrive\\\\Personal\\\\Gateshead &quot;\r\n    \t\t\t\t\t+ &quot;College\\\\Project3\\\\ProjectATM.db&quot;;\r\n    \t\t\tconn = DriverManager.getConnection(url);\r\n    \t\t\tSystem.out.println(&quot;connection made&quot;);\r\n    \t\t\tStatement st = conn.createStatement();\r\n    \t\t\tString querie1= &quot;INSERT INTO &#39;personalInfo&#39;&quot; + &quot;(personal_title ,personal_first_name, &quot;\r\n    \t\t\t\t\t+ &quot;personal_last_name,firstLAdd, secondLAdd, city, postcode, application_Company,&quot;\r\n    \t\t\t\t\t+ &quot; application_Community, phone, date, month, year, email, password) &quot;\r\n    \t\t\t\t\t+ &quot;VALUES (title, firstNameT, lastNameT, address1A, address2A, &#39;cityA&#39;, &#39;postCodeA&#39;,&quot;\r\n    \t\t\t\t\t+ &quot;&#39;areaCompany&#39;, &#39;areaCommunity&#39;, &#39;phoneA&#39;, &#39;dates&#39;, &#39;months&#39;, &#39;years&#39;, &#39;emailA&#39;, &#39;passwordT&#39;)&quot;;\r\n    \t\t\tst.execute(querie1);\r\n    \t\t\tconn.close();\r\n    \t\t\t\r\n    \t\t } catch (SQLException e) {  \r\n    \t            System.out.println(e.getMessage());  \r\n    \t        } finally {  \r\n    \t            try {  \r\n    \t                if (conn != null) {  \r\n    \t                    conn.close();  \r\n    \t                }  \r\n    \t            } catch (SQLException ex) {  \r\n    \t                System.out.println(ex.getMessage());  \r\n    \t            }  \r\n    \t        }\r\n    \t\t}\r\n    \t\r\n    \t\r\n    \t\r\n    \tpublic void regButtonactionPerformed(ActionEvent e) {\r\n    \t\r\n    \t}\r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\tconnect();\r\n        }\r\n    \r\n    \t\t\r\n    \r\n    \t}\r\n    `\r\n\r\n \r\n\r\n    public class RegistrationForm extends LogReg implements ActionListener{\r\n    \r\n    \tJFrame regInput = new JFrame();\r\n    \tJLabel dob, titleL, companyL ;\r\n    \t//private JButton regButton, cancelButton;\r\n    \tJTextField  firstNameT, lastNameT, areaCompany, areaCommunity, address1A, address2A, cityA,\r\n    \tpostCodeA, emailA, phoneA, passwordT;\r\n    \t\r\n    \r\n    \tString[] titleToChoose = { &quot;Mr&quot;, &quot;Mrs.&quot;, &quot;Ms.&quot;, &quot;Master&quot;, &quot;Doctor&quot; };\r\n    \tJComboBox &lt;String&gt; title= new JComboBox&lt;&gt;(titleToChoose);\r\n    \t\r\n    \tString [] date = {\r\n    \t\t\t&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;,&quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;,\r\n                &quot;11&quot;, &quot;12&quot;, &quot;13&quot;, &quot;14&quot;, &quot;15&quot;,&quot;16&quot;, &quot;17&quot;, &quot;18&quot;, &quot;19&quot;, &quot;20&quot;,\r\n                &quot;21&quot;, &quot;22&quot;, &quot;23&quot;, &quot;24&quot;, &quot;25&quot;,&quot;26&quot;, &quot;27&quot;, &quot;28&quot;, &quot;29&quot;, &quot;30&quot;,&quot;31&quot;\r\n    \t};\r\n    \tJComboBox &lt;String&gt; dates= new JComboBox&lt;&gt;(date);\r\n    \tString month[]= {\r\n    \t\t\t&quot;Jan&quot;, &quot;feb&quot;, &quot;Mar&quot;, &quot;Apr&quot;,&quot;May&quot;,&quot;Jun&quot;,&quot;July&quot;,\r\n    \t\t\t&quot;Aug&quot;,&quot;Sup&quot;, &quot;Oct&quot;, &quot;Nov&quot;, &quot;Dec&quot;\r\n    \t};\r\n    \tJComboBox&lt;String&gt; months =  new JComboBox&lt;&gt;(month);\r\n    \tString year[] = {\r\n    \t\t\t&quot;1970&quot;, &quot;1971&quot;, &quot;1972&quot;, &quot;1973&quot;, &quot;1974&quot;, &quot;1975&quot;, &quot;1976&quot;, &quot;1977&quot;, &quot;1978&quot;, &quot;1979&quot;,\r\n    \t\t\t&quot;1980&quot;, &quot;1981&quot;, &quot;1982&quot;, &quot;1983&quot;, &quot;1984&quot;, &quot;1985&quot;, &quot;1986&quot;, &quot;1987&quot;, &quot;1988&quot;, &quot;1989&quot;,\r\n    \t\t\t&quot;1990&quot;, &quot;1991&quot;, &quot;1992&quot;, &quot;1993&quot;, &quot;1994&quot;, &quot;1995&quot;, &quot;1996&quot;, &quot;1997&quot;, &quot;1998&quot;, &quot;1999&quot;,\r\n    \t\t\t&quot;2000&quot;, &quot;2001&quot;, &quot;2002&quot;, &quot;2003&quot;, &quot;2004&quot;, &quot;2005&quot;, &quot;2006&quot;, &quot;2007&quot;, &quot;2008&quot;, &quot;2009&quot;\r\n    \t};\r\n    \tJComboBox&lt;String&gt; years = new JComboBox&lt;&gt;(year);\r\n    \tJButton regButton, cancelButton;\r\n    \r\n    \tpublic RegistrationForm(){\r\n    \t\tJFrame regInput = new JFrame();\r\n    \t\tregInput.setTitle(&quot;Registration Form&quot;);\r\n    \t\tregInput.setLocation(200,10);\r\n    \r\n    \t\ttitleL = new JLabel(&quot;Please enter your name&quot;);\r\n    \t\ttitleL.setSize(200,25);\r\n    \t\ttitleL.setLocation(80, 30);\r\n    \t\t\r\n    \t\ttitle.setSize(85,25);\r\n    \t\ttitle.setLocation(110, 50);\r\n    \t\ttitle.setSelectedIndex(0);\r\n    \r\n    \t\tfirstNameT = new JTextField(&quot;First Name&quot;);\r\n    \t\tfirstNameT.setSize(200, 30);\r\n    \t\tfirstNameT.setLocation(200, 50);\r\n    \r\n    \t\tlastNameT= new JTextField(&quot;Last Name&quot;);\r\n    \t\tlastNameT.setSize(200, 30);\r\n    \t\tlastNameT.setLocation(400, 50);\r\n    \t\t\r\n    \t\tcompanyL= new JLabel(&quot;Please write below your organisation&quot;);\r\n    \t\tcompanyL.setSize(500, 30);\r\n    \t\tcompanyL.setLocation(90, 80);\r\n    \t\t\r\n    \t\tareaCompany = new JTextField(&quot;if Company&quot;);\r\n    \t\tareaCompany.setSize(400, 30);\r\n    \t\tareaCompany.setLocation(90, 110);\r\n    \t\t\r\n    \t\tareaCommunity= new JTextField(&quot;If Community&quot;);\r\n    \t\tareaCommunity.setSize(400,30);\r\n    \t\tareaCommunity.setLocation(90, 140);\r\n    \r\n    \t\taddress1A= new JTextField(&quot;First line of address&quot;);\r\n    \t\taddress1A.setSize(300, 30);\r\n    \t\taddress1A.setLocation(90, 180);\r\n    \r\n    \t\taddress2A = new JTextField(&quot;Second line of address&quot;);\r\n    \t\taddress2A.setSize(350, 30);\r\n    \t\taddress2A.setLocation(90, 220);\r\n    \r\n    \t\tcityA = new JTextField(&quot;City&quot;);\r\n    \t\tcityA.setSize(250, 30);\r\n    \t\tcityA.setLocation(90,250 );\r\n    \r\n    \t\tpostCodeA = new JTextField(&quot;PostCode&quot;);\r\n    \t\tpostCodeA.setSize(250, 30);\r\n    \t\tpostCodeA.setLocation(350, 250);\r\n    \t\temailA= new JTextField(&quot;Email address&quot;);\r\n    \t\temailA.setSize(250, 30);\r\n    \t\temailA.setLocation(90, 300);\r\n    \t\tpasswordT = new JTextField(&quot;please enter your passowrd&quot;);\r\n    \t\tpasswordT.setSize(250, 30);\r\n    \t\tpasswordT.setLocation(400, 300);\r\n    \t\tphoneA= new JTextField(&quot;Phone number&quot;);\r\n    \t\tphoneA.setSize(200, 30);\r\n    \t\tphoneA.setLocation(90, 340);\r\n    \t\tdob = new JLabel(&quot;D.O.B.&quot;);\r\n    \t\tdob.setFont(new Font(&quot;Ariel&quot;,Font.PLAIN,15));\r\n    \t\tdob.setSize(100, 30);\r\n    \t\tdob.setLocation(100, 390);\r\n    \r\n    \t\tdates.setSize(100, 20);\r\n    \t\tdates.setLocation(180, 390);\r\n    \t\tdates.setSelectedIndex(0);\r\n    \r\n    \t\tmonths.setSize(100, 20);\r\n    \t\tmonths.setLocation(250, 390);\r\n    \t\tmonths.setSelectedIndex(1);\r\n    \r\n    \t\tyears.setSize(100, 20);\r\n    \t\tyears.setLocation(350, 390);\r\n    \t\tyears.setSelectedIndex(30);\r\n    \t\tregButton = new JButton(&quot;Register&quot;);\r\n    \t\tregButton.setText(&quot;Register&quot;);\r\n    \t\t//regButton.setBounds(100, 300, 120, 150);\r\n    \t\t//regButton.setBounds(0, 0, 600, 400);\r\n    \t\tregButton.setSize(300, 40);\r\n    \t\tregButton.setFont((new Font(&quot;Tahoma&quot;, Font.BOLD,20)));\r\n    \t\tregButton.setLocation(200, 450);\r\n    \t\tcancelButton = new JButton(&quot;Cancel&quot;);\r\n    \t\tcancelButton.setSize(300, 40);\r\n    \t\tcancelButton.setFont((new Font(&quot;Tahoma&quot;, Font.BOLD,20)));\r\n    \t\tcancelButton.setLocation(525,450);\r\n    \t\tregInput.getContentPane();\r\n    \t\tregInput.add(titleL);\r\n    \t\tregInput.add(title);\r\n    \t\tregInput.add(firstNameT);\r\n    \t\tregInput.add(lastNameT);\r\n    \t\tregInput.add(areaCommunity);\r\n    \t\tregInput.add(areaCompany);\r\n    \t\tregInput.add(companyL);\r\n    \t\tregInput.add(address1A);\r\n    \t\tregInput.add(address2A);\r\n    \t\tregInput.add(cityA);\r\n    \t\tregInput.add(postCodeA);\r\n    \t\tregInput.add(phoneA);\r\n    \t\tregInput.add(emailA);\r\n    \t\tregInput.add(passwordT);\r\n    \t\tregInput.add(dob);\r\n    \t\tregInput.add(dates);\r\n    \t\tregInput.add(months);\r\n    \t\tregInput.add(years);\r\n    \t\tregInput.add(regButton);\r\n    \t\tregInput.add(cancelButton);\r\n    \t\tregInput.setBounds(300, 90, 900, 600);\r\n    \t\tregInput.setLayout(null);\r\n    \t\tregInput.setResizable(false);\r\n    \t\tregInput.setVisible(true);\r\n    \t\t\r\n    \r\n    \t}\r\n    \r\n    \r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \r\n    \t\tnew RegistrationForm();\r\n    \r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void actionPerformed(ActionEvent e) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\tif (e.getSource()==registerButton) {\r\n    \t\t\t//regInput.setVisible(true);\r\n    \t\t\tString personal_title = (String) title.getSelectedItem();\r\n    \t\t\tString personal_first_name = firstNameT.getSelectedText();\r\n    \t\t\tString personal_last_name = lastNameT.getSelectedText();\r\n    \t\t\tString firstLAdd = address1A.getSelectedText();\r\n    \t\t\tString secondLAdd= address2A.getSelectedText();\r\n    \t\t\tString city = cityA.getSelectedText();\r\n    \t\t\tString postcode = postCodeA.getSelectedText();\r\n    \t\t\tString application_Company = areaCompany.getSelectedText(); \r\n    \t\t\tString application_Community = areaCommunity.getSelectedText();\r\n    \t\t\tString phone = phoneA.getSelectedText(); \r\n    \t\t\tString date= (String) dates.getSelectedItem();\r\n    \t\t\tString month = (String) months.getSelectedItem();\r\n    \t\t\tString year = (String) years.getSelectedItem(); \r\n    \t\t\tString email = emailA.getSelectedText();\r\n    \t\t\tString password = passwordT.getSelectedText(); \r\n    \t\t\t//connect(); I tried this\r\n    \t\t\t\r\n    \r\n    \t\t}else if(e.getSource()==loginButton) {\r\n    \t\t\tSystem.out.println(&quot;Login&quot;);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\t\r\n    \r\n    \t}\r\n\t\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Sqlite connected but information not transmitted","body":"<p>I am a student and please try to help me and not brush me off. I hope that my code is understandable, I am trying to follow best practice.</p>\n<p>&quot;Edit&quot; I changed what @Andrew suggested regarding the missing '. There are no error messages. The information is just not submitting</p>\n<p>I am creating a registration form in java and connected it to my SQLITE database. (Got the message connection made). I have a couple of classes (files in java) and I will list below the &quot;RegistrationForm class&quot; that is creating the form and in which I added the 'getSelected' and named the String to match the SQL.\nIn the &quot;Model class&quot; I added the SQLITE connection and the columns field with the values.</p>\n<pre><code>`public class Model {\n    String []pesonalInfo;\n    public static void connect() {\n    Connection conn = null;\n    \n        try {\n            \n            String url = &quot;jdbc:sqlite:C:\\\\Users\\\\myfek\\\\OneDrive\\\\Personal\\\\Gateshead &quot;\n                    + &quot;College\\\\Project3\\\\ProjectATM.db&quot;;\n            conn = DriverManager.getConnection(url);\n            System.out.println(&quot;connection made&quot;);\n            Statement st = conn.createStatement();\n            String querie1= &quot;INSERT INTO 'personalInfo'&quot; + &quot;(personal_title ,personal_first_name, &quot;\n                    + &quot;personal_last_name,firstLAdd, secondLAdd, city, postcode, application_Company,&quot;\n                    + &quot; application_Community, phone, date, month, year, email, password) &quot;\n                    + &quot;VALUES (title, firstNameT, lastNameT, address1A, address2A, 'cityA', 'postCodeA',&quot;\n                    + &quot;'areaCompany', 'areaCommunity', 'phoneA', 'dates', 'months', 'years', 'emailA', 'passwordT')&quot;;\n            st.execute(querie1);\n            conn.close();\n            \n         } catch (SQLException e) {  \n                System.out.println(e.getMessage());  \n            } finally {  \n                try {  \n                    if (conn != null) {  \n                        conn.close();  \n                    }  \n                } catch (SQLException ex) {  \n                    System.out.println(ex.getMessage());  \n                }  \n            }\n        }\n    \n    \n    \n    public void regButtonactionPerformed(ActionEvent e) {\n    \n    }\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        connect();\n    }\n\n        \n\n    }\n`\n\n\n\npublic class RegistrationForm extends LogReg implements ActionListener{\n\n    JFrame regInput = new JFrame();\n    JLabel dob, titleL, companyL ;\n    //private JButton regButton, cancelButton;\n    JTextField  firstNameT, lastNameT, areaCompany, areaCommunity, address1A, address2A, cityA,\n    postCodeA, emailA, phoneA, passwordT;\n    \n\n    String[] titleToChoose = { &quot;Mr&quot;, &quot;Mrs.&quot;, &quot;Ms.&quot;, &quot;Master&quot;, &quot;Doctor&quot; };\n    JComboBox &lt;String&gt; title= new JComboBox&lt;&gt;(titleToChoose);\n    \n    String [] date = {\n            &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;,&quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;,\n            &quot;11&quot;, &quot;12&quot;, &quot;13&quot;, &quot;14&quot;, &quot;15&quot;,&quot;16&quot;, &quot;17&quot;, &quot;18&quot;, &quot;19&quot;, &quot;20&quot;,\n            &quot;21&quot;, &quot;22&quot;, &quot;23&quot;, &quot;24&quot;, &quot;25&quot;,&quot;26&quot;, &quot;27&quot;, &quot;28&quot;, &quot;29&quot;, &quot;30&quot;,&quot;31&quot;\n    };\n    JComboBox &lt;String&gt; dates= new JComboBox&lt;&gt;(date);\n    String month[]= {\n            &quot;Jan&quot;, &quot;feb&quot;, &quot;Mar&quot;, &quot;Apr&quot;,&quot;May&quot;,&quot;Jun&quot;,&quot;July&quot;,\n            &quot;Aug&quot;,&quot;Sup&quot;, &quot;Oct&quot;, &quot;Nov&quot;, &quot;Dec&quot;\n    };\n    JComboBox&lt;String&gt; months =  new JComboBox&lt;&gt;(month);\n    String year[] = {\n            &quot;1970&quot;, &quot;1971&quot;, &quot;1972&quot;, &quot;1973&quot;, &quot;1974&quot;, &quot;1975&quot;, &quot;1976&quot;, &quot;1977&quot;, &quot;1978&quot;, &quot;1979&quot;,\n            &quot;1980&quot;, &quot;1981&quot;, &quot;1982&quot;, &quot;1983&quot;, &quot;1984&quot;, &quot;1985&quot;, &quot;1986&quot;, &quot;1987&quot;, &quot;1988&quot;, &quot;1989&quot;,\n            &quot;1990&quot;, &quot;1991&quot;, &quot;1992&quot;, &quot;1993&quot;, &quot;1994&quot;, &quot;1995&quot;, &quot;1996&quot;, &quot;1997&quot;, &quot;1998&quot;, &quot;1999&quot;,\n            &quot;2000&quot;, &quot;2001&quot;, &quot;2002&quot;, &quot;2003&quot;, &quot;2004&quot;, &quot;2005&quot;, &quot;2006&quot;, &quot;2007&quot;, &quot;2008&quot;, &quot;2009&quot;\n    };\n    JComboBox&lt;String&gt; years = new JComboBox&lt;&gt;(year);\n    JButton regButton, cancelButton;\n\n    public RegistrationForm(){\n        JFrame regInput = new JFrame();\n        regInput.setTitle(&quot;Registration Form&quot;);\n        regInput.setLocation(200,10);\n\n        titleL = new JLabel(&quot;Please enter your name&quot;);\n        titleL.setSize(200,25);\n        titleL.setLocation(80, 30);\n        \n        title.setSize(85,25);\n        title.setLocation(110, 50);\n        title.setSelectedIndex(0);\n\n        firstNameT = new JTextField(&quot;First Name&quot;);\n        firstNameT.setSize(200, 30);\n        firstNameT.setLocation(200, 50);\n\n        lastNameT= new JTextField(&quot;Last Name&quot;);\n        lastNameT.setSize(200, 30);\n        lastNameT.setLocation(400, 50);\n        \n        companyL= new JLabel(&quot;Please write below your organisation&quot;);\n        companyL.setSize(500, 30);\n        companyL.setLocation(90, 80);\n        \n        areaCompany = new JTextField(&quot;if Company&quot;);\n        areaCompany.setSize(400, 30);\n        areaCompany.setLocation(90, 110);\n        \n        areaCommunity= new JTextField(&quot;If Community&quot;);\n        areaCommunity.setSize(400,30);\n        areaCommunity.setLocation(90, 140);\n\n        address1A= new JTextField(&quot;First line of address&quot;);\n        address1A.setSize(300, 30);\n        address1A.setLocation(90, 180);\n\n        address2A = new JTextField(&quot;Second line of address&quot;);\n        address2A.setSize(350, 30);\n        address2A.setLocation(90, 220);\n\n        cityA = new JTextField(&quot;City&quot;);\n        cityA.setSize(250, 30);\n        cityA.setLocation(90,250 );\n\n        postCodeA = new JTextField(&quot;PostCode&quot;);\n        postCodeA.setSize(250, 30);\n        postCodeA.setLocation(350, 250);\n        emailA= new JTextField(&quot;Email address&quot;);\n        emailA.setSize(250, 30);\n        emailA.setLocation(90, 300);\n        passwordT = new JTextField(&quot;please enter your passowrd&quot;);\n        passwordT.setSize(250, 30);\n        passwordT.setLocation(400, 300);\n        phoneA= new JTextField(&quot;Phone number&quot;);\n        phoneA.setSize(200, 30);\n        phoneA.setLocation(90, 340);\n        dob = new JLabel(&quot;D.O.B.&quot;);\n        dob.setFont(new Font(&quot;Ariel&quot;,Font.PLAIN,15));\n        dob.setSize(100, 30);\n        dob.setLocation(100, 390);\n\n        dates.setSize(100, 20);\n        dates.setLocation(180, 390);\n        dates.setSelectedIndex(0);\n\n        months.setSize(100, 20);\n        months.setLocation(250, 390);\n        months.setSelectedIndex(1);\n\n        years.setSize(100, 20);\n        years.setLocation(350, 390);\n        years.setSelectedIndex(30);\n        regButton = new JButton(&quot;Register&quot;);\n        regButton.setText(&quot;Register&quot;);\n        //regButton.setBounds(100, 300, 120, 150);\n        //regButton.setBounds(0, 0, 600, 400);\n        regButton.setSize(300, 40);\n        regButton.setFont((new Font(&quot;Tahoma&quot;, Font.BOLD,20)));\n        regButton.setLocation(200, 450);\n        cancelButton = new JButton(&quot;Cancel&quot;);\n        cancelButton.setSize(300, 40);\n        cancelButton.setFont((new Font(&quot;Tahoma&quot;, Font.BOLD,20)));\n        cancelButton.setLocation(525,450);\n        regInput.getContentPane();\n        regInput.add(titleL);\n        regInput.add(title);\n        regInput.add(firstNameT);\n        regInput.add(lastNameT);\n        regInput.add(areaCommunity);\n        regInput.add(areaCompany);\n        regInput.add(companyL);\n        regInput.add(address1A);\n        regInput.add(address2A);\n        regInput.add(cityA);\n        regInput.add(postCodeA);\n        regInput.add(phoneA);\n        regInput.add(emailA);\n        regInput.add(passwordT);\n        regInput.add(dob);\n        regInput.add(dates);\n        regInput.add(months);\n        regInput.add(years);\n        regInput.add(regButton);\n        regInput.add(cancelButton);\n        regInput.setBounds(300, 90, 900, 600);\n        regInput.setLayout(null);\n        regInput.setResizable(false);\n        regInput.setVisible(true);\n        \n\n    }\n\n\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n\n        new RegistrationForm();\n\n    }\n\n    @Override\n    public void actionPerformed(ActionEvent e) {\n        // TODO Auto-generated method stub\n        if (e.getSource()==registerButton) {\n            //regInput.setVisible(true);\n            String personal_title = (String) title.getSelectedItem();\n            String personal_first_name = firstNameT.getSelectedText();\n            String personal_last_name = lastNameT.getSelectedText();\n            String firstLAdd = address1A.getSelectedText();\n            String secondLAdd= address2A.getSelectedText();\n            String city = cityA.getSelectedText();\n            String postcode = postCodeA.getSelectedText();\n            String application_Company = areaCompany.getSelectedText(); \n            String application_Community = areaCommunity.getSelectedText();\n            String phone = phoneA.getSelectedText(); \n            String date= (String) dates.getSelectedItem();\n            String month = (String) months.getSelectedItem();\n            String year = (String) years.getSelectedItem(); \n            String email = emailA.getSelectedText();\n            String password = passwordT.getSelectedText(); \n            //connect(); I tried this\n            \n\n        }else if(e.getSource()==loginButton) {\n            System.out.println(&quot;Login&quot;);\n            }\n        }\n        \n\n    }\n</code></pre>\n"},{"tags":["java","amazon-web-services","aws-sdk","amazon-ses","aws-java-sdk"],"comments":[{"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"score":0,"creation_date":1658363983,"post_id":73059306,"comment_id":129035750,"body_markdown":"I will test this method and report back. In my original answer (that i removed) - i showed listEmailIdentities.","body":"I will test this method and report back. In my original answer (that i removed) - i showed listEmailIdentities."},{"owner":{"account_id":4836407,"reputation":684,"user_id":3902947,"accept_rate":92,"display_name":"After_Sunset"},"score":0,"creation_date":1658364267,"post_id":73059306,"comment_id":129035776,"body_markdown":"Sounds good, thank you much appreciated. FYI, I did add in .credentialsProvider(ProfileCredentialsProvider.create()) and setup env variables per the java guide still got the same error.","body":"Sounds good, thank you much appreciated. FYI, I did add in .credentialsProvider(ProfileCredentialsProvider.create()) and setup env variables per the java guide still got the same error."},{"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"score":0,"creation_date":1658364789,"post_id":73059306,"comment_id":129035837,"body_markdown":"I will see if i can reproduce. I will let you know tomorrow. I will code this method 1st thing in the morning.","body":"I will see if i can reproduce. I will let you know tomorrow. I will code this method 1st thing in the morning."},{"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"score":0,"creation_date":1658366571,"post_id":73059306,"comment_id":129036108,"body_markdown":"See my new response.","body":"See my new response."},{"owner":{"account_id":4836407,"reputation":684,"user_id":3902947,"accept_rate":92,"display_name":"After_Sunset"},"score":1,"creation_date":1658662193,"post_id":73059306,"comment_id":129101991,"body_markdown":"I have created an issue ticket here https://github.com/aws/aws-sdk-java/issues/2812","body":"I have created an issue ticket here <a href=\"https://github.com/aws/aws-sdk-java/issues/2812\" rel=\"nofollow noreferrer\">github.com/aws/aws-sdk-java/issues/2812</a>"}],"answers":[{"tags":[],"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658366556,"creation_date":1658363090,"answer_id":73059423,"question_id":73059306,"body_markdown":"I was able to reproduce your issue. I created a list and added a contact. Both worked. However, when i executed **listContacts**, I got this error: \r\n\r\n[![enter image description here][1]][1]\r\n\r\nThis looks like a bug. To address this, open a Github issue on the SDK Java Github here: \r\n\r\nhttps://github.com/aws/aws-sdk-java\r\n\r\n  [1]: https://i.stack.imgur.com/9bPlv.png","title":"How to fix AWS 403 error &quot;Check your AWS Secret Access Key and signing method&quot; when calling SES listcontacts","body":"<p>I was able to reproduce your issue. I created a list and added a contact. Both worked. However, when i executed <strong>listContacts</strong>, I got this error:</p>\n<p><a href=\"https://i.stack.imgur.com/9bPlv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9bPlv.png\" alt=\"enter image description here\" /></a></p>\n<p>This looks like a bug. To address this, open a Github issue on the SDK Java Github here:</p>\n<p><a href=\"https://github.com/aws/aws-sdk-java\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-sdk-java</a></p>\n"},{"tags":[],"owner":{"account_id":4836407,"reputation":684,"user_id":3902947,"accept_rate":92,"display_name":"After_Sunset"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659549825,"creation_date":1659549825,"answer_id":73225887,"question_id":73059306,"body_markdown":"This is confirmed as a bug in the AWS SDK. To get around this you can use the async client like so\r\n\r\n     SesV2AsyncClient client = SesV2AsyncClient.builder()\r\n                        .region(Region.US_EAST_1)\r\n                        .build())\r\n            TopicFilter topicFilter = TopicFilter.builder().topicName(TOPIC_SITE_UPDATES).useDefaultIfPreferenceUnavailable(true).build();\r\n            ListContactsFilter listContactsFilter = ListContactsFilter.builder().topicFilter(topicFilter).filteredStatus(SubscriptionStatus.OPT_IN).build();\r\n            ListContactsRequest listContactsRequest = ListContactsRequest.builder()\r\n                    .contactListName(CONTACT_LIST).filter(listContactsFilter).build();\r\n\r\n            CompletableFuture&lt;ListContactsResponse&gt; listContactsResponseCompletableFuture = client.listContacts(listContactsRequest);\r\n            ListContactsResponse listContactsResponse = listContactsResponseCompletableFuture.get();","title":"How to fix AWS 403 error &quot;Check your AWS Secret Access Key and signing method&quot; when calling SES listcontacts","body":"<p>This is confirmed as a bug in the AWS SDK. To get around this you can use the async client like so</p>\n<pre><code> SesV2AsyncClient client = SesV2AsyncClient.builder()\n                    .region(Region.US_EAST_1)\n                    .build())\n        TopicFilter topicFilter = TopicFilter.builder().topicName(TOPIC_SITE_UPDATES).useDefaultIfPreferenceUnavailable(true).build();\n        ListContactsFilter listContactsFilter = ListContactsFilter.builder().topicFilter(topicFilter).filteredStatus(SubscriptionStatus.OPT_IN).build();\n        ListContactsRequest listContactsRequest = ListContactsRequest.builder()\n                .contactListName(CONTACT_LIST).filter(listContactsFilter).build();\n\n        CompletableFuture&lt;ListContactsResponse&gt; listContactsResponseCompletableFuture = client.listContacts(listContactsRequest);\n        ListContactsResponse listContactsResponse = listContactsResponseCompletableFuture.get();\n</code></pre>\n"}],"owner":{"account_id":4836407,"reputation":684,"user_id":3902947,"accept_rate":92,"display_name":"After_Sunset"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1214,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1659549825,"creation_date":1658361505,"question_id":73059306,"body_markdown":"I have been stuck for about the past 6 hours at this point I&#39;m thinking the only reasonable explanations are that this is a AWS SDK bug or the error message is wrong. \r\n\r\nI am using SESv2 class from the AWS SDK in a JAVA SpringBoot app and attempting to manage various details of my SES (Simple Email Service) account.\r\n\r\n    import software.amazon.awssdk.regions.Region;\r\n    import software.amazon.awssdk.services.sesv2.SesV2Client;\r\n    import software.amazon.awssdk.services.sesv2.model.*;\r\n\r\nI have created an IAM user, created security credentials, set them up using multiple different methods as described here [guid to credentials environment][1] I&#39;ve given full access to SES to this IAM role user. I then wrote some code and I was able to do all of the following, \r\n\r\n - Create a contact list\r\n - Delete a contact list\r\n - Create contact\r\n - Create a Topic in a contact list\r\n - Send an email\r\n\r\nHowever, for some unknown reason when I go to test a function I wrote to get a list of contacts so I can test sending an email to multiple contacts I get the following 403 error message,\r\n&gt; The request signature we calculated does not match the signature you\r\n&gt; provided. Check your AWS Secret Access Key and signing method. Consult\r\n&gt; the service documentation for details.\r\n\r\nI&#39;ve verified the credentials are correct. I have created a new set of credentials and made the old set inactive. No dice, all the functions listed above still work however the `listContacts` in the `SesV2Client` class still fails with the same error. As you can see below I even bypassed the env variables  and just hardcoded the key and secret to pull out all the stops, still fails. In the function that fails, I&#39;ve gone over and over the values im passing in they are valid and exist 100% because as I said I can make the other calls in the list above to verify the topics and contact list exists.\r\n\r\n    private List&lt;Contact&gt; listContactsForSiteUpdatesMailingList() {\r\n    try (SesV2Client client = SesV2Client.builder()\r\n                .region(Region.US_EAST_1)\r\n                .credentialsProvider(StaticCredentialsProvider.create(awsCreds))\r\n                .build()){\r\n\r\n            TopicFilter topicFilter = TopicFilter.builder().topicName(TOPIC_SITE_UPDATES).useDefaultIfPreferenceUnavailable(true).build();\r\n            ListContactsFilter listContactsFilter = ListContactsFilter.builder().topicFilter(topicFilter).filteredStatus(SubscriptionStatus.OPT_IN).build();\r\n            ListContactsRequest listContactsRequest = ListContactsRequest.builder()\r\n                    .contactListName(CONTACT_LIST).filter(listContactsFilter).build();\r\n\r\n            ListContactsResponse listContactsResponse = client.listContacts(listContactsRequest);\r\n\r\n            return listContactsResponse.contacts();\r\n\r\n        } catch (Exception ex) {\r\n            System.out.println(&quot;The email was not sent. Error message: &quot;\r\n                    + ex.getMessage());\r\n            return null;\r\n        }\r\n    }\r\n\r\nWhats going on here and how can I get to the bottom of this error?\r\n\r\nEDIT:\r\nLooking at AWS Console Users&gt;Access Management and then looking at the user a created I can even verify that there was &quot;programmatic access&quot; [![enter image description here][2]][2]\r\n\r\nAn example of accessing a ContactList with no issues[![enter image description here][3]][3]\r\n\r\nEDIT 2: My SES account is currently sandboxed. I just wanted to mention the question is this possibly happening because of that? Grasping at straws here.\r\n\r\n  [1]: https://docs.aws.amazon.com/sdk-for-php/v3/developer-guide/guide_credentials_environment.html\r\n  [2]: https://i.stack.imgur.com/UJcKs.png\r\n  [3]: https://i.stack.imgur.com/UFJAR.png","title":"How to fix AWS 403 error &quot;Check your AWS Secret Access Key and signing method&quot; when calling SES listcontacts","body":"<p>I have been stuck for about the past 6 hours at this point I'm thinking the only reasonable explanations are that this is a AWS SDK bug or the error message is wrong.</p>\n<p>I am using SESv2 class from the AWS SDK in a JAVA SpringBoot app and attempting to manage various details of my SES (Simple Email Service) account.</p>\n<pre><code>import software.amazon.awssdk.regions.Region;\nimport software.amazon.awssdk.services.sesv2.SesV2Client;\nimport software.amazon.awssdk.services.sesv2.model.*;\n</code></pre>\n<p>I have created an IAM user, created security credentials, set them up using multiple different methods as described here <a href=\"https://docs.aws.amazon.com/sdk-for-php/v3/developer-guide/guide_credentials_environment.html\" rel=\"nofollow noreferrer\">guid to credentials environment</a> I've given full access to SES to this IAM role user. I then wrote some code and I was able to do all of the following,</p>\n<ul>\n<li>Create a contact list</li>\n<li>Delete a contact list</li>\n<li>Create contact</li>\n<li>Create a Topic in a contact list</li>\n<li>Send an email</li>\n</ul>\n<p>However, for some unknown reason when I go to test a function I wrote to get a list of contacts so I can test sending an email to multiple contacts I get the following 403 error message,</p>\n<blockquote>\n<p>The request signature we calculated does not match the signature you\nprovided. Check your AWS Secret Access Key and signing method. Consult\nthe service documentation for details.</p>\n</blockquote>\n<p>I've verified the credentials are correct. I have created a new set of credentials and made the old set inactive. No dice, all the functions listed above still work however the <code>listContacts</code> in the <code>SesV2Client</code> class still fails with the same error. As you can see below I even bypassed the env variables  and just hardcoded the key and secret to pull out all the stops, still fails. In the function that fails, I've gone over and over the values im passing in they are valid and exist 100% because as I said I can make the other calls in the list above to verify the topics and contact list exists.</p>\n<pre><code>private List&lt;Contact&gt; listContactsForSiteUpdatesMailingList() {\ntry (SesV2Client client = SesV2Client.builder()\n            .region(Region.US_EAST_1)\n            .credentialsProvider(StaticCredentialsProvider.create(awsCreds))\n            .build()){\n\n        TopicFilter topicFilter = TopicFilter.builder().topicName(TOPIC_SITE_UPDATES).useDefaultIfPreferenceUnavailable(true).build();\n        ListContactsFilter listContactsFilter = ListContactsFilter.builder().topicFilter(topicFilter).filteredStatus(SubscriptionStatus.OPT_IN).build();\n        ListContactsRequest listContactsRequest = ListContactsRequest.builder()\n                .contactListName(CONTACT_LIST).filter(listContactsFilter).build();\n\n        ListContactsResponse listContactsResponse = client.listContacts(listContactsRequest);\n\n        return listContactsResponse.contacts();\n\n    } catch (Exception ex) {\n        System.out.println(&quot;The email was not sent. Error message: &quot;\n                + ex.getMessage());\n        return null;\n    }\n}\n</code></pre>\n<p>Whats going on here and how can I get to the bottom of this error?</p>\n<p>EDIT:\nLooking at AWS Console Users&gt;Access Management and then looking at the user a created I can even verify that there was &quot;programmatic access&quot; <a href=\"https://i.stack.imgur.com/UJcKs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UJcKs.png\" alt=\"enter image description here\" /></a></p>\n<p>An example of accessing a ContactList with no issues<a href=\"https://i.stack.imgur.com/UFJAR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UFJAR.png\" alt=\"enter image description here\" /></a></p>\n<p>EDIT 2: My SES account is currently sandboxed. I just wanted to mention the question is this possibly happening because of that? Grasping at straws here.</p>\n"},{"tags":["java","spring-boot","spring-integration","spring-integration-dsl","spring-integration-http"],"comments":[{"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1659368136,"post_id":73176437,"comment_id":129272551,"body_markdown":"You don&#39;t show what is your &quot;custom exception handler framework&quot;. Instead you show not related Scatter-Gather configuration. Please, learn how to ask here on Stack Overflow properly: https://stackoverflow.com/help/how-to-ask.","body":"You don&#39;t show what is your &quot;custom exception handler framework&quot;. Instead you show not related Scatter-Gather configuration. Please, learn how to ask here on Stack Overflow properly: <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>."},{"owner":{"account_id":25593085,"reputation":95,"user_id":19369457,"display_name":"Somnath Mukherjee"},"score":0,"creation_date":1659368465,"post_id":73176437,"comment_id":129272685,"body_markdown":"Sorry if I asked stupid question. I showed the configuration because I was seeing that in all other cases my exception handler can handle any exception but inside scatter-gather it&#39;s not able to do that. So I thought there could be some changes that I need to make to the scatter-gather pattern.","body":"Sorry if I asked stupid question. I showed the configuration because I was seeing that in all other cases my exception handler can handle any exception but inside scatter-gather it&#39;s not able to do that. So I thought there could be some changes that I need to make to the scatter-gather pattern."},{"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1659370830,"post_id":73176437,"comment_id":129273499,"body_markdown":"Please, share your error handler anyway and how it is connected to that your scatter-gather configuration to have the whole picture in the question.","body":"Please, share your error handler anyway and how it is connected to that your scatter-gather configuration to have the whole picture in the question."}],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659549106,"creation_date":1659368441,"answer_id":73196266,"question_id":73176437,"body_markdown":"When you do an async hand-off like with your `flow.channel(c -&gt; c.executor(Executors.newCachedThreadPool()))`, you cannot re-throw exceptions from that thread: the control is lost. You can have an `errorChannel` header populated for this flow, so an async `ErrorHandler` on the task executor is going to publish the `ErrorMessage` properly to that channel for some logic. From there you can return so-called *compensation message* for waiting gateway - gatherer in your case. What is very important is to preserve request headers. Otherwise it won&#39;t be able to correlated request with reply.\r\n\r\n\r\n**UPDATE**\r\n\r\nYour understanding of async error handling is a bit not correct.\r\n\r\nThe `ExecutorChannel` wraps a provided `Executor` into an `ErrorHandlingTaskExecutor`, which has the logic like this:\r\n\r\n\tpublic void execute(final Runnable task) {\r\n\t\tthis.executor.execute(() -&gt; {\r\n\t\t\ttry {\r\n\t\t\t\ttask.run();\r\n\t\t\t}\r\n\t\t\tcatch (Throwable t) { //NOSONAR\r\n\t\t\t\tErrorHandlingTaskExecutor.this.errorHandler.handleError(t);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\nSo, as you see that `errorHandler` is called inside the task, where re-throwing an exception from there will just end-user in void, according to your `ThreadPoolExecutor`: \r\n\r\n    protected void afterExecute(Runnable r, Throwable t) { }\r\n\r\nThat&#39;s why we talk about a **compensation** message instead of re-throwing some custom exception. That compensation message, though, could be a new `ErrorMessage`, but it has to preserve headers from request. something like this:\r\n\r\n\t\t@ServiceActivator(inputChannel = &quot;scatterGatherErrorChannel&quot;)\r\n\t\tpublic Message&lt;?&gt; processAsyncScatterError(MessagingException payload) {\r\n\t\t\treturn MessageBuilder.withPayload(payload.getCause())\r\n\t\t\t\t\t.copyHeaders(payload.getFailedMessage().getHeaders())\r\n\t\t\t\t\t.build();\r\n\t\t}\r\n\r\nThis message is going to be returned to the scatter-gather as a reply. Probably you are not interested in this, so you can bypass a reply for scatter-gather and propagate your custom error directly to the origin gateway&#39;s error channel. Something like this:\r\n\r\n\t\t@ServiceActivator(inputChannel = &quot;scatterGatherErrorChannel&quot;)\r\n\t\tpublic Message&lt;?&gt; processAsyncScatterError(MessagingException payload) {\r\n\t\t\tMessageHeaders requestHeaders = payload.getFailedMessage().getHeaders();\r\n\t\t\treturn MessageBuilder.withPayload(payload.getCause())\r\n\t\t\t\t\t.copyHeaders(requestHeaders)\r\n\t\t\t\t\t.setHeader(MessageHeaders.REPLY_CHANNEL, requestHeaders.get(&quot;originalErrorChannel&quot;))\r\n\t\t\t\t\t.build();\r\n\t\t}\r\n\r\nThat `originalErrorChannel` comes really from the request message to the scatter-gather and is waited by the origin gateway.","title":"How to catch exception and throw my own exception inside ExpressionEvaluatingRequestHandlerAdvice and handle it through my own exception handler?","body":"<p>When you do an async hand-off like with your <code>flow.channel(c -&gt; c.executor(Executors.newCachedThreadPool()))</code>, you cannot re-throw exceptions from that thread: the control is lost. You can have an <code>errorChannel</code> header populated for this flow, so an async <code>ErrorHandler</code> on the task executor is going to publish the <code>ErrorMessage</code> properly to that channel for some logic. From there you can return so-called <em>compensation message</em> for waiting gateway - gatherer in your case. What is very important is to preserve request headers. Otherwise it won't be able to correlated request with reply.</p>\n<p><strong>UPDATE</strong></p>\n<p>Your understanding of async error handling is a bit not correct.</p>\n<p>The <code>ExecutorChannel</code> wraps a provided <code>Executor</code> into an <code>ErrorHandlingTaskExecutor</code>, which has the logic like this:</p>\n<pre><code>public void execute(final Runnable task) {\n    this.executor.execute(() -&gt; {\n        try {\n            task.run();\n        }\n        catch (Throwable t) { //NOSONAR\n            ErrorHandlingTaskExecutor.this.errorHandler.handleError(t);\n        }\n    });\n}\n</code></pre>\n<p>So, as you see that <code>errorHandler</code> is called inside the task, where re-throwing an exception from there will just end-user in void, according to your <code>ThreadPoolExecutor</code>:</p>\n<pre><code>protected void afterExecute(Runnable r, Throwable t) { }\n</code></pre>\n<p>That's why we talk about a <strong>compensation</strong> message instead of re-throwing some custom exception. That compensation message, though, could be a new <code>ErrorMessage</code>, but it has to preserve headers from request. something like this:</p>\n<pre><code>    @ServiceActivator(inputChannel = &quot;scatterGatherErrorChannel&quot;)\n    public Message&lt;?&gt; processAsyncScatterError(MessagingException payload) {\n        return MessageBuilder.withPayload(payload.getCause())\n                .copyHeaders(payload.getFailedMessage().getHeaders())\n                .build();\n    }\n</code></pre>\n<p>This message is going to be returned to the scatter-gather as a reply. Probably you are not interested in this, so you can bypass a reply for scatter-gather and propagate your custom error directly to the origin gateway's error channel. Something like this:</p>\n<pre><code>    @ServiceActivator(inputChannel = &quot;scatterGatherErrorChannel&quot;)\n    public Message&lt;?&gt; processAsyncScatterError(MessagingException payload) {\n        MessageHeaders requestHeaders = payload.getFailedMessage().getHeaders();\n        return MessageBuilder.withPayload(payload.getCause())\n                .copyHeaders(requestHeaders)\n                .setHeader(MessageHeaders.REPLY_CHANNEL, requestHeaders.get(&quot;originalErrorChannel&quot;))\n                .build();\n    }\n</code></pre>\n<p>That <code>originalErrorChannel</code> comes really from the request message to the scatter-gather and is waited by the origin gateway.</p>\n"}],"owner":{"account_id":25593085,"reputation":95,"user_id":19369457,"display_name":"Somnath Mukherjee"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":218,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73196266,"answer_count":1,"score":0,"last_activity_date":1659549106,"creation_date":1659191357,"question_id":73176437,"body_markdown":"I&#39;m using Spring integration and scatter gather pattern in my project. Here I&#39;ve applied the Rest Template timeout and also I&#39;m using `ExpressionEvaluatingRequestHandlerAdvice()` to catch timeout exception. But I want to catch that exception in failure flow and want to throw my own custom exception and I have my own exception handler in place to handle that exception so that I can show proper error message to the user. But here the exception is being thrown but my custom exception handler is not able to handle that exception so user is not getting my custom msg back.\r\n\r\n//configuration\r\n\r\n     @Bean\r\n      public IntegrationFlow mainFlow() {\r\n        return flow -&gt;\r\n            flow.split()\r\n                .channel(c -&gt; c.executor(Executors.newCachedThreadPool()))\r\n                .scatterGather(\r\n                    scatterer -&gt;\r\n                        scatterer\r\n                            .applySequence(true)\r\n                            .recipientFlow(flow1())\r\n                            .recipientFlow(flow2()),\r\n                    gatherer -&gt;\r\n                        gatherer\r\n                            .releaseLockBeforeSend(true)\r\n                            .releaseStrategy(group -&gt; group.size() == 1))\r\n                .aggregate()\r\n                .to(anotherFlow());\r\n      }\r\n    \r\n    @Bean\r\n      public IntegrationFlow flow2() {\r\n        return flow -&gt; {\r\n            flow.channel(c -&gt; c.executor(Executors.newCachedThreadPool()))\r\n                .handle(\r\n                    Http.outboundGateway(\r\n                            &quot;http://localhost:4444/test&quot;, dummyService.restTemplate())\r\n                        .httpMethod(HttpMethod.POST)\r\n                        .expectedResponseType(String.class),\r\n                    c -&gt; c.advice(expressionAdvice()));\r\n        };\r\n      }\r\n    \r\n     @Bean\r\n      public Advice expressionAdvice() {\r\n        ExpressionEvaluatingRequestHandlerAdvice advice =\r\n            new ExpressionEvaluatingRequestHandlerAdvice();\r\n        advice.setSuccessChannelName(&quot;success.input&quot;);\r\n        advice.setOnSuccessExpressionString(&quot;payload + &#39; was successful&#39;&quot;);\r\n        advice.setFailureChannelName(&quot;failure.input&quot;);\r\n        advice.setOnFailureExpressionString(&quot;&#39;Failed &#39; + #exception.cause.message&quot;);\r\n        advice.setReturnFailureExpressionResult(true);\r\n        advice.setTrapException(true);\r\n        return advice;\r\n      }\r\n    \r\n      @Bean\r\n      public IntegrationFlow success() {\r\n        return f -&gt; f.handle(System.out::println);\r\n      }\r\n    \r\n      @Bean\r\n      public IntegrationFlow failure() {\r\n        return f -&gt;\r\n            f.handle(\r\n                    (p, h) -&gt; {\r\n                      if (p.toString().contains(&quot;Read timed out&quot;))\r\n                        throw new MyCustomException(ErrorCode.TIMEOUT_ERROR.getErrorData());\r\n                      else throw new MyCustomException(ErrorCode.SERVICE_ERROR.getErrorData());\r\n                    });\r\n      }\r\n\r\n//DummyService class\r\n\r\n    @Configuration\r\n    public class DummyService {\r\n    \r\n      private final int TIMEOUT = (int) TimeUnit.SECONDS.toMillis(6);\r\n    \r\n      @Bean\r\n      public RestTemplate restTemplate()\r\n           {\r\n    \r\n        HttpComponentsClientHttpRequestFactory requestFactory =\r\n            new HttpComponentsClientHttpRequestFactory();\r\n    \r\n        requestFactory.setHttpClient(httpClient);\r\n        requestFactory.setConnectTimeout(TIMEOUT);\r\n        requestFactory.setReadTimeout(TIMEOUT);\r\n        RestTemplate restTemplate = new RestTemplate(requestFactory);\r\n        return restTemplate;\r\n      }\r\n    }\r\n\r\nHere I&#39;m trying to throw new exception in failure() flow but exception is being thrown properly but my custom exception handler framework is not able to catch that exception. In all other cases it&#39;s able to catch but inside the spring integration configuration class it&#39;s not working.\r\n","title":"How to catch exception and throw my own exception inside ExpressionEvaluatingRequestHandlerAdvice and handle it through my own exception handler?","body":"<p>I'm using Spring integration and scatter gather pattern in my project. Here I've applied the Rest Template timeout and also I'm using <code>ExpressionEvaluatingRequestHandlerAdvice()</code> to catch timeout exception. But I want to catch that exception in failure flow and want to throw my own custom exception and I have my own exception handler in place to handle that exception so that I can show proper error message to the user. But here the exception is being thrown but my custom exception handler is not able to handle that exception so user is not getting my custom msg back.</p>\n<p>//configuration</p>\n<pre><code> @Bean\n  public IntegrationFlow mainFlow() {\n    return flow -&gt;\n        flow.split()\n            .channel(c -&gt; c.executor(Executors.newCachedThreadPool()))\n            .scatterGather(\n                scatterer -&gt;\n                    scatterer\n                        .applySequence(true)\n                        .recipientFlow(flow1())\n                        .recipientFlow(flow2()),\n                gatherer -&gt;\n                    gatherer\n                        .releaseLockBeforeSend(true)\n                        .releaseStrategy(group -&gt; group.size() == 1))\n            .aggregate()\n            .to(anotherFlow());\n  }\n\n@Bean\n  public IntegrationFlow flow2() {\n    return flow -&gt; {\n        flow.channel(c -&gt; c.executor(Executors.newCachedThreadPool()))\n            .handle(\n                Http.outboundGateway(\n                        &quot;http://localhost:4444/test&quot;, dummyService.restTemplate())\n                    .httpMethod(HttpMethod.POST)\n                    .expectedResponseType(String.class),\n                c -&gt; c.advice(expressionAdvice()));\n    };\n  }\n\n @Bean\n  public Advice expressionAdvice() {\n    ExpressionEvaluatingRequestHandlerAdvice advice =\n        new ExpressionEvaluatingRequestHandlerAdvice();\n    advice.setSuccessChannelName(&quot;success.input&quot;);\n    advice.setOnSuccessExpressionString(&quot;payload + ' was successful'&quot;);\n    advice.setFailureChannelName(&quot;failure.input&quot;);\n    advice.setOnFailureExpressionString(&quot;'Failed ' + #exception.cause.message&quot;);\n    advice.setReturnFailureExpressionResult(true);\n    advice.setTrapException(true);\n    return advice;\n  }\n\n  @Bean\n  public IntegrationFlow success() {\n    return f -&gt; f.handle(System.out::println);\n  }\n\n  @Bean\n  public IntegrationFlow failure() {\n    return f -&gt;\n        f.handle(\n                (p, h) -&gt; {\n                  if (p.toString().contains(&quot;Read timed out&quot;))\n                    throw new MyCustomException(ErrorCode.TIMEOUT_ERROR.getErrorData());\n                  else throw new MyCustomException(ErrorCode.SERVICE_ERROR.getErrorData());\n                });\n  }\n</code></pre>\n<p>//DummyService class</p>\n<pre><code>@Configuration\npublic class DummyService {\n\n  private final int TIMEOUT = (int) TimeUnit.SECONDS.toMillis(6);\n\n  @Bean\n  public RestTemplate restTemplate()\n       {\n\n    HttpComponentsClientHttpRequestFactory requestFactory =\n        new HttpComponentsClientHttpRequestFactory();\n\n    requestFactory.setHttpClient(httpClient);\n    requestFactory.setConnectTimeout(TIMEOUT);\n    requestFactory.setReadTimeout(TIMEOUT);\n    RestTemplate restTemplate = new RestTemplate(requestFactory);\n    return restTemplate;\n  }\n}\n</code></pre>\n<p>Here I'm trying to throw new exception in failure() flow but exception is being thrown properly but my custom exception handler framework is not able to catch that exception. In all other cases it's able to catch but inside the spring integration configuration class it's not working.</p>\n"},{"tags":["java","protocol-buffers","grpc-java"],"answers":[{"tags":[],"owner":{"account_id":5967476,"reputation":24635,"user_id":4690866,"display_name":"Eric Anderson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659548956,"creation_date":1659548956,"answer_id":73225726,"question_id":73123481,"body_markdown":"`Value` is a JSON-like data structure. It cannot handle arbitrary Java objects.","title":"How to set a Java Object in Google Protobuf Value","body":"<p><code>Value</code> is a JSON-like data structure. It cannot handle arbitrary Java objects.</p>\n"}],"owner":{"account_id":18916298,"reputation":11,"user_id":13801290,"display_name":"AJAY SINGH"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1332,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1659548956,"creation_date":1658838908,"question_id":73123481,"body_markdown":"I am writing a client that consumes a service(I don&#39;t own the service) via GRPC. At run time I get n number of variables/Objects and I don&#39;t know the type of these variables/Objects in advance. I have to send all these values to the GRPC service. I see we can set Strings/Boolean/Double etc in Google protobuf value. Is there a way I can set a custom object to Value. Here is the sample code\r\n\r\n```\r\nValue v = null;\r\nStruct s = null;\r\nMap&lt;String, Value&gt; valueMap = new HashMap&lt;String, Value&gt;();\r\nfor (UpdateSession_Object varList : myRequest.getUpdate_session_list()) {\r\n\t\t\t\tif (varList.getSession_var_value() instanceof String) {\r\n\t                v = Value.newBuilder().setStringValue(varList.getSession_var_value().toString()).build();\r\n                    valueMap.put(varList.getSession_var_name(), v);\r\n\t\t\t\t} else if (varList.getSession_var_value() instanceof Double) {\r\n\t\t\t\t\tv = Value.newBuilder().setNumberValue((Double) varList.getSession_var_value()).build();\r\n\t\t\t\t\tvalueMap.put(varList.getSession_var_name(), v);\r\n\t\t\t\t} else if (varList.getSession_var_value() instanceof Object) {\r\n\t\t\t\t\t**// How do i set the object to Value**\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\ts = Struct.newBuilder().putAllFields(valueMap).build();\r\n ```\r\nIs there a way I can set the Custom object to Value so that I can send all the incoming variables correctly to GRPC call.\r\n\r\n","title":"How to set a Java Object in Google Protobuf Value","body":"<p>I am writing a client that consumes a service(I don't own the service) via GRPC. At run time I get n number of variables/Objects and I don't know the type of these variables/Objects in advance. I have to send all these values to the GRPC service. I see we can set Strings/Boolean/Double etc in Google protobuf value. Is there a way I can set a custom object to Value. Here is the sample code</p>\n<pre><code>Value v = null;\nStruct s = null;\nMap&lt;String, Value&gt; valueMap = new HashMap&lt;String, Value&gt;();\nfor (UpdateSession_Object varList : myRequest.getUpdate_session_list()) {\n                if (varList.getSession_var_value() instanceof String) {\n                    v = Value.newBuilder().setStringValue(varList.getSession_var_value().toString()).build();\n                    valueMap.put(varList.getSession_var_name(), v);\n                } else if (varList.getSession_var_value() instanceof Double) {\n                    v = Value.newBuilder().setNumberValue((Double) varList.getSession_var_value()).build();\n                    valueMap.put(varList.getSession_var_name(), v);\n                } else if (varList.getSession_var_value() instanceof Object) {\n                    **// How do i set the object to Value**\n                }\n\n            }\n            s = Struct.newBuilder().putAllFields(valueMap).build();\n</code></pre>\n<p>Is there a way I can set the Custom object to Value so that I can send all the incoming variables correctly to GRPC call.</p>\n"},{"tags":["javascript","java","android","webview","peerjs"],"owner":{"account_id":23683815,"reputation":21,"user_id":17709040,"display_name":"FOUR BITS"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":409,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1659548780,"creation_date":1654420537,"question_id":72506097,"body_markdown":"I&#39;ve been trying to make a simple WebRTC app using Firebase Database and PeerJs that can switch cameras. I found one [tutorial][1] and it works properly, but I want to switch the camera between front and back which is not included in the tutorial.\r\n\r\nAndroidManifest.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest\r\n    ...\r\n\r\n    &lt;uses-feature android:name=&quot;android.hardware.camera.any&quot;/&gt;\r\n    &lt;uses-feature android:name=&quot;android.hardware.camera&quot;/&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.MODIFY_AUDIO_SETTINGS&quot;/&gt;\r\n\r\n    ...\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\n\r\nCallActivity.java\r\n```\r\nimport static android.view.View.GONE;\r\n\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.webkit.PermissionRequest;\r\nimport android.webkit.WebChromeClient;\r\nimport android.webkit.WebView;\r\nimport android.webkit.WebViewClient;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\nimport java.util.UUID;\r\n\r\npublic class CallActivity extends AppCompatActivity {\r\n    private static final String TAG = CallActivity.class.getSimpleName();\r\n\r\n    private final String CAMERA_FRONT = &quot;user&quot;;\r\n    private final String CAMERA_BACK = &quot;environment&quot;; // Tried to use it on navigator.mediaDevices.getUserMedia({video: {facingMode: camera}}) but it didn&#39;t work.\r\n\r\n    private RelativeLayout layoutIncoming, layoutCall, layoutCallControl;\r\n    private Button buttonReject, buttonAccept, buttonCall, buttonAudio, buttonVideo, buttonCamera;\r\n    private EditText editTextCallName;\r\n    private TextView textViewIncoming;\r\n\r\n    private WebView webView;\r\n\r\n    private String name;\r\n    private String callerName;\r\n    private boolean isPeerConnected = false;\r\n\r\n    private DatabaseReference usersRef = FirebaseDatabase.getInstance(&quot;link_to_firebase_database&quot;).getReference(&quot;users&quot;);\r\n\r\n    private boolean videoEnabled = true;\r\n    private boolean audioEnabled = true;\r\n    private String camera = CAMERA_FRONT;\r\n\r\n    private String uniqueID;\r\n\r\n    //== Overridden ==//\r\n\r\n    @Override\r\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_call);\r\n\r\n        layoutIncoming = findViewById(R.id.activity_call_layoutIncoming);\r\n        layoutCall = findViewById(R.id.activity_call_layoutCall);\r\n        layoutCallControl = findViewById(R.id.activity_call_layoutCallControl);\r\n\r\n        buttonAccept = findViewById(R.id.activity_call_buttonAccept);\r\n        buttonReject = findViewById(R.id.activity_call_buttonReject);\r\n        buttonCall = findViewById(R.id.activity_call_buttonCall);\r\n        buttonVideo = findViewById(R.id.activity_call_buttonVideo);\r\n        buttonAudio = findViewById(R.id.activity_call_buttonAudio);\r\n        buttonCamera = findViewById(R.id.activity_call_buttonCamera);\r\n\r\n        editTextCallName = findViewById(R.id.activity_call_editTextCallName);\r\n        textViewIncoming = findViewById(R.id.activity_call_textViewIncoming);\r\n\r\n        webView = findViewById(R.id.activity_call_webView);\r\n\r\n        if (getIntent().hasExtra(&quot;name&quot;)) {\r\n            name = getIntent().getStringExtra(&quot;name&quot;);\r\n        }\r\n\r\n        buttonCall.setOnClickListener(view -&gt; {\r\n            callerName = editTextCallName.getText().toString().trim();\r\n            if (!callerName.isEmpty()) sendCallRequest();\r\n        });\r\n\r\n        buttonVideo.setOnClickListener(view -&gt; {\r\n            videoEnabled = !videoEnabled;\r\n            callJsFunction(&quot;javascript:toggleVideo(\\&quot;&quot; + videoEnabled + &quot;\\&quot;)&quot;);\r\n\r\n            if (videoEnabled)\r\n                buttonVideo.setText(&quot;Video Off&quot;);\r\n            else\r\n                buttonVideo.setText(&quot;Video On&quot;);\r\n        });\r\n\r\n        buttonAudio.setOnClickListener(view -&gt; {\r\n            audioEnabled = !audioEnabled;\r\n            callJsFunction(&quot;javascript:toggleAudio(\\&quot;&quot; + audioEnabled + &quot;\\&quot;)&quot;);\r\n\r\n            if (audioEnabled)\r\n                buttonAudio.setText(&quot;Mute&quot;);\r\n            else\r\n                buttonAudio.setText(&quot;Unmute&quot;);\r\n        });\r\n\r\n        buttonCamera.setOnClickListener(view -&gt; {\r\n            if (camera.equals(CAMERA_FRONT)) camera = CAMERA_BACK;\r\n            else camera = CAMERA_FRONT;\r\n\r\n            switchCamera();\r\n        });\r\n\r\n        setupWebView();\r\n    }\r\n\r\n    //== Public ==//\r\n\r\n    public void onPeerConnected() {\r\n        isPeerConnected = true;\r\n    }\r\n\r\n    //== Private ==//\r\n\r\n    private void setupWebView() {\r\n        WebChromeClient client = new WebChromeClient() {\r\n            @Override\r\n            public void onPermissionRequest(PermissionRequest request) {\r\n                runOnUiThread(() -&gt; request.grant(request.getResources()));\r\n            }\r\n        };\r\n\r\n        webView.setWebChromeClient(client);\r\n\r\n        webView.getSettings().setJavaScriptEnabled(true);\r\n        webView.getSettings().setMediaPlaybackRequiresUserGesture(false);\r\n        webView.addJavascriptInterface(new JsInterface(this), &quot;Android&quot;);\r\n\r\n        loadVideoCall();\r\n    }\r\n\r\n    private void loadVideoCall() {\r\n        String filePath = &quot;file:///android_asset/call.html&quot;;\r\n        webView.loadUrl(filePath);\r\n\r\n        WebViewClient client = new WebViewClient() {\r\n            @Override\r\n            public void onPageFinished(WebView view, String url) {\r\n                initializePeer();\r\n            }\r\n        };\r\n\r\n        webView.setWebViewClient(client);\r\n    }\r\n\r\n    private void initializePeer() {\r\n        uniqueID = getUniqueID();\r\n\r\n        callJsFunction(&quot;javascript:init(\\&quot;&quot; + uniqueID + &quot;\\&quot;)&quot;);\r\n\r\n        usersRef.child(name).child(&quot;incoming&quot;).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                Log.d(TAG, &quot;Received incoming call!!!&quot;);\r\n                onCallRequest(snapshot.getValue(String.class));\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void sendCallRequest() {\r\n        if (!isPeerConnected) {\r\n            Toast.makeText(this, &quot;You&#39;re not connected to internet. Please try again.&quot;, Toast.LENGTH_SHORT).show();\r\n            return;\r\n        }\r\n\r\n        usersRef.child(callerName).child(&quot;incoming&quot;).setValue(name);\r\n        usersRef.child(callerName).child(&quot;isAvailable&quot;).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                boolean isAvailable = snapshot.getValue() != null? snapshot.getValue(boolean.class): false;\r\n\r\n                if (isAvailable) {\r\n                    listenForConnectionID();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void onCallRequest(String caller) {\r\n        if (caller == null) return;\r\n\r\n        String incomingMessage = caller + &quot; is calling...&quot;;\r\n        textViewIncoming.setText(incomingMessage);\r\n\r\n        buttonAccept.setOnClickListener(view -&gt; {\r\n            usersRef.child(name).child(&quot;connectionID&quot;).setValue(uniqueID);\r\n            usersRef.child(name).child(&quot;isAvailable&quot;).setValue(true);\r\n\r\n            layoutIncoming.setVisibility(GONE);\r\n            switchToCallControls();\r\n        });\r\n\r\n        buttonReject.setOnClickListener(view -&gt; {\r\n            usersRef.child(name).child(&quot;incoming&quot;).setValue(null);\r\n            layoutIncoming.setVisibility(GONE);\r\n        });\r\n\r\n        layoutIncoming.setVisibility(View.VISIBLE);\r\n    }\r\n\r\n    private void listenForConnectionID() {\r\n        usersRef.child(callerName).child(&quot;connectionID&quot;).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                if (snapshot.getValue() == null) return;\r\n\r\n                switchToCallControls();\r\n                callJsFunction(&quot;javascript:startCall(\\&quot;&quot; + snapshot.getValue(String.class) + &quot;\\&quot;)&quot;);\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void switchToCallControls() {\r\n        layoutCall.setVisibility(GONE);\r\n        layoutCallControl.setVisibility(View.VISIBLE);\r\n    }\r\n\r\n    private void switchCamera() {\r\n        Log.d(TAG, &quot;switchCamera: &quot; + camera);\r\n\r\n        callJsFunction(&quot;javascript:switchCamera(\\&quot;&quot; + camera + &quot;\\&quot;)&quot;);\r\n    }\r\n\r\n    private void callJsFunction(String functionString) {\r\n        webView.post(() -&gt; webView.evaluateJavascript(functionString, value -&gt; Log.d(TAG, value)));\r\n    }\r\n\r\n    private String getUniqueID() {\r\n        return UUID.randomUUID().toString();\r\n    }\r\n}\r\n```\r\n\r\ncall.html\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n\r\n&lt;html&gt;\r\n\r\n    &lt;head&gt;\r\n\r\n        &lt;link href=&quot;./style.css&quot; rel=&quot;stylesheet&quot;/&gt;\r\n\r\n    &lt;/head&gt;\r\n\r\n    &lt;body&gt;\r\n\r\n        &lt;script src=&quot;./peerjs.js&quot;&gt;&lt;/script&gt;\r\n\r\n        &lt;video class=&quot;secondaryVideo&quot; autoplay id=&quot;remoteVideo&quot;&gt;&lt;/video&gt;\r\n        &lt;video class=&quot;primaryVideo&quot; autoplay muted id=&quot;localVideo&quot;&gt;&lt;/video&gt;\r\n\r\n        &lt;script src=&quot;./call.js&quot;&gt;&lt;/script&gt;\r\n\r\n    &lt;/body&gt;\r\n\r\n&lt;/html&gt;\r\n```\r\n\r\ncall.js\r\n```\r\nlet localVideo = document.getElementById(&quot;localVideo&quot;)\r\nlet remoteVideo = document.getElementById(&quot;remoteVideo&quot;)\r\n\r\nlocalVideo.style.opacity = 0\r\nremoteVideo.style.opacity = 0\r\n\r\nlet peer\r\n\r\nfunction init(userID) {\r\n    peer = new Peer(userID)\r\n\r\n    peer.on(&#39;open&#39;, () =&gt; {\r\n        Android.onPeerConnected();\r\n    })\r\n\r\n    listen()\r\n}\r\n\r\nlet localStream\r\n\r\nfunction listen() {\r\n    peer.on(&#39;call&#39;, (call) =&gt; {\r\n        navigator.mediaDevices.getUserMedia({\r\n            video: true,\r\n            audio: true\r\n        }).then(function(mediaStream) {\r\n            localStream = mediaStream\r\n\r\n            localVideo.srcObject = localStream\r\n            localVideo.style.opacity = 1\r\n\r\n            call.answer(localStream)\r\n\r\n            call.on(&#39;stream&#39;, (remoteStream) =&gt; {\r\n                remoteVideo.srcObject = remoteStream\r\n                remoteVideo.style.opacity = 1\r\n\r\n                // Swap classes of localVideo and remoteVideo\r\n\r\n                localVideo.className = &quot;secondaryVideo&quot;\r\n                remoteVideo.className = &quot;primaryVideo&quot;\r\n            })\r\n        })\r\n    })\r\n}\r\n\r\nfunction startCall(otherUserID) {\r\n    navigator.mediaDevices.getUserMedia({\r\n        video: true,\r\n        audio: true\r\n    }).then(function(mediaStream) {\r\n        localStream = mediaStream\r\n\r\n        localVideo.srcObject = localStream\r\n        localVideo.style.opacity = 1\r\n\r\n        const call = peer.call(otherUserID, localStream)\r\n\r\n        call.on(&#39;stream&#39;, (remoteStream) =&gt; {\r\n            remoteVideo.srcObject = remoteStream\r\n            remoteVideo.style.opacity = 1\r\n\r\n            // Swap classes of localVideo and remoteVideo\r\n\r\n            localVideo.className = &quot;secondaryVideo&quot;\r\n            remoteVideo.className = &quot;primaryVideo&quot;\r\n        })\r\n    })\r\n}\r\n\r\nfunction toggleVideo(b) {\r\n    if (b == &quot;true&quot;) {\r\n        localStream.getVideoTracks()[0].enabled = true\r\n    } else {\r\n        localStream.getVideoTracks()[0].enabled = false\r\n    }\r\n}\r\n\r\nfunction toggleAudio(b) {\r\n    if (b == &quot;true&quot;) {\r\n        localStream.getAudioTracks()[0].enabled = true\r\n    } else {\r\n        localStream.getAudioTracks()[0].enabled = false\r\n    }\r\n}\r\n\r\nlet camIndex = 0\r\n\r\nfunction switchCamera() {\r\n    navigator.mediaDevices.enumerateDevices().then(function(devices) {\r\n        var cameras = []\r\n\r\n        devices.forEach(function(device) {\r\n            &#39;videoinput&#39; === device.kind &amp;&amp; cameras.push(device.deviceId)\r\n        })\r\n\r\n        console.log(cameras.length)\r\n\r\n        if (camIndex == cameras.length - 1) {\r\n            camIndex = 0\r\n        } else {\r\n            camIndex = camIndex + 1\r\n        }\r\n\r\n        var constraints = {\r\n            video: {deviceId: {exact: cameras[camIndex]}},\r\n            audio: true\r\n        }\r\n\r\n        navigator.mediaDevices.getUserMedia(constraints).then(function(mediaStream) {\r\n            localStream = mediaStream\r\n\r\n            localVideo.srcObject = localStream\r\n\r\n            console.log(&quot;camera switched to camIndex &quot; + camIndex) // Only triggered when camIndex = 0\r\n        })\r\n    })\r\n}\r\n```\r\n\r\nI assume that camIndex = 1 is a back camera but it gives this error message in the logcat\r\n```\r\nD/CallActivity: switchCamera: environment\r\nE/chromium: [ERROR:web_contents_delegate.cc(218)] WebContentsDelegate::CheckMediaAccessPermission: Not supported.\r\nE/chromium: [ERROR:web_contents_delegate.cc(218)] WebContentsDelegate::CheckMediaAccessPermission: Not supported.\r\nD/CallActivity: null\r\nI/chromium: [INFO:CONSOLE(97)] &quot;2&quot;, source: file:///android_asset/call.js (97)\r\nE/libc: Access denied finding property &quot;persist.vendor.camera.privapp.list&quot;\r\nW/ThreadPoolSingl: type=1400 audit(0.0:35101): avc: denied { read } for name=&quot;u:object_r:vendor_camera_prop:s0&quot; dev=&quot;tmpfs&quot; ino=19669 scontext=u:r:untrusted_app:s0:c161,c256,c512,c768 tcontext=u:object_r:vendor_camera_prop:s0 tclass=file permissive=0\r\nE/cr_VideoCapture: cameraDevice encountered an error\r\nI/chromium: [INFO:CONSOLE(0)] &quot;Uncaught (in promise) NotReadableError: Could not start video source&quot;, source: file:///android_asset/call.html (0)\r\nD/CallActivity: switchCamera: user\r\nE/chromium: [ERROR:web_contents_delegate.cc(218)] WebContentsDelegate::CheckMediaAccessPermission: Not supported.\r\nE/chromium: [ERROR:web_contents_delegate.cc(218)] WebContentsDelegate::CheckMediaAccessPermission: Not supported.\r\nD/CallActivity: null\r\nI/chromium: [INFO:CONSOLE(97)] &quot;2&quot;, source: file:///android_asset/call.js (97)\r\nD/: PlayerBase::stop() from IPlayer\r\nD/AudioTrack: stop(398): called with 62088 frames delivered\r\nI/chromium: [INFO:CONSOLE(115)] &quot;camera switched to camIndex 0&quot;, source: file:///android_asset/call.js (115)\r\nW/.testapp_webrt: Attempt to remove non-JNI local reference, dumping thread\r\nW/AudioManager: Use of stream types is deprecated for operations other than volume control\r\nW/AudioManager: See the documentation of requestAudioFocus() for what to use instead with android.media.AudioAttributes to qualify your playback use case\r\n```\r\n\r\n  [1]: https://youtu.be/LkB9F-lGBrI","title":"Can&#39;t switch to back camera in Android WebView using PeerJs","body":"<p>I've been trying to make a simple WebRTC app using Firebase Database and PeerJs that can switch cameras. I found one <a href=\"https://youtu.be/LkB9F-lGBrI\" rel=\"nofollow noreferrer\">tutorial</a> and it works properly, but I want to switch the camera between front and back which is not included in the tutorial.</p>\n<p>AndroidManifest.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest\n    ...\n\n    &lt;uses-feature android:name=&quot;android.hardware.camera.any&quot;/&gt;\n    &lt;uses-feature android:name=&quot;android.hardware.camera&quot;/&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.MODIFY_AUDIO_SETTINGS&quot;/&gt;\n\n    ...\n\n&lt;/manifest&gt;\n</code></pre>\n<p>CallActivity.java</p>\n<pre><code>import static android.view.View.GONE;\n\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.webkit.PermissionRequest;\nimport android.webkit.WebChromeClient;\nimport android.webkit.WebView;\nimport android.webkit.WebViewClient;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.RelativeLayout;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport com.google.firebase.database.DataSnapshot;\nimport com.google.firebase.database.DatabaseError;\nimport com.google.firebase.database.DatabaseReference;\nimport com.google.firebase.database.FirebaseDatabase;\nimport com.google.firebase.database.ValueEventListener;\n\nimport java.util.UUID;\n\npublic class CallActivity extends AppCompatActivity {\n    private static final String TAG = CallActivity.class.getSimpleName();\n\n    private final String CAMERA_FRONT = &quot;user&quot;;\n    private final String CAMERA_BACK = &quot;environment&quot;; // Tried to use it on navigator.mediaDevices.getUserMedia({video: {facingMode: camera}}) but it didn't work.\n\n    private RelativeLayout layoutIncoming, layoutCall, layoutCallControl;\n    private Button buttonReject, buttonAccept, buttonCall, buttonAudio, buttonVideo, buttonCamera;\n    private EditText editTextCallName;\n    private TextView textViewIncoming;\n\n    private WebView webView;\n\n    private String name;\n    private String callerName;\n    private boolean isPeerConnected = false;\n\n    private DatabaseReference usersRef = FirebaseDatabase.getInstance(&quot;link_to_firebase_database&quot;).getReference(&quot;users&quot;);\n\n    private boolean videoEnabled = true;\n    private boolean audioEnabled = true;\n    private String camera = CAMERA_FRONT;\n\n    private String uniqueID;\n\n    //== Overridden ==//\n\n    @Override\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_call);\n\n        layoutIncoming = findViewById(R.id.activity_call_layoutIncoming);\n        layoutCall = findViewById(R.id.activity_call_layoutCall);\n        layoutCallControl = findViewById(R.id.activity_call_layoutCallControl);\n\n        buttonAccept = findViewById(R.id.activity_call_buttonAccept);\n        buttonReject = findViewById(R.id.activity_call_buttonReject);\n        buttonCall = findViewById(R.id.activity_call_buttonCall);\n        buttonVideo = findViewById(R.id.activity_call_buttonVideo);\n        buttonAudio = findViewById(R.id.activity_call_buttonAudio);\n        buttonCamera = findViewById(R.id.activity_call_buttonCamera);\n\n        editTextCallName = findViewById(R.id.activity_call_editTextCallName);\n        textViewIncoming = findViewById(R.id.activity_call_textViewIncoming);\n\n        webView = findViewById(R.id.activity_call_webView);\n\n        if (getIntent().hasExtra(&quot;name&quot;)) {\n            name = getIntent().getStringExtra(&quot;name&quot;);\n        }\n\n        buttonCall.setOnClickListener(view -&gt; {\n            callerName = editTextCallName.getText().toString().trim();\n            if (!callerName.isEmpty()) sendCallRequest();\n        });\n\n        buttonVideo.setOnClickListener(view -&gt; {\n            videoEnabled = !videoEnabled;\n            callJsFunction(&quot;javascript:toggleVideo(\\&quot;&quot; + videoEnabled + &quot;\\&quot;)&quot;);\n\n            if (videoEnabled)\n                buttonVideo.setText(&quot;Video Off&quot;);\n            else\n                buttonVideo.setText(&quot;Video On&quot;);\n        });\n\n        buttonAudio.setOnClickListener(view -&gt; {\n            audioEnabled = !audioEnabled;\n            callJsFunction(&quot;javascript:toggleAudio(\\&quot;&quot; + audioEnabled + &quot;\\&quot;)&quot;);\n\n            if (audioEnabled)\n                buttonAudio.setText(&quot;Mute&quot;);\n            else\n                buttonAudio.setText(&quot;Unmute&quot;);\n        });\n\n        buttonCamera.setOnClickListener(view -&gt; {\n            if (camera.equals(CAMERA_FRONT)) camera = CAMERA_BACK;\n            else camera = CAMERA_FRONT;\n\n            switchCamera();\n        });\n\n        setupWebView();\n    }\n\n    //== Public ==//\n\n    public void onPeerConnected() {\n        isPeerConnected = true;\n    }\n\n    //== Private ==//\n\n    private void setupWebView() {\n        WebChromeClient client = new WebChromeClient() {\n            @Override\n            public void onPermissionRequest(PermissionRequest request) {\n                runOnUiThread(() -&gt; request.grant(request.getResources()));\n            }\n        };\n\n        webView.setWebChromeClient(client);\n\n        webView.getSettings().setJavaScriptEnabled(true);\n        webView.getSettings().setMediaPlaybackRequiresUserGesture(false);\n        webView.addJavascriptInterface(new JsInterface(this), &quot;Android&quot;);\n\n        loadVideoCall();\n    }\n\n    private void loadVideoCall() {\n        String filePath = &quot;file:///android_asset/call.html&quot;;\n        webView.loadUrl(filePath);\n\n        WebViewClient client = new WebViewClient() {\n            @Override\n            public void onPageFinished(WebView view, String url) {\n                initializePeer();\n            }\n        };\n\n        webView.setWebViewClient(client);\n    }\n\n    private void initializePeer() {\n        uniqueID = getUniqueID();\n\n        callJsFunction(&quot;javascript:init(\\&quot;&quot; + uniqueID + &quot;\\&quot;)&quot;);\n\n        usersRef.child(name).child(&quot;incoming&quot;).addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n                Log.d(TAG, &quot;Received incoming call!!!&quot;);\n                onCallRequest(snapshot.getValue(String.class));\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n\n            }\n        });\n    }\n\n    private void sendCallRequest() {\n        if (!isPeerConnected) {\n            Toast.makeText(this, &quot;You're not connected to internet. Please try again.&quot;, Toast.LENGTH_SHORT).show();\n            return;\n        }\n\n        usersRef.child(callerName).child(&quot;incoming&quot;).setValue(name);\n        usersRef.child(callerName).child(&quot;isAvailable&quot;).addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n                boolean isAvailable = snapshot.getValue() != null? snapshot.getValue(boolean.class): false;\n\n                if (isAvailable) {\n                    listenForConnectionID();\n                }\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n\n            }\n        });\n    }\n\n    private void onCallRequest(String caller) {\n        if (caller == null) return;\n\n        String incomingMessage = caller + &quot; is calling...&quot;;\n        textViewIncoming.setText(incomingMessage);\n\n        buttonAccept.setOnClickListener(view -&gt; {\n            usersRef.child(name).child(&quot;connectionID&quot;).setValue(uniqueID);\n            usersRef.child(name).child(&quot;isAvailable&quot;).setValue(true);\n\n            layoutIncoming.setVisibility(GONE);\n            switchToCallControls();\n        });\n\n        buttonReject.setOnClickListener(view -&gt; {\n            usersRef.child(name).child(&quot;incoming&quot;).setValue(null);\n            layoutIncoming.setVisibility(GONE);\n        });\n\n        layoutIncoming.setVisibility(View.VISIBLE);\n    }\n\n    private void listenForConnectionID() {\n        usersRef.child(callerName).child(&quot;connectionID&quot;).addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n                if (snapshot.getValue() == null) return;\n\n                switchToCallControls();\n                callJsFunction(&quot;javascript:startCall(\\&quot;&quot; + snapshot.getValue(String.class) + &quot;\\&quot;)&quot;);\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n\n            }\n        });\n    }\n\n    private void switchToCallControls() {\n        layoutCall.setVisibility(GONE);\n        layoutCallControl.setVisibility(View.VISIBLE);\n    }\n\n    private void switchCamera() {\n        Log.d(TAG, &quot;switchCamera: &quot; + camera);\n\n        callJsFunction(&quot;javascript:switchCamera(\\&quot;&quot; + camera + &quot;\\&quot;)&quot;);\n    }\n\n    private void callJsFunction(String functionString) {\n        webView.post(() -&gt; webView.evaluateJavascript(functionString, value -&gt; Log.d(TAG, value)));\n    }\n\n    private String getUniqueID() {\n        return UUID.randomUUID().toString();\n    }\n}\n</code></pre>\n<p>call.html</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n\n&lt;html&gt;\n\n    &lt;head&gt;\n\n        &lt;link href=&quot;./style.css&quot; rel=&quot;stylesheet&quot;/&gt;\n\n    &lt;/head&gt;\n\n    &lt;body&gt;\n\n        &lt;script src=&quot;./peerjs.js&quot;&gt;&lt;/script&gt;\n\n        &lt;video class=&quot;secondaryVideo&quot; autoplay id=&quot;remoteVideo&quot;&gt;&lt;/video&gt;\n        &lt;video class=&quot;primaryVideo&quot; autoplay muted id=&quot;localVideo&quot;&gt;&lt;/video&gt;\n\n        &lt;script src=&quot;./call.js&quot;&gt;&lt;/script&gt;\n\n    &lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n<p>call.js</p>\n<pre><code>let localVideo = document.getElementById(&quot;localVideo&quot;)\nlet remoteVideo = document.getElementById(&quot;remoteVideo&quot;)\n\nlocalVideo.style.opacity = 0\nremoteVideo.style.opacity = 0\n\nlet peer\n\nfunction init(userID) {\n    peer = new Peer(userID)\n\n    peer.on('open', () =&gt; {\n        Android.onPeerConnected();\n    })\n\n    listen()\n}\n\nlet localStream\n\nfunction listen() {\n    peer.on('call', (call) =&gt; {\n        navigator.mediaDevices.getUserMedia({\n            video: true,\n            audio: true\n        }).then(function(mediaStream) {\n            localStream = mediaStream\n\n            localVideo.srcObject = localStream\n            localVideo.style.opacity = 1\n\n            call.answer(localStream)\n\n            call.on('stream', (remoteStream) =&gt; {\n                remoteVideo.srcObject = remoteStream\n                remoteVideo.style.opacity = 1\n\n                // Swap classes of localVideo and remoteVideo\n\n                localVideo.className = &quot;secondaryVideo&quot;\n                remoteVideo.className = &quot;primaryVideo&quot;\n            })\n        })\n    })\n}\n\nfunction startCall(otherUserID) {\n    navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: true\n    }).then(function(mediaStream) {\n        localStream = mediaStream\n\n        localVideo.srcObject = localStream\n        localVideo.style.opacity = 1\n\n        const call = peer.call(otherUserID, localStream)\n\n        call.on('stream', (remoteStream) =&gt; {\n            remoteVideo.srcObject = remoteStream\n            remoteVideo.style.opacity = 1\n\n            // Swap classes of localVideo and remoteVideo\n\n            localVideo.className = &quot;secondaryVideo&quot;\n            remoteVideo.className = &quot;primaryVideo&quot;\n        })\n    })\n}\n\nfunction toggleVideo(b) {\n    if (b == &quot;true&quot;) {\n        localStream.getVideoTracks()[0].enabled = true\n    } else {\n        localStream.getVideoTracks()[0].enabled = false\n    }\n}\n\nfunction toggleAudio(b) {\n    if (b == &quot;true&quot;) {\n        localStream.getAudioTracks()[0].enabled = true\n    } else {\n        localStream.getAudioTracks()[0].enabled = false\n    }\n}\n\nlet camIndex = 0\n\nfunction switchCamera() {\n    navigator.mediaDevices.enumerateDevices().then(function(devices) {\n        var cameras = []\n\n        devices.forEach(function(device) {\n            'videoinput' === device.kind &amp;&amp; cameras.push(device.deviceId)\n        })\n\n        console.log(cameras.length)\n\n        if (camIndex == cameras.length - 1) {\n            camIndex = 0\n        } else {\n            camIndex = camIndex + 1\n        }\n\n        var constraints = {\n            video: {deviceId: {exact: cameras[camIndex]}},\n            audio: true\n        }\n\n        navigator.mediaDevices.getUserMedia(constraints).then(function(mediaStream) {\n            localStream = mediaStream\n\n            localVideo.srcObject = localStream\n\n            console.log(&quot;camera switched to camIndex &quot; + camIndex) // Only triggered when camIndex = 0\n        })\n    })\n}\n</code></pre>\n<p>I assume that camIndex = 1 is a back camera but it gives this error message in the logcat</p>\n<pre><code>D/CallActivity: switchCamera: environment\nE/chromium: [ERROR:web_contents_delegate.cc(218)] WebContentsDelegate::CheckMediaAccessPermission: Not supported.\nE/chromium: [ERROR:web_contents_delegate.cc(218)] WebContentsDelegate::CheckMediaAccessPermission: Not supported.\nD/CallActivity: null\nI/chromium: [INFO:CONSOLE(97)] &quot;2&quot;, source: file:///android_asset/call.js (97)\nE/libc: Access denied finding property &quot;persist.vendor.camera.privapp.list&quot;\nW/ThreadPoolSingl: type=1400 audit(0.0:35101): avc: denied { read } for name=&quot;u:object_r:vendor_camera_prop:s0&quot; dev=&quot;tmpfs&quot; ino=19669 scontext=u:r:untrusted_app:s0:c161,c256,c512,c768 tcontext=u:object_r:vendor_camera_prop:s0 tclass=file permissive=0\nE/cr_VideoCapture: cameraDevice encountered an error\nI/chromium: [INFO:CONSOLE(0)] &quot;Uncaught (in promise) NotReadableError: Could not start video source&quot;, source: file:///android_asset/call.html (0)\nD/CallActivity: switchCamera: user\nE/chromium: [ERROR:web_contents_delegate.cc(218)] WebContentsDelegate::CheckMediaAccessPermission: Not supported.\nE/chromium: [ERROR:web_contents_delegate.cc(218)] WebContentsDelegate::CheckMediaAccessPermission: Not supported.\nD/CallActivity: null\nI/chromium: [INFO:CONSOLE(97)] &quot;2&quot;, source: file:///android_asset/call.js (97)\nD/: PlayerBase::stop() from IPlayer\nD/AudioTrack: stop(398): called with 62088 frames delivered\nI/chromium: [INFO:CONSOLE(115)] &quot;camera switched to camIndex 0&quot;, source: file:///android_asset/call.js (115)\nW/.testapp_webrt: Attempt to remove non-JNI local reference, dumping thread\nW/AudioManager: Use of stream types is deprecated for operations other than volume control\nW/AudioManager: See the documentation of requestAudioFocus() for what to use instead with android.media.AudioAttributes to qualify your playback use case\n</code></pre>\n"},{"tags":["java","apache-kafka","avro"],"comments":[{"owner":{"account_id":7978299,"reputation":1614,"user_id":6020698,"accept_rate":100,"display_name":"Jernej K"},"score":0,"creation_date":1659528397,"post_id":73219068,"comment_id":129315480,"body_markdown":"Attach current documentation, even if it didn&#39;t was useful","body":"Attach current documentation, even if it didn&#39;t was useful"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1659538732,"post_id":73219068,"comment_id":129319270,"body_markdown":"Is there a specific reason not to use Confluent Schema Registry and their provided deserializers?","body":"Is there a specific reason not to use Confluent Schema Registry and their provided deserializers?"},{"owner":{"account_id":25494928,"reputation":311,"user_id":19289130,"display_name":"erKito"},"score":0,"creation_date":1660120687,"post_id":73219068,"comment_id":129455234,"body_markdown":"Yes, we are not using kafka brokers, but a kafka complient product: schema registry is not fully complatible with avro, yet (we find a lot of bugs)","body":"Yes, we are not using kafka brokers, but a kafka complient product: schema registry is not fully complatible with avro, yet (we find a lot of bugs)"}],"answers":[{"tags":[],"owner":{"account_id":14655333,"reputation":600,"user_id":10584061,"display_name":"ChristDist"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659525608,"creation_date":1659525608,"answer_id":73220832,"question_id":73219068,"body_markdown":"If you are using the Maven artefact for your project, you can use the following plugin in your pom.xml to auto-generate the avro classes from your .avsc.\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.avro&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;avro-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${avro.version}&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;generate-sources&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;schema&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;sourceDirectory&gt;${project.basedir}/src/main/resources/avro&lt;/sourceDirectory&gt;\r\n\t\t\t\t\t\t\t&lt;outputDirectory&gt;${project.basedir}/src/main/java/&lt;/outputDirectory&gt;\r\n\t\t\t\t\t\t\t&lt;stringType&gt;String&lt;/stringType&gt;\r\n\t\t\t\t\t\t\t&lt;fieldVisibility&gt;PRIVATE&lt;/fieldVisibility&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\r\nI found this http://www.javawenti.com/?post=16104 as more meaningful sample, which you can try.\r\n\r\nhttps://stackoverflow.com/questions/8298308/how-to-encode-decode-kafka-messages-using-avro-binary-encoder\r\n\r\n\r\n","title":"Read an AVRO encoded byte array record","body":"<p>If you are using the Maven artefact for your project, you can use the following plugin in your pom.xml to auto-generate the avro classes from your .avsc.</p>\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.avro&lt;/groupId&gt;\n            &lt;artifactId&gt;avro-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${avro.version}&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;generate-sources&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;schema&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;sourceDirectory&gt;${project.basedir}/src/main/resources/avro&lt;/sourceDirectory&gt;\n                        &lt;outputDirectory&gt;${project.basedir}/src/main/java/&lt;/outputDirectory&gt;\n                        &lt;stringType&gt;String&lt;/stringType&gt;\n                        &lt;fieldVisibility&gt;PRIVATE&lt;/fieldVisibility&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p>I found this <a href=\"http://www.javawenti.com/?post=16104\" rel=\"nofollow noreferrer\">http://www.javawenti.com/?post=16104</a> as more meaningful sample, which you can try.</p>\n<p><a href=\"https://stackoverflow.com/questions/8298308/how-to-encode-decode-kafka-messages-using-avro-binary-encoder\">How to encode/decode Kafka messages using Avro binary encoder?</a></p>\n"},{"tags":[],"owner":{"account_id":25494928,"reputation":311,"user_id":19289130,"display_name":"erKito"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1659536148,"creation_date":1659536148,"answer_id":73223118,"question_id":73219068,"body_markdown":"thank you ChristDist!\r\n\r\nI post the followe code as compact example to how use the genaration classes:\r\n\r\n\r\n    public class Main {\r\n    \r\n        public static String convertTime(long time) {\r\n            Date date = new Date(time);\r\n            Format format = new SimpleDateFormat(&quot;yyyy MM dd HH:mm:ss&quot;);\r\n            return format.format(date);\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            Properties props = new Properties();\r\n    \r\n            \r\n    \r\n            props.put(CommonClientConfigs.BOOTSTRAP_SERVERS_CONFIG,\r\n                    &quot;your broker&quot;);\r\n            props.put(CommonClientConfigs.SECURITY_PROTOCOL_CONFIG, &quot;SASL_SSL&quot;);\r\n            props.put(SaslConfigs.SASL_MECHANISM, &quot;PLAIN&quot;);\r\n    \r\n            props.put(SaslConfigs.SASL_JAAS_CONFIG,\r\n                    &quot;org.apache.kafka.common.security.plain.PlainLoginModule required username=\\&quot;your-username\\&quot; password=\\&quot;your-password\\&quot;;&quot;);\r\n    \r\n            props.put(ConsumerConfig.GROUP_ID_CONFIG, &quot;test-avro&quot;);\r\n    \r\n            props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG,\r\n                    StringDeserializer.class);\r\n            props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG,\r\n                    ByteArrayDeserializer.class);\r\n    \r\n            props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\r\n    \r\n            String topic = &quot;messages-payments&quot;;\r\n            final Consumer&lt;String, byte[]&gt; consumer = new KafkaConsumer&lt;String, byte[]&gt;(props);\r\n            consumer.subscribe(Arrays.asList(topic));\r\n    \r\n            try {\r\n                for (int i = 0; i &lt; 1000; i++) {\r\n                    ConsumerRecords&lt;String, byte[]&gt; records = consumer.poll(10000);\r\n                    System.out.println(&quot;************************************************************************&quot;);\r\n                    System.out.println(&quot;!!!!!!!records length: &quot; + records.count());\r\n                    for (ConsumerRecord&lt;String, byte[]&gt; record : records) {\r\n                        System.out.printf(&quot;offset = %d, date = %s, key = %s, value = %s \\n&quot;, record.offset(),\r\n                                convertTime(record.timestamp()),\r\n                                record.key(),\r\n                                new String(record.value(), StandardCharsets.UTF_8));\r\n                        System.out.println(&quot;HEX:&quot; + new String(Hex.encode(record.value())));\r\n    \r\n                        DatumReader&lt;message&gt; reader = new SpecificDatumReader&lt;&gt;(message.class);\r\n                        try {\r\n                            Decoder decoder = DecoderFactory.get().binaryDecoder(record.value(), null);\r\n                            message m = reader.read(null, decoder);\r\n    \r\n                            System.out.println(\r\n                                    &quot;DECODED: &quot; + m.getId() + &quot; &quot; + m.getContentType() + &quot; &quot; + m.getFeatureLevelType());\r\n                        } catch (Exception e) {\r\n                            System.out.println(&quot;DECODER ERROR: &quot; + e.getMessage());\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                }\r\n            } finally {\r\n                System.out.println(\r\n                consumer.close();\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"Read an AVRO encoded byte array record","body":"<p>thank you ChristDist!</p>\n<p>I post the followe code as compact example to how use the genaration classes:</p>\n<pre><code>public class Main {\n\n    public static String convertTime(long time) {\n        Date date = new Date(time);\n        Format format = new SimpleDateFormat(&quot;yyyy MM dd HH:mm:ss&quot;);\n        return format.format(date);\n    }\n\n    public static void main(String[] args) {\n        Properties props = new Properties();\n\n        \n\n        props.put(CommonClientConfigs.BOOTSTRAP_SERVERS_CONFIG,\n                &quot;your broker&quot;);\n        props.put(CommonClientConfigs.SECURITY_PROTOCOL_CONFIG, &quot;SASL_SSL&quot;);\n        props.put(SaslConfigs.SASL_MECHANISM, &quot;PLAIN&quot;);\n\n        props.put(SaslConfigs.SASL_JAAS_CONFIG,\n                &quot;org.apache.kafka.common.security.plain.PlainLoginModule required username=\\&quot;your-username\\&quot; password=\\&quot;your-password\\&quot;;&quot;);\n\n        props.put(ConsumerConfig.GROUP_ID_CONFIG, &quot;test-avro&quot;);\n\n        props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG,\n                StringDeserializer.class);\n        props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG,\n                ByteArrayDeserializer.class);\n\n        props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\n\n        String topic = &quot;messages-payments&quot;;\n        final Consumer&lt;String, byte[]&gt; consumer = new KafkaConsumer&lt;String, byte[]&gt;(props);\n        consumer.subscribe(Arrays.asList(topic));\n\n        try {\n            for (int i = 0; i &lt; 1000; i++) {\n                ConsumerRecords&lt;String, byte[]&gt; records = consumer.poll(10000);\n                System.out.println(&quot;************************************************************************&quot;);\n                System.out.println(&quot;!!!!!!!records length: &quot; + records.count());\n                for (ConsumerRecord&lt;String, byte[]&gt; record : records) {\n                    System.out.printf(&quot;offset = %d, date = %s, key = %s, value = %s \\n&quot;, record.offset(),\n                            convertTime(record.timestamp()),\n                            record.key(),\n                            new String(record.value(), StandardCharsets.UTF_8));\n                    System.out.println(&quot;HEX:&quot; + new String(Hex.encode(record.value())));\n\n                    DatumReader&lt;message&gt; reader = new SpecificDatumReader&lt;&gt;(message.class);\n                    try {\n                        Decoder decoder = DecoderFactory.get().binaryDecoder(record.value(), null);\n                        message m = reader.read(null, decoder);\n\n                        System.out.println(\n                                &quot;DECODED: &quot; + m.getId() + &quot; &quot; + m.getContentType() + &quot; &quot; + m.getFeatureLevelType());\n                    } catch (Exception e) {\n                        System.out.println(&quot;DECODER ERROR: &quot; + e.getMessage());\n                        e.printStackTrace();\n                    }\n                }\n            }\n        } finally {\n            System.out.println(\n            consumer.close();\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":25494928,"reputation":311,"user_id":19289130,"display_name":"erKito"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":708,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73220832,"answer_count":2,"score":0,"last_activity_date":1659548654,"creation_date":1659517647,"question_id":73219068,"body_markdown":"How can I generate classes from avro json spec and use the generated classes to decode a message from kafka client? \r\n\r\nI&#39;ve found some partial example using data from file, but nothing working using kafka as source (without schema registry).\r\n\r\n","title":"Read an AVRO encoded byte array record","body":"<p>How can I generate classes from avro json spec and use the generated classes to decode a message from kafka client?</p>\n<p>I've found some partial example using data from file, but nothing working using kafka as source (without schema registry).</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":14155962,"reputation":578,"user_id":10226695,"display_name":"Shavk with a Hoon"},"score":2,"creation_date":1659547381,"post_id":73225359,"comment_id":129322226,"body_markdown":"just call `this.setGender(gender)` in the constructor rather than directly setting it.","body":"just call <code>this.setGender(gender)</code> in the constructor rather than directly setting it."},{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":0,"creation_date":1659547449,"post_id":73225359,"comment_id":129322256,"body_markdown":"What is this &quot;overridden&quot; issue you speak of? For simple POJOs like this, I think using a setter is fine. I personally wouldn&#39;t even use a constructor with arguments and require use of the setter to set the field.","body":"What is this &quot;overridden&quot; issue you speak of? For simple POJOs like this, I think using a setter is fine. I personally wouldn&#39;t even use a constructor with arguments and require use of the setter to set the field."}],"answers":[{"tags":[],"owner":{"account_id":23256248,"reputation":81,"user_id":17343261,"display_name":"Java-Enthusiast"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659547493,"creation_date":1659547493,"answer_id":73225444,"question_id":73225359,"body_markdown":"       public boolean validateGender(String p_gender){\r\n        if(p_gender.equals(&quot;Male&quot;) || p_gender.equals(&quot;Female&quot;)){\r\n           return true;\r\n        }\r\n        else{\r\n           return false;\r\n        }\r\n    \r\nSo, how about something like the above?\r\n\r\nThen, use that in both setGender(String gender) and the constructor that you&#39;re looking to perform the validation in?\r\n\r\n    public Person(String name, String gender){\r\n        this.name = name;\r\n        if(validateGender(gender)){\r\n           this.gender = gender;\r\n        }\r\n        else{\r\n           this.gender = &quot;undefined&quot;;\r\n        }\r\n    }\r\n","title":"Java constructor bypass setter validation","body":"<pre><code>   public boolean validateGender(String p_gender){\n    if(p_gender.equals(&quot;Male&quot;) || p_gender.equals(&quot;Female&quot;)){\n       return true;\n    }\n    else{\n       return false;\n    }\n</code></pre>\n<p>So, how about something like the above?</p>\n<p>Then, use that in both setGender(String gender) and the constructor that you're looking to perform the validation in?</p>\n<pre><code>public Person(String name, String gender){\n    this.name = name;\n    if(validateGender(gender)){\n       this.gender = gender;\n    }\n    else{\n       this.gender = &quot;undefined&quot;;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1659547566,"creation_date":1659547566,"answer_id":73225458,"question_id":73225359,"body_markdown":"Calling the setter in the constructor should only be done if either the class or the setter is final. Otherwise a sub class may override it, and do other things that attempt to use fields that haven&#39;t been initialized yet.\r\n\r\nOne easy fix is to make the field final. You then only have to validate it in the constructor, because there is no need for a setter. Another possibility is to duplicate the validation. But then you&#39;re duplicating code, and your first instinct should be to refactor it into a utility method.\r\n\r\nWhich can lead to something like this (and I&#39;m swapping the operands to the `equals` calls to be `null`-safe):\r\n\r\n```\r\npublic class Person {\r\n    public Person(String name, String gender) {\r\n        this.name = name;\r\n        setValidGender(gender);\r\n    }\r\n\r\n    public void setGender(String gender) {\r\n        setValidGender(gender);\r\n    }\r\n\r\n    private void setValidGender(String gender) {\r\n        if (&quot;Male&quot;.equals(gender) || &quot;Female&quot;.equals(gender)) {\r\n            this.gender = gender;\r\n        } else {\r\n            this.gender = &quot;undefined&quot;;\r\n        }\r\n    }\r\n}\r\n```","title":"Java constructor bypass setter validation","body":"<p>Calling the setter in the constructor should only be done if either the class or the setter is final. Otherwise a sub class may override it, and do other things that attempt to use fields that haven't been initialized yet.</p>\n<p>One easy fix is to make the field final. You then only have to validate it in the constructor, because there is no need for a setter. Another possibility is to duplicate the validation. But then you're duplicating code, and your first instinct should be to refactor it into a utility method.</p>\n<p>Which can lead to something like this (and I'm swapping the operands to the <code>equals</code> calls to be <code>null</code>-safe):</p>\n<pre><code>public class Person {\n    public Person(String name, String gender) {\n        this.name = name;\n        setValidGender(gender);\n    }\n\n    public void setGender(String gender) {\n        setValidGender(gender);\n    }\n\n    private void setValidGender(String gender) {\n        if (&quot;Male&quot;.equals(gender) || &quot;Female&quot;.equals(gender)) {\n            this.gender = gender;\n        } else {\n            this.gender = &quot;undefined&quot;;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659548239,"creation_date":1659548239,"answer_id":73225576,"question_id":73225359,"body_markdown":"Use [the builder pattern](https://refactoring.guru/design-patterns/builder) and do the validation as a part of the builder.\r\n\r\nSo here&#39;s the deal.  Performing field validation *while* the object is being instantiated is dangerous because you want to avoid two things:\r\n\r\n - Invalid data is in a &quot;valid&quot; object (do not assume a default gender)\r\n - Object is half-instantiated (if you throw an exception during object construction, [weird things happen](https://stackoverflow.com/a/14256966/1079354)\r\n\r\nSo instead, use a separate object that builds it out for you, and does the validation in place.\r\n\r\n```\r\npublic PersonBuilder {\r\n    public Person person = new Person(); // blank person object\r\n    public static PersonBuilder getInstance() {\r\n        return new PersonBuilder();\r\n    }\r\n\r\n    public PersonBuilder withName(final String name) {\r\n        // do your validation here, and if it fails, you can blow up\r\n        person.setName(name);\r\n        return this;\r\n    }\r\n\r\n    public PersonBuilder withGender(final String gender) {\r\n        // do your validation here, and if it fails, you can blow up\r\n        person.setGender(gender);\r\n        return this;\r\n    }\r\n\r\n    public Person build() {\r\n        return person;\r\n    }\r\n\r\n}\r\n\r\n// Usage\r\n\r\nPerson person = PersonBuilder.getInstance().withName(&quot;Tom&quot;).withGender(&quot;Male&quot;).build();\r\n\r\n```\r\n","title":"Java constructor bypass setter validation","body":"<p>Use <a href=\"https://refactoring.guru/design-patterns/builder\" rel=\"nofollow noreferrer\">the builder pattern</a> and do the validation as a part of the builder.</p>\n<p>So here's the deal.  Performing field validation <em>while</em> the object is being instantiated is dangerous because you want to avoid two things:</p>\n<ul>\n<li>Invalid data is in a &quot;valid&quot; object (do not assume a default gender)</li>\n<li>Object is half-instantiated (if you throw an exception during object construction, <a href=\"https://stackoverflow.com/a/14256966/1079354\">weird things happen</a></li>\n</ul>\n<p>So instead, use a separate object that builds it out for you, and does the validation in place.</p>\n<pre><code>public PersonBuilder {\n    public Person person = new Person(); // blank person object\n    public static PersonBuilder getInstance() {\n        return new PersonBuilder();\n    }\n\n    public PersonBuilder withName(final String name) {\n        // do your validation here, and if it fails, you can blow up\n        person.setName(name);\n        return this;\n    }\n\n    public PersonBuilder withGender(final String gender) {\n        // do your validation here, and if it fails, you can blow up\n        person.setGender(gender);\n        return this;\n    }\n\n    public Person build() {\n        return person;\n    }\n\n}\n\n// Usage\n\nPerson person = PersonBuilder.getInstance().withName(&quot;Tom&quot;).withGender(&quot;Male&quot;).build();\n\n</code></pre>\n"}],"owner":{"account_id":17394838,"reputation":27,"user_id":12604694,"display_name":"giggity"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1659548239,"creation_date":1659547198,"question_id":73225359,"body_markdown":"When learning Java constructor and mutator, I found out that setter can be used to perform validation. But if we directly use constructor to create a new instance, wouldn&#39;t it bypass the validation in setter? Below is the sample code:\r\n\r\n```\r\npublic static void main(String[] args){\r\n    Person p1 = new Person(&quot;My Name&quot;, &quot;My Gender&quot;); //bypass setter validation\r\n    p1.setGender(&quot;Female&quot;); //validation is performed\r\n}\r\n\r\npublic class Person{\r\n    public Person(String name, String gender){\r\n        this.name = name;\r\n        this.gender = gender;\r\n    }\r\n\r\n    public void setGender(String gender){\r\n        if(gender.equals(&quot;Male&quot;) || gender.equals(&quot;Female&quot;)){\r\n            this.gender = gender;\r\n        }\r\n        else{\r\n            this.gender = &quot;undefined&quot;;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI have seen some mentioned that you can call the setter in the constructor, but seems like it is not a good approach as a lot of forums mentioned that it will cause some &quot;overridden&quot; issue. If that&#39;s the case, is there anything I can do to make sure that the setter validation can be performed when I&#39;m calling my constructor?\r\n\r\nThanks in advance!","title":"Java constructor bypass setter validation","body":"<p>When learning Java constructor and mutator, I found out that setter can be used to perform validation. But if we directly use constructor to create a new instance, wouldn't it bypass the validation in setter? Below is the sample code:</p>\n<pre><code>public static void main(String[] args){\n    Person p1 = new Person(&quot;My Name&quot;, &quot;My Gender&quot;); //bypass setter validation\n    p1.setGender(&quot;Female&quot;); //validation is performed\n}\n\npublic class Person{\n    public Person(String name, String gender){\n        this.name = name;\n        this.gender = gender;\n    }\n\n    public void setGender(String gender){\n        if(gender.equals(&quot;Male&quot;) || gender.equals(&quot;Female&quot;)){\n            this.gender = gender;\n        }\n        else{\n            this.gender = &quot;undefined&quot;;\n        }\n    }\n}\n</code></pre>\n<p>I have seen some mentioned that you can call the setter in the constructor, but seems like it is not a good approach as a lot of forums mentioned that it will cause some &quot;overridden&quot; issue. If that's the case, is there anything I can do to make sure that the setter validation can be performed when I'm calling my constructor?</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","jetty","embedded-jetty","jetty-9","connection-reset"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1659558511,"post_id":73225548,"comment_id":129325894,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":5404451,"reputation":144,"user_id":4315858,"display_name":"Arda G&#252;ney"},"score":0,"creation_date":1661258342,"post_id":73225548,"comment_id":129724688,"body_markdown":"I couldn&#39;t find a way either...","body":"I couldn&#39;t find a way either..."}],"owner":{"account_id":25969760,"reputation":11,"user_id":19685166,"display_name":"Martin Penaz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1659548043,"creation_date":1659548043,"question_id":73225548,"body_markdown":"Using embedded Jetty 9.4.x and QueuedThreadPool\r\n\r\nIn a scenario when there is way too few threads to handle Jetty tasks the QTP queue grows\r\n\r\nNew Connections have a timeout of 30secs and if in these 30secs the task is not picked from the Queue the connection is dropped. If this happens there is only a DEBUG msg thrown by JettyContainer.\r\n\r\nIs there any way to setup a warning LOG messages for alerting purposes? I was trying to explore different EventListeners eg. HttpChannel.Listener, unfortunately it does not have a method exposed for when the connection is dropped due to timeout. Are there any other options or any other listener that can give access to that event?\r\n\r\nThe reason why I want to set this up is that I have several servers behind load balancer and if one of these gets into some issues, there is no easy way to find out which of the servers drops the connections","title":"Jetty Connection-Reset Timeouts Alerting","body":"<p>Using embedded Jetty 9.4.x and QueuedThreadPool</p>\n<p>In a scenario when there is way too few threads to handle Jetty tasks the QTP queue grows</p>\n<p>New Connections have a timeout of 30secs and if in these 30secs the task is not picked from the Queue the connection is dropped. If this happens there is only a DEBUG msg thrown by JettyContainer.</p>\n<p>Is there any way to setup a warning LOG messages for alerting purposes? I was trying to explore different EventListeners eg. HttpChannel.Listener, unfortunately it does not have a method exposed for when the connection is dropped due to timeout. Are there any other options or any other listener that can give access to that event?</p>\n<p>The reason why I want to set this up is that I have several servers behind load balancer and if one of these gets into some issues, there is no easy way to find out which of the servers drops the connections</p>\n"},{"tags":["java","javac","annotation-processing"],"owner":{"account_id":5074427,"reputation":193,"user_id":4072268,"accept_rate":100,"display_name":"langtutheky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1659547701,"creation_date":1659547701,"question_id":73225486,"body_markdown":"This is the official documentation for the [`-s`](https://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html#processing) option in javac\r\n\r\n&gt; Specify the directory where to place generated source files. The directory must already exist; javac will not create it. If a class is part of a package, the compiler puts the source file in a subdirectory reflecting the package name, creating directories as needed. For example, if you specify -s C:\\mysrc and the class is called com.mypackage.MyClass, then the source file will be placed in C:\\mysrc\\com\\mypackage\\MyClass.java.\r\n\r\nHowever, I want to know the default directory if this flag is not set from an official documentation/sources.\r\n","title":"What is the default directory for generated source files from annotation processing in javac?","body":"<p>This is the official documentation for the <a href=\"https://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html#processing\" rel=\"nofollow noreferrer\"><code>-s</code></a> option in javac</p>\n<blockquote>\n<p>Specify the directory where to place generated source files. The directory must already exist; javac will not create it. If a class is part of a package, the compiler puts the source file in a subdirectory reflecting the package name, creating directories as needed. For example, if you specify -s C:\\mysrc and the class is called com.mypackage.MyClass, then the source file will be placed in C:\\mysrc\\com\\mypackage\\MyClass.java.</p>\n</blockquote>\n<p>However, I want to know the default directory if this flag is not set from an official documentation/sources.</p>\n"},{"tags":["java","sql","datetime","date"],"comments":[{"owner":{"account_id":2260891,"reputation":419,"user_id":1991034,"display_name":"Lem"},"score":0,"creation_date":1383040791,"post_id":530012,"comment_id":29185534,"body_markdown":"You can find a similar issue here\r\n\r\nhttp://stackoverflow.com/questions/12131068/error-casting-java-util-date-into-java-sql-date","body":"You can find a similar issue here    <a href=\"http://stackoverflow.com/questions/12131068/error-casting-java-util-date-into-java-sql-date\" title=\"error casting java util date into java sql date\">stackoverflow.com/questions/12131068/&hellip;</a>"},{"owner":{"account_id":2361010,"reputation":1365,"user_id":2067690,"accept_rate":83,"display_name":"HumanInDisguise"},"score":0,"creation_date":1430228182,"post_id":530012,"comment_id":47963463,"body_markdown":"For me, it turned out I didn&#39;t needed to convert. There was a `import java.sql.*` in my code, overriding the java.util.date and thus causing trouble when assigning date values that were fine with the latter but not the first. HTH","body":"For me, it turned out I didn&#39;t needed to convert. There was a <code>import java.sql.*</code> in my code, overriding the java.util.date and thus causing trouble when assigning date values that were fine with the latter but not the first. HTH"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1443128283,"post_id":530012,"comment_id":53380527,"body_markdown":"@DavidAckerman Do you understand that a java.util.Date is a date *and* a time-of-day, but a java.sql.Date is only a date *without* a time-of-day? (Actually there is a time-of-day but that is ignored, a bad hack of a class design) In SQL, `DATE` means date-only.","body":"@DavidAckerman Do you understand that a java.util.Date is a date <i>and</i> a time-of-day, but a java.sql.Date is only a date <i>without</i> a time-of-day? (Actually there is a time-of-day but that is ignored, a bad hack of a class design) In SQL, <code>DATE</code> means date-only."},{"owner":{"account_id":1823,"reputation":12659,"user_id":2504,"accept_rate":100,"display_name":"David Ackerman"},"score":2,"creation_date":1480950379,"post_id":530012,"comment_id":69163780,"body_markdown":"I indeed wasn&#39;t aware of the nuances back in &#39;09, and since this question is so popular, I&#39;ve changed the accepted answer to one that is both more modern and complete. Thanks everyone for your input!","body":"I indeed wasn&#39;t aware of the nuances back in &#39;09, and since this question is so popular, I&#39;ve changed the accepted answer to one that is both more modern and complete. Thanks everyone for your input!"}],"answers":[{"tags":[],"owner":{"account_id":1823,"reputation":12659,"user_id":2504,"accept_rate":100,"display_name":"David Ackerman"},"down_vote_count":2,"up_vote_count":533,"is_accepted":false,"score":531,"last_activity_date":1234214320,"creation_date":1234214320,"answer_id":530022,"question_id":530012,"body_markdown":"Nevermind....\r\n\r\n    public class MainClass {\r\n    \r\n      public static void main(String[] args) {\r\n        java.util.Date utilDate = new java.util.Date();\r\n        java.sql.Date sqlDate = new java.sql.Date(utilDate.getTime());\r\n        System.out.println(&quot;utilDate:&quot; + utilDate);\r\n        System.out.println(&quot;sqlDate:&quot; + sqlDate);\r\n    \r\n      }\r\n    \r\n    }\r\n\r\nexplains it.  The link is [http://www.java2s.com/Tutorial/Java/0040__Data-Type/ConvertfromajavautilDateObjecttoajavasqlDateObject.htm][1]\r\n\r\n\r\n  [1]: http://www.java2s.com/Tutorial/Java/0040__Data-Type/ConvertfromajavautilDateObjecttoajavasqlDateObject.htm","title":"How to convert java.util.Date to java.sql.Date?","body":"<p>Nevermind....</p>\n\n<pre><code>public class MainClass {\n\n  public static void main(String[] args) {\n    java.util.Date utilDate = new java.util.Date();\n    java.sql.Date sqlDate = new java.sql.Date(utilDate.getTime());\n    System.out.println(\"utilDate:\" + utilDate);\n    System.out.println(\"sqlDate:\" + sqlDate);\n\n  }\n\n}\n</code></pre>\n\n<p>explains it.  The link is <a href=\"http://www.java2s.com/Tutorial/Java/0040__Data-Type/ConvertfromajavautilDateObjecttoajavasqlDateObject.htm\" rel=\"noreferrer\">http://www.java2s.com/Tutorial/Java/0040__Data-Type/ConvertfromajavautilDateObjecttoajavasqlDateObject.htm</a></p>\n"},{"tags":[],"owner":{"account_id":226474,"reputation":3182,"user_id":487545,"accept_rate":82,"display_name":"mauretto"},"down_vote_count":1,"up_vote_count":42,"is_accepted":false,"score":41,"last_activity_date":1400740727,"creation_date":1288879424,"answer_id":4097430,"question_id":530012,"body_markdown":"With the other answer you may have troubles with the time info (compare the dates with unexpected results!)\r\n\r\nI suggest:\r\n\r\n    java.util.Calendar cal = Calendar.getInstance();\r\n    java.util.Date utilDate = new java.util.Date(); // your util date\r\n    cal.setTime(utilDate);\r\n    cal.set(Calendar.HOUR_OF_DAY, 0);\r\n    cal.set(Calendar.MINUTE, 0);\r\n    cal.set(Calendar.SECOND, 0);\r\n    cal.set(Calendar.MILLISECOND, 0);    \r\n    java.sql.Date sqlDate = new java.sql.Date(cal.getTime().getTime()); // your sql date\r\n    System.out.println(&quot;utilDate:&quot; + utilDate);\r\n    System.out.println(&quot;sqlDate:&quot; + sqlDate);","title":"How to convert java.util.Date to java.sql.Date?","body":"<p>With the other answer you may have troubles with the time info (compare the dates with unexpected results!)</p>\n\n<p>I suggest:</p>\n\n<pre><code>java.util.Calendar cal = Calendar.getInstance();\njava.util.Date utilDate = new java.util.Date(); // your util date\ncal.setTime(utilDate);\ncal.set(Calendar.HOUR_OF_DAY, 0);\ncal.set(Calendar.MINUTE, 0);\ncal.set(Calendar.SECOND, 0);\ncal.set(Calendar.MILLISECOND, 0);    \njava.sql.Date sqlDate = new java.sql.Date(cal.getTime().getTime()); // your sql date\nSystem.out.println(\"utilDate:\" + utilDate);\nSystem.out.println(\"sqlDate:\" + sqlDate);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1599903,"reputation":11,"user_id":1481148,"display_name":"Benjamin Ndugga"},"down_vote_count":9,"up_vote_count":1,"is_accepted":false,"score":-8,"last_activity_date":1340660212,"creation_date":1340660212,"answer_id":11197724,"question_id":530012,"body_markdown":"If you are usgin Mysql a date column can be passed a String representation of this date\r\n\r\nso i using the DateFormatter Class to format it and then set it as a String in the sql statement or prepared statement\r\n\r\nhere is the code illustration:\r\n\r\n    \r\n    private String converUtilDateToSqlDate(java.util.Date utilDate) {\r\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\r\n        String sqlDate = sdf.format(utilDate);\r\n        return sqlDate;\r\n    }\r\n\r\n String date = converUtilDateToSqlDate(otherTransaction.getTransDate());\r\n\r\n \r\n   //then pass this date in you sql statement\r\n\r\n\r\n\r\n\r\n","title":"How to convert java.util.Date to java.sql.Date?","body":"<p>If you are usgin Mysql a date column can be passed a String representation of this date</p>\n\n<p>so i using the DateFormatter Class to format it and then set it as a String in the sql statement or prepared statement</p>\n\n<p>here is the code illustration:</p>\n\n<pre><code>private String converUtilDateToSqlDate(java.util.Date utilDate) {\n    SimpleDateFormat sdf = new SimpleDateFormat(\"yyyy-MM-dd\");\n    String sqlDate = sdf.format(utilDate);\n    return sqlDate;\n}\n</code></pre>\n\n<p>String date = converUtilDateToSqlDate(otherTransaction.getTransDate());</p>\n\n<p>//then pass this date in you sql statement</p>\n"},{"tags":[],"owner":{"account_id":2830995,"reputation":2425,"user_id":2432586,"accept_rate":69,"display_name":"Donovan Thomson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1371199114,"creation_date":1371199114,"answer_id":17104417,"question_id":530012,"body_markdown":"Method for comparing 2 dates (util.date or sql.date)  \r\n\r\n     public static boolean isSameDay(Date a, Date b) {\r\n        Calendar calA = new GregorianCalendar();\r\n        calA.setTime(a);\r\n\r\n        Calendar calB = new GregorianCalendar();\r\n        calB.setTime(b);\r\n\r\n        final int yearA = calA.get(Calendar.YEAR);\r\n        final int monthA = calA.get(Calendar.MONTH);\r\n        final int dayA = calA.get(Calendar.DAY_OF_YEAR);\r\n\r\n        final int yearB = calB.get(Calendar.YEAR);\r\n        final int monthB = calB.get(Calendar.MONTH);\r\n        final int dayB = calB.get(Calendar.DAY_OF_YEAR);\r\n\r\n        return yearA == yearB &amp;&amp; monthA == monthB &amp;&amp; dayA == dayB;\r\n    }","title":"How to convert java.util.Date to java.sql.Date?","body":"<p>Method for comparing 2 dates (util.date or sql.date)  </p>\n\n<pre><code> public static boolean isSameDay(Date a, Date b) {\n    Calendar calA = new GregorianCalendar();\n    calA.setTime(a);\n\n    Calendar calB = new GregorianCalendar();\n    calB.setTime(b);\n\n    final int yearA = calA.get(Calendar.YEAR);\n    final int monthA = calA.get(Calendar.MONTH);\n    final int dayA = calA.get(Calendar.DAY_OF_YEAR);\n\n    final int yearB = calB.get(Calendar.YEAR);\n    final int monthB = calB.get(Calendar.MONTH);\n    final int dayB = calB.get(Calendar.DAY_OF_YEAR);\n\n    return yearA == yearB &amp;&amp; monthA == monthB &amp;&amp; dayA == dayB;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3281906,"reputation":3459,"user_id":2762311,"accept_rate":74,"display_name":"Kishan Bheemajiyani"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1380019202,"creation_date":1380019202,"answer_id":18979351,"question_id":530012,"body_markdown":"\r\n\r\nHere the example of converting Util Date to Sql date and ya this is one example what i am using in my project might be helpful to you too.\r\n\r\n    java.util.Date utilStartDate = table_Login.getDob();(orwhat ever date your give form obj)\r\n    java.sql.Date sqlStartDate = new java.sql.Date(utilStartDate.getTime());(converting date)","title":"How to convert java.util.Date to java.sql.Date?","body":"<p>Here the example of converting Util Date to Sql date and ya this is one example what i am using in my project might be helpful to you too.</p>\n\n<pre><code>java.util.Date utilStartDate = table_Login.getDob();(orwhat ever date your give form obj)\njava.sql.Date sqlStartDate = new java.sql.Date(utilStartDate.getTime());(converting date)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":301494,"reputation":2081,"user_id":2041542,"accept_rate":60,"display_name":"kapil das"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1380890900,"creation_date":1380890900,"answer_id":19181593,"question_id":530012,"body_markdown":" \r\ntry with this \r\n\r\n    public static String toMysqlDateStr(Date date) {\r\n        String dateForMySql = &quot;&quot;;\r\n        if (date == null) {\r\n            dateForMySql = null;\r\n        } else {\r\n            SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n            dateForMySql = sdf.format(date);\r\n        }\r\n\r\n        return dateForMySql;\r\n    }","title":"How to convert java.util.Date to java.sql.Date?","body":"<p>try with this </p>\n\n<pre><code>public static String toMysqlDateStr(Date date) {\n    String dateForMySql = \"\";\n    if (date == null) {\n        dateForMySql = null;\n    } else {\n        SimpleDateFormat sdf = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n        dateForMySql = sdf.format(date);\n    }\n\n    return dateForMySql;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2970488,"reputation":11,"user_id":2522632,"display_name":"UmeshA"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1386873612,"creation_date":1386872408,"answer_id":20551199,"question_id":530012,"body_markdown":"i am using the following code please try it out\r\n\r\n    DateFormat fm= new SimpleDateFormatter();\r\n\r\nspecify the format of the date you want\r\nfor example `&quot;DD-MM_YYYY&quot;` or `&#39;YYYY-mm-dd&#39;`  then use the java Date datatype as\r\n\r\n    fm.format(&quot;object of java.util.date&quot;);\r\n\r\nthen it will parse your date\r\n\r\n\r\n","title":"How to convert java.util.Date to java.sql.Date?","body":"<p>i am using the following code please try it out</p>\n\n<pre><code>DateFormat fm= new SimpleDateFormatter();\n</code></pre>\n\n<p>specify the format of the date you want\nfor example <code>\"DD-MM_YYYY\"</code> or <code>'YYYY-mm-dd'</code>  then use the java Date datatype as</p>\n\n<pre><code>fm.format(\"object of java.util.date\");\n</code></pre>\n\n<p>then it will parse your date</p>\n"},{"tags":[],"owner":{"account_id":190901,"reputation":411,"user_id":431127,"display_name":"chetan"},"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1392738613,"creation_date":1391635368,"answer_id":21588812,"question_id":530012,"body_markdown":"This function will return a converted SQL date from java date object.\r\n\r\n    public java.sql.Date convertJavaDateToSqlDate(java.util.Date date) {\r\n        return new java.sql.Date(date.getTime());\r\n    }","title":"How to convert java.util.Date to java.sql.Date?","body":"<p>This function will return a converted SQL date from java date object.</p>\n\n<pre><code>public java.sql.Date convertJavaDateToSqlDate(java.util.Date date) {\n    return new java.sql.Date(date.getTime());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2744245,"reputation":219,"user_id":2364991,"accept_rate":20,"display_name":"Tanmay kumar shaw"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1419331762,"creation_date":1419331762,"answer_id":27618832,"question_id":530012,"body_markdown":"This function will return a converted SQL date from java date object.\r\n\r\n    public static java.sql.Date convertFromJAVADateToSQLDate(\r\n    \t\t\tjava.util.Date javaDate) {\r\n    \t\tjava.sql.Date sqlDate = null;\r\n    \t\tif (javaDate != null) {\r\n    \t\t\tsqlDate = new Date(javaDate.getTime());\r\n    \t\t}\r\n    \t\treturn sqlDate;\r\n    \t}","title":"How to convert java.util.Date to java.sql.Date?","body":"<p>This function will return a converted SQL date from java date object.</p>\n\n<pre><code>public static java.sql.Date convertFromJAVADateToSQLDate(\n            java.util.Date javaDate) {\n        java.sql.Date sqlDate = null;\n        if (javaDate != null) {\n            sqlDate = new Date(javaDate.getTime());\n        }\n        return sqlDate;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2572861,"reputation":1555,"user_id":2231163,"accept_rate":100,"display_name":"Emmanuel Angelo.R"},"down_vote_count":5,"up_vote_count":1,"is_accepted":false,"score":-4,"last_activity_date":1427954284,"creation_date":1427954284,"answer_id":29405968,"question_id":530012,"body_markdown":"You can use this method to convert util date to sql date,\r\n\r\n    DateUtilities.convertUtilDateToSql(java.util.Date)","title":"How to convert java.util.Date to java.sql.Date?","body":"<p>You can use this method to convert util date to sql date,</p>\n\n<pre><code>DateUtilities.convertUtilDateToSql(java.util.Date)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1490980,"reputation":4670,"user_id":1398065,"accept_rate":86,"display_name":"shellbye"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1621931535,"creation_date":1436153797,"answer_id":31237429,"question_id":530012,"body_markdown":"Converting ```java.util.Date``` to ```java.sql.Date``` will lose hours, minutes and seconds. So if it is possible, I suggest you to use ```java.sql.Timestamp``` like this:\r\n\r\n    prepareStatement.setTimestamp(1, new Timestamp(utilDate.getTime()));\r\n\r\nFor more info, you can check [this question](https://stackoverflow.com/questions/2305973/java-util-date-vs-java-sql-date).\r\n","title":"How to convert java.util.Date to java.sql.Date?","body":"<p>Converting <code>java.util.Date</code> to <code>java.sql.Date</code> will lose hours, minutes and seconds. So if it is possible, I suggest you to use <code>java.sql.Timestamp</code> like this:</p>\n<pre><code>prepareStatement.setTimestamp(1, new Timestamp(utilDate.getTime()));\n</code></pre>\n<p>For more info, you can check <a href=\"https://stackoverflow.com/questions/2305973/java-util-date-vs-java-sql-date\">this question</a>.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":10,"up_vote_count":144,"is_accepted":true,"score":134,"last_activity_date":1659547402,"creation_date":1436158548,"answer_id":31238011,"question_id":530012,"body_markdown":"# tl;dr\r\n\r\n&gt;How to convert java.util.Date to java.sql.Date?\r\n\r\n**Dont.** \r\n\r\nBoth `Date` classes are outmoded. [Sun][1], [Oracle][2], and the [JCP][3] community gave up on those legacy date-time classes years ago with the unanimous adoption of [JSR 310][4] defining the *java.time* classes.\r\n\r\n - Use [*java.time*][5] classes instead of legacy `java.util.Date` &amp; `java.sql.Date` with JDBC 4.2 or later.\r\n - Convert to/from java.time if inter-operating with code not yet updated to java.time.\r\n\r\n| Legacy | Modern | Conversion |\r\n| --- | --- | --- |\r\n| `java.util.Date` | `java.time.Instant` | `java.util.Date.toInstant()`&lt;br /&gt;`java.util.Date.from( Instant )` |\r\n| `java.sql.Date` | `java.time.LocalDate` | `java.sql.Date.toLocalDate()`&lt;br /&gt;`java.sql.Date.valueOf( LocalDate )` |\r\n\r\nExample query with [`PreparedStatement`][6].\r\n\r\n    myPreparedStatement.setObject( \r\n         ,                                         // Specify the ordinal number of which argument in SQL statement.\r\n        myJavaUtilDate.toInstant()                  // Convert from legacy class `java.util.Date` (a moment in UTC) to a modern `java.time.Instant` (a moment in UTC).\r\n            .atZone( ZoneId.of( &quot;Africa/Tunis&quot; ) )  // Adjust from UTC to a particular time zone, to determine a date. Instantiating a `ZonedDateTime`.\r\n            .toLocalDate()                          // Extract a date-only `java.time.LocalDate` object from the date-time `ZonedDateTime` object.\r\n    )\r\n\r\nReplacements:\r\n\r\n - [`Instant`][7] instead of `java.util.Date`&lt;br /&gt;Both represent a moment in UTC. but now with nanoseconds instead of milliseconds.\r\n - [`LocalDate`][8] instead of `java.sql.Date`&lt;br /&gt;Both represent a date-only value without a time of day and without a time zone.\r\n\r\n\r\n\r\n# Details\r\n\r\n\r\nIf you are trying to work with date-only values (no time-of-day, no time zone), use the [`LocalDate`][9] class rather than [`java.util.Date`][10].\r\n\r\n[![Table of date-time types in Java (both legacy and modern) and in the SQL standard.][11]][11]\r\n\r\n# java.time\r\n\r\nIn Java 8 and later, the troublesome old date-time classes bundled with early versions of Java have been supplanted by the new [java.time package][12]. See [Oracle Tutorial](http://docs.oracle.com/javase/tutorial/datetime/TOC.html). Much of the functionality has been back-ported to Java 6 &amp; 7 in [ThreeTen-Backport](http://www.threeten.org/threetenbp/) and further adapted to Android in [ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP).\r\n\r\nA [SQL data type][13] `DATE` is meant to be date-only, with no time-of-day and no time zone. Java never had precisely such a class until [`java.time.LocalDate`][9] in Java 8. Let&#39;s create such a value by getting today&#39;s date according to a particular time zone (time zone is important in determining a date as a new day dawns earlier in Paris than in Montr&#233;al, for example).\r\n\r\n    LocalDate todayLocalDate = LocalDate.now( ZoneId.of( &quot;America/Montreal&quot; ) );  // Use proper &quot;continent/region&quot; time zone names; never use 3-4 letter codes like &quot;EST&quot; or &quot;IST&quot;.\r\n\r\nAt this point, we may be done. If your [JDBC driver][14] complies with [JDBC 4.2 spec][15], you should be able to pass a `LocalDate` via [`setObject`][16] on a [`PreparedStatement`][17] to store into a SQL DATE field. \r\n\r\n    myPreparedStatement.setObject( 1 , localDate );\r\n\r\nLikewise, use [`ResultSet::getObject`][18] to fetch from a SQL DATE column to a Java `LocalDate` object. Specifying the class in the second argument makes your code [type-safe][19].\r\n\r\n    LocalDate localDate = ResultSet.getObject( 1 , LocalDate.class );\r\n\r\nIn other words, **this entire Question is irrelevant under JDBC 4.2** or later.\r\n\r\nIf your JDBC driver does not perform in this manner, you need to fall back to converting to the java.sql types.\r\n\r\n# Convert to java.sql.Date\r\n\r\nTo convert, use new methods added to the old date-time classes. We can call [`java.sql.Date.valueOf()`][20] to convert a `LocalDate`.\r\n\r\n    java.sql.Date sqlDate = java.sql.Date.valueOf( todayLocalDate );\r\n\r\nAnd going the other direction.\r\n\r\n    LocalDate localDate = sqlDate.toLocalDate();\r\n\r\n# Converting from `java.util.Date`\r\n\r\nWhile you should avoid using the old date-time classes, you may be forced to when working with existing code. If so, you can convert to/from java.time. \r\n\r\nGo through the `Instant` class, which represents a moment on the timeline in UTC. An `Instant` is similar in idea to a `java.util.Date`. But note that `Instant` has a resolution up to [nanoseconds][21] while `java.util.Date` has only [milliseconds][22] resolution.\r\n\r\nTo convert, use new methods added to the old classes. For example, [`java.util.Date.from( Instant )`](http://docs.oracle.com/javase/8/docs/api/java/util/Date.html#from-java.time.Instant-) and [`java.util.Date::toInstant`](http://docs.oracle.com/javase/8/docs/api/java/util/Date.html#toInstant--).\r\n\r\n    Instant instant = myUtilDate.toInstant();\r\n\r\nTo determine a date, we need the context of a time zone. For any given moment, the date varies around the globe by time zone. Apply a [`ZoneId`][23] to get a [`ZonedDateTime`][24].\r\n\r\n    ZoneId zoneId = ZoneId.of ( &quot;America/Montreal&quot; );\r\n    ZonedDateTime zdt = ZonedDateTime.ofInstant ( instant , zoneId );\r\n    LocalDate localDate = zdt.toLocalDate();\r\n\r\n----------\r\n The java.sql.Date class pretends to be date-only without a time-of-day but actually *does* a time-of-day, adjusted to a midnight time. Confusing? Yes, the old date-time classes are a mess.\r\n\r\n\r\n----------\r\n\r\n# About *java.time*\r\n\r\nThe [*java.time*](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html) framework is built into Java 8 and later. These classes supplant the troublesome old [legacy](https://en.wikipedia.org/wiki/Legacy_system) date-time classes such as [`java.util.Date`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Date.html), [`Calendar`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Calendar.html), &amp; [`SimpleDateFormat`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/SimpleDateFormat.html).\r\n\r\nTo learn more, see the [*Oracle Tutorial*](http://docs.oracle.com/javase/tutorial/datetime/TOC.html). And search Stack Overflow for many examples and explanations. Specification is [JSR 310](https://jcp.org/en/jsr/detail?id=310).\r\n\r\nThe [*Joda-Time*](http://www.joda.org/joda-time/) project, now in [maintenance mode](https://en.wikipedia.org/wiki/Maintenance_mode), advises migration to the [java.time](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html) classes.\r\n\r\nYou may exchange *java.time* objects directly with your database. Use a [JDBC driver](https://en.wikipedia.org/wiki/JDBC_driver) compliant with [JDBC 4.2](http://openjdk.java.net/jeps/170) or later. No need for strings, no need for `java.sql.*` classes. Hibernate 5 &amp; JPA 2.2 support *java.time*. \r\n\r\nWhere to obtain the java.time classes? \r\n\r\n - [**Java SE 8**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8), [**Java SE 9**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9), [**Java SE 10**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_10), [**Java SE 11**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_11), and later  - Part of the standard Java API with a bundled implementation.\r\n   - [**Java 9**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9) brought some minor features and fixes.\r\n - [**Java SE 6**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6) and [**Java SE 7**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7)\r\n   - Most of the *java.time* functionality is back-ported to Java 6 &amp; 7 in [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/).\r\n - [**Android**](https://en.wikipedia.org/wiki/Android_(operating_system))\r\n   - Later versions of Android (26+) bundle implementations of the *java.time* classes.\r\n   - For earlier Android (&lt;26), a process known as [*API desugaring*](https://developer.android.com/studio/write/java8-support#library-desugaring) brings a [subset of the *java.time*](https://developer.android.com/studio/write/java8-support-table) functionality not originally built into Android.\r\n     - If the desugaring does not offer what you need, the [***ThreeTenABP***](https://github.com/JakeWharton/ThreeTenABP) project adapts [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/) (mentioned above) to Android. See [*How to use ThreeTenABP*](http://stackoverflow.com/q/38922754/642706).\r\n\r\n\r\n\r\n[![Table of which java.time library to use with which version of Java or Android][25]][25]\r\n\r\n\r\nThe [**ThreeTen-Extra**](http://www.threeten.org/threeten-extra/) project extends java.time with additional classes. This project is a proving ground for possible future additions to java.time. You may find some useful classes here such as [`Interval`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/Interval.html), [`YearWeek`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearWeek.html), [`YearQuarter`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearQuarter.html), and [more](http://www.threeten.org/threeten-extra/apidocs/index.html).\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Sun_Microsystems\r\n  [2]: https://en.wikipedia.org/wiki/Oracle\r\n  [3]: https://en.wikipedia.org/wiki/Java_Community_Process\r\n  [4]: https://jcp.org/en/jsr/detail?id=310\r\n  [5]: https://docs.oracle.com/javase/9/docs/api/java/time/package-summary.html\r\n  [6]: https://docs.oracle.com/javase/9/docs/api/java/sql/PreparedStatement.html\r\n  [7]: https://docs.oracle.com/javase/10/docs/api/java/time/Instant.html\r\n  [8]: https://docs.oracle.com/javase/10/docs/api/java/time/LocalDate.html\r\n  [9]: http://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\r\n  [10]: https://docs.oracle.com/javase/8/docs/api/java/util/Date.html\r\n  [11]: https://i.stack.imgur.com/bXtIS.png\r\n  [12]: http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\r\n  [13]: https://en.wikipedia.org/wiki/SQL#Data_types\r\n  [14]: https://en.wikipedia.org/wiki/JDBC_driver\r\n  [15]: https://www.jcp.org/en/jsr/detail?id=221\r\n  [16]: https://docs.oracle.com/javase/8/docs/api/java/sql/PreparedStatement.html#setObject-int-java.lang.Object-\r\n  [17]: https://docs.oracle.com/javase/8/docs/api/java/sql/PreparedStatement.html\r\n  [18]: https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html#getObject-int-java.lang.Class-\r\n  [19]: https://en.wikipedia.org/wiki/Type_safety\r\n  [20]: http://docs.oracle.com/javase/8/docs/api/java/sql/Date.html#valueOf-java.time.LocalDate-\r\n  [21]: https://en.wikipedia.org/wiki/Nanosecond\r\n  [22]: https://en.wikipedia.org/wiki/Millisecond\r\n  [23]: http://docs.oracle.com/javase/8/docs/api/java/time/ZoneId.html\r\n  [24]: http://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html\r\n  [25]: https://i.stack.imgur.com/Sksw9.png","title":"How to convert java.util.Date to java.sql.Date?","body":"<h1>tl;dr</h1>\n<blockquote>\n<p>How to convert java.util.Date to java.sql.Date?</p>\n</blockquote>\n<p><strong>Dont.</strong></p>\n<p>Both <code>Date</code> classes are outmoded. <a href=\"https://en.wikipedia.org/wiki/Sun_Microsystems\" rel=\"noreferrer\">Sun</a>, <a href=\"https://en.wikipedia.org/wiki/Oracle\" rel=\"noreferrer\">Oracle</a>, and the <a href=\"https://en.wikipedia.org/wiki/Java_Community_Process\" rel=\"noreferrer\">JCP</a> community gave up on those legacy date-time classes years ago with the unanimous adoption of <a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"noreferrer\">JSR 310</a> defining the <em>java.time</em> classes.</p>\n<ul>\n<li>Use <a href=\"https://docs.oracle.com/javase/9/docs/api/java/time/package-summary.html\" rel=\"noreferrer\"><em>java.time</em></a> classes instead of legacy <code>java.util.Date</code> &amp; <code>java.sql.Date</code> with JDBC 4.2 or later.</li>\n<li>Convert to/from java.time if inter-operating with code not yet updated to java.time.</li>\n</ul>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Legacy</th>\n<th>Modern</th>\n<th>Conversion</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>java.util.Date</code></td>\n<td><code>java.time.Instant</code></td>\n<td><code>java.util.Date.toInstant()</code><br /><code>java.util.Date.from( Instant )</code></td>\n</tr>\n<tr>\n<td><code>java.sql.Date</code></td>\n<td><code>java.time.LocalDate</code></td>\n<td><code>java.sql.Date.toLocalDate()</code><br /><code>java.sql.Date.valueOf( LocalDate )</code></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Example query with <a href=\"https://docs.oracle.com/javase/9/docs/api/java/sql/PreparedStatement.html\" rel=\"noreferrer\"><code>PreparedStatement</code></a>.</p>\n<pre><code>myPreparedStatement.setObject( \n     ,                                         // Specify the ordinal number of which argument in SQL statement.\n    myJavaUtilDate.toInstant()                  // Convert from legacy class `java.util.Date` (a moment in UTC) to a modern `java.time.Instant` (a moment in UTC).\n        .atZone( ZoneId.of( &quot;Africa/Tunis&quot; ) )  // Adjust from UTC to a particular time zone, to determine a date. Instantiating a `ZonedDateTime`.\n        .toLocalDate()                          // Extract a date-only `java.time.LocalDate` object from the date-time `ZonedDateTime` object.\n)\n</code></pre>\n<p>Replacements:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/10/docs/api/java/time/Instant.html\" rel=\"noreferrer\"><code>Instant</code></a> instead of <code>java.util.Date</code><br />Both represent a moment in UTC. but now with nanoseconds instead of milliseconds.</li>\n<li><a href=\"https://docs.oracle.com/javase/10/docs/api/java/time/LocalDate.html\" rel=\"noreferrer\"><code>LocalDate</code></a> instead of <code>java.sql.Date</code><br />Both represent a date-only value without a time of day and without a time zone.</li>\n</ul>\n<h1>Details</h1>\n<p>If you are trying to work with date-only values (no time-of-day, no time zone), use the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\" rel=\"noreferrer\"><code>LocalDate</code></a> class rather than <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Date.html\" rel=\"noreferrer\"><code>java.util.Date</code></a>.</p>\n<p><a href=\"https://i.stack.imgur.com/bXtIS.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/bXtIS.png\" alt=\"Table of date-time types in Java (both legacy and modern) and in the SQL standard.\" /></a></p>\n<h1>java.time</h1>\n<p>In Java 8 and later, the troublesome old date-time classes bundled with early versions of Java have been supplanted by the new <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\" rel=\"noreferrer\">java.time package</a>. See <a href=\"http://docs.oracle.com/javase/tutorial/datetime/TOC.html\" rel=\"noreferrer\">Oracle Tutorial</a>. Much of the functionality has been back-ported to Java 6 &amp; 7 in <a href=\"http://www.threeten.org/threetenbp/\" rel=\"noreferrer\">ThreeTen-Backport</a> and further adapted to Android in <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"noreferrer\">ThreeTenABP</a>.</p>\n<p>A <a href=\"https://en.wikipedia.org/wiki/SQL#Data_types\" rel=\"noreferrer\">SQL data type</a> <code>DATE</code> is meant to be date-only, with no time-of-day and no time zone. Java never had precisely such a class until <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\" rel=\"noreferrer\"><code>java.time.LocalDate</code></a> in Java 8. Let's create such a value by getting today's date according to a particular time zone (time zone is important in determining a date as a new day dawns earlier in Paris than in Montral, for example).</p>\n<pre><code>LocalDate todayLocalDate = LocalDate.now( ZoneId.of( &quot;America/Montreal&quot; ) );  // Use proper &quot;continent/region&quot; time zone names; never use 3-4 letter codes like &quot;EST&quot; or &quot;IST&quot;.\n</code></pre>\n<p>At this point, we may be done. If your <a href=\"https://en.wikipedia.org/wiki/JDBC_driver\" rel=\"noreferrer\">JDBC driver</a> complies with <a href=\"https://www.jcp.org/en/jsr/detail?id=221\" rel=\"noreferrer\">JDBC 4.2 spec</a>, you should be able to pass a <code>LocalDate</code> via <a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/PreparedStatement.html#setObject-int-java.lang.Object-\" rel=\"noreferrer\"><code>setObject</code></a> on a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/PreparedStatement.html\" rel=\"noreferrer\"><code>PreparedStatement</code></a> to store into a SQL DATE field.</p>\n<pre><code>myPreparedStatement.setObject( 1 , localDate );\n</code></pre>\n<p>Likewise, use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html#getObject-int-java.lang.Class-\" rel=\"noreferrer\"><code>ResultSet::getObject</code></a> to fetch from a SQL DATE column to a Java <code>LocalDate</code> object. Specifying the class in the second argument makes your code <a href=\"https://en.wikipedia.org/wiki/Type_safety\" rel=\"noreferrer\">type-safe</a>.</p>\n<pre><code>LocalDate localDate = ResultSet.getObject( 1 , LocalDate.class );\n</code></pre>\n<p>In other words, <strong>this entire Question is irrelevant under JDBC 4.2</strong> or later.</p>\n<p>If your JDBC driver does not perform in this manner, you need to fall back to converting to the java.sql types.</p>\n<h1>Convert to java.sql.Date</h1>\n<p>To convert, use new methods added to the old date-time classes. We can call <a href=\"http://docs.oracle.com/javase/8/docs/api/java/sql/Date.html#valueOf-java.time.LocalDate-\" rel=\"noreferrer\"><code>java.sql.Date.valueOf()</code></a> to convert a <code>LocalDate</code>.</p>\n<pre><code>java.sql.Date sqlDate = java.sql.Date.valueOf( todayLocalDate );\n</code></pre>\n<p>And going the other direction.</p>\n<pre><code>LocalDate localDate = sqlDate.toLocalDate();\n</code></pre>\n<h1>Converting from <code>java.util.Date</code></h1>\n<p>While you should avoid using the old date-time classes, you may be forced to when working with existing code. If so, you can convert to/from java.time.</p>\n<p>Go through the <code>Instant</code> class, which represents a moment on the timeline in UTC. An <code>Instant</code> is similar in idea to a <code>java.util.Date</code>. But note that <code>Instant</code> has a resolution up to <a href=\"https://en.wikipedia.org/wiki/Nanosecond\" rel=\"noreferrer\">nanoseconds</a> while <code>java.util.Date</code> has only <a href=\"https://en.wikipedia.org/wiki/Millisecond\" rel=\"noreferrer\">milliseconds</a> resolution.</p>\n<p>To convert, use new methods added to the old classes. For example, <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Date.html#from-java.time.Instant-\" rel=\"noreferrer\"><code>java.util.Date.from( Instant )</code></a> and <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Date.html#toInstant--\" rel=\"noreferrer\"><code>java.util.Date::toInstant</code></a>.</p>\n<pre><code>Instant instant = myUtilDate.toInstant();\n</code></pre>\n<p>To determine a date, we need the context of a time zone. For any given moment, the date varies around the globe by time zone. Apply a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/ZoneId.html\" rel=\"noreferrer\"><code>ZoneId</code></a> to get a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html\" rel=\"noreferrer\"><code>ZonedDateTime</code></a>.</p>\n<pre><code>ZoneId zoneId = ZoneId.of ( &quot;America/Montreal&quot; );\nZonedDateTime zdt = ZonedDateTime.ofInstant ( instant , zoneId );\nLocalDate localDate = zdt.toLocalDate();\n</code></pre>\n<hr />\n<p> The java.sql.Date class pretends to be date-only without a time-of-day but actually <em>does</em> a time-of-day, adjusted to a midnight time. Confusing? Yes, the old date-time classes are a mess.</p>\n<hr />\n<h1>About <em>java.time</em></h1>\n<p>The <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html\" rel=\"noreferrer\"><em>java.time</em></a> framework is built into Java 8 and later. These classes supplant the troublesome old <a href=\"https://en.wikipedia.org/wiki/Legacy_system\" rel=\"noreferrer\">legacy</a> date-time classes such as <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Date.html\" rel=\"noreferrer\"><code>java.util.Date</code></a>, <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Calendar.html\" rel=\"noreferrer\"><code>Calendar</code></a>, &amp; <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/SimpleDateFormat.html\" rel=\"noreferrer\"><code>SimpleDateFormat</code></a>.</p>\n<p>To learn more, see the <a href=\"http://docs.oracle.com/javase/tutorial/datetime/TOC.html\" rel=\"noreferrer\"><em>Oracle Tutorial</em></a>. And search Stack Overflow for many examples and explanations. Specification is <a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"noreferrer\">JSR 310</a>.</p>\n<p>The <a href=\"http://www.joda.org/joda-time/\" rel=\"noreferrer\"><em>Joda-Time</em></a> project, now in <a href=\"https://en.wikipedia.org/wiki/Maintenance_mode\" rel=\"noreferrer\">maintenance mode</a>, advises migration to the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html\" rel=\"noreferrer\">java.time</a> classes.</p>\n<p>You may exchange <em>java.time</em> objects directly with your database. Use a <a href=\"https://en.wikipedia.org/wiki/JDBC_driver\" rel=\"noreferrer\">JDBC driver</a> compliant with <a href=\"http://openjdk.java.net/jeps/170\" rel=\"noreferrer\">JDBC 4.2</a> or later. No need for strings, no need for <code>java.sql.*</code> classes. Hibernate 5 &amp; JPA 2.2 support <em>java.time</em>.</p>\n<p>Where to obtain the java.time classes?</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\" rel=\"noreferrer\"><strong>Java SE 8</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9\" rel=\"noreferrer\"><strong>Java SE 9</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_10\" rel=\"noreferrer\"><strong>Java SE 10</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_11\" rel=\"noreferrer\"><strong>Java SE 11</strong></a>, and later  - Part of the standard Java API with a bundled implementation.\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9\" rel=\"noreferrer\"><strong>Java 9</strong></a> brought some minor features and fixes.</li>\n</ul>\n</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6\" rel=\"noreferrer\"><strong>Java SE 6</strong></a> and <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7\" rel=\"noreferrer\"><strong>Java SE 7</strong></a>\n<ul>\n<li>Most of the <em>java.time</em> functionality is back-ported to Java 6 &amp; 7 in <a href=\"http://www.threeten.org/threetenbp/\" rel=\"noreferrer\"><em><strong>ThreeTen-Backport</strong></em></a>.</li>\n</ul>\n</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Android_(operating_system)\" rel=\"noreferrer\"><strong>Android</strong></a>\n<ul>\n<li>Later versions of Android (26+) bundle implementations of the <em>java.time</em> classes.</li>\n<li>For earlier Android (&lt;26), a process known as <a href=\"https://developer.android.com/studio/write/java8-support#library-desugaring\" rel=\"noreferrer\"><em>API desugaring</em></a> brings a <a href=\"https://developer.android.com/studio/write/java8-support-table\" rel=\"noreferrer\">subset of the <em>java.time</em></a> functionality not originally built into Android.\n<ul>\n<li>If the desugaring does not offer what you need, the <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"noreferrer\"><em><strong>ThreeTenABP</strong></em></a> project adapts <a href=\"http://www.threeten.org/threetenbp/\" rel=\"noreferrer\"><em><strong>ThreeTen-Backport</strong></em></a> (mentioned above) to Android. See <a href=\"http://stackoverflow.com/q/38922754/642706\"><em>How to use ThreeTenABP</em></a>.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/Sksw9.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Sksw9.png\" alt=\"Table of which java.time library to use with which version of Java or Android\" /></a></p>\n<p>The <a href=\"http://www.threeten.org/threeten-extra/\" rel=\"noreferrer\"><strong>ThreeTen-Extra</strong></a> project extends java.time with additional classes. This project is a proving ground for possible future additions to java.time. You may find some useful classes here such as <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/Interval.html\" rel=\"noreferrer\"><code>Interval</code></a>, <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearWeek.html\" rel=\"noreferrer\"><code>YearWeek</code></a>, <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearQuarter.html\" rel=\"noreferrer\"><code>YearQuarter</code></a>, and <a href=\"http://www.threeten.org/threeten-extra/apidocs/index.html\" rel=\"noreferrer\">more</a>.</p>\n"},{"tags":[],"owner":{"account_id":7450125,"reputation":57,"user_id":5665201,"display_name":"hackfield"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1455634734,"creation_date":1455632934,"answer_id":35435182,"question_id":530012,"body_markdown":"Format your java.util.Date first. Then use the formatted date to get the date in java.sql.Date\r\n\r\n    java.util.Date utilDate = &quot;Your date&quot;\r\n    SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\r\n\tfinal String stringDate= dateFormat.format(utilDate);\r\n    final java.sql.Date sqlDate=  java.sql.Date.valueOf(stringDate);","title":"How to convert java.util.Date to java.sql.Date?","body":"<p>Format your java.util.Date first. Then use the formatted date to get the date in java.sql.Date</p>\n\n<pre><code>java.util.Date utilDate = \"Your date\"\nSimpleDateFormat dateFormat = new SimpleDateFormat(\"yyyy-MM-dd\");\nfinal String stringDate= dateFormat.format(utilDate);\nfinal java.sql.Date sqlDate=  java.sql.Date.valueOf(stringDate);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8012152,"reputation":1,"user_id":6043502,"display_name":"user6043502"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1458754555,"creation_date":1457596116,"answer_id":35910504,"question_id":530012,"body_markdown":"I think the best way to convert is:\r\n\r\n    static java.sql.Timestamp SQLDateTime(Long utilDate) {\r\n        return new java.sql.Timestamp(utilDate);\r\n    }\r\n\r\n    Date date = new Date();\r\n    java.sql.Timestamp dt = SQLDateTime(date.getTime());\r\n\r\nIf you want to insert the `dt` variable into an SQL table you can do:\r\n\r\n    insert into table (expireAt) values (&#39;&quot;+dt+&quot;&#39;);\r\n","title":"How to convert java.util.Date to java.sql.Date?","body":"<p>I think the best way to convert is:</p>\n\n<pre><code>static java.sql.Timestamp SQLDateTime(Long utilDate) {\n    return new java.sql.Timestamp(utilDate);\n}\n\nDate date = new Date();\njava.sql.Timestamp dt = SQLDateTime(date.getTime());\n</code></pre>\n\n<p>If you want to insert the <code>dt</code> variable into an SQL table you can do:</p>\n\n<pre><code>insert into table (expireAt) values ('\"+dt+\"');\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8711464,"reputation":21,"user_id":6517507,"display_name":"PKSawmy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1467015324,"creation_date":1467015324,"answer_id":38048908,"question_id":530012,"body_markdown":"I am a novice: after much running around this worked.  Thought might be useful\r\n\r\n\r\n         String bufDt =  bDOB.getText();  //data from form\r\n         DateFormat dF = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;); //data in form is in this format\r\n         Date bbdt = (Date)dF.parse(bufDt);  // string data is converted into java util date\r\n         DateFormat dsF = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;); //converted date is reformatted for conversion to sql.date\r\n         String ndt = dsF.format(bbdt); // java util date is converted to compatible java sql date\r\n         java.sql.Date sqlDate=  java.sql.Date.valueOf(ndt);  // finally data from the form is convered to java sql. date for placing in database","title":"How to convert java.util.Date to java.sql.Date?","body":"<p>I am a novice: after much running around this worked.  Thought might be useful</p>\n\n<pre><code>     String bufDt =  bDOB.getText();  //data from form\n     DateFormat dF = new SimpleDateFormat(\"dd-MM-yyyy\"); //data in form is in this format\n     Date bbdt = (Date)dF.parse(bufDt);  // string data is converted into java util date\n     DateFormat dsF = new SimpleDateFormat(\"yyyy-MM-dd\"); //converted date is reformatted for conversion to sql.date\n     String ndt = dsF.format(bbdt); // java util date is converted to compatible java sql date\n     java.sql.Date sqlDate=  java.sql.Date.valueOf(ndt);  // finally data from the form is convered to java sql. date for placing in database\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8341549,"reputation":52,"user_id":6266722,"accept_rate":40,"display_name":"PONRAJ"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1472213016,"creation_date":1472209245,"answer_id":39164744,"question_id":530012,"body_markdown":"I was trying the following coding that worked fine.\r\n\r\n&gt;   java.util.Date utilDate = new java.util.Date();&lt;br&gt; java.sql.Date\r\n&gt; sqlDate = new java.sql.Date(utilDate);","title":"How to convert java.util.Date to java.sql.Date?","body":"<p>I was trying the following coding that worked fine.</p>\n\n<blockquote>\n  <p>java.util.Date utilDate = new java.util.Date();<br> java.sql.Date\n  sqlDate = new java.sql.Date(utilDate);</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":8017543,"reputation":2493,"user_id":6047274,"display_name":"jack jay"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1473430833,"creation_date":1473430833,"answer_id":39413772,"question_id":530012,"body_markdown":"In my case of picking date from JXDatePicker (java calender) and getting it stored in database as SQL Date type, below works fine ..\r\n\r\n`java.sql.Date date = new java.sql.Date(pickedDate.getDate().getTime());`\r\n\r\nwhere pickedDate is object of JXDatePicker\r\n","title":"How to convert java.util.Date to java.sql.Date?","body":"<p>In my case of picking date from JXDatePicker (java calender) and getting it stored in database as SQL Date type, below works fine ..</p>\n\n<p><code>java.sql.Date date = new java.sql.Date(pickedDate.getDate().getTime());</code></p>\n\n<p>where pickedDate is object of JXDatePicker</p>\n"}],"owner":{"account_id":1823,"reputation":12659,"user_id":2504,"accept_rate":100,"display_name":"David Ackerman"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":771420,"favorite_count":0,"down_vote_count":0,"up_vote_count":514,"accepted_answer_id":31238011,"answer_count":17,"score":514,"last_activity_date":1659547402,"creation_date":1234214178,"question_id":530012,"body_markdown":"I am trying to use a [`java.util.Date`][1] as input and then creating a query with it - so I need a [`java.sql.Date`][2].  \r\n\r\nI was surprised to find that it couldn&#39;t do the conversion implicitly or explicitly - but I don&#39;t even know how I would do this, as the Java API is still fairly new to me.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/Date.html\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/sql/Date.html","title":"How to convert java.util.Date to java.sql.Date?","body":"<p>I am trying to use a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Date.html\" rel=\"noreferrer\"><code>java.util.Date</code></a> as input and then creating a query with it - so I need a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/sql/Date.html\" rel=\"noreferrer\"><code>java.sql.Date</code></a>.  </p>\n\n<p>I was surprised to find that it couldn't do the conversion implicitly or explicitly - but I don't even know how I would do this, as the Java API is still fairly new to me.</p>\n"},{"tags":["java","trigonometry"],"answers":[{"tags":[],"owner":{"account_id":4152794,"reputation":233,"user_id":3404748,"accept_rate":64,"display_name":"John Conner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1405270090,"creation_date":1405270090,"answer_id":24725007,"question_id":24723941,"body_markdown":"Alright figured it out :)\r\n\r\nI didn&#39;t even need rotate what I did was get the current degrees for that letter and add 90 to it...Apparently I was overcomplicating it\r\n\r\nHere is the working loop\r\n\r\n    // Place text in a circular pattern\r\n\tint i = 0;\r\n\tdouble degree = 360 / phrase.length();\r\n\tFont font = new Font(&quot;Times Roman&quot;, textSize);\r\n\tfor (double degrees = 0; i &lt; phrase.length(); i++, degrees += degree) {\r\n\t\tdouble pointX = circle.getCenterX() + circle.getRadius() *\r\n\t\t\tMath.cos(Math.toRadians(degrees));\r\n\t\tdouble pointY = circle.getCenterY() + circle.getRadius() *\r\n\t\t\tMath.sin(Math.toRadians(degrees));\r\n\t\tText letter = new Text(pointX, pointY, phrase.charAt(i) + &quot;&quot;);\r\n\t\tletter.setFont(font);\r\n\t\tletter.setRotate(degrees + 90);\r\n\t\tgetChildren().add(letter);\r\n\t}","title":"Need help revising a simple formula to make it universal","body":"<p>Alright figured it out :)</p>\n\n<p>I didn't even need rotate what I did was get the current degrees for that letter and add 90 to it...Apparently I was overcomplicating it</p>\n\n<p>Here is the working loop</p>\n\n<pre><code>// Place text in a circular pattern\nint i = 0;\ndouble degree = 360 / phrase.length();\nFont font = new Font(\"Times Roman\", textSize);\nfor (double degrees = 0; i &lt; phrase.length(); i++, degrees += degree) {\n    double pointX = circle.getCenterX() + circle.getRadius() *\n        Math.cos(Math.toRadians(degrees));\n    double pointY = circle.getCenterY() + circle.getRadius() *\n        Math.sin(Math.toRadians(degrees));\n    Text letter = new Text(pointX, pointY, phrase.charAt(i) + \"\");\n    letter.setFont(font);\n    letter.setRotate(degrees + 90);\n    getChildren().add(letter);\n}\n</code></pre>\n"}],"owner":{"account_id":4152794,"reputation":233,"user_id":3404748,"accept_rate":64,"display_name":"John Conner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1659547017,"creation_date":1405263222,"question_id":24723941,"body_markdown":"I am trying to perform a calculation for my program that will allow me to have each letter rotated to face towards the center coordinates of a circle....\r\n\r\nThe number of characters I am working with is 16 but I want this algorithm to work with any number of letters wrapping around a circle of any size, the positions of the letters have already been set within a loop that places them in the correct positions.\r\n\r\n    The formula I have goes something like this\r\n    degree = 360 / phrase.length() -&gt; where phrase.length() is 16\r\n    rotate = 360 / (phrase.length() - degree\r\n    \r\n    This is where I set the rotation\r\n    degrees = degree\r\n    Letter.setRotate((degrees + rotate) - (205));\r\n    degrees = degrees + degree\r\n    the next letter is then set using the Letter.setRotate((degrees + rotate) - (205)\r\n    this goes on and on until each letter is printed and rotated\r\n\r\nUsing the above formula the letters print out facing the center, but what is a better way of doing this that will allow me to use this for an unknown phrase length?\r\n\r\nBelow is the loop that I have created so far, even without programming experience you may be able to understand most of it...at least equation portions\r\n\r\n\t// Place text in a circular pattern\r\n\tint i = 0;\r\n\tdouble degree = 360 / phrase.length(), rotate = 360 / (phrase.length() - degree);\r\n\tFont font = new Font(&quot;Times Roman&quot;, textSize);\r\n\tfor (double degrees = 0; i &lt; phrase.length(); i++, degrees += degree) {\r\n\t\tdouble pointX = circle.getCenterX() + circle.getRadius() *\r\n\t\t\tMath.cos(Math.toRadians(degrees));\r\n\t\tdouble pointY = circle.getCenterY() + circle.getRadius() *\r\n\t\t\tMath.sin(Math.toRadians(degrees));\r\n\t\tText letter = new Text(pointX, pointY, phrase.charAt(i) + &quot;&quot;);\r\n\t\tletter.setFont(font);\r\n\t\tletter.setRotate((degrees + rotate) - (205));\r\n\t\tgetChildren().add(letter);\r\n\t}\r\n","title":"Need help revising a simple formula to make it universal","body":"<p>I am trying to perform a calculation for my program that will allow me to have each letter rotated to face towards the center coordinates of a circle....</p>\n\n<p>The number of characters I am working with is 16 but I want this algorithm to work with any number of letters wrapping around a circle of any size, the positions of the letters have already been set within a loop that places them in the correct positions.</p>\n\n<pre><code>The formula I have goes something like this\ndegree = 360 / phrase.length() -&gt; where phrase.length() is 16\nrotate = 360 / (phrase.length() - degree\n\nThis is where I set the rotation\ndegrees = degree\nLetter.setRotate((degrees + rotate) - (205));\ndegrees = degrees + degree\nthe next letter is then set using the Letter.setRotate((degrees + rotate) - (205)\nthis goes on and on until each letter is printed and rotated\n</code></pre>\n\n<p>Using the above formula the letters print out facing the center, but what is a better way of doing this that will allow me to use this for an unknown phrase length?</p>\n\n<p>Below is the loop that I have created so far, even without programming experience you may be able to understand most of it...at least equation portions</p>\n\n<pre><code>// Place text in a circular pattern\nint i = 0;\ndouble degree = 360 / phrase.length(), rotate = 360 / (phrase.length() - degree);\nFont font = new Font(\"Times Roman\", textSize);\nfor (double degrees = 0; i &lt; phrase.length(); i++, degrees += degree) {\n    double pointX = circle.getCenterX() + circle.getRadius() *\n        Math.cos(Math.toRadians(degrees));\n    double pointY = circle.getCenterY() + circle.getRadius() *\n        Math.sin(Math.toRadians(degrees));\n    Text letter = new Text(pointX, pointY, phrase.charAt(i) + \"\");\n    letter.setFont(font);\n    letter.setRotate((degrees + rotate) - (205));\n    getChildren().add(letter);\n}\n</code></pre>\n"},{"tags":["java","netbeans"],"comments":[{"owner":{"account_id":7630925,"reputation":618,"user_id":5786007,"accept_rate":80,"display_name":"Reece"},"score":1,"creation_date":1659401545,"post_id":73200832,"comment_id":129280986,"body_markdown":"Your case for a user entering `3` on the main menu calls a method called `selectStudents` - while your sub menu is in another method called `studentSubMenu`. You aren&#39;t actually invoking `studentSubMenu` anywhere in your menu.","body":"Your case for a user entering <code>3</code> on the main menu calls a method called <code>selectStudents</code> - while your sub menu is in another method called <code>studentSubMenu</code>. You aren&#39;t actually invoking <code>studentSubMenu</code> anywhere in your menu."}],"answers":[{"tags":[],"owner":{"account_id":7630925,"reputation":618,"user_id":5786007,"accept_rate":80,"display_name":"Reece"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659546823,"creation_date":1659402239,"answer_id":73200980,"question_id":73200832,"body_markdown":"Expanding on my comment:\r\n\r\nThe issue here is that the case you have written for handling the input of `3` in the `menu` method calls another method called `selectStudents`.\r\n\r\nThis is not the method containing your sub menu logic. That method you have named `studentSubMenu`. This means that if the desired behavior of a user entering `3` is them being shown the sub menu, this won&#39;t occur unless `studentSubMenu` is either called directly in the `else if (input == 3)` block, or by `selectStudents` itself.\r\n\r\nYour logic in `menu` could look something like:\r\n\r\n```Java\r\n} else if (input == 3) {\r\n    int student = selectStudents();\r\n    studentSubMenu(student);\r\n}\r\n```","title":"Adding a submenu to menu","body":"<p>Expanding on my comment:</p>\n<p>The issue here is that the case you have written for handling the input of <code>3</code> in the <code>menu</code> method calls another method called <code>selectStudents</code>.</p>\n<p>This is not the method containing your sub menu logic. That method you have named <code>studentSubMenu</code>. This means that if the desired behavior of a user entering <code>3</code> is them being shown the sub menu, this won't occur unless <code>studentSubMenu</code> is either called directly in the <code>else if (input == 3)</code> block, or by <code>selectStudents</code> itself.</p>\n<p>Your logic in <code>menu</code> could look something like:</p>\n<pre><code>} else if (input == 3) {\n    int student = selectStudents();\n    studentSubMenu(student);\n}\n</code></pre>\n"}],"owner":{"account_id":25704364,"reputation":3,"user_id":19463921,"display_name":"marii"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1659460683,"accepted_answer_id":73200980,"answer_count":1,"score":0,"last_activity_date":1659546823,"creation_date":1659400309,"question_id":73200832,"body_markdown":"I am having trouble getting my submenu to show up when I select input 3)Select Students in my main menu. \r\nAny help fixing this is greatly appreciated, Thank you!\r\n\r\n here is the main menu (shows up first when I run the code)\r\n\r\n     public void menu() throws ClassNotFoundException, IOException {\r\n        Scanner sc = new Scanner(System.in);\r\n        int input;\r\n        do {\r\n            System.out.println(&quot;1) Populate Students&quot;);\r\n            System.out.println(&quot;2) Load Students from file&quot;);\r\n            System.out.println(&quot;3) Select Students&quot;);\r\n            System.out.println(&quot;4) Show Students&quot;);\r\n            System.out.println(&quot;5) Save Students to file&quot;);\r\n            System.out.println(&quot;6) Exit&quot;);\r\n            input = Integer.parseInt(sc.next());\r\n            if (input == 1) \r\n            {\r\n                populateStudents();\r\n            } else if (input == 2) {\r\n                loadStudents();\r\n            } else if (input == 3) {\r\n                selectStudents();\r\n            } else if (input == 4) {\r\n                showStudents();\r\n            } else if (input == 5) {\r\n                saveStudents();\r\n            }\r\n        } while (input != 6);\r\n\r\n    }\r\n   \r\nThis is my sub menu code, I want to be able to select input 3 from the main menu and call this sub menu to then select from. \r\n```\r\n    public void studentSubMenu(int i) throws IOException, ClassNotFoundException\r\n    { \r\n        System.out.println(&quot;Student Menu, select an option&quot;);\r\n   int input = 0;\r\n \r\n   while(input != 5)\r\n   {\r\n            System.out.println(&quot;1) Calculate Average&quot;);\r\n            System.out.println(&quot;2) Calculate Weighted Average&quot;);\r\n            System.out.println(&quot;3) Determine Letter Grade&quot;);\r\n            System.out.println(&quot;4) Display Students info&quot;);\r\n            System.out.println(&quot;5) GO BACK&quot;);\r\n          Scanner sc = new Scanner(System.in);\r\n          input=sc.nextInt();\r\n        \r\n            if (input == 1) \r\n            {\r\n               myStudents[i].calcAvg();\r\n            } \r\n            if (input == 2) \r\n            {\r\n                 myStudents[i].calcAvg(.7, .3);\r\n            } \r\n            if (input == 3) \r\n            {\r\n                myStudents[i].calcLetterGrade();\r\n            } \r\n            if (input == 4) \r\n            {\r\n                 myStudents[i].displayStudent();\r\n            } else if (input == 5) {\r\n                menu();\r\n            }\r\n             \r\n         }                \r\n\r\n    ","title":"Adding a submenu to menu","body":"<p>I am having trouble getting my submenu to show up when I select input 3)Select Students in my main menu.\nAny help fixing this is greatly appreciated, Thank you!</p>\n<p>here is the main menu (shows up first when I run the code)</p>\n<pre><code> public void menu() throws ClassNotFoundException, IOException {\n    Scanner sc = new Scanner(System.in);\n    int input;\n    do {\n        System.out.println(&quot;1) Populate Students&quot;);\n        System.out.println(&quot;2) Load Students from file&quot;);\n        System.out.println(&quot;3) Select Students&quot;);\n        System.out.println(&quot;4) Show Students&quot;);\n        System.out.println(&quot;5) Save Students to file&quot;);\n        System.out.println(&quot;6) Exit&quot;);\n        input = Integer.parseInt(sc.next());\n        if (input == 1) \n        {\n            populateStudents();\n        } else if (input == 2) {\n            loadStudents();\n        } else if (input == 3) {\n            selectStudents();\n        } else if (input == 4) {\n            showStudents();\n        } else if (input == 5) {\n            saveStudents();\n        }\n    } while (input != 6);\n\n}\n</code></pre>\n<p>This is my sub menu code, I want to be able to select input 3 from the main menu and call this sub menu to then select from.</p>\n<pre><code>    public void studentSubMenu(int i) throws IOException, ClassNotFoundException\n    { \n        System.out.println(&quot;Student Menu, select an option&quot;);\n   int input = 0;\n \n   while(input != 5)\n   {\n            System.out.println(&quot;1) Calculate Average&quot;);\n            System.out.println(&quot;2) Calculate Weighted Average&quot;);\n            System.out.println(&quot;3) Determine Letter Grade&quot;);\n            System.out.println(&quot;4) Display Students info&quot;);\n            System.out.println(&quot;5) GO BACK&quot;);\n          Scanner sc = new Scanner(System.in);\n          input=sc.nextInt();\n        \n            if (input == 1) \n            {\n               myStudents[i].calcAvg();\n            } \n            if (input == 2) \n            {\n                 myStudents[i].calcAvg(.7, .3);\n            } \n            if (input == 3) \n            {\n                myStudents[i].calcLetterGrade();\n            } \n            if (input == 4) \n            {\n                 myStudents[i].displayStudent();\n            } else if (input == 5) {\n                menu();\n            }\n             \n         }                \n\n    \n</code></pre>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":21962515,"reputation":331,"user_id":16240219,"display_name":"Salman Shaikh"},"score":0,"creation_date":1659552648,"post_id":73224561,"comment_id":129324028,"body_markdown":"the only one thing is  whenever you click on button it submits a data,  so you need to disable the  button after clicking once","body":"the only one thing is  whenever you click on button it submits a data,  so you need to disable the  button after clicking once"},{"owner":{"account_id":21962515,"reputation":331,"user_id":16240219,"display_name":"Salman Shaikh"},"score":0,"creation_date":1659553021,"post_id":73224561,"comment_id":129324156,"body_markdown":"check this one https://stackoverflow.com/questions/9838838/disable-button-on-click","body":"check this one <a href=\"https://stackoverflow.com/questions/9838838/disable-button-on-click\" title=\"disable button on click\">stackoverflow.com/questions/9838838/disable-button-on-click</a>"},{"owner":{"account_id":17032910,"reputation":41,"user_id":12322670,"display_name":"Muratcan Yldz"},"score":0,"creation_date":1659573020,"post_id":73224561,"comment_id":129328926,"body_markdown":"@SalmanShaikh If I disable the button, how will the user send a message? When I press the send message button, it sends the data.","body":"@SalmanShaikh If I disable the button, how will the user send a message? When I press the send message button, it sends the data."},{"owner":{"account_id":21962515,"reputation":331,"user_id":16240219,"display_name":"Salman Shaikh"},"score":0,"creation_date":1659589276,"post_id":73224561,"comment_id":129331296,"body_markdown":"Disable button after clicking once","body":"Disable button after clicking once"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1659598163,"post_id":73224561,"comment_id":129333554,"body_markdown":"I&#39;m not sure I understand. What exactly in this code doesn&#39;t work the way you expect?\nTell us what is wrong with shared code. Do you have any errors?","body":"I&#39;m not sure I understand. What exactly in this code doesn&#39;t work the way you expect? Tell us what is wrong with shared code. Do you have any errors?"},{"owner":{"account_id":17032910,"reputation":41,"user_id":12322670,"display_name":"Muratcan Yldz"},"score":0,"creation_date":1659621036,"post_id":73224561,"comment_id":129342016,"body_markdown":"@AlexMamo the code is working. It&#39;s just too costly.","body":"@AlexMamo the code is working. It&#39;s just too costly."},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1659621195,"post_id":73224561,"comment_id":129342080,"body_markdown":"What do you mean too costly?","body":"What do you mean too costly?"},{"owner":{"account_id":17032910,"reputation":41,"user_id":12322670,"display_name":"Muratcan Yldz"},"score":0,"creation_date":1659621613,"post_id":73224561,"comment_id":129342255,"body_markdown":"@AlexMamo  Because every time I press the send message button, it sends data to firebase.","body":"@AlexMamo  Because every time I press the send message button, it sends data to firebase."},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1659685800,"post_id":73224561,"comment_id":129357605,"body_markdown":"This is Realtime Database&#39;s billing mechanism. Maybe, you should try using [Cloud Firestore](https://firebase.google.com/docs/firestore).","body":"This is Realtime Database&#39;s billing mechanism. Maybe, you should try using <a href=\"https://firebase.google.com/docs/firestore\" rel=\"nofollow noreferrer\">Cloud Firestore</a>."}],"owner":{"account_id":17032910,"reputation":41,"user_id":12322670,"display_name":"Muratcan Yldz"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1659546164,"creation_date":1659543302,"question_id":73224561,"body_markdown":"I have a mobile app where users can talk to each other. I am using firebase real time database in my application.  In the application, I keep and show the total number of people the users are talking to. My method is to send the uid of that user to the &quot;Contact&quot; table when each user presses the send message button in the chat. This method is very costly. Because every time I press the send message button, it sends data to firebase. Is there a better method?\r\n\r\n\r\n\r\n```\r\nContactRef = FirebaseDatabase.getInstance().getReference().child(&quot;Contact&quot;);\r\n\r\nprivate void SendMessage() {\r\n    DatabaseReference reference = FirebaseDatabase.getInstance().getReference();\r\n    final String messageText = messagenputtext.getText().toString();\r\n\r\n    if (TextUtils.isEmpty(messageText)){\r\n\r\n    }\r\n    else {\r\n        String messagesenderref =&quot;message/&quot; + messageSenderID + &quot;/&quot; + messageReceiverID;\r\n        String messagereceiverref =&quot;message/&quot; + messageReceiverID + &quot;/&quot; + messageSenderID;\r\n\r\n        DatabaseReference usermessagekeyref = Rootref.child(&quot;message&quot;)\r\n                .child(messageSenderID).child(messageReceiverID).push();\r\n        String messagepushid = usermessagekeyref.getKey();\r\n\r\n\r\n        Map messageTextBody = new HashMap();\r\n        messageTextBody.put(&quot;message&quot; , messageText);\r\n        messageTextBody.put(&quot;time&quot; , saveCurrentTime);\r\n        messageTextBody.put(&quot;date&quot; , saveCurrentDate);\r\n        messageTextBody.put(&quot;type&quot; , &quot;text&quot;);\r\n        messageTextBody.put(&quot;from&quot; , messageSenderID);\r\n\r\n\r\n        Map messageBodyDetails = new HashMap();\r\n        messageBodyDetails.put(messagesenderref + &quot;/&quot; + messagepushid , messageTextBody);\r\n        messageBodyDetails.put(messagereceiverref + &quot;/&quot; + messagepushid , messageTextBody);\r\n\r\n        Rootref.updateChildren(messageBodyDetails).addOnCompleteListener(new OnCompleteListener() {\r\n            @Override\r\n            public void onComplete(@NonNull Task task) {\r\n                if (task.isSuccessful()){\r\n\r\n                }\r\n                else {\r\n                    String message = task.getException().getMessage();\r\n                    Toast.makeText(context, &quot;Error :&quot; + message , Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n        });\r\n\r\n        Map messageTextBody3 = new HashMap();\r\n        messageTextBody3.put(&quot;Contact&quot;, &quot;1&quot;);\r\n        ContactRef.child(messageSenderID).child(messageReceiverID).updateChildren(messageTextBody3).addOnCompleteListener(new OnCompleteListener() {\r\n            @Override\r\n            public void onComplete(@NonNull Task task) {\r\n                if (task.isSuccessful()){\r\n                }\r\n            }\r\n        });\r\n\r\n        ContactRef.child(messageReceiverID).child(messageSenderID).updateChildren(messageTextBody3).addOnCompleteListener(new OnCompleteListener() {\r\n            @Override\r\n            public void onComplete(@NonNull Task task) {\r\n                if (task.isSuccessful()){\r\n                }\r\n            }\r\n        });\r\n```\r\n\r\nContact list count:\r\n```\r\nContactRef.addListenerForSingleValueEvent(new ValueEventListener() {\r\n    @Override\r\n    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n\r\n        countusercontact = (int) dataSnapshot.getChildrenCount();\r\n        contactcount.setText(Integer.toString(countusercontact ));\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n    }\r\n});\r\n```\r\n\r\nDb:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JoySF.jpg","title":"How can I keep the total number of people the user is talking to?","body":"<p>I have a mobile app where users can talk to each other. I am using firebase real time database in my application.  In the application, I keep and show the total number of people the users are talking to. My method is to send the uid of that user to the &quot;Contact&quot; table when each user presses the send message button in the chat. This method is very costly. Because every time I press the send message button, it sends data to firebase. Is there a better method?</p>\n<pre><code>ContactRef = FirebaseDatabase.getInstance().getReference().child(&quot;Contact&quot;);\n\nprivate void SendMessage() {\n    DatabaseReference reference = FirebaseDatabase.getInstance().getReference();\n    final String messageText = messagenputtext.getText().toString();\n\n    if (TextUtils.isEmpty(messageText)){\n\n    }\n    else {\n        String messagesenderref =&quot;message/&quot; + messageSenderID + &quot;/&quot; + messageReceiverID;\n        String messagereceiverref =&quot;message/&quot; + messageReceiverID + &quot;/&quot; + messageSenderID;\n\n        DatabaseReference usermessagekeyref = Rootref.child(&quot;message&quot;)\n                .child(messageSenderID).child(messageReceiverID).push();\n        String messagepushid = usermessagekeyref.getKey();\n\n\n        Map messageTextBody = new HashMap();\n        messageTextBody.put(&quot;message&quot; , messageText);\n        messageTextBody.put(&quot;time&quot; , saveCurrentTime);\n        messageTextBody.put(&quot;date&quot; , saveCurrentDate);\n        messageTextBody.put(&quot;type&quot; , &quot;text&quot;);\n        messageTextBody.put(&quot;from&quot; , messageSenderID);\n\n\n        Map messageBodyDetails = new HashMap();\n        messageBodyDetails.put(messagesenderref + &quot;/&quot; + messagepushid , messageTextBody);\n        messageBodyDetails.put(messagereceiverref + &quot;/&quot; + messagepushid , messageTextBody);\n\n        Rootref.updateChildren(messageBodyDetails).addOnCompleteListener(new OnCompleteListener() {\n            @Override\n            public void onComplete(@NonNull Task task) {\n                if (task.isSuccessful()){\n\n                }\n                else {\n                    String message = task.getException().getMessage();\n                    Toast.makeText(context, &quot;Error :&quot; + message , Toast.LENGTH_SHORT).show();\n                }\n            }\n        });\n\n        Map messageTextBody3 = new HashMap();\n        messageTextBody3.put(&quot;Contact&quot;, &quot;1&quot;);\n        ContactRef.child(messageSenderID).child(messageReceiverID).updateChildren(messageTextBody3).addOnCompleteListener(new OnCompleteListener() {\n            @Override\n            public void onComplete(@NonNull Task task) {\n                if (task.isSuccessful()){\n                }\n            }\n        });\n\n        ContactRef.child(messageReceiverID).child(messageSenderID).updateChildren(messageTextBody3).addOnCompleteListener(new OnCompleteListener() {\n            @Override\n            public void onComplete(@NonNull Task task) {\n                if (task.isSuccessful()){\n                }\n            }\n        });\n</code></pre>\n<p>Contact list count:</p>\n<pre><code>ContactRef.addListenerForSingleValueEvent(new ValueEventListener() {\n    @Override\n    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n\n        countusercontact = (int) dataSnapshot.getChildrenCount();\n        contactcount.setText(Integer.toString(countusercontact ));\n\n\n    }\n\n    @Override\n    public void onCancelled(@NonNull DatabaseError databaseError) {\n\n    }\n});\n</code></pre>\n<p>Db:</p>\n<p><a href=\"https://i.stack.imgur.com/JoySF.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JoySF.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","image","postgresql","image-processing","postgis"],"answers":[{"tags":[],"owner":{"account_id":1668782,"reputation":744,"user_id":1535658,"accept_rate":57,"display_name":"onesixtyfourth"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1395403580,"creation_date":1395403580,"answer_id":22558313,"question_id":22558273,"body_markdown":"[This thread][1] may help you but I think you could do this by finding the differences in colour in your image.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/4287267/how-to-find-shapes-on-image","title":"java image white color extraction","body":"<p><a href=\"https://stackoverflow.com/questions/4287267/how-to-find-shapes-on-image\">This thread</a> may help you but I think you could do this by finding the differences in colour in your image.</p>\n"},{"tags":[],"owner":{"account_id":128865,"reputation":41645,"user_id":327026,"accept_rate":75,"display_name":"Mike T"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659546122,"creation_date":1395617589,"answer_id":22598563,"question_id":22558273,"body_markdown":"You need to &quot;polygonise&quot; your raster data into vectors.\r\n\r\nOne such tool is from [GDAL][1], with a method originally in C++, but also has bindings to Java.\r\n\r\n * [Java bindings (search for &quot;Polygonize&quot;)][2]\r\n * [C API description of parameters for GDALPolygonize][3]\r\n\r\nSome further hints on using the Polygonize method is that you will need to classify values of your raster as &quot;NO DATA&quot; values, then polygonise the remaining data portion. The resulting polygon can be placed in most geospatial vector formats, including a PostGIS database.\r\n\r\n----------\r\n\r\nAnother solution is to load the image into PostGIS raster, then use either [`ST_Polygon`][4] or [`ST_DumpAsPolygons`][5] to do essentially the same task as GDALPolygonize, but with fewer options.\n\n [1]: https://gdal.org/gdal_polygonize.html\n [2]: https://gdal.org/java/org/gdal/gdal/gdal.html\n [3]: https://web.archive.org/web/20180716151832/http://www.gdal.org:80/gdal__alg_8h.html#a3f522a9035d3512b5d414fb4752671b1\n [4]: https://postgis.net/docs/RT_ST_Polygon.html\n [5]: https://postgis.net/docs/RT_ST_DumpAsPolygons.html","title":"java image white color extraction","body":"<p>You need to &quot;polygonise&quot; your raster data into vectors.</p>\n<p>One such tool is from <a href=\"https://gdal.org/gdal_polygonize.html\" rel=\"nofollow noreferrer\">GDAL</a>, with a method originally in C++, but also has bindings to Java.</p>\n<ul>\n<li><a href=\"https://gdal.org/java/org/gdal/gdal/gdal.html\" rel=\"nofollow noreferrer\">Java bindings (search for &quot;Polygonize&quot;)</a></li>\n<li><a href=\"https://web.archive.org/web/20180716151832/http://www.gdal.org:80/gdal__alg_8h.html#a3f522a9035d3512b5d414fb4752671b1\" rel=\"nofollow noreferrer\">C API description of parameters for GDALPolygonize</a></li>\n</ul>\n<p>Some further hints on using the Polygonize method is that you will need to classify values of your raster as &quot;NO DATA&quot; values, then polygonise the remaining data portion. The resulting polygon can be placed in most geospatial vector formats, including a PostGIS database.</p>\n<hr />\n<p>Another solution is to load the image into PostGIS raster, then use either <a href=\"https://postgis.net/docs/RT_ST_Polygon.html\" rel=\"nofollow noreferrer\"><code>ST_Polygon</code></a> or <a href=\"https://postgis.net/docs/RT_ST_DumpAsPolygons.html\" rel=\"nofollow noreferrer\"><code>ST_DumpAsPolygons</code></a> to do essentially the same task as GDALPolygonize, but with fewer options.</p>\n"}],"owner":{"account_id":1730329,"reputation":55,"user_id":1584072,"accept_rate":33,"display_name":"boho91"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":152,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1659546122,"creation_date":1395403448,"question_id":22558273,"body_markdown":"how to extract each image with white color into separate sections as shown below?![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/rmw7m.png\r\n\r\nfrom the picture above, there will be nine separate section after the extract\r\n\r\nI have tried several algorithms such as fillgrid but not exactly what I expected.\r\n\r\n**so that I could store every sections into a PostGIS database as polygon geometry**\r\n\r\nWhat algorithm can I use? \r\nor maybe there is a function in java or postgis library?","title":"java image white color extraction","body":"<p>how to extract each image with white color into separate sections as shown below?<img src=\"https://i.stack.imgur.com/rmw7m.png\" alt=\"enter image description here\"></p>\n\n<p>from the picture above, there will be nine separate section after the extract</p>\n\n<p>I have tried several algorithms such as fillgrid but not exactly what I expected.</p>\n\n<p><strong>so that I could store every sections into a PostGIS database as polygon geometry</strong></p>\n\n<p>What algorithm can I use? \nor maybe there is a function in java or postgis library?</p>\n"},{"tags":["java","javac","javac-compiler-plugin"],"owner":{"account_id":7530483,"reputation":131,"user_id":5718898,"accept_rate":60,"display_name":"Holo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1659546102,"creation_date":1659546102,"question_id":73225150,"body_markdown":"Say I am writing annotation processor or compiler plugin, how can I get form `com.sun.source.tree.MethodTree`(/`JCTree.JCMethodDecl`) or `Symbol.MethodSymbol` to their &quot;super&quot; (if exists), e.g. if I try to compile\r\n\r\n```java\r\nclass A {\r\n     public void foo() {}\r\n}\r\nclass B extends A {\r\n     @Override public void foo() {}\r\n}\r\n``` \r\nI want to do something like:\r\n\r\n```java\r\npublic class printSuper extends ...\r\n        implements TaskListener {\r\n    ...\r\n    @Override\r\n    public void finished(TaskEvent taskEvt) {\r\n        if (taskEvt.getKind() != TaskEvent.Kind.ANALYZE) {\r\n            return;\r\n        }\r\n        taskEvt.getCompilationUnit().accept(new TreeScanner&lt;Void, Void&gt;() {\r\n            @Override\r\n            public Void visitMethod(MethodTree methodDecl, Void v) {\r\n                var zuper = magicToGetSuperDecl(methodDecl);\r\n                // for A.foo &gt; null/exception/some equivalent\r\n                // for B.foo &gt; A.foo\r\n            }\r\n        }, null);\r\n    }\r\n}\r\n```\r\n\r\nI tried to use the `TreePath` of `methodDecl`, but the best I got from there is the `javax.lang.model.element.Element` of the class of the method, I tried to use `trees.getPath(zuperElement)` I sometimes get `null`.\r\n\r\nAlso, from `trees.getPath(zuperElement).getLeaf()` I can get to list of methods the super class has, but I couldn&#39;t find a good way to get the specific method I from the super class.","title":"Get to super declaration using Java&#39;s compiler API","body":"<p>Say I am writing annotation processor or compiler plugin, how can I get form <code>com.sun.source.tree.MethodTree</code>(/<code>JCTree.JCMethodDecl</code>) or <code>Symbol.MethodSymbol</code> to their &quot;super&quot; (if exists), e.g. if I try to compile</p>\n<pre class=\"lang-java prettyprint-override\"><code>class A {\n     public void foo() {}\n}\nclass B extends A {\n     @Override public void foo() {}\n}\n</code></pre>\n<p>I want to do something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class printSuper extends ...\n        implements TaskListener {\n    ...\n    @Override\n    public void finished(TaskEvent taskEvt) {\n        if (taskEvt.getKind() != TaskEvent.Kind.ANALYZE) {\n            return;\n        }\n        taskEvt.getCompilationUnit().accept(new TreeScanner&lt;Void, Void&gt;() {\n            @Override\n            public Void visitMethod(MethodTree methodDecl, Void v) {\n                var zuper = magicToGetSuperDecl(methodDecl);\n                // for A.foo &gt; null/exception/some equivalent\n                // for B.foo &gt; A.foo\n            }\n        }, null);\n    }\n}\n</code></pre>\n<p>I tried to use the <code>TreePath</code> of <code>methodDecl</code>, but the best I got from there is the <code>javax.lang.model.element.Element</code> of the class of the method, I tried to use <code>trees.getPath(zuperElement)</code> I sometimes get <code>null</code>.</p>\n<p>Also, from <code>trees.getPath(zuperElement).getLeaf()</code> I can get to list of methods the super class has, but I couldn't find a good way to get the specific method I from the super class.</p>\n"},{"tags":["java","spring-boot","elasticsearch","jackson","geojson"],"comments":[{"owner":{"account_id":5843921,"reputation":210855,"user_id":4604579,"display_name":"Val"},"score":0,"creation_date":1659532850,"post_id":73221967,"comment_id":129317254,"body_markdown":"it doesn&#39;t seem like it&#39;s supported: https://github.com/spring-projects/spring-data-elasticsearch/issues/2045. A custom Jackson Deserializer could probably do the trick","body":"it doesn&#39;t seem like it&#39;s supported: <a href=\"https://github.com/spring-projects/spring-data-elasticsearch/issues/2045\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-data-elasticsearch/issues/&zwnj;&#8203;&hellip;</a>. A custom Jackson Deserializer could probably do the trick"},{"owner":{"account_id":17695950,"reputation":325,"user_id":12846701,"display_name":"cicada_"},"score":0,"creation_date":1659536186,"post_id":73221967,"comment_id":129318287,"body_markdown":"@Val Actually I&#39;m using java high-level rest client with geolatte-geojson. I&#39;ve used debugger and found that it needs to be in {type: POLYGON, coordinates: []} format. Is there anyway to get this from WKT?","body":"@Val Actually I&#39;m using java high-level rest client with geolatte-geojson. I&#39;ve used debugger and found that it needs to be in {type: POLYGON, coordinates: []} format. Is there anyway to get this from WKT?"},{"owner":{"account_id":5843921,"reputation":210855,"user_id":4604579,"display_name":"Val"},"score":0,"creation_date":1659536536,"post_id":73221967,"comment_id":129318435,"body_markdown":"There are probably a few libraries that do this: https://stackoverflow.com/questions/53957417/parse-geojson-file-with-java-topology-suite-or-geotools + https://javamana.com/2022/160/202206092314124785.html","body":"There are probably a few libraries that do this: <a href=\"https://stackoverflow.com/questions/53957417/parse-geojson-file-with-java-topology-suite-or-geotools\" title=\"parse geojson file with java topology suite or geotools\">stackoverflow.com/questions/53957417/&hellip;</a> + <a href=\"https://javamana.com/2022/160/202206092314124785.html\" rel=\"nofollow noreferrer\">javamana.com/2022/160/202206092314124785.html</a>"},{"owner":{"account_id":17695950,"reputation":325,"user_id":12846701,"display_name":"cicada_"},"score":0,"creation_date":1659542652,"post_id":73221967,"comment_id":129320555,"body_markdown":"Thanks will try using geo-tools, was just wondering if there is there any way to get data from elasticsearch in geojson format rather than WKT","body":"Thanks will try using geo-tools, was just wondering if there is there any way to get data from elasticsearch in geojson format rather than WKT"},{"owner":{"account_id":5843921,"reputation":210855,"user_id":4604579,"display_name":"Val"},"score":1,"creation_date":1659542999,"post_id":73221967,"comment_id":129320681,"body_markdown":"From ES, you get whatever you index into your source documents. If you index WKT, you get WKT, if you index GeoJson, you get GeoJson","body":"From ES, you get whatever you index into your source documents. If you index WKT, you get WKT, if you index GeoJson, you get GeoJson"},{"owner":{"account_id":17695950,"reputation":325,"user_id":12846701,"display_name":"cicada_"},"score":0,"creation_date":1659544143,"post_id":73221967,"comment_id":129321080,"body_markdown":"Hi @Val, \nThank you ver much, that helped me. I mean all I had to do was to store as GeoJSON instead of WKT. I&#39;m just learning dealing with geoJSON data thanks for helping me out. You can post your comment as an answer I&#39;ll accept that :)","body":"Hi @Val,  Thank you ver much, that helped me. I mean all I had to do was to store as GeoJSON instead of WKT. I&#39;m just learning dealing with geoJSON data thanks for helping me out. You can post your comment as an answer I&#39;ll accept that :)"},{"owner":{"account_id":17695950,"reputation":325,"user_id":12846701,"display_name":"cicada_"},"score":0,"creation_date":1659544336,"post_id":73221967,"comment_id":129321154,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/247003/discussion-between-cicada-and-val).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/247003/discussion-between-cicada-and-val\">continue this discussion in chat</a>."}],"answers":[{"tags":[],"owner":{"account_id":5843921,"reputation":210855,"user_id":4604579,"display_name":"Val"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659545742,"creation_date":1659545742,"answer_id":73225066,"question_id":73221967,"body_markdown":"If you want to get GeoJson back, you should just send GeoJson into your source documents instead of WKT, that way it&#39;ll be much easier than doing conversions  from WKT to GeoJson on read.","title":"Deserialize geojson from elasticsearch response into POJO","body":"<p>If you want to get GeoJson back, you should just send GeoJson into your source documents instead of WKT, that way it'll be much easier than doing conversions  from WKT to GeoJson on read.</p>\n"}],"owner":{"account_id":17695950,"reputation":325,"user_id":12846701,"display_name":"cicada_"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":391,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73225066,"answer_count":1,"score":0,"last_activity_date":1659545742,"creation_date":1659530586,"question_id":73221967,"body_markdown":"I&#39;m trying to deserialize the response of elasticsearch using jackson.\r\nEverything works fine until I add geometry.\r\n\r\n\r\nI&#39;m using [geolatte-geojson][1] to handle geometry.\r\n\r\n\r\nBut for some reason the deserialization of elasticsearch response is not going well, probably &#39;cause in WKT format.\r\n\r\nI&#39;ve created a bean for geolatteModule for deserialization:\r\n\r\n    @Bean\r\n    public GeolatteGeomModule geomModule() {\r\n        return new GeolatteGeomModule();\r\n    }\r\n\r\n\r\nHere&#39;s how geometry response of elasticsearch looks like:\r\n\r\n    POLYGON((-95.26605606079102 29.724060758766743,-95.26631355285645 29.70900307937485,-95.23798942565917 29.702218931464575,-95.22185325622557 29.704306410402122,-95.2236557006836 29.72592417587012,-95.25712966918945 29.727638489043596,-95.26605606079102 29.724060758766743))\r\n\r\n\r\nHere&#39;s how I&#39;m trying to deserialize the response of elasticsearch to POJO:\r\n\r\n    Document document = objectMapper.convertValue(hit.getSourceAsMap(), Document.class);\r\n\r\n\r\nSome additional points that might be helpful:\r\n&lt;br/&gt;I&#39;m also sending geometry object to DTO, when sending it as WKT I&#39;m getting the same error. But when sending it in geojson format it works fine.\r\n\r\n\r\nError that I&#39;m encountering:\r\n\r\n    java.lang.IllegalArgumentException: (was java.lang.NullPointerException) (through reference chain: com.kayrros.searchmanager.model.entity.Document[&quot;geometry&quot;])\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._convert(ObjectMapper.java:4393)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.convertValue(ObjectMapper.java:4324)\r\n\r\n  [1]: https://mvnrepository.com/artifact/org.geolatte/geolatte-geojson/1.8.2","title":"Deserialize geojson from elasticsearch response into POJO","body":"<p>I'm trying to deserialize the response of elasticsearch using jackson.\nEverything works fine until I add geometry.</p>\n<p>I'm using <a href=\"https://mvnrepository.com/artifact/org.geolatte/geolatte-geojson/1.8.2\" rel=\"nofollow noreferrer\">geolatte-geojson</a> to handle geometry.</p>\n<p>But for some reason the deserialization of elasticsearch response is not going well, probably 'cause in WKT format.</p>\n<p>I've created a bean for geolatteModule for deserialization:</p>\n<pre><code>@Bean\npublic GeolatteGeomModule geomModule() {\n    return new GeolatteGeomModule();\n}\n</code></pre>\n<p>Here's how geometry response of elasticsearch looks like:</p>\n<pre><code>POLYGON((-95.26605606079102 29.724060758766743,-95.26631355285645 29.70900307937485,-95.23798942565917 29.702218931464575,-95.22185325622557 29.704306410402122,-95.2236557006836 29.72592417587012,-95.25712966918945 29.727638489043596,-95.26605606079102 29.724060758766743))\n</code></pre>\n<p>Here's how I'm trying to deserialize the response of elasticsearch to POJO:</p>\n<pre><code>Document document = objectMapper.convertValue(hit.getSourceAsMap(), Document.class);\n</code></pre>\n<p>Some additional points that might be helpful:\n<br/>I'm also sending geometry object to DTO, when sending it as WKT I'm getting the same error. But when sending it in geojson format it works fine.</p>\n<p>Error that I'm encountering:</p>\n<pre><code>java.lang.IllegalArgumentException: (was java.lang.NullPointerException) (through reference chain: com.kayrros.searchmanager.model.entity.Document[&quot;geometry&quot;])\nat com.fasterxml.jackson.databind.ObjectMapper._convert(ObjectMapper.java:4393)\nat com.fasterxml.jackson.databind.ObjectMapper.convertValue(ObjectMapper.java:4324)\n</code></pre>\n"},{"tags":["java","selenium"],"answers":[{"tags":[],"owner":{"account_id":3126424,"reputation":2086,"user_id":9684373,"display_name":"Prany"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1526918518,"creation_date":1526918518,"answer_id":50452594,"question_id":50451815,"body_markdown":"Try chord method\r\n\r\n    String selectkeys= Keys.chord(Keys.CONTROL, Keys.SUBTRACT);","title":"Exception: Key Down / Up events only make sense for modifier keys","body":"<p>Try chord method</p>\n\n<pre><code>String selectkeys= Keys.chord(Keys.CONTROL, Keys.SUBTRACT);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3719415,"reputation":87,"user_id":3094794,"display_name":"David"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551111651,"creation_date":1551111651,"answer_id":54870527,"question_id":50451815,"body_markdown":"Broadly speaking you can use:\r\n\r\n    Actions act = new Actions(driver);\r\n\tact.sendKeys(Keys.chord(Keys.CONTROL, &quot;t&quot;));\r\n\r\nExcept if you are using **Chrome Driver** there is **a bug** that does not allow to send some commands:\r\n\r\nThese won&#39;t work \r\n\r\n    act.sendKeys(Keys.chord(Keys.CONTROL, &quot;t&quot;));\r\n    act.sendKeys(Keys.chord(Keys.CONTROL, &quot;n&quot;));\r\n\r\nThis work:\r\n\r\n    // open in a new tab\r\n    driver.findElement(By.id(&quot;linkID&quot;)).sendKeys(Keys.chord(Keys.CONTROL, Keys.ENTER));\r\n\r\n\r\nAt some moment they could solve the bug and it will work again\r\nThe bug track: https://bugs.chromium.org/p/chromedriver/issues/detail?id=581","title":"Exception: Key Down / Up events only make sense for modifier keys","body":"<p>Broadly speaking you can use:</p>\n\n<pre><code>Actions act = new Actions(driver);\nact.sendKeys(Keys.chord(Keys.CONTROL, \"t\"));\n</code></pre>\n\n<p>Except if you are using <strong>Chrome Driver</strong> there is <strong>a bug</strong> that does not allow to send some commands:</p>\n\n<p>These won't work </p>\n\n<pre><code>act.sendKeys(Keys.chord(Keys.CONTROL, \"t\"));\nact.sendKeys(Keys.chord(Keys.CONTROL, \"n\"));\n</code></pre>\n\n<p>This work:</p>\n\n<pre><code>// open in a new tab\ndriver.findElement(By.id(\"linkID\")).sendKeys(Keys.chord(Keys.CONTROL, Keys.ENTER));\n</code></pre>\n\n<p>At some moment they could solve the bug and it will work again\nThe bug track: <a href=\"https://bugs.chromium.org/p/chromedriver/issues/detail?id=581\" rel=\"nofollow noreferrer\">https://bugs.chromium.org/p/chromedriver/issues/detail?id=581</a></p>\n"},{"tags":[],"owner":{"account_id":25919016,"reputation":1,"user_id":19641996,"display_name":"Shiva"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659545026,"creation_date":1659024749,"answer_id":73155975,"question_id":50451815,"body_markdown":"`keyUp` and `keyDown` only allow the modifier keys as input parameters. All other keys will raise an `IllegalArgumentException`. Use `sendKeys()` from the `Actions` class to perform the operation for other keys. But if you want to press and hold a key, use the `Robot` class. ","title":"Exception: Key Down / Up events only make sense for modifier keys","body":"<p><code>keyUp</code> and <code>keyDown</code> only allow the modifier keys as input parameters. All other keys will raise an <code>IllegalArgumentException</code>. Use <code>sendKeys()</code> from the <code>Actions</code> class to perform the operation for other keys. But if you want to press and hold a key, use the <code>Robot</code> class.</p>\n"}],"owner":{"account_id":3447189,"reputation":3101,"user_id":2887713,"accept_rate":25,"display_name":"Steve Staple"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8386,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":50452594,"answer_count":3,"score":0,"last_activity_date":1659545026,"creation_date":1526915768,"question_id":50451815,"body_markdown":"I am working with Java Selenium, testing using the Firefox driver.\r\n\r\nI want to send Ctrl + - to my Firefox browser.\r\n\r\nThis is my code:\r\n\r\n        Common.myPrint(thisClass + &quot; *** zoomOut ***&quot;);\r\n\t\tActions actionObject = new Actions(driver);\r\n\t\ttry {\r\n\t\t\tactionObject.keyDown(Keys.CONTROL).sendKeys(Keys.CONTROL).keyUp(Keys.SUBTRACT).perform();\r\n\r\n\t\t\t// reset this counter - basis for request counter\r\n\r\n\t\t\tglobal.variables.dataTotalCount = 0;\r\n\r\n\t\t\treturn true;\r\n\t\t} catch (Exception e) {\r\n\t\t\tint errorCode = 1525182195;\r\n\t\t\tSystem.err.println(thisClass + &quot; error code: &quot; + errorCode + &quot; Exception: &quot; + e.getMessage());\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\r\n\r\ni am receiving this error message: Exception: Key Down / Up events only make sense for modifier keys.\r\n\r\nThat is all very well, but how can I send Ctrl &amp; - (to reduce font size)","title":"Exception: Key Down / Up events only make sense for modifier keys","body":"<p>I am working with Java Selenium, testing using the Firefox driver.</p>\n\n<p>I want to send Ctrl + - to my Firefox browser.</p>\n\n<p>This is my code:</p>\n\n<pre><code>    Common.myPrint(thisClass + \" *** zoomOut ***\");\n    Actions actionObject = new Actions(driver);\n    try {\n        actionObject.keyDown(Keys.CONTROL).sendKeys(Keys.CONTROL).keyUp(Keys.SUBTRACT).perform();\n\n        // reset this counter - basis for request counter\n\n        global.variables.dataTotalCount = 0;\n\n        return true;\n    } catch (Exception e) {\n        int errorCode = 1525182195;\n        System.err.println(thisClass + \" error code: \" + errorCode + \" Exception: \" + e.getMessage());\n        return false;\n    }\n</code></pre>\n\n<p>i am receiving this error message: Exception: Key Down / Up events only make sense for modifier keys.</p>\n\n<p>That is all very well, but how can I send Ctrl &amp; - (to reduce font size)</p>\n"},{"tags":["java","debugging","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":14352569,"reputation":703,"user_id":10367546,"display_name":"AleksW"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1542711819,"creation_date":1542709920,"answer_id":53391037,"question_id":53390954,"body_markdown":"I think what you&#39;re looking for is here:\n\nhttps://www.jetbrains.com/help/idea/configuring-breakpoints.html\n\n&gt; To set a breakpoint the current one depends on, select it from the\n&gt; Disabled until selected breakpoint hit drop-down list. Once dependency\n&gt; has been set, the current breakpoint is disabled until selected one is\n&gt; hit. \n&gt;\n&gt; Choose Disable again radio button to disable the current\n&gt; breakpoint after selected breakpoint was hit.\n&gt; \n&gt; Choose Leave enable radio button to keep the current breakpoint\n&gt; enabled after selected breakpoint was hit.\n\nSo it looks like you will need to set one on the `SomeClass.doSomething()` Line, then wherever you need it in the `Utils.doSomething()` method","title":"Stop on breakpoint when class present in stacktrace","body":"<p>I think what you're looking for is here:</p>\n<p><a href=\"https://www.jetbrains.com/help/idea/configuring-breakpoints.html\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/idea/configuring-breakpoints.html</a></p>\n<blockquote>\n<p>To set a breakpoint the current one depends on, select it from the\nDisabled until selected breakpoint hit drop-down list. Once dependency\nhas been set, the current breakpoint is disabled until selected one is\nhit.</p>\n<p>Choose Disable again radio button to disable the current\nbreakpoint after selected breakpoint was hit.</p>\n<p>Choose Leave enable radio button to keep the current breakpoint\nenabled after selected breakpoint was hit.</p>\n</blockquote>\n<p>So it looks like you will need to set one on the <code>SomeClass.doSomething()</code> Line, then wherever you need it in the <code>Utils.doSomething()</code> method</p>\n"},{"tags":[],"owner":{"account_id":6703028,"reputation":492,"user_id":5168941,"display_name":"literg"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1542783212,"creation_date":1542783212,"answer_id":53406684,"question_id":53390954,"body_markdown":"I have came up with adding such condition, it is not ideal but does the job\r\n\r\n    Arrays.asList((Thread.currentThread().getStackTrace())).stream()\r\n        .anyMatch(ste -&gt; ste.declaringClass.equals(&quot;debugging.SomeClass&quot;))","title":"Stop on breakpoint when class present in stacktrace","body":"<p>I have came up with adding such condition, it is not ideal but does the job</p>\n\n<pre><code>Arrays.asList((Thread.currentThread().getStackTrace())).stream()\n    .anyMatch(ste -&gt; ste.declaringClass.equals(\"debugging.SomeClass\"))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":178970,"reputation":5078,"user_id":411282,"accept_rate":67,"display_name":"Joshua Goldberg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659544838,"creation_date":1659544437,"answer_id":73224785,"question_id":53390954,"body_markdown":"You can use a single breakpoint with a breakpoint filter, though [the documentation][1] could use some improvement.  You&#39;d want a &quot;Caller filter&quot; for this case, and I find the easiest way to create it is to debug until you&#39;re stopped at that breakpoint (perhaps `Force Run to Cursor`) and then use breakpoint intentions to add the filter:\r\n\r\n***With the debugger is stopped at the breakpoint***, make sure the cursor is on the line with the breakpoint if needed, and then use `opt-Enter` to get the inspections menu, which will now include options to Stop only if... or Do not stop if... using the immediate calling method and class in the stack.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nYou can also enter Caller filters directly from the breakpoint popup when it&#39;s expanded, but I find the semantics confusing there (include vs exclude in a filter to stop or not stop).  The intentions make it very clear how to make the debugger stop/not stop in the given case.\r\n\r\nNote, I don&#39;t think Caller filters work for the general case in the question&#39;s title (when you need to search back further than one step in the stack), but it will work for examples like the one in the question.\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/using-breakpoints.html\r\n  [2]: https://i.stack.imgur.com/LWyyA.png","title":"Stop on breakpoint when class present in stacktrace","body":"<p>You can use a single breakpoint with a breakpoint filter, though <a href=\"https://www.jetbrains.com/help/idea/using-breakpoints.html\" rel=\"nofollow noreferrer\">the documentation</a> could use some improvement.  You'd want a &quot;Caller filter&quot; for this case, and I find the easiest way to create it is to debug until you're stopped at that breakpoint (perhaps <code>Force Run to Cursor</code>) and then use breakpoint intentions to add the filter:</p>\n<p><em><strong>With the debugger is stopped at the breakpoint</strong></em>, make sure the cursor is on the line with the breakpoint if needed, and then use <code>opt-Enter</code> to get the inspections menu, which will now include options to Stop only if... or Do not stop if... using the immediate calling method and class in the stack.</p>\n<p><a href=\"https://i.stack.imgur.com/LWyyA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LWyyA.png\" alt=\"enter image description here\" /></a></p>\n<p>You can also enter Caller filters directly from the breakpoint popup when it's expanded, but I find the semantics confusing there (include vs exclude in a filter to stop or not stop).  The intentions make it very clear how to make the debugger stop/not stop in the given case.</p>\n<p>Note, I don't think Caller filters work for the general case in the question's title (when you need to search back further than one step in the stack), but it will work for examples like the one in the question.</p>\n"}],"owner":{"account_id":6703028,"reputation":492,"user_id":5168941,"display_name":"literg"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":442,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":53406684,"answer_count":3,"score":5,"last_activity_date":1659544838,"creation_date":1542709672,"question_id":53390954,"body_markdown":"Is there a way in Intellij to create conditional breakpoint when specific class is present in the stacktrace? Alternatively when specific breakpoint was passed in this stacktrace.\r\n\r\nExample given:\r\nLet&#39;s imagine that we have some utility method `Utils.doSomething()` and I want to stop there only when this method was executed from `SomeClass.doSomething()`.\r\n\r\nI do know that there is &#39;Disable until breakpoint is hit&#39; but this makes code execution stop there anytime it is hit after the initial condition is met.\r\n\r\nExample:\r\n\r\n    class SomeClass {\r\n\t\tvoid doSomething() {\r\n\t\t\tint y = 1; // Breakpoint here\r\n\t\t\tUtils.doSomething();\r\n\t\t\tUtils.doSomething();\r\n\t\t}\r\n\r\n\t\tvoid doSomethingElse() {\r\n\t\t\tUtils.doSomething();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic class Utils {\r\n\t\tstatic void doSomething() {\r\n\t\t\tint x = 1; // Breakpoint with condition here\r\n\t\t}\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void test() {\r\n\t\tSomeClass someInstance = new SomeClass();\r\n\t\tsomeInstance.doSomething();\r\n\t\tsomeInstance.doSomethingElse();\r\n\t\tsomeInstance.doSomething();\r\n\t}\r\n\r\nBreakpoint on `int y = 1;`\r\n\r\nBreakpoint with condition on `int x = 1;`\r\n\r\nIt is stopping in `Utils.doSomething()` when executed first from `SomeClass.doSomething()` but it is not stopping when `Utils.doSomething()` is executed again on next line.\r\n\r\nIt is correctly not stopping when executed through `SomeClass.doSomethingElse()`\r\n","title":"Stop on breakpoint when class present in stacktrace","body":"<p>Is there a way in Intellij to create conditional breakpoint when specific class is present in the stacktrace? Alternatively when specific breakpoint was passed in this stacktrace.</p>\n\n<p>Example given:\nLet's imagine that we have some utility method <code>Utils.doSomething()</code> and I want to stop there only when this method was executed from <code>SomeClass.doSomething()</code>.</p>\n\n<p>I do know that there is 'Disable until breakpoint is hit' but this makes code execution stop there anytime it is hit after the initial condition is met.</p>\n\n<p>Example:</p>\n\n<pre><code>class SomeClass {\n    void doSomething() {\n        int y = 1; // Breakpoint here\n        Utils.doSomething();\n        Utils.doSomething();\n    }\n\n    void doSomethingElse() {\n        Utils.doSomething();\n    }\n}\n\nstatic class Utils {\n    static void doSomething() {\n        int x = 1; // Breakpoint with condition here\n    }\n}\n\n@Test\npublic void test() {\n    SomeClass someInstance = new SomeClass();\n    someInstance.doSomething();\n    someInstance.doSomethingElse();\n    someInstance.doSomething();\n}\n</code></pre>\n\n<p>Breakpoint on <code>int y = 1;</code></p>\n\n<p>Breakpoint with condition on <code>int x = 1;</code></p>\n\n<p>It is stopping in <code>Utils.doSomething()</code> when executed first from <code>SomeClass.doSomething()</code> but it is not stopping when <code>Utils.doSomething()</code> is executed again on next line.</p>\n\n<p>It is correctly not stopping when executed through <code>SomeClass.doSomethingElse()</code></p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8857,"page":1135,"page_size":100}
